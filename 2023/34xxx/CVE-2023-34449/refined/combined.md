=== Content from github.com_8f6155bc_20250114_194014.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuse-ink%2Fink%2Fcommit%2Ff1407ee9f87e5f64d467a22d26ee88f61db7f3db)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuse-ink%2Fink%2Fcommit%2Ff1407ee9f87e5f64d467a22d26ee88f61db7f3db)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=use-ink%2Fink)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[use-ink](/use-ink)
/
**[ink](/use-ink/ink)**
Public

* [Notifications](/login?return_to=%2Fuse-ink%2Fink) You must be signed in to change notification settings
* [Fork
  443](/login?return_to=%2Fuse-ink%2Fink)
* [Star
   1.4k](/login?return_to=%2Fuse-ink%2Fink)

* [Code](/use-ink/ink)
* [Issues
  131](/use-ink/ink/issues)
* [Pull requests
  16](/use-ink/ink/pulls)
* [Actions](/use-ink/ink/actions)
* [Projects
  1](/use-ink/ink/projects)
* [Security](/use-ink/ink/security)
* [Insights](/use-ink/ink/pulse)

Additional navigation options

* [Code](/use-ink/ink)
* [Issues](/use-ink/ink/issues)
* [Pull requests](/use-ink/ink/pulls)
* [Actions](/use-ink/ink/actions)
* [Projects](/use-ink/ink/projects)
* [Security](/use-ink/ink/security)
* [Insights](/use-ink/ink/pulse)

## Commit

[Permalink](/use-ink/ink/commit/f1407ee9f87e5f64d467a22d26ee88f61db7f3db)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-853p-5678-hv8f](https://github.com/advisories/GHSA-853p-5678-hv8f "GHSA-853p-5678-hv8f")

[Browse files](/use-ink/ink/tree/f1407ee9f87e5f64d467a22d26ee88f61db7f3db)
Browse the repository at this point in the history

```
* Handle `LangError` from `DelegateCall`

* Add basic delegate E2E test

* Get test working with integration flipper

* Use `incrementer` for test instead

* Add tests to make sure that `LangError`s can be handled

* Get rid of references to the interation Flipper
```

* Loading branch information

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

[HCastano](/use-ink/ink/commits?author=HCastano "View all commits by HCastano")
authored
Jun 14, 2023

1 parent
[2eba99e](/use-ink/ink/commit/2eba99ee445a4aee34d0919041388e7e727f7ed8)

commit f1407ee

 Show file tree

 Hide file tree

Showing
**8 changed files**
with
**269 additions**
and
**20 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* crates

  + env/src

    - crates/env/src/api.rs
      [api.rs](#diff-e7cc1cdb3856da1293c785de863703d5961c324aa2018decb0166ea1eb0631e8)
    - crates/env/src/backend.rs
      [backend.rs](#diff-701a682298dca0092ece37bd8fdbd63bb23c309f961ef5573e46d3c99847c6a2)
    - call

      * crates/env/src/call/call\_builder.rs
        [call\_builder.rs](#diff-a9f75de39316a4e5a606303cb31375fd75b6c2ca31b60c7ce20f48c24911adff)
    - engine

      * off\_chain

        + crates/env/src/engine/off\_chain/impls.rs
          [impls.rs](#diff-81cad3655bbb95aba1f6f706478ff279e84469a20f5ff0dd37a33cc845c1503f)
      * on\_chain

        + crates/env/src/engine/on\_chain/impls.rs
          [impls.rs](#diff-86e0b35d78f68c26eae0c387fc9c9357b61d9b15806750677e96b2b137ba8419)
  + ink/src

    - crates/ink/src/env\_access.rs
      [env\_access.rs](#diff-dc88d2ec03f5e5a8d78e38b546b77ccfb8b4b6301f45e6e7a33d1560aba6ec62)
* integration-tests/lang-err-integration-tests/call-builder-delegate

  + integration-tests/lang-err-integration-tests/call-builder-delegate/Cargo.toml
    [Cargo.toml](#diff-616c556fd5d42323b8027238b5c4ed9cdc5b1d64cbc0f48f6363ff7addc8a2d1)
  + integration-tests/lang-err-integration-tests/call-builder-delegate/lib.rs
    [lib.rs](#diff-b383cd8ea2639323e644cd0daaa327547d5d06087660f39b9e4df1edebf368ba)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[crates/env/src/api.rs](#diff-e7cc1cdb3856da1293c785de863703d5961c324aa2018decb0166ea1eb0631e8 "crates/env/src/api.rs")

Show comments

[View file](/use-ink/ink/blob/f1407ee9f87e5f64d467a22d26ee88f61db7f3db/crates/env/src/api.rs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -300,7 +300,7 @@ where |
|  |  | /// - If the called code execution has trapped. |
|  |  | pub fn invoke\_contract\_delegate<E, Args, R>( |
|  |  | params: &CallParams<E, DelegateCall<E>, Args, R>, |
|  |  | ) -> Result<R> |
|  |  | ) -> Result<ink\_primitives::MessageResult<R>> |
|  |  | where |
|  |  | E: Environment, |
|  |  | Args: scale::Encode, |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[crates/env/src/backend.rs](#diff-701a682298dca0092ece37bd8fdbd63bb23c309f961ef5573e46d3c99847c6a2 "crates/env/src/backend.rs")

Show comments

[View file](/use-ink/ink/blob/f1407ee9f87e5f64d467a22d26ee88f61db7f3db/crates/env/src/backend.rs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -433,7 +433,7 @@ pub trait TypedEnvBackend: EnvBackend { |
|  |  | fn invoke\_contract\_delegate<E, Args, R>( |
|  |  | &mut self, |
|  |  | call\_data: &CallParams<E, DelegateCall<E>, Args, R>, |
|  |  | ) -> Result<R> |
|  |  | ) -> Result<ink\_primitives::MessageResult<R>> |
|  |  | where |
|  |  | E: Environment, |
|  |  | Args: scale::Encode, |
| Expand Down | |  |

36 changes: 21 additions & 15 deletions

36
[crates/env/src/call/call\_builder.rs](#diff-a9f75de39316a4e5a606303cb31375fd75b6c2ca31b60c7ce20f48c24911adff "crates/env/src/call/call_builder.rs")

Show comments

[View file](/use-ink/ink/blob/f1407ee9f87e5f64d467a22d26ee88f61db7f3db/crates/env/src/call/call_builder.rs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -151,13 +151,17 @@ where |
|  |  | /// |
|  |  | /// # Panics |
|  |  | /// |
|  |  | /// This method panics if it encounters an [`ink::env::Error`][`crate::Error`]. If you |
|  |  | /// want to handle those use the [`try\_invoke`][`CallParams::try\_invoke`] method |
|  |  | /// instead. |
|  |  | /// This method panics if it encounters an [`ink::env::Error`][`crate::Error`] or an |
|  |  | /// [`ink::primitives::LangError`][`ink\_primitives::LangError`]. If you want to handle |
|  |  | /// those use the [`try\_invoke`][`CallParams::try\_invoke`] method instead. |
|  |  | pub fn invoke(&self) -> R { |
|  |  | crate::invoke\_contract\_delegate(self).unwrap\_or\_else(|env\_error| { |
|  |  | panic!("Cross-contract call failed with {env\_error:?}") |
|  |  | }) |
|  |  | crate::invoke\_contract\_delegate(self) |
|  |  | .unwrap\_or\_else(|env\_error| { |
|  |  | panic!("Cross-contract call failed with {env\_error:?}") |
|  |  | }) |
|  |  | .unwrap\_or\_else(|lang\_error| { |
|  |  | panic!("Cross-contract call failed with {lang\_error:?}") |
|  |  | }) |
|  |  | } |
|  |  |  |
|  |  | /// Invoke the contract using Delegate Call semantics with the given built-up call |
| Expand All | | @@ -167,9 +171,10 @@ where |
|  |  | /// |
|  |  | /// # Note |
|  |  | /// |
|  |  | /// On failure this returns an [`ink::env::Error`][`crate::Error`] which can be |
|  |  | /// On failure this returns an outer [`ink::env::Error`][`crate::Error`] or inner |
|  |  | /// [`ink::primitives::LangError`][`ink\_primitives::LangError`], both of which can be |
|  |  | /// handled by the caller. |
|  |  | pub fn try\_invoke(&self) -> Result<R, crate::Error> { |
|  |  | pub fn try\_invoke(&self) -> Result<ink\_primitives::MessageResult<R>, crate::Error> { |
|  |  | crate::invoke\_contract\_delegate(self) |
|  |  | } |
|  |  | } |
| Expand Down  Expand Up | | @@ -714,7 +719,7 @@ where |
|  |  | /// |
|  |  | /// On failure this an [`ink::env::Error`][`crate::Error`] which can be handled by the |
|  |  | /// caller. |
|  |  | pub fn try\_invoke(self) -> Result<(), Error> { |
|  |  | pub fn try\_invoke(self) -> Result<ink\_primitives::MessageResult<()>, Error> { |
|  |  | self.params().try\_invoke() |
|  |  | } |
|  |  | } |
| Expand Down  Expand Up | | @@ -761,9 +766,9 @@ where |
|  |  | /// |
|  |  | /// # Panics |
|  |  | /// |
|  |  | /// This method panics if it encounters an [`ink::env::Error`][`crate::Error`] |
|  |  | /// If you want to handle those use the [`try\_invoke`][`CallBuilder::try\_invoke`] |
|  |  | /// method instead. |
|  |  | /// This method panics if it encounters an [`ink::env::Error`][`crate::Error`] or an |
|  |  | /// [`ink::primitives::LangError`][`ink\_primitives::LangError`]. If you want to handle |
|  |  | /// those use the [`try\_invoke`][`CallBuilder::try\_invoke`] method instead. |
|  |  | pub fn invoke(self) -> R { |
|  |  | self.params().invoke() |
|  |  | } |
| Expand All | | @@ -773,9 +778,10 @@ where |
|  |  | /// |
|  |  | /// # Note |
|  |  | /// |
|  |  | /// On failure this an [`ink::env::Error`][`crate::Error`] which can be handled by the |
|  |  | /// caller. |
|  |  | pub fn try\_invoke(self) -> Result<R, Error> { |
|  |  | /// On failure this returns an outer [`ink::env::Error`][`crate::Error`] or inner |
|  |  | /// [`ink::primitives::LangError`][`ink\_primitives::LangError`], both of which can be |
|  |  | /// handled by the caller. |
|  |  | pub fn try\_invoke(self) -> Result<ink\_primitives::MessageResult<R>, Error> { |
|  |  | self.params().try\_invoke() |
|  |  | } |
|  |  | } |

2 changes: 1 addition & 1 deletion

2
[crates/env/src/engine/off\_chain/impls.rs](#diff-81cad3655bbb95aba1f6f706478ff279e84469a20f5ff0dd37a33cc845c1503f "crates/env/src/engine/off_chain/impls.rs")

Show comments

[View file](/use-ink/ink/blob/f1407ee9f87e5f64d467a22d26ee88f61db7f3db/crates/env/src/engine/off_chain/impls.rs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -453,7 +453,7 @@ impl TypedEnvBackend for EnvInstance { |
|  |  | fn invoke\_contract\_delegate<E, Args, R>( |
|  |  | &mut self, |
|  |  | params: &CallParams<E, DelegateCall<E>, Args, R>, |
|  |  | ) -> Result<R> |
|  |  | ) -> Result<ink\_primitives::MessageResult<R>> |
|  |  | where |
|  |  | E: Environment, |
|  |  | Args: scale::Encode, |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[crates/env/src/engine/on\_chain/impls.rs](#diff-86e0b35d78f68c26eae0c387fc9c9357b61d9b15806750677e96b2b137ba8419 "crates/env/src/engine/on_chain/impls.rs")

Show comments

[View file](/use-ink/ink/blob/f1407ee9f87e5f64d467a22d26ee88f61db7f3db/crates/env/src/engine/on_chain/impls.rs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -444,7 +444,7 @@ impl TypedEnvBackend for EnvInstance { |
|  |  | fn invoke\_contract\_delegate<E, Args, R>( |
|  |  | &mut self, |
|  |  | params: &CallParams<E, DelegateCall<E>, Args, R>, |
|  |  | ) -> Result<R> |
|  |  | ) -> Result<ink\_primitives::MessageResult<R>> |
|  |  | where |
|  |  | E: Environment, |
|  |  | Args: scale::Encode, |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[crates/ink/src/env\_access.rs](#diff-dc88d2ec03f5e5a8d78e38b546b77ccfb8b4b6301f45e6e7a33d1560aba6ec62 "crates/ink/src/env_access.rs")

Show comments

[View file](/use-ink/ink/blob/f1407ee9f87e5f64d467a22d26ee88f61db7f3db/crates/ink/src/env_access.rs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -631,7 +631,7 @@ where |
|  |  | pub fn invoke\_contract\_delegate<Args, R>( |
|  |  | self, |
|  |  | params: &CallParams<E, DelegateCall<E>, Args, R>, |
|  |  | ) -> Result<R> |
|  |  | ) -> Result<ink\_primitives::MessageResult<R>> |
|  |  | where |
|  |  | Args: scale::Encode, |
|  |  | R: scale::Decode, |
| Expand Down | |  |

32 changes: 32 additions & 0 deletions

32
[integration-tests/lang-err-integration-tests/call-builder-delegate/Cargo.toml](#diff-616c556fd5d42323b8027238b5c4ed9cdc5b1d64cbc0f48f6363ff7addc8a2d1 "integration-tests/lang-err-integration-tests/call-builder-delegate/Cargo.toml")

Show comments

[View file](/use-ink/ink/blob/f1407ee9f87e5f64d467a22d26ee88f61db7f3db/integration-tests/lang-err-integration-tests/call-builder-delegate/Cargo.toml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,32 @@ |
|  |  | [package] |
|  |  | name = "call\_builder\_delegate" |
|  |  | version = "4.2.0" |
|  |  | authors = ["Parity Technologies <admin@parity.io>"] |
|  |  | edition = "2021" |
|  |  | publish = false |
|  |  |  |
|  |  | [dependencies] |
|  |  | ink = { path = "../../../crates/ink", default-features = false } |
|  |  |  |
|  |  | scale = { package = "parity-scale-codec", version = "3", default-features = false, features = ["derive"] } |
|  |  | scale-info = { version = "2.6", default-features = false, features = ["derive"], optional = true } |
|  |  |  |
|  |  | incrementer = { path = "../../incrementer", default-features = false, features = ["ink-as-dependency"] } |
|  |  |  |
|  |  | [dev-dependencies] |
|  |  | ink\_e2e = { path = "../../../crates/e2e" } |
|  |  |  |
|  |  | [lib] |
|  |  | path = "lib.rs" |
|  |  |  |
|  |  | [features] |
|  |  | default = ["std"] |
|  |  | std = [ |
|  |  | "ink/std", |
|  |  | "scale/std", |
|  |  | "scale-info/std", |
|  |  |  |
|  |  | "incrementer/std", |
|  |  | ] |
|  |  | ink-as-dependency = [] |
|  |  | e2e-tests = [] |

211 changes: 211 additions & 0 deletions

211
[integration-tests/lang-err-integration-tests/call-builder-delegate/lib.rs](#diff-b383cd8ea2639323e644cd0daaa327547d5d06087660f39b9e4df1edebf368ba "integration-tests/lang-err-integration-tests/call-builder-delegate/lib.rs")

Show comments

[View file](/use-ink/ink/blob/f1407ee9f87e5f64d467a22d26ee88f61db7f3db/integration-tests/lang-err-integration-tests/call-builder-delegate/lib.rs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,211 @@ |
|  |  | //! # Integration Tests for `LangError` |
|  |  | //! |
|  |  | //! This contract is used to ensure that the behavior around `LangError`s works as |
|  |  | //! expected. |
|  |  | //! |
|  |  | //! In particular, it exercises the codepaths that stem from the usage of the |
|  |  | //! [`CallBuilder`](`ink::env::call::CallBuilder`) and |
|  |  | //! [`CreateBuilder`](`ink::env::call::CreateBuilder`) structs. |
|  |  | //! |
|  |  | //! This differs from the codepath used by external tooling, such as `cargo-contract` or |
|  |  | //! the `Contracts-UI` which instead depend on methods from the Contracts pallet which are |
|  |  | //! exposed via RPC. |
|  |  | //! |
|  |  | //! Note that during testing we make use of ink!'s end-to-end testing features, so ensure |
|  |  | //! that you have a node which includes the Contracts pallet running alongside your tests. |
|  |  |  |
|  |  | #![cfg\_attr(not(feature = "std"), no\_std, no\_main)] |
|  |  |  |
|  |  | #[ink::contract] |
|  |  | mod call\_builder { |
|  |  | use ink::env::{ |
|  |  | call::{ |
|  |  | build\_call, |
|  |  | ExecutionInput, |
|  |  | Selector, |
|  |  | }, |
|  |  | DefaultEnvironment, |
|  |  | }; |
|  |  |  |
|  |  | #[ink(storage)] |
|  |  | #[derive(Default)] |
|  |  | pub struct CallBuilderDelegateTest { |
|  |  | /// Since we're going to `DelegateCall` into the `incrementer` contract, we need |
|  |  | /// to make sure our storage layout matches. |
|  |  | value: i32, |
|  |  | } |
|  |  |  |
|  |  | impl CallBuilderDelegateTest { |
|  |  | #[ink(constructor)] |
|  |  | pub fn new(value: i32) -> Self { |
|  |  | Self { value } |
|  |  | } |
|  |  |  |
|  |  | /// Call a contract using the `CallBuilder`. |
|  |  | /// |
|  |  | /// Since we can't use the `CallBuilder` in a test environment directly we need |
|  |  | /// this wrapper to test things like crafting calls with invalid |
|  |  | /// selectors. |
|  |  | /// |
|  |  | /// We also wrap the output in an `Option` since we can't return a `Result` |
|  |  | /// directly from a contract message without erroring out ourselves. |
|  |  | #[ink(message)] |
|  |  | pub fn delegate( |
|  |  | &mut self, |
|  |  | code\_hash: Hash, |
|  |  | selector: [u8; 4], |
|  |  | ) -> Option<ink::LangError> { |
|  |  | let result = build\_call::<DefaultEnvironment>() |
|  |  | .delegate(code\_hash) |
|  |  | .exec\_input(ExecutionInput::new(Selector::new(selector))) |
|  |  | .returns::<bool>() |
|  |  | .try\_invoke() |
|  |  | .expect("Error from the Contracts pallet."); |
|  |  |  |
|  |  | match result { |
|  |  | Ok(\_) => None, |
|  |  | Err(e @ ink::LangError::CouldNotReadInput) => Some(e), |
|  |  | Err(\_) => { |
|  |  | unimplemented!("No other `LangError` variants exist at the moment.") |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | /// Call a contract using the `CallBuilder`. |
|  |  | /// |
|  |  | /// Since we can't use the `CallBuilder` in a test environment directly we need |
|  |  | /// this wrapper to test things like crafting calls with invalid |
|  |  | /// selectors. |
|  |  | /// |
|  |  | /// This message does not allow the caller to handle any `LangErrors`, for that |
|  |  | /// use the `call` message instead. |
|  |  | #[ink(message)] |
|  |  | pub fn invoke(&mut self, code\_hash: Hash, selector: [u8; 4]) -> i32 { |
|  |  | use ink::env::call::build\_call; |
|  |  |  |
|  |  | build\_call::<DefaultEnvironment>() |
|  |  | .delegate(code\_hash) |
|  |  | .exec\_input(ExecutionInput::new(Selector::new(selector))) |
|  |  | .returns::<i32>() |
|  |  | .invoke() |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | #[cfg(all(test, feature = "e2e-tests"))] |
|  |  | mod e2e\_tests { |
|  |  | use super::\*; |
|  |  |  |
|  |  | type E2EResult<T> = std::result::Result<T, Box<dyn std::error::Error>>; |
|  |  |  |
|  |  | #[ink\_e2e::test] |
|  |  | async fn e2e\_call\_builder\_delegate\_returns\_correct\_value( |
|  |  | mut client: ink\_e2e::Client<C, E>, |
|  |  | ) -> E2EResult<()> { |
|  |  | let origin = client |
|  |  | .create\_and\_fund\_account(&ink\_e2e::alice(), 10\_000\_000\_000\_000) |
|  |  | .await; |
|  |  |  |
|  |  | let expected\_value = 42; |
|  |  | let constructor = CallBuilderDelegateTestRef::new(expected\_value); |
|  |  | let call\_builder = client |
|  |  | .instantiate("call\_builder\_delegate", &origin, constructor, 0, None) |
|  |  | .await |
|  |  | .expect("instantiate failed"); |
|  |  | let mut call\_builder\_call = call\_builder.call::<CallBuilderDelegateTest>(); |
|  |  |  |
|  |  | let code\_hash = client |
|  |  | .upload("incrementer", &origin, None) |
|  |  | .await |
|  |  | .expect("upload `incrementer` failed") |
|  |  | .code\_hash; |
|  |  |  |
|  |  | let selector = ink::selector\_bytes!("get"); |
|  |  | let call = call\_builder\_call.invoke(code\_hash, selector); |
|  |  | let call\_result = client |
|  |  | .call(&origin, &call, 0, None) |
|  |  | .await |
|  |  | .expect("Client failed to call `call\_builder::invoke`.") |
|  |  | .return\_value(); |
|  |  |  |
|  |  | assert\_eq!( |
|  |  | call\_result, expected\_value, |
|  |  | "Decoded an unexpected value from the call." |
|  |  | ); |
|  |  |  |
|  |  | Ok(()) |
|  |  | } |
|  |  |  |
|  |  | #[ink\_e2e::test] |
|  |  | async fn e2e\_invalid\_message\_selector\_can\_be\_handled( |
|  |  | mut client: ink\_e2e::Client<C, E>, |
|  |  | ) -> E2EResult<()> { |
|  |  | let origin = client |
|  |  | .create\_and\_fund\_account(&ink\_e2e::bob(), 10\_000\_000\_000\_000) |
|  |  | .await; |
|  |  |  |
|  |  | let constructor = CallBuilderDelegateTestRef::new(Default::default()); |
|  |  | let call\_builder\_contract = client |
|  |  | .instantiate("call\_builder\_delegate", &origin, constructor, 0, None) |
|  |  | .await |
|  |  | .expect("instantiate failed"); |
|  |  | let mut call\_builder\_call = |
|  |  | call\_builder\_contract.call::<CallBuilderDelegateTest>(); |
|  |  |  |
|  |  | let code\_hash = client |
|  |  | .upload("incrementer", &origin, None) |
|  |  | .await |
|  |  | .expect("upload `incrementer` failed") |
|  |  | .code\_hash; |
|  |  |  |
|  |  | let selector = ink::selector\_bytes!("invalid\_selector"); |
|  |  | let call = call\_builder\_call.delegate(code\_hash, selector); |
|  |  | let call\_result = client |
|  |  | .call(&origin, &call, 0, None) |
|  |  | .await |
|  |  | .expect("Calling `call\_builder::delegate` failed"); |
|  |  |  |
|  |  | assert!(matches!( |
|  |  | call\_result.return\_value(), |
|  |  | Some(ink::LangError::CouldNotReadInput) |
|  |  | )); |
|  |  |  |
|  |  | Ok(()) |
|  |  | } |
|  |  |  |
|  |  | #[ink\_e2e::test] |
|  |  | async fn e2e\_invalid\_message\_selector\_panics\_on\_invoke( |
|  |  | mut client: ink\_e2e::Client<C, E>, |
|  |  | ) -> E2EResult<()> { |
|  |  | let origin = client |
|  |  | .create\_and\_fund\_account(&ink\_e2e::charlie(), 10\_000\_000\_000\_000) |
|  |  | .await; |
|  |  |  |
|  |  | let constructor = CallBuilderDelegateTestRef::new(Default::default()); |
|  |  | let call\_builder\_contract = client |
|  |  | .instantiate("call\_builder\_delegate", &origin, constructor, 0, None) |
|  |  | .await |
|  |  | .expect("instantiate failed"); |
|  |  | let mut call\_builder\_call = |
|  |  | call\_builder\_contract.call::<CallBuilderDelegateTest>(); |
|  |  |  |
|  |  | let code\_hash = client |
|  |  | .upload("incrementer", &origin, None) |
|  |  | .await |
|  |  | .expect("upload `incrementer` failed") |
|  |  | .code\_hash; |
|  |  |  |
|  |  | // Since `LangError`s can't be handled by the `CallBuilder::invoke()` method |
|  |  | // we expect this to panic. |
|  |  | let selector = ink::selector\_bytes!("invalid\_selector"); |
|  |  | let call = call\_builder\_call.invoke(code\_hash, selector); |
|  |  | let call\_result = client.call\_dry\_run(&origin, &call, 0, None).await; |
|  |  |  |
|  |  | assert!(call\_result.is\_err()); |
|  |  | assert!(call\_result |
|  |  | .debug\_message() |
|  |  | .contains("Cross-contract call failed with CouldNotReadInput")); |
|  |  |  |
|  |  | Ok(()) |
|  |  | } |
|  |  | } |
|  |  | } |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `f1407ee`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuse-ink%2Fink%2Fcommit%2Ff1407ee9f87e5f64d467a22d26ee88f61db7f3db) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from docs.rs_719102c6_20250114_194012.html ===

[Docs.rs](/)

* ink\_env-4.2.0
  + ink\_env 4.2.0
  + [Docs.rs crate page](/crate/ink_env/4.2.0 "See ink_env in docs.rs")
  + [Apache-2.0](/crate/ink_env/4.2.0)
  + Links
  + [Homepage](https://www.parity.io/)
  + [Repository](https://github.com/paritytech/ink)
  + [crates.io](https://crates.io/crates/ink_env "See ink_env in crates.io")
  + [Source](/crate/ink_env/4.2.0/source/ "Browse source of ink_env-4.2.0")
  + Owners
  + [github:paritytech:core-devs](https://crates.io/teams/github%3Aparitytech%3Acore-devs)
  + [cmichi](https://crates.io/users/cmichi)
  + [parity-crate-owner](https://crates.io/users/parity-crate-owner)
  + [github:use-ink:ink-developers](https://crates.io/teams/github%3Ause-ink%3Aink-developers)

  + Dependencies
  + - [arrayref ^0.3
      *normal*](/arrayref/%5E0.3)
    - [cfg-if ^1.0
      *normal*](/cfg-if/%5E1.0)
    - [derive\_more ^0.99
      *normal*](/derive_more/%5E0.99)
    - [ink\_allocator ^4.2.0
      *normal*](/ink_allocator/%5E4.2.0)
    - [ink\_prelude ^4.2.0
      *normal*](/ink_prelude/%5E4.2.0)
    - [ink\_primitives ^4.2.0
      *normal*](/ink_primitives/%5E4.2.0)
    - [ink\_storage\_traits ^4.2.0
      *normal*](/ink_storage_traits/%5E4.2.0)
    - [num-traits ^0.2
      *normal*](/num-traits/%5E0.2)
    - [paste ^1.0
      *normal*](/paste/%5E1.0)
    - [parity-scale-codec ^3.4
      *normal*](/parity-scale-codec/%5E3.4)
    - [static\_assertions ^1.1
      *normal*](/static_assertions/%5E1.1)
    - [blake2 ^0.10
      *normal*](/blake2/%5E0.10)
    - [ink\_engine ^4.2.0
      *normal*](/ink_engine/%5E4.2.0)
    - [scale-decode ^0.5.0
      *normal*](/scale-decode/%5E0.5.0)
    - [scale-encode ^0.1.0
      *normal*](/scale-encode/%5E0.1.0)
    - [scale-info ^2.5
      *normal*](/scale-info/%5E2.5)
    - [secp256k1 ^0.27.0
      *normal*](/secp256k1/%5E0.27.0)
    - [sha2 ^0.10
      *normal*](/sha2/%5E0.10)
    - [sha3 ^0.10
      *normal*](/sha3/%5E0.10)
    - [rlibc ^1
      *normal*](/rlibc/%5E1)
  + Versions

  + [**100%**
    of the crate is documented](/crate/ink_env/4.2.0)
* [Go to latest version](/crate/ink_env/latest/target-redirect/x86_64-unknown-linux-gnu/ink_env/fn.invoke_contract_delegate.html "You are seeing an outdated version of the ink_env crate. Click here to go to the latest version.")
* Platform
  + [i686-unknown-linux-gnu](/crate/ink_env/4.2.0/target-redirect/i686-unknown-linux-gnu/ink_env/fn.invoke_contract_delegate.html)
  + [x86\_64-unknown-linux-gnu](/crate/ink_env/4.2.0/target-redirect/x86_64-unknown-linux-gnu/ink_env/fn.invoke_contract_delegate.html)
* [Feature flags](/crate/ink_env/4.2.0/features "Browse available feature flags of ink_env-4.2.0")

* Rust
  + [About docs.rs](/about)
  + [Privacy policy](https://foundation.rust-lang.org/policies/privacy-policy/#docs.rs)
  + [Rust website](https://www.rust-lang.org/)
  + [The Book](https://doc.rust-lang.org/book/)
  + [Standard Library API Reference](https://doc.rust-lang.org/std/)
  + [Rust by Example](https://doc.rust-lang.org/rust-by-example/)
  + [The Cargo Guide](https://doc.rust-lang.org/cargo/guide/)
  + [Clippy Documentation](https://doc.rust-lang.org/nightly/clippy)

☰[![logo](https://use.ink/img/crate-docs/logo.png)](../ink_env/index.html)
##

[![logo](https://use.ink/img/crate-docs/logo.png)](../ink_env/index.html)
## [In ink\_env](index.html)

[?](../help.html)[![Change settings](/-/rustdoc.static/wheel-7b819b6101059cd0.svg)](../settings.html "settings")
# Function [ink\_env](index.html)::invoke\_contract\_delegateCopy item path

[source](../src/ink_env/api.rs.html#301-312) · [−]
```
pub fn invoke_contract_delegate<E, Args, R>(
    params: &[CallParams](call/struct.CallParams.html "struct ink_env::call::CallParams")<E, [DelegateCall](call/struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>, Args, R>
) -> [Result](type.Result.html "type ink_env::Result")<R>where
    E: [Environment](trait.Environment.html "trait ink_env::Environment"),
    Args: [Encode](https://docs.rs/parity-scale-codec/3.4.0/x86_64-unknown-linux-gnu/parity_scale_codec/codec/trait.Encode.html "trait parity_scale_codec::codec::Encode"),
    R: [Decode](https://docs.rs/parity-scale-codec/3.4.0/x86_64-unknown-linux-gnu/parity_scale_codec/codec/trait.Decode.html "trait parity_scale_codec::codec::Decode"),
```
Expand description

Invokes a contract message via delegate call and returns its result.

## [Note](#note)

This is a low level way to evaluate another smart contract via delegate call.
Prefer to use the ink! guided and type safe approach to using this.

## [Errors](#errors)

* If the specified code hash does not exist.
* If arguments passed to the called code message are invalid.
* If the called code execution has trapped.


=== Content from github.com_92354faf_20250114_194019.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuse-ink%2Fink%2Fpull%2F1450)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuse-ink%2Fink%2Fpull%2F1450)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=use-ink%2Fink)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[use-ink](/use-ink)
/
**[ink](/use-ink/ink)**
Public

* [Notifications](/login?return_to=%2Fuse-ink%2Fink) You must be signed in to change notification settings
* [Fork
  443](/login?return_to=%2Fuse-ink%2Fink)
* [Star
   1.4k](/login?return_to=%2Fuse-ink%2Fink)

* [Code](/use-ink/ink)
* [Issues
  131](/use-ink/ink/issues)
* [Pull requests
  16](/use-ink/ink/pulls)
* [Actions](/use-ink/ink/actions)
* [Projects
  1](/use-ink/ink/projects)
* [Security](/use-ink/ink/security)
* [Insights](/use-ink/ink/pulse)

Additional navigation options

* [Code](/use-ink/ink)
* [Issues](/use-ink/ink/issues)
* [Pull requests](/use-ink/ink/pulls)
* [Actions](/use-ink/ink/actions)
* [Projects](/use-ink/ink/projects)
* [Security](/use-ink/ink/security)
* [Insights](/use-ink/ink/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fuse-ink%2Fink%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fuse-ink%2Fink%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Add support for language level errors (`LangError`) #1450

 Merged

[HCastano](/HCastano)
merged 111 commits into
[master](/use-ink/ink/tree/master "use-ink/ink:master")
from
[hc-add-ink-level-errors](/use-ink/ink/tree/hc-add-ink-level-errors "use-ink/ink:hc-add-ink-level-errors")

Nov 16, 2022

 Merged

# [Add support for language level errors (`LangError`)](#top) #1450

[HCastano](/HCastano)
merged 111 commits into
[master](/use-ink/ink/tree/master "use-ink/ink:master")
from
[hc-add-ink-level-errors](/use-ink/ink/tree/hc-add-ink-level-errors "use-ink/ink:hc-add-ink-level-errors")

Nov 16, 2022

[Conversation
75](/use-ink/ink/pull/1450)
[Commits
111](/use-ink/ink/pull/1450/commits)
[Checks
0](/use-ink/ink/pull/1450/checks)
[Files changed](/use-ink/ink/pull/1450/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![HCastano](https://avatars.githubusercontent.com/u/12344623?s=60&v=4)](/HCastano)

Copy link

Contributor

### @HCastano **[HCastano](/HCastano)** commented [Oct 25, 2022](#issue-1423234752) • edited Loading

Implements the Message related changes of [#1207](https://github.com/use-ink/ink/issues/1207).

The idea here is that every message now returns a `Result<Message::Output, LangError>`,

where a `LangError` is a type of error which doesn't originate from the contract itself,

nor from the underlying execution environment (so the Contracts pallet in this case).

An example of where this would arise is if a caller tries to use a non-existent message

selector for a contract. Previously, the contract would trap and not allow the caller to

do any sort of error handling if it encountered a non-existent selector.

This breaks the ABI in two ways: first, all contract messages now have a `Result` return

type, and second a new field, `lang_err`, will be introduced as part of the contract

spec. The second change allows other languages, such as Solang, to use an equivalent

`LangError`.

If you're curious, click here for a snippet of the new metadata for the Flipper contract.
```
"messages": [
  {
    "args": [],
    "docs": [
      " Flips the current value of the Flipper's boolean."
    ],
    "label": "flip",
    "mutates": true,
    "payable": false,
    "returnType": {
      "displayName": [
        "ink",
        "MessageResult"
      ],
      "type": 1
    },
    "selector": "0x633aa551"
  }],
"lang_error": {
  "displayName": [
    "ink",
    "LangError"
  ],
  "type": 3
},
{
  "id": 3,
  "type": {
    "def": {
      "variant": {
        "variants": [
          {
            "index": 1,
            "name": "CouldNotReadInput"
          }
        ]
      }
    },
    "path": [
      "ink_primitives",
      "LangError"
    ]
  }
}

```

TODO:

* Add new `LangError` type to metadata
* Add E2E test for demonstrating how to handle `LangError`s
* Make CI green

TODOs in Follow-Ups:

* Implement changes for constructors ([Handle `LangError` from instantiate #1512](https://github.com/use-ink/ink/pull/1512))
* Implement changes for traits ([Fix trait message return type metadata #1531](https://github.com/use-ink/ink/pull/1531))
* Refactor dispatch logic to bubble up specific dispatch error
  + Will happen at the expense of always having an extra error variant in `LangError`
* Make the `CallBuilder` API not require an explicit `Result` ([Clean up `CallBuilder` `return()` type #1525](https://github.com/use-ink/ink/pull/1525))

cc [@xgreenx](https://github.com/xgreenx) since you were the original poster for the issue

Sorry, something went wrong.

All reactions

 [HCastano](/HCastano)
added 8 commits
[October 21, 2022 23:24](#commits-pushed-c62ea25)

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Add example cross-chain contract](/use-ink/ink/pull/1450/commits/c62ea254b3a5a4a8b62e1d1a746ef831a00e663b "Add example cross-chain contract")`

`[c62ea25](/use-ink/ink/pull/1450/commits/c62ea254b3a5a4a8b62e1d1a746ef831a00e663b)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Update CallBuilder's return type to a Result](/use-ink/ink/pull/1450/commits/5e8cd1ea6897263e4f237fd5c4a3cf53525964c1 "Update `CallBuilder`'s return type to a `Result`

We're gonna try and handle an ink! error later")`
 …

`[5e8cd1e](/use-ink/ink/pull/1450/commits/5e8cd1ea6897263e4f237fd5c4a3cf53525964c1)`

```
We're gonna try and handle an ink! error later
```

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Write to output buffer on dispatch error](/use-ink/ink/pull/1450/commits/728c45cda14ea682ffda95afcdfccf8e99dce247 "Write to output buffer on dispatch error")`

`[728c45c](/use-ink/ink/pull/1450/commits/728c45cda14ea682ffda95afcdfccf8e99dce247)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Whoops, reduce value of u8](/use-ink/ink/pull/1450/commits/810ea54167b17d0c71d72c7207a2bfe7e736b9b6 "Whoops, reduce value of `u8`")`

`[810ea54](/use-ink/ink/pull/1450/commits/810ea54167b17d0c71d72c7207a2bfe7e736b9b6)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Add some cargo-contract automation helpers](/use-ink/ink/pull/1450/commits/980f6a71f273577ed745ac3c2cbfe73ee3019722 "Add some `cargo-contract` automation helpers")`

`[980f6a7](/use-ink/ink/pull/1450/commits/980f6a71f273577ed745ac3c2cbfe73ee3019722)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Set default if no input is given](/use-ink/ink/pull/1450/commits/6181d9cba9e38b4e950c1e81c0ad31f7a5084736 "Set default if no input is given")`

`[6181d9c](/use-ink/ink/pull/1450/commits/6181d9cba9e38b4e950c1e81c0ad31f7a5084736)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Return type expected by call builder after succesful dispatch](/use-ink/ink/pull/1450/commits/63fc94c9f5d8c27ee9e44bbc8bae6d10989ee3df "Return type expected by call builder after succesful dispatch")`

`[63fc94c](/use-ink/ink/pull/1450/commits/63fc94c9f5d8c27ee9e44bbc8bae6d10989ee3df)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Fix typo](/use-ink/ink/pull/1450/commits/4280d370d3fdb23508ba85f7243620846aaa778f "Fix typo")`

`[4280d37](/use-ink/ink/pull/1450/commits/4280d370d3fdb23508ba85f7243620846aaa778f)`

 [![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
requested a review
from [athei](/athei)
[October 25, 2022 23:40](#event-7667911361)

 [HCastano](/HCastano)
and others
added 17 commits
[October 26, 2022 13:24](#commits-pushed-474133a)

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Return an actual DispatchError back to the caller](/use-ink/ink/pull/1450/commits/474133a06f911da9c78d7da409c9dc133f26b5b5 "Return an actual `DispatchError` back to the caller")`

`[474133a](/use-ink/ink/pull/1450/commits/474133a06f911da9c78d7da409c9dc133f26b5b5)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Temporarily stop generating contract ref code](/use-ink/ink/pull/1450/commits/e3f67ea816dd8b668721fe391ce8c5247243fbb9 "Temporarily stop generating contract ref code")`

`[e3f67ea](/use-ink/ink/pull/1450/commits/e3f67ea816dd8b668721fe391ce8c5247243fbb9)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Manually change message return type to Result](/use-ink/ink/pull/1450/commits/6a04bd1115b82c759eb04945dc1cf1da93aafef0 "Manually change message return type to Result")`

`[6a04bd1](/use-ink/ink/pull/1450/commits/6a04bd1115b82c759eb04945dc1cf1da93aafef0)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Transform message return type in the IR](/use-ink/ink/pull/1450/commits/5c9d2500254bfaf3116bc1a29d0ccead3e6770cc "Transform message return type in the IR")`

`[5c9d250](/use-ink/ink/pull/1450/commits/5c9d2500254bfaf3116bc1a29d0ccead3e6770cc)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Change message return type when generating contract reference](/use-ink/ink/pull/1450/commits/a989be6c45896ed6b90997d0e94cfe7401618d3d "Change message return type when generating contract reference")`

`[a989be6](/use-ink/ink/pull/1450/commits/a989be6c45896ed6b90997d0e94cfe7401618d3d)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Return message output directly in the codegen](/use-ink/ink/pull/1450/commits/a9cae76f77fec26e944463f92caeba22b415826f "Return message output directly in the codegen")`

`[a9cae76](/use-ink/ink/pull/1450/commits/a9cae76f77fec26e944463f92caeba22b415826f)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Add error type for handling language errors](/use-ink/ink/pull/1450/commits/b3e0141eaebc76b4e77a6246a8ba8669ecff89db "Add error type for handling language errors")`

`[b3e0141](/use-ink/ink/pull/1450/commits/b3e0141eaebc76b4e77a6246a8ba8669ecff89db)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Clean up some things](/use-ink/ink/pull/1450/commits/cf332b7a203decc89d76532dfe5f504845e5cda5 "Clean up some things")`

`[cf332b7](/use-ink/ink/pull/1450/commits/cf332b7a203decc89d76532dfe5f504845e5cda5)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Merge branch 'master' into hc-add-ink-level-errors](/use-ink/ink/pull/1450/commits/845b00939c361481b2405e77c1c1ee41d44a3be9 "Merge branch 'master' into hc-add-ink-level-errors")`

`[845b009](/use-ink/ink/pull/1450/commits/845b00939c361481b2405e77c1c1ee41d44a3be9)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Remove some unused code](/use-ink/ink/pull/1450/commits/dc1b7a3f32c7308482e4af64a6e94ead796090b3 "Remove some unused code")`

`[dc1b7a3](/use-ink/ink/pull/1450/commits/dc1b7a3f32c7308482e4af64a6e94ead796090b3)`

[![@ascjones](https://avatars.githubusercontent.com/u/75586?s=40&v=4)](/ascjones)

`[Add DispatchError type metadata](/use-ink/ink/pull/1450/commits/2ad4633694cf49c542d2ab3a8c905aa1fbfa4ac6 "Add DispatchError type metadata")`

`[2ad4633](/use-ink/ink/pull/1450/commits/2ad4633694cf49c542d2ab3a8c905aa1fbfa4ac6)`

[![@ascjones](https://avatars.githubusercontent.com/u/75586?s=40&v=4)](/ascjones)

`[Merge branch 'master' into hc-add-ink-level-errors](/use-ink/ink/pull/1450/commits/5421a0cbf0a1a777c92ff6c147313ae79cb71630 "Merge branch 'master' into hc-add-ink-level-errors")`

`[5421a0c](/use-ink/ink/pull/1450/commits/5421a0cbf0a1a777c92ff6c147313ae79cb71630)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Use language error over dispatch error](/use-ink/ink/pull/1450/commits/14b5875808e4925e108b60a215c8f8f1b06a5dec "Use language error over dispatch error")`

`[14b5875](/use-ink/ink/pull/1450/commits/14b5875808e4925e108b60a215c8f8f1b06a5dec)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Change message body's visibility based on message signature](/use-ink/ink/pull/1450/commits/a38a395d3de08c98ce5f837d78c0a1224dcd7fca "Change message body's visibility based on message signature")`

`[a38a395](/use-ink/ink/pull/1450/commits/a38a395d3de08c98ce5f837d78c0a1224dcd7fca)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Fix unreachable code warning](/use-ink/ink/pull/1450/commits/a4d653b8482f6bc26c038177895a8ed119eff39f "Fix unreachable code warning")`

`[a4d653b](/use-ink/ink/pull/1450/commits/a4d653b8482f6bc26c038177895a8ed119eff39f)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Appease Clippy](/use-ink/ink/pull/1450/commits/fc42d667d5aee28306a753149bca9c432ee81e5d "Appease Clippy")`

`[fc42d66](/use-ink/ink/pull/1450/commits/fc42d667d5aee28306a753149bca9c432ee81e5d)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Rustfmt cross-contract example](/use-ink/ink/pull/1450/commits/9705ff30382f11753e75cd26a4cfda6be5b499c9 "Rustfmt cross-contract example")`

`[9705ff3](/use-ink/ink/pull/1450/commits/9705ff30382f11753e75cd26a4cfda6be5b499c9)`

[![ascjones](https://avatars.githubusercontent.com/u/75586?s=60&v=4)](/ascjones)

**[ascjones](/ascjones)**
reviewed
[Nov 3, 2022](#pullrequestreview-1166611023)

 [View reviewed changes](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9)

Copy link

Collaborator

### @ascjones **[ascjones](/ascjones)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

This approach looks good, I think a unification of the `LangError` and `DispathError` is a good idea if you didn't already have that planned.

Sorry, something went wrong.

All reactions

[crates/ink/ir/src/ir/item\_impl/message.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-ec4059a1cf2d2fd0c410512d2f3a43f359fa3a0a5b9daeb8c3444c1ed7ab8359)
Outdated

Show resolved

Hide resolved

[crates/ink/ir/src/ir/item\_impl/message.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-ec4059a1cf2d2fd0c410512d2f3a43f359fa3a0a5b9daeb8c3444c1ed7ab8359)
Outdated

Show resolved

Hide resolved

[crates/env/src/engine/on\_chain/impls.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-86e0b35d78f68c26eae0c387fc9c9357b61d9b15806750677e96b2b137ba8419)
Outdated

Show resolved

Hide resolved

[crates/ink/codegen/src/generator/as\_dependency/call\_builder.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-3ae8a7a41f79986909640566f05fd662f5d58a00ef52f5076e444e0095030cfa)
Outdated

Show resolved

Hide resolved

[crates/ink/src/reflect/dispatch.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-3b194d781cb30e84579c37aa6ad9b1bcc78947b32e11872bce18448df26ff563)
Outdated

Show resolved

Hide resolved

2 hidden conversations

Load more…

[deploy-contract.sh](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-95f7e646cb25a9474062071d4414121a397ea87e3aa357fa266e5dbe2425a5ea)
Outdated

Show resolved

Hide resolved

[examples/cross\_chain\_test/lib.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-1cec7d664e38ac2d70cc6bc3160032fb9bd10d3cd9ffe1dcea0c4567f4d9bcfa)
Outdated

Show resolved

Hide resolved

[crates/ink/codegen/src/generator/item\_impls.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-f9f1bf34fe8432a011341231aab20f999ef5469dab1b7ed5b625ce532835c746)
Outdated

Show resolved

Hide resolved

[crates/ink/codegen/src/generator/dispatch.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-0624ed4d7bae913da372affe6b87aba6c71df5793d858bb16d40541b2505dfc2)

Show resolved

Hide resolved

[crates/ink/codegen/src/generator/dispatch.rs](/use-ink/ink/pull/1450/files/9705ff30382f11753e75cd26a4cfda6be5b499c9#diff-0624ed4d7bae913da372affe6b87aba6c71df5793d858bb16d40541b2505dfc2)
Outdated

Show resolved

Hide resolved

 [xermicus](/xermicus)
added 2 commits
[November 4, 2022 16:22](#commits-pushed-fc7f374)

[![@xermicus](https://avatars.githubusercontent.com/u/8707171?s=40&v=4)](/xermicus)

`[align for runtime metadata compatibility](/use-ink/ink/pull/1450/commits/fc7f3745abdb612052cbb7acc586857c2db0d22e "align for runtime metadata compatibility")`

`[fc7f374](/use-ink/ink/pull/1450/commits/fc7f3745abdb612052cbb7acc586857c2db0d22e)`

[![@xermicus](https://avatars.githubusercontent.com/u/8707171?s=40&v=4)](/xermicus)

`[Merge branch 'master' into hc-add-ink-level-errors](/use-ink/ink/pull/1450/commits/786955825cbf4f9f098c3708799f49c69368cb16 "Merge branch 'master' into hc-add-ink-level-errors")`

`[7869558](/use-ink/ink/pull/1450/commits/786955825cbf4f9f098c3708799f49c69368cb16)`

[![@xermicus](https://avatars.githubusercontent.com/u/8707171?s=80&u=86d7da1c6ed4f2234f59b1d054ab0975d2ea83af&v=4)](/xermicus)

Copy link

Contributor

### **[xermicus](/xermicus)** commented [Nov 4, 2022](#issuecomment-1303764776) • edited Loading

| [@HCastano](https://github.com/HCastano) Can we use `TypeSpec` (together with an according builder method) in the contract spec instead, so it will work for Meta and Portable form? I was so free to push my proposed changes directly to your branch (also merged master and resolved the conflict), please have a look. If you are not comfortable with this just nuke my commits  Also CC [@ascjones](https://github.com/ascjones) |
| --- |

All reactions

Sorry, something went wrong.

97 hidden items

Load more…

 [HCastano](/HCastano)
added 2 commits
[November 15, 2022 18:51](#commits-pushed-5785eb0)

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Rename tests using kabob-case instead of snake_case](/use-ink/ink/pull/1450/commits/5785eb02c1c19e7a728b00838f5fd7aeb9ed30e5 "Rename tests using kabob-case instead of snake_case")`

`[5785eb0](/use-ink/ink/pull/1450/commits/5785eb02c1c19e7a728b00838f5fd7aeb9ed30e5)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Try running with staging image](/use-ink/ink/pull/1450/commits/7d57f8c2e4c07e9d7737ee5adc186491c7c1b3ac "Try running with `staging` image")`

`[7d57f8c](/use-ink/ink/pull/1450/commits/7d57f8c2e4c07e9d7737ee5adc186491c7c1b3ac)`

[![ascjones](https://avatars.githubusercontent.com/u/75586?s=60&v=4)](/ascjones)

**[ascjones](/ascjones)**
reviewed
[Nov 16, 2022](#pullrequestreview-1182810383)

 [View reviewed changes](/use-ink/ink/pull/1450/files/5785eb02c1c19e7a728b00838f5fd7aeb9ed30e5)

Copy link

Collaborator

### @ascjones **[ascjones](/ascjones)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

❤️ the comprehensive e2e tests

Sorry, something went wrong.

All reactions

[examples/lang-err-integration-tests/contract-ref/lib.rs](/use-ink/ink/pull/1450/files/cee90d7981d3265489f8cdec6bc10e788061cdad..5785eb02c1c19e7a728b00838f5fd7aeb9ed30e5#diff-86cb38d0d75811963cf15f7f31dec23cf913f3835ec53c5c6133ba3dd2b15770)

|  |  | #[ink(message)] |
| --- | --- | --- |
|  |  | pub fn flip\_check(&mut self) { |
|  |  | self.flipper |
|  |  | .flip\_checked() |

Copy link

Collaborator

### @ascjones **[ascjones](/ascjones)** [Nov 16, 2022](#discussion_r1024155196)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Would testing `err_flip_checked` be useful do you think? As in it will be a `Ok(Err(()))`

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @HCastano **[HCastano](/HCastano)** [Nov 16, 2022](#discussion_r1024441965)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

It could be useful, but maybe in the context of a different set of tests around error handling

Sorry, something went wrong.

All reactions

[![ascjones](https://avatars.githubusercontent.com/u/75586?s=60&v=4)](/ascjones)

**[ascjones](/ascjones)**
approved these changes
[Nov 16, 2022](#pullrequestreview-1182811949)

 [View reviewed changes](/use-ink/ink/pull/1450/files/7d57f8c2e4c07e9d7737ee5adc186491c7c1b3ac)

 [HCastano](/HCastano)
added 4 commits
[November 16, 2022 10:48](#commits-pushed-2b05e59)

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Change image back to production](/use-ink/ink/pull/1450/commits/2b05e593874269599de95d0b35f748bad39ac989 "Change image back to `production`

Didn't help either way")`
 …

`[2b05e59](/use-ink/ink/pull/1450/commits/2b05e593874269599de95d0b35f748bad39ac989)`

```
Didn't help either way
```

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Try cleaning some things](/use-ink/ink/pull/1450/commits/80a27a77362da3195cd836e7a5bc4eef25e8af29 "Try cleaning some things")`

`[80a27a7](/use-ink/ink/pull/1450/commits/80a27a77362da3195cd836e7a5bc4eef25e8af29)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Guess there was no lockfile](/use-ink/ink/pull/1450/commits/0212c90bd5c1bb1967dd60c8a73d46108ffe8213 "Guess there was no lockfile")`

`[0212c90](/use-ink/ink/pull/1450/commits/0212c90bd5c1bb1967dd60c8a73d46108ffe8213)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Clean up the cleanup](/use-ink/ink/pull/1450/commits/12bc8249ac20c8e4e9733f78a000bf08a1b63ec7 "Clean up the cleanup")`

`[12bc824](/use-ink/ink/pull/1450/commits/12bc8249ac20c8e4e9733f78a000bf08a1b63ec7)`

[![athei](https://avatars.githubusercontent.com/u/2580396?s=60&v=4)](/athei)

**[athei](/athei)**
approved these changes
[Nov 16, 2022](#pullrequestreview-1182861036)

 [View reviewed changes](/use-ink/ink/pull/1450/files/0212c90bd5c1bb1967dd60c8a73d46108ffe8213)

Copy link

Contributor

### @athei **[athei](/athei)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I think adding an error for `NotPayable` could be quite easy? Can be a follow up but calling `return_value` instead of using `?` seems easy enough.

Apart from that it looks good to me. I compiled some simple contracts and the metadata looks sensible.

Sorry, something went wrong.

All reactions

[crates/ink/codegen/src/generator/dispatch.rs](/use-ink/ink/pull/1450/files/7d57f8c2e4c07e9d7737ee5adc186491c7c1b3ac#diff-0624ed4d7bae913da372affe6b87aba6c71df5793d858bb16d40541b2505dfc2)
Outdated

Show resolved

Hide resolved

 [HCastano](/HCastano)
added 2 commits
[November 16, 2022 14:22](#commits-pushed-55b4e4f)

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Clean em up again](/use-ink/ink/pull/1450/commits/55b4e4f37a96f7c7c17fb80eb061dac84b06ca56 "Clean em up again")`

`[55b4e4f](/use-ink/ink/pull/1450/commits/55b4e4f37a96f7c7c17fb80eb061dac84b06ca56)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Use MessageResult typedef in one more place](/use-ink/ink/pull/1450/commits/16443438a7b99e4e436456e74a94569849c05e8e "Use `MessageResult` typedef in one more place")`

`[1644343](/use-ink/ink/pull/1450/commits/16443438a7b99e4e436456e74a94569849c05e8e)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
changed the title
~~Add ability to handle `DispatchError`~~
Add support for language level errors (`LangError`)
[Nov 16, 2022](#event-7827393448)

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=80&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)

Copy link

Contributor

Author

### **[HCastano](/HCastano)** commented [Nov 16, 2022](#issuecomment-1317583068)

| I think adding an error for NotPayable could be quite easy? Can be a follow up but calling return\_value instead of using ? seems easy enough.  Yeah now that this is in place it should be almost trivial to add that. Figured it would be better left for a follow-up though |
| --- |

All reactions

Sorry, something went wrong.

 [HCastano](/HCastano)
added 3 commits
[November 16, 2022 14:52](#commits-pushed-f1211ba)

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Poke CI](/use-ink/ink/pull/1450/commits/f1211ba866f466656e0e528b38aeede021b38e81 "Poke CI")`

`[f1211ba](/use-ink/ink/pull/1450/commits/f1211ba866f466656e0e528b38aeede021b38e81)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Move comment location](/use-ink/ink/pull/1450/commits/9a1e41fb49bb888fd636471de6b7e79e86a18a12 "Move comment location")`

`[9a1e41f](/use-ink/ink/pull/1450/commits/9a1e41fb49bb888fd636471de6b7e79e86a18a12)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&v=4)](/HCastano)

`[Update contract name](/use-ink/ink/pull/1450/commits/40577907f8efd5967687fe4ad6721ad7c414b4c0 "Update contract name")`

`[4057790](/use-ink/ink/pull/1450/commits/40577907f8efd5967687fe4ad6721ad7c414b4c0)`

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
merged commit [`6c6e51a`](/use-ink/ink/commit/6c6e51a88802e1a7ed578f159caeca1c01ec0dea)
into
master

[Nov 16, 2022](https://github.com/use-ink/ink/pull/1450#event-7827657379)

 [![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
deleted the
hc-add-ink-level-errors

branch
[November 16, 2022 20:21](#event-7827657535)

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
mentioned this pull request
[Nov 16, 2022](#ref-pullrequest-1452446888)

[Return `LangError`s from constructors
#1504](/use-ink/ink/pull/1504)
 Merged

2 tasks

[![@ascjones](https://avatars.githubusercontent.com/u/75586?s=40&v=4)](/ascjones)
[ascjones](/ascjones)
mentioned this pull request
[Nov 17, 2022](#ref-pullrequest-1453181369)

[Exclude lang-integration-test examples
paritytech/ink-waterfall#40](/paritytech/ink-waterfall/pull/40)
 Merged

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
mentioned this pull request
[Nov 17, 2022](#ref-issue-1189661335)

[Update the ABI of standards with a new `Result`
Supercolony-net/openbrush-contracts#97](/Supercolony-net/openbrush-contracts/issues/97)

Open

[![@xgreenx](https://avatars.githubusercontent.com/u/18346821?s=80&u=e6f73de09a0b355b3f62b4add6f03c740bc8b075&v=4)](/xgreenx)

Copy link

Collaborator

### **[xgreenx](/xgreenx)** commented [Nov 21, 2022](#issuecomment-1322081613)

| I made a change to generate two sets of functions, the "original" unchecked function and the new "checked" functions (which are the ones with the Result<T, LangError> return types.  I think “unchecked” fits more for methods that return `MessageResult`, because we didn’t check the result it is why you can handle it=) |
| --- |

All reactions

Sorry, something went wrong.

[![@athei](https://avatars.githubusercontent.com/u/2580396?s=80&u=70e3fea1718d0389d268a61828aa152023cca2e1&v=4)](/athei)

Copy link

Contributor

### **[athei](/athei)** commented [Nov 21, 2022](#issuecomment-1322154969)

| Most idiomatic would be using `try_` as a prefix. This is what the standard library will use to allow panic free allocation soon. For example: `Vec::try_push`. |
| --- |

All reactions

Sorry, something went wrong.

[![@ascjones](https://avatars.githubusercontent.com/u/75586?s=40&v=4)](/ascjones)
[ascjones](/ascjones)
mentioned this pull request
[Nov 22, 2022](#ref-pullrequest-1454879472)

[Release `v4.0.0-beta`
#1508](/use-ink/ink/pull/1508)
 Merged

1 task

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
mentioned this pull request
[Nov 23, 2022](#ref-issue-1462159484)

[`ReturnTypeSpec` should take a `TypeSpec` directly
#1515](/use-ink/ink/issues/1515)

Closed

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
mentioned this pull request
[Nov 30, 2022](#ref-pullrequest-1470354172)

[Clean up `CallBuilder` `return()` type
#1525](/use-ink/ink/pull/1525)
 Merged

This was referenced Dec 8, 2022

[Incorrect codegen for trait methods
#1530](/use-ink/ink/issues/1530)

Closed

[Fix trait message return type metadata
#1531](/use-ink/ink/pull/1531)
 Merged

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=40&u=e4d74627f31304523b593b4708988d75abc2ea51&v=4)](/HCastano)
[HCastano](/HCastano)
mentioned this pull request
[Jan 25, 2023](#ref-pullrequest-1557377510)

[Rename `_checked` codegen call methods with `try_`
#1621](/use-ink/ink/pull/1621)
 Merged

[![@ascjones](https://avatars.githubusercontent.com/u/75586?s=40&v=4)](/ascjones)
[ascjones](/ascjones)
mentioned this pull request
[Feb 15, 2023](#ref-pullrequest-1584050572)

[Release `v4.0.0`
#1653](/use-ink/ink/pull/1653)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fuse-ink%2Fink%2Fpull%2F1450)

Reviewers

[![@xermicus](https://avatars.githubusercontent.com/u/8707171?s=40&v=4)](/xermicus) [xermicus](/xermicus)

xermicus approved these changes

[![@athei](https://avatars.githubusercontent.com/u/2580396?s=40&v=4)](/athei) [athei](/athei)

athei approved these changes

[![@ascjones](https://avatars.githubusercontent.com/u/75586?s=40&v=4)](/ascjones) [ascjones](/ascjones)

ascjones approved these changes

[![@cmichi](https://avatars.githubusercontent.com/u/241530?s=40&v=4)](/cmichi) [cmichi](/cmichi)

 Awaiting requested review from cmichi

 cmichi is a code owner

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

 [Change return type in metadata to allow common errors](https://github.com/use-ink/ink/issues/1207)

5 participants

[![@HCastano](https://avatars.githubusercontent.com/u/12344623?s=52&v=4)](/HCastano) [![@xermicus](https://avatars.githubusercontent.com/u/8707171?s=52&v=4)](/xermicus) [![@ascjones](https://avatars.githubusercontent.com/u/75586?s=52&v=4)](/ascjones) [![@athei](https://avatars.githubusercontent.com/u/2580396?s=52&v=4)](/athei) [![@xgreenx](https://avatars.githubusercontent.com/u/18346821?s=52&v=4)](/xgreenx)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from docs.rs_78371f8c_20250114_194011.html ===

[Docs.rs](/)

* ink\_env-4.2.0
  + ink\_env 4.2.0
  + [Docs.rs crate page](/crate/ink_env/4.2.0 "See ink_env in docs.rs")
  + [Apache-2.0](/crate/ink_env/4.2.0)
  + Links
  + [Homepage](https://www.parity.io/)
  + [Repository](https://github.com/paritytech/ink)
  + [crates.io](https://crates.io/crates/ink_env "See ink_env in crates.io")
  + [Source](/crate/ink_env/4.2.0/source/ "Browse source of ink_env-4.2.0")
  + Owners
  + [github:paritytech:core-devs](https://crates.io/teams/github%3Aparitytech%3Acore-devs)
  + [cmichi](https://crates.io/users/cmichi)
  + [parity-crate-owner](https://crates.io/users/parity-crate-owner)
  + [github:use-ink:ink-developers](https://crates.io/teams/github%3Ause-ink%3Aink-developers)

  + Dependencies
  + - [arrayref ^0.3
      *normal*](/arrayref/%5E0.3)
    - [cfg-if ^1.0
      *normal*](/cfg-if/%5E1.0)
    - [derive\_more ^0.99
      *normal*](/derive_more/%5E0.99)
    - [ink\_allocator ^4.2.0
      *normal*](/ink_allocator/%5E4.2.0)
    - [ink\_prelude ^4.2.0
      *normal*](/ink_prelude/%5E4.2.0)
    - [ink\_primitives ^4.2.0
      *normal*](/ink_primitives/%5E4.2.0)
    - [ink\_storage\_traits ^4.2.0
      *normal*](/ink_storage_traits/%5E4.2.0)
    - [num-traits ^0.2
      *normal*](/num-traits/%5E0.2)
    - [paste ^1.0
      *normal*](/paste/%5E1.0)
    - [parity-scale-codec ^3.4
      *normal*](/parity-scale-codec/%5E3.4)
    - [static\_assertions ^1.1
      *normal*](/static_assertions/%5E1.1)
    - [blake2 ^0.10
      *normal*](/blake2/%5E0.10)
    - [ink\_engine ^4.2.0
      *normal*](/ink_engine/%5E4.2.0)
    - [scale-decode ^0.5.0
      *normal*](/scale-decode/%5E0.5.0)
    - [scale-encode ^0.1.0
      *normal*](/scale-encode/%5E0.1.0)
    - [scale-info ^2.5
      *normal*](/scale-info/%5E2.5)
    - [secp256k1 ^0.27.0
      *normal*](/secp256k1/%5E0.27.0)
    - [sha2 ^0.10
      *normal*](/sha2/%5E0.10)
    - [sha3 ^0.10
      *normal*](/sha3/%5E0.10)
    - [rlibc ^1
      *normal*](/rlibc/%5E1)
  + Versions

  + [**100%**
    of the crate is documented](/crate/ink_env/4.2.0)
* [Go to latest version](/crate/ink_env/latest/target-redirect/x86_64-unknown-linux-gnu/ink_env/call/struct.CallBuilder.html "You are seeing an outdated version of the ink_env crate. Click here to go to the latest version.")
* Platform
  + [i686-unknown-linux-gnu](/crate/ink_env/4.2.0/target-redirect/i686-unknown-linux-gnu/ink_env/call/struct.CallBuilder.html)
  + [x86\_64-unknown-linux-gnu](/crate/ink_env/4.2.0/target-redirect/x86_64-unknown-linux-gnu/ink_env/call/struct.CallBuilder.html)
* [Feature flags](/crate/ink_env/4.2.0/features "Browse available feature flags of ink_env-4.2.0")

* Rust
  + [About docs.rs](/about)
  + [Privacy policy](https://foundation.rust-lang.org/policies/privacy-policy/#docs.rs)
  + [Rust website](https://www.rust-lang.org/)
  + [The Book](https://doc.rust-lang.org/book/)
  + [Standard Library API Reference](https://doc.rust-lang.org/std/)
  + [Rust by Example](https://doc.rust-lang.org/rust-by-example/)
  + [The Cargo Guide](https://doc.rust-lang.org/cargo/guide/)
  + [Clippy Documentation](https://doc.rust-lang.org/nightly/clippy)

☰[![logo](https://use.ink/img/crate-docs/logo.png)](../../ink_env/index.html)
##

[![logo](https://use.ink/img/crate-docs/logo.png)](../../ink_env/index.html)
## CallBuilder

### [Methods](#implementations)

* [call](#method.call)
* [call\_flags](#method.call_flags)
* [call\_type](#method.call_type)
* [code\_hash](#method.code_hash)
* [delegate](#method.delegate)
* [exec\_input](#method.exec_input)
* [gas\_limit](#method.gas_limit)
* [invoke](#method.invoke)
* [invoke](#method.invoke-1)
* [invoke](#method.invoke-2)
* [invoke](#method.invoke-3)
* [params](#method.params)
* [params](#method.params-1)
* [params](#method.params-2)
* [params](#method.params-3)
* [returns](#method.returns)
* [transferred\_value](#method.transferred_value)
* [try\_invoke](#method.try_invoke)
* [try\_invoke](#method.try_invoke-1)
* [try\_invoke](#method.try_invoke-2)
* [try\_invoke](#method.try_invoke-3)

### [Auto Trait Implementations](#synthetic-implementations)

* [RefUnwindSafe](#impl-RefUnwindSafe-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Send](#impl-Send-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Sync](#impl-Sync-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Unpin](#impl-Unpin-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [UnwindSafe](#impl-UnwindSafe-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)

### [Blanket Implementations](#blanket-implementations)

* [Any](#impl-Any-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Borrow<T>](#impl-Borrow%3CT%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [BorrowMut<T>](#impl-BorrowMut%3CT%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Conv](#impl-Conv-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [FmtForward](#impl-FmtForward-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [From<T>](#impl-From%3CT%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Into<U>](#impl-Into%3CU%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Pipe](#impl-Pipe-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Same<T>](#impl-Same%3CT%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [Tap](#impl-Tap-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [TryConv](#impl-TryConv-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [TryFrom<U>](#impl-TryFrom%3CU%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
* [TryInto<U>](#impl-TryInto%3CU%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
## [In ink\_env::call](index.html)

[?](../../help.html)[![Change settings](/-/rustdoc.static/wheel-7b819b6101059cd0.svg)](../../settings.html "settings")
# Struct [ink\_env](../index.html)::[call](index.html)::CallBuilderCopy item path

[source](../../src/ink_env/call/call_builder.rs.html#395-405) · [−]
```
pub struct CallBuilder<E, CallType, Args, RetType>where
    E: [Environment](../trait.Environment.html "trait ink_env::Environment"),{ /* private fields */ }
```
Expand description

Builds up a cross contract call.

## Implementations[§](#implementations)

[source](../../src/ink_env/call/call_builder.rs.html#407-426)[§](#impl-CallBuilder%3CE,+Unset%3CCallType%3E,+Args,+RetType%3E)
### impl<E, CallType, Args, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<CallType>, Args, RetType>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#414-425)
#### pub fn [call\_type](#method.call_type)<NewCallType>( self, call\_type: NewCallType ) -> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<NewCallType>, Args, RetType>

The type of the call.

[source](../../src/ink_env/call/call_builder.rs.html#428-447)[§](#impl-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<E, CallType, Args, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, RetType>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#435-446)
#### pub fn [call\_flags](#method.call_flags)( self, call\_flags: [CallFlags](../struct.CallFlags.html "struct ink_env::CallFlags") ) -> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, RetType>

The flags used to change the behavior of the contract call.

[source](../../src/ink_env/call/call_builder.rs.html#449-469)[§](#impl-CallBuilder%3CE,+CallType,+Args,+Unset%3CReturnType%3C()%3E%3E%3E)
### impl<E, CallType, Args> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<[ReturnType](utils/struct.ReturnType.html "struct ink_env::call::utils::ReturnType")<[()](https://doc.rust-lang.org/nightly/std/primitive.unit.html)>>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#460-468)
#### pub fn [returns](#method.returns)<R>(self) -> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ReturnType](utils/struct.ReturnType.html "struct ink_env::call::utils::ReturnType")<R>>>

Sets the type of the returned value upon the execution of the call.

##### [Note](#note)

Either use `.returns::<()>` to signal that the call does not return a value
or use `.returns::<T>` to signal that the call returns a value of type `T`.

[source](../../src/ink_env/call/call_builder.rs.html#471-489)[§](#impl-CallBuilder%3CE,+CallType,+Unset%3CExecutionInput%3CEmptyArgumentList%3E%3E,+RetType%3E)
### impl<E, CallType, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<[EmptyArgumentList](utils/type.EmptyArgumentList.html "type ink_env::call::utils::EmptyArgumentList")>>, RetType>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#477-488)
#### pub fn [exec\_input](#method.exec_input)<Args>( self, exec\_input: [ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<Args> ) -> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<Args>>, RetType>

Sets the execution input to the given value.

[source](../../src/ink_env/call/call_builder.rs.html#491-522)[§](#impl-CallBuilder%3CE,+Unset%3CCallType%3E,+Args,+RetType%3E-1)
### impl<E, CallType, Args, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<CallType>, Args, RetType>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#496-507)
#### pub fn [call](#method.call)( self, callee: E::[AccountId](../trait.Environment.html#associatedtype.AccountId "type ink_env::Environment::AccountId") ) -> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[Call](struct.Call.html "struct ink_env::call::Call")<E>>, Args, RetType>

Prepares the `CallBuilder` for a cross-contract [`Call`](struct.Call.html "struct ink_env::call::Call").

[source](../../src/ink_env/call/call_builder.rs.html#510-521)
#### pub fn [delegate](#method.delegate)( self, code\_hash: E::[Hash](../trait.Environment.html#associatedtype.Hash "type ink_env::Environment::Hash") ) -> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[DelegateCall](struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>>, Args, RetType>

Prepares the `CallBuilder` for a cross-contract [`DelegateCall`](struct.DelegateCall.html "struct ink_env::call::DelegateCall").

[source](../../src/ink_env/call/call_builder.rs.html#524-559)[§](#impl-CallBuilder%3CE,+Set%3CCall%3CE%3E%3E,+Args,+RetType%3E)
### impl<E, Args, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[Call](struct.Call.html "struct ink_env::call::Call")<E>>, Args, RetType>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#529-542)
#### pub fn [gas\_limit](#method.gas_limit)(self, gas\_limit: [Gas](../type.Gas.html "type ink_env::Gas")) -> Self

Sets the `gas_limit` for the current cross-contract call.

[source](../../src/ink_env/call/call_builder.rs.html#545-558)
#### pub fn [transferred\_value](#method.transferred_value)(self, transferred\_value: E::[Balance](../trait.Environment.html#associatedtype.Balance "type ink_env::Environment::Balance")) -> Self

Sets the `transferred_value` for the current cross-contract call.

[source](../../src/ink_env/call/call_builder.rs.html#561-575)[§](#impl-CallBuilder%3CE,+Set%3CDelegateCall%3CE%3E%3E,+Args,+RetType%3E)
### impl<E, Args, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[DelegateCall](struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>>, Args, RetType>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#566-574)
#### pub fn [code\_hash](#method.code_hash)(self, code\_hash: E::[Hash](../trait.Environment.html#associatedtype.Hash "type ink_env::Environment::Hash")) -> Self

Sets the `code_hash` to perform a delegate call with.

[source](../../src/ink_env/call/call_builder.rs.html#577-592)[§](#impl-CallBuilder%3CE,+Set%3CCall%3CE%3E%3E,+Set%3CExecutionInput%3CArgs%3E%3E,+Set%3CReturnType%3CRetType%3E%3E%3E)
### impl<E, Args, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[Call](struct.Call.html "struct ink_env::call::Call")<E>>, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<Args>>, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ReturnType](utils/struct.ReturnType.html "struct ink_env::call::utils::ReturnType")<RetType>>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#583-591)
#### pub fn [params](#method.params)(self) -> [CallParams](struct.CallParams.html "struct ink_env::call::CallParams")<E, [Call](struct.Call.html "struct ink_env::call::Call")<E>, Args, RetType>

Finalizes the call builder to call a function.

[source](../../src/ink_env/call/call_builder.rs.html#594-614)[§](#impl-CallBuilder%3CE,+Set%3CDelegateCall%3CE%3E%3E,+Set%3CExecutionInput%3CArgs%3E%3E,+Set%3CReturnType%3CRetType%3E%3E%3E)
### impl<E, Args, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[DelegateCall](struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>>, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<Args>>, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ReturnType](utils/struct.ReturnType.html "struct ink_env::call::utils::ReturnType")<RetType>>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#605-613)
#### pub fn [params](#method.params-1)(self) -> [CallParams](struct.CallParams.html "struct ink_env::call::CallParams")<E, [DelegateCall](struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>, Args, RetType>

Finalizes the call builder to call a function.

[source](../../src/ink_env/call/call_builder.rs.html#616-631)[§](#impl-CallBuilder%3CE,+Set%3CCall%3CE%3E%3E,+Unset%3CExecutionInput%3CEmptyArgumentList%3E%3E,+Unset%3CRetType%3E%3E)
### impl<E, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[Call](struct.Call.html "struct ink_env::call::Call")<E>>, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<[EmptyArgumentList](utils/type.EmptyArgumentList.html "type ink_env::call::utils::EmptyArgumentList")>>, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<RetType>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#622-630)
#### pub fn [params](#method.params-2)(self) -> [CallParams](struct.CallParams.html "struct ink_env::call::CallParams")<E, [Call](struct.Call.html "struct ink_env::call::Call")<E>, [EmptyArgumentList](utils/type.EmptyArgumentList.html "type ink_env::call::utils::EmptyArgumentList"), [()](https://doc.rust-lang.org/nightly/std/primitive.unit.html)>

Finalizes the call builder to call a function.

[source](../../src/ink_env/call/call_builder.rs.html#633-653)[§](#impl-CallBuilder%3CE,+Set%3CDelegateCall%3CE%3E%3E,+Unset%3CExecutionInput%3CEmptyArgumentList%3E%3E,+Unset%3CRetType%3E%3E)
### impl<E, RetType> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[DelegateCall](struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>>, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<[EmptyArgumentList](utils/type.EmptyArgumentList.html "type ink_env::call::utils::EmptyArgumentList")>>, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<RetType>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#644-652)
#### pub fn [params](#method.params-3)(self) -> [CallParams](struct.CallParams.html "struct ink_env::call::CallParams")<E, [DelegateCall](struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>, [EmptyArgumentList](utils/type.EmptyArgumentList.html "type ink_env::call::utils::EmptyArgumentList"), [()](https://doc.rust-lang.org/nightly/std/primitive.unit.html)>

Finalizes the call builder to call a function.

[source](../../src/ink_env/call/call_builder.rs.html#655-686)[§](#impl-CallBuilder%3CE,+Set%3CCall%3CE%3E%3E,+Unset%3CExecutionInput%3CEmptyArgumentList%3E%3E,+Unset%3CReturnType%3C()%3E%3E%3E)
### impl<E> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[Call](struct.Call.html "struct ink_env::call::Call")<E>>, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<[EmptyArgumentList](utils/type.EmptyArgumentList.html "type ink_env::call::utils::EmptyArgumentList")>>, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<[ReturnType](utils/struct.ReturnType.html "struct ink_env::call::utils::ReturnType")<[()](https://doc.rust-lang.org/nightly/std/primitive.unit.html)>>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#672-674)
#### pub fn [invoke](#method.invoke)(self)

Invokes the cross-chain function call.

##### [Panics](#panics)

This method panics if it encounters an [`ink::env::Error`](../enum.Error.html "enum ink_env::Error") or an
[`ink::primitives::LangError`](https://docs.rs/ink_primitives/4.2.0/x86_64-unknown-linux-gnu/ink_primitives/enum.LangError.html "enum ink_primitives::LangError"). If you want to handle
those use the [`try_invoke`](struct.CallBuilder.html#method.try_invoke "method ink_env::call::CallBuilder::try_invoke") method instead.

[source](../../src/ink_env/call/call_builder.rs.html#683-685)
#### pub fn [try\_invoke](#method.try_invoke)(self) -> [Result](https://doc.rust-lang.org/nightly/core/result/enum.Result.html "enum core::result::Result")<MessageResult<[()](https://doc.rust-lang.org/nightly/std/primitive.unit.html)>, [Error](../enum.Error.html "enum ink_env::Error")>

Invokes the cross-chain function call.

##### [Note](#note-1)

On failure this returns an outer [`ink::env::Error`](../enum.Error.html "enum ink_env::Error") or inner
[`ink::primitives::LangError`](https://docs.rs/ink_primitives/4.2.0/x86_64-unknown-linux-gnu/ink_primitives/enum.LangError.html "enum ink_primitives::LangError"), both of which can be
handled by the caller.

[source](../../src/ink_env/call/call_builder.rs.html#688-718)[§](#impl-CallBuilder%3CE,+Set%3CDelegateCall%3CE%3E%3E,+Unset%3CExecutionInput%3CEmptyArgumentList%3E%3E,+Unset%3CReturnType%3C()%3E%3E%3E)
### impl<E> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[DelegateCall](struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>>, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<[EmptyArgumentList](utils/type.EmptyArgumentList.html "type ink_env::call::utils::EmptyArgumentList")>>, [Unset](utils/struct.Unset.html "struct ink_env::call::utils::Unset")<[ReturnType](utils/struct.ReturnType.html "struct ink_env::call::utils::ReturnType")<[()](https://doc.rust-lang.org/nightly/std/primitive.unit.html)>>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"),

[source](../../src/ink_env/call/call_builder.rs.html#705-707)
#### pub fn [invoke](#method.invoke-1)(self)

Invokes the cross-chain function call using Delegate Call semantics.

##### [Panics](#panics-1)

This method panics if it encounters an [`ink::env::Error`](../enum.Error.html "enum ink_env::Error")
If you want to handle those use the [`try_invoke`](struct.CallBuilder.html#method.try_invoke "method ink_env::call::CallBuilder::try_invoke")
method instead.

[source](../../src/ink_env/call/call_builder.rs.html#715-717)
#### pub fn [try\_invoke](#method.try_invoke-1)(self) -> [Result](https://doc.rust-lang.org/nightly/core/result/enum.Result.html "enum core::result::Result")<[()](https://doc.rust-lang.org/nightly/std/primitive.unit.html), [Error](../enum.Error.html "enum ink_env::Error")>

Invokes the cross-chain function call using Delegate Call semantics.

##### [Note](#note-2)

On failure this an [`ink::env::Error`](../enum.Error.html "enum ink_env::Error") which can be handled by the
caller.

[source](../../src/ink_env/call/call_builder.rs.html#720-748)[§](#impl-CallBuilder%3CE,+Set%3CCall%3CE%3E%3E,+Set%3CExecutionInput%3CArgs%3E%3E,+Set%3CReturnType%3CR%3E%3E%3E)
### impl<E, Args, R> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[Call](struct.Call.html "struct ink_env::call::Call")<E>>, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<Args>>, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ReturnType](utils/struct.ReturnType.html "struct ink_env::call::utils::ReturnType")<R>>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"), Args: [Encode](https://docs.rs/parity-scale-codec/3.4.0/x86_64-unknown-linux-gnu/parity_scale_codec/codec/trait.Encode.html "trait parity_scale_codec::codec::Encode"), R: [Decode](https://docs.rs/parity-scale-codec/3.4.0/x86_64-unknown-linux-gnu/parity_scale_codec/codec/trait.Decode.html "trait parity_scale_codec::codec::Decode"),

[source](../../src/ink_env/call/call_builder.rs.html#734-736)
#### pub fn [invoke](#method.invoke-2)(self) -> R

Invokes the cross-chain function call and returns the result.

##### [Panics](#panics-2)

This method panics if it encounters an [`ink::env::Error`](../enum.Error.html "enum ink_env::Error") or an
[`ink::primitives::LangError`](https://docs.rs/ink_primitives/4.2.0/x86_64-unknown-linux-gnu/ink_primitives/enum.LangError.html "enum ink_primitives::LangError"). If you want to handle
those use the [`try_invoke`](struct.CallBuilder.html#method.try_invoke "method ink_env::call::CallBuilder::try_invoke") method instead.

[source](../../src/ink_env/call/call_builder.rs.html#745-747)
#### pub fn [try\_invoke](#method.try_invoke-2)(self) -> [Result](https://doc.rust-lang.org/nightly/core/result/enum.Result.html "enum core::result::Result")<MessageResult<R>, [Error](../enum.Error.html "enum ink_env::Error")>

Invokes the cross-chain function call and returns the result.

##### [Note](#note-3)

On failure this returns an outer [`ink::env::Error`](../enum.Error.html "enum ink_env::Error") or inner
[`ink::primitives::LangError`](https://docs.rs/ink_primitives/4.2.0/x86_64-unknown-linux-gnu/ink_primitives/enum.LangError.html "enum ink_primitives::LangError"), both of which can be
handled by the caller.

[source](../../src/ink_env/call/call_builder.rs.html#750-779)[§](#impl-CallBuilder%3CE,+Set%3CDelegateCall%3CE%3E%3E,+Set%3CExecutionInput%3CArgs%3E%3E,+Set%3CReturnType%3CR%3E%3E%3E)
### impl<E, Args, R> [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[DelegateCall](struct.DelegateCall.html "struct ink_env::call::DelegateCall")<E>>, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ExecutionInput](struct.ExecutionInput.html "struct ink_env::call::ExecutionInput")<Args>>, [Set](utils/struct.Set.html "struct ink_env::call::utils::Set")<[ReturnType](utils/struct.ReturnType.html "struct ink_env::call::utils::ReturnType")<R>>>where E: [Environment](../trait.Environment.html "trait ink_env::Environment"), Args: [Encode](https://docs.rs/parity-scale-codec/3.4.0/x86_64-unknown-linux-gnu/parity_scale_codec/codec/trait.Encode.html "trait parity_scale_codec::codec::Encode"), R: [Decode](https://docs.rs/parity-scale-codec/3.4.0/x86_64-unknown-linux-gnu/parity_scale_codec/codec/trait.Decode.html "trait parity_scale_codec::codec::Decode"),

[source](../../src/ink_env/call/call_builder.rs.html#765-767)
#### pub fn [invoke](#method.invoke-3)(self) -> R

Invokes the cross-chain function call using Delegate Call semantics and returns
the result.

##### [Panics](#panics-3)

This method panics if it encounters an [`ink::env::Error`](../enum.Error.html "enum ink_env::Error")
If you want to handle those use the [`try_invoke`](struct.CallBuilder.html#method.try_invoke "method ink_env::call::CallBuilder::try_invoke")
method instead.

[source](../../src/ink_env/call/call_builder.rs.html#776-778)
#### pub fn [try\_invoke](#method.try_invoke-3)(self) -> [Result](https://doc.rust-lang.org/nightly/core/result/enum.Result.html "enum core::result::Result")<R, [Error](../enum.Error.html "enum ink_env::Error")>

Invokes the cross-chain function call using Delegate Call semantics and returns
the result.

##### [Note](#note-4)

On failure this an [`ink::env::Error`](../enum.Error.html "enum ink_env::Error") which can be handled by the
caller.

## Auto Trait Implementations[§](#synthetic-implementations)

[§](#impl-RefUnwindSafe-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<E, CallType, Args, RetType> [RefUnwindSafe](https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html "trait core::panic::unwind_safe::RefUnwindSafe") for [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, RetType>where Args: [RefUnwindSafe](https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html "trait core::panic::unwind_safe::RefUnwindSafe"), CallType: [RefUnwindSafe](https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html "trait core::panic::unwind_safe::RefUnwindSafe"), RetType: [RefUnwindSafe](https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html "trait core::panic::unwind_safe::RefUnwindSafe"),

[§](#impl-Send-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<E, CallType, Args, RetType> [Send](https://doc.rust-lang.org/nightly/core/marker/trait.Send.html "trait core::marker::Send") for [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, RetType>where Args: [Send](https://doc.rust-lang.org/nightly/core/marker/trait.Send.html "trait core::marker::Send"), CallType: [Send](https://doc.rust-lang.org/nightly/core/marker/trait.Send.html "trait core::marker::Send"), RetType: [Send](https://doc.rust-lang.org/nightly/core/marker/trait.Send.html "trait core::marker::Send"),

[§](#impl-Sync-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<E, CallType, Args, RetType> [Sync](https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html "trait core::marker::Sync") for [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, RetType>where Args: [Sync](https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html "trait core::marker::Sync"), CallType: [Sync](https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html "trait core::marker::Sync"), RetType: [Sync](https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html "trait core::marker::Sync"),

[§](#impl-Unpin-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<E, CallType, Args, RetType> [Unpin](https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html "trait core::marker::Unpin") for [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, RetType>where Args: [Unpin](https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html "trait core::marker::Unpin"), CallType: [Unpin](https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html "trait core::marker::Unpin"), RetType: [Unpin](https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html "trait core::marker::Unpin"),

[§](#impl-UnwindSafe-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<E, CallType, Args, RetType> [UnwindSafe](https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html "trait core::panic::unwind_safe::UnwindSafe") for [CallBuilder](struct.CallBuilder.html "struct ink_env::call::CallBuilder")<E, CallType, Args, RetType>where Args: [UnwindSafe](https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html "trait core::panic::unwind_safe::UnwindSafe"), CallType: [UnwindSafe](https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html "trait core::panic::unwind_safe::UnwindSafe"), RetType: [UnwindSafe](https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html "trait core::panic::unwind_safe::UnwindSafe"),

## Blanket Implementations[§](#blanket-implementations)

[source](https://doc.rust-lang.org/nightly/src/core/any.rs.html#200)[§](#impl-Any-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> [Any](https://doc.rust-lang.org/nightly/core/any/trait.Any.html "trait core::any::Any") for Twhere T: 'static + ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

[source](https://doc.rust-lang.org/nightly/src/core/any.rs.html#201)[§](#method.type_id)
#### fn [type\_id](https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id)(&self) -> [TypeId](https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html "struct core::any::TypeId")

Gets the `TypeId` of `self`. [Read more](https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id)[source](https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#208)[§](#impl-Borrow%3CT%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> [Borrow](https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html "trait core::borrow::Borrow")<T> for Twhere T: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

[source](https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#210)[§](#method.borrow)
#### fn [borrow](https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow)(&self) -> [&T](https://doc.rust-lang.org/nightly/std/primitive.reference.html)

Immutably borrows from an owned value. [Read more](https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow)[source](https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#216)[§](#impl-BorrowMut%3CT%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> [BorrowMut](https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html "trait core::borrow::BorrowMut")<T> for Twhere T: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

[source](https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#217)[§](#method.borrow_mut)
#### fn [borrow\_mut](https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut)(&mut self) -> [&mut T](https://doc.rust-lang.org/nightly/std/primitive.reference.html)

Mutably borrows from an owned value. [Read more](https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut)[§](#impl-Conv-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> Conv for T

[§](#method.conv)
#### fn conv<T>(self) -> Twhere Self: [Into](https://doc.rust-lang.org/nightly/core/convert/trait.Into.html "trait core::convert::Into")<T>,

Converts `self` into `T` using `Into<T>`. Read more[§](#impl-FmtForward-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> FmtForward for T

[§](#method.fmt_binary)
#### fn fmt\_binary(self) -> FmtBinary<Self>where Self: [Binary](https://doc.rust-lang.org/nightly/core/fmt/trait.Binary.html "trait core::fmt::Binary"),

Causes `self` to use its `Binary` implementation when `Debug`-formatted.[§](#method.fmt_display)
#### fn fmt\_display(self) -> FmtDisplay<Self>where Self: [Display](https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html "trait core::fmt::Display"),

Causes `self` to use its `Display` implementation when
`Debug`-formatted.[§](#method.fmt_lower_exp)
#### fn fmt\_lower\_exp(self) -> FmtLowerExp<Self>where Self: [LowerExp](https://doc.rust-lang.org/nightly/core/fmt/trait.LowerExp.html "trait core::fmt::LowerExp"),

Causes `self` to use its `LowerExp` implementation when
`Debug`-formatted.[§](#method.fmt_lower_hex)
#### fn fmt\_lower\_hex(self) -> FmtLowerHex<Self>where Self: [LowerHex](https://doc.rust-lang.org/nightly/core/fmt/trait.LowerHex.html "trait core::fmt::LowerHex"),

Causes `self` to use its `LowerHex` implementation when
`Debug`-formatted.[§](#method.fmt_octal)
#### fn fmt\_octal(self) -> FmtOctal<Self>where Self: [Octal](https://doc.rust-lang.org/nightly/core/fmt/trait.Octal.html "trait core::fmt::Octal"),

Causes `self` to use its `Octal` implementation when `Debug`-formatted.[§](#method.fmt_pointer)
#### fn fmt\_pointer(self) -> FmtPointer<Self>where Self: [Pointer](https://doc.rust-lang.org/nightly/core/fmt/trait.Pointer.html "trait core::fmt::Pointer"),

Causes `self` to use its `Pointer` implementation when
`Debug`-formatted.[§](#method.fmt_upper_exp)
#### fn fmt\_upper\_exp(self) -> FmtUpperExp<Self>where Self: [UpperExp](https://doc.rust-lang.org/nightly/core/fmt/trait.UpperExp.html "trait core::fmt::UpperExp"),

Causes `self` to use its `UpperExp` implementation when
`Debug`-formatted.[§](#method.fmt_upper_hex)
#### fn fmt\_upper\_hex(self) -> FmtUpperHex<Self>where Self: [UpperHex](https://doc.rust-lang.org/nightly/core/fmt/trait.UpperHex.html "trait core::fmt::UpperHex"),

Causes `self` to use its `UpperHex` implementation when
`Debug`-formatted.[§](#method.fmt_list)
#### fn fmt\_list(self) -> FmtList<Self>where [&'a Self](https://doc.rust-lang.org/nightly/std/primitive.reference.html): for<'a> [IntoIterator](https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html "trait core::iter::traits::collect::IntoIterator"),

Formats each item in a sequence. Read more[source](https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#723)[§](#impl-From%3CT%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> [From](https://doc.rust-lang.org/nightly/core/convert/trait.From.html "trait core::convert::From")<T> for T

[source](https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#726)[§](#method.from)
#### fn [from](https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from)(t: T) -> T

Returns the argument unchanged.

[source](https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#707)[§](#impl-Into%3CU%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T, U> [Into](https://doc.rust-lang.org/nightly/core/convert/trait.Into.html "trait core::convert::Into")<U> for Twhere U: [From](https://doc.rust-lang.org/nightly/core/convert/trait.From.html "trait core::convert::From")<T>,

[source](https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#716)[§](#method.into)
#### fn [into](https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into)(self) -> U

Calls `U::from(self)`.

That is, this conversion is whatever the implementation of
`[From](https://doc.rust-lang.org/nightly/core/convert/trait.From.html "trait core::convert::From")<T> for U` chooses to do.

[§](#impl-Pipe-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> Pipe for Twhere T: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

[§](#method.pipe)
#### fn pipe<R>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")(Self) -> R) -> Rwhere Self: [Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Pipes by value. This is generally the method you want to use. Read more[§](#method.pipe_ref)
#### fn pipe\_ref<'a, R>(&'a self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&'a Self](https://doc.rust-lang.org/nightly/std/primitive.reference.html)) -> R) -> Rwhere R: 'a,

Borrows `self` and passes that borrow into the pipe function. Read more[§](#method.pipe_ref_mut)
#### fn pipe\_ref\_mut<'a, R>(&'a mut self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&'a mut Self](https://doc.rust-lang.org/nightly/std/primitive.reference.html)) -> R) -> Rwhere R: 'a,

Mutably borrows `self` and passes that borrow into the pipe function. Read more[§](#method.pipe_borrow)
#### fn pipe\_borrow<'a, B, R>(&'a self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&'a B](https://doc.rust-lang.org/nightly/std/primitive.reference.html)) -> R) -> Rwhere Self: [Borrow](https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html "trait core::borrow::Borrow")<B>, B: 'a + ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"), R: 'a,

Borrows `self`, then passes `self.borrow()` into the pipe function. Read more[§](#method.pipe_borrow_mut)
#### fn pipe\_borrow\_mut<'a, B, R>( &'a mut self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&'a mut B](https://doc.rust-lang.org/nightly/std/primitive.reference.html)) -> R ) -> Rwhere Self: [BorrowMut](https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html "trait core::borrow::BorrowMut")<B>, B: 'a + ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"), R: 'a,

Mutably borrows `self`, then passes `self.borrow_mut()` into the pipe
function. Read more[§](#method.pipe_as_ref)
#### fn pipe\_as\_ref<'a, U, R>(&'a self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&'a U](https://doc.rust-lang.org/nightly/std/primitive.reference.html)) -> R) -> Rwhere Self: [AsRef](https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html "trait core::convert::AsRef")<U>, U: 'a + ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"), R: 'a,

Borrows `self`, then passes `self.as_ref()` into the pipe function.[§](#method.pipe_as_mut)
#### fn pipe\_as\_mut<'a, U, R>(&'a mut self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&'a mut U](https://doc.rust-lang.org/nightly/std/primitive.reference.html)) -> R) -> Rwhere Self: [AsMut](https://doc.rust-lang.org/nightly/core/convert/trait.AsMut.html "trait core::convert::AsMut")<U>, U: 'a + ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"), R: 'a,

Mutably borrows `self`, then passes `self.as_mut()` into the pipe
function.[§](#method.pipe_deref)
#### fn pipe\_deref<'a, T, R>(&'a self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&'a T](https://doc.rust-lang.org/nightly/std/primitive.reference.html)) -> R) -> Rwhere Self: [Deref](https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html "trait core::ops::deref::Deref")<Target = T>, T: 'a + ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"), R: 'a,

Borrows `self`, then passes `self.deref()` into the pipe function.[§](#method.pipe_deref_mut)
#### fn pipe\_deref\_mut<'a, T, R>( &'a mut self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&'a mut T](https://doc.rust-lang.org/nightly/std/primitive.reference.html)) -> R ) -> Rwhere Self: [DerefMut](https://doc.rust-lang.org/nightly/core/ops/deref/trait.DerefMut.html "trait core::ops::deref::DerefMut")<Target = T> + [Deref](https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html "trait core::ops::deref::Deref"), T: 'a + ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"), R: 'a,

Mutably borrows `self`, then passes `self.deref_mut()` into the pipe
function.[source](https://docs.rs/typenum/1.16.0/src/typenum/type_operators.rs.html#34)[§](#impl-Same%3CT%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> [Same](https://docs.rs/typenum/1.16.0/typenum/type_operators/trait.Same.html "trait typenum::type_operators::Same")<T> for T

[§](#associatedtype.Output)
#### type [Output](https://docs.rs/typenum/1.16.0/typenum/type_operators/trait.Same.html#associatedtype.Output) = T

Should always be `Self`[§](#impl-Tap-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> Tap for T

[§](#method.tap)
#### fn tap(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&Self](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Self

Immutable access to a value. Read more[§](#method.tap_mut)
#### fn tap\_mut(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&mut Self](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Self

Mutable access to a value. Read more[§](#method.tap_borrow)
#### fn tap\_borrow<B>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&B](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [Borrow](https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html "trait core::borrow::Borrow")<B>, B: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Immutable access to the `Borrow<B>` of a value. Read more[§](#method.tap_borrow_mut)
#### fn tap\_borrow\_mut<B>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&mut B](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [BorrowMut](https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html "trait core::borrow::BorrowMut")<B>, B: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Mutable access to the `BorrowMut<B>` of a value. Read more[§](#method.tap_ref)
#### fn tap\_ref<R>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&R](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [AsRef](https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html "trait core::convert::AsRef")<R>, R: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Immutable access to the `AsRef<R>` view of a value. Read more[§](#method.tap_ref_mut)
#### fn tap\_ref\_mut<R>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&mut R](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [AsMut](https://doc.rust-lang.org/nightly/core/convert/trait.AsMut.html "trait core::convert::AsMut")<R>, R: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Mutable access to the `AsMut<R>` view of a value. Read more[§](#method.tap_deref)
#### fn tap\_deref<T>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&T](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [Deref](https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html "trait core::ops::deref::Deref")<Target = T>, T: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Immutable access to the `Deref::Target` of a value. Read more[§](#method.tap_deref_mut)
#### fn tap\_deref\_mut<T>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&mut T](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [DerefMut](https://doc.rust-lang.org/nightly/core/ops/deref/trait.DerefMut.html "trait core::ops::deref::DerefMut")<Target = T> + [Deref](https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html "trait core::ops::deref::Deref"), T: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Mutable access to the `Deref::Target` of a value. Read more[§](#method.tap_dbg)
#### fn tap\_dbg(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&Self](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Self

Calls `.tap()` only in debug builds, and is erased in release builds.[§](#method.tap_mut_dbg)
#### fn tap\_mut\_dbg(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&mut Self](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Self

Calls `.tap_mut()` only in debug builds, and is erased in release
builds.[§](#method.tap_borrow_dbg)
#### fn tap\_borrow\_dbg<B>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&B](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [Borrow](https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html "trait core::borrow::Borrow")<B>, B: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Calls `.tap_borrow()` only in debug builds, and is erased in release
builds.[§](#method.tap_borrow_mut_dbg)
#### fn tap\_borrow\_mut\_dbg<B>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&mut B](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [BorrowMut](https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html "trait core::borrow::BorrowMut")<B>, B: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Calls `.tap_borrow_mut()` only in debug builds, and is erased in release
builds.[§](#method.tap_ref_dbg)
#### fn tap\_ref\_dbg<R>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&R](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [AsRef](https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html "trait core::convert::AsRef")<R>, R: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Calls `.tap_ref()` only in debug builds, and is erased in release
builds.[§](#method.tap_ref_mut_dbg)
#### fn tap\_ref\_mut\_dbg<R>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&mut R](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [AsMut](https://doc.rust-lang.org/nightly/core/convert/trait.AsMut.html "trait core::convert::AsMut")<R>, R: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Calls `.tap_ref_mut()` only in debug builds, and is erased in release
builds.[§](#method.tap_deref_dbg)
#### fn tap\_deref\_dbg<T>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&T](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [Deref](https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html "trait core::ops::deref::Deref")<Target = T>, T: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Calls `.tap_deref()` only in debug builds, and is erased in release
builds.[§](#method.tap_deref_mut_dbg)
#### fn tap\_deref\_mut\_dbg<T>(self, func: impl [FnOnce](https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html "trait core::ops::function::FnOnce")([&mut T](https://doc.rust-lang.org/nightly/std/primitive.reference.html))) -> Selfwhere Self: [DerefMut](https://doc.rust-lang.org/nightly/core/ops/deref/trait.DerefMut.html "trait core::ops::deref::DerefMut")<Target = T> + [Deref](https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html "trait core::ops::deref::Deref"), T: ?[Sized](https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html "trait core::marker::Sized"),

Calls `.tap_deref_mut()` only in debug builds, and is erased in release
builds.[§](#impl-TryConv-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T> TryConv for T

[§](#method.try_conv)
#### fn try\_conv<T>(self) -> [Result](https://doc.rust-lang.org/nightly/core/result/enum.Result.html "enum core::result::Result")<T, Self::[Error](https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error "type core::convert::TryInto::Error")>where Self: [TryInto](https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html "trait core::convert::TryInto")<T>,

Attempts to convert `self` into `T` using `TryInto<T>`. Read more[source](https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#763)[§](#impl-TryFrom%3CU%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T, U> [TryFrom](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html "trait core::convert::TryFrom")<U> for Twhere U: [Into](https://doc.rust-lang.org/nightly/core/convert/trait.Into.html "trait core::convert::Into")<T>,

[§](#associatedtype.Error-1)
#### type [Error](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error) = [Infallible](https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html "enum core::convert::Infallible")

The type returned in the event of a conversion error.[source](https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#770)[§](#method.try_from)
#### fn [try\_from](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from)(value: U) -> [Result](https://doc.rust-lang.org/nightly/core/result/enum.Result.html "enum core::result::Result")<T, <T as [TryFrom](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html "trait core::convert::TryFrom")<U>>::[Error](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error "type core::convert::TryFrom::Error")>

Performs the conversion.[source](https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#748)[§](#impl-TryInto%3CU%3E-for-CallBuilder%3CE,+CallType,+Args,+RetType%3E)
### impl<T, U> [TryInto](https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html "trait core::convert::TryInto")<U> for Twhere U: [TryFrom](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html "trait core::convert::TryFrom")<T>,

[§](#associatedtype.Error)
#### type [Error](https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error) = <U as [TryFrom](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html "trait core::convert::TryFrom")<T>>::[Error](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error "type core::convert::TryFrom::Error")

The type returned in the event of a conversion error.[source](https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#755)[§](#method.try_into)
#### fn [try\_into](https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into)(self) -> [Result](https://doc.rust-lang.org/nightly/core/result/enum.Result.html "enum core::result::Result")<U, <U as [TryFrom](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html "trait core::convert::TryFrom")<T>>::[Error](https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error "type core::convert::TryFrom::Error")>

Performs the conversion.

=== Content from github.com_e18f88e9_20250114_194020.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuse-ink%2Fink%2Fsecurity%2Fadvisories%2FGHSA-853p-5678-hv8f)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuse-ink%2Fink%2Fsecurity%2Fadvisories%2FGHSA-853p-5678-hv8f)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=use-ink%2Fink)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[use-ink](/use-ink)
/
**[ink](/use-ink/ink)**
Public

* [Notifications](/login?return_to=%2Fuse-ink%2Fink) You must be signed in to change notification settings
* [Fork
  443](/login?return_to=%2Fuse-ink%2Fink)
* [Star
   1.4k](/login?return_to=%2Fuse-ink%2Fink)

* [Code](/use-ink/ink)
* [Issues
  131](/use-ink/ink/issues)
* [Pull requests
  16](/use-ink/ink/pulls)
* [Actions](/use-ink/ink/actions)
* [Projects
  1](/use-ink/ink/projects)
* [Security](/use-ink/ink/security)
* [Insights](/use-ink/ink/pulse)

Additional navigation options

* [Code](/use-ink/ink)
* [Issues](/use-ink/ink/issues)
* [Pull requests](/use-ink/ink/pulls)
* [Actions](/use-ink/ink/actions)
* [Projects](/use-ink/ink/projects)
* [Security](/use-ink/ink/security)
* [Insights](/use-ink/ink/pulse)

# Incorrect decoding of storage value when using `DelegateCall`

Low

[cmichi](/cmichi)
published
GHSA-853p-5678-hv8f
Jun 14, 2023

## Package

cargo

ink
([Rust](/advisories?query=ecosystem%3Arust))

## Affected versions

>=4.0.0

## Patched versions

4.2.1

cargo

ink\_env
([Rust](/advisories?query=ecosystem%3Arust))

>=4.0.0

4.2.1

## Description

### Summary

The return value when using delegate call mechanics, either through [`CallBuilder::delegate`](https://docs.rs/ink_env/4.2.0/ink_env/call/struct.CallBuilder.html#method.delegate) or [`ink_env::invoke_contract_delegate`](https://docs.rs/ink_env/4.2.0/ink_env/fn.invoke_contract_delegate.html), is being decoded incorrectly.

### Description

Consider this minimal example:

```
// First contract, this will be performing a delegate call to the `Callee`.
#[ink(storage)]
pub struct Caller {
    value: u128,
}

#[ink(message)]
pub fn get_value(&self, callee_code_hash: Hash) -> u128 {
    let result = build_call::<DefaultEnvironment>()
        .delegate(callee_code_hash)
        .exec_input(ExecutionInput::new(Selector::new(ink::selector_bytes!(
            "get_value"
        ))))
        .returns::<u128>()
        .invoke();

    result
}

// Different contract, using this code hash for the delegate call.
#[ink(storage)]
pub struct Callee {
    value: u128,
}

#[ink(message)]
pub fn get_value(&self) -> u128 {
    self.value
}
```

In this example we are executing the `Callee` code in the context of the `Caller` contract. This means we'll be using the storage values of the `Caller` contract.

Running this code we expect the delegate call to return `value` as it was stored in the `Caller` contract. However, due to the reported bug a different value is returned (for the case of `uint`s it is `256` times the expected value).

### Impact

After conducting an analysis of the on-chain deployments of ink! contracts on Astar, Shiden, Aleph Zero, Amplitude and Pendulum, we have found that no contracts on those chains have been affected by the issue.

This bug was related to the mechanics around decoding a call's return buffer, which was changed as part of [#1450](https://github.com/use-ink/ink/pull/1450). Since this feature was only released in ink! 4.0.0 no previous versions are affected.

### Mitigations

If you have an ink! 4.x series contract, please update it to the [4.2.1](https://github.com/paritytech/ink/releases/tag/v4.2.1) patch release that we just published.

### Credits

Thank you Facundo Lerena from [CoinFabrik](https://www.coinfabrik.com) for reporting this problem in a well-structured and responsible way.

### Severity

Low

### CVE ID

CVE-2023-34449

### Weaknesses

No CWEs

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


