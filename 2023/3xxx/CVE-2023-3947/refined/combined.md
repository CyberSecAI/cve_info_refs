=== Content from www.wordfence.com_ffb562c1_20250114_203749.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Video Conferencing with Zoom <= 4.2.1 - Sensitive Information Exposure

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Video Conferencing with Zoom <= 4.2.1 - Sensitive Information Exposure

3.7

**Use of Hard-coded Cryptographic Key**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:N/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:N/A:N)

| CVE | [CVE-2023-3947](https://www.cve.org/CVERecord?id=CVE-2023-3947) |
| --- | --- |
| CVSS | 3.7 (Low) |
| Publicly Published | July 25, 2023 |
| Last Updated | July 26, 2023 |
| Researcher | [István Márton - Wordfence](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/lana-codes) |

### Description

The Video Conferencing with Zoom plugin for WordPress is vulnerable to Sensitive Information Exposure due to hardcoded encryption key on the 'vczapi\_encrypt\_decrypt' function in versions up to, and including, 4.2.1. This makes it possible for unauthenticated attackers to decrypt and view the meeting id and password.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/video-conferencing-with-zoom-api/tags/4.2.1/includes/helpers.php#L546)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/video-conferencing-with-zoom-api/trunk/includes/Helpers/Encryption.php?rev=2942302)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fvideo-conferencing-with-zoom-api%2Fvideo-conferencing-with-zoom-421-sensitive-information-exposure&t=Video%20Conferencing%20with%20Zoom%20%3C%3D%204.2.1%20-%20Sensitive%20Information%20Exposure "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fvideo-conferencing-with-zoom-api%2Fvideo-conferencing-with-zoom-421-sensitive-information-exposure&text=Video%20Conferencing%20with%20Zoom%20%3C%3D%204.2.1%20-%20Sensitive%20Information%20Exposure "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fvideo-conferencing-with-zoom-api%2Fvideo-conferencing-with-zoom-421-sensitive-information-exposure "LinkedIn")
Email

## Vulnerability Details for Video Conferencing with Zoom

#### [Video Conferencing with Zoom](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/video-conferencing-with-zoom-api)

| Software Type | Plugin |
| --- | --- |
| Software Slug | video-conferencing-with-zoom-api [(view on wordpress.org)](https://wordpress.org/plugins/video-conferencing-with-zoom-api) |
| Patched? | Yes |
| Remediation | Update to version 4.2.2, or a newer patched version |
| Affected Version | * <= 4.2.1 |
| Patched Version | * 4.2.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_e7dc20fd_20250114_203737.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fvideo-conferencing-with-zoom-api%2Ftags%2F4.2.1%2Fincludes%2Fhelpers.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/video-conferencing-with-zoom-api/tags/4.2.1/includes/helpers.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/video-conferencing-with-zoom-api/tags/4.2.1/includes/helpers.php)

---

# [source:](/browser?order=name "Go to repository root") [video-conferencing-with-zoom-api](/browser/video-conferencing-with-zoom-api?order=name "View video-conferencing-with-zoom-api")/[tags](/browser/video-conferencing-with-zoom-api/tags?order=name "View tags")/[4.2.1](/browser/video-conferencing-with-zoom-api/tags/4.2.1?order=name "View 4.2.1")/[includes](/browser/video-conferencing-with-zoom-api/tags/4.2.1/includes?order=name "View includes")/[helpers.php](/browser/video-conferencing-with-zoom-api/tags/4.2.1/includes/helpers.php?order=name "View helpers.php")

View diff against:

View revision:

| [Last change](/changeset/2927761/video-conferencing-with-zoom-api/tags/4.2.1/includes/helpers.php "View differences") on this file was [2927761](/changeset/2927761/ "View changeset 2927761"), checked in by j\_\_3rk, [19 months ago](/timeline?from=2023-06-19T08%3A18%3A19Z&precision=second "See timeline at 06/19/2023 08:18:19 AM") |
| --- |
| Release 421 |
| **File size:** 32.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | // If this file is called directly, abort. |
| [3](#L3) | if ( ! defined( 'ABSPATH' ) ) { |
| [4](#L4) | exit; |
| [5](#L5) | } |
| [6](#L6) |  |
| [7](#L7) | if(!function\_exists('vczapi\_is\_plugin\_active')){ |
| [8](#L8) | function vczapi\_is\_plugin\_active( $plugin ) { |
| [9](#L9) | $active = false; |
| [10](#L10) | // check for plugin using plugin name |
| [11](#L11) | if ( in\_array( $plugin, apply\_filters( 'active\_plugins', get\_option( 'active\_plugins' ) ) ) ) { |
| [12](#L12) | $active = true; |
| [13](#L13) | } |
| [14](#L14) |  |
| [15](#L15) | return $active; |
| [16](#L16) | } |
| [17](#L17) | } |
| [18](#L18) |  |
| [19](#L19) |  |
| [20](#L20) | if ( ! function\_exists( 'dump' ) ) { |
| [21](#L21) | /\*\* |
| [22](#L22) | \* @author Deepen |
| [23](#L23) | \* @since  1.0.0 |
| [24](#L24) | \*/ |
| [25](#L25) | function dump( $var ) { |
| [26](#L26) | echo '<pre>'; |
| [27](#L27) | var\_dump( $var ); |
| [28](#L28) | echo '</pre>'; |
| [29](#L29) | } |
| [30](#L30) | } |
| [31](#L31) |  |
| [32](#L32) | if ( ! function\_exists( 'zvc\_get\_timezone\_offset\_wp' ) ) { |
| [33](#L33) | function zvc\_get\_timezone\_offset\_wp() { |
| [34](#L34) | $tz = get\_option( 'timezone\_string' ); |
| [35](#L35) | if ( ! empty( $tz ) ) { |
| [36](#L36) | return $tz; |
| [37](#L37) | } |
| [38](#L38) | $offset = get\_option( 'gmt\_offset' ); |
| [39](#L39) | //correction for system sending Azores when timezone was set to zero |
| [40](#L40) | //bail early is offset is 0 |
| [41](#L41) | if ( empty( $tz ) && $offset == 0 ) { |
| [42](#L42) | return 'UTC'; |
| [43](#L43) | } |
| [44](#L44) | $hours   = (int) $offset; |
| [45](#L45) | $minutes = abs( ( $offset - (int) $offset ) \* 60 ); |
| [46](#L46) | $offset  = sprintf( '%+03d:%02d', $hours, $minutes ); |
| [47](#L47) | // Calculate seconds from offset |
| [48](#L48) | list( $hours, $minutes ) = explode( ':', $offset ); |
| [49](#L49) | $seconds = $hours \* 60 \* 60 + $minutes \* 60; |
| [50](#L50) | if ( empty( $tz ) ) { |
| [51](#L51) | $tz = timezone\_name\_from\_abbr( '', $seconds, 0 ); |
| [52](#L52) | } |
| [53](#L53) |  |
| [54](#L54) | if ( $tz == 'Asia/Katmandu' ) { |
| [55](#L55) | $tz = 'Asia/Kathmandu'; |
| [56](#L56) | } |
| [57](#L57) |  |
| [58](#L58) | return $tz; |
| [59](#L59) | } |
| [60](#L60) | } |
| [61](#L61) |  |
| [62](#L62) | if ( ! function\_exists( 'zvc\_get\_timezone\_options' ) ) { |
| [63](#L63) | /\*\* |
| [64](#L64) | \* @author Deepen |
| [65](#L65) | \* @since  1.0.0 |
| [66](#L66) | \*/ |
| [67](#L67) | function zvc\_get\_timezone\_options() { |
| [68](#L68) | $zones\_array = array( |
| [69](#L69) | "Pacific/Midway"                 => "(GMT-11:00) Midway Island, Samoa ", |
| [70](#L70) | "Pacific/Pago\_Pago"              => "(GMT-11:00) Pago Pago ", |
| [71](#L71) | "Pacific/Honolulu"               => "(GMT-10:00) Hawaii ", |
| [72](#L72) | "America/Anchorage"              => "(GMT-8:00) Alaska ", |
| [73](#L73) | "America/Vancouver"              => "(GMT-7:00) Vancouver ", |
| [74](#L74) | "America/Los\_Angeles"            => "(GMT-7:00) Pacific Time (US and Canada) ", |
| [75](#L75) | "America/Tijuana"                => "(GMT-7:00) Tijuana ", |
| [76](#L76) | "America/Phoenix"                => "(GMT-7:00) Arizona ", |
| [77](#L77) | "America/Edmonton"               => "(GMT-6:00) Edmonton ", |
| [78](#L78) | "America/Denver"                 => "(GMT-6:00) Mountain Time (US and Canada) ", |
| [79](#L79) | "America/Mazatlan"               => "(GMT-6:00) Mazatlan ", |
| [80](#L80) | "America/Regina"                 => "(GMT-6:00) Saskatchewan ", |
| [81](#L81) | "America/Guatemala"              => "(GMT-6:00) Guatemala ", |
| [82](#L82) | "America/El\_Salvador"            => "(GMT-6:00) El Salvador ", |
| [83](#L83) | "America/Managua"                => "(GMT-6:00) Managua ", |
| [84](#L84) | "America/Costa\_Rica"             => "(GMT-6:00) Costa Rica ", |
| [85](#L85) | "America/Tegucigalpa"            => "(GMT-6:00) Tegucigalpa ", |
| [86](#L86) | "America/Winnipeg"               => "(GMT-5:00) Winnipeg ", |
| [87](#L87) | "America/Chicago"                => "(GMT-5:00) Central Time (US and Canada) ", |
| [88](#L88) | "America/Mexico\_City"            => "(GMT-5:00) Mexico City ", |
| [89](#L89) | "America/Panama"                 => "(GMT-5:00) Panama ", |
| [90](#L90) | "America/Bogota"                 => "(GMT-5:00) Bogota ", |
| [91](#L91) | "America/Lima"                   => "(GMT-5:00) Lima ", |
| [92](#L92) | "America/Caracas"                => "(GMT-4:30) Caracas ", |
| [93](#L93) | "America/Montreal"               => "(GMT-4:00) Montreal ", |
| [94](#L94) | "America/New\_York"               => "(GMT-4:00) Eastern Time (US and Canada) ", |
| [95](#L95) | "America/Indianapolis"           => "(GMT-4:00) Indiana (East) ", |
| [96](#L96) | "America/Puerto\_Rico"            => "(GMT-4:00) Puerto Rico ", |
| [97](#L97) | "America/Santiago"               => "(GMT-4:00) Santiago ", |
| [98](#L98) | "America/Halifax"                => "(GMT-3:00) Halifax ", |
| [99](#L99) | "America/Montevideo"             => "(GMT-3:00) Montevideo ", |
| [100](#L100) | "America/Araguaina"              => "(GMT-3:00) Brasilia ", |
| [101](#L101) | "America/Argentina/Buenos\_Aires" => "(GMT-3:00) Buenos Aires, Georgetown ", |
| [102](#L102) | "America/Sao\_Paulo"              => "(GMT-3:00) Sao Paulo ", |
| [103](#L103) | "Canada/Atlantic"                => "(GMT-3:00) Atlantic Time (Canada) ", |
| [104](#L104) | "America/St\_Johns"               => "(GMT-2:30) Newfoundland and Labrador ", |
| [105](#L105) | "America/Godthab"                => "(GMT-2:00) Greenland ", |
| [106](#L106) | "Atlantic/Cape\_Verde"            => "(GMT-1:00) Cape Verde Islands ", |
| [107](#L107) | "Atlantic/Azores"                => "(GMT+0:00) Azores ", |
| [108](#L108) | "UTC"                            => "(GMT+0:00) Universal Time UTC ", |
| [109](#L109) | "Etc/Greenwich"                  => "(GMT+0:00) Greenwich Mean Time ", |
| [110](#L110) | "Atlantic/Reykjavik"             => "(GMT+0:00) Reykjavik ", |
| [111](#L111) | "Africa/Nouakchott"              => "(GMT+0:00) Nouakchott ", |
| [112](#L112) | "Europe/Dublin"                  => "(GMT+1:00) Dublin ", |
| [113](#L113) | "Europe/London"                  => "(GMT+1:00) London ", |
| [114](#L114) | "Europe/Lisbon"                  => "(GMT+1:00) Lisbon ", |
| [115](#L115) | "Africa/Casablanca"              => "(GMT+1:00) Casablanca ", |
| [116](#L116) | "Africa/Bangui"                  => "(GMT+1:00) West Central Africa ", |
| [117](#L117) | "Africa/Algiers"                 => "(GMT+1:00) Algiers ", |
| [118](#L118) | "Africa/Tunis"                   => "(GMT+1:00) Tunis ", |
| [119](#L119) | "Europe/Belgrade"                => "(GMT+2:00) Belgrade, Bratislava, Ljubljana ", |
| [120](#L120) | "CET"                            => "(GMT+2:00) Sarajevo, Skopje, Zagreb ", |
| [121](#L121) | "Europe/Oslo"                    => "(GMT+2:00) Oslo ", |
| [122](#L122) | "Europe/Copenhagen"              => "(GMT+2:00) Copenhagen ", |
| [123](#L123) | "Europe/Brussels"                => "(GMT+2:00) Brussels ", |
| [124](#L124) | "Europe/Berlin"                  => "(GMT+2:00) Amsterdam, Berlin, Rome, Stockholm, Vienna ", |
| [125](#L125) | "Europe/Amsterdam"               => "(GMT+2:00) Amsterdam ", |
| [126](#L126) | "Europe/Rome"                    => "(GMT+2:00) Rome ", |
| [127](#L127) | "Europe/Stockholm"               => "(GMT+2:00) Stockholm ", |
| [128](#L128) | "Europe/Vienna"                  => "(GMT+2:00) Vienna ", |
| [129](#L129) | "Europe/Luxembourg"              => "(GMT+2:00) Luxembourg ", |
| [130](#L130) | "Europe/Paris"                   => "(GMT+2:00) Paris ", |
| [131](#L131) | "Europe/Zurich"                  => "(GMT+2:00) Zurich ", |
| [132](#L132) | "Europe/Madrid"                  => "(GMT+2:00) Madrid ", |
| [133](#L133) | "Africa/Harare"                  => "(GMT+2:00) Harare, Pretoria ", |
| [134](#L134) | "Europe/Warsaw"                  => "(GMT+2:00) Warsaw ", |
| [135](#L135) | "Europe/Prague"                  => "(GMT+2:00) Prague Bratislava ", |
| [136](#L136) | "Europe/Budapest"                => "(GMT+2:00) Budapest ", |
| [137](#L137) | "Africa/Tripoli"                 => "(GMT+2:00) Tripoli ", |
| [138](#L138) | "Africa/Cairo"                   => "(GMT+2:00) Cairo ", |
| [139](#L139) | "Africa/Johannesburg"            => "(GMT+2:00) Johannesburg ", |
| [140](#L140) | "Europe/Helsinki"                => "(GMT+3:00) Helsinki ", |
| [141](#L141) | "Africa/Nairobi"                 => "(GMT+3:00) Nairobi ", |
| [142](#L142) | "Europe/Sofia"                   => "(GMT+3:00) Sofia ", |
| [143](#L143) | "Europe/Istanbul"                => "(GMT+3:00) Istanbul ", |
| [144](#L144) | "Europe/Athens"                  => "(GMT+3:00) Athens ", |
| [145](#L145) | "Europe/Bucharest"               => "(GMT+3:00) Bucharest ", |
| [146](#L146) | "Asia/Nicosia"                   => "(GMT+3:00) Nicosia ", |
| [147](#L147) | "Asia/Beirut"                    => "(GMT+3:00) Beirut ", |
| [148](#L148) | "Asia/Damascus"                  => "(GMT+3:00) Damascus ", |
| [149](#L149) | "Asia/Jerusalem"                 => "(GMT+3:00) Jerusalem ", |
| [150](#L150) | "Asia/Amman"                     => "(GMT+3:00) Amman ", |
| [151](#L151) | "Europe/Moscow"                  => "(GMT+3:00) Moscow ", |
| [152](#L152) | "Asia/Baghdad"                   => "(GMT+3:00) Baghdad ", |
| [153](#L153) | "Asia/Kuwait"                    => "(GMT+3:00) Kuwait ", |
| [154](#L154) | "Asia/Riyadh"                    => "(GMT+3:00) Riyadh ", |
| [155](#L155) | "Asia/Bahrain"                   => "(GMT+3:00) Bahrain ", |
| [156](#L156) | "Asia/Qatar"                     => "(GMT+3:00) Qatar ", |
| [157](#L157) | "Asia/Aden"                      => "(GMT+3:00) Aden ", |
| [158](#L158) | "Africa/Khartoum"                => "(GMT+3:00) Khartoum ", |
| [159](#L159) | "Africa/Djibouti"                => "(GMT+3:00) Djibouti ", |
| [160](#L160) | "Africa/Mogadishu"               => "(GMT+3:00) Mogadishu ", |
| [161](#L161) | "Europe/Kiev"                    => "(GMT+3:00) Kiev ", |
| [162](#L162) | "Asia/Dubai"                     => "(GMT+4:00) Dubai ", |
| [163](#L163) | "Asia/Muscat"                    => "(GMT+4:00) Muscat ", |
| [164](#L164) | "Asia/Tehran"                    => "(GMT+4:30) Tehran ", |
| [165](#L165) | "Asia/Kabul"                     => "(GMT+4:30) Kabul ", |
| [166](#L166) | "Asia/Baku"                      => "(GMT+5:00) Baku, Tbilisi, Yerevan ", |
| [167](#L167) | "Asia/Yekaterinburg"             => "(GMT+5:00) Yekaterinburg ", |
| [168](#L168) | "Asia/Tashkent"                  => "(GMT+5:00) Islamabad, Karachi, Tashkent ", |
| [169](#L169) | "Asia/Calcutta"                  => "(GMT+5:30) India ", |
| [170](#L170) | "Asia/Kolkata"                   => "(GMT+5:30) Mumbai, Kolkata, New Delhi ", |
| [171](#L171) | "Asia/Kathmandu"                 => "(GMT+5:45) Kathmandu ", |
| [172](#L172) | "Asia/Novosibirsk"               => "(GMT+6:00) Novosibirsk ", |
| [173](#L173) | "Asia/Almaty"                    => "(GMT+6:00) Almaty ", |
| [174](#L174) | "Asia/Dacca"                     => "(GMT+6:00) Dacca ", |
| [175](#L175) | "Asia/Dhaka"                     => "(GMT+6:00) Astana, Dhaka ", |
| [176](#L176) | "Asia/Krasnoyarsk"               => "(GMT+7:00) Krasnoyarsk ", |
| [177](#L177) | "Asia/Bangkok"                   => "(GMT+7:00) Bangkok ", |
| [178](#L178) | "Asia/Saigon"                    => "(GMT+7:00) Vietnam ", |
| [179](#L179) | "Asia/Jakarta"                   => "(GMT+7:00) Jakarta ", |
| [180](#L180) | "Asia/Irkutsk"                   => "(GMT+8:00) Irkutsk, Ulaanbaatar ", |
| [181](#L181) | "Asia/Shanghai"                  => "(GMT+8:00) Beijing, Shanghai ", |
| [182](#L182) | "Asia/Hong\_Kong"                 => "(GMT+8:00) Hong Kong ", |
| [183](#L183) | "Asia/Taipei"                    => "(GMT+8:00) Taipei ", |
| [184](#L184) | "Asia/Kuala\_Lumpur"              => "(GMT+8:00) Kuala Lumpur ", |
| [185](#L185) | "Asia/Singapore"                 => "(GMT+8:00) Singapore ", |
| [186](#L186) | "Australia/Perth"                => "(GMT+8:00) Perth ", |
| [187](#L187) | "Asia/Yakutsk"                   => "(GMT+9:00) Yakutsk ", |
| [188](#L188) | "Asia/Seoul"                     => "(GMT+9:00) Seoul ", |
| [189](#L189) | "Asia/Tokyo"                     => "(GMT+9:00) Osaka, Sapporo, Tokyo ", |
| [190](#L190) | "Australia/Darwin"               => "(GMT+9:30) Darwin ", |
| [191](#L191) | "Australia/Adelaide"             => "(GMT+9:30) Adelaide ", |
| [192](#L192) | "Asia/Vladivostok"               => "(GMT+10:00) Vladivostok ", |
| [193](#L193) | "Pacific/Port\_Moresby"           => "(GMT+10:00) Guam, Port Moresby ", |
| [194](#L194) | "Australia/Brisbane"             => "(GMT+10:00) Brisbane ", |
| [195](#L195) | "Australia/Sydney"               => "(GMT+10:00) Canberra, Melbourne, Sydney ", |
| [196](#L196) | "Australia/Hobart"               => "(GMT+10:00) Hobart ", |
| [197](#L197) | "Asia/Magadan"                   => "(GMT+10:00) Magadan ", |
| [198](#L198) | "SST"                            => "(GMT+11:00) Solomon Islands ", |
| [199](#L199) | "Pacific/Noumea"                 => "(GMT+11:00) New Caledonia ", |
| [200](#L200) | "Asia/Kamchatka"                 => "(GMT+12:00) Kamchatka ", |
| [201](#L201) | "Pacific/Fiji"                   => "(GMT+12:00) Fiji Islands, Marshall Islands ", |
| [202](#L202) | "Pacific/Auckland"               => "(GMT+12:00) Auckland, Wellington", |
| [203](#L203) | ); |
| [204](#L204) |  |
| [205](#L205) | return apply\_filters( 'vczapi\_timezone\_list', $zones\_array ); |
| [206](#L206) | } |
| [207](#L207) | } |
| [208](#L208) |  |
| [209](#L209) | /\*\* |
| [210](#L210) | \* Set New Cache Data |
| [211](#L211) | \* |
| [212](#L212) | \* @param $key |
| [213](#L213) | \* @param $value |
| [214](#L214) | \* @param $time\_in\_seconds |
| [215](#L215) | \*/ |
| [216](#L216) | function vczapi\_set\_cache( $key, $value, $time\_in\_seconds ) { |
| [217](#L217) | update\_option( $key, $value ); |
| [218](#L218) | update\_option( $key . '\_expiry\_time', time() + $time\_in\_seconds ); |
| [219](#L219) | } |
| [220](#L220) |  |
| [221](#L221) | /\*\* |
| [222](#L222) | \* Get Set Cache Data |
| [223](#L223) | \* |
| [224](#L224) | \* @param $key |
| [225](#L225) | \* |
| [226](#L226) | \* @return bool|mixed|void |
| [227](#L227) | \*/ |
| [228](#L228) | function vczapi\_get\_cache( $key ) { |
| [229](#L229) | $expiry = get\_option( $key . '\_expiry\_time' ); |
| [230](#L230) | if ( ! empty( $expiry ) && $expiry > time() ) { |
| [231](#L231) | return get\_option( $key ); |
| [232](#L232) | } else { |
| [233](#L233) | update\_option( $key, '' ); |
| [234](#L234) | update\_option( $key . '\_expiry\_time', '' ); |
| [235](#L235) |  |
| [236](#L236) | return false; |
| [237](#L237) | } |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Get Users using transients |
| [242](#L242) | \* |
| [243](#L243) | \* @since  2.1.0 |
| [244](#L244) | \* @author Deepen |
| [245](#L245) | \*/ |
| [246](#L246) | function video\_conferencing\_zoom\_api\_get\_user\_transients() { |
| [247](#L247) | if ( isset( $\_GET['page'] ) && $\_GET['page'] === "zoom-video-conferencing-list-users" && isset( $\_GET['pg'] ) ) { |
| [248](#L248) | $page          = $\_GET['pg']; |
| [249](#L249) | $decoded\_users = json\_decode( zoom\_conference()->listUsers( $page ) ); |
| [250](#L250) | if ( ! empty( $decoded\_users->code ) ) { |
| [251](#L251) | $users = false; |
| [252](#L252) | } else { |
| [253](#L253) | $users = $decoded\_users->users; |
| [254](#L254) | } |
| [255](#L255) | } else { |
| [256](#L256) | $check\_existing = vczapi\_get\_cache( '\_zvc\_user\_lists' ); |
| [257](#L257) | if ( ! empty( $check\_existing ) ) { |
| [258](#L258) | $users = $check\_existing; |
| [259](#L259) | } else { |
| [260](#L260) | $decoded\_users = json\_decode( zoom\_conference()->listUsers() ); |
| [261](#L261) | if ( ! empty( $decoded\_users->code ) ) { |
| [262](#L262) | if ( is\_admin() ) { |
| [263](#L263) | add\_action( 'admin\_notices', 'vczapi\_check\_connection\_error' ); |
| [264](#L264) | } |
| [265](#L265) | $users = false; |
| [266](#L266) | } else { |
| [267](#L267) | $users = ! empty( $decoded\_users->users ) ? $decoded\_users->users : false; |
| [268](#L268) | vczapi\_set\_cache( '\_zvc\_user\_lists', $users, 108000 ); |
| [269](#L269) | } |
| [270](#L270) | } |
| [271](#L271) | } |
| [272](#L272) |  |
| [273](#L273) | return apply\_filters( 'vczapi\_users\_list', $users ); |
| [274](#L274) | } |
| [275](#L275) |  |
| [276](#L276) | function vczapi\_check\_connection\_error() { |
| [277](#L277) | ?> |
| [278](#L278) | <div id="message" class="notice notice-warning is-dismissible"> |
| [279](#L279) | <p> |
| [280](#L280) | <?php |
| [281](#L281) | esc\_html\_e( 'Please check your internet connection or API keys. Zoom API is not able to connect with Zoom servers at the moment.', 'video-conferencing-with-zoom-api' ); |
| [282](#L282) | ?> |
| [283](#L283) | </p> |
| [284](#L284) | </div> |
| [285](#L285) | <?php |
| [286](#L286) | } |
| [287](#L287) |  |
| [288](#L288) | /\*\* |
| [289](#L289) | \* Flushing the cache |
| [290](#L290) | \*/ |
| [291](#L291) | function video\_conferencing\_zoom\_api\_delete\_user\_cache() { |
| [292](#L292) | update\_option( '\_zvc\_user\_lists', '' ); |
| [293](#L293) | update\_option( '\_zvc\_user\_lists\_expiry\_time', '' ); |
| [294](#L294) | } |
| [295](#L295) |  |
| [296](#L296) | /\*\* |
| [297](#L297) | \* Pagination next for Zoom API |
| [298](#L298) | \* |
| [299](#L299) | \* @param        $type |
| [300](#L300) | \* @param string $page\_type |
| [301](#L301) | \* |
| [302](#L302) | \* @return string |
| [303](#L303) | \*/ |
| [304](#L304) | function video\_conferencing\_zoom\_api\_pagination\_next( $type, $page\_type = 'zoom-video-conferencing-list-users' ) { |
| [305](#L305) | if ( ! empty( $type ) && count( $type ) >= 300 ) { |
| [306](#L306) | if ( isset( $\_GET['pg'] ) ) { |
| [307](#L307) | $page = absint( $\_GET['pg'] ) + 1; |
| [308](#L308) |  |
| [309](#L309) | return '<strong>Show more records:</strong> <a href="?post\_type=zoom-meetings&page=zoom-video-conferencing-list-users&flush=true&pg=' . $page . '">Next Page</a>'; |
| [310](#L310) | } else { |
| [311](#L311) | return '<strong>Show more records:</strong> <a href="?post\_type=zoom-meetings&page=' . $page\_type . '&flush=true&pg=2">Next Page</a>'; |
| [312](#L312) | } |
| [313](#L313) | } |
| [314](#L314) |  |
| [315](#L315) | return false; |
| [316](#L316) | } |
| [317](#L317) |  |
| [318](#L318) | /\*\* |
| [319](#L319) | \* Pagination for prev |
| [320](#L320) | \* |
| [321](#L321) | \* @param        $type |
| [322](#L322) | \* @param string $page\_type |
| [323](#L323) | \* |
| [324](#L324) | \* @return string |
| [325](#L325) | \*/ |
| [326](#L326) | function video\_conferencing\_zoom\_api\_pagination\_prev( $type, $page\_type = 'zoom-video-conferencing-list-users' ) { |
| [327](#L327) | if ( isset( $\_GET['pg'] ) && $\_GET['pg'] != 1 ) { |
| [328](#L328) | $page = absint( $\_GET['pg'] ) - 1; |
| [329](#L329) |  |
| [330](#L330) | return '<a href="?post\_type=zoom-meetings&page=' . $page\_type . '&flush=true&pg=' . $page . '">Previous Page</a>'; |
| [331](#L331) | } |
| [332](#L332) | } |
| [333](#L333) |  |
| [334](#L334) | /\*\* |
| [335](#L335) | \* @author Deepen |
| [336](#L336) | \* @since  3.0.0 |
| [337](#L337) | \*/ |
| [338](#L338) | function video\_conferencing\_zoom\_api\_show\_like\_popup() { |
| [339](#L339) | if ( isset( $\_GET['vczapi\_dismiss'] ) && $\_GET['vczapi\_dismiss'] == 1 ) { |
| [340](#L340) | update\_option( '\_vczapi\_dismiss\_notice', 1 ); |
| [341](#L341) | } |
| [342](#L342) |  |
| [343](#L343) | if ( ! get\_option( '\_vczapi\_dismiss\_notice' ) ) { |
| [344](#L344) | ?> |
| [345](#L345) | <div id="message" class="notice notice-warning is-dismissible"> |
| [346](#L346) | <h3><?php esc\_html\_e( 'Like this plugin ?', 'video-conferencing-with-zoom-api' ); ?></h3> |
| [347](#L347) | <p> |
| [348](#L348) | <?php |
| [349](#L349) | printf( esc\_html\_\_( 'Please consider giving a %s if you found this useful at wordpress.org or ', 'video-conferencing-with-zoom-api' ), '<a href="https://wordpress.org/support/plugin/video-conferencing-with-zoom-api/reviews/#new-post">5 star thumbs up</a>' ); |
| [350](#L350) | printf( esc\_html\_\_( 'check %s for shortcode references.', 'video-conferencing-with-zoom-api' ), '<a href="' . admin\_url( 'edit.php?post\_type=zoom-meetings&page=zoom-video-conferencing-settings' ) . '">settings</a>.' ); |
| [351](#L351) | ?> |
| [352](#L352) | <a href="<?php echo esc\_url( add\_query\_arg( 'vczapi\_dismiss', 1 ) ); ?>" class="is-dismissible">I |
| [353](#L353) | already rated you ! Don't show again !</a> |
| [354](#L354) | </p> |
| [355](#L355) | </div> |
| [356](#L356) | <?php |
| [357](#L357) | } |
| [358](#L358) | } |
| [359](#L359) |  |
| [360](#L360) | /\*\* |
| [361](#L361) | \* @author Deepen |
| [362](#L362) | \* @since  3.0.0 |
| [363](#L363) | \*/ |
| [364](#L364) | function video\_conferencing\_zoom\_api\_show\_api\_notice() { |
| [365](#L365) | $notice = get\_option( 'zoom\_api\_notice' ); |
| [366](#L366) | if ( empty( $notice ) ) { |
| [367](#L367) | ?> |
| [368](#L368) | <div id="message" class="notice notice-success"><p style="font-size:16px;"> |
| [369](#L369) | <strong><?php \_e( "Do not get confused here !!", "video-conferencing-with-zoom-api" ); ?></strong> |
| [370](#L370) | <p> |
| [371](#L371) | <strong><?php \_e( "Please read !!! These below meetings are directly from your zoom.us account via API connection. Meetings added from here won't show up on your Post Type list. This will only create meeting in your zoom.us account !", "video-conferencing-with-zoom-api" ); ?></strong> |
| [372](#L372) | <a href="javascript:void(0);" |
| [373](#L373) | class="zvc-dismiss-message"><?php \_e( "I understand ! Don't show this again !", "video-conferencing-with-zoom-api" ); ?></a> |
| [374](#L374) | </p></div> |
| [375](#L375) | <?php |
| [376](#L376) | } |
| [377](#L377) | } |
| [378](#L378) |  |
| [379](#L379) | /\*\* |
| [380](#L380) | \* Get the template |
| [381](#L381) | \* |
| [382](#L382) | \* @param       $template\_name |
| [383](#L383) | \* @param bool $load |
| [384](#L384) | \* @param bool $require\_once |
| [385](#L385) | \* @param array $args |
| [386](#L386) | \* |
| [387](#L387) | \* @return bool|string |
| [388](#L388) | \*/ |
| [389](#L389) | function vczapi\_get\_template( $template\_name, $load = false, $require\_once = true, $args = [] ) { |
| [390](#L390) | if ( empty( $template\_name ) ) { |
| [391](#L391) | return false; |
| [392](#L392) | } |
| [393](#L393) |  |
| [394](#L394) | $located = false; |
| [395](#L395) | if ( file\_exists( STYLESHEETPATH . '/' . ZVC\_PLUGIN\_SLUG . '/' . $template\_name ) ) { |
| [396](#L396) | $located = STYLESHEETPATH . '/' . ZVC\_PLUGIN\_SLUG . '/' . $template\_name; |
| [397](#L397) | } elseif ( file\_exists( TEMPLATEPATH . '/' . ZVC\_PLUGIN\_SLUG . '/' . $template\_name ) ) { |
| [398](#L398) | $located = TEMPLATEPATH . '/' . ZVC\_PLUGIN\_SLUG . '/' . $template\_name; |
| [399](#L399) | } elseif ( file\_exists( ZVC\_PLUGIN\_DIR\_PATH . 'templates/' . $template\_name ) ) { |
| [400](#L400) | $located = ZVC\_PLUGIN\_DIR\_PATH . 'templates/' . $template\_name; |
| [401](#L401) | } |
| [402](#L402) |  |
| [403](#L403) | // Allow 3rd party plugin filter template file from their plugin. |
| [404](#L404) | $located = apply\_filters( 'vczapi\_get\_template', $located, $template\_name ); |
| [405](#L405) | if ( $load && ! empty( $located ) && file\_exists( $located ) ) { |
| [406](#L406) | load\_template( $located, $require\_once, $args ); |
| [407](#L407) | } |
| [408](#L408) |  |
| [409](#L409) | return $located; |
| [410](#L410) | } |
| [411](#L411) |  |
| [412](#L412) | /\*\* |
| [413](#L413) | \* Get Template Parts |
| [414](#L414) | \* |
| [415](#L415) | \* @param        $slug |
| [416](#L416) | \* @param string $name |
| [417](#L417) | \* |
| [418](#L418) | \* @since  3.0.0 |
| [419](#L419) | \* @author Deepen |
| [420](#L420) | \*/ |
| [421](#L421) | function vczapi\_get\_template\_part( $slug, $name = '' ) { |
| [422](#L422) | $template = false; |
| [423](#L423) | if ( $name ) { |
| [424](#L424) | $template = locate\_template( array( |
| [425](#L425) | "{$slug}-{$name}.php", |
| [426](#L426) | ZVC\_PLUGIN\_SLUG . '/' . "{$slug}-{$name}.php", |
| [427](#L427) | ) ); |
| [428](#L428) |  |
| [429](#L429) | if ( ! $template ) { |
| [430](#L430) | $fallback = ZVC\_PLUGIN\_DIR\_PATH . "templates/{$slug}-{$name}.php"; |
| [431](#L431) | $template = file\_exists( $fallback ) ? $fallback : ''; |
| [432](#L432) | } |
| [433](#L433) | } |
| [434](#L434) |  |
| [435](#L435) | if ( ! $template ) { |
| [436](#L436) | $template = locate\_template( array( |
| [437](#L437) | "{$slug}-{$name}.php", |
| [438](#L438) | ZVC\_PLUGIN\_SLUG . '/' . "{$slug}-{$name}.php", |
| [439](#L439) | ) ); |
| [440](#L440) | } |
| [441](#L441) |  |
| [442](#L442) | // Allow 3rd party plugins to filter template file from their plugin. |
| [443](#L443) | $template = apply\_filters( 'vcz\_get\_template\_part', $template, $slug, $name ); |
| [444](#L444) |  |
| [445](#L445) | if ( $template ) { |
| [446](#L446) | load\_template( $template, false ); |
| [447](#L447) | } |
| [448](#L448) | } |
| [449](#L449) |  |
| [450](#L450) | /\*\* |
| [451](#L451) | \* Check if given post ID is related to the post of current user. |
| [452](#L452) | \* |
| [453](#L453) | \* @param $post\_id |
| [454](#L454) | \* |
| [455](#L455) | \* @return bool |
| [456](#L456) | \* @since  3.0.0 |
| [457](#L457) | \* |
| [458](#L458) | \* @author Deepen |
| [459](#L459) | \*/ |
| [460](#L460) | function vczapi\_check\_author( $post\_id ) { |
| [461](#L461) | $post\_author\_id = get\_post\_field( 'post\_author', $post\_id ); |
| [462](#L462) | $current\_user   = get\_current\_user\_id(); |
| [463](#L463) | if ( (int) $post\_author\_id === $current\_user ) { |
| [464](#L464) | return true; |
| [465](#L465) | } else { |
| [466](#L466) | return false; |
| [467](#L467) | } |
| [468](#L468) | } |
| [469](#L469) |  |
| [470](#L470) | /\*\* |
| [471](#L471) | \* Calculate Time based on Timezone |
| [472](#L472) | \* |
| [473](#L473) | \* @param        $start\_time |
| [474](#L474) | \* @param        $tz |
| [475](#L475) | \* @param string $format |
| [476](#L476) | \* @param bool $defaults |
| [477](#L477) | \* |
| [478](#L478) | \* @return DateTime|string |
| [479](#L479) | \* @author  Deepen |
| [480](#L480) | \* @since   1.0.0 |
| [481](#L481) | \* @updated 3.6.7 |
| [482](#L482) | \*/ |
| [483](#L483) | function vczapi\_dateConverter( $start\_time, $tz, $format = 'F j, Y, g:i a ( T )', $defaults = true ) { |
| [484](#L484) | try { |
| [485](#L485) | $timezone = ! empty( $tz ) ? $tz : "America/Los\_Angeles"; |
| [486](#L486) | $tz       = new DateTimeZone( $timezone ); |
| [487](#L487) | $date     = new DateTime( $start\_time ); |
| [488](#L488) | $date->setTimezone( $tz ); |
| [489](#L489) |  |
| [490](#L490) | if ( ! $format ) { |
| [491](#L491) | return $date; |
| [492](#L492) | } |
| [493](#L493) |  |
| [494](#L494) | if ( ! $defaults ) { |
| [495](#L495) | return $date->format( $format ); |
| [496](#L496) | } |
| [497](#L497) |  |
| [498](#L498) | $locale                = get\_locale(); |
| [499](#L499) | $date\_format           = get\_option( 'zoom\_api\_date\_time\_format' ); |
| [500](#L500) | $twentyfourhour\_format = get\_option( 'zoom\_api\_twenty\_fourhour\_format' ); |
| [501](#L501) | $full\_month\_format     = get\_option( 'zoom\_api\_full\_month\_format' ); |
| [502](#L502) | if ( $defaults && ! empty( $locale ) && ! empty( $date\_format ) ) { |
| [503](#L503) | setlocale( LC\_TIME, $locale ); |
| [504](#L504) | $start\_timestamp      = $date->getTimestamp() + $date->getOffset(); |
| [505](#L505) | $time\_indicator       = ! empty( $twentyfourhour\_format ) ? 'H:i' : 'h:i A'; |
| [506](#L506) | $full\_month\_indicator = ! empty( $full\_month\_format ) ? 'F' : 'M'; |
| [507](#L507) | switch ( $date\_format ) { |
| [508](#L508) | case 'L LT': |
| [509](#L509) | return date\_i18n( 'm/d/Y ' . $time\_indicator, $start\_timestamp ); |
| [510](#L510) | case 'l LT': |
| [511](#L511) | return date\_i18n( 'n/j/Y ' . $time\_indicator, $start\_timestamp ); |
| [512](#L512) | break; |
| [513](#L513) | case 'llll': |
| [514](#L514) | return date\_i18n( 'D, ' . $full\_month\_indicator . ' j, Y ' . $time\_indicator, $start\_timestamp ); |
| [515](#L515) | break; |
| [516](#L516) | case 'lll': |
| [517](#L517) | return date\_i18n( $full\_month\_indicator . ' j, Y ' . $time\_indicator, $start\_timestamp ); |
| [518](#L518) | break; |
| [519](#L519) | case 'LLLL': |
| [520](#L520) | return date\_i18n( 'l, ' . $full\_month\_indicator . ' j, Y ' . $time\_indicator, $start\_timestamp ); |
| [521](#L521) | break; |
| [522](#L522) | case 'custom': |
| [523](#L523) | $date\_format = get\_option( 'zoom\_api\_custom\_date\_time\_format' ); |
| [524](#L524) |  |
| [525](#L525) | return date\_i18n( $date\_format, $start\_timestamp ); |
| [526](#L526) | default: |
| [527](#L527) | return $date->format( $format ); |
| [528](#L528) | break; |
| [529](#L529) | } |
| [530](#L530) | } else { |
| [531](#L531) | return $date->format( $format ); |
| [532](#L532) | } |
| [533](#L533) | } catch ( Exception $e ) { |
| [534](#L534) | return $e->getMessage(); |
| [535](#L535) | } |
| [536](#L536) | } |
| [537](#L537) |  |
| [538](#L538) | /\*\* |
| [539](#L539) | \* Encrypts URL |
| [540](#L540) | \* |
| [541](#L541) | \* @param $action |
| [542](#L542) | \* @param $string |
| [543](#L543) | \* |
| [544](#L544) | \* @return bool|string |
| [545](#L545) | \*/ |
| [546](#L546) | function vczapi\_encrypt\_decrypt( $action, $string ) { |
| [547](#L547) | $output = false; |
| [548](#L548) |  |
| [549](#L549) | $encrypt\_method = "AES-256-CBC"; |
| [550](#L550) | $secret\_key     = 'DPEN\_X3!3#23121'; |
| [551](#L551) | $secret\_iv      = '1231232133213221'; |
| [552](#L552) |  |
| [553](#L553) | // hash |
| [554](#L554) | $key = hash( 'sha256', $secret\_key ); |
| [555](#L555) |  |
| [556](#L556) | // iv - encrypt method AES-256-CBC expects 16 bytes - else you will get a warning |
| [557](#L557) | $iv = substr( hash( 'sha256', $secret\_iv ), 0, 16 ); |
| [558](#L558) |  |
| [559](#L559) | if ( $action == 'encrypt' ) { |
| [560](#L560) | $output = openssl\_encrypt( $string, $encrypt\_method, $key, 0, $iv ); |
| [561](#L561) | $output = base64\_encode( $output ); |
| [562](#L562) | } elseif ( $action == 'decrypt' ) { |
| [563](#L563) | $output = openssl\_decrypt( base64\_decode( $string ), $encrypt\_method, $key, 0, $iv ); |
| [564](#L564) | } |
| [565](#L565) |  |
| [566](#L566) | return $output; |
| [567](#L567) | } |
| [568](#L568) |  |
| [569](#L569) | if ( ! function\_exists( 'vczapi\_get\_browser\_agent\_type' ) ) { |
| [570](#L570) | function vczapi\_get\_browser\_agent\_type() { |
| [571](#L571) | //Detect special conditions devices |
| [572](#L572) | $iPod    = stripos( $\_SERVER['HTTP\_USER\_AGENT'], "iPod" ); |
| [573](#L573) | $iPhone  = stripos( $\_SERVER['HTTP\_USER\_AGENT'], "iPhone" ); |
| [574](#L574) | $iPad    = stripos( $\_SERVER['HTTP\_USER\_AGENT'], "iPad" ); |
| [575](#L575) | $Android = stripos( $\_SERVER['HTTP\_USER\_AGENT'], "Android" ); |
| [576](#L576) |  |
| [577](#L577) | //do something with this information |
| [578](#L578) | if ( $iPod || $iPhone || $iPad ) { |
| [579](#L579) | $app\_store\_link = 'https://apps.apple.com/app/zoom-cloud-meetings/id546505307'; |
| [580](#L580) | } elseif ( $Android ) { |
| [581](#L581) | $app\_store\_link = 'https://play.google.com/store/apps/details?id=us.zoom.videomeetings'; |
| [582](#L582) | } else { |
| [583](#L583) | $app\_store\_link = 'https://zoom.us/support/download'; |
| [584](#L584) | } |
| [585](#L585) |  |
| [586](#L586) | return $app\_store\_link; |
| [587](#L587) | } |
| [588](#L588) | } |
| [589](#L589) |  |
| [590](#L590) | /\*\* |
| [591](#L591) | \* Get Browser join links |
| [592](#L592) | \* |
| [593](#L593) | \* @param      $post\_id |
| [594](#L594) | \* @param      $meeting\_id |
| [595](#L595) | \* @param bool $password |
| [596](#L596) | \* @param      $seperator |
| [597](#L597) | \* @param |
| [598](#L598) | \* |
| [599](#L599) | \* @return string |
| [600](#L600) | \*/ |
| [601](#L601) | function vczapi\_get\_browser\_join\_links( $post\_id, $meeting\_id, $password = false, $seperator = false, $redirect = false ) { |
| [602](#L602) | if ( ! vczapi\_is\_sdk\_enabled() ) { |
| [603](#L603) | return; |
| [604](#L604) | } |
| [605](#L605) |  |
| [606](#L606) | $link                     = get\_permalink( $post\_id ); |
| [607](#L607) | $encrypt\_pwd              = vczapi\_encrypt\_decrypt( 'encrypt', $password ); |
| [608](#L608) | $encrypt\_meeting\_id       = vczapi\_encrypt\_decrypt( 'encrypt', $meeting\_id ); |
| [609](#L609) | $embed\_password\_join\_link = get\_option( 'zoom\_api\_embed\_pwd\_join\_link' ); |
| [610](#L610) | $seperator                = ! empty( $seperator ) ? '<span class="vczapi-seperator">' . $seperator . '</span>' : false; |
| [611](#L611) | if ( ! vczapi\_check\_disable\_joinViaBrowser() ) { |
| [612](#L612) | if ( ! empty( $password ) && empty( $embed\_password\_join\_link ) ) { |
| [613](#L613) | $query = add\_query\_arg( array( |
| [614](#L614) | 'pak'      => $encrypt\_pwd, |
| [615](#L615) | 'join'     => $encrypt\_meeting\_id, |
| [616](#L616) | 'type'     => 'meeting', |
| [617](#L617) | 'redirect' => esc\_url( $redirect ) |
| [618](#L618) | ), $link ); |
| [619](#L619) |  |
| [620](#L620) | return $seperator . '<a target="\_blank" rel="nofollow" href="' . esc\_url( $query ) . '" class="btn btn-join-link btn-join-via-browser">' . apply\_filters( 'vczapi\_join\_meeting\_via\_browser\_text', \_\_( 'Join via Web Browser', 'video-conferencing-with-zoom-api' ) ) . '</a>'; |
| [621](#L621) | } else { |
| [622](#L622) | $query = add\_query\_arg( array( |
| [623](#L623) | 'join'     => $encrypt\_meeting\_id, |
| [624](#L624) | 'type'     => 'meeting', |
| [625](#L625) | 'redirect' => esc\_url( $redirect ) |
| [626](#L626) | ), $link ); |
| [627](#L627) |  |
| [628](#L628) | return $seperator . '<a target="\_blank" rel="nofollow" href="' . esc\_url( $query ) . '" class="btn btn-join-link btn-join-via-browser">' . apply\_filters( 'vczapi\_join\_meeting\_via\_browser\_text', \_\_( 'Join via Web Browser', 'video-conferencing-with-zoom-api' ) ) . '</a>'; |
| [629](#L629) | } |
| [630](#L630) | } |
| [631](#L631) | } |
| [632](#L632) |  |
| [633](#L633) | /\*\* |
| [634](#L634) | \* Join via Shortcode |
| [635](#L635) | \* |
| [636](#L636) | \* @param      $meeting\_id |
| [637](#L637) | \* @param bool $password |
| [638](#L638) | \* @param      $link\_only |
| [639](#L639) | \* @param      $seperator |
| [640](#L640) | \* @param      $redirect |
| [641](#L641) | \* |
| [642](#L642) | \* @return string |
| [643](#L643) | \*/ |
| [644](#L644) | function vczapi\_get\_browser\_join\_shortcode( $meeting\_id, $password = false, $link\_only = false, $seperator = false, $redirect = false ) { |
| [645](#L645) | if ( ! vczapi\_is\_sdk\_enabled() ) { |
| [646](#L646) | return; |
| [647](#L647) | } |
| [648](#L648) |  |
| [649](#L649) | $link                     = get\_post\_type\_archive\_link( 'zoom-meetings' ); |
| [650](#L650) | $encrypt\_meeting\_id       = vczapi\_encrypt\_decrypt( 'encrypt', $meeting\_id ); |
| [651](#L651) | $embed\_password\_join\_link = get\_option( 'zoom\_api\_embed\_pwd\_join\_link' ); |
| [652](#L652) | $seperator                = ! empty( $seperator ) ? '<span class="vczapi-seperator">' . $seperator . '</span>' : false; |
| [653](#L653) | if ( ! vczapi\_check\_disable\_joinViaBrowser() ) { |
| [654](#L654) | if ( ! empty( $password ) && empty( $embed\_password\_join\_link ) ) { |
| [655](#L655) | $encrypt\_pwd = vczapi\_encrypt\_decrypt( 'encrypt', $password ); |
| [656](#L656) | $query       = add\_query\_arg( array( |
| [657](#L657) | 'pak'      => $encrypt\_pwd, |
| [658](#L658) | 'join'     => $encrypt\_meeting\_id, |
| [659](#L659) | 'type'     => 'meeting', |
| [660](#L660) | 'redirect' => esc\_url( $redirect ) |
| [661](#L661) | ), $link ); |
| [662](#L662) | $result      = $seperator . '<a target="\_blank" rel="nofollow" href="' . esc\_url( $query ) . '" class="btn btn-join-link btn-join-via-browser">' . apply\_filters( 'vczapi\_join\_meeting\_via\_browser\_text', \_\_( 'Join via Web Browser', 'video-conferencing-with-zoom-api' ) ) . '</a>'; |
| [663](#L663) | $link        = esc\_url( $query ); |
| [664](#L664) | } else { |
| [665](#L665) | $query  = add\_query\_arg( array( |
| [666](#L666) | 'join'     => $encrypt\_meeting\_id, |
| [667](#L667) | 'type'     => 'meeting', |
| [668](#L668) | 'redirect' => esc\_url( $redirect ) |
| [669](#L669) | ), $link ); |
| [670](#L670) | $result = $seperator . '<a target="\_blank" rel="nofollow" href="' . esc\_url( $query ) . '" class="btn btn-join-link btn-join-via-browser">' . apply\_filters( 'vczapi\_join\_meeting\_via\_browser\_text', \_\_( 'Join via Web Browser', 'video-conferencing-with-zoom-api' ) ) . '</a>'; |
| [671](#L671) | $link   = esc\_url( $query ); |
| [672](#L672) | } |
| [673](#L673) |  |
| [674](#L674) | if ( $link\_only ) { |
| [675](#L675) | return $link; |
| [676](#L676) | } else { |
| [677](#L677) | return $result; |
| [678](#L678) | } |
| [679](#L679) | } else { |
| [680](#L680) | return false; |
| [681](#L681) | } |
| [682](#L682) | } |
| [683](#L683) |  |
| [684](#L684) | /\*\* |
| [685](#L685) | \* Get Join link with Password Embedded |
| [686](#L686) | \* |
| [687](#L687) | \* @param $join\_url |
| [688](#L688) | \* @param $encrpyted\_pwd |
| [689](#L689) | \* |
| [690](#L690) | \* @return string |
| [691](#L691) | \*/ |
| [692](#L692) | function vczapi\_get\_pwd\_embedded\_join\_link( $join\_url, $encrpyted\_pwd ) { |
| [693](#L693) | if ( ! empty( $encrpyted\_pwd ) ) { |
| [694](#L694) | $explode\_pwd              = array\_map( 'trim', explode( '?pwd', $join\_url ) ); |
| [695](#L695) | $embed\_password\_join\_link = get\_option( 'zoom\_api\_embed\_pwd\_join\_link' ); |
| [696](#L696) | $password\_exists          = count( $explode\_pwd ) > 1 ? true : false; |
| [697](#L697) | if ( $password\_exists ) { |
| [698](#L698) | if ( ! empty( $embed\_password\_join\_link ) ) { |
| [699](#L699) | $join\_url = $explode\_pwd[0]; |
| [700](#L700) | } |
| [701](#L701) | } else { |
| [702](#L702) | $join\_url = esc\_url( add\_query\_arg( array( 'pwd' => $encrpyted\_pwd ), $join\_url ) ); |
| [703](#L703) | } |
| [704](#L704) | } |
| [705](#L705) |  |
| [706](#L706) | return $join\_url; |
| [707](#L707) | } |
| [708](#L708) |  |
| [709](#L709) | /\*\* |
| [710](#L710) | \* |
| [711](#L711) | \* Filesize Converter |
| [712](#L712) | \* |
| [713](#L713) | \* @param $bytes |
| [714](#L714) | \* |
| [715](#L715) | \* @return string |
| [716](#L716) | \* @since  3.5.0 |
| [717](#L717) | \* @author Deepen |
| [718](#L718) | \*/ |
| [719](#L719) | function vczapi\_filesize\_converter( $bytes ) { |
| [720](#L720) | if ( $bytes >= 1073741824 ) { |
| [721](#L721) | $bytes = number\_format( $bytes / 1073741824, 2 ) . ' GB'; |
| [722](#L722) | } elseif ( $bytes >= 1048576 ) { |
| [723](#L723) | $bytes = number\_format( $bytes / 1048576, 2 ) . ' MB'; |
| [724](#L724) | } elseif ( $bytes >= 1024 ) { |
| [725](#L725) | $bytes = number\_format( $bytes / 1024, 2 ) . ' kB'; |
| [726](#L726) | } elseif ( $bytes > 1 ) { |
| [727](#L727) | $bytes = $bytes . ' bytes'; |
| [728](#L728) | } elseif ( $bytes == 1 ) { |
| [729](#L729) | $bytes = $bytes . ' byte'; |
| [730](#L730) | } else { |
| [731](#L731) | $bytes = '0 bytes'; |
| [732](#L732) | } |
| [733](#L733) |  |
| [734](#L734) | return $bytes; |
| [735](#L735) | } |
| [736](#L736) |  |
| [737](#L737) | /\*\* |
| [738](#L738) | \* Zoom API Paginator Script Helper |
| [739](#L739) | \* |
| [740](#L740) | \* @param        $response |
| [741](#L741) | \* @param string $type |
| [742](#L742) | \* |
| [743](#L743) | \* @since  3.5.0 |
| [744](#L744) | \* @author Deepen |
| [745](#L745) | \*/ |
| [746](#L746) | function vczapi\_zoom\_api\_paginator( $response, $type = '' ) { |
| [747](#L747) | $actual\_link = ( isset( $\_SERVER['HTTPS'] ) && $\_SERVER['HTTPS'] === 'on' ? "https" : "http" ) . "://$\_SERVER[HTTP\_HOST]$\_SERVER[REQUEST\_URI]"; |
| [748](#L748) | if ( ! empty( $response ) && $response->next\_page\_token ) { |
| [749](#L749) | $next\_page = add\_query\_arg( array( 'pg' => $response->next\_page\_token, 'type' => $type ), $actual\_link ); |
| [750](#L750) | ?> |
| [751](#L751) | <a href="<?php echo esc\_url( $next\_page ); ?>"><?php \_e( 'Next Results', 'video-conferencing-with-zoom-api' ); ?></a> |
| [752](#L752) | <?php |
| [753](#L753) | } |
| [754](#L754) | } |
| [755](#L755) |  |
| [756](#L756) | /\*\* |
| [757](#L757) | \* Check if PRO version is active |
| [758](#L758) | \* |
| [759](#L759) | \* @author Deepen |
| [760](#L760) | \* @since  3.6.0 |
| [761](#L761) | \*/ |
| [762](#L762) | function vczapi\_pro\_version\_active() { |
| [763](#L763) | $active\_plugins = (array) get\_option( 'active\_plugins', array() ); |
| [764](#L764) |  |
| [765](#L765) | return in\_array( 'vczapi-pro/vczapi-pro.php', $active\_plugins ) || array\_key\_exists( 'vczapi-pro/vczapi-pro.php', $active\_plugins ); |
| [766](#L766) | } |
| [767](#L767) |  |
| [768](#L768) | /\*\* |
| [769](#L769) | \* Check if a meeting is Recurring or a Recurring Webinar |
| [770](#L770) | \* |
| [771](#L771) | \* @param $type |
| [772](#L772) | \* |
| [773](#L773) | \* @return bool |
| [774](#L774) | \* @since  3.6.0 |
| [775](#L775) | \* |
| [776](#L776) | \* @author Deepen |
| [777](#L777) | \*/ |
| [778](#L778) | function vczapi\_pro\_check\_type( $type ) { |
| [779](#L779) | if ( ! empty( $type ) && ( $type === 8 || $type === 3 || $type === 6 || $type === 9 ) ) { |
| [780](#L780) | return true; |
| [781](#L781) | } |
| [782](#L782) |  |
| [783](#L783) | return false; |
| [784](#L784) | } |
| [785](#L785) |  |
| [786](#L786) | /\*\* |
| [787](#L787) | \* Get Author details for the meeting |
| [788](#L788) | \* |
| [789](#L789) | \* @param      $post\_id |
| [790](#L790) | \* @param bool $meeting\_details |
| [791](#L791) | \* @param bool $wp\_author |
| [792](#L792) | \* |
| [793](#L793) | \* @return bool|string |
| [794](#L794) | \*/ |
| [795](#L795) | function vczapi\_get\_meeting\_author( $post\_id, $meeting\_details = false, $wp\_author = false ) { |
| [796](#L796) | $users = video\_conferencing\_zoom\_api\_get\_user\_transients(); |
| [797](#L797) |  |
| [798](#L798) | if ( empty( $post\_id ) ) { |
| [799](#L799) | return $wp\_author; |
| [800](#L800) | } |
| [801](#L801) |  |
| [802](#L802) | if ( empty( $users ) ) { |
| [803](#L803) | return $wp\_author; |
| [804](#L804) | } |
| [805](#L805) |  |
| [806](#L806) | if ( empty( $meeting\_details ) ) { |
| [807](#L807) | $meeting\_details = get\_post\_meta( $post\_id, '\_meeting\_zoom\_details', true ); |
| [808](#L808) | } |
| [809](#L809) |  |
| [810](#L810) | if ( ! is\_object( $meeting\_details ) ) { |
| [811](#L811) | return $wp\_author; |
| [812](#L812) | } |
| [813](#L813) |  |
| [814](#L814) | $meeting\_author = $wp\_author; |
| [815](#L815) | foreach ( $users as $user ) { |
| [816](#L816) | if ( $user->id == $meeting\_details->host\_id ) { |
| [817](#L817) | $name           = $user->first\_name . ' ' . $user->last\_name; |
| [818](#L818) | $meeting\_author = ! empty( $name ) ? $name : $wp\_author; |
| [819](#L819) | break; |
| [820](#L820) | } |
| [821](#L821) | } |
| [822](#L822) |  |
| [823](#L823) | return $meeting\_author; |
| [824](#L824) | } |
| [825](#L825) |  |
| [826](#L826) | /\*\* |
| [827](#L827) | \* Get WP roles |
| [828](#L828) | \* |
| [829](#L829) | \* @param array $defaults |
| [830](#L830) | \* |
| [831](#L831) | \* @return WP\_User\_Query |
| [832](#L832) | \*/ |
| [833](#L833) | function vczapi\_getWpUsers\_basedon\_UserRoles( $defaults = [] ) { |
| [834](#L834) | $roles\_in = apply\_filters( 'zvc\_allow\_zoom\_host\_id\_user\_role', array( |
| [835](#L835) | 'subscriber', |
| [836](#L836) | 'administrator', |
| [837](#L837) | 'contributor', |
| [838](#L838) | 'author', |
| [839](#L839) | 'meeting\_author', |
| [840](#L840) | 'shop\_manager', |
| [841](#L841) | ) ); |
| [842](#L842) |  |
| [843](#L843) | $args = array( |
| [844](#L844) | 'number'   => - 1, |
| [845](#L845) | 'role\_\_in' => $roles\_in, |
| [846](#L846) | ); |
| [847](#L847) |  |
| [848](#L848) | $query = wp\_parse\_args( $defaults, $args ); |
| [849](#L849) |  |
| [850](#L850) | return new WP\_User\_Query( $query ); |
| [851](#L851) | } |
| [852](#L852) |  |
| [853](#L853) | /\*\* |
| [854](#L854) | \* Say Global Join via Browser is disabled or Enabled. |
| [855](#L855) | \* |
| [856](#L856) | \* @return bool |
| [857](#L857) | \*/ |
| [858](#L858) | function vczapi\_check\_disable\_joinViaBrowser() { |
| [859](#L859) | $disable\_jvb = get\_option( 'zoom\_api\_disable\_jvb' ); |
| [860](#L860) | if ( ! empty( $disable\_jvb ) ) { |
| [861](#L861) | return true; |
| [862](#L862) | } |
| [863](#L863) |  |
| [864](#L864) | return false; |
| [865](#L865) | } |
| [866](#L866) |  |
| [867](#L867) | /\*\* |
| [868](#L868) | \* @param $format datetime format string https://www.php.net/manual/en/datetime.format.php |
| [869](#L869) | \* |
| [870](#L870) | \* @return string |
| [871](#L871) | \*/ |
| [872](#L872) | function vczapi\_convertPHPToMomentFormat( $format ) { |
| [873](#L873) | $replacements = [ |
| [874](#L874) | 'd' => 'DD', |
| [875](#L875) | 'D' => 'ddd', |
| [876](#L876) | 'j' => 'D', |
| [877](#L877) | 'l' => 'dddd', |
| [878](#L878) | 'N' => 'E', |
| [879](#L879) | 'S' => 'o', |
| [880](#L880) | 'w' => 'e', |
| [881](#L881) | 'z' => 'DDD', |
| [882](#L882) | 'W' => 'W', |
| [883](#L883) | 'F' => 'MMMM', |
| [884](#L884) | 'm' => 'MM', |
| [885](#L885) | 'M' => 'MMM', |
| [886](#L886) | 'n' => 'M', |
| [887](#L887) | 't' => '', // no equivalent |
| [888](#L888) | 'L' => '', // no equivalent |
| [889](#L889) | 'o' => 'YYYY', |
| [890](#L890) | 'Y' => 'YYYY', |
| [891](#L891) | 'y' => 'YY', |
| [892](#L892) | 'a' => 'a', |
| [893](#L893) | 'A' => 'A', |
| [894](#L894) | 'B' => '', // no equivalent |
| [895](#L895) | 'g' => 'h', |
| [896](#L896) | 'G' => 'H', |
| [897](#L897) | 'h' => 'hh', |
| [898](#L898) | 'H' => 'HH', |
| [899](#L899) | 'i' => 'mm', |
| [900](#L900) | 's' => 'ss', |
| [901](#L901) | 'u' => 'SSS', |
| [902](#L902) | 'e' => 'zz', // deprecated since version 1.6.0 of moment.js |
| [903](#L903) | 'I' => '', // no equivalent |
| [904](#L904) | 'O' => '', // no equivalent |
| [905](#L905) | 'P' => '', // no equivalent |
| [906](#L906) | 'T' => '', // no equivalent |
| [907](#L907) | 'Z' => '', // no equivalent |
| [908](#L908) | 'c' => '', // no equivalent |
| [909](#L909) | 'r' => '', // no equivalent |
| [910](#L910) | 'U' => 'X', |
| [911](#L911) | ]; |
| [912](#L912) | $momentFormat = strtr( $format, $replacements ); |
| [913](#L913) |  |
| [914](#L914) | return $momentFormat; |
| [915](#L915) | } |
| [916](#L916) |  |
| [917](#L917) | /\*\* |
| [918](#L918) | \* Get Final Minutes after converting to hours |
| [919](#L919) | \* |
| [920](#L920) | \* @param $hour |
| [921](#L921) | \* @param $minute |
| [922](#L922) | \* |
| [923](#L923) | \* @return float|int |
| [924](#L924) | \*/ |
| [925](#L925) | function vczapi\_convert\_to\_minutes( $hour, $minute ) { |
| [926](#L926) | $hour   = $hour \* 60; |
| [927](#L927) | $result = $hour + $minute; |
| [928](#L928) |  |
| [929](#L929) | return $result; |
| [930](#L930) | } |
| [931](#L931) |  |
| [932](#L932) | /\*\* |
| [933](#L933) | \* Convert minutes to hour and minute format |
| [934](#L934) | \* |
| [935](#L935) | \* @param        $minutes |
| [936](#L936) | \* @param string $format |
| [937](#L937) | \* |
| [938](#L938) | \* @return array|bool|string |
| [939](#L939) | \*/ |
| [940](#L940) | function vczapi\_convertMinutesToHM( $minutes, $format = '%02d:%02d' ) { |
| [941](#L941) | if ( $minutes < 1 ) { |
| [942](#L942) | return false; |
| [943](#L943) | } |
| [944](#L944) |  |
| [945](#L945) | $hours   = floor( $minutes / 60 ); |
| [946](#L946) | $minutes = ( $minutes % 60 ); |
| [947](#L947) |  |
| [948](#L948) | if ( $format ) { |
| [949](#L949) | return sprintf( $format, $hours, $minutes ); |
| [950](#L950) | } |
| [951](#L951) |  |
| [952](#L952) | return array( 'hr' => $hours, 'min' => $minutes ); |
| [953](#L953) | } |
| [954](#L954) |  |
| [955](#L955) | /\*\* |
| [956](#L956) | \* @return bool |
| [957](#L957) | \*/ |
| [958](#L958) | function vczapi\_is\_zoom\_activated(): bool { |
| [959](#L959) | if ( vczapi\_is\_oauth\_active() ) { |
| [960](#L960) | return true; |
| [961](#L961) | } else { |
| [962](#L962) | return get\_option( 'zoom\_api\_key' ) && get\_option( 'zoom\_api\_secret' ) && video\_conferencing\_zoom\_api\_get\_user\_transients(); |
| [963](#L963) | } |
| [964](#L964) | } |
| [965](#L965) |  |
| [966](#L966) | /\*\* |
| [967](#L967) | \* @return bool |
| [968](#L968) | \*/ |
| [969](#L969) | function vczapi\_is\_jwt\_active(): bool { |
| [970](#L970) | $zoom\_api\_key    = get\_option( 'zoom\_api\_key' ); |
| [971](#L971) | $zoom\_api\_secret = get\_option( 'zoom\_api\_secret' ); |
| [972](#L972) |  |
| [973](#L973) | return ! empty( $zoom\_api\_key ) && ! empty( $zoom\_api\_secret ); |
| [974](#L974) | } |
| [975](#L975) |  |
| [976](#L976) | /\*\* |
| [977](#L977) | \* @return bool |
| [978](#L978) | \*/ |
| [979](#L979) | function vczapi\_is\_oauth\_active(): bool { |
| [980](#L980) | return ! empty( get\_option( 'vczapi\_oauth\_account\_id' ) ) && ! empty( get\_option( 'vczapi\_oauth\_client\_id' ) && ! empty( get\_option( 'vczapi\_oauth\_client\_secret' ) ) ); |
| [981](#L981) | } |
| [982](#L982) |  |
| [983](#L983) | /\*\* |
| [984](#L984) | \* @return bool |
| [985](#L985) | \*/ |
| [986](#L986) | function vczapi\_is\_sdk\_enabled(): bool { |
| [987](#L987) | return ! empty( get\_option( 'vczapi\_sdk\_key' ) ) && ! empty( get\_option( 'vczapi\_sdk\_secret\_key' ) ); |
| [988](#L988) | } |
| [989](#L989) |  |
| [990](#L990) | if ( ! function\_exists( 'vczapi\_is\_fse\_theme' ) ) { |
| [991](#L991) | function vczapi\_is\_fse\_theme(): bool { |
| [992](#L992) | if ( function\_exists( 'wp\_is\_block\_theme' ) ) { |
| [993](#L993) | return wp\_is\_block\_theme(); |
| [994](#L994) | } |
| [995](#L995) | if ( function\_exists( 'gutenberg\_is\_fse\_theme' ) ) { |
| [996](#L996) | return (bool) gutenberg\_is\_fse\_theme(); |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | return false; |
| [1000](#L1000) | } |
| [1001](#L1001) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/video-conferencing-with-zoom-api/tags/4.2.1/includes/helpers.php?format=txt)
* [Original Format](/export/3222468/video-conferencing-with-zoom-api/tags/4.2.1/includes/helpers.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_cc9cf226_20250114_203748.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fvideo-conferencing-with-zoom-api%2Ftrunk%2Fincludes%2FHelpers%2FEncryption.php%3Frev%3D2942302)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← Previous Revision
* [Latest Revision](/browser/video-conferencing-with-zoom-api/trunk/includes/Helpers/Encryption.php)
* Next Revision →
* [Blame](/browser/video-conferencing-with-zoom-api/trunk/includes/Helpers/Encryption.php?annotate=blame&rev=2942302 "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/video-conferencing-with-zoom-api/trunk/includes/Helpers/Encryption.php?rev=2942302)

---

# [source:](/browser?rev=2942302&order=name "Go to repository root") [video-conferencing-with-zoom-api](/browser/video-conferencing-with-zoom-api?rev=2942302&order=name "View video-conferencing-with-zoom-api")/[trunk](/browser/video-conferencing-with-zoom-api/trunk?rev=2942302&order=name "View trunk")/[includes](/browser/video-conferencing-with-zoom-api/trunk/includes?rev=2942302&order=name "View includes")/[Helpers](/browser/video-conferencing-with-zoom-api/trunk/includes/Helpers?rev=2942302&order=name "View Helpers")/[Encryption.php](/browser/video-conferencing-with-zoom-api/trunk/includes/Helpers/Encryption.php?rev=2942302&order=name "View Encryption.php") @ [2942302](/changeset/2942302/ "View changeset 2942302")

View diff against:

View revision:

| [Last change](/changeset/2942302/video-conferencing-with-zoom-api/trunk/includes/Helpers/Encryption.php "View differences") on this file since 2942302 was [2942302](/changeset/2942302/ "View changeset 2942302"), checked in by j\_\_3rk, [18 months ago](/timeline?from=2023-07-24T06%3A29%3A08Z&precision=second "See timeline at 07/24/2023 06:29:08 AM") |
| --- |
| 430-next |
| **File size:** 2.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | namespace Codemanas\VczApi\Helpers; |
| [4](#L4) |  |
| [5](#L5) | /\*\* |
| [6](#L6) | \* Handles encryption functions |
| [7](#L7) | \* |
| [8](#L8) | \* @since 4.2.2 |
| [9](#L9) | \* @author Deepen Bajracharya |
| [10](#L10) | \*/ |
| [11](#L11) | class Encryption { |
| [12](#L12) |  |
| [13](#L13) | private static string $encryption\_method = 'AES-256-CBC'; |
| [14](#L14) |  |
| [15](#L15) | private static string $iv = 'vlUmigHXwc1ryadBi2WYUI7JbsgARgjUtgddJymlrgnIa088jf1BxFNQUIr2ZGd5RIMGmGo3yPSnFXtrp0Jwbw'; |
| [16](#L16) |  |
| [17](#L17) | private static string $site\_key; |
| [18](#L18) |  |
| [19](#L19) | protected function \_\_construct() { |
| [20](#L20) | self::$site\_key = $this->generateRandomKey(); |
| [21](#L21) | } |
| [22](#L22) |  |
| [23](#L23) | /\*\* |
| [24](#L24) | \* Generate random key and store first |
| [25](#L25) | \* |
| [26](#L26) | \* |
| [27](#L27) | \* @return string |
| [28](#L28) | \*/ |
| [29](#L29) | private function generateRandomKey(): string { |
| [30](#L30) | $secret = get\_option( '\_vczapi\_secret' ); |
| [31](#L31) | if ( empty( $secret ) ) { |
| [32](#L32) | $stringSpace  = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'; |
| [33](#L33) | $stringLength = strlen( $stringSpace ); |
| [34](#L34) | for ( $i = 0; $i < 50; $i ++ ) { |
| [35](#L35) | $secret = $secret . $stringSpace[ rand( 0, $stringLength - 1 ) ]; |
| [36](#L36) | } |
| [37](#L37) |  |
| [38](#L38) | update\_option( '\_vczapi\_secret', $secret ); |
| [39](#L39) | } |
| [40](#L40) |  |
| [41](#L41) | return $secret; |
| [42](#L42) | } |
| [43](#L43) |  |
| [44](#L44) | /\*\* |
| [45](#L45) | \* Encrypts the provided string |
| [46](#L46) | \* |
| [47](#L47) | \* @param $string |
| [48](#L48) | \* @param $conversion\_key |
| [49](#L49) | \* |
| [50](#L50) | \* @return string |
| [51](#L51) | \*/ |
| [52](#L52) | public static function encrypt( $string, $conversion\_key = null ): string { |
| [53](#L53) | $key = ! empty( $conversion\_key ) ? $conversion\_key : self::$site\_key; |
| [54](#L54) |  |
| [55](#L55) | // hash |
| [56](#L56) | $key = hash( 'sha256', $key ); |
| [57](#L57) |  |
| [58](#L58) | // iv - encrypt method AES-256-CBC expects 16 bytes - else you will get a warning |
| [59](#L59) | $iv = substr( hash( 'sha256', self::$iv ), 0, 16 ); |
| [60](#L60) |  |
| [61](#L61) | $output = openssl\_encrypt( $string, self::$encryption\_method, $key, 0, $iv ); |
| [62](#L62) |  |
| [63](#L63) | return base64\_encode( $output ); |
| [64](#L64) | } |
| [65](#L65) |  |
| [66](#L66) | /\*\* |
| [67](#L67) | \* Decrypts the provided string |
| [68](#L68) | \* |
| [69](#L69) | \* @param $string |
| [70](#L70) | \* @param $conversion\_key |
| [71](#L71) | \* |
| [72](#L72) | \* @return false|string |
| [73](#L73) | \*/ |
| [74](#L74) | public static function decrypt( $string, $conversion\_key = null ) { |
| [75](#L75) | $key = ! empty( $conversion\_key ) ? $conversion\_key : self::$site\_key; |
| [76](#L76) |  |
| [77](#L77) | // hash |
| [78](#L78) | $key = hash( 'sha256', $key ); |
| [79](#L79) |  |
| [80](#L80) | // iv - encrypt method AES-256-CBC expects 16 bytes - else you will get a warning |
| [81](#L81) | $iv = substr( hash( 'sha256', self::$iv ), 0, 16 ); |
| [82](#L82) |  |
| [83](#L83) | return openssl\_decrypt( base64\_decode( $string ), self::$encryption\_method, $key, 0, $iv ); |
| [84](#L84) | } |
| [85](#L85) |  |
| [86](#L86) | public static $instance = null; |
| [87](#L87) |  |
| [88](#L88) | public static function get\_instance() { |
| [89](#L89) | if ( is\_null( self::$instance ) ) { |
| [90](#L90) | self::$instance = new self(); |
| [91](#L91) | } |
| [92](#L92) |  |
| [93](#L93) | return self::$instance; |
| [94](#L94) | } |
| [95](#L95) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/video-conferencing-with-zoom-api/trunk/includes/Helpers/Encryption.php?rev=2942302&format=txt)
* [Original Format](/export/2942302/video-conferencing-with-zoom-api/trunk/includes/Helpers/Encryption.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


