=== Content from github.com_0d4dac4e_20250114_232936.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhelm%2Fhelm%2Fcommit%2F5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhelm%2Fhelm%2Fcommit%2F5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=helm%2Fhelm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[helm](/helm)
/
**[helm](/helm/helm)**
Public

* [Notifications](/login?return_to=%2Fhelm%2Fhelm) You must be signed in to change notification settings
* [Fork
  7.2k](/login?return_to=%2Fhelm%2Fhelm)
* [Star
   27.3k](/login?return_to=%2Fhelm%2Fhelm)

* [Code](/helm/helm)
* [Issues
  376](/helm/helm/issues)
* [Pull requests
  403](/helm/helm/pulls)
* [Actions](/helm/helm/actions)
* [Projects
  0](/helm/helm/projects)
* [Wiki](/helm/helm/wiki)
* [Security](/helm/helm/security)
* [Insights](/helm/helm/pulse)

Additional navigation options

* [Code](/helm/helm)
* [Issues](/helm/helm/issues)
* [Pull requests](/helm/helm/pulls)
* [Actions](/helm/helm/actions)
* [Projects](/helm/helm/projects)
* [Wiki](/helm/helm/wiki)
* [Security](/helm/helm/security)
* [Insights](/helm/helm/pulse)

## Commit

[Permalink](/helm/helm/commit/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-pwcw-6f5g-gxf8](https://github.com/advisories/GHSA-pwcw-6f5g-gxf8 "GHSA-pwcw-6f5g-gxf8")

[Browse files](/helm/helm/tree/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2)
Browse the repository at this point in the history

```
Update to func handling
```

* Loading branch information

[![@mattfarina](https://avatars.githubusercontent.com/u/62991?s=40&v=4)](/mattfarina)

[mattfarina](/helm/helm/commits?author=mattfarina "View all commits by mattfarina")
authored
Feb 8, 2023

2 parents
[5bf273d](/helm/helm/commit/5bf273d81ba7da1816a55983fae6a6cf4ca29af2)
+
[863bc74](/helm/helm/commit/863bc74e5ad090b97f69dcb643be8d969b07e7cf)

commit 5abcf74

 Show file tree

 Hide file tree

Showing
**7 changed files**
with
**78 additions**
and
**10 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* cmd/helm

  + cmd/helm/install.go
    [install.go](#diff-66af4f4b6bcdff45c3ed4174dd63a4dac6ac5d18634e2fdbc6710f994f8e1cbb)
  + cmd/helm/upgrade.go
    [upgrade.go](#diff-8f7c1d7e2cfeb70c465f36198e54a053fb517420d8647ffaf72a15e5525eb596)
* pkg

  + action

    - pkg/action/action.go
      [action.go](#diff-a15c00615f24e3d585c1e7dee030d66e0e1d1666a34ce1ff038a84dbe2f5dba5)
    - pkg/action/install.go
      [install.go](#diff-5d4849bad97d2e075ce5d0ae5af3e93dbfde235ce1345fa96148279cf706af2f)
    - pkg/action/upgrade.go
      [upgrade.go](#diff-4a0aea3959569dfbc7af305435031b78827ed0878e9174e019b85916cd153861)
  + engine

    - pkg/engine/engine.go
      [engine.go](#diff-9a4b0f64963e54937214c78c91c3d404eaef74b571e89f370ed7de3c9ff86ca1)
    - pkg/engine/engine\_test.go
      [engine\_test.go](#diff-b16f55bb6289c9df88deaedc99a45db09154ba13ee3a186b7c5636d67f5b345d)

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[cmd/helm/install.go](#diff-66af4f4b6bcdff45c3ed4174dd63a4dac6ac5d18634e2fdbc6710f994f8e1cbb "cmd/helm/install.go")

Show comments

[View file](/helm/helm/blob/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2/cmd/helm/install.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -170,6 +170,7 @@ func addInstallFlags(cmd \*cobra.Command, f \*pflag.FlagSet, client \*action.Instal |
|  |  | f.BoolVar(&client.Atomic, "atomic", false, "if set, the installation process deletes the installation on failure. The --wait flag will be set automatically if --atomic is used") |
|  |  | f.BoolVar(&client.SkipCRDs, "skip-crds", false, "if set, no CRDs will be installed. By default, CRDs are installed if not already present") |
|  |  | f.BoolVar(&client.SubNotes, "render-subchart-notes", false, "if set, render subchart notes along with the parent") |
|  |  | f.BoolVar(&client.EnableDNS, "enable-dns", false, "enable DNS lookups when rendering templates") |
|  |  | addValueOptionsFlags(f, valueOpts) |
|  |  | addChartPathOptionsFlags(f, &client.ChartPathOptions) |
|  |  |  |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[cmd/helm/upgrade.go](#diff-8f7c1d7e2cfeb70c465f36198e54a053fb517420d8647ffaf72a15e5525eb596 "cmd/helm/upgrade.go")

Show comments

[View file](/helm/helm/blob/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2/cmd/helm/upgrade.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -119,6 +119,7 @@ func newUpgradeCmd(cfg \*action.Configuration, out io.Writer) \*cobra.Command { |
|  |  | instClient.SubNotes = client.SubNotes |
|  |  | instClient.Description = client.Description |
|  |  | instClient.DependencyUpdate = client.DependencyUpdate |
|  |  | instClient.EnableDNS = client.EnableDNS |
|  |  |  |
|  |  | rel, err := runInstall(args, instClient, valueOpts, out) |
|  |  | if err != nil { |
| Expand Down  Expand Up | | @@ -232,6 +233,7 @@ func newUpgradeCmd(cfg \*action.Configuration, out io.Writer) \*cobra.Command { |
|  |  | f.BoolVar(&client.SubNotes, "render-subchart-notes", false, "if set, render subchart notes along with the parent") |
|  |  | f.StringVar(&client.Description, "description", "", "add a custom description") |
|  |  | f.BoolVar(&client.DependencyUpdate, "dependency-update", false, "update dependencies if they are missing before installing the chart") |
|  |  | f.BoolVar(&client.EnableDNS, "enable-dns", false, "enable DNS lookups when rendering templates") |
|  |  | addChartPathOptionsFlags(f, &client.ChartPathOptions) |
|  |  | addValueOptionsFlags(f, valueOpts) |
|  |  | bindOutputFlag(cmd, &outfmt) |
| Expand Down | |  |

13 changes: 9 additions & 4 deletions

13
[pkg/action/action.go](#diff-a15c00615f24e3d585c1e7dee030d66e0e1d1666a34ce1ff038a84dbe2f5dba5 "pkg/action/action.go")

Show comments

[View file](/helm/helm/blob/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2/pkg/action/action.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -101,8 +101,9 @@ type Configuration struct { |
|  |  | // |
|  |  | // TODO: This function is badly in need of a refactor. |
|  |  | // TODO: As part of the refactor the duplicate code in cmd/helm/template.go should be removed |
|  |  | // This code has to do with writing files to disk. |
|  |  | func (cfg \*Configuration) renderResources(ch \*chart.Chart, values chartutil.Values, releaseName, outputDir string, subNotes, useReleaseName, includeCrds bool, pr postrender.PostRenderer, dryRun bool) ([]\*release.Hook, \*bytes.Buffer, string, error) { |
|  |  | // |
|  |  | // This code has to do with writing files to disk. |
|  |  | func (cfg \*Configuration) renderResources(ch \*chart.Chart, values chartutil.Values, releaseName, outputDir string, subNotes, useReleaseName, includeCrds bool, pr postrender.PostRenderer, dryRun, enableDNS bool) ([]\*release.Hook, \*bytes.Buffer, string, error) { |
|  |  | hs := []\*release.Hook{} |
|  |  | b := bytes.NewBuffer(nil) |
|  |  |  |
| Expand Down  Expand Up | | @@ -130,9 +131,13 @@ func (cfg \*Configuration) renderResources(ch \*chart.Chart, values chartutil.Valu |
|  |  | if err != nil { |
|  |  | return hs, b, "", err |
|  |  | } |
|  |  | files, err2 = engine.RenderWithClient(ch, values, restConfig) |
|  |  | e := engine.New(restConfig) |
|  |  | e.EnableDNS = enableDNS |
|  |  | files, err2 = e.Render(ch, values) |
|  |  | } else { |
|  |  | files, err2 = engine.Render(ch, values) |
|  |  | var e engine.Engine |
|  |  | e.EnableDNS = enableDNS |
|  |  | files, err2 = e.Render(ch, values) |
|  |  | } |
|  |  |  |
|  |  | if err2 != nil { |
| Expand Down | |  |

12 changes: 7 additions & 5 deletions

12
[pkg/action/install.go](#diff-5d4849bad97d2e075ce5d0ae5af3e93dbfde235ce1345fa96148279cf706af2f "pkg/action/install.go")

Show comments

[View file](/helm/helm/blob/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2/pkg/action/install.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -97,6 +97,8 @@ type Install struct { |
|  |  | APIVersions chartutil.VersionSet |
|  |  | // Used by helm template to render charts with .Release.IsUpgrade. Ignored if Dry-Run is false |
|  |  | IsUpgrade bool |
|  |  | // Enable DNS lookups when rendering templates |
|  |  | EnableDNS bool |
|  |  | // Used by helm template to add the release as part of OutputDir path |
|  |  | // OutputDir/<ReleaseName> |
|  |  | UseReleaseName bool |
| Expand Down  Expand Up | | @@ -257,7 +259,7 @@ func (i \*Install) RunWithContext(ctx context.Context, chrt \*chart.Chart, vals ma |
|  |  | rel := i.createRelease(chrt, vals) |
|  |  |  |
|  |  | var manifestDoc \*bytes.Buffer |
|  |  | rel.Hooks, manifestDoc, rel.Info.Notes, err = i.cfg.renderResources(chrt, valuesToRender, i.ReleaseName, i.OutputDir, i.SubNotes, i.UseReleaseName, i.IncludeCRDs, i.PostRenderer, i.DryRun) |
|  |  | rel.Hooks, manifestDoc, rel.Info.Notes, err = i.cfg.renderResources(chrt, valuesToRender, i.ReleaseName, i.OutputDir, i.SubNotes, i.UseReleaseName, i.IncludeCRDs, i.PostRenderer, i.DryRun, i.EnableDNS) |
|  |  | // Even for errors, attach this if available |
|  |  | if manifestDoc != nil { |
|  |  | rel.Manifest = manifestDoc.String() |
| Expand Down  Expand Up | | @@ -457,10 +459,10 @@ func (i \*Install) failRelease(rel \*release.Release, err error) (\*release.Release |
|  |  | // |
|  |  | // Roughly, this will return an error if name is |
|  |  | // |
|  |  | // - empty |
|  |  | // - too long |
|  |  | // - already in use, and not deleted |
|  |  | // - used by a deleted release, and i.Replace is false |
|  |  | // - empty |
|  |  | // - too long |
|  |  | // - already in use, and not deleted |
|  |  | // - used by a deleted release, and i.Replace is false |
|  |  | func (i \*Install) availableName() error { |
|  |  | start := i.ReleaseName |
|  |  |  |
| Expand Down | |  |

4 changes: 3 additions & 1 deletion

4
[pkg/action/upgrade.go](#diff-4a0aea3959569dfbc7af305435031b78827ed0878e9174e019b85916cd153861 "pkg/action/upgrade.go")

Show comments

[View file](/helm/helm/blob/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2/pkg/action/upgrade.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -103,6 +103,8 @@ type Upgrade struct { |
|  |  | DependencyUpdate bool |
|  |  | // Lock to control raceconditions when the process receives a SIGTERM |
|  |  | Lock sync.Mutex |
|  |  | // Enable DNS lookups when rendering templates |
|  |  | EnableDNS bool |
|  |  | } |
|  |  |  |
|  |  | type resultMessage struct { |
| Expand Down  Expand Up | | @@ -231,7 +233,7 @@ func (u \*Upgrade) prepareUpgrade(name string, chart \*chart.Chart, vals map[strin |
|  |  | return nil, nil, err |
|  |  | } |
|  |  |  |
|  |  | hooks, manifestDoc, notesTxt, err := u.cfg.renderResources(chart, valuesToRender, "", "", u.SubNotes, false, false, u.PostRenderer, u.DryRun) |
|  |  | hooks, manifestDoc, notesTxt, err := u.cfg.renderResources(chart, valuesToRender, "", "", u.SubNotes, false, false, u.PostRenderer, u.DryRun, u.EnableDNS) |
|  |  | if err != nil { |
|  |  | return nil, nil, err |
|  |  | } |
| Expand Down | |  |

17 changes: 17 additions & 0 deletions

17
[pkg/engine/engine.go](#diff-9a4b0f64963e54937214c78c91c3d404eaef74b571e89f370ed7de3c9ff86ca1 "pkg/engine/engine.go")

Show comments

[View file](/helm/helm/blob/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2/pkg/engine/engine.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -42,6 +42,15 @@ type Engine struct { |
|  |  | LintMode bool |
|  |  | // the rest config to connect to the kubernetes api |
|  |  | config \*rest.Config |
|  |  | // EnableDNS tells the engine to allow DNS lookups when rendering templates |
|  |  | EnableDNS bool |
|  |  | } |
|  |  |  |
|  |  | // New creates a new instance of Engine using the passed in rest config. |
|  |  | func New(config \*rest.Config) Engine { |
|  |  | return Engine{ |
|  |  | config: config, |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // Render takes a chart, optional values, and value overrides, and attempts to render the Go templates. |
| Expand Down  Expand Up | | @@ -189,6 +198,14 @@ func (e Engine) initFunMap(t \*template.Template, referenceTpls map[string]render |
|  |  | funcMap["lookup"] = NewLookupFunction(e.config) |
|  |  | } |
|  |  |  |
|  |  | // When DNS lookups are not enabled override the sprig function and return |
|  |  | // an empty string. |
|  |  | if !e.EnableDNS { |
|  |  | funcMap["getHostByName"] = func(name string) string { |
|  |  | return "" |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | t.Funcs(funcMap) |
|  |  | } |
|  |  |  |
| Expand Down | |  |

39 changes: 39 additions & 0 deletions

39
[pkg/engine/engine\_test.go](#diff-b16f55bb6289c9df88deaedc99a45db09154ba13ee3a186b7c5636d67f5b345d "pkg/engine/engine_test.go")

Show comments

[View file](/helm/helm/blob/5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2/pkg/engine/engine_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -18,6 +18,7 @@ package engine |
|  |  |  |
|  |  | import ( |
|  |  | "fmt" |
|  |  | "path" |
|  |  | "strings" |
|  |  | "sync" |
|  |  | "testing" |
| Expand Down  Expand Up | | @@ -89,6 +90,7 @@ func TestRender(t \*testing.T) { |
|  |  | {Name: "templates/test2", Data: []byte("{{.Values.global.callme | lower }}")}, |
|  |  | {Name: "templates/test3", Data: []byte("{{.noValue}}")}, |
|  |  | {Name: "templates/test4", Data: []byte("{{toJson .Values}}")}, |
|  |  | {Name: "templates/test5", Data: []byte("{{getHostByName \"helm.sh\"}}")}, |
|  |  | }, |
|  |  | Values: map[string]interface{}{"outer": "DEFAULT", "inner": "DEFAULT"}, |
|  |  | } |
| Expand Down  Expand Up | | @@ -117,6 +119,7 @@ func TestRender(t \*testing.T) { |
|  |  | "moby/templates/test2": "ishmael", |
|  |  | "moby/templates/test3": "", |
|  |  | "moby/templates/test4": `{"global":{"callme":"Ishmael"},"inner":"inn","outer":"spouter"}`, |
|  |  | "moby/templates/test5": "", |
|  |  | } |
|  |  |  |
|  |  | for name, data := range expect { |
| Expand Down  Expand Up | | @@ -200,6 +203,42 @@ func TestRenderInternals(t \*testing.T) { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | func TestRenderWIthDNS(t \*testing.T) { |
|  |  | c := &chart.Chart{ |
|  |  | Metadata: &chart.Metadata{ |
|  |  | Name: "moby", |
|  |  | Version: "1.2.3", |
|  |  | }, |
|  |  | Templates: []\*chart.File{ |
|  |  | {Name: "templates/test1", Data: []byte("{{getHostByName \"helm.sh\"}}")}, |
|  |  | }, |
|  |  | Values: map[string]interface{}{}, |
|  |  | } |
|  |  |  |
|  |  | vals := map[string]interface{}{ |
|  |  | "Values": map[string]interface{}{}, |
|  |  | } |
|  |  |  |
|  |  | v, err := chartutil.CoalesceValues(c, vals) |
|  |  | if err != nil { |
|  |  | t.Fatalf("Failed to coalesce values: %s", err) |
|  |  | } |
|  |  |  |
|  |  | var e Engine |
|  |  | e.EnableDNS = true |
|  |  | out, err := e.Render(c, v) |
|  |  | if err != nil { |
|  |  | t.Errorf("Failed to render templates: %s", err) |
|  |  | } |
|  |  |  |
|  |  | for \_, val := range c.Templates { |
|  |  | fp := path.Join("moby", val.Name) |
|  |  | if out[fp] == "" { |
|  |  | t.Errorf("Expected IP address, got %q", out[fp]) |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | func TestParallelRenderInternals(t \*testing.T) { |
|  |  | // Make sure that we can use one Engine to run parallel template renders. |
|  |  | e := new(Engine) |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `5abcf74`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhelm%2Fhelm%2Fcommit%2F5abcf74227bfe8e5a3dbf105fe62e7b12deb58d2) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_5f1b9926_20250114_232938.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhelm%2Fhelm%2Fsecurity%2Fadvisories%2FGHSA-pwcw-6f5g-gxf8)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhelm%2Fhelm%2Fsecurity%2Fadvisories%2FGHSA-pwcw-6f5g-gxf8)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=helm%2Fhelm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[helm](/helm)
/
**[helm](/helm/helm)**
Public

* [Notifications](/login?return_to=%2Fhelm%2Fhelm) You must be signed in to change notification settings
* [Fork
  7.2k](/login?return_to=%2Fhelm%2Fhelm)
* [Star
   27.3k](/login?return_to=%2Fhelm%2Fhelm)

* [Code](/helm/helm)
* [Issues
  376](/helm/helm/issues)
* [Pull requests
  403](/helm/helm/pulls)
* [Actions](/helm/helm/actions)
* [Projects
  0](/helm/helm/projects)
* [Wiki](/helm/helm/wiki)
* [Security](/helm/helm/security)
* [Insights](/helm/helm/pulse)

Additional navigation options

* [Code](/helm/helm)
* [Issues](/helm/helm/issues)
* [Pull requests](/helm/helm/pulls)
* [Actions](/helm/helm/actions)
* [Projects](/helm/helm/projects)
* [Wiki](/helm/helm/wiki)
* [Security](/helm/helm/security)
* [Insights](/helm/helm/pulse)

# getHostByName Function Information Disclosure

Low

[mattfarina](/mattfarina)
published
GHSA-pwcw-6f5g-gxf8
Feb 8, 2023

## Package

gomod

helm.sh/helm/v3
([Go](/advisories?query=ecosystem%3Ago))

## Affected versions

v3.0.0 - v3.11.0

## Patched versions

v3.11.1

## Description

A Helm contributor discovered an information disclosure vulnerability using the `getHostByName` template function.

### Impact

`getHostByName` is a Helm template function introduced in Helm v3. The function is able to accept a hostname and return an IP address for that hostname. To get the IP address the function performs a DNS lookup. The DNS lookup happens when used with `helm install|upgrade|template` or when the Helm SDK is used to render a chart.

Information passed into the chart can be disclosed to the DNS servers used to lookup the IP address. For example, a malicious chart could inject `getHostByName` into a chart in order to disclose values to a malicious DNS server.

### Patches

The issue has been fixed in Helm 3.11.1.

### Workarounds

Prior to using a chart with Helm verify the `getHostByName` function is not being used in a template to disclose any information you do not want passed to DNS servers.

### For more information

Helm's security policy is spelled out in detail in our [SECURITY](https://github.com/helm/community/blob/master/SECURITY.md) document.

### Credits

Disclosed by Philipp Stehle at SAP.

### Severity

Low

### CVE ID

CVE-2023-25165

### Weaknesses

No CWEs

### Credits

* [![@phil9909](https://avatars.githubusercontent.com/u/24714828?s=40&v=4)](/phil9909)
  [phil9909](/phil9909)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


