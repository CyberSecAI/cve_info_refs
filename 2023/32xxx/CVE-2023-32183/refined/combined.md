=== Content from en.opensuse.org_0f1b449e_20250115_113822.html ===


[![ðŸ¦Ž](https://static.opensuse.org/favicon.svg "openSUSE")
Wiki](/)

* Navigation
  [Home](/Main_Page)[Project](/Portal%3AProject)[Distribution](/Portal%3ADistribution)[Support](/Portal%3ASupport)[Contact](/openSUSE%3ACommunication_channels)[Site map](/openSUSE%3ACategory_browse)

* Help
  [Wiki](/Portal%3AWiki)[Create a Page](/Help%3AConcept)[Change a Page](/Help%3AEditing)[Find a Page](/Help%3ASearch)

* Tools
  [What links here](/Special%3AWhatLinksHere/openSUSE%3AMaintenance_update_process "A list of all wiki pages that link here [j]")[Related changes](/Special%3ARecentChangesLinked/openSUSE%3AMaintenance_update_process "Recent changes in pages linked from this page [k]")[Special pages](/Special%3ASpecialPages "A list of all special pages [q]")Printable version[Permanent link](/index.php?title=openSUSE:Maintenance_update_process&oldid=183646 "Permanent link to this revision of the page")[Page information](/index.php?title=openSUSE:Maintenance_update_process&action=info "More information about this page")

* In other languages
  [æ—¥æœ¬èªž](http://ja.opensuse.org/openSUSE%3A%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9%E6%9B%B4%E6%96%B0%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9 "openSUSE:ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ›´æ–°ãƒ—ãƒ­ã‚»ã‚¹ â€“ æ—¥æœ¬èªž")

* Log in

* [Project page](/openSUSE%3AMaintenance_update_process "View the project page [a]")
* [Discussion](/index.php?title=openSUSE_talk:Maintenance_update_process&action=edit&redlink=1 "Discussion about the content page [t]")

[View](/openSUSE%3AMaintenance_update_process)
[View source](/index.php?title=openSUSE:Maintenance_update_process&action=edit "This page is protected.
You can view its source [e]")
[History](/index.php?title=openSUSE:Maintenance_update_process&action=history "Past revisions of this page [h]")

# openSUSE:Maintenance update process

Jump to: [navigation](#mw-head),
[search](#p-search)

**[Factory development](/openSUSE%3AFactory_development_model "openSUSE:Factory development model")**[Development Model](/openSUSE%3AFactory_development_model "openSUSE:Factory development model") - [Factory submissions](/openSUSE%3AFactory_submissions "openSUSE:Factory submissions") - Maintenance update process - [Legal review](/openSUSE%3ALegal_review "openSUSE:Legal review") - [Factory review](/openSUSE%3AFactory_review "openSUSE:Factory review") - [Check-in](/openSUSE%3ACheck-in "openSUSE:Check-in") - [openSUSE review team](/openSUSE%3AOpenSUSE_review_team "openSUSE:OpenSUSE review team") - [Tools](/openSUSE%3AReview_tools "openSUSE:Review tools") - [Release Process](/openSUSE%3ARelease_process "openSUSE:Release process")

Maintenance requests are requests by packagers to release an update for an already released distribution. This page gives on overview of the process of handling these requests.

## Contents

* [1 Overview](#Overview)
* [2 Check if a Leap package is inherited from SLE](#Check_if_a_Leap_package_is_inherited_from_SLE)
* [3 Write a meaningful changelog-entry](#Write_a_meaningful_changelog-entry)
* [4 Open a maintenance request](#Open_a_maintenance_request)
* [5 Maintenance team review](#Maintenance_team_review)
* [6 Source Review](#Source_Review)
* [7 QA review](#QA_review)
* [8 Patchinfo](#Patchinfo)
* [9 Videos / Slides](#Videos_/_Slides)
## Overview

Knowing the process behind a maintenance release allows to understand the importance of the steps of the process and should help with submitting packages that can be quickly pushed through the process.

The following flow-chart diagram illustrates the maintenance package update process. It includes several different OBS projects:
[![Maintenance update process.png](/images/4/44/Maintenance_update_process.png)](/File%3AMaintenance_update_process.png)

Let's look a bit closer at some of the steps:

## Check if a Leap package is inherited from SLE

Some packages from openSUSE Leap are shared with SLE. Those packages are automatically merged after the SLE-update is released.
To check if your package is inherited you can look in the following package:

**openSUSE Leap 15.5:**

openSUSE Leap 15.5 has 4 seperate updates sources.

* OSS repo (openSUSE:Leap:15.5:Update): largely branding and config packages only
* Non-OSS repo (openSUSE:Leap:15.5:Update:NonFree): non-free but redistributable packages like Opera
* Backports repo (openSUSE:Backports:SLE-15-SP5:Update): all non SLE packages in openSUSE Leap 15.5
* SLE repo (via download.opensuse.org/update/leap/15.5/sle/): all SLE imported binary packages for openSUSE Leap 15.5

How to find out:

`osc sm PACKAGE`

If the package comes from openSUSE:Leap:15.5:Update or openSUSE:Backports:SLE-15-SP5:Update , submit to these ones. The openSUSE Maintenance team will process it.

If there is a SUSE:SLE-15:Update entry (or 15-SP1 , 15-SP2 or 15-SP3), submit it there. It will be mirrored into the SUSE Internal Buildservice and processed there. (NOTE: If you are a SUSE employee, please directly submit in the IBS to the listed project, this avoids the mirroring step.)

## Write a meaningful changelog-entry

For the [maintenance team](/openSUSE%3AMaintenance_team "openSUSE:Maintenance team") it's important, that a meaningful changelog-entry is provided to prepare the patch-documentation and rating. For a detailed description, please refer to the [patches guideline](/openSUSE%3APackaging_Patches_guidelines "openSUSE:Packaging Patches guidelines"), but here is a list of the most important information:

* Bug reference (boo#123456, CVE-2016-1234,...)
* short description for the fix
* Added/modified/dropped patchnames

## Open a maintenance request

After the package is ready to submit, you need to open a maintenance-request. You can achieve this with the following commands:

**One package for one openSUSE release:**

```
 $osc mr $prj $pkg $release_target

```

**Several packages for one openSUSE release:**

```
 $osc mr $prj $list $of $packages $release_target

```

**Several packages for several openSUSE releases:**

(This only works if your packages are in one project and the packages were branched with '$osc mbranch $pkg' or '$osc branch -M $prj $pkg')

```
 $osc mr $prj

```
## Maintenance team review

The [maintenance team](/openSUSE%3AMaintenance_team "openSUSE:Maintenance team") decides whether an update will be released. They authorize the initiation of the maintenance process and start the ball rolling. They interact directly with the packager to coordinate the submission of the package that contains the fix. They ensure that the bugs being fixed are what are actually being put into the maintenance update. The decision making process is outlined in more detail below.

## Source Review

The [openSUSE review team](/openSUSE%3AOpenSUSE_review_team "openSUSE:OpenSUSE review team") does a manual review of the submission following [these guidelines](/openSUSE%3AFactory_review "openSUSE:Factory review"). Those of the review team who intend to review the maintenance submissions will find the SRs in each project's "Update" sub-project. For example, to review the submissions for openSUSE Leap 15.1, the reviewer would find the submissions in the "openSUSE:Leap:15.1:Update" project. (In reference to the graph above, note the differences between the "openSUSE:Maintenance" project and the "openSUSE:Leap:15.1:Update" project. Reviewers shouldn't be looking in the "openSUSE:Maintenance" project to do their reviews.)

## QA review

openSUSE maintenance updates are tested with openQA and by our community. We are waiting around 5 days, to see if issues are reported, before we release the update.

If you want to test all pending updates, you need to register the following repository:
**openSUSE Leap 15.5:**

```
 <http://download.opensuse.org/update/leap/15.5-test/>

```

(note: this does not include the pending SLE imported updates at this time.)

## Patchinfo

From Leap 15.4 onwards, the part of Leap that comes from SUSE Linux Enterprise is using both patchinfos and dedicated channels. The *channels* are the same tools we use on SUSE Linux Enterprise for filtering and aggregating the binaries built from a source package and that we want to deliver to a specific product.

This change, better consolidated with Leap 15.5, unifies the way to delivery maintenance updates in Leap and SUSE Linux Enterprise.

IBS internal service links:

* [https://build.suse.de/package/show/SUSE:Channels/openSUSE-SLE\_15.4](https://build.suse.de/package/show/SUSE%3AChannels/openSUSE-SLE_15.4)
* [https://build.suse.de/package/show/SUSE:Channels/openSUSE-SLE\_15.5](https://build.suse.de/package/show/SUSE%3AChannels/openSUSE-SLE_15.5)

Given that Leap is built also with sources not coming from SUSE Linux Enterprise, we have some blocklisting mechanism for filtering out binaries from SUSE Linux Enterprise that are not supposed to land on Leap (like for example branding).

The blocklist is embedded in the perl generator script for updates: (hosted on SUSE internal gitlab).

[SUSE internal gitlab - tools](https://gitlab.suse.de/maintenance/tools.git) generate-leap-15.5-channel.pl

## Videos / Slides

[SFScon 2020 - Marina Latini - openSUSE maintenance updates](https://vimeo.com/482294939)

Retrieved from "<https://en.opensuse.org/index.php?title=openSUSE:Maintenance_update_process&oldid=183646>"

This page was last edited on 6 February 2024, at 13:58. Content is available under [GNU Free Documentation License 1.2](https://www.gnu.org/licenses/fdl-1.2.html) unless otherwise noted. This page has been accessed 26,436 times.

* [Privacy policy](/openSUSE%3APrivacy_policy "openSUSE:Privacy policy")
* [About openSUSE Wiki](/openSUSE%3AAbout "openSUSE:About")
* [Disclaimers](/Terms_of_site "Terms of site")

Â© 2001â€“2025 SUSE LLC, Â© 2005â€“2025 openSUSE contributors & others.

Sponsors

[![Sponsor](https://static.opensuse.org/themes/bento/images/sponsors/sponsor_ip-exchange2.png)](/Sponsors)

##### Log in

Ã—

Username

Password

[Create account](https://idp-portal.suse.com/univention/self-service/#page=createaccount)
Cancel
Log in



=== Content from en.opensuse.org_872aa8d3_20250115_113823.html ===


[![ðŸ¦Ž](https://static.opensuse.org/favicon.svg "openSUSE")
Wiki](/)

* Navigation
  [Home](/Main_Page)[Project](/Portal%3AProject)[Distribution](/Portal%3ADistribution)[Support](/Portal%3ASupport)[Contact](/openSUSE%3ACommunication_channels)[Site map](/openSUSE%3ACategory_browse)

* Help
  [Wiki](/Portal%3AWiki)[Create a Page](/Help%3AConcept)[Change a Page](/Help%3AEditing)[Find a Page](/Help%3ASearch)

* Tools
  [What links here](/Special%3AWhatLinksHere/openSUSE%3APackage_maintenance "A list of all wiki pages that link here [j]")[Related changes](/Special%3ARecentChangesLinked/openSUSE%3APackage_maintenance "Recent changes in pages linked from this page [k]")[Special pages](/Special%3ASpecialPages "A list of all special pages [q]")Printable version[Permanent link](/index.php?title=openSUSE:Package_maintenance&oldid=183643 "Permanent link to this revision of the page")[Page information](/index.php?title=openSUSE:Package_maintenance&action=info "More information about this page")

* In other languages
  [Deutsch](http://de.opensuse.org/openSUSE%3AWartung_von_Paketen "openSUSE:Wartung von Paketen â€“ Deutsch")[ä¸­æ–‡](http://zh.opensuse.org/openSUSE%3APackage_maintenance "openSUSE:Package maintenance â€“ ä¸­æ–‡")

* Log in

* [Project page](/openSUSE%3APackage_maintenance "View the project page [a]")
* [Discussion](/index.php?title=openSUSE_talk:Package_maintenance&action=edit&redlink=1 "Discussion about the content page [t]")

[View](/openSUSE%3APackage_maintenance)
[View source](/index.php?title=openSUSE:Package_maintenance&action=edit "This page is protected.
You can view its source [e]")
[History](/index.php?title=openSUSE:Package_maintenance&action=history "Past revisions of this page [h]")

# openSUSE:Package maintenance

Jump to: [navigation](#mw-head),
[search](#p-search)

**[Maintenance](/Portal%3AMaintenance "Portal:Maintenance")**[Policy](/openSUSE%3AMaintenance_policy "openSUSE:Maintenance policy") - Package submission - [Patchinfo](/openSUSE%3APatchinfo "openSUSE:Patchinfo") - [Maintenance team](/openSUSE%3AMaintenance_team "openSUSE:Maintenance team")
This document describes how packagers can submit updates for released openSUSE products as part of the [maintenance process](/Portal%3AMaintenance "Portal:Maintenance").

**Similar pages**[Fixing bugs](/openSUSE%3AFixing_bugs "openSUSE:Fixing bugs") -[Build Service Tutorial](/openSUSE%3ABuild_Service_Tutorial "openSUSE:Build Service Tutorial") - [Maintenance update process](/openSUSE%3AMaintenance_update_process "openSUSE:Maintenance update process")
![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** All packages in the openSUSE build service are fully public. Therefore the build service cannot be used to prepare embargoed security updates. In case of an embargoed update the packager has to wait until end of the embargo before checking in the fixes

![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** **Before you start working on a Leap package, please check [the maintenance process](/openSUSE%3AMaintenance_update_process "openSUSE:Maintenance update process").**

## Contents

* [1 Find the package that you need to work with](#Find_the_package_that_you_need_to_work_with)
* [2 Create a branch](#Create_a_branch)
  + [2.1 Branching all code streams at once](#Branching_all_code_streams_at_once)
  + [2.2 Adding a new codestream](#Adding_a_new_codestream)
  + [2.3 Getting the list of maintained copies manually](#Getting_the_list_of_maintained_copies_manually)
* [3 Make your changes](#Make_your_changes)
* [4 Submit your changes](#Submit_your_changes)
* [5 Update the Bugzilla state](#Update_the_Bugzilla_state)
## Find the package that you need to work with

The build service contains many different versions of packages. Some may be
official releases and others may be under development by users in their home
projects. The easiest way to find which versions are candidates for
maintenance, use the osc maintained command. We'll use the
nfs-utils package as an example.

````
$ osc maintained nfs-utils
openSUSE:Leap:15.1:Update/nfs-utils

````
## Create a branch

The build service provides an easy way to work on packages without having to unnecessarily contaminate the original package. It allows the user to check out a private version of the package into their home project. Any changes committed to it will be stored as a set of changes to the original. This has the advantage of making the differences between the two projects obvious when the branch is eventually submitted back to the original project.

The process for creating a branch of a single package from a single project is:

````
$ osc branch -M -c openSUSE:Leap:42.3 nfs-utils
[...]

````

In this case an update for nfs-utils was released previously already. The
updated sources got stored in a different project, *openSUSE:Leap:42.3:Update*.
You don't have to bother about that detail. osc automatically does the right
thing and uses the updated sources. So just follow the instructions provided
and check out your branched copy of the package:

If you already have a branch for this package, you should remove and recreate it. A branch that is still around and you wonder why needs investigation. It may mean that a submit-request was not accepted, and thus the cleanup never triggered. Removing such a branch may destroy your previous work.

The branch point exists from the point in time that you created it. If other changes have been committed in the interim, they will be lost if you use your existing branch. You can delete the branch by deleting the package with the osc rdelete *project package* command. For our example, it would be osc rdelete home:BenniBrunner:branches:openSUSE:Leap:42.3:Update nfs-utils.openSUSE\_Leap\_42.3\_Update.

### Branching all code streams at once

Sometimes you need to update a package for all maintained code streams, e.g. for a
security fix. With the method described above you'd have to branch and check
out the package two times, once for Leap 42.2 and Leap 42.3.

The osc mbranch command will make that convenient. It can query the build service to find the list of projects where a package is flagged for maintenance.

![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** This relies on correct configuration within the build service. Please consult with the maintenance team, if you suspect the list of projects used by osc mbranch is incorrect.

osc mbranch collects all copies of the package from all projects flagged for maintenance and creates branches of those packages in one project:

````
$ osc mbranch nfs-utils
Project home:BenniBrunner:branches:OBS_Maintained:nfs-utils created.

````

````
$ osc co home:BenniBrunner:branches:OBS_Maintained:nfs-utils
A    home:BenniBrunner:branches:OBS_Maintained:nfs-utils
A    home:BenniBrunner:branches:OBS_Maintained:nfs-utils/nfs-utils.openSUSE_Leap_42.2_Update
[...]
A    home:BenniBrunner:branches:OBS_Maintained:nfs-utils/nfs-utils.openSUSE_Leap_42.3_Update
[...]

````
![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** If you have multiple spec files in your package, please use osc ls home:*username*:branches:OBS\_Maintained:*packagename* to double-check that packages were created for all spec-files.
### Adding a new codestream

osc mbranch has no way of adding new code streams to a maintenance project. Instead, you can use osc branch's -M parameter.

````
 osc branch -M openSUSE:Leap:15.5:Update nfs-utils home:BenniBrunner:branches:OBS_Maintained:nfs-utils

````

This will link the package to the Leap 15 Update repository, name the package correctly (i.e. append the name of the code stream), and add the necessary repository in the project config.

Now, you can run osc up in the maintenance project directory to check out the newly created code stream package.

### Getting the list of maintained copies manually

If still in doubt, please contact the maintenance team for the correct list.

## Make your changes

Now that you have a private copy of the package, you can make whatever changes you need to the package. The easiest way to handle updating the file list is to ensure that you don't have any temporary files still in the source package directory and use the osc addremove command.

If you add new patches, make sure to follow the [Patch tagging guidelines](/openSUSE%3APackaging_Patches_guidelines "openSUSE:Packaging Patches guidelines").

Once you've completed your changes, add an entry to the .changes files using
osc vc.

* briefly describe the problem, one line per problem
* include a reference to the bug number in the form (bnc#12345) (if you have a bug, it must be included)
* for security fixes include the CVE number if available.

Finally commit your changes to your branch with the osc commit command.

See  [HOWTO write good changes](/openSUSE%3AHowto_write_good_changes "openSUSE:Howto write good changes")

## Submit your changes

Your branch is now a separate package and will build independently in your home project. It's generally a good idea to ensure that it builds within the tight constraints of the build system and is tested properly before submitting it. The submit process is simple.

From your checked-out project directory:

````
$ osc mr
created request id 22864

````

All packages from a remote-project:

````
$ osc mr $prj
created request id 22864

````

A specific package from a remote-project:

````
$ osc mr $prj $pkg $target #(e.g. $target could be openSUSE:Leap:15.5:Update)
created request id 22864

````

A sub-set of packages from a remote-project:

````
 $osc mr $prj $list $of $packages $target
 created request id 22864

````

Osc will prompt you for a message for the submit request. Usually
you just use the same message as for the .changes file.

![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** Please check the created request ID for acceptance or declines. Especially the automatic bot reviews might be buggy sometimes.

If the above doesn't work, you can try, from the checked-out package directory:

````
$ osc sr
WARNING:
WARNING: Project does not accept submit request, request to open a NEW maintenance incident instead
WARNING:
created request id Request: #180441

````
## Update the Bugzilla state

Once your submission is done and your packages build successful, please adjust the Bugzilla entry.

If the bug is security (starting with VUL- in the subject):

* reassign to security-team@suse.de once you think everything is done.

If the bug is anything else

* mark as RESOLVED/FIXED once you have submitted your fixes.

Retrieved from "<https://en.opensuse.org/index.php?title=openSUSE:Package_maintenance&oldid=183643>"

This page was last edited on 6 February 2024, at 13:28. Content is available under [GNU Free Documentation License 1.2](https://www.gnu.org/licenses/fdl-1.2.html) unless otherwise noted. This page has been accessed 49,856 times.

* [Privacy policy](/openSUSE%3APrivacy_policy "openSUSE:Privacy policy")
* [About openSUSE Wiki](/openSUSE%3AAbout "openSUSE:About")
* [Disclaimers](/Terms_of_site "Terms of site")

Â© 2001â€“2025 SUSE LLC, Â© 2005â€“2025 openSUSE contributors & others.

Sponsors

[![Sponsor](https://static.opensuse.org/themes/bento/images/sponsors/sponsor_ip-exchange2.png)](/Sponsors)

##### Log in

Ã—

Username

Password

[Create account](https://idp-portal.suse.com/univention/self-service/#page=createaccount)
Cancel
Log in



=== Content from en.opensuse.org_5897cc3a_20250115_113822.html ===


[![ðŸ¦Ž](https://static.opensuse.org/favicon.svg "openSUSE")
Wiki](/)

* Navigation
  [Home](/Main_Page)[Project](/Portal%3AProject)[Distribution](/Portal%3ADistribution)[Support](/Portal%3ASupport)[Contact](/openSUSE%3ACommunication_channels)[Site map](/openSUSE%3ACategory_browse)

* Help
  [Wiki](/Portal%3AWiki)[Create a Page](/Help%3AConcept)[Change a Page](/Help%3AEditing)[Find a Page](/Help%3ASearch)

* Tools
  [What links here](/Special%3AWhatLinksHere/openSUSE%3APackage_maintenance "A list of all wiki pages that link here [j]")[Related changes](/Special%3ARecentChangesLinked/openSUSE%3APackage_maintenance "Recent changes in pages linked from this page [k]")[Special pages](/Special%3ASpecialPages "A list of all special pages [q]")Printable version[Permanent link](/index.php?title=openSUSE:Package_maintenance&oldid=183643 "Permanent link to this revision of the page")[Page information](/index.php?title=openSUSE:Package_maintenance&action=info "More information about this page")

* In other languages
  [Deutsch](http://de.opensuse.org/openSUSE%3AWartung_von_Paketen "openSUSE:Wartung von Paketen â€“ Deutsch")[ä¸­æ–‡](http://zh.opensuse.org/openSUSE%3APackage_maintenance "openSUSE:Package maintenance â€“ ä¸­æ–‡")

* Log in

* [Project page](/openSUSE%3APackage_maintenance "View the project page [a]")
* [Discussion](/index.php?title=openSUSE_talk:Package_maintenance&action=edit&redlink=1 "Discussion about the content page [t]")

[View](/openSUSE%3APackage_maintenance)
[View source](/index.php?title=openSUSE:Package_maintenance&action=edit "This page is protected.
You can view its source [e]")
[History](/index.php?title=openSUSE:Package_maintenance&action=history "Past revisions of this page [h]")

# openSUSE:Package maintenance

Jump to: [navigation](#mw-head),
[search](#p-search)

**[Maintenance](/Portal%3AMaintenance "Portal:Maintenance")**[Policy](/openSUSE%3AMaintenance_policy "openSUSE:Maintenance policy") - Package submission - [Patchinfo](/openSUSE%3APatchinfo "openSUSE:Patchinfo") - [Maintenance team](/openSUSE%3AMaintenance_team "openSUSE:Maintenance team")
This document describes how packagers can submit updates for released openSUSE products as part of the [maintenance process](/Portal%3AMaintenance "Portal:Maintenance").

**Similar pages**[Fixing bugs](/openSUSE%3AFixing_bugs "openSUSE:Fixing bugs") -[Build Service Tutorial](/openSUSE%3ABuild_Service_Tutorial "openSUSE:Build Service Tutorial") - [Maintenance update process](/openSUSE%3AMaintenance_update_process "openSUSE:Maintenance update process")
![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** All packages in the openSUSE build service are fully public. Therefore the build service cannot be used to prepare embargoed security updates. In case of an embargoed update the packager has to wait until end of the embargo before checking in the fixes

![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** **Before you start working on a Leap package, please check [the maintenance process](/openSUSE%3AMaintenance_update_process "openSUSE:Maintenance update process").**

## Contents

* [1 Find the package that you need to work with](#Find_the_package_that_you_need_to_work_with)
* [2 Create a branch](#Create_a_branch)
  + [2.1 Branching all code streams at once](#Branching_all_code_streams_at_once)
  + [2.2 Adding a new codestream](#Adding_a_new_codestream)
  + [2.3 Getting the list of maintained copies manually](#Getting_the_list_of_maintained_copies_manually)
* [3 Make your changes](#Make_your_changes)
* [4 Submit your changes](#Submit_your_changes)
* [5 Update the Bugzilla state](#Update_the_Bugzilla_state)
## Find the package that you need to work with

The build service contains many different versions of packages. Some may be
official releases and others may be under development by users in their home
projects. The easiest way to find which versions are candidates for
maintenance, use the osc maintained command. We'll use the
nfs-utils package as an example.

````
$ osc maintained nfs-utils
openSUSE:Leap:15.1:Update/nfs-utils

````
## Create a branch

The build service provides an easy way to work on packages without having to unnecessarily contaminate the original package. It allows the user to check out a private version of the package into their home project. Any changes committed to it will be stored as a set of changes to the original. This has the advantage of making the differences between the two projects obvious when the branch is eventually submitted back to the original project.

The process for creating a branch of a single package from a single project is:

````
$ osc branch -M -c openSUSE:Leap:42.3 nfs-utils
[...]

````

In this case an update for nfs-utils was released previously already. The
updated sources got stored in a different project, *openSUSE:Leap:42.3:Update*.
You don't have to bother about that detail. osc automatically does the right
thing and uses the updated sources. So just follow the instructions provided
and check out your branched copy of the package:

If you already have a branch for this package, you should remove and recreate it. A branch that is still around and you wonder why needs investigation. It may mean that a submit-request was not accepted, and thus the cleanup never triggered. Removing such a branch may destroy your previous work.

The branch point exists from the point in time that you created it. If other changes have been committed in the interim, they will be lost if you use your existing branch. You can delete the branch by deleting the package with the osc rdelete *project package* command. For our example, it would be osc rdelete home:BenniBrunner:branches:openSUSE:Leap:42.3:Update nfs-utils.openSUSE\_Leap\_42.3\_Update.

### Branching all code streams at once

Sometimes you need to update a package for all maintained code streams, e.g. for a
security fix. With the method described above you'd have to branch and check
out the package two times, once for Leap 42.2 and Leap 42.3.

The osc mbranch command will make that convenient. It can query the build service to find the list of projects where a package is flagged for maintenance.

![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** This relies on correct configuration within the build service. Please consult with the maintenance team, if you suspect the list of projects used by osc mbranch is incorrect.

osc mbranch collects all copies of the package from all projects flagged for maintenance and creates branches of those packages in one project:

````
$ osc mbranch nfs-utils
Project home:BenniBrunner:branches:OBS_Maintained:nfs-utils created.

````

````
$ osc co home:BenniBrunner:branches:OBS_Maintained:nfs-utils
A    home:BenniBrunner:branches:OBS_Maintained:nfs-utils
A    home:BenniBrunner:branches:OBS_Maintained:nfs-utils/nfs-utils.openSUSE_Leap_42.2_Update
[...]
A    home:BenniBrunner:branches:OBS_Maintained:nfs-utils/nfs-utils.openSUSE_Leap_42.3_Update
[...]

````
![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** If you have multiple spec files in your package, please use osc ls home:*username*:branches:OBS\_Maintained:*packagename* to double-check that packages were created for all spec-files.
### Adding a new codestream

osc mbranch has no way of adding new code streams to a maintenance project. Instead, you can use osc branch's -M parameter.

````
 osc branch -M openSUSE:Leap:15.5:Update nfs-utils home:BenniBrunner:branches:OBS_Maintained:nfs-utils

````

This will link the package to the Leap 15 Update repository, name the package correctly (i.e. append the name of the code stream), and add the necessary repository in the project config.

Now, you can run osc up in the maintenance project directory to check out the newly created code stream package.

### Getting the list of maintained copies manually

If still in doubt, please contact the maintenance team for the correct list.

## Make your changes

Now that you have a private copy of the package, you can make whatever changes you need to the package. The easiest way to handle updating the file list is to ensure that you don't have any temporary files still in the source package directory and use the osc addremove command.

If you add new patches, make sure to follow the [Patch tagging guidelines](/openSUSE%3APackaging_Patches_guidelines "openSUSE:Packaging Patches guidelines").

Once you've completed your changes, add an entry to the .changes files using
osc vc.

* briefly describe the problem, one line per problem
* include a reference to the bug number in the form (bnc#12345) (if you have a bug, it must be included)
* for security fixes include the CVE number if available.

Finally commit your changes to your branch with the osc commit command.

See  [HOWTO write good changes](/openSUSE%3AHowto_write_good_changes "openSUSE:Howto write good changes")

## Submit your changes

Your branch is now a separate package and will build independently in your home project. It's generally a good idea to ensure that it builds within the tight constraints of the build system and is tested properly before submitting it. The submit process is simple.

From your checked-out project directory:

````
$ osc mr
created request id 22864

````

All packages from a remote-project:

````
$ osc mr $prj
created request id 22864

````

A specific package from a remote-project:

````
$ osc mr $prj $pkg $target #(e.g. $target could be openSUSE:Leap:15.5:Update)
created request id 22864

````

A sub-set of packages from a remote-project:

````
 $osc mr $prj $list $of $packages $target
 created request id 22864

````

Osc will prompt you for a message for the submit request. Usually
you just use the same message as for the .changes file.

![Icon-warning.png](/images/3/3b/Icon-warning.png)
**Warning:** Please check the created request ID for acceptance or declines. Especially the automatic bot reviews might be buggy sometimes.

If the above doesn't work, you can try, from the checked-out package directory:

````
$ osc sr
WARNING:
WARNING: Project does not accept submit request, request to open a NEW maintenance incident instead
WARNING:
created request id Request: #180441

````
## Update the Bugzilla state

Once your submission is done and your packages build successful, please adjust the Bugzilla entry.

If the bug is security (starting with VUL- in the subject):

* reassign to security-team@suse.de once you think everything is done.

If the bug is anything else

* mark as RESOLVED/FIXED once you have submitted your fixes.

Retrieved from "<https://en.opensuse.org/index.php?title=openSUSE:Package_maintenance&oldid=183643>"

This page was last edited on 6 February 2024, at 13:28. Content is available under [GNU Free Documentation License 1.2](https://www.gnu.org/licenses/fdl-1.2.html) unless otherwise noted. This page has been accessed 49,856 times.

* [Privacy policy](/openSUSE%3APrivacy_policy "openSUSE:Privacy policy")
* [About openSUSE Wiki](/openSUSE%3AAbout "openSUSE:About")
* [Disclaimers](/Terms_of_site "Terms of site")

Â© 2001â€“2025 SUSE LLC, Â© 2005â€“2025 openSUSE contributors & others.

Sponsors

[![Sponsor](https://static.opensuse.org/themes/bento/images/sponsors/sponsor_b1-systems.png)](/Sponsors)

##### Log in

Ã—

Username

Password

[Create account](https://idp-portal.suse.com/univention/self-service/#page=createaccount)
Cancel
Log in



=== Content from build.opensuse.org_8b4e00b3_20250115_113821.html ===

[![](https://build.opensuse.org/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBCZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aa5cb6f11b842d915c34968e0a4de823d259dcc0/openSUSEBuildService.png)](/)

[Sign Up](https://idp-portal.suse.com/univention/self-service/#page=createaccount)

Log In

[![](/assets/favicon-eb1d8ba2a269175c910cae3ae95a5d0dca90274b90db45c8efe0988ec9efd85d.svg)](/)Log In

---

or

[Sign Up](https://idp-portal.suse.com/univention/self-service/#page=createaccount)

##### Places

* [All Projects](/project "All Projects")
* [Status Monitor](/monitor "Status Monitor")

* Collapse sidebar

1. Request 1094687

This request is superseded by
[request 1094804](/request/show/1094804)
([Show diff](/request/show/1094804?diff_to_superseded=1094687))

##### Overview

### Request 1094687 superseded

- Strengthen /usr/share/hawk permissions (bsc#1211848)

* Created by
  [aburlakov](/users/aburlakov)
  over 1 year ago
* In state
  [superseded](/request/show/1094687#request-history)
* Package maintainers:
  ![Aleksei Burlakov's avatar](https://www.gravatar.com/avatar/4b4e16088bb9832a29935908a3aa4882?s=20&d=robohash "Aleksei Burlakov") [aburlakov](/users/aburlakov) and ![Dario Maiocchi's avatar](https://www.gravatar.com/avatar/6d9503be4be51bb3702ff8ba1bfefb6e?s=20&d=robohash "Dario Maiocchi") [dmaiocchi](/users/dmaiocchi)
* Superseded by
  [1094804](/request/show/1094804)
* Open review for
  ![Yan Gao's avatar](https://www.gravatar.com/avatar/a8fed8761da43a8b77aca35918637f46?s=20&d=robohash "Yan Gao") [yan\_gao](/users/yan_gao)
* Open review for
  ![Dario Maiocchi's avatar](https://www.gravatar.com/avatar/6d9503be4be51bb3702ff8ba1bfefb6e?s=20&d=robohash "Dario Maiocchi") [dmaiocchi](/users/dmaiocchi)
* Open review for
  ![Aleksei Burlakov's avatar](https://www.gravatar.com/avatar/4b4e16088bb9832a29935908a3aa4882?s=20&d=robohash "Aleksei Burlakov") [aburlakov](/users/aburlakov)

* [Submit hawk2](#Submit_hawk22902373)

Loading...

* [Comments for request 1094687
  1](#comments)

---

![Aleksei Burlakov's avatar](https://www.gravatar.com/avatar/4b4e16088bb9832a29935908a3aa4882?s=35&d=robohash "Aleksei Burlakov")

[Aleksei Burlakov (aburlakov)](/users/aburlakov)
-
[over 1 year ago](#comment-1790951 "2023-06-22 15:16 UTC")

author

reviewer

target maintainer

[@jsegitz](https://build.opensuse.org/users/jsegitz) please have a look (ref: [bsc#1211848](https://bugzilla.opensuse.org/show_bug.cgi?id=1211848))

##### Request History

![Aleksei Burlakov's avatar](https://www.gravatar.com/avatar/4b4e16088bb9832a29935908a3aa4882?s=38&d=robohash "Aleksei Burlakov")

[aburlakov](/users/aburlakov)
created request
[over 1 year ago](#request-creation "2023-06-22 15:14 UTC")

- Strengthen /usr/share/hawk permissions (bsc#1211848)

---

![Aleksei Burlakov's avatar](https://www.gravatar.com/avatar/4b4e16088bb9832a29935908a3aa4882?s=38&d=robohash "Aleksei Burlakov")

[aburlakov](/users/aburlakov)
[superseded request](/request/show/1094804)
[over 1 year ago](#status-history-20045054 "2023-06-23 08:49 UTC")

- Strengthen /usr/share/hawk permissions (bsc#1211848)

##### Package Maintainers

![Aleksei Burlakov's avatar](https://www.gravatar.com/avatar/4b4e16088bb9832a29935908a3aa4882?s=20&d=robohash "Aleksei Burlakov") [aburlakov](/users/aburlakov)

![Dario Maiocchi's avatar](https://www.gravatar.com/avatar/6d9503be4be51bb3702ff8ba1bfefb6e?s=20&d=robohash "Dario Maiocchi") [dmaiocchi](/users/dmaiocchi)

OK

**Locations**

* [Projects](/project)
* [Search](/search)
* [Status Monitor](/monitor)

**Help**

* [OpenBuildService.org](https://openbuildservice.org/)
* [Documentation](https://openbuildservice.org/help/manuals/)
* [API Documentation](/apidocs/index)
* [Code of Conduct](/code_of_conduct)

**Contact**

* [Support](https://openbuildservice.org/support/)
* [@OBShq](https://fosstodon.org/%40obshq)
* [Terms](https://en.opensuse.org/Terms_of_site)

openSUSE Build Service is sponsored by
[![](/assets/icons/sponsor_suse-92006bbd693f5f675ccab53afe3e9c858aada01882b490fa784d8cc8a9f4f080.png)](http://www.suse.com "Enterprise Linux you can rely on.")

[![](/assets/icons/sponsor_amd-5ec958d97e60089cad23346048c0b79d2144408deda3d0495fe023bf29ec0d7b.png)](http://www.amd.com/ "Enabling today. Inspiring tomorrow.")

[![](/assets/icons/sponsor_b1-systems-a5bc5a49e7fc7854f9a688f873b074330a68bf7d286c4fda6bd0dd2e592752da.png)](http://www.b1-systems.de/en/homepage/ "Linux / Open Source Consulting, Training, Development & Support")

[![](/assets/icons/sponsor_heinlein-dc9ce64ab5cb25a15c4fd9a1b743f7886867932283f1dace07f0599a663a222a.png)](https://www.heinlein-support.de/ "We provide Knowledge and Experience")

[![](/assets/icons/sponsor_apm-1a5a654e5e7ed3df9d4717a1d68f6c4593096304173961c8b486a3ff3bddde75.png)](https://www.apm.com "Build the future of ARMv8 on Applied Micro")

The Open Build Service is an
[openSUSE project](https://www.opensuse.org).

* [Sign Up](https://idp-portal.suse.com/univention/self-service/#page=createaccount)
* Log In
* Places

##### Places

* [All Projects](/project "All Projects")
* [Status Monitor](/monitor "Status Monitor")



=== Content from en.opensuse.org_349355ae_20250115_113821.html ===


[![ðŸ¦Ž](https://static.opensuse.org/favicon.svg "openSUSE")
Wiki](/)

* Navigation
  [Home](/Main_Page)[Project](/Portal%3AProject)[Distribution](/Portal%3ADistribution)[Support](/Portal%3ASupport)[Contact](/openSUSE%3ACommunication_channels)[Site map](/openSUSE%3ACategory_browse)

* Help
  [Wiki](/Portal%3AWiki)[Create a Page](/Help%3AConcept)[Change a Page](/Help%3AEditing)[Find a Page](/Help%3ASearch)

* Tools
  [What links here](/Special%3AWhatLinksHere/openSUSE%3AMaintenance_update_process "A list of all wiki pages that link here [j]")[Related changes](/Special%3ARecentChangesLinked/openSUSE%3AMaintenance_update_process "Recent changes in pages linked from this page [k]")[Special pages](/Special%3ASpecialPages "A list of all special pages [q]")Printable version[Permanent link](/index.php?title=openSUSE:Maintenance_update_process&oldid=183646 "Permanent link to this revision of the page")[Page information](/index.php?title=openSUSE:Maintenance_update_process&action=info "More information about this page")

* In other languages
  [æ—¥æœ¬èªž](http://ja.opensuse.org/openSUSE%3A%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9%E6%9B%B4%E6%96%B0%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9 "openSUSE:ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ›´æ–°ãƒ—ãƒ­ã‚»ã‚¹ â€“ æ—¥æœ¬èªž")

* Log in

* [Project page](/openSUSE%3AMaintenance_update_process "View the project page [a]")
* [Discussion](/index.php?title=openSUSE_talk:Maintenance_update_process&action=edit&redlink=1 "Discussion about the content page [t]")

[View](/openSUSE%3AMaintenance_update_process)
[View source](/index.php?title=openSUSE:Maintenance_update_process&action=edit "This page is protected.
You can view its source [e]")
[History](/index.php?title=openSUSE:Maintenance_update_process&action=history "Past revisions of this page [h]")

# openSUSE:Maintenance update process

Jump to: [navigation](#mw-head),
[search](#p-search)

**[Factory development](/openSUSE%3AFactory_development_model "openSUSE:Factory development model")**[Development Model](/openSUSE%3AFactory_development_model "openSUSE:Factory development model") - [Factory submissions](/openSUSE%3AFactory_submissions "openSUSE:Factory submissions") - Maintenance update process - [Legal review](/openSUSE%3ALegal_review "openSUSE:Legal review") - [Factory review](/openSUSE%3AFactory_review "openSUSE:Factory review") - [Check-in](/openSUSE%3ACheck-in "openSUSE:Check-in") - [openSUSE review team](/openSUSE%3AOpenSUSE_review_team "openSUSE:OpenSUSE review team") - [Tools](/openSUSE%3AReview_tools "openSUSE:Review tools") - [Release Process](/openSUSE%3ARelease_process "openSUSE:Release process")

Maintenance requests are requests by packagers to release an update for an already released distribution. This page gives on overview of the process of handling these requests.

## Contents

* [1 Overview](#Overview)
* [2 Check if a Leap package is inherited from SLE](#Check_if_a_Leap_package_is_inherited_from_SLE)
* [3 Write a meaningful changelog-entry](#Write_a_meaningful_changelog-entry)
* [4 Open a maintenance request](#Open_a_maintenance_request)
* [5 Maintenance team review](#Maintenance_team_review)
* [6 Source Review](#Source_Review)
* [7 QA review](#QA_review)
* [8 Patchinfo](#Patchinfo)
* [9 Videos / Slides](#Videos_/_Slides)
## Overview

Knowing the process behind a maintenance release allows to understand the importance of the steps of the process and should help with submitting packages that can be quickly pushed through the process.

The following flow-chart diagram illustrates the maintenance package update process. It includes several different OBS projects:
[![Maintenance update process.png](/images/4/44/Maintenance_update_process.png)](/File%3AMaintenance_update_process.png)

Let's look a bit closer at some of the steps:

## Check if a Leap package is inherited from SLE

Some packages from openSUSE Leap are shared with SLE. Those packages are automatically merged after the SLE-update is released.
To check if your package is inherited you can look in the following package:

**openSUSE Leap 15.5:**

openSUSE Leap 15.5 has 4 seperate updates sources.

* OSS repo (openSUSE:Leap:15.5:Update): largely branding and config packages only
* Non-OSS repo (openSUSE:Leap:15.5:Update:NonFree): non-free but redistributable packages like Opera
* Backports repo (openSUSE:Backports:SLE-15-SP5:Update): all non SLE packages in openSUSE Leap 15.5
* SLE repo (via download.opensuse.org/update/leap/15.5/sle/): all SLE imported binary packages for openSUSE Leap 15.5

How to find out:

`osc sm PACKAGE`

If the package comes from openSUSE:Leap:15.5:Update or openSUSE:Backports:SLE-15-SP5:Update , submit to these ones. The openSUSE Maintenance team will process it.

If there is a SUSE:SLE-15:Update entry (or 15-SP1 , 15-SP2 or 15-SP3), submit it there. It will be mirrored into the SUSE Internal Buildservice and processed there. (NOTE: If you are a SUSE employee, please directly submit in the IBS to the listed project, this avoids the mirroring step.)

## Write a meaningful changelog-entry

For the [maintenance team](/openSUSE%3AMaintenance_team "openSUSE:Maintenance team") it's important, that a meaningful changelog-entry is provided to prepare the patch-documentation and rating. For a detailed description, please refer to the [patches guideline](/openSUSE%3APackaging_Patches_guidelines "openSUSE:Packaging Patches guidelines"), but here is a list of the most important information:

* Bug reference (boo#123456, CVE-2016-1234,...)
* short description for the fix
* Added/modified/dropped patchnames

## Open a maintenance request

After the package is ready to submit, you need to open a maintenance-request. You can achieve this with the following commands:

**One package for one openSUSE release:**

```
 $osc mr $prj $pkg $release_target

```

**Several packages for one openSUSE release:**

```
 $osc mr $prj $list $of $packages $release_target

```

**Several packages for several openSUSE releases:**

(This only works if your packages are in one project and the packages were branched with '$osc mbranch $pkg' or '$osc branch -M $prj $pkg')

```
 $osc mr $prj

```
## Maintenance team review

The [maintenance team](/openSUSE%3AMaintenance_team "openSUSE:Maintenance team") decides whether an update will be released. They authorize the initiation of the maintenance process and start the ball rolling. They interact directly with the packager to coordinate the submission of the package that contains the fix. They ensure that the bugs being fixed are what are actually being put into the maintenance update. The decision making process is outlined in more detail below.

## Source Review

The [openSUSE review team](/openSUSE%3AOpenSUSE_review_team "openSUSE:OpenSUSE review team") does a manual review of the submission following [these guidelines](/openSUSE%3AFactory_review "openSUSE:Factory review"). Those of the review team who intend to review the maintenance submissions will find the SRs in each project's "Update" sub-project. For example, to review the submissions for openSUSE Leap 15.1, the reviewer would find the submissions in the "openSUSE:Leap:15.1:Update" project. (In reference to the graph above, note the differences between the "openSUSE:Maintenance" project and the "openSUSE:Leap:15.1:Update" project. Reviewers shouldn't be looking in the "openSUSE:Maintenance" project to do their reviews.)

## QA review

openSUSE maintenance updates are tested with openQA and by our community. We are waiting around 5 days, to see if issues are reported, before we release the update.

If you want to test all pending updates, you need to register the following repository:
**openSUSE Leap 15.5:**

```
 <http://download.opensuse.org/update/leap/15.5-test/>

```

(note: this does not include the pending SLE imported updates at this time.)

## Patchinfo

From Leap 15.4 onwards, the part of Leap that comes from SUSE Linux Enterprise is using both patchinfos and dedicated channels. The *channels* are the same tools we use on SUSE Linux Enterprise for filtering and aggregating the binaries built from a source package and that we want to deliver to a specific product.

This change, better consolidated with Leap 15.5, unifies the way to delivery maintenance updates in Leap and SUSE Linux Enterprise.

IBS internal service links:

* [https://build.suse.de/package/show/SUSE:Channels/openSUSE-SLE\_15.4](https://build.suse.de/package/show/SUSE%3AChannels/openSUSE-SLE_15.4)
* [https://build.suse.de/package/show/SUSE:Channels/openSUSE-SLE\_15.5](https://build.suse.de/package/show/SUSE%3AChannels/openSUSE-SLE_15.5)

Given that Leap is built also with sources not coming from SUSE Linux Enterprise, we have some blocklisting mechanism for filtering out binaries from SUSE Linux Enterprise that are not supposed to land on Leap (like for example branding).

The blocklist is embedded in the perl generator script for updates: (hosted on SUSE internal gitlab).

[SUSE internal gitlab - tools](https://gitlab.suse.de/maintenance/tools.git) generate-leap-15.5-channel.pl

## Videos / Slides

[SFScon 2020 - Marina Latini - openSUSE maintenance updates](https://vimeo.com/482294939)

Retrieved from "<https://en.opensuse.org/index.php?title=openSUSE:Maintenance_update_process&oldid=183646>"

This page was last edited on 6 February 2024, at 13:58. Content is available under [GNU Free Documentation License 1.2](https://www.gnu.org/licenses/fdl-1.2.html) unless otherwise noted. This page has been accessed 26,436 times.

* [Privacy policy](/openSUSE%3APrivacy_policy "openSUSE:Privacy policy")
* [About openSUSE Wiki](/openSUSE%3AAbout "openSUSE:About")
* [Disclaimers](/Terms_of_site "Terms of site")

Â© 2001â€“2025 SUSE LLC, Â© 2005â€“2025 openSUSE contributors & others.

Sponsors

[![Sponsor](https://static.opensuse.org/themes/bento/images/sponsors/sponsor_amd.png)](/Sponsors)

##### Log in

Ã—

Username

Password

[Create account](https://idp-portal.suse.com/univention/self-service/#page=createaccount)
Cancel
Log in



=== Content from bugzilla.suse.com_5c82a722_20250114_190528.html ===


| Bugzilla â€“ BugÂ 1211848 | VUL-0: CVE-2023-32183: hawk2: Privilege escalation from hacluster user to root due to file system permissions of package | Last modified: 2024-12-30 16:39:23 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3DCVE-2023-32183)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**BugÂ 1211848**](show_bug.cgi?id=1211848)
(CVE-2023-32183)
- VUL-0: CVE-2023-32183: hawk2: Privilege escalation from hacluster user to root due to file system permissions of package

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: CVE-2023-32183: hawk2: Privilege escalation from hacluster user to roo...

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2023-32183 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | openSUSE Tumbleweed | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | openSUSE | | [Component:](describecomponents.cgi?product=openSUSE Tumbleweed "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | High Availability ([show other bugs](buglist.cgi?component=High%20Availability&product=openSUSE%20Tumbleweed&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | Current | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P3 - Medium **Severity**: Normal ([vote](page.cgi?id=voting/user.html&bug_id=1211848#vote_1211848)) | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Aleksei Burlakov | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | E-mail List | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2023-05-31 08:04 UTC by Johannes Segitz | | --- | --- | | Modified: | 2024-12-30 16:39 UTC ([History](show_activity.cgi?id=1211848)) | | CC List: | 4 users (show)  aburlakov jsegitz meissner stoyan.manolov | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1211848)  | Flags: | stoyan.manolov: needinfo? (aburlakov) | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1211848&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1211848&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1211848#c0)  Johannes Segitz   2023-05-31 08:04:48 UTC  ``` /usr/lib/systemd/system/hawk.service:   7 [Service]   8 Type=simple   9 User=hacluster  10 Group=haclient  11 WorkingDirectory=/usr/share/hawk  12 Restart=always  13 RestartSec=5  14 Environment="HAWK_ENV=production"  15 EnvironmentFile=-/etc/sysconfig/hawk  16  17 # Run ExecStartPre with root-permissions  18 PermissionsStartOnly=true  19 ExecStartPre=/usr/share/hawk/bin/generate-ssl-cert  20 ExecStart=/usr/sbin/hawk-apiserver -key ${HAWK_KEY} -cert ${HAWK_CERT} -port ${HAWK_PORT} -config /etc/hawk/server.json  This means that the apiserver is run as hacluster, but /usr/share/hawk/bin/generate-ssl-cert still runs as root. /usr/share/hawk/bin is owned by hacluster in the current packaging (not on SLES), so hacluster can change generate-ssl-cert  POC: sh-5.2$ id uid=90(hacluster) gid=90(haclient) groups=90(haclient) sh-5.2$ mv /usr/share/hawk/bin/generate-ssl-cert /usr/share/hawk/bin/generate-ssl-cert.bak sh-5.2$ echo -e '#!/bin/sh\necho owned > /owned' > /usr/share/hawk/bin/generate-ssl-cert sh-5.2$ chmod +x /usr/share/hawk/bin/generate-ssl-cert  as root: (re)start the service: systemctl start hawk  sh-5.2$ cat /owned owned  Large parts of /usr/share/hawk are owned by hacluster. This is not the case in SLES and as long as this is the case this will likely be insecure. Can we revert to the previous settings?  I will likely assign a CVE for this, but I need to check first with upstream what their permissions are. ``` [Comment 1](show_bug.cgi?id=1211848#c1)  Johannes Segitz   2023-05-31 08:05:58 UTC  ``` Internal CRD: 2023-06-30 or earlier  This is an embargoed bug. This means that this information is not public.  Please do NOT: - talk to other people about this unless they're involved in fixing the issue - make this bug public - submit this into OBS (e.g. fix Leap/Tumbleweed) until this bug becomes   public. This means that the security team removed the EMBARGOED tag from   the bug title after we verified that there's already information about   this bug publicly available. If you find such information yourself and   the bug is still embargoed please contact us  Your primary responsibility is to apply a fix for this issue. Here is some guidance on openSUSE package maintenance: - [https://en.opensuse.org/openSUSE:Package_maintenance](https://en.opensuse.org/openSUSE%3APackage_maintenance) - [https://en.opensuse.org/openSUSE:Maintenance_update_process](https://en.opensuse.org/openSUSE%3AMaintenance_update_process)  You need to submit AFTER the bug became public, to the current openSUSE Leap codestreams, and to the devel project of your package.  The security team will then take the following steps: - We wait for your submission and package them into an incident for QA   testing. The QA tester might reach out to you if they find issues with   the update. - If QA doesn't find any issues, we publish the updates.  You can contact us at:  * IRC: irc.suse.de #security * Do NOT use Slack or any non-SUSE hosted messaging services * Email: security-team@suse.de ``` [Comment 2](show_bug.cgi?id=1211848#c2)  Johannes Segitz   2023-05-31 08:09:48 UTC  ``` Please use CVE-2023-32183 for this ``` [Comment 3](show_bug.cgi?id=1211848#c3)  Johannes Segitz   2023-05-31 09:41:38 UTC  ``` Also this is in the spec file 197 gem install --local %{www_base}/hawk/vendor/cache/js-routes-1.4.1.gem  since %{www_base}/hawk/vendor/cache is writeable for the user this might also be vulnerable. A naive symlink attack doesn't work, but this file is opened a lot of times, so a race might be won.  If you change the permissions back this will be safe again ``` [Comment 4](show_bug.cgi?id=1211848#c4)  Aleksei Burlakov   2023-06-01 08:31:23 UTC  ``` Hi,  the hacluster user and the haclient group is a special user and a group. They are thoughroughly used in the ha components interchangeably with the root. You can say the hacluster is the root2, but for HA.  The hacluster user needs the write permissions to some files in the /usr/share/hawk, for example to the Gemfile.lock. I didn't want to cherry-pick files and gave the permissions for hacluster on the whole hawk folder, which imho still sounds sane.  If the upstream wants to deprive the hacluster from certain actions, we can do this of course. ``` [Comment 5](show_bug.cgi?id=1211848#c5)  Johannes Segitz   2023-06-01 11:09:10 UTC  ``` Thanks for the information. Where is it documented that hacluster is akin to root? ``` [Comment 6](show_bug.cgi?id=1211848#c6)  Aleksei Burlakov   2023-06-01 11:29:28 UTC  ``` I didn't find a sentence that says "hacluster is the same that root, but for ha components", this is just common knowledge. The source code of such components as crmsh for example, implies that the hacluster is a root for HA. And the crmsh is a core component of HA. ``` [Comment 7](show_bug.cgi?id=1211848#c7)  Johannes Segitz   2023-06-01 11:49:33 UTC  ``` That's a problem then. Something like this can be okay if users are aware. And that needs some form of documentation. So if there's no documentation stating this it's a CVE. If we can find something where we can argue that this is known to users we could retract the CVE. ``` [Comment 8](show_bug.cgi?id=1211848#c8)  Johannes Segitz   2023-06-15 08:25:45 UTC  ``` We're getting close to the CRD. So unless we can find a reason in the official documentation (or document it now) this needs to be worked on. ATM this CVE is still internal and we can retract it if the documentation is updated ``` [Comment 9](show_bug.cgi?id=1211848#c9)  Aleksei Burlakov   2023-06-16 13:06:35 UTC  ``` There is a 'Please do NOT: - submit this into OBS' What should we do about it? ``` [Comment 10](show_bug.cgi?id=1211848#c10)  Johannes Segitz   2023-06-19 07:00:39 UTC  ``` Since it's an internal finding we can make it public at any time. So feel free to submit, but please ping me once you do this so we can make this bug public, otherwise our bots start to scream ``` [Comment 12](show_bug.cgi?id=1211848#c12)  Johannes Segitz   2023-06-22 13:56:12 UTC  ``` public ``` [Comment 13](show_bug.cgi?id=1211848#c13)  Aleksei Burlakov   2023-06-22 15:20:38 UTC  ``` Hi, ping-ping, I have mentioned the issue in my branch. And there is a submission, could you please have a look <https://build.opensuse.org/request/show/1094687> ``` [Comment 14](show_bug.cgi?id=1211848#c14)  Aleksei Burlakov   2023-07-03 14:32:31 UTC  ``` I've returned the permissions of the hawk folder back to the root:root, except for the Gemfile.lock. The change is already in the tumbleweed. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1211848)
* -Â [XML](show_bug.cgi?ctype=xml&id=1211848)
* -Â [Clone This Bug](enter_bug.cgi?cloned_bug_id=1211848)
* -Â Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3DCVE-2023-32183)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)


