=== Content from github.com_15c75c54_20250114_205454.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpython%2Fcpython%2Fblob%2F0fb18b02c8ad56299d6a2910be0bab8ad601ef24%2FLib%2Fshutil.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpython%2Fcpython%2Fblob%2F0fb18b02c8ad56299d6a2910be0bab8ad601ef24%2FLib%2Fshutil.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=python%2Fcpython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[python](/python)
/
**[cpython](/python/cpython)**
Public

* [Notifications](/login?return_to=%2Fpython%2Fcpython) You must be signed in to change notification settings
* [Fork
  30.9k](/login?return_to=%2Fpython%2Fcpython)
* [Star
   64.7k](/login?return_to=%2Fpython%2Fcpython)

* [Code](/python/cpython)
* [Issues
  5k+](/python/cpython/issues)
* [Pull requests
  1.8k](/python/cpython/pulls)
* [Actions](/python/cpython/actions)
* [Projects
  28](/python/cpython/projects)
* [Security](/python/cpython/security)
* [Insights](/python/cpython/pulse)

Additional navigation options

* [Code](/python/cpython)
* [Issues](/python/cpython/issues)
* [Pull requests](/python/cpython/pulls)
* [Actions](/python/cpython/actions)
* [Projects](/python/cpython/projects)
* [Security](/python/cpython/security)
* [Insights](/python/cpython/pulse)

## Files

 0fb18b0
## Breadcrumbs

1. [cpython](/python/cpython/tree/0fb18b02c8ad56299d6a2910be0bab8ad601ef24)
2. /[Lib](/python/cpython/tree/0fb18b02c8ad56299d6a2910be0bab8ad601ef24/Lib)
/
# shutil.py

Copy path Blame  Blame
## Latest commit

## History

[History](/python/cpython/commits/0fb18b02c8ad56299d6a2910be0bab8ad601ef24/Lib/shutil.py)1573 lines (1337 loc) · 55.4 KB 0fb18b0
## Breadcrumbs

1. [cpython](/python/cpython/tree/0fb18b02c8ad56299d6a2910be0bab8ad601ef24)
2. /[Lib](/python/cpython/tree/0fb18b02c8ad56299d6a2910be0bab8ad601ef24/Lib)
/
# shutil.py

Top
## File metadata and controls

* Code
* Blame

1573 lines (1337 loc) · 55.4 KB[Raw](https://github.com/python/cpython/raw/0fb18b02c8ad56299d6a2910be0bab8ad601ef24/Lib/shutil.py)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000"""Utility functions for copying and archiving files and directory trees.
XXX The functions here don't copy the resource fork or other metadata on Mac.
"""
import osimport sysimport statimport fnmatchimport collectionsimport errnoimport warnings
try: import zlib del zlib \_ZLIB\_SUPPORTED = Trueexcept ImportError: \_ZLIB\_SUPPORTED = False
try: import bz2 del bz2 \_BZ2\_SUPPORTED = Trueexcept ImportError: \_BZ2\_SUPPORTED = False
try: import lzma del lzma \_LZMA\_SUPPORTED = Trueexcept ImportError: \_LZMA\_SUPPORTED = False
\_WINDOWS = os.name == 'nt'posix = nt = Noneif os.name == 'posix': import posixelif \_WINDOWS: import nt
if sys.platform == 'win32': import \_winapielse: \_winapi = None
COPY\_BUFSIZE = 1024 \* 1024 if \_WINDOWS else 64 \* 1024# This should never be removed, see rationale in:# https://bugs.python.org/issue43743#msg393429\_USE\_CP\_SENDFILE = hasattr(os, "sendfile") and sys.platform.startswith("linux")\_HAS\_FCOPYFILE = posix and hasattr(posix, "\_fcopyfile") # macOS
# CMD defaults in Windows 10\_WIN\_DEFAULT\_PATHEXT = ".COM;.EXE;.BAT;.CMD;.VBS;.JS;.WS;.MSC"
\_\_all\_\_ = ["copyfileobj", "copyfile", "copymode", "copystat", "copy", "copy2", "copytree", "move", "rmtree", "Error", "SpecialFileError", "ExecError", "make\_archive", "get\_archive\_formats", "register\_archive\_format", "unregister\_archive\_format", "get\_unpack\_formats", "register\_unpack\_format", "unregister\_unpack\_format", "unpack\_archive", "ignore\_patterns", "chown", "which", "get\_terminal\_size", "SameFileError"] # disk\_usage is added later, if available on the platform
class Error(OSError): pass
class SameFileError(Error): """Raised when source and destination are the same file."""
class SpecialFileError(OSError): """Raised when trying to do a kind of operation (e.g. copying) which is not supported on a special file (e.g. a named pipe)"""
class ExecError(OSError): """Raised when a command could not be executed"""
class ReadError(OSError): """Raised when an archive cannot be read"""
class RegistryError(Exception): """Raised when a registry operation with the archiving and unpacking registries fails"""
class \_GiveupOnFastCopy(Exception): """Raised as a signal to fallback on using raw read()/write() file copy when fast-copy functions fail to do so. """
def \_fastcopy\_fcopyfile(fsrc, fdst, flags): """Copy a regular file content or metadata by using high-performance fcopyfile(3) syscall (macOS). """ try: infd = fsrc.fileno() outfd = fdst.fileno() except Exception as err: raise \_GiveupOnFastCopy(err) # not a regular file
 try: posix.\_fcopyfile(infd, outfd, flags) except OSError as err: err.filename = fsrc.name err.filename2 = fdst.name if err.errno in {errno.EINVAL, errno.ENOTSUP}: raise \_GiveupOnFastCopy(err) else: raise err from None
def \_fastcopy\_sendfile(fsrc, fdst): """Copy data from one regular mmap-like fd to another by using high-performance sendfile(2) syscall. This should work on Linux >= 2.6.33 only. """ # Note: copyfileobj() is left alone in order to not introduce any # unexpected breakage. Possible risks by using zero-copy calls # in copyfileobj() are: # - fdst cannot be open in "a"(ppend) mode # - fsrc and fdst may be open in "t"(ext) mode # - fsrc may be a BufferedReader (which hides unread data in a buffer), # GzipFile (which decompresses data), HTTPResponse (which decodes # chunks). # - possibly others (e.g. encrypted fs/partition?) global \_USE\_CP\_SENDFILE try: infd = fsrc.fileno() outfd = fdst.fileno() except Exception as err: raise \_GiveupOnFastCopy(err) # not a regular file
 # Hopefully the whole file will be copied in a single call. # sendfile() is called in a loop 'till EOF is reached (0 return) # so a bufsize smaller or bigger than the actual file size # should not make any difference, also in case the file content # changes while being copied. try: blocksize = max(os.fstat(infd).st\_size, 2 \*\* 23) # min 8MiB except OSError: blocksize = 2 \*\* 27 # 128MiB # On 32-bit architectures truncate to 1GiB to avoid OverflowError, # see bpo-38319. if sys.maxsize < 2 \*\* 32: blocksize = min(blocksize, 2 \*\* 30)
 offset = 0 while True: try: sent = os.sendfile(outfd, infd, offset, blocksize) except OSError as err: # ...in oder to have a more informative exception. err.filename = fsrc.name err.filename2 = fdst.name
 if err.errno == errno.ENOTSOCK: # sendfile() on this platform (probably Linux < 2.6.33) # does not support copies between regular files (only # sockets). \_USE\_CP\_SENDFILE = False raise \_GiveupOnFastCopy(err)
 if err.errno == errno.ENOSPC: # filesystem is full raise err from None
 # Give up on first call and if no data was copied. if offset == 0 and os.lseek(outfd, 0, os.SEEK\_CUR) == 0: raise \_GiveupOnFastCopy(err)
 raise err else: if sent == 0: break # EOF offset += sent
def \_copyfileobj\_readinto(fsrc, fdst, length=COPY\_BUFSIZE): """readinto()/memoryview() based variant of copyfileobj(). \*fsrc\* must support readinto() method and both files must be open in binary mode. """ # Localize variable access to minimize overhead. fsrc\_readinto = fsrc.readinto fdst\_write = fdst.write with memoryview(bytearray(length)) as mv: while True: n = fsrc\_readinto(mv) if not n: break elif n < length: with mv[:n] as smv: fdst\_write(smv) break else: fdst\_write(mv)
def copyfileobj(fsrc, fdst, length=0): """copy data from file-like object fsrc to file-like object fdst""" if not length: length = COPY\_BUFSIZE # Localize variable access to minimize overhead. fsrc\_read = fsrc.read fdst\_write = fdst.write while buf := fsrc\_read(length): fdst\_write(buf)
def \_samefile(src, dst): # Macintosh, Unix. if isinstance(src, os.DirEntry) and hasattr(os.path, 'samestat'): try: return os.path.samestat(src.stat(), os.stat(dst)) except OSError: return False
 if hasattr(os.path, 'samefile'): try: return os.path.samefile(src, dst) except OSError: return False
 # All other platforms: check for same pathname. return (os.path.normcase(os.path.abspath(src)) == os.path.normcase(os.path.abspath(dst)))
def \_stat(fn): return fn.stat() if isinstance(fn, os.DirEntry) else os.stat(fn)
def \_islink(fn): return fn.is\_symlink() if isinstance(fn, os.DirEntry) else os.path.islink(fn)
def copyfile(src, dst, \*, follow\_symlinks=True): """Copy data from src to dst in the most efficient way possible.
 If follow\_symlinks is not set and src is a symbolic link, a new symlink will be created instead of copying the file it points to.
 """ sys.audit("shutil.copyfile", src, dst)
 if \_samefile(src, dst): raise SameFileError("{!r} and {!r} are the same file".format(src, dst))
 file\_size = 0 for i, fn in enumerate([src, dst]): try: st = \_stat(fn) except OSError: # File most likely does not exist pass else: # XXX What about other special files? (sockets, devices...) if stat.S\_ISFIFO(st.st\_mode): fn = fn.path if isinstance(fn, os.DirEntry) else fn raise SpecialFileError("`%s` is a named pipe" % fn) if \_WINDOWS and i == 0: file\_size = st.st\_size
 if not follow\_symlinks and \_islink(src): os.symlink(os.readlink(src), dst) else: with open(src, 'rb') as fsrc: try: with open(dst, 'wb') as fdst: # macOS if \_HAS\_FCOPYFILE: try: \_fastcopy\_fcopyfile(fsrc, fdst, posix.\_COPYFILE\_DATA) return dst except \_GiveupOnFastCopy: pass # Linux elif \_USE\_CP\_SENDFILE: try: \_fastcopy\_sendfile(fsrc, fdst) return dst except \_GiveupOnFastCopy: pass # Windows, see: # https://github.com/python/cpython/pull/7160#discussion\_r195405230 elif \_WINDOWS and file\_size > 0: \_copyfileobj\_readinto(fsrc, fdst, min(file\_size, COPY\_BUFSIZE)) return dst
 copyfileobj(fsrc, fdst)
 # Issue 43219, raise a less confusing exception except IsADirectoryError as e: if not os.path.exists(dst): raise FileNotFoundError(f'Directory does not exist: {dst}') from e else: raise
 return dst
def copymode(src, dst, \*, follow\_symlinks=True): """Copy mode bits from src to dst.
 If follow\_symlinks is not set, symlinks aren't followed if and only if both `src` and `dst` are symlinks. If `lchmod` isn't available (e.g. Linux) this method does nothing.
 """ sys.audit("shutil.copymode", src, dst)
 if not follow\_symlinks and \_islink(src) and os.path.islink(dst): if hasattr(os, 'lchmod'): stat\_func, chmod\_func = os.lstat, os.lchmod else: return else: stat\_func, chmod\_func = \_stat, os.chmod
 st = stat\_func(src) chmod\_func(dst, stat.S\_IMODE(st.st\_mode))
if hasattr(os, 'listxattr'): def \_copyxattr(src, dst, \*, follow\_symlinks=True): """Copy extended filesystem attributes from `src` to `dst`.
 Overwrite existing attributes.
 If `follow\_symlinks` is false, symlinks won't be followed.
 """
 try: names = os.listxattr(src, follow\_symlinks=follow\_symlinks) except OSError as e: if e.errno not in (errno.ENOTSUP, errno.ENODATA, errno.EINVAL): raise return for name in names: try: value = os.getxattr(src, name, follow\_symlinks=follow\_symlinks) os.setxattr(dst, name, value, follow\_symlinks=follow\_symlinks) except OSError as e: if e.errno not in (errno.EPERM, errno.ENOTSUP, errno.ENODATA, errno.EINVAL, errno.EACCES): raiseelse: def \_copyxattr(\*args, \*\*kwargs): pass
def copystat(src, dst, \*, follow\_symlinks=True): """Copy file metadata
 Copy the permission bits, last access time, last modification time, and flags from `src` to `dst`. On Linux, copystat() also copies the "extended attributes" where possible. The file contents, owner, and group are unaffected. `src` and `dst` are path-like objects or path names given as strings.
 If the optional flag `follow\_symlinks` is not set, symlinks aren't followed if and only if both `src` and `dst` are symlinks. """ sys.audit("shutil.copystat", src, dst)
 def \_nop(\*args, ns=None, follow\_symlinks=None): pass
 # follow symlinks (aka don't not follow symlinks) follow = follow\_symlinks or not (\_islink(src) and os.path.islink(dst)) if follow: # use the real function if it exists def lookup(name): return getattr(os, name, \_nop) else: # use the real function only if it exists # \*and\* it supports follow\_symlinks def lookup(name): fn = getattr(os, name, \_nop) if fn in os.supports\_follow\_symlinks: return fn return \_nop
 if isinstance(src, os.DirEntry): st = src.stat(follow\_symlinks=follow) else: st = lookup("stat")(src, follow\_symlinks=follow) mode = stat.S\_IMODE(st.st\_mode) lookup("utime")(dst, ns=(st.st\_atime\_ns, st.st\_mtime\_ns), follow\_symlinks=follow) # We must copy extended attributes before the file is (potentially) # chmod()'ed read-only, otherwise setxattr() will error with -EACCES. \_copyxattr(src, dst, follow\_symlinks=follow) try: lookup("chmod")(dst, mode, follow\_symlinks=follow) except NotImplementedError: # if we got a NotImplementedError, it's because # \* follow\_symlinks=False, # \* lchown() is unavailable, and # \* either # \* fchownat() is unavailable or # \* fchownat() doesn't implement AT\_SYMLINK\_NOFOLLOW. # (it returned ENOSUP.) # therefore we're out of options--we simply cannot chown the # symlink. give up, suppress the error. # (which is what shutil always did in this circumstance.) pass if hasattr(st, 'st\_flags'): try: lookup("chflags")(dst, st.st\_flags, follow\_symlinks=follow) except OSError as why: for err in 'EOPNOTSUPP', 'ENOTSUP': if hasattr(errno, err) and why.errno == getattr(errno, err): break else: raise
def copy(src, dst, \*, follow\_symlinks=True): """Copy data and mode bits ("cp src dst"). Return the file's destination.
 The destination may be a directory.
 If follow\_symlinks is false, symlinks won't be followed. This resembles GNU's "cp -P src dst".
 If source and destination are the same file, a SameFileError will be raised.
 """ if os.path.isdir(dst): dst = os.path.join(dst, os.path.basename(src)) copyfile(src, dst, follow\_symlinks=follow\_symlinks) copymode(src, dst, follow\_symlinks=follow\_symlinks) return dst
def copy2(src, dst, \*, follow\_symlinks=True): """Copy data and metadata. Return the file's destination.
 Metadata is copied with copystat(). Please see the copystat function for more information.
 The destination may be a directory.
 If follow\_symlinks is false, symlinks won't be followed. This resembles GNU's "cp -P src dst". """ if os.path.isdir(dst): dst = os.path.join(dst, os.path.basename(src))
 if hasattr(\_winapi, "CopyFile2"): src\_ = os.fsdecode(src) dst\_ = os.fsdecode(dst) flags = \_winapi.COPY\_FILE\_ALLOW\_DECRYPTED\_DESTINATION # for compat if not follow\_symlinks: flags |= \_winapi.COPY\_FILE\_COPY\_SYMLINK try: \_winapi.CopyFile2(src\_, dst\_, flags) return dst except OSError as exc: if (exc.winerror == \_winapi.ERROR\_PRIVILEGE\_NOT\_HELD and not follow\_symlinks): # Likely encountered a symlink we aren't allowed to create. # Fall back on the old code pass elif exc.winerror == \_winapi.ERROR\_ACCESS\_DENIED: # Possibly encountered a hidden or readonly file we can't # overwrite. Fall back on old code pass else: raise
 copyfile(src, dst, follow\_symlinks=follow\_symlinks) copystat(src, dst, follow\_symlinks=follow\_symlinks) return dst
def ignore\_patterns(\*patterns): """Function that can be used as copytree() ignore parameter.
 Patterns is a sequence of glob-style patterns that are used to exclude files""" def \_ignore\_patterns(path, names): ignored\_names = [] for pattern in patterns: ignored\_names.extend(fnmatch.filter(names, pattern)) return set(ignored\_names) return \_ignore\_patterns
def \_copytree(entries, src, dst, symlinks, ignore, copy\_function, ignore\_dangling\_symlinks, dirs\_exist\_ok=False): if ignore is not None: ignored\_names = ignore(os.fspath(src), [x.name for x in entries]) else: ignored\_names = set()
 os.makedirs(dst, exist\_ok=dirs\_exist\_ok) errors = [] use\_srcentry = copy\_function is copy2 or copy\_function is copy
 for srcentry in entries: if srcentry.name in ignored\_names: continue srcname = os.path.join(src, srcentry.name) dstname = os.path.join(dst, srcentry.name) srcobj = srcentry if use\_srcentry else srcname try: is\_symlink = srcentry.is\_symlink() if is\_symlink and os.name == 'nt': # Special check for directory junctions, which appear as # symlinks but we want to recurse. lstat = srcentry.stat(follow\_symlinks=False) if lstat.st\_reparse\_tag == stat.IO\_REPARSE\_TAG\_MOUNT\_POINT: is\_symlink = False if is\_symlink: linkto = os.readlink(srcname) if symlinks: # We can't just leave it to `copy\_function` because legacy # code with a custom `copy\_function` may rely on copytree # doing the right thing. os.symlink(linkto, dstname) copystat(srcobj, dstname, follow\_symlinks=not symlinks) else: # ignore dangling symlink if the flag is on if not os.path.exists(linkto) and ignore\_dangling\_symlinks: continue # otherwise let the copy occur. copy2 will raise an error if srcentry.is\_dir(): copytree(srcobj, dstname, symlinks, ignore, copy\_function, ignore\_dangling\_symlinks, dirs\_exist\_ok) else: copy\_function(srcobj, dstname) elif srcentry.is\_dir(): copytree(srcobj, dstname, symlinks, ignore, copy\_function, ignore\_dangling\_symlinks, dirs\_exist\_ok) else: # Will raise a SpecialFileError for unsupported file types copy\_function(srcobj, dstname) # catch the Error from the recursive copytree so that we can # continue with other files except Error as err: errors.extend(err.args[0]) except OSError as why: errors.append((srcname, dstname, str(why))) try: copystat(src, dst) except OSError as why: # Copying file access times may fail on Windows if getattr(why, 'winerror', None) is None: errors.append((src, dst, str(why))) if errors: raise Error(errors) return dst
def copytree(src, dst, symlinks=False, ignore=None, copy\_function=copy2, ignore\_dangling\_symlinks=False, dirs\_exist\_ok=False): """Recursively copy a directory tree and return the destination directory.
 If exception(s) occur, an Error is raised with a list of reasons.
 If the optional symlinks flag is true, symbolic links in the source tree result in symbolic links in the destination tree; if it is false, the contents of the files pointed to by symbolic links are copied. If the file pointed by the symlink doesn't exist, an exception will be added in the list of errors raised in an Error exception at the end of the copy process.
 You can set the optional ignore\_dangling\_symlinks flag to true if you want to silence this exception. Notice that this has no effect on platforms that don't support os.symlink.
 The optional ignore argument is a callable. If given, it is called with the `src` parameter, which is the directory being visited by copytree(), and `names` which is the list of `src` contents, as returned by os.listdir():
 callable(src, names) -> ignored\_names
 Since copytree() is called recursively, the callable will be called once for each directory that is copied. It returns a list of names relative to the `src` directory that should not be copied.
 The optional copy\_function argument is a callable that will be used to copy each file. It will be called with the source path and the destination path as arguments. By default, copy2() is used, but any function that supports the same signature (like copy()) can be used.
 If dirs\_exist\_ok is false (the default) and `dst` already exists, a `FileExistsError` is raised. If `dirs\_exist\_ok` is true, the copying operation will continue if it encounters existing directories, and files within the `dst` tree will be overwritten by corresponding files from the `src` tree. """ sys.audit("shutil.copytree", src, dst) with os.scandir(src) as itr: entries = list(itr) return \_copytree(entries=entries, src=src, dst=dst, symlinks=symlinks, ignore=ignore, copy\_function=copy\_function, ignore\_dangling\_symlinks=ignore\_dangling\_symlinks, dirs\_exist\_ok=dirs\_exist\_ok)
if hasattr(os.stat\_result, 'st\_file\_attributes'): def \_rmtree\_islink(path): try: st = os.lstat(path) return (stat.S\_ISLNK(st.st\_mode) or (st.st\_file\_attributes & stat.FILE\_ATTRIBUTE\_REPARSE\_POINT and st.st\_reparse\_tag == stat.IO\_REPARSE\_TAG\_MOUNT\_POINT)) except OSError: return Falseelse: def \_rmtree\_islink(path): return os.path.islink(path)
# version vulnerable to race conditionsdef \_rmtree\_unsafe(path, onexc): try: with os.scandir(path) as scandir\_it: entries = list(scandir\_it) except OSError as err: onexc(os.scandir, path, err) entries = [] for entry in entries: fullname = entry.path try: is\_dir = entry.is\_dir(follow\_symlinks=False) except OSError: is\_dir = False
 if is\_dir and not entry.is\_junction(): try: if entry.is\_symlink(): # This can only happen if someone replaces # a directory with a symlink after the call to # os.scandir or entry.is\_dir above. raise OSError("Cannot call rmtree on a symbolic link") except OSError as err: onexc(os.path.islink, fullname, err) continue \_rmtree\_unsafe(fullname, onexc) else: try: os.unlink(fullname) except OSError as err: onexc(os.unlink, fullname, err) try: os.rmdir(path) except OSError as err: onexc(os.rmdir, path, err)
# Version using fd-based APIs to protect against racesdef \_rmtree\_safe\_fd(topfd, path, onexc): try: with os.scandir(topfd) as scandir\_it: entries = list(scandir\_it) except OSError as err: err.filename = path onexc(os.scandir, path, err) return for entry in entries: fullname = os.path.join(path, entry.name) try: is\_dir = entry.is\_dir(follow\_symlinks=False) except OSError: is\_dir = False else: if is\_dir: try: orig\_st = entry.stat(follow\_symlinks=False) is\_dir = stat.S\_ISDIR(orig\_st.st\_mode) except OSError as err: onexc(os.lstat, fullname, err) continue if is\_dir: try: dirfd = os.open(entry.name, os.O\_RDONLY, dir\_fd=topfd) dirfd\_closed = False except OSError as err: onexc(os.open, fullname, err) else: try: if os.path.samestat(orig\_st, os.fstat(dirfd)): \_rmtree\_safe\_fd(dirfd, fullname, onexc) try: os.close(dirfd) dirfd\_closed = True os.rmdir(entry.name, dir\_fd=topfd) except OSError as err: onexc(os.rmdir, fullname, err) else: try: # This can only happen if someone replaces # a directory with a symlink after the call to # os.scandir or stat.S\_ISDIR above. raise OSError("Cannot call rmtree on a symbolic " "link") except OSError as err: onexc(os.path.islink, fullname, err) finally: if not dirfd\_closed: os.close(dirfd) else: try: os.unlink(entry.name, dir\_fd=topfd) except OSError as err: onexc(os.unlink, fullname, err)
\_use\_fd\_functions = ({os.open, os.stat, os.unlink, os.rmdir} <= os.supports\_dir\_fd and os.scandir in os.supports\_fd and os.stat in os.supports\_follow\_symlinks)
def rmtree(path, ignore\_errors=False, onerror=None, \*, onexc=None, dir\_fd=None): """Recursively delete a directory tree.
 If dir\_fd is not None, it should be a file descriptor open to a directory; path will then be relative to that directory. dir\_fd may not be implemented on your platform. If it is unavailable, using it will raise a NotImplementedError.
 If ignore\_errors is set, errors are ignored; otherwise, if onexc or onerror is set, it is called to handle the error with arguments (func, path, exc\_info) where func is platform and implementation dependent; path is the argument to that function that caused it to fail; and the value of exc\_info describes the exception. For onexc it is the exception instance, and for onerror it is a tuple as returned by sys.exc\_info(). If ignore\_errors is false and both onexc and onerror are None, the exception is reraised.
 onerror is deprecated and only remains for backwards compatibility. If both onerror and onexc are set, onerror is ignored and onexc is used. """
 if onerror is not None: warnings.warn("onerror argument is deprecated, use onexc instead", DeprecationWarning, stacklevel=2)
 sys.audit("shutil.rmtree", path, dir\_fd) if ignore\_errors: def onexc(\*args): pass elif onerror is None and onexc is None: def onexc(\*args): raise elif onexc is None: if onerror is None: def onexc(\*args): raise else: # delegate to onerror def onexc(\*args): func, path, exc = args if exc is None: exc\_info = None, None, None else: exc\_info = type(exc), exc, exc.\_\_traceback\_\_ return onerror(func, path, exc\_info)
 if \_use\_fd\_functions: # While the unsafe rmtree works fine on bytes, the fd based does not. if isinstance(path, bytes): path = os.fsdecode(path) # Note: To guard against symlink races, we use the standard # lstat()/open()/fstat() trick. try: orig\_st = os.lstat(path, dir\_fd=dir\_fd) except Exception as err: onexc(os.lstat, path, err) return try: fd = os.open(path, os.O\_RDONLY, dir\_fd=dir\_fd) fd\_closed = False except Exception as err: onexc(os.open, path, err) return try: if os.path.samestat(orig\_st, os.fstat(fd)): \_rmtree\_safe\_fd(fd, path, onexc) try: os.close(fd) fd\_closed = True os.rmdir(path, dir\_fd=dir\_fd) except OSError as err: onexc(os.rmdir, path, err) else: try: # symlinks to directories are forbidden, see bug #1669 raise OSError("Cannot call rmtree on a symbolic link") except OSError as err: onexc(os.path.islink, path, err) finally: if not fd\_closed: os.close(fd) else: if dir\_fd is not None: raise NotImplementedError("dir\_fd unavailable on this platform") try: if \_rmtree\_islink(path): # symlinks to directories are forbidden, see bug #1669 raise OSError("Cannot call rmtree on a symbolic link") except OSError as err: onexc(os.path.islink, path, err) # can't continue even if onexc hook returns return return \_rmtree\_unsafe(path, onexc)
# Allow introspection of whether or not the hardening against symlink# attacks is supported on the current platformrmtree.avoids\_symlink\_attacks = \_use\_fd\_functions
def \_basename(path): """A basename() variant which first strips the trailing slash, if present. Thus we always get the last component of the path, even for directories.
 path: Union[PathLike, str]
 e.g. >>> os.path.basename('/bar/foo') 'foo' >>> os.path.basename('/bar/foo/') '' >>> \_basename('/bar/foo/') 'foo' """ path = os.fspath(path) sep = os.path.sep + (os.path.altsep or '') return os.path.basename(path.rstrip(sep))
def move(src, dst, copy\_function=copy2): """Recursively move a file or directory to another location. This is similar to the Unix "mv" command. Return the file or directory's destination.
 If the destination is a directory or a symlink to a directory, the source is moved inside the directory. The destination path must not already exist.
 If the destination already exists but is not a directory, it may be overwritten depending on os.rename() semantics.
 If the destination is on our current filesystem, then rename() is used. Otherwise, src is copied to the destination and then removed. Symlinks are recreated under the new name if os.rename() fails because of cross filesystem renames.
 The optional `copy\_function` argument is a callable that will be used to copy the source or it will be delegated to `copytree`. By default, copy2() is used, but any function that supports the same signature (like copy()) can be used.
 A lot more could be done here... A look at a mv.c shows a lot of the issues this implementation glosses over.
 """ sys.audit("shutil.move", src, dst) real\_dst = dst if os.path.isdir(dst): if \_samefile(src, dst): # We might be on a case insensitive filesystem, # perform the rename anyway. os.rename(src, dst) return
 # Using \_basename instead of os.path.basename is important, as we must # ignore any trailing slash to avoid the basename returning '' real\_dst = os.path.join(dst, \_basename(src))
 if os.path.exists(real\_dst): raise Error("Destination path '%s' already exists" % real\_dst) try: os.rename(src, real\_dst) except OSError: if os.path.islink(src): linkto = os.readlink(src) os.symlink(linkto, real\_dst) os.unlink(src) elif os.path.isdir(src): if \_destinsrc(src, dst): raise Error("Cannot move a directory '%s' into itself" " '%s'." % (src, dst)) if (\_is\_immutable(src) or (not os.access(src, os.W\_OK) and os.listdir(src) and sys.platform == 'darwin')): raise PermissionError("Cannot move the non-empty directory " "'%s': Lacking write permission to '%s'." % (src, src)) copytree(src, real\_dst, copy\_function=copy\_function, symlinks=True) rmtree(src) else: copy\_function(src, real\_dst) os.unlink(src) return real\_dst
def \_destinsrc(src, dst): src = os.path.abspath(src) dst = os.path.abspath(dst) if not src.endswith(os.path.sep): src += os.path.sep if not dst.endswith(os.path.sep): dst += os.path.sep return dst.startswith(src)
def \_is\_immutable(src): st = \_stat(src) immutable\_states = [stat.UF\_IMMUTABLE, stat.SF\_IMMUTABLE] return hasattr(st, 'st\_flags') and st.st\_flags in immutable\_states
def \_get\_gid(name): """Returns a gid, given a group name.""" if name is None: return None
 try: from grp import getgrnam except ImportError: return None
 try: result = getgrnam(name) except KeyError: result = None if result is not None: return result[2] return None
def \_get\_uid(name): """Returns an uid, given a user name.""" if name is None: return None
 try: from pwd import getpwnam except ImportError: return None
 try: result = getpwnam(name) except KeyError: result = None if result is not None: return result[2] return None
def \_make\_tarball(base\_name, base\_dir, compress="gzip", verbose=0, dry\_run=0, owner=None, group=None, logger=None, root\_dir=None): """Create a (possibly compressed) tar file from all the files under 'base\_dir'.
 'compress' must be "gzip" (the default), "bzip2", "xz", or None.
 'owner' and 'group' can be used to define an owner and a group for the archive that is being built. If not provided, the current owner and group will be used.
 The output tar file will be named 'base\_name' + ".tar", possibly plus the appropriate compression extension (".gz", ".bz2", or ".xz").
 Returns the output filename. """ if compress is None: tar\_compression = '' elif \_ZLIB\_SUPPORTED and compress == 'gzip': tar\_compression = 'gz' elif \_BZ2\_SUPPORTED and compress == 'bzip2': tar\_compression = 'bz2' elif \_LZMA\_SUPPORTED and compress == 'xz': tar\_compression = 'xz' else: raise ValueError("bad value for 'compress', or compression format not " "supported : {0}".format(compress))
 import tarfile # late import for breaking circular dependency
 compress\_ext = '.' + tar\_compression if compress else '' archive\_name = base\_name + '.tar' + compress\_ext archive\_dir = os.path.dirname(archive\_name)
 if archive\_dir and not os.path.exists(archive\_dir): if logger is not None: logger.info("creating %s", archive\_dir) if not dry\_run: os.makedirs(archive\_dir)
 # creating the tarball if logger is not None: logger.info('Creating tar archive')
 uid = \_get\_uid(owner) gid = \_get\_gid(group)
 def \_set\_uid\_gid(tarinfo): if gid is not None: tarinfo.gid = gid tarinfo.gname = group if uid is not None: tarinfo.uid = uid tarinfo.uname = owner return tarinfo
 if not dry\_run: tar = tarfile.open(archive\_name, 'w|%s' % tar\_compression) arcname = base\_dir if root\_dir is not None: base\_dir = os.path.join(root\_dir, base\_dir) try: tar.add(base\_dir, arcname, filter=\_set\_uid\_gid) finally: tar.close()[View remainder of file in raw view](https://github.com/python/cpython/raw/0fb18b02c8ad56299d6a2910be0bab8ad601ef24/Lib/shutil.py)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from lists.fedoraproject.org_589f87e1_20250114_205455.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7.mbox.gz?message=2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7 "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7/#2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7)

# [SECURITY] Fedora 38 Update: rdiff-backup-2.2.6-3.fc38

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

19 Dec
2023

19 Dec
'23

2:19 a.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2023-0fb94a1209
2023-12-19 02:18:31.106883
--------------------------------------------------------------------------------

Name : rdiff-backup
Product : Fedora 38
Version : 2.2.6
Release : 3.fc38
URL : <https://rdiff-backup.net/>
Summary : Convenient and transparent local/remote incremental mirror/backup
Description :
rdiff-backup is a script, written in Python, that backs up one
directory to another and is intended to be run periodically (nightly
from cron for instance). The target directory ends up a copy of the
source directory, but extra reverse diffs are stored in the target
directory, so you can still recover files lost some time ago. The idea
is to combine the best features of a mirror and an incremental
backup. rdiff-backup can also operate in a bandwidth efficient manner
over a pipe, like rsync. Thus you can use rdiff-backup and ssh to
securely back a hard drive up to a remote location, and only the
differences from the previous backup will be transmitted.

--------------------------------------------------------------------------------
Update Information:

Rebuild for pyinstall CVE-2023-49797 BZ2253844
--------------------------------------------------------------------------------
ChangeLog:

\* Sun Dec 10 2023 Frank Crawford frank@crawford.emu.id.au - 2.2.6-3
- Rebuild for pyinstall CVE-2023-49797 BZ2253844
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2253843 - CVE-2023-49797 pyinstaller: unauthorized deletion of files
<https://bugzilla.redhat.com/show_bug.cgi?id=2253843>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2023-0fb94a1209' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7/#2K2XIQLEMZIKUQUOWNDYWTEWYQTKMAN7)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from lists.fedoraproject.org_43dcd95e_20250114_205456.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7.mbox.gz?message=ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7 "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7/#ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7)

# [SECURITY] Fedora 39 Update: rdiff-backup-2.2.6-3.fc39

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

19 Dec
2023

19 Dec
'23

1:12 a.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2023-3909a0ab0e
2023-12-19 01:11:13.012576
--------------------------------------------------------------------------------

Name : rdiff-backup
Product : Fedora 39
Version : 2.2.6
Release : 3.fc39
URL : <https://rdiff-backup.net/>
Summary : Convenient and transparent local/remote incremental mirror/backup
Description :
rdiff-backup is a script, written in Python, that backs up one
directory to another and is intended to be run periodically (nightly
from cron for instance). The target directory ends up a copy of the
source directory, but extra reverse diffs are stored in the target
directory, so you can still recover files lost some time ago. The idea
is to combine the best features of a mirror and an incremental
backup. rdiff-backup can also operate in a bandwidth efficient manner
over a pipe, like rsync. Thus you can use rdiff-backup and ssh to
securely back a hard drive up to a remote location, and only the
differences from the previous backup will be transmitted.

--------------------------------------------------------------------------------
Update Information:

Rebuild for pyinstall CVE-2023-49797 BZ2253844
--------------------------------------------------------------------------------
ChangeLog:

\* Sun Dec 10 2023 Frank Crawford frank@crawford.emu.id.au - 2.2.6-3
- Rebuild for pyinstall CVE-2023-49797 BZ2253844
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2253843 - CVE-2023-49797 pyinstaller: unauthorized deletion of files
<https://bugzilla.redhat.com/show_bug.cgi?id=2253843>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2023-3909a0ab0e' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7/#ISRWT34FAF23PUOLVZ7RVWBZMWPDR5U7)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from github.com_d57f5fb2_20250114_205448.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpyinstaller%2Fpyinstaller%2Fsecurity%2Fadvisories%2FGHSA-9w2p-rh8c-v9g5)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpyinstaller%2Fpyinstaller%2Fsecurity%2Fadvisories%2FGHSA-9w2p-rh8c-v9g5)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=pyinstaller%2Fpyinstaller)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[pyinstaller](/pyinstaller)
/
**[pyinstaller](/pyinstaller/pyinstaller)**
Public

* [Notifications](/login?return_to=%2Fpyinstaller%2Fpyinstaller) You must be signed in to change notification settings
* [Fork
  2k](/login?return_to=%2Fpyinstaller%2Fpyinstaller)
* [Star
   12.1k](/login?return_to=%2Fpyinstaller%2Fpyinstaller)

* [Code](/pyinstaller/pyinstaller)
* [Issues
  266](/pyinstaller/pyinstaller/issues)
* [Pull requests
  16](/pyinstaller/pyinstaller/pulls)
* [Discussions](/pyinstaller/pyinstaller/discussions)
* [Actions](/pyinstaller/pyinstaller/actions)
* [Projects
  0](/pyinstaller/pyinstaller/projects)
* [Wiki](/pyinstaller/pyinstaller/wiki)
* [Security](/pyinstaller/pyinstaller/security)
* [Insights](/pyinstaller/pyinstaller/pulse)

Additional navigation options

* [Code](/pyinstaller/pyinstaller)
* [Issues](/pyinstaller/pyinstaller/issues)
* [Pull requests](/pyinstaller/pyinstaller/pulls)
* [Discussions](/pyinstaller/pyinstaller/discussions)
* [Actions](/pyinstaller/pyinstaller/actions)
* [Projects](/pyinstaller/pyinstaller/projects)
* [Wiki](/pyinstaller/pyinstaller/wiki)
* [Security](/pyinstaller/pyinstaller/security)
* [Insights](/pyinstaller/pyinstaller/pulse)

# Local Privilege Escalation in Windows

High

[bwoodsend](/bwoodsend)
published
GHSA-9w2p-rh8c-v9g5
Dec 9, 2023

## Package

pip

pyinstaller
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

<5.13.1

## Patched versions

5.13.1

## Description

### Impact

A PyInstaller built application, elevated as a privileged process, may be tricked by an unprivileged attacker into deleting files the unprivileged user does not otherwise have access to.

A user is affected if **all** the following are satisfied:

* The user runs an application containing either `matplotlib` or `win32com`.
* The application is ran as administrator (or at least a user with higher privileges than the attacker).
* The user's temporary directory is not locked to that specific user (most likely due to `TMP`/`TEMP` environment variables pointing to an unprotected, arbitrary, non default location).
* Either:
  + The attacker is able to very carefully time the replacement of a temporary file with a symlink. This switch must occur exactly between [`shutil.rmtree()`'s builtin symlink check](https://github.com/python/cpython/blob/0fb18b02c8ad56299d6a2910be0bab8ad601ef24/Lib/shutil.py#L623) and the deletion itself
  + The application was built with Python 3.7.x or earlier which has no protection against Directory Junctions links

### Patches

The vulnerability has been addressed in [#7827](https://github.com/pyinstaller/pyinstaller/pull/7827) which corresponds to `pyinstaller >= 5.13.1`

### Workarounds

*Is there a way for users to fix or remediate the vulnerability without upgrading?*

No workaround, although the attack complexity becomes much higher if the application is built with Python >= 3.8.0.

### Severity

High

8.8

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Local

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Changed

Confidentiality
High

Integrity
High

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:C/C:H/I:H/A:H

### CVE ID

CVE-2023-49797

### Weaknesses

[CWE-379](/advisories?query=cwe%3A379)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_9e27f089_20250114_205447.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpyinstaller%2Fpyinstaller%2Fpull%2F7827)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpyinstaller%2Fpyinstaller%2Fpull%2F7827)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=pyinstaller%2Fpyinstaller)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[pyinstaller](/pyinstaller)
/
**[pyinstaller](/pyinstaller/pyinstaller)**
Public

* [Notifications](/login?return_to=%2Fpyinstaller%2Fpyinstaller) You must be signed in to change notification settings
* [Fork
  2k](/login?return_to=%2Fpyinstaller%2Fpyinstaller)
* [Star
   12.1k](/login?return_to=%2Fpyinstaller%2Fpyinstaller)

* [Code](/pyinstaller/pyinstaller)
* [Issues
  266](/pyinstaller/pyinstaller/issues)
* [Pull requests
  16](/pyinstaller/pyinstaller/pulls)
* [Discussions](/pyinstaller/pyinstaller/discussions)
* [Actions](/pyinstaller/pyinstaller/actions)
* [Projects
  0](/pyinstaller/pyinstaller/projects)
* [Wiki](/pyinstaller/pyinstaller/wiki)
* [Security](/pyinstaller/pyinstaller/security)
* [Insights](/pyinstaller/pyinstaller/pulse)

Additional navigation options

* [Code](/pyinstaller/pyinstaller)
* [Issues](/pyinstaller/pyinstaller/issues)
* [Pull requests](/pyinstaller/pyinstaller/pulls)
* [Discussions](/pyinstaller/pyinstaller/discussions)
* [Actions](/pyinstaller/pyinstaller/actions)
* [Projects](/pyinstaller/pyinstaller/projects)
* [Wiki](/pyinstaller/pyinstaller/wiki)
* [Security](/pyinstaller/pyinstaller/security)
* [Insights](/pyinstaller/pyinstaller/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fpyinstaller%2Fpyinstaller%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fpyinstaller%2Fpyinstaller%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# rthooks: secure temp directories used by matplotlib and win32com rthooks #7827

 Merged

[rokm](/rokm)
merged 1 commit into
[pyinstaller:develop](/pyinstaller/pyinstaller/tree/develop "pyinstaller/pyinstaller:develop")
from
[rokm:rthooks-secure-mkdtemp](/rokm/pyinstaller/tree/rthooks-secure-mkdtemp "rokm/pyinstaller:rthooks-secure-mkdtemp")

Aug 7, 2023

 Merged

# [rthooks: secure temp directories used by matplotlib and win32com rthooks](#top) #7827

[rokm](/rokm)
merged 1 commit into
[pyinstaller:develop](/pyinstaller/pyinstaller/tree/develop "pyinstaller/pyinstaller:develop")
from
[rokm:rthooks-secure-mkdtemp](/rokm/pyinstaller/tree/rthooks-secure-mkdtemp "rokm/pyinstaller:rthooks-secure-mkdtemp")

Aug 7, 2023

[Conversation
0](/pyinstaller/pyinstaller/pull/7827)
[Commits
1](/pyinstaller/pyinstaller/pull/7827/commits)
[Checks
0](/pyinstaller/pyinstaller/pull/7827/checks)
[Files changed](/pyinstaller/pyinstaller/pull/7827/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![rokm](https://avatars.githubusercontent.com/u/5579125?s=60&v=4)](/rokm)

Copy link

Member

### @rokm **[rokm](/rokm)** commented [Aug 6, 2023](#issue-1838218221) • edited Loading

The run-time hooks that relocate the package's configuration/cache directory into isolated temporary directory create this directory using the `tempfile.mkdtemp` function. According to its documentation, the function creates the temporary directory "in the most secure manner possible", and the created directory should be ["readable, writable, and searchable only by the creating user ID"](https://docs.python.org/3/library/tempfile.html#tempfile.mkdtemp).

However, this does not apply to Windows, where the 0o700 POSIX permissions mask passed to the underyling `os.mkdir` call has no effect. Consequently, the access to the created temporary directory is in fact gated only by the access to the parent directory. So as long as `TEMP` and `TMP` point to `%LOCALAPPDATA%\Temp`, the created temporary directories are typically inaccessible to other users, who do not have access to the user's home directory. On the other hand, if the temporary directory base is relocated to a system-wide location (e.g., `c:\temp`), the temporary directories created by the run-time hooks might become accessible to other users as well. A malicious user with local access might thus modify the contents of the temporary directory, interfering with the application. If the application is running in privileged mode and developer mode is enabled on the system, they might also attempt a symlink attack due to lack of hardened mode for `shutil.rmtree` (used for clean up) on Windows.

Therefore, we replace the use of `tempfile.mkdtemp` with custom function that uses original `mkdtemp` on POSIX and provides a Windows-specific implementation that secures the access to created directory via security descriptor passed to the `CreateDirectoryW` call. This is a `ctypes`-based port of [the code that we already have in bootloader for mitigating the same issue with temporary directory in onefile builds](https://github.com/pyinstaller/pyinstaller/blob/3e7d4ccad601a85823ceb6d996973ccf0b93cc0b/bootloader/src/pyi_win32_utils.c#L382-L492).

In order to share the implementation among the two run-time hooks that require it, the code is provided by a new `_pyi_rth_utils` PyInstaller "fake" package, which is bundled with the frozen application on demand (i.e., if it is referenced in any of collected run-time hooks).

Sorry, something went wrong.

All reactions

[![@rokm](https://avatars.githubusercontent.com/u/5579125?s=40&v=4)](/rokm)

`[rthooks: secure temp directories used by matplotlib and win32com rthooks](/pyinstaller/pyinstaller/pull/7827/commits/e8996b6e6ac4e93acdc2fd58ad1957874fa1972a "rthooks: secure temp directories used by matplotlib and win32com rthooks

The run-time hooks that relocate the package's configuration/cache
directory into isolated temporary directory create this directory using
the `tempfile.mkdtemp` function. According to its documentation, the
function creates the temporary directory \"in the most secure manner
possible\", and the created directory should be \"readable, writable, and
searchable only by the creating user ID\".

However, this does not apply to Windows, where the 0o700 POSIX
permissions mask passed to the underyling `os.mkdir` call has no effect.
Consequently, the access to the created temporary directory is in fact
gated only by the access to the parent directory. So as long as `TEMP`
and `TMP` point to `%LOCALAPPDATA%\Temp`, the created temporary
directories are typically inaccessible to other users, who do not have
access to the user's home directory. On the other hand, if the temporary
directory base is relocated to a system-wide location (e.g., `c:\temp`),
the temporary directories created by the run-time hooks might become
accessible to other users as well. A malicious user with local access
might thus modify the contents of the temporary directory, interfering
with the application. If the application is running in privileged mode
and developer mode is enabled on the system, they might also attempt
a symlink attack due to lack of hardened mode for `shutil.rmtree`
(used for clean up) on Windows.

Therefore, we replace the use of `tempfile.mkdtemp` with custom function
that uses original `mkdtemp` on POSIX and provides a Windows-specific
implementation that secures the access to created directory via security
descriptor passed to the `CreateDirectoryW` call. This is a
`ctypes`-based port of the code that we already have in bootloader for
mitigating the same issue with temporary directory in onefile builds.

In order to share the implementation among the two run-time hooks that
require it, the code is provided by a new `_pyi_rth_utils` PyInstaller
\"fake\" package, which is bundled with the frozen application on demand
(i.e., if it is referenced in any of collected run-time hooks).")`
 …

`[e8996b6](/pyinstaller/pyinstaller/pull/7827/commits/e8996b6e6ac4e93acdc2fd58ad1957874fa1972a)`

```
The run-time hooks that relocate the package's configuration/cache
directory into isolated temporary directory create this directory using
the `tempfile.mkdtemp` function. According to its documentation, the
function creates the temporary directory "in the most secure manner
possible", and the created directory should be "readable, writable, and
searchable only by the creating user ID".

However, this does not apply to Windows, where the 0o700 POSIX
permissions mask passed to the underyling `os.mkdir` call has no effect.
Consequently, the access to the created temporary directory is in fact
gated only by the access to the parent directory. So as long as `TEMP`
and `TMP` point to `%LOCALAPPDATA%\Temp`, the created temporary
directories are typically inaccessible to other users, who do not have
access to the user's home directory. On the other hand, if the temporary
directory base is relocated to a system-wide location (e.g., `c:\temp`),
the temporary directories created by the run-time hooks might become
accessible to other users as well. A malicious user with local access
might thus modify the contents of the temporary directory, interfering
with the application. If the application is running in privileged mode
and developer mode is enabled on the system, they might also attempt
a symlink attack due to lack of hardened mode for `shutil.rmtree`
(used for clean up) on Windows.

Therefore, we replace the use of `tempfile.mkdtemp` with custom function
that uses original `mkdtemp` on POSIX and provides a Windows-specific
implementation that secures the access to created directory via security
descriptor passed to the `CreateDirectoryW` call. This is a
`ctypes`-based port of the code that we already have in bootloader for
mitigating the same issue with temporary directory in onefile builds.

In order to share the implementation among the two run-time hooks that
require it, the code is provided by a new `_pyi_rth_utils` PyInstaller
"fake" package, which is bundled with the frozen application on demand
(i.e., if it is referenced in any of collected run-time hooks).
```

 [![@rokm](https://avatars.githubusercontent.com/u/5579125?s=40&v=4)](/rokm)
[rokm](/rokm)
marked this pull request as ready for review
[August 7, 2023 09:23](#event-10021642721)

 [![@rokm](https://avatars.githubusercontent.com/u/5579125?s=40&v=4)](/rokm)
[rokm](/rokm)
requested a review
from [bwoodsend](/bwoodsend)
[August 7, 2023 09:23](#event-10021645124)

[![bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=60&v=4)](/bwoodsend)

**[bwoodsend](/bwoodsend)**
approved these changes
[Aug 7, 2023](#pullrequestreview-1565141014)

 [View reviewed changes](/pyinstaller/pyinstaller/pull/7827/files/e8996b6e6ac4e93acdc2fd58ad1957874fa1972a)

[![@rokm](https://avatars.githubusercontent.com/u/5579125?s=40&v=4)](/rokm)
[rokm](/rokm)
merged commit [`5a53dc5`](/pyinstaller/pyinstaller/commit/5a53dc58295b26eb8af1f146df990a657bc916d1)
into
pyinstaller:develop

[Aug 7, 2023](https://github.com/pyinstaller/pyinstaller/pull/7827#event-10029431140)

 [![@rokm](https://avatars.githubusercontent.com/u/5579125?s=40&v=4)](/rokm)
[rokm](/rokm)
deleted the
rthooks-secure-mkdtemp

branch
[August 7, 2023 23:17](#event-10029431406)

[![@rokm](https://avatars.githubusercontent.com/u/5579125?s=40&v=4)](/rokm)
[rokm](/rokm)
mentioned this pull request
[Aug 28, 2023](#ref-pullrequest-1869395543)

[rthook utils: add missing argtypes annotations for ctypes-bound functions
#7895](/pyinstaller/pyinstaller/pull/7895)
 Merged

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
locked as **resolved** and limited conversation to collaborators
[Oct 7, 2023](#event-10581842877)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpyinstaller%2Fpyinstaller%2Fpull%2F7827).

Reviewers

[![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=40&v=4)](/bwoodsend) [bwoodsend](/bwoodsend)

bwoodsend approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@rokm](https://avatars.githubusercontent.com/u/5579125?s=52&v=4)](/rokm) [![@bwoodsend](https://avatars.githubusercontent.com/u/30940778?s=52&v=4)](/bwoodsend)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


