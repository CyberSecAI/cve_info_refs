=== Content from www.wordfence.com_fadfb8c5_20250114_195732.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Under Construction <= 3.96 - Cross-Site Request Forgery via admin\_action\_ucp\_dismiss\_notice

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Under Construction <= 3.96 - Cross-Site Request Forgery via admin\_action\_ucp\_dismiss\_notice

4.3

**Cross-Site Request Forgery (CSRF)**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N)

| CVE | [CVE-2023-0831](https://www.cve.org/CVERecord?id=CVE-2023-0831) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | February 10, 2023 |
| Last Updated | April 17, 2024 |
| Researchers | [Ram - Wordfence](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/ramuel-gall)  [Alex Thomas - Wordfence](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/alex-thomas) |

### Description

The Under Construction plugin for WordPress is vulnerable to Cross-Site Request Forgery in versions up to, and including, 3.96. This is due to missing or incorrect nonce validation on the dismiss\_notice function called via the admin\_action\_ucp\_dismiss\_notice action. This makes it possible for unauthenticated attackers to dismiss plugin notifications via a forged request granted they can trick a site administrator into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/under-construction-page/trunk/under-construction.php?rev=2848705#L901)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Funder-construction-page%2Funder-construction-396-cross-site-request-forgery-via-admin-action-ucp-dismiss-notice&t=Under%20Construction%20%3C%3D%203.96%20-%20Cross-Site%20Request%20Forgery%20via%20admin_action_ucp_dismiss_notice "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Funder-construction-page%2Funder-construction-396-cross-site-request-forgery-via-admin-action-ucp-dismiss-notice&text=Under%20Construction%20%3C%3D%203.96%20-%20Cross-Site%20Request%20Forgery%20via%20admin_action_ucp_dismiss_notice "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Funder-construction-page%2Funder-construction-396-cross-site-request-forgery-via-admin-action-ucp-dismiss-notice "LinkedIn")
Email

## Vulnerability Details for Under Construction

#### [Under Construction](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/under-construction-page)

| Software Type | Plugin |
| --- | --- |
| Software Slug | under-construction-page [(view on wordpress.org)](https://wordpress.org/plugins/under-construction-page) |
| Patched? | Yes |
| Remediation | Update to version 3.97, or a newer patched version |
| Affected Version | * <= 3.96 |
| Patched Version | * 3.97 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_d6e45a70_20250114_195731.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Funder-construction-page%2Ftrunk%2Funder-construction.php%3Frev%3D2848705)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/under-construction-page/trunk/under-construction.php?rev=2822205 "Revision 2822205")
* [Latest Revision](/browser/under-construction-page/trunk/under-construction.php)
* [Next Revision](/browser/under-construction-page/trunk/under-construction.php?rev=2863051 "Revision 2863051") →
* [Blame](/browser/under-construction-page/trunk/under-construction.php?annotate=blame&rev=2848705 "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/under-construction-page/trunk/under-construction.php?rev=2848705)

---

# [source:](/browser?rev=2848705&order=name "Go to repository root") [under-construction-page](/browser/under-construction-page?rev=2848705&order=name "View under-construction-page")/[trunk](/browser/under-construction-page/trunk?rev=2848705&order=name "View trunk")/[under-construction.php](/browser/under-construction-page/trunk/under-construction.php?rev=2848705&order=name "View under-construction.php") @ [2848705](/changeset/2848705/ "View changeset 2848705")

View diff against:

View revision:

| [Last change](/changeset/2848704/under-construction-page/trunk/under-construction.php "View differences") on this file since 2848705 was [2848704](/changeset/2848704/ "View changeset 2848704"), checked in by WebFactory, [2 years ago](/timeline?from=2023-01-15T16%3A05%3A48Z&precision=second "See timeline at 01/15/2023 04:05:48 PM") |
| --- |
| Minor update. |
| **File size:** 186.8 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\* |
| [3](#L3) | Plugin Name: Under Construction |
| [4](#L4) | Plugin URI: https://underconstructionpage.com/ |
| [5](#L5) | Description: Put your site behind a great looking under construction, coming soon, maintenance mode or landing page. |
| [6](#L6) | Author: WebFactory Ltd |
| [7](#L7) | Version: 3.96 |
| [8](#L8) | Requires at least: 4.0 |
| [9](#L9) | Requires PHP: 5.2 |
| [10](#L10) | Tested up to: 6.1 |
| [11](#L11) | Author URI: https://www.webfactoryltd.com/ |
| [12](#L12) | Text Domain: under-construction-page |
| [13](#L13) |  |
| [14](#L14) | Copyright 2015 - 2023  WebFactory Ltd  (email: ucp@webfactoryltd.com) |
| [15](#L15) |  |
| [16](#L16) | This program is free software; you can redistribute it and/or modify |
| [17](#L17) | it under the terms of the GNU General Public License, version 2, as |
| [18](#L18) | published by the Free Software Foundation. |
| [19](#L19) |  |
| [20](#L20) | This program is distributed in the hope that it will be useful, |
| [21](#L21) | but WITHOUT ANY WARRANTY; without even the implied warranty of |
| [22](#L22) | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the |
| [23](#L23) | GNU General Public License for more details. |
| [24](#L24) |  |
| [25](#L25) | You should have received a copy of the GNU General Public License |
| [26](#L26) | along with this program; if not, write to the Free Software |
| [27](#L27) | Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA |
| [28](#L28) | \*/ |
| [29](#L29) |  |
| [30](#L30) | // this is an include only WP file |
| [31](#L31) | if (!defined('ABSPATH')) { |
| [32](#L32) | die; |
| [33](#L33) | } |
| [34](#L34) |  |
| [35](#L35) |  |
| [36](#L36) | define('UCP\_PLUGIN\_DIR', plugin\_dir\_path(\_\_FILE\_\_)); |
| [37](#L37) | define('UCP\_PLUGIN\_URL', plugin\_dir\_url(\_\_FILE\_\_)); |
| [38](#L38) | define('UCP\_OPTIONS\_KEY', 'ucp\_options'); |
| [39](#L39) | define('UCP\_META\_KEY', 'ucp\_meta'); |
| [40](#L40) | define('UCP\_POINTERS\_KEY', 'ucp\_pointers'); |
| [41](#L41) | define('UCP\_NOTICES\_KEY', 'ucp\_notices'); |
| [42](#L42) | define('UCP\_SURVEYS\_KEY', 'ucp\_surveys'); |
| [43](#L43) |  |
| [44](#L44) | require\_once 'wf-flyout/wf-flyout.php'; |
| [45](#L45) | new wf\_flyout(\_\_FILE\_\_); |
| [46](#L46) |  |
| [47](#L47) | require\_once UCP\_PLUGIN\_DIR . 'ucp-license.php'; |
| [48](#L48) |  |
| [49](#L49) |  |
| [50](#L50) | // main plugin class |
| [51](#L51) | class UCP |
| [52](#L52) | { |
| [53](#L53) | static $version = 0; |
| [54](#L54) | static $licensing\_servers = array('https://license1.underconstructionpage.com/', 'https://license2.underconstructionpage.com/'); |
| [55](#L55) |  |
| [56](#L56) |  |
| [57](#L57) | // get plugin version from header |
| [58](#L58) | static function get\_plugin\_version() |
| [59](#L59) | { |
| [60](#L60) | $plugin\_data = get\_file\_data(\_\_FILE\_\_, array('version' => 'Version'), 'plugin'); |
| [61](#L61) | self::$version = $plugin\_data['version']; |
| [62](#L62) |  |
| [63](#L63) | return $plugin\_data['version']; |
| [64](#L64) | } // get\_plugin\_version |
| [65](#L65) |  |
| [66](#L66) |  |
| [67](#L67) | // hook things up |
| [68](#L68) | static function init() |
| [69](#L69) | { |
| [70](#L70) | // check if minimal required WP version is present |
| [71](#L71) | if (false === self::check\_wp\_version(4.0)) { |
| [72](#L72) | return false; |
| [73](#L73) | } |
| [74](#L74) |  |
| [75](#L75) | if (is\_admin()) { |
| [76](#L76) | // if the plugin was updated from ver < 1.20 upgrade settings array |
| [77](#L77) | self::maybe\_upgrade(); |
| [78](#L78) |  |
| [79](#L79) | // add UCP menu to admin tools menu group |
| [80](#L80) | add\_action('admin\_menu', array(\_\_CLASS\_\_, 'admin\_menu')); |
| [81](#L81) |  |
| [82](#L82) | // settings registration |
| [83](#L83) | add\_action('admin\_init', array(\_\_CLASS\_\_, 'register\_settings')); |
| [84](#L84) |  |
| [85](#L85) | // aditional links in plugin description |
| [86](#L86) | add\_filter( |
| [87](#L87) | 'plugin\_action\_links\_' . plugin\_basename(\_\_FILE\_\_), |
| [88](#L88) | array(\_\_CLASS\_\_, 'plugin\_action\_links') |
| [89](#L89) | ); |
| [90](#L90) | add\_filter('plugin\_row\_meta', array(\_\_CLASS\_\_, 'plugin\_meta\_links'), 10, 2); |
| [91](#L91) | add\_filter('admin\_footer\_text', array(\_\_CLASS\_\_, 'admin\_footer\_text')); |
| [92](#L92) | add\_filter('admin\_footer', array(\_\_CLASS\_\_, 'admin\_footer')); |
| [93](#L93) |  |
| [94](#L94) | // manages admin header notifications |
| [95](#L95) | add\_action('admin\_notices', array(\_\_CLASS\_\_, 'admin\_notices')); |
| [96](#L96) | add\_action('admin\_action\_ucp\_dismiss\_notice', array(\_\_CLASS\_\_, 'dismiss\_notice')); |
| [97](#L97) | add\_action('admin\_action\_ucp\_change\_status', array(\_\_CLASS\_\_, 'change\_status')); |
| [98](#L98) | add\_action('admin\_action\_ucp\_reset\_settings', array(\_\_CLASS\_\_, 'reset\_settings')); |
| [99](#L99) | add\_action('admin\_action\_install\_weglot', array(\_\_CLASS\_\_, 'install\_weglot')); |
| [100](#L100) | add\_action('admin\_action\_install\_wpfssl', array(\_\_CLASS\_\_, 'install\_wpfssl')); |
| [101](#L101) |  |
| [102](#L102) | // enqueue admin scripts |
| [103](#L103) | add\_action('admin\_enqueue\_scripts', array(\_\_CLASS\_\_, 'admin\_enqueue\_scripts'), 100, 1); |
| [104](#L104) |  |
| [105](#L105) | // AJAX endpoints |
| [106](#L106) | add\_action('wp\_ajax\_ucp\_dismiss\_pointer', array(\_\_CLASS\_\_, 'dismiss\_pointer\_ajax')); |
| [107](#L107) | add\_action('wp\_ajax\_ucp\_dismiss\_survey', array(\_\_CLASS\_\_, 'dismiss\_survey\_ajax')); |
| [108](#L108) | add\_action('wp\_ajax\_ucp\_submit\_survey', array(\_\_CLASS\_\_, 'submit\_survey\_ajax')); |
| [109](#L109) | add\_action('wp\_ajax\_ucp\_submit\_support\_message', array(\_\_CLASS\_\_, 'submit\_support\_message\_ajax')); |
| [110](#L110) | } else { |
| [111](#L111) | // main plugin logic |
| [112](#L112) | add\_action('wp', array(\_\_CLASS\_\_, 'display\_construction\_page'), 0, 1); |
| [113](#L113) |  |
| [114](#L114) | // show under construction notice on login form |
| [115](#L115) | add\_filter('login\_message', array(\_\_CLASS\_\_, 'login\_message')); |
| [116](#L116) |  |
| [117](#L117) | // disable feeds |
| [118](#L118) | add\_action('do\_feed\_rdf', array(\_\_CLASS\_\_, 'disable\_feed'), 0, 1); |
| [119](#L119) | add\_action('do\_feed\_rss', array(\_\_CLASS\_\_, 'disable\_feed'), 0, 1); |
| [120](#L120) | add\_action('do\_feed\_rss2', array(\_\_CLASS\_\_, 'disable\_feed'), 0, 1); |
| [121](#L121) | add\_action('do\_feed\_atom', array(\_\_CLASS\_\_, 'disable\_feed'), 0, 1); |
| [122](#L122) |  |
| [123](#L123) | add\_action('wp\_footer', array(\_\_CLASS\_\_, 'whitelisted\_notice')); |
| [124](#L124) | } // if not admin |
| [125](#L125) |  |
| [126](#L126) | // admin bar notice for frontend & backend |
| [127](#L127) | add\_action('wp\_before\_admin\_bar\_render', array(\_\_CLASS\_\_, 'admin\_bar')); |
| [128](#L128) | add\_action('wp\_head', array(\_\_CLASS\_\_, 'admin\_bar\_style')); |
| [129](#L129) | add\_action('admin\_head', array(\_\_CLASS\_\_, 'admin\_bar\_style')); |
| [130](#L130) |  |
| [131](#L131) | UCP\_license::init(); |
| [132](#L132) | } // init |
| [133](#L133) |  |
| [134](#L134) |  |
| [135](#L135) | // check if user has the minimal WP version required by UCP |
| [136](#L136) | static function check\_wp\_version($min\_version) |
| [137](#L137) | { |
| [138](#L138) | if (!version\_compare(get\_bloginfo('version'), $min\_version,  '>=')) { |
| [139](#L139) | add\_action('admin\_notices', array(\_\_CLASS\_\_, 'notice\_min\_wp\_version')); |
| [140](#L140) | return false; |
| [141](#L141) | } else { |
| [142](#L142) | return true; |
| [143](#L143) | } |
| [144](#L144) | } // check\_wp\_version |
| [145](#L145) |  |
| [146](#L146) |  |
| [147](#L147) | // display error message if WP version is too low |
| [148](#L148) | static function notice\_min\_wp\_version() |
| [149](#L149) | { |
| [150](#L150) | echo '<div class="error"><p>' . sprintf(\_\_('UnderConstruction plugin <b>requires WordPress version 4.0</b> or higher to function properly. You are using WordPress version %s. Please <a href="%s">update it</a>.', 'under-construction-page'), get\_bloginfo('version'), admin\_url('update-core.php')) . '</p></div>'; |
| [151](#L151) | } // notice\_min\_wp\_version\_error |
| [152](#L152) |  |
| [153](#L153) |  |
| [154](#L154) | // some things have to be loaded earlier |
| [155](#L155) | static function plugins\_loaded() |
| [156](#L156) | { |
| [157](#L157) | self::get\_plugin\_version(); |
| [158](#L158) |  |
| [159](#L159) | load\_plugin\_textdomain('under-construction-page'); |
| [160](#L160) | } // plugins\_loaded |
| [161](#L161) |  |
| [162](#L162) |  |
| [163](#L163) | // activate doesn't get fired on upgrades so we have to compensate |
| [164](#L164) | public static function maybe\_upgrade() |
| [165](#L165) | { |
| [166](#L166) | $meta = self::get\_meta(); |
| [167](#L167) | $options = self::get\_options(); |
| [168](#L168) |  |
| [169](#L169) | // added in v1.70 to rename roles to whitelisted\_roles |
| [170](#L170) | if (isset($options['roles'])) { |
| [171](#L171) | $options['whitelisted\_roles'] = $options['roles']; |
| [172](#L172) | unset($options['roles']); |
| [173](#L173) | update\_option(UCP\_OPTIONS\_KEY, $options); |
| [174](#L174) | } |
| [175](#L175) |  |
| [176](#L176) | // check if we need to convert options from the old format to new, or maybe it is already done |
| [177](#L177) | if (isset($meta['options\_ver']) && $meta['options\_ver'] == self::$version) { |
| [178](#L178) | return; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | if (get\_option('set\_size') || get\_option('set\_tweet') || get\_option('set\_fb') || get\_option('set\_font') || get\_option('set\_msg') || get\_option('set\_opt') || get\_option('set\_admin')) { |
| [182](#L182) | // convert old options to new |
| [183](#L183) | $options['status'] = (get\_option('set\_opt') === 'Yes') ? '1' : '0'; |
| [184](#L184) | $options['content'] = trim(get\_option('set\_msg')); |
| [185](#L185) | $options['whitelisted\_roles'] = (get\_option('set\_admin') === 'No') ? array('administrator') : array(); |
| [186](#L186) | $options['social\_facebook'] = trim(get\_option('set\_fb')); |
| [187](#L187) | $options['social\_twitter'] = trim(get\_option('set\_tweet')); |
| [188](#L188) | update\_option(UCP\_OPTIONS\_KEY, $options); |
| [189](#L189) |  |
| [190](#L190) | delete\_option('set\_size'); |
| [191](#L191) | delete\_option('set\_tweet'); |
| [192](#L192) | delete\_option('set\_fb'); |
| [193](#L193) | delete\_option('set\_font'); |
| [194](#L194) | delete\_option('set\_msg'); |
| [195](#L195) | delete\_option('set\_opt'); |
| [196](#L196) | delete\_option('set\_admin'); |
| [197](#L197) |  |
| [198](#L198) | self::reset\_pointers(); |
| [199](#L199) | } |
| [200](#L200) |  |
| [201](#L201) | // we update only once |
| [202](#L202) | $meta['options\_ver'] = self::$version; |
| [203](#L203) | update\_option(UCP\_META\_KEY, $meta); |
| [204](#L204) | } // maybe\_upgrade |
| [205](#L205) |  |
| [206](#L206) |  |
| [207](#L207) | // get plugin's options |
| [208](#L208) | static function get\_options() |
| [209](#L209) | { |
| [210](#L210) | $options = get\_option(UCP\_OPTIONS\_KEY, array()); |
| [211](#L211) |  |
| [212](#L212) | if (!is\_array($options)) { |
| [213](#L213) | $options = array(); |
| [214](#L214) | } |
| [215](#L215) | $options = array\_merge(self::default\_options(), $options); |
| [216](#L216) |  |
| [217](#L217) | return $options; |
| [218](#L218) | } // get\_options |
| [219](#L219) |  |
| [220](#L220) |  |
| [221](#L221) | // get plugin's meta data |
| [222](#L222) | static function get\_meta() |
| [223](#L223) | { |
| [224](#L224) | $meta = get\_option(UCP\_META\_KEY, array()); |
| [225](#L225) |  |
| [226](#L226) | if (!is\_array($meta) || empty($meta)) { |
| [227](#L227) | $meta['first\_version'] = self::get\_plugin\_version(); |
| [228](#L228) | $meta['first\_install'] = time(); |
| [229](#L229) | update\_option(UCP\_META\_KEY, $meta); |
| [230](#L230) | } |
| [231](#L231) |  |
| [232](#L232) | return $meta; |
| [233](#L233) | } // get\_meta |
| [234](#L234) |  |
| [235](#L235) |  |
| [236](#L236) | // fetch and display the construction page if it's enabled or preview requested |
| [237](#L237) | static function display\_construction\_page() |
| [238](#L238) | { |
| [239](#L239) | $options = self::get\_options(); |
| [240](#L240) | $request\_uri = trailingslashit(strtolower(@parse\_url($\_SERVER['REQUEST\_URI'], PHP\_URL\_PATH))); |
| [241](#L241) |  |
| [242](#L242) | // just to be on the safe side |
| [243](#L243) | if (defined('DOING\_CRON') && DOING\_CRON) { |
| [244](#L244) | return false; |
| [245](#L245) | } |
| [246](#L246) | if (defined('DOING\_AJAX') && DOING\_AJAX) { |
| [247](#L247) | return false; |
| [248](#L248) | } |
| [249](#L249) | if (defined('WP\_CLI') && WP\_CLI) { |
| [250](#L250) | return false; |
| [251](#L251) | } |
| [252](#L252) |  |
| [253](#L253) | // some URLs have to be accessible at all times |
| [254](#L254) | if ( |
| [255](#L255) | $request\_uri == '/wp-admin/' || |
| [256](#L256) | $request\_uri == '/feed/' || |
| [257](#L257) | $request\_uri == '/feed/rss/' || |
| [258](#L258) | $request\_uri == '/feed/rss2/' || |
| [259](#L259) | $request\_uri == '/feed/rdf/' || |
| [260](#L260) | $request\_uri == '/feed/atom/' || |
| [261](#L261) | $request\_uri == '/admin/' || |
| [262](#L262) | $request\_uri == '/wp-login.php' |
| [263](#L263) | ) { |
| [264](#L264) | return; |
| [265](#L265) | } |
| [266](#L266) |  |
| [267](#L267) | if (true == self::is\_construction\_mode\_enabled(false) || (is\_user\_logged\_in() && isset($\_GET['ucp\_preview']))) { |
| [268](#L268) | header(self::wp\_get\_server\_protocol() . ' 200 OK'); |
| [269](#L269) | if ($options['end\_date'] && $options['end\_date'] != '0000-00-00 00:00') { |
| [270](#L270) | header('Retry-After: ' . date('D, d M Y H:i:s T', strtotime($options['end\_date']))); |
| [271](#L271) | } else { |
| [272](#L272) | header('Retry-After: ' . DAY\_IN\_SECONDS); |
| [273](#L273) | } |
| [274](#L274) |  |
| [275](#L275) | $themes = self::get\_themes(); |
| [276](#L276) | if (!empty($\_GET['theme']) && substr(sanitize\_text\_field($\_GET['theme']), 5) != '\_pro\_' && !empty($themes[sanitize\_text\_field($\_GET['theme'])])) { |
| [277](#L277) | $theme = sanitize\_text\_field($\_GET['theme']); |
| [278](#L278) | } else { |
| [279](#L279) | $theme = $options['theme']; |
| [280](#L280) | } |
| [281](#L281) |  |
| [282](#L282) | self::wp\_kses\_wf(self::get\_template($theme)); |
| [283](#L283) | die(); |
| [284](#L284) | } |
| [285](#L285) | } // display\_construction\_page |
| [286](#L286) |  |
| [287](#L287) |  |
| [288](#L288) | // keeping compatibility with WP < v4.4 |
| [289](#L289) | static function wp\_get\_server\_protocol() |
| [290](#L290) | { |
| [291](#L291) | $protocol = $\_SERVER['SERVER\_PROTOCOL']; |
| [292](#L292) | if (!in\_array($protocol, array('HTTP/1.1', 'HTTP/2', 'HTTP/2.0'))) { |
| [293](#L293) | $protocol = 'HTTP/1.0'; |
| [294](#L294) | } |
| [295](#L295) |  |
| [296](#L296) | return $protocol; |
| [297](#L297) | } // wp\_get\_server\_protocol |
| [298](#L298) |  |
| [299](#L299) |  |
| [300](#L300) | // disables feed if necessary |
| [301](#L301) | static function disable\_feed() |
| [302](#L302) | { |
| [303](#L303) | if (true == self::is\_construction\_mode\_enabled(false)) { |
| [304](#L304) | echo '<?xml version="1.0" encoding="UTF-8" ?><status>Service unavailable.</status>'; |
| [305](#L305) | exit; |
| [306](#L306) | } |
| [307](#L307) | } // disable\_feed |
| [308](#L308) |  |
| [309](#L309) |  |
| [310](#L310) | // enqueue CSS and JS scripts in admin |
| [311](#L311) | static function admin\_enqueue\_scripts($hook) |
| [312](#L312) | { |
| [313](#L313) | $surveys = get\_option(UCP\_SURVEYS\_KEY); |
| [314](#L314) | $meta = self::get\_meta(); |
| [315](#L315) | $pointers = get\_option(UCP\_POINTERS\_KEY); |
| [316](#L316) |  |
| [317](#L317) | // auto remove welcome pointer when options are opened |
| [318](#L318) | if (self::is\_plugin\_page()) { |
| [319](#L319) | unset($pointers['welcome']); |
| [320](#L320) | update\_option(UCP\_POINTERS\_KEY, $pointers); |
| [321](#L321) | } |
| [322](#L322) |  |
| [323](#L323) | // survey is shown min 5min after install |
| [324](#L324) | // DISABLED |
| [325](#L325) | if (0 && empty($surveys['usage']) && time() - $meta['first\_install'] > 300) { |
| [326](#L326) | $open\_survey = true; |
| [327](#L327) | } else { |
| [328](#L328) | $open\_survey = false; |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | $promo = self::is\_promo\_active(); |
| [332](#L332) | if ($promo == 'welcome') { |
| [333](#L333) | $countdown = $meta['first\_install'] + HOUR\_IN\_SECONDS; |
| [334](#L334) | } else { |
| [335](#L335) | $countdown = 0; |
| [336](#L336) | } |
| [337](#L337) |  |
| [338](#L338) | $js\_localize = array( |
| [339](#L339) | 'undocumented\_error' => esc\_attr\_\_('An undocumented error has occured. Please refresh the page and try again.', 'under-construction-page'), |
| [340](#L340) | 'plugin\_name' => esc\_attr\_\_('UnderConstructionPage', 'under-construction-page'), |
| [341](#L341) | 'settings\_url' => admin\_url('options-general.php?page=ucp'), |
| [342](#L342) | 'whitelisted\_users\_placeholder' => esc\_attr\_\_('Select whitelisted user(s)', 'under-construction-page'), |
| [343](#L343) | 'open\_survey' => $open\_survey, |
| [344](#L344) | 'promo\_countdown' => $countdown, |
| [345](#L345) | 'wpfssl\_install\_url' => add\_query\_arg(array('action' => 'install\_wpfssl', '\_wpnonce' => wp\_create\_nonce('install\_wpfssl'), 'rnd' => rand()), admin\_url('admin.php')), |
| [346](#L346) | 'is\_activated' => UCP\_license::is\_activated(), |
| [347](#L347) | 'dialog\_upsell\_title' => '<img alt="' . esc\_attr\_\_('UnderConstructionPage PRO', 'under-construction-page') . '" title="' . esc\_attr\_\_('UnderConstructionPage PRO', 'under-construction-page') . '" src="' . UCP\_PLUGIN\_URL . 'images/ucp\_pro\_logo\_white.png' . '">', |
| [348](#L348) | 'weglot\_dialog\_upsell\_title' => '<img alt="' . esc\_attr\_\_('Weglot', 'under-construction-page') . '" title="' . esc\_attr\_\_('Weglot', 'under-construction-page') . '" src="' . UCP\_PLUGIN\_URL . 'images/weglot-logo-white.png' . '">', |
| [349](#L349) | 'weglot\_install\_url' => add\_query\_arg(array('action' => 'install\_weglot'), admin\_url('admin.php')), |
| [350](#L350) | 'nonce\_dismiss\_survey' => wp\_create\_nonce('ucp\_dismiss\_survey'), |
| [351](#L351) | 'nonce\_submit\_survey' => wp\_create\_nonce('ucp\_submit\_survey'), |
| [352](#L352) | 'nonce\_submit\_support\_message' => wp\_create\_nonce('ucp\_submit\_support\_message'), |
| [353](#L353) | 'deactivate\_confirmation' => esc\_attr\_\_('Are you sure you want to deactivate UnderConstruction plugin?' . "\n" . 'If you are removing it because of a problem please contact our support. They will be more than happy to help.', 'under-construction-page') |
| [354](#L354) | ); |
| [355](#L355) |  |
| [356](#L356) | if (self::is\_plugin\_page()) { |
| [357](#L357) | remove\_editor\_styles(); |
| [358](#L358) | wp\_enqueue\_style('wp-jquery-ui-dialog'); |
| [359](#L359) | wp\_enqueue\_style('ucp-select2', UCP\_PLUGIN\_URL . 'css/select2.min.css', array(), self::$version); |
| [360](#L360) | wp\_enqueue\_style('ucp-admin', UCP\_PLUGIN\_URL . 'css/ucp-admin.css', array(), self::$version); |
| [361](#L361) |  |
| [362](#L362) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [363](#L363) | wp\_enqueue\_script('jquery-ui-dialog'); |
| [364](#L364) | wp\_enqueue\_script('ucp-jquery-plugins', UCP\_PLUGIN\_URL . 'js/ucp-jquery-plugins.js', array('jquery'), self::$version, true); |
| [365](#L365) | wp\_enqueue\_script('ucp-select2', UCP\_PLUGIN\_URL . 'js/select2.min.js', array(), self::$version, true); |
| [366](#L366) | wp\_enqueue\_script('ucp-admin', UCP\_PLUGIN\_URL . 'js/ucp-admin.js', array('jquery'), self::$version, true); |
| [367](#L367) | wp\_localize\_script('ucp-admin', 'ucp', $js\_localize); |
| [368](#L368) |  |
| [369](#L369) | // fix for agressive plugins |
| [370](#L370) | wp\_dequeue\_style('uiStyleSheet'); |
| [371](#L371) | wp\_dequeue\_style('wpcufpnAdmin'); |
| [372](#L372) | wp\_dequeue\_style('unifStyleSheet'); |
| [373](#L373) | wp\_dequeue\_style('wpcufpn\_codemirror'); |
| [374](#L374) | wp\_dequeue\_style('wpcufpn\_codemirrorTheme'); |
| [375](#L375) | wp\_dequeue\_style('collapse-admin-css'); |
| [376](#L376) | wp\_dequeue\_style('jquery-ui-css'); |
| [377](#L377) | wp\_dequeue\_style('tribe-common-admin'); |
| [378](#L378) | wp\_dequeue\_style('file-manager\_\_jquery-ui-css'); |
| [379](#L379) | wp\_dequeue\_style('file-manager\_\_jquery-ui-css-theme'); |
| [380](#L380) | wp\_dequeue\_style('wpmegmaps-jqueryui'); |
| [381](#L381) | wp\_dequeue\_style('wp-botwatch-css'); |
| [382](#L382) | wp\_dequeue\_style('uap\_main\_admin\_style'); |
| [383](#L383) | wp\_dequeue\_style('uap\_font\_awesome'); |
| [384](#L384) | wp\_dequeue\_style('uap\_jquery-ui.min.css'); |
| [385](#L385) | } |
| [386](#L386) |  |
| [387](#L387) | if ($pointers) { |
| [388](#L388) | $pointers['\_nonce\_dismiss\_pointer'] = wp\_create\_nonce('ucp\_dismiss\_pointer'); |
| [389](#L389) | wp\_enqueue\_script('wp-pointer'); |
| [390](#L390) | wp\_enqueue\_script('ucp-pointers', plugins\_url('js/ucp-admin-pointers.js', \_\_FILE\_\_), array('jquery'), self::$version, true); |
| [391](#L391) | wp\_enqueue\_style('wp-pointer'); |
| [392](#L392) | wp\_localize\_script('wp-pointer', 'ucp\_pointers', $pointers); |
| [393](#L393) | wp\_localize\_script('wp-pointer', 'ucp', $js\_localize); |
| [394](#L394) | } |
| [395](#L395) | } // admin\_enqueue\_scripts |
| [396](#L396) |  |
| [397](#L397) |  |
| [398](#L398) | // permanently dismiss a pointer |
| [399](#L399) | static function dismiss\_pointer\_ajax() |
| [400](#L400) | { |
| [401](#L401) | check\_ajax\_referer('ucp\_dismiss\_pointer'); |
| [402](#L402) |  |
| [403](#L403) | $pointers = get\_option(UCP\_POINTERS\_KEY); |
| [404](#L404) | $pointer = trim(sanitize\_text\_field($\_POST['pointer'])); |
| [405](#L405) |  |
| [406](#L406) | if (empty($pointers) || empty($pointers[$pointer])) { |
| [407](#L407) | wp\_send\_json\_error(); |
| [408](#L408) | } |
| [409](#L409) |  |
| [410](#L410) | unset($pointers[$pointer]); |
| [411](#L411) | update\_option(UCP\_POINTERS\_KEY, $pointers); |
| [412](#L412) |  |
| [413](#L413) | wp\_send\_json\_success(); |
| [414](#L414) | } // dismiss\_pointer\_ajax |
| [415](#L415) |  |
| [416](#L416) |  |
| [417](#L417) | // permanently dismiss a survey |
| [418](#L418) | static function dismiss\_survey\_ajax() |
| [419](#L419) | { |
| [420](#L420) | check\_ajax\_referer('ucp\_dismiss\_survey'); |
| [421](#L421) |  |
| [422](#L422) | $surveys = get\_option(UCP\_SURVEYS\_KEY, array()); |
| [423](#L423) | $survey = trim(sanitize\_text\_field($\_POST['survey'])); |
| [424](#L424) |  |
| [425](#L425) | $surveys[$survey] = -1; |
| [426](#L426) | update\_option(UCP\_SURVEYS\_KEY, $surveys); |
| [427](#L427) |  |
| [428](#L428) | wp\_send\_json\_success(); |
| [429](#L429) | } // dismiss\_survey\_ajax |
| [430](#L430) |  |
| [431](#L431) |  |
| [432](#L432) | // send support message |
| [433](#L433) | static function submit\_support\_message\_ajax() |
| [434](#L434) | { |
| [435](#L435) | check\_ajax\_referer('ucp\_submit\_support\_message'); |
| [436](#L436) |  |
| [437](#L437) | $options = self::get\_options(); |
| [438](#L438) |  |
| [439](#L439) | $email = sanitize\_text\_field($\_POST['support\_email']); |
| [440](#L440) | if (!is\_email($email)) { |
| [441](#L441) | wp\_send\_json\_error(esc\_attr\_\_('Please double-check your email address.', 'under-construction-page')); |
| [442](#L442) | } |
| [443](#L443) |  |
| [444](#L444) | $message = stripslashes(sanitize\_text\_field($\_POST['support\_message'])); |
| [445](#L445) | $subject = 'UCP Support'; |
| [446](#L446) | $body = $message; |
| [447](#L447) | if (!empty($\_POST['support\_info'])) { |
| [448](#L448) | $theme = wp\_get\_theme(); |
| [449](#L449) | $body .= "\r\n\r\nSite details:\r\n"; |
| [450](#L450) | $body .= '  WordPress version: ' . get\_bloginfo('version') . "\r\n"; |
| [451](#L451) | $body .= '  UCP version: ' . self::$version . "\r\n"; |
| [452](#L452) | $body .= '  PHP version: ' . PHP\_VERSION . "\r\n"; |
| [453](#L453) | $body .= '  Site URL: ' . get\_bloginfo('url') . "\r\n"; |
| [454](#L454) | $body .= '  WordPress URL: ' . get\_bloginfo('wpurl') . "\r\n"; |
| [455](#L455) | $body .= '  Theme: ' . $theme->get('Name') . ' v' . $theme->get('Version') . "\r\n"; |
| [456](#L456) | $body .= '  Options: ' . "\r\n" . serialize($options) . "\r\n"; |
| [457](#L457) | } |
| [458](#L458) | $headers = 'From: ' . $email . "\r\n" . 'Reply-To: ' . $email; |
| [459](#L459) |  |
| [460](#L460) | if (true === wp\_mail('ucp@webfactoryltd.com', $subject, $body, $headers)) { |
| [461](#L461) | wp\_send\_json\_success(); |
| [462](#L462) | } else { |
| [463](#L463) | wp\_send\_json\_error(esc\_attr\_\_('Something is not right with your wp\_mail() function. Please email as at ucp@webfactoryltd.com.', 'under-construction-page')); |
| [464](#L464) | } |
| [465](#L465) | } // submit\_support\_message |
| [466](#L466) |  |
| [467](#L467) |  |
| [468](#L468) | // submit survey |
| [469](#L469) | static function submit\_survey\_ajax() |
| [470](#L470) | { |
| [471](#L471) | check\_ajax\_referer('ucp\_submit\_survey'); |
| [472](#L472) |  |
| [473](#L473) | $options = self::get\_options(); |
| [474](#L474) | $meta = self::get\_meta(); |
| [475](#L475) | $surveys = get\_option(UCP\_SURVEYS\_KEY); |
| [476](#L476) |  |
| [477](#L477) | $vars = wp\_parse\_args($\_POST, array('survey' => '', 'answers' => '', 'custom\_answer' => $options['theme'], 'emailme' => '')); |
| [478](#L478) | $vars['answers'] = trim($vars['answers'], ','); |
| [479](#L479) | $vars['custom\_answer'] = trim(strip\_tags($vars['custom\_answer'])); |
| [480](#L480) |  |
| [481](#L481) | $vars['custom\_answer'] .= '; ' . date('Y-m-d H:i:s', $meta['first\_install']); |
| [482](#L482) | $vars['custom\_answer'] = trim($vars['custom\_answer'], ' ;'); |
| [483](#L483) |  |
| [484](#L484) | if (empty($vars['survey']) || empty($vars['answers'])) { |
| [485](#L485) | wp\_send\_json\_error(); |
| [486](#L486) | } |
| [487](#L487) |  |
| [488](#L488) | $request\_params = array('sslverify' => false, 'timeout' => 15, 'redirection' => 2); |
| [489](#L489) | $request\_args = array( |
| [490](#L490) | 'action' => 'submit\_survey', |
| [491](#L491) | 'survey' => $vars['survey'], |
| [492](#L492) | 'email' => $vars['emailme'], |
| [493](#L493) | 'answers' => $vars['answers'], |
| [494](#L494) | 'custom\_answer' => $vars['custom\_answer'], |
| [495](#L495) | 'first\_version' => $meta['first\_version'], |
| [496](#L496) | 'version' => UCP::$version, |
| [497](#L497) | 'codebase' => 'free', |
| [498](#L498) | 'site' => get\_home\_url() |
| [499](#L499) | ); |
| [500](#L500) |  |
| [501](#L501) | $url = add\_query\_arg($request\_args, self::$licensing\_servers[0]); |
| [502](#L502) | $response = wp\_remote\_get(esc\_url\_raw($url), $request\_params); |
| [503](#L503) |  |
| [504](#L504) | if (is\_wp\_error($response) || !wp\_remote\_retrieve\_body($response)) { |
| [505](#L505) | $url = add\_query\_arg($request\_args, self::$licensing\_servers[1]); |
| [506](#L506) | $response = wp\_remote\_get(esc\_url\_raw($url), $request\_params); |
| [507](#L507) | } |
| [508](#L508) |  |
| [509](#L509) | $surveys[$vars['survey']] = time(); |
| [510](#L510) | update\_option(UCP\_SURVEYS\_KEY, $surveys); |
| [511](#L511) |  |
| [512](#L512) | wp\_send\_json\_success(); |
| [513](#L513) | } // submit\_survey\_ajax |
| [514](#L514) |  |
| [515](#L515) |  |
| [516](#L516) | // encode email for frontend use |
| [517](#L517) | static function encode\_email($email) |
| [518](#L518) | { |
| [519](#L519) | $len = strlen($email); |
| [520](#L520) | $out = ''; |
| [521](#L521) |  |
| [522](#L522) | for ($i = 0; $i < $len; $i++) { |
| [523](#L523) | $out .= '&#' . ord($email[$i]) . ';'; |
| [524](#L524) | } |
| [525](#L525) |  |
| [526](#L526) | return $out; |
| [527](#L527) | } // encode\_email |
| [528](#L528) |  |
| [529](#L529) |  |
| [530](#L530) | // parse shortcode alike variables |
| [531](#L531) | static function parse\_vars($string) |
| [532](#L532) | { |
| [533](#L533) | $org\_string = $string; |
| [534](#L534) |  |
| [535](#L535) | $vars = array( |
| [536](#L536) | 'site-title' => get\_bloginfo('name'), |
| [537](#L537) | 'site-tagline' => get\_bloginfo('description'), |
| [538](#L538) | 'site-description' => get\_bloginfo('description'), |
| [539](#L539) | 'site-url' => trailingslashit(get\_home\_url()), |
| [540](#L540) | 'wp-url' => trailingslashit(get\_site\_url()), |
| [541](#L541) | 'site-login-url' => get\_site\_url() . '/wp-login.php' |
| [542](#L542) | ); |
| [543](#L543) |  |
| [544](#L544) | foreach ($vars as $var\_name => $var\_value) { |
| [545](#L545) | $var\_name = '[' . $var\_name . ']'; |
| [546](#L546) | $string = str\_ireplace($var\_name, $var\_value, $string); |
| [547](#L547) | } |
| [548](#L548) |  |
| [549](#L549) | $string = apply\_filters('ucp\_parse\_vars', $string, $org\_string, $vars); |
| [550](#L550) |  |
| [551](#L551) | return $string; |
| [552](#L552) | } // parse\_vars |
| [553](#L553) |  |
| [554](#L554) |  |
| [555](#L555) | // generate HTML from social icons |
| [556](#L556) | static function generate\_social\_icons($options, $template\_id) |
| [557](#L557) | { |
| [558](#L558) | $out = ''; |
| [559](#L559) |  |
| [560](#L560) | if (!empty($options['social\_facebook'])) { |
| [561](#L561) | $out .= '<a title="Facebook" href="' . esc\_attr($options['social\_facebook']) . '" target="\_blank"><i class="fa fa-facebook-square fa-3x"></i></a>'; |
| [562](#L562) | } |
| [563](#L563) | if (!empty($options['social\_twitter'])) { |
| [564](#L564) | $out .= '<a title="Twitter" href="' . esc\_attr($options['social\_twitter']) . '" target="\_blank"><i class="fa fa-twitter-square fa-3x"></i></a>'; |
| [565](#L565) | } |
| [566](#L566) | if (!empty($options['social\_linkedin'])) { |
| [567](#L567) | $out .= '<a title="LinkedIn" href="' . esc\_attr($options['social\_linkedin']) . '" target="\_blank"><i class="fa fa-linkedin-square fa-3x"></i></a>'; |
| [568](#L568) | } |
| [569](#L569) | if (!empty($options['social\_youtube'])) { |
| [570](#L570) | $out .= '<a title="YouTube" href="' . esc\_attr($options['social\_youtube']) . '" target="\_blank"><i class="fa fa-youtube-square fa-3x"></i></a>'; |
| [571](#L571) | } |
| [572](#L572) | if (!empty($options['social\_vimeo'])) { |
| [573](#L573) | $out .= '<a title="Vimeo" href="' . esc\_attr($options['social\_vimeo']) . '" target="\_blank"><i class="fa fa-vimeo-square fa-3x"></i></a>'; |
| [574](#L574) | } |
| [575](#L575) | if (!empty($options['social\_pinterest'])) { |
| [576](#L576) | $out .= '<a title="Pinterest" href="' . esc\_attr($options['social\_pinterest']) . '" target="\_blank"><i class="fa fa-pinterest-square fa-3x"></i></a>'; |
| [577](#L577) | } |
| [578](#L578) | if (!empty($options['social\_dribbble'])) { |
| [579](#L579) | $out .= '<a title="Dribbble" href="' . esc\_attr($options['social\_dribbble']) . '" target="\_blank"><i class="fa fa-dribbble fa-3x"></i></a>'; |
| [580](#L580) | } |
| [581](#L581) | if (!empty($options['social\_behance'])) { |
| [582](#L582) | $out .= '<a title="Behance" href="' . esc\_attr($options['social\_behance']) . '" target="\_blank"><i class="fa fa-behance-square fa-3x"></i></a>'; |
| [583](#L583) | } |
| [584](#L584) | if (!empty($options['social\_instagram'])) { |
| [585](#L585) | $out .= '<a title="Instagram" href="' . esc\_attr($options['social\_instagram']) . '" target="\_blank"><i class="fa fa-instagram fa-3x"></i></a>'; |
| [586](#L586) | } |
| [587](#L587) | if (!empty($options['social\_tumblr'])) { |
| [588](#L588) | $out .= '<a title="Tumblr" href="' . esc\_attr($options['social\_tumblr']) . '" target="\_blank"><i class="fa fa-tumblr-square fa-3x"></i></a>'; |
| [589](#L589) | } |
| [590](#L590) | if (!empty($options['social\_vk'])) { |
| [591](#L591) | $out .= '<a title="VK" href="' . esc\_attr($options['social\_vk']) . '" target="\_blank"><i class="fa fa-vk fa-3x"></i></a>'; |
| [592](#L592) | } |
| [593](#L593) | if (!empty($options['social\_skype'])) { |
| [594](#L594) | $out .= '<a title="Skype" href="skype:' . esc\_attr($options['social\_skype']) . '?chat"><i class="fa fa-skype fa-3x"></i></a>'; |
| [595](#L595) | } |
| [596](#L596) | if (!empty($options['social\_whatsapp'])) { |
| [597](#L597) | $out .= '<a title="WhatsApp" href="https://api.whatsapp.com/send?phone=' . str\_replace('+', '', esc\_attr($options['social\_whatsapp'])) . '"><i class="fa fa-whatsapp fa-3x"></i></a>'; |
| [598](#L598) | } |
| [599](#L599) | if (!empty($options['social\_telegram'])) { |
| [600](#L600) | $out .= '<a title="Telegram" href="' . esc\_attr($options['social\_telegram']) . '"><i class="fa fa-telegram fa-3x"></i></a>'; |
| [601](#L601) | } |
| [602](#L602) | if (!empty($options['social\_email'])) { |
| [603](#L603) | $out .= '<a title="Email" href="mailto:' . esc\_attr(self::encode\_email($options['social\_email'])) . '"><i class="fa fa-envelope fa-3x"></i></a>'; |
| [604](#L604) | } |
| [605](#L605) | if (!empty($options['social\_phone'])) { |
| [606](#L606) | $out .= '<a title="Phone" href="tel:' . esc\_attr($options['social\_phone']) . '"><i class="fa fa-phone-square fa-3x"></i></a>'; |
| [607](#L607) | } |
| [608](#L608) |  |
| [609](#L609) | return $out; |
| [610](#L610) | } // generate\_social\_icons |
| [611](#L611) |  |
| [612](#L612) |  |
| [613](#L613) | // shortcode for inserting things in header |
| [614](#L614) | static function generate\_head($options, $template\_id) |
| [615](#L615) | { |
| [616](#L616) | $out = ''; |
| [617](#L617) |  |
| [618](#L618) | $out .= '<link rel="stylesheet" href="' . trailingslashit(UCP\_PLUGIN\_URL . 'themes/css') . 'bootstrap.min.css?v=' . self::$version . '" type="text/css">' . "\n"; |
| [619](#L619) | $out .= '<link rel="stylesheet" href="' . trailingslashit(UCP\_PLUGIN\_URL . 'themes/css') . 'common.css?v=' . self::$version . '" type="text/css">' . "\n"; |
| [620](#L620) | $out .= '<link rel="stylesheet" href="' . trailingslashit(UCP\_PLUGIN\_URL . 'themes/' . $template\_id) . 'style.css?v=' . self::$version . '" type="text/css">' . "\n"; |
| [621](#L621) | $out .= '<link rel="stylesheet" href="' . trailingslashit(UCP\_PLUGIN\_URL . 'themes/css') . 'font-awesome.min.css?v=' . self::$version . '" type="text/css">' . "\n"; |
| [622](#L622) |  |
| [623](#L623) | $out .= '<link rel="icon" sizes="128x128" href="' . trailingslashit(UCP\_PLUGIN\_URL . 'themes/images') . 'favicon.png" />'; |
| [624](#L624) |  |
| [625](#L625) | if (self::is\_weglot\_setup()) { |
| [626](#L626) | $out .= '<link rel="stylesheet" href="' . WEGLOT\_URL\_DIST . '/css/front-css.css?v=' . WEGLOT\_VERSION . '" type="text/css">'; |
| [627](#L627) | $out .= '<script src="' . WEGLOT\_URL\_DIST . '/front-js.js?v=' . WEGLOT\_VERSION . '"></script>'; |
| [628](#L628) | } |
| [629](#L629) |  |
| [630](#L630) | if (!empty($options['ga\_tracking\_id'])) { |
| [631](#L631) | $out .= " |
| [632](#L632) | <script> |
| [633](#L633) | (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ |
| [634](#L634) | (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1\*new Date();a=s.createElement(o), |
| [635](#L635) | m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) |
| [636](#L636) | })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); |
| [637](#L637) | ga('create', '{$options['ga\_tracking\_id']}', 'auto'); |
| [638](#L638) | ga('send', 'pageview'); |
| [639](#L639) | </script>"; |
| [640](#L640) | } |
| [641](#L641) |  |
| [642](#L642) | if (!empty($options['custom\_css'])) { |
| [643](#L643) | $out .= "\n" . '<style type="text/css">' . $options['custom\_css'] . '</style>'; |
| [644](#L644) | } |
| [645](#L645) |  |
| [646](#L646) | $out = apply\_filters('ucp\_head', $out, $options, $template\_id); |
| [647](#L647) |  |
| [648](#L648) | return trim($out); |
| [649](#L649) | } // generate\_head |
| [650](#L650) |  |
| [651](#L651) |  |
| [652](#L652) | // shortcode for inserting things in footer |
| [653](#L653) | static function generate\_footer($options, $template\_id) |
| [654](#L654) | { |
| [655](#L655) | $out = ''; |
| [656](#L656) |  |
| [657](#L657) | if ($options['linkback'] == '1') { |
| [658](#L658) | $tmp = md5(get\_site\_url()); |
| [659](#L659) | if ($tmp[0] < '4') { |
| [660](#L660) | $out .= '<p id="linkback">Create stunning <a href="' . self::generate\_web\_link('show-love-1')  . '" target="\_blank">under construction pages for WordPress</a>. Completely free.</p>'; |
| [661](#L661) | } elseif ($tmp[0] < '8') { |
| [662](#L662) | $out .= '<p id="linkback">Create a <a href="' . self::generate\_web\_link('show-love-2')  . '" target="\_blank">free under construction page for WordPress</a> like this one in under a minute.</p>'; |
| [663](#L663) | } elseif ($tmp[0] < 'c') { |
| [664](#L664) | $out .= '<p id="linkback">Join more than 400,000 happy people using the <a href="https://wordpress.org/plugins/under-construction-page/" target="\_blank">free Under Construction Page plugin for WordPress</a>.</p>'; |
| [665](#L665) | } else { |
| [666](#L666) | $out .= '<p id="linkback">Create free <a href="' . self::generate\_web\_link('show-love-3')  . '" target="\_blank">under construction pages for WordPress</a>.</p>'; |
| [667](#L667) | } |
| [668](#L668) | } |
| [669](#L669) |  |
| [670](#L670) | if ($options['login\_button'] == '1') { |
| [671](#L671) | if (is\_user\_logged\_in()) { |
| [672](#L672) | $out .= '<div id="login-button" class="loggedin">'; |
| [673](#L673) | $out .= '<a title="' . esc\_attr\_\_('Open WordPress admin', 'under-construction-page') . '" href="' . get\_site\_url() . '/wp-admin/"><i class="fa fa-wordpress fa-2x" aria-hidden="true"></i></a>'; |
| [674](#L674) | } else { |
| [675](#L675) | $out .= '<div id="login-button" class="loggedout">'; |
| [676](#L676) | $out .= '<a title="' . esc\_attr\_\_('Log in to WordPress admin', 'under-construction-page') . '" href="' . get\_site\_url() . '/wp-login.php"><i class="fa fa-wordpress fa-2x" aria-hidden="true"></i></a>'; |
| [677](#L677) | } |
| [678](#L678) | $out .= '</div>'; |
| [679](#L679) | } |
| [680](#L680) |  |
| [681](#L681) | $out = apply\_filters('ucp\_footer', $out, $options, $template\_id); |
| [682](#L682) |  |
| [683](#L683) | return $out; |
| [684](#L684) | } // generate\_footer |
| [685](#L685) |  |
| [686](#L686) |  |
| [687](#L687) | // returnes parsed template |
| [688](#L688) | static function get\_template($template\_id) |
| [689](#L689) | { |
| [690](#L690) | $vars = array(); |
| [691](#L691) | $options = self::get\_options(); |
| [692](#L692) |  |
| [693](#L693) | $vars['version'] = self::$version; |
| [694](#L694) | $vars['site-url'] = trailingslashit(get\_home\_url()); |
| [695](#L695) | $vars['wp-url'] = trailingslashit(get\_site\_url()); |
| [696](#L696) | $vars['theme-url'] = trailingslashit(UCP\_PLUGIN\_URL . 'themes/' . $template\_id); |
| [697](#L697) | $vars['theme-url-common'] = trailingslashit(UCP\_PLUGIN\_URL . 'themes'); |
| [698](#L698) | $vars['title'] = self::parse\_vars($options['title']); |
| [699](#L699) | $vars['generator'] = esc\_attr\_\_('Free UnderConstructionPage plugin for WordPress', 'under-construction-page'); |
| [700](#L700) | $vars['heading1'] = self::parse\_vars($options['heading1']); |
| [701](#L701) | $vars['content'] = nl2br(self::parse\_vars($options['content'])); |
| [702](#L702) | $vars['description'] = self::parse\_vars($options['description']); |
| [703](#L703) | $vars['social-icons'] = self::generate\_social\_icons($options, $template\_id); |
| [704](#L704) | $vars['head'] = self::generate\_head($options, $template\_id); |
| [705](#L705) | $vars['footer'] = self::generate\_footer($options, $template\_id); |
| [706](#L706) |  |
| [707](#L707) | $vars = apply\_filters('ucp\_get\_template\_vars', $vars, $template\_id, $options); |
| [708](#L708) |  |
| [709](#L709) | ob\_start(); |
| [710](#L710) | require UCP\_PLUGIN\_DIR . 'themes/' . $template\_id . '/index.php'; |
| [711](#L711) | $template = ob\_get\_clean(); |
| [712](#L712) |  |
| [713](#L713) | foreach ($vars as $var\_name => $var\_value) { |
| [714](#L714) | $var\_name = '[' . $var\_name . ']'; |
| [715](#L715) | $template = str\_ireplace($var\_name, $var\_value, $template); |
| [716](#L716) | } |
| [717](#L717) |  |
| [718](#L718) | $template = apply\_filters('ucp\_get\_template', $template, $vars, $options); |
| [719](#L719) |  |
| [720](#L720) | return $template; |
| [721](#L721) | } // get\_template |
| [722](#L722) |  |
| [723](#L723) |  |
| [724](#L724) | // checks if construction mode is enabled for the current visitor |
| [725](#L725) | static function is\_construction\_mode\_enabled($settings\_only = false) |
| [726](#L726) | { |
| [727](#L727) | $options = self::get\_options(); |
| [728](#L728) | $current\_user = wp\_get\_current\_user(); |
| [729](#L729) |  |
| [730](#L730) | $override\_status = apply\_filters('ucp\_is\_construction\_mode\_enabled', null, $options); |
| [731](#L731) | if (is\_bool($override\_status)) { |
| [732](#L732) | return $override\_status; |
| [733](#L733) | } |
| [734](#L734) |  |
| [735](#L735) | // just check if it's generally enabled |
| [736](#L736) | if ($settings\_only) { |
| [737](#L737) | if ($options['status']) { |
| [738](#L738) | return true; |
| [739](#L739) | } else { |
| [740](#L740) | return false; |
| [741](#L741) | } |
| [742](#L742) | } else { |
| [743](#L743) | // check if enabled for current user |
| [744](#L744) | if (!$options['status']) { |
| [745](#L745) | return false; |
| [746](#L746) | } elseif (self::user\_has\_role($options['whitelisted\_roles'])) { |
| [747](#L747) | return false; |
| [748](#L748) | } elseif (in\_array($current\_user->ID, $options['whitelisted\_users'])) { |
| [749](#L749) | return false; |
| [750](#L750) | } elseif (strlen($options['end\_date']) === 16 && $options['end\_date'] !== '0000-00-00 00:00' && $options['end\_date'] < current\_time('mysql')) { |
| [751](#L751) | return false; |
| [752](#L752) | } else { |
| [753](#L753) | return true; |
| [754](#L754) | } |
| [755](#L755) | } |
| [756](#L756) | } // is\_construction\_mode\_enabled |
| [757](#L757) |  |
| [758](#L758) |  |
| [759](#L759) | // check if user has the specified role |
| [760](#L760) | static function user\_has\_role($roles) |
| [761](#L761) | { |
| [762](#L762) | $current\_user = wp\_get\_current\_user(); |
| [763](#L763) |  |
| [764](#L764) | if ($current\_user->roles) { |
| [765](#L765) | $user\_role = $current\_user->roles[0]; |
| [766](#L766) | } else { |
| [767](#L767) | $user\_role = 'guest'; |
| [768](#L768) | } |
| [769](#L769) |  |
| [770](#L770) | return in\_array($user\_role, $roles); |
| [771](#L771) | } // user\_has\_role |
| [772](#L772) |  |
| [773](#L773) |  |
| [774](#L774) | // frontend notification when UCP is enabled but current user is whitelisted |
| [775](#L775) | static function whitelisted\_notice() |
| [776](#L776) | { |
| [777](#L777) | $notices = get\_option(UCP\_NOTICES\_KEY); |
| [778](#L778) | $dismiss\_url = add\_query\_arg(array('action' => 'ucp\_dismiss\_notice', 'notice' => 'whitelisted', 'redirect' => urlencode($\_SERVER['REQUEST\_URI'])), admin\_url('admin.php')); |
| [779](#L779) |  |
| [780](#L780) | if ( |
| [781](#L781) | empty($notices['dismiss\_whitelisted']) && |
| [782](#L782) | is\_user\_logged\_in() && |
| [783](#L783) | self::is\_construction\_mode\_enabled(true) && |
| [784](#L784) | !self::is\_construction\_mode\_enabled(false) |
| [785](#L785) | ) |
| [786](#L786) | // keeping everything inline due to minimal CSS |
| [787](#L787) | echo '<div style="background-color: #333; line-height: 140%; font-size: 14px; position: fixed; display: block; top: 50px; z-index: 99999; color: #fefefe; padding: 20px 35px 20px 20px; width: 500px; border: thin solid #fefefe; left: -1px;"><a style="color: #ea1919; font-weight: 900; text-decoration: none; position: absolute; top: 7px; right: 10px;" href="' . esc\_url($dismiss\_url) . '" alt="Dismiss notice" onclick="window.location.href = \'' . esc\_url($dismiss\_url) . '\'; return false;" title="Dismiss notice">X</a>' . \_\_('<b>Under Construction Mode is enabled</b> but you are whitelisted so you see the normal site.', 'under-construction-page') . '<br><a href="' . esc\_url(get\_home\_url()) . '/?ucp\_preview" style="text-decoration: underline; color: #fefefe;">' . esc\_attr\_\_('Preview UnderConstructionPage', 'under-construction-page') . '</a><br><a href="' . esc\_url(admin\_url('options-general.php?page=ucp')) . '" style="text-decoration: underline; color: #fefefe;">' . esc\_attr\_\_('Configure UnderConstructionPage', 'under-construction-page') . '</a></div>'; |
| [788](#L788) | } // whitelisted\_notification |
| [789](#L789) |  |
| [790](#L790) |  |
| [791](#L791) | // displays various notices in admin header |
| [792](#L792) | static function admin\_notices() |
| [793](#L793) | { |
| [794](#L794) | $notices = get\_option(UCP\_NOTICES\_KEY); |
| [795](#L795) | $options = self::get\_options(); |
| [796](#L796) | $meta = self::get\_meta(); |
| [797](#L797) | $current\_user = wp\_get\_current\_user(); |
| [798](#L798) | $shown = false; |
| [799](#L799) | $promo = self::is\_promo\_active(); |
| [800](#L800) |  |
| [801](#L801) | $name = ''; |
| [802](#L802) | if (!empty($current\_user->user\_firstname)) { |
| [803](#L803) | $name = ' ' . $current\_user->user\_firstname; |
| [804](#L804) | } |
| [805](#L805) |  |
| [806](#L806) | // pro activated - update |
| [807](#L807) | if (self::is\_plugin\_page() && UCP\_license::is\_activated()) { |
| [808](#L808) | echo '<div id="ucp\_update\_pro" class="notice-error notice">'; |
| [809](#L809) | echo '<p class="center">Thank you for purchasing UnderConstructionPage PRO! <b>Your license has been verified and activated.</b><br>To start using the PRO version, please follow these steps:</p>'; |
| [810](#L810) | echo '<ol>'; |
| [811](#L811) | echo '<li><a href="https://underconstructionpage.com/pro-download/" target="\_blank">Download</a> the latest version of the PRO plugin.</li>'; |
| [812](#L812) | echo '<li>Go to <a href="' . admin\_url('plugin-install.php') . '">Plugins - Add New - Upload Plugin</a> and upload the ZIP you just downloaded.</li>'; |
| [813](#L813) | echo '<li>If asked to replace (overwrite) the free version - confirm it.</li>'; |
| [814](#L814) | echo '<li>Activate the plugin.</li>'; |
| [815](#L815) | echo '<li>That\'s it, no more steps.</li>'; |
| [816](#L816) | echo '</ol>'; |
| [817](#L817) | echo '</div>'; |
| [818](#L818) | $shown = true; |
| [819](#L819) |  |
| [820](#L820) | return; |
| [821](#L821) | } |
| [822](#L822) |  |
| [823](#L823) | // ask for rating; disabled |
| [824](#L824) | if ( |
| [825](#L825) | false && empty($notices['dismiss\_rate']) && |
| [826](#L826) | (time() - $meta['first\_install']) > (DAY\_IN\_SECONDS \* 1.0) |
| [827](#L827) | ) { |
| [828](#L828) | $rate\_url = 'https://wordpress.org/support/plugin/under-construction-page/reviews/#new-post'; |
| [829](#L829) | $dismiss\_url = add\_query\_arg(array('action' => 'ucp\_dismiss\_notice', 'notice' => 'rate', 'redirect' => urlencode($\_SERVER['REQUEST\_URI'])), admin\_url('admin.php')); |
| [830](#L830) |  |
| [831](#L831) | echo '<div id="ucp\_rate\_notice" class="notice-info notice"><p>Hi' . esc\_html($name) . '!<br>We saw you\'ve been using the <b class="ucp-logo" style="font-weight: bold;">UnderConstructionPage</b> plugin for a few days (that\'s awesome!) and wanted to ask for your help to <b>make the plugin better</b>.<br>We just need a minute of your time to rate the plugin. It helps us out a lot!'; |
| [832](#L832) |  |
| [833](#L833) | echo '<br><a target="\_blank" href="' . esc\_url($rate\_url) . '" style="vertical-align: baseline; margin-top: 15px;" class="button-primary">' . esc\_attr\_\_('Help make the plugin better by rating it', 'under-construction-page') . '</a>'; |
| [834](#L834) | echo '&nbsp;&nbsp;&nbsp;&nbsp;<a href="' . esc\_url($dismiss\_url) . '">' . esc\_attr\_\_('I\'ve already rated the plugin', 'under-construction-page') . '</a>'; |
| [835](#L835) | echo '<br><br><b>' . esc\_attr\_\_('Thank you very much! The UCP team', 'under-construction-page') . '</b>'; |
| [836](#L836) | echo '</p></div>'; |
| [837](#L837) | $shown = true; |
| [838](#L838) | } |
| [839](#L839) |  |
| [840](#L840) | // end date in past |
| [841](#L841) | if (self::is\_plugin\_page() && self::is\_construction\_mode\_enabled(true) && !empty($options['end\_date']) && $options['end\_date'] != '0000-00-00 00:00' && $options['end\_date'] < current\_time('mysql')) { |
| [842](#L842) | echo '<div id="ucp\_end\_date\_notice" class="notice-error notice"><p>Under construction mode is enabled but the <a href="#end\_date" class="change\_tab" data-tab="0">end date</a> is set to a past date so the <b>under construction page will not be shown</b>. Either move the <a href="#end\_date" class="change\_tab" data-tab="0">end date</a> to a future date or disable it.</p></div>'; |
| [843](#L843) | $shown = true; |
| [844](#L844) | } |
| [845](#L845) |  |
| [846](#L846) | // ask for translation |
| [847](#L847) | // disabled till further notice |
| [848](#L848) | if ( |
| [849](#L849) | false && self::is\_plugin\_page() && |
| [850](#L850) | empty($notices['dismiss\_translate']) && |
| [851](#L851) | (time() - $meta['first\_install']) > 1 |
| [852](#L852) | ) { |
| [853](#L853) | $translate\_url = self::generate\_web\_link('translate-notification', 'translate-the-plugin/'); |
| [854](#L854) | $dismiss\_url = add\_query\_arg(array('action' => 'ucp\_dismiss\_notice', 'notice' => 'translate', 'redirect' => urlencode($\_SERVER['REQUEST\_URI'])), admin\_url('admin.php')); |
| [855](#L855) |  |
| [856](#L856) | echo '<div id="ucp\_rate\_notice" class="notice-info notice"><p>Hi' . esc\_html($name) . ',<br>Help us translate UCP into your language and <b>get a PRO license for free</b>!<br>We want to make <b class="ucp-logo" style="font-weight: bold;">UnderConstructionPage</b> accessible to as many users as possible by translating it into their language. And we need your help!'; |
| [857](#L857) |  |
| [858](#L858) | echo '<br><a target="\_blank" href="' . esc\_url($translate\_url) . '" style="vertical-align: baseline; margin-top: 15px;" class="button-primary">' . esc\_attr\_\_('Translate UCP into your language &amp; get a PRO license for free', 'under-construction-page') . '</a>'; |
| [859](#L859) | echo '&nbsp;&nbsp;&nbsp;&nbsp;<a href="' . esc\_url($dismiss\_url) . '">' . esc\_attr\_\_('I\'m not interested (remove this notice)', 'under-construction-page') . '</a>'; |
| [860](#L860) | echo '</p></div>'; |
| [861](#L861) | $shown = true; |
| [862](#L862) | } |
| [863](#L863) |  |
| [864](#L864) | // promo for new users |
| [865](#L865) | if ( |
| [866](#L866) | self::is\_plugin\_page() && |
| [867](#L867) | empty($notices['dismiss\_welcome']) && |
| [868](#L868) | !$shown && $promo == 'welcome' |
| [869](#L869) | ) { |
| [870](#L870) | $dismiss\_url = add\_query\_arg(array('action' => 'ucp\_dismiss\_notice', 'notice' => 'welcome', 'redirect' => urlencode($\_SERVER['REQUEST\_URI'])), admin\_url('admin.php')); |
| [871](#L871) |  |
| [872](#L872) | echo '<div id="ucp\_rate\_notice" class="notice-info notice"><p>Hi' . esc\_html($name) . ',<br>'; |
| [873](#L873) | echo 'We have a <a class="open-ucp-upsell" data-pro-ad="notification-welcome-text" href="#">special time-sensitive offer</a> available just for another <b class="ucp-countdown">59min</b>! A <b>20% DISCOUNT</b> on our most popular lifetime licenses!<br>No nonsense! Pay once and use the plugin forever. <a class="open-ucp-upsell" data-pro-ad="notification-welcome-text2" href="#">Get</a> more than 50+ extra features, 250+ premium themes and over two million professional images.</p>'; |
| [874](#L874) |  |
| [875](#L875) | echo '<a href="#" class="button-primary open-ucp-upsell" data-pro-ad="notification-welcome-button">Upgrade to PRO now with a SPECIAL 20% WELCOME DISCOUNT</a>'; |
| [876](#L876) | echo '&nbsp;&nbsp;&nbsp;&nbsp;<a href="' . esc\_url($dismiss\_url) . '"><small>' . esc\_attr\_\_('I\'m not interested (remove this notice)', 'under-construction-page') . '</small></a>'; |
| [877](#L877) | echo '</p></div>'; |
| [878](#L878) | $shown = true; |
| [879](#L879) | } |
| [880](#L880) |  |
| [881](#L881) | // promo for old users |
| [882](#L882) | if ( |
| [883](#L883) | self::is\_plugin\_page() && |
| [884](#L884) | empty($notices['dismiss\_olduser']) && |
| [885](#L885) | !$shown && $promo == 'olduser' |
| [886](#L886) | ) { |
| [887](#L887) | $dismiss\_url = add\_query\_arg(array('action' => 'ucp\_dismiss\_notice', 'notice' => 'olduser', 'redirect' => urlencode($\_SERVER['REQUEST\_URI'])), admin\_url('admin.php')); |
| [888](#L888) |  |
| [889](#L889) | echo '<div id="ucp\_rate\_notice" class="notice-info notice"><p>Hi' . esc\_html($name) . ',<br>'; |
| [890](#L890) | echo 'We have a <a class="open-ucp-upsell" data-pro-ad="notification-olduser-text" href="#">special offer</a> only for <b>users like you</b> who\'ve been using the UnderConstructionPage for a longer period of time: a <b>special DISCOUNT</b> on our most popular lifetime licenses!<br>No nonsense! Pay once and use the plugin forever.<br><a class="open-ucp-upsell" data-pro-ad="notification-olduser-text" href="#">Upgrade now</a> to <b>PRO</b> &amp; get more than 50+ extra features, 220+ premium themes and over two million HD images.</p>'; |
| [891](#L891) |  |
| [892](#L892) | echo '<a href="#" class="button-primary open-ucp-upsell" data-pro-ad="notification-olduser-button">Upgrade to PRO now with a SPECIAL DISCOUNT</a>'; |
| [893](#L893) | echo '&nbsp;&nbsp;&nbsp;&nbsp;<a href="' . esc\_url($dismiss\_url) . '"><small>' . esc\_attr\_\_('I\'m not interested (remove this notice)', 'under-construction-page') . '</small></a>'; |
| [894](#L894) | echo '</p></div>'; |
| [895](#L895) | $shown = true; |
| [896](#L896) | } |
| [897](#L897) | } // notices |
| [898](#L898) |  |
| [899](#L899) |  |
| [900](#L900) | // handle dismiss button for notices |
| [901](#L901) | static function dismiss\_notice() |
| [902](#L902) | { |
| [903](#L903) | if (empty($\_GET['notice'])) { |
| [904](#L904) | wp\_safe\_redirect(admin\_url()); |
| [905](#L905) | exit; |
| [906](#L906) | } |
| [907](#L907) |  |
| [908](#L908) | $notices = get\_option(UCP\_NOTICES\_KEY, array()); |
| [909](#L909) | $notice = sanitize\_text\_field($\_GET['notice']); |
| [910](#L910) |  |
| [911](#L911) | if ($notice == 'rate') { |
| [912](#L912) | $notices['dismiss\_rate'] = true; |
| [913](#L913) | } elseif ($notice == 'translate') { |
| [914](#L914) | $notices['dismiss\_translate'] = true; |
| [915](#L915) | } elseif ($notice == 'whitelisted') { |
| [916](#L916) | $notices['dismiss\_whitelisted'] = true; |
| [917](#L917) | } elseif ($notice == 'olduser') { |
| [918](#L918) | $notices['dismiss\_olduser'] = true; |
| [919](#L919) | } elseif ($notice == 'welcome') { |
| [920](#L920) | $notices['dismiss\_welcome'] = true; |
| [921](#L921) | } else { |
| [922](#L922) | wp\_safe\_redirect(admin\_url()); |
| [923](#L923) | exit; |
| [924](#L924) | } |
| [925](#L925) |  |
| [926](#L926) | update\_option(UCP\_NOTICES\_KEY, $notices); |
| [927](#L927) |  |
| [928](#L928) | if (!empty($\_GET['redirect'])) { |
| [929](#L929) | wp\_safe\_redirect($\_GET['redirect']); |
| [930](#L930) | } else { |
| [931](#L931) | wp\_safe\_redirect(admin\_url()); |
| [932](#L932) | } |
| [933](#L933) |  |
| [934](#L934) | exit; |
| [935](#L935) | } // dismiss\_notice |
| [936](#L936) |  |
| [937](#L937) |  |
| [938](#L938) | // reset all settings to default values |
| [939](#L939) | static function reset\_settings() |
| [940](#L940) | { |
| [941](#L941) | check\_admin\_referer('ucp\_reset\_settings'); |
| [942](#L942) |  |
| [943](#L943) | if (false === current\_user\_can('administrator')) { |
| [944](#L944) | wp\_safe\_redirect(admin\_url()); |
| [945](#L945) | exit; |
| [946](#L946) | } |
| [947](#L947) |  |
| [948](#L948) | $options = self::default\_options(); |
| [949](#L949) | update\_option(UCP\_OPTIONS\_KEY, $options); |
| [950](#L950) |  |
| [951](#L951) | if (!empty($\_GET['redirect'])) { |
| [952](#L952) | wp\_safe\_redirect($\_GET['redirect']); |
| [953](#L953) | } else { |
| [954](#L954) | wp\_safe\_redirect(admin\_url()); |
| [955](#L955) | } |
| [956](#L956) |  |
| [957](#L957) | exit; |
| [958](#L958) | } // reset\_settings |
| [959](#L959) |  |
| [960](#L960) |  |
| [961](#L961) | // change status via admin bar |
| [962](#L962) | static function change\_status() |
| [963](#L963) | { |
| [964](#L964) | check\_admin\_referer('ucp\_change\_status'); |
| [965](#L965) |  |
| [966](#L966) | if (false === current\_user\_can('administrator') || empty($\_GET['new\_status'])) { |
| [967](#L967) | wp\_safe\_redirect(admin\_url()); |
| [968](#L968) | exit; |
| [969](#L969) | } |
| [970](#L970) |  |
| [971](#L971) | $options = self::get\_options(); |
| [972](#L972) |  |
| [973](#L973) | if (sanitize\_text\_field($\_GET['new\_status']) == 'enabled') { |
| [974](#L974) | $options['status'] = '1'; |
| [975](#L975) | } else { |
| [976](#L976) | $options['status'] = '0'; |
| [977](#L977) | } |
| [978](#L978) |  |
| [979](#L979) | update\_option(UCP\_OPTIONS\_KEY, $options); |
| [980](#L980) |  |
| [981](#L981) | if (!empty($\_GET['redirect'])) { |
| [982](#L982) | wp\_safe\_redirect($\_GET['redirect']); |
| [983](#L983) | } else { |
| [984](#L984) | wp\_safe\_redirect(admin\_url()); |
| [985](#L985) | } |
| [986](#L986) |  |
| [987](#L987) | exit; |
| [988](#L988) | } // change\_status |
| [989](#L989) |  |
| [990](#L990) |  |
| [991](#L991) | static function admin\_bar\_style() |
| [992](#L992) | { |
| [993](#L993) | // admin bar has to be anabled, user an admin and custom filter true |
| [994](#L994) | if (false === is\_admin\_bar\_showing() || false === current\_user\_can('administrator') || false === apply\_filters('ucp\_show\_admin\_bar', true)) { |
| [995](#L995) | return; |
| [996](#L996) | } |
| [997](#L997) |  |
| [998](#L998) | // no sense in loading a new CSS file for 2 lines of CSS |
| [999](#L999) | echo '<style type="text/css">'; |
| [1000](#L1000) | $custom\_css = '#wpadminbar ul li#wp-admin-bar-ucp-info { padding: 5px 0; } #wpadminbar ul li#wp-admin-bar-ucp-settings, #wpadminbar ul li#wp-admin-bar-ucp-status { padding-bottom: 2px; } #wpadminbar i.ucp-status-dot { font-size: 17px; margin-top: -7px; color: #02ca02; height: 17px; display: inline-block; } #wpadminbar i.ucp-status-dot-enabled { color: #87c826; } #wpadminbar i.ucp-status-dot-disabled { color: #ea1919; } #wpadminbar #ucp-status-wrapper { display: inline; border: 1px solid rgba(240,245,250,.7); padding: 0; margin: 0 0 0 5px; background: rgb(35, 40, 45); } #wpadminbar .ucp-status-btn { padding: 0 7px; color: #fff; } #wpadminbar #ucp-status-wrapper.off #ucp-status-off { background: #ea1919;} #wpadminbar #ucp-status-wrapper.on #ucp-status-on { background: #66b317; }#wp-admin-bar-under-construction-page img.logo { height: 17px; margin-bottom: 4px; padding-right: 3px; } body.wp-admin #wp-admin-bar-under-construction-page img.logo { margin-bottom: -4px; }'; |
| [1001](#L1001) | self::wp\_kses\_wf($custom\_css); |
| [1002](#L1002) | echo '</style>'; |
| [1003](#L1003) | } // admin\_bar\_style |
| [1004](#L1004) |  |
| [1005](#L1005) |  |
| [1006](#L1006) | // add admin bar menu and status |
| [1007](#L1007) | static function admin\_bar() |
| [1008](#L1008) | { |
| [1009](#L1009) | global $wp\_admin\_bar; |
| [1010](#L1010) |  |
| [1011](#L1011) | // only show to admins |
| [1012](#L1012) | if (false === current\_user\_can('administrator') || false === apply\_filters('ucp\_show\_admin\_bar', true)) { |
| [1013](#L1013) | return; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | if (self::is\_construction\_mode\_enabled(true)) { |
| [1017](#L1017) | $main\_label = '<img style="height: 17px; margin-bottom: -4px; padding-right: 3px;" src="' . UCP\_PLUGIN\_URL . 'images/ucp\_icon.png" alt="' . esc\_attr\_\_('Under construction mode is enabled', 'under-construction-page') . '" title="' . esc\_attr\_\_('Under construction mode is enabled', 'under-construction-page') . '"> <span class="ab-label">' . esc\_attr\_\_('UnderConstruction', 'under-construction-page') . ' <i class="ucp-status-dot ucp-status-dot-enabled">&#9679;</i></span>'; |
| [1018](#L1018) | $class = 'ucp-enabled'; |
| [1019](#L1019) | $action\_url = add\_query\_arg(array('action' => 'ucp\_change\_status', 'new\_status' => 'disabled', 'redirect' => urlencode($\_SERVER['REQUEST\_URI'])), admin\_url('admin.php')); |
| [1020](#L1020) | $action\_url = wp\_nonce\_url($action\_url, 'ucp\_change\_status'); |
| [1021](#L1021) | $action = esc\_attr\_\_('Under Construction Mode', 'under-construction-page'); |
| [1022](#L1022) | $action .= '<a href="' . $action\_url . '" id="ucp-status-wrapper" class="on"><span id="ucp-status-off" class="ucp-status-btn">OFF</span><span id="ucp-status-on" class="ucp-status-btn">ON</span></a>'; |
| [1023](#L1023) | } else { |
| [1024](#L1024) | $main\_label = '<img style="height: 17px; margin-bottom: -4px; padding-right: 3px;" src="' . UCP\_PLUGIN\_URL . 'images/ucp\_icon.png" alt="' . esc\_attr\_\_('Under construction mode is disabled', 'under-construction-page') . '" title="' . esc\_attr\_\_('Under construction mode is disabled', 'under-construction-page') . '"> <span class="ab-label">' . esc\_attr\_\_('UnderConstruction', 'under-construction-page') . ' <i class="ucp-status-dot ucp-status-dot-disabled">&#9679;</i></span>'; |
| [1025](#L1025) | $class = 'ucp-disabled'; |
| [1026](#L1026) | $action\_url = add\_query\_arg(array('action' => 'ucp\_change\_status', 'new\_status' => 'enabled', 'redirect' => urlencode($\_SERVER['REQUEST\_URI'])), admin\_url('admin.php')); |
| [1027](#L1027) | $action\_url = wp\_nonce\_url($action\_url, 'ucp\_change\_status'); |
| [1028](#L1028) | $action = esc\_attr\_\_('Under Construction Mode', 'under-construction-page'); |
| [1029](#L1029) | $action .= '<a href="' . $action\_url . '" id="ucp-status-wrapper" class="off"><span id="ucp-status-off" class="ucp-status-btn">OFF</span><span id="ucp-status-on" class="ucp-status-btn">ON</span></a>'; |
| [1030](#L1030) | } |
| [1031](#L1031) |  |
| [1032](#L1032) | $wp\_admin\_bar->add\_menu(array( |
| [1033](#L1033) | 'parent' => '', |
| [1034](#L1034) | 'id'     => 'under-construction-page', |
| [1035](#L1035) | 'title'  => $main\_label, |
| [1036](#L1036) | 'href'   => admin\_url('options-general.php?page=ucp'), |
| [1037](#L1037) | 'meta'   => array('class' => $class) |
| [1038](#L1038) | )); |
| [1039](#L1039) | $wp\_admin\_bar->add\_node(array( |
| [1040](#L1040) | 'id'    => 'ucp-status', |
| [1041](#L1041) | 'title' => $action, |
| [1042](#L1042) | 'href'  => false, |
| [1043](#L1043) | 'parent' => 'under-construction-page' |
| [1044](#L1044) | )); |
| [1045](#L1045) | $wp\_admin\_bar->add\_node(array( |
| [1046](#L1046) | 'id'     => 'ucp-preview', |
| [1047](#L1047) | 'title'  => esc\_attr\_\_('Preview', 'under-construction-page'), |
| [1048](#L1048) | 'meta'   => array('target' => 'blank'), |
| [1049](#L1049) | 'href'   => get\_home\_url() . '/?ucp\_preview', |
| [1050](#L1050) | 'parent' => 'under-construction-page' |
| [1051](#L1051) | )); |
| [1052](#L1052) | $wp\_admin\_bar->add\_node(array( |
| [1053](#L1053) | 'id'     => 'ucp-settings', |
| [1054](#L1054) | 'title'  => esc\_attr\_\_('Settings', 'under-construction-page'), |
| [1055](#L1055) | 'href'   => admin\_url('options-general.php?page=ucp'), |
| [1056](#L1056) | 'parent' => 'under-construction-page' |
| [1057](#L1057) | )); |
| [1058](#L1058) | } // admin\_bar |
| [1059](#L1059) |  |
| [1060](#L1060) |  |
| [1061](#L1061) | // show under construction notice on WP login form |
| [1062](#L1062) | static function login\_message($message) |
| [1063](#L1063) | { |
| [1064](#L1064) | if (self::is\_construction\_mode\_enabled(true)) { |
| [1065](#L1065) | $message .= '<div class="message">' . \_\_('Under Construction Mode is <b>enabled</b>.', 'under-construction-page') . '</div>'; |
| [1066](#L1066) | } |
| [1067](#L1067) |  |
| [1068](#L1068) | return $message; |
| [1069](#L1069) | } // login\_notice |
| [1070](#L1070) |  |
| [1071](#L1071) |  |
| [1072](#L1072) | // add settings link to plugins page |
| [1073](#L1073) | static function plugin\_action\_links($links) |
| [1074](#L1074) | { |
| [1075](#L1075) | $settings\_link = '<a href="' . admin\_url('options-general.php?page=ucp') . '" title="' . esc\_attr\_\_('UnderConstruction Settings', 'under-construction-page') . '">' . esc\_attr\_\_('Settings', 'under-construction-page') . '</a>'; |
| [1076](#L1076) | $pro\_link = '<a target="\_blank" href="' . self::generate\_web\_link('plugins-table-left') . '" title="' . esc\_attr\_\_('Get PRO', 'under-construction-page') . '">' . \_\_('Go <b>PRO</b>', 'under-construction-page') . '</a>'; |
| [1077](#L1077) |  |
| [1078](#L1078) | array\_unshift($links, $pro\_link); |
| [1079](#L1079) | array\_unshift($links, $settings\_link); |
| [1080](#L1080) |  |
| [1081](#L1081) | return $links; |
| [1082](#L1082) | } // plugin\_action\_links |
| [1083](#L1083) |  |
| [1084](#L1084) |  |
| [1085](#L1085) | // add links to plugin's description in plugins table |
| [1086](#L1086) | static function plugin\_meta\_links($links, $file) |
| [1087](#L1087) | { |
| [1088](#L1088) | $support\_link = '<a target="\_blank" href="https://wordpress.org/support/plugin/under-construction-page" title="' . esc\_attr\_\_('Get help', 'under-construction-page') . '">' . esc\_attr\_\_('Support', 'under-construction-page') . '</a>'; |
| [1089](#L1089) | $pro\_link = '<a target="\_blank" href="' . self::generate\_web\_link('plugins-table-right') . '" title="' . esc\_attr\_\_('Get PRO', 'under-construction-page') . '">' . \_\_('Get the <b>PRO</b> version', 'under-construction-page') . '</a>'; |
| [1090](#L1090) |  |
| [1091](#L1091) |  |
| [1092](#L1092) | if ($file == plugin\_basename(\_\_FILE\_\_)) { |
| [1093](#L1093) | $links[] = $support\_link; |
| [1094](#L1094) | $links[] = $pro\_link; |
| [1095](#L1095) | } |
| [1096](#L1096) |  |
| [1097](#L1097) | return $links; |
| [1098](#L1098) | } // plugin\_meta\_links |
| [1099](#L1099) |  |
| [1100](#L1100) |  |
| [1101](#L1101) | // additional powered by text in admin footer; only on UCP page |
| [1102](#L1102) | static function admin\_footer\_text($text) |
| [1103](#L1103) | { |
| [1104](#L1104) | if (!self::is\_plugin\_page()) { |
| [1105](#L1105) | return $text; |
| [1106](#L1106) | } |
| [1107](#L1107) |  |
| [1108](#L1108) | $text = '<i><a href="' . self::generate\_web\_link('admin-footer') . '" title="' . esc\_attr\_\_('Visit UCP\'s site for more info', 'under-construction-page') . '" target="\_blank">' . esc\_attr\_\_('UnderConstructionPage', 'under-construction-page') . '</a> v' . self::$version . ' by <a href="https://www.webfactoryltd.com/" title="' . esc\_attr\_\_('Visit our site to get more great plugins', 'under-construction-page') . '" target="\_blank">' . esc\_attr\_\_('WebFactory Ltd', 'under-construction-page') . '</a>. Please <a target="\_blank" href="https://wordpress.org/support/plugin/under-construction-page/reviews/#new-post" title="Rate the plugin">rate the plugin <span>★★★★★</span></a> to help us spread the word. Thank you!</i>'; |
| [1109](#L1109) |  |
| [1110](#L1110) | return $text; |
| [1111](#L1111) | } // admin\_footer\_text |
| [1112](#L1112) |  |
| [1113](#L1113) |  |
| [1114](#L1114) | // fix for opening the plugin install modal |
| [1115](#L1115) | static function admin\_footer() |
| [1116](#L1116) | { |
| [1117](#L1117) | if (empty($\_GET['fix-install-button']) || empty($\_GET['tab']) || sanitize\_text\_field($\_GET['tab']) != 'plugin-information') { |
| [1118](#L1118) | return; |
| [1119](#L1119) | } |
| [1120](#L1120) |  |
| [1121](#L1121) | echo '<script>'; |
| [1122](#L1122) | echo "jQuery('#plugin\_install\_from\_iframe').on('click', function() { window.location.href = jQuery(this).attr('href'); return false;});"; |
| [1123](#L1123) | echo '</script>'; |
| [1124](#L1124) | } // admin\_footer |
| [1125](#L1125) |  |
| [1126](#L1126) |  |
| [1127](#L1127) | // test if we're on plugin's page |
| [1128](#L1128) | static function is\_plugin\_page() |
| [1129](#L1129) | { |
| [1130](#L1130) | $current\_screen = get\_current\_screen(); |
| [1131](#L1131) |  |
| [1132](#L1132) | if ($current\_screen->id == 'settings\_page\_ucp') { |
| [1133](#L1133) | return true; |
| [1134](#L1134) | } else { |
| [1135](#L1135) | return false; |
| [1136](#L1136) | } |
| [1137](#L1137) | } // is\_plugin\_page |
| [1138](#L1138) |  |
| [1139](#L1139) |  |
| [1140](#L1140) | // create the admin menu item |
| [1141](#L1141) | static function admin\_menu() |
| [1142](#L1142) | { |
| [1143](#L1143) | add\_options\_page(esc\_attr\_\_('UnderConstruction', 'under-construction-page'), esc\_attr\_\_('UnderConstruction', 'under-construction-page'), 'manage\_options', 'ucp', array(\_\_CLASS\_\_, 'main\_page')); |
| [1144](#L1144) | } // admin\_menu |
| [1145](#L1145) |  |
| [1146](#L1146) |  |
| [1147](#L1147) | // all settings are saved in one option |
| [1148](#L1148) | static function register\_settings() |
| [1149](#L1149) | { |
| [1150](#L1150) | register\_setting(UCP\_OPTIONS\_KEY, UCP\_OPTIONS\_KEY, array(\_\_CLASS\_\_, 'sanitize\_settings')); |
| [1151](#L1151) | } // register\_settings |
| [1152](#L1152) |  |
| [1153](#L1153) |  |
| [1154](#L1154) | // set default settings |
| [1155](#L1155) | static function default\_options() |
| [1156](#L1156) | { |
| [1157](#L1157) | $defaults = array( |
| [1158](#L1158) | 'status' => '0', |
| [1159](#L1159) | 'license\_key' => '', |
| [1160](#L1160) | 'license\_active' => false, |
| [1161](#L1161) | 'license\_expires' => '1900-01-01', |
| [1162](#L1162) | 'license\_type' => '', |
| [1163](#L1163) | 'end\_date' => '', |
| [1164](#L1164) | 'ga\_tracking\_id' => '', |
| [1165](#L1165) | 'theme' => 'mad\_designer', |
| [1166](#L1166) | 'custom\_css' => '', |
| [1167](#L1167) | 'title' => '[site-title] is under construction', |
| [1168](#L1168) | 'description' => '[site-tagline]', |
| [1169](#L1169) | 'heading1' => esc\_attr\_\_('Sorry, we\'re doing some work on the site', 'under-construction-page'), |
| [1170](#L1170) | 'content' => esc\_attr\_\_('Thank you for being patient. We are doing some work on the site and will be back shortly.', 'under-construction-page'), |
| [1171](#L1171) | 'social\_facebook' => '', |
| [1172](#L1172) | 'social\_twitter' => '', |
| [1173](#L1173) | 'social\_linkedin' => '', |
| [1174](#L1174) | 'social\_youtube' => '', |
| [1175](#L1175) | 'social\_vimeo' => '', |
| [1176](#L1176) | 'social\_pinterest' => '', |
| [1177](#L1177) | 'social\_dribbble' => '', |
| [1178](#L1178) | 'social\_behance' => '', |
| [1179](#L1179) | 'social\_instagram' => '', |
| [1180](#L1180) | 'social\_tumblr' => '', |
| [1181](#L1181) | 'social\_vk' => '', |
| [1182](#L1182) | 'social\_email' => '', |
| [1183](#L1183) | 'social\_phone' => '', |
| [1184](#L1184) | 'social\_skype' => '', |
| [1185](#L1185) | 'social\_telegram' => '', |
| [1186](#L1186) | 'social\_whatsapp' => '', |
| [1187](#L1187) | 'login\_button' => '1', |
| [1188](#L1188) | 'linkback' => '0', |
| [1189](#L1189) | 'whitelisted\_roles' => array('administrator'), |
| [1190](#L1190) | 'whitelisted\_users' => array() |
| [1191](#L1191) | ); |
| [1192](#L1192) |  |
| [1193](#L1193) | return $defaults; |
| [1194](#L1194) | } // default\_options |
| [1195](#L1195) |  |
| [1196](#L1196) |  |
| [1197](#L1197) | // sanitize settings on save |
| [1198](#L1198) | static function sanitize\_settings($options) |
| [1199](#L1199) | { |
| [1200](#L1200) | $old\_options = self::get\_options(); |
| [1201](#L1201) |  |
| [1202](#L1202) | foreach ($options as $key => $value) { |
| [1203](#L1203) | switch ($key) { |
| [1204](#L1204) | case 'title': |
| [1205](#L1205) | case 'description': |
| [1206](#L1206) | $options[$key] = trim(strip\_tags($value)); |
| [1207](#L1207) | break; |
| [1208](#L1208) | case 'heading1': |
| [1209](#L1209) | case 'content': |
| [1210](#L1210) | $options[$key] = trim(wp\_kses($value, wp\_kses\_allowed\_html('post'))); |
| [1211](#L1211) | break; |
| [1212](#L1212) | case 'custom\_css': |
| [1213](#L1213) | case 'social\_facebook': |
| [1214](#L1214) | case 'social\_twitter': |
| [1215](#L1215) | case 'social\_linkedin': |
| [1216](#L1216) | case 'social\_youtube': |
| [1217](#L1217) | case 'social\_vimeo': |
| [1218](#L1218) | case 'social\_pinterest': |
| [1219](#L1219) | case 'social\_dribbble': |
| [1220](#L1220) | case 'social\_behance': |
| [1221](#L1221) | case 'social\_instagram': |
| [1222](#L1222) | case 'social\_tumblr': |
| [1223](#L1223) | case 'social\_vk': |
| [1224](#L1224) | case 'social\_email': |
| [1225](#L1225) | case 'social\_phone': |
| [1226](#L1226) | case 'social\_telegram': |
| [1227](#L1227) | case 'social\_whatsapp': |
| [1228](#L1228) | case 'license\_key': |
| [1229](#L1229) | $options[$key] = trim(strip\_tags($value)); |
| [1230](#L1230) | break; |
| [1231](#L1231) | case 'ga\_tracking\_id': |
| [1232](#L1232) | $options[$key] = substr(strtoupper(trim($value)), 0, 15); |
| [1233](#L1233) | break; |
| [1234](#L1234) | case 'end\_date': |
| [1235](#L1235) | $options[$key] = substr(trim($value), 0, 16); |
| [1236](#L1236) | break; |
| [1237](#L1237) | } // switch |
| [1238](#L1238) | } // foreach |
| [1239](#L1239) |  |
| [1240](#L1240) | $options['title'] = strip\_tags($options['title']); |
| [1241](#L1241) | $options['description'] = strip\_tags($options['description']); |
| [1242](#L1242) | $options['heading1'] = strip\_tags($options['heading1'], '<br><a><b><strong><i><em><p><del><img>'); |
| [1243](#L1243) | $options['content'] = strip\_tags($options['content'], '<br><a><b><strong><i><em><p><del><img><ul><ol><li><blockquote><ins><code><hr><h2><h3><h4><span><div><iframe>'); |
| [1244](#L1244) |  |
| [1245](#L1245) | $options['whitelisted\_roles'] = empty($options['whitelisted\_roles']) ? array() : $options['whitelisted\_roles']; |
| [1246](#L1246) | $options['whitelisted\_users'] = empty($options['whitelisted\_users']) ? array() : $options['whitelisted\_users']; |
| [1247](#L1247) | $options = self::check\_var\_isset($options, array('status' => 0, 'linkback' => 0, 'login\_button' => 0)); |
| [1248](#L1248) |  |
| [1249](#L1249) | if (empty($options['end\_date\_toggle'])) { |
| [1250](#L1250) | $options['end\_date'] = ''; |
| [1251](#L1251) | } |
| [1252](#L1252) | if ($options['end\_date'] == '0000-00-00 00:00') { |
| [1253](#L1253) | $options['end\_date'] = ''; |
| [1254](#L1254) | } |
| [1255](#L1255) | unset($options['end\_date\_toggle']); |
| [1256](#L1256) |  |
| [1257](#L1257) | if (empty($options['ga\_tracking\_toggle'])) { |
| [1258](#L1258) | $options['ga\_tracking\_id'] = ''; |
| [1259](#L1259) | } |
| [1260](#L1260) | if (!empty($options['ga\_tracking\_id']) && preg\_match('/^UA-\d{3,}-\d{1,3}$/', $options['ga\_tracking\_id']) === 0) { |
| [1261](#L1261) | add\_settings\_error('ucp', 'ga\_tracking\_id', esc\_attr\_\_('Please enter a valid Google Analytics Tracking ID or disable tracking.', 'under-construction-page')); |
| [1262](#L1262) | } |
| [1263](#L1263) | unset($options['ga\_tracking\_toggle']); |
| [1264](#L1264) |  |
| [1265](#L1265) | if (!empty($\_POST['license-submit'])) { |
| [1266](#L1266) | if (empty($options['license\_key'])) { |
| [1267](#L1267) | $options['license\_type'] = ''; |
| [1268](#L1268) | $options['license\_expires'] = '1900-01-01'; |
| [1269](#L1269) | $options['license\_active'] = false; |
| [1270](#L1270) | $options['license\_key'] = ''; |
| [1271](#L1271) | add\_settings\_error(UCP\_OPTIONS\_KEY, 'license\_key', esc\_attr\_\_('License key saved.', 'under-construction-page'), 'updated'); |
| [1272](#L1272) | } else { |
| [1273](#L1273) | $tmp = UCP\_license::validate\_license\_key($options['license\_key']); |
| [1274](#L1274) | if ($tmp['success']) { |
| [1275](#L1275) | $options['license\_type'] = $tmp['license\_type']; |
| [1276](#L1276) | $options['license\_expires'] = $tmp['license\_expires']; |
| [1277](#L1277) | $options['license\_active'] = $tmp['license\_active']; |
| [1278](#L1278) | if ($tmp['license\_active']) { |
| [1279](#L1279) | add\_settings\_error(UCP\_OPTIONS\_KEY, 'license\_key', esc\_attr\_\_('License key saved and activated!', 'under-construction-page'), 'updated'); |
| [1280](#L1280) | } else { |
| [1281](#L1281) | add\_settings\_error(UCP\_OPTIONS\_KEY, 'license\_key', 'License not active. ' . $tmp['error'], 'error'); |
| [1282](#L1282) | } |
| [1283](#L1283) | } else { |
| [1284](#L1284) | add\_settings\_error(UCP\_OPTIONS\_KEY, 'license\_key', 'Unable to contact licensing server. Please try again in a few moments.', 'error'); |
| [1285](#L1285) | } |
| [1286](#L1286) | } |
| [1287](#L1287) | } // update license |
| [1288](#L1288) |  |
| [1289](#L1289) | // empty cache in 3rd party plugins |
| [1290](#L1290) | if ($options != $old\_options) { |
| [1291](#L1291) | $notices = get\_option(UCP\_NOTICES\_KEY); |
| [1292](#L1292) | unset($notices['dismiss\_whitelisted']); |
| [1293](#L1293) | update\_option(UCP\_NOTICES\_KEY, $notices); |
| [1294](#L1294) | self::empty\_cache(); |
| [1295](#L1295) | } |
| [1296](#L1296) |  |
| [1297](#L1297) | return array\_merge($old\_options, $options); |
| [1298](#L1298) | } // sanitize\_settings |
| [1299](#L1299) |  |
| [1300](#L1300) |  |
| [1301](#L1301) | static function empty\_cache() |
| [1302](#L1302) | { |
| [1303](#L1303) | wp\_cache\_flush(); |
| [1304](#L1304) | if (function\_exists('w3tc\_flush\_all')) { |
| [1305](#L1305) | w3tc\_flush\_all(); |
| [1306](#L1306) | } |
| [1307](#L1307) | if (function\_exists('wp\_cache\_clear\_cache')) { |
| [1308](#L1308) | wp\_cache\_clear\_cache(); |
| [1309](#L1309) | } |
| [1310](#L1310) | if (method\_exists('LiteSpeed\_Cache\_API', 'purge\_all')) { |
| [1311](#L1311) | LiteSpeed\_Cache\_API::purge\_all(); |
| [1312](#L1312) | } |
| [1313](#L1313) | if (class\_exists('Endurance\_Page\_Cache')) { |
| [1314](#L1314) | $epc = new Endurance\_Page\_Cache; |
| [1315](#L1315) | $epc->purge\_all(); |
| [1316](#L1316) | } |
| [1317](#L1317) | if (class\_exists('SG\_CachePress\_Supercacher') && method\_exists('SG\_CachePress\_Supercacher', 'purge\_cache')) { |
| [1318](#L1318) | SG\_CachePress\_Supercacher::purge\_cache(true); |
| [1319](#L1319) | } |
| [1320](#L1320) | if (class\_exists('SiteGround\_Optimizer\Supercacher\Supercacher')) { |
| [1321](#L1321) | SiteGround\_Optimizer\Supercacher\Supercacher::purge\_cache(); |
| [1322](#L1322) | } |
| [1323](#L1323) | if (isset($GLOBALS['wp\_fastest\_cache']) && method\_exists($GLOBALS['wp\_fastest\_cache'], 'deleteCache')) { |
| [1324](#L1324) | $GLOBALS['wp\_fastest\_cache']->deleteCache(true); |
| [1325](#L1325) | } |
| [1326](#L1326) | if (is\_callable(array('Swift\_Performance\_Cache', 'clear\_all\_cache'))) { |
| [1327](#L1327) | Swift\_Performance\_Cache::clear\_all\_cache(); |
| [1328](#L1328) | } |
| [1329](#L1329) | if (is\_callable(array('Hummingbird\WP\_Hummingbird', 'flush\_cache'))) { |
| [1330](#L1330) | Hummingbird\WP\_Hummingbird::flush\_cache(true, false); |
| [1331](#L1331) | } |
| [1332](#L1332) | if (function\_exists('rocket\_clean\_domain')) { |
| [1333](#L1333) | rocket\_clean\_domain(); |
| [1334](#L1334) | } |
| [1335](#L1335) | do\_action('cache\_enabler\_clear\_complete\_cache'); |
| [1336](#L1336) | } // empty\_cache |
| [1337](#L1337) |  |
| [1338](#L1338) |  |
| [1339](#L1339) | // checkbox helper function |
| [1340](#L1340) | static function checked($value, $current, $echo = false) |
| [1341](#L1341) | { |
| [1342](#L1342) | $out = ''; |
| [1343](#L1343) |  |
| [1344](#L1344) | if (!is\_array($current)) { |
| [1345](#L1345) | $current = (array) $current; |
| [1346](#L1346) | } |
| [1347](#L1347) |  |
| [1348](#L1348) | if (in\_array($value, $current)) { |
| [1349](#L1349) | $out = ' checked="checked" '; |
| [1350](#L1350) | } |
| [1351](#L1351) |  |
| [1352](#L1352) | if ($echo) { |
| [1353](#L1353) | self::wp\_kses\_wf($out); |
| [1354](#L1354) | } else { |
| [1355](#L1355) | return $out; |
| [1356](#L1356) | } |
| [1357](#L1357) | } // checked |
| [1358](#L1358) |  |
| [1359](#L1359) |  |
| [1360](#L1360) | // helper function for saving options, mostly checkboxes |
| [1361](#L1361) | static function check\_var\_isset($values, $variables) |
| [1362](#L1362) | { |
| [1363](#L1363) | foreach ($variables as $key => $value) { |
| [1364](#L1364) | if (!isset($values[$key])) { |
| [1365](#L1365) | $values[$key] = $value; |
| [1366](#L1366) | } |
| [1367](#L1367) | } |
| [1368](#L1368) |  |
| [1369](#L1369) | return $values; |
| [1370](#L1370) | } // check\_var\_isset |
| [1371](#L1371) |  |
| [1372](#L1372) |  |
| [1373](#L1373) | // helper function for creating dropdowns |
| [1374](#L1374) | static function create\_select\_options($options, $selected = null, $output = true) |
| [1375](#L1375) | { |
| [1376](#L1376) | $out = "\n"; |
| [1377](#L1377) |  |
| [1378](#L1378) | if (!is\_array($selected)) { |
| [1379](#L1379) | $selected = array($selected); |
| [1380](#L1380) | } |
| [1381](#L1381) |  |
| [1382](#L1382) | foreach ($options as $tmp) { |
| [1383](#L1383) | $data = ''; |
| [1384](#L1384) | if (isset($tmp['disabled'])) { |
| [1385](#L1385) | $data .= ' disabled="disabled" '; |
| [1386](#L1386) | } |
| [1387](#L1387) | if (in\_array($tmp['val'], $selected)) { |
| [1388](#L1388) | $out .= "<option selected=\"selected\" value=\"{$tmp['val']}\"{$data}>{$tmp['label']}&nbsp;</option>\n"; |
| [1389](#L1389) | } else { |
| [1390](#L1390) | $out .= "<option value=\"{$tmp['val']}\"{$data}>{$tmp['label']}&nbsp;</option>\n"; |
| [1391](#L1391) | } |
| [1392](#L1392) | } // foreach |
| [1393](#L1393) |  |
| [1394](#L1394) | if ($output) { |
| [1395](#L1395) | UCP::wp\_kses\_wf($out); |
| [1396](#L1396) | } else { |
| [1397](#L1397) | return $out; |
| [1398](#L1398) | } |
| [1399](#L1399) | } // create\_select\_options |
| [1400](#L1400) |  |
| [1401](#L1401) |  |
| [1402](#L1402) | // helper function to generate tagged buy links |
| [1403](#L1403) | static function generate\_web\_link($placement = '', $page = '/', $params = array(), $anchor = '') |
| [1404](#L1404) | { |
| [1405](#L1405) | $base\_url = 'https://underconstructionpage.com'; |
| [1406](#L1406) |  |
| [1407](#L1407) | if ('/' != $page) { |
| [1408](#L1408) | $page = '/' . trim($page, '/') . '/'; |
| [1409](#L1409) | } |
| [1410](#L1410) | if ($page == '//') { |
| [1411](#L1411) | $page = '/'; |
| [1412](#L1412) | } |
| [1413](#L1413) |  |
| [1414](#L1414) | if ($placement) { |
| [1415](#L1415) | $placement = trim($placement, '-'); |
| [1416](#L1416) | $placement = '-' . $placement; |
| [1417](#L1417) | } |
| [1418](#L1418) |  |
| [1419](#L1419) | $parts = array\_merge(array('ref' => 'ucp-free' . $placement), $params); |
| [1420](#L1420) |  |
| [1421](#L1421) | if (!empty($anchor)) { |
| [1422](#L1422) | $anchor = '#' . trim($anchor, '#'); |
| [1423](#L1423) | } |
| [1424](#L1424) |  |
| [1425](#L1425) | $out = $base\_url . $page . '?' . http\_build\_query($parts, '', '&amp;') . $anchor; |
| [1426](#L1426) |  |
| [1427](#L1427) | return $out; |
| [1428](#L1428) | } // generate\_web\_link |
| [1429](#L1429) |  |
| [1430](#L1430) |  |
| [1431](#L1431) | // first, main tab content |
| [1432](#L1432) | static function tab\_main() |
| [1433](#L1433) | { |
| [1434](#L1434) | $options = self::get\_options(); |
| [1435](#L1435) | $default\_options = self::default\_options(); |
| [1436](#L1436) |  |
| [1437](#L1437) | echo '<div class="ucp-tab-content">'; |
| [1438](#L1438) | echo '<table class="form-table">'; |
| [1439](#L1439) |  |
| [1440](#L1440) | echo '<tr valign="top"> |
| [1441](#L1441) | <th scope="row"><label for="status">' . esc\_attr\_\_('Under Construction Mode', 'under-construction-page') . '</label></th> |
| [1442](#L1442) | <td>'; |
| [1443](#L1443) |  |
| [1444](#L1444) | echo '<div class="toggle-wrapper" id="main-status"> |
| [1445](#L1445) | <input type="checkbox" id="status" ' . esc\_attr(self::checked(1, $options['status'])) . ' type="checkbox" value="1" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[status]"> |
| [1446](#L1446) | <label for="status" class="toggle"><span class="toggle\_handler"></span></label> |
| [1447](#L1447) | </div>'; |
| [1448](#L1448) |  |
| [1449](#L1449) | echo '<p class="description">' . \_\_('By enabling construction mode users will not be able to access the site\'s content. They will only see the under construction page. To configure exceptions set <a class="change\_tab" data-tab="3" href="#whitelisted-roles">whitelisted user roles</a>.', 'under-construction-page') . '</p>'; |
| [1450](#L1450) | echo '</td></tr>'; |
| [1451](#L1451) |  |
| [1452](#L1452) | echo '<tr valign="top"> |
| [1453](#L1453) | <th scope="row"><label for="search\_engines">' . esc\_attr\_\_('Prevent Search Engines from Indexing the Temporary Site', 'under-construction-page') . '</label></th> |
| [1454](#L1454) | <td>'; |
| [1455](#L1455) | echo '<div class="toggle-wrapper"> |
| [1456](#L1456) | <input type="checkbox" id="search\_engines" type="checkbox" value="1" class="skip-save open-ucp-upsell"> |
| [1457](#L1457) | <label for="search\_engines" class="toggle"><span class="toggle\_handler"></span></label> |
| [1458](#L1458) | </div>'; |
| [1459](#L1459) |  |
| [1460](#L1460) | echo '<p class="description">' . \_\_('While performing maintenance or having any temporary content displayed, it is favorable for SEO to prevent search engines from indexing the temporaray site. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="search\_engines\_text">PRO feature</a>.', 'under-construction-page') . '</p>'; |
| [1461](#L1461) | echo '</td></tr>'; |
| [1462](#L1462) |  |
| [1463](#L1463) | echo '<tr valign="top"> |
| [1464](#L1464) | <th scope="row"><label for="end\_date\_toggle">' . esc\_attr\_\_('Automatic End Date &amp; Time', 'under-construction-page') . '</label></th> |
| [1465](#L1465) | <td>'; |
| [1466](#L1466) | echo '<div class="toggle-wrapper"> |
| [1467](#L1467) | <input type="checkbox" id="end\_date\_toggle" ' . esc\_attr(self::checked(1, (empty($options['end\_date']) || $options['end\_date'] == '0000-00-00 00:00') ? 0 : 1)) . ' type="checkbox" value="1" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[end\_date\_toggle]"> |
| [1468](#L1468) | <label for="end\_date\_toggle" class="toggle"><span class="toggle\_handler"></span></label> |
| [1469](#L1469) | </div>'; |
| [1470](#L1470) | echo '<div id="end\_date\_wrapper"><input id="end\_date" type="text" class="datepicker" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[end\_date]" value="' . esc\_attr($options['end\_date']) . '" placeholder="yyyy-mm-dd hh:mm"><span title="' . esc\_attr\_\_('Open date & time picker', 'under-construction-page') . '" alt="' . esc\_attr\_\_('Open date & time picker', 'under-construction-page') . '" class="show-datepicker dashicons dashicons-calendar-alt"></span>'; |
| [1471](#L1471) | echo '<p class="description">' . esc\_attr\_\_('If enabled, construction mode will automatically stop showing on the selected date. |
| [1472](#L1472) | This option will not "auto-enable" construction mode. Status has to be set to "On".', 'under-construction-page') . '</p></div>'; |
| [1473](#L1473) | echo '</td></tr>'; |
| [1474](#L1474) |  |
| [1475](#L1475) | echo '<tr valign="top"> |
| [1476](#L1476) | <th scope="row"><label for="ga\_tracking\_id\_toggle">' . esc\_attr\_\_('Google Analytics Tracking', 'under-construction-page') . '</label></th> |
| [1477](#L1477) | <td>'; |
| [1478](#L1478) | echo '<div class="toggle-wrapper"> |
| [1479](#L1479) | <input type="checkbox" id="ga\_tracking\_id\_toggle" ' . esc\_attr(self::checked(1, empty($options['ga\_tracking\_id']) ? 0 : 1)) . ' type="checkbox" value="1" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[ga\_tracking\_toggle]"> |
| [1480](#L1480) | <label for="ga\_tracking\_id\_toggle" class="toggle"><span class="toggle\_handler"></span></label> |
| [1481](#L1481) | </div>'; |
| [1482](#L1482) | echo '<div id="ga\_tracking\_id\_wrapper"><input id="ga\_tracking\_id" type="text" class="code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[ga\_tracking\_id]" value="' . esc\_attr($options['ga\_tracking\_id']) . '" placeholder="UA-xxxxxx-xx">'; |
| [1483](#L1483) | echo '<p class="description">' . esc\_attr\_\_('Enter the unique tracking ID found in your GA tracking profile settings to track visits to pages.', 'under-construction-page') . '</p></div>'; |
| [1484](#L1484) | echo '</td></tr>'; |
| [1485](#L1485) |  |
| [1486](#L1486) | $reset\_url = add\_query\_arg(array('action' => 'ucp\_reset\_settings', 'redirect' => urlencode($\_SERVER['REQUEST\_URI'])), admin\_url('admin.php')); |
| [1487](#L1487) | $reset\_url = wp\_nonce\_url($reset\_url, 'ucp\_reset\_settings'); |
| [1488](#L1488) | echo '<tr valign="top"> |
| [1489](#L1489) | <th scope="row"><label for="">' . esc\_attr\_\_('Reset Settings', 'under-construction-page') . '</label></th> |
| [1490](#L1490) | <td>'; |
| [1491](#L1491) | echo '<a href="' . esc\_url($reset\_url) . '" class="button button-secondary reset-settings">' . esc\_attr\_\_('Reset all settings to default values', 'under-construction-page') . '</a>'; |
| [1492](#L1492) | echo '<p class="description">' . esc\_attr\_\_('By resetting all settings to their default values any customizations you have done will be lost. There is no undo.', 'under-construction-page') . '</p>'; |
| [1493](#L1493) | echo '</td></tr>'; |
| [1494](#L1494) |  |
| [1495](#L1495) | echo '</table>'; |
| [1496](#L1496) | echo '</div>'; |
| [1497](#L1497) |  |
| [1498](#L1498) | self::footer\_buttons(); |
| [1499](#L1499) | } // tab\_main |
| [1500](#L1500) |  |
| [1501](#L1501) |  |
| [1502](#L1502) | static function tab\_content() |
| [1503](#L1503) | { |
| [1504](#L1504) | global $wpdb; |
| [1505](#L1505) | $options = self::get\_options(); |
| [1506](#L1506) | $default\_options = self::default\_options(); |
| [1507](#L1507) |  |
| [1508](#L1508) | echo '<div class="ucp-tab-content">'; |
| [1509](#L1509) |  |
| [1510](#L1510) | if (!self::is\_weglot\_active()) { |
| [1511](#L1511) | echo '<div class="ucp-notice-small"><p><b>NEW</b> - Make your under construction page and your website <b>multilingual</b> with the Weglot Translate plugin.<br>To enable this feature, <a href="#" class="open-weglot-upsell">install the Weglot Translate freemium plugin</a>.'; |
| [1512](#L1512) | echo '</p></div>'; |
| [1513](#L1513) | } |
| [1514](#L1514) |  |
| [1515](#L1515) | echo '<table class="form-table">'; |
| [1516](#L1516) |  |
| [1517](#L1517) | if (self::is\_weglot\_active()) { |
| [1518](#L1518) | echo '<tr id="weglot-settings">'; |
| [1519](#L1519) | echo '<th><label for="weglot\_lang">Multilingual Support</label></th>'; |
| [1520](#L1520) | echo '<td>'; |
| [1521](#L1521) |  |
| [1522](#L1522) |  |
| [1523](#L1523) | if (self::is\_weglot\_setup()) { |
| [1524](#L1524) | $tmp = ''; |
| [1525](#L1525) | $active\_languages = weglot\_get\_destination\_languages(); |
| [1526](#L1526) | $languages = weglot\_get\_languages\_available(); |
| [1527](#L1527) | $original\_language = weglot\_get\_original\_language(); |
| [1528](#L1528) | echo '<p>Your under construction page is currently available in the following languages.<br>To add more languages and configure translations open <a href="' . esc\_url(admin\_url('admin.php?page=weglot-settings')) . '">Weglot settings</a>.</p>'; |
| [1529](#L1529) | echo '<ul class="ucp-list">'; |
| [1530](#L1530) | foreach ($languages as $language) { |
| [1531](#L1531) | if ($language->getExternalCode() == $original\_language) { |
| [1532](#L1532) | $tmp = '<li>' . esc\_html($language->getEnglishName()) . ' - original language</li>' . $tmp; |
| [1533](#L1533) | } |
| [1534](#L1534) | if (in\_array($language->getExternalCode(), $active\_languages, true)) { |
| [1535](#L1535) | $tmp .= '<li>' . esc\_html($language->getLocalName()) . '</li>'; |
| [1536](#L1536) | } |
| [1537](#L1537) | } // foreach language |
| [1538](#L1538) | self::wp\_kses\_wf($tmp); |
| [1539](#L1539) | echo '</ul>'; |
| [1540](#L1540) | } else { |
| [1541](#L1541) | echo '<p>Your under construction page is currently not translated.<br>Open <a href="' . esc\_url(admin\_url('admin.php?page=weglot-settings')) . '">Weglot settings</a> to select languages you want to translate to.</p>'; |
| [1542](#L1542) | } |
| [1543](#L1543) | echo '</td>'; |
| [1544](#L1544) | echo '</tr>'; |
| [1545](#L1545) | } else { |
| [1546](#L1546) | echo '<tr>'; |
| [1547](#L1547) | echo '<th><label for="weglot\_support">Multilingual Support</label></th>'; |
| [1548](#L1548) | echo '<td>'; |
| [1549](#L1549) | echo '<div class="toggle-wrapper"> |
| [1550](#L1550) | <input type="checkbox" id="weglot\_support" type="checkbox" value="1" class="skip-save open-weglot-upsell"> |
| [1551](#L1551) | <label for="weglot\_support" class="toggle"><span class="toggle\_handler"></span></label></div>'; |
| [1552](#L1552) | echo '<p class="description">55% of online visitors prefer to browse in their mother tongue. If you have an audience speaking multiple languages, making your website multilingual is a must-have. To instantly translate your website and your under construction page, <a href="#" class="open-weglot-upsell">install the Weglot plugin</a> (free plan and free trial available). It seamlessly integrates with UCP and is compatible with all themes &amp; plugins.</p>'; |
| [1553](#L1553) | echo '</td>'; |
| [1554](#L1554) | echo '</tr>'; |
| [1555](#L1555) | } // weglot not active |
| [1556](#L1556) |  |
| [1557](#L1557) | echo '<tr>'; |
| [1558](#L1558) | echo '<th><label for="smush\_support">Image Compression</label></th>'; |
| [1559](#L1559) | echo '<td>'; |
| [1560](#L1560) | if (defined('WP\_SMUSH\_VERSION')) { |
| [1561](#L1561) | echo 'Configure <a target="\_blank" href="' . esc\_url(admin\_url('admin.php?page=smush')) . '">image compression options</a>.'; |
| [1562](#L1562) | } else { |
| [1563](#L1563) | echo '<div class="toggle-wrapper"> |
| [1564](#L1564) | <input type="checkbox" id="smush\_support" type="checkbox" value="1" class="skip-save open-smush-install"> |
| [1565](#L1565) | <label for="smush\_support" class="toggle"><span class="toggle\_handler"></span></label></div>'; |
| [1566](#L1566) | echo '<p class="description">The easiest way to speed up any site is to <b>compress images</b>. On an average page you can easily save a few megabytes. Doing it manually in Photoshop is a pain! That\'s why there are free plugins like <a href="' . admin\_url('plugin-install.php?fix-install-button=1&tab=plugin-information&plugin=wp-smushit&TB\_iframe=true&width=600&height=550') . '" class="thickbox open-plugin-details-modal smush-thickbox" id="smush-install-link">Smush</a> that specialize in compressing images. <a href="' . admin\_url('plugin-install.php?fix-install-button=1&tab=plugin-information&plugin=wp-smushit&TB\_iframe=true&width=600&height=550') . '" class="thickbox open-plugin-details-modal smush-thickbox">Install the free Smush plugin</a>. It has no limit on the amount of images you can compress, seamlessly integrates with WordPress, and is compatible with all plugins &amp; themes. And best of all - <b>it\'s used by over a million users just like you</b>.</p>'; |
| [1567](#L1567) | } |
| [1568](#L1568) | echo '</td>'; |
| [1569](#L1569) | echo '</tr>'; |
| [1570](#L1570) |  |
| [1571](#L1571) | echo '<tr valign="top"> |
| [1572](#L1572) | <th scope="row"><label for="title">' . esc\_attr\_\_('Title', 'under-construction-page') . '</label></th> |
| [1573](#L1573) | <td><input type="text" id="title" class="regular-text" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[title]" value="' . esc\_attr($options['title']) . '" />'; |
| [1574](#L1574) | echo '<p class="description">Page title. Default: ' . esc\_attr($default\_options['title']) . '</p>'; |
| [1575](#L1575) | echo '<p><b>Available shortcodes:</b> (only active in UC themes, not on the rest of the site)</p> |
| [1576](#L1576) | <ul class="ucp-list"> |
| [1577](#L1577) | <li><code>[site-title]</code> - blog title, as set in <a href="options-general.php">Options - General</a></li> |
| [1578](#L1578) | <li><code>[site-tagline]</code> - blog tagline, as set in <a href="options-general.php">Options - General</a></li> |
| [1579](#L1579) | <li><code>[site-url]</code> - site address (URL), as set in <a href="options-general.php">Options - General</a></li> |
| [1580](#L1580) | <li><code>[wp-url]</code> - WordPress address (URL), as set in <a href="options-general.php">Options - General</a></li> |
| [1581](#L1581) | <li><code>[site-login-url]</code> - URL of the default site login page</li> |
| [1582](#L1582) | </ul>'; |
| [1583](#L1583) | echo '</td></tr>'; |
| [1584](#L1584) |  |
| [1585](#L1585) | echo '<tr valign="top"> |
| [1586](#L1586) | <th scope="row"><label for="description">' . esc\_attr\_\_('Description', 'under-construction-page') . '</label></th> |
| [1587](#L1587) | <td><input id="description" type="text" class="large-text" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[description]" value="' . esc\_attr($options['description']) . '" />'; |
| [1588](#L1588) | echo '<p class="description">Description meta tag (see above for available <a href="#title">shortcodes</a>). Default: ' . esc\_attr($default\_options['description']) . '</p>'; |
| [1589](#L1589) | echo '</td></tr>'; |
| [1590](#L1590) |  |
| [1591](#L1591) | echo '<tr valign="top"> |
| [1592](#L1592) | <th scope="row"><label for="heading1">' . esc\_attr\_\_('Headline', 'under-construction-page') . '</label></th> |
| [1593](#L1593) | <td><input id="heading1" type="text" class="large-text" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[heading1]" value="' . esc\_attr($options['heading1']) . '" />'; |
| [1594](#L1594) | echo '<p class="description">Main heading/title (see above for available <a href="#title">shortcodes</a>). Default: ' . esc\_attr($default\_options['heading1']) . '</p>'; |
| [1595](#L1595) | echo '</td></tr>'; |
| [1596](#L1596) |  |
| [1597](#L1597) | echo '<tr valign="top" id="content\_wrap"> |
| [1598](#L1598) | <th scope="row"><label for="content">' . esc\_attr\_\_('Content', 'under-construction-page') . '</label></th> |
| [1599](#L1599) | <td>'; |
| [1600](#L1600) | wp\_editor($options['content'], 'content', array('tabfocus\_elements' => 'insert-media-button,save-post', 'editor\_height' => 250, 'resize' => 1, 'textarea\_name' => esc\_attr(UCP\_OPTIONS\_KEY) . '[content]', 'drag\_drop\_upload' => 1)); |
| [1601](#L1601) | echo '<p class="description">All HTML elements are allowed. Shortcodes are not parsed except <a href="#title">UC theme ones</a>. Default: ' . esc\_attr($default\_options['content']) . '</p>'; |
| [1602](#L1602) | echo '</td></tr>'; |
| [1603](#L1603) |  |
| [1604](#L1604) | echo '<tr valign="top"> |
| [1605](#L1605) | <th scope="row"><label for="linkback">' . esc\_attr\_\_('Show Some Love', 'under-construction-page') . '</label></th> |
| [1606](#L1606) | <td>'; |
| [1607](#L1607) | echo '<div class="toggle-wrapper"> |
| [1608](#L1608) | <input type="checkbox" id="linkback" ' . esc\_attr(self::checked(1, $options['linkback'])) . ' type="checkbox" value="1" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[linkback]"> |
| [1609](#L1609) | <label for="linkback" class="toggle"><span class="toggle\_handler"></span></label> |
| [1610](#L1610) | </div>'; |
| [1611](#L1611) | echo '<p class="description">Please help others learn about this free plugin by placing a small link in the footer. Thank you very much!</p>'; |
| [1612](#L1612) | echo '</td></tr>'; |
| [1613](#L1613) |  |
| [1614](#L1614) | echo '<tr>'; |
| [1615](#L1615) | echo '<th><label for="content\_font">Content Font</label></th>'; |
| [1616](#L1616) | echo '<td><select class="skip-save open-ucp-upsell" id="content\_font">'; |
| [1617](#L1617) | echo '<option value="" selected="selected">Theme Default</option>'; |
| [1618](#L1618) | echo '<option class="ucp-promo" value="-1">ABeeZee</option><option class="ucp-promo" value="-1">Abel</option><option class="ucp-promo" value="-1">Abril Fatface</option><option class="ucp-promo" value="-1">Aclonica</option><option class="ucp-promo" value="-1">Acme</option><option class="ucp-promo" value="-1">Actor</option><option class="ucp-promo" value="-1">Adamina</option><option class="ucp-promo" value="-1">Advent Pro</option><option class="ucp-promo" value="-1">Aguafina Script</option><option class="ucp-promo" value="-1">Akronim</option><option class="ucp-promo" value="-1">Aladin</option><option class="ucp-promo" value="-1">Aldrich</option><option class="ucp-promo" value="-1">Alef</option><option class="ucp-promo" value="-1">Alegreya</option><option class="ucp-promo" value="-1">Alegreya SC</option><option class="ucp-promo" value="-1">Alegreya Sans</option><option class="ucp-promo" value="-1">Alegreya Sans SC</option><option class="ucp-promo" value="-1">Alex Brush</option><option class="ucp-promo" value="-1">Alfa Slab One</option><option class="ucp-promo" value="-1">Alice</option><option class="ucp-promo" value="-1">Alike</option><option class="ucp-promo" value="-1">Alike Angular</option><option class="ucp-promo" value="-1">Allan</option><option class="ucp-promo" value="-1">Allerta</option><option class="ucp-promo" value="-1">Allerta Stencil</option><option class="ucp-promo" value="-1">Allura</option><option class="ucp-promo" value="-1">Almendra</option><option class="ucp-promo" value="-1">Almendra Display</option><option class="ucp-promo" value="-1">Almendra SC</option><option class="ucp-promo" value="-1">Amarante</option><option class="ucp-promo" value="-1">Amaranth</option><option class="ucp-promo" value="-1">Amatic SC</option><option class="ucp-promo" value="-1">Amethysta</option><option class="ucp-promo" value="-1">Anaheim</option><option class="ucp-promo" value="-1">Andada</option><option class="ucp-promo" value="-1">Andika</option><option class="ucp-promo" value="-1">Angkor</option><option class="ucp-promo" value="-1">Annie Use Your Telescope</option><option class="ucp-promo" value="-1">Anonymous Pro</option><option class="ucp-promo" value="-1">Antic</option><option class="ucp-promo" value="-1">Antic Didone</option><option class="ucp-promo" value="-1">Antic Slab</option><option class="ucp-promo" value="-1">Anton</option><option class="ucp-promo" value="-1">Arapey</option><option class="ucp-promo" value="-1">Arbutus</option><option class="ucp-promo" value="-1">Arbutus Slab</option><option class="ucp-promo" value="-1">Architects Daughter</option><option class="ucp-promo" value="-1">Archivo Black</option><option class="ucp-promo" value="-1">Archivo Narrow</option><option class="ucp-promo" value="-1">Arimo</option><option class="ucp-promo" value="-1">Arizonia</option><option class="ucp-promo" value="-1">Armata</option><option class="ucp-promo" value="-1">Artifika</option><option class="ucp-promo" value="-1">Arvo</option><option class="ucp-promo" value="-1">Asap</option><option class="ucp-promo" value="-1">Asset</option><option class="ucp-promo" value="-1">Astloch</option><option class="ucp-promo" value="-1">Asul</option><option class="ucp-promo" value="-1">Atomic Age</option><option class="ucp-promo" value="-1">Aubrey</option><option class="ucp-promo" value="-1">Audiowide</option><option class="ucp-promo" value="-1">Autour One</option><option class="ucp-promo" value="-1">Average</option><option class="ucp-promo" value="-1">Average Sans</option><option class="ucp-promo" value="-1">Averia Gruesa Libre</option><option class="ucp-promo" value="-1">Averia Libre</option><option class="ucp-promo" value="-1">Averia Sans Libre</option><option class="ucp-promo" value="-1">Averia Serif Libre</option><option class="ucp-promo" value="-1">Bad Script</option><option class="ucp-promo" value="-1">Balthazar</option><option class="ucp-promo" value="-1">Bangers</option><option class="ucp-promo" value="-1">Basic</option><option class="ucp-promo" value="-1">Battambang</option><option class="ucp-promo" value="-1">Baumans</option><option class="ucp-promo" value="-1">Bayon</option><option class="ucp-promo" value="-1">Belgrano</option><option class="ucp-promo" value="-1">Belleza</option><option class="ucp-promo" value="-1">BenchNine</option><option class="ucp-promo" value="-1">Bentham</option><option class="ucp-promo" value="-1">Berkshire Swash</option><option class="ucp-promo" value="-1">Bevan</option><option class="ucp-promo" value="-1">Bigelow Rules</option><option class="ucp-promo" value="-1">Bigshot One</option><option class="ucp-promo" value="-1">Bilbo</option><option class="ucp-promo" value="-1">Bilbo Swash Caps</option><option class="ucp-promo" value="-1">Bitter</option><option class="ucp-promo" value="-1">Black Ops One</option><option class="ucp-promo" value="-1">Bokor</option><option class="ucp-promo" value="-1">Bonbon</option><option class="ucp-promo" value="-1">Boogaloo</option><option class="ucp-promo" value="-1">Bowlby One</option><option class="ucp-promo" value="-1">Bowlby One SC</option><option class="ucp-promo" value="-1">Brawler</option><option class="ucp-promo" value="-1">Bree Serif</option><option class="ucp-promo" value="-1">Bubblegum Sans</option><option class="ucp-promo" value="-1">Bubbler One</option><option class="ucp-promo" value="-1">Buda</option><option class="ucp-promo" value="-1">Buenard</option><option class="ucp-promo" value="-1">Butcherman</option><option class="ucp-promo" value="-1">Butterfly Kids</option><option class="ucp-promo" value="-1">Cabin</option><option class="ucp-promo" value="-1">Cabin Condensed</option><option class="ucp-promo" value="-1">Cabin Sketch</option><option class="ucp-promo" value="-1">Caesar Dressing</option><option class="ucp-promo" value="-1">Cagliostro</option><option class="ucp-promo" value="-1">Calligraffitti</option><option class="ucp-promo" value="-1">Cambo</option><option class="ucp-promo" value="-1">Candal</option><option class="ucp-promo" value="-1">Cantarell</option><option class="ucp-promo" value="-1">Cantata One</option><option class="ucp-promo" value="-1">Cantora One</option><option class="ucp-promo" value="-1">Capriola</option><option class="ucp-promo" value="-1">Cardo</option><option class="ucp-promo" value="-1">Carme</option><option class="ucp-promo" value="-1">Carrois Gothic</option><option class="ucp-promo" value="-1">Carrois Gothic SC</option><option class="ucp-promo" value="-1">Carter One</option><option class="ucp-promo" value="-1">Caudex</option><option class="ucp-promo" value="-1">Cedarville Cursive</option><option class="ucp-promo" value="-1">Ceviche One</option><option class="ucp-promo" value="-1">Changa One</option><option class="ucp-promo" value="-1">Chango</option><option class="ucp-promo" value="-1">Chau Philomene One</option><option class="ucp-promo" value="-1">Chela One</option><option class="ucp-promo" value="-1">Chelsea Market</option><option class="ucp-promo" value="-1">Chenla</option><option class="ucp-promo" value="-1">Cherry Cream Soda</option><option class="ucp-promo" value="-1">Cherry Swash</option><option class="ucp-promo" value="-1">Chewy</option><option class="ucp-promo" value="-1">Chicle</option><option class="ucp-promo" value="-1">Chivo</option><option class="ucp-promo" value="-1">Cinzel</option><option class="ucp-promo" value="-1">Cinzel Decorative</option><option class="ucp-promo" value="-1">Clicker Script</option><option class="ucp-promo" value="-1">Coda</option><option class="ucp-promo" value="-1">Coda Caption</option><option class="ucp-promo" value="-1">Codystar</option><option class="ucp-promo" value="-1">Combo</option><option class="ucp-promo" value="-1">Comfortaa</option><option class="ucp-promo" value="-1">Coming Soon</option><option class="ucp-promo" value="-1">Concert One</option><option class="ucp-promo" value="-1">Condiment</option><option class="ucp-promo" value="-1">Content</option><option class="ucp-promo" value="-1">Contrail One</option><option class="ucp-promo" value="-1">Convergence</option><option class="ucp-promo" value="-1">Cookie</option><option class="ucp-promo" value="-1">Copse</option><option class="ucp-promo" value="-1">Corben</option><option class="ucp-promo" value="-1">Courgette</option><option class="ucp-promo" value="-1">Cousine</option><option class="ucp-promo" value="-1">Coustard</option><option class="ucp-promo" value="-1">Covered By Your Grace</option><option class="ucp-promo" value="-1">Crafty Girls</option><option class="ucp-promo" value="-1">Creepster</option><option class="ucp-promo" value="-1">Crete Round</option><option class="ucp-promo" value="-1">Crimson Text</option><option class="ucp-promo" value="-1">Croissant One</option><option class="ucp-promo" value="-1">Crushed</option><option class="ucp-promo" value="-1">Cuprum</option><option class="ucp-promo" value="-1">Cutive</option><option class="ucp-promo" value="-1">Cutive Mono</option><option class="ucp-promo" value="-1">Damion</option><option class="ucp-promo" value="-1">Dancing Script</option><option class="ucp-promo" value="-1">Dangrek</option><option class="ucp-promo" value="-1">Dawning of a New Day</option><option class="ucp-promo" value="-1">Days One</option><option class="ucp-promo" value="-1">Delius</option><option class="ucp-promo" value="-1">Delius Swash Caps</option><option class="ucp-promo" value="-1">Delius Unicase</option><option class="ucp-promo" value="-1">Della Respira</option><option class="ucp-promo" value="-1">Denk One</option><option class="ucp-promo" value="-1">Devonshire</option><option class="ucp-promo" value="-1">Didact Gothic</option><option class="ucp-promo" value="-1">Diplomata</option><option class="ucp-promo" value="-1">Diplomata SC</option><option class="ucp-promo" value="-1">Domine</option><option class="ucp-promo" value="-1">Donegal One</option><option class="ucp-promo" value="-1">Doppio One</option><option class="ucp-promo" value="-1">Dorsa</option><option class="ucp-promo" value="-1">Dosis</option><option class="ucp-promo" value="-1">Dr Sugiyama</option><option class="ucp-promo" value="-1">Droid Sans</option><option class="ucp-promo" value="-1">Droid Sans Mono</option><option class="ucp-promo" value="-1">Droid Serif</option><option class="ucp-promo" value="-1">Duru Sans</option><option class="ucp-promo" value="-1">Dynalight</option><option class="ucp-promo" value="-1">EB Garamond</option><option class="ucp-promo" value="-1">Eagle Lake</option><option class="ucp-promo" value="-1">Eater</option><option class="ucp-promo" value="-1">Economica</option><option class="ucp-promo" value="-1">Ek Mukta</option><option class="ucp-promo" value="-1">Electrolize</option><option class="ucp-promo" value="-1">Elsie</option><option class="ucp-promo" value="-1">Elsie Swash Caps</option><option class="ucp-promo" value="-1">Emblema One</option><option class="ucp-promo" value="-1">Emilys Candy</option><option class="ucp-promo" value="-1">Engagement</option><option class="ucp-promo" value="-1">Englebert</option><option class="ucp-promo" value="-1">Enriqueta</option><option class="ucp-promo" value="-1">Erica One</option><option class="ucp-promo" value="-1">Esteban</option><option class="ucp-promo" value="-1">Euphoria Script</option><option class="ucp-promo" value="-1">Ewert</option><option class="ucp-promo" value="-1">Exo</option><option class="ucp-promo" value="-1">Exo 2</option><option class="ucp-promo" value="-1">Expletus Sans</option><option class="ucp-promo" value="-1">Fanwood Text</option><option class="ucp-promo" value="-1">Fascinate</option><option class="ucp-promo" value="-1">Fascinate Inline</option><option class="ucp-promo" value="-1">Faster One</option><option class="ucp-promo" value="-1">Fasthand</option><option class="ucp-promo" value="-1">Fauna One</option><option class="ucp-promo" value="-1">Federant</option><option class="ucp-promo" value="-1">Federo</option><option class="ucp-promo" value="-1">Felipa</option><option class="ucp-promo" value="-1">Fenix</option><option class="ucp-promo" value="-1">Finger Paint</option><option class="ucp-promo" value="-1">Fira Mono</option><option class="ucp-promo" value="-1">Fira Sans</option><option class="ucp-promo" value="-1">Fjalla One</option><option class="ucp-promo" value="-1">Fjord One</option><option class="ucp-promo" value="-1">Flamenco</option><option class="ucp-promo" value="-1">Flavors</option><option class="ucp-promo" value="-1">Fondamento</option><option class="ucp-promo" value="-1">Fontdiner Swanky</option><option class="ucp-promo" value="-1">Forum</option><option class="ucp-promo" value="-1">Francois One</option><option class="ucp-promo" value="-1">Freckle Face</option><option class="ucp-promo" value="-1">Fredericka the Great</option><option class="ucp-promo" value="-1">Fredoka One</option><option class="ucp-promo" value="-1">Freehand</option><option class="ucp-promo" value="-1">Fresca</option><option class="ucp-promo" value="-1">Frijole</option><option class="ucp-promo" value="-1">Fruktur</option><option class="ucp-promo" value="-1">Fugaz One</option><option class="ucp-promo" value="-1">GFS Didot</option><option class="ucp-promo" value="-1">GFS Neohellenic</option><option class="ucp-promo" value="-1">Gabriela</option><option class="ucp-promo" value="-1">Gafata</option><option class="ucp-promo" value="-1">Galdeano</option><option class="ucp-promo" value="-1">Galindo</option><option class="ucp-promo" value="-1">Gentium Basic</option><option class="ucp-promo" value="-1">Gentium Book Basic</option><option class="ucp-promo" value="-1">Geo</option><option class="ucp-promo" value="-1">Geostar</option><option class="ucp-promo" value="-1">Geostar Fill</option><option class="ucp-promo" value="-1">Germania One</option><option class="ucp-promo" value="-1">Gilda Display</option><option class="ucp-promo" value="-1">Give You Glory</option><option class="ucp-promo" value="-1">Glass Antiqua</option><option class="ucp-promo" value="-1">Glegoo</option><option class="ucp-promo" value="-1">Gloria Hallelujah</option><option class="ucp-promo" value="-1">Goblin One</option><option class="ucp-promo" value="-1">Gochi Hand</option><option class="ucp-promo" value="-1">Gorditas</option><option class="ucp-promo" value="-1">Goudy Bookletter 1911</option><option class="ucp-promo" value="-1">Graduate</option><option class="ucp-promo" value="-1">Grand Hotel</option><option class="ucp-promo" value="-1">Gravitas One</option><option class="ucp-promo" value="-1">Great Vibes</option><option class="ucp-promo" value="-1">Griffy</option><option class="ucp-promo" value="-1">Gruppo</option><option class="ucp-promo" value="-1">Gudea</option><option class="ucp-promo" value="-1">Habibi</option><option class="ucp-promo" value="-1">Hammersmith One</option><option class="ucp-promo" value="-1">Hanalei</option><option class="ucp-promo" value="-1">Hanalei Fill</option><option class="ucp-promo" value="-1">Handlee</option><option class="ucp-promo" value="-1">Hanuman</option><option class="ucp-promo" value="-1">Happy Monkey</option><option class="ucp-promo" value="-1">Headland One</option><option class="ucp-promo" value="-1">Henny Penny</option><option class="ucp-promo" value="-1">Herr Von Muellerhoff</option><option class="ucp-promo" value="-1">Hind</option><option class="ucp-promo" value="-1">Holtwood One SC</option><option class="ucp-promo" value="-1">Homemade Apple</option><option class="ucp-promo" value="-1">Homenaje</option><option class="ucp-promo" value="-1">IM Fell DW Pica</option><option class="ucp-promo" value="-1">IM Fell DW Pica SC</option><option class="ucp-promo" value="-1">IM Fell Double Pica</option><option class="ucp-promo" value="-1">IM Fell Double Pica SC</option><option class="ucp-promo" value="-1">IM Fell English</option><option class="ucp-promo" value="-1">IM Fell English SC</option><option class="ucp-promo" value="-1">IM Fell French Canon</option><option class="ucp-promo" value="-1">IM Fell French Canon SC</option><option class="ucp-promo" value="-1">IM Fell Great Primer</option><option class="ucp-promo" value="-1">IM Fell Great Primer SC</option><option class="ucp-promo" value="-1">Iceberg</option><option class="ucp-promo" value="-1">Iceland</option><option class="ucp-promo" value="-1">Imprima</option><option class="ucp-promo" value="-1">Inconsolata</option><option class="ucp-promo" value="-1">Inder</option><option class="ucp-promo" value="-1">Indie Flower</option><option class="ucp-promo" value="-1">Inika</option><option class="ucp-promo" value="-1">Irish Grover</option><option class="ucp-promo" value="-1">Istok Web</option><option class="ucp-promo" value="-1">Italiana</option><option class="ucp-promo" value="-1">Italianno</option><option class="ucp-promo" value="-1">Jacques Francois</option><option class="ucp-promo" value="-1">Jacques Francois Shadow</option><option class="ucp-promo" value="-1">Jim Nightshade</option><option class="ucp-promo" value="-1">Jockey One</option><option class="ucp-promo" value="-1">Jolly Lodger</option><option class="ucp-promo" value="-1">Josefin Sans</option><option class="ucp-promo" value="-1">Josefin Slab</option><option class="ucp-promo" value="-1">Joti One</option><option class="ucp-promo" value="-1">Judson</option><option class="ucp-promo" value="-1">Julee</option><option class="ucp-promo" value="-1">Julius Sans One</option><option class="ucp-promo" value="-1">Junge</option><option class="ucp-promo" value="-1">Jura</option><option class="ucp-promo" value="-1">Just Another Hand</option><option class="ucp-promo" value="-1">Just Me Again Down Here</option><option class="ucp-promo" value="-1">Kalam</option><option class="ucp-promo" value="-1">Kameron</option><option class="ucp-promo" value="-1">Kantumruy</option><option class="ucp-promo" value="-1">Karla</option><option class="ucp-promo" value="-1">Karma</option><option class="ucp-promo" value="-1">Kaushan Script</option><option class="ucp-promo" value="-1">Kavoon</option><option class="ucp-promo" value="-1">Kdam Thmor</option><option class="ucp-promo" value="-1">Keania One</option><option class="ucp-promo" value="-1">Kelly Slab</option><option class="ucp-promo" value="-1">Kenia</option><option class="ucp-promo" value="-1">Khmer</option><option class="ucp-promo" value="-1">Kite One</option><option class="ucp-promo" value="-1">Knewave</option><option class="ucp-promo" value="-1">Kotta One</option><option class="ucp-promo" value="-1">Koulen</option><option class="ucp-promo" value="-1">Kranky</option><option class="ucp-promo" value="-1">Kreon</option><option class="ucp-promo" value="-1">Kristi</option><option class="ucp-promo" value="-1">Krona One</option><option class="ucp-promo" value="-1">La Belle Aurore</option><option class="ucp-promo" value="-1">Lancelot</option><option class="ucp-promo" value="-1">Lato</option><option class="ucp-promo" value="-1">League Script</option><option class="ucp-promo" value="-1">Leckerli One</option><option class="ucp-promo" value="-1">Ledger</option><option class="ucp-promo" value="-1">Lekton</option><option class="ucp-promo" value="-1">Lemon</option><option class="ucp-promo" value="-1">Libre Baskerville</option><option class="ucp-promo" value="-1">Life Savers</option><option class="ucp-promo" value="-1">Lilita One</option><option class="ucp-promo" value="-1">Lily Script One</option><option class="ucp-promo" value="-1">Limelight</option><option class="ucp-promo" value="-1">Linden Hill</option><option class="ucp-promo" value="-1">Lobster</option><option class="ucp-promo" value="-1">Lobster Two</option><option class="ucp-promo" value="-1">Londrina Outline</option><option class="ucp-promo" value="-1">Londrina Shadow</option><option class="ucp-promo" value="-1">Londrina Sketch</option><option class="ucp-promo" value="-1">Londrina Solid</option><option class="ucp-promo" value="-1">Lora</option><option class="ucp-promo" value="-1">Love Ya Like A Sister</option><option class="ucp-promo" value="-1">Loved by the King</option><option class="ucp-promo" value="-1">Lovers Quarrel</option><option class="ucp-promo" value="-1">Luckiest Guy</option><option class="ucp-promo" value="-1">Lusitana</option><option class="ucp-promo" value="-1">Lustria</option><option class="ucp-promo" value="-1">Macondo</option><option class="ucp-promo" value="-1">Macondo Swash Caps</option><option class="ucp-promo" value="-1">Magra</option><option class="ucp-promo" value="-1">Maiden Orange</option><option class="ucp-promo" value="-1">Mako</option><option class="ucp-promo" value="-1">Marcellus</option><option class="ucp-promo" value="-1">Marcellus SC</option><option class="ucp-promo" value="-1">Marck Script</option><option class="ucp-promo" value="-1">Margarine</option><option class="ucp-promo" value="-1">Marko One</option><option class="ucp-promo" value="-1">Marmelad</option><option class="ucp-promo" value="-1">Marvel</option><option class="ucp-promo" value="-1">Mate</option><option class="ucp-promo" value="-1">Mate SC</option><option class="ucp-promo" value="-1">Maven Pro</option><option class="ucp-promo" value="-1">McLaren</option><option class="ucp-promo" value="-1">Meddon</option><option class="ucp-promo" value="-1">MedievalSharp</option><option class="ucp-promo" value="-1">Medula One</option><option class="ucp-promo" value="-1">Megrim</option><option class="ucp-promo" value="-1">Meie Script</option><option class="ucp-promo" value="-1">Merienda</option><option class="ucp-promo" value="-1">Merienda One</option><option class="ucp-promo" value="-1">Merriweather</option><option class="ucp-promo" value="-1">Merriweather Sans</option><option class="ucp-promo" value="-1">Metal</option><option class="ucp-promo" value="-1">Metal Mania</option><option class="ucp-promo" value="-1">Metamorphous</option><option class="ucp-promo" value="-1">Metrophobic</option><option class="ucp-promo" value="-1">Michroma</option><option class="ucp-promo" value="-1">Milonga</option><option class="ucp-promo" value="-1">Miltonian</option><option class="ucp-promo" value="-1">Miltonian Tattoo</option><option class="ucp-promo" value="-1">Miniver</option><option class="ucp-promo" value="-1">Miss Fajardose</option><option class="ucp-promo" value="-1">Modern Antiqua</option><option class="ucp-promo" value="-1">Molengo</option><option class="ucp-promo" value="-1">Molle</option><option class="ucp-promo" value="-1">Monda</option><option class="ucp-promo" value="-1">Monofett</option><option class="ucp-promo" value="-1">Monoton</option><option class="ucp-promo" value="-1">Monsieur La Doulaise</option><option class="ucp-promo" value="-1">Montaga</option><option class="ucp-promo" value="-1">Montez</option><option class="ucp-promo" value="-1">Montserrat</option><option class="ucp-promo" value="-1">Montserrat Alternates</option><option class="ucp-promo" value="-1">Montserrat Subrayada</option><option class="ucp-promo" value="-1">Moul</option><option class="ucp-promo" value="-1">Moulpali</option><option class="ucp-promo" value="-1">Mountains of Christmas</option><option class="ucp-promo" value="-1">Mouse Memoirs</option><option class="ucp-promo" value="-1">Mr Bedfort</option><option class="ucp-promo" value="-1">Mr Dafoe</option><option class="ucp-promo" value="-1">Mr De Haviland</option><option class="ucp-promo" value="-1">Mrs Saint Delafield</option><option class="ucp-promo" value="-1">Mrs Sheppards</option><option class="ucp-promo" value="-1">Muli</option><option class="ucp-promo" value="-1">Mystery Quest</option><option class="ucp-promo" value="-1">Neucha</option><option class="ucp-promo" value="-1">Neuton</option><option class="ucp-promo" value="-1">New Rocker</option><option class="ucp-promo" value="-1">News Cycle</option><option class="ucp-promo" value="-1">Niconne</option><option class="ucp-promo" value="-1">Nixie One</option><option class="ucp-promo" value="-1">Nobile</option><option class="ucp-promo" value="-1">Nokora</option><option class="ucp-promo" value="-1">Norican</option><option class="ucp-promo" value="-1">Nosifer</option><option class="ucp-promo" value="-1">Nothing You Could Do</option><option class="ucp-promo" value="-1">Noticia Text</option><option class="ucp-promo" value="-1">Noto Sans</option><option class="ucp-promo" value="-1">Noto Serif</option><option class="ucp-promo" value="-1">Nova Cut</option><option class="ucp-promo" value="-1">Nova Flat</option><option class="ucp-promo" value="-1">Nova Mono</option><option class="ucp-promo" value="-1">Nova Oval</option><option class="ucp-promo" value="-1">Nova Round</option><option class="ucp-promo" value="-1">Nova Script</option><option class="ucp-promo" value="-1">Nova Slim</option><option class="ucp-promo" value="-1">Nova Square</option><option class="ucp-promo" value="-1">Numans</option><option class="ucp-promo" value="-1">Nunito</option><option class="ucp-promo" value="-1">Odor Mean Chey</option><option class="ucp-promo" value="-1">Offside</option><option class="ucp-promo" value="-1">Old Standard TT</option><option class="ucp-promo" value="-1">Oldenburg</option><option class="ucp-promo" value="-1">Oleo Script</option><option class="ucp-promo" value="-1">Oleo Script Swash Caps</option><option class="ucp-promo" value="-1">Open Sans</option><option class="ucp-promo" value="-1">Open Sans Condensed</option><option class="ucp-promo" value="-1">Oranienbaum</option><option class="ucp-promo" value="-1">Orbitron</option><option class="ucp-promo" value="-1">Oregano</option><option class="ucp-promo" value="-1">Orienta</option><option class="ucp-promo" value="-1">Original Surfer</option><option class="ucp-promo" value="-1">Oswald</option><option class="ucp-promo" value="-1">Over the Rainbow</option><option class="ucp-promo" value="-1">Overlock</option><option class="ucp-promo" value="-1">Overlock SC</option><option class="ucp-promo" value="-1">Ovo</option><option class="ucp-promo" value="-1">Oxygen</option><option class="ucp-promo" value="-1">Oxygen Mono</option><option class="ucp-promo" value="-1">PT Mono</option><option class="ucp-promo" value="-1">PT Sans</option><option class="ucp-promo" value="-1">PT Sans Caption</option><option class="ucp-promo" value="-1">PT Sans Narrow</option><option class="ucp-promo" value="-1">PT Serif</option><option class="ucp-promo" value="-1">PT Serif Caption</option><option class="ucp-promo" value="-1">Pacifico</option><option class="ucp-promo" value="-1">Paprika</option><option class="ucp-promo" value="-1">Parisienne</option><option class="ucp-promo" value="-1">Passero One</option><option class="ucp-promo" value="-1">Passion One</option><option class="ucp-promo" value="-1">Pathway Gothic One</option><option class="ucp-promo" value="-1">Patrick Hand</option><option class="ucp-promo" value="-1">Patrick Hand SC</option><option class="ucp-promo" value="-1">Patua One</option><option class="ucp-promo" value="-1">Paytone One</option><option class="ucp-promo" value="-1">Peralta</option><option class="ucp-promo" value="-1">Permanent Marker</option><option class="ucp-promo" value="-1">Petit Formal Script</option><option class="ucp-promo" value="-1">Petrona</option><option class="ucp-promo" value="-1">Philosopher</option><option class="ucp-promo" value="-1">Piedra</option><option class="ucp-promo" value="-1">Pinyon Script</option><option class="ucp-promo" value="-1">Pirata One</option><option class="ucp-promo" value="-1">Plaster</option><option class="ucp-promo" value="-1">Play</option><option class="ucp-promo" value="-1">Playball</option><option class="ucp-promo" value="-1">Playfair Display</option><option class="ucp-promo" value="-1">Playfair Display SC</option><option class="ucp-promo" value="-1">Podkova</option><option class="ucp-promo" value="-1">Poiret One</option><option class="ucp-promo" value="-1">Poller One</option><option class="ucp-promo" value="-1">Poly</option><option class="ucp-promo" value="-1">Pompiere</option><option class="ucp-promo" value="-1">Pontano Sans</option><option class="ucp-promo" value="-1">Port Lligat Sans</option><option class="ucp-promo" value="-1">Port Lligat Slab</option><option class="ucp-promo" value="-1">Prata</option><option class="ucp-promo" value="-1">Preahvihear</option><option class="ucp-promo" value="-1">Press Start 2P</option><option class="ucp-promo" value="-1">Princess Sofia</option><option class="ucp-promo" value="-1">Prociono</option><option class="ucp-promo" value="-1">Prosto One</option><option class="ucp-promo" value="-1">Puritan</option><option class="ucp-promo" value="-1">Purple Purse</option><option class="ucp-promo" value="-1">Quando</option><option class="ucp-promo" value="-1">Quantico</option><option class="ucp-promo" value="-1">Quattrocento</option><option class="ucp-promo" value="-1">Quattrocento Sans</option><option class="ucp-promo" value="-1">Questrial</option><option class="ucp-promo" value="-1">Quicksand</option><option class="ucp-promo" value="-1">Quintessential</option><option class="ucp-promo" value="-1">Qwigley</option><option class="ucp-promo" value="-1">Racing Sans One</option><option class="ucp-promo" value="-1">Radley</option><option class="ucp-promo" value="-1">Rajdhani</option><option class="ucp-promo" value="-1">Raleway</option><option class="ucp-promo" value="-1">Raleway Dots</option><option class="ucp-promo" value="-1">Rambla</option><option class="ucp-promo" value="-1">Rammetto One</option><option class="ucp-promo" value="-1">Ranchers</option><option class="ucp-promo" value="-1">Rancho</option><option class="ucp-promo" value="-1">Rationale</option><option class="ucp-promo" value="-1">Redressed</option><option class="ucp-promo" value="-1">Reenie Beanie</option><option class="ucp-promo" value="-1">Revalia</option><option class="ucp-promo" value="-1">Ribeye</option><option class="ucp-promo" value="-1">Ribeye Marrow</option><option class="ucp-promo" value="-1">Righteous</option><option class="ucp-promo" value="-1">Risque</option><option class="ucp-promo" value="-1">Roboto</option><option class="ucp-promo" value="-1">Roboto Condensed</option><option class="ucp-promo" value="-1">Roboto Slab</option><option class="ucp-promo" value="-1">Rochester</option><option class="ucp-promo" value="-1">Rock Salt</option><option class="ucp-promo" value="-1">Rokkitt</option><option class="ucp-promo" value="-1">Romanesco</option><option class="ucp-promo" value="-1">Ropa Sans</option><option class="ucp-promo" value="-1">Rosario</option><option class="ucp-promo" value="-1">Rosarivo</option><option class="ucp-promo" value="-1">Rouge Script</option><option class="ucp-promo" value="-1">Rubik Mono One</option><option class="ucp-promo" value="-1">Rubik One</option><option class="ucp-promo" value="-1">Ruda</option><option class="ucp-promo" value="-1">Rufina</option><option class="ucp-promo" value="-1">Ruge Boogie</option><option class="ucp-promo" value="-1">Ruluko</option><option class="ucp-promo" value="-1">Rum Raisin</option><option class="ucp-promo" value="-1">Ruslan Display</option><option class="ucp-promo" value="-1">Russo One</option><option class="ucp-promo" value="-1">Ruthie</option><option class="ucp-promo" value="-1">Rye</option><option class="ucp-promo" value="-1">Sacramento</option><option class="ucp-promo" value="-1">Sail</option><option class="ucp-promo" value="-1">Salsa</option><option class="ucp-promo" value="-1">Sanchez</option><option class="ucp-promo" value="-1">Sancreek</option><option class="ucp-promo" value="-1">Sansita One</option><option class="ucp-promo" value="-1">Sarina</option><option class="ucp-promo" value="-1">Satisfy</option><option class="ucp-promo" value="-1">Scada</option><option class="ucp-promo" value="-1">Schoolbell</option><option class="ucp-promo" value="-1">Seaweed Script</option><option class="ucp-promo" value="-1">Sevillana</option><option class="ucp-promo" value="-1">Seymour One</option><option class="ucp-promo" value="-1">Shadows Into Light</option><option class="ucp-promo" value="-1">Shadows Into Light Two</option><option class="ucp-promo" value="-1">Shanti</option><option class="ucp-promo" value="-1">Share</option><option class="ucp-promo" value="-1">Share Tech</option><option class="ucp-promo" value="-1">Share Tech Mono</option><option class="ucp-promo" value="-1">Shojumaru</option><option class="ucp-promo" value="-1">Short Stack</option><option class="ucp-promo" value="-1">Siemreap</option><option class="ucp-promo" value="-1">Sigmar One</option><option class="ucp-promo" value="-1">Signika</option><option class="ucp-promo" value="-1">Signika Negative</option><option class="ucp-promo" value="-1">Simonetta</option><option class="ucp-promo" value="-1">Sintony</option><option class="ucp-promo" value="-1">Sirin Stencil</option><option class="ucp-promo" value="-1">Six Caps</option><option class="ucp-promo" value="-1">Skranji</option><option class="ucp-promo" value="-1">Slabo 13px</option><option class="ucp-promo" value="-1">Slabo 27px</option><option class="ucp-promo" value="-1">Slackey</option><option class="ucp-promo" value="-1">Smokum</option><option class="ucp-promo" value="-1">Smythe</option><option class="ucp-promo" value="-1">Sniglet</option><option class="ucp-promo" value="-1">Snippet</option><option class="ucp-promo" value="-1">Snowburst One</option><option class="ucp-promo" value="-1">Sofadi One</option><option class="ucp-promo" value="-1">Sofia</option><option class="ucp-promo" value="-1">Sonsie One</option><option class="ucp-promo" value="-1">Sorts Mill Goudy</option><option class="ucp-promo" value="-1">Source Code Pro</option><option class="ucp-promo" value="-1">Source Sans Pro</option><option class="ucp-promo" value="-1">Source Serif Pro</option><option class="ucp-promo" value="-1">Special Elite</option><option class="ucp-promo" value="-1">Spicy Rice</option><option class="ucp-promo" value="-1">Spinnaker</option><option class="ucp-promo" value="-1">Spirax</option><option class="ucp-promo" value="-1">Squada One</option><option class="ucp-promo" value="-1">Stalemate</option><option class="ucp-promo" value="-1">Stalinist One</option><option class="ucp-promo" value="-1">Stardos Stencil</option><option class="ucp-promo" value="-1">Stint Ultra Condensed</option><option class="ucp-promo" value="-1">Stint Ultra Expanded</option><option class="ucp-promo" value="-1">Stoke</option><option class="ucp-promo" value="-1">Strait</option><option class="ucp-promo" value="-1">Sue Ellen Francisco</option><option class="ucp-promo" value="-1">Sunshiney</option><option class="ucp-promo" value="-1">Supermercado One</option><option class="ucp-promo" value="-1">Suwannaphum</option><option class="ucp-promo" value="-1">Swanky and Moo Moo</option><option class="ucp-promo" value="-1">Syncopate</option><option class="ucp-promo" value="-1">Tangerine</option><option class="ucp-promo" value="-1">Taprom</option><option class="ucp-promo" value="-1">Tauri</option><option class="ucp-promo" value="-1">Teko</option><option class="ucp-promo" value="-1">Telex</option><option class="ucp-promo" value="-1">Tenor Sans</option><option class="ucp-promo" value="-1">Text Me One</option><option class="ucp-promo" value="-1">The Girl Next Door</option><option class="ucp-promo" value="-1">Tienne</option><option class="ucp-promo" value="-1">Tinos</option><option class="ucp-promo" value="-1">Titan One</option><option class="ucp-promo" value="-1">Titillium Web</option><option class="ucp-promo" value="-1">Trade Winds</option><option class="ucp-promo" value="-1">Trocchi</option><option class="ucp-promo" value="-1">Trochut</option><option class="ucp-promo" value="-1">Trykker</option><option class="ucp-promo" value="-1">Tulpen One</option><option class="ucp-promo" value="-1">Ubuntu</option><option class="ucp-promo" value="-1">Ubuntu Condensed</option><option class="ucp-promo" value="-1">Ubuntu Mono</option><option class="ucp-promo" value="-1">Ultra</option><option class="ucp-promo" value="-1">Uncial Antiqua</option><option class="ucp-promo" value="-1">Underdog</option><option class="ucp-promo" value="-1">Unica One</option><option class="ucp-promo" value="-1">UnifrakturCook</option><option class="ucp-promo" value="-1">UnifrakturMaguntia</option><option class="ucp-promo" value="-1">Unkempt</option><option class="ucp-promo" value="-1">Unlock</option><option class="ucp-promo" value="-1">Unna</option><option class="ucp-promo" value="-1">VT323</option><option class="ucp-promo" value="-1">Vampiro One</option><option class="ucp-promo" value="-1">Varela</option><option class="ucp-promo" value="-1">Varela Round</option><option class="ucp-promo" value="-1">Vast Shadow</option><option class="ucp-promo" value="-1">Vibur</option><option class="ucp-promo" value="-1">Vidaloka</option><option class="ucp-promo" value="-1">Viga</option><option class="ucp-promo" value="-1">Voces</option><option class="ucp-promo" value="-1">Volkhov</option><option class="ucp-promo" value="-1">Vollkorn</option><option class="ucp-promo" value="-1">Voltaire</option><option class="ucp-promo" value="-1">Waiting for the Sunrise</option><option class="ucp-promo" value="-1">Wallpoet</option><option class="ucp-promo" value="-1">Walter Turncoat</option><option class="ucp-promo" value="-1">Warnes</option><option class="ucp-promo" value="-1">Wellfleet</option><option class="ucp-promo" value="-1">Wendy One</option><option class="ucp-promo" value="-1">Wire One</option><option class="ucp-promo" value="-1">Yanone Kaffeesatz</option><option class="ucp-promo" value="-1">Yellowtail</option><option class="ucp-promo" value="-1">Yeseva One</option><option class="ucp-promo" value="-1">Yesteryear</option><option class="ucp-promo" value="-1">Zeyada</option>'; |
| [1619](#L1619) | echo '</select>'; |
| [1620](#L1620) | echo '<p class="description">Choose one of 600+ beautiful Bunny fonts or use the default, theme set one. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="content\_font">PRO feature</a>.</p>'; |
| [1621](#L1621) | echo '</td>'; |
| [1622](#L1622) | echo '</tr>'; |
| [1623](#L1623) |  |
| [1624](#L1624) | echo '<tr valign="top"> |
| [1625](#L1625) | <th scope="row"><label for="external\_shortcodes">' . esc\_attr\_\_('3rd Party Shortcode Support in Content', 'under-construction-page') . '</label></th> |
| [1626](#L1626) | <td>'; |
| [1627](#L1627) | echo '<div class="toggle-wrapper"> |
| [1628](#L1628) | <input type="checkbox" id="external\_shortcodes" type="checkbox" value="1" class="skip-save open-ucp-upsell"> |
| [1629](#L1629) | <label for="external\_shortcodes" class="toggle"><span class="toggle\_handler"></span></label> |
| [1630](#L1630) | </div>'; |
| [1631](#L1631) | echo '<p class="description">Enable if you have a 3rd party shortcode you\'d like to use on the under construction page. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="external\_shortcodes">PRO feature</a>.</p>'; |
| [1632](#L1632) | echo '</td></tr>'; |
| [1633](#L1633) |  |
| [1634](#L1634) | echo '<tr valign="top" id="login\_button\_wrap"> |
| [1635](#L1635) | <th scope="row"><label for="login\_button">' . esc\_attr\_\_('Login Button', 'under-construction-page') . '</label></th> |
| [1636](#L1636) | <td>'; |
| [1637](#L1637) | echo '<div class="toggle-wrapper"> |
| [1638](#L1638) | <input type="checkbox" id="login\_button" ' . esc\_attr(self::checked(1, $options['login\_button'])) . ' type="checkbox" value="1" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[login\_button]"> |
| [1639](#L1639) | <label for="login\_button" class="toggle"><span class="toggle\_handler"></span></label> |
| [1640](#L1640) | </div>'; |
| [1641](#L1641) | echo '<p class="description">Show a discrete link to the login form, or WP admin if you\'re logged in, in the lower right corner of the page.</p>'; |
| [1642](#L1642) | echo '</td></tr>'; |
| [1643](#L1643) |  |
| [1644](#L1644) | echo '<tr valign="top"> |
| [1645](#L1645) | <th scope="row"><label for="custom\_footer\_code">' . esc\_attr\_\_('Custom Footer Code', 'under-construction-page') . '</label></th> |
| [1646](#L1646) | <td>'; |
| [1647](#L1647) | echo '<textarea data-autoresize="1" rows="3" id="custom\_footer\_code" class="code large-text skip-save disabled open-ucp-upsell" name="" placeholder=""></textarea>'; |
| [1648](#L1648) | echo '<p class="description">Paste any 3rd party code here such as tracking scripts or tracking pixels. Be sure to include &lt;script&gt; tags as nothing is added automatically.<br>This is NOT a place to add Google Analytics code. Please use the <a href="#ga\_tracking\_id\_toggle" class="change\_tab" data-tab="0">GA Tracking setting</a> for that. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="footer\_code">PRO feature</a>.</p>'; |
| [1649](#L1649) | echo '</td></tr>'; |
| [1650](#L1650) |  |
| [1651](#L1651) | echo '</table>'; |
| [1652](#L1652) |  |
| [1653](#L1653) | self::footer\_buttons(); |
| [1654](#L1654) |  |
| [1655](#L1655) | echo '<h2 class="title">' . esc\_attr\_\_('Social &amp; Contact Icons', 'under-construction-page') . '</h2>'; |
| [1656](#L1656) |  |
| [1657](#L1657) | echo '<table class="form-table" id="ucp-social-icons">'; |
| [1658](#L1658) | echo '<tr valign="top"> |
| [1659](#L1659) | <th scope="row"><label for="social\_facebook">' . esc\_attr\_\_('Facebook Page', 'under-construction-page') . '</label></th> |
| [1660](#L1660) | <td><input id="social\_facebook" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_facebook]" value="' . esc\_attr($options['social\_facebook']) . '" placeholder="' . esc\_attr\_\_('Facebook business or personal page URL', 'under-construction-page') . '">'; |
| [1661](#L1661) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to Facebook page.', 'under-construction-page') . '</p>'; |
| [1662](#L1662) | echo '</td></tr>'; |
| [1663](#L1663) |  |
| [1664](#L1664) | echo '<tr valign="top"> |
| [1665](#L1665) | <th scope="row"><label for="social\_twitter">' . esc\_attr\_\_('Twitter Profile', 'under-construction-page') . '</label></th> |
| [1666](#L1666) | <td><input id="social\_twitter" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_twitter]" value="' . esc\_attr($options['social\_twitter']) . '" placeholder="' . esc\_attr\_\_('Twitter profile URL', 'under-construction-page') . '">'; |
| [1667](#L1667) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to Twitter profile page.', 'under-construction-page') . '</p>'; |
| [1668](#L1668) | echo '</td></tr>'; |
| [1669](#L1669) |  |
| [1670](#L1670) | echo '<tr valign="top"> |
| [1671](#L1671) | <th scope="row"><label for="social\_linkedin">' . esc\_attr\_\_('LinkedIn Profile', 'under-construction-page') . '</label></th> |
| [1672](#L1672) | <td><input id="social\_linkedin" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_linkedin]" value="' . esc\_attr($options['social\_linkedin']) . '" placeholder="' . esc\_attr\_\_('LinkedIn profile page URL', 'under-construction-page') . '">'; |
| [1673](#L1673) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to LinkedIn profile page.', 'under-construction-page') . '</p>'; |
| [1674](#L1674) | echo '</td></tr>'; |
| [1675](#L1675) |  |
| [1676](#L1676) | echo '<tr valign="top"> |
| [1677](#L1677) | <th scope="row"><label for="social\_youtube">' . esc\_attr\_\_('YouTube Profile Page or Video', 'under-construction-page') . '</label></th> |
| [1678](#L1678) | <td><input id="social\_youtube" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_youtube]" value="' . esc\_attr($options['social\_youtube']) . '" placeholder="' . esc\_attr\_\_('YouTube page or video URL', 'under-construction-page') . '">'; |
| [1679](#L1679) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to YouTube page or video.', 'under-construction-page') . '</p>'; |
| [1680](#L1680) | echo '</td></tr>'; |
| [1681](#L1681) |  |
| [1682](#L1682) | echo '<tr valign="top" class="hidden"> |
| [1683](#L1683) | <th scope="row"><label for="social\_vimeo">' . esc\_attr\_\_('Vimeo Profile Page or Video', 'under-construction-page') . '</label></th> |
| [1684](#L1684) | <td><input id="social\_vimeo" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_vimeo]" value="' . esc\_attr($options['social\_vimeo']) . '" placeholder="' . esc\_attr\_\_('Vimeo page or video URL', 'under-construction-page') . '">'; |
| [1685](#L1685) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to Vimeo page or video.', 'under-construction-page') . '</p>'; |
| [1686](#L1686) | echo '</td></tr>'; |
| [1687](#L1687) |  |
| [1688](#L1688) | echo '<tr valign="top" class="hidden"> |
| [1689](#L1689) | <th scope="row"><label for="social\_pinterest">' . esc\_attr\_\_('Pinterest Profile', 'under-construction-page') . '</label></th> |
| [1690](#L1690) | <td><input id="social\_pinterest" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_pinterest]" value="' . esc\_attr($options['social\_pinterest']) . '" placeholder="' . esc\_attr\_\_('Pinterest profile URL', 'under-construction-page') . '">'; |
| [1691](#L1691) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to Pinterest profile.', 'under-construction-page') . '</p>'; |
| [1692](#L1692) | echo '</td></tr>'; |
| [1693](#L1693) |  |
| [1694](#L1694) | echo '<tr valign="top" class="hidden"> |
| [1695](#L1695) | <th scope="row"><label for="social\_dribbble">' . esc\_attr\_\_('Dribbble Profile', 'under-construction-page') . '</label></th> |
| [1696](#L1696) | <td><input id="social\_dribbble" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_dribbble]" value="' . esc\_attr($options['social\_dribbble']) . '" placeholder="' . esc\_attr\_\_('Dribbble profile URL', 'under-construction-page') . '">'; |
| [1697](#L1697) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to Dribbble profile.', 'under-construction-page') . '</p>'; |
| [1698](#L1698) | echo '</td></tr>'; |
| [1699](#L1699) |  |
| [1700](#L1700) | echo '<tr valign="top" class="hidden"> |
| [1701](#L1701) | <th scope="row"><label for="social\_behance">' . esc\_attr\_\_('Behance Profile', 'under-construction-page') . '</label></th> |
| [1702](#L1702) | <td><input id="social\_behance" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_behance]" value="' . esc\_attr($options['social\_behance']) . '" placeholder="' . esc\_attr\_\_('Behance profile URL', 'under-construction-page') . '">'; |
| [1703](#L1703) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to Behance profile.', 'under-construction-page') . '</p>'; |
| [1704](#L1704) | echo '</td></tr>'; |
| [1705](#L1705) |  |
| [1706](#L1706) | echo '<tr valign="top" class="hidden"> |
| [1707](#L1707) | <th scope="row"><label for="social\_instagram">' . esc\_attr\_\_('Instagram Profile', 'under-construction-page') . '</label></th> |
| [1708](#L1708) | <td><input id="social\_instagram" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_instagram]" value="' . esc\_attr($options['social\_instagram']) . '" placeholder="' . esc\_attr\_\_('Instagram profile URL', 'under-construction-page') . '">'; |
| [1709](#L1709) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to Instagram profile.', 'under-construction-page') . '</p>'; |
| [1710](#L1710) | echo '</td></tr>'; |
| [1711](#L1711) |  |
| [1712](#L1712) | echo '<tr valign="top" class="hidden"> |
| [1713](#L1713) | <th scope="row"><label for="social\_vk">' . esc\_attr\_\_('VK Profile', 'under-construction-page') . '</label></th> |
| [1714](#L1714) | <td><input id="social\_vk" type="url" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_vk]" value="' . esc\_attr($options['social\_vk']) . '" placeholder="' . esc\_attr\_\_('VK profile URL', 'under-construction-page') . '">'; |
| [1715](#L1715) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix, to VK profile.', 'under-construction-page') . '</p>'; |
| [1716](#L1716) | echo '</td></tr>'; |
| [1717](#L1717) |  |
| [1718](#L1718) | echo '<tr valign="top" class="hidden"> |
| [1719](#L1719) | <th scope="row"><label for="social\_telegram">' . esc\_attr\_\_('Telegram Group, Channel or Account', 'under-construction-page') . '</label></th> |
| [1720](#L1720) | <td><input id="social\_telegram" type="text" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_telegram]" value="' . esc\_attr($options['social\_telegram']) . '" placeholder="' . esc\_attr\_\_('Telegram group, channel or account URL', 'under-construction-page') . '">'; |
| [1721](#L1721) | echo '<p class="description">' . esc\_attr\_\_('Complete URL, with https prefix to Telegram group, channel or account.', 'under-construction-page') . '</p>'; |
| [1722](#L1722) | echo '</td></tr>'; |
| [1723](#L1723) |  |
| [1724](#L1724) | echo '<tr valign="top" class="hidden"> |
| [1725](#L1725) | <th scope="row"><label for="social\_skype">' . esc\_attr\_\_('Skype Username', 'under-construction-page') . '</label></th> |
| [1726](#L1726) | <td><input id="social\_skype" type="text" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_skype]" value="' . esc\_attr($options['social\_skype']) . '" placeholder="' . esc\_attr\_\_('Skype username or account name', 'under-construction-page') . '">'; |
| [1727](#L1727) | echo '<p class="description">' . esc\_attr\_\_('Skype username or account name.', 'under-construction-page') . '</p>'; |
| [1728](#L1728) | echo '</td></tr>'; |
| [1729](#L1729) |  |
| [1730](#L1730) | echo '<tr valign="top" class="hidden"> |
| [1731](#L1731) | <th scope="row"><label for="social\_whatsapp">' . esc\_attr\_\_('WhatsApp Phone Number', 'under-construction-page') . '</label></th> |
| [1732](#L1732) | <td><input id="social\_whatsapp" type="text" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_whatsapp]" value="' . esc\_attr($options['social\_whatsapp']) . '" placeholder="' . esc\_attr\_\_('123-456-789', 'under-construction-page') . '">'; |
| [1733](#L1733) | echo '<p class="description">' . esc\_attr\_\_('WhatsApp phone number in international format without + or 00 prefix.', 'under-construction-page') . '</p>'; |
| [1734](#L1734) | echo '</td></tr>'; |
| [1735](#L1735) |  |
| [1736](#L1736) | echo '<tr valign="top" class="hidden"> |
| [1737](#L1737) | <th scope="row"><label for="social\_email">' . esc\_attr\_\_('Email Address', 'under-construction-page') . '</label></th> |
| [1738](#L1738) | <td><input id="social\_email" type="email" class="regular-text code" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_email]" value="' . esc\_attr($options['social\_email']) . '" placeholder="' . esc\_attr\_\_('name@domain.com', 'under-construction-page') . '">'; |
| [1739](#L1739) | echo '<p class="description">' . esc\_attr\_\_('Email will be encoded on the page to protect it from email address harvesters.', 'under-construction-page') . '</p>'; |
| [1740](#L1740) | echo '</td></tr>'; |
| [1741](#L1741) |  |
| [1742](#L1742) | echo '<tr valign="top" class="hidden"> |
| [1743](#L1743) | <th scope="row"><label for="social\_phone">' . esc\_attr\_\_('Phone Number', 'under-construction-page') . '</label></th> |
| [1744](#L1744) | <td><input id="social\_phone" type="tel" class="regular-text" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[social\_phone]" value="' . esc\_attr($options['social\_phone']) . '" placeholder="' . esc\_attr\_\_('+1-123-456-789', 'under-construction-page') . '">'; |
| [1745](#L1745) | echo '<p class="description">' . esc\_attr\_\_('Phone number in full international format.', 'under-construction-page') . '</p>'; |
| [1746](#L1746) | echo '</td></tr>'; |
| [1747](#L1747) |  |
| [1748](#L1748) | echo '<tr><th colspan="2"><a id="show-social-icons" href="#" class="js-action">' . esc\_attr\_\_('Show more Social &amp; Contact Icons', 'under-construction-page') . '</a></th></tr>'; |
| [1749](#L1749) |  |
| [1750](#L1750) | echo '</table>'; |
| [1751](#L1751) |  |
| [1752](#L1752) | echo '</div>'; |
| [1753](#L1753) |  |
| [1754](#L1754) | self::footer\_buttons(); |
| [1755](#L1755) | } // tab\_content |
| [1756](#L1756) |  |
| [1757](#L1757) |  |
| [1758](#L1758) | static function get\_themes() |
| [1759](#L1759) | { |
| [1760](#L1760) | $themes = array( |
| [1761](#L1761) | '\_pro\_custom' => esc\_attr\_\_('Build Your Own Custom Theme', 'under-construction-page'), |
| [1762](#L1762) | 'mad\_designer' => esc\_attr\_\_('Mad Designer', 'under-construction-page'), |
| [1763](#L1763) | '\_pro\_simple-beige' => esc\_attr\_\_('Simple Beige Text', 'under-construction-page'), |
| [1764](#L1764) | 'plain\_text' => esc\_attr\_\_('Plain Text', 'under-construction-page'), |
| [1765](#L1765) | '\_pro\_simple-office-theme' => esc\_attr\_\_('Simple Office', 'under-construction-page'), |
| [1766](#L1766) | 'under\_construction' => esc\_attr\_\_('Under Construction', 'under-construction-page'), |
| [1767](#L1767) | '\_pro\_model-portfolio' => esc\_attr\_\_('Model Portfolio', 'under-construction-page'), |
| [1768](#L1768) | 'dark' => esc\_attr\_\_('Things Went Dark', 'under-construction-page'), |
| [1769](#L1769) | '\_pro\_watch-company' => esc\_attr\_\_('The Watch Store', 'under-construction-page'), |
| [1770](#L1770) | 'forklift' => esc\_attr\_\_('Forklift at Work', 'under-construction-page'), |
| [1771](#L1771) | '\_pro\_sport-shop' => esc\_attr\_\_('Sport Shop', 'under-construction-page'), |
| [1772](#L1772) | 'under\_construction\_text' => esc\_attr\_\_('Under Construction Text', 'under-construction-page'), |
| [1773](#L1773) | '\_pro\_cloud-business-inc' => esc\_attr\_\_('Cloud Business', 'under-construction-page'), |
| [1774](#L1774) | 'cyber\_chick' => esc\_attr\_\_('Cyber Chick', 'under-construction-page'), |
| [1775](#L1775) | '\_pro\_photography' => esc\_attr\_\_('Photography', 'under-construction-page'), |
| [1776](#L1776) | 'rocket' => esc\_attr\_\_('Rocket Launch', 'under-construction-page'), |
| [1777](#L1777) | '\_pro\_smoothie' => esc\_attr\_\_('Green Smoothie Webinar', 'under-construction-page'), |
| [1778](#L1778) | 'loader' => esc\_attr\_\_('Loader at Work', 'under-construction-page'), |
| [1779](#L1779) | '\_pro\_stunning-nature' => esc\_attr\_\_('Stunning Nature', 'under-construction-page'), |
| [1780](#L1780) | 'cyber\_chick\_dark' => esc\_attr\_\_('Cyber Chick Dark', 'under-construction-page'), |
| [1781](#L1781) | '\_pro\_small-office' => esc\_attr\_\_('Small Office', 'under-construction-page'), |
| [1782](#L1782) | 'safe' => esc\_attr\_\_('Safe', 'under-construction-page'), |
| [1783](#L1783) | 'people' => esc\_attr\_\_('People at Work', 'under-construction-page'), |
| [1784](#L1784) | '\_pro\_custom' => esc\_attr\_\_('Build Your Own Custom Theme', 'under-construction-page'), |
| [1785](#L1785) | 'windmill' => esc\_attr\_\_('Windmill', 'under-construction-page'), |
| [1786](#L1786) | 'sad\_site' => esc\_attr\_\_('Sad Site', 'under-construction-page'), |
| [1787](#L1787) | '\_pro-soothing-nature' => esc\_attr\_\_('Soothing Nature', 'under-construction-page'), |
| [1788](#L1788) | 'lighthouse' => esc\_attr\_\_('Lighthouse', 'under-construction-page'), |
| [1789](#L1789) | 'hot\_air\_baloon' => esc\_attr\_\_('Hot Air Balloon', 'under-construction-page'), |
| [1790](#L1790) | '\_pro\_business-statistics' => esc\_attr\_\_('Business Statistics', 'under-construction-page'), |
| [1791](#L1791) | 'people\_2' => esc\_attr\_\_('People at Work #2', 'under-construction-page'), |
| [1792](#L1792) | 'rocket\_2' => esc\_attr\_\_('Rocket Launch #2', 'under-construction-page'), |
| [1793](#L1793) | '\_pro\_travel-blog' => esc\_attr\_\_('Travel Blog', 'under-construction-page'), |
| [1794](#L1794) | 'light\_bulb' => esc\_attr\_\_('Light Bulb', 'under-construction-page'), |
| [1795](#L1795) | 'ambulance' => esc\_attr\_\_('Ambulance', 'under-construction-page'), |
| [1796](#L1796) | '\_pro\_forest-in-the-fog' => esc\_attr\_\_('Forest in the Fog', 'under-construction-page'), |
| [1797](#L1797) | 'laptop' => esc\_attr\_\_('Laptop', 'under-construction-page'), |
| [1798](#L1798) | 'puzzles' => esc\_attr\_\_('Puzzles', 'under-construction-page'), |
| [1799](#L1799) | '\_pro\_sunset' => esc\_attr\_\_('Sunset', 'under-construction-page'), |
| [1800](#L1800) | 'iot' => esc\_attr\_\_('Internet of Things', 'under-construction-page'), |
| [1801](#L1801) | 'setup' => esc\_attr\_\_('Setup', 'under-construction-page'), |
| [1802](#L1802) | '\_pro\_fitness-studio' => esc\_attr\_\_('Fitness Studio Landing Page', 'under-construction-page'), |
| [1803](#L1803) | 'stop' => esc\_attr\_\_('Stop', 'under-construction-page'), |
| [1804](#L1804) | 'clock' => esc\_attr\_\_('Clock', 'under-construction-page'), |
| [1805](#L1805) | '\_pro\_mountain' => esc\_attr\_\_('Mountain Peak', 'under-construction-page'), |
| [1806](#L1806) | 'bulldozer' => esc\_attr\_\_('Bulldozer at Work', 'under-construction-page'), |
| [1807](#L1807) | 'christmas' => esc\_attr\_\_('Christmas Greetings', 'under-construction-page'), |
| [1808](#L1808) | '\_pro\_pink-lips' => esc\_attr\_\_('Pink Lips', 'under-construction-page'), |
| [1809](#L1809) | 'hard\_worker' => esc\_attr\_\_('Hard Worker', 'under-construction-page'), |
| [1810](#L1810) | 'closed' => esc\_attr\_\_('Temporarily Closed', 'under-construction-page'), |
| [1811](#L1811) | '\_pro\_animated-green' => esc\_attr\_\_('Simple Green Animated', 'under-construction-page'), |
| [1812](#L1812) | 'dumper\_truck' => esc\_attr\_\_('Dumper Truck', 'under-construction-page'), |
| [1813](#L1813) | '000webhost' => esc\_attr\_\_('000webhost', 'under-construction-page'), |
| [1814](#L1814) | '\_pro\_grayscale-city' => esc\_attr\_\_('Grayscale City', 'under-construction-page'), |
| [1815](#L1815) | 'work\_desk' => esc\_attr\_\_('Work Desk', 'under-construction-page'), |
| [1816](#L1816) | 'research' => esc\_attr\_\_('Research', 'under-construction-page'), |
| [1817](#L1817) | '\_pro\_wedding' => esc\_attr\_\_('Wedding', 'under-construction-page') |
| [1818](#L1818) | ); |
| [1819](#L1819) |  |
| [1820](#L1820) | $themes = apply\_filters('ucp\_themes', $themes); |
| [1821](#L1821) |  |
| [1822](#L1822) | return $themes; |
| [1823](#L1823) | } // get\_themes |
| [1824](#L1824) |  |
| [1825](#L1825) |  |
| [1826](#L1826) | static function tab\_design() |
| [1827](#L1827) | { |
| [1828](#L1828) | $options = self::get\_options(); |
| [1829](#L1829) |  |
| [1830](#L1830) | $img\_path = UCP\_PLUGIN\_URL . 'images/thumbnails/'; |
| [1831](#L1831) | $themes = self::get\_themes(); |
| [1832](#L1832) |  |
| [1833](#L1833) | echo '<table class="form-table">'; |
| [1834](#L1834) | echo '<tr valign="top"> |
| [1835](#L1835) | <td colspan="2"><b style="margin-bottom: 10px; display: inline-block;">' . esc\_attr\_\_('Theme', 'under-construction-page') . '</b> (<a target="\_blank" href="' . esc\_url(self::generate\_web\_link('themes-browse-premium', 'templates')) . '">browse 350+ premium themes</a>)<br>'; |
| [1836](#L1836) | echo '<input type="hidden" id="theme\_id" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[theme]" value="' . esc\_attr($options['theme']) . '">'; |
| [1837](#L1837) |  |
| [1838](#L1838) | foreach ($themes as $theme\_id => $theme\_name) { |
| [1839](#L1839) | if ($theme\_id === $options['theme']) { |
| [1840](#L1840) | $class = ' active'; |
| [1841](#L1841) | } else { |
| [1842](#L1842) | $class = ''; |
| [1843](#L1843) | } |
| [1844](#L1844) | if (substr($theme\_id, 0, 4) == '\_pro') { |
| [1845](#L1845) | $theme\_id = substr($theme\_id, 5); |
| [1846](#L1846) | echo '<div class="ucp-thumb ucp-thumb-pro" data-theme-id="' . esc\_attr($theme\_id) . '"><img src="' . esc\_attr($img\_path) . 'pro/' . esc\_attr($theme\_id) . '.jpg" alt="' . esc\_attr($theme\_name) . '" title="' . esc\_attr($theme\_name) . '"><span>' . esc\_attr($theme\_name) . '</span>'; |
| [1847](#L1847) | echo '<div class="buttons"><a href="#" data-pro-ad="activate\_' . esc\_attr($theme\_id) . '" class="open-ucp-upsell button button-primary">Activate</a> '; |
| [1848](#L1848) | if ($theme\_id != 'custom') { |
| [1849](#L1849) | echo '<a href="https://templates.underconstructionpage.com/?ucp\_template\_preview&template=' . esc\_attr($theme\_id) . '&utm\_source=ucp-free&utm\_medium=plugin&utm\_content=design-preview-' . esc\_attr($theme\_id) . '&utm\_campaign=ucp-free-v' . esc\_attr(self::$version) . '" class="button-secondary" target="\_blank">Preview</a>'; |
| [1850](#L1850) | } |
| [1851](#L1851) | echo '</div>'; |
| [1852](#L1852) | echo '<div title="PRO template" class="ribbon"><i><span class="dashicons dashicons-star-filled"></span></i></div></div>'; |
| [1853](#L1853) | } else { |
| [1854](#L1854) | echo '<div class="ucp-thumb' . esc\_attr($class) . '" data-theme-id="' . esc\_attr($theme\_id) . '"><img src="' . esc\_attr($img\_path . $theme\_id) . '.png" alt="' . esc\_attr($theme\_name) . '" title="' . esc\_attr($theme\_name) . '"><span>' . esc\_attr($theme\_name) . '</span>'; |
| [1855](#L1855) | echo '<div class="buttons">'; |
| [1856](#L1856) | if ($theme\_id !== $options['theme']) { |
| [1857](#L1857) | echo '<a href="#" class="button button-primary activate-theme">Activate</a> '; |
| [1858](#L1858) | } |
| [1859](#L1859) | echo '<a href="' . esc\_url(get\_home\_url()) . '/?ucp\_preview&theme=' . esc\_attr($theme\_id) . '" class="button-secondary" target="\_blank">Preview</a></div>'; |
| [1860](#L1860) | echo '</div>'; |
| [1861](#L1861) | } |
| [1862](#L1862) | } // foreach |
| [1863](#L1863) |  |
| [1864](#L1864) | echo '</td></tr>'; |
| [1865](#L1865) |  |
| [1866](#L1866) | echo '<tr valign="top"> |
| [1867](#L1867) | <th scope="row"><label for="custom\_css">' . esc\_attr\_\_('Custom CSS', 'under-construction-page') . '</label></th> |
| [1868](#L1868) | <td>'; |
| [1869](#L1869) | echo '<textarea data-autoresize="1" rows="3" id="custom\_css" class="code large-text" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[custom\_css]" placeholder=".selector { property-name: property-value; }">' . esc\_textarea($options['custom\_css']) . '</textarea>'; |
| [1870](#L1870) | echo '<p class="description">&lt;style&gt; tags will be added automatically. Do not include them in your code.<br> |
| [1871](#L1871) | For RTL languages support add: <code>body { direction: rtl; }</code><br>If you need help with writing custom CSS code, post your question on the <a href="https://wordpress.org/support/plugin/under-construction-page/" target="\_blank">official forum</a>.</p>'; |
| [1872](#L1872) | echo '</td></tr>'; |
| [1873](#L1873) |  |
| [1874](#L1874) | echo '</table>'; |
| [1875](#L1875) |  |
| [1876](#L1876) | self::footer\_buttons(); |
| [1877](#L1877) | } // tab\_design |
| [1878](#L1878) |  |
| [1879](#L1879) |  |
| [1880](#L1880) | // markup & logic for access tab |
| [1881](#L1881) | static function tab\_access() |
| [1882](#L1882) | { |
| [1883](#L1883) | $options = self::get\_options(); |
| [1884](#L1884) | $default\_options = self::default\_options(); |
| [1885](#L1885) | $roles = $users = array(); |
| [1886](#L1886) |  |
| [1887](#L1887) | $tmp\_roles = get\_editable\_roles(); |
| [1888](#L1888) | foreach ($tmp\_roles as $tmp\_role => $details) { |
| [1889](#L1889) | $name = translate\_user\_role($details['name']); |
| [1890](#L1890) | $roles[] = array('val' => $tmp\_role,  'label' => $name); |
| [1891](#L1891) | } |
| [1892](#L1892) |  |
| [1893](#L1893) | $tmp\_users = get\_users(array('fields' => array('id', 'display\_name'))); |
| [1894](#L1894) | foreach ($tmp\_users as $user) { |
| [1895](#L1895) | $users[] = array('val' => $user->id, 'label' => $user->display\_name); |
| [1896](#L1896) | } |
| [1897](#L1897) |  |
| [1898](#L1898) | echo '<div class="ucp-tab-content">'; |
| [1899](#L1899) | echo '<table class="form-table">'; |
| [1900](#L1900) |  |
| [1901](#L1901) | echo '<tr valign="top"> |
| [1902](#L1902) | <th scope="row"><label for="whitelisted\_ips">' . esc\_attr\_\_('Whitelisted IP Addresses', 'under-construction-page') . '</label></th> |
| [1903](#L1903) | <td>'; |
| [1904](#L1904) | echo '<div class="toggle-wrapper"> |
| [1905](#L1905) | <input type="checkbox" id="whitelisted\_ips" type="checkbox" value="1" class="skip-save open-ucp-upsell"> |
| [1906](#L1906) | <label for="whitelisted\_ips" class="toggle"><span class="toggle\_handler"></span></label> |
| [1907](#L1907) | </div>'; |
| [1908](#L1908) | echo '<p>Listed IP addresses (both IPv4 and IPv6 are supported) will not be affected by the under construction mode and their users will always see the "normal" site. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="whitelisted\_ips">PRO feature</a>.'; |
| [1909](#L1909) | echo '<td></tr>'; |
| [1910](#L1910) |  |
| [1911](#L1911) | echo '<tr valign="top"> |
| [1912](#L1912) | <th scope="row"><label for="access\_links">' . esc\_attr\_\_('Secret Direct Access Links', 'under-construction-page') . '</label></th> |
| [1913](#L1913) | <td>'; |
| [1914](#L1914) | echo '<div class="toggle-wrapper"> |
| [1915](#L1915) | <input type="checkbox" id="access\_links" type="checkbox" value="1" class="skip-save open-ucp-upsell"> |
| [1916](#L1916) | <label for="access\_links" class="toggle"><span class="toggle\_handler"></span></label> |
| [1917](#L1917) | </div>'; |
| [1918](#L1918) | echo '<p>The most flexible and user-friendly way (especially when working with clients) to give only selected visitors access to the "normal" site. Simply generate a new link, configure expiration options (time, number of visits or unique IPs) and share it with users to allow them access to the site. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="access\_links">PRO feature</a>.'; |
| [1919](#L1919) | echo '<td></tr>'; |
| [1920](#L1920) |  |
| [1921](#L1921) | echo '<tr valign="top" id="whitelisted-roles"> |
| [1922](#L1922) | <th scope="row">' . esc\_attr\_\_('Whitelisted User Roles', 'under-construction-page') . '</th> |
| [1923](#L1923) | <td>'; |
| [1924](#L1924) | foreach ($roles as $tmp\_role) { |
| [1925](#L1925) | echo  '<input name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[whitelisted\_roles][]" id="roles-' . esc\_attr($tmp\_role['val']) . '" ' . esc\_attr(self::checked($tmp\_role['val'], $options['whitelisted\_roles'], false)) . ' value="' . esc\_attr($tmp\_role['val']) . '" type="checkbox" /> <label for="roles-' . esc\_attr($tmp\_role['val']) . '">' . esc\_attr($tmp\_role['label']) . '</label><br />'; |
| [1926](#L1926) | } |
| [1927](#L1927) | echo '<p class="description">' . \_\_('Selected user roles will <b>not</b> be affected by the under construction mode and will always see the "normal" site. Default: administrator.', 'under-construction-page') . '</p>'; |
| [1928](#L1928) | echo '</td></tr>'; |
| [1929](#L1929) |  |
| [1930](#L1930) | echo '<tr valign="top"> |
| [1931](#L1931) | <th scope="row"><label for="whitelisted\_users">' . esc\_attr\_\_('Whitelisted Users', 'under-construction-page') . '</label></th> |
| [1932](#L1932) | <td><select id="whitelisted\_users" class="select2" style="width: 50%; max-width: 300px;" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[whitelisted\_users][]" multiple>'; |
| [1933](#L1933) | self::create\_select\_options($users, $options['whitelisted\_users'], true); |
| [1934](#L1934) |  |
| [1935](#L1935) | echo '</select><p class="description">' . \_\_('Selected users (when logged in) will <b>not</b> be affected by the under construction mode and will always see the "normal" site.', 'under-construction-page') . '</p>'; |
| [1936](#L1936) | echo '</td></tr>'; |
| [1937](#L1937) |  |
| [1938](#L1938) | echo '<tr>'; |
| [1939](#L1939) | echo '<th><label for="url\_rules">' . esc\_attr\_\_('URL Based Rules', 'under-construction-page') . '</label></th>'; |
| [1940](#L1940) | echo '<td><select class="skip-save open-ucp-upsell" id="url\_rules">'; |
| [1941](#L1941) | echo '<option value="0">Disabled</option>'; |
| [1942](#L1942) | echo '<option class="ucp-promo" value="-1">Listed URLs will NEVER be affected by UCP</option>'; |
| [1943](#L1943) | echo '<option class="ucp-promo" value="-1">ONLY listed URLs CAN BE affected by UCP</option>'; |
| [1944](#L1944) | echo '</select>'; |
| [1945](#L1945) | echo '<p class="description">Use this option to set per URL rules and lock down the entire site except selected pages; or lock down just some pages and leave all others accessible to visitors. If second option is used all other access rules still apply. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="url\_rules">PRO feature</a>.</p>'; |
| [1946](#L1946) | echo '</td>'; |
| [1947](#L1947) | echo '</tr>'; |
| [1948](#L1948) |  |
| [1949](#L1949) | echo '<tr> |
| [1950](#L1950) | <th scope="row"><label for="direct\_access\_password">' . esc\_attr\_\_('Direct Access Password', 'under-construction-page') . '</label></th> |
| [1951](#L1951) | <td>'; |
| [1952](#L1952) | echo '<input id="direct\_access\_password" type="text" class="skip-save open-ucp-upsell" value="" placeholder="">'; |
| [1953](#L1953) | echo '<p class="description">Direct Access Password is the most user-friendly way (especially when working with clients) to give selected users access to the "normal" site. Choose a password, save changes, and send users this link: <a href="' . esc\_url(get\_home\_url()) . '/#access-site-form">' . esc\_url(get\_home\_url()) . '/#access-site-form</a> or enable the "Password Form Button" option to show the password form button. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="whitelisted\_ips">PRO feature</a>.</p>'; |
| [1954](#L1954) | echo '</td></tr>'; |
| [1955](#L1955) |  |
| [1956](#L1956) | echo '<tr valign="top"> |
| [1957](#L1957) | <th scope="row"><label for="site\_password">' . esc\_attr\_\_('Password Protect Under Construction Page', 'under-construction-page') . '</label></th> |
| [1958](#L1958) | <td>'; |
| [1959](#L1959) | echo '<div class="toggle-wrapper"> |
| [1960](#L1960) | <input type="checkbox" id="site\_password" type="checkbox" value="1" class="skip-save open-ucp-upsell"> |
| [1961](#L1961) | <label for="site\_password" class="toggle"><span class="toggle\_handler"></span></label> |
| [1962](#L1962) | </div>'; |
| [1963](#L1963) | echo '<p class="description">Protected the entire site with a password you choose. Only those with the password can view the under construction page. This is a <a href="#" class="open-ucp-upsell" data-pro-ad="whitelisted\_ips">PRO feature</a>.</p>'; |
| [1964](#L1964) | echo '</td></tr>'; |
| [1965](#L1965) |  |
| [1966](#L1966) | echo '</table>'; |
| [1967](#L1967) | echo '</div>'; |
| [1968](#L1968) |  |
| [1969](#L1969) | self::footer\_buttons(); |
| [1970](#L1970) | } // tab\_access |
| [1971](#L1971) |  |
| [1972](#L1972) |  |
| [1973](#L1973) | // support tab - FAQ and links |
| [1974](#L1974) | static function tab\_support() |
| [1975](#L1975) | { |
| [1976](#L1976) | $user = wp\_get\_current\_user(); |
| [1977](#L1977) | $theme = wp\_get\_theme(); |
| [1978](#L1978) | $options = self::get\_options(); |
| [1979](#L1979) |  |
| [1980](#L1980) | echo '<div id="tabs\_support" class="ui-tabs ucp-tabs-2nd-level">'; |
| [1981](#L1981) | echo '<ul>'; |
| [1982](#L1982) | echo '<li><a href="#tab\_support\_contact">' . esc\_attr\_\_('Contact Support', 'under-construction-page') . '</a></li>'; |
| [1983](#L1983) | echo '<li><a href="#tab\_support\_faq">' . esc\_attr\_\_('FAQ', 'under-construction-page') . '</a></li>'; |
| [1984](#L1984) | echo '</ul>'; |
| [1985](#L1985) |  |
| [1986](#L1986) | echo '<div style="display: none;" id="tab\_support\_faq" class="ucp-tab-content">'; |
| [1987](#L1987) |  |
| [1988](#L1988) | echo '<p><b>Do you have any documentation?</b><br>Yes, <a href="' . esc\_url(self::generate\_web\_link('faq-documentation', 'documentation-free')) . '" target="\_blank">detailed documentation</a> with how-to guides is available on the plugins\'s site.</p>'; |
| [1989](#L1989) |  |
| [1990](#L1990) | echo '<p><b>Do you have a video to help me get started?</b><br>We sure do! <a href="https://www.youtube.com/watch?v=RN4XABhK7\_w" target="\_blank">Getting started with the UnderConstructionPage plugin</a>. If that doesn\'t help we also have an <a href="https://www.youtube.com/watch?v=K3DF-NP6Fog" target="\_blank">in-depth video walktrough</a>. In case you\'re still uncertain about something don\'t hesitate to contact our friendly support.</p>'; |
| [1991](#L1991) |  |
| [1992](#L1992) | echo '<p><b>UCP is disabled but Twitter and Facebook still show it as my site\'s preview/thumbnail when I post the URL</b><br>Twitter and Facebook have their own cache which has to be refreshed. You can either wait and the problem will resolve itself in about a day or you can manually refresh the cache.<br>For Facebook open the <a href="https://developers.facebook.com/tools/debug/" target="\_blank">Debugger</a>, input the URL, click "Debug". Once the results who up click "Scrape Again" to fetch the latest version of the page.<br>For Twitter, open the <a href="https://cards-dev.twitter.com/validator" target="\_blank">Card validator</a>, enter the URL and click "Preview card". Latest version of the site should appear.</p>'; |
| [1993](#L1993) |  |
| [1994](#L1994) | echo '<p><b>How can I build a custom page or customize themes?</b><br>If you know how to code custom CSS a lot can be accomplished by using the <a class="change\_tab" data-tab="1" href="#custom\_css">custom CSS</a> option. A much faster and easier solution is to check out <a href="#" data-pro-ad="faq-custom-css" class="open-ucp-upsell">UCP PRO</a> with an easy-to-use drag&amp;drop builder and dozens of pre-built themes.</p>'; |
| [1995](#L1995) |  |
| [1996](#L1996) | echo '<p><b>How can I check if construction mode is really enabled on my site?</b><br>If the under construction status is green in the admin bar (the very top of the page, above this text), then it\'s enabled. But we made a tool specifically for these kinds of situations so you can double-check everything. <a href="' . esc\_url(self::generate\_web\_link('faq-tester', 'under-construction-tester/', array('url' => get\_home\_url()))) . '" target="\_blank">Run under construction mode tester</a>.</p>'; |
| [1997](#L1997) |  |
| [1998](#L1998) | echo '<p><b>How can I work on my site while construction mode is enabled?</b><br>Make sure your user role (probably admin) is selected under <a class="change\_tab" data-tab="3" href="#whitelisted-roles">Access - Whitelisted User Roles</a> and open the site while logged in.</p>'; |
| [1999](#L1999) |  |
| [2000](#L2000) | echo '<p><b>How can I log in / access WordPress admin after construction mode has been enabled?</b><br>Enable the <a class="change\_tab" data-tab="2" href="#login\_button\_wrap">Login Button</a> option under Content, and a login link will be shown in the lower right corner of the under construction page.</p>'; |
| [2001](#L2001) |  |
| [2002](#L2002) | echo '<p><b>How do I add my logo to the page?</b><br>Head over to <a class="change\_tab" data-tab="2" href="#content\_wrap">Content</a> and click "Add Media". Upload/select the logo, position it as you see fit and add other content.</p>'; |
| [2003](#L2003) |  |
| [2004](#L2004) | echo '<p><b>I\'ve made changes to UCP, but they are not visible. What do I do?</b><br>Click "Save Changes" one more time. Open your site and force refresh browser cache (Ctrl or Shift + F5). If that doesn\'t help it means you have a caching plugin installed. Purge/delete cache in that plugin or disable it.</p>'; |
| [2005](#L2005) |  |
| [2006](#L2006) | echo '<p><b>How can I get more designs? Where do I download them?</b><br>We update the plugin every 7-10 days and each update comes with at least one new theme/design. There is no other way of getting more designs nor a place to download them.</p>'; |
| [2007](#L2007) |  |
| [2008](#L2008) | echo '<p><b>How can I edit designs?</b><br>There is an option to add <a class="change\_tab" data-tab="1" href="#custom\_css">custom CSS</a>. If you want more than that you will have to edit the source files located in <code>/under-construction-page/themes/</code>.</p>'; |
| [2009](#L2009) |  |
| [2010](#L2010) | echo '<p><b>I have disabled UCP but the under construction page is still visible. How do I remove it?</b><br>Open your site and force refresh browser cache (Ctrl or Shift + F5). If that doesn\'t help it means you have a caching plugin installed. Purge/delete cache in that plugin or disable it. If that fails too contact your hosting provider and ask to empty the site cache for you.</p>'; |
| [2011](#L2011) |  |
| [2012](#L2012) | echo '<p><b>I have disabled UCP but the site\'s favicon is still the UCP logo. How do I change/remove it?</b><br>Make sure your theme has a favicon defined and empty all caches - browser and server ones. Open the site and force refresh browser cache (Ctrl or Shift + F5). If that doesn\'t help it means you have a caching plugin installed. Purge/delete cache in that plugin or disable it. If that fails too contact your hosting provider and ask to empty the site cache for you.</p>'; |
| [2013](#L2013) |  |
| [2014](#L2014) | echo '</div>'; // faq |
| [2015](#L2015) |  |
| [2016](#L2016) | echo '<div style="display: none;" id="tab\_support\_contact" class="ucp-tab-content">'; |
| [2017](#L2017) |  |
| [2018](#L2018) | echo '<div id="support-hero"><p>Our average response time is 1.5h! <b>85% of tickets are resolved within 1 hour!</b> No ticket is left unanswered. If something is not working, don\'t think twice;</p><p><a class="button button-primary" href="https://wordpress.org/support/plugin/under-construction-page/#new-post" target="\_blank">OPEN A SUPPORT TICKET NOW</a></p></div>'; |
| [2019](#L2019) |  |
| [2020](#L2020) | echo '<p class="description">Our support agents need this info to provide faster &amp; better support. Please include the following data in your message;</p>'; |
| [2021](#L2021) | echo '<p>WordPress version: <code>' . get\_bloginfo('version') . '</code><br>'; |
| [2022](#L2022) | echo 'UCP Version: <code>' . esc\_attr(self::$version) . '</code><br>'; |
| [2023](#L2023) | echo 'PHP Version: <code>' . esc\_attr(PHP\_VERSION) . '</code><br>'; |
| [2024](#L2024) | echo 'Site URL: <code>' . esc\_url(get\_bloginfo('url')) . '</code><br>'; |
| [2025](#L2025) | echo 'WordPress URL: <code>' . esc\_url(get\_bloginfo('wpurl')) . '</code><br>'; |
| [2026](#L2026) | echo 'Theme: <code>' . esc\_attr($theme->get('Name') . ' v' . $theme->get('Version')) . '</code>'; |
| [2027](#L2027) | echo '</p>'; |
| [2028](#L2028) |  |
| [2029](#L2029) | echo '</div>'; // contact |
| [2030](#L2030) |  |
| [2031](#L2031) | echo '</div>'; // tabs |
| [2032](#L2032) | } // tab\_support |
| [2033](#L2033) |  |
| [2034](#L2034) |  |
| [2035](#L2035) | // tab PRO |
| [2036](#L2036) | static function tab\_pro() |
| [2037](#L2037) | { |
| [2038](#L2038) | $options = self::get\_options(); |
| [2039](#L2039) |  |
| [2040](#L2040) | echo '<div class="ucp-tab-content">'; |
| [2041](#L2041) | echo '<h3 class="ucp-pro-logo"><a href="' . esc\_url(self::generate\_web\_link('pro-tab-logo')) . '" target="\_blank"><img src="' . esc\_url(UCP\_PLUGIN\_URL) . 'images/ucp\_pro\_logo.png" alt="UnderConstructionPage PRO" title="UnderConstructionPage"></a></h3>'; |
| [2042](#L2042) |  |
| [2043](#L2043) | if (UCP\_license::is\_activated()) { |
| [2044](#L2044) | $plugin = plugin\_basename(\_\_FILE\_\_); |
| [2045](#L2045) | $update\_url = wp\_nonce\_url(admin\_url('update.php?action=upgrade-plugin&amp;plugin=' . urlencode($plugin)), 'upgrade-plugin\_' . $plugin); |
| [2046](#L2046) | } else { |
| [2047](#L2047) | echo '<div id="ucp-earlybird"><span>Build <b>landing pages, coming soon pages, maintenance &amp; under construction pages</b> faster &amp; easier!</span>'; |
| [2048](#L2048) | if (self::is\_promo\_active() == 'welcome') { |
| [2049](#L2049) | echo '<p class="textcenter"><a data-pro-ad="get\_pro" href="#" class="button button-primary button-large open-ucp-upsell">Get <b>PRO</b> now with a LIMITED <b>welcoming discount</b>! Offer is valid for only <b class="ucp-countdown">59min 33sec</b>.</a></p>'; |
| [2050](#L2050) | } elseif (self::is\_promo\_active() == 'olduser') { |
| [2051](#L2051) | echo '<p class="textcenter"><a data-pro-ad="get\_pro" href="#" class="button button-primary button-large open-ucp-upsell">Get <b>PRO</b> now with a special <b>DISCOUNT for long-term users</b>!</a></p>'; |
| [2052](#L2052) | } else { |
| [2053](#L2053) | echo '<p class="textcenter"><a data-pro-ad="get\_pro" href="#" class="button button-primary button-large open-ucp-upsell">Get <b>PRO</b> now!</a></p>'; |
| [2054](#L2054) | } |
| [2055](#L2055) | echo '</div>'; |
| [2056](#L2056) | } |
| [2057](#L2057) | echo '</div>'; |
| [2058](#L2058) |  |
| [2059](#L2059) |  |
| [2060](#L2060) | echo '<div class="ucp-tab-content">'; |
| [2061](#L2061) | echo '<table class="form-table">'; |
| [2062](#L2062) |  |
| [2063](#L2063) | echo '<tr valign="top"> |
| [2064](#L2064) | <th scope="row"><label for="license\_key">' . esc\_attr\_\_('License Key', 'under-construction-page') . '</label></th>'; |
| [2065](#L2065) | echo '<td><input type="text" id="license\_key" class="regular-text" name="' . esc\_attr(UCP\_OPTIONS\_KEY) . '[license\_key]" value="' . esc\_attr($options['license\_key']) . '" placeholder="12345-12345-12345-12345" />'; |
| [2066](#L2066) | echo '<p class="description">License key is located in the confirmation email you received after purchasing.<br>In case of any problems, please contact <a href="#" data-tab="4" class="change\_tab">support</a>. If you don\'t have a PRO license key - <a data-pro-ad="get\_key" href="#" class="open-ucp-upsell">get it now</a>.</p>'; |
| [2067](#L2067) | echo '<p class="description">By attempting to activate a license you agree to share the following data with <a href="https://www.webfactoryltd.com/" target="\_blank">WebFactory Ltd</a>: license key, site URL, site IP address, site title, site WP version, and UnderConstructionPage (free) version.</p>'; |
| [2068](#L2068) | echo '</td></tr>'; |
| [2069](#L2069) |  |
| [2070](#L2070) | if (!empty($options['license\_key'])) { |
| [2071](#L2071) | if (UCP\_license::is\_activated()) { |
| [2072](#L2072) | if ($options['license\_expires'] == '2035-01-01') { |
| [2073](#L2073) | $valid = 'indefinitely'; |
| [2074](#L2074) | } else { |
| [2075](#L2075) | $valid = 'until ' . date('F jS, Y', strtotime($options['license\_expires'])); |
| [2076](#L2076) | if (date('Y-m-d') == $options['license\_expires']) { |
| [2077](#L2077) | $valid .= '; expires today'; |
| [2078](#L2078) | } elseif (date('Y-m-d', time() + 30 \* DAY\_IN\_SECONDS) > $options['license\_expires']) { |
| [2079](#L2079) | $tmp = (strtotime($options['license\_expires'] . date(' G:i:s')) - time()) / DAY\_IN\_SECONDS; |
| [2080](#L2080) | $valid .= '; expires in ' . round($tmp) . ' days'; |
| [2081](#L2081) | } |
| [2082](#L2082) | } |
| [2083](#L2083) | echo '<tr> |
| [2084](#L2084) | <th scope="row"><label for="">' . esc\_attr\_\_('License Status', 'under-construction-page') . '</label></th> |
| [2085](#L2085) | <td><b style="color: #66b317;">Active</b><br> |
| [2086](#L2086) | Type: ' . esc\_attr(str\_replace('pro', 'PRO', $options['license\_type'])); |
| [2087](#L2087) | echo '<br>Valid ' . esc\_attr($valid) . '</td> |
| [2088](#L2088) | </tr>'; |
| [2089](#L2089) | } else { |
| [2090](#L2090) | echo '<tr> |
| [2091](#L2091) | <th scope="row"><label for="">' . esc\_attr\_\_('License Status', 'under-construction-page') . '</label></th> |
| [2092](#L2092) | <td><b style="color: #ea1919;">Inactive</b>'; |
| [2093](#L2093) | if (!empty($options['license\_type'])) { |
| [2094](#L2094) | echo '<br>Type: ' . esc\_attr($options['license\_type']); |
| [2095](#L2095) | } |
| [2096](#L2096) | if (!empty($options['license\_expires']) && $options['license\_expires'] != '1900-01-01' && $options['license\_expires'] != '1970-01-01') { |
| [2097](#L2097) | echo '<br>Expired on ' . esc\_attr(date('F jS, Y', strtotime($options['license\_expires']))); |
| [2098](#L2098) | } |
| [2099](#L2099) | echo '</td></tr>'; |
| [2100](#L2100) | } |
| [2101](#L2101) | } |
| [2102](#L2102) |  |
| [2103](#L2103) | echo '</table>'; |
| [2104](#L2104) | echo '</div>'; |
| [2105](#L2105) |  |
| [2106](#L2106) | echo '<p class="submit">'; |
| [2107](#L2107) | self::wp\_kses\_wf(get\_submit\_button(esc\_attr\_\_('Save &amp; Validate License Key', 'under-construction-page'), 'large secondary', 'license-submit', false)); |
| [2108](#L2108) | echo '</p>'; |
| [2109](#L2109) | } // tab\_pro |
| [2110](#L2110) |  |
| [2111](#L2111) |  |
| [2112](#L2112) | // output the whole options page |
| [2113](#L2113) | static function main\_page() |
| [2114](#L2114) | { |
| [2115](#L2115) | if (!current\_user\_can('manage\_options')) { |
| [2116](#L2116) | wp\_die('You do not have sufficient permissions to access this page.'); |
| [2117](#L2117) | } |
| [2118](#L2118) |  |
| [2119](#L2119) | echo '<div class="wrap"> |
| [2120](#L2120) | <h1 class="ucp-logo"><a href="' . esc\_url(admin\_url('options-general.php?page=ucp')) . '"><img src="' . esc\_url(UCP\_PLUGIN\_URL) . 'images/ucp\_logo.png" class="rotate" alt="UnderConstructionPage" title="UnderConstructionPage"><img src="' . esc\_url(UCP\_PLUGIN\_URL) . 'images/ucp\_logo\_2.png" class="ucp-logo-text" alt="UnderConstructionPage" title="UnderConstructionPage"></a></h1>'; |
| [2121](#L2121) |  |
| [2122](#L2122) | echo '<form action="options.php" method="post" id="ucp\_form">'; |
| [2123](#L2123) | settings\_fields(UCP\_OPTIONS\_KEY); |
| [2124](#L2124) |  |
| [2125](#L2125) | $tabs = array(); |
| [2126](#L2126) | $tabs[] = array('id' => 'ucp\_main', 'icon' => 'dashicons-admin-settings', 'class' => '', 'label' => \_\_('Main', 'under-construction-page'), 'callback' => array(\_\_CLASS\_\_, 'tab\_main')); |
| [2127](#L2127) | $tabs[] = array('id' => 'ucp\_design', 'icon' => 'dashicons-admin-customizer', 'class' => '', 'label' => esc\_attr\_\_('Design', 'under-construction-page'), 'callback' => array(\_\_CLASS\_\_, 'tab\_design')); |
| [2128](#L2128) | $tabs[] = array('id' => 'ucp\_content', 'icon' => 'dashicons-format-aside', 'class' => '', 'label' => esc\_attr\_\_('Content', 'under-construction-page'), 'callback' => array(\_\_CLASS\_\_, 'tab\_content')); |
| [2129](#L2129) | $tabs[] = array('id' => 'ucp\_access', 'icon' => 'dashicons-shield', 'class' => '', 'label' => esc\_attr\_\_('Access', 'under-construction-page'), 'callback' => array(\_\_CLASS\_\_, 'tab\_access')); |
| [2130](#L2130) | $tabs[] = array('id' => 'ucp\_support', 'icon' => 'dashicons-sos', 'class' => '', 'label' => esc\_attr\_\_('Support', 'under-construction-page'), 'callback' => array(\_\_CLASS\_\_, 'tab\_support')); |
| [2131](#L2131) | $tabs[] = array('id' => 'ucp\_pro', 'icon' => 'dashicons-star-filled', 'class' => '', 'label' => esc\_attr\_\_('PRO', 'under-construction-page'), 'callback' => array(\_\_CLASS\_\_, 'tab\_pro')); |
| [2132](#L2132) |  |
| [2133](#L2133) | $tabs = apply\_filters('ucp\_tabs', $tabs); |
| [2134](#L2134) |  |
| [2135](#L2135) | echo '<div id="ucp\_tabs" class="ui-tabs" style="display: none;">'; |
| [2136](#L2136) | echo '<ul class="ucp-main-tab">'; |
| [2137](#L2137) | foreach ($tabs as $tab) { |
| [2138](#L2138) | if (!empty($tab['label'])) { |
| [2139](#L2139) | echo '<li><a href="#' . esc\_attr($tab['id']) . '" class="' . esc\_attr($tab['class']) . '"><span class="icon"><span class="dashicons ' . esc\_attr($tab['icon']) . '"></span></span><span class="label">' . esc\_attr($tab['label']) . '</span></a></li>'; |
| [2140](#L2140) | } |
| [2141](#L2141) | } |
| [2142](#L2142) | echo '</ul>'; |
| [2143](#L2143) |  |
| [2144](#L2144) | foreach ($tabs as $tab) { |
| [2145](#L2145) | if (is\_callable($tab['callback'])) { |
| [2146](#L2146) | echo '<div style="display: none;" id="' . esc\_attr($tab['id']) . '">'; |
| [2147](#L2147) | call\_user\_func($tab['callback']); |
| [2148](#L2148) | echo '</div>'; |
| [2149](#L2149) | } |
| [2150](#L2150) | } // foreach |
| [2151](#L2151) | echo '</div>'; // ucp\_tabs |
| [2152](#L2152) |  |
| [2153](#L2153) | echo '</form>'; // ucp\_tabs |
| [2154](#L2154) |  |
| [2155](#L2155) | echo '<div id="ucp-sidebar-ads">'; |
| [2156](#L2156) | echo '<div id="ucp-ad">'; |
| [2157](#L2157) | echo '<h3 class="textcenter">Upgrade to build landing pages, coming soon pages, maintenance &amp; under construction pages faster &amp; easier!</h3>'; |
| [2158](#L2158) | echo '<p class="textcenter"><a href="#" class="textcenter open-ucp-upsell" data-pro-ad="sidebar-logo"><img style="max-width: 90%;" src="' . esc\_url(UCP\_PLUGIN\_URL) . '/images/ucp\_pro\_logo.png" alt="UnderConstructionPage PRO" title="UnderConstructionPage PRO"></a></p>'; |
| [2159](#L2159) | echo '<ul class="plain-list"> |
| [2160](#L2160) | <li>350+ templates</li> |
| [2161](#L2161) | <li>5+ million searchable HD images</li> |
| [2162](#L2162) | <li>Drag &amp; drop builder</li> |
| [2163](#L2163) | <li>Email autoresponders integration</li> |
| [2164](#L2164) | <li>Affiliate &amp; traffic tracking</li> |
| [2165](#L2165) | <li>White-label Mode</li> |
| [2166](#L2166) | <li>Friendly email support from plugin developers</li> |
| [2167](#L2167) | </ul>'; |
| [2168](#L2168) | echo '<p class="textcenter"><a href="#" class="button button-primary button-large open-ucp-upsell" data-pro-ad="sidebar-button">Get PRO Now</a></p>'; |
| [2169](#L2169) | echo '</div>'; |
| [2170](#L2170) |  |
| [2171](#L2171) | if (!defined('WPFSSL\_OPTIONS\_KEY')) { |
| [2172](#L2172) | echo '<div id="wpfssl-ad">'; |
| [2173](#L2173) | echo '<h3 class="textcenter"><b>Problems with SSL certificate?<br>Moving a site from HTTP to HTTPS?<br>Mixed content giving you troubles?</b><br><br><u>Fix all SSL problems with one plugin!</u></h3>'; |
| [2174](#L2174) | echo '<p class="textcenter"><a href="#" class="textcenter install-wpfssl"><img style="max-width: 90%;" src="' . esc\_url(UCP\_PLUGIN\_URL) . '/images/wp-force-ssl-logo.png" alt="WP Force SSL" title="WP Force SSL"></a></p>'; |
| [2175](#L2175) | echo '<p class="textcenter"><br><a href="#" class="install-wpfssl button button-primary">Install &amp; activate the free WP Force SSL plugin</a></p><p><a href="https://wordpress.org/plugins/wp-force-ssl/" target="\_blank">WP Force SSL</a> is a free WP plugin maintained by the same team as this Maintenance plugin. It has <b>+150,000 users, 5-star rating</b>, and is hosted on the official WP repository.</p>'; |
| [2176](#L2176) | echo '</div>'; |
| [2177](#L2177) | } |
| [2178](#L2178) | echo '</div>'; |
| [2179](#L2179) | echo '</div>'; // wrap |
| [2180](#L2180) |  |
| [2181](#L2181) | // weglot install dialog |
| [2182](#L2182) | echo '<div id="weglot-upsell-dialog" style="display: none;" title="Weglot"><span class="ui-helper-hidden-accessible"><input type="text"/></span>'; |
| [2183](#L2183) | echo '<div style="padding: 20px; font-size: 15px;">'; |
| [2184](#L2184) | echo '<ul class="ucp-list">'; |
| [2185](#L2185) | echo '<li>Best-rated WordPress multilingual plugin</li>'; |
| [2186](#L2186) | echo '<li>Simple 5-minute set-up. No coding required</li>'; |
| [2187](#L2187) | echo '<li>Accelerated translation management: Machine & human translations with access to professional translators</li>'; |
| [2188](#L2188) | echo '<li>Compatible with any WordPress theme or plugin</li>'; |
| [2189](#L2189) | echo '<li>Optimized for multilingual SEO</li>'; |
| [2190](#L2190) | echo '<li>10-day Free trial and free plan available</li>'; |
| [2191](#L2191) | echo '</ul>'; |
| [2192](#L2192) | echo '<p class="upsell-footer"><a class="button button-primary" id="install-weglot">Install &amp; activate Weglot to make your website multilingual</a></p>'; |
| [2193](#L2193) | echo '</div>'; |
| [2194](#L2194) | echo '</div>'; |
| [2195](#L2195) | // weglot install dialog |
| [2196](#L2196) |  |
| [2197](#L2197) | $promo = self::is\_promo\_active(); |
| [2198](#L2198) | if ($promo == 'welcome') { |
| [2199](#L2199) | $header = 'A <b>welcoming discount</b> has been applied to selected packages! It\'s <b>time limited</b> and available for only another <b class="ucp-countdown">59min 30sec</b>.'; |
| [2200](#L2200) | } elseif ($promo == 'olduser') { |
| [2201](#L2201) | $header = 'A special <b>discount for long-term users</b> has been applied to selected packages!'; |
| [2202](#L2202) | } else { |
| [2203](#L2203) | $header = ''; |
| [2204](#L2204) | } |
| [2205](#L2205) |  |
| [2206](#L2206) | $products['agency'] = array('link' => self::generate\_web\_link('pricing-table', 'buy2/', array('product' => 'agency-welcome')), 'price' => 'BUY NOW <u>$51 OFF</u><br><del>$250</del> $199<br><small>Discount ends in <b class="ucp-countdown">59min 30sec</b></small>'); |
| [2207](#L2207) | $products['team'] = array('link' => self::generate\_web\_link('pricing-table', 'buy2/', array('product' => 'team-welcome')), 'price' => 'BUY NOW <u>$30 OFF</u><br><del>$119</del> $89<br><small>Discount ends in <b class="ucp-countdown">59min 30sec</b></small>'); |
| [2208](#L2208) | $products['personal-monthly'] = array('link' => self::generate\_web\_link('pricing-table', 'buy2/', array('product' => 'personal-monthly')), 'price' => 'only $8.99<small>/month</small>'); |
| [2209](#L2209) | $products['personal-yearly'] = array('link' => self::generate\_web\_link('pricing-table', 'buy2/', array('product' => 'personal-yearly')), 'price' => 'BUY NOW<br>$49<small>/year</small>'); |
| [2210](#L2210) |  |
| [2211](#L2211) | // upsell dialog |
| [2212](#L2212) | echo '<div id="upsell-dialog" style="display: none;" title="UnderConstructionPage PRO"><span class="ui-helper-hidden-accessible"><input type="text"/></span>'; |
| [2213](#L2213) | echo '<div id="tabs\_upsell" class="ui-tabs ucp-tabs-2nd-level">'; |
| [2214](#L2214) | echo '<ul>'; |
| [2215](#L2215) | echo '<li><a href="#tab-upsell-buy">' . esc\_attr\_\_('Get PRO', 'under-construction-page') . '</a></li>'; |
| [2216](#L2216) | echo '<li><a href="#tab-upsell-features">' . esc\_attr\_\_('Features', 'under-construction-page') . '</a></li>'; |
| [2217](#L2217) | echo '</ul>'; |
| [2218](#L2218) |  |
| [2219](#L2219) | echo '<div class="upsell-tab" id="tab-upsell-features" style="display: none;">'; |
| [2220](#L2220) | echo '<div class="ucp-pro-feature">'; |
| [2221](#L2221) | echo '<span>Frictionless Drag &amp; Drop Builder</span>'; |
| [2222](#L2222) | echo '<p>Forget about complicated, cumbersome builders that have too many options! UCP builder was purpose-built for the task at hand. Simple, user-friendly &amp; has only the options you need to build pages fast!</p>'; |
| [2223](#L2223) | echo '</div>'; |
| [2224](#L2224) |  |
| [2225](#L2225) | echo '<div class="ucp-pro-feature">'; |
| [2226](#L2226) | echo '<span>5+ Million HD Searchable Images</span>'; |
| [2227](#L2227) | echo '<p>There\'s nothing worse than googling for hours just to find that the perfect image you need is either copyrighted or too small. Enjoy a vast library of 4K+ sized images - categorized &amp; copyright free!</p>'; |
| [2228](#L2228) | echo '</div>'; |
| [2229](#L2229) |  |
| [2230](#L2230) | echo '<div class="ucp-pro-feature">'; |
| [2231](#L2231) | echo '<span>350+ Templates</span>'; |
| [2232](#L2232) | echo '<p>Building your own page from scratch is fun, but often you don\'t have time to do it! Use one of our purpose-built templates, change a few lines of text and you\'re ready to rock!</p>'; |
| [2233](#L2233) | echo '</div>'; |
| [2234](#L2234) |  |
| [2235](#L2235) | echo '<div class="ucp-pro-feature">'; |
| [2236](#L2236) | echo '<span>Affiliate & Traffic Tracking</span>'; |
| [2237](#L2237) | echo '<p>Having traffic is nice. Having targeted traffic is better! Generate tracked inbound links &amp; share them on social media or with your affiliates to pinpoint the best traffic sources.</p>'; |
| [2238](#L2238) | echo '</div>'; |
| [2239](#L2239) |  |
| [2240](#L2240) | echo '<div class="ucp-pro-feature">'; |
| [2241](#L2241) | echo '<span>Unlimited 3rd Party Integrations</span>'; |
| [2242](#L2242) | echo '<p>With our unique universal autoresponder support, you can integrate any email autoresponder or webinar system in a page within seconds. Or push data to Zapier to more than 1,000 applications.</p>'; |
| [2243](#L2243) | echo '</div>'; |
| [2244](#L2244) |  |
| [2245](#L2245) | echo '<div class="ucp-pro-feature">'; |
| [2246](#L2246) | echo '<span>Made for Agencies &amp; Webmasters</span>'; |
| [2247](#L2247) | echo '<p>Creating sites for others? We have your back! Our features, support &amp; licensing options are optimised for agencies while in-house, USA based support guarantee your peace of mind.</p>'; |
| [2248](#L2248) | echo '</div>'; |
| [2249](#L2249) |  |
| [2250](#L2250) | echo '<p class="upsell-footer">For a complete list of features, demos and screenshots visit <a href="' . esc\_url(self::generate\_web\_link('features-more-info')) . '" target="\_blank">underconstructionpage.com</a>. Already have a PRO license? <a href="#" class="go-to-license-key">Activate it</a>.</p>'; |
| [2251](#L2251) |  |
| [2252](#L2252) | echo '</div>'; // features tab |
| [2253](#L2253) | echo '<div class="upsell-tab" id="tab-upsell-buy" style="display: none;">'; |
| [2254](#L2254) | if (!empty($header)) { |
| [2255](#L2255) | echo '<div class="upsell-header">'; |
| [2256](#L2256) | self::wp\_kses\_wf($header); |
| [2257](#L2257) | echo '</div>'; |
| [2258](#L2258) | } |
| [2259](#L2259) | echo '<table id="ucp-pricing-table"> |
| [2260](#L2260) | <tbody> |
| [2261](#L2261) | <tr> |
| [2262](#L2262) | <td> |
| [2263](#L2263) | <h3>Lifetime<br>Agency License</h3> |
| [2264](#L2264) | </td> |
| [2265](#L2265) | <td> |
| [2266](#L2266) | <h3>Lifetime<br>Team License</h3> |
| [2267](#L2267) | </td> |
| [2268](#L2268) | <td> |
| [2269](#L2269) | <h3>Personal<br>License</h3> |
| [2270](#L2270) | </td> |
| [2271](#L2271) | </tr> |
| [2272](#L2272) | <tr> |
| [2273](#L2273) | <td>One Time Payment</td> |
| [2274](#L2274) | <td>One Time Payment</td> |
| [2275](#L2275) | <td>Yearly / Monthly Payment</td> |
| [2276](#L2276) | </tr> |
| [2277](#L2277) | <tr> |
| [2278](#L2278) | <td>100 Client or Personal Sites<br>(licenses are transferable between sites)</td> |
| [2279](#L2279) | <td>5 Personal or Client Sites</td> |
| [2280](#L2280) | <td>3 Personal Sites</td> |
| [2281](#L2281) | </tr> |
| [2282](#L2282) | <tr> |
| [2283](#L2283) | <td>White-Label License Mode</td> |
| [2284](#L2284) | <td><span class="dashicons dashicons-no"></td> |
| [2285](#L2285) | <td><span class="dashicons dashicons-no"></td> |
| [2286](#L2286) | </tr> |
| [2287](#L2287) | <tr> |
| [2288](#L2288) | <td>Lifetime Priority Support &amp; Updates</td> |
| [2289](#L2289) | <td>Lifetime Support &amp; Updates</td> |
| [2290](#L2290) | <td>1 Year/Month of Support &amp; Updates</td> |
| [2291](#L2291) | </tr> |
| [2292](#L2292) | <tr style="display: none;"> |
| [2293](#L2293) | <td>5 Million+ Hi-Res Images</td> |
| [2294](#L2294) | <td>5 Million+ Hi-Res Images</td> |
| [2295](#L2295) | <td>5 Million+ Hi-Res Images</td> |
| [2296](#L2296) | </tr> |
| [2297](#L2297) | <tr> |
| [2298](#L2298) | <td>Drag &amp; Drop Builder</td> |
| [2299](#L2299) | <td>Drag &amp; Drop Builder</td> |
| [2300](#L2300) | <td>Drag &amp; Drop Builder</td> |
| [2301](#L2301) | </tr> |
| [2302](#L2302) | <tr> |
| [2303](#L2303) | <td>150+ PRO Templates</td> |
| [2304](#L2304) | <td>150+ PRO Templates</td> |
| [2305](#L2305) | <td>150+ PRO Templates</td> |
| [2306](#L2306) | </tr> |
| [2307](#L2307) | <tr> |
| [2308](#L2308) | <td>150+ Agency Templates</td> |
| [2309](#L2309) | <td>150+ Agency Templates</td> |
| [2310](#L2310) | <td><span class="dashicons dashicons-no"></td> |
| [2311](#L2311) | </tr> |
| [2312](#L2312) | <tr> |
| [2313](#L2313) | <td>Zapier Integration + Extra Modules</td> |
| [2314](#L2314) | <td><span class="dashicons dashicons-no"></td> |
| [2315](#L2315) | <td><span class="dashicons dashicons-no"></td> |
| [2316](#L2316) | </tr> |
| [2317](#L2317) | <tr class="bb0"> |
| [2318](#L2318) | <td> |
| [2319](#L2319) | <a data-href-org="' . esc\_url($products['agency']['link']) . '" class="promo-button go-to-license-key" href="' . esc\_url($products['agency']['link']) . '" target="\_blank">'; |
| [2320](#L2320) | self::wp\_kses\_wf($products['agency']['price']); |
| [2321](#L2321) | echo '</a> |
| [2322](#L2322) | </td> |
| [2323](#L2323) | <td> |
| [2324](#L2324) | <a data-href-org="' . esc\_url($products['team']['link']) . '" class="promo-button go-to-license-key" href="' . esc\_url($products['team']['link']) . '" target="\_blank">'; |
| [2325](#L2325) | self::wp\_kses\_wf($products['team']['price']); |
| [2326](#L2326) | echo '</a> |
| [2327](#L2327) | </td> |
| [2328](#L2328) | <td> |
| [2329](#L2329) | <a style="margin-bottom: 8px;" data-href-org="' . esc\_url($products['personal-yearly']['link']) . '" class="promo-button go-to-license-key" href="' . esc\_url($products['personal-yearly']['link']) . '" target="\_blank">'; |
| [2330](#L2330) | self::wp\_kses\_wf($products['personal-yearly']['price']); |
| [2331](#L2331) | echo '</a>or <a target="\_blank" class="go-to-license-key promo-link" data-href-org="' . esc\_url($products['personal-monthly']['link']) . '" href="' . esc\_url($products['personal-monthly']['link']) . '">'; |
| [2332](#L2332) | self::wp\_kses\_wf($products['personal-monthly']['price']); |
| [2333](#L2333) | echo '</a> |
| [2334](#L2334) | </td> |
| [2335](#L2335) | </tr> |
| [2336](#L2336) | <tr class="bb0"> |
| [2337](#L2337) | <td colspan="3"><span class="instant-download"><span class="dashicons dashicons-yes"></span> Secure payment via Paddle <span class="dashicons dashicons-yes"></span> Instant activation from WP admin <span class="dashicons dashicons-yes"></span> 100% No-Risk 7 Day Money Back Guarantee</span></td> |
| [2338](#L2338) | </tr> |
| [2339](#L2339) | </tbody> |
| [2340](#L2340) | </table>'; |
| [2341](#L2341) | echo '<p class="upsell-footer">More pricing options &amp; details about packages are available on <a href="' . esc\_url(self::generate\_web\_link('pricing-table-more-info')) . '" target="\_blank">underconstructionpage.com</a>. Already have a PRO license? <a href="#" class="go-to-license-key">Activate it</a>.</p>'; |
| [2342](#L2342) | echo '</div>'; // pricing tab |
| [2343](#L2343) | echo '</div>'; |
| [2344](#L2344) |  |
| [2345](#L2345) | echo '</div>'; // upsell-dialog |
| [2346](#L2346) | } // main\_page |
| [2347](#L2347) |  |
| [2348](#L2348) |  |
| [2349](#L2349) | // tests if any of the promotions are active and if so returns the name |
| [2350](#L2350) | static function is\_promo\_active() |
| [2351](#L2351) | { |
| [2352](#L2352) | $meta = self::get\_meta(); |
| [2353](#L2353) |  |
| [2354](#L2354) | if ((time() - $meta['first\_install']) < HOUR\_IN\_SECONDS) { |
| [2355](#L2355) | return 'welcome'; |
| [2356](#L2356) | } |
| [2357](#L2357) |  |
| [2358](#L2358) | if ((time() - $meta['first\_install']) > DAY\_IN\_SECONDS \* 35) { |
| [2359](#L2359) | return 'olduser'; |
| [2360](#L2360) | } |
| [2361](#L2361) |  |
| [2362](#L2362) | return false; |
| [2363](#L2363) | } // is\_promo\_active |
| [2364](#L2364) |  |
| [2365](#L2365) |  |
| [2366](#L2366) | // save and preview buttons |
| [2367](#L2367) | static function footer\_buttons() |
| [2368](#L2368) | { |
| [2369](#L2369) | echo '<p class="submit">'; |
| [2370](#L2370) | self::wp\_kses\_wf(get\_submit\_button(esc\_attr\_\_('Save Changes', 'under-construction-page'), 'primary large', 'submit', false)); |
| [2371](#L2371) | echo ' &nbsp; &nbsp; <a id="ucp\_preview" href="' . esc\_url(get\_home\_url()) . '/?ucp\_preview" class="button button-large button-secondary" target="\_blank">' . esc\_attr\_\_('Preview', 'under-construction-page') . '</a>'; |
| [2372](#L2372) | echo '</p>'; |
| [2373](#L2373) | } // footer\_buttons |
| [2374](#L2374) |  |
| [2375](#L2375) |  |
| [2376](#L2376) | // reset all pointers to default state - visible |
| [2377](#L2377) | static function reset\_pointers() |
| [2378](#L2378) | { |
| [2379](#L2379) | $pointers = array(); |
| [2380](#L2380) |  |
| [2381](#L2381) | $pointers['welcome'] = array('target' => '#menu-settings', 'edge' => 'left', 'align' => 'right', 'content' => 'Thank you for installing the <b style="font-weight: 800; font-variant: small-caps;">UnderConstructionPage</b> plugin! Please open <a href="' . admin\_url('options-general.php?page=ucp') . '">Settings - UnderConstruction</a> to create a beautiful under construction page.'); |
| [2382](#L2382) | $pointers['getting\_started'] = array('target' => '.ucp-main-tab li:nth-child(2)', 'edge' => 'top', 'align' => 'left', 'content' => 'Watch the short <a href="https://www.youtube.com/watch?v=RN4XABhK7\_w" target="\_blank">getting started video</a> to get you up to speed with UCP in no time. If that doesn\'t answer your questions watch the longer <a href="https://www.youtube.com/watch?v=K3DF-NP6Fog" target="\_blank">in-depth video walktrough</a>.<br>If you need the videos later, links are in the <a href="#" class="change\_tab" data-tab="4">FAQ</a>.'); |
| [2383](#L2383) |  |
| [2384](#L2384) | update\_option(UCP\_POINTERS\_KEY, $pointers); |
| [2385](#L2385) | } // reset\_pointers |
| [2386](#L2386) |  |
| [2387](#L2387) |  |
| [2388](#L2388) | // auto download / install / activate Weglot plugin |
| [2389](#L2389) | static function install\_weglot() |
| [2390](#L2390) | { |
| [2391](#L2391) | if (false === current\_user\_can('administrator')) { |
| [2392](#L2392) | wp\_die('Sorry, you have to be an admin to run this action.'); |
| [2393](#L2393) | } |
| [2394](#L2394) |  |
| [2395](#L2395) | $plugin\_slug = 'weglot/weglot.php'; |
| [2396](#L2396) | $plugin\_zip = 'https://downloads.wordpress.org/plugin/weglot.latest-stable.zip'; |
| [2397](#L2397) |  |
| [2398](#L2398) | @include\_once ABSPATH . 'wp-admin/includes/plugin.php'; |
| [2399](#L2399) | @include\_once ABSPATH . 'wp-admin/includes/class-wp-upgrader.php'; |
| [2400](#L2400) | @include\_once ABSPATH . 'wp-admin/includes/plugin-install.php'; |
| [2401](#L2401) | @include\_once ABSPATH . 'wp-admin/includes/file.php'; |
| [2402](#L2402) | @include\_once ABSPATH . 'wp-admin/includes/misc.php'; |
| [2403](#L2403) | echo '<style> |
| [2404](#L2404) | body{ |
| [2405](#L2405) | font-family: sans-serif; |
| [2406](#L2406) | font-size: 14px; |
| [2407](#L2407) | line-height: 1.5; |
| [2408](#L2408) | color: #444; |
| [2409](#L2409) | } |
| [2410](#L2410) | </style>'; |
| [2411](#L2411) |  |
| [2412](#L2412) | echo '<div style="margin: 20px; color:#444;">'; |
| [2413](#L2413) | echo 'If things are not done in a minute <a target="\_parent" href="' . admin\_url('plugin-install.php?s=weglot&tab=search&type=term') . '">install the plugin manually via Plugins page</a><br><br>'; |
| [2414](#L2414) | echo 'Starting ...<br><br>'; |
| [2415](#L2415) |  |
| [2416](#L2416) | wp\_cache\_flush(); |
| [2417](#L2417) | $upgrader = new Plugin\_Upgrader(); |
| [2418](#L2418) | echo 'Check if Weglot is already installed ... <br />'; |
| [2419](#L2419) | if (self::is\_plugin\_installed($plugin\_slug)) { |
| [2420](#L2420) | echo 'Weglot is already installed! <br /><br />Making sure it\'s the latest version.<br />'; |
| [2421](#L2421) | $upgrader->upgrade($plugin\_slug); |
| [2422](#L2422) | $installed = true; |
| [2423](#L2423) | } else { |
| [2424](#L2424) | echo 'Installing Weglot.<br />'; |
| [2425](#L2425) | $installed = $upgrader->install($plugin\_zip); |
| [2426](#L2426) | } |
| [2427](#L2427) | wp\_cache\_flush(); |
| [2428](#L2428) |  |
| [2429](#L2429) | if (!is\_wp\_error($installed) && $installed) { |
| [2430](#L2430) | echo 'Activating Weglot.<br />'; |
| [2431](#L2431) | $activate = activate\_plugin($plugin\_slug); |
| [2432](#L2432) |  |
| [2433](#L2433) | if (is\_null($activate)) { |
| [2434](#L2434) | echo 'Weglot Activated.<br />'; |
| [2435](#L2435) |  |
| [2436](#L2436) | echo '<script>setTimeout(function() { top.location = "options-general.php?page=ucp"; }, 1000);</script>'; |
| [2437](#L2437) | echo '<br>If you are not redirected in a few seconds - <a href="options-general.php?page=ucp" target="\_parent">click here</a>.'; |
| [2438](#L2438) | } |
| [2439](#L2439) | } else { |
| [2440](#L2440) | echo 'Could not install Weglot. You\'ll have to <a target="\_parent" href="' . admin\_url('plugin-install.php?s=weglot&tab=search&type=term') . '">download and install manually</a>.'; |
| [2441](#L2441) | } |
| [2442](#L2442) |  |
| [2443](#L2443) | echo '</div>'; |
| [2444](#L2444) | } // install\_weglot |
| [2445](#L2445) |  |
| [2446](#L2446) |  |
| [2447](#L2447) | // auto download / install / activate WP Force SSL plugin |
| [2448](#L2448) | static function install\_wpfssl() |
| [2449](#L2449) | { |
| [2450](#L2450) | check\_ajax\_referer('install\_wpfssl'); |
| [2451](#L2451) |  |
| [2452](#L2452) | if (false === current\_user\_can('administrator')) { |
| [2453](#L2453) | wp\_die('Sorry, you have to be an admin to run this action.'); |
| [2454](#L2454) | } |
| [2455](#L2455) |  |
| [2456](#L2456) | $plugin\_slug = 'wp-force-ssl/wp-force-ssl.php'; |
| [2457](#L2457) | $plugin\_zip = 'https://downloads.wordpress.org/plugin/wp-force-ssl.latest-stable.zip'; |
| [2458](#L2458) |  |
| [2459](#L2459) | @include\_once ABSPATH . 'wp-admin/includes/plugin.php'; |
| [2460](#L2460) | @include\_once ABSPATH . 'wp-admin/includes/class-wp-upgrader.php'; |
| [2461](#L2461) | @include\_once ABSPATH . 'wp-admin/includes/plugin-install.php'; |
| [2462](#L2462) | @include\_once ABSPATH . 'wp-admin/includes/file.php'; |
| [2463](#L2463) | @include\_once ABSPATH . 'wp-admin/includes/misc.php'; |
| [2464](#L2464) | echo '<style> |
| [2465](#L2465) | body{ |
| [2466](#L2466) | font-family: sans-serif; |
| [2467](#L2467) | font-size: 14px; |
| [2468](#L2468) | line-height: 1.5; |
| [2469](#L2469) | color: #444; |
| [2470](#L2470) | } |
| [2471](#L2471) | </style>'; |
| [2472](#L2472) |  |
| [2473](#L2473) | echo '<div style="margin: 20px; color:#444;">'; |
| [2474](#L2474) | echo 'If things are not done in a minute <a target="\_parent" href="' . admin\_url('plugin-install.php?s=force%20ssl%20webfactory&tab=search&type=term') . '">install the plugin manually via Plugins page</a><br><br>'; |
| [2475](#L2475) | echo 'Starting ...<br><br>'; |
| [2476](#L2476) |  |
| [2477](#L2477) | wp\_cache\_flush(); |
| [2478](#L2478) | $upgrader = new Plugin\_Upgrader(); |
| [2479](#L2479) | echo 'Check if WP Force SSL is already installed ... <br />'; |
| [2480](#L2480) | if (self::is\_plugin\_installed($plugin\_slug)) { |
| [2481](#L2481) | echo 'WP Force SSL is already installed! <br /><br />Making sure it\'s the latest version.<br />'; |
| [2482](#L2482) | $upgrader->upgrade($plugin\_slug); |
| [2483](#L2483) | $installed = true; |
| [2484](#L2484) | } else { |
| [2485](#L2485) | echo 'Installing WP Force SSL.<br />'; |
| [2486](#L2486) | $installed = $upgrader->install($plugin\_zip); |
| [2487](#L2487) | } |
| [2488](#L2488) | wp\_cache\_flush(); |
| [2489](#L2489) |  |
| [2490](#L2490) | if (!is\_wp\_error($installed) && $installed) { |
| [2491](#L2491) | echo 'Activating WP Force SSL.<br />'; |
| [2492](#L2492) | $activate = activate\_plugin($plugin\_slug); |
| [2493](#L2493) |  |
| [2494](#L2494) | if (is\_null($activate)) { |
| [2495](#L2495) | echo 'WP Force SSL Activated.<br />'; |
| [2496](#L2496) |  |
| [2497](#L2497) | echo '<script>setTimeout(function() { top.location = "options-general.php?page=ucp"; }, 1000);</script>'; |
| [2498](#L2498) | echo '<br>If you are not redirected in a few seconds - <a href="options-general.php?page=ucp" target="\_parent">click here</a>.'; |
| [2499](#L2499) | } |
| [2500](#L2500) | } else { |
| [2501](#L2501) | echo 'Could not install WP Force SSL. You\'ll have to <a target="\_parent" href="' . admin\_url('plugin-install.php?s=force%20ssl%20webfactory&tab=search&type=term') . '">download and install manually</a>.'; |
| [2502](#L2502) | } |
| [2503](#L2503) |  |
| [2504](#L2504) | echo '</div>'; |
| [2505](#L2505) | } // install\_wpfssl |
| [2506](#L2506) |  |
| [2507](#L2507) | static function wp\_kses\_wf($html) |
| [2508](#L2508) | { |
| [2509](#L2509) | add\_filter('safe\_style\_css', function ($styles) { |
| [2510](#L2510) | $styles\_wf = array( |
| [2511](#L2511) | 'text-align', |
| [2512](#L2512) | 'margin', |
| [2513](#L2513) | 'color', |
| [2514](#L2514) | 'float', |
| [2515](#L2515) | 'border', |
| [2516](#L2516) | 'background', |
| [2517](#L2517) | 'background-color', |
| [2518](#L2518) | 'border-bottom', |
| [2519](#L2519) | 'border-bottom-color', |
| [2520](#L2520) | 'border-bottom-style', |
| [2521](#L2521) | 'border-bottom-width', |
| [2522](#L2522) | 'border-collapse', |
| [2523](#L2523) | 'border-color', |
| [2524](#L2524) | 'border-left', |
| [2525](#L2525) | 'border-left-color', |
| [2526](#L2526) | 'border-left-style', |
| [2527](#L2527) | 'border-left-width', |
| [2528](#L2528) | 'border-right', |
| [2529](#L2529) | 'border-right-color', |
| [2530](#L2530) | 'border-right-style', |
| [2531](#L2531) | 'border-right-width', |
| [2532](#L2532) | 'border-spacing', |
| [2533](#L2533) | 'border-style', |
| [2534](#L2534) | 'border-top', |
| [2535](#L2535) | 'border-top-color', |
| [2536](#L2536) | 'border-top-style', |
| [2537](#L2537) | 'border-top-width', |
| [2538](#L2538) | 'border-width', |
| [2539](#L2539) | 'caption-side', |
| [2540](#L2540) | 'clear', |
| [2541](#L2541) | 'cursor', |
| [2542](#L2542) | 'direction', |
| [2543](#L2543) | 'font', |
| [2544](#L2544) | 'font-family', |
| [2545](#L2545) | 'font-size', |
| [2546](#L2546) | 'font-style', |
| [2547](#L2547) | 'font-variant', |
| [2548](#L2548) | 'font-weight', |
| [2549](#L2549) | 'height', |
| [2550](#L2550) | 'letter-spacing', |
| [2551](#L2551) | 'line-height', |
| [2552](#L2552) | 'margin-bottom', |
| [2553](#L2553) | 'margin-left', |
| [2554](#L2554) | 'margin-right', |
| [2555](#L2555) | 'margin-top', |
| [2556](#L2556) | 'overflow', |
| [2557](#L2557) | 'padding', |
| [2558](#L2558) | 'padding-bottom', |
| [2559](#L2559) | 'padding-left', |
| [2560](#L2560) | 'padding-right', |
| [2561](#L2561) | 'padding-top', |
| [2562](#L2562) | 'text-decoration', |
| [2563](#L2563) | 'text-indent', |
| [2564](#L2564) | 'vertical-align', |
| [2565](#L2565) | 'width', |
| [2566](#L2566) | 'display', |
| [2567](#L2567) | ); |
| [2568](#L2568) |  |
| [2569](#L2569) | foreach ($styles\_wf as $style\_wf) { |
| [2570](#L2570) | $styles[] = $style\_wf; |
| [2571](#L2571) | } |
| [2572](#L2572) | return $styles; |
| [2573](#L2573) | }); |
| [2574](#L2574) |  |
| [2575](#L2575) | $allowed\_tags = wp\_kses\_allowed\_html('post'); |
| [2576](#L2576) | $allowed\_tags['input'] = array( |
| [2577](#L2577) | 'type' => true, |
| [2578](#L2578) | 'style' => true, |
| [2579](#L2579) | 'class' => true, |
| [2580](#L2580) | 'id' => true, |
| [2581](#L2581) | 'checked' => true, |
| [2582](#L2582) | 'disabled' => true, |
| [2583](#L2583) | 'name' => true, |
| [2584](#L2584) | 'size' => true, |
| [2585](#L2585) | 'placeholder' => true, |
| [2586](#L2586) | 'value' => true, |
| [2587](#L2587) | 'data-\*' => true, |
| [2588](#L2588) | 'size' => true, |
| [2589](#L2589) | 'disabled' => true |
| [2590](#L2590) | ); |
| [2591](#L2591) |  |
| [2592](#L2592) | $allowed\_tags['textarea'] = array( |
| [2593](#L2593) | 'type' => true, |
| [2594](#L2594) | 'style' => true, |
| [2595](#L2595) | 'class' => true, |
| [2596](#L2596) | 'id' => true, |
| [2597](#L2597) | 'checked' => true, |
| [2598](#L2598) | 'disabled' => true, |
| [2599](#L2599) | 'name' => true, |
| [2600](#L2600) | 'size' => true, |
| [2601](#L2601) | 'placeholder' => true, |
| [2602](#L2602) | 'value' => true, |
| [2603](#L2603) | 'data-\*' => true, |
| [2604](#L2604) | 'cols' => true, |
| [2605](#L2605) | 'rows' => true, |
| [2606](#L2606) | 'disabled' => true, |
| [2607](#L2607) | 'autocomplete' => true |
| [2608](#L2608) | ); |
| [2609](#L2609) |  |
| [2610](#L2610) | $allowed\_tags['select'] = array( |
| [2611](#L2611) | 'type' => true, |
| [2612](#L2612) | 'style' => true, |
| [2613](#L2613) | 'class' => true, |
| [2614](#L2614) | 'id' => true, |
| [2615](#L2615) | 'checked' => true, |
| [2616](#L2616) | 'disabled' => true, |
| [2617](#L2617) | 'name' => true, |
| [2618](#L2618) | 'size' => true, |
| [2619](#L2619) | 'placeholder' => true, |
| [2620](#L2620) | 'value' => true, |
| [2621](#L2621) | 'data-\*' => true, |
| [2622](#L2622) | 'multiple' => true, |
| [2623](#L2623) | 'disabled' => true |
| [2624](#L2624) | ); |
| [2625](#L2625) |  |
| [2626](#L2626) | $allowed\_tags['option'] = array( |
| [2627](#L2627) | 'type' => true, |
| [2628](#L2628) | 'style' => true, |
| [2629](#L2629) | 'class' => true, |
| [2630](#L2630) | 'id' => true, |
| [2631](#L2631) | 'checked' => true, |
| [2632](#L2632) | 'disabled' => true, |
| [2633](#L2633) | 'name' => true, |
| [2634](#L2634) | 'size' => true, |
| [2635](#L2635) | 'placeholder' => true, |
| [2636](#L2636) | 'value' => true, |
| [2637](#L2637) | 'selected' => true, |
| [2638](#L2638) | 'data-\*' => true |
| [2639](#L2639) | ); |
| [2640](#L2640) | $allowed\_tags['optgroup'] = array( |
| [2641](#L2641) | 'type' => true, |
| [2642](#L2642) | 'style' => true, |
| [2643](#L2643) | 'class' => true, |
| [2644](#L2644) | 'id' => true, |
| [2645](#L2645) | 'checked' => true, |
| [2646](#L2646) | 'disabled' => true, |
| [2647](#L2647) | 'name' => true, |
| [2648](#L2648) | 'size' => true, |
| [2649](#L2649) | 'placeholder' => true, |
| [2650](#L2650) | 'value' => true, |
| [2651](#L2651) | 'selected' => true, |
| [2652](#L2652) | 'data-\*' => true, |
| [2653](#L2653) | 'label' => true |
| [2654](#L2654) | ); |
| [2655](#L2655) |  |
| [2656](#L2656) | $allowed\_tags['a'] = array( |
| [2657](#L2657) | 'href' => true, |
| [2658](#L2658) | 'data-\*' => true, |
| [2659](#L2659) | 'class' => true, |
| [2660](#L2660) | 'style' => true, |
| [2661](#L2661) | 'id' => true, |
| [2662](#L2662) | 'target' => true, |
| [2663](#L2663) | 'data-\*' => true, |
| [2664](#L2664) | 'role' => true, |
| [2665](#L2665) | 'aria-controls' => true, |
| [2666](#L2666) | 'aria-selected' => true, |
| [2667](#L2667) | 'disabled' => true |
| [2668](#L2668) | ); |
| [2669](#L2669) |  |
| [2670](#L2670) | $allowed\_tags['div'] = array( |
| [2671](#L2671) | 'style' => true, |
| [2672](#L2672) | 'class' => true, |
| [2673](#L2673) | 'id' => true, |
| [2674](#L2674) | 'data-\*' => true, |
| [2675](#L2675) | 'role' => true, |
| [2676](#L2676) | 'aria-labelledby' => true, |
| [2677](#L2677) | 'value' => true, |
| [2678](#L2678) | 'aria-modal' => true, |
| [2679](#L2679) | 'tabindex' => true |
| [2680](#L2680) | ); |
| [2681](#L2681) |  |
| [2682](#L2682) | $allowed\_tags['li'] = array( |
| [2683](#L2683) | 'style' => true, |
| [2684](#L2684) | 'class' => true, |
| [2685](#L2685) | 'id' => true, |
| [2686](#L2686) | 'data-\*' => true, |
| [2687](#L2687) | 'role' => true, |
| [2688](#L2688) | 'aria-labelledby' => true, |
| [2689](#L2689) | 'value' => true, |
| [2690](#L2690) | 'aria-modal' => true, |
| [2691](#L2691) | 'tabindex' => true |
| [2692](#L2692) | ); |
| [2693](#L2693) |  |
| [2694](#L2694) | $allowed\_tags['span'] = array( |
| [2695](#L2695) | 'style' => true, |
| [2696](#L2696) | 'class' => true, |
| [2697](#L2697) | 'id' => true, |
| [2698](#L2698) | 'data-\*' => true, |
| [2699](#L2699) | 'aria-hidden' => true |
| [2700](#L2700) | ); |
| [2701](#L2701) |  |
| [2702](#L2702) | $allowed\_tags['style'] = array( |
| [2703](#L2703) | 'class' => true, |
| [2704](#L2704) | 'id' => true, |
| [2705](#L2705) | 'type' => true |
| [2706](#L2706) | ); |
| [2707](#L2707) |  |
| [2708](#L2708) | $allowed\_tags['fieldset'] = array( |
| [2709](#L2709) | 'class' => true, |
| [2710](#L2710) | 'id' => true, |
| [2711](#L2711) | 'type' => true |
| [2712](#L2712) | ); |
| [2713](#L2713) |  |
| [2714](#L2714) | $allowed\_tags['link'] = array( |
| [2715](#L2715) | 'class' => true, |
| [2716](#L2716) | 'id' => true, |
| [2717](#L2717) | 'type' => true, |
| [2718](#L2718) | 'rel' => true, |
| [2719](#L2719) | 'href' => true, |
| [2720](#L2720) | 'media' => true |
| [2721](#L2721) | ); |
| [2722](#L2722) |  |
| [2723](#L2723) | $allowed\_tags['form'] = array( |
| [2724](#L2724) | 'style' => true, |
| [2725](#L2725) | 'class' => true, |
| [2726](#L2726) | 'id' => true, |
| [2727](#L2727) | 'method' => true, |
| [2728](#L2728) | 'action' => true, |
| [2729](#L2729) | 'data-\*' => true |
| [2730](#L2730) | ); |
| [2731](#L2731) |  |
| [2732](#L2732) | $allowed\_tags['script'] = array( |
| [2733](#L2733) | 'class' => true, |
| [2734](#L2734) | 'id' => true, |
| [2735](#L2735) | 'type' => true, |
| [2736](#L2736) | 'src' => true |
| [2737](#L2737) | ); |
| [2738](#L2738) |  |
| [2739](#L2739) | echo wp\_kses($html, $allowed\_tags); |
| [2740](#L2740) |  |
| [2741](#L2741) | add\_filter('safe\_style\_css', function ($styles) { |
| [2742](#L2742) | $styles\_wf = array( |
| [2743](#L2743) | 'text-align', |
| [2744](#L2744) | 'margin', |
| [2745](#L2745) | 'color', |
| [2746](#L2746) | 'float', |
| [2747](#L2747) | 'border', |
| [2748](#L2748) | 'background', |
| [2749](#L2749) | 'background-color', |
| [2750](#L2750) | 'border-bottom', |
| [2751](#L2751) | 'border-bottom-color', |
| [2752](#L2752) | 'border-bottom-style', |
| [2753](#L2753) | 'border-bottom-width', |
| [2754](#L2754) | 'border-collapse', |
| [2755](#L2755) | 'border-color', |
| [2756](#L2756) | 'border-left', |
| [2757](#L2757) | 'border-left-color', |
| [2758](#L2758) | 'border-left-style', |
| [2759](#L2759) | 'border-left-width', |
| [2760](#L2760) | 'border-right', |
| [2761](#L2761) | 'border-right-color', |
| [2762](#L2762) | 'border-right-style', |
| [2763](#L2763) | 'border-right-width', |
| [2764](#L2764) | 'border-spacing', |
| [2765](#L2765) | 'border-style', |
| [2766](#L2766) | 'border-top', |
| [2767](#L2767) | 'border-top-color', |
| [2768](#L2768) | 'border-top-style', |
| [2769](#L2769) | 'border-top-width', |
| [2770](#L2770) | 'border-width', |
| [2771](#L2771) | 'caption-side', |
| [2772](#L2772) | 'clear', |
| [2773](#L2773) | 'cursor', |
| [2774](#L2774) | 'direction', |
| [2775](#L2775) | 'font', |
| [2776](#L2776) | 'font-family', |
| [2777](#L2777) | 'font-size', |
| [2778](#L2778) | 'font-style', |
| [2779](#L2779) | 'font-variant', |
| [2780](#L2780) | 'font-weight', |
| [2781](#L2781) | 'height', |
| [2782](#L2782) | 'letter-spacing', |
| [2783](#L2783) | 'line-height', |
| [2784](#L2784) | 'margin-bottom', |
| [2785](#L2785) | 'margin-left', |
| [2786](#L2786) | 'margin-right', |
| [2787](#L2787) | 'margin-top', |
| [2788](#L2788) | 'overflow', |
| [2789](#L2789) | 'padding', |
| [2790](#L2790) | 'padding-bottom', |
| [2791](#L2791) | 'padding-left', |
| [2792](#L2792) | 'padding-right', |
| [2793](#L2793) | 'padding-top', |
| [2794](#L2794) | 'text-decoration', |
| [2795](#L2795) | 'text-indent', |
| [2796](#L2796) | 'vertical-align', |
| [2797](#L2797) | 'width' |
| [2798](#L2798) | ); |
| [2799](#L2799) |  |
| [2800](#L2800) | foreach ($styles\_wf as $style\_wf) { |
| [2801](#L2801) | if (($key = array\_search($style\_wf, $styles)) !== false) { |
| [2802](#L2802) | unset($styles[$key]); |
| [2803](#L2803) | } |
| [2804](#L2804) | } |
| [2805](#L2805) | return $styles; |
| [2806](#L2806) | }); |
| [2807](#L2807) | } |
| [2808](#L2808) |  |
| [2809](#L2809) |  |
| [2810](#L2810) | static function is\_plugin\_installed($slug) |
| [2811](#L2811) | { |
| [2812](#L2812) | if (!function\_exists('get\_plugins')) { |
| [2813](#L2813) | require\_once ABSPATH . 'wp-admin/includes/plugin.php'; |
| [2814](#L2814) | } |
| [2815](#L2815) | $all\_plugins = get\_plugins(); |
| [2816](#L2816) |  |
| [2817](#L2817) | if (!empty($all\_plugins[$slug])) { |
| [2818](#L2818) | return true; |
| [2819](#L2819) | } else { |
| [2820](#L2820) | return false; |
| [2821](#L2821) | } |
| [2822](#L2822) | } // is\_plugin\_installed |
| [2823](#L2823) |  |
| [2824](#L2824) |  |
| [2825](#L2825) | // check if Weglot plugin is active and min version installed |
| [2826](#L2826) | static function is\_weglot\_active() |
| [2827](#L2827) | { |
| [2828](#L2828) | if (!function\_exists('is\_plugin\_active') || !function\_exists('get\_plugin\_data')) { |
| [2829](#L2829) | require\_once ABSPATH . 'wp-admin/includes/plugin.php'; |
| [2830](#L2830) | } |
| [2831](#L2831) |  |
| [2832](#L2832) | if (is\_plugin\_active('weglot/weglot.php')) { |
| [2833](#L2833) | $weglot\_info = get\_plugin\_data(ABSPATH . 'wp-content/plugins/weglot/weglot.php'); |
| [2834](#L2834) | if (version\_compare($weglot\_info['Version'], '2.5', '<')) { |
| [2835](#L2835) | return false; |
| [2836](#L2836) | } else { |
| [2837](#L2837) | return true; |
| [2838](#L2838) | } |
| [2839](#L2839) | } else { |
| [2840](#L2840) | return false; |
| [2841](#L2841) | } |
| [2842](#L2842) | } // is\_weglot\_active |
| [2843](#L2843) |  |
| [2844](#L2844) |  |
| [2845](#L2845) | // check if Weglot is completely set up |
| [2846](#L2846) | static function is\_weglot\_setup() |
| [2847](#L2847) | { |
| [2848](#L2848) | if (!self::is\_weglot\_active()) { |
| [2849](#L2849) | return false; |
| [2850](#L2850) | } |
| [2851](#L2851) |  |
| [2852](#L2852) | $active\_languages = weglot\_get\_destination\_languages(); |
| [2853](#L2853) | if (!empty($active\_languages)) { |
| [2854](#L2854) | return true; |
| [2855](#L2855) | } else { |
| [2856](#L2856) | return false; |
| [2857](#L2857) | } |
| [2858](#L2858) | } // is\_weglot\_setup |
| [2859](#L2859) |  |
| [2860](#L2860) |  |
| [2861](#L2861) | // reset pointers on activation |
| [2862](#L2862) | static function activate() |
| [2863](#L2863) | { |
| [2864](#L2864) | self::reset\_pointers(); |
| [2865](#L2865) | self::empty\_cache(); |
| [2866](#L2866) | } // activate |
| [2867](#L2867) |  |
| [2868](#L2868) |  |
| [2869](#L2869) | // clean up on deactivation |
| [2870](#L2870) | static function deactivate() |
| [2871](#L2871) | { |
| [2872](#L2872) | delete\_option(UCP\_POINTERS\_KEY); |
| [2873](#L2873) | delete\_option(UCP\_NOTICES\_KEY); |
| [2874](#L2874) | self::empty\_cache(); |
| [2875](#L2875) | } // deactivate |
| [2876](#L2876) |  |
| [2877](#L2877) |  |
| [2878](#L2878) | // clean up on uninstall |
| [2879](#L2879) | static function uninstall() |
| [2880](#L2880) | { |
| [2881](#L2881) | delete\_option(UCP\_OPTIONS\_KEY); |
| [2882](#L2882) | delete\_option(UCP\_META\_KEY); |
| [2883](#L2883) | delete\_option(UCP\_POINTERS\_KEY); |
| [2884](#L2884) | delete\_option(UCP\_NOTICES\_KEY); |
| [2885](#L2885) | self::empty\_cache(); |
| [2886](#L2886) | } // uninstall |
| [2887](#L2887) | } // class UCP |
| [2888](#L2888) |  |
| [2889](#L2889) |  |
| [2890](#L2890) | // hook everything up |
| [2891](#L2891) | register\_activation\_hook(\_\_FILE\_\_, array('UCP', 'activate')); |
| [2892](#L2892) | register\_deactivation\_hook(\_\_FILE\_\_, array('UCP', 'deactivate')); |
| [2893](#L2893) | register\_uninstall\_hook(\_\_FILE\_\_, array('UCP', 'uninstall')); |
| [2894](#L2894) | add\_action('init', array('UCP', 'init')); |
| [2895](#L2895) | add\_action('plugins\_loaded', array('UCP', 'plugins\_loaded')); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/under-construction-page/trunk/under-construction.php?rev=2848705&format=txt)
* [Original Format](/export/2848705/under-construction-page/trunk/under-construction.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


