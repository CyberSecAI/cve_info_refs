=== Content from discuss.hashicorp.com_f95dcff3_20250114_223938.html ===


[HashiCorp Discuss](/)

# [HCSEC-2023-03 - Boundary Workers Store Rotated Credentials in Plaintext Even When Key Management Service Configured](/t/hcsec-2023-03-boundary-workers-store-rotated-credentials-in-plaintext-even-when-key-management-service-configured/49907)

[Security](/c/security/52)

[security-boundary](https://discuss.hashicorp.com/tag/security-boundary)

[jfinnigan](https://discuss.hashicorp.com/u/jfinnigan)

February 8, 2023, 6:16pm

1

**Bulletin ID:** HCSEC-2023-03

**Affected Products / Versions:** Boundary 0.10.0 up to 0.11.2; fixed in 0.12.0.

**Publication Date:** February 8, 2023

**Summary**

A vulnerability in Boundary was identified such that when a Key Management Service (KMS) was defined in Boundary’s configuration file with the intent of using the KMS to encrypt the credentials stored on disk, new credentials created after an automatic rotation may not have been encrypted via the intended KMS. This would result in the credentials being stored in plaintext on the Boundary PKI worker’s disk. This vulnerability, CVE-2023-0690, was fixed in Boundary 0.12.0.

**Background**

Boundary has support for various [KMS](https://developer.hashicorp.com/boundary/docs/configuration/kms) to ensure secure end-to-end behavior of the system. When running a Boundary worker using the PKI-based method for authentication, an optional [KMS configuration](https://developer.hashicorp.com/boundary/docs/configuration/worker/pki-worker#kms-configuration) can be defined in the configuration file. The configurations enabled Boundary to encrypt the files at rest and automatically rotate those credentials on a periodic basis.

**Details**

A bug was identified in configurations where the operator is using the PKI-based worker authentication and has defined a KMS for [“worker-auth-storage”](https://developer.hashicorp.com/boundary/docs/configuration/worker/pki-worker#kms-configuration). When a credential is rotated, the new credentials were not encrypted via the intended KMS. In most instances, this would result in plaintext credentials being stored on disk, although in some cases this could result in the credentials being encrypted with the wrong KMS, which would render them useless for any operation.

**Remediation**

Customers should evaluate the risk associated with this issue and consider upgrading to Boundary 0.12.0, or newer. Once updated, customers should perform one of the following actions:

* Wait for next worker authentication rotation to occur, typically within one week, at which point the new credentials should be properly encrypted.
* [Delete the worker](https://developer.hashicorp.com/hcp/docs/boundary/self-managed-workers/manage-self-managed-workers#delete-self-managed-workers) from the system and re-authorize it, forcing the worker to generate a new set of credentials immediately, which will be encrypted.

Please refer to the [Upgrade and Database Migration](https://developer.hashicorp.com/boundary/tutorials/oss-configuration/upgrade-version) documentation on how to upgrade Boundary.

**Acknowledgement**

This issue was identified by the Boundary engineering team.

*We deeply appreciate any effort to coordinate disclosure of security vulnerabilities. For information about security at HashiCorp and the reporting of security vulnerabilities, please see <https://hashicorp.com/security>.*

[Boundary 0.12.0 Released!](https://discuss.hashicorp.com/t/boundary-0-12-0-released/50170)

### Related topics

| Topic |  | Replies | Views | Activity |
| --- | --- | --- | --- | --- |
| [Boundary 0.9.0 Released!](https://discuss.hashicorp.com/t/boundary-0-9-0-released/41103)  [Boundary](/c/boundary/50) [boundary-release](https://discuss.hashicorp.com/tag/boundary-release) ,  [boundary](https://discuss.hashicorp.com/tag/boundary) ,  [release-announcements](https://discuss.hashicorp.com/tag/release-announcements) | 0 | 631 | June 22, 2022 |
| [Boundary 0.11.1](https://discuss.hashicorp.com/t/boundary-0-11-1/47525)  [Boundary](/c/boundary/50) [boundary-release](https://discuss.hashicorp.com/tag/boundary-release) ,  [boundary](https://discuss.hashicorp.com/tag/boundary) ,  [release-announcement](https://discuss.hashicorp.com/tag/release-announcement) | 0 | 355 | December 1, 2022 |
| [Cross-Account KMS?](https://discuss.hashicorp.com/t/cross-account-kms/28259)  [Boundary](/c/boundary/50) | 10 | 2163 | August 19, 2021 |
| [Boundary worker kms](https://discuss.hashicorp.com/t/boundary-worker-kms/64844)  [Boundary](/c/boundary/50) | 3 | 120 | April 15, 2024 |
| [How to generate key for kms](https://discuss.hashicorp.com/t/how-to-generate-key-for-kms/31780)  [Boundary](/c/boundary/50) | 4 | 859 | October 28, 2024 |

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](https://meta.discourse.org/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled


