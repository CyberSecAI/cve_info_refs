=== Content from bugzilla.mozilla.org_9db7242e_20250114_215848.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1783561)
* [XML](/show_bug.cgi?ctype=xml&id=1783561)

Closed
[Bug 1783561](/show_bug.cgi?id=1783561)
(CVE-2023-28159)

Opened 2 years ago
Closed 2 years ago

# Block the fullscreen notification on Android using download popups

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Block the fullscreen notification on Android using download popups

## Categories

### (Fenix :: General, defect, P2)

[Product:](/describecomponents.cgi?product=Fenix)

Fenix
▾

Fenix
**Firefox for Android**: Fenix is an Android browser built using Android Components that re-imagines how a mobile browser would look if it was built from scratch to demonstrate better design for typical mobile use cases ([more info](https://www.mozilla.org/en-us/firefox/mobile/)).
[See Open Bugs in This Product](/buglist.cgi?product=Fenix&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Fenix)
Watch This Product

[Component:](/describecomponents.cgi?product=Fenix&component=General#General)

General
▾

Fenix :: General
For bugs in Firefox Android which do not fit into other more specific components
[See Open Bugs in This Component](/buglist.cgi?product=Fenix&component=General&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Fenix&component=General&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Fenix&component=General)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Android

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P2

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### (firefox109 wontfix, firefox110 wontfix, firefox111+ fixed)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

111 Branch

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |
| a11y-review | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox109 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox109&o1=equals&v1=wontfix) |
| firefox110 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox110&o1=equals&v1=wontfix) |
| firefox111 | [+](/buglist.cgi?f1=cf_tracking_firefox111&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox111&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| firefox109 |  | wontfix |
| firefox110 |  | wontfix |
| firefox111 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: haxatron1, Assigned: petru)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/2535b2a6f3c9de3bd9f6a53bbe17835e?d=mm&size=40)  [petru](/user_profile?user_id=613831)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/ece264081141db92a1ad0d985a5d3489?d=mm&size=40)  [haxatron1](/user_profile?user_id=704427)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/e49a28e5fed7340a3e51d46100902d93?d=mm&size=40)  [boek](/user_profile?user_id=599885)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

17 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[mozilla-hub.atlassian.net/browse/FNXV...](https://mozilla-hub.atlassian.net/browse/FNXV2-21490 "https://mozilla-hub.atlassian.net/browse/FNXV2-21490")

[github.com/mozilla-mobile/android-com...](https://github.com/mozilla-mobile/android-components/pull/12971 "https://github.com/mozilla-mobile/android-components/pull/12971")

[github.com/mozilla-mobile/fenix/pull/...](https://github.com/mozilla-mobile/fenix/pull/27454 "https://github.com/mozilla-mobile/fenix/pull/27454")

[mozilla-hub.atlassian.net/browse/FXDR...](https://mozilla-hub.atlassian.net/browse/FXDROID-8 "https://mozilla-hub.atlassian.net/browse/FXDROID-8")

## Details

### (Keywords: reporter-external, sec-high, Whiteboard: [reporter-external] [client-bounty-form] [verif?][adv-main111+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2023-28159

[Keywords:](/describekeywords.cgi)

[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[reporter-external] [client-bounty-form] [verif?][adv-main111+]

Change Request:

---

Bug Flags:

| [dveditz](/user_profile?user_id=1689) | [sec-bounty](#a14696720_1689 "2 years ago") | + |
| --- | --- | --- |
| [dveditz](/user_profile?user_id=1689) | sec-bounty | + |
| --- | --- | --- |
|  | sec-bounty-hof |  |
| --- | --- | --- |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (12 files, 6 obsolete files)

| [poc.html](/attachment.cgi?id=9288732)  [2 years ago](#c0)  [haxatron1](/user_profile?user_id=704427)   349 bytes, text/html |  | [Details](/attachment.cgi?id=9288732&action=edit) |
| --- | --- | --- |
| [poc.mp4](/attachment.cgi?id=9288733)  [2 years ago](#c1)  [haxatron1](/user_profile?user_id=704427)   846.88 KB, video/mp4 |  | [Details](/attachment.cgi?id=9288733&action=edit) |
| [AlwaysShowTheSnackbar.mp4](/attachment.cgi?id=9299055)  [2 years ago](#c4)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   5.29 MB, video/mp4 |  | [Details](/attachment.cgi?id=9299055&action=edit) |
| [GitHub Pull Request](/attachment.cgi?id=9301155)  [2 years ago](#c5)  [BMO Automation](/user_profile?user_id=546015)   63 bytes, text/x-github-pull-request |  | [Details](/attachment.cgi?id=9301155&action=edit) | [Review](/attachment.cgi?id=9301155) |
| [GitHub Pull Request](/attachment.cgi?id=9301345)  [2 years ago](#c6)  [BMO Automation](/user_profile?user_id=546015)   57 bytes, text/x-github-pull-request |  | [Details](/attachment.cgi?id=9301345&action=edit) | [Review](/attachment.cgi?id=9301345) |
| [For\_1783561\_-\_AC\_Patch1\_Stop\_BrowserToolbarBehavior\_positioning\_the\_snackbar\_.patch](/attachment.cgi?id=9303692)  [2 years ago](#c7)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   7.51 KB, patch | jonalmeida : [review+](#a11501780_541581 "2 years ago")  tjr : [sec-approval+](#a12868366_578488 "2 years ago") | [Details](/attachment.cgi?id=9303692&action=edit) | [Diff](/attachment.cgi?id=9303692&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303692) |
| [For\_1783561\_-\_AC\_Patch2\_Allow\_a\_custom\_View\_for\_first\_party\_downloads.patch](/attachment.cgi?id=9303693)  [2 years ago](#c8)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   7.51 KB, patch |  | [Details](/attachment.cgi?id=9303693&action=edit) | [Diff](/attachment.cgi?id=9303693&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303693) |
| [For\_1783561\_-\_AC\_Patch3\_Allow\_a\_custom\_view\_for\_3rd\_party\_downloads.patch](/attachment.cgi?id=9303694)  [2 years ago](#c9)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   14.71 KB, patch |  | [Details](/attachment.cgi?id=9303694&action=edit) | [Diff](/attachment.cgi?id=9303694&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303694) |
| [Bug\_1783561\_-\_Fenix\_Patch1\_Control\_the\_snackbar\_positioning\_from\_Fenix.patch](/attachment.cgi?id=9303695)  [2 years ago](#c10)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   22.24 KB, patch | jonalmeida : [review+](#a11501792_541581 "2 years ago")  tjr : [sec-approval+](#c22 "2 years ago") | [Details](/attachment.cgi?id=9303695&action=edit) | [Diff](/attachment.cgi?id=9303695&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303695) |
| [Bug\_1783561\_-\_Fenix\_Patch2\_Show\_the\_download\_dialog\_as\_an\_Android\_View.patch](/attachment.cgi?id=9303697)  [2 years ago](#c11)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   45.05 KB, patch |  | [Details](/attachment.cgi?id=9303697&action=edit) | [Diff](/attachment.cgi?id=9303697&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303697) |
| [Bug\_1783561\_-\_Fenix\_Patch3\_Show\_the\_3rd\_party\_download\_dialog\_as\_an\_Android\_View.patch](/attachment.cgi?id=9303698)  [2 years ago](#c12)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   45.05 KB, patch |  | [Details](/attachment.cgi?id=9303698&action=edit) | [Diff](/attachment.cgi?id=9303698&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303698) |
| [Bug\_1783561\_-\_Fenix\_Patch2\_Show\_the\_download\_dialog\_as\_an\_Android\_View.patch](/attachment.cgi?id=9304135)  [2 years ago](#c14)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   43.97 KB, patch | jonalmeida : [review+](#a11501803_541581 "2 years ago")  tjr : [sec-approval+](#a12868336_578488 "2 years ago") | [Details](/attachment.cgi?id=9304135&action=edit) | [Diff](/attachment.cgi?id=9304135&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9304135) |
| [Bug\_1783561\_-\_Fenix\_Patch3\_Show\_the\_3rd\_party\_download\_dialog\_as\_an\_Android\_View.patch](/attachment.cgi?id=9304136)  [2 years ago](#c15)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   7.18 KB, patch | jonalmeida : [review+](#a11501812_541581 "2 years ago")  tjr : [sec-approval+](#a12868338_578488 "2 years ago") | [Details](/attachment.cgi?id=9304136&action=edit) | [Diff](/attachment.cgi?id=9304136&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9304136) |
| [For\_1783561\_-\_AC\_Patch\_2\_Allow\_a\_custom\_View\_for\_first\_party\_downloads.patch](/attachment.cgi?id=9304137)  [2 years ago](#c16)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   14.71 KB, patch | jonalmeida : [review+](#a11501822_541581 "2 years ago")  tjr : [sec-approval+](#a12868349_578488 "2 years ago") | [Details](/attachment.cgi?id=9304137&action=edit) | [Diff](/attachment.cgi?id=9304137&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9304137) |
| [For\_1783561\_-\_AC\_Patch3\_Allow\_a\_custom\_view\_for\_3rd\_party\_downloads.patch](/attachment.cgi?id=9304138)  [2 years ago](#c17)  [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)   22.24 KB, patch | jonalmeida : [review+](#a11501830_541581 "2 years ago")  tjr : [sec-approval+](#a12868348_578488 "2 years ago") | [Details](/attachment.cgi?id=9304138&action=edit) | [Diff](/attachment.cgi?id=9304138&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9304138) |
| [[mozilla-mobile/fenix] Bug 1783561 - Allow for better styling and control of the download dialogs (#28572)](/attachment.cgi?id=9312812)  [2 years ago](#c24)  [BMO Automation](/user_profile?user_id=546015)   50 bytes, text/x-github-pull-request |  | [Details](/attachment.cgi?id=9312812&action=edit) | [Review](/attachment.cgi?id=9312812) |
| [[mozilla-mobile/firefox-android] Bug 1783561 - Allow clients better styling and control of the download dialogs (#565)](/attachment.cgi?id=9312813)  [2 years ago](#c25)  [BMO Automation](/user_profile?user_id=546015)   58 bytes, text/x-github-pull-request |  | [Details](/attachment.cgi?id=9312813&action=edit) | [Review](/attachment.cgi?id=9312813) |
| [advisory.txt](/attachment.cgi?id=9322420)  [2 years ago](#c32)  [Tom Ritter [:tjr]](/user_profile?user_id=578488)   344 bytes, text/plain |  | [Details](/attachment.cgi?id=9322420&action=edit) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [haxatron1](/user_profile?user_id=704427)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1783561#c0)• 2 years ago |
|  | |

Attached file
[poc.html](attachment.cgi?id=9288732)
— [Details](attachment.cgi?id=9288732&action=edit)

When entering fullscreen, the fullscreen notification is essential to warn users that they are entering fullscreen on the site to prevent spoofing attacks as the fullscreen mode lacks the omnibox. See <https://www.mozilla.org/en-US/security/advisories/mfsa2022-17/#CVE-2022-29914> for instance.

It is possible to block the fullscreen notification on Firefox by using download popups.

REPRODUCTION STEPS (Tested on Firefox 103.2.0 on Android) :

1. Open the file below on Firefox on Android (with the omnibox at the bottom, which seems to be the default for me.)
2. Click on the button, the download popup will appear below which will block the fullscreen notification which will also appear at the bottom
Flags: sec-bounty?

|  | [haxatron1](/user_profile?user_id=704427)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1783561#c1)• 2 years ago |
|  | |

Attached video
[poc.mp4](attachment.cgi?id=9288733)
— [Details](attachment.cgi?id=9288733&action=edit)

|  | [haxatron1](/user_profile?user_id=704427)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1783561#c2)• 2 years ago |
|  | |

See above video demonstrating the spoof

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a15308_691597)• 2 years ago |

Group: firefox-core-security → mobile-core-securityComponent: Security → Security: AndroidProduct: Firefox → Fenix

|  | [Kevin Brosnan [Ex-Mozilla]](/user_profile?user_id=406670) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a83588_406670)• 2 years ago |

Status: UNCONFIRMED → NEWEver confirmed: true

|  | [Tyson Smith [:tsmith]](/user_profile?user_id=486634) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a275286_486634)• 2 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Kevin Brosnan [Ex-Mozilla]](/user_profile?user_id=406670) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a2589301_406670)• 2 years ago |

See Also: → <https://mozilla-hub.atlassian.net/browse/FNXV2-21490>

|  | [Chris Peterson [:cpeterson]](/user_profile?user_id=430528) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1783561#c3)• 2 years ago |
|  | |

Bug for the Android Experience team

Severity: -- → S2Priority: -- → P2

|  | [Chris Peterson [:cpeterson]](/user_profile?user_id=430528) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a3554389_430528)• 2 years ago |

OS: Unspecified → Android

|  | [Kevin Brosnan [Ex-Mozilla]](/user_profile?user_id=406670) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a5528827_406670)• 2 years ago |

Assignee: nobody → petru.lingurar

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1783561#c4)• 2 years ago |
|  | |

Attached video
[AlwaysShowTheSnackbar.mp4](attachment.cgi?id=9299055)
— [Details](attachment.cgi?id=9299055&action=edit)

<https://github.com/mozilla-mobile/android-components/pull/12971> and <https://github.com/mozilla-mobile/fenix/pull/27454> will ensure that the snackbar is always placed on top of the download dialogs.

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1783561#c5)• 2 years ago |
|  | |

Attached file
[GitHub Pull Request](attachment.cgi?id=9301155) (obsolete)
— [Details](attachment.cgi?id=9301155&action=edit)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a7351008_1689)• 2 years ago |

See Also: → <https://github.com/mozilla-mobile/android-components/pull/12971>,
<https://github.com/mozilla-mobile/fenix/pull/27454>

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1783561#c6)• 2 years ago |
|  | |

Attached file
[GitHub Pull Request](attachment.cgi?id=9301345) (obsolete)
— [Details](attachment.cgi?id=9301345&action=edit)

|  | [Chris Peterson [:cpeterson]](/user_profile?user_id=430528) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a7652615_430528)• 2 years ago |

Component: Security: Android → General

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1783561#c7)• 2 years ago |
|  | |

Attached patch

[For\_1783561\_-\_AC\_Patch1\_Stop\_BrowserToolbarBehavior\_positioning\_the\_snackbar\_.patch](attachment.cgi?id=9303692&action=diff)
— [Details](attachment.cgi?id=9303692&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303692)

Patch 1 of the proposed AC changes

The snackbar is placed depending on the toolbar so the relation should be

reversed. The toolbar should not know about and control the snackbar.

There could be other siblings that the snackbar wants to position itself by

and so removing this responsability from BrowserToolbarBehavior will help

better support current and future flows.

[Attachment #9301155](/attachment.cgi?id=9301155&action=edit "GitHub Pull Request") -
Attachment is obsolete: true
[Attachment #9301345](/attachment.cgi?id=9301345&action=edit "GitHub Pull Request") -
Attachment is obsolete: true

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1783561#c8)• 2 years ago |
| obsolete | |

| Comment hidden (obsolete) |  |
| --- | --- |

Attached patch

[For\_1783561\_-\_AC\_Patch2\_Allow\_a\_custom\_View\_for\_first\_party\_downloads.patch](attachment.cgi?id=9303693&action=diff) (obsolete)
— [Details](attachment.cgi?id=9303693&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303693)

Patch 2 of the proposed AC changes.

Allow a custom View for first party downloads.

This will allow clients easily implement their own UI.

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1783561#c9)• 2 years ago |
| oboslete obsolete | |

| Comment hidden (obsolete) |  |
| --- | --- |

Attached patch

[For\_1783561\_-\_AC\_Patch3\_Allow\_a\_custom\_view\_for\_3rd\_party\_downloads.patch](attachment.cgi?id=9303694&action=diff) (obsolete)
— [Details](attachment.cgi?id=9303694&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303694)

Patch 3 of the proposed AC changes.

Allow a custom view for 3rd party downloads.

This will allow clients easily implement their own UI.

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1783561#c10)• 2 years ago |
|  | |

Attached patch

[Bug\_1783561\_-\_Fenix\_Patch1\_Control\_the\_snackbar\_positioning\_from\_Fenix.patch](attachment.cgi?id=9303695&action=diff)
— [Details](attachment.cgi?id=9303695&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303695)

Patch 1 of the proposed Fenix changes.

Control the snackbar positioning from Fenix.

Previously Android-Components - BrowserToolbarBehavior would be responsible

for positioning the snackbar above the toolbar.

With that responsibility removed we can handle in Fenix positioning the

snackbar depending on the toolbar and many more cases - like positioning it

depending on the download dialogs.

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1783561#c11)• 2 years ago |
| obsolete | |

| Comment hidden (obsolete) |  |
| --- | --- |

Attached patch

[Bug\_1783561\_-\_Fenix\_Patch2\_Show\_the\_download\_dialog\_as\_an\_Android\_View.patch](attachment.cgi?id=9303697&action=diff) (obsolete)
— [Details](attachment.cgi?id=9303697&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303697)

Patch 2 of the proposed Fenix changes

Show the download dialog as an Android View

Tried to mimic the UX of a modal dialog while using Android Views.

This meant including a scrim that would consume all touches and theming the

navigation bar and status bar.

Avoiding a dialog and a separate window will allow the snackbar to see the

new "dialog" as a sibling in a CoordinatorLayout parent and so be able to

position itself based on the new "dialog".

This patch also added "start\_download\_dialog\_layout" from A-C as it leads to

simpler and less code needed to style the layout - colors / shapes with

everything happening in XML versus calculating the values then setting them

programatically.

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1783561#c12)• 2 years ago |
| obsolete | |

| Comment hidden (obsolete) |  |
| --- | --- |

Attached patch

[Bug\_1783561\_-\_Fenix\_Patch3\_Show\_the\_3rd\_party\_download\_dialog\_as\_an\_Android\_View.patch](attachment.cgi?id=9303698&action=diff) (obsolete)
— [Details](attachment.cgi?id=9303698&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303698)

Patch 3 of the proposed Fenix changes.

Show the 3rd party download dialog as an Android View

This uses the same direction as the before patch - inflating a new View that

can then serve as an anchor for the Snackbar.

Here we could use directly the AC layout as it needed no special customization.

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1783561#c13)• 2 years ago |
|  | |

Christian noticed that these patches should've been first posted privately to Bugzilla for review and security approval.

Cleaned the changes from the public repos and posted the patches here.

The general direction taken is to place the snackbar above the download dialogs so that no information is lost.

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1783561#c14)• 2 years ago |
|  | |

Attached patch

[Bug\_1783561\_-\_Fenix\_Patch2\_Show\_the\_download\_dialog\_as\_an\_Android\_View.patch](attachment.cgi?id=9304135&action=diff)
— [Details](attachment.cgi?id=9304135&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9304135)

Patch 2 of the proposed Fenix changes

Show the download dialog as an Android View

Tried to mimic the UX of a modal dialog while using Android Views.

This meant including a scrim that would consume all touches and theming the

navigation bar and status bar.

Avoiding a dialog and a separate window will allow the snackbar to see the

new "dialog" as a sibling in a CoordinatorLayout parent and so be able to

position itself based on the new "dialog".

This patch also added "start\_download\_dialog\_layout" from A-C as it leads to

simpler and less code needed to style the layout - colors / shapes with

everything happening in XML versus calculating the values then setting them

programatically.

[Attachment #9303697](/attachment.cgi?id=9303697&action=edit "Bug_1783561_-_Fenix_Patch2_Show_the_download_dialog_as_an_Android_View.patch") -
Attachment is obsolete: true

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1783561#c15)• 2 years ago |
|  | |

Attached patch

[Bug\_1783561\_-\_Fenix\_Patch3\_Show\_the\_3rd\_party\_download\_dialog\_as\_an\_Android\_View.patch](attachment.cgi?id=9304136&action=diff)
— [Details](attachment.cgi?id=9304136&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9304136)

Patch 3 of the proposed Fenix changes.

Show the 3rd party download dialog as an Android View

This uses the same direction as the before patch - inflating a new View that

can then serve as an anchor for the Snackbar.

Here we could use directly the AC layout as it needed no special customization.

[Attachment #9303698](/attachment.cgi?id=9303698&action=edit "Bug_1783561_-_Fenix_Patch3_Show_the_3rd_party_download_dialog_as_an_Android_View.patch") -
Attachment is obsolete: true

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1783561#c16)• 2 years ago |
|  | |

Attached patch

[For\_1783561\_-\_AC\_Patch\_2\_Allow\_a\_custom\_View\_for\_first\_party\_downloads.patch](attachment.cgi?id=9304137&action=diff)
— [Details](attachment.cgi?id=9304137&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9304137)

Patch 2 of the proposed AC changes.

Allow a custom View for first party downloads.

This will allow clients easily implement their own UI.

[Attachment #9303693](/attachment.cgi?id=9303693&action=edit "For_1783561_-_AC_Patch2_Allow_a_custom_View_for_first_party_downloads.patch") -
Attachment is obsolete: true

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1783561#c17)• 2 years ago |
|  | |

Attached patch

[For\_1783561\_-\_AC\_Patch3\_Allow\_a\_custom\_view\_for\_3rd\_party\_downloads.patch](attachment.cgi?id=9304138&action=diff)
— [Details](attachment.cgi?id=9304138&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9304138)

Patch 3 of the proposed AC changes.

Allow a custom view for 3rd party downloads.

This will allow clients easily implement their own UI.

[Attachment #9303694](/attachment.cgi?id=9303694&action=edit "For_1783561_-_AC_Patch3_Allow_a_custom_view_for_3rd_party_downloads.patch") -
Attachment is obsolete: true

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1783561#c18)• 2 years ago |
|  | |

Saw there were some issues with the initially exported patches. Updated them now.

|  | [Chris Peterson [:cpeterson]](/user_profile?user_id=430528) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a9858777_430528)• 2 years ago |

Whiteboard: [reporter-external] [client-bounty-form] [verif?] → [reporter-external] [client-bounty-form] [verif?] [fxdroid]

|  | [Chris Peterson [:cpeterson]](/user_profile?user_id=430528) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1783561#c19)• 2 years ago |
|  | |

Jira issue: <https://mozilla-hub.atlassian.net/browse/FXDROID-8>

See Also: → <https://mozilla-hub.atlassian.net/browse/FXDROID-8>Whiteboard: [reporter-external] [client-bounty-form] [verif?] [fxdroid] → [reporter-external] [client-bounty-form] [verif?]

|  | [Jonathan Almeida [:jonalmeida]](/user_profile?user_id=541581) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a11501780_541581)• 2 years ago |

[Attachment #9303692](/attachment.cgi?id=9303692&action=edit "For_1783561_-_AC_Patch1_Stop_BrowserToolbarBehavior_positioning_the_snackbar_.patch") -
Flags: review+

|  | [Jonathan Almeida [:jonalmeida]](/user_profile?user_id=541581) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a11501792_541581)• 2 years ago |

[Attachment #9303695](/attachment.cgi?id=9303695&action=edit "Bug_1783561_-_Fenix_Patch1_Control_the_snackbar_positioning_from_Fenix.patch") -
Flags: review+

|  | [Jonathan Almeida [:jonalmeida]](/user_profile?user_id=541581) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a11501803_541581)• 2 years ago |

[Attachment #9304135](/attachment.cgi?id=9304135&action=edit "Bug_1783561_-_Fenix_Patch2_Show_the_download_dialog_as_an_Android_View.patch") -
Flags: review+

|  | [Jonathan Almeida [:jonalmeida]](/user_profile?user_id=541581) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a11501812_541581)• 2 years ago |

[Attachment #9304136](/attachment.cgi?id=9304136&action=edit "Bug_1783561_-_Fenix_Patch3_Show_the_3rd_party_download_dialog_as_an_Android_View.patch") -
Flags: review+

|  | [Jonathan Almeida [:jonalmeida]](/user_profile?user_id=541581) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a11501822_541581)• 2 years ago |

[Attachment #9304137](/attachment.cgi?id=9304137&action=edit "For_1783561_-_AC_Patch_2_Allow_a_custom_View_for_first_party_downloads.patch") -
Flags: review+

|  | [Jonathan Almeida [:jonalmeida]](/user_profile?user_id=541581) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a11501830_541581)• 2 years ago |

[Attachment #9304138](/attachment.cgi?id=9304138&action=edit "For_1783561_-_AC_Patch3_Allow_a_custom_view_for_3rd_party_downloads.patch") -
Flags: review+

|  | [Jonathan Almeida [:jonalmeida]](/user_profile?user_id=541581) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1783561#c20)• 2 years ago |
|  | |

I reviewed and tested all the patches locally - they work well - thanks! I tested rotation as well and the snack bar persists above it as well.

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1783561#c21)• 2 years ago |
|  | |

Comment on [attachment 9303692](/attachment.cgi?id=9303692 "For_1783561_-_AC_Patch1_Stop_BrowserToolbarBehavior_positioning_the_snackbar_.patch") [[details]](/attachment.cgi?id=9303692&action=edit "For_1783561_-_AC_Patch1_Stop_BrowserToolbarBehavior_positioning_the_snackbar_.patch") [[diff]](/attachment.cgi?id=9303692&action=diff "For_1783561_-_AC_Patch1_Stop_BrowserToolbarBehavior_positioning_the_snackbar_.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303692)

For\_1783561\_-*AC\_Patch1\_Stop\_BrowserToolbarBehavior\_positioning\_the\_snackbar*.patch

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: The proposed patches will refactor the snackbar and download dialogs functionality.

  One might infer a connection between these features being refactored together but there is no clear indication of a security issue.
* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: No
* **Which older supported branches are affected by this flaw?**: All
* **If not all supported branches, which bug introduced the flaw?**: None
* **Do you have backports for the affected branches?**: No
* **If not, how different, hard to create, and risky will they be?**: The entire stack of patches must be merged together.

  The result is a big refactoring, quite complex and as such is risky to uplift.
* **How likely is this patch to cause regressions; how much testing does it need?**: The end result will change the behavior of the snackbar and download dialogs.

  All scenarios involving them should be tested.
* **Is Android affected?**: Yes
[Attachment #9303692](/attachment.cgi?id=9303692&action=edit "For_1783561_-_AC_Patch1_Stop_BrowserToolbarBehavior_positioning_the_snackbar_.patch") -
Flags: sec-approval?

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a11751576_613831)• 2 years ago |

[Attachment #9303695](/attachment.cgi?id=9303695&action=edit "Bug_1783561_-_Fenix_Patch1_Control_the_snackbar_positioning_from_Fenix.patch") -
Flags: sec-approval?
[Attachment #9304135](/attachment.cgi?id=9304135&action=edit "Bug_1783561_-_Fenix_Patch2_Show_the_download_dialog_as_an_Android_View.patch") -
Flags: sec-approval?
[Attachment #9304136](/attachment.cgi?id=9304136&action=edit "Bug_1783561_-_Fenix_Patch3_Show_the_3rd_party_download_dialog_as_an_Android_View.patch") -
Flags: sec-approval?
[Attachment #9304137](/attachment.cgi?id=9304137&action=edit "For_1783561_-_AC_Patch_2_Allow_a_custom_View_for_first_party_downloads.patch") -
Flags: sec-approval?
[Attachment #9304138](/attachment.cgi?id=9304138&action=edit "For_1783561_-_AC_Patch3_Allow_a_custom_view_for_3rd_party_downloads.patch") -
Flags: sec-approval?

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1783561#c22)• 2 years ago |
|  | |

Comment on [attachment 9303695](/attachment.cgi?id=9303695 "Bug_1783561_-_Fenix_Patch1_Control_the_snackbar_positioning_from_Fenix.patch") [[details]](/attachment.cgi?id=9303695&action=edit "Bug_1783561_-_Fenix_Patch1_Control_the_snackbar_positioning_from_Fenix.patch") [[diff]](/attachment.cgi?id=9303695&action=diff "Bug_1783561_-_Fenix_Patch1_Control_the_snackbar_positioning_from_Fenix.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1783561&attachment=9303695)

Bug\_1783561\_-\_Fenix\_Patch1\_Control\_the\_snackbar\_positioning\_from\_Fenix.patch

Uhg, I'm sorry I didn't check this before or during the break. This is approved to land (both the functionality parts of patches and test parts of patches) IF you are prepared for this to go into Fenix beta this cycle. If you want this to bake in Nightly for longer than the few days before the beta uplift period then we probably want to wait until next release. You can check with RyanVM about the last date he would uplift patches for Beta this cycle.

[Attachment #9303695](/attachment.cgi?id=9303695&action=edit "Bug_1783561_-_Fenix_Patch1_Control_the_snackbar_positioning_from_Fenix.patch") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a12868336_578488)• 2 years ago |

[Attachment #9304135](/attachment.cgi?id=9304135&action=edit "Bug_1783561_-_Fenix_Patch2_Show_the_download_dialog_as_an_Android_View.patch") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a12868338_578488)• 2 years ago |

[Attachment #9304136](/attachment.cgi?id=9304136&action=edit "Bug_1783561_-_Fenix_Patch3_Show_the_3rd_party_download_dialog_as_an_Android_View.patch") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a12868348_578488)• 2 years ago |

[Attachment #9304138](/attachment.cgi?id=9304138&action=edit "For_1783561_-_AC_Patch3_Allow_a_custom_view_for_3rd_party_downloads.patch") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a12868349_578488)• 2 years ago |

[Attachment #9304137](/attachment.cgi?id=9304137&action=edit "For_1783561_-_AC_Patch_2_Allow_a_custom_View_for_first_party_downloads.patch") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a12868366_578488)• 2 years ago |

[Attachment #9303692](/attachment.cgi?id=9303692&action=edit "For_1783561_-_AC_Patch1_Stop_BrowserToolbarBehavior_positioning_the_snackbar_.patch") -
Flags: sec-approval? → sec-approval+

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1783561#c23)• 2 years ago |
|  | |

Thank you Tom!

I think it's preferable for this to have more time in Nightly, will try landing after the next beta cut.

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1783561#c24)• 2 years ago |
|  | |

Attached file
[[mozilla-mobile/fenix] Bug 1783561 - Allow for better styling and control of the download dialogs (#28572)](attachment.cgi?id=9312812)
— [Details](attachment.cgi?id=9312812&action=edit)

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1783561#c25)• 2 years ago |
|  | |

Attached file
[[mozilla-mobile/firefox-android] Bug 1783561 - Allow clients better styling and control of the download dialogs (#565)](attachment.cgi?id=9312813)
— [Details](attachment.cgi?id=9312813&action=edit)

|  | [Chris Peterson [:cpeterson]](/user_profile?user_id=430528) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1783561#c26)• 2 years ago |
|  | |

Merged <https://github.com/mozilla-mobile/firefox-android/commit/c53dd65718579006e174803acf683ffd44075049>

[status-firefox111](/buglist.cgi?f1=cf_status_firefox111&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox111&o1=equals&v1=fixed)

|  | [Joe M [:jmahon]](/user_profile?user_id=706732) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a14608096_706732)• 2 years ago |

Status: NEW → RESOLVEDClosed: 2 years agoResolution: --- → FIXED

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a14696720_1689)• 2 years ago |

Flags: sec-bounty? → sec-bounty+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1783561#c27)• 2 years ago |
|  | |

Are we planning to backport this to v110 still?

Group: mobile-core-security → core-security-release
[status-firefox109](/buglist.cgi?f1=cf_status_firefox109&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox109&o1=equals&v1=wontfix)
[status-firefox110](/buglist.cgi?f1=cf_status_firefox110&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox110&o1=equals&v1=affected)Flags: needinfo?(petru.lingurar)Target Milestone: --- → 111 Branch

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1783561#c28)• 2 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM] from [comment #27](/show_bug.cgi?id=1783561#c27 "VERIFIED FIXED - Block the fullscreen notification on Android using download popups"))

> Are we planning to backport this to v110 still?

Maybe after a few more days after QA validation and the change being out in the wild.

The changes are pretty significant and there is a risk of something getting broken.

Flags: needinfo?(petru.lingurar)

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1783561#c29)• 2 years ago |
|  | |

This is getting late for a beta uplift with risks of breaking functionality, Petru, Tom, does it need to ship in 110 or can it ship in 111?

Flags: needinfo?(tom)Flags: needinfo?(petru.lingurar)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1783561#c30)• 2 years ago |
|  | |

Yes, it is okay to wait a release.

Flags: needinfo?(tom)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a15290074_75935)• 2 years ago |

[status-firefox110](/buglist.cgi?f1=cf_status_firefox110&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox110&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox110&o1=equals&v1=wontfix)
[tracking-firefox111](/buglist.cgi?f1=cf_tracking_firefox111&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox111&o1=equals&v1=%2B)Flags: needinfo?(petru.lingurar)

|  | [Petru-Mugurel Lingurar [:petru]](/user_profile?user_id=613831)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1783561#c31)• 2 years ago |
|  | |

The fix for this was verified by QA in <https://bugzilla.mozilla.org/show_bug.cgi?id=1812518>.

Status: RESOLVED → VERIFIED

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a18570258_578488)• 2 years ago |

Whiteboard: [reporter-external] [client-bounty-form] [verif?] → [reporter-external] [client-bounty-form] [verif?][adv-main111+]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1783561#c32)• 2 years ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9322420)
— [Details](attachment.cgi?id=9322420&action=edit)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a18837066_578488)• 2 years ago |

Alias: CVE-2023-28159

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a37708947_1689)• 1 year ago |

Group: core-security-release

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1783561#c33)• 10 months ago |
| collapsed | |

| Comment hidden (collapsed) |  |
| --- | --- |

Pushed by ctuns@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/ef3d12d90d45>
Stop BrowserToolbarBehavior positioning the snackbar
<https://hg.mozilla.org/integration/autoland/rev/260aabb8ef25>
Allow a custom View for first party downloads
<https://hg.mozilla.org/integration/autoland/rev/3c197cae50d5>
Allow a custom View for 3rd party downloads

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1783561#a57200396_5898)• 8 months ago |

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=1783561&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [haxatron1](/user_profile?user_id=704427)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_7e9e9b8c_20250114_215850.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2023-09

## Security Vulnerabilities fixed in Firefox 111

Announced
March 14, 2023
Impact
high
Products
Firefox
Fixed in

* Firefox 111

#### [#CVE-2023-28159: Fullscreen Notification could have been hidden by download popups on Android](#CVE-2023-28159)

Reporter
Axel Chong (@Haxatron)
Impact
high
##### Description

The fullscreen notification could have been hidden on Firefox for Android by using download popups, resulting in potential user confusion or spoofing attacks.
*This bug only affects Firefox for Android. Other operating systems are unaffected.*

##### References

* [Bug 1783561](https://bugzilla.mozilla.org/show_bug.cgi?id=1783561)

#### [#CVE-2023-25748: Fullscreen Notification could have been hidden by window prompts on Android](#CVE-2023-25748)

Reporter
Hafiizh
Impact
high
##### Description

By displaying a prompt with a long description, the fullscreen notification could have been hidden, resulting in potential user confusion or spoofing attacks.
*This bug only affects Firefox for Android. Other operating systems are unaffected.*

##### References

* [Bug 1798798](https://bugzilla.mozilla.org/show_bug.cgi?id=1798798)

#### [#CVE-2023-25749: Firefox for Android may have opened third-party apps without a prompt](#CVE-2023-25749)

Reporter
Kirtikumar Anandrao Ramchandani
Impact
high
##### Description

Android applications with unpatched vulnerabilities can be launched from a browser using Intents, exposing users to these vulnerabilities. Firefox will now confirm with users that they want to launch an external application before doing so.
*This bug only affects Firefox for Android. Other versions of Firefox are unaffected.*

##### References

* [Bug 1810705](https://bugzilla.mozilla.org/show_bug.cgi?id=1810705)

#### [#CVE-2023-25750: Potential ServiceWorker cache leak during private browsing mode](#CVE-2023-25750)

Reporter
Kagami Rosylight
Impact
high
##### Description

Under certain circumstances, a ServiceWorker's offline cache may have leaked to the file system when using private browsing mode.

##### References

* [Bug 1814733](https://bugzilla.mozilla.org/show_bug.cgi?id=1814733)

#### [#CVE-2023-25751: Incorrect code generation during JIT compilation](#CVE-2023-25751)

Reporter
Lukas Bernhard
Impact
high
##### Description

Sometimes, when invalidating JIT code while following an iterator, the newly generated code could be overwritten incorrectly. This could lead to a potentially exploitable crash.

##### References

* [Bug 1814899](https://bugzilla.mozilla.org/show_bug.cgi?id=1814899)

#### [#CVE-2023-28160: Redirect to Web Extension files may have leaked local path](#CVE-2023-28160)

Reporter
Rob Wu
Impact
moderate
##### Description

When following a redirect to a publicly accessible web extension file, the URL may have been translated to the actual local path, leaking potentially sensitive information.

##### References

* [Bug 1802385](https://bugzilla.mozilla.org/show_bug.cgi?id=1802385)

#### [#CVE-2023-28164: URL being dragged from a removed cross-origin iframe into the same tab triggered navigation](#CVE-2023-28164)

Reporter
Luan Herrera
Impact
moderate
##### Description

Dragging a URL from a cross-origin iframe that was removed during the drag could have led to user confusion and website spoofing attacks.

##### References

* [Bug 1809122](https://bugzilla.mozilla.org/show_bug.cgi?id=1809122)

#### [#CVE-2023-28161: One-time permissions granted to a local file were extended to other local files loaded in the same tab](#CVE-2023-28161)

Reporter
Khiem Tran
Impact
moderate
##### Description

If temporary "one-time" permissions, such as the ability to use the Camera, were granted to a document loaded using a file: URL, that permission persisted in that tab for all other documents loaded from a file: URL. This is potentially dangerous if the local files came from different sources, such as in a download directory.

##### References

* [Bug 1811181](https://bugzilla.mozilla.org/show_bug.cgi?id=1811181)

#### [#CVE-2023-28162: Invalid downcast in Worklets](#CVE-2023-28162)

Reporter
Lukas Bernhard
Impact
moderate
##### Description

While implementing AudioWorklets, some code may have casted one type to another, invalid, dynamic type. This could have led to a potentially exploitable crash.

##### References

* [Bug 1811327](https://bugzilla.mozilla.org/show_bug.cgi?id=1811327)

#### [#CVE-2023-25752: Potential out-of-bounds when accessing throttled streams](#CVE-2023-25752)

Reporter
Ronald Crane
Impact
moderate
##### Description

When accessing throttled streams, the count of available bytes needed to be checked in the calling function to be within bounds. This may have lead future code to be incorrect and vulnerable.

##### References

* [Bug 1811627](https://bugzilla.mozilla.org/show_bug.cgi?id=1811627)

#### [#CVE-2023-28163: Windows Save As dialog resolved environment variables](#CVE-2023-28163)

Reporter
Shaheen Fazim
Impact
moderate
##### Description

When downloading files through the Save As dialog on Windows with suggested filenames containing environment variable names, Windows would have resolved those in the context of the current user.
*This bug only affects Firefox on Windows. Other versions of Firefox are unaffected.*

##### References

* [Bug 1817768](https://bugzilla.mozilla.org/show_bug.cgi?id=1817768)

#### [#CVE-2023-28176: Memory safety bugs fixed in Firefox 111 and Firefox ESR 102.9](#CVE-2023-28176)

Reporter
Mozilla developers and community
Impact
high
##### Description

Mozilla developers Timothy Nikkel, Andrew McCreight, and the Mozilla Fuzzing Team reported memory safety bugs present in Firefox 110 and Firefox ESR 102.8. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 111 and Firefox ESR 102.9](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1808352%2C1811637%2C1815904%2C1817442%2C1818674)

#### [#CVE-2023-28177: Memory safety bugs fixed in Firefox 111](#CVE-2023-28177)

Reporter
Mozilla developers and community
Impact
high
##### Description

Mozilla developers and community members Calixte Denizet, Gabriele Svelto, Andrew McCreight, and the Mozilla Fuzzing Team reported memory safety bugs present in Firefox 110. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 111](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1803109%2C1808832%2C1809542%2C1817336)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)


