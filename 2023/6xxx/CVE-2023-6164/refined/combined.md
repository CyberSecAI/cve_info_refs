=== Content from plugins.trac.wordpress.org_12b99834_20250114_201104.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew_path%3D%252Fmainwp%252Ftags%252F4.5.1.3%26old%3D2996628%26new%3D2996628%26old_path%3D%252Fmainwp%252Ftags%252F4.5.1.2)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/2996628/mainwp/tags/4.5.1.2?old=2996628&old_path=%2Fmainwp%2Ftags%2F4.5.1.3)

---

# Changes from [mainwp/tags/4.5.1.2](/browser/mainwp/tags/4.5.1.2?rev=2996628 "Show entry in browser") at [r2996628](/changeset/2996628 "Show full changeset") to [mainwp/tags/4.5.1.3](/browser/mainwp/tags/4.5.1.3?rev=2996628 "Show entry in browser") at [r2996628](/changeset/2996628 "Show full changeset")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[mainwp/tags/4.5.1.3](/browser/mainwp/tags/4.5.1.3?rev=2996628)
Files:

20 edited

* [assets/css/mainwp.css](/browser/mainwp/trunk/assets/css/mainwp.css?rev=2972323 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [assets/css/themes/mainwp-dark-theme.css](/browser/mainwp/trunk/assets/css/themes/mainwp-dark-theme.css?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [class/class-mainwp-manage-sites-view.php](/browser/mainwp/trunk/class/class-mainwp-manage-sites-view.php?rev=2972323 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [class/class-mainwp-post-site-handler.php](/browser/mainwp/trunk/class/class-mainwp-post-site-handler.php?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [class/class-mainwp-sync.php](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2972323 "Show entry in browser")
  (modified)
  ([5 diffs](#file4 "Show differences"))
* [class/class-mainwp-system-cron-jobs.php](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323 "Show entry in browser")
  (modified)
  ([26 diffs](#file5 "Show differences"))
* [class/class-mainwp-system-handler.php](/browser/mainwp/trunk/class/class-mainwp-system-handler.php?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [class/class-mainwp-system-utility.php](/browser/mainwp/trunk/class/class-mainwp-system-utility.php?rev=2972323 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [class/class-mainwp-system-view.php](/browser/mainwp/trunk/class/class-mainwp-system-view.php?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [class/class-mainwp-system.php](/browser/mainwp/trunk/class/class-mainwp-system.php?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [class/class-mainwp-ui.php](/browser/mainwp/trunk/class/class-mainwp-ui.php?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [mainwp.php](/browser/mainwp/trunk/mainwp.php?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [pages/page-mainwp-manage-groups.php](/browser/mainwp/trunk/pages/page-mainwp-manage-groups.php?rev=2972323 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [pages/page-mainwp-updates-per-group.php](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323 "Show entry in browser")
  (modified)
  ([9 diffs](#file13 "Show differences"))
* [pages/page-mainwp-updates-per-item.php](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2972323 "Show entry in browser")
  (modified)
  ([6 diffs](#file14 "Show differences"))
* [pages/page-mainwp-updates-per-site.php](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2972323 "Show entry in browser")
  (modified)
  ([7 diffs](#file15 "Show differences"))
* [readme.txt](/browser/mainwp/trunk/readme.txt?rev=2972323 "Show entry in browser")
  (modified)
  ([2 diffs](#file16 "Show differences"))
* [widgets/widget-mainwp-client-overview-custom-info.php](/browser/mainwp/trunk/widgets/widget-mainwp-client-overview-custom-info.php?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [widgets/widget-mainwp-site-actions.php](/browser/mainwp/trunk/widgets/widget-mainwp-site-actions.php?rev=2972323 "Show entry in browser")
  (modified)
  ([1 diff](#file18 "Show differences"))
* [widgets/widget-mainwp-updates-overview.php](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323 "Show entry in browser")
  (modified)
  ([8 diffs](#file19 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [mainwp/tags/4.5.1.3/assets/css/mainwp.css](/changeset/2972323/mainwp/trunk/assets/css/mainwp.css?old=2967176&old_path=mainwp%2Ftrunk%2Fassets%2Fcss%2Fmainwp.css "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/assets/css/mainwp.css")

  | [r2996628](/browser/mainwp/trunk/assets/css/mainwp.css?rev=2967176#L16 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/assets/css/mainwp.css?rev=2972323#L16 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | .mainwp-side-content { |
  | 17 | 17 | height: 100%; |
  | 18 |  | width: ~~300~~px; |
  |  | 18 | width: 299.5px; |
  | 19 | 19 | float: right; |
  | 20 | 20 | border-left: 1px solid #dadada; |
  | […](/browser/mainwp/trunk/assets/css/mainwp.css?rev=2967176#L568) | […](/browser/mainwp/trunk/assets/css/mainwp.css?rev=2972323#L568) |  |
  | 568 | 568 |  |
  | 569 | 569 | /\* Manage Extensions \*/ |
  |  | 570 |  |
  |  | 571 | #mainwp-manage-extensions.ui.segment { |
  |  | 572 | padding: 0px; |
  |  | 573 | } |
  |  | 574 |  |
  |  | 575 | #mainwp-manage-extensions .mainwp-main-content { |
  |  | 576 | padding: 1em; |
  |  | 577 | } |
  | 570 | 578 |  |
  | 571 | 579 | .mainwp-disabled-extension .header, |
* ## [mainwp/tags/4.5.1.3/assets/css/themes/mainwp-dark-theme.css](/changeset/2972323/mainwp/trunk/assets/css/themes/mainwp-dark-theme.css?old=2963222&old_path=mainwp%2Ftrunk%2Fassets%2Fcss%2Fthemes%2Fmainwp-dark-theme.css "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/assets/css/themes/mainwp-dark-theme.css")

  | [r2996628](/browser/mainwp/trunk/assets/css/themes/mainwp-dark-theme.css?rev=2963222#L656 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/assets/css/themes/mainwp-dark-theme.css?rev=2972323#L656 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 656 | 656 | .mainwp-ui.mainwp-custom-theme .ui.button.green.basic { |
  | 657 | 657 | background-color: var(--background-color-1); |
  | 658 |  | ~~border: 1px solid var(--accent-color);~~ |
  | 659 | 658 | color: var(--accent-color); |
  | 660 |  | box-shadow: none; |
  | 661 |  | -webkit-box-shadow: none; |
  |  | 659 | -webkit-box-shadow: inset 0px 0px 0px 1px var(--accent-color); |
  |  | 660 | -moz-box-shadow: inset 0px 0px 0px 1px var(--accent-color); |
  |  | 661 | box-shadow: inset 0px 0px 0px 1px var(--accent-color); |
  | 662 | 662 | } |
  | 663 | 663 |  |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-manage-sites-view.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-manage-sites-view.php?old=2963222&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-manage-sites-view.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-manage-sites-view.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-manage-sites-view.php?rev=2963222#L1510 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-manage-sites-view.php?rev=2972323#L1510 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 1510 | 1510 | \* @uses  \MainWP\Dashboard\MainWP\_Utility::esc\_content() |
  | 1511 | 1511 | \*/ |
  | 1512 |  | public static function m\_reconnect\_site( $website, $sync\_first = true ) { |
  |  | 1512 | public static function m\_reconnect\_site( $website, $sync\_first = true ) { //phpcs:ignore -- complex method. |
  | 1513 | 1513 | if ( MainWP\_System\_Utility::can\_edit\_website( $website ) ) { |
  | 1514 | 1514 | try { |
  | 1515 |  | if ( $sync\_first && MainWP\_Sync::sync\_site( $website, true ) ) { |
  | 1516 |  | return true; |
  |  | 1515 | if ( $sync\_first ) { |
  |  | 1516 | $success = MainWP\_Sync::sync\_site( $website, true ); |
  |  | 1517 | if ( ! $success ) { |
  |  | 1518 | // to compatible. |
  |  | 1519 | $alg = is\_object( $website ) && property\_exists( $website, 'signature\_algo' ) && ! empty( $website->signature\_algo ) ? $website->signature\_algo : false; |
  |  | 1520 | if ( empty( $alg ) && is\_object( $website ) ) { |
  |  | 1521 | MainWP\_DB::instance()->update\_website\_option( $website, 'signature\_algo', 9999 ); // use global. |
  |  | 1522 | $website = MainWP\_DB::instance()->get\_website\_by\_id( $website->id ); |
  |  | 1523 | $success = MainWP\_Sync::sync\_site( $website, true ); |
  |  | 1524 | } |
  |  | 1525 | } |
  |  | 1526 |  |
  |  | 1527 | if ( $success ) { |
  |  | 1528 | /\*\* |
  |  | 1529 | \* Fires immediately after reconnect website. |
  |  | 1530 | \* |
  |  | 1531 | \* @since 4.5.1.1 |
  |  | 1532 | \* |
  |  | 1533 | \* @param object   $website  website data. |
  |  | 1534 | \*/ |
  |  | 1535 | do\_action( 'mainwp\_site\_reconnected', $website ); |
  |  | 1536 |  |
  |  | 1537 | return true; |
  |  | 1538 | } |
  | 1517 | 1539 | } |
  | 1518 | 1540 |  |
  | […](/browser/mainwp/trunk/class/class-mainwp-manage-sites-view.php?rev=2963222#L1774) | […](/browser/mainwp/trunk/class/class-mainwp-manage-sites-view.php?rev=2972323#L1796) |  |
  | 1774 | 1796 | $obj\_site = (object) array( 'id' => $id ); |
  | 1775 | 1797 | MainWP\_DB::instance()->update\_website\_option( $obj\_site, 'added\_timestamp', time() ); |
  |  | 1798 | MainWP\_DB::instance()->update\_website\_option( $obj\_site, 'signature\_algo', 9999 ); // use global. |
  | 1776 | 1799 | } |
  | 1777 | 1800 |  |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-post-site-handler.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-post-site-handler.php?old=2953884&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-post-site-handler.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-post-site-handler.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-post-site-handler.php?rev=2953884#L121 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-post-site-handler.php?rev=2972323#L121 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 121 | 121 | $this->secure\_request( 'mainwp\_group\_sites\_add' ); |
  | 122 | 122 | // phpcs:disable WordPress.Security.NonceVerification |
  | 123 |  | $newName        = sanitize\_text\_field( wp\_unslash( $\_POST['newName'] ) ); |
  | 124 |  | $newColor       = sanitize\_text\_field( wp\_unslash( $\_POST['newColor'] ) ); |
  |  | 123 | $newName   = sanitize\_text\_field( wp\_unslash( $\_POST['newName'] ) ); |
  |  | 124 | $tmp\_color = wp\_unslash( $\_POST['newColor'] ); |
  |  | 125 | $newColor  = sanitize\_hex\_color( $tmp\_color ); |
  |  | 126 | if ( empty( $newColor ) && ! empty( $tmp\_color ) ) { |
  |  | 127 | $newColor = '#cce2ff'; // default. |
  |  | 128 | } |
  | 125 | 129 | $selected\_sites = isset( $\_POST['selected\_sites'] ) && is\_array( $\_POST['selected\_sites'] ) ? array\_map( 'intval', wp\_unslash( $\_POST['selected\_sites'] ) ) : array(); |
  | 126 | 130 | $selected\_sites = array\_filter( $selected\_sites ); |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-sync.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-sync.php?old=2963222&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-sync.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-sync.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2963222#L270 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2972323#L270 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 270 | 270 |  |
  | 271 | 271 | if ( isset( $information['wp\_updates'] ) && null != $information['wp\_updates'] ) { |
  | 272 |  | ~~$current\_upgrades = MainWP\_DB::instance()->get\_website\_option( $pWebsite, 'wp\_upgrades' );~~ |
  | 273 |  | ~~$current\_upgrades = ( '' != $current\_upgrades ) ? json\_decode( $current\_upgrades, true ) : array();~~ |
  | 274 |  |  |
  | 275 | 272 | MainWP\_DB::instance()->update\_website\_option( |
  | 276 | 273 | $pWebsite, |
  | […](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2963222#L280) | […](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2972323#L277) |  |
  | 280 | 277 | 'current'         => $information['wpversion'], |
  | 281 | 278 | 'new'             => $information['wp\_updates'], |
  | 282 |  | ~~'check\_timestamp' => isset( $current\_upgrades['check\_timestamp'] ) ? $current\_upgrades['check\_timestamp'] : time(),~~ |
  | 283 | 279 | ) |
  | 284 | 280 | ) |
  | […](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2963222#L290) | […](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2972323#L286) |  |
  | 290 | 286 |  |
  | 291 | 287 | if ( isset( $information['plugin\_updates'] ) ) { |
  | 292 |  | $current\_upgrades = ( '' != $pWebsite->plugin\_upgrades ) ? json\_decode( $pWebsite->plugin\_upgrades, true ) : array(); |
  | 293 |  | $update\_values    = array(); |
  |  | 288 | $update\_values = array(); |
  | 294 | 289 | if ( is\_array( $information['plugin\_updates'] ) ) { |
  | 295 | 290 | foreach ( $information['plugin\_updates'] as $file => $update ) { |
  | 296 |  | ~~if ( isset( $current\_upgrades[ $file ] ) && isset( $current\_upgrades[ $file ]['check\_timestamp'] ) ) {~~ |
  | 297 |  | ~~$update['check\_timestamp'] = $current\_upgrades[ $file ]['check\_timestamp'];~~ |
  | 298 |  | ~~} else {~~ |
  | 299 |  | ~~$update['check\_timestamp'] = time();~~ |
  | 300 |  | ~~}~~ |
  | 301 | 291 | $update\_values[ $file ] = $update; |
  | 302 | 292 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2963222#L307) | […](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2972323#L297) |  |
  | 307 | 297 |  |
  | 308 | 298 | if ( isset( $information['theme\_updates'] ) ) { |
  | 309 |  | $current\_upgrades = ( '' != $pWebsite->theme\_upgrades ) ? json\_decode( $pWebsite->theme\_upgrades, true ) : array(); |
  | 310 |  | $update\_values    = array(); |
  |  | 299 | $update\_values = array(); |
  | 311 | 300 | if ( is\_array( $information['theme\_updates'] ) ) { |
  | 312 | 301 | foreach ( $information['theme\_updates'] as $file => $update ) { |
  | 313 |  | ~~if ( isset( $current\_upgrades[ $file ] ) && isset( $current\_upgrades[ $file ]['check\_timestamp'] ) ) {~~ |
  | 314 |  | ~~$update['check\_timestamp'] = $current\_upgrades[ $file ]['check\_timestamp'];~~ |
  | 315 |  | ~~} else {~~ |
  | 316 |  | ~~$update['check\_timestamp'] = time();~~ |
  | 317 |  | ~~}~~ |
  | 318 | 302 | $update\_values[ $file ] = $update; |
  | 319 | 303 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2963222#L548) | […](/browser/mainwp/trunk/class/class-mainwp-sync.php?rev=2972323#L532) |  |
  | 548 | 532 | $error = true; |
  | 549 | 533 | if ( $pAllowDisconnect ) { |
  | 550 |  | $websiteSyncValues['sync\_errors'] = esc\_html\_\_( 'Undefined error! Please, reinstall the MainWP Child plugin on the child site.', 'mainwp' ); |
  |  | 534 | $sync\_errors                      = esc\_html\_\_( 'Undefined error! Please, reinstall the MainWP Child plugin on the child site.', 'mainwp' ); |
  |  | 535 | $websiteSyncValues['sync\_errors'] = $sync\_errors; |
  | 551 | 536 | } |
  | 552 | 537 | } |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-system-cron-jobs.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?old=2963222&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-system-cron-jobs.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-system-cron-jobs.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L241 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L241 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 241 | 241 | \*/ |
  | 242 | 242 | public static function get\_next\_time\_automatic\_update\_to\_show() { |
  | 243 |  |  |
  | 244 |  | $frequencyDailyUpdate = get\_option( 'mainwp\_frequencyDailyUpdate' ); |
  | 245 |  |  |
  | 246 |  | if ( $frequencyDailyUpdate <= 0 ) { |
  | 247 |  | $frequencyDailyUpdate = 1; |
  | 248 |  | } |
  | 249 |  | $lasttimeScheduleStartAutomaticUpdate = get\_option( 'mainwp\_updatescheck\_start\_last\_schedule\_timestamp' ); |
  | 250 |  |  |
  | 251 |  | $today\_count = get\_option( 'mainwp\_updatescheck\_today\_count' ); |
  | 252 |  |  |
  | 253 |  | self::check\_auto\_update\_conditionals\_to\_run( $next\_time, $run\_timestamp, $frequence\_period\_in\_seconds, $frequencyDailyUpdate, $lasttimeScheduleStartAutomaticUpdate, $today\_count ); |
  |  | 243 | // to calculate next\_time. |
  |  | 244 | self::check\_conds\_to\_run\_auto\_update( $next\_time, $run\_timestamp, $frequence\_period\_in\_seconds ); |
  | 254 | 245 | return $next\_time; |
  | 255 | 246 | } |
  | 256 | 247 |  |
  | 257 | 248 | /\*\* |
  | 258 |  | \* Method check\_~~auto\_update\_conditionals\_to\_run~~() |
  |  | 249 | \* Method check\_conds\_to\_run\_auto\_update() |
  | 259 | 250 | \* |
  | 260 | 251 | \* To check conditionals to run auto update checking. |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L263) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L254) |  |
  | 263 | 254 | \* @param int $run\_timestamp Runtime daily. |
  | 264 | 255 | \* @param int $frequence\_in\_seconds frequence running in seconds. |
  | 265 |  | ~~\* @param int $freqDailyUpdate Number of times daily to auto check.~~ |
  | 266 |  | ~~\* @param int $lasttimeScheStartAutoUpdate Lasttime Schedule Start Automatic Update.~~ |
  | 267 |  | ~~\* @param int $today\_count Today count run times.~~ |
  | 268 | 256 | \* |
  | 269 | 257 | \* @return bool Valid or not to run. |
  | 270 | 258 | \*/ |
  | 271 |  | public static function check\_~~auto\_update\_conditionals\_to\_run( &$next\_time, &$run\_timestamp, &$frequence\_in\_seconds, $freqDailyUpdate, $lasttimeScheStartAutoUpdate, $today\_count~~ ) { |
  |  | 259 | public static function check\_conds\_to\_run\_auto\_update( &$next\_time, &$run\_timestamp = false, &$frequence\_in\_seconds = false ) { |
  | 272 | 260 | $local\_timestamp = MainWP\_Utility::get\_timestamp(); |
  | 273 | 261 | $today\_0h = strtotime( date("Y-m-d 00:00:00", $local\_timestamp) ); // phpcs:ignore -- to localtime. |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L282) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L270) |  |
  | 282 | 270 | } |
  | 283 | 271 |  |
  |  | 272 | $lasttimeScheStartAutoUpdate = (int) get\_option( 'mainwp\_updatescheck\_start\_last\_schedule\_timestamp', 0 ); |
  |  | 273 | $frequency\_daily             = (int) get\_option( 'mainwp\_frequencyDailyUpdate', 1 ); |
  |  | 274 |  |
  |  | 275 | if ( $frequency\_daily <= 0 ) { |
  |  | 276 | $frequency\_daily = 1; |
  |  | 277 | } |
  |  | 278 |  |
  |  | 279 | if ( $frequency\_daily > 1 ) { |
  |  | 280 | $last\_run\_timestamp\_today = get\_option( 'mainwp\_updatescheck\_last\_run\_timestamp\_today', false ); |
  |  | 281 | $frequence\_in\_seconds     = intval( DAY\_IN\_SECONDS / $frequency\_daily ); |
  |  | 282 | if ( $frequence\_in\_seconds < 2 \* HOUR\_IN\_SECONDS ) { |
  |  | 283 | $frequence\_in\_seconds = 2 \* HOUR\_IN\_SECONDS; |
  |  | 284 | } |
  |  | 285 | } else { |
  |  | 286 | $frequence\_in\_seconds = DAY\_IN\_SECONDS - 1; |
  |  | 287 | } |
  |  | 288 |  |
  |  | 289 | if ( $next\_time < $lasttimeScheStartAutoUpdate + $frequence\_in\_seconds ) { |
  |  | 290 | $next\_time = $lasttimeScheStartAutoUpdate + $frequence\_in\_seconds; |
  |  | 291 | } |
  |  | 292 |  |
  |  | 293 | if ( $next\_time < $local\_timestamp ) { |
  |  | 294 | $next\_time = $local\_timestamp; |
  |  | 295 | } |
  |  | 296 |  |
  |  | 297 | if ( $next\_time < $run\_timestamp ) { |
  |  | 298 | $next\_time = $run\_timestamp; |
  |  | 299 | } |
  |  | 300 |  |
  | 284 | 301 | $check\_to\_run = false; |
  | 285 |  |  |
  | 286 |  | if ( $freqDailyUpdate > 1 ) { // [sch-job-1] check this if frequency > 1 only. |
  | 287 |  | $last\_run\_timestamp\_today = get\_option( 'mainwp\_updatescheck\_last\_run\_timestamp\_today', false ); // to fix. |
  | 288 |  | $frequence\_in\_seconds     = ( $today\_end - $run\_timestamp ) / ( $freqDailyUpdate - 1 ); // [sch-job-2] new way to set run frequency. |
  | 289 |  | if ( $frequence\_in\_seconds < HOUR\_IN\_SECONDS ) { |
  | 290 |  | $frequence\_in\_seconds = HOUR\_IN\_SECONDS; |
  | 291 |  | } |
  | 292 |  |  |
  | 293 |  | while ( $next\_time < $lasttimeScheStartAutoUpdate + $frequence\_in\_seconds - 5 \* MINUTE\_IN\_SECONDS ) { // [sch-job-3] to fix. |
  | 294 |  | $next\_time += $frequence\_in\_seconds; |
  | 295 |  | } |
  | 296 |  |  |
  | 297 |  | // to fix. |
  | 298 |  | if ( $local\_timestamp > $run\_timestamp && $local\_timestamp < $run\_timestamp + $frequence\_in\_seconds && $local\_timestamp > $last\_run\_timestamp\_today ) { // [sch-job-4]. |
  | 299 |  | $next\_time = $local\_timestamp; |
  | 300 |  | } |
  | 301 |  |  |
  | 302 |  | if ( $local\_timestamp >= $next\_time ) { // [sch-job-5]. |
  | 303 |  | $next\_time    = $local\_timestamp; // to show run time. |
  | 304 |  | $check\_to\_run = true; |
  | 305 |  | } else { |
  | 306 |  | // to fix. |
  | 307 |  | if ( $local\_timestamp > $last\_run\_timestamp\_today && ( ( $today\_count + 1 ) == $freqDailyUpdate ) ) { |
  | 308 |  | $next\_time    = $local\_timestamp; // to show run time. |
  | 309 |  | $check\_to\_run = true; |
  | 310 |  | } |
  | 311 |  | } |
  | 312 |  |  |
  | 313 |  | if ( $next\_time > $today\_end ) { |
  | 314 |  | $next\_time = $run\_timestamp + DAY\_IN\_SECONDS; // [sch-job-7] next day run\_timestamp, to show run time. |
  | 315 |  | } |
  | 316 |  |  |
  | 317 |  | if ( ! $check\_to\_run ) { |
  | 318 |  | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check :: wait frequency today :: ' . date( 'Y-m-d H:i:s', $local\_timestamp ) ); //phpcs:ignore -- local time. |
  | 319 |  | } else { |
  | 320 |  | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check :: running frequency now :: ' . date( 'Y-m-d H:i:s', $local\_timestamp ) ); //phpcs:ignore -- local time. |
  | 321 |  | } |
  | 322 |  | } elseif ( $next\_time < $local\_timestamp ) { // [sch-job-6]. |
  | 323 |  |  |
  | 324 |  | $frequence\_in\_seconds = $today\_end - $run\_timestamp; |
  | 325 |  | if ( $next\_time > $lasttimeScheStartAutoUpdate + $frequence\_in\_seconds - 5 \* MINUTE\_IN\_SECONDS ) { |
  | 326 |  | $next\_time = $local\_timestamp; // any minute. |
  | 327 |  | } else { |
  | 328 |  | $next\_time = $run\_timestamp + DAY\_IN\_SECONDS; // [sch-job-7] next day run\_timestamp. |
  | 329 |  | } |
  | 330 |  |  |
  | 331 |  | if ( $local\_timestamp >= $next\_time ) { |
  | 332 |  | $check\_to\_run = true; |
  | 333 |  | } |
  | 334 |  | } |
  |  | 302 | if ( $local\_timestamp >= $next\_time ) { |
  |  | 303 | $check\_to\_run = true; |
  |  | 304 | } |
  |  | 305 |  |
  |  | 306 | if ( $next\_time > $today\_end ) { |
  |  | 307 | $next\_time = $run\_timestamp + DAY\_IN\_SECONDS; // next day run\_timestamp, to show run time. |
  |  | 308 | } |
  |  | 309 |  |
  | 335 | 310 | return $check\_to\_run; |
  | 336 | 311 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L383) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L358) |  |
  | 383 | 358 | $local\_timestamp = MainWP\_Utility::get\_timestamp(); |
  | 384 | 359 |  |
  | 385 |  | $frequencyDailyUpdate = get\_option( 'mainwp\_frequencyDailyUpdate' ); |
  |  | 360 | $frequencyDailyUpdate = get\_option( 'mainwp\_frequencyDailyUpdate', 1 ); |
  | 386 | 361 | if ( $frequencyDailyUpdate <= 0 ) { |
  | 387 | 362 | $frequencyDailyUpdate = 1; |
  | 388 | 363 | } |
  | 389 | 364 |  |
  | 390 |  | ~~$today\_count = get\_option( 'mainwp\_updatescheck\_today\_count' );~~ |
  | 391 |  |  |
  | 392 | 365 | $today\_m\_y = date( 'd/m/Y', $local\_timestamp ); //phpcs:ignore -- local time. |
  | 393 | 366 |  |
  | 394 |  | $lasttimeAutomaticUpdate              = get\_option( 'mainwp\_updatescheck\_last\_timestamp' ); |
  | 395 |  | $lasttimeStartAutomaticUpdate         = get\_option( 'mainwp\_updatescheck\_start\_last\_timestamp' ); |
  | 396 |  | $lasttimeScheduleStartAutomaticUpdate = get\_option( 'mainwp\_updatescheck\_start\_last\_schedule\_timestamp' ); |
  | 397 |  | $mainwpLastAutomaticUpdate            = get\_option( 'mainwp\_updatescheck\_last' ); |
  | 398 |  | $lasttimeDailyDigest                  = get\_option( 'mainwp\_updatescheck\_dailydigest\_last\_timestamp' ); |
  | 399 |  | $mainwpLastDailydigest                = get\_option( 'mainwp\_dailydigest\_last' ); |
  |  | 367 | $lasttimeAutomaticUpdate      = get\_option( 'mainwp\_updatescheck\_last\_timestamp' ); |
  |  | 368 | $lasttimeStartAutomaticUpdate = get\_option( 'mainwp\_updatescheck\_start\_last\_timestamp' ); |
  |  | 369 | $mainwpLastAutomaticUpdate    = get\_option( 'mainwp\_updatescheck\_last' ); |
  |  | 370 | $lasttimeDailyDigest          = get\_option( 'mainwp\_updatescheck\_dailydigest\_last\_timestamp' ); |
  |  | 371 | $mainwpLastDailydigest        = get\_option( 'mainwp\_dailydigest\_last' ); |
  | 400 | 372 |  |
  | 401 | 373 | /\*\* |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L442) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L414) |  |
  | 442 | 414 | MainWP\_Utility::update\_option( 'mainwp\_updatescheck\_ready\_sendmail', '' ); // here to fix. |
  | 443 | 415 |  |
  | 444 |  | ~~MainWP\_Logger::instance()->debug( 'CRON :: updates check :: got to the mail part' );~~ |
  | 445 |  |  |
  | 446 | 416 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: got to the daily digest mail part' ); |
  | 447 | 417 |  |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L479) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L449) |  |
  | 479 | 449 | } |
  | 480 | 450 |  |
  | 481 |  | $valid\_to\_run = self::check\_~~auto\_update\_conditionals\_to\_run( $next\_time, $run\_timestamp, $frequence\_period\_in\_seconds, $frequencyDailyUpdate, $lasttimeScheduleStartAutomaticUpdate, $today\_count~~ ); |
  |  | 451 | $valid\_to\_run = self::check\_conds\_to\_run\_auto\_update( $next\_time, $run\_timestamp, $frequence\_period\_in\_seconds ); |
  | 482 | 452 |  |
  | 483 | 453 | $mainwpAutomaticDailyUpdate = get\_option( 'mainwp\_automaticDailyUpdate' ); |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L500) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L470) |  |
  | 500 | 470 | $run\_hours\_interval = false; |
  | 501 | 471 | if ( $lasttimeAutomaticUpdate && ( $lasttimeAutomaticUpdate + $hoursIntervalAutomaticUpdate \* 3600 > $local\_timestamp ) ) { |
  | 502 |  | ~~MainWP\_Logger::instance()->debug( 'CRON :: updates check :: already updated hours interval' );~~ |
  | 503 | 472 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check :: already updated hours interval' ); |
  | 504 | 473 | return; |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L515) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L484) |  |
  | 515 | 484 | } |
  | 516 | 485 |  |
  |  | 486 | $loc\_datetime = MainWP\_Utility::format\_timestamp( $local\_timestamp ); |
  | 517 | 487 | if ( ! $run\_valid ) { |
  | 518 |  | MainWP\_Logger::instance()->debug( 'CRON :: updates check :: waiting conditionals to run.' ); |
  | 519 |  | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check :: waiting conditionals to run.' ); |
  |  | 488 | $last\_wait = get\_option( 'mainwp\_log\_wait\_lasttime', 0 ); |
  |  | 489 | $time      = time(); |
  |  | 490 | // do not logging much in short time. |
  |  | 491 | if ( $last\_wait + 15 \* MINUTE\_IN\_SECONDS < $time ) { |
  |  | 492 | $run\_datetime  = MainWP\_Utility::format\_timestamp( $run\_timestamp ); |
  |  | 493 | $next\_datetime = MainWP\_Utility::format\_timestamp( $next\_time ); |
  |  | 494 | MainWP\_Utility::update\_option( 'mainwp\_log\_wait\_lasttime', $time ); //phpcs:ignore -- local time. |
  |  | 495 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check :: wait frequency today :: [frequencyDailyUpdate=' . $frequencyDailyUpdate . '] :: [run\_timestamp=' . $run\_datetime . ']' ); |
  |  | 496 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check :: [frequence=' . gmdate( "H:i:s", $frequence\_period\_in\_seconds ) . '] :: [local\_timestamp=' . $loc\_datetime . '] >>> [next\_time=' . $next\_datetime . ']'); //phpcs:ignore -- local time. |
  |  | 497 | } |
  | 520 | 498 | return; |
  |  | 499 | } else { |
  |  | 500 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check :: running frequency now :: ' . $loc\_datetime ); |
  | 521 | 501 | } |
  | 522 | 502 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L525) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L505) |  |
  | 525 | 505 | MainWP\_Utility::update\_option( 'mainwp\_updatescheck\_start\_last\_timestamp', $local\_timestamp ); // start new update checking. |
  | 526 | 506 |  |
  | 527 |  | while ( $lasttimeScheduleStartAutomaticUpdate < $local\_timestamp ) { |
  | 528 |  | $lasttimeScheduleStartAutomaticUpdate += $frequence\_period\_in\_seconds; |
  | 529 |  | } |
  | 530 |  |  |
  | 531 |  | if ( $lasttimeScheduleStartAutomaticUpdate > $local\_timestamp - HOUR\_IN\_SECONDS ) { |
  | 532 |  | $lasttimeScheduleStartAutomaticUpdate -= $frequence\_period\_in\_seconds; // to fix logging schedule start time. |
  | 533 |  | } |
  | 534 |  |  |
  | 535 |  | MainWP\_Utility::update\_option( 'mainwp\_updatescheck\_start\_last\_schedule\_timestamp', $lasttimeScheduleStartAutomaticUpdate ); // start new update checking. |
  |  | 507 | MainWP\_Utility::update\_option( 'mainwp\_updatescheck\_start\_last\_schedule\_timestamp', $local\_timestamp ); // start new update checking. |
  | 536 | 508 |  |
  | 537 | 509 | // log last run. |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L553) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L525) |  |
  | 553 | 525 |  |
  | 554 | 526 | if ( $local\_timestamp > $run\_timestamp && $local\_timestamp < $run\_timestamp + $frequence\_period\_in\_seconds ) { |
  | 555 |  | ~~$today\_count = 1; // first run of today.~~ |
  | 556 | 527 | if ( $frequencyDailyUpdate > 1 ) { |
  | 557 | 528 | $last\_run\_timestamp\_today = $run\_timestamp + $frequence\_period\_in\_seconds \* ( $frequencyDailyUpdate - 1 ); |
  | 558 | 529 | MainWP\_Utility::update\_option( 'mainwp\_updatescheck\_last\_run\_timestamp\_today', $last\_run\_timestamp\_today ); |
  | 559 | 530 | } |
  | 560 |  | } elseif ( $today\_count < $frequencyDailyUpdate ) { |
  | 561 |  | $today\_count++; |
  | 562 |  | } |
  | 563 |  | MainWP\_Utility::update\_option( 'mainwp\_updatescheck\_today\_count', $today\_count ); |
  |  | 531 | } |
  | 564 | 532 |  |
  | 565 | 533 | $this->refresh\_saved\_fields(); |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L576) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L544) |  |
  | 576 | 544 |  |
  | 577 | 545 | MainWP\_Logger::instance()->info( 'CRON :: updates check found' . count( $checkupdate\_websites ) . ' websites' ); |
  | 578 |  |  |
  | 579 |  | ~~MainWP\_Logger::instance()->debug( 'CRON :: backup task running :: found ' . ( count( $checkupdate\_websites ) - count( $websites ) ) . ' websites' );~~ |
  | 580 |  | ~~MainWP\_Logger::instance()->debug( 'CRON :: updates check :: found ' . count( $checkupdate\_websites ) . ' websites' );~~ |
  | 581 |  |  |
  | 582 | 546 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check found ' . count( $checkupdate\_websites ) . ' websites' ); |
  | 583 | 547 |  |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L613) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L577) |  |
  | 613 | 577 | $busyCounter = MainWP\_DB::instance()->get\_websites\_count\_where\_dts\_automatic\_sync\_smaller\_then\_start( $lasttimeStartAutomaticUpdate ); |
  | 614 | 578 | if ( 0 != $busyCounter ) { |
  | 615 |  | ~~MainWP\_Logger::instance()->debug( 'CRON :: busy counter :: found ' . $busyCounter . ' websites' );~~ |
  | 616 | 579 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: busy counter :: found ' . $busyCounter . ' websites' ); |
  | 617 | 580 | $lastAutomaticUpdate = MainWP\_DB::instance()->get\_websites\_last\_automatic\_sync(); |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L643) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L606) |  |
  | 643 | 606 | return; |
  | 644 | 607 | } else { |
  | 645 |  |  |
  | 646 |  | ~~MainWP\_Logger::instance()->log\_update\_check( 'CRON :: auto updates check is running' );~~ |
  | 647 | 608 |  |
  | 648 | 609 | if ( ! $updatecheck\_running ) { |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L731) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L692) |  |
  | 731 | 692 | $websiteCoreUpgrades = MainWP\_DB::instance()->get\_website\_option( $website, 'wp\_upgrades' ); |
  | 732 | 693 | $websiteCoreUpgrades = ( '' != $websiteCoreUpgrades ) ? json\_decode( $websiteCoreUpgrades, true ) : array(); |
  |  | 694 |  |
  |  | 695 | $websiteCoreUpdateCheck    = 0; |
  |  | 696 | $websitePluginsUpdateCheck = array(); |
  |  | 697 | $websiteThemesUpdateCheck  = array(); |
  |  | 698 |  |
  |  | 699 | if ( ! empty( $delay\_autoupdate ) ) { |
  |  | 700 | $websiteCoreUpdateCheck    = MainWP\_DB::instance()->get\_website\_option( $website, 'core\_update\_check' ); |
  |  | 701 | $websitePluginsUpdateCheck = MainWP\_DB::instance()->get\_website\_option( $website, 'plugins\_update\_check' ); |
  |  | 702 | $websiteThemesUpdateCheck  = MainWP\_DB::instance()->get\_website\_option( $website, 'themes\_update\_check' ); |
  |  | 703 |  |
  |  | 704 | $websiteCoreUpdateCheck    = intval( $websiteCoreUpdateCheck ); |
  |  | 705 | $websitePluginsUpdateCheck = ( '' != $websitePluginsUpdateCheck ) ? json\_decode( $websitePluginsUpdateCheck, true ) : array(); |
  |  | 706 | $websiteThemesUpdateCheck  = ( '' != $websiteThemesUpdateCheck ) ? json\_decode( $websiteThemesUpdateCheck, true ) : array(); |
  |  | 707 | } |
  |  | 708 |  |
  |  | 709 | if ( ! is\_array( $websitePluginsUpdateCheck ) ) { |
  |  | 710 | $websitePluginsUpdateCheck = array(); |
  |  | 711 | } |
  |  | 712 |  |
  |  | 713 | if ( ! is\_array( $websiteThemesUpdateCheck ) ) { |
  |  | 714 | $websiteThemesUpdateCheck = array(); |
  |  | 715 | } |
  | 733 | 716 |  |
  | 734 | 717 | if ( isset( $websiteCoreUpgrades['current'] ) ) { |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L746) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L729) |  |
  | 746 | 729 | $item['trusted'] = 1; |
  | 747 | 730 | if ( $newUpdate ) { |
  | 748 |  | $item['new']     = 1; |
  | 749 |  | $coreNewUpdate[] = $item; |
  |  | 731 | $item['new']            = 1; |
  |  | 732 | $coreNewUpdate[]        = $item; |
  |  | 733 | $websiteCoreUpdateCheck = time(); |
  | 750 | 734 | } else { |
  | 751 | 735 | $item['new'] = 0; |
  | 752 |  | if ( ~~isset( $websiteCoreUpgrades['check\_timestamp']~~ ) ) { |
  | 753 |  | if ( time() > $delay\_autoupdate \* DAY\_IN\_SECONDS + intval( $websiteCoreUp~~grades['check\_timestamp']~~ ) ) { |
  |  | 736 | if ( ! empty( $websiteCoreUpdateCheck ) && ! empty( $delay\_autoupdate ) ) { |
  |  | 737 | if ( time() > $delay\_autoupdate \* DAY\_IN\_SECONDS + intval( $websiteCoreUpdateCheck ) ) { |
  | 754 | 738 | $coreToUpdateNow[] = $website->id; |
  | 755 | 739 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L769) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L753) |  |
  | 769 | 753 | $ignoredCoreToUpdate[] = $item; |
  | 770 | 754 | } |
  |  | 755 | $websiteCoreUpdateCheck = 0; |
  | 771 | 756 | } |
  | 772 | 757 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L839) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L824) |  |
  | 839 | 824 | $item['new']        = 1; |
  | 840 | 825 | $pluginsNewUpdate[] = $item; |
  |  | 826 | if ( ! empty( $delay\_autoupdate ) ) { |
  |  | 827 | $websitePluginsUpdateCheck[ $pluginSlug ] = time(); |
  |  | 828 | } |
  | 841 | 829 | } else { |
  | 842 |  | $item['new'] = 0; |
  | 843 |  | if ( isset( $pluginInfo['check\_timestamp'] ) ) { |
  | 844 |  | if ( time() > $delay\_autoupdate \* DAY\_IN\_SECONDS + intval( $pluginInfo['check\_timestamp'] ) ) { |
  |  | 830 | $item['new']     = 0; |
  |  | 831 | $check\_timestamp = isset( $websitePluginsUpdateCheck[ $pluginSlug ] ) ? $websitePluginsUpdateCheck[ $pluginSlug ] : 0; |
  |  | 832 | if ( ! empty( $check\_timestamp ) && ! empty( $delay\_autoupdate ) ) { |
  |  | 833 | if ( time() > $delay\_autoupdate \* DAY\_IN\_SECONDS + intval( $check\_timestamp ) ) { |
  | 845 | 834 | $pluginsToUpdateNow[ $website->id ][] = $pluginSlug; |
  | 846 | 835 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L860) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L849) |  |
  | 860 | 849 | $notTrustedPluginsToUpdate[] = $item; |
  | 861 | 850 | } |
  |  | 851 | if ( isset( $websitePluginsUpdateCheck[ $pluginSlug ] ) ) { |
  |  | 852 | unsset( $websitePluginsUpdateCheck[ $pluginSlug ] ); |
  |  | 853 | } |
  | 862 | 854 | } |
  | 863 | 855 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L890) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L882) |  |
  | 890 | 882 | $item['new']       = 1; |
  | 891 | 883 | $themesNewUpdate[] = $item; |
  |  | 884 | if ( ! empty( $delay\_autoupdate ) ) { |
  |  | 885 | $websiteThemesUpdateCheck[ $themeSlug ] = time(); |
  |  | 886 | } |
  | 892 | 887 | } else { |
  | 893 |  | $item['new'] = 0; |
  | 894 |  | if ( isset( $themeInfo['check\_timestamp'] ) ) { |
  | 895 |  | if ( time() > $delay\_autoupdate \* DAY\_IN\_SECONDS + intval( $themeInfo['check\_timestamp'] ) ) { |
  |  | 888 | $item['new']     = 0; |
  |  | 889 | $check\_timestamp = isset( $websiteThemesUpdateCheck[ $themeSlug ] ) ? $websiteThemesUpdateCheck[ $themeSlug ] : 0; |
  |  | 890 | if ( ! empty( $check\_timestamp ) && ! empty( $delay\_autoupdate ) ) { |
  |  | 891 | if ( time() > $delay\_autoupdate \* DAY\_IN\_SECONDS + intval( $check\_timestamp ) ) { |
  | 896 | 892 | $themesToUpdateNow[ $website->id ][] = $themeSlug; |
  | 897 | 893 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L910) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L906) |  |
  | 910 | 906 | $item['new']                = 0; |
  | 911 | 907 | $notTrustedThemesToUpdate[] = $item; |
  |  | 908 | } |
  |  | 909 | if ( isset( $websiteThemesUpdateCheck[ $themeSlug ] ) ) { |
  |  | 910 | unsset( $websiteThemesUpdateCheck[ $themeSlug ] ); |
  | 912 | 911 | } |
  | 913 | 912 | } |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L930) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L929) |  |
  | 930 | 929 | MainWP\_DB::instance()->update\_website\_option( $website, 'last\_theme\_upgrades', $website->theme\_upgrades ); |
  | 931 | 930 |  |
  |  | 931 | if ( ! empty( $delay\_autoupdate ) ) { |
  |  | 932 | foreach ( $websitePluginsUpdateCheck as $slug => $check\_time ) { |
  |  | 933 | if ( ( time() > $check\_time + 30 \* DAY\_IN\_SECONDS ) && is\_array( $websitePlugins ) && ! empty( $websitePlugins ) && ! isset( $websitePlugins[ $slug ] ) ) { |
  |  | 934 | unset( $websitePluginsUpdateCheck[ $slug ] ); |
  |  | 935 | } |
  |  | 936 | } |
  |  | 937 |  |
  |  | 938 | foreach ( $websiteThemesUpdateCheck as $slug => $check\_time ) { |
  |  | 939 | if ( ( time() > $check\_time + 30 \* DAY\_IN\_SECONDS ) && is\_array( $websiteThemes ) && ! empty( $websiteThemes ) && ! isset( $websiteThemes[ $slug ] ) ) { |
  |  | 940 | unset( $websiteThemesUpdateCheck[ $slug ] ); |
  |  | 941 | } |
  |  | 942 | } |
  |  | 943 | MainWP\_DB::instance()->update\_website\_option( $website, 'core\_update\_check', $websiteCoreUpdateCheck ); |
  |  | 944 | MainWP\_DB::instance()->update\_website\_option( $website, 'plugins\_update\_check', ( ! empty( $websitePluginsUpdateCheck ) ? wp\_json\_encode( $websitePluginsUpdateCheck ) : '' ) ); |
  |  | 945 | MainWP\_DB::instance()->update\_website\_option( $website, 'themes\_update\_check', ( ! empty( $websiteThemesUpdateCheck ) ? wp\_json\_encode( $websiteThemesUpdateCheck ) : '' ) ); |
  |  | 946 | } elseif ( ! empty( $websitePluginsUpdateCheck ) || ! empty( $websiteThemesUpdateCheck ) ) { |
  |  | 947 | MainWP\_DB::instance()->update\_website\_option( $website, 'core\_update\_check', 0 ); |
  |  | 948 | MainWP\_DB::instance()->update\_website\_option( $website, 'plugins\_update\_check', '' ); |
  |  | 949 | MainWP\_DB::instance()->update\_website\_option( $website, 'themes\_update\_check', '' ); |
  |  | 950 | } |
  |  | 951 |  |
  | 932 | 952 | if ( ! in\_array( $website->id, $updatescheckSitesIcon ) ) { |
  | 933 | 953 | MainWP\_Sync::get\_wp\_icon( $website->id ); |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L1114) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L1134) |  |
  | 1114 | 1134 | /\*\*  Auto updates part. \*/ |
  | 1115 | 1135 | if ( 1 == $plugin\_automaticDailyUpdate ) { |
  | 1116 |  | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: auto update plugins [~~' . print\_r( $pluginsToUpdateNow, tru~~e ) . ']' ); // phpcs:ignore WordPress.PHP.DevelopmentFunctions -- debug. |
  |  | 1136 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: auto update plugins [plugins=' . print\_r( $pluginsToUpdateNow, true ) . '] :: [days delay auto update=' . intval( $delay\_autoupdate ) . ']' ); // phpcs:ignore WordPress.PHP.DevelopmentFunctions -- debug. |
  | 1117 | 1137 | foreach ( $pluginsToUpdateNow as $websiteId => $slugs ) { |
  | 1118 | 1138 | if ( ( null != $sitesCheckCompleted ) && ( false == $sitesCheckCompleted[ $websiteId ] ) ) { |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L1122) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L1142) |  |
  | 1122 | 1142 | try { |
  | 1123 | 1143 |  |
  | 1124 |  | ~~MainWP\_Logger::instance()->debug( 'CRON :: auto update plugins [websiteid=' . $websiteId . ']' );~~ |
  | 1125 | 1144 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: auto update plugins [websiteid=' . $websiteId . '] :: slugs :: ' . urldecode( implode( ',', $slugs ) ) ); |
  | 1126 | 1145 |  |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L1142) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L1161) |  |
  | 1142 | 1161 | ) |
  | 1143 | 1162 | ); |
  |  | 1163 |  |
  |  | 1164 | $upgrades = ''; |
  |  | 1165 | if ( is\_array( $information ) && isset( $information['upgrades'] ) && is\_array( $information['upgrades'] ) ) { |
  |  | 1166 | $upgrades = print\_r( $information['upgrades'], true ); // phpcs:ignore -- logging. |
  |  | 1167 | } |
  |  | 1168 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: auto update plugins [upgrades result=' . $upgrades . ']' ); |
  | 1144 | 1169 |  |
  | 1145 | 1170 | /\*\* |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L1216) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L1241) |  |
  | 1216 | 1241 | continue; |
  | 1217 | 1242 | } |
  | 1218 |  | ~~MainWP\_Logger::Instance()->debug( 'CRON :: auto update core [websiteid=' . $websiteId . ']' );~~ |
  | 1219 | 1243 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: auto update core [websiteid=' . $websiteId . ']' ); |
  | 1220 | 1244 | try { |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2963222#L1298) | […](/browser/mainwp/trunk/class/class-mainwp-system-cron-jobs.php?rev=2972323#L1322) |  |
  | 1298 | 1322 |  |
  | 1299 | 1323 | if ( ! $sendMail ) { |
  | 1300 |  | ~~MainWP\_Logger::instance()->debug( 'CRON :: updates check :: sendMail is false' );~~ |
  | 1301 | 1324 | MainWP\_Logger::instance()->log\_update\_check( 'CRON :: updates check :: sendMail is false' ); |
  | 1302 | 1325 | return false; |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-system-handler.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-system-handler.php?old=2967176&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-system-handler.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-system-handler.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system-handler.php?rev=2967176#L724 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system-handler.php?rev=2972323#L724 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 724 | 724 |  |
  | 725 | 725 | if ( is\_object( $res ) && property\_exists( $res, 'slug' ) && property\_exists( $res, 'sections' ) ) { |
  | 726 |  | $res; |
  |  | 726 | return $res; |
  | 727 | 727 | } |
  | 728 | 728 |  |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-system-utility.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-system-utility.php?old=2955060&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-system-utility.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-system-utility.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system-utility.php?rev=2955060#L1356 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system-utility.php?rev=2972323#L1356 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 1356 | 1356 | } |
  | 1357 | 1357 |  |
  |  | 1358 | $default\_alg = false; |
  |  | 1359 | if ( defined( 'OPENSSL\_ALGO\_SHA256' ) ) { |
  |  | 1360 | $default\_alg = OPENSSL\_ALGO\_SHA256; |
  |  | 1361 | } |
  |  | 1362 |  |
  | 1358 | 1363 | if ( ! empty( $alg ) ) { |
  | 1359 | 1364 | if ( 9999 === $alg ) { |
  | 1360 |  | $alg = get\_option( 'mainwp\_connect\_signature\_algo' ); |
  |  | 1365 | $alg = get\_option( 'mainwp\_connect\_signature\_algo', $default\_alg ); |
  | 1361 | 1366 | // to fix. |
  | 1362 | 1367 | if ( is\_numeric( $alg ) ) { |
  | […](/browser/mainwp/trunk/class/class-mainwp-system-utility.php?rev=2955060#L1371) | […](/browser/mainwp/trunk/class/class-mainwp-system-utility.php?rev=2972323#L1376) |  |
  | 1371 | 1376 | if ( is\_array( $site\_info ) && ! empty( $site\_info['child\_version'] ) ) { |
  | 1372 | 1377 | if ( version\_compare( $site\_info['child\_version'], '4.5', '>=' ) ) { |
  | 1373 |  | if ( defined( 'OPENSSL\_ALGO\_SHA256' ) ) { |
  | 1374 |  | $alg = OPENSSL\_ALGO\_SHA256; |
  | 1375 |  | } |
  |  | 1378 | $alg = $default\_alg; |
  | 1376 | 1379 | } |
  | 1377 | 1380 | } |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-system-view.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-system-view.php?old=2963222&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-system-view.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-system-view.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system-view.php?rev=2963222#L325 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system-view.php?rev=2972323#L325 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 325 | 325 |  |
  | 326 | 326 | self::render\_browser\_extensions\_notice(); |
  | 327 |  | } |
  |  | 327 |  |
  |  | 328 | self::mainwp\_tmpfile\_check(); |
  |  | 329 | } |
  |  | 330 |  |
  |  | 331 | /\*\* |
  |  | 332 | \* Method mainwp\_tmpfile\_check() |
  |  | 333 | \* |
  |  | 334 | \* Checks if the `tmpfile()` PHP function is disabled. |
  |  | 335 | \*/ |
  |  | 336 | public static function mainwp\_tmpfile\_check() { |
  |  | 337 | $disabled\_functions = ini\_get( 'disable\_functions' ); |
  |  | 338 | if ( '' !== $disabled\_functions ) { |
  |  | 339 | $disabled\_functions\_array = explode( ',', $disabled\_functions ); |
  |  | 340 | if ( in\_array( 'tmpfile', $disabled\_functions\_array ) ) { |
  |  | 341 | if ( MainWP\_Utility::show\_mainwp\_message( 'notice', 'tmpfile\_notice' ) ) { |
  |  | 342 | ?> |
  |  | 343 | <div class="ui red message" style="margin-bottom: 0; border-radius: 0;"> |
  |  | 344 | <i class="close icon mainwp-notice-dismiss" notice-id="tmpfile\_notice"></i> |
  |  | 345 | <div><?php esc\_html\_e( 'tmpfile() function is currently disabled on your server.', 'mainwp' ); ?></div> |
  |  | 346 | <div><?php esc\_html\_e( 'This function is essential for creating temporary files, and its unavailability may affect certain functionalities of your MainWP Dashboard.', 'mainwp' ); ?></div> |
  |  | 347 | <div><?php esc\_html\_e( 'If you are unsure how to enable it, please contact your host support and have them do it for you.', 'mainwp' ); ?></div> |
  |  | 348 | </div> |
  |  | 349 | <?php |
  |  | 350 | } |
  |  | 351 | } |
  |  | 352 | } |
  |  | 353 | } |
  |  | 354 |  |
  | 328 | 355 |  |
  | 329 | 356 | /\*\* |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-system.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-system.php?old=2967176&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-system.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-system.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system.php?rev=2967176#L28 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-system.php?rev=2972323#L28 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 28 | 28 | \* @var string Current plugin version. |
  | 29 | 29 | \*/ |
  | 30 |  | public static $version = '4.5.1.~~2~~'; |
  |  | 30 | public static $version = '4.5.1.3'; |
  | 31 | 31 |  |
  | 32 | 32 | /\*\* |
* ## [mainwp/tags/4.5.1.3/class/class-mainwp-ui.php](/changeset/2972323/mainwp/trunk/class/class-mainwp-ui.php?old=2967176&old_path=mainwp%2Ftrunk%2Fclass%2Fclass-mainwp-ui.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/class/class-mainwp-ui.php")

  | [r2996628](/browser/mainwp/trunk/class/class-mainwp-ui.php?rev=2967176#L1586 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/class/class-mainwp-ui.php?rev=2972323#L1586 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 1586 | 1586 | } |
  | 1587 | 1587 | } |
  |  | 1588 | $breakpoint = apply\_filters( 'mainwp\_flexible\_widgets\_breakpoint', 1367 ); |
  | 1588 | 1589 | ?> |
  | 1589 | 1590 | <script type="text/javascript"> |
  | 1590 | 1591 | var is\_mobile = false; |
  | 1591 |  | if( jQuery( window ).width() < ~~1367~~ ) { |
  |  | 1592 | if( jQuery( window ).width() < <?php echo intval( $breakpoint ); ?> ) { |
  | 1592 | 1593 | is\_mobile = true; |
  | 1593 | 1594 | } |
* ## [mainwp/tags/4.5.1.3/mainwp.php](/changeset/2972323/mainwp/trunk/mainwp.php?old=2967176&old_path=mainwp%2Ftrunk%2Fmainwp.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/mainwp.php")

  | [r2996628](/browser/mainwp/trunk/mainwp.php?rev=2967176#L9 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/mainwp.php?rev=2972323#L9 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 | \* Plugin URI: https://mainwp.com/ |
  | 10 | 10 | \* Text Domain: mainwp |
  | 11 |  | \* Version:  4.5.1.~~2~~ |
  |  | 11 | \* Version:  4.5.1.3 |
  | 12 | 12 | \* |
  | 13 | 13 | \* @package MainWP/Dashboard |
* ## [mainwp/tags/4.5.1.3/pages/page-mainwp-manage-groups.php](/changeset/2972323/mainwp/trunk/pages/page-mainwp-manage-groups.php?old=2963222&old_path=mainwp%2Ftrunk%2Fpages%2Fpage-mainwp-manage-groups.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/pages/page-mainwp-manage-groups.php")

  | [r2996628](/browser/mainwp/trunk/pages/page-mainwp-manage-groups.php?rev=2963222#L560 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/pages/page-mainwp-manage-groups.php?rev=2972323#L560 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 560 | 560 | $name = self::check\_group\_name( $name, $group->id ); |
  | 561 | 561 |  |
  | 562 |  | $color = isset( $\_POST['newColor'] ) ? sanitize\_text\_field( wp\_unslash( $\_POST['newColor'] ) ) : ''; |
  |  | 562 | if ( isset( $\_POST['newColor'] ) && ! empty( $\_POST['newColor'] ) ) { |
  |  | 563 | $color = sanitize\_hex\_color( wp\_unslash( $\_POST['newColor'] ) ); |
  |  | 564 | if ( empty( $color ) ) { |
  |  | 565 | $color = $group->color; |
  |  | 566 | } |
  |  | 567 | } else { |
  |  | 568 | $color = ''; |
  |  | 569 | } |
  | 563 | 570 |  |
  | 564 | 571 | // update group. |
  | […](/browser/mainwp/trunk/pages/page-mainwp-manage-groups.php?rev=2963222#L654) | […](/browser/mainwp/trunk/pages/page-mainwp-manage-groups.php?rev=2972323#L661) |  |
  | 654 | 661 |  |
  | 655 | 662 | if ( isset( $\_POST['newName'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification |
  | 656 |  | $groupId = MainWP\_DB\_Common::instance()->add\_group( $current\_user->ID, self::check\_group\_name( sanitize\_text\_field( wp\_unslash( $\_POST['newName'] ) ) ), sanitize\_~~text\_field~~( wp\_unslash( $\_POST['newColor'] ) ) ); // phpcs:ignore WordPress.Security.NonceVerification |
  |  | 663 | $groupId = MainWP\_DB\_Common::instance()->add\_group( $current\_user->ID, self::check\_group\_name( sanitize\_text\_field( wp\_unslash( $\_POST['newName'] ) ) ), sanitize\_hex\_color( wp\_unslash( $\_POST['newColor'] ) ) ); // phpcs:ignore WordPress.Security.NonceVerification |
  | 657 | 664 |  |
  | 658 | 665 | /\*\* |
* ## [mainwp/tags/4.5.1.3/pages/page-mainwp-updates-per-group.php](/changeset/2972323/mainwp/trunk/pages/page-mainwp-updates-per-group.php?old=2963640&old_path=mainwp%2Ftrunk%2Fpages%2Fpage-mainwp-updates-per-group.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/pages/page-mainwp-updates-per-group.php")

  | [r2996628](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L67 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L67 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 67 | 67 | MainWP\_Updates::set\_continue\_update\_html\_selector( 'wpcore\_global\_upgrade\_all' ); |
  | 68 | 68 | if ( $is\_demo ) { |
  | 69 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected Sites', 'mainwp' ) . '</a>' ); |
  | 70 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All Tags', 'mainwp' ) . '</a>' ); |
  |  | 69 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini basic button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected Sites', 'mainwp' ) . '</a>' ); |
  |  | 70 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All Tags', 'mainwp' ) . '</a>' ); |
  | 71 | 71 | } else { |
  | 72 | 72 | ?> |
  | 73 |  | <a class="ui green mini basic button" onclick="event.stopPropagation(); return updatesoverview\_wordpress\_global\_upgrade\_all( false, true );" href="javascript:void(0)" data-position="top right" data-tooltip="<?php esc\_attr\_e( 'Update WordPress Core files on all child sites.', 'mainwp' ); ?>" data-inverted=""><?php esc\_html\_e( 'Update Selected Sites', 'mainwp' ); ?></a> |
  |  | 73 | <a class="mainwp-update-selected-button ui green mini basic button" onclick="event.stopPropagation(); return updatesoverview\_wordpress\_global\_upgrade\_all( false, true );" href="javascript:void(0)" data-position="top right" data-tooltip="<?php esc\_attr\_e( 'Update WordPress Core files on all child sites.', 'mainwp' ); ?>" data-inverted=""><?php esc\_html\_e( 'Update Selected Sites', 'mainwp' ); ?></a> |
  | 74 | 74 | <a class="mainwp-update-all-button ui green mini button" onclick="return updatesoverview\_wordpress\_global\_upgrade\_all();" href="javascript:void(0)" data-position="top right" data-tooltip="<?php esc\_attr\_e( 'Update WordPress Core files on all child sites.', 'mainwp' ); ?>" data-inverted=""><?php esc\_html\_e( 'Update All Tags', 'mainwp' ); ?></a> |
  | 75 | 75 | <?php |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L100) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L100) |  |
  | 100 | 100 | if ( MainWP\_Updates::user\_can\_update\_wp() ) : |
  | 101 | 101 | if ( $is\_demo ) { |
  | 102 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui basic green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 103 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 102 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui basic green button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 103 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 104 | 104 | } else { |
  | 105 | 105 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L257) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L257) |  |
  | 257 | 257 | if ( 0 < $total\_plugin\_upgrades ) { |
  | 258 | 258 | if ( $is\_demo ) { |
  | 259 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled">' . esc\_html\_\_( 'Update Selected Plugins', 'mainwp' ) . '</a>' ); |
  | 260 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button disabled">' . esc\_html\_\_( 'Update Selected Plugins', 'mainwp' ) . '</a>' ); |
  |  | 259 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled mainwp-update-selected-button">' . esc\_html\_\_( 'Update Selected Plugins', 'mainwp' ) . '</a>' ); |
  |  | 260 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button disabled mainwp-update-selected-button">' . esc\_html\_\_( 'Update Selected Plugins', 'mainwp' ) . '</a>' ); |
  | 261 | 261 | } else { |
  | 262 | 262 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L293) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L293) |  |
  | 293 | 293 | if ( MainWP\_Updates::user\_can\_update\_plugins() ) { |
  | 294 | 294 | if ( $is\_demo ) { |
  | 295 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 296 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 295 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled mainwp-update-selected-button">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 296 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button mainwp-update-all-button disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 297 | 297 | } else { |
  | 298 | 298 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L381) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L381) |  |
  | 381 | 381 | if ( 0 < count( $plugin\_upgrades ) ) : |
  | 382 | 382 | if ( $is\_demo ) { |
  | 383 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green basic mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 384 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 383 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green basic mini button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 384 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 385 | 385 | } else { |
  | 386 | 386 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L524) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L524) |  |
  | 524 | 524 | if ( 0 < $total\_theme\_upgrades ) { |
  | 525 | 525 | if ( $is\_demo ) { |
  | 526 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini basic green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected Themes', 'mainwp' ) . '</a>' ); |
  | 527 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All Themes', 'mainwp' ) . '</a>' ); |
  |  | 526 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini basic green button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected Themes', 'mainwp' ) . '</a>' ); |
  |  | 527 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All Themes', 'mainwp' ) . '</a>' ); |
  | 528 | 528 | } else { |
  | 529 | 529 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L560) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L560) |  |
  | 560 | 560 | if ( MainWP\_Updates::user\_can\_update\_themes() ) { |
  | 561 | 561 | if ( $is\_demo ) { |
  | 562 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green basic mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 563 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 562 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green basic mini button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 563 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 564 | 564 | } else { |
  | 565 | 565 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L647) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L647) |  |
  | 647 | 647 | <?php if ( 0 < count( $theme\_upgrades ) ) : ?> |
  | 648 | 648 | <?php if ( $is\_demo ) : ?> |
  | 649 |  | <?php MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); ?> |
  | 650 |  | <?php MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); ?> |
  |  | 649 | <?php MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini basic button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); ?> |
  |  | 650 | <?php MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); ?> |
  | 651 | 651 | <?php else : ?> |
  | 652 | 652 | <a href="javascript:void(0)" class="mainwp-update-selected-button ui green basic mini button" onClick="event.stopPropagation(); return updatesoverview\_group\_upgrade\_theme\_all( <?php echo esc\_attr( $website->id ); ?>, <?php echo esc\_attr( $group\_id ); ?>, true )"><?php esc\_html\_e( 'Update Selected', 'mainwp' ); ?></a> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2963640#L849) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-group.php?rev=2972323#L849) |  |
  | 849 | 849 | if ( 0 < count( $translation\_upgrades ) ) : |
  | 850 | 850 | if ( $is\_demo ) { |
  | 851 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green basic mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 852 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 851 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green basic mini button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 852 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 853 | 853 | } else { |
  | 854 | 854 | ?> |
* ## [mainwp/tags/4.5.1.3/pages/page-mainwp-updates-per-item.php](/changeset/2972323/mainwp/trunk/pages/page-mainwp-updates-per-item.php?old=2963640&old_path=mainwp%2Ftrunk%2Fpages%2Fpage-mainwp-updates-per-item.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/pages/page-mainwp-updates-per-item.php")

  | [r2996628](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2963640#L71 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2972323#L71 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 71 | 71 | if ( 0 < $total\_plugin\_upgrades ) { |
  | 72 | 72 | if ( $is\_demo ) { |
  | 73 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled">' . esc\_html\_\_( 'Update Selected Plugins', 'mainwp' ) . '</a>' ); |
  | 74 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button disabled">' . esc\_html\_\_( 'Update All Plugins', 'mainwp' ) . '</a>' ); |
  |  | 73 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled mainwp-update-selected-button">' . esc\_html\_\_( 'Update Selected Plugins', 'mainwp' ) . '</a>' ); |
  |  | 74 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button disabled mainwp-update-all-button">' . esc\_html\_\_( 'Update All Plugins', 'mainwp' ) . '</a>' ); |
  | 75 | 75 | } else { |
  | 76 | 76 | ?> |
  | 77 |  | <a href="javascript:void(0)" data-tooltip="<?php esc\_html\_e( 'Update Selected Plugins.', 'mainwp' ); ?>" onClick="return updatesoverview\_plugins\_global\_upgrade\_all( false, true );" class="ui mini green basic button"  data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update Selected Plugins' ); ?></a> |
  | 78 |  | <a href="javascript:void(0)" data-tooltip="<?php esc\_html\_e( 'Update all sites.', 'mainwp' ); ?>" onClick="return updatesoverview\_plugins\_global\_upgrade\_all();" class="ui mini green button" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update All Plugins' ); ?></a> |
  |  | 77 | <a href="javascript:void(0)" data-tooltip="<?php esc\_html\_e( 'Update Selected Plugins.', 'mainwp' ); ?>" onClick="return updatesoverview\_plugins\_global\_upgrade\_all( false, true );" class="ui mini green basic button mainwp-update-selected-button"  data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update Selected Plugins' ); ?></a> |
  |  | 78 | <a href="javascript:void(0)" data-tooltip="<?php esc\_html\_e( 'Update all sites.', 'mainwp' ); ?>" onClick="return updatesoverview\_plugins\_global\_upgrade\_all();" class="ui mini green button mainwp-update-all-button" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update All Plugins' ); ?></a> |
  | 79 | 79 | <?php |
  | 80 | 80 | } |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2963640#L119) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2972323#L119) |  |
  | 119 | 119 | } |
  | 120 | 120 | if ( $is\_demo ) { |
  | 121 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini basic button green disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 122 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini button green disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 121 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini basic button green disabled mainwp-update-selected-button">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 122 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini button green disabled mainwp-update-all-button">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 123 | 123 | } else { |
  | 124 | 124 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2963640#L284) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2972323#L284) |  |
  | 284 | 284 | if ( 0 < $total\_theme\_upgrades ) { |
  | 285 | 285 | if ( $is\_demo ) { |
  | 286 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected Themes', 'mainwp' ) . '</a>' ); |
  | 287 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All Themes', 'mainwp' ) . '</a>' ); |
  |  | 286 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green basic button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected Themes', 'mainwp' ) . '</a>' ); |
  |  | 287 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All Themes', 'mainwp' ) . '</a>' ); |
  | 288 | 288 | } else { |
  | 289 | 289 | ?> |
  | 290 |  | <a href="javascript:void(0)" onClick="return updatesoverview\_themes\_global\_upgrade\_all( false, true );" class="ui mini green basic button~~" data-tooltip="<?php esc\_html\_e( 'Update all~~ sites.', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update Selected Themes' ); ?></a> |
  | 291 |  | <a href="javascript:void(0)" onClick="return updatesoverview\_themes\_global\_upgrade\_all();" class="ui mini green button" data-tooltip="<?php esc\_html\_e( 'Update all sites.', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update All Themes' ); ?></a> |
  |  | 290 | <a href="javascript:void(0)" onClick="return updatesoverview\_themes\_global\_upgrade\_all( false, true );" class="ui mini green basic button mainwp-update-selected-button" data-tooltip="<?php esc\_html\_e( 'Update selected sites.', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update Selected Themes' ); ?></a> |
  |  | 291 | <a href="javascript:void(0)" onClick="return updatesoverview\_themes\_global\_upgrade\_all();" class="ui mini green button mainwp-update-all-button" data-tooltip="<?php esc\_html\_e( 'Update all sites.', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update All Themes' ); ?></a> |
  | 292 | 292 | <?php |
  | 293 | 293 | } |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2963640#L325) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2972323#L325) |  |
  | 325 | 325 | } |
  | 326 | 326 | if ( $is\_demo ) { |
  | 327 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 328 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini button green disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 327 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini basic button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 328 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini button green disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 329 | 329 | } else { |
  | 330 | 330 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2963640#L471) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2972323#L471) |  |
  | 471 | 471 | <?php if ( MainWP\_Updates::user\_can\_update\_trans() ) : ?> |
  | 472 | 472 | <?php if ( 0 < $total\_translation\_upgrades ) : ?> |
  | 473 |  | <a href="javascript:void(0)" onClick="return updatesoverview\_translations\_global\_upgrade\_all( false, true );" class="ui button mini basic green~~" data-tooltip="<?php esc\_html\_e( 'Update all site~~s', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update Selected Translations', 'mainwp' ); ?></a> |
  | 474 |  | <a href="javascript:void(0)" onClick="return updatesoverview\_translations\_global\_upgrade\_all();" class="ui button mini green~~" data-tooltip="<?php esc\_html\_e( 'Update all site~~s', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update All Translations', 'mainwp' ); ?></a> |
  |  | 473 | <a href="javascript:void(0)" onClick="return updatesoverview\_translations\_global\_upgrade\_all( false, true );" class="ui button mini basic green mainwp-update-selected-button" data-tooltip="<?php esc\_html\_e( 'Update selected translations', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update Selected Translations', 'mainwp' ); ?></a> |
  |  | 474 | <a href="javascript:void(0)" onClick="return updatesoverview\_translations\_global\_upgrade\_all();" class="ui button mini green mainwp-update-all-button" data-tooltip="<?php esc\_html\_e( 'Update all translations', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update All Translations', 'mainwp' ); ?></a> |
  | 475 | 475 | <?php endif; ?> |
  | 476 | 476 | <?php endif; ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2963640#L497) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-item.php?rev=2972323#L497) |  |
  | 497 | 497 | } |
  | 498 | 498 | if ( $is\_demo ) { |
  | 499 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini button green disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 499 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini button green disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 500 | 500 | } else { |
  | 501 | 501 | ?> |
* ## [mainwp/tags/4.5.1.3/pages/page-mainwp-updates-per-site.php](/changeset/2972323/mainwp/trunk/pages/page-mainwp-updates-per-site.php?old=2963640&old_path=mainwp%2Ftrunk%2Fpages%2Fpage-mainwp-updates-per-site.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/pages/page-mainwp-updates-per-site.php")

  | [r2996628](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2963640#L60 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2972323#L60 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 60 | 60 | MainWP\_Updates::set\_continue\_update\_html\_selector( 'wpcore\_global\_upgrade\_all' ); |
  | 61 | 61 | if ( $is\_demo ) { |
  | 62 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected Sites', 'mainwp' ) . '</a>' ); |
  | 63 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All Sites', 'mainwp' ) . '</a>' ); |
  |  | 62 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini basic button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected Sites', 'mainwp' ) . '</a>' ); |
  |  | 63 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green mini button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All Sites', 'mainwp' ) . '</a>' ); |
  | 64 | 64 | } else { |
  | 65 | 65 | ?> |
  | 66 |  | <a class="mainwp-update-~~all~~-button ui green mini basic button" onclick="event.stopPropagation(); return updatesoverview\_wordpress\_global\_upgrade\_all( false, true );" href="javascript:void(0)" data-position="top right" data-tooltip="<?php esc\_attr\_e( 'Update WordPress Core files on selected child sites.', 'mainwp' ); ?>" data-inverted=""><?php esc\_html\_e( 'Update Selected Sites', 'mainwp' ); ?></a> |
  |  | 66 | <a class="mainwp-update-selected-button ui green mini basic button" onclick="event.stopPropagation(); return updatesoverview\_wordpress\_global\_upgrade\_all( false, true );" href="javascript:void(0)" data-position="top right" data-tooltip="<?php esc\_attr\_e( 'Update WordPress Core files on selected child sites.', 'mainwp' ); ?>" data-inverted=""><?php esc\_html\_e( 'Update Selected Sites', 'mainwp' ); ?></a> |
  | 67 | 67 | <a class="mainwp-update-all-button ui green mini button" onclick="return updatesoverview\_wordpress\_global\_upgrade\_all();" href="javascript:void(0)" data-position="top right" data-tooltip="<?php esc\_attr\_e( 'Update WordPress Core files on all child sites.', 'mainwp' ); ?>" data-inverted=""><?php esc\_html\_e( 'Update All Sites', 'mainwp' ); ?></a> |
  | 68 | 68 | <?php |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2963640#L195) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2972323#L195) |  |
  | 195 | 195 | if ( 0 < $total\_plugin\_upgrades ) { |
  | 196 | 196 | if ( $is\_demo ) { |
  | 197 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled">' . esc\_html\_\_( 'Update Selected Plugins', 'mainwp' ) . '</a>' ); |
  | 198 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button disabled">' . esc\_html\_\_( 'Update All Sites', 'mainwp' ) . '</a>' ); |
  |  | 197 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled mainwp-update-selected-button">' . esc\_html\_\_( 'Update Selected Plugins', 'mainwp' ) . '</a>' ); |
  |  | 198 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button disabled mainwp-update-all-button">' . esc\_html\_\_( 'Update All Sites', 'mainwp' ) . '</a>' ); |
  | 199 | 199 | } else { |
  | 200 | 200 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2963640#L270) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2972323#L270) |  |
  | 270 | 270 | if ( 0 < count( $plugin\_upgrades ) ) : |
  | 271 | 271 | if ( $is\_demo ) { |
  | 272 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 272 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green basic button disabled mainwp-update-selected-button">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 273 | 273 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" disabled="disabled" class="ui mini green button disabled">' . esc\_html\_\_( 'Update Now', 'mainwp' ) . '</a>' ); |
  | 274 | 274 | } else { |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2963640#L395) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2972323#L395) |  |
  | 395 | 395 | if ( 0 < $total\_theme\_upgrades ) { |
  | 396 | 396 | if ( $is\_demo ) { |
  | 397 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected Sites', 'mainwp' ) . '</a>' ); |
  | 398 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All Sites', 'mainwp' ) . '</a>' ); |
  |  | 397 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green basic button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected Sites', 'mainwp' ) . '</a>' ); |
  |  | 398 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All Sites', 'mainwp' ) . '</a>' ); |
  | 399 | 399 | } else { |
  | 400 | 400 | ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2963640#L466) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2972323#L466) |  |
  | 466 | 466 | if ( 0 < count( $theme\_upgrades ) ) : |
  | 467 | 467 | if ( $is\_demo ) { |
  | 468 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 468 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green basic button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 469 | 469 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Now', 'mainwp' ) . '</a>' ); |
  | 470 | 470 | } else { |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2963640#L581) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2972323#L581) |  |
  | 581 | 581 | <?php if ( MainWP\_Updates::user\_can\_update\_trans() ) : ?> |
  | 582 | 582 | <?php if ( 0 < $total\_translation\_upgrades ) : ?> |
  | 583 |  | <a href="javascript:void(0)" onClick="return updatesoverview\_translations\_global\_upgrade\_all( false, true );" class="~~ui button mini basic green" data-tooltip="<?php esc\_html\_e( 'Update all~~ translations', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update Selected Sites', 'mainwp' ); ?></a> |
  |  | 583 | <a href="javascript:void(0)" onClick="return updatesoverview\_translations\_global\_upgrade\_all( false, true );" class="mainwp-update-selected-button ui button mini basic green" data-tooltip="<?php esc\_html\_e( 'Update selected translations', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update Selected Sites', 'mainwp' ); ?></a> |
  | 584 | 584 | <a href="javascript:void(0)" onClick="return updatesoverview\_translations\_global\_upgrade\_all();" class="mainwp-update-all-button ui button mini green" data-tooltip="<?php esc\_html\_e( 'Update all translations', 'mainwp' ); ?>" data-inverted="" data-position="top right"><?php esc\_html\_e( 'Update All Sites', 'mainwp' ); ?></a> |
  | 585 | 585 | <?php endif; ?> |
  | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2963640#L613) | […](/browser/mainwp/trunk/pages/page-mainwp-updates-per-site.php?rev=2972323#L613) |  |
  | 613 | 613 | if ( 0 < count( $translation\_upgrades ) ) : |
  | 614 | 614 | if ( $is\_demo ) { |
  | 615 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  | 616 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 615 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green basic button disabled mainwp-update-selected-button" disabled="disabled">' . esc\_html\_\_( 'Update Selected', 'mainwp' ) . '</a>' ); |
  |  | 616 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui mini green button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 617 | 617 | } else { |
  | 618 | 618 | ?> |
* ## [mainwp/tags/4.5.1.3/readme.txt](/changeset/2972323/mainwp/trunk/readme.txt?old=2967176&old_path=mainwp%2Ftrunk%2Freadme.txt "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/readme.txt")

  | [r2996628](/browser/mainwp/trunk/readme.txt?rev=2967176#L8 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/readme.txt?rev=2972323#L8 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | Tested up to: 6.3.1 |
  | 9 | 9 | Requires PHP: 7.4 |
  | 10 |  | Stable tag: 4.5.1.~~2~~ |
  |  | 10 | Stable tag: 4.5.1.3 |
  | 11 | 11 | License: GPLv3 or later |
  | 12 | 12 | License URI: https://www.gnu.org/licenses/gpl-3.0.html |
  | […](/browser/mainwp/trunk/readme.txt?rev=2967176#L300) | […](/browser/mainwp/trunk/readme.txt?rev=2972323#L300) |  |
  | 300 | 300 |  |
  | 301 | 301 | == Changelog == |
  |  | 302 |  |
  |  | 303 | = 4.5.1.3 - 9-27-2023 = |
  |  | 304 | \* Fixed: An issue with processing MainWP cron events |
  |  | 305 | \* Fixed: An issue with reconnecting disconnected sites |
  |  | 306 | \* Fixed: Typo in the Client info widget |
  |  | 307 | \* Fixed: Layout issue where the side content element drops down on specific zoom levels |
  |  | 308 | \* Fixed: Missing plugin wp.org link in plugin info modal |
  |  | 309 | \* Added: `mainwp-update-all-button` CSS class to all "Update All" buttons |
  |  | 310 | \* Added: System check to detect if the `tmpfile()` PHP function is disabled |
  |  | 311 | \* Updated: Default page length in the Non-MainWP Changes widget |
  |  | 312 | \* Updated: Tag options fields sanitation |
  |  | 313 | \* Tweaked: Basic button border replaced with inset shadow in the dark theme |
  | 302 | 314 |  |
  | 303 | 315 | = 4.5.1.2 - 9-14-2023 = |
* ## [mainwp/tags/4.5.1.3/widgets/widget-mainwp-client-overview-custom-info.php](/changeset/2972323/mainwp/trunk/widgets/widget-mainwp-client-overview-custom-info.php?old=2953884&old_path=mainwp%2Ftrunk%2Fwidgets%2Fwidget-mainwp-client-overview-custom-info.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/widgets/widget-mainwp-client-overview-custom-info.php")

  | [r2996628](/browser/mainwp/trunk/widgets/widget-mainwp-client-overview-custom-info.php?rev=2953884#L62 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/widgets/widget-mainwp-client-overview-custom-info.php?rev=2972323#L62 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 62 | 62 | \* @since 4.1 |
  | 63 | 63 | \*/ |
  | 64 |  | echo esc\_html( apply\_filters( 'mainwp\_clients\_overview\_info\_widget\_title', esc\_html\_\_( 'Addition Client Info', 'mainwp' ), $client\_info ) ); |
  |  | 64 | echo esc\_html( apply\_filters( 'mainwp\_clients\_overview\_info\_widget\_title', esc\_html\_\_( 'Additional Client Info', 'mainwp' ), $client\_info ) ); |
  | 65 | 65 | ?> |
  | 66 | 66 | <div class="sub header"></div> |
* ## [mainwp/tags/4.5.1.3/widgets/widget-mainwp-site-actions.php](/changeset/2972323/mainwp/trunk/widgets/widget-mainwp-site-actions.php?old=2963222&old_path=mainwp%2Ftrunk%2Fwidgets%2Fwidget-mainwp-site-actions.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/widgets/widget-mainwp-site-actions.php")

  | [r2996628](/browser/mainwp/trunk/widgets/widget-mainwp-site-actions.php?rev=2963222#L191 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/widgets/widget-mainwp-site-actions.php?rev=2972323#L191 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 191 | 191 | jQuery.fn.DataTable.ext.pager.numbers\_length = 4; |
  | 192 | 192 | jQuery( '#mainwp-non-mainwp-changes-table' ).DataTable( { |
  | 193 |  | "pageLength": ~~5~~, |
  |  | 193 | "pageLength": 10, |
  | 194 | 194 | "lengthMenu": [ [5, 10, 25, 50, 100, -1], [5, 10, 25, 50, 100, "All"] ], |
  | 195 | 195 | "stateSave" : true, |
* ## [mainwp/tags/4.5.1.3/widgets/widget-mainwp-updates-overview.php](/changeset/2972323/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?old=2963222&old_path=mainwp%2Ftrunk%2Fwidgets%2Fwidget-mainwp-updates-overview.php "Show the [2996628:2996628] differences restricted to mainwp/tags/4.5.1.3/widgets/widget-mainwp-updates-overview.php")

  | [r2996628](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2963222#L599 "Show revision 2996628 of this file in browser") | [r2996628](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323#L599 "Show revision 2996628 of this file in browser") |  |
  | --- | --- | --- |
  | 599 | 599 | if ( '' != $wpcore\_update\_disabled\_by ) { |
  | 600 | 600 | ?> |
  | 601 |  | <span data-tooltip="<?php echo esc\_html( $wpcore\_update\_disabled\_by ); ?>" data-inverted="" data-position="left center"><a href="javascript:void(0)"  class="ui button basic green disabled"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a></span> |
  |  | 601 | <span data-tooltip="<?php echo esc\_html( $wpcore\_update\_disabled\_by ); ?>" data-inverted="" data-position="left center"><a href="javascript:void(0)"  class="ui button basic green disabled mainwp-update-all-button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a></span> |
  | 602 | 602 | <?php |
  | 603 | 603 | } else { |
  | 604 | 604 | if ( $is\_demo ) { |
  | 605 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green basic button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 605 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui green basic button disabled mainwp-update-all-button" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 606 | 606 | } else { |
  | 607 | 607 | ?> |
  | 608 |  | <a href="#" onClick="return updatesoverview\_global\_upgrade\_all('wp');" class="ui green basic button <?php MainWP\_Updates::get\_continue\_update\_selector(); // phpcs:ignore WordPress.Security.EscapeOutput ?>" data-tooltip="<?php esc\_html\_e( 'Clicking this button will update WP Core files on All your websites.', 'mainwp' ); ?>" data-inverted="" data-position="top center"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  |  | 608 | <a href="#" onClick="return updatesoverview\_global\_upgrade\_all('wp');" class="ui green basic button mainwp-update-all-button <?php MainWP\_Updates::get\_continue\_update\_selector(); // phpcs:ignore WordPress.Security.EscapeOutput ?>" data-tooltip="<?php esc\_html\_e( 'Clicking this button will update WP Core files on All your websites.', 'mainwp' ); ?>" data-inverted="" data-position="top center"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  | 609 | 609 | <?php |
  | 610 | 610 | } |
  | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2963222#L613) | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323#L613) |  |
  | 613 | 613 | <?php else : ?> |
  | 614 | 614 | <a href="<?php echo esc\_url( $detail\_wp\_up ); ?>" class="ui button"><?php esc\_html\_e( 'See Details', 'mainwp' ); ?></a> |
  | 615 |  | <a href="#" class="ui disabled green basic button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  |  | 615 | <a href="#" class="ui disabled green basic button mainwp-update-all-button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  | 616 | 616 | <?php endif; ?> |
  | 617 | 617 | <?php endif; ?> |
  | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2963222#L680) | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323#L680) |  |
  | 680 | 680 | ?> |
  | 681 | 681 | <a href="<?php echo esc\_url( $detail\_plugins\_up ); ?>" class="ui button"><?php esc\_html\_e( 'See Details', 'mainwp' ); ?></a> |
  | 682 |  | <a href="#" class="ui disabled green basic button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  |  | 682 | <a href="#" class="ui disabled green basic button mainwp-update-all-button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  | 683 | 683 | <?php |
  | 684 | 684 | } else { |
  | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2963222#L687) | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323#L687) |  |
  | 687 | 687 | <?php |
  | 688 | 688 | if ( $is\_demo ) { |
  | 689 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui basic green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 689 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui basic green button mainwp-update-all-button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 690 | 690 | } else { |
  | 691 | 691 | ?> |
  | 692 |  | <a href="#" onClick="return updatesoverview\_global\_upgrade\_all('plugin');" class="ui basic green button <?php MainWP\_Updates::get\_continue\_update\_selector(); // phpcs:ignore WordPress.Security.EscapeOutput ?>" data-tooltip="<?php echo esc\_attr( $update\_all\_tooltip ); ?>" data-inverted="" data-position="top center"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  |  | 692 | <a href="#" onClick="return updatesoverview\_global\_upgrade\_all('plugin');" class="ui basic green mainwp-update-all-button button <?php MainWP\_Updates::get\_continue\_update\_selector(); // phpcs:ignore WordPress.Security.EscapeOutput ?>" data-tooltip="<?php echo esc\_attr( $update\_all\_tooltip ); ?>" data-inverted="" data-position="top center"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  | 693 | 693 | <?php |
  | 694 | 694 | } |
  | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2963222#L757) | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323#L757) |  |
  | 757 | 757 | ?> |
  | 758 | 758 | <a href="<?php echo esc\_url( $detail\_themes\_up ); ?>" class="ui button"><?php esc\_html\_e( 'See Details', 'mainwp' ); ?></a> |
  | 759 |  | <a href="#" class="ui disabled green basic button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  |  | 759 | <a href="#" class="ui disabled green basic mainwp-update-all-button button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  | 760 | 760 | <?php |
  | 761 | 761 | } else { |
  | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2963222#L764) | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323#L764) |  |
  | 764 | 764 | <?php |
  | 765 | 765 | if ( $is\_demo ) { |
  | 766 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui basic green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 766 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui basic green button mainwp-update-all-button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 767 | 767 | } else { |
  | 768 | 768 | ?> |
  | 769 |  | <a href="#" onClick="return updatesoverview\_global\_upgrade\_all('theme');" class="ui basic green button <?php MainWP\_Updates::get\_continue\_update\_selector(); // phpcs:ignore WordPress.Security.EscapeOutput ?>" data-tooltip="<?php esc\_html\_e( 'Clicking this button will update all Themes on All your websites.', 'mainwp' ); ?>" data-inverted="" data-position="top center"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  |  | 769 | <a href="#" onClick="return updatesoverview\_global\_upgrade\_all('theme');" class="ui basic green mainwp-update-all-button button <?php MainWP\_Updates::get\_continue\_update\_selector(); // phpcs:ignore WordPress.Security.EscapeOutput ?>" data-tooltip="<?php esc\_html\_e( 'Clicking this button will update all Themes on All your websites.', 'mainwp' ); ?>" data-inverted="" data-position="top center"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  | 770 | 770 | <?php |
  | 771 | 771 | } |
  | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2963222#L833) | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323#L833) |  |
  | 833 | 833 | ?> |
  | 834 | 834 | <a href="<?php echo esc\_url( $detail\_trans\_up ); ?>" class="ui button"><?php esc\_html\_e( 'See Details', 'mainwp' ); ?></a> |
  | 835 |  | <a href="#" class="ui disabled green basic button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  |  | 835 | <a href="#" class="ui disabled green basic mainwp-update-all-button button"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  | 836 | 836 | <?php |
  | 837 | 837 | } else { |
  | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2963222#L840) | […](/browser/mainwp/trunk/widgets/widget-mainwp-updates-overview.php?rev=2972323#L840) |  |
  | 840 | 840 | <?php |
  | 841 | 841 | if ( $is\_demo ) { |
  | 842 |  | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui basic green button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  |  | 842 | MainWP\_Demo\_Handle::get\_instance()->render\_demo\_disable\_button( '<a href="javascript:void(0)" class="ui basic green button mainwp-update-all-button disabled" disabled="disabled">' . esc\_html\_\_( 'Update All', 'mainwp' ) . '</a>' ); |
  | 843 | 843 | } else { |
  | 844 | 844 | ?> |
  | 845 |  | <a href="#" onClick="return updatesoverview\_global\_upgrade\_all('translation');" class="ui basic green button <?php MainWP\_Updates::get\_continue\_update\_selector(); // phpcs:ignore WordPress.Security.EscapeOutput ?>" data-tooltip="<?php esc\_html\_e( 'Clicking this button will update all Translations on All your websites.', 'mainwp' ); ?>" data-inverted="" data-position="top center"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  |  | 845 | <a href="#" onClick="return updatesoverview\_global\_upgrade\_all('translation');" class="ui basic green mainwp-update-all-button button <?php MainWP\_Updates::get\_continue\_update\_selector(); // phpcs:ignore WordPress.Security.EscapeOutput ?>" data-tooltip="<?php esc\_html\_e( 'Clicking this button will update all Translations on All your websites.', 'mainwp' ); ?>" data-inverted="" data-position="top center"><?php esc\_html\_e( 'Update All', 'mainwp' ); ?></a> |
  | 846 | 846 | <?php |
  | 847 | 847 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2996628&old=2996628&new_path=%2Fmainwp%2Ftags%2F4.5.1.3&old_path=%2Fmainwp%2Ftags%2F4.5.1.2)
* [Zip Archive](?format=zip&new=2996628&old=2996628&new_path=%2Fmainwp%2Ftags%2F4.5.1.3&old_path=%2Fmainwp%2Ftags%2F4.5.1.2)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_4266bd49_20250114_201105.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# MainWP Dashboard <= 4.5.1.2 - Authenticated(Administrator+) CSS Injection

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   MainWP Dashboard <= 4.5.1.2 - Authenticated(Administrator+) CSS Injection

2.2

**Improper Neutralization of Special Elements in Output Used by a Downstream Component ('Injection')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:H/PR:H/UI:N/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:H/PR:H/UI:N/S:U/C:N/I:L/A:N)

| CVE | [CVE-2023-6164](https://www.cve.org/CVERecord?id=CVE-2023-6164) |
| --- | --- |
| CVSS | 2.2 (Low) |
| Publicly Published | October 20, 2023 |
| Last Updated | November 22, 2023 |
| Researcher | [Hüseyin TINTAŞ](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/huseyin-tintas) |

### Description

The MainWP Dashboard – WordPress Manager for Multiple Websites Maintenance plugin for WordPress is vulnerable to CSS Injection via the ‘newColor’ parameter in all versions up to, and including, 4.5.1.2 due to insufficient input sanitization. This makes it possible for authenticated attackers, with administrator-level access, to inject arbitrary CSS values into the site tags.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?old_path=/mainwp/tags/4.5.1.2&old=2996628&new_path=/mainwp/tags/4.5.1.3&new=2996628&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmainwp%2Fmainwp-dashboard-4512-authenticatedadministrator-css-injection&t=MainWP%20Dashboard%20%3C%3D%204.5.1.2%20-%20Authenticated%28Administrator%2B%29%20CSS%20Injection "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmainwp%2Fmainwp-dashboard-4512-authenticatedadministrator-css-injection&text=MainWP%20Dashboard%20%3C%3D%204.5.1.2%20-%20Authenticated%28Administrator%2B%29%20CSS%20Injection "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmainwp%2Fmainwp-dashboard-4512-authenticatedadministrator-css-injection "LinkedIn")
Email

## Vulnerability Details for MainWP Dashboard: WordPress Management without the SaaS

#### [MainWP Dashboard: WordPress Management without the SaaS](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/mainwp)

| Software Type | Plugin |
| --- | --- |
| Software Slug | mainwp [(view on wordpress.org)](https://wordpress.org/plugins/mainwp) |
| Patched? | Yes |
| Remediation | Update to version 4.5.1.3, or a newer patched version |
| Affected Version | * <= 4.5.1.2 |
| Patched Version | * 4.5.1.3 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation


