=== Content from www.wordfence.com_7f40e581_20250114_234107.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Backup Migration <= 1.3.9 - Unauthenticated Path Traversal to Arbitrary File Deletion

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Backup Migration <= 1.3.9 - Unauthenticated Path Traversal to Arbitrary File Deletion

9.8

**Improper Limitation of a Pathname to a Restricted Directory ('Path Traversal')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2023-6972](https://www.cve.org/CVERecord?id=CVE-2023-6972) |
| --- | --- |
| CVSS | 9.8 (Critical) |
| Publicly Published | December 22, 2023 |
| Last Updated | April 15, 2024 |
| Researcher | [Hiroho Shimada](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/hiroho-shimada) |

### Description

The Backup Migration plugin for WordPress is vulnerable to Path Traversal in all versions up to, and including, 1.3.9 via the 'content-backups' and 'content-name', 'content-manifest', or 'content-bmitmp' and 'content-identy' HTTP headers. This makes it possible for unauthenticated attackers to delete arbitrary files, including the wp-config.php file, which can make site takeover and remote code execution possible.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/backup-backup/tags/1.3.9/includes/backup-heart.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/backup-backup/tags/1.3.9/includes/bypasser.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3012745/backup-backup)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbackup-backup%2Fbackup-migration-139-unauthenticated-path-traversal-to-arbitrary-file-deletion&t=Backup%20Migration%20%3C%3D%201.3.9%20-%20Unauthenticated%20Path%20Traversal%20to%20Arbitrary%20File%20Deletion "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbackup-backup%2Fbackup-migration-139-unauthenticated-path-traversal-to-arbitrary-file-deletion&text=Backup%20Migration%20%3C%3D%201.3.9%20-%20Unauthenticated%20Path%20Traversal%20to%20Arbitrary%20File%20Deletion "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbackup-backup%2Fbackup-migration-139-unauthenticated-path-traversal-to-arbitrary-file-deletion "LinkedIn")
Email

## Vulnerability Details for Backup Migration

#### [Backup Migration](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/backup-backup)

| Software Type | Plugin |
| --- | --- |
| Software Slug | backup-backup [(view on wordpress.org)](https://wordpress.org/plugins/backup-backup) |
| Patched? | Yes |
| Remediation | Update to version 1.4.0, or a newer patched version |
| Affected Version | * <= 1.3.9 |
| Patched Version | * 1.4.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_974583c8_20250114_234103.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3012745%2Fbackup-backup)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3010013/backup-backup "Changeset 3010013 for backup-backup")
* [Next Change](/changeset/3017220/backup-backup "Changeset 3017220 for backup-backup") →

---

# Changeset [3012745](/changeset/3012745 "Show full changeset") for [backup-backup](/browser/backup-backup?rev=3012745 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
12/21/2023 06:24:03 AM
([13 months](/timeline?from=2023-12-21T06%3A24%3A03Z&precision=second "See timeline at 12/21/2023 06:24:03 AM") ago)

Author:
iclyde
Message:

Version 1.4.0

Location:
[backup-backup](/browser/backup-backup?rev=3012745)
Files:

395 added
1 edited

* [tags/1.4.0](/browser/backup-backup/tags/1.4.0?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin](/browser/backup-backup/tags/1.4.0/admin?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/css](/browser/backup-backup/tags/1.4.0/admin/css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/css/bmi-plugin-icon.min.css](/browser/backup-backup/tags/1.4.0/admin/css/bmi-plugin-icon.min.css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/css/bmi-plugin.min.css](/browser/backup-backup/tags/1.4.0/admin/css/bmi-plugin.min.css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images](/browser/backup-backup/tags/1.4.0/admin/images?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/002-monitor-white.svg](/browser/backup-backup/tags/1.4.0/admin/images/002-monitor-white.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/Amazon.svg](/browser/backup-backup/tags/1.4.0/admin/images/Amazon.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/alert\_error-min.png](/browser/backup-backup/tags/1.4.0/admin/images/alert_error-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/alert\_info-min.png](/browser/backup-backup/tags/1.4.0/admin/images/alert_info-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/alert\_success-min.png](/browser/backup-backup/tags/1.4.0/admin/images/alert_success-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/alert\_warning-min.png](/browser/backup-backup/tags/1.4.0/admin/images/alert_warning-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/arrow-min.png](/browser/backup-backup/tags/1.4.0/admin/images/arrow-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/backblaze.svg](/browser/backup-backup/tags/1.4.0/admin/images/backblaze.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/backup-min.svg](/browser/backup-backup/tags/1.4.0/admin/images/backup-min.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/big-thumb-up.svg](/browser/backup-backup/tags/1.4.0/admin/images/big-thumb-up.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/big\_bg\_clock\_green-min.png](/browser/backup-backup/tags/1.4.0/admin/images/big_bg_clock_green-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/big\_bg\_clock\_white-min.png](/browser/backup-backup/tags/1.4.0/admin/images/big_bg_clock_white-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/clock.svg](/browser/backup-backup/tags/1.4.0/admin/images/clock.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/clock2.svg](/browser/backup-backup/tags/1.4.0/admin/images/clock2.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/clocks-min.png](/browser/backup-backup/tags/1.4.0/admin/images/clocks-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/close-min.png](/browser/backup-backup/tags/1.4.0/admin/images/close-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/copy-icon.png](/browser/backup-backup/tags/1.4.0/admin/images/copy-icon.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/copy-url-stg.svg](/browser/backup-backup/tags/1.4.0/admin/images/copy-url-stg.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/crown-bg.png](/browser/backup-backup/tags/1.4.0/admin/images/crown-bg.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/download-min.png](/browser/backup-backup/tags/1.4.0/admin/images/download-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/dream-objects.svg](/browser/backup-backup/tags/1.4.0/admin/images/dream-objects.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/ftp.svg](/browser/backup-backup/tags/1.4.0/admin/images/ftp.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/google-cloud.svg](/browser/backup-backup/tags/1.4.0/admin/images/google-cloud.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/google-drive-mono.svg](/browser/backup-backup/tags/1.4.0/admin/images/google-drive-mono.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/google-drive.svg](/browser/backup-backup/tags/1.4.0/admin/images/google-drive.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/happy-smile.png](/browser/backup-backup/tags/1.4.0/admin/images/happy-smile.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/info-min.png](/browser/backup-backup/tags/1.4.0/admin/images/info-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/kitty-cat.svg](/browser/backup-backup/tags/1.4.0/admin/images/kitty-cat.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/link-min.png](/browser/backup-backup/tags/1.4.0/admin/images/link-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/list-ongoing.svg](/browser/backup-backup/tags/1.4.0/admin/images/list-ongoing.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/list-success.svg](/browser/backup-backup/tags/1.4.0/admin/images/list-success.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/list-waiting.svg](/browser/backup-backup/tags/1.4.0/admin/images/list-waiting.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/list-warning.svg](/browser/backup-backup/tags/1.4.0/admin/images/list-warning.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/local-server-2.svg](/browser/backup-backup/tags/1.4.0/admin/images/local-server-2.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/local-server.svg](/browser/backup-backup/tags/1.4.0/admin/images/local-server.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/lock-experimental.png](/browser/backup-backup/tags/1.4.0/admin/images/lock-experimental.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/lock-min.svg](/browser/backup-backup/tags/1.4.0/admin/images/lock-min.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/log-in.svg](/browser/backup-backup/tags/1.4.0/admin/images/log-in.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/log-min.svg](/browser/backup-backup/tags/1.4.0/admin/images/log-min.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/logo-min.png](/browser/backup-backup/tags/1.4.0/admin/images/logo-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/logo.png](/browser/backup-backup/tags/1.4.0/admin/images/logo.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/microsoft-azure.svg](/browser/backup-backup/tags/1.4.0/admin/images/microsoft-azure.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/minimize-min.png](/browser/backup-backup/tags/1.4.0/admin/images/minimize-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/next-icon-min.png](/browser/backup-backup/tags/1.4.0/admin/images/next-icon-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/nut-big.png](/browser/backup-backup/tags/1.4.0/admin/images/nut-big.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/nut-mid.png](/browser/backup-backup/tags/1.4.0/admin/images/nut-mid.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/nut-small.png](/browser/backup-backup/tags/1.4.0/admin/images/nut-small.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/onedrive.svg](/browser/backup-backup/tags/1.4.0/admin/images/onedrive.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/openstack-swift.svg](/browser/backup-backup/tags/1.4.0/admin/images/openstack-swift.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/pen-edit.svg](/browser/backup-backup/tags/1.4.0/admin/images/pen-edit.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/premium.png](/browser/backup-backup/tags/1.4.0/admin/images/premium.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/premium.svg](/browser/backup-backup/tags/1.4.0/admin/images/premium.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/rackspace.svg](/browser/backup-backup/tags/1.4.0/admin/images/rackspace.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/red-close-min.svg](/browser/backup-backup/tags/1.4.0/admin/images/red-close-min.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/red-cross.svg](/browser/backup-backup/tags/1.4.0/admin/images/red-cross.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/restore-icon-min.png](/browser/backup-backup/tags/1.4.0/admin/images/restore-icon-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/restore-min.svg](/browser/backup-backup/tags/1.4.0/admin/images/restore-min.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/search-min.png](/browser/backup-backup/tags/1.4.0/admin/images/search-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/sftp-scp.svg](/browser/backup-backup/tags/1.4.0/admin/images/sftp-scp.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/stars.gif](/browser/backup-backup/tags/1.4.0/admin/images/stars.gif?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/stg-bg.svg](/browser/backup-backup/tags/1.4.0/admin/images/stg-bg.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/stg-check.svg](/browser/backup-backup/tags/1.4.0/admin/images/stg-check.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/stg-creation-bg.jpg](/browser/backup-backup/tags/1.4.0/admin/images/stg-creation-bg.jpg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/stg-new.svg](/browser/backup-backup/tags/1.4.0/admin/images/stg-new.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/stg-restore-btn.svg](/browser/backup-backup/tags/1.4.0/admin/images/stg-restore-btn.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/success.png](/browser/backup-backup/tags/1.4.0/admin/images/success.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/support-1.svg](/browser/backup-backup/tags/1.4.0/admin/images/support-1.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/support-2.svg](/browser/backup-backup/tags/1.4.0/admin/images/support-2.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/support-3.svg](/browser/backup-backup/tags/1.4.0/admin/images/support-3.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/thumb.png](/browser/backup-backup/tags/1.4.0/admin/images/thumb.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/timemachine.svg](/browser/backup-backup/tags/1.4.0/admin/images/timemachine.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/tlogo.svg](/browser/backup-backup/tags/1.4.0/admin/images/tlogo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/trash.png](/browser/backup-backup/tags/1.4.0/admin/images/trash.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/unlocked-min.svg](/browser/backup-backup/tags/1.4.0/admin/images/unlocked-min.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/upload-min.png](/browser/backup-backup/tags/1.4.0/admin/images/upload-min.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/upload.svg](/browser/backup-backup/tags/1.4.0/admin/images/upload.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/warning-grey.png](/browser/backup-backup/tags/1.4.0/admin/images/warning-grey.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/warning-red.png](/browser/backup-backup/tags/1.4.0/admin/images/warning-red.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/images/x-face.png](/browser/backup-backup/tags/1.4.0/admin/images/x-face.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/js](/browser/backup-backup/tags/1.4.0/admin/js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/admin/js/backup-migration.min.js](/browser/backup-backup/tags/1.4.0/admin/js/backup-migration.min.js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst](/browser/backup-backup/tags/1.4.0/analyst?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets](/browser/backup-backup/tags/1.4.0/analyst/assets?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/css](/browser/backup-backup/tags/1.4.0/analyst/assets/css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/css/customize.css](/browser/backup-backup/tags/1.4.0/analyst/assets/css/customize.css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/img](/browser/backup-backup/tags/1.4.0/analyst/assets/img?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/img/pencil.png](/browser/backup-backup/tags/1.4.0/analyst/assets/img/pencil.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/img/shield\_question.png](/browser/backup-backup/tags/1.4.0/analyst/assets/img/shield_question.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/img/shield\_success.png](/browser/backup-backup/tags/1.4.0/analyst/assets/img/shield_success.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/img/smile.png](/browser/backup-backup/tags/1.4.0/analyst/assets/img/smile.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/index.php](/browser/backup-backup/tags/1.4.0/analyst/assets/index.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/js](/browser/backup-backup/tags/1.4.0/analyst/assets/js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/assets/js/customize.js](/browser/backup-backup/tags/1.4.0/analyst/assets/js/customize.js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/autoload.php](/browser/backup-backup/tags/1.4.0/analyst/autoload.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/index.php](/browser/backup-backup/tags/1.4.0/analyst/index.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/main.php](/browser/backup-backup/tags/1.4.0/analyst/main.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/sdk\_resolver.php](/browser/backup-backup/tags/1.4.0/analyst/sdk_resolver.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src](/browser/backup-backup/tags/1.4.0/analyst/src?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Account](/browser/backup-backup/tags/1.4.0/analyst/src/Account?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Account/Account.php](/browser/backup-backup/tags/1.4.0/analyst/src/Account/Account.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Account/AccountData.php](/browser/backup-backup/tags/1.4.0/analyst/src/Account/AccountData.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Account/AccountDataFactory.php](/browser/backup-backup/tags/1.4.0/analyst/src/Account/AccountDataFactory.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Analyst.php](/browser/backup-backup/tags/1.4.0/analyst/src/Analyst.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/ApiRequestor.php](/browser/backup-backup/tags/1.4.0/analyst/src/ApiRequestor.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/ApiResponse.php](/browser/backup-backup/tags/1.4.0/analyst/src/ApiResponse.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Cache](/browser/backup-backup/tags/1.4.0/analyst/src/Cache?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Cache/DatabaseCache.php](/browser/backup-backup/tags/1.4.0/analyst/src/Cache/DatabaseCache.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Collector.php](/browser/backup-backup/tags/1.4.0/analyst/src/Collector.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Contracts](/browser/backup-backup/tags/1.4.0/analyst/src/Contracts?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Contracts/AnalystContract.php](/browser/backup-backup/tags/1.4.0/analyst/src/Contracts/AnalystContract.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Contracts/CacheContract.php](/browser/backup-backup/tags/1.4.0/analyst/src/Contracts/CacheContract.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Contracts/HttpClientContract.php](/browser/backup-backup/tags/1.4.0/analyst/src/Contracts/HttpClientContract.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Contracts/RequestContract.php](/browser/backup-backup/tags/1.4.0/analyst/src/Contracts/RequestContract.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Contracts/RequestorContract.php](/browser/backup-backup/tags/1.4.0/analyst/src/Contracts/RequestorContract.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Contracts/TrackerContract.php](/browser/backup-backup/tags/1.4.0/analyst/src/Contracts/TrackerContract.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Core](/browser/backup-backup/tags/1.4.0/analyst/src/Core?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Core/AbstractFactory.php](/browser/backup-backup/tags/1.4.0/analyst/src/Core/AbstractFactory.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http](/browser/backup-backup/tags/1.4.0/analyst/src/Http?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/CurlHttpClient.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/CurlHttpClient.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/DummyHttpClient.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/DummyHttpClient.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/Requests](/browser/backup-backup/tags/1.4.0/analyst/src/Http/Requests?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/Requests/AbstractLoggerRequest.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/Requests/AbstractLoggerRequest.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/Requests/ActivateRequest.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/Requests/ActivateRequest.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/Requests/DeactivateRequest.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/Requests/DeactivateRequest.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/Requests/InstallRequest.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/Requests/InstallRequest.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/Requests/OptInRequest.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/Requests/OptInRequest.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/Requests/OptOutRequest.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/Requests/OptOutRequest.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/Requests/UninstallRequest.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/Requests/UninstallRequest.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Http/WordPressHttpClient.php](/browser/backup-backup/tags/1.4.0/analyst/src/Http/WordPressHttpClient.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Mutator.php](/browser/backup-backup/tags/1.4.0/analyst/src/Mutator.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Notices](/browser/backup-backup/tags/1.4.0/analyst/src/Notices?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Notices/Notice.php](/browser/backup-backup/tags/1.4.0/analyst/src/Notices/Notice.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/Notices/NoticeFactory.php](/browser/backup-backup/tags/1.4.0/analyst/src/Notices/NoticeFactory.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/src/helpers.php](/browser/backup-backup/tags/1.4.0/analyst/src/helpers.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/templates](/browser/backup-backup/tags/1.4.0/analyst/templates?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/templates/forms](/browser/backup-backup/tags/1.4.0/analyst/templates/forms?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/templates/forms/deactivate.php](/browser/backup-backup/tags/1.4.0/analyst/templates/forms/deactivate.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/templates/forms/install.php](/browser/backup-backup/tags/1.4.0/analyst/templates/forms/install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/templates/notice.php](/browser/backup-backup/tags/1.4.0/analyst/templates/notice.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/templates/optin.php](/browser/backup-backup/tags/1.4.0/analyst/templates/optin.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/templates/optout.php](/browser/backup-backup/tags/1.4.0/analyst/templates/optout.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/analyst/version.php](/browser/backup-backup/tags/1.4.0/analyst/version.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/backup-backup.php](/browser/backup-backup/tags/1.4.0/backup-backup.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes](/browser/backup-backup/tags/1.4.0/includes?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/.htaccess](/browser/backup-backup/tags/1.4.0/includes/.htaccess?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/activation.php](/browser/backup-backup/tags/1.4.0/includes/activation.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/ajax.php](/browser/backup-backup/tags/1.4.0/includes/ajax.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/analyst.php](/browser/backup-backup/tags/1.4.0/includes/analyst.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/backup-heart.php](/browser/backup-backup/tags/1.4.0/includes/backup-heart.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner](/browser/backup-backup/tags/1.4.0/includes/banner?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/assets](/browser/backup-backup/tags/1.4.0/includes/banner/assets?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/assets/index.min.js](/browser/backup-backup/tags/1.4.0/includes/banner/assets/index.min.js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/assets/style.min.css](/browser/backup-backup/tags/1.4.0/includes/banner/assets/style.min.css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/misc.php](/browser/backup-backup/tags/1.4.0/includes/banner/misc.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views](/browser/backup-backup/tags/1.4.0/includes/banner/views?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/index.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/index.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/imgs](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/imgs/background-images.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/imgs/background-images.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/imgs/background-texture-grey.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/imgs/background-texture-grey.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/imgs/big-colored-logo.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/imgs/big-colored-logo.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/imgs/colored-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/imgs/colored-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/imgs/white-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/imgs/white-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/install.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/installed.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/installed.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/bmi/upgrade.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/bmi/upgrade.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/imgs](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/imgs/background-texture-grey.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/imgs/background-texture-grey.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/imgs/big-colored-logo.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/imgs/big-colored-logo.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/imgs/colored-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/imgs/colored-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/imgs/main-background-image.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/imgs/main-background-image.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/imgs/secondary-background-image.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/imgs/secondary-background-image.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/imgs/white-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/imgs/white-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/install.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/installed.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/installed.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/cdp/upgrade.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/cdp/upgrade.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/background-bottom-left.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/background-bottom-left.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/background-bottom-right.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/background-bottom-right.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/background-top-left.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/background-top-left.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/background-top-right.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/background-top-right.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/big-colored-logo.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/big-colored-logo.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/colored-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/colored-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/face1.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/face1.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/face2.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/face2.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/face3.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/face3.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/face4.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/face4.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/imgs/white-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/imgs/white-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/fit/install.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/fit/install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/imgs](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/imgs/background-images.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/imgs/background-images.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/imgs/background-texture-green.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/imgs/background-texture-green.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/imgs/background-texture-grey.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/imgs/background-texture-grey.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/imgs/big-colored-logo.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/imgs/big-colored-logo.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/imgs/colored-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/imgs/colored-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/imgs/white-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/imgs/white-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/install.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/mpu/installed.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/mpu/installed.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red/imgs](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red/imgs/background-top-left.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red/imgs/background-top-left.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red/imgs/big-colored-logo-rr.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red/imgs/big-colored-logo-rr.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red/imgs/colored-logo-rr.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red/imgs/colored-logo-rr.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red/imgs/main-background-image.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red/imgs/main-background-image.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red/imgs/not-colored-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red/imgs/not-colored-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red/install.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red/install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/red/installed.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/red/installed.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp/imgs](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp/imgs/background-image-1.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp/imgs/background-image-1.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp/imgs/background-image-2.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp/imgs/background-image-2.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp/imgs/background-image-3.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp/imgs/background-image-3.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp/imgs/big-colored-logo.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp/imgs/big-colored-logo.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp/imgs/colored-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp/imgs/colored-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp/imgs/white-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp/imgs/white-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/twp/install.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/twp/install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs/background-icons.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs/background-icons.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs/background-image.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs/background-image.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs/big-colored-logo.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs/big-colored-logo.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs/colored-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs/colored-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs/play-icon.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs/play-icon.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs/ribbon-icon.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs/ribbon-icon.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs/video-background.png](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs/video-background.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/imgs/white-logo.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/imgs/white-logo.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/install.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/installed.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/installed.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/part-install.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/part-install.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/part-upgrade.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/part-upgrade.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/projects/usm/upgrade.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/projects/usm/upgrade.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/static](/browser/backup-backup/tags/1.4.0/includes/banner/views/static?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/static/imgs](/browser/backup-backup/tags/1.4.0/includes/banner/views/static/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/static/imgs/already-installed.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/static/imgs/already-installed.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/static/imgs/check-icon.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/static/imgs/check-icon.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/static/imgs/clock-icon.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/static/imgs/clock-icon.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/static/imgs/rating.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/static/imgs/rating.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/static/imgs/white-arrow-right.svg](/browser/backup-backup/tags/1.4.0/includes/banner/views/static/imgs/white-arrow-right.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/banner/views/static/tabs.php](/browser/backup-backup/tags/1.4.0/includes/banner/views/static/tabs.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/bypasser.php](/browser/backup-backup/tags/1.4.0/includes/bypasser.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/check](/browser/backup-backup/tags/1.4.0/includes/check?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/check/checker.php](/browser/backup-backup/tags/1.4.0/includes/check/checker.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/check/system\_info.php](/browser/backup-backup/tags/1.4.0/includes/check/system_info.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/cli](/browser/backup-backup/tags/1.4.0/includes/cli?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/cli-handler.php](/browser/backup-backup/tags/1.4.0/includes/cli-handler.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/cli/php\_cli\_finder.php](/browser/backup-backup/tags/1.4.0/includes/cli/php_cli_finder.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/cli/version\_check.php](/browser/backup-backup/tags/1.4.0/includes/cli/version_check.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/compatibility.php](/browser/backup-backup/tags/1.4.0/includes/compatibility.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/config.php](/browser/backup-backup/tags/1.4.0/includes/config.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/constants.php](/browser/backup-backup/tags/1.4.0/includes/constants.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/cron](/browser/backup-backup/tags/1.4.0/includes/cron?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/cron/handler.php](/browser/backup-backup/tags/1.4.0/includes/cron/handler.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard](/browser/backup-backup/tags/1.4.0/includes/dashboard?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter/AA-Template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter/AA-Template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter/other\_config.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter/other_config.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter/save-button.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter/save-button.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter/staging.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter/staging.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter/store\_config.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter/store_config.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter/troubleshooting.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter/troubleshooting.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter/what\_backed\_up.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter/what_backed_up.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/chapter/where\_config.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/chapter/where_config.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/AA-Modal-Template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/AA-Modal-Template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/after-logs-sent.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/after-logs-sent.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/backup-error-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/backup-error-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/backup-progress-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/backup-progress-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/backup-success-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/backup-success-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/bfs-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/bfs-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/delete-confirm-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/delete-confirm-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/freeze-loading.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/freeze-loading.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/logs-sharing-ask.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/logs-sharing-ask.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/pre-restore-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/pre-restore-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/prenotice-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/prenotice-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/reset-confirm-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/reset-confirm-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/restore-error-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/restore-error-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/restore-progress-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/restore-progress-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/restore-success-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/restore-success-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/staging-delete-confirm-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/staging-delete-confirm-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/staging-error-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/staging-error-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/staging-prenotice-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/staging-prenotice-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/staging-progress-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/staging-progress-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/staging-rename-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/staging-rename-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/staging-success-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/staging-success-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/upload-exist-file-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/upload-exist-file-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/upload-invalid-manifest-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/upload-invalid-manifest-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/upload-success-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/upload-success-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modals/upload-wrong-file-modal.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modals/upload-wrong-file-modal.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/backup-ongoing.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/backup-ongoing.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/backup\_controller.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/backup_controller.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/backups-table-header.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/backups-table-header.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/backups-under-table.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/backups-under-table.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/email-errors.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/email-errors.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/quota-errors.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/quota-errors.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/super-quick-migration.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/super-quick-migration.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/support-chat.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/support-chat.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/modules/upload-backup.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/modules/upload-backup.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/settings.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/settings.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates/AA-Template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates/AA-Template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates/backup-row-template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates/backup-row-template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates/dropdown-template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates/dropdown-template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates/exclusion-rule-template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates/exclusion-rule-template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates/option-template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates/option-template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates/premium-overlay.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates/premium-overlay.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates/staging-row-template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates/staging-row-template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/templates/stg-option-template.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/templates/stg-option-template.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/dashboard/translations.php](/browser/backup-backup/tags/1.4.0/includes/dashboard/translations.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database](/browser/backup-backup/tags/1.4.0/includes/database?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database/better-backup-v3.php](/browser/backup-backup/tags/1.4.0/includes/database/better-backup-v3.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database/better-backup.php](/browser/backup-backup/tags/1.4.0/includes/database/better-backup.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database/better-restore.php](/browser/backup-backup/tags/1.4.0/includes/database/better-restore.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database/even-better-restore-v3.php](/browser/backup-backup/tags/1.4.0/includes/database/even-better-restore-v3.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database/even-better-restore-v4.php](/browser/backup-backup/tags/1.4.0/includes/database/even-better-restore-v4.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database/manager.php](/browser/backup-backup/tags/1.4.0/includes/database/manager.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database/search-replace.php](/browser/backup-backup/tags/1.4.0/includes/database/search-replace.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/database/smart-sort.php](/browser/backup-backup/tags/1.4.0/includes/database/smart-sort.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/extracter](/browser/backup-backup/tags/1.4.0/includes/extracter?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/extracter/extract.php](/browser/backup-backup/tags/1.4.0/includes/extracter/extract.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:](/browser/backup-backup/tags/1.4.0/includes/file%3A?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:/Users](/browser/backup-backup/tags/1.4.0/includes/file%3A/Users?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:/Users/iclyde](/browser/backup-backup/tags/1.4.0/includes/file%3A/Users/iclyde?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:/Users/iclyde/Development](/browser/backup-backup/tags/1.4.0/includes/file%3A/Users/iclyde/Development?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:/Users/iclyde/Development/Web](/browser/backup-backup/tags/1.4.0/includes/file%3A/Users/iclyde/Development/Web?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:/Users/iclyde/Development/Web/wordpress](/browser/backup-backup/tags/1.4.0/includes/file%3A/Users/iclyde/Development/Web/wordpress?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:/Users/iclyde/Development/Web/wordpress/wp-content](/browser/backup-backup/tags/1.4.0/includes/file%3A/Users/iclyde/Development/Web/wordpress/wp-content?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:/Users/iclyde/Development/Web/wordpress/wp-content/backup-migration-XDXDXD](/browser/backup-backup/tags/1.4.0/includes/file%3A/Users/iclyde/Development/Web/wordpress/wp-content/backup-migration-XDXDXD?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/file:/Users/iclyde/Development/Web/wordpress/wp-content/backup-migration-XDXDXD/background-errors.log](/browser/backup-backup/tags/1.4.0/includes/file%3A/Users/iclyde/Development/Web/wordpress/wp-content/backup-migration-XDXDXD/background-errors.log?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/htaccess](/browser/backup-backup/tags/1.4.0/includes/htaccess?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/htaccess/.autologin.php](/browser/backup-backup/tags/1.4.0/includes/htaccess/.autologin.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/htaccess/.htaccess](/browser/backup-backup/tags/1.4.0/includes/htaccess/.htaccess?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/htaccess/.litespeed](/browser/backup-backup/tags/1.4.0/includes/htaccess/.litespeed?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/htaccess/default.json](/browser/backup-backup/tags/1.4.0/includes/htaccess/default.json?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/htaccess/index.html](/browser/backup-backup/tags/1.4.0/includes/htaccess/index.html?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/initializer.php](/browser/backup-backup/tags/1.4.0/includes/initializer.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/logger.php](/browser/backup-backup/tags/1.4.0/includes/logger.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/progress](/browser/backup-backup/tags/1.4.0/includes/progress?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/progress/logger-only.php](/browser/backup-backup/tags/1.4.0/includes/progress/logger-only.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/progress/migration.php](/browser/backup-backup/tags/1.4.0/includes/progress/migration.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/progress/staging.php](/browser/backup-backup/tags/1.4.0/includes/progress/staging.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/progress/zip.php](/browser/backup-backup/tags/1.4.0/includes/progress/zip.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/restore-batching.php](/browser/backup-backup/tags/1.4.0/includes/restore-batching.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/scanner](/browser/backup-backup/tags/1.4.0/includes/scanner?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/scanner/backups.php](/browser/backup-backup/tags/1.4.0/includes/scanner/backups.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/scanner/files.php](/browser/backup-backup/tags/1.4.0/includes/scanner/files.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/staging](/browser/backup-backup/tags/1.4.0/includes/staging?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/staging/controller.php](/browser/backup-backup/tags/1.4.0/includes/staging/controller.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/staging/local.php](/browser/backup-backup/tags/1.4.0/includes/staging/local.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/staging/tastewp.php](/browser/backup-backup/tags/1.4.0/includes/staging/tastewp.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/uploader](/browser/backup-backup/tags/1.4.0/includes/uploader?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/uploader/chunks.php](/browser/backup-backup/tags/1.4.0/includes/uploader/chunks.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/zipper](/browser/backup-backup/tags/1.4.0/includes/zipper?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/zipper/src](/browser/backup-backup/tags/1.4.0/includes/zipper/src?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/zipper/src/zip.php](/browser/backup-backup/tags/1.4.0/includes/zipper/src/zip.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/includes/zipper/zipping.php](/browser/backup-backup/tags/1.4.0/includes/zipper/zipping.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules](/browser/backup-backup/tags/1.4.0/modules?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/assets](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/assets?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/assets/css](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/assets/css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/assets/css/styles.css](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/assets/css/styles.css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/assets/imgs](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/assets/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/assets/imgs/decor.png](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/assets/imgs/decor.png?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/assets/js](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/assets/js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/assets/js/script.js](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/assets/js/script.js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/misc.php](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/misc.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/templates](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/templates?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/gdrivebanner/templates/banner.php](/browser/backup-backup/tags/1.4.0/modules/gdrivebanner/templates/banner.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review](/browser/backup-backup/tags/1.4.0/modules/review?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets](/browser/backup-backup/tags/1.4.0/modules/review/assets?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/css](/browser/backup-backup/tags/1.4.0/modules/review/assets/css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/css/style.css](/browser/backup-backup/tags/1.4.0/modules/review/assets/css/style.css?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/imgs](/browser/backup-backup/tags/1.4.0/modules/review/assets/imgs?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/imgs/BM-background.svg](/browser/backup-backup/tags/1.4.0/modules/review/assets/imgs/BM-background.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/imgs/background-pattern.svg](/browser/backup-backup/tags/1.4.0/modules/review/assets/imgs/background-pattern.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/imgs/main-image-part-2.svg](/browser/backup-backup/tags/1.4.0/modules/review/assets/imgs/main-image-part-2.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/imgs/main-image-part-4.svg](/browser/backup-backup/tags/1.4.0/modules/review/assets/imgs/main-image-part-4.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/imgs/main-image.svg](/browser/backup-backup/tags/1.4.0/modules/review/assets/imgs/main-image.svg?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/js](/browser/backup-backup/tags/1.4.0/modules/review/assets/js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/assets/js/script.js](/browser/backup-backup/tags/1.4.0/modules/review/assets/js/script.js?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/review.php](/browser/backup-backup/tags/1.4.0/modules/review/review.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/views](/browser/backup-backup/tags/1.4.0/modules/review/views?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/modules/review/views/banner.php](/browser/backup-backup/tags/1.4.0/modules/review/views/banner.php?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/readme.txt](/browser/backup-backup/tags/1.4.0/readme.txt?rev=3012745 "Show entry in browser")
  (added)
* [tags/1.4.0/uninstall.php](/browser/backup-backup/tags/1.4.0/uninstall.php?rev=3012745 "Show entry in browser")
  (added)
* [trunk/readme.txt](/browser/backup-backup/trunk/readme.txt?rev=3012745 "Show entry in browser")
  (modified)
  ([3 diffs](#file395 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [backup-backup/trunk/readme.txt](/changeset/3012745/backup-backup/trunk/readme.txt "Show the changeset 3012745 restricted to backup-backup/trunk/readme.txt")

  | [r3010013](/browser/backup-backup/trunk/readme.txt?rev=3010013#L4 "Show revision 3010013 of this file in browser") | [r3012745](/browser/backup-backup/trunk/readme.txt?rev=3012745#L4 "Show revision 3012745 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Requires at least: 4.6 |
  | 5 | 5 | Tested up to: 6.4.2 |
  | 6 |  | Stable tag: 1.~~3.9~~ |
  |  | 6 | Stable tag: 1.4.0 |
  | 7 | 7 | License: GPLv3 |
  | 8 | 8 | Requires PHP: 5.6 |
  | […](/browser/backup-backup/trunk/readme.txt?rev=3010013#L163) | […](/browser/backup-backup/trunk/readme.txt?rev=3012745#L163) |  |
  | 163 | 163 |  |
  | 164 | 164 | == Changelog == |
  |  | 165 |  |
  |  | 166 | = 1.4.0 = |
  |  | 167 | \* [PRO] Fixed issues with dead output of Google Drive backups |
  |  | 168 | \* [FIX] Improved plugin security (important upgrade – CVE-2023-6972, CVE-2023-6971, CVE-2023-7002) |
  | 165 | 169 |  |
  | 166 | 170 | = 1.3.9 = |
  | […](/browser/backup-backup/trunk/readme.txt?rev=3010013#L695) | […](/browser/backup-backup/trunk/readme.txt?rev=3012745#L699) |  |
  | 695 | 699 | == Upgrade Notice == |
  | 696 | 700 |  |
  | 697 |  | = 1.~~3.9~~ = |
  | 698 |  | What's new in 1.~~3.9~~? |
  | 699 |  | \* ~~[FIX] Fixed issue where user could not change storage path that contain "dot"~~ |
  | 700 |  | \* [~~FIX] Adjusted our hotfix patches to not prevent third party ajax calls without nonce~~s |
  | 701 |  | \* [~~NOTE] Tested with PHP 8.3 (+CLI cmds)~~ |
  |  | 701 | = 1.4.0 = |
  |  | 702 | What's new in 1.4.0? |
  |  | 703 | \* IMPORTANT SECURITY UPGRADE |
  |  | 704 | \* [PRO] Fixed issues with dead output of Google Drive backups |
  |  | 705 | \* [FIX] Improved plugin security (important upgrade – CVE-2023-6972, CVE-2023-6971, CVE-2023-7002) |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3012745)
* [Zip Archive](?format=zip&new=3012745)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_ecfe12f1_20250114_234043.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fbackup-backup%2Ftags%2F1.3.9%2Fincludes%2Fbackup-heart.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/backup-backup/tags/1.3.9/includes/backup-heart.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/backup-backup/tags/1.3.9/includes/backup-heart.php)

---

# [source:](/browser?order=name "Go to repository root") [backup-backup](/browser/backup-backup?order=name "View backup-backup")/[tags](/browser/backup-backup/tags?order=name "View tags")/[1.3.9](/browser/backup-backup/tags/1.3.9?order=name "View 1.3.9")/[includes](/browser/backup-backup/tags/1.3.9/includes?order=name "View includes")/[backup-heart.php](/browser/backup-backup/tags/1.3.9/includes/backup-heart.php?order=name "View backup-heart.php")

View diff against:

View revision:

| [Last change](/changeset/3010013/backup-backup/tags/1.3.9/includes/backup-heart.php "View differences") on this file was [3010013](/changeset/3010013/ "View changeset 3010013"), checked in by iclyde, [13 months ago](/timeline?from=2023-12-14T12%3A49%3A30Z&precision=second "See timeline at 12/14/2023 12:49:30 PM") |
| --- |
| Version 1.3.9 |
| **File size:** 5.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | // Namespace |
| [4](#L4) | namespace BMI\Plugin\Heart; |
| [5](#L5) |  |
| [6](#L6) | // Allow only POST requests |
| [7](#L7) | if ($\_SERVER['REQUEST\_METHOD'] !== 'POST') { |
| [8](#L8) | exit; |
| [9](#L9) | } |
| [10](#L10) |  |
| [11](#L11) | function isFunctionEnabled($func) { |
| [12](#L12) | $disabled = explode(',', ini\_get('disable\_functions')); |
| [13](#L13) | $isDisabled = in\_array($func, $disabled); |
| [14](#L14) | if (!$isDisabled && function\_exists($func)) return true; |
| [15](#L15) | else return false; |
| [16](#L16) | } |
| [17](#L17) |  |
| [18](#L18) | // Make sure getallheaders will work |
| [19](#L19) | if (!function\_exists('\_\_getallheaders')) { |
| [20](#L20) | function \_\_getallheaders() { |
| [21](#L21) | $headers = []; |
| [22](#L22) | foreach ($\_SERVER as $name => $value) { |
| [23](#L23) | if (substr($name, 0, 5) == 'HTTP\_') { |
| [24](#L24) | $headers[str\_replace(' ', '-', ucwords(strtolower(str\_replace('\_', ' ', substr($name, 5)))))] = $value; |
| [25](#L25) | } |
| [26](#L26) | } |
| [27](#L27) | return $headers; |
| [28](#L28) | } |
| [29](#L29) | } |
| [30](#L30) |  |
| [31](#L31) | // Filter and prevent PHP filter injection |
| [32](#L32) | function filterChainFix($content) { |
| [33](#L33) |  |
| [34](#L34) | // Make sure it exist and is string |
| [35](#L35) | if (!is\_string($content)) die("Incorrect parameters."); |
| [36](#L36) |  |
| [37](#L37) | // Check if it's not larger than max allowed path length (default systems) |
| [38](#L38) | if (strlen($content) > 256) die("Incorrect parameters."); |
| [39](#L39) |  |
| [40](#L40) | // Check if the path does not contain "php:" |
| [41](#L41) | if (strpos($content, "php:")) die("Incorrect parameters."); |
| [42](#L42) |  |
| [43](#L43) | // Check if the path contain "|", it's not possible to use this character with our backups paths |
| [44](#L44) | if (strpos($content, "|")) die("Incorrect parameters."); |
| [45](#L45) |  |
| [46](#L46) | // Check if the directory/file exist otherwise fail |
| [47](#L47) | if (!(is\_dir($content) || file\_exists($content))) die("Incorrect parameters."); |
| [48](#L48) |  |
| [49](#L49) | // Return correct content |
| [50](#L50) | return $content; |
| [51](#L51) |  |
| [52](#L52) | } |
| [53](#L53) |  |
| [54](#L54) | // Get fields from header |
| [55](#L55) | if (isFunctionEnabled('getallheaders')) { |
| [56](#L56) | $fields = getallheaders(); |
| [57](#L57) | } |
| [58](#L58) |  |
| [59](#L59) | // Check headers |
| [60](#L60) | if (!isset($fields['Content-Content']) && !isset($fields['content-content'])) { |
| [61](#L61) | $fields = \_\_getallheaders(); |
| [62](#L62) | } |
| [63](#L63) |  |
| [64](#L64) | // Lowercase |
| [65](#L65) | foreach ($fields as $key => $value) { |
| [66](#L66) | $buffer = $value; |
| [67](#L67) | unset($fields[$key]); |
| [68](#L68) | $fields[strtolower($key)] = $value; |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | // Let other files know that it's CURL request |
| [72](#L72) | define('BMI\_CURL\_REQUEST', true); |
| [73](#L73) | define('BMI\_CLI\_REQUEST', false); |
| [74](#L74) |  |
| [75](#L75) | // Load some constants |
| [76](#L76) | define('ABSPATH', filterChainFix($fields['content-abs'])); |
| [77](#L77) | if (substr($fields['content-content'], -1) != '/') { |
| [78](#L78) | $fields['content-content'] = $fields['content-content'] . '/'; |
| [79](#L79) | } |
| [80](#L80) | if (!defined('WP\_CONTENT\_DIR')) { |
| [81](#L81) | define('WP\_CONTENT\_DIR', $fields['content-content']); |
| [82](#L82) | } |
| [83](#L83) | define('BMI\_CONFIG\_DIR', $fields['content-configdir']); |
| [84](#L84) | define('BMI\_BACKUPS', $fields['content-backups']); |
| [85](#L85) | define('BMI\_ROOT\_DIR', filterChainFix($fields['content-dir'])); |
| [86](#L86) | // define('BMI\_SHARE\_LOGS\_ALLOWED', $fields['content-shareallowed']); |
| [87](#L87) | define('BMI\_INCLUDES', BMI\_ROOT\_DIR . 'includes'); |
| [88](#L88) | define('BMI\_SAFELIMIT', intval($fields['content-safelimit'])); |
| [89](#L89) |  |
| [90](#L90) | // Replace error-log file |
| [91](#L91) | if (isFunctionEnabled('ini\_set')) { |
| [92](#L92) | @ini\_set('log\_errors', 1); |
| [93](#L93) | @ini\_set('error\_log', BMI\_CONFIG\_DIR . '/background-errors.log'); |
| [94](#L94) | } |
| [95](#L95) |  |
| [96](#L96) | // Increase max execution time |
| [97](#L97) | if (isFunctionEnabled('set\_time\_limit')) @set\_time\_limit(259200); |
| [98](#L98) | if (isFunctionEnabled('ini\_set')) { |
| [99](#L99) | @ini\_set('memory\_limit', (BMI\_SAFELIMIT \* 4 + 16) . 'M'); |
| [100](#L100) | @ini\_set('max\_input\_time', '259200'); |
| [101](#L101) | @ini\_set('max\_execution\_time', '259200'); |
| [102](#L102) | @ini\_set('session.gc\_maxlifetime', '1200'); |
| [103](#L103) | } |
| [104](#L104) |  |
| [105](#L105) | // Let the server know it's server-side script |
| [106](#L106) | if (isFunctionEnabled('ignore\_user\_abort')) { |
| [107](#L107) | @ignore\_user\_abort(true); |
| [108](#L108) | } |
| [109](#L109) |  |
| [110](#L110) | if (!isset($fields['content-browser'])) $fields['content-browser'] = false; |
| [111](#L111) | if (!($fields['content-browser'] === 'true' || $fields['content-browser'] === true)) { |
| [112](#L112) |  |
| [113](#L113) | // Also return something, so it can close the connection |
| [114](#L114) | ob\_start(); |
| [115](#L115) |  |
| [116](#L116) | // The message |
| [117](#L117) | echo 'This is server side script, you will not get any response here.'; |
| [118](#L118) |  |
| [119](#L119) | // Don't block server handler |
| [120](#L120) | if (isFunctionEnabled('session\_write\_close')) { |
| [121](#L121) | @session\_write\_close(); |
| [122](#L122) | } |
| [123](#L123) |  |
| [124](#L124) | // Set proper headers |
| [125](#L125) | header('Content-Length: ' . ob\_get\_length()); |
| [126](#L126) | header('Connection: close'); |
| [127](#L127) |  |
| [128](#L128) | // End the output for user |
| [129](#L129) | ob\_end\_clean(); |
| [130](#L130) | flush(); |
| [131](#L131) |  |
| [132](#L132) | } |
| [133](#L133) |  |
| [134](#L134) | // Start output for server |
| [135](#L135) | ob\_start(); |
| [136](#L136) |  |
| [137](#L137) | // Catch anything if possible |
| [138](#L138) | try { |
| [139](#L139) |  |
| [140](#L140) | // Load bypasser |
| [141](#L141) | require\_once filterChainFix(BMI\_INCLUDES) . '/bypasser.php'; |
| [142](#L142) | $request = new BMI\_Backup\_Heart(true, |
| [143](#L143) | $fields['content-configdir'], |
| [144](#L144) | $fields['content-content'], |
| [145](#L145) | $fields['content-backups'], |
| [146](#L146) | filterChainFix($fields['content-abs']), |
| [147](#L147) | filterChainFix($fields['content-dir']), |
| [148](#L148) | $fields['content-url'], |
| [149](#L149) | [ |
| [150](#L150) | 'identy' => $fields['content-identy'], |
| [151](#L151) | 'manifest' => $fields['content-manifest'], |
| [152](#L152) | 'safelimit' => $fields['content-safelimit'], |
| [153](#L153) | 'rev' => $fields['content-rev'], |
| [154](#L154) | 'backupname' => $fields['content-name'], |
| [155](#L155) | 'start' => $fields['content-start'], |
| [156](#L156) | 'filessofar' => $fields['content-filessofar'], |
| [157](#L157) | 'total\_files' => $fields['content-total'], |
| [158](#L158) | 'browser' => $fields['content-browser'], |
| [159](#L159) | 'bmitmp' => $fields['content-bmitmp'] |
| [160](#L160) | ], |
| [161](#L161) | $fields['content-it'], |
| [162](#L162) | $fields['content-dbit'], |
| [163](#L163) | $fields['content-dblast'] |
| [164](#L164) | ); |
| [165](#L165) |  |
| [166](#L166) | // Handle request |
| [167](#L167) | $request->handle\_batch(); |
| [168](#L168) |  |
| [169](#L169) | } catch (\Exception $e) { |
| [170](#L170) |  |
| [171](#L171) | error\_log('There was an error with Backup Migration plugin: ' . $e->getMessage()); |
| [172](#L172) | error\_log(strval($e)); |
| [173](#L173) |  |
| [174](#L174) | } catch (\Throwable $e) { |
| [175](#L175) |  |
| [176](#L176) | error\_log('There was an error with Backup Migration plugin: ' . $e->getMessage()); |
| [177](#L177) | error\_log(strval($e)); |
| [178](#L178) |  |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | // End the server task |
| [182](#L182) | ob\_end\_clean(); exit; |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/backup-backup/tags/1.3.9/includes/backup-heart.php?format=txt)
* [Original Format](/export/3222525/backup-backup/tags/1.3.9/includes/backup-heart.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_1750ca59_20250114_234059.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fbackup-backup%2Ftags%2F1.3.9%2Fincludes%2Fbypasser.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/backup-backup/tags/1.3.9/includes/bypasser.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/backup-backup/tags/1.3.9/includes/bypasser.php)

---

# [source:](/browser?order=name "Go to repository root") [backup-backup](/browser/backup-backup?order=name "View backup-backup")/[tags](/browser/backup-backup/tags?order=name "View tags")/[1.3.9](/browser/backup-backup/tags/1.3.9?order=name "View 1.3.9")/[includes](/browser/backup-backup/tags/1.3.9/includes?order=name "View includes")/[bypasser.php](/browser/backup-backup/tags/1.3.9/includes/bypasser.php?order=name "View bypasser.php")

View diff against:

View revision:

| [Last change](/changeset/3010013/backup-backup/tags/1.3.9/includes/bypasser.php "View differences") on this file was [3010013](/changeset/3010013/ "View changeset 3010013"), checked in by iclyde, [13 months ago](/timeline?from=2023-12-14T12%3A49%3A30Z&precision=second "See timeline at 12/14/2023 12:49:30 PM") |
| --- |
| Version 1.3.9 |
| **File size:** 40.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | // Namespace |
| [4](#L4) | namespace BMI\Plugin\Heart; |
| [5](#L5) |  |
| [6](#L6) | // Usage |
| [7](#L7) | use BMI\Plugin\BMI\_Logger AS Logger; |
| [8](#L8) | use BMI\Plugin\Progress\BMI\_ZipProgress AS Output; |
| [9](#L9) | use BMI\Plugin\Checker\System\_Info as SI; |
| [10](#L10) | use BMI\Plugin\Dashboard as Dashboard; |
| [11](#L11) | use BMI\Plugin\Database\BMI\_Database as Database; |
| [12](#L12) | use BMI\Plugin\Database\BMI\_Database\_Exporter as BetterDatabaseExport; |
| [13](#L13) | use BMI\Plugin\Backup\_Migration\_Plugin as BMP; |
| [14](#L14) | use BMI\Plugin\BMI\_Pro\_Core as Pro\_Core; |
| [15](#L15) | use BMI\Plugin AS BMI; |
| [16](#L16) |  |
| [17](#L17) | // Exit on direct access |
| [18](#L18) | if (!(defined('BMI\_CURL\_REQUEST') || defined('ABSPATH'))) exit; |
| [19](#L19) |  |
| [20](#L20) | // Fixes for some cases |
| [21](#L21) | require\_once BMI\_INCLUDES . '/compatibility.php'; |
| [22](#L22) |  |
| [23](#L23) | /\*\* |
| [24](#L24) | \* Main class to handle heartbeat of the backup |
| [25](#L25) | \*/ |
| [26](#L26) | class BMI\_Backup\_Heart { |
| [27](#L27) |  |
| [28](#L28) | public $it; |
| [29](#L29) | public $dbit; |
| [30](#L30) | public $abs; |
| [31](#L31) | public $dir; |
| [32](#L32) | public $url; |
| [33](#L33) | public $curl; |
| [34](#L34) | public $config; |
| [35](#L35) | public $content; |
| [36](#L36) | public $backups; |
| [37](#L37) | public $dblast; |
| [38](#L38) | public $output; |
| [39](#L39) |  |
| [40](#L40) | public $identy; |
| [41](#L41) | public $manifest; |
| [42](#L42) | public $backupname; |
| [43](#L43) | public $safelimit; |
| [44](#L44) | public $total\_files; |
| [45](#L45) | public $rev; |
| [46](#L46) | public $backupstart; |
| [47](#L47) | public $filessofar; |
| [48](#L48) | public $identyfile; |
| [49](#L49) | public $browserSide; |
| [50](#L50) |  |
| [51](#L51) | public $identyFolder; |
| [52](#L52) | public $fileList; |
| [53](#L53) | public $dbfile; |
| [54](#L54) | public $db\_dir\_v2; |
| [55](#L55) | public $db\_v2\_engine; |
| [56](#L56) |  |
| [57](#L57) | public $headersSet; |
| [58](#L58) | public $final\_made; |
| [59](#L59) | public $final\_batch; |
| [60](#L60) | public $dbitJustFinished; |
| [61](#L61) | public $lock\_cli; |
| [62](#L62) |  |
| [63](#L63) | public $\_zip; |
| [64](#L64) | public $\_lib; |
| [65](#L65) | public $batches\_left; |
| [66](#L66) |  |
| [67](#L67) | // Prepare the request details |
| [68](#L68) | function \_\_construct($curl = false, $config = false, $content = false, $backups = false, $abs = false, $dir = false, $url = false, $remote\_settings = [], $it = 0, $dbit = 0, $dblast = 0) { |
| [69](#L69) |  |
| [70](#L70) | if (isset($remote\_settings['bmitmp'])) { |
| [71](#L71) | if (!defined('BMI\_TMP')) define('BMI\_TMP', $remote\_settings['bmitmp']); |
| [72](#L72) | } |
| [73](#L73) |  |
| [74](#L74) | $this->it = intval($it); |
| [75](#L75) | $this->dbit = intval($dbit); |
| [76](#L76) | $this->abs = $abs; |
| [77](#L77) | $this->dir = $dir; |
| [78](#L78) | $this->url = $url; |
| [79](#L79) | $this->curl = $curl; |
| [80](#L80) | $this->config = $config; |
| [81](#L81) | $this->content = $content; |
| [82](#L82) | $this->backups = $backups; |
| [83](#L83) | $this->dblast = $dblast; |
| [84](#L84) |  |
| [85](#L85) | $this->identy = $remote\_settings['identy']; |
| [86](#L86) | $this->manifest = $remote\_settings['manifest']; |
| [87](#L87) | $this->backupname = $remote\_settings['backupname']; |
| [88](#L88) | $this->safelimit = intval($remote\_settings['safelimit']); |
| [89](#L89) | $this->total\_files = $remote\_settings['total\_files']; |
| [90](#L90) | $this->rev = intval($remote\_settings['rev']); |
| [91](#L91) | $this->backupstart = $remote\_settings['start']; |
| [92](#L92) | $this->filessofar = intval($remote\_settings['filessofar']); |
| [93](#L93) | $this->identyfile = BMI\_TMP . DIRECTORY\_SEPARATOR . '.' . $this->identy; |
| [94](#L94) | $this->browserSide = ($remote\_settings['browser'] === true || $remote\_settings['browser'] === 'true') ? true : false; |
| [95](#L95) |  |
| [96](#L96) | $this->identyFolder = BMI\_TMP . DIRECTORY\_SEPARATOR . 'bg-' . $this->identy; |
| [97](#L97) | $this->fileList = BMI\_TMP . DIRECTORY\_SEPARATOR . 'files\_latest.list'; |
| [98](#L98) | $this->dbfile = BMI\_TMP . DIRECTORY\_SEPARATOR . 'bmi\_database\_backup.sql'; |
| [99](#L99) | $this->db\_dir\_v2 = BMI\_TMP . DIRECTORY\_SEPARATOR . 'db\_tables'; |
| [100](#L100) | $this->db\_v2\_engine = false; |
| [101](#L101) |  |
| [102](#L102) | $this->headersSet = false; |
| [103](#L103) | $this->final\_made = false; |
| [104](#L104) | $this->final\_batch = false; |
| [105](#L105) | $this->dbitJustFinished = false; |
| [106](#L106) |  |
| [107](#L107) | $this->lock\_cli = BMI\_BACKUPS . '/.backup\_cli\_lock'; |
| [108](#L108) | if ($this->it > 1) @touch($this->lock\_cli); |
| [109](#L109) |  |
| [110](#L110) | } |
| [111](#L111) |  |
| [112](#L112) | // Human size from bytes |
| [113](#L113) | public static function humanSize($bytes) { |
| [114](#L114) | if (is\_int($bytes)) { |
| [115](#L115) | $label = ['B', 'KB', 'MB', 'GB', 'TB', 'PB']; |
| [116](#L116) | for ($i = 0; $bytes >= 1024 && $i < (count($label) - 1); $bytes /= 1024, $i++); |
| [117](#L117) |  |
| [118](#L118) | return (round($bytes, 2) . " " . $label[$i]); |
| [119](#L119) | } else return $bytes; |
| [120](#L120) | } |
| [121](#L121) |  |
| [122](#L122) | // Create new process |
| [123](#L123) | public function send\_beat($manual = false, &$logger = null) { |
| [124](#L124) |  |
| [125](#L125) | try { |
| [126](#L126) |  |
| [127](#L127) | $header = array( |
| [128](#L128) | // 'Content-Type:Application/x-www-form-urlencoded', |
| [129](#L129) | 'Content-Accept:\*/\*', |
| [130](#L130) | 'Access-Control-Allow-Origin:\*', |
| [131](#L131) | 'Content-ConfigDir:' . $this->config, |
| [132](#L132) | 'Content-Content:' . $this->content, |
| [133](#L133) | 'Content-Backups:' . $this->backups, |
| [134](#L134) | 'Content-Identy:' . $this->identy, |
| [135](#L135) | 'Content-Url:' . $this->url, |
| [136](#L136) | 'Content-Abs:' . $this->abs, |
| [137](#L137) | 'Content-Dir:' . $this->dir, |
| [138](#L138) | 'Content-Manifest:' . $this->manifest, |
| [139](#L139) | 'Content-Name:' . $this->backupname, |
| [140](#L140) | 'Content-Safelimit:' . $this->safelimit, |
| [141](#L141) | 'Content-Start:' . $this->backupstart, |
| [142](#L142) | 'Content-Filessofar:' . $this->filessofar, |
| [143](#L143) | 'Content-Total:' . $this->total\_files, |
| [144](#L144) | 'Content-Rev:' . $this->rev, |
| [145](#L145) | 'Content-It:' . $this->it, |
| [146](#L146) | 'Content-Dbit:' . $this->dbit, |
| [147](#L147) | 'Content-Dblast:' . $this->dblast, |
| [148](#L148) | 'Content-Bmitmp:' . BMI\_TMP, |
| [149](#L149) | 'Content-Browser:' . $this->browserSide ? 'true' : 'false' |
| [150](#L150) | ); |
| [151](#L151) |  |
| [152](#L152) | // if (!defined('CURL\_HTTP\_VERSION\_2\_0')) { |
| [153](#L153) | //   define('CURL\_HTTP\_VERSION\_2\_0', CURL\_HTTP\_VERSION\_1\_0); |
| [154](#L154) | // } |
| [155](#L155) |  |
| [156](#L156) | // $ckfile = tempnam(BMI\_TMP, "CURLCOOKIE"); |
| [157](#L157) | $c = curl\_init(); |
| [158](#L158) | curl\_setopt($c, CURLOPT\_POST, 1); |
| [159](#L159) | curl\_setopt($c, CURLOPT\_TIMEOUT, 10); |
| [160](#L160) | // curl\_setopt($c, CURLOPT\_NOBODY, true); |
| [161](#L161) | curl\_setopt($c, CURLOPT\_VERBOSE, false); |
| [162](#L162) | curl\_setopt($c, CURLOPT\_HEADER, false); |
| [163](#L163) | // curl\_setopt($c, CURLOPT\_COOKIEJAR, $ckfile); |
| [164](#L164) | curl\_setopt($c, CURLOPT\_URL, $this->url); |
| [165](#L165) | curl\_setopt($c, CURLOPT\_FOLLOWLOCATION, 1); |
| [166](#L166) | curl\_setopt($c, CURLOPT\_MAXREDIRS, 10); |
| [167](#L167) | curl\_setopt($c, CURLOPT\_COOKIESESSION, true); |
| [168](#L168) | // curl\_setopt($c, CURLOPT\_CONNECTTIMEOUT, 1); |
| [169](#L169) | curl\_setopt($c, CURLOPT\_RETURNTRANSFER, 1); |
| [170](#L170) | curl\_setopt($c, CURLOPT\_SSL\_VERIFYHOST, 0); |
| [171](#L171) | curl\_setopt($c, CURLOPT\_SSL\_VERIFYPEER, 0); |
| [172](#L172) | curl\_setopt($c, CURLOPT\_HTTPHEADER, $header); |
| [173](#L173) | curl\_setopt($c, CURLOPT\_CUSTOMREQUEST, 'POST'); |
| [174](#L174) | curl\_setopt($c, CURLOPT\_HTTP\_VERSION, CURL\_HTTP\_VERSION\_1\_1); |
| [175](#L175) | // curl\_setopt($c, CURLOPT\_USERAGENT, 'BMI\_HEART\_TIMEOUT\_BYPASS\_' . $this->it); |
| [176](#L176) | curl\_setopt($c, CURLOPT\_USERAGENT, $\_SERVER['HTTP\_USER\_AGENT']); |
| [177](#L177) |  |
| [178](#L178) | $r = curl\_exec($c); |
| [179](#L179) |  |
| [180](#L180) | if ($manual === true && $logger !== null) { |
| [181](#L181) | if ($r === false) { |
| [182](#L182) | if (intval(curl\_errno($c)) !== 28) { |
| [183](#L183) | Logger::error(print\_r(curl\_getinfo($c), true)); |
| [184](#L184) | Logger::error(curl\_errno($c) . ': ' . curl\_error($c)); |
| [185](#L185) | $logger->log('There was something wrong with the request:', 'WARN'); |
| [186](#L186) | $logger->log(curl\_errno($c) . ': ' . curl\_error($c), 'WARN'); |
| [187](#L187) | } |
| [188](#L188) | } else { |
| [189](#L189) | $logger->log('Request sent successfully, without error returned.', 'SUCCESS'); |
| [190](#L190) | } |
| [191](#L191) | } |
| [192](#L192) |  |
| [193](#L193) | curl\_close($c); |
| [194](#L194) | // if (file\_exists($ckfile)) @unlink($ckfile); |
| [195](#L195) | if (isset($this->output)) $this->output->end(); |
| [196](#L196) |  |
| [197](#L197) | } catch (Exception $e) { |
| [198](#L198) |  |
| [199](#L199) | error\_log($e->getMessage()); |
| [200](#L200) | if (isset($this->output)) $this->output->end(); |
| [201](#L201) |  |
| [202](#L202) | } catch (Throwable $e) { |
| [203](#L203) |  |
| [204](#L204) | error\_log($e->getMessage()); |
| [205](#L205) | if (isset($this->output)) $this->output->end(); |
| [206](#L206) |  |
| [207](#L207) | } |
| [208](#L208) |  |
| [209](#L209) | } |
| [210](#L210) |  |
| [211](#L211) | // Load backup logger |
| [212](#L212) | public function load\_logger() { |
| [213](#L213) |  |
| [214](#L214) | require\_once BMI\_INCLUDES . '/logger.php'; |
| [215](#L215) | require\_once BMI\_INCLUDES . '/progress/logger-only.php'; |
| [216](#L216) |  |
| [217](#L217) | $this->output = new Output(); |
| [218](#L218) | $this->output->start(); |
| [219](#L219) |  |
| [220](#L220) | } |
| [221](#L221) |  |
| [222](#L222) | // Remove common files |
| [223](#L223) | public function remove\_commons() { |
| [224](#L224) |  |
| [225](#L225) | // Remove list if exists |
| [226](#L226) | $identyfile = $this->identyfile; |
| [227](#L227) | $logfile = BMI\_TMP . DIRECTORY\_SEPARATOR . 'bmi\_logs\_this\_backup.log'; |
| [228](#L228) | $clidata = BMI\_TMP . DIRECTORY\_SEPARATOR . 'bmi\_cli\_data.json'; |
| [229](#L229) | if (file\_exists($this->fileList)) @unlink($this->fileList); |
| [230](#L230) | if (file\_exists($this->dbfile)) @unlink($this->dbfile); |
| [231](#L231) | if (file\_exists($this->manifest)) @unlink($this->manifest); |
| [232](#L232) | if (file\_exists($logfile)) @unlink($logfile); |
| [233](#L233) | if (file\_exists($clidata)) @unlink($clidata); |
| [234](#L234) | if (file\_exists($identyfile)) @unlink($identyfile); |
| [235](#L235) | if (file\_exists($identyfile . '-running')) @unlink($identyfile . '-running'); |
| [236](#L236) | if (file\_exists($this->lock\_cli)) @unlink($this->lock\_cli); |
| [237](#L237) |  |
| [238](#L238) | // Remove backup |
| [239](#L239) | if (file\_exists(BMI\_BACKUPS . '/.running')) @unlink(BMI\_BACKUPS . '/.running'); |
| [240](#L240) | if (file\_exists(BMI\_BACKUPS . '/.abort')) @unlink(BMI\_BACKUPS . '/.abort'); |
| [241](#L241) |  |
| [242](#L242) | // Remove group folder |
| [243](#L243) | if (file\_exists($this->identyFolder)) { |
| [244](#L244) | $files = glob($this->identyFolder . '/\*'); |
| [245](#L245) | foreach ($files as $file) if (is\_file($file)) unlink($file); |
| [246](#L246) | @rmdir($this->identyFolder); |
| [247](#L247) | } |
| [248](#L248) |  |
| [249](#L249) | // Remove tmp database files |
| [250](#L250) | if (file\_exists($this->db\_dir\_v2) && is\_dir($this->db\_dir\_v2)) { |
| [251](#L251) | $files = glob($this->db\_dir\_v2 . '/\*'); |
| [252](#L252) | foreach ($files as $file) if (is\_file($file)) unlink($file); |
| [253](#L253) | if (is\_dir($this->db\_dir\_v2)) @rmdir($this->db\_dir\_v2); |
| [254](#L254) | } |
| [255](#L255) |  |
| [256](#L256) | } |
| [257](#L257) |  |
| [258](#L258) | // Make success |
| [259](#L259) | public function send\_success() { |
| [260](#L260) |  |
| [261](#L261) | // Set header for browser |
| [262](#L262) | if ($this->browserSide && $this->headersSet === false) { |
| [263](#L263) |  |
| [264](#L264) | // Content finished |
| [265](#L265) | header('Content-Finished: true'); |
| [266](#L266) | header('Content-It: ' . ($this->it + 1)); |
| [267](#L267) | header('Content-Dbit: ' . $this->dbit); |
| [268](#L268) | header('Content-Dblast: ' . $this->dblast); |
| [269](#L269) | header('Content-Filessofar: ' . $this->filessofar); |
| [270](#L270) | http\_response\_code(200); |
| [271](#L271) | $this->headersSet = true; |
| [272](#L272) |  |
| [273](#L273) | } |
| [274](#L274) |  |
| [275](#L275) | // Display the success |
| [276](#L276) | $this->output->log('Backup completed successfully!', 'SUCCESS'); |
| [277](#L277) | $this->output->log('#001', 'END-CODE'); |
| [278](#L278) |  |
| [279](#L279) | // Remove common files |
| [280](#L280) | $this->remove\_commons(); |
| [281](#L281) |  |
| [282](#L282) | // End logger |
| [283](#L283) | if (isset($this->output)) @$this->output->end(); |
| [284](#L284) |  |
| [285](#L285) | $this->actionsAfterProcess(true); |
| [286](#L286) |  |
| [287](#L287) | // End the process |
| [288](#L288) | exit; |
| [289](#L289) |  |
| [290](#L290) | } |
| [291](#L291) |  |
| [292](#L292) | // Make error |
| [293](#L293) | public function send\_error($reason = false, $abort = false) { |
| [294](#L294) |  |
| [295](#L295) | // Set header for browser |
| [296](#L296) | if ($this->browserSide && $this->headersSet === false) { |
| [297](#L297) |  |
| [298](#L298) | // Content finished |
| [299](#L299) | header('Content-Finished: false'); |
| [300](#L300) | header('Content-It: ' . ($this->it + 1)); |
| [301](#L301) | header('Content-Dbit: ' . $this->dbit); |
| [302](#L302) | header('Content-Dblast: ' . $this->dblast); |
| [303](#L303) | header('Content-Filessofar: ' . $this->filessofar); |
| [304](#L304) | http\_response\_code(200); |
| [305](#L305) | $this->headersSet = true; |
| [306](#L306) |  |
| [307](#L307) | } |
| [308](#L308) |  |
| [309](#L309) | // Log error |
| [310](#L310) | $this->output->log('Something went wrong with background process... ' . '(part: ' . $this->it . ')', 'ERROR'); |
| [311](#L311) | if ($reason !== false) $this->output->log('Reason: ' . $reason, 'ERROR'); |
| [312](#L312) | $this->output->log('Removing backup files... ', 'ERROR'); |
| [313](#L313) |  |
| [314](#L314) | // Remove common files |
| [315](#L315) | $this->remove\_commons(); |
| [316](#L316) |  |
| [317](#L317) | // Remove backup |
| [318](#L318) | if (file\_exists(BMI\_BACKUPS . DIRECTORY\_SEPARATOR . $this->backupname)) @unlink(BMI\_BACKUPS . DIRECTORY\_SEPARATOR . $this->backupname); |
| [319](#L319) |  |
| [320](#L320) | // Abort step |
| [321](#L321) | $this->output->log('Aborting backup... ', 'STEP'); |
| [322](#L322) | if ($abort === false) $this->output->log('#002', 'END-CODE'); |
| [323](#L323) | else $this->output->log('#003', 'END-CODE'); |
| [324](#L324) | if (isset($this->output)) @$this->output->end(); |
| [325](#L325) |  |
| [326](#L326) | $this->actionsAfterProcess(); |
| [327](#L327) | exit; |
| [328](#L328) |  |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | // Group files for batches |
| [332](#L332) | public function make\_file\_groups() { |
| [333](#L333) |  |
| [334](#L334) | if (!(file\_exists($this->fileList) && is\_readable($this->fileList))) { |
| [335](#L335) | return $this->send\_error('File list is not accessible or does not exist, try to run your backup process once again.', true); |
| [336](#L336) | } |
| [337](#L337) |  |
| [338](#L338) | $this->output->log('Making batches for each process...', 'STEP'); |
| [339](#L339) | $list\_path = $this->fileList; |
| [340](#L340) |  |
| [341](#L341) | $file = fopen($list\_path, 'r'); |
| [342](#L342) | $this->output->log('Reading list file...', 'INFO'); |
| [343](#L343) | $first\_line = explode('\_', fgets($file)); |
| [344](#L344) | $files = intval($first\_line[0]); |
| [345](#L345) | $firstmax = intval($first\_line[1]); |
| [346](#L346) |  |
| [347](#L347) | if ($files > 0) { |
| [348](#L348) | $batches = 100; |
| [349](#L349) | if ($files <= 200) $batches = 100; |
| [350](#L350) | if ($files > 200) $batches = 200; |
| [351](#L351) | if ($files > 1600) $batches = 400; |
| [352](#L352) | if ($files > 3200) $batches = 800; |
| [353](#L353) | if ($files > 6400) $batches = 1600; |
| [354](#L354) | if ($files > 12800) $batches = 3200; |
| [355](#L355) | if ($files > 25600) $batches = 5000; |
| [356](#L356) | if ($files > 30500) $batches = 10000; |
| [357](#L357) | if ($files > 60500) $batches = 20000; |
| [358](#L358) | if ($files > 90500) $batches = 40000; |
| [359](#L359) |  |
| [360](#L360) | $this->output->log('Each batch will contain up to ' . $batches . ' files.', 'INFO'); |
| [361](#L361) | $this->output->log('Large files takes more time, you will be notified about those.', 'INFO'); |
| [362](#L362) |  |
| [363](#L363) | $folder = $this->identyFolder; |
| [364](#L364) | mkdir($folder, 0755, true); |
| [365](#L365) |  |
| [366](#L366) | $limitcrl = 96; |
| [367](#L367) | if (BMI\_CLI\_REQUEST === true) { |
| [368](#L368) | $limitcrl = 512; |
| [369](#L369) | if ($files > 30000) $limitcrl = 1024; |
| [370](#L370) | } |
| [371](#L371) |  |
| [372](#L372) | $i = 0; $bigs = 0; $prev = 0; $currsize = 0; |
| [373](#L373) | while (($line = fgets($file)) !== false) { |
| [374](#L374) |  |
| [375](#L375) | $line = explode(',', $line); |
| [376](#L376) | $last = sizeof($line) - 1; |
| [377](#L377) | $size = intval($line[$last]); |
| [378](#L378) | unset($line[$last]); |
| [379](#L379) | $line = implode(',', $line); |
| [380](#L380) |  |
| [381](#L381) | $i++; |
| [382](#L382) | if ($firstmax != -1 && $i > $firstmax) $bigs++; |
| [383](#L383) | $suffix = intval(ceil(abs($i / $batches))) + $bigs; |
| [384](#L384) |  |
| [385](#L385) | if ($prev == $suffix) { |
| [386](#L386) | $currsize += $size; |
| [387](#L387) | } else { |
| [388](#L388) | $currsize = $size; |
| [389](#L389) | $prev = $suffix; |
| [390](#L390) | } |
| [391](#L391) |  |
| [392](#L392) | $skip = false; |
| [393](#L393) | if ($currsize > ($limitcrl \* (1024 \* 1024))) $skip = true; |
| [394](#L394) |  |
| [395](#L395) | $groupFile = $folder . DIRECTORY\_SEPARATOR . $this->identy . '-' . $suffix . '.files'; |
| [396](#L396) | $group = fopen($groupFile, 'a'); |
| [397](#L397) | fwrite($group, $line . ',' . $size . "\r\n"); |
| [398](#L398) | fclose($group); |
| [399](#L399) |  |
| [400](#L400) | if ($skip === true) $bigs++; |
| [401](#L401) | unset($line); |
| [402](#L402) |  |
| [403](#L403) | } |
| [404](#L404) |  |
| [405](#L405) | fclose($file); |
| [406](#L406) | usleep(100); |
| [407](#L407) | if (file\_exists($this->fileList)) @unlink($this->fileList); |
| [408](#L408) |  |
| [409](#L409) | } else { |
| [410](#L410) |  |
| [411](#L411) | $this->output->log('No file found to be backed up, omitting files.', 'INFO'); |
| [412](#L412) |  |
| [413](#L413) | } |
| [414](#L414) |  |
| [415](#L415) | if (file\_exists($this->fileList)) @unlink($this->fileList); |
| [416](#L416) | $this->output->log('Batches completed...', 'SUCCESS'); |
| [417](#L417) |  |
| [418](#L418) | } |
| [419](#L419) |  |
| [420](#L420) | // Final batch |
| [421](#L421) | public function get\_final\_batch() { |
| [422](#L422) |  |
| [423](#L423) | $db\_root\_dir = BMI\_TMP . DIRECTORY\_SEPARATOR; |
| [424](#L424) | $logs = $db\_root\_dir . 'bmi\_logs\_this\_backup.log'; |
| [425](#L425) |  |
| [426](#L426) | $log\_file = fopen($logs, 'w'); |
| [427](#L427) | fwrite($log\_file, file\_get\_contents(BMI\_BACKUPS . DIRECTORY\_SEPARATOR . 'latest.log')); |
| [428](#L428) | fclose($log\_file); |
| [429](#L429) |  |
| [430](#L430) | $files = [$logs, $this->manifest]; |
| [431](#L431) |  |
| [432](#L432) | return $files; |
| [433](#L433) |  |
| [434](#L434) | } |
| [435](#L435) |  |
| [436](#L436) | // Final logs |
| [437](#L437) | public function log\_final\_batch() { |
| [438](#L438) |  |
| [439](#L439) | $this->output->log('Finalizing backup', 'STEP'); |
| [440](#L440) | $this->output->log('Closing files and archives', 'STEP'); |
| [441](#L441) | $this->output->log('Archiving of ' . $this->total\_files . ' files took: ' . number\_format(microtime(true) - floatval($this->backupstart), 2) . 's', 'INFO'); |
| [442](#L442) |  |
| [443](#L443) | if (!BMI\_CLI\_REQUEST) { |
| [444](#L444) | if (!$this->browserSide) sleep(1); |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | if (file\_exists(BMI\_BACKUPS . '/.abort')) { |
| [448](#L448) | $this->send\_error('Backup aborted manually by user.', true); |
| [449](#L449) | return; |
| [450](#L450) | } |
| [451](#L451) |  |
| [452](#L452) | $this->send\_success(); |
| [453](#L453) |  |
| [454](#L454) | } |
| [455](#L455) |  |
| [456](#L456) | // Load batch |
| [457](#L457) | public function load\_batch() { |
| [458](#L458) |  |
| [459](#L459) | if (!(file\_exists($this->identyFolder) && is\_dir($this->identyFolder))) { |
| [460](#L460) | return $this->send\_error('Temporary directory does not exist, please start the backup once again.', true); |
| [461](#L461) | } |
| [462](#L462) |  |
| [463](#L463) | $allFiles = scandir($this->identyFolder); |
| [464](#L464) | $files = array\_slice((array) $allFiles, 2); |
| [465](#L465) | if (sizeof($files) > 0) { |
| [466](#L466) |  |
| [467](#L467) | $largest = $files[0]; $prev\_size = 0; |
| [468](#L468) | for ($i = 0; $i < sizeof($files); ++$i) { |
| [469](#L469) | $curr\_size = filesize($this->identyFolder . DIRECTORY\_SEPARATOR . $files[$i]); |
| [470](#L470) | if ($curr\_size > $prev\_size) { |
| [471](#L471) | $largest = $files[$i]; |
| [472](#L472) | $prev\_size = $curr\_size; |
| [473](#L473) | } |
| [474](#L474) | } |
| [475](#L475) | $this->batches\_left = sizeof($files); |
| [476](#L476) |  |
| [477](#L477) | if (sizeof($files) == 1) { |
| [478](#L478) | $this->final\_batch = true; |
| [479](#L479) | } |
| [480](#L480) |  |
| [481](#L481) | return $this->identyFolder . DIRECTORY\_SEPARATOR . $largest; |
| [482](#L482) |  |
| [483](#L483) | } else { |
| [484](#L484) |  |
| [485](#L485) | $this->log\_final\_batch(); |
| [486](#L486) | return false; |
| [487](#L487) |  |
| [488](#L488) | } |
| [489](#L489) |  |
| [490](#L490) | } |
| [491](#L491) |  |
| [492](#L492) | // Cut Path for ZIP structure |
| [493](#L493) | public function cutDir($file) { |
| [494](#L494) |  |
| [495](#L495) | if (substr($file, -4) === '.sql') { |
| [496](#L496) |  |
| [497](#L497) | if ($this->db\_v2\_engine == true) { |
| [498](#L498) |  |
| [499](#L499) | return 'db\_tables' . DIRECTORY\_SEPARATOR . basename($file); |
| [500](#L500) |  |
| [501](#L501) | } else { |
| [502](#L502) |  |
| [503](#L503) | return basename($file); |
| [504](#L504) |  |
| [505](#L505) | } |
| [506](#L506) |  |
| [507](#L507) | } else { |
| [508](#L508) |  |
| [509](#L509) | return basename($file); |
| [510](#L510) |  |
| [511](#L511) | } |
| [512](#L512) |  |
| [513](#L513) | } |
| [514](#L514) |  |
| [515](#L515) | // Add files to ZIP – The Backup |
| [516](#L516) | public function add\_files($files = [], $file\_list = false, $final = false, $dbLog = false) { |
| [517](#L517) |  |
| [518](#L518) | try { |
| [519](#L519) |  |
| [520](#L520) | // TODO: Remove false && or replace with option in settings to switch |
| [521](#L521) | if (false && (class\_exists('\ZipArchive') || class\_exists('ZipArchive'))) { |
| [522](#L522) |  |
| [523](#L523) | // Initialize Zip |
| [524](#L524) | if (!isset($this->\_zip)) { |
| [525](#L525) | $this->\_zip = new \ZipArchive(); |
| [526](#L526) | } |
| [527](#L527) |  |
| [528](#L528) | if ($this->\_zip) { |
| [529](#L529) |  |
| [530](#L530) | // Show what's in use |
| [531](#L531) | if ($this->it === 1) { |
| [532](#L532) | $this->output->log('Using ZipArchive module to create the Archive.', 'INFO'); |
| [533](#L533) | if ($dbLog == true) { |
| [534](#L534) | $this->output->log('Adding database SQL file(s) to the backup file.', 'STEP'); |
| [535](#L535) | } |
| [536](#L536) | } |
| [537](#L537) |  |
| [538](#L538) | // Open / create ZIP file |
| [539](#L539) | $back = BMI\_BACKUPS . DIRECTORY\_SEPARATOR . $this->backupname; |
| [540](#L540) | if (BMI\_CLI\_REQUEST) { |
| [541](#L541) | if (!isset($this->zip\_initialized)) { |
| [542](#L542) | if (file\_exists($back)) $this->\_zip->open($back); |
| [543](#L543) | else $this->\_zip->open($back, \ZipArchive::CREATE); |
| [544](#L544) | } |
| [545](#L545) | } else { |
| [546](#L546) | if (file\_exists($back)) $this->\_zip->open($back); |
| [547](#L547) | else $this->\_zip->open($back, \ZipArchive::CREATE); |
| [548](#L548) | } |
| [549](#L549) |  |
| [550](#L550) | // Final operation |
| [551](#L551) | if ($final || $dbLog) { |
| [552](#L552) |  |
| [553](#L553) | // Add files |
| [554](#L554) | for ($i = 0; $i < sizeof($files); ++$i) { |
| [555](#L555) |  |
| [556](#L556) | if (file\_exists($files[$i]) && is\_readable($files[$i]) && !is\_link($files[$i])) { |
| [557](#L557) |  |
| [558](#L558) | // Add the file |
| [559](#L559) | $this->\_zip->addFile($files[$i], $this->cutDir($files[$i])); |
| [560](#L560) |  |
| [561](#L561) | } else { |
| [562](#L562) |  |
| [563](#L563) | $this->output->log('This file is not readable, it will not be included in the backup: ' . $files[$i], 'WARN'); |
| [564](#L564) |  |
| [565](#L565) | } |
| [566](#L566) |  |
| [567](#L567) | } |
| [568](#L568) |  |
| [569](#L569) | if ($dbLog === false) { |
| [570](#L570) | $this->final\_made = true; |
| [571](#L571) | } |
| [572](#L572) |  |
| [573](#L573) | } else { |
| [574](#L574) |  |
| [575](#L575) | // Add files |
| [576](#L576) | for ($i = 0; $i < sizeof($files); ++$i) { |
| [577](#L577) |  |
| [578](#L578) | if (file\_exists($files[$i]) && is\_readable($files[$i]) && !is\_link($files[$i])) { |
| [579](#L579) |  |
| [580](#L580) | // Calculate Path in ZIP |
| [581](#L581) | $path = 'wordpress' . DIRECTORY\_SEPARATOR . substr($files[$i], strlen(ABSPATH)); |
| [582](#L582) |  |
| [583](#L583) | // Add the file |
| [584](#L584) | $this->\_zip->addFile($files[$i], $path); |
| [585](#L585) |  |
| [586](#L586) | } else { |
| [587](#L587) |  |
| [588](#L588) | $this->output->log('This file is not readable, it will not be included in the backup: ' . $files[$i], 'WARN'); |
| [589](#L589) |  |
| [590](#L590) | } |
| [591](#L591) |  |
| [592](#L592) | } |
| [593](#L593) |  |
| [594](#L594) | } |
| [595](#L595) |  |
| [596](#L596) | // Close archive and prepare next batch |
| [597](#L597) | touch(BMI\_BACKUPS . '/.running'); |
| [598](#L598) | if (!BMI\_CLI\_REQUEST || $final) { |
| [599](#L599) | $result = $this->\_zip->close(); |
| [600](#L600) |  |
| [601](#L601) | if ($result === true) { |
| [602](#L602) |  |
| [603](#L603) | // Remove batch |
| [604](#L604) | if ($file\_list && file\_exists($file\_list)) { |
| [605](#L605) | @unlink($file\_list); |
| [606](#L606) | } |
| [607](#L607) |  |
| [608](#L608) | } else { |
| [609](#L609) |  |
| [610](#L610) | $this->send\_error('Error, there is most likely not enough space for the backup.'); |
| [611](#L611) | return false; |
| [612](#L612) |  |
| [613](#L613) | } |
| [614](#L614) | } else { |
| [615](#L615) |  |
| [616](#L616) | // Remove batch |
| [617](#L617) | if ($file\_list && file\_exists($file\_list)) { |
| [618](#L618) | @unlink($file\_list); |
| [619](#L619) | } |
| [620](#L620) |  |
| [621](#L621) | } |
| [622](#L622) |  |
| [623](#L623) | } else { |
| [624](#L624) | $this->send\_error('ZipArchive error, please contact support - your site may be special case.'); |
| [625](#L625) | } |
| [626](#L626) |  |
| [627](#L627) | } else { |
| [628](#L628) |  |
| [629](#L629) | // Check if PclZip exists |
| [630](#L630) | if (!class\_exists('PclZip')) { |
| [631](#L631) | if (!defined('PCLZIP\_TEMPORARY\_DIR')) { |
| [632](#L632) | $bmi\_tmp\_dir = BMI\_TMP; |
| [633](#L633) | if (!file\_exists($bmi\_tmp\_dir)) { |
| [634](#L634) | @mkdir($bmi\_tmp\_dir, 0775, true); |
| [635](#L635) | } |
| [636](#L636) |  |
| [637](#L637) | define('PCLZIP\_TEMPORARY\_DIR', $bmi\_tmp\_dir . DIRECTORY\_SEPARATOR . 'bmi-'); |
| [638](#L638) | } |
| [639](#L639) | } |
| [640](#L640) |  |
| [641](#L641) | // Require the LIB and check if it's compatible |
| [642](#L642) | $alternative = dirname($this->dir) . '/backup-backup-pro/includes/pcl.php'; |
| [643](#L643) | if ($this->rev === 1 || !file\_exists($alternative)) { |
| [644](#L644) | require\_once ABSPATH . 'wp-admin/includes/class-pclzip.php'; |
| [645](#L645) | } else { |
| [646](#L646) | require\_once $alternative; |
| [647](#L647) | if ($this->it === 1) { |
| [648](#L648) | $this->output->log('Using dedicated PclZIP for Pro', 'INFO'); |
| [649](#L649) | if ($dbLog == true) { |
| [650](#L650) | $this->output->log('Adding database SQL file(s) to the backup file.', 'STEP'); |
| [651](#L651) | } |
| [652](#L652) | } |
| [653](#L653) | } |
| [654](#L654) |  |
| [655](#L655) | // Get/Create the Archive |
| [656](#L656) | if (!isset($this->\_lib)) { |
| [657](#L657) | $this->\_lib = new \PclZip(BMI\_BACKUPS . DIRECTORY\_SEPARATOR . $this->backupname); |
| [658](#L658) | } |
| [659](#L659) |  |
| [660](#L660) | if (!$this->\_lib) { |
| [661](#L661) | $this->send\_error('PHP-ZIP: Permission Denied or zlib cannot be found'); |
| [662](#L662) | return; |
| [663](#L663) | } |
| [664](#L664) |  |
| [665](#L665) | if (sizeof($files) <= 0) { |
| [666](#L666) | return false; |
| [667](#L667) | } |
| [668](#L668) |  |
| [669](#L669) | $back = 0; |
| [670](#L670) | $files = array\_filter($files, function ($path) { |
| [671](#L671) | if (is\_readable($path) && file\_exists($path) && !is\_link($path)) return true; |
| [672](#L672) | else { |
| [673](#L673) | $this->output->log("Excluding file that cannot be read: " . $path, 'warn'); |
| [674](#L674) | return false; |
| [675](#L675) | } |
| [676](#L676) | }); |
| [677](#L677) |  |
| [678](#L678) | // Add files |
| [679](#L679) | if ($final || $dbLog) { |
| [680](#L680) |  |
| [681](#L681) | // Final configuration |
| [682](#L682) | if (sizeof($files) > 0) { |
| [683](#L683) | $back = $this->\_lib->add($files, PCLZIP\_OPT\_REMOVE\_PATH, BMI\_TMP . DIRECTORY\_SEPARATOR, PCLZIP\_OPT\_ADD\_TEMP\_FILE\_ON, PCLZIP\_OPT\_TEMP\_FILE\_THRESHOLD, $this->safelimit); |
| [684](#L684) | } |
| [685](#L685) |  |
| [686](#L686) | if ($dbLog === false) { |
| [687](#L687) | $this->final\_made = true; |
| [688](#L688) | } |
| [689](#L689) |  |
| [690](#L690) | } else { |
| [691](#L691) |  |
| [692](#L692) | // Additional path |
| [693](#L693) | $add\_path = 'wordpress' . DIRECTORY\_SEPARATOR; |
| [694](#L694) |  |
| [695](#L695) | // Casual configuration |
| [696](#L696) | if (sizeof($files) > 0) { |
| [697](#L697) | $back = $this->\_lib->add($files, PCLZIP\_OPT\_REMOVE\_PATH, ABSPATH, PCLZIP\_OPT\_ADD\_PATH, $add\_path, PCLZIP\_OPT\_ADD\_TEMP\_FILE\_ON, PCLZIP\_OPT\_TEMP\_FILE\_THRESHOLD, $this->safelimit); |
| [698](#L698) | } |
| [699](#L699) |  |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) | // Check if there was any error |
| [703](#L703) | touch(BMI\_BACKUPS . '/.running'); |
| [704](#L704) | if ($back == 0) { |
| [705](#L705) |  |
| [706](#L706) | $this->send\_error($this->\_lib->errorInfo(true)); |
| [707](#L707) | return false; |
| [708](#L708) |  |
| [709](#L709) | } else { |
| [710](#L710) |  |
| [711](#L711) | if ($file\_list && file\_exists($file\_list)) { |
| [712](#L712) | @unlink($file\_list); |
| [713](#L713) | } |
| [714](#L714) |  |
| [715](#L715) | } |
| [716](#L716) |  |
| [717](#L717) | } |
| [718](#L718) |  |
| [719](#L719) | } catch (\Exception $e) { |
| [720](#L720) |  |
| [721](#L721) | $this->send\_error($e->getMessage()); |
| [722](#L722) | return false; |
| [723](#L723) |  |
| [724](#L724) | } catch (\Throwable $e) { |
| [725](#L725) |  |
| [726](#L726) | $this->send\_error($e->getMessage()); |
| [727](#L727) | return false; |
| [728](#L728) |  |
| [729](#L729) | } |
| [730](#L730) |  |
| [731](#L731) | } |
| [732](#L732) |  |
| [733](#L733) | // ZIP one of the grouped files |
| [734](#L734) | public function zip\_batch() { |
| [735](#L735) |  |
| [736](#L736) | if ($this->it === 1) { |
| [737](#L737) |  |
| [738](#L738) | $files = []; |
| [739](#L739) | if (file\_exists($this->dbfile)) { |
| [740](#L740) | $files[] = $this->dbfile; |
| [741](#L741) | } elseif (file\_exists($this->db\_dir\_v2) && is\_dir($this->db\_dir\_v2)) { |
| [742](#L742) | $this->db\_v2\_engine = true; |
| [743](#L743) | $db\_files = scandir($this->db\_dir\_v2); |
| [744](#L744) | foreach ($db\_files as $i => $name) { |
| [745](#L745) | if (!($name == '.' || $name == '..')) { |
| [746](#L746) | $files[] = $this->db\_dir\_v2 . DIRECTORY\_SEPARATOR . $name; |
| [747](#L747) | } |
| [748](#L748) | } |
| [749](#L749) | } |
| [750](#L750) |  |
| [751](#L751) | if (sizeof($files) > 0) { |
| [752](#L752) | $this->add\_files($files, false, false, true); |
| [753](#L753) | $this->output->log('Database added to the backup file.', 'SUCCESS'); |
| [754](#L754) | $this->output->log('Performing site files backup...', 'STEP'); |
| [755](#L755) | return true; |
| [756](#L756) | } |
| [757](#L757) |  |
| [758](#L758) | $this->output->log('Performing site files backup...', 'STEP'); |
| [759](#L759) |  |
| [760](#L760) | } |
| [761](#L761) |  |
| [762](#L762) | $list\_file = $this->load\_batch(); |
| [763](#L763) | if ($list\_file === false) return true; |
| [764](#L764) | $files = explode("\r\n", file\_get\_contents($list\_file)); |
| [765](#L765) |  |
| [766](#L766) | $total\_size = 0; |
| [767](#L767) | $parsed\_files = []; |
| [768](#L768) |  |
| [769](#L769) | for ($i = 0; $i < sizeof($files); ++$i) { |
| [770](#L770) | if (strlen(trim($files[$i])) <= 1) { |
| [771](#L771) | $this->total\_files--; |
| [772](#L772) | continue; |
| [773](#L773) | } |
| [774](#L774) |  |
| [775](#L775) | $files[$i] = explode(',', $files[$i]); |
| [776](#L776) | $last = sizeof($files[$i]) - 1; |
| [777](#L777) | $size = intval($files[$i][$last]); |
| [778](#L778) | unset($files[$i][$last]); |
| [779](#L779) | $files[$i] = implode(',', $files[$i]); |
| [780](#L780) |  |
| [781](#L781) | $file = null; |
| [782](#L782) | if ($files[$i][0] . $files[$i][1] . $files[$i][2] === '@1@') { |
| [783](#L783) | $file = WP\_CONTENT\_DIR . DIRECTORY\_SEPARATOR . substr($files[$i], 3); |
| [784](#L784) | } else if ($files[$i][0] . $files[$i][1] . $files[$i][2] === '@2@') { |
| [785](#L785) | $file = ABSPATH . DIRECTORY\_SEPARATOR . substr($files[$i], 3); |
| [786](#L786) | } else { |
| [787](#L787) | $file = $files[$i]; |
| [788](#L788) | } |
| [789](#L789) |  |
| [790](#L790) | if (!file\_exists($file)) { |
| [791](#L791) | $this->output->log('Removing this file from backup (it does not exist anymore): ' . $file, 'WARN'); |
| [792](#L792) | $this->total\_files--; |
| [793](#L793) | continue; |
| [794](#L794) | } |
| [795](#L795) |  |
| [796](#L796) | if (filesize($file) === 0) { |
| [797](#L797) | $this->output->log('Removing this file from backup (file size is equal to 0 bytes): ' . $file, 'WARN'); |
| [798](#L798) | $this->total\_files--; |
| [799](#L799) | continue; |
| [800](#L800) | } |
| [801](#L801) |  |
| [802](#L802) | $parsed\_files[] = $file; |
| [803](#L803) | $total\_size += $size; |
| [804](#L804) | unset($file); |
| [805](#L805) | } |
| [806](#L806) |  |
| [807](#L807) | unset($files); |
| [808](#L808) | if (sizeof($parsed\_files) === 1) { |
| [809](#L809) | $this->output->log('Adding: ' . sizeof($parsed\_files) . ' file...' . ' [Size: ' . $this->humanSize($total\_size) . ']', 'INFO'); |
| [810](#L810) | $this->output->log('Alone-file mode for: ' . $parsed\_files[0] . ' file...', 'INFO'); |
| [811](#L811) | } else $this->output->log('Adding: ' . sizeof($parsed\_files) . ' files...' . ' [Size: ' . $this->humanSize($total\_size) . ']', 'INFO'); |
| [812](#L812) |  |
| [813](#L813) | if ((60 \* (1024 \* 1024)) < $total\_size) $this->output->log('Current batch is quite large, it may take some time...', 'WARN'); |
| [814](#L814) |  |
| [815](#L815) | $this->add\_files($parsed\_files, $list\_file); |
| [816](#L816) | $this->filessofar += sizeof($parsed\_files); |
| [817](#L817) |  |
| [818](#L818) | $this->output->progress($this->filessofar . '/' . $this->total\_files); |
| [819](#L819) | $this->output->log('Milestone: ' . $this->filessofar . '/' . $this->total\_files . ' [' . $this->batches\_left . ' batches left]', 'SUCCESS'); |
| [820](#L820) |  |
| [821](#L821) | if ($this->final\_batch === true) { |
| [822](#L822) | $this->output->log('Adding final files to this batch...', 'STEP'); |
| [823](#L823) | $this->output->log('Adding manifest as addition...', 'INFO'); |
| [824](#L824) |  |
| [825](#L825) | $additionalFiles = $this->get\_final\_batch(); |
| [826](#L826) | $this->add\_files($additionalFiles, false, true); |
| [827](#L827) | $this->log\_final\_batch(); |
| [828](#L828) | return true; |
| [829](#L829) | } |
| [830](#L830) |  |
| [831](#L831) | } |
| [832](#L832) |  |
| [833](#L833) | // Shutdown callback |
| [834](#L834) | public function shutdown() { |
| [835](#L835) |  |
| [836](#L836) | // Check if there was any error |
| [837](#L837) | $err = error\_get\_last(); |
| [838](#L838) | if ($err != null) { |
| [839](#L839) | Logger::error('Shuted down'); |
| [840](#L840) | Logger::error(print\_r($err, true)); |
| [841](#L841) | $this->output->log('Background process had some issues, more details printed to global logs.', 'WARN'); |
| [842](#L842) | } |
| [843](#L843) |  |
| [844](#L844) | // Remove lock |
| [845](#L845) | if (file\_exists($this->lock\_cli)) { |
| [846](#L846) | @unlink($this->lock\_cli); |
| [847](#L847) | } |
| [848](#L848) |  |
| [849](#L849) | // Send next beat to handle next batch |
| [850](#L850) | if (BMI\_CLI\_REQUEST) return; |
| [851](#L851) | if (file\_exists($this->identyfile)) { |
| [852](#L852) |  |
| [853](#L853) | if ($this->dbit === -1 && $this->dbitJustFinished == false) { |
| [854](#L854) | $this->it += 1; |
| [855](#L855) | } |
| [856](#L856) |  |
| [857](#L857) | // Set header for browser |
| [858](#L858) | if ($this->browserSide && $this->headersSet === false) { |
| [859](#L859) |  |
| [860](#L860) | // Content finished |
| [861](#L861) | header('Content-Finished: false'); |
| [862](#L862) | header('Content-It: ' . $this->it); |
| [863](#L863) | header('Content-Dbit: ' . $this->dbit); |
| [864](#L864) | header('Content-Dblast: ' . $this->dblast); |
| [865](#L865) | header('Content-Filessofar: ' . $this->filessofar); |
| [866](#L866) | http\_response\_code(200); |
| [867](#L867) | $this->headersSet = true; |
| [868](#L868) |  |
| [869](#L869) | } else { |
| [870](#L870) |  |
| [871](#L871) | usleep(100); |
| [872](#L872) | $this->send\_beat(); |
| [873](#L873) |  |
| [874](#L874) | } |
| [875](#L875) |  |
| [876](#L876) | } |
| [877](#L877) |  |
| [878](#L878) | } |
| [879](#L879) |  |
| [880](#L880) | // Handle received batch |
| [881](#L881) | public function handle\_batch() { |
| [882](#L882) |  |
| [883](#L883) | // Check if aborted |
| [884](#L884) | if (file\_exists(BMI\_BACKUPS . '/.abort')) { |
| [885](#L885) | if (!isset($this->output)) $this->load\_logger(); |
| [886](#L886) | $this->send\_error('Backup aborted manually by user.', true); |
| [887](#L887) | return; |
| [888](#L888) | } |
| [889](#L889) |  |
| [890](#L890) | // Handle cURL |
| [891](#L891) | if ($this->curl == true) { |
| [892](#L892) |  |
| [893](#L893) | // Check if it was triggered by verified user |
| [894](#L894) | if (!file\_exists($this->identyfile)) { |
| [895](#L895) | return; |
| [896](#L896) | } |
| [897](#L897) |  |
| [898](#L898) | // Register shutdown |
| [899](#L899) | register\_shutdown\_function([$this, 'shutdown']); |
| [900](#L900) |  |
| [901](#L901) | // Load logger |
| [902](#L902) | $this->load\_logger(); |
| [903](#L903) |  |
| [904](#L904) | set\_error\_handler(function ($errno, $errstr, $errfile, $errline) { |
| [905](#L905) | Logger::error('Bypasser error:'); |
| [906](#L906) | Logger::error($errno . ' - ' . $errstr); |
| [907](#L907) | Logger::error($errfile . ' - ' . $errline); |
| [908](#L908) | }); |
| [909](#L909) |  |
| [910](#L910) | // Notice parent script |
| [911](#L911) | touch($this->identyfile . '-running'); |
| [912](#L912) | touch(BMI\_BACKUPS . '/.running'); |
| [913](#L913) |  |
| [914](#L914) | // CLI case |
| [915](#L915) | if (BMI\_CLI\_REQUEST) { |
| [916](#L916) |  |
| [917](#L917) | $this->output->log('Starting database backup exporter', 'STEP'); |
| [918](#L918) | $this->output->log('Database exporter started via CLI', 'VERBOSE'); |
| [919](#L919) | while ($this->dbit !== -1) { |
| [920](#L920) | $this->databaseBackupMaker(); |
| [921](#L921) | } |
| [922](#L922) |  |
| [923](#L923) | // Log |
| [924](#L924) | $this->output->log("PHP CLI initialized - process ran successfully", 'SUCCESS'); |
| [925](#L925) | $this->make\_file\_groups(); |
| [926](#L926) |  |
| [927](#L927) | // Make ZIP |
| [928](#L928) | $this->output->log('Making archive...', 'STEP'); |
| [929](#L929) | while (!$this->final\_made) { |
| [930](#L930) | touch($this->identyfile . '-running'); |
| [931](#L931) | touch(BMI\_BACKUPS . '/.running'); |
| [932](#L932) | $this->it++; |
| [933](#L933) | $this->zip\_batch(); |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | } else { |
| [937](#L937) |  |
| [938](#L938) | // Background |
| [939](#L939) | if ($this->dbit !== -1) { |
| [940](#L940) |  |
| [941](#L941) | if ($this->dbit === 0) { |
| [942](#L942) | $this->output->log('Background process initialized', 'SUCCESS'); |
| [943](#L943) | $this->output->log('Starting database backup exporter', 'STEP'); |
| [944](#L944) | $this->output->log('Database exporter started via WEB REQUESTS', 'VERBOSE'); |
| [945](#L945) | } |
| [946](#L946) |  |
| [947](#L947) | $this->databaseBackupMaker(); |
| [948](#L948) |  |
| [949](#L949) | } else { |
| [950](#L950) |  |
| [951](#L951) | if ($this->it === 0) { |
| [952](#L952) |  |
| [953](#L953) | $this->make\_file\_groups(); |
| [954](#L954) | $this->output->log('Making archive...', 'STEP'); |
| [955](#L955) |  |
| [956](#L956) | } else $this->zip\_batch(); |
| [957](#L957) |  |
| [958](#L958) | } |
| [959](#L959) |  |
| [960](#L960) | } |
| [961](#L961) |  |
| [962](#L962) | } |
| [963](#L963) |  |
| [964](#L964) | } |
| [965](#L965) |  |
| [966](#L966) | public function fixSlashes($str, $slash = false) { |
| [967](#L967) | // Old version |
| [968](#L968) | // $str = str\_replace('\\\\', DIRECTORY\_SEPARATOR, $str); |
| [969](#L969) | // $str = str\_replace('\\', DIRECTORY\_SEPARATOR, $str); |
| [970](#L970) | // $str = str\_replace('\/', DIRECTORY\_SEPARATOR, $str); |
| [971](#L971) | // $str = str\_replace('/', DIRECTORY\_SEPARATOR, $str); |
| [972](#L972) |  |
| [973](#L973) | // if ($str[strlen($str) - 1] == DIRECTORY\_SEPARATOR) { |
| [974](#L974) | //   $str = substr($str, 0, -1); |
| [975](#L975) | // } |
| [976](#L976) |  |
| [977](#L977) | // Since 1.3.2 |
| [978](#L978) | $protocol = ''; |
| [979](#L979) | if ($slash == false) $slash = DIRECTORY\_SEPARATOR; |
| [980](#L980) | if (substr($str, 0, 7) == 'http://') $protocol = 'http://'; |
| [981](#L981) | else if (substr($str, 0, 8) == 'https://') $protocol = 'https://'; |
| [982](#L982) |  |
| [983](#L983) | $str = substr($str, strlen($protocol)); |
| [984](#L984) | $str = preg\_replace('/[\\\\\/]+/', $slash, $str); |
| [985](#L985) | $str = rtrim($str, '/\\' ); |
| [986](#L986) |  |
| [987](#L987) | return $protocol . $str; |
| [988](#L988) | } |
| [989](#L989) |  |
| [990](#L990) | // Database batch maker and dumper |
| [991](#L991) | // We need WP instance for that to get access to wpdb |
| [992](#L992) | public function databaseBackupMaker() { |
| [993](#L993) |  |
| [994](#L994) | if ($this->dbit === -1) return; |
| [995](#L995) |  |
| [996](#L996) | $this->loadWordPressAndBackupPlugin(); |
| [997](#L997) |  |
| [998](#L998) | // DB File Name for that type of backup |
| [999](#L999) | $dbbackupname = 'bmi\_database\_backup.sql'; |
| [1000](#L1000) | $database\_file = $this->fixSlashes(BMI\_TMP . DIRECTORY\_SEPARATOR . $dbbackupname); |
| [1001](#L1001) |  |
| [1002](#L1002) | if (Dashboard\bmi\_get\_config('BACKUP:DATABASE') == 'true') { |
| [1003](#L1003) |  |
| [1004](#L1004) | if (Dashboard\bmi\_get\_config('OTHER:BACKUP:DB:SINGLE:FILE') == 'true') { |
| [1005](#L1005) |  |
| [1006](#L1006) | // Require Database Manager |
| [1007](#L1007) | require\_once BMI\_INCLUDES . DIRECTORY\_SEPARATOR . 'database' . DIRECTORY\_SEPARATOR . 'manager.php'; |
| [1008](#L1008) |  |
| [1009](#L1009) | // Log what's going on |
| [1010](#L1010) | $this->output->log('Making single-file database backup (using deprecated engine, due to used settings)', 'STEP'); |
| [1011](#L1011) |  |
| [1012](#L1012) | // Get database dump |
| [1013](#L1013) | $databaser = new Database(DB\_HOST, DB\_USER, DB\_PASSWORD, DB\_NAME); |
| [1014](#L1014) | $databaser->exportDatabase($dbbackupname); |
| [1015](#L1015) | $this->output->log("Database size: " . $this->humanSize(filesize($database\_file)), 'INFO'); |
| [1016](#L1016) | $this->output->log('Database (single-file) backup finished.', 'SUCCESS'); |
| [1017](#L1017) |  |
| [1018](#L1018) | $this->dbitJustFinished = true; |
| [1019](#L1019) | $this->dbit = -1; |
| [1020](#L1020) | return true; |
| [1021](#L1021) |  |
| [1022](#L1022) | } else { |
| [1023](#L1023) |  |
| [1024](#L1024) | // Log what's going on |
| [1025](#L1025) | if ($this->dbit === 0) { |
| [1026](#L1026) | $this->output->log("Making database backup (using v3 engine, requires at least v1.2.2 to restore)", 'STEP'); |
| [1027](#L1027) | $this->output->log("Iterating database...", 'INFO'); |
| [1028](#L1028) | } |
| [1029](#L1029) |  |
| [1030](#L1030) | // Require Database Manager |
| [1031](#L1031) | require\_once BMI\_INCLUDES . DIRECTORY\_SEPARATOR . 'database' . DIRECTORY\_SEPARATOR . 'better-backup-v3.php'; |
| [1032](#L1032) |  |
| [1033](#L1033) | $database\_file\_dir = $this->fixSlashes((dirname($database\_file))) . DIRECTORY\_SEPARATOR; |
| [1034](#L1034) | $better\_database\_files\_dir = $database\_file\_dir . 'db\_tables'; |
| [1035](#L1035) |  |
| [1036](#L1036) | if (!is\_dir($better\_database\_files\_dir)) @mkdir($better\_database\_files\_dir, 0755, true); |
| [1037](#L1037) | $db\_exporter = new BetterDatabaseExport($better\_database\_files\_dir, $this->output, $this->dbit, intval($this->backupstart)); |
| [1038](#L1038) |  |
| [1039](#L1039) | $dbBatchingEnabled = false; |
| [1040](#L1040) | if (Dashboard\bmi\_get\_config('OTHER:BACKUP:DB:BATCHING') == 'true') { |
| [1041](#L1041) | $dbBatchingEnabled = true; |
| [1042](#L1042) | } else { |
| [1043](#L1043) | if ($this->dbit === 0) { |
| [1044](#L1044) | $this->output->log("Database batching is disabled in options, consider to use this option if your database backup fails.", 'WARN'); |
| [1045](#L1045) | } |
| [1046](#L1046) | } |
| [1047](#L1047) |  |
| [1048](#L1048) | if (BMI\_CLI\_REQUEST === true || $dbBatchingEnabled === false) { |
| [1049](#L1049) |  |
| [1050](#L1050) | $this->output->log('Exporting database via bypasser.php @ CLI || batching disabled', 'VERBOSE'); |
| [1051](#L1051) | $results = $db\_exporter->export(); |
| [1052](#L1052) |  |
| [1053](#L1053) | $this->output->log("Database backup finished", 'SUCCESS'); |
| [1054](#L1054) | $this->dbitJustFinished = true; |
| [1055](#L1055) | $this->dbit = -1; |
| [1056](#L1056) | $this->dblast = 0; |
| [1057](#L1057) |  |
| [1058](#L1058) | } else { |
| [1059](#L1059) |  |
| [1060](#L1060) | $this->output->log('Exporting database via bypasser.php @ WEB REQUEST', 'VERBOSE'); |
| [1061](#L1061) | $results = $db\_exporter->export($this->dbit, $this->dblast); |
| [1062](#L1062) |  |
| [1063](#L1063) | $this->dbit = intval($results['batchingStep']); |
| [1064](#L1064) | $this->dblast = intval($results['finishedQuery']); |
| [1065](#L1065) | $dbFinished = $results['dumpCompleted']; |
| [1066](#L1066) |  |
| [1067](#L1067) | if ($dbFinished == true) { |
| [1068](#L1068) | $this->output->log("Database backup finished", 'SUCCESS'); |
| [1069](#L1069) | $this->dbitJustFinished = true; |
| [1070](#L1070) | $this->dbit = -1; |
| [1071](#L1071) | } |
| [1072](#L1072) |  |
| [1073](#L1073) | } |
| [1074](#L1074) |  |
| [1075](#L1075) | return true; |
| [1076](#L1076) |  |
| [1077](#L1077) | } |
| [1078](#L1078) |  |
| [1079](#L1079) | } else { |
| [1080](#L1080) |  |
| [1081](#L1081) | $this->output->log('Database will not be dumped due to user settings.', 'INFO'); |
| [1082](#L1082) | $this->dbitJustFinished = true; |
| [1083](#L1083) | $this->dbit = -1; |
| [1084](#L1084) | return true; |
| [1085](#L1085) |  |
| [1086](#L1086) | } |
| [1087](#L1087) |  |
| [1088](#L1088) | } |
| [1089](#L1089) |  |
| [1090](#L1090) | public function loadWordPressAndBackupPlugin() { |
| [1091](#L1091) |  |
| [1092](#L1092) | // Define how WP should load |
| [1093](#L1093) | define('WP\_USE\_THEMES', false); |
| [1094](#L1094) | define('SHORTINIT', true); |
| [1095](#L1095) |  |
| [1096](#L1096) | // Set path to our plugin's main file |
| [1097](#L1097) | $bmiPluginPathToLoad = $this->fixSlashes(dirname(\_\_DIR\_\_) . '/backup-backup.php'); |
| [1098](#L1098) | $bmiPluginPathToLoadPro = $this->fixSlashes(dirname(dirname(\_\_DIR\_\_)) . '/backup-backup-pro/backup-backup-pro.php'); |
| [1099](#L1099) |  |
| [1100](#L1100) | // Use WP Globals and load WordPress |
| [1101](#L1101) | global $wp, $wp\_query, $wp\_the\_query, $wp\_rewrite, $wp\_did\_header; |
| [1102](#L1102) | require\_once $this->bmi\_find\_wordpress\_base\_path() . DIRECTORY\_SEPARATOR . 'wp-load.php'; |
| [1103](#L1103) | global $wp\_version; |
| [1104](#L1104) |  |
| [1105](#L1105) | // Load directory WordPress constants |
| [1106](#L1106) | require\_once ABSPATH . WPINC . '/formatting.php'; |
| [1107](#L1107) | require\_once ABSPATH . WPINC . '/meta.php'; |
| [1108](#L1108) | wp\_plugin\_directory\_constants(); |
| [1109](#L1109) |  |
| [1110](#L1110) | // Allow to register activation hook and realpath |
| [1111](#L1111) | $GLOBALS['wp\_plugin\_paths'] = array(); |
| [1112](#L1112) | $GLOBALS['shortcode\_tags'] = array(); |
| [1113](#L1113) |  |
| [1114](#L1114) | // Load all dependencies of WordPress for Backup plugin |
| [1115](#L1115) | $dependencies = [ |
| [1116](#L1116) | ABSPATH . WPINC . '/l10n.php', |
| [1117](#L1117) | ABSPATH . WPINC . '/plugin.php', |
| [1118](#L1118) | ABSPATH . WPINC . '/link-template.php', |
| [1119](#L1119) | ABSPATH . WPINC . '/class-wp-textdomain-registry.php', |
| [1120](#L1120) | ABSPATH . WPINC . '/class-wp-locale.php', |
| [1121](#L1121) | ABSPATH . WPINC . '/class-wp-locale-switcher.php', |
| [1122](#L1122) | ABSPATH . WPINC . '/session.php', |
| [1123](#L1123) | ABSPATH . WPINC . '/pluggable.php', |
| [1124](#L1124) | ABSPATH . WPINC . '/class-wp-ajax-response.php', |
| [1125](#L1125) | ABSPATH . WPINC . '/capabilities.php', |
| [1126](#L1126) | ABSPATH . WPINC . '/class-wp-roles.php', |
| [1127](#L1127) | ABSPATH . WPINC . '/class-wp-role.php', |
| [1128](#L1128) | ABSPATH . WPINC . '/class-wp-user.php', |
| [1129](#L1129) | ABSPATH . WPINC . '/class-wp-query.php', |
| [1130](#L1130) | ABSPATH . WPINC . '/query.php', |
| [1131](#L1131) | ABSPATH . WPINC . '/general-template.php', |
| [1132](#L1132) | ABSPATH . WPINC . '/http.php', |
| [1133](#L1133) | ABSPATH . WPINC . '/class-http.php', |
| [1134](#L1134) | ABSPATH . WPINC . '/class-wp-http.php', |
| [1135](#L1135) | ABSPATH . WPINC . '/class-wp-http-streams.php', |
| [1136](#L1136) | ABSPATH . WPINC . '/class-wp-http-curl.php', |
| [1137](#L1137) | ABSPATH . WPINC . '/class-wp-http-proxy.php', |
| [1138](#L1138) | ABSPATH . WPINC . '/class-wp-http-cookie.php', |
| [1139](#L1139) | ABSPATH . WPINC . '/class-wp-http-encoding.php', |
| [1140](#L1140) | ABSPATH . WPINC . '/class-wp-http-response.php', |
| [1141](#L1141) | ABSPATH . WPINC . '/class-wp-http-requests-response.php', |
| [1142](#L1142) | ABSPATH . WPINC . '/class-wp-http-requests-hooks.php', |
| [1143](#L1143) | ABSPATH . WPINC . '/widgets.php', |
| [1144](#L1144) | ABSPATH . WPINC . '/class-wp-widget.php', |
| [1145](#L1145) | ABSPATH . WPINC . '/class-wp-widget-factory.php', |
| [1146](#L1146) | ABSPATH . WPINC . '/class-wp-user-request.php', |
| [1147](#L1147) | ABSPATH . WPINC . '/user.php', |
| [1148](#L1148) | ABSPATH . WPINC . '/class-wp-user-query.php', |
| [1149](#L1149) | ABSPATH . WPINC . '/class-wp-session-tokens.php', |
| [1150](#L1150) | ABSPATH . WPINC . '/class-wp-user-meta-session-tokens.php', |
| [1151](#L1151) | ABSPATH . WPINC . '/rest-api.php', |
| [1152](#L1152) | ABSPATH . WPINC . '/kses.php', |
| [1153](#L1153) | ABSPATH . WPINC . '/theme.php', |
| [1154](#L1154) | ABSPATH . WPINC . '/rewrite.php', |
| [1155](#L1155) | ABSPATH . WPINC . '/class-wp-block-editor-context.php', |
| [1156](#L1156) | ABSPATH . WPINC . '/class-wp-block-type.php', |
| [1157](#L1157) | ABSPATH . WPINC . '/class-wp-block-pattern-categories-registry.php', |
| [1158](#L1158) | ABSPATH . WPINC . '/class-wp-block-patterns-registry.php', |
| [1159](#L1159) | ABSPATH . WPINC . '/class-wp-block-styles-registry.php', |
| [1160](#L1160) | ABSPATH . WPINC . '/class-wp-block-type-registry.php', |
| [1161](#L1161) | ABSPATH . WPINC . '/class-wp-block.php', |
| [1162](#L1162) | ABSPATH . WPINC . '/class-wp-block-list.php', |
| [1163](#L1163) | ABSPATH . WPINC . '/class-wp-block-parser-block.php', |
| [1164](#L1164) | ABSPATH . WPINC . '/class-wp-block-parser-frame.php', |
| [1165](#L1165) | ABSPATH . WPINC . '/class-wp-block-parser.php', |
| [1166](#L1166) | ABSPATH . WPINC . '/blocks.php', |
| [1167](#L1167) | ABSPATH . WPINC . '/blocks/index.php', |
| [1168](#L1168) | ]; |
| [1169](#L1169) |  |
| [1170](#L1170) | for ($i = 0; $i < sizeof($dependencies); ++$i) { |
| [1171](#L1171) | $dependency = $dependencies[$i]; |
| [1172](#L1172) | if (strpos($dependency, 'class-http.php') && version\_compare($wp\_version, '5.9.0', '>=')) { |
| [1173](#L1173) | continue; |
| [1174](#L1174) | } |
| [1175](#L1175) | if (strpos($dependency, 'session.php') && version\_compare($wp\_version, '4.7.0', '>=')) { |
| [1176](#L1176) | continue; |
| [1177](#L1177) | } |
| [1178](#L1178) | if (file\_exists($dependency)) require\_once $dependency; |
| [1179](#L1179) | } |
| [1180](#L1180) |  |
| [1181](#L1181) | // Load Cookie Constants |
| [1182](#L1182) | wp\_cookie\_constants(); |
| [1183](#L1183) |  |
| [1184](#L1184) | // Load SSL Constants for DB export |
| [1185](#L1185) | wp\_ssl\_constants(); |
| [1186](#L1186) |  |
| [1187](#L1187) | // Register Translation |
| [1188](#L1188) | if (class\_exists('WP\_Textdomain\_Registry')) { |
| [1189](#L1189) | $GLOBALS['wp\_textdomain\_registry'] = new \WP\_Textdomain\_Registry(); |
| [1190](#L1190) | } |
| [1191](#L1191) |  |
| [1192](#L1192) | if (is\_readable($bmiPluginPathToLoadPro)) { |
| [1193](#L1193) | wp\_register\_plugin\_realpath($bmiPluginPathToLoadPro); |
| [1194](#L1194) | include\_once $bmiPluginPathToLoadPro; |
| [1195](#L1195) |  |
| [1196](#L1196) | require\_once BMI\_PRO\_ROOT\_DIR . '/classes/core' . ((BMI\_PRO\_DEBUG) ? '.to-enc' : '') . '.php'; |
| [1197](#L1197) | $bmi\_pro\_instance = new Pro\_Core(); |
| [1198](#L1198) | $bmi\_pro\_instance->initialize(); |
| [1199](#L1199) | } |
| [1200](#L1200) |  |
| [1201](#L1201) | // Register our backup plugin and load its contents |
| [1202](#L1202) | wp\_register\_plugin\_realpath($bmiPluginPathToLoad); |
| [1203](#L1203) | include\_once $bmiPluginPathToLoad; |
| [1204](#L1204) |  |
| [1205](#L1205) | // Enable our plugin WITHOUT calling plugins\_loaded hook – it's important |
| [1206](#L1206) | require\_once BMI\_ROOT\_DIR . DIRECTORY\_SEPARATOR . 'includes' . DIRECTORY\_SEPARATOR . 'constants.php'; |
| [1207](#L1207) |  |
| [1208](#L1208) | // Initialize backup-migration |
| [1209](#L1209) | if (!class\_exists('Backup\_Migration\_Plugin')) { |
| [1210](#L1210) |  |
| [1211](#L1211) | // Require initializator |
| [1212](#L1212) | require\_once BMI\_ROOT\_DIR . DIRECTORY\_SEPARATOR . 'includes' . DIRECTORY\_SEPARATOR . 'initializer.php'; |
| [1213](#L1213) |  |
| [1214](#L1214) | // Initialize entire plugin |
| [1215](#L1215) | $bmi\_instance = new BMI\Backup\_Migration\_Plugin(); |
| [1216](#L1216) | $bmi\_instance->initialize(); |
| [1217](#L1217) |  |
| [1218](#L1218) | } |
| [1219](#L1219) |  |
| [1220](#L1220) | } |
| [1221](#L1221) |  |
| [1222](#L1222) | public function actionsAfterProcess($success = false) { |
| [1223](#L1223) |  |
| [1224](#L1224) | $this->loadWordPressAndBackupPlugin(); |
| [1225](#L1225) | BMP::handle\_after\_cron(); |
| [1226](#L1226) |  |
| [1227](#L1227) | return null; |
| [1228](#L1228) |  |
| [1229](#L1229) | } |
| [1230](#L1230) |  |
| [1231](#L1231) | public function bmi\_find\_wordpress\_base\_path() { |
| [1232](#L1232) |  |
| [1233](#L1233) | $dir = dirname(\_\_FILE\_\_); |
| [1234](#L1234) | $previous = null; |
| [1235](#L1235) |  |
| [1236](#L1236) | do { |
| [1237](#L1237) |  |
| [1238](#L1238) | if (file\_exists($dir . '/wp-load.php') && file\_exists($dir . '/wp-config.php')) return $dir; |
| [1239](#L1239) | if ($previous == $dir) break; |
| [1240](#L1240) | $previous = $dir; |
| [1241](#L1241) |  |
| [1242](#L1242) | } while ($dir = dirname($dir)); |
| [1243](#L1243) |  |
| [1244](#L1244) | return null; |
| [1245](#L1245) |  |
| [1246](#L1246) | } |
| [1247](#L1247) |  |
| [1248](#L1248) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/backup-backup/tags/1.3.9/includes/bypasser.php?format=txt)
* [Original Format](/export/3222525/backup-backup/tags/1.3.9/includes/bypasser.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


