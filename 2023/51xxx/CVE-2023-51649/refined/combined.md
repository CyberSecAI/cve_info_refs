=== Content from github.com_fd98cb1d_20250114_182856.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fpull%2F4995)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fpull%2F4995)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=nautobot%2Fnautobot)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nautobot](/nautobot)
/
**[nautobot](/nautobot/nautobot)**
Public

* [Notifications](/login?return_to=%2Fnautobot%2Fnautobot) You must be signed in to change notification settings
* [Fork
  298](/login?return_to=%2Fnautobot%2Fnautobot)
* [Star
   1.1k](/login?return_to=%2Fnautobot%2Fnautobot)

* [Code](/nautobot/nautobot)
* [Issues
  862](/nautobot/nautobot/issues)
* [Pull requests
  23](/nautobot/nautobot/pulls)
* [Discussions](/nautobot/nautobot/discussions)
* [Actions](/nautobot/nautobot/actions)
* [Projects
  0](/nautobot/nautobot/projects)
* [Wiki](/nautobot/nautobot/wiki)
* [Security](/nautobot/nautobot/security)
* [Insights](/nautobot/nautobot/pulse)

Additional navigation options

* [Code](/nautobot/nautobot)
* [Issues](/nautobot/nautobot/issues)
* [Pull requests](/nautobot/nautobot/pulls)
* [Discussions](/nautobot/nautobot/discussions)
* [Actions](/nautobot/nautobot/actions)
* [Projects](/nautobot/nautobot/projects)
* [Wiki](/nautobot/nautobot/wiki)
* [Security](/nautobot/nautobot/security)
* [Insights](/nautobot/nautobot/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fnautobot%2Fnautobot%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fnautobot%2Fnautobot%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [1.6] Fix object permissions enforcement on Job Buttons #4995

 Merged

[glennmatthews](/glennmatthews)
merged 4 commits into
[ltm-1.6](/nautobot/nautobot/tree/ltm-1.6 "nautobot/nautobot:ltm-1.6")
from
[u/glennmatthews-4988-jobbutton-security-1.6](/nautobot/nautobot/tree/u/glennmatthews-4988-jobbutton-security-1.6 "nautobot/nautobot:u/glennmatthews-4988-jobbutton-security-1.6")

Dec 20, 2023

 Merged

# [[1.6] Fix object permissions enforcement on Job Buttons](#top) #4995

[glennmatthews](/glennmatthews)
merged 4 commits into
[ltm-1.6](/nautobot/nautobot/tree/ltm-1.6 "nautobot/nautobot:ltm-1.6")
from
[u/glennmatthews-4988-jobbutton-security-1.6](/nautobot/nautobot/tree/u/glennmatthews-4988-jobbutton-security-1.6 "nautobot/nautobot:u/glennmatthews-4988-jobbutton-security-1.6")

Dec 20, 2023

[Conversation
3](/nautobot/nautobot/pull/4995)
[Commits
4](/nautobot/nautobot/pull/4995/commits)
[Checks
16](/nautobot/nautobot/pull/4995/checks)
[Files changed](/nautobot/nautobot/pull/4995/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=60&v=4)](/glennmatthews)

Copy link

Contributor

### @glennmatthews **[glennmatthews](/glennmatthews)** commented [Dec 18, 2023](#issue-2046992895)

# Closes: [#4988](https://github.com/nautobot/nautobot/issues/4988)

# What's Changed

Port of [#4993](https://github.com/nautobot/nautobot/pull/4993) to ltm-1.6. A couple of merge conflicts to resolve, and the `job_run` URL is slug-based rather than pk-based in 1.6.

# TODO

* Explanation of Change(s)
* Added change log fragment(s) (for more information see [the documentation](https://docs.nautobot.com/projects/core/en/stable/development/#creating-changelog-fragments))
* n/a Attached Screenshots, Payload Example
* Unit, Integration Tests
* Documentation Updates (when adding/changing features)
* Example Plugin Updates (when adding/changing features)
* Outline Remaining Work, Constraints from Design

Sorry, something went wrong.

All reactions

 [glennmatthews](/glennmatthews)
added 2 commits
[December 18, 2023 11:01](#commits-pushed-8a5c80a)

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

`[Fix object permissions enforcement on Job Buttons](/nautobot/nautobot/pull/4995/commits/8a5c80aebccfba8edf80b97333cdbc1a5d35394e "Fix object permissions enforcement on Job Buttons")`

`[8a5c80a](/nautobot/nautobot/pull/4995/commits/8a5c80aebccfba8edf80b97333cdbc1a5d35394e)`

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

`[Add imports](/nautobot/nautobot/pull/4995/commits/bd675c770fee43b1174ce805cf6f6d179baa3013 "Add imports")`

`[bd675c7](/nautobot/nautobot/pull/4995/commits/bd675c770fee43b1174ce805cf6f6d179baa3013)`

[![timizuoebideri1](https://avatars.githubusercontent.com/u/94907097?s=60&v=4)](/timizuoebideri1)

**[timizuoebideri1](/timizuoebideri1)**
approved these changes
[Dec 19, 2023](#pullrequestreview-1788882110)

 [View reviewed changes](/nautobot/nautobot/pull/4995/files/bd675c770fee43b1174ce805cf6f6d179baa3013)

 [![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
requested a review
from [gsnider2195](/gsnider2195)
[December 20, 2023 16:28](#event-11304884231)

[![gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=60&v=4)](/gsnider2195)

**[gsnider2195](/gsnider2195)**
reviewed
[Dec 20, 2023](#pullrequestreview-1791287489)

 [View reviewed changes](/nautobot/nautobot/pull/4995/files/bd675c770fee43b1174ce805cf6f6d179baa3013)

[nautobot/extras/templatetags/job\_buttons.py](/nautobot/nautobot/pull/4995/files/bd675c770fee43b1174ce805cf6f6d179baa3013#diff-666d45365d47ee0a33a96a8e0279b8b9baac487b3f9ee8dd9ebb05add5e1d090)
Outdated

Show resolved

Hide resolved

[![gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=60&v=4)](/gsnider2195)

**[gsnider2195](/gsnider2195)**
reviewed
[Dec 20, 2023](#pullrequestreview-1791301084)

 [View reviewed changes](/nautobot/nautobot/pull/4995/files/bd675c770fee43b1174ce805cf6f6d179baa3013)

[nautobot/extras/views.py](/nautobot/nautobot/pull/4995/files/bd675c770fee43b1174ce805cf6f6d179baa3013#diff-6dd19ea99cb9defb4b43f5c663a2d2e13821f93e1429b6b372452c1ec3eb06c4)
Outdated

Show resolved

Hide resolved

[![gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=60&v=4)](/gsnider2195)

**[gsnider2195](/gsnider2195)**
approved these changes
[Dec 20, 2023](#pullrequestreview-1791302496)

 [View reviewed changes](/nautobot/nautobot/pull/4995/files/bd675c770fee43b1174ce805cf6f6d179baa3013)

 [glennmatthews](/glennmatthews)
added 2 commits
[December 20, 2023 12:20](#commits-pushed-1d6f8b8)

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

`[s/SAFE_EMPTY/SAFE_EMPTY_STR/](/nautobot/nautobot/pull/4995/commits/1d6f8b855ff3303bf76787dbbad19c1b189a2b3c "s/SAFE_EMPTY/SAFE_EMPTY_STR/")`

`[1d6f8b8](/nautobot/nautobot/pull/4995/commits/1d6f8b855ff3303bf76787dbbad19c1b189a2b3c)`

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

`[Improve return_url handling](/nautobot/nautobot/pull/4995/commits/c3373114ff08b453eb33d2e1d18c148077afec7e "Improve return_url handling")`

`[c337311](/nautobot/nautobot/pull/4995/commits/c3373114ff08b453eb33d2e1d18c148077afec7e)`

 Hide details
View details

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
merged commit [`d33d0c1`](/nautobot/nautobot/commit/d33d0c15a36948c45244e5b5e10bc79b8e62de7f)
into
ltm-1.6

[Dec 20, 2023](https://github.com/nautobot/nautobot/pull/4995#event-11307139673)
18 checks passed

 [![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
deleted the
u/glennmatthews-4988-jobbutton-security-1.6

branch
[December 20, 2023 20:28](#event-11307139789)

This was referenced Feb 8, 2024

[Conditional Rendering with Grouped Job Buttons can lead to an empty group being displayed.
#5253](/nautobot/nautobot/issues/5253)

Open

[Job Buttons do not commit changes in their job.
#5261](/nautobot/nautobot/issues/5261)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fpull%2F4995)

Reviewers

[![@timizuoebideri1](https://avatars.githubusercontent.com/u/94907097?s=40&v=4)](/timizuoebideri1) [timizuoebideri1](/timizuoebideri1)

timizuoebideri1 approved these changes

[![@gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=40&v=4)](/gsnider2195) [gsnider2195](/gsnider2195)

gsnider2195 approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=52&v=4)](/glennmatthews) [![@gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=52&v=4)](/gsnider2195) [![@timizuoebideri1](https://avatars.githubusercontent.com/u/94907097?s=52&v=4)](/timizuoebideri1)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_d8129057_20250114_182852.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fissues%2F4988)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fissues%2F4988)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=nautobot%2Fnautobot)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nautobot](/nautobot)
/
**[nautobot](/nautobot/nautobot)**
Public

* [Notifications](/login?return_to=%2Fnautobot%2Fnautobot) You must be signed in to change notification settings
* [Fork
  298](/login?return_to=%2Fnautobot%2Fnautobot)
* [Star
   1.1k](/login?return_to=%2Fnautobot%2Fnautobot)

* [Code](/nautobot/nautobot)
* [Issues
  862](/nautobot/nautobot/issues)
* [Pull requests
  23](/nautobot/nautobot/pulls)
* [Discussions](/nautobot/nautobot/discussions)
* [Actions](/nautobot/nautobot/actions)
* [Projects
  0](/nautobot/nautobot/projects)
* [Wiki](/nautobot/nautobot/wiki)
* [Security](/nautobot/nautobot/security)
* [Insights](/nautobot/nautobot/pulse)

Additional navigation options

* [Code](/nautobot/nautobot)
* [Issues](/nautobot/nautobot/issues)
* [Pull requests](/nautobot/nautobot/pulls)
* [Discussions](/nautobot/nautobot/discussions)
* [Actions](/nautobot/nautobot/actions)
* [Projects](/nautobot/nautobot/projects)
* [Wiki](/nautobot/nautobot/wiki)
* [Security](/nautobot/nautobot/security)
* [Insights](/nautobot/nautobot/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fnautobot%2Fnautobot%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fnautobot%2Fnautobot%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Job and job-button constraints permissions have not been applied #4988

Closed

[abdikanipd](/abdikanipd) opened this issue
Dec 15, 2023
¬∑ 2 comments
 ¬∑ Fixed by [#4993](https://github.com/nautobot/nautobot/pull/4993)

Closed

# [Job and job-button constraints permissions have not been applied](#top) #4988

[abdikanipd](/abdikanipd) opened this issue
Dec 15, 2023
¬∑ 2 comments
 ¬∑ Fixed by [#4993](https://github.com/nautobot/nautobot/pull/4993)

Assignees
[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

Labels
[emergent](/nautobot/nautobot/labels/emergent)
Unplanned work that is brought into a sprint after it's started.
[type: bug](/nautobot/nautobot/labels/type%3A%20bug)
Something isn't working as expected

## Comments

[![@abdikanipd](https://avatars.githubusercontent.com/u/81609807?s=80&u=abc04f936520fe62d29072bb9e35c350a7724bfa&v=4)](/abdikanipd)

Copy link

### **[abdikanipd](/abdikanipd)** commented [Dec 15, 2023](#issue-2043830235)

| Environment  * Nautobot version (Docker tag too if applicable): 1.6.7 * Python version: 3.8 * Database platform, version: * Middleware(s):  Steps to Reproduce 1 .Create permission for the group and apply a constraint to allow them to run a single job button. 2. 3. Expected Behavior Just group have permission of single job and job-button, nothing else and still user can run all job-buttons. Expected to view and run just allowed job Observed Behavior Still user can run all job-buttons |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@abdikanipd](https://avatars.githubusercontent.com/u/81609807?s=40&u=abc04f936520fe62d29072bb9e35c350a7724bfa&v=4)](/abdikanipd)
[abdikanipd](/abdikanipd)
added
[triage](/nautobot/nautobot/labels/triage)
This issue is new and has not been reviewed.
[type: bug](/nautobot/nautobot/labels/type%3A%20bug)
Something isn't working as expected
labels
[Dec 15, 2023](#event-11260248775)

[![@github-project-automation](https://avatars.githubusercontent.com/in/235829?s=40&v=4)](/apps/github-project-automation)
[github-project-automation](/apps/github-project-automation)
bot
added this to [Nautobot Core ‚öôÔ∏è](/orgs/nautobot/projects/4)
[Dec 15, 2023](#event-14874740011)

[![@github-project-automation](https://avatars.githubusercontent.com/in/235829?s=40&v=4)](/apps/github-project-automation)
[github-project-automation](/apps/github-project-automation)
bot
moved this to **To Groom**
in [Nautobot Core ‚öôÔ∏è](/orgs/nautobot/projects/4)
[Dec 15, 2023](#event-15078488845)

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=80&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)

Copy link

Contributor

### **[glennmatthews](/glennmatthews)** commented [Dec 15, 2023](#issuecomment-1858005045)

| Thanks for the report! Haven't tested it yet but looking at the code it does appear that way. We're only checking `context["user"].has_perms(("extras.run_jobbutton", "extras.run_job"))` when rendering the job\_buttons templatetag, nothing more specific per Job/JobButton instance, and it similarly looks like the view code is only checking for generic `extras.run_job` permission and failing to enforce per-job-button permissions. |
| --- |

 üëç
1
 abdikanipd reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
removed
the
[triage](/nautobot/nautobot/labels/triage)
This issue is new and has not been reviewed.
label
[Dec 15, 2023](#event-11260476813)

[![@abdikanipd](https://avatars.githubusercontent.com/u/81609807?s=80&u=abc04f936520fe62d29072bb9e35c350a7724bfa&v=4)](/abdikanipd)

Copy link

Author

### **[abdikanipd](/abdikanipd)** commented [Dec 15, 2023](#issuecomment-1858105640)

| [@glennmatthews](https://github.com/glennmatthews) It seems to only check if the user has the `context 'user'. has_perms (("extras. run_jobbutton", "extras. run_job"))` Correct. Not for specific jobs, I tried to remove the `extras. run_jobbutton` perms and users can see buttons but cannot run them. It is possible to check `job_pk and job-button_id` for every job context. Constraints can also be based on multiple jobs and job buttons. |
| --- |

All reactions

Sorry, something went wrong.

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
self-assigned this
[Dec 15, 2023](#event-11262709312)

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
added
the
[emergent](/nautobot/nautobot/labels/emergent)
Unplanned work that is brought into a sprint after it's started.
label
[Dec 15, 2023](#event-11262710377)

This was referenced Dec 15, 2023

[Fix object permissions enforcement on Job Buttons
#4993](/nautobot/nautobot/pull/4993)
 Merged

[[1.6] Fix object permissions enforcement on Job Buttons
#4995](/nautobot/nautobot/pull/4995)
 Merged

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
closed this as [completed](/nautobot/nautobot/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#4993](/nautobot/nautobot/pull/4993)
[Dec 20, 2023](#event-11307136614)

[![@github-project-automation](https://avatars.githubusercontent.com/in/235829?s=40&v=4)](/apps/github-project-automation)
[github-project-automation](/apps/github-project-automation)
bot
moved this from **To Groom**
to **Done**
in [Nautobot Core ‚öôÔ∏è](/orgs/nautobot/projects/4)
[Dec 20, 2023](#event-14940364990)

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
locked as **resolved** and limited conversation to collaborators
[Mar 20, 2024](#event-12179015768)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fissues%2F4988).

Assignees

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews) [glennmatthews](/glennmatthews)

Labels

[emergent](/nautobot/nautobot/labels/emergent)
Unplanned work that is brought into a sprint after it's started.
[type: bug](/nautobot/nautobot/labels/type%3A%20bug)
Something isn't working as expected

Projects

No open projects
1 closed project

[Nautobot Core ‚öôÔ∏è](/orgs/nautobot/projects/4)

Status: Done

 +4 more

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [Fix object permissions enforcement on Job Buttons](/nautobot/nautobot/pull/4993)
 [nautobot/nautobot](/nautobot/nautobot)

2 participants

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=52&v=4)](/glennmatthews) [![@abdikanipd](https://avatars.githubusercontent.com/u/81609807?s=52&v=4)](/abdikanipd)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_15db6cdd_20250114_182857.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fsecurity%2Fadvisories%2FGHSA-vf5m-xrhm-v999)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fsecurity%2Fadvisories%2FGHSA-vf5m-xrhm-v999)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=nautobot%2Fnautobot)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nautobot](/nautobot)
/
**[nautobot](/nautobot/nautobot)**
Public

* [Notifications](/login?return_to=%2Fnautobot%2Fnautobot) You must be signed in to change notification settings
* [Fork
  298](/login?return_to=%2Fnautobot%2Fnautobot)
* [Star
   1.1k](/login?return_to=%2Fnautobot%2Fnautobot)

* [Code](/nautobot/nautobot)
* [Issues
  862](/nautobot/nautobot/issues)
* [Pull requests
  23](/nautobot/nautobot/pulls)
* [Discussions](/nautobot/nautobot/discussions)
* [Actions](/nautobot/nautobot/actions)
* [Projects
  0](/nautobot/nautobot/projects)
* [Wiki](/nautobot/nautobot/wiki)
* [Security](/nautobot/nautobot/security)
* [Insights](/nautobot/nautobot/pulse)

Additional navigation options

* [Code](/nautobot/nautobot)
* [Issues](/nautobot/nautobot/issues)
* [Pull requests](/nautobot/nautobot/pulls)
* [Discussions](/nautobot/nautobot/discussions)
* [Actions](/nautobot/nautobot/actions)
* [Projects](/nautobot/nautobot/projects)
* [Wiki](/nautobot/nautobot/wiki)
* [Security](/nautobot/nautobot/security)
* [Insights](/nautobot/nautobot/pulse)

# Missing object-level permissions enforcement when running Job Buttons

Low

[glennmatthews](/glennmatthews)
published
GHSA-vf5m-xrhm-v999
Dec 22, 2023

## Package

pip

nautobot
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

>=1.5.14

## Patched versions

1.6.8,2.1.0

## Description

### Impact

When submitting a Job to run via a Job Button, only the model-level `extras.run_job` permission is checked (i.e., does the user have permission to run Jobs in general?). Object-level permissions (i.e., does the user have permission to run this *specific* Job?) are not enforced by the URL/view used in this case (`/extras/job-button/<uuid>/run/`) The effect is that a user with permissions to run even a single Job can actually run all configured JobButton Jobs.

> Not all Jobs can be configured as JobButtons; only those implemented as subclasses of `JobButtonReceiver` can be used in this way, so this vulnerability only applies specifically to `JobButtonReceiver` subclasses.

Additionally, although the documentation states that both `extras.run_job` permission and `extras.run_jobbutton` permission must be granted to a user in order to run Jobs via JobButton, the `extras.run_jobbutton` permission is not actually enforced by the view code, only by the UI by disabling the button from being clicked normally. Furthermore, the `extras.run_jobbutton` permission never prevented invoking Jobs (including `JobButtonReceiver` subclasses) via the normal "Job Run" UI, so after some discussion, we've decided that the `extras.run_jobbutton` permission is redundant, and as it never achieved its stated/documented purpose, the fixes below will remove the UI check for `extras.run_jobbutton` and all other references to the `extras.run_jobbutton` permission, rather than adding enforcement of this previously unenforced permission.

### Patches

*Has the problem been patched? What versions should users upgrade to?*

Fix will be available in Nautobot 1.6.8 ([#4995](https://github.com/nautobot/nautobot/pull/4995)) and 2.1.0 ([#4993](https://github.com/nautobot/nautobot/pull/4993))

### Workarounds

*Is there a way for users to fix or remediate the vulnerability without upgrading?*

Partial mitigation can be achieved by auditing `JobButtonReceiver` subclasses defined in the system and restricting which users are permitted to create or edit JobButton records.

### References

* [#4988](https://github.com/nautobot/nautobot/issues/4988)
* [#4993](https://github.com/nautobot/nautobot/pull/4993)
* [#4995](https://github.com/nautobot/nautobot/pull/4995)

### Severity

Low

3.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
High

Privileges required
Low

User interaction
None

Scope
Changed

Confidentiality
None

Integrity
None

Availability
Low

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:H/PR:L/UI:N/S:C/C:N/I:N/A:L

### CVE ID

CVE-2023-51649

### Weaknesses

[CWE-200](/advisories?query=cwe%3A200) [CWE-1220](/advisories?query=cwe%3A1220)

### Credits

* [![@abdikanipd](https://avatars.githubusercontent.com/u/81609807?s=40&v=4)](/abdikanipd)
  [abdikanipd](/abdikanipd)
  Reporter

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_7999d255_20250114_182855.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fpull%2F4993)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fpull%2F4993)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=nautobot%2Fnautobot)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nautobot](/nautobot)
/
**[nautobot](/nautobot/nautobot)**
Public

* [Notifications](/login?return_to=%2Fnautobot%2Fnautobot) You must be signed in to change notification settings
* [Fork
  298](/login?return_to=%2Fnautobot%2Fnautobot)
* [Star
   1.1k](/login?return_to=%2Fnautobot%2Fnautobot)

* [Code](/nautobot/nautobot)
* [Issues
  862](/nautobot/nautobot/issues)
* [Pull requests
  23](/nautobot/nautobot/pulls)
* [Discussions](/nautobot/nautobot/discussions)
* [Actions](/nautobot/nautobot/actions)
* [Projects
  0](/nautobot/nautobot/projects)
* [Wiki](/nautobot/nautobot/wiki)
* [Security](/nautobot/nautobot/security)
* [Insights](/nautobot/nautobot/pulse)

Additional navigation options

* [Code](/nautobot/nautobot)
* [Issues](/nautobot/nautobot/issues)
* [Pull requests](/nautobot/nautobot/pulls)
* [Discussions](/nautobot/nautobot/discussions)
* [Actions](/nautobot/nautobot/actions)
* [Projects](/nautobot/nautobot/projects)
* [Wiki](/nautobot/nautobot/wiki)
* [Security](/nautobot/nautobot/security)
* [Insights](/nautobot/nautobot/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fnautobot%2Fnautobot%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fnautobot%2Fnautobot%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fix object permissions enforcement on Job Buttons #4993

 Merged

[glennmatthews](/glennmatthews)
merged 5 commits into
[develop](/nautobot/nautobot/tree/develop "nautobot/nautobot:develop")
from
[u/glennmatthews-4988-jobbutton-security](/nautobot/nautobot/tree/u/glennmatthews-4988-jobbutton-security "nautobot/nautobot:u/glennmatthews-4988-jobbutton-security")

Dec 20, 2023

 Merged

# [Fix object permissions enforcement on Job Buttons](#top) #4993

[glennmatthews](/glennmatthews)
merged 5 commits into
[develop](/nautobot/nautobot/tree/develop "nautobot/nautobot:develop")
from
[u/glennmatthews-4988-jobbutton-security](/nautobot/nautobot/tree/u/glennmatthews-4988-jobbutton-security "nautobot/nautobot:u/glennmatthews-4988-jobbutton-security")

Dec 20, 2023

[Conversation
4](/nautobot/nautobot/pull/4993)
[Commits
5](/nautobot/nautobot/pull/4993/commits)
[Checks
20](/nautobot/nautobot/pull/4993/checks)
[Files changed](/nautobot/nautobot/pull/4993/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=60&v=4)](/glennmatthews)

Copy link

Contributor

### @glennmatthews **[glennmatthews](/glennmatthews)** commented [Dec 15, 2023](#issue-2044440062)

# Closes: [#4988](https://github.com/nautobot/nautobot/issues/4988) (will also be needed in 1.6.x)

# What's Changed

* The `job_buttons` template tag wasn't considering object-level permissions when determining whether to enable or disable each JobButton it rendered. I added the appropriate `has_perms` check.
  + There was a lot of duplicate code and logic in this function between the "ungrouped buttons" and "grouped buttons" cases, so I've extracted it into a helper function to reduce duplication.
* Similarly, the `JobButtonRunView` implementation was also not considering object-level permissions. In this case this view is redundant as a JobButton's underlying Job can be invoked just as easily through the `/extras/jobs/<id>/run/` view, which is already enforcing permissions correctly. I've therefore *removed `JobButtonRunView`* rather than attempt to fix it.
  + To keep the existing behavior where clicking a JobButton redirects back to the current page rather than redirecting to the JobResult page, I've added support for a `_return_url` parameter to the Job run view.
* Enforcing `extras.run_jobbutton` permission on top of `extras.run_job` permission was redundant, especially since a user with `extras.run_job` permission alone could still run the underlying job without going through the JobButton. I've therefore *removed `extras.run_jobbutton` as a required permission*; `extras.run_job` suffices.
* In manual testing, I found that the example plugin `ExampleComplexJobButtonReceiver` hadn't been completely/correctly updated to work under 2.0, so I fixed it.

# TODO

* Explanation of Change(s)
* Added change log fragment(s) (for more information see [the documentation](https://docs.nautobot.com/projects/core/en/stable/development/#creating-changelog-fragments))
* n/a Attached Screenshots, Payload Example
* Unit, Integration Tests
* Documentation Updates (when adding/changing features)
* Example Plugin Updates (when adding/changing features)
* Outline Remaining Work, Constraints from Design

Sorry, something went wrong.

All reactions

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

`[Fix object permissions enforcement on Job Buttons](/nautobot/nautobot/pull/4993/commits/60fff8a5da0a4cb72610827644d7e29205541436 "Fix object permissions enforcement on Job Buttons")`

`[60fff8a](/nautobot/nautobot/pull/4993/commits/60fff8a5da0a4cb72610827644d7e29205541436)`

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
mentioned this pull request
[Dec 18, 2023](#ref-pullrequest-2046992895)

[[1.6] Fix object permissions enforcement on Job Buttons
#4995](/nautobot/nautobot/pull/4995)
 Merged

6 tasks

[![@gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=40&v=4)](/gsnider2195)

`[Merge branch 'develop' into u/glennmatthews-4988-jobbutton-security](/nautobot/nautobot/pull/4993/commits/d3c2e316ff6c2ccffc4710f86349397b79d5a9e1 "Merge branch 'develop' into u/glennmatthews-4988-jobbutton-security")`

`[d3c2e31](/nautobot/nautobot/pull/4993/commits/d3c2e316ff6c2ccffc4710f86349397b79d5a9e1)`

 [![@gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=40&u=556af7718766ec60d0c51aae5de914385d2da776&v=4)](/gsnider2195)
[gsnider2195](/gsnider2195)
self-requested a review
[December 18, 2023 18:19](#event-11280106829)

[![gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=60&v=4)](/gsnider2195)

**[gsnider2195](/gsnider2195)**
reviewed
[Dec 18, 2023](#pullrequestreview-1787822427)

 [View reviewed changes](/nautobot/nautobot/pull/4993/files/d3c2e316ff6c2ccffc4710f86349397b79d5a9e1)

[nautobot/extras/templatetags/job\_buttons.py](/nautobot/nautobot/pull/4993/files/d3c2e316ff6c2ccffc4710f86349397b79d5a9e1#diff-666d45365d47ee0a33a96a8e0279b8b9baac487b3f9ee8dd9ebb05add5e1d090)
Outdated

Show resolved

Hide resolved

[![gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=60&v=4)](/gsnider2195)

**[gsnider2195](/gsnider2195)**
reviewed
[Dec 18, 2023](#pullrequestreview-1787844351)

 [View reviewed changes](/nautobot/nautobot/pull/4993/files/d3c2e316ff6c2ccffc4710f86349397b79d5a9e1)

[nautobot/extras/views.py](/nautobot/nautobot/pull/4993/files/d3c2e316ff6c2ccffc4710f86349397b79d5a9e1#diff-6dd19ea99cb9defb4b43f5c663a2d2e13821f93e1429b6b372452c1ec3eb06c4)
Outdated

Show resolved

Hide resolved

[![timizuoebideri1](https://avatars.githubusercontent.com/u/94907097?s=60&v=4)](/timizuoebideri1)

**[timizuoebideri1](/timizuoebideri1)**
approved these changes
[Dec 19, 2023](#pullrequestreview-1788882741)

 [View reviewed changes](/nautobot/nautobot/pull/4993/files/d3c2e316ff6c2ccffc4710f86349397b79d5a9e1)

 [glennmatthews](/glennmatthews)
added 3 commits
[December 20, 2023 11:47](#commits-pushed-72a8296)

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

`[Merge branch 'develop' into u/glennmatthews-4988-jobbutton-security](/nautobot/nautobot/pull/4993/commits/72a82967a946cdaf1f07714b2cb27d603b8775ff "Merge branch 'develop' into u/glennmatthews-4988-jobbutton-security")`

`[72a8296](/nautobot/nautobot/pull/4993/commits/72a82967a946cdaf1f07714b2cb27d603b8775ff)`

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

`[s/SAFE_EMPTY/SAFE_EMPTY_STR/](/nautobot/nautobot/pull/4993/commits/bf715877cf21d0128c8ef88cea24ac3f51e2262a "s/SAFE_EMPTY/SAFE_EMPTY_STR/")`

`[bf71587](/nautobot/nautobot/pull/4993/commits/bf715877cf21d0128c8ef88cea24ac3f51e2262a)`

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&v=4)](/glennmatthews)

`[Improve return_url handling](/nautobot/nautobot/pull/4993/commits/99a69ce8b05be862ca945526a702d55b1a3f8c59 "Improve return_url handling")`

`[99a69ce](/nautobot/nautobot/pull/4993/commits/99a69ce8b05be862ca945526a702d55b1a3f8c59)`

[![gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=60&v=4)](/gsnider2195)

**[gsnider2195](/gsnider2195)**
approved these changes
[Dec 20, 2023](#pullrequestreview-1791609905)

 [View reviewed changes](/nautobot/nautobot/pull/4993/files/99a69ce8b05be862ca945526a702d55b1a3f8c59)

Copy link

Contributor

### @gsnider2195 **[gsnider2195](/gsnider2195)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

üíØ

Sorry, something went wrong.

All reactions

 Hide details
View details

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
merged commit [`3d964f9`](/nautobot/nautobot/commit/3d964f996f4926126c1d7853ca87b2ff475997a2)
into
develop

[Dec 20, 2023](https://github.com/nautobot/nautobot/pull/4993#event-11307136424)
21 checks passed

 [![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=40&u=aeb82c68b75837a6043df546cb680c7b2c7b25d2&v=4)](/glennmatthews)
[glennmatthews](/glennmatthews)
deleted the
u/glennmatthews-4988-jobbutton-security

branch
[December 20, 2023 20:27](#event-11307136566)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fnautobot%2Fnautobot%2Fpull%2F4993)

Reviewers

[![@timizuoebideri1](https://avatars.githubusercontent.com/u/94907097?s=40&v=4)](/timizuoebideri1) [timizuoebideri1](/timizuoebideri1)

timizuoebideri1 approved these changes

[![@gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=40&v=4)](/gsnider2195) [gsnider2195](/gsnider2195)

gsnider2195 approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

 [Job and job-button constraints permissions have not been applied](https://github.com/nautobot/nautobot/issues/4988)

3 participants

[![@glennmatthews](https://avatars.githubusercontent.com/u/5603551?s=52&v=4)](/glennmatthews) [![@gsnider2195](https://avatars.githubusercontent.com/u/75227981?s=52&v=4)](/gsnider2195) [![@timizuoebideri1](https://avatars.githubusercontent.com/u/94907097?s=52&v=4)](/timizuoebideri1)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


