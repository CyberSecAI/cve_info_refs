=== Content from plugins.trac.wordpress.org_ec7f81dd_20250114_221416.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fyoutube-widget-responsive%2Ftrunk%2Fyoutube-widget-responsive.php%3Frev%3D2905626)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453754 "Revision 2453754")
* [Latest Revision](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php)
* [Next Revision](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766 "Revision 2968766") →
* [Blame](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?annotate=blame&rev=2905626 "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2905626)

---

# [source:](/browser?rev=2905626&order=name "Go to repository root") [youtube-widget-responsive](/browser/youtube-widget-responsive?rev=2905626&order=name "View youtube-widget-responsive")/[trunk](/browser/youtube-widget-responsive/trunk?rev=2905626&order=name "View trunk")/[youtube-widget-responsive.php](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2905626&order=name "View youtube-widget-responsive.php") @ [2905626](/changeset/2905626/ "View changeset 2905626")

View diff against:

View revision:

| [Last change](/changeset/2453896/youtube-widget-responsive/trunk/youtube-widget-responsive.php "View differences") on this file since 2905626 was [2453896](/changeset/2453896/ "View changeset 2453896"), checked in by stefanoai, [4 years ago](/timeline?from=2021-01-11T12%3A45%3A36Z&precision=second "See timeline at 01/11/2021 12:45:36 PM") |
| --- |
| updated default ratio |
| **File size:** 65.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\* |
| [3](#L3) | Plugin Name: Widget Responsive for Youtube |
| [4](#L4) | Description: Widgets responsive and shorcode to embed youtube in your sidebar or in your content, with all available options. |
| [5](#L5) | Author: StefanoAI |
| [6](#L6) | Version: 1.6.1 |
| [7](#L7) | Author URI: https://www.stefanoai.com |
| [8](#L8) | Text Domain: youtube-widget-responsive |
| [9](#L9) | Domain Path: /lang |
| [10](#L10) | \*/ |
| [11](#L11) |  |
| [12](#L12) | //todo http://blog.cmstutorials.org/tutorials/how-to-add-buttons-to-the-wordpress-editor |
| [13](#L13) |  |
| [14](#L14) | class YouTubeResponsive extends \WP\_Widget { |
| [15](#L15) |  |
| [16](#L16) | static $footer = ""; |
| [17](#L17) | static $iframe\_api = FALSE; |
| [18](#L18) | static $apis\_google\_platform = FALSE; |
| [19](#L19) |  |
| [20](#L20) | public function \_\_construct() { |
| [21](#L21) | parent::\_\_construct( |
| [22](#L22) | 'youtube\_responsive', // Base ID |
| [23](#L23) | 'Youtube widget responsive', // Name |
| [24](#L24) | array('description' => \_\_('YouTube Responsive enable you to place a widget with youtube video. |
| [25](#L25) | Among the various options there is also the possibility to start the video automatically', 'youtube-widget-responsive')) // Args |
| [26](#L26) | ); |
| [27](#L27) | add\_action('vc\_before\_init', array($this, 'visual\_composer'), 9); |
| [28](#L28) | } |
| [29](#L29) |  |
| [30](#L30) | static function wp\_head() { |
| [31](#L31) | wp\_enqueue\_script('jquery'); |
| [32](#L32) | add\_shortcode('youtube', array('YouTubeResponsive', 'shortcode')); |
| [33](#L33) | } |
| [34](#L34) |  |
| [35](#L35) | static function wp\_footer() { |
| [36](#L36) | ?> |
| [37](#L37) | <script type="text/javascript"> |
| [38](#L38) | function AI\_responsive\_widget() { |
| [39](#L39) | jQuery('object.StefanoAI-youtube-responsive').each(function () { |
| [40](#L40) | jQuery(this).parent('.fluid-width-video-wrapper').removeClass('fluid-width-video-wrapper').removeAttr('style').css('width', '100%').css('display', 'block'); |
| [41](#L41) | jQuery(this).children('.fluid-width-video-wrapper').removeClass('fluid-width-video-wrapper').removeAttr('style').css('width', '100%').css('display', 'block'); |
| [42](#L42) | var width = jQuery(this).parent().innerWidth(); |
| [43](#L43) | var maxwidth = jQuery(this).css('max-width').replace(/px/, ''); |
| [44](#L44) | var pl = parseInt(jQuery(this).parent().css('padding-left').replace(/px/, '')); |
| [45](#L45) | var pr = parseInt(jQuery(this).parent().css('padding-right').replace(/px/, '')); |
| [46](#L46) | width = width - pl - pr; |
| [47](#L47) | if (maxwidth < width) { |
| [48](#L48) | width = maxwidth; |
| [49](#L49) | } |
| [50](#L50) | var ratio = jQuery(this).attr('data-ratio'); |
| [51](#L51) | if (typeof ratio == 'undefined') { |
| [52](#L52) | ratio = 16 / 9; |
| [53](#L53) | } |
| [54](#L54) | jQuery(this).css('width', width + "px"); |
| [55](#L55) | jQuery(this).css('height', width / ratio + "px"); |
| [56](#L56) | jQuery(this).find('iframe').css('width', width + "px"); |
| [57](#L57) | jQuery(this).find('iframe').css('height', width / ratio + "px"); |
| [58](#L58) | }); |
| [59](#L59) | } |
| [60](#L60) | if (typeof jQuery !== 'undefined') { |
| [61](#L61) | jQuery(document).ready(function () { |
| [62](#L62) | setTimeout(function () { |
| [63](#L63) | jQuery("div[data-iframe='StefanoAI-youtube-widget-responsive']").each(function () { |
| [64](#L64) | var iframe = jQuery("<iframe></iframe>"); |
| [65](#L65) | jQuery.each(this.attributes, function () { |
| [66](#L66) | if (this.name == 'data-iframe' || this.name == 'data-') |
| [67](#L67) | return; |
| [68](#L68) | iframe.attr(this.name.replace(/^data-/, ''), this.value); |
| [69](#L69) | }); |
| [70](#L70) | jQuery(iframe).insertAfter(jQuery(this)); |
| [71](#L71) | jQuery(this).remove(); |
| [72](#L72) | }); |
| [73](#L73) | <?php if (self::$iframe\_api) { ?> |
| [74](#L74) | var tag = document.createElement('script'); |
| [75](#L75) | tag.src = "https://www.youtube.com/iframe\_api"; |
| [76](#L76) | var firstScriptTag = document.getElementsByTagName('script')[0]; |
| [77](#L77) | firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); |
| [78](#L78) | <?php } ?> |
| [79](#L79) | <?php if (self::$apis\_google\_platform) { ?> |
| [80](#L80) | var tag = document.createElement('script'); |
| [81](#L81) | tag.src = "https://apis.google.com/js/platform.js"; |
| [82](#L82) | var firstScriptTag = document.getElementsByTagName('script')[0]; |
| [83](#L83) | firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); |
| [84](#L84) | <?php } ?> |
| [85](#L85) | AI\_responsive\_widget(); |
| [86](#L86) | }, 50); |
| [87](#L87) | }); |
| [88](#L88) | jQuery(window).resize(function () { |
| [89](#L89) | AI\_responsive\_widget(); |
| [90](#L90) | }); |
| [91](#L91) | } |
| [92](#L92) | <?php if (!empty(YouTubeResponsive::$footer)) { ?> |
| [93](#L93) |  |
| [94](#L94) | function onYouTubeIframeAPIReady() { |
| [95](#L95) | <?php echo YouTubeResponsive::$footer; ?> |
| [96](#L96) | } |
| [97](#L97) | function StefanoAI\_trackYoutubeVideo(state, video) { |
| [98](#L98) | if (typeof \_config !== 'undefined') { |
| [99](#L99) | var forceSyntax = \_config.forceSyntax || 0; |
| [100](#L100) | } else { |
| [101](#L101) | var forceSyntax = 0; |
| [102](#L102) | } |
| [103](#L103) | if (typeof window.dataLayer !== 'undefined' && !forceSyntax) { |
| [104](#L104) | window.dataLayer.push({ |
| [105](#L105) | 'event': 'youTubeTrack', |
| [106](#L106) | 'attributes': { |
| [107](#L107) | 'videoUrl': video, |
| [108](#L108) | 'videoAction': state |
| [109](#L109) | } |
| [110](#L110) | }); |
| [111](#L111) | } |
| [112](#L112) | if (typeof window.ga === 'function' && typeof window.ga.getAll === 'function' && forceSyntax !== 2) { |
| [113](#L113) | window.ga('send', 'event', 'YoutubeWidgetResponsive', state, video, 0); |
| [114](#L114) | } else if (typeof window.\_gaq !== 'undefined' && forceSyntax !== 1) { |
| [115](#L115) | window.\_gaq.push(['\_trackEvent', 'YoutubeWidgetResponsive', state, video]); |
| [116](#L116) | } |
| [117](#L117) | } |
| [118](#L118) | <?php } ?> |
| [119](#L119) | </script> |
| [120](#L120) | <?php |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | static function makeEmbedUrl($params) { |
| [124](#L124) | if (!empty($params['track']) || !empty($params['image\_preview']) || !empty($params['mute'])) { |
| [125](#L125) | self::$iframe\_api = true; |
| [126](#L126) | } |
| [127](#L127) | if (!empty($params['button\_channel'])) { |
| [128](#L128) | self::$apis\_google\_platform = true; |
| [129](#L129) | //            wp\_enqueue\_script("apis-google-platform", "https://apis.google.com/js/platform.js", false, false, true); |
| [130](#L130) | } |
| [131](#L131) | global $youtube\_id; |
| [132](#L132) | //https://www.youtu.be/\_9tBFVKhn5o |
| [133](#L133) | //https://www.youtube.com/watch?v=\_9tBFVKhn5o |
| [134](#L134) | //https://www.youtube.com/embed/\_9tBFVKhn5o |
| [135](#L135) | //https://www.youtube-nocookie.com/embed/\_9tBFVKhn5o |
| [136](#L136) | $idvideo = $idlist = $listType = NULL; |
| [137](#L137) | preg\_match('/youtu.be\/([^\/\?]+)/', $params['video'], $m); |
| [138](#L138) | $idvideo = !empty($m[1]) ? $m[1] : null; |
| [139](#L139) | if (empty($idvideo)) { |
| [140](#L140) | preg\_match('/(&|&amp;|\?|&#038;)v=([^&]+)/', $params['video'], $m); |
| [141](#L141) | $idvideo = !empty($m[2]) ? $m[2] : null; |
| [142](#L142) | } |
| [143](#L143) | if (empty($idvideo)) { |
| [144](#L144) | preg\_match('/\/embed\/([^\/|\?]+)/', $params['video'], $m); |
| [145](#L145) | $idvideo = !empty($m[1]) ? $m[1] : null; |
| [146](#L146) | } |
| [147](#L147) |  |
| [148](#L148) |  |
| [149](#L149) | if (preg\_match('/(^|&|&amp;|\?|&#038;)list=([^&]+)/', $params['video'], $l)) { |
| [150](#L150) | $idlist = !empty($l[2]) ? $l[2] : ''; |
| [151](#L151) | if (empty($idvideo)) { |
| [152](#L152) | $idvideo = ''; |
| [153](#L153) | } |
| [154](#L154) | if (preg\_match('/(^|&|&amp;|\?|&#038;)listType=([^&]+)/', $params['video'], $lt)) { |
| [155](#L155) | $listType = !empty($lt[2]) ? $lt[2] : ''; |
| [156](#L156) | } |
| [157](#L157) | } else if (empty($idvideo)) { |
| [158](#L158) | $idvideo = !empty($m[2]) ? $m[2] : $params['video']; |
| [159](#L159) | } |
| [160](#L160) |  |
| [161](#L161) | if (empty($idlist) && !empty($params['list'])) { |
| [162](#L162) | $idlist = $params['list']; |
| [163](#L163) | } |
| [164](#L164) |  |
| [165](#L165) | if (empty($listType) && !empty($params['listType'])) { |
| [166](#L166) | $listType = $params['listType']; |
| [167](#L167) | } |
| [168](#L168) |  |
| [169](#L169) | if (!empty($idvideo) || !empty($idlist)) { |
| [170](#L170) | //$w3c = !empty($params['w3c']) ? 1 : 0; |
| [171](#L171) | $w3c = 1; |
| [172](#L172) | $and = $w3c ? '&amp;' : '&'; |
| [173](#L173) | $idlist = !empty($idlist) ? $and . "list=$idlist" : ''; |
| [174](#L174) | $listType = !empty($listType) ? $and . "listType=$listType" : ''; |
| [175](#L175) | $autohide = isset($params['autohide']) ? $and . "autohide=" . $params['autohide'] : ''; |
| [176](#L176) | $autoplay = !empty($params['autoplay']) ? $and . 'autoplay=1' : ''; |
| [177](#L177) | $cc\_load = !empty($params['cc\_load']) ? $and . 'cc\_load\_policy=1' : ''; |
| [178](#L178) | $cc\_lang = !empty($params['cc\_lang']) ? $and . 'hl=' . $params['cc\_lang'] : ''; |
| [179](#L179) | $color = isset($params['color']) ? $and . 'color=' . $params['color'] : ''; |
| [180](#L180) | $controls = isset($params['controls']) ? $and . 'controls=' . $params['controls'] : ''; |
| [181](#L181) | $disablekb = isset($params['disablekb']) ? $and . 'disablekb=' . $params['disablekb'] : ''; |
| [182](#L182) | $endtime = (!empty($params['end\_m']) ? intval($params['end\_m']) \* 60 : 0) + (!empty($params['end\_s']) ? intval($params['end\_s']) : 0); |
| [183](#L183) | $end = !empty($endtime) ? $and . "end=$endtime" : ''; |
| [184](#L184) | $allowfullscreen = !empty($params['allowfullscreen']) ? 'allowfullscreen' : ''; |
| [185](#L185) | $fs = !empty($params['allowfullscreen']) ? $and . 'fs=1' : $and . 'fs=0'; |
| [186](#L186) | $iv\_load\_policy = isset($params['iv\_load\_policy']) ? $and . 'iv\_load\_policy=' . $params['iv\_load\_policy'] : ''; |
| [187](#L187) | $loop = !empty($params['loop']) ? $and . 'loop=' . $params['loop'] : ''; |
| [188](#L188) | if (!empty($loop) && empty($idlist) && !empty($idvideo)) { |
| [189](#L189) | $idlist = $and . "playlist=$idvideo"; |
| [190](#L190) | } |
| [191](#L191) | $modestbranding = isset($params['modestbranding']) ? $and . 'modestbranding=' . $params['modestbranding'] : ''; |
| [192](#L192) | $rel = !empty($params['suggested']) && $params['suggested'] == '1' ? '' : $and . 'rel=0'; |
| [193](#L193) | $showinfo = !empty($params['showinfo']) && $params['showinfo'] == '1' ? '' : $and . 'showinfo=0'; |
| [194](#L194) | $starttime = (!empty($params['start\_m']) ? intval($params['start\_m']) \* 60 : 0) + (!empty($params['start\_s']) ? intval($params['start\_s']) : 0); |
| [195](#L195) | $start = (!empty($starttime)) ? $and . "start=$starttime" : ""; |
| [196](#L196) | $theme = isset($params['theme']) ? $and . 'theme=' . $params['theme'] : ''; |
| [197](#L197) | $quality = isset($params['quality']) ? $and . 'vq=' . $params['quality'] : ''; |
| [198](#L198) | if (isset($params['ratio'])) { |
| [199](#L199) | switch ($params['ratio']) { |
| [200](#L200) | case 'default': |
| [201](#L201) | case '16/9': |
| [202](#L202) | $ratio = 'data-ratio="' . round(16 / 9, 10) . '"'; |
| [203](#L203) | break; |
| [204](#L204) | case '21/9': |
| [205](#L205) | $ratio = 'data-ratio="' . round(21 / 9, 10) . '"'; |
| [206](#L206) | break; |
| [207](#L207) | case '4/3': |
| [208](#L208) | $ratio = 'data-ratio="' . round(4 / 3, 10) . '"'; |
| [209](#L209) | break; |
| [210](#L210) | case '9/16': |
| [211](#L211) | $ratio = 'data-ratio="' . round(9 / 16, 10) . '"'; |
| [212](#L212) | break; |
| [213](#L213) | case '9/21': |
| [214](#L214) | $ratio = 'data-ratio="' . round(9 / 21, 10) . '"'; |
| [215](#L215) | break; |
| [216](#L216) | default: |
| [217](#L217) | $ratio = 'data-ratio="' . round($params['ratio'], 10) . '"'; |
| [218](#L218) | break; |
| [219](#L219) | } |
| [220](#L220) | } else { |
| [221](#L221) | $ratio = 'data-ratio="1.7777777778"'; |
| [222](#L222) | } |
| [223](#L223) | $wmode = !empty($params['wmode']) ? $and . 'wmode=transparent' : ''; |
| [224](#L224) | $url = !empty($params['privacy']) && $params['privacy'] == '1' ? '//www.youtube-nocookie.com/embed/' : '//www.youtube.com/embed/'; |
| [225](#L225) |  |
| [226](#L226) | $class = isset($params['class']) ? esc\_attr($params['class']) : ''; |
| [227](#L227) | $style = isset($params['style']) ? esc\_attr($params['style']) : ''; |
| [228](#L228) | $maxw = !empty($params['maxw']) ? 'max-width:' . intval($params['maxw']) . 'px;' : ''; |
| [229](#L229) | @$id = ++$youtube\_id; |
| [230](#L230) |  |
| [231](#L231) | $jsapi = !empty($params['track']) || !empty($params['mute']) || !empty($params['image\_preview']) ? $and . "enablejsapi=1" : ""; |
| [232](#L232) |  |
| [233](#L233) | $image\_preview = !empty($params['image\_preview']) ? $params['image\_preview'] : NULL; |
| [234](#L234) |  |
| [235](#L235) | $schemaorg\_name = !empty($params['schemaorg\_name']) ? $params['schemaorg\_name'] : NULL; |
| [236](#L236) | $schemaorg\_description\_visible = !empty($params['schemaorg\_description\_visible']) ? TRUE : FALSE; |
| [237](#L237) | $schemaorg\_description = !empty($params['schemaorg\_description']) ? $params['schemaorg\_description'] : NULL; |
| [238](#L238) | $schemaorg\_uploaddate = !empty($params['schemaorg\_uploaddate']) ? $params['schemaorg\_uploaddate'] : NULL; |
| [239](#L239) | $schemaorg\_thumbnail = !empty($params['schemaorg\_thumbnail']) ? $params['schemaorg\_thumbnail'] : NULL; |
| [240](#L240) | $schemaorg\_durationm = !empty($params['schemaorg\_durationm']) ? $params['schemaorg\_durationm'] : 0; |
| [241](#L241) | $schemaorg\_durations = !empty($params['schemaorg\_durations']) ? $params['schemaorg\_durations'] : 0; |
| [242](#L242) |  |
| [243](#L243) |  |
| [244](#L244) | $schema = !empty($schemaorg\_name) && !empty($schemaorg\_uploaddate) && !empty($schemaorg\_description) && !empty($schemaorg\_thumbnail) ? ' itemscope itemtype="http://schema.org/VideoObject"' : ''; |
| [245](#L245) | @$urlembed = "<object $schema class='StefanoAI-youtube-responsive fitvidsignore $class' width='160' height='90' style='$maxw$style' $ratio type='application/video'>"; |
| [246](#L246) | @$urlembed .= "<div data-iframe='StefanoAI-youtube-widget-responsive' data-id='StefanoAI-youtube-$id' data-class='StefanoAI-youtube-responsive $class' data-width='160' data-height='90' data-src='$url$idvideo?$idlist$listType$autohide$autoplay$cc\_load$cc\_lang$color$controls$disablekb$end$fs$iv\_load\_policy$loop$modestbranding$rel$showinfo$start$theme$quality$wmode$jsapi' data-$allowfullscreen data-style='border:none;AISTYLENONE$maxw$style'></div>"; |
| [247](#L247) |  |
| [248](#L248) | if (!empty($params['track']) || !empty($params['mute']) || !empty($image\_preview)) { |
| [249](#L249) | $onStateChange = $onReady = ''; |
| [250](#L250) | if (!empty($params['mute'])) { |
| [251](#L251) | $onReady = "'onReady': function (event) { |
| [252](#L252) | event.target.mute(); |
| [253](#L253) | },"; |
| [254](#L254) | } |
| [255](#L255) | if (!empty($params['track'])) { |
| [256](#L256) | $onStateChange = <<<SCRIPT |
| [257](#L257) |  |
| [258](#L258) | 'onStateChange': function () { |
| [259](#L259) | var d = player\_$id.getVideoData(); |
| [260](#L260) | switch (player\_$id.getPlayerState()) { |
| [261](#L261) | case -1: |
| [262](#L262) | //unstarted |
| [263](#L263) | break; |
| [264](#L264) | case 0: |
| [265](#L265) | //ended |
| [266](#L266) | //StefanoAI\_trackYoutubeVideo('Ended', d.title + " | " + d.video\_id + " (" + d.author + ")"); |
| [267](#L267) | break; |
| [268](#L268) | case 1: |
| [269](#L269) | //playing |
| [270](#L270) | StefanoAI\_trackYoutubeVideo('Playing', d.title + " | " + d.video\_id + " (" + d.author + ")"); |
| [271](#L271) | break; |
| [272](#L272) | case 2: |
| [273](#L273) | //paused |
| [274](#L274) | //StefanoAI\_trackYoutubeVideo('Paused', d.title + " | " + d.video\_id + " (" + d.author + ")"); |
| [275](#L275) | break; |
| [276](#L276) | case 3: |
| [277](#L277) | //buffering |
| [278](#L278) | break; |
| [279](#L279) | case 5: |
| [280](#L280) | //video cued (When a video is queued and ready for playback) |
| [281](#L281) | break; |
| [282](#L282) | } |
| [283](#L283) | }, |
| [284](#L284) | SCRIPT; |
| [285](#L285) | } |
| [286](#L286) | YouTubeResponsive::$footer .= <<<SCRIPT |
| [287](#L287) | var player\_$id; |
| [288](#L288) | player\_$id = new YT.Player('StefanoAI-youtube-$id', { |
| [289](#L289) | events: { |
| [290](#L290) | $onReady |
| [291](#L291) | $onStateChange |
| [292](#L292) | } |
| [293](#L293) | }); |
| [294](#L294) | SCRIPT; |
| [295](#L295) | } |
| [296](#L296) | if (!empty($image\_preview)) { |
| [297](#L297) | if (preg\_match('/^[0-9]+$/', $image\_preview)) { |
| [298](#L298) | $img = wp\_get\_attachment\_image\_src($image\_preview, array(320, 180)); |
| [299](#L299) | $src = $img[0]; |
| [300](#L300) | $alt = get\_post\_meta($image\_preview, '\_wp\_attachment\_image\_alt', true); |
| [301](#L301) | } else { |
| [302](#L302) | $src = $image\_preview; |
| [303](#L303) | $alt = !empty($params['altimg']) ? $params['altimg'] : ''; |
| [304](#L304) | } |
| [305](#L305) | YouTubeResponsive::$footer .= " |
| [306](#L306) |  |
| [307](#L307) | jQuery('#StefanoAI-youtube-$id').fadeOut(0); |
| [308](#L308) | jQuery('#StefanoAI-Youtube-image\_preview-$id').click(function(){ |
| [309](#L309) | jQuery(this).fadeOut(0); |
| [310](#L310) | jQuery('#StefanoAI-youtube-$id').fadeIn('fast'); |
| [311](#L311) | player\_$id.playVideo(); |
| [312](#L312) | AI\_responsive\_widget(); |
| [313](#L313) | }); |
| [314](#L314) | "; |
| [315](#L315) | $urlembed .= "\n<img src='$src' alt='" . esc\_attr($alt) . "' id='StefanoAI-Youtube-image\_preview-$id' style='width: 100%;' />"; |
| [316](#L316) | $urlembed = preg\_replace('/AISTYLENONE/', 'display:none;', $urlembed); |
| [317](#L317) | } else { |
| [318](#L318) | $urlembed = preg\_replace('/AISTYLENONE/', '', $urlembed); |
| [319](#L319) | } |
| [320](#L320) | if (!empty($schema)) { |
| [321](#L321) | if (!empty($schemaorg\_thumbnail)) { |
| [322](#L322) | if (preg\_match('/^[0-9]+$/', $schemaorg\_thumbnail)) { |
| [323](#L323) | $img = wp\_get\_attachment\_image\_src($schemaorg\_thumbnail, array(320, 180)); |
| [324](#L324) | $src1 = $img[0]; |
| [325](#L325) | } else { |
| [326](#L326) | $src1 = $schemaorg\_thumbnail; |
| [327](#L327) | } |
| [328](#L328) | } |
| [329](#L329) | @$urlembed .= "<meta itemprop='name' content=\"" . esc\_attr($schemaorg\_name) . "\" />"; |
| [330](#L330) | if ($schemaorg\_description\_visible) { |
| [331](#L331) | @$urlembed .= "<p itemprop='description' >" . nl2br(strip\_tags($schemaorg\_description, '')) . "</p>"; |
| [332](#L332) | } else { |
| [333](#L333) | @$urlembed .= "<meta itemprop='description' content=\"" . esc\_attr($schemaorg\_description) . "\" />"; |
| [334](#L334) | } |
| [335](#L335) | @$urlembed .= "<meta itemprop='uploadDate' content=\"" . esc\_attr($schemaorg\_uploaddate) . "\" />"; |
| [336](#L336) | @$urlembed .= "<meta itemprop='thumbnailUrl' content=\"" . esc\_attr($src1) . "\" />"; |
| [337](#L337) | @$urlembed .= "<meta itemprop='embedUrl' content=\"http://youtube.be/" . esc\_attr($idvideo) . "\" />"; |
| [338](#L338) | if (!empty($schemaorg\_durationm) || !empty($schemaorg\_durations)) { |
| [339](#L339) | @$urlembed .= "<meta itemprop='duration' content='PT" . intval($schemaorg\_durationm) . "M" . intval($schemaorg\_durations) . "S' />"; |
| [340](#L340) | } |
| [341](#L341) | } |
| [342](#L342) | @$urlembed .= "</object>"; |
| [343](#L343) | if (!empty($params['button\_channel'])) { |
| [344](#L344) | $data\_channel = preg\_match('/^UC/', $params['button\_channel']) && strlen($params['button\_channel']) == 24 ? "data-channelid" : "data-channel"; |
| [345](#L345) | $urlembed .= "<div class='g-ytsubscribe' $data\_channel='" . esc\_attr($params['button\_channel']) . "' data-layout='" . esc\_attr($params['button\_layout']) . "' data-count='" . esc\_attr($params['button\_subscriber\_count']) . "' data-theme='" . esc\_attr($params['button\_theme']) . "' ></div>"; |
| [346](#L346) | } |
| [347](#L347) | return apply\_filters('youtube\_iframe', $urlembed); |
| [348](#L348) | } else if (!empty($params['button\_channel'])) { |
| [349](#L349) | return "<div class='g-ytsubscribe' data-channel='" . esc\_attr($params['button\_channel']) . "' data-layout='" . esc\_attr($params['button\_layout']) . "' data-count='" . esc\_attr($params['button\_subscriber\_count']) . "' data-theme='" . esc\_attr($params['button\_theme']) . "' ></div>"; |
| [350](#L350) | } |
| [351](#L351) | return ''; |
| [352](#L352) | } |
| [353](#L353) |  |
| [354](#L354) | function widget($args, $instance) { |
| [355](#L355) | extract($args); |
| [356](#L356) | $title = apply\_filters('widget\_title', $instance['title']); |
| [357](#L357) | preg\_match('/\?v=([^&]+)/', $instance['video'], $m); |
| [358](#L358) | $urlembed = YouTubeResponsive::makeEmbedUrl($instance); |
| [359](#L359) | if (!empty($urlembed)) { |
| [360](#L360) | echo $before\_widget; |
| [361](#L361) | echo $before\_title . $title . $after\_title; |
| [362](#L362) | echo $urlembed; |
| [363](#L363) | echo $after\_widget; |
| [364](#L364) | } |
| [365](#L365) | } |
| [366](#L366) |  |
| [367](#L367) | function update($new\_instance, $old\_instance) { |
| [368](#L368) | //save widget settings |
| [369](#L369) | $instance = array(); |
| [370](#L370) | $instance['title'] = strip\_tags($new\_instance['title']); |
| [371](#L371) | $instance['video'] = strip\_tags($new\_instance['video']); |
| [372](#L372) | $instance['autohide'] = isset($new\_instance['autohide']) && ($new\_instance['autohide'] == 1 || $new\_instance['autohide'] == 0) ? $new\_instance['autohide'] : 2; |
| [373](#L373) | $instance['autoplay'] = !empty($new\_instance['autoplay']) ? 1 : 0; |
| [374](#L374) | $instance['mute'] = !empty($new\_instance['mute']) ? 1 : 0; |
| [375](#L375) | $instance['cc\_load'] = !empty($new\_instance['cc\_load']) ? 1 : 0; |
| [376](#L376) | $instance['cc\_lang'] = strip\_tags($new\_instance['cc\_lang']); |
| [377](#L377) | $instance['color'] = !empty($new\_instance['color']) && $new\_instance['color'] == "white" ? 'white' : 'red'; |
| [378](#L378) | $instance['controls'] = isset($new\_instance['controls']) && ( $new\_instance['controls'] == 0 || $new\_instance['controls'] == 2) ? $new\_instance['controls'] : 1; |
| [379](#L379) | $instance['disablekb'] = isset($new\_instance['disablekb']) && $new\_instance['disablekb'] == 1 ? 1 : 0; |
| [380](#L380) | $instance['end\_m'] = strip\_tags($new\_instance['end\_m']); |
| [381](#L381) | $instance['end\_s'] = strip\_tags($new\_instance['end\_s']); |
| [382](#L382) | $instance['allowfullscreen'] = !empty($new\_instance['allowfullscreen']) ? $new\_instance['allowfullscreen'] : 0; |
| [383](#L383) | $instance['iv\_load\_policy'] = !empty($new\_instance['iv\_load\_policy']) && $new\_instance['iv\_load\_policy'] == 3 ? 3 : 1; |
| [384](#L384) | $instance['loop'] = !empty($new\_instance['loop']) ? 1 : 0; |
| [385](#L385) | $instance['modestbranding'] = !empty($new\_instance['modestbranding']) ? 1 : 0; |
| [386](#L386) | $instance['suggested'] = !empty($new\_instance['suggested']) ? $new\_instance['suggested'] : 0; |
| [387](#L387) | $instance['showinfo'] = isset($new\_instance['showinfo']) && $new\_instance['showinfo'] == 0 ? 0 : 1; |
| [388](#L388) | $instance['start\_m'] = strip\_tags($new\_instance['start\_m']); |
| [389](#L389) | $instance['start\_s'] = strip\_tags($new\_instance['start\_s']); |
| [390](#L390) | $instance['theme'] = !empty($new\_instance['theme']) && $new\_instance['theme'] == 'light' ? 'light' : 'dark'; |
| [391](#L391) | $instance['quality'] = !empty($new\_instance['quality']) ? $new\_instance['quality'] : 'default'; |
| [392](#L392) | $instance['ratio'] = !empty($new\_instance['ratio']) ? $new\_instance['ratio'] : 'default'; |
| [393](#L393) | $instance['class'] = !empty($new\_instance['class']) ? $new\_instance['class'] : ''; |
| [394](#L394) | $instance['style'] = !empty($new\_instance['style']) ? $new\_instance['style'] : ''; |
| [395](#L395) | $instance['maxw'] = !empty($new\_instance['maxw']) ? $new\_instance['maxw'] : ''; |
| [396](#L396) | $instance['w3c'] = isset($new\_instance['w3c']) && $new\_instance['w3c'] == 0 ? 0 : 1; |
| [397](#L397) | $instance['privacy'] = !empty($new\_instance['privacy']) ? $new\_instance['privacy'] : 0; |
| [398](#L398) | $instance['wmode'] = !empty($new\_instance['wmode']) ? $new\_instance['wmode'] : 0; |
| [399](#L399) | $instance['track'] = !empty($new\_instance['track']) ? $new\_instance['track'] : 0; |
| [400](#L400) | $instance['image\_preview'] = !empty($new\_instance['image\_preview']) ? $new\_instance['image\_preview'] : ''; |
| [401](#L401) | $instance['schemaorg\_name'] = !empty($new\_instance['schemaorg\_name']) ? $new\_instance['schemaorg\_name'] : ''; |
| [402](#L402) | $instance['schemaorg\_description'] = !empty($new\_instance['schemaorg\_description']) ? $new\_instance['schemaorg\_description'] : ''; |
| [403](#L403) | $instance['schemaorg\_description\_visible'] = !empty($new\_instance['schemaorg\_description\_visible']) ? 1 : 0; |
| [404](#L404) | $instance['schemaorg\_durationm'] = !empty($new\_instance['schemaorg\_durationm']) ? $new\_instance['schemaorg\_durationm'] : ''; |
| [405](#L405) | $instance['schemaorg\_durations'] = !empty($new\_instance['schemaorg\_durations']) ? $new\_instance['schemaorg\_durations'] : ''; |
| [406](#L406) | $instance['schemaorg\_uploaddate'] = !empty($new\_instance['schemaorg\_uploaddate']) && preg\_match('/^[0-9]{4}\-[0-9]{1,2}\-[0-9]{1,2}$/', $new\_instance['schemaorg\_uploaddate']) ? date('Y-m-d', strtotime($new\_instance['schemaorg\_uploaddate'])) : ''; |
| [407](#L407) | $instance['schemaorg\_thumbnail'] = !empty($new\_instance['schemaorg\_thumbnail']) ? $new\_instance['schemaorg\_thumbnail'] : ''; |
| [408](#L408) | $instance['button\_channel'] = !empty($new\_instance['button\_channel']) ? $new\_instance['button\_channel'] : ''; |
| [409](#L409) | $instance['button\_layout'] = !empty($new\_instance['button\_layout']) ? $new\_instance['button\_layout'] : 'default'; |
| [410](#L410) | $instance['button\_theme'] = !empty($new\_instance['button\_theme']) ? $new\_instance['button\_theme'] : 'default'; |
| [411](#L411) | $instance['button\_subscriber\_count'] = !empty($new\_instance['button\_subscriber\_count']) ? $new\_instance['button\_subscriber\_count'] : 'default'; |
| [412](#L412) | return $instance; |
| [413](#L413) | } |
| [414](#L414) |  |
| [415](#L415) | function form($instance) { |
| [416](#L416) | wp\_enqueue\_script('jquery'); |
| [417](#L417) | wp\_enqueue\_script('jquery-ui-core'); |
| [418](#L418) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [419](#L419) | wp\_enqueue\_style('jquery-ui-css', '//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/black-tie/jquery-ui.css', NULL, NULL); |
| [420](#L420) | wp\_enqueue\_style('font-awesome-css', '//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css', NULL, NULL); |
| [421](#L421) | wp\_enqueue\_media(); |
| [422](#L422) | $variables = [ |
| [423](#L423) | 'title', 'video', 'autohide', 'autoplay', 'mute', 'cc\_load', 'cc\_lang', 'color', 'controls', 'disablekb', 'end\_m', 'end\_s', 'allowfullscreen', 'iv\_load\_policy', 'loop', 'modestbranding', 'suggested', 'showinfo', 'start\_m', 'start\_s', 'theme', 'quality', 'ratio', 'class', 'style', 'maxw', 'w3c', 'privacy', 'wmode', 'track', 'image\_preview', 'button\_channel', 'button\_layout', 'button\_theme', 'button\_subscriber\_count', 'schemaorg\_name', 'schemaorg\_description', 'schemaorg\_description\_visible', 'schemaorg\_durationm', 'schemaorg\_durations', 'schemaorg\_uploaddate', 'schemaorg\_thumbnail']; |
| [424](#L424) |  |
| [425](#L425) | $title = (isset($instance['title'])) ? $instance['title'] : ''; |
| [426](#L426) | $video = (isset($instance['video'])) ? $instance['video'] : ''; |
| [427](#L427) | $autohide = (isset($instance['autohide'])) ? $instance['autohide'] : 2; |
| [428](#L428) | $autoplay = (isset($instance['autoplay'])) ? $instance['autoplay'] : 0; |
| [429](#L429) | $mute = (isset($instance['mute'])) ? $instance['mute'] : 0; |
| [430](#L430) | $cc\_load = (isset($instance['cc\_load'])) ? $instance['cc\_load'] : 0; |
| [431](#L431) | $cc\_lang = (isset($instance['cc\_lang'])) ? $instance['cc\_lang'] : ''; |
| [432](#L432) | $color = !empty($instance['color']) && $instance['color'] == "white" ? 'white' : 'red'; |
| [433](#L433) | $controls = isset($instance['controls']) && ( $instance['controls'] == 0 || $instance['controls'] == 2) ? $instance['controls'] : 1; |
| [434](#L434) | $disablekb = isset($instance['disablekb']) && $instance['disablekb'] == 1 ? 1 : 0; |
| [435](#L435) | $end\_m = (isset($instance['end\_m'])) ? $instance['end\_m'] : ''; |
| [436](#L436) | $end\_s = (isset($instance['end\_s'])) ? $instance['end\_s'] : ''; |
| [437](#L437) | $allowfullscreen = !empty($instance['allowfullscreen']) ? $instance['allowfullscreen'] : 0; |
| [438](#L438) | $iv\_load\_policy = !empty($instance['iv\_load\_policy']) && $instance['iv\_load\_policy'] == 3 ? 3 : 1; |
| [439](#L439) | $loop = !empty($instance['loop']) ? 1 : 0; |
| [440](#L440) | $modestbranding = !empty($instance['modestbranding']) ? 1 : 0; |
| [441](#L441) | $suggested = !empty($instance['suggested']) ? $instance['suggested'] : 0; |
| [442](#L442) | $showinfo = !empty($instance['showinfo']) ? 1 : 0; |
| [443](#L443) | $start\_m = (isset($instance['start\_m'])) ? $instance['start\_m'] : 0; |
| [444](#L444) | $start\_s = (isset($instance['start\_s'])) ? $instance['start\_s'] : 0; |
| [445](#L445) | $theme = !empty($instance['theme']) && $instance['theme'] == 'light' ? 'light' : 'dark'; |
| [446](#L446) | $quality = !empty($instance['quality']) ? $instance['quality'] : 'default'; |
| [447](#L447) | $ratio = !empty($instance['ratio']) ? $instance['ratio'] : 'default'; |
| [448](#L448) | $class = !empty($instance['class']) ? $instance['class'] : ''; |
| [449](#L449) | $style = !empty($instance['style']) ? $instance['style'] : ''; |
| [450](#L450) | $maxw = !empty($instance['maxw']) ? $instance['maxw'] : ''; |
| [451](#L451) | //$w3c = !empty($instance['w3c']) ? 1 : 0; |
| [452](#L452) | $w3c = 1; |
| [453](#L453) | $privacy = !empty($instance['privacy']) ? $instance['privacy'] : 0; |
| [454](#L454) | $wmode = !empty($instance['wmode']) ? $instance['wmode'] : 0; |
| [455](#L455) | $track = !empty($instance['track']) ? $instance['track'] : 0; |
| [456](#L456) | $image\_preview = !empty($instance['image\_preview']) ? $instance['image\_preview'] : 0; |
| [457](#L457) |  |
| [458](#L458) | $button\_channel = (isset($instance['button\_channel'])) ? $instance['button\_channel'] : ''; |
| [459](#L459) | $button\_layout = (isset($instance['button\_layout'])) ? $instance['button\_layout'] : ''; |
| [460](#L460) | $button\_theme = (isset($instance['button\_theme'])) ? $instance['button\_theme'] : ''; |
| [461](#L461) | $button\_subscriber\_count = (isset($instance['button\_subscriber\_count'])) ? $instance['button\_subscriber\_count'] : ''; |
| [462](#L462) |  |
| [463](#L463) |  |
| [464](#L464) | $schemaorg\_name = !empty($instance['schemaorg\_name']) ? $instance['schemaorg\_name'] : ''; |
| [465](#L465) | $schemaorg\_description = !empty($instance['schemaorg\_description']) ? $instance['schemaorg\_description'] : ''; |
| [466](#L466) | $schemaorg\_description\_visible = !empty($instance['schemaorg\_description\_visible']) ? 1 : 0; |
| [467](#L467) | $schemaorg\_durationm = !empty($instance['schemaorg\_durationm']) ? $instance['schemaorg\_durationm'] : ''; |
| [468](#L468) | $schemaorg\_durations = !empty($instance['schemaorg\_durations']) ? $instance['schemaorg\_durations'] : ''; |
| [469](#L469) | $schemaorg\_uploaddate = !empty($instance['schemaorg\_uploaddate']) ? $instance['schemaorg\_uploaddate'] : ''; |
| [470](#L470) | $schemaorg\_thumbnail = !empty($instance['schemaorg\_thumbnail']) ? $instance['schemaorg\_thumbnail'] : 0; |
| [471](#L471) |  |
| [472](#L472) | $src = ''; |
| [473](#L473) | if (!empty($image\_preview)) { |
| [474](#L474) | $img = wp\_get\_attachment\_image\_src($image\_preview, array(320, 180)); |
| [475](#L475) | $src = $img[0]; |
| [476](#L476) | } |
| [477](#L477) | $src1 = ''; |
| [478](#L478) | if (!empty($schemaorg\_thumbnail)) { |
| [479](#L479) | $img = wp\_get\_attachment\_image\_src($schemaorg\_thumbnail, array(320, 180)); |
| [480](#L480) | $src1 = $img[0]; |
| [481](#L481) | } |
| [482](#L482) | ?> |
| [483](#L483) | <div id='<?php echo $this->get\_field\_id('video') ?>-tabs' class='StefanoAI\_YoutubeVideo-tabs'> |
| [484](#L484) | <ul> |
| [485](#L485) | <li> |
| [486](#L486) | <a href="#<?php echo $this->get\_field\_id('video') ?>-tab-video">Video</a> |
| [487](#L487) | </li> |
| [488](#L488) | <li> |
| [489](#L489) | <a href="#<?php echo $this->get\_field\_id('video') ?>-tab-schemaorg">Schema.org</a> |
| [490](#L490) | </li> |
| [491](#L491) | <li> |
| [492](#L492) | <a href="#<?php echo $this->get\_field\_id('video') ?>-tab-shortcode">ShortCode</a> |
| [493](#L493) | </li> |
| [494](#L494) | </ul> |
| [495](#L495) | <div id="<?php echo $this->get\_field\_id('video') ?>-tab-video"> |
| [496](#L496) | <p> |
| [497](#L497) | <label for="<?php echo $this->get\_field\_id('title'); ?>"><?php \_e('Title', 'youtube-widget-responsive') ?>: </label> |
| [498](#L498) | <input class="widefat" id="<?php echo $this->get\_field\_id('title'); ?>" name="<?php echo $this->get\_field\_name('title'); ?>" type="text" value="<?php echo esc\_attr($title); ?>" /> |
| [499](#L499) | </p> |
| [500](#L500) | <p> |
| [501](#L501) | <label for="<?php echo $this->get\_field\_id('video'); ?>"><?php \_e('Video', 'youtube-widget-responsive') ?>: </label> |
| [502](#L502) | <input class="widefat" id="<?php echo $this->get\_field\_id('video'); ?>" name="<?php echo $this->get\_field\_name('video'); ?>" type="text" value="<?php echo esc\_attr($video); ?>" /> |
| [503](#L503) | </p> |
| [504](#L504) | <div class="group-collapse"> |
| [505](#L505) | <h5> |
| [506](#L506) | <i class="fa fa-youtube"></i> |
| [507](#L507) | <span class="styles"> |
| [508](#L508) | <?php |
| [509](#L509) | \_e('Video:', 'youtube-widget-responsive'); |
| [510](#L510) | ?> |
| [511](#L511) | </span> |
| [512](#L512) | </h5> |
| [513](#L513) | <div class="StefanoAI\_YoutubeVideo-video"> |
| [514](#L514) | <p> |
| [515](#L515) | <input <?php echo (!empty($image\_preview)) ? 'disabled="disabled"' : ''; ?> id="<?php echo $this->get\_field\_id('autoplay'); ?>" name="<?php echo $this->get\_field\_name('autoplay'); ?>" type="checkbox" value="1" <?php echo!empty($autoplay) ? 'checked' : ''; ?> class='autoplay' /> |
| [516](#L516) | <label for="<?php echo $this->get\_field\_id('autoplay'); ?>"> |
| [517](#L517) | <i class="fa fa-youtube-play"></i> |
| [518](#L518) | <?php \_e('Start video automatically', 'youtube-widget-responsive') ?> |
| [519](#L519) | </label> |
| [520](#L520) | </p> |
| [521](#L521) | <p> |
| [522](#L522) | <input  id="<?php echo $this->get\_field\_id('mute'); ?>" name="<?php echo $this->get\_field\_name('mute'); ?>" type="checkbox" value="1" <?php echo!empty($mute) ? 'checked' : ''; ?> /> |
| [523](#L523) | <label for="<?php echo $this->get\_field\_id('mute'); ?>"> |
| [524](#L524) | <i class="fa fa-volume-off"></i> |
| [525](#L525) | <?php \_e('Mute video', 'youtube-widget-responsive') ?> |
| [526](#L526) | </label> |
| [527](#L527) | </p> |
| [528](#L528) | <p> |
| [529](#L529) | <input id="<?php echo $this->get\_field\_id('allowfullscreen'); ?>" name="<?php echo $this->get\_field\_name('allowfullscreen'); ?>" type="checkbox" value="1" <?php echo!empty($allowfullscreen) ? 'checked' : ''; ?> /> |
| [530](#L530) | <label for="<?php echo $this->get\_field\_id('allowfullscreen'); ?>"> |
| [531](#L531) | <i class="fa fa-arrows-alt"></i> |
| [532](#L532) | <?php \_e('Allow fullscreen', 'youtube-widget-responsive') ?> |
| [533](#L533) | </label> |
| [534](#L534) | </p> |
| [535](#L535) | <p> |
| [536](#L536) | <input  id="<?php echo $this->get\_field\_id('loop'); ?>" name="<?php echo $this->get\_field\_name('loop'); ?>" type="checkbox" value="1" <?php echo!empty($loop) ? 'checked' : ''; ?> /> |
| [537](#L537) | <label for="<?php echo $this->get\_field\_id('loop'); ?>"> |
| [538](#L538) | <i class="fa fa-refresh"></i> |
| [539](#L539) | <?php \_e('Loop', 'youtube-widget-responsive') ?> |
| [540](#L540) | </label> |
| [541](#L541) | </p> |
| [542](#L542) | <p> |
| [543](#L543) | <input  id="<?php echo $this->get\_field\_id('suggested'); ?>" name="<?php echo $this->get\_field\_name('suggested'); ?>" type="checkbox" value="1" <?php echo!empty($suggested) ? 'checked' : ''; ?> /> |
| [544](#L544) | <label for="<?php echo $this->get\_field\_id('suggested'); ?>"> |
| [545](#L545) | <i class="fa fa-list-ul"></i> |
| [546](#L546) | <?php \_e('Show suggested videos when the video finishes', 'youtube-widget-responsive') ?> |
| [547](#L547) | </label> |
| [548](#L548) | </p> |
| [549](#L549) | <p> |
| [550](#L550) | <input  id="<?php echo $this->get\_field\_id('iv\_load\_policy'); ?>" name="<?php echo $this->get\_field\_name('iv\_load\_policy'); ?>" type="checkbox" value="3" <?php echo esc\_attr($iv\_load\_policy) == "3" ? 'checked' : ''; ?> /> |
| [551](#L551) | <label for="<?php echo $this->get\_field\_id('iv\_load\_policy'); ?>"> |
| [552](#L552) | <i class="fa fa-eye-slash"></i> |
| [553](#L553) | <?php \_e('Hide video annotations', 'youtube-widget-responsive') ?> |
| [554](#L554) | </label> |
| [555](#L555) | </p> |
| [556](#L556) | </div> |
| [557](#L557) | </div> |
| [558](#L558) | <div id="<?php echo $this->get\_field\_id('video'); ?>-StefanoAI\_YoutubeVideo\_preview" class='StefanoAI\_YoutubeVideo\_preview group-collapse'> |
| [559](#L559) | <h5> |
| [560](#L560) | <i class="fa fa-image"></i> |
| [561](#L561) | <span class="image-preview"><?php \_e("Image preview:", 'youtube-widget-responsive') ?></span> |
| [562](#L562) | </h5> |
| [563](#L563) | <div class="StefanoAI\_YoutubeVideo-preview"> |
| [564](#L564) | <p> |
| [565](#L565) | <span style="text-align: center;display: block;"> |
| [566](#L566) | <img src="<?php echo esc\_attr($src); ?>" alt="" style="width:90%;background-color: #eee;<?php echo empty($src) ? 'display:none' : ''; ?>"/> |
| [567](#L567) | </span> |
| [568](#L568) | <input type="hidden" class="image\_preview" name="<?php echo $this->get\_field\_name('image\_preview'); ?>" value="<?php echo $image\_preview; ?>" /> |
| [569](#L569) | </p> |
| [570](#L570) | <div style="text-align: center;display: block;width: 100%;"> |
| [571](#L571) | <input type="button" class="button-primary upload" value="Upload preview" style="width: 45%;" /> |
| [572](#L572) | <input type="button" class="button-secondary noimage" value="No preview" style="width: 45%;" /> |
| [573](#L573) | </div> |
| [574](#L574) | </div> |
| [575](#L575) | </div> |
| [576](#L576) | <div class="group-collapse"> |
| [577](#L577) | <h5> |
| [578](#L578) | <i class="fa fa-clock-o"></i> |
| [579](#L579) | <span class="start\_end"><?php \_e("Time:", 'youtube-widget-responsive'); ?></span> |
| [580](#L580) | </h5> |
| [581](#L581) | <div class="StefanoAI\_YoutubeVideo-timing"> |
| [582](#L582) | <p> |
| [583](#L583) | <label for="<?php echo $this->get\_field\_id('start\_m'); ?>"> |
| [584](#L584) | <i class="fa fa-play"></i> |
| [585](#L585) | <?php \_e('Start from', 'youtube-widget-responsive') ?>: |
| [586](#L586) | </label> <br/> |
| [587](#L587) | <input class="widefat" style="width:70px;display: inline-block;" id="<?php echo $this->get\_field\_id('start\_m'); ?>" name="<?php echo $this->get\_field\_name('start\_m'); ?>" type="number" value="<?php echo esc\_attr($start\_m); ?>" /> <?php \_e('min', 'youtube-widget-responsive') ?> |
| [588](#L588) | <input class="widefat" style="width:50px;display: inline-block;" id="<?php echo $this->get\_field\_id('start\_s'); ?>" name="<?php echo $this->get\_field\_name('start\_s'); ?>" type="number" min="0" max="59" value="<?php echo esc\_attr($start\_s); ?>" /> <?php \_e('sec', 'youtube-widget-responsive') ?> |
| [589](#L589) | </p> |
| [590](#L590) | <p> |
| [591](#L591) | <label for="<?php echo $this->get\_field\_id('end\_m'); ?>"> |
| [592](#L592) | <i class="fa fa-stop"></i> |
| [593](#L593) | <?php \_e('End to', 'youtube-widget-responsive') ?>: |
| [594](#L594) | </label> <br/> |
| [595](#L595) | <input class="widefat" style="width:70px;display: inline-block;" id="<?php echo $this->get\_field\_id('end\_m'); ?>" name="<?php echo $this->get\_field\_name('end\_m'); ?>" type="number" value="<?php echo esc\_attr($end\_m); ?>" /> <?php \_e('min', 'youtube-widget-responsive') ?> |
| [596](#L596) | <input class="widefat" style="width:50px;display: inline-block;" id="<?php echo $this->get\_field\_id('end\_s'); ?>" name="<?php echo $this->get\_field\_name('end\_s'); ?>" type="number" min="0" max="59" value="<?php echo esc\_attr($end\_s); ?>" /> <?php \_e('sec', 'youtube-widget-responsive') ?> |
| [597](#L597) | </p> |
| [598](#L598) | </div> |
| [599](#L599) | </div> |
| [600](#L600) | <div class="group-collapse"> |
| [601](#L601) | <h5> |
| [602](#L602) | <i class="fa fa-commenting"></i> |
| [603](#L603) | <span class="subtitles"> |
| [604](#L604) | <?php |
| [605](#L605) | \_e('Subtitles:', 'youtube-widget-responsive'); |
| [606](#L606) | ?> |
| [607](#L607) | </span> |
| [608](#L608) | </h5> |
| [609](#L609) | <div class="StefanoAI\_YoutubeVideo-subtitles"> |
| [610](#L610) | <p> |
| [611](#L611) | <input id="<?php echo $this->get\_field\_id('cc\_load'); ?>" name="<?php echo $this->get\_field\_name('cc\_load'); ?>" type="checkbox" value="1" <?php echo!empty($cc\_load) ? 'checked' : ''; ?> /> |
| [612](#L612) | <label style="margin-left: 14px;max-width: 80%;" for="<?php echo $this->get\_field\_id('cc\_load'); ?>"> |
| [613](#L613) | <i class="fa fa-keyboard-o"></i> |
| [614](#L614) | <?php \_e('Enable substitles automatically', 'youtube-widget-responsive') ?> |
| [615](#L615) | </label> <br/> |
| [616](#L616) | <input maxlength="2" style="width:30px" id="<?php echo $this->get\_field\_id('cc\_lang'); ?>" name="<?php echo $this->get\_field\_name('cc\_lang'); ?>" type="text" value="<?php echo esc\_attr($cc\_lang); ?>" /> |
| [617](#L617) | <label style="max-width: 80%;" for="<?php echo $this->get\_field\_id('cc\_lang'); ?>"> |
| [618](#L618) | <i class="fa fa-language"></i> |
| [619](#L619) | <?php \_e('language [en]', 'youtube-widget-responsive') ?> |
| [620](#L620) | </label> |
| [621](#L621) | </p> |
| [622](#L622) | </div> |
| [623](#L623) | </div> |
| [624](#L624) | <div class="group-collapse"> |
| [625](#L625) | <h5> |
| [626](#L626) | <i class="fa fa-desktop"></i> |
| [627](#L627) | <span class="styles"> |
| [628](#L628) | <?php |
| [629](#L629) | \_e('Theme:', 'youtube-widget-responsive'); |
| [630](#L630) | ?> |
| [631](#L631) | </span> |
| [632](#L632) | </h5> |
| [633](#L633) | <div class="StefanoAI\_YoutubeVideo-styles"> |
| [634](#L634) | <p> |
| [635](#L635) | <label for="<?php echo $this->get\_field\_id('autohide'); ?>"><?php \_e('Auto hide Video progress bar', 'youtube-widget-responsive') ?> </label> |
| [636](#L636) | <select class='widefat' id="<?php echo $this->get\_field\_id('autohide'); ?>" name="<?php echo $this->get\_field\_name('autohide'); ?>"> |
| [637](#L637) | <option value="2" <?php echo $autohide == 2 ? 'selected' : '' ?>><?php \_e('Default', 'youtube-widget-responsive') ?></option> |
| [638](#L638) | <option value="1" <?php echo $autohide == 1 ? 'selected' : '' ?>><?php \_e('Hide video progress bar after video starts playing', 'youtube-widget-responsive') ?></option> |
| [639](#L639) | <option value="0" <?php echo $autohide == 0 ? 'selected' : '' ?>><?php \_e('Show always', 'youtube-widget-responsive') ?></option> |
| [640](#L640) | </select> |
| [641](#L641) | </p> |
| [642](#L642) | <p> |
| [643](#L643) | <label for="<?php echo $this->get\_field\_id('theme'); ?>"><?php \_e('Theme of control bar', 'youtube-widget-responsive') ?> </label> |
| [644](#L644) | <select class='widefat' id="<?php echo $this->get\_field\_id('theme'); ?>" name="<?php echo $this->get\_field\_name('theme'); ?>"> |
| [645](#L645) | <option value="dark" <?php echo $theme == 'dark' ? 'selected' : '' ?>><?php \_e('Dark', 'youtube-widget-responsive') ?></option> |
| [646](#L646) | <option value="light" <?php echo $theme == 'light' ? 'selected' : '' ?>><?php \_e('Light', 'youtube-widget-responsive') ?></option> |
| [647](#L647) | </select> |
| [648](#L648) | </p> |
| [649](#L649) | <p> |
| [650](#L650) | <label for="<?php echo $this->get\_field\_id('color'); ?>"><?php \_e('Select color of progress bar', 'youtube-widget-responsive') ?> </label> |
| [651](#L651) | <select class='widefat' id="<?php echo $this->get\_field\_id('color'); ?>" name="<?php echo $this->get\_field\_name('color'); ?>"> |
| [652](#L652) | <option value="red" <?php echo $color == 'red' ? 'selected' : '' ?>><?php \_e('Red', 'youtube-widget-responsive') ?></option> |
| [653](#L653) | <option value="white" <?php echo $color == 'white' ? 'selected' : '' ?>><?php \_e('White', 'youtube-widget-responsive') ?></option> |
| [654](#L654) | </select> |
| [655](#L655) | </p> |
| [656](#L656) | <p> |
| [657](#L657) | <label for="<?php echo $this->get\_field\_id('controls'); ?>"><?php \_e('Show controls bar', 'youtube-widget-responsive') ?> </label> |
| [658](#L658) | <select class='widefat' id="<?php echo $this->get\_field\_id('controls'); ?>" name="<?php echo $this->get\_field\_name('controls'); ?>"> |
| [659](#L659) | <option value="1" <?php echo $controls == 1 ? 'selected' : '' ?>><?php \_e('Always', 'youtube-widget-responsive') ?></option> |
| [660](#L660) | <option value="2" <?php echo $controls == 2 ? 'selected' : '' ?>><?php \_e('On video playback', 'youtube-widget-responsive') ?></option> |
| [661](#L661) | <option value="0" <?php echo $controls == 0 ? 'selected' : '' ?>><?php \_e('Never', 'youtube-widget-responsive') ?></option> |
| [662](#L662) | </select> |
| [663](#L663) | </p> |
| [664](#L664) | <p> |
| [665](#L665) | <label for="<?php echo $this->get\_field\_id('quality'); ?>"><?php \_e('Resolution', 'youtube-widget-responsive') ?> </label> |
| [666](#L666) | <select class='widefat' id="<?php echo $this->get\_field\_id('quality'); ?>" name="<?php echo $this->get\_field\_name('quality'); ?>"> |
| [667](#L667) | <option value="default" <?php echo empty($quality) || $quality == 'default' ? 'selected' : '' ?>><?php \_e('Default', 'youtube-widget-responsive') ?></option> |
| [668](#L668) | <option value="small" <?php echo $quality == 'small' ? 'selected' : '' ?>>240px</option> |
| [669](#L669) | <option value="medium" <?php echo $quality == 'medium' ? 'selected' : '' ?>>360px</option> |
| [670](#L670) | <option value="large" <?php echo $quality == 'large' ? 'selected' : '' ?>>480px</option> |
| [671](#L671) | <option value="hd720" <?php echo $quality == 'hd720' ? 'selected' : '' ?>>720px</option> |
| [672](#L672) | <option value="hd1080" <?php echo $quality == 'hd1080' ? 'selected' : '' ?>>1080px</option> |
| [673](#L673) | <option value="highres" <?php echo $quality == 'highres' ? 'selected' : '' ?>> &gt; 1080px</option> |
| [674](#L674) | </select> |
| [675](#L675) | </p> |
| [676](#L676) | <p> |
| [677](#L677) | <label for="<?php echo $this->get\_field\_id('ratio'); ?>"><?php \_e('Aspect ratio', 'youtube-widget-responsive') ?> </label> |
| [678](#L678) | <select class='widefat' id="<?php echo $this->get\_field\_id('ratio'); ?>" name="<?php echo $this->get\_field\_name('ratio'); ?>"> |
| [679](#L679) | <option value="default" <?php echo empty($ratio) || $ratio == 'default' ? 'selected' : '' ?>><?php \_e('Default 16/9', 'youtube-widget-responsive') ?></option> |
| [680](#L680) | <option value="2.333333" <?php echo $ratio == '2.333333' ? 'selected' : '' ?>>21/9</option> |
| [681](#L681) | <option value="1.333333" <?php echo $ratio == '1.333333' ? 'selected' : '' ?>>4/3</option> |
| [682](#L682) | <option value="0.5625" <?php echo $ratio == '0.5625' ? 'selected' : '' ?>>9/16</option> |
| [683](#L683) | <option value="0.4286" <?php echo $ratio == '0.4286' ? 'selected' : '' ?>>9/21</option> |
| [684](#L684) | </select> |
| [685](#L685) | </p> |
| [686](#L686) | <p> |
| [687](#L687) | <input  id="<?php echo $this->get\_field\_id('disablekb'); ?>" name="<?php echo $this->get\_field\_name('disablekb'); ?>" type="checkbox" value="1" <?php echo!empty($disablekb) ? 'checked' : ''; ?> /> |
| [688](#L688) | <label for="<?php echo $this->get\_field\_id('disablekb'); ?>"><?php \_e('Disable the player Keyboard controls', 'youtube-widget-responsive') ?> </label> |
| [689](#L689) | </p> |
| [690](#L690) | <p> |
| [691](#L691) | <input  id="<?php echo $this->get\_field\_id('modestbranding'); ?>" name="<?php echo $this->get\_field\_name('modestbranding'); ?>" type="checkbox" value="1" <?php echo!empty($modestbranding) ? 'checked' : ''; ?> /> |
| [692](#L692) | <label for="<?php echo $this->get\_field\_id('modestbranding'); ?>"><?php \_e('Hide YouTube logo on controls bar', 'youtube-widget-responsive') ?> </label> |
| [693](#L693) | </p> |
| [694](#L694) | <p> |
| [695](#L695) | <input  id="<?php echo $this->get\_field\_id('showinfo'); ?>" name="<?php echo $this->get\_field\_name('showinfo'); ?>" type="checkbox" value="0" <?php echo $showinfo == "0" ? 'checked' : ''; ?> /> |
| [696](#L696) | <label for="<?php echo $this->get\_field\_id('showinfo'); ?>"><?php \_e('Hide the video title and uploader before the video starts playing', 'youtube-widget-responsive') ?> </label> |
| [697](#L697) | </p> |
| [698](#L698) | <p> |
| [699](#L699) | <label for="<?php echo $this->get\_field\_id('class'); ?>">class: </label> |
| [700](#L700) | <input class="widefat" id="<?php echo $this->get\_field\_id('class'); ?>" name="<?php echo $this->get\_field\_name('class'); ?>" type="text" value="<?php echo esc\_attr($class); ?>" /> |
| [701](#L701) | </p> |
| [702](#L702) | <p> |
| [703](#L703) | <label for="<?php echo $this->get\_field\_id('style'); ?>">style: </label> |
| [704](#L704) | <input class="widefat" id="<?php echo $this->get\_field\_id('style'); ?>" name="<?php echo $this->get\_field\_name('style'); ?>" type="text" value="<?php echo esc\_attr($style); ?>" /> |
| [705](#L705) | </p> |
| [706](#L706) | <p> |
| [707](#L707) | <label for="<?php echo $this->get\_field\_id('maxw'); ?>" class="maxw">max-width: </label> |
| [708](#L708) | <input id="<?php echo $this->get\_field\_id('maxw'); ?>" name="<?php echo $this->get\_field\_name('maxw'); ?>" type="number" value="<?php echo esc\_attr($maxw); ?>" style="width: 6em" /> px |
| [709](#L709) | </p> |
| [710](#L710) | </div> |
| [711](#L711) | </div> |
| [712](#L712) | <div class="group-collapse"> |
| [713](#L713) | <h5> |
| [714](#L714) | <i class="fa fa-gear"></i> |
| [715](#L715) | <span class="styles"> |
| [716](#L716) | <?php |
| [717](#L717) | \_e('Settings:', 'youtube-widget-responsive'); |
| [718](#L718) | ?> |
| [719](#L719) | </span> |
| [720](#L720) | </h5> |
| [721](#L721) | <div class="StefanoAI\_YoutubeVideo-styles"> |
| [722](#L722) | <!--                        <p> |
| [723](#L723) | <input  id="<?php echo $this->get\_field\_id('w3c'); ?>" name="<?php echo $this->get\_field\_name('w3c'); ?>" type="checkbox" value="1" <?php echo!empty($w3c) ? 'checked' : ''; ?> /> |
| [724](#L724) | <label for="<?php echo $this->get\_field\_id('w3c'); ?>">W3C standard </label> |
| [725](#L725) | </p>--> |
| [726](#L726) | <p> |
| [727](#L727) | <input  id="<?php echo $this->get\_field\_id('privacy'); ?>" name="<?php echo $this->get\_field\_name('privacy'); ?>" type="checkbox" value="1" <?php echo!empty($privacy) ? 'checked' : ''; ?> /> |
| [728](#L728) | <label for="<?php echo $this->get\_field\_id('privacy'); ?>"><?php \_e('Enable privacy-enhanced mode [<a target="\_blank" href="http://www.google.com/support/youtube/bin/answer.py?answer=171780&expand=PrivacyEnhancedMode#privacy">?</a>]', 'youtube-widget-responsive') ?> </label> |
| [729](#L729) | </p> |
| [730](#L730) | <p> |
| [731](#L731) | <input  id="<?php echo $this->get\_field\_id('wmode'); ?>" name="<?php echo $this->get\_field\_name('wmode'); ?>" type="checkbox" value="1" <?php echo!empty($wmode) ? 'checked' : ''; ?> /> |
| [732](#L732) | <label for="<?php echo $this->get\_field\_id('wmode'); ?>"><?php \_e('wmode transparent', 'youtube-widget-responsive') ?></label> |
| [733](#L733) | </p> |
| [734](#L734) | <p> |
| [735](#L735) | <input  id="<?php echo $this->get\_field\_id('track'); ?>" name="<?php echo $this->get\_field\_name('track'); ?>" type="checkbox" value="1" <?php echo!empty($track) ? 'checked' : ''; ?> /> |
| [736](#L736) | <label for="<?php echo $this->get\_field\_id('track'); ?>"><?php \_e('Track video (Google Analytics/Universal Analytics)', 'youtube-widget-responsive') ?></label> |
| [737](#L737) | </p> |
| [738](#L738) | </div> |
| [739](#L739) | </div> |
| [740](#L740) | <div id="<?php echo $this->get\_field\_id('video'); ?>-StefanoAI\_YoutubeVideo\_button" class='StefanoAI\_YoutubeVideo\_button group-collapse'> |
| [741](#L741) | <h5> |
| [742](#L742) | <i class="fa fa-youtube-square"></i> |
| [743](#L743) | <span class="channel-button"><?php \_e("Button subscribe:", 'youtube-widget-responsive') ?></span> |
| [744](#L744) | </h5> |
| [745](#L745) | <div class="StefanoAI\_YoutubeVideo-button"> |
| [746](#L746) | <p> |
| [747](#L747) | <label for="<?php echo $this->get\_field\_id('button\_channel'); ?>"> <?php \_e("Channel Name or ID", 'youtube-widget-responsive'); ?> <a href="https://www.youtube.com/account\_advanced" target="\_blank" title="Get ID"><i class="fa fa-question-circle"></i></a>:</label> |
| [748](#L748) | <input class="widefat" id="<?php echo $this->get\_field\_id('button\_channel'); ?>" name="<?php echo $this->get\_field\_name('button\_channel'); ?>" type="text" value="<?php echo esc\_attr($button\_channel); ?>" /> |
| [749](#L749) | </p> |
| [750](#L750) | <p> |
| [751](#L751) | <label for="<?php echo $this->get\_field\_id('button\_layout'); ?>"><?php \_e("Layout", 'youtube-widget-responsive'); ?>:</label> |
| [752](#L752) | <select class='widefat' id="<?php echo $this->get\_field\_id('button\_layout'); ?>" name="<?php echo $this->get\_field\_name('button\_layout'); ?>"> |
| [753](#L753) | <option value="default" <?php echo empty($button\_layout) || $button\_layout == 'default' ? 'selected' : '' ?>><?php \_e('Default', 'youtube-widget-responsive') ?></option> |
| [754](#L754) | <option value="full" <?php echo $button\_layout == 'full' ? 'selected' : '' ?>><?php \_e('Full', 'youtube-widget-responsive') ?></option> |
| [755](#L755) | </select> |
| [756](#L756) | </p> |
| [757](#L757) | <p> |
| [758](#L758) | <label for="<?php echo $this->get\_field\_id('button\_theme'); ?>"><?php \_e("Theme", 'youtube-widget-responsive'); ?>:</label> |
| [759](#L759) | <select class='widefat' id="<?php echo $this->get\_field\_id('button\_theme'); ?>" name="<?php echo $this->get\_field\_name('button\_theme'); ?>"> |
| [760](#L760) | <option value="default" <?php echo empty($button\_theme) || $button\_theme == 'default' ? 'selected' : '' ?>><?php \_e('Default', 'youtube-widget-responsive') ?></option> |
| [761](#L761) | <option value="dark" <?php echo $button\_theme == 'dark' ? 'selected' : '' ?>><?php \_e('Dark', 'youtube-widget-responsive') ?></option> |
| [762](#L762) | </select> |
| [763](#L763) | </p> |
| [764](#L764) | <p> |
| [765](#L765) | <label for="<?php echo $this->get\_field\_id('button\_subscriber\_count'); ?>"><?php \_e("Subscriber count", 'youtube-widget-responsive'); ?>:</label> |
| [766](#L766) | <select class='widefat' id="<?php echo $this->get\_field\_id('button\_subscriber\_count'); ?>" name="<?php echo $this->get\_field\_name('button\_subscriber\_count'); ?>"> |
| [767](#L767) | <option value="default" <?php echo empty($button\_subscriber\_count) || $button\_subscriber\_count == 'default' ? 'selected' : '' ?>><?php \_e('Default (shown)', 'youtube-widget-responsive') ?></option> |
| [768](#L768) | <option value="hidden" <?php echo $button\_subscriber\_count == 'hidden' ? 'selected' : '' ?>><?php \_e('Hidden', 'youtube-widget-responsive') ?></option> |
| [769](#L769) | </select> |
| [770](#L770) | </p> |
| [771](#L771) | </div> |
| [772](#L772) | </div> |
| [773](#L773) | <script type="text/javascript"> |
| [774](#L774) | jQuery(document).ready(function () { |
| [775](#L775) | jQuery("#<?php echo $this->get\_field\_id('video') ?>-tab-video .group-collapse").css('border', '1px solid #eee'); |
| [776](#L776) | jQuery("#<?php echo $this->get\_field\_id('video') ?>-tab-video .group-collapse").css('padding', '5px 3px'); |
| [777](#L777) | jQuery("#<?php echo $this->get\_field\_id('video') ?>-tab-video .group-collapse label").css('padding-left', '5px'); |
| [778](#L778) | jQuery("#<?php echo $this->get\_field\_id('video') ?>-tab-video .group-collapse label").css('width', '93%'); |
| [779](#L779) | jQuery("#<?php echo $this->get\_field\_id('video') ?>-tab-video .group-collapse label.maxw").css('width', 'auto'); |
| [780](#L780) | jQuery("#<?php echo $this->get\_field\_id('video') ?>-tab-video .group-collapse>h5").css('cursor', 'pointer'); |
| [781](#L781) | jQuery("#<?php echo $this->get\_field\_id('video') ?>-tab-video .group-collapse>h5").click(function () { |
| [782](#L782) | jQuery(this).next('div').fadeToggle('fast'); |
| [783](#L783) | }).click(); |
| [784](#L784) | }); |
| [785](#L785) | </script> |
| [786](#L786) | </div> |
| [787](#L787) | <div id="<?php echo $this->get\_field\_id('video') ?>-tab-schemaorg" class="StefanoAI\_YoutubeVideo\_preview"> |
| [788](#L788) | <p> |
| [789](#L789) | <label for="<?php echo $this->get\_field\_id('schemaorg\_name'); ?>"><?php \_e('Name', 'youtube-widget-responsive') ?>\*: </label> |
| [790](#L790) | <input class="widefat" id="<?php echo $this->get\_field\_id('schemaorg\_name'); ?>" name="<?php echo $this->get\_field\_name('schemaorg\_name'); ?>" type="text" value="<?php echo esc\_attr($schemaorg\_name); ?>" /> |
| [791](#L791) | </p> |
| [792](#L792) | <p> |
| [793](#L793) | <label for="<?php echo $this->get\_field\_id('schemaorg\_thumbnail'); ?>"><?php \_e('Thumbnail Url', 'youtube-widget-responsive') ?>\*: </label> |
| [794](#L794) | <span style="text-align: center;display: block;"> |
| [795](#L795) | <img src="<?php echo esc\_attr($src1); ?>" class="image\_preview" alt="" style="width:90%;background-color: #eee;<?php echo empty($schemaorg\_thumbnail) ? 'display:none' : ''; ?>"/> |
| [796](#L796) | </span> |
| [797](#L797) | <input type="hidden" class="image\_preview" name="<?php echo $this->get\_field\_name('schemaorg\_thumbnail'); ?>" value="<?php echo esc\_attr($schemaorg\_thumbnail); ?>" /> |
| [798](#L798) | </p> |
| [799](#L799) | <div style="text-align: center;display: block;width: 100%;"> |
| [800](#L800) | <input type="button" class="button-primary upload" value="Upload thumbnail" style="width: 45%;" /> |
| [801](#L801) | <input type="button" class="button-secondary noimage" value="No preview" style="width: 45%;" /> |
| [802](#L802) | </div> |
| [803](#L803) | <p> |
| [804](#L804) | <label for="<?php echo $this->get\_field\_id('schemaorg\_uploaddate'); ?>"><?php \_e('Upload date', 'youtube-widget-responsive') ?>\*: </label> |
| [805](#L805) | <input class="widefat" id="<?php echo $this->get\_field\_id('schemaorg\_uploaddate'); ?>" name="<?php echo $this->get\_field\_name('schemaorg\_uploaddate'); ?>" type='text' value="<?php echo esc\_textarea($schemaorg\_uploaddate); ?>" pattern='[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}' maxlength="10" placeholder="<?php echo date('Y-m-d'); ?>" /> |
| [806](#L806) | </p> |
| [807](#L807) | <p> |
| [808](#L808) | <label for="<?php echo $this->get\_field\_id('schemaorg\_description'); ?>"><?php \_e('Description', 'youtube-widget-responsive') ?>\*: </label> |
| [809](#L809) | <textarea class="widefat" style="min-height: 90px;" id="<?php echo $this->get\_field\_id('schemaorg\_description'); ?>" name="<?php echo $this->get\_field\_name('schemaorg\_description'); ?>"><?php echo esc\_textarea($schemaorg\_description); ?></textarea> |
| [810](#L810) | </p> |
| [811](#L811) | <p> |
| [812](#L812) | <input  id="<?php echo $this->get\_field\_id('schemaorg\_description\_visible'); ?>" name="<?php echo $this->get\_field\_name('schemaorg\_description\_visible'); ?>" type="checkbox" value="1" <?php echo!empty($schemaorg\_description\_visible) ? 'checked' : ''; ?> /> |
| [813](#L813) | <label for="<?php echo $this->get\_field\_id('schemaorg\_description\_visible'); ?>"><?php \_e('Description visible?', 'youtube-widget-responsive') ?>: </label> |
| [814](#L814) | </p> |
| [815](#L815) | <p> |
| [816](#L816) | <?php \_e('Duration', 'youtube-widget-responsive') ?> |
| [817](#L817) | <table class='widefat'> |
| [818](#L818) | <thead> |
| [819](#L819) | <tr> |
| [820](#L820) | <th><label for="<?php echo $this->get\_field\_id('schemaorg\_durationm'); ?>"><?php \_e('min', 'youtube-widget-responsive') ?>: </label></th> |
| [821](#L821) | <th><label for="<?php echo $this->get\_field\_id('schemaorg\_durations'); ?>"><?php \_e('sec', 'youtube-widget-responsive') ?>: </label></th> |
| [822](#L822) | </tr> |
| [823](#L823) | </thead> |
| [824](#L824) | <tr class='alternate'> |
| [825](#L825) | <td> |
| [826](#L826) | <input class="widefat" id="<?php echo $this->get\_field\_id('schemaorg\_durationm'); ?>" name="<?php echo $this->get\_field\_name('schemaorg\_durationm'); ?>" type='number' value="<?php echo esc\_textarea($schemaorg\_durationm); ?>" pattern='[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}' maxlength="10"/> |
| [827](#L827) | </td> |
| [828](#L828) | <td> |
| [829](#L829) | <input class="widefat" id="<?php echo $this->get\_field\_id('schemaorg\_durations'); ?>" name="<?php echo $this->get\_field\_name('schemaorg\_durations'); ?>" type='number' value="<?php echo esc\_textarea($schemaorg\_durations); ?>" pattern='[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}' maxlength="2" style="width: 70px;" /> |
| [830](#L830) | </td> |
| [831](#L831) | </tr> |
| [832](#L832) | </table> |
| [833](#L833) | </p> |
| [834](#L834) | <tiny style='color:gray;font-size:0.8em;'>\*field required to print schema.org</tiny> |
| [835](#L835) | </div> |
| [836](#L836) | <div id="<?php echo $this->get\_field\_id('video') ?>-tab-shortcode"> |
| [837](#L837) | <tiny style='color:gray;font-size:0.8em;'><?php \_e('Save to display the new shortcode', 'youtube-widget-responsive'); ?></tiny> |
| [838](#L838) | <textarea class='widefat' style="min-height: 300px;">[youtube <?php |
| [839](#L839) | foreach ($instance as $k => $v) { |
| [840](#L840) | if (!empty($v) && in\_array($k, $variables)) { |
| [841](#L841) | if ($k == 'w3c') { |
| [842](#L842) | continue; |
| [843](#L843) | } |
| [844](#L844) | echo "    $k=\"" . esc\_textarea(esc\_attr($v)) . '"'; |
| [845](#L845) | } |
| [846](#L846) | } |
| [847](#L847) | ?>]</textarea> |
| [848](#L848) | </div> |
| [849](#L849) | </div> |
| [850](#L850) | <script type="text/javascript"> |
| [851](#L851) | jQuery(document).ready(function () { |
| [852](#L852) | jQuery(".StefanoAI\_YoutubeVideo-tabs").each(function () { |
| [853](#L853) | if (jQuery(this).closest('form').children('.widget-content').children("#widget-youtube\_responsive-\_\_i\_\_-video-tabs").length === 0) { |
| [854](#L854) | if (jQuery(this).attr('jsAIon') != "1") { |
| [855](#L855) | jQuery(this).attr('jsAIon', '1'); |
| [856](#L856) | jQuery(this).tabs(); |
| [857](#L857) | } |
| [858](#L858) | } |
| [859](#L859) | }); |
| [860](#L860) |  |
| [861](#L861) | jQuery('.StefanoAI\_YoutubeVideo\_preview input.noimage').each(function () { |
| [862](#L862) | if (jQuery(this).closest('form').children('.widget-content').children("#widget-youtube\_responsive-\_\_i\_\_-video-tabs").length === 0) { |
| [863](#L863) | if (jQuery(this).attr('jsAIon') != "1") { |
| [864](#L864) | jQuery(this).attr('jsAIon', '1'); |
| [865](#L865) | var div = jQuery(this).closest('div.StefanoAI\_YoutubeVideo\_preview'); |
| [866](#L866) | jQuery(this).click(function () { |
| [867](#L867) | jQuery(div).find("input.image\_preview").val(""); |
| [868](#L868) | jQuery(div).find("img").attr("src", ''); |
| [869](#L869) | jQuery(div).closest('form').find('.autoplay').removeAttr('disabled'); |
| [870](#L870) | jQuery(div).find("img").css("display", 'none'); |
| [871](#L871) | jQuery(this).closest('form').find('.widget-control-actions .widget-control-save').removeAttr('disabled'); |
| [872](#L872) | }); |
| [873](#L873) | } |
| [874](#L874) | } |
| [875](#L875) | }); |
| [876](#L876) |  |
| [877](#L877) | jQuery('.StefanoAI\_YoutubeVideo\_preview input.upload').each(function () { |
| [878](#L878) | if (jQuery(this).closest('form').children('.widget-content').children("#widget-youtube\_responsive-\_\_i\_\_-video-tabs").length === 0) { |
| [879](#L879) | if (jQuery(this).attr('jsAIon') != "1") { |
| [880](#L880) | jQuery(this).attr('jsAIon', '1'); |
| [881](#L881) | var div = jQuery(this).closest('div.StefanoAI\_YoutubeVideo\_preview'); |
| [882](#L882) | jQuery(this).click(function () { |
| [883](#L883) | var image = wp.media({ |
| [884](#L884) | title: 'Upload Image', |
| [885](#L885) | // mutiple: true if you want to upload multiple files at once |
| [886](#L886) | multiple: false |
| [887](#L887) | }).open() |
| [888](#L888) | .on('select', function (e) { |
| [889](#L889) | // This will return the selected image from the Media Uploader, the result is an object |
| [890](#L890) | var uploaded\_image = image.state().get('selection').first(); |
| [891](#L891) | // We convert uploaded\_image to a JSON object to make accessing it easier |
| [892](#L892) | // Output to the console uploaded\_image |
| [893](#L893) | //console.log(uploaded\_image); |
| [894](#L894) | var image\_url = uploaded\_image.toJSON().url; |
| [895](#L895) | var image\_id = uploaded\_image.toJSON().id; |
| [896](#L896) | // Let's assign the url value to the input field |
| [897](#L897) | jQuery(div).find('img').attr('src', image\_url); |
| [898](#L898) | jQuery(div).find('img').css('display', 'initial'); |
| [899](#L899) | jQuery(div).find('input.image\_preview').val(image\_id); |
| [900](#L900) | jQuery(div).closest('form').find('.autoplay').attr('disabled', 'disabled'); |
| [901](#L901) | jQuery(div).closest('form').find('.widget-control-actions .widget-control-save').removeAttr('disabled'); |
| [902](#L902) | }); |
| [903](#L903) | }); |
| [904](#L904) | } |
| [905](#L905) | } |
| [906](#L906) | }); |
| [907](#L907) | }); |
| [908](#L908) | </script> |
| [909](#L909) | <?php |
| [910](#L910) | } |
| [911](#L911) |  |
| [912](#L912) | function visual\_composer() { |
| [913](#L913) | require\_once plugin\_dir\_path(\_\_FILE\_\_) . 'js\_composer.php'; |
| [914](#L914) | } |
| [915](#L915) |  |
| [916](#L916) | static function shortcode($args) { |
| [917](#L917) | if (!empty($args['video'])) { |
| [918](#L918) | return YouTubeResponsive::makeEmbedUrl($args); |
| [919](#L919) | } |
| [920](#L920) | } |
| [921](#L921) |  |
| [922](#L922) | } |
| [923](#L923) |  |
| [924](#L924) | function register\_youtuberesponsive\_widgets() { |
| [925](#L925) | register\_widget('YouTubeResponsive'); |
| [926](#L926) | } |
| [927](#L927) |  |
| [928](#L928) | add\_action('widgets\_init', 'register\_youtuberesponsive\_widgets'); |
| [929](#L929) | add\_action('wp\_footer', array('YouTubeResponsive', 'wp\_footer'), 9999); |
| [930](#L930) | add\_action('wp\_head', array('YouTubeResponsive', 'wp\_head'), 99); |
| [931](#L931) | add\_action('plugins\_loaded', 'youtube\_widget\_responsive\_load\_textdomain'); |
| [932](#L932) |  |
| [933](#L933) | function youtube\_widget\_responsive\_load\_textdomain() { |
| [934](#L934) | load\_plugin\_textdomain('youtube-widget-responsive', FALSE, plugin\_dir\_path('/youtube-widget-responsive/youtube-widget-responsive.php') . 'lang/'); |
| [935](#L935) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2905626&format=txt)
* [Original Format](/export/2905626/youtube-widget-responsive/trunk/youtube-widget-responsive.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_7326e80c_20250114_221422.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Widget Responsive for Youtube <= 1.6.1 - Authenticated (Contributor+) Stored Cross-Site Scripting via Shortcode

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Widget Responsive for Youtube <= 1.6.1 - Authenticated (Contributor+) Stored Cross-Site Scripting via Shortcode

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2023-5063](https://www.cve.org/CVERecord?id=CVE-2023-5063) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | September 19, 2023 |
| Last Updated | September 20, 2023 |
| Researcher | [István Márton - Wordfence](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/lana-codes) |

### Description

The Widget Responsive for Youtube plugin for WordPress is vulnerable to Stored Cross-Site Scripting via 'youtube' shortcode in versions up to, and including, 1.6.1 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers with contributor-level and above permissions to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2905626#L246)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/2968766/youtube-widget-responsive#file1)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fyoutube-widget-responsive%2Fwidget-responsive-for-youtube-161-authenticated-contributor-stored-cross-site-scripting-via-shortcode&t=Widget%20Responsive%20for%20Youtube%20%3C%3D%201.6.1%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20Shortcode "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fyoutube-widget-responsive%2Fwidget-responsive-for-youtube-161-authenticated-contributor-stored-cross-site-scripting-via-shortcode&text=Widget%20Responsive%20for%20Youtube%20%3C%3D%201.6.1%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20Shortcode "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fyoutube-widget-responsive%2Fwidget-responsive-for-youtube-161-authenticated-contributor-stored-cross-site-scripting-via-shortcode "LinkedIn")
Email

## Vulnerability Details for Widget Responsive for Youtube

#### [Widget Responsive for Youtube](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/youtube-widget-responsive)

| Software Type | Plugin |
| --- | --- |
| Software Slug | youtube-widget-responsive [(view on wordpress.org)](https://wordpress.org/plugins/youtube-widget-responsive) |
| Patched? | Yes |
| Remediation | Update to version 1.6.2, or a newer patched version |
| Affected Version | * <= 1.6.1 |
| Patched Version | * 1.6.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_c8249270_20250114_221421.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F2968766%2Fyoutube-widget-responsive)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/2905626/youtube-widget-responsive "Changeset 2905626 for youtube-widget-responsive")
* [Next Change](/changeset/3111371/youtube-widget-responsive "Changeset 3111371 for youtube-widget-responsive") →

---

# Changeset [2968766](/changeset/2968766 "Show full changeset") for [youtube-widget-responsive](/browser/youtube-widget-responsive?rev=2968766 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/19/2023 01:35:48 PM
([16 months](/timeline?from=2023-09-19T13%3A35%3A48Z&precision=second "See timeline at 09/19/2023 01:35:48 PM") ago)

Author:
stefanoai
Message:
# 1.6.2

* fixed vulnerability
* Vulnerability Title: Widget Responsive for Youtube <= 1.6.1 - Authenticated (Contributor+) Stored Cross-Site Scripting via Shortcodeâ€‹
* CVSS Severity Score: 6.4 (Medium)
* CVSS Vector: CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N
* Organization: Wordfence
* Vulnerability Researcher: Lana Codes

Location:
[youtube-widget-responsive/trunk](/browser/youtube-widget-responsive/trunk?rev=2968766)
Files:

2 edited

* [readme.txt](/browser/youtube-widget-responsive/trunk/readme.txt?rev=2968766 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [youtube-widget-responsive.php](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766 "Show entry in browser")
  (modified)
  ([8 diffs](#file1 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [youtube-widget-responsive/trunk/readme.txt](/changeset/2968766/youtube-widget-responsive/trunk/readme.txt "Show the changeset 2968766 restricted to youtube-widget-responsive/trunk/readme.txt")

  | [r2905626](/browser/youtube-widget-responsive/trunk/readme.txt?rev=2905626#L4 "Show revision 2905626 of this file in browser") | [r2968766](/browser/youtube-widget-responsive/trunk/readme.txt?rev=2968766#L4 "Show revision 2968766 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: youtube, responsive, widget, autoplay, youtube embed, youtube plugin, embed youtube, embedding youtube, seo youtube, no-cookie, youtube plugin, youtube WPBakery Page Builder, sidebar, simple youtube, annotations, wordpress youtube widget, wordpress youtube embed, video plugin, video widget, shortcode youtube, shortcode, youtube schema.org, youtube schemaorg, youtube schema.org/VideoObject, youtube schema.org VideoObject |
  | 5 | 5 | Requires at least: 3.0.1 |
  | 6 |  | Tested up to: 6.~~2~~ |
  | 7 |  | Stable tag: 1.6.~~1~~ |
  |  | 6 | Tested up to: 6.3.1 |
  |  | 7 | Stable tag: 1.6.2 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 |  |
  | […](/browser/youtube-widget-responsive/trunk/readme.txt?rev=2905626#L95) | […](/browser/youtube-widget-responsive/trunk/readme.txt?rev=2968766#L95) |  |
  | 95 | 95 | == Changelog == |
  | 96 | 96 |  |
  |  | 97 | = 1.6.2 = |
  |  | 98 | \* fixed vulnerability |
  |  | 99 | \* Vulnerability Title: Widget Responsive for Youtube <= 1.6.1 - Authenticated (Contributor+) Stored Cross-Site Scripting via Shortcode​ |
  |  | 100 | \* CVSS Severity Score: 6.4 (Medium) |
  |  | 101 | \* CVSS Vector: CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N |
  |  | 102 | \* Organization: Wordfence |
  |  | 103 | \* Vulnerability Researcher: Lana Codes |
  |  | 104 |  |
  | 97 | 105 | = 1.4.5 = |
  | 98 | 106 | \* Change display name for trademark |
* ## [youtube-widget-responsive/trunk/youtube-widget-responsive.php](/changeset/2968766/youtube-widget-responsive/trunk/youtube-widget-responsive.php "Show the changeset 2968766 restricted to youtube-widget-responsive/trunk/youtube-widget-responsive.php")

  | [r2453896](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453896#L4 "Show revision 2453896 of this file in browser") | [r2968766](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766#L4 "Show revision 2968766 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Description: Widgets responsive and shorcode to embed youtube in your sidebar or in your content, with all available options. |
  | 5 | 5 | Author: StefanoAI |
  | 6 |  | Version: 1.6.~~1~~ |
  |  | 6 | Version: 1.6.2 |
  | 7 | 7 | Author URI: https://www.stefanoai.com |
  | 8 | 8 | Text Domain: youtube-widget-responsive |
  | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453896#L130) | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766#L130) |  |
  | 130 | 130 | } |
  | 131 | 131 | global $youtube\_id; |
  |  | 132 | if (empty($youtube\_id)) { |
  |  | 133 | $youtube\_id = 0; |
  |  | 134 | } |
  | 132 | 135 | //https://www.youtu.be/\_9tBFVKhn5o |
  | 133 | 136 | //https://www.youtube.com/watch?v=\_9tBFVKhn5o |
  | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453896#L168) | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766#L171) |  |
  | 168 | 171 |  |
  | 169 | 172 | if (!empty($idvideo) || !empty($idlist)) { |
  | 170 |  | //$w3c = !empty($params['w3c']) ? 1 : 0; |
  |  | 173 | if (!empty($idvideo)) { |
  |  | 174 | $idvideo = esc\_attr($idvideo); |
  |  | 175 | } |
  | 171 | 176 | $w3c = 1; |
  | 172 | 177 | $and = $w3c ? '&amp;' : '&'; |
  | 173 |  | $idlist = ~~!empty($idlist) ? $and . "list=$idlist" : ''~~; |
  | 174 |  | $listType = ~~!empty($listType) ? $and . "listType=$listType" : ''~~; |
  | 175 |  | $autohide = ~~isset($params['autohide']) ? $and . "autohide=" . $params['autohide'] : ''~~; |
  | 176 |  | $autoplay = ~~!empty($params['autoplay']) ? $and . 'autoplay=1' : ''~~; |
  | 177 |  | $cc\_load = ~~!empty($params['cc\_load']) ? $and . 'cc\_load\_policy=1' : ''~~; |
  | 178 |  | $cc\_lang = ~~!empty($params['cc\_lang']) ? $and . 'hl=' . $params['cc\_lang'] : ''~~; |
  | 179 |  | $color = ~~isset($params['color']) ? $and . 'color=' . $params['color'] : ''~~; |
  | 180 |  | $controls = ~~isset($params['controls']) ? $and . 'controls=' . $params['controls'] : ''~~; |
  | 181 |  | $disablekb = ~~isset($params['disablekb']) ? $and . 'disablekb=' . $params['disablekb'] : ''~~; |
  |  | 178 | $idlist = esc\_attr(!empty($idlist) ? $and . "list=$idlist" : ''); |
  |  | 179 | $listType = esc\_attr(!empty($listType) ? $and . "listType=$listType" : ''); |
  |  | 180 | $autohide = esc\_attr(isset($params['autohide']) ? $and . "autohide=" . $params['autohide'] : ''); |
  |  | 181 | $autoplay = esc\_attr(!empty($params['autoplay']) ? $and . 'autoplay=1' : ''); |
  |  | 182 | $cc\_load = esc\_attr(!empty($params['cc\_load']) ? $and . 'cc\_load\_policy=1' : ''); |
  |  | 183 | $cc\_lang = esc\_attr(!empty($params['cc\_lang']) ? $and . 'hl=' . $params['cc\_lang'] : ''); |
  |  | 184 | $color = esc\_attr(isset($params['color']) ? $and . 'color=' . $params['color'] : ''); |
  |  | 185 | $controls = esc\_attr(isset($params['controls']) ? $and . 'controls=' . $params['controls'] : ''); |
  |  | 186 | $disablekb = esc\_attr(isset($params['disablekb']) ? $and . 'disablekb=' . $params['disablekb'] : ''); |
  | 182 | 187 | $endtime = (!empty($params['end\_m']) ? intval($params['end\_m']) \* 60 : 0) + (!empty($params['end\_s']) ? intval($params['end\_s']) : 0); |
  | 183 | 188 | $end = !empty($endtime) ? $and . "end=$endtime" : ''; |
  | 184 | 189 | $allowfullscreen = !empty($params['allowfullscreen']) ? 'allowfullscreen' : ''; |
  | 185 | 190 | $fs = !empty($params['allowfullscreen']) ? $and . 'fs=1' : $and . 'fs=0'; |
  | 186 |  | $iv\_load\_policy = ~~isset($params['iv\_load\_policy']) ? $and . 'iv\_load\_policy=' . $params['iv\_load\_policy'] : ''~~; |
  | 187 |  | $loop = ~~!empty($params['loop']) ? $and . 'loop=' . $params['loop'] : ''~~; |
  |  | 191 | $iv\_load\_policy = esc\_attr(isset($params['iv\_load\_policy']) ? $and . 'iv\_load\_policy=' . $params['iv\_load\_policy'] : ''); |
  |  | 192 | $loop = esc\_attr(!empty($params['loop']) ? $and . 'loop=' . $params['loop'] : ''); |
  | 188 | 193 | if (!empty($loop) && empty($idlist) && !empty($idvideo)) { |
  | 189 |  | $idlist = ~~$and . "playlist=$idvideo"~~; |
  | 190 |  | } |
  | 191 |  | $modestbranding = ~~isset($params['modestbranding']) ? $and . 'modestbranding=' . $params['modestbranding'] : ''~~; |
  |  | 194 | $idlist = esc\_attr($and . "playlist=" . $idvideo); |
  |  | 195 | } |
  |  | 196 | $modestbranding = esc\_attr(isset($params['modestbranding']) ? $and . 'modestbranding=' . $params['modestbranding'] : ''); |
  | 192 | 197 | $rel = !empty($params['suggested']) && $params['suggested'] == '1' ? '' : $and . 'rel=0'; |
  | 193 | 198 | $showinfo = !empty($params['showinfo']) && $params['showinfo'] == '1' ? '' : $and . 'showinfo=0'; |
  | 194 | 199 | $starttime = (!empty($params['start\_m']) ? intval($params['start\_m']) \* 60 : 0) + (!empty($params['start\_s']) ? intval($params['start\_s']) : 0); |
  | 195 | 200 | $start = (!empty($starttime)) ? $and . "start=$starttime" : ""; |
  | 196 |  | $theme = ~~isset($params['theme']) ? $and . 'theme=' . $params['theme'] : ''~~; |
  | 197 |  | $quality = ~~isset($params['quality']) ? $and . 'vq=' . $params['quality'] : ''~~; |
  |  | 201 | $theme = esc\_attr(isset($params['theme']) ? $and . 'theme=' . $params['theme'] : ''); |
  |  | 202 | $quality = esc\_attr(isset($params['quality']) ? $and . 'vq=' . $params['quality'] : ''); |
  | 198 | 203 | if (isset($params['ratio'])) { |
  | 199 | 204 | switch ($params['ratio']) { |
  | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453896#L227) | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766#L232) |  |
  | 227 | 232 | $style = isset($params['style']) ? esc\_attr($params['style']) : ''; |
  | 228 | 233 | $maxw = !empty($params['maxw']) ? 'max-width:' . intval($params['maxw']) . 'px;' : ''; |
  | 229 |  | ~~@~~$id = ++$youtube\_id; |
  |  | 234 | $id = ++$youtube\_id; |
  | 230 | 235 |  |
  | 231 | 236 | $jsapi = !empty($params['track']) || !empty($params['mute']) || !empty($params['image\_preview']) ? $and . "enablejsapi=1" : ""; |
  | 232 | 237 |  |
  | 233 |  | $image\_preview = !empty($params['image\_preview']) ? ~~$params['image\_preview']~~ : NULL; |
  |  | 238 | $image\_preview = !empty($params['image\_preview']) ? esc\_attr($params['image\_preview']) : NULL; |
  | 234 | 239 |  |
  | 235 | 240 | $schemaorg\_name = !empty($params['schemaorg\_name']) ? $params['schemaorg\_name'] : NULL; |
  | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453896#L241) | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766#L246) |  |
  | 241 | 246 | $schemaorg\_durations = !empty($params['schemaorg\_durations']) ? $params['schemaorg\_durations'] : 0; |
  | 242 | 247 |  |
  | 243 |  |  |
  | 244 | 248 | $schema = !empty($schemaorg\_name) && !empty($schemaorg\_uploaddate) && !empty($schemaorg\_description) && !empty($schemaorg\_thumbnail) ? ' itemscope itemtype="http://schema.org/VideoObject"' : ''; |
  | 245 |  | ~~@~~$urlembed = "<object $schema class='StefanoAI-youtube-responsive fitvidsignore $class' width='160' height='90' style='$maxw$style' $ratio type='application/video'>"; |
  | 246 |  | ~~@~~$urlembed .= "<div data-iframe='StefanoAI-youtube-widget-responsive' data-id='StefanoAI-youtube-$id' data-class='StefanoAI-youtube-responsive $class' data-width='160' data-height='90' data-src='$url$idvideo?$idlist$listType$autohide$autoplay$cc\_load$cc\_lang$color$controls$disablekb$end$fs$iv\_load\_policy$loop$modestbranding$rel$showinfo$start$theme$quality$wmode$jsapi' data-$allowfullscreen data-style='border:none;AISTYLENONE$maxw$style'></div>"; |
  |  | 249 | $urlembed = "<object $schema class='StefanoAI-youtube-responsive fitvidsignore $class' width='160' height='90' style='$maxw$style' $ratio type='application/video'>"; |
  |  | 250 | $urlembed .= "<div data-iframe='StefanoAI-youtube-widget-responsive' data-id='StefanoAI-youtube-$id' data-class='StefanoAI-youtube-responsive $class' data-width='160' data-height='90' data-src='$url$idvideo?$idlist$listType$autohide$autoplay$cc\_load$cc\_lang$color$controls$disablekb$end$fs$iv\_load\_policy$loop$modestbranding$rel$showinfo$start$theme$quality$wmode$jsapi' data-$allowfullscreen data-style='border:none;AISTYLENONE$maxw$style'></div>"; |
  | 247 | 251 |  |
  | 248 | 252 | if (!empty($params['track']) || !empty($params['mute']) || !empty($image\_preview)) { |
  | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453896#L335) | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766#L339) |  |
  | 335 | 339 | @$urlembed .= "<meta itemprop='uploadDate' content=\"" . esc\_attr($schemaorg\_uploaddate) . "\" />"; |
  | 336 | 340 | @$urlembed .= "<meta itemprop='thumbnailUrl' content=\"" . esc\_attr($src1) . "\" />"; |
  | 337 |  | @$urlembed .= "<meta itemprop='embedUrl' content=\"http://youtube.be/" . ~~esc\_attr($idvideo)~~ . "\" />"; |
  |  | 341 | @$urlembed .= "<meta itemprop='embedUrl' content=\"http://youtube.be/" . $idvideo . "\" />"; |
  | 338 | 342 | if (!empty($schemaorg\_durationm) || !empty($schemaorg\_durations)) { |
  | 339 | 343 | @$urlembed .= "<meta itemprop='duration' content='PT" . intval($schemaorg\_durationm) . "M" . intval($schemaorg\_durations) . "S' />"; |
  | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453896#L461) | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766#L465) |  |
  | 461 | 465 | $button\_subscriber\_count = (isset($instance['button\_subscriber\_count'])) ? $instance['button\_subscriber\_count'] : ''; |
  | 462 | 466 |  |
  | 463 |  |  |
  | 464 | 467 | $schemaorg\_name = !empty($instance['schemaorg\_name']) ? $instance['schemaorg\_name'] : ''; |
  | 465 | 468 | $schemaorg\_description = !empty($instance['schemaorg\_description']) ? $instance['schemaorg\_description'] : ''; |
  | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2453896#L566) | […](/browser/youtube-widget-responsive/trunk/youtube-widget-responsive.php?rev=2968766#L569) |  |
  | 566 | 569 | <img src="<?php echo esc\_attr($src); ?>" alt="" style="width:90%;background-color: #eee;<?php echo empty($src) ? 'display:none' : ''; ?>"/> |
  | 567 | 570 | </span> |
  | 568 |  | <input type="hidden" class="image\_preview" name="<?php echo $this->get\_field\_name('image\_preview'); ?>" value="<?php echo ~~$image\_preview~~; ?>" /> |
  |  | 571 | <input type="hidden" class="image\_preview" name="<?php echo $this->get\_field\_name('image\_preview'); ?>" value="<?php echo esc\_attr($image\_preview); ?>" /> |
  | 569 | 572 | </p> |
  | 570 | 573 | <div style="text-align: center;display: block;width: 100%;"> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2968766)
* [Zip Archive](?format=zip&new=2968766)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


