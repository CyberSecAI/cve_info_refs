=== Content from plugins.trac.wordpress.org_c185c04f_20250115_101228.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3000176%2540backwpup%252Ftrunk%26old%3D2980789%2540backwpup%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/2980789/backwpup/trunk?old=3000176&old_path=%2Fbackwpup%2Ftrunk)

---

# Changes in [backwpup/trunk](/browser/backwpup/trunk?rev=3000176 "Show entry in browser") [[2980789:3000176]](/log/backwpup/trunk?rev=3000176&stop_rev=2980789 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[backwpup/trunk](/browser/backwpup/trunk?rev=3000176)
Files:

3 deleted
10 edited

* [backwpup.php](/browser/backwpup/trunk/backwpup.php?rev=3000176 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [changelog.txt](/browser/backwpup/trunk/changelog.txt?rev=3000176 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [inc/class-destination-folder.php](/browser/backwpup/trunk/inc/class-destination-folder.php?rev=3000176 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [inc/class-file.php](/browser/backwpup/trunk/inc/class-file.php?rev=3000176 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [inc/class-page-settings.php](/browser/backwpup/trunk/inc/class-page-settings.php?rev=3000176 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [readme.txt](/browser/backwpup/trunk/readme.txt?rev=3000176 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [vendor/autoload.php](/browser/backwpup/trunk/vendor/autoload.php?rev=3000176 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [vendor/composer/autoload\_real.php](/browser/backwpup/trunk/vendor/composer/autoload_real.php?rev=3000176 "Show entry in browser")
  (modified)
  ([3 diffs](#file7 "Show differences"))
* [vendor/composer/autoload\_static.php](/browser/backwpup/trunk/vendor/composer/autoload_static.php?rev=3000176 "Show entry in browser")
  (modified)
  ([2 diffs](#file8 "Show differences"))
* [vendor/composer/installed.php](/browser/backwpup/trunk/vendor/composer/installed.php?rev=3000176 "Show entry in browser")
  (modified)
  ([2 diffs](#file9 "Show differences"))
* [vendor/inpsyde/backwpup-shared/.git](/browser/backwpup/trunk/vendor/inpsyde/backwpup-shared/.git?rev=2980679 "Show what was removed (content at revision 2980789)")
  (deleted)
* [vendor/inpsyde/backwpup-shared/.github](/browser/backwpup/trunk/vendor/inpsyde/backwpup-shared/.github?rev=2818974 "Show what was removed (content at revision 2980789)")
  (deleted)
* [vendor/inpsyde/plugin-environment-checker/.git](/browser/backwpup/trunk/vendor/inpsyde/plugin-environment-checker/.git?rev=2980679 "Show what was removed (content at revision 2980789)")
  (deleted)

### Legend:

Unmodified
Added
Removed

* ## [backwpup/trunk/backwpup.php](/changeset/3000176/backwpup/trunk/backwpup.php?old=2980679&old_path=backwpup%2Ftrunk%2Fbackwpup.php "Show the [2980789:3000176] differences restricted to backwpup/trunk/backwpup.php")

  | [r2980789](/browser/backwpup/trunk/backwpup.php?rev=2980679#L6 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/backwpup.php?rev=3000176#L6 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \* Author: WP MEDIA SAS |
  | 7 | 7 | \* Author URI: https://wp-media.me/ |
  | 8 |  | \* Version: 4.0.~~1~~ |
  |  | 8 | \* Version: 4.0.2 |
  | 9 | 9 | \* Requires at least: 3.9 |
  | 10 | 10 | \* Requires PHP: 7.2 |
* ## [backwpup/trunk/changelog.txt](/changeset/3000176/backwpup/trunk/changelog.txt?old=2980789&old_path=backwpup%2Ftrunk%2Fchangelog.txt "Show the [2980789:3000176] differences restricted to backwpup/trunk/changelog.txt")

  | [r2980789](/browser/backwpup/trunk/changelog.txt?rev=2980789#L1 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/changelog.txt?rev=3000176#L1 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | == Changelog == |
  |  | 2 | = 4.0.2 = |
  |  | 3 | Release date: November 22, 2023 |
  |  | 4 |  |
  |  | 5 | \* Fixed: Disallow backups or logs directories from being outside of wp-content directory for security purposes |
  |  | 6 |  |
  | 2 | 7 | = 4.0.1 = |
  | 3 | 8 | Release date: October 18, 2023 |
* ## [backwpup/trunk/inc/class-destination-folder.php](/changeset/3000176/backwpup/trunk/inc/class-destination-folder.php?old=2980679&old_path=backwpup%2Ftrunk%2Finc%2Fclass-destination-folder.php "Show the [2980789:3000176] differences restricted to backwpup/trunk/inc/class-destination-folder.php")

  | [r2980789](/browser/backwpup/trunk/inc/class-destination-folder.php?rev=2980679#L92 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/inc/class-destination-folder.php?rev=3000176#L92 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 92 | 92 |  |
  | 93 | 93 | try { |
  | 94 |  | $backup\_dir = trailingslashit(self::normalizePath(BackWPup\_Path\_Fixer::slashify($backup\_dir))); |
  |  | 94 | $backup\_dir = trailingslashit( |
  |  | 95 | BackWPup\_File::normalize\_path(BackWPup\_Path\_Fixer::slashify($backup\_dir)) |
  |  | 96 | ); |
  | 95 | 97 | } catch (\InvalidArgumentException $e) { |
  | 96 | 98 | $backup\_dir = self::getDefaultBackupsDirectory(); |
  | […](/browser/backwpup/trunk/inc/class-destination-folder.php?rev=2980679#L302) | […](/browser/backwpup/trunk/inc/class-destination-folder.php?rev=3000176#L304) |  |
  | 302 | 304 | return str\_replace($content\_path, '', $backups\_dir); |
  | 303 | 305 | } |
  | 304 |  |  |
  | 305 |  | ~~private static function normalizePath($path)~~ |
  | 306 |  | ~~{~~ |
  | 307 |  | ~~$parts = explode('/', $path);~~ |
  | 308 |  | ~~$normalized = [];~~ |
  | 309 |  |  |
  | 310 |  | ~~foreach ($parts as $part) {~~ |
  | 311 |  | ~~if ($part === '..') {~~ |
  | 312 |  | ~~if (empty($normalized)) {~~ |
  | 313 |  | ~~throw new InvalidArgumentException('Invalid path: Attempting to navigate above the root directory.');~~ |
  | 314 |  | ~~}~~ |
  | 315 |  | ~~array\_pop($normalized);~~ |
  | 316 |  | ~~} elseif ($part !== '.' && $part !== '') {~~ |
  | 317 |  | ~~$normalized[] = $part;~~ |
  | 318 |  | ~~}~~ |
  | 319 |  | ~~}~~ |
  | 320 |  |  |
  | 321 |  | ~~if (empty($normalized)) {~~ |
  | 322 |  | ~~throw new \InvalidArgumentException('The path resolves to an empty path.');~~ |
  | 323 |  | ~~}~~ |
  | 324 |  |  |
  | 325 |  | ~~return implode('/', $normalized);~~ |
  | 326 |  | ~~}~~ |
  | 327 | 306 | } |
* ## [backwpup/trunk/inc/class-file.php](/changeset/3000176/backwpup/trunk/inc/class-file.php?old=2980679&old_path=backwpup%2Ftrunk%2Finc%2Fclass-file.php "Show the [2980789:3000176] differences restricted to backwpup/trunk/inc/class-file.php")

  | [r2980789](/browser/backwpup/trunk/inc/class-file.php?rev=2980679#L202 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/inc/class-file.php?rev=3000176#L202 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 202 | 202 |  |
  | 203 | 203 | /\*\* |
  |  | 204 | \* @throws InvalidArgumentException If path is absolute or attempts to navigate above root |
  |  | 205 | \* |
  |  | 206 | \* @return string[] |
  |  | 207 | \*/ |
  |  | 208 | public static function normalize\_path(string $path): string |
  |  | 209 | { |
  |  | 210 | if (strpos($path, '/') === 0) { |
  |  | 211 | throw new InvalidArgumentException('Absolute paths are not allowed.'); |
  |  | 212 | } |
  |  | 213 |  |
  |  | 214 | $parts = explode('/', $path); |
  |  | 215 | $normalized = []; |
  |  | 216 |  |
  |  | 217 | foreach ($parts as $part) { |
  |  | 218 | if ($part === '..') { |
  |  | 219 | if (empty($normalized)) { |
  |  | 220 | throw new InvalidArgumentException( |
  |  | 221 | 'Invalid path: Attempting to navigate above the root directory.' |
  |  | 222 | ); |
  |  | 223 | } |
  |  | 224 | array\_pop($normalized); |
  |  | 225 | } elseif ($part !== '.' && $part !== '') { |
  |  | 226 | $normalized[] = $part; |
  |  | 227 | } |
  |  | 228 | } |
  |  | 229 |  |
  |  | 230 | if (empty($normalized)) { |
  |  | 231 | throw new InvalidArgumentException('The path resolves to an empty path.'); |
  |  | 232 | } |
  |  | 233 |  |
  |  | 234 | return implode('/', $normalized); |
  |  | 235 | } |
  |  | 236 |  |
  |  | 237 | /\*\* |
  | 204 | 238 | \* Resolve internal .. within a path. |
  | 205 | 239 | \* |
* ## [backwpup/trunk/inc/class-page-settings.php](/changeset/3000176/backwpup/trunk/inc/class-page-settings.php?old=2980679&old_path=backwpup%2Ftrunk%2Finc%2Fclass-page-settings.php "Show the [2980789:3000176] differences restricted to backwpup/trunk/inc/class-page-settings.php")

  | [r2980789](/browser/backwpup/trunk/inc/class-page-settings.php?rev=2980679#L446 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/inc/class-page-settings.php?rev=3000176#L446 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 446 | 446 | update\_site\_option('backwpup\_cfg\_jobrunauthkey', $\_POST['jobrunauthkey']); |
  | 447 | 447 |  |
  | 448 |  | $\_POST['logfolder'] = trailingslashit( |
  | 449 |  | str\_replace('\\', '/', trim(stripslashes(sanitize\_text\_field($\_POST['logfolder'])))) |
  | 450 |  | ); |
  | 451 |  |  |
  | 452 |  | //set def. folders |
  | 453 |  | if (empty($\_POST['logfolder']) || $\_POST['logfolder'] === '/') { |
  |  | 448 | try { |
  |  | 449 | $\_POST['logfolder'] = trailingslashit( |
  |  | 450 | BackWPup\_File::normalize\_path(BackWPup\_Path\_Fixer::slashify(sanitize\_text\_field($\_POST['logfolder']))) |
  |  | 451 | ); |
  |  | 452 |  |
  |  | 453 | update\_site\_option('backwpup\_cfg\_logfolder', $\_POST['logfolder']); |
  |  | 454 | } catch (InvalidArgumentException $e) { |
  | 454 | 455 | delete\_site\_option('backwpup\_cfg\_logfolder'); |
  | 455 | 456 | BackWPup\_Option::default\_site\_options(); |
  | 456 |  | ~~} else {~~ |
  | 457 |  | ~~update\_site\_option('backwpup\_cfg\_logfolder', $\_POST['logfolder']);~~ |
  | 458 | 457 | } |
  | 459 | 458 |  |
* ## [backwpup/trunk/readme.txt](/changeset/3000176/backwpup/trunk/readme.txt?old=2980789&old_path=backwpup%2Ftrunk%2Freadme.txt "Show the [2980789:3000176] differences restricted to backwpup/trunk/readme.txt")

  | [r2980789](/browser/backwpup/trunk/readme.txt?rev=2980789#L5 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/readme.txt?rev=3000176#L5 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Tested up to: 6.3 |
  | 6 | 6 | Requires PHP: 7.2 |
  | 7 |  | Stable tag: 4.0.~~1~~ |
  |  | 7 | Stable tag: 4.0.2 |
  | 8 | 8 | License: GPLv2+ |
  | 9 | 9 |  |
  | […](/browser/backwpup/trunk/readme.txt?rev=2980789#L165) | […](/browser/backwpup/trunk/readme.txt?rev=3000176#L165) |  |
  | 165 | 165 |  |
  | 166 | 166 | == Changelog == |
  |  | 167 |  |
  |  | 168 | = 4.0.2 = |
  |  | 169 | Release date: November 22, 2023 |
  |  | 170 |  |
  |  | 171 | \* Fixed: Disallow backups or logs directories from being outside of wp-content directory for security purposes |
  | 167 | 172 |  |
  | 168 | 173 | = 4.0.1 = |
* ## [backwpup/trunk/vendor/autoload.php](/changeset/3000176/backwpup/trunk/vendor/autoload.php?old=2980679&old_path=backwpup%2Ftrunk%2Fvendor%2Fautoload.php "Show the [2980789:3000176] differences restricted to backwpup/trunk/vendor/autoload.php")

  | [r2980789](/browser/backwpup/trunk/vendor/autoload.php?rev=2980679#L23 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/vendor/autoload.php?rev=3000176#L23 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 24 | 24 |  |
  | 25 |  | return ComposerAutoloaderInit~~b41b69934afb0924a29b3c92307fcdd6~~::getLoader(); |
  |  | 25 | return ComposerAutoloaderInitec91d0ba38498dab90586007a460390e::getLoader(); |
* ## [backwpup/trunk/vendor/composer/autoload\_real.php](/changeset/3000176/backwpup/trunk/vendor/composer/autoload_real.php?old=2980679&old_path=backwpup%2Ftrunk%2Fvendor%2Fcomposer%2Fautoload_real.php "Show the [2980789:3000176] differences restricted to backwpup/trunk/vendor/composer/autoload_real.php")

  | [r2980789](/browser/backwpup/trunk/vendor/composer/autoload_real.php?rev=2980679#L3 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/vendor/composer/autoload_real.php?rev=3000176#L3 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_real.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | class ComposerAutoloaderInit~~b41b69934afb0924a29b3c92307fcdd6~~ |
  |  | 5 | class ComposerAutoloaderInitec91d0ba38498dab90586007a460390e |
  | 6 | 6 | { |
  | 7 | 7 | private static $loader; |
  | […](/browser/backwpup/trunk/vendor/composer/autoload_real.php?rev=2980679#L25) | […](/browser/backwpup/trunk/vendor/composer/autoload_real.php?rev=3000176#L25) |  |
  | 25 | 25 | require \_\_DIR\_\_ . '/platform\_check.php'; |
  | 26 | 26 |  |
  | 27 |  | spl\_autoload\_register(array('ComposerAutoloaderInit~~b41b69934afb0924a29b3c92307fcdd6~~', 'loadClassLoader'), true, true); |
  |  | 27 | spl\_autoload\_register(array('ComposerAutoloaderInitec91d0ba38498dab90586007a460390e', 'loadClassLoader'), true, true); |
  | 28 | 28 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\_\_DIR\_\_)); |
  | 29 |  | spl\_autoload\_unregister(array('ComposerAutoloaderInit~~b41b69934afb0924a29b3c92307fcdd6~~', 'loadClassLoader')); |
  |  | 29 | spl\_autoload\_unregister(array('ComposerAutoloaderInitec91d0ba38498dab90586007a460390e', 'loadClassLoader')); |
  | 30 | 30 |  |
  | 31 | 31 | $includePaths = require \_\_DIR\_\_ . '/include\_paths.php'; |
  | […](/browser/backwpup/trunk/vendor/composer/autoload_real.php?rev=2980679#L34) | […](/browser/backwpup/trunk/vendor/composer/autoload_real.php?rev=3000176#L34) |  |
  | 34 | 34 |  |
  | 35 | 35 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 36 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInit~~b41b69934afb0924a29b3c92307fcdd6~~::getInitializer($loader)); |
  |  | 36 | call\_user\_func(\Composer\Autoload\ComposerStaticInitec91d0ba38498dab90586007a460390e::getInitializer($loader)); |
  | 37 | 37 |  |
  | 38 | 38 | $loader->register(true); |
  | 39 | 39 |  |
  | 40 |  | $filesToLoad = \Composer\Autoload\ComposerStaticInit~~b41b69934afb0924a29b3c92307fcdd6~~::$files; |
  |  | 40 | $filesToLoad = \Composer\Autoload\ComposerStaticInitec91d0ba38498dab90586007a460390e::$files; |
  | 41 | 41 | $requireFile = \Closure::bind(static function ($fileIdentifier, $file) { |
  | 42 | 42 | if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) { |
* ## [backwpup/trunk/vendor/composer/autoload\_static.php](/changeset/3000176/backwpup/trunk/vendor/composer/autoload_static.php?old=2980679&old_path=backwpup%2Ftrunk%2Fvendor%2Fcomposer%2Fautoload_static.php "Show the [2980789:3000176] differences restricted to backwpup/trunk/vendor/composer/autoload_static.php")

  | [r2980789](/browser/backwpup/trunk/vendor/composer/autoload_static.php?rev=2980679#L5 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/vendor/composer/autoload_static.php?rev=3000176#L5 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | namespace Composer\Autoload; |
  | 6 | 6 |  |
  | 7 |  | class ComposerStaticInit~~b41b69934afb0924a29b3c92307fcdd6~~ |
  |  | 7 | class ComposerStaticInitec91d0ba38498dab90586007a460390e |
  | 8 | 8 | { |
  | 9 | 9 | public static $files = array ( |
  | […](/browser/backwpup/trunk/vendor/composer/autoload_static.php?rev=2980679#L3218) | […](/browser/backwpup/trunk/vendor/composer/autoload_static.php?rev=3000176#L3218) |  |
  | 3218 | 3218 | { |
  | 3219 | 3219 | return \Closure::bind(function () use ($loader) { |
  | 3220 |  | $loader->prefixLengthsPsr4 = ComposerStaticInit~~b41b69934afb0924a29b3c92307fcdd6~~::$prefixLengthsPsr4; |
  | 3221 |  | $loader->prefixDirsPsr4 = ComposerStaticInit~~b41b69934afb0924a29b3c92307fcdd6~~::$prefixDirsPsr4; |
  | 3222 |  | $loader->prefixesPsr0 = ComposerStaticInit~~b41b69934afb0924a29b3c92307fcdd6~~::$prefixesPsr0; |
  | 3223 |  | $loader->fallbackDirsPsr0 = ComposerStaticInit~~b41b69934afb0924a29b3c92307fcdd6~~::$fallbackDirsPsr0; |
  | 3224 |  | $loader->classMap = ComposerStaticInit~~b41b69934afb0924a29b3c92307fcdd6~~::$classMap; |
  |  | 3220 | $loader->prefixLengthsPsr4 = ComposerStaticInitec91d0ba38498dab90586007a460390e::$prefixLengthsPsr4; |
  |  | 3221 | $loader->prefixDirsPsr4 = ComposerStaticInitec91d0ba38498dab90586007a460390e::$prefixDirsPsr4; |
  |  | 3222 | $loader->prefixesPsr0 = ComposerStaticInitec91d0ba38498dab90586007a460390e::$prefixesPsr0; |
  |  | 3223 | $loader->fallbackDirsPsr0 = ComposerStaticInitec91d0ba38498dab90586007a460390e::$fallbackDirsPsr0; |
  |  | 3224 | $loader->classMap = ComposerStaticInitec91d0ba38498dab90586007a460390e::$classMap; |
  | 3225 | 3225 |  |
  | 3226 | 3226 | }, null, ClassLoader::class); |
* ## [backwpup/trunk/vendor/composer/installed.php](/changeset/3000176/backwpup/trunk/vendor/composer/installed.php?old=2980679&old_path=backwpup%2Ftrunk%2Fvendor%2Fcomposer%2Finstalled.php "Show the [2980789:3000176] differences restricted to backwpup/trunk/vendor/composer/installed.php")

  | [r2980789](/browser/backwpup/trunk/vendor/composer/installed.php?rev=2980679#L2 "Show revision 2980789 of this file in browser") | [r3000176](/browser/backwpup/trunk/vendor/composer/installed.php?rev=3000176#L2 "Show revision 3000176 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | 'root' => array( |
  | 3 | 3 | 'name' => 'inpsyde/backwpup-pro', |
  | 4 |  | 'pretty\_version' => 'dev-~~master~~', |
  | 5 |  | 'version' => 'dev-~~master~~', |
  | 6 |  | 'reference' => '~~23014b10d803886f67d3c76531541856b5c88cfd~~', |
  |  | 4 | 'pretty\_version' => 'dev-develop', |
  |  | 5 | 'version' => 'dev-develop', |
  |  | 6 | 'reference' => '92ff155d9fb05891f07e7b1946a8b641b1abade0', |
  | 7 | 7 | 'type' => 'wordpress-plugin', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/backwpup/trunk/vendor/composer/installed.php?rev=2980679#L207) | […](/browser/backwpup/trunk/vendor/composer/installed.php?rev=3000176#L207) |  |
  | 207 | 207 | ), |
  | 208 | 208 | 'inpsyde/backwpup-pro' => array( |
  | 209 |  | 'pretty\_version' => 'dev-~~master~~', |
  | 210 |  | 'version' => 'dev-~~master~~', |
  | 211 |  | 'reference' => '~~23014b10d803886f67d3c76531541856b5c88cfd~~', |
  |  | 209 | 'pretty\_version' => 'dev-develop', |
  |  | 210 | 'version' => 'dev-develop', |
  |  | 211 | 'reference' => '92ff155d9fb05891f07e7b1946a8b641b1abade0', |
  | 212 | 212 | 'type' => 'wordpress-plugin', |
  | 213 | 213 | 'install\_path' => \_\_DIR\_\_ . '/../../', |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3000176&old=2980789&new_path=%2Fbackwpup%2Ftrunk&old_path=%2Fbackwpup%2Ftrunk)
* [Zip Archive](?format=zip&new=3000176&old=2980789&new_path=%2Fbackwpup%2Ftrunk&old_path=%2Fbackwpup%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_d1e3a052_20250115_101230.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# BackWPup <= 4.0.1 - Authenticated (Administrator+) Directory Traversal

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   BackWPup <= 4.0.1 - Authenticated (Administrator+) Directory Traversal

8.7

**Improper Limitation of a Pathname to a Restricted Directory ('Path Traversal')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:H/UI:N/S:C/C:N/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:H/UI:N/S:C/C:N/I:H/A:H)

| CVE | [CVE-2023-5504](https://www.cve.org/CVERecord?id=CVE-2023-5504) |
| --- | --- |
| CVSS | 8.7 (High) |
| Publicly Published | November 22, 2023 |
| Last Updated | January 22, 2024 |
| Researcher | [Marco Wotschka - Wordfence](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/marco-wotschka) |

### Description

The BackWPup plugin for WordPress is vulnerable to Directory Traversal in versions up to, and including, 4.0.1 via the Log File Folder. This allows authenticated attackers to store backups in arbitrary folders on the server provided they can be written to by the server. Additionally, default settings will place an index.php and a .htaccess file into the chosen directory (unless already present) when the first backup job is run that are intended to prevent directory listing and file access. This means that an attacker could set the backup directory to the root of another site in a shared environment and thus disable that site.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/backwpup/trunk/inc/class-page-settings.php?rev=2818974#L457)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&new=3000176%40backwpup%2Ftrunk&old=2980789%40backwpup%2Ftrunk&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbackwpup%2Fbackwpup-401-authenticated-administrator-directory-traversal&t=BackWPup%20%3C%3D%204.0.1%20-%20Authenticated%20%28Administrator%2B%29%20Directory%20Traversal "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbackwpup%2Fbackwpup-401-authenticated-administrator-directory-traversal&text=BackWPup%20%3C%3D%204.0.1%20-%20Authenticated%20%28Administrator%2B%29%20Directory%20Traversal "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbackwpup%2Fbackwpup-401-authenticated-administrator-directory-traversal "LinkedIn")
Email

## Vulnerability Details for BackWPup – WordPress Backup & Restore Plugin

#### [BackWPup – WordPress Backup & Restore Plugin](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/backwpup)

| Software Type | Plugin |
| --- | --- |
| Software Slug | backwpup [(view on wordpress.org)](https://wordpress.org/plugins/backwpup) |
| Patched? | Yes |
| Remediation | Update to version 4.0.2, or a newer patched version |
| Affected Version | * <= 4.0.1 |
| Patched Version | * 4.0.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_8fc9e8a8_20250115_101225.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fbackwpup%2Ftrunk%2Finc%2Fclass-page-settings.php%3Frev%3D2818974)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/backwpup/trunk/inc/class-page-settings.php?rev=2545690 "Revision 2545690")
* [Latest Revision](/browser/backwpup/trunk/inc/class-page-settings.php)
* [Next Revision](/browser/backwpup/trunk/inc/class-page-settings.php?rev=2980679 "Revision 2980679") →
* [Blame](/browser/backwpup/trunk/inc/class-page-settings.php?annotate=blame&rev=2818974 "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/backwpup/trunk/inc/class-page-settings.php?rev=2818974)

---

# [source:](/browser?rev=2818974&order=name "Go to repository root") [backwpup](/browser/backwpup?rev=2818974&order=name "View backwpup")/[trunk](/browser/backwpup/trunk?rev=2818974&order=name "View trunk")/[inc](/browser/backwpup/trunk/inc?rev=2818974&order=name "View inc")/[class-page-settings.php](/browser/backwpup/trunk/inc/class-page-settings.php?rev=2818974&order=name "View class-page-settings.php") @ [2818974](/changeset/2818974/ "View changeset 2818974")

View diff against:

View revision:

| [Last change](/changeset/2818974/backwpup/trunk/inc/class-page-settings.php "View differences") on this file since 2818974 was [2818974](/changeset/2818974/ "View changeset 2818974"), checked in by cocreation, [2 years ago](/timeline?from=2022-11-16T12%3A55%3A50Z&precision=second "See timeline at 11/16/2022 12:55:50 PM") |
| --- |
| Release 4.0.0 |
| **File size:** 47.3 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | use Inpsyde\BackWPup\Settings; |
| [4](#L4) | use Inpsyde\BackWPup\Settings\SettingUpdatable; |
| [5](#L5) |  |
| [6](#L6) | class BackWPup\_Page\_Settings |
| [7](#L7) | { |
| [8](#L8) | public const LICENSE\_INSTANCE\_KEY = 'license\_instance\_key'; |
| [9](#L9) | public const LICENSE\_API\_KEY = 'license\_api\_key'; |
| [10](#L10) | public const LICENSE\_PRODUCT\_ID = 'license\_product\_id'; |
| [11](#L11) | public const LICENSE\_STATUS = 'license\_status'; |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* @var Settings\SettingTab |
| [15](#L15) | \*/ |
| [16](#L16) | private $settings\_views; |
| [17](#L17) |  |
| [18](#L18) | /\*\* |
| [19](#L19) | \* @var SettingUpdatable[] |
| [20](#L20) | \*/ |
| [21](#L21) | private $settings\_updaters; |
| [22](#L22) |  |
| [23](#L23) | /\*\* |
| [24](#L24) | \* @param Settings\SettingTab[] $settings\_views |
| [25](#L25) | \* @param SettingUpdatable[]    $settings\_updaters |
| [26](#L26) | \*/ |
| [27](#L27) | public function \_\_construct( |
| [28](#L28) | array $settings\_views, |
| [29](#L29) | array $settings\_updaters |
| [30](#L30) | ) { |
| [31](#L31) | $this->settings\_views = array\_filter( |
| [32](#L32) | $settings\_views, |
| [33](#L33) | function ($setting) { |
| [34](#L34) | return $setting instanceof Settings\SettingTab; |
| [35](#L35) | } |
| [36](#L36) | ); |
| [37](#L37) | $this->settings\_updaters = array\_filter( |
| [38](#L38) | $settings\_updaters, |
| [39](#L39) | function ($setting) { |
| [40](#L40) | return $setting instanceof SettingUpdatable; |
| [41](#L41) | } |
| [42](#L42) | ); |
| [43](#L43) | } |
| [44](#L44) |  |
| [45](#L45) | /\*\* |
| [46](#L46) | \* @return array |
| [47](#L47) | \*/ |
| [48](#L48) | public static function get\_information() |
| [49](#L49) | { |
| [50](#L50) | global $wpdb; |
| [51](#L51) |  |
| [52](#L52) | $information = []; |
| [53](#L53) |  |
| [54](#L54) | // Wordpress version |
| [55](#L55) | $information['wpversion']['label'] = \_\_('WordPress version', 'backwpup'); |
| [56](#L56) | $information['wpversion']['value'] = BackWPup::get\_plugin\_data('wp\_version'); |
| [57](#L57) |  |
| [58](#L58) | // BackWPup version |
| [59](#L59) | if (!BackWPup::is\_pro()) { |
| [60](#L60) | $information['bwuversion']['label'] = esc\_html\_\_('BackWPup version', 'backwpup'); |
| [61](#L61) | $information['bwuversion']['value'] = BackWPup::get\_plugin\_data('Version'); |
| [62](#L62) | $information['bwuversion']['html'] = BackWPup::get\_plugin\_data('Version') . |
| [63](#L63) | ' <a href="' . \_\_('http://backwpup.com', 'backwpup') . '">' . |
| [64](#L64) | esc\_html\_\_('Get pro.', 'backwpup') . '</a>'; |
| [65](#L65) | } else { |
| [66](#L66) | $information['bwuversion']['label'] = \_\_('BackWPup Pro version', 'backwpup'); |
| [67](#L67) | $information['bwuversion']['value'] = BackWPup::get\_plugin\_data('Version'); |
| [68](#L68) | } |
| [69](#L69) |  |
| [70](#L70) | // PHP version |
| [71](#L71) | $information['phpversion']['label'] = esc\_html\_\_('PHP version', 'backwpup'); |
| [72](#L72) | $bit = ''; |
| [73](#L73) | if (PHP\_INT\_SIZE === 4) { |
| [74](#L74) | $bit = ' (32bit)'; |
| [75](#L75) | } elseif (PHP\_INT\_SIZE === 8) { |
| [76](#L76) | $bit = ' (64bit)'; |
| [77](#L77) | } |
| [78](#L78) | $information['phpversion']['value'] = PHP\_VERSION . ' ' . $bit; |
| [79](#L79) |  |
| [80](#L80) | // MySQL version |
| [81](#L81) | $information['mysqlversion']['label'] = esc\_html\_\_('MySQL version', 'backwpup'); |
| [82](#L82) | $information['mysqlversion']['value'] = $wpdb->get\_var('SELECT VERSION() AS version'); |
| [83](#L83) |  |
| [84](#L84) | // Curl version |
| [85](#L85) | $information['curlversion']['label'] = esc\_html\_\_('cURL version', 'backwpup'); |
| [86](#L86) | if (function\_exists('curl\_version')) { |
| [87](#L87) | $curl\_version = curl\_version(); |
| [88](#L88) | $information['curlversion']['value'] = $curl\_version['version']; |
| [89](#L89) | $information['curlsslversion']['label'] = \_\_('cURL SSL version', 'backwpup'); |
| [90](#L90) | $information['curlsslversion']['value'] = $curl\_version['ssl\_version']; |
| [91](#L91) | } else { |
| [92](#L92) | $information['curlversion']['value'] = esc\_html\_\_('unavailable', 'backwpup'); |
| [93](#L93) | } |
| [94](#L94) |  |
| [95](#L95) | // WP cron URL |
| [96](#L96) | $information['wpcronurl']['label'] = esc\_html\_\_('WP-Cron url', 'backwpup'); |
| [97](#L97) | $information['wpcronurl']['value'] = site\_url('wp-cron.php'); |
| [98](#L98) |  |
| [99](#L99) | // Response test |
| [100](#L100) | $server\_connect = []; |
| [101](#L101) | $server\_connect['label'] = \_\_('Server self connect', 'backwpup'); |
| [102](#L102) |  |
| [103](#L103) | $raw\_response = BackWPup\_Job::get\_jobrun\_url('test'); |
| [104](#L104) | $response\_code = wp\_remote\_retrieve\_response\_code($raw\_response); |
| [105](#L105) | $response\_body = wp\_remote\_retrieve\_body($raw\_response); |
| [106](#L106) | if (strstr($response\_body, 'BackWPup test request') === false) { |
| [107](#L107) | $server\_connect['value'] = esc\_html\_\_('Not expected HTTP response:', 'backwpup') . "\n"; |
| [108](#L108) | $server\_connect['html'] = wp\_kses( |
| [109](#L109) | \_\_('<strong>Not expected HTTP response:</strong><br>', 'backwpup'), |
| [110](#L110) | ['strong' => []] |
| [111](#L111) | ); |
| [112](#L112) | if (!$response\_code) { |
| [113](#L113) | $server\_connect['value'] .= sprintf( |
| [114](#L114) | wp\_kses\_post(\_\_('WP Http Error: %s', 'backwpup')), |
| [115](#L115) | $raw\_response->get\_error\_message() |
| [116](#L116) | ) . "\n"; |
| [117](#L117) | $server\_connect['html'] = sprintf( |
| [118](#L118) | \_\_('WP Http Error: <code>%s</code>', 'backwpup'), |
| [119](#L119) | esc\_html($raw\_response->get\_error\_message()) |
| [120](#L120) | ) . '<br>'; |
| [121](#L121) | } else { |
| [122](#L122) | $server\_connect['value'] .= sprintf(\_\_('Status-Code: %d', 'backwpup'), $response\_code) . "\n"; |
| [123](#L123) | $server\_connect['html'] .= sprintf( |
| [124](#L124) | \_\_('Status-Code: <code>%d</code>', 'backwpup'), |
| [125](#L125) | esc\_html($response\_code) |
| [126](#L126) | ) . '<br>'; |
| [127](#L127) | } |
| [128](#L128) | $response\_headers = wp\_remote\_retrieve\_headers($raw\_response); |
| [129](#L129) |  |
| [130](#L130) | foreach ($response\_headers as $key => $value) { |
| [131](#L131) | $server\_connect['value'] .= ucfirst($key) . ": {$value}\n"; |
| [132](#L132) | $server\_connect['html'] .= esc\_html(ucfirst($key)) . ': <code>' . esc\_html( |
| [133](#L133) | $value |
| [134](#L134) | ) . '</code><br>'; |
| [135](#L135) | } |
| [136](#L136) | $content = wp\_remote\_retrieve\_body($raw\_response); |
| [137](#L137) | if ($content) { |
| [138](#L138) | $server\_connect['value'] .= sprintf(\_\_('Content: %s', 'backwpup'), $content); |
| [139](#L139) | $server\_connect['html'] .= sprintf( |
| [140](#L140) | \_\_('Content: <code>%s</code>', 'backwpup'), |
| [141](#L141) | esc\_html($content) |
| [142](#L142) | ); |
| [143](#L143) | } |
| [144](#L144) | } else { |
| [145](#L145) | $server\_connect['value'] = \_\_('Response Test O.K.', 'backwpup'); |
| [146](#L146) | } |
| [147](#L147) | $information['serverconnect'] = $server\_connect; |
| [148](#L148) |  |
| [149](#L149) | // Document root |
| [150](#L150) | $information['docroot']['label'] = 'Document root'; |
| [151](#L151) | $information['docroot']['value'] = $\_SERVER['DOCUMENT\_ROOT']; |
| [152](#L152) |  |
| [153](#L153) | // Temp folder |
| [154](#L154) | $information['tmpfolder']['label'] = esc\_html\_\_('Temp folder', 'backwpup'); |
| [155](#L155) | if (!is\_dir(BackWPup::get\_plugin\_data('TEMP'))) { |
| [156](#L156) | $information['tmpfolder']['value'] = sprintf( |
| [157](#L157) | esc\_html\_\_('Temp folder %s doesn\'t exist.', 'backwpup'), |
| [158](#L158) | BackWPup::get\_plugin\_data('TEMP') |
| [159](#L159) | ); |
| [160](#L160) | } elseif (!is\_writable(BackWPup::get\_plugin\_data('TEMP'))) { |
| [161](#L161) | $information['tmpfolder']['value'] = sprintf( |
| [162](#L162) | esc\_html\_\_('Temporary folder %s is not writable.', 'backwpup'), |
| [163](#L163) | BackWPup::get\_plugin\_data('TEMP') |
| [164](#L164) | ); |
| [165](#L165) | } else { |
| [166](#L166) | $information['tmpfolder']['value'] = BackWPup::get\_plugin\_data('TEMP'); |
| [167](#L167) | } |
| [168](#L168) |  |
| [169](#L169) | // Log folder |
| [170](#L170) | $information['logfolder']['label'] = esc\_html\_\_('Log folder', 'backwpup'); |
| [171](#L171) | $log\_folder = BackWPup\_File::get\_absolute\_path( |
| [172](#L172) | get\_site\_option('backwpup\_cfg\_logfolder') |
| [173](#L173) | ); |
| [174](#L174) | if (!is\_dir($log\_folder)) { |
| [175](#L175) | $information['logfolder']['value'] = sprintf( |
| [176](#L176) | esc\_html\_\_('Log folder %s does not exist.', 'backwpup'), |
| [177](#L177) | $log\_folder |
| [178](#L178) | ); |
| [179](#L179) | } elseif (!is\_writable($log\_folder)) { |
| [180](#L180) | $information['logfolder']['value'] = sprintf( |
| [181](#L181) | esc\_html\_\_('Log folder %s is not writable.', 'backwpup'), |
| [182](#L182) | $log\_folder |
| [183](#L183) | ); |
| [184](#L184) | } else { |
| [185](#L185) | $information['logfolder']['value'] = $log\_folder; |
| [186](#L186) | } |
| [187](#L187) |  |
| [188](#L188) | // Server |
| [189](#L189) | $information['server']['label'] = esc\_html\_\_('Server', 'backwpup'); |
| [190](#L190) | $information['server']['value'] = $\_SERVER['SERVER\_SOFTWARE']; |
| [191](#L191) |  |
| [192](#L192) | // OS |
| [193](#L193) | $information['os']['label'] = esc\_html\_\_('Operating System', 'backwpup'); |
| [194](#L194) | $information['os']['value'] = PHP\_OS; |
| [195](#L195) |  |
| [196](#L196) | // PHP SAPI |
| [197](#L197) | $information['phpsapi']['label'] = esc\_html\_\_('PHP SAPI', 'backwpup'); |
| [198](#L198) | $information['phpsapi']['value'] = PHP\_SAPI; |
| [199](#L199) |  |
| [200](#L200) | // PHP user |
| [201](#L201) | $information['phpuser']['label'] = esc\_html\_\_('Current PHP user', 'backwpup'); |
| [202](#L202) | if (function\_exists('get\_current\_user')) { |
| [203](#L203) | $information['phpuser']['value'] = get\_current\_user(); |
| [204](#L204) | } else { |
| [205](#L205) | $information['phpuser']['value'] = esc\_html\_\_('Function Disabled', 'backwpup'); |
| [206](#L206) | } |
| [207](#L207) |  |
| [208](#L208) | // Maximum execution time |
| [209](#L209) | $information['maxexectime']['label'] = esc\_html\_\_('Maximum execution time', 'backwpup'); |
| [210](#L210) | $information['maxexectime']['value'] = sprintf( |
| [211](#L211) | \_\_('%d seconds', 'backwpup'), |
| [212](#L212) | ini\_get('max\_execution\_time') |
| [213](#L213) | ); |
| [214](#L214) |  |
| [215](#L215) | // BackWPup Maximum script execution time |
| [216](#L216) | $information['jobmaxexecutiontime']['label'] = esc\_html\_\_( |
| [217](#L217) | 'BackWPup maximum script execution time', |
| [218](#L218) | 'backwpup' |
| [219](#L219) | ); |
| [220](#L220) | $information['jobmaxexecutiontime']['value'] = sprintf( |
| [221](#L221) | \_\_('%d seconds', 'backwpup'), |
| [222](#L222) | absint(get\_site\_option('backwpup\_cfg\_jobmaxexecutiontime')) |
| [223](#L223) | ); |
| [224](#L224) |  |
| [225](#L225) | // Alternate WP cron |
| [226](#L226) | $information['altwpcron']['label'] = esc\_html\_\_('Alternative WP Cron', 'backwpup'); |
| [227](#L227) | if (defined('ALTERNATE\_WP\_CRON') && ALTERNATE\_WP\_CRON) { |
| [228](#L228) | $information['altwpcron']['value'] = esc\_html\_\_('On', 'backwpup'); |
| [229](#L229) | } else { |
| [230](#L230) | $information['altwpcron']['value'] = esc\_html\_\_('Off', 'backwpup'); |
| [231](#L231) | } |
| [232](#L232) |  |
| [233](#L233) | // Disable WP cron |
| [234](#L234) | $information['disablewpcron']['label'] = esc\_html\_\_('Disabled WP Cron', 'backwpup'); |
| [235](#L235) | if (defined('DISABLE\_WP\_CRON') && DISABLE\_WP\_CRON) { |
| [236](#L236) | $information['disablewpcron']['value'] = esc\_html\_\_('On', 'backwpup'); |
| [237](#L237) | } else { |
| [238](#L238) | $information['disablewpcron']['value'] = esc\_html\_\_('Off', 'backwpup'); |
| [239](#L239) | } |
| [240](#L240) |  |
| [241](#L241) | // CHMOD dir |
| [242](#L242) | $information['chmoddir']['label'] = esc\_html\_\_('CHMOD Dir', 'backwpup'); |
| [243](#L243) | if (defined('FS\_CHMOD\_DIR')) { |
| [244](#L244) | $information['chmoddir']['value'] = FS\_CHMOD\_DIR; |
| [245](#L245) | } else { |
| [246](#L246) | $information['chmoddir']['value'] = '0755'; |
| [247](#L247) | } |
| [248](#L248) |  |
| [249](#L249) | // Server time |
| [250](#L250) | $information['servertime']['label'] = esc\_html\_\_('Server Time', 'backwpup'); |
| [251](#L251) | $now = localtime(time(), true); |
| [252](#L252) | $information['servertime']['value'] = $now['tm\_hour'] . ':' . $now['tm\_min']; |
| [253](#L253) |  |
| [254](#L254) | // Blog time |
| [255](#L255) | $information['blogtime']['label'] = esc\_html\_\_('Blog Time', 'backwpup'); |
| [256](#L256) | $information['blogtime']['value'] = date('H:i', current\_time('timestamp')); |
| [257](#L257) |  |
| [258](#L258) | // Blog timezone |
| [259](#L259) | $information['blogtz']['label'] = esc\_html\_\_('Blog Timezone', 'backwpup'); |
| [260](#L260) | $information['blogtz']['value'] = get\_option('timezone\_string'); |
| [261](#L261) |  |
| [262](#L262) | // Blog time offset |
| [263](#L263) | $information['blogoffset']['label'] = esc\_html\_\_('Blog Time offset', 'backwpup'); |
| [264](#L264) | $information['blogoffset']['value'] = sprintf( |
| [265](#L265) | esc\_html\_\_('%s hours', 'backwpup'), |
| [266](#L266) | (int) get\_option('gmt\_offset') |
| [267](#L267) | ); |
| [268](#L268) |  |
| [269](#L269) | // Blog language |
| [270](#L270) | $information['bloglang']['label'] = esc\_html\_\_('Blog language', 'backwpup'); |
| [271](#L271) | $information['bloglang']['value'] = get\_bloginfo('language'); |
| [272](#L272) |  |
| [273](#L273) | // MySQL encoding |
| [274](#L274) | $information['mysqlencoding']['label'] = esc\_html\_\_('MySQL Client encoding', 'backwpup'); |
| [275](#L275) | $information['mysqlencoding']['value'] = defined('DB\_CHARSET') ? DB\_CHARSET : ''; |
| [276](#L276) |  |
| [277](#L277) | // PHP memory limitesc\_html\_\_ |
| [278](#L278) | $information['phpmemlimit']['label'] = esc\_html\_\_('PHP Memory limit', 'backwpup'); |
| [279](#L279) | $information['phpmemlimit']['value'] = ini\_get('memory\_limit'); |
| [280](#L280) |  |
| [281](#L281) | // WP memory limit |
| [282](#L282) | $information['wpmemlimit']['label'] = esc\_html\_\_('WP memory limit', 'backwpup'); |
| [283](#L283) | $information['wpmemlimit']['value'] = WP\_MEMORY\_LIMIT; |
| [284](#L284) |  |
| [285](#L285) | // WP maximum memory limit |
| [286](#L286) | $information['wpmaxmemlimit']['label'] = esc\_html\_\_('WP maximum memory limit', 'backwpup'); |
| [287](#L287) | $information['wpmaxmemlimit']['value'] = WP\_MAX\_MEMORY\_LIMIT; |
| [288](#L288) |  |
| [289](#L289) | // Memory in use |
| [290](#L290) | $information['memusage']['label'] = esc\_html\_\_('Memory in use', 'backwpup'); |
| [291](#L291) | $information['memusage']['value'] = size\_format(@memory\_get\_usage(true), 2); |
| [292](#L292) |  |
| [293](#L293) | // Disabled PHP functions |
| [294](#L294) | $disabled = esc\_html(ini\_get('disable\_functions')); |
| [295](#L295) | if (!empty($disabled)) { |
| [296](#L296) | $information['disabledfunctions']['label'] = esc\_html\_\_('Disabled PHP Functions:', 'backwpup'); |
| [297](#L297) | $information['disabledfunctions']['value'] = implode(', ', explode(',', $disabled)); |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) | // Loaded PHP extensions |
| [301](#L301) | $information['loadedextensions']['label'] = esc\_html\_\_('Loaded PHP Extensions:', 'backwpup'); |
| [302](#L302) | $extensions = get\_loaded\_extensions(); |
| [303](#L303) | sort($extensions); |
| [304](#L304) | $information['loadedextensions']['value'] = implode(', ', $extensions); |
| [305](#L305) |  |
| [306](#L306) | return $information; |
| [307](#L307) | } |
| [308](#L308) |  |
| [309](#L309) | public function admin\_print\_scripts() |
| [310](#L310) | { |
| [311](#L311) | $suffix = (defined('SCRIPT\_DEBUG') && SCRIPT\_DEBUG) ? '' : '.min'; |
| [312](#L312) |  |
| [313](#L313) | wp\_enqueue\_script( |
| [314](#L314) | 'backwpuppagesettings', |
| [315](#L315) | untrailingslashit(BackWPup::get\_plugin\_data('URL')) . "/assets/js/page\_settings{$suffix}.js", |
| [316](#L316) | [ |
| [317](#L317) | 'jquery', |
| [318](#L318) | 'backwpupgeneral', |
| [319](#L319) | 'backwpup\_clipboard', |
| [320](#L320) | ], |
| [321](#L321) | filemtime(untrailingslashit(BackWPup::get\_plugin\_data('plugindir')) . "/assets/js/page\_settings{$suffix}.js"), |
| [322](#L322) | true |
| [323](#L323) | ); |
| [324](#L324) |  |
| [325](#L325) | if (\BackWPup::is\_pro()) { |
| [326](#L326) | wp\_enqueue\_script( |
| [327](#L327) | 'backwpuppagesettings-encryption', |
| [328](#L328) | untrailingslashit(BackWPup::get\_plugin\_data('URL')) . "/assets/js/pro/settings-encryption{$suffix}.js", |
| [329](#L329) | [ |
| [330](#L330) | 'underscore', |
| [331](#L331) | 'jquery', |
| [332](#L332) | 'backwpuppagesettings', |
| [333](#L333) | 'thickbox', |
| [334](#L334) | ], |
| [335](#L335) | filemtime(untrailingslashit(BackWPup::get\_plugin\_data('plugindir')) . "/assets/js/pro/settings-encryption{$suffix}.js"), |
| [336](#L336) | true |
| [337](#L337) | ); |
| [338](#L338) |  |
| [339](#L339) | wp\_localize\_script( |
| [340](#L340) | 'backwpuppagesettings-encryption', |
| [341](#L341) | 'settingsEncryptionVariables', |
| [342](#L342) | [ |
| [343](#L343) | 'validPublicKey' => esc\_html\_\_('Public key is valid.', 'backwpup'), |
| [344](#L344) | 'invalidPublicKey' => esc\_html\_\_('Public key is invalid.', 'backwpup'), |
| [345](#L345) | 'privateKeyMissed' => esc\_html\_\_('Please enter your private key.', 'backwpup'), |
| [346](#L346) | 'publicKeyMissed' => esc\_html\_\_( |
| [347](#L347) | 'Please enter a public key first, or generate a key pair.', |
| [348](#L348) | 'backwpup' |
| [349](#L349) | ), |
| [350](#L350) | 'mustDownloadPrivateKey' => esc\_html\_\_( |
| [351](#L351) | 'Please download the private key before continuing. If you do not save it locally, you cannot decrypt your backups later.', |
| [352](#L352) | 'backwpup' |
| [353](#L353) | ), |
| [354](#L354) | 'mustDownloadSymmetricKey' => esc\_html\_\_( |
| [355](#L355) | 'Please download the key before continuing. If you do not save it locally, you cannot decrypt your backups later.', |
| [356](#L356) | 'backwpup' |
| [357](#L357) | ), |
| [358](#L358) | ] |
| [359](#L359) | ); |
| [360](#L360) | } |
| [361](#L361) | } |
| [362](#L362) |  |
| [363](#L363) | public function save\_post\_form() |
| [364](#L364) | { |
| [365](#L365) | if (!current\_user\_can('backwpup\_settings')) { |
| [366](#L366) | return; |
| [367](#L367) | } |
| [368](#L368) |  |
| [369](#L369) | // Set default options if button clicked. |
| [370](#L370) | if (isset($\_POST['default\_settings']) && $\_POST['default\_settings']) { // phpcs:ignore |
| [371](#L371) | delete\_site\_option('backwpup\_cfg\_showadminbar'); |
| [372](#L372) | delete\_site\_option('backwpup\_cfg\_showfoldersize'); |
| [373](#L373) | delete\_site\_option('backwpup\_cfg\_jobstepretry'); |
| [374](#L374) | delete\_site\_option('backwpup\_cfg\_jobmaxexecutiontime'); |
| [375](#L375) | delete\_site\_option('backwpup\_cfg\_loglevel'); |
| [376](#L376) | delete\_site\_option('backwpup\_cfg\_jobwaittimems'); |
| [377](#L377) | delete\_site\_option('backwpup\_cfg\_jobrunauthkey'); |
| [378](#L378) | delete\_site\_option('backwpup\_cfg\_jobdooutput'); |
| [379](#L379) | delete\_site\_option('backwpup\_cfg\_windows'); |
| [380](#L380) | delete\_site\_option('backwpup\_cfg\_maxlogs'); |
| [381](#L381) | delete\_site\_option('backwpup\_cfg\_gzlogs'); |
| [382](#L382) | delete\_site\_option('backwpup\_cfg\_protectfolders'); |
| [383](#L383) | delete\_site\_option('backwpup\_cfg\_authentication'); |
| [384](#L384) | delete\_site\_option('backwpup\_cfg\_logfolder'); |
| [385](#L385) | delete\_site\_option('backwpup\_cfg\_dropboxappkey'); |
| [386](#L386) | delete\_site\_option('backwpup\_cfg\_dropboxappsecret'); |
| [387](#L387) | delete\_site\_option('backwpup\_cfg\_dropboxsandboxappkey'); |
| [388](#L388) | delete\_site\_option('backwpup\_cfg\_dropboxsandboxappsecret'); |
| [389](#L389) | delete\_site\_option('backwpup\_cfg\_sugarsynckey'); |
| [390](#L390) | delete\_site\_option('backwpup\_cfg\_sugarsyncsecret'); |
| [391](#L391) | delete\_site\_option('backwpup\_cfg\_sugarsyncappid'); |
| [392](#L392) | delete\_site\_option('backwpup\_cfg\_hash'); |
| [393](#L393) | delete\_site\_option('backwpup\_cfg\_keepplugindata'); |
| [394](#L394) |  |
| [395](#L395) | foreach ($this->settings\_updaters as $setting) { |
| [396](#L396) | $setting->reset(); |
| [397](#L397) | } |
| [398](#L398) |  |
| [399](#L399) | delete\_site\_option(self::LICENSE\_INSTANCE\_KEY); |
| [400](#L400) | delete\_site\_option(self::LICENSE\_API\_KEY); |
| [401](#L401) | delete\_site\_option(self::LICENSE\_PRODUCT\_ID); |
| [402](#L402) | delete\_site\_option(self::LICENSE\_STATUS); |
| [403](#L403) |  |
| [404](#L404) | BackWPup\_Option::default\_site\_options(); |
| [405](#L405) | BackWPup\_Admin::message(\_\_('Settings reset to default', 'backwpup')); |
| [406](#L406) |  |
| [407](#L407) | return; |
| [408](#L408) | } |
| [409](#L409) |  |
| [410](#L410) | foreach ($this->settings\_updaters as $setting) { |
| [411](#L411) | $setting->update(); |
| [412](#L412) | } |
| [413](#L413) |  |
| [414](#L414) | update\_site\_option('backwpup\_cfg\_showadminbar', !empty($\_POST['showadminbarmenu'])); |
| [415](#L415) | update\_site\_option('backwpup\_cfg\_showfoldersize', !empty($\_POST['showfoldersize'])); |
| [416](#L416) |  |
| [417](#L417) | if (empty($\_POST['jobstepretry']) || 100 < $\_POST['jobstepretry'] || 1 > $\_POST['jobstepretry']) { |
| [418](#L418) | $\_POST['jobstepretry'] = 3; |
| [419](#L419) | } |
| [420](#L420) |  |
| [421](#L421) | update\_site\_option('backwpup\_cfg\_jobstepretry', absint($\_POST['jobstepretry'])); |
| [422](#L422) |  |
| [423](#L423) | if ((int) $\_POST['jobmaxexecutiontime'] > 300) { |
| [424](#L424) | $\_POST['jobmaxexecutiontime'] = 300; |
| [425](#L425) | } |
| [426](#L426) |  |
| [427](#L427) | update\_site\_option('backwpup\_cfg\_jobmaxexecutiontime', absint($\_POST['jobmaxexecutiontime'])); |
| [428](#L428) | update\_site\_option( |
| [429](#L429) | 'backwpup\_cfg\_loglevel', |
| [430](#L430) | in\_array( |
| [431](#L431) | $\_POST['loglevel'], |
| [432](#L432) | ['normal\_translated', 'normal', 'debug\_translated', 'debug'], |
| [433](#L433) | true |
| [434](#L434) | ) ? $\_POST['loglevel'] : 'normal\_translated' |
| [435](#L435) | ); |
| [436](#L436) | update\_site\_option('backwpup\_cfg\_jobwaittimems', absint($\_POST['jobwaittimems'])); |
| [437](#L437) | update\_site\_option('backwpup\_cfg\_jobdooutput', !empty($\_POST['jobdooutput'])); |
| [438](#L438) | update\_site\_option('backwpup\_cfg\_windows', !empty($\_POST['windows'])); |
| [439](#L439) |  |
| [440](#L440) | update\_site\_option('backwpup\_cfg\_maxlogs', absint($\_POST['maxlogs'])); |
| [441](#L441) | update\_site\_option('backwpup\_cfg\_gzlogs', !empty($\_POST['gzlogs'])); |
| [442](#L442) | update\_site\_option('backwpup\_cfg\_protectfolders', !empty($\_POST['protectfolders'])); |
| [443](#L443) |  |
| [444](#L444) | $\_POST['jobrunauthkey'] = preg\_replace('/[^a-zA-Z0-9]/', '', trim($\_POST['jobrunauthkey'])); |
| [445](#L445) |  |
| [446](#L446) | update\_site\_option('backwpup\_cfg\_jobrunauthkey', $\_POST['jobrunauthkey']); |
| [447](#L447) |  |
| [448](#L448) | $\_POST['logfolder'] = trailingslashit( |
| [449](#L449) | str\_replace('\\', '/', trim(stripslashes(sanitize\_text\_field($\_POST['logfolder'])))) |
| [450](#L450) | ); |
| [451](#L451) |  |
| [452](#L452) | //set def. folders |
| [453](#L453) | if (empty($\_POST['logfolder']) || $\_POST['logfolder'] === '/') { |
| [454](#L454) | delete\_site\_option('backwpup\_cfg\_logfolder'); |
| [455](#L455) | BackWPup\_Option::default\_site\_options(); |
| [456](#L456) | } else { |
| [457](#L457) | update\_site\_option('backwpup\_cfg\_logfolder', $\_POST['logfolder']); |
| [458](#L458) | } |
| [459](#L459) |  |
| [460](#L460) | $authentication = get\_site\_option( |
| [461](#L461) | 'backwpup\_cfg\_authentication', |
| [462](#L462) | [ |
| [463](#L463) | 'method' => '', |
| [464](#L464) | 'basic\_user' => '', |
| [465](#L465) | 'basic\_password' => '', |
| [466](#L466) | 'user\_id' => 0, |
| [467](#L467) | 'query\_arg' => '', |
| [468](#L468) | ] |
| [469](#L469) | ); |
| [470](#L470) | $authentication['method'] = (in\_array( |
| [471](#L471) | $\_POST['authentication\_method'], |
| [472](#L472) | ['user', 'basic', 'query\_arg'], |
| [473](#L473) | true |
| [474](#L474) | )) ? $\_POST['authentication\_method'] : ''; |
| [475](#L475) | $authentication['basic\_user'] = sanitize\_text\_field($\_POST['authentication\_basic\_user']); |
| [476](#L476) | $authentication['basic\_password'] = BackWPup\_Encryption::encrypt( |
| [477](#L477) | (string) $\_POST['authentication\_basic\_password'] |
| [478](#L478) | ); |
| [479](#L479) | $authentication['query\_arg'] = sanitize\_text\_field($\_POST['authentication\_query\_arg']); |
| [480](#L480) | $authentication['user\_id'] = absint($\_POST['authentication\_user\_id']); |
| [481](#L481) | update\_site\_option('backwpup\_cfg\_authentication', $authentication); |
| [482](#L482) | delete\_site\_transient('backwpup\_cookies'); |
| [483](#L483) |  |
| [484](#L484) | update\_site\_option('backwpup\_cfg\_keepplugindata', !empty($\_POST['keepplugindata'])); |
| [485](#L485) |  |
| [486](#L486) | do\_action('backwpup\_page\_settings\_save'); |
| [487](#L487) |  |
| [488](#L488) | BackWPup\_Admin::message(\_\_('Settings saved', 'backwpup')); |
| [489](#L489) | } |
| [490](#L490) |  |
| [491](#L491) | public function page() |
| [492](#L492) | { |
| [493](#L493) | ?> |
| [494](#L494) | <div class="wrap" id="backwpup-page"> |
| [495](#L495) | <h1> |
| [496](#L496) | <?php printf( |
| [497](#L497) | esc\_html\_\_('%s &rsaquo; Settings', 'backwpup'), |
| [498](#L498) | BackWPup::get\_plugin\_data('name') |
| [499](#L499) | ); ?> |
| [500](#L500) | </h1> |
| [501](#L501) | <?php |
| [502](#L502) | $tabs = []; |
| [503](#L503) | $tabs['general'] = esc\_html\_\_('General', 'backwpup'); |
| [504](#L504) | $tabs['job'] = esc\_html\_\_('Jobs', 'backwpup'); |
| [505](#L505) | if (BackWPup::is\_pro()) { |
| [506](#L506) | $tabs['encryption'] = esc\_html\_\_('Encryption', 'backwpup'); |
| [507](#L507) | } |
| [508](#L508) | $tabs['log'] = esc\_html\_\_('Logs', 'backwpup'); |
| [509](#L509) | $tabs['net'] = esc\_html\_\_('Network', 'backwpup'); |
| [510](#L510) | $tabs['apikey'] = esc\_html\_\_('API Keys', 'backwpup'); |
| [511](#L511) | $tabs['information'] = esc\_html\_\_('Information', 'backwpup'); |
| [512](#L512) | if (BackWPup::is\_pro()) { |
| [513](#L513) | $tabs['license'] = esc\_html\_\_('License', 'backwpup'); |
| [514](#L514) | } |
| [515](#L515) | $tabs = apply\_filters('backwpup\_page\_settings\_tab', $tabs); |
| [516](#L516) | echo '<h2 class="nav-tab-wrapper">'; |
| [517](#L517) |  |
| [518](#L518) | foreach ($tabs as $id => $name) { |
| [519](#L519) | echo '<a href="#backwpup-tab-' . esc\_attr($id) . '" class="nav-tab">' . esc\_attr($name) . '</a>'; |
| [520](#L520) | } |
| [521](#L521) | echo '</h2>'; |
| [522](#L522) | BackWPup\_Admin::display\_messages(); ?> |
| [523](#L523) |  |
| [524](#L524) | <form id="settingsform" action="<?php echo admin\_url('admin-post.php'); ?>" method="post"> |
| [525](#L525) | <?php wp\_nonce\_field('backwpupsettings\_page'); ?> |
| [526](#L526) | <?php wp\_nonce\_field('backwpup\_ajax\_nonce', 'backwpupajaxnonce', false); ?> |
| [527](#L527) | <input type="hidden" name="page" value="backwpupsettings"/> |
| [528](#L528) | <input type="hidden" name="action" value="backwpup"/> |
| [529](#L529) | <input type="hidden" name="anchor" value="#backwpup-tab-general"/> |
| [530](#L530) |  |
| [531](#L531) | <div class="table ui-tabs-hide" id="backwpup-tab-general"> |
| [532](#L532) |  |
| [533](#L533) | <h3 class="title"><?php esc\_html\_e('Display Settings', 'backwpup'); ?></h3> |
| [534](#L534) | <p><?php \_e('Do you want to see BackWPup in the WordPress admin bar?', 'backwpup'); ?></p> |
| [535](#L535) | <table class="form-table"> |
| [536](#L536) | <tr> |
| [537](#L537) | <th scope="row"><?php esc\_html\_e('Admin bar', 'backwpup'); ?></th> |
| [538](#L538) | <td> |
| [539](#L539) | <fieldset> |
| [540](#L540) | <legend class="screen-reader-text"> |
| [541](#L541) | <span> |
| [542](#L542) | <?php esc\_html\_e('Admin Bar', 'backwpup'); ?> |
| [543](#L543) | </span> |
| [544](#L544) | </legend> |
| [545](#L545) | <label for="showadminbarmenu"> |
| [546](#L546) | <input name="showadminbarmenu" type="checkbox" id="showadminbarmenu" |
| [547](#L547) | value="1" <?php checked( |
| [548](#L548) | get\_site\_option('backwpup\_cfg\_showadminbar'), |
| [549](#L549) | true |
| [550](#L550) | ); ?> /> |
| [551](#L551) | <?php esc\_html\_e('Show BackWPup links in admin bar.', 'backwpup'); ?> |
| [552](#L552) | </label> |
| [553](#L553) | </fieldset> |
| [554](#L554) | </td> |
| [555](#L555) | </tr> |
| [556](#L556) | <tr> |
| [557](#L557) | <th scope="row"><?php esc\_html\_e('Folder sizes', 'backwpup'); ?></th> |
| [558](#L558) | <td> |
| [559](#L559) | <fieldset> |
| [560](#L560) | <legend class="screen-reader-text"> |
| [561](#L561) | <span> |
| [562](#L562) | <?php esc\_html\_e('Folder sizes', 'backwpup'); ?> |
| [563](#L563) | </span> |
| [564](#L564) | </legend> |
| [565](#L565) | <label for="showfoldersize"> |
| [566](#L566) | <input name="showfoldersize" type="checkbox" id="showfoldersize" |
| [567](#L567) | value="1" <?php checked( |
| [568](#L568) | get\_site\_option('backwpup\_cfg\_showfoldersize'), |
| [569](#L569) | true |
| [570](#L570) | ); ?> /> |
| [571](#L571) | <?php esc\_html\_e( |
| [572](#L572) | 'Display folder sizes in the files tab when editing a job. (Might increase loading time of files tab.)', |
| [573](#L573) | 'backwpup' |
| [574](#L574) | ); ?> |
| [575](#L575) | </label> |
| [576](#L576) | </fieldset> |
| [577](#L577) | </td> |
| [578](#L578) | </tr> |
| [579](#L579) | </table> |
| [580](#L580) | <h3 class="title"><?php esc\_html\_e('Security', 'backwpup'); ?></h3> |
| [581](#L581) | <p><?php \_e('Security option for BackWPup', 'backwpup'); ?></p> |
| [582](#L582) | <table class="form-table"> |
| [583](#L583) | <tr> |
| [584](#L584) | <th scope="row"><?php esc\_html\_e('Protect folders', 'backwpup'); ?></th> |
| [585](#L585) | <td> |
| [586](#L586) | <fieldset> |
| [587](#L587) | <legend class="screen-reader-text"> |
| [588](#L588) | <span> |
| [589](#L589) | <?php esc\_html\_e('Protect folders', 'backwpup'); ?> |
| [590](#L590) | </span> |
| [591](#L591) | </legend> |
| [592](#L592) | <label for="protectfolders"> |
| [593](#L593) | <input name="protectfolders" type="checkbox" id="protectfolders" |
| [594](#L594) | value="1" <?php checked( |
| [595](#L595) | get\_site\_option('backwpup\_cfg\_protectfolders'), |
| [596](#L596) | true |
| [597](#L597) | ); ?> /> |
| [598](#L598) | <?php echo wp\_kses( |
| [599](#L599) | \_\_( |
| [600](#L600) | 'Protect BackWPup folders ( Temp, Log and Backups ) with <code>.htaccess</code> and <code>index.php</code>', |
| [601](#L601) | 'backwpup' |
| [602](#L602) | ), |
| [603](#L603) | ['code' => []] |
| [604](#L604) | ); ?> |
| [605](#L605) | </label> |
| [606](#L606) | </fieldset> |
| [607](#L607) | </td> |
| [608](#L608) | </tr> |
| [609](#L609) | </table> |
| [610](#L610) |  |
| [611](#L611) | <table class="form-table"> |
| [612](#L612) | <tr> |
| [613](#L613) | <th scope="row"><?php esc\_html\_e('Plugin data', 'backwpup'); ?></th> |
| [614](#L614) | <td> |
| [615](#L615) | <fieldset> |
| [616](#L616) | <legend class="screen-reader-text"> |
| [617](#L617) | <span> |
| [618](#L618) | <?php esc\_html\_e('Keep plugin data', 'backwpup'); ?> |
| [619](#L619) | </span> |
| [620](#L620) | </legend> |
| [621](#L621) | <label for="keepplugindata"> |
| [622](#L622) | <input name="keepplugindata" type="checkbox" |
| [623](#L623) | id="keepplugindata" |
| [624](#L624) | value="1" <?php checked( |
| [625](#L625) | get\_site\_option('backwpup\_cfg\_keepplugindata'), |
| [626](#L626) | true |
| [627](#L627) | ); ?> /> |
| [628](#L628) | <?php esc\_html\_e( |
| [629](#L629) | 'Keep BackWPup data stored in the database after uninstall', |
| [630](#L630) | 'backwpup' |
| [631](#L631) | ); ?> |
| [632](#L632) | </label> |
| [633](#L633) | </fieldset> |
| [634](#L634) | </td> |
| [635](#L635) | </tr> |
| [636](#L636) | </table> |
| [637](#L637) | <?php do\_action('backwpup\_page\_settings\_tab\_generel'); ?> |
| [638](#L638) | </div> |
| [639](#L639) |  |
| [640](#L640) | <div class="table ui-tabs-hide" id="backwpup-tab-log"> |
| [641](#L641) | <p> |
| [642](#L642) | <?php esc\_html\_e( |
| [643](#L643) | 'Every time BackWPup runs a backup job, a log file is being generated. Choose where to store your log files and how many of them.', |
| [644](#L644) | 'backwpup' |
| [645](#L645) | ); ?> |
| [646](#L646) | </p> |
| [647](#L647) | <table class="form-table"> |
| [648](#L648) | <tr> |
| [649](#L649) | <th scope="row"> |
| [650](#L650) | <label for="logfolder"> |
| [651](#L651) | <?php esc\_html\_e('Log file folder', 'backwpup'); ?> |
| [652](#L652) | </label> |
| [653](#L653) | </th> |
| [654](#L654) | <td> |
| [655](#L655) | <input name="logfolder" type="text" id="logfolder" value="<?php echo esc\_attr( |
| [656](#L656) | get\_site\_option('backwpup\_cfg\_logfolder') |
| [657](#L657) | ); ?>" class="regular-text code"/> |
| [658](#L658) | <p class="description"> |
| [659](#L659) | <?php printf( |
| [660](#L660) | wp\_kses( |
| [661](#L661) | \_\_( |
| [662](#L662) | 'You can use absolute or relative path! Relative path is relative to %s.', |
| [663](#L663) | 'backwpup' |
| [664](#L664) | ), |
| [665](#L665) | ['code' => []] |
| [666](#L666) | ), |
| [667](#L667) | '<code>' . trailingslashit( |
| [668](#L668) | str\_replace('\\', '/', WP\_CONTENT\_DIR) |
| [669](#L669) | ) . '</code>' |
| [670](#L670) | ); ?> |
| [671](#L671) | </p> |
| [672](#L672) | </td> |
| [673](#L673) | </tr> |
| [674](#L674) | <tr> |
| [675](#L675) | <th scope="row"> |
| [676](#L676) | <label for="maxlogs"> |
| [677](#L677) | <?php esc\_html\_e('Maximum log files', 'backwpup'); ?> |
| [678](#L678) | </label> |
| [679](#L679) | </th> |
| [680](#L680) | <td> |
| [681](#L681) | <input name="maxlogs" type="number" min="0" step="1" id="maxlogs" |
| [682](#L682) | value="<?php echo absint( |
| [683](#L683) | get\_site\_option('backwpup\_cfg\_maxlogs') |
| [684](#L684) | ); ?>" class="small-text"/> |
| [685](#L685) | <?php esc\_html\_e('Maximum log files in folder.', 'backwpup'); ?> |
| [686](#L686) | </td> |
| [687](#L687) | </tr> |
| [688](#L688) | <tr> |
| [689](#L689) | <th scope="row"><?php esc\_html\_e('Compression', 'backwpup'); ?></th> |
| [690](#L690) | <td> |
| [691](#L691) | <fieldset> |
| [692](#L692) | <legend class="screen-reader-text"><span><?php \_e( |
| [693](#L693) | 'Compression', |
| [694](#L694) | 'backwpup' |
| [695](#L695) | ); ?></span></legend> |
| [696](#L696) | <label for="gzlogs"> |
| [697](#L697) | <input name="gzlogs" type="checkbox" id="gzlogs" value="1" <?php checked( |
| [698](#L698) | get\_site\_option('backwpup\_cfg\_gzlogs'), |
| [699](#L699) | true |
| [700](#L700) | ); ?><?php if (!function\_exists('gzopen')) { |
| [701](#L701) | echo ' disabled="disabled"'; |
| [702](#L702) | } ?> /> |
| [703](#L703) | <?php esc\_html\_e('Compress log files with GZip.', 'backwpup'); ?> |
| [704](#L704) | </label> |
| [705](#L705) | </fieldset> |
| [706](#L706) | </td> |
| [707](#L707) | </tr> |
| [708](#L708) | <tr> |
| [709](#L709) | <th scope="row"><?php esc\_html\_e('Logging Level', 'backwpup'); ?></th> |
| [710](#L710) | <td> |
| [711](#L711) | <fieldset> |
| [712](#L712) | <legend class="screen-reader-text"> |
| [713](#L713) | <span> |
| [714](#L714) | <?php esc\_html\_e('Logging Level', 'backwpup'); ?> |
| [715](#L715) | </span> |
| [716](#L716) | </legend> |
| [717](#L717) | <label for="loglevel"> |
| [718](#L718) | <select name="loglevel" size="1"> |
| [719](#L719) | <option value="normal\_translated" <?php selected( |
| [720](#L720) | get\_site\_option('backwpup\_cfg\_loglevel', 'normal\_translated'), |
| [721](#L721) | 'normal\_translated' |
| [722](#L722) | ); ?>><?php esc\_html\_e('Normal (translated)', 'backwpup'); ?></option> |
| [723](#L723) | <option value="normal" <?php selected( |
| [724](#L724) | get\_site\_option('backwpup\_cfg\_loglevel'), |
| [725](#L725) | 'normal' |
| [726](#L726) | ); ?>><?php esc\_html\_e('Normal (not translated)', 'backwpup'); ?></option> |
| [727](#L727) | <option value="debug\_translated" <?php selected( |
| [728](#L728) | get\_site\_option('backwpup\_cfg\_loglevel'), |
| [729](#L729) | 'debug\_translated' |
| [730](#L730) | ); ?>><?php \_e('Debug (translated)', 'backwpup'); ?></option> |
| [731](#L731) | <option value="debug" <?php selected( |
| [732](#L732) | get\_site\_option('backwpup\_cfg\_loglevel'), |
| [733](#L733) | 'debug' |
| [734](#L734) | ); ?>><?php esc\_html\_e('Debug (not translated)', 'backwpup'); ?></option> |
| [735](#L735) | </select> |
| [736](#L736) | </label> |
| [737](#L737) | <p class="description"> |
| [738](#L738) | <?php esc\_html\_e( |
| [739](#L739) | 'Debug log has much more information than normal logs. It is for support and should be handled carefully. For support is the best to use a not translated log file. Usage of not translated logs can reduce the PHP memory usage too.', |
| [740](#L740) | 'backwpup' |
| [741](#L741) | ); ?> |
| [742](#L742) | </p> |
| [743](#L743) | </fieldset> |
| [744](#L744) | </td> |
| [745](#L745) | </tr> |
| [746](#L746) | </table> |
| [747](#L747) |  |
| [748](#L748) | </div> |
| [749](#L749) | <div class="table ui-tabs-hide" id="backwpup-tab-job"> |
| [750](#L750) |  |
| [751](#L751) | <p><?php \_e( |
| [752](#L752) | 'There are a couple of general options for backup jobs. Set them here.', |
| [753](#L753) | 'backwpup' |
| [754](#L754) | ); ?></p> |
| [755](#L755) | <table class="form-table"> |
| [756](#L756) | <tr> |
| [757](#L757) | <th scope="row"> |
| [758](#L758) | <label for="jobstepretry"> |
| [759](#L759) | <?php esc\_html\_e('Maximum number of retries for job steps', 'backwpup'); ?> |
| [760](#L760) | </label> |
| [761](#L761) | </th> |
| [762](#L762) | <td> |
| [763](#L763) | <input name="jobstepretry" type="number" min="1" step="1" max="99" id="jobstepretry" |
| [764](#L764) | value="<?php echo absint(get\_site\_option('backwpup\_cfg\_jobstepretry')); ?>" class="small-text"/> |
| [765](#L765) | </td> |
| [766](#L766) | </tr> |
| [767](#L767) | <tr> |
| [768](#L768) | <th scope="row"><?php esc\_html\_e('Maximum script execution time', 'backwpup'); ?></th> |
| [769](#L769) | <td> |
| [770](#L770) | <fieldset> |
| [771](#L771) | <legend class="screen-reader-text"> |
| [772](#L772) | <span> |
| [773](#L773) | <?php esc\_html\_e('Maximum PHP Script execution time', 'backwpup'); ?> |
| [774](#L774) | </span> |
| [775](#L775) | </legend> |
| [776](#L776) | <label for="jobmaxexecutiontime"> |
| [777](#L777) | <input name="jobmaxexecutiontime" type="number" min="0" step="1" max="300" |
| [778](#L778) | id="jobmaxexecutiontime" value="<?php echo absint(get\_site\_option('backwpup\_cfg\_jobmaxexecutiontime')); ?>" class="small-text"/> |
| [779](#L779) | <?php \_e('seconds.', 'backwpup'); ?> |
| [780](#L780) | <p class="description"> |
| [781](#L781) | <?php echo wp\_kses( |
| [782](#L782) | \_\_( |
| [783](#L783) | 'Job will restart before hitting maximum execution time. Restarts will be disabled on CLI usage. If <code>ALTERNATE\_WP\_CRON</code> has been defined, WordPress Cron will be used for restarts, so it can take a while. 0 means no maximum.', |
| [784](#L784) | 'backwpup' |
| [785](#L785) | ), |
| [786](#L786) | ['code' => []] |
| [787](#L787) | ); ?> |
| [788](#L788) | </p> |
| [789](#L789) | </label> |
| [790](#L790) | </fieldset> |
| [791](#L791) | </td> |
| [792](#L792) | </tr> |
| [793](#L793) | <tr> |
| [794](#L794) | <th scope="row"> |
| [795](#L795) | <label for="jobrunauthkey"> |
| [796](#L796) | <?php esc\_html\_e('Key to start jobs externally with an URL', 'backwpup'); ?> |
| [797](#L797) | </label> |
| [798](#L798) | </th> |
| [799](#L799) | <td> |
| [800](#L800) | <input name="jobrunauthkey" type="text" id="jobrunauthkey" value="<?php echo esc\_attr( |
| [801](#L801) | get\_site\_option('backwpup\_cfg\_jobrunauthkey') |
| [802](#L802) | ); ?>" class="text code"/> |
| [803](#L803) | <p class="description"> |
| [804](#L804) | <?php esc\_html\_e( |
| [805](#L805) | 'Will be used to protect job starts from unauthorized person.', |
| [806](#L806) | 'backwpup' |
| [807](#L807) | ); ?> |
| [808](#L808) | </p> |
| [809](#L809) | </td> |
| [810](#L810) | </tr> |
| [811](#L811) | <tr> |
| [812](#L812) | <th scope="row"><?php esc\_html\_e('Reduce server load', 'backwpup'); ?></th> |
| [813](#L813) | <td> |
| [814](#L814) | <fieldset> |
| [815](#L815) | <legend class="screen-reader-text"> |
| [816](#L816) | <span> |
| [817](#L817) | <?php \_e('Reduce server load', 'backwpup'); ?> |
| [818](#L818) | </span> |
| [819](#L819) | </legend> |
| [820](#L820) | <label for="jobwaittimems"> |
| [821](#L821) | <select name="jobwaittimems" size="1"> |
| [822](#L822) | <option value="0" <?php selected( |
| [823](#L823) | get\_site\_option('backwpup\_cfg\_jobwaittimems'), |
| [824](#L824) | 0 |
| [825](#L825) | ); ?>><?php esc\_html\_e('disabled', 'backwpup'); ?></option> |
| [826](#L826) | <option value="10000" <?php selected( |
| [827](#L827) | get\_site\_option('backwpup\_cfg\_jobwaittimems'), |
| [828](#L828) | 10000 |
| [829](#L829) | ); ?>><?php esc\_html\_e('minimum', 'backwpup'); ?></option> |
| [830](#L830) | <option value="30000" <?php selected( |
| [831](#L831) | get\_site\_option('backwpup\_cfg\_jobwaittimems'), |
| [832](#L832) | 30000 |
| [833](#L833) | ); ?>><?php esc\_html\_e('medium', 'backwpup'); ?></option> |
| [834](#L834) | <option value="90000" <?php selected( |
| [835](#L835) | get\_site\_option('backwpup\_cfg\_jobwaittimems'), |
| [836](#L836) | 90000 |
| [837](#L837) | ); ?>><?php esc\_html\_e('maximum', 'backwpup'); ?></option> |
| [838](#L838) | </select> |
| [839](#L839) | </label> |
| [840](#L840) | <p class="description"> |
| [841](#L841) | <?php esc\_html\_e( |
| [842](#L842) | 'This adds short pauses to the process. Can be used to reduce the CPU load.', |
| [843](#L843) | 'backwpup' |
| [844](#L844) | ); ?> |
| [845](#L845) | </p> |
| [846](#L846) | </fieldset> |
| [847](#L847) | </td> |
| [848](#L848) | </tr> |
| [849](#L849) | <tr> |
| [850](#L850) | <th scope="row"><?php esc\_html\_e('Empty output on working', 'backwpup'); ?></th> |
| [851](#L851) | <td> |
| [852](#L852) | <fieldset> |
| [853](#L853) | <legend class="screen-reader-text"> |
| [854](#L854) | <span> |
| [855](#L855) | <?php esc\_html\_e( |
| [856](#L856) | 'Enable an empty Output on backup working.', |
| [857](#L857) | 'backwpup' |
| [858](#L858) | ); ?> |
| [859](#L859) | </span> |
| [860](#L860) | </legend> |
| [861](#L861) | <label for="jobdooutput"> |
| [862](#L862) | <input name="jobdooutput" type="checkbox" id="jobdooutput" |
| [863](#L863) | value="1" <?php checked( |
| [864](#L864) | get\_site\_option('backwpup\_cfg\_jobdooutput'), |
| [865](#L865) | true |
| [866](#L866) | ); ?> /> |
| [867](#L867) | <?php esc\_html\_e('Enable an empty Output on backup working.', 'backwpup'); ?> |
| [868](#L868) | </label> |
| [869](#L869) | <p class="description"> |
| [870](#L870) | <?php esc\_html\_e( |
| [871](#L871) | 'This do an empty output on job working. This can help in some situations or can break the working. You must test it.', |
| [872](#L872) | 'backwpup' |
| [873](#L873) | ); ?> |
| [874](#L874) | </p> |
| [875](#L875) | </fieldset> |
| [876](#L876) | </td> |
| [877](#L877) | </tr> |
| [878](#L878) | <tr> |
| [879](#L879) | <th scope="row"><?php esc\_html\_e('Windows IIS compatibility', 'backwpup'); ?></th> |
| [880](#L880) | <td> |
| [881](#L881) | <fieldset> |
| [882](#L882) | <legend class="screen-reader-text"> |
| [883](#L883) | <span> |
| [884](#L884) | <?php esc\_html\_e( |
| [885](#L885) | 'Enable compatibility with IIS on Windows.', |
| [886](#L886) | 'backwpup' |
| [887](#L887) | ); ?> |
| [888](#L888) | </span> |
| [889](#L889) | </legend> |
| [890](#L890) | <label for="windows"> |
| [891](#L891) | <input name="windows" type="checkbox" id="windows" value="1"<?php checked( |
| [892](#L892) | get\_site\_option('backwpup\_cfg\_windows'), |
| [893](#L893) | true |
| [894](#L894) | ); ?> /> |
| [895](#L895) | <?php esc\_html\_e('Enable compatibility with IIS on Windows.', 'backwpup'); ?> |
| [896](#L896) | </label> |
| [897](#L897) | <p class="description"> |
| [898](#L898) | <?php echo wp\_kses( |
| [899](#L899) | \_\_( |
| [900](#L900) | 'There is a PHP bug (<a href="https://bugs.php.net/43817">bug #43817</a>), which is triggered on some versions of Windows and IIS. Checking this box will enable a workaround for that bug. Only enable if you are getting errors about &ldquo;Permission denied&rdquo; in your logs.', |
| [901](#L901) | 'backwpup' |
| [902](#L902) | ), |
| [903](#L903) | ['a' => []] |
| [904](#L904) | ); ?> |
| [905](#L905) | </p> |
| [906](#L906) | </fieldset> |
| [907](#L907) | </td> |
| [908](#L908) | </tr> |
| [909](#L909) | </table> |
| [910](#L910) |  |
| [911](#L911) | </div> |
| [912](#L912) |  |
| [913](#L913) | <?php |
| [914](#L914) | foreach ($this->settings\_views as $setting) { |
| [915](#L915) | $setting->tab(); |
| [916](#L916) | } ?> |
| [917](#L917) |  |
| [918](#L918) | <div class="table ui-tabs-hide" id="backwpup-tab-net"> |
| [919](#L919) |  |
| [920](#L920) | <h3> |
| [921](#L921) | <?php printf( |
| [922](#L922) | wp\_kses( |
| [923](#L923) | \_\_('Authentication for <code>%s</code>', 'backwpup'), |
| [924](#L924) | ['code' => []] |
| [925](#L925) | ), |
| [926](#L926) | site\_url('wp-cron.php') |
| [927](#L927) | ); ?> |
| [928](#L928) | </h3> |
| [929](#L929) | <p> |
| [930](#L930) | <?php esc\_html\_e( |
| [931](#L931) | 'If you protected your blog with HTTP basic authentication (.htaccess), or you use a Plugin to secure wp-cron.php, then use the authentication methods below.', |
| [932](#L932) | 'backwpup' |
| [933](#L933) | ); ?> |
| [934](#L934) | </p> |
| [935](#L935) | <?php |
| [936](#L936) | $authentication = get\_site\_option( |
| [937](#L937) | 'backwpup\_cfg\_authentication', |
| [938](#L938) | [ |
| [939](#L939) | 'method' => '', |
| [940](#L940) | 'basic\_user' => '', |
| [941](#L941) | 'basic\_password' => '', |
| [942](#L942) | 'user\_id' => 0, |
| [943](#L943) | 'query\_arg' => '', |
| [944](#L944) | ] |
| [945](#L945) | ); ?> |
| [946](#L946) | <table class="form-table"> |
| [947](#L947) | <tr> |
| [948](#L948) | <th scope="row"><?php esc\_html\_e('Authentication method', 'backwpup'); ?></th> |
| [949](#L949) | <td> |
| [950](#L950) | <fieldset> |
| [951](#L951) | <legend class="screen-reader-text"> |
| [952](#L952) | <span> |
| [953](#L953) | <?php esc\_html\_e('Authentication method', 'backwpup'); ?> |
| [954](#L954) | </span> |
| [955](#L955) | </legend> |
| [956](#L956) | <label for="authentication\_method"> |
| [957](#L957) | <select name="authentication\_method" id="authentication\_method" size="1"> |
| [958](#L958) | <option value="" <?php selected( |
| [959](#L959) | $authentication['method'], |
| [960](#L960) | '' |
| [961](#L961) | ); ?>><?php esc\_html\_e('none', 'backwpup'); ?></option> |
| [962](#L962) | <option value="basic" <?php selected( |
| [963](#L963) | $authentication['method'], |
| [964](#L964) | 'basic' |
| [965](#L965) | ); ?>><?php esc\_html\_e('Basic auth', 'backwpup'); ?></option> |
| [966](#L966) | <option value="user" <?php selected( |
| [967](#L967) | $authentication['method'], |
| [968](#L968) | 'user' |
| [969](#L969) | ); ?>><?php esc\_html\_e('WordPress User', 'backwpup'); ?></option> |
| [970](#L970) | <option value="query\_arg" <?php selected( |
| [971](#L971) | $authentication['method'], |
| [972](#L972) | 'query\_arg' |
| [973](#L973) | ); ?>><?php esc\_html\_e('Query argument', 'backwpup'); ?></option> |
| [974](#L974) | </select> |
| [975](#L975) | </label> |
| [976](#L976) | </fieldset> |
| [977](#L977) | </td> |
| [978](#L978) | </tr> |
| [979](#L979) | <tr class="authentication\_basic" <?php if ($authentication['method'] !== 'basic') { |
| [980](#L980) | echo 'style="display:none"'; |
| [981](#L981) | } ?>> |
| [982](#L982) | <th scope="row"> |
| [983](#L983) | <label for="authentication\_basic\_user"> |
| [984](#L984) | <?php esc\_html\_e( |
| [985](#L985) | 'Basic Auth Username:', |
| [986](#L986) | 'backwpup' |
| [987](#L987) | ); ?> |
| [988](#L988) | </label> |
| [989](#L989) | </th> |
| [990](#L990) | <td> |
| [991](#L991) | <input name="authentication\_basic\_user" type="text" id="authentication\_basic\_user" |
| [992](#L992) | value="<?php echo esc\_attr( |
| [993](#L993) | $authentication['basic\_user'] |
| [994](#L994) | ); ?>" class="regular-text" autocomplete="off"/> |
| [995](#L995) | </td> |
| [996](#L996) | </tr> |
| [997](#L997) | <tr class="authentication\_basic" <?php if ($authentication['method'] !== 'basic') { |
| [998](#L998) | echo 'style="display:none"'; |
| [999](#L999) | } ?>> |
| [1000](#L1000) | <th scope="row"> |
| [1001](#L1001) | <label for="authentication\_basic\_password"> |
| [1002](#L1002) | <?php esc\_html\_e( |
| [1003](#L1003) | 'Basic Auth Password:', |
| [1004](#L1004) | 'backwpup' |
| [1005](#L1005) | ); ?> |
| [1006](#L1006) | </label> |
| [1007](#L1007) | </th> |
| [1008](#L1008) | <td> |
| [1009](#L1009) | <input name="authentication\_basic\_password" type="password" |
| [1010](#L1010) | id="authentication\_basic\_password" value="<?php echo esc\_attr( |
| [1011](#L1011) | BackWPup\_Encryption::decrypt($authentication['basic\_password']) |
| [1012](#L1012) | ); ?>" class="regular-text" autocomplete="off"/> |
| [1013](#L1013) | </tr> |
| [1014](#L1014) | <tr class="authentication\_user" <?php if ($authentication['method'] !== 'user') { |
| [1015](#L1015) | echo 'style="display:none"'; |
| [1016](#L1016) | } ?>> |
| [1017](#L1017) | <th scope="row"><?php \_e('Select WordPress User', 'backwpup'); ?></th> |
| [1018](#L1018) | <td> |
| [1019](#L1019) | <fieldset> |
| [1020](#L1020) | <legend class="screen-reader-text"><span><?php esc\_html\_e( |
| [1021](#L1021) | 'Select WordPress User', |
| [1022](#L1022) | 'backwpup' |
| [1023](#L1023) | ); ?></span> |
| [1024](#L1024) | </legend> |
| [1025](#L1025) | <label for="authentication\_user\_id"> |
| [1026](#L1026) | <select name="authentication\_user\_id" size="1"> |
| [1027](#L1027) | <?php |
| [1028](#L1028) | $users = get\_users( |
| [1029](#L1029) | [ |
| [1030](#L1030) | 'role' => 'administrator', |
| [1031](#L1031) | 'number' => 99, |
| [1032](#L1032) | 'orderby' => 'display\_name', |
| [1033](#L1033) | ] |
| [1034](#L1034) | ); |
| [1035](#L1035) |  |
| [1036](#L1036) | foreach ($users as $user) { |
| [1037](#L1037) | echo '<option value="' . $user->ID . '" ' . selected( |
| [1038](#L1038) | $authentication['user\_id'], |
| [1039](#L1039) | $user->ID, |
| [1040](#L1040) | false |
| [1041](#L1041) | ) . '>' . esc\_attr($user->display\_name) . '</option>'; |
| [1042](#L1042) | } ?> |
| [1043](#L1043) | </select> |
| [1044](#L1044) | </label> |
| [1045](#L1045) | </fieldset> |
| [1046](#L1046) | </td> |
| [1047](#L1047) | </tr> |
| [1048](#L1048) | <tr class="authentication\_query\_arg" <?php if ($authentication['method'] != 'query\_arg') { |
| [1049](#L1049) | echo 'style="display:none"'; |
| [1050](#L1050) | } ?>> |
| [1051](#L1051) | <th scope="row"> |
| [1052](#L1052) | <label for="authentication\_query\_arg"> |
| [1053](#L1053) | <?php esc\_html\_e( |
| [1054](#L1054) | 'Query arg key=value:', |
| [1055](#L1055) | 'backwpup' |
| [1056](#L1056) | ); ?> |
| [1057](#L1057) | </label> |
| [1058](#L1058) | </th> |
| [1059](#L1059) | <td> |
| [1060](#L1060) | ?<input name="authentication\_query\_arg" type="text" id="authentication\_query\_arg" |
| [1061](#L1061) | value="<?php echo esc\_attr( |
| [1062](#L1062) | $authentication['query\_arg'] |
| [1063](#L1063) | ); ?>" class="regular-text"/> |
| [1064](#L1064) | </td> |
| [1065](#L1065) | </tr> |
| [1066](#L1066) | </table> |
| [1067](#L1067) |  |
| [1068](#L1068) | </div> |
| [1069](#L1069) |  |
| [1070](#L1070) | <div class="table ui-tabs-hide" id="backwpup-tab-apikey"> |
| [1071](#L1071) | <?php do\_action('backwpup\_page\_settings\_tab\_apikey'); ?> |
| [1072](#L1072) | </div> |
| [1073](#L1073) |  |
| [1074](#L1074) | <div class="table ui-tabs-hide" id="backwpup-tab-information"> |
| [1075](#L1075) | <br/> |
| [1076](#L1076) | <?php $information = self::get\_information(); ?> |
| [1077](#L1077) |  |
| [1078](#L1078) | <p> |
| [1079](#L1079) | <?php |
| [1080](#L1080) | esc\_html\_e( |
| [1081](#L1081) | 'Experiencing an issue and need to contact BackWPup support? Click the link below to get debug information you can send to us.', |
| [1082](#L1082) | 'backwpup' |
| [1083](#L1083) | ); ?> |
| [1084](#L1084) | </p> |
| [1085](#L1085) | <p> |
| [1086](#L1086) | <a href="#TB\_inline?height=440&width=630&inlineId=tb-debug-info" id="debug-button" |
| [1087](#L1087) | class="thickbox button button-primary" title="<?php esc\_html\_e( |
| [1088](#L1088) | 'Debug Info', |
| [1089](#L1089) | 'backwpup' |
| [1090](#L1090) | ); ?>"> |
| [1091](#L1091) | <?php \_e('Get Debug Info', 'backwpup'); ?> |
| [1092](#L1092) | </a> |
| [1093](#L1093) | </p> |
| [1094](#L1094) |  |
| [1095](#L1095) | <div id="tb-debug-info" tabindex="-1" style="display: none;"> |
| [1096](#L1096) | <?php ob\_start(); ?> |
| [1097](#L1097) | <p> |
| [1098](#L1098) | <?php esc\_html\_e( |
| [1099](#L1099) | 'You will find debug information below. Click the button to copy the debug info to send to support.', |
| [1100](#L1100) | 'backwpup' |
| [1101](#L1101) | ); ?> |
| [1102](#L1102) | </p> |
| [1103](#L1103) | <p> |
| [1104](#L1104) | <?php |
| [1105](#L1105) | echo wp\_kses( |
| [1106](#L1106) | \_\_( |
| [1107](#L1107) | '<strong>Note</strong>: ' . |
| [1108](#L1108) | 'Would you like faster, more streamlined support? Pro users can contact BackWPup from right within the plugin.', |
| [1109](#L1109) | 'backwpup' |
| [1110](#L1110) | ), |
| [1111](#L1111) | ['strong' => []] |
| [1112](#L1112) | ); ?> |
| [1113](#L1113) | <a href="<?php \_e('https://backwpup.com', 'backwpup'); ?>"> |
| [1114](#L1114) | <?php \_e('Get Pro', 'backwpup'); ?> |
| [1115](#L1115) | </a> |
| [1116](#L1116) | </p> |
| [1117](#L1117) |  |
| [1118](#L1118) | <?php |
| [1119](#L1119) | $html = ob\_get\_clean(); |
| [1120](#L1120) | echo apply\_filters('backwpup\_get\_debug\_info\_text', $html); ?> |
| [1121](#L1121) |  |
| [1122](#L1122) | <p> |
| [1123](#L1123) | <a href="#" id="backwpup-copy-debug-info" data-clipboard-target="#backwpup-debug-info" |
| [1124](#L1124) | class="button button-primary"> |
| [1125](#L1125) | <?php \_e('Copy Debug Info', 'backwpup'); ?> |
| [1126](#L1126) | </a> |
| [1127](#L1127) | </p> |
| [1128](#L1128) |  |
| [1129](#L1129) | <div class="inline" id="backwpup-copy-debug-info-success" style="display:none;"> |
| [1130](#L1130) | <p><span class="dashicons dashicons-yes"></span><?php esc\_html\_e( |
| [1131](#L1131) | 'Debug info copied to clipboard.', |
| [1132](#L1132) | 'backwpup' |
| [1133](#L1133) | ); ?></p> |
| [1134](#L1134) | </div> |
| [1135](#L1135) | <div class="inline" id="backwpup-copy-debug-info-error" style="display:none;"> |
| [1136](#L1136) | <p> |
| [1137](#L1137) | <span class="dashicons dashicons-no"></span> |
| [1138](#L1138) | <?php esc\_html\_e( |
| [1139](#L1139) | 'Could not copy debug info. You can simply press ctrl+C to copy it.', |
| [1140](#L1140) | 'backwpup' |
| [1141](#L1141) | ); ?> |
| [1142](#L1142) | </p> |
| [1143](#L1143) | </div> |
| [1144](#L1144) |  |
| [1145](#L1145) | <textarea id="backwpup-debug-info" readonly="readonly" |
| [1146](#L1146) | style="width: 100%;height: 100%;overflow: scroll;"><?php |
| [1147](#L1147) | foreach ($information as $item) { |
| [1148](#L1148) | echo esc\_html($item['label']) . ': ' . esc\_html($item['value']) . "\n"; |
| [1149](#L1149) | } ?></textarea> |
| [1150](#L1150) | </div> |
| [1151](#L1151) |  |
| [1152](#L1152) | <script type="text/javascript"> |
| [1153](#L1153) | jQuery( document ).ready( function ( $ ) |
| [1154](#L1154) | { |
| [1155](#L1155) | clipboard = new Clipboard( '#backwpup-copy-debug-info' ); |
| [1156](#L1156) |  |
| [1157](#L1157) | clipboard.on( 'success', function ( e ) |
| [1158](#L1158) | { |
| [1159](#L1159) | setTimeout( |
| [1160](#L1160) | function () |
| [1161](#L1161) | { |
| [1162](#L1162) | $( '#backwpup-copy-debug-info-success' ) |
| [1163](#L1163) | .attr( 'style', 'display:inline-block !important;color:green' ); |
| [1164](#L1164) | }, |
| [1165](#L1165) | 300 |
| [1166](#L1166) | ); |
| [1167](#L1167) |  |
| [1168](#L1168) | setTimeout( |
| [1169](#L1169) | function () |
| [1170](#L1170) | { |
| [1171](#L1171) | $( '#backwpup-copy-debug-info-success' ) |
| [1172](#L1172) | .attr( 'style', 'display:none !important;' ); |
| [1173](#L1173) | }, |
| [1174](#L1174) | 5000 |
| [1175](#L1175) | ); |
| [1176](#L1176) | e.clearSelection(); |
| [1177](#L1177) | } ); |
| [1178](#L1178) |  |
| [1179](#L1179) | clipboard.on( 'error', function ( e ) |
| [1180](#L1180) | { |
| [1181](#L1181) | $( 'backwpup-copy-debug-info-error' ) |
| [1182](#L1182) | .attr( 'style', 'display:inline-block !important;color:red' ); |
| [1183](#L1183) | } ); |
| [1184](#L1184) |  |
| [1185](#L1185) | $( '#debug-button' ).on( 'click', function () |
| [1186](#L1186) | { |
| [1187](#L1187) | $( '#tb-debug-info' ).focus(); |
| [1188](#L1188) | //  $("#TB\_ajaxWindowTitle").text("<?php \_e('Debug Info'); ?>"); |
| [1189](#L1189) | $( '#TB\_ajaxWindowTitle' ).text( 'WTF' ); |
| [1190](#L1190) | } ); |
| [1191](#L1191) | } ); |
| [1192](#L1192) | </script> |
| [1193](#L1193) |  |
| [1194](#L1194) | <?php |
| [1195](#L1195) |  |
| [1196](#L1196) | echo '<table class="wp-list-table widefat fixed" cellspacing="0" style="width:100%;margin-left:auto;margin-right:auto;">'; |
| [1197](#L1197) | echo '<thead><tr><th width="35%">' . \_\_('Setting', 'backwpup') . '</th><th>' . \_\_( |
| [1198](#L1198) | 'Value', |
| [1199](#L1199) | 'backwpup' |
| [1200](#L1200) | ) . '</th></tr></thead>'; |
| [1201](#L1201) | echo '<tfoot><tr><th>' . \_\_('Setting', 'backwpup') . '</th><th>' . \_\_( |
| [1202](#L1202) | 'Value', |
| [1203](#L1203) | 'backwpup' |
| [1204](#L1204) | ) . '</th></tr></tfoot>'; |
| [1205](#L1205) |  |
| [1206](#L1206) | foreach ($information as $item) { |
| [1207](#L1207) | echo "<tr>\n" . |
| [1208](#L1208) | '<td>' . $item['label'] . "</td>\n" . |
| [1209](#L1209) | '<td>' . |
| [1210](#L1210) | ($item['html'] ?? esc\_html($item['value'])) . |
| [1211](#L1211) | "</td>\n" . |
| [1212](#L1212) | "</tr>\n"; |
| [1213](#L1213) | } |
| [1214](#L1214) | echo '</table>'; ?> |
| [1215](#L1215) | </div> |
| [1216](#L1216) |  |
| [1217](#L1217) | <?php do\_action('backwpup\_page\_settings\_tab\_content'); ?> |
| [1218](#L1218) |  |
| [1219](#L1219) | <p class="submit"> |
| [1220](#L1220) | <input type="submit" name="submit" id="submit" class="button-primary" value="<?php esc\_attr\_e( |
| [1221](#L1221) | 'Save Changes', |
| [1222](#L1222) | 'backwpup' |
| [1223](#L1223) | ); ?>"/> |
| [1224](#L1224) | &nbsp; |
| [1225](#L1225) | <input type="submit" name="default\_settings" id="default\_settings" class="button-secondary" |
| [1226](#L1226) | value="<?php esc\_attr\_e( |
| [1227](#L1227) | 'Reset all settings to default', |
| [1228](#L1228) | 'backwpup' |
| [1229](#L1229) | ); ?>"/> |
| [1230](#L1230) | </p> |
| [1231](#L1231) | </form> |
| [1232](#L1232) | </div> |
| [1233](#L1233) |  |
| [1234](#L1234) | <?php |
| [1235](#L1235) | } |
| [1236](#L1236) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/backwpup/trunk/inc/class-page-settings.php?rev=2818974&format=txt)
* [Original Format](/export/2818974/backwpup/trunk/inc/class-page-settings.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


