=== Content from github.com_700663bb_20250114_211755.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftgstation%2Ftgstation-server%2Fpull%2F1493)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftgstation%2Ftgstation-server%2Fpull%2F1493)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=tgstation%2Ftgstation-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tgstation](/tgstation)
/
**[tgstation-server](/tgstation/tgstation-server)**
Public

* [Notifications](/login?return_to=%2Ftgstation%2Ftgstation-server) You must be signed in to change notification settings
* [Fork
  82](/login?return_to=%2Ftgstation%2Ftgstation-server)
* [Star
   67](/login?return_to=%2Ftgstation%2Ftgstation-server)

* [Code](/tgstation/tgstation-server)
* [Issues
  54](/tgstation/tgstation-server/issues)
* [Pull requests
  6](/tgstation/tgstation-server/pulls)
* [Discussions](/tgstation/tgstation-server/discussions)
* [Actions](/tgstation/tgstation-server/actions)
* [Security](/tgstation/tgstation-server/security)
* [Insights](/tgstation/tgstation-server/pulse)

Additional navigation options

* [Code](/tgstation/tgstation-server)
* [Issues](/tgstation/tgstation-server/issues)
* [Pull requests](/tgstation/tgstation-server/pulls)
* [Discussions](/tgstation/tgstation-server/discussions)
* [Actions](/tgstation/tgstation-server/actions)
* [Security](/tgstation/tgstation-server/security)
* [Insights](/tgstation/tgstation-server/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Ftgstation%2Ftgstation-server%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Ftgstation%2Ftgstation-server%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fix potentially sending DMAPI messages to the wrong channels after a TGS restart #1493

 Merged

[Cyberboss](/Cyberboss)
merged 42 commits into
[master](/tgstation/tgstation-server/tree/master "tgstation/tgstation-server:master")
from
[1490-FixChatReattach](/tgstation/tgstation-server/tree/1490-FixChatReattach "tgstation/tgstation-server:1490-FixChatReattach")

May 24, 2023

 Merged

# [Fix potentially sending DMAPI messages to the wrong channels after a TGS restart](#top) #1493

[Cyberboss](/Cyberboss)
merged 42 commits into
[master](/tgstation/tgstation-server/tree/master "tgstation/tgstation-server:master")
from
[1490-FixChatReattach](/tgstation/tgstation-server/tree/1490-FixChatReattach "tgstation/tgstation-server:1490-FixChatReattach")

May 24, 2023

[Conversation
2](/tgstation/tgstation-server/pull/1493)
[Commits
42](/tgstation/tgstation-server/pull/1493/commits)
[Checks
0](/tgstation/tgstation-server/pull/1493/checks)
[Files changed](/tgstation/tgstation-server/pull/1493/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=60&v=4)](/Cyberboss)

Copy link

Member

### @Cyberboss **[Cyberboss](/Cyberboss)** commented [May 20, 2023](#issue-1718320973) ‚Ä¢ edited Loading

üÜë

Fixed initial chat channel update not getting sent to the DMAPI after a TGS restart.

Removed the possibility for chat bot connections to slow down watchdog processing upon starting or restarting TGS.

Fixed chat bot disconnection errors being able to generate 500 responses.

Fixed a non-fatal error registering as a 500 error when updating or restarting.

Fixed race conditions related to updating deployment chat messages.

Fixed a memory leak when chat bots are deleted or disabled via the API.

Fixed a race condition relating to sending the initial watchdog chat message on instance auto-start or reattach.

/:cl:

üÜë DreamMaker API

The cache of chat channels will now be purged if the DMAPI detects a TGS detach.

üÜë

Fixes [#1490](https://github.com/tgstation/tgstation-server/issues/1490)

Merge with `[DMDeploy][TGSDeploy]`

Sorry, something went wrong.

All reactions

 [Cyberboss](/Cyberboss)
added 5 commits
[May 20, 2023 19:07](#commits-pushed-90593f4)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Clear DMAPI channels cache on TGS detach](/tgstation/tgstation-server/pull/1493/commits/90593f4fb25dd4840d349d242e25b422a4be6e4b "Clear DMAPI channels cache on TGS detach")`

`[90593f4](/tgstation/tgstation-server/pull/1493/commits/90593f4fb25dd4840d349d242e25b422a4be6e4b)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Update chat tracking contexts after reattaching](/tgstation/tgstation-server/pull/1493/commits/5967c178d412588f424d50cbbeafba6c4d8b738b "Update chat tracking contexts after reattaching

Fixes #1490")`
 ‚Ä¶

`[5967c17](/tgstation/tgstation-server/pull/1493/commits/5967c178d412588f424d50cbbeafba6c4d8b738b)`

```
Fixes [#1490](https://github.com/tgstation/tgstation-server/issues/1490)
```

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Fix a lint](/tgstation/tgstation-server/pull/1493/commits/ddc71308871f4737538a39a6e95bd15b9b5904c1 "Fix a lint")`

`[ddc7130](/tgstation/tgstation-server/pull/1493/commits/ddc71308871f4737538a39a6e95bd15b9b5904c1)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Regression tests for](/tgstation/tgstation-server/pull/1493/commits/1214cfbbfd9899b8a3fc53c7ac95defe5de31f5f "Regression tests for #1490") [#1490](https://github.com/tgstation/tgstation-server/issues/1490)`

`[1214cfb](/tgstation/tgstation-server/pull/1493/commits/1214cfbbfd9899b8a3fc53c7ac95defe5de31f5f)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Add a test assert](/tgstation/tgstation-server/pull/1493/commits/95443b42aaa5e15db1e09bbef05125c059443980 "Add a test assert")`

`[95443b4](/tgstation/tgstation-server/pull/1493/commits/95443b42aaa5e15db1e09bbef05125c059443980)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
added
[Fix](/tgstation/tgstation-server/labels/Fix)
Fixes incorrect functionality
[Area: DMAPI](/tgstation/tgstation-server/labels/Area%3A%20DMAPI)
Communication between TGS and DM
[Area: Chat](/tgstation/tgstation-server/labels/Area%3A%20Chat)
With regard to managing chat bots
[Area: Watchdog](/tgstation/tgstation-server/labels/Area%3A%20Watchdog)
With regard to managing DreamDaemon servers
[Component Issue](/tgstation/tgstation-server/labels/Component%20Issue)
Issue regarding the service components
labels
[May 20, 2023](#event-9295117847)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
added this to the [v5.12.2](/tgstation/tgstation-server/milestone/162) milestone
[May 20, 2023](#event-9295117856)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
enabled auto-merge
[May 20, 2023 23:47](#event-9295118123)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
previously approved these changes
[May 20, 2023](#pullrequestreview-1435456194)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files/95443b42aaa5e15db1e09bbef05125c059443980)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Version bump to 5.12.2](/tgstation/tgstation-server/pull/1493/commits/51eb8348aebe3aef69c0c4eec56afa1733703d59 "Version bump to 5.12.2")`

`[51eb834](/tgstation/tgstation-server/pull/1493/commits/51eb8348aebe3aef69c0c4eec56afa1733703d59)`

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
dismissed
[github-actions[bot]](/apps/github-actions)‚Äôs [stale review](#pullrequestreview-1435456194)
via
`[51eb834](/tgstation/tgstation-server/commit/51eb8348aebe3aef69c0c4eec56afa1733703d59)`
[May 21, 2023 00:17](#event-9295145006)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
disabled auto-merge
[May 21, 2023 00:17](#event-9295145193)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
enabled auto-merge
[May 21, 2023 00:18](#event-9295145505)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
previously approved these changes
[May 21, 2023](#pullrequestreview-1435458566)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files/51eb8348aebe3aef69c0c4eec56afa1733703d59)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
added
[Priority: CRITICAL](/tgstation/tgstation-server/labels/Priority%3A%20CRITICAL)
Alarm clock up. Fix immediately
[Security](/tgstation/tgstation-server/labels/Security)
Issue pertaining to Authentication/Authorization or NTC (Never Trust the Client)
labels
[May 21, 2023](#event-9295173695)

 [Cyberboss](/Cyberboss)
added 2 commits
[May 21, 2023 00:59](#commits-pushed-ee1d752)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Do not let chat message queuing hold up the watchdog](/tgstation/tgstation-server/pull/1493/commits/ee1d752f4dec2930c5006bb4fbc356c8329837a8 "Do not let chat message queuing hold up the watchdog")`

`[ee1d752](/tgstation/tgstation-server/pull/1493/commits/ee1d752f4dec2930c5006bb4fbc356c8329837a8)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Merge branch 'master' of](/tgstation/tgstation-server/pull/1493/commits/5a1d93ac7d0bb3a6ddaf777798ce8f183ec60bfd "Merge branch 'master' of https://github.com/tgstation/tgstation-server into 1490-FixChatReattach") <https://github.com/tgstation/tgstation-server> [‚Ä¶](/tgstation/tgstation-server/pull/1493/commits/5a1d93ac7d0bb3a6ddaf777798ce8f183ec60bfd "Merge branch 'master' of https://github.com/tgstation/tgstation-server into 1490-FixChatReattach")`
 ‚Ä¶

`[5a1d93a](/tgstation/tgstation-server/pull/1493/commits/5a1d93ac7d0bb3a6ddaf777798ce8f183ec60bfd)`

```
‚Ä¶into 1490-FixChatReattach
```

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
dismissed
[github-actions[bot]](/apps/github-actions)‚Äôs [stale review](#pullrequestreview-1435458566)
via
`[5a1d93a](/tgstation/tgstation-server/commit/5a1d93ac7d0bb3a6ddaf777798ce8f183ec60bfd)`
[May 21, 2023 04:59](#event-9295381093)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
approved these changes
[May 21, 2023](#pullrequestreview-1435472833)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files/5a1d93ac7d0bb3a6ddaf777798ce8f183ec60bfd)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
closed this
[May 21, 2023](#event-9295414702)

auto-merge was automatically disabled
[May 21, 2023 05:42](#event-9295414703)

Pull request was closed

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
reopened this
[May 21, 2023](#event-9295414743)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
previously approved these changes
[May 21, 2023](#pullrequestreview-1435475512)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files/5a1d93ac7d0bb3a6ddaf777798ce8f183ec60bfd)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
enabled auto-merge
[May 21, 2023 05:43](#event-9295414910)

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
dismissed
[github-actions[bot]](/apps/github-actions)‚Äôs [stale review](#pullrequestreview-1435475512)
via
`[4a7911c](/tgstation/tgstation-server/commit/4a7911c37ec53723a06d80a161daa41228cb47c3)`
[May 21, 2023 05:44](#event-9295415767)

51 hidden items

Load more‚Ä¶

 [Cyberboss](/Cyberboss)
added 4 commits
[May 23, 2023 02:54](#commits-pushed-60fbb6f)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Add an informative comment](/tgstation/tgstation-server/pull/1493/commits/60fbb6f9b4528319e30bce88a81d1307fc57b38f "Add an informative comment")`

`[60fbb6f](/tgstation/tgstation-server/pull/1493/commits/60fbb6f9b4528319e30bce88a81d1307fc57b38f)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Properly handle provider disconnect exceptions](/tgstation/tgstation-server/pull/1493/commits/e6003a7c3c90f7f24921ff6bc59c9837fee3cde8 "Properly handle provider disconnect exceptions")`

`[e6003a7](/tgstation/tgstation-server/pull/1493/commits/e6003a7c3c90f7f24921ff6bc59c9837fee3cde8)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Mock IChatProviders when testing without secrets](/tgstation/tgstation-server/pull/1493/commits/76b214d40e1ac7d57231ff4403a6631eac83aa51 "Mock `IChatProvider`s when testing without secrets")`

`[76b214d](/tgstation/tgstation-server/pull/1493/commits/76b214d40e1ac7d57231ff4403a6631eac83aa51)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Promotes a warning to an error](/tgstation/tgstation-server/pull/1493/commits/e0cd13917ff918bf81080a8db8bb55f0de579f68 "Promotes a warning to an error")`

`[e0cd139](/tgstation/tgstation-server/pull/1493/commits/e0cd13917ff918bf81080a8db8bb55f0de579f68)`

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
dismissed
[github-actions[bot]](/apps/github-actions)‚Äôs [stale review](#pullrequestreview-1435576429)
via
`[e0cd139](/tgstation/tgstation-server/commit/e0cd13917ff918bf81080a8db8bb55f0de579f68)`
[May 23, 2023 07:04](#event-9311909822)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
previously approved these changes
[May 23, 2023](#pullrequestreview-1438803436)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files/e0cd13917ff918bf81080a8db8bb55f0de579f68)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
added
[CI/CD](/tgstation/tgstation-server/labels/CI/CD)
IT'S NOT A PHASE MOM, IT'S A REAL SPECIALIZATION
[Regression Test](/tgstation/tgstation-server/labels/Regression%20Test)
We've seen this before, make sure it doesn't happen again
labels
[May 23, 2023](#event-9315130947)

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
dismissed
[github-actions[bot]](/apps/github-actions)‚Äôs [stale review](#pullrequestreview-1438803436)
via
`[265ad5c](/tgstation/tgstation-server/commit/265ad5c850fb16219d384066a5077c5a4b676e07)`
[May 23, 2023 11:59](#event-9315303167)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
previously approved these changes
[May 23, 2023](#pullrequestreview-1439499976)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
disabled auto-merge
[May 23, 2023 12:06](#event-9315380876)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
enabled auto-merge
[May 23, 2023 12:06](#event-9315383622)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=80&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)

Copy link

Member

Author

### **[Cyberboss](/Cyberboss)** commented [May 23, 2023](#issuecomment-1559159035)

| Yes, future me. `[DMDeploy][TGSDeploy]` is on the commit. |
| --- |

All reactions

Sorry, something went wrong.

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
dismissed
[github-actions[bot]](/apps/github-actions)‚Äôs [stale review](#pullrequestreview-1439499976)
via
`[6734ab6](/tgstation/tgstation-server/commit/6734ab6b0104eadfe504c63040455ce9ade17300)`
[May 23, 2023 12:22](#event-9315623510)

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
[force-pushed](/tgstation/tgstation-server/compare/265ad5c850fb16219d384066a5077c5a4b676e07..6734ab6b0104eadfe504c63040455ce9ade17300)
the
1490-FixChatReattach

branch
from
[`265ad5c`](/tgstation/tgstation-server/commit/265ad5c850fb16219d384066a5077c5a4b676e07) to
[`6734ab6`](/tgstation/tgstation-server/commit/6734ab6b0104eadfe504c63040455ce9ade17300)  [Compare](/tgstation/tgstation-server/compare/265ad5c850fb16219d384066a5077c5a4b676e07..6734ab6b0104eadfe504c63040455ce9ade17300)
[May 23, 2023 12:22](#event-9315623517)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
previously approved these changes
[May 23, 2023](#pullrequestreview-1439570714)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
mentioned this pull request
[May 23, 2023](#ref-issue-1722050783)

[There's an error logging catch handler in ChatManager.AddMessageTask that doesn't make an exception for OperationCanceledExceptions
#1498](/tgstation/tgstation-server/issues/1498)

Closed

 [Cyberboss](/Cyberboss)
added 2 commits
[May 23, 2023 17:54](#commits-pushed-6ac1850)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Assert valid connection strings in chat tests](/tgstation/tgstation-server/pull/1493/commits/6ac18508dab9af5d2ef99afe9f55a68f832ec9ad "Assert valid connection strings in chat tests")`

`[6ac1850](/tgstation/tgstation-server/pull/1493/commits/6ac18508dab9af5d2ef99afe9f55a68f832ec9ad)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Fixes](/tgstation/tgstation-server/pull/1493/commits/4cd7d57bd191ed145bf7c147ec4e7fe4b8cd9b8e "Fixes #1498") [#1498](https://github.com/tgstation/tgstation-server/issues/1498)`

`[4cd7d57](/tgstation/tgstation-server/pull/1493/commits/4cd7d57bd191ed145bf7c147ec4e7fe4b8cd9b8e)`

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
dismissed
[github-actions[bot]](/apps/github-actions)‚Äôs [stale review](#pullrequestreview-1439570714)
via
`[4cd7d57](/tgstation/tgstation-server/commit/4cd7d57bd191ed145bf7c147ec4e7fe4b8cd9b8e)`
[May 23, 2023 21:56](#event-9321068830)

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
[force-pushed](/tgstation/tgstation-server/compare/6734ab6b0104eadfe504c63040455ce9ade17300..4cd7d57bd191ed145bf7c147ec4e7fe4b8cd9b8e)
the
1490-FixChatReattach

branch
from
[`6734ab6`](/tgstation/tgstation-server/commit/6734ab6b0104eadfe504c63040455ce9ade17300) to
[`4cd7d57`](/tgstation/tgstation-server/commit/4cd7d57bd191ed145bf7c147ec4e7fe4b8cd9b8e)  [Compare](/tgstation/tgstation-server/compare/6734ab6b0104eadfe504c63040455ce9ade17300..4cd7d57bd191ed145bf7c147ec4e7fe4b8cd9b8e)
[May 23, 2023 21:56](#event-9321068835)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
previously approved these changes
[May 23, 2023](#pullrequestreview-1440620918)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files/4cd7d57bd191ed145bf7c147ec4e7fe4b8cd9b8e)

 [Cyberboss](/Cyberboss)
added 3 commits
[May 23, 2023 19:41](#commits-pushed-69b8d94)

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Fix a semi-colon](/tgstation/tgstation-server/pull/1493/commits/69b8d94ccdfaf4aa6d8095b5708478d74c760709 "Fix a semi-colon")`

`[69b8d94](/tgstation/tgstation-server/pull/1493/commits/69b8d94ccdfaf4aa6d8095b5708478d74c760709)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Fix errors when using real chat connection strings](/tgstation/tgstation-server/pull/1493/commits/fc3ce4caf75445ea5ffefa4f7b9d625a61470b6a "Fix errors when using real chat connection strings")`

`[fc3ce4c](/tgstation/tgstation-server/pull/1493/commits/fc3ce4caf75445ea5ffefa4f7b9d625a61470b6a)`

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)

`[Address race condition between enabling chat bots and their reconnect‚Ä¶](/tgstation/tgstation-server/pull/1493/commits/86f20a0a3cfe772b948328c61d1e51a46d611627 "Address race condition between enabling chat bots and their reconnect jobs appearing in Live test")`
 ‚Ä¶

`[86f20a0](/tgstation/tgstation-server/pull/1493/commits/86f20a0a3cfe772b948328c61d1e51a46d611627)`

```
‚Ä¶ jobs appearing in Live test
```

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
dismissed
[github-actions[bot]](/apps/github-actions)‚Äôs [stale review](#pullrequestreview-1440620918)
via
`[86f20a0](/tgstation/tgstation-server/commit/86f20a0a3cfe772b948328c61d1e51a46d611627)`
[May 24, 2023 00:20](#event-9321747718)

[![github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=60&v=4)](/apps/github-actions)

**[github-actions](/apps/github-actions)
bot**
approved these changes
[May 24, 2023](#pullrequestreview-1440763831)

 [View reviewed changes](/tgstation/tgstation-server/pull/1493/files/86f20a0a3cfe772b948328c61d1e51a46d611627)

[![@codecov](https://avatars.githubusercontent.com/in/254?s=80&v=4)](/apps/codecov)

Copy link

### **[codecov](/apps/codecov) bot** commented [May 24, 2023](#issuecomment-1560307691)

| [Codecov](https://app.codecov.io/gh/tgstation/tgstation-server/pull/1493?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=tgstation) Report Merging [#1493](https://app.codecov.io/gh/tgstation/tgstation-server/pull/1493?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=tgstation) ([86f20a0](https://github.com/tgstation/tgstation-server/commit/86f20a0a3cfe772b948328c61d1e51a46d611627)) into [master](https://app.codecov.io/gh/tgstation/tgstation-server/commit/294bbf8747d12642c54c59fa3bfce6c8146c555c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=tgstation) ([294bbf8](https://github.com/tgstation/tgstation-server/commit/294bbf8747d12642c54c59fa3bfce6c8146c555c)) will **decrease** coverage by `1.99%`. The diff coverage is `62.08%`.  ``` @@            Coverage Diff             @@ ##           master    #1493      +/-   ## ========================================== - Coverage   74.24%   72.25%   -1.99%      ==========================================   Files         355      355                 Lines       21576    21647      +71      ========================================== - Hits        16020    15642     -378      - Misses       5556     6005     +449      ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
merged commit [`7aa47f7`](/tgstation/tgstation-server/commit/7aa47f79ceb6d658a91420ea339dc46c8df75624)
into
master

[May 24, 2023](https://github.com/tgstation/tgstation-server/pull/1493#event-9321894462)

 [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&u=8242719707b38a242c33b03649cba1ca463c7024&v=4)](/Cyberboss)
[Cyberboss](/Cyberboss)
deleted the
1490-FixChatReattach

branch
[May 24, 2023 00:56](#event-9321894544)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Ftgstation%2Ftgstation-server%2Fpull%2F1493)

Reviewers

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions) [github-actions[bot]](/apps/github-actions)

github-actions[bot] approved these changes

Assignees

No one assigned

Labels

[Area: Chat](/tgstation/tgstation-server/labels/Area%3A%20Chat)
With regard to managing chat bots
[Area: DMAPI](/tgstation/tgstation-server/labels/Area%3A%20DMAPI)
Communication between TGS and DM
[Area: Watchdog](/tgstation/tgstation-server/labels/Area%3A%20Watchdog)
With regard to managing DreamDaemon servers
[CI/CD](/tgstation/tgstation-server/labels/CI/CD)
IT'S NOT A PHASE MOM, IT'S A REAL SPECIALIZATION
[Component Issue](/tgstation/tgstation-server/labels/Component%20Issue)
Issue regarding the service components
[Fix](/tgstation/tgstation-server/labels/Fix)
Fixes incorrect functionality
[Priority: CRITICAL](/tgstation/tgstation-server/labels/Priority%3A%20CRITICAL)
Alarm clock up. Fix immediately
[Regression Test](/tgstation/tgstation-server/labels/Regression%20Test)
We've seen this before, make sure it doesn't happen again

Projects

None yet

Milestone

 [**v5.12.2**](/tgstation/tgstation-server/milestone/162 "v5.12.2")

Development

Successfully merging this pull request may close these issues.

 [Instances needs to update chat tracking contexts after restarting and reattaching](https://github.com/tgstation/tgstation-server/issues/1490)

2 participants

[![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=52&v=4)](/Cyberboss) [![@tgstation-server](https://avatars.githubusercontent.com/u/12387510?s=52&v=4)](/tgstation-server)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_dbd63cd6_20250114_211757.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftgstation%2Ftgstation-server%2Fsecurity%2Fadvisories%2FGHSA-p2xj-w57r-6f5m)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftgstation%2Ftgstation-server%2Fsecurity%2Fadvisories%2FGHSA-p2xj-w57r-6f5m)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=tgstation%2Ftgstation-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tgstation](/tgstation)
/
**[tgstation-server](/tgstation/tgstation-server)**
Public

* [Notifications](/login?return_to=%2Ftgstation%2Ftgstation-server) You must be signed in to change notification settings
* [Fork
  82](/login?return_to=%2Ftgstation%2Ftgstation-server)
* [Star
   67](/login?return_to=%2Ftgstation%2Ftgstation-server)

* [Code](/tgstation/tgstation-server)
* [Issues
  54](/tgstation/tgstation-server/issues)
* [Pull requests
  6](/tgstation/tgstation-server/pulls)
* [Discussions](/tgstation/tgstation-server/discussions)
* [Actions](/tgstation/tgstation-server/actions)
* [Security](/tgstation/tgstation-server/security)
* [Insights](/tgstation/tgstation-server/pulse)

Additional navigation options

* [Code](/tgstation/tgstation-server)
* [Issues](/tgstation/tgstation-server/issues)
* [Pull requests](/tgstation/tgstation-server/pulls)
* [Discussions](/tgstation/tgstation-server/discussions)
* [Actions](/tgstation/tgstation-server/actions)
* [Security](/tgstation/tgstation-server/security)
* [Insights](/tgstation/tgstation-server/pulse)

# Incorrectly Specified Chat Message Destinations in tgstation-server and DreamMaker API

Moderate

[Cyberboss](/Cyberboss)
published
GHSA-p2xj-w57r-6f5m
May 24, 2023

## Package

DreamMaker API
(GitHub Releases)

## Affected versions

< 6.4.3

## Patched versions

6.4.4

tgstation-server
(GitHub Releases)

>= 4.0.0, < 5.12.2

5.12.2

## Description

### Impact

The DreamMaker API (DMAPI) chat channel cache can possibly be poisoned by a tgstation-server (TGS) restart and reattach. This can result in sending chat messages to one of any of the configured IRC or Discord channels for the instance on enabled chat bots. This lasts until the instance's chat channels are updated in TGS or DreamDaemon is restarted.

TGS chat commands are unaffected, custom or otherwise.

### Patches

[#1493](https://github.com/tgstation/tgstation-server/pull/1493)

### Workarounds for Affected Versions

One of:

* Avoid restarting TGS with an active watchdog on an instance with sensitive chat channels until updating to a patched version.
* Update your codebase to a patched DMAPI version, perform a deployment, and have a watchdog restart triggered. Do not make deployments that roll back this change without updating TGS to a patched version.
* Trigger a watchdog restart immediately after each time TGS is restarted with an active watchdog on an instance with sensitive chat channels.
* Disallow your DreamMaker code from sending sensitive messages, deploy the change, and have a watchdog restart triggered. Do not make deployments that roll back this change without updating the DMAPI or TGS to a patched version.
* Remove sensitive message enabled channels from active Chat Bots.
* Disable or delete chat bots with sensitive channels.

### Severity

Moderate

6.1

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
High

Privileges required
None

User interaction
Required

Scope
Changed

Confidentiality
High

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:H/PR:N/UI:R/S:C/C:H/I:N/A:N

### CVE ID

CVE-2023-33198

### Weaknesses

[CWE-941](/advisories?query=cwe%3A941)

### Credits

* [![@dragomagol](https://avatars.githubusercontent.com/u/66640614?s=40&v=4)](/dragomagol)
  [dragomagol](/dragomagol)
  Finder
* [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)](/Cyberboss)
  [Cyberboss](/Cyberboss)
  Remediation developer

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_113fa554_20250114_211756.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftgstation%2Ftgstation-server%2Freleases%2Ftag%2Ftgstation-server-v5.12.2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftgstation%2Ftgstation-server%2Freleases%2Ftag%2Ftgstation-server-v5.12.2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=tgstation%2Ftgstation-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tgstation](/tgstation)
/
**[tgstation-server](/tgstation/tgstation-server)**
Public

* [Notifications](/login?return_to=%2Ftgstation%2Ftgstation-server) You must be signed in to change notification settings
* [Fork
  82](/login?return_to=%2Ftgstation%2Ftgstation-server)
* [Star
   67](/login?return_to=%2Ftgstation%2Ftgstation-server)

* [Code](/tgstation/tgstation-server/tree/tgstation-server-v5.12.2)
* [Issues
  54](/tgstation/tgstation-server/issues)
* [Pull requests
  6](/tgstation/tgstation-server/pulls)
* [Discussions](/tgstation/tgstation-server/discussions)
* [Actions](/tgstation/tgstation-server/actions)
* [Security](/tgstation/tgstation-server/security)
* [Insights](/tgstation/tgstation-server/pulse)

Additional navigation options

* [Code](/tgstation/tgstation-server/tree/tgstation-server-v5.12.2)
* [Issues](/tgstation/tgstation-server/issues)
* [Pull requests](/tgstation/tgstation-server/pulls)
* [Discussions](/tgstation/tgstation-server/discussions)
* [Actions](/tgstation/tgstation-server/actions)
* [Security](/tgstation/tgstation-server/security)
* [Insights](/tgstation/tgstation-server/pulse)

1. [Releases](/tgstation/tgstation-server/releases)
2. [tgstation-server-v5.12.2](/tgstation/tgstation-server/releases/tag/tgstation-server-v5.12.2)

# tgstation-server-v5.12.2

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/tgstation/tgstation-server/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...tgstation-server-v5.12.2)

 Loading

[View all tags](/tgstation/tgstation-server/tags)

![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=40&v=4)
[Cyberboss](/Cyberboss)
released this
24 May 02:00

[tgstation-server-v5.12.2](/tgstation/tgstation-server/tree/tgstation-server-v5.12.2)

[`7aa47f7`](/tgstation/tgstation-server/commit/7aa47f79ceb6d658a91420ea339dc46c8df75624)

This commit was created on GitHub.com and signed with GitHub‚Äôs **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

Please refer to the [README](https://github.com/tgstation/tgstation-server#setup) for setup instructions.

#### Component Versions

Core: 5.12.2

Configuration: 4.6.0

HTTP API: 9.10.2

DreamMaker API: 6.4.4 (Interop: 5.6.0)

[Web Control Panel](https://github.com/tgstation/tgstation-server-webpanel): 4.20.0

Host Watchdog: 1.2.2

## [Patch 2](https://github.com/tgstation/tgstation-server/milestone/162?closed=1)

#### Core

* Fixed initial chat channel update not getting sent to the DMAPI after a TGS restart. ([#1493](https://github.com/tgstation/tgstation-server/pull/1493) [@Cyberboss](https://github.com/Cyberboss))
* Removed the possibility for chat bot connections to slow down watchdog processing upon starting or restarting TGS. ([#1493](https://github.com/tgstation/tgstation-server/pull/1493) [@Cyberboss](https://github.com/Cyberboss))
* Fixed chat bot disconnection errors being able to generate 500 responses. ([#1493](https://github.com/tgstation/tgstation-server/pull/1493) [@Cyberboss](https://github.com/Cyberboss))
* Fixed a non-fatal error registering as a 500 error when updating or restarting. ([#1493](https://github.com/tgstation/tgstation-server/pull/1493) [@Cyberboss](https://github.com/Cyberboss))
* Fixed race conditions related to updating deployment chat messages. ([#1493](https://github.com/tgstation/tgstation-server/pull/1493) [@Cyberboss](https://github.com/Cyberboss))
* Fixed a memory leak when chat bots are deleted or disabled via the API. ([#1493](https://github.com/tgstation/tgstation-server/pull/1493) [@Cyberboss](https://github.com/Cyberboss))
* Fixed a race condition relating to sending the initial watchdog chat message on instance auto-start or reattach. ([#1493](https://github.com/tgstation/tgstation-server/pull/1493) [@Cyberboss](https://github.com/Cyberboss))

## [Patch 1](https://github.com/tgstation/tgstation-server/milestone/160?closed=1)

#### Core

* Upgraded git backend and removed libssl dependency on Linux. Please report any git related issues. ([#1485](https://github.com/tgstation/tgstation-server/pull/1485) [@Cyberboss](https://github.com/Cyberboss))
* Fixed an erroneous debug log when upgrading TGS. ([#1485](https://github.com/tgstation/tgstation-server/pull/1485) [@Cyberboss](https://github.com/Cyberboss))
* The server configured `GitHubAccessToken` will now be used to authenticate downloads of the server update package if it is present. ([#1485](https://github.com/tgstation/tgstation-server/pull/1485) [@Cyberboss](https://github.com/Cyberboss))
* Accounted for GitHub server time drift when generating the Retry-After header in HTTP 429 responses. ([#1475](https://github.com/tgstation/tgstation-server/pull/1475) [@Cyberboss](https://github.com/Cyberboss))
* Fixed an exception that can occur when performing repository jobs while using a Postgres database. ([#1482](https://github.com/tgstation/tgstation-server/pull/1482) [@Cyberboss](https://github.com/Cyberboss))

#### DreamMaker API

* Added some missing events. ([#1485](https://github.com/tgstation/tgstation-server/pull/1485) [@Cyberboss](https://github.com/Cyberboss))
* Downgraded V3 TgsRevision() error to a warning. ([#1485](https://github.com/tgstation/tgstation-server/pull/1485) [@Cyberboss](https://github.com/Cyberboss))

#### HTTP API

* Fixed exploit allowing for the reading of chat bot connection strings. ([#1487](https://github.com/tgstation/tgstation-server/pull/1487) [@MrStonedOne](https://github.com/MrStonedOne))

# [Update 12.X](https://github.com/tgstation/tgstation-server/milestone/159?closed=1)

#### **Configuration**

* **The new config version is 4.6.0.** ([#1461](https://github.com/tgstation/tgstation-server/pull/1461) [@Cyberboss](https://github.com/Cyberboss))
* Added `General:DeploymentDirectoryCopyTasksPerCore` to allow operators to manually adjust the rate at which asynchronous file copies are performed on instances. Too few can significantly increase deployment times, too many can make TGS unresponsive and slowdown other I/O operations on the machine. Leaving this unset disables the throttle entirely. **Note that this is the default for upgraded TGS installations. Server operators should highly consider setting the throttle.** The default value for new installations is `100`. ([#1462](https://github.com/tgstation/tgstation-server/pull/1462) [@Cyberboss](https://github.com/Cyberboss))
* Added `Swarm:UpdateRequiredNodeCount` option. This is the number of additional nodes a swarm controller expects to be present for an update. ([#1461](https://github.com/tgstation/tgstation-server/pull/1461) [@Cyberboss](https://github.com/Cyberboss))

#### Core

* Fixed the web server not starting until the instance manager was initialized. ([#1463](https://github.com/tgstation/tgstation-server/pull/1463) [@Cyberboss](https://github.com/Cyberboss))
* Fixed a race condition that caused BYOND installation jobs to be executed in the context of the HTTP request that started them, resulting in long response times. ([#1463](https://github.com/tgstation/tgstation-server/pull/1463) [@Cyberboss](https://github.com/Cyberboss))
* Fixed modifying the system user's BYOND configuration having a race condition across instances. ([#1463](https://github.com/tgstation/tgstation-server/pull/1463) [@Cyberboss](https://github.com/Cyberboss))
* Reduced surface area for potential failure in distributed swarm server updates. ([#1461](https://github.com/tgstation/tgstation-server/pull/1461) [@Cyberboss](https://github.com/Cyberboss))
* Fixed potential deadlock if a swarm controller abandons a node that is waiting to commit an update. ([#1461](https://github.com/tgstation/tgstation-server/pull/1461) [@Cyberboss](https://github.com/Cyberboss))

#### HTTP API

* Added the ability to delete non-active BYOND installations with DELETE /Byond and the new `ByondVersionDeleteRequest` model. This endpoint returns an HTTP 202 job for the deletion process, HTTP 409 if the version is the active version, or HTTP 410 if the version is not installed. ([#1463](https://github.com/tgstation/tgstation-server/pull/1463) [@Cyberboss](https://github.com/Cyberboss))
* Added ErrorCode 36 for if an attempt is made to delete the active BYOND version. ([#1463](https://github.com/tgstation/tgstation-server/pull/1463) [@Cyberboss](https://github.com/Cyberboss))
* Added error code 28 for if an update can't start due to a server swarm not being fully populated (responds with HTTP 424) . ([#1461](https://github.com/tgstation/tgstation-server/pull/1461) [@Cyberboss](https://github.com/Cyberboss))

#### Web Control Panel

* Updated to version 4.20.0, adding BYOND install deletion support. ([@Cyberboss](https://github.com/Cyberboss))

### Contributors

* [![@MrStonedOne](https://avatars.githubusercontent.com/u/7069733?s=64&v=4)](https://github.com/MrStonedOne)
* [![@Cyberboss](https://avatars.githubusercontent.com/u/8171642?s=64&v=4)](https://github.com/Cyberboss)

MrStonedOne and Cyberboss

 Assets
7

 Loading

All reactions

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


