=== Content from github.com_d7edacf8_20250115_112952.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxibosignage%2Fxibo-cms%2Fsecurity%2Fadvisories%2FGHSA-jj27-x85q-crqv)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxibosignage%2Fxibo-cms%2Fsecurity%2Fadvisories%2FGHSA-jj27-x85q-crqv)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=xibosignage%2Fxibo-cms)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[xibosignage](/xibosignage)
/
**[xibo-cms](/xibosignage/xibo-cms)**
Public

* [Notifications](/login?return_to=%2Fxibosignage%2Fxibo-cms) You must be signed in to change notification settings
* [Fork
  286](/login?return_to=%2Fxibosignage%2Fxibo-cms)
* [Star
   394](/login?return_to=%2Fxibosignage%2Fxibo-cms)

* [Code](/xibosignage/xibo-cms)
* [Pull requests
  6](/xibosignage/xibo-cms/pulls)
* [Actions](/xibosignage/xibo-cms/actions)
* [Security](/xibosignage/xibo-cms/security)
* [Insights](/xibosignage/xibo-cms/pulse)

Additional navigation options

* [Code](/xibosignage/xibo-cms)
* [Pull requests](/xibosignage/xibo-cms/pulls)
* [Actions](/xibosignage/xibo-cms/actions)
* [Security](/xibosignage/xibo-cms/security)
* [Insights](/xibosignage/xibo-cms/pulse)

# Remote Code Execution through Zip Slip in Xibo CMS

High

[alexharrington](/alexharrington)
published
GHSA-jj27-x85q-crqv
May 30, 2023

## Package

composer

xibosignage/xibo-cms
([Composer](/advisories?query=ecosystem%3Acomposer))

## Affected versions

>= 1.8.0, < 2.3.17
>= 3.0.0, < 3.3.5

## Patched versions

2.3.17
3.3.5

## Description

### Impact

A path traversal vulnerability exists in the Xibo CMS whereby a specially crafted zip file can be uploaded to the CMS via the layout import function by an authenticated user which would allow creation of files outside of the CMS library directory as the webserver user. This can be used to upload a PHP webshell inside the web root directory and achieve remote code execution as the webserver user.

### Patches

Users should upgrade to version 2.3.17 or 3.3.5 which fix this issue. Customers who host their CMS with Xibo Signage have already received an upgrade or patch to resolve this issue regardless of the CMS version that they are running.

### Workarounds

Patches are available for earlier versions of Xibo CMS that are out of security support:

[1.8.13](https://github.com/xibosignage/xibo-cms/commit/55d0b192c2b2f90cfb3d7fdaf76a425bec2b0cbf.diff)

[2.0.6](https://github.com/dasgarner/xibo-cms/commit/493b7d4cdf09e8991d4bd1bd45bc3979adf0d079.diff)

[2.1.3](https://github.com/dasgarner/xibo-cms/commit/fe096b9857b992cdf82676a2d8cd86902e624439.diff)

We do however advise upgrading to a supported version.

### References

[Xibo Signage Security Advisory](https://xibosignage.com/blog/security-advisory-2023-05/)

[Claroty Team82 Disclosure](https://claroty.com/team82/disclosure-dashboard)

### Credit

Thanks to Noam Moshe of Claroty Research who discovered this issue.

### Severity

High

8.8

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
High

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H

### CVE ID

CVE-2023-33177

### Weaknesses

[CWE-22](/advisories?query=cwe%3A22)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from claroty.com_30d5350e_20250114_184023.html ===

[![Team82 Logo](https://claroty.com/build/assets/team82-logo-white-BGiCQ9zb.svg)](/team82)

* [Research](/team82/research)
* [Vulnerability Dashboard](/team82/disclosure-dashboard)
* [Talks](/team82/talks)
* [Tools](/team82/#tools)
* [About](/team82/#about)

[![Claroty](https://claroty.com/build/assets/logo-solid-white-DcRiqKcD.svg)](/)

# Team82 Vulnerability Disclosure Dashboard

Track all vulnerabilities disclosed by Team82, the industry’s best cybersecurity vulnerability and threat research team. Team82 finds software and firmware vulnerabilities in cyber-physical systems before threat actors can exploit them.

[Subscribe to RSS](/team82/disclosure-dashboard/feed)

All Threats (644)
Critical (118)
High (342)
Medium (169)
Low (7)

All Threats
644

Critical
118

High
342

Medium
169

Low
7

| Publication Date | CVE ID | Vendor | Product | Details |
| --- | --- | --- | --- | --- |
| Date 12-18-2024 | CVE ID CVE-2024-12373 | Vendor Rockwell Automation | Product PowerMonitor 1000 Remote | [See Details](/team82/disclosure-dashboard/cve-2024-12373) |
| Date 12-18-2024 | CVE ID CVE-2024-12372 | Vendor Rockwell Automation | Product PowerMonitor 1000 Remote | [See Details](/team82/disclosure-dashboard/cve-2024-12372) |
| Date 12-18-2024 | CVE ID CVE-2024-12371 | Vendor Rockwell Automation | Product PowerMonitor 1000 Remote | [See Details](/team82/disclosure-dashboard/cve-2024-12371) |
| Date 12-05-2024 | CVE ID CVE-2024-52558 | Vendor Planet Technology | Product Planet WGS-804HPT | [See Details](/team82/disclosure-dashboard/cve-2024-52558) |
| Date 12-05-2024 | CVE ID CVE-2024-52320 | Vendor Planet Technology | Product Planet WGS-804HPT | [See Details](/team82/disclosure-dashboard/cve-2024-52320) |
| Date 12-05-2024 | CVE ID CVE-2024-48871 | Vendor Planet Technology | Product Planet WGS-804HPT | [See Details](/team82/disclosure-dashboard/cve-2024-48871) |
| Date 12-04-2024 | CVE ID CVE-2024-42494 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-42494) |
| Date 12-04-2024 | CVE ID CVE-2024-45722 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-45722) |
| Date 12-04-2024 | CVE ID CVE-2024-46874 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-46874) |
| Date 12-04-2024 | CVE ID CVE-2024-47043 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-47043) |
| Date 12-04-2024 | CVE ID CVE-2024-47146 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-47146) |
| Date 12-04-2024 | CVE ID CVE-2024-47547 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-47547) |
| Date 12-04-2024 | CVE ID CVE-2024-47791 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-47791) |
| Date 12-04-2024 | CVE ID CVE-2024-48874 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-48874) |
| Date 12-04-2024 | CVE ID CVE-2024-51727 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-51727) |
| Date 12-04-2024 | CVE ID CVE-2024-52324 | Vendor Ruijie | Product Ruijie Reyee OS | [See Details](/team82/disclosure-dashboard/cve-2024-52324) |
| Date 11-14-2024 | CVE ID CVE-2024-47255 | Vendor 2N | Product Access Commander | [See Details](/team82/disclosure-dashboard/cve-2024-47255) |
| Date 11-14-2024 | CVE ID CVE-2024-47254 | Vendor 2N | Product Access Commander | [See Details](/team82/disclosure-dashboard/cve-2024-47254) |
| Date 11-14-2024 | CVE ID CVE-2024-47253 | Vendor 2N | Product Access Commander | [See Details](/team82/disclosure-dashboard/cve-2024-47253) |
| Date 11-12-2024 | CVE ID CVE-2024-50380 | Vendor OvrC | Product OvrC Cloud | [See Details](/team82/disclosure-dashboard/cve-2024-50380) |
| Date 11-12-2024 | CVE ID CVE-2024-50381 | Vendor OvrC | Product OvrC Cloud | [See Details](/team82/disclosure-dashboard/cve-2024-50381) |
| Date 10-18-2024 | CVE ID CVE-2024-47142 | Vendor Aiphone | Product IX System, IXG System | [See Details](/team82/disclosure-dashboard/cve-2024-47142) |
| Date 10-18-2024 | CVE ID CVE-2024-45837 | Vendor Aiphone | Product IX System, IXG System | [See Details](/team82/disclosure-dashboard/cve-2024-45837) |
| Date 10-18-2024 | CVE ID CVE-2024-39290 | Vendor Aiphone | Product IX System, IXG System | [See Details](/team82/disclosure-dashboard/cve-2024-39290) |
| Date 10-18-2024 | CVE ID CVE-2024-31408 | Vendor Aiphone | Product IX System, IXG System | [See Details](/team82/disclosure-dashboard/cve-2024-31408) |

Next

1

2

3

4

5

6

7

8

9

10

...
25

26

Next

---

### Disclosure Policy

Team82 is committed to privately reporting vulnerabilities to affected vendors in a coordinated, timely manner in order to ensure the safety of the cybersecurity ecosystem worldwide. To engage with the vendor and research community, Team82 invites you to download and share our Coordinated Disclosure Policy. Team82 will adhere to this reporting and disclosure process when we discover vulnerabilities in products and services.

[Download](https://web-assets.claroty.com/team82-disclosure-policy.pdf)

### Public Email & PGP Key

Team82 has also made its public PGP Key available for the vendor and research community to securely and safely exchange vulnerability and research information with us.

[See PGP Key](/team82/pgp-key)

Solutions

* [Claroty xDome Platform](/platform)
* [Industrial Cybersecurity](/industrial-cybersecurity)
* [Healthcare Cybersecurity](/healthcare-cybersecurity)
* [Commercial Cybersecurity](/commercial-cybersecurity)
* [Public Sector Cybersecurity](/public-sector-cybersecurity)

Threat Research

* [Team82 Home](/team82)
* [Vulnerability Disclosure Dashboard](/team82/disclosure-dashboard)
* [Research](/team82/research)
* [PGP Key](/team82/pgp-key)

Partners

* [Partners](/partners)
* [Technology Alliance Partners](/partners/technology-alliances)
* [Channel Partners](/partners/channel-partners)
* [Managed Security Service Providers](/partners/channel-partners/managed-security-service-providers)
* [Become a Partner](https://portal.claroty.com/English/register_email.aspx)
* [Partner Login](https://portal.claroty.com/)

Resources

* [Resource Library](/resources)
* [Blog](/blog)
* [White Papers](/resources/white-papers)
* [Reports](/resources/reports)
* [Case Studies](/resources/case-studies)
* [Datasheets](/resources/datasheets)
* [Integration Briefs](/resources/integration-briefs)
* [Podcasts](https://nexusconnect.io/podcasts)
* [Videos](/resources/videos)

Company

* [About Us](/company)
* [Careers](/careers)
* [Leadership](/leadership)
* [Newsroom](/newsroom)
* [Trust Center](/trust)
* [Customer Experience](/customer-experience)
* [Events](/event-listing)
* [Contact Us](/contact-us)

[![Claroty](https://claroty.com/build/assets/logo-white-VeF9EwMy.svg)](/)

© 2025 Claroty. All rights reserved.

[LinkedIn](https://www.linkedin.com/company/claroty/)
[Twitter](https://twitter.com/claroty)
[YouTube](https://www.youtube.com/%40claroty20)
[Facebook](https://www.facebook.com/ClarotyOT/)

[Terms & Conditions](/terms-conditions)
/
[Privacy Policy](/privacy-policy)

![Claroty](https://claroty.com/build/assets/logo-white-VeF9EwMy.svg)

Close Menu

* [Platform](/platform)

  [The Claroty Platform](/platform)
  [Asset Inventory](/platform/asset-inventory)
  [Exposure Management](/platform/exposure-management)
  [Network Protection](/platform/network-protection)
  [Secure Access](/platform/secure-access)
  [Threat Detection](/platform/threat-detection)
  [Operational Efficiency](/platform/operational-efficiency)
* [Industrial](/industrial-cybersecurity)

  [Industrial Home](/industrial-cybersecurity)
  [Claroty xDome](/industrial-cybersecurity/xdome)
  [Claroty xDome Secure Access](/industrial-cybersecurity/xdome-secure-access)
  [Claroty Continuous Threat Detection (CTD)](/industrial-cybersecurity/ctd)
  [Cyber Resilience](/industrial-cybersecurity/cyber-resilience)
  [Operational Resilience](/industrial-cybersecurity/operational-resilience)
* [Healthcare](/healthcare-cybersecurity)

  [Healthcare Home](/healthcare-cybersecurity)
  [Claroty xDome](/healthcare-cybersecurity/xdome-for-healthcare)
  [Healthcare Secure Access](/healthcare-cybersecurity/secure-access)
  [Cyber Resilience](/healthcare-cybersecurity/cyber-resilience)
  [Operational Resilience](/healthcare-cybersecurity/operational-resilience)
* [Commercial](/commercial-cybersecurity)

  [Commercial Home](/commercial-cybersecurity)
  [Claroty xDome](/commercial-cybersecurity/xdome)
  [Claroty xDome Secure Access](/commercial-cybersecurity/xdome-secure-access)
  [Claroty Continuous Threat Detection (CTD)](/commercial-cybersecurity/ctd)
  [Cyber Resilience](/commercial-cybersecurity/cyber-resilience)
  [Operational Resilience](/commercial-cybersecurity/operational-resilience)
* [Public Sector](/public-sector-cybersecurity)

  [Public Sector Home](/public-sector-cybersecurity)
  [U.S. Federal Government](/public-sector-cybersecurity/us-government-cybersecurity)
  [State, Local, Tribal, and Territorial (SLTT)](/public-sector-cybersecurity/sltt-government-cybersecurity)
  [National and International Government](/public-sector-cybersecurity/national-and-international-government-cybersecurity)
  [Government Regulatory & Policy Compliance](/public-sector-cybersecurity/enabling-government-regulatory-and-policy-compliance)
  [The Federal Team](/public-sector-cybersecurity/us-government-cybersecurity/the-team)
* [Threat Research](/team82)

  [Team82 Home](/team82)
  [Threat Intelligence](/threat-intelligence)
  [Vulnerability Disclosure Dashboard](/team82/disclosure-dashboard)
  [Research](/team82/research)
  [Talks](/team82/talks)
  [PGP Key](/team82/pgp-key)
* [Partners](/partners)

  [Partners](/partners)
  [Technology Alliance Partners](/partners/technology-alliances)
  [Channel Partners](/partners/channel-partners)
  [Managed Security Service Providers (MSSP)](/partners/channel-partners/managed-security-service-providers)
  [Become a Partner](https://portal.claroty.com/English/register_email.aspx)
  [Partner Login](https://portal.claroty.com/English/)
* [Resources](/resources)

  [Blog](/blog)
  [Reports](/resources/reports)
  [White Papers](/resources/white-papers)
  [Datasheets & Solution Overviews](/resources/datasheets)
  [Integration Briefs](/resources/integration-briefs)
  [Case Studies](/resources/case-studies)
  [On-Demand Webinars](/resources/webinars)
  [Podcasts](https://nexusconnect.io/podcasts)
* [Company](/company)

  [About Us](/company)
  [Careers](/careers)
  [Leadership](/leadership)
  [Newsroom](/newsroom)
  [Trust Center](/trust)
  [Events](/event-listing)
  [Contact Us](/contact-us)
* [Search](/search)

[LinkedIn](https://www.linkedin.com/company/claroty/)
[Twitter](https://twitter.com/claroty)
[YouTube](https://www.youtube.com/%40claroty20)
[Facebook](https://www.facebook.com/ClarotyOT/)

![](https://ws.zoominfo.com/pixel/jilEnH5CqVK0j3M3GHR5)


=== Content from xibosignage.com_6dae542e_20250114_184033.html ===


[![Xibo Logo](/dist/img/header-logo.svg)](/)
[![Xibo Logo](/dist/img/header-logo.svg)](/)

* [Open Source](/open-source)
* [Pricing](/pricing)
  + [Pricing](/pricing)
  + [Free Trial](/free-trial)
* Solutions
  + [Content Management System](/cms)
  + [Xibo Cloud Hosting](/hosting)
  + [Xibo for Android](/xibo-for-android)
  + [Xibo for Linux](/xibo-for-linux)
  + [Xibo for Tizen](/xibo-for-tizen)
  + [Xibo for webOS](/xibo-for-webos)
  + [Xibo for Windows](/xibo-for-windows)
  + [Hardware](/hardware)
  + [Advertising](/advertising)
  + [Audience Reporting](/audience-reporting)
  + [Professional Services](/services)
* Industries
  + [Hospitality](/hospitality)
  + [Retail](/retail)
  + [Education](/education)
  + [Healthcare](/healthcare)
  + [Corporate](/corporate)
  + [Transport](/transport)
  + [Out of Home](/ooh)
* Resources
  + [Case Studies](/case-studies)
  + [Documentation](/docs)
  + [Features](/features)
  + [Help / FAQs](/help)
  + [Downloads](/downloads)
  + [About](/about-us)
  + [Training](/training)
* [Blog](/blog)
* [Partners](/become-a-partner)

pending changes

[Login](/login)
[Free Trial](/free-trial)

![Close](/dist/img/menu-close.svg)

pending changes

[Login](/login)
[Get your free trial](/free-trial)
![Search](/dist/img/header-search.svg)

![Search](/dist/img/header-search.svg)

![Search Close](/dist/img/search-close.svg)

[Back](/blog)

![Feature image](/img/blog/features/d6338f19-c54a-482a-9013-3687e153eef5_CMS-Blog-Banner.png-1.png)
# Security Advisory - 5 issues affecting the CMS

* Dan
* 30 May 23

Share

We recommend everyone upgrade to 2.3.17 or 3.3.5 as soon as possible. All affected CMS instances on our Cloud platform have been fully patched. For further information on each advisory please see the CVE link below.

Thanks to Noam Moshe of Claroty Research - Team82 for responsibly disclosing these vulnerabilities and allowing us time to release 2.3.17/3.3.5.

Issue #1 - Path Traversal and RCE
It is possible for a logged in user of the CMS to upload a specially constructed ZIP file which will place malicious files on the web server and achieve remote code execution.
Versions affected: **1.8.0 and later. Fixed in 2.3.17 and 3.3.5**

The configuration of our Cloud platform makes this exploit significantly harder or potentially impossible to exploit.

[CVE-2023-33177](https://github.com/xibosignage/xibo-cms/security/advisories/GHSA-jj27-x85q-crqv)

Issue #2 - SQL Injection
It is possible for a logged in user of the CMS to use SQL injection to pull sensitive information from the database.
Versions affected: **1.4.0 and later. Fixed in 2.3.17 and 3.3.5**

[CVE-2023-33178](https://github.com/xibosignage/xibo-cms/security/advisories/GHSA-g9x2-757j-hmhh)

Issue #3 - SQL Injection
It is possible for a logged in user of the CMS to use SQL injection to pull sensitive information from the database.
Versions affected: **3.2.0 and later. Fixed in 3.3.5**

[CVE-2023-33179](https://github.com/xibosignage/xibo-cms/security/advisories/GHSA-jmx8-cgm4-7mf5)

Issue #4 - SQL Injection
It is possible for a logged in user of the CMS to use SQL injection to pull sensitive information from the database.
Versions affected: **3.2.0 and later. Fixed in 3.3.5**

[CVE-2023-33180](https://github.com/xibosignage/xibo-cms/security/advisories/GHSA-7ww5-x9rm-qm89)

Issue #5 - Exposed Stack Trace
Information related to the directory structure on the server was output in an error message.
Versions affected: **3.0.0 and later. Fixed in 3.3.5**

[CVE-2023-33181](https://github.com/xibosignage/xibo-cms/security/advisories/GHSA-c9cx-ghwr-x58m)

## More

Read more from the blog

[![View Post](/img/blog/features/8b85b5d3-d9ed-4c57-9936-c3e2c9cc063f_Android-Blog-Banner.png)](/blog/xibo-for-android-v4-r406)

#### [Xibo for Android v4 R406](/blog/xibo-for-android-v4-r406)

We are pleased to announce Xibo for Android v4 R405. This release fixes 2 issues.

[![View Post](/dist/img/btn-arrow-right.svg)](/blog/xibo-for-android-v4-r406)

[![View Post](/img/blog/features/3acedf1c-2cc4-4ce1-868a-609ae416ed67_Windows-Blog-Banner.png)](/blog/xibo-for-windows-v4-r404)

#### [Xibo for Windows v4 R404](/blog/xibo-for-windows-v4-r404)

We are pleased to announce Xibo for Windows v4 R404. This release fixes 2 issues.

[![View Post](/dist/img/btn-arrow-right.svg)](/blog/xibo-for-windows-v4-r404)

[![View Post](/img/blog/features/24279f5a-6390-41a6-80a1-79cd86f0475c_Advertise-Here---2-.png)](/blog/top-7-retail-digital-signage-trends-in-2025)

#### [Top 7 Retail Digital Signage Trends in 2025](/blog/top-7-retail-digital-signage-trends-in-2025)

Learn more about 2025âs retail digital signage trends. Whether retail media networks or AI-driven retail media planning, the upcoming year has a lot in store for retailers.

[![View Post](/dist/img/btn-arrow-right.svg)](/blog/top-7-retail-digital-signage-trends-in-2025)

## More

Read more from the blog

[![View Post](/img/blog/features/8b85b5d3-d9ed-4c57-9936-c3e2c9cc063f_Android-Blog-Banner.png)](/blog/xibo-for-android-v4-r406)

#### [Xibo for Android v4 R406](/blog/xibo-for-android-v4-r406)

We are pleased to announce Xibo for Android v4 R405. This release fixes 2 issues.

[![View Post](/dist/img/btn-arrow-right.svg)](/blog/xibo-for-android-v4-r406)

[![View Post](/img/blog/features/3acedf1c-2cc4-4ce1-868a-609ae416ed67_Windows-Blog-Banner.png)](/blog/xibo-for-windows-v4-r404)

#### [Xibo for Windows v4 R404](/blog/xibo-for-windows-v4-r404)

We are pleased to announce Xibo for Windows v4 R404. This release fixes 2 issues.

[![View Post](/dist/img/btn-arrow-right.svg)](/blog/xibo-for-windows-v4-r404)

[![View Post](/img/blog/features/24279f5a-6390-41a6-80a1-79cd86f0475c_Advertise-Here---2-.png)](/blog/top-7-retail-digital-signage-trends-in-2025)

#### [Top 7 Retail Digital Signage Trends in 2025](/blog/top-7-retail-digital-signage-trends-in-2025)

Learn more about 2025âs retail digital signage trends. Whether retail media networks or AI-driven retail media planning, the upcoming year has a lot in store for retailers.

[![View Post](/dist/img/btn-arrow-right.svg)](/blog/top-7-retail-digital-signage-trends-in-2025)

[![Xibo Logo](/dist/img/footer-logo.svg)](/)

#### Solutions

* [Free Trial](/free-trial)
* [Content Management System](/cms)
* [Xibo Cloud Hosting](/hosting)
* [Xibo for Android](/xibo-for-android)
* [Xibo for Linux](/xibo-for-linux)
* [Xibo for Tizen](/xibo-for-tizen)
* [Xibo for webOS](/xibo-for-webos)
* [Xibo for Windows](/xibo-for-windows)
* [Advertising](/advertising)
* [Hardware](/hardware)
* [Professional Services](/services)
* [Pricing](/pricing)
* [Feature list](/features)

#### Help & Resources

* [Help / FAQs](/help)
* [User Manual](/manual/en/)
* [Downloads](/downloads)
* [Knowledge Base](https://community.xibo.org.uk/c/kb)
* [Community](https://community.xibo.org.uk)
* [My Account](/login)
* [Blog](/blog)
* [Case Studies](/case-studies)
* [Service Status](https://xibosignage.github.io/status-page/)
* [Training](/training)
* [Contact Us](/contact)

#### Company

* [About us](/about-us)
* [Become a partner](/become-a-partner)
* [Terms](/terms)
* [EULA](/eula)
* [Privacy Policy](/privacy)
* [Data Processing Agreement](/dpa)

Â©  [Xibo Signage](https://xibosignage.com)&nbsp2025 |
Xibo Signage Ltd, Curtis House, 34 Third Avenue, Hove, England, BN3 2PD |
Company number: 07811749 |
VAT number: GB201808739

Xibo Signage Netherlands BV, Blaak 520, 3011TA, Rotterdam, Netherlands |
Kvk: 80891101 |
VAT number: NL861840586B01

##### Search Results

![Xibo Logo](/dist/img/header-logo.svg)
![Close](/dist/img/signup-close.svg)



=== Content from github.com_baf6d072_20250114_184026.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxibosignage%2Fxibo-cms%2Fcommit%2F45c6b53c3978639db03b63270a56f4397f49b2c9)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxibosignage%2Fxibo-cms%2Fcommit%2F45c6b53c3978639db03b63270a56f4397f49b2c9)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=xibosignage%2Fxibo-cms)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[xibosignage](/xibosignage)
/
**[xibo-cms](/xibosignage/xibo-cms)**
Public

* [Notifications](/login?return_to=%2Fxibosignage%2Fxibo-cms) You must be signed in to change notification settings
* [Fork
  286](/login?return_to=%2Fxibosignage%2Fxibo-cms)
* [Star
   394](/login?return_to=%2Fxibosignage%2Fxibo-cms)

* [Code](/xibosignage/xibo-cms)
* [Pull requests
  6](/xibosignage/xibo-cms/pulls)
* [Actions](/xibosignage/xibo-cms/actions)
* [Security](/xibosignage/xibo-cms/security)
* [Insights](/xibosignage/xibo-cms/pulse)

Additional navigation options

* [Code](/xibosignage/xibo-cms)
* [Pull requests](/xibosignage/xibo-cms/pulls)
* [Actions](/xibosignage/xibo-cms/actions)
* [Security](/xibosignage/xibo-cms/security)
* [Insights](/xibosignage/xibo-cms/pulse)

## Commit

[Permalink](/xibosignage/xibo-cms/commit/45c6b53c3978639db03b63270a56f4397f49b2c9)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Various bugfixes ([#1777](https://github.com/xibosignage/xibo-cms/pull/1777))

[Browse files](/xibosignage/xibo-cms/tree/45c6b53c3978639db03b63270a56f4397f49b2c9)
Browse the repository at this point in the history

```
* Layout Import: use basename on files in mapping.json
* DataSet: getData should replace blacklist in case-insensitive manner
* Chore: update actions to ubuntu-22.04 so that it will run.
* Build: update for ghcr.io
* Release: bump to 2.3.17
```

* Loading branch information

[![@dasgarner](https://avatars.githubusercontent.com/u/10400067?s=40&v=4)](/dasgarner)

[dasgarner](/xibosignage/xibo-cms/commits?author=dasgarner "View all commits by dasgarner")
authored
May 7, 2023

1 parent
[b6ed97d](/xibosignage/xibo-cms/commit/b6ed97da9c376ed7db2aae9558b086bb9cf1a1d1)

commit 45c6b53

 Show file tree

 Hide file tree

Showing
**7 changed files**
with
**32 additions**
and
**24 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* .github/workflows

  + .github/workflows/build-container.yaml
    [build-container.yaml](#diff-6c3483b1a0b0897394692792f435a1ba7afdf1a9c9b04496f4b6da1e398f5ebc)
  + .github/workflows/build-cypress.yaml
    [build-cypress.yaml](#diff-a28e51347e4973739bb58da12f82720153a7bb8f771bbfe6f9ebc415d7876561)
  + .github/workflows/build-tag.yaml
    [build-tag.yaml](#diff-2c1ce8f3aded21faa8660fdcca318880dadd7e2dd5fb39094ee02a54da08203a)
  + .github/workflows/test-suite.yaml
    [test-suite.yaml](#diff-41c13d8e18ea88f64efb24f12a0eb78e0b29b330b05f70047995c86ae76a4419)
* lib

  + Entity

    - lib/Entity/DataSet.php
      [DataSet.php](#diff-10a425908722a706f9c0acec3fadf640d1b88b1e87e868609302abb2882e77d7)
  + Factory

    - lib/Factory/LayoutFactory.php
      [LayoutFactory.php](#diff-0daa951133d29be695663dbf447334d7ec6df31780531fd922a4bc0742c8ef24)
  + Helper

    - lib/Helper/Environment.php
      [Environment.php](#diff-188bcf038c69f05fedd411855451d336591ddda3baf8ea9c165476184fd4bcd9)

## There are no files selected for viewing

4 changes: 2 additions & 2 deletions

4
[.github/workflows/build-container.yaml](#diff-6c3483b1a0b0897394692792f435a1ba7afdf1a9c9b04496f4b6da1e398f5ebc ".github/workflows/build-container.yaml")

Show comments

[View file](/xibosignage/xibo-cms/blob/45c6b53c3978639db03b63270a56f4397f49b2c9/.github/workflows/build-container.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -11,7 +11,7 @@ jobs: |
|  |  | build: |
|  |  | name: Build Containers |
|  |  | if: github.repository == 'xibosignage/xibo-cms' |
|  |  | runs-on: ubuntu-18.04 |
|  |  | runs-on: ubuntu-22.04 |
|  |  | steps: |
|  |  | - name: Checkout |
|  |  | uses: actions/checkout@v1 |
| Expand Down  Expand Up | | @@ -48,4 +48,4 @@ jobs: |
|  |  | steps: |
|  |  | - name: Skip |
|  |  | run: | |
|  |  | echo 'Skipped while in a fork' |
|  |  | echo 'Skipped while in a fork' |

4 changes: 2 additions & 2 deletions

4
[.github/workflows/build-cypress.yaml](#diff-a28e51347e4973739bb58da12f82720153a7bb8f771bbfe6f9ebc415d7876561 ".github/workflows/build-cypress.yaml")

Show comments

[View file](/xibosignage/xibo-cms/blob/45c6b53c3978639db03b63270a56f4397f49b2c9/.github/workflows/build-cypress.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -9,7 +9,7 @@ jobs: |
|  |  | build: |
|  |  | name: Build Cypress |
|  |  | if: github.repository == 'xibosignage/xibo-cms' |
|  |  | runs-on: ubuntu-18.04 |
|  |  | runs-on: ubuntu-22.04 |
|  |  | steps: |
|  |  | - name: Checkout |
|  |  | uses: actions/checkout@v1 |
| Expand All | | @@ -30,4 +30,4 @@ jobs: |
|  |  | steps: |
|  |  | - name: Skip |
|  |  | run: | |
|  |  | echo 'Skipped while in a fork' |
|  |  | echo 'Skipped while in a fork' |

12 changes: 6 additions & 6 deletions

12
[.github/workflows/build-tag.yaml](#diff-2c1ce8f3aded21faa8660fdcca318880dadd7e2dd5fb39094ee02a54da08203a ".github/workflows/build-tag.yaml")

Show comments

[View file](/xibosignage/xibo-cms/blob/45c6b53c3978639db03b63270a56f4397f49b2c9/.github/workflows/build-tag.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -9,22 +9,22 @@ jobs: |
|  |  | build: |
|  |  | name: Build Containers |
|  |  | if: github.repository == 'xibosignage/xibo-cms' |
|  |  | runs-on: ubuntu-18.04 |
|  |  | runs-on: ubuntu-22.04 |
|  |  | steps: |
|  |  | - name: Checkout |
|  |  | uses: actions/checkout@v1 |
|  |  | with: |
|  |  | fetch-depth: 1 |
|  |  | - name: Build Image |
|  |  | run: | |
|  |  | docker build . -t xibosignage/xibo-cms:release-${GITHUB\_REF##\*/} --build-arg GIT\_COMMIT=${GITHUB\_SHA} |
|  |  | docker build . -t ghcr.io/xibosignage/xibo-cms:release-${GITHUB\_REF##\*/} --build-arg GIT\_COMMIT=${GITHUB\_SHA} |
|  |  | - name: Push Image |
|  |  | run: | |
|  |  | docker login --username ${{ secrets.DOCKER\_HUB\_USERNAME }} --password ${{ secrets.DOCKER\_HUB\_TOKEN }} |
|  |  | docker push xibosignage/xibo-cms:release-${GITHUB\_REF##\*/} |
|  |  | docker login --username ${{ github.actor }} --password ${{ secrets.GITHUB\_TOKEN }} |
|  |  | docker push ghcr.io/xibosignage/xibo-cms:release-${GITHUB\_REF##\*/} |
|  |  | - name: Build archive |
|  |  | run: | |
|  |  | CONTAINER=$(docker create xibosignage/xibo-cms:release-${GITHUB\_REF##\*/}) |
|  |  | CONTAINER=$(docker create ghcr.io/xibosignage/xibo-cms:release-${GITHUB\_REF##\*/}) |
|  |  | echo 'Copying from container.' |
|  |  | docker cp "$CONTAINER":/var/www/cms/ xibo-cms-${GITHUB\_REF##\*/} |
|  |  | tar -czf xibo-cms-${GITHUB\_REF##\*/}.tar.gz xibo-cms-${GITHUB\_REF##\*/} |
| Expand All | | @@ -48,4 +48,4 @@ jobs: |
|  |  | steps: |
|  |  | - name: Skip |
|  |  | run: | |
|  |  | echo 'Skipped while in a fork' |
|  |  | echo 'Skipped while in a fork' |

4 changes: 2 additions & 2 deletions

4
[.github/workflows/test-suite.yaml](#diff-41c13d8e18ea88f64efb24f12a0eb78e0b29b330b05f70047995c86ae76a4419 ".github/workflows/test-suite.yaml")

Show comments

[View file](/xibosignage/xibo-cms/blob/45c6b53c3978639db03b63270a56f4397f49b2c9/.github/workflows/test-suite.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -5,7 +5,7 @@ on: [pull\_request] |
|  |  | jobs: |
|  |  | test-suite: |
|  |  | name: Build Containers and Run Tests |
|  |  | runs-on: ubuntu-18.04 |
|  |  | runs-on: ubuntu-22.04 |
|  |  | steps: |
|  |  | - name: Checkout |
|  |  | uses: actions/checkout@v1 |
| Expand Down  Expand Up | | @@ -40,4 +40,4 @@ jobs: |
|  |  | run: | |
|  |  | docker exec cms-db mysql -ucms -pjenkins cms -e "INSERT INTO oauth\_clients (id, secret, name, userId, authCode, clientCredentials) VALUES ('MrGPc7e3IL1hA6w13l7Ru5giygxmNiafGNhFv89d', 'Pk6DdDgu2HzSoepcMHRabY60lDEvQ9ucTejYvc5dOgNVSNaOJirCUM83oAzlwe0KBiGR2Nhi6ltclyNC1rmcq0CiJZXzE42KfeatQ4j9npr6nMIQAzMal8O8RiYrIoono306CfyvSSJRfVfKExIjj0ZyE4TUrtPezJbKmvkVDzh8aj3kbanDKatirhwpfqfVdfgsqVNjzIM9ZgKHnbrTX7nNULL3BtxxNGgDMuCuvKiJFrLSyIIz1F4SNrHwHz', 'cypress', 1, 0, 1)" |
|  |  | docker exec cms-db mysql -ucms -pjenkins cms -e "INSERT INTO oauth\_client\_scopes (clientId, scopeId) VALUES ('MrGPc7e3IL1hA6w13l7Ru5giygxmNiafGNhFv89d', 'all') ON DUPLICATE KEY UPDATE scopeId = scopeId" |
|  |  | docker run --ipc=host --name cms-cypress --link=cms-web:web -v $(pwd)/cypress.json:/app/cypress.json -v $(pwd)/cypress:/app/cypress xibosignage/xibo-cms:cypress bash -c "CYPRESS\_baseUrl=http://web /app/node\_modules/.bin/cypress run --config screenshotsFolder=/app/results,video=false --reporter junit --reporter-options 'mochaFile=/app/results/results\_cypress\_[hash].xml,toConsole=true'" |
|  |  | docker run --ipc=host --name cms-cypress --link=cms-web:web -v $(pwd)/cypress.json:/app/cypress.json -v $(pwd)/cypress:/app/cypress xibosignage/xibo-cms:cypress bash -c "CYPRESS\_baseUrl=http://web /app/node\_modules/.bin/cypress run --config screenshotsFolder=/app/results,video=false --reporter junit --reporter-options 'mochaFile=/app/results/results\_cypress\_[hash].xml,toConsole=true'" |

8 changes: 4 additions & 4 deletions

8
[lib/Entity/DataSet.php](#diff-10a425908722a706f9c0acec3fadf640d1b88b1e87e868609302abb2882e77d7 "lib/Entity/DataSet.php")

Show comments

[View file](/xibosignage/xibo-cms/blob/45c6b53c3978639db03b63270a56f4397f49b2c9/lib/Entity/DataSet.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -432,7 +432,7 @@ public function getData($filterBy = [], $options = []) |
|  |  | foreach ($this->getColumn() as $column) { |
|  |  | /\* @var DataSetColumn $column \*/ |
|  |  | $allowedOrderCols[] = $column->heading; |
|  |  |  |
|  |  |  |
|  |  | if ($column->dataSetColumnTypeId == 2 && !$options['includeFormulaColumns']) |
|  |  | continue; |
|  |  |  |
| Expand All | | @@ -445,7 +445,7 @@ public function getData($filterBy = [], $options = []) |
|  |  | continue; |
|  |  | } |
|  |  |  |
|  |  | $formula = str\_replace($this->blackList, '', htmlspecialchars\_decode($column->formula, ENT\_QUOTES)); |
|  |  | $formula = str\_ireplace($this->blackList, '', htmlspecialchars\_decode($column->formula, ENT\_QUOTES)); |
|  |  | $formula = str\_replace('[DisplayId]', $displayId, $formula); |
|  |  |  |
|  |  | $heading = str\_replace('[DisplayGeoLocation]', $displayGeoLocation, $formula) . ' AS `' . $column->heading . '`'; |
| Expand All | | @@ -462,7 +462,7 @@ public function getData($filterBy = [], $options = []) |
|  |  | // Filtering |
|  |  | if ($filter != '') { |
|  |  | // Support display filtering. |
|  |  | $filter = str\_replace('[DisplayId]', $displayId, $filter); |
|  |  | $filter = str\_ireplace('[DisplayId]', $displayId, $filter); |
|  |  | $filter = str\_replace($this->blackList, '', $filter); |
|  |  |  |
|  |  | $body .= ' AND ' . $filter; |
| Expand Down  Expand Up | | @@ -1070,4 +1070,4 @@ public function copyRows($dataSetIdSource, $dataSetIdTarget) |
|  |  | { |
|  |  | $this->getStore()->insert('INSERT INTO `dataset\_' . $dataSetIdTarget . '` SELECT \* FROM `dataset\_' . $dataSetIdSource . '` ' ,[]); |
|  |  | } |
|  |  | } |
|  |  | } |

22 changes: 15 additions & 7 deletions

22
[lib/Factory/LayoutFactory.php](#diff-0daa951133d29be695663dbf447334d7ec6df31780531fd922a4bc0742c8ef24 "lib/Factory/LayoutFactory.php")

Show comments

[View file](/xibosignage/xibo-cms/blob/45c6b53c3978639db03b63270a56f4397f49b2c9/lib/Factory/LayoutFactory.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1114,14 +1114,22 @@ public function createFromZip($zipFile, $layoutName, $userId, $template, $replac |
|  |  | foreach ($mappings as $file) { |
|  |  | // Import the Media File |
|  |  | $intendedMediaName = $file['name']; |
|  |  | $temporaryFileName = $libraryLocation . $file['file']; |
|  |  |  |
|  |  | // Validate the file name |
|  |  | $fileName = basename($file['file']); |
|  |  | if (empty($fileName) || $fileName == '.') { |
|  |  | $this->getLog()->error('Skipping file on import due to invalid filename. ' . $fileName); |
|  |  | continue; |
|  |  | } |
|  |  |  |
|  |  | $temporaryFileName = $libraryLocation . $fileName; |
|  |  |  |
|  |  | // Get the file from the ZIP |
|  |  | $fileStream = $zip->getStream('library/' . $file['file']); |
|  |  | $fileStream = $zip->getStream('library/' . $fileName); |
|  |  |  |
|  |  | if ($fileStream === false) { |
|  |  | // Log out the entire ZIP file and all entries. |
|  |  | $log = 'Problem getting library/' . $file['file'] . '. Files: '; |
|  |  | $log = 'Problem getting library/' . $fileName . '. Files: '; |
|  |  | for ($i = 0; $i < $zip->numFiles; $i++) { |
|  |  | $log .= $zip->getNameIndex($i) . ', '; |
|  |  | } |
| Expand Down  Expand Up | | @@ -1161,9 +1169,9 @@ public function createFromZip($zipFile, $layoutName, $userId, $template, $replac |
|  |  |  |
|  |  | } catch (NotFoundException $e) { |
|  |  | // Create it instead |
|  |  | $this->getLog()->debug('Media does not exist in Library, add it. %s', $file['file']); |
|  |  | $this->getLog()->debug('Media does not exist in Library, add it. %s', $fileName); |
|  |  |  |
|  |  | $media = $this->mediaFactory->create($intendedMediaName, $file['file'], $file['type'], $userId, $file['duration']); |
|  |  | $media = $this->mediaFactory->create($intendedMediaName, $fileName, $file['type'], $userId, $file['duration']); |
|  |  | $media->tags[] = $this->tagFactory->tagFromString('imported'); |
|  |  |  |
|  |  | // Get global stat setting of media to set to on/off/inherit |
| Expand Down  Expand Up | | @@ -1293,7 +1301,7 @@ public function createFromZip($zipFile, $layoutName, $userId, $template, $replac |
|  |  |  |
|  |  | // We must null the ID so that we don't try to load the dataset when we assign columns |
|  |  | $dataSet->dataSetId = null; |
|  |  |  |
|  |  |  |
|  |  | // Hydrate the columns |
|  |  | foreach ($item['columns'] as $columnItem) { |
|  |  | $this->getLog()->debug('Assigning column: %s', json\_encode($columnItem)); |
| Expand Down  Expand Up | | @@ -2217,4 +2225,4 @@ public function concurrentRequestRelease(Layout $layout, bool $force = false) |
|  |  | } |
|  |  |  |
|  |  | // </editor-fold> |
|  |  | } |
|  |  | } |

2 changes: 1 addition & 1 deletion

2
[lib/Helper/Environment.php](#diff-188bcf038c69f05fedd411855451d336591ddda3baf8ea9c165476184fd4bcd9 "lib/Helper/Environment.php")

Show comments

[View file](/xibosignage/xibo-cms/blob/45c6b53c3978639db03b63270a56f4397f49b2c9/lib/Helper/Environment.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -29,7 +29,7 @@ |
|  |  | \*/ |
|  |  | class Environment |
|  |  | { |
|  |  | public static $WEBSITE\_VERSION\_NAME = '2.3.16'; |
|  |  | public static $WEBSITE\_VERSION\_NAME = '2.3.17'; |
|  |  | public static $XMDS\_VERSION = '5'; |
|  |  | public static $XLF\_VERSION = 3; |
|  |  | public static $VERSION\_REQUIRED = '7.0.8'; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `45c6b53`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxibosignage%2Fxibo-cms%2Fcommit%2F45c6b53c3978639db03b63270a56f4397f49b2c9) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_cac13edd_20250114_184025.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxibosignage%2Fxibo-cms%2Fcommit%2F1cbba380fa751a00756e70d7b08b5c6646092658)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxibosignage%2Fxibo-cms%2Fcommit%2F1cbba380fa751a00756e70d7b08b5c6646092658)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=xibosignage%2Fxibo-cms)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[xibosignage](/xibosignage)
/
**[xibo-cms](/xibosignage/xibo-cms)**
Public

* [Notifications](/login?return_to=%2Fxibosignage%2Fxibo-cms) You must be signed in to change notification settings
* [Fork
  286](/login?return_to=%2Fxibosignage%2Fxibo-cms)
* [Star
   394](/login?return_to=%2Fxibosignage%2Fxibo-cms)

* [Code](/xibosignage/xibo-cms)
* [Pull requests
  6](/xibosignage/xibo-cms/pulls)
* [Actions](/xibosignage/xibo-cms/actions)
* [Security](/xibosignage/xibo-cms/security)
* [Insights](/xibosignage/xibo-cms/pulse)

Additional navigation options

* [Code](/xibosignage/xibo-cms)
* [Pull requests](/xibosignage/xibo-cms/pulls)
* [Actions](/xibosignage/xibo-cms/actions)
* [Security](/xibosignage/xibo-cms/security)
* [Insights](/xibosignage/xibo-cms/pulse)

## Commit

[Permalink](/xibosignage/xibo-cms/commit/1cbba380fa751a00756e70d7b08b5c6646092658)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Various bugfixes ([#1774](https://github.com/xibosignage/xibo-cms/pull/1774))

[Browse files](/xibosignage/xibo-cms/tree/1cbba380fa751a00756e70d7b08b5c6646092658)
Browse the repository at this point in the history

```
* Layout Import: use basename on files in mapping.json
* DataSet: getData should replace blacklist in case-insensitive manner
* Base Factory: validate logical operator
* Display Factory: map view filtering improvements.
* Twig: don't error on pages without views.
```

* Loading branch information

[![@dasgarner](https://avatars.githubusercontent.com/u/10400067?s=40&v=4)](/dasgarner)

[dasgarner](/xibosignage/xibo-cms/commits?author=dasgarner "View all commits by dasgarner")
authored
May 4, 2023

1 parent
[5736f5e](/xibosignage/xibo-cms/commit/5736f5e109262dbf8c962985559321c49f2c37cf)

commit 1cbba38

 Show file tree

 Hide file tree

Showing
**5 changed files**
with
**42 additions**
and
**16 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* lib

  + Controller

    - lib/Controller/Base.php
      [Base.php](#diff-77f01ef855f8a83cf42d9de64dde7beadf4c482b0e09c004d1b10d94c3bcfd6c)
  + Entity

    - lib/Entity/DataSet.php
      [DataSet.php](#diff-10a425908722a706f9c0acec3fadf640d1b88b1e87e868609302abb2882e77d7)
  + Factory

    - lib/Factory/BaseFactory.php
      [BaseFactory.php](#diff-4eafda4dee71fda0dab3dbd09507097f25ade94f28ae19b375ace4ddba45e3d9)
    - lib/Factory/DisplayFactory.php
      [DisplayFactory.php](#diff-c56624919094d20a85d4c104d3aacf5d5f1f6d684fd0f1ff6e34a17d211c9885)
    - lib/Factory/LayoutFactory.php
      [LayoutFactory.php](#diff-0daa951133d29be695663dbf447334d7ec6df31780531fd922a4bc0742c8ef24)

## There are no files selected for viewing

8 changes: 5 additions & 3 deletions

8
[lib/Controller/Base.php](#diff-77f01ef855f8a83cf42d9de64dde7beadf4c482b0e09c004d1b10d94c3bcfd6c "lib/Controller/Base.php")

Show comments

[View file](/xibosignage/xibo-cms/blob/1cbba380fa751a00756e70d7b08b5c6646092658/lib/Controller/Base.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,6 @@ |
|  |  | <?php |
|  |  | /\* |
|  |  | \* Copyright (c) 2022 Xibo Signage Ltd |
|  |  | \* Copyright (C) 2023 Xibo Signage Ltd |
|  |  | \* |
|  |  | \* Xibo - Digital Signage - http://www.xibo.org.uk |
|  |  | \* |
| Expand Down  Expand Up | | @@ -319,7 +319,8 @@ public function render(Request $request, Response $response) |
|  |  | try { |
|  |  | $response = $this->getView()->render($response, $state->template . '.twig', $data); |
|  |  | } catch (LoaderError | RuntimeError | SyntaxError $e) { |
|  |  | throw new GeneralException(\_\_('Twig Error ') . $e->getMessage()); |
|  |  | $this->getLog()->error('Twig Error' . $e->getMessage()); |
|  |  | throw new GeneralException(\_\_('Unable to view this page')); |
|  |  | } |
|  |  | } |
|  |  | $this->rendered = true; |
| Expand All | | @@ -345,7 +346,8 @@ public function renderTwigAjaxReturn(Request $request, Response $response) |
|  |  | try { |
|  |  | $view = $this->getView()->render($response, $state->template . '.twig', $data); |
|  |  | } catch (LoaderError | RuntimeError | SyntaxError $e) { |
|  |  | throw new GeneralException(\_\_('Twig Error ') . $e->getMessage()); |
|  |  | $this->getLog()->error('Twig Error' . $e->getMessage()); |
|  |  | throw new GeneralException(\_\_('Unable to view this page')); |
|  |  | } |
|  |  |  |
|  |  | $view = $view->getBody(); |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[lib/Entity/DataSet.php](#diff-10a425908722a706f9c0acec3fadf640d1b88b1e87e868609302abb2882e77d7 "lib/Entity/DataSet.php")

Show comments

[View file](/xibosignage/xibo-cms/blob/1cbba380fa751a00756e70d7b08b5c6646092658/lib/Entity/DataSet.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -525,7 +525,7 @@ public function getData($filterBy = [], $options = []) |
|  |  | continue; |
|  |  | } |
|  |  |  |
|  |  | $formula = str\_replace($this->blackList, '', htmlspecialchars\_decode($column->formula, ENT\_QUOTES)); |
|  |  | $formula = str\_ireplace($this->blackList, '', htmlspecialchars\_decode($column->formula, ENT\_QUOTES)); |
|  |  | $formula = str\_replace('[DisplayId]', $displayId, $formula); |
|  |  |  |
|  |  | $heading = str\_replace('[DisplayGeoLocation]', $displayGeoLocation, $formula) . ' AS `' . $column->heading . '`'; |
| Expand All | | @@ -544,7 +544,7 @@ public function getData($filterBy = [], $options = []) |
|  |  | if ($filter != '') { |
|  |  | // Support display filtering. |
|  |  | $filter = str\_replace('[DisplayId]', $displayId, $filter); |
|  |  | $filter = str\_replace($this->blackList, '', $filter); |
|  |  | $filter = str\_ireplace($this->blackList, '', $filter); |
|  |  |  |
|  |  | $body .= ' AND ' . $filter; |
|  |  | } |
| Expand Down | |  |

8 changes: 7 additions & 1 deletion

8
[lib/Factory/BaseFactory.php](#diff-4eafda4dee71fda0dab3dbd09507097f25ade94f28ae19b375ace4ddba45e3d9 "lib/Factory/BaseFactory.php")

Show comments

[View file](/xibosignage/xibo-cms/blob/1cbba380fa751a00756e70d7b08b5c6646092658/lib/Factory/BaseFactory.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,6 @@ |
|  |  | <?php |
|  |  | /\* |
|  |  | \* Copyright (c) 2022 Xibo Signage Ltd |
|  |  | \* Copyright (C) 2023 Xibo Signage Ltd |
|  |  | \* |
|  |  | \* Xibo - Digital Signage - http://www.xibo.org.uk |
|  |  | \* |
| Expand Down  Expand Up | | @@ -389,6 +389,12 @@ public function nameFilter($tableName, $tableColumn, $terms, &$body, &$params, $ |
|  |  | continue; |
|  |  | } |
|  |  |  |
|  |  | // Validate the logical operator |
|  |  | if (!in\_array($logicalOperator, ['AND', 'OR'])) { |
|  |  | $this->getLog()->error('Invalid logical operator ' . $logicalOperator); |
|  |  | return; |
|  |  | } |
|  |  |  |
|  |  | // Not like, or like? |
|  |  | if (substr($searchName, 0, 1) == '-') { |
|  |  | if ($i === 1) { |
| Expand Down | |  |

16 changes: 13 additions & 3 deletions

16
[lib/Factory/DisplayFactory.php](#diff-c56624919094d20a85d4c104d3aacf5d5f1f6d684fd0f1ff6e34a17d211c9885 "lib/Factory/DisplayFactory.php")

Show comments

[View file](/xibosignage/xibo-cms/blob/1cbba380fa751a00756e70d7b08b5c6646092658/lib/Factory/DisplayFactory.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,6 @@ |
|  |  | <?php |
|  |  | /\* |
|  |  | \* Copyright (C) 2022 Xibo Signage Ltd |
|  |  | \* Copyright (C) 2023 Xibo Signage Ltd |
|  |  | \* |
|  |  | \* Xibo - Digital Signage - http://www.xibo.org.uk |
|  |  | \* |
| Expand Down  Expand Up | | @@ -357,8 +357,18 @@ public function query($sortOrder = null, $filterBy = []) |
|  |  | // Filter by map bound? |
|  |  | if ($parsedBody->getString('bounds') !== null) { |
|  |  | $coordinates = explode(',', $parsedBody->getString('bounds')); |
|  |  | $body .= ' AND IFNULL( ' . $functionPrefix . 'X(display.GeoLocation), ' . $this->config->getSetting('DEFAULT\_LAT'). ') BETWEEN ' . $coordinates['1'] . ' AND ' . $coordinates['3'] . |
|  |  | ' AND IFNULL( ' . $functionPrefix . 'Y(display.GeoLocation), ' . $this->config->getSetting('DEFAULT\_LONG'). ') BETWEEN ' . $coordinates['0'] . ' AND ' . $coordinates['2'] . ' '; |
|  |  | $defaultLat = $this->config->getSetting('DEFAULT\_LAT'); |
|  |  | $defaultLng = $this->config->getSetting('DEFAULT\_LONG'); |
|  |  |  |
|  |  | $body .= ' AND IFNULL( ' . $functionPrefix . 'X(display.GeoLocation), ' . $defaultLat |
|  |  | . ') BETWEEN :coordinates\_1 AND :coordinates\_3 ' |
|  |  | . ' AND IFNULL( ' . $functionPrefix . 'Y(display.GeoLocation), ' . $defaultLng |
|  |  | . ') BETWEEN :coordinates\_0 AND :coordinates\_2 '; |
|  |  |  |
|  |  | $params['coordinates\_0'] = $coordinates[0]; |
|  |  | $params['coordinates\_1'] = $coordinates[1]; |
|  |  | $params['coordinates\_2'] = $coordinates[2]; |
|  |  | $params['coordinates\_3'] = $coordinates[3]; |
|  |  | } |
|  |  |  |
|  |  | // Filter by Display ID? |
| Expand Down | |  |

22 changes: 15 additions & 7 deletions

22
[lib/Factory/LayoutFactory.php](#diff-0daa951133d29be695663dbf447334d7ec6df31780531fd922a4bc0742c8ef24 "lib/Factory/LayoutFactory.php")

Show comments

[View file](/xibosignage/xibo-cms/blob/1cbba380fa751a00756e70d7b08b5c6646092658/lib/Factory/LayoutFactory.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1016,7 +1016,7 @@ public function loadByJson($layoutJson, $playlistJson, $nestedPlaylistJson, Fold |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | $combined = array\_combine($oldIds, $newIds); |
|  |  |  |
|  |  | $playlists = $this->createNestedPlaylistWidgets($widgets, $combined, $playlists); |
| Expand Down  Expand Up | | @@ -1241,14 +1241,22 @@ public function createFromZip($zipFile, $layoutName, $userId, $template, $replac |
|  |  | foreach ($mappings as $file) { |
|  |  | // Import the Media File |
|  |  | $intendedMediaName = $file['name']; |
|  |  | $temporaryFileName = $libraryLocation . $file['file']; |
|  |  |  |
|  |  | // Validate the file name |
|  |  | $fileName = basename($file['file']); |
|  |  | if (empty($fileName) || $fileName == '.') { |
|  |  | $this->getLog()->error('Skipping file on import due to invalid filename. ' . $fileName); |
|  |  | continue; |
|  |  | } |
|  |  |  |
|  |  | $temporaryFileName = $libraryLocation . $fileName; |
|  |  |  |
|  |  | // Get the file from the ZIP |
|  |  | $fileStream = $zip->getStream('library/' . $file['file']); |
|  |  | $fileStream = $zip->getStream('library/' . $fileName); |
|  |  |  |
|  |  | if ($fileStream === false) { |
|  |  | // Log out the entire ZIP file and all entries. |
|  |  | $log = 'Problem getting library/' . $file['file'] . '. Files: '; |
|  |  | $log = 'Problem getting library/' . $fileName . '. Files: '; |
|  |  | for ($i = 0; $i < $zip->numFiles; $i++) { |
|  |  | $log .= $zip->getNameIndex($i) . ', '; |
|  |  | } |
| Expand Down  Expand Up | | @@ -1287,9 +1295,9 @@ public function createFromZip($zipFile, $layoutName, $userId, $template, $replac |
|  |  | } |
|  |  | } catch (NotFoundException $e) { |
|  |  | // Create it instead |
|  |  | $this->getLog()->debug('Media does not exist in Library, add it ' . $file['file']); |
|  |  | $this->getLog()->debug('Media does not exist in Library, add it ' . $fileName); |
|  |  |  |
|  |  | $media = $this->mediaFactory->create($intendedMediaName, $file['file'], $file['type'], $userId, $file['duration']); |
|  |  | $media = $this->mediaFactory->create($intendedMediaName, $fileName, $file['type'], $userId, $file['duration']); |
|  |  |  |
|  |  | if ($importTags && isset($file['tags'])) { |
|  |  | foreach ($file['tags'] as $tagNode) { |
| Expand Down  Expand Up | | @@ -1444,7 +1452,7 @@ public function createFromZip($zipFile, $layoutName, $userId, $template, $replac |
|  |  | $columnWithImages = []; |
|  |  | // We must null the ID so that we don't try to load the dataset when we assign columns |
|  |  | $dataSet->dataSetId = null; |
|  |  |  |
|  |  |  |
|  |  | // Hydrate the columns |
|  |  | foreach ($item['columns'] as $columnItem) { |
|  |  | $this->getLog()->debug(sprintf('Assigning column: %s', json\_encode($columnItem))); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `1cbba38`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxibosignage%2Fxibo-cms%2Fcommit%2F1cbba380fa751a00756e70d7b08b5c6646092658) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


