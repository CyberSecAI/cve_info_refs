=== Content from www.php.net_5c00084c_20250114_183358.html ===

[![](/images/logos/php-logo-white.svg)](/)

* [Downloads](/downloads.php)
* [Documentation](/docs.php)
* [Get Involved](/get-involved.php)
* [Help](/support.php)
* [![PHP 8.4](/images/php8/logo_php8_4.svg)](/releases/8.4/index.php)

 Search docs

[API Platform Conference 2025](/conferences/index.php#2025-01-13-1)
[Getting Started](/manual/en/getting-started.php)
[Introduction](/manual/en/introduction.php)
[A simple tutorial](/manual/en/tutorial.php)
[Language Reference](/manual/en/langref.php)
[Basic syntax](/manual/en/language.basic-syntax.php)
[Types](/manual/en/language.types.php)
[Variables](/manual/en/language.variables.php)
[Constants](/manual/en/language.constants.php)
[Expressions](/manual/en/language.expressions.php)
[Operators](/manual/en/language.operators.php)
[Control Structures](/manual/en/language.control-structures.php)
[Functions](/manual/en/language.functions.php)
[Classes and Objects](/manual/en/language.oop5.php)
[Namespaces](/manual/en/language.namespaces.php)
[Enumerations](/manual/en/language.enumerations.php)
[Errors](/manual/en/language.errors.php)
[Exceptions](/manual/en/language.exceptions.php)
[Fibers](/manual/en/language.fibers.php)
[Generators](/manual/en/language.generators.php)
[Attributes](/manual/en/language.attributes.php)
[References Explained](/manual/en/language.references.php)
[Predefined Variables](/manual/en/reserved.variables.php)
[Predefined Exceptions](/manual/en/reserved.exceptions.php)
[Predefined Interfaces and Classes](/manual/en/reserved.interfaces.php)
[Predefined Attributes](/manual/en/reserved.attributes.php)
[Context options and parameters](/manual/en/context.php)
[Supported Protocols and Wrappers](/manual/en/wrappers.php)

[Security](/manual/en/security.php)
[Introduction](/manual/en/security.intro.php)
[General considerations](/manual/en/security.general.php)
[Installed as CGI binary](/manual/en/security.cgi-bin.php)
[Installed as an Apache module](/manual/en/security.apache.php)
[Session Security](/manual/en/security.sessions.php)
[Filesystem Security](/manual/en/security.filesystem.php)
[Database Security](/manual/en/security.database.php)
[Error Reporting](/manual/en/security.errors.php)
[User Submitted Data](/manual/en/security.variables.php)
[Hiding PHP](/manual/en/security.hiding.php)
[Keeping Current](/manual/en/security.current.php)
[Features](/manual/en/features.php)
[HTTP authentication with PHP](/manual/en/features.http-auth.php)
[Cookies](/manual/en/features.cookies.php)
[Sessions](/manual/en/features.sessions.php)
[Handling file uploads](/manual/en/features.file-upload.php)
[Using remote files](/manual/en/features.remote-files.php)
[Connection handling](/manual/en/features.connection-handling.php)
[Persistent Database Connections](/manual/en/features.persistent-connections.php)
[Command line usage](/manual/en/features.commandline.php)
[Garbage Collection](/manual/en/features.gc.php)
[DTrace Dynamic Tracing](/manual/en/features.dtrace.php)

[Function Reference](/manual/en/funcref.php)
[Affecting PHP's Behaviour](/manual/en/refs.basic.php.php)
[Audio Formats Manipulation](/manual/en/refs.utilspec.audio.php)
[Authentication Services](/manual/en/refs.remote.auth.php)
[Command Line Specific Extensions](/manual/en/refs.utilspec.cmdline.php)
[Compression and Archive Extensions](/manual/en/refs.compression.php)
[Cryptography Extensions](/manual/en/refs.crypto.php)
[Database Extensions](/manual/en/refs.database.php)
[Date and Time Related Extensions](/manual/en/refs.calendar.php)
[File System Related Extensions](/manual/en/refs.fileprocess.file.php)
[Human Language and Character Encoding Support](/manual/en/refs.international.php)
[Image Processing and Generation](/manual/en/refs.utilspec.image.php)
[Mail Related Extensions](/manual/en/refs.remote.mail.php)
[Mathematical Extensions](/manual/en/refs.math.php)
[Non-Text MIME Output](/manual/en/refs.utilspec.nontext.php)
[Process Control Extensions](/manual/en/refs.fileprocess.process.php)
[Other Basic Extensions](/manual/en/refs.basic.other.php)
[Other Services](/manual/en/refs.remote.other.php)
[Search Engine Extensions](/manual/en/refs.search.php)
[Server Specific Extensions](/manual/en/refs.utilspec.server.php)
[Session Extensions](/manual/en/refs.basic.session.php)
[Text Processing](/manual/en/refs.basic.text.php)
[Variable and Type Related Extensions](/manual/en/refs.basic.vartype.php)
[Web Services](/manual/en/refs.webservice.php)
[Windows Only Extensions](/manual/en/refs.utilspec.windows.php)
[XML Manipulation](/manual/en/refs.xml.php)
[GUI Extensions](/manual/en/refs.ui.php)

Keyboard Shortcuts?
This help
j
Next menu item
k
Previous menu item
g p
Previous man page
g n
Next man page
G
Scroll to bottom
g g
Scroll to top
g h
Goto homepage
g s
Goto search
(current page)
/
Focus search box

[in\_array »](function.in-array.php)

[« end](function.end.php)

* [PHP Manual](index.php)
* [Function Reference](funcref.php)
* [Variable and Type Related Extensions](refs.basic.vartype.php)
* [Arrays](book.array.php)
* [Array Functions](ref.array.php)

Change language:
English
German
Spanish
French
Italian
Japanese
Brazilian Portuguese
Russian
Turkish
Ukrainian
Chinese (Simplified)
Other

# extract

(PHP 4, PHP 5, PHP 7, PHP 8)

extract — Import variables into the current symbol table from an array

### Description

**extract**([array](language.types.array.php) `&$array`, [int](language.types.integer.php) `$flags` = **`[EXTR_OVERWRITE](array.constants.php#constant.extr-overwrite)`**, [string](language.types.string.php) `$prefix` = ""): [int](language.types.integer.php)

Import variables from an array into the current
[symbol table](features.gc.refcounting-basics.php).

Checks each key to see whether it has a valid variable name.
It also checks for collisions with existing variables in
the symbol table.

**Warning**

Do not use **extract()** on untrusted data, like user input
(e.g. [$\_GET](reserved.variables.get.php), [$\_FILES](reserved.variables.files.php)).

### Parameters

`array`

An associative array. This function treats keys as variable names and
values as variable values. For each key/value pair it will create a
variable in the current symbol table, subject to
`flags` and `prefix` parameters.

You must use an associative array; a numerically indexed array
will not produce results unless you use **`[EXTR_PREFIX_ALL](array.constants.php#constant.extr-prefix-all)`** or
**`[EXTR_PREFIX_INVALID](array.constants.php#constant.extr-prefix-invalid)`**.

`flags`

The way invalid/numeric keys and collisions are treated is determined
by the extraction `flags`. It can be one of the
following values:
**`[EXTR_OVERWRITE](array.constants.php#constant.extr-overwrite)`**
If there is a collision, overwrite the existing variable.

**`[EXTR_SKIP](array.constants.php#constant.extr-skip)`**
If there is a collision, don't overwrite the existing
variable.

**`[EXTR_PREFIX_SAME](array.constants.php#constant.extr-prefix-same)`**
If there is a collision, prefix the variable name with
`prefix`.

**`[EXTR_PREFIX_ALL](array.constants.php#constant.extr-prefix-all)`**
Prefix all variable names with
`prefix`.

**`[EXTR_PREFIX_INVALID](array.constants.php#constant.extr-prefix-invalid)`**
Only prefix invalid/numeric variable names with
`prefix`.

**`[EXTR_IF_EXISTS](array.constants.php#constant.extr-if-exists)`**
Only overwrite the variable if it already exists in the
current symbol table, otherwise do nothing. This is useful
for defining a list of valid variables and then extracting
only those variables you have defined out of
[$\_REQUEST](reserved.variables.request.php), for example.

**`[EXTR_PREFIX_IF_EXISTS](array.constants.php#constant.extr-prefix-if-exists)`**
Only create prefixed variable names if the non-prefixed version
of the same variable exists in the current symbol table.

**`[EXTR_REFS](array.constants.php#constant.extr-refs)`**
Extracts variables as references. This effectively means that the
values of the imported variables are still referencing the values of
the `array` parameter. You can use this flag
on its own or combine it with any other flag by OR'ing the
`flags`.

If `flags` is not specified, it is
assumed to be **`[EXTR_OVERWRITE](array.constants.php#constant.extr-overwrite)`**.

`prefix`

Note that `prefix` is only required if
`flags` is **`[EXTR_PREFIX_SAME](array.constants.php#constant.extr-prefix-same)`**,
**`[EXTR_PREFIX_ALL](array.constants.php#constant.extr-prefix-all)`**, **`[EXTR_PREFIX_INVALID](array.constants.php#constant.extr-prefix-invalid)`**
or **`[EXTR_PREFIX_IF_EXISTS](array.constants.php#constant.extr-prefix-if-exists)`**. If
the prefixed result is not a valid variable name, it is not
imported into the symbol table. Prefixes are automatically separated from
the array key by an underscore character.

### Return Values

Returns the number of variables successfully imported into the symbol
table.

### Examples

**Example #1 **extract()** example**

A possible use for **extract()** is to import into the
symbol table variables contained in an associative array returned by
[wddx\_deserialize()](function.wddx-deserialize.php).

`<?php
/* Suppose that $var_array is an array returned from
 wddx_deserialize */

$size = "large";
$var_array = array(
 "color" => "blue",
 "size" => "medium",
 "shape" => "sphere"
);

extract($var_array, EXTR_PREFIX_SAME, "wddx");

echo "$color, $size, $shape, $wddx_size\n";

?>`

The above example will output:

```
blue, large, sphere, medium
```

The $size wasn't overwritten because we specified
**`[EXTR_PREFIX_SAME](array.constants.php#constant.extr-prefix-same)`**, which resulted in
$wddx\_size being created. If **`[EXTR_SKIP](array.constants.php#constant.extr-skip)`** was
specified, then $wddx\_size wouldn't even have been created.
**`[EXTR_OVERWRITE](array.constants.php#constant.extr-overwrite)`** would have caused $size to have
value "medium", and **`[EXTR_PREFIX_ALL](array.constants.php#constant.extr-prefix-all)`** would result in new variables
being named $wddx\_color,
$wddx\_size, and
$wddx\_shape.

### Notes

**Warning**

Do not use **extract()** on untrusted data, like
user input
(i.e. [$\_GET](reserved.variables.get.php), [$\_FILES](reserved.variables.files.php), etc.).
If you do, make sure you use one of the non-overwriting
`flags` values such as
**`[EXTR_SKIP](array.constants.php#constant.extr-skip)`** and be aware that you should extract
in the same order that's defined in
[variables\_order](ini.core.php#ini.variables-order) within the
[php.ini](ini.php).

### See Also

* [compact()](function.compact.php) - Create array containing variables and their values
* [list()](function.list.php) - Assign variables as if they were an array

### Found A Problem?

[Learn How To Improve This Page](https://github.com/php/doc-base/blob/master/README.md "This will take you to our contribution guidelines on GitHub")
•
[Submit a Pull Request](https://github.com/php/doc-en/blob/master/reference/array/functions/extract.xml)
•
[Report a Bug](https://github.com/php/doc-en/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Ffunction.extract%0A%0A---)

[＋add a note](/manual/add-note.php?sect=function.extract&repo=en&redirect=https://www.php.net/manual/en/function.extract.php)
### User Contributed Notes 28 notes

[up](/manual/vote-note.php?id=50549&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=50549&page=function.extract&vote=down "Vote down!")

20

[***Michael Newton***](#50549) [¶](#50549)**19 years ago**
`They say "If the result is not a valid variable name, it is not imported into the symbol table."

What they should say is that if _any_ of the results have invalid names, _none_ of the variables get extracted.

Under 4.3.10 on Windows 2000, I was pulling some mySQL records, but needed to convert two fields into IP addresses:
<?
extract(mysql_fetch_assoc(mysql_query('SELECT * FROM foo')));
extract(mysql_fetch_assoc(mysql_query('SELECT INET_NTOA(bar) AS bar, INET_NTOA(baz) FROM foo')));
?>

I had forgotten the second AS modifier in the SQL query. Because it couldn't extract a variable called INET_NTOA(baz) into the symbol table, it didn't do either of them.

(BTW I don't normally stack functions up like that! Just to make a short example!)`

[up](/manual/vote-note.php?id=112165&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=112165&page=function.extract&vote=down "Vote down!")

10

[***FredLawl***](#112165) [¶](#112165)**11 years ago**
`It is possible to use this as a way to create public attributes for a class.

<?php
class Foo {

 public function __construct ($array) {

 extract($array, EXTR_REFS);
 foreach ($array as $key => $value) {
 $this->$key = $$key;
 // Do: $this->key = $key; if $key is not a string.
 }

 }

}

$array = array(
 'valueOne' => 'Test Value 1',
 'valueTwo' => 'Test Value 2',
 'valueThree' => 'Test Value 3'
);

$foo = new Foo($array);

// Works
echo $foo->valueOne; // Test Value 1
echo $foo->valueTwo; // Test Value 2

// Does not work!
echo $foo::$valueOne; // Fatal error: Access to undeclared static property: Test::$valueOne
?>`

[up](/manual/vote-note.php?id=59152&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=59152&page=function.extract&vote=down "Vote down!")

6

[***Csaba at alum dot mit dot edu***](#59152) [¶](#59152)**19 years ago**
`Sometimes you may want to extract only a named subset of the key/value pairs in an array. This keeps things more orderly and could prevent an unrelated variable from getting clobbered from an errant key. For example,

$things = 'unsaid';
$REQUEST = array(He=>This, said=>1, my=>is, info=>2, had=>a,
 very=>3, important=>test, things=>4);
$aVarToExtract = array(my, important, info);
extract (array_intersect_key ($REQUEST, array_flip($aVarToExtract)));

will extract
$my = 'is';
$important = 'test';
$info = 2;

but will leave certain
$things = 'unsaid'

Csaba Gabor from Vienna
NB. Of course the composite request coming in from a web page is in $_REQUEST.`

[up](/manual/vote-note.php?id=115757&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=115757&page=function.extract&vote=down "Vote down!")

10

[***dmikam***](#115757) [¶](#115757)**10 years ago**
`I have made some tests to compare the speed of next constructions:
<?php

extract($ARRAY);

// vs.

foreach($ARRAY as $key=>$value)
 $$key = $value;
?>

Surprisingly for me extract is 20%-80% slower then foreach construction. I don't really understand why, but it's so.`

[up](/manual/vote-note.php?id=106374&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=106374&page=function.extract&vote=down "Vote down!")

8

[***Robc***](#106374) [¶](#106374)**13 years ago**
`When extracting from a row after a database query using for example:

$row = mysql_fetch_array($result, MYSQL_ASSOC)
extract($row);

I find that the resultant variables may not match the variable type in the database. In particular I have found integers in the database may gettype() to string on the extracted variable.`

[up](/manual/vote-note.php?id=74649&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=74649&page=function.extract&vote=down "Vote down!")

6

[***Dan O'Donnell***](#74649) [¶](#74649)**17 years ago**
`Following up on ktwombley at gmail dot com's post:

Presumably one easy way of dealing with this security issue is to use the EXTR_IF_EXISTS flag and make sure

a) your define acceptable input variables beforehand (i.e. as empty variables)
b) Sanitise any user input to avoid unacceptable variable content.

If you do these two things, then I'm not sure I see the difference between extract($_REQUEST,EXTR_IF_EXISTS); and assigning each of the variables by hand.

I'm not talking here about the idea of storing the variables in a database, just the immediately necessary steps to allow you to use extract on REQUEST arrays with relative safety.`

[up](/manual/vote-note.php?id=114096&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=114096&page=function.extract&vote=down "Vote down!")

8

[***CertaiN***](#114096) [¶](#114096)**11 years ago**
`[New Version]

Example Usage:
<?php
$_GET['A']['a'] = ' CORRECT(including some spaces) ';
$_GET['A']['b'] = ' CORRECT(including some spaces) ';
$_GET['A']['c'] = "Invalid UTF-8 sequence: \xe3\xe3\xe3";
$_GET['A']['d']['invalid_structure'] = 'INVALID';

$_GET['B']['a'] = ' CORRECT(including some spaces) ';
$_GET['B']['b'] = "Invalid UTF-8 sequence: \xe3\xe3\xe3";
$_GET['B']['c']['invalid_structure'] = 'INVALID';
$_GET['B']["Invalid UTF-8 sequence: \xe3\xe3\xe3"] = 'INVALID';

$_GET['C']['a'] = ' CORRECT(including some spaces) ';
$_GET['C']['b'] = "Invalid UTF-8 sequence: \xe3\xe3\xe3";
$_GET['C']['c']['invalid_structure'] = 'INVALID';
$_GET['C']["Invalid UTF-8 sequence: \xe3\xe3\xe3"] = 'INVALID';

$_GET['unneeded_item'] = 'UNNEEDED';

var_dump(filter_struct_utf8(INPUT_GET, array(
 'A' => array(
 'a' => '',
 'b' => FILTER_STRUCT_TRIM,
 'c' => '',
 'd' => '',
 ),
 'B' => FILTER_STRUCT_FORCE_ARRAY,
 'C' => FILTER_STRUCT_FORCE_ARRAY | FILTER_STRUCT_TRIM,
)));
?>

Example Result:
array(3) {
 ["A"]=>
 array(4) {
 ["a"]=>
 string(36) " CORRECT(including some spaces) "
 ["b"]=>
 string(30) "CORRECT(including some spaces)"
 ["c"]=>
 string(0) ""
 ["d"]=>
 string(0) ""
 }
 ["B"]=>
 array(3) {
 ["a"]=>
 string(36) " CORRECT(including some spaces) "
 ["b"]=>
 string(0) ""
 ["c"]=>
 string(0) ""
 }
 ["C"]=>
 array(3) {
 ["a"]=>
 string(30) "CORRECT(including some spaces)"
 ["b"]=>
 string(0) ""
 ["c"]=>
 string(0) ""
 }
}`

[up](/manual/vote-note.php?id=122980&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=122980&page=function.extract&vote=down "Vote down!")

2

[***amolocaleb at gmail dot com***](#122980) [¶](#122980)**6 years ago**
`If an object is typecasted into an array and "extracted",only the public properties will be accessible.Methods are of course omitted.
<?php
class Test{
 public $name = '';

 protected $age = 10;

 public $status = 'disabled';

 private $isTrue = false;

 public function __construct()
 {
 $this->name = 'Amolo';
 $this->status = 'active';
 }

 public function getName()
 {
 return $this->name;
 }

 public function getAge()
 {
 return $this->age;
 }

 public function getStatus()
 {
 return $this->status;
 }

}

$obj = (array) new Test();
var_dump($obj);
/* array(4) { ["name"]=> string(5) "Amolo" ["*age"]=> int(10) ["status"]=> string(6) "active" ["TestisTrue"]=> bool(false) } */
extract((array)new Test());
echo $name; //Amolo
echo $status; //active
echo $age;//Notice: Undefined variable: age
echo $isTrue;//Notice: Undefined variable: isTrue`

[up](/manual/vote-note.php?id=122850&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=122850&page=function.extract&vote=down "Vote down!")

3

[***phatsk+php at gmail dot com***](#122850) [¶](#122850)**6 years ago**
`Using extract's return parameter can lead to unintended results, particularly with EXTR_REFS:

<?php

$my_data = [
 'count' => 15,
 'name' => 'foo',
];

$count = extract( $my_data, EXTR_REFS );

echo $my_data['count']; // 2, not 15.`

[up](/manual/vote-note.php?id=112068&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=112068&page=function.extract&vote=down "Vote down!")

7

[***dotslash.lu at gmail.com***](#112068) [¶](#112068)**11 years ago**
`You can't extract a numeric indexed array(e.g. non-assoc array).
<?php
$a = array(
 1,
 2
);
extract($a);
var_dump(${1});
?>

result:
PHP Notice: Undefined variable: 1 in /Users/Lutashi/t.php on line 7

Notice: Undefined variable: 1 in /Users/Lutashi/t.php on line 7
NULL`

[up](/manual/vote-note.php?id=122772&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=122772&page=function.extract&vote=down "Vote down!")

4

[***mrkhoa99 at gmail dot com***](#122772) [¶](#122772)**6 years ago**
`We can use extract () function for Template Engine:

<?php
#Template.php

class Template
{
 protected $viewVars;

 public function renderPage($tpl)
 {
 ob_start();
 extract($this->viewVars, EXTR_SKIP);
 include $tpl;
 return ob_end_flush();
 }

 public function assign($arr)
 {
 foreach ($arr as $key => $value) {
 $this->viewVars[$key] = $value;
 }
 return $this;
 }
}

$template = new Template();
$template->assign(
 [ 'pageHeader' => 'Page Header', 'content' => 'This is the content page']
);
$template->renderPage('tpl.php');

#tpl.php

<h1><?= $pageHeader; ?></h1>
<p><?= $content ;?></p>

Output:

Page Header
This is the content page`

[up](/manual/vote-note.php?id=114095&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=114095&page=function.extract&vote=down "Vote down!")

6

[***CertaiN***](#114095) [¶](#114095)**11 years ago**
`[New Version]
This function is very useful for filtering complicated array structure.
Also, Some integer bitmasks and invalid UTF-8 sequence detection are available.

Code:
<?php
/**
 * @param integer $type Constant like INPUT_XXX.
 * @param array $default Default structure of the specified super global var.
 * Following bitmasks are available:
 * + FILTER_STRUCT_FORCE_ARRAY - Force 1 dimensional array.
 * + FILTER_STRUCT_TRIM - Trim by ASCII control chars.
 * + FILTER_STRUCT_FULL_TRIM - Trim by ASCII control chars,
 * full-width and no-break space.
 * @return array The value of the filtered super global var.
 */
define('FILTER_STRUCT_FORCE_ARRAY', 1);
define('FILTER_STRUCT_TRIM', 2);
define('FILTER_STRUCT_FULL_TRIM', 4);
function filter_struct_utf8($type, array $default) {
 static $func = __FUNCTION__;
 static $trim = "[\\x0-\x20\x7f]";
 static $ftrim = "[\\x0-\x20\x7f\xc2\xa0\xe3\x80\x80]";
 static $recursive_static = false;
 if (!$recursive = $recursive_static) {
 $types = array(
 INPUT_GET => $_GET,
 INPUT_POST => $_POST,
 INPUT_COOKIE => $_COOKIE,
 INPUT_REQUEST => $_REQUEST,
 );
 if (!isset($types[(int)$type])) {
 throw new LogicException('unknown super global var type');
 }
 $var = $types[(int)$type];
 $recursive_static = true;
 } else {
 $var = $type;
 }
 $ret = array();
 foreach ($default as $key => $value) {
 if ($is_int = is_int($value)) {
 if (!($value | (
 FILTER_STRUCT_FORCE_ARRAY |
 FILTER_STRUCT_FULL_TRIM |
 FILTER_STRUCT_TRIM
 ))) {
 $recursive_static = false;
 throw new LogicException('unknown bitmask');
 }
 if ($value & FILTER_STRUCT_FORCE_ARRAY) {
 $tmp = array();
 if (isset($var[$key])) {
 foreach ((array)$var[$key] as $k => $v) {
 if (!preg_match('//u', $k)){
 continue;
 }
 $value &= FILTER_STRUCT_FULL_TRIM | FILTER_STRUCT_TRIM;
 $tmp += array($k => $value ? $value : '');
 }
 }
 $value = $tmp;
 }
 }
 if ($isset = isset($var[$key]) and is_array($value)) {
 $ret[$key] = $func($var[$key], $value);
 } elseif (!$isset || is_array($var[$key])) {
 $ret[$key] = null;
 } elseif ($is_int && $value & FILTER_STRUCT_FULL_TRIM) {
 $ret[$key] = preg_replace("/\A{$ftrim}++|{$ftrim}++\z/u", '', $var[$key]);
 } elseif ($is_int && $value & FILTER_STRUCT_TRIM) {
 $ret[$key] = preg_replace("/\A{$trim}++|{$trim}++\z/u", '', $var[$key]);
 } else {
 $ret[$key] = preg_replace('//u', '', $var[$key]);
 }
 if ($ret[$key] === null) {
 $ret[$key] = $is_int ? '' : $value;
 }
 }
 if (!$recursive) {
 $recursive_static = false;
 }
 return $ret;
}
?>`

[up](/manual/vote-note.php?id=63234&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=63234&page=function.extract&vote=down "Vote down!")

4

[***nicolas zeh***](#63234) [¶](#63234)**18 years ago**
`This function provides exactly the same functionality as extract except that a parameter was added defining the extract target.
This function can be used if your PHP installation does not support the required Flags or more important if you would like to extract arrays to another destination as to $GLOBALS, i.e. other arrays or objects.
The only difference to extract is that extract_to moves the array pointer of $arr to the end as $arr is passed by reference to support the EXTR_REFS flag.

<?php
 if( !defined('EXTR_PREFIX_ALL') ) define('EXTR_PREFIX_ALL', 3);
 if( !defined('EXTR_PREFIX_INVALID') ) define('EXTR_PREFIX_INVALID', 4);
 if( !defined('EXTR_IF_EXISTS') ) define('EXTR_IF_EXISTS', 5);
 if( !defined('EXTR_PREFIX_IF_EXISTS') ) define('EXTR_PREFIX_IF_EXISTS', 6);
 if( !defined('EXTR_REFS') ) define('EXTR_REFS', 256);

 function extract_to( &$arr, &$to, $type=EXTR_OVERWRITE, $prefix=false ){

 if( !is_array( $arr ) ) return trigger_error("extract_to(): First argument should be an array", E_USER_WARNING );

 if( is_array( $to ) ) $t=0;
 else if( is_object( $to ) ) $t=1;
 else return trigger_error("extract_to(): Second argument should be an array or object", E_USER_WARNING );

 if( $type==EXTR_PREFIX_SAME || $type==EXTR_PREFIX_ALL || $type==EXTR_PREFIX_INVALID || $type==EXTR_PREFIX_IF_EXISTS )
 if( $prefix===false ) return trigger_error("extract_to(): Prefix expected to be specified", E_USER_WARNING );
 else $prefix .= '_';

 $i=0;
 foreach( $arr as $key=>$val ){

 $nkey = $key;
 $isset = $t==1 ? isset( $to[$key] ) : isset( $to->$key );

 if( ( $type==EXTR_SKIP && $isset )
 || ( $type==EXTR_IF_EXISTS && !$isset ) )
 continue;

 else if( ( $type==EXTR_PREFIX_SAME && $isset )
 || ( $type==EXTR_PREFIX_ALL )
 || ( $type==EXTR_PREFIX_INVALID && !preg_match( '#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#', $key ) ) )
 $nkey = $prefix.$key;

 else if( $type==EXTR_PREFIX_IF_EXISTS )
 if( $isset ) $nkey = $prefix.$key;
 else continue;

 if( !preg_match( '#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#', $nkey ) ) continue;

 if( $t==1 )
 if( $type & EXTR_REFS ) $to->$nkey = &$arr[$key];
 else $to->$nkey = $val;
 else
 if( $type & EXTR_REFS ) $to[$nkey] = &$arr[$key];
 else $to[$nkey] = $val;

 $i++;
 }

 return $i;
 }

 // e.g.:
 extract_to( $myarray, $myobject, EXTR_IF_EXISTS );
?>`

[up](/manual/vote-note.php?id=81859&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=81859&page=function.extract&vote=down "Vote down!")

3

[***benjaminATwebbutvecklarnaDOTse***](#81859) [¶](#81859)**16 years ago**
`Re: anon at anon dot org, about extract() and null values

Personally I've found use extracting multiple resultsets from db where the latter would overwrite the previous when a variable is not null ( and optionally if its not >0 )

It would be useful if $extract_type was extended on top of these two:

EXTR_OVERWRITE
EXTR_SKIP

with something like this:

EXTR_OVERWRITE_NULL
 - If there is a collision, overwrite the existing variable if it is null

EXTR_OVERWRITE_0
 - Same thing but == 0 or null

EXTR_SKIP_NULL
 - If there is a collision, skip the new variable if the existing is not null

EXTR_SKIP_0
 - Same thing but == 0 or null

Those ought to cover a few good cases that aren't covered now.`

[up](/manual/vote-note.php?id=116525&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=116525&page=function.extract&vote=down "Vote down!")

4

[***bob***](#116525) [¶](#116525)**9 years ago**
`Note that extract() will only create or overwrite variables in the current scope, so
<?
function test(){
 $a=Array('b'=>1,'c'=>2);
 extract($a);
}
test();
exit("$b");
?>
will produce no output, whereas
<?
function test(){
 global $b;
 $a=Array('b'=>1,'c'=>2);
 extract($a);
}
test();
exit("$b");
?>
will output 1.`

[up](/manual/vote-note.php?id=81805&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=81805&page=function.extract&vote=down "Vote down!")

1

[***Hayley Watson***](#81805) [¶](#81805)**16 years ago**
`Dan O'Donnell's suggestion needs a third requirement to work as described:

c) No other variables are defined - especially variables that contain potentially sensitive information.

Without that condition the difference between extract() and assigning variables by hand (and the resulting security implications) should be obvious.

The only valid security step there is (b) - but you should be doing that anyway.`

[up](/manual/vote-note.php?id=62727&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=62727&page=function.extract&vote=down "Vote down!")

1

[***owk dot ch199\_ph at gadz dot org***](#62727) [¶](#62727)**18 years ago**
`And if you want with PHP 5 an easy way to extract $V by reference, try this :
<?php
 foreach ($V as $k => &$v) {
 $$k =& $v;
 }
?>
It can be used to create special kind of "free args" functions that let you choose when you call them the way you send variables, and which ones. They are moreover very fast to call thanks to references :
<?php
 function free_args (&$V) {
 foreach ($V as $k => &$v) {
 $$k =& $v;
 }
 unset ($k); unset ($v); unset ($V);

 // be careful that if you need to extract $k, $v or $V variables you should find other names for them in the lines above (ie. $__k, $__v and $__V)
 }

 $huge_text = '...';

 $a = array ('arg1' => 'val1', 'arg2' => &$huge_text); // in this call, only $arg2 will be a true reference in the function
 free_args ($a);
?>
Be warned that you can't write : "<?php free_args (array ('arg1' => 'val1')); ?>" because the array can't be referenced by the function, as it's not yet created when the function starts.`

[up](/manual/vote-note.php?id=69323&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=69323&page=function.extract&vote=down "Vote down!")

4

[***ktwombley at gmail dot com***](#69323) [¶](#69323)**18 years ago**
`It's really easy to open gaping security holes using extract() on $_REQUEST, $_GET, etc. You have to be really sure of what you're doing, and use the proper flags on extract() to avoid clobbering important variables.

For instance, the submission by kake26 at gmail dot com will not only perfectly emulate register globals (that's bad), but it'll store it in a database and recall the same variables every time the script runs (essentially allowing an attacker to attack your script every time it runs via one attack). Oops!

To fix it, you'd have to get creative with flags. Maybe you could use EXTR_PREFIX_ALL instead of EXTR_OVERWRITE, for example. Of course, you should also sanitize the form elements to ensure there's no php code in them, and also to make sure any very important variables aren't in the form data. (like the classic $is_admin = true attack)`

[up](/manual/vote-note.php?id=46221&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=46221&page=function.extract&vote=down "Vote down!")

2

[***Adam Monsen <adamm at wazamatta dot com>***](#46221) [¶](#46221)**20 years ago**
`As shown in the example, if your 'prefix' is used, a single underscore is added to the name of the extracted variable. Meaning, a prefix of 'p' becomes a prefix of 'p_', so 'blarg' prefixed would be 'p_blarg'.

If you're not sure what variables you've created through extraction, you can call get_defined_vars() to see all defined variables in the current scope.`

[up](/manual/vote-note.php?id=50215&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=50215&page=function.extract&vote=down "Vote down!")

2

[***Anonymous***](#50215) [¶](#50215)**19 years ago**
`To make this perfectly clear (hopefully), an underscore is always added when the string is prefixed.
extract(array("color" => "blue"),EXTR_PREFIX_ALL,'');// note: prefix is empty
is the same as
$color='_blue';`

[up](/manual/vote-note.php?id=73852&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=73852&page=function.extract&vote=down "Vote down!")

2

[***Dutchdavey***](#73852) [¶](#73852)**17 years ago**
`I would draw your attention to the user note at the very end of this page regarding PREFIXES. The user points out that php adds a '_' to your prefixes.`

[up](/manual/vote-note.php?id=53378&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=53378&page=function.extract&vote=down "Vote down!")

1

[***anon at anon dot org***](#53378) [¶](#53378)**19 years ago**
`A warning about extract() and null values.

This might be an actual Zend2 Engine bug, but it's bad programming practice, so I'm sharing it here instead.

I often work in envrionments where E_STRICT (which would prevent errors like this) isn't on, and I don't have access to change it. I also use a very simple template class that in a nutshell works like this:

$t = new Template('somefile.php');
$t->title = $title;
$t->body = $body;
$t->display();

display() more or less looks like this:

function display(){
 extract(get_object_vars($this),EXTR_REFS);
 ob_start(); include $this->templateFileName;
 return ob_get_clean();
}

If any of the assigned values are null (let's say that in this case $title wasn't initialized above) it causes the engine to do all sorts of incredibly whacky stuff like certifiably lose track of variables in an incredibly inconsistent way. I traced the problem down to the fact that it's using the EXTR_REFS flag. I assume that in PHP's internal variable storage or reference counting mechanism, that trying to extract null references makes it lose track or count of something or rather.

In a nutshell, if you start getting wierd behavior when using extract() make sure that the array or object you are trying to get variables out of doesn't contain null keys or values!`

[up](/manual/vote-note.php?id=96370&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=96370&page=function.extract&vote=down "Vote down!")

0

[***auto493097 at hushmail dot com***](#96370) [¶](#96370)**14 years ago**
`I use XDebug with NetbeansIDE to for analyzing and developing PHP Code. When debugging an extract statement no new variables appeared in the variable's list. Although all variables created by extract could be examined by explicit watch items and single variables appeared as soon as an PHP script makes use of them I am not sure weather it is a wrong configuration, a feature or a bug in XDebug.`

[up](/manual/vote-note.php?id=47481&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=47481&page=function.extract&vote=down "Vote down!")

0

[***Aaron Stone***](#47481) [¶](#47481)**20 years ago**
`If you are working porting an older application, and taking the advice above, extracting only _SERVER, _SESSING, _COOKIE, _POST, _GET, you have forgotten to extract _FILES. Putting _FILES last and using EXTR_SKIP doesn't work because the name of the file upload box is already set as a variable containing only the temporary name of the uploaded file from one of the earlier extracts (I haven't tested to see which one specifically, however). A workaround is to put _FILES last and use EXTR_OVERWRITE. This allows extract to replace that temp-name-only variable with the full array of file upload information.`

[up](/manual/vote-note.php?id=126029&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=126029&page=function.extract&vote=down "Vote down!")

-1

[***darrenforster99 at gmail dot com***](#126029) [¶](#126029)**3 years ago**
`In response to Dan O'Donnell's note:

"Presumably one easy way of dealing with this security issue is to use the EXTR_IF_EXISTS flag and make sure"

Not necessarily - even using the EXTR_IF_EXISTS flag could be extremely dangerous - imagine this code running...

<?php

global $sql ;

function runSql ()
{
 $result = $conn->query($sql);
 $conn-> close();
 return $result;
}

function extractGet ()
{
 $name = '' ;
 $address = '' ;
 foreach ( $_GET as $key => $value )
 $_GET[$key] = urldecode ( $value ) ;
 extract($_GET,EXTR_IF_EXISTS);
 $sql = str_replace ( '{NAME}', $name, $sql ) ;
 $sql = str_replace ( '{ADDRESS}', $address, $sql ) ;
}

function outputResult ( $res )
{
 echo '<pre>'.print_r ( $res->fetch_array(MYSQLI_NUM) ).'</pre>' ;
}

$sql = 'SELECT postcode FROM Customers WHERE name={NAME} AND address={ADDRESS}';
extractGet () ;
$res = runSql () ;
outputResult ( $res ) ;
?>

Now can you see a massive security issue here...

seems all well and good if we had a url like

mycode.php?name=joe%20bloggs&address=20%20Any%20Street

as that would specifically find joe bloggs of 20 any street.

however what if someone typed in

mycode.php?sql=SELECT%20password%20FROM%20Customers

or even worse

mycode.php?sql=DELETE%20from%20Customers

The problem here is that even though as far as you're aware you defined both name and address as the only two empty variables within that function - you may have forgotten about global variables, and these global variables could cause major security issues

In the example above $sql is defined as "SELECT postcode FROM Customers WHERE name={NAME} AND address={ADDRESS}" which seems all well and good, and safe, and then later on str_replace in the extractGet function replaces {NAME} and {ADDRESS} with the name and address variables from $_GET - but if GET contains an SQL variable then that would overwrite the global $sql variable before the str_replace function - and if the str_replace function finds no matches it just returns the original string - in the above two examples the SQL string would be "SELECT password FROM Customers" which in the example outputResult just prints the data retrieved from the database and so in this stage it could print all the customers passwords (hopefully encrypted!) to the screen (oops!) or in the second example the SQL string would be "DELETE from Customers" - with no WHERE clause that would delete all the data from the Customers table and of course a combination of

SELECT table_name FROM information_schema.tables

and

DROP TABLE <table_name>

could be a real disaster!

Of course, this is only a basic example, but it could be quite easy to forget about global variables and these global variables could quite easily be used with extract to cause serious security risks if GET, REQUEST or POST is sent to extract!`

[up](/manual/vote-note.php?id=50955&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=50955&page=function.extract&vote=down "Vote down!")

-2

[***pg dot perfection at gmail dot com***](#50955) [¶](#50955)**19 years ago**
`Here is a little example of how an extraction method should look like when it needs to work recursive (work on nested_arrays too)...

Note that this is only an example, it can be done more easily, and more advanced too.

<?php
/**
 * A nested version of the extract () function.
 *
 * @param array $array The array which to extract the variables from
 * @param int $type The type to use to overwrite (follows the same as extract () on PHP 5.0.3
 * @param string $prefix The prefix to be used for a variable when necessary
 */
function extract_nested (&$array, $type = EXTR_OVERWRITE, $prefix = '')
{
 /**
 * Is the array really an array?
 */
 if (!is_array ($array))
 {
 return trigger_error ('extract_nested (): First argument should be an array', E_USER_WARNING);
 }

 /**
 * If the prefix is set, check if the prefix matches an acceptable regex pattern
 * (the one used for variables)
 */
 if (!empty ($prefix) && !preg_match ('#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#', $prefix))
 {
 return trigger_error ('extract_nested (): Third argument should start with a letter or an underscore', E_USER_WARNING);
 }

 /**
 * Check if a prefix is necessary. If so and it is empty return an error.
 */
 if (($type == EXTR_PREFIX_SAME || $type == EXTR_PREFIX_ALL || $type == EXTR_PREFIX_IF_EXISTS) && empty ($prefix))
 {
 return trigger_error ('extract_nested (): Prefix expected to be specified', E_USER_WARNING);
 }

 /**
 * Make sure the prefix is oke
 */
 $prefix = $prefix . '_';

 /**
 * Loop thru the array
 */
 foreach ($array as $key => $val)
 {
 /**
 * If the key isn't an array extract it as we need to do
 */
 if (!is_array ($array[$key]))
 {
 switch ($type)
 {
 default:
 case EXTR_OVERWRITE:
 $GLOBALS[$key] = $val;
 break;
 case EXTR_SKIP:
 $GLOBALS[$key] = isset ($GLOBALS[$key]) ? $GLOBALS[$key] : $val;
 break;
 case EXTR_PREFIX_SAME:
 if (isset ($GLOBALS[$key]))
 {
 $GLOBALS[$prefix . $key] = $val;
 }
 else
 {
 $GLOBALS[$key] = $val;
 }
 break;
 case EXTR_PREFIX_ALL:
 $GLOBALS[$prefix . $key] = $val;
 break;
 case EXTR_PREFIX_INVALID:
 if (!preg_match ('#^[a-zA-Z_\x7f-\xff]$#', $key{0}))
 {
 $GLOBALS[$prefix . $key] = $val;
 }
 else
 {
 $GLOBALS[$key] = $val;
 }
 break;
 case EXTR_IF_EXISTS:
 if (isset ($GLOBALS[$key]))
 {
 $GLOBALS[$key] = $val;
 }
 break;
 case EXTR_PREFIX_IF_EXISTS:
 if (isset ($GLOBALS[$key]))
 {
 $GLOBALS[$prefix . $key] = $val;
 }
 break;
 case EXTR_REFS:
 $GLOBALS[$key] =& $array[$key];
 break;
 }
 }
 /**
 * The key is an array... use the function on that index
 */
 else
 {
 extract_nested ($array[$key], $type, $prefix);
 }
 }
}
?>`

[up](/manual/vote-note.php?id=93113&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=93113&page=function.extract&vote=down "Vote down!")

-4

[***danbettles at yahoo dot co dot uk***](#93113) [¶](#93113)**15 years ago**
`When using EXTR_PREFIX_ALL - and probably all the other EXTR_PREFIX_* constants - and a numerically-indexed array, extract() will add an underscore ("_") between the prefix and the index.

<?php

extract(array('foo', 'bar'), EXTR_PREFIX_ALL, 'var');

print_r(get_defined_vars()); // Reveals $var_0 = 'foo' and $var_1 = 'bar'
?>`

[up](/manual/vote-note.php?id=60946&page=function.extract&vote=up "Vote up!")

[down](/manual/vote-note.php?id=60946&page=function.extract&vote=down "Vote down!")

-5

[***moslehi<atsign>gmail<d0t>c0m***](#60946) [¶](#60946)**18 years ago**
`Experimentally I found that calling extract() also shows the number of keys if the key is set and is not numeric ! Maybe there was a better definition than mine . Please have a look to this scripts :

<?PHP
$var["i"] = "a";
$var["j"] = "b";
$var["k"] = 1;
echo extract($var); // returns 3
?>

<?PHP
$var2["i"] = "a";
$var2[2] = "b";
$var2[] = 1;
echo extract($var2); // returns 1
?>

(Arash Moslehi)`

[＋add a note](/manual/add-note.php?sect=function.extract&repo=en&redirect=https://www.php.net/manual/en/function.extract.php)

* [Array Functions](ref.array.php)
  + [array](function.array.php "array")
  + [array\_​all](function.array-all.php "array_​all")
  + [array\_​any](function.array-any.php "array_​any")
  + [array\_​change\_​key\_​case](function.array-change-key-case.php "array_​change_​key_​case")
  + [array\_​chunk](function.array-chunk.php "array_​chunk")
  + [array\_​column](function.array-column.php "array_​column")
  + [array\_​combine](function.array-combine.php "array_​combine")
  + [array\_​count\_​values](function.array-count-values.php "array_​count_​values")
  + [array\_​diff](function.array-diff.php "array_​diff")
  + [array\_​diff\_​assoc](function.array-diff-assoc.php "array_​diff_​assoc")
  + [array\_​diff\_​key](function.array-diff-key.php "array_​diff_​key")
  + [array\_​diff\_​uassoc](function.array-diff-uassoc.php "array_​diff_​uassoc")
  + [array\_​diff\_​ukey](function.array-diff-ukey.php "array_​diff_​ukey")
  + [array\_​fill](function.array-fill.php "array_​fill")
  + [array\_​fill\_​keys](function.array-fill-keys.php "array_​fill_​keys")
  + [array\_​filter](function.array-filter.php "array_​filter")
  + [array\_​find](function.array-find.php "array_​find")
  + [array\_​find\_​key](function.array-find-key.php "array_​find_​key")
  + [array\_​flip](function.array-flip.php "array_​flip")
  + [array\_​intersect](function.array-intersect.php "array_​intersect")
  + [array\_​intersect\_​assoc](function.array-intersect-assoc.php "array_​intersect_​assoc")
  + [array\_​intersect\_​key](function.array-intersect-key.php "array_​intersect_​key")
  + [array\_​intersect\_​uassoc](function.array-intersect-uassoc.php "array_​intersect_​uassoc")
  + [array\_​intersect\_​ukey](function.array-intersect-ukey.php "array_​intersect_​ukey")
  + [array\_​is\_​list](function.array-is-list.php "array_​is_​list")
  + [array\_​key\_​exists](function.array-key-exists.php "array_​key_​exists")
  + [array\_​key\_​first](function.array-key-first.php "array_​key_​first")
  + [array\_​key\_​last](function.array-key-last.php "array_​key_​last")
  + [array\_​keys](function.array-keys.php "array_​keys")
  + [array\_​map](function.array-map.php "array_​map")
  + [array\_​merge](function.array-merge.php "array_​merge")
  + [array\_​merge\_​recursive](function.array-merge-recursive.php "array_​merge_​recursive")
  + [array\_​multisort](function.array-multisort.php "array_​multisort")
  + [array\_​pad](function.array-pad.php "array_​pad")
  + [array\_​pop](function.array-pop.php "array_​pop")
  + [array\_​product](function.array-product.php "array_​product")
  + [array\_​push](function.array-push.php "array_​push")
  + [array\_​rand](function.array-rand.php "array_​rand")
  + [array\_​reduce](function.array-reduce.php "array_​reduce")
  + [array\_​replace](function.array-replace.php "array_​replace")
  + [array\_​replace\_​recursive](function.array-replace-recursive.php "array_​replace_​recursive")
  + [array\_​reverse](function.array-reverse.php "array_​reverse")
  + [array\_​search](function.array-search.php "array_​search")
  + [array\_​shift](function.array-shift.php "array_​shift")
  + [array\_​slice](function.array-slice.php "array_​slice")
  + [array\_​splice](function.array-splice.php "array_​splice")
  + [array\_​sum](function.array-sum.php "array_​sum")
  + [array\_​udiff](function.array-udiff.php "array_​udiff")
  + [array\_​udiff\_​assoc](function.array-udiff-assoc.php "array_​udiff_​assoc")
  + [array\_​udiff\_​uassoc](function.array-udiff-uassoc.php "array_​udiff_​uassoc")
  + [array\_​uintersect](function.array-uintersect.php "array_​uintersect")
  + [array\_​uintersect\_​assoc](function.array-uintersect-assoc.php "array_​uintersect_​assoc")
  + [array\_​uintersect\_​uassoc](function.array-uintersect-uassoc.php "array_​uintersect_​uassoc")
  + [array\_​unique](function.array-unique.php "array_​unique")
  + [array\_​unshift](function.array-unshift.php "array_​unshift")
  + [array\_​values](function.array-values.php "array_​values")
  + [array\_​walk](function.array-walk.php "array_​walk")
  + [array\_​walk\_​recursive](function.array-walk-recursive.php "array_​walk_​recursive")
  + [arsort](function.arsort.php "arsort")
  + [asort](function.asort.php "asort")
  + [compact](function.compact.php "compact")
  + [count](function.count.php "count")
  + [current](function.current.php "current")
  + [end](function.end.php "end")
  + [extract](function.extract.php "extract")
  + [in\_​array](function.in-array.php "in_​array")
  + [key](function.key.php "key")
  + [key\_​exists](function.key-exists.php "key_​exists")
  + [krsort](function.krsort.php "krsort")
  + [ksort](function.ksort.php "ksort")
  + [list](function.list.php "list")
  + [natcasesort](function.natcasesort.php "natcasesort")
  + [natsort](function.natsort.php "natsort")
  + [next](function.next.php "next")
  + [pos](function.pos.php "pos")
  + [prev](function.prev.php "prev")
  + [range](function.range.php "range")
  + [reset](function.reset.php "reset")
  + [rsort](function.rsort.php "rsort")
  + [shuffle](function.shuffle.php "shuffle")
  + [sizeof](function.sizeof.php "sizeof")
  + [sort](function.sort.php "sort")
  + [uasort](function.uasort.php "uasort")
  + [uksort](function.uksort.php "uksort")
  + [usort](function.usort.php "usort")
* Deprecated
  + [each](function.each.php "each")

* [Copyright © 2001-2025 The PHP Documentation Group](/manual/en/copyright.php)
* [My PHP.net](/my.php)
* [Contact](/contact.php)
* [Other PHP.net sites](/sites.php)
* [Privacy policy](/privacy.php)

![To Top](/images/to-top@2x.png)

`↑` and `↓` to navigate •
`Enter` to select •
`Esc` to close

Press `Enter` without
selection to search using Google



=== Content from github.com_ffa05e6c_20250114_183355.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foutdoorbits%2Flittle-backup-box%2Fcommit%2Ff39f91cd05544b3eb18b59897c765d6ba9313faa)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foutdoorbits%2Flittle-backup-box%2Fcommit%2Ff39f91cd05544b3eb18b59897c765d6ba9313faa)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=outdoorbits%2Flittle-backup-box)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[outdoorbits](/outdoorbits)
/
**[little-backup-box](/outdoorbits/little-backup-box)**
Public

* [Notifications](/login?return_to=%2Foutdoorbits%2Flittle-backup-box) You must be signed in to change notification settings
* [Fork
  105](/login?return_to=%2Foutdoorbits%2Flittle-backup-box)
* [Star
   520](/login?return_to=%2Foutdoorbits%2Flittle-backup-box)

* [Code](/outdoorbits/little-backup-box)
* [Issues
  0](/outdoorbits/little-backup-box/issues)
* [Pull requests
  0](/outdoorbits/little-backup-box/pulls)
* [Discussions](/outdoorbits/little-backup-box/discussions)
* [Actions](/outdoorbits/little-backup-box/actions)
* [Projects
  0](/outdoorbits/little-backup-box/projects)
* [Wiki](/outdoorbits/little-backup-box/wiki)
* [Security](/outdoorbits/little-backup-box/security)
* [Insights](/outdoorbits/little-backup-box/pulse)

Additional navigation options

* [Code](/outdoorbits/little-backup-box)
* [Issues](/outdoorbits/little-backup-box/issues)
* [Pull requests](/outdoorbits/little-backup-box/pulls)
* [Discussions](/outdoorbits/little-backup-box/discussions)
* [Actions](/outdoorbits/little-backup-box/actions)
* [Projects](/outdoorbits/little-backup-box/projects)
* [Wiki](/outdoorbits/little-backup-box/wiki)
* [Security](/outdoorbits/little-backup-box/security)
* [Insights](/outdoorbits/little-backup-box/pulse)

## Commit

[Permalink](/outdoorbits/little-backup-box/commit/f39f91cd05544b3eb18b59897c765d6ba9313faa)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

security improvement

[Browse files](/outdoorbits/little-backup-box/tree/f39f91cd05544b3eb18b59897c765d6ba9313faa)
Browse the repository at this point in the history

* Loading branch information

outdoorbits
committed
Oct 3, 2023

1 parent
[ecf83ff](/outdoorbits/little-backup-box/commit/ecf83ff58dde3f177ca97568cf258a5625be6ed6)

commit f39f91c

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**27 additions**
and
**26 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* scripts

  + scripts/config.php
    [config.php](#diff-ecff5650bf0d5a22fc96276674e8b985297efc999c98c89d2145525d6beeaaa6)
  + scripts/view.php
    [view.php](#diff-d9c0b4121a68c2e7200e48bc69ac48230c4db24f9b90a75ae1c3a56784c60ac8)

## There are no files selected for viewing

3 changes: 2 additions & 1 deletion

3
[scripts/config.php](#diff-ecff5650bf0d5a22fc96276674e8b985297efc999c98c89d2145525d6beeaaa6 "scripts/config.php")

Show comments

[View file](/outdoorbits/little-backup-box/blob/f39f91cd05544b3eb18b59897c765d6ba9313faa/scripts/config.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -115,13 +115,14 @@ function check\_new\_password($title, $pwd\_1, $pwd\_2) { |
|  |  |  |
|  |  | function write\_config() { |
|  |  | # write config.cfg |
|  |  | extract ($\_POST); |
|  |  |  |
|  |  | global $WORKING\_DIR; |
|  |  | global $WIFI\_COUNTRY; |
|  |  | global $constants; |
|  |  | global $vpn\_types; |
|  |  |  |
|  |  | extract ($\_POST,EXTR\_SKIP); |
|  |  |  |
|  |  | list($conf\_BACKUP\_DEFAULT\_SOURCE,$conf\_BACKUP\_DEFAULT\_TARGET)=explode(" ",$BACKUP\_MODE,2); |
|  |  | list($conf\_BACKUP\_DEFAULT\_SOURCE2,$conf\_BACKUP\_DEFAULT\_TARGET2)=explode(" ",$BACKUP\_MODE\_2,2); |
|  |  |  |
| Expand Down | |  |

50 changes: 25 additions & 25 deletions

50
[scripts/view.php](#diff-d9c0b4121a68c2e7200e48bc69ac48230c4db24f9b90a75ae1c3a56784c60ac8 "scripts/view.php")

Show comments

[View file](/outdoorbits/little-backup-box/blob/f39f91cd05544b3eb18b59897c765d6ba9313faa/scripts/view.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -10,6 +10,10 @@ |
|  |  | $theme = $config["conf\_THEME"]; |
|  |  | $background = $config["conf\_BACKGROUND\_IMAGE"] == ""?"":"background='" . $constants["const\_MEDIA\_DIR"] . '/' . $constants["const\_BACKGROUND\_IMAGES\_DIR"] . "/" . $config["conf\_BACKGROUND\_IMAGE"] . "'"; |
|  |  |  |
|  |  | # read parameters |
|  |  | extract ($\_POST,EXTR\_SKIP); |
|  |  | extract ($\_GET,EXTR\_SKIP); |
|  |  |  |
|  |  | include("sub-popup.php"); |
|  |  |  |
|  |  | include("get-cloudservices.php"); |
| Expand Down  Expand Up | | @@ -181,37 +185,33 @@ function add\_to\_where($new\_where,$target\_array) { |
|  |  | $IMAGES\_PER\_PAGE\_OPTIONS = array ($constants['const\_VIEW\_GRID\_COLUMNS']\*5,$constants['const\_VIEW\_GRID\_COLUMNS']\*10,$constants['const\_VIEW\_GRID\_COLUMNS']\*20,$constants['const\_VIEW\_GRID\_COLUMNS']\*50); |
|  |  |  |
|  |  | # standard values |
|  |  | $filter\_medium = "-"; |
|  |  | $view\_mode = "grid"; |
|  |  | $filter\_images\_per\_page = $IMAGES\_PER\_PAGE\_OPTIONS[1]; |
|  |  | $filter\_directory = ""; |
|  |  | $filter\_date = "all"; |
|  |  | $filter\_rating = "all"; |
|  |  | $filter\_file\_type = "all"; |
|  |  | $filter\_file\_type\_extension = "all"; |
|  |  | $filter\_camera\_model\_name = "all"; |
|  |  | $filter\_variable\_field = ""; |
|  |  | $filter\_variable\_value = ""; |
|  |  | $ID = 0; |
|  |  | $IMAGE\_ID = 0; |
|  |  | $IMAGE\_ID\_PRE = 0; |
|  |  | $IMAGE\_ID\_POST = 0; |
|  |  | $IMAGE\_ID\_FIRST = 0; |
|  |  | $IMAGE\_ID\_LAST = 0; |
|  |  | $imagecount = 0; |
|  |  | $order\_by = "Create\_Date"; |
|  |  | $order\_dir = "DESC"; |
|  |  | $select\_offset = 0; |
|  |  | $filter\_medium = isset($filter\_medium) ? $filter\_medium : "-"; |
|  |  | $view\_mode = isset($view\_mode) ? $view\_mode : "grid"; |
|  |  | $filter\_images\_per\_page = isset($filter\_images\_per\_page) ? $filter\_images\_per\_page : $IMAGES\_PER\_PAGE\_OPTIONS[1]; |
|  |  | $filter\_directory = isset($filter\_directory) ? $filter\_directory : ""; |
|  |  | $filter\_date = isset($filter\_date) ? $filter\_date : "all"; |
|  |  | $filter\_rating = isset($filter\_rating) ? $filter\_rating : "all"; |
|  |  | $filter\_file\_type = isset($filter\_file\_type) ? $filter\_file\_type : "all"; |
|  |  | $filter\_file\_type\_extension = isset($filter\_file\_type\_extension) ? $filter\_file\_type\_extension : "all"; |
|  |  | $filter\_camera\_model\_name = isset($filter\_camera\_model\_name) ? $filter\_camera\_model\_name : "all"; |
|  |  | $filter\_variable\_field = isset($filter\_variable\_field) ? $filter\_variable\_field : ""; |
|  |  | $filter\_variable\_value = isset($filter\_variable\_value) ? $filter\_variable\_value : ""; |
|  |  | $ID = isset($ID) ? $ID : 0; |
|  |  | $IMAGE\_ID = isset($IMAGE\_ID) ? $IMAGE\_ID : 0; |
|  |  | $IMAGE\_ID\_PRE = isset($IMAGE\_ID\_PRE) ? $IMAGE\_ID\_PRE : 0; |
|  |  | $IMAGE\_ID\_POST = isset($IMAGE\_ID\_POST) ? $IMAGE\_ID\_POST : 0; |
|  |  | $IMAGE\_ID\_FIRST = isset($IMAGE\_ID\_FIRST) ? $IMAGE\_ID\_FIRST : 0; |
|  |  | $IMAGE\_ID\_LAST = isset($IMAGE\_ID\_LAST) ? $IMAGE\_ID\_LAST : 0; |
|  |  | $imagecount = isset($imagecount) ? $imagecount : 0; |
|  |  | $order\_by = isset($order\_by) ? $order\_by : "Create\_Date"; |
|  |  | $order\_dir = isset($order\_dir) ? $order\_dir : "DESC"; |
|  |  | $select\_offset = isset($select\_offset) ? $select\_offset : 0; |
|  |  |  |
|  |  | $FIELDS\_BLOCKED\_ARRAY = array( |
|  |  | "ID", |
|  |  | "ExifTool\_Version\_Number" |
|  |  | ); |
|  |  |  |
|  |  | # read parameters |
|  |  | extract ($\_POST); |
|  |  | extract ($\_GET); |
|  |  |  |
|  |  | ## security-checks |
|  |  | if (! in\_array($filter\_images\_per\_page,$IMAGES\_PER\_PAGE\_OPTIONS)) { |
|  |  | $filter\_images\_per\_page = $IMAGES\_PER\_PAGE\_OPTIONS[0]; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `f39f91c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foutdoorbits%2Flittle-backup-box%2Fcommit%2Ff39f91cd05544b3eb18b59897c765d6ba9313faa) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


