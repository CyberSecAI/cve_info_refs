=== Content from github.com_d7accf3e_20250114_200249.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=yiisoft%2Fyii2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[yiisoft](/yiisoft)
/
**[yii2](/yiisoft/yii2)**
Public

* [Notifications](/login?return_to=%2Fyiisoft%2Fyii2) You must be signed in to change notification settings
* [Fork
  6.9k](/login?return_to=%2Fyiisoft%2Fyii2)
* [Star
   14.3k](/login?return_to=%2Fyiisoft%2Fyii2)

* [Code](/yiisoft/yii2)
* [Issues
  428](/yiisoft/yii2/issues)
* [Pull requests
  94](/yiisoft/yii2/pulls)
* [Discussions](/yiisoft/yii2/discussions)
* [Actions](/yiisoft/yii2/actions)
* [Wiki](/yiisoft/yii2/wiki)
* [Security](/yiisoft/yii2/security)
* [Insights](/yiisoft/yii2/pulse)

Additional navigation options

* [Code](/yiisoft/yii2)
* [Issues](/yiisoft/yii2/issues)
* [Pull requests](/yiisoft/yii2/pulls)
* [Discussions](/yiisoft/yii2/discussions)
* [Actions](/yiisoft/yii2/actions)
* [Wiki](/yiisoft/yii2/wiki)
* [Security](/yiisoft/yii2/security)
* [Insights](/yiisoft/yii2/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fyiisoft%2Fyii2%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fyiisoft%2Fyii2%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Yii 2 <= 2.0.47 SQL Injection Vulnerability #19755

Closed

[cc7b3r](/cc7b3r) opened this issue
Feb 7, 2023
· 38 comments

Closed

# [Yii 2 <= 2.0.47 SQL Injection Vulnerability](#top) #19755

[cc7b3r](/cc7b3r) opened this issue
Feb 7, 2023
· 38 comments

Labels
[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)

## Comments

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

### **[cc7b3r](/cc7b3r)** commented [Feb 7, 2023](#issue-1575129238)

|  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Description**  Yii 2 Framework is a project used for PHP application development. Yii versions <= 2.0.47 are susceptible to a SQL injection vulnerability in its "yiibaseController::runAction($route,$params)" function. This vulnerability occurs when parameters received by the affected function are not properly sanitized.  **### What steps will reproduce the problem?**  A simple proof-of-concept test on the affected run could generate an injection into the database system:  yii\baseModule::runAction('PARAM0', ['VAR0' => 'INJECTION', 'VAR2' => 'PARAM2'])  **### What is the expected result?**  A parameter result not found or a badly formed query  **### What do you get instead?**  Syntax error or query executed directly on database system Additional info  | Q | A | | --- | --- | | Yii version | <= 2.0.47 | | PHP version | 7.1.33 | | Operating system | Linux / Debian - Apache 2.4.38 | |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 7, 2023](#issuecomment-1421597629)

| Show please your code with SQL in Controller / Action |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 7, 2023](#issuecomment-1421632551)

| Here is a snippet of the requested code which generates the injection:  in /.../yiisoft/yii2/base/Module.php at line 534– [yii\base\Controller::runAction]('cms', ['page' => **'PAG' or 1=1--'**, 'ad' => '0'])  ```   $parts = $this->createController($route);     if (is_array($parts)) {         /* @var $controller Controller */         list($controller, $actionID) = $parts;         $oldController = Yii::$app->controller;         Yii::$app->controller = $controller;         $result = $controller->**runAction($actionID, $params);**         if ($oldController !== null) {             Yii::$app->controller = $oldController;         }          return $result;     }  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 7, 2023](#issuecomment-1421655990) • edited Loading

| There is no queries to DB here. Show code where you use this params in query and catch injection |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 8, 2023](#issuecomment-1421684133) • edited Loading

| I think you not correct use ActiveQuery or QueryBuilder. And I’m not sure that is framework’s problem. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 8, 2023](#issuecomment-1421709133)

| Injection occurs when any element of the array in the $params variable contains any SQL statement, for example you can choose to use the following payload:  ' OR NOT 5406=5406#  It should look inside the function like this:  [yii\baseController::runAction]('cms', ['page' => 'PAG'' OR NOT 5406=5406#, 'ad' => '0'])  The following Payload generated a disclosure of internal information from the Database, here is an image of evidence:  [inyection](https://user-images.githubusercontent.com/11671143/217399107-3bbd1545-af1f-48cc-9f40-57a58c3a3f0d.png)  what you see in red is the injection.  In conclusion, I would suggest implementing a native function to sanitize any kind of variable that is sent, don't you think? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 8, 2023](#issuecomment-1422273055)

| Show here the code controller action, where you build the query. |
| --- |

 👍
4
 bizley, lubosdz, alinskydev, and flaviovs reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 9, 2023](#issuecomment-1423603416)

| Sorry my friend, this is very confidential information about the business logic, is there any other alternative?  Why in this project do you move the security of the requests to each user of the framework? Don't you think that could generate a security problem which can be managed more efficiently by sanitizing the incoming data received by that function?. |
| --- |

All reactions

Sorry, something went wrong.

[![@InsaneSkull](https://avatars.githubusercontent.com/u/14233668?s=80&u=527abc8fa4a64f13194fec5df0e98fc95ce98d98&v=4)](/InsaneSkull)

Copy link

Contributor

### **[InsaneSkull](/InsaneSkull)** commented [Feb 9, 2023](#issuecomment-1423631963)

| [@cc7b3r](https://github.com/cc7b3r) part of code where you build query will be helpful, you can replace confidential information with fake data. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 9, 2023](#issuecomment-1423724803)

| [@cc7b3r](https://github.com/cc7b3r) it looks like you are using some custom query building method without proper PDO params binding. Your example is suggesting that this is injected into the pagination but Yii's pagination is using LIMIT and OFFSET and on the screen I can see that the injection is a part of WHERE clause. So unless you can provide some minimal proof of the vulnerability we don't see any problem in the Yii's core. |
| --- |

 👍
2
 schmunk42 and DBX12 reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=40&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)
[bizley](/bizley)
added
the
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)
label
[Feb 9, 2023](#event-8476098403)

[![@yii-bot](https://avatars.githubusercontent.com/u/13490354?s=80&u=9d165455fe42aecbd31176fe59cbd2e416bf2d46&v=4)](/yii-bot)

Copy link

### **[yii-bot](/yii-bot)** commented [Feb 9, 2023](#issuecomment-1423724957)

| Thanks for posting in our issue tracker. In order to properly assist you, we need additional information:   * When does the issue occur? * What do you see? * What was the expected result? * Can you supply us with a stacktrace? (optional) * Do you have exact code to reproduce it? Maybe a PHPUnit tests that fails? (optional)   Thanks!  *This is an automated comment, triggered by adding the label `status:need more info`.* |
| --- |

All reactions

Sorry, something went wrong.

[![@samdark](https://avatars.githubusercontent.com/u/47294?s=40&u=86b987bc1dab8dc2f633ac833d10e95b23a5688e&v=4)](/samdark)
[samdark](/samdark)
added
the
[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
label
[Feb 9, 2023](#event-8476628930)

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426048067)

| Here is part of the code:  in TemplateController.php at line 108– yii\db\Command::queryAll()  $sql .= " and (dab.company = '' or dab.company is null) "; }  ```     $sql = \Yii::$app->db->createCommand($sql)->bindValue('pagename',$pageName);     $sql = \Yii::$app->db->createCommand($sql);     $space = $sql->queryAll();      $sql = "SELECT                 dab.id,                 dab.ubication,                 dab.carrousel,                 dab.position,  ```  The SQL being executed was:  SELECT dab.id,dab.ubication,dab.carrousel,dab.position,dab.html,dab.adapt,dab.text FROM pages AS p LEFT JOIN templates AS dab ON p.id=dab.id\_pag AND dab.status = 1 AND dab.position <> 0 WHERE dab.code='PAG'' AND dab.carrousel = 0 AND dab.adapt = 0 and (dab.company = '' or dab.company is null) |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426103029)

| Could you paste here the rest of the `$sql` string? |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426129037)

| SELECT dab.id,dab.ubication,dab.carrousel,dab.position,dab.html,dab.adapt,dab.text FROM pages AS p LEFT JOIN templates AS dab ON p.id=dab.id\_pag AND dab.status = 1 AND dab.position <> 0 WHERE dab.code='PAG'' AND dab.carrousel = 0 AND dab.adapt = 0 and (dab.company = '' or dab.company is null) |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426134073)

| what I was saying is that SQL code can be injected because it is passed without sanitizing or being escaped into the "dab.code" field. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426135359)

| Not the generated string, the code please. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426138059)

| I don't have the rest of the code because I am reporting the bug as a black box test and I don't have access to that code. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426144031)

| Perhaps part of the stack trace can give you more information:  [image](https://user-images.githubusercontent.com/11671143/218161045-1a75dbd4-ed48-4991-8269-66f80a1e8eef.png)  [image](https://user-images.githubusercontent.com/11671143/218161318-baa29c31-d0bc-410d-b74f-d16149ce2d2e.png)  [image](https://user-images.githubusercontent.com/11671143/218161366-dce92103-844c-4d41-bf63-1c7564ec2e9c.png)  [image](https://user-images.githubusercontent.com/11671143/218161439-543debd6-02b8-4072-9bb5-54d0331acf60.png) |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426155955)

| The problematic part is most probably in the code for this variable. If this is as you described "a black box" for you, you must report it to the person that owns that code. I'm closing this report now, if you can provide as with required information we'll gladly reopen it. |
| --- |

 👍
5
 schmunk42, karataserkan, diego-mathis, mikehaertl, and cebe reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=40&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)
[bizley](/bizley)
closed this as [completed](/yiisoft/yii2/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 10, 2023](#event-8492454402)

[![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=80&v=4)](/marcovtwout)

Copy link

Member

### **[marcovtwout](/marcovtwout)** commented [Apr 12, 2023](#issuecomment-1504799325)

| [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750>  If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid. |
| --- |

 👍
6
 bizley, diego-mathis, mikehaertl, schmunk42, eluhr, and StuTheWebGuy reacted with thumbs up emoji

All reactions

* 👍
  6 reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505381506)

| I see that a FIX was performed on the queryScalar method and which has to do with the construction of the ActiveQuery.  the documentation is at [#19790](https://github.com/yiisoft/yii2/pull/19790) |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=40&v=4)](/cc7b3r)
[cc7b3r](/cc7b3r)
mentioned this issue
[Apr 12, 2023](#ref-pullrequest-1630325055)

[Fix queryScalar method in \yii\db\Query #19789
#19790](/yiisoft/yii2/pull/19790)
 Closed

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505390813)

| I always wanted to ask myself why the user is not given the freedom to make his queries directly and the Frameworkn is not able by itself to be resilient with injections. Don't you think it can make a design problem? |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505392027)

| [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750>  If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid.  I reported the vulnerability because they closed the thread and I was never able to respond in time. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Apr 12, 2023](#issuecomment-1505398599)

| What do you mean? Who are "they"? Do you still claim that there is a point to keep CVE? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Apr 12, 2023](#issuecomment-1505410868)

| I propose that this CVE only affects one project and this project is not Yii2 |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505420335)

| Please,  [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750> If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid.  I reported the vulnerability because they closed the thread and I was never able to respond in time.  What do you mean? Who are "they"? Do you still claim that there is a point to keep CVE?  The CVE is the least of it, I would really like to understand why the user of the Framework is given the freedom to handle the statements in that way?  Shouldn't the framework limit that kind of bad practices or sanitize the default data once it receives any parameter that creates a new query instance? |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Apr 12, 2023](#issuecomment-1505431863)

| I'm not sure what you mean. We are not able to stop the developer creating vulnerable code if the code is not following best practices and the safety guides. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505446078)

| queryAll()  I'm not sure what you mean. We are not able to stop the developer creating vulnerable code if the code is not following best practices and the safety guides.  That is true, but one of the fundamental principles is to think in the worst-case scenario. Some constructors that receive the query do not sanitize the data before being sent to the faulty code created by the framework user, they are exposed above. |
| --- |

All reactions

Sorry, something went wrong.

[![@hyncica](https://avatars.githubusercontent.com/u/11272692?s=80&v=4)](/hyncica)

Copy link

### **[hyncica](/hyncica)** commented [Apr 12, 2023](#issuecomment-1505511891)

| Shouldn't the framework limit that kind of bad practices or sanitize the default data once it receives any parameter that creates a new query instance?  No it shouldn't. It's impossible to predict all use cases that developers will need to use the framework for. Not providing a method to execute SQL query developer want to execute may result in case where developer will be unable to implement some use case. Because of that responsibility for sanitizing inputs and for using best practices/safe methods must be on application developers not on framework. |
| --- |

All reactions

Sorry, something went wrong.

[![@diego-mathis](https://avatars.githubusercontent.com/u/22345162?s=80&u=ae3324e96ffa5739b49aa6aa6ab5b64631532ec9&v=4)](/diego-mathis)

Copy link

Contributor

### **[diego-mathis](/diego-mathis)** commented [Apr 12, 2023](#issuecomment-1505515871)

| Just follow best practices: <https://www.yiiframework.com/doc/guide/2.0/en/security-best-practices#avoiding-sql-injections> |
| --- |

 👍
4
 marcovtwout, cc7b3r, StuTheWebGuy, and GeorgeCadwallader reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=80&v=4)](/schmunk42)

Copy link

Contributor

### **[schmunk42](/schmunk42)** commented [Apr 12, 2023](#issuecomment-1505529007)

| [@cc7b3r](https://github.com/cc7b3r)  I reported the vulnerability because they closed the thread and I was never able to respond in time.  The thread was closed, because you were not able to give any useful information or code to reproduce the issue. I've seen similar stuff in several Security Audits and Pen-Tests and it was in 100% of the cases the fault of the project developer, not the framework.  You say you were not able to respond in time, but you had the time to create a CVE? This is just ridiculous, sorry to say that. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505560351)

| [@cc7b3r](https://github.com/cc7b3r)  I reported the vulnerability because they closed the thread and I was never able to respond in time.  The thread was closed, because you were not able to give any useful information or code to reproduce the issue. I've seen similar stuff in several Security Audits and Pen-Tests and it was in 100% of the cases the fault of the project developer, not the framework.  You say you were not able to respond in time, but you had the time to create a CVE? This is just ridiculous, sorry to say that.  Yes, that's why I reported the CVE. I still believe there is a problem, the risk of SQL injection cannot be transferred to the user of the framework because not all users follow best practices, so why not substantially minimize that problem from the framework design? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Apr 12, 2023](#issuecomment-1505573096)

| Why you not starting CVE to PHP `PDO::query` and others? |
| --- |

 🚀
8
 ailmanki, StuTheWebGuy, gg0h, TonisOrmisson, DBX12, amoliski, abudawud, and flaviovs reacted with rocket emoji

All reactions

* 🚀
  8 reactions

Sorry, something went wrong.

[![@ailmanki](https://avatars.githubusercontent.com/u/1570625?s=80&u=931800a98398c9e5a6a79fb37c37d9b7b53d9c1f&v=4)](/ailmanki)

Copy link

### **[ailmanki](/ailmanki)** commented [Apr 12, 2023](#issuecomment-1505601309)

| There seems to be a missunderstanding [@cc7b3r](https://github.com/cc7b3r) If you use the framework, that is the ActiveRecord and QueryBuilder properly, then there will be no SQL injections possible. But if you ignore how it should be used, then yes there are many ways to create SQL injections, there are many other ways to to cerate security problems as well. At least one would need to understand how to use it, which is describe in detail in the documentation.  Yii also allows to be extended, at which point you get a lot of ways to create security issues.  Since Yii has to communicate with a 3d party software - the database, and SQL Implementations being most often a turing complete language, there is only so much Yii can sanitize automatically - which if you use its code correctly - also works. You could already start to write SQL code instead of a tablename, where a tablename is expected and shoot yourself in the foot. This is basically the reason why SQL Injections are so prevalent. |
| --- |

All reactions

Sorry, something went wrong.

[![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=80&v=4)](/schmunk42)

Copy link

Contributor

### **[schmunk42](/schmunk42)** commented [Apr 12, 2023](#issuecomment-1505795276)

| [@cc7b3r](https://github.com/cc7b3r)  I still believe there is a problem  It's not about *believing*, give us some code to reproduce the issue, or even better: write a test-case. Everything else is just a waste of time.  My 2 cents. |
| --- |

 👍
5
 DeryabinSergey, marcovtwout, TonisOrmisson, DBX12, and nikitacontreras reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=80&v=4)](/marcovtwout)

Copy link

Member

### **[marcovtwout](/marcovtwout)** commented [Apr 13, 2023](#issuecomment-1506531748)

| The CVE record at MITRE is now marked as `DISPUTED`.  [@cc7b3r](https://github.com/cc7b3r) There really is no basis for a CVE here. You reported the issue based on a black box test for a specific client project without knowing what code actually causes the vulnerability. Even a hypothetical design problem is not relevant without you being able to demonstrate this is a framework issue, and as others have stated, it most likely is not. If you still wish to discuss this further, perhaps try one of the chat options here <https://www.yiiframework.com/chat>. But in any case please withdraw the CVE. |
| --- |

 👍
7
 schmunk42, rob006, cebe, cyril-amar, TonisOrmisson, DBX12, and smichae reacted with thumbs up emoji

All reactions

* 👍
  7 reactions

Sorry, something went wrong.

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=80&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)

Copy link

### **[iBotPeaches](/iBotPeaches)** commented [Aug 8, 2023](#issuecomment-1669896289)

| Sorry to dredge up an old thread, but alerting systems are flagging back to this via the [Advisory](https://github.com/advisories/GHSA-gq63-p39p-jrjf). I read the thread and its quite embarrassing how somehow a user gets into a position that request/obtain an CVE without a single shred of reproducible evidence against the framework. Its like some vendetta to take their point seriously by submitting non-sense.  It looks like this was then synced/created into GitHub Advisories at [GHSA-gq63-p39p-jrjf](https://github.com/advisories/GHSA-gq63-p39p-jrjf "GHSA-gq63-p39p-jrjf") in quite possibly the most embarrassing advisory I've seen. The title is grossly typo`d with:  ``` SQL injectionin Yii 2  ```  [@ccchapman](https://github.com/ccchapman) Put up a [PR](https://github.com/github/advisory-database/pull/2557) to help fix some of the request up to make it a bit more readable, but it makes 0 sense to me. The Advisory itself in the JSON file states it was not reviewed by GitHub  ```     "github_reviewed": false,     "github_reviewed_at": null, ```  But GitHub said it was reviewed?  [Screenshot 2023-08-08 at 12 00 24 PM](https://private-user-images.githubusercontent.com/611784/259158563-b4ecf983-992b-409c-9e64-3954152bf16f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY4ODUyNjYsIm5iZiI6MTczNjg4NDk2NiwicGF0aCI6Ii82MTE3ODQvMjU5MTU4NTYzLWI0ZWNmOTgzLTk5MmItNDA5Yy05ZTY0LTM5NTQxNTJiZjE2Zi5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNFQyMDAyNDZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0yNWRiNGMzOTVkZTRmOGQ3NmExZTkzNmJlNzEwZTFjODBhZTIyNWUwMzZkM2JlNGVkMDA3MTdjZmU2YTJlNGY4JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9._DQFkE1vVWmMZ17DJR_oQckWakJymzAsQn59b4TvtAU)  So we have a DISPUTED cve in MITRE, but it was pulled into GitHub Advisories, then Dependabot is telling people to just upgrade to 2.0.47 for some phantom patch of a non-existent problem?  [Screenshot 2023-08-08 at 11 58 16 AM](https://private-user-images.githubusercontent.com/611784/259157993-fca75006-8358-4dd1-943f-dea657a8911c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY4ODUyNjYsIm5iZiI6MTczNjg4NDk2NiwicGF0aCI6Ii82MTE3ODQvMjU5MTU3OTkzLWZjYTc1MDA2LTgzNTgtNGRkMS05NDNmLWRlYTY1N2E4OTExYy5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNFQyMDAyNDZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1jODBmMzM0ZmI1YTkyNWZkMjExN2I5YzdmZjRjNDE4ZTU1ZDgwYjQ1ZTUwOTg0ZDA5MTYwZDgzMGY1NmQ0YTZiJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.zldkOkDCQyIgUHTWH_j0GjhdcrtxWsjHr80jQGtW6pA)  Sure I can squash the warning from Dependabot by just upgrading to 2.0.47, but we know in this thread that nothing was changed to fix anything because nothing was found.  Should we request the Advisory be pulled? I saw in this [example](https://github.com/github/advisory-database/pull/445#issuecomment-1167770018) its how its handled when a similar situation occurred for Laravel. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Aug 8, 2023](#issuecomment-1669953948)

| We tried to make it rejected several times already and I don't know what else we can do. It's truly worrying to see how easy it is to make unproven claims like that and how far can the damage spread... |
| --- |

 👍
1
 alinskydev reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=40&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)
[iBotPeaches](/iBotPeaches)
mentioned this issue
[Aug 8, 2023](#ref-pullrequest-1841664514)

[[GHSA-gq63-p39p-jrjf] SQL injectionin Yii 2
github/advisory-database#2607](/github/advisory-database/pull/2607)
 Merged

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=80&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)

Copy link

### **[iBotPeaches](/iBotPeaches)** commented [Aug 8, 2023](#issuecomment-1669973725)

| Okay thanks. I took a stab at getting this withdrawn - [github/advisory-database#2607](https://github.com/github/advisory-database/pull/2607) |
| --- |

 👍
2
 bizley and rob006 reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@Marcono1234](https://avatars.githubusercontent.com/u/11685886?s=40&v=4)](/Marcono1234)
[Marcono1234](/Marcono1234)
mentioned this issue
[Sep 10, 2023](#ref-issue-1889134036)

[Extend GitHub's CNA scope
github/advisory-database#2718](/github/advisory-database/issues/2718)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

Assignees

No one assigned

Labels

[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

12 participants

[![@samdark](https://avatars.githubusercontent.com/u/47294?s=52&v=4)](/samdark) [![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=52&v=4)](/marcovtwout) [![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=52&v=4)](/iBotPeaches) [![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=52&v=4)](/schmunk42) [![@ailmanki](https://avatars.githubusercontent.com/u/1570625?s=52&v=4)](/ailmanki) [![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=52&v=4)](/DeryabinSergey) [![@bizley](https://avatars.githubusercontent.com/u/8577314?s=52&v=4)](/bizley) [![@hyncica](https://avatars.githubusercontent.com/u/11272692?s=52&v=4)](/hyncica) [![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=52&v=4)](/cc7b3r) [![@yii-bot](https://avatars.githubusercontent.com/u/13490354?s=52&v=4)](/yii-bot) [![@InsaneSkull](https://avatars.githubusercontent.com/u/14233668?s=52&v=4)](/InsaneSkull) [![@diego-mathis](https://avatars.githubusercontent.com/u/22345162?s=52&v=4)](/diego-mathis)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f306dba8_20250114_200254.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=yiisoft%2Fyii2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[yiisoft](/yiisoft)
/
**[yii2](/yiisoft/yii2)**
Public

* [Notifications](/login?return_to=%2Fyiisoft%2Fyii2) You must be signed in to change notification settings
* [Fork
  6.9k](/login?return_to=%2Fyiisoft%2Fyii2)
* [Star
   14.3k](/login?return_to=%2Fyiisoft%2Fyii2)

* [Code](/yiisoft/yii2)
* [Issues
  428](/yiisoft/yii2/issues)
* [Pull requests
  94](/yiisoft/yii2/pulls)
* [Discussions](/yiisoft/yii2/discussions)
* [Actions](/yiisoft/yii2/actions)
* [Wiki](/yiisoft/yii2/wiki)
* [Security](/yiisoft/yii2/security)
* [Insights](/yiisoft/yii2/pulse)

Additional navigation options

* [Code](/yiisoft/yii2)
* [Issues](/yiisoft/yii2/issues)
* [Pull requests](/yiisoft/yii2/pulls)
* [Discussions](/yiisoft/yii2/discussions)
* [Actions](/yiisoft/yii2/actions)
* [Wiki](/yiisoft/yii2/wiki)
* [Security](/yiisoft/yii2/security)
* [Insights](/yiisoft/yii2/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fyiisoft%2Fyii2%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fyiisoft%2Fyii2%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Yii 2 <= 2.0.47 SQL Injection Vulnerability #19755

Closed

[cc7b3r](/cc7b3r) opened this issue
Feb 7, 2023
· 38 comments

Closed

# [Yii 2 <= 2.0.47 SQL Injection Vulnerability](#top) #19755

[cc7b3r](/cc7b3r) opened this issue
Feb 7, 2023
· 38 comments

Labels
[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)

## Comments

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

### **[cc7b3r](/cc7b3r)** commented [Feb 7, 2023](#issue-1575129238)

|  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Description**  Yii 2 Framework is a project used for PHP application development. Yii versions <= 2.0.47 are susceptible to a SQL injection vulnerability in its "yiibaseController::runAction($route,$params)" function. This vulnerability occurs when parameters received by the affected function are not properly sanitized.  **### What steps will reproduce the problem?**  A simple proof-of-concept test on the affected run could generate an injection into the database system:  yii\baseModule::runAction('PARAM0', ['VAR0' => 'INJECTION', 'VAR2' => 'PARAM2'])  **### What is the expected result?**  A parameter result not found or a badly formed query  **### What do you get instead?**  Syntax error or query executed directly on database system Additional info  | Q | A | | --- | --- | | Yii version | <= 2.0.47 | | PHP version | 7.1.33 | | Operating system | Linux / Debian - Apache 2.4.38 | |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 7, 2023](#issuecomment-1421597629)

| Show please your code with SQL in Controller / Action |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 7, 2023](#issuecomment-1421632551)

| Here is a snippet of the requested code which generates the injection:  in /.../yiisoft/yii2/base/Module.php at line 534– [yii\base\Controller::runAction]('cms', ['page' => **'PAG' or 1=1--'**, 'ad' => '0'])  ```   $parts = $this->createController($route);     if (is_array($parts)) {         /* @var $controller Controller */         list($controller, $actionID) = $parts;         $oldController = Yii::$app->controller;         Yii::$app->controller = $controller;         $result = $controller->**runAction($actionID, $params);**         if ($oldController !== null) {             Yii::$app->controller = $oldController;         }          return $result;     }  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 7, 2023](#issuecomment-1421655990) • edited Loading

| There is no queries to DB here. Show code where you use this params in query and catch injection |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 8, 2023](#issuecomment-1421684133) • edited Loading

| I think you not correct use ActiveQuery or QueryBuilder. And I’m not sure that is framework’s problem. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 8, 2023](#issuecomment-1421709133)

| Injection occurs when any element of the array in the $params variable contains any SQL statement, for example you can choose to use the following payload:  ' OR NOT 5406=5406#  It should look inside the function like this:  [yii\baseController::runAction]('cms', ['page' => 'PAG'' OR NOT 5406=5406#, 'ad' => '0'])  The following Payload generated a disclosure of internal information from the Database, here is an image of evidence:  [inyection](https://user-images.githubusercontent.com/11671143/217399107-3bbd1545-af1f-48cc-9f40-57a58c3a3f0d.png)  what you see in red is the injection.  In conclusion, I would suggest implementing a native function to sanitize any kind of variable that is sent, don't you think? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 8, 2023](#issuecomment-1422273055)

| Show here the code controller action, where you build the query. |
| --- |

 👍
4
 bizley, lubosdz, alinskydev, and flaviovs reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 9, 2023](#issuecomment-1423603416)

| Sorry my friend, this is very confidential information about the business logic, is there any other alternative?  Why in this project do you move the security of the requests to each user of the framework? Don't you think that could generate a security problem which can be managed more efficiently by sanitizing the incoming data received by that function?. |
| --- |

All reactions

Sorry, something went wrong.

[![@InsaneSkull](https://avatars.githubusercontent.com/u/14233668?s=80&u=527abc8fa4a64f13194fec5df0e98fc95ce98d98&v=4)](/InsaneSkull)

Copy link

Contributor

### **[InsaneSkull](/InsaneSkull)** commented [Feb 9, 2023](#issuecomment-1423631963)

| [@cc7b3r](https://github.com/cc7b3r) part of code where you build query will be helpful, you can replace confidential information with fake data. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 9, 2023](#issuecomment-1423724803)

| [@cc7b3r](https://github.com/cc7b3r) it looks like you are using some custom query building method without proper PDO params binding. Your example is suggesting that this is injected into the pagination but Yii's pagination is using LIMIT and OFFSET and on the screen I can see that the injection is a part of WHERE clause. So unless you can provide some minimal proof of the vulnerability we don't see any problem in the Yii's core. |
| --- |

 👍
2
 schmunk42 and DBX12 reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=40&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)
[bizley](/bizley)
added
the
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)
label
[Feb 9, 2023](#event-8476098403)

[![@yii-bot](https://avatars.githubusercontent.com/u/13490354?s=80&u=9d165455fe42aecbd31176fe59cbd2e416bf2d46&v=4)](/yii-bot)

Copy link

### **[yii-bot](/yii-bot)** commented [Feb 9, 2023](#issuecomment-1423724957)

| Thanks for posting in our issue tracker. In order to properly assist you, we need additional information:   * When does the issue occur? * What do you see? * What was the expected result? * Can you supply us with a stacktrace? (optional) * Do you have exact code to reproduce it? Maybe a PHPUnit tests that fails? (optional)   Thanks!  *This is an automated comment, triggered by adding the label `status:need more info`.* |
| --- |

All reactions

Sorry, something went wrong.

[![@samdark](https://avatars.githubusercontent.com/u/47294?s=40&u=86b987bc1dab8dc2f633ac833d10e95b23a5688e&v=4)](/samdark)
[samdark](/samdark)
added
the
[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
label
[Feb 9, 2023](#event-8476628930)

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426048067)

| Here is part of the code:  in TemplateController.php at line 108– yii\db\Command::queryAll()  $sql .= " and (dab.company = '' or dab.company is null) "; }  ```     $sql = \Yii::$app->db->createCommand($sql)->bindValue('pagename',$pageName);     $sql = \Yii::$app->db->createCommand($sql);     $space = $sql->queryAll();      $sql = "SELECT                 dab.id,                 dab.ubication,                 dab.carrousel,                 dab.position,  ```  The SQL being executed was:  SELECT dab.id,dab.ubication,dab.carrousel,dab.position,dab.html,dab.adapt,dab.text FROM pages AS p LEFT JOIN templates AS dab ON p.id=dab.id\_pag AND dab.status = 1 AND dab.position <> 0 WHERE dab.code='PAG'' AND dab.carrousel = 0 AND dab.adapt = 0 and (dab.company = '' or dab.company is null) |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426103029)

| Could you paste here the rest of the `$sql` string? |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426129037)

| SELECT dab.id,dab.ubication,dab.carrousel,dab.position,dab.html,dab.adapt,dab.text FROM pages AS p LEFT JOIN templates AS dab ON p.id=dab.id\_pag AND dab.status = 1 AND dab.position <> 0 WHERE dab.code='PAG'' AND dab.carrousel = 0 AND dab.adapt = 0 and (dab.company = '' or dab.company is null) |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426134073)

| what I was saying is that SQL code can be injected because it is passed without sanitizing or being escaped into the "dab.code" field. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426135359)

| Not the generated string, the code please. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426138059)

| I don't have the rest of the code because I am reporting the bug as a black box test and I don't have access to that code. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426144031)

| Perhaps part of the stack trace can give you more information:  [image](https://user-images.githubusercontent.com/11671143/218161045-1a75dbd4-ed48-4991-8269-66f80a1e8eef.png)  [image](https://user-images.githubusercontent.com/11671143/218161318-baa29c31-d0bc-410d-b74f-d16149ce2d2e.png)  [image](https://user-images.githubusercontent.com/11671143/218161366-dce92103-844c-4d41-bf63-1c7564ec2e9c.png)  [image](https://user-images.githubusercontent.com/11671143/218161439-543debd6-02b8-4072-9bb5-54d0331acf60.png) |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426155955)

| The problematic part is most probably in the code for this variable. If this is as you described "a black box" for you, you must report it to the person that owns that code. I'm closing this report now, if you can provide as with required information we'll gladly reopen it. |
| --- |

 👍
5
 schmunk42, karataserkan, diego-mathis, mikehaertl, and cebe reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=40&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)
[bizley](/bizley)
closed this as [completed](/yiisoft/yii2/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 10, 2023](#event-8492454402)

[![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=80&v=4)](/marcovtwout)

Copy link

Member

### **[marcovtwout](/marcovtwout)** commented [Apr 12, 2023](#issuecomment-1504799325)

| [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750>  If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid. |
| --- |

 👍
6
 bizley, diego-mathis, mikehaertl, schmunk42, eluhr, and StuTheWebGuy reacted with thumbs up emoji

All reactions

* 👍
  6 reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505381506)

| I see that a FIX was performed on the queryScalar method and which has to do with the construction of the ActiveQuery.  the documentation is at [#19790](https://github.com/yiisoft/yii2/pull/19790) |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=40&v=4)](/cc7b3r)
[cc7b3r](/cc7b3r)
mentioned this issue
[Apr 12, 2023](#ref-pullrequest-1630325055)

[Fix queryScalar method in \yii\db\Query #19789
#19790](/yiisoft/yii2/pull/19790)
 Closed

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505390813)

| I always wanted to ask myself why the user is not given the freedom to make his queries directly and the Frameworkn is not able by itself to be resilient with injections. Don't you think it can make a design problem? |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505392027)

| [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750>  If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid.  I reported the vulnerability because they closed the thread and I was never able to respond in time. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Apr 12, 2023](#issuecomment-1505398599)

| What do you mean? Who are "they"? Do you still claim that there is a point to keep CVE? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Apr 12, 2023](#issuecomment-1505410868)

| I propose that this CVE only affects one project and this project is not Yii2 |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505420335)

| Please,  [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750> If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid.  I reported the vulnerability because they closed the thread and I was never able to respond in time.  What do you mean? Who are "they"? Do you still claim that there is a point to keep CVE?  The CVE is the least of it, I would really like to understand why the user of the Framework is given the freedom to handle the statements in that way?  Shouldn't the framework limit that kind of bad practices or sanitize the default data once it receives any parameter that creates a new query instance? |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Apr 12, 2023](#issuecomment-1505431863)

| I'm not sure what you mean. We are not able to stop the developer creating vulnerable code if the code is not following best practices and the safety guides. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505446078)

| queryAll()  I'm not sure what you mean. We are not able to stop the developer creating vulnerable code if the code is not following best practices and the safety guides.  That is true, but one of the fundamental principles is to think in the worst-case scenario. Some constructors that receive the query do not sanitize the data before being sent to the faulty code created by the framework user, they are exposed above. |
| --- |

All reactions

Sorry, something went wrong.

[![@hyncica](https://avatars.githubusercontent.com/u/11272692?s=80&v=4)](/hyncica)

Copy link

### **[hyncica](/hyncica)** commented [Apr 12, 2023](#issuecomment-1505511891)

| Shouldn't the framework limit that kind of bad practices or sanitize the default data once it receives any parameter that creates a new query instance?  No it shouldn't. It's impossible to predict all use cases that developers will need to use the framework for. Not providing a method to execute SQL query developer want to execute may result in case where developer will be unable to implement some use case. Because of that responsibility for sanitizing inputs and for using best practices/safe methods must be on application developers not on framework. |
| --- |

All reactions

Sorry, something went wrong.

[![@diego-mathis](https://avatars.githubusercontent.com/u/22345162?s=80&u=ae3324e96ffa5739b49aa6aa6ab5b64631532ec9&v=4)](/diego-mathis)

Copy link

Contributor

### **[diego-mathis](/diego-mathis)** commented [Apr 12, 2023](#issuecomment-1505515871)

| Just follow best practices: <https://www.yiiframework.com/doc/guide/2.0/en/security-best-practices#avoiding-sql-injections> |
| --- |

 👍
4
 marcovtwout, cc7b3r, StuTheWebGuy, and GeorgeCadwallader reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=80&v=4)](/schmunk42)

Copy link

Contributor

### **[schmunk42](/schmunk42)** commented [Apr 12, 2023](#issuecomment-1505529007)

| [@cc7b3r](https://github.com/cc7b3r)  I reported the vulnerability because they closed the thread and I was never able to respond in time.  The thread was closed, because you were not able to give any useful information or code to reproduce the issue. I've seen similar stuff in several Security Audits and Pen-Tests and it was in 100% of the cases the fault of the project developer, not the framework.  You say you were not able to respond in time, but you had the time to create a CVE? This is just ridiculous, sorry to say that. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505560351)

| [@cc7b3r](https://github.com/cc7b3r)  I reported the vulnerability because they closed the thread and I was never able to respond in time.  The thread was closed, because you were not able to give any useful information or code to reproduce the issue. I've seen similar stuff in several Security Audits and Pen-Tests and it was in 100% of the cases the fault of the project developer, not the framework.  You say you were not able to respond in time, but you had the time to create a CVE? This is just ridiculous, sorry to say that.  Yes, that's why I reported the CVE. I still believe there is a problem, the risk of SQL injection cannot be transferred to the user of the framework because not all users follow best practices, so why not substantially minimize that problem from the framework design? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Apr 12, 2023](#issuecomment-1505573096)

| Why you not starting CVE to PHP `PDO::query` and others? |
| --- |

 🚀
8
 ailmanki, StuTheWebGuy, gg0h, TonisOrmisson, DBX12, amoliski, abudawud, and flaviovs reacted with rocket emoji

All reactions

* 🚀
  8 reactions

Sorry, something went wrong.

[![@ailmanki](https://avatars.githubusercontent.com/u/1570625?s=80&u=931800a98398c9e5a6a79fb37c37d9b7b53d9c1f&v=4)](/ailmanki)

Copy link

### **[ailmanki](/ailmanki)** commented [Apr 12, 2023](#issuecomment-1505601309)

| There seems to be a missunderstanding [@cc7b3r](https://github.com/cc7b3r) If you use the framework, that is the ActiveRecord and QueryBuilder properly, then there will be no SQL injections possible. But if you ignore how it should be used, then yes there are many ways to create SQL injections, there are many other ways to to cerate security problems as well. At least one would need to understand how to use it, which is describe in detail in the documentation.  Yii also allows to be extended, at which point you get a lot of ways to create security issues.  Since Yii has to communicate with a 3d party software - the database, and SQL Implementations being most often a turing complete language, there is only so much Yii can sanitize automatically - which if you use its code correctly - also works. You could already start to write SQL code instead of a tablename, where a tablename is expected and shoot yourself in the foot. This is basically the reason why SQL Injections are so prevalent. |
| --- |

All reactions

Sorry, something went wrong.

[![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=80&v=4)](/schmunk42)

Copy link

Contributor

### **[schmunk42](/schmunk42)** commented [Apr 12, 2023](#issuecomment-1505795276)

| [@cc7b3r](https://github.com/cc7b3r)  I still believe there is a problem  It's not about *believing*, give us some code to reproduce the issue, or even better: write a test-case. Everything else is just a waste of time.  My 2 cents. |
| --- |

 👍
5
 DeryabinSergey, marcovtwout, TonisOrmisson, DBX12, and nikitacontreras reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=80&v=4)](/marcovtwout)

Copy link

Member

### **[marcovtwout](/marcovtwout)** commented [Apr 13, 2023](#issuecomment-1506531748)

| The CVE record at MITRE is now marked as `DISPUTED`.  [@cc7b3r](https://github.com/cc7b3r) There really is no basis for a CVE here. You reported the issue based on a black box test for a specific client project without knowing what code actually causes the vulnerability. Even a hypothetical design problem is not relevant without you being able to demonstrate this is a framework issue, and as others have stated, it most likely is not. If you still wish to discuss this further, perhaps try one of the chat options here <https://www.yiiframework.com/chat>. But in any case please withdraw the CVE. |
| --- |

 👍
7
 schmunk42, rob006, cebe, cyril-amar, TonisOrmisson, DBX12, and smichae reacted with thumbs up emoji

All reactions

* 👍
  7 reactions

Sorry, something went wrong.

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=80&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)

Copy link

### **[iBotPeaches](/iBotPeaches)** commented [Aug 8, 2023](#issuecomment-1669896289)

| Sorry to dredge up an old thread, but alerting systems are flagging back to this via the [Advisory](https://github.com/advisories/GHSA-gq63-p39p-jrjf). I read the thread and its quite embarrassing how somehow a user gets into a position that request/obtain an CVE without a single shred of reproducible evidence against the framework. Its like some vendetta to take their point seriously by submitting non-sense.  It looks like this was then synced/created into GitHub Advisories at [GHSA-gq63-p39p-jrjf](https://github.com/advisories/GHSA-gq63-p39p-jrjf "GHSA-gq63-p39p-jrjf") in quite possibly the most embarrassing advisory I've seen. The title is grossly typo`d with:  ``` SQL injectionin Yii 2  ```  [@ccchapman](https://github.com/ccchapman) Put up a [PR](https://github.com/github/advisory-database/pull/2557) to help fix some of the request up to make it a bit more readable, but it makes 0 sense to me. The Advisory itself in the JSON file states it was not reviewed by GitHub  ```     "github_reviewed": false,     "github_reviewed_at": null, ```  But GitHub said it was reviewed?  [Screenshot 2023-08-08 at 12 00 24 PM](https://private-user-images.githubusercontent.com/611784/259158563-b4ecf983-992b-409c-9e64-3954152bf16f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY4ODUyNjYsIm5iZiI6MTczNjg4NDk2NiwicGF0aCI6Ii82MTE3ODQvMjU5MTU4NTYzLWI0ZWNmOTgzLTk5MmItNDA5Yy05ZTY0LTM5NTQxNTJiZjE2Zi5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNFQyMDAyNDZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0yNWRiNGMzOTVkZTRmOGQ3NmExZTkzNmJlNzEwZTFjODBhZTIyNWUwMzZkM2JlNGVkMDA3MTdjZmU2YTJlNGY4JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9._DQFkE1vVWmMZ17DJR_oQckWakJymzAsQn59b4TvtAU)  So we have a DISPUTED cve in MITRE, but it was pulled into GitHub Advisories, then Dependabot is telling people to just upgrade to 2.0.47 for some phantom patch of a non-existent problem?  [Screenshot 2023-08-08 at 11 58 16 AM](https://private-user-images.githubusercontent.com/611784/259157993-fca75006-8358-4dd1-943f-dea657a8911c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY4ODUyNjYsIm5iZiI6MTczNjg4NDk2NiwicGF0aCI6Ii82MTE3ODQvMjU5MTU3OTkzLWZjYTc1MDA2LTgzNTgtNGRkMS05NDNmLWRlYTY1N2E4OTExYy5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNFQyMDAyNDZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1jODBmMzM0ZmI1YTkyNWZkMjExN2I5YzdmZjRjNDE4ZTU1ZDgwYjQ1ZTUwOTg0ZDA5MTYwZDgzMGY1NmQ0YTZiJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.zldkOkDCQyIgUHTWH_j0GjhdcrtxWsjHr80jQGtW6pA)  Sure I can squash the warning from Dependabot by just upgrading to 2.0.47, but we know in this thread that nothing was changed to fix anything because nothing was found.  Should we request the Advisory be pulled? I saw in this [example](https://github.com/github/advisory-database/pull/445#issuecomment-1167770018) its how its handled when a similar situation occurred for Laravel. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Aug 8, 2023](#issuecomment-1669953948)

| We tried to make it rejected several times already and I don't know what else we can do. It's truly worrying to see how easy it is to make unproven claims like that and how far can the damage spread... |
| --- |

 👍
1
 alinskydev reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=40&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)
[iBotPeaches](/iBotPeaches)
mentioned this issue
[Aug 8, 2023](#ref-pullrequest-1841664514)

[[GHSA-gq63-p39p-jrjf] SQL injectionin Yii 2
github/advisory-database#2607](/github/advisory-database/pull/2607)
 Merged

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=80&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)

Copy link

### **[iBotPeaches](/iBotPeaches)** commented [Aug 8, 2023](#issuecomment-1669973725)

| Okay thanks. I took a stab at getting this withdrawn - [github/advisory-database#2607](https://github.com/github/advisory-database/pull/2607) |
| --- |

 👍
2
 bizley and rob006 reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@Marcono1234](https://avatars.githubusercontent.com/u/11685886?s=40&v=4)](/Marcono1234)
[Marcono1234](/Marcono1234)
mentioned this issue
[Sep 10, 2023](#ref-issue-1889134036)

[Extend GitHub's CNA scope
github/advisory-database#2718](/github/advisory-database/issues/2718)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

Assignees

No one assigned

Labels

[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

12 participants

[![@samdark](https://avatars.githubusercontent.com/u/47294?s=52&v=4)](/samdark) [![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=52&v=4)](/marcovtwout) [![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=52&v=4)](/iBotPeaches) [![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=52&v=4)](/schmunk42) [![@ailmanki](https://avatars.githubusercontent.com/u/1570625?s=52&v=4)](/ailmanki) [![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=52&v=4)](/DeryabinSergey) [![@bizley](https://avatars.githubusercontent.com/u/8577314?s=52&v=4)](/bizley) [![@hyncica](https://avatars.githubusercontent.com/u/11272692?s=52&v=4)](/hyncica) [![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=52&v=4)](/cc7b3r) [![@yii-bot](https://avatars.githubusercontent.com/u/13490354?s=52&v=4)](/yii-bot) [![@InsaneSkull](https://avatars.githubusercontent.com/u/14233668?s=52&v=4)](/InsaneSkull) [![@diego-mathis](https://avatars.githubusercontent.com/u/22345162?s=52&v=4)](/diego-mathis)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_68ef9b9f_20250114_200250.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=yiisoft%2Fyii2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[yiisoft](/yiisoft)
/
**[yii2](/yiisoft/yii2)**
Public

* [Notifications](/login?return_to=%2Fyiisoft%2Fyii2) You must be signed in to change notification settings
* [Fork
  6.9k](/login?return_to=%2Fyiisoft%2Fyii2)
* [Star
   14.3k](/login?return_to=%2Fyiisoft%2Fyii2)

* [Code](/yiisoft/yii2)
* [Issues
  428](/yiisoft/yii2/issues)
* [Pull requests
  94](/yiisoft/yii2/pulls)
* [Discussions](/yiisoft/yii2/discussions)
* [Actions](/yiisoft/yii2/actions)
* [Wiki](/yiisoft/yii2/wiki)
* [Security](/yiisoft/yii2/security)
* [Insights](/yiisoft/yii2/pulse)

Additional navigation options

* [Code](/yiisoft/yii2)
* [Issues](/yiisoft/yii2/issues)
* [Pull requests](/yiisoft/yii2/pulls)
* [Discussions](/yiisoft/yii2/discussions)
* [Actions](/yiisoft/yii2/actions)
* [Wiki](/yiisoft/yii2/wiki)
* [Security](/yiisoft/yii2/security)
* [Insights](/yiisoft/yii2/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fyiisoft%2Fyii2%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fyiisoft%2Fyii2%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Yii 2 <= 2.0.47 SQL Injection Vulnerability #19755

Closed

[cc7b3r](/cc7b3r) opened this issue
Feb 7, 2023
· 38 comments

Closed

# [Yii 2 <= 2.0.47 SQL Injection Vulnerability](#top) #19755

[cc7b3r](/cc7b3r) opened this issue
Feb 7, 2023
· 38 comments

Labels
[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)

## Comments

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

### **[cc7b3r](/cc7b3r)** commented [Feb 7, 2023](#issue-1575129238)

|  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Description**  Yii 2 Framework is a project used for PHP application development. Yii versions <= 2.0.47 are susceptible to a SQL injection vulnerability in its "yiibaseController::runAction($route,$params)" function. This vulnerability occurs when parameters received by the affected function are not properly sanitized.  **### What steps will reproduce the problem?**  A simple proof-of-concept test on the affected run could generate an injection into the database system:  yii\baseModule::runAction('PARAM0', ['VAR0' => 'INJECTION', 'VAR2' => 'PARAM2'])  **### What is the expected result?**  A parameter result not found or a badly formed query  **### What do you get instead?**  Syntax error or query executed directly on database system Additional info  | Q | A | | --- | --- | | Yii version | <= 2.0.47 | | PHP version | 7.1.33 | | Operating system | Linux / Debian - Apache 2.4.38 | |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 7, 2023](#issuecomment-1421597629)

| Show please your code with SQL in Controller / Action |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 7, 2023](#issuecomment-1421632551)

| Here is a snippet of the requested code which generates the injection:  in /.../yiisoft/yii2/base/Module.php at line 534– [yii\base\Controller::runAction]('cms', ['page' => **'PAG' or 1=1--'**, 'ad' => '0'])  ```   $parts = $this->createController($route);     if (is_array($parts)) {         /* @var $controller Controller */         list($controller, $actionID) = $parts;         $oldController = Yii::$app->controller;         Yii::$app->controller = $controller;         $result = $controller->**runAction($actionID, $params);**         if ($oldController !== null) {             Yii::$app->controller = $oldController;         }          return $result;     }  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 7, 2023](#issuecomment-1421655990) • edited Loading

| There is no queries to DB here. Show code where you use this params in query and catch injection |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 8, 2023](#issuecomment-1421684133) • edited Loading

| I think you not correct use ActiveQuery or QueryBuilder. And I’m not sure that is framework’s problem. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 8, 2023](#issuecomment-1421709133)

| Injection occurs when any element of the array in the $params variable contains any SQL statement, for example you can choose to use the following payload:  ' OR NOT 5406=5406#  It should look inside the function like this:  [yii\baseController::runAction]('cms', ['page' => 'PAG'' OR NOT 5406=5406#, 'ad' => '0'])  The following Payload generated a disclosure of internal information from the Database, here is an image of evidence:  [inyection](https://user-images.githubusercontent.com/11671143/217399107-3bbd1545-af1f-48cc-9f40-57a58c3a3f0d.png)  what you see in red is the injection.  In conclusion, I would suggest implementing a native function to sanitize any kind of variable that is sent, don't you think? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 8, 2023](#issuecomment-1422273055)

| Show here the code controller action, where you build the query. |
| --- |

 👍
4
 bizley, lubosdz, alinskydev, and flaviovs reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 9, 2023](#issuecomment-1423603416)

| Sorry my friend, this is very confidential information about the business logic, is there any other alternative?  Why in this project do you move the security of the requests to each user of the framework? Don't you think that could generate a security problem which can be managed more efficiently by sanitizing the incoming data received by that function?. |
| --- |

All reactions

Sorry, something went wrong.

[![@InsaneSkull](https://avatars.githubusercontent.com/u/14233668?s=80&u=527abc8fa4a64f13194fec5df0e98fc95ce98d98&v=4)](/InsaneSkull)

Copy link

Contributor

### **[InsaneSkull](/InsaneSkull)** commented [Feb 9, 2023](#issuecomment-1423631963)

| [@cc7b3r](https://github.com/cc7b3r) part of code where you build query will be helpful, you can replace confidential information with fake data. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 9, 2023](#issuecomment-1423724803)

| [@cc7b3r](https://github.com/cc7b3r) it looks like you are using some custom query building method without proper PDO params binding. Your example is suggesting that this is injected into the pagination but Yii's pagination is using LIMIT and OFFSET and on the screen I can see that the injection is a part of WHERE clause. So unless you can provide some minimal proof of the vulnerability we don't see any problem in the Yii's core. |
| --- |

 👍
2
 schmunk42 and DBX12 reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=40&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)
[bizley](/bizley)
added
the
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)
label
[Feb 9, 2023](#event-8476098403)

[![@yii-bot](https://avatars.githubusercontent.com/u/13490354?s=80&u=9d165455fe42aecbd31176fe59cbd2e416bf2d46&v=4)](/yii-bot)

Copy link

### **[yii-bot](/yii-bot)** commented [Feb 9, 2023](#issuecomment-1423724957)

| Thanks for posting in our issue tracker. In order to properly assist you, we need additional information:   * When does the issue occur? * What do you see? * What was the expected result? * Can you supply us with a stacktrace? (optional) * Do you have exact code to reproduce it? Maybe a PHPUnit tests that fails? (optional)   Thanks!  *This is an automated comment, triggered by adding the label `status:need more info`.* |
| --- |

All reactions

Sorry, something went wrong.

[![@samdark](https://avatars.githubusercontent.com/u/47294?s=40&u=86b987bc1dab8dc2f633ac833d10e95b23a5688e&v=4)](/samdark)
[samdark](/samdark)
added
the
[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
label
[Feb 9, 2023](#event-8476628930)

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426048067)

| Here is part of the code:  in TemplateController.php at line 108– yii\db\Command::queryAll()  $sql .= " and (dab.company = '' or dab.company is null) "; }  ```     $sql = \Yii::$app->db->createCommand($sql)->bindValue('pagename',$pageName);     $sql = \Yii::$app->db->createCommand($sql);     $space = $sql->queryAll();      $sql = "SELECT                 dab.id,                 dab.ubication,                 dab.carrousel,                 dab.position,  ```  The SQL being executed was:  SELECT dab.id,dab.ubication,dab.carrousel,dab.position,dab.html,dab.adapt,dab.text FROM pages AS p LEFT JOIN templates AS dab ON p.id=dab.id\_pag AND dab.status = 1 AND dab.position <> 0 WHERE dab.code='PAG'' AND dab.carrousel = 0 AND dab.adapt = 0 and (dab.company = '' or dab.company is null) |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426103029)

| Could you paste here the rest of the `$sql` string? |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426129037)

| SELECT dab.id,dab.ubication,dab.carrousel,dab.position,dab.html,dab.adapt,dab.text FROM pages AS p LEFT JOIN templates AS dab ON p.id=dab.id\_pag AND dab.status = 1 AND dab.position <> 0 WHERE dab.code='PAG'' AND dab.carrousel = 0 AND dab.adapt = 0 and (dab.company = '' or dab.company is null) |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426134073)

| what I was saying is that SQL code can be injected because it is passed without sanitizing or being escaped into the "dab.code" field. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426135359)

| Not the generated string, the code please. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426138059)

| I don't have the rest of the code because I am reporting the bug as a black box test and I don't have access to that code. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426144031)

| Perhaps part of the stack trace can give you more information:  [image](https://user-images.githubusercontent.com/11671143/218161045-1a75dbd4-ed48-4991-8269-66f80a1e8eef.png)  [image](https://user-images.githubusercontent.com/11671143/218161318-baa29c31-d0bc-410d-b74f-d16149ce2d2e.png)  [image](https://user-images.githubusercontent.com/11671143/218161366-dce92103-844c-4d41-bf63-1c7564ec2e9c.png)  [image](https://user-images.githubusercontent.com/11671143/218161439-543debd6-02b8-4072-9bb5-54d0331acf60.png) |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426155955)

| The problematic part is most probably in the code for this variable. If this is as you described "a black box" for you, you must report it to the person that owns that code. I'm closing this report now, if you can provide as with required information we'll gladly reopen it. |
| --- |

 👍
5
 schmunk42, karataserkan, diego-mathis, mikehaertl, and cebe reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=40&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)
[bizley](/bizley)
closed this as [completed](/yiisoft/yii2/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 10, 2023](#event-8492454402)

[![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=80&v=4)](/marcovtwout)

Copy link

Member

### **[marcovtwout](/marcovtwout)** commented [Apr 12, 2023](#issuecomment-1504799325)

| [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750>  If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid. |
| --- |

 👍
6
 bizley, diego-mathis, mikehaertl, schmunk42, eluhr, and StuTheWebGuy reacted with thumbs up emoji

All reactions

* 👍
  6 reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505381506)

| I see that a FIX was performed on the queryScalar method and which has to do with the construction of the ActiveQuery.  the documentation is at [#19790](https://github.com/yiisoft/yii2/pull/19790) |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=40&v=4)](/cc7b3r)
[cc7b3r](/cc7b3r)
mentioned this issue
[Apr 12, 2023](#ref-pullrequest-1630325055)

[Fix queryScalar method in \yii\db\Query #19789
#19790](/yiisoft/yii2/pull/19790)
 Closed

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505390813)

| I always wanted to ask myself why the user is not given the freedom to make his queries directly and the Frameworkn is not able by itself to be resilient with injections. Don't you think it can make a design problem? |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505392027)

| [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750>  If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid.  I reported the vulnerability because they closed the thread and I was never able to respond in time. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Apr 12, 2023](#issuecomment-1505398599)

| What do you mean? Who are "they"? Do you still claim that there is a point to keep CVE? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Apr 12, 2023](#issuecomment-1505410868)

| I propose that this CVE only affects one project and this project is not Yii2 |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505420335)

| Please,  [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750> If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid.  I reported the vulnerability because they closed the thread and I was never able to respond in time.  What do you mean? Who are "they"? Do you still claim that there is a point to keep CVE?  The CVE is the least of it, I would really like to understand why the user of the Framework is given the freedom to handle the statements in that way?  Shouldn't the framework limit that kind of bad practices or sanitize the default data once it receives any parameter that creates a new query instance? |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Apr 12, 2023](#issuecomment-1505431863)

| I'm not sure what you mean. We are not able to stop the developer creating vulnerable code if the code is not following best practices and the safety guides. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505446078)

| queryAll()  I'm not sure what you mean. We are not able to stop the developer creating vulnerable code if the code is not following best practices and the safety guides.  That is true, but one of the fundamental principles is to think in the worst-case scenario. Some constructors that receive the query do not sanitize the data before being sent to the faulty code created by the framework user, they are exposed above. |
| --- |

All reactions

Sorry, something went wrong.

[![@hyncica](https://avatars.githubusercontent.com/u/11272692?s=80&v=4)](/hyncica)

Copy link

### **[hyncica](/hyncica)** commented [Apr 12, 2023](#issuecomment-1505511891)

| Shouldn't the framework limit that kind of bad practices or sanitize the default data once it receives any parameter that creates a new query instance?  No it shouldn't. It's impossible to predict all use cases that developers will need to use the framework for. Not providing a method to execute SQL query developer want to execute may result in case where developer will be unable to implement some use case. Because of that responsibility for sanitizing inputs and for using best practices/safe methods must be on application developers not on framework. |
| --- |

All reactions

Sorry, something went wrong.

[![@diego-mathis](https://avatars.githubusercontent.com/u/22345162?s=80&u=ae3324e96ffa5739b49aa6aa6ab5b64631532ec9&v=4)](/diego-mathis)

Copy link

Contributor

### **[diego-mathis](/diego-mathis)** commented [Apr 12, 2023](#issuecomment-1505515871)

| Just follow best practices: <https://www.yiiframework.com/doc/guide/2.0/en/security-best-practices#avoiding-sql-injections> |
| --- |

 👍
4
 marcovtwout, cc7b3r, StuTheWebGuy, and GeorgeCadwallader reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=80&v=4)](/schmunk42)

Copy link

Contributor

### **[schmunk42](/schmunk42)** commented [Apr 12, 2023](#issuecomment-1505529007)

| [@cc7b3r](https://github.com/cc7b3r)  I reported the vulnerability because they closed the thread and I was never able to respond in time.  The thread was closed, because you were not able to give any useful information or code to reproduce the issue. I've seen similar stuff in several Security Audits and Pen-Tests and it was in 100% of the cases the fault of the project developer, not the framework.  You say you were not able to respond in time, but you had the time to create a CVE? This is just ridiculous, sorry to say that. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505560351)

| [@cc7b3r](https://github.com/cc7b3r)  I reported the vulnerability because they closed the thread and I was never able to respond in time.  The thread was closed, because you were not able to give any useful information or code to reproduce the issue. I've seen similar stuff in several Security Audits and Pen-Tests and it was in 100% of the cases the fault of the project developer, not the framework.  You say you were not able to respond in time, but you had the time to create a CVE? This is just ridiculous, sorry to say that.  Yes, that's why I reported the CVE. I still believe there is a problem, the risk of SQL injection cannot be transferred to the user of the framework because not all users follow best practices, so why not substantially minimize that problem from the framework design? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Apr 12, 2023](#issuecomment-1505573096)

| Why you not starting CVE to PHP `PDO::query` and others? |
| --- |

 🚀
8
 ailmanki, StuTheWebGuy, gg0h, TonisOrmisson, DBX12, amoliski, abudawud, and flaviovs reacted with rocket emoji

All reactions

* 🚀
  8 reactions

Sorry, something went wrong.

[![@ailmanki](https://avatars.githubusercontent.com/u/1570625?s=80&u=931800a98398c9e5a6a79fb37c37d9b7b53d9c1f&v=4)](/ailmanki)

Copy link

### **[ailmanki](/ailmanki)** commented [Apr 12, 2023](#issuecomment-1505601309)

| There seems to be a missunderstanding [@cc7b3r](https://github.com/cc7b3r) If you use the framework, that is the ActiveRecord and QueryBuilder properly, then there will be no SQL injections possible. But if you ignore how it should be used, then yes there are many ways to create SQL injections, there are many other ways to to cerate security problems as well. At least one would need to understand how to use it, which is describe in detail in the documentation.  Yii also allows to be extended, at which point you get a lot of ways to create security issues.  Since Yii has to communicate with a 3d party software - the database, and SQL Implementations being most often a turing complete language, there is only so much Yii can sanitize automatically - which if you use its code correctly - also works. You could already start to write SQL code instead of a tablename, where a tablename is expected and shoot yourself in the foot. This is basically the reason why SQL Injections are so prevalent. |
| --- |

All reactions

Sorry, something went wrong.

[![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=80&v=4)](/schmunk42)

Copy link

Contributor

### **[schmunk42](/schmunk42)** commented [Apr 12, 2023](#issuecomment-1505795276)

| [@cc7b3r](https://github.com/cc7b3r)  I still believe there is a problem  It's not about *believing*, give us some code to reproduce the issue, or even better: write a test-case. Everything else is just a waste of time.  My 2 cents. |
| --- |

 👍
5
 DeryabinSergey, marcovtwout, TonisOrmisson, DBX12, and nikitacontreras reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=80&v=4)](/marcovtwout)

Copy link

Member

### **[marcovtwout](/marcovtwout)** commented [Apr 13, 2023](#issuecomment-1506531748)

| The CVE record at MITRE is now marked as `DISPUTED`.  [@cc7b3r](https://github.com/cc7b3r) There really is no basis for a CVE here. You reported the issue based on a black box test for a specific client project without knowing what code actually causes the vulnerability. Even a hypothetical design problem is not relevant without you being able to demonstrate this is a framework issue, and as others have stated, it most likely is not. If you still wish to discuss this further, perhaps try one of the chat options here <https://www.yiiframework.com/chat>. But in any case please withdraw the CVE. |
| --- |

 👍
7
 schmunk42, rob006, cebe, cyril-amar, TonisOrmisson, DBX12, and smichae reacted with thumbs up emoji

All reactions

* 👍
  7 reactions

Sorry, something went wrong.

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=80&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)

Copy link

### **[iBotPeaches](/iBotPeaches)** commented [Aug 8, 2023](#issuecomment-1669896289)

| Sorry to dredge up an old thread, but alerting systems are flagging back to this via the [Advisory](https://github.com/advisories/GHSA-gq63-p39p-jrjf). I read the thread and its quite embarrassing how somehow a user gets into a position that request/obtain an CVE without a single shred of reproducible evidence against the framework. Its like some vendetta to take their point seriously by submitting non-sense.  It looks like this was then synced/created into GitHub Advisories at [GHSA-gq63-p39p-jrjf](https://github.com/advisories/GHSA-gq63-p39p-jrjf "GHSA-gq63-p39p-jrjf") in quite possibly the most embarrassing advisory I've seen. The title is grossly typo`d with:  ``` SQL injectionin Yii 2  ```  [@ccchapman](https://github.com/ccchapman) Put up a [PR](https://github.com/github/advisory-database/pull/2557) to help fix some of the request up to make it a bit more readable, but it makes 0 sense to me. The Advisory itself in the JSON file states it was not reviewed by GitHub  ```     "github_reviewed": false,     "github_reviewed_at": null, ```  But GitHub said it was reviewed?  [Screenshot 2023-08-08 at 12 00 24 PM](https://private-user-images.githubusercontent.com/611784/259158563-b4ecf983-992b-409c-9e64-3954152bf16f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY4ODUyNjYsIm5iZiI6MTczNjg4NDk2NiwicGF0aCI6Ii82MTE3ODQvMjU5MTU4NTYzLWI0ZWNmOTgzLTk5MmItNDA5Yy05ZTY0LTM5NTQxNTJiZjE2Zi5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNFQyMDAyNDZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0yNWRiNGMzOTVkZTRmOGQ3NmExZTkzNmJlNzEwZTFjODBhZTIyNWUwMzZkM2JlNGVkMDA3MTdjZmU2YTJlNGY4JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9._DQFkE1vVWmMZ17DJR_oQckWakJymzAsQn59b4TvtAU)  So we have a DISPUTED cve in MITRE, but it was pulled into GitHub Advisories, then Dependabot is telling people to just upgrade to 2.0.47 for some phantom patch of a non-existent problem?  [Screenshot 2023-08-08 at 11 58 16 AM](https://private-user-images.githubusercontent.com/611784/259157993-fca75006-8358-4dd1-943f-dea657a8911c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY4ODUyNjYsIm5iZiI6MTczNjg4NDk2NiwicGF0aCI6Ii82MTE3ODQvMjU5MTU3OTkzLWZjYTc1MDA2LTgzNTgtNGRkMS05NDNmLWRlYTY1N2E4OTExYy5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNFQyMDAyNDZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1jODBmMzM0ZmI1YTkyNWZkMjExN2I5YzdmZjRjNDE4ZTU1ZDgwYjQ1ZTUwOTg0ZDA5MTYwZDgzMGY1NmQ0YTZiJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.zldkOkDCQyIgUHTWH_j0GjhdcrtxWsjHr80jQGtW6pA)  Sure I can squash the warning from Dependabot by just upgrading to 2.0.47, but we know in this thread that nothing was changed to fix anything because nothing was found.  Should we request the Advisory be pulled? I saw in this [example](https://github.com/github/advisory-database/pull/445#issuecomment-1167770018) its how its handled when a similar situation occurred for Laravel. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Aug 8, 2023](#issuecomment-1669953948)

| We tried to make it rejected several times already and I don't know what else we can do. It's truly worrying to see how easy it is to make unproven claims like that and how far can the damage spread... |
| --- |

 👍
1
 alinskydev reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=40&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)
[iBotPeaches](/iBotPeaches)
mentioned this issue
[Aug 8, 2023](#ref-pullrequest-1841664514)

[[GHSA-gq63-p39p-jrjf] SQL injectionin Yii 2
github/advisory-database#2607](/github/advisory-database/pull/2607)
 Merged

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=80&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)

Copy link

### **[iBotPeaches](/iBotPeaches)** commented [Aug 8, 2023](#issuecomment-1669973725)

| Okay thanks. I took a stab at getting this withdrawn - [github/advisory-database#2607](https://github.com/github/advisory-database/pull/2607) |
| --- |

 👍
2
 bizley and rob006 reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@Marcono1234](https://avatars.githubusercontent.com/u/11685886?s=40&v=4)](/Marcono1234)
[Marcono1234](/Marcono1234)
mentioned this issue
[Sep 10, 2023](#ref-issue-1889134036)

[Extend GitHub's CNA scope
github/advisory-database#2718](/github/advisory-database/issues/2718)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

Assignees

No one assigned

Labels

[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

12 participants

[![@samdark](https://avatars.githubusercontent.com/u/47294?s=52&v=4)](/samdark) [![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=52&v=4)](/marcovtwout) [![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=52&v=4)](/iBotPeaches) [![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=52&v=4)](/schmunk42) [![@ailmanki](https://avatars.githubusercontent.com/u/1570625?s=52&v=4)](/ailmanki) [![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=52&v=4)](/DeryabinSergey) [![@bizley](https://avatars.githubusercontent.com/u/8577314?s=52&v=4)](/bizley) [![@hyncica](https://avatars.githubusercontent.com/u/11272692?s=52&v=4)](/hyncica) [![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=52&v=4)](/cc7b3r) [![@yii-bot](https://avatars.githubusercontent.com/u/13490354?s=52&v=4)](/yii-bot) [![@InsaneSkull](https://avatars.githubusercontent.com/u/14233668?s=52&v=4)](/InsaneSkull) [![@diego-mathis](https://avatars.githubusercontent.com/u/22345162?s=52&v=4)](/diego-mathis)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_64aa8d54_20250114_200257.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=yiisoft%2Fyii2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[yiisoft](/yiisoft)
/
**[yii2](/yiisoft/yii2)**
Public

* [Notifications](/login?return_to=%2Fyiisoft%2Fyii2) You must be signed in to change notification settings
* [Fork
  6.9k](/login?return_to=%2Fyiisoft%2Fyii2)
* [Star
   14.3k](/login?return_to=%2Fyiisoft%2Fyii2)

* [Code](/yiisoft/yii2)
* [Issues
  428](/yiisoft/yii2/issues)
* [Pull requests
  94](/yiisoft/yii2/pulls)
* [Discussions](/yiisoft/yii2/discussions)
* [Actions](/yiisoft/yii2/actions)
* [Wiki](/yiisoft/yii2/wiki)
* [Security](/yiisoft/yii2/security)
* [Insights](/yiisoft/yii2/pulse)

Additional navigation options

* [Code](/yiisoft/yii2)
* [Issues](/yiisoft/yii2/issues)
* [Pull requests](/yiisoft/yii2/pulls)
* [Discussions](/yiisoft/yii2/discussions)
* [Actions](/yiisoft/yii2/actions)
* [Wiki](/yiisoft/yii2/wiki)
* [Security](/yiisoft/yii2/security)
* [Insights](/yiisoft/yii2/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fyiisoft%2Fyii2%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fyiisoft%2Fyii2%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Yii 2 <= 2.0.47 SQL Injection Vulnerability #19755

Closed

[cc7b3r](/cc7b3r) opened this issue
Feb 7, 2023
· 38 comments

Closed

# [Yii 2 <= 2.0.47 SQL Injection Vulnerability](#top) #19755

[cc7b3r](/cc7b3r) opened this issue
Feb 7, 2023
· 38 comments

Labels
[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)

## Comments

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

### **[cc7b3r](/cc7b3r)** commented [Feb 7, 2023](#issue-1575129238)

|  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Description**  Yii 2 Framework is a project used for PHP application development. Yii versions <= 2.0.47 are susceptible to a SQL injection vulnerability in its "yiibaseController::runAction($route,$params)" function. This vulnerability occurs when parameters received by the affected function are not properly sanitized.  **### What steps will reproduce the problem?**  A simple proof-of-concept test on the affected run could generate an injection into the database system:  yii\baseModule::runAction('PARAM0', ['VAR0' => 'INJECTION', 'VAR2' => 'PARAM2'])  **### What is the expected result?**  A parameter result not found or a badly formed query  **### What do you get instead?**  Syntax error or query executed directly on database system Additional info  | Q | A | | --- | --- | | Yii version | <= 2.0.47 | | PHP version | 7.1.33 | | Operating system | Linux / Debian - Apache 2.4.38 | |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 7, 2023](#issuecomment-1421597629)

| Show please your code with SQL in Controller / Action |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 7, 2023](#issuecomment-1421632551)

| Here is a snippet of the requested code which generates the injection:  in /.../yiisoft/yii2/base/Module.php at line 534– [yii\base\Controller::runAction]('cms', ['page' => **'PAG' or 1=1--'**, 'ad' => '0'])  ```   $parts = $this->createController($route);     if (is_array($parts)) {         /* @var $controller Controller */         list($controller, $actionID) = $parts;         $oldController = Yii::$app->controller;         Yii::$app->controller = $controller;         $result = $controller->**runAction($actionID, $params);**         if ($oldController !== null) {             Yii::$app->controller = $oldController;         }          return $result;     }  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 7, 2023](#issuecomment-1421655990) • edited Loading

| There is no queries to DB here. Show code where you use this params in query and catch injection |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 8, 2023](#issuecomment-1421684133) • edited Loading

| I think you not correct use ActiveQuery or QueryBuilder. And I’m not sure that is framework’s problem. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 8, 2023](#issuecomment-1421709133)

| Injection occurs when any element of the array in the $params variable contains any SQL statement, for example you can choose to use the following payload:  ' OR NOT 5406=5406#  It should look inside the function like this:  [yii\baseController::runAction]('cms', ['page' => 'PAG'' OR NOT 5406=5406#, 'ad' => '0'])  The following Payload generated a disclosure of internal information from the Database, here is an image of evidence:  [inyection](https://user-images.githubusercontent.com/11671143/217399107-3bbd1545-af1f-48cc-9f40-57a58c3a3f0d.png)  what you see in red is the injection.  In conclusion, I would suggest implementing a native function to sanitize any kind of variable that is sent, don't you think? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Feb 8, 2023](#issuecomment-1422273055)

| Show here the code controller action, where you build the query. |
| --- |

 👍
4
 bizley, lubosdz, alinskydev, and flaviovs reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 9, 2023](#issuecomment-1423603416)

| Sorry my friend, this is very confidential information about the business logic, is there any other alternative?  Why in this project do you move the security of the requests to each user of the framework? Don't you think that could generate a security problem which can be managed more efficiently by sanitizing the incoming data received by that function?. |
| --- |

All reactions

Sorry, something went wrong.

[![@InsaneSkull](https://avatars.githubusercontent.com/u/14233668?s=80&u=527abc8fa4a64f13194fec5df0e98fc95ce98d98&v=4)](/InsaneSkull)

Copy link

Contributor

### **[InsaneSkull](/InsaneSkull)** commented [Feb 9, 2023](#issuecomment-1423631963)

| [@cc7b3r](https://github.com/cc7b3r) part of code where you build query will be helpful, you can replace confidential information with fake data. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 9, 2023](#issuecomment-1423724803)

| [@cc7b3r](https://github.com/cc7b3r) it looks like you are using some custom query building method without proper PDO params binding. Your example is suggesting that this is injected into the pagination but Yii's pagination is using LIMIT and OFFSET and on the screen I can see that the injection is a part of WHERE clause. So unless you can provide some minimal proof of the vulnerability we don't see any problem in the Yii's core. |
| --- |

 👍
2
 schmunk42 and DBX12 reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=40&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)
[bizley](/bizley)
added
the
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)
label
[Feb 9, 2023](#event-8476098403)

[![@yii-bot](https://avatars.githubusercontent.com/u/13490354?s=80&u=9d165455fe42aecbd31176fe59cbd2e416bf2d46&v=4)](/yii-bot)

Copy link

### **[yii-bot](/yii-bot)** commented [Feb 9, 2023](#issuecomment-1423724957)

| Thanks for posting in our issue tracker. In order to properly assist you, we need additional information:   * When does the issue occur? * What do you see? * What was the expected result? * Can you supply us with a stacktrace? (optional) * Do you have exact code to reproduce it? Maybe a PHPUnit tests that fails? (optional)   Thanks!  *This is an automated comment, triggered by adding the label `status:need more info`.* |
| --- |

All reactions

Sorry, something went wrong.

[![@samdark](https://avatars.githubusercontent.com/u/47294?s=40&u=86b987bc1dab8dc2f633ac833d10e95b23a5688e&v=4)](/samdark)
[samdark](/samdark)
added
the
[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
label
[Feb 9, 2023](#event-8476628930)

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426048067)

| Here is part of the code:  in TemplateController.php at line 108– yii\db\Command::queryAll()  $sql .= " and (dab.company = '' or dab.company is null) "; }  ```     $sql = \Yii::$app->db->createCommand($sql)->bindValue('pagename',$pageName);     $sql = \Yii::$app->db->createCommand($sql);     $space = $sql->queryAll();      $sql = "SELECT                 dab.id,                 dab.ubication,                 dab.carrousel,                 dab.position,  ```  The SQL being executed was:  SELECT dab.id,dab.ubication,dab.carrousel,dab.position,dab.html,dab.adapt,dab.text FROM pages AS p LEFT JOIN templates AS dab ON p.id=dab.id\_pag AND dab.status = 1 AND dab.position <> 0 WHERE dab.code='PAG'' AND dab.carrousel = 0 AND dab.adapt = 0 and (dab.company = '' or dab.company is null) |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426103029)

| Could you paste here the rest of the `$sql` string? |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426129037)

| SELECT dab.id,dab.ubication,dab.carrousel,dab.position,dab.html,dab.adapt,dab.text FROM pages AS p LEFT JOIN templates AS dab ON p.id=dab.id\_pag AND dab.status = 1 AND dab.position <> 0 WHERE dab.code='PAG'' AND dab.carrousel = 0 AND dab.adapt = 0 and (dab.company = '' or dab.company is null) |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426134073)

| what I was saying is that SQL code can be injected because it is passed without sanitizing or being escaped into the "dab.code" field. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426135359)

| Not the generated string, the code please. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426138059)

| I don't have the rest of the code because I am reporting the bug as a black box test and I don't have access to that code. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Feb 10, 2023](#issuecomment-1426144031)

| Perhaps part of the stack trace can give you more information:  [image](https://user-images.githubusercontent.com/11671143/218161045-1a75dbd4-ed48-4991-8269-66f80a1e8eef.png)  [image](https://user-images.githubusercontent.com/11671143/218161318-baa29c31-d0bc-410d-b74f-d16149ce2d2e.png)  [image](https://user-images.githubusercontent.com/11671143/218161366-dce92103-844c-4d41-bf63-1c7564ec2e9c.png)  [image](https://user-images.githubusercontent.com/11671143/218161439-543debd6-02b8-4072-9bb5-54d0331acf60.png) |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Feb 10, 2023](#issuecomment-1426155955)

| The problematic part is most probably in the code for this variable. If this is as you described "a black box" for you, you must report it to the person that owns that code. I'm closing this report now, if you can provide as with required information we'll gladly reopen it. |
| --- |

 👍
5
 schmunk42, karataserkan, diego-mathis, mikehaertl, and cebe reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=40&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)
[bizley](/bizley)
closed this as [completed](/yiisoft/yii2/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 10, 2023](#event-8492454402)

[![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=80&v=4)](/marcovtwout)

Copy link

Member

### **[marcovtwout](/marcovtwout)** commented [Apr 12, 2023](#issuecomment-1504799325)

| [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750>  If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid. |
| --- |

 👍
6
 bizley, diego-mathis, mikehaertl, schmunk42, eluhr, and StuTheWebGuy reacted with thumbs up emoji

All reactions

* 👍
  6 reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505381506)

| I see that a FIX was performed on the queryScalar method and which has to do with the construction of the ActiveQuery.  the documentation is at [#19790](https://github.com/yiisoft/yii2/pull/19790) |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=40&v=4)](/cc7b3r)
[cc7b3r](/cc7b3r)
mentioned this issue
[Apr 12, 2023](#ref-pullrequest-1630325055)

[Fix queryScalar method in \yii\db\Query #19789
#19790](/yiisoft/yii2/pull/19790)
 Closed

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505390813)

| I always wanted to ask myself why the user is not given the freedom to make his queries directly and the Frameworkn is not able by itself to be resilient with injections. Don't you think it can make a design problem? |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505392027)

| [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750>  If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid.  I reported the vulnerability because they closed the thread and I was never able to respond in time. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Apr 12, 2023](#issuecomment-1505398599)

| What do you mean? Who are "they"? Do you still claim that there is a point to keep CVE? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Apr 12, 2023](#issuecomment-1505410868)

| I propose that this CVE only affects one project and this project is not Yii2 |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505420335)

| Please,  [@cc7b3r](https://github.com/cc7b3r) Did you create the following CVE when you created this issue? <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-26750> If so, please withdraw/reject it. No framework exploit was found so the CVE submission is invalid.  I reported the vulnerability because they closed the thread and I was never able to respond in time.  What do you mean? Who are "they"? Do you still claim that there is a point to keep CVE?  The CVE is the least of it, I would really like to understand why the user of the Framework is given the freedom to handle the statements in that way?  Shouldn't the framework limit that kind of bad practices or sanitize the default data once it receives any parameter that creates a new query instance? |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Apr 12, 2023](#issuecomment-1505431863)

| I'm not sure what you mean. We are not able to stop the developer creating vulnerable code if the code is not following best practices and the safety guides. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505446078)

| queryAll()  I'm not sure what you mean. We are not able to stop the developer creating vulnerable code if the code is not following best practices and the safety guides.  That is true, but one of the fundamental principles is to think in the worst-case scenario. Some constructors that receive the query do not sanitize the data before being sent to the faulty code created by the framework user, they are exposed above. |
| --- |

All reactions

Sorry, something went wrong.

[![@hyncica](https://avatars.githubusercontent.com/u/11272692?s=80&v=4)](/hyncica)

Copy link

### **[hyncica](/hyncica)** commented [Apr 12, 2023](#issuecomment-1505511891)

| Shouldn't the framework limit that kind of bad practices or sanitize the default data once it receives any parameter that creates a new query instance?  No it shouldn't. It's impossible to predict all use cases that developers will need to use the framework for. Not providing a method to execute SQL query developer want to execute may result in case where developer will be unable to implement some use case. Because of that responsibility for sanitizing inputs and for using best practices/safe methods must be on application developers not on framework. |
| --- |

All reactions

Sorry, something went wrong.

[![@diego-mathis](https://avatars.githubusercontent.com/u/22345162?s=80&u=ae3324e96ffa5739b49aa6aa6ab5b64631532ec9&v=4)](/diego-mathis)

Copy link

Contributor

### **[diego-mathis](/diego-mathis)** commented [Apr 12, 2023](#issuecomment-1505515871)

| Just follow best practices: <https://www.yiiframework.com/doc/guide/2.0/en/security-best-practices#avoiding-sql-injections> |
| --- |

 👍
4
 marcovtwout, cc7b3r, StuTheWebGuy, and GeorgeCadwallader reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=80&v=4)](/schmunk42)

Copy link

Contributor

### **[schmunk42](/schmunk42)** commented [Apr 12, 2023](#issuecomment-1505529007)

| [@cc7b3r](https://github.com/cc7b3r)  I reported the vulnerability because they closed the thread and I was never able to respond in time.  The thread was closed, because you were not able to give any useful information or code to reproduce the issue. I've seen similar stuff in several Security Audits and Pen-Tests and it was in 100% of the cases the fault of the project developer, not the framework.  You say you were not able to respond in time, but you had the time to create a CVE? This is just ridiculous, sorry to say that. |
| --- |

All reactions

Sorry, something went wrong.

[![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=80&v=4)](/cc7b3r)

Copy link

Author

### **[cc7b3r](/cc7b3r)** commented [Apr 12, 2023](#issuecomment-1505560351)

| [@cc7b3r](https://github.com/cc7b3r)  I reported the vulnerability because they closed the thread and I was never able to respond in time.  The thread was closed, because you were not able to give any useful information or code to reproduce the issue. I've seen similar stuff in several Security Audits and Pen-Tests and it was in 100% of the cases the fault of the project developer, not the framework.  You say you were not able to respond in time, but you had the time to create a CVE? This is just ridiculous, sorry to say that.  Yes, that's why I reported the CVE. I still believe there is a problem, the risk of SQL injection cannot be transferred to the user of the framework because not all users follow best practices, so why not substantially minimize that problem from the framework design? |
| --- |

All reactions

Sorry, something went wrong.

[![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=80&v=4)](/DeryabinSergey)

Copy link

Contributor

### **[DeryabinSergey](/DeryabinSergey)** commented [Apr 12, 2023](#issuecomment-1505573096)

| Why you not starting CVE to PHP `PDO::query` and others? |
| --- |

 🚀
8
 ailmanki, StuTheWebGuy, gg0h, TonisOrmisson, DBX12, amoliski, abudawud, and flaviovs reacted with rocket emoji

All reactions

* 🚀
  8 reactions

Sorry, something went wrong.

[![@ailmanki](https://avatars.githubusercontent.com/u/1570625?s=80&u=931800a98398c9e5a6a79fb37c37d9b7b53d9c1f&v=4)](/ailmanki)

Copy link

### **[ailmanki](/ailmanki)** commented [Apr 12, 2023](#issuecomment-1505601309)

| There seems to be a missunderstanding [@cc7b3r](https://github.com/cc7b3r) If you use the framework, that is the ActiveRecord and QueryBuilder properly, then there will be no SQL injections possible. But if you ignore how it should be used, then yes there are many ways to create SQL injections, there are many other ways to to cerate security problems as well. At least one would need to understand how to use it, which is describe in detail in the documentation.  Yii also allows to be extended, at which point you get a lot of ways to create security issues.  Since Yii has to communicate with a 3d party software - the database, and SQL Implementations being most often a turing complete language, there is only so much Yii can sanitize automatically - which if you use its code correctly - also works. You could already start to write SQL code instead of a tablename, where a tablename is expected and shoot yourself in the foot. This is basically the reason why SQL Injections are so prevalent. |
| --- |

All reactions

Sorry, something went wrong.

[![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=80&v=4)](/schmunk42)

Copy link

Contributor

### **[schmunk42](/schmunk42)** commented [Apr 12, 2023](#issuecomment-1505795276)

| [@cc7b3r](https://github.com/cc7b3r)  I still believe there is a problem  It's not about *believing*, give us some code to reproduce the issue, or even better: write a test-case. Everything else is just a waste of time.  My 2 cents. |
| --- |

 👍
5
 DeryabinSergey, marcovtwout, TonisOrmisson, DBX12, and nikitacontreras reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=80&v=4)](/marcovtwout)

Copy link

Member

### **[marcovtwout](/marcovtwout)** commented [Apr 13, 2023](#issuecomment-1506531748)

| The CVE record at MITRE is now marked as `DISPUTED`.  [@cc7b3r](https://github.com/cc7b3r) There really is no basis for a CVE here. You reported the issue based on a black box test for a specific client project without knowing what code actually causes the vulnerability. Even a hypothetical design problem is not relevant without you being able to demonstrate this is a framework issue, and as others have stated, it most likely is not. If you still wish to discuss this further, perhaps try one of the chat options here <https://www.yiiframework.com/chat>. But in any case please withdraw the CVE. |
| --- |

 👍
7
 schmunk42, rob006, cebe, cyril-amar, TonisOrmisson, DBX12, and smichae reacted with thumbs up emoji

All reactions

* 👍
  7 reactions

Sorry, something went wrong.

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=80&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)

Copy link

### **[iBotPeaches](/iBotPeaches)** commented [Aug 8, 2023](#issuecomment-1669896289)

| Sorry to dredge up an old thread, but alerting systems are flagging back to this via the [Advisory](https://github.com/advisories/GHSA-gq63-p39p-jrjf). I read the thread and its quite embarrassing how somehow a user gets into a position that request/obtain an CVE without a single shred of reproducible evidence against the framework. Its like some vendetta to take their point seriously by submitting non-sense.  It looks like this was then synced/created into GitHub Advisories at [GHSA-gq63-p39p-jrjf](https://github.com/advisories/GHSA-gq63-p39p-jrjf "GHSA-gq63-p39p-jrjf") in quite possibly the most embarrassing advisory I've seen. The title is grossly typo`d with:  ``` SQL injectionin Yii 2  ```  [@ccchapman](https://github.com/ccchapman) Put up a [PR](https://github.com/github/advisory-database/pull/2557) to help fix some of the request up to make it a bit more readable, but it makes 0 sense to me. The Advisory itself in the JSON file states it was not reviewed by GitHub  ```     "github_reviewed": false,     "github_reviewed_at": null, ```  But GitHub said it was reviewed?  [Screenshot 2023-08-08 at 12 00 24 PM](https://private-user-images.githubusercontent.com/611784/259158563-b4ecf983-992b-409c-9e64-3954152bf16f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY4ODUyNjYsIm5iZiI6MTczNjg4NDk2NiwicGF0aCI6Ii82MTE3ODQvMjU5MTU4NTYzLWI0ZWNmOTgzLTk5MmItNDA5Yy05ZTY0LTM5NTQxNTJiZjE2Zi5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNFQyMDAyNDZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0yNWRiNGMzOTVkZTRmOGQ3NmExZTkzNmJlNzEwZTFjODBhZTIyNWUwMzZkM2JlNGVkMDA3MTdjZmU2YTJlNGY4JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9._DQFkE1vVWmMZ17DJR_oQckWakJymzAsQn59b4TvtAU)  So we have a DISPUTED cve in MITRE, but it was pulled into GitHub Advisories, then Dependabot is telling people to just upgrade to 2.0.47 for some phantom patch of a non-existent problem?  [Screenshot 2023-08-08 at 11 58 16 AM](https://private-user-images.githubusercontent.com/611784/259157993-fca75006-8358-4dd1-943f-dea657a8911c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY4ODUyNjYsIm5iZiI6MTczNjg4NDk2NiwicGF0aCI6Ii82MTE3ODQvMjU5MTU3OTkzLWZjYTc1MDA2LTgzNTgtNGRkMS05NDNmLWRlYTY1N2E4OTExYy5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNFQyMDAyNDZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1jODBmMzM0ZmI1YTkyNWZkMjExN2I5YzdmZjRjNDE4ZTU1ZDgwYjQ1ZTUwOTg0ZDA5MTYwZDgzMGY1NmQ0YTZiJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.zldkOkDCQyIgUHTWH_j0GjhdcrtxWsjHr80jQGtW6pA)  Sure I can squash the warning from Dependabot by just upgrading to 2.0.47, but we know in this thread that nothing was changed to fix anything because nothing was found.  Should we request the Advisory be pulled? I saw in this [example](https://github.com/github/advisory-database/pull/445#issuecomment-1167770018) its how its handled when a similar situation occurred for Laravel. |
| --- |

All reactions

Sorry, something went wrong.

[![@bizley](https://avatars.githubusercontent.com/u/8577314?s=80&u=87787dbd2d931204e5168c7412db28b4cbc437a6&v=4)](/bizley)

Copy link

Member

### **[bizley](/bizley)** commented [Aug 8, 2023](#issuecomment-1669953948)

| We tried to make it rejected several times already and I don't know what else we can do. It's truly worrying to see how easy it is to make unproven claims like that and how far can the damage spread... |
| --- |

 👍
1
 alinskydev reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=40&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)
[iBotPeaches](/iBotPeaches)
mentioned this issue
[Aug 8, 2023](#ref-pullrequest-1841664514)

[[GHSA-gq63-p39p-jrjf] SQL injectionin Yii 2
github/advisory-database#2607](/github/advisory-database/pull/2607)
 Merged

[![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=80&u=7c089b5fac20073487da8f2da20197f13979b1e0&v=4)](/iBotPeaches)

Copy link

### **[iBotPeaches](/iBotPeaches)** commented [Aug 8, 2023](#issuecomment-1669973725)

| Okay thanks. I took a stab at getting this withdrawn - [github/advisory-database#2607](https://github.com/github/advisory-database/pull/2607) |
| --- |

 👍
2
 bizley and rob006 reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@Marcono1234](https://avatars.githubusercontent.com/u/11685886?s=40&v=4)](/Marcono1234)
[Marcono1234](/Marcono1234)
mentioned this issue
[Sep 10, 2023](#ref-issue-1889134036)

[Extend GitHub's CNA scope
github/advisory-database#2718](/github/advisory-database/issues/2718)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fyiisoft%2Fyii2%2Fissues%2F19755)

Assignees

No one assigned

Labels

[severity:security](/yiisoft/yii2/labels/severity%3Asecurity)
[status:need more info](/yiisoft/yii2/labels/status%3Aneed%20more%20info)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

12 participants

[![@samdark](https://avatars.githubusercontent.com/u/47294?s=52&v=4)](/samdark) [![@marcovtwout](https://avatars.githubusercontent.com/u/438046?s=52&v=4)](/marcovtwout) [![@iBotPeaches](https://avatars.githubusercontent.com/u/611784?s=52&v=4)](/iBotPeaches) [![@schmunk42](https://avatars.githubusercontent.com/u/649031?s=52&v=4)](/schmunk42) [![@ailmanki](https://avatars.githubusercontent.com/u/1570625?s=52&v=4)](/ailmanki) [![@DeryabinSergey](https://avatars.githubusercontent.com/u/7665884?s=52&v=4)](/DeryabinSergey) [![@bizley](https://avatars.githubusercontent.com/u/8577314?s=52&v=4)](/bizley) [![@hyncica](https://avatars.githubusercontent.com/u/11272692?s=52&v=4)](/hyncica) [![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=52&v=4)](/cc7b3r) [![@yii-bot](https://avatars.githubusercontent.com/u/13490354?s=52&v=4)](/yii-bot) [![@InsaneSkull](https://avatars.githubusercontent.com/u/14233668?s=52&v=4)](/InsaneSkull) [![@diego-mathis](https://avatars.githubusercontent.com/u/22345162?s=52&v=4)](/diego-mathis)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_6cf26f93_20250115_174847.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcc7b3r)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcc7b3r)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=64&v=4)

**cc7b3r**
[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fcc7b3r)

[Overview](/cc7b3r)
[Repositories
1](/cc7b3r?tab=repositories)
[Projects
0](/cc7b3r?tab=projects)
[Packages
0](/cc7b3r?tab=packages)
[Stars
0](/cc7b3r?tab=stars)

More

* [Overview](/cc7b3r)
* [Repositories](/cc7b3r?tab=repositories)
* [Projects](/cc7b3r?tab=projects)
* [Packages](/cc7b3r?tab=packages)
* [Stars](/cc7b3r?tab=stars)

![@cc7b3r](https://avatars.githubusercontent.com/u/11671143?s=64&v=4)

**cc7b3r**

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fcc7b3r)

[![View cc7b3r's full-sized avatar](https://avatars.githubusercontent.com/u/11671143?v=4)](https://avatars.githubusercontent.com/u/11671143?v=4)

# cc7b3r

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fcc7b3r)

Block or Report

# Block or report cc7b3r

**Block user**

Prevent this user from interacting with your repositories and sending you notifications.
Learn more about [blocking users](https://docs.github.com/articles/blocking-a-user-from-your-personal-account).

You must be logged in to block users.

Add an optional note:

Please don't include any personal information such as legal names or email addresses. Maximum 100 characters, markdown supported. This note will be visible to only you.

Block user

**Report abuse**

Contact GitHub support about this user’s behavior.
Learn more about [reporting abuse](https://docs.github.com/articles/reporting-abuse-or-spam).

[Report abuse](/contact/report-abuse?report=cc7b3r+%28user%29)

[Overview](/cc7b3r)
[Repositories
1](/cc7b3r?tab=repositories)
[Projects
0](/cc7b3r?tab=projects)
[Packages
0](/cc7b3r?tab=packages)
[Stars
0](/cc7b3r?tab=stars)

More

* [Overview](/cc7b3r)
* [Repositories](/cc7b3r?tab=repositories)
* [Projects](/cc7b3r?tab=projects)
* [Packages](/cc7b3r?tab=packages)
* [Stars](/cc7b3r?tab=stars)

## Popular repositories Loading

1. [hardmysys](/cc7b3r/hardmysys) hardmysys
   Public

Something went wrong, please refresh the page to try again.

If the problem persists, check the [GitHub status page](https://www.githubstatus.com/)
or [contact support](/contact).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


