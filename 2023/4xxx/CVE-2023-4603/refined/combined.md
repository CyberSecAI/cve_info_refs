=== Content from www.wordfence.com_0d0b7fcc_20250115_082443.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Star CloudPRNT for WooCommerce <= 2.0.3 - Reflected Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Star CloudPRNT for WooCommerce <= 2.0.3 - Reflected Cross-Site Scripting

6.1

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N)

| CVE | [CVE-2023-4603](https://www.cve.org/CVERecord?id=CVE-2023-4603) |
| --- | --- |
| CVSS | 6.1 (Medium) |
| Publicly Published | November 13, 2023 |
| Last Updated | January 22, 2024 |
| Researchers | [Vincenzo Turturro](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/vincenzo-turturro)  [Gianluca Parisi](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/gianluca-parisi)  [Vincenzo Cantatore](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/vincenzo-cantatore) |

### Description

The Star CloudPRNT for WooCommerce plugin for WordPress is vulnerable to Reflected Cross-Site Scripting via the 'printersettings' parameter in versions up to, and including, 2.0.3 due to insufficient input sanitization and output escaping. This makes it possible for unauthenticated attackers to inject arbitrary web scripts in pages that execute if they can successfully trick a user into performing an action such as clicking on a link.

#### References

* [drive.google.com](https://drive.google.com/file/d/1cRVH7Oz6M2U2XTbNAmm43PDKBw6FzShA/view?usp=sharing)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/2991002/star-cloudprnt-for-woocommerce/trunk?contextall=1&old=2510015&old_path=%2Fstar-cloudprnt-for-woocommerce%2Ftrunk)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fstar-cloudprnt-for-woocommerce%2Fstar-cloudprnt-for-woocommerce-203-reflected-cross-site-scripting&t=Star%20CloudPRNT%20for%20WooCommerce%20%3C%3D%202.0.3%20-%20Reflected%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fstar-cloudprnt-for-woocommerce%2Fstar-cloudprnt-for-woocommerce-203-reflected-cross-site-scripting&text=Star%20CloudPRNT%20for%20WooCommerce%20%3C%3D%202.0.3%20-%20Reflected%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fstar-cloudprnt-for-woocommerce%2Fstar-cloudprnt-for-woocommerce-203-reflected-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Star CloudPRNT for WooCommerce

#### [Star CloudPRNT for WooCommerce](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/star-cloudprnt-for-woocommerce)

| Software Type | Plugin |
| --- | --- |
| Software Slug | star-cloudprnt-for-woocommerce [(view on wordpress.org)](https://wordpress.org/plugins/star-cloudprnt-for-woocommerce) |
| Patched? | Yes |
| Remediation | Update to version 2.0.4, or a newer patched version |
| Affected Version | * <= 2.0.3 |
| Patched Version | * 2.0.4 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from drive.google.com_332d9c58_20250115_082436.html ===
[Sign in](https://accounts.google.com/ServiceLogin?service=wise&passive=1209600&osid=1&continue=https://drive.google.com/file/d/1cRVH7Oz6M2U2XTbNAmm43PDKBw6FzShA/view?usp%3Dsharing&followup=https://drive.google.com/file/d/1cRVH7Oz6M2U2XTbNAmm43PDKBw6FzShA/view?usp%3Dsharing&ec=GAZAGQ)

=== Content from plugins.trac.wordpress.org_ec5b19fc_20250115_082441.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F2991002%2Fstar-cloudprnt-for-woocommerce%2Ftrunk%3Fcontextall%3D1%26old%3D2510015%26old_path%3D%252Fstar-cloudprnt-for-woocommerce%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/2510015/star-cloudprnt-for-woocommerce/trunk?old=2991002&old_path=%2Fstar-cloudprnt-for-woocommerce%2Ftrunk)

---

# Changes in [star-cloudprnt-for-woocommerce/trunk](/browser/star-cloudprnt-for-woocommerce/trunk?rev=2991002 "Show entry in browser") [[2510015:2991002]](/log/star-cloudprnt-for-woocommerce/trunk?rev=2991002&stop_rev=2510015 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[star-cloudprnt-for-woocommerce/trunk](/browser/star-cloudprnt-for-woocommerce/trunk?rev=2991002)
Files:

3 edited

* [printer-settings-page.php](/browser/star-cloudprnt-for-woocommerce/trunk/printer-settings-page.php?rev=2991002 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [readme.txt](/browser/star-cloudprnt-for-woocommerce/trunk/readme.txt?rev=2991002 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [star-cloudprnt-for-woocommerce.php](/browser/star-cloudprnt-for-woocommerce/trunk/star-cloudprnt-for-woocommerce.php?rev=2991002 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [star-cloudprnt-for-woocommerce/trunk/printer-settings-page.php](/changeset/2991002/star-cloudprnt-for-woocommerce/trunk/printer-settings-page.php?old=1686346&old_path=star-cloudprnt-for-woocommerce%2Ftrunk%2Fprinter-settings-page.php "Show the [2510015:2991002] differences restricted to star-cloudprnt-for-woocommerce/trunk/printer-settings-page.php")

  | [r2510015](/browser/star-cloudprnt-for-woocommerce/trunk/printer-settings-page.php?rev=1686346#L1 "Show revision 2510015 of this file in browser") | [r2991002](/browser/star-cloudprnt-for-woocommerce/trunk/printer-settings-page.php?rev=2991002#L1 "Show revision 2991002 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | function star\_cloudprnt\_get\_selected\_printer\_mac($selectedPrinter) |
  | 3 | 3 | { |
  | 4 | 4 | $printerList = star\_cloudprnt\_get\_printer\_list(); |
  | 5 | 5 | $printerMac; |
  | 6 | 6 | foreach ($printerList as $printer) |
  | 7 | 7 | { |
  | 8 | 8 | if ($printer['name'] == $selectedPrinter) |
  | 9 | 9 | { |
  | 10 | 10 | $printerMac = $printer['printerMAC']; |
  | 11 | 11 | break; |
  | 12 | 12 | } |
  | 13 | 13 | } |
  | 14 | 14 | return $printerMac; |
  | 15 | 15 | } |
  | 16 | 16 |  |
  | 17 | 17 | function star\_cloudprnt\_change\_printer\_name() |
  | 18 | 18 | { |
  | 19 |  | $selectedPrinter = base64\_decode($\_GET['printersettings']); |
  |  | 19 | $page = htmlspecialchars($\_GET['page']); |
  |  | 20 | $selectedPrinter = htmlspecialchars(base64\_decode($\_GET['printersettings'])); |
  |  | 21 | $settingsParam = base64\_encode($selectedPrinter); |
  | 20 | 22 | $printerMac = star\_cloudprnt\_get\_selected\_printer\_mac($selectedPrinter); |
  | 21 | 23 |  |
  | 22 | 24 | if (isset($printerMac)) |
  | 23 | 25 | { |
  | 24 | 26 | // Sanitize and escape before saving |
  | 25 | 27 | $newPrinterName = esc\_attr(sanitize\_text\_field(base64\_decode($\_GET['npn']))); |
  | 26 | 28 | // Validate |
  | 27 | 29 | if (strlen($newPrinterName) < 3 || strlen($newPrinterName) > 35) |
  | 28 | 30 | { |
  | 29 |  | header('location: ?page='.$~~\_GET['page'].'&printersettings='.base64\_encode($selectedPrinter)~~.'&errorCode=1'); |
  |  | 31 | header('location: ?page='.$page.'&printersettings='.$settingsParam.'&errorCode=1'); |
  | 30 | 32 | return; |
  | 31 | 33 | } |
  | 32 | 34 | // Save printer data in CloudPRNT |
  | 33 | 35 | $printer = new Star\_CloudPRNT\_Printer($printerMac); |
  | 34 | 36 | $printer->updatePrinterData("name", $newPrinterName); |
  | 35 | 37 | // Save selected printer in WordPress |
  | 36 | 38 | if ($selectedPrinter == get\_option('printer-select')) update\_option('printer-select', $newPrinterName); |
  | 37 | 39 | // Redirect to new printer page |
  | 38 |  | header('location: ?page='.$~~\_GET['page']~~.'&printersettings='.base64\_encode($newPrinterName)); |
  |  | 40 | header('location: ?page='.$page.'&printersettings='.base64\_encode($newPrinterName)); |
  | 39 | 41 | } |
  | 40 | 42 | } |
  | 41 | 43 |  |
  | 42 | 44 | function star\_cloudprnt\_clear\_printer\_queue() |
  | 43 |  | { |
  | 44 |  | $printerMac = star\_cloudprnt\_get\_selected\_printer\_mac(base64\_decode($\_GET['printersettings'])); |
  |  | 45 | { |
  |  | 46 | $page = htmlspecialchars($\_GET['page']); |
  |  | 47 | $selectedPrinter = htmlspecialchars(base64\_decode($\_GET['printersettings'])); |
  |  | 48 | $settingsParam = base64\_encode($selectedPrinter); |
  |  | 49 | $printerMac = star\_cloudprnt\_get\_selected\_printer\_mac($selectedPrinter); |
  | 45 | 50 |  |
  | 46 | 51 | if (isset($printerMac)) |
  | 47 | 52 | { |
  | 48 | 53 | star\_cloudprnt\_queue\_clear\_list($printerMac); |
  | 49 |  | header('location: ?page='.$~~\_GET['page'].'&printersettings='.$\_GET['printersettings']~~); |
  |  | 54 | header('location: ?page='.$page.'&printersettings='.$settingsParam); |
  | 50 | 55 | } |
  | 51 | 56 | } |
  | 52 | 57 |  |
  | 53 | 58 | function star\_cloudprnt\_clear\_order\_history() |
  | 54 | 59 | { |
  |  | 60 | $page = htmlspecialchars($\_GET['page']); |
  |  | 61 | $selectedPrinter = htmlspecialchars(base64\_decode($\_GET['printersettings'])); |
  |  | 62 | $settingsParam = base64\_encode($selectedPrinter); |
  |  | 63 |  |
  | 55 | 64 | $history\_path = STAR\_CLOUDPRNT\_DATA\_FOLDER\_PATH.star\_cloudprnt\_get\_os\_path("/order\_history.txt"); |
  | 56 | 65 | $fh = fopen($history\_path, 'w'); |
  | 57 | 66 | fclose($fh); |
  | 58 |  | header('location: ?page='.$~~\_GET['page'].'&printersettings='.$\_GET['printersettings']~~); |
  |  | 67 | header('location: ?page='.$page.'&printersettings='.$settingsParam); |
  | 59 | 68 | } |
  | 60 | 69 |  |
  | 61 | 70 | function star\_cloudprnt\_delete\_printer() |
  | 62 | 71 | { |
  | 63 |  | $printerMac = star\_cloudprnt\_get\_selected\_printer\_mac(base64\_decode($\_GET['printersettings'])); |
  |  | 72 |  |
  |  | 73 | $page = htmlspecialchars($\_GET['page']); |
  |  | 74 | $selectedPrinter = htmlspecialchars(base64\_decode($\_GET['printersettings'])); |
  |  | 75 | $printerMac = star\_cloudprnt\_get\_selected\_printer\_mac($selectedPrinter); |
  | 64 | 76 |  |
  | 65 | 77 | if (isset($printerMac)) |
  | 66 | 78 | { |
  | 67 | 79 | $printer = new Star\_CloudPRNT\_Printer($printerMac); |
  | 68 | 80 | $printer->deletePrinter(); |
  | 69 |  | header('location: ?page='.$\_GET['page']); |
  | 70 |  | } |
  | 71 |  | } |
  | 72 |  |  |
  | 73 |  | function star\_cloudprnt\_show\_printer\_settings\_page() |
  | 74 |  | { |
  | 75 |  | $selectedPrinter = base64\_decode($\_GET['printersettings']); |
  | 76 |  | $printerList = star\_cloudprnt\_get\_printer\_list(); |
  | 77 |  |  |
  | 78 |  | $printerdata; |
  | 79 |  | foreach ($printerList as $printer) |
  | 80 |  | { |
  | 81 |  | if ($printer['name'] == $selectedPrinter) |
  | 82 |  | { |
  | 83 |  | $printerdata = $printer; |
  | 84 |  | break; |
  | 85 |  | } |
  | 86 |  | } |
  | 87 |  |  |
  | 88 |  | ?> |
  | 89 |  |  |
  | 90 |  | <h2>Printer Information</h2> |
  |  | 81 | header('location: ?page='.$page); |
  |  | 82 | } |
  |  | 83 | } |
  |  | 84 |  |
  |  | 85 | function star\_cloudprnt\_render\_delete\_printer\_section($page, $online, $settingsParam) |
  |  | 86 | { |
  |  | 87 | star\_cloudprnt\_render\_settings\_section\_title("Delete Printer"); |
  |  | 88 |  |
  |  | 89 | if ($online){ |
  |  | 90 | ?> |
  |  | 91 | <span style="color: red"> |
  |  | 92 | <span class="dashicons dashicons-no"></span> |
  |  | 93 | You cannot delete the printer whilst it is connected |
  |  | 94 | </span> |
  |  | 95 | <?php |
  |  | 96 | } else { |
  |  | 97 | ?> |
  |  | 98 | <button class="button button-primary" |
  |  | 99 | onclick="location.href=\'?page=<?=$page?>&printersettings=<?=$settingsParam?>&dp\'"> |
  |  | 100 | Delete Printer |
  |  | 101 | </button> |
  |  | 102 | <?php |
  |  | 103 | } |
  |  | 104 | } |
  |  | 105 |  |
  |  | 106 | function star\_cloudprnt\_render\_printer\_info\_section\_script($page, $settingsParam) |
  |  | 107 | { |
  |  | 108 | ?> |
  | 91 | 109 | <script> |
  | 92 | 110 | function showDiv() { |
  | 93 | 111 | if (document.getElementById('editPrinterNameContainer').style.display == "block") |
  | 94 | 112 | { |
  | 95 | 113 | document.getElementById('editPrinterNameContainer').style.display = "none"; |
  | 96 | 114 | document.getElementById('changeNameLabel').innerHTML = "Rename"; |
  | 97 | 115 | } |
  | 98 | 116 | else |
  | 99 | 117 | { |
  | 100 | 118 | document.getElementById('editPrinterNameContainer').style.display = "block"; |
  | 101 | 119 | document.getElementById('changeNameLabel').innerHTML = "Hide"; |
  | 102 | 120 | } |
  | 103 | 121 | } |
  | 104 | 122 | function savePrinterName() |
  | 105 | 123 | { |
  | 106 |  | var newName = ~~document.getElementById("printerName").value~~; |
  | 107 |  | window.location.href = '?page=<?~~php echo $\_GET['page']; ?>&printersettings=<?php echo $\_GET['printersettings'];~~ ?>&npn='+btoa(newName); |
  |  | 124 | var newName = htmlspecialchars(document.getElementById("printerName").value); |
  |  | 125 | window.location.href = '?page=<?=$page?>&printersettings=<?=$settingsParam?>&npn='+btoa(newName); |
  | 108 | 126 | } |
  | 109 | 127 | </script> |
  |  | 128 |  |
  |  | 129 | <?php |
  |  | 130 | } |
  |  | 131 |  |
  |  | 132 | function star\_cloudprnt\_render\_printer\_info\_section($page, $settingsParam, $printerData) |
  |  | 133 | { |
  |  | 134 | star\_cloudprnt\_render\_printer\_info\_section\_script($page, $settingsParam); |
  |  | 135 | star\_cloudprnt\_render\_settings\_section\_title("Printer Information"); |
  |  | 136 |  |
  |  | 137 | $onlineString = '<span style="color: orange">Unknown</span>'; |
  |  | 138 | if ($printerData['printerOnline']) $onlineString = '<span style="color: green">Connected</span>'; |
  |  | 139 | else $onlineString = '<span style="color: red">Not Connected</span>'; |
  |  | 140 |  |
  |  | 141 | $httpStatus = str\_replace("%", " ", $printerData['statusCode']); |
  |  | 142 | $httpStatus = str\_replace(" 20", " ", $httpStatus); |
  |  | 143 |  |
  |  | 144 | ?> |
  |  | 145 | <strong>Name:</strong> <?=$printerData['name']?> - |
  |  | 146 | <a id="changeNameLabel" href="javascript:void(0);" onclick='showDiv()'>Rename</a> |
  |  | 147 | <br> |
  |  | 148 |  |
  |  | 149 | <div id="editPrinterNameContainer" style="display: none"> |
  |  | 150 | <input id="printerName" type="text" name="printer" id="printer" |
  |  | 151 | placeholder="<?=$printerData['name']?>" |
  |  | 152 | value="<?=$printerData['name']?>" |
  |  | 153 | autocomplete="off"> |
  |  | 154 | <a href="javascript: void(0);" onclick="savePrinterName()" style="padding-left: 10px">Save</a> |
  |  | 155 | </div> |
  |  | 156 |  |
  | 110 | 157 | <?php |
  | 111 |  | $onlineString = '<span style="color: orange">Unknown</span>'; |
  | 112 |  | if ($printerdata['printerOnline']) $onlineString = '<span style="color: green">Connected</span>'; |
  | 113 |  | else $onlineString = '<span style="color: red">Not Connected</span>'; |
  | 114 |  | $httpStatus = str\_replace("%", " ", $printerdata['statusCode']); |
  | 115 |  | $httpStatus = str\_replace(" 20", " ", $httpStatus); |
  | 116 |  |  |
  | 117 |  | echo "<strong>Name:</strong> ".$printerdata['name'].' - <a id="changeNameLabel" href="javascript:void(0);" onclick=\'showDiv()\'>Rename</a><br>'; |
  | 118 |  | echo '<div id="editPrinterNameContainer" style="display: none">'; |
  | 119 |  | echo '<input id="printerName" type="text" name="printer" id="nprinter" placeholder="'.$printerdata['name'].'" value="'.$printerdata['name'].'" autocomplete="off">'; |
  | 120 |  | echo '<a href="javascript: void(0);" onclick="savePrinterName()" style="padding-left: 10px">Save</a>'; |
  | 121 |  | echo '</div>'; |
  | 122 |  | if (isset($\_GET['errorCode']) && $\_GET['errorCode'] == 1) echo '<script type="text/javascript">showDiv()</script><span style="color:red;">Error: The new printer name must be between 3 and 35 characters long.</span><br>'; |
  | 123 |  | echo "<strong>Poll Interval:</strong> ".$printerdata['GetPollInterval']."<br>"; |
  | 124 |  | echo "<strong>Connectivity:</strong> ".$onlineString."<br>"; |
  | 125 |  | echo "<strong>ASB Status Code:</strong> ".$printerdata['status']."<br>"; |
  | 126 |  | echo "<strong>HTTP Status Code:</strong> ".$httpStatus."<br>"; |
  | 127 |  | echo "<strong>Last Communication:</strong> ".date("D j M y - H:i:s", $printerdata['lastActive']); |
  | 128 |  | ?> |
  | 129 |  |  |
  | 130 |  | <h2>Printer Identification</h2> |
  | 131 |  | <?php |
  | 132 |  | echo "<strong>MAC Address:</strong> ".strtoupper($printerdata['printerMAC'])."<br>"; |
  | 133 |  | echo "<strong>IP Address:</strong> ".$printerdata['ipAddress']; |
  | 134 |  | ?> |
  | 135 |  |  |
  | 136 |  | <h2>Interface</h2> |
  | 137 |  | <?php |
  | 138 |  | echo "<strong>Client Type:</strong> ".$printerdata['ClientType']."<br>"; |
  | 139 |  | echo "<strong>Client Version:</strong> ".$printerdata['ClientVersion']; |
  | 140 |  | ?> |
  | 141 |  |  |
  | 142 |  | <h2>Supported Encodings</h2> |
  | 143 |  | <?php |
  | 144 |  | $encodings = explode(';', $printerdata['Encodings']); |
  | 145 |  | foreach ($encodings as $encoding) |
  |  | 158 | if (isset($\_GET['errorCode']) && $\_GET['errorCode'] == 1) |
  | 146 | 159 | { |
  | 147 |  | echo ~~$encoding."<br>"~~; |
  |  | 160 | echo '<script type="text/javascript">showDiv()</script><span style="color:red;">Error: The new printer name must be between 3 and 35 characters long.</span><br>'; |
  | 148 | 161 | } |
  | 149 | 162 | ?> |
  | 150 | 163 |  |
  | 151 |  | <h2>Printer Queue</h2> |
  |  | 164 | <strong>Poll Interval:</strong> <?=$printerData['GetPollInterval']?><br> |
  |  | 165 | <strong>Connectivity:</strong> <?=$onlineString?><br> |
  |  | 166 | <strong>ASB Status Code:</strong> <?=$printerData['status']?><br> |
  |  | 167 | <strong>HTTP Status Code:</strong> <?$httpStatus?><br> |
  |  | 168 | <strong>Last Communication:</strong> <?=date("D j M y - H:i:s", $printerData['lastActive'])?> |
  |  | 169 |  |
  |  | 170 | <?php |
  |  | 171 |  |
  |  | 172 | } |
  |  | 173 |  |
  |  | 174 | function star\_cloudprnt\_render\_printer\_identification\_section($printerData) |
  |  | 175 | { |
  |  | 176 | star\_cloudprnt\_render\_settings\_section\_title("Printer Identification"); |
  |  | 177 |  |
  |  | 178 | ?> |
  |  | 179 | <strong>MAC Address:</strong> <?=strtoupper($printerData['printerMAC'])?><br> |
  |  | 180 | <strong>IP Address:</strong> <?=$printerData['ipAddress']?> |
  |  | 181 | <?php |
  |  | 182 | } |
  |  | 183 |  |
  |  | 184 | function star\_cloudprnt\_render\_printer\_interface\_section($printerData) |
  |  | 185 | { |
  |  | 186 | star\_cloudprnt\_render\_settings\_section\_title("Interface"); |
  |  | 187 |  |
  |  | 188 | ?> |
  |  | 189 | <strong>Client Type:</strong> <?=$printerData['ClientType']?><br> |
  |  | 190 | <strong>Client Version:</strong> <?=$printerData['ClientVersion']?> |
  |  | 191 | <?php |
  |  | 192 | } |
  |  | 193 |  |
  |  | 194 | function star\_cloudprnt\_render\_printer\_encodings\_section($printerData) |
  |  | 195 | { |
  |  | 196 | star\_cloudprnt\_render\_settings\_section\_title("Supported Encodings"); |
  |  | 197 |  |
  |  | 198 | $encodings = explode(';', $printerData['Encodings']); |
  |  | 199 | foreach ($encodings as $encoding) |
  |  | 200 | { |
  |  | 201 | echo $encoding."<br>"; |
  |  | 202 | } |
  |  | 203 | } |
  |  | 204 |  |
  |  | 205 | function star\_cloudprnt\_render\_printer\_queue\_section($page, $settingsParam, $printerData) |
  |  | 206 | { |
  |  | 207 | star\_cloudprnt\_render\_settings\_section\_title("Print Queue"); |
  |  | 208 |  |
  |  | 209 | $queueItems = star\_cloudprnt\_queue\_get\_queue\_list($printerData['printerMAC']); |
  |  | 210 |  |
  |  | 211 | if (empty($queueItems)) |
  |  | 212 | { |
  |  | 213 | echo 'No items found in printer queue.<br>'; |
  |  | 214 | } else { |
  |  | 215 | ?> |
  |  | 216 | <table> |
  |  | 217 | <thead> |
  |  | 218 | <tr> |
  |  | 219 | <th style="padding: 5px">Priority</th> |
  |  | 220 | <th>Order ID</th> |
  |  | 221 | <th>Queued On</th> |
  |  | 222 | </tr> |
  |  | 223 | </thead> |
  |  | 224 | <tbody> |
  |  | 225 | <?php |
  |  | 226 | foreach ($queueItems as $queueNumber=>$item) |
  |  | 227 | { |
  |  | 228 | $queue\_parts = explode('\_', $item); |
  |  | 229 | $order\_id = $queue\_parts[2]; |
  |  | 230 | $queue\_time = intval($queue\_parts[3]); |
  |  | 231 |  |
  |  | 232 | ?> |
  |  | 233 | <tr> |
  |  | 234 | <td style="text-align: center;"><?=$queueNumber?></td> |
  |  | 235 | <td style="text-align: center;"><?=$order\_id?></td> |
  |  | 236 | <td><?=date("H:i:s (d/m/y)", $queue\_time)?></td> |
  |  | 237 | </tr> |
  |  | 238 | <?php |
  |  | 239 | } |
  |  | 240 | ?> |
  |  | 241 | </tbody> |
  |  | 242 | </table> |
  |  | 243 | <br> |
  |  | 244 | <button class="button button-primary" |
  |  | 245 | onclick="location.href='?page=<?=$page?>&printersettings=<?=$settingsParam?>&cq'"> |
  |  | 246 | Clear Queue |
  |  | 247 | </button> |
  | 152 | 248 | <?php |
  | 153 |  | $queueItems = star\_cloudprnt\_queue\_get\_queue\_list($printerdata['printerMAC']); |
  | 154 |  | if (empty($queueItems)) echo 'No items found in printer queue.<br>'; |
  | 155 |  | else |
  | 156 |  | { |
  | 157 |  | echo '<table>'; |
  | 158 |  | echo '<tr>'; |
  | 159 |  | echo '<th style="padding: 5px">Priority</th>'; |
  | 160 |  | echo '<th>Order ID</th>'; |
  | 161 |  | echo '<th>Queued On</th>'; |
  | 162 |  | echo '</tr>'; |
  | 163 |  | foreach ($queueItems as $queueNumber=>$item) |
  | 164 |  | { |
  | 165 |  | $queue\_parts = explode('\_', $item); |
  | 166 |  | $order\_id = $queue\_parts[2]; |
  | 167 |  | $queue\_time = intval($queue\_parts[3]); |
  | 168 |  | echo '<tr>'; |
  | 169 |  | echo '<td style="text-align: center;">'.$queueNumber.'</td>'; |
  | 170 |  | echo '<td style="text-align: center;">'.$order\_id.'</td>'; |
  | 171 |  | echo '<td>'.date("H:i:s (d/m/y)", $queue\_time).'</td>'; |
  | 172 |  | echo '</tr>'; |
  | 173 |  | } |
  | 174 |  | echo '</table>'; |
  | 175 |  |  |
  | 176 |  | echo '<br><button class="button button-primary" onclick="location.href=\'?page='.$\_GET['page'] |
  | 177 |  | .'&printersettings='.$\_GET['printersettings'].'&cq\'">Clear Queue</button>'; |
  | 178 |  | } |
  | 179 |  |  |
  | 180 |  | ?> |
  | 181 |  |  |
  | 182 |  | <h2>Printed Order History</h2> |
  | 183 |  | <?php |
  | 184 |  | $orderHistory = star\_cloudprnt\_queue\_get\_order\_history(); |
  | 185 |  | if (empty($orderHistory)) echo 'No printed previous orders have been logged.<br>'; |
  | 186 |  | else |
  | 187 |  | { |
  | 188 |  | echo '<table>'; |
  | 189 |  | echo '<tr>'; |
  | 190 |  | echo '<th style="padding: 5px">Order ID</th>'; |
  | 191 |  | echo '<th>Copy Count</th>'; |
  | 192 |  | echo '<th>Queued On</th>'; |
  | 193 |  | echo '<th>Printed On</th>'; |
  | 194 |  | echo '</tr>'; |
  |  | 249 | } |
  |  | 250 | } |
  |  | 251 |  |
  |  | 252 | function star\_cloudprnt\_render\_printer\_history\_section($page, $settingsParam, $printerData) |
  |  | 253 | { |
  |  | 254 | star\_cloudprnt\_render\_settings\_section\_title("Printed Order History"); |
  |  | 255 |  |
  |  | 256 | $orderHistory = star\_cloudprnt\_queue\_get\_order\_history(); |
  |  | 257 |  |
  |  | 258 | if (empty($orderHistory)) |
  |  | 259 | { |
  |  | 260 | echo 'No printed previous orders have been logged.<br>'; |
  |  | 261 | return; |
  |  | 262 | } |
  |  | 263 |  |
  |  | 264 | ?> |
  |  | 265 | <table> |
  |  | 266 | <thead> |
  |  | 267 | <tr> |
  |  | 268 | <th style="padding: 5px">Order ID</th> |
  |  | 269 | <th>Copy Count</th> |
  |  | 270 | <th>Queued On</th> |
  |  | 271 | <th>Printed On</th> |
  |  | 272 | </tr> |
  |  | 273 | </thead> |
  |  | 274 | <tbody> |
  |  | 275 | <?php |
  | 195 | 276 | foreach ($orderHistory as $item) |
  | 196 | 277 | { |
  | 197 | 278 | $exploded = explode('\_', $item); |
  | 198 | 279 | $copy = intval($exploded[0])+1; |
  | 199 | 280 | $order\_id = $exploded[2]; |
  | 200 | 281 | $queue\_time = intval($exploded[3]); |
  | 201 | 282 | $printed\_time = intval($exploded[4]); |
  | 202 | 283 |  |
  | 203 |  | echo '<tr>'; |
  | 204 |  | echo '<td style="text-align: center;">'.$order\_id.'</td>'; |
  | 205 |  | echo '<td style="text-align: center;">'.$copy.'</td>'; |
  | 206 |  | echo '<td style="text-align: center;">'.date("H:i:s (d/m/y)", $queue\_time).'</td>'; |
  | 207 |  | echo '<td>'.date("H:i:s (d/m/y)", $printed\_time).'</td>'; |
  | 208 |  | echo '</tr>'; |
  |  | 284 | ?> |
  |  | 285 | <tr> |
  |  | 286 | <td style="text-align: center;"><?=$order\_id?></td> |
  |  | 287 | <td style="text-align: center;"><?=$copy?></td> |
  |  | 288 | <td style="text-align: center;"><?=date("H:i:s (d/m/y)", $queue\_time)?></td> |
  |  | 289 | <td><?=date("H:i:s (d/m/y)", $printed\_time)?></td> |
  |  | 290 | </tr> |
  |  | 291 | <?php |
  | 209 | 292 | } |
  | 210 |  | echo '</table>'; |
  | 211 |  |  |
  | 212 |  | echo '<br><button class="button button-primary" onclick="location.href=\'?page='.$\_GET['page'] |
  | 213 |  | .'&printersettings='.$\_GET['printersettings'].'&coh\'">Clear Order History</button>'; |
  | 214 |  | } |
  | 215 |  | ?> |
  |  | 293 | ?> |
  |  | 294 | </tbody> |
  |  | 295 | </table> |
  | 216 | 296 |  |
  | 217 |  | <h2>Delete Printer</h2> |
  | 218 |  | <?php |
  | 219 |  | if ($printerdata['printerOnline']) echo '<span style="color: red"><span class="dashicons dashicons-no"></span>You cannot delete the printer whilst it is connected</span>'; |
  | 220 |  | else echo '<button class="button button-primary" onclick="location.href=\'?page='.$\_GET['page'] |
  | 221 |  | .'&printersettings='.$\_GET['printersettings'].'&dp\'">Delete Printer</button>'; |
  | 222 |  | ?> |
  | 223 |  |  |
  | 224 |  | <br><br><a href="?page=<?php echo $\_GET['page']; ?>">Return to previous page</a> |
  | 225 |  | <?php |
  |  | 297 | <br> |
  |  | 298 | <button class="button button-primary" |
  |  | 299 | onclick="location.href='?page=<?=$page?>'&printersettings='<?=$settingsParam?>&coh\'"> |
  |  | 300 | Clear Order History |
  |  | 301 | </button>'; |
  |  | 302 | <?php |
  |  | 303 | } |
  |  | 304 |  |
  |  | 305 | function star\_cloudprnt\_render\_settings\_error($message) |
  |  | 306 | { |
  |  | 307 | ?> |
  |  | 308 | <h2 style="color: red"><?=$message?></h2> |
  |  | 309 | <?php |
  |  | 310 | } |
  |  | 311 |  |
  |  | 312 | function star\_cloudprnt\_render\_settings\_section\_title($message) |
  |  | 313 | { |
  |  | 314 | ?> |
  |  | 315 | <h2><?=$message?></h2> |
  |  | 316 | <?php |
  |  | 317 | } |
  |  | 318 |  |
  |  | 319 | function star\_cloudprnt\_render\_return\_to\_settings\_link($page) |
  |  | 320 | { |
  |  | 321 | ?> |
  |  | 322 | <br><br><a href="?page=<?=$page?>">Return to settings page</a> |
  |  | 323 | <?php |
  |  | 324 | } |
  |  | 325 |  |
  |  | 326 | function star\_cloudprnt\_show\_printer\_settings\_page() |
  |  | 327 | { |
  |  | 328 | $page = htmlspecialchars($\_GET['page']); |
  |  | 329 | $selectedPrinter = htmlspecialchars(base64\_decode($\_GET['printersettings'])); |
  |  | 330 | $settingsParam = base64\_encode($selectedPrinter); |
  |  | 331 | $printerList = star\_cloudprnt\_get\_printer\_list(); |
  |  | 332 |  |
  |  | 333 | $printerData = null; |
  |  | 334 | foreach ($printerList as $printer) |
  |  | 335 | { |
  |  | 336 | if ($printer['name'] == $selectedPrinter) |
  |  | 337 | { |
  |  | 338 | $printerData = $printer; |
  |  | 339 | break; |
  |  | 340 | } |
  |  | 341 | } |
  |  | 342 |  |
  |  | 343 | if($printerData == null) |
  |  | 344 | { |
  |  | 345 | // Render Printer Not Found page |
  |  | 346 | star\_cloudprnt\_render\_settings\_error("Printer Not Found!"); |
  |  | 347 | star\_cloudprnt\_render\_return\_to\_settings\_link($page); |
  |  | 348 |  |
  |  | 349 | return; |
  |  | 350 | } |
  |  | 351 |  |
  |  | 352 | // render device information sections |
  |  | 353 | star\_cloudprnt\_render\_printer\_info\_section($page, $settingsParam, $printerData); |
  |  | 354 | star\_cloudprnt\_render\_printer\_identification\_section($printerData); |
  |  | 355 | star\_cloudprnt\_render\_printer\_interface\_section($printerData); |
  |  | 356 | star\_cloudprnt\_render\_printer\_encodings\_section($printerData); |
  |  | 357 | star\_cloudprnt\_render\_printer\_queue\_section($page, $settingsParam, $printerData); |
  |  | 358 | star\_cloudprnt\_render\_printer\_history\_section($page, $settingsParam, $printerData); |
  |  | 359 |  |
  |  | 360 | star\_cloudprnt\_render\_delete\_printer\_section($page, $printerData['printerOnline'], $settingsParam); |
  | 226 | 361 | } |
  | 227 | 362 | ?> |
* ## [star-cloudprnt-for-woocommerce/trunk/readme.txt](/changeset/2991002/star-cloudprnt-for-woocommerce/trunk/readme.txt?old=2510015&old_path=star-cloudprnt-for-woocommerce%2Ftrunk%2Freadme.txt "Show the [2510015:2991002] differences restricted to star-cloudprnt-for-woocommerce/trunk/readme.txt")

  | [r2510015](/browser/star-cloudprnt-for-woocommerce/trunk/readme.txt?rev=2510015#L1 "Show revision 2510015 of this file in browser") | [r2991002](/browser/star-cloudprnt-for-woocommerce/trunk/readme.txt?rev=2991002#L1 "Show revision 2991002 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Star CloudPRNT for WooCommerce === |
  | 2 |  | Contributors: lawrenceowen, ~~athompson1, gcubero~~, fmahmood |
  |  | 2 | Contributors: lawrenceowen, gcubero, acunnningham, fmahmood |
  | 3 | 3 | Tags: star, printing, printers, automated, e-commerce, store, sales, downloadable, downloads, woocommerce, restaurant, order, receipt |
  | 4 | 4 | Requires at least: 5.0 |
  | 5 |  | Tested up to: ~~5.7~~ |
  |  | 5 | Tested up to: 6.3.2 |
  | 6 | 6 | Requires PHP: 7.2 |
  | 7 |  | Stable tag: 2.0.~~3~~ |
  |  | 7 | Stable tag: 2.0.4 |
  | 8 | 8 | License: MIT |
  | 9 | 9 |  |
  | 10 | 10 | Star CloudPRNT for WooCommerce enables Cloud printing technology with your Star Receipt printer. |
  | 11 | 11 |  |
  | 12 | 12 | == Description == |
  | 13 | 13 | Star CloudPRNT for WooCommerce will enable you to print automated receipts each time a customer places an order on your WooCommerce based eCommerce website. |
  | 14 | 14 | This can be used to quickly create a remote order/receipt printing solution for restaurants, take-aways, bakeries and similar sites, with minimal set-up time or cost. |
  | 15 | 15 |  |
  | 16 | 16 | This plugin can only be used alongside the WooCommerce WordPress plugin.  For more information on the WooCommerce plugin please visit www.woocommerce.com |
  | 17 | 17 |  |
  | 18 | 18 | == Installation == |
  | 19 | 19 | 1. Install and activate the plugin. |
  | 20 | 20 | 2. Go to your WordPress admin control panel and you should notice a new link for "Star CloudPRNT for WooCommerce" under your WordPress "Settings" category. |
  | 21 | 21 | 3. Once you have opened up the Star CloudPRNT settings page, you will be given a unique Server URL which you need to copy. |
  | 22 | 22 | 4. Next setup your compatible Star printer onto your network and run a self-test on the printer to get its IP address. |
  | 23 | 23 | 5. Type the printer IP address into a web browser to access its web interface and then login (default username "root" and password "public"). |
  | 24 | 24 | 6. Navigate to the "Star CloudPRNT" section and enable the CloudPRNT service, then paste the URL you copied earlier into the "Server URL" field. |
  | 25 | 25 | 7. Press "Submit" then navigate to the "Save" section. |
  | 26 | 26 | 8. Choose "Save --> Configuration printing --> Restart device" and the printer will reboot (this can take up to 2 minutes). |
  | 27 | 27 | 9. Once the printer has rebooted, go back to your Star CloudPRNT settings page and refresh it, you will notice your printer will be populated in the printer list which means your printer is now setup and ready to use. |
  | 28 | 28 | 10. Finally, you can now enable the CloudPRNT service within the Star CloudPRNT settings page, once enabled all orders placed through WooCommerce will also be printed out on your Star printer. |
  | 29 | 29 |  |
  | 30 | 30 | For help and support please e-mail support@star-emea.com |
  | 31 | 31 |  |
  | 32 | 32 | = Video Installation Guide = |
  | 33 | 33 | https://www.youtube.com/watch?v=2O3pZJ-kfqk |
  | 34 | 34 |  |
  | 35 | 35 | = Minimum Requirements = |
  | 36 | 36 | \* PHP 7.2 or greater. |
  | 37 | 37 | \* WordPress 5.0, 5.1, 5.3, 5.4, 5.5, 5.6, 5.7 |
  | 38 | 38 | \* WooCommerce plugin 4.0, 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.7, 4.8, 4.9, 5.0, 5.1 |
  | 39 | 39 | \* Star TSP650II, TSP700II, TSP800II or SP700 series printer with a IFBD-HI01X/HI02X interface. Printer interface firmware 1.6 or later recommended. |
  | 40 | 40 | \* Star mC-Print3 or mC-Print2 series printer, firmware version 3.0 or later recommended. |
  | 41 | 41 |  |
  | 42 | 42 |  |
  | 43 | 43 | == Frequently Asked Questions == |
  | 44 | 44 |  |
  | 45 | 45 | = Which printer models are supported? = |
  | 46 | 46 |  |
  | 47 | 47 | Supported printer models are: |
  | 48 | 48 |  |
  | 49 | 49 | \* Star TSP650II with HIX interface |
  | 50 | 50 | \* Star mC-Print3 (required plugin version 1.1.0 or later) |
  | 51 | 51 | \* Star mC-Print2 (required plugin version 1.1.0 or later) |
  | 52 | 52 | \* Star TSP700II with HIX interface |
  | 53 | 53 | \* Star TSP800II with HIX interface (currently limited to 80mm paper width support) |
  | 54 | 54 | \* Star SP700 with HIX interface |
  | 55 | 55 |  |
  | 56 | 56 | Version 3.0 firmware or later is recommended for mC-Print printer models. |
  | 57 | 57 |  |
  | 58 | 58 | = Can I print my local language characters? = |
  | 59 | 59 |  |
  | 60 | 60 | Yes, you can enable UTF-8 text encoding if you have a compatible printer model to resolve typical language specific character issues. |
  | 61 | 61 | Please use the plugin settings page to enable UTB-8 mode. |
  | 62 | 62 |  |
  | 63 | 63 | Models with UTF-8 support are the TSP650II, mC-Print3 and mC-Print2. |
  | 64 | 64 | These printers cover most Latin, Cyrilic, Greek and CJK characters, although not all characters can be supported by all device models and for TSP654II a firmware update may be required. Please talk with Star for advice if necessary. |
  | 65 | 65 | Support for full-width CJK characters is partial. They are supported but there may be page formatting and word wrapping errors. |
  | 66 | 66 |  |
  | 67 | 67 | There is currently no support for printing right-to-left languages in this plugin. If this is required, please talkw with Star about alternative integration options. |
  | 68 | 68 |  |
  | 69 | 69 | = Can I modify the print job design/layout? = |
  | 70 | 70 |  |
  | 71 | 71 | At this time, modifying the print job layout is possible only by directly editing the plugin PHP source code. This is entirely permitted by the license terms. |
  | 72 | 72 | Your local Star Micronics support contact may be able to offer some assistance. |
  | 73 | 73 |  |
  | 74 | 74 | = How can I add an image to the top or end of my print? = |
  | 75 | 75 |  |
  | 76 | 76 | Images must be pre-stored inside the printer FlashROM memory in order to be printed bu this plugin. Once stored, they will have logo number/id, which can be input into the "Printer Logo Settings" settings area to enable top and/or bottom logo printing. |
  | 77 | 77 | Storing images inside the Print FlashROM is possible with a software utility provided by Star Micronics, included with the standard indows driver package. These can be downloaded from the Star Micronics web site. |
  | 78 | 78 |  |
  | 79 | 79 | = Sometimes orders do not print, or print later than expected = |
  | 80 | 80 |  |
  | 81 | 81 | Please make sure that you update your plugin version to 2.0.0 or later, and ensure that your printing trigger is not set to "Thank You", this method of detecting new orders is not considered to be reliable, and included only for compatibility with existing sites using older versions of the plugin. |
  | 82 | 82 | If issues continue, then please check the quality of your printers internet connection so that it can communicatw with your site. Star printers have a disconection message print option that can sometimes help to diagnose network connectivity issues. Please talk with your local Star Micronics support office if assistance is needed. |
  | 83 | 83 |  |
  | 84 | 84 | = My printer does not appear on the "Selected Printer" dropdown list = |
  | 85 | 85 |  |
  | 86 | 86 | This means that you printer is unable to connect with your server, and can have many potential causes: |
  | 87 | 87 |  |
  | 88 | 88 | As a first step, if you are using an mC-Print2 or mC-Print3 model printer, the please update your printer firmware to version 3.0 or later to ensure compatibility with web hosts that have stronger TLS encryption. |
  | 89 | 89 | Firmware can be updated using the Star "mC-Print Utility" app, available via Google Play, or Apple App stores. |
  | 90 | 90 |  |
  | 91 | 91 | Check that the printer has a working outgoing internet connection. Star tech support may be able to help with this if needed. |
  | 92 | 92 |  |
  | 93 | 93 | Ensure that your your hosting does not have a traffic filter that may be blocking the printer from connecting to your web site or aggressively caching responses to your sites CloudPRNT URL. It may be necessary to ask your hosting provided to set up a rule to allow your printer to connect to your sites CloudPRNT URL. They must allow at least GET and POST requests without caching responses. |
  | 94 | 94 |  |
  | 95 | 95 |  |
  | 96 | 96 | == Screenshots == |
  | 97 | 97 | 1. Star CloudPRNT settings page. |
  | 98 | 98 | 2. Printer management page. |
  | 99 | 99 |  |
  | 100 | 100 | == Upgrade Notice == |
  | 101 | 101 |  |
  | 102 | 102 | = 2.0.0 = |
  | 103 | 103 | \* Make printing trigger method user configurable - can improve reliability |
  | 104 | 104 | \* Support order and item metadata/custom field printing (Add-ons, delivery times etc.) |
  | 105 | 105 | \* Extended receipt configuration |
  | 106 | 106 | \* Print button on the edit order page |
  | 107 | 107 |  |
  | 108 | 108 | = 1.1.0 = |
  | 109 | 109 | \* Add Support for Star mC-Print3 and mC-Print2 printer ranges |
  | 110 | 110 |  |
  | 111 | 111 | == Changelog == |
  | 112 | 112 |  |
  |  | 113 | = 2.0.4 = |
  |  | 114 | \* Resolve a potential script injection vulnerability on the settings page |
  |  | 115 |  |
  | 113 | 116 | = 2.0.3 = |
  | 114 | 117 | \* Improve buzzer compatibility with mC-Print models. |
  | 115 | 118 | \* Add option to print ID and or SKU on item lines |
  | 116 | 119 | \* Add option to trigger printing when and order is assigned on-hold status |
  | 117 | 120 | \* Enable word-wrapping when printing items, in case of very long item names |
  | 118 | 121 | \* Enable Word-wrapping when printing header section fields, in case of long information on 58mm/2" paper |
  | 119 | 122 | \* Format the sub-heading order number and print timestamp on tow lines, in case they can not fit side by side |
  | 120 | 123 | \* Add printer control class methods for text highlighting, Qr Code, and Barcode printing methods to the printer command generation classes. |
  | 121 | 124 | Not currently exposed as features but may be useful to anyone forking/modifying the plugin. |
  | 122 | 125 |  |
  | 123 | 126 | = 2.0.2 = |
  | 124 | 127 | \* Fix missing "Shipping Method" from the receipt header. |
  | 125 | 128 |  |
  | 126 | 129 | = 2.0.1 = |
  | 127 | 130 | \* Do not print any blank lines when the title, or item footer text is empty |
  | 128 | 131 | \* Add some mailchimp metadata key names to the defailt exclusions list |
  | 129 | 132 | \* Change the timing for registering settings, to avoid reported issue with accessing settings with their default value. |
  | 130 | 133 | \* Remove all settings when uninstalled |
  | 131 | 134 |  |
  | 132 | 135 | = 2.0.0 = |
  | 133 | 136 | \* Make printing trigger method user configurable |
  | 134 | 137 | \* Clean-up settings page design |
  | 135 | 138 | \* Add a setting to list custom fields that should be excluded from printing |
  | 136 | 139 | \* Add a "Print with Star CloudPRNT" button to the Edit Order page sidebar |
  | 137 | 140 | \* Add a settings link to the plugins WordPress plugins page |
  | 138 | 141 | \* Add support for printing order item metadata - compatible with many Add-Ons plugins |
  | 139 | 142 | \* Add support for printing order metadata - compatible with many delivery scheduling plugins and others that append fields to an order |
  | 140 | 143 | \* Add a setting to support multiple copies |
  | 141 | 144 | \* Add support for setting an alternative print name for products by adding a "star\_cp\_print\_name" attribute |
  | 142 | 145 | \* Display a warning when WooCommerce can not be detected, instead of refusing to work completely, because the detection can fail in case of some custom WooCommerce installs. |
  | 143 | 146 | \* Improve Timestamp display to match the site formatting local and site timezone - instead of server timezone |
  | 144 | 147 | \* Refactor the source, to make it more approachable to developers who fork the project |
  | 145 | 148 | \* Drop support for WordPress versions earlier than 5.x.x |
  | 146 | 149 | \* Drop support for WooCommerce versions earlier than 4.x.x |
  | 147 | 150 | \* Drop support for PHP versions earlier than 7.2 |
  | 148 | 151 |  |
* ## [star-cloudprnt-for-woocommerce/trunk/star-cloudprnt-for-woocommerce.php](/changeset/2991002/star-cloudprnt-for-woocommerce/trunk/star-cloudprnt-for-woocommerce.php?old=2510009&old_path=star-cloudprnt-for-woocommerce%2Ftrunk%2Fstar-cloudprnt-for-woocommerce.php "Show the [2510015:2991002] differences restricted to star-cloudprnt-for-woocommerce/trunk/star-cloudprnt-for-woocommerce.php")

  | [r2510015](/browser/star-cloudprnt-for-woocommerce/trunk/star-cloudprnt-for-woocommerce.php?rev=2510009#L1 "Show revision 2510015 of this file in browser") | [r2991002](/browser/star-cloudprnt-for-woocommerce/trunk/star-cloudprnt-for-woocommerce.php?rev=2991002#L1 "Show revision 2991002 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 | 3 | \* Plugin Name: Star CloudPRNT for WooCommerce |
  | 4 | 4 | \* Plugin URI: http://www.star-emea.com |
  | 5 | 5 | \* Description: Star CloudPRNT for WooCommerce enables cloud printing technology with your Star Receipt printer. |
  | 6 |  | \* Version: 2.0.~~3~~ |
  | 7 |  | \* Author: lawrenceowen, ~~athompson1, gcubero~~, fmahmood |
  |  | 6 | \* Version: 2.0.4 |
  |  | 7 | \* Author: lawrenceowen, gcubero, acunnningham, fmahmood |
  | 8 | 8 | \* Author URI: http://www.star-emea.com/support |
  | 9 | 9 | \* Requires at least: 5.0 |
  | 10 |  | \* Tested up to: 5.7 |
  |  | 10 | \* Tested up to: 6.3.2 |
  |  | 11 | \* Requires PHP: 7.2 |
  |  | 12 | \* License: MIT |
  | 11 | 13 | \* WC requires at least: 4.0 |
  | 12 |  | \* WC tested up to: ~~5~~.1 |
  |  | 14 | \* WC tested up to: 8.2.1 |
  | 13 | 15 | \*/ |
  | 14 | 16 |  |
  | 15 | 17 | // Block direct access to this script |
  | 16 | 18 | if (!defined( 'ABSPATH' )) exit; |
  | 17 | 19 |  |
  | 18 | 20 | // Include printer files |
  | 19 | 21 | if (strtoupper(substr(PHP\_OS, 0, 3)) === 'WIN') include\_once(plugin\_dir\_path(\_\_FILE\_\_).'cloudprnt\\printer.inc.php'); |
  | 20 | 22 | else include\_once(plugin\_dir\_path(\_\_FILE\_\_).'cloudprnt/printer.inc.php'); |
  | 21 | 23 | include\_once(plugin\_dir\_path(\_\_FILE\_\_).star\_cloudprnt\_get\_os\_path('cloudprnt/printer\_star\_line.inc.php')); |
  | 22 | 24 | include\_once(plugin\_dir\_path(\_\_FILE\_\_).star\_cloudprnt\_get\_os\_path('cloudprnt/printer\_text\_plain.inc.php')); |
  | 23 | 25 | include\_once(plugin\_dir\_path(\_\_FILE\_\_).star\_cloudprnt\_get\_os\_path('cloudprnt/printer\_star\_prnt.inc.php')); |
  | 24 | 26 |  |
  | 25 | 27 | // Include plugin page settings and woo commerce hooks |
  | 26 | 28 | include\_once(plugin\_dir\_path(\_\_FILE\_\_).star\_cloudprnt\_get\_os\_path('create-settings.php')); |
  | 27 | 29 | include\_once(plugin\_dir\_path(\_\_FILE\_\_).star\_cloudprnt\_get\_os\_path('order-handler.php')); |
  | 28 | 30 |  |
  | 29 | 31 | star\_cloudprnt\_register\_settings(); |
  | 30 | 32 |  |
  | 31 | 33 | // Run page setup and woo commerce hooks |
  | 32 | 34 | star\_cloudprnt\_create\_settings\_page(); |
  | 33 | 35 | star\_cloudprnt\_setup\_order\_handler(); |
  | 34 | 36 |  |
  | 35 | 37 | // Add a settings link on the plugins page |
  | 36 | 38 | function my\_plugin\_settings\_link($links) { |
  | 37 | 39 | $settings\_link = '<a href="options-general.php?page=star-cloudprnt-settings-admin">Settings</a>'; |
  | 38 | 40 | array\_unshift($links, $settings\_link); |
  | 39 | 41 | return $links; |
  | 40 | 42 | } |
  | 41 | 43 | $plugin = plugin\_basename(\_\_FILE\_\_); |
  | 42 | 44 | add\_filter("plugin\_action\_links\_$plugin", 'my\_plugin\_settings\_link' ); |
  | 43 | 45 | ?> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2991002&old=2510015&new_path=%2Fstar-cloudprnt-for-woocommerce%2Ftrunk&old_path=%2Fstar-cloudprnt-for-woocommerce%2Ftrunk)
* [Zip Archive](?format=zip&new=2991002&old=2510015&new_path=%2Fstar-cloudprnt-for-woocommerce%2Ftrunk&old_path=%2Fstar-cloudprnt-for-woocommerce%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


