=== Content from cdn.kernel.org_600dbe3d_20250115_092948.html ===
commit e128ce12e29c5a6d9a88c7b8a1c8e07402c38fed
Author: Greg Kroah-Hartman
Date: Thu Mar 30 12:51:43 2023 +0200
Linux 6.2.9
Link: https://lore.kernel.org/r/20230328142619.643313678@linuxfoundation.org
Tested-by: Ronald Warsow
Tested-by: Markus Reichelt
Tested-by: Justin M. Forbes
Tested-by: Shuah Khan
Tested-by: Bagas Sanjaya
Tested-by: Ron Economos
Tested-by: Chris Paterson (CIP)
Tested-by: Jon Hunter
Tested-by: Linux Kernel Functional Testing
Tested-by: Conor Dooley
Tested-by: Florian Fainelli
Tested-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit 6cf4184211a92523ee96abaf989ee48282edfdb6
Author: Vincent Guittot
Date: Fri Mar 17 17:08:10 2023 +0100
sched/fair: Sanitize vruntime of entity being migrated
commit a53ce18cacb477dd0513c607f187d16f0fa96f71 upstream.
Commit 829c1651e9c4 ("sched/fair: sanitize vruntime of entity being placed")
fixes an overflowing bug, but ignore a case that se->exec\_start is reset
after a migration.
For fixing this case, we delay the reset of se->exec\_start after
placing the entity which se->exec\_start to detect long sleeping task.
In order to take into account a possible divergence between the clock\_task
of 2 rqs, we increase the threshold to around 104 days.
Fixes: 829c1651e9c4 ("sched/fair: sanitize vruntime of entity being placed")
Originally-by: Zhang Qiao
Signed-off-by: Vincent Guittot
Signed-off-by: Peter Zijlstra (Intel)
Tested-by: Zhang Qiao
Link: https://lore.kernel.org/r/20230317160810.107988-1-vincent.guittot@linaro.org
Signed-off-by: Greg Kroah-Hartman
commit ab2bc893b74c489f77b9f6530a1161622aefdc76
Author: Zhang Qiao
Date: Mon Jan 30 13:22:16 2023 +0100
sched/fair: sanitize vruntime of entity being placed
commit 829c1651e9c4a6f78398d3e67651cef9bb6b42cc upstream.
When a scheduling entity is placed onto cfs\_rq, its vruntime is pulled
to the base level (around cfs\_rq->min\_vruntime), so that the entity
doesn't gain extra boost when placed backwards.
However, if the entity being placed wasn't executed for a long time, its
vruntime may get too far behind (e.g. while cfs\_rq was executing a
low-weight hog), which can inverse the vruntime comparison due to s64
overflow. This results in the entity being placed with its original
vruntime way forwards, so that it will effectively never get to the cpu.
To prevent that, ignore the vruntime of the entity being placed if it
didn't execute for much longer than the characteristic sheduler time
scale.
[rkagan: formatted, adjusted commit log, comments, cutoff value]
Signed-off-by: Zhang Qiao
Co-developed-by: Roman Kagan
Signed-off-by: Roman Kagan
Signed-off-by: Peter Zijlstra (Intel)
Link: https://lkml.kernel.org/r/20230130122216.3555094-1-rkagan@amazon.de
Signed-off-by: Greg Kroah-Hartman
commit f2edd6b91d44cf2b9c8030b77295c92f55ace339
Author: Mike Snitzer
Date: Wed Mar 8 14:39:54 2023 -0500
dm crypt: avoid accessing uninitialized tasklet
commit d9a02e016aaf5a57fb44e9a5e6da8ccd3b9e2e70 upstream.
When neither "no\_read\_workqueue" nor "no\_write\_workqueue" are enabled,
tasklet\_trylock() in crypt\_dec\_pending() may still return false due to
an uninitialized state, and dm-crypt will unnecessarily do io completion
in io\_queue workqueue instead of current context.
Fix this by adding an 'in\_tasklet' flag to dm\_crypt\_io struct and
initialize it to false in crypt\_io\_init(). Set this flag to true in
kcryptd\_queue\_crypt() before calling tasklet\_schedule(). If set
crypt\_dec\_pending() will punt io completion to a workqueue.
This also nicely avoids the tasklet\_trylock/unlock hack when tasklets
aren't in use.
Fixes: 8e14f610159d ("dm crypt: do not call bio\_endio() from the dm-crypt tasklet")
Cc: stable@vger.kernel.org
Reported-by: Hou Tao
Suggested-by: Ignat Korchagin
Reviewed-by: Ignat Korchagin
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 2c743db1193bf0e76c73d71ede08bd9b96e6c31d
Author: Mikulas Patocka
Date: Mon Mar 6 11:17:58 2023 -0500
dm crypt: add cond\_resched() to dmcrypt\_write()
commit fb294b1c0ba982144ca467a75e7d01ff26304e2b upstream.
The loop in dmcrypt\_write may be running for unbounded amount of time,
thus we need cond\_resched() in it.
This commit fixes the following warning:
[ 3391.153255][ C12] watchdog: BUG: soft lockup - CPU#12 stuck for 23s! [dmcrypt\_write/2:2897]
...
[ 3391.387210][ C12] Call trace:
[ 3391.390338][ C12] blk\_attempt\_bio\_merge.part.6+0x38/0x158
[ 3391.395970][ C12] blk\_attempt\_plug\_merge+0xc0/0x1b0
[ 3391.401085][ C12] blk\_mq\_submit\_bio+0x398/0x550
[ 3391.405856][ C12] submit\_bio\_noacct+0x308/0x380
[ 3391.410630][ C12] dmcrypt\_write+0x1e4/0x208 [dm\_crypt]
[ 3391.416005][ C12] kthread+0x130/0x138
[ 3391.419911][ C12] ret\_from\_fork+0x10/0x18
Reported-by: yangerkun
Fixes: dc2676210c42 ("dm crypt: offload writes to thread")
Cc: stable@vger.kernel.org
Signed-off-by: Mikulas Patocka
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 5b66e36a3efd24041b7374432bfa4dec2ff01e95
Author: Jiasheng Jiang
Date: Thu Mar 16 14:55:06 2023 +0800
dm stats: check for and propagate alloc\_percpu failure
commit d3aa3e060c4a80827eb801fc448debc9daa7c46b upstream.
Check alloc\_precpu()'s return value and return an error from
dm\_stats\_init() if it fails. Update alloc\_dev() to fail if
dm\_stats\_init() does.
Otherwise, a NULL pointer dereference will occur in dm\_stats\_cleanup()
even if dm-stats isn't being actively used.
Fixes: fd2ed4d25270 ("dm: add statistics support")
Cc: stable@vger.kernel.org
Signed-off-by: Jiasheng Jiang
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit cc3c3ee6d035d38f116a6dec88acf7f74598aebd
Author: Wei Chen
Date: Tue Mar 14 16:54:21 2023 +0000
i2c: xgene-slimpro: Fix out-of-bounds bug in xgene\_slimpro\_i2c\_xfer()
commit 92fbb6d1296f81f41f65effd7f5f8c0f74943d15 upstream.
The data->block[0] variable comes from user and is a number between
0-255. Without proper check, the variable may be very large to cause
an out-of-bounds when performing memcpy in slimpro\_i2c\_blkwr.
Fix this bug by checking the value of writelen.
Fixes: f6505fbabc42 ("i2c: add SLIMpro I2C device driver on APM X-Gene platform")
Signed-off-by: Wei Chen
Cc: stable@vger.kernel.org
Reviewed-by: Andi Shyti
Signed-off-by: Wolfram Sang
Signed-off-by: Greg Kroah-Hartman
commit a963bf055a6480d2b7b5312628cf52279ecd80ad
Author: Ivan Bornyakov
Date: Mon Mar 6 16:25:26 2023 +0300
bus: imx-weim: fix branch condition evaluates to a garbage value
commit 1adab2922c58e7ff4fa9f0b43695079402cce876 upstream.
If bus type is other than imx50\_weim\_devtype and have no child devices,
variable 'ret' in function weim\_parse\_dt() will not be initialized, but
will be used as branch condition and return value. Fix this by
initializing 'ret' with 0.
This was discovered with help of clang-analyzer, but the situation is
quite possible in real life.
Fixes: 52c47b63412b ("bus: imx-weim: improve error handling upon child probe-failure")
Signed-off-by: Ivan Bornyakov
Cc: stable@vger.kernel.org
Reviewed-by: Fabio Estevam
Signed-off-by: Shawn Guo
Signed-off-by: Greg Kroah-Hartman
commit b4f664ffd8f78c05a1fd542a28bc5a11e994c014
Author: Liam R. Howlett
Date: Wed Mar 8 17:03:10 2023 -0500
mm/ksm: fix race with VMA iteration and mm\_struct teardown
commit 6db504ce55bdbc575723938fc480713c9183f6a2 upstream.
exit\_mmap() will tear down the VMAs and maple tree with the mmap\_lock held
in write mode. Ensure that the maple tree is still valid by checking
ksm\_test\_exit() after taking the mmap\_lock in read mode, but before the
for\_each\_vma() iterator dereferences a destroyed maple tree.
Since the maple tree is destroyed, the flags telling lockdep to check an
external lock has been cleared. Skip the for\_each\_vma() iterator to avoid
dereferencing a maple tree without the external lock flag, which would
create a lockdep warning.
Link: https://lkml.kernel.org/r/20230308220310.3119196-1-Liam.Howlett@oracle.com
Fixes: a5f18ba07276 ("mm/ksm: use vma iterators instead of vma linked list")
Signed-off-by: Liam R. Howlett
Reported-by: Pengfei Xu
Link: https://lore.kernel.org/lkml/ZAdUUhSbaa6fHS36@xpf.sh.intel.com/
Reported-by: syzbot+2ee18845e89ae76342c5@syzkaller.appspotmail.com
Link: https://syzkaller.appspot.com/bug?id=64a3e95957cd3deab99df7cd7b5a9475af92c93e
Acked-by: David Hildenbrand
Cc: Matthew Wilcox (Oracle)
Cc:
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit e62c1839e71c36fe3a24951eef8d179be726fd4b
Author: Abel Vesa
Date: Mon Mar 6 15:55:27 2023 +0200
soc: qcom: llcc: Fix slice configuration values for SC8280XP
commit 77bf4b3ed42e31d29b255fcd6530fb7a1e217e89 upstream.
The slice IDs for CVPFW, CPUSS1 and CPUWHT currently overflow the 32bit
LLCC config registers, which means it is writing beyond the upper limit
of the ATTR0\_CFGn and ATTR1\_CFGn range of registers. But the most obvious
impact is the fact that the mentioned slices do not get configured at all,
which will result in reduced performance. Fix that by using the slice ID
values taken from the latest LLCC SC table.
Fixes: ec69dfbdc426 ("soc: qcom: llcc: Add sc8180x and sc8280xp configurations")
Cc: stable@vger.kernel.org # 5.19+
Signed-off-by: Abel Vesa
Tested-by: Juerg Haefliger
Reviewed-by: Sai Prakash Ranjan
Acked-by: Konrad Dybcio
Reviewed-by: Johan Hovold
Signed-off-by: Bjorn Andersson
Link: https://lore.kernel.org/r/20230306135527.509796-1-abel.vesa@linaro.org
Signed-off-by: Greg Kroah-Hartman
commit 2878e8588bbe88cd977b43defe36a2c96de6afbe
Author: Manivannan Sadhasivam
Date: Fri Feb 24 13:30:45 2023 +0530
arm64: dts: qcom: sm8150: Fix the iommu mask used for PCIe controllers
commit 672a58fc7c477e59981653a11241566870fff852 upstream.
The iommu mask should be 0x3f as per Qualcomm internal documentation.
Without the correct mask, the PCIe transactions from the endpoint will
result in SMMU faults. Hence, fix it!
Cc: stable@vger.kernel.org # 5.19
Fixes: a1c86c680533 ("arm64: dts: qcom: sm8150: Add PCIe nodes")
Signed-off-by: Manivannan Sadhasivam
Reviewed-by: Konrad Dybcio
Reviewed-by: Bhupesh Sharma
Signed-off-by: Bjorn Andersson
Link: https://lore.kernel.org/r/20230224080045.6577-1-manivannan.sadhasivam@linaro.org
Signed-off-by: Greg Kroah-Hartman
commit e43bba938e2c9104bb4f8bc417ac4d7bb29755e1
Author: Krishna chaitanya chundru
Date: Tue Feb 28 17:19:12 2023 +0530
arm64: dts: qcom: sc7280: Mark PCIe controller as cache coherent
commit 8a63441e83724fee1ef3fd37b237d40d90780766 upstream.
If the controller is not marked as cache coherent, then kernel will
try to ensure coherency during dma-ops and that may cause data corruption.
So, mark the PCIe node as dma-coherent as the devices on PCIe bus are
cache coherent.
Cc: stable@vger.kernel.org
Fixes: 92e0ee9f83b3 ("arm64: dts: qcom: sc7280: Add PCIe and PHY related node")
Signed-off-by: Krishna chaitanya chundru
Signed-off-by: Bjorn Andersson
Link: https://lore.kernel.org/r/1677584952-17496-1-git-send-email-quic\_krichai@quicinc.com
Signed-off-by: Greg Kroah-Hartman
commit 2d77fbfe769c554d7802aa86a2f80402173964a2
Author: Johan Hovold
Date: Wed Mar 22 12:33:13 2023 +0100
arm64: dts: qcom: sc8280xp-x13s: mark s11b regulator as always-on
commit b8838e653034425cd26983c7d96535e2742a6212 upstream.
The s11b supply is used by the wlan module (as well as some of the
pmics) which are not yet fully described in the devicetree.
Mark the regulator as always-on for now.
Fixes: 123b30a75623 ("arm64: dts: qcom: sc8280xp-x13s: enable WiFi controller")
Cc: stable@vger.kernel.org # 6.2
Signed-off-by: Johan Hovold
Signed-off-by: Bjorn Andersson
Link: https://lore.kernel.org/r/20230322113318.17908-2-johan+linaro@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 42579bbd87b03558532f95ba3a225c862a0c9823
Author: Cristian Marussi
Date: Tue Mar 7 16:23:24 2023 +0000
firmware: arm\_scmi: Fix device node validation for mailbox transport
commit 2ab4f4018cb6b8010ca5002c3bdc37783b5d28c2 upstream.
When mailboxes are used as a transport it is possible to setup the SCMI
transport layer, depending on the underlying channels configuration, to use
one or two mailboxes, associated, respectively, to one or two, distinct,
shared memory areas: any other combination should be treated as invalid.
Add more strict checking of SCMI mailbox transport device node descriptors.
Fixes: 5c8a47a5a91d ("firmware: arm\_scmi: Make scmi core independent of the transport type")
Cc:  # 4.19
Signed-off-by: Cristian Marussi
Link: https://lore.kernel.org/r/20230307162324.891866-1-cristian.marussi@arm.com
Signed-off-by: Sudeep Holla
Signed-off-by: Greg Kroah-Hartman
commit b3ef9e6fe09f1a132af28c623edcf4d4f39d9f35
Author: Rijo Thomas
Date: Tue Feb 28 15:11:20 2023 +0530
tee: amdtee: fix race condition in amdtee\_open\_session
commit f8502fba45bd30e1a6a354d9d898bc99d1a11e6d upstream.
There is a potential race condition in amdtee\_open\_session that may
lead to use-after-free. For instance, in amdtee\_open\_session() after
sess->sess\_mask is set, and before setting:
sess->session\_info[i] = session\_info;
if amdtee\_close\_session() closes this same session, then 'sess' data
structure will be released, causing kernel panic when 'sess' is
accessed within amdtee\_open\_session().
The solution is to set the bit sess->sess\_mask as the last step in
amdtee\_open\_session().
Fixes: 757cc3e9ff1d ("tee: add AMD-TEE driver")
Cc: stable@vger.kernel.org
Signed-off-by: Rijo Thomas
Acked-by: Sumit Garg
Signed-off-by: Jens Wiklander
Signed-off-by: Greg Kroah-Hartman
commit a4c2888656022953fcf3728a2870849fe6071d46
Author: Nathan Chancellor
Date: Mon Mar 13 16:00:23 2023 -0700
riscv: Handle zicsr/zifencei issues between clang and binutils
commit e89c2e815e76471cb507bd95728bf26da7976430 upstream.
There are two related issues that appear in certain combinations with
clang and GNU binutils.
The first occurs when a version of clang that supports zicsr or zifencei
via '-march=' [1] (i.e, >= 17.x) is used in combination with a version
of GNU binutils that do not recognize zicsr and zifencei in the
'-march=' value (i.e., < 2.36):
riscv64-linux-gnu-ld: -march=rv64i2p0\_m2p0\_a2p0\_c2p0\_zicsr2p0\_zifencei2p0: Invalid or unknown z ISA extension: 'zifencei'
riscv64-linux-gnu-ld: failed to merge target specific data of file fs/efivarfs/file.o
riscv64-linux-gnu-ld: -march=rv64i2p0\_m2p0\_a2p0\_c2p0\_zicsr2p0\_zifencei2p0: Invalid or unknown z ISA extension: 'zifencei'
riscv64-linux-gnu-ld: failed to merge target specific data of file fs/efivarfs/super.o
The second occurs when a version of clang that does not support zicsr or
zifencei via '-march=' (i.e., <= 16.x) is used in combination with a
version of GNU as that defaults to a newer ISA base spec, which requires
specifying zicsr and zifencei in the '-march=' value explicitly (i.e, >=
2.38):
../arch/riscv/kernel/kexec\_relocate.S: Assembler messages:
../arch/riscv/kernel/kexec\_relocate.S:147: Error: unrecognized opcode `fence.i', extension `zifencei' required
clang-12: error: assembler command failed with exit code 1 (use -v to see invocation)
This is the same issue addressed by commit 6df2a016c0c8 ("riscv: fix
build with binutils 2.38") (see [2] for additional information) but
older versions of clang miss out on it because the cc-option check
fails:
clang-12: error: invalid arch name 'rv64imac\_zicsr\_zifencei', unsupported standard user-level extension 'zicsr'
clang-12: error: invalid arch name 'rv64imac\_zicsr\_zifencei', unsupported standard user-level extension 'zicsr'
To resolve the first issue, only attempt to add zicsr and zifencei to
the march string when using the GNU assembler 2.38 or newer, which is
when the default ISA spec was updated, requiring these extensions to be
specified explicitly. LLVM implements an older version of the base
specification for all currently released versions, so these instructions
are available as part of the 'i' extension. If LLVM's implementation is
updated in the future, a CONFIG\_AS\_IS\_LLVM condition can be added to
CONFIG\_TOOLCHAIN\_NEEDS\_EXPLICIT\_ZICSR\_ZIFENCEI.
To resolve the second issue, use version 2.2 of the base ISA spec when
using an older version of clang that does not support zicsr or zifencei
via '-march=', as that is the spec version most compatible with the one
clang/LLVM implements and avoids the need to specify zicsr and zifencei
explicitly due to still being a part of 'i'.
[1]: https://github.com/llvm/llvm-project/commit/22e199e6afb1263c943c0c0d4498694e15bf8a16
[2]: https://lore.kernel.org/ZAxT7T9Xy1Fo3d5W@aurel32.net/
Cc: stable@vger.kernel.org
Link: https://github.com/ClangBuiltLinux/linux/issues/1808
Co-developed-by: Conor Dooley
Signed-off-by: Conor Dooley
Signed-off-by: Nathan Chancellor
Acked-by: Conor Dooley
Link: https://lore.kernel.org/r/20230313-riscv-zicsr-zifencei-fiasco-v1-1-dd1b7840a551@kernel.org
Signed-off-by: Palmer Dabbelt
Signed-off-by: Greg Kroah-Hartman
commit c0801346d25e34742027024c27f025448726fc6b
Author: Dylan Jhong
Date: Mon Mar 13 11:49:06 2023 +0800
riscv: mm: Fix incorrect ASID argument when flushing TLB
commit 9a801afd3eb95e1a89aba17321062df06fb49d98 upstream.
Currently, we pass the CONTEXTID instead of the ASID to the TLB flush
function. We should only take the ASID field to prevent from touching
the reserved bit field.
Fixes: 3f1e782998cd ("riscv: add ASID-based tlbflushing methods")
Signed-off-by: Dylan Jhong
Reviewed-by: Sergey Matyukevich
Link: https://lore.kernel.org/r/20230313034906.2401730-1-dylan@andestech.com
Cc: stable@vger.kernel.org
Signed-off-by: Palmer Dabbelt
Signed-off-by: Greg Kroah-Hartman
commit a64a9395404a429d82c4a13f25c4aac1e16ac889
Author: Tim Huang
Date: Wed Mar 15 15:52:09 2023 +0800
drm/amdgpu: reposition the gpu reset checking for reuse
commit aaee0ce460b954e08b6e630d7e54b2abb672feb8 upstream.
Move the amdgpu\_acpi\_should\_gpu\_reset out of
CONFIG\_SUSPEND to share it with hibernate case.
Signed-off-by: Tim Huang
Reviewed-by: Alex Deucher
Signed-off-by: Alex Deucher
Cc: stable@vger.kernel.org # 6.1.x
Signed-off-by: Greg Kroah-Hartman
commit 2ba4efe213c185a3429838eaaf98f5e8e688f488
Author: Tim Huang
Date: Thu Mar 9 16:27:51 2023 +0800
drm/amdgpu: skip ASIC reset for APUs when go to S4
commit b589626674de94d977e81c99bf7905872b991197 upstream.
For GC IP v11.0.4/11, PSP TMR need to be reserved
for ASIC mode2 reset. But for S4, when psp suspend,
it will destroy the TMR that fails the ASIC reset.
[ 96.006101] amdgpu 0000:62:00.0: amdgpu: MODE2 reset
[ 100.409717] amdgpu 0000:62:00.0: amdgpu: SMU: I'm not done with your previous command: SMN\_C2PMSG\_66:0x00000011 SMN\_C2PMSG\_82:0x00000002
[ 100.411593] amdgpu 0000:62:00.0: amdgpu: Mode2 reset failed!
[ 100.412470] amdgpu 0000:62:00.0: PM: pci\_pm\_freeze(): amdgpu\_pmops\_freeze+0x0/0x50 [amdgpu] returns -62
[ 100.414020] amdgpu 0000:62:00.0: PM: dpm\_run\_callback(): pci\_pm\_freeze+0x0/0xd0 returns -62
[ 100.415311] amdgpu 0000:62:00.0: PM: pci\_pm\_freeze+0x0/0xd0 returned -62 after 4623202 usecs
[ 100.416608] amdgpu 0000:62:00.0: PM: failed to freeze async: error -62
We can skip the reset on APUs, assuming we can resume them
properly. Verified on some GFX11, GFX10 and old GFX9 APUs.
Signed-off-by: Tim Huang
Reviewed-by: Alex Deucher
Signed-off-by: Alex Deucher
Cc: stable@vger.kernel.org # 6.1.x
Signed-off-by: Greg Kroah-Hartman
commit 57e8771ddbe55ab8b4acb75b8607c3e9817a2808
Author: Ville Syrjälä
Date: Thu Feb 23 17:20:48 2023 +0200
drm/i915: Preserve crtc\_state->inherited during state clearing
commit 3a84f2c6c9558c554a90ec26ad25df92fc5e05b7 upstream.
intel\_crtc\_prepare\_cleared\_state() is unintentionally losing
the "inherited" flag. This will happen if intel\_initial\_commit()
is forced to go through the full modeset calculations for
whatever reason.
Afterwards the first real commit from userspace will not get
forced to the full modeset path, and thus eg. audio state may
not get recomputed properly. So if the monitor was already
enabled during boot audio will not work until userspace itself
does an explicit full modeset.
Cc: stable@vger.kernel.org
Tested-by: Lee Shawn C
Signed-off-by: Ville Syrjälä
Link: https://patchwork.freedesktop.org/patch/msgid/20230223152048.20878-1-ville.syrjala@linux.intel.com
Reviewed-by: Uma Shankar
(cherry picked from commit 2553bacaf953b48c59357f5a622282bc0c45adae)
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit c45d7a5c4fbe2e716ebab38fd89dd8c417842f14
Author: Nirmoy Das
Date: Tue Mar 14 15:29:14 2023 +0100
drm/i915/active: Fix missing debug object activation
commit e92eb246feb9019b0b137706c934b8891cdfe3c2 upstream.
debug\_active\_activate() expected ref->count to be zero
which is not true anymore as \_\_i915\_active\_activate() calls
debug\_active\_activate() after incrementing the count.
v2: No need to check for "ref->count == 1" as \_\_i915\_active\_activate()
already make sure of that(Janusz).
References: https://gitlab.freedesktop.org/drm/intel/-/issues/6733
Fixes: 04240e30ed06 ("drm/i915: Skip taking acquire mutex for no ref->active callback")
Cc: Chris Wilson
Cc: Tvrtko Ursulin
Cc: Thomas Hellström
Cc: Andi Shyti
Cc: intel-gfx@lists.freedesktop.org
Cc: Janusz Krzysztofik
Cc:  # v5.10+
Signed-off-by: Nirmoy Das
Reviewed-by: Janusz Krzysztofik
Reviewed-by: Andrzej Hajda
Link: https://patchwork.freedesktop.org/patch/msgid/20230313114613.9874-1-nirmoy.das@intel.com
(cherry picked from commit bfad380c542438a9b642f8190b7fd37bc77e2723)
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit fbcedddbccc006127f2dc17031a3247463b60e1d
Author: Kai-Heng Feng
Date: Wed Mar 15 20:07:23 2023 +0800
drm/amdgpu/nv: Apply ASPM quirk on Intel ADL + AMD Navi
commit 2b072442f4962231a8516485012bb2d2551ef2fe upstream.
S2idle resume freeze can be observed on Intel ADL + AMD WX5500. This is
caused by commit 0064b0ce85bb ("drm/amd/pm: enable ASPM by default").
The root cause is still not clear for now.
So extend and apply the ASPM quirk from commit e02fe3bc7aba
("drm/amdgpu: vi: disable ASPM on Intel Alder Lake based systems"), to
workaround the issue on Navi cards too.
Fixes: 0064b0ce85bb ("drm/amd/pm: enable ASPM by default")
Link: https://gitlab.freedesktop.org/drm/amd/-/issues/2458
Reviewed-by: Alex Deucher
Signed-off-by: Kai-Heng Feng
Reviewed-by: Mario Limonciello
Signed-off-by: Alex Deucher
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 01e0ae1d7a7d394cfba217b41f02c39622854859
Author: Johan Hovold
Date: Mon Mar 6 11:35:33 2023 +0100
drm/meson: fix missing component unbind on bind errors
commit ba98413bf45edbf33672e2539e321b851b2cfbd1 upstream.
Make sure to unbind all subcomponents when binding the aggregate device
fails.
Fixes: a41e82e6c457 ("drm/meson: Add support for components")
Cc: stable@vger.kernel.org # 4.12
Cc: Neil Armstrong
Signed-off-by: Johan Hovold
Acked-by: Neil Armstrong
Signed-off-by: Neil Armstrong
Link: https://patchwork.freedesktop.org/patch/msgid/20230306103533.4915-1-johan+linaro@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit f1104080dc7d6981250e8c05b620cdfe0d2aa9a5
Author: Hersen Wu
Date: Thu Mar 9 16:14:08 2023 -0500
drm/amd/display: fix wrong index used in dccg32\_set\_dpstreamclk
commit 4c94e57c258cb7800aa5f3a9d9597d91291407a9 upstream.
[Why & How]
When merging commit 9af611f29034
("drm/amd/display: Fix DCN32 DPSTREAMCLK\_CNTL programming"),
index change was not picked up.
Cc: stable@vger.kernel.org
Cc: Mario Limonciello
Fixes: 9af611f29034 ("drm/amd/display: Fix DCN32 DPSTREAMCLK\_CNTL programming")
Reviewed-by: Qingqing Zhuo
Acked-by: Qingqing Zhuo
Signed-off-by: Hersen Wu
Tested-by: Daniel Wheeler
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit d7e74d0042469036bcea7da25187592165ac03bc
Author: Matheus Castello
Date: Wed Mar 22 15:38:21 2023 +0100
drm/bridge: lt8912b: return EPROBE\_DEFER if bridge is not found
commit 1a70ca89d59c7c8af006d29b965a95ede0abb0da upstream.
Returns EPROBE\_DEFER when of\_drm\_find\_bridge() fails, this is consistent
with what all the other DRM bridge drivers are doing and this is
required since the bridge might not be there when the driver is probed
and this should not be a fatal failure.
Cc:
Fixes: 30e2ae943c26 ("drm/bridge: Introduce LT8912B DSI to HDMI bridge")
Signed-off-by: Matheus Castello
Signed-off-by: Francesco Dolcini
Reviewed-by: Laurent Pinchart
Reviewed-by: Andrzej Hajda
Signed-off-by: Neil Armstrong
Link: https://patchwork.freedesktop.org/patch/msgid/20230322143821.109744-1-francesco@dolcini.it
Signed-off-by: Greg Kroah-Hartman
commit 8a6550b365c0ce2e65905de57dcbfe1f7d629726
Author: Ryusuke Konishi
Date: Tue Mar 7 17:55:48 2023 +0900
nilfs2: fix kernel-infoleak in nilfs\_ioctl\_wrap\_copy()
commit 003587000276f81d0114b5ce773d80c119d8cb30 upstream.
The ioctl helper function nilfs\_ioctl\_wrap\_copy(), which exchanges a
metadata array to/from user space, may copy uninitialized buffer regions
to user space memory for read-only ioctl commands NILFS\_IOCTL\_GET\_SUINFO
and NILFS\_IOCTL\_GET\_CPINFO.
This can occur when the element size of the user space metadata given by
the v\_size member of the argument nilfs\_argv structure is larger than the
size of the metadata element (nilfs\_suinfo structure or nilfs\_cpinfo
structure) on the file system side.
KMSAN-enabled kernels detect this issue as follows:
BUG: KMSAN: kernel-infoleak in instrument\_copy\_to\_user
include/linux/instrumented.h:121 [inline]
BUG: KMSAN: kernel-infoleak in \_copy\_to\_user+0xc0/0x100 lib/usercopy.c:33
instrument\_copy\_to\_user include/linux/instrumented.h:121 [inline]
\_copy\_to\_user+0xc0/0x100 lib/usercopy.c:33
copy\_to\_user include/linux/uaccess.h:169 [inline]
nilfs\_ioctl\_wrap\_copy+0x6fa/0xc10 fs/nilfs2/ioctl.c:99
nilfs\_ioctl\_get\_info fs/nilfs2/ioctl.c:1173 [inline]
nilfs\_ioctl+0x2402/0x4450 fs/nilfs2/ioctl.c:1290
nilfs\_compat\_ioctl+0x1b8/0x200 fs/nilfs2/ioctl.c:1343
\_\_do\_compat\_sys\_ioctl fs/ioctl.c:968 [inline]
\_\_se\_compat\_sys\_ioctl+0x7dd/0x1000 fs/ioctl.c:910
\_\_ia32\_compat\_sys\_ioctl+0x93/0xd0 fs/ioctl.c:910
do\_syscall\_32\_irqs\_on arch/x86/entry/common.c:112 [inline]
\_\_do\_fast\_syscall\_32+0xa2/0x100 arch/x86/entry/common.c:178
do\_fast\_syscall\_32+0x37/0x80 arch/x86/entry/common.c:203
do\_SYSENTER\_32+0x1f/0x30 arch/x86/entry/common.c:246
entry\_SYSENTER\_compat\_after\_hwframe+0x70/0x82
Uninit was created at:
\_\_alloc\_pages+0x9f6/0xe90 mm/page\_alloc.c:5572
alloc\_pages+0xab0/0xd80 mm/mempolicy.c:2287
\_\_get\_free\_pages+0x34/0xc0 mm/page\_alloc.c:5599
nilfs\_ioctl\_wrap\_copy+0x223/0xc10 fs/nilfs2/ioctl.c:74
nilfs\_ioctl\_get\_info fs/nilfs2/ioctl.c:1173 [inline]
nilfs\_ioctl+0x2402/0x4450 fs/nilfs2/ioctl.c:1290
nilfs\_compat\_ioctl+0x1b8/0x200 fs/nilfs2/ioctl.c:1343
\_\_do\_compat\_sys\_ioctl fs/ioctl.c:968 [inline]
\_\_se\_compat\_sys\_ioctl+0x7dd/0x1000 fs/ioctl.c:910
\_\_ia32\_compat\_sys\_ioctl+0x93/0xd0 fs/ioctl.c:910
do\_syscall\_32\_irqs\_on arch/x86/entry/common.c:112 [inline]
\_\_do\_fast\_syscall\_32+0xa2/0x100 arch/x86/entry/common.c:178
do\_fast\_syscall\_32+0x37/0x80 arch/x86/entry/common.c:203
do\_SYSENTER\_32+0x1f/0x30 arch/x86/entry/common.c:246
entry\_SYSENTER\_compat\_after\_hwframe+0x70/0x82
Bytes 16-127 of 3968 are uninitialized
...
This eliminates the leak issue by initializing the page allocated as
buffer using get\_zeroed\_page().
Link: https://lkml.kernel.org/r/20230307085548.6290-1-konishi.ryusuke@gmail.com
Signed-off-by: Ryusuke Konishi
Reported-by: syzbot+132fdd2f1e1805fdc591@syzkaller.appspotmail.com
Link: https://lkml.kernel.org/r/000000000000a5bd2d05f63f04ae@google.com
Tested-by: Ryusuke Konishi
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit c382dc04fd1cd84871de9c7b0c8a6ba74af351db
Author: Alexander Wetzel
Date: Tue Mar 14 22:11:22 2023 +0100
wifi: mac80211: Serialize ieee80211\_handle\_wake\_tx\_queue()
commit 007ae9b268ba7553e479608cf9735d3c4672a2ab upstream.
ieee80211\_handle\_wake\_tx\_queue must not run concurrent multiple times.
It calls ieee80211\_txq\_schedule\_start() and the drivers migrated to iTXQ
do not expect overlapping drv\_tx() calls.
This fixes 'c850e31f79f0 ("wifi: mac80211: add internal handler for
wake\_tx\_queue")', which introduced ieee80211\_handle\_wake\_tx\_queue.
Drivers started to use it with 'a790cc3a4fad ("wifi: mac80211: add
wake\_tx\_queue callback to drivers")'.
But only after fixing an independent bug with
'4444bc2116ae ("wifi: mac80211: Proper mark iTXQs for resumption")'
problematic concurrent calls really happened and exposed the initial
issue.
Fixes: c850e31f79f0 ("wifi: mac80211: add internal handler for wake\_tx\_queue")
Reported-by: Thomas Mann
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=217119
Link: https://lore.kernel.org/r/b8efebc6-4399-d0b8-b2a0-66843314616b@leemhuis.info/
Link: https://lore.kernel.org/r/b7445607128a6b9ed7c17fcdcf3679bfaf4aaea.camel@sipsolutions.net>
CC:
Signed-off-by: Alexander Wetzel
Link: https://lore.kernel.org/r/20230314211122.111688-1-alexander@wetzel-home.de
[add missing spin\_lock\_init() noticed by Felix]
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit 34032aa0ab3127d7f09a65f465a374992f501c5a
Author: Felix Fietkau
Date: Tue Mar 14 10:59:50 2023 +0100
wifi: mac80211: fix qos on mesh interfaces
commit 4e348c6c6e23491ae6eb5e077848a42d0562339c upstream.
When ieee80211\_select\_queue is called for mesh, the sta pointer is usually
NULL, since the nexthop is looked up much later in the tx path.
Explicitly check for unicast address in that case in order to make qos work
again.
Cc: stable@vger.kernel.org
Fixes: 50e2ab392919 ("wifi: mac80211: fix queue selection for mesh/OCB interfaces")
Signed-off-by: Felix Fietkau
Link: https://lore.kernel.org/r/20230314095956.62085-1-nbd@nbd.name
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit cc32cd98a0aee4cc3eb611cbce11795b1aaa738a
Author: Namjae Jeon
Date: Thu Mar 23 21:15:52 2023 +0900
ksmbd: return unsupported error on smb1 mount
commit 39b291b86b5988bf8753c3874d5c773399d09b96 upstream.
ksmbd disconnect connection when mounting with vers=smb1.
ksmbd should send smb1 negotiate response to client for correct
unsupported error return. This patch add needed SMB1 macros and fill
NegProt part of the response for smb1 negotiate response.
Cc: stable@vger.kernel.org
Reported-by: Steve French
Reviewed-by: Sergey Senozhatsky
Signed-off-by: Namjae Jeon
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 138d9250bb8af088ad1e68d3debedf5597cf13f2
Author: Namjae Jeon
Date: Tue Mar 21 15:36:40 2023 +0900
ksmbd: return STATUS\_NOT\_SUPPORTED on unsupported smb2.0 dialect
commit b53e8cfec30b93c120623232ba27c041b1ef8f1a upstream.
ksmbd returned "Input/output error" when mounting with vers=2.0 to
ksmbd. It should return STATUS\_NOT\_SUPPORTED on unsupported smb2.0
dialect.
Cc: stable@vger.kernel.org
Reported-by: Steve French
Signed-off-by: Namjae Jeon
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 43e069f9c3e87e8fb64f6dc07d17558e21577922
Author: Namjae Jeon
Date: Tue Mar 21 15:25:34 2023 +0900
ksmbd: don't terminate inactive sessions after a few seconds
commit be6f42fad5f5fd1fea9d562df82c38ad6ed3bfe9 upstream.
Steve reported that inactive sessions are terminated after a few
seconds. ksmbd terminate when receiving -EAGAIN error from
kernel\_recvmsg(). -EAGAIN means there is no data available in timeout.
So ksmbd should keep connection with unlimited retries instead of
terminating inactive sessions.
Cc: stable@vger.kernel.org
Reported-by: Steve French
Signed-off-by: Namjae Jeon
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit ffa9e9f95f4646886dcd7b54c61b9a6f98afa5da
Author: Namjae Jeon
Date: Wed Mar 1 00:02:30 2023 +0900
ksmbd: set FILE\_NAMED\_STREAMS attribute in FS\_ATTRIBUTE\_INFORMATION
commit 728f14c72b71a19623df329c1c7c9d1452e56f1e upstream.
If vfs objects = streams\_xattr in ksmbd.conf FILE\_NAMED\_STREAMS should
be set to Attributes in FS\_ATTRIBUTE\_INFORMATION. MacOS client show
"Format: SMB (Unknown)" on faked NTFS and no streams support.
Cc: stable@vger.kernel.org
Reported-by: Miao Lihua <441884205@qq.com>
Tested-by: Miao Lihua <441884205@qq.com>
Signed-off-by: Namjae Jeon
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 8de3acd40fcc8fb6f11f0102435388a86f3b347b
Author: Namjae Jeon
Date: Wed Mar 1 00:01:21 2023 +0900
ksmbd: fix wrong signingkey creation when encryption is AES256
commit 7a891d4b62d62566323676cb0e922ded4f37afe1 upstream.
MacOS and Win11 support AES256 encrytion and it is included in the cipher
array of encryption context. Especially on macOS, The most preferred
cipher is AES256. Connecting to ksmbd fails on newer MacOS clients that
support AES256 encryption. MacOS send disconnect request after receiving
final session setup response from ksmbd. Because final session setup is
signed with signing key was generated incorrectly.
For signging key, 'L' value should be initialized to 128 if key size is
16bytes.
Cc: stable@vger.kernel.org
Reported-by: Miao Lihua <441884205@qq.com>
Tested-by: Miao Lihua <441884205@qq.com>
Signed-off-by: Namjae Jeon
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 48c427450711cbc537c9d0b297ea7da9b89d4137
Author: Liam R. Howlett
Date: Tue Mar 7 13:02:46 2023 -0500
maple\_tree: fix mas\_skip\_node() end slot detection
commit 0fa99fdfe1b38da396d0b2d1496a823bcd0ebea0 upstream.
Patch series "Fix mas\_skip\_node() for mas\_empty\_area()", v2.
mas\_empty\_area() was incorrectly returning an error when there was room.
The issue was tracked down to mas\_skip\_node() using the incorrect
end-of-slot count. Instead of using the nodes hard limit, the limit of
data should be used.
mas\_skip\_node() was also setting the min and max to that of the child
node, which was unnecessary. Within these limits being set, there was
also a bug that corrupted the maple state's max if the offset was set to
the maximum node pivot. The bug was without consequence unless there was
a sufficient gap in the next child node which would cause an error to be
returned.
This patch set fixes these errors by removing the limit setting from
mas\_skip\_node() and uses the mas\_data\_end() for slot limits, and adds
tests for all failures discovered.
This patch (of 2):
mas\_skip\_node() is used to move the maple state to the node with a higher
limit. It does this by walking up the tree and increasing the slot count.
Since slot count may not be able to be increased, it may need to walk up
multiple times to find room to walk right to a higher limit node. The
limit of slots that was being used was the node limit and not the last
location of data in the node. This would cause the maple state to be
shifted outside actual data and enter an error state, thus returning
-EBUSY.
The result of the incorrect error state means that mas\_awalk() would
return an error instead of finding the allocation space.
The fix is to use mas\_data\_end() in mas\_skip\_node() to detect the nodes
data end point and continue walking the tree up until it is safe to move
to a node with a higher limit.
The walk up the tree also sets the maple state limits so remove the buggy
code from mas\_skip\_node(). Setting the limits had the unfortunate side
effect of triggering another bug if the parent node was full and the there
was no suitable gap in the second last child, but room in the next child.
mas\_skip\_node() may also be passed a maple state in an error state from
mas\_anode\_descend() when no allocations are available. Return on such an
error state immediately.
Link: https://lkml.kernel.org/r/20230307180247.2220303-1-Liam.Howlett@oracle.com
Link: https://lkml.kernel.org/r/20230307180247.2220303-2-Liam.Howlett@oracle.com
Fixes: 54a611b60590 ("Maple Tree: add new data structure")
Signed-off-by: Liam R. Howlett
Reported-by: Snild Dolkow
Link: https://lore.kernel.org/linux-mm/cb8dc31a-fef2-1d09-f133-e9f7b9f9e77a@sony.com/
Tested-by: Snild Dolkow
Cc: Peng Zhang
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit 9564391d53ec4a8355756f42866e45873260d68e
Author: Liam R. Howlett
Date: Tue Mar 7 13:02:47 2023 -0500
test\_maple\_tree: add more testing for mas\_empty\_area()
commit 4bd6dded6318dc8e2514d74868c1f8fb38b61a60 upstream.
Test robust filling of an entire area of the tree, then test one beyond.
This is to test the walking back up the tree at the end of nodes and error
condition. Test inspired by the reproducer code provided by Snild Dolkow.
The last test in the function tests for the case of a corrupted maple
state caused by the incorrect limits set during mas\_skip\_node(). There
needs to be a gap in the second last child and last child, but the search
must rule out the second last child's gap. This would avoid correcting
the maple state to the correct max limit and return an error.
Link: https://lkml.kernel.org/r/20230307180247.2220303-3-Liam.Howlett@oracle.com
Cc: Snild Dolkow
Link: https://lore.kernel.org/linux-mm/cb8dc31a-fef2-1d09-f133-e9f7b9f9e77a@sony.com/
Fixes: e15e06a83923 ("lib/test\_maple\_tree: add testing for maple tree")
Signed-off-by: Liam R. Howlett
Cc: Peng Zhang
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit ec4c55131de8b21ab9bc35738d25c932703ef356
Author: Marco Elver
Date: Thu Mar 16 23:47:05 2023 +0100
kcsan: avoid passing -g for test
commit 5eb39cde1e2487ba5ec1802dc5e58a77e700d99e upstream.
Nathan reported that when building with GNU as and a version of clang that
defaults to DWARF5, the assembler will complain with:
Error: non-constant .uleb128 is not supported
This is because `-g` defaults to the compiler debug info default. If the
assembler does not support some of the directives used, the above errors
occur. To fix, remove the explicit passing of `-g`.
All the test wants is that stack traces print valid function names, and
debug info is not required for that. (I currently cannot recall why I
added the explicit `-g`.)
Link: https://lkml.kernel.org/r/20230316224705.709984-2-elver@google.com
Fixes: 1fe84fd4a402 ("kcsan: Add test suite")
Signed-off-by: Marco Elver
Reported-by: Nathan Chancellor
Cc: Alexander Potapenko
Cc: Dmitry Vyukov
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit 03102d224f093fd2b225c87810dd37db3387cf35
Author: Peter Collingbourne
Date: Thu Mar 9 20:29:13 2023 -0800
Revert "kasan: drop skip\_kasan\_poison variable in free\_pages\_prepare"
commit f446883d12b8bfa486f7c98d403054d61d38c989 upstream.
This reverts commit 487a32ec24be819e747af8c2ab0d5c515508086a.
should\_skip\_kasan\_poison() reads the PG\_skip\_kasan\_poison flag from
page->flags. However, this line of code in free\_pages\_prepare():
page->flags &= ~PAGE\_FLAGS\_CHECK\_AT\_PREP;
clears most of page->flags, including PG\_skip\_kasan\_poison, before calling
should\_skip\_kasan\_poison(), which meant that it would never return true as
a result of the page flag being set. Therefore, fix the code to call
should\_skip\_kasan\_poison() before clearing the flags, as we were doing
before the reverted patch.
This fixes a measurable performance regression introduced in the reverted
commit, where munmap() takes longer than intended if HW tags KASAN is
supported and enabled at runtime. Without this patch, we see a
single-digit percentage performance regression in a particular
mmap()-heavy benchmark when enabling HW tags KASAN, and with the patch,
there is no statistically significant performance impact when enabling HW
tags KASAN.
Link: https://lkml.kernel.org/r/20230310042914.3805818-2-pcc@google.com
Fixes: 487a32ec24be ("kasan: drop skip\_kasan\_poison variable in free\_pages\_prepare")
Link: https://linux-review.googlesource.com/id/Ic4f13affeebd20548758438bb9ed9ca40e312b79
Signed-off-by: Peter Collingbourne
Reviewed-by: Andrey Konovalov
Cc: Andrey Ryabinin
Cc: Catalin Marinas  [arm64]
Cc: Evgenii Stepanov
Cc: Vincenzo Frascino
Cc: Will Deacon
Cc:  [6.1]
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit 2ff9f7319b915acc42cf8fcf743589f926f4a014
Author: Savino Dicanosa
Date: Tue Mar 21 19:44:02 2023 +0000
io\_uring/rsrc: fix null-ptr-deref in io\_file\_bitmap\_get()
commit 02a4d923e4400a36d340ea12d8058f69ebf3a383 upstream.
When fixed files are unregistered, file\_alloc\_end and alloc\_hint
are not cleared. This can later cause a NULL pointer dereference in
io\_file\_bitmap\_get() if auto index selection is enabled via
IORING\_FILE\_INDEX\_ALLOC:
[ 6.519129] BUG: kernel NULL pointer dereference, address: 0000000000000000
[...]
[ 6.541468] RIP: 0010:\_find\_next\_zero\_bit+0x1a/0x70
[...]
[ 6.560906] Call Trace:
[ 6.561322]
[ 6.561672] io\_file\_bitmap\_get+0x38/0x60
[ 6.562281] io\_fixed\_fd\_install+0x63/0xb0
[ 6.562851] ? \_\_pfx\_io\_socket+0x10/0x10
[ 6.563396] io\_socket+0x93/0xf0
[ 6.563855] ? \_\_pfx\_io\_socket+0x10/0x10
[ 6.564411] io\_issue\_sqe+0x5b/0x3d0
[ 6.564914] io\_submit\_sqes+0x1de/0x650
[ 6.565452] \_\_do\_sys\_io\_uring\_enter+0x4fc/0xb20
[ 6.566083] ? \_\_do\_sys\_io\_uring\_register+0x11e/0xd80
[ 6.566779] do\_syscall\_64+0x3c/0x90
[ 6.567247] entry\_SYSCALL\_64\_after\_hwframe+0x72/0xdc
[...]
To fix the issue, set file alloc range and alloc\_hint to zero after
file tables are freed.
Cc: stable@vger.kernel.org
Fixes: 4278a0deb1f6 ("io\_uring: defer alloc\_hint update to io\_file\_bitmap\_set()")
Signed-off-by: Savino Dicanosa
[axboe: add explicit bitmap == NULL check as well]
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 7bc203584ee250a74cee352cac7f64757a2dd31c
Author: Jens Axboe
Date: Mon Mar 20 11:13:49 2023 -0600
io\_uring/net: avoid sending -ECONNABORTED on repeated connection requests
commit 74e2e17ee1f8d8a0928b90434ad7e2df70f8483e upstream.
Since io\_uring does nonblocking connect requests, if we do two repeated
ones without having a listener, the second will get -ECONNABORTED rather
than the expected -ECONNREFUSED. Treat -ECONNABORTED like a normal retry
condition if we're nonblocking, if we haven't already seen it.
Cc: stable@vger.kernel.org
Fixes: 3fb1bd688172 ("io\_uring/net: handle -EINPROGRESS correct for IORING\_OP\_CONNECT")
Link: https://github.com/axboe/liburing/issues/828
Reported-by: Hui, Chunyang
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 4481ce2bfaa6b42fa2d2dd25f8036683196d089b
Author: Marco Elver
Date: Thu Mar 16 23:47:04 2023 +0100
kfence: avoid passing -g for test
commit 2e08ca1802441224f5b7cc6bffbb687f7406de95 upstream.
Nathan reported that when building with GNU as and a version of clang that
defaults to DWARF5:
$ make -skj"$(nproc)" ARCH=riscv CROSS\_COMPILE=riscv64-linux-gnu- \
LLVM=1 LLVM\_IAS=0 O=build \
mrproper allmodconfig mm/kfence/kfence\_test.o
/tmp/kfence\_test-08a0a0.s: Assembler messages:
/tmp/kfence\_test-08a0a0.s:14627: Error: non-constant .uleb128 is not supported
/tmp/kfence\_test-08a0a0.s:14628: Error: non-constant .uleb128 is not supported
/tmp/kfence\_test-08a0a0.s:14632: Error: non-constant .uleb128 is not supported
/tmp/kfence\_test-08a0a0.s:14633: Error: non-constant .uleb128 is not supported
/tmp/kfence\_test-08a0a0.s:14639: Error: non-constant .uleb128 is not supported
...
This is because `-g` defaults to the compiler debug info default. If the
assembler does not support some of the directives used, the above errors
occur. To fix, remove the explicit passing of `-g`.
All the test wants is that stack traces print valid function names, and
debug info is not required for that. (I currently cannot recall why I
added the explicit `-g`.)
Link: https://lkml.kernel.org/r/20230316224705.709984-1-elver@google.com
Fixes: bc8fbc5f305a ("kfence: add test suite")
Signed-off-by: Marco Elver
Reported-by: Nathan Chancellor
Cc: Alexander Potapenko
Cc: Dmitry Vyukov
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit dfaceae2aaea1b0a80d1b3f14cc636db1f19cc34
Author: Muchun Song
Date: Wed Mar 15 11:44:41 2023 +0800
mm: kfence: fix using kfence\_metadata without initialization in show\_object()
commit 1c86a188e03156223a34d09ce290b49bd4dd0403 upstream.
The variable kfence\_metadata is initialized in kfence\_init\_pool(), then,
it is not initialized if kfence is disabled after booting. In this case,
kfence\_metadata will be used (e.g. ->lock and ->state fields) without
initialization when reading /sys/kernel/debug/kfence/objects. There will
be a warning if you enable CONFIG\_DEBUG\_SPINLOCK. Fix it by creating
debugfs files when necessary.
Link: https://lkml.kernel.org/r/20230315034441.44321-1-songmuchun@bytedance.com
Fixes: 0ce20dd84089 ("mm: add Kernel Electric-Fence infrastructure")
Signed-off-by: Muchun Song
Tested-by: Marco Elver
Reviewed-by: Marco Elver
Cc: Alexander Potapenko
Cc: Dmitry Vyukov
Cc: Jann Horn
Cc: SeongJae Park
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit 8346d21d1d8a63f46f60e6899f4f80b1306acf32
Author: Hans de Goede
Date: Wed Mar 8 16:42:44 2023 +0100
usb: ucsi\_acpi: Increase the command completion timeout
commit 02d210f434249a7edbc160969b75df030dc6934d upstream.
Commit 130a96d698d7 ("usb: typec: ucsi: acpi: Increase command
completion timeout value") increased the timeout from 5 seconds
to 60 seconds due to issues related to alternate mode discovery.
After the alternate mode discovery switch to polled mode
the timeout was reduced, but instead of being set back to
5 seconds it was reduced to 1 second.
This is causing problems when using a Lenovo ThinkPad X1 yoga gen7
connected over Type-C to a LG 27UL850-W (charging DP over Type-C).
When the monitor is already connected at boot the following error
is logged: "PPM init failed (-110)", /sys/class/typec is empty and
on unplugging the NULL pointer deref fixed earlier in this series
happens.
When the monitor is connected after boot the following error
is logged instead: "GET\_CONNECTOR\_STATUS failed (-110)".
Setting the timeout back to 5 seconds fixes both cases.
Fixes: e08065069fc7 ("usb: typec: ucsi: acpi: Reduce the command completion timeout")
Cc: stable@vger.kernel.org
Reviewed-by: Heikki Krogerus
Signed-off-by: Hans de Goede
Link: https://lore.kernel.org/r/20230308154244.722337-4-hdegoede@redhat.com
Signed-off-by: Greg Kroah-Hartman
commit 7ef0423e43f877a328454059d46763043ce3da44
Author: Hans de Goede
Date: Wed Mar 8 16:42:42 2023 +0100
usb: ucsi: Fix NULL pointer deref in ucsi\_connector\_change()
commit f87fb985452ab2083967103ac00bfd68fb182764 upstream.
When ucsi\_init() fails, ucsi->connector is NULL, yet in case of
ucsi\_acpi we may still get events which cause the ucs\_acpi code to call
ucsi\_connector\_change(), which then derefs the NULL ucsi->connector
pointer.
Fix this by not setting ucsi->ntfy inside ucsi\_init() until ucsi\_init()
has succeeded, so that ucsi\_connector\_change() ignores the events
because UCSI\_ENABLE\_NTFY\_CONNECTOR\_CHANGE is not set in the ntfy mask.
Fixes: bdc62f2bae8f ("usb: typec: ucsi: Simplified registration and I/O API")
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=217106
Cc: stable@vger.kernel.org
Reviewed-by: Heikki Krogerus
Signed-off-by: Hans de Goede
Link: https://lore.kernel.org/r/20230308154244.722337-2-hdegoede@redhat.com
Signed-off-by: Greg Kroah-Hartman
commit 9060decc22a5eb5edd5f31b9a661d535a433715a
Author: Wesley Cheng
Date: Mon Mar 6 12:05:57 2023 -0800
usb: dwc3: gadget: Add 1ms delay after end transfer command without IOC
commit d8a2bb4eb75866275b5cf7de2e593ac3449643e2 upstream.
Previously, there was a 100uS delay inserted after issuing an end transfer
command for specific controller revisions. This was due to the fact that
there was a GUCTL2 bit field which enabled synchronous completion of the
end transfer command once the CMDACT bit was cleared in the DEPCMD
register. Since this bit does not exist for all controller revisions and
the current implementation heavily relies on utizling the EndTransfer
command completion interrupt, add the delay back in for uses where the
interrupt on completion bit is not set, and increase the duration to 1ms
for the controller to complete the command.
An issue was seen where the USB request buffer was unmapped while the DWC3
controller was still accessing the TRB. However, it was confirmed that the
end transfer command was successfully submitted. (no end transfer timeout)
In situations, such as dwc3\_gadget\_soft\_disconnect() and
\_\_dwc3\_gadget\_ep\_disable(), the dwc3\_remove\_request() is utilized, which
will issue the end transfer command, and follow up with
dwc3\_gadget\_giveback(). At least for the USB ep disable path, it is
required for any pending and started requests to be completed and returned
to the function driver in the same context of the disable call. Without
the GUCTL2 bit, it is not ensured that the end transfer is completed before
the buffers are unmapped.
Fixes: cf2f8b63f7f1 ("usb: dwc3: gadget: Remove END\_TRANSFER delay")
Cc: stable
Signed-off-by: Wesley Cheng
Acked-by: Thinh Nguyen
Link: https://lore.kernel.org/r/20230306200557.29387-1-quic\_wcheng@quicinc.com
Signed-off-by: Greg Kroah-Hartman
commit 40a192ae30b28d103e513e4370239719136f291c
Author: Xu Yang
Date: Fri Mar 17 14:15:16 2023 +0800
usb: chipidea: core: fix possible concurrent when switch role
commit 451b15ed138ec15bffbebb58a00ebdd884c3e659 upstream.
The user may call role\_store() when driver is handling
ci\_handle\_id\_switch() which is triggerred by otg event or power lost
event. Unfortunately, the controller may go into chaos in this case.
Fix this by protecting it with mutex lock.
Fixes: a932a8041ff9 ("usb: chipidea: core: add sysfs group")
cc:
Acked-by: Peter Chen
Signed-off-by: Xu Yang
Link: https://lore.kernel.org/r/20230317061516.2451728-2-xu.yang\_2@nxp.com
Signed-off-by: Greg Kroah-Hartman
commit 9c79e5594dc57c8ac3e69001bc3d9eabe4b8c930
Author: Xu Yang
Date: Fri Mar 17 14:15:15 2023 +0800
usb: chipdea: core: fix return -EINVAL if request role is the same with current role
commit 3670de80678961eda7fa2220883fc77c16868951 upstream.
It should not return -EINVAL if the request role is the same with current
role, return non-error and without do anything instead.
Fixes: a932a8041ff9 ("usb: chipidea: core: add sysfs group")
cc:
Acked-by: Peter Chen
Signed-off-by: Xu Yang
Link: https://lore.kernel.org/r/20230317061516.2451728-1-xu.yang\_2@nxp.com
Signed-off-by: Greg Kroah-Hartman
commit ae90481ebdf45935472ddb2ce2f94bb26ea5dd12
Author: Pawel Laszczak
Date: Thu Mar 9 01:30:48 2023 -0500
usb: cdnsp: changes PCI Device ID to fix conflict with CNDS3 driver
commit 96b96b2a567fb34dd41c87e6cf01f6902ce8cae4 upstream.
Patch changes CDNS\_DEVICE\_ID in USBSSP PCI Glue driver to remove
the conflict with Cadence USBSS driver.
cc:
Fixes: 3d82904559f4 ("usb: cdnsp: cdns3 Add main part of Cadence USBSSP DRD Driver")
Signed-off-by: Pawel Laszczak
Link: https://lore.kernel.org/r/20230309063048.299378-1-pawell@cadence.com
Signed-off-by: Greg Kroah-Hartman
commit 9ea58b69f90649f5e90783c04e6649ed327fea23
Author: Pawel Laszczak
Date: Tue Mar 7 06:14:20 2023 -0500
usb: cdnsp: Fixes issue with redundant Status Stage
commit 5bc38d33a5a1209fd4de65101d1ae8255ea12c6e upstream.
In some cases, driver trees to send Status Stage twice.
The first one from upper layer of gadget usb subsystem and
second time from controller driver.
This patch fixes this issue and remove tricky handling of
SET\_INTERFACE from controller driver which is no longer
needed.
cc:
Fixes: 3d82904559f4 ("usb: cdnsp: cdns3 Add main part of Cadence USBSSP DRD Driver")
Signed-off-by: Pawel Laszczak
Link: https://lore.kernel.org/r/20230307111420.376056-1-pawell@cadence.com
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Greg Kroah-Hartman
commit 0bfa44094fa5a4e2c7a2e517c4030adfb56eec79
Author: Pawel Laszczak
Date: Wed Mar 8 07:44:27 2023 -0500
usb: cdns3: Fix issue with using incorrect PCI device function
commit 1272fd652a226ccb34e9f47371b6121948048438 upstream.
PCI based platform can have more than two PCI functions.
USBSS PCI Glue driver during initialization should
consider only DRD/HOST/DEVICE PCI functions and
all other should be ignored. This patch adds additional
condition which causes that only DRD and HOST/DEVICE
function will be accepted.
cc:
Fixes: 7733f6c32e36 ("usb: cdns3: Add Cadence USB3 DRD Driver")
Signed-off-by: Pawel Laszczak
Link: https://lore.kernel.org/r/20230308124427.311245-1-pawell@cadence.com
Signed-off-by: Greg Kroah-Hartman
commit e37d2c489d71e94ed4a39529bc9520a7fd983d42
Author: Xu Yang
Date: Thu Feb 16 11:15:15 2023 +0800
usb: typec: tcpm: fix warning when handle discover\_identity message
commit abfc4fa28f0160df61c7149567da4f6494dfb488 upstream.
Since both source and sink device can send discover\_identity message in
PD3, kernel may dump below warning:
------------[ cut here ]------------
WARNING: CPU: 0 PID: 169 at drivers/usb/typec/tcpm/tcpm.c:1446 tcpm\_queue\_vdm+0xe0/0xf0
Modules linked in:
CPU: 0 PID: 169 Comm: 1-0050 Not tainted 6.1.1-00038-g6a3c36cf1da2-dirty #567
Hardware name: NXP i.MX8MPlus EVK board (DT)
pstate: 20000005 (nzCv daif -PAN -UAO -TCO -DIT -SSBS BTYPE=--)
pc : tcpm\_queue\_vdm+0xe0/0xf0
lr : tcpm\_queue\_vdm+0x2c/0xf0
sp : ffff80000c19bcd0
x29: ffff80000c19bcd0 x28: 0000000000000001 x27: ffff0000d11c8ab8
x26: ffff0000d11cc000 x25: 0000000000000000 x24: 00000000ff008081
x23: 0000000000000001 x22: 00000000ff00a081 x21: ffff80000c19bdbc
x20: 0000000000000000 x19: ffff0000d11c8080 x18: ffffffffffffffff
x17: 0000000000000000 x16: 0000000000000000 x15: ffff0000d716f580
x14: 0000000000000001 x13: ffff0000d716f507 x12: 0000000000000001
x11: 0000000000000000 x10: 0000000000000020 x9 : 00000000000ee098
x8 : 00000000ffffffff x7 : 000000000000001c x6 : ffff0000d716f580
x5 : 0000000000000000 x4 : 0000000000000000 x3 : 0000000000000000
x2 : ffff80000c19bdbc x1 : 00000000ff00a081 x0 : 0000000000000004
Call trace:
tcpm\_queue\_vdm+0xe0/0xf0
tcpm\_pd\_rx\_handler+0x340/0x1ab0
kthread\_worker\_fn+0xcc/0x18c
kthread+0x10c/0x110
ret\_from\_fork+0x10/0x20
---[ end trace 0000000000000000 ]---
Below sequences may trigger this warning:
tcpm\_send\_discover\_work(work)
tcpm\_send\_vdm(port, USB\_SID\_PD, CMD\_DISCOVER\_IDENT, NULL, 0);
tcpm\_queue\_vdm(port, header, data, count);
port->vdm\_state = VDM\_STATE\_READY;
vdm\_state\_machine\_work(work);
<-- received discover\_identity from partner
vdm\_run\_state\_machine(port);
port->vdm\_state = VDM\_STATE\_SEND\_MESSAGE;
mod\_vdm\_delayed\_work(port, x);
tcpm\_pd\_rx\_handler(work);
tcpm\_pd\_data\_request(port, msg);
tcpm\_handle\_vdm\_request(port, msg->payload, cnt);
tcpm\_queue\_vdm(port, response[0], &response[1], rlen - 1);
--> WARN\_ON(port->vdm\_state > VDM\_STATE\_DONE);
For this case, the state machine could still send out discover
identity message later if we skip current discover\_identity message.
So we should handle the received message firstly and override the pending
discover\_identity message without warning in this case. Then, a delayed
send\_discover work will send discover\_identity message again.
Fixes: e00943e91678 ("usb: typec: tcpm: PD3.0 sinks can send Discover Identity even in device mode")
cc:
Signed-off-by: Xu Yang
Reviewed-by: Guenter Roeck
Reviewed-by: Heikki Krogerus
Link: https://lore.kernel.org/r/20230216031515.4151117-1-xu.yang\_2@nxp.com
Signed-off-by: Greg Kroah-Hartman
commit 13648f9d017e5c89a40b7cf82931b2f565fca1b6
Author: Xu Yang
Date: Wed Feb 15 13:49:51 2023 +0800
usb: typec: tcpm: fix create duplicate source-capabilities file
commit a826492fc9dfe32afd70fff93955ae8174bbf14b upstream.
The kernel will dump in the below cases:
sysfs: cannot create duplicate filename
'/devices/virtual/usb\_power\_delivery/pd1/source-capabilities'
1. After soft reset has completed, an Explicit Contract negotiation occurs.
The sink device will receive source capabilitys again. This will cause
a duplicate source-capabilities file be created.
2. Power swap twice on a device that is initailly sink role.
This will unregister existing capabilities when above cases occurs.
Fixes: 8203d26905ee ("usb: typec: tcpm: Register USB Power Delivery Capabilities")
cc:
Signed-off-by: Xu Yang
Reviewed-by: Heikki Krogerus
Reviewed-by: Guenter Roeck
Link: https://lore.kernel.org/r/20230215054951.238394-1-xu.yang\_2@nxp.com
Signed-off-by: Greg Kroah-Hartman
commit 6f66201e2aca1beea8cde4a0138639f0a4261108
Author: Coly Li
Date: Mon Feb 27 23:23:17 2023 +0800
dm thin: fix deadlock when swapping to thin device
commit 9bbf5feecc7eab2c370496c1c161bbfe62084028 upstream.
This is an already known issue that dm-thin volume cannot be used as
swap, otherwise a deadlock may happen when dm-thin internal memory
demand triggers swap I/O on the dm-thin volume itself.
But thanks to commit a666e5c05e7c ("dm: fix deadlock when swapping to
encrypted device"), the limit\_swap\_bios target flag can also be used
for dm-thin to avoid the recursive I/O when it is used as swap.
Fix is to simply set ti->limit\_swap\_bios to true in both pool\_ctr()
and thin\_ctr().
In my test, I create a dm-thin volume /dev/vg/swap and use it as swap
device. Then I run fio on another dm-thin volume /dev/vg/main and use
large --blocksize to trigger swap I/O onto /dev/vg/swap.
The following fio command line is used in my test,
fio --name recursive-swap-io --lockmem 1 --iodepth 128 \
--ioengine libaio --filename /dev/vg/main --rw randrw \
--blocksize 1M --numjobs 32 --time\_based --runtime=12h
Without this fix, the whole system can be locked up within 15 seconds.
With this fix, there is no any deadlock or hung task observed after
2 hours of running fio.
Furthermore, if blocksize is changed from 1M to 128M, after around 30
seconds fio has no visible I/O, and the out-of-memory killer message
shows up in kernel message. After around 20 minutes all fio processes
are killed and the whole system is back to being alive.
This is exactly what is expected when recursive I/O happens on dm-thin
volume when it is used as swap.
Depends-on: a666e5c05e7c ("dm: fix deadlock when swapping to encrypted device")
Cc: stable@vger.kernel.org
Signed-off-by: Coly Li
Acked-by: Mikulas Patocka
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit de91528d8ba274c614a2265077d695c61e31fd43
Author: Lin Ma
Date: Tue Mar 7 23:29:17 2023 +0800
igb: revert rtnl\_lock() that causes deadlock
commit 65f69851e44d71248b952a687e44759a7abb5016 upstream.
The commit 6faee3d4ee8b ("igb: Add lock to avoid data race") adds
rtnl\_lock to eliminate a false data race shown below
(FREE from device detaching) | (USE from netdev core)
igb\_remove | igb\_ndo\_get\_vf\_config
igb\_disable\_sriov | vf >= adapter->vfs\_allocated\_count?
kfree(adapter->vf\_data) |
adapter->vfs\_allocated\_count = 0 |
| memcpy(... adapter->vf\_data[vf]
The above race will never happen and the extra rtnl\_lock causes deadlock
below
[ 141.420169]
[ 141.420672] \_\_schedule+0x2dd/0x840
[ 141.421427] schedule+0x50/0xc0
[ 141.422041] schedule\_preempt\_disabled+0x11/0x20
[ 141.422678] \_\_mutex\_lock.isra.13+0x431/0x6b0
[ 141.423324] unregister\_netdev+0xe/0x20
[ 141.423578] igbvf\_remove+0x45/0xe0 [igbvf]
[ 141.423791] pci\_device\_remove+0x36/0xb0
[ 141.423990] device\_release\_driver\_internal+0xc1/0x160
[ 141.424270] pci\_stop\_bus\_device+0x6d/0x90
[ 141.424507] pci\_stop\_and\_remove\_bus\_device+0xe/0x20
[ 141.424789] pci\_iov\_remove\_virtfn+0xba/0x120
[ 141.425452] sriov\_disable+0x2f/0xf0
[ 141.425679] igb\_disable\_sriov+0x4e/0x100 [igb]
[ 141.426353] igb\_remove+0xa0/0x130 [igb]
[ 141.426599] pci\_device\_remove+0x36/0xb0
[ 141.426796] device\_release\_driver\_internal+0xc1/0x160
[ 141.427060] driver\_detach+0x44/0x90
[ 141.427253] bus\_remove\_driver+0x55/0xe0
[ 141.427477] pci\_unregister\_driver+0x2a/0xa0
[ 141.428296] \_\_x64\_sys\_delete\_module+0x141/0x2b0
[ 141.429126] ? mntput\_no\_expire+0x4a/0x240
[ 141.429363] ? syscall\_trace\_enter.isra.19+0x126/0x1a0
[ 141.429653] do\_syscall\_64+0x5b/0x80
[ 141.429847] ? exit\_to\_user\_mode\_prepare+0x14d/0x1c0
[ 141.430109] ? syscall\_exit\_to\_user\_mode+0x12/0x30
[ 141.430849] ? do\_syscall\_64+0x67/0x80
[ 141.431083] ? syscall\_exit\_to\_user\_mode\_prepare+0x183/0x1b0
[ 141.431770] ? syscall\_exit\_to\_user\_mode+0x12/0x30
[ 141.432482] ? do\_syscall\_64+0x67/0x80
[ 141.432714] ? exc\_page\_fault+0x64/0x140
[ 141.432911] entry\_SYSCALL\_64\_after\_hwframe+0x72/0xdc
Since the igb\_disable\_sriov() will call pci\_disable\_sriov() before
releasing any resources, the netdev core will synchronize the cleanup to
avoid any races. This patch removes the useless rtnl\_(un)lock to guarantee
correctness.
CC: stable@vger.kernel.org
Fixes: 6faee3d4ee8b ("igb: Add lock to avoid data race")
Reported-by: Corinna Vinschen
Link: https://lore.kernel.org/intel-wired-lan/ZAcJvkEPqWeJHO2r@calimero.vinschen.de/
Signed-off-by: Lin Ma
Tested-by: Corinna Vinschen
Reviewed-by: Jacob Keller
Reviewed-by: Simon Horman
Tested-by: Rafal Romanowski
Signed-off-by: Tony Nguyen
Signed-off-by: Greg Kroah-Hartman
commit 08481fd207c0314accdf1cc0cfd10a606ff5f9b9
Author: Krzysztof Kozlowski
Date: Fri Feb 17 16:06:26 2023 +0100
arm64: dts: imx8mm-nitrogen-r2: fix WM8960 clock name
commit 32f86da7c86b27ebed31c24453a0713f612e43fb upstream.
The WM8960 Linux driver expects the clock to be named "mclk". Otherwise
the clock will be ignored and not prepared/enabled by the driver.
Fixes: 40ba2eda0a7b ("arm64: dts: imx8mm-nitrogen-r2: add audio")
Cc:
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Shawn Guo
Signed-off-by: Greg Kroah-Hartman
commit 1ce7c72c125404d19f98b4a68ef216f4ef28cf60
Author: Jeff Layton
Date: Tue Mar 14 06:20:58 2023 -0400
lockd: set file\_lock start and end when decoding nlm4 testargs
commit 7ff84910c66c9144cc0de9d9deed9fb84c03aff0 upstream.
Commit 6930bcbfb6ce dropped the setting of the file\_lock range when
decoding a nlm\_lock off the wire. This causes the client side grant
callback to miss matching blocks and reject the lock, only to rerequest
it 30s later.
Add a helper function to set the file\_lock range from the start and end
values that the protocol uses, and have the nlm\_lock decoder call that to
set up the file\_lock args properly.
Fixes: 6930bcbfb6ce ("lockd: detect and reject lock arguments that overflow")
Reported-by: Amir Goldstein
Signed-off-by: Jeff Layton
Tested-by: Amir Goldstein
Cc: stable@vger.kernel.org #6.0
Signed-off-by: Anna Schumaker
Signed-off-by: Greg Kroah-Hartman
commit 68276c8762917efb82d908ce1e3f5e5a1bc8608c
Author: Nathan Huckleberry
Date: Fri Mar 10 11:33:25 2023 -0800
fsverity: Remove WQ\_UNBOUND from fsverity read workqueue
commit f959325e6ac3f499450088b8d9c626d1177be160 upstream.
WQ\_UNBOUND causes significant scheduler latency on ARM64/Android. This
is problematic for latency sensitive workloads, like I/O
post-processing.
Removing WQ\_UNBOUND gives a 96% reduction in fsverity workqueue related
scheduler latency and improves app cold startup times by ~30ms.
WQ\_UNBOUND was also removed from the dm-verity workqueue for the same
reason [1].
This code was tested by running Android app startup benchmarks and
measuring how long the fsverity workqueue spent in the runnable state.
Before
Total workqueue scheduler latency: 553800us
After
Total workqueue scheduler latency: 18962us
[1]: https://lore.kernel.org/all/20230202012348.885402-1-nhuck@google.com/
Signed-off-by: Nathan Huckleberry
Fixes: 8a1d0f9cacc9 ("fs-verity: add data verification hooks for ->readpages()")
Cc: stable@vger.kernel.org
Link: https://lore.kernel.org/r/20230310193325.620493-1-nhuck@google.com
Signed-off-by: Eric Biggers
Signed-off-by: Greg Kroah-Hartman
commit 497ab5d9c7852dfedab2c9de75e41b60e54b7c5d
Author: Eric Biggers
Date: Mon Mar 13 15:12:29 2023 -0700
fscrypt: destroy keyring after security\_sb\_delete()
commit ccb820dc7d2236b1af0d54ae038a27b5b6d5ae5a upstream.
fscrypt\_destroy\_keyring() must be called after all potentially-encrypted
inodes were evicted; otherwise it cannot safely destroy the keyring.
Since inodes that are in-use by the Landlock LSM don't get evicted until
security\_sb\_delete(), this means that fscrypt\_destroy\_keyring() must be
called \*after\* security\_sb\_delete().
This fixes a WARN\_ON followed by a NULL dereference, only possible if
Landlock was being used on encrypted files.
Fixes: d7e7b9af104c ("fscrypt: stop using keyrings subsystem for fscrypt\_master\_key")
Cc: stable@vger.kernel.org
Reported-by: syzbot+93e495f6a4f748827c88@syzkaller.appspotmail.com
Link: https://lore.kernel.org/r/00000000000044651705f6ca1e30@google.com
Reviewed-by: Christian Brauner
Link: https://lore.kernel.org/r/20230313221231.272498-2-ebiggers@kernel.org
Signed-off-by: Eric Biggers
Signed-off-by: Greg Kroah-Hartman
commit e7295b05747f818de4725e1fcefb58d0873c4032
Author: Ard Biesheuvel
Date: Fri Mar 10 13:30:05 2023 +0100
arm64: efi: Set NX compat flag in PE/COFF header
commit 3c66bb1918c262dd52fb4221a8d372619c5da70a upstream.
The PE/COFF header has a NX compat flag which informs the firmware that
the application does not rely on memory regions being mapped with both
executable and writable permissions at the same time.
This is typically used by the firmware to decide whether it can set the
NX attribute on all allocations it returns, but going forward, it may be
used to enforce a policy that only permits applications with the NX flag
set to be loaded to begin wiht in some configurations, e.g., when Secure
Boot is in effect.
Even though the arm64 version of the EFI stub may relocate the kernel
before executing it, it always did so after disabling the MMU, and so we
were always in line with what the NX compat flag conveys, we just never
bothered to set it.
So let's set the flag now.
Cc:
Signed-off-by: Ard Biesheuvel
Signed-off-by: Greg Kroah-Hartman
commit b065b01e32a0f5481534b1fd5a97f37e8c2ed90f
Author: Ard Biesheuvel
Date: Fri Mar 10 12:15:24 2023 +0100
efi/libstub: zboot: Mark zboot EFI application as NX compatible
commit c7d9e628b8ff4d52a365a441bdacb3209ee83c81 upstream.
Now that the zboot loader will invoke the EFI memory attributes protocol
to remap the decompressed code and rodata as read-only/executable, we
can set the PE/COFF header flag that indicates to the firmware that the
application does not rely on writable memory being executable at the
same time.
Cc:  # v6.2+
Signed-off-by: Ard Biesheuvel
Signed-off-by: Greg Kroah-Hartman
commit 02ea037abee5201ab961d5435ee1b919466a60bd
Author: Geert Uytterhoeven
Date: Tue Mar 21 09:30:59 2023 +0100
mm/slab: Fix undefined init\_cache\_node\_node() for NUMA and !SMP
commit 66a1c22b709178e7b823d44465d0c2e5ed7492fb upstream.
sh/migor\_defconfig:
mm/slab.c: In function ‘slab\_memory\_callback’:
mm/slab.c:1127:23: error: implicit declaration of function ‘init\_cache\_node\_node’; did you mean ‘drain\_cache\_node\_node’? [-Werror=implicit-function-declaration]
1127 | ret = init\_cache\_node\_node(nid);
| ^~~~~~~~~~~~~~~~~~~~
| drain\_cache\_node\_node
The #ifdef condition protecting the definition of init\_cache\_node\_node()
no longer matches the conditions protecting the (multiple) users.
Fix this by syncing the conditions.
Fixes: 76af6a054da40553 ("mm/migrate: add CPU hotplug to demotion #ifdef")
Reported-by: Randy Dunlap
Link: https://lore.kernel.org/r/b5bdea22-ed2f-3187-6efe-0c72330270a4@infradead.org
Signed-off-by: Geert Uytterhoeven
Reviewed-by: John Paul Adrian Glaubitz
Acked-by: Randy Dunlap
Cc:
Signed-off-by: Vlastimil Babka
Signed-off-by: Greg Kroah-Hartman
commit d34aae65bcaf8481a8a92c922f527cecff0f7435
Author: Hans de Goede
Date: Tue Mar 14 13:31:02 2023 +0100
efi: sysfb\_efi: Fix DMI quirks not working for simpledrm
commit 3615c78673c332b69aaacefbcde5937c5c706686 upstream.
Commit 8633ef82f101 ("drivers/firmware: consolidate EFI framebuffer setup
for all arches") moved the sysfb\_apply\_efi\_quirks() call in sysfb\_init()
from before the [sysfb\_]parse\_mode() call to after it.
But sysfb\_apply\_efi\_quirks() modifies the global screen\_info struct which
[sysfb\_]parse\_mode() parses, so doing it later is too late.
This has broken all DMI based quirks for correcting wrong firmware efifb
settings when simpledrm is used.
To fix this move the sysfb\_apply\_efi\_quirks() call back to its old place
and split the new setup of the efifb\_fwnode (which requires
the platform\_device) into its own function and call that at
the place of the moved sysfb\_apply\_efi\_quirks(pd) calls.
Fixes: 8633ef82f101 ("drivers/firmware: consolidate EFI framebuffer setup for all arches")
Cc: stable@vger.kernel.org
Cc: Javier Martinez Canillas
Cc: Thomas Zimmermann
Signed-off-by: Hans de Goede
Reviewed-by: Javier Martinez Canillas
Signed-off-by: Ard Biesheuvel
Signed-off-by: Greg Kroah-Hartman
commit be586211a3ab40a4f4ca60450e0d31606afc55ec
Author: Min Li
Date: Sat Mar 4 21:50:35 2023 +0800
Bluetooth: Fix race condition in hci\_cmd\_sync\_clear
commit 1c66bee492a5fe00ae3fe890bb693bfc99f994c6 upstream.
There is a potential race condition in hci\_cmd\_sync\_work and
hci\_cmd\_sync\_clear, and could lead to use-after-free. For instance,
hci\_cmd\_sync\_work is added to the 'req\_workqueue' after cancel\_work\_sync
The entry of 'cmd\_sync\_work\_list' may be freed in hci\_cmd\_sync\_clear, and
causing kernel panic when it is used in 'hci\_cmd\_sync\_work'.
Here's the call trace:
dump\_stack\_lvl+0x49/0x63
print\_report.cold+0x5e/0x5d3
? hci\_cmd\_sync\_work+0x282/0x320
kasan\_report+0xaa/0x120
? hci\_cmd\_sync\_work+0x282/0x320
\_\_asan\_report\_load8\_noabort+0x14/0x20
hci\_cmd\_sync\_work+0x282/0x320
process\_one\_work+0x77b/0x11c0
? \_raw\_spin\_lock\_irq+0x8e/0xf0
worker\_thread+0x544/0x1180
? poll\_idle+0x1e0/0x1e0
kthread+0x285/0x320
? process\_one\_work+0x11c0/0x11c0
? kthread\_complete\_and\_exit+0x30/0x30
ret\_from\_fork+0x22/0x30

Allocated by task 266:
kasan\_save\_stack+0x26/0x50
\_\_kasan\_kmalloc+0xae/0xe0
kmem\_cache\_alloc\_trace+0x191/0x350
hci\_cmd\_sync\_queue+0x97/0x2b0
hci\_update\_passive\_scan+0x176/0x1d0
le\_conn\_complete\_evt+0x1b5/0x1a00
hci\_le\_conn\_complete\_evt+0x234/0x340
hci\_le\_meta\_evt+0x231/0x4e0
hci\_event\_packet+0x4c5/0xf00
hci\_rx\_work+0x37d/0x880
process\_one\_work+0x77b/0x11c0
worker\_thread+0x544/0x1180
kthread+0x285/0x320
ret\_from\_fork+0x22/0x30
Freed by task 269:
kasan\_save\_stack+0x26/0x50
kasan\_set\_track+0x25/0x40
kasan\_set\_free\_info+0x24/0x40
\_\_\_\_kasan\_slab\_free+0x176/0x1c0
\_\_kasan\_slab\_free+0x12/0x20
slab\_free\_freelist\_hook+0x95/0x1a0
kfree+0xba/0x2f0
hci\_cmd\_sync\_clear+0x14c/0x210
hci\_unregister\_dev+0xff/0x440
vhci\_release+0x7b/0xf0
\_\_fput+0x1f3/0x970
\_\_\_\_fput+0xe/0x20
task\_work\_run+0xd4/0x160
do\_exit+0x8b0/0x22a0
do\_group\_exit+0xba/0x2a0
get\_signal+0x1e4a/0x25b0
arch\_do\_signal\_or\_restart+0x93/0x1f80
exit\_to\_user\_mode\_prepare+0xf5/0x1a0
syscall\_exit\_to\_user\_mode+0x26/0x50
ret\_from\_fork+0x15/0x30
Fixes: 6a98e3836fa2 ("Bluetooth: Add helper for serialized HCI command execution")
Cc: stable@vger.kernel.org
Signed-off-by: Min Li
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Greg Kroah-Hartman
commit 0280512c232ada033dedbccb8596fe3a858177c3
Author: Naohiro Aota
Date: Mon Mar 13 16:29:49 2023 +0900
btrfs: zoned: fix btrfs\_can\_activate\_zone() to support DUP profile
commit 9e1cdf0c354e46e428c0e0cab008abbe81b6013d upstream.
btrfs\_can\_activate\_zone() returns true if at least one device has one zone
available for activation. This is OK for the single profile, but not OK for
DUP profile. We need two zones to create a DUP block group. Fix it by
properly handling the case with the profile flags.
Fixes: 265f7237dd25 ("btrfs: zoned: allow DUP on meta-data block groups")
CC: stable@vger.kernel.org # 6.1+
Reviewed-by: Johannes Thumshirn
Signed-off-by: Naohiro Aota
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 43ca70753dfffd517d2af126da28690f8f615605
Author: Alvin Šipraga
Date: Thu Mar 2 17:36:47 2023 +0100
usb: gadget: u\_audio: don't let userspace block driver unbind
commit 6c67ed9ad9b83e453e808f9b31a931a20a25629b upstream.
In the unbind callback for f\_uac1 and f\_uac2, a call to snd\_card\_free()
via g\_audio\_cleanup() will disconnect the card and then wait for all
resources to be released, which happens when the refcount falls to zero.
Since userspace can keep the refcount incremented by not closing the
relevant file descriptor, the call to unbind may block indefinitely.
This can cause a deadlock during reboot, as evidenced by the following
blocked task observed on my machine:
task:reboot state:D stack:0 pid:2827 ppid:569 flags:0x0000000c
Call trace:
\_\_switch\_to+0xc8/0x140
\_\_schedule+0x2f0/0x7c0
schedule+0x60/0xd0
schedule\_timeout+0x180/0x1d4
wait\_for\_completion+0x78/0x180
snd\_card\_free+0x90/0xa0
g\_audio\_cleanup+0x2c/0x64
afunc\_unbind+0x28/0x60
...
kernel\_restart+0x4c/0xac
\_\_do\_sys\_reboot+0xcc/0x1ec
\_\_arm64\_sys\_reboot+0x28/0x30
invoke\_syscall+0x4c/0x110
...
The issue can also be observed by opening the card with arecord and
then stopping the process through the shell before unbinding:
# arecord -D hw:UAC2Gadget -f S32\_LE -c 2 -r 48000 /dev/null
Recording WAVE '/dev/null' : Signed 32 bit Little Endian, Rate 48000 Hz, Stereo
^Z[1]+ Stopped arecord -D hw:UAC2Gadget -f S32\_LE -c 2 -r 48000 /dev/null
# echo gadget.0 > /sys/bus/gadget/drivers/configfs-gadget/unbind
(observe that the unbind command never finishes)
Fix the problem by using snd\_card\_free\_when\_closed() instead, which will
still disconnect the card as desired, but defer the task of freeing the
resources to the core once userspace closes its file descriptor.
Fixes: 132fcb460839 ("usb: gadget: Add Audio Class 2.0 Driver")
Cc: stable@vger.kernel.org
Signed-off-by: Alvin Šipraga
Reviewed-by: Ruslan Bilovol
Reviewed-by: John Keeping
Link: https://lore.kernel.org/r/20230302163648.3349669-1-alvin@pqrs.dk
Signed-off-by: Greg Kroah-Hartman
commit 035c77fb09dcc093ac26909025f83c632ec23fa2
Author: Jens Axboe
Date: Mon Mar 20 20:01:25 2023 -0600
block/io\_uring: pass in issue\_flags for uring\_cmd task\_work handling
commit 9d2789ac9d60c049d26ef6d3005d9c94c5a559e9 upstream.
io\_uring\_cmd\_done() currently assumes that the uring\_lock is held
when invoked, and while it generally is, this is not guaranteed.
Pass in the issue\_flags associated with it, so that we have
IO\_URING\_F\_UNLOCKED available to be able to lock the CQ ring
appropriately when completing events.
Cc: stable@vger.kernel.org
Fixes: ee692a21e9bf ("fs,io\_uring: add infrastructure for uring-cmd")
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 6485fc381b6528b6f547ee1ff10bdbcbe31a6e4c
Author: Fabrice Gasnier
Date: Thu Mar 16 09:41:27 2023 +0100
usb: dwc2: fix a devres leak in hw\_enable upon suspend resume
commit f747313249b74f323ddf841a9c8db14d989f296a upstream.
Each time the platform goes to low power, PM suspend / resume routines
call: \_\_dwc2\_lowlevel\_hw\_enable -> devm\_add\_action\_or\_reset().
This adds a new devres each time.
This may also happen at runtime, as dwc2\_lowlevel\_hw\_enable() can be
called from udc\_start().
This can be seen with tracing:
- echo 1 > /sys/kernel/debug/tracing/events/dev/devres\_log/enable
- go to low power
- cat /sys/kernel/debug/tracing/trace
A new "ADD" entry is found upon each low power cycle:
... devres\_log: 49000000.usb-otg ADD 82a13bba devm\_action\_release (8 bytes)
... devres\_log: 49000000.usb-otg ADD 49889daf devm\_action\_release (8 bytes)
...
A second issue is addressed here:
- regulator\_bulk\_enable() is called upon each PM cycle (suspend/resume).
- regulator\_bulk\_disable() never gets called.
So the reference count for these regulators constantly increase, by one
upon each low power cycle, due to missing regulator\_bulk\_disable() call
in \_\_dwc2\_lowlevel\_hw\_disable().
The original fix that introduced the devm\_add\_action\_or\_reset() call,
fixed an issue during probe, that happens due to other errors in
dwc2\_driver\_probe() -> dwc2\_core\_reset(). Then the probe fails without
disabling regulators, when dr\_mode == USB\_DR\_MODE\_PERIPHERAL.
Rather fix the error path: disable all the low level hardware in the
error path, by using the "hsotg->ll\_hw\_enabled" flag. Checking dr\_mode
has been introduced to avoid a dual call to dwc2\_lowlevel\_hw\_disable().
"ll\_hw\_enabled" should achieve the same (and is used currently in the
remove() routine).
Fixes: 54c196060510 ("usb: dwc2: Always disable regulators on driver teardown")
Fixes: 33a06f1300a7 ("usb: dwc2: Fix error path in gadget registration")
Cc: stable
Signed-off-by: Fabrice Gasnier
Link: https://lore.kernel.org/r/20230316084127.126084-1-fabrice.gasnier@foss.st.com
Signed-off-by: Greg Kroah-Hartman
commit 4e6b55890758d5efb14778b469276421b7d99449
Author: Ziyang Huang
Date: Tue Feb 21 18:30:04 2023 +0800
usb: dwc2: drd: fix inconsistent mode if role-switch-default-mode="host"
commit 82f5332d3b9872ab5b287e85c57b76d8bb640cd1 upstream.
Some boards might use USB-A female connector for USB ports, however,
the port could be connected to a dual-mode USB controller, making it
also behaves as a peripheral device if male-to-male cable is connected.
In this case, the dts looks like this:
&usb0 {
status = "okay";
dr\_mode = "otg";
usb-role-switch;
role-switch-default-mode = "host";
};
After boot, dwc2\_ovr\_init() sets GOTGCTL to GOTGCTL\_AVALOVAL and call
dwc2\_force\_mode() with parameter host=false, which causes inconsistent
mode - The hardware is in peripheral mode while the kernel status is
in host mode.
What we can do now is to call dwc2\_drd\_role\_sw\_set() to switch to
device mode, and everything should work just fine now, even switching
back to none(default) mode afterwards.
Fixes: e14acb876985 ("usb: dwc2: drd: add role-switch-default-node support")
Cc: stable
Signed-off-by: Ziyang Huang
Tested-by: Fabrice Gasnier
Acked-by: Minas Harutyunyan
Reviewed-by: Amelie Delaunay
Link: https://lore.kernel.org/r/SG2PR01MB204837BF68EDB0E343D2A375C9A59@SG2PR01MB2048.apcprd01.prod.exchangelabs.com
Signed-off-by: Greg Kroah-Hartman
commit bf337056c985314a62a9a8dcdb114352f3ce0b80
Author: Fabrice Gasnier
Date: Wed Mar 15 15:44:33 2023 +0100
usb: dwc2: fix a race, don't power off/on phy for dual-role mode
commit 5021383242ada277a38bd052a4c12ed4707faccb upstream.
When in dual role mode (dr\_mode == USB\_DR\_MODE\_OTG), platform probe
successively basically calls:
- dwc2\_gadget\_init()
- dwc2\_hcd\_init()
- dwc2\_lowlevel\_hw\_disable() since recent change [1]
- usb\_add\_gadget\_udc()
The PHYs (and so the clocks it may provide) shouldn't be disabled for all
SoCs, in OTG mode, as the HCD part has been initialized.
On STM32 this creates some weird race condition upon boot, when:
- initially attached as a device, to a HOST
- and there is a gadget script invoked to setup the device part.
Below issue becomes systematic, as long as the gadget script isn't
started by userland: the hardware PHYs (and so the clocks provided by the
PHYs) remains disabled.
It ends up in having an endless interrupt storm, before the watchdog
resets the platform.
[ 16.924163] dwc2 49000000.usb-otg: EPs: 9, dedicated fifos, 952 entries in SPRAM
[ 16.962704] dwc2 49000000.usb-otg: DWC OTG Controller
[ 16.966488] dwc2 49000000.usb-otg: new USB bus registered, assigned bus number 2
[ 16.974051] dwc2 49000000.usb-otg: irq 77, io mem 0x49000000
[ 17.032170] hub 2-0:1.0: USB hub found
[ 17.042299] hub 2-0:1.0: 1 port detected
[ 17.175408] dwc2 49000000.usb-otg: Mode Mismatch Interrupt: currently in Host mode
[ 17.181741] dwc2 49000000.usb-otg: Mode Mismatch Interrupt: currently in Host mode
[ 17.189303] dwc2 49000000.usb-otg: Mode Mismatch Interrupt: currently in Host mode
...
The host part is also not functional, until the gadget part is configured.
The HW may only be disabled for peripheral mode (original init), e.g.
dr\_mode == USB\_DR\_MODE\_PERIPHERAL, until the gadget driver initializes.
But when in USB\_DR\_MODE\_OTG, the HW should remain enabled, as the HCD part
is able to run, while the gadget part isn't necessarily configured.
I don't fully get the of purpose the original change, that claims disabling
the hardware is missing. It creates conditions on SOCs using the PHY
initialization to be completely non working in OTG mode. Original
change [1] should be reworked to be platform specific.
[1] https://lore.kernel.org/r/20221206-dwc2-gadget-dual-role-v1-2-36515e1092cd@theobroma-systems.com
Fixes: ade23d7b7ec5 ("usb: dwc2: power on/off phy for peripheral mode in dual-role mode")
Cc: stable
Signed-off-by: Fabrice Gasnier
Reviewed-by: Quentin Schulz
Tested-by: Quentin Schulz
Link: https://lore.kernel.org/r/20230315144433.3095859-1-fabrice.gasnier@foss.st.com
Signed-off-by: Greg Kroah-Hartman
commit 03a577429b90ed809cf38d5664eca5278b73d5c0
Author: Alexander Stein
Date: Thu Feb 23 08:39:20 2023 +0100
usb: misc: onboard-hub: add support for Microchip USB2517 USB 2.0 hub
commit f7c13cb48e85538709850589b496c4ddb3d3898e upstream.
Add support for Microchip USB2517 USB 2.0 hub to the onboard usb hub
driver. Adopt the generic usb-device compatible ("usbVID,PID").
This hub has the same reset timings as USB2514, so reuse that one.
There is also an USB2517I which just has industrial temperature range.
Signed-off-by: Alexander Stein
Cc: stable
Acked-by: Matthias Kaehlcke
Link: https://lore.kernel.org/r/20230223073920.2912298-1-alexander.stein@ew.tq-group.com
Signed-off-by: Greg Kroah-Hartman
commit 2d0c12c25094fbc03e229f56e92edc5a6c5ca843
Author: Joel Selvaraj
Date: Sun Mar 12 23:14:02 2023 -0500
scsi: core: Add BLIST\_SKIP\_VPD\_PAGES for SKhynix H28U74301AMR
commit a204b490595de71016b2360a1886ec8c12d0afac upstream.
Xiaomi Poco F1 (qcom/sdm845-xiaomi-beryllium\*.dts) comes with a SKhynix
H28U74301AMR UFS. The sd\_read\_cpr() operation leads to a 120 second
timeout, making the device bootup very slow:
[ 121.457736] sd 0:0:0:1: [sdb] tag#23 timing out command, waited 120s
Setting the BLIST\_SKIP\_VPD\_PAGES allows the device to skip the failing
sd\_read\_cpr operation and boot normally.
Signed-off-by: Joel Selvaraj
Link: https://lore.kernel.org/r/20230313041402.39330-1-joelselvaraj.oss@gmail.com
Cc: stable@vger.kernel.org
Signed-off-by: Martin K. Petersen
Signed-off-by: Greg Kroah-Hartman
commit ad27d9ae57f5c5bc55e79f5ea53bd5f73220e72c
Author: Chang S. Bae
Date: Mon Feb 27 13:05:04 2023 -0800
selftests/x86/amx: Add a ptrace test
commit 62faca1ca10cc84e99ae7f38aa28df2bc945369b upstream.
Include a test case to validate the XTILEDATA injection to the target.
Also, it ensures the kernel's ability to copy states between different
XSAVE formats.
Refactor the memcmp() code to be usable for the state validation.
Signed-off-by: Chang S. Bae
Signed-off-by: Dave Hansen
Cc: stable@vger.kernel.org
Link: https://lore.kernel.org/all/20230227210504.18520-3-chang.seok.bae%40intel.com
Signed-off-by: Greg Kroah-Hartman
commit d2d38abe6c1c9f82efada823da08dc9680a57a5e
Author: Chang S. Bae
Date: Mon Feb 27 13:05:03 2023 -0800
x86/fpu/xstate: Prevent false-positive warning in \_\_copy\_xstate\_uabi\_buf()
commit b15888840207c2bfe678dd1f68a32db54315e71f upstream.
\_\_copy\_xstate\_to\_uabi\_buf() copies either from the tasks XSAVE buffer
or from init\_fpstate into the ptrace buffer. Dynamic features, like
XTILEDATA, have an all zeroes init state and are not saved in
init\_fpstate, which means the corresponding bit is not set in the
xfeatures bitmap of the init\_fpstate header.
But \_\_copy\_xstate\_to\_uabi\_buf() retrieves addresses for both the tasks
xstate and init\_fpstate unconditionally via \_\_raw\_xsave\_addr().
So if the tasks XSAVE buffer has a dynamic feature set, then the
address retrieval for init\_fpstate triggers the warning in
\_\_raw\_xsave\_addr() which checks the feature bit in the init\_fpstate
header.
Remove the address retrieval from init\_fpstate for extended features.
They have an all zeroes init state so init\_fpstate has zeros for them.
Then zeroing the user buffer for the init state is the same as copying
them from init\_fpstate.
Fixes: 2308ee57d93d ("x86/fpu/amx: Enable the AMX feature in 64-bit mode")
Reported-by: Mingwei Zhang
Link: https://lore.kernel.org/kvm/20230221163655.920289-2-mizhang@google.com/
Signed-off-by: Chang S. Bae
Signed-off-by: Dave Hansen
Tested-by: Mingwei Zhang
Link: https://lore.kernel.org/all/20230227210504.18520-2-chang.seok.bae%40intel.com
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 7730c3102f05878316fbadd041b77dd5a98b5c54
Author: Michal Koutný
Date: Mon Mar 6 20:31:44 2023 +0100
x86/mm: Do not shuffle CPU entry areas without KASLR
commit a3f547addcaa10df5a226526bc9e2d9a94542344 upstream.
The commit 97e3d26b5e5f ("x86/mm: Randomize per-cpu entry area") fixed
an omission of KASLR on CPU entry areas. It doesn't take into account
KASLR switches though, which may result in unintended non-determinism
when a user wants to avoid it (e.g. debugging, benchmarking).
Generate only a single combination of CPU entry areas offsets -- the
linear array that existed prior randomization when KASLR is turned off.
Since we have 3f148f331814 ("x86/kasan: Map shadow for percpu pages on
demand") and followups, we can use the more relaxed guard
kasrl\_enabled() (in contrast to kaslr\_memory\_enabled()).
Fixes: 97e3d26b5e5f ("x86/mm: Randomize per-cpu entry area")
Signed-off-by: Michal Koutný
Signed-off-by: Dave Hansen
Cc: stable@vger.kernel.org
Link: https://lore.kernel.org/all/20230306193144.24605-1-mkoutny%40suse.com
Signed-off-by: Greg Kroah-Hartman
commit 11222d9f5af879573d10895bfd329cb9ec5f3404
Author: Paulo Alcantara
Date: Fri Mar 24 13:56:33 2023 -0300
cifs: fix dentry lookups in directory handle cache
commit be4fde79812f02914e350bde0bc4cfeae8429378 upstream.
Get rid of any prefix paths in @path before lookup\_positive\_unlocked()
as it will call ->lookup() which already adds those prefix paths
through build\_path\_from\_dentry().
This has caused a performance regression when mounting shares with a
prefix path where readdir(2) would end up retrying several times to
open bad directory names that contained duplicate prefix paths.
Fix this by skipping any prefix paths in @path before calling
lookup\_positive\_unlocked().
Fixes: e4029e072673 ("cifs: find and use the dentry for cached non-root directories also")
Cc: stable@vger.kernel.org # 6.1+
Signed-off-by: Paulo Alcantara (SUSE)
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit ce5febd0327d369cf95605b6678998e177a8f802
Author: Shyam Prasad N
Date: Mon Mar 13 12:17:34 2023 +0000
cifs: print session id while listing open files
commit 175b54abc443b6965e9379b71ec05f7c73c192e9 upstream.
In the output of /proc/fs/cifs/open\_files, we only print
the tree id for the tcon of each open file. It becomes
difficult to know which tcon these files belong to with
just the tree id.
This change dumps ses id in addition to all other data today.
Signed-off-by: Shyam Prasad N
Reviewed-by: Paulo Alcantara (SUSE)
Cc: stable@vger.kernel.org
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 49ba2c6b15890993c8f4e64f11b1f5113d9c1260
Author: Shyam Prasad N
Date: Mon Mar 13 11:09:12 2023 +0000
cifs: dump pending mids for all channels in DebugData
commit d12bc6d26f92c51b28e8f4a146ffcc630b688198 upstream.
Currently, we only dump the pending mid information only
on the primary channel in /proc/fs/cifs/DebugData.
If multichannel is active, we do not print the pending MID
list on secondary channels.
This change will dump the pending mids for all the channels
based on server->conn\_id.
Signed-off-by: Shyam Prasad N
Reviewed-by: Paulo Alcantara (SUSE)
Cc: stable@vger.kernel.org
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit c85a63ff2162c49ed5cd5d5076586944c34d8eeb
Author: Shyam Prasad N
Date: Thu Mar 9 13:23:29 2023 +0000
cifs: empty interface list when server doesn't support query interfaces
commit 896cd316b841053f6df95ab77b5f1322c16a8e18 upstream.
When querying server interfaces returns -EOPNOTSUPP,
clear the list of interfaces. Assumption is that multichannel
would be disabled too.
Signed-off-by: Shyam Prasad N
Reviewed-by: Paulo Alcantara (SUSE)
Cc: stable@vger.kernel.org
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 79f5d8d5dcdd9370311cb7af5d3bcbf77055e22d
Author: Shyam Prasad N
Date: Wed Mar 8 12:11:31 2023 +0000
cifs: do not poll server interfaces too regularly
commit 072a28c8907c841f7d4b56c78bce46d3ee211e73 upstream.
We have the server interface list hanging off the tcon
structure today for reasons unknown. So each tcon which is
connected to a file server can query them separately,
which is really unnecessary. To avoid this, in the query
function, we will check the time of last update of the
interface list, and avoid querying the server if it is
within a certain range.
Signed-off-by: Shyam Prasad N
Reviewed-by: Paulo Alcantara (SUSE)
Cc: stable@vger.kernel.org
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 6fd1fbd0c8b347464d33e98d0c7ad973b14b02bd
Author: Shyam Prasad N
Date: Fri Mar 17 12:51:17 2023 +0000
cifs: append path to open\_enter trace event
commit fddc6ccc487e5de07b98df8d04118d5dcb5e0407 upstream.
We do not dump the file path for smb3\_open\_enter ftrace
calls, which is a severe handicap while debugging
using ftrace evens. This change adds that info.
Unfortunately, we're not updating the path in open params
in many places; which I had to do as a part of this change.
SMB2\_open gets path in utf16 format, but it's easier of
path is supplied as char pointer in oparms.
Signed-off-by: Shyam Prasad N
Reviewed-by: Paulo Alcantara (SUSE)
Cc: stable@vger.kernel.org
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 774a2cf923dce944dc4bc82076a257f0e5d8bb09
Author: Shyam Prasad N
Date: Mon Feb 20 13:02:11 2023 +0000
cifs: lock chan\_lock outside match\_session
commit 2f4e429c846972c8405951a9ff7a82aceeca7461 upstream.
Coverity had rightly indicated a possible deadlock
due to chan\_lock being done inside match\_session.
All callers of match\_\* functions should pick up the
necessary locks and call them.
Signed-off-by: Shyam Prasad N
Reviewed-by: Paulo Alcantara (SUSE)
Cc: stable@vger.kernel.org
Fixes: 724244cdb382 ("cifs: protect session channel fields with chan\_lock")
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 8c9e553c58a491ad328c622441e08178373442dc
Author: Davide Caratti
Date: Fri Jan 20 18:01:40 2023 +0100
act\_mirred: use the backlog for nested calls to mirred ingress
[ Upstream commit ca22da2fbd693b54dc8e3b7b54ccc9f7e9ba3640 ]
William reports kernel soft-lockups on some OVS topologies when TC mirred
egress->ingress action is hit by local TCP traffic [1].
The same can also be reproduced with SCTP (thanks Xin for verifying), when
client and server reach themselves through mirred egress to ingress, and
one of the two peers sends a "heartbeat" packet (from within a timer).
Enqueueing to backlog proved to fix this soft lockup; however, as Cong
noticed [2], we should preserve - when possible - the current mirred
behavior that counts as "overlimits" any eventual packet drop subsequent to
the mirred forwarding action [3]. A compromise solution might use the
backlog only when tcf\_mirred\_act() has a nest level greater than one:
change tcf\_mirred\_forward() accordingly.
Also, add a kselftest that can reproduce the lockup and verifies TC mirred
ability to account for further packet drops after TC mirred egress->ingress
(when the nest level is 1).
[1] https://lore.kernel.org/netdev/33dc43f587ec1388ba456b4915c75f02a8aae226.1663945716.git.dcaratti@redhat.com/
[2] https://lore.kernel.org/netdev/Y0w%2FWWY60gqrtGLp@pop-os.localdomain/
[3] such behavior is not guaranteed: for example, if RPS or skb RX
timestamping is enabled on the mirred target device, the kernel
can defer receiving the skb and return NET\_RX\_SUCCESS inside
tcf\_mirred\_forward().
Reported-by: William Zhao
CC: Xin Long
Signed-off-by: Davide Caratti
Reviewed-by: Marcelo Ricardo Leitner
Acked-by: Jamal Hadi Salim
Signed-off-by: Paolo Abeni
Signed-off-by: Sasha Levin
commit b4c3603b44aad9e99bde465ba3e5af5d01ff0176
Author: Davide Caratti
Date: Fri Jan 20 18:01:39 2023 +0100
net/sched: act\_mirred: better wording on protection against excessive stack growth
[ Upstream commit 78dcdffe0418ac8f3f057f26fe71ccf4d8ed851f ]
with commit e2ca070f89ec ("net: sched: protect against stack overflow in
TC act\_mirred"), act\_mirred protected itself against excessive stack growth
using per\_cpu counter of nested calls to tcf\_mirred\_act(), and capping it
to MIRRED\_RECURSION\_LIMIT. However, such protection does not detect
recursion/loops in case the packet is enqueued to the backlog (for example,
when the mirred target device has RPS or skb timestamping enabled). Change
the wording from "recursion" to "nesting" to make it more clear to readers.
CC: Jamal Hadi Salim
Signed-off-by: Davide Caratti
Reviewed-by: Marcelo Ricardo Leitner
Acked-by: Jamal Hadi Salim
Signed-off-by: Paolo Abeni
Stable-dep-of: ca22da2fbd69 ("act\_mirred: use the backlog for nested calls to mirred ingress")
Signed-off-by: Sasha Levin
commit 3f417ab67f2151337c78f2d48a71606c537e6ea8
Author: Mario Limonciello
Date: Wed Mar 1 09:36:06 2023 -0600
drm/amd: Fix initialization mistake for NBIO 7.3.0
[ Upstream commit 1717cc5f2962a4652c76ed3858b499ccae6c277c ]
The same strapping initialization issue that happened on NBIO 7.5.1
appears to be happening on NBIO 7.3.0.
Apply the same fix to 7.3.0 as well.
Note: This workaround relies upon the integrated GPU being enabled
in BIOS. If the integrated GPU is disabled in BIOS a different
workaround will be required.
Reported-by: Thomas Glanzmann
Cc: Basavaraj Natikar
Link: https://lore.kernel.org/linux-usb/Y%2Fz9GdHjPyF2rNG3@glanzmann.de/T/#u
Signed-off-by: Mario Limonciello
Reviewed-by: Alex Deucher
Signed-off-by: Alex Deucher
Signed-off-by: Sasha Levin
commit 9a02dae3bbfe2df8e1c81e61a08695709e9588f9
Author: lyndonli
Date: Thu Mar 2 14:18:12 2023 +0800
drm/amdgpu: Fix call trace warning and hang when removing amdgpu device
[ Upstream commit 93bb18d2a873d2fa9625c8ea927723660a868b95 ]
On GPUs with RAS enabled, below call trace and hang are observed when
shutting down device.
v2: use DRM device unplugged flag instead of shutdown flag as the check to
prevent memory wipe in shutdown stage.
[ +0.000000] RIP: 0010:amdgpu\_vram\_mgr\_fini+0x18d/0x1c0 [amdgpu]
[ +0.000001] PKRU: 55555554
[ +0.000001] Call Trace:
[ +0.000001]
[ +0.000002] amdgpu\_ttm\_fini+0x140/0x1c0 [amdgpu]
[ +0.000183] amdgpu\_bo\_fini+0x27/0xa0 [amdgpu]
[ +0.000184] gmc\_v11\_0\_sw\_fini+0x2b/0x40 [amdgpu]
[ +0.000163] amdgpu\_device\_fini\_sw+0xb6/0x510 [amdgpu]
[ +0.000152] amdgpu\_driver\_release\_kms+0x16/0x30 [amdgpu]
[ +0.000090] drm\_dev\_release+0x28/0x50 [drm]
[ +0.000016] devm\_drm\_dev\_init\_release+0x38/0x60 [drm]
[ +0.000011] devm\_action\_release+0x15/0x20
[ +0.000003] release\_nodes+0x40/0xc0
[ +0.000001] devres\_release\_all+0x9e/0xe0
[ +0.000001] device\_unbind\_cleanup+0x12/0x80
[ +0.000003] device\_release\_driver\_internal+0xff/0x160
[ +0.000001] driver\_detach+0x4a/0x90
[ +0.000001] bus\_remove\_driver+0x6c/0xf0
[ +0.000001] driver\_unregister+0x31/0x50
[ +0.000001] pci\_unregister\_driver+0x40/0x90
[ +0.000003] amdgpu\_exit+0x15/0x120 [amdgpu]
Signed-off-by: lyndonli
Reviewed-by: Guchun Chen
Reviewed-by: Christian König
Signed-off-by: Alex Deucher
Signed-off-by: Sasha Levin
commit 3cee5bd222488dc986b5242cee7f80919e75ad62
Author: Al Viro
Date: Mon Mar 6 01:20:30 2023 +0000
sh: sanitize the flags on sigreturn
[ Upstream commit 573b22ccb7ce9ab7f0539a2e11a9d3609a8783f5 ]
We fetch %SR value from sigframe; it might have been modified by signal
handler, so we can't trust it with any bits that are not modifiable in
user mode.
Signed-off-by: Al Viro
Cc: Rich Felker
Signed-off-by: Linus Torvalds
Signed-off-by: Sasha Levin
commit 9519b377f61ba2eb39dc509024c0cda4c11c6c7b
Author: Swapnil Patel
Date: Wed Mar 1 14:33:33 2023 -0500
drm/amd/display: Update clock table to include highest clock setting
[ Upstream commit 2d99a7ec25cf456cd3680eb314d6454138e5aa64 ]
[Why]
Currently, the clk manager matches SocVoltage with voltage from
fused settings (dfPstate clock table). And then corresponding clocks
are selected.
However in certain situations, this leads to clk manager not
including at least one entry with highest supported clock setting.
[How]
Update the clk manager to include at least one entry with highest
supported clock setting.
Reviewed-by: Pavle Kotarac
Acked-by: Qingqing Zhuo
Signed-off-by: Swapnil Patel
Signed-off-by: Alex Deucher
Signed-off-by: Sasha Levin
commit 5ff443728d136282388850c79b761c77e0e5beab
Author: Enrico Sau
Date: Mon Mar 6 13:05:28 2023 +0100
net: usb: qmi\_wwan: add Telit 0x1080 composition
[ Upstream commit 382e363d5bed0cec5807b35761d14e55955eee63 ]
Add the following Telit FE990 composition:
0x1080: tty, adb, rmnet, tty, tty, tty, tty
Signed-off-by: Enrico Sau
Link: https://lore.kernel.org/r/20230306120528.198842-1-enrico.sau@gmail.com
Signed-off-by: Paolo Abeni
Signed-off-by: Sasha Levin
commit 02b4fe5f194a86c4594bf5c9c2d0633280a13d4b
Author: Enrico Sau
Date: Mon Mar 6 12:59:33 2023 +0100
net: usb: cdc\_mbim: avoid altsetting toggling for Telit FE990
[ Upstream commit 418383e6ed6b4624a54ec05c535f13d184fbf33b ]
Add quirk CDC\_MBIM\_FLAG\_AVOID\_ALTSETTING\_TOGGLE for Telit FE990
0x1081 composition in order to avoid bind error.
Signed-off-by: Enrico Sau
Link: https://lore.kernel.org/r/20230306115933.198259-1-enrico.sau@gmail.com
Signed-off-by: Paolo Abeni
Signed-off-by: Sasha Levin
commit a54900d965a73db37a2652a7c3a9fb28ae7ed95c
Author: Daniel Scally
Date: Thu Mar 2 10:26:11 2023 +0000
platform/x86: int3472: Add GPIOs to Surface Go 3 Board data
[ Upstream commit e8059d393158e927e36898aca89986a52025b9f3 ]
Add the INT347E GPIO lookup table to the board data for the Surface
Go 3. This is necessary to allow the ov7251 IR camera to probe
properly on that platform.
Signed-off-by: Daniel Scally
Link: https://lore.kernel.org/r/20230302102611.314341-1-dan.scally@ideasonboard.com
Reviewed-by: Hans de Goede
Signed-off-by: Hans de Goede
Signed-off-by: Sasha Levin
commit af036900b1093a79b10fe309f0709147bdedd9c6
Author: Michael Kelley
Date: Mon Feb 27 08:48:34 2023 -0800
scsi: storvsc: Handle BlockSize change in Hyper-V VHD/VHDX file
[ Upstream commit 11d9874c4204a785f43d899a1ab12f9dc8d9de3e ]
Hyper-V uses a VHD or VHDX file on the host as the underlying storage for a
virtual disk. The VHD/VHDX file format is a sparse format where real disk
space on the host is assigned in chunks that the VHD/VHDX file format calls
the BlockSize. This BlockSize is not to be confused with the 512-byte (or
4096-byte) sector size of the underlying storage device. The default block
size for a new VHD/VHDX file is 32 Mbytes. When a guest VM touches any
disk space within a 32 Mbyte chunk of the VHD/VHDX file, Hyper-V allocates
32 Mbytes of real disk space for that section of the VHD/VHDX. Similarly,
if a discard operation is done that covers an entire 32 Mbyte chunk,
Hyper-V will free the real disk space for that portion of the VHD/VHDX.
This BlockSize is surfaced in Linux as the "discard\_granularity" in
/sys/block/sd/queue, which makes sense.
Hyper-V also has differencing disks that can overlay a VHD/VHDX file to
capture changes to the VHD/VHDX while preserving the original VHD/VHDX.
One example of this differencing functionality is for VM snapshots. When a
snapshot is created, a differencing disk is created. If the snapshot is
rolled back, Hyper-V can just delete the differencing disk, and the VM will
see the original disk contents at the time the snapshot was taken.
Differencing disks are used in other scenarios as well.
The BlockSize for a differencing disk defaults to 2 Mbytes, not 32 Mbytes.
The smaller default is used because changes to differencing disks are
typically scattered all over, and Hyper-V doesn't want to allocate 32
Mbytes of real disk space for a stray write here or there. The smaller
BlockSize provides more efficient use of real disk space.
When a differencing disk is added to a VHD/VHDX, Hyper-V reports
UNIT\_ATTENTION with a sense code indicating "Operating parameters have
changed", because the value of discard\_granularity should be changed to 2
Mbytes. When the differencing disk is removed, discard\_granularity should
be changed back to 32 Mbytes. However, current code simply reports a
message from scsi\_report\_sense() and the value of
/sys/block/sd/queue/discard\_granularity is not updated. The message
isn't very actionable by a sysadmin.
Fix this by having the storvsc driver check for the sense code indicating
that the underly VHD/VHDX block size has changed, and do a rescan of the
device to pick up the new discard\_granularity. With this change the entire
transition to/from differencing disks is handled automatically and
transparently, with no confusing messages being output.
Link: https://lore.kernel.org/r/1677516514-86060-1-git-send-email-mikelley@microsoft.com
Signed-off-by: Michael Kelley
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit aa11e4b6cdb403b9fdef6939550f6b36dd61624d
Author: Ranjan Kumar
Date: Tue Feb 28 06:08:35 2023 -0800
scsi: mpi3mr: Bad drive in topology results kernel crash
[ Upstream commit 8e45183978d64699df639e795235433a60f35047 ]
When the SAS Transport Layer support is enabled and a device exposed to
the OS by the driver fails INQUIRY commands, the driver frees up the memory
allocated for an internal HBA port data structure. However, in some places,
the reference to the freed memory is not cleared. When the firmware sends
the Device Info change event for the same device again, the freed memory is
accessed and that leads to memory corruption and OS crash.
Signed-off-by: Ranjan Kumar
Signed-off-by: Sreekanth Reddy
Link: https://lore.kernel.org/r/20230228140835.4075-7-ranjan.kumar@broadcom.com
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 0984628b067e0209bbda3d38617d957d8bd51989
Author: Ranjan Kumar
Date: Tue Feb 28 06:08:34 2023 -0800
scsi: mpi3mr: NVMe command size greater than 8K fails
[ Upstream commit 4f297e856a7b5da2f2c66a12e739666e23943560 ]
A wrong variable is checked while populating PRP entries in the PRP page
and this results in failure. No PRP entries in the PRP page were
successfully created and any NVMe Encapsulated commands with PRP of size
greater than 8K failed.
Signed-off-by: Ranjan Kumar
Signed-off-by: Sreekanth Reddy
Link: https://lore.kernel.org/r/20230228140835.4075-6-ranjan.kumar@broadcom.com
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 021e997cd4742dc86e8605cda754913402b6aef0
Author: Ranjan Kumar
Date: Tue Feb 28 06:08:32 2023 -0800
scsi: mpi3mr: Wait for diagnostic save during controller init
[ Upstream commit 0a319f1629495d27879b7ebf6eee62b8cf6e4c37 ]
If a controller reset operation is triggered to recover the controller from
a fault state, then wait for the snapdump to be saved in the firmware
region before proceeding to reset the controller.
Signed-off-by: Ranjan Kumar
Signed-off-by: Sreekanth Reddy
Link: https://lore.kernel.org/r/20230228140835.4075-4-ranjan.kumar@broadcom.com
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 7f75c896659a45ce14465b8bf3c0f33972b0c87a
Author: Ranjan Kumar
Date: Tue Feb 28 06:08:31 2023 -0800
scsi: mpi3mr: Driver unload crashes host when enhanced logging is enabled
[ Upstream commit 5b06a7169c59ce0c77ef8b9c82aa07c478f82aac ]
Prevent driver from trying to dereference a NULL pointer in a debug print
while removing a device during driver unload.
Signed-off-by: Ranjan Kumar
Signed-off-by: Sreekanth Reddy
Link: https://lore.kernel.org/r/20230228140835.4075-3-ranjan.kumar@broadcom.com
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 86d2c00062079c38378a6c6489ac36345d7dcba9
Author: Jakob Koschel
Date: Wed Mar 1 18:19:14 2023 +0100
scsi: lpfc: Avoid usage of list iterator variable after loop
[ Upstream commit 2850b23e9f9ae3696e472d2883ea1b43aafa884e ]
If the &epd\_pool->list is empty when executing
lpfc\_get\_io\_buf\_from\_expedite\_pool() the function would return an invalid
pointer. Even in the case if the list is guaranteed to be populated, the
iterator variable should not be used after the loop to be more robust for
future changes.
Linus proposed to avoid any use of the list iterator variable after the
loop, in the attempt to move the list iterator variable declaration into
the macro to avoid any potential misuse after the loop [1].
Link: https://lore.kernel.org/all/CAHk-=wgRr\_D8CB-D9Kg-c=EHreAsk5SqXPwr9Y7k9sA6cWXJ6w@mail.gmail.com/ [1]
Signed-off-by: Jakob Koschel
Link: https://lore.kernel.org/r/20230301-scsi-lpfc-avoid-list-iterator-after-loop-v1-1-325578ae7561@gmail.com
Reviewed-by: Justin Tee
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 908dd9a0853a88155a5a36018c7e2b32ccf20379
Author: Justin Tee
Date: Mon Feb 27 20:43:36 2023 -0800
scsi: lpfc: Check kzalloc() in lpfc\_sli4\_cgn\_params\_read()
[ Upstream commit 312320b0e0ec21249a17645683fe5304d796aec1 ]
If kzalloc() fails in lpfc\_sli4\_cgn\_params\_read(), then we rely on
lpfc\_read\_object()'s routine to NULL check pdata.
Currently, an early return error is thrown from lpfc\_read\_object() to
protect us from NULL ptr dereference, but the errno code is -ENODEV.
Change the errno code to a more appropriate -ENOMEM.
Reported-by: Kang Chen
Link: https://lore.kernel.org/all/20230226102338.3362585-1-void0red@gmail.com
Signed-off-by: Justin Tee
Link: https://lore.kernel.org/r/20230228044336.5195-1-justintee8345@gmail.com
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 5b07747e0177ea8b56e28c0c5f9b93a4dda2d70b
Author: Adrien Thierry
Date: Mon Feb 20 09:07:40 2023 -0500
scsi: ufs: core: Add soft dependency on governor\_simpleondemand
[ Upstream commit 2ebe16155dc8bd4e602cad5b5f65458d2eaa1a75 ]
The ufshcd driver uses simpleondemand governor for devfreq. Add it to the
list of ufshcd softdeps to allow userspace initramfs tools like dracut to
automatically pull the governor module into the initramfs together with UFS
drivers.
Link: https://lore.kernel.org/r/20230220140740.14379-1-athierry@redhat.com
Signed-off-by: Adrien Thierry
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 44efed9c9159a71860f726f9d3a5d607cb05f784
Author: Kang Chen
Date: Mon Feb 27 11:10:30 2023 +0800
scsi: hisi\_sas: Check devm\_add\_action() return value
[ Upstream commit 06d1a90de60208054cca15ef200138cfdbb642a9 ]
In case devm\_add\_action() fails, check it in the caller of
interrupt\_preinit\_v3\_hw().
Link: https://lore.kernel.org/r/20230227031030.893324-1-void0red@gmail.com
Signed-off-by: Kang Chen
Acked-by: Xiang Chen
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit c7761243d04ffd736c14dcaa8074be6219249855
Author: Daniel Wagner
Date: Wed Feb 8 16:20:14 2023 +0100
scsi: qla2xxx: Add option to disable FC2 Target support
[ Upstream commit 877b03795fcf29ff2e2351f7e574ecc9b9c51732 ]
Commit 44c57f205876 ("scsi: qla2xxx: Changes to support FCP2 Target") added
support for FC2 Targets. Unfortunately, there are older setups which break
with this new feature enabled.
Allow to disable it via module option.
Link: https://lore.kernel.org/r/20230208152014.109214-1-dwagner@suse.de
Signed-off-by: Daniel Wagner
Reviewed-by: Himanshu Madhani
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 42e41cd34d0615449194e5bc02c4f48130aabe55
Author: Maurizio Lombardi
Date: Tue Feb 14 15:15:56 2023 +0100
scsi: target: iscsi: Fix an error message in iscsi\_check\_key()
[ Upstream commit 6cc55c969b7ce8d85e09a636693d4126c3676c11 ]
The first half of the error message is printed by pr\_err(), the second half
is printed by pr\_debug(). The user will therefore see only the first part
of the message and will miss some useful information.
Link: https://lore.kernel.org/r/20230214141556.762047-1-mlombard@redhat.com
Signed-off-by: Maurizio Lombardi
Reviewed-by: Mike Christie
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 22ca4fe8986585654891f76a203aec0c20dcb8e5
Author: Linus Torvalds
Date: Mon Mar 6 12:15:13 2023 -0800
cpumask: fix incorrect cpumask scanning result checks
[ Upstream commit 8ca09d5fa3549d142c2080a72a4c70ce389163cd ]
It turns out that commit 596ff4a09b89 ("cpumask: re-introduce
constant-sized cpumask optimizations") exposed a number of cases of
drivers not checking the result of "cpumask\_next()" and friends
correctly.
The documented correct check for "no more cpus in the cpumask" is to
check for the result being equal or larger than the number of possible
CPU ids, exactly \_because\_ we've always done those constant-sized
cpumask scans using a widened type before. So the return value of a
cpumask scan should be checked with
if (cpu >= nr\_cpu\_ids)
...
because the cpumask scan did not necessarily stop exactly \*at\* that
maximum CPU id.
But a few cases ended up instead using checks like
if (cpu == nr\_cpumask\_bits)
...
which used that internal "widened" number of bits. And that used to
work pretty much by accident (ok, in this case "by accident" is simply
because it matched the historical internal implementation of the cpumask
scanning, so it was more of a "intentionally using implementation
details rather than an accident").
But the extended constant-sized optimizations then did that internal
implementation differently, and now that code that did things wrong but
matched the old implementation no longer worked at all.
Which then causes subsequent odd problems due to using what ends up
being an invalid CPU ID.
Most of these cases require either unusual hardware or special uses to
hit, but the random.c one triggers quite easily.
All you really need is to have a sufficiently small CONFIG\_NR\_CPUS value
for the bit scanning optimization to be triggered, but not enough CPUs
to then actually fill that widened cpumask. At that point, the cpumask
scanning will return the NR\_CPUS constant, which is \_not\_ the same as
nr\_cpumask\_bits.
This just does the mindless fix with
sed -i 's/== nr\_cpumask\_bits/>= nr\_cpu\_ids/'
to fix the incorrect uses.
The ones in the SCSI lpfc driver in particular could probably be fixed
more cleanly by just removing that repeated pattern entirely, but I am
not emptionally invested enough in that driver to care.
Reported-and-tested-by: Guenter Roeck
Link: https://lore.kernel.org/lkml/481b19b5-83a0-4793-b4fd-194ad7b978c3@roeck-us.net/
Reported-and-tested-by: Geert Uytterhoeven
Link: https://lore.kernel.org/lkml/CAMuHMdUKo\_Sf7TjKzcNDa8Ve+6QrK+P8nSQrSQ=6LTRmcBKNww@mail.gmail.com/
Reported-by: Vernon Yang
Link: https://lore.kernel.org/lkml/20230306160651.2016767-1-vernon2gm@gmail.com/
Cc: Yury Norov
Cc: Jason A. Donenfeld
Signed-off-by: Linus Torvalds
Signed-off-by: Sasha Levin
commit 37564ee2f6f77690d37a43b99fbf4025b163a0d0
Author: Lorenz Bauer
Date: Mon Mar 6 11:21:38 2023 +0000
selftests/bpf: check that modifier resolves after pointer
[ Upstream commit dfdd608c3b365f0fd49d7e13911ebcde06b9865b ]
Add a regression test that ensures that a VAR pointing at a
modifier which follows a PTR (or STRUCT or ARRAY) is resolved
correctly by the datasec validator.
Signed-off-by: Lorenz Bauer
Link: https://lore.kernel.org/r/20230306112138.155352-3-lmb@isovalent.com
Signed-off-by: Martin KaFai Lau
Signed-off-by: Sasha Levin
commit ec15405b80fc15ffc87a23d01378ae061c1aba07
Author: Michael Schmitz
Date: Wed Mar 1 15:11:07 2023 +1300
m68k: Only force 030 bus error if PC not in exception table
[ Upstream commit e36a82bebbf7da814530d5a179bef9df5934b717 ]
\_\_get\_kernel\_nofault() does copy data in supervisor mode when
forcing a task backtrace log through /proc/sysrq\_trigger.
This is expected cause a bus error exception on e.g. NULL
pointer dereferencing when logging a kernel task has no
workqueue associated. This bus error ought to be ignored.
Our 030 bus error handler is ill equipped to deal with this:
Whenever ssw indicates a kernel mode access on a data fault,
we don't even attempt to handle the fault and instead always
send a SEGV signal (or panic). As a result, the check
for exception handling at the fault PC (buried in
send\_sig\_fault() which gets called from do\_page\_fault()
eventually) is never used.
In contrast, both 040 and 060 access error handlers do not
care whether a fault happened on supervisor mode access,
and will call do\_page\_fault() on those, ultimately honoring
the exception table.
Add a check in bus\_error030 to call do\_page\_fault() in case
we do have an entry for the fault PC in our exception table.
I had attempted a fix for this earlier in 2019 that did rely
on testing pagefault\_disabled() (see link below) to achieve
the same thing, but this patch should be more generic.
Tested on 030 Atari Falcon.
Reported-by: Eero Tamminen
Link: https://lore.kernel.org/r/alpine.LNX.2.21.1904091023540.25@nippy.intranet
Link: https://lore.kernel.org/r/63130691-1984-c423-c1f2-73bfd8d3dcd3@gmail.com
Signed-off-by: Michael Schmitz
Reviewed-by: Geert Uytterhoeven
Link: https://lore.kernel.org/r/20230301021107.26307-1-schmitzmic@gmail.com
Signed-off-by: Geert Uytterhoeven
Signed-off-by: Sasha Levin
commit 672eb06229fde604131123807abae7c46c4ff4c2
Author: Kars de Jong
Date: Thu Feb 23 12:23:49 2023 +0100
m68k: mm: Fix systems with memory at end of 32-bit address space
[ Upstream commit 0d9fad91abfd723ea5070a46d98a9f4496c93ba9 ]
The calculation of end addresses of memory chunks overflowed to 0 when
a memory chunk is located at the end of 32-bit address space.
This is the case for the HP300 architecture.
Link: https://lore.kernel.org/linux-m68k/CACz-3rhUo5pgNwdWHaPWmz+30Qo9xCg70wNxdf7o5x-6tXq8QQ@mail.gmail.com/
Signed-off-by: Kars de Jong
Reviewed-by: Geert Uytterhoeven
Link: https://lore.kernel.org/r/20230223112349.26675-1-jongk@linux-m68k.org
Signed-off-by: Geert Uytterhoeven
Signed-off-by: Sasha Levin
commit d3ce3afd9f791dd1b7daedfcf8c396b60af5dec0
Author: Reka Norman
Date: Mon Feb 27 13:49:38 2023 +1100
HID: intel-ish-hid: ipc: Fix potential use-after-free in work function
[ Upstream commit 8ae2f2b0a28416ed2f6d8478ac8b9f7862f36785 ]
When a reset notify IPC message is received, the ISR schedules a work
function and passes the ISHTP device to it via a global pointer
ishtp\_dev. If ish\_probe() fails, the devm-managed device resources
including ishtp\_dev are freed, but the work is not cancelled, causing a
use-after-free when the work function tries to access ishtp\_dev. Use
devm\_work\_autocancel() instead, so that the work is automatically
cancelled if probe fails.
Signed-off-by: Reka Norman
Acked-by: Srinivas Pandruvada
Signed-off-by: Jiri Kosina
Signed-off-by: Sasha Levin
commit 7dea60d60f80af011fbfea493049bfe19afe9911
Author: Rafał Szalecki
Date: Wed Mar 1 02:23:56 2023 +0100
HID: logitech-hidpp: Add support for Logitech MX Master 3S mouse
[ Upstream commit db50f7a3983f0154e730f1147ef729e0c5c2f90c ]
Add signature for the Logitech MX Master 3S mouse over Bluetooth.
Signed-off-by: Rafał Szalecki
Reviewed-by: Bastien Nocera
Signed-off-by: Jiri Kosina
Signed-off-by: Sasha Levin
commit 918944526a386f186dd818ea6b0bcbed75d8c16b
Author: Alexander Aring
Date: Thu Feb 16 23:25:04 2023 -0500
ca8210: fix mac\_len negative array access
[ Upstream commit 6c993779ea1d0cccdb3a5d7d45446dd229e610a3 ]
This patch fixes a buffer overflow access of skb->data if
ieee802154\_hdr\_peek\_addrs() fails.
Reported-by: lianhui tang
Signed-off-by: Alexander Aring
Link: https://lore.kernel.org/r/20230217042504.3303396-1-aahringo@redhat.com
Signed-off-by: Stefan Schmidt
Signed-off-by: Sasha Levin
commit 9e9a7d211f9e8ec91136339ab91e2e7e48ab7afe
Author: Danny Kaehn
Date: Fri Feb 10 11:00:44 2023 -0600
HID: cp2112: Fix driver not registering GPIO IRQ chip as threaded
[ Upstream commit 37f5b858a66543b2b67c0288280af623985abc29 ]
The CP2112 generates interrupts from a polling routine on a thread,
and can only support threaded interrupts. This patch configures the
gpiochip irq chip with this flag, disallowing consumers to request
a hard IRQ from this driver, which resulted in a segfault previously.
Signed-off-by: Danny Kaehn
Link: https://lore.kernel.org/r/20230210170044.11835-1-kaehndan@gmail.com
Signed-off-by: Benjamin Tissoires
Signed-off-by: Sasha Levin
commit 93b3060e8380477a1da285f8a0a02c8f35e90691
Author: Alexandr Sapozhnikov
Date: Wed Feb 15 20:15:49 2023 +0300
drm/cirrus: NULL-check pipe->plane.state->fb in cirrus\_pipe\_update()
[ Upstream commit 7245e629dcaaf308f1868aeffa218e9849c77893 ]
After having been compared to NULL value at cirrus.c:455, pointer
'pipe->plane.state->fb' is passed as 1st parameter in call to function
'cirrus\_fb\_blit\_rect' at cirrus.c:461, where it is dereferenced at
cirrus.c:316.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
v2:
\* aligned commit message to line-length limits
Signed-off-by: Alexandr Sapozhnikov
Reviewed-by: Thomas Zimmermann
Signed-off-by: Thomas Zimmermann
Link: https://patchwork.freedesktop.org/patch/msgid/20230215171549.16305-1-alsp705@gmail.com
Signed-off-by: Sasha Levin
commit 2fb0a9a7fba5aab5dd786740c7aac69805c82f7e
Author: Alexandre Ghiti
Date: Tue Mar 16 15:34:20 2021 -0400
riscv: Bump COMMAND\_LINE\_SIZE value to 1024
[ Upstream commit 61fc1ee8be26bc192d691932b0a67eabee45d12f ]
Increase COMMAND\_LINE\_SIZE as the current default value is too low
for syzbot kernel command line.
There has been considerable discussion on this patch that has led to a
larger patch set removing COMMAND\_LINE\_SIZE from the uapi headers on all
ports. That's not quite done yet, but it's gotten far enough we're
confident this is not a uABI change so this is safe.
Reported-by: Dmitry Vyukov
Signed-off-by: Alexandre Ghiti
Link: https://lore.kernel.org/r/20210316193420.904-1-alex@ghiti.fr
[Palmer: it's not uabi]
Link: https://lore.kernel.org/linux-riscv/874b8076-b0d1-4aaa-bcd8-05d523060152@app.fastmail.com/#t
Signed-off-by: Palmer Dabbelt
Signed-off-by: Sasha Levin
commit b94fd2d44bb05232c46e725e9c483a2fadad6c17
Author: Mario Limonciello
Date: Tue Feb 28 16:11:28 2023 -0600
ACPI: x86: utils: Add Cezanne to the list for forcing StorageD3Enable
[ Upstream commit e2a56364485e7789e7b8f342637c7f3a219f7ede ]
commit 018d6711c26e4 ("ACPI: x86: Add a quirk for Dell Inspiron 14 2-in-1
for StorageD3Enable") introduced a quirk to allow a system with ambiguous
use of \_ADR 0 to force StorageD3Enable.
It was reported that several more Dell systems suffered the same symptoms.
As the list is continuing to grow but these are all Cezanne systems,
instead add Cezanne to the CPU list to apply the StorageD3Enable property
and remove the whole list.
It was also reported that an HP system only has StorageD3Enable on the ACPI
device for the first NVME disk, not the second.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=217003
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=216773
Reported-by: David Alvarez Lombardi
Reported-by: dbilios@stdio.gr
Reported-and-tested-by: Elvis Angelaccio
Tested-by: victor.bonnelle@proton.me
Tested-by: hurricanepootis@protonmail.com
Signed-off-by: Mario Limonciello
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
commit baf43e44538d0186f998c0500ed9badf66265711
Author: Mario Limonciello
Date: Thu Feb 23 14:26:22 2023 -0600
ACPI: x86: Drop quirk for HP Elitebook
[ Upstream commit e32d546c483a2a0f607687f5b521c2a2f942ffbe ]
There was a quirk in `acpi/x86/s2idle.c` for an HP Elitebook G9
platforms to force AMD GUID codepath instead of Microsoft codepath.
This was due to a bug with WCN6855 WLAN firmware interaction with
the system.
This bug is fixed by WCN6855 firmware:
WLAN.HSP.1.1-03125-QCAHSPSWPL\_V1\_V2\_SILICONZ\_LITE-3.6510.23
Remove the quirk as it's no longer necessary with this firmware.
Link: https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git/commit/?id=c7a57ef688f7d99d8338a5d8edddc8836ff0e6de
Tested-by: Anson Tsao
Signed-off-by: Mario Limonciello
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
commit 64d03461ec165cf245b8e0ece26a6278d3318151
Author: Duc Anh Le
Date: Tue Feb 28 00:49:21 2023 +0100
ASoC: amd: yc: Add DMI entries to support HP OMEN 16-n0xxx (8A43)
[ Upstream commit d52279d5c9204a041e9ba02a66a353573b2f96e4 ]
This model requires an additional detection quirk to enable the internal microphone.
Signed-off-by: Duc Anh Le
Link: https://lore.kernel.org/r/20230227234921.7784-1-lub.the.studio@gmail.com
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
commit 1a36345d2747d87b5a542387a9d1f4fc9d786470
Author: Dharageswari.R
Date: Mon Feb 20 10:06:52 2023 +0200
ASoC: Intel: sof\_rt5682: Add quirk for Rex board with mx98360a amplifier
[ Upstream commit 7e43b75d6a062197b3bf39ddd1b10ce2e2d2a9b0 ]
Add mtl\_mx98360a\_rt5682 driver data for Chrome Rex board support.
Signed-off-by: Dharageswari.R
Reviewed-by: Pierre-Louis Bossart
Reviewed-by: Ranjani Sridharan
Signed-off-by: Peter Ujfalusi
Link: https://lore.kernel.org/r/20230220080652.23136-1-peter.ujfalusi@linux.intel.com
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
commit 899590dacd22b1b97b6c091bece12ccec1968e02
Author: Joseph Hunkeler
Date: Thu Feb 16 10:50:07 2023 -0500
ASoC: amd: yp: Add OMEN by HP Gaming Laptop 16z-n000 to quirks
[ Upstream commit 22ce6843abec19270bf69b176d7ee0a4ef781da5 ]
Enables display microphone on the HP OMEN 16z-n000 (8A42) laptop
Signed-off-by: Joseph Hunkeler
Link: https://lore.kernel.org/r/20230216155007.26143-1-jhunkeler@gmail.com
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
commit 4dff2d2bc5d670172725e4733c69b4b862c08119
Author: Tom Rix
Date: Wed Mar 15 18:04:50 2023 -0400
thunderbolt: Rename shadowed variables bit to interrupt\_bit and auto\_clear\_bit
commit 58cdfe6f58b35f17f56386f5fcf937168a423ad1 upstream.
cppcheck reports
drivers/thunderbolt/nhi.c:74:7: style: Local variable 'bit' shadows outer variable [shadowVariable]
int bit;
^
drivers/thunderbolt/nhi.c:66:6: note: Shadowed declaration
int bit = ring\_interrupt\_index(ring) & 31;
^
drivers/thunderbolt/nhi.c:74:7: note: Shadow variable
int bit;
^
For readablity rename the outer to interrupt\_bit and the innner
to auto\_clear\_bit.
Fixes: 468c49f44759 ("thunderbolt: Disable interrupt auto clear for ring")
Cc: stable@vger.kernel.org
Signed-off-by: Tom Rix
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit 0b521f2cce11f2e0449e206ce4859b3b8b4b88f9
Author: Mario Limonciello
Date: Fri Mar 10 11:20:49 2023 -0600
thunderbolt: Use const qualifier for `ring\_interrupt\_index`
commit 1716efdb07938bd6510e1127d02012799112c433 upstream.
`ring\_interrupt\_index` doesn't change the data for `ring` so mark it as
const. This is needed by the following patch that disables interrupt
auto clear for rings.
Cc: Sanju Mehta
Cc: stable@vger.kernel.org
Signed-off-by: Mario Limonciello
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit 31b1604c085573875bd7bb7babfae416c1e7bc91
Author: Gil Fine
Date: Fri Mar 3 00:17:24 2023 +0200
thunderbolt: Add missing UNSET\_INBOUND\_SBTX for retimer access
commit cd0c1e582b055dea615001b8bd8eccaf6f69f7ce upstream.
According to USB4 retimer specification, the process of firmware update
sequence requires issuing a SET\_INBOUND\_SBTX port operation that later
shall be followed by UNSET\_INBOUND\_SBTX port operation. This last step
is not currently issued by the driver but it is necessary to make sure
the retimers are put back to passthrough mode even during enumeration.
If this step is missing the link may not come up properly after
soft-reboot for example.
For this reason issue UNSET\_INBOUND\_SBTX after SET\_INBOUND\_SBTX for
enumeration and also when the NVM upgrade is run.
Reported-by: Christian Schaubschläger
Link: https://lore.kernel.org/linux-usb/b556f5ed-5ee8-9990-9910-afd60db93310@gmx.at/
Cc: stable@vger.kernel.org
Signed-off-by: Gil Fine
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit 428f6058710589340f9fb2b933b72aa6342d7105
Author: Mario Limonciello
Date: Fri Mar 10 11:20:50 2023 -0600
thunderbolt: Disable interrupt auto clear for rings
commit 468c49f44759720a312e52d44a71c3949ed63d7c upstream.
When interrupt auto clear is programmed, any read to the interrupt
status register will clear all interrupts. If two interrupts have
come in before one can be serviced then this will cause lost interrupts.
On AMD USB4 routers this has manifested in odd problems particularly
with long strings of control tranfers such as reading the DROM via bit
banging.
Instead of clearing interrupts automatically, clear the bit corresponding
to the given ring's interrupt in the ISR.
Fixes: 7a1808f82a37 ("thunderbolt: Handle ring interrupt by reading interrupt status register")
Cc: Sanju Mehta
Cc: stable@vger.kernel.org
Tested-by: Anson Tsao
Signed-off-by: Mario Limonciello
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit 0b357b360e671688f9bf38ff94300515b68bc247
Author: Mika Westerberg
Date: Fri Mar 3 11:25:08 2023 +0200
thunderbolt: Fix memory leak in margining
commit acec726473822bc6b585961f4ca2a11fa7f28341 upstream.
Memory for the usb4->margining needs to be relased for the upstream port
of the router as well, even though the debugfs directory gets released
with the router device removal. Fix this.
Fixes: d0f1e0c2a699 ("thunderbolt: Add support for receiver lane margining")
Cc: stable@vger.kernel.org
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit fe577c86d7cdefa35dbd5551d3e28615ae5170fa
Author: Sanjay R Mehta
Date: Tue Feb 14 13:13:50 2023 -0600
thunderbolt: Add quirk to disable CLx
commit 7af9da8ce8f9a16221ecd8ba4280582f5bd452fc upstream.
Add QUIRK\_NO\_CLX to disable the CLx state for hardware which
doesn't supports it.
AMD Yellow Carp and Pink Sardine don't support CLx state,
hence disabling it using QUIRK\_NO\_CLX.
Cc: stable@vger.kernel.org
Signed-off-by: Sanjay R Mehta
Signed-off-by: Basavaraj Natikar
[mw: added debug log when the quirk is run]
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit 209a4321e42dcb15d04afd510d1276413d7cb8af
Author: Mika Westerberg
Date: Fri Feb 3 15:55:41 2023 +0200
thunderbolt: Call tb\_check\_quirks() after initializing adapters
commit d2d6ddf188f609861489d5d188d545856a3ed399 upstream.
In order to apply quirks based on certain adapter types move call to
tb\_check\_quirks() happen after the adapters are initialized. This should
not affect the existing quirks.
Cc: stable@vger.kernel.org
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit d6096086eacebf214a3adf8f3386017dcc1d03a0
Author: Mika Westerberg
Date: Tue Dec 27 11:55:26 2022 +0200
thunderbolt: Use scale field when allocating USB3 bandwidth
commit c82510b1d87bdebfe916048857d2ef46f1778aa5 upstream.
When tunneling aggregated USB3 (20 Gb/s) the bandwidth values that are
programmed to the ADP\_USB3\_CS\_2 go higher than 4096 and that does not
fit anymore to the 12-bit field. Fix this by scaling the value using
the scale field accordingly.
Fixes: 3b1d8d577ca8 ("thunderbolt: Implement USB3 bandwidth negotiation routines")
Cc: stable@vger.kernel.org
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit de2f47aacdc5dbc9d0e41f3f641b38c6ee059f87
Author: Yaroslav Furman
Date: Sun Mar 12 11:07:45 2023 +0200
uas: Add US\_FL\_NO\_REPORT\_OPCODES for JMicron JMS583Gen 2
commit a37eb61b6ec064ac794b8a1e89fd33eb582fe51d upstream.
Just like other JMicron JMS5xx enclosures, it chokes on report-opcodes,
let's avoid them.
Signed-off-by: Yaroslav Furman
Cc: stable
Link: https://lore.kernel.org/r/20230312090745.47962-1-yaro330@gmail.com
Signed-off-by: Greg Kroah-Hartman
commit 73227237b20c91ec5fd31579cf7d353e64a9d52c
Author: Steve French
Date: Thu Mar 23 16:20:02 2023 -0500
smb3: fix unusable share after force unmount failure
commit 491eafce1a51c457701351a4bf40733799745314 upstream.
If user does forced unmount ("umount -f") while files are still open
on the share (as was seen in a Kubernetes example running on SMB3.1.1
mount) then we were marking the share as "TID\_EXITING" in umount\_begin()
which caused all subsequent operations (except write) to fail ... but
unfortunately when umount\_begin() is called we do not know yet that
there are open files or active references on the share that would prevent
unmount from succeeding. Kubernetes had example when they were doing
umount -f when files were open which caused the share to become
unusable until the files were closed (and the umount retried).
Fix this so that TID\_EXITING is not set until we are about to send
the tree disconnect (not at the beginning of forced umounts in
umount\_begin) so that if "umount -f" fails (due to open files or
references) the mount is still usable.
Cc: stable@vger.kernel.org
Reviewed-by: Shyam Prasad N
Reviewed-by: Paulo Alcantara (SUSE)
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 111d6ecaff7957ecf4b7bf926f19382ffd0c115c
Author: Steve French
Date: Thu Mar 23 15:10:26 2023 -0500
smb3: lower default deferred close timeout to address perf regression
commit 7e0e76d99079be13c9961dde7c93b2d1ee665af4 upstream.
Performance tests with large number of threads noted that the change
of the default closetimeo (deferred close timeout between when
close is done by application and when client has to send the close
to the server), to 5 seconds from 1 second, significantly degraded
perf in some cases like this (in the filebench example reported,
the stats show close requests on the wire taking twice as long,
and 50% regression in filebench perf). This is stil configurable
via mount parm closetimeo, but to be safe, decrease default back
to its previous value of 1 second.
Reported-by: Yin Fengwei
Reported-by: kernel test robot
Link: https://lore.kernel.org/lkml/997614df-10d4-af53-9571-edec36b0e2f3@intel.com/
Fixes: 5efdd9122eff ("smb3: allow deferred close timeout to be configurable")
Cc: stable@vger.kernel.org # 6.0+
Tested-by: Yin Fengwei
Reviewed-by: Paulo Alcantara (SUSE)
Reviewed-by: Shyam Prasad N
Signed-off-by: Steve French
Signed-off-by: Greg Kroah-Hartman
commit 415d614344a4f1bbddf55d724fc7eb9ef4b39aad
Author: Nilesh Javali
Date: Sun Mar 12 21:37:10 2023 -0700
scsi: qla2xxx: Perform lockless command completion in abort path
commit 0367076b0817d5c75dfb83001ce7ce5c64d803a9 upstream.
While adding and removing the controller, the following call trace was
observed:
WARNING: CPU: 3 PID: 623596 at kernel/dma/mapping.c:532 dma\_free\_attrs+0x33/0x50
CPU: 3 PID: 623596 Comm: sh Kdump: loaded Not tainted 5.14.0-96.el9.x86\_64 #1
RIP: 0010:dma\_free\_attrs+0x33/0x50
Call Trace:
qla2x00\_async\_sns\_sp\_done+0x107/0x1b0 [qla2xxx]
qla2x00\_abort\_srb+0x8e/0x250 [qla2xxx]
? ql\_dbg+0x70/0x100 [qla2xxx]
\_\_qla2x00\_abort\_all\_cmds+0x108/0x190 [qla2xxx]
qla2x00\_abort\_all\_cmds+0x24/0x70 [qla2xxx]
qla2x00\_abort\_isp\_cleanup+0x305/0x3e0 [qla2xxx]
qla2x00\_remove\_one+0x364/0x400 [qla2xxx]
pci\_device\_remove+0x36/0xa0
\_\_device\_release\_driver+0x17a/0x230
device\_release\_driver+0x24/0x30
pci\_stop\_bus\_device+0x68/0x90
pci\_stop\_and\_remove\_bus\_device\_locked+0x16/0x30
remove\_store+0x75/0x90
kernfs\_fop\_write\_iter+0x11c/0x1b0
new\_sync\_write+0x11f/0x1b0
vfs\_write+0x1eb/0x280
ksys\_write+0x5f/0xe0
do\_syscall\_64+0x5c/0x80
? do\_user\_addr\_fault+0x1d8/0x680
? do\_syscall\_64+0x69/0x80
? exc\_page\_fault+0x62/0x140
? asm\_exc\_page\_fault+0x8/0x30
entry\_SYSCALL\_64\_after\_hwframe+0x44/0xae
The command was completed in the abort path during driver unload with a
lock held, causing the warning in abort path. Hence complete the command
without any lock held.
Reported-by: Lin Li
Tested-by: Lin Li
Cc: stable@vger.kernel.org
Signed-off-by: Nilesh Javali
Link: https://lore.kernel.org/r/20230313043711.13500-2-njavali@marvell.com
Reviewed-by: Himanshu Madhani
Reviewed-by: John Meneghini
Signed-off-by: Martin K. Petersen
Signed-off-by: Greg Kroah-Hartman
commit ffd7831841d3c56c655531fc8c5acafaaf20e1bb
Author: Quinn Tran
Date: Sun Mar 12 21:37:11 2023 -0700
scsi: qla2xxx: Synchronize the IOCB count to be in order
commit d3affdeb400f3adc925bd996f3839481f5291839 upstream.
A system hang was observed with the following call trace:
BUG: kernel NULL pointer dereference, address: 0000000000000000
PGD 0 P4D 0
Oops: 0000 [#1] PREEMPT SMP NOPTI
CPU: 15 PID: 86747 Comm: nvme Kdump: loaded Not tainted 6.2.0+ #1
Hardware name: Dell Inc. PowerEdge R6515/04F3CJ, BIOS 2.7.3 03/31/2022
RIP: 0010:\_\_wake\_up\_common+0x55/0x190
Code: 41 f6 01 04 0f 85 b2 00 00 00 48 8b 43 08 4c 8d
40 e8 48 8d 43 08 48 89 04 24 48 89 c6\
49 8d 40 18 48 39 c6 0f 84 e9 00 00 00 <49> 8b 40 18 89 6c 24 14 31
ed 4c 8d 60 e8 41 8b 18 f6 c3 04 75 5d
RSP: 0018:ffffb05a82afbba0 EFLAGS: 00010082
RAX: 0000000000000000 RBX: ffff8f9b83a00018 RCX: 0000000000000000
RDX: 0000000000000001 RSI: ffff8f9b83a00020 RDI: ffff8f9b83a00018
RBP: 0000000000000001 R08: ffffffffffffffe8 R09: ffffb05a82afbbf8
R10: 70735f7472617473 R11: 5f30307832616c71 R12: 0000000000000001
R13: 0000000000000003 R14: 0000000000000000 R15: 0000000000000000
FS: 00007f815cf4c740(0000) GS:ffff8f9eeed80000(0000)
knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000000000000 CR3: 000000010633a000 CR4: 0000000000350ee0
Call Trace:
\_\_wake\_up\_common\_lock+0x83/0xd0
qla\_nvme\_ls\_req+0x21b/0x2b0 [qla2xxx]
\_\_nvme\_fc\_send\_ls\_req+0x1b5/0x350 [nvme\_fc]
nvme\_fc\_xmt\_disconnect\_assoc+0xca/0x110 [nvme\_fc]
nvme\_fc\_delete\_association+0x1bf/0x220 [nvme\_fc]
? nvme\_remove\_namespaces+0x9f/0x140 [nvme\_core]
nvme\_do\_delete\_ctrl+0x5b/0xa0 [nvme\_core]
nvme\_sysfs\_delete+0x5f/0x70 [nvme\_core]
kernfs\_fop\_write\_iter+0x12b/0x1c0
vfs\_write+0x2a3/0x3b0
ksys\_write+0x5f/0xe0
do\_syscall\_64+0x5c/0x90
? syscall\_exit\_work+0x103/0x130
? syscall\_exit\_to\_user\_mode+0x12/0x30
? do\_syscall\_64+0x69/0x90
? exit\_to\_user\_mode\_loop+0xd0/0x130
? exit\_to\_user\_mode\_prepare+0xec/0x100
? syscall\_exit\_to\_user\_mode+0x12/0x30
? do\_syscall\_64+0x69/0x90
? syscall\_exit\_to\_user\_mode+0x12/0x30
? do\_syscall\_64+0x69/0x90
entry\_SYSCALL\_64\_after\_hwframe+0x72/0xdc
RIP: 0033:0x7f815cd3eb97
The IOCB counts are out of order and that would block any commands from
going out and subsequently hang the system. Synchronize the IOCB count to
be in correct order.
Fixes: 5f63a163ed2f ("scsi: qla2xxx: Fix exchange oversubscription for management commands")
Cc: stable@vger.kernel.org
Signed-off-by: Quinn Tran
Signed-off-by: Nilesh Javali
Link: https://lore.kernel.org/r/20230313043711.13500-3-njavali@marvell.com
Reviewed-by: Himanshu Madhani
Reviewed-by: John Meneghini
Tested-by: Lin Li
Signed-off-by: Martin K. Petersen
Signed-off-by: Greg Kroah-Hartman
commit d3e8382be156989a573852df0be2d314e4f26ed3
Author: Frank Crawford
Date: Sat Mar 18 19:05:42 2023 +1100
hwmon (it87): Fix voltage scaling for chips with 10.9mV ADCs
[ Upstream commit 968b66ffeb7956acc72836a7797aeb7b2444ec51 ]
Fix voltage scaling for chips that have 10.9mV ADCs, where scaling was
not performed.
Fixes: ead8080351c9 ("hwmon: (it87) Add support for IT8732F")
Signed-off-by: Frank Crawford
Link: https://lore.kernel.org/r/20230318080543.1226700-2-frank@crawford.emu.id.au
[groeck: Update subject and description to focus on bug fix]
Signed-off-by: Guenter Roeck
Signed-off-by: Sasha Levin
commit 24b97dd688983b235e491a9ae8d1dbb485e9af4c
Author: Phinex Hung
Date: Tue Mar 21 14:02:23 2023 +0800
hwmon: fix potential sensor registration fail if of\_node is missing
[ Upstream commit 2315332efcbe7124252f080e03b57d3d2f1f4771 ]
It is not sufficient to check of\_node in current device.
In some cases, this would cause the sensor registration to fail.
This patch looks for device's ancestors to find a valid of\_node if any.
Fixes: d560168b5d0f ("hwmon: (core) New hwmon registration API")
Signed-off-by: Phinex Hung
Link: https://lore.kernel.org/r/20230321060224.3819-1-phinex@realtek.com
Signed-off-by: Guenter Roeck
Signed-off-by: Sasha Levin
commit 4d13a4f0238357f8ea2308b2c9cabb348ec83450
Author: Frederic Weisbecker
Date: Wed Mar 15 19:43:43 2023 +0000
entry/rcu: Check TIF\_RESCHED \_after\_ delayed RCU wake-up
[ Upstream commit b416514054810cf2d2cc348ae477cea619b64da7 ]
RCU sometimes needs to perform a delayed wake up for specific kthreads
handling offloaded callbacks (RCU\_NOCB). These wakeups are performed
by timers and upon entry to idle (also to guest and to user on nohz\_full).
However the delayed wake-up on kernel exit is actually performed after
the thread flags are fetched towards the fast path check for work to
do on exit to user. As a result, and if there is no other pending work
to do upon that kernel exit, the current task will resume to userspace
with TIF\_RESCHED set and the pending wake up ignored.
Fix this with fetching the thread flags \_after\_ the delayed RCU-nocb
kthread wake-up.
Fixes: 47b8ff194c1f ("entry: Explicitly flush pending rcuog wakeup before last rescheduling point")
Signed-off-by: Frederic Weisbecker
Signed-off-by: Paul E. McKenney
Signed-off-by: Joel Fernandes (Google)
Signed-off-by: Thomas Gleixner
Link: https://lore.kernel.org/r/20230315194349.10798-3-joel@joelfernandes.org
Signed-off-by: Sasha Levin
commit 9d4c7b1f12e101d6d6253092588b127416ddfb6c
Author: Breno Leitao
Date: Tue Mar 21 04:33:38 2023 -0700
perf/x86/amd/core: Always clear status for idx
[ Upstream commit 263f5ecaf7080513efc248ec739b6d9e00f4129f ]
The variable 'status' (which contains the unhandled overflow bits) is
not being properly masked in some cases, displaying the following
warning:
WARNING: CPU: 156 PID: 475601 at arch/x86/events/amd/core.c:972 amd\_pmu\_v2\_handle\_irq+0x216/0x270
This seems to be happening because the loop is being continued before
the status bit being unset, in case x86\_perf\_event\_set\_period()
returns 0. This is also causing an inconsistency because the "handled"
counter is incremented, but the status bit is not cleaned.
Move the bit cleaning together above, together when the "handled"
counter is incremented.
Fixes: 7685665c390d ("perf/x86/amd/core: Add PerfMonV2 overflow handling")
Signed-off-by: Breno Leitao
Signed-off-by: Peter Zijlstra (Intel)
Reviewed-by: Sandipan Das
Link: https://lore.kernel.org/r/20230321113338.1669660-1-leitao@debian.org
Signed-off-by: Sasha Levin
commit c90dc514c2e2be786159c8c2a08111fad82b3482
Author: Josh Poimboeuf
Date: Sat Feb 25 16:01:36 2023 -0800
entry: Fix noinstr warning in \_\_enter\_from\_user\_mode()
[ Upstream commit f87d28673b71b35b248231a2086f9404afbb7f28 ]
\_\_enter\_from\_user\_mode() is triggering noinstr warnings with
CONFIG\_DEBUG\_PREEMPT due to its call of preempt\_count\_add() via
ct\_state().
The preemption disable isn't needed as interrupts are already disabled.
And the context\_tracking\_enabled() check in ct\_state() also isn't needed
as that's already being done by the CT\_WARN\_ON().
Just use \_\_ct\_state() instead.
Fixes the following warnings:
vmlinux.o: warning: objtool: enter\_from\_user\_mode+0xba: call to preempt\_count\_add() leaves .noinstr.text section
vmlinux.o: warning: objtool: syscall\_enter\_from\_user\_mode+0xf9: call to preempt\_count\_add() leaves .noinstr.text section
vmlinux.o: warning: objtool: syscall\_enter\_from\_user\_mode\_prepare+0xc7: call to preempt\_count\_add() leaves .noinstr.text section
vmlinux.o: warning: objtool: irqentry\_enter\_from\_user\_mode+0xba: call to preempt\_count\_add() leaves .noinstr.text section
Fixes: 171476775d32 ("context\_tracking: Convert state to atomic\_t")
Signed-off-by: Josh Poimboeuf
Signed-off-by: Thomas Gleixner
Link: https://lore.kernel.org/r/d8955fa6d68dc955dda19baf13ae014ae27926f5.1677369694.git.jpoimboe@kernel.org
Signed-off-by: Sasha Levin
commit a0d8644784f73fa39f57f72f374eefaba2bf48a0
Author: Tzung-Bi Shih
Date: Fri Mar 24 09:06:58 2023 +0800
platform/chrome: cros\_ec\_chardev: fix kernel data leak from ioctl
[ Upstream commit b20cf3f89c56b5f6a38b7f76a8128bf9f291bbd3 ]
It is possible to peep kernel page's data by providing larger `insize`
in struct cros\_ec\_command[1] when invoking EC host commands.
Fix it by using zeroed memory.
[1]: https://elixir.bootlin.com/linux/v6.2/source/include/linux/platform\_data/cros\_ec\_proto.h#L74
Fixes: eda2e30c6684 ("mfd / platform: cros\_ec: Miscellaneous character device to talk with the EC")
Signed-off-by: Tzung-Bi Shih
Reviewed-by: Guenter Roeck
Link: https://lore.kernel.org/r/20230324010658.1082361-1-tzungbi@kernel.org
Signed-off-by: Sasha Levin
commit 8497222b22b591c6b2d106e0e3c1672ffe4e10e0
Author: Sungwoo Kim
Date: Mon Mar 20 21:50:18 2023 -0400
Bluetooth: HCI: Fix global-out-of-bounds
[ Upstream commit bce56405201111807cc8e4f47c6de3e10b17c1ac ]
To loop a variable-length array, hci\_init\_stage\_sync(stage) considers
that stage[i] is valid as long as stage[i-1].func is valid.
Thus, the last element of stage[].func should be intentionally invalid
as hci\_init0[], le\_init2[], and others did.
However, amp\_init1[] and amp\_init2[] have no invalid element, letting
hci\_init\_stage\_sync() keep accessing amp\_init1[] over its valid range.
This patch fixes this by adding {} in the last of amp\_init1[] and
amp\_init2[].
==================================================================
BUG: KASAN: global-out-of-bounds in hci\_dev\_open\_sync (
/v6.2-bzimage/net/bluetooth/hci\_sync.c:3154
/v6.2-bzimage/net/bluetooth/hci\_sync.c:3343
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4418
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4609
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4689)
Read of size 8 at addr ffffffffaed1ab70 by task kworker/u5:0/1032
CPU: 0 PID: 1032 Comm: kworker/u5:0 Not tainted 6.2.0 #3
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04
Workqueue: hci1 hci\_power\_on
Call Trace:
dump\_stack\_lvl (/v6.2-bzimage/lib/dump\_stack.c:107 (discriminator 1))
print\_report (/v6.2-bzimage/mm/kasan/report.c:307
/v6.2-bzimage/mm/kasan/report.c:417)
? hci\_dev\_open\_sync (/v6.2-bzimage/net/bluetooth/hci\_sync.c:3154
/v6.2-bzimage/net/bluetooth/hci\_sync.c:3343
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4418
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4609
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4689)
kasan\_report (/v6.2-bzimage/mm/kasan/report.c:184
/v6.2-bzimage/mm/kasan/report.c:519)
? hci\_dev\_open\_sync (/v6.2-bzimage/net/bluetooth/hci\_sync.c:3154
/v6.2-bzimage/net/bluetooth/hci\_sync.c:3343
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4418
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4609
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4689)
hci\_dev\_open\_sync (/v6.2-bzimage/net/bluetooth/hci\_sync.c:3154
/v6.2-bzimage/net/bluetooth/hci\_sync.c:3343
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4418
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4609
/v6.2-bzimage/net/bluetooth/hci\_sync.c:4689)
? \_\_pfx\_hci\_dev\_open\_sync (/v6.2-bzimage/net/bluetooth/hci\_sync.c:4635)
? mutex\_lock (/v6.2-bzimage/./arch/x86/include/asm/atomic64\_64.h:190
/v6.2-bzimage/./include/linux/atomic/atomic-long.h:443
/v6.2-bzimage/./include/linux/atomic/atomic-instrumented.h:1781
/v6.2-bzimage/kernel/locking/mutex.c:171
/v6.2-bzimage/kernel/locking/mutex.c:285)
? \_\_pfx\_mutex\_lock (/v6.2-bzimage/kernel/locking/mutex.c:282)
hci\_power\_on (/v6.2-bzimage/net/bluetooth/hci\_core.c:485
/v6.2-bzimage/net/bluetooth/hci\_core.c:984)
? \_\_pfx\_hci\_power\_on (/v6.2-bzimage/net/bluetooth/hci\_core.c:969)
? read\_word\_at\_a\_time (/v6.2-bzimage/./include/asm-generic/rwonce.h:85)
? strscpy (/v6.2-bzimage/./arch/x86/include/asm/word-at-a-time.h:62
/v6.2-bzimage/lib/string.c:161)
process\_one\_work (/v6.2-bzimage/kernel/workqueue.c:2294)
worker\_thread (/v6.2-bzimage/./include/linux/list.h:292
/v6.2-bzimage/kernel/workqueue.c:2437)
? \_\_pfx\_worker\_thread (/v6.2-bzimage/kernel/workqueue.c:2379)
kthread (/v6.2-bzimage/kernel/kthread.c:376)
? \_\_pfx\_kthread (/v6.2-bzimage/kernel/kthread.c:331)
ret\_from\_fork (/v6.2-bzimage/arch/x86/entry/entry\_64.S:314)

The buggy address belongs to the variable:
amp\_init1+0x30/0x60
The buggy address belongs to the physical page:
page:000000003a157ec6 refcount:1 mapcount:0 mapping:0000000000000000 ia
flags: 0x200000000001000(reserved|node=0|zone=2)
raw: 0200000000001000 ffffea0005054688 ffffea0005054688 000000000000000
raw: 0000000000000000 0000000000000000 00000001ffffffff 000000000000000
page dumped because: kasan: bad access detected
Memory state around the buggy address:
ffffffffaed1aa00: f9 f9 f9 f9 00 00 00 00 f9 f9 f9 f9 00 00 00 00
ffffffffaed1aa80: 00 00 00 00 f9 f9 f9 f9 00 00 00 00 00 00 00 00
>ffffffffaed1ab00: 00 f9 f9 f9 f9 f9 f9 f9 00 00 00 00 00 00 f9 f9
^
ffffffffaed1ab80: f9 f9 f9 f9 00 00 00 00 f9 f9 f9 f9 00 00 00 f9
ffffffffaed1ac00: f9 f9 f9 f9 00 06 f9 f9 f9 f9 f9 f9 00 00 02 f9
This bug is found by FuzzBT, a modified version of Syzkaller.
Other contributors for this bug are Ruoyu Wu and Peng Hui.
Fixes: d0b137062b2d ("Bluetooth: hci\_sync: Rework init stages")
Signed-off-by: Sungwoo Kim
Reviewed-by: Simon Horman
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit ee366ed88d66ed890f9149f684c053405446197e
Author: Howard Chung
Date: Thu Mar 16 18:11:38 2023 +0800
Bluetooth: mgmt: Fix MGMT add advmon with RSSI command
[ Upstream commit 1a0291f81529e8044fb29845a0196ba47af894ce ]
The MGMT command: MGMT\_OP\_ADD\_ADV\_PATTERNS\_MONITOR\_RSSI uses variable
length argument. This causes host not able to register advmon with rssi.
This patch has been locally tested by adding monitor with rssi via
btmgmt on a kernel 6.1 machine.
Reviewed-by: Archie Pusaka
Fixes: b338d91703fa ("Bluetooth: Implement support for Mesh")
Signed-off-by: Howard Chung
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit c59c65a14e8f7d738429648833f3bb3f9df0513f
Author: Zheng Wang
Date: Thu Mar 9 16:07:39 2023 +0800
Bluetooth: btsdio: fix use after free bug in btsdio\_remove due to unfinished work
[ Upstream commit 1e9ac114c4428fdb7ff4635b45d4f46017e8916f ]
In btsdio\_probe, &data->work was bound with btsdio\_work.In
btsdio\_send\_frame, it was started by schedule\_work.
If we call btsdio\_remove with an unfinished job, there may
be a race condition and cause UAF bug on hdev.
Fixes: ddbaf13e3609 ("[Bluetooth] Add generic driver for Bluetooth SDIO devices")
Signed-off-by: Zheng Wang
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit 81a27397cd2a99b36afa9f812261efa5f3cae951
Author: Luiz Augusto von Dentz
Date: Wed Mar 8 14:20:34 2023 -0800
Bluetooth: L2CAP: Fix responding with wrong PDU type
[ Upstream commit 9aa9d9473f1550d1936c31259720b3f1f4690576 ]
L2CAP\_ECRED\_CONN\_REQ shall be responded with L2CAP\_ECRED\_CONN\_RSP not
L2CAP\_LE\_CONN\_RSP:
L2CAP LE EATT Server - Reject - run
Listening for connections
New client connection with handle 0x002a
Sending L2CAP Request from client
Client received response code 0x15
Unexpected L2CAP response code (expected 0x18)
L2CAP LE EATT Server - Reject - test failed
> ACL Data RX: Handle 42 flags 0x02 dlen 26
LE L2CAP: Enhanced Credit Connection Request (0x17) ident 1 len 18
PSM: 39 (0x0027)
MTU: 64
MPS: 64
Credits: 5
Source CID: 65
Source CID: 66
Source CID: 67
Source CID: 68
Source CID: 69
< ACL Data TX: Handle 42 flags 0x00 dlen 16
LE L2CAP: LE Connection Response (0x15) ident 1 len 8
invalid size
00 00 00 00 00 00 06 00
L2CAP LE EATT Server - Reject - run
Listening for connections
New client connection with handle 0x002a
Sending L2CAP Request from client
Client received response code 0x18
L2CAP LE EATT Server - Reject - test passed
Fixes: 15f02b910562 ("Bluetooth: L2CAP: Add initial code for Enhanced Credit Based Mode")
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit 55dbc48abd4be8950e9776e8bb450f9eabbe2d5e
Author: Stephan Gerhold
Date: Wed Mar 8 14:31:55 2023 +0100
Bluetooth: btqcomsmd: Fix command timeout after setting BD address
[ Upstream commit 5d44ab9e204200a78ad55cdf185aa2bb109b5950 ]
On most devices using the btqcomsmd driver (e.g. the DragonBoard 410c
and other devices based on the Qualcomm MSM8916/MSM8909/... SoCs)
the Bluetooth firmware seems to become unresponsive for a while after
setting the BD address. On recent kernel versions (at least 5.17+)
this often causes timeouts for subsequent commands, e.g. the HCI reset
sent by the Bluetooth core during initialization:
Bluetooth: hci0: Opcode 0x c03 failed: -110
Unfortunately this behavior does not seem to be documented anywhere.
Experimentation suggests that the minimum necessary delay to avoid
the problem is ~150us. However, to be sure add a sleep for > 1ms
in case it is a bit longer on other firmware versions.
Older kernel versions are likely also affected, although perhaps with
slightly different errors or less probability. Side effects can easily
hide the issue in most cases, e.g. unrelated incoming interrupts that
cause the necessary delay.
Fixes: 1511cc750c3d ("Bluetooth: Introduce Qualcomm WCNSS SMD based HCI driver")
Signed-off-by: Stephan Gerhold
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit 3afd9316a569078d02973479e5cf7f4bb909ea60
Author: Hersen Wu
Date: Thu Mar 9 15:58:54 2023 -0500
drm/amd/display: Set dcn32 caps.seamless\_odm
[ Upstream commit f9537b1fa7fb51c2162bc15ce469cbbf1ca0fbfe ]
[Why & How]
seamless\_odm set was not picked up while
merging commit 2d017189e2b3 ("drm/amd/display:
Blank eDP on enable drv if odm enabled")
Fixes: 2d017189e2b3 ("drm/amd/display: Blank eDP on enable drv if odm enabled")
Reviewed-by: Qingqing Zhuo
Acked-by: Qingqing Zhuo
Signed-off-by: Hersen Wu
Tested-by: Daniel Wheeler
Signed-off-by: Alex Deucher
Signed-off-by: Sasha Levin
commit fba8ad68b96aecc0fcb461be1c940157af86af7d
Author: Ard Biesheuvel
Date: Wed Mar 22 01:11:18 2023 +0100
efi/libstub: Use relocated version of kernel's struct screen\_info
[ Upstream commit fc3608aaa5751318837e4bbe0282b3836bca5080 ]
In some cases, we expose the kernel's struct screen\_info to the EFI stub
directly, so it gets populated before even entering the kernel. This
means the early console is available as soon as the early param parsing
happens, which is nice. It also means we need two different ways to pass
this information, as this trick only works if the EFI stub is baked into
the core kernel image, which is not always the case.
Huacai reports that the preparatory refactoring that was needed to
implement this alternative method for zboot resulted in a non-functional
efifb earlycon for other cases as well, due to the reordering of the
kernel image relocation with the population of the screen\_info struct,
and the latter now takes place after copying the image to its new
location, which means we copy the old, uninitialized state.
So let's ensure that the same-image version of alloc\_screen\_info()
produces the correct screen\_info pointer, by taking the displacement of
the loaded image into account.
Reported-by: Huacai Chen
Tested-by: Huacai Chen
Link: https://lore.kernel.org/linux-efi/20230310021749.921041-1-chenhuacai@loongson.cn/
Fixes: 42c8ea3dca094ab8 ("efi: libstub: Factor out EFI stub entrypoint into separate file")
Signed-off-by: Ard Biesheuvel
Signed-off-by: Sasha Levin
commit 0d2606e1147004f7044156ea1929e7aac0f7ecf5
Author: Liang He
Date: Wed Mar 22 14:20:57 2023 +0800
net: mdio: thunder: Add missing fwnode\_handle\_put()
[ Upstream commit b1de5c78ebe9858ccec9d49af2f76724f1d47e3e ]
In device\_for\_each\_child\_node(), we should add fwnode\_handle\_put()
when break out of the iteration device\_for\_each\_child\_node()
as it will automatically increase and decrease the refcounter.
Fixes: 379d7ac7ca31 ("phy: mdio-thunder: Add driver for Cavium Thunder SoC MDIO buses.")
Signed-off-by: Liang He
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit a391e4aa37ea10d09fb979defe170446c7e122bc
Author: Arınç ÜNAL
Date: Mon Mar 20 22:05:20 2023 +0300
net: dsa: mt7530: move setting ssc\_delta to PHY\_INTERFACE\_MODE\_TRGMII case
[ Upstream commit 407b508bdd70b6848993843d96ed49ac4108fb52 ]
Move setting the ssc\_delta variable to under the PHY\_INTERFACE\_MODE\_TRGMII
case as it's only needed when trgmii is used.
Fixes: b8f126a8d543 ("net-next: dsa: add dsa support for Mediatek MT7530 switch")
Signed-off-by: Arınç ÜNAL
Link: https://lore.kernel.org/r/20230320190520.124513-3-arinc.unal@arinc9.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit f068b77bf5f893fb6dfd7c224d036d28f43720ef
Author: Arınç ÜNAL
Date: Mon Mar 20 22:05:19 2023 +0300
net: dsa: mt7530: move lowering TRGMII driving to mt7530\_setup()
[ Upstream commit fdcc8ccd823740c18e803b886cec461bc0e64201 ]
Move lowering the TRGMII Tx clock driving to mt7530\_setup(), after setting
the core clock, as seen on the U-Boot MediaTek ethernet driver.
Move the code which looks like it lowers the TRGMII Rx clock driving to
after the TRGMII Tx clock driving is lowered. This is run after lowering
the Tx clock driving on the U-Boot MediaTek ethernet driver as well.
This way, the switch should consume less power regardless of port 6 being
used.
Update the comment explaining mt7530\_pad\_clk\_setup().
Tested rgmii and trgmii modes of port 6 and rgmii mode of port 5 on MCM
MT7530 on MT7621AT Unielec U7621-06 and standalone MT7530 on MT7623NI
Bananapi BPI-R2.
Fixes: b8f126a8d543 ("net-next: dsa: add dsa support for Mediatek MT7530 switch")
Link: https://source.denx.de/u-boot/u-boot/-/blob/29a48bf9ccba45a5e560bb564bbe76e42629325f/drivers/net/mtk\_eth.c#L682
Tested-by: Arınç ÜNAL
Signed-off-by: Arınç ÜNAL
Link: https://lore.kernel.org/r/20230320190520.124513-2-arinc.unal@arinc9.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit 29140073ae100adf090385da23a444ece50c4f23
Author: Arınç ÜNAL
Date: Mon Mar 20 22:05:18 2023 +0300
net: dsa: mt7530: move enabling disabling core clock to mt7530\_pll\_setup()
[ Upstream commit 8f058a6ef99f0b88a177b58cc46a44ff5112e40a ]
Split the code that enables and disables TRGMII clocks and core clock.
Move enabling and disabling core clock to mt7530\_pll\_setup() as it's
supposed to be run there.
Add 20 ms delay before enabling the core clock as seen on the U-Boot
MediaTek ethernet driver.
Change the comment for enabling and disabling TRGMII clocks as the code
seems to affect both TXC and RXC.
Tested rgmii and trgmii modes of port 6 and rgmii mode of port 5 on MCM
MT7530 on MT7621AT Unielec U7621-06 and standalone MT7530 on MT7623NI
Bananapi BPI-R2.
Fixes: b8f126a8d543 ("net-next: dsa: add dsa support for Mediatek MT7530 switch")
Link: https://source.denx.de/u-boot/u-boot/-/blob/29a48bf9ccba45a5e560bb564bbe76e42629325f/drivers/net/mtk\_eth.c#L589
Tested-by: Arınç ÜNAL
Signed-off-by: Arınç ÜNAL
Link: https://lore.kernel.org/r/20230320190520.124513-1-arinc.unal@arinc9.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit 94cf4cfb657c2881e3b9b52f0ec25c04a5e00188
Author: Grant Grundler
Date: Tue Mar 21 10:05:39 2023 -0700
net: asix: fix modprobe "sysfs: cannot create duplicate filename"
[ Upstream commit 8eac0095de355ee31e1b014f79f83d2cd62a2d04 ]
"modprobe asix ; rmmod asix ; modprobe asix" fails with:
sysfs: cannot create duplicate filename \
'/devices/virtual/mdio\_bus/usb-003:004'
Issue was originally reported by Anton Lundin on 2022-06-22 (link below).
Chrome OS team hit the same issue in Feb, 2023 when trying to find
work arounds for other issues with AX88172 devices.
The use of devm\_mdiobus\_register() with usbnet devices results in the
MDIO data being associated with the USB device. When the asix driver
is unloaded, the USB device continues to exist and the corresponding
"mdiobus\_unregister()" is NOT called until the USB device is unplugged
or unauthorized. So the next "modprobe asix" will fail because the MDIO
phy sysfs attributes still exist.
The 'easy' (from a design PoV) fix is to use the non-devm variants of
mdiobus\_\* functions and explicitly manage this use in the asix\_bind
and asix\_unbind function calls. I've not explored trying to fix usbnet
initialization so devm\_\* stuff will work.
Fixes: e532a096be0e5 ("net: usb: asix: ax88772: add phylib support")
Reported-by: Anton Lundin
Link: https://lore.kernel.org/netdev/20220623063649.GD23685@pengutronix.de/T/
Tested-by: Eizan Miyamoto
Signed-off-by: Grant Grundler
Link: https://lore.kernel.org/r/20230321170539.732147-1-grundler@chromium.org
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit b17323018efa0c7c2ea191ff9703e74c23a4b255
Author: Joshua Washington
Date: Tue Mar 21 10:23:32 2023 -0700
gve: Cache link\_speed value from device
[ Upstream commit 68c3e4fc8628b1487c965aabb29207249657eb5f ]
The link speed is never changed for the uptime of a VM, and the current
implementation sends an admin queue command for each call. Admin queue
command invocations have nontrivial overhead (e.g., VM exits), which can
be disruptive to users if triggered frequently. Our telemetry data shows
that there are VMs that make frequent calls to this admin queue command.
Caching the result of the original admin queue command would eliminate
the need to send multiple admin queue commands on subsequent calls to
retrieve link speed.
Fixes: 7e074d5a76ca ("gve: Enable Link Speed Reporting in the driver.")
Signed-off-by: Joshua Washington
Reviewed-by: Simon Horman
Link: https://lore.kernel.org/r/20230321172332.91678-1-joshwash@google.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit fe66147976aef9d137ba383644f355a8a4c1d278
Author: Brian Gix
Date: Mon Mar 6 14:32:21 2023 -0800
Bluetooth: Remove "Power-on" check from Mesh feature
[ Upstream commit 52dd5e964a55c98c1b0bcf5fc737a5ddd00e7d4d ]
The Bluetooth mesh experimental feature enable was requiring the
controller to be powered off in order for the Enable to work. Mesh is
supposed to be enablable regardless of the controller state, and created
an unintended requirement that the mesh daemon be started before the
classic bluetoothd daemon.
Fixes: af6bcc1921ff ("Bluetooth: Add experimental wrapper for MGMT based mesh")
Signed-off-by: Brian Gix
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit f5650ca30dcdbaf809dedc95418d0a512e60d00b
Author: Pauli Virtanen
Date: Mon Feb 20 19:38:24 2023 +0000
Bluetooth: ISO: fix timestamped HCI ISO data packet parsing
[ Upstream commit 2f10e40a948e8a2abe7f983df3959a333ca8955f ]
Use correct HCI ISO data packet header struct when the packet has
timestamp. The timestamp, when present, goes before the other fields
(Core v5.3 4E 5.4.5), so the structs are not compatible.
Fixes: ccf74f2390d6 ("Bluetooth: Add BTPROTO\_ISO socket type")
Signed-off-by: Pauli Virtanen
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit 61cbca7a93c423bcd3ff070eb18a67f84570eaf2
Author: Luiz Augusto von Dentz
Date: Fri Feb 24 15:54:31 2023 -0800
Bluetooth: btusb: Remove detection of ISO packets over bulk
[ Upstream commit efe375b716c1c1c9b52a816f5b933a95421020a2 ]
This removes the code introduced by
14202eff214e1e941fefa0366d4c3bc4b1a0d500 as hci\_recv\_frame is now able
to detect ACL packets that are in fact ISO packets.
Fixes: 14202eff214e ("Bluetooth: btusb: Detect if an ACL packet is in fact an ISO packet")
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit 35b7a3fda0e87682a015def26e4c392825ac67b5
Author: Luiz Augusto von Dentz
Date: Fri Feb 24 15:43:31 2023 -0800
Bluetooth: hci\_core: Detect if an ACL packet is in fact an ISO packet
[ Upstream commit 876e78104f23ce9267822757a63562a609b126c3 ]
Because some transports don't have a dedicated type for ISO packets
(see 14202eff214e1e941fefa0366d4c3bc4b1a0d500) they may use ACL type
when in fact they are ISO packets.
In the past this was left for the driver to detect such thing but it
creates a problem when using the likes of btproxy when used by a VM as
the host would not be aware of the connection the guest is doing it
won't be able to detect such behavior, so this make bt\_recv\_frame
detect when it happens as it is the common interface to all drivers
including guest VMs.
Fixes: 14202eff214e ("Bluetooth: btusb: Detect if an ACL packet is in fact an ISO packet")
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit 69100b152287265d1db028f7d5b5d17a1209a1f7
Author: Zhengping Jiang
Date: Tue Feb 21 16:17:56 2023 -0800
Bluetooth: hci\_sync: Resume adv with no RPA when active scan
[ Upstream commit 3c44a431d62bf4a20d7b901f98266ae3f4676d48 ]
The address resolution should be disabled during the active scan,
so all the advertisements can reach the host. The advertising
has to be paused before disabling the address resolution,
because the advertising will prevent any changes to the resolving
list and the address resolution status. Skipping this will cause
the hci error and the discovery failure.
According to the bluetooth specification:
"7.8.44 LE Set Address Resolution Enable command
This command shall not be used when:
- Advertising (other than periodic advertising) is enabled,
- Scanning is enabled, or
- an HCI\_LE\_Create\_Connection, HCI\_LE\_Extended\_Create\_Connection, or
HCI\_LE\_Periodic\_Advertising\_Create\_Sync command is outstanding."
If the host is using RPA, the controller needs to generate RPA for
the advertising, so the advertising must remain paused during the
active scan.
If the host is not using RPA, the advertising can be resumed after
disabling the address resolution.
Fixes: 9afc675edeeb ("Bluetooth: hci\_sync: allow advertise when scan without RPA")
Signed-off-by: Zhengping Jiang
Signed-off-by: Luiz Augusto von Dentz
Signed-off-by: Sasha Levin
commit a22c49a05e5e7aa2c414fbc42c49c4c01a5c9a78
Author: ChenXiaoSong
Date: Thu Mar 2 21:58:04 2023 +0800
ksmbd: fix possible refcount leak in smb2\_open()
[ Upstream commit 2624b445544ffc1472ccabfb6ec867c199d4c95c ]
Reference count of acls will leak when memory allocation fails. Fix this
by adding the missing posix\_acl\_release().
Fixes: e2f34481b24d ("cifsd: add server-side procedures for SMB3")
Signed-off-by: ChenXiaoSong
Acked-by: Namjae Jeon
Signed-off-by: Steve French
Signed-off-by: Sasha Levin
commit 2bfdd4dc69f088a17bf022f6d8091899976faab3
Author: Namjae Jeon
Date: Tue Mar 7 21:56:07 2023 +0900
ksmbd: add low bound validation to FSCTL\_QUERY\_ALLOCATED\_RANGES
[ Upstream commit 342edb60dcda7a409430359b0cac2864bb9dfe44 ]
Smatch static checker warning:
fs/ksmbd/vfs.c:1040 ksmbd\_vfs\_fqar\_lseek() warn: no lower bound on 'length'
fs/ksmbd/vfs.c:1041 ksmbd\_vfs\_fqar\_lseek() warn: no lower bound on 'start'
Fix unexpected result that could caused from negative start and length.
Fixes: f44158485826 ("cifsd: add file operations")
Reported-by: Dan Carpenter
Signed-off-by: Namjae Jeon
Reviewed-by: Sergey Senozhatsky
Signed-off-by: Steve French
Signed-off-by: Sasha Levin
commit bb4aeb8b3f95f499d7f7e19bfb8241e79eb8f5f6
Author: Namjae Jeon
Date: Sun Mar 5 21:04:00 2023 +0900
ksmbd: add low bound validation to FSCTL\_SET\_ZERO\_DATA
[ Upstream commit 2d74ec97131b1179a373b6d521f195c84e894eb6 ]
Smatch static checker warning:
fs/ksmbd/smb2pdu.c:7759 smb2\_ioctl()
warn: no lower bound on 'off'
Fix unexpected result that could caused from negative off and bfz.
Fixes: b5e5f9dfc915 ("ksmbd: check invalid FileOffset and BeyondFinalZero in FSCTL\_ZERO\_DATA")
Reported-by: Dan Carpenter
Signed-off-by: Namjae Jeon
Reviewed-by: Sergey Senozhatsky
Signed-off-by: Steve French
Signed-off-by: Sasha Levin
commit ae935d2d2ea51b01255c2f2abb5ccab8b685d281
Author: Roger Pau Monne
Date: Wed Nov 30 16:09:11 2022 +0100
hvc/xen: prevent concurrent accesses to the shared ring
[ Upstream commit 6214894f49a967c749ee6c07cb00f9cede748df4 ]
The hvc machinery registers both a console and a tty device based on
the hv ops provided by the specific implementation. Those two
interfaces however have different locks, and there's no single locks
that's shared between the tty and the console implementations, hence
the driver needs to protect itself against concurrent accesses.
Otherwise concurrent calls using the split interfaces are likely to
corrupt the ring indexes, leaving the console unusable.
Introduce a lock to xencons\_info to serialize accesses to the shared
ring. This is only required when using the shared memory console,
concurrent accesses to the hypercall based console implementation are
not an issue.
Note the conditional logic in domU\_read\_console() is slightly modified
so the notify\_daemon() call can be done outside of the locked region:
it's an hypercall and there's no need for it to be done with the lock
held.
Fixes: b536b4b96230 ('xen: use the hvc console infrastructure for Xen console')
Signed-off-by: Roger Pau Monné
Reviewed-by: Juergen Gross
Link: https://lore.kernel.org/r/20221130150919.13935-1-roger.pau@citrix.com
Signed-off-by: Juergen Gross
Signed-off-by: Sasha Levin
commit a90bbd8ec4caefce7317e1ad72222c76efef9a50
Author: Ido Schimmel
Date: Tue Mar 21 12:42:00 2023 +0100
mlxsw: spectrum\_fid: Fix incorrect local port type
[ Upstream commit bb765a743377d46d8da8e7f7e5128022504741b9 ]
Local port is a 10-bit number, but it was mistakenly stored in a u8,
resulting in firmware errors when using a netdev corresponding to a
local port higher than 255.
Fix by storing the local port in u16, as is done in the rest of the
code.
Fixes: bf73904f5fba ("mlxsw: Add support for 802.1Q FID family")
Signed-off-by: Ido Schimmel
Reviewed-by: Danielle Ratson
Signed-off-by: Petr Machata
Reviewed-by: Simon Horman
Link: https://lore.kernel.org/r/eace1f9d96545ab8a2775db857cb7e291a9b166b.1679398549.git.petrm@nvidia.com
Signed-off-by: Paolo Abeni
Signed-off-by: Sasha Levin
commit 68555a7e102d693961168108e11a6417793117ca
Author: Caleb Sander
Date: Mon Mar 20 09:57:36 2023 -0600
nvme-tcp: fix nvme\_tcp\_term\_pdu to match spec
[ Upstream commit aa01c67de5926fdb276793180564f172c55fb0d7 ]
The FEI field of C2HTermReq/H2CTermReq is 4 bytes but not 4-byte-aligned
in the NVMe/TCP specification (it is located at offset 10 in the PDU).
Split it into two 16-bit integers in struct nvme\_tcp\_term\_pdu
so no padding is inserted. There should also be 10 reserved bytes after.
There are currently no users of this type.
Fixes: fc221d05447aa6db ("nvme-tcp: Add protocol header")
Reported-by: Geert Uytterhoeven
Signed-off-by: Caleb Sander
Reviewed-by: Sagi Grimberg
Signed-off-by: Christoph Hellwig
Signed-off-by: Sasha Levin
commit 4e38af4836beceaea76afd8150f59236b64aa3a2
Author: Zhang Changzhong
Date: Tue Mar 21 14:45:43 2023 +1100
net/sonic: use dma\_mapping\_error() for error check
[ Upstream commit 4107b8746d93ace135b8c4da4f19bbae81db785f ]
The DMA address returned by dma\_map\_single() should be checked with
dma\_mapping\_error(). Fix it accordingly.
Fixes: efcce839360f ("[PATCH] macsonic/jazzsonic network drivers update")
Signed-off-by: Zhang Changzhong
Tested-by: Stan Johnson
Signed-off-by: Finn Thain
Reviewed-by: Leon Romanovsky
Link: https://lore.kernel.org/r/6645a4b5c1e364312103f48b7b36783b94e197a2.1679370343.git.fthain@linux-m68k.org
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit 97b45d1b13d42d486fea02e4777af4ddc74a3fc1
Author: Vladimir Oltean
Date: Tue Mar 21 03:03:23 2023 +0200
net: mscc: ocelot: fix stats region batching
[ Upstream commit 6acc72a43eac78a309160d0a7512bbc59bcdd757 ]
The blamed commit changed struct ocelot\_stat\_layout :: "u32 offset" to
"u32 reg".
However, "u32 reg" is not quite a register address, but an enum
ocelot\_reg, which in itself encodes an enum ocelot\_target target in the
upper bits, and an index into the ocelot->map[target][] array in the
lower bits.
So, whereas the previous code comparison between stats\_layout[i].offset
and last + 1 was correct (because those "offsets" at the time were
32-bit relative addresses), the new code, comparing layout[i].reg to
last + 4 is not correct, because the "reg" here is an enum/index, not an
actual register address.
What we want to compare are indeed register addresses, but to do that,
we need to actually go through the same motions as
\_\_ocelot\_bulk\_read\_ix() itself.
With this bug, all statistics counters are deemed by
ocelot\_prepare\_stats\_regions() as constituting their own region.
(Truncated) log on VSC9959 (Felix) below (prints added by me):
Before:
region of 1 contiguous counters starting with SYS:STAT:CNT[0x000]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x001]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x002]
...
region of 1 contiguous counters starting with SYS:STAT:CNT[0x041]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x042]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x080]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x081]
...
region of 1 contiguous counters starting with SYS:STAT:CNT[0x0ac]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x100]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x101]
...
region of 1 contiguous counters starting with SYS:STAT:CNT[0x111]
After:
region of 67 contiguous counters starting with SYS:STAT:CNT[0x000]
region of 45 contiguous counters starting with SYS:STAT:CNT[0x080]
region of 18 contiguous counters starting with SYS:STAT:CNT[0x100]
Since commit d87b1c08f38a ("net: mscc: ocelot: use bulk reads for
stats") intended bulking as a performance improvement, and since now,
with trivial-sized regions, performance is even worse than without
bulking at all, this could easily qualify as a performance regression.
Fixes: d4c367650704 ("net: mscc: ocelot: keep ocelot\_stat\_layout by reg address, not offset")
Signed-off-by: Vladimir Oltean
Acked-by: Colin Foster
Tested-by: Colin Foster
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit 5d4172732f0ee1639a361a6cc5c3114bbb397386
Author: Eric Dumazet
Date: Mon Mar 20 16:34:27 2023 +0000
erspan: do not use skb\_mac\_header() in ndo\_start\_xmit()
[ Upstream commit 8e50ed774554f93d55426039b27b1e38d7fa64d8 ]
Drivers should not assume skb\_mac\_header(skb) == skb->data in their
ndo\_start\_xmit().
Use skb\_network\_offset() and skb\_transport\_offset() which
better describe what is needed in erspan\_fb\_xmit() and
ip6erspan\_tunnel\_xmit()
syzbot reported:
WARNING: CPU: 0 PID: 5083 at include/linux/skbuff.h:2873 skb\_mac\_header include/linux/skbuff.h:2873 [inline]
WARNING: CPU: 0 PID: 5083 at include/linux/skbuff.h:2873 ip6erspan\_tunnel\_xmit+0x1d9c/0x2d90 net/ipv6/ip6\_gre.c:962
Modules linked in:
CPU: 0 PID: 5083 Comm: syz-executor406 Not tainted 6.3.0-rc2-syzkaller-00866-gd4671cb96fa3 #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 03/02/2023
RIP: 0010:skb\_mac\_header include/linux/skbuff.h:2873 [inline]
RIP: 0010:ip6erspan\_tunnel\_xmit+0x1d9c/0x2d90 net/ipv6/ip6\_gre.c:962
Code: 04 02 41 01 de 84 c0 74 08 3c 03 0f 8e 1c 0a 00 00 45 89 b4 24 c8 00 00 00 c6 85 77 fe ff ff 01 e9 33 e7 ff ff e8 b4 27 a1 f8 <0f> 0b e9 b6 e7 ff ff e8 a8 27 a1 f8 49 8d bf f0 0c 00 00 48 b8 00
RSP: 0018:ffffc90003b2f830 EFLAGS: 00010293
RAX: 0000000000000000 RBX: 000000000000ffff RCX: 0000000000000000
RDX: ffff888021273a80 RSI: ffffffff88e1bd4c RDI: 0000000000000003
RBP: ffffc90003b2f9d8 R08: 0000000000000003 R09: 000000000000ffff
R10: 000000000000ffff R11: 0000000000000000 R12: ffff88802b28da00
R13: 00000000000000d0 R14: ffff88807e25b6d0 R15: ffff888023408000
FS: 0000555556a61300(0000) GS:ffff8880b9800000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 000055e5b11eb6e8 CR3: 0000000027c1b000 CR4: 00000000003506f0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
\_\_netdev\_start\_xmit include/linux/netdevice.h:4900 [inline]
netdev\_start\_xmit include/linux/netdevice.h:4914 [inline]
\_\_dev\_direct\_xmit+0x504/0x730 net/core/dev.c:4300
dev\_direct\_xmit include/linux/netdevice.h:3088 [inline]
packet\_xmit+0x20a/0x390 net/packet/af\_packet.c:285
packet\_snd net/packet/af\_packet.c:3075 [inline]
packet\_sendmsg+0x31a0/0x5150 net/packet/af\_packet.c:3107
sock\_sendmsg\_nosec net/socket.c:724 [inline]
sock\_sendmsg+0xde/0x190 net/socket.c:747
\_\_sys\_sendto+0x23a/0x340 net/socket.c:2142
\_\_do\_sys\_sendto net/socket.c:2154 [inline]
\_\_se\_sys\_sendto net/socket.c:2150 [inline]
\_\_x64\_sys\_sendto+0xe1/0x1b0 net/socket.c:2150
do\_syscall\_x64 arch/x86/entry/common.c:50 [inline]
do\_syscall\_64+0x39/0xb0 arch/x86/entry/common.c:80
entry\_SYSCALL\_64\_after\_hwframe+0x63/0xcd
RIP: 0033:0x7f123aaa1039
Code: 28 00 00 00 75 05 48 83 c4 28 c3 e8 b1 14 00 00 90 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 c0 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007ffc15d12058 EFLAGS: 00000246 ORIG\_RAX: 000000000000002c
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f123aaa1039
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000003
RBP: 0000000000000000 R08: 0000000020000040 R09: 0000000000000014
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f123aa648c0
R13: 431bde82d7b634db R14: 0000000000000000 R15: 0000000000000000
Fixes: 1baf5ebf8954 ("erspan: auto detect truncated packets.")
Reported-by: syzbot
Signed-off-by: Eric Dumazet
Reviewed-by: Simon Horman
Link: https://lore.kernel.org/r/20230320163427.8096-1-edumazet@google.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit 3ba8aef193dc8c00bfb008a6a8261097364cfde5
Author: Li Zetao
Date: Mon Mar 20 14:33:18 2023 +0000
atm: idt77252: fix kmemleak when rmmod idt77252
[ Upstream commit 4fe3c88552a3fbe1944426a4506a18cdeb457b5a ]
There are memory leaks reported by kmemleak:
unreferenced object 0xffff888106500800 (size 128):
comm "modprobe", pid 1017, jiffies 4297787785 (age 67.152s)
hex dump (first 32 bytes):
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ................
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ................
backtrace:
[<00000000970ce626>] \_\_kmem\_cache\_alloc\_node+0x20c/0x380
[<00000000fb5f78d9>] kmalloc\_trace+0x2f/0xb0
[<000000000e947e2a>] idt77252\_init\_one+0x2847/0x3c90 [idt77252]
[<000000006efb048e>] local\_pci\_probe+0xeb/0x1a0
...
unreferenced object 0xffff888106500b00 (size 128):
comm "modprobe", pid 1017, jiffies 4297787785 (age 67.152s)
hex dump (first 32 bytes):
00 20 3d 01 80 88 ff ff 00 20 3d 01 80 88 ff ff . =...... =.....
f0 23 3d 01 80 88 ff ff 00 20 3d 01 00 00 00 00 .#=...... =.....
backtrace:
[<00000000970ce626>] \_\_kmem\_cache\_alloc\_node+0x20c/0x380
[<00000000fb5f78d9>] kmalloc\_trace+0x2f/0xb0
[<00000000f451c5be>] alloc\_scq.constprop.0+0x4a/0x400 [idt77252]
[<00000000e6313849>] idt77252\_init\_one+0x28cf/0x3c90 [idt77252]
The root cause is traced to the vc\_maps which alloced in open\_card\_oam()
are not freed in close\_card\_oam(). The vc\_maps are used to record
open connections, so when close a vc\_map in close\_card\_oam(), the memory
should be freed. Moreover, the ubr0 is not closed when close a idt77252
device, leading to the memory leak of vc\_map and scq\_info.
Fix them by adding kfree in close\_card\_oam() and implementing new
close\_card\_ubr0() to close ubr0.
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Li Zetao
Reviewed-by: Francois Romieu
Link: https://lore.kernel.org/r/20230320143318.2644630-1-lizetao1@huawei.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit cba3507ad603f95d851bd9a6c760f4ec542559c4
Author: Álvaro Fernández Rojas
Date: Sun Mar 19 10:55:40 2023 +0100
net: dsa: tag\_brcm: legacy: fix daisy-chained switches
[ Upstream commit 032a954061afd4b7426c3eb6bfd2952ef1e9a384 ]
When BCM63xx internal switches are connected to switches with a 4-byte
Broadcom tag, it does not identify the packet as VLAN tagged, so it adds one
based on its PVID (which is likely 0).
Right now, the packet is received by the BCM63xx internal switch and the 6-byte
tag is properly processed. The next step would to decode the corresponding
4-byte tag. However, the internal switch adds an invalid VLAN tag after the
6-byte tag and the 4-byte tag handling fails.
In order to fix this we need to remove the invalid VLAN tag after the 6-byte
tag before passing it to the 4-byte tag decoding.
Fixes: 964dbf186eaa ("net: dsa: tag\_brcm: add support for legacy tags")
Signed-off-by: Álvaro Fernández Rojas
Reviewed-by: Michal Swiatkowski
Reviewed-by: Florian Fainelli
Link: https://lore.kernel.org/r/20230319095540.239064-1-noltari@gmail.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit 1a9853a7437a22fd849347008fb3c85087906b56
Author: Dan Carpenter
Date: Mon Feb 27 14:16:10 2023 +0300
net/mlx5: E-Switch, Fix an Oops in error handling code
[ Upstream commit 640fcdbcf27fc62de9223f958ceb4e897a00e791 ]
The error handling dereferences "vport". There is nothing we can do if
it is an error pointer except returning the error code.
Fixes: 133dcfc577ea ("net/mlx5: E-Switch, Alloc and free unique metadata for match")
Signed-off-by: Dan Carpenter
Reviewed-by: Roi Dayan
Signed-off-by: Saeed Mahameed
Signed-off-by: Sasha Levin
commit c30e9f09f4d779fda142c40007211384772305ae
Author: Maher Sanalla
Date: Wed Mar 15 11:04:38 2023 +0200
net/mlx5: Read the TC mapping of all priorities on ETS query
[ Upstream commit 44d553188c38ac74b799dfdcebafef2f7bb70942 ]
When ETS configurations are queried by the user to get the mapping
assignment between packet priority and traffic class, only priorities up
to maximum TCs are queried from QTCT register in FW to retrieve their
assigned TC, leaving the rest of the priorities mapped to the default
TC #0 which might be misleading.
Fix by querying the TC mapping of all priorities on each ETS query,
regardless of the maximum number of TCs configured in FW.
Fixes: 820c2c5e773d ("net/mlx5e: Read ETS settings directly from firmware")
Signed-off-by: Maher Sanalla
Reviewed-by: Moshe Shemesh
Signed-off-by: Saeed Mahameed
Signed-off-by: Sasha Levin
commit 047714af8131398171fb92618532405fb0e0d9ff
Author: Emeel Hakim
Date: Mon Mar 20 13:13:55 2023 +0200
net/mlx5e: Overcome slow response for first macsec ASO WQE
[ Upstream commit 7e3fce82d945cf6e7f99034b113ff2d250d7524d ]
First ASO WQE poll causes a cache miss in hardware hence the resut is
delayed. It causes to the situation where such WQE is polled earlier
than it is needed.
Add logic to retry ASO CQ polling operation.
Fixes: 739cfa34518e ("net/mlx5: Make ASO poll CQ usable in atomic context")
Signed-off-by: Emeel Hakim
Reviewed-by: Leon Romanovsky
Reviewed-by: Raed Salem
Signed-off-by: Saeed Mahameed
Signed-off-by: Sasha Levin
commit 6f5780536181d1d0d09a11a1bc92f22e143447e2
Author: Lama Kayal
Date: Tue Jan 31 14:07:03 2023 +0200
net/mlx5: Fix steering rules cleanup
[ Upstream commit 922f56e9a795d6f3dd72d3428ebdd7ee040fa855 ]
vport's mc, uc and multicast rules are not deleted in teardown path when
EEH happens. Since the vport's promisc settings(uc, mc and all) in
firmware are reset after EEH, mlx5 driver will try to delete the above
rules in the initialization path. This cause kernel crash because these
software rules are no longer valid.
Fix by nullifying these rules right after delete to avoid accessing any dangling
pointers.
Call Trace:
\_\_list\_del\_entry\_valid+0xcc/0x100 (unreliable)
tree\_put\_node+0xf4/0x1b0 [mlx5\_core]
tree\_remove\_node+0x30/0x70 [mlx5\_core]
mlx5\_del\_flow\_rules+0x14c/0x1f0 [mlx5\_core]
esw\_apply\_vport\_rx\_mode+0x10c/0x200 [mlx5\_core]
esw\_update\_vport\_rx\_mode+0xb4/0x180 [mlx5\_core]
esw\_vport\_change\_handle\_locked+0x1ec/0x230 [mlx5\_core]
esw\_enable\_vport+0x130/0x260 [mlx5\_core]
mlx5\_eswitch\_enable\_sriov+0x2a0/0x2f0 [mlx5\_core]
mlx5\_device\_enable\_sriov+0x74/0x440 [mlx5\_core]
mlx5\_load\_one+0x114c/0x1550 [mlx5\_core]
mlx5\_pci\_resume+0x68/0xf0 [mlx5\_core]
eeh\_report\_resume+0x1a4/0x230
eeh\_pe\_dev\_traverse+0x98/0x170
eeh\_handle\_normal\_event+0x3e4/0x640
eeh\_handle\_event+0x4c/0x370
eeh\_event\_handler+0x14c/0x210
kthread+0x168/0x1b0
ret\_from\_kernel\_thread+0x5c/0x84
Fixes: a35f71f27a61 ("net/mlx5: E-Switch, Implement promiscuous rx modes vf request handling")
Signed-off-by: Huy Nguyen
Signed-off-by: Lama Kayal
Reviewed-by: Tariq Toukan
Reviewed-by: Maor Dickman
Signed-off-by: Saeed Mahameed
Signed-off-by: Sasha Levin
commit 882b988a3897062abed5f935de527797913f5876
Author: Gavin Li
Date: Thu Feb 9 12:48:52 2023 +0200
net/mlx5e: Block entering switchdev mode with ns inconsistency
[ Upstream commit 662404b24a4c4d839839ed25e3097571f5938b9b ]
Upon entering switchdev mode, VF/SF representors are spawned in the
devlink instance's net namespace, whereas the PF net device transforms
into the uplink representor, remaining in the net namespace the PF net
device was in. Therefore, if a PF net device's namespace is different from
its parent devlink net namespace, entering switchdev mode can create an
illegal situation where all representors sharing the same core device
are NOT in the same net namespace.
To avoid this issue, block entering switchdev mode for devices whose child
netdev net namespace has diverged from the parent devlink's.
Fixes: 7768d1971de6 ("net/mlx5: E-Switch, Add control for encapsulation")
Signed-off-by: Gavin Li
Reviewed-by: Gavi Teitz
Signed-off-by: Saeed Mahameed
Signed-off-by: Sasha Levin
commit 976e6cdcd5b0c08880085e73eb17a101ed0ca420
Author: Gavin Li
Date: Fri Nov 25 04:15:40 2022 +0200
net/mlx5e: Set uplink rep as NETNS\_LOCAL
[ Upstream commit c83172b0639c8a005c0dd3b36252dc22ddd9f19c ]
Previously, NETNS\_LOCAL was not set for uplink representors, inconsistent
with VF representors, and allowed the uplink representor to be moved
between net namespaces and separated from the VF representors it shares
the core device with. Such usage would break the isolation model of
namespaces, as devices in different namespaces would have access to
shared memory.
To solve this issue, set NETNS\_LOCAL for uplink representors if eswitch is
in switchdev mode.
Fixes: 7a9fb35e8c3a ("net/mlx5e: Do not reload ethernet ports when changing eswitch mode")
Signed-off-by: Gavin Li
Reviewed-by: Gavi Teitz
Signed-off-by: Saeed Mahameed
Signed-off-by: Sasha Levin
commit 68ed00a37d2d1c932ff7be40be4b90c4bec48c56
Author: Daniel Borkmann
Date: Mon Mar 20 15:37:25 2023 +0100
bpf: Adjust insufficient default bpf\_jit\_limit
[ Upstream commit 10ec8ca8ec1a2f04c4ed90897225231c58c124a7 ]
We've seen recent AWS EKS (Kubernetes) user reports like the following:
After upgrading EKS nodes from v20230203 to v20230217 on our 1.24 EKS
clusters after a few days a number of the nodes have containers stuck
in ContainerCreating state or liveness/readiness probes reporting the
following error:
Readiness probe errored: rpc error: code = Unknown desc = failed to
exec in container: failed to start exec "4a11039f730203ffc003b7[...]":
OCI runtime exec failed: exec failed: unable to start container process:
unable to init seccomp: error loading seccomp filter into kernel:
error loading seccomp filter: errno 524: unknown
However, we had not been seeing this issue on previous AMIs and it only
started to occur on v20230217 (following the upgrade from kernel 5.4 to
5.10) with no other changes to the underlying cluster or workloads.
We tried the suggestions from that issue (sysctl net.core.bpf\_jit\_limit=452534528)
which helped to immediately allow containers to be created and probes to
execute but after approximately a day the issue returned and the value
returned by cat /proc/vmallocinfo | grep bpf\_jit | awk '{s+=$2} END {print s}'
was steadily increasing.
I tested bpf tree to observe bpf\_jit\_charge\_modmem, bpf\_jit\_uncharge\_modmem
their sizes passed in as well as bpf\_jit\_current under tcpdump BPF filter,
seccomp BPF and native (e)BPF programs, and the behavior all looks sane
and expected, that is nothing "leaking" from an upstream perspective.
The bpf\_jit\_limit knob was originally added in order to avoid a situation
where unprivileged applications loading BPF programs (e.g. seccomp BPF
policies) consuming all the module memory space via BPF JIT such that loading
of kernel modules would be prevented. The default limit was defined back in
2018 and while good enough back then, we are generally seeing far more BPF
consumers today.
Adjust the limit for the BPF JIT pool from originally 1/4 to now 1/2 of the
module memory space to better reflect today's needs and avoid more users
running into potentially hard to debug issues.
Fixes: fdadd04931c2 ("bpf: fix bpf\_jit\_limit knob for PAGE\_SIZE >= 64K")
Reported-by: Stephen Haynes
Reported-by: Lefteris Alexakis
Signed-off-by: Daniel Borkmann
Link: https://github.com/awslabs/amazon-eks-ami/issues/1179
Link: https://github.com/awslabs/amazon-eks-ami/issues/1219
Reviewed-by: Kuniyuki Iwashima
Link: https://lore.kernel.org/r/20230320143725.8394-1-daniel@iogearbox.net
Signed-off-by: Alexei Starovoitov
Signed-off-by: Sasha Levin
commit 7714e744fe6da89c604d4d7524426c0aa25504d6
Author: Radoslaw Tyl
Date: Mon Mar 13 15:07:33 2023 +0100
i40e: fix flow director packet filter programming
[ Upstream commit c672297bbc0e86dbf88396b8053e2fbb173f16ff ]
Initialize to zero structures to build a valid
Tx Packet used for the filter programming.
Fixes: a9219b332f52 ("i40e: VLAN field for flow director")
Signed-off-by: Radoslaw Tyl
Reviewed-by: Michal Swiatkowski
Tested-by: Arpana Arland  (A Contingent worker at Intel)
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit f752ace58867de3c063512b21e0f1694fc27f043
Author: Stefan Assmann
Date: Mon Mar 13 17:06:45 2023 +0100
iavf: fix hang on reboot with ice
[ Upstream commit 4e264be98b88a6d6f476c11087fe865696e8bef5 ]
When a system with E810 with existing VFs gets rebooted the following
hang may be observed.
Pid 1 is hung in iavf\_remove(), part of a network driver:
PID: 1 TASK: ffff965400e5a340 CPU: 24 COMMAND: "systemd-shutdow"
#0 [ffffaad04005fa50] \_\_schedule at ffffffff8b3239cb
#1 [ffffaad04005fae8] schedule at ffffffff8b323e2d
#2 [ffffaad04005fb00] schedule\_hrtimeout\_range\_clock at ffffffff8b32cebc
#3 [ffffaad04005fb80] usleep\_range\_state at ffffffff8b32c930
#4 [ffffaad04005fbb0] iavf\_remove at ffffffffc12b9b4c [iavf]
#5 [ffffaad04005fbf0] pci\_device\_remove at ffffffff8add7513
#6 [ffffaad04005fc10] device\_release\_driver\_internal at ffffffff8af08baa
#7 [ffffaad04005fc40] pci\_stop\_bus\_device at ffffffff8adcc5fc
#8 [ffffaad04005fc60] pci\_stop\_and\_remove\_bus\_device at ffffffff8adcc81e
#9 [ffffaad04005fc70] pci\_iov\_remove\_virtfn at ffffffff8adf9429
#10 [ffffaad04005fca8] sriov\_disable at ffffffff8adf98e4
#11 [ffffaad04005fcc8] ice\_free\_vfs at ffffffffc04bb2c8 [ice]
#12 [ffffaad04005fd10] ice\_remove at ffffffffc04778fe [ice]
#13 [ffffaad04005fd38] ice\_shutdown at ffffffffc0477946 [ice]
#14 [ffffaad04005fd50] pci\_device\_shutdown at ffffffff8add58f1
#15 [ffffaad04005fd70] device\_shutdown at ffffffff8af05386
#16 [ffffaad04005fd98] kernel\_restart at ffffffff8a92a870
#17 [ffffaad04005fda8] \_\_do\_sys\_reboot at ffffffff8a92abd6
#18 [ffffaad04005fee0] do\_syscall\_64 at ffffffff8b317159
#19 [ffffaad04005ff08] \_\_context\_tracking\_enter at ffffffff8b31b6fc
#20 [ffffaad04005ff18] syscall\_exit\_to\_user\_mode at ffffffff8b31b50d
#21 [ffffaad04005ff28] do\_syscall\_64 at ffffffff8b317169
#22 [ffffaad04005ff50] entry\_SYSCALL\_64\_after\_hwframe at ffffffff8b40009b
RIP: 00007f1baa5c13d7 RSP: 00007fffbcc55a98 RFLAGS: 00000202
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f1baa5c13d7
RDX: 0000000001234567 RSI: 0000000028121969 RDI: 00000000fee1dead
RBP: 00007fffbcc55ca0 R8: 0000000000000000 R9: 00007fffbcc54e90
R10: 00007fffbcc55050 R11: 0000000000000202 R12: 0000000000000005
R13: 0000000000000000 R14: 00007fffbcc55af0 R15: 0000000000000000
ORIG\_RAX: 00000000000000a9 CS: 0033 SS: 002b
During reboot all drivers PM shutdown callbacks are invoked.
In iavf\_shutdown() the adapter state is changed to \_\_IAVF\_REMOVE.
In ice\_shutdown() the call chain above is executed, which at some point
calls iavf\_remove(). However iavf\_remove() expects the VF to be in one
of the states \_\_IAVF\_RUNNING, \_\_IAVF\_DOWN or \_\_IAVF\_INIT\_FAILED. If
that's not the case it sleeps forever.
So if iavf\_shutdown() gets invoked before iavf\_remove() the system will
hang indefinitely because the adapter is already in state \_\_IAVF\_REMOVE.
Fix this by returning from iavf\_remove() if the state is \_\_IAVF\_REMOVE,
as we already went through iavf\_shutdown().
Fixes: 974578017fc1 ("iavf: Add waiting so the port is initialized in remove")
Fixes: a8417330f8a5 ("iavf: Fix race condition between iavf\_shutdown and iavf\_remove")
Reported-by: Marius Cornea
Signed-off-by: Stefan Assmann
Reviewed-by: Michal Kubiak
Tested-by: Rafal Romanowski
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit ad62a28b1261a512070c09f8a232026429c91d04
Author: Michal Swiatkowski
Date: Fri Mar 10 12:33:44 2023 +0100
ice: check if VF exists before mode check
[ Upstream commit 83b49e7f63da88a1544cba2b2e40bfabb24bd203 ]
Setting trust on VF should return EINVAL when there is no VF. Move
checking for switchdev mode after checking if VF exists.
Fixes: c54d209c78b8 ("ice: Wait for VF to be reset/ready before configuration")
Signed-off-by: Michal Swiatkowski
Signed-off-by: Kalyan Kodamagula
Tested-by: Sujai Buvaneswaran
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit 90c229d3456624abef1871e8ccf866af3933d672
Author: David Howells
Date: Tue Mar 14 15:15:18 2023 +0000
keys: Do not cache key in task struct if key is requested from kernel thread
[ Upstream commit 47f9e4c924025c5be87959d3335e66fcbb7f6b5c ]
The key which gets cached in task structure from a kernel thread does not
get invalidated even after expiry. Due to which, a new key request from
kernel thread will be served with the cached key if it's present in task
struct irrespective of the key validity. The change is to not cache key in
task\_struct when key requested from kernel thread so that kernel thread
gets a valid key on every key request.
The problem has been seen with the cifs module doing DNS lookups from a
kernel thread and the results getting pinned by being attached to that
kernel thread's cache - and thus not something that can be easily got rid
of. The cache would ordinarily be cleared by notify-resume, but kernel
threads don't do that.
This isn't seen with AFS because AFS is doing request\_key() within the
kernel half of a user thread - which will do notify-resume.
Fixes: 7743c48e54ee ("keys: Cache result of request\_key\*() temporarily in task\_struct")
Signed-off-by: Bharath SM
Signed-off-by: David Howells
Reviewed-by: Jarkko Sakkinen
cc: Shyam Prasad N
cc: Steve French
cc: keyrings@vger.kernel.org
cc: linux-cifs@vger.kernel.org
cc: linux-fsdevel@vger.kernel.org
Link: https://lore.kernel.org/r/CAGypqWw951d=zYRbdgNR4snUDvJhWL=q3=WOyh7HhSJupjz2vA@mail.gmail.com/
Signed-off-by: Sasha Levin
commit ba6731828afd3e7a38b32444e2599bf0484d98ea
Author: Masami Hiramatsu (Google)
Date: Wed Mar 15 22:54:08 2023 +0900
bootconfig: Fix testcase to increase max node
[ Upstream commit b69245126a48e50882021180fa5d264dc7149ccc ]
Since commit 6c40624930c5 ("bootconfig: Increase max nodes of bootconfig
from 1024 to 8192 for DCC support") increased the max number of bootconfig
node to 8192, the bootconfig testcase of the max number of nodes fails.
To fix this issue, we can not simply increase the number in the test script
because the test bootconfig file becomes too big (>32KB). To fix that, we
can use a combination of three alphabets (26^3 = 17576). But with that,
we can not express the 8193 (just one exceed from the limitation) because
it also exceeds the max size of bootconfig. So, the first 26 nodes will just
use one alphabet.
With this fix, test-bootconfig.sh passes all tests.
Link: https://lore.kernel.org/all/167888844790.791176.670805252426835131.stgit@devnote2/
Reported-by: Heinz Wiesinger
Link: https://lore.kernel.org/all/2463802.XAFRqVoOGU@amaterasu.liwjatan.org
Fixes: 6c40624930c5 ("bootconfig: Increase max nodes of bootconfig from 1024 to 8192 for DCC support")
Signed-off-by: Masami Hiramatsu (Google)
Reviewed-by: Steven Rostedt (Google)
Signed-off-by: Sasha Levin
commit 813b590840771890c738ce6dbfd0c5938a1bafb9
Author: Jiasheng Jiang
Date: Fri Mar 17 14:43:37 2023 +0800
octeontx2-vf: Add missing free for alloc\_percpu
[ Upstream commit f038f3917baf04835ba2b7bcf2a04ac93fbf8a9c ]
Add the free\_percpu for the allocated "vf->hw.lmt\_info" in order to avoid
memory leak, same as the "pf->hw.lmt\_info" in
`drivers/net/ethernet/marvell/octeontx2/nic/otx2\_pf.c`.
Fixes: 5c0512072f65 ("octeontx2-pf: cn10k: Use runtime allocated LMTLINE region")
Signed-off-by: Jiasheng Jiang
Reviewed-by: Michal Swiatkowski
Acked-by: Geethasowjanya Akula
Link: https://lore.kernel.org/r/20230317064337.18198-1-jiasheng@iscas.ac.cn
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit 7f92badbf21b0747fb0e4fcbfff3d3ac91299b56
Author: Geoff Levand
Date: Sat Mar 18 17:39:16 2023 +0000
net/ps3\_gelic\_net: Use dma\_mapping\_error
[ Upstream commit bebe933d35a63d4f042fbf4dce4f22e689ba0fcd ]
The current Gelic Etherenet driver was checking the return value of its
dma\_map\_single call, and not using the dma\_mapping\_error() routine.
Fixes runtime problems like these:
DMA-API: ps3\_gelic\_driver sb\_05: device driver failed to check map error
WARNING: CPU: 0 PID: 0 at kernel/dma/debug.c:1027 .check\_unmap+0x888/0x8dc
Fixes: 02c1889166b4 ("ps3: gigabit ethernet driver for PS3, take3")
Reviewed-by: Alexander Duyck
Signed-off-by: Geoff Levand
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit dd80cc854cb92ff284952a81b17052e828cc9693
Author: Geoff Levand
Date: Sat Mar 18 17:39:16 2023 +0000
net/ps3\_gelic\_net: Fix RX sk\_buff length
[ Upstream commit 19b3bb51c3bc288b3f2c6f8c4450b0f548320625 ]
The Gelic Ethernet device needs to have the RX sk\_buffs aligned to
GELIC\_NET\_RXBUF\_ALIGN, and also the length of the RX sk\_buffs must
be a multiple of GELIC\_NET\_RXBUF\_ALIGN.
The current Gelic Ethernet driver was not allocating sk\_buffs large
enough to allow for this alignment.
Also, correct the maximum and minimum MTU sizes, and add a new
preprocessor macro for the maximum frame size, GELIC\_NET\_MAX\_FRAME.
Fixes various randomly occurring runtime network errors.
Fixes: 02c1889166b4 ("ps3: gigabit ethernet driver for PS3, take3")
Signed-off-by: Geoff Levand
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 44b9ed73369fc5ec85dd2ee487e986301792a82d
Author: Szymon Heidrich
Date: Sat Mar 18 10:25:52 2023 +0100
net: usb: lan78xx: Limit packet length to skb->len
[ Upstream commit 7f247f5a2c18b3f21206cdd51193df4f38e1b9f5 ]
Packet length retrieved from descriptor may be larger than
the actual socket buffer length. In such case the cloned
skb passed up the network stack will leak kernel memory contents.
Additionally prevent integer underflow when size is less than
ETH\_FCS\_LEN.
Fixes: 55d7de9de6c3 ("Microchip's LAN7800 family USB 2/3 to 10/100/1000 Ethernet device driver")
Signed-off-by: Szymon Heidrich
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 514dc3d0f176d280dc2d3cd25e898a7ec329e878
Author: Zheng Wang
Date: Sat Mar 18 16:05:26 2023 +0800
net: qcom/emac: Fix use after free bug in emac\_remove due to race condition
[ Upstream commit 6b6bc5b8bd2d4ca9e1efa9ae0f98a0b0687ace75 ]
In emac\_probe, &adpt->work\_thread is bound with
emac\_work\_thread. Then it will be started by timeout
handler emac\_tx\_timeout or a IRQ handler emac\_isr.
If we remove the driver which will call emac\_remove
to make cleanup, there may be a unfinished work.
The possible sequence is as follows:
Fix it by finishing the work before cleanup in the emac\_remove
and disable timeout response.
CPU0 CPU1
|emac\_work\_thread
emac\_remove |
free\_netdev |
kfree(netdev); |
|emac\_reinit\_locked
|emac\_mac\_down
|//use netdev
Fixes: b9b17debc69d ("net: emac: emac gigabit ethernet controller driver")
Signed-off-by: Zheng Wang
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit fa43aa2fb5aa1b7c775b64bf03dbccbfdde24d5b
Author: Vladimir Oltean
Date: Sat Mar 18 01:19:00 2023 +0200
net: dsa: report rx\_bytes unadjusted for ETH\_HLEN
[ Upstream commit a8eff03545d4cef12ae66a1905627c1818a0f81a ]
We collect the software statistics counters for RX bytes (reported to
/proc/net/dev and to ethtool -S $dev | grep 'rx\_bytes: ") at a time when
skb->len has already been adjusted by the eth\_type\_trans() ->
skb\_pull\_inline(skb, ETH\_HLEN) call to exclude the L2 header.
This means that when connecting 2 DSA interfaces back to back and
sending 1 packet with length 100, the sending interface will report
tx\_bytes as incrementing by 100, and the receiving interface will report
rx\_bytes as incrementing by 86.
Since accounting for that in scripts is quirky and is something that
would be DSA-specific behavior (requiring users to know that they are
running on a DSA interface in the first place), the proposal is that we
treat it as a bug and fix it.
This design bug has always existed in DSA, according to my analysis:
commit 91da11f870f0 ("net: Distributed Switch Architecture protocol
support") also updates skb->dev->stats.rx\_bytes += skb->len after the
eth\_type\_trans() call. Technically, prior to Florian's commit
a86d8becc3f0 ("net: dsa: Factor bottom tag receive functions"), each and
every vendor-specific tagging protocol driver open-coded the same bug,
until the buggy code was consolidated into something resembling what can
be seen now. So each and every driver should have its own Fixes: tag,
because of their different histories until the convergence point.
I'm not going to do that, for the sake of simplicity, but just blame the
oldest appearance of buggy code.
There are 2 ways to fix the problem. One is the obvious way, and the
other is how I ended up doing it. Obvious would have been to move
dev\_sw\_netstats\_rx\_add() one line above eth\_type\_trans(), and below
skb\_push(skb, ETH\_HLEN). But DSA processing is not as simple as that.
We count the bytes after removing everything DSA-related from the
packet, to emulate what the packet's length was, on the wire, when the
user port received it.
When eth\_type\_trans() executes, dsa\_untag\_bridge\_pvid() has not run yet,
so in case the switch driver requests this behavior - commit
412a1526d067 ("net: dsa: untag the bridge pvid from rx skbs") has the
details - the obvious variant of the fix wouldn't have worked, because
the positioning there would have also counted the not-yet-stripped VLAN
header length, something which is absent from the packet as seen on the
wire (there it may be untagged, whereas software will see it as
PVID-tagged).
Fixes: f613ed665bb3 ("net: dsa: Add support for 64-bit statistics")
Signed-off-by: Vladimir Oltean
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit ef97dfc40d3541814bb66afd5e1598e92dd3ff0a
Author: Ville Syrjälä
Date: Sat Mar 11 01:58:25 2023 +0200
drm/i915: Update vblank timestamping stuff on seamless M/N change
[ Upstream commit 59ad01c786a4c94afacc7feb0ab97bf8d6672a46 ]
When we change the M/N values seamlessly during a fastset we should
also update the vblank timestamping stuff to make sure the vblank
timestamp corrections/guesstimations come out exact.
Note that only crtc\_clock and framedur\_ns can actually end up
changing here during fastsets. Everything else we touch can
only change during full modesets.
Technically we should try to do this exactly at the start of
vblank, but that would require some kind of double buffering
scheme. Let's skip that for now and just update things right
after the commit has been submitted to the hardware. This
means the information will be properly up to date when the
vblank irq handler goes to work. Only if someone ends up
querying some vblanky stuff in between the commit and start
of vblank may we see a slight discrepancy.
Also this same problem really exists for the DRRS downclocking
stuff. But as that is supposed to be more or less transparent
to the user, and it only drops to low gear after a long delay
(1 sec currently) we probably don't have to worry about it.
Any time something is actively submitting updates DRRS will
remain in high gear and so the timestamping constants will
match the hardware state.
Reviewed-by: Jani Nikula
Reviewed-by: Mitul Golani
Fixes: e6f29923c048 ("drm/i915: Allow M/N change during fastset on bdw+")
Signed-off-by: Ville Syrjälä
Link: https://patchwork.freedesktop.org/patch/msgid/20230310235828.17439-1-ville.syrjala@linux.intel.com
(cherry picked from commit 8cb1f95cca68421b08333175719fdd3615372ca8)
Signed-off-by: Jani Nikula
Signed-off-by: Sasha Levin
commit d8356acb802170d1901e36ee403cad36d7248f00
Author: Vinay Belgaumkar
Date: Tue Mar 14 19:29:06 2023 -0700
drm/i915: Fix format for perf\_limit\_reasons
[ Upstream commit f8d62aa8d24d9883df738e450bfe6be396e11979 ]
Use hex format so that it is easier to decode.
Fixes: fe5979665f64 ("drm/i915/debugfs: Add perf\_limit\_reasons in debugfs")
Signed-off-by: Vinay Belgaumkar
Reviewed-by: Ashutosh Dixit
Signed-off-by: John Harrison
Link: https://patchwork.freedesktop.org/patch/msgid/20230315022906.2467408-1-vinay.belgaumkar@intel.com
(cherry picked from commit 5e008ba67cb80084e99b40ccd46f9029ae421632)
Signed-off-by: Jani Nikula
Signed-off-by: Sasha Levin
commit 9912853392715e6c27dea6d44caf93d4a45d29c5
Author: Andrzej Hajda
Date: Tue Mar 14 16:19:20 2023 +0100
drm/i915/gt: perform uc late init after probe error injection
[ Upstream commit 150784f9285e656373cf3953ef4a7663f1e1a0f2 ]
Probe pseudo errors should be injected only in places where real errors
can be encountered, otherwise unwinding code can be broken.
Placing intel\_uc\_init\_late before i915\_inject\_probe\_error violated
this rule, resulting in following bug:
\_\_intel\_gt\_disable:655 GEM\_BUG\_ON(intel\_gt\_pm\_is\_awake(gt))
Fixes: 481d458caede ("drm/i915/guc: Add golden context to GuC ADS")
Acked-by: Nirmoy Das
Reviewed-by: Andi Shyti
Signed-off-by: Andrzej Hajda
Link: https://patchwork.freedesktop.org/patch/msgid/20230314151920.1065847-1-andrzej.hajda@intel.com
(cherry picked from commit c4252a11131c7f27a158294241466e2a4e7ff94e)
Signed-off-by: Jani Nikula
Signed-off-by: Sasha Levin
commit 41da256ef7bba4802986212c81a636d69707227e
Author: John Harrison
Date: Fri Mar 10 22:37:12 2023 -0800
drm/i915/guc: Fix missing ecodes
[ Upstream commit 8df23e4c4f72f4e201c28e6fb0a67e2dbf30628a ]
Error captures are tagged with an 'ecode'. This is a pseduo-unique magic
number that is meant to distinguish similar seeming bugs with
different underlying signatures. It is a combination of two ring state
registers. Unfortunately, the register state being used is only valid
in execlist mode. In GuC mode, the register state exists in a separate
list of arbitrary register address/value pairs rather than the named
entry structure. So, search through that list to find the two exciting
registers and copy them over to the structure's named members.
v2: if else if instead of if if (Alan)
Signed-off-by: John Harrison
Reviewed-by: Alan Previn
Fixes: a6f0f9cf330a ("drm/i915/guc: Plumb GuC-capture into gpu\_coredump")
Cc: Alan Previn
Cc: Umesh Nerlige Ramappa
Cc: Lucas De Marchi
Cc: Jani Nikula
Cc: Joonas Lahtinen
Cc: Rodrigo Vivi
Cc: Tvrtko Ursulin
Cc: Matt Roper
Cc: Aravind Iddamsetty
Cc: Michael Cheng
Cc: Matthew Brost
Cc: Bruce Chang
Cc: Daniele Ceraolo Spurio
Cc: Matthew Auld
Link: https://patchwork.freedesktop.org/patch/msgid/20230311063714.570389-2-John.C.Harrison@Intel.com
(cherry picked from commit 9724ecdbb9ddd6da3260e4a442574b90fc75188a)
Signed-off-by: Jani Nikula
Signed-off-by: Sasha Levin
commit 97a8b5e91bd551cf3a3a089d3b35eb6f702a5707
Author: John Harrison
Date: Thu Jan 26 16:28:42 2023 -0800
drm/i915/guc: Rename GuC register state capture node to be more obvious
[ Upstream commit 583ebae783b8241a30581c084ad6226051b594c5 ]
The GuC specific register state entry in the error capture object was
just called 'capture'. Although the companion 'node' entry was called
'guc\_capture\_node'. Rename the base entry to be 'guc\_capture' instead
so that it is a) more consistent and b) more obvious what it is.
Signed-off-by: John Harrison
Reviewed-by: Daniele Ceraolo Spurio
Link: https://patchwork.freedesktop.org/patch/msgid/20230127002842.3169194-9-John.C.Harrison@Intel.com
Stable-dep-of: 8df23e4c4f72 ("drm/i915/guc: Fix missing ecodes")
Signed-off-by: Sasha Levin
commit c8fd964e96da08531fe7ae72a34c6520f721eaba
Author: Badal Nilawar
Date: Fri Mar 10 11:43:39 2023 +0530
drm/i915/mtl: Disable MC6 for MTL A step
[ Upstream commit 088a422c3fa3ee9268d400078626b0c202cfe9dd ]
The Wa\_14017073508 require to send Media Busy/Idle mailbox while
accessing Media tile. As of now it is getting handled while \_\_gt\_unpark,
\_\_gt\_park. But there are various corner cases where forcewakes are taken
without \_\_gt\_unpark i.e. without sending Busy Mailbox especially during
register reads. Forcewakes are taken without busy mailbox leads to
GPU HANG. So bringing mailbox calls under forcewake calls are no feasible
option as forcewake calls are atomic and mailbox calls are blocking.
The issue already fixed in B step so disabling MC6 on A step and
reverting previous commit which handles Wa\_14017073508
Fixes: 8f70f1ec587d ("drm/i915/mtl: Add Wa\_14017073508 for SAMedia")
Cc: Rodrigo Vivi
Signed-off-by: Badal Nilawar
Reviewed-by: Rodrigo Vivi
Signed-off-by: Anshuman Gupta
Link: https://patchwork.freedesktop.org/patch/msgid/20230310061339.2495416-2-badal.nilawar@intel.com
(cherry picked from commit 038a24835ab68f341eaa7a0e3bcc6ce0f9b22e17)
Signed-off-by: Jani Nikula
Signed-off-by: Sasha Levin
commit 8ca0031be4a68da6e0b3423b915e4affda09fd8c
Author: Tejas Upadhyay
Date: Wed Mar 1 12:10:52 2023 -0800
drm/i915/fbdev: lock the fbdev obj before vma pin
[ Upstream commit ed00eba03474adbf525ff03d69705d8c78b76456 ]
lock the fbdev obj before calling into
i915\_vma\_pin\_iomap(). This helps to solve below :
<7>[ 93.563308] i915 0000:00:02.0: [drm:intelfb\_create [i915]] no BIOS fb, allocating a new one
<4>[ 93.581844] ------------[ cut here ]------------
<4>[ 93.581855] WARNING: CPU: 12 PID: 625 at drivers/gpu/drm/i915/gem/i915\_gem\_pages.c:424 i915\_gem\_object\_pin\_map+0x152/0x1c0 [i915]
Fixes: f0b6b01b3efe ("drm/i915: Add ww context to intel\_dpt\_pin, v2.")
Cc: Chris Wilson
Cc: Matthew Auld
Cc: Maarten Lankhorst
Signed-off-by: Tejas Upadhyay
Signed-off-by: Radhakrishna Sripada
Reviewed-by: Andi Shyti
Link: https://patchwork.freedesktop.org/patch/msgid/20230301201053.928709-5-radhakrishna.sripada@intel.com
(cherry picked from commit 561b31acfd65502a2cda2067513240fc57ccdbdc)
Signed-off-by: Jani Nikula
Signed-off-by: Sasha Levin
commit 1586ae52d569a25298dd46948eccd80633b10972
Author: Ido Schimmel
Date: Fri Mar 17 16:32:59 2023 +0100
mlxsw: core\_thermal: Fix fan speed in maximum cooling state
[ Upstream commit 6d206b1ea9f48433a96edec7028586db1d947911 ]
The cooling levels array is supposed to prevent the system fans from
being configured below a 20% duty cycle as otherwise some of them get
stuck at 0 RPM.
Due to an off-by-one error, the last element in the array was not
initialized, causing it to be set to zero, which in turn lead to fans
being configured with a 0% duty cycle in maximum cooling state.
Since commit 332fdf951df8 ("mlxsw: thermal: Fix out-of-bounds memory
accesses") the contents of the array are static. Therefore, instead of
fixing the initialization of the array, simply remove it and adjust
thermal\_cooling\_device\_ops::set\_cur\_state() so that the configured duty
cycle is never set below 20%.
Before:
# cat /sys/class/thermal/thermal\_zone0/cdev0/type
mlxsw\_fan
# echo 10 > /sys/class/thermal/thermal\_zone0/cdev0/cur\_state
# cat /sys/class/hwmon/hwmon0/name
mlxsw
# cat /sys/class/hwmon/hwmon0/pwm1
0
After:
# cat /sys/class/thermal/thermal\_zone0/cdev0/type
mlxsw\_fan
# echo 10 > /sys/class/thermal/thermal\_zone0/cdev0/cur\_state
# cat /sys/class/hwmon/hwmon0/name
mlxsw
# cat /sys/class/hwmon/hwmon0/pwm1
255
This bug was uncovered when the thermal subsystem repeatedly tried to
configure the cooling devices to their maximum state due to another
issue [1]. This resulted in the fans being stuck at 0 RPM, which
eventually lead to the system undergoing thermal shutdown.
[1] https://lore.kernel.org/netdev/ZA3CFNhU4AbtsP4G@shredder/
Fixes: a421ce088ac8 ("mlxsw: core: Extend cooling device with cooling levels")
Signed-off-by: Ido Schimmel
Reviewed-by: Vadim Pasternak
Signed-off-by: Petr Machata
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit d679037f9d0fedf38b13749d4f3dcd772d92a99b
Author: Daniel Lezcano
Date: Fri Oct 14 09:32:51 2022 +0200
thermal/drivers/mellanox: Use generic thermal\_zone\_get\_trip() function
[ Upstream commit 44a29a4dab73411671e0b84817a5f07e291b1501 ]
The thermal framework gives the possibility to register the trip
points with the thermal zone. When that is done, no get\_trip\_\* ops are
needed and they can be removed.
Convert ops content logic into generic trip points and register them with the
thermal zone.
Signed-off-by: Daniel Lezcano
Signed-off-by: Vadim Pasternak
Link: https://lore.kernel.org/r/20221014073253.3719911-2-daniel.lezcano@linaro.org
Stable-dep-of: 6d206b1ea9f4 ("mlxsw: core\_thermal: Fix fan speed in maximum cooling state")
Signed-off-by: Sasha Levin
commit a636884ea55610b67cfdb359084c8fdc62d95d93
Author: Jochen Henneberg
Date: Fri Mar 17 09:08:17 2023 +0100
net: stmmac: Fix for mismatched host/device DMA address width
[ Upstream commit 070246e4674b125860d311c18ce2623e73e2bd51 ]
Currently DMA address width is either read from a RO device register
or force set from the platform data. This breaks DMA when the host DMA
address width is <=32it but the device is >32bit.
Right now the driver may decide to use a 2nd DMA descriptor for
another buffer (happens in case of TSO xmit) assuming that 32bit
addressing is used due to platform configuration but the device will
still use both descriptor addresses as one address.
This can be observed with the Intel EHL platform driver that sets
32bit for addr64 but the MAC reports 40bit. The TX queue gets stuck in
case of TCP with iptables NAT configuration on TSO packets.
The logic should be like this: Whatever we do on the host side (memory
allocation GFP flags) should happen with the host DMA width, whenever
we decide how to set addresses on the device registers we must use the
device DMA address width.
This patch renames the platform address width field from addr64 (term
used in device datasheet) to host\_addr and uses this value exclusively
for host side operations while all chip operations consider the device
DMA width as read from the device register.
Fixes: 7cfc4486e7ea ("stmmac: intel: Configure EHL PSE0 GbE and PSE1 GbE to 32 bits DMA addressing")
Signed-off-by: Jochen Henneberg
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 121c425ac3558964fc0ccceda068c984cee0b164
Author: Florian Fainelli
Date: Thu Mar 16 16:33:17 2023 -0700
net: mdio: fix owner field for mdio buses registered using ACPI
[ Upstream commit 30b605b8501e321f79e19c3238aa6ca31da6087c ]
Bus ownership is wrong when using acpi\_mdiobus\_register() to register an
mdio bus. That function is not inline, so when it calls
mdiobus\_register() the wrong THIS\_MODULE value is captured.
CC: Maxime Bizon
Fixes: 803ca24d2f92 ("net: mdio: Add ACPI support code for mdio")
Signed-off-by: Florian Fainelli
Reviewed-by: Simon Horman
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 38de67e5e46c70e249a750e111f890345159135a
Author: Maxime Bizon
Date: Thu Mar 16 16:33:16 2023 -0700
net: mdio: fix owner field for mdio buses registered using device-tree
[ Upstream commit 99669259f3361d759219811e670b7e0742668556 ]
Bus ownership is wrong when using of\_mdiobus\_register() to register an mdio
bus. That function is not inline, so when it calls mdiobus\_register() the wrong
THIS\_MODULE value is captured.
Signed-off-by: Maxime Bizon
Fixes: 90eff9096c01 ("net: phy: Allow splitting MDIO bus/device support from PHYs")
[florian: fix kdoc, added Fixes tag]
Signed-off-by: Florian Fainelli
Reviewed-by: Simon Horman
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 5603aeb818489a188ef0802a59d42d792b701914
Author: Florian Fainelli
Date: Thu Mar 16 13:33:24 2023 -0700
net: phy: Ensure state transitions are processed from phy\_stop()
[ Upstream commit 4203d84032e28f893594a453bd8bc9c3b15c7334 ]
In the phy\_disconnect() -> phy\_stop() path, we will be forcibly setting
the PHY state machine to PHY\_HALTED. This invalidates the old\_state !=
phydev->state condition in phy\_state\_machine() such that we will neither
display the state change for debugging, nor will we invoke the
link\_change\_notify() callback.
Factor the code by introducing phy\_process\_state\_change(), and ensure
that we process the state change from phy\_stop() as well.
Fixes: 5c5f626bcace ("net: phy: improve handling link\_change\_notify callback")
Signed-off-by: Florian Fainelli
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 9c515f3290456bb6850bd7ee29d5bf6652d7f103
Author: Zheng Wang
Date: Fri Mar 17 00:15:26 2023 +0800
xirc2ps\_cs: Fix use after free bug in xirc2ps\_detach
[ Upstream commit e8d20c3ded59a092532513c9bd030d1ea66f5f44 ]
In xirc2ps\_probe, the local->tx\_timeout\_task was bounded
with xirc2ps\_tx\_timeout\_task. When timeout occurs,
it will call xirc\_tx\_timeout->schedule\_work to start the
work.
When we call xirc2ps\_detach to remove the driver, there
may be a sequence as follows:
Stop responding to timeout tasks and complete scheduled
tasks before cleanup in xirc2ps\_detach, which will fix
the problem.
CPU0 CPU1
|xirc2ps\_tx\_timeout\_task
xirc2ps\_detach |
free\_netdev |
kfree(dev); |
|
| do\_reset
| //use dev
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Zheng Wang
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit b224b0cab3a66e93d414825065a2e667a1d28c32
Author: Daniil Tatianin
Date: Thu Mar 16 13:29:21 2023 +0300
qed/qed\_sriov: guard against NULL derefs from qed\_iov\_get\_vf\_info
[ Upstream commit 25143b6a01d0cc5319edd3de22ffa2578b045550 ]
We have to make sure that the info returned by the helper is valid
before using it.
Found by Linux Verification Center (linuxtesting.org) with the SVACE
static analysis tool.
Fixes: f990c82c385b ("qed\*: Add support for ndo\_set\_vf\_trust")
Fixes: 733def6a04bf ("qed\*: IOV link control")
Signed-off-by: Daniil Tatianin
Reviewed-by: Michal Swiatkowski
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit b824efafca6739f6c80d22d88a83e6545114ed8e
Author: Ard Biesheuvel
Date: Tue Feb 28 17:00:49 2023 +0100
arm64: efi: Use SMBIOS processor version to key off Ampere quirk
[ Upstream commit eb684408f3ea4856639675d6465f0024e498e4b1 ]
Instead of using the SMBIOS type 1 record 'family' field, which is often
modified by OEMs, use the type 4 'processor ID' and 'processor version'
fields, which are set to a small set of probe-able values on all known
Ampere EFI systems in the field.
Fixes: 550b33cfd4452968 ("arm64: efi: Force the use of ...")
Tested-by: Andrea Righi
Signed-off-by: Ard Biesheuvel
Signed-off-by: Sasha Levin
commit 8079377656abe43b9802800de42419685f5ee61a
Author: Ard Biesheuvel
Date: Tue Feb 28 19:23:09 2023 +0100
efi/libstub: smbios: Use length member instead of record struct size
[ Upstream commit 34343eb06afc04af9178a9883d9354dc12beede0 ]
The type 1 SMBIOS record happens to always be the same size, but there
are other record types which have been augmented over time, and so we
should really use the length field in the header to decide where the
string table starts.
Fixes: 550b33cfd4452968 ("arm64: efi: Force the use of ...")
Signed-off-by: Ard Biesheuvel
Signed-off-by: Sasha Levin
commit 70eb25c6a6cde149affe8a587371a3a8ad295ba0
Author: Szymon Heidrich
Date: Thu Mar 16 11:19:54 2023 +0100
net: usb: smsc95xx: Limit packet length to skb->len
[ Upstream commit ff821092cf02a70c2bccd2d19269f01e29aa52cf ]
Packet length retrieved from descriptor may be larger than
the actual socket buffer length. In such case the cloned
skb passed up the network stack will leak kernel memory contents.
Fixes: 2f7ca802bdae ("net: Add SMSC LAN9500 USB2.0 10/100 ethernet adapter driver")
Signed-off-by: Szymon Heidrich
Reviewed-by: Jakub Kicinski
Link: https://lore.kernel.org/r/20230316101954.75836-1-szymon.heidrich@gmail.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit aa339328a3abca959bf4b8429617c436e980defe
Author: Álvaro Fernández Rojas
Date: Thu Mar 16 18:28:07 2023 +0100
net: dsa: b53: mmap: fix device tree support
[ Upstream commit 30796d0dcb6e41c6558a07950f2ce60c209da867 ]
CPU port should also be enabled in order to get a working switch.
Fixes: a5538a777b73 ("net: dsa: b53: mmap: Add device tree support")
Signed-off-by: Álvaro Fernández Rojas
Acked-by: Florian Fainelli
Link: https://lore.kernel.org/r/20230316172807.460146-1-noltari@gmail.com
Signed-off-by: Jakub Kicinski
Signed-off-by: Sasha Levin
commit 0101067f376eb7b9afd00279270f25d5111a091d
Author: Jeff Layton
Date: Fri Mar 17 13:13:08 2023 -0400
nfsd: don't replace page in rq\_pages if it's a continuation of last page
[ Upstream commit 27c934dd8832dd40fd34776f916dc201e18b319b ]
The splice read calls nfsd\_splice\_actor to put the pages containing file
data into the svc\_rqst->rq\_pages array. It's possible however to get a
splice result that only has a partial page at the end, if (e.g.) the
filesystem hands back a short read that doesn't cover the whole page.
nfsd\_splice\_actor will plop the partial page into its rq\_pages array and
return. Then later, when nfsd\_splice\_actor is called again, the
remainder of the page may end up being filled out. At this point,
nfsd\_splice\_actor will put the page into the array \_again\_ corrupting
the reply. If this is done enough times, rq\_next\_page will overrun the
array and corrupt the trailing fields -- the rq\_respages and
rq\_next\_page pointers themselves.
If we've already added the page to the array in the last pass, don't add
it to the array a second time when dealing with a splice continuation.
This was originally handled properly in nfsd\_splice\_actor, but commit
91e23b1c3982 ("NFSD: Clean up nfsd\_splice\_actor()") removed the check
for it.
Fixes: 91e23b1c3982 ("NFSD: Clean up nfsd\_splice\_actor()")
Cc: Al Viro
Reported-by: Dario Lesca
Tested-by: David Critch
Link: https://bugzilla.redhat.com/show\_bug.cgi?id=2150630
Signed-off-by: Jeff Layton
Signed-off-by: Chuck Lever
Signed-off-by: Sasha Levin
commit 0d89254a4320eb7de0970c478172f764125c6355
Author: Yu Kuai
Date: Wed Mar 15 14:21:54 2023 +0800
scsi: scsi\_dh\_alua: Fix memleak for 'qdata' in alua\_activate()
[ Upstream commit a13faca032acbf2699293587085293bdfaafc8ae ]
If alua\_rtpg\_queue() failed from alua\_activate(), then 'qdata' is not
freed, which will cause following memleak:
unreferenced object 0xffff88810b2c6980 (size 32):
comm "kworker/u16:2", pid 635322, jiffies 4355801099 (age 1216426.076s)
hex dump (first 32 bytes):
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ................
40 39 24 c1 ff ff ff ff 00 f8 ea 0a 81 88 ff ff @9$.............
backtrace:
[<0000000098f3a26d>] alua\_activate+0xb0/0x320
[<000000003b529641>] scsi\_dh\_activate+0xb2/0x140
[<000000007b296db3>] activate\_path\_work+0xc6/0xe0 [dm\_multipath]
[<000000007adc9ace>] process\_one\_work+0x3c5/0x730
[<00000000c457a985>] worker\_thread+0x93/0x650
[<00000000cb80e628>] kthread+0x1ba/0x210
[<00000000a1e61077>] ret\_from\_fork+0x22/0x30
Fix the problem by freeing 'qdata' in error path.
Fixes: 625fe857e4fa ("scsi: scsi\_dh\_alua: Check scsi\_device\_get() return value")
Signed-off-by: Yu Kuai
Link: https://lore.kernel.org/r/20230315062154.668812-1-yukuai1@huaweicloud.com
Reviewed-by: Benjamin Block
Reviewed-by: Bart Van Assche
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit af3de05ecbcef7403f517cd6c43a7454ba8357a6
Author: Yicong Yang
Date: Mon Mar 13 15:45:52 2023 +0800
i2c: hisi: Only use the completion interrupt to finish the transfer
[ Upstream commit d98263512684a47e81bcb72a5408958ecd1e60b0 ]
The controller will always generate a completion interrupt when the
transfer is finished normally or not. Currently we use either error or
completion interrupt to finish, this may result the completion
interrupt unhandled and corrupt the next transfer, especially at low
speed mode. Since on error case, the error interrupt will come first
then is the completion interrupt. So only use the completion interrupt
to finish the whole transfer process.
Fixes: d62fbdb99a85 ("i2c: add support for HiSilicon I2C controller")
Reported-by: Sheng Feng
Signed-off-by: Sheng Feng
Signed-off-by: Yicong Yang
Signed-off-by: Wolfram Sang
Signed-off-by: Sasha Levin
commit ae7d8ab3af1f61d6340f6ce41ac7469fc48fa438
Author: Matthias Schiffer
Date: Mon Feb 13 16:25:50 2023 +0100
i2c: mxs: ensure that DMA buffers are safe for DMA
[ Upstream commit 5190417bdf72c71b65bd9892103c6186816a6e8b ]
We found that after commit 9c46929e7989
("ARM: implement THREAD\_INFO\_IN\_TASK for uniprocessor systems"), the
PCF85063 RTC driver stopped working on i.MX28 due to regmap\_bulk\_read()
reading bogus data into a stack buffer. This is caused by the i2c-mxs
driver using DMA transfers even for messages without the I2C\_M\_DMA\_SAFE
flag, and the aforementioned commit enabling vmapped stacks.
As the MXS I2C controller requires DMA for reads of >4 bytes, DMA can't be
disabled, so the issue is fixed by using i2c\_get\_dma\_safe\_msg\_buf() to
create a bounce buffer when needed.
Fixes: 9c46929e7989 ("ARM: implement THREAD\_INFO\_IN\_TASK for uniprocessor systems")
Signed-off-by: Matthias Schiffer
Signed-off-by: Wolfram Sang
Signed-off-by: Sasha Levin
commit 8906737c78b763fee27022a78cddce211fbf79a4
Author: Alexander Stein
Date: Mon Jan 30 16:32:47 2023 +0100
i2c: imx-lpi2c: check only for enabled interrupt flags
[ Upstream commit 1c7885004567e8951d65a983be095f254dd20bef ]
When reading from I2C, the Tx watermark is set to 0. Unfortunately the
TDF (transmit data flag) is enabled when Tx FIFO entries is equal or less
than watermark. So it is set in every case, hence the reset default of 1.
This results in the MSR\_RDF \_and\_ MSR\_TDF flags to be set thus trying
to send Tx data on a read message.
Mask the IRQ status to filter for wanted flags only.
Fixes: a55fa9d0e42e ("i2c: imx-lpi2c: add low power i2c bus driver")
Signed-off-by: Alexander Stein
Tested-by: Emanuele Ghidoli
Signed-off-by: Wolfram Sang
Signed-off-by: Sasha Levin
commit b2f10e87f4bd3defa80b0b63889e8f11412c7a53
Author: AKASHI Takahiro
Date: Tue Mar 7 15:45:31 2023 +0900
igc: fix the validation logic for taprio's gate list
[ Upstream commit 2b4cc3d3f4d8ec42961e98568a0afeee96a943ab ]
The check introduced in the commit a5fd39464a40 ("igc: Lift TAPRIO schedule
restriction") can detect a false positive error in some corner case.
For instance,
tc qdisc replace ... taprio num\_tc 4
...
sched-entry S 0x01 100000 # slot#1
sched-entry S 0x03 100000 # slot#2
sched-entry S 0x04 100000 # slot#3
sched-entry S 0x08 200000 # slot#4
flags 0x02 # hardware offload
Here the queue#0 (the first queue) is on at the slot#1 and #2,
and off at the slot#3 and #4. Under the current logic, when the slot#4
is examined, validate\_schedule() returns \*false\* since the enablement
count for the queue#0 is two and it is already off at the previous slot
(i.e. #3). But this definition is truely correct.
Let's fix the logic to enforce a strict validation for consecutively-opened
slots.
Fixes: a5fd39464a40 ("igc: Lift TAPRIO schedule restriction")
Signed-off-by: AKASHI Takahiro
Reviewed-by: Kurt Kanzenbach
Acked-by: Vinicius Costa Gomes
Tested-by: Naama Meir
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit 554d9fb51da0331301aeb407a9aa1c4b5d52dcb2
Author: Akihiko Odaki
Date: Thu Dec 1 19:20:03 2022 +0900
igbvf: Regard vf reset nack as success
[ Upstream commit 02c83791ef969c6a8a150b4927193d0d0e50fb23 ]
vf reset nack actually represents the reset operation itself is
performed but no address is assigned. Therefore, e1000\_reset\_hw\_vf
should fill the "perm\_addr" with the zero address and return success on
such an occasion. This prevents its callers in netdev.c from saying PF
still resetting, and instead allows them to correctly report that no
address is assigned.
Fixes: 6ddbc4cf1f4d ("igb: Indicate failure on vf reset for empty mac address")
Signed-off-by: Akihiko Odaki
Reviewed-by: Leon Romanovsky
Tested-by: Marek Szlosek
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit 838a571c3e675b1374184e1cc573e0901fd1b844
Author: Gaosheng Cui
Date: Tue Nov 22 10:28:52 2022 +0800
intel/igbvf: free irq on the error path in igbvf\_request\_msix()
[ Upstream commit 85eb39bb39cbb5c086df1e19ba67cc1366693a77 ]
In igbvf\_request\_msix(), irqs have not been freed on the err path,
we need to free it. Fix it.
Fixes: d4e0fe01a38a ("igbvf: add new driver to support 82576 virtual functions")
Signed-off-by: Gaosheng Cui
Reviewed-by: Maciej Fijalkowski
Tested-by: Marek Szlosek
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit 98c8e5dd36e05bea8b8b65c486b5ef095ccdcbfa
Author: Ahmed Zaki
Date: Wed Mar 15 13:59:25 2023 -0600
iavf: do not track VLAN 0 filters
[ Upstream commit 964290ff32d132bf971d45b29f7de39756dab7c8 ]
When an interface with the maximum number of VLAN filters is brought up,
a spurious error is logged:
[257.483082] 8021q: adding VLAN 0 to HW filter on device enp0s3
[257.483094] iavf 0000:00:03.0 enp0s3: Max allowed VLAN filters 8. Remove existing VLANs or disable filtering via Ethtool if supported.
The VF driver complains that it cannot add the VLAN 0 filter.
On the other hand, the PF driver always adds VLAN 0 filter on VF
initialization. The VF does not need to ask the PF for that filter at
all.
Fix the error by not tracking VLAN 0 filters altogether. With that, the
check added by commit 0e710a3ffd0c ("iavf: Fix VF driver counting VLAN 0
filters") in iavf\_virtchnl.c is useless and might be confusing if left as
it suggests that we track VLAN 0.
Fixes: 0e710a3ffd0c ("iavf: Fix VF driver counting VLAN 0 filters")
Signed-off-by: Ahmed Zaki
Reviewed-by: Michal Kubiak
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit 461ee13ff0c2c0e853d959a09027e8026fb89af0
Author: Alexander Lobakin
Date: Wed Mar 1 12:59:08 2023 +0100
iavf: fix non-tunneled IPv6 UDP packet type and hashing
[ Upstream commit de58647b4301fe181f9c38e8b46f7021584ae427 ]
Currently, IAVF's decode\_rx\_desc\_ptype() correctly reports payload type
of L4 for IPv4 UDP packets and IPv{4,6} TCP, but only L3 for IPv6 UDP.
Originally, i40e, ice and iavf were affected.
Commit 73df8c9e3e3d ("i40e: Correct UDP packet header for non\_tunnel-ipv6")
fixed that in i40e, then
commit 638a0c8c8861 ("ice: fix incorrect payload indicator on PTYPE")
fixed that for ice.
IPv6 UDP is L4 obviously. Fix it and make iavf report correct L4 hash
type for such packets, so that the stack won't calculate it on CPU when
needs it.
Fixes: 206812b5fccb ("i40e/i40evf: i40e implementation for skb\_set\_hash")
Reviewed-by: Larysa Zaremba
Reviewed-by: Michal Kubiak
Signed-off-by: Alexander Lobakin
Tested-by: Rafal Romanowski
Reviewed-by: Leon Romanovsky
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit 6b91c79fbd973f627d9056e6f89f16b06569cd8b
Author: Alexander Lobakin
Date: Wed Mar 1 12:59:07 2023 +0100
iavf: fix inverted Rx hash condition leading to disabled hash
[ Upstream commit 32d57f667f871bc5a8babbe27ea4c5e668ee0ea8 ]
Condition, which checks whether the netdev has hashing enabled is
inverted. Basically, the tagged commit effectively disabled passing flow
hash from descriptor to skb, unless user \*disables\* it via Ethtool.
Commit a876c3ba59a6 ("i40e/i40evf: properly report Rx packet hash")
fixed this problem, but only for i40e.
Invert the condition now in iavf and unblock passing hash to skbs again.
Fixes: 857942fd1aa1 ("i40e: Fix Rx hash reported to the stack by our driver")
Reviewed-by: Larysa Zaremba
Reviewed-by: Michal Kubiak
Signed-off-by: Alexander Lobakin
Tested-by: Rafal Romanowski
Reviewed-by: Leon Romanovsky
Signed-off-by: Tony Nguyen
Signed-off-by: Sasha Levin
commit bb2e3bfb2a79db0c2057c6f701b782954394c67f
Author: Kal Conley
Date: Wed Mar 8 18:40:13 2023 +0100
xsk: Add missing overflow check in xdp\_umem\_reg
[ Upstream commit c7df4813b149362248d6ef7be41a311e27bf75fe ]
The number of chunks can overflow u32. Make sure to return -EINVAL on
overflow. Also remove a redundant u32 cast assigning umem->npgs.
Fixes: bbff2f321a86 ("xsk: new descriptor addressing scheme")
Signed-off-by: Kal Conley
Signed-off-by: Daniel Borkmann
Acked-by: Magnus Karlsson
Link: https://lore.kernel.org/bpf/20230308174013.1114745-1-kal.conley@dectris.com
Signed-off-by: Sasha Levin
commit 90f2b0b417094b13a1627fbda6a92cb661acfd6b
Author: Chengen Du
Date: Wed Mar 8 16:03:27 2023 +0800
NFS: Correct timing for assigning access cache timestamp
[ Upstream commit 21fd9e8700de86d1169f6336e97d7a74916ed04a ]
When the user's login time is newer than the cache's timestamp,
the original entry in the RB-tree will be replaced by a new entry.
Currently, the timestamp is only set if the entry is not found in
the RB-tree, which can cause the timestamp to be undefined when
the entry exists. This may result in a significant increase in
ACCESS operations if the timestamp is set to zero.
Signed-off-by: Chengen Du
Fixes: 0eb43812c027 ("NFS: Clear the file access cache upon login”)
Reviewed-by: Benjamin Coddington
Signed-off-by: Anna Schumaker
Signed-off-by: Sasha Levin
commit 89ab36bb8bf61c3712b2245682a4bda8ce11e37b
Author: Dave Wysochanski
Date: Thu Mar 9 13:58:52 2023 -0500
NFS: Fix /proc/PID/io read\_bytes for buffered reads
[ Upstream commit 9c88ea00fef03031ce6554531e89be82f6a42835 ]
Prior to commit 8786fde8421c ("Convert NFS from readpages to
readahead"), nfs\_readpages() used the old mm interface read\_cache\_pages()
which called task\_io\_account\_read() for each NFS page read. After
this commit, nfs\_readpages() is converted to nfs\_readahead(), which
now uses the new mm interface readahead\_page(). The new interface
requires callers to call task\_io\_account\_read() themselves.
In addition, to nfs\_readahead() task\_io\_account\_read() should also
be called from nfs\_read\_folio().
Fixes: 8786fde8421c ("Convert NFS from readpages to readahead")
Link: https://lore.kernel.org/linux-nfs/CAPt2mGNEYUk5u8V4abe=5MM5msZqmvzCVrtCP4Qw1n=gCHCnww@mail.gmail.com/
Signed-off-by: Dave Wysochanski
Signed-off-by: Anna Schumaker
Signed-off-by: Sasha Levin
commit 2319cffd23411bfc7c40cd2128209c935d3e122c
Author: Alexander Stein
Date: Wed Mar 8 11:17:20 2023 +0100
arm64: dts: imx93: add missing #address-cells and #size-cells to i2c nodes
[ Upstream commit b3cdf730486b048ca0bf23bef050550d9fd40422 ]
Add them to the SoC .dtsi, so that not every board has to specify them.
Fixes: 1225396fefea ("arm64: dts: imx93: add lpi2c nodes")
Signed-off-by: Alexander Stein
Signed-off-by: Shawn Guo
Signed-off-by: Sasha Levin
commit b68cb0a1824ecf1a6382f601dc9c577b011be6a5
Author: Marek Vasut
Date: Tue Feb 28 22:52:44 2023 +0100
arm64: dts: imx8mn: specify #sound-dai-cells for SAI nodes
[ Upstream commit 62fb54148cd6eb456ff031be8fb447c98cf0bd9b ]
Add #sound-dai-cells properties to SAI nodes.
Reviewed-by: Adam Ford
Reviewed-by: Fabio Estevam
Fixes: 9e9860069725 ("arm64: dts: imx8mn: Add SAI nodes")
Signed-off-by: Marek Vasut
Reviewed-by: Marco Felsch
Signed-off-by: Shawn Guo
Signed-off-by: Sasha Levin
commit 784e944e7c45863e647f159c0f2767a1d7036c4c
Author: Peng Fan
Date: Sun Feb 26 21:12:14 2023 +0800
ARM: dts: imx6sl: tolino-shine2hd: fix usbotg1 pinctrl
[ Upstream commit 1cd489e1ada1cffa56bd06fd4609f5a60a985d43 ]
usb@2184000: 'pinctrl-0' is a dependency of 'pinctrl-names'
Signed-off-by: Peng Fan
Fixes: 9c7016f1ca6d ("ARM: dts: imx: add devicetree for Tolino Shine 2 HD")
Signed-off-by: Shawn Guo
Signed-off-by: Sasha Levin
commit 60995b11151ad16479cc6a0b38aac7e31c9a7823
Author: Peng Fan
Date: Sun Feb 26 21:12:13 2023 +0800
ARM: dts: imx6sll: e60k02: fix usbotg1 pinctrl
[ Upstream commit 957c04e9784c7c757e8cc293d7fb2a60cdf461b6 ]
usb@2184000: 'pinctrl-0' is a dependency of 'pinctrl-names'
Signed-off-by: Peng Fan
Fixes: c100ea86e6ab ("ARM: dts: add Netronix E60K02 board common file")
Signed-off-by: Shawn Guo
Signed-off-by: Sasha Levin
commit 324b965dfd14cd62a6dc2beeaefa975f36741370
Author: Peng Fan
Date: Sun Feb 26 21:12:12 2023 +0800
ARM: dts: imx6sll: e70k02: fix usbotg1 pinctrl
[ Upstream commit 3d37f7685d525e58674c23d607020e66d501dcd1 ]
usb@2184000: 'pinctrl-0' is a dependency of 'pinctrl-names'
Signed-off-by: Peng Fan
Fixes: 3bb3fd856505 ("ARM: dts: add Netronix E70K02 board common file")
Signed-off-by: Shawn Guo
Signed-off-by: Sasha Levin
commit b9a25a7fa966a147bcc3258e315df76710b4dd59
Author: Andrew Halaney
Date: Tue Feb 14 11:15:05 2023 -0600
arm64: dts: imx8dxl-evk: Fix eqos phy reset gpio
[ Upstream commit feafeb53140af3cde3fba46b292b15b3a0c0635c ]
The deprecated property is named snps,reset-gpio, but this devicetree
used snps,reset-gpios instead which results in the reset not being used
and the following make dtbs\_check error:
./arch/arm64/boot/dts/freescale/imx8dxl-evk.dtb: ethernet@5b050000: 'snps,reset-gpio' is a dependency of 'snps,reset-delays-us'
From schema: ./Documentation/devicetree/bindings/net/snps,dwmac.yaml
Use the preferred method of defining the reset gpio in the phy node
itself. Note that this drops the 10 us pre-delay, but prior this wasn't
used at all and a pre-delay doesn't make much sense in this context so
it should be fine.
Fixes: 8dd495d12374 ("arm64: dts: freescale: add support for i.MX8DXL EVK board")
Signed-off-by: Andrew Halaney
Acked-by: Krzysztof Kozlowski
Signed-off-by: Shawn Guo
Signed-off-by: Sasha Levin
commit e8056b906cb51088d8b94bb35fad37279bc781f7
Author: Wei Fang
Date: Fri Dec 16 09:14:34 2022 +0800
arm64: dts: imx8dxl-evk: Disable hibernation mode of AR8031 for EQOS
[ Upstream commit 0deefb5bd1382aae0aed7c8b266d5088a5308a26 ]
The hibernation mode of AR8031 PHY defaults to be enabled after hardware
reset. When the cable is unplugged, the PHY will enter hibernation mode
after about 10 senconds and the PHY clocks will be stopped to save
power. However, due to the design of EQOS, the mac needs the RX\_CLK of
PHY for software reset to complete. Otherwise the software reset of EQOS
will be failed and do not work correctly. The only way is to disable
hibernation mode of AR8031 PHY for EQOS, the "qca,disable-hibernation-mode"
property is used for this purpose and has already been submitted to the
upstream, for more details please refer to the below link:
https://lore.kernel.org/netdev/20220818030054.1010660-2-wei.fang@nxp.com/
This issue is easy to reproduce, just unplug the cable and "ifconfig eth0
down", after about 10 senconds, then "ifconfig eth0 up", you will see
failure log on the serial port. The log is shown as following:
root@imx8dxlevk:~#
[34.941970] imx-dwmac 5b050000.ethernet eth0: Link is Down
root@imx8dxlevk:~# ifconfig eth0 down
[35.437814] imx-dwmac 5b050000.ethernet eth0: FPE workqueue stop
[35.507913] imx-dwmac 5b050000.ethernet eth0: PHY [stmmac-1:00] driver [Qualcomm Atheros AR8031/AR8033] (irq=POLL)
[35.518613] imx-dwmac 5b050000.ethernet eth0: configuring for phy/rgmii-id link mode
root@imx8dxlevk:~# ifconfig eth0 up
[71.143044] imx-dwmac 5b050000.ethernet eth0: Register MEM\_TYPE\_PAGE\_POOL RxQ-0
[71.215855] imx-dwmac 5b050000.ethernet eth0: PHY [stmmac-1:00] driver [Qualcomm Atheros AR8031/AR8033] (irq=POLL)
[72.230417] imx-dwmac 5b050000.ethernet: Failed to reset the dma
[72.236512] imx-dwmac 5b050000.ethernet eth0: stmmac\_hw\_setup: DMA engine initialization failed
[72.245258] imx-dwmac 5b050000.ethernet eth0: \_\_stmmac\_open: Hw setup failed
SIOCSIFFLAGS: Connection timed out
After applying this patch, the software reset of EQOS will be
successful. And the log is shown as below.
root@imx8dxlevk:~# ifconfig eth0 up
[96.114344] imx-dwmac 5b050000.ethernet eth0: Register MEM\_TYPE\_PAGE\_POOL RxQ-0
[96.171466] imx-dwmac 5b050000.ethernet eth0: PHY [stmmac-1:00] driver [Qualcomm Atheros AR8031/AR8033] (irq=POLL)
[96.188883] imx-dwmac 5b050000.ethernet eth0: No Safety Features support found
[96.196221] imx-dwmac 5b050000.ethernet eth0: IEEE 1588-2008 Advanced Timestamp supported
[96.204846] imx-dwmac 5b050000.ethernet eth0: registered PTP clock
[96.225558] imx-dwmac 5b050000.ethernet eth0: FPE workqueue start
[96.236858] imx-dwmac 5b050000.ethernet eth0: configuring for phy/rgmii-id link mode
[96.249358] 8021q: adding VLAN 0 to HW filter on device eth0
Signed-off-by: Wei Fang
Reviewed-by: Clark Wang
Signed-off-by: Shawn Guo
Stable-dep-of: feafeb53140a ("arm64: dts: imx8dxl-evk: Fix eqos phy reset gpio")
Signed-off-by: Sasha Levin
commit fdf7c1b9ccf2f5a2c34b703fd0325a9e5aaabc4a
Author: Ard Biesheuvel
Date: Sun Mar 12 23:00:03 2023 +0100
efi: earlycon: Reprobe after parsing config tables
[ Upstream commit 8b3a149db461d3286d1e211112de3b44ccaeaf71 ]
Commit 732ea9db9d8a ("efi: libstub: Move screen\_info handling to common
code") reorganized the earlycon handling so that all architectures pass
the screen\_info data via a EFI config table instead of populating struct
screen\_info directly, as the latter is only possible when the EFI stub
is baked into the kernel (and not into the decompressor).
However, this means that struct screen\_info may not have been populated
yet by the time the earlycon probe takes place, and this results in a
non-functional early console.
So let's probe again right after parsing the config tables and
populating struct screen\_info. Note that this means that earlycon output
starts a bit later than before, and so it may fail to capture issues
that occur while doing the early EFI initialization.
Fixes: 732ea9db9d8a ("efi: libstub: Move screen\_info handling to common code")
Reported-by: Shawn Guo
Tested-by: Shawn Guo
Signed-off-by: Ard Biesheuvel
Signed-off-by: Sasha Levin
commit 53edfda851dd1ce41ac049ce2f195dc41dd27cc1
Author: Lorenzo Bianconi
Date: Mon Mar 6 18:42:51 2023 +0100
wifi: mt76: connac: do not check WED status for non-mmio devices
[ Upstream commit 5683e1488aa9b0805a9403d215e48fed29d6d923 ]
WED is supported just for mmio devices, so do not check it for usb or
sdio devices. This patch fixes the crash reported below:
[ 21.946627] wlp0s3u1i3: authenticate with c4:41:1e:f5:2b:1d
[ 22.525298] wlp0s3u1i3: send auth to c4:41:1e:f5:2b:1d (try 1/3)
[ 22.548274] wlp0s3u1i3: authenticate with c4:41:1e:f5:2b:1d
[ 22.557694] wlp0s3u1i3: send auth to c4:41:1e:f5:2b:1d (try 1/3)
[ 22.565885] wlp0s3u1i3: authenticated
[ 22.569502] wlp0s3u1i3: associate with c4:41:1e:f5:2b:1d (try 1/3)
[ 22.578966] wlp0s3u1i3: RX AssocResp from c4:41:1e:f5:2b:1d (capab=0x11 status=30 aid=3)
[ 22.579113] wlp0s3u1i3: c4:41:1e:f5:2b:1d rejected association temporarily; comeback duration 1000 TU (1024 ms)
[ 23.649518] wlp0s3u1i3: associate with c4:41:1e:f5:2b:1d (try 2/3)
[ 23.752528] wlp0s3u1i3: RX AssocResp from c4:41:1e:f5:2b:1d (capab=0x11 status=0 aid=3)
[ 23.797450] wlp0s3u1i3: associated
[ 24.959527] kernel tried to execute NX-protected page - exploit attempt? (uid: 0)
[ 24.959640] BUG: unable to handle page fault for address: ffff88800c223200
[ 24.959706] #PF: supervisor instruction fetch in kernel mode
[ 24.959788] #PF: error\_code(0x0011) - permissions violation
[ 24.959846] PGD 2c01067 P4D 2c01067 PUD 2c02067 PMD c2a8063 PTE 800000000c223163
[ 24.959957] Oops: 0011 [#1] PREEMPT SMP
[ 24.960009] CPU: 0 PID: 391 Comm: wpa\_supplicant Not tainted 6.2.0-kvm #18
[ 24.960089] Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.1-2.fc37 04/01/2014
[ 24.960191] RIP: 0010:0xffff88800c223200
[ 24.960446] RSP: 0018:ffffc90000ff7698 EFLAGS: 00010282
[ 24.960513] RAX: ffff888028397010 RBX: ffff88800c26e630 RCX: 0000000000000058
[ 24.960598] RDX: ffff88800c26f844 RSI: 0000000000000006 RDI: ffff888028397010
[ 24.960682] RBP: ffff88800ea72f00 R08: 18b873fbab2b964c R09: be06b38235f3c63c
[ 24.960766] R10: 18b873fbab2b964c R11: be06b38235f3c63c R12: 0000000000000001
[ 24.960853] R13: ffff88800c26f84c R14: ffff8880063f0ff8 R15: ffff88800c26e644
[ 24.960950] FS: 00007effcea327c0(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[ 24.961036] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 24.961106] CR2: ffff88800c223200 CR3: 000000000eaa2000 CR4: 00000000000006b0
[ 24.961190] Call Trace:
[ 24.961219]
[ 24.961245] ? mt76\_connac\_mcu\_add\_key+0x2cf/0x310
[ 24.961313] ? mt7921\_set\_key+0x150/0x200
[ 24.961365] ? drv\_set\_key+0xa9/0x1b0
[ 24.961418] ? ieee80211\_key\_enable\_hw\_accel+0xd9/0x240
[ 24.961485] ? ieee80211\_key\_replace+0x3f3/0x730
[ 24.961541] ? crypto\_shash\_setkey+0x89/0xd0
[ 24.961597] ? ieee80211\_key\_link+0x2d7/0x3a0
[ 24.961664] ? crypto\_aead\_setauthsize+0x31/0x50
[ 24.961730] ? sta\_info\_hash\_lookup+0xa6/0xf0
[ 24.961785] ? ieee80211\_add\_key+0x1fc/0x250
[ 24.961842] ? rdev\_add\_key+0x41/0x140
[ 24.961882] ? nl80211\_parse\_key+0x6c/0x2f0
[ 24.961940] ? nl80211\_new\_key+0x24a/0x290
[ 24.961984] ? genl\_rcv\_msg+0x36c/0x3a0
[ 24.962036] ? rdev\_mod\_link\_station+0xe0/0xe0
[ 24.962102] ? nl80211\_set\_key+0x410/0x410
[ 24.962143] ? nl80211\_pre\_doit+0x200/0x200
[ 24.962187] ? genl\_bind+0xc0/0xc0
[ 24.962217] ? netlink\_rcv\_skb+0xaa/0xd0
[ 24.962259] ? genl\_rcv+0x24/0x40
[ 24.962300] ? netlink\_unicast+0x224/0x2f0
[ 24.962345] ? netlink\_sendmsg+0x30b/0x3d0
[ 24.962388] ? \_\_\_\_sys\_sendmsg+0x109/0x1b0
[ 24.962388] ? \_\_\_\_sys\_sendmsg+0x109/0x1b0
[ 24.962440] ? \_\_import\_iovec+0x2e/0x110
[ 24.962482] ? \_\_\_sys\_sendmsg+0xbe/0xe0
[ 24.962525] ? mod\_objcg\_state+0x25c/0x330
[ 24.962576] ? \_\_dentry\_kill+0x19e/0x1d0
[ 24.962618] ? call\_rcu+0x18f/0x270
[ 24.962660] ? \_\_dentry\_kill+0x19e/0x1d0
[ 24.962702] ? \_\_x64\_sys\_sendmsg+0x70/0x90
[ 24.962744] ? do\_syscall\_64+0x3d/0x80
[ 24.962796] ? exit\_to\_user\_mode\_prepare+0x1b/0x70
[ 24.962852] ? entry\_SYSCALL\_64\_after\_hwframe+0x46/0xb0
[ 24.962913]
[ 24.962939] Modules linked in:
[ 24.962981] CR2: ffff88800c223200
[ 24.963022] ---[ end trace 0000000000000000 ]---
[ 24.963087] RIP: 0010:0xffff88800c223200
[ 24.963323] RSP: 0018:ffffc90000ff7698 EFLAGS: 00010282
[ 24.963376] RAX: ffff888028397010 RBX: ffff88800c26e630 RCX: 0000000000000058
[ 24.963458] RDX: ffff88800c26f844 RSI: 0000000000000006 RDI: ffff888028397010
[ 24.963538] RBP: ffff88800ea72f00 R08: 18b873fbab2b964c R09: be06b38235f3c63c
[ 24.963622] R10: 18b873fbab2b964c R11: be06b38235f3c63c R12: 0000000000000001
[ 24.963705] R13: ffff88800c26f84c R14: ffff8880063f0ff8 R15: ffff88800c26e644
[ 24.963788] FS: 00007effcea327c0(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[ 24.963871] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 24.963941] CR2: ffff88800c223200 CR3: 000000000eaa2000 CR4: 00000000000006b0
[ 24.964018] note: wpa\_supplicant[391] exited with irqs disabled
Fixes: d1369e515efe ("wifi: mt76: connac: introduce mt76\_connac\_mcu\_sta\_wed\_update utility routine")
Signed-off-by: Lorenzo Bianconi
Acked-by: Felix Fietkau
Signed-off-by: Kalle Valo
Link: https://lore.kernel.org/r/c42168429453474213fa8244bf4b069de4531f40.1678124335.git.lorenzo@kernel.org
Signed-off-by: Sasha Levin
commit 2d34f27714c97a9786a30b3bb54944d6d8ed612f
Author: Lorenzo Bianconi
Date: Thu Feb 23 00:10:25 2023 +0100
wifi: mt76: do not run mt76\_unregister\_device() on unregistered hw
[ Upstream commit 41130c32f3a18fcc930316da17f3a5f3bc326aa1 ]
Trying to probe a mt7921e pci card without firmware results in a
successful probe where ieee80211\_register\_hw hasn't been called. When
removing the driver, ieee802111\_unregister\_hw is called unconditionally
leading to a kernel NULL pointer dereference.
Fix the issue running mt76\_unregister\_device routine just for registered
hw.
Link: https://bugs.debian.org/1029116
Link: https://bugs.kali.org/view.php?id=8140
Reported-by: Stuart Hayhurst
Fixes: 1c71e03afe4b ("mt76: mt7921: move mt7921\_init\_hw in a dedicated work")
Tested-by: Helmut Grohne
Signed-off-by: Lorenzo Bianconi
Signed-off-by: Kalle Valo
Link: https://lore.kernel.org/r/be3457d82f4e44bb71a22b2b5db27b644a37b1e1.1677107277.git.lorenzo@kernel.org
Signed-off-by: Sasha Levin
commit a7d686b36aa8021ee96128290ac3b58c4c1f6297
Author: Zheng Wang
Date: Sun Mar 12 01:46:50 2023 +0800
power: supply: da9150: Fix use after free bug in da9150\_charger\_remove due to race condition
[ Upstream commit 06615d11cc78162dfd5116efb71f29eb29502d37 ]
In da9150\_charger\_probe, &charger->otg\_work is bound with
da9150\_charger\_otg\_work. da9150\_charger\_otg\_ncb may be
called to start the work.
If we remove the module which will call da9150\_charger\_remove
to make cleanup, there may be a unfinished work. The possible
sequence is as follows:
Fix it by canceling the work before cleanup in the da9150\_charger\_remove
CPU0 CPUc1
|da9150\_charger\_otg\_work
da9150\_charger\_remove |
power\_supply\_unregister |
device\_unregister |
power\_supply\_dev\_release|
kfree(psy) |
|
| power\_supply\_changed(charger->usb);
| //use
Fixes: c1a281e34dae ("power: Add support for DA9150 Charger")
Signed-off-by: Zheng Wang
Signed-off-by: Sebastian Reichel
Signed-off-by: Sasha Levin
commit 2da4b860f3055ae40a809c020398778e6c27b856
Author: Zheng Wang
Date: Fri Mar 10 01:47:28 2023 +0800
power: supply: bq24190: Fix use after free bug in bq24190\_remove due to race condition
[ Upstream commit 47c29d69212911f50bdcdd0564b5999a559010d4 ]
In bq24190\_probe, &bdi->input\_current\_limit\_work is bound
with bq24190\_input\_current\_limit\_work. When external power
changed, it will call bq24190\_charger\_external\_power\_changed
to start the work.
If we remove the module which will call bq24190\_remove to make
cleanup, there may be a unfinished work. The possible
sequence is as follows:
CPU0 CPUc1
|bq24190\_input\_current\_limit\_work
bq24190\_remove |
power\_supply\_unregister |
device\_unregister |
power\_supply\_dev\_release|
kfree(psy) |
|
| power\_supply\_get\_property\_from\_supplier
| //use
Fix it by finishing the work before cleanup in the bq24190\_remove
Fixes: 97774672573a ("power\_supply: Initialize changed\_work before calling device\_add")
Signed-off-by: Zheng Wang
Signed-off-by: Sebastian Reichel
Signed-off-by: Sasha Levin
commit a3fdb601969a8c82e40c8a0998987736fff10555
Author: Manivannan Sadhasivam
Date: Tue Mar 7 21:02:01 2023 +0530
arm64: dts: qcom: sm8450: Mark UFS controller as cache coherent
[ Upstream commit 8ba961d4339c5db0e69ff6627606fe1f34c838e5 ]
The UFS controller on SM8450 supports cache coherency, hence add the
"dma-coherent" property to mark it as such.
Fixes: 07fa917a335e ("arm64: dts: qcom: sm8450: add ufs nodes")
Signed-off-by: Manivannan Sadhasivam
Reviewed-by: Neil Armstrong
Signed-off-by: Bjorn Andersson
Link: https://lore.kernel.org/r/20230307153201.180626-2-manivannan.sadhasivam@linaro.org
Signed-off-by: Sasha Levin
commit 7a9f1abacf18001c9d2f087cb2347c107031089d
Author: Krzysztof Kozlowski
Date: Wed Mar 8 13:31:29 2023 +0100
arm64: dts: qcom: sm8450: correct WSA2 assigned clocks
[ Upstream commit 6df6fab9320bc9ebdf50136a01e7bf0ee5984c62 ]
The WSA2 assigned-clocks were copied from WSA, but the WSA2 uses its
own.
Fixes: 14341e76dbc7 ("arm64: dts: qcom: sm8450: add Soundwire and LPASS")
Signed-off-by: Krzysztof Kozlowski
Reviewed-by: Konrad Dybcio
Signed-off-by: Bjorn Andersson
Link: https://lore.kernel.org/r/20230308123129.232642-1-krzysztof.kozlowski@linaro.org
Signed-off-by: Sasha Levin
commit 2ad7bd724fe289b0f61b92d29fd55e71f74fb2ef
Author: Konrad Dybcio
Date: Mon Jan 9 14:56:47 2023 +0100
arm64: dts: qcom: sm6375: Add missing power-domain-named to CDSP
[ Upstream commit 11d5e41f5e129e39bddedc7244a0946a802d2e8e ]
This was omitted when first introducing the node. Fix it.
Fixes: fe6fd26aeddf ("arm64: dts: qcom: sm6375: Add ADSP&CDSP")
Signed-off-by: Konrad Dybcio
Signed-off-by: Bjorn Andersson
Link: https://lore.kernel.org/r/20230109135647.339224-5-konrad.dybcio@linaro.org
Signed-off-by: Sasha Levin
commit 22de8838e560773cc1f4342a3f274c3f41a7037b
Author: Manivannan Sadhasivam
Date: Sat Feb 11 10:54:15 2023 +0530
arm64: dts: qcom: sc8280xp: Add label property to vadc channel nodes
[ Upstream commit 8013295662f55696e5953ef14c31ba03721adf8f ]
For uniquely identifying the vadc channels, label property has to be used.
The initial commit adding vadc support assumed that the driver will use the
unit address along with the node name to identify the channels. But this
assumption is now broken by,
commit 701c875aded8 ("iio: adc: qcom-spmi-adc5: Fix the channel name") that
stripped unit address from channel names. This results in probe failure of
the vadc driver:
[ 8.380370] iio iio:device0: tried to double register : in\_temp\_pmic-die-temp\_input
[ 8.380383] qcom-spmi-adc5 c440000.spmi:pmic@0:adc@3100: Failed to register sysfs interfaces
[ 8.380386] qcom-spmi-adc5: probe of c440000.spmi:pmic@0:adc@3100 failed with error -16
Hence, let's get rid of the assumption about drivers and rely on label
property to uniquely identify the channels.
The labels are derived from the schematics for each PMIC. For internal adc
channels such as die and xo, the PMIC names are used as a prefix.
Fixes: 7c0151347401 ("arm64: dts: qcom: sc8280xp-x13s: Add PM8280\_{1/2} ADC\_TM5 channels")
Fixes: 9d41cd17394a ("arm64: dts: qcom: sc8280xp-x13s: Add PMR735A VADC channel")
Fixes: 3375151a7185 ("arm64: dts: qcom: sc8280xp-x13s: Add PM8280\_{1/2} VADC channels")
Fixes: 9a6b3042c533 ("arm64: dts: qcom: sc8280xp-x13s: Add PMK8280 VADC channels")
Reported-by: Steev Klimaszewski
Signed-off-by: Manivannan Sadhasivam
Signed-off-by: Bjorn Andersson
Link: https://lore.kernel.org/r/20230211052415.14581-1-manivannan.sadhasivam@linaro.org
Signed-off-by: Sasha Levin
commit e8ba2a65e1d9e1628654b783875912ee2a5d4c8f
Author: Alexander Stein
Date: Tue Jan 31 11:35:58 2023 +0100
arm64: dts: freescale: imx8-ss-lsio: Fix flexspi clock order
[ Upstream commit fd4334a06d452ce89a0bb831b03130c51331d927 ]
The correct clock order is "fspi\_en" and "fspi". As they are identical
just reordering the names is sufficient.
Fixes: 6276d66984e9 ("arm64: dts: imx8dxl: add flexspi0 support")
Signed-off-by: Alexander Stein
Signed-off-by: Shawn Guo
Signed-off-by: Sasha Levin
commit 0c815689252cddab649f079fa63bd2ec846d8bb0
Author: Cruise Hung
Date: Wed Mar 22 17:08:41 2023 -0500
drm/amd/display: Fix DP MST sinks removal issue
[ Upstream commit cbd6c1b17d3b42b7935526a86ad5f66838767d03 ]
[Why]
In USB4 DP tunneling, it's possible to have this scenario that
the path becomes unavailable and CM tears down the path a little bit late.
So, in this case, the HPD is high but fails to read any DPCD register.
That causes the link connection type to be set to sst.
And not all sinks are removed behind the MST branch.
[How]
Restore the link connection type if it fails to read DPCD register.
Cc: stable@vger.kernel.org
Cc: Mario Limonciello
Reviewed-by: Wenjing Liu
Acked-by: Qingqing Zhuo
Signed-off-by: Cruise Hung
Tested-by: Daniel Wheeler
Signed-off-by: Alex Deucher
(cherry picked from commit cbd6c1b17d3b42b7935526a86ad5f66838767d03)
Modified for stable backport as a lot of the code in this file was moved
in 6.3 to drivers/gpu/drm/amd/display/dc/link/link\_detection.c.
Signed-off-by: Mario Limonciello
Signed-off-by: Sasha Levin
commit 9d58fc503052dd7ac3ea333ac098046a8d77cd2a
Author: Saaem Rizvi
Date: Mon Feb 27 18:55:07 2023 -0500
drm/amd/display: Remove OTG DIV register write for Virtual signals.
[ Upstream commit 709671ffb15dcd1b4f6afe2a9d8c67c7c4ead4a1 ]
[WHY]
Hot plugging and then hot unplugging leads to k1 and k2 values to
change, as signal is detected as a virtual signal on hot unplug. Writing
these values to OTG\_PIXEL\_RATE\_DIV register might cause primary display
to blank (known hw bug).
[HOW]
No longer write k1 and k2 values to register if signal is virtual, we
have safe guards in place in the case that k1 and k2 is unassigned so
that an unknown value is not written to the register either.
Cc: stable@vger.kernel.org
Cc: Mario Limonciello
Reviewed-by: Samson Tam
Reviewed-by: Alvin Lee
Acked-by: Qingqing Zhuo
Signed-off-by: Saaem Rizvi
Tested-by: Daniel Wheeler
Signed-off-by: Alex Deucher
Signed-off-by: Sasha Levin
commit c853e209ea1a6c06cdf6ccaa756c031886760ebe
Author: Aurabindo Pillai
Date: Mon Jan 30 13:07:59 2023 -0500
drm/amd/display: fix k1 k2 divider programming for phantom streams
[ Upstream commit 3b214bb7185d8284d7d4c53e15127f69a375abf6 ]
[Why & How]
When k1 and k2 divider programming logic is executed for a phantom
stream, the corresponding master stream should be used for the
calculation. Fix the if condition to use the master stream for checking
signal type instead of the phantom stream.
Reviewed-by: Alvin Lee
Acked-by: Qingqing Zhuo
Signed-off-by: Aurabindo Pillai
Tested-by: Daniel Wheeler
Signed-off-by: Alex Deucher
Stable-dep-of: 709671ffb15d ("drm/amd/display: Remove OTG DIV register write for Virtual signals.")
Signed-off-by: Sasha Levin
commit 0ca90dc98e4f8b48c2bb67ce9b5b4bce85ef05b5
Author: Costa Shulyupin
Date: Thu Mar 16 16:45:35 2023 +0200
tracing/hwlat: Replace sched\_setaffinity with set\_cpus\_allowed\_ptr
[ Upstream commit 71c7a30442b724717a30d5e7d1662ba4904eb3d4 ]
There is a problem with the behavior of hwlat in a container,
resulting in incorrect output. A warning message is generated:
"cpumask changed while in round-robin mode, switching to mode none",
and the tracing\_cpumask is ignored. This issue arises because
the kernel thread, hwlatd, is not a part of the container, and
the function sched\_setaffinity is unable to locate it using its PID.
Additionally, the task\_struct of hwlatd is already known.
Ultimately, the function set\_cpus\_allowed\_ptr achieves
the same outcome as sched\_setaffinity, but employs task\_struct
instead of PID.
Test case:
# cd /sys/kernel/tracing
# echo 0 > tracing\_on
# echo round-robin > hwlat\_detector/mode
# echo hwlat > current\_tracer
# unshare --fork --pid bash -c 'echo 1 > tracing\_on'
# dmesg -c
Actual behavior:
[573502.809060] hwlat\_detector: cpumask changed while in round-robin mode, switching to mode none
Link: https://lore.kernel.org/linux-trace-kernel/20230316144535.1004952-1-costa.shul@redhat.com
Cc: Masami Hiramatsu
Fixes: 0330f7aa8ee63 ("tracing: Have hwlat trace migrate across tracing\_cpumask CPUs")
Signed-off-by: Costa Shulyupin
Acked-by: Daniel Bristot de Oliveira
Signed-off-by: Steven Rostedt (Google)
Signed-off-by: Sasha Levin
commit f23e237ed3153ec462f0458f459ae5c6e4617684
Author: Song Liu
Date: Mon Mar 13 10:16:08 2023 -0700
perf: fix perf\_event\_context->time
[ Upstream commit baf1b12a67f5b24f395baca03e442ce27cab0c18 ]
Time readers rely on perf\_event\_context->[time|timestamp|timeoffset] to get
accurate time\_enabled and time\_running for an event. The difference between
ctx->timestamp and ctx->time is the among of time when the context is not
enabled. \_\_update\_context\_time(ctx, false) is used to increase timestamp,
but not time. Therefore, it should only be called in ctx\_sched\_in() when
EVENT\_TIME was not enabled.
Fixes: 09f5e7dc7ad7 ("perf: Fix perf\_event\_read\_local() time")
Signed-off-by: Song Liu
Signed-off-by: Peter Zijlstra (Intel)
Acked-by: Namhyung Kim
Link: https://lkml.kernel.org/r/20230313171608.298734-1-song@kernel.org
Signed-off-by: Sasha Levin
commit 3a776fddb4e5598c8bfcd4ad094fba34f9856fc9
Author: Yang Jihong
Date: Tue Mar 14 04:47:35 2023 +0000
perf/core: Fix perf\_output\_begin parameter is incorrectly invoked in perf\_event\_bpf\_output
[ Upstream commit eb81a2ed4f52be831c9fb879752d89645a312c13 ]
syzkaller reportes a KASAN issue with stack-out-of-bounds.
The call trace is as follows:
dump\_stack+0x9c/0xd3
print\_address\_description.constprop.0+0x19/0x170
\_\_kasan\_report.cold+0x6c/0x84
kasan\_report+0x3a/0x50
\_\_perf\_event\_header\_\_init\_id+0x34/0x290
perf\_event\_header\_\_init\_id+0x48/0x60
perf\_output\_begin+0x4a4/0x560
perf\_event\_bpf\_output+0x161/0x1e0
perf\_iterate\_sb\_cpu+0x29e/0x340
perf\_iterate\_sb+0x4c/0xc0
perf\_event\_bpf\_event+0x194/0x2c0
\_\_bpf\_prog\_put.constprop.0+0x55/0xf0
\_\_cls\_bpf\_delete\_prog+0xea/0x120 [cls\_bpf]
cls\_bpf\_delete\_prog\_work+0x1c/0x30 [cls\_bpf]
process\_one\_work+0x3c2/0x730
worker\_thread+0x93/0x650
kthread+0x1b8/0x210
ret\_from\_fork+0x1f/0x30
commit 267fb27352b6 ("perf: Reduce stack usage of perf\_output\_begin()")
use on-stack struct perf\_sample\_data of the caller function.
However, perf\_event\_bpf\_output uses incorrect parameter to convert
small-sized data (struct perf\_bpf\_event) into large-sized data
(struct perf\_sample\_data), which causes memory overwriting occurs in
\_\_perf\_event\_header\_\_init\_id.
Fixes: 267fb27352b6 ("perf: Reduce stack usage of perf\_output\_begin()")
Signed-off-by: Yang Jihong
Signed-off-by: Peter Zijlstra (Intel)
Link: https://lkml.kernel.org/r/20230314044735.56551-1-yangjihong1@huawei.com
Signed-off-by: Sasha Levin
commit 6fa189c5a30e2aecca64faf77bc0560b8144aec9
Author: Konrad Dybcio
Date: Tue Jan 3 15:21:20 2023 +0100
interconnect: qcom: qcm2290: Fix MASTER\_SNOC\_BIMC\_NRT
[ Upstream commit 633a12fda6536a1a17bcea29502e777e86a4547e ]
Due to what seems to be a copy-paste error, the \_NRT master was
identical to the \_RT master, which should not be the case.. Fix it
using the values available from the downstream kernel [1].
[1] https://android.googlesource.com/kernel/msm-extra/devicetree/+/refs/heads/android-msm-bramble-4.19-android11-qpr1/qcom/scuba-bus.dtsi#127
Fixes: 1a14b1ac3935 ("interconnect: qcom: Add QCM2290 driver support")
Signed-off-by: Konrad Dybcio
Acked-by: Shawn Guo
Link: https://lore.kernel.org/r/20230103142120.15605-1-konrad.dybcio@linaro.org
Signed-off-by: Georgi Djakov
Signed-off-by: Sasha Levin
commit 93707913253f04400463aab0cbba575fc6e6cb1e
Author: Dmitry Baryshkov
Date: Thu Jan 5 02:22:20 2023 +0200
interconnect: qcom: sm8450: switch to qcom\_icc\_rpmh\_\* function
[ Upstream commit 87e8fab1917a2b3f6e3dedfd1cdf22a1416e6676 ]
Change sm8450 interconnect driver to use generic qcom\_icc\_rpmh\_\*
functions rather than embedding a copy of thema. This also fixes an
overallocation of memory for icc\_onecell\_data structure.
Fixes: fafc114a468e ("interconnect: qcom: Add SM8450 interconnect provider driver")
Signed-off-by: Dmitry Baryshkov
Link: https://lore.kernel.org/r/20230105002221.1416479-3-dmitry.baryshkov@linaro.org
Signed-off-by: Georgi Djakov
Signed-off-by: Sasha Levin
commit d72ec03eae4a310af975888003b7bfbcdbfd7ff4
Author: Dmitry Baryshkov
Date: Thu Jan 5 02:22:19 2023 +0200
interconnect: qcom: osm-l3: fix icc\_onecell\_data allocation
[ Upstream commit f77ebdda0ee652124061c2ac42399bb6c367e729 ]
This is a struct with a trailing zero-length array of icc\_node pointers
but it's allocated as if it were a single array of icc\_nodes instead.
Fortunately this overallocates memory rather then allocating less memory
than required.
Fix by replacing devm\_kcalloc() with devm\_kzalloc() and struct\_size()
macro.
Fixes: 5bc9900addaf ("interconnect: qcom: Add OSM L3 interconnect provider support")
Signed-off-by: Dmitry Baryshkov
Link: https://lore.kernel.org/r/20230105002221.1416479-2-dmitry.baryshkov@linaro.org
Signed-off-by: Georgi Djakov
Signed-off-by: Sasha Levin


=== Content from lists.debian.org_cf152cef_20250115_092949.html ===


---

[[Date Prev](msg00005.html)][[Date Next](msg00007.html)]
[[Thread Prev](msg00005.html)][[Thread Next](msg00007.html)]
[[Date Index](maillist.html#00006)]
[[Thread Index](threads.html#00006)]

# [SECURITY] [DLA 3403-1] linux security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3403-1] linux security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Wed, 3 May 2023 14:01:28 +0200
* *Message-id*: <[[🔎]](/msgid-search/ZFJNGHuB08t0uKuB%40decadent.org.uk) [ZFJNGHuB08t0uKuB@decadent.org.uk](msg00006.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-3403-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                        Ben Hutchings
May 3, 2023                                   <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : linux
Version        : 4.19.282-1
CVE ID         : CVE-2022-2873 CVE-2022-3424 CVE-2022-3545 CVE-2022-3707
                 CVE-2022-4744 CVE-2022-36280 CVE-2022-41218 CVE-2022-45934
                 CVE-2022-47929 CVE-2023-0045 CVE-2023-0266 CVE-2023-0394
                 CVE-2023-0458 CVE-2023-0459 CVE-2023-0461 CVE-2023-1073
                 CVE-2023-1074 CVE-2023-1078 CVE-2023-1079 CVE-2023-1118
                 CVE-2023-1281 CVE-2023-1513 CVE-2023-1670 CVE-2023-1829
                 CVE-2023-1855 CVE-2023-1859 CVE-2023-1989 CVE-2023-1990
                 CVE-2023-1998 CVE-2023-2162 CVE-2023-2194 CVE-2023-23454
                 CVE-2023-23455 CVE-2023-23559 CVE-2023-26545 CVE-2023-28328
                 CVE-2023-30456 CVE-2023-30772
Debian Bug     : 825141

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service, or information
leak.

CVE-2022-2873

    Zheyu Ma discovered that an out-of-bounds memory access flaw in
    the Intel iSMT SMBus 2.0 host controller driver may result in
    denial of service (system crash).

CVE-2022-3424

    Zheng Wang and Zhuorao Yang reported a flaw in the SGI GRU driver
    which could lead to a use-after-free.  On systems where this driver
    is used, a local user can explit this for denial of service (crash
    or memory corruption) or possibly for privilege escalation.

    This driver is not enabled in Debian's official kernel
    configurations.

CVE-2022-3545

    It was discovered that the Netronome Flow Processor (NFP) driver
    contained a use-after-free flaw in area_cache_get(), which may
    result in denial of service or the execution of arbitrary code.

CVE-2022-3707

    Zheng Wang reported a flaw in the i915 graphics driver's
    virtualisation (GVT-g) support that could lead to a double-free.
    On systems where this feature is used, a guest can exploit this
    for denial of service (crash or memory corruption) or possibly for
    privilege escalation.

CVE-2022-4744

    The syzkaller tool found a flaw in the TUN/TAP network driver,
    which can lead to a double-free.  A local user can exploit this
    for denial of service (crash or memory corruption) or possibly for
    privilege escalation.

CVE-2022-36280

    An out-of-bounds memory write vulnerability was discovered in the
    vmwgfx driver, which may allow a local unprivileged user to cause
    a denial of service (system crash).

CVE-2022-41218

    Hyunwoo Kim reported a use-after-free flaw in the Media DVB core
    subsystem caused by refcount races, which may allow a local user
    to cause a denial of service or escalate privileges.

CVE-2022-45934

    An integer overflow in l2cap_config_req() in the Bluetooth
    subsystem was discovered, which may allow a physically proximate
    attacker to cause a denial of service (system crash).

CVE-2022-47929

    Frederick Lawler reported a NULL pointer dereference in the
    traffic control subsystem allowing an unprivileged user to cause a
    denial of service by setting up a specially crafted traffic
    control configuration.

CVE-2023-0045

    Rodrigo Branco and Rafael Correa De Ysasi reported that when a
    user-space task told the kernel to enable Spectre v2 mitigation
    for it, the mitigation was not enabled until the task was next
    rescheduled.  This might be exploitable by a local or remote
    attacker to leak sensitive information from such an application.

CVE-2023-0266

    A use-after-free flaw in the sound subsystem due to missing
    locking may result in denial of service or privilege escalation.

CVE-2023-0394

    Kyle Zeng discovered a NULL pointer dereference flaw in
    rawv6_push_pending_frames() in the network subsystem allowing a
    local user to cause a denial of service (system crash).

CVE-2023-0458

    Jordy Zimmer and Alexandra Sandulescu found that getrlimit() and
    related system calls were vulnerable to speculative execution
    attacks such as Spectre v1.  A local user could explot this to
    leak sensitive information from the kernel.

CVE-2023-0459

    Jordy Zimmer and Alexandra Sandulescu found a regression in
    Spectre v1 mitigation in the user-copy functions for the amd64
    (64-bit PC) architecture.  Where the CPUs do not implement SMAP or
    it is disabled, a local user could exploit this to leak sensitive
    information from the kernel.  Other architectures may also be
    affected.

CVE-2023-0461

    "slipper" reported a flaw in the kernel's support for ULPs (Upper
    Layer Protocols) on top of TCP that can lead to a double-free when
    using kernel TLS sockets.  A local user can exploit this for
    denial of service (crash or memory corruption) or possibly for
    privilege escalation.

    Kernel TLS is not enabled in Debian's official kernel
    configurations.

CVE-2023-1073

    Pietro Borrello reported a type confusion flaw in the HID (Human
    Interface Device) subsystem.  An attacker able to insert and
    remove USB devices might be able to use this to cause a denial of
    service (crash or memory corruption) or possibly to run arbitrary
    code in the kernel.

CVE-2023-1074

    Pietro Borrello reported a type confusion flaw in the SCTP
    protocol implementation which can lead to a memory leak.  A local
    user could exploit this to cause a denial of service (resource
    exhaustion).

CVE-2023-1078

    Pietro Borrello reported a type confusion flaw in the RDS protocol
    implementation.  A local user could exploit this to cause a denial
    of service (crash or memory corruption) or possibly for privilege
    escalation.

CVE-2023-1079

    Pietro Borrello reported a race condition in the hid-asus HID
    driver which could lead to a use-after-free.  An attacker able to
    insert and remove USB devices can use this to cause a denial of
    service (crash or memory corruption) or possibly to run arbitrary
    code in the kernel.

CVE-2023-1118

    Duoming Zhou reported a race condition in the ene_ir remote
    control driver that can lead to a use-after-free if the driver
    is unbound.  It is not clear what the security impact of this is.

CVE-2023-1281, CVE-2023-1829

    "valis" reported two flaws in the cls_tcindex network traffic
    classifier which could lead to a use-after-free.  A local user can
    exploit these for privilege escalation.  This update removes
    cls_tcindex entirely.

CVE-2023-1513

    Xingyuan Mo reported an information leak in the KVM implementation
    for the i386 (32-bit PC) architecture.  A local user could exploit
    this to leak sensitive information from the kernel.

CVE-2023-1670

    Zheng Wang reported a race condition in the xirc2ps_cs network
    driver which can lead to a use-after-free.  An attacker able to
    insert and remove PCMCIA devices can use this to cause a denial of
    service (crash or memory corruption) or possibly to run arbitrary
    code in the kernel.

CVE-2023-1855

    Zheng Wang reported a race condition in the xgene-hwmon hardware
    monitoring driver that may lead to a use-after-free.  It is not
    clear what the security impact of this is.

CVE-2023-1859

    Zheng Wang reported a race condition in the 9pnet_xen transport
    for the 9P filesystem on Xen, which can lead to a use-after-free.
    On systems where this feature is used, a backend driver in another
    domain can use this to cause a denial of service (crash or memory
    corruption) or possibly to run arbitrary code in the vulnerable
    domain.

CVE-2023-1989

    Zheng Wang reported a race condition in the btsdio Bluetooth
    adapter driver that can lead to a use-after-free.  An attacker
    able to insert and remove SDIO devices can use this to cause a
    denial of service (crash or memory corruption) or possibly to run
    arbitrary code in the kernel.

CVE-2023-1990

    Zheng Wang reported a race condition in the st-nci NFC adapter
    driver that can lead to a use-after-free.  It is not clear what
    the security impact of this is.

    This driver is not enabled in Debian's official kernel
    configurations.

CVE-2023-1998

    José Oliveira and Rodrigo Branco reported a regression in Spectre
    v2 mitigation for user-space on x86 CPUs supporting IBRS but not
    eIBRS.  This might be exploitable by a local or remote attacker to
    leak sensitive information from a user-space application.

CVE-2023-2162

    Mike Christie reported a race condition in the iSCSI TCP transport
    that can lead to a use-after-free.  On systems where this feature
    is used, a local user might be able to use this to cause a denial
    of service (crash or memory corruption) or possibly for privilege
    escalation.

CVE-2023-2194

    Wei Chen reported a potential heap buffer overflow in the
    i2c-xgene-slimpro I²C adapter driver.  A local user with
    permission to access such a device can use this to cause a denial
    of service (crash or memory corruption) and probably for privilege
    escalation.

CVE-2023-23454

    Kyle Zeng reported that the Class Based Queueing (CBQ) network
    scheduler was prone to denial of service due to interpreting
    classification results before checking the classification return
    code.

CVE-2023-23455

    Kyle Zeng reported that the ATM Virtual Circuits (ATM) network
    scheduler was prone to a denial of service due to interpreting
    classification results before checking the classification return
    code.

CVE-2023-23559

    Szymon Heidrich reported incorrect bounds checks in the rndis_wlan
    Wi-Fi driver which may lead to a heap buffer overflow or overread.
    An attacker able to insert and remove USB devices can use this to
    cause a denial of service (crash or memory corruption) or
    information leak, or possibly to run arbitrary code in the kernel.

CVE-2023-26545

    Lianhui Tang reported a flaw in the MPLS protocol implementation
    that could lead to a double-free.  A local user might be able to
    exploit this to cause a denial of service (crash or memory
    corruption) or possibl for privilege escalation.

CVE-2023-28328

    Wei Chen reported a flaw in the az6927 DVB driver that can lead to
    a null pointer dereference.  A local user permitted to access an
    I²C adapter device that this driver creates can use this to cause
    a denial of service (crash).

CVE-2023-30456

    Reima ISHII reported a flaw in the KVM implementation for Intel
    CPUs affecting nested virtualisation.  When KVM was used as the L0
    hypervisor, and EPT and/or unrestricted guest mode was disabled,
    it did not prevent an L2 guest from being configured with an
    architecturally invalid protection/paging mode.  A malicious guest
    could exploit this to cause a denial of service (crash).

CVE-2023-30772

    Zheng Wang reported a race condition in the da9150 charger driver
    which could lead to a use-after-free.  It is not clear what the
    security impact of this is.

    This driver is not enabled in Debian's official kernel
    configurations.

For Debian 10 buster, these problems have been fixed in version
4.19.282-1.  This update additionally fixes Debian bug #825141, and
includes many more bug fixes from stable updates 4.19.270-4.19.282
inclusive.

We recommend that you upgrade your linux packages.

For the detailed security status of linux please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/linux>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpM9k3CPindH.pgp)**

*Description:* PGP signature

---



=== Content from idp-portal.suse.com_6b95d262_20250115_222726.html ===

## UCS

# Welcome to Univention Corporate Server

## JavaScript required

A browser with JavaScript enabled is required in order to use this service.

When using Internet Explorer, please check your security settings and add this address to your trusted sites.



=== Content from git.kernel.org_2716c171_20250115_092948.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=06615d11cc78162dfd5116efb71f29eb29502d37)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=06615d11cc78162dfd5116efb71f29eb29502d37)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=06615d11cc78162dfd5116efb71f29eb29502d37)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=06615d11cc78162dfd5116efb71f29eb29502d37)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zheng Wang <zyytlz.wz@163.com> | 2023-03-12 01:46:50 +0800 |
| --- | --- | --- |
| committer | Sebastian Reichel <sebastian.reichel@collabora.com> | 2023-03-12 23:28:04 +0100 |
| commit | [06615d11cc78162dfd5116efb71f29eb29502d37](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=06615d11cc78162dfd5116efb71f29eb29502d37) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=06615d11cc78162dfd5116efb71f29eb29502d37)) | |
| tree | [a37450db9bc8c3bfa269ceed085321eb71e15fc9](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=06615d11cc78162dfd5116efb71f29eb29502d37) | |
| parent | [47c29d69212911f50bdcdd0564b5999a559010d4](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=47c29d69212911f50bdcdd0564b5999a559010d4) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=06615d11cc78162dfd5116efb71f29eb29502d37&id2=47c29d69212911f50bdcdd0564b5999a559010d4)) | |
| download | [linux-06615d11cc78162dfd5116efb71f29eb29502d37.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-06615d11cc78162dfd5116efb71f29eb29502d37.tar.gz) | |

power: supply: da9150: Fix use after free bug in da9150\_charger\_remove due to race conditionIn da9150\_charger\_probe, &charger->otg\_work is bound with
da9150\_charger\_otg\_work. da9150\_charger\_otg\_ncb may be
called to start the work.
If we remove the module which will call da9150\_charger\_remove
to make cleanup, there may be a unfinished work. The possible
sequence is as follows:
Fix it by canceling the work before cleanup in the da9150\_charger\_remove
CPU0 CPUc1
|da9150\_charger\_otg\_work
da9150\_charger\_remove |
power\_supply\_unregister |
device\_unregister |
power\_supply\_dev\_release|
kfree(psy) |
|
| power\_supply\_changed(charger->usb);
| //use
Fixes: c1a281e34dae ("power: Add support for DA9150 Charger")
Signed-off-by: Zheng Wang <zyytlz.wz@163.com>
Signed-off-by: Sebastian Reichel <sebastian.reichel@collabora.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=06615d11cc78162dfd5116efb71f29eb29502d37)

| -rw-r--r-- | [drivers/power/supply/da9150-charger.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/drivers/power/supply/da9150-charger.c?id=06615d11cc78162dfd5116efb71f29eb29502d37) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/power/supply/da9150-charger.c b/drivers/power/supply/da9150-charger.cindex 14da5c595dd9f3..a87aeaea38e139 100644--- a/[drivers/power/supply/da9150-charger.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/power/supply/da9150-charger.c?id=47c29d69212911f50bdcdd0564b5999a559010d4)+++ b/[drivers/power/supply/da9150-charger.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/power/supply/da9150-charger.c?id=06615d11cc78162dfd5116efb71f29eb29502d37)@@ -657,6 +657,7 @@ static int da9150\_charger\_remove(struct platform\_device \*pdev)  if (!IS\_ERR\_OR\_NULL(charger->usb\_phy)) usb\_unregister\_notifier(charger->usb\_phy, &charger->otg\_nb);+ cancel\_work\_sync(&charger->otg\_work);  power\_supply\_unregister(charger->battery); power\_supply\_unregister(charger->usb); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:28:26 +0000



=== Content from lore.kernel.org_5becb6f0_20250115_134735.html ===

```
[All of lore.kernel.org](../?t=20230328144446)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: [stable@vger.kernel.org](../../stable/?t=20230328144446)
Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
	[patches@lists.linux.dev](../../linux-patches/?t=20230328144446), Zheng Wang <zyytlz.wz@163.com>,
	Sebastian Reichel <sebastian.reichel@collabora.com>,
	Sasha Levin <sashal@kernel.org>
Subject: [[PATCH 6.2 016/240] power: supply: da9150: Fix use after free bug in da9150_charger_remove due to race condition](#r)
Date: Tue, 28 Mar 2023 16:39:39 +0200	[[thread overview]](#r)
Message-ID: <20230328142620.323334485@linuxfoundation.org> (<raw>)
In-Reply-To: <[20230328142619.643313678@linuxfoundation.org](../20230328142619.643313678%40linuxfoundation.org/)>

From: Zheng Wang <zyytlz.wz@163.com>

[ Upstream commit 06615d11cc78162dfd5116efb71f29eb29502d37 ]

In da9150_charger_probe, &charger->otg_work is bound with
da9150_charger_otg_work. da9150_charger_otg_ncb may be
called to start the work.

If we remove the module which will call da9150_charger_remove
to make cleanup, there may be a unfinished work. The possible
sequence is as follows:

Fix it by canceling the work before cleanup in the da9150_charger_remove

CPU0                  CPUc1

                    |da9150_charger_otg_work
da9150_charger_remove      |
power_supply_unregister  |
device_unregister   |
power_supply_dev_release|
kfree(psy)          |
                    |
                    | 	power_supply_changed(charger->usb);
                    |   //use

Fixes: c1a281e34dae ("power: Add support for DA9150 Charger")
Signed-off-by: Zheng Wang <zyytlz.wz@163.com>
Signed-off-by: Sebastian Reichel <sebastian.reichel@collabora.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
---
 [drivers/power/supply/da9150-charger.c](#Z31drivers:power:supply:da9150-charger.c) | 1 +
 1 file [changed](#related), 1 insertion(+)

[diff](#iZ31drivers:power:supply:da9150-charger.c) --git a/drivers/power/supply/da9150-charger.c b/drivers/power/supply/da9150-charger.c
index f9314cc0cd75f..6b987da586556 100644
--- a/drivers/power/supply/da9150-charger.c
+++ b/drivers/power/supply/da9150-charger.c
@@ -662,6 +662,7 @@ static int da9150_charger_remove(struct platform_device *pdev)

 	if (!IS_ERR_OR_NULL(charger->usb_phy))
 		usb_unregister_notifier(charger->usb_phy, &charger->otg_nb);
+	cancel_work_sync(&charger->otg_work);

 	power_supply_unregister(charger->battery);
 	power_supply_unregister(charger->usb);
--
2.39.2

```

---

```
[next](../20230328142620.362151866%40linuxfoundation.org/) [prev](../20230328142620.288780822%40linuxfoundation.org/) [parent](../20230328142619.643313678%40linuxfoundation.org/) [reply](#R)	other threads:[[~2023-03-28 14:44 UTC](../?t=20230328144446)|[newest](../)]

Thread overview: 255+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2023-03-28 14:39 [[PATCH 6.2 000/240] 6.2.9-rc1 review](../20230328142619.643313678%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 001/240] interconnect: qcom: osm-l3: fix icc_onecell_data allocation](../20230328142619.710865759%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 002/240] interconnect: qcom: sm8450: switch to qcom_icc_rpmh_* function](../20230328142619.751814230%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 003/240] interconnect: qcom: qcm2290: Fix MASTER_SNOC_BIMC_NRT](../20230328142619.789674960%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 004/240] perf/core: Fix perf_output_begin parameter is incorrectly invoked in perf_event_bpf_output](../20230328142619.834691321%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 005/240] perf: fix perf_event_context->time](../20230328142619.885082459%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 006/240] tracing/hwlat: Replace sched_setaffinity with set_cpus_allowed_ptr](../20230328142619.914734290%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 007/240] drm/amd/display: fix k1 k2 divider programming for phantom streams](../20230328142619.959314875%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 008/240] drm/amd/display: Remove OTG DIV register write for Virtual signals](../20230328142620.005101478%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 009/240] drm/amd/display: Fix DP MST sinks removal issue](../20230328142620.045093548%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 010/240] arm64: dts: freescale: imx8-ss-lsio: Fix flexspi clock order](../20230328142620.082821620%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 011/240] arm64: dts: qcom: sc8280xp: Add label property to vadc channel nodes](../20230328142620.131077460%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 012/240] arm64: dts: qcom: sm6375: Add missing power-domain-named to CDSP](../20230328142620.170424156%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 013/240] arm64: dts: qcom: sm8450: correct WSA2 assigned clocks](../20230328142620.208408396%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 014/240] arm64: dts: qcom: sm8450: Mark UFS controller as cache coherent](../20230328142620.247591074%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 015/240] power: supply: bq24190: Fix use after free bug in bq24190_remove due to race condition](../20230328142620.288780822%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [Greg Kroah-Hartman [this message]](#t)
2023-03-28 14:39 ` [[PATCH 6.2 017/240] wifi: mt76: do not run mt76_unregister_device() on unregistered hw](../20230328142620.362151866%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 018/240] wifi: mt76: connac: do not check WED status for non-mmio devices](../20230328142620.407297196%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 019/240] efi: earlycon: Reprobe after parsing config tables](../20230328142620.456101490%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 020/240] arm64: dts: imx8dxl-evk: Disable hibernation mode of AR8031 for EQOS](../20230328142620.499592486%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 021/240] arm64: dts: imx8dxl-evk: Fix eqos phy reset gpio](../20230328142620.546814166%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 022/240] ARM: dts: imx6sll: e70k02: fix usbotg1 pinctrl](../20230328142620.581941463%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 023/240] ARM: dts: imx6sll: e60k02:](../20230328142620.618000662%40linuxfoundation.org/) " Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 024/240] ARM: dts: imx6sl: tolino-shine2hd:](../20230328142620.656066749%40linuxfoundation.org/) " Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 025/240] arm64: dts: imx8mn: specify #sound-dai-cells for SAI nodes](../20230328142620.691342916%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 026/240] arm64: dts: imx93: add missing #address-cells and #size-cells to i2c nodes](../20230328142620.722136815%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 027/240] NFS: Fix /proc/PID/io read_bytes for buffered reads](../20230328142620.768626003%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 028/240] NFS: Correct timing for assigning access cache timestamp](../20230328142620.808482644%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 029/240] xsk: Add missing overflow check in xdp_umem_reg](../20230328142620.846680251%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 030/240] iavf: fix inverted Rx hash condition leading to disabled hash](../20230328142620.883430253%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 031/240] iavf: fix non-tunneled IPv6 UDP packet type and hashing](../20230328142620.913692777%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 032/240] iavf: do not track VLAN 0 filters](../20230328142620.957004795%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 033/240] intel/igbvf: free irq on the error path in igbvf_request_msix()](../20230328142620.995870636%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 034/240] igbvf: Regard vf reset nack as success](../20230328142621.026166460%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 035/240] igc: fix the validation logic for taprios gate list](../20230328142621.073359161%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 036/240] i2c: imx-lpi2c: check only for enabled interrupt flags](../20230328142621.112166483%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 037/240] i2c: mxs: ensure that DMA buffers are safe for DMA](../20230328142621.149491299%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 038/240] i2c: hisi: Only use the completion interrupt to finish the transfer](../20230328142621.185116641%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 039/240] scsi: scsi_dh_alua: Fix memleak for qdata in alua_activate()](../20230328142621.223188670%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 040/240] nfsd: dont replace page in rq_pages if its a continuation of last page](../20230328142621.260573786%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 041/240] net: dsa: b53: mmap: fix device tree support](../20230328142621.426945594%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 042/240] net: usb: smsc95xx: Limit packet length to skb->len](../20230328142621.466460668%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 043/240] efi/libstub: smbios: Use length member instead of record struct size](../20230328142621.515220613%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 044/240] arm64: efi: Use SMBIOS processor version to key off Ampere quirk](../20230328142621.544265000%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 045/240] qed/qed_sriov: guard against NULL derefs from qed_iov_get_vf_info](../20230328142621.583666046%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 046/240] xirc2ps_cs: Fix use after free bug in xirc2ps_detach](../20230328142621.631375961%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 047/240] net: phy: Ensure state transitions are processed from phy_stop()](../20230328142621.660940473%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 048/240] net: mdio: fix owner field for mdio buses registered using device-tree](../20230328142621.704866374%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 049/240] net: mdio: fix owner field for mdio buses registered using ACPI](../20230328142621.746202151%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 050/240] net: stmmac: Fix for mismatched host/device DMA address width](../20230328142621.795335283%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 051/240] thermal/drivers/mellanox: Use generic thermal_zone_get_trip() function](../20230328142621.830118124%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 052/240] mlxsw: core_thermal: Fix fan speed in maximum cooling state](../20230328142621.874497031%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 053/240] drm/i915/fbdev: lock the fbdev obj before vma pin](../20230328142621.924737301%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 054/240] drm/i915/mtl: Disable MC6 for MTL A step](../20230328142621.963423625%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 055/240] drm/i915/guc: Rename GuC register state capture node to be more obvious](../20230328142622.008242977%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 056/240] drm/i915/guc: Fix missing ecodes](../20230328142622.055991962%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 057/240] drm/i915/gt: perform uc late init after probe error injection](../20230328142622.091001181%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 058/240] drm/i915: Fix format for perf_limit_reasons](../20230328142622.129366648%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 059/240] drm/i915: Update vblank timestamping stuff on seamless M/N change](../20230328142622.178499619%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 060/240] net: dsa: report rx_bytes unadjusted for ETH_HLEN](../20230328142622.222558129%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 061/240] net: qcom/emac: Fix use after free bug in emac_remove due to race condition](../20230328142622.263780357%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 062/240] net: usb: lan78xx: Limit packet length to skb->len](../20230328142622.307981197%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 063/240] net/ps3_gelic_net: Fix RX sk_buff length](../20230328142622.352445063%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 064/240] net/ps3_gelic_net: Use dma_mapping_error](../20230328142622.392575012%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 065/240] octeontx2-vf: Add missing free for alloc_percpu](../20230328142622.440049720%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 066/240] bootconfig: Fix testcase to increase max node](../20230328142622.490007613%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 067/240] keys: Do not cache key in task struct if key is requested from kernel thread](../20230328142622.530564908%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 068/240] ice: check if VF exists before mode check](../20230328142622.570231611%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 069/240] iavf: fix hang on reboot with ice](../20230328142622.621287034%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 070/240] i40e: fix flow director packet filter programming](../20230328142622.667911800%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 071/240] bpf: Adjust insufficient default bpf_jit_limit](../20230328142622.710796792%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 072/240] net/mlx5e: Set uplink rep as NETNS_LOCAL](../20230328142622.753178489%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 073/240] net/mlx5e: Block entering switchdev mode with ns inconsistency](../20230328142622.800485158%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 074/240] net/mlx5: Fix steering rules cleanup](../20230328142622.849097624%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 075/240] net/mlx5e: Overcome slow response for first macsec ASO WQE](../20230328142622.893970866%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 076/240] net/mlx5: Read the TC mapping of all priorities on ETS query](../20230328142622.945206717%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 077/240] net/mlx5: E-Switch, Fix an Oops in error handling code](../20230328142622.990408207%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 078/240] net: dsa: tag_brcm: legacy: fix daisy-chained switches](../20230328142623.034969152%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 079/240] atm: idt77252: fix kmemleak when rmmod idt77252](../20230328142623.073732955%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 080/240] erspan: do not use skb_mac_header() in ndo_start_xmit()](../20230328142623.114923365%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 081/240] net: mscc: ocelot: fix stats region batching](../20230328142623.153789306%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 082/240] net/sonic: use dma_mapping_error() for error check](../20230328142623.193498319%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 083/240] nvme-tcp: fix nvme_tcp_term_pdu to match spec](../20230328142623.241867278%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 084/240] mlxsw: spectrum_fid: Fix incorrect local port type](../20230328142623.271886866%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 085/240] hvc/xen: prevent concurrent accesses to the shared ring](../20230328142623.313574040%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 086/240] ksmbd: add low bound validation to FSCTL_SET_ZERO_DATA](../20230328142623.356299473%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 087/240] ksmbd: add low bound validation to FSCTL_QUERY_ALLOCATED_RANGES](../20230328142623.402735421%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 088/240] ksmbd: fix possible refcount leak in smb2_open()](../20230328142623.442467184%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 089/240] Bluetooth: hci_sync: Resume adv with no RPA when active scan](../20230328142623.485594384%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 090/240] Bluetooth: hci_core: Detect if an ACL packet is in fact an ISO packet](../20230328142623.523779682%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 091/240] Bluetooth: btusb: Remove detection of ISO packets over bulk](../20230328142623.562361376%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 092/240] Bluetooth: ISO: fix timestamped HCI ISO data packet parsing](../20230328142623.606553127%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 093/240] Bluetooth: Remove "Power-on" check from Mesh feature](../20230328142623.646321969%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 094/240] gve: Cache link_speed value from device](../20230328142623.683823014%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 095/240] net: asix: fix modprobe "sysfs: cannot create duplicate filename"](../20230328142623.721880933%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 096/240] net: dsa: mt7530: move enabling disabling core clock to mt7530_pll_setup()](../20230328142623.770549359%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 097/240] net: dsa: mt7530: move lowering TRGMII driving to mt7530_setup()](../20230328142623.814630650%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 098/240] net: dsa: mt7530: move setting ssc_delta to PHY_INTERFACE_MODE_TRGMII case](../20230328142623.852872836%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 099/240] net: mdio: thunder: Add missing fwnode_handle_put()](../20230328142623.901442984%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 100/240] efi/libstub: Use relocated version of kernels struct screen_info](../20230328142623.936352253%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 101/240] drm/amd/display: Set dcn32 caps.seamless_odm](../20230328142623.974274834%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 102/240] Bluetooth: btqcomsmd: Fix command timeout after setting BD address](../20230328142624.017660272%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 103/240] Bluetooth: L2CAP: Fix responding with wrong PDU type](../20230328142624.066780154%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 104/240] Bluetooth: btsdio: fix use after free bug in btsdio_remove due to unfinished work](../20230328142624.113723487%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 105/240] Bluetooth: mgmt: Fix MGMT add advmon with RSSI command](../20230328142624.148883345%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 106/240] Bluetooth: HCI: Fix global-out-of-bounds](../20230328142624.186365119%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 107/240] platform/chrome: cros_ec_chardev: fix kernel data leak from ioctl](../20230328142624.233826657%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 108/240] entry: Fix noinstr warning in __enter_from_user_mode()](../20230328142624.285278136%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 109/240] perf/x86/amd/core: Always clear status for idx](../20230328142624.327351397%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 110/240] entry/rcu: Check TIF_RESCHED _after_ delayed RCU wake-up](../20230328142624.360682782%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 111/240] hwmon: fix potential sensor registration fail if of_node is missing](../20230328142624.405320947%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 112/240] hwmon (it87): Fix voltage scaling for chips with 10.9mV ADCs](../20230328142624.446836814%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 113/240] scsi: qla2xxx: Synchronize the IOCB count to be in order](../20230328142624.494792117%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 114/240] scsi: qla2xxx: Perform lockless command completion in abort path](../20230328142624.536276203%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 115/240] smb3: lower default deferred close timeout to address perf regression](../20230328142624.583674291%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 116/240] smb3: fix unusable share after force unmount failure](../20230328142624.634920893%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 117/240] uas: Add US_FL_NO_REPORT_OPCODES for JMicron JMS583Gen 2](../20230328142624.674311939%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 118/240] thunderbolt: Use scale field when allocating USB3 bandwidth](../20230328142624.703667203%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 119/240] thunderbolt: Call tb_check_quirks() after initializing adapters](../20230328142624.741474656%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 120/240] thunderbolt: Add quirk to disable CLx](../20230328142624.787603286%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 121/240] thunderbolt: Fix memory leak in margining](../20230328142624.826282340%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 122/240] thunderbolt: Disable interrupt auto clear for rings](../20230328142624.876794498%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 123/240] thunderbolt: Add missing UNSET_INBOUND_SBTX for retimer access](../20230328142624.907733156%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 124/240] thunderbolt: Use const qualifier for `ring_interrupt_index`](../20230328142624.949517970%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 125/240] thunderbolt: Rename shadowed variables bit to interrupt_bit and auto_clear_bit](../20230328142624.991819037%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 126/240] ASoC: amd: yp: Add OMEN by HP Gaming Laptop 16z-n000 to quirks](../20230328142625.040865270%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 127/240] ASoC: Intel: sof_rt5682: Add quirk for Rex board with mx98360a amplifier](../20230328142625.078456185%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 128/240] scsi: ufs: core: Initialize devfreq synchronously](../20230328142625.117629733%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-29 17:48   ` [Adrien Thierry](../ZCR6CiexABbS9AVI%40fedora/)
2023-03-28 14:41 ` [[PATCH 6.2 129/240] ASoC: amd: yc: Add DMI entries to support HP OMEN 16-n0xxx (8A43)](../20230328142625.155286578%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 130/240] ACPI: x86: Drop quirk for HP Elitebook](../20230328142625.191331946%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 131/240] ACPI: x86: utils: Add Cezanne to the list for forcing StorageD3Enable](../20230328142625.234129319%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 132/240] riscv: Bump COMMAND_LINE_SIZE value to 1024](../20230328142625.274088241%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 133/240] drm/cirrus: NULL-check pipe->plane.state->fb in cirrus_pipe_update()](../20230328142625.315219310%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 134/240] HID: cp2112: Fix driver not registering GPIO IRQ chip as threaded](../20230328142625.355176892%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 135/240] ca8210: fix mac_len negative array access](../20230328142625.393984304%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 136/240] HID: logitech-hidpp: Add support for Logitech MX Master 3S mouse](../20230328142625.438226384%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 137/240] HID: intel-ish-hid: ipc: Fix potential use-after-free in work function](../20230328142625.476991656%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 138/240] m68k: mm: Fix systems with memory at end of 32-bit address space](../20230328142625.506327581%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 139/240] m68k: Only force 030 bus error if PC not in exception table](../20230328142625.541034353%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 140/240] selftests/bpf: check that modifier resolves after pointer](../20230328142625.579625167%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 141/240] cpumask: fix incorrect cpumask scanning result checks](../20230328142625.618976755%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 142/240] scsi: target: iscsi: Fix an error message in iscsi_check_key()](../20230328142625.659112464%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 143/240] scsi: qla2xxx: Add option to disable FC2 Target support](../20230328142625.689139272%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 144/240] scsi: hisi_sas: Check devm_add_action() return value](../20230328142625.732414050%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 145/240] scsi: ufs: core: Add soft dependency on governor_simpleondemand](../20230328142625.762974503%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 146/240] scsi: lpfc: Check kzalloc() in lpfc_sli4_cgn_params_read()](../20230328142625.809895676%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 147/240] scsi: lpfc: Avoid usage of list iterator variable after loop](../20230328142625.849960807%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 148/240] scsi: mpi3mr: Driver unload crashes host when enhanced logging is enabled](../20230328142625.887498532%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 149/240] scsi: mpi3mr: Wait for diagnostic save during controller init](../20230328142625.918307232%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 150/240] scsi: mpi3mr: NVMe command size greater than 8K fails](../20230328142625.961962476%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 151/240] scsi: mpi3mr: Bad drive in topology results kernel crash](../20230328142625.997998765%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 152/240] scsi: storvsc: Handle BlockSize change in Hyper-V VHD/VHDX file](../20230328142626.032596809%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 153/240] platform/x86: int3472: Add GPIOs to Surface Go 3 Board data](../20230328142626.069261503%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 154/240] net: usb: cdc_mbim: avoid altsetting toggling for Telit FE990](../20230328142626.108642489%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 155/240] net: usb: qmi_wwan: add Telit 0x1080 composition](../20230328142626.155690381%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 156/240] drm/amd/display: Update clock table to include highest clock setting](../20230328142626.194643913%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 157/240] sh: sanitize the flags on sigreturn](../20230328142626.234411797%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 158/240] drm/amdgpu: Fix call trace warning and hang when removing amdgpu device](../20230328142626.265192007%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 159/240] drm/amd: Fix initialization mistake for NBIO 7.3.0](../20230328142626.304899161%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 160/240] net/sched: act_mirred: better wording on protection against excessive stack growth](../20230328142626.336239526%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 161/240] act_mirred: use the backlog for nested calls to mirred ingress](../20230328142626.385345768%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 162/240] cifs: lock chan_lock outside match_session](../20230328142626.430679137%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 163/240] cifs: append path to open_enter trace event](../20230328142626.468882415%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 164/240] cifs: do not poll server interfaces too regularly](../20230328142626.507642599%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 165/240] cifs: empty interface list when server doesnt support query interfaces](../20230328142626.553734690%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 166/240] cifs: dump pending mids for all channels in DebugData](../20230328142626.583129985%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 167/240] cifs: print session id while listing open files](../20230328142626.620583880%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 168/240] cifs: fix dentry lookups in directory handle cache](../20230328142626.654309912%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 169/240] x86/mm: Do not shuffle CPU entry areas without KASLR](../20230328142626.702956348%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 170/240] x86/fpu/xstate: Prevent false-positive warning in __copy_xstate_uabi_buf()](../20230328142626.742801691%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 171/240] selftests/x86/amx: Add a ptrace test](../20230328142626.776861250%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 172/240] scsi: core: Add BLIST_SKIP_VPD_PAGES for SKhynix H28U74301AMR](../20230328142626.806645010%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 173/240] usb: misc: onboard-hub: add support for Microchip USB2517 USB 2.0 hub](../20230328142626.844317794%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 174/240] usb: dwc2: fix a race, dont power off/on phy for dual-role mode](../20230328142626.881393183%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 175/240] usb: dwc2: drd: fix inconsistent mode if role-switch-default-mode="host"](../20230328142626.926018449%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 176/240] usb: dwc2: fix a devres leak in hw_enable upon suspend resume](../20230328142626.967111679%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 177/240] block/io_uring: pass in issue_flags for uring_cmd task_work handling](../20230328142627.008518107%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 178/240] usb: gadget: u_audio: dont let userspace block driver unbind](../20230328142627.046946682%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 179/240] btrfs: zoned: fix btrfs_can_activate_zone() to support DUP profile](../20230328142627.085432229%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 180/240] Bluetooth: Fix race condition in hci_cmd_sync_clear](../20230328142627.125460499%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 181/240] efi: sysfb_efi: Fix DMI quirks not working for simpledrm](../20230328142627.172614381%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 182/240] mm/slab: Fix undefined init_cache_node_node() for NUMA and !SMP](../20230328142627.211424423%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 183/240] efi/libstub: zboot: Mark zboot EFI application as NX compatible](../20230328142627.260590436%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 184/240] arm64: efi: Set NX compat flag in PE/COFF header](../20230328142627.301399999%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 185/240] fscrypt: destroy keyring after security_sb_delete()](../20230328142627.341200811%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 186/240] fsverity: Remove WQ_UNBOUND from fsverity read workqueue](../20230328142627.388577531%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 187/240] lockd: set file_lock start and end when decoding nlm4 testargs](../20230328142627.428115646%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 188/240] arm64: dts: imx8mm-nitrogen-r2: fix WM8960 clock name](../20230328142627.468965699%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 189/240] igb: revert rtnl_lock() that causes deadlock](../20230328142627.515380987%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 190/240] dm thin: fix deadlock when swapping to thin device](../20230328142627.563101694%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 191/240] usb: typec: tcpm: fix create duplicate source-capabilities file](../20230328142627.603641540%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 192/240] usb: typec: tcpm: fix warning when handle discover_identity message](../20230328142627.654641244%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 193/240] usb: cdns3: Fix issue with using incorrect PCI device function](../20230328142627.702359431%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 194/240] usb: cdnsp: Fixes issue with redundant Status Stage](../20230328142627.734426658%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 195/240] usb: cdnsp: changes PCI Device ID to fix conflict with CNDS3 driver](../20230328142627.783094075%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 196/240] usb: chipdea: core: fix return -EINVAL if request role is the same with current role](../20230328142627.833646503%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 197/240] usb: chipidea: core: fix possible concurrent when switch role](../20230328142627.871113709%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 198/240] usb: dwc3: gadget: Add 1ms delay after end transfer command without IOC](../20230328142627.918339819%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 199/240] usb: ucsi: Fix NULL pointer deref in ucsi_connector_change()](../20230328142627.959981775%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 200/240] usb: ucsi_acpi: Increase the command completion timeout](../20230328142627.990664417%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 201/240] mm: kfence: fix using kfence_metadata without initialization in show_object()](../20230328142628.042035097%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 202/240] kfence: avoid passing -g for test](../20230328142628.094495448%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 203/240] io_uring/net: avoid sending -ECONNABORTED on repeated connection requests](../20230328142628.142527210%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42   ` [Greg Kroah-Hartman](../20230328142628.142527210%40linuxfoundation.org/)
2023-03-28 14:42 ` [[PATCH 6.2 204/240] io_uring/rsrc: fix null-ptr-deref in io_file_bitmap_get()](../20230328142628.182813129%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 205/240] Revert "kasan: drop skip_kasan_poison variable in free_pages_prepare"](../20230328142628.223011878%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 206/240] kcsan: avoid passing -g for test](../20230328142628.264195698%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 207/240] test_maple_tree: add more testing for mas_empty_area()](../20230328142628.306829114%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 208/240] maple_tree: fix mas_skip_node() end slot detection](../20230328142628.357681120%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 209/240] ksmbd: fix wrong signingkey creation when encryption is AES256](../20230328142628.397571122%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 210/240] ksmbd: set FILE_NAMED_STREAMS attribute in FS_ATTRIBUTE_INFORMATION](../20230328142628.434248285%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 211/240] ksmbd: dont terminate inactive sessions after a few seconds](../20230328142628.484816994%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 212/240] ksmbd: return STATUS_NOT_SUPPORTED on unsupported smb2.0 dialect](../20230328142628.517730374%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 213/240] ksmbd: return unsupported error on smb1 mount](../20230328142628.565515750%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 214/240] wifi: mac80211: fix qos on mesh interfaces](../20230328142628.612410804%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 215/240] wifi: mac80211: Serialize ieee80211_handle_wake_tx_queue()](../20230328142628.651705812%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 216/240] nilfs2: fix kernel-infoleak in nilfs_ioctl_wrap_copy()](../20230328142628.700611797%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 217/240] drm/bridge: lt8912b: return EPROBE_DEFER if bridge is not found](../20230328142628.753042927%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 218/240] drm/amd/display: fix wrong index used in dccg32_set_dpstreamclk](../20230328142628.791757481%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 219/240] drm/meson: fix missing component unbind on bind errors](../20230328142628.838258919%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 220/240] drm/amdgpu/nv: Apply ASPM quirk on Intel ADL + AMD Navi](../20230328142628.878258509%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 221/240] drm/i915/active: Fix missing debug object activation](../20230328142628.917550978%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43   ` [[Intel-gfx]](../20230328142628.917550978%40linuxfoundation.org/) " Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 222/240] drm/i915: Preserve crtc_state->inherited during state clearing](../20230328142628.970848080%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 223/240] drm/amdgpu: skip ASIC reset for APUs when go to S4](../20230328142629.017900983%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 224/240] drm/amdgpu: reposition the gpu reset checking for reuse](../20230328142629.066094754%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 225/240] riscv: mm: Fix incorrect ASID argument when flushing TLB](../20230328142629.107774069%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 226/240] riscv: Handle zicsr/zifencei issues between clang and binutils](../20230328142629.148777741%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 227/240] tee: amdtee: fix race condition in amdtee_open_session](../20230328142629.187600434%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 228/240] firmware: arm_scmi: Fix device node validation for mailbox transport](../20230328142629.219026769%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 229/240] arm64: dts: qcom: sc8280xp-x13s: mark s11b regulator as always-on](../20230328142629.259172649%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 230/240] arm64: dts: qcom: sc7280: Mark PCIe controller as cache coherent](../20230328142629.298255699%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 231/240] arm64: dts: qcom: sm8150: Fix the iommu mask used for PCIe controllers](../20230328142629.337326060%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 232/240] soc: qcom: llcc: Fix slice configuration values for SC8280XP](../20230328142629.379087634%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 233/240] mm/ksm: fix race with VMA iteration and mm_struct teardown](../20230328142629.418356442%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 234/240] bus: imx-weim: fix branch condition evaluates to a garbage value](../20230328142629.454423362%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 235/240] i2c: xgene-slimpro: Fix out-of-bounds bug in xgene_slimpro_i2c_xfer()](../20230328142629.486874597%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 236/240] dm stats: check for and propagate alloc_percpu failure](../20230328142629.527222185%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 237/240] dm crypt: add cond_resched() to dmcrypt_write()](../20230328142629.566386494%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 238/240] dm crypt: avoid accessing uninitialized tasklet](../20230328142629.607611853%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 239/240] sched/fair: sanitize vruntime of entity being placed](../20230328142629.654810155%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 240/240] sched/fair: Sanitize vruntime of entity being migrated](../20230328142629.701480541%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 17:02 ` [[PATCH 6.2 000/240] 6.2.9-rc1 review](../20230328170209.GA5469%40pc21.mareichelt.com/) Markus Reichelt
2023-03-28 20:47 ` [Justin Forbes](../ZCNSSAzHmtTHCw9O%40fedora64.linuxtx.org/)
2023-03-28 21:03 ` [Shuah Khan](../e1bbfa5c-a8ca-4bf4-7e34-7c5c61649691%40linuxfoundation.org/)
2023-03-29  4:11 ` [Bagas Sanjaya](../ZCO6gRM7ozbbXwua%40debian.me/)
2023-03-29  7:56 ` [Ron Economos](../4e0400e1-08cc-ef8e-5386-6ce5900945f4%40w6rz.net/)
2023-03-29  8:33 ` [Chris Paterson](../TY2PR01MB3788DE48F45133BAA119BB91B7899%40TY2PR01MB3788.jpnprd01.prod.outlook.com/)
2023-03-29 11:20 ` [Jon Hunter](../c1241136-a35c-4318-a105-02dfb97ce02a%40drhqmail203.nvidia.com/)
2023-03-29 11:43 ` [Naresh Kamboju](../CA%2BG9fYuypzL7H%3DxiVM8y8b5k1etL%2B79weW7DbBo_Mo%3DNu597wg%40mail.gmail.com/)
2023-03-29 12:45 ` [Conor Dooley](../3d21953f-7b60-4650-b9e9-438f45cde8d0%40spud/)
2023-03-29 17:55 ` [Florian Fainelli](../6c54bcdc-b65b-1738-4d99-51b5d98e996c%40gmail.com/)
2023-03-29 21:47 ` [Guenter Roeck](../430f447d-fb8f-408d-b9f0-28db4556a646%40roeck-us.net/)

```
```
find likely ancestor, descendant, or conflicting patches for [this message](#t):
( dfblob:f9314cc0cd75 dfblob:6b987da58655 )
 OR (
bs:"[PATCH 6.2 016/240] power: supply: da9150: Fix use after free bug in da9150_charger_remove due to race condition" )
	([help](../_/text/help/#search))
```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=20230328142620.323334485@linuxfoundation.org \
    --to=gregkh@linuxfoundation.org \
    --cc=patches@lists.linux.dev \
    --cc=sashal@kernel.org \
    --cc=sebastian.reichel@collabora.com \
    --cc=stable@vger.kernel.org \
    --cc=zyytlz.wz@163.com \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is an external index of several public inboxes,
see [mirroring instructions](../_/text/mirror/) on how to clone and mirror
all data and code used by this external index.
```


=== Content from lore.kernel.org_5670500b_20250115_134736.html ===

```
[All of lore.kernel.org](../?t=20230328144446)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: [stable@vger.kernel.org](../../stable/?t=20230328144446)
Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
	[patches@lists.linux.dev](../../linux-patches/?t=20230328144446), Zheng Wang <zyytlz.wz@163.com>,
	Sebastian Reichel <sebastian.reichel@collabora.com>,
	Sasha Levin <sashal@kernel.org>
Subject: [[PATCH 6.2 016/240] power: supply: da9150: Fix use after free bug in da9150_charger_remove due to race condition](#r)
Date: Tue, 28 Mar 2023 16:39:39 +0200	[[thread overview]](#r)
Message-ID: <20230328142620.323334485@linuxfoundation.org> (<raw>)
In-Reply-To: <[20230328142619.643313678@linuxfoundation.org](../20230328142619.643313678%40linuxfoundation.org/)>

From: Zheng Wang <zyytlz.wz@163.com>

[ Upstream commit 06615d11cc78162dfd5116efb71f29eb29502d37 ]

In da9150_charger_probe, &charger->otg_work is bound with
da9150_charger_otg_work. da9150_charger_otg_ncb may be
called to start the work.

If we remove the module which will call da9150_charger_remove
to make cleanup, there may be a unfinished work. The possible
sequence is as follows:

Fix it by canceling the work before cleanup in the da9150_charger_remove

CPU0                  CPUc1

                    |da9150_charger_otg_work
da9150_charger_remove      |
power_supply_unregister  |
device_unregister   |
power_supply_dev_release|
kfree(psy)          |
                    |
                    | 	power_supply_changed(charger->usb);
                    |   //use

Fixes: c1a281e34dae ("power: Add support for DA9150 Charger")
Signed-off-by: Zheng Wang <zyytlz.wz@163.com>
Signed-off-by: Sebastian Reichel <sebastian.reichel@collabora.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
---
 [drivers/power/supply/da9150-charger.c](#Z31drivers:power:supply:da9150-charger.c) | 1 +
 1 file [changed](#related), 1 insertion(+)

[diff](#iZ31drivers:power:supply:da9150-charger.c) --git a/drivers/power/supply/da9150-charger.c b/drivers/power/supply/da9150-charger.c
index f9314cc0cd75f..6b987da586556 100644
--- a/drivers/power/supply/da9150-charger.c
+++ b/drivers/power/supply/da9150-charger.c
@@ -662,6 +662,7 @@ static int da9150_charger_remove(struct platform_device *pdev)

 	if (!IS_ERR_OR_NULL(charger->usb_phy))
 		usb_unregister_notifier(charger->usb_phy, &charger->otg_nb);
+	cancel_work_sync(&charger->otg_work);

 	power_supply_unregister(charger->battery);
 	power_supply_unregister(charger->usb);
--
2.39.2

```

---

```
[next](../20230328142620.362151866%40linuxfoundation.org/) [prev](../20230328142620.288780822%40linuxfoundation.org/) [parent](../20230328142619.643313678%40linuxfoundation.org/) [reply](#R)	other threads:[[~2023-03-28 14:44 UTC](../?t=20230328144446)|[newest](../)]

Thread overview: 255+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2023-03-28 14:39 [[PATCH 6.2 000/240] 6.2.9-rc1 review](../20230328142619.643313678%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 001/240] interconnect: qcom: osm-l3: fix icc_onecell_data allocation](../20230328142619.710865759%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 002/240] interconnect: qcom: sm8450: switch to qcom_icc_rpmh_* function](../20230328142619.751814230%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 003/240] interconnect: qcom: qcm2290: Fix MASTER_SNOC_BIMC_NRT](../20230328142619.789674960%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 004/240] perf/core: Fix perf_output_begin parameter is incorrectly invoked in perf_event_bpf_output](../20230328142619.834691321%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 005/240] perf: fix perf_event_context->time](../20230328142619.885082459%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 006/240] tracing/hwlat: Replace sched_setaffinity with set_cpus_allowed_ptr](../20230328142619.914734290%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 007/240] drm/amd/display: fix k1 k2 divider programming for phantom streams](../20230328142619.959314875%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 008/240] drm/amd/display: Remove OTG DIV register write for Virtual signals](../20230328142620.005101478%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 009/240] drm/amd/display: Fix DP MST sinks removal issue](../20230328142620.045093548%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 010/240] arm64: dts: freescale: imx8-ss-lsio: Fix flexspi clock order](../20230328142620.082821620%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 011/240] arm64: dts: qcom: sc8280xp: Add label property to vadc channel nodes](../20230328142620.131077460%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 012/240] arm64: dts: qcom: sm6375: Add missing power-domain-named to CDSP](../20230328142620.170424156%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 013/240] arm64: dts: qcom: sm8450: correct WSA2 assigned clocks](../20230328142620.208408396%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 014/240] arm64: dts: qcom: sm8450: Mark UFS controller as cache coherent](../20230328142620.247591074%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 015/240] power: supply: bq24190: Fix use after free bug in bq24190_remove due to race condition](../20230328142620.288780822%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [Greg Kroah-Hartman [this message]](#t)
2023-03-28 14:39 ` [[PATCH 6.2 017/240] wifi: mt76: do not run mt76_unregister_device() on unregistered hw](../20230328142620.362151866%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 018/240] wifi: mt76: connac: do not check WED status for non-mmio devices](../20230328142620.407297196%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 019/240] efi: earlycon: Reprobe after parsing config tables](../20230328142620.456101490%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 020/240] arm64: dts: imx8dxl-evk: Disable hibernation mode of AR8031 for EQOS](../20230328142620.499592486%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 021/240] arm64: dts: imx8dxl-evk: Fix eqos phy reset gpio](../20230328142620.546814166%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 022/240] ARM: dts: imx6sll: e70k02: fix usbotg1 pinctrl](../20230328142620.581941463%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 023/240] ARM: dts: imx6sll: e60k02:](../20230328142620.618000662%40linuxfoundation.org/) " Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 024/240] ARM: dts: imx6sl: tolino-shine2hd:](../20230328142620.656066749%40linuxfoundation.org/) " Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 025/240] arm64: dts: imx8mn: specify #sound-dai-cells for SAI nodes](../20230328142620.691342916%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 026/240] arm64: dts: imx93: add missing #address-cells and #size-cells to i2c nodes](../20230328142620.722136815%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 027/240] NFS: Fix /proc/PID/io read_bytes for buffered reads](../20230328142620.768626003%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 028/240] NFS: Correct timing for assigning access cache timestamp](../20230328142620.808482644%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 029/240] xsk: Add missing overflow check in xdp_umem_reg](../20230328142620.846680251%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 030/240] iavf: fix inverted Rx hash condition leading to disabled hash](../20230328142620.883430253%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 031/240] iavf: fix non-tunneled IPv6 UDP packet type and hashing](../20230328142620.913692777%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 032/240] iavf: do not track VLAN 0 filters](../20230328142620.957004795%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 033/240] intel/igbvf: free irq on the error path in igbvf_request_msix()](../20230328142620.995870636%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 034/240] igbvf: Regard vf reset nack as success](../20230328142621.026166460%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 035/240] igc: fix the validation logic for taprios gate list](../20230328142621.073359161%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:39 ` [[PATCH 6.2 036/240] i2c: imx-lpi2c: check only for enabled interrupt flags](../20230328142621.112166483%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 037/240] i2c: mxs: ensure that DMA buffers are safe for DMA](../20230328142621.149491299%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 038/240] i2c: hisi: Only use the completion interrupt to finish the transfer](../20230328142621.185116641%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 039/240] scsi: scsi_dh_alua: Fix memleak for qdata in alua_activate()](../20230328142621.223188670%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 040/240] nfsd: dont replace page in rq_pages if its a continuation of last page](../20230328142621.260573786%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 041/240] net: dsa: b53: mmap: fix device tree support](../20230328142621.426945594%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 042/240] net: usb: smsc95xx: Limit packet length to skb->len](../20230328142621.466460668%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 043/240] efi/libstub: smbios: Use length member instead of record struct size](../20230328142621.515220613%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 044/240] arm64: efi: Use SMBIOS processor version to key off Ampere quirk](../20230328142621.544265000%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 045/240] qed/qed_sriov: guard against NULL derefs from qed_iov_get_vf_info](../20230328142621.583666046%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 046/240] xirc2ps_cs: Fix use after free bug in xirc2ps_detach](../20230328142621.631375961%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 047/240] net: phy: Ensure state transitions are processed from phy_stop()](../20230328142621.660940473%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 048/240] net: mdio: fix owner field for mdio buses registered using device-tree](../20230328142621.704866374%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 049/240] net: mdio: fix owner field for mdio buses registered using ACPI](../20230328142621.746202151%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 050/240] net: stmmac: Fix for mismatched host/device DMA address width](../20230328142621.795335283%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 051/240] thermal/drivers/mellanox: Use generic thermal_zone_get_trip() function](../20230328142621.830118124%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 052/240] mlxsw: core_thermal: Fix fan speed in maximum cooling state](../20230328142621.874497031%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 053/240] drm/i915/fbdev: lock the fbdev obj before vma pin](../20230328142621.924737301%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 054/240] drm/i915/mtl: Disable MC6 for MTL A step](../20230328142621.963423625%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 055/240] drm/i915/guc: Rename GuC register state capture node to be more obvious](../20230328142622.008242977%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 056/240] drm/i915/guc: Fix missing ecodes](../20230328142622.055991962%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 057/240] drm/i915/gt: perform uc late init after probe error injection](../20230328142622.091001181%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 058/240] drm/i915: Fix format for perf_limit_reasons](../20230328142622.129366648%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 059/240] drm/i915: Update vblank timestamping stuff on seamless M/N change](../20230328142622.178499619%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 060/240] net: dsa: report rx_bytes unadjusted for ETH_HLEN](../20230328142622.222558129%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 061/240] net: qcom/emac: Fix use after free bug in emac_remove due to race condition](../20230328142622.263780357%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 062/240] net: usb: lan78xx: Limit packet length to skb->len](../20230328142622.307981197%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 063/240] net/ps3_gelic_net: Fix RX sk_buff length](../20230328142622.352445063%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 064/240] net/ps3_gelic_net: Use dma_mapping_error](../20230328142622.392575012%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 065/240] octeontx2-vf: Add missing free for alloc_percpu](../20230328142622.440049720%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 066/240] bootconfig: Fix testcase to increase max node](../20230328142622.490007613%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 067/240] keys: Do not cache key in task struct if key is requested from kernel thread](../20230328142622.530564908%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 068/240] ice: check if VF exists before mode check](../20230328142622.570231611%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 069/240] iavf: fix hang on reboot with ice](../20230328142622.621287034%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 070/240] i40e: fix flow director packet filter programming](../20230328142622.667911800%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 071/240] bpf: Adjust insufficient default bpf_jit_limit](../20230328142622.710796792%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 072/240] net/mlx5e: Set uplink rep as NETNS_LOCAL](../20230328142622.753178489%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 073/240] net/mlx5e: Block entering switchdev mode with ns inconsistency](../20230328142622.800485158%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 074/240] net/mlx5: Fix steering rules cleanup](../20230328142622.849097624%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 075/240] net/mlx5e: Overcome slow response for first macsec ASO WQE](../20230328142622.893970866%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 076/240] net/mlx5: Read the TC mapping of all priorities on ETS query](../20230328142622.945206717%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 077/240] net/mlx5: E-Switch, Fix an Oops in error handling code](../20230328142622.990408207%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 078/240] net: dsa: tag_brcm: legacy: fix daisy-chained switches](../20230328142623.034969152%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 079/240] atm: idt77252: fix kmemleak when rmmod idt77252](../20230328142623.073732955%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 080/240] erspan: do not use skb_mac_header() in ndo_start_xmit()](../20230328142623.114923365%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 081/240] net: mscc: ocelot: fix stats region batching](../20230328142623.153789306%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 082/240] net/sonic: use dma_mapping_error() for error check](../20230328142623.193498319%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 083/240] nvme-tcp: fix nvme_tcp_term_pdu to match spec](../20230328142623.241867278%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 084/240] mlxsw: spectrum_fid: Fix incorrect local port type](../20230328142623.271886866%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 085/240] hvc/xen: prevent concurrent accesses to the shared ring](../20230328142623.313574040%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 086/240] ksmbd: add low bound validation to FSCTL_SET_ZERO_DATA](../20230328142623.356299473%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 087/240] ksmbd: add low bound validation to FSCTL_QUERY_ALLOCATED_RANGES](../20230328142623.402735421%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 088/240] ksmbd: fix possible refcount leak in smb2_open()](../20230328142623.442467184%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 089/240] Bluetooth: hci_sync: Resume adv with no RPA when active scan](../20230328142623.485594384%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 090/240] Bluetooth: hci_core: Detect if an ACL packet is in fact an ISO packet](../20230328142623.523779682%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 091/240] Bluetooth: btusb: Remove detection of ISO packets over bulk](../20230328142623.562361376%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 092/240] Bluetooth: ISO: fix timestamped HCI ISO data packet parsing](../20230328142623.606553127%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 093/240] Bluetooth: Remove "Power-on" check from Mesh feature](../20230328142623.646321969%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 094/240] gve: Cache link_speed value from device](../20230328142623.683823014%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 095/240] net: asix: fix modprobe "sysfs: cannot create duplicate filename"](../20230328142623.721880933%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:40 ` [[PATCH 6.2 096/240] net: dsa: mt7530: move enabling disabling core clock to mt7530_pll_setup()](../20230328142623.770549359%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 097/240] net: dsa: mt7530: move lowering TRGMII driving to mt7530_setup()](../20230328142623.814630650%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 098/240] net: dsa: mt7530: move setting ssc_delta to PHY_INTERFACE_MODE_TRGMII case](../20230328142623.852872836%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 099/240] net: mdio: thunder: Add missing fwnode_handle_put()](../20230328142623.901442984%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 100/240] efi/libstub: Use relocated version of kernels struct screen_info](../20230328142623.936352253%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 101/240] drm/amd/display: Set dcn32 caps.seamless_odm](../20230328142623.974274834%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 102/240] Bluetooth: btqcomsmd: Fix command timeout after setting BD address](../20230328142624.017660272%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 103/240] Bluetooth: L2CAP: Fix responding with wrong PDU type](../20230328142624.066780154%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 104/240] Bluetooth: btsdio: fix use after free bug in btsdio_remove due to unfinished work](../20230328142624.113723487%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 105/240] Bluetooth: mgmt: Fix MGMT add advmon with RSSI command](../20230328142624.148883345%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 106/240] Bluetooth: HCI: Fix global-out-of-bounds](../20230328142624.186365119%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 107/240] platform/chrome: cros_ec_chardev: fix kernel data leak from ioctl](../20230328142624.233826657%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 108/240] entry: Fix noinstr warning in __enter_from_user_mode()](../20230328142624.285278136%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 109/240] perf/x86/amd/core: Always clear status for idx](../20230328142624.327351397%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 110/240] entry/rcu: Check TIF_RESCHED _after_ delayed RCU wake-up](../20230328142624.360682782%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 111/240] hwmon: fix potential sensor registration fail if of_node is missing](../20230328142624.405320947%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 112/240] hwmon (it87): Fix voltage scaling for chips with 10.9mV ADCs](../20230328142624.446836814%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 113/240] scsi: qla2xxx: Synchronize the IOCB count to be in order](../20230328142624.494792117%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 114/240] scsi: qla2xxx: Perform lockless command completion in abort path](../20230328142624.536276203%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 115/240] smb3: lower default deferred close timeout to address perf regression](../20230328142624.583674291%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 116/240] smb3: fix unusable share after force unmount failure](../20230328142624.634920893%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 117/240] uas: Add US_FL_NO_REPORT_OPCODES for JMicron JMS583Gen 2](../20230328142624.674311939%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 118/240] thunderbolt: Use scale field when allocating USB3 bandwidth](../20230328142624.703667203%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 119/240] thunderbolt: Call tb_check_quirks() after initializing adapters](../20230328142624.741474656%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 120/240] thunderbolt: Add quirk to disable CLx](../20230328142624.787603286%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 121/240] thunderbolt: Fix memory leak in margining](../20230328142624.826282340%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 122/240] thunderbolt: Disable interrupt auto clear for rings](../20230328142624.876794498%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 123/240] thunderbolt: Add missing UNSET_INBOUND_SBTX for retimer access](../20230328142624.907733156%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 124/240] thunderbolt: Use const qualifier for `ring_interrupt_index`](../20230328142624.949517970%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 125/240] thunderbolt: Rename shadowed variables bit to interrupt_bit and auto_clear_bit](../20230328142624.991819037%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 126/240] ASoC: amd: yp: Add OMEN by HP Gaming Laptop 16z-n000 to quirks](../20230328142625.040865270%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 127/240] ASoC: Intel: sof_rt5682: Add quirk for Rex board with mx98360a amplifier](../20230328142625.078456185%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 128/240] scsi: ufs: core: Initialize devfreq synchronously](../20230328142625.117629733%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-29 17:48   ` [Adrien Thierry](../ZCR6CiexABbS9AVI%40fedora/)
2023-03-28 14:41 ` [[PATCH 6.2 129/240] ASoC: amd: yc: Add DMI entries to support HP OMEN 16-n0xxx (8A43)](../20230328142625.155286578%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 130/240] ACPI: x86: Drop quirk for HP Elitebook](../20230328142625.191331946%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 131/240] ACPI: x86: utils: Add Cezanne to the list for forcing StorageD3Enable](../20230328142625.234129319%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 132/240] riscv: Bump COMMAND_LINE_SIZE value to 1024](../20230328142625.274088241%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 133/240] drm/cirrus: NULL-check pipe->plane.state->fb in cirrus_pipe_update()](../20230328142625.315219310%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 134/240] HID: cp2112: Fix driver not registering GPIO IRQ chip as threaded](../20230328142625.355176892%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 135/240] ca8210: fix mac_len negative array access](../20230328142625.393984304%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 136/240] HID: logitech-hidpp: Add support for Logitech MX Master 3S mouse](../20230328142625.438226384%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 137/240] HID: intel-ish-hid: ipc: Fix potential use-after-free in work function](../20230328142625.476991656%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 138/240] m68k: mm: Fix systems with memory at end of 32-bit address space](../20230328142625.506327581%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 139/240] m68k: Only force 030 bus error if PC not in exception table](../20230328142625.541034353%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 140/240] selftests/bpf: check that modifier resolves after pointer](../20230328142625.579625167%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 141/240] cpumask: fix incorrect cpumask scanning result checks](../20230328142625.618976755%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 142/240] scsi: target: iscsi: Fix an error message in iscsi_check_key()](../20230328142625.659112464%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 143/240] scsi: qla2xxx: Add option to disable FC2 Target support](../20230328142625.689139272%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 144/240] scsi: hisi_sas: Check devm_add_action() return value](../20230328142625.732414050%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 145/240] scsi: ufs: core: Add soft dependency on governor_simpleondemand](../20230328142625.762974503%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 146/240] scsi: lpfc: Check kzalloc() in lpfc_sli4_cgn_params_read()](../20230328142625.809895676%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 147/240] scsi: lpfc: Avoid usage of list iterator variable after loop](../20230328142625.849960807%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 148/240] scsi: mpi3mr: Driver unload crashes host when enhanced logging is enabled](../20230328142625.887498532%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 149/240] scsi: mpi3mr: Wait for diagnostic save during controller init](../20230328142625.918307232%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 150/240] scsi: mpi3mr: NVMe command size greater than 8K fails](../20230328142625.961962476%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 151/240] scsi: mpi3mr: Bad drive in topology results kernel crash](../20230328142625.997998765%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 152/240] scsi: storvsc: Handle BlockSize change in Hyper-V VHD/VHDX file](../20230328142626.032596809%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 153/240] platform/x86: int3472: Add GPIOs to Surface Go 3 Board data](../20230328142626.069261503%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 154/240] net: usb: cdc_mbim: avoid altsetting toggling for Telit FE990](../20230328142626.108642489%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 155/240] net: usb: qmi_wwan: add Telit 0x1080 composition](../20230328142626.155690381%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:41 ` [[PATCH 6.2 156/240] drm/amd/display: Update clock table to include highest clock setting](../20230328142626.194643913%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 157/240] sh: sanitize the flags on sigreturn](../20230328142626.234411797%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 158/240] drm/amdgpu: Fix call trace warning and hang when removing amdgpu device](../20230328142626.265192007%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 159/240] drm/amd: Fix initialization mistake for NBIO 7.3.0](../20230328142626.304899161%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 160/240] net/sched: act_mirred: better wording on protection against excessive stack growth](../20230328142626.336239526%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 161/240] act_mirred: use the backlog for nested calls to mirred ingress](../20230328142626.385345768%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 162/240] cifs: lock chan_lock outside match_session](../20230328142626.430679137%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 163/240] cifs: append path to open_enter trace event](../20230328142626.468882415%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 164/240] cifs: do not poll server interfaces too regularly](../20230328142626.507642599%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 165/240] cifs: empty interface list when server doesnt support query interfaces](../20230328142626.553734690%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 166/240] cifs: dump pending mids for all channels in DebugData](../20230328142626.583129985%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 167/240] cifs: print session id while listing open files](../20230328142626.620583880%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 168/240] cifs: fix dentry lookups in directory handle cache](../20230328142626.654309912%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 169/240] x86/mm: Do not shuffle CPU entry areas without KASLR](../20230328142626.702956348%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 170/240] x86/fpu/xstate: Prevent false-positive warning in __copy_xstate_uabi_buf()](../20230328142626.742801691%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 171/240] selftests/x86/amx: Add a ptrace test](../20230328142626.776861250%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 172/240] scsi: core: Add BLIST_SKIP_VPD_PAGES for SKhynix H28U74301AMR](../20230328142626.806645010%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 173/240] usb: misc: onboard-hub: add support for Microchip USB2517 USB 2.0 hub](../20230328142626.844317794%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 174/240] usb: dwc2: fix a race, dont power off/on phy for dual-role mode](../20230328142626.881393183%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 175/240] usb: dwc2: drd: fix inconsistent mode if role-switch-default-mode="host"](../20230328142626.926018449%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 176/240] usb: dwc2: fix a devres leak in hw_enable upon suspend resume](../20230328142626.967111679%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 177/240] block/io_uring: pass in issue_flags for uring_cmd task_work handling](../20230328142627.008518107%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 178/240] usb: gadget: u_audio: dont let userspace block driver unbind](../20230328142627.046946682%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 179/240] btrfs: zoned: fix btrfs_can_activate_zone() to support DUP profile](../20230328142627.085432229%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 180/240] Bluetooth: Fix race condition in hci_cmd_sync_clear](../20230328142627.125460499%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 181/240] efi: sysfb_efi: Fix DMI quirks not working for simpledrm](../20230328142627.172614381%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 182/240] mm/slab: Fix undefined init_cache_node_node() for NUMA and !SMP](../20230328142627.211424423%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 183/240] efi/libstub: zboot: Mark zboot EFI application as NX compatible](../20230328142627.260590436%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 184/240] arm64: efi: Set NX compat flag in PE/COFF header](../20230328142627.301399999%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 185/240] fscrypt: destroy keyring after security_sb_delete()](../20230328142627.341200811%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 186/240] fsverity: Remove WQ_UNBOUND from fsverity read workqueue](../20230328142627.388577531%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 187/240] lockd: set file_lock start and end when decoding nlm4 testargs](../20230328142627.428115646%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 188/240] arm64: dts: imx8mm-nitrogen-r2: fix WM8960 clock name](../20230328142627.468965699%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 189/240] igb: revert rtnl_lock() that causes deadlock](../20230328142627.515380987%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 190/240] dm thin: fix deadlock when swapping to thin device](../20230328142627.563101694%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 191/240] usb: typec: tcpm: fix create duplicate source-capabilities file](../20230328142627.603641540%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 192/240] usb: typec: tcpm: fix warning when handle discover_identity message](../20230328142627.654641244%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 193/240] usb: cdns3: Fix issue with using incorrect PCI device function](../20230328142627.702359431%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 194/240] usb: cdnsp: Fixes issue with redundant Status Stage](../20230328142627.734426658%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 195/240] usb: cdnsp: changes PCI Device ID to fix conflict with CNDS3 driver](../20230328142627.783094075%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 196/240] usb: chipdea: core: fix return -EINVAL if request role is the same with current role](../20230328142627.833646503%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 197/240] usb: chipidea: core: fix possible concurrent when switch role](../20230328142627.871113709%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 198/240] usb: dwc3: gadget: Add 1ms delay after end transfer command without IOC](../20230328142627.918339819%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 199/240] usb: ucsi: Fix NULL pointer deref in ucsi_connector_change()](../20230328142627.959981775%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 200/240] usb: ucsi_acpi: Increase the command completion timeout](../20230328142627.990664417%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 201/240] mm: kfence: fix using kfence_metadata without initialization in show_object()](../20230328142628.042035097%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 202/240] kfence: avoid passing -g for test](../20230328142628.094495448%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 203/240] io_uring/net: avoid sending -ECONNABORTED on repeated connection requests](../20230328142628.142527210%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42   ` [Greg Kroah-Hartman](../20230328142628.142527210%40linuxfoundation.org/)
2023-03-28 14:42 ` [[PATCH 6.2 204/240] io_uring/rsrc: fix null-ptr-deref in io_file_bitmap_get()](../20230328142628.182813129%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 205/240] Revert "kasan: drop skip_kasan_poison variable in free_pages_prepare"](../20230328142628.223011878%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 206/240] kcsan: avoid passing -g for test](../20230328142628.264195698%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 207/240] test_maple_tree: add more testing for mas_empty_area()](../20230328142628.306829114%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 208/240] maple_tree: fix mas_skip_node() end slot detection](../20230328142628.357681120%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 209/240] ksmbd: fix wrong signingkey creation when encryption is AES256](../20230328142628.397571122%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 210/240] ksmbd: set FILE_NAMED_STREAMS attribute in FS_ATTRIBUTE_INFORMATION](../20230328142628.434248285%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 211/240] ksmbd: dont terminate inactive sessions after a few seconds](../20230328142628.484816994%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 212/240] ksmbd: return STATUS_NOT_SUPPORTED on unsupported smb2.0 dialect](../20230328142628.517730374%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 213/240] ksmbd: return unsupported error on smb1 mount](../20230328142628.565515750%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 214/240] wifi: mac80211: fix qos on mesh interfaces](../20230328142628.612410804%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 215/240] wifi: mac80211: Serialize ieee80211_handle_wake_tx_queue()](../20230328142628.651705812%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:42 ` [[PATCH 6.2 216/240] nilfs2: fix kernel-infoleak in nilfs_ioctl_wrap_copy()](../20230328142628.700611797%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 217/240] drm/bridge: lt8912b: return EPROBE_DEFER if bridge is not found](../20230328142628.753042927%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 218/240] drm/amd/display: fix wrong index used in dccg32_set_dpstreamclk](../20230328142628.791757481%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 219/240] drm/meson: fix missing component unbind on bind errors](../20230328142628.838258919%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 220/240] drm/amdgpu/nv: Apply ASPM quirk on Intel ADL + AMD Navi](../20230328142628.878258509%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 221/240] drm/i915/active: Fix missing debug object activation](../20230328142628.917550978%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43   ` [[Intel-gfx]](../20230328142628.917550978%40linuxfoundation.org/) " Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 222/240] drm/i915: Preserve crtc_state->inherited during state clearing](../20230328142628.970848080%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 223/240] drm/amdgpu: skip ASIC reset for APUs when go to S4](../20230328142629.017900983%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 224/240] drm/amdgpu: reposition the gpu reset checking for reuse](../20230328142629.066094754%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 225/240] riscv: mm: Fix incorrect ASID argument when flushing TLB](../20230328142629.107774069%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 226/240] riscv: Handle zicsr/zifencei issues between clang and binutils](../20230328142629.148777741%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 227/240] tee: amdtee: fix race condition in amdtee_open_session](../20230328142629.187600434%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 228/240] firmware: arm_scmi: Fix device node validation for mailbox transport](../20230328142629.219026769%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 229/240] arm64: dts: qcom: sc8280xp-x13s: mark s11b regulator as always-on](../20230328142629.259172649%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 230/240] arm64: dts: qcom: sc7280: Mark PCIe controller as cache coherent](../20230328142629.298255699%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 231/240] arm64: dts: qcom: sm8150: Fix the iommu mask used for PCIe controllers](../20230328142629.337326060%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 232/240] soc: qcom: llcc: Fix slice configuration values for SC8280XP](../20230328142629.379087634%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 233/240] mm/ksm: fix race with VMA iteration and mm_struct teardown](../20230328142629.418356442%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 234/240] bus: imx-weim: fix branch condition evaluates to a garbage value](../20230328142629.454423362%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 235/240] i2c: xgene-slimpro: Fix out-of-bounds bug in xgene_slimpro_i2c_xfer()](../20230328142629.486874597%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 236/240] dm stats: check for and propagate alloc_percpu failure](../20230328142629.527222185%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 237/240] dm crypt: add cond_resched() to dmcrypt_write()](../20230328142629.566386494%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 238/240] dm crypt: avoid accessing uninitialized tasklet](../20230328142629.607611853%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 239/240] sched/fair: sanitize vruntime of entity being placed](../20230328142629.654810155%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 14:43 ` [[PATCH 6.2 240/240] sched/fair: Sanitize vruntime of entity being migrated](../20230328142629.701480541%40linuxfoundation.org/) Greg Kroah-Hartman
2023-03-28 17:02 ` [[PATCH 6.2 000/240] 6.2.9-rc1 review](../20230328170209.GA5469%40pc21.mareichelt.com/) Markus Reichelt
2023-03-28 20:47 ` [Justin Forbes](../ZCNSSAzHmtTHCw9O%40fedora64.linuxtx.org/)
2023-03-28 21:03 ` [Shuah Khan](../e1bbfa5c-a8ca-4bf4-7e34-7c5c61649691%40linuxfoundation.org/)
2023-03-29  4:11 ` [Bagas Sanjaya](../ZCO6gRM7ozbbXwua%40debian.me/)
2023-03-29  7:56 ` [Ron Economos](../4e0400e1-08cc-ef8e-5386-6ce5900945f4%40w6rz.net/)
2023-03-29  8:33 ` [Chris Paterson](../TY2PR01MB3788DE48F45133BAA119BB91B7899%40TY2PR01MB3788.jpnprd01.prod.outlook.com/)
2023-03-29 11:20 ` [Jon Hunter](../c1241136-a35c-4318-a105-02dfb97ce02a%40drhqmail203.nvidia.com/)
2023-03-29 11:43 ` [Naresh Kamboju](../CA%2BG9fYuypzL7H%3DxiVM8y8b5k1etL%2B79weW7DbBo_Mo%3DNu597wg%40mail.gmail.com/)
2023-03-29 12:45 ` [Conor Dooley](../3d21953f-7b60-4650-b9e9-438f45cde8d0%40spud/)
2023-03-29 17:55 ` [Florian Fainelli](../6c54bcdc-b65b-1738-4d99-51b5d98e996c%40gmail.com/)
2023-03-29 21:47 ` [Guenter Roeck](../430f447d-fb8f-408d-b9f0-28db4556a646%40roeck-us.net/)

```
```
find likely ancestor, descendant, or conflicting patches for [this message](#t):
( dfblob:f9314cc0cd75 dfblob:6b987da58655 )
 OR (
bs:"[PATCH 6.2 016/240] power: supply: da9150: Fix use after free bug in da9150_charger_remove due to race condition" )
	([help](../_/text/help/#search))
```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=20230328142620.323334485@linuxfoundation.org \
    --to=gregkh@linuxfoundation.org \
    --cc=patches@lists.linux.dev \
    --cc=sashal@kernel.org \
    --cc=sebastian.reichel@collabora.com \
    --cc=stable@vger.kernel.org \
    --cc=zyytlz.wz@163.com \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is an external index of several public inboxes,
see [mirroring instructions](../_/text/mirror/) on how to clone and mirror
all data and code used by this external index.
```


=== Content from lore.kernel.org_3448a57e_20250115_134736.html ===

```
[All of lore.kernel.org](../?t=20230326220403)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: Linus Torvalds <torvalds@linux-foundation.org>
To: Linux Kernel Mailing List <[linux-kernel@vger.kernel.org](../../lkml/?t=20230326220403)>
Subject: [Linux 6.3-rc4](#r)
Date: Sun, 26 Mar 2023 15:03:35 -0700	[[thread overview]](#r)
Message-ID: <CAHk-=whcaHLNpb7Mu_QX7ABwPgyRyfW-V8=v4Mv0S22fpjY4JQ@mail.gmail.com> (<raw>)

Things are looking pretty normal for this time of the release process.
All the stats look very regular, and the diffstat mostly does too.

I say "mostly", just because we had a bunch of xfs fixes last week,
which makes the diffstat skew that way more than usual. But even that
is mainly for a self-test addition. The actual code changes are much
smaller.

So instead of the usual 50+% drivers, the rc4 diffstat is about "one
third drivers, one third filesystems, one third rest". Not all of the
filesystem stuff is xfs, of course - we have cifs, btrfs and ksmbd
fixes too.

On the driver side, it's a mix, but networking and gpu shows up as
usual. With USB and thunderbolt fixes showing up, and the rest being
fairly random.

And "the rest" is all the normal stuff. Self-tests, core networking,
architecture updates, nothing odd there.

Let's hope things stay normal. And, as normal, testing and reporting
issues is appreciated,

       Linus

---

AKASHI Takahiro (1):
      igc: fix the validation logic for taprio's gate list

Abel Vesa (2):
      arm64: dts: qcom: sm8550: Add bias pull up value to tlmm i2c
data clk states
      soc: qcom: llcc: Fix slice configuration values for SC8280XP

Ahmed Zaki (1):
      iavf: do not track VLAN 0 filters

Akihiko Odaki (2):
      igb: Enable SR-IOV after reinit
      igbvf: Regard vf reset nack as success

Alex Hung (1):
      drm/amd/display: remove outdated 8bpc comments

Alexander Lobakin (2):
      iavf: fix inverted Rx hash condition leading to disabled hash
      iavf: fix non-tunneled IPv6 UDP packet type and hashing

Alexander Stein (6):
      arm64: dts: freescale: imx8-ss-lsio: Fix flexspi clock order
      usb: misc: onboard-hub: add support for Microchip USB2517 USB 2.0 hub
      arm64: dts: imx93: Fix eqos properties
      arm64: dts: imx93: add missing #address-cells and #size-cells to i2c nodes
      i2c: imx-lpi2c: clean rx/tx buffers upon new message
      i2c: imx-lpi2c: check only for enabled interrupt flags

Alexander Wetzel (1):
      wifi: mac80211: Serialize ieee80211_handle_wake_tx_queue()

Alexei Starovoitov (2):
      selftests/bpf: Fix progs/find_vma_fail1.c build error.
      selftests/bpf: Fix progs/test_deny_namespace.c issues.

Alvin Šipraga (1):
      usb: gadget: u_audio: don't let userspace block driver unbind

Andrew Halaney (1):
      arm64: dts: imx8dxl-evk: Fix eqos phy reset gpio

Andrew Jeffery (1):
      ARM: 9290/1: uaccess: Fix KASAN false-positives

Andrzej Hajda (1):
      drm/i915/gt: perform uc late init after probe error injection

Andy Shevchenko (1):
      usb: gadget: Use correct endianness of the wLength field for WebUSB

Ard Biesheuvel (10):
      efi/libstub: zboot: Mark zboot EFI application as NX compatible
      efi/libstub: arm64: Remap relocated image with strict permissions
      arm64: efi: Set NX compat flag in PE/COFF header
      efi: earlycon: Reprobe after parsing config tables
      efi/libstub: smbios: Use length member instead of record struct size
      arm64: efi: Use SMBIOS processor version to key off Ampere quirk
      efi/libstub: smbios: Drop unused 'recsize' parameter
      efi/libstub: zboot: Add compressed image to make targets
      efi/libstub: Use relocated version of kernel's struct screen_info
      efi/libstub: randomalloc: Return EFI_OUT_OF_RESOURCES on failure

Arnd Bergmann (2):
      gpu: host1x: fix uninitialized variable use
      gpu: host1x: fix uninitialized variable use

Arınç ÜNAL (3):
      net: dsa: mt7530: move enabling disabling core clock to mt7530_pll_setup()
      net: dsa: mt7530: move lowering TRGMII driving to mt7530_setup()
      net: dsa: mt7530: move setting ssc_delta to PHY_INTERFACE_MODE_TRGMII case

Ashutosh Dixit (1):
      Revert "drm/i915/hwmon: Enable PL1 power limit"

Aymeric Wibo (1):
      ACPI: resource: Add Medion S17413 to IRQ override quirk

Badal Nilawar (1):
      drm/i915/mtl: Disable MC6 for MTL A step

Bob Peterson (1):
      Reinstate "GFS2: free disk inode which is deleted by remote node -V2"

Breno Leitao (1):
      perf/x86/amd/core: Always clear status for idx

Brian Gix (1):
      Bluetooth: Remove "Power-on" check from Mesh feature

Brian Masney (1):
      arm64: dts: qcom: sa8540p-ride: correct name of remoteproc_nsp0 firmware

Caleb Sander (1):
      nvme-tcp: fix nvme_tcp_term_pdu to match spec

Chang S. Bae (2):
      x86/fpu/xstate: Prevent false-positive warning in __copy_xstate_uabi_buf()
      selftests/x86/amx: Add a ptrace test

ChenXiaoSong (1):
      ksmbd: fix possible refcount leak in smb2_open()

Chengen Du (1):
      NFS: Correct timing for assigning access cache timestamp

Christophe JAILLET (1):
      firmware: arm_scmi: Use the bitmap API to allocate bitmaps

Chuck Lever (2):
      NFS & NFSD: Update GSS dependencies
      SUNRPC: Fix a crash in gss_krb5_checksum()

Coly Li (1):
      dm thin: fix deadlock when swapping to thin device

Cristian Marussi (2):
      firmware: arm_scmi: Fix raw coexistence mode behaviour on failure path
      firmware: arm_scmi: Fix device node validation for mailbox transport

Damien Le Moal (2):
      zonefs: Prevent uninitialized symbol 'size' warning
      zonefs: Fix error message in zonefs_file_dio_append()

Dan Carpenter (3):
      firmware: arm_scmi: Clean up a return statement in scmi_probe
      firmware: arm_scmi: Return a literal instead of a variable
      net/mlx5: E-Switch, Fix an Oops in error handling code

Daniel Borkmann (1):
      bpf: Adjust insufficient default bpf_jit_limit

Daniel Scally (1):
      docs: usb: Add documentation for the UVC Gadget

Daniil Tatianin (1):
      qed/qed_sriov: guard against NULL derefs from qed_iov_get_vf_info

Darrick J. Wong (7):
      xfs: try to idiot-proof the allocators
      xfs: walk all AGs if TRYLOCK passed to xfs_alloc_vextent_iterate_ags
      xfs: add tracepoints for each of the externally visible allocators
      xfs: test dir/attr hash when loading module
      xfs: pass the correct cursor to xfs_iomap_prealloc_size
      xfs: clear incore AGFL_RESET state if it's not needed
      xfs: fix mismerged tracepoints

Dave Chinner (4):
      cpumask: introduce for_each_cpu_or
      pcpcntrs: fix dying cpu summation race
      fork: remove use of percpu_counter_sum_all
      pcpcntr: remove percpu_counter_sum_all()

Dave Wysochanski (1):
      NFS: Fix /proc/PID/io read_bytes for buffered reads

David Howells (1):
      keys: Do not cache key in task struct if key is requested from
kernel thread

Denis Arefev (1):
      power: supply: axp288_fuel_gauge: Added check for negative values

Donald Hunter (1):
      tools: ynl: Fix genlmsg header encoding formats

Dylan Jhong (1):
      riscv: mm: Fix incorrect ASID argument when flushing TLB

Eduard Zingerman (2):
      bpf: Allow reads from uninit stack
      selftests/bpf: Tests for uninitialized stack reads

Emeel Hakim (1):
      net/mlx5e: Overcome slow response for first macsec ASO WQE

Enric Balletbo i Serra (1):
      mailmap: add entry for Enric Balletbo i Serra

Eric Biggers (4):
      fscrypt: destroy keyring after security_sb_delete()
      fsverity: don't drop pagecache at end of FS_IOC_ENABLE_VERITY
      fscrypt: improve fscrypt_destroy_keyring() documentation
      fscrypt: check for NULL keyring in fscrypt_put_master_key_activeref()

Eric Dumazet (1):
      erspan: do not use skb_mac_header() in ndo_start_xmit()

Fabrice Gasnier (2):
      usb: dwc2: fix a devres leak in hw_enable upon suspend resume
      usb: dwc2: fix a race, don't power off/on phy for dual-role mode

Felix Fietkau (3):
      wifi: mt76: mt7915: add back 160MHz channel width support for MT7915
      wifi: mac80211: fix qos on mesh interfaces
      wifi: mac80211: fix mesh path discovery based on unicast packets

Florian Fainelli (2):
      net: phy: Ensure state transitions are processed from phy_stop()
      net: mdio: fix owner field for mdio buses registered using ACPI

Frank Crawford (1):
      hwmon (it87): Fix voltage scaling for chips with 10.9mV  ADCs

Frederic Weisbecker (1):
      entry/rcu: Check TIF_RESCHED _after_ delayed RCU wake-up

Gaosheng Cui (1):
      intel/igbvf: free irq on the error path in igbvf_request_msix()

Gavin Li (2):
      net/mlx5e: Set uplink rep as NETNS_LOCAL
      net/mlx5e: Block entering switchdev mode with ns inconsistency

Geert Uytterhoeven (2):
      mm/slab: Fix undefined init_cache_node_node() for NUMA and !SMP
      lib: dhry: fix unstable smp_processor_id(_) usage

Geoff Levand (2):
      net/ps3_gelic_net: Fix RX sk_buff length
      net/ps3_gelic_net: Use dma_mapping_error

Gil Fine (2):
      thunderbolt: Add missing UNSET_INBOUND_SBTX for retimer access
      thunderbolt: Limit USB3 bandwidth of certain Intel USB4 host routers

Grant Grundler (2):
      power: supply: cros_usbpd: reclassify "default case!" as debug
      net: asix: fix modprobe "sysfs: cannot create duplicate filename"

Grygorii Strashko (1):
      net: ethernet: ti: am65-cpts: reset pps genf adj settings on enable

Hans de Goede (7):
      usb: ucsi: Fix NULL pointer deref in ucsi_connector_change()
      usb: ucsi: Fix ucsi->connector race
      usb: ucsi_acpi: Increase the command completion timeout
      efi: sysfb_efi: Fix DMI quirks not working for simpledrm
      efi: sysfb_efi: Add quirk for Lenovo Yoga Book X91F/L
      ACPI: video: Add backlight=native DMI quirk for Acer Aspire 3830TG
      drm: panel-orientation-quirks: Add quirk for Lenovo Yoga Book X90F

Hersen Wu (2):
      drm/amd/display: fix wrong index used in dccg32_set_dpstreamclk
      drm/amd/display: Set dcn32 caps.seamless_odm

Hongren Zheng (1):
      MAINTAINERS: make me a reviewer of USB/IP

Howard Chung (1):
      Bluetooth: mgmt: Fix MGMT add advmon with RSSI command

Ido Schimmel (3):
      mlxsw: core_thermal: Fix fan speed in maximum cooling state
      mlxsw: spectrum_fid: Fix incorrect local port type
      thermal: core: Restore behavior regarding invalid trip points

Ivan Bornyakov (1):
      bus: imx-weim: fix branch condition evaluates to a garbage value

Iwona Winiarska (1):
      hwmon: (peci/cputemp) Fix miscalculated DTS for SKX

Jan Beulich (1):
      x86/PVH: avoid 32-bit build warning when obtaining VGA console info

Jane Jian (1):
      drm/amdgpu/gfx: set cg flags to enter/exit safe mode

Jeff Layton (2):
      lockd: set file_lock start and end when decoding nlm4 testargs
      nfsd: don't replace page in rq_pages if it's a continuation of last page

Jens Axboe (2):
      block/io_uring: pass in issue_flags for uring_cmd task_work handling
      io_uring/net: avoid sending -ECONNABORTED on repeated connection requests

Jesper Dangaard Brouer (1):
      xdp: bpf_xdp_metadata use EOPNOTSUPP for no driver support

Jesus Sanchez-Palencia (1):
      libbpf: Revert poisoning of strlcpy

Jianhua Lu (1):
      arm64: dts: qcom: sm8250-xiaomi-elish: Correct venus firmware path

Jiapeng Chong (1):
      power: supply: rk817: Fix unsigned comparison with less than zero

Jiasheng Jiang (2):
      dm stats: check for and propagate alloc_percpu failure
      octeontx2-vf: Add missing free for alloc_percpu

Jochen Henneberg (1):
      net: stmmac: Fix for mismatched host/device DMA address width

Joel Selvaraj (1):
      scsi: core: Add BLIST_SKIP_VPD_PAGES for SKhynix H28U74301AMR

Joey Gouly (2):
      mm: deduplicate error handling for map_deny_write_exec
      mm: fix error handling for map_deny_write_exec

Johan Hovold (6):
      firmware: qcom: scm: fix bogus irq error at probe
      arm64: dts: qcom: sc8280xp-x13s: mark s11b regulator as always-on
      arm64: dts: qcom: sc8280xp-x13s: mark s10b regulator as always-on
      arm64: dts: qcom: sc8280xp-x13s: mark s12b regulator as always-on
      arm64: dts: qcom: sc8280xp-x13s: mark bob regulator as always-on
      drm/meson: fix missing component unbind on bind errors

Johannes Berg (2):
      wifi: iwlwifi: mvm: fix mvmtxq->stopped handling
      wifi: iwlwifi: mvm: protect TXQ list manipulation

John Harrison (1):
      drm/i915/guc: Fix missing ecodes

Josef Bacik (2):
      btrfs: rename BTRFS_FS_NO_OVERCOMMIT to BTRFS_FS_ACTIVE_ZONE_TRACKING
      btrfs: use temporary variable for space_info in btrfs_update_block_group

Josh Poimboeuf (1):
      entry: Fix noinstr warning in __enter_from_user_mode()

Joshua Washington (1):
      gve: Cache link_speed value from device

Kai-Heng Feng (1):
      drm/amdgpu/nv: Apply ASPM quirk on Intel ADL + AMD Navi

Kal Conley (1):
      xsk: Add missing overflow check in xdp_umem_reg

Kiran K (2):
      Bluetooth: btintel: Iterate only bluetooth device ACPI entries
      Bluetooth: btinel: Check ACPI handle for NULL before accessing

Konrad Dybcio (5):
      arm64: dts: qcom: sm6115: Un-enable SPI5 by default
      arm64: dts: qcom: sm6375: Add missing power-domain-named to CDSP
      arm64: dts: qcom: sm8550: Use correct CPU compatibles
      mailmap: map Rajendra Nayak's old address to his current one
      mailmap: map Sai Prakash Ranjan's old address to his current one

Krishna chaitanya chundru (1):
      arm64: dts: qcom: sc7280: Mark PCIe controller as cache coherent

Krzysztof Kozlowski (4):
      arm64: dts: qcom: sm8450: correct WSA2 assigned clocks
      arm64: dts: qcom: sm8550: fix LPASS pinctrl slew base address
      arm64: dts: imx8mm-nitrogen-r2: fix WM8960 clock name
      wifi: mwifiex: mark OF related data as maybe unused

Lama Kayal (1):
      net/mlx5: Fix steering rules cleanup

Li Zetao (1):
      atm: idt77252: fix kmemleak when rmmod idt77252

Liam R. Howlett (3):
      maple_tree: fix mas_skip_node() end slot detection
      test_maple_tree: add more testing for mas_empty_area()
      mm/ksm: fix race with VMA iteration and mm_struct teardown

Liang He (1):
      net: mdio: thunder: Add missing fwnode_handle_put()

Lin Ma (1):
      igb: revert rtnl_lock() that causes deadlock

Linus Torvalds (1):
      Linux 6.3-rc4

Lorenzo Bianconi (2):
      wifi: mt76: do not run mt76_unregister_device() on unregistered hw
      wifi: mt76: connac: do not check WED status for non-mmio devices

Luca Weiss (3):
      soc: qcom: rmtfs: fix error handling reading qcom,vmid
      soc: qcom: rmtfs: handle optional qcom,vmid correctly
      ARM: dts: qcom: apq8026-lg-lenok: add missing reserved memory

Luiz Augusto von Dentz (3):
      Bluetooth: hci_core: Detect if an ACL packet is in fact an ISO packet
      Bluetooth: btusb: Remove detection of ISO packets over bulk
      Bluetooth: L2CAP: Fix responding with wrong PDU type

Maher Sanalla (1):
      net/mlx5: Read the TC mapping of all priorities on ETS query

Manivannan Sadhasivam (5):
      arm64: dts: qcom: sm8150: Fix the iommu mask used for PCIe controllers
      arm64: dts: qcom: sc8280xp: Add label property to vadc channel nodes
      arm64: dts: qcom: sm8350: Mark UFS controller as cache coherent
      arm64: dts: qcom: sm8450: Mark UFS controller as cache coherent
      arm64: dts: qcom: sm8550: Mark UFS controller as cache coherent

Marco Elver (3):
      kasan, powerpc: don't rename memintrinsics if compiler adds prefixes
      kfence: avoid passing -g for test
      kcsan: avoid passing -g for test

Marek Vasut (2):
      arm64: dts: imx8mp: Fix LCDIF2 node clock order
      arm64: dts: imx8mn: specify #sound-dai-cells for SAI nodes

Mario Limonciello (2):
      thunderbolt: Use const qualifier for `ring_interrupt_index`
      thunderbolt: Disable interrupt auto clear for rings

Martin George (1):
      nvme: send Identify with CNS 06h only to I/O controllers

Masami Hiramatsu (Google) (2):
      bootconfig: Fix testcase to increase max node
      bootconfig: Change message if no bootconfig with
CONFIG_BOOT_CONFIG_FORCE=y

Matheus Castello (1):
      drm/bridge: lt8912b: return EPROBE_DEFER if bridge is not found

Matthias Schiffer (1):
      i2c: mxs: ensure that DMA buffers are safe for DMA

Maxime Bizon (1):
      net: mdio: fix owner field for mdio buses registered using device-tree

Michael Walle (1):
      Revert "arm64: dts: ls1028a: sl28: get MAC addresses from VPD"

Michal Hocko (1):
      mm, vmalloc: fix high order __GFP_NOFAIL allocations

Michal Koutný (1):
      x86/mm: Do not shuffle CPU entry areas without KASLR

Michal Swiatkowski (2):
      ice: check if VF exists before mode check
      ice: remove filters only if VSI is deleted

Mika Westerberg (3):
      thunderbolt: Fix memory leak in margining
      thunderbolt: Call tb_check_quirks() after initializing adapters
      thunderbolt: Use scale field when allocating USB3 bandwidth

Mike Snitzer (1):
      dm crypt: avoid accessing uninitialized tasklet

Mikulas Patocka (1):
      dm crypt: add cond_resched() to dmcrypt_write()

Min Li (1):
      Bluetooth: Fix race condition in hci_cmd_sync_clear

Ming Lei (1):
      block: ublk_drv: mark device as LIVE before adding disk

Minwoo Im (1):
      mm: mmap: remove newline at the end of the trace

Muchun Song (1):
      mm: kfence: fix using kfence_metadata without initialization in
show_object()

Namjae Jeon (7):
      ksmbd: fix wrong signingkey creation when encryption is AES256
      ksmbd: set FILE_NAMED_STREAMS attribute in FS_ATTRIBUTE_INFORMATION
      ksmbd: add low bound validation to FSCTL_SET_ZERO_DATA
      ksmbd: add low bound validation to FSCTL_QUERY_ALLOCATED_RANGES
      ksmbd: don't terminate inactive sessions after a few seconds
      ksmbd: return STATUS_NOT_SUPPORTED on unsupported smb2.0 dialect
      ksmbd: return unsupported error on smb1 mount

Naohiro Aota (3):
      btrfs: zoned: fix btrfs_can_activate_zone() to support DUP profile
      btrfs: zoned: count fresh BG region as zone unusable
      btrfs: zoned: drop space_info->active_total_bytes

Nathan Chancellor (1):
      riscv: Handle zicsr/zifencei issues between clang and binutils

Nathan Huckleberry (1):
      fsverity: Remove WQ_UNBOUND from fsverity read workqueue

Nilesh Javali (1):
      scsi: qla2xxx: Perform lockless command completion in abort path

Nirmoy Das (1):
      drm/i915/active: Fix missing debug object activation

Pauli Virtanen (1):
      Bluetooth: ISO: fix timestamped HCI ISO data packet parsing

Paulo Alcantara (2):
      cifs: fix missing unload_nls() in smb2_reconnect()
      cifs: fix dentry lookups in directory handle cache

Pawel Laszczak (3):
      usb: cdnsp: Fixes issue with redundant Status Stage
      usb: cdns3: Fix issue with using incorrect PCI device function
      usb: cdnsp: changes PCI Device ID to fix conflict with CNDS3 driver

Peng Fan (3):
      ARM: dts: imx6sll: e70k02: fix usbotg1 pinctrl
      ARM: dts: imx6sll: e60k02: fix usbotg1 pinctrl
      ARM: dts: imx6sl: tolino-shine2hd: fix usbotg1 pinctrl

Peter Collingbourne (1):
      Revert "kasan: drop skip_kasan_poison variable in free_pages_prepare"

Peter Xu (1):
      kselftest: vm: fix unused variable warning

Phinex Hung (1):
      hwmon: fix potential sensor registration fail if of_node is missing

Piotr Raczynski (1):
      ice: fix rx buffers handling for flow director packets

Qu Wenruo (1):
      btrfs: handle missing chunk mapping more gracefully

Quinn Tran (1):
      scsi: qla2xxx: Synchronize the IOCB count to be in order

Radhakrishna Sripada (1):
      drm/i915/mtl: Fix Wa_16015201720 implementation

Radoslaw Tyl (1):
      i40e: fix flow director packet filter programming

Rafael J. Wysocki (4):
      ACPI: processor: Reorder acpi_processor_driver_init()
      thermal: core: Introduce thermal_cooling_device_present()
      thermal: core: Introduce thermal_cooling_device_update()
      ACPI: processor: thermal: Update CPU cooling devices on cpufreq
policy changes

Richard Leitner (1):
      mailmap: add entries for Richard Leitner

Rijo Thomas (1):
      tee: amdtee: fix race condition in amdtee_open_session

Robbie Harwood (2):
      verify_pefile: relax wrapper length check
      asymmetric_keys: log on fatal failures in PE/pkcs7

Roger Pau Monne (1):
      hvc/xen: prevent concurrent accesses to the shared ring

Roy Novich (1):
      net/mlx5e: Initialize link speed to zero

Russell King (Oracle) (1):
      net: sfp: fix state loss when updating state_hw_mask

Ryusuke Konishi (1):
      nilfs2: fix kernel-infoleak in nilfs_ioctl_wrap_copy()

Sanjay R Mehta (1):
      thunderbolt: Add quirk to disable CLx

Savino Dicanosa (1):
      io_uring/rsrc: fix null-ptr-deref in io_file_bitmap_get()

Shyam Prasad N (8):
      cifs: check only tcon status on tcon related functions
      cifs: lock chan_lock outside match_session
      cifs: do not poll server interfaces too regularly
      cifs: empty interface list when server doesn't support query interfaces
      cifs: dump pending mids for all channels in DebugData
      cifs: print session id while listing open files
      cifs: append path to open_enter trace event
      cifs: avoid race conditions with parallel reconnects

Srinivas Kandagatla (4):
      arm64: dts: qcom: sc8280xp: fix rx frame shapping info
      arm64: dts: qcom: sc8280xp: fix lpass tx macro clocks
      arm64: dts: qcom: sc8280xp-x13s: fix dmic sample rate
      arm64: dts: qcom: sc8280xp-x13s: fix va dmic dai links and routing

Stefan Assmann (1):
      iavf: fix hang on reboot with ice

Stephan Gerhold (1):
      Bluetooth: btqcomsmd: Fix command timeout after setting BD address

Steve French (2):
      smb3: lower default deferred close timeout to address perf regression
      smb3: fix unusable share after force unmount failure

Sungwoo Kim (1):
      Bluetooth: HCI: Fix global-out-of-bounds

Sweet Tea Dorminy (1):
      btrfs: fix compiler warning on SPARC/PA-RISC handling
fscrypt_setup_filename

Szymon Heidrich (2):
      net: usb: smsc95xx: Limit packet length to skb->len
      net: usb: lan78xx: Limit packet length to skb->len

Tejas Upadhyay (1):
      drm/i915/fbdev: lock the fbdev obj before vma pin

Thierry Reding (1):
      arm64: tegra: Bump CBB ranges property on Tegra194 and Tegra234

Tianyi Jing (1):
      hwmon: (xgene) Fix ioremap and memremap leak

Tiezhu Yang (1):
      checksyscalls: ignore fstat to silence build warning on LoongArch

Tim Huang (2):
      drm/amdgpu: reposition the gpu reset checking for reuse
      drm/amdgpu: skip ASIC reset for APUs when go to S4

Tobias Klauser (1):
      mailmap: add entry for Tobias Klauser

Tom Rix (2):
      usb: plusb: remove unused pl_clear_QuickLink_features function
      thunderbolt: Rename shadowed variables bit to interrupt_bit and
auto_clear_bit

Tong Liu01 (1):
      drm/amdgpu: add mes resume when do gfx post soft reset

Tzung-Bi Shih (1):
      platform/chrome: cros_ec_chardev: fix kernel data leak from ioctl

Ville Syrjälä (2):
      drm/i915: Preserve crtc_state->inherited during state clearing
      drm/i915: Update vblank timestamping stuff on seamless M/N change

Vinay Belgaumkar (1):
      drm/i915: Fix format for perf_limit_reasons

Vincent Guittot (1):
      sched/fair: Sanitize vruntime of entity being migrated

Vincenzo Palazzo (1):
      usb: dwc3: Fix a typo in field name

Vladimir Oltean (5):
      net: dsa: report rx_bytes unadjusted for ETH_HLEN
      net: mscc: ocelot: fix stats region batching
      net: mscc: ocelot: fix transfer from region->buf to ocelot->stats
      net: mscc: ocelot: add TX_MM_HOLD to ocelot_mm_stats_layout
      net: enetc: fix aggregate RMON counters not showing the ranges

Wei Chen (1):
      i2c: xgene-slimpro: Fix out-of-bounds bug in xgene_slimpro_i2c_xfer()

Wesley Cheng (1):
      usb: dwc3: gadget: Add 1ms delay after end transfer command without IOC

Xu Yang (4):
      usb: typec: tcpm: fix create duplicate source-capabilities file
      usb: typec: tcpm: fix warning when handle discover_identity message
      usb: chipdea: core: fix return -EINVAL if request role is the
same with current role
      usb: chipidea: core: fix possible concurrent when switch role

Yang Xiwen (1):
      arm64: dts: qcom: msm8916-ufi: Fix sim card selection pinctrl

Yaroslav Furman (1):
      uas: Add US_FL_NO_REPORT_OPCODES for JMicron JMS583Gen 2

Ye Xingchen (1):
      firmware: arm_scmi: Remove duplicate include header inclusion

Yicong Yang (2):
      i2c: hisi: Avoid redundant interrupts
      i2c: hisi: Only use the completion interrupt to finish the transfer

Yishai Hadas (1):
      vfio/mlx5: Fix the report of dirty_bytes upon pre-copy

Yu Kuai (1):
      scsi: scsi_dh_alua: Fix memleak for 'qdata' in alua_activate()

YuBiao Wang (1):
      drm/amdgpu: Force signal hw_fences that are embedded in non-sched jobs

Zhang Changzhong (1):
      net/sonic: use dma_mapping_error() for error check

Zheng Wang (5):
      power: supply: bq24190: Fix use after free bug in bq24190_remove
due to race condition
      power: supply: da9150: Fix use after free bug in
da9150_charger_remove due to race condition
      xirc2ps_cs: Fix use after free bug in xirc2ps_detach
      net: qcom/emac: Fix use after free bug in emac_remove due to
race condition
      Bluetooth: btsdio: fix use after free bug in btsdio_remove due
to unfinished work

Zhengping Jiang (1):
      Bluetooth: hci_sync: Resume adv with no RPA when active scan

Ziyang Huang (1):
      usb: dwc2: drd: fix inconsistent mode if role-switch-default-mode="host"

Álvaro Fernández Rojas (2):
      net: dsa: b53: mmap: fix device tree support
      net: dsa: tag_brcm: legacy: fix daisy-chained switches

```

---

```
[next](../20230327072641.3591802-1-geert%40linux-m68k.org/)             [reply](#R)other threads:[[~2023-03-26 22:04 UTC](../?t=20230326220403)|[newest](../)]

Thread overview: 7+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2023-03-26 22:03 [Linus Torvalds [this message]](#t)
2023-03-27  7:26 ` [Build regressions/improvements in v6.3-rc4](../20230327072641.3591802-1-geert%40linux-m68k.org/) Geert Uytterhoeven
2023-03-27  7:29   ` [Geert Uytterhoeven](../eb55ca34-ca71-ed19-dae2-6e5e87c170%40linux-m68k.org/)
2023-04-04 21:16     ` [Sudip Mukherjee](../CADVatmNHYar6tR3r9q42vZR5fsqZeeDb8LEmmBcrrOwhA7HpmQ%40mail.gmail.com/)
2023-04-04 22:40       ` [Randy Dunlap](../c3718ac3-3dd1-2273-68ef-3d2923778ab7%40infradead.org/)
2023-04-05  0:01         ` [Build regressions/improvements in v6.3-rc4 (parport_pc)](../d7c250e0-a3a8-51d0-a761-7a81305b39b2%40infradead.org/) Randy Dunlap
2023-03-27 21:52 ` [Linux 6.3-rc4](../607887b2-2ec2-4bf9-b35a-d3cc285bad1e%40roeck-us.net/) Guenter Roeck

```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to='CAHk-=whcaHLNpb7Mu_QX7ABwPgyRyfW-V8=v4Mv0S22fpjY4JQ@mail.gmail.com' \
    --to=torvalds@linux-foundation.org \
    --cc=linux-kernel@vger.kernel.org \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is an external index of several public inboxes,
see [mirroring instructions](../_/text/mirror/) on how to clone and mirror
all data and code used by this external index.
```


=== Content from lore.kernel.org_f18fea88_20250115_134736.html ===

```
[All of lore.kernel.org](../?t=20230326220403)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: Linus Torvalds <torvalds@linux-foundation.org>
To: Linux Kernel Mailing List <[linux-kernel@vger.kernel.org](../../lkml/?t=20230326220403)>
Subject: [Linux 6.3-rc4](#r)
Date: Sun, 26 Mar 2023 15:03:35 -0700	[[thread overview]](#r)
Message-ID: <CAHk-=whcaHLNpb7Mu_QX7ABwPgyRyfW-V8=v4Mv0S22fpjY4JQ@mail.gmail.com> (<raw>)

Things are looking pretty normal for this time of the release process.
All the stats look very regular, and the diffstat mostly does too.

I say "mostly", just because we had a bunch of xfs fixes last week,
which makes the diffstat skew that way more than usual. But even that
is mainly for a self-test addition. The actual code changes are much
smaller.

So instead of the usual 50+% drivers, the rc4 diffstat is about "one
third drivers, one third filesystems, one third rest". Not all of the
filesystem stuff is xfs, of course - we have cifs, btrfs and ksmbd
fixes too.

On the driver side, it's a mix, but networking and gpu shows up as
usual. With USB and thunderbolt fixes showing up, and the rest being
fairly random.

And "the rest" is all the normal stuff. Self-tests, core networking,
architecture updates, nothing odd there.

Let's hope things stay normal. And, as normal, testing and reporting
issues is appreciated,

       Linus

---

AKASHI Takahiro (1):
      igc: fix the validation logic for taprio's gate list

Abel Vesa (2):
      arm64: dts: qcom: sm8550: Add bias pull up value to tlmm i2c
data clk states
      soc: qcom: llcc: Fix slice configuration values for SC8280XP

Ahmed Zaki (1):
      iavf: do not track VLAN 0 filters

Akihiko Odaki (2):
      igb: Enable SR-IOV after reinit
      igbvf: Regard vf reset nack as success

Alex Hung (1):
      drm/amd/display: remove outdated 8bpc comments

Alexander Lobakin (2):
      iavf: fix inverted Rx hash condition leading to disabled hash
      iavf: fix non-tunneled IPv6 UDP packet type and hashing

Alexander Stein (6):
      arm64: dts: freescale: imx8-ss-lsio: Fix flexspi clock order
      usb: misc: onboard-hub: add support for Microchip USB2517 USB 2.0 hub
      arm64: dts: imx93: Fix eqos properties
      arm64: dts: imx93: add missing #address-cells and #size-cells to i2c nodes
      i2c: imx-lpi2c: clean rx/tx buffers upon new message
      i2c: imx-lpi2c: check only for enabled interrupt flags

Alexander Wetzel (1):
      wifi: mac80211: Serialize ieee80211_handle_wake_tx_queue()

Alexei Starovoitov (2):
      selftests/bpf: Fix progs/find_vma_fail1.c build error.
      selftests/bpf: Fix progs/test_deny_namespace.c issues.

Alvin Šipraga (1):
      usb: gadget: u_audio: don't let userspace block driver unbind

Andrew Halaney (1):
      arm64: dts: imx8dxl-evk: Fix eqos phy reset gpio

Andrew Jeffery (1):
      ARM: 9290/1: uaccess: Fix KASAN false-positives

Andrzej Hajda (1):
      drm/i915/gt: perform uc late init after probe error injection

Andy Shevchenko (1):
      usb: gadget: Use correct endianness of the wLength field for WebUSB

Ard Biesheuvel (10):
      efi/libstub: zboot: Mark zboot EFI application as NX compatible
      efi/libstub: arm64: Remap relocated image with strict permissions
      arm64: efi: Set NX compat flag in PE/COFF header
      efi: earlycon: Reprobe after parsing config tables
      efi/libstub: smbios: Use length member instead of record struct size
      arm64: efi: Use SMBIOS processor version to key off Ampere quirk
      efi/libstub: smbios: Drop unused 'recsize' parameter
      efi/libstub: zboot: Add compressed image to make targets
      efi/libstub: Use relocated version of kernel's struct screen_info
      efi/libstub: randomalloc: Return EFI_OUT_OF_RESOURCES on failure

Arnd Bergmann (2):
      gpu: host1x: fix uninitialized variable use
      gpu: host1x: fix uninitialized variable use

Arınç ÜNAL (3):
      net: dsa: mt7530: move enabling disabling core clock to mt7530_pll_setup()
      net: dsa: mt7530: move lowering TRGMII driving to mt7530_setup()
      net: dsa: mt7530: move setting ssc_delta to PHY_INTERFACE_MODE_TRGMII case

Ashutosh Dixit (1):
      Revert "drm/i915/hwmon: Enable PL1 power limit"

Aymeric Wibo (1):
      ACPI: resource: Add Medion S17413 to IRQ override quirk

Badal Nilawar (1):
      drm/i915/mtl: Disable MC6 for MTL A step

Bob Peterson (1):
      Reinstate "GFS2: free disk inode which is deleted by remote node -V2"

Breno Leitao (1):
      perf/x86/amd/core: Always clear status for idx

Brian Gix (1):
      Bluetooth: Remove "Power-on" check from Mesh feature

Brian Masney (1):
      arm64: dts: qcom: sa8540p-ride: correct name of remoteproc_nsp0 firmware

Caleb Sander (1):
      nvme-tcp: fix nvme_tcp_term_pdu to match spec

Chang S. Bae (2):
      x86/fpu/xstate: Prevent false-positive warning in __copy_xstate_uabi_buf()
      selftests/x86/amx: Add a ptrace test

ChenXiaoSong (1):
      ksmbd: fix possible refcount leak in smb2_open()

Chengen Du (1):
      NFS: Correct timing for assigning access cache timestamp

Christophe JAILLET (1):
      firmware: arm_scmi: Use the bitmap API to allocate bitmaps

Chuck Lever (2):
      NFS & NFSD: Update GSS dependencies
      SUNRPC: Fix a crash in gss_krb5_checksum()

Coly Li (1):
      dm thin: fix deadlock when swapping to thin device

Cristian Marussi (2):
      firmware: arm_scmi: Fix raw coexistence mode behaviour on failure path
      firmware: arm_scmi: Fix device node validation for mailbox transport

Damien Le Moal (2):
      zonefs: Prevent uninitialized symbol 'size' warning
      zonefs: Fix error message in zonefs_file_dio_append()

Dan Carpenter (3):
      firmware: arm_scmi: Clean up a return statement in scmi_probe
      firmware: arm_scmi: Return a literal instead of a variable
      net/mlx5: E-Switch, Fix an Oops in error handling code

Daniel Borkmann (1):
      bpf: Adjust insufficient default bpf_jit_limit

Daniel Scally (1):
      docs: usb: Add documentation for the UVC Gadget

Daniil Tatianin (1):
      qed/qed_sriov: guard against NULL derefs from qed_iov_get_vf_info

Darrick J. Wong (7):
      xfs: try to idiot-proof the allocators
      xfs: walk all AGs if TRYLOCK passed to xfs_alloc_vextent_iterate_ags
      xfs: add tracepoints for each of the externally visible allocators
      xfs: test dir/attr hash when loading module
      xfs: pass the correct cursor to xfs_iomap_prealloc_size
      xfs: clear incore AGFL_RESET state if it's not needed
      xfs: fix mismerged tracepoints

Dave Chinner (4):
      cpumask: introduce for_each_cpu_or
      pcpcntrs: fix dying cpu summation race
      fork: remove use of percpu_counter_sum_all
      pcpcntr: remove percpu_counter_sum_all()

Dave Wysochanski (1):
      NFS: Fix /proc/PID/io read_bytes for buffered reads

David Howells (1):
      keys: Do not cache key in task struct if key is requested from
kernel thread

Denis Arefev (1):
      power: supply: axp288_fuel_gauge: Added check for negative values

Donald Hunter (1):
      tools: ynl: Fix genlmsg header encoding formats

Dylan Jhong (1):
      riscv: mm: Fix incorrect ASID argument when flushing TLB

Eduard Zingerman (2):
      bpf: Allow reads from uninit stack
      selftests/bpf: Tests for uninitialized stack reads

Emeel Hakim (1):
      net/mlx5e: Overcome slow response for first macsec ASO WQE

Enric Balletbo i Serra (1):
      mailmap: add entry for Enric Balletbo i Serra

Eric Biggers (4):
      fscrypt: destroy keyring after security_sb_delete()
      fsverity: don't drop pagecache at end of FS_IOC_ENABLE_VERITY
      fscrypt: improve fscrypt_destroy_keyring() documentation
      fscrypt: check for NULL keyring in fscrypt_put_master_key_activeref()

Eric Dumazet (1):
      erspan: do not use skb_mac_header() in ndo_start_xmit()

Fabrice Gasnier (2):
      usb: dwc2: fix a devres leak in hw_enable upon suspend resume
      usb: dwc2: fix a race, don't power off/on phy for dual-role mode

Felix Fietkau (3):
      wifi: mt76: mt7915: add back 160MHz channel width support for MT7915
      wifi: mac80211: fix qos on mesh interfaces
      wifi: mac80211: fix mesh path discovery based on unicast packets

Florian Fainelli (2):
      net: phy: Ensure state transitions are processed from phy_stop()
      net: mdio: fix owner field for mdio buses registered using ACPI

Frank Crawford (1):
      hwmon (it87): Fix voltage scaling for chips with 10.9mV  ADCs

Frederic Weisbecker (1):
      entry/rcu: Check TIF_RESCHED _after_ delayed RCU wake-up

Gaosheng Cui (1):
      intel/igbvf: free irq on the error path in igbvf_request_msix()

Gavin Li (2):
      net/mlx5e: Set uplink rep as NETNS_LOCAL
      net/mlx5e: Block entering switchdev mode with ns inconsistency

Geert Uytterhoeven (2):
      mm/slab: Fix undefined init_cache_node_node() for NUMA and !SMP
      lib: dhry: fix unstable smp_processor_id(_) usage

Geoff Levand (2):
      net/ps3_gelic_net: Fix RX sk_buff length
      net/ps3_gelic_net: Use dma_mapping_error

Gil Fine (2):
      thunderbolt: Add missing UNSET_INBOUND_SBTX for retimer access
      thunderbolt: Limit USB3 bandwidth of certain Intel USB4 host routers

Grant Grundler (2):
      power: supply: cros_usbpd: reclassify "default case!" as debug
      net: asix: fix modprobe "sysfs: cannot create duplicate filename"

Grygorii Strashko (1):
      net: ethernet: ti: am65-cpts: reset pps genf adj settings on enable

Hans de Goede (7):
      usb: ucsi: Fix NULL pointer deref in ucsi_connector_change()
      usb: ucsi: Fix ucsi->connector race
      usb: ucsi_acpi: Increase the command completion timeout
      efi: sysfb_efi: Fix DMI quirks not working for simpledrm
      efi: sysfb_efi: Add quirk for Lenovo Yoga Book X91F/L
      ACPI: video: Add backlight=native DMI quirk for Acer Aspire 3830TG
      drm: panel-orientation-quirks: Add quirk for Lenovo Yoga Book X90F

Hersen Wu (2):
      drm/amd/display: fix wrong index used in dccg32_set_dpstreamclk
      drm/amd/display: Set dcn32 caps.seamless_odm

Hongren Zheng (1):
      MAINTAINERS: make me a reviewer of USB/IP

Howard Chung (1):
      Bluetooth: mgmt: Fix MGMT add advmon with RSSI command

Ido Schimmel (3):
      mlxsw: core_thermal: Fix fan speed in maximum cooling state
      mlxsw: spectrum_fid: Fix incorrect local port type
      thermal: core: Restore behavior regarding invalid trip points

Ivan Bornyakov (1):
      bus: imx-weim: fix branch condition evaluates to a garbage value

Iwona Winiarska (1):
      hwmon: (peci/cputemp) Fix miscalculated DTS for SKX

Jan Beulich (1):
      x86/PVH: avoid 32-bit build warning when obtaining VGA console info

Jane Jian (1):
      drm/amdgpu/gfx: set cg flags to enter/exit safe mode

Jeff Layton (2):
      lockd: set file_lock start and end when decoding nlm4 testargs
      nfsd: don't replace page in rq_pages if it's a continuation of last page

Jens Axboe (2):
      block/io_uring: pass in issue_flags for uring_cmd task_work handling
      io_uring/net: avoid sending -ECONNABORTED on repeated connection requests

Jesper Dangaard Brouer (1):
      xdp: bpf_xdp_metadata use EOPNOTSUPP for no driver support

Jesus Sanchez-Palencia (1):
      libbpf: Revert poisoning of strlcpy

Jianhua Lu (1):
      arm64: dts: qcom: sm8250-xiaomi-elish: Correct venus firmware path

Jiapeng Chong (1):
      power: supply: rk817: Fix unsigned comparison with less than zero

Jiasheng Jiang (2):
      dm stats: check for and propagate alloc_percpu failure
      octeontx2-vf: Add missing free for alloc_percpu

Jochen Henneberg (1):
      net: stmmac: Fix for mismatched host/device DMA address width

Joel Selvaraj (1):
      scsi: core: Add BLIST_SKIP_VPD_PAGES for SKhynix H28U74301AMR

Joey Gouly (2):
      mm: deduplicate error handling for map_deny_write_exec
      mm: fix error handling for map_deny_write_exec

Johan Hovold (6):
      firmware: qcom: scm: fix bogus irq error at probe
      arm64: dts: qcom: sc8280xp-x13s: mark s11b regulator as always-on
      arm64: dts: qcom: sc8280xp-x13s: mark s10b regulator as always-on
      arm64: dts: qcom: sc8280xp-x13s: mark s12b regulator as always-on
      arm64: dts: qcom: sc8280xp-x13s: mark bob regulator as always-on
      drm/meson: fix missing component unbind on bind errors

Johannes Berg (2):
      wifi: iwlwifi: mvm: fix mvmtxq->stopped handling
      wifi: iwlwifi: mvm: protect TXQ list manipulation

John Harrison (1):
      drm/i915/guc: Fix missing ecodes

Josef Bacik (2):
      btrfs: rename BTRFS_FS_NO_OVERCOMMIT to BTRFS_FS_ACTIVE_ZONE_TRACKING
      btrfs: use temporary variable for space_info in btrfs_update_block_group

Josh Poimboeuf (1):
      entry: Fix noinstr warning in __enter_from_user_mode()

Joshua Washington (1):
      gve: Cache link_speed value from device

Kai-Heng Feng (1):
      drm/amdgpu/nv: Apply ASPM quirk on Intel ADL + AMD Navi

Kal Conley (1):
      xsk: Add missing overflow check in xdp_umem_reg

Kiran K (2):
      Bluetooth: btintel: Iterate only bluetooth device ACPI entries
      Bluetooth: btinel: Check ACPI handle for NULL before accessing

Konrad Dybcio (5):
      arm64: dts: qcom: sm6115: Un-enable SPI5 by default
      arm64: dts: qcom: sm6375: Add missing power-domain-named to CDSP
      arm64: dts: qcom: sm8550: Use correct CPU compatibles
      mailmap: map Rajendra Nayak's old address to his current one
      mailmap: map Sai Prakash Ranjan's old address to his current one

Krishna chaitanya chundru (1):
      arm64: dts: qcom: sc7280: Mark PCIe controller as cache coherent

Krzysztof Kozlowski (4):
      arm64: dts: qcom: sm8450: correct WSA2 assigned clocks
      arm64: dts: qcom: sm8550: fix LPASS pinctrl slew base address
      arm64: dts: imx8mm-nitrogen-r2: fix WM8960 clock name
      wifi: mwifiex: mark OF related data as maybe unused

Lama Kayal (1):
      net/mlx5: Fix steering rules cleanup

Li Zetao (1):
      atm: idt77252: fix kmemleak when rmmod idt77252

Liam R. Howlett (3):
      maple_tree: fix mas_skip_node() end slot detection
      test_maple_tree: add more testing for mas_empty_area()
      mm/ksm: fix race with VMA iteration and mm_struct teardown

Liang He (1):
      net: mdio: thunder: Add missing fwnode_handle_put()

Lin Ma (1):
      igb: revert rtnl_lock() that causes deadlock

Linus Torvalds (1):
      Linux 6.3-rc4

Lorenzo Bianconi (2):
      wifi: mt76: do not run mt76_unregister_device() on unregistered hw
      wifi: mt76: connac: do not check WED status for non-mmio devices

Luca Weiss (3):
      soc: qcom: rmtfs: fix error handling reading qcom,vmid
      soc: qcom: rmtfs: handle optional qcom,vmid correctly
      ARM: dts: qcom: apq8026-lg-lenok: add missing reserved memory

Luiz Augusto von Dentz (3):
      Bluetooth: hci_core: Detect if an ACL packet is in fact an ISO packet
      Bluetooth: btusb: Remove detection of ISO packets over bulk
      Bluetooth: L2CAP: Fix responding with wrong PDU type

Maher Sanalla (1):
      net/mlx5: Read the TC mapping of all priorities on ETS query

Manivannan Sadhasivam (5):
      arm64: dts: qcom: sm8150: Fix the iommu mask used for PCIe controllers
      arm64: dts: qcom: sc8280xp: Add label property to vadc channel nodes
      arm64: dts: qcom: sm8350: Mark UFS controller as cache coherent
      arm64: dts: qcom: sm8450: Mark UFS controller as cache coherent
      arm64: dts: qcom: sm8550: Mark UFS controller as cache coherent

Marco Elver (3):
      kasan, powerpc: don't rename memintrinsics if compiler adds prefixes
      kfence: avoid passing -g for test
      kcsan: avoid passing -g for test

Marek Vasut (2):
      arm64: dts: imx8mp: Fix LCDIF2 node clock order
      arm64: dts: imx8mn: specify #sound-dai-cells for SAI nodes

Mario Limonciello (2):
      thunderbolt: Use const qualifier for `ring_interrupt_index`
      thunderbolt: Disable interrupt auto clear for rings

Martin George (1):
      nvme: send Identify with CNS 06h only to I/O controllers

Masami Hiramatsu (Google) (2):
      bootconfig: Fix testcase to increase max node
      bootconfig: Change message if no bootconfig with
CONFIG_BOOT_CONFIG_FORCE=y

Matheus Castello (1):
      drm/bridge: lt8912b: return EPROBE_DEFER if bridge is not found

Matthias Schiffer (1):
      i2c: mxs: ensure that DMA buffers are safe for DMA

Maxime Bizon (1):
      net: mdio: fix owner field for mdio buses registered using device-tree

Michael Walle (1):
      Revert "arm64: dts: ls1028a: sl28: get MAC addresses from VPD"

Michal Hocko (1):
      mm, vmalloc: fix high order __GFP_NOFAIL allocations

Michal Koutný (1):
      x86/mm: Do not shuffle CPU entry areas without KASLR

Michal Swiatkowski (2):
      ice: check if VF exists before mode check
      ice: remove filters only if VSI is deleted

Mika Westerberg (3):
      thunderbolt: Fix memory leak in margining
      thunderbolt: Call tb_check_quirks() after initializing adapters
      thunderbolt: Use scale field when allocating USB3 bandwidth

Mike Snitzer (1):
      dm crypt: avoid accessing uninitialized tasklet

Mikulas Patocka (1):
      dm crypt: add cond_resched() to dmcrypt_write()

Min Li (1):
      Bluetooth: Fix race condition in hci_cmd_sync_clear

Ming Lei (1):
      block: ublk_drv: mark device as LIVE before adding disk

Minwoo Im (1):
      mm: mmap: remove newline at the end of the trace

Muchun Song (1):
      mm: kfence: fix using kfence_metadata without initialization in
show_object()

Namjae Jeon (7):
      ksmbd: fix wrong signingkey creation when encryption is AES256
      ksmbd: set FILE_NAMED_STREAMS attribute in FS_ATTRIBUTE_INFORMATION
      ksmbd: add low bound validation to FSCTL_SET_ZERO_DATA
      ksmbd: add low bound validation to FSCTL_QUERY_ALLOCATED_RANGES
      ksmbd: don't terminate inactive sessions after a few seconds
      ksmbd: return STATUS_NOT_SUPPORTED on unsupported smb2.0 dialect
      ksmbd: return unsupported error on smb1 mount

Naohiro Aota (3):
      btrfs: zoned: fix btrfs_can_activate_zone() to support DUP profile
      btrfs: zoned: count fresh BG region as zone unusable
      btrfs: zoned: drop space_info->active_total_bytes

Nathan Chancellor (1):
      riscv: Handle zicsr/zifencei issues between clang and binutils

Nathan Huckleberry (1):
      fsverity: Remove WQ_UNBOUND from fsverity read workqueue

Nilesh Javali (1):
      scsi: qla2xxx: Perform lockless command completion in abort path

Nirmoy Das (1):
      drm/i915/active: Fix missing debug object activation

Pauli Virtanen (1):
      Bluetooth: ISO: fix timestamped HCI ISO data packet parsing

Paulo Alcantara (2):
      cifs: fix missing unload_nls() in smb2_reconnect()
      cifs: fix dentry lookups in directory handle cache

Pawel Laszczak (3):
      usb: cdnsp: Fixes issue with redundant Status Stage
      usb: cdns3: Fix issue with using incorrect PCI device function
      usb: cdnsp: changes PCI Device ID to fix conflict with CNDS3 driver

Peng Fan (3):
      ARM: dts: imx6sll: e70k02: fix usbotg1 pinctrl
      ARM: dts: imx6sll: e60k02: fix usbotg1 pinctrl
      ARM: dts: imx6sl: tolino-shine2hd: fix usbotg1 pinctrl

Peter Collingbourne (1):
      Revert "kasan: drop skip_kasan_poison variable in free_pages_prepare"

Peter Xu (1):
      kselftest: vm: fix unused variable warning

Phinex Hung (1):
      hwmon: fix potential sensor registration fail if of_node is missing

Piotr Raczynski (1):
      ice: fix rx buffers handling for flow director packets

Qu Wenruo (1):
      btrfs: handle missing chunk mapping more gracefully

Quinn Tran (1):
      scsi: qla2xxx: Synchronize the IOCB count to be in order

Radhakrishna Sripada (1):
      drm/i915/mtl: Fix Wa_16015201720 implementation

Radoslaw Tyl (1):
      i40e: fix flow director packet filter programming

Rafael J. Wysocki (4):
      ACPI: processor: Reorder acpi_processor_driver_init()
      thermal: core: Introduce thermal_cooling_device_present()
      thermal: core: Introduce thermal_cooling_device_update()
      ACPI: processor: thermal: Update CPU cooling devices on cpufreq
policy changes

Richard Leitner (1):
      mailmap: add entries for Richard Leitner

Rijo Thomas (1):
      tee: amdtee: fix race condition in amdtee_open_session

Robbie Harwood (2):
      verify_pefile: relax wrapper length check
      asymmetric_keys: log on fatal failures in PE/pkcs7

Roger Pau Monne (1):
      hvc/xen: prevent concurrent accesses to the shared ring

Roy Novich (1):
      net/mlx5e: Initialize link speed to zero

Russell King (Oracle) (1):
      net: sfp: fix state loss when updating state_hw_mask

Ryusuke Konishi (1):
      nilfs2: fix kernel-infoleak in nilfs_ioctl_wrap_copy()

Sanjay R Mehta (1):
      thunderbolt: Add quirk to disable CLx

Savino Dicanosa (1):
      io_uring/rsrc: fix null-ptr-deref in io_file_bitmap_get()

Shyam Prasad N (8):
      cifs: check only tcon status on tcon related functions
      cifs: lock chan_lock outside match_session
      cifs: do not poll server interfaces too regularly
      cifs: empty interface list when server doesn't support query interfaces
      cifs: dump pending mids for all channels in DebugData
      cifs: print session id while listing open files
      cifs: append path to open_enter trace event
      cifs: avoid race conditions with parallel reconnects

Srinivas Kandagatla (4):
      arm64: dts: qcom: sc8280xp: fix rx frame shapping info
      arm64: dts: qcom: sc8280xp: fix lpass tx macro clocks
      arm64: dts: qcom: sc8280xp-x13s: fix dmic sample rate
      arm64: dts: qcom: sc8280xp-x13s: fix va dmic dai links and routing

Stefan Assmann (1):
      iavf: fix hang on reboot with ice

Stephan Gerhold (1):
      Bluetooth: btqcomsmd: Fix command timeout after setting BD address

Steve French (2):
      smb3: lower default deferred close timeout to address perf regression
      smb3: fix unusable share after force unmount failure

Sungwoo Kim (1):
      Bluetooth: HCI: Fix global-out-of-bounds

Sweet Tea Dorminy (1):
      btrfs: fix compiler warning on SPARC/PA-RISC handling
fscrypt_setup_filename

Szymon Heidrich (2):
      net: usb: smsc95xx: Limit packet length to skb->len
      net: usb: lan78xx: Limit packet length to skb->len

Tejas Upadhyay (1):
      drm/i915/fbdev: lock the fbdev obj before vma pin

Thierry Reding (1):
      arm64: tegra: Bump CBB ranges property on Tegra194 and Tegra234

Tianyi Jing (1):
      hwmon: (xgene) Fix ioremap and memremap leak

Tiezhu Yang (1):
      checksyscalls: ignore fstat to silence build warning on LoongArch

Tim Huang (2):
      drm/amdgpu: reposition the gpu reset checking for reuse
      drm/amdgpu: skip ASIC reset for APUs when go to S4

Tobias Klauser (1):
      mailmap: add entry for Tobias Klauser

Tom Rix (2):
      usb: plusb: remove unused pl_clear_QuickLink_features function
      thunderbolt: Rename shadowed variables bit to interrupt_bit and
auto_clear_bit

Tong Liu01 (1):
      drm/amdgpu: add mes resume when do gfx post soft reset

Tzung-Bi Shih (1):
      platform/chrome: cros_ec_chardev: fix kernel data leak from ioctl

Ville Syrjälä (2):
      drm/i915: Preserve crtc_state->inherited during state clearing
      drm/i915: Update vblank timestamping stuff on seamless M/N change

Vinay Belgaumkar (1):
      drm/i915: Fix format for perf_limit_reasons

Vincent Guittot (1):
      sched/fair: Sanitize vruntime of entity being migrated

Vincenzo Palazzo (1):
      usb: dwc3: Fix a typo in field name

Vladimir Oltean (5):
      net: dsa: report rx_bytes unadjusted for ETH_HLEN
      net: mscc: ocelot: fix stats region batching
      net: mscc: ocelot: fix transfer from region->buf to ocelot->stats
      net: mscc: ocelot: add TX_MM_HOLD to ocelot_mm_stats_layout
      net: enetc: fix aggregate RMON counters not showing the ranges

Wei Chen (1):
      i2c: xgene-slimpro: Fix out-of-bounds bug in xgene_slimpro_i2c_xfer()

Wesley Cheng (1):
      usb: dwc3: gadget: Add 1ms delay after end transfer command without IOC

Xu Yang (4):
      usb: typec: tcpm: fix create duplicate source-capabilities file
      usb: typec: tcpm: fix warning when handle discover_identity message
      usb: chipdea: core: fix return -EINVAL if request role is the
same with current role
      usb: chipidea: core: fix possible concurrent when switch role

Yang Xiwen (1):
      arm64: dts: qcom: msm8916-ufi: Fix sim card selection pinctrl

Yaroslav Furman (1):
      uas: Add US_FL_NO_REPORT_OPCODES for JMicron JMS583Gen 2

Ye Xingchen (1):
      firmware: arm_scmi: Remove duplicate include header inclusion

Yicong Yang (2):
      i2c: hisi: Avoid redundant interrupts
      i2c: hisi: Only use the completion interrupt to finish the transfer

Yishai Hadas (1):
      vfio/mlx5: Fix the report of dirty_bytes upon pre-copy

Yu Kuai (1):
      scsi: scsi_dh_alua: Fix memleak for 'qdata' in alua_activate()

YuBiao Wang (1):
      drm/amdgpu: Force signal hw_fences that are embedded in non-sched jobs

Zhang Changzhong (1):
      net/sonic: use dma_mapping_error() for error check

Zheng Wang (5):
      power: supply: bq24190: Fix use after free bug in bq24190_remove
due to race condition
      power: supply: da9150: Fix use after free bug in
da9150_charger_remove due to race condition
      xirc2ps_cs: Fix use after free bug in xirc2ps_detach
      net: qcom/emac: Fix use after free bug in emac_remove due to
race condition
      Bluetooth: btsdio: fix use after free bug in btsdio_remove due
to unfinished work

Zhengping Jiang (1):
      Bluetooth: hci_sync: Resume adv with no RPA when active scan

Ziyang Huang (1):
      usb: dwc2: drd: fix inconsistent mode if role-switch-default-mode="host"

Álvaro Fernández Rojas (2):
      net: dsa: b53: mmap: fix device tree support
      net: dsa: tag_brcm: legacy: fix daisy-chained switches

```

---

```
[next](../20230327072641.3591802-1-geert%40linux-m68k.org/)             [reply](#R)other threads:[[~2023-03-26 22:04 UTC](../?t=20230326220403)|[newest](../)]

Thread overview: 7+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2023-03-26 22:03 [Linus Torvalds [this message]](#t)
2023-03-27  7:26 ` [Build regressions/improvements in v6.3-rc4](../20230327072641.3591802-1-geert%40linux-m68k.org/) Geert Uytterhoeven
2023-03-27  7:29   ` [Geert Uytterhoeven](../eb55ca34-ca71-ed19-dae2-6e5e87c170%40linux-m68k.org/)
2023-04-04 21:16     ` [Sudip Mukherjee](../CADVatmNHYar6tR3r9q42vZR5fsqZeeDb8LEmmBcrrOwhA7HpmQ%40mail.gmail.com/)
2023-04-04 22:40       ` [Randy Dunlap](../c3718ac3-3dd1-2273-68ef-3d2923778ab7%40infradead.org/)
2023-04-05  0:01         ` [Build regressions/improvements in v6.3-rc4 (parport_pc)](../d7c250e0-a3a8-51d0-a761-7a81305b39b2%40infradead.org/) Randy Dunlap
2023-03-27 21:52 ` [Linux 6.3-rc4](../607887b2-2ec2-4bf9-b35a-d3cc285bad1e%40roeck-us.net/) Guenter Roeck

```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to='CAHk-=whcaHLNpb7Mu_QX7ABwPgyRyfW-V8=v4Mv0S22fpjY4JQ@mail.gmail.com' \
    --to=torvalds@linux-foundation.org \
    --cc=linux-kernel@vger.kernel.org \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is an external index of several public inboxes,
see [mirroring instructions](../_/text/mirror/) on how to clone and mirror
all data and code used by this external index.
```


=== Content from bugzilla.suse.com_c3c193a5_20250115_092935.html ===


| Bugzilla – Bug 1210329 | VUL-0: CVE-2023-30772: kernel: use after free bug in da9150\_charger\_remove due to race condition | Last modified: 2024-09-10 13:02:34 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1210329)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1210329**](show_bug.cgi?id=1210329)
(CVE-2023-30772)
- VUL-0: CVE-2023-30772: kernel: use after free bug in da9150\_charger\_remove due to race condition

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: CVE-2023-30772: kernel: use after free bug in da9150\_charger\_remove du...

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2023-30772 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | SUSE Security Incidents | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Novell Products | | [Component:](describecomponents.cgi?product=SUSE Security Incidents "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Incidents ([show other bugs](buglist.cgi?component=Incidents&product=SUSE%20Security%20Incidents&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86-64 Linux | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P3 - Medium **Severity**: Major | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Security Team bot | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | <https://smash.suse.de/issue/363510/> | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | CVSSv3.1:SUSE:CVE-2023-30772:6.4:(AV:... | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2023-04-11 16:47 UTC by Zheng Wang | | --- | --- | | Modified: | 2024-09-10 13:02 UTC ([History](show_activity.cgi?id=1210329)) | | CC List: | 5 users (show)  hackerzheng666 kernel-bugs meissner rfrohl tiwai | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1210329) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1210329&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1210329&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1210329#c0)  Zheng Wang   2023-04-11 16:47:27 UTC  ``` In da9150_charger_probe, &charger->otg_work is bound with da9150_charger_otg_work. da9150_charger_otg_ncb may be called to start the work.  If we remove the module which will call da9150_charger_remove to make cleanup, there may be a unfinished work. The possible sequence is as follows:  Fix it by canceling the work before cleanup in the da9150_charger_remove  CPU0                      CPUc1                           |da9150_charger_otg_work da9150_charger_remove    | power_supply_unregister  | device_unregister        | power_supply_dev_release | kfree(psy)               |                          |                          | power_supply_changed(charger->usb);                          |   //use There's no kernel log. Here is the patch link of [1] Linux-v6.3 and [2]patchwork [1] [https://lore.kernel.org/all/CAHk-=whcaHLNpb7Mu_QX7ABwPgyRyfW-V8=v4Mv0S22fpjY4JQ@mail.gmail.com/](https://lore.kernel.org/all/CAHk-%3DwhcaHLNpb7Mu_QX7ABwPgyRyfW-V8%3Dv4Mv0S22fpjY4JQ%40mail.gmail.com/) [2] [https://lore.kernel.org/all/20230328142620.323334485@linuxfoundation.org/](https://lore.kernel.org/all/20230328142620.323334485%40linuxfoundation.org/) ``` [Comment 1](show_bug.cgi?id=1210329#c1)  Zheng Wang   2023-04-11 17:07:56 UTC  ``` I don't know if da9150 is shipped in SUSE, please feel free to let me know if there isn't any  impact. ``` [Comment 2](show_bug.cgi?id=1210329#c2)  Takashi Iwai   2023-04-12 05:26:06 UTC  ``` The fix patch has been already backported to stable and SLE15-SP4/SP5 branches. ``` [Comment 3](show_bug.cgi?id=1210329#c3)  Zheng Wang   2023-04-12 05:29:46 UTC  ``` (In reply to Takashi Iwai from [comment #2](show_bug.cgi?id=1210329#c2)) > The fix patch has been already backported to stable and SLE15-SP4/SP5 > branches.  May I ask if this issue will be assigned with a CVE number ?  Best regards, Zheng Wang ``` [Comment 4](show_bug.cgi?id=1210329#c4)  Takashi Iwai   2023-04-12 05:43:29 UTC  ``` (In reply to Zheng Wang from [comment #3](show_bug.cgi?id=1210329#c3)) > (In reply to Takashi Iwai from [comment #2](show_bug.cgi?id=1210329#c2)) > > The fix patch has been already backported to stable and SLE15-SP4/SP5 > > branches. >  > May I ask if this issue will be assigned with a CVE number ?  No, unless you explicitly ask for it. Do you want us to request a CVE number? ``` [Comment 5](show_bug.cgi?id=1210329#c5)  Zheng Wang   2023-04-12 15:43:05 UTC  ``` (In reply to Takashi Iwai from [comment #4](show_bug.cgi?id=1210329#c4)) > (In reply to Zheng Wang from [comment #3](show_bug.cgi?id=1210329#c3)) > > (In reply to Takashi Iwai from [comment #2](show_bug.cgi?id=1210329#c2)) > > > The fix patch has been already backported to stable and SLE15-SP4/SP5 > > > branches. > >  > > May I ask if this issue will be assigned with a CVE number ? >  > No, unless you explicitly ask for it. > Do you want us to request a CVE number?  Sorry for my unfamiliar about bug-report policy. Thanks for your explain and I want to request a CVE number.  Here is the credit Information:  Zheng Wang(@xmzyshypnc), Zhuorao Yang(@A1ex), Yang Hu(@BlueSheep) and Zong Cao(@P1umer)  If you need any other information, please feel free to let me know.  Best reagrds, Zheng Wang ``` [Comment 6](show_bug.cgi?id=1210329#c6)  Takashi Iwai   2023-04-12 15:52:07 UTC  ``` OK, then let's toss to the security team.  The corresponding upstream commit is 06615d11cc78162dfd5116efb71f29eb29502d37 ``` [Comment 7](show_bug.cgi?id=1210329#c7)  Zheng Wang   2023-04-12 16:07:32 UTC  ``` (In reply to Takashi Iwai from [comment #6](show_bug.cgi?id=1210329#c6)) > OK, then let's toss to the security team. >  > The corresponding upstream commit is 06615d11cc78162dfd5116efb71f29eb29502d37  Thanks for your effort. Hope you have a nice day.  Best regards, Zheng ``` [Comment 8](show_bug.cgi?id=1210329#c8)  Marcus Meissner   2023-04-13 15:59:04 UTC  ``` This happens only on module removal?  I currently find it hard to see an attacker controlled exploitation vector for this issue. ``` [Comment 9](show_bug.cgi?id=1210329#c9)  Zheng Wang   2023-04-13 16:24:14 UTC  ``` (In reply to Marcus Meissner from [comment #8](show_bug.cgi?id=1210329#c8)) > This happens only on module removal? >  > I currently find it hard to see an attacker controlled exploitation vector > for this issue.  No, this is a similar problem like CVE-2023-1855 CVE-2023-1670 and some other issues I have been reported. It assumes the attacker can access the device physically. When the driver-related device was unpluged, the remove function will be triggered.  So this is an attack with special requirement. Here is the original report where I learned from [1].  [1] <https://github.com/V4bel/CVE-2022-41218> ``` [Comment 10](show_bug.cgi?id=1210329#c10)  Marcus Meissner   2023-04-14 15:53:03 UTC  ``` I filed a CVE request with Mitre for this issue. ``` [Comment 11](show_bug.cgi?id=1210329#c11)  Zheng Wang   2023-04-15 06:12:39 UTC  ``` (In reply to Marcus Meissner from [comment #10](show_bug.cgi?id=1210329#c10)) > I filed a CVE request with Mitre for this issue.  Thanks a lot :) ``` [Comment 12](show_bug.cgi?id=1210329#c12)  Marcus Meissner   2023-04-16 07:52:29 UTC  ``` Mitre has assigned CVE-2023-30772. ``` [Comment 13](show_bug.cgi?id=1210329#c13)  Takashi Iwai   2023-04-17 08:28:21 UTC  ``` I updated the patch reference for SLE15-SP4 branch. The fix patch was backported to cve/linux-5.3, cve/linux-4.12 and cve/linux-4.4 branches.  Older branches are unaffected.  Reassigned back to security team. ``` [Comment 31](show_bug.cgi?id=1210329#c31)  Maintenance Automation   2023-05-09 16:30:02 UTC  ``` SUSE-SU-2023:2151-1: An update that solves 11 vulnerabilities and has five fixes can now be installed.  Category: security (important) Bug References: 1202353, 1205128, 1209613, 1209687, 1209777, 1209871, 1209887, 1210202, 1210301, 1210329, 1210336, 1210337, 1210469, 1210498, 1210506, 1210647 CVE References: CVE-2020-36691, CVE-2022-43945, CVE-2023-1611, CVE-2023-1670, CVE-2023-1855, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2124, CVE-2023-2162, CVE-2023-30772 Sources used: SUSE Linux Enterprise Live Patching 15-SP1 (src): kernel-livepatch-SLE15-SP1_Update_40-1-150100.3.3.1 SUSE Linux Enterprise High Performance Computing 15 SP1 LTSS 15-SP1 (src): kernel-obs-build-4.12.14-150100.197.145.1, kernel-source-4.12.14-150100.197.145.1, kernel-syms-4.12.14-150100.197.145.1 SUSE Linux Enterprise Server 15 SP1 LTSS 15-SP1 (src): kernel-obs-build-4.12.14-150100.197.145.1, kernel-source-4.12.14-150100.197.145.1, kernel-syms-4.12.14-150100.197.145.1 SUSE Linux Enterprise Server for SAP Applications 15 SP1 (src): kernel-obs-build-4.12.14-150100.197.145.1, kernel-source-4.12.14-150100.197.145.1, kernel-syms-4.12.14-150100.197.145.1 SUSE CaaS Platform 4.0 (src): kernel-obs-build-4.12.14-150100.197.145.1, kernel-source-4.12.14-150100.197.145.1, kernel-syms-4.12.14-150100.197.145.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 32](show_bug.cgi?id=1210329#c32)  Maintenance Automation   2023-05-09 16:30:13 UTC  ``` SUSE-SU-2023:2146-1: An update that solves 15 vulnerabilities and has five fixes can now be installed.  Category: security (important) Bug References: 1202353, 1205128, 1206992, 1209613, 1209687, 1209777, 1209871, 1210202, 1210203, 1210301, 1210329, 1210336, 1210337, 1210414, 1210417, 1210453, 1210469, 1210506, 1210629, 1210647 CVE References: CVE-2020-36691, CVE-2022-2196, CVE-2022-43945, CVE-2023-1611, CVE-2023-1670, CVE-2023-1838, CVE-2023-1855, CVE-2023-1872, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2008, CVE-2023-2162, CVE-2023-2176, CVE-2023-30772 Sources used: SUSE Linux Enterprise Live Patching 15-SP2 (src): kernel-livepatch-SLE15-SP2_Update_36-1-150200.5.3.1 SUSE Linux Enterprise High Performance Computing 15 SP2 LTSS 15-SP2 (src): kernel-source-5.3.18-150200.24.151.1, kernel-default-base-5.3.18-150200.24.151.1.150200.9.73.1, kernel-syms-5.3.18-150200.24.151.1, kernel-obs-build-5.3.18-150200.24.151.1 SUSE Linux Enterprise Server 15 SP2 LTSS 15-SP2 (src): kernel-source-5.3.18-150200.24.151.1, kernel-default-base-5.3.18-150200.24.151.1.150200.9.73.1, kernel-syms-5.3.18-150200.24.151.1, kernel-obs-build-5.3.18-150200.24.151.1 SUSE Linux Enterprise Server for SAP Applications 15 SP2 (src): kernel-source-5.3.18-150200.24.151.1, kernel-default-base-5.3.18-150200.24.151.1.150200.9.73.1, kernel-syms-5.3.18-150200.24.151.1, kernel-obs-build-5.3.18-150200.24.151.1 SUSE Enterprise Storage 7 (src): kernel-source-5.3.18-150200.24.151.1, kernel-default-base-5.3.18-150200.24.151.1.150200.9.73.1, kernel-syms-5.3.18-150200.24.151.1, kernel-obs-build-5.3.18-150200.24.151.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 33](show_bug.cgi?id=1210329#c33)  Maintenance Automation   2023-05-09 16:30:26 UTC  ``` SUSE-SU-2023:2140-1: An update that solves 13 vulnerabilities, contains two features and has 44 fixes can now be installed.  Category: security (important) Bug References: 1142685, 1155798, 1174777, 1189999, 1194869, 1203039, 1203325, 1204042, 1206649, 1206891, 1206992, 1207088, 1208076, 1208822, 1208845, 1209615, 1209693, 1209739, 1209871, 1209927, 1209999, 1210034, 1210158, 1210202, 1210206, 1210301, 1210329, 1210336, 1210337, 1210439, 1210453, 1210454, 1210469, 1210499, 1210506, 1210629, 1210630, 1210725, 1210729, 1210762, 1210763, 1210764, 1210765, 1210766, 1210767, 1210768, 1210769, 1210770, 1210771, 1210793, 1210816, 1210817, 1210827, 1210943, 1210953, 1210986, 1211025 CVE References: CVE-2022-2196, CVE-2023-0386, CVE-2023-1670, CVE-2023-1855, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2008, CVE-2023-2019, CVE-2023-2176, CVE-2023-2235, CVE-2023-23006, CVE-2023-30772 Jira References: PED-3750, PED-3759 Sources used: openSUSE Leap Micro 5.3 (src): kernel-default-base-5.14.21-150400.24.63.1.150400.24.27.1 openSUSE Leap 15.4 (src): kernel-syms-5.14.21-150400.24.63.1, kernel-obs-build-5.14.21-150400.24.63.1, kernel-default-base-5.14.21-150400.24.63.1.150400.24.27.1, kernel-obs-qa-5.14.21-150400.24.63.1, kernel-source-5.14.21-150400.24.63.1 SUSE Linux Enterprise Micro for Rancher 5.3 (src): kernel-default-base-5.14.21-150400.24.63.1.150400.24.27.1 SUSE Linux Enterprise Micro 5.3 (src): kernel-default-base-5.14.21-150400.24.63.1.150400.24.27.1 SUSE Linux Enterprise Micro for Rancher 5.4 (src): kernel-default-base-5.14.21-150400.24.63.1.150400.24.27.1 SUSE Linux Enterprise Micro 5.4 (src): kernel-default-base-5.14.21-150400.24.63.1.150400.24.27.1 Basesystem Module 15-SP4 (src): kernel-source-5.14.21-150400.24.63.1, kernel-default-base-5.14.21-150400.24.63.1.150400.24.27.1 Development Tools Module 15-SP4 (src): kernel-syms-5.14.21-150400.24.63.1, kernel-obs-build-5.14.21-150400.24.63.1, kernel-source-5.14.21-150400.24.63.1 SUSE Linux Enterprise Live Patching 15-SP4 (src): kernel-livepatch-SLE15-SP4_Update_12-1-150400.9.3.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 34](show_bug.cgi?id=1210329#c34)  Maintenance Automation   2023-05-09 16:30:49 UTC  ``` SUSE-SU-2023:2148-1: An update that solves 16 vulnerabilities and has five fixes can now be installed.  Category: security (important) Bug References: 1202353, 1205128, 1206992, 1207088, 1209687, 1209739, 1209777, 1209871, 1210202, 1210203, 1210301, 1210329, 1210336, 1210337, 1210414, 1210453, 1210469, 1210498, 1210506, 1210629, 1210647 CVE References: CVE-2020-36691, CVE-2022-2196, CVE-2022-43945, CVE-2023-1611, CVE-2023-1670, CVE-2023-1838, CVE-2023-1855, CVE-2023-1872, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2008, CVE-2023-2124, CVE-2023-2162, CVE-2023-2176, CVE-2023-30772 Sources used: SUSE Linux Enterprise Live Patching 15-SP3 (src): kernel-livepatch-SLE15-SP3_Update_32-1-150300.7.3.2 SUSE Linux Enterprise High Performance Computing ESPOS 15 SP3 (src): kernel-syms-5.3.18-150300.59.121.1, kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2, kernel-obs-build-5.3.18-150300.59.121.2 SUSE Linux Enterprise High Performance Computing LTSS 15 SP3 (src): kernel-syms-5.3.18-150300.59.121.1, kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2, kernel-obs-build-5.3.18-150300.59.121.2 SUSE Linux Enterprise Real Time 15 SP3 (src): kernel-syms-5.3.18-150300.59.121.1, kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2, kernel-obs-build-5.3.18-150300.59.121.2 SUSE Linux Enterprise Server 15 SP3 LTSS 15-SP3 (src): kernel-syms-5.3.18-150300.59.121.1, kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2, kernel-obs-build-5.3.18-150300.59.121.2 SUSE Linux Enterprise Server for SAP Applications 15 SP3 (src): kernel-syms-5.3.18-150300.59.121.1, kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2, kernel-obs-build-5.3.18-150300.59.121.2 SUSE Manager Proxy 4.2 (src): kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2 SUSE Manager Retail Branch Server 4.2 (src): kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2 SUSE Manager Server 4.2 (src): kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2 SUSE Enterprise Storage 7.1 (src): kernel-syms-5.3.18-150300.59.121.1, kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2, kernel-source-5.3.18-150300.59.121.2, kernel-obs-build-5.3.18-150300.59.121.2 SUSE Linux Enterprise Micro 5.1 (src): kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2 SUSE Linux Enterprise Micro 5.2 (src): kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2 SUSE Linux Enterprise Micro for Rancher 5.2 (src): kernel-default-base-5.3.18-150300.59.121.2.150300.18.70.2  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 35](show_bug.cgi?id=1210329#c35)  Maintenance Automation   2023-05-09 16:30:56 UTC  ``` SUSE-SU-2023:2147-1: An update that solves 15 vulnerabilities and has five fixes can now be installed.  Category: security (important) Bug References: 1202353, 1206992, 1207088, 1209687, 1209739, 1209777, 1209871, 1210202, 1210203, 1210301, 1210329, 1210336, 1210337, 1210414, 1210453, 1210469, 1210498, 1210506, 1210629, 1210647 CVE References: CVE-2020-36691, CVE-2022-2196, CVE-2023-1611, CVE-2023-1670, CVE-2023-1838, CVE-2023-1855, CVE-2023-1872, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2008, CVE-2023-2124, CVE-2023-2162, CVE-2023-2176, CVE-2023-30772 Sources used: SUSE Real Time Module 15-SP3 (src): kernel-syms-rt-5.3.18-150300.127.1, kernel-source-rt-5.3.18-150300.127.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 36](show_bug.cgi?id=1210329#c36)  Maintenance Automation   2023-05-09 16:31:13 UTC  ``` SUSE-SU-2023:2141-1: An update that solves 13 vulnerabilities, contains two features and has 35 fixes can now be installed.  Category: security (important) Bug References: 1142685, 1155798, 1174777, 1189999, 1194869, 1203039, 1203325, 1206649, 1206891, 1206992, 1207088, 1208076, 1208845, 1209615, 1209693, 1209739, 1209871, 1209927, 1209999, 1210034, 1210158, 1210202, 1210206, 1210301, 1210329, 1210336, 1210337, 1210439, 1210469, 1210629, 1210725, 1210762, 1210763, 1210764, 1210765, 1210766, 1210767, 1210768, 1210769, 1210770, 1210771, 1210793, 1210816, 1210817, 1210827, 1210943, 1210953, 1211025 CVE References: CVE-2022-2196, CVE-2023-0386, CVE-2023-1670, CVE-2023-1855, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2008, CVE-2023-2019, CVE-2023-2176, CVE-2023-2235, CVE-2023-23006, CVE-2023-30772 Jira References: PED-3750, PED-3759 Sources used: openSUSE Leap 15.4 (src): kernel-syms-azure-5.14.21-150400.14.49.1, kernel-source-azure-5.14.21-150400.14.49.1 Public Cloud Module 15-SP4 (src): kernel-syms-azure-5.14.21-150400.14.49.1, kernel-source-azure-5.14.21-150400.14.49.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 38](show_bug.cgi?id=1210329#c38)  Maintenance Automation   2023-05-10 12:30:13 UTC  ``` SUSE-SU-2023:2156-1: An update that solves eight vulnerabilities and has 16 fixes can now be installed.  Category: security (important) Bug References: 1142685, 1174777, 1190544, 1202353, 1207088, 1209342, 1209871, 1209887, 1209969, 1209999, 1210202, 1210301, 1210329, 1210336, 1210337, 1210430, 1210460, 1210466, 1210469, 1210498, 1210506, 1210534, 1210647, 1210827 CVE References: CVE-2023-1670, CVE-2023-1855, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2124, CVE-2023-2162, CVE-2023-30772 Sources used: SUSE Linux Enterprise Real Time 12 SP5 (src): kernel-source-rt-4.12.14-10.124.1, kernel-syms-rt-4.12.14-10.124.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 39](show_bug.cgi?id=1210329#c39)  Maintenance Automation   2023-05-10 20:30:18 UTC  ``` SUSE-SU-2023:2162-1: An update that solves 12 vulnerabilities and has 17 fixes can now be installed.  Category: security (important) Bug References: 1142685, 1142926, 1174777, 1190544, 1202353, 1205128, 1207088, 1209342, 1209687, 1209777, 1209871, 1209887, 1209969, 1209999, 1210202, 1210301, 1210329, 1210336, 1210337, 1210430, 1210460, 1210466, 1210469, 1210498, 1210506, 1210534, 1210647, 1210827, 1211037 CVE References: CVE-2020-36691, CVE-2022-43945, CVE-2023-1611, CVE-2023-1670, CVE-2023-1855, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2124, CVE-2023-2162, CVE-2023-2483, CVE-2023-30772 Sources used: SUSE Linux Enterprise Server for SAP Applications 12 SP5 (src): kernel-source-azure-4.12.14-16.133.1, kernel-syms-azure-4.12.14-16.133.1 SUSE Linux Enterprise High Performance Computing 12 SP5 (src): kernel-source-azure-4.12.14-16.133.1, kernel-syms-azure-4.12.14-16.133.1 SUSE Linux Enterprise Server 12 SP5 (src): kernel-source-azure-4.12.14-16.133.1, kernel-syms-azure-4.12.14-16.133.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 40](show_bug.cgi?id=1210329#c40)  Maintenance Automation   2023-05-11 08:30:11 UTC  ``` SUSE-SU-2023:2163-1: An update that solves 12 vulnerabilities and has 17 fixes can now be installed.  Category: security (important) Bug References: 1142685, 1142926, 1174777, 1190544, 1202353, 1205128, 1207088, 1209342, 1209687, 1209777, 1209871, 1209887, 1209969, 1209999, 1210202, 1210301, 1210329, 1210336, 1210337, 1210430, 1210460, 1210466, 1210469, 1210498, 1210506, 1210534, 1210647, 1210827, 1211037 CVE References: CVE-2020-36691, CVE-2022-43945, CVE-2023-1611, CVE-2023-1670, CVE-2023-1855, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2124, CVE-2023-2162, CVE-2023-2483, CVE-2023-30772 Sources used: SUSE Linux Enterprise Live Patching 12-SP5 (src): kgraft-patch-SLE12-SP5_Update_43-1-8.3.1 SUSE Linux Enterprise Software Development Kit 12 SP5 (src): kernel-obs-build-4.12.14-122.159.1 SUSE Linux Enterprise High Performance Computing 12 SP5 (src): kernel-syms-4.12.14-122.159.1, kernel-source-4.12.14-122.159.1 SUSE Linux Enterprise Server 12 SP5 (src): kernel-syms-4.12.14-122.159.1, kernel-source-4.12.14-122.159.1 SUSE Linux Enterprise Server for SAP Applications 12 SP5 (src): kernel-syms-4.12.14-122.159.1, kernel-source-4.12.14-122.159.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 43](show_bug.cgi?id=1210329#c43)  Maintenance Automation   2023-05-17 12:30:11 UTC  ``` SUSE-SU-2023:2231-1: An update that solves 13 vulnerabilities, contains two features and has 39 fixes can now be installed.  Category: security (important) Bug References: 1142685, 1155798, 1174777, 1189999, 1194869, 1203039, 1203325, 1206649, 1206891, 1206992, 1207088, 1208076, 1208845, 1209615, 1209693, 1209739, 1209871, 1209927, 1209999, 1210034, 1210158, 1210202, 1210206, 1210301, 1210329, 1210336, 1210337, 1210439, 1210453, 1210454, 1210469, 1210506, 1210629, 1210725, 1210762, 1210763, 1210764, 1210765, 1210766, 1210767, 1210768, 1210769, 1210770, 1210771, 1210793, 1210816, 1210817, 1210827, 1210943, 1210953, 1210986, 1211025 CVE References: CVE-2022-2196, CVE-2023-0386, CVE-2023-1670, CVE-2023-1855, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2008, CVE-2023-2019, CVE-2023-2176, CVE-2023-2235, CVE-2023-23006, CVE-2023-30772 Jira References: PED-3750, PED-3759 Sources used: openSUSE Leap 15.4 (src): kernel-syms-rt-5.14.21-150400.15.28.1, kernel-source-rt-5.14.21-150400.15.28.1 SUSE Linux Enterprise Live Patching 15-SP4 (src): kernel-livepatch-SLE15-SP4-RT_Update_7-1-150400.1.5.2 SUSE Real Time Module 15-SP4 (src): kernel-syms-rt-5.14.21-150400.15.28.1, kernel-source-rt-5.14.21-150400.15.28.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 44](show_bug.cgi?id=1210329#c44)  Maintenance Automation   2023-05-17 16:30:13 UTC  ``` SUSE-SU-2023:2232-1: An update that solves 28 vulnerabilities and has 14 fixes can now be installed.  Category: security (important) Bug References: 1076830, 1194535, 1202353, 1205128, 1207036, 1207125, 1207168, 1207185, 1207795, 1207845, 1208179, 1208333, 1208599, 1208777, 1208837, 1208850, 1209008, 1209052, 1209256, 1209289, 1209291, 1209532, 1209547, 1209549, 1209613, 1209687, 1209777, 1209778, 1209845, 1209871, 1209887, 1210124, 1210202, 1210301, 1210329, 1210336, 1210337, 1210469, 1210498, 1210506, 1210647, 1211037 CVE References: CVE-2017-5753, CVE-2020-36691, CVE-2021-3923, CVE-2021-4203, CVE-2022-20567, CVE-2022-43945, CVE-2023-0590, CVE-2023-0597, CVE-2023-1076, CVE-2023-1095, CVE-2023-1118, CVE-2023-1390, CVE-2023-1513, CVE-2023-1611, CVE-2023-1670, CVE-2023-1855, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2124, CVE-2023-2162, CVE-2023-23454, CVE-2023-23455, CVE-2023-2483, CVE-2023-28328, CVE-2023-28464, CVE-2023-28772, CVE-2023-30772 Sources used: SUSE OpenStack Cloud 9 (src): kernel-source-4.12.14-95.125.1, kernel-syms-4.12.14-95.125.1 SUSE OpenStack Cloud Crowbar 9 (src): kernel-source-4.12.14-95.125.1, kernel-syms-4.12.14-95.125.1 SUSE Linux Enterprise Server for SAP Applications 12 SP4 (src): kernel-source-4.12.14-95.125.1, kernel-syms-4.12.14-95.125.1, drbd-9.0.14+git.62f906cf-4.26.2 SUSE Linux Enterprise High Availability Extension 12 SP4 (src): drbd-9.0.14+git.62f906cf-4.26.2 SUSE Linux Enterprise Live Patching 12-SP4 (src): kgraft-patch-SLE12-SP4_Update_35-1-6.5.1 SUSE Linux Enterprise Server 12 SP4 ESPOS 12-SP4 (src): kernel-source-4.12.14-95.125.1, kernel-syms-4.12.14-95.125.1 SUSE Linux Enterprise Server 12 SP4 LTSS 12-SP4 (src): kernel-source-4.12.14-95.125.1, kernel-syms-4.12.14-95.125.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 57](show_bug.cgi?id=1210329#c57)  Maintenance Automation   2023-07-11 08:37:03 UTC  ``` SUSE-SU-2023:2805-1: An update that solves 38 vulnerabilities and has four fixes can now be installed.  Category: security (important) Bug References: 1126703, 1204405, 1205756, 1205758, 1205760, 1205762, 1205803, 1206878, 1207036, 1207125, 1207168, 1207795, 1208600, 1208777, 1208837, 1209008, 1209039, 1209052, 1209256, 1209287, 1209289, 1209291, 1209532, 1209549, 1209687, 1209871, 1210329, 1210336, 1210337, 1210498, 1210506, 1210647, 1210715, 1210940, 1211105, 1211186, 1211449, 1212128, 1212129, 1212154, 1212501, 1212842 CVE References: CVE-2017-5753, CVE-2018-20784, CVE-2022-3566, CVE-2022-45884, CVE-2022-45885, CVE-2022-45886, CVE-2022-45887, CVE-2022-45919, CVE-2023-0590, CVE-2023-1077, CVE-2023-1095, CVE-2023-1118, CVE-2023-1249, CVE-2023-1380, CVE-2023-1390, CVE-2023-1513, CVE-2023-1611, CVE-2023-1670, CVE-2023-1989, CVE-2023-1990, CVE-2023-1998, CVE-2023-2124, CVE-2023-2162, CVE-2023-2194, CVE-2023-23454, CVE-2023-23455, CVE-2023-2513, CVE-2023-28328, CVE-2023-28464, CVE-2023-28772, CVE-2023-30772, CVE-2023-3090, CVE-2023-3141, CVE-2023-31436, CVE-2023-3159, CVE-2023-3161, CVE-2023-32269, CVE-2023-35824 Sources used: SUSE Linux Enterprise Server 12 SP2 BCL 12-SP2 (src): kernel-syms-4.4.121-92.205.1, kernel-source-4.4.121-92.205.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 58](show_bug.cgi?id=1210329#c58)  Maintenance Automation   2023-07-11 16:32:00 UTC  ``` SUSE-SU-2023:2809-1: An update that solves 84 vulnerabilities, contains 25 features and has 320 fixes can now be installed.  Category: security (important) Bug References: 1065729, 1109158, 1142685, 1152472, 1152489, 1155798, 1160435, 1166486, 1172073, 1174777, 1177529, 1185861, 1186449, 1189998, 1189999, 1191731, 1193629, 1194869, 1195175, 1195655, 1195921, 1196058, 1197534, 1197617, 1198101, 1198400, 1198438, 1198835, 1199304, 1199701, 1200054, 1202353, 1202633, 1203039, 1203200, 1203325, 1203331, 1203332, 1203693, 1203906, 1204356, 1204363, 1204662, 1204993, 1205153, 1205191, 1205205, 1205544, 1205650, 1205756, 1205758, 1205760, 1205762, 1205803, 1205846, 1206024, 1206036, 1206056, 1206057, 1206103, 1206224, 1206232, 1206340, 1206459, 1206492, 1206493, 1206578, 1206640, 1206649, 1206824, 1206843, 1206876, 1206877, 1206878, 1206880, 1206881, 1206882, 1206883, 1206884, 1206885, 1206886, 1206887, 1206888, 1206889, 1206890, 1206891, 1206893, 1206894, 1206935, 1206992, 1207034, 1207036, 1207050, 1207051, 1207088, 1207125, 1207149, 1207158, 1207168, 1207185, 1207270, 1207315, 1207328, 1207497, 1207500, 1207501, 1207506, 1207507, 1207521, 1207553, 1207560, 1207574, 1207588, 1207589, 1207590, 1207591, 1207592, 1207593, 1207594, 1207602, 1207603, 1207605, 1207606, 1207607, 1207608, 1207609, 1207610, 1207611, 1207612, 1207613, 1207614, 1207615, 1207616, 1207617, 1207618, 1207619, 1207620, 1207621, 1207622, 1207623, 1207624, 1207625, 1207626, 1207627, 1207628, 1207629, 1207630, 1207631, 1207632, 1207633, 1207634, 1207635, 1207636, 1207637, 1207638, 1207639, 1207640, 1207641, 1207642, 1207643, 1207644, 1207645, 1207646, 1207647, 1207648, 1207649, 1207650, 1207651, 1207652, 1207653, 1207734, 1207768, 1207769, 1207770, 1207771, 1207773, 1207795, 1207827, 1207842, 1207845, 1207875, 1207878, 1207933, 1207935, 1207948, 1208050, 1208076, 1208081, 1208105, 1208107, 1208128, 1208130, 1208149, 1208153, 1208183, 1208212, 1208219, 1208290, 1208368, 1208410, 1208420, 1208428, 1208429, 1208449, 1208534, 1208541, 1208542, 1208570, 1208588, 1208598, 1208599, 1208600, 1208601, 1208602, 1208604, 1208605, 1208607, 1208619, 1208628, 1208700, 1208741, 1208758, 1208759, 1208776, 1208777, 1208784, 1208787, 1208815, 1208816, 1208829, 1208837, 1208843, 1208845, 1208848, 1208864, 1208902, 1208948, 1208976, 1209008, 1209039, 1209052, 1209092, 1209159, 1209256, 1209258, 1209262, 1209287, 1209288, 1209290, 1209291, 1209292, 1209366, 1209367, 1209436, 1209457, 1209504, 1209532, 1209556, 1209600, 1209615, 1209635, 1209636, 1209637, 1209684, 1209687, 1209693, 1209739, 1209779, 1209780, 1209788, 1209798, 1209799, 1209804, 1209805, 1209856, 1209871, 1209927, 1209980, 1209982, 1209999, 1210034, 1210050, 1210158, 1210165, 1210202, 1210203, 1210206, 1210216, 1210230, 1210294, 1210301, 1210329, 1210336, 1210337, 1210409, 1210439, 1210449, 1210450, 1210453, 1210454, 1210469, 1210498, 1210506, 1210533, 1210551, 1210629, 1210644, 1210647, 1210725, 1210741, 1210762, 1210763, 1210764, 1210765, 1210766, 1210767, 1210768, 1210769, 1210770, 1210771, 1210775, 1210783, 1210791, 1210793, 1210806, 1210816, 1210817, 1210827, 1210940, 1210943, 1210947, 1210953, 1210986, 1211025, 1211037, 1211043, 1211044, 1211089, 1211105, 1211113, 1211131, 1211205, 1211263, 1211280, 1211281, 1211299, 1211346, 1211387, 1211400, 1211410, 1211414, 1211449, 1211465, 1211519, 1211564, 1211590, 1211592, 1211593, 1211595, 1211654, 1211686, 1211687, 1211688, 1211689, 1211690, 1211691, 1211692, 1211693, 1211714, 1211794, 1211796, 1211804, 1211807, 1211808, 1211820, 1211836, 1211847, 1211852, 1211855, 1211960, 1212129, 1212154, 1212155, 1212158, 1212350, 1212405, 1212445, 1212448, 1212494, 1212495, 1212504, 1212513, 1212540, 1212556, 1212561, 1212563, 1212564, 1212584, 1212592, 1212605, 1212606, 1212619, 1212701, 1212741 CVE References: CVE-2020-24588, CVE-2022-2196, CVE-2022-3523, CVE-2022-36280, CVE-2022-38096, CVE-2022-4269, CVE-2022-45884, CVE-2022-45885, CVE-2022-45886, CVE-2022-45887, CVE-2022-45919, CVE-2022-4744, CVE-2023-0045, CVE-2023-0122, CVE-2023-0179, CVE-2023-0386, CVE-2023-0394, CVE-2023-0461, CVE-2023-0469, CVE-2023-0590, CVE-2023-0597, CVE-2023-1075, CVE-2023-1076, CVE-2023-1077, CVE-2023-1078, CVE-2023-1079, CVE-2023-1095, CVE-2023-1118, CVE-2023-1249, CVE-2023-1382, CVE-2023-1513, CVE-2023-1582, CVE-2023-1583, CVE-2023-1611, CVE-2023-1637, CVE-2023-1652, CVE-2023-1670, CVE-2023-1838, CVE-2023-1855, CVE-2023-1989, CVE-2023-1998, CVE-2023-2002, CVE-2023-21102, CVE-2023-21106, CVE-2023-2124, CVE-2023-2156, CVE-2023-2162, CVE-2023-2176, CVE-2023-2235, CVE-2023-2269, CVE-2023-22998, CVE-2023-23000, CVE-2023-23001, CVE-2023-23004, CVE-2023-23006, CVE-2023-23454, CVE-2023-23455, CVE-2023-2483, CVE-2023-25012, CVE-2023-2513, CVE-2023-26545, CVE-2023-28327, CVE-2023-28410, CVE-2023-28464, CVE-2023-28466, CVE-2023-28866, CVE-2023-3006, CVE-2023-30456, CVE-2023-30772, CVE-2023-31084, CVE-2023-3141, CVE-2023-31436, CVE-2023-3161, CVE-2023-3220, CVE-2023-32233, CVE-2023-33288, CVE-2023-3357, CVE-2023-3358, CVE-2023-33951, CVE-2023-33952, CVE-2023-35788, CVE-2023-35823, CVE-2023-35828, CVE-2023-35829 Jira References: PED-1549, PED-3210, PED-3259, PED-3692, PED-370, PED-3750, PED-3759, PED-376, PED-3931, PED-4022, PED-835, SES-1880, SLE-18375, SLE-18377, SLE-18378, SLE-18379, SLE-18383, SLE-18384, SLE-18385, SLE-18978, SLE-18992, SLE-19001, SLE-19253, SLE-19255, SLE-19556 Sources used: openSUSE Leap 15.5 (src): kernel-livepatch-SLE15-SP5-RT_Update_1-1-150500.11.5.1, kernel-syms-rt-5.14.21-150500.13.5.1, kernel-source-rt-5.14.21-150500.13.5.1 SUSE Linux Enterprise Live Patching 15-SP5 (src): kernel-livepatch-SLE15-SP5-RT_Update_1-1-150500.11.5.1 SUSE Real Time Module 15-SP5 (src): kernel-syms-rt-5.14.21-150500.13.5.1, kernel-source-rt-5.14.21-150500.13.5.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 59](show_bug.cgi?id=1210329#c59)  Maintenance Automation   2023-07-18 16:32:40 UTC  ``` SUSE-SU-2023:2871-1: An update that solves 82 vulnerabilities, contains 25 features and has 390 fixes can now be installed.  Category: security (important) Bug References: 1065729, 1109158, 1142685, 1152472, 1152489, 1155798, 1160435, 1166486, 1172073, 1174777, 1177529, 1186449, 1187829, 1189998, 1189999, 1191731, 1193629, 1194869, 1195175, 1195655, 1195921, 1196058, 1197534, 1197617, 1198101, 1198400, 1198438, 1198835, 1199304, 1199701, 1200054, 1202353, 1202633, 1203039, 1203200, 1203325, 1203331, 1203332, 1203693, 1203906, 1204356, 1204363, 1204662, 1204993, 1205153, 1205191, 1205205, 1205544, 1205650, 1205756, 1205758, 1205760, 1205762, 1205803, 1205846, 1206024, 1206036, 1206056, 1206057, 1206103, 1206224, 1206232, 1206340, 1206459, 1206492, 1206493, 1206552, 1206578, 1206640, 1206649, 1206677, 1206824, 1206843, 1206876, 1206877, 1206878, 1206880, 1206881, 1206882, 1206883, 1206884, 1206885, 1206886, 1206887, 1206888, 1206889, 1206890, 1206891, 1206893, 1206894, 1206935, 1206992, 1207034, 1207036, 1207050, 1207051, 1207088, 1207125, 1207149, 1207158, 1207168, 1207185, 1207270, 1207315, 1207328, 1207497, 1207500, 1207501, 1207506, 1207507, 1207521, 1207553, 1207560, 1207574, 1207588, 1207589, 1207590, 1207591, 1207592, 1207593, 1207594, 1207602, 1207603, 1207605, 1207606, 1207607, 1207608, 1207609, 1207610, 1207611, 1207612, 1207613, 1207614, 1207615, 1207616, 1207617, 1207618, 1207619, 1207620, 1207621, 1207622, 1207623, 1207624, 1207625, 1207626, 1207627, 1207628, 1207629, 1207630, 1207631, 1207632, 1207633, 1207634, 1207635, 1207636, 1207637, 1207638, 1207639, 1207640, 1207641, 1207642, 1207643, 1207644, 1207645, 1207646, 1207647, 1207648, 1207649, 1207650, 1207651, 1207652, 1207653, 1207734, 1207768, 1207769, 1207770, 1207771, 1207773, 1207795, 1207827, 1207842, 1207845, 1207875, 1207878, 1207933, 1207935, 1207948, 1208050, 1208076, 1208081, 1208105, 1208107, 1208128, 1208130, 1208149, 1208153, 1208183, 1208212, 1208219, 1208290, 1208368, 1208410, 1208420, 1208428, 1208429, 1208449, 1208534, 1208541, 1208542, 1208570, 1208588, 1208598, 1208599, 1208600, 1208601, 1208602, 1208604, 1208605, 1208607, 1208619, 1208628, 1208700, 1208741, 1208758, 1208759, 1208776, 1208777, 1208784, 1208787, 1208815, 1208816, 1208829, 1208837, 1208843, 1208845, 1208848, 1208864, 1208902, 1208948, 1208976, 1209008, 1209039, 1209052, 1209092, 1209159, 1209256, 1209258, 1209262, 1209287, 1209288, 1209290, 1209291, 1209292, 1209366, 1209367, 1209436, 1209457, 1209504, 1209532, 1209556, 1209600, 1209615, 1209635, 1209636, 1209637, 1209684, 1209687, 1209693, 1209739, 1209779, 1209780, 1209788, 1209798, 1209799, 1209804, 1209805, 1209856, 1209871, 1209927, 1209980, 1209982, 1209999, 1210034, 1210050, 1210158, 1210165, 1210202, 1210203, 1210206, 1210216, 1210230, 1210294, 1210301, 1210329, 1210335, 1210336, 1210337, 1210409, 1210439, 1210449, 1210450, 1210453, 1210454, 1210498, 1210506, 1210533, 1210551, 1210565, 1210584, 1210629, 1210644, 1210647, 1210725, 1210741, 1210762, 1210763, 1210764, 1210765, 1210766, 1210767, 1210768, 1210769, 1210770, 1210771, 1210775, 1210783, 1210791, 1210793, 1210806, 1210816, 1210817, 1210827, 1210853, 1210940, 1210943, 1210947, 1210953, 1210986, 1211014, 1211025, 1211037, 1211043, 1211044, 1211089, 1211105, 1211113, 1211131, 1211205, 1211263, 1211280, 1211281, 1211299, 1211346, 1211387, 1211400, 1211410, 1211414, 1211449, 1211465, 1211519, 1211564, 1211590, 1211592, 1211593, 1211595, 1211654, 1211686, 1211687, 1211688, 1211689, 1211690, 1211691, 1211692, 1211693, 1211714, 1211794, 1211796, 1211804, 1211807, 1211808, 1211820, 1211836, 1211847, 1211852, 1211855, 1211960, 1212051, 1212129, 1212154, 1212155, 1212158, 1212265, 1212350, 1212445, 1212448, 1212456, 1212494, 1212495, 1212504, 1212513, 1212540, 1212556, 1212561, 1212563, 1212564, 1212584, 1212592, 1212603, 1212605, 1212606, 1212619, 1212685, 1212701, 1212741, 1212835, 1212838, 1212842, 1212848, 1212861, 1212869, 1212892, 1212961, 1213010, 1213011, 1213012, 1213013, 1213014, 1213015, 1213016, 1213017, 1213018, 1213019, 1213020, 1213021, 1213024, 1213025, 1213032, 1213034, 1213035, 1213036, 1213037, 1213038, 1213039, 1213040, 1213041, 1213087, 1213088, 1213089, 1213090, 1213092, 1213093, 1213094, 1213095, 1213096, 1213098, 1213099, 1213100, 1213102, 1213103, 1213104, 1213105, 1213106, 1213107, 1213108, 1213109, 1213110, 1213111, 1213112, 1213113, 1213114, 1213116, 1213134 CVE References: CVE-2022-36280, CVE-2022-38096, CVE-2022-4269, CVE-2022-45884, CVE-2022-45885, CVE-2022-45886, CVE-2022-45887, CVE-2022-45919, CVE-2022-4744, CVE-2023-0045, CVE-2023-0122, CVE-2023-0179, CVE-2023-0394, CVE-2023-0461, CVE-2023-0469, CVE-2023-0590, CVE-2023-0597, CVE-2023-1075, CVE-2023-1076, CVE-2023-1077, CVE-2023-1079, CVE-2023-1095, CVE-2023-1118, CVE-2023-1249, CVE-2023-1382, CVE-2023-1513, CVE-2023-1582, CVE-2023-1583, CVE-2023-1611, CVE-2023-1637, CVE-2023-1652, CVE-2023-1670, CVE-2023-1829, CVE-2023-1838, CVE-2023-1855, CVE-2023-1989, CVE-2023-1998, CVE-2023-2002, CVE-2023-21102, CVE-2023-21106, CVE-2023-2124, CVE-2023-2156, CVE-2023-2162, CVE-2023-2176, CVE-2023-2235, CVE-2023-2269, CVE-2023-22998, CVE-2023-23000, CVE-2023-23001, CVE-2023-23004, CVE-2023-23006, CVE-2023-2430, CVE-2023-2483, CVE-2023-25012, CVE-2023-2513, CVE-2023-26545, CVE-2023-28327, CVE-2023-28410, CVE-2023-28464, CVE-2023-28866, CVE-2023-3006, CVE-2023-30456, CVE-2023-30772, CVE-2023-3090, CVE-2023-31084, CVE-2023-3111, CVE-2023-3141, CVE-2023-31436, CVE-2023-3161, CVE-2023-3212, CVE-2023-3220, CVE-2023-32233, CVE-2023-33288, CVE-2023-3357, CVE-2023-3358, CVE-2023-3389, CVE-2023-33951, CVE-2023-33952, CVE-2023-35788, CVE-2023-35823, CVE-2023-35828, CVE-2023-35829 Jira References: PED-1549, PED-3210, PED-3259, PED-3692, PED-370, PED-3750, PED-3759, PED-376, PED-3931, PED-4022, PED-835, SES-1880, SLE-18375, SLE-18377, SLE-18378, SLE-18379, SLE-18383, SLE-18384, SLE-18385, SLE-18978, SLE-18992, SLE-19001, SLE-19253, SLE-19255, SLE-19556 Sources used: openSUSE Leap 15.5 (src): kernel-livepatch-SLE15-SP5_Update_1-1-150500.11.7.1, kernel-syms-5.14.21-150500.55.7.1, kernel-obs-qa-5.14.21-150500.55.7.1, kernel-obs-build-5.14.21-150500.55.7.1, kernel-source-5.14.21-150500.55.7.1, kernel-default-base-5.14.21-150500.55.7.1.150500.6.2.5 Basesystem Module 15-SP5 (src): kernel-source-5.14.21-150500.55.7.1, kernel-default-base-5.14.21-150500.55.7.1.150500.6.2.5 Development Tools Module 15-SP5 (src): kernel-source-5.14.21-150500.55.7.1, kernel-syms-5.14.21-150500.55.7.1, kernel-obs-build-5.14.21-150500.55.7.1 SUSE Linux Enterprise Live Patching 15-SP5 (src): kernel-livepatch-SLE15-SP5_Update_1-1-150500.11.7.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 61](show_bug.cgi?id=1210329#c61)  Maintenance Automation   2024-02-27 12:01:17 UTC  ``` SUSE-SU-2023:2646-1: An update that solves 69 vulnerabilities, contains six features and has 292 security fixes can now be installed.  Category: security (important) Bug References: 1065729, 1109158, 1142685, 1152472, 1152489, 1155798, 1160435, 1166486, 1172073, 1174777, 1177529, 1186449, 1189998, 1189999, 1191731, 1193629, 1194869, 1195175, 1195655, 1195921, 1196058, 1197534, 1197617, 1198101, 1198438, 1198835, 1199304, 1200054, 1202353, 1202633, 1203039, 1203200, 1203325, 1203331, 1203332, 1203693, 1203906, 1204356, 1204662, 1204993, 1205191, 1205205, 1205544, 1205650, 1205756, 1205758, 1205760, 1205762, 1205803, 1205846, 1206024, 1206036, 1206056, 1206057, 1206103, 1206224, 1206232, 1206340, 1206459, 1206492, 1206493, 1206552, 1206578, 1206640, 1206649, 1206677, 1206824, 1206843, 1206876, 1206877, 1206878, 1206880, 1206881, 1206882, 1206883, 1206884, 1206885, 1206886, 1206887, 1206888, 1206889, 1206890, 1206891, 1206893, 1206894, 1206935, 1206992, 1207034, 1207050, 1207088, 1207149, 1207158, 1207168, 1207185, 1207270, 1207315, 1207328, 1207497, 1207500, 1207501, 1207506, 1207507, 1207521, 1207553, 1207560, 1207574, 1207588, 1207589, 1207590, 1207591, 1207592, 1207593, 1207594, 1207602, 1207603, 1207605, 1207606, 1207607, 1207608, 1207609, 1207610, 1207611, 1207612, 1207613, 1207614, 1207615, 1207616, 1207617, 1207618, 1207619, 1207620, 1207621, 1207622, 1207623, 1207624, 1207625, 1207626, 1207627, 1207628, 1207629, 1207630, 1207631, 1207632, 1207633, 1207634, 1207635, 1207636, 1207637, 1207638, 1207639, 1207640, 1207641, 1207642, 1207643, 1207644, 1207645, 1207646, 1207647, 1207648, 1207649, 1207650, 1207651, 1207652, 1207653, 1207734, 1207768, 1207769, 1207770, 1207771, 1207773, 1207795, 1207827, 1207842, 1207845, 1207875, 1207878, 1207935, 1207948, 1208050, 1208076, 1208081, 1208105, 1208107, 1208128, 1208130, 1208149, 1208153, 1208183, 1208212, 1208219, 1208290, 1208368, 1208420, 1208428, 1208429, 1208449, 1208534, 1208541, 1208542, 1208570, 1208588, 1208598, 1208599, 1208600, 1208602, 1208604, 1208605, 1208607, 1208619, 1208628, 1208700, 1208758, 1208759, 1208776, 1208777, 1208784, 1208787, 1208815, 1208816, 1208829, 1208837, 1208843, 1208845, 1208848, 1208864, 1208902, 1208948, 1208976, 1209008, 1209052, 1209092, 1209159, 1209256, 1209258, 1209262, 1209287, 1209288, 1209290, 1209292, 1209367, 1209457, 1209504, 1209532, 1209556, 1209600, 1209635, 1209636, 1209637, 1209684, 1209687, 1209693, 1209739, 1209779, 1209788, 1209798, 1209799, 1209804, 1209805, 1209856, 1209871, 1209927, 1209980, 1209982, 1209999, 1210034, 1210050, 1210158, 1210165, 1210202, 1210203, 1210206, 1210216, 1210230, 1210294, 1210301, 1210329, 1210336, 1210409, 1210439, 1210449, 1210450, 1210469, 1210498, 1210506, 1210533, 1210551, 1210629, 1210644, 1210647, 1210725, 1210741, 1210762, 1210763, 1210764, 1210765, 1210766, 1210767, 1210768, 1210769, 1210770, 1210771, 1210775, 1210783, 1210791, 1210793, 1210806, 1210816, 1210817, 1210827, 1210940, 1210943, 1210947, 1210953, 1210986, 1211025, 1211037, 1211043, 1211044, 1211089, 1211105, 1211113, 1211131, 1211140, 1211205, 1211263, 1211280, 1211281, 1211299, 1211387, 1211414, 1211449, 1211465, 1211519, 1211564, 1211590, 1211592, 1211593, 1211595, 1211654, 1211686, 1211687, 1211688, 1211689, 1211690, 1211691, 1211692, 1211693, 1211714, 1211796, 1211804, 1211807, 1211808, 1211820, 1211836, 1211847, 1211855, 1211960, 1212129, 1212154, 1212155, 1212158 CVE References: CVE-2022-2196, CVE-2022-36280, CVE-2022-38096, CVE-2022-4269, CVE-2022-45884, CVE-2022-45885, CVE-2022-45886, CVE-2022-45887, CVE-2022-45919, CVE-2022-4744, CVE-2023-0045, CVE-2023-0122, CVE-2023-0179, CVE-2023-0394, CVE-2023-0461, CVE-2023-0469, CVE-2023-0590, CVE-2023-0597, CVE-2023-1075, CVE-2023-1076, CVE-2023-1077, CVE-2023-1079, CVE-2023-1095, CVE-2023-1118, CVE-2023-1380, CVE-2023-1382, CVE-2023-1513, CVE-2023-1582, CVE-2023-1583, CVE-2023-1611, CVE-2023-1637, CVE-2023-1652, CVE-2023-1670, CVE-2023-1838, CVE-2023-1855, CVE-2023-1989, CVE-2023-1998, CVE-2023-2002, CVE-2023-21102, CVE-2023-21106, CVE-2023-2124, CVE-2023-2156, CVE-2023-2162, CVE-2023-2176, CVE-2023-2235, CVE-2023-2269, CVE-2023-22998, CVE-2023-23000, CVE-2023-23001, CVE-2023-23004, CVE-2023-23006, CVE-2023-2483, CVE-2023-25012, CVE-2023-2513, CVE-2023-26545, CVE-2023-28327, CVE-2023-28410, CVE-2023-28464, CVE-2023-3006, CVE-2023-30456, CVE-2023-30772, CVE-2023-31084, CVE-2023-3141, CVE-2023-31436, CVE-2023-3161, CVE-2023-32233, CVE-2023-33288, CVE-2023-33951, CVE-2023-33952 Jira References: PED-3210, PED-3259, PED-3692, PED-3750, PED-3759, PED-4022 Sources used: openSUSE Leap 15.5 (src): kernel-source-azure-5.14.21-150500.33.3.1, kernel-syms-azure-5.14.21-150500.33.3.1 Public Cloud Module 15-SP5 (src): kernel-source-azure-5.14.21-150500.33.3.1, kernel-syms-azure-5.14.21-150500.33.3.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 63](show_bug.cgi?id=1210329#c63)  Robert Frohl   2024-05-06 11:59:26 UTC  ``` done, closing ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1210329)
* - [XML](show_bug.cgi?ctype=xml&id=1210329)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1210329)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1210329)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)


