=== Content from github.com_a367e111_20250114_201534.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fsecurity%2Fadvisories%2FGHSA-9p5f-5x8v-x65m)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fsecurity%2Fadvisories%2FGHSA-9p5f-5x8v-x65m)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=jellyfin%2Fjellyfin)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jellyfin](/jellyfin)
/
**[jellyfin](/jellyfin/jellyfin)**
Public

* [Notifications](/login?return_to=%2Fjellyfin%2Fjellyfin) You must be signed in to change notification settings
* [Fork
  3.3k](/login?return_to=%2Fjellyfin%2Fjellyfin)
* [Star
   36.5k](/login?return_to=%2Fjellyfin%2Fjellyfin)

* [Code](/jellyfin/jellyfin)
* [Issues
  458](/jellyfin/jellyfin/issues)
* [Pull requests
  149](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects
  2](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

Additional navigation options

* [Code](/jellyfin/jellyfin)
* [Issues](/jellyfin/jellyfin/issues)
* [Pull requests](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

# Directory traversal + file write causing arbitrary code execution

Critical

[joshuaboniface](/joshuaboniface)
published
GHSA-9p5f-5x8v-x65m
Apr 23, 2023

## Package

Jellyfin

## Affected versions

>=10.8.0

## Patched versions

10.8.10

## Description

### Impact

Frederic Linn (@FredericLinn) has reported a series of vulnerabilities that can result in directory traversal, file write, and potential remote code execution on Jellyfin instances. The general process involves chaining several exploits including a stored XSS vulnerability and can be used by an unprivileged user.

The general process is (using the example of setting an intro video as the payload):

* Create a session as a low-priviledged user with a crafted authorization header
* Upload an executable that contains a malicious plugin inline via /ClientLog/Document
* (Admin hovers over our device in dashboard -> XSS payload gets triggered)
* XSS Payload tries to set encoder path to our uploaded "log" file via /System/MediaEncoder/Path
* The request fails, but in the process our executable actually runs (I guess for verifying if the path points to a valid ffmpeg version)
* The executable will create a plugin folder and place the inlined plugin DLL inside it
* The XSS payload shuts down the server via /System/Shutdown (separate CVE in `jellyfin-web`)
* After (manually) starting the server, the plugin gets loaded and will:
  + write a new video into the Jellyfin temp folder and register it
  + register this video as the new intro
  + and finally provide a malicious endpoint that simply executes system commands and sends back the results

The ability to write arbitrary content to log files was added in [#5918](https://github.com/jellyfin/jellyfin/pull/5918) to allow flexibility to client logging.

The following two sections detail Frederic's exact determinations regarding the two vulnerabilities.

#### Directory traversal and file write

I've been reading the codebase here and there for a couple of days and found a directory traversal inside the ClientLogController, specifically /ClientLog/Document.

The GetRequestInformation method retrieves the name and version of the client from the HttpContext.User object.

Those values are attacker controlled when authenticating against the API. Both values are interpolated into a string, which ultimately ends up as an argument to Path.Combine().

Setting a client name to the relative path "........\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\test" will write a file with completely attacker controlled content to the executing user's autostart directory.

However, because the attacker only partially controls the filename, exploitation proves to be tricky. That's because the resulting file will always end in ".log", which means putting something in the autostart directory is only going to open notepad on startup. I mean, we can at least insult the user :^).

Anyway, the next logical step would be to write into Jellyfin's plugins directory, but the sub-directories there (of which the already existing configurations directory conveniently counts as one!) are only getting scanned for ".dll" files.

This stops an attacker from providing malicious DLLs that implement the correct interfaces in order to be recognized as legitimate plugins.

On Linux, there might be more options. Running as the standard root user inside a container, an attacker could of course write anywhere. There's the very interesting "/etc/cron.d" directory, where an attacker can place cron jobs that get picked up automatically. Those files, however, can't contain a dot. Moreover, inside the container the cronjobs are probably not being executed, as the Jellyfin process should be only one running.

For the stored XSS component, see [GHSA-89hp-h43h-r5pq](https://github.com/jellyfin/jellyfin-web/security/advisories/GHSA-89hp-h43h-r5pq "GHSA-89hp-h43h-r5pq")

### Patches

10.8.10

### Workarounds

N/A

### References

A complete write-up is available here: <https://gebir.ge/blog/peanut-butter-jellyfin-time/>

### Severity

Critical

### CVE ID

CVE-2023-30626

### Weaknesses

No CWEs

### Credits

* [![@theGEBIRGE](https://avatars.githubusercontent.com/u/36849099?s=40&v=4)](/theGEBIRGE)
  [theGEBIRGE](/theGEBIRGE)
  Finder

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b00ebf38_20250114_201531.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fpull%2F5918)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fpull%2F5918)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=jellyfin%2Fjellyfin)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jellyfin](/jellyfin)
/
**[jellyfin](/jellyfin/jellyfin)**
Public

* [Notifications](/login?return_to=%2Fjellyfin%2Fjellyfin) You must be signed in to change notification settings
* [Fork
  3.3k](/login?return_to=%2Fjellyfin%2Fjellyfin)
* [Star
   36.5k](/login?return_to=%2Fjellyfin%2Fjellyfin)

* [Code](/jellyfin/jellyfin)
* [Issues
  458](/jellyfin/jellyfin/issues)
* [Pull requests
  149](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects
  2](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

Additional navigation options

* [Code](/jellyfin/jellyfin)
* [Issues](/jellyfin/jellyfin/issues)
* [Pull requests](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fjellyfin%2Fjellyfin%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fjellyfin%2Fjellyfin%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Add endpoint to log client events #5918

 Merged

[cvium](/cvium)
merged 19 commits into
[jellyfin:master](/jellyfin/jellyfin/tree/master "jellyfin/jellyfin:master")
from
[crobibero:client-logger](/crobibero/jellyfin/tree/client-logger "crobibero/jellyfin:client-logger")

Nov 8, 2021

 Merged

# [Add endpoint to log client events](#top) #5918

[cvium](/cvium)
merged 19 commits into
[jellyfin:master](/jellyfin/jellyfin/tree/master "jellyfin/jellyfin:master")
from
[crobibero:client-logger](/crobibero/jellyfin/tree/client-logger "crobibero/jellyfin:client-logger")

Nov 8, 2021

[Conversation
28](/jellyfin/jellyfin/pull/5918)
[Commits
19](/jellyfin/jellyfin/pull/5918/commits)
[Checks
0](/jellyfin/jellyfin/pull/5918/checks)
[Files changed](/jellyfin/jellyfin/pull/5918/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![crobibero](https://avatars.githubusercontent.com/u/24963659?s=60&v=4)](/crobibero)

Copy link

Member

### @crobibero **[crobibero](/crobibero)** commented [Apr 26, 2021](#issue-867685016) • edited Loading

Fixes [#5646](https://github.com/jellyfin/jellyfin/issues/5646)

This logs all events to files separated by the `ClientName` parameter as the following to the file `log_{ClientName}_{yyyymmdd}.log`

```
[2021-04-26 12:21:00.108 +00:00] [Trace] [Jellyfin-Sample-Client:1.0.0]: UserId: 0000000-0000-0000-0000-000000000000 DeviceId:  8eec4223-9280-454f-a4ee-bc978c1007e4
This is the log message

```

Updated openapi: [openapi\_client\_event.json.txt](https://github.com/jellyfin/jellyfin/files/6377234/openapi_client_event.json.txt)

Note- these endpoints don't currently require authentication, so that may change depending on feedback.

Sorry, something went wrong.

 👍
1
 nielsvanvelzen reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Add endpoint to log client events](/jellyfin/jellyfin/pull/5918/commits/1d6224c9c66b31c9df602b4281c870a9c400767c "Add endpoint to log client events")`

`[1d6224c](/jellyfin/jellyfin/pull/5918/commits/1d6224c9c66b31c9df602b4281c870a9c400767c)`

[![@dkanada](https://avatars.githubusercontent.com/u/21353219?s=80&v=4)](/dkanada)

Copy link

Member

### **[dkanada](/dkanada)** commented [Apr 26, 2021](#issuecomment-826855618)

| Can we put the client name first so they're all in a single location on the filesystem? Our ffmpeg logs have a similar pattern, which I find quite convenient. |
| --- |

All reactions

Sorry, something went wrong.

[![BaronGreenback](https://avatars.githubusercontent.com/u/22121540?s=60&v=4)](/BaronGreenback)

**[BaronGreenback](/BaronGreenback)**
approved these changes
[Apr 26, 2021](#pullrequestreview-644876066)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/1d6224c9c66b31c9df602b4281c870a9c400767c)

[![@BaronGreenback](https://avatars.githubusercontent.com/u/22121540?s=80&v=4)](/BaronGreenback)

Copy link

Contributor

### **[BaronGreenback](/BaronGreenback)** commented [Apr 26, 2021](#issuecomment-826975317)

| Definitely useful for dlna-playTo client logging. |
| --- |

All reactions

Sorry, something went wrong.

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Clean client filename generation](/jellyfin/jellyfin/pull/5918/commits/f8cfc55a3678186af642c74d1c7083711c96aa63 "Clean client filename generation")`

`[f8cfc55](/jellyfin/jellyfin/pull/5918/commits/f8cfc55a3678186af642c74d1c7083711c96aa63)`

[![daullmer](https://avatars.githubusercontent.com/u/16425113?s=60&v=4)](/daullmer)

**[daullmer](/daullmer)**
reviewed
[May 4, 2021](#pullrequestreview-651066905)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/f8cfc55a3678186af642c74d1c7083711c96aa63)

Copy link

Member

### @daullmer **[daullmer](/daullmer)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Shouldn't the api endpoint require authorization?

Sorry, something went wrong.

 👍
4
 dkanada, Shadowghost, nielsvanvelzen, and ConfusedPolarBear reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Require Authorization for the ClientLogController](/jellyfin/jellyfin/pull/5918/commits/3c8abeda7d5608cfe5ab099158190497edc802ef "Require Authorization for the ClientLogController")`

`[3c8abed](/jellyfin/jellyfin/pull/5918/commits/3c8abeda7d5608cfe5ab099158190497edc802ef)`

[![daullmer](https://avatars.githubusercontent.com/u/16425113?s=60&v=4)](/daullmer)

**[daullmer](/daullmer)**
approved these changes
[May 4, 2021](#pullrequestreview-651363082)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/3c8abeda7d5608cfe5ab099158190497edc802ef)

[![dkanada](https://avatars.githubusercontent.com/u/21353219?s=60&v=4)](/dkanada)

**[dkanada](/dkanada)**
reviewed
[May 11, 2021](#pullrequestreview-656625756)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/3c8abeda7d5608cfe5ab099158190497edc802ef)

[Jellyfin.Api/Models/ClientLogDtos/ClientLogEventDto.cs](/jellyfin/jellyfin/pull/5918/files/3c8abeda7d5608cfe5ab099158190497edc802ef#diff-e39c3479a9d2c584ff30064f66f1133ca2b99eefeb19e1f39a86124645f6bd0b)
Outdated

Show resolved

Hide resolved

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero) [![@dkanada](https://avatars.githubusercontent.com/u/21353219?s=40&v=4)](/dkanada)

`[Update Jellyfin.Api/Models/ClientLogDtos/ClientLogEventDto.cs](/jellyfin/jellyfin/pull/5918/commits/2888567ea53c1c839b0cd69e0ec1168cf51f36a8 "Update Jellyfin.Api/Models/ClientLogDtos/ClientLogEventDto.cs

Co-authored-by: dkanada <dkanada@users.noreply.github.com>")`
 …

`[2888567](/jellyfin/jellyfin/pull/5918/commits/2888567ea53c1c839b0cd69e0ec1168cf51f36a8)`

```
Co-authored-by: dkanada <dkanada@users.noreply.github.com>
```

[![@jellyfin-bot](https://avatars.githubusercontent.com/u/45807407?s=40&u=a977d3150f817c3c9dd2f433f839456bdb4ff4ae&v=4)](/jellyfin-bot)
[jellyfin-bot](/jellyfin-bot)
added
the
[merge conflict](/jellyfin/jellyfin/labels/merge%20conflict)
Merge conflicts should be resolved before a merge
label
[Aug 30, 2021](#event-5225923483)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
closed this
[Sep 27, 2021](#event-5365389041)

 [![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
deleted the
client-logger

branch
[September 27, 2021 12:55](#event-5365389466)

 [![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
restored the
client-logger

branch
[October 26, 2021 20:08](#event-5523078093)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
reopened this
[Oct 26, 2021](#event-5523079075)

[![nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=60&v=4)](/nielsvanvelzen)

**[nielsvanvelzen](/nielsvanvelzen)**
requested changes
[Oct 26, 2021](#pullrequestreview-789867896)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/2888567ea53c1c839b0cd69e0ec1168cf51f36a8)

Copy link

Member

### @nielsvanvelzen **[nielsvanvelzen](/nielsvanvelzen)** left a comment • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Would be nice to have an endpoint to upload a large log for when clients crash and want to upload a dump.

edit: so not an array but really just a plaintext document

Sorry, something went wrong.

All reactions

 [crobibero](/crobibero)
added 2 commits
[October 26, 2021 17:43](#commits-pushed-f78f1e8)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Merge remote-tracking branch 'upstream/master' into client-logger](/jellyfin/jellyfin/pull/5918/commits/f78f1e834ce1907157d4d43cf8564cf40d05fb9f "Merge remote-tracking branch 'upstream/master' into client-logger")`

`[f78f1e8](/jellyfin/jellyfin/pull/5918/commits/f78f1e834ce1907157d4d43cf8564cf40d05fb9f)`

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Add ability to upload entire file](/jellyfin/jellyfin/pull/5918/commits/a6357f89abb40deaa84ed0ea52010c098e769e62 "Add ability to upload entire file")`

`[a6357f8](/jellyfin/jellyfin/pull/5918/commits/a6357f89abb40deaa84ed0ea52010c098e769e62)`

[![@jellyfin-bot](https://avatars.githubusercontent.com/u/45807407?s=40&u=a977d3150f817c3c9dd2f433f839456bdb4ff4ae&v=4)](/jellyfin-bot)
[jellyfin-bot](/jellyfin-bot)
removed
the
[merge conflict](/jellyfin/jellyfin/labels/merge%20conflict)
Merge conflicts should be resolved before a merge
label
[Oct 27, 2021](#event-5524098841)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=80&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)

Copy link

Member

Author

### **[crobibero](/crobibero)** commented [Oct 27, 2021](#issuecomment-952439985)

| Would be nice to have an endpoint to upload a large log for when clients crash and want to upload a dump.  edit: so not an array but really just a plaintext document  This has been added. The files will automatically be cleaned up by the existing `DeleteLogFileTask` |
| --- |

All reactions

Sorry, something went wrong.

 [![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
requested review from
[Bond-009](/Bond-009) and
[cvium](/cvium)
[October 27, 2021 01:03](#event-5524158684)

[![@Shadowghost](https://avatars.githubusercontent.com/u/3741446?s=80&u=e1e89c62e4ac1b0e07bc467d7b0f8a57681f472a&v=4)](/Shadowghost)

Copy link

Contributor

### **[Shadowghost](/Shadowghost)** commented [Oct 27, 2021](#issuecomment-952607520)

| I still don't like this approach. The server should not be responsible for proper logging on the clients.  You still need an admin to access the uploaded logs, it's not really an improvement for normal users. |
| --- |

All reactions

Sorry, something went wrong.

[![dkanada](https://avatars.githubusercontent.com/u/21353219?s=60&v=4)](/dkanada)

**[dkanada](/dkanada)**
reviewed
[Oct 27, 2021](#pullrequestreview-790260672)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/a6357f89abb40deaa84ed0ea52010c098e769e62)

Copy link

Member

### @dkanada **[dkanada](/dkanada)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Could a setting to globally enable the feature as well as one to set the IClientEventLogger used by the server be added? That might help ease some of the concerns raised.

Sorry, something went wrong.

All reactions

[MediaBrowser.Model/ClientLog/ClientLogEvent.cs](/jellyfin/jellyfin/pull/5918/files/a6357f89abb40deaa84ed0ea52010c098e769e62#diff-f7dc4e176c0befeec079aa9e2981ade699f02dcf7bc43e851acea0665ce28e38)
Outdated

Show resolved

Hide resolved

[![nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=60&v=4)](/nielsvanvelzen)

**[nielsvanvelzen](/nielsvanvelzen)**
reviewed
[Oct 27, 2021](#pullrequestreview-791147219)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/a6357f89abb40deaa84ed0ea52010c098e769e62)

Copy link

Member

### @nielsvanvelzen **[nielsvanvelzen](/nielsvanvelzen)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

* Should we add a administrator option to disable client log uploads?
  + If yes: How will the API tell us a upload was denied? Do we use a HTTP status code for that?
* Which clients want to use this API?
  + Do they use it for logging, "dumping" or both?
    - ATV will not use the LogEvent(s) operations, only the LogFile operation
* Would it make sense to rename "LogFile" to something like "LogDocument"?
* Do we need to limit the size of a log file?
* Can we get client & device info from the authorization header when logging a file?

Sorry, something went wrong.

All reactions

[Jellyfin.Api/Controllers/ClientLogController.cs](/jellyfin/jellyfin/pull/5918/files/a6357f89abb40deaa84ed0ea52010c098e769e62#diff-2cea0a137aa1c0d17dc7d9fa3067b048dce5a5be11e5e3bda33ea5fccb819ab0)
Outdated

Show resolved

Hide resolved

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Suggestions from review](/jellyfin/jellyfin/pull/5918/commits/c534c450330759f6595c9601e3fe8b12e6987e69 "Suggestions from review")`

`[c534c45](/jellyfin/jellyfin/pull/5918/commits/c534c450330759f6595c9601e3fe8b12e6987e69)`

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=80&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)

Copy link

Member

Author

### **[crobibero](/crobibero)** commented [Oct 28, 2021](#issuecomment-953425620) • edited Loading

| System setting added: `AllowClientLogUpload` -> returns `403 Forbidden` if disabled Max document size: 1M File is now generated as: `upload_$clientName_$clientVersion_$utcNow.log` |
| --- |

 👍
1
 nielsvanvelzen reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Fix logfile name if api key is used](/jellyfin/jellyfin/pull/5918/commits/91204fc9f0e704a61300a7bd54f52d56f02f44b3 "Fix logfile name if api key is used")`

`[91204fc](/jellyfin/jellyfin/pull/5918/commits/91204fc9f0e704a61300a7bd54f52d56f02f44b3)`

[![nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=60&v=4)](/nielsvanvelzen)

**[nielsvanvelzen](/nielsvanvelzen)**
approved these changes
[Oct 28, 2021](#pullrequestreview-791443581)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/91204fc9f0e704a61300a7bd54f52d56f02f44b3)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Update documentation; use information from authorization; return gene…](/jellyfin/jellyfin/pull/5918/commits/0e584f68409e71204f6b9387cde8efe2adb0fbed "Update documentation; use information from authorization; return generated filename")`
 …

`[0e584f6](/jellyfin/jellyfin/pull/5918/commits/0e584f68409e71204f6b9387cde8efe2adb0fbed)`

```
…rated filename
```

4 hidden items

Load more…

[![nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=60&v=4)](/nielsvanvelzen)

**[nielsvanvelzen](/nielsvanvelzen)**
reviewed
[Oct 29, 2021](#pullrequestreview-793280240)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/73201ed498ade1b2731b58f7e8fe1f0aba54a3e5)

[Jellyfin.Api/Models/ClientLogDtos/ClientLogDocumentResponseDto.cs](/jellyfin/jellyfin/pull/5918/files/73201ed498ade1b2731b58f7e8fe1f0aba54a3e5#diff-d57b2627d060192da013cc847e76cf846934b04a6ecf35ebacba138254411f74)
Outdated

Show resolved

Hide resolved

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero) [![@nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=40&v=4)](/nielsvanvelzen)

`[Update Jellyfin.Api/Models/ClientLogDtos/ClientLogDocumentResponseDto.cs](/jellyfin/jellyfin/pull/5918/commits/f4844c08a523ea8879cb3abbc24c23b9a924dc9e "Update Jellyfin.Api/Models/ClientLogDtos/ClientLogDocumentResponseDto.cs

Co-authored-by: Niels van Velzen <nielsvanvelzen@users.noreply.github.com>")`
 …

`[f4844c0](/jellyfin/jellyfin/pull/5918/commits/f4844c08a523ea8879cb3abbc24c23b9a924dc9e)`

```
Co-authored-by: Niels van Velzen <nielsvanvelzen@users.noreply.github.com>
```

 [![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
[force-pushed](/jellyfin/jellyfin/compare/9749f01febd180753bc569aef3675b15a45273c0..f4844c08a523ea8879cb3abbc24c23b9a924dc9e)
the
client-logger

branch
from
[`9749f01`](/jellyfin/jellyfin/commit/9749f01febd180753bc569aef3675b15a45273c0) to
[`f4844c0`](/jellyfin/jellyfin/commit/f4844c08a523ea8879cb3abbc24c23b9a924dc9e)  [Compare](/jellyfin/jellyfin/compare/9749f01febd180753bc569aef3675b15a45273c0..f4844c08a523ea8879cb3abbc24c23b9a924dc9e)
[October 30, 2021 17:29](#event-5544174221)

[![nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=60&v=4)](/nielsvanvelzen)

**[nielsvanvelzen](/nielsvanvelzen)**
approved these changes
[Oct 30, 2021](#pullrequestreview-793591633)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/f4844c08a523ea8879cb3abbc24c23b9a924dc9e)

[![@jellyfin-bot](https://avatars.githubusercontent.com/u/45807407?s=40&u=a977d3150f817c3c9dd2f433f839456bdb4ff4ae&v=4)](/jellyfin-bot)
[jellyfin-bot](/jellyfin-bot)
added
the
[merge conflict](/jellyfin/jellyfin/labels/merge%20conflict)
Merge conflicts should be resolved before a merge
label
[Nov 1, 2021](#event-5549640131)

[![@nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=80&u=a4492a9e4a6719b7ebd44d51de7926c8819da652&v=4)](/nielsvanvelzen)

Copy link

Member

### **[nielsvanvelzen](/nielsvanvelzen)** commented [Nov 2, 2021](#issuecomment-958043226)

| [@crobibero](https://github.com/crobibero) can you rebase to fix the merge conflict and so we can see if [#6308](https://github.com/jellyfin/jellyfin/pull/6308) works? |
| --- |

All reactions

Sorry, something went wrong.

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Merge remote-tracking branch 'upstream/master' into client-logger](/jellyfin/jellyfin/pull/5918/commits/f444e93a56f6613baa8a722099159f2935d4d942 "Merge remote-tracking branch 'upstream/master' into client-logger")`

`[f444e93](/jellyfin/jellyfin/pull/5918/commits/f444e93a56f6613baa8a722099159f2935d4d942)`

[![@jellyfin-bot](https://avatars.githubusercontent.com/u/45807407?s=40&u=a977d3150f817c3c9dd2f433f839456bdb4ff4ae&v=4)](/jellyfin-bot)
[jellyfin-bot](/jellyfin-bot)
removed
the
[merge conflict](/jellyfin/jellyfin/labels/merge%20conflict)
Merge conflicts should be resolved before a merge
label
[Nov 2, 2021](#event-5558816473)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=80&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)

Copy link

Member

Author

### **[crobibero](/crobibero)** commented [Nov 3, 2021](#issuecomment-958469646) • edited Loading

| [@nielsvanvelzen](https://github.com/nielsvanvelzen)  Error: Resource not accessible by integration Error: See this action's readme for details about this error  Note: In public repositories this action does not work in pull\_request workflows when triggered by forks. Any attempt will be met with the error, Resource not accessible by integration. This is due to token restrictions put in place by GitHub Actions. Private repositories can be configured to enable workflows from forks to run without restriction. See here for further explanation. Alternatively, use the pull\_request\_target event to comment on pull requests. |
| --- |

 😕
1
 nielsvanvelzen reacted with confused emoji

All reactions

* 😕
  1 reaction

Sorry, something went wrong.

[![@jellyfin-bot](https://avatars.githubusercontent.com/u/45807407?s=40&u=a977d3150f817c3c9dd2f433f839456bdb4ff4ae&v=4)](/jellyfin-bot)
[jellyfin-bot](/jellyfin-bot)
added
the
[merge conflict](/jellyfin/jellyfin/labels/merge%20conflict)
Merge conflicts should be resolved before a merge
label
[Nov 3, 2021](#event-5561401038)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Merge branch 'master' into client-logger](/jellyfin/jellyfin/pull/5918/commits/3398f7f953864c47d66b49287fcc2b613b0c03de "Merge branch 'master' into client-logger")`

`[3398f7f](/jellyfin/jellyfin/pull/5918/commits/3398f7f953864c47d66b49287fcc2b613b0c03de)`

[![@jellyfin-bot](https://avatars.githubusercontent.com/u/45807407?s=40&u=a977d3150f817c3c9dd2f433f839456bdb4ff4ae&v=4)](/jellyfin-bot)
[jellyfin-bot](/jellyfin-bot)
removed
the
[merge conflict](/jellyfin/jellyfin/labels/merge%20conflict)
Merge conflicts should be resolved before a merge
label
[Nov 3, 2021](#event-5562093616)

[![cvium](https://avatars.githubusercontent.com/u/675118?s=60&v=4)](/cvium)

**[cvium](/cvium)**
reviewed
[Nov 5, 2021](#pullrequestreview-798934468)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/3398f7f953864c47d66b49287fcc2b613b0c03de)

[Jellyfin.Api/Controllers/ClientLogController.cs](/jellyfin/jellyfin/pull/5918/files/3398f7f953864c47d66b49287fcc2b613b0c03de#diff-2cea0a137aa1c0d17dc7d9fa3067b048dce5a5be11e5e3bda33ea5fccb819ab0)

|  |  | [ProducesResponseType(StatusCodes.Status403Forbidden)] |
| --- | --- | --- |
|  |  | public async Task<ActionResult> LogEvent([FromBody] ClientLogEventDto clientLogEventDto) |
|  |  | { |
|  |  | if (!\_serverConfigurationManager.Configuration.AllowClientLogUpload) |

Copy link

Member

### @cvium **[cvium](/cvium)** [Nov 5, 2021](#discussion_r743691838)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Could also have been a policy, but I'm also not a fan of the policies.

Sorry, something went wrong.

All reactions

[![cvium](https://avatars.githubusercontent.com/u/675118?s=60&v=4)](/cvium)

**[cvium](/cvium)**
reviewed
[Nov 5, 2021](#pullrequestreview-798937298)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/3398f7f953864c47d66b49287fcc2b613b0c03de)

[Jellyfin.Api/Controllers/ClientLogController.cs](/jellyfin/jellyfin/pull/5918/files/3398f7f953864c47d66b49287fcc2b613b0c03de#diff-2cea0a137aa1c0d17dc7d9fa3067b048dce5a5be11e5e3bda33ea5fccb819ab0)
Outdated

Show resolved

Hide resolved

 [![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
requested a review
from [cvium](/cvium)
[November 5, 2021 16:41](#event-5575569146)

[![@nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=80&u=a4492a9e4a6719b7ebd44d51de7926c8819da652&v=4)](/nielsvanvelzen)

Copy link

Member

### **[nielsvanvelzen](/nielsvanvelzen)** commented [Nov 5, 2021](#issuecomment-962138734)

| [@nielsvanvelzen](https://github.com/nielsvanvelzen)  Error: Resource not accessible by integration Error: See this action's readme for details about this error  Note: In public repositories this action does not work in pull\_request workflows when triggered by forks. Any attempt will be met with the error, Resource not accessible by integration. This is due to token restrictions put in place by GitHub Actions. Private repositories can be configured to enable workflows from forks to run without restriction. See here for further explanation. Alternatively, use the pull\_request\_target event to comment on pull requests.  This should be fixed now, do you want to rebase again so we can test it? |
| --- |

All reactions

Sorry, something went wrong.

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Use client info from claims](/jellyfin/jellyfin/pull/5918/commits/17264a6020774ac50b48bf5fe61ca9a3b1ec4d19 "Use client info from claims")`

`[17264a6](/jellyfin/jellyfin/pull/5918/commits/17264a6020774ac50b48bf5fe61ca9a3b1ec4d19)`

 [![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
[force-pushed](/jellyfin/jellyfin/compare/42d4e0d779d771e4808c3d2fc5a3d727b332bcd6..17264a6020774ac50b48bf5fe61ca9a3b1ec4d19)
the
client-logger

branch
from
[`42d4e0d`](/jellyfin/jellyfin/commit/42d4e0d779d771e4808c3d2fc5a3d727b332bcd6) to
[`17264a6`](/jellyfin/jellyfin/commit/17264a6020774ac50b48bf5fe61ca9a3b1ec4d19)  [Compare](/jellyfin/jellyfin/compare/42d4e0d779d771e4808c3d2fc5a3d727b332bcd6..17264a6020774ac50b48bf5fe61ca9a3b1ec4d19)
[November 5, 2021 18:57](#event-5576204494)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Merge remote-tracking branch 'upstream/master' into client-logger](/jellyfin/jellyfin/pull/5918/commits/d3d9311f486e2a33b40cf0db7958cf5faaf22124 "Merge remote-tracking branch 'upstream/master' into client-logger")`

`[d3d9311](/jellyfin/jellyfin/pull/5918/commits/d3d9311f486e2a33b40cf0db7958cf5faaf22124)`

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=80&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)

Copy link

Member

Author

### **[crobibero](/crobibero)** commented [Nov 5, 2021](#issuecomment-962283544)

| [@jellyfin-bot](https://github.com/jellyfin-bot) rebase |
| --- |

 👍
1
 jellyfin-bot reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Merge remote-tracking branch 'upstream/master' into client-logger](/jellyfin/jellyfin/pull/5918/commits/c8bd676b14d788f972499edb5f636189eebd3c70 "Merge remote-tracking branch 'upstream/master' into client-logger")`

`[c8bd676](/jellyfin/jellyfin/pull/5918/commits/c8bd676b14d788f972499edb5f636189eebd3c70)`

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=80&v=4)](/apps/github-actions)

Copy link

### **[github-actions](/apps/github-actions) bot** commented [Nov 6, 2021](#issuecomment-962392626)

| Changes in OpenAPI specification found. Expand to see details.What's New  ---  `POST` /ClientLog Post event from client. `POST` /ClientLog/Bulk Bulk post events from client. `POST` /ClientLog/Document Upload a document. What's Changed  ---  `GET` /System/ConfigurationReturn Type: Changed response : **200 OK**  Application configuration returned.   * Changed content type : `application/json`   openapi-base openapi-changes.md openapi-head Added property `AllowClientLogUpload` (boolean)  Gets or sets a value indicating whether clients should be allowed to upload logs.   * Changed content type : `application/json; profile="CamelCase"`   openapi-base openapi-changes.md openapi-head Added property `AllowClientLogUpload` (boolean)  Gets or sets a value indicating whether clients should be allowed to upload logs.   * Changed content type : `application/json; profile="PascalCase"`   openapi-base openapi-changes.md openapi-head Added property `AllowClientLogUpload` (boolean)  Gets or sets a value indicating whether clients should be allowed to upload logs. `POST` /System/ConfigurationRequest: Changed content type : `application/json`  Updated `ServerConfiguration` :   * Added property `AllowClientLogUpload` (boolean)   Gets or sets a value indicating whether clients should be allowed to upload logs.  Changed content type : `text/json`  Updated `ServerConfiguration` :   * Added property `AllowClientLogUpload` (boolean)   Gets or sets a value indicating whether clients should be allowed to upload logs.  Changed content type : `application/*+json`  Updated `ServerConfiguration` :   * Added property `AllowClientLogUpload` (boolean)   Gets or sets a value indicating whether clients should be allowed to upload logs. |
| --- |

 🎉
1
 nielsvanvelzen reacted with hooray emoji

All reactions

* 🎉
  1 reaction

Sorry, something went wrong.

[![cvium](https://avatars.githubusercontent.com/u/675118?s=60&v=4)](/cvium)

**[cvium](/cvium)**
reviewed
[Nov 7, 2021](#pullrequestreview-799550536)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/c8bd676b14d788f972499edb5f636189eebd3c70)

[MediaBrowser.Controller/ClientEvent/ClientEventLogger.cs](/jellyfin/jellyfin/pull/5918/files/c8bd676b14d788f972499edb5f636189eebd3c70#diff-cac448f2374cbef26fa58bd4485318b4193f8bd433e61322dfd9e526c5285141)
Outdated

Show resolved

Hide resolved

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Clean up redundant code](/jellyfin/jellyfin/pull/5918/commits/892b05c5e60b812d02177cef189d5ee7e858e9ab "Clean up redundant code")`

`[892b05c](/jellyfin/jellyfin/pull/5918/commits/892b05c5e60b812d02177cef189d5ee7e858e9ab)`

[![cvium](https://avatars.githubusercontent.com/u/675118?s=60&v=4)](/cvium)

**[cvium](/cvium)**
reviewed
[Nov 7, 2021](#pullrequestreview-799570679)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/892b05c5e60b812d02177cef189d5ee7e858e9ab)

[MediaBrowser.Controller/ClientEvent/ClientEventLogger.cs](/jellyfin/jellyfin/pull/5918/files/892b05c5e60b812d02177cef189d5ee7e858e9ab#diff-cac448f2374cbef26fa58bd4485318b4193f8bd433e61322dfd9e526c5285141)
Outdated

Show resolved

Hide resolved

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&v=4)](/crobibero)

`[Add randomization to generated filename](/jellyfin/jellyfin/pull/5918/commits/666e95e27f92eabb15d6ab7ae399bdbb95eeb318 "Add randomization to generated filename")`

`[666e95e](/jellyfin/jellyfin/pull/5918/commits/666e95e27f92eabb15d6ab7ae399bdbb95eeb318)`

[![cvium](https://avatars.githubusercontent.com/u/675118?s=60&v=4)](/cvium)

**[cvium](/cvium)**
approved these changes
[Nov 8, 2021](#pullrequestreview-799736590)

 [View reviewed changes](/jellyfin/jellyfin/pull/5918/files/666e95e27f92eabb15d6ab7ae399bdbb95eeb318)

[![@cvium](https://avatars.githubusercontent.com/u/675118?s=40&u=65104380a94d969b21efa7080e018a4367831fdc&v=4)](/cvium)
[cvium](/cvium)
merged commit [`0ee43f8`](/jellyfin/jellyfin/commit/0ee43f897b4c06c23cb741e85908527a46687769)
into
jellyfin:master

[Nov 8, 2021](https://github.com/jellyfin/jellyfin/pull/5918#event-5580709083)

 [![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
deleted the
client-logger

branch
[November 8, 2021 13:52](#event-5583057270)

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=40&u=332b1c3c2d92a2597649e80972d0b88366e17a80&v=4)](/crobibero)
[crobibero](/crobibero)
mentioned this pull request
[Nov 20, 2021](#ref-pullrequest-1059172321)

[Remove ClientLog endpoints
#6879](/jellyfin/jellyfin/pull/6879)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fpull%2F5918)

Reviewers

[![@dkanada](https://avatars.githubusercontent.com/u/21353219?s=40&v=4)](/dkanada) [dkanada](/dkanada)

dkanada left review comments

[![@BaronGreenback](https://avatars.githubusercontent.com/u/22121540?s=40&v=4)](/BaronGreenback) [BaronGreenback](/BaronGreenback)

BaronGreenback approved these changes

[![@daullmer](https://avatars.githubusercontent.com/u/16425113?s=40&v=4)](/daullmer) [daullmer](/daullmer)

daullmer approved these changes

[![@nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=40&v=4)](/nielsvanvelzen) [nielsvanvelzen](/nielsvanvelzen)

nielsvanvelzen approved these changes

[![@cvium](https://avatars.githubusercontent.com/u/675118?s=40&v=4)](/cvium) [cvium](/cvium)

cvium approved these changes

[![@Bond-009](https://avatars.githubusercontent.com/u/21289123?s=40&v=4)](/Bond-009) [Bond-009](/Bond-009)

 Awaiting requested review from Bond-009

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

 [Allow clients to send log messages to server](https://github.com/jellyfin/jellyfin/issues/5646)

9 participants

[![@crobibero](https://avatars.githubusercontent.com/u/24963659?s=52&v=4)](/crobibero) [![@dkanada](https://avatars.githubusercontent.com/u/21353219?s=52&v=4)](/dkanada) [![@BaronGreenback](https://avatars.githubusercontent.com/u/22121540?s=52&v=4)](/BaronGreenback) [![@Shadowghost](https://avatars.githubusercontent.com/u/3741446?s=52&v=4)](/Shadowghost) [![@nielsvanvelzen](https://avatars.githubusercontent.com/u/2305178?s=52&v=4)](/nielsvanvelzen) [![@cvium](https://avatars.githubusercontent.com/u/675118?s=52&v=4)](/cvium) [![@daullmer](https://avatars.githubusercontent.com/u/16425113?s=52&v=4)](/daullmer) [![@jbatt33](https://avatars.githubusercontent.com/u/41477628?s=52&v=4)](/jbatt33) [![@jellyfin-bot](https://avatars.githubusercontent.com/u/45807407?s=52&v=4)](/jellyfin-bot)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_08788b17_20250114_201524.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin-web%2Fsecurity%2Fadvisories%2FGHSA-89hp-h43h-r5pq)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin-web%2Fsecurity%2Fadvisories%2FGHSA-89hp-h43h-r5pq)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=jellyfin%2Fjellyfin-web)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jellyfin](/jellyfin)
/
**[jellyfin-web](/jellyfin/jellyfin-web)**
Public

* [Notifications](/login?return_to=%2Fjellyfin%2Fjellyfin-web) You must be signed in to change notification settings
* [Fork
  1.3k](/login?return_to=%2Fjellyfin%2Fjellyfin-web)
* [Star
   2.5k](/login?return_to=%2Fjellyfin%2Fjellyfin-web)

* [Code](/jellyfin/jellyfin-web)
* [Issues
  250](/jellyfin/jellyfin-web/issues)
* [Pull requests
  120](/jellyfin/jellyfin-web/pulls)
* [Discussions](/jellyfin/jellyfin-web/discussions)
* [Actions](/jellyfin/jellyfin-web/actions)
* [Projects
  2](/jellyfin/jellyfin-web/projects)
* [Security](/jellyfin/jellyfin-web/security)
* [Insights](/jellyfin/jellyfin-web/pulse)

Additional navigation options

* [Code](/jellyfin/jellyfin-web)
* [Issues](/jellyfin/jellyfin-web/issues)
* [Pull requests](/jellyfin/jellyfin-web/pulls)
* [Discussions](/jellyfin/jellyfin-web/discussions)
* [Actions](/jellyfin/jellyfin-web/actions)
* [Projects](/jellyfin/jellyfin-web/projects)
* [Security](/jellyfin/jellyfin-web/security)
* [Insights](/jellyfin/jellyfin-web/pulse)

# Stored XSS vulnerability in devices.js

Critical

[joshuaboniface](/joshuaboniface)
published
GHSA-89hp-h43h-r5pq
Apr 23, 2023

## Package

jellyfin-web

## Affected versions

> 10.1.0

## Patched versions

10.8.10

## Description

### Impact

Frederic Linn (@FredericLinn) has reported a series of vulnerabilities that can result in directory traversal, file write, and potential remote code execution on Jellyfin instances. The general process involves chaining several vulnerabilities and can be done by an unprivileged user.

This advisory covers a stored XSS in device.js, which can be used to make arbitrary calls to the `REST` endpoints with admin privileges.

When combined with the ability to write arbitrary content into a logfile via [this](https://github.com/jellyfin/jellyfin/blob/22d880662283980dec994cd7d35fe269613bfce3/Jellyfin.Api/Controllers/ClientLogController.cs#L44) endpoint, this results in remote code execution on the Jellyfin instance in the context of the user who's running it.

Details to be provide at a future time.

### Patches

10.8.10

### Workarounds

N/A

### References

A complete write-up is available here: <https://gebir.ge/blog/peanut-butter-jellyfin-time/>

### Severity

Critical

### CVE ID

CVE-2023-30627

### Weaknesses

No CWEs

### Credits

* [![@theGEBIRGE](https://avatars.githubusercontent.com/u/36849099?s=40&v=4)](/theGEBIRGE)
  [theGEBIRGE](/theGEBIRGE)
  Finder

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f4acab83_20250114_201526.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fblob%2F22d880662283980dec994cd7d35fe269613bfce3%2FJellyfin.Api%2FControllers%2FClientLogController.cs)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fblob%2F22d880662283980dec994cd7d35fe269613bfce3%2FJellyfin.Api%2FControllers%2FClientLogController.cs)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=jellyfin%2Fjellyfin)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jellyfin](/jellyfin)
/
**[jellyfin](/jellyfin/jellyfin)**
Public

* [Notifications](/login?return_to=%2Fjellyfin%2Fjellyfin) You must be signed in to change notification settings
* [Fork
  3.3k](/login?return_to=%2Fjellyfin%2Fjellyfin)
* [Star
   36.5k](/login?return_to=%2Fjellyfin%2Fjellyfin)

* [Code](/jellyfin/jellyfin)
* [Issues
  458](/jellyfin/jellyfin/issues)
* [Pull requests
  149](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects
  2](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

Additional navigation options

* [Code](/jellyfin/jellyfin)
* [Issues](/jellyfin/jellyfin/issues)
* [Pull requests](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

## Files

 22d8806
## Breadcrumbs

1. [jellyfin](/jellyfin/jellyfin/tree/22d880662283980dec994cd7d35fe269613bfce3)
2. /[Jellyfin.Api](/jellyfin/jellyfin/tree/22d880662283980dec994cd7d35fe269613bfce3/Jellyfin.Api)
3. /[Controllers](/jellyfin/jellyfin/tree/22d880662283980dec994cd7d35fe269613bfce3/Jellyfin.Api/Controllers)
/
# ClientLogController.cs

Copy path Blame  Blame
## Latest commit

## History

[History](/jellyfin/jellyfin/commits/22d880662283980dec994cd7d35fe269613bfce3/Jellyfin.Api/Controllers/ClientLogController.cs)78 lines (70 loc) · 2.99 KB 22d8806
## Breadcrumbs

1. [jellyfin](/jellyfin/jellyfin/tree/22d880662283980dec994cd7d35fe269613bfce3)
2. /[Jellyfin.Api](/jellyfin/jellyfin/tree/22d880662283980dec994cd7d35fe269613bfce3/Jellyfin.Api)
3. /[Controllers](/jellyfin/jellyfin/tree/22d880662283980dec994cd7d35fe269613bfce3/Jellyfin.Api/Controllers)
/
# ClientLogController.cs

Top
## File metadata and controls

* Code
* Blame

78 lines (70 loc) · 2.99 KB[Raw](https://github.com/jellyfin/jellyfin/raw/22d880662283980dec994cd7d35fe269613bfce3/Jellyfin.Api/Controllers/ClientLogController.cs)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778﻿using System.Net.Mime;using System.Threading.Tasks;using Jellyfin.Api.Attributes;using Jellyfin.Api.Extensions;using Jellyfin.Api.Models.ClientLogDtos;using MediaBrowser.Controller.ClientEvent;using MediaBrowser.Controller.Configuration;using Microsoft.AspNetCore.Authorization;using Microsoft.AspNetCore.Http;using Microsoft.AspNetCore.Mvc;
namespace Jellyfin.Api.Controllers;
/// <summary>/// Client log controller./// </summary>[Authorize]public class ClientLogController : BaseJellyfinApiController{ private const int MaxDocumentSize = 1\_000\_000; private readonly IClientEventLogger \_clientEventLogger; private readonly IServerConfigurationManager \_serverConfigurationManager;
 /// <summary> /// Initializes a new instance of the <see cref="ClientLogController"/> class. /// </summary> /// <param name="clientEventLogger">Instance of the <see cref="IClientEventLogger"/> interface.</param> /// <param name="serverConfigurationManager">Instance of the <see cref="IServerConfigurationManager"/> interface.</param> public ClientLogController( IClientEventLogger clientEventLogger, IServerConfigurationManager serverConfigurationManager) { \_clientEventLogger = clientEventLogger; \_serverConfigurationManager = serverConfigurationManager; }
 /// <summary> /// Upload a document. /// </summary> /// <response code="200">Document saved.</response> /// <response code="403">Event logging disabled.</response> /// <response code="413">Upload size too large.</response> /// <returns>Create response.</returns> [HttpPost("Document")] [ProducesResponseType(typeof(ClientLogDocumentResponseDto), StatusCodes.Status200OK)] [ProducesResponseType(StatusCodes.Status403Forbidden)] [ProducesResponseType(StatusCodes.Status413PayloadTooLarge)] [AcceptsFile(MediaTypeNames.Text.Plain)] [RequestSizeLimit(MaxDocumentSize)] public async Task<ActionResult<ClientLogDocumentResponseDto>> LogFile() { if (!\_serverConfigurationManager.Configuration.AllowClientLogUpload) { return Forbid(); }
 if (Request.ContentLength > MaxDocumentSize) { // Manually validate to return proper status code. return StatusCode(StatusCodes.Status413PayloadTooLarge, $"Payload must be less than {MaxDocumentSize:N0} bytes"); }
 var (clientName, clientVersion) = GetRequestInformation(); var fileName = await \_clientEventLogger.WriteDocumentAsync(clientName, clientVersion, Request.Body) .ConfigureAwait(false); return Ok(new ClientLogDocumentResponseDto(fileName)); }
 private (string ClientName, string ClientVersion) GetRequestInformation() { var clientName = HttpContext.User.GetClient() ?? "unknown-client"; var clientVersion = HttpContext.User.GetIsApiKey() ? "apikey" : HttpContext.User.GetVersion() ?? "unknown-version";
 return (clientName, clientVersion); }}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_d3637c4e_20250114_201533.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Freleases%2Ftag%2Fv10.8.10)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Freleases%2Ftag%2Fv10.8.10)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=jellyfin%2Fjellyfin)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jellyfin](/jellyfin)
/
**[jellyfin](/jellyfin/jellyfin)**
Public

* [Notifications](/login?return_to=%2Fjellyfin%2Fjellyfin) You must be signed in to change notification settings
* [Fork
  3.3k](/login?return_to=%2Fjellyfin%2Fjellyfin)
* [Star
   36.5k](/login?return_to=%2Fjellyfin%2Fjellyfin)

* [Code](/jellyfin/jellyfin/tree/v10.8.10)
* [Issues
  458](/jellyfin/jellyfin/issues)
* [Pull requests
  149](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects
  2](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

Additional navigation options

* [Code](/jellyfin/jellyfin/tree/v10.8.10)
* [Issues](/jellyfin/jellyfin/issues)
* [Pull requests](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

1. [Releases](/jellyfin/jellyfin/releases)
2. [v10.8.10](/jellyfin/jellyfin/releases/tag/v10.8.10)

# 10.8.10

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/jellyfin/jellyfin/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v10.8.10)

 Loading

[View all tags](/jellyfin/jellyfin/tags)

![@joshuaboniface](https://avatars.githubusercontent.com/u/4031396?s=40&v=4)
[joshuaboniface](/joshuaboniface)
released this
23 Apr 15:40

·
[38 commits](/jellyfin/jellyfin/compare/v10.8.10...release-10.8.z)
to release-10.8.z
since this release

[v10.8.10](/jellyfin/jellyfin/tree/v10.8.10)

[`2cd29d1`](/jellyfin/jellyfin/commit/2cd29d1cfd5cb2586aab3862e857dc85e0117ca4)

# Jellyfin 10.8.10

Stable hotfix release for 10.8.z release branch.

## New Features and Major Improvements

* CRITICAL SECURITY ADVISORY: [GHSA-9p5f-5x8v-x65m](https://github.com/jellyfin/jellyfin/security/advisories/GHSA-9p5f-5x8v-x65m) and [GHSA-89hp-h43h-r5pq](https://github.com/jellyfin/jellyfin-web/security/advisories/GHSA-89hp-h43h-r5pq) can be combined to allow remote code execution for *any authenticated Jellyfin user including non-admin users*. While the particular execution mechanism of the former dates to the 10.8.0 release, the latter was present for all Jellyfin releases before this point. It is thus absolutely critical for all Jellyfin administrators, regardless of version, to upgrade to this version if they allow any untrusted users and/or expose their instance to the Internet.

## Release Notes

N/A

## Changelog

GitHub Project: <https://github.com/orgs/jellyfin/projects/29>

### [jellyfin](https://github.com/jellyfin/jellyfin) [12]

Note: Dependabot automatic PRs are excluded from this list.

* [GHSA-9p5f-5x8v-x65m](https://github.com/jellyfin/jellyfin/security/advisories/GHSA-9p5f-5x8v-x65m) [[@daullmer](https://github.com/daullmer)] Throw exception on path traversal in WriteDocumentAsync
* [#9671](https://github.com/jellyfin/jellyfin/pull/9671) [[@nyanmisaka](https://github.com/nyanmisaka)] Fix the canvas size for DVBSUB and DVDSUB subtitles
* [#9642](https://github.com/jellyfin/jellyfin/pull/9642) [[@nyanmisaka](https://github.com/nyanmisaka)] Fix the brightness of VPP tonemap and add the tonemap mode
* [#9538](https://github.com/jellyfin/jellyfin/pull/9538) [[@TheTyrius](https://github.com/TheTyrius)] Fix nvenc preset order
* [#9430](https://github.com/jellyfin/jellyfin/pull/9430) [[@nyanmisaka](https://github.com/nyanmisaka)] Fix Live TV hardware decoding
* [#9422](https://github.com/jellyfin/jellyfin/pull/9422) [[@nyanmisaka](https://github.com/nyanmisaka)] Fix stream map when using filter\_complex with unlabeled output
* [#9411](https://github.com/jellyfin/jellyfin/pull/9411) [[@nyanmisaka](https://github.com/nyanmisaka)] Fix codec checking in CodecProfiles conditions
* [#9409](https://github.com/jellyfin/jellyfin/pull/9409) [[@Shadowghost](https://github.com/Shadowghost)] Multiple HLS codec and bitrate fixes (10.8.z)
* [#9391](https://github.com/jellyfin/jellyfin/pull/9391) [[@nyanmisaka](https://github.com/nyanmisaka)] Fix H.264 baseline hwaccel and enable enhanced Nvdec by default
* [#9355](https://github.com/jellyfin/jellyfin/pull/9355) [[@nyanmisaka](https://github.com/nyanmisaka)] Some VAAPI VPP and OpenCL fixes
* [#9351](https://github.com/jellyfin/jellyfin/pull/9351) [[@Shadowghost](https://github.com/Shadowghost)] Fix EqualsAny condition check for int and double

### [jellyfin-web](https://github.com/jellyfin/jellyfin-web) [11]

Note: Dependabot automatic PRs are excluded from this list.

* [GHSA-89hp-h43h-r5pq](https://github.com/jellyfin/jellyfin-web/security/advisories/GHSA-89hp-h43h-r5pq) [[@iwalton3](https://github.com/iwalton3)] Escape device id in raw HTML
* [jellyfin/jellyfin-web#4492](https://github.com/jellyfin/jellyfin-web/pull/4492) [[@nyanmisaka](https://github.com/nyanmisaka)] Add the tonemap mode options
* [jellyfin/jellyfin-web#4487](https://github.com/jellyfin/jellyfin-web/pull/4487) [[@thornbill](https://github.com/thornbill)] Fix dead documentation link
* [jellyfin/jellyfin-web#4395](https://github.com/jellyfin/jellyfin-web/pull/4395) [[@thornbill](https://github.com/thornbill)] Fix installed plugin version html
* [jellyfin/jellyfin-web#4385](https://github.com/jellyfin/jellyfin-web/pull/4385) [[@nyanmisaka](https://github.com/nyanmisaka)] Drop progressive transcoding in web client
* [jellyfin/jellyfin-web#4362](https://github.com/jellyfin/jellyfin-web/pull/4362) [[@dmitrylyzo](https://github.com/dmitrylyzo)] Fix subtitle offset reset when seeking progressive stream
* [jellyfin/jellyfin-web#4356](https://github.com/jellyfin/jellyfin-web/pull/4356) [[@dmitrylyzo](https://github.com/dmitrylyzo)] Babelify @jellyfin/libass-wasm
* [jellyfin/jellyfin-web#4330](https://github.com/jellyfin/jellyfin-web/pull/4330) [[@dmitrylyzo](https://github.com/dmitrylyzo)] Fix navigation for some types of INPUT
* [jellyfin/jellyfin-web#4312](https://github.com/jellyfin/jellyfin-web/pull/4312) [[@dmitrylyzo](https://github.com/dmitrylyzo)] Backport PR [#4150](https://github.com/jellyfin/jellyfin/pull/4150) to 10.8.z branch
* [jellyfin/jellyfin-web#4310](https://github.com/jellyfin/jellyfin-web/pull/4310) [[@jsayol](https://github.com/jsayol)] Backport PR [#4147](https://github.com/jellyfin/jellyfin/pull/4147) to 10.8.z branch

### Contributors

* [![@jsayol](https://avatars.githubusercontent.com/u/2029586?s=64&v=4)](https://github.com/jsayol)
* [![@thornbill](https://avatars.githubusercontent.com/u/3450688?s=64&v=4)](https://github.com/thornbill)
* [![@Shadowghost](https://avatars.githubusercontent.com/u/3741446?s=64&v=4)](https://github.com/Shadowghost)
* [![@iwalton3](https://avatars.githubusercontent.com/u/8078788?s=64&v=4)](https://github.com/iwalton3)
* [![@nyanmisaka](https://avatars.githubusercontent.com/u/14953024?s=64&v=4)](https://github.com/nyanmisaka)
* [![@TheTyrius](https://avatars.githubusercontent.com/u/16269108?s=64&v=4)](https://github.com/TheTyrius)
* [![@daullmer](https://avatars.githubusercontent.com/u/16425113?s=64&v=4)](https://github.com/daullmer)
* [![@dmitrylyzo](https://avatars.githubusercontent.com/u/56478732?s=64&v=4)](https://github.com/dmitrylyzo)

jsayol, thornbill, and 6 other contributors

 Assets
2

 Loading

 👍
64
 SigHunter, goremykin, panzer-arc, qwerty12, zkhcohen, Hukuma1, AirBair, foss-, cewert, gomaaz, and 54 more reacted with thumbs up emoji
 🎉
6
 confused-Techie, plamendelchev, silentTeee, dabohda, Milokita, and mohsenunique reacted with hooray emoji
 ❤️
11
 nofxy, srvzack, Morethanevil, GeoffreyCoulaud, Extarys, plamendelchev, dabohda, MisterMustache, joperezr, xiaodehenlang, and alexandervantrijffel reacted with heart emoji
 🚀
9
 TimGels, goremykin, gomaaz, InvisibleRain, tuankietnguyen, nevrending, plamendelchev, dabohda, and mbarreradev reacted with rocket emoji
 👀
7
 Freeman77, jmhbnz, Gauvino, VaiTon, D-04, abstractionmage, and manakill reacted with eyes emoji

All reactions

* 👍
  64 reactions
* 🎉
  6 reactions
* ❤️
  11 reactions
* 🚀
  9 reactions
* 👀
  7 reactions

 83 people reacted

0

 [Join discussion](/jellyfin/jellyfin/discussions/9673)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_8845fbd7_20250114_201527.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fcommit%2F82ad2633fdfb1c37a158057c7935f83e1129eda7)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fcommit%2F82ad2633fdfb1c37a158057c7935f83e1129eda7)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=jellyfin%2Fjellyfin)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jellyfin](/jellyfin)
/
**[jellyfin](/jellyfin/jellyfin)**
Public

* [Notifications](/login?return_to=%2Fjellyfin%2Fjellyfin) You must be signed in to change notification settings
* [Fork
  3.3k](/login?return_to=%2Fjellyfin%2Fjellyfin)
* [Star
   36.5k](/login?return_to=%2Fjellyfin%2Fjellyfin)

* [Code](/jellyfin/jellyfin)
* [Issues
  458](/jellyfin/jellyfin/issues)
* [Pull requests
  149](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects
  2](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

Additional navigation options

* [Code](/jellyfin/jellyfin)
* [Issues](/jellyfin/jellyfin/issues)
* [Pull requests](/jellyfin/jellyfin/pulls)
* [Discussions](/jellyfin/jellyfin/discussions)
* [Actions](/jellyfin/jellyfin/actions)
* [Projects](/jellyfin/jellyfin/projects)
* [Security](/jellyfin/jellyfin/security)
* [Insights](/jellyfin/jellyfin/pulse)

## Commit

[Permalink](/jellyfin/jellyfin/commit/82ad2633fdfb1c37a158057c7935f83e1129eda7)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-9p5f-5x8v-x65m](https://github.com/advisories/GHSA-9p5f-5x8v-x65m "GHSA-9p5f-5x8v-x65m")

[Browse files](/jellyfin/jellyfin/tree/82ad2633fdfb1c37a158057c7935f83e1129eda7)
Browse the repository at this point in the history

```
Throw exception on path traversal in WriteDocumentAsync
```

* Loading branch information

[![@joshuaboniface](https://avatars.githubusercontent.com/u/4031396?s=40&v=4)](/joshuaboniface)

[joshuaboniface](/jellyfin/jellyfin/commits?author=joshuaboniface "View all commits by joshuaboniface")
authored
Apr 23, 2023

2 parents
[d5a8419](/jellyfin/jellyfin/commit/d5a8419bc52ba06c070012849ba166dd2fbff8b0)
+
[faac37b](/jellyfin/jellyfin/commit/faac37bcf9f3497ada36747ede180c6a0c2b7aa1)

commit 82ad263

Showing
**1 changed file**
with
**5 additions**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

5 changes: 5 additions & 0 deletions

5
[MediaBrowser.Controller/ClientEvent/ClientEventLogger.cs](#diff-cac448f2374cbef26fa58bd4485318b4193f8bd433e61322dfd9e526c5285141 "MediaBrowser.Controller/ClientEvent/ClientEventLogger.cs")

Show comments

[View file](/jellyfin/jellyfin/blob/82ad2633fdfb1c37a158057c7935f83e1129eda7/MediaBrowser.Controller/ClientEvent/ClientEventLogger.cs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -23,6 +23,11 @@ public async Task<string> WriteDocumentAsync(string clientName, string clientVer |
|  |  | { |
|  |  | var fileName = $"upload\_{clientName}\_{clientVersion}\_{DateTime.UtcNow:yyyyMMddHHmmss}\_{Guid.NewGuid():N}.log"; |
|  |  | var logFilePath = Path.Combine(\_applicationPaths.LogDirectoryPath, fileName); |
|  |  | if (!Path.GetFullPath(logFilePath).StartsWith(\_applicationPaths.LogDirectoryPath, StringComparison.Ordinal)) |
|  |  | { |
|  |  | throw new ArgumentException("Path resolved to filename not in log directory"); |
|  |  | } |
|  |  |  |
|  |  | await using var fileStream = new FileStream(logFilePath, FileMode.CreateNew, FileAccess.Write, FileShare.None); |
|  |  | await fileContents.CopyToAsync(fileStream).ConfigureAwait(false); |
|  |  | return fileName; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `82ad263`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjellyfin%2Fjellyfin%2Fcommit%2F82ad2633fdfb1c37a158057c7935f83e1129eda7) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


