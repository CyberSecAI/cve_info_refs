=== Content from github.com_cf3867b5_20250121_002710.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjbeder%2Fyaml-cpp%2Fissues%2F657)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjbeder%2Fyaml-cpp%2Fissues%2F657)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=jbeder%2Fyaml-cpp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jbeder](/jbeder)
/
**[yaml-cpp](/jbeder/yaml-cpp)**
Public

* [Notifications](/login?return_to=%2Fjbeder%2Fyaml-cpp) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Fjbeder%2Fyaml-cpp)
* [Star
   5.3k](/login?return_to=%2Fjbeder%2Fyaml-cpp)

* [Code](/jbeder/yaml-cpp)
* [Issues
  253](/jbeder/yaml-cpp/issues)
* [Pull requests
  45](/jbeder/yaml-cpp/pulls)
* [Actions](/jbeder/yaml-cpp/actions)
* [Projects
  0](/jbeder/yaml-cpp/projects)
* [Wiki](/jbeder/yaml-cpp/wiki)
* [Security](/jbeder/yaml-cpp/security)
* [Insights](/jbeder/yaml-cpp/pulse)

Additional navigation options

* [Code](/jbeder/yaml-cpp)
* [Issues](/jbeder/yaml-cpp/issues)
* [Pull requests](/jbeder/yaml-cpp/pulls)
* [Actions](/jbeder/yaml-cpp/actions)
* [Projects](/jbeder/yaml-cpp/projects)
* [Wiki](/jbeder/yaml-cpp/wiki)
* [Security](/jbeder/yaml-cpp/security)
* [Insights](/jbeder/yaml-cpp/pulse)

# Recursive Stack Frames: HandleCompactMap, HandleMap, HandleFlowSequence, HandleSequence, HandleNode #657

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Recursive Stack Frames: HandleCompactMap, HandleMap, HandleFlowSequence, HandleSequence, HandleNode](#top)#657Copy link![@wcventure](https://avatars.githubusercontent.com/u/35592824?u=032e07bb222aef08f9deb6bd7440a13bb92d2d77&v=4&size=80)
## Description

![@wcventure](https://avatars.githubusercontent.com/u/35592824?u=032e07bb222aef08f9deb6bd7440a13bb92d2d77&v=4&size=48)[wcventure](https://github.com/wcventure)opened [on Jan 2, 2019](https://github.com/jbeder/yaml-cpp/issues/657#issue-395264845)

Hi there,

An issue was discovered in singledocparser.cpp, as distributed in yaml-cpp v0.6.2. Stack Exhaustion occurs in the YAML::SingleDocParser, and there is a stack consumption problem caused by recursive stack frames: HandleCompactMap, HandleMap, HandleFlowSequence, HandleSequence, HandleNode.

Here is the POC file. Please use "./parse $POC" to reproduce the bug

[POC.zip](https://github.com/jbeder/yaml-cpp/files/2720978/POC.zip)

$git log

```
commit abf941b20d21342cd207df0f8ffe09f41a4d3042
Author: Simon Gene Gottlieb <simon@gottliebtfreitag.de>
Date:   Fri Dec 21 15:05:19 2018 +0100

    Fix float precision (#649)

    The issue is that numbers like
    2.01 or 3.01 can not be precisely represented with binary floating point
    numbers.

    This replaces all occurrences of 'std::numeric_limits<T>::digits10 + 1' with
    'std::numeric_limits<T>::max_digits10'.

    Background:
    Using 'std::numeric_limits<T>::digits10 + 1' is not precise enough.
    Converting a 'float' into a 'string' and back to a 'float' will not always
    produce the original 'float' value. To guarantee that the 'string'
    representation has sufficient precision the value
    'std::numeric_limits<T>::max_digits10' has to be used.

```

I have confirmed them with address sanitizer too.

```
AddressSanitizer:DEADLYSIGNAL
=================================================================
==79337==ERROR: AddressSanitizer: stack-overflow on address 0x7fff38e3dff8 (pc 0x000000432d12 bp 0x7fff38e3e890 sp 0x7fff38e3e000 T0)
    #0 0x432d11 in __asan::Allocator::Allocate(unsigned long, unsigned long, __sanitizer::BufferedStackTrace*, __asan::AllocType, bool) /home/wencheng/Documents/llvm-6.0.1/projects/compiler-rt/lib/asan/asan_allocator.cc:396
    #1 0x42d247 in __asan::asan_memalign(unsigned long, unsigned long, __sanitizer::BufferedStackTrace*, __asan::AllocType) /home/wencheng/Documents/llvm-6.0.1/projects/compiler-rt/lib/asan/asan_allocator.cc:900
    #2 0x52015f in operator new(unsigned long) /home/wencheng/Documents/llvm-6.0.1/projects/compiler-rt/lib/asan/asan_new_delete.cc:92
    #3 0x54a3d4 in YAML::detail::memory::create_node() /yaml-cpp/src/memory.cpp:17:21
    #4 0x537988 in YAML::detail::memory_holder::create_node() /yaml-cpp/include/yaml-cpp/node/detail/memory.h:37:43
    #5 0x535208 in YAML::NodeBuilder::Push(YAML::Mark const&, unsigned long) /yaml-cpp/src/nodebuilder.cpp:77:35
    #6 0x536389 in YAML::NodeBuilder::OnMapStart(YAML::Mark const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, YAML::EmitterStyle::value) /yaml-cpp/src/nodebuilder.cpp:63:24
    #7 0x5c797f in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:120:22
    #8 0x5cac0c in YAML::SingleDocParser::HandleFlowSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:199:5
    #9 0x5c8fcb in YAML::SingleDocParser::HandleSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:143:7
    #10 0x5c706e in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:98:7
    #11 0x5ce59e in YAML::SingleDocParser::HandleCompactMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:330:3
    #12 0x5c8412 in YAML::SingleDocParser::HandleMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:226:7
    #13 0x5c79c3 in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:121:9
	...
	...
    #222 0x5c8412 in YAML::SingleDocParser::HandleMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:226:7
    #223 0x5c79c3 in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:121:9
    #224 0x5cac0c in YAML::SingleDocParser::HandleFlowSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:199:5
    #225 0x5c8fcb in YAML::SingleDocParser::HandleSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:143:7
    #226 0x5c706e in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:98:7
    #227 0x5ce59e in YAML::SingleDocParser::HandleCompactMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:330:3
    #228 0x5c8412 in YAML::SingleDocParser::HandleMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:226:7
    #229 0x5c79c3 in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:121:9
    #230 0x5cac0c in YAML::SingleDocParser::HandleFlowSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:199:5
    #231 0x5c8fcb in YAML::SingleDocParser::HandleSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:143:7
    #232 0x5c706e in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:98:7
    #233 0x5ce59e in YAML::SingleDocParser::HandleCompactMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:330:3
    #234 0x5c8412 in YAML::SingleDocParser::HandleMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:226:7
    #235 0x5c79c3 in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:121:9
    #236 0x5cac0c in YAML::SingleDocParser::HandleFlowSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:199:5
    #237 0x5c8fcb in YAML::SingleDocParser::HandleSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:143:7
    #238 0x5c706e in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:98:7
    #239 0x5ce59e in YAML::SingleDocParser::HandleCompactMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:330:3
    #240 0x5c8412 in YAML::SingleDocParser::HandleMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:226:7
    #241 0x5c79c3 in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:121:9
    #242 0x5cac0c in YAML::SingleDocParser::HandleFlowSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:199:5
    #243 0x5c8fcb in YAML::SingleDocParser::HandleSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:143:7
    #244 0x5c706e in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:98:7
    #245 0x5ce59e in YAML::SingleDocParser::HandleCompactMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:330:3
    #246 0x5c8412 in YAML::SingleDocParser::HandleMap(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:226:7
    #247 0x5c79c3 in YAML::SingleDocParser::HandleNode(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:121:9
    #248 0x5cac0c in YAML::SingleDocParser::HandleFlowSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:199:5
    #249 0x5c8fcb in YAML::SingleDocParser::HandleSequence(YAML::EventHandler&) /yaml-cpp/src/singledocparser.cpp:143:7

SUMMARY: AddressSanitizer: stack-overflow /home/wencheng/Documents/llvm-6.0.1/projects/compiler-rt/lib/asan/asan_allocator.cc:396 in __asan::Allocator::Allocate(unsigned long, unsigned long, __sanitizer::BufferedStackTrace*, __asan::AllocType, bool)
==79337==ABORTING

```
## Metadata

### Assignees

No one assigned

### Labels

No labelsNo labels
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


