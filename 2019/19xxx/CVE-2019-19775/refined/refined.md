```text
RELATED
```

### Vulnerability Summary:
The image thumbnailing handler in Zulip Server versions 1.9.0 to before 2.0.8 allowed an open redirect that was visible to logged-in users.

### Root Cause:
The `generate_thumbnail_url` function in `zerver/lib/thumbnail.py` doesn't properly validate the URL, resulting in an open redirect vulnerability.

### Attack Vector:
An attacker could craft a malicious URL and pass it to the thumbnail view. If a logged-in user visits this crafted URL, they could be redirected to an arbitrary external website.

### Impact:
Successful exploitation results in an open redirect, potentially leading to phishing attacks or other malicious activities.

### Affected Versions:
Zulip Server versions 1.9.0 to before 2.0.8.

### Mitigation:
Upgrade to Zulip Server version 2.0.8 or later.

### Technical Details:
The fix involves changes to `zerver/lib/thumbnail.py` to prevent the open redirect. Specifically, the code now ensures that if thumbor is disabled, the URL is properly handled to avoid redirection to an external site. Additionally, checks are added to validate the URL scheme and net location to prevent unintended redirects.
```