=== Content from cdn.kernel.org_5d0cd825_20250121_000653.html ===
commit 5f8bc2bb0e0f456e2217bbd1caac2acf211431c9
Author: Greg Kroah-Hartman
Date: Wed Dec 4 22:31:09 2019 +0100
Linux 5.4.2
commit e64cd7a033436300a1e4aee982d6530bd708f465
Author: Hans de Goede
Date: Fri Nov 22 19:56:41 2019 +0100
platform/x86: hp-wmi: Fix ACPI errors caused by passing 0 as input size
commit f3e4f3fc8ee9729c4b1b27a478c68b713df53c0c upstream.
The AML code implementing the WMI methods creates a variable length
field to hold the input data we pass like this:
CreateDWordField (Arg1, 0x0C, DSZI)
Local5 = DSZI /\* \HWMC.DSZI \*/
CreateField (Arg1, 0x80, (Local5 \* 0x08), DAIN)
If we pass 0 as bios\_args.datasize argument then (Local5 \* 0x08)
is 0 which results in these errors:
[ 71.973305] ACPI BIOS Error (bug): Attempt to CreateField of length zero (20190816/dsopcode-133)
[ 71.973332] ACPI Error: Aborting method \HWMC due to previous error (AE\_AML\_OPERAND\_VALUE) (20190816/psparse-529)
[ 71.973413] ACPI Error: Aborting method \\_SB.WMID.WMAA due to previous error (AE\_AML\_OPERAND\_VALUE) (20190816/psparse-529)
And in our HPWMI\_WIRELESS2\_QUERY calls always failing. for read commands
like HPWMI\_WIRELESS2\_QUERY the DSZI value is not used / checked, except for
read commands where extra input is needed to specify exactly what to read.
So for HPWMI\_WIRELESS2\_QUERY we can safely pass the size of the expected
output as insize to hp\_wmi\_perform\_query(), as we are already doing for all
other HPWMI\_READ commands we send. Doing so fixes these errors.
Cc: stable@vger.kernel.org
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=197007
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=201981
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1520703
Signed-off-by: Hans de Goede
Signed-off-by: Andy Shevchenko
Signed-off-by: Greg Kroah-Hartman
commit 5227ac4ddacdde511f10679a0b55797b8a2ecfd8
Author: Hans de Goede
Date: Fri Nov 22 19:56:40 2019 +0100
platform/x86: hp-wmi: Fix ACPI errors caused by too small buffer
commit 16245db1489cd9aa579506f64afeeeb13d825a93 upstream.
The HP WMI calls may take up to 128 bytes of data as input, and
the AML methods implementing the WMI calls, declare a couple of fields for
accessing input in different sizes, specifycally the HWMC method contains:
CreateField (Arg1, 0x80, 0x0400, D128)
Even though we do not use any of the WMI command-types which need a buffer
of this size, the APCI interpreter still tries to create it as it is
declared in generoc code at the top of the HWMC method which runs before
the code looks at which command-type is requested.
This results in many of these errors on many different HP laptop models:
[ 14.459261] ACPI Error: Field [D128] at 1152 exceeds Buffer [NULL] size 160 (bits) (20170303/dsopcode-236)
[ 14.459268] ACPI Error: Method parse/execution failed [\HWMC] (Node ffff8edcc61507f8), AE\_AML\_BUFFER\_LIMIT (20170303/psparse-543)
[ 14.459279] ACPI Error: Method parse/execution failed [\\_SB.WMID.WMAA] (Node ffff8edcc61523c0), AE\_AML\_BUFFER\_LIMIT (20170303/psparse-543)
This commit increases the size of the data element of the bios\_args struct
to 128 bytes fixing these errors.
Cc: stable@vger.kernel.org
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=197007
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=201981
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1520703
Signed-off-by: Hans de Goede
Signed-off-by: Andy Shevchenko
Signed-off-by: Greg Kroah-Hartman
commit 41dc53ab988c914f2e16dc33b35448f5ad486f5d
Author: Candle Sun
Date: Tue Oct 22 22:21:39 2019 +0800
HID: core: check whether Usage Page item is after Usage ID items
commit 1cb0d2aee26335d0bccf29100c7bed00ebece851 upstream.
Upstream commit 58e75155009c ("HID: core: move Usage Page concatenation
to Main item") adds support for Usage Page item after Usage ID items
(such as keyboards manufactured by Primax).
Usage Page concatenation in Main item works well for following report
descriptor patterns:
USAGE\_PAGE (Keyboard) 05 07
USAGE\_MINIMUM (Keyboard LeftControl) 19 E0
USAGE\_MAXIMUM (Keyboard Right GUI) 29 E7
LOGICAL\_MINIMUM (0) 15 00
LOGICAL\_MAXIMUM (1) 25 01
REPORT\_SIZE (1) 75 01
REPORT\_COUNT (8) 95 08
INPUT (Data,Var,Abs) 81 02
-------------
USAGE\_MINIMUM (Keyboard LeftControl) 19 E0
USAGE\_MAXIMUM (Keyboard Right GUI) 29 E7
LOGICAL\_MINIMUM (0) 15 00
LOGICAL\_MAXIMUM (1) 25 01
REPORT\_SIZE (1) 75 01
REPORT\_COUNT (8) 95 08
USAGE\_PAGE (Keyboard) 05 07
INPUT (Data,Var,Abs) 81 02
But it makes the parser act wrong for the following report
descriptor pattern(such as some Gamepads):
USAGE\_PAGE (Button) 05 09
USAGE (Button 1) 09 01
USAGE (Button 2) 09 02
USAGE (Button 4) 09 04
USAGE (Button 5) 09 05
USAGE (Button 7) 09 07
USAGE (Button 8) 09 08
USAGE (Button 14) 09 0E
USAGE (Button 15) 09 0F
USAGE (Button 13) 09 0D
USAGE\_PAGE (Consumer Devices) 05 0C
USAGE (Back) 0a 24 02
USAGE (HomePage) 0a 23 02
LOGICAL\_MINIMUM (0) 15 00
LOGICAL\_MAXIMUM (1) 25 01
REPORT\_SIZE (1) 75 01
REPORT\_COUNT (11) 95 0B
INPUT (Data,Var,Abs) 81 02
With Usage Page concatenation in Main item, parser recognizes all the
11 Usages as consumer keys, it is not the HID device's real intention.
This patch checks whether Usage Page is really defined after Usage ID
items by comparing usage page using status.
Usage Page concatenation on currently defined Usage Page will always
do in local parsing when Usage ID items encountered.
When Main item is parsing, concatenation will do again with last
defined Usage Page if this page has not been used in the previous
usages concatenation.
Signed-off-by: Candle Sun
Signed-off-by: Nianfu Bai
Cc: Benjamin Tissoires
Signed-off-by: Jiri Kosina
Cc: Siarhei Vishniakou
Signed-off-by: Greg Kroah-Hartman
commit f98a928d6ea6d3cc86f393be821da17a1f346733
Author: Herbert Xu
Date: Tue Nov 26 19:28:36 2019 +0800
crypto: talitos - Fix build error by selecting LIB\_DES
commit dbc2e87bd8b6d3cc79730b3a49c5163b4c386b49 upstream.
The talitos driver needs to select LIB\_DES as it needs calls
des\_expand\_key.
Fixes: 9d574ae8ebc1 ("crypto: talitos/des - switch to new...")
Cc:
Signed-off-by: Herbert Xu
Acked-by: Ard Biesheuvel
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 88e373c0472af1eb742b9f2c03471397173b8d51
Author: Joel Stanley
Date: Fri Nov 29 10:49:30 2019 +1030
Revert "jffs2: Fix possible null-pointer dereferences in jffs2\_add\_frag\_to\_fragtree()"
commit 6e78c01fde9023e0701f3af880c1fd9de6e4e8e3 upstream.
This reverts commit f2538f999345405f7d2e1194c0c8efa4e11f7b3a. The patch
stopped JFFS2 from being able to mount an existing filesystem with the
following errors:
jffs2: error: (77) jffs2\_build\_inode\_fragtree: Add node to tree failed -22
jffs2: error: (77) jffs2\_do\_read\_inode\_internal: Failed to build final fragtree for inode #5377: error -22
Fixes: f2538f999345 ("jffs2: Fix possible null-pointer dereferences...")
Cc: stable@vger.kernel.org
Suggested-by: Hou Tao
Signed-off-by: Joel Stanley
Signed-off-by: Richard Weinberger
Signed-off-by: Greg Kroah-Hartman
commit 69412e8ac6206e36aa09a6e3f5503be020b64ba8
Author: Theodore Ts'o
Date: Thu Nov 7 21:43:41 2019 -0500
ext4: add more paranoia checking in ext4\_expand\_extra\_isize handling
commit 4ea99936a1630f51fc3a2d61a58ec4a1c4b7d55a upstream.
It's possible to specify a non-zero s\_want\_extra\_isize via debugging
option, and this can cause bad things(tm) to happen when using a file
system with an inode size of 128 bytes.
Add better checking when the file system is mounted, as well as when
we are actually doing the trying to do the inode expansion.
Link: https://lore.kernel.org/r/20191110121510.GH23325@mit.edu
Reported-by: syzbot+f8d6f8386ceacdbfff57@syzkaller.appspotmail.com
Reported-by: syzbot+33d7ea72e47de3bdf4e1@syzkaller.appspotmail.com
Reported-by: syzbot+44b6763edfc17144296f@syzkaller.appspotmail.com
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 2840e52f679a93bbef3d45d8da4c454fa7e3a446
Author: Heiner Kallweit
Date: Sun Dec 1 10:39:56 2019 +0100
r8169: fix resume on cable plug-in
[ Upstream commit 398fd408ccfb5e44b1cbe73a209d2281d3efa83c ]
It was reported [0] that network doesn't wake up on cable plug-in with
certain chip versions. Reason is that on these chip versions the PHY
doesn't detect cable plug-in when being in power-down mode. So prevent
the PHY from powering down if WoL is enabled.
[0] https://bugzilla.kernel.org/show\_bug.cgi?id=202103
Fixes: 95fb8bb3181b ("net: phy: force phy suspend when calling phy\_stop")
Reported-by: jhdskag3
Tested-by: jhdskag3
Signed-off-by: Heiner Kallweit
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c07fd3caadc3a6c18f36f5ee02d0c1981bede81e
Author: Heiner Kallweit
Date: Sun Dec 1 10:27:14 2019 +0100
r8169: fix jumbo configuration for RTL8168evl
[ Upstream commit 14012c9f3bb922b9e0751ba43d15cc580a6049bf ]
Alan reported [0] that network is broken since the referenced commit
when using jumbo frames. This commit isn't wrong, it just revealed
another issue that has been existing before. According to the vendor
driver the RTL8168e-specific jumbo config doesn't apply for RTL8168evl.
[0] https://lkml.org/lkml/2019/11/30/119
Fixes: 4ebcb113edcc ("r8169: fix jumbo packet handling on resume from suspend")
Reported-by: Alan J. Wylie
Tested-by: Alan J. Wylie
Signed-off-by: Heiner Kallweit
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit cb2008b4de93c5319faf55ad248180bb402496ec
Author: Thadeu Lima de Souza Cascardo
Date: Thu Nov 28 15:58:06 2019 -0300
selftests: pmtu: use -oneline for ip route list cache
[ Upstream commit 2745aea6750ff0d2c48285d25bdb00e5b636ec8b ]
Some versions of iproute2 will output more than one line per entry, which
will cause the test to fail, like:
TEST: ipv6: list and flush cached exceptions [FAIL]
can't list cached exceptions
That happens, for example, with iproute2 4.15.0. When using the -oneline
option, this will work just fine:
TEST: ipv6: list and flush cached exceptions [ OK ]
This also works just fine with a more recent version of iproute2, like
5.4.0.
For some reason, two lines are printed for the IPv4 test no matter what
version of iproute2 is used. Use the same -oneline parameter there instead
of counting the lines twice.
Fixes: b964641e9925 ("selftests: pmtu: Make list\_flush\_ipv6\_exception test more demanding")
Signed-off-by: Thadeu Lima de Souza Cascardo
Acked-by: Stefano Brivio
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b5c36e7734b8b288bf851ddc159d8efeded1edc1
Author: John Rutherford
Date: Tue Nov 26 13:52:55 2019 +1100
tipc: fix link name length check
[ Upstream commit fd567ac20cb0377ff466d3337e6e9ac5d0cb15e4 ]
In commit 4f07b80c9733 ("tipc: check msg->req data len in
tipc\_nl\_compat\_bearer\_disable") the same patch code was copied into
routines: tipc\_nl\_compat\_bearer\_disable(),
tipc\_nl\_compat\_link\_stat\_dump() and tipc\_nl\_compat\_link\_reset\_stats().
The two link routine occurrences should have been modified to check
the maximum link name length and not bearer name length.
Fixes: 4f07b80c9733 ("tipc: check msg->reg data len in tipc\_nl\_compat\_bearer\_disable")
Signed-off-by: John Rutherford
Acked-by: Jon Maloy
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7b7a6e872dffb90c35daa3c4ebe056b175d456ef
Author: Jakub Kicinski
Date: Wed Nov 27 12:16:46 2019 -0800
selftests: bpf: correct perror strings
[ Upstream commit e5dc9dd3258098bf8b5ceb75fc3433b41eff618a ]
perror(str) is basically equivalent to
print("%s: %s\n", str, strerror(errno)).
New line or colon at the end of str is
a mistake/breaks formatting.
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 987daa48f8d84f02add8fd9fd5f1a8783159771e
Author: Jakub Kicinski
Date: Wed Nov 27 12:16:45 2019 -0800
selftests: bpf: test\_sockmap: handle file creation failures gracefully
[ Upstream commit 4b67c515036313f3c3ecba3cb2babb9cbddb3f85 ]
test\_sockmap creates a temporary file to use for sendpage.
this may fail for various reasons. Handle the error rather
than segfault.
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 569cac5a50002a135c9d791a3bac73e70cba0450
Author: Jakub Kicinski
Date: Wed Nov 27 12:16:44 2019 -0800
net/tls: use sg\_next() to walk sg entries
[ Upstream commit c5daa6cccdc2f94aca2c9b3fa5f94e4469997293 ]
Partially sent record cleanup path increments an SG entry
directly instead of using sg\_next(). This should not be a
problem today, as encrypted messages should be always
allocated as arrays. But given this is a cleanup path it's
easy to miss was this ever to change. Use sg\_next(), and
simplify the code.
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a58365a79a2ab99bcf58ea4d3264c4029093147f
Author: Jakub Kicinski
Date: Wed Nov 27 12:16:43 2019 -0800
net/tls: remove the dead inplace\_crypto code
[ Upstream commit 9e5ffed37df68d0ccfb2fdc528609e23a1e70ebe ]
Looks like when BPF support was added by commit d3b18ad31f93
("tls: add bpf support to sk\_msg handling") and
commit d829e9c4112b ("tls: convert to generic sk\_msg interface")
it broke/removed the support for in-place crypto as added by
commit 4e6d47206c32 ("tls: Add support for inplace records
encryption").
The inplace\_crypto member of struct tls\_rec is dead, inited
to zero, and sometimes set to zero again. It used to be
set to 1 when record was allocated, but the skmsg code doesn't
seem to have been written with the idea of in-place crypto
in mind.
Since non trivial effort is required to bring the feature back
and we don't really have the HW to measure the benefit just
remove the left over support for now to avoid confusing readers.
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0e663d88f9f4ae52e2985ac4b52f25e470c7e4f7
Author: Jakub Kicinski
Date: Wed Nov 27 12:16:42 2019 -0800
selftests/tls: add a test for fragmented messages
[ Upstream commit 65190f77424d7b82c4aad7326c9cce6bd91a2fcc ]
Add a sendmsg test with very fragmented messages. This should
fill up sk\_msg and test the boundary conditions.
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3cef7ef9c42562212574c32b98fbb1617a2ff515
Author: Jakub Kicinski
Date: Wed Nov 27 12:16:41 2019 -0800
net: skmsg: fix TLS 1.3 crash with full sk\_msg
[ Upstream commit 031097d9e079e40dce401031d1012e83d80eaf01 ]
TLS 1.3 started using the entry at the end of the SG array
for chaining-in the single byte content type entry. This mostly
works:
[ E E E E E E . . ]
^ ^
start end
E < content type
/
[ E E E E E E C . ]
^ ^
start end
(Where E denotes a populated SG entry; C denotes a chaining entry.)
If the array is full, however, the end will point to the start:
[ E E E E E E E E ]
^
start
end
And we end up overwriting the start:
E < content type
/
[ C E E E E E E E ]
^
start
end
The sg array is supposed to be a circular buffer with start and
end markers pointing anywhere. In case where start > end
(i.e. the circular buffer has "wrapped") there is an extra entry
reserved at the end to chain the two halves together.
[ E E E E E E . . l ]
(Where l is the reserved entry for "looping" back to front.
As suggested by John, let's reserve another entry for chaining
SG entries after the main circular buffer. Note that this entry
has to be pointed to by the end entry so its position is not fixed.
Examples of full messages:
[ E E E E E E E E . l ]
^ ^
start end
<---------------.
[ E E . E E E E E E l ]
^ ^
end start
Now the end will always point to an unused entry, so TLS 1.3
can always use it.
Fixes: 130b392c6cd6 ("net: tls: Add tls 1.3 support")
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 795c687eacf029b9c34dacce640b2050f0feb203
Author: Jakub Kicinski
Date: Wed Nov 27 12:16:40 2019 -0800
net/tls: free the record on encryption error
[ Upstream commit d10523d0b3d78153ee58d19853ced26c9004c8c4 ]
When tls\_do\_encryption() fails the SG lists are left with the
SG\_END and SG\_CHAIN marks in place. One could hope that once
encryption fails we will never see the record again, but that
is in fact not true. Commit d3b18ad31f93 ("tls: add bpf support
to sk\_msg handling") added special handling to ENOMEM and ENOSPC
errors which mean we may see the same record re-submitted.
As suggested by John free the record, the BPF code is already
doing just that.
Reported-by: syzbot+df0d4ec12332661dd1f9@syzkaller.appspotmail.com
Fixes: d3b18ad31f93 ("tls: add bpf support to sk\_msg handling")
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Acked-by: John Fastabend
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a85ca0027970f5a283555577791db3e32a212e7a
Author: Jakub Kicinski
Date: Wed Nov 27 12:16:39 2019 -0800
net/tls: take into account that bpf\_exec\_tx\_verdict() may free the record
[ Upstream commit c329ef9684de9517d82af5b4758c9e1b64a8a11a ]
bpf\_exec\_tx\_verdict() may free the record if tls\_push\_record()
fails, or if the entire record got consumed by BPF. Re-check
ctx->open\_rec before touching the data.
Fixes: d3b18ad31f93 ("tls: add bpf support to sk\_msg handling")
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Acked-by: John Fastabend
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ab46fb3ef68efeab4c1432d2696238ca74bf72be
Author: Paolo Abeni
Date: Sun Dec 1 18:41:25 2019 +0100
openvswitch: remove another BUG\_ON()
[ Upstream commit 8a574f86652a4540a2433946ba826ccb87f398cc ]
If we can't build the flow del notification, we can simply delete
the flow, no need to crash the kernel. Still keep a WARN\_ON to
preserve debuggability.
Note: the BUG\_ON() predates the Fixes tag, but this change
can be applied only after the mentioned commit.
v1 -> v2:
- do not leak an skb on error
Fixes: aed067783e50 ("openvswitch: Minimize ovs\_flow\_cmd\_del critical section.")
Signed-off-by: Paolo Abeni
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 910d9e8839dc93ed3afe46642ad3874d3057102b
Author: Paolo Abeni
Date: Sun Dec 1 18:41:24 2019 +0100
openvswitch: drop unneeded BUG\_ON() in ovs\_flow\_cmd\_build\_info()
[ Upstream commit 8ffeb03fbba3b599690b361467bfd2373e8c450f ]
All the callers of ovs\_flow\_cmd\_build\_info() already deal with
error return code correctly, so we can handle the error condition
in a more gracefull way. Still dump a warning to preserve
debuggability.
v1 -> v2:
- clarify the commit message
- clean the skb and report the error (DaveM)
Fixes: ccb1352e76cf ("net: Add Open vSwitch kernel components.")
Signed-off-by: Paolo Abeni
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0111438d7ce48034f8b93ba75516227e6bcfecd5
Author: Xin Long
Date: Sat Nov 23 11:56:49 2019 +0800
sctp: cache netns in sctp\_ep\_common
[ Upstream commit 312434617cb16be5166316cf9d08ba760b1042a1 ]
This patch is to fix a data-race reported by syzbot:
BUG: KCSAN: data-race in sctp\_assoc\_migrate / sctp\_hash\_obj
write to 0xffff8880b67c0020 of 8 bytes by task 18908 on cpu 1:
sctp\_assoc\_migrate+0x1a6/0x290 net/sctp/associola.c:1091
sctp\_sock\_migrate+0x8aa/0x9b0 net/sctp/socket.c:9465
sctp\_accept+0x3c8/0x470 net/sctp/socket.c:4916
inet\_accept+0x7f/0x360 net/ipv4/af\_inet.c:734
\_\_sys\_accept4+0x224/0x430 net/socket.c:1754
\_\_do\_sys\_accept net/socket.c:1795 [inline]
\_\_se\_sys\_accept net/socket.c:1792 [inline]
\_\_x64\_sys\_accept+0x4e/0x60 net/socket.c:1792
do\_syscall\_64+0xcc/0x370 arch/x86/entry/common.c:290
entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
read to 0xffff8880b67c0020 of 8 bytes by task 12003 on cpu 0:
sctp\_hash\_obj+0x4f/0x2d0 net/sctp/input.c:894
rht\_key\_get\_hash include/linux/rhashtable.h:133 [inline]
rht\_key\_hashfn include/linux/rhashtable.h:159 [inline]
rht\_head\_hashfn include/linux/rhashtable.h:174 [inline]
head\_hashfn lib/rhashtable.c:41 [inline]
rhashtable\_rehash\_one lib/rhashtable.c:245 [inline]
rhashtable\_rehash\_chain lib/rhashtable.c:276 [inline]
rhashtable\_rehash\_table lib/rhashtable.c:316 [inline]
rht\_deferred\_worker+0x468/0xab0 lib/rhashtable.c:420
process\_one\_work+0x3d4/0x890 kernel/workqueue.c:2269
worker\_thread+0xa0/0x800 kernel/workqueue.c:2415
kthread+0x1d4/0x200 drivers/block/aoe/aoecmd.c:1253
ret\_from\_fork+0x1f/0x30 arch/x86/entry/entry\_64.S:352
It was caused by rhashtable access asoc->base.sk when sctp\_assoc\_migrate
is changing its value. However, what rhashtable wants is netns from asoc
base.sk, and for an asoc, its netns won't change once set. So we can
simply fix it by caching netns since created.
Fixes: d6c0256a60e6 ("sctp: add the rhashtable apis for sctp global transport hashtable")
Reported-by: syzbot+e3b35fe7918ff0ee474e@syzkaller.appspotmail.com
Signed-off-by: Xin Long
Acked-by: Marcelo Ricardo Leitner
Signed-off-by: Jakub Kicinski
Signed-off-by: Greg Kroah-Hartman
commit 97d92f0763e632d06786e4cd76b76eb8b995acbd
Author: Jouni Hogander
Date: Mon Nov 25 14:23:43 2019 +0200
slip: Fix use-after-free Read in slip\_open
[ Upstream commit e58c1912418980f57ba2060017583067f5f71e52 ]
Slip\_open doesn't clean-up device which registration failed from the
slip\_devs device list. On next open after failure this list is iterated
and freed device is accessed. Fix this by calling sl\_free\_netdev in error
path.
Here is the trace from the Syzbot:
\_\_dump\_stack lib/dump\_stack.c:77 [inline]
dump\_stack+0x197/0x210 lib/dump\_stack.c:118
print\_address\_description.constprop.0.cold+0xd4/0x30b mm/kasan/report.c:374
\_\_kasan\_report.cold+0x1b/0x41 mm/kasan/report.c:506
kasan\_report+0x12/0x20 mm/kasan/common.c:634
\_\_asan\_report\_load8\_noabort+0x14/0x20 mm/kasan/generic\_report.c:132
sl\_sync drivers/net/slip/slip.c:725 [inline]
slip\_open+0xecd/0x11b7 drivers/net/slip/slip.c:801
tty\_ldisc\_open.isra.0+0xa3/0x110 drivers/tty/tty\_ldisc.c:469
tty\_set\_ldisc+0x30e/0x6b0 drivers/tty/tty\_ldisc.c:596
tiocsetd drivers/tty/tty\_io.c:2334 [inline]
tty\_ioctl+0xe8d/0x14f0 drivers/tty/tty\_io.c:2594
vfs\_ioctl fs/ioctl.c:46 [inline]
file\_ioctl fs/ioctl.c:509 [inline]
do\_vfs\_ioctl+0xdb6/0x13e0 fs/ioctl.c:696
ksys\_ioctl+0xab/0xd0 fs/ioctl.c:713
\_\_do\_sys\_ioctl fs/ioctl.c:720 [inline]
\_\_se\_sys\_ioctl fs/ioctl.c:718 [inline]
\_\_x64\_sys\_ioctl+0x73/0xb0 fs/ioctl.c:718
do\_syscall\_64+0xfa/0x760 arch/x86/entry/common.c:290
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
Fixes: 3b5a39979daf ("slip: Fix memory leak in slip\_open error path")
Reported-by: syzbot+4d5170758f3762109542@syzkaller.appspotmail.com
Cc: David Miller
Cc: Oliver Hartkopp
Cc: Lukas Bulwahn
Signed-off-by: Jouni Hogander
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit d6a456237de1380c724a504f7105aad9a3e65873
Author: Navid Emamdoost
Date: Fri Nov 22 16:17:56 2019 -0600
sctp: Fix memory leak in sctp\_sf\_do\_5\_2\_4\_dupcook
[ Upstream commit b6631c6031c746ed004c4221ec0616d7a520f441 ]
In the implementation of sctp\_sf\_do\_5\_2\_4\_dupcook() the allocated
new\_asoc is leaked if security\_sctp\_assoc\_request() fails. Release it
via sctp\_association\_free().
Fixes: 2277c7cd75e3 ("sctp: Add LSM hooks")
Signed-off-by: Navid Emamdoost
Acked-by: Marcelo Ricardo Leitner
Signed-off-by: Jakub Kicinski
Signed-off-by: Greg Kroah-Hartman
commit 8109f5b67aa3ae3310196318a1d395c09dd1a4c5
Author: Paolo Abeni
Date: Tue Nov 26 12:55:50 2019 +0100
openvswitch: fix flow command message size
[ Upstream commit 4e81c0b3fa93d07653e2415fa71656b080a112fd ]
When user-space sets the OVS\_UFID\_F\_OMIT\_\* flags, and the relevant
flow has no UFID, we can exceed the computed size, as
ovs\_nla\_put\_identifier() will always dump an OVS\_FLOW\_ATTR\_KEY
attribute.
Take the above in account when computing the flow command message
size.
Fixes: 74ed7ab9264c ("openvswitch: Add support for unique flow IDs.")
Reported-by: Qi Jun Ding
Signed-off-by: Paolo Abeni
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dbb5cc35b9a639e22e1c3f8956c8c3c498c82df5
Author: Dust Li
Date: Thu Nov 28 14:29:09 2019 +0800
net: sched: fix `tc -s class show` no bstats on class with nolock subqueues
[ Upstream commit 14e54ab9143fa60794d13ea0a66c792a2046a8f3 ]
When a classful qdisc's child qdisc has set the flag
TCQ\_F\_CPUSTATS (pfifo\_fast for example), the child qdisc's
cpu\_bstats should be passed to gnet\_stats\_copy\_basic(),
but many classful qdisc didn't do that. As a result,
`tc -s class show dev DEV` always return 0 for bytes and
packets in this case.
Pass the child qdisc's cpu\_bstats to gnet\_stats\_copy\_basic()
to fix this issue.
The qstats also has this problem, but it has been fixed
in 5dd431b6b9 ("net: sched: introduce and use qstats read...")
and bstats still remains buggy.
Fixes: 22e0f8b9322c ("net: sched: make bstats per cpu and estimator RCU safe")
Signed-off-by: Dust Li
Signed-off-by: Tony Lu
Acked-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 63c197a192e2b81190fe3305c8af50aa69b4b4a2
Author: Nikolay Aleksandrov
Date: Wed Nov 27 00:16:44 2019 +0200
net: psample: fix skb\_over\_panic
[ Upstream commit 7eb9d7675c08937cd11d32b0b40442d4d731c5ee ]
We need to calculate the skb size correctly otherwise we risk triggering
skb\_over\_panic[1]. The issue is that data\_len is added to the skb in a
nl attribute, but we don't account for its header size (nlattr 4 bytes)
and alignment. We account for it when calculating the total size in
the > PSAMPLE\_MAX\_PACKET\_SIZE comparison correctly, but not when
allocating after that. The fix is simple - use nla\_total\_size() for
data\_len when allocating.
To reproduce:
$ tc qdisc add dev eth1 clsact
$ tc filter add dev eth1 egress matchall action sample rate 1 group 1 trunc 129
$ mausezahn eth1 -b bcast -a rand -c 1 -p 129
< skb\_over\_panic BUG(), tail is 4 bytes past skb->end >
[1] Trace:
[ 50.459526][ T3480] skbuff: skb\_over\_panic: text:(\_\_\_\_ptrval\_\_\_\_) len:196 put:136 head:(\_\_\_\_ptrval\_\_\_\_) data:(\_\_\_\_ptrval\_\_\_\_) tail:0xc4 end:0xc0 dev:
[ 50.474339][ T3480] ------------[ cut here ]------------
[ 50.481132][ T3480] kernel BUG at net/core/skbuff.c:108!
[ 50.486059][ T3480] invalid opcode: 0000 [#1] PREEMPT SMP
[ 50.489463][ T3480] CPU: 3 PID: 3480 Comm: mausezahn Not tainted 5.4.0-rc7 #108
[ 50.492844][ T3480] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.12.0-2.fc30 04/01/2014
[ 50.496551][ T3480] RIP: 0010:skb\_panic+0x79/0x7b
[ 50.498261][ T3480] Code: bc 00 00 00 41 57 4c 89 e6 48 c7 c7 90 29 9a 83 4c 8b 8b c0 00 00 00 50 8b 83 b8 00 00 00 50 ff b3 c8 00 00 00 e8 ae ef c0 fe <0f> 0b e8 2f df c8 fe 48 8b 55 08 44 89 f6 4c 89 e7 48 c7 c1 a0 22
[ 50.504111][ T3480] RSP: 0018:ffffc90000447a10 EFLAGS: 00010282
[ 50.505835][ T3480] RAX: 0000000000000087 RBX: ffff888039317d00 RCX: 0000000000000000
[ 50.507900][ T3480] RDX: 0000000000000000 RSI: ffffffff812716e1 RDI: 00000000ffffffff
[ 50.509820][ T3480] RBP: ffffc90000447a60 R08: 0000000000000001 R09: 0000000000000000
[ 50.511735][ T3480] R10: ffffffff81d4f940 R11: 0000000000000000 R12: ffffffff834a22b0
[ 50.513494][ T3480] R13: ffffffff82c10433 R14: 0000000000000088 R15: ffffffff838a8084
[ 50.515222][ T3480] FS: 00007f3536462700(0000) GS:ffff88803eac0000(0000) knlGS:0000000000000000
[ 50.517135][ T3480] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 50.518583][ T3480] CR2: 0000000000442008 CR3: 000000003b222000 CR4: 00000000000006e0
[ 50.520723][ T3480] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 50.522709][ T3480] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 50.524450][ T3480] Call Trace:
[ 50.525214][ T3480] skb\_put.cold+0x1b/0x1b
[ 50.526171][ T3480] psample\_sample\_packet+0x1d3/0x340
[ 50.527307][ T3480] tcf\_sample\_act+0x178/0x250
[ 50.528339][ T3480] tcf\_action\_exec+0xb1/0x190
[ 50.529354][ T3480] mall\_classify+0x67/0x90
[ 50.530332][ T3480] tcf\_classify+0x72/0x160
[ 50.531286][ T3480] \_\_dev\_queue\_xmit+0x3db/0xd50
[ 50.532327][ T3480] dev\_queue\_xmit+0x18/0x20
[ 50.533299][ T3480] packet\_sendmsg+0xee7/0x2090
[ 50.534331][ T3480] sock\_sendmsg+0x54/0x70
[ 50.535271][ T3480] \_\_sys\_sendto+0x148/0x1f0
[ 50.536252][ T3480] ? tomoyo\_file\_ioctl+0x23/0x30
[ 50.537334][ T3480] ? ksys\_ioctl+0x5e/0xb0
[ 50.540068][ T3480] \_\_x64\_sys\_sendto+0x2a/0x30
[ 50.542810][ T3480] do\_syscall\_64+0x73/0x1f0
[ 50.545383][ T3480] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 50.548477][ T3480] RIP: 0033:0x7f35357d6fb3
[ 50.551020][ T3480] Code: 48 8b 0d 18 90 20 00 f7 d8 64 89 01 48 83 c8 ff c3 66 0f 1f 44 00 00 83 3d f9 d3 20 00 00 75 13 49 89 ca b8 2c 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 34 c3 48 83 ec 08 e8 eb f6 ff ff 48 89 04 24
[ 50.558547][ T3480] RSP: 002b:00007ffe0c7212c8 EFLAGS: 00000246 ORIG\_RAX: 000000000000002c
[ 50.561870][ T3480] RAX: ffffffffffffffda RBX: 0000000001dac010 RCX: 00007f35357d6fb3
[ 50.565142][ T3480] RDX: 0000000000000082 RSI: 0000000001dac2a2 RDI: 0000000000000003
[ 50.568469][ T3480] RBP: 00007ffe0c7212f0 R08: 00007ffe0c7212d0 R09: 0000000000000014
[ 50.571731][ T3480] R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000000082
[ 50.574961][ T3480] R13: 0000000001dac2a2 R14: 0000000000000001 R15: 0000000000000003
[ 50.578170][ T3480] Modules linked in: sch\_ingress virtio\_net
[ 50.580976][ T3480] ---[ end trace 61a515626a595af6 ]---
CC: Yotam Gigi
CC: Jiri Pirko
CC: Jamal Hadi Salim
CC: Simon Horman
CC: Roopa Prabhu
Fixes: 6ae0a6286171 ("net: Introduce psample, a new genetlink channel for packet sampling")
Signed-off-by: Nikolay Aleksandrov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 40c1eee5669d91140dfb333e2839225e6a0372a8
Author: Chuhong Yuan
Date: Thu Nov 28 10:00:21 2019 +0800
net: macb: add missed tasklet\_kill
[ Upstream commit 61183b056b49e2937ff92a1424291ba36a6f6d05 ]
This driver forgets to kill tasklet in remove.
Add the call to fix it.
Fixes: 032dc41ba6e2 ("net: macb: Handle HRESP error")
Signed-off-by: Chuhong Yuan
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 45b03799ad3ca6f626d49c0e5fccc694431f6c25
Author: Oleksij Rempel
Date: Mon Nov 25 12:43:51 2019 +0100
net: dsa: sja1105: fix sja1105\_parse\_rgmii\_delays()
[ Upstream commit 9bca3a0a923fc3f0fb9e41391be1d0f291e86858 ]
This function was using configuration of port 0 in devicetree for all ports.
In case CPU port was not 0, the delay settings was ignored. This resulted not
working communication between CPU and the switch.
Fixes: f5b8631c293b ("net: dsa: sja1105: Error out if RGMII delays are requested in DT")
Signed-off-by: Oleksij Rempel
Reviewed-by: Vladimir Oltean
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 72e08c098efa5649ae5f0c84be75d4a0e41be1da
Author: David Bauer
Date: Fri Nov 22 22:44:51 2019 +0100
mdio\_bus: don't use managed reset-controller
[ Upstream commit 32085f25d7b68404055f3525c780142fc72e543f ]
Geert Uytterhoeven reported that using devm\_reset\_controller\_get leads
to a WARNING when probing a reset-controlled PHY. This is because the
device devm\_reset\_controller\_get gets supplied is not actually the
one being probed.
Acquire an unmanaged reset-control as well as free the reset\_control on
unregister to fix this.
Reported-by: Geert Uytterhoeven
CC: Andrew Lunn
Signed-off-by: David Bauer
Reviewed-by: Andrew Lunn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1189227da844d98eb1c101b41b72eee09feb9727
Author: Menglong Dong
Date: Mon Nov 25 16:58:09 2019 +0800
macvlan: schedule bc\_work even if error
[ Upstream commit 1d7ea55668878bb350979c377fc72509dd6f5b21 ]
While enqueueing a broadcast skb to port->bc\_queue, schedule\_work()
is called to add port->bc\_work, which processes the skbs in
bc\_queue, to "events" work queue. If port->bc\_queue is full, the
skb will be discarded and schedule\_work(&port->bc\_work) won't be
called. However, if port->bc\_queue is full and port->bc\_work is not
running or pending, port->bc\_queue will keep full and schedule\_work()
won't be called any more, and all broadcast skbs to macvlan will be
discarded. This case can happen:
macvlan\_process\_broadcast() is the pending function of port->bc\_work,
it moves all the skbs in port->bc\_queue to the queue "list", and
processes the skbs in "list". During this, new skbs will keep being
added to port->bc\_queue in macvlan\_broadcast\_enqueue(), and
port->bc\_queue may already full when macvlan\_process\_broadcast()
return. This may happen, especially when there are a lot of real-time
threads and the process is preempted.
Fix this by calling schedule\_work(&port->bc\_work) even if
port->bc\_work is full in macvlan\_broadcast\_enqueue().
Fixes: 412ca1550cbe ("macvlan: Move broadcasts into a work queue")
Signed-off-by: Menglong Dong
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1c57e9361ee2f22be0d581f2abf967060ba1f31a
Author: Jeroen de Borst
Date: Tue Nov 26 15:36:19 2019 -0800
gve: Fix the queue page list allocated pages count
[ Upstream commit a95069ecb7092d03b2ea1c39ee04514fe9627540 ]
In gve\_alloc\_queue\_page\_list(), when a page allocation fails,
qpl->num\_entries will be wrong. In this case priv->num\_registered\_pages
can underflow in gve\_free\_queue\_page\_list(), causing subsequent calls
to gve\_alloc\_queue\_page\_list() to fail.
Fixes: f5cedc84a30d ("gve: Add transmit and receive support")
Signed-off-by: Jeroen de Borst
Reviewed-by: Catherine Sullivan
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4c1bb6bbc541a1961ac3605a5507236961983185
Author: Sebastian Andrzej Siewior
Date: Thu Nov 28 09:53:06 2019 +0100
x86/fpu: Don't cache access to fpu\_fpregs\_owner\_ctx
commit 59c4bd853abcea95eccc167a7d7fd5f1a5f47b98 upstream.
The state/owner of the FPU is saved to fpu\_fpregs\_owner\_ctx by pointing
to the context that is currently loaded. It never changed during the
lifetime of a task - it remained stable/constant.
After deferred FPU registers loading until return to userland was
implemented, the content of fpu\_fpregs\_owner\_ctx may change during
preemption and must not be cached.
This went unnoticed for some time and was now noticed, in particular
since gcc 9 is caching that load in copy\_fpstate\_to\_sigframe() and
reusing it in the retry loop:
copy\_fpstate\_to\_sigframe()
load fpu\_fpregs\_owner\_ctx and save on stack
fpregs\_lock()
copy\_fpregs\_to\_sigframe() /\* failed \*/
fpregs\_unlock()
\*\*\* PREEMPTION, another uses FPU, changes fpu\_fpregs\_owner\_ctx \*\*\*
fault\_in\_pages\_writeable() /\* succeed, retry \*/
fpregs\_lock()
\_\_fpregs\_load\_activate()
fpregs\_state\_valid() /\* uses fpu\_fpregs\_owner\_ctx from stack \*/
copy\_fpregs\_to\_sigframe() /\* succeeds, random FPU content \*/
This is a comparison of the assembly produced by gcc 9, without vs with this
patch:
| # arch/x86/kernel/fpu/signal.c:173: if (!access\_ok(buf, size))
| cmpq %rdx, %rax # tmp183, \_4
| jb .L190 #,
|-# arch/x86/include/asm/fpu/internal.h:512: return fpu == this\_cpu\_read\_stable(fpu\_fpregs\_owner\_ctx) && cpu == fpu->last\_cpu;
|-#APP
|-# 512 "arch/x86/include/asm/fpu/internal.h" 1
|- movq %gs:fpu\_fpregs\_owner\_ctx,%rax #, pfo\_ret\_\_
|-# 0 "" 2
|-#NO\_APP
|- movq %rax, -88(%rbp) # pfo\_ret\_\_, %sfp
â€¦
|-# arch/x86/include/asm/fpu/internal.h:512: return fpu == this\_cpu\_read\_stable(fpu\_fpregs\_owner\_ctx) && cpu == fpu->last\_cpu;
|- movq -88(%rbp), %rcx # %sfp, pfo\_ret\_\_
|- cmpq %rcx, -64(%rbp) # pfo\_ret\_\_, %sfp
|+# arch/x86/include/asm/fpu/internal.h:512: return fpu == this\_cpu\_read(fpu\_fpregs\_owner\_ctx) && cpu == fpu->last\_cpu;
|+#APP
|+# 512 "arch/x86/include/asm/fpu/internal.h" 1
|+ movq %gs:fpu\_fpregs\_owner\_ctx(%rip),%rax # fpu\_fpregs\_owner\_ctx, pfo\_ret\_\_
|+# 0 "" 2
|+# arch/x86/include/asm/fpu/internal.h:512: return fpu == this\_cpu\_read(fpu\_fpregs\_owner\_ctx) && cpu == fpu->last\_cpu;
|+#NO\_APP
|+ cmpq %rax, -64(%rbp) # pfo\_ret\_\_, %sfp
Use this\_cpu\_read() instead this\_cpu\_read\_stable() to avoid caching of
fpu\_fpregs\_owner\_ctx during preemption points.
The Fixes: tag points to the commit where deferred FPU loading was
added. Since this commit, the compiler is no longer allowed to move the
load of fpu\_fpregs\_owner\_ctx somewhere else / outside of the locked
section. A task preemption will change its value and stale content will
be observed.
[ bp: Massage. ]
Debugged-by: Austin Clements
Debugged-by: David Chase
Debugged-by: Ian Lance Taylor
Fixes: 5f409e20b7945 ("x86/fpu: Defer FPU state load until return to userspace")
Signed-off-by: Sebastian Andrzej Siewior
Signed-off-by: Borislav Petkov
Reviewed-by: Rik van Riel
Tested-by: Borislav Petkov
Cc: Aubrey Li
Cc: Austin Clements
Cc: Barret Rhoden
Cc: Dave Hansen
Cc: David Chase
Cc: "H. Peter Anvin"
Cc: ian@airs.com
Cc: Ingo Molnar
Cc: Josh Bleecher Snyder
Cc: Thomas Gleixner
Cc: x86-ml
Link: https://lkml.kernel.org/r/20191128085306.hxfa2o3knqtu4wfn@linutronix.de
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=205663
Signed-off-by: Greg Kroah-Hartman
commit 5148c89f9957cf597544f4e3dfb10febe08c2536
Author: Mika Westerberg
Date: Mon Nov 11 13:25:44 2019 +0300
thunderbolt: Power cycle the router if NVM authentication fails
commit 7a7ebfa85f4fac349f3ab219538c44efe18b0cf6 upstream.
On zang's Dell XPS 13 9370 after Thunderbolt NVM firmware upgrade the
Thunderbolt controller did not come back as expected. Only after the
system was rebooted it became available again. It is not entirely clear
what happened but I suspect the new NVM firmware image authentication
failed for some reason. Regardless of this the router needs to be power
cycled if NVM authentication fails in order to get it fully functional
again.
This modifies the driver to issue a power cycle in case the NVM
authentication fails immediately when dma\_port\_flash\_update\_auth()
returns. We also need to call tb\_switch\_set\_uuid() earlier to be able to
fetch possible NVM authentication failure when DMA port is added.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=205457
Reported-by: zang
Cc: stable
Signed-off-by: Mika Westerberg
Signed-off-by: Greg Kroah-Hartman
commit 570c0ee0b92f1351224606d509fb55be002716f8
Author: Alexander Usyskin
Date: Tue Nov 5 17:05:14 2019 +0200
mei: me: add comet point V device id
commit 82b29b9f72afdccb40ea5f3c13c6a3cb65a597bc upstream.
Comet Point (Comet Lake) V device id.
Cc:
Signed-off-by: Alexander Usyskin
Signed-off-by: Tomas Winkler
Link: https://lore.kernel.org/r/20191105150514.14010-2-tomas.winkler@intel.com
Signed-off-by: Greg Kroah-Hartman
commit 57916ffb5d4b646b9c63276f1bca1d033e6baa2c
Author: Alexander Usyskin
Date: Tue Nov 5 17:05:13 2019 +0200
mei: bus: prefix device names on bus with the bus name
commit 7a2b9e6ec84588b0be65cc0ae45a65bac431496b upstream.
Add parent device name to the name of devices on bus to avoid
device names collisions for same client UUID available
from different MEI heads. Namely this prevents sysfs collision under
/sys/bus/mei/device/
In the device part leave just UUID other parameters that are
required for device matching are not required here and are
just bloating the name.
Cc:
Signed-off-by: Alexander Usyskin
Signed-off-by: Tomas Winkler
Link: https://lore.kernel.org/r/20191105150514.14010-1-tomas.winkler@intel.com
Signed-off-by: Greg Kroah-Hartman
commit 5029226bb6b70df082b8bb4699d21aeee0093f65
Author: Fabio D'Urso
Date: Thu Nov 14 01:30:53 2019 +0000
USB: serial: ftdi\_sio: add device IDs for U-Blox C099-F9P
commit c1a1f273d0825774c80896b8deb1c9ea1d0b91e3 upstream.
This device presents itself as a USB hub with three attached devices:
- An ACM serial port connected to the GPS module (not affected by this
commit)
- An FTDI serial port connected to the GPS module (1546:0502)
- Another FTDI serial port connected to the ODIN-W2 radio module
(1546:0503)
This commit registers U-Blox's VID and the PIDs of the second and third
devices.
Datasheet: https://www.u-blox.com/sites/default/files/C099-F9P-AppBoard-Mbed-OS3-FW\_UserGuide\_%28UBX-18063024%29.pdf
Signed-off-by: Fabio D'Urso
Cc: stable
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 244d577e2802819b3019a5da4b19cb180960fd1a
Author: Hans de Goede
Date: Mon Nov 11 12:38:45 2019 +0100
staging: rtl8723bs: Add 024c:0525 to the list of SDIO device-ids
commit 3d5f1eedbfd22ceea94b39989d6021b1958181f4 upstream.
Add 024c:0525 to the list of SDIO device-ids, based on a patch found
in the Android X86 kernels. According to that patch this device id is
used on the Alcatel Plus 10 device.
Reported-and-tested-by: youling257
Signed-off-by: Hans de Goede
Cc: stable
Link: https://lore.kernel.org/r/20191111113846.24940-1-hdegoede@redhat.com
Signed-off-by: Greg Kroah-Hartman
commit 928353f4e12008ed13ae7c77320c77420e3a4f15
Author: Hans de Goede
Date: Mon Nov 11 12:38:46 2019 +0100
staging: rtl8723bs: Drop ACPI device ids
commit 2d9d2491530a156b9a5614adf9dc79285e35d55e upstream.
The driver only binds by SDIO device-ids, all the ACPI device-id does
is causing the driver to load unnecessarily on devices where the DSDT
contains a bogus OBDA8723 device.
Signed-off-by: Hans de Goede
Cc: stable
Link: https://lore.kernel.org/r/20191111113846.24940-2-hdegoede@redhat.com
Signed-off-by: Greg Kroah-Hartman
commit ab1908cbe204faaf3f65e59e23b6863002e852a0
Author: Pan Bian
Date: Tue Nov 5 22:49:11 2019 +0800
staging: rtl8192e: fix potential use after free
commit b7aa39a2ed0112d07fc277ebd24a08a7b2368ab9 upstream.
The variable skb is released via kfree\_skb() when the return value of
\_rtl92e\_tx is not zero. However, after that, skb is accessed again to
read its length, which may result in a use after free bug. This patch
fixes the bug by moving the release operation to where skb is never
used later.
Signed-off-by: Pan Bian
Reviewed-by: Dan Carpenter
Cc: stable
Link: https://lore.kernel.org/r/1572965351-6745-1-git-send-email-bianpan2016@163.com
Signed-off-by: Greg Kroah-Hartman
commit bb2135c6a5e3eee1d3884af2cfc3d3e5126c4eef
Author: Ajay Singh
Date: Thu Nov 7 15:58:54 2019 +0000
staging: wilc1000: fix illegal memory access in wilc\_parse\_join\_bss\_param()
commit c7e621bb981b76d3bfd8a595070ee8282ac4a32b upstream.
Do not copy the extended supported rates in 'param->supp\_rates' if the
array is already full with basic rates values. The array size check
helped to avoid possible illegal memory access [1] while copying to
'param->supp\_rates' array.
1. https://marc.info/?l=linux-next&m=157301720517456&w=2
Reported-by: coverity-bot
Addresses-Coverity-ID: 1487400 ("Memory - illegal accesses")
Fixes: 4e0b0f42c9c7 ("staging: wilc1000: use struct to pack join parameters for FW")
Cc: stable@vger.kernel.org
Signed-off-by: Ajay Singh
Link: https://lore.kernel.org/r/20191106062127.3165-1-ajay.kathat@microchip.com
Signed-off-by: Greg Kroah-Hartman
commit eea8956c968485b5e6c6ea6a842a0f98ef8f1b20
Author: Mathias Kresin
Date: Sun Jul 7 16:22:01 2019 +0200
usb: dwc2: use a longer core rest timeout in dwc2\_core\_reset()
commit 6689f0f4bb14e50917ba42eb9b41c25e0184970c upstream.
Testing on different generations of Lantiq MIPS SoC based boards, showed
that it takes up to 1500 us until the core reset bit is cleared.
The driver from the vendor SDK (ifxhcd) uses a 1 second timeout. Use the
same timeout to fix wrong hang detections and make the driver work for
Lantiq MIPS SoCs.
At least till kernel 4.14 the hanging reset only caused a warning but
the driver was probed successful. With kernel 4.19 errors out with
EBUSY.
Cc: linux-stable  # 4.19+
Signed-off-by: Mathias Kresin
Signed-off-by: Felipe Balbi
Signed-off-by: Greg Kroah-Hartman
commit 88d945a0b0aa5916ca66cd22199ad6d8b3f4a368
Author: Sami Tolvanen
Date: Tue Nov 12 13:41:56 2019 -0800
driver core: platform: use the correct callback type for bus\_find\_device
commit 492c88720d36eb662f9f10c1633f7726fbb07fc4 upstream.
platform\_find\_device\_by\_driver calls bus\_find\_device and passes
platform\_match as the callback function. Casting the function to a
mismatching type trips indirect call Control-Flow Integrity (CFI) checking.
This change adds a callback function with the correct type and instead
of casting the function, explicitly casts the second parameter to struct
device\_driver\* as expected by platform\_match.
Fixes: 36f3313d6bff9 ("platform: Add platform\_find\_device\_by\_driver() helper")
Signed-off-by: Sami Tolvanen
Reviewed-by: Kees Cook
Cc: stable
Link: https://lore.kernel.org/r/20191112214156.3430-1-samitolvanen@google.com
Signed-off-by: Greg Kroah-Hartman
commit f3cda1dea7f069a0fc0b2fbe3cee3e2821ff6498
Author: Pascal van Leeuwen
Date: Tue Sep 17 11:55:18 2019 +0200
crypto: inside-secure - Fix stability issue with Macchiatobin
commit b8c5d882c8334d05754b69dcdf1cfd6bc48a9e12 upstream.
This patch corrects an error in the Transform Record Cache initialization
code that was causing intermittent stability problems on the Macchiatobin
board.
Unfortunately, due to HW platform specifics, the problem could not happen
on the main development platform, being the VCU118 Xilinx development
board. And since it was a problem with hash table access, it was very
dependent on the actual physical context record DMA buffers being used,
i.e. with some (bad) luck it could seemingly work quit stable for a while.
Signed-off-by: Pascal van Leeuwen
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit d6245944452ce4592ea975491f5e90e75b346bef
Author: Jens Axboe
Date: Mon Nov 25 17:04:13 2019 -0700
net: disallow ancillary data for \_\_sys\_{send,recv}msg\_file()
[ Upstream commit d69e07793f891524c6bbf1e75b9ae69db4450953 ]
Only io\_uring uses (and added) these, and we want to disallow the
use of sendmsg/recvmsg for anything but regular data transfers.
Use the newly added prep helper to split the msghdr copy out from
the core function, to check for msg\_control and msg\_controllen
settings. If either is set, we return -EINVAL.
Acked-by: David S. Miller
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
commit 78df03e4c892a09ebfd9045a427d656805964552
Author: Jens Axboe
Date: Mon Nov 25 14:27:34 2019 -0700
net: separate out the msghdr copy from \_\_\_sys\_{send,recv}msg()
[ Upstream commit 4257c8ca13b084550574b8c9a667d9c90ff746eb ]
This is in preparation for enabling the io\_uring helpers for sendmsg
and recvmsg to first copy the header for validation before continuing
with the operation.
There should be no functional changes in this patch.
Acked-by: David S. Miller
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
commit 8387e3688aa9e06a12b58abbcfe2cbfd0cf0f589
Author: Jens Axboe
Date: Mon Nov 25 08:52:30 2019 -0700
io\_uring: async workers should inherit the user creds
[ Upstream commit 181e448d8709e517c9c7b523fcd209f24eb38ca7 ]
If we don't inherit the original task creds, then we can confuse users
like fuse that pass creds in the request header. See link below on
identical aio issue.
Link: https://lore.kernel.org/linux-fsdevel/26f0d78e-99ca-2f1b-78b9-433088053a61@scylladb.com/T/#u
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin


=== Content from bugs.chromium.org_696a1454_20250121_000653.html ===



=== Content from usn.ubuntu.com_e50e3165_20250121_000656.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4284-1: Linux kernel vulnerabilities

19 February 2020

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 19.10](/security/notices?release=eoan)
* [Ubuntu 18.04 ESM](/security/notices?release=bionic)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-azure](/security/cves?package=linux-azure) - Linux kernel for Microsoft Azure Cloud systems
* [linux-azure-5.3](/security/cves?package=linux-azure-5.3) - Linux kernel for Microsoft Azure Cloud systems
* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-gcp-5.3](/security/cves?package=linux-gcp-5.3) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-hwe](/security/cves?package=linux-hwe) - Linux hardware enablement (HWE) kernel
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-oracle](/security/cves?package=linux-oracle) - Linux kernel for Oracle Cloud systems
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2
* [linux-raspi2-5.3](/security/cves?package=linux-raspi2-5.3) - Linux kernel for Raspberry Pi 2

## Details

It was discovered that the Linux kernel did not properly clear data

structures on context switches for certain Intel graphics processors. A

local attacker could use this to expose sensitive information.

([CVE-2019-14615](/security/CVE-2019-14615))

It was discovered that the Atheros 802.11ac wireless USB device driver in

the Linux kernel did not properly validate device metadata. A physically

proximate attacker could use this to cause a denial of service (system

crash). ([CVE-2019-15099](/security/CVE-2019-15099))

It was discovered that the HSA Linux kernel driver for AMD GPU devices did

not properly check for errors in certain situations, leading to a NULL

pointer dereference. A local attacker could possibly use this to cause a

denial of service. ([CVE-2019-16229](/security/CVE-2019-16229))

It was discovered that the Marvell 8xxx Libertas WLAN device driver in the

Linux kernel did not properly check for errors in certain situations,

leading to a NULL pointer dereference. A local attacker could possibly use

this to cause a denial of service. ([CVE-2019-16232](/security/CVE-2019-16232))

It was discovered that a race condition existed in the Virtual Video Test

Driver in the Linux kernel. An attacker with write access to /dev/video0 on

a system with the vivid module loaded could possibly use this to gain

administrative privileges. ([CVE-2019-18683](/security/CVE-2019-18683))

It was discovered that the Renesas Digital Radio Interface (DRIF) driver in

the Linux kernel did not properly initialize data. A local attacker could

possibly use this to expose sensitive information (kernel memory).

([CVE-2019-18786](/security/CVE-2019-18786))

It was discovered that the Sound Open Firmware (SOF) driver in the Linux

kernel did not properly deallocate memory in certain error conditions. A

local attacker could use this to cause a denial of service (kernel memory

exhaustion). ([CVE-2019-18811](/security/CVE-2019-18811))

It was discovered that the crypto subsystem in the Linux kernel did not

properly deallocate memory in certain error conditions. A local attacker

could use this to cause a denial of service (kernel memory exhaustion).

([CVE-2019-19050](/security/CVE-2019-19050), [CVE-2019-19062](/security/CVE-2019-19062))

It was discovered that multiple memory leaks existed in the Marvell WiFi-Ex

Driver for the Linux kernel. A local attacker could possibly use this to

cause a denial of service (kernel memory exhaustion). ([CVE-2019-19057](/security/CVE-2019-19057))

It was discovered that the Realtek rtlwifi USB device driver in the Linux

kernel did not properly deallocate memory in certain error conditions. A

local attacker could possibly use this to cause a denial of service (kernel

memory exhaustion). ([CVE-2019-19063](/security/CVE-2019-19063))

It was discovered that the RSI 91x WLAN device driver in the Linux kernel

did not properly deallocate memory in certain error conditions. A local

attacker could use this to cause a denial of service (kernel memory

exhaustion). ([CVE-2019-19071](/security/CVE-2019-19071))

It was discovered that the Broadcom Netxtreme HCA device driver in the

Linux kernel did not properly deallocate memory in certain error

conditions. A local attacker could possibly use this to cause a denial of

service (kernel memory exhaustion). ([CVE-2019-19077](/security/CVE-2019-19077))

It was discovered that the Atheros 802.11ac wireless USB device driver in

the Linux kernel did not properly deallocate memory in certain error

conditions. A local attacker could possibly use this to cause a denial of

service (kernel memory exhaustion). ([CVE-2019-19078](/security/CVE-2019-19078))

It was discovered that the AMD GPU device drivers in the Linux kernel did

not properly deallocate memory in certain error conditions. A local

attacker could use this to possibly cause a denial of service (kernel

memory exhaustion). ([CVE-2019-19082](/security/CVE-2019-19082))

It was discovered that the IO uring implementation in the Linux kernel did

not properly perform credentials checks in certain situations. A local

attacker could possibly use this to gain administrative privileges.

([CVE-2019-19241](/security/CVE-2019-19241))

Or Cohen discovered that the virtual console subsystem in the Linux kernel

did not properly restrict writes to unimplemented vcsu (unicode) devices. A

local attacker could possibly use this to cause a denial of service (system

crash) or have other unspecified impacts. ([CVE-2019-19252](/security/CVE-2019-19252))

It was discovered that the KVM hypervisor implementation in the Linux

kernel did not properly handle ioctl requests to get emulated CPUID

features. An attacker with access to /dev/kvm could use this to cause a

denial of service (system crash). ([CVE-2019-19332](/security/CVE-2019-19332))

It was discovered that a race condition existed in the Linux kernel on x86

platforms when keeping track of which process was assigned control of the

FPU. A local attacker could use this to cause a denial of service (memory

corruption) or possibly gain administrative privileges. ([CVE-2019-19602](/security/CVE-2019-19602))

It was discovered that the ext4 file system implementation in the Linux

kernel did not properly handle certain conditions. An attacker could use

this to specially craft an ext4 file system that, when mounted, could cause

a denial of service (system crash) or possibly execute arbitrary code.

([CVE-2019-19767](/security/CVE-2019-19767))

It was discovered that the Kvaser CAN/USB driver in the Linux kernel did

not properly initialize memory in certain situations. A local attacker

could possibly use this to expose sensitive information (kernel memory).

([CVE-2019-19947](/security/CVE-2019-19947))

Gao Chuan discovered that the SAS Class driver in the Linux kernel

contained a race condition that could lead to a NULL pointer dereference. A

local attacker could possibly use this to cause a denial of service (system

crash). ([CVE-2019-19965](/security/CVE-2019-19965))

It was discovered that the B2C2 FlexCop USB device driver in the Linux

kernel did not properly validate device metadata. A physically proximate

attacker could use this to cause a denial of service (system crash).

([CVE-2019-15291](/security/CVE-2019-15291))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 19.10

* [linux-image-5.3.0-1009-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle)
  -
  [5.3.0-1009.10](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle/5.3.0-1009.10)
* [linux-image-5.3.0-1010-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [5.3.0-1010.11](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/5.3.0-1010.11)
* [linux-image-5.3.0-1011-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [5.3.0-1011.12](https://launchpad.net/ubuntu/%2Bsource/linux-aws/5.3.0-1011.12)
* [linux-image-5.3.0-1012-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp)
  -
  [5.3.0-1012.13](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp/5.3.0-1012.13)
* [linux-image-5.3.0-1013-azure](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure)
  -
  [5.3.0-1013.14](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure/5.3.0-1013.14)
* [linux-image-5.3.0-1018-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [5.3.0-1018.20](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/5.3.0-1018.20)
* [linux-image-5.3.0-40-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [5.3.0-40.32](https://launchpad.net/ubuntu/%2Bsource/linux-signed/5.3.0-40.32)
* [linux-image-5.3.0-40-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [5.3.0-40.32](https://launchpad.net/ubuntu/%2Bsource/linux/5.3.0-40.32)
* [linux-image-5.3.0-40-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [5.3.0-40.32](https://launchpad.net/ubuntu/%2Bsource/linux-signed/5.3.0-40.32)
* [linux-image-5.3.0-40-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [5.3.0-40.32](https://launchpad.net/ubuntu/%2Bsource/linux-signed/5.3.0-40.32)
* [linux-image-aws](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws)
  -
  [5.3.0.1011.13](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws/5.3.0.1011.13)
* [linux-image-azure](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure)
  -
  [5.3.0.1013.31](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure/5.3.0.1013.31)
* [linux-image-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [5.3.0.1012.13](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/5.3.0.1012.13)
* [linux-image-generic](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.3.0.40.34](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.3.0.40.34)
* [linux-image-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.3.0.40.34](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.3.0.40.34)
* [linux-image-gke](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [5.3.0.1012.13](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/5.3.0.1012.13)
* [linux-image-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm)
  -
  [5.3.0.1010.12](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm/5.3.0.1010.12)
* [linux-image-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.3.0.40.34](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.3.0.40.34)
* [linux-image-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle)
  -
  [5.3.0.1009.10](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle/5.3.0.1009.10)
* [linux-image-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2)
  -
  [5.3.0.1018.15](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2/5.3.0.1018.15)
* [linux-image-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.3.0.40.34](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.3.0.40.34)
* [linux-image-virtual](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.3.0.40.34](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.3.0.40.34)

##### Ubuntu 18.04

* [linux-image-5.3.0-1012-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp-5.3)
  -
  [5.3.0-1012.13~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp-5.3/5.3.0-1012.13~18.04.1)
* [linux-image-5.3.0-1013-azure](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure-5.3)
  -
  [5.3.0-1013.14~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure-5.3/5.3.0-1013.14~18.04.1)
* [linux-image-5.3.0-1018-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2-5.3)
  -
  [5.3.0-1018.20~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2-5.3/5.3.0-1018.20~18.04.1)
* [linux-image-5.3.0-40-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe)
  -
  [5.3.0-40.32~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe/5.3.0-40.32~18.04.1)
* [linux-image-5.3.0-40-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [5.3.0-40.32~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/5.3.0-40.32~18.04.1)
* [linux-image-5.3.0-40-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe)
  -
  [5.3.0-40.32~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe/5.3.0-40.32~18.04.1)
* [linux-image-azure-edge](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure-5.3)
  -
  [5.3.0.1013.13](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure-5.3/5.3.0.1013.13)
* [linux-image-gcp-edge](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp-5.3)
  -
  [5.3.0.1012.11](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp-5.3/5.3.0.1012.11)
* [linux-image-generic-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [5.3.0.40.97](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/5.3.0.40.97)
* [linux-image-generic-lpae-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [5.3.0.40.97](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/5.3.0.40.97)
* [linux-image-lowlatency-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [5.3.0.40.97](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/5.3.0.40.97)
* [linux-image-raspi2-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2-5.3)
  -
  [5.3.0.1018.7](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2-5.3/5.3.0.1018.7)
* [linux-image-snapdragon-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [5.3.0.40.97](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/5.3.0.40.97)
* [linux-image-virtual-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [5.3.0.40.97](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/5.3.0.40.97)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2019-15291](/security/CVE-2019-15291)
* [CVE-2019-16229](/security/CVE-2019-16229)
* [CVE-2019-16232](/security/CVE-2019-16232)
* [CVE-2019-18683](/security/CVE-2019-18683)
* [CVE-2019-18786](/security/CVE-2019-18786)
* [CVE-2019-18811](/security/CVE-2019-18811)
* [CVE-2019-19050](/security/CVE-2019-19050)
* [CVE-2019-19057](/security/CVE-2019-19057)
* [CVE-2019-19062](/security/CVE-2019-19062)
* [CVE-2019-19063](/security/CVE-2019-19063)
* [CVE-2019-19071](/security/CVE-2019-19071)
* [CVE-2019-19077](/security/CVE-2019-19077)
* [CVE-2019-19078](/security/CVE-2019-19078)
* [CVE-2019-19082](/security/CVE-2019-19082)
* [CVE-2019-19241](/security/CVE-2019-19241)
* [CVE-2019-19252](/security/CVE-2019-19252)
* [CVE-2019-19332](/security/CVE-2019-19332)
* [CVE-2019-19602](/security/CVE-2019-19602)
* [CVE-2019-19767](/security/CVE-2019-19767)
* [CVE-2019-19947](/security/CVE-2019-19947)
* [CVE-2019-19965](/security/CVE-2019-19965)
* [CVE-2019-14615](/security/CVE-2019-14615)
* [CVE-2019-15099](/security/CVE-2019-15099)

## Related notices

* [USN-4287-1](/security/notices/USN-4287-1)
* [USN-4287-2](/security/notices/USN-4287-2)
* [USN-4258-1](/security/notices/USN-4258-1)
* [USN-4254-1](/security/notices/USN-4254-1)
* [USN-4254-2](/security/notices/USN-4254-2)
* [USN-4285-1](/security/notices/USN-4285-1)
* [USN-4904-1](/security/notices/USN-4904-1)
* [USN-4427-1](/security/notices/USN-4427-1)
* [USN-4485-1](/security/notices/USN-4485-1)
* [USN-4286-1](/security/notices/USN-4286-1)
* [USN-4286-2](/security/notices/USN-4286-2)
* [USN-4255-2](/security/notices/USN-4255-2)
* [USN-4253-1](/security/notices/USN-4253-1)
* [USN-4255-1](/security/notices/USN-4255-1)
* [USN-4253-2](/security/notices/USN-4253-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

Â© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from security.netapp.com_f0c8e7d1_20250121_000655.html ===

[Skip to main content](#n-main-content)

* [NetApp.com](https://www.netapp.com/)
* [Support](https://mysupport.netapp.com)
* [Community](https://community.netapp.com)
* [Training](https://www.netapp.com/support-and-training/netapp-learning-services/)

* [Contact Us](https://www.netapp.com/company/contact-us/)

English
Ã¦Â—Â¥Ã¦ÂœÂ¬Ã¨ÂªÂž

[netapp-mark

NetApp

## Product Security](https://security.netapp.com)

Search

Search

* Search

Search

Search

* [Home](https://security.netapp.com/en)
* [Advisories](https://security.netapp.com/advisory/)
* [Bulletins](https://security.netapp.com/bulletins/)
* [Contact](https://security.netapp.com/contact/)
* [Policy](https://security.netapp.com/policy/)
* [Resources](https://security.netapp.com/resources/)
* [Certifications](https://security.netapp.com/certs/)

* [Home](https://security.netapp.com/en)
* [Advisory](https://security.netapp.com/advisory)
* [December 2019 Linux Kernel Vulnerabilities in NetApp Products](https://security.netapp.com/advisory/ntap-20200103-0001)

## December 2019 Linux Kernel Vulnerabilities in NetApp Products

circle-check-alt

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

close Ã—

#### Subscribe to NTAP-20200103-0001 updates

Email

Yes, please send me emails when NetApp Security Advisories are posted or updated.

 By filling and submitting this form, I understand and agree with the [NetApp privacy policy](https://www.netapp.com/company/legal/privacy-policy/ "Privacy Policy") and understand that I can unsubscribe from NetApp Security Advisory communications at any time.

Subscribe

#### Subscribe to NTAP-20200103-0001 advisory updates

OTP

Confirm

ionicons-v5-e

Confirmed your subscription to advisory alerts

close Ã—

#### Unsubscribe from NTAP-20200103-0001 advisory updates

Email

Unsubscribe

#### Unsubscribe from NTAP-20200103-0001 advisory updates

Email

Confirm

ionicons-v5-e

Unsubscribed successfully from advisory alerts

Subscribe to receive email updates

**Advisory ID:** NTAP-20200103-0001
**Version:**
23.0

**Last updated:**
06/09/2022

**Status:**
Final.

**CVEs:** CVE-2019-14815, CVE-2019-19227, CVE-2019-10220, CVE-2019-19318, CVE-2019-14896, CVE-2019-19252, CVE-2019-18660, CVE-2019-19319, CVE-2019-10207, CVE-2019-18675, CVE-2019-19602, CVE-2019-19378, CVE-2019-19377, CVE-2019-19447, CVE-2019-19448, CVE-2019-19449, CVE-2019-19768, CVE-2019-19769, CVE-2019-19770, CVE-2019-19767, CVE-2019-19807, CVE-2019-19241, CVE-2019-19815, CVE-2019-19814, CVE-2019-19816, CVE-2019-19813

Overview
#### Summary

Multiple NetApp products incorporate Linux kernel. Linux kernel versions prior to 5.4.2 are susceptible to vulnerabilities which when successfully exploited could lead to disclosure of sensitive information, addition or modification of data, or Denial of Service (DoS).

#### Impact

Successful exploitation of these vulnerabilities could lead to disclosure of sensitive information, addition or modification of data, or Denial of Service (DoS).

Brocade Fabric Operating System Firmware affected only by CVE-2019-19767.

#### Vulnerability Scoring Details

| **CVE** | **Score** | **Vector** |
| --- | --- | --- |
| [CVE-2019-10207](https://nvd.nist.gov/vuln/detail/CVE-2019-10207) | 5.5 (MEDIUM) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H |
| [CVE-2019-10220](https://nvd.nist.gov/vuln/detail/CVE-2019-10220) | 8.8 (HIGH) | CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-14815](https://nvd.nist.gov/vuln/detail/CVE-2019-14815) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H |
| [CVE-2019-14896](https://nvd.nist.gov/vuln/detail/CVE-2019-14896) | 9.8 (CRITICAL) | CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H |
| [CVE-2019-18660](https://nvd.nist.gov/vuln/detail/CVE-2019-18660) | 5.5 (MEDIUM) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N |
| [CVE-2019-18675](https://nvd.nist.gov/vuln/detail/CVE-2019-18675) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H |
| [CVE-2019-19227](https://nvd.nist.gov/vuln/detail/CVE-2019-19227) | 5.5 (MEDIUM) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H |
| [CVE-2019-19241](https://nvd.nist.gov/vuln/detail/CVE-2019-19241) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H |
| [CVE-2019-19252](https://nvd.nist.gov/vuln/detail/CVE-2019-19252) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H |
| [CVE-2019-19318](https://nvd.nist.gov/vuln/detail/CVE-2019-19318) | 5.5 (MEDIUM) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:N/I:N/A:H |
| [CVE-2019-19319](https://nvd.nist.gov/vuln/detail/CVE-2019-19319) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-19377](https://nvd.nist.gov/vuln/detail/CVE-2019-19377) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-19378](https://nvd.nist.gov/vuln/detail/CVE-2019-19378) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-19447](https://nvd.nist.gov/vuln/detail/CVE-2019-19447) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-19448](https://nvd.nist.gov/vuln/detail/CVE-2019-19448) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-19449](https://nvd.nist.gov/vuln/detail/CVE-2019-19449) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-19602](https://nvd.nist.gov/vuln/detail/CVE-2019-19602) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H |
| [CVE-2019-19767](https://nvd.nist.gov/vuln/detail/CVE-2019-19767) | 5.5 (MEDIUM) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:N/I:N/A:H |
| [CVE-2019-19768](https://nvd.nist.gov/vuln/detail/CVE-2019-19768) | 7.5 (HIGH) | CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H |
| [CVE-2019-19769](https://nvd.nist.gov/vuln/detail/CVE-2019-19769) | 7.5 (HIGH) | CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H |
| [CVE-2019-19770](https://nvd.nist.gov/vuln/detail/CVE-2019-19770) | 7.5 (HIGH) | CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H |
| [CVE-2019-19807](https://nvd.nist.gov/vuln/detail/CVE-2019-19807) | 5.5 (MEDIUM) | CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H |
| [CVE-2019-19813](https://nvd.nist.gov/vuln/detail/CVE-2019-19813) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-19814](https://nvd.nist.gov/vuln/detail/CVE-2019-19814) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |
| [CVE-2019-19815](https://nvd.nist.gov/vuln/detail/CVE-2019-19815) | 5.5 (MEDIUM) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:N/I:N/A:H |
| [CVE-2019-19816](https://nvd.nist.gov/vuln/detail/CVE-2019-19816) | 7.8 (HIGH) | CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H |

#### Exploitation and Public Announcements

NetApp is aware of public discussion of this vulnerability.

Affected Products
#### Affected Products

* AFF Baseboard Management Controller (BMC) - A700s
* Active IQ Unified Manager for VMware vSphere
* FAS/AFF Baseboard Management Controller (BMC) - 8300/8700/A400
* NetApp Cloud Backup (formerly AltaVault)
* NetApp Data Availability Services
* NetApp HCI Baseboard Management Controller (BMC) - H610S
* NetApp SolidFire & HCI Management Node
* NetApp SolidFire Baseboard Management Controller (BMC)
* NetApp SteelStore Cloud Integrated Storage

#### Products Not Affected

* 7-Mode Transition Tool
* ATTO FibreBridge - 6500N
* Active IQ Unified Manager for Linux
* Active IQ Unified Manager for Microsoft Windows
* Active IQ mobile app
* Astra Trident
* Brocade Fabric Operating System Firmware
* Brocade SAN Navigator (SANnav)
* Cloud Insights Telegraf Agent
* Cloud Manager
* Cloud Secure Agent
* Cloud Volumes ONTAP Mediator
* Clustered Data ONTAP
* Clustered Data ONTAP Antivirus Connector
* E-Series SANtricity OS Controller Software 11.x
* E-Series SANtricity Storage Manager
* E-Series SANtricity Unified Manager and Web Services Proxy
* Element HealthTools
* Element Plug-in for vCenter Server
* FAS/AFF BIOS
* FAS/AFF Baseboard Management Controller (BMC) - A320/C190/A220/FAS2720/FAS2750/A800
* Host Utilities - SAN for Linux
* Host Utilities - SAN for Windows
* MetroCluster Tiebreaker for clustered Data ONTAP
* NetApp Cloud Backup OST Plug-in (formerly AltaVault OST Plug-in)
* NetApp Converged Systems Advisor Agent
* NetApp E-Series Performance Analyzer
* NetApp HCI Baseboard Management Controller (BMC) - H300S/H500S/H700S/H300E/H500E/H700E/H410S
* NetApp HCI Baseboard Management Controller (BMC) - H410C
* NetApp HCI Compute Node (Bootstrap OS)
* NetApp HCI Compute Node BIOS
* NetApp HCI Storage Nodes
* NetApp Manageability SDK
* NetApp NFS Plug-in for VMware VAAI
* NetApp SANtricity SMI-S Provider
* NetApp SMI-S Provider
* NetApp SolidFire Plug-in for vRealize Orchestrator (SolidFire vRO)
* NetApp SolidFire, Enterprise SDS & HCI Storage Node (Element Software)
* NetApp VASA Provider for Clustered Data ONTAP 9.7 and above
* NetApp XCP NFS
* NetApp XCP SMB
* ONTAP Mediator
* ONTAP Select Deploy administration utility
* OnCommand Insight
* OnCommand Workflow Automation
* Open Systems SnapVault Agent
* SAS Firmware
* Service Processor
* Single Mailbox Recovery
* Snap Creator Framework
* SnapCenter
* SnapCenter Plug-in for VMware vSphere
* SnapDrive for Unix
* SnapManager for Hyper-V
* SnapManager for Oracle
* SnapManager for SAP
* SolidFire Storage Replication Adapter
* Storage Replication Adapter for Clustered Data ONTAP for VMware vSphere 9.7 and above
* Storage Services Connector
* StorageGRID (formerly StorageGRID Webscale)
* StorageGRID Baseboard Management Controller (BMC)
* StorageGRID9 (9.x and prior)
* System Manager 9.x
* Virtual Storage Console for VMware vSphere 9.7 and above

Remediation
#### Software Versions and Fixes

NetApp's currently available patches are listed below.

| **Product** | **First Fixed in Release** |
| --- | --- |
| **AFF Baseboard Management Controller (BMC) - A700s** | <https://mysupport.netapp.com/site/downloads/firmware/system-firmware-diagnostics> The first fixed version is 1.81. To download the patch, choose Ã¢Â€ÂœService ImageÃ¢Â€Â from the AFF\_A700s Ã¢Â€ÂœSystem Firmware + Diagnostics DownloadÃ¢Â€Â page. |
| **NetApp HCI Baseboard Management Controller (BMC) - H610S** | <https://mysupport.netapp.com/site/products/all/details/5d9f1108e01d9c0001ee51dd/downloads-tab/download/62542/Compute_Firmware_Bundle> <https://mysupport.netapp.com/site/products/all/details/element-software/downloads-tab/download/62654/Storage_Firmware_Bundle> First included in Compute Firmware Bundle version 2.27. |
| **NetApp Cloud Backup (formerly AltaVault)** | NetApp Cloud Backup (formerly AltaVault) has no plans to address this vulnerability. See the [EOA announcement](https://mysupport.netapp.com/info/communications/ECMLP2880179.html) for more information. |
| **FAS/AFF Baseboard Management Controller (BMC) - 8300/8700/A400** | <https://mysupport.netapp.com/site/downloads/firmware/system-firmware-diagnostics> Fixed by bug 1289797. First fixed versions include the following: 13.3 |
| **NetApp SolidFire Baseboard Management Controller (BMC)** | NetApp SolidFire Baseboard Management Controller (BMC) has no plans to address this vulnerability. See the [EOA announcement](https://mysupport.netapp.com/info/communications/ECMLP2847476.html%20) for more information. |
| **NetApp SolidFire & HCI Management Node** | <https://mysupport.netapp.com/site/products/all/details/element-software/downloads-tab/download/62654/12.5> <https://mysupport.netapp.com/site/products/all/details/netapp-hci/downloads-tab/download/62542/1.10> |
| **NetApp Data Availability Services** | NetApp Data Availability Services has no plans to address this vulnerability. See the [EOA announcement](https://mysupport.netapp.com/info/communications/ECMLP2870808.html) for more information. |
| **NetApp SteelStore Cloud Integrated Storage** | NetApp SteelStore Cloud Integrated Storage has no plans to address this vulnerability. See the [EOA announcement](https://mysupport.netapp.com/info/communications/ECMLP2397079.html) for more information. |
| **Active IQ Unified Manager for VMware vSphere** | <https://mysupport.netapp.com/site/products/all/details/activeiq-unified-manager/downloads-tab/download/62791/9.7P1/downloads> <https://mysupport.netapp.com/site/products/all/details/activeiq-unified-manager/about-tab/download/62791/9.7P1> |

#### Workarounds

None at this time.

#### Obtaining Software Fixes

Software fixes will be made available through the NetApp Support website in the Software Download section.

<https://mysupport.netapp.com/site/downloads/>

Customers who do not have access to the Support website should contact Technical Support at the number below to obtain the patches.

#### Contact Information

Check <http://mysupport.netapp.com> for further
updates.

**Technical Support**

Revision History
#### Status of This Notice

**Final.**

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

This advisory is posted at the following link:

<https://security.netapp.com/advisory/NTAP-20200103-0001>
#### Revision History

| **Revision #** | **Date** | **Comments** |
| --- | --- | --- |
| 1.0 | 20200103 | Initial Public Release |
| 2.0 | 20200106 | Active IQ Unified Manager (formerly OnCommand Unified Manager) for VMware vSphere 9.5 and above moved to Affected Products |
| 3.0 | 20200127 | Cloud Volumes ONTAP Mediator moved to Products Not Affected |
| 4.0 | 20200205 | E-Series SANtricity OS Controller Baseboard Management Controller (BMC) - EF600A moved to Products Not Affected |
| 5.0 | 20200207 | AFF Baseboard Management Controller (BMC) - A700s moved to Affected Products |
| 6.0 | 20200211 | NetApp Data Availability Services moved to Affected Products |
| 7.0 | 20200219 | Element Software (formerly SolidFire Element OS), NetApp HCI Compute Nodes, NetApp HCI Storage Nodes moved to Products Not Affected and Element Software Management Node moved to Affected Products |
| 8.0 | 20200311 | NetApp HCI Baseboard Management Controller (BMC) - H300S/H500S/H700S/H300E/H500E/H700E/H410S moved to Products Not Affected |
| 9.0 | 20200324 | FAS/AFF Baseboard Management Controller (BMC) and Service Processor moved to Products Not Affected |
| 10.0 | 20200423 | Host Utilities - SAN for Linux moved to Products Not Affected |
| 11.0 | 20200424 | Host Utilities - SAN for Unix moved to Products Not Affected |
| 12.0 | 20200504 | FAS/AFF Baseboard Management Controller (BMC) - 8300/8700/A400 moved to Affected Products |
| 13.0 | 20200618 | Active IQ Unified Manager (formerly OnCommand Unified Manager) for VMware vSphere 9.5 and above added to Software Versions and Fixes |
| 14.0 | 20200724 | NetApp Data Availability Services moved to Won't Fix status |
| 15.0 | 20200901 | NetApp SteelStore Cloud Integrated Storage moved to Won't Fix status |
| 16.0 | 20201012 | NetApp HCI Baseboard Management Controller (BMC) - H610S added to Software Versions and Fixes |
| 17.0 | 20201112 | AFF Baseboard Management Controller (BMC) - A700s added to Software Versions and Fixes |
| 18.0 | 20210414 | Brocade Fabric Operating System Firmware moved to Affected Products |
| 19.0 | 20210421 | FAS/AFF Baseboard Management Controller (BMC) - 8300/8700/A400 added to Software Versions and Fixes |
| 20.0 | 20211101 | NetApp SolidFire Baseboard Management Controller (BMC) moved to Won't Fix status |
| 21.0 | 20220106 | NetApp Cloud Backup (formerly AltaVault) moved to Won't Fix status |
| 22.0 | 20220527 | NetApp SolidFire & HCI Management Node added to Software Versions and Fixes |
| 23.0 | 20220609 | After additional review Brocade Fabric Operating System Firmware moved to Products Not Affected, Final status |

This document is provided solely for informational purposes. All information is based upon NetAppÃ¢Â€Â™s current knowledge and understanding of the hardware and software products tested by NetApp, and the methodology and assumptions used by NetApp. NetApp is not responsible for any errors or omissions that may be contained herein, and no warranty, representation, or other legal commitment or obligation is being provided by NetApp. Ã‚Â© 2025 NetApp, Inc. All rights reserved. No portions of this document may be reproduced without prior written consent of NetApp, Inc.

 Â©  NetApp

Have feedback for our website?
[Let us know](https://www.netapp.com/forms/site-feedback/)



=== Content from git.kernel.org_9af17777_20250121_000654.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jens Axboe <axboe@kernel.dk> | 2019-11-25 08:52:30 -0700 |
| --- | --- | --- |
| committer | Jens Axboe <axboe@kernel.dk> | 2019-11-25 19:56:11 -0700 |
| commit | [181e448d8709e517c9c7b523fcd209f24eb38ca7](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)) | |
| tree | [0245d1dc6356bd397fb604a28b5f9f716060b37f](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7) | |
| parent | [576a347b7af8abfbddc80783fb6629c2894d036e](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=576a347b7af8abfbddc80783fb6629c2894d036e) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7&id2=576a347b7af8abfbddc80783fb6629c2894d036e)) | |
| download | [linux-181e448d8709e517c9c7b523fcd209f24eb38ca7.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-181e448d8709e517c9c7b523fcd209f24eb38ca7.tar.gz) | |

io\_uring: async workers should inherit the user credsIf we don't inherit the original task creds, then we can confuse users
like fuse that pass creds in the request header. See link below on
identical aio issue.
Link: [https://lore.kernel.org/linux-fsdevel/26f0d78e-99ca-2f1b-78b9-433088053a61@scylladb.com/T/#u](https://lore.kernel.org/linux-fsdevel/26f0d78e-99ca-2f1b-78b9-433088053a61%40scylladb.com/T/#u)
Signed-off-by: Jens Axboe <axboe@kernel.dk>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)

| -rw-r--r-- | [fs/io-wq.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/io-wq.c?id=181e448d8709e517c9c7b523fcd209f24eb38ca7) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [fs/io-wq.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/io-wq.h?id=181e448d8709e517c9c7b523fcd209f24eb38ca7) | 1 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [fs/io\_uring.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/io_uring.c?id=181e448d8709e517c9c7b523fcd209f24eb38ca7) | 8 | |  |  |  | | --- | --- | --- | |

3 files changed, 19 insertions, 0 deletions

| diff --git a/fs/io-wq.c b/fs/io-wq.cindex 2b4276990571fe..31c5a10b082542 100644--- a/[fs/io-wq.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/io-wq.c?id=576a347b7af8abfbddc80783fb6629c2894d036e)+++ b/[fs/io-wq.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/io-wq.c?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)@@ -57,6 +57,7 @@ struct io\_worker {  struct rcu\_head rcu; struct mm\_struct \*mm;+ const struct cred \*creds; struct files\_struct \*restore\_files; }; @@ -111,6 +112,7 @@ struct io\_wq {  struct task\_struct \*manager; struct user\_struct \*user;+ struct cred \*creds; struct mm\_struct \*mm; refcount\_t refs; struct completion done;@@ -136,6 +138,11 @@ static bool \_\_io\_worker\_unuse(struct io\_wqe \*wqe, struct io\_worker \*worker) { bool dropped\_lock = false; + if (worker->creds) {+ revert\_creds(worker->creds);+ worker->creds = NULL;+ }+ if (current->files != worker->restore\_files) { \_\_acquire(&wqe->lock); spin\_unlock\_irq(&wqe->lock);@@ -442,6 +449,8 @@ next: set\_fs(USER\_DS); worker->mm = wq->mm; }+ if (!worker->creds)+ worker->creds = override\_creds(wq->creds); if (test\_bit(IO\_WQ\_BIT\_CANCEL, &wq->state)) work->flags |= IO\_WQ\_WORK\_CANCEL; if (worker->mm)@@ -995,6 +1004,7 @@ struct io\_wq \*io\_wq\_create(unsigned bounded, struct io\_wq\_data \*data)  /\* caller must already hold a reference to this \*/ wq->user = data->user;+ wq->creds = data->creds;  i = 0; for\_each\_online\_node(node) {diff --git a/fs/io-wq.h b/fs/io-wq.hindex bb8f1c8f8e24aa..5cd8c7697e8890 100644--- a/[fs/io-wq.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/io-wq.h?id=576a347b7af8abfbddc80783fb6629c2894d036e)+++ b/[fs/io-wq.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/io-wq.h?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)@@ -45,6 +45,7 @@ typedef void (put\_work\_fn)(struct io\_wq\_work \*); struct io\_wq\_data { struct mm\_struct \*mm; struct user\_struct \*user;+ struct cred \*creds;  get\_work\_fn \*get\_work; put\_work\_fn \*put\_work;diff --git a/fs/io\_uring.c b/fs/io\_uring.cindex fabae84396bc23..b6c6fdc12de7d8 100644--- a/[fs/io\_uring.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/io_uring.c?id=576a347b7af8abfbddc80783fb6629c2894d036e)+++ b/[fs/io\_uring.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/io_uring.c?id=181e448d8709e517c9c7b523fcd209f24eb38ca7)@@ -237,6 +237,8 @@ struct io\_ring\_ctx {  struct user\_struct \*user; + struct cred \*creds;+ /\* 0 is for ctx quiesce/reinit/free, 1 is for sqo\_thread started \*/ struct completion \*completions; @@ -3267,6 +3269,7 @@ static int io\_sq\_thread(void \*data) { struct io\_ring\_ctx \*ctx = data; struct mm\_struct \*cur\_mm = NULL;+ const struct cred \*old\_cred; mm\_segment\_t old\_fs; DEFINE\_WAIT(wait); unsigned inflight;@@ -3277,6 +3280,7 @@ static int io\_sq\_thread(void \*data)  old\_fs = get\_fs(); set\_fs(USER\_DS);+ old\_cred = override\_creds(ctx->creds);  ret = timeout = inflight = 0; while (!kthread\_should\_park()) {@@ -3383,6 +3387,7 @@ static int io\_sq\_thread(void \*data) unuse\_mm(cur\_mm); mmput(cur\_mm); }+ revert\_creds(old\_cred);  kthread\_parkme(); @@ -4009,6 +4014,7 @@ static int io\_sq\_offload\_start(struct io\_ring\_ctx \*ctx,  data.mm = ctx->sqo\_mm; data.user = ctx->user;+ data.creds = ctx->creds; data.get\_work = io\_get\_work; data.put\_work = io\_put\_work; @@ -4363,6 +4369,7 @@ static void io\_ring\_ctx\_free(struct io\_ring\_ctx \*ctx) io\_unaccount\_mem(ctx->user, ring\_pages(ctx->sq\_entries, ctx->cq\_entries)); free\_uid(ctx->user);+ put\_cred(ctx->creds); kfree(ctx->completions); kmem\_cache\_free(req\_cachep, ctx->fallback\_req); kfree(ctx);@@ -4715,6 +4722,7 @@ static int io\_uring\_create(unsigned entries, struct io\_uring\_params \*p) ctx->compat = in\_compat\_syscall(); ctx->account\_mem = account\_mem; ctx->user = user;+ ctx->creds = prepare\_creds();  ret = io\_allocate\_scq\_urings(ctx, p); if (ret) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-21 00:05:31 +0000



=== Content from git.kernel.org_57378e47_20250121_000654.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=d69e07793f891524c6bbf1e75b9ae69db4450953)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d69e07793f891524c6bbf1e75b9ae69db4450953)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d69e07793f891524c6bbf1e75b9ae69db4450953)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d69e07793f891524c6bbf1e75b9ae69db4450953)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jens Axboe <axboe@kernel.dk> | 2019-11-25 17:04:13 -0700 |
| --- | --- | --- |
| committer | Jens Axboe <axboe@kernel.dk> | 2019-11-26 15:02:53 -0700 |
| commit | [d69e07793f891524c6bbf1e75b9ae69db4450953](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d69e07793f891524c6bbf1e75b9ae69db4450953) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=d69e07793f891524c6bbf1e75b9ae69db4450953)) | |
| tree | [054fc5da5cbcbc2922575d0f13b83d5023c96755](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d69e07793f891524c6bbf1e75b9ae69db4450953) | |
| parent | [4257c8ca13b084550574b8c9a667d9c90ff746eb](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=4257c8ca13b084550574b8c9a667d9c90ff746eb) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d69e07793f891524c6bbf1e75b9ae69db4450953&id2=4257c8ca13b084550574b8c9a667d9c90ff746eb)) | |
| download | [linux-d69e07793f891524c6bbf1e75b9ae69db4450953.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-d69e07793f891524c6bbf1e75b9ae69db4450953.tar.gz) | |

net: disallow ancillary data for \_\_sys\_{send,recv}msg\_file()Only io\_uring uses (and added) these, and we want to disallow the
use of sendmsg/recvmsg for anything but regular data transfers.
Use the newly added prep helper to split the msghdr copy out from
the core function, to check for msg\_control and msg\_controllen
settings. If either is set, we return -EINVAL.
Acked-by: David S. Miller <davem@davemloft.net>
Signed-off-by: Jens Axboe <axboe@kernel.dk>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d69e07793f891524c6bbf1e75b9ae69db4450953)

| -rw-r--r-- | [net/socket.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/net/socket.c?id=d69e07793f891524c6bbf1e75b9ae69db4450953) | 43 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 37 insertions, 6 deletions

| diff --git a/net/socket.c b/net/socket.cindex 98568ae58bad43..c78c3d37c884ff 100644--- a/[net/socket.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/socket.c?id=4257c8ca13b084550574b8c9a667d9c90ff746eb)+++ b/[net/socket.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/socket.c?id=d69e07793f891524c6bbf1e75b9ae69db4450953)@@ -2389,12 +2389,27 @@ static int \_\_\_sys\_sendmsg(struct socket \*sock, struct user\_msghdr \_\_user \*msg, /\* \* BSD sendmsg interface \*/-long \_\_sys\_sendmsg\_sock(struct socket \*sock, struct user\_msghdr \_\_user \*msg,+long \_\_sys\_sendmsg\_sock(struct socket \*sock, struct user\_msghdr \_\_user \*umsg, unsigned int flags) {- struct msghdr msg\_sys;+ struct iovec iovstack[UIO\_FASTIOV], \*iov = iovstack;+ struct sockaddr\_storage address;+ struct msghdr msg = { .msg\_name = &address };+ ssize\_t err;++ err = sendmsg\_copy\_msghdr(&msg, umsg, flags, &iov);+ if (err)+ return err;+ /\* disallow ancillary data requests from this path \*/+ if (msg.msg\_control || msg.msg\_controllen) {+ err = -EINVAL;+ goto out;+ } - return \_\_\_sys\_sendmsg(sock, msg, &msg\_sys, flags, NULL, 0);+ err = \_\_\_\_sys\_sendmsg(sock, &msg, flags, NULL, 0);+out:+ kfree(iov);+ return err; }  long \_\_sys\_sendmsg(int fd, struct user\_msghdr \_\_user \*msg, unsigned int flags,@@ -2593,12 +2608,28 @@ static int \_\_\_sys\_recvmsg(struct socket \*sock, struct user\_msghdr \_\_user \*msg, \* BSD recvmsg interface \*/ -long \_\_sys\_recvmsg\_sock(struct socket \*sock, struct user\_msghdr \_\_user \*msg,+long \_\_sys\_recvmsg\_sock(struct socket \*sock, struct user\_msghdr \_\_user \*umsg, unsigned int flags) {- struct msghdr msg\_sys;+ struct iovec iovstack[UIO\_FASTIOV], \*iov = iovstack;+ struct sockaddr\_storage address;+ struct msghdr msg = { .msg\_name = &address };+ struct sockaddr \_\_user \*uaddr;+ ssize\_t err; - return \_\_\_sys\_recvmsg(sock, msg, &msg\_sys, flags, 0);+ err = recvmsg\_copy\_msghdr(&msg, umsg, flags, &uaddr, &iov);+ if (err)+ return err;+ /\* disallow ancillary data requests from this path \*/+ if (msg.msg\_control || msg.msg\_controllen) {+ err = -EINVAL;+ goto out;+ }++ err = \_\_\_\_sys\_recvmsg(sock, &msg, umsg, uaddr, flags, 0);+out:+ kfree(iov);+ return err; }  long \_\_sys\_recvmsg(int fd, struct user\_msghdr \_\_user \*msg, unsigned int flags, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-21 00:05:31 +0000


