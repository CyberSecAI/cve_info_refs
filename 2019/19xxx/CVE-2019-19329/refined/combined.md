=== Content from gerrit.wikimedia.org_c8bba5e4_20250121_010937.html ===




=== Content from phabricator.wikimedia.org_9d64417e_20250121_031739.html ===
[HomePhabricator](/)

* SearchConfigure Global Search
 [Auth](/auth/)  Login

Click the *MediaWiki* button below to connect your [Wikimedia unified account](https://meta.wikimedia.org/wiki/Help%3AUnified_login). Alternatively, click the *Wikitech Account (LDAP)* button to connect your [Developer account](https://www.mediawiki.org/wiki/Developer_account) credentials.

In case of doubt, [check the Phabricator Help](https://www.mediawiki.org/wiki/Phabricator/Help#Creating_your_account).

Log In or RegisterMediaWikiDeveloper Account Log InLDAP Account (IDP)
# Log In or Register with LDAP

LDAP UsernameLDAP PasswordLog In or RegisterTrouble logging in? [Send a login link to your email address.](/login/email/)Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. · [Wikimedia Foundation](https://wikimediafoundation.org/) · [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) · [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) · [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) · [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) · [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) · [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) · [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)

=== Content from gerrit.wikimedia.org_c3ce400c_20250121_010937.html ===
Gitiles [Code Review](https://gerrit.wikimedia.org/r/) [Sign In](https://gerrit.wikimedia.org/r/login/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267) [gerrit.wikimedia.org](/r/plugins/gitiles/?format=HTML) / [wikidata](/r/plugins/gitiles/wikidata/) / [query](/r/plugins/gitiles/wikidata/query/) / [gui](/r/plugins/gitiles/wikidata/query/gui/) / d9f964b88c01748e278ca8c4b8929a8ef0ef0267

| commit | d9f964b88c01748e278ca8c4b8929a8ef0ef0267 | [[log](/r/plugins/gitiles/wikidata/query/gui/%2Blog/d9f964b88c01748e278ca8c4b8929a8ef0ef0267)] [[tgz](/r/plugins/gitiles/wikidata/query/gui/%2Barchive/d9f964b88c01748e278ca8c4b8929a8ef0ef0267.tar.gz)] |
| --- | --- | --- |
| author | Lucas Werkmeister <lucas.werkmeister@wikimedia.de> | Fri Oct 11 18:26:48 2019 +0200 |
| committer | Lucas Werkmeister <lucas.werkmeister@wikimedia.de> | Thu Nov 07 14:16:49 2019 +0100 |
| tree | [8a425d22a83b7341ae08fb8ba4809b879627eecd](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/) |
| parent | [eebfc077cdf688b4023503494811864e5f1d71ba](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E) [[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/)] |

```
Render MathML using MathJax

Bug: T214980
Change-Id: [I05533b97d5fc1ed0f64b306d9b556d0ee31fe56c](https://gerrit.wikimedia.org/r/#/q/I05533b97d5fc1ed0f64b306d9b556d0ee31fe56c)

```

* [.jshintrc](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/.jshintrc)[[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/#F0)]
* [Gruntfile.js](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/Gruntfile.js)[[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/#F1)]
* [embed.html](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/embed.html)[[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/#F2)]
* [index.html](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/index.html)[[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/#F3)]
* [package-lock.json](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/package-lock.json)[[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/#F4)]
* [package.json](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/package.json)[[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/#F5)]
* [wikibase/queryService/ui/ResultView.js](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/wikibase/queryService/ui/ResultView.js)[[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/#F6)]
* [wikibase/queryService/ui/resultBrowser/helper/FormatterHelper.js](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/wikibase/queryService/ui/resultBrowser/helper/FormatterHelper.js)[[diff](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267%5E%21/#F7)]

8 files changedtree: 8a425d22a83b7341ae08fb8ba4809b879627eecd

1. [dist/](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/dist/)
2. [examples/](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/examples/)
3. [i18n/](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/i18n/)
4. [polestar/](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/polestar/)
5. [tests/](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/tests/)
6. [vendor/](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/vendor/)
7. [wikibase/](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/wikibase/)
8. [.gitignore](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/.gitignore)
9. [.gitreview](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/.gitreview)
10. [.jscsrc](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/.jscsrc)
11. [.jshintignore](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/.jshintignore)
12. [.jshintrc](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/.jshintrc)
13. [.stylelintrc](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/.stylelintrc)
14. [default-config.json](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/default-config.json)
15. [embed.html](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/embed.html)
16. [favicon.ico](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/favicon.ico)
17. [Gruntfile.js](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/Gruntfile.js)
18. [index.html](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/index.html)
19. [jsduck.json](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/jsduck.json)
20. [LICENSE](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/LICENSE)
21. [logo-embed.svg](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/logo-embed.svg)
22. [logo.svg](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/logo.svg)
23. [maint.html](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/maint.html)
24. [package-lock.json](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/package-lock.json)
25. [package.json](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/package.json)
26. [pom.xml](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/pom.xml)
27. [README.md](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/README.md)
28. [robots.txt](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/robots.txt)
29. [style.less](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/style.less)
30. [wdio.conf.js](/r/plugins/gitiles/wikidata/query/gui/%2B/d9f964b88c01748e278ca8c4b8929a8ef0ef0267/wdio.conf.js)

README.md
# Wikibase Query Service GUI

This repository contains the GUI for the [Wikidata Query Service](https://query.wikidata.org/).

Please see more details about the service in the [User Manual](https://www.mediawiki.org/wiki/Wikidata_Query_Service/User_Manual).

## Download & setup

Clone git repo, go into created folder and then pull all dependencies via npm package manager.

```
$ git clone https://gerrit.wikimedia.org/r/wikidata/query/gui
$ cd gui
$ npm install

```

Alternatively, use `npm install`.

```
npm install wikidata-query-gui

```
## Configuration

Per default the Wikibase Query Service GUI is configured to be used as a local development test instance. It can be customized by creating a `custom-config.json` in the repository's root dir. This file can be used to override any of the default settings obtained from `default-config.json`.

## Run tests

Run JSHint, JSCS and QUnit tests.

```
$ npm test

```
## Debug

Start a test server for local debugging. Do not use it in production.

```
$ npm start

```
## Build

Create a build with bundled and minified files.

```
$ npm run build

```
## Deploy

Create a build and push it to the deployment branch via git review.

```
$ npm run deploy

```

Please make sure you have defined a gitreview username:

```
git config --global --add gitreview.username "[username]"

```
## Components

### Editor

A [CodeMirror](https://codemirror.net/) based SPARQL editor with code completion (ctrl+space) and tooltips (hover).

```
var editor = new wikibase.queryService.ui.editor.Editor();
editor.fromTextArea( $( '.editor' )[0] );

```

See `examples/editor.html`.

### Example dialog

A dialog that allows browsing of SPARQL examples.

```
new wikibase.queryService.ui.dialog.QueryExampleDialog(  $element, querySamplesApi, callback, previewUrl );

```

See `examples/dialog.html`.

### SPARQL

```
var api = new wikibase.queryService.api.Sparql();
api.query( query ).done( function() {
	var json = JSON.parse( api.getResultAsJson() );

} );

```

See `examples/sparql.html`. [JSFiddle.net](https://jsfiddle.net/jonaskress/qpuynfz8/)

### Result Views

Views that allow rendering SPARQL results ([see documentation](https://www.wikidata.org/wiki/Wikidata%3ASPARQL_query_service/Wikidata_Query_Help/Result_Views)).

```
var api = new wikibase.queryService.api.Sparql();
api.query( query ).done(function() {
	var result = new wikibase.queryService.ui.resultBrowser.CoordinateResultBrowser();
	result.setResult( api.getResultRawData() );
	result.draw( element );
} );

```

See `examples/result.html`. [JSFiddle.net](https://jsfiddle.net/jonaskress/9dhv0yLp/)

### Release Notes and npm package

Unfortunately there are no releases and the provided code and interfaces are not considered to be stable. Also the dist/ folder contains a build that may not reflect the current code on master branch.

  Powered by [Gitiles](https://gerrit.googlesource.com/gitiles/)[txt](?format=TEXT) [json](?format=JSON)

=== Content from lists.wikimedia.org_27b1a993_20250121_010938.html ===


[lists.wikimedia.org](/hyperkitty/)

[Sign In](/accounts/login/?next=/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/message/LBL23KTGWXCPLURDR2KF66FIH66HQTTE/)
[Sign Up](/accounts/signup/?next=/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/message/LBL23KTGWXCPLURDR2KF66FIH66HQTTE/)

* [Sign In](/accounts/login/?next=/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/message/LBL23KTGWXCPLURDR2KF66FIH66HQTTE/)
* [Sign Up](/accounts/signup/?next=/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/message/LBL23KTGWXCPLURDR2KF66FIH66HQTTE/)

* [Manage this list](/postorius/lists/wikidata-tech.lists.wikimedia.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2025/1/)

### 2024

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2024/1/)

### 2023

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2023/1/)

### 2022

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2022/1/)

### 2021

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2021/1/)

### 2020

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2020/1/)

### 2019

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2019/1/)

### 2018

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2018/1/)

### 2017

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2017/1/)

### 2016

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2016/1/)

### 2015

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2015/1/)

### 2014

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/5/)
* [April](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/4/)
* [March](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/3/)
* [February](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/2/)
* [January](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2014/1/)

### 2013

* [December](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2013/12/)
* [November](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2013/11/)
* [October](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2013/10/)
* [September](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2013/9/)
* [August](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2013/8/)
* [July](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2013/7/)
* [June](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2013/6/)
* [May](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/2013/5/)

[List overview](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/)

[Download](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/export/wikidata-tech%40lists.wikimedia.org-LBL23KTGWXCPLURDR2KF66FIH66HQTTE.mbox.gz?message=LBL23KTGWXCPLURDR2KF66FIH66HQTTE "This message in gzipped mbox format")

[thread](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/thread/LBL23KTGWXCPLURDR2KF66FIH66HQTTE/#LBL23KTGWXCPLURDR2KF66FIH66HQTTE)

# [Wikidata-tech] Wikibase: security fix available for the Query Service GUI

[Léa Lacroix](/hyperkitty/users/0b83d83afd6a4b6a843e304e9cf1eaa9/ "See the profile for Léa Lacroix")

7 Nov
2019

7 Nov
'19

5:58 p.m.

Hello all,

-and sorry for cross-posting-

This message is important to everyone running an instance of Wikibase
including the Query Service GUI.

We just released a new version of the Wikidata Query Service GUI. This
release is primarily to fix a security issue described in T233213
<https://phabricator.wikimedia.org/T233213> (hidden task, will be made
public soon). The fix has been successfully deployed for the Wikidata Query
Service.

In order to keep your instance safe, please make sure to update your Query
Service GUI!

Git repositories, releases and currently active version docker images also
include the latest fixed code (see links below). If you have a local test
setup using the docker-compose example then see:
<https://gist.github.com/addshore/36f8d6fe2331d28ca8f70df5abda20fd>

Gerrit repositories:

-

wikidata/query/gui after commit d9f964b88c01748e278ca8c4b8929a8ef0ef0267
-

wikidata/query/gui-deploy after commit
7445472ab0ec61890b42e4d524416fbc6a18aa8a
-

wikidata/query/deploy after 094d9cda98f3fb706cf9c25aefa3eb33f9f6999a

Docker images:

-

wdqs:0.3.6 (all versions of this tag)
-

wdqs:latest from digest
sha256:04237b42d0b904a2c49ecb7059c82ace8265ba0b7f690ee2d4b3004ad39517ee
-

wdqs-frontend:latest from digest
sha256:1308a7d6622b1e141783336fb52cd6993973321077f58359fbf907b77e105ca3
-

wdqs-frontend:legacy from digest
sha256:f830abd53fe5e79299011211a2aab7ad947181e56785c06eed6e9bd6b430d4ce

Downloadable releases:

-

[https://archiva.wikimedia.org/repository/snapshots/org/wikidata/query/rdf/se...](https://archiva.wikimedia.org/repository/snapshots/org/wikidata/query/rdf/service/0.3.6-SNAPSHOT/)

If you have any questions or issues updating your code, please let us know
(you can write me an email, or ask in the Wikibase Telegram group
<https://t.me/joinchat/HGjGexZ9NE7BwpXzMsoDLA>)

Thanks for your understanding,

Cheers,

--
Léa Lacroix
Project Manager Community Communication for Wikidata
Wikimedia Deutschland e.V.
Tempelhofer Ufer 23-24
10963 Berlin
www.wikimedia.de
Wikimedia Deutschland - Gesellschaft zur Förderung Freien Wissens e. V.
Eingetragen im Vereinsregister des Amtsgerichts Berlin-Charlottenburg unter
der Nummer 23855 Nz. Als gemeinnützig anerkannt durch das Finanzamt für
Körperschaften I Berlin, Steuernummer 27/029/42207.

Attachments:

* [attachment.htm](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/message/LBL23KTGWXCPLURDR2KF66FIH66HQTTE/attachment/2/attachment.htm)
  (text/html — 12.5 KB)

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/thread/LBL23KTGWXCPLURDR2KF66FIH66HQTTE/#LBL23KTGWXCPLURDR2KF66FIH66HQTTE)

[Back to the list](/hyperkitty/list/wikidata-tech%40lists.wikimedia.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from phabricator.wikimedia.org_6d4ce298_20250121_010939.html ===
Page Menu[HomePhabricator](/)

* SearchConfigure Global Search

[Log In](https://phabricator.wikimedia.org/auth/start/?next=%2FT233213)[Create Task](/maniphest/task/edit/nocreate/) [Maniphest](/maniphest/)  T233213
# XSS in Wikidata Query Service UI, DATATYPE\_MATHML - CVE-2019-19329Closed, Resolved[Public](/policy/explain/PHID-TASK-wirtkojotxx5sexjfm6v/view/)Actions

* [Edit Task](/maniphest/task/edit/233213/)
* Edit Related Tasks...
* [Create Subtask](/maniphest/task/subtask/233213/)
* [Edit Parent Tasks](/search/rel/task.has-parent/PHID-TASK-wirtkojotxx5sexjfm6v/)
* [Edit Subtasks](/search/rel/task.has-subtask/PHID-TASK-wirtkojotxx5sexjfm6v/)
* [Merge Duplicates In](/search/rel/task.merge-in/PHID-TASK-wirtkojotxx5sexjfm6v/)
* [Close As Duplicate](/search/rel/task.close-as-duplicate/PHID-TASK-wirtkojotxx5sexjfm6v/)
* Edit Related Objects...
* [Edit Commits](/search/rel/task.has-commit/PHID-TASK-wirtkojotxx5sexjfm6v/)
* [Edit Mocks](/search/rel/task.has-mock/PHID-TASK-wirtkojotxx5sexjfm6v/)
* Subscribe
* [Mute Notifications](/subscriptions/mute/PHID-TASK-wirtkojotxx5sexjfm6v/)
* [Protect as security issue](/wmf/escalate-task/233213/)
* [Award Token](/token/give/PHID-TASK-wirtkojotxx5sexjfm6v/)
* [Flag For Later](/flag/edit/PHID-TASK-wirtkojotxx5sexjfm6v/)

Assigned To

|  | [Addshore](/p/Addshore/) |
| --- | --- |

Authored By

|  | [Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) |
| --- | --- |
| Sep 18 2019, 1:13 PM2019-09-18 13:13:52 (UTC+0) |

Tags

* [Wikidata Query UI](/tag/wikidata_query_ui/) [(Backlog)](/project/board/2901/)
* [Wikidata](/tag/wikidata/) [(needs discussion or investigation)](/project/board/71/)
* [Vuln-XSS](/tag/vuln-xss/)
* [Wikidata-Campsite (Wikidata-Campsite-Iteration-∞ (On Hold))](/tag/wikidata-campsite-iteration-%E2%88%9E/) [(Stalled/Waiting)](/project/board/3539/)
* [User-Addshore](/tag/user-addshore/) [(Active 🚁)](/project/board/2102/)
* [Discovery-Search (Current work)](/tag/discovery-search-sprint/) [(Needs Reporting)](/project/board/1227/)
* [Security](/tag/security/)
Referenced Files

|  | [F31010112: current.png](/F31010112) |
| --- | --- |
| Nov 5 2019, 8:12 AM2019-11-05 08:12:47 (UTC+0) |

|  | [F30389192: Screenshot\_2019-09-18 Wikidata Query Service(1).png](/F30389192) |
| --- | --- |
| Sep 18 2019, 1:21 PM2019-09-18 13:21:26 (UTC+0) |

|  | [F30389193: Screenshot\_2019-09-18 Wikidata Query Service.png](/F30389193) |
| --- | --- |
| Sep 18 2019, 1:21 PM2019-09-18 13:21:26 (UTC+0) |

|  | [F30389151: Screen Shot 2019-09-18 at 14.55.29.png](/F30389151) |
| --- | --- |
| Sep 18 2019, 1:13 PM2019-09-18 13:13:52 (UTC+0) |

Subscribers

|  | [Addshore](/p/Addshore/) |
| --- | --- |

|  | [Aklapper](/p/Aklapper/) |
| --- | --- |

|  | [• alaa\_wmde](/p/alaa_wmde/) |
| --- | --- |

|  | [darthmon\_wmde](/p/darthmon_wmde/) |
| --- | --- |

|  | [dcausse](/p/dcausse/) |
| --- | --- |

|  | [Gehel](/p/Gehel/) |
| --- | --- |

|  | [hoo](/p/hoo/) |
| --- | --- |

[View All 21 Subscribers](/subscriptions/list/PHID-TASK-wirtkojotxx5sexjfm6v/)Tokens"Dislike" token, awarded by Physikerwelt.
# Description

TL;DR: arbitrary JS execution on query.wikidata.org (not CORS-whitelisted)

The Wikidata Query Service UI has a convenient feature (implemented in [I6c8a7ebac1](https://gerrit.wikimedia.org/r/300055), [T137784](/T137784)) where mathematical expressions in results are displayed directly, [for example](https://query.wikidata.org/embed.html#SELECT%20%3FitemLabel%20%3Fformula%20WHERE%20{%0A%20%20VALUES%20%3Fitem%20{%20wd%3AQ11518%20wd%3AQ35875%20}%0A%20%20%3Fitem%20wdt%3AP2534%20%3Fformula.%0A%20%20SERVICE%20wikibase%3Alabel%20{%20bd%3AserviceParam%20wikibase%3Alanguage%20%22[AUTO_LANGUAGE]%2Cen%22.%20}%0A}):

[![Screen Shot 2019-09-18 at 14.55.29.png (420×680 px, 22 KB)](https://phab.wmfusercontent.org/file/data/wosfu6vheaehbozv7fa6/PHID-FILE-dkk4xl4knusbx3khszdp/preview-Screen_Shot_2019-09-18_at_14.55.29.png)](https://phab.wmfusercontent.org/file/data/2ivb2vcjinlzyqzbij6t/PHID-FILE-76et24mke2ga2rrieur5/Screen_Shot_2019-09-18_at_14.55.29.png)

Unfortunately, it does this by directly pasting the contents of MathML literals into the HTML:

```
case DATATYPE_MATHML:
    $html.append( $( data.value ) );
    break;
```

I *think* this is fine for MathML from the Wikibase RDF output, which is generated by Extension:Math and hopefully trustworthy at the markup level regardless of what the underlying TeX value on Wikidata is. However, nothing stops a query author from tagging any other string as MathML:

```
SELECT * WHERE {
  BIND("<script>alert('XSS')</script>"^^<http://www.w3.org/1998/Math/MathML> AS ?xss)
}
```

This means that if an attacker can trick a victim to open a link [like this one](https://query.wikidata.org/embed.html#SELECT%20*%20WHERE%20{%0A%20%20BIND%28%22%3Cscript%3Ealert('XSS')%3C%2Fscript%3E%22^^%3Chttp%3A%2F%2Fwww.w3.org%2F1998%2FMath%2FMathML%3E%20AS%20%3Fxss%29%0A}), they can run arbitrary JavaScript on query.wikidata.org in the user’s browser. (Clicking a link to query results is a pretty common operation for Wikidata users.)

Fortunately, query.wikidata.org is *not* on the CORS whitelist ($wgCrossSiteAJAXdomains) for production wikis (I had proposed this in [T218568](/T218568), but it was declined), so I don’t think this is enough to let the attacker steal the victim’s Wikimedia accounts.

---

Steps to fix (from [T233213#5584298](/T233213#5584298)):

* Turn [P9315](/P9315) into a patch against wikidata/query/gui-deploy
* On the deployment server (is that deployment.eqiad.wmnet or a different one, btw?), apply that patch in the gui submodule of the wikidata/query/deploy checkout (/srv/deployment/wdqs/wdqs?)
* Commit that patch to the gui submodule, and then commit the submodule update in the main deploy repository? Not sure if this is necessary
* Deploy the current tree (scap deploy?)
* Verify that the vulnerability is fixed

So tomorrow EU time (2pm GMT) we will...

Get the on gerrit code in shape:

* Merge the patch on gerrit into the main repo
  + <https://gerrit.wikimedia.org/r/#/c/wikidata/query/gui/+/549457/> hash: [d9f964b88c01748e278ca8c4b8929a8ef0ef0267](/rWDQGd9f964b88c01748e278ca8c4b8929a8ef0ef0267)
* Merge the patch that will be generated in wikidata/query/gui-deploy
  + <https://gerrit.wikimedia.org/r/#/c/wikidata/query/gui-deploy/+/549461/> hash: 7445472ab0ec61890b42e4d524416fbc6a18aa8a
* Update gui submodule in wikidata/query/deploy repository, bringing it in line with the deployment server’s version
  + <https://gerrit.wikimedia.org/r/#/c/wikidata/query/deploy/+/549463/> hash: [094d9cda98f3fb706cf9c25aefa3eb33f9f6999a](/rWDQD094d9cda98f3fb706cf9c25aefa3eb33f9f6999a)
* Confirm that <https://archiva.wikimedia.org/repository/snapshots/org/wikidata/query/rdf> has been regenerated
  + <https://archiva.wikimedia.org/repository/snapshots/org/wikidata/query/rdf/service/0.3.6-SNAPSHOT/>
* Build versions of our docker images with the new code
  + <https://travis-ci.org/wmde/wikibase-docker/builds/608823462>

Announce and update final things:

* Update our test things on labs (and wikibase-registry) that also run this code
* Create a CVE including details of the fixed versions
* Announce to wikitech-l/wikidata-l/wikidata-tech/wikibase/telegram
* Directly contact the people that we know run this GUI in the wild
* Discuss any further changes to math rendering in [T214980: Support mathematical formulae in Wikidata Query Service UI on all browsers](/T214980) (public)
# Details

|  | Subject | Repo | Branch | Lines +/- |
| --- | --- | --- | --- | --- |
|  | [Add security task to Gruntfile](https://gerrit.wikimedia.org/r/c/552293) | [wikidata/query/gui](https://gerrit.wikimedia.org/r/plugins/gitiles/wikidata/query/gui) | [master](https://gerrit.wikimedia.org/r/plugins/gitiles/wikidata/query/gui/%2B/master) | +6 -0 |

[Customize query in gerrit](https://gerrit.wikimedia.org/r/#/q/bug:T233213)
# Related Objects

* Mentions

Mentioned In [T297686: Wikidata Query UI lets users build links with arbitrary link text and javascript: URL](/T297686)
[T238824: XSS in Wikidata Query Service UI (entity labels) - CVE-2019-19328](/T238824)
[T238822: XSS in Wikidata Query Service UI (i18n messages) - CVE-2019-19327](/T238822)
[T238618: Adopt a CSP policy for query.wikidata.org](/T238618)
[T214980: Support mathematical formulae in Wikidata Query Service UI on all browsers](/T214980) Mentioned Here [rWDQD094d9cda98f3: Update gui submodule](/rWDQD094d9cda98f3fb706cf9c25aefa3eb33f9f6999a)
[rWDQGd9f964b88c01: Render MathML using MathJax](/rWDQGd9f964b88c01748e278ca8c4b8929a8ef0ef0267)
[T237516: Update to MathJax 3](/T237516)
[P9315 Patch for T233213](/P9315)
[T232113: Write and send supplementary release announcement for extensions with security patches (MediaWiki 1.31.4/1.32.4/1.33.1)](/T232113)
[T214980: Support mathematical formulae in Wikidata Query Service UI on all browsers](/T214980)
[T137784: Render math markup in query service](/T137784)
[T218568: Allow CORS from query.wikidata.org to production wikis](/T218568)
### Event Timeline

There are a very large number of changes, so older changes are hidden. [Show Older Changes](/transactions/showolder/PHID-TASK-wirtkojotxx5sexjfm6v/?after=5614507&quoteTargetID=UQ0_1&quoteRef=T233213)

[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) added a comment.[Oct 29 2019, 10:45 AM2019-10-29 10:45:25 (UTC+0)](#5614507)Comment Actions
> The fix is still going to be public from step 7.

Yes, but by that point we’ve already fixed the vulnerability on query.wikidata.org (step 4+5).

[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) added a comment.[Oct 29 2019, 11:31 AM2019-10-29 11:31:31 (UTC+0)](#5614669)Comment Actions

I’ve just rebuilt the patch and copied it to the deployment server, you can find it at /home/lucaswerkmeister-wmde/T233213.patch. It should apply cleanly to /srv/deployment/wdqs/wdqs/gui/.

[Addshore](/p/Addshore/) added a comment.[Oct 29 2019, 11:35 AM2019-10-29 11:35:35 (UTC+0)](#5614681)Comment Actions

Thanks for providing the patch [@Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/)

As far as I can tell we have to:

* Do those steps 1-5 to fix in production without exposing the bug before having it fixed.
* Also fix our other labs deployments of this GUI? (or maybe we just do this immediately after publishing the fix?)
* Prepare patches for the public places, so the gerrit repos and prepare to rebuild the docker images that people use
* Step 6, coordinate announcements
* There is sometimes also a pre release to parties that we know run the code, normally for mediawiki that is wikia etc? (documented on wikitech somewhere) Does this still happen? We have some people we could tell that we know use the query service GUI.
* Do steps 7-11

Thoughts?

[Addshore](/p/Addshore/) moved this task from [Blocked / Waiting / External](/project/board/3402/) to [Wikidata-Campsite-Iteration-∞ (On Hold)](/project/board/3402/) on the [Wikidata-Campsite](/tag/wikidata-campsite/) board.[Oct 29 2019, 12:38 PM2019-10-29 12:38:12 (UTC+0)](#5614884)[Addshore](/p/Addshore/) edited projects, added [Wikidata-Campsite (Wikidata-Campsite-Iteration-∞ (On Hold))](/tag/wikidata-campsite-iteration-%E2%88%9E/); removed [Wikidata-Campsite](/tag/wikidata-campsite/).[Addshore](/p/Addshore/) moved this task from [To Do (prioritised from top to bottom)](/project/board/3539/) to [Stalled/Waiting](/project/board/3539/) on the [Wikidata-Campsite (Wikidata-Campsite-Iteration-∞ (On Hold))](/tag/wikidata-campsite-iteration-%E2%88%9E/) board.[Addshore](/p/Addshore/) added subscribers: [Rosalie\_WMDE](/p/Rosalie_WMDE/), [Jakob\_WMDE](/p/Jakob_WMDE/).[Oct 29 2019, 3:03 PM2019-10-29 15:03:53 (UTC+0)](#5615512)

[Addshore](/p/Addshore/) added a comment.[Oct 30 2019, 1:34 PM2019-10-30 13:34:30 (UTC+0)](#5619110)Comment Actions

[@Gehel](/p/Gehel/) [@Mathew.onipe](/p/Mathew.onipe/) How can we coordinate further to get this deployed on the service?

How does the patch mentioned in [T233213#5614669](/T233213#5614669) look to you?

[Physikerwelt](/p/Physikerwelt/) added a comment.[Oct 30 2019, 2:34 PM2019-10-30 14:34:02 (UTC+0)](#5619421)Comment Actions

I am still very confused by the bug. How does adding a new method to render mathematical expressions (which might cause new problems and contradicts previous efforts to reduce the number of math tending options) resolve a XSS vulnerablyty? I would suggest to spit the patch, disable XSS in step one and fix the rendering problem in step two.

[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) added a comment.[Oct 30 2019, 2:50 PM2019-10-30 14:50:40 (UTC+0)](#5619548)Comment Actions

The XSS vulnerability is inherent in the old implementation of math markup. I don’t think there’s any way to fix it without completely removing that version of math rendering, and I didn’t want to do that without providing an alternative, safer method. (I nevertheless provided a patch for that in [T233213#5502971](/T233213#5502971), but nobody deployed it 🤷)

[Physikerwelt](/p/Physikerwelt/) added a comment.[Oct 30 2019, 3:20 PM2019-10-30 15:20:01 (UTC+0)](#5619689)Comment Actions

Since I implemented the 'old implemention for math markup' I would like to know how this has to do with XSS. It does not use JS at all. I think the XSS problem has nothing to do with Math rendering. IMHO Math rendering for non MathML enabled rendering should be implemented as on all other Wikimedia Sites using the API, which provides fallback images.

[Addshore](/p/Addshore/) added a comment.[Oct 31 2019, 7:48 AM2019-10-31 07:48:26 (UTC+0)](#5622354)Comment Actions
> In [T233213#5619689](/T233213#5619689), [@Physikerwelt](/p/Physikerwelt/) wrote:
>
> Since I implemented the 'old implemention for math markup' I would like to know how this has to do with XSS. It does not use JS at all. I think the XSS problem has nothing to do with Math rendering. IMHO Math rendering for non MathML enabled rendering should be implemented as on all other Wikimedia Sites using the API, which provides fallback images.

That's likely not possible here as discussed around [T233213#5573393](/T233213#5573393)

[Addshore](/p/Addshore/) assigned this task to [• Mathew.onipe](/p/Mathew.onipe/).[Oct 31 2019, 7:49 AM2019-10-31 07:49:30 (UTC+0)](#5622355)Comment Actions

As far as I can tell we are waiting feedback from the QS team, so going to assign one of them to make sure we stay as on top of this as we can

[Physikerwelt](/p/Physikerwelt/) added a comment.[Nov 1 2019, 7:40 AM2019-11-01 07:40:51 (UTC+0)](#5625870)Comment Actions
> In [T233213#5573393](/T233213#5573393), [@Addshore](/p/Addshore/) wrote:
>
> Sounds like that flow could also result in many requests to that API in a single second (2x the number of things to be formatted)? Unless the API provides batching.

The API was designed for a very high number of requests. The API was introduced to replace a database lookup and should not be seen as something slow but very fast. If this is not the case the whole concept of RESTification should be questioned. I can not see a reason why this case is special. Wikidata uses the same input syntax for formulae as within wikitext. If one needs to implement two tending methods this seems to be somehow wrong.

My experience from the past is that it is better to think twice before deploying suboptimal workarounds.

[WMDE-leszek](/p/WMDE-leszek/) added a comment.[Nov 1 2019, 7:54 AM2019-11-01 07:54:33 (UTC+0)](#5625876)Comment Actions

Hi [@Gehel](/p/Gehel/) [@Mathew.onipe](/p/Mathew.onipe/): is there anything which we could do at WMDE side that would help with deploying the the provided fix?

[Addshore](/p/Addshore/) added a comment.[Nov 1 2019, 11:33 AM2019-11-01 11:33:26 (UTC+0)](#5626183)Comment Actions
> In [T233213#5625870](/T233213#5625870), [@Physikerwelt](/p/Physikerwelt/) wrote:
>
> The API was designed for a very high number of requests. The API was introduced to replace a database lookup and should not be seen as something slow but very fast. If this is not the case the whole concept of RESTification should be questioned. I can not see a reason why this case is special. Wikidata uses the same input syntax for formulae as within wikitext. If one needs to implement two tending methods this seems to be somehow wrong.
>
> My experience from the past is that it is better to think twice before deploying suboptimal workarounds.

If we want to discuss this we should discuss it in another ticket.

More than anything this is a product decision about what to expect from the UI of the query service. Make a bunch of requests for images when loading a result, or do it in the client.

[Physikerwelt](/p/Physikerwelt/) added a comment.[Nov 5 2019, 8:12 AM2019-11-05 08:12:47 (UTC+0)](#5634617)Comment Actions

I still am very concerned about this procedure.

That is how the example provided in the ticket description currently looks

[![current.png (267×2 px, 78 KB)](https://phab.wmfusercontent.org/file/data/7up3up6ur3ewkymuxjzi/PHID-FILE-gtnxvixt2qtnhsicn7sl/preview-current.png)](https://phab.wmfusercontent.org/file/data/52zra26e6ehpy3aqyihk/PHID-FILE-omizlqtc5tlyf7x2k7rb/current.png)

it the patch would be deployed it would look completely different.

Thus I consider the title "XSS in Wikidata Query Service UI" as misleading. The patch does much more. It introduces a new Math rendering engine. I think this should be discussed and not just be deployed and then test in production what happens if users interact with it.

[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) added a comment.[Nov 5 2019, 12:08 PM2019-11-05 12:08:23 (UTC+0)](#5635351)Comment Actions

The XSS is the important part, because your implementation *injects arbitrary HTML into the page*. You’re welcome to discuss alternative implementations *after* we’ve deployed a fix for this.

[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) added a subscriber: [hoo](/p/hoo/).[Nov 5 2019, 12:10 PM2019-11-05 12:10:03 (UTC+0)](#5635381)Comment Actions

[@hoo](/p/hoo/) you mentioned you still have access to the WDQS servers, do you know how to deploy a change to the UI? ([T233213#5584298](/T233213#5584298) is probably the most important comment to catch up on.)

[hoo](/p/hoo/) added a comment.[Nov 5 2019, 9:20 PM2019-11-05 21:20:49 (UTC+0)](#5638076)Comment Actions
> In [T233213#5635381](/T233213#5635381), [@Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) wrote:
>
> [@hoo](/p/hoo/) you mentioned you still have access to the WDQS servers, do you know how to deploy a change to the UI? ([T233213#5584298](/T233213#5584298) is probably the most important comment to catch up on.)

I haven't done a WDQS deploy in quite a while, but the steps in there sound right to me. If you want, we can (internally) fix a time for the scap deploy(s)… maybe as soon as tomorrow.

Despite me at least [@Gehel](/p/Gehel/) is able to deploy WDQS.

[• Mathew.onipe](/p/Mathew.onipe/) added a comment.[Nov 6 2019, 7:55 AM2019-11-06 07:55:19 (UTC+0)](#5639232)Comment Actions

I've deployed [@Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) patch. But I can still run:

```
SELECT * WHERE {
  BIND("<script>alert('XSS')</script>"^^<http://www.w3.org/1998/Math/MathML> AS ?xss)
}
```

successfully.

I might be doing something wrong. Please can someone check? [@Addshore](/p/Addshore/)

[WMDE-leszek](/p/WMDE-leszek/) added a comment.[Nov 6 2019, 8:20 AM2019-11-06 08:20:42 (UTC+0)](#5639308)Comment Actions

Thanks [@Mathew.onipe](/p/Mathew.onipe/) !

For my understanding, have you deployed the bandaid suggested in [T233213#5502971](/T233213#5502971) or [P9315](/P9315) ?

[Gehel](/p/Gehel/) added a project: [Discovery-Wikidata-Query-Service-Sprint](/tag/discovery-wikidata-query-service-sprint/).[Nov 6 2019, 8:22 AM2019-11-06 08:22:35 (UTC+0)](#5639310)

[Addshore](/p/Addshore/) added a comment.[Nov 6 2019, 8:46 AM2019-11-06 08:46:57 (UTC+0)](#5639358)Comment Actions

I just checked the live site and I still see the old code deployed when looking at the minified JS.

[hoo](/p/hoo/) added a comment.[Nov 6 2019, 9:07 AM2019-11-06 09:07:46 (UTC+0)](#5639426)Comment Actions
> In [T233213#5639358](/T233213#5639358), [@Addshore](/p/Addshore/) wrote:
>
> I just checked the live site and I still see the old code deployed when looking at the minified JS.

The new minified versions are present (alongside the current versions), but index.html was not updated on the individual hosts (so the state on deploy1001 differs from the state on the actual wdqs servers).

```
hoo@deploy1001:/srv/deployment/wdqs/wdqs/gui$ md5sum $(pwd)/index.html
11ee88217d78d98e52f9008add62a23c  /srv/deployment/wdqs/wdqs/gui/index.html
hoo@wdqs1005:/srv/deployment/wdqs/wdqs/gui$ md5sum $(pwd)/index.html
29ce000ed3201781a6c06eb03d73b002  /srv/deployment/wdqs/wdqs/gui/index.html
```

[@Mathew.onipe](/p/Mathew.onipe/) Do you want to re-scap?

[hoo](/p/hoo/) added a comment.[Nov 6 2019, 9:11 AM2019-11-06 09:11:28 (UTC+0)](#5639433)Comment Actions
> In [T233213#5639426](/T233213#5639426), [@hoo](/p/hoo/) wrote:
> > In [T233213#5639358](/T233213#5639358), [@Addshore](/p/Addshore/) wrote:
> >
> > I just checked the live site and I still see the old code deployed when looking at the minified JS.
>
> The new minified versions are present (alongside the current versions), but index.html was not updated on the individual hosts (so the state on deploy1001 differs from the state on the actual wdqs servers).
>
> ```
> hoo@deploy1001:/srv/deployment/wdqs/wdqs/gui$ md5sum $(pwd)/index.html
> 11ee88217d78d98e52f9008add62a23c  /srv/deployment/wdqs/wdqs/gui/index.html
> hoo@wdqs1005:/srv/deployment/wdqs/wdqs/gui$ md5sum $(pwd)/index.html
> 29ce000ed3201781a6c06eb03d73b002  /srv/deployment/wdqs/wdqs/gui/index.html
> ```
>
> [@Mathew.onipe](/p/Mathew.onipe/) Do you want to re-scap?

That apparently just happened, this should be fine now.

[• Mathew.onipe](/p/Mathew.onipe/) added a comment.[Nov 6 2019, 9:12 AM2019-11-06 09:12:28 (UTC+0)](#5639437)Comment Actions

Sorry all.. I just did another deployment and patch has been correctly applied. Also test works fine now

[Physikerwelt](/p/Physikerwelt/) awarded a token.[Nov 6 2019, 9:13 AM2019-11-06 09:13:32 (UTC+0)](#5639444)

[Addshore](/p/Addshore/) added a comment.Edited · [Nov 6 2019, 9:14 AM2019-11-06 09:14:55 (UTC+0)](#5639447)Comment Actions

XSS looks fixed to me :)

And formula rendering still works too

[Physikerwelt](/p/Physikerwelt/) added a comment.[Nov 6 2019, 9:15 AM2019-11-06 09:15:59 (UTC+0)](#5639449)Comment Actions

Yes. The layout in firefox and chrome looks different now. And the success criteria defined in [T214980](/T214980) are not fulfilled.

[Addshore](/p/Addshore/) added a comment.[Nov 6 2019, 9:21 AM2019-11-06 09:21:10 (UTC+0)](#5639465)Comment Actions
> In [T233213#5639449](/T233213#5639449), [@Physikerwelt](/p/Physikerwelt/) wrote:
>
> Yes. The layout in firefox and chrome looks different now. And the success criteria defined in [T214980](/T214980) are not fulfilled.

The acceptance criteria of [T214980](/T214980) were also not fulfilled before this XSS fix was deployed. This task is not about meeting the acceptance criteria of [T214980](/T214980)

[Addshore](/p/Addshore/) added a subscriber: [Tarrow](/p/Tarrow/).[Nov 6 2019, 9:40 AM2019-11-06 09:40:39 (UTC+0)](#5639503)

[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-dmts2lasmifx552/)[Nov 6 2019, 9:57 AM2019-11-06 09:57:17 (UTC+0)](#5639600)Comment Actions

Okay, now it’s time for making the patch public and trying to get it deployed on other WDQS instances. COM people, should we do a pre-announcement (“we will soon publish a fix for a serious security vulnerability, you’ll want to update as quickly as possible”)?

[Physikerwelt](/p/Physikerwelt/) added a comment.[Nov 6 2019, 10:17 AM2019-11-06 10:17:48 (UTC+0)](#5639673)Comment Actions
> In [T233213#5639465](/T233213#5639465), [@Addshore](/p/Addshore/) wrote:
>
> The acceptance criteria of [T214980](/T214980) were also not fulfilled before this XSS fix was deployed. This task is not about meeting the acceptance criteria of [T214980](/T214980)

I could not agree more. That is why I am complaining all the time. Linking [T214980](/T214980) and this change in one patch is a serious mistake. The patch is a significant change to the rendering which was done without community involvement. This is really a big issue for my work in building up a community and fighting against the myth that WMF randomly changes things without community involvement. The announcement will make it even worse. Fixing XSS is important and I am really happy that you do a great job here. But linking that to new features and bypass the open approach of code review etc. to deploy a new feature is a really bad practice.

[Addshore](/p/Addshore/) added a comment.[Nov 6 2019, 10:46 AM2019-11-06 10:46:37 (UTC+0)](#5639758)Comment Actions
> In [T233213#5639673](/T233213#5639673), [@Physikerwelt](/p/Physikerwelt/) wrote:
>
> The patch is a significant change to the rendering which was done without community involvement.

Turning off the rendering entirely is also a big change in the rendering which would have been done without community involvement.

> Fixing XSS is important and I am really happy that you do a great job here. But linking that to new features and bypass the open approach of code review etc. to deploy a new feature is a really bad practice.

We are not saying [T214980](/T214980) is done and closed with this change & fix.

[T214980](/T214980) can be re evaluated and assessed once all of the work around this security fix is done, but right now that is the priority.

[Physikerwelt](/p/Physikerwelt/) added a comment.Edited · [Nov 6 2019, 11:29 AM2019-11-06 11:29:57 (UTC+0)](#5639957)Comment Actions
> In [T233213#5639758](/T233213#5639758), [@Addshore](/p/Addshore/) wrote:
> > In [T233213#5639673](/T233213#5639673), [@Physikerwelt](/p/Physikerwelt/) wrote:
>
> Turning off the rendering entirely is also a big change in the rendering which would have been done without community involvement.

If you call the current rendering turned off, it has never been turned on. So there would be no change for all users except for those that used the bind construct.

[Physikerwelt](/p/Physikerwelt/) added a comment.[Nov 6 2019, 12:35 PM2019-11-06 12:35:37 (UTC+0)](#5640209)Comment Actions

After all, now that MathJax 3 is deployed in production, I suggest to continue the discussion here [T237516](/T237516).

[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) added a comment.[Nov 6 2019, 12:43 PM2019-11-06 12:43:22 (UTC+0)](#5640238)Comment Actions

When discussing anywhere else, please keep in mind that this is still a non-public security issue that is exploitable on many WDQS UI installations in the wild.

[Physikerwelt](/p/Physikerwelt/) added a comment.[Nov 6 2019, 12:48 PM2019-11-06 12:48:12 (UTC+0)](#5640270)Comment Actions

Thanks. I checked with a private browser tab that the link is not visible from the outside. I would still suggest not to distribute the patch that bundles MathJax 3. To include a new external library I would very much like to see that this takes the standard WMF code review route.

[Addshore](/p/Addshore/) claimed this task.Edited · [Nov 6 2019, 4:53 PM2019-11-06 16:53:52 (UTC+0)](#5641159)Comment Actions

Has a little chat with [@Reedy](/p/Reedy/) and got some things figured out.

So tomorrow EU time (2pm GMT) we will...

Get the on gerrit code in shape:

* Merge the patch on gerrit into the main repo
* Build versions of our docker images with the new code
* Merge the patch that will be generated in wikidata/query/gui-deploy
* Update gui submodule in wikidata/query/deploy repository, bringing it in line with the deployment server’s version
* Confirm that <https://archiva.wikimedia.org/repository/snapshots/org/wikidata/query/rdf/service> 0.3.5 has been regenerated
* Make a new wdqs docker image that will use the 0.3.5 zip.....

Announce and update final things:

* Update our test things on labs (and wikibase-registry) that also run this code
* Create a CVE including details of the fixed versions
* Announce to wikitech-l/wikidata-l/wikidata-tech/wikibase/telegram
* Directly contact the people that we know run this GUI in the wild

(now in the task description)

Restricted Application added a project: [User-Addshore](/tag/user-addshore/).  · [View Herald Transcript](/herald/transcript/3387430/)[Nov 6 2019, 4:53 PM2019-11-06 16:53:53 (UTC+0)](#5641161)[WMDE-leszek](/p/WMDE-leszek/) added a comment.[Nov 6 2019, 5:04 PM2019-11-06 17:04:54 (UTC+0)](#5641189)Comment Actions
> Announce to wikitech-l/wikidata-l/wikibase/telegram

wikidata-tech as well?

[Addshore](/p/Addshore/) added a comment.[Nov 6 2019, 5:05 PM2019-11-06 17:05:00 (UTC+0)](#5641190)Comment Actions

The one thing that remains to figure out is updating the zips on <https://archiva.wikimedia.org/repository/snapshots/org/wikidata/query/rdf/service>

Pinging [@Mathew.onipe](/p/Mathew.onipe/) and [@Gehel](/p/Gehel/) for more info on that.

[Addshore](/p/Addshore/) added a comment.[Nov 6 2019, 5:06 PM2019-11-06 17:06:31 (UTC+0)](#5641191)Comment Actions
> In [T233213#5641189](/T233213#5641189), [@WMDE-leszek](/p/WMDE-leszek/) wrote:
>
> wikidata-tech as well?

Added

[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-yveir7bnpxb4psm/)[Nov 6 2019, 5:17 PM2019-11-06 17:17:29 (UTC+0)](#5641250)[Gehel](/p/Gehel/) added a comment.[Nov 6 2019, 6:30 PM2019-11-06 18:30:46 (UTC+0)](#5641659)Comment Actions
> In [T233213#5641190](/T233213#5641190), [@Addshore](/p/Addshore/) wrote:
>
> The one thing that remains to figure out is updating the zips on <https://archiva.wikimedia.org/repository/snapshots/org/wikidata/query/rdf/service>
>
> Pinging [@Mathew.onipe](/p/Mathew.onipe/) and [@Gehel](/p/Gehel/) for more info on that.

The docker image is generated from the Maven artefact? I was expecting it to use a separate release process (I don't know why). Another thing that we should cleanup at some point.

The Maven artefacts are generated from the main wikidata/query/gui repo, not from the deploy repo (yes, I know). As soon as the code is merge there, [@Mathew.onipe](/p/Mathew.onipe/) can create a new SNAPSHOT. (and yes, we should stop relying on SNAPSHOT, E\_TOO\_MANY\_THINGS\_TO\_CLEANUP).

[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-nev35f7fj4k5oe6/)[Nov 7 2019, 1:32 PM2019-11-07 13:32:05 (UTC+0)](#5644152)[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-eujcxzkbzhjqgsb/)[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-iyrndzk3hut3aee/)[Nov 7 2019, 1:38 PM2019-11-07 13:38:49 (UTC+0)](#5644175)[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-3fwkkrfin6m2hpa/)[Nov 7 2019, 4:02 PM2019-11-07 16:02:27 (UTC+0)](#5644515)[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-qch6yxb3m7v24mz/)[Nov 7 2019, 4:36 PM2019-11-07 16:36:46 (UTC+0)](#5644860)[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-hssj33gkrpgynk7/)[Nov 7 2019, 4:49 PM2019-11-07 16:49:54 (UTC+0)](#5644882)[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-k656tuddlhogkqd/)[Nov 7 2019, 4:59 PM2019-11-07 16:59:23 (UTC+0)](#5644904)[Lea\_Lacroix\_WMDE](/p/Lea_Lacroix_WMDE/) added a comment.[Nov 7 2019, 5:00 PM2019-11-07 17:00:14 (UTC+0)](#5644910)Comment Actions

[Announcement done](https://lists.wikimedia.org/pipermail/wikidata/2019-November/013642.html) on the mailing-lists noted above and the Wikibase Telegram group.

[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-nn5cszewg3tku5i/)[Nov 7 2019, 5:12 PM2019-11-07 17:12:32 (UTC+0)](#5644923)[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-uermgnt2zzny3y3/)[Nov 8 2019, 10:22 AM2019-11-08 10:22:44 (UTC+0)](#5647189)

[Addshore](/p/Addshore/) added a comment.[Nov 8 2019, 10:46 AM2019-11-08 10:46:16 (UTC+0)](#5647214)Comment Actions

[@JBennett](/p/JBennett/) I think we can make this public now?

I had a quick flick through the comments and don't see anything private in here.

[Addshore](/p/Addshore/) removed [Addshore](/p/Addshore/) as the assignee of this task.[Nov 8 2019, 10:46 AM2019-11-08 10:46:27 (UTC+0)](#5647215)[Addshore](/p/Addshore/) moved this task from [Stalled/Waiting](/project/board/3539/) to [Done](/project/board/3539/) on the [Wikidata-Campsite (Wikidata-Campsite-Iteration-∞ (On Hold))](/tag/wikidata-campsite-iteration-%E2%88%9E/) board.[Nov 8 2019, 11:03 AM2019-11-08 11:03:02 (UTC+0)](#5647291)[Gehel](/p/Gehel/) moved this task from [Backlog](/project/board/1239/) to [In progress](/project/board/1239/) on the [Discovery-Wikidata-Query-Service-Sprint](/tag/discovery-wikidata-query-service-sprint/) board.[Nov 12 2019, 1:55 PM2019-11-12 13:55:57 (UTC+0)](#5656344)[Gehel](/p/Gehel/) edited projects, added [Discovery-Search (Current work)](/tag/discovery-search-sprint/); removed [Discovery-Wikidata-Query-Service-Sprint](/tag/discovery-wikidata-query-service-sprint/).[sbassett](/p/sbassett/) added a comment.[Nov 12 2019, 8:42 PM2019-11-12 20:42:23 (UTC+0)](#5658099)Comment Actions
> In [T233213#5647214](/T233213#5647214), [@Addshore](/p/Addshore/) wrote:
>
> [@JBennett](/p/JBennett/) I think we can make this public now?
>
> I had a quick flick through the comments and don't see anything private in here.

Given that this went out to public mailing lists, yes :) I'll do that now. It appears the only outstanding items within the task description are:

1. Create a CVE including details of the fixed versions.
2. Discuss any further changes to math rendering in [T214980](/T214980).

The former can be done [here](https://cveform.mitre.org/), though if you'd like the [Security-Team](/tag/security-team/) to handle this, we can. The latter I'm assuming is ongoing, indefinitely and shouldn't block resolving this task.

[sbassett](/p/sbassett/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-wfaisyo2pi2rvv6/)" to "Public (No Login Required)".[Nov 12 2019, 8:42 PM2019-11-12 20:42:41 (UTC+0)](#5658100)[WMDE-leszek](/p/WMDE-leszek/) added a comment.[Nov 13 2019, 1:49 AM2019-11-13 01:49:57 (UTC+0)](#5659016)Comment Actions

Thanks [@sbassett](/p/sbassett/) for opening the task and summarizing the status. WMDE is going to create the CVE soon (we're currently out at the conference, so that's why we've gotten to do it yet).

[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) mentioned this in [T214980: Support mathematical formulae in Wikidata Query Service UI on all browsers](/T214980).[Nov 13 2019, 11:12 AM2019-11-13 11:12:48 (UTC+0)](#5659664)[Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-njxbod7oanueh7j/)[Addshore](/p/Addshore/) claimed this task.[Nov 15 2019, 2:22 PM2019-11-15 14:22:31 (UTC+0)](#5666768)[Bawolff](/p/Bawolff/) mentioned this in [T238618: Adopt a CSP policy for query.wikidata.org](/T238618).[Nov 19 2019, 3:32 AM2019-11-19 03:32:52 (UTC+0)](#5673943)[Addshore](/p/Addshore/) lowered the priority of this task from High to Medium.[Nov 21 2019, 10:17 AM2019-11-21 10:17:20 (UTC+0)](#5681087)[gerritbot](/p/gerritbot/) added a comment.[Nov 21 2019, 4:14 PM2019-11-21 16:14:54 (UTC+0)](#5681812)Comment Actions

Change 552293 had a related patch set uploaded (by Lucas Werkmeister (WMDE); owner: Lucas Werkmeister (WMDE)):

[wikidata/query/gui@master] Add security task to Gruntfile

<https://gerrit.wikimedia.org/r/552293>

[gerritbot](/p/gerritbot/) added a project: [Patch-For-Review](/tag/patch-for-review/).[Nov 21 2019, 4:14 PM2019-11-21 16:14:55 (UTC+0)](#5681813)[gerritbot](/p/gerritbot/) added a comment.[Nov 22 2019, 12:44 PM2019-11-22 12:44:55 (UTC+0)](#5684361)Comment Actions

Change 552293 **merged** by jenkins-bot:

[wikidata/query/gui@master] Add security task to Gruntfile

<https://gerrit.wikimedia.org/r/552293>

[Addshore](/p/Addshore/) moved this task from [Unsorted 💣](/project/board/2102/) to [Active 🚁](/project/board/2102/) on the [User-Addshore](/tag/user-addshore/) board.[Nov 22 2019, 12:46 PM2019-11-22 12:46:42 (UTC+0)](#5684374)[Rosalie\_WMDE](/p/Rosalie_WMDE/) moved this task from [Done](/project/board/3539/) to [Peer Review](/project/board/3539/) on the [Wikidata-Campsite (Wikidata-Campsite-Iteration-∞ (On Hold))](/tag/wikidata-campsite-iteration-%E2%88%9E/) board.[Nov 22 2019, 12:48 PM2019-11-22 12:48:23 (UTC+0)](#5684381)[Rosalie\_WMDE](/p/Rosalie_WMDE/) moved this task from [Peer Review](/project/board/3539/) to [Done](/project/board/3539/) on the [Wikidata-Campsite (Wikidata-Campsite-Iteration-∞ (On Hold))](/tag/wikidata-campsite-iteration-%E2%88%9E/) board.[Nov 25 2019, 11:04 AM2019-11-25 11:04:43 (UTC+0)](#5688803)[Gehel](/p/Gehel/) moved this task from [Incoming](/project/board/1227/) to [Needs Reporting](/project/board/1227/) on the [Discovery-Search (Current work)](/tag/discovery-search-sprint/) board.[Nov 25 2019, 6:31 PM2019-11-25 18:31:00 (UTC+0)](#5690795)[sbassett](/p/sbassett/) mentioned this in [T238822: XSS in Wikidata Query Service UI (i18n messages) - CVE-2019-19327](/T238822).[Nov 25 2019, 10:17 PM2019-11-25 22:17:49 (UTC+0)](#5691511)[Addshore](/p/Addshore/) moved this task from [Done](/project/board/3539/) to [Doing](/project/board/3539/) on the [Wikidata-Campsite (Wikidata-Campsite-Iteration-∞ (On Hold))](/tag/wikidata-campsite-iteration-%E2%88%9E/) board.[Nov 26 2019, 2:08 PM2019-11-26 14:08:39 (UTC+0)](#5693468)[Addshore](/p/Addshore/) renamed this task from XSS in Wikidata Query Service UI to XSS in Wikidata Query Service UI, DATATYPE\_MATHML.[Nov 27 2019, 1:16 PM2019-11-27 13:16:51 (UTC+0)](#5696872)

[Addshore](/p/Addshore/) moved this task from [Doing](/project/board/3539/) to [Stalled/Waiting](/project/board/3539/) on the [Wikidata-Campsite (Wikidata-Campsite-Iteration-∞ (On Hold))](/tag/wikidata-campsite-iteration-%E2%88%9E/) board.[Nov 27 2019, 2:04 PM2019-11-27 14:04:52 (UTC+0)](#5697115)Comment Actions

CVE just requested via <https://cveform.mitre.org/>

[sbassett](/p/sbassett/) mentioned this in [T238824: XSS in Wikidata Query Service UI (entity labels) - CVE-2019-19328](/T238824).[Nov 27 2019, 3:38 PM2019-11-27 15:38:46 (UTC+0)](#5697356)[Addshore](/p/Addshore/) renamed this task from XSS in Wikidata Query Service UI, DATATYPE\_MATHML to XSS in Wikidata Query Service UI, DATATYPE\_MATHML - CVE-2019-19329.[Nov 28 2019, 9:58 AM2019-11-28 09:58:36 (UTC+0)](#5699307)[Addshore](/p/Addshore/) closed this task as Resolved.[Addshore](/p/Addshore/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-c5nnxjvgivf7mjj/)[• Pablo-WMDE](/p/Pablo-WMDE/) added a comment.[Nov 28 2019, 10:05 AM2019-11-28 10:05:23 (UTC+0)](#5699323)Comment Actions

<https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-19329>

[sbassett](/p/sbassett/) removed a project: [Patch-For-Review](/tag/patch-for-review/).[Dec 2 2019, 3:51 PM2019-12-02 15:51:55 (UTC+0)](#5705547)[sbassett](/p/sbassett/) moved this task from [Backlog / Other](/project/board/30/) to [Done](/project/board/30/) on the [acl\*security](/tag/acl_security/) board.[• chasemp](/p/chasemp/) added a project: [Security](/tag/security/).[Feb 10 2020, 10:56 PM2020-02-10 22:56:43 (UTC+0)](#5868957) · [• chasemp](/p/chasemp/) removed a project: [acl\*security](/tag/acl_security/).[Feb 20 2020, 8:16 PM2020-02-20 20:16:28 (UTC+0)](#5904419) · [Lucas\_Werkmeister\_WMDE](/p/Lucas_Werkmeister_WMDE/) mentioned this in [T297686: Wikidata Query UI lets users build links with arbitrary link text and javascript: URL](/T297686).[Dec 15 2021, 3:02 PM2021-12-15 15:02:05 (UTC+0)](#7572581)[Log In to Comment](/login/?next=)Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. · [Wikimedia Foundation](https://wikimediafoundation.org/) · [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) · [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) · [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) · [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) · [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) · [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) · [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)
