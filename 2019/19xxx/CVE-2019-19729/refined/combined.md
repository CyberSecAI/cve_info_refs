=== Content from www.npmjs.com_6eb82398_20250120_233834.html ===

skip to:[content](#main)[package search](#search)[sign in](#signin)â¤

* [Pro](/products/pro)
* [Teams](/products/teams)
* [Pricing](/products)
* [Documentation](https://docs.npmjs.com)
npmSearch[Sign Up](/signup)[Sign In](/login)
## bson-objectidTypeScript icon, indicating that this package has built-in type declarations

2.0.4Â â¢Â PublicÂ â¢Â Published 2 years ago

* [Readme](?activeTab=readme)
* [Code Beta](?activeTab=code)
* [0 Dependencies](?activeTab=dependencies)
* [534 Dependents](?activeTab=dependents)
* [23 Versions](?activeTab=versions)

# BSON ObjectID Â [Build Status](https://travis-ci.org/williamkapke/bson-objectid)

This module allows you to create and parse `ObjectID`s without a reference to the
[mongodb](https://github.com/mongodb/node-mongodb-native) or [bson](https://github.com/mongodb/js-bson)
modules.

The goal is to be 100% compatable with all [bson](https://github.com/mongodb/js-bson)'s
public API implementation (found here: <https://github.com/mongodb/js-bson/blob/main/src/objectid.ts>).

## Install

```
$ npm install bson-objectid

```
## Usage

```
var ObjectID = require("bson-objectid");

console.log(ObjectID());
console.log(ObjectID("54495ad94c934721ede76d90"));
console.log(ObjectID(1414093117));//time
console.log(ObjectID([ 84, 73, 90, 217, 76, 147, 71, 33, 237, 231, 109, 144 ]));
console.log(ObjectID(new Buffer([ 84, 73, 90, 217, 76, 147, 71, 33, 237, 231, 109, 144 ])));
```
### ObjectID()ObjectID(time)ObjectID(hexString)ObjectID(idString)ObjectID(array)ObjectID(buffer)

Creates a new immutable `ObjectID` instance based on the current system time.

Possible arguments:

**time** Constructs the instance based on the specified time (in seconds).

**hexString** Constructs the instance from a 24 character hex string.

**idString** Constructs the instance from a 12 byte string.

**array** Constructs the instance from an `Array` of 24 bytes.

**buffer** Constructs the instance from a 24 byte `Buffer` instance.

#### id

**returns** the 12 byte id string.

#### str

#### toHexString()

**returns** the `ObjectID` represented as a 24 character hex string.

#### equals(other)

**returns** true if the `ObjectID`s represent the same underlying value. Otherwise false.

#### getTimestamp()

**returns** the generation `Date` (accurate up to the second) that this `ObjectID` was generated.

### ObjectID.createFromTime(time)

Creates an ObjectID from a time (in seconds) `Number`, with the rest of the `ObjectID` zeroed out. Used for comparisons or sorting the ObjectID.

### ObjectID.createFromHexString(hexString)

Creates an ObjectID from a 24 character hex string.

### ObjectID.isValid(hexString)ObjectID.isValid(ObjectID)

Checks if a value is a valid `ObjectID` or 24 character hex string.

> THE NATIVE DOCUMENTATION ISN'T CLEAR ON THIS GUY!
>
> See: <http://mongodb.github.io/node-mongodb-native/api-bson-generated/objectid.html#objectid-isvalid>

## Test

```
mocha

```

or

```
npm test

```
# License

Apache v2.0

See LICENSE file.

Special callout to [@feross](https://github.com/feross) for the [is-buffer](https://github.com/feross/is-buffer) code
used internally to avoid Buffer from being loaded in browserify environments.

## Readme

### Keywords

* [ObjectID](/search?q=keywords:ObjectID)
* [mongo](/search?q=keywords:mongo)
* [mongodb](/search?q=keywords:mongodb)
* [bson](/search?q=keywords:bson)
* [createFromHexString](/search?q=keywords:createFromHexString)
* [hex](/search?q=keywords:hex)
## Package Sidebar

### Install

`npm i bson-objectid`

### Repository

[Gitgithub.com/williamkapke/bson-objectid](https://github.com/williamkapke/bson-objectid)

### Homepage

[github.com/williamkapke/bson-objectid](https://github.com/williamkapke/bson-objectid)

### DownloadsWeekly Downloads

181,777

### Version

2.0.4

### License

Apache-2.0

### Unpacked Size

35.2 kB

### Total Files

10

### Last publish

2 years ago

### Collaborators

* [![niftylettuce](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9iYWIzYmY0ZDk5OGJiNDYwNTYwMjEzNGU4MDI3YjU1OD9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.jCveio1tsYmjjbEHGbdE4zX-L8H_uezVWFUvi94uMsA "niftylettuce")](/~niftylettuce)
* [![williamkapke](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci85MTNkNTRjOWNiYmVlYjg5MDc3ODZhMThlNmZiZjg0ND9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.CaFEtOdOcOFvFiKjSJZ6PMmOapmbD5I7DiOVziVlDFE "williamkapke")](/~williamkapke)
* [![titanism](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci8yYjBiYTNhODU4ZmE3Mjc1NWUxMGJjOTcxZmJiOGUyNT9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.7VEJ-y8ylwJ6ZMbvaCfv1FBPbChCjM5zM1txx7z8B6c "titanism")](/~titanism)
[**Try** on RunKit](https://runkit.com/npm/bson-objectid)[**Report** malware](/support?inquire=security&security-inquire=malware&package=bson-objectid&version=2.0.4)
## Footer

### Support

* [Help](https://docs.npmjs.com)
* [Advisories](https://github.com/advisories)
* [Status](http://status.npmjs.org/)
* [Contact npm](/support)
### Company

* [About](/about)
* [Blog](https://github.blog/tag/npm/)
* [Press](/press)
### Terms & Policies

* [Policies](/policies/)
* [Terms of Use](/policies/terms)
* [Code of Conduct](/policies/conduct)
* [Privacy](/policies/privacy)



=== Content from github.com_f3eca3b4_20250120_233831.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcabinjs%2Fbson-objectid%2Fissues%2F30)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcabinjs%2Fbson-objectid%2Fissues%2F30)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=cabinjs%2Fbson-objectid)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[cabinjs](/cabinjs)
/
**[bson-objectid](/cabinjs/bson-objectid)**
Public

* [Notifications](/login?return_to=%2Fcabinjs%2Fbson-objectid) You must be signed in to change notification settings
* [Fork
  33](/login?return_to=%2Fcabinjs%2Fbson-objectid)
* [Star
   208](/login?return_to=%2Fcabinjs%2Fbson-objectid)

* [Code](/cabinjs/bson-objectid)
* [Issues
  5](/cabinjs/bson-objectid/issues)
* [Pull requests
  1](/cabinjs/bson-objectid/pulls)
* [Actions](/cabinjs/bson-objectid/actions)
* [Projects
  0](/cabinjs/bson-objectid/projects)
* [Wiki](/cabinjs/bson-objectid/wiki)
* [Security](/cabinjs/bson-objectid/security)
* [Insights](/cabinjs/bson-objectid/pulse)

Additional navigation options

* [Code](/cabinjs/bson-objectid)
* [Issues](/cabinjs/bson-objectid/issues)
* [Pull requests](/cabinjs/bson-objectid/pulls)
* [Actions](/cabinjs/bson-objectid/actions)
* [Projects](/cabinjs/bson-objectid/projects)
* [Wiki](/cabinjs/bson-objectid/wiki)
* [Security](/cabinjs/bson-objectid/security)
* [Insights](/cabinjs/bson-objectid/pulse)

# A vulnerability in ObjectID() #30

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[A vulnerability in ObjectID()](#top)#30Copy link![@xiaofen9](https://avatars.githubusercontent.com/u/20917869?u=5c2e1010cc9057e642092136074bd2ba5235d351&v=4&size=80)
## Description

![@xiaofen9](https://avatars.githubusercontent.com/u/20917869?u=5c2e1010cc9057e642092136074bd2ba5235d351&v=4&size=48)[xiaofen9](https://github.com/xiaofen9)opened [on Dec 7, 2019](https://github.com/cabinjs/bson-objectid/issues/30#issue-534452549)

We found that ObjectID() allows an attacker to generate a malformed objectid by inserting an additional property to his user-input.

The vulnerable code is as follows: bson-objectid will return early if it detects \_bsontype == ObjectID in user-input object. As a result, objects in arbitrary forms can bypass formatting if they have a valid bsontype.

<https://github.com/williamkapke/bson-objectid/blob/eaaf20d828974c1a2b8e07b522b1ebdc86672f41/objectid.js#L29-L32>

Unlike bson-objectid, the official implementation (shown in the following code) enforces a stricter early return condition, i.e., only if the constructor of the user-input object is ObjectID.

<https://github.com/mongodb/js-bson/blob/cea186763527e4d3749a8234d335e9c395effe5b/lib/objectid.js#L59-L61>

Reproduce script

```
var ObjectID = require("bson-objectid");

var json = {
    "mal_formkey": {
        "payload": "xxxx"
    },
    "_bsontype" : "ObjectID"
};

console.log(ObjectID(json));
console.log(ObjectID.isValid(ObjectID(json)));

```
## Metadata

### Assignees

No one assigned

### Labels

No labelsNo labels
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


