=== Content from github.com_85f5c4e0_20250120_234820.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkevinsawicki%2Fhttp-request%2Fblob%2Fmaster%2Flib%2Fsrc%2Fmain%2Fjava%2Fcom%2Fgithub%2Fkevinsawicki%2Fhttp%2FHttpRequest.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkevinsawicki%2Fhttp-request%2Fblob%2Fmaster%2Flib%2Fsrc%2Fmain%2Fjava%2Fcom%2Fgithub%2Fkevinsawicki%2Fhttp%2FHttpRequest.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=kevinsawicki%2Fhttp-request)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[kevinsawicki](/kevinsawicki)
/
**[http-request](/kevinsawicki/http-request)**
Public

* [Notifications](/login?return_to=%2Fkevinsawicki%2Fhttp-request) You must be signed in to change notification settings
* [Fork
  844](/login?return_to=%2Fkevinsawicki%2Fhttp-request)
* [Star
   3.4k](/login?return_to=%2Fkevinsawicki%2Fhttp-request)

* [Code](/kevinsawicki/http-request)
* [Issues
  70](/kevinsawicki/http-request/issues)
* [Pull requests
  15](/kevinsawicki/http-request/pulls)
* [Actions](/kevinsawicki/http-request/actions)
* [Projects
  0](/kevinsawicki/http-request/projects)
* [Wiki](/kevinsawicki/http-request/wiki)
* [Security](/kevinsawicki/http-request/security)
* [Insights](/kevinsawicki/http-request/pulse)

Additional navigation options

* [Code](/kevinsawicki/http-request)
* [Issues](/kevinsawicki/http-request/issues)
* [Pull requests](/kevinsawicki/http-request/pulls)
* [Actions](/kevinsawicki/http-request/actions)
* [Projects](/kevinsawicki/http-request/projects)
* [Wiki](/kevinsawicki/http-request/wiki)
* [Security](/kevinsawicki/http-request/security)
* [Insights](/kevinsawicki/http-request/pulse)

## Files

 master
## Breadcrumbs

1. [http-request](/kevinsawicki/http-request/tree/master)
2. /[lib](/kevinsawicki/http-request/tree/master/lib)
3. /[src](/kevinsawicki/http-request/tree/master/lib/src)
4. /[main](/kevinsawicki/http-request/tree/master/lib/src/main)
5. /[java](/kevinsawicki/http-request/tree/master/lib/src/main/java)
6. /[com](/kevinsawicki/http-request/tree/master/lib/src/main/java/com)
7. /[github](/kevinsawicki/http-request/tree/master/lib/src/main/java/com/github)
8. /[kevinsawicki](/kevinsawicki/http-request/tree/master/lib/src/main/java/com/github/kevinsawicki)
9. /[http](/kevinsawicki/http-request/tree/master/lib/src/main/java/com/github/kevinsawicki/http)
/
# HttpRequest.java

Copy path Blame  Blame
## Latest commit

## History

[History](/kevinsawicki/http-request/commits/master/lib/src/main/java/com/github/kevinsawicki/http/HttpRequest.java)3259 lines (2938 loc) · 86.4 KB master
## Breadcrumbs

1. [http-request](/kevinsawicki/http-request/tree/master)
2. /[lib](/kevinsawicki/http-request/tree/master/lib)
3. /[src](/kevinsawicki/http-request/tree/master/lib/src)
4. /[main](/kevinsawicki/http-request/tree/master/lib/src/main)
5. /[java](/kevinsawicki/http-request/tree/master/lib/src/main/java)
6. /[com](/kevinsawicki/http-request/tree/master/lib/src/main/java/com)
7. /[github](/kevinsawicki/http-request/tree/master/lib/src/main/java/com/github)
8. /[kevinsawicki](/kevinsawicki/http-request/tree/master/lib/src/main/java/com/github/kevinsawicki)
9. /[http](/kevinsawicki/http-request/tree/master/lib/src/main/java/com/github/kevinsawicki/http)
/
# HttpRequest.java

Top
## File metadata and controls

* Code
* Blame

3259 lines (2938 loc) · 86.4 KB[Raw](https://github.com/kevinsawicki/http-request/raw/refs/heads/master/lib/src/main/java/com/github/kevinsawicki/http/HttpRequest.java)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000/\* \* Copyright (c) 2014 Kevin Sawicki <kevinsawicki@gmail.com> \* \* Permission is hereby granted, free of charge, to any person obtaining a copy \* of this software and associated documentation files (the "Software"), to \* deal in the Software without restriction, including without limitation the \* rights to use, copy, modify, merge, publish, distribute, sublicense, and/or \* sell copies of the Software, and to permit persons to whom the Software is \* furnished to do so, subject to the following conditions: \* \* The above copyright notice and this permission notice shall be included in \* all copies or substantial portions of the Software. \* \* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING \* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS \* IN THE SOFTWARE. \*/package com.github.kevinsawicki.http;
import static java.net.HttpURLConnection.HTTP\_BAD\_REQUEST;import static java.net.HttpURLConnection.HTTP\_CREATED;import static java.net.HttpURLConnection.HTTP\_INTERNAL\_ERROR;import static java.net.HttpURLConnection.HTTP\_NO\_CONTENT;import static java.net.HttpURLConnection.HTTP\_NOT\_FOUND;import static java.net.HttpURLConnection.HTTP\_NOT\_MODIFIED;import static java.net.HttpURLConnection.HTTP\_OK;import static java.net.Proxy.Type.HTTP;
import java.io.BufferedInputStream;import java.io.BufferedOutputStream;import java.io.BufferedReader;import java.io.ByteArrayInputStream;import java.io.ByteArrayOutputStream;import java.io.Closeable;import java.io.File;import java.io.FileInputStream;import java.io.FileNotFoundException;import java.io.FileOutputStream;import java.io.Flushable;import java.io.IOException;import java.io.InputStream;import java.io.InputStreamReader;import java.io.OutputStream;import java.io.OutputStreamWriter;import java.io.PrintStream;import java.io.Reader;import java.io.UnsupportedEncodingException;import java.io.Writer;import java.net.HttpURLConnection;import java.net.InetSocketAddress;import java.net.MalformedURLException;import java.net.Proxy;import java.net.URI;import java.net.URISyntaxException;import java.net.URL;import java.net.URLEncoder;import java.nio.ByteBuffer;import java.nio.CharBuffer;import java.nio.charset.Charset;import java.nio.charset.CharsetEncoder;import java.security.AccessController;import java.security.GeneralSecurityException;import java.security.PrivilegedAction;import java.security.SecureRandom;import java.security.cert.X509Certificate;import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;import java.util.Iterator;import java.util.LinkedHashMap;import java.util.List;import java.util.Map;import java.util.Map.Entry;import java.util.concurrent.Callable;import java.util.concurrent.atomic.AtomicInteger;import java.util.concurrent.atomic.AtomicReference;import java.util.zip.GZIPInputStream;
import javax.net.ssl.HostnameVerifier;import javax.net.ssl.HttpsURLConnection;import javax.net.ssl.SSLContext;import javax.net.ssl.SSLSession;import javax.net.ssl.SSLSocketFactory;import javax.net.ssl.TrustManager;import javax.net.ssl.X509TrustManager;
/\*\* \* A fluid interface for making HTTP requests using an underlying \* {@link HttpURLConnection} (or sub-class). \* <p> \* Each instance supports making a single request and cannot be reused for \* further requests. \*/public class HttpRequest {
 /\*\* \* 'UTF-8' charset name \*/ public static final String CHARSET\_UTF8 = "UTF-8";
 /\*\* \* 'application/x-www-form-urlencoded' content type header value \*/ public static final String CONTENT\_TYPE\_FORM = "application/x-www-form-urlencoded";
 /\*\* \* 'application/json' content type header value \*/ public static final String CONTENT\_TYPE\_JSON = "application/json";
 /\*\* \* 'gzip' encoding header value \*/ public static final String ENCODING\_GZIP = "gzip";
 /\*\* \* 'Accept' header name \*/ public static final String HEADER\_ACCEPT = "Accept";
 /\*\* \* 'Accept-Charset' header name \*/ public static final String HEADER\_ACCEPT\_CHARSET = "Accept-Charset";
 /\*\* \* 'Accept-Encoding' header name \*/ public static final String HEADER\_ACCEPT\_ENCODING = "Accept-Encoding";
 /\*\* \* 'Authorization' header name \*/ public static final String HEADER\_AUTHORIZATION = "Authorization";
 /\*\* \* 'Cache-Control' header name \*/ public static final String HEADER\_CACHE\_CONTROL = "Cache-Control";
 /\*\* \* 'Content-Encoding' header name \*/ public static final String HEADER\_CONTENT\_ENCODING = "Content-Encoding";
 /\*\* \* 'Content-Length' header name \*/ public static final String HEADER\_CONTENT\_LENGTH = "Content-Length";
 /\*\* \* 'Content-Type' header name \*/ public static final String HEADER\_CONTENT\_TYPE = "Content-Type";
 /\*\* \* 'Date' header name \*/ public static final String HEADER\_DATE = "Date";
 /\*\* \* 'ETag' header name \*/ public static final String HEADER\_ETAG = "ETag";
 /\*\* \* 'Expires' header name \*/ public static final String HEADER\_EXPIRES = "Expires";
 /\*\* \* 'If-None-Match' header name \*/ public static final String HEADER\_IF\_NONE\_MATCH = "If-None-Match";
 /\*\* \* 'Last-Modified' header name \*/ public static final String HEADER\_LAST\_MODIFIED = "Last-Modified";
 /\*\* \* 'Location' header name \*/ public static final String HEADER\_LOCATION = "Location";
 /\*\* \* 'Proxy-Authorization' header name \*/ public static final String HEADER\_PROXY\_AUTHORIZATION = "Proxy-Authorization";
 /\*\* \* 'Referer' header name \*/ public static final String HEADER\_REFERER = "Referer";
 /\*\* \* 'Server' header name \*/ public static final String HEADER\_SERVER = "Server";
 /\*\* \* 'User-Agent' header name \*/ public static final String HEADER\_USER\_AGENT = "User-Agent";
 /\*\* \* 'DELETE' request method \*/ public static final String METHOD\_DELETE = "DELETE";
 /\*\* \* 'GET' request method \*/ public static final String METHOD\_GET = "GET";
 /\*\* \* 'HEAD' request method \*/ public static final String METHOD\_HEAD = "HEAD";
 /\*\* \* 'OPTIONS' options method \*/ public static final String METHOD\_OPTIONS = "OPTIONS";
 /\*\* \* 'POST' request method \*/ public static final String METHOD\_POST = "POST";
 /\*\* \* 'PUT' request method \*/ public static final String METHOD\_PUT = "PUT";
 /\*\* \* 'TRACE' request method \*/ public static final String METHOD\_TRACE = "TRACE";
 /\*\* \* 'charset' header value parameter \*/ public static final String PARAM\_CHARSET = "charset";
 private static final String BOUNDARY = "00content0boundary00";
 private static final String CONTENT\_TYPE\_MULTIPART = "multipart/form-data; boundary=" + BOUNDARY;
 private static final String CRLF = "\r\n";
 private static final String[] EMPTY\_STRINGS = new String[0];
 private static SSLSocketFactory TRUSTED\_FACTORY;
 private static HostnameVerifier TRUSTED\_VERIFIER;
 private static String getValidCharset(final String charset) { if (charset != null && charset.length() > 0) return charset; else return CHARSET\_UTF8; }
 private static SSLSocketFactory getTrustedFactory() throws HttpRequestException { if (TRUSTED\_FACTORY == null) { final TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
 public X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; }
 public void checkClientTrusted(X509Certificate[] chain, String authType) { // Intentionally left blank }
 public void checkServerTrusted(X509Certificate[] chain, String authType) { // Intentionally left blank } } }; try { SSLContext context = SSLContext.getInstance("TLS"); context.init(null, trustAllCerts, new SecureRandom()); TRUSTED\_FACTORY = context.getSocketFactory(); } catch (GeneralSecurityException e) { IOException ioException = new IOException( "Security exception configuring SSL context"); ioException.initCause(e); throw new HttpRequestException(ioException); } }
 return TRUSTED\_FACTORY; }
 private static HostnameVerifier getTrustedVerifier() { if (TRUSTED\_VERIFIER == null) TRUSTED\_VERIFIER = new HostnameVerifier() {
 public boolean verify(String hostname, SSLSession session) { return true; } };
 return TRUSTED\_VERIFIER; }
 private static StringBuilder addPathSeparator(final String baseUrl, final StringBuilder result) { // Add trailing slash if the base URL doesn't have any path segments. // // The following test is checking for the last slash not being part of // the protocol to host separator: '://'. if (baseUrl.indexOf(':') + 2 == baseUrl.lastIndexOf('/')) result.append('/'); return result; }
 private static StringBuilder addParamPrefix(final String baseUrl, final StringBuilder result) { // Add '?' if missing and add '&' if params already exist in base url final int queryStart = baseUrl.indexOf('?'); final int lastChar = result.length() - 1; if (queryStart == -1) result.append('?'); else if (queryStart < lastChar && baseUrl.charAt(lastChar) != '&') result.append('&'); return result; }
 private static StringBuilder addParam(final Object key, Object value, final StringBuilder result) { if (value != null && value.getClass().isArray()) value = arrayToList(value);
 if (value instanceof Iterable<?>) { Iterator<?> iterator = ((Iterable<?>) value).iterator(); while (iterator.hasNext()) { result.append(key); result.append("[]="); Object element = iterator.next(); if (element != null) result.append(element); if (iterator.hasNext()) result.append("&"); } } else { result.append(key); result.append("="); if (value != null) result.append(value); }
 return result; }
 /\*\* \* Creates {@link HttpURLConnection HTTP connections} for \* {@link URL urls}. \*/ public interface ConnectionFactory { /\*\* \* Open an {@link HttpURLConnection} for the specified {@link URL}. \* \* @throws IOException \*/ HttpURLConnection create(URL url) throws IOException;
 /\*\* \* Open an {@link HttpURLConnection} for the specified {@link URL} \* and {@link Proxy}. \* \* @throws IOException \*/ HttpURLConnection create(URL url, Proxy proxy) throws IOException;
 /\*\* \* A {@link ConnectionFactory} which uses the built-in \* {@link URL#openConnection()} \*/ ConnectionFactory DEFAULT = new ConnectionFactory() { public HttpURLConnection create(URL url) throws IOException { return (HttpURLConnection) url.openConnection(); }
 public HttpURLConnection create(URL url, Proxy proxy) throws IOException { return (HttpURLConnection) url.openConnection(proxy); } }; }
 private static ConnectionFactory CONNECTION\_FACTORY = ConnectionFactory.DEFAULT;
 /\*\* \* Specify the {@link ConnectionFactory} used to create new requests. \*/ public static void setConnectionFactory(final ConnectionFactory connectionFactory) { if (connectionFactory == null) CONNECTION\_FACTORY = ConnectionFactory.DEFAULT; else CONNECTION\_FACTORY = connectionFactory; }
 /\*\* \* Callback interface for reporting upload progress for a request. \*/ public interface UploadProgress { /\*\* \* Callback invoked as data is uploaded by the request. \* \* @param uploaded The number of bytes already uploaded \* @param total The total number of bytes that will be uploaded or -1 if \* the length is unknown. \*/ void onUpload(long uploaded, long total);
 UploadProgress DEFAULT = new UploadProgress() { public void onUpload(long uploaded, long total) { } }; }
 /\*\* \* <p> \* Encodes and decodes to and from Base64 notation. \* </p> \* <p> \* I am placing this code in the Public Domain. Do with it as you will. This \* software comes with no guarantees or warranties but with plenty of \* well-wishing instead! Please visit <a \* href="http://iharder.net/base64">http://iharder.net/base64</a> periodically \* to check for updates or to contribute improvements. \* </p> \* \* @author Robert Harder \* @author rob@iharder.net \* @version 2.3.7 \*/ public static class Base64 {
 /\*\* The equals sign (=) as a byte. \*/ private final static byte EQUALS\_SIGN = (byte) '=';
 /\*\* Preferred encoding. \*/ private final static String PREFERRED\_ENCODING = "US-ASCII";
 /\*\* The 64 valid Base64 values. \*/ private final static byte[] \_STANDARD\_ALPHABET = { (byte) 'A', (byte) 'B', (byte) 'C', (byte) 'D', (byte) 'E', (byte) 'F', (byte) 'G', (byte) 'H', (byte) 'I', (byte) 'J', (byte) 'K', (byte) 'L', (byte) 'M', (byte) 'N', (byte) 'O', (byte) 'P', (byte) 'Q', (byte) 'R', (byte) 'S', (byte) 'T', (byte) 'U', (byte) 'V', (byte) 'W', (byte) 'X', (byte) 'Y', (byte) 'Z', (byte) 'a', (byte) 'b', (byte) 'c', (byte) 'd', (byte) 'e', (byte) 'f', (byte) 'g', (byte) 'h', (byte) 'i', (byte) 'j', (byte) 'k', (byte) 'l', (byte) 'm', (byte) 'n', (byte) 'o', (byte) 'p', (byte) 'q', (byte) 'r', (byte) 's', (byte) 't', (byte) 'u', (byte) 'v', (byte) 'w', (byte) 'x', (byte) 'y', (byte) 'z', (byte) '0', (byte) '1', (byte) '2', (byte) '3', (byte) '4', (byte) '5', (byte) '6', (byte) '7', (byte) '8', (byte) '9', (byte) '+', (byte) '/' };
 /\*\* Defeats instantiation. \*/ private Base64() { }
 /\*\* \* <p> \* Encodes up to three bytes of the array <var>source</var> and writes the \* resulting four Base64 bytes to <var>destination</var>. The source and \* destination arrays can be manipulated anywhere along their length by \* specifying <var>srcOffset</var> and <var>destOffset</var>. This method \* does not check to make sure your arrays are large enough to accomodate \* <var>srcOffset</var> + 3 for the <var>source</var> array or \* <var>destOffset</var> + 4 for the <var>destination</var> array. The \* actual number of significant bytes in your array is given by \* <var>numSigBytes</var>. \* </p> \* <p> \* This is the lowest level of the encoding methods with all possible \* parameters. \* </p> \* \* @param source \* the array to convert \* @param srcOffset \* the index where conversion begins \* @param numSigBytes \* the number of significant bytes in your array \* @param destination \* the array to hold the conversion \* @param destOffset \* the index where output will be put \* @return the <var>destination</var> array \* @since 1.3 \*/ private static byte[] encode3to4(byte[] source, int srcOffset, int numSigBytes, byte[] destination, int destOffset) {
 byte[] ALPHABET = \_STANDARD\_ALPHABET;
 int inBuff = (numSigBytes > 0 ? ((source[srcOffset] << 24) >>> 8) : 0) | (numSigBytes > 1 ? ((source[srcOffset + 1] << 24) >>> 16) : 0) | (numSigBytes > 2 ? ((source[srcOffset + 2] << 24) >>> 24) : 0);
 switch (numSigBytes) { case 3: destination[destOffset] = ALPHABET[(inBuff >>> 18)]; destination[destOffset + 1] = ALPHABET[(inBuff >>> 12) & 0x3f]; destination[destOffset + 2] = ALPHABET[(inBuff >>> 6) & 0x3f]; destination[destOffset + 3] = ALPHABET[(inBuff) & 0x3f]; return destination;
 case 2: destination[destOffset] = ALPHABET[(inBuff >>> 18)]; destination[destOffset + 1] = ALPHABET[(inBuff >>> 12) & 0x3f]; destination[destOffset + 2] = ALPHABET[(inBuff >>> 6) & 0x3f]; destination[destOffset + 3] = EQUALS\_SIGN; return destination;
 case 1: destination[destOffset] = ALPHABET[(inBuff >>> 18)]; destination[destOffset + 1] = ALPHABET[(inBuff >>> 12) & 0x3f]; destination[destOffset + 2] = EQUALS\_SIGN; destination[destOffset + 3] = EQUALS\_SIGN; return destination;
 default: return destination; } }
 /\*\* \* Encode string as a byte array in Base64 annotation. \* \* @param string \* @return The Base64-encoded data as a string \*/ public static String encode(String string) { byte[] bytes; try { bytes = string.getBytes(PREFERRED\_ENCODING); } catch (UnsupportedEncodingException e) { bytes = string.getBytes(); } return encodeBytes(bytes); }
 /\*\* \* Encodes a byte array into Base64 notation. \* \* @param source \* The data to convert \* @return The Base64-encoded data as a String \* @throws NullPointerException \* if source array is null \* @throws IllegalArgumentException \* if source array, offset, or length are invalid \* @since 2.0 \*/ public static String encodeBytes(byte[] source) { return encodeBytes(source, 0, source.length); }
 /\*\* \* Encodes a byte array into Base64 notation. \* \* @param source \* The data to convert \* @param off \* Offset in array where conversion should begin \* @param len \* Length of data to convert \* @return The Base64-encoded data as a String \* @throws NullPointerException \* if source array is null \* @throws IllegalArgumentException \* if source array, offset, or length are invalid \* @since 2.0 \*/ public static String encodeBytes(byte[] source, int off, int len) { byte[] encoded = encodeBytesToBytes(source, off, len); try { return new String(encoded, PREFERRED\_ENCODING); } catch (UnsupportedEncodingException uue) { return new String(encoded); } }
 /\*\* \* Similar to {@link #encodeBytes(byte[], int, int)} but returns a byte \* array instead of instantiating a String. This is more efficient if you're \* working with I/O streams and have large data sets to encode. \* \* \* @param source \* The data to convert \* @param off \* Offset in array where conversion should begin \* @param len \* Length of data to convert \* @return The Base64-encoded data as a String if there is an error \* @throws NullPointerException \* if source array is null \* @throws IllegalArgumentException \* if source array, offset, or length are invalid \* @since 2.3.1 \*/ public static byte[] encodeBytesToBytes(byte[] source, int off, int len) {
 if (source == null) throw new NullPointerException("Cannot serialize a null array.");
 if (off < 0) throw new IllegalArgumentException("Cannot have negative offset: " + off);
 if (len < 0) throw new IllegalArgumentException("Cannot have length offset: " + len);
 if (off + len > source.length) throw new IllegalArgumentException( String .format( "Cannot have offset of %d and length of %d with array of length %d", off, len, source.length));
 // Bytes needed for actual encoding int encLen = (len / 3) \* 4 + (len % 3 > 0 ? 4 : 0);
 byte[] outBuff = new byte[encLen];
 int d = 0; int e = 0; int len2 = len - 2; for (; d < len2; d += 3, e += 4) encode3to4(source, d + off, 3, outBuff, e);
 if (d < len) { encode3to4(source, d + off, len - d, outBuff, e); e += 4; }
 if (e <= outBuff.length - 1) { byte[] finalOut = new byte[e]; System.arraycopy(outBuff, 0, finalOut, 0, e); return finalOut; } else return outBuff; } }
 /\*\* \* HTTP request exception whose cause is always an {@link IOException} \*/ public static class HttpRequestException extends RuntimeException {
 private static final long serialVersionUID = -1170466989781746231L;
 /\*\* \* Create a new HttpRequestException with the given cause \* \* @param cause \*/ public HttpRequestException(final IOException cause) { super(cause); }
 /\*\* \* Get {@link IOException} that triggered this request exception \* \* @return {@link IOException} cause \*/ @Override public IOException getCause() { return (IOException) super.getCause(); } }
 /\*\* \* Operation that handles executing a callback once complete and handling \* nested exceptions \* \* @param <V> \*/ protected static abstract class Operation<V> implements Callable<V> {
 /\*\* \* Run operation \* \* @return result \* @throws HttpRequestException \* @throws IOException \*/ protected abstract V run() throws HttpRequestException, IOException;
 /\*\* \* Operation complete callback \* \* @throws IOException \*/ protected abstract void done() throws IOException;
 public V call() throws HttpRequestException { boolean thrown = false; try { return run(); } catch (HttpRequestException e) { thrown = true; throw e; } catch (IOException e) { thrown = true; throw new HttpRequestException(e); } finally { try { done(); } catch (IOException e) { if (!thrown) throw new HttpRequestException(e); } } } }
 /\*\* \* Class that ensures a {@link Closeable} gets closed with proper exception \* handling. \* \* @param <V> \*/ protected static abstract class CloseOperation<V> extends Operation<V> {
 private final Closeable closeable;
 private final boolean ignoreCloseExceptions;
 /\*\* \* Create closer for operation \* \* @param closeable \* @param ignoreCloseExceptions \*/ protected CloseOperation(final Closeable closeable, final boolean ignoreCloseExceptions) { this.closeable = closeable; this.ignoreCloseExceptions = ignoreCloseExceptions; }
 @Override protected void done() throws IOException { if (closeable instanceof Flushable) ((Flushable) closeable).flush(); if (ignoreCloseExceptions) try { closeable.close(); } catch (IOException e) { // Ignored } else closeable.close(); } }
 /\*\* \* Class that and ensures a {@link Flushable} gets flushed with proper \* exception handling. \* \* @param <V> \*/ protected static abstract class FlushOperation<V> extends Operation<V> {
 private final Flushable flushable;
 /\*\* \* Create flush operation \* \* @param flushable \*/ protected FlushOperation(final Flushable flushable) { this.flushable = flushable; }
 @Override protected void done() throws IOException { flushable.flush(); } }
 /\*\* \* Request output stream \*/ public static class RequestOutputStream extends BufferedOutputStream {
 private final CharsetEncoder encoder;
 /\*\* \* Create request output stream \* \* @param stream \* @param charset \* @param bufferSize \*/ public RequestOutputStream(final OutputStream stream, final String charset, final int bufferSize) { super(stream, bufferSize);
 encoder = Charset.forName(getValidCharset(charset)).newEncoder(); }
 /\*\* \* Write string to stream \* \* @param value \* @return this stream \* @throws IOException \*/ public RequestOutputStream write(final String value) throws IOException { final ByteBuffer bytes = encoder.encode(CharBuffer.wrap(value));
 super.write(bytes.array(), 0, bytes.limit());
 return this; } }
 /\*\* \* Represents array of any type as list of objects so we can easily iterate over it \* @param array of elements \* @return list with the same elements \*/ private static List<Object> arrayToList(final Object array) { if (array instanceof Object[]) return Arrays.asList((Object[]) array);
 List<Object> result = new ArrayList<Object>(); // Arrays of the primitive types can't be cast to array of Object, so this: if (array instanceof int[]) for (int value : (int[]) array) result.add(value); else if (array instanceof boolean[]) for (boolean value : (boolean[]) array) result.add(value); else if (array instanceof long[]) for (long value : (long[]) array) result.add(value); else if (array instanceof float[]) for (float value : (float[]) array) result.add(value); else if (array instanceof double[]) for (double value : (double[]) array) result.add(value); else if (array instanceof short[]) for (short value : (short[]) array) result.add(value); else if (array instanceof byte[]) for (byte value : (byte[]) array) result.add(value); else if (array instanceof char[]) for (char value : (char[]) array) result.add(value); return result; }
 /\*\* \* Encode the given URL as an ASCII {@link String} \* <p> \* This method ensures the path and query segments of the URL are properly \* encoded such as ' ' characters being encoded to '%20' or any UTF-8 \* characters that are non-ASCII. No encoding of URLs is done by default by \* the {@link HttpRequest} constructors and so if URL encoding is needed this \* method should be called before calling the {@link HttpRequest} constructor. \* \* @param url \* @return encoded URL \* @throws HttpRequestException \*/ public static String encode(final CharSequence url) throws HttpRequestException { URL parsed; try { parsed = new URL(url.toString()); } catch (IOException e) { throw new HttpRequestException(e); }
 String host = parsed.getHost(); int port = parsed.getPort(); if (port != -1) host = host + ':' + Integer.toString(port);
 try { String encoded = new URI(parsed.getProtocol(), host, parsed.getPath(), parsed.getQuery(), null).toASCIIString(); int paramsStart = encoded.indexOf('?'); if (paramsStart > 0 && paramsStart + 1 < encoded.length()) encoded = encoded.substring(0, paramsStart + 1) + encoded.substring(paramsStart + 1).replace("+", "%2B"); return encoded; } catch (URISyntaxException e) { IOException io = new IOException("Parsing URI failed"); io.initCause(e); throw new HttpRequestException(io); } }
 /\*\* \* Append given map as query parameters to the base URL \* <p> \* Each map entry's key will be a parameter name and the value's \* {@link Object#toString()} will be the parameter value. \* \* @param url \* @param params \* @return URL with appended query params \*/ public static String append(final CharSequence url, final Map<?, ?> params) { final String baseUrl = url.toString(); if (params == null || params.isEmpty()) return baseUrl;
 final StringBuilder result = new StringBuilder(baseUrl);
 addPathSeparator(baseUrl, result); addParamPrefix(baseUrl, result);
 Entry<?, ?> entry; Iterator<?> iterator = params.entrySet().iterator(); entry = (Entry<?, ?>) iterator.next(); addParam(entry.getKey().toString(), entry.getValue(), result);
 while (iterator.hasNext()) { result.append('&'); entry = (Entry<?, ?>) iterator.next(); addParam(entry.getKey().toString(), entry.getValue(), result); }
 return result.toString(); }
 /\*\* \* Append given name/value pairs as query parameters to the base URL \* <p> \* The params argument is interpreted as a sequence of name/value pairs so the \* given number of params must be divisible by 2. \* \* @param url \* @param params \* name/value pairs \* @return URL with appended query params \*/ public static String append(final CharSequence url, final Object... params) { final String baseUrl = url.toString(); if (params == null || params.length == 0) return baseUrl;
 if (params.length % 2 != 0) throw new IllegalArgumentException( "Must specify an even number of parameter names/values");
 final StringBuilder result = new StringBuilder(baseUrl);
 addPathSeparator(baseUrl, result); addParamPrefix(baseUrl, result);
 addParam(params[0], params[1], result);
 for (int i = 2; i < params.length; i += 2) { result.append('&'); addParam(params[i], params[i + 1], result); }
 return result.toString(); }
 /\*\* \* Start a 'GET' request to the given URL \* \* @param url \* @return request \* @throws HttpRequestException \*/ public static HttpRequest get(final CharSequence url) throws HttpRequestException { return new HttpRequest(url, METHOD\_GET); }
 /\*\* \* Start a 'GET' request to the given URL \* \* @param url \* @return request \* @throws HttpRequestException \*/ public static HttpRequest get(final URL url) throws HttpRequestException { return new HttpRequest(url, METHOD\_GET); }
 /\*\* \* Start a 'GET' request to the given URL along with the query params \* \* @param baseUrl \* @param params \* The query parameters to include as part of the baseUrl \* @param encode[View remainder of file in raw view](https://github.com/kevinsawicki/http-request/raw/refs/heads/master/lib/src/main/java/com/github/kevinsawicki/http/HttpRequest.java)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


