=== Content from www.mozilla.org_8c874c66_20250120_235829.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2019-13

## Security vulnerabilities fixed in Firefox 67

Announced
May 21, 2019
Impact
critical
Products
Firefox
Fixed in

* Firefox 67

#### [#CVE-2019-9815: Disable hyperthreading on content JavaScript threads on macOS](#CVE-2019-9815)

Reporter
[Multiple independent researchers](https://mdsattacks.com/#People)
Impact
high
##### Description

If hyperthreading is not disabled, a timing attack vulnerability exists, similar to previous Spectre attacks. Apple has shipped macOS 10.14.5 with an option to disable hyperthreading in applications running untrusted code in a thread through a new sysctl. Firefox now makes use of it on the main thread and any worker threads.
*Note: users need to update to macOS 10.14.5 in order to take advantage of this change.*

##### References

* [Bug 1546544](https://bugzilla.mozilla.org/show_bug.cgi?id=1546544)
* [RIDL and Fallout: MDS attacks](https://mdsattacks.com/)

#### [#CVE-2019-9816: Type confusion with object groups and UnboxedObjects](#CVE-2019-9816)

Reporter
Samuel Groß of Google Project Zero
Impact
high
##### Description

A possible vulnerability exists where type confusion can occur when manipulating JavaScript objects in object groups, allowing for the bypassing of security checks within these groups.
*Note: this vulnerability has only been demonstrated with `UnboxedObjects`, which are disabled by default on all supported releases.*

##### References

* [Bug 1536768](https://bugzilla.mozilla.org/show_bug.cgi?id=1536768)

#### [#CVE-2019-9817: Stealing of cross-domain images using canvas](#CVE-2019-9817)

Reporter
Luật Nguyễn
Impact
high
##### Description

Images from a different domain can be read using a canvas object in some circumstances. This could be used to steal image data from a different site in violation of same-origin policy.

##### References

* [Bug 1540221](https://bugzilla.mozilla.org/show_bug.cgi?id=1540221)

#### [#CVE-2019-9818: Use-after-free in crash generation server](#CVE-2019-9818)

Reporter
Thomas Imbert
Impact
high
##### Description

A race condition is present in the crash generation server used to generate data for the crash reporter. This issue can lead to a use-after-free in the main process, resulting in a potentially exploitable crash and a sandbox escape.
*Note: this vulnerability only affects Windows. Other operating systems are unaffected.*

##### References

* [Bug 1542581](https://bugzilla.mozilla.org/show_bug.cgi?id=1542581)

#### [#CVE-2019-9819: Compartment mismatch with fetch API](#CVE-2019-9819)

Reporter
Nils
Impact
high
##### Description

A vulnerability where a JavaScript compartment mismatch can occur while working with the `fetch` API, resulting in a potentially exploitable crash.

##### References

* [Bug 1532553](https://bugzilla.mozilla.org/show_bug.cgi?id=1532553)

#### [#CVE-2019-9820: Use-after-free of ChromeEventHandler by DocShell](#CVE-2019-9820)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur in the chrome event handler when it is freed while still in use. This results in a potentially exploitable crash.

##### References

* [Bug 1536405](https://bugzilla.mozilla.org/show_bug.cgi?id=1536405)

#### [#CVE-2019-9821: Use-after-free in AssertWorkerThread](#CVE-2019-9821)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur in `AssertWorkerThread` due to a race condition with shared workers. This results in a potentially exploitable crash.

##### References

* [Bug 1539125](https://bugzilla.mozilla.org/show_bug.cgi?id=1539125)

#### [#CVE-2019-11691: Use-after-free in XMLHttpRequest](#CVE-2019-11691)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur when working with `XMLHttpRequest` (XHR) in an event loop, causing the XHR main thread to be called after it has been freed. This results in a potentially exploitable crash.

##### References

* [Bug 1542465](https://bugzilla.mozilla.org/show_bug.cgi?id=1542465)

#### [#CVE-2019-11692: Use-after-free removing listeners in the event listener manager](#CVE-2019-11692)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur when listeners are removed from the event listener manager while still in use, resulting in a potentially exploitable crash.

##### References

* [Bug 1544670](https://bugzilla.mozilla.org/show_bug.cgi?id=1544670)

#### [#CVE-2019-11693: Buffer overflow in WebGL bufferdata on Linux](#CVE-2019-11693)

Reporter
crixer
Impact
high
##### Description

The `bufferdata` function in WebGL is vulnerable to a buffer overflow with specific graphics drivers on Linux. This could result in malicious content freezing a tab or triggering a potentially exploitable crash.
*Note: this issue only occurs on Linux. Other operating systems are unaffected.*

##### References

* [Bug 1532525](https://bugzilla.mozilla.org/show_bug.cgi?id=1532525)

#### [#CVE-2019-7317: Use-after-free in png\_image\_free of libpng library](#CVE-2019-7317)

Reporter
OSS-Fuzz, Eddie Lee
Impact
high
##### Description

A use-after-free vulnerability was discovered in the `png_image_free` function in the libpng library. This could lead to denial of service or a potentially exploitable crash when a malformed image is processed.

##### References

* [Bug 1542829](https://bugzilla.mozilla.org/show_bug.cgi?id=1542829)

#### [#CVE-2019-11694: Uninitialized memory memory leakage in Windows sandbox](#CVE-2019-11694)

Reporter
Jeremy Fetiveau of SSD Secure Disclosure
Impact
moderate
##### Description

A vulnerability exists in the Windows sandbox where an uninitialized value in memory can be leaked to a renderer from a broker when making a call to access an otherwise unavailable file. This results in the potential leaking of information stored at that memory location.
*Note: this issue only occurs on Windows. Other operating systems are unaffected.*

##### References

* [Bug 1534196](https://bugzilla.mozilla.org/show_bug.cgi?id=1534196)

#### [#CVE-2019-11695: Custom cursor can render over user interface outside of web content](#CVE-2019-11695)

Reporter
bignis
Impact
moderate
##### Description

A custom cursor defined by scripting on a site can position itself over the addressbar to spoof the actual cursor when it should not be allowed outside of the primary web content area. This could be used by a malicious site to trick users into clicking on permission prompts, doorhanger notifications, or other buttons inadvertently if the location is spoofed over the user interface.

##### References

* [Bug 1445844](https://bugzilla.mozilla.org/show_bug.cgi?id=1445844)

#### [#CVE-2019-11696: Java web start .JNLP files are not recognized as executable files for download prompts](#CVE-2019-11696)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

Files with the `.JNLP` extension used for "Java web start" applications are not treated as executable content for download prompts even though they can be executed if Java is installed on the local system. This could allow users to mistakenly launch an executable binary locally.

##### References

* [Bug 1392955](https://bugzilla.mozilla.org/show_bug.cgi?id=1392955)

#### [#CVE-2019-11697: Pressing key combinations can bypass installation prompt delays and install extensions](#CVE-2019-11697)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

If the `ALT` and "a" keys are pressed when users receive an extension installation prompt, the extension will be installed without the install prompt delay that keeps the prompt visible in order for users to accept or decline the installation. A malicious web page could use this with spoofing on the page to trick users into installing a malicious extension.

##### References

* [Bug 1440079](https://bugzilla.mozilla.org/show_bug.cgi?id=1440079)

#### [#CVE-2019-11698: Theft of user history data through drag and drop of hyperlinks to and from bookmarks](#CVE-2019-11698)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

If a crafted hyperlink is dragged and dropped to the bookmark bar or sidebar and the resulting bookmark is subsequently dragged and dropped into the web content area, an arbitrary query of a user's browser history can be run and transmitted to the content page via `drop` event data. This allows for the theft of browser history by a malicious site.

##### References

* [Bug 1543191](https://bugzilla.mozilla.org/show_bug.cgi?id=1543191)

#### [#CVE-2019-11700: res: protocol can be used to open known local files](#CVE-2019-11700)

Reporter
James Lee
Impact
moderate
##### Description

A hyperlink using the `res:` protocol can be used to open local files at a known location in Internet Explorer if a user approves execution when prompted.
*Note: this issue only occurs on Windows. Other operating systems are unaffected.*

##### References

* [Bug 1549833](https://bugzilla.mozilla.org/show_bug.cgi?id=1549833)

#### [#CVE-2019-11699: Incorrect domain name highlighting during page navigation](#CVE-2019-11699)

Reporter
tzachyr
Impact
low
##### Description

A malicious page can briefly cause the wrong name to be highlighted as the domain name in the addressbar during page navigations. This could result in user confusion of which site is currently loaded for spoofing attacks.

##### References

* [Bug 1528939](https://bugzilla.mozilla.org/show_bug.cgi?id=1528939)

#### [#CVE-2019-11701: webcal: protocol default handler loads vulnerable web page](#CVE-2019-11701)

Reporter
Peter af Geijerstam
Impact
low
##### Description

The default `webcal:` protocol handler will load a web site vulnerable to cross-site scripting (XSS) attacks. This default was left in place as a legacy feature and has now been removed.
*Note: this issue only affects users with an account on the vulnerable service. Other users are unaffected.*

##### References

* [Bug 1518627](https://bugzilla.mozilla.org/show_bug.cgi?id=1518627)

#### [#CVE-2019-9814: Memory safety bugs fixed in Firefox 67](#CVE-2019-9814)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Christian Holler, Andrei Ciure, Julien Cristau, Jan de Mooij, Jan Varga, Marcia Knous, André Bargull, and Philipp reported memory safety bugs present in Firefox 66. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 67](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1527592%2C1534536%2C1520132%2C1543159%2C1539393%2C1459932%2C1459182%2C1516425)

#### [#CVE-2019-9800: Memory safety bugs fixed in Firefox 67 and Firefox ESR 60.7](#CVE-2019-9800)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Olli Pettay, Bogdan Tara, Jan de Mooij, Jason Kratzer, Jan Varga, Gary Kwong, Tim Guan-tin Chien, Tyson Smith, Ronald Crane, and Ted Campbell reported memory safety bugs present in Firefox 66 and Firefox ESR 60.6. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 67 and Firefox ESR 60.7](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1540166%2C1534593%2C1546327%2C1540136%2C1538736%2C1538042%2C1535612%2C1499719%2C1499108%2C1538619%2C1535194%2C1516325%2C1542324%2C1542097%2C1532465%2C1533554%2C1541580)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from www.mozilla.org_ca3e0273_20250120_235829.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2019-14

## Security vulnerabilities fixed in Firefox ESR 60.7

Announced
May 21, 2019
Impact
critical
Products
Firefox ESR
Fixed in

* Firefox ESR 60.7

#### [#CVE-2019-9815: Disable hyperthreading on content JavaScript threads on macOS](#CVE-2019-9815)

Reporter
[Multiple independent researchers](https://mdsattacks.com/#People)
Impact
high
##### Description

If hyperthreading is not disabled, a timing attack vulnerability exists, similar to previous Spectre attacks. Apple has shipped macOS 10.14.5 with an option to disable hyperthreading in applications running untrusted code in a thread through a new sysctl. Firefox now makes use of it on the main thread and any worker threads.
*Note: users need to update to macOS 10.14.5 in order to take advantage of this change.*

##### References

* [Bug 1546544](https://bugzilla.mozilla.org/show_bug.cgi?id=1546544)
* [RIDL and Fallout: MDS attacks](https://mdsattacks.com/)

#### [#CVE-2019-9816: Type confusion with object groups and UnboxedObjects](#CVE-2019-9816)

Reporter
Samuel Groß of Google Project Zero
Impact
high
##### Description

A possible vulnerability exists where type confusion can occur when manipulating JavaScript objects in object groups, allowing for the bypassing of security checks within these groups.
*Note: this vulnerability has only been demonstrated with `UnboxedObjects`, which are disabled by default on all supported releases.*

##### References

* [Bug 1536768](https://bugzilla.mozilla.org/show_bug.cgi?id=1536768)

#### [#CVE-2019-9817: Stealing of cross-domain images using canvas](#CVE-2019-9817)

Reporter
Luật Nguyễn
Impact
high
##### Description

Images from a different domain can be read using a canvas object in some circumstances. This could be used to steal image data from a different site in violation of same-origin policy.

##### References

* [Bug 1540221](https://bugzilla.mozilla.org/show_bug.cgi?id=1540221)

#### [#CVE-2019-9818: Use-after-free in crash generation server](#CVE-2019-9818)

Reporter
Thomas Imbert
Impact
high
##### Description

A race condition is present in the crash generation server used to generate data for the crash reporter. This issue can lead to a use-after-free in the main process, resulting in a potentially exploitable crash and a sandbox escape.
*Note: this vulnerability only affects Windows. Other operating systems are unaffected.*

##### References

* [Bug 1542581](https://bugzilla.mozilla.org/show_bug.cgi?id=1542581)

#### [#CVE-2019-9819: Compartment mismatch with fetch API](#CVE-2019-9819)

Reporter
Nils
Impact
high
##### Description

A vulnerability where a JavaScript compartment mismatch can occur while working with the `fetch` API, resulting in a potentially exploitable crash.

##### References

* [Bug 1532553](https://bugzilla.mozilla.org/show_bug.cgi?id=1532553)

#### [#CVE-2019-9820: Use-after-free of ChromeEventHandler by DocShell](#CVE-2019-9820)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur in the chrome event handler when it is freed while still in use. This results in a potentially exploitable crash.

##### References

* [Bug 1536405](https://bugzilla.mozilla.org/show_bug.cgi?id=1536405)

#### [#CVE-2019-11691: Use-after-free in XMLHttpRequest](#CVE-2019-11691)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur when working with `XMLHttpRequest` (XHR) in an event loop, causing the XHR main thread to be called after it has been freed. This results in a potentially exploitable crash.

##### References

* [Bug 1542465](https://bugzilla.mozilla.org/show_bug.cgi?id=1542465)

#### [#CVE-2019-11692: Use-after-free removing listeners in the event listener manager](#CVE-2019-11692)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur when listeners are removed from the event listener manager while still in use, resulting in a potentially exploitable crash.

##### References

* [Bug 1544670](https://bugzilla.mozilla.org/show_bug.cgi?id=1544670)

#### [#CVE-2019-11693: Buffer overflow in WebGL bufferdata on Linux](#CVE-2019-11693)

Reporter
crixer
Impact
high
##### Description

The `bufferdata` function in WebGL is vulnerable to a buffer overflow with specific graphics drivers on Linux. This could result in malicious content freezing a tab or triggering a potentially exploitable crash.
*Note: this issue only occurs on Linux. Other operating systems are unaffected.*

##### References

* [Bug 1532525](https://bugzilla.mozilla.org/show_bug.cgi?id=1532525)

#### [#CVE-2019-7317: Use-after-free in png\_image\_free of libpng library](#CVE-2019-7317)

Reporter
OSS-Fuzz, Eddie Lee
Impact
high
##### Description

A use-after-free vulnerability was discovered in the `png_image_free` function in the libpng library. This could lead to denial of service or a potentially exploitable crash when a malformed image is processed.

##### References

* [Bug 1542829](https://bugzilla.mozilla.org/show_bug.cgi?id=1542829)

#### [#CVE-2019-9797: Cross-origin theft of images with createImageBitmap](#CVE-2019-9797)

Reporter
AaylaSecura1138
Impact
high
##### Description

Cross-origin images can be read in violation of the same-origin policy by exporting an image after using `createImageBitmap` to read the image and then rendering the resulting bitmap image within a `canvas` element.

##### References

* [Bug 1528909](https://bugzilla.mozilla.org/show_bug.cgi?id=1528909)

#### [#CVE-2018-18511: Cross-origin theft of images with ImageBitmapRenderingContext](#CVE-2018-18511)

Reporter
AaylaSecura1138
Impact
high
##### Description

Cross-origin images can be read from a `canvas` element in violation of the same-origin policy using the `transferFromImageBitmap` method.

##### References

* [Bug 1526218](https://bugzilla.mozilla.org/show_bug.cgi?id=1526218)

#### [#CVE-2019-11694: Uninitialized memory memory leakage in Windows sandbox](#CVE-2019-11694)

Reporter
Jeremy Fetiveau of SSD Secure Disclosure
Impact
moderate
##### Description

A vulnerability exists in the Windows sandbox where an uninitialized value in memory can be leaked to a renderer from a broker when making a call to access an otherwise unavailable file. This results in the potential leaking of information stored at that memory location.
*Note: this issue only occurs on Windows. Other operating systems are unaffected.*

##### References

* [Bug 1534196](https://bugzilla.mozilla.org/show_bug.cgi?id=1534196)

#### [#CVE-2019-11698: Theft of user history data through drag and drop of hyperlinks to and from bookmarks](#CVE-2019-11698)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

If a crafted hyperlink is dragged and dropped to the bookmark bar or sidebar and the resulting bookmark is subsequently dragged and dropped into the web content area, an arbitrary query of a user's browser history can be run and transmitted to the content page via `drop` event data. This allows for the theft of browser history by a malicious site.

##### References

* [Bug 1543191](https://bugzilla.mozilla.org/show_bug.cgi?id=1543191)

#### [#CVE-2019-5798: Out-of-bounds read in Skia](#CVE-2019-5798)

Reporter
Tran Tien Hung of Viettel Cyber Security
Impact
moderate
##### Description

An out-of-bounds read can occur in the Skia library during path transformations. This could result in the exposure of data stored in memory.

##### References

* [Bug 1535518](https://bugzilla.mozilla.org/show_bug.cgi?id=1535518)

#### [#CVE-2019-9800: Memory safety bugs fixed in Firefox 67 and Firefox ESR 60.7](#CVE-2019-9800)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Olli Pettay, Bogdan Tara, Jan de Mooij, Jason Kratzer, Jan Varga, Gary Kwong, Tim Guan-tin Chien, Tyson Smith, Ronald Crane, and Ted Campbell reported memory safety bugs present in Firefox 66 and Firefox ESR 60.6. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 67 and Firefox ESR 60.7](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1540166%2C1534593%2C1546327%2C1540136%2C1538736%2C1538042%2C1535612%2C1499719%2C1499108%2C1538619%2C1535194%2C1516325%2C1542324%2C1542097%2C1532465%2C1533554%2C1541580)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from wiki.mozilla.org_73f8d6fa_20250121_020543.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from bugzilla.mozilla.org_98869d99_20250120_235828.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1536768)
* [XML](/show_bug.cgi?ctype=xml&id=1536768)

Closed
[Bug 1536768](/show_bug.cgi?id=1536768)
(CVE-2019-9816)

Opened 6 years ago
Closed 6 years ago

# IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed

## Categories

### (Core :: JavaScript Engine: JIT, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

66 Branch

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla68

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr60 | [67+](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=equals&v1=67%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=fixed) |
| firefox66 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox66&o1=equals&v1=wontfix) |
| firefox67 | [+](/buglist.cgi?f1=cf_tracking_firefox67&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=fixed) |
| firefox68 | [+](/buglist.cgi?f1=cf_tracking_firefox68&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox68&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr60 | 67+ | fixed |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox66 |  | wontfix |
| firefox67 | + | fixed |
| firefox68 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: saelo, Assigned: mgaudet)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/0c4c6c72545e010e29e8da0e3bb229ee?d=mm&size=40)  [mgaudet](/user_profile?user_id=607045)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/dd173269d2ae1dd60942eeb75caaef98?d=mm&size=40)  [saelo](/user_profile?user_id=634439)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

### ( [URL](https://bugs.chromium.org/p/project-zero/issues/detail?id=1808 "https://bugs.chromium.org/p/project-zero/issues/detail?id=1808") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[bugs.chromium.org/p/project-zero/issu...](https://bugs.chromium.org/p/project-zero/issues/detail?id=1808 "https://bugs.chromium.org/p/project-zero/issues/detail?id=1808")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, Whiteboard: [adv-main67+][adv-esr60.7+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2019-9816

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main67+][adv-esr60.7+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem](/attachment.cgi?id=9054337)  [6 years ago](#c4)  [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)   47 bytes, text/x-phabricator-request | pascalc : [approval-mozilla-beta+](#c13 "6 years ago")  lizzard : [approval-mozilla-esr60+](#c15 "6 years ago")  abillings : [sec-approval+](#c9 "6 years ago") | [Details](/attachment.cgi?id=9054337&action=edit) | [Review](/attachment.cgi?id=9054337) |
| --- | --- | --- |
| [Bug 1536768 - Check completeness of FunctionDispatch without fallbacks r?jandem](/attachment.cgi?id=9054583)  [6 years ago](#c6)  [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)   47 bytes, text/x-phabricator-request | pascalc : [approval-mozilla-beta+](#a1716115_24572 "6 years ago")  lizzard : [approval-mozilla-esr60+](#a2278018_451704 "6 years ago")  abillings : [sec-approval+](#a1168648_280903 "6 years ago") | [Details](/attachment.cgi?id=9054583&action=edit) | [Review](/attachment.cgi?id=9054583) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Samuel Groß](/user_profile?user_id=634439)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1536768#c0)• 6 years ago |
|  | |

While fuzzing Spidermonkey, I encountered the following (commented and modified) JavaScript program which crashes debug builds of the latest release version of Spidermonkey (from commit [3ecf89da497cf1abe2a89d1b3c282b48e5dfac8c](https://github.com/mozilla/gecko-dev/commit/3ecf89da497cf1abe2a89d1b3c282b48e5dfac8c)):

```
function O1() {
    this.s = 'foobar';
    this.a = 42;

    // Avoid unboxed layout for O1 instances as this will cause the JIT
    // compiler to behave differently and not emit the ObjectGroupDispatch
    // operation (see below).
    delete this.a;
}

// This function will be inlined below in v4, together with the default
// Object.prototype.toString implementation.
// This just demonstrates that a custom function can be inlined which
// will make assumptions about the input ObjectGroup.
O1.prototype.toString = function() {
    return this.s;
};

function v4(v5) {
    // Once v22 is allocated as unboxed object, this will convert it to a
    // native object, which will cause its ObjectGroup to change.
    delete v5.nonExistent;

    // The call to .toString here will be implemented as a switch
    // (ObjectGroupDispatch operation) on the ObjectGroup with two cases
    // (ObjectGroup of v22 and v17). Depending on the input, the dispatch will
    // jump to one of the two inlined implementations of toString. However,
    // after v22 is allocated as UnboxedObject (still with the same
    // ObjectGroup as before), the delete operation above will convert it back
    // to a NativeObject, now changing the ObjectGroup. Afterwards, this
    // ObjectGroupDispatch operation will see an unexpected ObjectGroup and,
    // in debug builds, crash with an assertion failure. In release builds
    // it will just fallthrough to whichever branch was emitted right after
    // the dispatch operation.
    return v5.toString();
}

function v11() {
    const v22 = {p: 1337};
    v4(v22);

    let v26 = 0;
    do {
        const v17 = new O1;
        v4(v17);
        v26++;
    } while (v26 < 100);
}
for (let v33 = 0; v33 < 100; v33++) {
    const v37 = v11();
}

```

The program will crash with an assertion similar to:

```
> ../build_DBG.OBJ/dist/bin/js crash.js
Assertion failure: Unexpected ObjectGroup, at js/src/jit/MacroAssembler.cpp:2014
[1]    54116 trace trap  ../build_DBG.OBJ/dist/bin/js crash.js

```

It appears that roughly the following is happening here:

* Initially, the objects v22 and v17 will be allocated as native objects with two different ObjectGroups (an ObjectGroup [1] stores type information such as the prototype object and property/method types for an object): OG1 and OG2.
* Function v4 will be called repeatedly with objects of both ObjectGroups and will eventually be JIT compiled by IonMonkey. At that point, it will be compiled to expect an object with ObjectGroup OG1 or OG2 based on type feedback from the interpreter/baseline JIT and will be deoptimized if it is ever called with an object of a different group.
* The call to .toString in v4 will be optimized by inlining [2] the two possible implementations (O1.prototype.toString and Object.prototype.toString) and then performing a switch on the ObjectGroup of the input to determine which implementation to jump to. The switch is implemented by the ObjectGroupDispatch operation. Since both input ObjectGroups are covered, the instruction does not have a default (fallback) path [3].
* At a later point, the allocation site of v22 is modified to create an object with unboxed layout [4] which will store its properties inline in an unboxed form but still use ObjectGroup OG1.
* Afterwards, in the JIT code for v4, the delete operation converts the UnboxedObject back to a NativeObject [5], this time changing the ObjectGroup to a new group OG3 [6].
* Finally, when executing the machine code for the ObjectGroupDispatch operation, the new ObjectGroup matches none of the expected ones. At this point the program will crash with an assertion in debug builds. In release builds, it would now simply fall through to whichever one of the inlined implementations was directly following the ObjectGroupDispatch operation.

At least this way of triggering the bug is related to UnboxedObjects, which [have recently been disabled by default](https://github.com/mozilla/gecko-dev/commit/26965039e60a00b3600ce2e6a559106e4a3a30ca). However, I am not sure if the conversion from unboxed to native objects due to the property deletion is the only reason that an object's ObjectGroup can change unexpectedly (in this situation).

As for exploitation, it might be possible to cause a type confusion by causing a fallthrough to the inlined code for the other ObjectGroup. In that case, the inlined code would expect to receive an object of a specific ObjectGroup and might omit further security checks based on that. For this specific sample it seems that the fallthrough path always happens to be the correct one (i.e. the one for Object.prototype.toString), but I assume it could also be the other way around in a different context. Furthermore, it might be possible to cause other code constructs (apart form the ObjectGroupDispatch) that rely on ObjectGroup information to misbehave in this situation.

Please note: this bug is subject to a 90 day disclosure deadline. After 90 days elapse or a patch has been made broadly available (whichever is earlier), the bug report will become visible to the public.

With any fix, please give credit for identifying the vulnerability to Samuel Groß of Google Project Zero.

[1] <https://github.com/mozilla/gecko-dev/blob/3ecf89da497cf1abe2a89d1b3c282b48e5dfac8c/js/src/vm/ObjectGroup.h#L87>

[2] <https://github.com/mozilla/gecko-dev/blob/3ecf89da497cf1abe2a89d1b3c282b48e5dfac8c/js/src/jit/IonBuilder.cpp#L4517>

[3] <https://github.com/mozilla/gecko-dev/blob/3ecf89da497cf1abe2a89d1b3c282b48e5dfac8c/js/src/jit/IonBuilder.cpp#L4923>

[4] <https://github.com/mozilla/gecko-dev/blob/3ecf89da497cf1abe2a89d1b3c282b48e5dfac8c/js/src/vm/UnboxedObject.cpp#L1416>

[5] <https://github.com/mozilla/gecko-dev/blob/3ecf89da497cf1abe2a89d1b3c282b48e5dfac8c/js/src/vm/UnboxedObject.cpp#L1150>

[6] <https://github.com/mozilla/gecko-dev/blob/3ecf89da497cf1abe2a89d1b3c282b48e5dfac8c/js/src/vm/UnboxedObject.cpp#L756>

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a3018_159069)• 6 years ago |

Group: firefox-core-security → javascript-core-securityComponent: General → JavaScript Engine: JITProduct: Firefox → Core

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1536768#c1)• 6 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1536768&comment_id=13998414 "1 revision") |
|  | |

Thanks for the report. We have to check if there's a way to trigger this without unboxed objects. Maybe `__proto__` mutation.

Regardless, ObjectGroupDispatch is complicated enough that we should probably have it crash in release builds too when it sees an unexpected group.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a106756_406194)• 6 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1536768#c2)• 6 years ago |
|  | |

Matthew, you might have the fresh-est knowledge about this part of the code. Mind to have a look and forwarding to the right person or taking it?

Status: UNCONFIRMED → NEW
[status-firefox68](/buglist.cgi?f1=cf_status_firefox68&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox68&o1=equals&v1=affected)Ever confirmed: trueFlags: needinfo?(mgaudet)Priority: -- → P1

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1536768#c3)• 6 years ago |
|  | |

Ok, I'll spend today looking at this. At the bare minimum I'll produce a patch to crash on an unexpected group in `ObjectGroupDispatch`.

Flags: needinfo?(mgaudet)

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1536768#c4)• 6 years ago |
|  | |

Attached file
[Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem](attachment.cgi?id=9054337)
— [Details](attachment.cgi?id=9054337&action=edit)

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1536768#c5)• 6 years ago |
|  | |

## Investigation into other group change mechanisms

*tldr;* I can't prove this is unexploitable outside of UnboxedObjects, due to my unfamiliarity with edge cases of group changes. It seems generally to be an excellent idea to assert in ObjectGroupDispatch. However, I was unable to generate an exploitable test case from attempting to trigger group changes through other mechanisms.

In order for this to be exploitable outside UnboxedObjects we would need to find a way to change the group of an object in such a way that we don't trigger bailout or invalidation, as was the case of the UnboxedLayout bug described in this bug.

First, let's look at [the callers of `setGroup()`](https://searchfox.org/mozilla-central/search?q=symbol:_ZN8JSObject8setGroupEPN2js11ObjectGroupE&redirect=false). These callers can be divided into roughly three categories:

1. *Allocation*: These calls to setGroup apply only to newly created objects; *e.g.* `js::MapIteratorObject::createResultPair`, `js::NewArrayOperationWithTemplate`.
2. *Partially Initialized -> Fully initialized*: This would be the transition that occurs in [`UpdateShapeTypeAndValue`](https://searchfox.org/mozilla-central/rev/ddd1679c0534f7ddf36cafddd17b710c4fefe3c4/js/src/vm/NativeObject.cpp#1202). This happens when an objects transitions into its final 'initialized' shape, and the group is changed from a partially-initalized group to a final group.

   I was unable to determine how the boundaries of the "new script" range are determined, so I was unable to experiment with these group transitions.
3. *Singleton-ification*: `JSObject::setSingleton` and `JSObject::changeToSingleton` modify the group. This seems relatively controlled.
4. *Prototype Modification*: or `SetProto`.

The most promising in terms of exploitability seems to be prototype mutation. However, in my experiments, I was unable to trigger a situation where prototype mutation did not in turn invalidate or bailout from Ion.

### Caveats:

There are aspects I haven't investigated that might be cause for concern: While I think that this is *most likely* to be exploitable by trying to change the group of an object in an Ion frame without triggering bailout, it is possible that there are other ways that type barriers can be missed leading to an `ObjectGroupDispatch`. I didn't really investigate them.

### Final Comment

This was not a comprehensive audit: I don't feel like I am qualified to give an overarching recommendation about potential exploitability of this bug, as it sits at the corner of a number of things I have a weak knowledge of: Type Barriers, group mutation, and Ion's guard invariants.

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1536768#c6)• 6 years ago |
|  | |

Attached file
[Bug 1536768 - Check completeness of FunctionDispatch without fallbacks r?jandem](attachment.cgi?id=9054583)
— [Details](attachment.cgi?id=9054583&action=edit)

Depends on D25304

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1536768#c7)• 6 years ago |
|  | |

Jan requested I also check the completeness of FunctionDispatch; see above patch.

This change has the potential to cause crashes where we formerly wouldn't have: I'm not sure if we want to subject this patch to some fuzzing before we land it?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a1072940_75935)• 6 years ago |

Assignee: nobody → mgaudet
[status-firefox66](/buglist.cgi?f1=cf_status_firefox66&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox66&o1=equals&v1=wontfix)
[status-firefox67](/buglist.cgi?f1=cf_status_firefox67&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=affected)
[status-firefox-esr60](/buglist.cgi?f1=cf_status_firefox_esr60&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=affected)
[tracking-firefox67](/buglist.cgi?f1=cf_tracking_firefox67&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox67&o1=equals&v1=%2B)
[tracking-firefox68](/buglist.cgi?f1=cf_tracking_firefox68&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox68&o1=equals&v1=%2B)
[tracking-firefox-esr60](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=isnotempty):
--- → [67+](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=equals&v1=67%2B)

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1536768#c8)• 6 years ago |
|  | |

Comment on [attachment 9054337](/attachment.cgi?id=9054337 "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") [[details]](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem")

[Bug 1536768](/show_bug.cgi?id=1536768 "RESOLVED FIXED - IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed") - Check completeness of ObjectGroupDispatch in opt builds r?jandem

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: It would be difficult.
* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: No
* **Which older supported branches are affected by this flaw?**: All, if UnboxedObjects were enabled, however, we disabled them by default on all supported branches already
* **If not all supported branches, which bug introduced the flaw?**: [Bug 1116855](/show_bug.cgi?id=1116855 "RESOLVED FIXED - Allow creating unboxed objects in interpreted constructors")
* **Do you have backports for the affected branches?**: No
* **If not, how different, hard to create, and risky will they be?**: They should be easy to do.
* **How likely is this patch to cause regressions; how much testing does it need?**: It's possible that this could create crashes where we were silently experiencing a vulnerability (and potentially incorrect execution).
[Attachment #9054337](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") -
Flags: sec-approval?

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a1137731_607045)• 6 years ago |

[Attachment #9054583](/attachment.cgi?id=9054583&action=edit "Bug 1536768 - Check completeness of FunctionDispatch without fallbacks r?jandem") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1536768#c9)• 6 years ago |
|  | |

Comment on [attachment 9054337](/attachment.cgi?id=9054337 "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") [[details]](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem")

[Bug 1536768](/show_bug.cgi?id=1536768 "RESOLVED FIXED - IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed") - Check completeness of ObjectGroupDispatch in opt builds r?jandem

Sec-approval+ for mozilla-central. Please nominate ESR60 and Beta patches as well.

[Attachment #9054337](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") -
Flags: sec-approval? → sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a1168648_280903)• 6 years ago |

[Attachment #9054583](/attachment.cgi?id=9054583&action=edit "Bug 1536768 - Check completeness of FunctionDispatch without fallbacks r?jandem") -
Flags: sec-approval? → sec-approval+

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1536768#c10)• 6 years ago |
|  | |

Comment on [attachment 9054337](/attachment.cgi?id=9054337 "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") [[details]](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem")

[Bug 1536768](/show_bug.cgi?id=1536768 "RESOLVED FIXED - IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed") - Check completeness of ObjectGroupDispatch in opt builds r?jandem

### Beta/Release Uplift Approval Request

* **Feature/Bug causing the regression**: [Bug 1116855](/show_bug.cgi?id=1116855 "RESOLVED FIXED - Allow creating unboxed objects in interpreted constructors")
* **User impact if declined**: Potential security issue
* **Is this code covered by automated tests?**: No
* **Has the fix been verified in Nightly?**: No
* **Needs manual test from QE?**: No
* **If yes, steps to reproduce**:
* **List of other uplifts needed**: None
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: It's possible that this could create crashes where we were silently experiencing a vulnerability (and potentially incorrect execution).
* **String changes made/needed**: None

### ESR Uplift Approval Request

* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**:
* **User impact if declined**: Potential security issue
* **Fix Landed on Version**:
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: It's possible that this could create crashes where we were silently experiencing a vulnerability (and potentially incorrect execution).
* **String or UUID changes made by this patch**: None
[Attachment #9054337](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") -
Flags: approval-mozilla-esr60?
[Attachment #9054337](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") -
Flags: approval-mozilla-beta?

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a1219206_607045)• 6 years ago |

[Attachment #9054583](/attachment.cgi?id=9054583&action=edit "Bug 1536768 - Check completeness of FunctionDispatch without fallbacks r?jandem") -
Flags: approval-mozilla-esr60? approval-mozilla-beta?

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1536768#c11)• 6 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1536768&comment_id=14030464 "1 revision") |
|  | |

Landed on autoland:

<https://hg.mozilla.org/integration/autoland/rev/8f07c3939286> - [Bug 1536768](/show_bug.cgi?id=1536768 "RESOLVED FIXED - IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed") - Check completeness of ObjectGroupDispatch in opt builds r=jandem

<https://hg.mozilla.org/integration/autoland/rev/c22855eae212> - [Bug 1536768](/show_bug.cgi?id=1536768 "RESOLVED FIXED - IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed") - Check completeness of FunctionDispatch without fallbacks r=jandem

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1536768#c12)• 6 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/8f07c3939286>

<https://hg.mozilla.org/mozilla-central/rev/c22855eae212>

Group: javascript-core-security → core-security-releaseStatus: NEW → RESOLVEDClosed: 6 years ago
[status-firefox68](/buglist.cgi?f1=cf_status_firefox68&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox68&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox68&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla68

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1536768#c13)• 6 years ago |
|  | |

Comment on [attachment 9054337](/attachment.cgi?id=9054337 "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") [[details]](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem")

[Bug 1536768](/show_bug.cgi?id=1536768 "RESOLVED FIXED - IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed") - Check completeness of ObjectGroupDispatch in opt builds r?jandem

Approved for 67 beta 10, thanks.

[Attachment #9054337](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a1716115_24572)• 6 years ago |

[Attachment #9054583](/attachment.cgi?id=9054583&action=edit "Bug 1536768 - Check completeness of FunctionDispatch without fallbacks r?jandem") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1536768#c14)• 6 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/b4fc373023df>

<https://hg.mozilla.org/releases/mozilla-beta/rev/8f151985cb7f>

[status-firefox67](/buglist.cgi?f1=cf_status_firefox67&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=fixed)

|  | [Liz Henry (:lizzard) (relman/hg->git project)](/user_profile?user_id=451704) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1536768#c15)• 6 years ago |
|  | |

Comment on [attachment 9054337](/attachment.cgi?id=9054337 "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") [[details]](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem")

[Bug 1536768](/show_bug.cgi?id=1536768 "RESOLVED FIXED - IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed") - Check completeness of ObjectGroupDispatch in opt builds r?jandem

Fix for sec-high issue, let's take it for ESR 60.7.

[Attachment #9054337](/attachment.cgi?id=9054337&action=edit "Bug 1536768 - Check completeness of ObjectGroupDispatch in opt builds r?jandem") -
Flags: approval-mozilla-esr60? → approval-mozilla-esr60+

|  | [Liz Henry (:lizzard) (relman/hg->git project)](/user_profile?user_id=451704) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a2278018_451704)• 6 years ago |

[Attachment #9054583](/attachment.cgi?id=9054583&action=edit "Bug 1536768 - Check completeness of FunctionDispatch without fallbacks r?jandem") -
Flags: approval-mozilla-esr60? → approval-mozilla-esr60+

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1536768#c16)• 6 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr60/rev/303fa85d8f89>

<https://hg.mozilla.org/releases/mozilla-esr60/rev/c9328455c9c1>

[status-firefox-esr60](/buglist.cgi?f1=cf_status_firefox_esr60&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a4111218_280903)• 6 years ago |

Whiteboard: [adv-main67+][adv-esr60.7+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a4708218_280903)• 6 years ago |

Alias: CVE-2019-9816

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1536768#c17)• 6 years ago |
|  | |

The Project Zero report on this (which looks to be the same as [comment 0](/show_bug.cgi?id=1536768#c0 "RESOLVED FIXED - IonMonkey: unexpected ObjectGroup in ObjectGroupDispatch operation might lead to potentially unsafe code being executed")) is public now.

URL: [https://bugs.chromium.org/p/project-z...](https://bugs.chromium.org/p/project-zero/issues/detail?id=1808)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1536768#a38258914_1689)• 5 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1536768&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_35fd2cf6_20250120_235830.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2019-15

## Security vulnerabilities fixed in Thunderbird 60.7

Announced
May 21, 2019
Impact
high
Products
Thunderbird
Fixed in

* Thunderbird 60.7

*In general, these flaws cannot be exploited through email in the Thunderbird product because scripting is disabled when reading mail, but are potentially risks in browser or browser-like contexts.*

#### [#CVE-2019-9815: Disable hyperthreading on content JavaScript threads on macOS](#CVE-2019-9815)

Reporter
[Multiple independent researchers](https://mdsattacks.com/#People)
Impact
high
##### Description

If hyperthreading is not disabled, a timing attack vulnerability exists, similar to previous Spectre attacks. Apple has shipped macOS 10.14.5 with an option to disable hyperthreading in applications running untrusted code in a thread through a new sysctl. Firefox now makes use of it on the main thread and any worker threads.
*Note: users need to update to macOS 10.14.5 in order to take advantage of this change.*

##### References

* [Bug 1546544](https://bugzilla.mozilla.org/show_bug.cgi?id=1546544)
* [RIDL and Fallout: MDS attacks](https://mdsattacks.com/)

#### [#CVE-2019-9816: Type confusion with object groups and UnboxedObjects](#CVE-2019-9816)

Reporter
Samuel Groß of Google Project Zero
Impact
high
##### Description

A possible vulnerability exists where type confusion can occur when manipulating JavaScript objects in object groups, allowing for the bypassing of security checks within these groups.
*Note: this vulnerability has only been demonstrated with `UnboxedObjects`, which are disabled by default on all supported releases.*

##### References

* [Bug 1536768](https://bugzilla.mozilla.org/show_bug.cgi?id=1536768)

#### [#CVE-2019-9817: Stealing of cross-domain images using canvas](#CVE-2019-9817)

Reporter
Luật Nguyễn
Impact
high
##### Description

Images from a different domain can be read using a canvas object in some circumstances. This could be used to steal image data from a different site in violation of same-origin policy.

##### References

* [Bug 1540221](https://bugzilla.mozilla.org/show_bug.cgi?id=1540221)

#### [#CVE-2019-9818: Use-after-free in crash generation server](#CVE-2019-9818)

Reporter
Thomas Imbert
Impact
high
##### Description

A race condition is present in the crash generation server used to generate data for the crash reporter. This issue can lead to a use-after-free in the main process, resulting in a potentially exploitable crash and a sandbox escape.
*Note: this vulnerability only affects Windows. Other operating systems are unaffected.*

##### References

* [Bug 1542581](https://bugzilla.mozilla.org/show_bug.cgi?id=1542581)

#### [#CVE-2019-9819: Compartment mismatch with fetch API](#CVE-2019-9819)

Reporter
Nils
Impact
high
##### Description

A vulnerability where a JavaScript compartment mismatch can occur while working with the `fetch` API, resulting in a potentially exploitable crash.

##### References

* [Bug 1532553](https://bugzilla.mozilla.org/show_bug.cgi?id=1532553)

#### [#CVE-2019-9820: Use-after-free of ChromeEventHandler by DocShell](#CVE-2019-9820)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur in the chrome event handler when it is freed while still in use. This results in a potentially exploitable crash.

##### References

* [Bug 1536405](https://bugzilla.mozilla.org/show_bug.cgi?id=1536405)

#### [#CVE-2019-11691: Use-after-free in XMLHttpRequest](#CVE-2019-11691)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur when working with `XMLHttpRequest` (XHR) in an event loop, causing the XHR main thread to be called after it has been freed. This results in a potentially exploitable crash.

##### References

* [Bug 1542465](https://bugzilla.mozilla.org/show_bug.cgi?id=1542465)

#### [#CVE-2019-11692: Use-after-free removing listeners in the event listener manager](#CVE-2019-11692)

Reporter
Nils
Impact
high
##### Description

A use-after-free vulnerability can occur when listeners are removed from the event listener manager while still in use, resulting in a potentially exploitable crash.

##### References

* [Bug 1544670](https://bugzilla.mozilla.org/show_bug.cgi?id=1544670)

#### [#CVE-2019-11693: Buffer overflow in WebGL bufferdata on Linux](#CVE-2019-11693)

Reporter
crixer
Impact
high
##### Description

The `bufferdata` function in WebGL is vulnerable to a buffer overflow with specific graphics drivers on Linux. This could result in malicious content freezing a tab or triggering a potentially exploitable crash.
*Note: this issue only occurs on Linux. Other operating systems are unaffected.*

##### References

* [Bug 1532525](https://bugzilla.mozilla.org/show_bug.cgi?id=1532525)

#### [#CVE-2019-7317: Use-after-free in png\_image\_free of libpng library](#CVE-2019-7317)

Reporter
OSS-Fuzz, Eddie Lee
Impact
high
##### Description

A use-after-free vulnerability was discovered in the `png_image_free` function in the libpng library. This could lead to denial of service or a potentially exploitable crash when a malformed image is processed.

##### References

* [Bug 1542829](https://bugzilla.mozilla.org/show_bug.cgi?id=1542829)

#### [#CVE-2019-9797: Cross-origin theft of images with createImageBitmap](#CVE-2019-9797)

Reporter
AaylaSecura1138
Impact
high
##### Description

Cross-origin images can be read in violation of the same-origin policy by exporting an image after using `createImageBitmap` to read the image and then rendering the resulting bitmap image within a `canvas` element.

##### References

* [Bug 1528909](https://bugzilla.mozilla.org/show_bug.cgi?id=1528909)

#### [#CVE-2018-18511: Cross-origin theft of images with ImageBitmapRenderingContext](#CVE-2018-18511)

Reporter
AaylaSecura1138
Impact
high
##### Description

Cross-origin images can be read from a `canvas` element in violation of the same-origin policy using the `transferFromImageBitmap` method.

##### References

* [Bug 1526218](https://bugzilla.mozilla.org/show_bug.cgi?id=1526218)

#### [#CVE-2019-11694: Uninitialized memory memory leakage in Windows sandbox](#CVE-2019-11694)

Reporter
Jeremy Fetiveau of SSD Secure Disclosure
Impact
moderate
##### Description

A vulnerability exists in the Windows sandbox where an uninitialized value in memory can be leaked to a renderer from a broker when making a call to access an otherwise unavailable file. This results in the potential leaking of information stored at that memory location.
*Note: this issue only occurs on Windows. Other operating systems are unaffected.*

##### References

* [Bug 1534196](https://bugzilla.mozilla.org/show_bug.cgi?id=1534196)

#### [#CVE-2019-11698: Theft of user history data through drag and drop of hyperlinks to and from bookmarks](#CVE-2019-11698)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

If a crafted hyperlink is dragged and dropped to the bookmark bar or sidebar and the resulting bookmark is subsequently dragged and dropped into the web content area, an arbitrary query of a user's browser history can be run and transmitted to the content page via `drop` event data. This allows for the theft of browser history by a malicious site.

##### References

* [Bug 1543191](https://bugzilla.mozilla.org/show_bug.cgi?id=1543191)

#### [#CVE-2019-5798: Out-of-bounds read in Skia](#CVE-2019-5798)

Reporter
Tran Tien Hung of Viettel Cyber Security
Impact
moderate
##### Description

An out-of-bounds read can occur in the Skia library during path transformations. This could result in the exposure of data stored in memory.

##### References

* [Bug 1535518](https://bugzilla.mozilla.org/show_bug.cgi?id=1535518)

#### [#CVE-2019-9800: Memory safety bugs fixed in Firefox 67, Firefox ESR 60.7, and Thunderbird 60.7](#CVE-2019-9800)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Olli Pettay, Bogdan Tara, Jan de Mooij, Jason Kratzer, Jan Varga, Gary Kwong, Tim Guan-tin Chien, Tyson Smith, Ronald Crane, and Ted Campbell reported memory safety bugs present in Firefox 66, Firefox ESR 60.6, and Thunderbird 60.6. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 67, Firefox ESR 60.7, and Thunderbird 60.7](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1540166%2C1534593%2C1546327%2C1540136%2C1538736%2C1538042%2C1535612%2C1499719%2C1499108%2C1538619%2C1535194%2C1516325%2C1542324%2C1542097%2C1532465%2C1533554%2C1541580)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_e364499e_20250121_020549.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1546544)
* [XML](/show_bug.cgi?ctype=xml&id=1546544)

Closed
[Bug 1546544](/show_bug.cgi?id=1546544)
(CVE-2019-9815)

Opened 6 years ago
Closed 6 years ago

# macOS: disable hyperthreading on threads that run content JS

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

macOS: disable hyperthreading on threads that run content JS

## Categories

### (Core :: DOM: Workers, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=DOM%3A%20Workers#DOM%3A%20Workers)

DOM: Workers
▾

Core :: DOM: Workers
This component covers the [Web Workers](https://developer.mozilla.org/En/DOM/Worker) implementation in Gecko.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=DOM%3A%20Workers&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=DOM%3A%20Workers&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=DOM%3A%20Workers)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla68

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr60 | [67+](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=equals&v1=67%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=fixed) |
| firefox66 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox66&o1=equals&v1=wontfix) |
| firefox67 | [+](/buglist.cgi?f1=cf_tracking_firefox67&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=fixed) |
| firefox68 | [+](/buglist.cgi?f1=cf_tracking_firefox68&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox68&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr60 | 67+ | fixed |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox66 |  | wontfix |
| firefox67 | + | fixed |
| firefox68 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: luke, Assigned: haik)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/6620d37f4370beced1bed4097c36d249?d=mm&size=40)  [haik](/user_profile?user_id=558190)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [luke](/user_profile?user_id=347312)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

20 people

## References

### (Blocks 1 open bug, [URL](https://mdsattacks.com/ "https://mdsattacks.com/") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1756207](/show_bug.cgi?id=1756207 "NEW - Enable more robust CSM protections where available")

Dependency [tree](/showdependencytree.cgi?id=1546544&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1546544)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

[1630089](/show_bug.cgi?id=1630089 "RESOLVED INCOMPLETE - [macOS] navigator.hardwareConcurrency reports physical cores instead of logical since Bug 1546544")

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[mdsattacks.com](https://mdsattacks.com/ "https://mdsattacks.com/")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1649696](/show_bug.cgi?id=1649696 "RESOLVED FIXED - Linux sandbox disables indirect branch prediction on x64/x86, resulting in a significant slowdown")

## Details

### (Keywords: csectype-other, sec-high, Whiteboard: [disclosure date May 14][adv-main67+][adv-esr60.7+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2019-9815

[Keywords:](/describekeywords.cgi)

[csectype-other](/buglist.cgi?keywords=csectype-other&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[disclosure date May 14][adv-main67+][adv-esr60.7+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (6 files, 2 obsolete files)

| [Bug 1546544 - Enable TCSM](/attachment.cgi?id=9061069)  [6 years ago](#c17)  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)   47 bytes, text/x-phabricator-request | abillings : [sec-approval+](#c35 "6 years ago") | [Details](/attachment.cgi?id=9061069&action=edit) | [Review](/attachment.cgi?id=9061069) |
| --- | --- | --- |
| [Bug 1546544 - Reduce navigator.hardwareConcurrency to account for TCSM r?Luke](/attachment.cgi?id=9061802)  [6 years ago](#c25)  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)   47 bytes, text/x-phabricator-request | abillings : [sec-approval+](#a1275163_280903 "6 years ago") | [Details](/attachment.cgi?id=9061802&action=edit) | [Review](/attachment.cgi?id=9061802) |
| [tcsm\_enable Histogram](/attachment.cgi?id=9061807)  [6 years ago](#c27)  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)   85.15 KB, image/png |  | [Details](/attachment.cgi?id=9061807&action=edit) |
| [Enable TCSM Patch for Beta/67 Uplift](/attachment.cgi?id=9063010)  [6 years ago](#c38)  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)   10.23 KB, patch | pascalc : [approval-mozilla-beta+](#c40 "6 years ago") | [Details](/attachment.cgi?id=9063010&action=edit) | [Diff](/attachment.cgi?id=9063010&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063010) |
| [Enable TCSM Patch for Beta/67 Uplift (updated after backout)](/attachment.cgi?id=9063559)  [6 years ago](#c53)  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)   10.17 KB, patch |  | [Details](/attachment.cgi?id=9063559&action=edit) | [Diff](/attachment.cgi?id=9063559&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063559) |
| [Enable TCSM Patch for Beta/67 Uplift (updated after backout)](/attachment.cgi?id=9063560)  [6 years ago](#c54)  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)   10.19 KB, patch |  | [Details](/attachment.cgi?id=9063560&action=edit) | [Diff](/attachment.cgi?id=9063560&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063560) |
| [Enable TCSM Patch for ESR60 Uplift](/attachment.cgi?id=9063606)  [6 years ago](#c55)  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)   9.96 KB, patch | lizzard : [approval-mozilla-esr60+](#c62 "6 years ago") | [Details](/attachment.cgi?id=9063606&action=edit) | [Diff](/attachment.cgi?id=9063606&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063606) |
| [Enable TCSM Patch for Release/66 Uplift](/attachment.cgi?id=9063632)  [6 years ago](#c58)  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)   10.28 KB, patch |  | [Details](/attachment.cgi?id=9063632&action=edit) | [Diff](/attachment.cgi?id=9063632&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063632) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1546544#c0)• 6 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1546544&comment_id=14073447 "1 revision") |
|  | |

Hyperthreading enables a number of timing attacks (e.g. PortSmash), including some new Spectre variants. macOS now recommends that applications running untrusted code on a thread should call a new syctl that disables hyperthreading for that thread (preventing that thread from sharing a physical core with any other thread). (The story for Linux/Windows is different, but requires no action from us, and if you're interested, ping me to discuss separately.)

The macOS security update containing the new sysctl is 10.14.5. The WebKit patch which we want to basically copy that uses this sysctl is:

<https://trac.webkit.org/changeset/244233/webkit>

The sysctls are used in CPU.cpp (which doesn't appear in the above diff view):

<https://trac.webkit.org/browser/webkit/trunk/Source/JavaScriptCore/assembler/CPU.cpp?rev=244233>

So we want to basically call `kern.tcsm_enable` on the main thread and any worker thread. The JSC team reports a low (<=1%) slowdown from this in practice.

The only interesting bit is that this mitigation messes with the number-of-logical-cores count, which we use in various places and report to content via navigator.hardwareConcurrency. In the above diff, WebKit seems to simply subtract 1 when the mitigation is active. That seems off, at least for the purpose of navigator.hardwareConcurrency w.r.t workers. I'd be inclined to just use the *physical* core count, when on macOS. (Logical threads are only worth ~1.2 physical threads anyway.)

Ideally, we'd uplift this patch to FF67, for release in time for any upcoming public disclosures (to minimize risk, perhaps just the part that calls `kern.tcsm_enable`, the logical-core-count part could ride the trains).

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1546544#c1)• 6 years ago |
|  | |

Haik, are you the right person to work on this? It looks like at least part of this is going to require updating our sandbox policy (see <https://trac.webkit.org/changeset/244233/webkit#file10>).

It looks like the `navigator.hardwareConcurrency` binding lives in dom/workers, as far as I can tell we don't actually use that for any internal logic, so presumably we should be making JS modifications instead.

Luke, is the intention to just set this for threads that are going to run untrusted JS? In that case does it make sense to move this bug to the JS engine -- note most of the WebKit changes are in JSC -- and loop in the appropriate people there?

Flags: needinfo?(luke)Flags: needinfo?(haftandilian)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1546544#c2)• 6 years ago |
|  | |

> so presumably we should be making JS modifications instead.

What does "JS modifications" mean? I would expect we'd need to change the Gecko (C++) impl of hardwareConcurrency.

> Luke, is the intention to just set this for threads that are going to run untrusted JS? In that case does it make sense to move this bug to the JS engine -- note most of the WebKit changes are in JSC -- and loop in the appropriate people there?

I'm not sure why JSC did the sysctl() in their JS engine, maybe it was an easy pinch point for them, but it seems a bit strange for the JS engine to do this because it lacks embedding context. E.g., we wouldn't necessarily have to set this for any parent-process threads (iiuc, we don't run untrusted JS in the parent process) and the JS engine has no concept of this distinction.

I think the right place to do this is in the shared initialization we do when setting up a window/worker thread, perhaps: <https://searchfox.org/mozilla-central/source/xpcom/base/CycleCollectedJSRuntime.cpp#469>. mccr8?

For updating all the "how many threads are there?" queries, we should've probably factored out a function that does this into MFBT a long time ago, mirroring WebKit's WTF::numberOfProcessorCores(), and that could be a good place to make that change so that Gecko and SM can share the logic.

Flags: needinfo?(luke) → needinfo?(continuation)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1546544#c3)• 6 years ago |
|  | |

(In reply to Eric Rahm [:erahm] from [comment #1](/show_bug.cgi?id=1546544#c1 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> Haik, are you the right person to work on this? It looks like at least part of this is going to require updating our sandbox policy (see <https://trac.webkit.org/changeset/244233/webkit#file10>).

Yes, I'll work on this. Our content sandbox whitelists sysctls so (at first glance) we'll have to add kern.tcsm\_enable and kern.tcsm\_available to the list.

And I assume we'll want to do this for the parent process (which isn't affected by sandboxing) as well as content processes and any other processes that run JS.

I'm wondering if making navigator.hardwareConcurrency return just the physical cores (half its current value) might causes sites to do throttling in some way and affect performance itself.

Flags: needinfo?(haftandilian)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1546544#c4)• 6 years ago |
|  | |

CycleCollectedJSRuntime is the right place to go if you want to have Gecko stuff set things in the JS engine for every JS runtime.

Does SpiderMonkey need to know about this, too? There's the various JS helper threads, but I suppose they hopefully do not actually run JS...

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a77444_406194)• 6 years ago |

Flags: needinfo?(continuation)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1546544#c5)• 6 years ago |
|  | |

(In reply to Haik Aftandilian [:haik] from [comment #3](/show_bug.cgi?id=1546544#c3 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> And I assume we'll want to do this for the parent process (which isn't affected by sandboxing) as well as content processes and any other processes that run JS.

Maybe I'm misunderstanding you, but this should only be needed for threads and processes that are running content JS. If we're running hostile JS code in the parent process we've probably already lost. :) I'm not sure how addon JS fits into this.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a77850_406194)• 6 years ago |

Group: mozilla-employee-confidentialType: task → defect

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a77934_406194)• 6 years ago |

[status-firefox66](/buglist.cgi?f1=cf_status_firefox66&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox66&o1=equals&v1=wontfix)
[status-firefox67](/buglist.cgi?f1=cf_status_firefox67&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=affected)
[status-firefox68](/buglist.cgi?f1=cf_status_firefox68&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox68&o1=equals&v1=affected)
[tracking-firefox67](/buglist.cgi?f1=cf_tracking_firefox67&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox67&o1=equals&v1=%3F)
[tracking-firefox68](/buglist.cgi?f1=cf_tracking_firefox68&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox68&o1=equals&v1=%3F)

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1546544#c6)• 6 years ago |
|  | |

(In reply to Andrew McCreight [:mccr8] from [comment #4](/show_bug.cgi?id=1546544#c4 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> CycleCollectedJSRuntime is the right place to go if you want to have Gecko stuff set things in the JS engine for every JS runtime.
>
> Does SpiderMonkey need to know about this, too? There's the various JS helper threads, but I suppose they hopefully do not actually run JS...

WebKit tweaked the number of [wasm compilation threads](https://trac.webkit.org/changeset/244233/webkit#file8), which indeed are JS helper threads for us. I'm not sure if that was necessary or not.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1546544#c7)• 6 years ago |
|  | |

I think this should be marked with both the MoCo confidential and sec flags due to the NDA'ness.

DOM:Workers isn't quite right, but I'm not sure what is. XPCOM? If this is going to be handled Gecko-side.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a78053_406194)• 6 years ago |

OS: Unspecified → macOS

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1546544#c8)• 6 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1546544&comment_id=14075724 "1 revision") |
|  | |

(In reply to Eric Rahm [:erahm] from [comment #6](/show_bug.cgi?id=1546544#c6 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> WebKit tweaked the number of [wasm compilation threads](https://trac.webkit.org/changeset/244233/webkit#file8), which indeed are JS helper threads for us. I'm not sure if that was necessary or not.

In light of this, do you think SpiderMonkey needs to be able to deal with this, too? Thought I don't know how helper threads are spawned nowadays.

Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1546544#c9)• 6 years ago |
|  | |

(In reply to Haik Aftandilian [:haik] from [comment #3](/show_bug.cgi?id=1546544#c3 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> I'm wondering if making navigator.hardwareConcurrency return just the physical cores (half its current value) might causes sites to do throttling in some way and affect performance itself.

If sites are using navigator.hardwareConcurrency to control the number of workers to create (which I think is the primary motivation), then I think the physical core count is the right number to return given that each worker thread will have HT disabled. Or are you talking about some other kind of throttling?

(In reply to Andrew McCreight [:mccr8] from [comment #8](/show_bug.cgi?id=1546544#c8 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> In light of this, do you think SpiderMonkey needs to be able to deal with this, too? Thought I don't know how helper threads are spawned nowadays.

Yes, in [comment 2](/show_bug.cgi?id=1546544#c2 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"), I was suggesting we have a "number of threads" function in MFBT that then SM and Gecko could easily share it. It looks like there are a bunch of callers of `sysconf(_SC_NPROCESSORS_CONF)` and `sysconf(_SC_NPROCESSORS_ONLN)` and probably most of these want to use the shared MFBT cpu-count function.

Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1546544#c10)• 6 years ago |
|  | |

Oh sorry, I might've answered the wrong question: if you're talking about which threads need to have the "disable-HT" mitigation, the SM helper threads do not run JS.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a150224_1689)• 6 years ago |

Keywords: [csectype-other](/buglist.cgi?keywords=csectype-other&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Liz Henry (:lizzard) (relman/hg->git project)](/user_profile?user_id=451704) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a150270_451704)• 6 years ago |

[status-firefox-esr60](/buglist.cgi?f1=cf_status_firefox_esr60&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=%3F)

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1546544#c11)• 6 years ago |
|  | |

Luke, what kind of timeline do we have for this? Should Haik drop everything ASAP, are we concerned about uplifts (18 days) or is there some padding before disclosure?

Flags: needinfo?(luke)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1546544#c12)• 6 years ago |
|  | |

(In reply to Eric Rahm [:erahm] from [comment #11](/show_bug.cgi?id=1546544#c11 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> Luke, what kind of timeline do we have for this? Should Haik drop everything ASAP, are we concerned about uplifts (18 days) or is there some padding before disclosure?

This is my top priority right now and I'll be working on it today.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1546544#c13)• 6 years ago |
|  | |

The last I heard, the disclosure date conveniently coincides with the release of FF67 (May 14th). It's hard to predict how much attention this disclosure will garner; it's not as scary as the last ones and maybe people are becoming desensitized to Spectre and this whole macOS mitigation will go unnoticed... but if it did generate significant attention and if, in response, Apple makes a public recommendation that apps running untrusted code call this new sysctl and Safari/Chrome then message "we already do", Firefox might be asked by, say, tech press, at which point we'll be in a much better position if we already do as well.

Flags: needinfo?(luke)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1546544#c14)• 6 years ago |
|  | |

(In reply to Andrew McCreight [:mccr8] from [comment #5](/show_bug.cgi?id=1546544#c5 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> (In reply to Haik Aftandilian [:haik] from [comment #3](/show_bug.cgi?id=1546544#c3 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))
>
> > And I assume we'll want to do this for the parent process (which isn't affected by sandboxing) as well as content processes and any other processes that run JS.
>
> Maybe I'm misunderstanding you, but this should only be needed for threads and processes that are running content JS. If we're running hostile JS code in the parent process we've probably already lost. :) I'm not sure how addon JS fits into this.

Kris, can you confirm whether or not any untrusted JS from extensions still runs in the parent process?

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a159338_496127)• 6 years ago |

Flags: needinfo?(kmaglione+bmo)

|  | [Kris Maglione [:kmag]](/user_profile?user_id=106098) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1546544#c15)• 6 years ago |
|  | |

(In reply to Haik Aftandilian [:haik] from [comment #14](/show_bug.cgi?id=1546544#c14 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> Kris, can you confirm whether or not any untrusted JS from extensions still runs in the parent process?

At the moment, we only run JS in the parent process for the deprecated proxy PAC script API. In general, we don't even allow extension content scripts to run in the parent process

Flags: needinfo?(kmaglione+bmo)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1546544#c16)• 6 years ago |
|  | |

[Tracking Requested - why for this release]:

Any supported release running on macOS 10.14.5 is affected including ESR 60.

[status-firefox-esr60](/buglist.cgi?f1=cf_status_firefox_esr60&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=affected)
[tracking-firefox-esr60](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=equals&v1=%3F)

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a211199_580382)• 6 years ago |

[tracking-firefox67](/buglist.cgi?f1=cf_tracking_firefox67&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox67&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox67&o1=equals&v1=%2B)
[tracking-firefox68](/buglist.cgi?f1=cf_tracking_firefox68&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox68&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox68&o1=equals&v1=%2B)
[tracking-firefox-esr60](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=equals&v1=%3F) → [67+](/buglist.cgi?f1=cf_tracking_firefox_esr60&o1=equals&v1=67%2B)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1546544#c17)• 6 years ago |
|  | |

Attached file
[Bug 1546544 - Enable TCSM](attachment.cgi?id=9061069)
— [Details](attachment.cgi?id=9061069&action=edit)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1546544#c18)• 6 years ago |
|  | |

I've posted a patch that allows the new sysctl in the content process policy which also applies to the extension process. The patch includes enabling TCSM on the main thread in content/extension processes and the parent process as well as on DOM workers. We need review from someone knowledgeable about DOM workers to tell me if the changes cover all the cases we need to cover.

I haven't yet looked at the changes required for navigator.hardwareConcurrency or our own internal CPU counts.

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1546544#c19)• 6 years ago |
|  | |

Luke, it looks like the Safari folks have small bug in their CPU code:

```
55	int kernTCSMAwareNumberOfProcessorCores()
56	{
57	    static std::once_flag onceFlag;
58	    static int result;
59	    std::call_once(onceFlag, [] {
60	        result = WTF::numberOfProcessorCores();
61	        if (result <= 1)
62	            return;

```

Empty return is UB I think and even if not it's certainly not intended.

```
63	        if (isKernTCSMAvailable())
64	            --result;
65	    });
66	    return result;
67	}

```

Can you forward this info to them?

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1546544#c20)• 6 years ago |
|  | |

You bet, thanks for pointing it out.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1546544#c21)• 6 years ago |
|  | |

Actually, the empty return is in a C++ lambda called by `std::call_one`, not the containing function, so this isn't UB, iiuc.

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1546544#c22)• 6 years ago |
|  | |

Luke, do you have any more information on the kern.tcsm\_available sysctl? I'm wondering if we can read it once and cache the result. Specifically, will the value be the same for all threads in an application? If we read it as non-existent or non-zero for a thread at some point while the the application is running, will it be the same for all other threads that read it?

Flags: needinfo?(luke)

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a468959_580382)• 6 years ago |

Assignee: nobody → haftandilian

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1546544#c23)• 6 years ago |
|  | |

I expect kern.tcsm\_available is invariant over time and across threads in a process, so I think you should proceed under that assumption, but I'll ask the engineer who forwarded me the WebKit cset and report back if that assumption is not correct. Unfortunately, there is no documentation atm.

Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1546544#c24)• 6 years ago |
|  | |

The answer is "yes": kern.tcsm\_available is invariant over time and threads within a process.

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a603159_600971)• 6 years ago |

[Attachment #9061069](/attachment.cgi?id=9061069&action=edit "Bug 1546544 - Enable TCSM") -
Attachment description: Bug 1546544 - Part 1 - Enable TCSM → Bug 1546544 - Enable TCSM

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1546544#c25)• 6 years ago |
|  | |

Attached file
[Bug 1546544 - Reduce navigator.hardwareConcurrency to account for TCSM r?Luke](attachment.cgi?id=9061802)
— [Details](attachment.cgi?id=9061802&action=edit)

Depends on D29046

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1546544#c26)• 6 years ago |
|  | |

I think the first patch is ready to land. The result of "kern.tcsm\_available" is being cached so that will only be called once per process. "kern.tcsm\_enable" needs to be called a minimum of once per JS thread that will run untrusted code, but it can be called more than once per thread when CycleCollectedJSRuntime() is called multiple times on the same thread. I think this is OK for now. On my 2018 MacBook Pro, the sysctl to set "kern.tcsm\_enable" took around 10 microseconds and was only called ~60 times after starting the browser and browsing with ~15 tabs for a few minutes. "kern.tcsm\_enable" will only be called on systems with the tcsm\_available sysctl property.

The second patch adds a Mac-specific routine to get the number physical CPU's. I don't want to try and write common code to do this and have to write implementations for Windows and Linux too given this change doesn't require it and getting physical CPU count probably has platform-specific details to consider.

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1546544#c27)• 6 years ago |
|  | |

Attached image
[tcsm\_enable Histogram](attachment.cgi?id=9061807)
— [Details](attachment.cgi?id=9061807&action=edit)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1546544#c28)• 6 years ago |
|  | |

Needinfo for review (in case the phabricator mails weren't noticed)

Flags: needinfo?(luke)Flags: needinfo?(continuation)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1546544#c29)• 6 years ago |
|  | |

lgtm (with small nits), thanks for all the work!

Flags: needinfo?(luke)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1546544#c30)• 6 years ago |
|  | |

Yeah, thanks for doing this!

Flags: needinfo?(continuation)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1546544#c31)• 6 years ago |
|  | |

Comment on [attachment 9061069](/attachment.cgi?id=9061069 "Bug 1546544 - Enable TCSM") [[details]](/attachment.cgi?id=9061069&action=edit "Bug 1546544 - Enable TCSM")

[Bug 1546544](/show_bug.cgi?id=1546544 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS") - Enable TCSM

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: Unknown. A similar patch has already landed in WebKit (see [comment 0](/show_bug.cgi?id=1546544#c0 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS")). Even with the fix in Firefox, users will need to upgrade to the macOS 10.14.5 security update to avoid the problem. Apple may release updates for earlier OS versions (such as 10.13 for example.)
* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: Unknown
* **Which older supported branches are affected by this flaw?**: ESR, 66, 67 (All supported releases that run on 10.14.5)
* **If not all supported branches, which bug introduced the flaw?**: OS/hardware Bug
* **Do you have backports for the affected branches?**: No
* **If not, how different, hard to create, and risky will they be?**: The backports should be very similar.
* **How likely is this patch to cause regressions; how much testing does it need?**: Low risk of regressions. Needs testing on Mac only. On macOS 10.14.5 Beta and at least one or more earlier macOS version.
[Attachment #9061069](/attachment.cgi?id=9061069&action=edit "Bug 1546544 - Enable TCSM") -
Flags: sec-approval?

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a767571_558190)• 6 years ago |

[Attachment #9061802](/attachment.cgi?id=9061802&action=edit "Bug 1546544 - Reduce navigator.hardwareConcurrency to account for TCSM r?Luke") -
Flags: sec-approval?

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1546544#c32)• 6 years ago |
|  | |

For reference, here's the Chromium patch:

[https://chromium-review.googlesource.com/c/v8/v8/+/1594562/](https://chromium-review.googlesource.com/c/v8/v8/%2B/1594562/)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1546544#c33)• 6 years ago |
|  | |

Looping in release management. We're about to make release candidates so normally this would be too late to go in but it appears important enough to consider.

Flags: needinfo?(pascalc)Flags: needinfo?(lhenry)

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1546544#c34)• 6 years ago |
|  | |

Can we get an uplift request for beta please? Thanks

Flags: needinfo?(pascalc) → needinfo?(haftandilian)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1546544#c35)• 6 years ago |
|  | |

Comment on [attachment 9061069](/attachment.cgi?id=9061069 "Bug 1546544 - Enable TCSM") [[details]](/attachment.cgi?id=9061069&action=edit "Bug 1546544 - Enable TCSM")

[Bug 1546544](/show_bug.cgi?id=1546544 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS") - Enable TCSM

sec-approval+ for trunk then.

[Attachment #9061069](/attachment.cgi?id=9061069&action=edit "Bug 1546544 - Enable TCSM") -
Flags: sec-approval? → sec-approval+

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1546544#c36)• 6 years ago |
|  | |

(In reply to Pascal Chevrel:pascalc from [comment #34](/show_bug.cgi?id=1546544#c34 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> Can we get an uplift request for beta please? Thanks

Coming shortly. The patch for Beta is slightly different due to some refactoring in security/sandbox/mac.

Two patches are posted to land on central.

For uplifts, the plan is to just land the first patch "Enable TCSM" that enables TCSM when running untrusted JS. The second patch which adjusts navigator.hardwareConcurrency when TCSM is enabled can ride the trains.

|  | [Liz Henry (:lizzard) (relman/hg->git project)](/user_profile?user_id=451704) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=1546544#c37)• 6 years ago |
|  | |

Can you create a patch and request uplift for ESR as well? Thanks!

Flags: needinfo?(lhenry)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1546544#c38)• 6 years ago |
|  | |

Attached patch

[Enable TCSM Patch for Beta/67 Uplift](attachment.cgi?id=9063010&action=diff) (obsolete)
— [Details](attachment.cgi?id=9063010&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063010)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=1546544#c39)• 6 years ago |
|  | |

Comment on [attachment 9063010](/attachment.cgi?id=9063010 "Enable TCSM Patch for Beta/67 Uplift") [[details]](/attachment.cgi?id=9063010&action=edit "Enable TCSM Patch for Beta/67 Uplift") [[diff]](/attachment.cgi?id=9063010&action=diff "Enable TCSM Patch for Beta/67 Uplift") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063010)

Enable TCSM Patch for Beta/67 Uplift

### Beta/Release Uplift Approval Request

* **User impact if declined**: Exposure to a new timing attack that is dependent on hyperthreading being enabled.
* **Is this code covered by automated tests?**: No
* **Has the fix been verified in Nightly?**: No
* **Needs manual test from QE?**: No
* **If yes, steps to reproduce**:
* **List of other uplifts needed**: None
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: The change is limited to Mac and the scope of the fix is quite small.
* **String changes made/needed**:
Flags: needinfo?(haftandilian)
[Attachment #9063010](/attachment.cgi?id=9063010&action=edit "Enable TCSM Patch for Beta/67 Uplift") -
Flags: approval-mozilla-beta?

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=1546544#c40)• 6 years ago |
|  | |

Comment on [attachment 9063010](/attachment.cgi?id=9063010 "Enable TCSM Patch for Beta/67 Uplift") [[details]](/attachment.cgi?id=9063010&action=edit "Enable TCSM Patch for Beta/67 Uplift") [[diff]](/attachment.cgi?id=9063010&action=diff "Enable TCSM Patch for Beta/67 Uplift") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063010)
Enable TCSM Patch for Beta/67 Uplift
Approved for our beta branch.
[Attachment #9063010](/attachment.cgi?id=9063010&action=edit "Enable TCSM Patch for Beta/67 Uplift") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=1546544#c41)• 6 years ago |
|  | |

I'm working on the ESR patch and uplift request.

Flags: needinfo?(haftandilian)

|  | [Liz Henry (:lizzard) (relman/hg->git project)](/user_profile?user_id=451704) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=1546544#c42)• 6 years ago |
|  | |

OK. We should probably hold off on landing today given there's still some uncertainty what may need to be done for the expired cert issue. (i.e. will we need another dot release)

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=1546544#c43)• 6 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/70403bae88b8486cd20c74c693ad85f79a030a00>

[status-firefox67](/buglist.cgi?f1=cf_status_firefox67&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=1546544#c44)• 6 years ago |
|  | |

Is this embargoed? If it isn't, I have to write an advisory and I'll need to know how we want to credit this. If we're waiting for others to fix, we shouldn't disclose until they do.

Flags: needinfo?(luke)Whiteboard: [NDA'd, please leave closed and in core-security] → [NDA'd, please leave closed and in core-security][adv-main67+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=1546544#c45)• 6 years ago |
|  | |

This was autolanded:

<https://hg.mozilla.org/integration/autoland/rev/fda45db5f8e981524e7538b7b2e259fa7828424d>

<https://hg.mozilla.org/integration/autoland/rev/d4b67960c0f921396353762c413b0bd2ef234cb0>

Then backed out for timeouts on startup in mochitest-chrome:

<https://hg.mozilla.org/integration/autoland/rev/18ae393f54167ce4305a7c1192fbc90b594b6361>

Log link:

<https://treeherder.mozilla.org/logviewer.html#?job_id=245011756&repo=autoland>

Also backed out from Beta for the same issues:

<https://hg.mozilla.org/releases/mozilla-beta/rev/21ec21b79d77>

[status-firefox67](/buglist.cgi?f1=cf_status_firefox67&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=affected)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=1546544#c46)• 6 years ago |
|  | |

Yes, it's embargoed, until ~May 14th.

Flags: needinfo?(luke)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=1546544#c47)• 6 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM] from [comment #45](/show_bug.cgi?id=1546544#c45 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> This was autolanded:
>
> <https://hg.mozilla.org/integration/autoland/rev/fda45db5f8e981524e7538b7b2e259fa7828424d>
>
> <https://hg.mozilla.org/integration/autoland/rev/d4b67960c0f921396353762c413b0bd2ef234cb0>
>
> Then backed out for timeouts on startup in mochitest-chrome:
>
> <https://hg.mozilla.org/integration/autoland/rev/18ae393f54167ce4305a7c1192fbc90b594b6361>
>
> Log link:
>
> <https://treeherder.mozilla.org/logviewer.html#?job_id=245011756&repo=autoland>
>
> Also backed out from Beta for the same issues:
>
> <https://hg.mozilla.org/releases/mozilla-beta/rev/21ec21b79d77>

I don't know exactly what's causing the issue for the non-e10s tests, but it appears that calling XRE\_IsE10sParentProcess() to check if (e10s is enabled && we're in the parent process) is causing the hang. XRE\_IsE10sParentProcess() changes a few globals. Digging into this and should have a patch later.

Is it OK to do a try run of this fix at this point?

Flags: needinfo?(haftandilian)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=1546544#c48)• 6 years ago |
|  | |

(In reply to Haik Aftandilian [:haik] from [comment #47](/show_bug.cgi?id=1546544#c47 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> Is it OK to do a try run of this fix at this point?

Yes. The patch is already public.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=1546544#c49)• 6 years ago |
|  | |

So as an update re [comment 13](/show_bug.cgi?id=1546544#c13 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"):

* the disclosure date is indeed May 14th
* Apple just pinged to say they will probably have a communication on May 14th that mentions the mitigation *and* which browser versions (not just Safari, but all browsers) have it.

So it's good that we've prioritized this.

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=1546544#c50)• 6 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1546544&comment_id=14104245 "2 revisions") |
|  | |

The first attempt at the fix used XRE\_IsE10sParentProcess() to enable the mitigation in child processes and in the main process only when e10s is disabled.

Now I realize using XRE\_IsE10sParentProcess() is problematic because 1) it reads prefs and is being called of the main thread, but prefs should only be read on the main thread and 2) it is being called very early in startup (see stack below.).

I've just posted a new fix that doesn't have this problem, but doesn't enable the mitigation for the non-e10s case. Not supporting e10s seems OK at this time because, on Mac, non-e10s is not supported. We did have some ESR60 issues that disabled e10s for screen reader compatibility, but that did not include Mac. I will look into a follow-up fix for the non-e10s case. One solution is to enable the mitigation all the time in the parent process, but I think we should make sure the perf difference is negligible first.

```
  * thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.2
    * frame #0 XUL`mozilla::BrowserTabsRemoteAutostart() at nsAppRunner.cpp:4929
      frame #1 XUL`XRE_IsE10sParentProcess() at nsAppRunner.cpp:4865
      frame #2 XUL`mozilla::CycleCollectedJSRuntime::CycleCollectedJSRuntime() at CycleCollectedJSRuntime.cpp:493
      frame #3 XUL`XPCJSRuntime::XPCJSRuntime() at XPCJSRuntime.cpp:2948
      frame #4 XUL`XPCJSRuntime::XPCJSRuntime() at XPCJSRuntime.cpp:2963
      frame #5 XUL`XPCJSContext::CreateRuntime() at XPCJSContext.cpp:1067
      frame #6 XUL`mozilla::CycleCollectedJSContext::Initialize() at CycleCollectedJSContext.cpp:156
      frame #7 XUL`XPCJSContext::Initialize() at XPCJSContext.cpp:1075
      frame #8 XUL`XPCJSContext::NewXPCJSContext() at XPCJSContext.cpp:1269
      frame #9 XUL`nsXPConnect::nsXPConnect() at nsXPConnect.cpp:75
      frame #10 XUL`nsXPConnect::nsXPConnect() at nsXPConnect.cpp:67
      frame #11 XUL`nsXPConnect::InitStatics() at nsXPConnect.cpp:127
      frame #12 XUL`xpcModuleCtor() at XPCModule.cpp:11
      frame #13 XUL`nsLayoutModuleInitialize() at nsLayoutModule.cpp:108
      frame #14 XUL`nsComponentManagerImpl::Init() at nsComponentManager.cpp:493
      frame #15 XUL`::NS_InitXPCOM(nsIServiceManager **, nsIFile *, nsIDirectoryServiceProvider *)() at XPCOMInit.cpp:446
      frame #16 XUL`ScopedXPCOMStartup::Initialize() at nsAppRunner.cpp:1282
      frame #17 XUL`XREMain::XRE_main() at nsAppRunner.cpp:4682
      frame #18 XUL`XRE_main() at nsAppRunner.cpp:4767
      frame #19 XUL`mozilla::BootstrapImpl::XRE_main() at Bootstrap.cpp:45
      frame #20 firefox`do_main() at nsBrowserApp.cpp:212
      frame #21 firefox`main() at nsBrowserApp.cpp:291
      frame #22 libdyld.dylib`start()

```

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=1546544#c51)• 6 years ago |
|  | |

I discussed the new fix with :luke and :mccr8. Try results look good so I will re-land on central now.

<https://treeherder.mozilla.org/#/jobs?repo=try&revision=f81754ae7d90a0437b5278df70d0f85ea2d34be2>

The bc7 failure appears to be due to [bug 1547489](/show_bug.cgi?id=1547489 "RESOLVED FIXED - Intermittent browser/base/content/test/general/browser_bug734076.js | no domain was inherited for 'show only this frame' - false == true -").

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=1546544#c52)• 6 years ago |
|  | |

<https://hg.mozilla.org/integration/autoland/rev/cd1ccb74af7c84aaa8ea43851c6ac74fd00ec276>

<https://hg.mozilla.org/integration/autoland/rev/64ac5acae26bd63323e2f62890eae27380119bb3>

<https://hg.mozilla.org/mozilla-central/rev/cd1ccb74af7c>

<https://hg.mozilla.org/mozilla-central/rev/64ac5acae26b>

Status: NEW → RESOLVEDClosed: 6 years ago
[status-firefox68](/buglist.cgi?f1=cf_status_firefox68&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox68&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox68&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla68

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=1546544#c53)• 6 years ago |
|  | |

Attached patch

[Enable TCSM Patch for Beta/67 Uplift (updated after backout)](attachment.cgi?id=9063559&action=diff) (obsolete)
— [Details](attachment.cgi?id=9063559&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063559)

[Attachment #9063010](/attachment.cgi?id=9063010&action=edit "Enable TCSM Patch for Beta/67 Uplift") -
Attachment is obsolete: true

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=1546544#c54)• 6 years ago |
|  | |

Attached patch

[Enable TCSM Patch for Beta/67 Uplift (updated after backout)](attachment.cgi?id=9063560&action=diff)
— [Details](attachment.cgi?id=9063560&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063560)

[Attachment #9063559](/attachment.cgi?id=9063559&action=edit "Enable TCSM Patch for Beta/67 Uplift (updated after backout)") -
Attachment is obsolete: true

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a1275163_280903)• 6 years ago |

[Attachment #9061802](/attachment.cgi?id=9061802&action=edit "Bug 1546544 - Reduce navigator.hardwareConcurrency to account for TCSM r?Luke") -
Flags: sec-approval? → sec-approval+

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=1546544#c55)• 6 years ago |
|  | |

Attached patch

[Enable TCSM Patch for ESR60 Uplift](attachment.cgi?id=9063606&action=diff)
— [Details](attachment.cgi?id=9063606&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063606)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=1546544#c56)• 6 years ago |
|  | |

With the 67 launch date pushed back to May 21st from May 14th, we will need this fix as an update to 66 in order to have it available on the May 14th disclosure date. I'm working on a Release patch.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 57](/show_bug.cgi?id=1546544#c57)• 6 years ago |
|  | |

I was worried about the same thing, but I don't think we need to issue a dot release just for this issue: Chrome won't have their patch in release until well after May 21st and, with the "optics" aside, the practical threat level of waiting a week is very low. Yesterday I raised this with the release manager and other relevant release stakeholders and everyone is in agreement. So we can just land on FF67 and let the release folks have a break from a strenuous week.

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 58](/show_bug.cgi?id=1546544#c58)• 6 years ago |
|  | |

Attached patch

[Enable TCSM Patch for Release/66 Uplift](attachment.cgi?id=9063632&action=diff)
— [Details](attachment.cgi?id=9063632&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063632)

|  | [Aki Sasaki (not active)](/user_profile?user_id=329611) |  |
| --- | --- | --- |
| [Comment 59](/show_bug.cgi?id=1546544#c59)• 6 years ago |
| uplift | |

(In reply to Haik Aftandilian [:haik] from [comment #54](/show_bug.cgi?id=1546544#c54 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

<https://hg.mozilla.org/releases/mozilla-beta/rev/d52fac94f5077ee49700efe646b67a613761cda9>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 60](/show_bug.cgi?id=1546544#c60)• 6 years ago |
|  | |

Please nominate the ESR60 patch for uplift ASAP.

[status-firefox67](/buglist.cgi?f1=cf_status_firefox67&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=fixed)Flags: needinfo?(haftandilian)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190)  Assignee |  |
| --- | --- | --- |
| [Comment 61](/show_bug.cgi?id=1546544#c61)• 6 years ago |
|  | |

Comment on [attachment 9063606](/attachment.cgi?id=9063606 "Enable TCSM Patch for ESR60 Uplift") [[details]](/attachment.cgi?id=9063606&action=edit "Enable TCSM Patch for ESR60 Uplift") [[diff]](/attachment.cgi?id=9063606&action=diff "Enable TCSM Patch for ESR60 Uplift") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063606)

Enable TCSM Patch for ESR60 Uplift

### ESR Uplift Approval Request

* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**:
* **User impact if declined**: Exposure to timing attack security issue.
* **Fix Landed on Version**: 68
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: Limited to macOS. Small scope of patch.
* **String or UUID changes made by this patch**: None
Flags: needinfo?(haftandilian)
[Attachment #9063606](/attachment.cgi?id=9063606&action=edit "Enable TCSM Patch for ESR60 Uplift") -
Flags: approval-mozilla-esr60?

|  | [Liz Henry (:lizzard) (relman/hg->git project)](/user_profile?user_id=451704) |  |
| --- | --- | --- |
| [Comment 62](/show_bug.cgi?id=1546544#c62)• 6 years ago |
|  | |

Comment on [attachment 9063606](/attachment.cgi?id=9063606 "Enable TCSM Patch for ESR60 Uplift") [[details]](/attachment.cgi?id=9063606&action=edit "Enable TCSM Patch for ESR60 Uplift") [[diff]](/attachment.cgi?id=9063606&action=diff "Enable TCSM Patch for ESR60 Uplift") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1546544&attachment=9063606)
Enable TCSM Patch for ESR60 Uplift
Fix for sec-high issue, ok for ESR 60.7 uplift.
[Attachment #9063606](/attachment.cgi?id=9063606&action=edit "Enable TCSM Patch for ESR60 Uplift") -
Flags: approval-mozilla-esr60? → approval-mozilla-esr60+

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 63](/show_bug.cgi?id=1546544#c63)• 6 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr60/rev/aff8b17d2cc5>

[status-firefox-esr60](/buglist.cgi?f1=cf_status_firefox_esr60&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a1713147_280903)• 6 years ago |

Whiteboard: [NDA'd, please leave closed and in core-security][adv-main67+] → [NDA'd, please leave closed and in core-security][adv-main67+][adv-esr60.7+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a1727003_280903)• 6 years ago |

Alias: CVE-2019-9815

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 64](/show_bug.cgi?id=1546544#c64)• 6 years ago |
|  | |

Looks like public disclosure has happened, as expected.

URL: <https://mdsattacks.com/>Group: mozilla-employee-confidential

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a1793631_406194)• 6 years ago |

Group: core-security → core-security-releaseWhiteboard: [NDA'd, please leave closed and in core-security][adv-main67+][adv-esr60.7+] → [disclosure date May 14][adv-main67+][adv-esr60.7+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 65](/show_bug.cgi?id=1546544#c65)• 6 years ago |
|  | |

For the advisory, who is the official "reporter" of this issue for credit?

Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 66](/show_bug.cgi?id=1546544#c66)• 6 years ago |
|  | |

A whole bunch of people, apparently; for starters, all the people listed under "People" on <https://mdsattacks.com/>.

Flags: needinfo?(luke)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 67](/show_bug.cgi?id=1546544#c67)• 6 years ago |
|  | |

(In reply to Luke Wagner [:luke] from [comment #66](/show_bug.cgi?id=1546544#c66 "RESOLVED FIXED - macOS: disable hyperthreading on threads that run content JS"))

> A whole bunch of people, apparently; for starters, all the people listed under "People" on <https://mdsattacks.com/>.

All of them reached out to Mozilla and reported it to us?

The advisory usually has a single line where we list one to three names (usually just one). I can pull every single person on the list but that seems possibly silly. How did we find out about it so we made our code change?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 68](/show_bug.cgi?id=1546544#c68)• 6 years ago |
|  | |

Dan suggests that we just link to <https://mdsattacks.com/#People>

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Reporter |  |
| --- | --- | --- |
| [Comment 69](/show_bug.cgi?id=1546544#c69)• 6 years ago |
|  | |

sgtm

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a30845406_1689)• 5 years ago |

Group: core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a30935141_1689)• 5 years ago |

Regressions: [1630089](/show_bug.cgi?id=1630089 "RESOLVED INCOMPLETE - [macOS] navigator.hardwareConcurrency reports physical cores instead of logical since Bug 1546544")

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a38693756_462836)• 5 years ago |

See Also: → [1649696](/show_bug.cgi?id=1649696 "RESOLVED FIXED - Linux sandbox disables indirect branch prediction on x64/x86, resulting in a significant slowdown")

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1546544#a89144528_578488)• 3 years ago |

Blocks: [1756207](/show_bug.cgi?id=1756207 "NEW - Enable more robust CSM protections where available")
You need to [log in](/show_bug.cgi?id=1546544&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Haik Aftandilian [:haik]](/user_profile?user_id=558190)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from mdsattacks.com_b4cfdc0a_20250121_020546.html ===

# MDS: Microarchitectural Data Sampling

Attacks on the newly-disclosed "MDS" hardware vulnerabilities in Intel CPUs

![](logos/mds.svg)

### New (Jun 9, 2020): [CrossTalk (SRBDS)](https://www.vusec.net/projects/crosstalk) now public (see also [paper](https://download.vusec.net/papers/crosstalk_sp21.pdf))

### Update (Mar 10, 2020): [LVI](https://lviattack.eu) and [Snoop](https://software.intel.com/security-software-guidance/insights/deep-dive-snoop-assisted-l1-data-sampling) now public

### Update (Jan 27, 2020): [L1DES and VRS](#ridl-nng) now public (see also [addendum 2](files/ridl-addendum2.pdf))

### Update (Nov 12, 2019): [TAA and other RIDL issues](#ridl-ng) now public (see also [addendum 1](files/ridl-addendum.pdf))

---

The **RIDL** and **Fallout** speculative execution attacks allow attackers to **leak private data** across arbitrary security boundaries on a victim system, for instance compromising data held in the cloud or leaking your data to malicious websites. Our attacks leak data by exploiting the 4 newly disclosed *Microarchitectural Data Sampling* (or **MDS**) side-channel vulnerabilities in Intel CPUs. Unlike existing attacks, our attacks can leak arbitrary *in-flight* data from CPU-internal buffers (*Line Fill Buffers*, *Load Ports*, *Store Buffers*), including data never stored in CPU caches.
We show that existing defenses against speculative execution attacks are inadequate, and in some cases actually make things worse. Attackers can use our attacks to leak sensitive data despite mitigations, due to vulnerabilities deep inside Intel CPUs.

---

## RIDL

RIDL (*Rogue In-Flight Data Load*) shows attackers can exploit MDS vulnerabilities to mount practical attacks and leak sensitive data in real-world settings. By analyzing the impact on the CPU pipeline, we developed a variety of practical exploits leaking in-flight data from different internal CPU buffers (such as *Line-Fill Buffers* and *Load Ports*), used by the CPU while loading or storing data from memory.

We show that attackers who can run unprivileged code on machines with recent Intel CPUs - whether using shared cloud computing resources, or using JavaScript on a malicious website or advertisement - can steal data from other programs running on the same machine, across any security boundary: other applications, the operating system kernel, other VMs (e.g., in the cloud), or even secure (SGX) enclaves.

We presented our paper titled [RIDL: Rogue In-Flight Data Load](files/ridl.pdf) on these attacks at the [40th IEEE Symposium on Security and Privacy](https://www.ieee-security.org/TC/SP2019/), on May 20th 2019.

[![VUSec logo](https://www.vusec.net/wp-content/uploads/2016/04/vusec-logo_large-768x172.png)](https://vusec.net)
[![CISPA logo](https://cispa.saarland/img/CISPA_only_web_mobile.png)](https://cispa.saarland)

 [Paper](files/ridl.pdf)
[Cite](#bibtexridl)
[Slides](slides/slides.html)
[Code](https://github.com/vusec/ridl)
##### Cite RIDL

×

```

@inproceedings{ridl,
  title = {{RIDL}: Rogue In-flight Data Load},
  booktitle = {S\&{P}},
  author = {van Schaik, Stephan and Milburn, Alyssa and Ãsterlund, Sebastian and Frigo, Pietro and Maisuradze, Giorgi and Razavi, Kaveh and Bos, Herbert and Giuffrida, Cristiano},
  month = may,
  year = {2019},
}

```

## Fallout

Fallout demonstrates that attackers can leak data from *Store Buffers*, which are used every time a CPU pipeline needs to store *any* data.
Making things worse, an unprivileged attacker can then later *pick* which data they leak from the CPU's Store Buffer.

We show that Fallout can be used to break Kernel Address Space Layout Randomization (KASLR), as well as to leak sensitive data written to memory by the operating system kernel.

Ironically, the recent hardware countermeasures introduced by Intel in recent Coffee Lake Refresh i9 CPUs to prevent Meltdown make them *more* vulnerable to Fallout, compared to older generation hardware.

We presented our paper titled Fallout: Leaking Data on Meltdown-resistant CPUs at the [26th ACM Conference on Computer and Communications Security](https://www.sigsac.org/ccs/CCS2019/), on November 13th 2019.

[![University of Michigan logo](logos/umich.png)](https://www.cse.umich.edu)

[![The University of Adelaide logo](logos/adelaide.png)](https://www.adelaide.edu.au)

[![Data61 logo](logos/data61.png)](https://www.data61.csiro.au/)
[![WPI logo](logos/wpi.png)](https://www.wpi.edu)
[![Gratz logo](logos/gratz.png)](http://iaik.tugraz.at/)
[![KU Lueven logo](logos/kuleuven.png)](https://www.kuleuven.be/english)

 [Paper](files/fallout.pdf)
[Cite](#bibtexfallout)
##### Cite Fallout

×

```

@inproceedings{canella2019fallout,
  title={Fallout: Leaking Data on Meltdown-resistant CPUs},
  author={Canella, Claudio and Genkin, Daniel and Giner, Lukas and Gruss, Daniel and Lipp, Moritz and Minkin, Marina and Moghimi, Daniel and Piessens, Frank and Schwarz, Michael and Sunar, Berk and Van Bulck, Jo, and Yarom, Yuval},
  booktitle={Proceedings of the ACM SIGSAC Conference on Computer and Communications Security ({CCS})},
  year={2019},
  organization={ACM}
}

```

---

## People

**RIDL** attacks were independently discovered and reported by:

* [Stephan van Schaik](https://www.vusec.net/people/stephan-van-schaik/), [Alyssa Milburn](http://noopwafel.net), [Sebastian Österlund](https://osterlund.xyz), [Pietro Frigo](https://www.vusec.net/people/pietro), [Kaveh Razavi](https://www.vusec.net/people/kaveh-razavi), [Herbert Bos](https://www.vusec.net/people/herbert-bos), and [Cristiano Giuffrida](http://cristianogiuffrida.com)

  at [VUSec](https://vusec.net).
* [Giorgi Maisuradze](https://cispa.saarland/people/maisuradze/)

  at [CISPA](https://cispa.saarland).

**Fallout** attacks were independently discovered and reported by:

* [Claudio Canella](http://cc0x1f.net/) at [Graz University of Technology](http://iaik.tugraz.at),
  [Daniel Genkin](https://web.eecs.umich.edu/~genkin) at [University of Michigan](https://umich.edu/),
  [Lukas Giner](https://graz.pure.elsevier.com/en/persons/lukas-giner) at [Graz University of Technology](http://iaik.tugraz.at),
  [Daniel Gruss](https://gruss.cc) at [Graz University of Technology](http://iaik.tugraz.at),
  [Moritz Lipp](https://mlq.me) at [Graz University of Technology](http://iaik.tugraz.at),
  [Marina Minkin](http://www-personal.umich.edu/~minkin/index.html) at [University of Michigan](https://umich.edu/),
  [Daniel Moghimi](http://www.moghimi.org) at [Worcester Polytechnic Institute](https://www.wpi.edu),
  [Frank Piessens](https://distrinet.cs.kuleuven.be/people/frank) at [KU Leuven](https://www.kuleuven.be/english),
  [Michael Schwarz](https://misc0110.net/web) at [Graz University of Technology](http://iaik.tugraz.at),
  [Berk Sunar](https://users.wpi.edu/~sunar/index.html) at [Worcester Polytechnic Institute](https://www.wpi.edu),
  [Jo Van Bulck](https://distrinet.cs.kuleuven.be/people/jo) at [KU Leuven](https://www.kuleuven.be/english),
  and
  [Yuval Yarom](https://www.adelaide.edu.au/directory/yuval.yarom)

  at [University of Adelaide](https://www.adelaide.edu.au) and [Data61](https://www.data61.csiro.au).

---

**MDS**-class vulnerabilities were also reported by (in alphabetical order):

* [Dan Horea Lutas' team](https://www.bitdefender.com)

  at [BitDefender](https://www.bitdefender.com).
* [Daniel Gruss](https://gruss.cc/), [Michael Schwarz](https://misc0110.net/), [Moritz Lipp](https://mlq.xyz/)
  at [TU Graz](https://www.tugraz.at/home) and [Jo Van Bulck](https://twitter.com/jovanbulck) at [KU Leuven](https://distrinet.cs.kuleuven.be/)

  *You can find more details about their research at [ZombieLoadattack.com](https://zombieloadattack.com)*
Analysis done in collaboration with [Ahmad "Daniel" Moghimi](http://www.moghimi.org/) ([Worcester Polytechnic Institute)](https://www.wpi.edu/), [Julian Stecklina](https://twitter.com/blitzclone), [Thomas Prescher](https://twitter.com/gonzodaruler) ([Cyberus Technology](https://www.cyberus-technology.de/))* [Lei Shi](https://www.360totalsecurity.com/en/)

  at [QiHoo 360](https://www.360totalsecurity.com/en/).
* [Ke Sun, Henrique Kawakami, Kekai Hu, Rodrigo Branco](https://www.intel.com/content/www/us/en/research/overview.html)

  at [Intel](https://www.intel.com).
* [Matt Miller, Brandon Falk](https://www.microsoft.com)

  at [Microsoft](https://www.microsoft.com).
* [Volodymyr Pikhur](https://twitter.com/vpikhur)
  .

---

## Overview

Our attacks can **leak confidential data** across arbitrary security boundaries in real-world settings (cloud, browsers, etc.). The reason our attacks are impervious to all the existing defenses against speculative execution attacks is that they can leak **in-flight data**. Unlike other recent attacks such as [Spectre](https://meltdownattack.com), [Meltdown](https://meltdownattack.com/), and [Foreshadow](https://foreshadowattack.eu) which are based on vulnerabilities leaking data from the CPU caches, **RIDL** and **Fallout** collect data from internal CPU buffers (*Line Fill Buffers*, *Load Ports*, *Store Buffers*). Intel describes the exploited vulnerabilities as "Microarchitectural Data Sampling" (**MDS**) - where "sampling" is another way of saying that we can *leak* in-flight (or "sampled") data from many of these microarchitectural buffers. A total of 5 CVEs were assigned by Intel for **RIDL** ([[MFBDS] CVE-2018-12130](https://nvd.nist.gov/vuln/detail/CVE-2018-12130), [[MLPDS] CVE-2018-12127](https://nvd.nist.gov/vuln/detail/CVE-2018-12127), [[MDSUM] CVE-2019-11091, [[TAA] CVE-2019-11135](https://nvd.nist.gov/vuln/detail/CVE-2019-11135)) and **Fallout** ([[MSBDS] CVE-2018-12126](https://nvd.nist.gov/vuln/detail/CVE-2018-12126)) exploits. Additional RIDL variants were later assigned 2 CVEs ([[L1DES] CVE-2020-0549](https://nvd.nist.gov/vuln/detail/CVE-2020-0549), [[VRS] CVE-2020-0548](https://nvd.nist.gov/vuln/detail/CVE-2020-0548)).](https://nvd.nist.gov/vuln/detail/CVE-2019-11091)

Most importantly, our research shows that what last year appeared to be exceptional one-time speculative execution bugs are actually systemic, and the problems in modern CPUs may go much deeper than we initially thought. If CPUs have become so complex that chip vendors cannot keep their security under control, hardware vulnerabilities will be the new hunting ground for sophisticated attackers. And we may have no idea how many zero-day hardware vulnerabilities are still up for grabs. If we can no longer trust our hardware, the foundation on which we build all security solutions is crumbling away.

---

## Exploit demos

Check out three RIDL exploits in action, leaking the root password hash from an unprivileged user, sensitive data from the Linux OS kernel, and JavaScript.

In this video, we leak the /etc/shadow file by repeatedly trying to authenticate a user. Using our latest RIDL-TAA exploit, we can leak the full root password hash from /etc/shadow in only 4 seconds.

In this video, we show how to leak recent kernel data using RIDL. This demo first reads 0 bytes from /proc/version, whereafter we are able to leak the full contents of /proc/version without the data ever present in userspace.

We leak a string from another process using Javascript and WebAssembly in the SpiderMonkey engine.

---

## Interactive guide to speculative execution attacks

xml version="1.0" encoding="utf-8"?

image/svg+xml

Click on the various components to interact with them. The full interactive version can be found [here](diagram.html) and the raw SVG can be found [here](images/skylake.svg). There is also a more vibrant colored version (the one used in our paper), which can be found [here](images/skylake-color.svg). These diagrams have been made by Stephan van Schaik ([@themadstephan](https://www.twitter.com/themadstephan)).

---

## RIDL Test Suite and PoCs

Verify whether your system is vulnerable today with our MDS tool or have a look at the [source code](https://github.com/vusec/ridl) of our PoCs!

[![MDS Tool](images/mdstool.png)](images/mdstool.png)

[Windows](files/mdstool-win-20190519.zip)

[Linux](files/mdstool-linux-20190519.zip)

[Mac OS X](files/mdstool-macosx-20190519.zip)

[Github](https://github.com/vusec/ridl)

---

Besides the MDS Tool, we have now released a test suite containing a number of different PoCs that we developed. This test suite can be found on [Github](https://github.com/vusec/ridl).

---

## FAQ

##### Am I affected?

Very likely. Our attacks affect all modern Intel CPUs in servers, desktops and laptops. This includes the latest 9th-generation
processors, despite their in-silicon mitigations for Meltdown. Ironically, 9th-generation CPUs are more vulnerable to some of our attacks compared to older generation hardware.

Processors from other vendors (AMD and ARM)
do not appear to be affected. Official statements from these vendors can be found in the RIDL and Fallout papers.

##### What's with all the different attack names, teams, and authors?

Multiple teams and researchers independently discovered, studied, and reported MDS-class vulnerabilities and attacks to Intel. Unfortunately, the different timelines (see below), as well as the fine-grained vulnerability classification and embargo strategy enforced by Intel (which coordinated the disclosure process) made proper coordination across teams difficult. The year-long disclosure process (the longest to date) ultimately resulted in independent finders of even closely related MDS-class vulnerabilities to be completely unaware of one another until very late in the process.

At the same time, [VUSec](https://vusec.net) would like to thank [Intel](https://intel.com) for sharing the full list of finders in advance -- which was crucial to give proper credit to everyone involved in the disclosure of MDS vulnerabilities in academia and industry -- and for allowing it to share information with all the other academic finders as of May 1. We made an effort to coordinate the different academic finders and present a unified message to the community and the public.

Unfortunately, as some teams felt unable to share their findings before the May 14 disclosure date, this effort was only partially successful, resulting in the present website ([mdsattacks.com](https://mdsattacks.com)) presenting only the two independent RIDL and Fallout papers. See the timeline below for more information.

##### Can MDS attacks be detected or blocked by anti-virus software?

MDS attacks exploit hardware security flaws deep inside the processor and this makes malware that exploit MDS vulnerabilities very hard to distinguish from benign software. While anti-virus software could theoretically detect MDS exploits, it is very unlikely to happen in practice.

##### How do I mitigate these vulnerabilities?

Intel has provided CPU microcode updates, and recommendations for mitigation strategies
for operating system (and hypervisor) software. See Intel's [Security Advisory](https://software.intel.com/security-software-guidance/insights/deep-dive-intel-analysis-microarchitectural-data-sampling) for more details.
We recommend you install the software updates provided by your operating system and/or hypervisor vendor.

In addition, we recommend disabling Simultaneous Multi-Threading (SMT), also known as Intel® Hyper-Threading Technology, which significantly reduces the impact of MDS-based attacks without the cost of more complex mitigations. Note that you might still be vulnerable despite disabling SMT, as MDS does not strictly rely on the presence of SMT.

##### What are virtual machines and SGX enclaves?

A Virtual Machine (VM for short) is a software emulation of the computer's physical hardware. VMs are often used by clouds to allow customers to rent time on the cloud's physical hardware, rather than maintaining their own infrastructure. As clouds often run multiple VMs from different clients on the same physical hardware, it is important that cloud vendors maintain isolation between VM (security) boundaries.

To guarantee even stronger isolation (e.g., with protection against a compromised operating system), cloud providers can also run software inside secure (SGX) enclaves.

##### So how do MDS attacks affect VMs and SGX enclaves?

As shown in the RIDL paper, an attacker can exploit hardware security vulnerabilities inside the processor to break VM and SGX boundaries. However, countermeasures deployed by cloud providers resulting from our work should make MDS hard to exploit.

##### What is an operating system kernel?

The kernel is the operating system core, and as such is responsible for most operations performed by the operating system. In particular, the kernel has access to all the data stored in the machine's memory, and to the secrets in it. As such, it is vital to properly isolate the kernel from other applications running on the machine.

##### So how do MDS attacks affect the kernel?

Both the RIDL and Fallout attacks violate the kernel privacy by extracting information from within it. Moreover, both attacks can expose the kernel's location in the system's memory, simplifying other exploits.

##### How is this different from previous speculative execution attacks such as Spectre and Meltdown?

RIDL and Fallout are related to, and inspired by, previous speculative execution attacks,
including [Spectre and Meltdown](https://meltdownattack.com). In contrast to previous attacks, MDS attacks do not need to make assumptions about
the memory layout of the victim data and do not depend on the processor cache.

This makes our attacks very difficult to mitigate. For
instance, RIDL's ability to observe data used by other code running on the same physical core
(hyperthread) is not trivial to mitigate without disabling the hyperthreading functionality entirely.
However, note that both RIDL and Fallout can read recently accessed data across security boundaries even if hyperthreading is disabled.

A detailed analysis of the many existing speculative execution
vulnerabilities, their relationship to each other and to RIDL and Fallout, can be found in the RIDL and Fallout papers.

##### What is the practical impact of these vulnerabilities?

We don't know whether malicious actors have abused these vulnerabilities in the wild. However, RIDL and Fallout show the potential impact is serious with several proof-of-concept exploits.
For example, an attacker could launch an attack using malicious JavaScript in a web page or from a co-located Virtual Machine in the cloud (see our exploits and demos), allowing them to leak confidential data present on your system such as passwords and crypto keys.

##### Fine. But don't attackers need local execution first?

Yes, similar to existing attacks, attackers can only mount our attacks in practical settings once they have the ability to execute (unprivileged) code on the victim machine. We could convince ourselves this is still an obstacle, but we should first be prepared to disable JavaScript (and similar) in the browser, abandon cloud computing, etc.

##### What exactly are these in-flight buffers and how do you leak data from them?

Detailed information about these in-flight buffers can be found in the papers above.

As a quick preview, the first diagram below shows the relevant parts of Intel's CPU
pipeline and the relationship to the *Line Fill Buffers*, *Load Ports*, and *Store Buffers* used by our attacks.
All data read/written from/to memory goes through some of these buffers.

The second diagram shows an example of how we leak data from these buffers. We perform a carefully crafted speculative
load to an address the CPU is not immediately prepared to handle (e.g., resulting in a page fault). This lures the CPU into incorrectly pulling in-flight data from the target buffers, and then similarly to
other speculative execution attacks, we leak this data
using a Flush+Reload attack before the CPU realizes the mistake.

[![Intel CPU pipeline](images/skylake-lite.svg)](images/skylake-lite.svg)
[![Attack overview](images/overview.svg)](images/overview.svg)

##### Why did you call it RIDL?

While performing some experiments on a rainy Amsterdam day, we realized we were able to leak data across security boundaries. We knew we could leak arbitrary in-flight (the "I" in RIDL) data but the cause was initially a big *riddle* to us. We came to know we were leaking from various CPU buffers only later...

It is also a reference to Intel's formal name for Meltdown: RCDL (related to RIDL, but instead leaking "C"ached data).

Internally, we referred to RIDL (and MDS in general) as the `cat pictures' vulnerability. :)

##### Why did you call it Fallout?

We started working on Fallout immediately after Meltdown, and Fallouts are typically a direct consequence of Meltdowns.

##### What are the CVE identifiers for these vulnerablities?

The following is the fine-grained vulnerability classification adopted by Intel, together with their CVSS score (their rating of the severity of the bug):

[CVE-2018-12126: "Microarchitectural Store Buffer Data Sampling (MSBDS)"](https://nvd.nist.gov/vuln/detail/CVE-2018-12126) (CVSS score 6.5: Medium). See the Fallout paper for more information.

[CVE-2018-12127: "Microarchitectural Load Port Data Sampling (MLPDS)"](https://nvd.nist.gov/vuln/detail/CVE-2018-12127) (CVSS score 6.5: Medium). See the RIDL paper for more information.

[CVE-2018-12130: "Microarchitectural Fill Buffer Data Sampling (MFBDS)"](https://nvd.nist.gov/vuln/detail/CVE-2018-12130) (CVSS score 6.5: Medium). See the RIDL paper for more information.

[CVE-2019-11091: "Microarchitectural Data Sampling Uncacheable Memory (MDSUM)"](https://nvd.nist.gov/vuln/detail/CVE-2019-11091) (CVSS score 3.8: Low). See the RIDL paper for more information.

[CVE-2019-11135: "TSX Asynchronous Abort (TAA)"](https://nvd.nist.gov/vuln/detail/CVE-2019-11135) (CVSS score 6.5: Medium). See the RIDL paper (with addenda) for more information.

[CVE-2020-0549: "L1D Eviction Sampling (L1DES)"](https://nvd.nist.gov/vuln/detail/CVE-2020-0549) (CVSS score 6.5: Medium). See the RIDL paper (with addenda) for more information.

[CVE-2020-0548: "Vector Register Sampling (VRS)"](https://nvd.nist.gov/vuln/detail/CVE-2020-0548) (CVSS score 2.8: Low). See the RIDL paper (with addenda) for more information.

[CVE-2020-0551: "Load Value Injection (LVI)"](https://nvd.nist.gov/vuln/detail/CVE-2020-0551) (CVSS score 5.6: Medium). See the [LVI website](https://lviattack.eu) for more information.

[CVE-2020-0550: "Snoop-assisted L1 Data Sampling (Snoop)"](https://nvd.nist.gov/vuln/detail/CVE-2020-0550) (CVSS score 5.6: Medium). See [Intel's Deep Dive](https://software.intel.com/security-software-guidance/insights/deep-dive-snoop-assisted-l1-data-sampling) for more information.

[CVE-2020-0543: "Special Register Buffer Data Sampling (SRBDS)"](https://nvd.nist.gov/vuln/detail/CVE-2020-0543) (CVSS score 6.5: Medium). See the [CrossTalk project page](https://www.vusec.net/projects/crosstalk) for more information.

##### Did we really need yet another vulnerability logo?

Not really. And some of the researchers do share your same feelings.

VUSec in particular doesn't really like vulnerability logos. But we do like beer. So here is a MDS-branded one just in case (and yes, VUSec students like to troll their supervisors, who take a hard stance against vulnerability logos...):

[![MDS beer](images/beer.jpg)](images/beer.jpg)

##### Can I use the logo?

Yes, with rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/). Logos are designed by [Marina Minkin](http://www-personal.umich.edu/~minkin/index.html). Click [here](logos/mds.svg) for the logo in SVG format and [here](logos/mds.png) for the logo in PNG format.

##### How did you test it on all this hardware?

[![MDS rack](images/rack.jpg)](images/rack.jpg)

##### How did you find out the sources of the leaks initially?

[![Intel patents](images/patents.jpg)](images/patents.jpg)

##### Can I see a presentation of the work anywhere?

* Kaveh Razavi will do the first public presentation of **RIDL** at the [1st AMSEC Workshop: Security in Diversity](https://www.amsec.org/events/) on May 15th at 14:15. *Registration is free!*
* We presented our paper on **RIDL** at the [40th IEEE Symposium on Security and Privacy](https://www.ieee-security.org/TC/SP2019/), on May 20th 2019 (Session #1: Hardware Security). Here is a video of the talk:
* We presented a poster at the [Cybersecurity and Privacy (CySeP) Summer School](https://cysep.conf.kth.se) in Stockholm on June 13th.
* We also presented an extended talk on **RIDL** at [OFFZONE](https://offzone.moscow/news/sebastian-sterlund-and-stephan-van-schaik-will-give-an-in-depth-talk-on-the-intel-s-new-vulnerabilit/) in Moscow on June 17-18th 2019.
* We presented our extended results on **RIDL** at [HITB CyberWeek](https://cyberweek.ae/session/ridl-rogue-in-flight-data-load/) in Abu Dhabi on Thursday October 17th.
* We presented a poster at [CSAW '19](https://csaw.engineering.nyu.edu/research/finalists) in Valence, France on November 7-8th 2019. **RIDL** won the 2nd place award for Applied Research.
* We presented our paper **Fallout** at the [26th ACM Conference on Computer and Communications Security](https://www.sigsac.org/ccs/CCS2019/), on November 13th 2019 (Session 4A: Side Channels II).

##### How can we contact you?

Questions about RIDL and MDS vulnerabilities in general can be sent to [[email protected]](/cdn-cgi/l/email-protection#a5cccbc3cae5d3d0d6c0c68bcbc0d1).

---

## L1DES and VRS

On Jan 27, 2020, we (VUSec) disclose two "new" RIDL/MDS variants at
the end of another (third) embargo, as described in our [second RIDL addendum](files/ridl-addendum2.pdf). We do not think either of these
variants is particularly novel or interesting and they are simply
"more RIDL" (focusing on ways to get data into microarchitectural
buffers RIDL can leak from).

* **L1D Eviction Sampling (L1DES)**.

  The first issue, which Intel refers to
  as [L1D
  Eviction Sampling (L1DES)](https://software.intel.com/security-software-guidance/software-guidance/l1d-eviction-sampling), is a RIDL variant that leaks
  from L1D evictions (assigned [CVE-2020-0549](https://nvd.nist.gov/vuln/detail/CVE-2020-0549)). It may seem that sometimes history does
  repeat itself, because this is again something that we had
  already shown in our original RIDL paper, as shown in Figure
  6. In
  the [camera-ready
  version of the RIDL paper](https://www.ieee-security.org/TC/SP2019/papers/588.pdf), we also explicitly mentioned
  that, at every context switch, "the entire L1 cache needs to
  be flushed first since the entries go through the LFBs" to
  properly mitigate RIDL. We removed this sentence in the
  original version of the RIDL paper released on May 14, 2019,
  since Intel had not yet mitigated the RIDL variant based on L1D
  evictions (which would eventually become L1DES). Since then, we spent
  months trying to convince Intel that leaks from L1D evictions
  were possible and needed to be addressed.

  On Oct 25, 2019, we reported to Intel that this variant
  would bypass their latest VERW mitigation (and so did a PoC
  shared with Intel on May 10, 2019), resulting in Intel
  finally acknowledging the L1D eviction issue and requesting another
  (L1DES) embargo. We learned that Intel had not found this
  issue internally and that the only other independent finder
  was the [Zombieload
  team](https://zombieloadattack.com), which reported a PoC to Intel in May, 2019. The [CacheOut
  team](https://cacheoutattack.com) did an independent security analysis of L1DES. Our
  RIDL-L1DES PoC is available
  on [GitHub](https://github.com/vusec/ridl).* **Vector Register Sampling (VRS)**.

    The second issue, which Intel refers to as [Vector Register Sampling (VRS)](https://software.intel.com/security-software-guidance/software-guidance/vector-register-sampling), is a RIDL variant that leaks from vector registers (assigned [CVE-2020-0548](https://nvd.nist.gov/vuln/detail/CVE-2020-0548)). This variant shows that RIDL can also leak values that are never even stored in memory. In reality, this is possible with a small, 1-line of code variation of our 'alignment write' PoC (originally leaking values stored in memory using alignment faults), which we shared with Intel on May 11, 2019. Since then, we spent months trying to convince Intel that our 'alignment write' PoC and its variations needed to be properly addressed.

    On Oct 1, 2019, we reported to Intel that a 1-line modification of our 'alignment write' PoC can leak vector register values, resulting in Intel requesting a new (VRS) embargo. We are not aware of other independent finders to acknowledge for VRS. Our RIDL-VRS PoC is available on [GitHub](https://github.com/vusec/ridl).

### In other news: RIDL leaks the root passwd hash in a few seconds

Meanwhile, our students have been playing with RIDL last year. As shown below, one of our bright students, Finn de Ridder, built a new RIDL-TAA exploit that can leak the entire root hash password in only 4 seconds (**!!!**).

Our latest optimized RIDL-TAA exploit can leak the root password hash from the /etc/shadow file on Linux in only 4 seconds.

---

## TAA and other RIDL issues

On Nov 12, 2019, we (VUSec) disclosed TSX Asynchronous
Abort (TAA), a **new** speculation-based vulnerability in Intel CPUs as well as other MDS-related issues, as described in our [first RIDL addendum](files/ridl-addendum.pdf).
In reality, this is no new vulnerability.
We disclosed TAA (and other issues) as part of our original RIDL
submission to Intel in Sep 2018. Unfortunately, the Intel PSIRT
team missed our submitted proof-of-concept exploits (PoCs), and
as a result, the original MDS mitigations released in May 2019
only partially addressed RIDL.
You can read the full story [below](#ng-full-story).

In particular, at the request of Intel, we withheld
the following details on the original RIDL/MDS disclosure date:

* **TSX Asynchronous Abort (TAA)**. Intel's TSX hardware feature can be used to efficiently mount a RIDL attack even on allegedly non-vulnerable CPUs (with hardware mitigations).* **Alignment faults**. These can be used to trigger an exception, giving an attacker yet another way of leaking data. This attack vector seems to be fixed in the latest generation of Intel CPUs.* **Flawed MDS mitigation**. The initial mitigations against MDS clear the buffers by writing stale, potentially sensitive, data into these buffers, allowing an attacker to leak information despite mitigations being enabled.* **The RIDL test suite**. We can now release the RIDL test suite at <https://github.com/vusec/ridl>.

### Impact

**TL;DR**: an attacker can mount a RIDL attack despite the in-silicon mitigations/microcode patches published in May 2019 being in place.

In particular, *TSX Asynchronous Abort (TAA)* allowed us to mount a practical RIDL exploit (as already shown in */etc/shadow leak* presented in the RIDL paper) even on systems with in-silicon/microcode MDS mitigations enabled. Moreover, one of our brilliant Master students ([Jonas Theis](https://www.jonastheis.de)) used TAA to optimize our initial password-disclosing exploit to run in just 30 seconds (**!!**), rather than the initial 24 hours (as seen in the video below).

We leak the full root password hash from the /etc/shadow file on Linux in around 30 seconds using a TAA-optimized RIDL exploit.

### Why only release this now?

In short, this was part of our original RIDL submission but was missed
by Intel during the first embargo and a new last-minute embargo followed. Check out the updated timeline at the end of the page or keep reading for the full story.

On Sep 29, 2018, we submitted several proof-of-concept
exploits (PoCs) for a number of RIDL variants to Intel. Despite our
many attempts, we received no technical feedback/questions on our
submission except that Intel was working on the mitigations.

In fact, due to a **lack of transparency on Intel's part**,
we only got a complete picture on Intel's MDS disclosure plan
on May 10, 2019, just 4 days before public disclosure. We were able to find
the microcode updates published by Intel online and tested them on the same day. We quickly found that Intel's fixes did not fully mitigate the
vulnerabilities we had reported in Sep 2018 and immediately informed Intel.

On May 13, 2019, **just one day** from the RIDL/MDS public disclosure date,
Intel requested TAA and any other RIDL issues that were not mentioned in the [MDS
whitepaper](https://software.intel.com/security-software-guidance/insights/deep-dive-intel-analysis-microarchitectural-data-sampling) to be placed under a new last-minute embargo until Nov 12, 2019. At the request of Intel, and to protect users,
we complied to the new embargo, withheld several details
from the [RIDL paper](files/ridl.pdf) (leaving only some traces of our results in Table I), and
did not release our now public [RIDL test suite](https://github.com/vusec/ridl).

On July 3, 2019, we finally learned that, to our
surprise, the Intel PSIRT team **had missed the PoCs** from our
Sep 29 submission, despite having awarded a bounty for it,
explaining why Intel had **failed to address** - or even publicly acknowledge - many RIDL-class vulnerabilities on May 14, 2019.

On Oct 15, 2019, we learned that Intel had not found this issue internally
and the only other independent finder was the [Zombieload team](https://zombieloadattack.com),
which disclosed TAA to Intel in April, 2019. The MEDUSA team later published an independent [analysis](https://www.usenix.org/system/files/sec20fall_moghimi_prepub.pdf) using TAA.

On Oct 25, 2019, we tested Intel's latest microcode update, and still saw leaks with the VERW mitigation enabled, using the RIDL PoCs we shared with Intel in May 2019. We notified Intel and shared a polished PoC to make the issue clear. Intel requested a new embargo and yet suggested adding the following to our first RIDL addendum: "A new microcode update release by Intel in November is required to adequately address the issue".

On Nov 12, 2019, TAA and the other scheduled RIDL issues are disclosed.
Unfortunately, we believe that, given the piecemeal (variant-by-variant)
mitigation approach pursued by Intel, RIDL-class vulnerabilities won't
disappear any time soon.

We are particularly worried about Intel's mitigation plan being PoC-oriented with a complete lack of security engineering and underlying root cause analysis, with minor variations in PoCs leading to new embargoes, and these "new" vulnerabilities remaining unfixed for lengthy periods.
Unfortunately, until there is sufficient public / industry
pressure, there seems to be little incentive for Intel to change course,
leaving the public with a false sense of security. Slapping
a year-long embargo after another (many news cycles apart) and keeping
vulnerabilities (too) many people are aware of from the public for a long
time is still a viable strategy.

---

## Media attention

The attacks presented on this page got quite the media attention. RIDL and Fallout were covered amongst others by
[New York Times](https://www.nytimes.com/2019/11/12/technology/intel-chip-fix.html),
[Ars Technica](https://arstechnica.com/gadgets/2019/05/new-speculative-execution-bug-leaks-data-from-intel-chips-internal-buffers/),
[WIRED](https://www.wired.com/story/intel-mds-attack-speculative-execution-buffer/),
[De Volkskrant](https://www.volkskrant.nl/nieuws-achtergrond/nederlandse-onderzoekers-ontdekken-groot-lek-in-intel-processors-die-in-driekwart-van-alle-computers-zitten~b758c052/),
[NRC Next](https://www.nrc.nl/nieuws/2019/05/14/vu-ontdekt-megalek-in-intel-chips-a3960207),
[Tweakers](https://tweakers.net/reviews/7080/beveiligingslekken-in-intels-cpus-is-dit-het-einde-van-hyper-threading.html),
[RTL nieuws](https://www.rtlnieuws.nl/tech/artikel/4713041/apple-oplossing-voor-intel-lek-kost-tot-40-procent-processorkracht),
[AVRO Tros](https://opgelicht.avrotros.nl/nieuws/artikel/groot-lek-in-intel-chips-ontdekt-hackers-vrij-spel/),
[The Verge](https://www.theverge.com/2019/5/17/18628568/how-to-secure-mds-intel-zombieload-apple-windows-chromeos),
[ZDNet](https://www.zdnet.com/article/patch-status-for-the-new-mds-attacks-against-intel-cpus/)

---

# Known Timeline

Based on the information shared with us by Intel and other finders.

2018

28

* TU Graz reports Meltdown UC to Intel
* TU Graz reports Meltdown UC - Meltdown leaks from Uncacheable Memory - (identified as MDSUM) to Intel.

* Microsoft reports to Intel
* Microsoft independently reports a new issue (identified as MFBDS) to Intel on behalf of Giorgi Maisuradze (interning at MSR).

17

AUG

* Bitdefender reports to Intel
* Dan Horea Lutas' team at Bitdefender independently reports a L1TF mitigation bypass (identified as MFBDS) to Intel.

25

AUG

* Volodymyr Pikhur reports to Intel
* Volodymyr Pikhur independently reports a L1TF mitigation bypass (identified as MDSUM) to Intel.

12

SEP

* VUSec reports RIDL to Intel
* The RIDL authors from VU Amsterdam (VUSec) independently report the RIDL class of vulnerabilities (identified as MFBDS, and later also acknowledged as MLPDS, MDSUM, TAA, L1DES, and VRS) to Intel. Upon request, Intel communicates none of the existing (MFBDS) finders are interested in collaborating on a research paper with VUSec.

29

SEP

* VUSec reports more RIDL PoCs including TAA
* VUSec reports updated RIDL PoCs to Intel and Microsoft,
  including TAA

01

NOV

* RIDL submitted @ IEEE S&P '19
* The RIDL paper is submitted for publication to the IEEE Symposium on Security & Privacy, 2019.

29

NOV

* Giorgi Maisuradze joins RIDL team
* Giorgi Maisuradze and VUSec merge research efforts into the RIDL paper, after discussing common findings for the first time.

30

DEC

* RIDL accepted @ IEEE S&P '19
* The RIDL paper is accepted for publication at the IEEE Symposium on Security & Privacy, 2019.

2019

31

JAN

* Minkin, Genkin, and Yarom report to Intel
* Minkin, Genkin, and Yarom report Fallout vulnerabilities (identified as MSBDS) to Intel.

  The finders would also like to acknowledge all the other authors on the Fallout paper.

19

FEB

* VUSec and Volodymyr Pikhur share information
* VUSec and Volodymyr discuss their findings for the first time.

21

FEB

* VUSec and Dan Horea Lutas share information
* VUSec and Dan discuss their findings for the first time.

12

APR

* TU Graz reports ZombieLoad to Intel
* TU Graz reports ZombieLoad (identified as MFBDS and later also acknowledged as TAA and L1DES) to Intel.

1

MAY

* VUSec allowed to share by Intel
* VUSec allowed to share findings with all academic finders by Intel. VUSec starts sharing information and making plans with the other teams, in an attempt to converge to a common website with a unified message and acknowledgements for all the finders. Unfortunately, as some teams felt unable to share their findings before the disclosure date, this effort was only partially successful, resulting in the present website (<mdsattacks.com>) presenting only the two independent RIDL and Fallout papers. See also FAQ#2.

3

MAY

* VUSec receives a partial whitepaper from Intel
* The partial/draft whitepaper only mentions Fill Buffers, and none of the other issues.

7

MAY

* VUSec, Genkin, and Yarom share information
* VUSec, Genkin, and Yarom discuss their findings for the first time. VUSec shares the RIDL paper with Genkin and Yarom.

10

MAY

* VUSec gets technical feedback from Intel
* Intel shares the full MDS whitepaper with the RIDL team for the first time

11

MAY

* VUSec reports a number of missed issues to Intel
* The issues include TAA, alignment faults, and the flawed MDS mitigation

13

MAY

* VUSec, Genkin, and Yarom share information
* The Fallout paper is shared with VUSec.

13

MAY

* Intel requests last-minute blanket embargo
* Intel requests a new embargo on all RIDL-related issues not covered in their whitepaper. This includes withholding details from the RIDL paper and no release of the RIDL test suite

14

MAY

* Public disclosure of MDS attacks
* The first embargo is over after nearly a year and RIDL, Fallout, ZombieLoad, and MDS are now publicly disclosed.

?

MAY

* ZombieLoad team reports L1DES to Intel
* The ZombieLoad team reports a PoC (later identified as L1DES) to Intel.

3

JUL

* Intel reports having missed RIDL PoCs
* Intel reports having missed the PoCs from VUSec's Sep 29, 2018 RIDL submission, including TAA and other issues. Moreover, Intel informs the RIDL team and the ZombieLoad team they are both under the second (TAA/VERW) embargo and allowed to exchange information.

1

OCT

* VUSec reports VRS to Intel
* VUSec reports a slightly modified RIDL 'alignment\_write' PoC (later identified as VRS) to Intel.

25

OCT

* VUSec reports L1DES to Intel
* VUSec reports a PoC (later identified as L1DES) bypassing the latest microcode mitigation to Intel.

5

NOV

* Intel requests a third embargo
* Intel requests a third embargo for L1DES and VRS. We also confirmed VERW (latest microcode mitigation) leaks with RIDL PoCs shared with Intel on May 11, 2019.

12

NOV

* Public disclosure of more RIDL-related issues
* The second RIDL embargo is over. Details about issues such as TAA that have been embargoed for more than a year are now public. And so is our RIDL test suite. The embargoed material has been added to the RIDL paper by means of a first addendum.

2020

27

JAN

* Public disclosure of even more RIDL-related issues
* The third RIDL embargo is over, with the public disclosure of the L1DES and VRS variants. The embargoed material has been added to the RIDL paper by means of a second addendum.

10

MAR

* Public disclosure of LVI and Snoop
* LVI and Snoop are disclosed by the LVI team and Pawel Wieczorkiewicz (respectively).

9

JUN

* Public disclosure of CrossTalk / SRBDS
* VUSec discloses CrossTalk and SRBDS.

---

## Acknowledgements

The RIDL work at VUSec was supported by the European Union's Horizon 2020 research and innovation programme under grant agreements No. 786669 (ReAct) and No. 825377 (UNICORE), by the United States Office of Naval Research (ONR) under contracts N00014-17-1-2782 and N00014-17-S-B010 "BinRec", by Intel Corporation through the Side Channel Vulnerability ISRA, and by the Netherlands Organisation for Scientific Research through grants NWO 639.023.309 VICI "Dowsing", NWO 639.021.753 VENI "PantaRhei", and NWO 016.Veni.192.262. The public artifacts reflect only the authors' view. The funding agencies are not responsible for any use that may be made of the information they contain.

© 2019 Vrije Universiteit Amsterdam.



=== Content from wiki.mozilla.org_ef8238f3_20250121_020544.html ===


# BMO/UserGuide/Whiteboard

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)

Each bug has a free-form single line text entry box for adding tags and status information. This wiki page is dedicated to collect a comprehensive list of whiteboard tags used in the Mozilla project.

## Contents

* [1 Whiteboard considered harmful](#Whiteboard_considered_harmful)
* [2 Contributor mentoring](#Contributor_mentoring)
* [3 Automated Testing](#Automated_Testing)
* [4 Autonag](#Autonag)
* [5 Release Engineering](#Release_Engineering)
* [6 Sheriffing](#Sheriffing)
* [7 Firefox](#Firefox)
* [8 Community reported bugs](#Community_reported_bugs)
* [9 Firefox OS](#Firefox_OS)
* [10 Tor](#Tor)
* [11 Web Compatibility](#Web_Compatibility)
* [12 Scrum Development](#Scrum_Development)
* [13 What does this whiteboard keyword mean?](#What_does_this_whiteboard_keyword_mean?)
## Whiteboard considered harmful

It is recommended that you request alternative metadata instead of using whiteboard tagging.

* Updating whiteboards tags through the API is non-trivial
* There is no global auto-suggest for whiteboard tags
* There is no verification of whiteboard tags; typos will not be caught and prevented
* Renaming a whiteboard tag requires writing a script to update every bug with that tag, changing its last modified timestamp and generating bugmail; other solutions involve a simple change by administrators
* Whiteboard tags cannot be disabled; people might continue to provide them after they are no longer relevant thinking they still apply
* If desired it's possible to restrict who can set flags to particular values; it will never be possible to prevent accidental or other changes to the whiteboard from any user with editbugs or the bug's reporter

Consider using a keyword, a flag, or a status flag. You can request this on [Bugzilla](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).

## Contributor mentoring

For more information, see [Mentors](/Mentors "Mentors").

* `[lang=]`: The programming language involved for this bug.
* `[mentor-lang=]`: (human/natural) language other than English the mentor will be able to communicate to the contributor with.

## Automated Testing

* `[test disabled]`: Indicates an automated test has been disabled. Typically used in bugs filed for intermittent test failures, to indicate that the absence of new failures in the bug is due to the test being disabled - as well as remind module owners that the test needs fixing and re-enabling.

## Autonag

`[no-nag]`: Indicates that a bug should not be modified or commented in by our [Autonag](/Release_Management/autonag "Release Management/autonag") scripts.

## Release Engineering

* `[capacity]`: This bug will help increase (or free up) capacity for our automated build & test machines.

## Sheriffing

* `[leave open]`: This has [been deprecated](https://groups.google.com/forum/#!topic/mozilla.dev.platform/Ie9OXcWbTSs) in favour of the 'leave-open' keyword. Used to ensure that the bug updating tool mcMerge does not close the bug when commits referencing it are merged into mozilla-central.
* `[retriggered]`: Used by sheriffs when investigating Fresh Oranges [[1]](https://charts.mozilla.org/FreshOranges/index.html) to find where a failure started from, using backfills and retriggers

## Firefox

* `dupeme`, `dupme`, or `DUPEME`: we're pretty sure this bug report is a duplicate of another bug, but cannot recall which one or cannot find it.
* `[qa-]`: QE (Quality Engineering) verification not required - superseded by the qe-verify flag.
* `[adv-mainNN+]` (where `NN` is some number): a security advisory about this bug for the release `NN` will be (has been) written.
* `[MemShrink]`: [a project](/Performance/MemShrink "Performance/MemShrink") to reduce memory consumption.

## Community reported bugs

* `[nightly-community]`: This bug was reported by a member of the Firefox Nightly community. Used to triage community-reported bugs and measure the impact of our core community on product quality.
* `[mozfr-community]`: This bug was reported by a member of the MozFR French-speaking community. Used to evaluate the impact of the mozfr.org community on product quality.

## Firefox OS

[Template:Note: This project is no longer active, but we leave these definitions for bug tracker historian purposes](/index.php?title=Template:Note:_This_project_is_no_longer_active,_but_we_leave_these_definitions_for_bug_tracker_historian_purposes&action=edit&redlink=1 "Template:Note: This project is no longer active, but we leave these definitions for bug tracker historian purposes (page does not exist)")

* `[POVB]`: Part of vendor build; the fix of this bug is not in the Mozilla codebase, but it's in our interest to track it.
* `[priority]`: Indicates we are asked by a partner to address this issue with priority.
* `[tarako_only]`: Special pref or feature that only lands on branch for Tarako (low memory phone), i.e. 1.3T branch of Gaia and Gecko. To be picked up on future releases.
* `[p=]/[u=]/[c=]/[s=]`: See [Scrum Development](/BMO/Whiteboard#Scrum_Development "BMO/Whiteboard"). Firefox OS uses the u= tag as the milestone instead, see [Firefox OS Performance Triage](/FirefoxOS/Performance/Triage#Scrumbugs_Tags "FirefoxOS/Performance/Triage")
* `[ft:<name of the team>]`, `[systemsfe]`, etc: Bugs identified to be owned by a "functional team" within B2G engineering. Each team owns a specific set of Bugzilla components, and tags are used to denote owned bugs outside of these components.

## Tor

* `[tor ###]` Part of the [Tor uplift project](/Security/Tor_Uplift/Tracking "Security/Tor Uplift/Tracking"). For example, `[tor 16620]` indicates a corresponding ticket at <https://trac.torproject.org/16620>. See also <https://torpat.ch/uplift>

## Web Compatibility

[Our whiteboard keywords](/Compatibility/BugsGuide "Compatibility/BugsGuide") are already described.

## Scrum Development

The following flags are used by tools like [scrumbu.gs](https://scrumbu.gs/help/) for managing sprints using the scrum development framework:

* `[p=]`: A rough estimate from engineer on how long the bug is going to take.
* `[u=]`: The user (in the scrum sense) that this story affects
* `[c=]`: The component (in the scrum sense) that this story affects
* `[s=]`: An explicit sprint slug this bug should belong to.

If you are not managing a product, you probably don't have to set these.

## What does this whiteboard keyword mean?

If you know what one of the following whiteboard keywords means, please describe it and put it into one of the above categories above (or create a new one):

* `[2.0-FL-bug-bash]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=1021384>)
* `[games]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=1017892>)
* `[reserve-photon-structure]` ([examples](https://bugzilla.mozilla.org/buglist.cgi?list_id=14108939&status_whiteboard_type=substring&status_whiteboard=%5Breserve-photon-structure%5D&order=Bug%20Number&query_format=advanced))
* `[TCP]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=920036>)
  + my guess: Tablet Contribution Program?

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/Whiteboard&oldid=1245932>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FWhiteboard "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/Whiteboard "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/Whiteboard&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/Whiteboard)
* [View source](/index.php?title=BMO/UserGuide/Whiteboard&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/Whiteboard&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/Whiteboard "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/Whiteboard "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/Whiteboard&oldid=1245932 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/Whiteboard&action=info "More information about this page")

* This page was last edited on 27 March 2023, at 15:08.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/Whiteboard&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)


