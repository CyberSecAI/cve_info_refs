=== Content from jira.mongodb.org_2e8795e6_20250121_005655.html ===


[Log in](/login.jsp?os_destination=%2Fbrowse%2FSERVER-43350)[Skip to main content](#main)[Skip to sidebar](#sidebar)[![MongoDB Jira](/s/-1w64q3/9160001/fy41z4/_/jira-logo-scaled.png)](https://jira.mongodb.org/secure/MyJiraHome.jspa)

* [Dashboards](/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/secure/BrowseProjects.jspa "View recent projects and browse a list of projects")
* [Issues](/issues/ "Search for issues and view recent issues")
* [eazyBI](/plugins/servlet/eazybi)

* Give feedback to Atlassian
* [Help](/secure/ViewKeyboardShortcuts%21default.jspa "Help")
  + [Keyboard Shortcuts](/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/login.jsp?os_destination=%2Fbrowse%2FSERVER-43350)
  + [Acknowledged notifications](/plugins/servlet/wittified/profile/notifications)

![Uploaded image for project: 'Core Server'](https://jira.mongodb.org/secure/projectavatar?pid=10000&avatarId=13900)

1. [Core Server](/browse/SERVER)
2. [SERVER-43350](/browse/SERVER-43350)

## The server crashes when trying to join collections ($ lookup with pipeline).

Schedule Issue[Undo Transition](/secure/UndoTransition%21default.jspa?id=929692)ClosedExportnullXMLWordPrintableJSON
### Details

* **Type:**
  ![Icon: Bug](/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.") Bug
* **Resolution:**
  Fixed
* **Priority:**
  ![Icon: Critical - P2](/images/icons/priorities/critical.svg "Critical - P2 - Crashes, loss of data, severe memory leak.") Critical - P2
* **Fix Version/s:**
  [3.6.15](/issues/?jql=project+%3D+SERVER+AND+fixVersion+%3D+3.6.15 "3.6.15 "), [4.0.13](/issues/?jql=project+%3D+SERVER+AND+fixVersion+%3D+4.0.13 "4.0.13 "), [4.2.1](/issues/?jql=project+%3D+SERVER+AND+fixVersion+%3D+4.2.1 "4.2.1 Stable"), [4.3.1](/issues/?jql=project+%3D+SERVER+AND+fixVersion+%3D+4.3.1 "4.3.1 ")
* **Affects Version/s:**
  3.6.14, 4.0.12, 4.2.0
* **Component/s:**
  [Usability](/issues/?jql=project+%3D+SERVER+AND+component+%3D+Usability "Usability ")
* **Labels:**
  None

* **Backwards Compatibility:**
  Fully Compatible
* **Operating System:**
  ALL
* **Backport Requested:**
  v4.2, v4.0, v3.6
* **Sprint:**
  Query 2019-10-07

### Description

**CVE-2019-2393**

**Title:** Crash while joining collections with $lookup

**Description:**

A user authorized to perform database queries may trigger denial of service by issuing specially crafted queries, which use $lookup and collations. This issue affects: MongoDB Inc. MongoDB Server v4.2 versions prior to 4.2.1; v4.0 versions prior to 4.0.13; v3.6 versions prior to 3.6.15.

**CVSS score:**

This issue's CVSS:3.1 severity is scored at 6.5 using the following scoring metrics:

CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H

**Affected versions:**

MongoDB Inc. MongoDB Server v4.2 versions prior to 4.2.1; v4.0 versions prior to 4.0.13; v3.6 versions prior to 3.6.15.

**CWE:** CWE-416: Use After Free

### Attachments

### Attachments

* Options
  + - [Sort By Name](/browse/SERVER-43350?attachmentSortBy=fileName#attachmentmodule "viewissue.subtasks.tab.show.all.name")
    - [Sort By Date](/browse/SERVER-43350?attachmentSortBy=dateTime#attachmentmodule "Sort By Date")
    - [Ascending](/browse/SERVER-43350?attachmentOrder=asc#attachmentmodule "Ascending")
    - [Descending](/browse/SERVER-43350?attachmentOrder=desc#attachmentmodule "Descending")
    - [Thumbnails](/browse/SERVER-43350?attachmentViewMode=gallery#attachmentmodule "Thumbnails")
    - [List](/browse/SERVER-43350?attachmentViewMode=list#attachmentmodule "List")
    - [Download All](/secure/attachmentzip/929692.zip "Download all attachments as a ZIP file")

1. [col info.txt](/secure/attachment/230929/col%20info.txt "col info.txt - Latest Sep 16 2019 07:39:41 PM UTC - Alexey Glukhov")2 kBSep 16 2019 07:39:41 PM UTC
2. [mongod.log](/secure/attachment/230913/mongod.log "mongod.log - Latest Sep 16 2019 05:50:19 PM UTC - Alexey Glukhov")758 kBSep 16 2019 05:50:19 PM UTC
### Activity

### People

Assignee:
![bernard.gorman@mongodb.com](https://jira.mongodb.org/secure/useravatar?size=small&avatarId=10122)
Bernard Gorman

Reporter:
![gluhovalexey@gmail.com](https://jira.mongodb.org/secure/useravatar?size=small&avatarId=10122)
Alexey Glukhov

Participants:

[Alexey Glukhov](/secure/IssueNavigator.jspa?reset=true&customfield_10051=gluhovalexey%40gmail.com "Find all issues Alexey Glukhov participated in"), [Bernard Gorman](/secure/IssueNavigator.jspa?reset=true&customfield_10051=bernard.gorman%40mongodb.com "Find all issues Bernard Gorman participated in"), [Danny Hatcher](/secure/IssueNavigator.jspa?reset=true&customfield_10051=daniel.hatcher%40mongodb.com "Find all issues Danny Hatcher participated in"), [Githook User](/secure/IssueNavigator.jspa?reset=true&customfield_10051=xgen-internal-githook "Find all issues Githook User participated in")

Votes:
0
Vote for this issue

Watchers:
8
Start watching this issue

### Dates

Created:

Sep 16 2019 05:15:02 PM UTC

Updated:

Oct 29 2023 10:17:10 PM UTC

Resolved:

Oct 02 2019 12:32:02 AM UTC

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for MongoDB. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)


