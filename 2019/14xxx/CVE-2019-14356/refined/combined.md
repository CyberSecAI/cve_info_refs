=== Content from blog.coinkite.com_dc4b83be_20250120_232905.html ===


[Blog](/)
[Careers](https://coinkite.com/careers)
[Contact](https://coinkite.com/contact)
[RSS](/feed.xml)
[Email Newsletter](https://substack.coinkite.com)
[Store](https://store.coinkite.com)

×
[Home](https://coinkite.com/)
[Blog](/)
[Careers](https://coinkite.com/careers)
[Contact](https://coinkite.com/contact)
[RSS](/feed.xml)
[Email Newsletter](https://substack.coinkite.com)
[Store](https://store.coinkite.com)

[← Back to posts](/)
# Possible Information Leak, Considered Unlikely

* Published Aug 7, 2019
* Categories: security

![Possible Information Leak, Considered Unlikely](/images/posts-img/cve-mitigated.png)

![Mitigations in v2.1.2](/images/posts-img/cve-mitigated.png)

# Possible Display Information Leak

On August 7th, Christian Reitter is announcing a possible side-channel
data leak as a vulnerability across all hardware wallets which use
OLED displays. At Coinkite, we’ve already mitigated it, even though
we feel strongly that it is not a legitimate issue. In our opinion,
it is both unproven (might not even work) and also completely
impractical—even if it could be made to work perfectly.

TL;DR: Long-shot vulnerability breathlessly announced, install the
[latest firmware (v2.1.2)](https://coldcardwallet.com/docs/upgrade)
to get our just-in-case mitigations.

## Background

We received an email earlier this year describing a possible issue
and telling us to keep it secret for months. The idea was that the
graphical display commonly used on hardware wallets, including the
Coinkite Coldcard, was leaking information over the USB power lines
about what it’s showing on the screen. Naturally enough, bright “ON”
pixels take more energy than “OFF” pixels.

Your attacker would have to install monitoring hardware into the
USB power source you use to power the Coldcard **during the initial
seed setup**. We don’t know how bulky that would be, but if you use
a trusted USB battery pack or AC adapter, you would be fine. If
you’re like me, your home or office has hundreds of AC adapters and
thousands of USB cables to choose from… Each of these would need
the mythical “hardware implant” installed beforehand to get a
chance to capture your seed the **one time** it is shown on screen.

**We challenged Christian for more specific details and a proof of
concept. He never really provided anything solid, just a few scope
captures of varying noise and no solid evidence that it directly
represented the screen contents.** Normally, we’d expect to see a
proof of concept demo, where he reconstructs the screen contents.
That would make for a good presentation!

(Aside: We don’t appreciate how he’s doxed our company emails to
others in the industry when he carelessly sends out bulk emails.)

## The Risks

But what do we show on screen that’s a secret? Not much.

When you first setup a Coldcard, the seed words are shown on screen
so you can write them down as a backup. That’s the only time this
private key material is shown to the user.

Each digit of the PIN is shown briefly as you enter the PIN so
that’s a hazard as well, but since there is no real-world implementation
of this information leak, we don’t know if that’s long enough
on screen to get a “good read” of the PIN digits.

## The Solution

Coldcard firmware version 2.1.2, [available for download
already,](https://coldcardwallet.com/docs/upgrade) has mitigations for
both those areas: when entering the PIN, your digits are no longer
echoed. Instead an X is shown, except if using a Mk1 device with
it’s fine touch interface—you need the echo as a feedback.

For the few moments of the Coldcard’s lifecycle where the seed words are
shown on screen, we’ve added masking noise along the right hand
side of the screen. Since we don’t have a working proof-of-concept,
it’s not possible to conclusively prove that this plugs the leak,
but we feel the large amount of random noise on each line will be
enough to swamp out any valid data that might be leaked on this
side channel.

In future hardware, we intend to improve USB power supply filtering
so that very little noise (or is it signal?) comes out of the
Coldcard. That’s a broader mitigation and would help if some other,
as yet unknown, information leak exists.

## Credits

We’d like to thank Christian for being responsible in his disclosure
of this issue, and it’s good we have researchers looking at these
things. We hope that disclosure of unproven/minor issues doesn’t
lead to fatigue or complacency in the community.

Christian applied for, and received `CVE-2019-14356` as a code number
for the Coldcard version of this issue. We are not involved in
that process with MITRE.

### Coldcard (Mark 2, second build) Available Now

Now with epoxy over the secure element!

 [Buy Coldcard Mk2](https://store.coinkite.com/store/ckcc2)

[@COLDCARDwallet](https://twitter.com/COLDCARDwallet)
[@SATSCARD](https://twitter.com/SATSCARD)
[@TAPSIGNER](https://twitter.com/TAPSIGNER)
[@SATSLINKdevice](https://twitter.com/SATSLINKdevice)
[@theBLOCKCLOCK](https://twitter.com/theBLOCKCLOCK)
[Video Tutorials](https://www.youtube.com/channel/UCqMPBcyg_wemgvC1jDI3EIw)

[@Coinkite](https://twitter.com/Coinkite)

Made with ![Made with heart by Coinkite](/images/heart.png) by Coinkite

[View store](https://store.coinkite.com/)

### Products

[Opendime](https://opendime.com)
[Speedplate](http://bitcoinseedbackup.com/)
[Blockclock](http://getblockclock.com)

### Support

[Responsible Disclosure](https://coinkite.com/responsible-disclosure)
[Terms of Use](https://coinkite.com/terms-of-use)
[White Paper](https://coinkite.com/bitcoin.pdf)

Copyright © 2024 Coinkite Inc. All rights reserved.
support@coinkite.com



=== Content from github.com_0e81b600_20250120_232907.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsomeone42%2Fhardware-bitcoin-wallet%2Fblob%2Fmaster%2Fpic32%2Fssd1306.c)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsomeone42%2Fhardware-bitcoin-wallet%2Fblob%2Fmaster%2Fpic32%2Fssd1306.c)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=someone42%2Fhardware-bitcoin-wallet)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[someone42](/someone42)
/
**[hardware-bitcoin-wallet](/someone42/hardware-bitcoin-wallet)**
Public

* [Notifications](/login?return_to=%2Fsomeone42%2Fhardware-bitcoin-wallet) You must be signed in to change notification settings
* [Fork
  44](/login?return_to=%2Fsomeone42%2Fhardware-bitcoin-wallet)
* [Star
   151](/login?return_to=%2Fsomeone42%2Fhardware-bitcoin-wallet)

* [Code](/someone42/hardware-bitcoin-wallet)
* [Issues
  20](/someone42/hardware-bitcoin-wallet/issues)
* [Pull requests
  2](/someone42/hardware-bitcoin-wallet/pulls)
* [Actions](/someone42/hardware-bitcoin-wallet/actions)
* [Projects
  0](/someone42/hardware-bitcoin-wallet/projects)
* [Wiki](/someone42/hardware-bitcoin-wallet/wiki)
* [Security](/someone42/hardware-bitcoin-wallet/security)
* [Insights](/someone42/hardware-bitcoin-wallet/pulse)

Additional navigation options

* [Code](/someone42/hardware-bitcoin-wallet)
* [Issues](/someone42/hardware-bitcoin-wallet/issues)
* [Pull requests](/someone42/hardware-bitcoin-wallet/pulls)
* [Actions](/someone42/hardware-bitcoin-wallet/actions)
* [Projects](/someone42/hardware-bitcoin-wallet/projects)
* [Wiki](/someone42/hardware-bitcoin-wallet/wiki)
* [Security](/someone42/hardware-bitcoin-wallet/security)
* [Insights](/someone42/hardware-bitcoin-wallet/pulse)

## Files

 master
## Breadcrumbs

1. [hardware-bitcoin-wallet](/someone42/hardware-bitcoin-wallet/tree/master)
2. /[pic32](/someone42/hardware-bitcoin-wallet/tree/master/pic32)
/
# ssd1306.c

Copy path Blame  Blame
## Latest commit

## History

[History](/someone42/hardware-bitcoin-wallet/commits/master/pic32/ssd1306.c)588 lines (556 loc) · 24.8 KB master
## Breadcrumbs

1. [hardware-bitcoin-wallet](/someone42/hardware-bitcoin-wallet/tree/master)
2. /[pic32](/someone42/hardware-bitcoin-wallet/tree/master/pic32)
/
# ssd1306.c

Top
## File metadata and controls

* Code
* Blame

588 lines (556 loc) · 24.8 KB[Raw](https://github.com/someone42/hardware-bitcoin-wallet/raw/refs/heads/master/pic32/ssd1306.c)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588/\*\* \file ssd1306.c \* \* \brief Interfaces with SSD1306-based OLED display using PIC32's GPIO. \* \* The SSD1306 controller controls a 128x64 monochrome graphical OLED \* display. The functions in this file deal with the software interfacing \* requirements and also implement a column-based text renderer. \* \* For details on hardware interfacing requirements, see \* configurePeripheralsForSSD1306(). For details on the renderer, see \* renderDisplay(). To use the functions in this file, first call \* initSSD1306() once. Then, clearDisplay(), nextLine(), \* writeStringToDisplay(), writeStringToDisplayWordWrap() etc. may be used \* to change the state of the display. Note that nothing will be displayed \* until the display is turned on using displayOn(). \* \* A lot of the interface requirements were obtained from the SSD1306 \* datasheet, obtained from http://www.adafruit.com/datasheets/SSD1306.pdf \* on 30-Apr-2012. \* \* This file is licensed as described by the file LICENCE. \*/
#include <stdint.h>#include <stdbool.h>#include <p32xxxx.h>#include "pic32\_system.h"
/\*\* Bit which specifies which pin (1 = RD0, 2 = RD1, 4 = RD2 etc.) on port D \* the OLED controller's chip select line is connected to. \*/#define OLED\_CS (1 << 6)/\*\* Bit which specifies which pin (1 = RD0, 2 = RD1, 4 = RD2 etc.) on port D \* the OLED controller's reset line is connected to. \*/#define OLED\_RES (1 << 5)/\*\* Bit which specifies which pin (1 = RD0, 2 = RD1, 4 = RD2 etc.) on port D \* the OLED controller's serial data is connected to. \*/#define OLED\_SDIN (1 << 3)/\*\* Bit which specifies which pin (1 = RD0, 2 = RD1, 4 = RD2 etc.) on port D \* the OLED controller's serial clock line is connected to. \*/#define OLED\_SCLK (1 << 1)
/\*\* Width of the display, in number of pixels. \*/#define DISPLAY\_WIDTH 128/\*\* Height of the display, in number of pixels. \* \warning This must be a multiple of 8. \*/#define DISPLAY\_HEIGHT 64/\*\* Width of a single character, in number of pixels. \*/#define CHARACTER\_WIDTH 8/\*\* Height of a single character, in number of pixels. This does not need to \* be a multiple of 8. \* \warning This must be >= 8. \*/#define CHARACTER\_HEIGHT 16/\*\* Maximum number of characters which can be on a line. \*/#define CHARACTERS\_PER\_LINE 16/\*\* Maximum number of lines on screen. \*/#define NUMBER\_OF\_LINES 4
/\*\* Number of bits (or equivalently, total pixels) in #font\_table that each \* character occupies. \*/#define CHARACTER\_BITS (CHARACTER\_WIDTH \* CHARACTER\_HEIGHT)
/\*\* The character encoding value that the font table begins at. Setting this \* to a non-zero value saves space by not having to store the bitmaps for \* unprintable characters. \*/#define FONT\_TABLE\_START 32/\*\* The character encoding value for a blank (all-zero bitmap) character. \*/#define FONT\_BLANK 32
/\*\* Packed, vertical, monochrome bitmaps for each character. \* \* The packed vertical bitmap can be interpreted as follows: imagine the font \* table as a single large little-endian multi-precision integer. Start \* with the least significant bit and move to more significant bits. The \* least significant bit represents the top-left pixel of the first glyph. \* For each increment in bit significance, move down to the next pixel. If \* you get to the bottom, move to the top of the next (towards the right) \* column. If you get to the bottom of the last column, move to the top-left \* pixel of the next glyph. \* \* Because of the way lookupFontTable() works, this table should have at \* least one extra 0 byte appended. \* \* Table generated from file "ter-u16b.bdf" using bdf\_converter. \* Font name: "-xos4-Terminus-Bold-R-Normal--16-160-72-72-C-80-ISO10646-1". \*/const uint8\_t font\_table[] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x0d, 0xfc, 0x0d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x0e, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x0e, 0x00, 0x00, 0x00,0x20, 0x01, 0xfc, 0x0f, 0xfc, 0x0f, 0x20, 0x01, 0xfc, 0x0f, 0xfc, 0x0f, 0x20, 0x01, 0x00, 0x00,0x70, 0x04, 0xf8, 0x0c, 0x88, 0x08, 0xfe, 0x3f, 0x88, 0x08, 0x98, 0x0f, 0x10, 0x07, 0x00, 0x00,0x08, 0x00, 0x1c, 0x0c, 0x14, 0x0f, 0xc8, 0x03, 0xf0, 0x04, 0x3c, 0x0a, 0x0c, 0x0e, 0x00, 0x04,0x80, 0x07, 0xd8, 0x0f, 0x7c, 0x08, 0xe4, 0x0c, 0xbc, 0x07, 0xd8, 0x0f, 0x40, 0x08, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0xf0, 0x03, 0xf8, 0x07, 0x0c, 0x0c, 0x04, 0x08, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x04, 0x08, 0x0c, 0x0c, 0xf8, 0x07, 0xf0, 0x03, 0x00, 0x00, 0x00, 0x00,0x80, 0x00, 0xa0, 0x02, 0xe0, 0x03, 0xc0, 0x01, 0xe0, 0x03, 0xa0, 0x02, 0x80, 0x00, 0x00, 0x00,0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0xe0, 0x03, 0xe0, 0x03, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x1c, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x0c, 0x00, 0x0f, 0xc0, 0x03, 0xf0, 0x00, 0x3c, 0x00, 0x0c, 0x00, 0x00, 0x00,0xf8, 0x07, 0xfc, 0x0f, 0x84, 0x09, 0xc4, 0x08, 0x64, 0x08, 0xfc, 0x0f, 0xf8, 0x07, 0x00, 0x00,0x00, 0x00, 0x10, 0x08, 0x18, 0x08, 0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x08, 0x00, 0x08, 0x00, 0x00,0x18, 0x0c, 0x1c, 0x0e, 0x04, 0x0b, 0x84, 0x09, 0xc4, 0x08, 0x7c, 0x08, 0x38, 0x08, 0x00, 0x00,0x18, 0x06, 0x1c, 0x0e, 0x44, 0x08, 0x44, 0x08, 0x44, 0x08, 0xfc, 0x0f, 0xb8, 0x07, 0x00, 0x00,0x80, 0x01, 0xc0, 0x01, 0x60, 0x01, 0x30, 0x01, 0x18, 0x01, 0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x00,0x7c, 0x04, 0x7c, 0x0c, 0x44, 0x08, 0x44, 0x08, 0x44, 0x08, 0xc4, 0x0f, 0x84, 0x07, 0x00, 0x00,0xf0, 0x07, 0xf8, 0x0f, 0x4c, 0x08, 0x44, 0x08, 0x44, 0x08, 0xc4, 0x0f, 0x80, 0x07, 0x00, 0x00,0x04, 0x00, 0x04, 0x00, 0x04, 0x0e, 0x84, 0x0f, 0xe4, 0x01, 0x7c, 0x00, 0x1c, 0x00, 0x00, 0x00,0xb8, 0x07, 0xfc, 0x0f, 0x44, 0x08, 0x44, 0x08, 0x44, 0x08, 0xfc, 0x0f, 0xb8, 0x07, 0x00, 0x00,0x78, 0x00, 0xfc, 0x08, 0x84, 0x08, 0x84, 0x08, 0x84, 0x0c, 0xfc, 0x07, 0xf8, 0x03, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x0c, 0x60, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x60, 0x1c, 0x60, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x80, 0x00, 0xc0, 0x01, 0x60, 0x03, 0x30, 0x06, 0x18, 0x0c, 0x08, 0x08, 0x00, 0x00,0x20, 0x01, 0x20, 0x01, 0x20, 0x01, 0x20, 0x01, 0x20, 0x01, 0x20, 0x01, 0x20, 0x01, 0x00, 0x00,0x00, 0x00, 0x08, 0x08, 0x18, 0x0c, 0x30, 0x06, 0x60, 0x03, 0xc0, 0x01, 0x80, 0x00, 0x00, 0x00,0x38, 0x00, 0x3c, 0x00, 0x04, 0x00, 0x84, 0x0d, 0xc4, 0x0d, 0x7c, 0x00, 0x38, 0x00, 0x00, 0x00,0xf8, 0x07, 0xfc, 0x0f, 0x04, 0x08, 0xe4, 0x09, 0x14, 0x0a, 0xfc, 0x0b, 0xf8, 0x0b, 0x00, 0x00,0xf8, 0x0f, 0xfc, 0x0f, 0x84, 0x00, 0x84, 0x00, 0x84, 0x00, 0xfc, 0x0f, 0xf8, 0x0f, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x44, 0x08, 0x44, 0x08, 0x44, 0x08, 0xfc, 0x0f, 0xb8, 0x07, 0x00, 0x00,0xf8, 0x07, 0xfc, 0x0f, 0x04, 0x08, 0x04, 0x08, 0x04, 0x08, 0x1c, 0x0e, 0x18, 0x06, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x04, 0x08, 0x04, 0x08, 0x0c, 0x0c, 0xf8, 0x07, 0xf0, 0x03, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x44, 0x08, 0x44, 0x08, 0x44, 0x08, 0x04, 0x08, 0x04, 0x08, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x44, 0x00, 0x44, 0x00, 0x44, 0x00, 0x04, 0x00, 0x04, 0x00, 0x00, 0x00,0xf8, 0x07, 0xfc, 0x0f, 0x04, 0x08, 0x84, 0x08, 0x84, 0x08, 0x9c, 0x0f, 0x98, 0x07, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x04, 0x08, 0xfc, 0x0f, 0xfc, 0x0f, 0x04, 0x08, 0x00, 0x00, 0x00, 0x00,0x00, 0x06, 0x00, 0x0e, 0x00, 0x08, 0x04, 0x08, 0xfc, 0x0f, 0xfc, 0x07, 0x04, 0x00, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0xc0, 0x00, 0xe0, 0x01, 0x30, 0x03, 0x1c, 0x0e, 0x0c, 0x0c, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0x00,0xfc, 0x0f, 0xf8, 0x0f, 0x30, 0x00, 0x60, 0x00, 0x30, 0x00, 0xf8, 0x0f, 0xfc, 0x0f, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x60, 0x00, 0xc0, 0x00, 0x80, 0x01, 0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x00,0xf8, 0x07, 0xfc, 0x0f, 0x04, 0x08, 0x04, 0x08, 0x04, 0x08, 0xfc, 0x0f, 0xf8, 0x07, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x84, 0x00, 0x84, 0x00, 0x84, 0x00, 0xfc, 0x00, 0x78, 0x00, 0x00, 0x00,0xf8, 0x07, 0xfc, 0x0f, 0x04, 0x08, 0x04, 0x0c, 0x04, 0x0c, 0xfc, 0x1f, 0xf8, 0x17, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x84, 0x01, 0x84, 0x03, 0x84, 0x06, 0xfc, 0x0c, 0x78, 0x08, 0x00, 0x00,0x38, 0x06, 0x7c, 0x0e, 0x44, 0x08, 0x44, 0x08, 0x44, 0x08, 0xcc, 0x0f, 0x88, 0x07, 0x00, 0x00,0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0xfc, 0x0f, 0xfc, 0x0f, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00,0xfc, 0x07, 0xfc, 0x0f, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0xfc, 0x0f, 0xfc, 0x07, 0x00, 0x00,0x7c, 0x00, 0xfc, 0x03, 0x80, 0x0f, 0x00, 0x0c, 0x80, 0x0f, 0xfc, 0x03, 0x7c, 0x00, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x07, 0x00, 0x03, 0x80, 0x01, 0x00, 0x03, 0xfc, 0x07, 0xfc, 0x0f, 0x00, 0x00,0x0c, 0x0c, 0x3c, 0x0f, 0xf0, 0x03, 0xc0, 0x00, 0xf0, 0x03, 0x3c, 0x0f, 0x0c, 0x0c, 0x00, 0x00,0x0c, 0x00, 0x3c, 0x00, 0x70, 0x00, 0xc0, 0x0f, 0xc0, 0x0f, 0x70, 0x00, 0x3c, 0x00, 0x0c, 0x00,0x04, 0x0e, 0x04, 0x0f, 0x84, 0x09, 0xc4, 0x08, 0x64, 0x08, 0x3c, 0x08, 0x1c, 0x08, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0xfc, 0x0f, 0xfc, 0x0f, 0x04, 0x08, 0x04, 0x08, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x0c, 0x00, 0x3c, 0x00, 0xf0, 0x00, 0xc0, 0x03, 0x00, 0x0f, 0x00, 0x0c, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x04, 0x08, 0x04, 0x08, 0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x08, 0x00, 0x0c, 0x00, 0x06, 0x00, 0x06, 0x00, 0x0c, 0x00, 0x08, 0x00, 0x00, 0x00,0x00, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x03, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x07, 0xa0, 0x0f, 0xa0, 0x08, 0xa0, 0x08, 0xa0, 0x08, 0xe0, 0x0f, 0xc0, 0x0f, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x20, 0x08, 0x20, 0x08, 0x20, 0x08, 0xe0, 0x0f, 0xc0, 0x07, 0x00, 0x00,0xc0, 0x07, 0xe0, 0x0f, 0x20, 0x08, 0x20, 0x08, 0x20, 0x08, 0x60, 0x0c, 0x40, 0x04, 0x00, 0x00,0xc0, 0x07, 0xe0, 0x0f, 0x20, 0x08, 0x20, 0x08, 0x20, 0x08, 0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x00,0xc0, 0x07, 0xe0, 0x0f, 0x20, 0x09, 0x20, 0x09, 0x20, 0x09, 0xe0, 0x09, 0xc0, 0x01, 0x00, 0x00,0x20, 0x00, 0x20, 0x00, 0xf8, 0x0f, 0xfc, 0x0f, 0x24, 0x00, 0x24, 0x00, 0x04, 0x00, 0x00, 0x00,0xc0, 0x07, 0xe0, 0x4f, 0x20, 0x48, 0x20, 0x48, 0x20, 0x48, 0xe0, 0x7f, 0xe0, 0x3f, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0xe0, 0x0f, 0xc0, 0x0f, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x20, 0x08, 0xec, 0x0f, 0xec, 0x0f, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x30, 0x00, 0x70, 0x00, 0x40, 0x20, 0x40, 0xec, 0x7f, 0xec, 0x3f, 0x00, 0x00,0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x01, 0x80, 0x03, 0xc0, 0x06, 0x60, 0x0c, 0x20, 0x08, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x04, 0x08, 0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00,0xe0, 0x0f, 0xe0, 0x0f, 0x20, 0x00, 0xe0, 0x0f, 0x20, 0x00, 0xe0, 0x0f, 0xc0, 0x0f, 0x00, 0x00,0xe0, 0x0f, 0xe0, 0x0f, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0xe0, 0x0f, 0xc0, 0x0f, 0x00, 0x00,0xc0, 0x07, 0xe0, 0x0f, 0x20, 0x08, 0x20, 0x08, 0x20, 0x08, 0xe0, 0x0f, 0xc0, 0x07, 0x00, 0x00,0xe0, 0x7f, 0xe0, 0x7f, 0x20, 0x08, 0x20, 0x08, 0x20, 0x08, 0xe0, 0x0f, 0xc0, 0x07, 0x00, 0x00,0xc0, 0x07, 0xe0, 0x0f, 0x20, 0x08, 0x20, 0x08, 0x20, 0x08, 0xe0, 0x7f, 0xe0, 0x7f, 0x00, 0x00,0xe0, 0x0f, 0xe0, 0x0f, 0xc0, 0x00, 0x60, 0x00, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0x00, 0x00,0xc0, 0x08, 0xe0, 0x09, 0x20, 0x09, 0x20, 0x09, 0x20, 0x09, 0x20, 0x0f, 0x20, 0x06, 0x00, 0x00,0x20, 0x00, 0x20, 0x00, 0xfc, 0x07, 0xfc, 0x0f, 0x20, 0x08, 0x20, 0x08, 0x00, 0x08, 0x00, 0x00,0xe0, 0x07, 0xe0, 0x0f, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0xe0, 0x0f, 0xe0, 0x0f, 0x00, 0x00,0xe0, 0x00, 0xe0, 0x03, 0x00, 0x0f, 0x00, 0x0c, 0x00, 0x0f, 0xe0, 0x03, 0xe0, 0x00, 0x00, 0x00,0xe0, 0x07, 0xe0, 0x0f, 0x00, 0x08, 0x80, 0x0f, 0x00, 0x08, 0xe0, 0x0f, 0xe0, 0x07, 0x00, 0x00,0x60, 0x0c, 0xe0, 0x0e, 0x80, 0x03, 0x00, 0x01, 0x80, 0x03, 0xe0, 0x0e, 0x60, 0x0c, 0x00, 0x00,0xe0, 0x07, 0xe0, 0x4f, 0x00, 0x48, 0x00, 0x48, 0x00, 0x48, 0xe0, 0x7f, 0xe0, 0x3f, 0x00, 0x00,0x20, 0x0c, 0x20, 0x0e, 0x20, 0x0b, 0xa0, 0x09, 0xe0, 0x08, 0x60, 0x08, 0x20, 0x08, 0x00, 0x00,0x00, 0x00, 0x40, 0x00, 0xf8, 0x07, 0xbc, 0x0f, 0x04, 0x08, 0x04, 0x08, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x0f, 0xfc, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x04, 0x08, 0x04, 0x08, 0xbc, 0x0f, 0xf8, 0x07, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00,0x0c, 0x00, 0x0e, 0x00, 0x02, 0x00, 0x06, 0x00, 0x0c, 0x00, 0x08, 0x00, 0x0e, 0x00, 0x06, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00};
/\*\* Character buffer, in row-major order, starting from the top-left. \* Characters should have their ASCII values written here. \* renderDisplay() will render the contents of this buffer to the display. \*/static uint8\_t text\_buffer[CHARACTERS\_PER\_LINE \* NUMBER\_OF\_LINES];/\*\* The line where the (hidden) cursor is at. 0 = topmost. This is also the \* line within #text\_buffer that writeStringToDisplay() will write to next. \*/static uint32\_t cursor\_line;/\*\* The position on the current line where the (hidden) cursor is at. \* 0 = leftmost. This is also the line offset within #text\_buffer that \* writeStringToDisplay() will write to next. \*/static uint32\_t cursor\_pos;
/\*\* See ssd1306\_bitbang.S. \*/extern void ssd1306BitBangOneFrame(volatile uint32\_t \*port, uint32\_t frame\_data, uint32\_t sclk\_pin, uint32\_t sdin\_pin);
/\*\* Configures PIC32 ports to interface with SSD1306. The chip select (CS#) \* line should be connected to the port specified by #OLED\_CS. Likewise for \* the reset (RES#) with #OLED\_RES, serial data (SDIN) with #OLED\_SDIN and \* serial clock (SCLK) with #OLED\_SCLK. \* \* The SSD1306 should have BS0 tied high. BS1 and BS2 should be tied low. \* This selects "3-wire SPI" mode on the SSD1306. All other input pins should \* be connected as directed on section 8.1 ("MCU Interface selection") of the \* SSD1306 datasheet. \*/static void configurePeripheralsForSSD1306(void){ // Set all OLED interface pins as normally high outputs. TRISDCLR = OLED\_CS | OLED\_RES | OLED\_SDIN | OLED\_SCLK; PORTDSET = OLED\_CS | OLED\_RES | OLED\_SDIN | OLED\_SCLK;}
/\*\* Write an 8 bit command or data to the SSD1306 by bit-banging GPIO. \* The PIC32's SPI module isn't used because it can't send 9 bit wide frames. \* \param is\_data This should be true if value is data, false if value \* is a command. \* \param value The command or data to write. \*/static void writeSPIByte(bool is\_data, uint8\_t value){ uint32\_t frame;
 frame = value; if (is\_data) { frame |= 0x100; } PORTDCLR = OLED\_CS; ssd1306BitBangOneFrame(&PORTD, frame, OLED\_SCLK, OLED\_SDIN); PORTDSET = OLED\_CS;}
/\*\* Turn display on. This must be called in order to have anything appear \* on the screen. \*/void displayOn(void){ writeSPIByte(false, 0xaf); // display on}
/\*\* Turn display off. This will cause the SSD1306 controller to enter a \* low power state. \*/void displayOff(void){ writeSPIByte(false, 0xae); // display off}
/\*\* Reset and initialise the SSD1306 display controller. This mostly follows \* Figure 2 ("Software Initialization Flow Chart") on page 64 of the \* SSD1306 datasheet. \* This does not turn the display on (displayOn() does that). This is so \* that display GDDRAM can be cleared. If the display is turned on \* immediately, undefined junk will appear on the display. \*/static void resetSSD1306(void){ // Section 8.9 ("Power ON and OFF sequence") on page 27 of the SSD1306 // datasheet covers the reset procedure. PORTDCLR = OLED\_RES; // RES# needs to be low for at least 3 microseconds. delayCycles(50 \* CYCLES\_PER\_MICROSECOND); // 50 microseconds just to be sure PORTDSET = OLED\_RES; displayOff(); writeSPIByte(false, 0xa8); // set multiplex ratio writeSPIByte(false, 0x3f); // multiplex ratio = 64MUX writeSPIByte(false, 0xd3); // set display offset writeSPIByte(false, 0x00); // display offset = 0 (no vertical shift) writeSPIByte(false, 0x40); // set display start line to 0 writeSPIByte(false, 0xa1); // set segment re-map to invert horizontally writeSPIByte(false, 0xc8); // set COM scan direction to invert vertically writeSPIByte(false, 0xda); // set COM pins hardware configuration writeSPIByte(false, 0x12); // COM pins hardware configuration = alternative, no left/right remap writeSPIByte(false, 0x81); // set contrast writeSPIByte(false, 0xbf); // contrast = 75% writeSPIByte(false, 0xa4); // disable entire display on writeSPIByte(false, 0xa6); // set normal display writeSPIByte(false, 0xd5); // set oscillator frequency writeSPIByte(false, 0x80); // oscillator frequency = default writeSPIByte(false, 0x8d); // set charge pump writeSPIByte(false, 0x14); // charge pump = on writeSPIByte(false, 0x20); // set memory addressing mode writeSPIByte(false, 0x01); // memory addressing mode = vertical}
/\*\* Clear the display and all associated buffers. \*/void clearDisplay(void){ uint32\_t i;
 for (i = 0; i < 1024; i++) { writeSPIByte(true, 0); } cursor\_line = 0; cursor\_pos = 0; memset(text\_buffer, FONT\_BLANK, sizeof(text\_buffer));}
/\*\* Set up everything so that the display is ready to start having text \* rendered on it. By default, this will not turn on the display; use \* displayOn() to do that. \*/void initSSD1306(void){ configurePeripheralsForSSD1306(); resetSSD1306(); clearDisplay();}
/\*\* Font table byte lookup function which has bit granularity. Alternatively, \* this can be thought of as treating the font table as a giant little-endian \* multi-precision integer, shifting it to the right bit\_offset times and \* returning the least significant byte. \* This does range checking of bit\_offset. \* \param bit\_offset The font table offset, in bits, to grab a byte from. \* \return A byte from within the font table. \*/static uint8\_t lookupFontTable(uint32\_t bit\_offset){ uint32\_t index; uint32\_t data;
 index = bit\_offset >> 3; if (index >= (sizeof(font\_table) - 1)) { return 0; // empty character } data = font\_table[index] | (font\_table[index + 1] << 8); return (uint8\_t)(data >> (bit\_offset & 7));}
/\*\* Text buffer query function. As well as obtaining a character from \* the text buffer, this also range checks its inputs and accounts \* for the font table not starting at 0 (see #FONT\_TABLE\_START). \* \param char\_x x location (0 = leftmost) of character to fetch. \* \param char\_y y location (0 = topmost) of character to fetch. \* \return The character at the specified location, with #FONT\_TABLE\_START \* subtracted off the character's value. \*/static uint8\_t lookupTextBuffer(uint32\_t char\_x, uint32\_t char\_y){ uint8\_t data;
 if ((char\_x >= CHARACTERS\_PER\_LINE) || (char\_y >= NUMBER\_OF\_LINES)) { // x or y out of range. return FONT\_BLANK - FONT\_TABLE\_START; // blank character } data = text\_buffer[CHARACTERS\_PER\_LINE \* char\_y + char\_x]; if (data < FONT\_TABLE\_START) { // Text buffer has a character which isn't in font table. return FONT\_BLANK - FONT\_TABLE\_START; // blank character } else { return data - FONT\_TABLE\_START; }}
/\*\* Using the contents of the text buffer (#text\_buffer) and the font \* in #font\_table, this outputs a series of data bytes to the SSD1306 \* display. \* \* Since the SSD1306 memory addressing mode is set to "vertical" by \* resetSSD1306(), this function renders in columns, 8 pixels at a time. \* The rendering loop starts at the top-left, moves downwards and when it \* hits the bottom of the current column, moves right to start at the top \* of the next column. Column-based rendering is done because the SSD1306's \* GDDRAM is column-based (each byte of data corresponds to an 8 pixel high \* column). \* \* In order for the renderer to work \* correctly, #DISPLAY\_WIDTH, #DISPLAY\_HEIGHT, #CHARACTER\_WIDTH \* and #CHARACTER\_HEIGHT must be set correctly. \* The renderer only supports monochrome, fixed-width fonts. \* However, the renderer can deal with fonts with a height which is not a \* multiple of 8. \* \* This renderer isn't very fast. But it doesn't need to be. With the SPI bus \* running at a bit rate of 1 Mhz, the renderer only needs to be able to \* write one byte every 384 cycles, which is a long time. \*/static void renderDisplay(void){ uint32\_t x; // 0 = left edge, positive = right uint32\_t y; // 0 = top edge, positive = down uint32\_t char\_x; // 0 = leftmost character, 1 = the one to the right of that etc. uint32\_t char\_y; // 0 = topmost character, 1 = the one below that etc. uint32\_t char\_x\_offset; // x offset within character uint32\_t char\_y\_offset; // y offset within character uint32\_t amount; // number of bits to use uint8\_t current\_character; uint8\_t next\_character; uint8\_t data; uint8\_t temp\_data;
 char\_x = 0; char\_x\_offset = 0; for (x = 0; x < DISPLAY\_WIDTH; x++) { // Render a column. char\_y = 0; char\_y\_offset = 0; // The next (i.e. one below) character needs to be fetched in advance // because the next 8 pixels may go across the current's character // height boundary. current\_character = lookupTextBuffer(char\_x, char\_y); next\_character = lookupTextBuffer(char\_x, char\_y + 1); for (y = 0; y < DISPLAY\_HEIGHT; y += 8) { if ((char\_y\_offset + 8) > CHARACTER\_HEIGHT) { // Byte goes across character height boundary. amount = CHARACTER\_HEIGHT - char\_y\_offset; } else { // Next byte resides entirely within current character. amount = 8; } data = lookupFontTable(current\_character \* CHARACTER\_BITS + char\_y\_offset + char\_x\_offset \* CHARACTER\_HEIGHT); data &= (1 << amount) - 1; if ((char\_y\_offset + 8) > CHARACTER\_HEIGHT) { // Need to fetch partial character column from next character. temp\_data = lookupFontTable(next\_character \* CHARACTER\_BITS + char\_x\_offset \* CHARACTER\_HEIGHT); data |= temp\_data << amount; } writeSPIByte(true, data); // Prepare for next byte. char\_y\_offset += 8; if (char\_y\_offset >= CHARACTER\_HEIGHT) { char\_y\_offset -= CHARACTER\_HEIGHT; char\_y++; current\_character = next\_character; next\_character = lookupTextBuffer(char\_x, char\_y + 1); } } // end for (y = 0; y < DISPLAY\_HEIGHT; y += 8) // Prepare for next column. char\_x\_offset++; if (char\_x\_offset >= CHARACTER\_WIDTH) { char\_x\_offset = 0; char\_x++; } } // end for (x = 0; x < DISPLAY\_WIDTH; x++)}
/\*\* Move cursor to the start of the next line, but only if the cursor is not \* already at the start of the current line. \*/void nextLine(void){ if (cursor\_pos != 0) { cursor\_line++; cursor\_pos = 0; }}
/\*\* Write one character to the text buffer (#text\_buffer). \* \param c The character to write. \*/static void writeCharacterToTextBuffer(char c){ if (cursor\_pos >= CHARACTERS\_PER\_LINE) { nextLine(); } if (cursor\_line < NUMBER\_OF\_LINES) { text\_buffer[cursor\_line \* CHARACTERS\_PER\_LINE + cursor\_pos] = c; cursor\_pos++; if (cursor\_pos >= CHARACTERS\_PER\_LINE) { nextLine(); } }}
/\*\* Write a string to the display, beginning from the cursor's current \* position. This does not do word wrapping. \* \param str The string to write. \*/void writeStringToDisplay(const char \*str){ char current\_char;
 do { current\_char = \*str; str++; if (current\_char != '\0') { writeCharacterToTextBuffer(current\_char); } } while (current\_char != '\0'); renderDisplay();}
/\*\* Get the length, in characters, of a word. \* \param str The null-terminated string with the word in it. \* \return The length of the word. \*/static uint32\_t getWordLength(const char \*str){ uint32\_t length;
 length = 0; while ((\*str != '\0') && (\*str != ' ')) { str++; length++; } return length;}
/\*\* Write a string to the display, beginning from the cursor's current \* position. This does do word wrapping. \* \param str The string to write. \*/void writeStringToDisplayWordWrap(const char \*str){ uint32\_t length; uint32\_t i;
 while (\*str != '\0') { length = getWordLength(str); if ((cursor\_pos + length) > CHARACTERS\_PER\_LINE) { // Need to word wrap. nextLine(); } for (i = 0; i < length; i++) { writeCharacterToTextBuffer(str[i]); } str += length; while (\*str == ' ') { str++; if (cursor\_pos != 0) { // A newline is equivalent to any number of spaces. writeCharacterToTextBuffer(' '); } } } renderDisplay();}
/\*\* Queries whether the cursor is at (or past) the end of the display. \* \return Whether the cursor is at (or past) the end. \*/bool displayCursorAtEnd(void){ if (cursor\_line >= NUMBER\_OF\_LINES) { return true; // cursor is past last line } else { if (cursor\_line == (NUMBER\_OF\_LINES - 1)) { if (cursor\_pos >= CHARACTERS\_PER\_LINE) { return true; // cursor is past end of last line } else { return false; } } else { return false; } }}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


