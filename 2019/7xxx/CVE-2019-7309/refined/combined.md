=== Content from sourceware.org_dc310f95_20250120_234912.html ===


Sourceware Bugzilla – Bug 24155
x32 memcmp can treat positive length as 0 (if sign bit in RDX is set) (CVE-2019-7309)
Last modified: 2019-02-04 20:44:46 UTC

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=24155&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=24155&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 24155**](show_bug.cgi?id=24155)
(CVE-2019-7309)
- x32 memcmp can treat positive length as 0 (if sign bit in RDX is set) (CVE-2019-7309)

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
x32 memcmp can treat positive length as 0 (if sign bit in RDX is set) (CVE-20...

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2019-7309 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | glibc | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=glibc "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | string ([show other bugs](buglist.cgi?component=string&product=glibc&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 2.30 | |  | | | [Importance](page.cgi?id=fields.html#importance): | P2 normal | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | 2.30 | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Not yet assigned to anyone | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2019-02-02 01:09 UTC by H.J. Lu | | --- | --- | | Modified: | 2019-02-04 20:44 UTC ([History](show_activity.cgi?id=24155)) | | CC List: | 1 user (show)  fweimer | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Host:](page.cgi?id=fields.html#cf_gcchost "A custom Free Text field in this installation of Bugzilla.") |  | | [Target:](page.cgi?id=fields.html#cf_gcctarget "A custom Free Text field in this installation of Bugzilla.") | x86-64 | | [Build:](page.cgi?id=fields.html#cf_gccbuild "A custom Free Text field in this installation of Bugzilla.") |  | | [Last reconfirmed:](page.cgi?id=fields.html#cf_reconfirmed_on "A custom Date/Time field in this installation of Bugzilla.") |  | |  | | | Flags: | fweimer: security+ | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=24155&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=24155&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=24155#c0)  H.J. Lu    2019-02-02 01:09:53 UTC  ``` sysdeps/x86_64/memcmp.S has  ENTRY (memcmp) 	test	%rdx, %rdx 	jz	L(finz) 	cmpq	$1, %rdx 	jle	L(finr1b) <<< signed Jcc 	subq	%rdi, %rsi 	movq	%rdx, %r10 	cmpq	$32, %r10 	jge	L(gt32) <<< signed Jcc  But size_t is unsigned. ```  [Comment 1](show_bug.cgi?id=24155#c1)  Florian Weimer    2019-02-02 15:43:16 UTC  ``` H.J. Lu reports:  “On x32, memcmp always returns 0 when the most significant bit of RDX is set since it treats size as 0, like memcmp (a, b, 0).“  On x86-64, it is not possible to reach this error condition with valid input. ```  [Comment 2](show_bug.cgi?id=24155#c2)  Sourceware Commits    2019-02-04 14:32:01 UTC  ``` This is an automated email from the git hooks/post-receive script. It was generated because a ref change was pushed to the repository containing the project "GNU C Library master sources".  The branch, master has been updated        via  3f635fb43389b54f682fc9ed2acc0b2aaf4a923d (commit)       from  2ab5741b8a96d02eb89e455b1971a19e7aef67bc (commit)  Those revisions listed above that are new to this repository have not appeared on any other notification email; so we list those revisions in full, below.  - Log ----------------------------------------------------------------- <https://sourceware.org/git/gitweb.cgi?p=glibc.git;h=3f635fb43389b54f682fc9ed2acc0b2aaf4a923d>  commit 3f635fb43389b54f682fc9ed2acc0b2aaf4a923d Author: H.J. Lu <hjl.tools@gmail.com> Date:   Mon Feb 4 06:31:01 2019 -0800      x86-64 memcmp: Use unsigned Jcc instructions on size [BZ #24155]          Since the size argument is unsigned. we should use unsigned Jcc     instructions, instead of signed, to check size.          Tested on x86-64 and x32, with and without --disable-multi-arch.          	[BZ #24155]     	CVE-2019-7309     	* NEWS: Updated for CVE-2019-7309.     	* sysdeps/x86_64/memcmp.S: Use RDX_LP for size.  Clear the     	upper 32 bits of RDX register for x32.  Use unsigned Jcc     	instructions, instead of signed.     	* sysdeps/x86_64/x32/Makefile (tests): Add tst-size_t-memcmp-2.     	* sysdeps/x86_64/x32/tst-size_t-memcmp-2.c: New test.  -----------------------------------------------------------------------  Summary of changes:  ChangeLog                                          |   11 +++++++++++  NEWS                                               |    8 +++++++-  sysdeps/x86_64/memcmp.S                            |   20 ++++++++++++--------  sysdeps/x86_64/x32/Makefile                        |    3 ++-  .../{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} |    7 +++++--  5 files changed, 37 insertions(+), 12 deletions(-)  copy sysdeps/x86_64/x32/{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} (92%) ```  [Comment 3](show_bug.cgi?id=24155#c3)  Sourceware Commits    2019-02-04 17:22:32 UTC  ``` This is an automated email from the git hooks/post-receive script. It was generated because a ref change was pushed to the repository containing the project "GNU C Library master sources".  The branch, release/2.28/master has been updated        via  9aaa083387fd1e19eb0bbd9f25444a5d5c91e210 (commit)       from  d09b11cbe57c6434813ead18ff128012230bb614 (commit)  Those revisions listed above that are new to this repository have not appeared on any other notification email; so we list those revisions in full, below.  - Log ----------------------------------------------------------------- <https://sourceware.org/git/gitweb.cgi?p=glibc.git;h=9aaa083387fd1e19eb0bbd9f25444a5d5c91e210>  commit 9aaa083387fd1e19eb0bbd9f25444a5d5c91e210 Author: H.J. Lu <hjl.tools@gmail.com> Date:   Mon Feb 4 08:55:52 2019 -0800      x86-64 memcmp: Use unsigned Jcc instructions on size [BZ #24155]          Since the size argument is unsigned. we should use unsigned Jcc     instructions, instead of signed, to check size.          Tested on x86-64 and x32, with and without --disable-multi-arch.          	[BZ #24155]     	CVE-2019-7309     	* NEWS: Updated for CVE-2019-7309.     	* sysdeps/x86_64/memcmp.S: Use RDX_LP for size.  Clear the     	upper 32 bits of RDX register for x32.  Use unsigned Jcc     	instructions, instead of signed.     	* sysdeps/x86_64/x32/Makefile (tests): Add tst-size_t-memcmp-2.     	* sysdeps/x86_64/x32/tst-size_t-memcmp-2.c: New test.          (cherry picked from commit 3f635fb43389b54f682fc9ed2acc0b2aaf4a923d)  -----------------------------------------------------------------------  Summary of changes:  ChangeLog                                          |   11 +++++++++++  NEWS                                               |    9 +++++++++  sysdeps/x86_64/memcmp.S                            |   20 ++++++++++++--------  sysdeps/x86_64/x32/Makefile                        |    3 ++-  .../{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} |    7 +++++--  5 files changed, 39 insertions(+), 11 deletions(-)  copy sysdeps/x86_64/x32/{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} (92%) ```  [Comment 4](show_bug.cgi?id=24155#c4)  Sourceware Commits    2019-02-04 18:24:26 UTC  ``` This is an automated email from the git hooks/post-receive script. It was generated because a ref change was pushed to the repository containing the project "GNU C Library master sources".  The branch, release/2.27/master has been updated        via  2ebadb6451eda1d518d70e26cf4ceeb0362e2456 (commit)       from  3a5ae8db6829d4c7f004fb1cda716f5ecfb3e97f (commit)  Those revisions listed above that are new to this repository have not appeared on any other notification email; so we list those revisions in full, below.  - Log ----------------------------------------------------------------- <https://sourceware.org/git/gitweb.cgi?p=glibc.git;h=2ebadb6451eda1d518d70e26cf4ceeb0362e2456>  commit 2ebadb6451eda1d518d70e26cf4ceeb0362e2456 Author: H.J. Lu <hjl.tools@gmail.com> Date:   Mon Feb 4 08:55:52 2019 -0800      x86-64 memcmp: Use unsigned Jcc instructions on size [BZ #24155]          Since the size argument is unsigned. we should use unsigned Jcc     instructions, instead of signed, to check size.          Tested on x86-64 and x32, with and without --disable-multi-arch.          	[BZ #24155]     	CVE-2019-7309     	* NEWS: Updated for CVE-2019-7309.     	* sysdeps/x86_64/memcmp.S: Use RDX_LP for size.  Clear the     	upper 32 bits of RDX register for x32.  Use unsigned Jcc     	instructions, instead of signed.     	* sysdeps/x86_64/x32/Makefile (tests): Add tst-size_t-memcmp-2.     	* sysdeps/x86_64/x32/tst-size_t-memcmp-2.c: New test.          (cherry picked from commit 3f635fb43389b54f682fc9ed2acc0b2aaf4a923d)  -----------------------------------------------------------------------  Summary of changes:  ChangeLog                                          |   11 +++++++++++  NEWS                                               |    9 +++++++++  sysdeps/x86_64/memcmp.S                            |   20 ++++++++++++--------  sysdeps/x86_64/x32/Makefile                        |    3 ++-  .../{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} |    7 +++++--  5 files changed, 39 insertions(+), 11 deletions(-)  copy sysdeps/x86_64/x32/{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} (92%) ```  [Comment 5](show_bug.cgi?id=24155#c5)  Sourceware Commits    2019-02-04 18:59:59 UTC  ``` This is an automated email from the git hooks/post-receive script. It was generated because a ref change was pushed to the repository containing the project "GNU C Library master sources".  The branch, release/2.26/master has been updated        via  04e767b59b16befce93c6086362acbc1fae63f4e (commit)       from  dc968f557398565d416dab69224f722c1d2beb9b (commit)  Those revisions listed above that are new to this repository have not appeared on any other notification email; so we list those revisions in full, below.  - Log ----------------------------------------------------------------- <https://sourceware.org/git/gitweb.cgi?p=glibc.git;h=04e767b59b16befce93c6086362acbc1fae63f4e>  commit 04e767b59b16befce93c6086362acbc1fae63f4e Author: H.J. Lu <hjl.tools@gmail.com> Date:   Mon Feb 4 08:55:52 2019 -0800      x86-64 memcmp: Use unsigned Jcc instructions on size [BZ #24155]          Since the size argument is unsigned. we should use unsigned Jcc     instructions, instead of signed, to check size.          Tested on x86-64 and x32, with and without --disable-multi-arch.          	[BZ #24155]     	CVE-2019-7309     	* NEWS: Updated for CVE-2019-7309.     	* sysdeps/x86_64/memcmp.S: Use RDX_LP for size.  Clear the     	upper 32 bits of RDX register for x32.  Use unsigned Jcc     	instructions, instead of signed.     	* sysdeps/x86_64/x32/Makefile (tests): Add tst-size_t-memcmp-2.     	* sysdeps/x86_64/x32/tst-size_t-memcmp-2.c: New test.          (cherry picked from commit 3f635fb43389b54f682fc9ed2acc0b2aaf4a923d)  -----------------------------------------------------------------------  Summary of changes:  ChangeLog                                          |   11 +++++++++++  NEWS                                               |   10 ++++++++++  sysdeps/x86_64/memcmp.S                            |   20 ++++++++++++--------  sysdeps/x86_64/x32/Makefile                        |    3 ++-  .../{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} |    7 +++++--  5 files changed, 40 insertions(+), 11 deletions(-)  copy sysdeps/x86_64/x32/{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} (92%) ```  [Comment 6](show_bug.cgi?id=24155#c6)  Sourceware Commits    2019-02-04 19:43:50 UTC  ``` This is an automated email from the git hooks/post-receive script. It was generated because a ref change was pushed to the repository containing the project "GNU C Library master sources".  The branch, release/2.25/master has been updated        via  2ad78b78d382c5e4bd805334617ac17f35ecff7e (commit)       from  f728a542bf8f9f30709f8d16a5cfceaa060956ce (commit)  Those revisions listed above that are new to this repository have not appeared on any other notification email; so we list those revisions in full, below.  - Log ----------------------------------------------------------------- <https://sourceware.org/git/gitweb.cgi?p=glibc.git;h=2ad78b78d382c5e4bd805334617ac17f35ecff7e>  commit 2ad78b78d382c5e4bd805334617ac17f35ecff7e Author: H.J. Lu <hjl.tools@gmail.com> Date:   Mon Feb 4 08:55:52 2019 -0800      x86-64 memcmp: Use unsigned Jcc instructions on size [BZ #24155]          Since the size argument is unsigned. we should use unsigned Jcc     instructions, instead of signed, to check size.          Tested on x86-64 and x32, with and without --disable-multi-arch.          	[BZ #24155]     	CVE-2019-7309     	* NEWS: Updated for CVE-2019-7309.     	* sysdeps/x86_64/memcmp.S: Use RDX_LP for size.  Clear the     	upper 32 bits of RDX register for x32.  Use unsigned Jcc     	instructions, instead of signed.     	* sysdeps/x86_64/x32/Makefile (tests): Add tst-size_t-memcmp-2.     	* sysdeps/x86_64/x32/tst-size_t-memcmp-2.c: New test.          (cherry picked from commit 3f635fb43389b54f682fc9ed2acc0b2aaf4a923d)  -----------------------------------------------------------------------  Summary of changes:  ChangeLog                                          |   11 +++++++++++  NEWS                                               |   10 ++++++++++  sysdeps/x86_64/memcmp.S                            |   20 ++++++++++++--------  sysdeps/x86_64/x32/Makefile                        |    3 ++-  .../{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} |    7 +++++--  5 files changed, 40 insertions(+), 11 deletions(-)  copy sysdeps/x86_64/x32/{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} (92%) ```  [Comment 7](show_bug.cgi?id=24155#c7)  Sourceware Commits    2019-02-04 20:27:52 UTC  ``` This is an automated email from the git hooks/post-receive script. It was generated because a ref change was pushed to the repository containing the project "GNU C Library master sources".  The branch, release/2.29/master has been updated        via  726a78867b3144e9b9da10197bcf59bde3d8b2a4 (commit)       from  86013ef5cea322b8f4b9c22f230c22cce369e947 (commit)  Those revisions listed above that are new to this repository have not appeared on any other notification email; so we list those revisions in full, below.  - Log ----------------------------------------------------------------- <https://sourceware.org/git/gitweb.cgi?p=glibc.git;h=726a78867b3144e9b9da10197bcf59bde3d8b2a4>  commit 726a78867b3144e9b9da10197bcf59bde3d8b2a4 Author: H.J. Lu <hjl.tools@gmail.com> Date:   Mon Feb 4 08:55:52 2019 -0800      x86-64 memcmp: Use unsigned Jcc instructions on size [BZ #24155]          Since the size argument is unsigned. we should use unsigned Jcc     instructions, instead of signed, to check size.          Tested on x86-64 and x32, with and without --disable-multi-arch.          	[BZ #24155]     	CVE-2019-7309     	* NEWS: Updated for CVE-2019-7309.     	* sysdeps/x86_64/memcmp.S: Use RDX_LP for size.  Clear the     	upper 32 bits of RDX register for x32.  Use unsigned Jcc     	instructions, instead of signed.     	* sysdeps/x86_64/x32/Makefile (tests): Add tst-size_t-memcmp-2.     	* sysdeps/x86_64/x32/tst-size_t-memcmp-2.c: New test.          (cherry picked from commit 3f635fb43389b54f682fc9ed2acc0b2aaf4a923d)  -----------------------------------------------------------------------  Summary of changes:  ChangeLog                                          |   11 +++++++++++  NEWS                                               |   17 +++++++++++++++++  sysdeps/x86_64/memcmp.S                            |   20 ++++++++++++--------  sysdeps/x86_64/x32/Makefile                        |    3 ++-  .../{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} |    7 +++++--  5 files changed, 47 insertions(+), 11 deletions(-)  copy sysdeps/x86_64/x32/{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} (92%) ```  [Comment 8](show_bug.cgi?id=24155#c8)  Sourceware Commits    2019-02-04 20:43:53 UTC  ``` This is an automated email from the git hooks/post-receive script. It was generated because a ref change was pushed to the repository containing the project "GNU C Library master sources".  The branch, release/2.24/master has been updated        via  9146dc9d73aba08cf3fc2613a3f946c219dd2a52 (commit)       from  fc4a25e8148f6aa1afd510a7d4dc57a4c597fb96 (commit)  Those revisions listed above that are new to this repository have not appeared on any other notification email; so we list those revisions in full, below.  - Log ----------------------------------------------------------------- <https://sourceware.org/git/gitweb.cgi?p=glibc.git;h=9146dc9d73aba08cf3fc2613a3f946c219dd2a52>  commit 9146dc9d73aba08cf3fc2613a3f946c219dd2a52 Author: H.J. Lu <hjl.tools@gmail.com> Date:   Mon Feb 4 08:55:52 2019 -0800      x86-64 memcmp: Use unsigned Jcc instructions on size [BZ #24155]          Since the size argument is unsigned. we should use unsigned Jcc     instructions, instead of signed, to check size.          Tested on x86-64 and x32, with and without --disable-multi-arch.          	[BZ #24155]     	CVE-2019-7309     	* NEWS: Updated for CVE-2019-7309.     	* sysdeps/x86_64/memcmp.S: Use RDX_LP for size.  Clear the     	upper 32 bits of RDX register for x32.  Use unsigned Jcc     	instructions, instead of signed.     	* sysdeps/x86_64/x32/Makefile (tests): Add tst-size_t-memcmp-2.     	* sysdeps/x86_64/x32/tst-size_t-memcmp-2.c: New test.          (cherry picked from commit 3f635fb43389b54f682fc9ed2acc0b2aaf4a923d)  -----------------------------------------------------------------------  Summary of changes:  ChangeLog                                          |   11 +++++++++++  NEWS                                               |   10 ++++++++++  sysdeps/x86_64/memcmp.S                            |   20 ++++++++++++--------  sysdeps/x86_64/x32/Makefile                        |    3 ++-  .../{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} |    7 +++++--  5 files changed, 40 insertions(+), 11 deletions(-)  copy sysdeps/x86_64/x32/{tst-size_t-memcmp.c => tst-size_t-memcmp-2.c} (92%) ```  [Comment 9](show_bug.cgi?id=24155#c9)  H.J. Lu    2019-02-04 20:44:46 UTC  ``` Fixed for 2.30 and backported to 2.24/2.25/2.26/2.27/2.28/2.29 release branches. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=24155)
* - [XML](show_bug.cgi?ctype=xml&id=24155)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=24155)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=24155&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=24155&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from sourceware.org_2657ea9f_20250120_234913.html ===


This is the mail archive of the
libc-alpha@sourceware.org
mailing list for the [glibc project](/glibc/).

---

| Index Nav: | [[Date Index](index.html#00041)] [[Subject Index](subjects.html#00041)] [[Author Index](authors.html#00041)] [[Thread Index](threads.html#00041)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00040.html)] [[Date Next](msg00042.html)] | [[Thread Prev](msg00040.html)] [[Thread Next](msg00053.html)] |
| Other format: | [[Raw text](/cgi-bin/get-raw-msg?listname=libc-alpha&date=2019-02&msgid=CAMe9rOq4O5Q1Wdm-TNRV1UYZdj0g6Xxv%2BpYNGDiMmbK7F6ByRg%40mail.gmail.com)] |

# Re: [PATCH] x86-64 memcmp: Use unsigned Jcc instructions on size

* *From*: "H.J. Lu" <hjl dot tools at gmail dot com>
* *To*: Florian Weimer <fweimer at redhat dot com>
* *Cc*: GNU C Library <libc-alpha at sourceware dot org>
* *Date*: Sat, 2 Feb 2019 07:39:50 -0800
* *Subject*: Re: [PATCH] x86-64 memcmp: Use unsigned Jcc instructions on size
* *References*: <[20190202142723.7730-1-hjl.tools@gmail.com](msg00035.html)> <[87munew85i.fsf@oldenburg2.str.redhat.com](msg00036.html)> <CAMe9rOpHiDQ+m0JUbr7FYncj=ZfAAyKesG6df+-AK0BLeiphrg@mail.gmail.com> <[875zu2w6hl.fsf@oldenburg2.str.redhat.com](msg00040.html)>

---

```
On Sat, Feb 2, 2019 at 7:32 AM Florian Weimer <fweimer@redhat.com> wrote:
>
> * H. J. Lu:
>
> > On Sat, Feb 2, 2019 at 6:57 AM Florian Weimer <fweimer@redhat.com> wrote:
> >>
> >> * H. J. Lu:
> >>
> >> > Since the size argument is unsigned. we should use unsigned Jcc
> >> > instructions, instead of signed to check size.
> >> >
> >> > Tested on x86-64 and x32, with and without --disable-multi-arch.
> >>
> >> Does this impact x86-64 at all (technically), consider that an object
> >> size larger than SSIZE_MAX would be undefined anyway?
> >
> > I don't think we will hit it on x86-64.
> >
> >> It seems that on x32, it can give incorrect results if the sign bit on
> >> the 64-bit register is set.  In this sense, it is similar to
> >> CVE-2019-6488 in impact, right?  If we decide to treat this as a
> >
> > For x32, there is no invalid memory access.  It just gives the wrong
> > result.
>
> Well, that could be problematic as well.
>
> Does the comparison stop early, only checking a prefix?

On x32, memcmp always returns 0 when the most significant bit of RDX is set
since it treats size as 0, like memcmp (a, b, 0).

> >> security vulnerability, we need a new CVE ID because the version range
> >> is different (bug 24155 was not fixed in the 2.29 release).
> >>
> >
> > Since the wrong result from memcmp may lead to security vulnerability, we
> > should apply for CVE.
>
> Sure, I'll take care of it.
>

Thanks.

--
H.J.

```

---

* **Follow-Ups**:
  + **[Re: [PATCH] x86-64 memcmp: Use unsigned Jcc instructions on size](msg00053.html)**
    - *From:* Florian Weimer

* **References**:
  + **[[PATCH] x86-64 memcmp: Use unsigned Jcc instructions on size](msg00035.html)**
    - *From:* H.J. Lu
  + **[Re: [PATCH] x86-64 memcmp: Use unsigned Jcc instructions on size](msg00036.html)**
    - *From:* Florian Weimer
  + **[Re: [PATCH] x86-64 memcmp: Use unsigned Jcc instructions on size](msg00037.html)**
    - *From:* H.J. Lu
  + **[Re: [PATCH] x86-64 memcmp: Use unsigned Jcc instructions on size](msg00040.html)**
    - *From:* Florian Weimer

| Index Nav: | [[Date Index](index.html#00041)] [[Subject Index](subjects.html#00041)] [[Author Index](authors.html#00041)] [[Thread Index](threads.html#00041)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00040.html)] [[Date Next](msg00042.html)] | [[Thread Prev](msg00040.html)] [[Thread Next](msg00053.html)] |



=== Content from security.gentoo.org_bf25361e_20250120_234910.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# glibc: Multiple vulnerabilities — GLSA **202006-04**

Multiple vulnerabilities have been found in glibc, the worst of
which could result in a Denial of Service condition.

### Affected packages

| Package | **sys-libs/glibc** on all architectures |
| --- | --- |
| Affected versions | < **2.30-r8** |
| Unaffected versions | >= **2.30-r8** |

### Background

glibc is a package that contains the GNU C library.

### Description

Multiple vulnerabilities have been discovered in glibc. Please review
the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All glibc users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=sys-libs/glibc-2.30-r8"

```
### References

* [CVE-2019-6488](https://nvd.nist.gov/vuln/detail/CVE-2019-6488)
* [CVE-2019-7309](https://nvd.nist.gov/vuln/detail/CVE-2019-7309)
* [CVE-2019-9169](https://nvd.nist.gov/vuln/detail/CVE-2019-9169)
* [CVE-2020-10029](https://nvd.nist.gov/vuln/detail/CVE-2020-10029)
* [CVE-2020-1751](https://nvd.nist.gov/vuln/detail/CVE-2020-1751)

**Release date**

June 13, 2020

**Latest revision**

June 13, 2020: 1

**Severity**

normal

**Exploitable**

local, remote

**Bugzilla entries**

* [677272](https://bugs.gentoo.org/show_bug.cgi?id=677272)
* [679044](https://bugs.gentoo.org/show_bug.cgi?id=679044)
* [711558](https://bugs.gentoo.org/show_bug.cgi?id=711558)
* [717938](https://bugs.gentoo.org/show_bug.cgi?id=717938)
* [719472](https://bugs.gentoo.org/show_bug.cgi?id=719472)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**


