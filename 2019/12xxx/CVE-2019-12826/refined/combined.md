=== Content from plugins.trac.wordpress.org_f8d5ced2_20250120_235301.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F2112753%2Fwidget-logic)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/1881403/widget-logic "Changeset 1881403 for widget-logic")
* [Next Change](/changeset/2115506/widget-logic "Changeset 2115506 for widget-logic") →

---

# Changeset [2112753](/changeset/2112753 "Show full changeset") for [widget-logic](/browser/widget-logic?rev=2112753 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/26/2019 12:20:00 PM
([6 years](/timeline?from=2019-06-26T12%3A20%3A00Z&precision=second "See timeline at 06/26/2019 12:20:00 PM") ago)

Author:
wpchefgadget
Message:

Version 5.10.2

Location:
[widget-logic](/browser/widget-logic?rev=2112753)
Files:

17 added
2 deleted
3 edited

* [assets/screenshot-1.png](/browser/widget-logic/assets/screenshot-1.png?rev=2112753 "Show entry in browser")
  (added)
* [assets/screenshot-2.png](/browser/widget-logic/assets/screenshot-2.png?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2](/browser/widget-logic/tags/5.10.2?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages](/browser/widget-logic/tags/5.10.2/languages?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-de\_DE.mo](/browser/widget-logic/tags/5.10.2/languages/widget-logic-de_DE.mo?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-de\_DE.po](/browser/widget-logic/tags/5.10.2/languages/widget-logic-de_DE.po?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-es\_ES.mo](/browser/widget-logic/tags/5.10.2/languages/widget-logic-es_ES.mo?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-es\_ES.po](/browser/widget-logic/tags/5.10.2/languages/widget-logic-es_ES.po?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-hu\_HU.mo](/browser/widget-logic/tags/5.10.2/languages/widget-logic-hu_HU.mo?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-hu\_HU.po](/browser/widget-logic/tags/5.10.2/languages/widget-logic-hu_HU.po?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-pt\_BR.mo](/browser/widget-logic/tags/5.10.2/languages/widget-logic-pt_BR.mo?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-pt\_BR.po](/browser/widget-logic/tags/5.10.2/languages/widget-logic-pt_BR.po?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-uk.mo](/browser/widget-logic/tags/5.10.2/languages/widget-logic-uk.mo?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic-uk.po](/browser/widget-logic/tags/5.10.2/languages/widget-logic-uk.po?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/languages/widget-logic.pot](/browser/widget-logic/tags/5.10.2/languages/widget-logic.pot?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/readme.txt](/browser/widget-logic/tags/5.10.2/readme.txt?rev=2112753 "Show entry in browser")
  (added)
* [tags/5.10.2/widget\_logic.php](/browser/widget-logic/tags/5.10.2/widget_logic.php?rev=2112753 "Show entry in browser")
  (added)
* [trunk](/browser/widget-logic/trunk?rev=2112753 "Show entry in browser")
  (modified)
  ([1 prop](#file17 "Show differences"))
* [trunk/readme.txt](/browser/widget-logic/trunk/readme.txt?rev=2112753 "Show entry in browser")
  (modified)
  ([5 diffs](#file18 "Show differences"))
* [trunk/screenshot-1.png](/browser/widget-logic/trunk/screenshot-1.png?rev=955604 "Show what was removed (content at revision 2112752)")
  (deleted)
* [trunk/screenshot-2.png](/browser/widget-logic/trunk/screenshot-2.png?rev=955604 "Show what was removed (content at revision 2112752)")
  (deleted)
* [trunk/widget\_logic.php](/browser/widget-logic/trunk/widget_logic.php?rev=2112753 "Show entry in browser")
  (modified)
  ([10 diffs](#file21 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [widget-logic/trunk](/changeset/2112753/widget-logic/trunk "Show the changeset 2112753 restricted to widget-logic/trunk")

  + Property
    **svn:ignore**
    set to

    \*.git
    README.md
* ## [widget-logic/trunk/readme.txt](/changeset/2112753/widget-logic/trunk/readme.txt "Show the changeset 2112753 restricted to widget-logic/trunk/readme.txt")

  | [r1881403](/browser/widget-logic/trunk/readme.txt?rev=1881403#L1 "Show revision 1881403 of this file in browser") | [r2112753](/browser/widget-logic/trunk/readme.txt?rev=2112753#L1 "Show revision 2112753 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Widget Logic === |
  | 2 |  | Contributors: wpchefgadget, alanft |
  | 3 |  | Donate link: http://www.justgiving.com/widgetlogic\_cancerresearchuk |
  | 4 |  | Tags: widget, admin, conditional tags, filter, context |
  |  | 2 | Contributors: wpchefgadget |
  |  | 3 | Tags: widget, sidebar, content, conditional tags, toggle |
  | 5 | 4 | Requires at least: 3.0 |
  | 6 |  | Tested up to: 4.9.6 |
  | 7 |  | Stable tag: 5.9.0 |
  | 8 |  | License: GPLv2 or later |
  | 9 |  |  |
  | 10 |  | Widget Logic lets you control on which pages widgets appear using WP's conditional tags. It also adds a 'widget\_content' filter. |
  |  | 5 | Tested up to: 5.2.2 |
  |  | 6 | Stable tag: 5.10.2 |
  |  | 7 |  |
  |  | 8 | Widget Logic lets you control on which pages widgets appear using WP's conditional tags. |
  | 11 | 9 |  |
  | 12 | 10 | == Description == |
  | […](/browser/widget-logic/trunk/readme.txt?rev=1881403#L15) | […](/browser/widget-logic/trunk/readme.txt?rev=2112753#L13) |  |
  | 15 | 13 | PLEASE NOTE The widget logic you introduce is EVAL'd directly. Anyone who has access to edit widget appearance will have the right to add any code, including malicious and possibly destructive functions. There is an optional filter 'widget\_logic\_eval\_override' which you can use to bypass the EVAL with your own code if needed. (See [Other Notes](other\_notes/)). |
  | 16 | 14 |  |
  | 17 |  | There is also an option to add a wordpress 'widget\_content' filter -- this lets you tweak any widget's HTML to suit your theme without editing plugins and core code. |
  | 18 |  |  |
  | 19 |  | = GDPR Compliance = |
  | 20 |  |  |
  | 21 |  | The plugin doesn't store or manipulate any personal user data like names, emails, physical addresses, IP addresses, etc. If you use it in such a way where you try to obtain such personal data you must explicitly notify the users about what steps you perform to comply with the GDPR. |
  | 22 |  |  |
  | 23 |  | = Donations = |
  | 24 |  |  |
  | 25 |  | If you like and use Widget Logic you could consider a small [donation](https://www.paypal.com/cgi-bin/webscr?cmd=\_donations&business=hostingppcom@gmail.com |
  | 26 |  | &item\_name=Widget+Logic+development+and+support). |
  | 27 |  |  |
  | 28 |  | == Installation == |
  | 29 |  |  |
  | 30 |  | 1. Upload `widget-logic.php` to the `/wp-content/plugins/` directory |
  | 31 |  | 2. Activate the plugin through the 'Plugins' menu in WordPress |
  | 32 |  | 3. That's it. The configuring and options are in the usual widget admin interface. |
  |  | 15 | The configuring and options are in the usual widget admin interface. |
  | 33 | 16 |  |
  | 34 | 17 | = Configuration = |
  | 35 | 18 |  |
  | 36 | 19 | Aside from logic against your widgets, there are three options added to the foot of the widget admin page (see screenshots). |
  | 37 |  |  |
  | 38 |  | ~~\* Add 'widget\_content' filter -- This allows you to modify the text output in all widgets. You need to know how to write a WP filter, though some basics are covered in [Other Notes](../other\_notes/).~~ |
  | 39 | 20 |  |
  | 40 | 21 | \* Use 'wp\_reset\_query' fix -- Many features of WP, as well as the many themes and plugins out there, can mess with the conditional tags, such that is\_home is NOT true on the home page. This can often be fixed with a quick wp\_reset\_query() statement just before the widgets are called, and this option puts that in for you rather than having to resort to code editing |
  | […](/browser/widget-logic/trunk/readme.txt?rev=1881403#L52) | […](/browser/widget-logic/trunk/readme.txt?rev=2112753#L33) |  |
  | 52 | 33 | == Frequently Asked Questions == |
  | 53 | 34 |  |
  | 54 |  | ~~= I upgraded to Version 5.7.0 and my site's widgets now behave differently =~~ |
  | 55 |  |  |
  | 56 |  | ~~There was an important change to how your Widget Logic code is evaluated. There is a new default 'Load logic' point of 'after query variables set'. For most people this should be better, but you could try reverting to the old default 'when plugin starts'.~~ |
  | 57 |  |  |
  | 58 | 35 | = What can I try if it's not working? = |
  | 59 | 36 |  |
  | […](/browser/widget-logic/trunk/readme.txt?rev=1881403#L121) | […](/browser/widget-logic/trunk/readme.txt?rev=2112753#L98) |  |
  | 121 | 98 |  |
  | 122 | 99 | 1. The 'Widget logic' field at work in standard widgets. |
  | 123 |  | 2. The plugin options are at the foot of the usual widget admin page… `w~~idget\_content` filter, `w~~p\_reset\_query` option, 'load logic point' and 'evaluate more than once'. You can also export and import your site's WL options as a plain text file for a quick backup/restore and to help troubleshoot issues. |
  |  | 100 | 2. The plugin options are at the foot of the usual widget admin page… `wp\_reset\_query` option, 'load logic point' and 'evaluate more than once'. You can also export and import your site's WL options as a plain text file for a quick backup/restore and to help troubleshoot issues. |
  | 124 | 101 |  |
  | 125 | 102 | == Changelog == |
  |  | 103 |  |
  |  | 104 | = 5.10.2 = |
  |  | 105 |  |
  |  | 106 | \* The plugin's security has been improved, big thanks to [Paul Dannewitz](https://dannewitz.ninja/) for his excellent security audit! |
  |  | 107 | \* The widget\_content filter option has been removed from the settings block, but kept in the code for backward compatibility. The plan is to remove it completely and make the plugin simpler (let us know what you think). |
  |  | 108 | \* Code cleanup. |
  | 126 | 109 |  |
  | 127 | 110 | = 5.9.0 = |
  | […](/browser/widget-logic/trunk/readme.txt?rev=1881403#L277) | […](/browser/widget-logic/trunk/readme.txt?rev=2112753#L260) |  |
  | 277 | 260 | == The 'widget\_logic\_eval\_override' filter == |
  | 278 | 261 | Before the Widget Logic code is evaluated for each widget, the text of the Widget Logic code is passed through this filter. If the filter returns a BOOLEAN result, this is used instead to determine if the widget is visible. Return TRUE for visible. |
  | 279 |  |  |
  | 280 |  | ~~== The 'widget\_content' filter ==~~ |
  | 281 |  |  |
  | 282 |  | ~~When this option is active (tick the option tickbox at the foot of the widget admin page) you can modify the text displayed by ANY widget from your own theme's functions.php file. Hook into the filter with:~~ |
  | 283 |  |  |
  | 284 |  | ~~`add\_filter('widget\_content', 'your\_filter\_function', [priority], 2);`~~ |
  | 285 |  |  |
  | 286 |  | ~~where `[priority]` is the optional priority parameter for the [add\_filter](http://codex.wordpress.org/Function\_Reference/add\_filter) function. The filter function can take a second parameter (if you provde that last parameter '2') like this:~~ |
  | 287 |  |  |
  | 288 |  | ~~`function your\_filter\_function($content='', $widget\_id='')`~~ |
  | 289 |  |  |
  | 290 |  | ~~The second parameter ($widget\_id) can be used to target specific widgets if needed.~~ |
  | 291 |  |  |
  | 292 |  | ~~A [Wordpress filter function](http://codex.wordpress.org/Plugin\_API#Filters) 'takes as input the unmodified data, and returns modified data' which means that widget\_content filters are provided with the raw HTML output by the widget, and you are then free to return something else entirely:~~ |
  | 293 |  |  |
  | 294 |  | ~~= Example filters =~~ |
  | 295 |  |  |
  | 296 |  | ~~`add\_filter('widget\_content', 'basic\_widget\_content\_filter');~~ |
  | 297 |  | ~~function basic\_widget\_content\_filter($content='')~~ |
  | 298 |  | ~~{   return $content."<PRE>THIS APPEARS AFTER EVERY WIDGET</PRE>";~~ |
  | 299 |  | ~~}`~~ |
  | 300 |  |  |
  | 301 |  | ~~I was motivated to make this filter in order to render all widget titles with the excellent [ttftitles plugin](http://templature.com/2007/10/18/ttftitles-wordpress-plugin/) like this:~~ |
  | 302 |  |  |
  | 303 |  | ~~`add\_filter('widget\_content', 'ttftext\_widget\_title');~~ |
  | 304 |  | ~~function ttftext\_widget\_title($content='')~~ |
  | 305 |  | ~~{   preg\_match("/<h2[^>]\*>([^<]+)/",$content, $matches);~~ |
  | 306 |  | ~~$heading=$matches[1];~~ |
  | 307 |  | ~~$insert\_img=the\_ttftext( $heading, false );~~ |
  | 308 |  | ~~$content=preg\_replace("/(<h2[^>]\*>)[^<]+/","$1$insert\_img",$content,1);~~ |
  | 309 |  | ~~return $content;~~ |
  | 310 |  | ~~}`~~ |
  | 311 |  |  |
  | 312 |  | ~~People often ask for a way to give widgets alternating styles. This filter inserts widget\_style\_a/widget\_style\_b into the class="widget ..." text usually found in a widget's main definition:~~ |
  | 313 |  |  |
  | 314 |  | ~~`add\_filter('widget\_content', 'make\_alternating\_widget\_styles');~~ |
  | 315 |  | ~~function make\_alternating\_widget\_styles($content='')~~ |
  | 316 |  | ~~{   global $wl\_make\_alt\_ws;~~ |
  | 317 |  | ~~$wl\_make\_alt\_ws=($wl\_make\_alt\_ws=="style\_a")?"style\_b":"style\_a";~~ |
  | 318 |  | ~~return preg\_replace('/(class="widget )/', "$1 widget\_${wl\_make\_alt\_ws} ", $content);~~ |
  | 319 |  | ~~}`~~ |
* ## [widget-logic/trunk/widget\_logic.php](/changeset/2112753/widget-logic/trunk/widget_logic.php "Show the changeset 2112753 restricted to widget-logic/trunk/widget_logic.php")

  | [r1765844](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L1 "Show revision 1765844 of this file in browser") | [r2112753](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L1 "Show revision 2112753 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\* |
  | 3 |  | Plugin Name:    Widget Logic |
  | 4 |  | Plugin URI:     http://wordpress.org/extend/plugins/widget-logic/ |
  | 5 |  | Description:    Control widgets with WP's conditional tags is\_home etc |
  | 6 |  | Version:        5.9.0 |
  | 7 |  | Author:         wpchefgadget, alanft |
  | 8 |  |  |
  | 9 |  | Text Domain:   widget-logic |
  | 10 |  | Domain Path:   /languages/ |
  |  | 3 | Plugin Name: Widget Logic |
  |  | 4 | Author URI:  https://wpchef.org |
  |  | 5 | Description: Control widgets with WP's conditional tags is\_home etc |
  |  | 6 | Version:     5.10.2 |
  |  | 7 | Author:      WPChef |
  |  | 8 | Text Domain: widget-logic |
  | 11 | 9 | \*/ |
  | 12 |  |  |
  | 13 |  | ~~DEFINE( 'WIDGET\_LOGIC\_VERSION', '5.7.0' );~~ |
  | 14 |  |  |
  | 15 |  | ~~register\_activation\_hook( \_\_FILE\_\_, 'widget\_logic\_activate' );~~ |
  | 16 |  |  |
  | 17 |  | ~~function widget\_logic\_activate()~~ |
  | 18 |  | ~~{~~ |
  | 19 |  | ~~$alert = (array)get\_option( 'wpchefgadget\_alert', array() );~~ |
  | 20 |  | ~~if ( get\_option('widget\_logic\_version') !=  WIDGET\_LOGIC\_VERSION && !empty( $alert['limit-login-attempts'] ) )~~ |
  | 21 |  | ~~{~~ |
  | 22 |  | ~~unset( $alert['limit-login-attempts'] );~~ |
  | 23 |  | ~~add\_option( 'wpchefgadget\_alert', $alert, '', 'no' );~~ |
  | 24 |  | ~~update\_option( 'wpchefgadget\_alert', $alert );~~ |
  | 25 |  | ~~}~~ |
  | 26 |  | ~~add\_option( 'widget\_logic\_version', WIDGET\_LOGIC\_VERSION, '', 'no' );~~ |
  | 27 |  | ~~update\_option( 'widget\_logic\_version', WIDGET\_LOGIC\_VERSION );~~ |
  | 28 |  | ~~}~~ |
  | 29 | 10 |  |
  | 30 | 11 | $plugin\_dir = basename(dirname(\_\_FILE\_\_)); |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L37) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L18) |  |
  | 37 | 18 | { |
  | 38 | 19 | load\_plugin\_textdomain( 'widget-logic', false, dirname( plugin\_basename( \_\_FILE\_\_ ) ) . '/languages/' ); |
  | 39 |  |  |
  | 40 |  | ~~/\*~~ |
  | 41 |  | ~~if ( is\_admin() )~~ |
  | 42 |  | ~~{~~ |
  | 43 |  | ~~if ( get\_option('widget\_logic\_version') != WIDGET\_LOGIC\_VERSION )~~ |
  | 44 |  | ~~widget\_logic\_activate();~~ |
  | 45 |  |  |
  | 46 |  | ~~global $wp\_version;~~ |
  | 47 |  | ~~if ( version\_compare( $wp\_version, '4.2', '>=' ) && !file\_exists(WP\_PLUGIN\_DIR.'/limit-login-attempts-reloaded') && current\_user\_can('install\_plugins')  )~~ |
  | 48 |  | ~~{~~ |
  | 49 |  | ~~$alert = (array)get\_option( 'wpchefgadget\_alert', array() );~~ |
  | 50 |  | ~~if ( empty( $alert['limit-login-attempts'] ) )~~ |
  | 51 |  | ~~{~~ |
  | 52 |  | ~~add\_action( 'admin\_notices', 'widget\_logic\_alert');~~ |
  | 53 |  | ~~add\_action( 'network\_admin\_notices', 'widget\_logic\_alert');~~ |
  | 54 |  | ~~add\_action( 'wp\_ajax\_wpchefgadget\_dismiss\_alert', 'widget\_logic\_dismiss\_alert' );~~ |
  | 55 |  | ~~add\_action( 'admin\_enqueue\_scripts', 'widget\_logic\_alert\_scripts' );~~ |
  | 56 |  | ~~}~~ |
  | 57 |  | ~~//enqueue admin/js/updates.js~~ |
  | 58 |  | ~~}~~ |
  | 59 |  | ~~}~~ |
  | 60 |  | ~~\*/~~ |
  | 61 | 20 | } |
  | 62 | 21 |  |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L72) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L31) |  |
  | 72 | 31 | // before any HTML output save widget changes and add controls to each widget on the widget admin page |
  | 73 | 32 | add\_action( 'sidebar\_admin\_page', 'widget\_logic\_options\_control'); |
  | 74 |  | ~~// add Widget Logic specific options on the widget admin page~~ |
  | 75 |  | ~~add\_filter( 'plugin\_action\_links', 'wl\_charity', 10, 2);// add my justgiving page link to the plugin admin page~~ |
  | 76 | 33 |  |
  | 77 | 34 | add\_action( 'widgets\_init', 'widget\_logic\_add\_controls', 999 ); |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L174) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L131) |  |
  | 174 | 131 | if ( isset($\_POST['widget\_logic-options-submit']) ) |
  | 175 | 132 | { |
  | 176 |  | $wl\_options['widget\_logic-options-filter'] = !empty($\_POST['widget\_logic-options-filter']); |
  |  | 133 | if ( !empty($\_POST['widget\_logic-options-filter']) ) |
  |  | 134 | $wl\_options['widget\_logic-options-filter'] = true; |
  |  | 135 | else |
  |  | 136 | unset( $wl\_options['widget\_logic-options-filter'] ); |
  | 177 | 137 | $wl\_options['widget\_logic-options-wp\_reset\_query'] = !empty($\_POST['widget\_logic-options-wp\_reset\_query']); |
  | 178 | 138 | $wl\_options['widget\_logic-options-show\_errors'] = !empty($\_POST['widget\_logic-options-show\_errors']); |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L210) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L170) |  |
  | 210 | 170 | <form method="POST" style="float:left; width:45%"> |
  | 211 | 171 | <ul> |
  |  | 172 | <?php if ( !empty($wl\_options['widget\_logic-options-filter']) ): ?> |
  | 212 | 173 | <li><label for="widget\_logic-options-filter" title="<?php \_e('Adds a new WP filter you can use in your own code. Not needed for main Widget Logic functionality.', 'widget-logic'); ?>"> |
  | 213 | 174 | <input id="widget\_logic-options-filter" name="widget\_logic-options-filter" type="checkbox" value="checked" class="checkbox" <?php if (!empty($wl\_options['widget\_logic-options-filter'])) echo "checked" ?>/> |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L215) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L176) |  |
  | 215 | 176 | </label> |
  | 216 | 177 | </li> |
  |  | 178 | <?php endif ?> |
  | 217 | 179 | <li><label for="widget\_logic-options-wp\_reset\_query" title="<?php \_e('Resets a theme\'s custom queries before your Widget Logic is checked', 'widget-logic'); ?>"> |
  | 218 | 180 | <input id="widget\_logic-options-wp\_reset\_query" name="widget\_logic-options-wp\_reset\_query" type="checkbox" value="checked" class="checkbox" <?php if (!empty($wl\_options['widget\_logic-options-wp\_reset\_query'])) echo "checked" ?> /> |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L336) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L298) |  |
  | 336 | 298 | <textarea class="widefat" name="<?php echo $input\_name ?>" id="<?php echo $input\_id ?>"><?php echo esc\_textarea( $logic ) ?></textarea> |
  | 337 | 299 | <?php endif ?> |
  |  | 300 | <?php wp\_nonce\_field( 'widget\_logic\_save', 'widget\_logic\_nonce' ); ?> |
  | 338 | 301 | </p> |
  | 339 | 302 | <?php |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L341) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L304) |  |
  | 341 | 304 | } |
  | 342 | 305 |  |
  | 343 |  | ~~// CALLED ON 'plugin\_action\_links' ACTION~~ |
  | 344 |  | ~~function wl\_charity($links, $file)~~ |
  | 345 |  | ~~{   if ($file == plugin\_basename(\_\_FILE\_\_))~~ |
  | 346 |  | ~~array\_push($links, '<a href="http://www.justgiving.com/widgetlogic\_cancerresearchuk/">'.esc\_html\_\_('Charity Donation', 'widget-logic').'</a>');~~ |
  | 347 |  | ~~return $links;~~ |
  | 348 |  | ~~}~~ |
  | 349 |  |  |
  | 350 |  |  |
  | 351 |  |  |
  | 352 | 306 | // FRONT END FUNCTIONS... |
  | 353 | 307 |  |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L404) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L358) |  |
  | 404 | 358 | update\_option( 'widget\_'.$widget\_class, $info ); |
  | 405 | 359 | } |
  | 406 |  | else |
  | 407 |  | { |
  | 408 |  | $info = (array)get\_option( 'widget\_'.$widget\_id, array() ); |
  | 409 |  | $info['widget\_logic'] = $logic; |
  | 410 |  | update\_option( 'widget\_'.$widget\_id, $info ); |
  | 411 |  | } |
  |  | 360 | else if( isset( $\_POST['widget\_logic\_nonce'] ) && wp\_verify\_nonce( $\_POST['widget\_logic\_nonce'], 'widget\_logic\_save') ) { |
  |  | 361 |  |
  |  | 362 | $info = (array)get\_option( 'widget\_'.$widget\_id, array() ); |
  |  | 363 | $info['widget\_logic'] = $logic; |
  |  | 364 | update\_option( 'widget\_'.$widget\_id, $info ); |
  |  | 365 | } |
  | 412 | 366 | } |
  | 413 | 367 |  |
  | […](/browser/widget-logic/trunk/widget_logic.php?rev=1765844#L541) | […](/browser/widget-logic/trunk/widget_logic.php?rev=2112753#L495) |  |
  | 541 | 495 | } |
  | 542 | 496 |  |
  | 543 |  |  |
  | 544 |  | ~~function widget\_logic\_alert()~~ |
  | 545 |  | ~~{~~ |
  | 546 |  | ~~if ( $old = get\_option('wpchefgadget\_promo') )~~ |
  | 547 |  | ~~{~~ |
  | 548 |  | ~~delete\_option('wpchefgadget\_promo');~~ |
  | 549 |  | ~~if ( $old['limit-login-attempts'] )~~ |
  | 550 |  | ~~{~~ |
  | 551 |  | ~~$alert = (array)get\_option( 'wpchefgadget\_alert', array() );~~ |
  | 552 |  | ~~$alert['limit-login-attempts'] = $old['limit-login-attempts'];~~ |
  | 553 |  | ~~update\_option( 'wpchefgadget\_alert', $alert );~~ |
  | 554 |  | ~~return;~~ |
  | 555 |  | ~~}~~ |
  | 556 |  | ~~}~~ |
  | 557 |  |  |
  | 558 |  | ~~$screen = get\_current\_screen();~~ |
  | 559 |  |  |
  | 560 |  | ~~?>~~ |
  | 561 |  | ~~<div class="notice notice-info is-dismissible" id="wpchefgadget\_alert\_lla">~~ |
  | 562 |  | ~~<p class="plugin-card-limit-login-attempts-reloaded"<?php if ( $screen->id != 'plugin-install' ) echo ' id="plugin-filter"' ?>>~~ |
  | 563 |  | ~~<b>Widget Logic team security recommendation only!</b> If your site is currently not protected (check with your admin) against login attacks (the most common reason admin login gets compromised) we highly recommend installing <a href="<?php echo network\_admin\_url('plugin-install.php?tab=plugin-information')?>&amp;plugin=limit-login-attempts-reloaded&amp;TB\_iframe=true&amp;width=600&amp;height=550" class="thickbox open-plugin-details-modal" aria-label="More information about Limit Login Attempts Reloaded" data-title="Limit Login Attempts Reloaded">Limit Login Attempts Reloaded</a> plugin to immediately have the protection in place.~~ |
  | 564 |  | ~~<a href="<?php echo network\_admin\_url('plugin-install.php?tab=plugin-information')?>&amp;plugin=limit-login-attempts-reloaded&amp;TB\_iframe=true&amp;width=600&amp;height=550" class="thickbox open-plugin-details-modal button" aria-label="More information about Limit Login Attempts Reloaded" data-title="Limit Login Attempts Reloaded" id="wpchef\_alert\_install\_button">Install</a>~~ |
  | 565 |  | ~~<a class="install-now button" data-slug="limit-login-attempts-reloaded" href="<?php echo network\_admin\_url('update.php?action=install-plugin')?>&amp;plugin=limit-login-attempts-reloaded&amp;\_wpnonce=<?php echo wp\_create\_nonce('install-plugin\_limit-login-attempts-reloaded') ?>" aria-label="Install Limit Login Attempts Reloaded now" data-name="Limit Login Attempts Reloaded" style="display:none">Install Now</a>~~ |
  | 566 |  | ~~</p>~~ |
  | 567 |  | ~~</div>~~ |
  | 568 |  | ~~<script>~~ |
  | 569 |  | ~~jQuery('#wpchefgadget\_alert\_lla .open-plugin-details-modal').on('click', function(){~~ |
  | 570 |  | ~~jQuery('#wpchef\_alert\_install\_button').hide().next().show();~~ |
  | 571 |  | ~~return true;~~ |
  | 572 |  | ~~});~~ |
  | 573 |  | ~~jQuery(function($){~~ |
  | 574 |  | ~~var alert = $('#wpchefgadget\_alert\_lla');~~ |
  | 575 |  | ~~alert.on('click', '.notice-dismiss', function(e){~~ |
  | 576 |  | ~~//e.preventDefault~~ |
  | 577 |  | ~~$.post( ajaxurl, {~~ |
  | 578 |  | ~~action: 'wpchefgadget\_dismiss\_alert',~~ |
  | 579 |  | ~~alert: 'limit-login-attempts',~~ |
  | 580 |  | ~~sec: <?php echo json\_encode( wp\_create\_nonce('wpchefgadget\_dissmiss\_alert') ) ?>~~ |
  | 581 |  | ~~} );~~ |
  | 582 |  | ~~});~~ |
  | 583 |  |  |
  | 584 |  | ~~<?php if ( $screen->id == 'plugin-install' ): ?>~~ |
  | 585 |  | ~~$('#plugin-filter').prepend( alert.css('margin-bottom','10px').addClass('inline') );~~ |
  | 586 |  | ~~<?php endif ?>~~ |
  | 587 |  |  |
  | 588 |  | ~~$(document).on('tb\_unload', function(){~~ |
  | 589 |  | ~~if ( jQuery('#wpchef\_alert\_install\_button').next().hasClass('updating-message') )~~ |
  | 590 |  | ~~return;~~ |
  | 591 |  |  |
  | 592 |  | ~~jQuery('#wpchef\_alert\_install\_button').show().next().hide();~~ |
  | 593 |  | ~~});~~ |
  | 594 |  | ~~$(document).on('credential-modal-cancel', function(){~~ |
  | 595 |  | ~~jQuery('#wpchef\_alert\_install\_button').show().next().hide();~~ |
  | 596 |  | ~~});~~ |
  | 597 |  | ~~});~~ |
  | 598 |  | ~~</script>~~ |
  | 599 |  | ~~<?php~~ |
  | 600 |  | ~~wp\_print\_request\_filesystem\_credentials\_modal();~~ |
  | 601 |  | ~~}~~ |
  | 602 |  |  |
  | 603 |  | ~~function widget\_logic\_dismiss\_alert()~~ |
  | 604 |  | ~~{~~ |
  | 605 |  | ~~check\_ajax\_referer( 'wpchefgadget\_dissmiss\_alert', 'sec' );~~ |
  | 606 |  |  |
  | 607 |  | ~~$alert = (array)get\_option( 'wpchefgadget\_alert', array() );~~ |
  | 608 |  | ~~$alert[ $\_POST['alert'] ] = 1;~~ |
  | 609 |  |  |
  | 610 |  | ~~add\_option( 'wpchefgadget\_alert', $alert, '', 'no' );~~ |
  | 611 |  | ~~update\_option( 'wpchefgadget\_alert', $alert );~~ |
  | 612 |  |  |
  | 613 |  | ~~exit;~~ |
  | 614 |  | ~~}~~ |
  | 615 |  |  |
  | 616 |  | ~~function widget\_logic\_alert\_scripts()~~ |
  | 617 |  | ~~{~~ |
  | 618 |  | ~~wp\_enqueue\_script( 'plugin-install' );~~ |
  | 619 |  | ~~add\_thickbox();~~ |
  | 620 |  | ~~wp\_enqueue\_script( 'updates' );~~ |
  | 621 |  | ~~}~~ |
  | 622 |  |  |
  | 623 | 497 | ?> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2112753)
* [Zip Archive](?format=zip&new=2112753)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


