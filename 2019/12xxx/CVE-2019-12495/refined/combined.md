=== Content from lists.nongnu.org_bb68313f_20250121_002520.html ===


| | **tinycc-devel** | | --- | |
| --- | --- |

[[Top](../)][[All Lists](/archive/html)]

[Advanced](/archive/cgi-bin/namazu.cgi?idxname=tinycc-devel)

---

[[Date Prev](msg00043.html)][[Date Next](msg00045.html)][[Thread Prev](msg00040.html)][[Thread Next](msg00045.html)][[Date Index](index.html#00044)][[Thread Index](threads.html#00044)]

## [Tinycc-devel] Out of Bounds Write in gsym\_addr

---

| **From**: | Bugs SysSec |
| --- | --- |

| **Subject**: | [Tinycc-devel] Out of Bounds Write in gsym\_addr |
| **Date**: | Tue, 28 May 2019 15:57:01 +0200 |
| **User-agent**: | Mozilla/5.0 (X11; Linux x86\_64; rv:60.0) Gecko/20100101 Thunderbird/60.7.0 |

---

```
Dear all,

While fuzzing tcc, an out of bounds write was found in the gsym_addr
function.

Attached are a file producing a crash when compiled, the output of the
clang address sanitizer and valgrind.

The asan report only shows an out of bounds read, valgrind also shows
the out of bounds write.

To reproduce, compile the attached input file with tcc

    tcc gsym_addr.c

The latest git version of tcc (commit
1dd6842654c8f8f6bf1a94364f0fd23ed10cc7e1) and tcc 0.9.27 was tested.

Credits: SysSec chair of Ruhr University Bochum

```

**[![Attachment:](/icons/text.png)](txteKZrqU_tu7.txt)
[gsym\_addr.asan.txt](txteKZrqU_tu7.txt)**

*Description:* Text document

**[![Attachment:](/icons/text.png)](txtdi7FPM9H4W.txt)
[gsym\_addr.c](txtdi7FPM9H4W.txt)**

*Description:* Text Data

**[![Attachment:](/icons/text.png)](txtv2f9ClxDnH.txt)
[gsym\_addr.valgrind.txt](txtv2f9ClxDnH.txt)**

*Description:* Text document

---

reply via email to

---

| [Prev in Thread] | **Current Thread** | [[Next in Thread](msg00045.html)] |
| --- | --- | --- |

* **[Tinycc-devel] Out of Bounds Write in gsym\_addr**,
  *Bugs SysSec* **<=**
  + **[Re: [Tinycc-devel] Out of Bounds Write in gsym\_addr](msg00045.html)**, *Michael Matz*, 2019/05/30

---

* Prev by Date:
  **[Re: [Tinycc-devel] Two compilers at once](msg00043.html)**
* Next by Date:
  **[Re: [Tinycc-devel] Out of Bounds Write in gsym\_addr](msg00045.html)**
* Previous by thread:
  **[[Tinycc-devel] Two compilers at once](msg00040.html)**
* Next by thread:
  **[Re: [Tinycc-devel] Out of Bounds Write in gsym\_addr](msg00045.html)**
* Index(es):
  + [**Date**](index.html#00044)
  + [**Thread**](threads.html#00044)



=== Content from repo.or.cz_f0253fea_20250121_002520.html ===

[![git](/git-logo.png)](http://git-scm.com/ "git homepage") [repo.or.cz](/) / [tinycc.git](/tinycc.git) / commit

commit
grep
author
committer
pickaxe
[?](/tinycc.git/search_help "search help") search:

re

[summary](/tinycc.git) | [log](/tinycc.git/shortlog/d04ce7772c2bc2781ab2502e0b1f1964488814b5) | [graphiclog1](/git-browser/by-commit.html?r=tinycc.git) | [graphiclog2](/git-browser/by-date.html?r=tinycc.git) | commit | [commitdiff](/tinycc.git/commitdiff/d04ce7772c2bc2781ab2502e0b1f1964488814b5) | [tree](/tinycc.git/tree/d04ce7772c2bc2781ab2502e0b1f1964488814b5) | [refs](/tinycc.git/refs) | [edit](/editproj.cgi?name=tinycc.git) | [fork](/regproj.cgi?fork=tinycc.git)

(parent: [1dd6842](/tinycc.git/commit/1dd6842654c8f8f6bf1a94364f0fd23ed10cc7e1)) | [patch](/tinycc.git/patch/d04ce7772c2bc2781ab2502e0b1f1964488814b5)

[Don't allow section switches in local asm instructions](/tinycc.git/commitdiff/d04ce7772c2bc2781ab2502e0b1f1964488814b5)

| commit | d04ce7772c2bc2781ab2502e0b1f1964488814b5 |
| --- | --- |
| author | [Michael Matz](/tinycc.git/search/d04ce7772c2bc2781ab2502e0b1f1964488814b5?s=Michael+Matz;st=author "Search for commits authored by Michael Matz") [<matz@suse.de>](/tinycc.git/search/d04ce7772c2bc2781ab2502e0b1f1964488814b5?s=matz@suse.de;st=author "Search for commits authored by matz@suse.de") |  |
|  | Thu, 30 May 2019 19:31:35 +0000 (30 21:31 +0200) |
| committer | [Michael Matz](/tinycc.git/search/d04ce7772c2bc2781ab2502e0b1f1964488814b5?s=Michael+Matz;st=committer "Search for commits committed by Michael Matz") [<matz@suse.de>](/tinycc.git/search/d04ce7772c2bc2781ab2502e0b1f1964488814b5?s=matz@suse.de;st=committer "Search for commits committed by matz@suse.de") |  |
|  | Thu, 30 May 2019 19:31:35 +0000 (30 21:31 +0200) |
| tree | [6691b72e6352ee04978a5f5036e1b5944c199086](/tinycc.git/tree/d04ce7772c2bc2781ab2502e0b1f1964488814b5) | [tree](/tinycc.git/tree/d04ce7772c2bc2781ab2502e0b1f1964488814b5) | snapshot ([tar.gz](/tinycc.git/snapshot/d04ce7772c2bc2781ab2502e0b1f1964488814b5.tar.gz) [zip](/tinycc.git/snapshot/d04ce7772c2bc2781ab2502e0b1f1964488814b5.zip)) |
| parent | [1dd6842654c8f8f6bf1a94364f0fd23ed10cc7e1](/tinycc.git/commit/1dd6842654c8f8f6bf1a94364f0fd23ed10cc7e1) | [commit](/tinycc.git/commit/1dd6842654c8f8f6bf1a94364f0fd23ed10cc7e1) | [diff](/tinycc.git/commitdiff/d04ce7772c2bc2781ab2502e0b1f1964488814b5?hp=1dd6842654c8f8f6bf1a94364f0fd23ed10cc7e1) |

Don't allow section switches in local asm instructions

GCC wouldn't be able to implement this either (due to the separate

phases of compilation and assembly).  We could allow it but it

makes not much sense and actively can confuse broken code into

segfaulting TCC.  At least we can warn.

Warning exposes a problem in tcctest, and fixing that gives us

an opportunity to also test .pushsection/.popsection and .previous

directive support.

| [tccasm.c](/tinycc.git/blob/d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tccasm.c) |  | [diff](/tinycc.git/blobdiff/1dd6842654c8f8f6bf1a94364f0fd23ed10cc7e1..d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tccasm.c) | [blob](/tinycc.git/blob/d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tccasm.c) | [blame](/tinycc.git/blame/d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tccasm.c) | [history](/tinycc.git/history/d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tccasm.c) |
| --- | --- | --- |
| [tests/tcctest.c](/tinycc.git/blob/d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tests/tcctest.c) |  | [diff](/tinycc.git/blobdiff/1dd6842654c8f8f6bf1a94364f0fd23ed10cc7e1..d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tests/tcctest.c) | [blob](/tinycc.git/blob/d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tests/tcctest.c) | [blame](/tinycc.git/blame/d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tests/tcctest.c) | [history](/tinycc.git/history/d04ce7772c2bc2781ab2502e0b1f1964488814b5%3A/tests/tcctest.c) |

Tiny C Compiler main repository
[RSS](/tinycc.git/rss "log RSS feed")
[Atom](/tinycc.git/atom "log Atom feed")


