=== Content from github.com_7c91ded6_20250120_232916.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fcommits%2Fmaster)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fcommits%2Fmaster)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fcommits%2Fshow&source=header-repo&source_repo=lightningnetwork%2Flnd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightningnetwork](/lightningnetwork)
/
**[lnd](/lightningnetwork/lnd)**
Public

* [Notifications](/login?return_to=%2Flightningnetwork%2Flnd) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Flightningnetwork%2Flnd)
* [Star
   7.8k](/login?return_to=%2Flightningnetwork%2Flnd)

* [Code](/lightningnetwork/lnd)
* [Issues
  566](/lightningnetwork/lnd/issues)
* [Pull requests
  185](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects
  3](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

Additional navigation options

* [Code](/lightningnetwork/lnd)
* [Issues](/lightningnetwork/lnd/issues)
* [Pull requests](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

# Commits

## Branch selector

 master
## User selector

All users
## Datepicker

All time
## Commit History

### Commits on Jan 20, 2025

* #### [Merge pull request](/lightningnetwork/lnd/commit/1f20bd352fe2179b0e519c10403d4a23ca60186c "Merge pull request #9429 from yyforyongyu/update-action .github: update actions versions") [#9429](https://github.com/lightningnetwork/lnd/pull/9429) [from yyforyongyu/update-action](/lightningnetwork/lnd/commit/1f20bd352fe2179b0e519c10403d4a23ca60186c "Merge pull request #9429 from yyforyongyu/update-action .github: update actions versions")

  Show description for 1f20bd3[![guggero](https://avatars.githubusercontent.com/u/1008879?v=4&size=32)](/guggero)[guggero](/lightningnetwork/lnd/commits?author=guggero)authored[1f20bd3](/lightningnetwork/lnd/commit/1f20bd352fe2179b0e519c10403d4a23ca60186c)Copy full SHA for 1f20bd3
* #### [.github: update actions versions](/lightningnetwork/lnd/commit/29603954bd7ee3c6cbe0f9656e776cb2297b94b5 ".github: update actions versions")

  [![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)committed[2960395](/lightningnetwork/lnd/commit/29603954bd7ee3c6cbe0f9656e776cb2297b94b5)Copy full SHA for 2960395
### Commits on Jan 17, 2025

* #### [Merge pull request](/lightningnetwork/lnd/commit/baa3b0dea33a044e885821ff1557dba25ea7984b "Merge pull request #9425 from yyforyongyu/flake-fix itest: fix flake in `testSweepHTLCs`") [#9425](https://github.com/lightningnetwork/lnd/pull/9425) [from yyforyongyu/flake-fix](/lightningnetwork/lnd/commit/baa3b0dea33a044e885821ff1557dba25ea7984b "Merge pull request #9425 from yyforyongyu/flake-fix itest: fix flake in `testSweepHTLCs`")

  Show description for baa3b0d[![guggero](https://avatars.githubusercontent.com/u/1008879?v=4&size=32)](/guggero)[guggero](/lightningnetwork/lnd/commits?author=guggero)authored[baa3b0d](/lightningnetwork/lnd/commit/baa3b0dea33a044e885821ff1557dba25ea7984b)Copy full SHA for baa3b0d
* #### [Merge pull request](/lightningnetwork/lnd/commit/27df4af53e8fa698f1a2eff416c1561cf1b8ad56 "Merge pull request #9359 from NishantBansal2003/fix-timeout routerrpc: add a default value for timeout_seconds in SendPaymentV2") [#9359](https://github.com/lightningnetwork/lnd/pull/9359) [from NishantBansal2003/fix-timeout](/lightningnetwork/lnd/commit/27df4af53e8fa698f1a2eff416c1561cf1b8ad56 "Merge pull request #9359 from NishantBansal2003/fix-timeout routerrpc: add a default value for timeout_seconds in SendPaymentV2")

  Show description for 27df4af[![guggero](https://avatars.githubusercontent.com/u/1008879?v=4&size=32)](/guggero)[guggero](/lightningnetwork/lnd/commits?author=guggero)authored[27df4af](/lightningnetwork/lnd/commit/27df4af53e8fa698f1a2eff416c1561cf1b8ad56)Copy full SHA for 27df4af
* #### [itest: fix flake in `testSweepHTLCs`](/lightningnetwork/lnd/commit/c24f839fbe235b7551da0c8ec20b3cb22550986d "itest: fix flake in `testSweepHTLCs` We need to make sure Caarol finishes settling her invoice with Bob before shutting down, so we make sure `AssertHTLCNotActive` on Bob happens before shutting node Carol.")

  Show description for c24f839[![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)committed[c24f839](/lightningnetwork/lnd/commit/c24f839fbe235b7551da0c8ec20b3cb22550986d)Copy full SHA for c24f839
* #### [Merge pull request](/lightningnetwork/lnd/commit/fb91b04906297794b4ef3cc26e25f77b6322426e "Merge pull request #9405 from yyforyongyu/fix-unused-params discovery+lnd: make param `ProofMatureDelta` configurable") [#9405](https://github.com/lightningnetwork/lnd/pull/9405) [from yyforyongyu/fix-unused-params](/lightningnetwork/lnd/commit/fb91b04906297794b4ef3cc26e25f77b6322426e "Merge pull request #9405 from yyforyongyu/fix-unused-params discovery+lnd: make param `ProofMatureDelta` configurable")

  Show description for fb91b04[![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)authored[fb91b04](/lightningnetwork/lnd/commit/fb91b04906297794b4ef3cc26e25f77b6322426e)Copy full SHA for fb91b04
* #### [docs: add release notes](/lightningnetwork/lnd/commit/ae2bcfe3d8c79fbc13432b832efceb63daf00b57 "docs: add release notes")

  [![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)committed[ae2bcfe](/lightningnetwork/lnd/commit/ae2bcfe3d8c79fbc13432b832efceb63daf00b57)Copy full SHA for ae2bcfe
* #### [multi: make `ProofMatureDelta` configurable](/lightningnetwork/lnd/commit/27a05694cba5e122b7f11270d38c2dae6650657d "multi: make `ProofMatureDelta` configurable We add a new config option to set the `ProofMatureDelta` so the users can tune their graphs based on their own preference over the num of confs found in the announcement signatures.")

  Show description for 27a0569[![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)committed[27a0569](/lightningnetwork/lnd/commit/27a05694cba5e122b7f11270d38c2dae6650657d)Copy full SHA for 27a0569
### Commits on Jan 16, 2025

* #### [Merge pull request](/lightningnetwork/lnd/commit/e0a920af444f9f10ac55da4d41f39c64f76de08b "Merge pull request #9420 from yyforyongyu/assert-channel-graph itest+lntest: make sure to assert edge in both graph db and cache") [#9420](https://github.com/lightningnetwork/lnd/pull/9420) [from yyforyongyu/assert-channel-graph](/lightningnetwork/lnd/commit/e0a920af444f9f10ac55da4d41f39c64f76de08b "Merge pull request #9420 from yyforyongyu/assert-channel-graph itest+lntest: make sure to assert edge in both graph db and cache")

  Show description for e0a920a[![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)authored[e0a920a](/lightningnetwork/lnd/commit/e0a920af444f9f10ac55da4d41f39c64f76de08b)Copy full SHA for e0a920a
* #### [lntest: assert channel edge in both graph db and cache](/lightningnetwork/lnd/commit/faa1f674803cc159c4263fdd0a49f7b6ebeb3e25 "lntest: assert channel edge in both graph db and cache We need to make sure the channel edge has been updated in both the graph DB and cache.")

  Show description for faa1f67[![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)committed[faa1f67](/lightningnetwork/lnd/commit/faa1f674803cc159c4263fdd0a49f7b6ebeb3e25)Copy full SHA for faa1f67
* #### [itest: fix docs](/lightningnetwork/lnd/commit/e576d661efd2d7551f7435b89fc2d2b08f61e0d4 "itest: fix docs")

  [![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)committed[e576d66](/lightningnetwork/lnd/commit/e576d661efd2d7551f7435b89fc2d2b08f61e0d4)Copy full SHA for e576d66
* #### [itest: fix flake in `graph_topology_notifications`](/lightningnetwork/lnd/commit/848f42ea1df9fb4cb88ddccea0e5a10f38101cff "itest: fix flake in `graph_topology_notifications` We need to make sure to wait for the `ListPeers` to give us the latest response.")

  Show description for 848f42e[![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)committed[848f42e](/lightningnetwork/lnd/commit/848f42ea1df9fb4cb88ddccea0e5a10f38101cff)Copy full SHA for 848f42e
### Commits on Jan 15, 2025

* #### [docs: add release notes.](/lightningnetwork/lnd/commit/3a3002e281e56d21652261c434ffe23dc135c435 "docs: add release notes. Signed-off-by: Nishant Bansal <nishant.bansal.282003@gmail.com>")

  Show description for 3a3002e[![NishantBansal2003](https://avatars.githubusercontent.com/u/103022832?v=4&size=32)](/NishantBansal2003)[NishantBansal2003](/lightningnetwork/lnd/commits?author=NishantBansal2003)committed[3a3002e](/lightningnetwork/lnd/commit/3a3002e281e56d21652261c434ffe23dc135c435)Copy full SHA for 3a3002e
* #### [itest: update tests with timeout\_seconds](/lightningnetwork/lnd/commit/23efbef946ef4a8dc7a9e3164cbb913696d674ce "itest: update tests with timeout_seconds Signed-off-by: Nishant Bansal <nishant.bansal.282003@gmail.com>")

  Show description for 23efbef[![NishantBansal2003](https://avatars.githubusercontent.com/u/103022832?v=4&size=32)](/NishantBansal2003)[NishantBansal2003](/lightningnetwork/lnd/commits?author=NishantBansal2003)committed[23efbef](/lightningnetwork/lnd/commit/23efbef946ef4a8dc7a9e3164cbb913696d674ce)Copy full SHA for 23efbef
* #### [routerrpc: default timeout\_seconds to 60 in SendPaymentV2](/lightningnetwork/lnd/commit/b577ad46616112893ef8ee7a665f7b54d5d7910f "routerrpc: default timeout_seconds to 60 in SendPaymentV2 If timeout_seconds is not set or is 0, the default value of 60 seconds will be used. Signed-off-by: Nishant Bansal <nishant.bansal.282003@gmail.com>")

  Show description for b577ad4[![NishantBansal2003](https://avatars.githubusercontent.com/u/103022832?v=4&size=32)](/NishantBansal2003)[NishantBansal2003](/lightningnetwork/lnd/commits?author=NishantBansal2003)committed[b577ad4](/lightningnetwork/lnd/commit/b577ad46616112893ef8ee7a665f7b54d5d7910f)Copy full SHA for b577ad4
* #### [Merge pull request](/lightningnetwork/lnd/commit/572784a6a1f269762629c43a0ddd73e05352d663 "Merge pull request #9390 from NishantBansal2003/append-channel Enhance `lncli` listchannels command with the chan_id and short_chan_id (human readable format)") [#9390](https://github.com/lightningnetwork/lnd/pull/9390) [from NishantBansal2003/append-channel](/lightningnetwork/lnd/commit/572784a6a1f269762629c43a0ddd73e05352d663 "Merge pull request #9390 from NishantBansal2003/append-channel Enhance `lncli` listchannels command with the chan_id and short_chan_id (human readable format)")

  Show description for 572784a[![guggero](https://avatars.githubusercontent.com/u/1008879?v=4&size=32)](/guggero)[guggero](/lightningnetwork/lnd/commits?author=guggero)authored[572784a](/lightningnetwork/lnd/commit/572784a6a1f269762629c43a0ddd73e05352d663)Copy full SHA for 572784a
* #### [docs: add release notes.](/lightningnetwork/lnd/commit/c2897a4c782e456ee4f9db9d42b0a395d393a0d6 "docs: add release notes. Signed-off-by: Nishant Bansal <nishant.bansal.282003@gmail.com>")

  Show description for c2897a4[![NishantBansal2003](https://avatars.githubusercontent.com/u/103022832?v=4&size=32)](/NishantBansal2003)[NishantBansal2003](/lightningnetwork/lnd/commits?author=NishantBansal2003)committed[c2897a4](/lightningnetwork/lnd/commit/c2897a4c782e456ee4f9db9d42b0a395d393a0d6)Copy full SHA for c2897a4
* #### [cmd/lncli: update listchannels output fields](/lightningnetwork/lnd/commit/103a194e5c19c1b6b563e1abcf58c4365a2bfd23 "cmd/lncli: update listchannels output fields Added scid_str as a string representation of chan_id, replacing chan_id with scid, and including chan_id(BOLT02) in lncli listchannels output. Signed-off-by: Nishant Bansal <nishant.bansal.282003@gmail.com>")

  Show description for 103a194[![NishantBansal2003](https://avatars.githubusercontent.com/u/103022832?v=4&size=32)](/NishantBansal2003)[NishantBansal2003](/lightningnetwork/lnd/commits?author=NishantBansal2003)committed[103a194](/lightningnetwork/lnd/commit/103a194e5c19c1b6b563e1abcf58c4365a2bfd23)Copy full SHA for 103a194
* #### [lnwire: add 'x' separator in ShortChannelID method](/lightningnetwork/lnd/commit/7f8e89f3b4fd6411ab39a2d056cde153f836e038 "lnwire: add 'x' separator in ShortChannelID method Add the `AltString` method for `ShortChannelID` to produce a human-readable format with 'x' as a separator (block x transaction x output). Signed-off-by: Nishant Bansal <nishant.bansal.282003@gmail.com>")

  Show description for 7f8e89f[![NishantBansal2003](https://avatars.githubusercontent.com/u/103022832?v=4&size=32)](/NishantBansal2003)[NishantBansal2003](/lightningnetwork/lnd/commits?author=NishantBansal2003)committed[7f8e89f](/lightningnetwork/lnd/commit/7f8e89f3b4fd6411ab39a2d056cde153f836e038)Copy full SHA for 7f8e89f
### Commits on Jan 14, 2025

* #### [Merge pull request](/lightningnetwork/lnd/commit/4b16c2902ea251eb4d464f9670a10ed04757f065 "Merge pull request #9383 from ziggie1984/bugfix-createmissingedge bugfix createmissingedge") [#9383](https://github.com/lightningnetwork/lnd/pull/9383) [from ziggie1984/bugfix-createmissingedge](/lightningnetwork/lnd/commit/4b16c2902ea251eb4d464f9670a10ed04757f065 "Merge pull request #9383 from ziggie1984/bugfix-createmissingedge bugfix createmissingedge")

  Show description for 4b16c29[![yyforyongyu](https://avatars.githubusercontent.com/u/5845072?v=4&size=32)](/yyforyongyu)[yyforyongyu](/lightningnetwork/lnd/commits?author=yyforyongyu)authored[4b16c29](/lightningnetwork/lnd/commit/4b16c2902ea251eb4d464f9670a10ed04757f065)Copy full SHA for 4b16c29
* #### [localchans: bugfix so that we always use the correct chanID](/lightningnetwork/lnd/commit/e008190a85f2f43265616509381f561e77f827e5 "localchans: bugfix so that we always use the correct chanID")

  [![ziggie1984](https://avatars.githubusercontent.com/u/90319354?v=4&size=32)](/ziggie1984)[ziggie1984](/lightningnetwork/lnd/commits?author=ziggie1984)committed[e008190](/lightningnetwork/lnd/commit/e008190a85f2f43265616509381f561e77f827e5)Copy full SHA for e008190
### Commits on Jan 13, 2025

* #### [Merge pull request](/lightningnetwork/lnd/commit/e9dd01b60dd22a3e0181a1f4e924cb3d438fb518 "Merge pull request #9274 from ziggie1984/remove-2x-value The sweeper subsystem uses now also the configured budget values for HTLCs") [#9274](https://github.com/lightningnetwork/lnd/pull/9274) [from ziggie1984/remove-2x-value](/lightningnetwork/lnd/commit/e9dd01b60dd22a3e0181a1f4e924cb3d438fb518 "Merge pull request #9274 from ziggie1984/remove-2x-value The sweeper subsystem uses now also the configured budget values for HTLCs")

  Show description for e9dd01b[![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)authored[e9dd01b](/lightningnetwork/lnd/commit/e9dd01b60dd22a3e0181a1f4e924cb3d438fb518)Copy full SHA for e9dd01b
* #### [Merge pull request](/lightningnetwork/lnd/commit/b958667811f6c767d96e4fa7962d8276f945864f "Merge pull request #9355 from Roasbeef/rapid-fuzz-htlc-blobs contractcourt: add rapid derived fuzz test for HtlcAuxBlob") [#9355](https://github.com/lightningnetwork/lnd/pull/9355) [from Roasbeef/rapid-fuzz-htlc-blobs](/lightningnetwork/lnd/commit/b958667811f6c767d96e4fa7962d8276f945864f "Merge pull request #9355 from Roasbeef/rapid-fuzz-htlc-blobs contractcourt: add rapid derived fuzz test for HtlcAuxBlob")

  Show description for b958667[![guggero](https://avatars.githubusercontent.com/u/1008879?v=4&size=32)](/guggero)[guggero](/lightningnetwork/lnd/commits?author=guggero)authored[b958667](/lightningnetwork/lnd/commit/b958667811f6c767d96e4fa7962d8276f945864f)Copy full SHA for b958667
* #### [Merge pull request](/lightningnetwork/lnd/commit/1b0f41da48b4dec3db5b51e8b5c28048ecc872b6 "Merge pull request #9378 from yyforyongyu/fix-unit-test chainntnfs: fix test `testSingleConfirmationNotification`") [#9378](https://github.com/lightningnetwork/lnd/pull/9378) [from yyforyongyu/fix-unit-test](/lightningnetwork/lnd/commit/1b0f41da48b4dec3db5b51e8b5c28048ecc872b6 "Merge pull request #9378 from yyforyongyu/fix-unit-test chainntnfs: fix test `testSingleConfirmationNotification`")

  Show description for 1b0f41d[![guggero](https://avatars.githubusercontent.com/u/1008879?v=4&size=32)](/guggero)[guggero](/lightningnetwork/lnd/commits?author=guggero)authored[1b0f41d](/lightningnetwork/lnd/commit/1b0f41da48b4dec3db5b51e8b5c28048ecc872b6)Copy full SHA for 1b0f41d
* #### [Merge pull request](/lightningnetwork/lnd/commit/67a8c7cf514043d818c77423acecdd3b74287f4b "Merge pull request #9391 from mohamedawnallah/choreRegisterToRegisteredInStartingDebugLogs chore: change 'register' to 'registered' in lnrpc starting debug logs [skip ci]") [#9391](https://github.com/lightningnetwork/lnd/pull/9391) [from mohamedawnallah/choreRegisterToRegisteredInStartingDebugLogs](/lightningnetwork/lnd/commit/67a8c7cf514043d818c77423acecdd3b74287f4b "Merge pull request #9391 from mohamedawnallah/choreRegisterToRegisteredInStartingDebugLogs chore: change 'register' to 'registered' in lnrpc starting debug logs [skip ci]")

  Show description for 67a8c7c[![guggero](https://avatars.githubusercontent.com/u/1008879?v=4&size=32)](/guggero)[guggero](/lightningnetwork/lnd/commits?author=guggero)authored[67a8c7c](/lightningnetwork/lnd/commit/67a8c7cf514043d818c77423acecdd3b74287f4b)Copy full SHA for 67a8c7c
### Commits on Jan 11, 2025

* #### [Merge pull request](/lightningnetwork/lnd/commit/98033f876d3357ea572e93daabd31b7443aedf33 "Merge pull request #9344 from ellemouton/useUpdatedContextGuard htlcswitch+go.mod: use updated fn.ContextGuard") [#9344](https://github.com/lightningnetwork/lnd/pull/9344) [from ellemouton/useUpdatedContextGuard](/lightningnetwork/lnd/commit/98033f876d3357ea572e93daabd31b7443aedf33 "Merge pull request #9344 from ellemouton/useUpdatedContextGuard htlcswitch+go.mod: use updated fn.ContextGuard")

  Show description for 98033f8[![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)authored[98033f8](/lightningnetwork/lnd/commit/98033f876d3357ea572e93daabd31b7443aedf33)Copy full SHA for 98033f8
* #### [htlcswitch+go.mod: use updated fn.ContextGuard](/lightningnetwork/lnd/commit/950194a2dad17c0fb5753bb005827e354c065c9a "htlcswitch+go.mod: use updated fn.ContextGuard This commit updates the fn dep to the version containing the updates to the ContextGuard implementation. Only the htlcswitch/link uses the guard at the moment so this is updated to make use of the new implementation.")

  Show description for 950194a[![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)committed[950194a](/lightningnetwork/lnd/commit/950194a2dad17c0fb5753bb005827e354c065c9a)Copy full SHA for 950194a
### Commits on Jan 10, 2025

* #### [Merge pull request](/lightningnetwork/lnd/commit/77848c402d7cb5117caa80545ef7e513461576bf "Merge pull request #9342 from ellemouton/slogProtofsm protofsm: update GR Manager usage and start using structured logging") [#9342](https://github.com/lightningnetwork/lnd/pull/9342) [from ellemouton/slogProtofsm](/lightningnetwork/lnd/commit/77848c402d7cb5117caa80545ef7e513461576bf "Merge pull request #9342 from ellemouton/slogProtofsm protofsm: update GR Manager usage and start using structured logging")

  Show description for 77848c4[![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)authored[77848c4](/lightningnetwork/lnd/commit/77848c402d7cb5117caa80545ef7e513461576bf)Copy full SHA for 77848c4
* #### [docs: add release notes entry](/lightningnetwork/lnd/commit/42ce9d639f27edd1a04bc519f5748fe955487d4b "docs: add release notes entry")

  [![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)committed[42ce9d6](/lightningnetwork/lnd/commit/42ce9d639f27edd1a04bc519f5748fe955487d4b)Copy full SHA for 42ce9d6
* #### [protofsm: use pointer to GoroutineManager](/lightningnetwork/lnd/commit/65c4c2c4d098f8dcb1252e22b87d5d45568b6b53 "protofsm: use pointer to GoroutineManager")

  [![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)committed[65c4c2c](/lightningnetwork/lnd/commit/65c4c2c4d098f8dcb1252e22b87d5d45568b6b53)Copy full SHA for 65c4c2c
* #### [protofsm: use structured logging](/lightningnetwork/lnd/commit/dfddeec8d4746d94c6b5165f1f6325bf242d67d8 "protofsm: use structured logging")

  [![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)committed[dfddeec](/lightningnetwork/lnd/commit/dfddeec8d4746d94c6b5165f1f6325bf242d67d8)Copy full SHA for dfddeec
* #### [protofsm: use prefixed logger for StateMachine](/lightningnetwork/lnd/commit/575ea7af832602bab654f3f88c0907f707fa8656 "protofsm: use prefixed logger for StateMachine So that we dont have to remember to add the `FSM(%v)` prefix each time we write a log line.")

  Show description for 575ea7a[![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)committed[575ea7a](/lightningnetwork/lnd/commit/575ea7af832602bab654f3f88c0907f707fa8656)Copy full SHA for 575ea7a
* #### [protofsm: use updated GoroutineManager API](/lightningnetwork/lnd/commit/b887c1cc5d29fc777c9fb25f3d00ea9daf85297e "protofsm: use updated GoroutineManager API Update to use the latest version of the GoroutineManager which takes a context via the `Go` method instead of the constructor.")

  Show description for b887c1c[![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)committed[b887c1c](/lightningnetwork/lnd/commit/b887c1cc5d29fc777c9fb25f3d00ea9daf85297e)Copy full SHA for b887c1c
* #### [go.mod: update btclog dep](/lightningnetwork/lnd/commit/4e0498faa496db729f1c8add26013b4dc3bf75b8 "go.mod: update btclog dep This bump includes a fix which prevents attribute value quoting if the value string contains a newline character. This is so that if we call spew.DumpS(), the output will stay nicely formatted. The update also includes a couple more Hex helpers which we can make use of now.")

  Show description for 4e0498f[![ellemouton](https://avatars.githubusercontent.com/u/25280249?v=4&size=32)](/ellemouton)[ellemouton](/lightningnetwork/lnd/commits?author=ellemouton)committed[4e0498f](/lightningnetwork/lnd/commit/4e0498faa496db729f1c8add26013b4dc3bf75b8)Copy full SHA for 4e0498f
* #### [Merge pull request](/lightningnetwork/lnd/commit/dd25e6eb223e0d8657761d69b0d9d52936a2a7f2 "Merge pull request #9361 from starius/optimize-context-guard fn: optimize context guard") [#9361](https://github.com/lightningnetwork/lnd/pull/9361) [from starius/optimize-context-guard](/lightningnetwork/lnd/commit/dd25e6eb223e0d8657761d69b0d9d52936a2a7f2 "Merge pull request #9361 from starius/optimize-context-guard fn: optimize context guard")

  Show description for dd25e6e[![guggero](https://avatars.githubusercontent.com/u/1008879?v=4&size=32)](/guggero)[guggero](/lightningnetwork/lnd/commits?author=guggero)authored[dd25e6e](/lightningnetwork/lnd/commit/dd25e6eb223e0d8657761d69b0d9d52936a2a7f2)Copy full SHA for dd25e6e
## Pagination

[Previous](/lightningnetwork/lnd/commits/master?before=1f20bd352fe2179b0e519c10403d4a23ca60186c+0)[Next](/lightningnetwork/lnd/commits/master?after=1f20bd352fe2179b0e519c10403d4a23ca60186c+34)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from lists.linuxfoundation.org_0ff59e80_20250120_232920.html ===
From rusty at rustcorp.com.au Fri Sep 27 12:01:46 2019
From: rusty at rustcorp.com.au (Rusty Russell)
Date: Fri, 27 Sep 2019 21:31:46 +0930
Subject: [Lightning-dev] Full Disclosure: CVE-2019-12998 / CVE-2019-12999 /
CVE-2019-13000
Message-ID: <87mueq6j85.fsf@rustcorp.com.au>
Problem
-------
A lightning node accepting a channel must check that the funding transaction
output does indeed open the channel proposed. Otherwise an attacker can claim
to open a channel but either not pay to the peer, or not pay the full amount.
Once that transaction reaches the minimum depth, it can spend funds from the
channel. The victim will only notice when it tries to close the channel and none
of the commitment or mutual close transactions it has are valid.
Implementations did not always do this check:
c-lightning: v0.7.1 and above do this correctly, prior versions never did.
(CVE-2019-12998)
- This can be exploited by a connecting peer and claiming to open a channel
with any transaction id.
lnd: v0.7.1 and above do this correctly, prior versions did not check the
amount. v0.7.0 and above properly check for the scriptpubkey, v0.6.x
partially enforces the funding scriptpubkey, but pre-v0.6.0 did not verify
at all. (CVE-2019-12999)
- Exploiting via incorrect amount is possible against all prior versions. In
v0.7.0, the attacker must use the correct scriptpubkey, which burns the
coins in the funding output.
- Exploiting via incorrect scriptpubkey is possible on all versions prior to
v0.6.0. This exploit is also possible in v0.6.x if the node is offline
when the funding transaction reached the required number of confirmations
and running with -txindex=0 on either full node backend.
- Exploiting neutrino users (usually mobile or laptop) with an incorrect
outpoint would require the attacker to collide their fake outpoint with
the script of the real outpoint in the BIP 158 filter. The siphash key
used to create the filters is derived from the blockhash. As a result, the
attacker cannot directly grind outpoints without also knowing the block
hash ahead of time. In addition, neutrino nodes are typically either
non-listening or do not have an advertised address, which means an
attacker would have to wait until receiving an inbound connection to
perform either exploit.
eclair: v0.3.1 and above do this correctly, prior versions did not if using
the bitcoin core backend; electrum users only check the script, not the
amount. (CVE-2019-13000)
- Exploiting Electrum users (on mobile) requires the user to actively
connect to a malicious Lightning node, and the attacker to use the correct
scriptpubkey, which burns the coins in the funding output. Since Eclair
Mobile doesn?t relay payments, the attacker can?t cash out without an
offband interaction (e.g. selling something to the user and paying with
the funds in the fake channel).
Solution
--------
Once the funding transaction is seen, peers MUST check that the outpoint as
described in `funding\_created`[1] is a funding transaction output[2] with
the amount described in `open\_channel`[3].
Background
----------
To open a channel, the funding peer sends `open\_channel` with the proposed
`funding\_satoshis`. The fundee replies with `accept\_channel` providing the
keys it wants to use for the funding transaction.
Then the funder creates the funding transaction, and sends the transaction id
and output number in a `funding\_created` message.
```
+-------+ +-------+
| |--(1)--- open\_channel ----->| |
| |<-(2)-- accept\_channel -----| |
| | | |
| A |--(3)-- funding\_created --->| B |
| |<-(4)-- funding\_signed -----| |
| | | |
| |--(5)--- funding\_locked ---->| |
| |<-(6)--- funding\_locked -----| |
+-------+ +-------+
- where node A is 'funder' and node B is 'fundee'
```
With this information, the fundee can create the signatures on the first
"commitment transaction" and sends it in a `funding\_signed` message so the
funder can retrieve their funds should something go wrong. It is then safe
for the funder to sign and broadcast the opening transaction. After some
number of confirmations (set by the fundee), the channel is operational
(`funding\_locked`).
The specification describes clearly the requirement to check that the various
signatures exchanged indeed allow creation of a valid commitment transaction[4],
and describes the requirement to wait for confirmations[5].
It did NOT, however, require the receiver to actually check that the
transaction is the one promised by the funder: both the amount and the actual
scriptpubkey.
Discovery
---------
Rusty Russell (Blockstream) discovered this while working on protocol
tests for the specification itself, as part of an ongoing effort to
test multiple new proposed features add new complexities.[6]
The discovery occurred while writing tests for channel opening
negotiation, in particular that invalid variants were rejected; while
writing a test where the opener supplied an incorrect
`funding\_output\_index` in the `funding\_created` message, he realized
that it would not be rejected by the c-lightning implementation, which
only checked the confirmation count of the `funding\_txid`, and not
even whether the `funding\_output\_index` even existed!
This requirement was not mentioned in the specification, so Rusty
immediately disclosed the problem the authors of the other most widely
used implementations (eclair and lnd). Their own investigations
revealed that they were similarly vulnerable in limited circumstances.
Together the teams made the decision to fix this quietly for pending
releases, then reveal the existence of a problem 8 weeks later, once
most users had already upgraded. Four weeks after that, the full
disclosure would be made.
While this long-standing bug had not been independently discovered, and thus
was unlikely to be discovered by a malicious party before being fixed, it did
provide an opportunity to test communications and methods of upgrade across
the entire lightning ecosystem.
Timeline
--------
2019-06-27: Bug discovered, LND and Eclair notified.
2019-06-28: CVEs assigned.
2019-07-02: lnd v0.7.0-beta released.
2019-07-03: Eclair 0.3.1 released.
2019-07-04: c-lightning 0.7.1 released.
2019-07-06: disclosure to other projects begins (rust-lightning, ptarmigan, BLW).
2019-07-30: lnd v0.7.1-beta released.
2019-08-17: [Review next dates based on deployment stats/problems]
2019-08-30: Reveal existence of CVEs, encourage laggards to upgrade.
2019-09-07: First conclusive evidence of exploit attempt in the wild.
2019-09-27: Full disclosure of CVEs.
2019-09-27: Submit PR to spec to require this.
[1] https://github.com/lightningnetwork/lightning-rfc/blob/v1.0/02-peer-protocol.md#the-funding\_created-message
[2] https://github.com/lightningnetwork/lightning-rfc/blob/v1.0/03-transactions.md#funding-transaction-output
[3] https://github.com/lightningnetwork/lightning-rfc/blob/v1.0/02-peer-protocol.md#the-open\_channel-message
[4] https://github.com/lightningnetwork/lightning-rfc/blob/v1.0/02-peer-protocol.md#requirements-2
[5] https://github.com/lightningnetwork/lightning-rfc/blob/v1.0/02-peer-protocol.md#the-funding\_locked-message
[6] https://github.com/ElementsProject/lightning-rfc-protocol-test


=== Content from github.com_c06f08f3_20250120_232917.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Freleases%2Ftag%2Fv0.7.0-beta)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Freleases%2Ftag%2Fv0.7.0-beta)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=lightningnetwork%2Flnd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightningnetwork](/lightningnetwork)
/
**[lnd](/lightningnetwork/lnd)**
Public

* [Notifications](/login?return_to=%2Flightningnetwork%2Flnd) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Flightningnetwork%2Flnd)
* [Star
   7.8k](/login?return_to=%2Flightningnetwork%2Flnd)

* [Code](/lightningnetwork/lnd/tree/v0.7.0-beta)
* [Issues
  566](/lightningnetwork/lnd/issues)
* [Pull requests
  185](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects
  3](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

Additional navigation options

* [Code](/lightningnetwork/lnd/tree/v0.7.0-beta)
* [Issues](/lightningnetwork/lnd/issues)
* [Pull requests](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

1. [Releases](/lightningnetwork/lnd/releases)
2. [v0.7.0-beta](/lightningnetwork/lnd/releases/tag/v0.7.0-beta)

# lnd v0.7.0-beta

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/lightningnetwork/lnd/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v0.7.0-beta)

 Loading

[View all tags](/lightningnetwork/lnd/tags)

![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)
[Roasbeef](/Roasbeef)
released this
02 Jul 17:11

·
[10661 commits](/lightningnetwork/lnd/compare/v0.7.0-beta...master)
to master
since this release

[v0.7.0-beta](/lightningnetwork/lnd/tree/v0.7.0-beta)

[`3698321`](/lightningnetwork/lnd/commit/36983214e8f7d24042fda61b048bb41daf6061da)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

This release marks a new major release of `lnd` that includes several important bug fixes, an improved payment API, pathfinding enhancements, faster initial sync times, support for fee bumping on sweeps, and an initial rollout of altruistic watchtowers. As always, **users are highly encouraged to upgrade to this new version**.

# Database Migrations

This version includes two migrations, the first is in `channel.db` which modifies the structure of the payment tracking data to support the refactored router and its ability to reliably display payments via the RPC. The migration should look like this:

```
2019-06-14 21:54:53.576 [INF] LTND: Version: 0.7.0-beta commit=v0.7.0-beta, build=production, logging=default
2019-06-14 21:54:53.579 [INF] LTND: Active chain: Bitcoin (network=mainnet)
2019-06-14 21:54:53.583 [INF] CHDB: Checking for schema update: latest_version=9, db_version=8
2019-06-14 21:54:53.586 [INF] CHDB: Performing database schema migration
2019-06-14 21:54:53.586 [INF] CHDB: Applying migration #9
2019-06-14 21:54:53.586 [INF] CHDB: Migrating outgoing payments to new bucket structure
2019-06-14 21:54:53.586 [INF] CHDB: Migration of outgoing payment bucket structure completed!

```

The second migration is in `wallet.db`, which prunes redundant block data already being stored by the underlying backend. The migration should look like this:

```
2019-06-14 21:54:53.744 [INF] LNWL: Applying wallet address manager migration #8
2019-06-14 21:54:53.746 [INF] LNWL: Removing block hash entries beyond maximum reorg depth of 10000 from current tip 580748

```

Once updated, it will not be possible to return to an older version of lnd.

# Verifying the Release

In order to verify the release, you'll need to have `gpg` or `gpg2` installed on your system. Once you've obtained a copy (and hopefully verified that as well), you'll first need to import the keys that have signed this release if you haven't done so already:

```
curl https://keybase.io/roasbeef/pgp_keys.asc | gpg --import

```

Once you have the required PGP keys, you can verify the release (assuming `manifest-v0.7.0-beta.txt` and `manifest-v0.7.0-beta.txt.sig` are in the current directory) with:

```
gpg --verify manifest-v0.7.0-beta.txt.sig

```

You should see the following if the verification was successful:

```
gpg: assuming signed data in 'manifest-v0.7.0-beta.txt'
gpg: Signature made Tue Jul  2 09:46:47 2019 PDT
gpg:                using RSA key F8037E70C12C7A263C032508CE58F7F8E20FD9A2
gpg: Good signature from "Olaoluwa Osuntokun <laolu32@gmail.com>" [ultimate]

```

That will verify the signature on the main manifest page which ensures integrity and authenticity of the binaries you've downloaded locally. Next, depending on your operating system you should then re-calculate the `sha256` sum of the binary, and compare that with the following hashes (which are included in the manifest file):

```
f8452608ff2e3ca6a0327c830f2fee5e837b5a39e0bf7cedd190857a5b8894f8  lnd-darwin-386-v0.7.0-beta.tar.gz
57a2eef7c337dbad6bbdc2bdffe459292d34ce354b58d74e74b329753dc134c8  lnd-darwin-amd64-v0.7.0-beta.tar.gz
c7cd6a1f4980fbefaf4acc49940332d3159b7b6af989afb9d0c211abe0208d53  lnd-dragonfly-amd64-v0.7.0-beta.tar.gz
8380e5944053f5a8255deb0f69b3dc0a2bac30402b82abec9f348cad53ec166f  lnd-freebsd-386-v0.7.0-beta.tar.gz
c818c3a983167312f3bf2c84cb285212c5052131319caaef287a97541d2ff479  lnd-freebsd-amd64-v0.7.0-beta.tar.gz
a1e861f4c9a4cf056030f40debd882c6f34502821d0edca27f415dcfbb9f7d8c  lnd-freebsd-arm-v0.7.0-beta.tar.gz
47be6c3391fadbc5a169fa1dd6dd13031d759b3d42c71a2d556751746b705c48  lnd-linux-386-v0.7.0-beta.tar.gz
2e7ed105b9e57103645bda30501cbf3386909cfed19a2fabcc3dc9117ce99a8f  lnd-linux-amd64-v0.7.0-beta.tar.gz
c995fa67d6b23e547723801de49817dda34188fba78d0fe8ae506774e54c0afd  lnd-linux-arm64-v0.7.0-beta.tar.gz
a653b66e28b30131c9b766989cb490013128022e047273f287bf0f42a19693b9  lnd-linux-armv6-v0.7.0-beta.tar.gz
ac51d96ee9b57bfcab0b05dbcfcd9ce3bd42a216354c0972e97c1a1c86c2479a  lnd-linux-armv7-v0.7.0-beta.tar.gz
a4a119855e3759e49472d7d0f1f8529e984e7e7fbcedb78463daf4d7f6aceb6e  lnd-linux-mips64-v0.7.0-beta.tar.gz
2e06c33c0c8c4f6ef680071095e652ea0b32ff164545a60aa372de3b12644db1  lnd-linux-mips64le-v0.7.0-beta.tar.gz
6d4bc470ae424bf46f1057149880f60a83057f26693f0098f3e9dd774355cdcd  lnd-linux-ppc64-v0.7.0-beta.tar.gz
d931981d6a742b07abc965e779fd8ed93a7dfdbbdeefea0a47b0cdf90a94b645  lnd-netbsd-386-v0.7.0-beta.tar.gz
db6d6be0cf5e7e791be097de944261db74ef1400b711dc6b825b21b7d3a2958f  lnd-netbsd-amd64-v0.7.0-beta.tar.gz
0ef5470c6ba928e740bf83ba86b7af05eb0df0d3077e92c347fb93cdcf7fb276  lnd-openbsd-386-v0.7.0-beta.tar.gz
ec8dae2c01d818a6cbc622b07f5be8a4355a25cc7a887216edc232c528257c20  lnd-openbsd-amd64-v0.7.0-beta.tar.gz
d5d9178178dca9a3e770dc74d655f579e6aafaec9e7b32a726c44dc093c52aa0  lnd-source-v0.7.0-beta.tar.gz
254ccdf63c2dbd95381663be0e132d60f3423c9568d304a4384823c198d12f8a  lnd-windows-386-v0.7.0-beta.zip
51badb5f690e8bc15e90331a42ea823399d1eb60708c4d682683f070ece13c23  lnd-windows-amd64-v0.7.0-beta.zip
4ee8e4b7d8372c8e750125dcdd93cd1b1b55687460a2f7fe1c8a23e60bb17e7b  vendor.tar.gz

```

One can use the `shasum -a 256 <file name here>` tool in order to re-compute the `sha256` hash of the target binary for your operating system. The produced hash should be compared with the hashes listed above and they should match *exactly*.

Finally, you can also verify the *tag* itself with the following command:

```
git verify-tag v0.7.0-beta

```

The binaries are compiled with `go1.12.6` and include the following build tags: `autopilotrpc`, `signrpc`, `walletrpc`, `chainrpc`, `invoicesrpc`, and `routerrpc`.

# Building the Contained Release

With this new version of `lnd`, we've modified our release process to ensure the bundled release is now *fully self contained*. As a result, with only the attached payload with this release, users will be able to rebuild the target release themselves without having to fetch any of the dependencies. Note that at this stage, binaries aren't yet fully reproducible (even with `go modules`). This is due to the fact that by default, [Go will include the full directory path where the binary was built in the binary itself](https://github.com/golang/go/issues/16860). As a result, unless your file system exactly mirrors the machine used to build the binary, you'll get a different binary, as it includes artifacts from your local file system. This will be fixed in `go1.13`, and before then we may modify our release system to do this automatically.

In order to re-build from scratch, assuming that `vendor.tar.gz` and `lnd-source-v0.7.0-beta.tar.gz` are in the current directory:

```
tar -xvzf vendor.tar.gz
tar -xvzf lnd-source-v0.7.0-beta.tar.gz
GO111MODULE=on go install -v -mod=vendor -ldflags "-X github.com/lightningnetwork/lnd/build.Commit=v0.7.0-beta" ./cmd/lnd
GO111MODULE=on go install -v -mod=vendor -ldflags "-X github.com/lightningnetwork/lnd/build.Commit=v0.7.0-beta" ./cmd/lncli

```

The `-mod=vendor` flag tells the `go build` command that it doesn't need to fetch the dependencies, and instead, they're all enclosed in the local vendor directory.

Additionally, it's now possible to use the [enclosed `release.sh` script to bundle a release for a *specific* system like so](https://github.com/lightningnetwork/lnd/pull/2191):

```
LNDBUILDSYS="linux-arm64 darwin-amd64" ./release.sh

```

⚡️⚡️⚡️ OK, now to the rest of the release notes! ⚡️⚡️⚡️

# Release Notes (in progress)

## `bitcoind` 0.18 compatibility

This new version of `lnd` has updated the way we check for errors over the RPC interface after we broadcast a transaction to be compatible with `bitcoind v0.18`. Note that the “master” branch of `bitcoind` isn’t yet supported yet as it includes distinct RPC changes to `sendrawtransaction` in particular that will require further updates in `lnd`. We’re targeting `lnd v0.7.1.` to fix these remaining RPC compatibility issues.

## Private Altruist Watchtowers

In this release, we’re rolling out the ability to run a private, altruist watchtower as a fully-integrated subsystem of `lnd`. Watchtowers act as a second line of defense in responding to malicious or accidental breach scenarios in the event that client’s node is offline or unable to respond at the time of a breach, offering greater degree of safety to channel funds.

In contrast to a *reward watchtower* which demand a portion of the channel funds as a reward for fulfilling its duty, an *altruist watchtower* returns all of the victim’s funds (minus on-chain fees) without taking a cut. Reward watchtowers will be enabled in a subsequent release, though are still undergoing further testing and refinement.

In addition, `lnd` can now be configured to operate as a *watchtower client*, backing up encrypted breach-remedy transactions (aka. justice transactions) to other altruist watchtowers. The watchtower stores the fixed-size, encrypted blobs and is only able to decrypt and publish the justice transaction after the offending party has broadcast a revoked commitment state. Client communications with a watchtower are encrypted and authenticated using ephemeral keypairs, mitigating the amount of tracking the watchtower can perform on its clients using long-term identifiers.

Note that we have chosen to deploy a restricted set of features in this release that can begin to provide meaningful security to `lnd` users. Many more watchtower-related features are nearly complete or have meaningful progress, and we will continue to ship them as they receive further testing and become safe to release.

### Configuring a Watchtower

To set up a watchtower, command line users should compile in the optional `watchtowerrpc` subserver, which will offer the ability to interface with the tower via gRPC or `lncli`. The minimal configuration needed to activate the tower is `watchtower.active=1`.

By default, the watchtower will listen on `:9911` which specifies port `9911` listening on all available interfaces. Users may configure their own listeners via the `--watchtower.listen=` option.

Additionally, users can specify their tower’s external IP address(es) using `watchtower.externalips`, which will expose the full tower URI over RPC. These can be given to clients in order to connect and use the tower.

Note: *The watchtower’s public key is distinct from `lnd`’s node public key. For now this acts as a soft whitelist as it requires clients to know the tower’s public key in order to use it for backups before more advanced whitelisting features are implemented. We recommend NOT disclosing this public key openly, unless you are prepared to open your tower up to the entire Internet.*

Retrieving information about your tower’s configurations can be done using `lncli tower info`:

```
🏔 lncli tower info
{
        "pubkey": "03281d603b2c5e19b8893a484eb938d7377179a9ef1a6bca4c0bcbbfc291657b63",
        "listeners": [
                "[::]:9911"
        ],
        "uris": [
                "03281d603b2c5e19b8893a484eb938d7377179a9ef1a6bca4c0bcbbfc291657b63@1.2.3.4:9911"

}

```

The entire set of watchtower configuration options can be found using `lncli -h`:

```
watchtower:
      --watchtower.active                                     If the watchtower should be active or not
      --watchtower.towerdir=                                  Directory of the watchtower.db (default: $HOME/.lnd/data/watchtower)
      --watchtower.listen=                                    Add interfaces/ports to listen for peer connections
      --watchtower.externalip=                                Add interfaces/ports where the watchtower can accept peer connections
      --watchtower.readtimeout=                               Duration the watchtower server will wait for messages to be received before hanging up on client connections
      --watchtower.writetimeout=                              Duration the watchtower server will wait for messages to be written before hanging up on client connections

```
### Configuring a Watchtower Client

In order to set up a watchtower client, you’ll need the watchtower URI of an active watchtower. `lnd` can the ben configured to start using the tower by setting:

```
wtclient.private-tower-uris=03281d603b2c5e19b8893a484eb938d7377179a9ef1a6bca4c0bcbbfc291657b63@1.2.3.4:9911

```

Users may optionally configure the fee rate of justice transactions by setting the `wtclient.sweep-fee-rate` option, which accepts values in sat/byte.

The entire set of watchtower client configuration options can be found using `lncli -h`:

```
wtclient:
      --wtclient.private-tower-uris=                          Specifies the URIs of private watchtowers to use in backing up revoked states. URIs must be of the form <pubkey>@<addr>. Only 1 URI is supported at this time, if none are provided the tower will not be enabled.
      --wtclient.sweep-fee-rate=                              Specifies the fee rate in sat/byte to be used when constructing justice transactions sent to the watchtower.

```

For now, no information regarding the operation of the watchtower client is exposed over the RPC interface. We are working to expose this information in a later release, progress on this can be tracked [in this PR](https://github.com/lightningnetwork/lnd/pull/3184). Users will be reliant on logs for observing the behavior of the client. We also plan to expand on the initial feature set by permitting multiple active towers for redundancy, as well as modifying the chosen set of towers dynamically without restarting the daemon.

## gRPC Prometheus Exports

A build tag has been added: `monitoring`. If built with this tag, `lnd` has the ability to export Prometheus metrics about its gRPC performance. These metrics include keeping track of how many times each gRPC call has been invoked, how many bytes have been transmitted and received for each gRPC call, and more.

To enable Prometheus exporting after building `lnd` with the `monitoring` tag, run `lnd` with this flag:

```
--prometheus.enable

```

To change the address that `lnd` listens on for Prometheus, add this flag:

```
--prometheus.listen=<address>

```

By default, `lnd`'s Prometheus exporter listens on `localhost:8989`.

## Wallet Bug Fixes

[A bug has been fixed that would cause the `EstimateFee` and `SendOutputs` RPC commands to fail if conditions of higher fees](https://github.com/lightningnetwork/lnd/pull/3218). The root cause was using the transactions effective fee rate instead of the minrelayfee when computing dust in certain scenarios.

## Wallet Chain Sync Improvements

There was a period of time where the wallet would only store the latest 25,000 block headers of the chain in order to properly recover from chain reorgs, but this was modified to the existing behavior of storing all of them due to deep reorgs on the testnet chain during `lnd`s initial testing and development. [In this release, we revert back to the prior behavior, but will instead only store the latest 10,000 as a generous safety margin](https://github.com/btcsuite/btcwallet/pull/618).

As a result of doing so, the initial sync process is sped up. Neutrino backends saw the least improvements in this department, while bitcoind saw the most.

[The wallet will also now detect that the chain backend (i.e., `btcd`, `bitcoind`, etc.) is currently syncing if its latest block does not have a timestamp within the past 2 hours](https://github.com/btcsuite/btcwallet/commit/17efcdba2fc05889b8157f436d44b120e5fb01b1), allowing us to start `lnd` while the chain backend syncs.

## UtxoSweeper Improvements

Recent versions of `lnd` have seen development of a new subsystem: the `UtxoSweeper`. The [release notes of our v0.6.0-beta release](https://github.com/lightningnetwork/lnd/releases/tag/v0.6-beta) provide a brief overview of its duties. In this release, we continue to expand its functionality by allowing users to obtain information about the list of inputs being batched by the `UtxoSweeper` through [a new `PendingSweeps` RPC and its corresponding `lncli wallet pendingseeps` command](https://github.com/lightningnetwork/lnd/pull/3089).

[We also now allow users to bump the fee rate of an input with the Replace-By-Fee (RBF) policy or a transaction with the Child-Pays-For-Parent (CPFP) policy through the `BumpFee` RPC and its corresponding `lncli wallet bumpfee` command](https://github.com/lightningnetwork/lnd/pull/3140). In order to provide this functionality, the `UtxoSweeper` first had to be [extended to support sweeping distinct batches of inputs with similar fee preferences](https://github.com/lightningnetwork/lnd/pull/3026).

Fee bumping within `lnd` will take a different approach than the popular `bitcoin-cli bumpfee` command. Since the `UtxoSweeper` batches transactions together, `lnd` cannot rely on bumping a transaction’s fee by providing its hash since it can change at any point with the addition/removal of new inputs. Instead, fee bumping relies on an outpoint being provided along with a fee preference.

A fee preference can be defined as one of any of the following options, which will likely expand in future releases.

* Static fee rate: fixed fee rate to spent an input on-chain with.
* Confirmation target: a delta of blocks from the current height of the chain in which an input should be spend on-chain within.

When bumping the fee of an input that currently exists within the `UtxoSweeper`, a transaction is created with a fee rate backed by the fee preference provided that replaces the lower fee transaction through the RBF policy. When bumping the fee of an input that points to an unconfirmed transaction output which belongs to the user’s wallet, a transaction that spends this input is created with a fee rate backed by the fee preference provided. This spending transaction can be interpreted as the child in a CPFP scenario.

The current design presents some shortcomings which will be addressed in future releases as we develop things further. These include:

* Fee preference validation checks are *not* in place to ensure they provide a sufficiently higher fee rate in order for a fee bump to be successful. This responsibility is delegated to the user.
* The `UtxoSweeper` does not persist any inputs to disk, so restarting `lnd` will require incomplete fee bump requests to be requested again.

## `lncli` Bug Fixes

[We'll now properly parse an optional single or multi channel backup being provided as part of `lncli create`](https://github.com/lightningnetwork/lnd/pull/3104).

[We'll now properly spend unconfirmed UTXOs as part of `lncli openchannel` when providing a `min_confs` parameter of 0](https://github.com/lightningnetwork/lnd/pull/3093).

## Config Changes

[Users can now use the `--tlsextraip` and `--tlsextradomain` fields to set multiple IPs or domains when generating certs](https://github.com/lightningnetwork/lnd/pull/2704).

[A new `neutrino.assertfilterheader` filter header flag has been added to `lnd`](https://github.com/lightningnetwork/lnd/pull/3118). In the past the neutrino protocol underwent a number of changes, some of which affected exactly *what* is included in the filter. Older clients may have been on persistent incorrect filter chains as a result of this. This new argument allows a client to ensure it has the right filter chain using an externally provided filter header hash. If this hash doesn’t match, then the neutrino client will delete their state and re-sync the filter header chain.

Litecoin support has been extended to also [include the simnet](https://github.com/lightningnetwork/lnd/pull/3045) and [regtest chains](https://github.com/lightningnetwork/lnd/pull/2189).

## Interoperability Improvements

### CLTV Tie-Breaking in Commitment Output Sorting

A nuanced, spec-level bug has been fixed for [properly sorting HTLCs on the commitment transaction](https://github.com/lightningnetwork/lnd/pull/3142). When HTLCs of identical payment hash and amount appear on the same commitment transaction, the original BIP69 sorting could lead to a channel failure if the HTLCs had different CLTV values since the second-layer transactions would have different sighashes. This happens because the CLTV is enforced via `nLockTime` field of the descendant transaction, and weren’t being considered in the sorting of the commitment outputs. The [new spec sorting](https://github.com/lightningnetwork/lightning-rfc/pull/491) resolves this by using the CLTV values of HTLC outputs as tiebreakers when the payment hash and amount are identical.

Since 0.5, `lnd` has forbidden sending out more than one HTLC for the same payment hash at a given time, so users on pre-0.7 versions are unlikely to experience this bug in purely `lnd` to `lnd` interactions, or have triggered it on other nodes in the network. However, it’s possible that forwarding payments from implementations that permit duplicate payments can trigger the bug and result in a channel closure. This bug should be completely eliminated going forward.

### Increased Non-initiator Funding Timeout

When another node initiates a channel open with `lnd`, the non-initiator forgets about the channel if it doesn’t confirm in timely manner. In 0.7, this timeout has been [raised to two weeks](https://github.com/lightningnetwork/lnd/pull/3098) from the prior value of two days. This allows `lnd` to tolerate channel initiators with a low time preference (set a low fee rate) and better tolerate fee spikes or on-chain congestion during the funding process.

## P2P and Gossip Improvements

Prior versions of `lnd` would send out all updates (or new channels) to connected active syncing peers in a single payload. This could at times cause slight memory spikes if many channels were mined in a single block for example. [This latest version of `lnd` will instead now split announcements into multi sub-batches when it’s time to flush the set of pending messages](https://github.com/lightningnetwork/lnd/pull/2985). This change reduces GC pressure, and also naturally implements a variant of flow control to ensure minimal load during announcement batch flushes. It also makes sure to [redo a historical sync](https://github.com/lightningnetwork/lnd/pull/3103) if a new peer has connected after losing all of its peers.

## RPC Server and RPC Sub-Server Changes

[`lnd`’s RPC certificates will now be automatically re-generated by the daemon if upon restart, we detect that they’ve expired](https://github.com/lightningnetwork/lnd/pull/3011). Many nodes that were created greater than a year ago may have run into this issue, and had to delete and then regenerate themselves.

[The `NodeUpdate` and `GetNodeInfo` commands now include the color of the target node](https://github.com/lightningnetwork/lnd/pull/2312).

[The `closeallchannels` command within `lncli` now exposes a `conf_target` or `sat_per_byte` arguments in order to allow the user to control the fee rate used to close all transactions.](https://github.com/lightningnetwork/lnd/pull/990)

### Transaction Hex in GetTransactions

[The `GetTransactions` RPC call now also includes the serialized hex version of the transaction.](https://github.com/lightningnetwork/lnd/pull/3174) This exposes information the wallet already has and can be helpful for external accounting systems connected to `lnd`, or for usage with the new `BumpFee` command added in this version.

### Display Paid Payment Requests

When making payments via the `SendPayment` RPC, the [paid invoice will now be displayed](https://github.com/lightningnetwork/lnd/pull/2717) in the `ListPayments` results. Similarly, payments via `lncli payinvoice` will show the invoice in `lncli listpayments`. This allows applications to recover the details, e.g. the invoice memo, without needing to track them separately.

### Zero Fees With `UpdateChanPolicy`

[It’s now possible to set fees to rock bottom (zero!) using `lncli updatechanpolicy` or the `UpdateChanPolicy` RPC command](https://github.com/lightningnetwork/lnd/pull/3139).

### Channel Display in GetNodeInfo

The `GetNodeInfo` command will now optionally also return the set of channels belonging to a particular node. This is useful as it saves additional look ups, and a client-side mapping between channel ID and node using the `DescribeGraph` command. Arguments for the new `lncli` command are as follows:

```
⛰   lncli getnodeinfo -h
NAME:
   lncli getnodeinfo - Get information on a specific node.

USAGE:
   lncli getnodeinfo [command options] [arguments...]

CATEGORY:
   Peers

DESCRIPTION:
   Prints out the latest authenticated node state for an advertised node

OPTIONS:
   --pub_key value     the 33-byte hex-encoded compressed public of the target node
   --include_channels  if true, will return all known channels associated with the node

```
### Structured SendToRoute Errors

A [new `SendToRoute` rpc](https://github.com/lightningnetwork/lnd/pull/1662) has been added to the `router` sub-server. This call improves upon the main rpc `SendToRoute` rpc by returning errors as proper proto messages. No more (regex) string parsing. As part of this change, the (deprecated) option to pass in multiple routes to the main `SendToRoute` was removed.

### Payment RPCs

The interface of [`SendPayment`](https://github.com/lightningnetwork/lnd/pull/2973) in the `router` sub-server has been modified. It now takes a custom payment timeout value. This defines the duration after which no new attempts to complete the payment are initiated. The call also requires the fee limit to be set explicitly. The fee limit is an important parameter and not having a default value for this forces callers to make a conscious decision about its value. Another change is that `SendPayment` only returns payment-level failures. This set of failures is currently limited, but will be extended in the future. The previously returned last payment attempt error is no longer available, because its informative value is considered limited.

Furthermore a new call `TrackPayment` was added. `TrackPayment` can be used to pick up and track the status of pending payments, for example after losing the connection or across restarts.

### Payment Persistence

A series of PRs ([#3064](https://github.com/lightningnetwork/lnd/pull/3064), [#3063](https://github.com/lightningnetwork/lnd/pull/3063), [#2761](https://github.com/lightningnetwork/lnd/pull/2761), [#2762](https://github.com/lightningnetwork/lnd/pull/2762)) has been merged, making `lnd` better handle in-flights payments across restarts. `lnd` will now write any attempted payment to the database, such that should the daemon restart before the result comes back, it will correctly record it to the DB. This means that payments can now be in states “in flight”, “failed” or “succeeded”, which can all be shown by calling `lncli listpayments --include_incomplete` ([#3190](https://github.com/lightningnetwork/lnd/pull/3190)).

## Probability Based Mission Control

In prior versions of `lnd`, when we encountered a path finding failure, we would simply ignore the edge or node that caused for error for 5 or 15 seconds, continuing one with that path finding session. This naive approach has a number of issues. As an example, this means that shortly after a node makes a payment, it forgets all the prior context it used to successfully route the payment. Additionally, the prior version didn’t share this information amongst concurrent in-flight payment sessions, meaning each session couldn’t learn from attempts of other on going sessions. Users may have noticed this “cold start” effect when they go to send a new payment a few minutes the last successful payment attempt. In older versions of `lnd`, the path finding would try a series of channels that it likely knew *wouldn’t* work, before finally finding the golden set of channels that reliably work.

In this new version of `lnd`, the previously used edge and node black lists in path finding are replaced by [a probability based system](https://github.com/lightningnetwork/lnd/pull/2802). It modifies path finding so that it not only compares routes on fee and time lock, but also takes route success probability into account. Each channel starts out with a default “apriori” probability. As path finding attempts fail, we reduce the probability of channels that have failed to zero, exponentially decaying back to the default apiori probability. This means that `lnd` will now properly “learn” from its past path finding attempts. Additionally, since this algorithm is less greedy than the prior algorithm, it may return a distinct set of paths compared to the prior algorithm, exploring avenues that maybe didn’t seem “optimal”, but still have a high probability of success.

The new system is similar to “active learning” based approaches in machine learning. `lnd` will now continually update its view of the network based on empirical observations of payment failures. In addition to that, historical payment attempt outcomes are kept in mission control memory longer and improve path finding for future payments. A new diagnostic rpc has been added to query the current mission control state. Several configuration options are exposed to give more control of mission control behavior:

```
      --routerrpc.minrtprob=                                  Minimum required route success probability to attempt the payment (default: 0.01)
      --routerrpc.apriorihopprob=                             Assumed success probability of a hop in a route when no other information is available. (default: 0.95)
      --routerrpc.penaltyhalflife=                            Defines the duration after which a penalized node or channel is back at 50% probability (default: 1h0m0s)
      --routerrpc.attemptcost=                                The (virtual) cost in sats of a failed payment attempt (default: 100)

```

A new `querymc` sub-server RPC command has been added to allow users to peek into this diagnostic information. Eventually users may be able to share their mission control state (the effective “memory” of the router), amongst their other nodes in order to ensure they don’t need to re-discover the set of reliable channels.

These changes prepare for further enhancements that will increase payment reliability.

The deprecated `num_routes` parameter of `QueryRoutes` has [been removed](https://github.com/lightningnetwork/lnd/pull/3054).

## Invoice Settling

Several changes with respect to [invoice settling](https://github.com/lightningnetwork/lnd/pull/2913) have been made. This makes the logic of off-chain and on-chain invoice settling more consistent and is a preparatory step for atomic multiple path payments.

## Neutrino Improvements

All integration tests are now run continuously with the [`neutrino` chain backend](https://github.com/lightningnetwork/lnd/pull/1881) , in addition to the existing tests using `btcd`!

[When running `lnd` with neutrino active, the daemon will now properly shutdown even if it’s in the middle of checking for the spentness of a particular UTXO.](https://github.com/lightningnetwork/lnd/pull/2716)

## Static Channel Backups

A bug fix has been made to the current on-disk SCB format in the Windows operating system. Before this release, `lnd` wouldn’t properly close the temporary SCB file before swapping it over to the permanent file name (atomic file rename). On Windows in particular, this would cause the swap to fail, meaning that the file wouldn’t be updated on disk. [We’ve fixed this issue in this latest release, by always closing the temporary file before we attempt to modify it](https://github.com/lightningnetwork/lnd/pull/3129).

## Changelog

The full list of changes since `0.6.1-beta` can be found here:

* [v0.6.1-beta...v0.7.0-beta](https://github.com/lightningnetwork/lnd/compare/v0.6.1-beta...v0.7.0-beta)

# Contributors (Alphabetical Order)

2xic

AdamISZ

chokoboko

Conner Fromknecht

Daniel McNally

Eugene Zeigel

Federico Bond

Francisco Calderón

Geoff Taylor

Johan T. Halseth

John Griffith

Joost Jager

Matt Drollette

michael1011

Neevai Esinly

Olaoluwa Osuntokun

OrbitalTurtle

Valentine Wallace

Wilmer Paulino

Xavi Soler

Yaacov Akiba Slama

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


