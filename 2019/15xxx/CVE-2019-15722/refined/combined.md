=== Content from gitlab.com_97a9e8e0_20250120_234413.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

Project 'gitlab-org/gitlab-ce' was moved to 'gitlab-org/gitlab-foss'. Please update any links and bookmarks that may still have the old path.

# Clientside resource Exhausting by exploiting gitlab math rendering

**[HackerOne report #549040](https://hackerone.com/reports/549040)** by `abdilahrf_` on 2019-04-26, assigned to `hackerjuan`:

**[Workflow issue on dev](https://dev.gitlab.org/gitlab/gitlabhq/issues/2884)**

### Summary

based on the documentation gitlab markdown is supporting math expresion rendering using `KaTex` and able to run subset syntax from `LaTex` this could be achieved by using 2 ways in the markdown for inline and for multiline.

[![KaTex.PNG](data:image/gif;base64...)](https://user-content.gitlab-static.net/f4376878d4316bf7751ee7fab34c0b90c8db3ea3/68747470733a2f2f68312e7365632e6769746c61622e6e65742f612f37303035326362662d333865652d343931612d393230392d6262336235663862316362612f4b615465782e504e47)

### Steps to reproduce

Step-by-step guide to reproduce the issue, including:

1. Pick any repositories that you want to attack
2. Create new issue and use payload [1.md](https://gist.github.com/abdilahrf/959d75c5d39034ebc411844316a7ce4c#file-1-md) or [2.md](https://gist.github.com/abdilahrf/959d75c5d39034ebc411844316a7ce4c#file-2-md)
3. Everyone trying to open the issue will get hang since this generate tons of resources

Or check out this video :

[clientside-resource-exhausting.mp4](https://user-content.gitlab-static.net/7be9070d0b536a882d59f78b7c14cbb607452792/68747470733a2f2f68312e7365632e6769746c61622e6e65742f612f30623038633662612d393939362d346566652d386236652d3162356130626464313830652f636c69656e74736964652d7265736f757263652d65786861757374696e672e6d7034 "Download 'clientside-resource-exhausting.mp4'")

### Impact

Project owner/everyone that trying to view the issue is got hang by the `KaTex` trying to render nested `sqrt` function without any limitation and making the owner unable to close the issue.

### What is the current *bug* behavior?

I was able to using nested sqrt and rules function without any limitation and making the website unresponsive

### What is the expected *correct* behavior?

The nested function should be limited using fixed normal amount, and should use `maxSize` to limit the visual width/height

### Output of checks

[abdilah.pb/testing-project#2](https://gitlab.com/abdilah.pb/testing-project/issues/2 "Clientside resource exhausting")

### Remediation

Use maxSize option for preventing large width/height visual affronts, use maxExpand for preventing infinite macro loop attacks, and use allowedProtocols for preventing certain protocols in \href. Please refer to Options for more details. <https://katex.org/docs/security.html>

## Impact

Project owner/everyone that trying to view the issue is got hang by the `KaTex` trying to render nested `sqrt` function without any limitation and making the owner unable to close the issue.

## Attachments

**Warning:** Attachments received through HackerOne, please exercise caution!

* [KaTex.PNG](https://h1.sec.gitlab.net/a/70052cbf-38ee-491a-9209-bb3b5f8b1cba/KaTex.PNG)
* [clientside-resource-exhausting.mp4](https://h1.sec.gitlab.net/a/0b08c6ba-9996-4efe-8b6e-1b5a0bdd180e/clientside-resource-exhausting.mp4)

Edited Jul 22, 2019 by [Martin Hanzel](/arthanzel)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.


