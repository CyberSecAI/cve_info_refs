=== Content from gitlab.com_83f428dc_20250120_232259.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

Project 'gitlab-org/gitlab-ce' was moved to 'gitlab-org/gitlab-foss'. Please update any links and bookmarks that may still have the old path.

# Disclosure of Merge Request ID to Unauthorized Users

### Summary

When an issue is closed via a merge request, the email notification to users which have access to issues, but not the repository, will include a reference to the merge request. This includes users, which are:

* Guests in private projects
* Non-project users in public/internal project where access to the repository has been limited to `Project Members Only`.

### Steps to reproduce

1. Create private project with user2 as a Guest
2. Create an issue
3. Tag user2 in issue so that they receive notifications
4. Create a merge request, which closes the issue
5. Merge the merge request to close the issue

### What is the current *bug* behavior?

User2 above will receive an email with the following text

`Issue was closed by User1 via merge request!1`

### What is the expected *correct* behavior?

The merge request reference should not be included in the email.

### Output of checks

This happens on GitLab.com

### Possible fixes

<https://gitlab.com/gitlab-org/gitlab-ce/blob/master/app/helpers/emails_helper.rb#L91> does not validate the user has permission to reference the Merge Request before including the reference in email body.

Edited Jun 11, 2019 by [Ethan Strike](/estrike)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.


