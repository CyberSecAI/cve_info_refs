=== Content from security.openstack.org_af622dd3_20250121_002316.html ===


Toggle navigation

 Search

* [Software](https://www.openstack.org/software/)
  + [Overview](https://www.openstack.org/software/)
  + [OpenStack Components](https://www.openstack.org/software/project-navigator/openstack-components)
  + [SDKs](https://www.openstack.org/software/project-navigator/sdks)
  + [Deployment Tools](https://www.openstack.org/software/project-navigator/deployment-tools)
  + [OpenStack Map](https://www.openstack.org/assets/software/projectmap/openstack-map.pdf)
  + [Sample Configs](https://www.openstack.org/software/sample-configs/)
* [Use Cases](https://www.openstack.org/use-cases/)
  + [Users in Production](https://www.openstack.org/use-cases/)
  + [Ironic Bare Metal](https://www.openstack.org/use-cases/bare-metal/)
  + [Edge Computing](https://www.openstack.org/use-cases/edge-computing/)
  + [Telecom & NFV](https://www.openstack.org/use-cases/telecoms-and-nfv/)
  + [Science and HPC](https://www.openstack.org/use-cases/science/)
  + [Containers](https://www.openstack.org/use-cases/containers/)
  + [Enterprise](https://www.openstack.org/use-cases/enterprise/)
  + [User Survey](https://www.openstack.org/surveys/landing)
* [Events](https://openinfra.dev/summit)
  + [OpenInfra Summit](https://openinfra.dev/summit)
  + [Project Teams Gathering](https://www.openstack.org/ptg/)
  + [OpenDev](https://www.openstack.org/events/opendev-2020/)
  + [Community Events](https://www.openstack.org/events/community-events/)
  + [OpenStack & OpenInfra Days](https://www.openstack.org/events/openstackdays)
  + [Summit Videos](https://www.openstack.org/videos/)
* [Community](https://www.openstack.org/community/)
  + [Welcome! Start Here](https://www.openstack.org/community/)
  + [OpenStack Technical Committee](https://www.openstack.org/community/tech-committee)
  + [Speakers Bureau](https://www.openstack.org/community/speakers/)
  + [OpenStack Wiki](http://wiki.openstack.org)
  + [Get Certified (COA)](https://www.openstack.org/coa/)
  + [Jobs](https://www.openstack.org/community/jobs/)
  + [Marketing Resources](https://www.openstack.org/marketing/)
  + [Community News](https://www.openstack.org/news/)
  + [Superuser Magazine](http://superuser.openstack.org)
  + [OpenInfra Foundation Supporting Organizations](https://www.openstack.org/community/supporting-organizations/)
  + [OpenInfra Foundation](https://openinfra.dev)
* [Marketplace](https://www.openstack.org/marketplace/)
  + [Training](https://www.openstack.org/marketplace/training/)
  + [Distros & Appliances](https://www.openstack.org/marketplace/distros/)
  + [Public Clouds](https://www.openstack.org/marketplace/public-clouds/)
  + [Hosted Private Clouds](https://www.openstack.org/marketplace/hosted-private-clouds/)
  + [Remotely Managed Private Clouds](https://www.openstack.org/marketplace/remotely-managed-private-clouds/)
  + [Consulting & Integrators](https://www.openstack.org/marketplace/consulting/)
  + [Drivers](https://www.openstack.org/marketplace/drivers/)
* [Blog](https://www.openstack.org/blog/)
* [Docs](http://docs.openstack.org/)
* [Join](https://openinfra.dev/join/)
  + [Sign up for Foundation Membership](https://openinfra.dev/join/)
  + [Sponsor the Foundation](https://openinfra.dev/join/)
  + [More about the Foundation](https://openinfra.dev)
* [Log In](https://www.openstack.org/Security/login/?BackURL=/home/)

# OSSA-2019-004: Ageing time of 0 disables linuxbridge MAC learning

# OSSA-2019-004: Ageing time of 0 disables linuxbridge MAC learning[Â¶](#ossa-2019-004-ageing-time-of-0-disables-linuxbridge-mac-learning "Link to this heading")

Date:

August 29, 2019

CVE:

CVE-2019-15753

## Affects[Â¶](#affects "Link to this heading")

* Os-vif: >=1.15.0<1.15.2, 1.16.0

## Description[Â¶](#description "Link to this heading")

James Denton with Rackspace reported a vulnerability in os-vif, the Nova/Neutron network integration library. A hard-coded MAC ageing time of 0 disables MAC learning in linuxbridge, forcing obligatory Ethernet flooding for non-local destinations which both impedes network performance and allows users to possibly view the content of packets for instances belonging to other tenants sharing the same network. Only deployments using the linuxbridge backend are affected.

## Patches[Â¶](#patches "Link to this heading")

* <https://review.opendev.org/678098> (Stein)
* <https://review.opendev.org/672834> (Train)

## Credits[Â¶](#credits "Link to this heading")

* James Denton from Rackspace (CVE-2019-15753)

## References[Â¶](#references "Link to this heading")

* <https://launchpad.net/bugs/1837252>
* <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-15753>

this page last updated: 2025-01-07 18:17:35

[![Creative Commons Attribution 3.0 License](../_static/images/docs/license.png)](https://creativecommons.org/licenses/by/3.0/)

Except where otherwise noted, this document is licensed under
[Creative Commons
Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/). See all [OpenStack Legal Documents](https://www.openstack.org/legal).

found an error? report a bug

OpenStack Documentation

* Guides
* [Install Guides](https://docs.openstack.org/index.html#install-guides)
* [User Guides](https://docs.openstack.org/index.html#user-guides)
* [Configuration Guides](https://docs.openstack.org/index.html#configuration-guides)
* [Operations and Administration Guides](https://docs.openstack.org/index.html#ops-and-admin-guides)
* [API Guides](https://docs.openstack.org/index.html#api-guides)
* [Contributor Guides](https://docs.openstack.org/index.html#contributor-guides)
* Languages
* [Deutsch (German)](https://docs.openstack.org/de/)
* [FranÃ§ais (French)](https://docs.openstack.org/fr/)
* [Bahasa Indonesia (Indonesian)](https://docs.openstack.org/id/)
* [Italiano (Italian)](https://docs.openstack.org/it/)
* [æ¥æ¬èª (Japanese)](https://docs.openstack.org/ja/)
* [íêµ­ì´ (Korean)](https://docs.openstack.org/ko_KR/)
* [PortuguÃªs (Portuguese)](https://docs.openstack.org/pt_BR/)
* [TÃ¼rkÃ§e (TÃ¼rkiye)](https://docs.openstack.org/tr_TR/)
* [ç®ä½ä¸­æ (Simplified Chinese)](https://docs.openstack.org/zh_CN/)

#### Contents

* OSSA-2019-004: Ageing time of 0 disables linuxbridge MAC learning
  + [Affects](#affects)
  + [Description](#description)
  + [Patches](#patches)
  + [Credits](#credits)
  + [References](#references)

### OpenStack

* [Projects](https://www.openstack.org/software/project-navigator/)
* [OpenStack Security](https://security.openstack.org/)
* [Blog](https://openstack.org/blog/)
* [News](https://openstack.org/news/)

### Community

* [User Groups](https://www.meetup.com/pro/openinfradev/)
* [Events](https://openstack.org/community/events/)
* [Jobs](https://openstack.org/community/jobs/)
* [Companies](https://openinfra.dev/members/)
* [Contribute](https://docs.openstack.org/contributors)

### Documentation

* [OpenStack Manuals](https://docs.openstack.org)
* [Getting Started](https://openstack.org/software/start/)
* [API Documentation](https://developer.openstack.org)
* [Wiki](https://wiki.openstack.org)

### Branding & Legal

* [Legal Docs](https://openinfra.dev/legal)
* [Logos & Guidelines](https://openstack.org/brand/)
* [Trademark Policy](https://openinfra.dev/legal/trademark-policy)
* [Privacy Policy](https://openinfra.dev/privacy-policy)
* [OpenInfra CLA](https://docs.openstack.org/contributors/common/setup-gerrit.html#individual-contributor-license-agreement)

### Stay In Touch

The OpenStack project is provided under the
[Apache 2.0 license](https://www.apache.org/licenses/LICENSE-2.0). Docs.openstack.org is powered by
[Rackspace Cloud Computing](https://rackspace.com).



=== Content from review.opendev.org_bc009bf4_20250121_023120.html ===




=== Content from creativecommons.org_d0e95cfe_20250121_023118.html ===

[Skip to content](#main-content-marker)

# [Creative Commons](/)

Menu

* [Who We Are](/about/team)
* [What We Do](/about)
* [Licenses and Tools](/about/cclicenses/)
* [Blog](/blog)
* [Support Us](/about/support-cc/)

* Languages available

  aragonÃ©s

  AzÉrbaycanca

  Bahasa Indonesia

  Basque

  catalÃ

  dansk

  Deutsch

  eesti

  English

  espaÃ±ol

  Esperanto

  franÃ§ais

  frysk

  Gaeilge

  galego

  Hrvatski

  italiano

  latvieÅ¡u

  LietuviÅ¡kai

  Magyar

  Melayu

  Nederlands

  norsk

  polski

  PortuguÃªs

  PortuguÃªs Brasileiro

  RomÃ¢nÄ

  Slovensky

  SlovenÅ¡Äina

  srpski (latinica)

  suomi

  svenska

  TÃ¼rkÃ§e

  Ãslenska

  Äesky

  ÎÎ»Î»Î·Î½Î¹ÎºÎ¬

  Ð±ÐµÐ»Ð°ÑÑÑÐºÐ°Ñ

  Ð±ÑÐ»Ð³Ð°ÑÑÐºÐ¸

  Ð ÑÑÑÐºÐ¸Ð¹

  Ð£ÐºÑÐ°ÑÐ½ÑÑÐºÐ°

  Ø§ÙØ¹Ø±Ø¨ÙÙØ©

  ÙØ§Ø±Ø³Û

  à¤¹à¤¿à¤à¤¦à¥

  à¦¬à¦¾à¦à¦²à¦¾

  æ¥æ¬èª

  ç®ä½ä¸­æ

  ç¹é«ä¸­æ

  íêµ­ì´
* [Search](/?s)
* [Donate](https://www.classy.org/give/313412/#!/donation/checkout?c_src=website&c_src2=top-of-page-banner)
* Explore CC

* [Global Network](https://network.creativecommons.org/)

  Join a global community working to strengthen the Commons
* [Certificate](https://certificate.creativecommons.org/)

  Become an expert in creating and engaging with openly licensed materials
* [Global Summit](https://summit.creativecommons.org/)

  Attend our annual event, promoting the power of open licensing
* [Chooser](/choose)

  Get help choosing the appropriate license for your work
* [Search Portal](https://search.creativecommons.org/)

  Find engines to search openly licensed material for creative and educational reuse
* [Open Source](https://opensource.creativecommons.org/)

  Help us build products that maximize creativity and innovation

Help us protect the commons. Make a tax deductible gift to fund our work in 2025.
[Donate today!](https://www.classy.org/give/313412/#!/donation/checkout?c_src=website&c_src2=temp-banner)

# Attribution 3.0 Unported

CC BY 3.0

## Deed

## Notice

This is an older version of this license. Compared to previous versions, the 4.0 versions of all CC licenses are
[more user-friendly and more internationally robust](/version4/)
. If you are
[licensing your own work](/choose/)
, we strongly recommend the use of the 4.0 license instead:
[Deed - Attribution 4.0 International](../4.0/deed.en)

## Canonical URL

<https://creativecommons.org/licenses/by/3.0/>

[See the legal code](legalcode.en)

## You are free to:

1. **Share**
   â copy and redistribute the material in any medium or format
   for any purpose, even commercially.
2. **Adapt**
   â remix, transform, and build upon the material
   for any purpose, even commercially.
3. The licensor cannot revoke these freedoms as long as you follow the license terms.

## Under the following terms:

1. **Attribution**
   â
   You must give
   [appropriate credit](#ref-appropriate-credit)
   , provide a link to the license, and
   [indicate if changes were made](#ref-indicate-changes)

   . You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.
2. **No additional restrictions**
   â You may not apply legal terms or
   [technological measures](#ref-technological-measures)
   that legally restrict others from doing anything the license permits.

## Notices:

You do not have to comply with the license for elements of the material in the public domain or where your use is permitted by an applicable
[exception or limitation](#ref-exception-or-limitation)
.

No warranties are given. The license may not give you all of the permissions necessary for your intended use. For example, other rights such as
[publicity, privacy, or moral rights](#ref-publicity-privacy-or-moral-rights)
may limit how you use the material.

Creative Commons is the nonprofit behind the open licenses and other legal tools that allow creators to share their work. Our legal tools are free to use.

* [Learn more about our work](/about/)
* **[Learn more about CC Licensing](/share-your-work/cclicenses/)**
* [Support our work](/donate/)
* [Use the license for your own material.](/choose/)
* [Licenses List](/licenses/list.en)
* [Public Domain List](/publicdomain/list.en)

## Footnotes

* [return to reference](#src-appropriate-credit)
  **appropriate credit**
  â
  If supplied, you must provide the name of the creator and attribution parties, a copyright notice, a license notice, a disclaimer notice, and a link to the material. CC licenses prior to Version 4.0 also require you to provide the title of the material if supplied, and may have other slight differences.
  + [More info](https://wiki.creativecommons.org/License_Versions#Detailed_attribution_comparison_chart)
* [return to reference](#src-indicate-changes)
  **indicate if changes were made**
  â
  In 4.0, you must indicate if you modified the material and retain an indication of previous modifications. In 3.0 and earlier license versions, the indication of changes is only required if you create a derivative.
  + [Marking guide](https://wiki.creativecommons.org/Best_practices_for_attribution#This_is_a_good_attribution_for_material_you_modified_slightly)
  + [More info](https://wiki.creativecommons.org/License_Versions#Modifications_and_adaptations_must_be_marked_as_such )
* [return to reference](#src-technological-measures)
  **technological measures**
  â
  The license prohibits application of effective technological measures, defined with reference to Article 11 of the WIPO Copyright Treaty.
  + [More info](https://wiki.creativecommons.org/License_Versions#Application_of_effective_technological_measures_by_users_of_CC-licensed_works_prohibited)
* [return to reference](#src-exception-or-limitation)
  **exception or limitation**
  â
  The rights of users under exceptions and limitations, such as fair use and fair dealing, are not affected by the CC licenses.
  + [More info](https://wiki.creativecommons.org/Frequently_Asked_Questions#Do_Creative_Commons_licenses_affect_exceptions_and_limitations_to_copyright.2C_such_as_fair_dealing_and_fair_use.3F)
* [return to reference](#src-publicity-privacy-or-moral-rights)
  **publicity, privacy, or moral rights**
  â
  You may need to get additional permissions before using the material as you intend.
  + [More info](https://wiki.creativecommons.org/Considerations_for_licensors_and_licensees)

[Creative Commons](/)

* [Contact](/about/contact)
* [Newsletter](https://mail.creativecommons.org/subscribe)
* [Privacy](/privacy)
* [Policies](/policies)
* [Terms](/terms)

## Contact Us

Creative Commons PO Box 1866, Mountain View, CA 94042

info@creativecommons.org

+1-415-429-6753

* [Bluesky](https://bsky.app/profile/creativecommons.bsky.social)
* [Mastodon](https://mastodon.social/%40creativecommons)
* [Facebook](https://www.facebook.com/creativecommons)
* [LinkedIn](https://www.linkedin.com/company/creative-commons/)

## Subscribe to our Newsletter

## Support Our Work

Our work relies on you! Help us keep the Internet free and open.

[Donate Now](https://www.classy.org/give/313412/#!/donation/checkout?c_src=website&c_src2=top-of-page-banner)

Except where otherwise
[noted](/policies/#license)
, content on this site is licensed under a
[Creative Commons Attribution 4.0 International license](/licenses/by/4.0/)
. Icons by
[Font Awesome](https://fontawesome.com/)
.



=== Content from launchpad.net_358978c3_20250121_023124.html ===

[Log in / Register](https://launchpad.net/~hudson-openstack/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~hudson-openstack)

## [OpenStack Infra](https://launchpad.net/~hudson-openstack)

* Overview
* [Code](https://code.launchpad.net/~hudson-openstack)
* [Bugs](https://bugs.launchpad.net/~hudson-openstack)
* [Blueprints](https://blueprints.launchpad.net/~hudson-openstack)
* [Translations](https://translations.launchpad.net/~hudson-openstack)
* [Answers](https://answers.launchpad.net/~hudson-openstack)

* [Related packages](https://launchpad.net/~hudson-openstack/%2Brelated-packages)
* [Related projects](https://launchpad.net/~hudson-openstack/%2Brelated-projects)

## User information

Launchpad Id:
hudson-openstack

Email:
[Log in](%2Blogin) for email information.

Member since:
2010-07-14

[![Icon of Burrow](https://launchpadlibrarian.net/67728214/os14.png "Member of Burrow")](/~burrow)
[![Icon of Citrix OpenStack development team](https://launchpadlibrarian.net/64472709/Citrix%2014.png "Member of Citrix OpenStack development team")](/~citrix-openstack)
[![Icon of (deprecated) OpenStack PPA maintainers](https://launchpadlibrarian.net/87891894/ppa.gif "Member of (deprecated) OpenStack PPA maintainers")](/~openstack-ppa)
[![Icon of Designate Core](https://launchpadlibrarian.net/360468328/designate_14.jpg "Member of Designate Core")](/~designate-core)
[![Icon of Designate Drivers](https://launchpadlibrarian.net/360468067/designate_14.jpg "Member of Designate Drivers")](/~designate-drivers)
[![Icon of MidoNet Bugs](https://launchpadlibrarian.net/228074955/midonet_14x14.png "Member of MidoNet Bugs")](/~midonet-bugs)
[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Languages:

English

OpenPGP keys:

72571ACC301E6FE900837F5CDF85501232EE128C

SSH keys:

[hudson@hudson](%2Bsshkeys)

[jenkins@vpcslave](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[6624](https://launchpad.net/~hudson-openstack/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~hudson-openstack/%2Bparticipation) Latest memberships

| [Compute Hyper-V Bugs](/~compute-hyperv-bugs)  Joined on 2019-08-28 | |
| --- | --- |
| [OS-Win Bugs](/~os-win-bugs)  Joined on 2019-08-28 | |
| [Networking Hyper-V Bugs](/~networking-hyperv-bugs)  Joined on 2019-08-28 | |
| [kolla-drivers](/~kolla-drivers)  Joined on 2019-05-20 | |
| [fixtures-git-bugs](/~fixtures-git-bugs)  Joined on 2018-03-25 | |

## [Recent activities](https://launchpad.net/~hudson-openstack/%2Bkarma) Most active in

| [StarlingX](/starlingx) |  |
| --- | --- |
| [kolla-ansible](/kolla-ansible) |  |
| [kolla](/kolla) |  |
| [kayobe](/kayobe) |  |
| [OpenStack Compute (nova)](/nova) |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from www.openwall.com_6038e389_20250121_002310.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20190829144244.4cvuomwersv65t4o@yuggoth.org>
Date: Thu, 29 Aug 2019 14:42:44 +0000
From: Jeremy Stanley <fungi@...goth.org>
To: oss-security@...ts.openwall.com
Subject: [OSSA-2019-004] Ageing time of 0 disables linuxbridge MAC learning
 (CVE-2019-15753)

=================================================================
OSSA-2019-004: Ageing time of 0 disables linuxbridge MAC learning
=================================================================

:Date: August 29, 2019
:CVE: CVE-2019-15753

Affects
~~~~~~~
- Os-vif: >=1.15.0<1.15.2, 1.16.0

Description
~~~~~~~~~~~
James Denton with Rackspace reported a vulnerability in os-vif, the
Nova/Neutron network integration library. A hard-coded MAC ageing
time
of 0 disables MAC learning in linuxbridge, forcing obligatory
Ethernet
flooding for non-local destinations which both impedes network
performance and allows users to possibly view the content of packets
for instances belonging to other tenants sharing the same network.
Only deployments using the linuxbridge backend are affected.

Patches
~~~~~~~
- <https://review.opendev.org/678098> (Stein)
- <https://review.opendev.org/672834> (Train)

Credits
~~~~~~~
- James Denton from Rackspace (CVE-2019-15753)

References
~~~~~~~~~~
- <https://launchpad.net/bugs/1837252>
- <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-15753>

--
Jeremy Stanley, on behalf of the OpenStack VMT

Download attachment "[signature.asc](2/1)" of type "application/pgp-signature" (964 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from launchpad.net_34e8f61e_20250121_023122.html ===

[Log in / Register](https://launchpad.net/~james-denton/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~james-denton)

## [James Denton](https://launchpad.net/~james-denton)

* Overview
* [Code](https://code.launchpad.net/~james-denton)
* [Bugs](https://bugs.launchpad.net/~james-denton)
* [Blueprints](https://blueprints.launchpad.net/~james-denton)
* [Translations](https://translations.launchpad.net/~james-denton)
* [Answers](https://answers.launchpad.net/~james-denton)

* [Related packages](https://launchpad.net/~james-denton/%2Brelated-packages)
* [Related projects](https://launchpad.net/~james-denton/%2Brelated-projects)

## User information

Launchpad Id:
james-denton

Email:
[Log in](%2Blogin) for email information.

Member since:
2013-03-27

[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

5EC46B9F2E310DC194B3728E4637D5FA63F2E886

SSH keys:

[james.denton@outlook.com](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[6](https://launchpad.net/~james-denton/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**jamesdenton**
 on
**irc.freenode.net**

![IRC](/@@/social-irc "IRC")
**busterswt**
 on
**irc.freenode.net**

## [All memberships](https://launchpad.net/~james-denton/%2Bparticipation) Latest memberships

| [Neutron Developers](/~neutron)  Joined on 2014-01-10 | |
| --- | --- |

## [Recent activities](https://launchpad.net/~james-denton/%2Bkarma) Most active in

| [openstack-helm](/openstack-helm) |  |
| --- | --- |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from review.opendev.org_3867d3b0_20250121_023120.html ===




=== Content from answers.launchpad.net_687e1499_20250121_023121.html ===

[Log in / Register](https://answers.launchpad.net/os-vif/%2Blogin)

[![](/@@/product-logo)](https://launchpad.net/os-vif)

## [os-vif](https://launchpad.net/os-vif)

* [Overview](https://launchpad.net/os-vif)
* [Code](https://code.launchpad.net/os-vif)
* [Bugs](https://bugs.launchpad.net/os-vif)
* [Blueprints](https://blueprints.launchpad.net/os-vif)
* [Translations](https://translations.launchpad.net/os-vif)
* Answers

# Questions for os-vif

**Launchpad does not know where
os-vif
tracks support requests.**

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_22884c23_20250121_023123.html ===

[Log in / Register](https://launchpad.net/~fungi/%2Blogin)

[![](https://launchpadlibrarian.net/112681987/gnome-gmush-64.png)](https://launchpad.net/~fungi)

## [Jeremy Stanley](https://launchpad.net/~fungi)

* Overview
* [Code](https://code.launchpad.net/~fungi)
* [Bugs](https://bugs.launchpad.net/~fungi)
* [Blueprints](https://blueprints.launchpad.net/~fungi)
* [Translations](https://translations.launchpad.net/~fungi)
* [Answers](https://answers.launchpad.net/~fungi)

<http://fungi.yuggoth.org/>

* [Related packages](https://launchpad.net/~fungi/%2Brelated-packages)
* [Related projects](https://launchpad.net/~fungi/%2Brelated-projects)

## User information

Launchpad Id:
fungi

Email:
[Log in](%2Blogin) for email information.

Member since:
2006-06-16

[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of OpenStack Vulnerability Management team](https://launchpadlibrarian.net/83816787/icon.png "Member of OpenStack Vulnerability Management team")](/~openstack-vuln-mgmt)
[![Icon of Python OpenStack Client Bugs](https://launchpadlibrarian.net/697274771/osc-icon.png "Member of Python OpenStack Client Bugs")](/~python-openstackclient-bugs)
[![Icon of Python OpenStack Client](https://launchpadlibrarian.net/697274843/osc-icon.png "Member of Python OpenStack Client")](/~python-openstackclient)
[![Icon of Swift](https://launchpadlibrarian.net/52560230/os14.png "Member of Swift")](/~swift)

Languages:

English

OpenPGP keys:

97AE496FC02DEC9FC353B2E748F9961143495829

SSH keys:

[fungi@yuggoth.org](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[321](https://launchpad.net/~fungi/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**fungi**
 on
**irc.libera.chat**

![IRC](/@@/social-irc "IRC")
**fungi**
 on
**irc.oftc.net**

## [All bugs in progress](https://launchpad.net/~fungi/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1354829 [Booting from stale snapshots in rax-dfw leads to miscellaneous failures](https://bugs.launchpad.net/openstack-ci/%2Bbug/1354829) |  |
| --- | --- | --- |
| in [OpenStack Core Infrastructure](/openstack-ci), [OpenStack Dashboard (Horizon)](/horizon), [neutron](/neutron), [tempest](/tempest) | | |

| --- | --- | --- | --- | --- | --- |

## [All memberships](https://launchpad.net/~fungi/%2Bparticipation) Latest memberships

| [Oslo Core security contacts](/~oslo-coresec)  Joined on 2023-10-02 | |
| --- | --- |
| [Glance Release](/~glance-release)  Joined on 2021-07-27 | |
| [Ubuntu SSO 2-factor testers](/~sso-2f-testers)  Joined on 2020-11-12 | |
| [OpenDev Two-Factor Authentication](/~opendev-2fa)  Joined on 2020-11-05 | |
| [Trove Drivers](/~trove-drivers)  Joined on 2020-06-22 | |

## [Recent activities](https://launchpad.net/~fungi/%2Bkarma) Most active in

| [OpenStack Security Advisory](/ossa) |  |  |
| --- | --- | --- |
| [OpenStack Compute (nova)](/nova) |  |  |
| [Ubuntu](/ubuntu) |  |  |
| [OpenStack Security Notes](/ossn) |  |  |
| [Ubuntu Cloud Archive](/cloud-archive) |  |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from translations.launchpad.net_8a5d1318_20250121_023122.html ===

[Log in / Register](https://translations.launchpad.net/os-vif/%2Blogin)

[![](/@@/product-logo)](https://launchpad.net/os-vif)

## [os-vif](https://launchpad.net/os-vif)

* [Overview](https://launchpad.net/os-vif)
* [Code](https://code.launchpad.net/os-vif)
* [Bugs](https://bugs.launchpad.net/os-vif)
* [Blueprints](https://blueprints.launchpad.net/os-vif)
* Translations
* [Answers](https://answers.launchpad.net/os-vif)

# Translation overview

[Help for translations](https://help.launchpad.net/Translations)

**os-vif does not translate its
messages.**

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_0ece6674_20250121_023120.html ===

[Log in / Register](https://bugs.launchpad.net/os-vif/%2Bbug/1837252/%2Blogin)

[![](/@@/product-logo)](https://launchpad.net/os-vif)

## [os-vif](https://launchpad.net/os-vif)

* [Overview](https://launchpad.net/os-vif)
* [Code](https://code.launchpad.net/os-vif)
* [Bugs](https://bugs.launchpad.net/os-vif)
* [Blueprints](https://blueprints.launchpad.net/os-vif)
* [Translations](https://translations.launchpad.net/os-vif)
* [Answers](https://answers.launchpad.net/os-vif)

# [OSSA-2019-004] Ageing time of 0 disables linuxbridge MAC learning (CVE-2019-15753)

Bug #1837252 reported by
[James Denton](https://launchpad.net/~james-denton)
on 2019-07-19

[282](/%2Bhelp-bugs/bug-heat.html)

This bug affects 5 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Compute (nova)](https://bugs.launchpad.net/nova) | Invalid | Undecided | Unassigned |  |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | High | [Jeremy Stanley](https://launchpad.net/~fungi) |  |
|  | [Ubuntu Cloud Archive](https://bugs.launchpad.net/cloud-archive) | Fix Released | Undecided | Unassigned |  |
|  | [Stein](https://bugs.launchpad.net/cloud-archive/stein) | Fix Committed | High | [Chris MacNaughton](https://launchpad.net/~chris.macnaughton) |  |
|  | [neutron](https://bugs.launchpad.net/neutron) | Invalid | Undecided | Unassigned |  |
|  | [os-vif](https://bugs.launchpad.net/os-vif) | Fix Released | High | [sean mooney](https://launchpad.net/~sean-k-mooney) |  |
|  | [Stein](https://bugs.launchpad.net/os-vif/stein) | Fix Committed | High | [sean mooney](https://launchpad.net/~sean-k-mooney) |  |
|  | [Trunk](https://bugs.launchpad.net/os-vif/trunk) | Fix Released | High | [sean mooney](https://launchpad.net/~sean-k-mooney) |  |

### Bug Description

Release: OpenStack Stein

Driver: LinuxBridge

Using Stein w/ the LinuxBridge mech driver/agent, we have found that traffic is being flooded across bridges. Using tcpdump inside an instance, you can see unicast traffic for other instances.

We have confirmed the macs table shows the aging timer set to 0 for permanent entries, and the bridge is NOT learning new MACs:

root@lab-compute01:~# brctl showmacs brqd0084ac0-f7

port no mac addr is local? ageing timer

  5 24:be:05:a3:1f:e1 yes 0.00

  5 24:be:05:a3:1f:e1 yes 0.00

  1 fe:16:3e:02:62:18 yes 0.00

  1 fe:16:3e:02:62:18 yes 0.00

  7 fe:16:3e:07:65:47 yes 0.00

  7 fe:16:3e:07:65:47 yes 0.00

  4 fe:16:3e:1d:d6:33 yes 0.00

  4 fe:16:3e:1d:d6:33 yes 0.00

  9 fe:16:3e:2b:2f:f0 yes 0.00

  9 fe:16:3e:2b:2f:f0 yes 0.00

  8 fe:16:3e:3c:42:64 yes 0.00

  8 fe:16:3e:3c:42:64 yes 0.00

 10 fe:16:3e:5c:a6:6c yes 0.00

 10 fe:16:3e:5c:a6:6c yes 0.00

  2 fe:16:3e:86:9c:dd yes 0.00

  2 fe:16:3e:86:9c:dd yes 0.00

  6 fe:16:3e:91:9b:45 yes 0.00

  6 fe:16:3e:91:9b:45 yes 0.00

 11 fe:16:3e:b3:30:00 yes 0.00

 11 fe:16:3e:b3:30:00 yes 0.00

  3 fe:16:3e:dc:c3:3e yes 0.00

  3 fe:16:3e:dc:c3:3e yes 0.00

root@lab-compute01:~# bridge fdb show | grep brqd0084ac0-f7

01:00:5e:00:00:01 dev brqd0084ac0-f7 self permanent

fe:16:3e:02:62:18 dev tap74af38f9-2e master brqd0084ac0-f7 permanent

fe:16:3e:02:62:18 dev tap74af38f9-2e vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:86:9c:dd dev tapb00b3c18-b3 master brqd0084ac0-f7 permanent

fe:16:3e:86:9c:dd dev tapb00b3c18-b3 vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:dc:c3:3e dev tap7284d235-2b master brqd0084ac0-f7 permanent

fe:16:3e:dc:c3:3e dev tap7284d235-2b vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:1d:d6:33 dev tapbeb9441a-99 vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:1d:d6:33 dev tapbeb9441a-99 master brqd0084ac0-f7 permanent

24:be:05:a3:1f:e1 dev eno1.102 vlan 1 master brqd0084ac0-f7 permanent

24:be:05:a3:1f:e1 dev eno1.102 master brqd0084ac0-f7 permanent

fe:16:3e:91:9b:45 dev tapc8ad2cec-90 master brqd0084ac0-f7 permanent

fe:16:3e:91:9b:45 dev tapc8ad2cec-90 vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:07:65:47 dev tap86e2c412-24 master brqd0084ac0-f7 permanent

fe:16:3e:07:65:47 dev tap86e2c412-24 vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:3c:42:64 dev tap37bcb70e-9e master brqd0084ac0-f7 permanent

fe:16:3e:3c:42:64 dev tap37bcb70e-9e vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:2b:2f:f0 dev tap40f6be7c-2d vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:2b:2f:f0 dev tap40f6be7c-2d master brqd0084ac0-f7 permanent

fe:16:3e:b3:30:00 dev tap6548bacb-c0 vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:b3:30:00 dev tap6548bacb-c0 master brqd0084ac0-f7 permanent

fe:16:3e:5c:a6:6c dev tap61107236-1e vlan 1 master brqd0084ac0-f7 permanent

fe:16:3e:5c:a6:6c dev tap61107236-1e master brqd0084ac0-f7 permanent

The ageing time for the bridge is set to 0:

root@lab-compute01:~# brctl showstp brqd0084ac0-f7

brqd0084ac0-f7

 bridge id 8000.24be05a31fe1

 designated root 8000.24be05a31fe1

 root port 0 path cost 0

 max age 20.00 bridge max age 20.00

 hello time 2.00 bridge hello time 2.00

 forward delay 0.00 bridge forward delay 0.00

 ageing time 0.00

 hello timer 0.00 tcn timer 0.00

 topology change timer 0.00 gc timer 0.00

 flags

The default ageing time of 300 is being overridden by the value set here:

Stein: <https://github.com/openstack/os-vif/blob/stable/stein/os_vif/internal/command/ip/linux/impl_pyroute2.py#L89>

Master: <https://github.com/openstack/os-vif/blob/master/os_vif/internal/ip/linux/impl_pyroute2.py#L89>

I am not sure of the behavior in OVS environments using the iptables firewall, but I have confirmed the 'qbr' bridges also have a ageing time of 0 (formerly 300).

Please let me know if you have any questions.

Tags:

[verification-stein-needed](/os-vif/%2Bbugs?field.tag=verification-stein-needed)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Hongbin Lu (hongbin.lu)](https://launchpad.net/~hongbin.lu) wrote on 2019-07-21: |  |  | [#1](/os-vif/%2Bbug/1837252/comments/1) |
| --- | --- | --- | --- |

This doesn't seem to be a neutron bug. Awaiting for feedback from os-vif team.

This doesn't seem to be a neutron bug. Awaiting for feedback from os-vif team.

| Changed in neutron: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [sean mooney (sean-k-mooney)](https://launchpad.net/~sean-k-mooney) wrote on 2019-07-23: |  |  | [#2](/os-vif/%2Bbug/1837252/comments/2) |
| --- | --- | --- | --- |

triaging as high as folding could lead to network disruption to guests on multiple hosts.

i have root caused this as a result of combining the code into a single shared codepath between the ovs and linux bridge plugin

for ovs hybrid plug we set the ageing to 0 to prevent packet loss during live migation

<https://github.com/openstack/os-vif/commit/fa4ff64b86e6e1b6399f7250eadbee9775c22d32#diff-f55bc78ffb4c10000bbf81b88bf68673>

however this is not valid for linux bridge in general

<https://github.com/openstack/os-vif/commit/1f6fed6a69e9fd386e421f3cacae97c11cdd7c75#diff-010d1833da7ca175fffc8c41a38497c2>

which replace the use of brctl in the linux bridge driver resued the common code i introduced in

<https://github.com/openstack/os-vif/commit/5027ce833c6fccaa80b5ddc8544d262c0bf99dbd#diff->

cec1a2ac6413663c344b607129c39fab

and as a result it picked up the ovs ageing code which was not intentinal.

ill fix this shortly and backport it.

triaging as high as folding could lead to network disruption to guests on multiple hosts.
i have root caused this as a result of combining the code into a single shared codepath between the ovs and linux bridge plugin
for ovs hybrid plug we set the ageing to 0 to prevent packet loss during live migation
https://github.com/openstack/os-vif/commit/fa4ff64b86e6e1b6399f7250eadbee9775c22d32#diff-f55bc78ffb4c10000bbf81b88bf68673
however this is not valid for linux bridge in general
https://github.com/openstack/os-vif/commit/1f6fed6a69e9fd386e421f3cacae97c11cdd7c75#diff-010d1833da7ca175fffc8c41a38497c2
which replace the use of brctl in the linux bridge driver resued the common code i introduced in
https://github.com/openstack/os-vif/commit/5027ce833c6fccaa80b5ddc8544d262c0bf99dbd#diff-
cec1a2ac6413663c344b607129c39fab
and as a result it picked up the ovs ageing code which was not intentinal.
ill fix this shortly and backport it.

| Changed in os-vif: | |
| --- | --- |
| **assignee**: | nobody → sean mooney (sean-k-mooney) |
| **importance**: | Undecided → High |
| **status**: | New → Confirmed |
| Changed in nova: | |
| **status**: | New → Invalid |
| Changed in neutron: | |
| **status**: | Incomplete → Invalid |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-07-25: |  |  | [#3](/os-vif/%2Bbug/1837252/comments/3) |
| --- | --- | --- | --- |

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

| **information type**: | Public → Public Security |
| --- | --- |
| Changed in ossa: | |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-07-25: |  |  | [#4](/os-vif/%2Bbug/1837252/comments/4) |
| --- | --- | --- | --- |

This sounds remarkably similar to the symptoms described in [bug 1732067](/bugs/1732067) (and its marked duplicates [bug 1813439](/bugs/1813439) and [bug 1825147](/bugs/1825147)).

This sounds remarkably similar to the symptoms described in bug 1732067 (and its marked duplicates bug 1813439 and bug 1825147).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [sean mooney (sean-k-mooney)](https://launchpad.net/~sean-k-mooney) wrote on 2019-07-25: |  |  | [#5](/os-vif/%2Bbug/1837252/comments/5) |
| --- | --- | --- | --- |

it is the same in the context of linuxbridge backend.

in the case of ovs with hybrid plug its different

but similar.

the expected behaviour or any mac learing bridge is that if it does not have a mac entry for a unicast destiatnion mac then it should perform split horizone routing/swithching which means it should flood to all ports in the same l2 bradcast domain excetp its origin port.

that by itself is not a security risk. in a typical case the mac learning table will have been popluated by the intial arp request and responce that the sorce would have preformed to determin the destiontion mac form its ip

if we are doing arp suppression using the l2 pop driver it shoudl aso have install flows to prevent flooding.

in anycase im currently working on a fix for this

ill take a look at the other bug later as i have only skimed it.

it is the same in the context of linuxbridge backend.
in the case of ovs with hybrid plug its different
but similar.
the expected behaviour or any mac learing bridge is that if it does not have a mac entry for a unicast destiatnion mac then it should perform split horizone routing/swithching which means it should flood to all ports in the same l2 bradcast domain excetp its origin port.
that by itself is not a security risk. in a typical case the mac learning table will have been popluated by the intial arp request and responce that the sorce would have preformed to determin the destiontion mac form its ip
if we are doing arp suppression using the l2 pop driver it shoudl aso have install flows to prevent flooding.
in anycase im currently working on a fix for this
ill take a look at the other bug later as i have only skimed it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-07-25:  [**Fix proposed to os-vif (master)**](/os-vif/%2Bbug/1837252/comments/6) |  |  | [#6](/os-vif/%2Bbug/1837252/comments/6) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.opendev.org/672834>

Fix proposed to branch: master
Review: https://review.opendev.org/672834

| Changed in os-vif: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Nick Tait (nickthetait)](https://launchpad.net/~nickthetait) wrote on 2019-07-31:  [**Re: IFLA\_BR\_AGEING\_TIME of 0 causes flooding across bridges**](/os-vif/%2Bbug/1837252/comments/7) |  |  | [#7](/os-vif/%2Bbug/1837252/comments/7) |
| --- | --- | --- | --- |

It is still not clear to me how this is different from #1732067

It is still not clear to me how this is different from #1732067

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [sean mooney (sean-k-mooney)](https://launchpad.net/~sean-k-mooney) wrote on 2019-08-01: |  |  | [#8](/os-vif/%2Bbug/1837252/comments/8) |
| --- | --- | --- | --- |

well this bug applies soly to deployment with ml2/linuxbridge for one and

the other applies only to deployments with ml2/ovs with the ovs contrack fire

wall driver so this is using two completely differeent network backends.

well this bug applies soly to deployment with ml2/linuxbridge for one and
the other applies only to deployments with ml2/ovs with the ovs contrack fire
wall driver so this is using two completely differeent network backends.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-08-08:  [**Fix merged to os-vif (master)**](/os-vif/%2Bbug/1837252/comments/9) |  |  | [#9](/os-vif/%2Bbug/1837252/comments/9) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/672834>

Committed: <https://git.openstack.org/cgit/openstack/os-vif/commit/?id=655c83d706f5de8a8cf23430782e065219297aef>

Submitter: Zuul

Branch: master

commit 655c83d706f5de8a8cf23430782e065219297aef

Author: Sean Mooney <email address hidden>

Date: Thu Jul 25 22:16:42 2019 +0000

only disable mac ageing for ovs hybrid plug

The mac ageing configuration on linux bridges is now

    conditional and caller controlled. By default mac ageing

    is unspecified and will use the kernel's default of 300

    seconds. For ovs with hybrid plug we override this to

    0 to prevent packet loss issue during some migration

    edgecases. This change reverts disabling mac ageing

    for the linux bridge plugin which was accidentally

    introduced during the brctl removal via inheriting the

    ovs plugin's default behavior when the bridge create

    code became shared.

Change-Id: I95612352de6cdb47de98eb80c208dd1a74499d41

    Closes-bug: #1837252

Reviewed: https://review.opendev.org/672834
Committed: https://git.openstack.org/cgit/openstack/os-vif/commit/?id=655c83d706f5de8a8cf23430782e065219297aef
Submitter: Zuul
Branch: master
commit 655c83d706f5de8a8cf23430782e065219297aef
Author: Sean Mooney <work@seanmooney.info>
Date: Thu Jul 25 22:16:42 2019 +0000
only disable mac ageing for ovs hybrid plug
The mac ageing configuration on linux bridges is now
conditional and caller controlled. By default mac ageing
is unspecified and will use the kernel's default of 300
seconds. For ovs with hybrid plug we override this to
0 to prevent packet loss issue during some migration
edgecases. This change reverts disabling mac ageing
for the linux bridge plugin which was accidentally
introduced during the brctl removal via inheriting the
ovs plugin's default behavior when the bridge create
code became shared.
Change-Id: I95612352de6cdb47de98eb80c208dd1a74499d41
Closes-bug: #1837252

| Changed in os-vif: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-08-08:  [**Re: IFLA\_BR\_AGEING\_TIME of 0 causes flooding across bridges**](/os-vif/%2Bbug/1837252/comments/10) |  |  | [#10](/os-vif/%2Bbug/1837252/comments/10) |
| --- | --- | --- | --- |

I see there's a series bugtask confirmed for Stein. Does this affect other branches presently under stable maintenance?

Also, as openstack/os-vif is not tagged vulnerability:managed in governance and the Nova bugtask was invalidated, I'm marking our Advisory task Won't Fix but am still happy to assist the maintainers with any advisory they consider relevant.

I see there's a series bugtask confirmed for Stein. Does this affect other branches presently under stable maintenance?
Also, as openstack/os-vif is not tagged vulnerability:managed in governance and the Nova bugtask was invalidated, I'm marking our Advisory task Won't Fix but am still happy to assist the maintainers with any advisory they consider relevant.

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Won't Fix |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [sean mooney (sean-k-mooney)](https://launchpad.net/~sean-k-mooney) wrote on 2019-08-08: |  |  | [#11](/os-vif/%2Bbug/1837252/comments/11) |
| --- | --- | --- | --- |

no this bug was intoduced in stien and ill be working on the backport so we will aim to include it in the next stable/stien release.

older branches are not affected.

no this bug was intoduced in stien and ill be working on the backport so we will aim to include it in the next stable/stien release.
older branches are not affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-08-22:  [**Fix proposed to os-vif (stable/stein)**](/os-vif/%2Bbug/1837252/comments/12) |  |  | [#12](/os-vif/%2Bbug/1837252/comments/12) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/stein

Review: <https://review.opendev.org/678098>

Fix proposed to branch: stable/stein
Review: https://review.opendev.org/678098

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [melanie witt (melwitt)](https://launchpad.net/~melwitt) wrote on 2019-08-23:  [**Re: IFLA\_BR\_AGEING\_TIME of 0 causes flooding across bridges**](/os-vif/%2Bbug/1837252/comments/13) |  |  | [#13](/os-vif/%2Bbug/1837252/comments/13) |
| --- | --- | --- | --- |

> Also, as openstack/os-vif is not tagged vulnerability:managed in governance and the Nova bugtask was invalidated, I'm marking our Advisory task Won't Fix but am still happy to assist the maintainers with any advisory they consider relevant.

Based on what mnaser said in #openstack-nova today [1], this bug involves VMs being able to see other VMs network traffic, which is a serious security issue worthy of an advisory for operators, IMHO. Does anyone else agree?

And if I'm not missing something about the severity of this issue, should openstack/os-vif be tagged vulnerability:managed, to ensure we get proper security handling of bugs in the future?

[1] <http://eavesdrop.openstack.org/irclogs/%23openstack-nova/%23openstack-nova.2019-08-22.log.html#t2019-08-22T19:48:38>

> Also, as openstack/os-vif is not tagged vulnerability:managed in governance and the Nova bugtask was invalidated, I'm marking our Advisory task Won't Fix but am still happy to assist the maintainers with any advisory they consider relevant.
Based on what mnaser said in #openstack-nova today [1], this bug involves VMs being able to see other VMs network traffic, which is a serious security issue worthy of an advisory for operators, IMHO. Does anyone else agree?
And if I'm not missing something about the severity of this issue, should openstack/os-vif be tagged vulnerability:managed, to ensure we get proper security handling of bugs in the future?
[1] http://eavesdrop.openstack.org/irclogs/%23openstack-nova/%23openstack-nova.2019-08-22.log.html#t2019-08-22T19:48:38

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-08-23: |  |  | [#14](/os-vif/%2Bbug/1837252/comments/14) |
| --- | --- | --- | --- |

For a while I've been meaning to raise the topic of dropping requirement #5 from <https://governance.openstack.org/tc/reference/tags/vulnerability_managed.html#requirements> since it was a high bar to clear and even projects which were previously under vulnerability management before the tag existed did not retroactively undergo threat analysis. While I still think it would be swell to have architectural info on critical OpenStack components, the volume of vulnerability reports we've received in recent years is low enough that I think we could cover more projects even without that. I did bring this up with the other members of the OpenStack VMT and there was no disagreement, so I'll start a thread about that on the ML.

I'll go ahead and draft an impact description since it looks like the stable/stein change is passing and likely to merge, and then request a CVE assignment and prepare to issue an advisory.

For a while I've been meaning to raise the topic of dropping requirement #5 from https://governance.openstack.org/tc/reference/tags/vulnerability\_managed.html#requirements since it was a high bar to clear and even projects which were previously under vulnerability management before the tag existed did not retroactively undergo threat analysis. While I still think it would be swell to have architectural info on critical OpenStack components, the volume of vulnerability reports we've received in recent years is low enough that I think we could cover more projects even without that. I did bring this up with the other members of the OpenStack VMT and there was no disagreement, so I'll start a thread about that on the ML.
I'll go ahead and draft an impact description since it looks like the stable/stein change is passing and likely to merge, and then request a CVE assignment and prepare to issue an advisory.

| Changed in ossa: | |
| --- | --- |
| **status**: | Won't Fix → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-08-23: |  |  | [#15](/os-vif/%2Bbug/1837252/comments/15) |
| --- | --- | --- | --- |

Below is a proposed impact description. Please review and let me know if it needs to be adjusted before I request a CVE assignment with it. In particular, I was unsure which versions were affected so I went with the earliest release from the Stein cycle (per comment #11 above). James, also let me know if there is an employer or other organization you would like credited along with your name.

Title: Ageing time of 0 fills linuxbridge MAC tables

Reporter: James Denton

Products: os-vif

Affects: >=1.12.0<1.15.2, 1.16.0

Description:

James Denton reported a vulnerability in os-vif, the Nova/Neutron

network integration library. The hard-coded MAC ageing time of 0

causes rapid filling of linuxbridge tables, often resulting in

Ethernet flooding which both slows network performance significantly

and allows users to possibly view the content of packets for

instances belonging to other tenants sharing the same network.

Only deployments using the linuxbridge backend are affected.

Below is a proposed impact description. Please review and let me know if it needs to be adjusted before I request a CVE assignment with it. In particular, I was unsure which versions were affected so I went with the earliest release from the Stein cycle (per comment #11 above). James, also let me know if there is an employer or other organization you would like credited along with your name.
Title: Ageing time of 0 fills linuxbridge MAC tables
Reporter: James Denton
Products: os-vif
Affects: >=1.12.0<1.15.2, 1.16.0
Description:
James Denton reported a vulnerability in os-vif, the Nova/Neutron
network integration library. The hard-coded MAC ageing time of 0
causes rapid filling of linuxbridge tables, often resulting in
Ethernet flooding which both slows network performance significantly
and allows users to possibly view the content of packets for
instances belonging to other tenants sharing the same network.
Only deployments using the linuxbridge backend are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Logan V (loganv)](https://launchpad.net/~loganv) wrote on 2019-08-23: |  |  | [#16](/os-vif/%2Bbug/1837252/comments/16) |
| --- | --- | --- | --- |

The statement “The hard-coded MAC ageing time of 0

causes rapid filling of linuxbridge tables” is incorrect.. setting the aging time to 0 disables MAC learning which causes all instances traffic to be flooded due to a lack of bridge fdb entry.

The statement “The hard-coded MAC ageing time of 0
causes rapid filling of linuxbridge tables” is incorrect.. setting the aging time to 0 disables MAC learning which causes all instances traffic to be flooded due to a lack of bridge fdb entry.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-08-23: |  |  | [#17](/os-vif/%2Bbug/1837252/comments/17) |
| --- | --- | --- | --- |

Thanks Logan! So how about this:

Title: Ageing time of 0 disables linuxbridge MAC learning

Reporter: James Denton

Products: os-vif

Affects: >=1.12.0<1.15.2, 1.16.0

Description:

James Denton reported a vulnerability in os-vif, the Nova/Neutron

network integration library. The hard-coded MAC ageing time of 0

disables MAC learning in linuxbridge, forcing obligatory

Ethernet flooding which both slows network performance significantly

and allows users to possibly view the content of packets for

instances belonging to other tenants sharing the same network.

Only deployments using the linuxbridge backend are affected.

Thanks Logan! So how about this:
Title: Ageing time of 0 disables linuxbridge MAC learning
Reporter: James Denton
Products: os-vif
Affects: >=1.12.0<1.15.2, 1.16.0
Description:
James Denton reported a vulnerability in os-vif, the Nova/Neutron
network integration library. The hard-coded MAC ageing time of 0
disables MAC learning in linuxbridge, forcing obligatory
Ethernet flooding which both slows network performance significantly
and allows users to possibly view the content of packets for
instances belonging to other tenants sharing the same network.
Only deployments using the linuxbridge backend are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Logan V (loganv)](https://launchpad.net/~loganv) wrote on 2019-08-24: |  |  | [#18](/os-vif/%2Bbug/1837252/comments/18) |
| --- | --- | --- | --- |

Thanks fungi. Looks good to me!

Thanks fungi. Looks good to me!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2019-08-25: |  |  | [#19](/os-vif/%2Bbug/1837252/comments/19) |
| --- | --- | --- | --- |

Impact description of #15 looks good to me too, thanks fungi.

Impact description of #15 looks good to me too, thanks fungi.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-08-26: |  |  | [#20](/os-vif/%2Bbug/1837252/comments/20) |
| --- | --- | --- | --- |

After discussing this with Sean in #openstack-nova on Freenode, it seems this bug was introduced in commit 1f6fed6 which first appeared in os-vif 1.15.0, making the corrected version list...

Affects: >=1.15.0<1.15.2, 1.16.0

Also, seeking clarification on the exact nature of the flooding, it seems that IFLA\_BR\_AGEING\_TIME=0 disabling learning results in the bridge table containing only local MACs (those which are added explicitly). Flooding then happens when a frame transiting the bridge, most likely one emitted from a local instance, is addressed for a non-local MAC and is then forwarded to all local ports as well as the uplinks to the host-external network, because linuxbridge doesn't know where that MAC resides. Does this summary accurately characterize the scenario?

After discussing this with Sean in #openstack-nova on Freenode, it seems this bug was introduced in commit 1f6fed6 which first appeared in os-vif 1.15.0, making the corrected version list...
Affects: >=1.15.0<1.15.2, 1.16.0
Also, seeking clarification on the exact nature of the flooding, it seems that IFLA\_BR\_AGEING\_TIME=0 disabling learning results in the bridge table containing only local MACs (those which are added explicitly). Flooding then happens when a frame transiting the bridge, most likely one emitted from a local instance, is addressed for a non-local MAC and is then forwarded to all local ports as well as the uplinks to the host-external network, because linuxbridge doesn't know where that MAC resides. Does this summary accurately characterize the scenario?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gavin Grabias (gavingrabe)](https://launchpad.net/~gavingrabe) wrote on 2019-08-27: |  |  | [#21](/os-vif/%2Bbug/1837252/comments/21) |
| --- | --- | --- | --- |

Fungi, That seems accurate. I was the one who originally noticed this behavior.

Fungi, That seems accurate. I was the one who originally noticed this behavior.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [James Denton (james-denton)](https://launchpad.net/~james-denton) wrote on 2019-08-27: |  |  | [#22](/os-vif/%2Bbug/1837252/comments/22) |
| --- | --- | --- | --- |

@fungi Feel free to list Rackspace as the employer/organization, if there's still time. Otherwise, don't worry about it. Thanks!

@fungi Feel free to list Rackspace as the employer/organization, if there's still time. Otherwise, don't worry about it. Thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-08-27: |  |  | [#23](/os-vif/%2Bbug/1837252/comments/23) |
| --- | --- | --- | --- |

Thanks Gavin, James, Sean, Logan et al! Here's a final draft of the impact description; if there are no further objections I'll use it to request a CVE assignment from MITRE tomorrow:

Title: Ageing time of 0 disables linuxbridge MAC learning

Reporter: James Denton (Rackspace)

Products: os-vif

Affects: >=1.15.0<1.15.2, 1.16.0

Description:

James Denton with Rackspace reported a vulnerability in os-vif, the

Nova/Neutron network integration library. A hard-coded MAC ageing

time of 0 disables MAC learning in linuxbridge, forcing obligatory

Ethernet flooding non-local destinations which both impedes network

performance and allows users to possibly view the content of packets

for instances belonging to other tenants sharing the same network.

Only deployments using the linuxbridge backend are affected.

Thanks Gavin, James, Sean, Logan et al! Here's a final draft of the impact description; if there are no further objections I'll use it to request a CVE assignment from MITRE tomorrow:
Title: Ageing time of 0 disables linuxbridge MAC learning
Reporter: James Denton (Rackspace)
Products: os-vif
Affects: >=1.15.0<1.15.2, 1.16.0
Description:
James Denton with Rackspace reported a vulnerability in os-vif, the
Nova/Neutron network integration library. A hard-coded MAC ageing
time of 0 disables MAC learning in linuxbridge, forcing obligatory
Ethernet flooding non-local destinations which both impedes network
performance and allows users to possibly view the content of packets
for instances belonging to other tenants sharing the same network.
Only deployments using the linuxbridge backend are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2019-08-27: |  |  | [#24](/os-vif/%2Bbug/1837252/comments/24) |
| --- | --- | --- | --- |

Er, that should be "forcing obligatory Ethernet flooding \*for\* non-local destinations" (I'll be sure to incorporate that edit in the official version).

Er, that should be "forcing obligatory Ethernet flooding \*for\* non-local destinations" (I'll be sure to incorporate that edit in the official version).

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2019-08-28

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-08-28:  [**Related fix proposed to ossa (master)**](/os-vif/%2Bbug/1837252/comments/25) |  |  | [#25](/os-vif/%2Bbug/1837252/comments/25) |
| --- | --- | --- | --- |

Related fix proposed to branch: master

Review: <https://review.opendev.org/679112>

Related fix proposed to branch: master
Review: https://review.opendev.org/679112

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2019-08-28

| **summary**: | - IFLA\_BR\_AGEING\_TIME of 0 causes flooding across bridges+ Ageing time of 0 disables linuxbridge MAC learning (CVE-2019-15753) |
| --- | --- |

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2019-08-28

| **summary**: | - Ageing time of 0 disables linuxbridge MAC learning (CVE-2019-15753)+ [OSSA-2019-004] Ageing time of 0 disables linuxbridge MAC learning+ (CVE-2019-15753) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-08-28:  [**Fix merged to os-vif (stable/stein)**](/os-vif/%2Bbug/1837252/comments/26) |  |  | [#26](/os-vif/%2Bbug/1837252/comments/26) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/678098>

Committed: <https://git.openstack.org/cgit/openstack/os-vif/commit/?id=ec9d5430300c908ea9a1c64151eee7af522a44e7>

Submitter: Zuul

Branch: stable/stein

commit ec9d5430300c908ea9a1c64151eee7af522a44e7

Author: Sean Mooney <email address hidden>

Date: Thu Jul 25 22:16:42 2019 +0000

only disable mac ageing for ovs hybrid plug

The mac ageing configuration on linux bridges is now

    conditional and caller controlled. By default mac ageing

    is unspecified and will use the kernel's default of 300

    seconds. For ovs with hybrid plug we override this to

    0 to prevent packet loss issue during some migration

    edgecases. This change reverts disabling mac ageing

    for the linux bridge plugin which was accidentally

    introduced during the brctl removal via inheriting the

    ovs plugin's default behavior when the bridge create

    code became shared.

Backport Changes:

      In the train cycle we removed the os\_vif.internal.command

      module in Id8b71172fb06b435cf169a7e55c11233f22fa65b to eliminate

      one layer of indirection. As a result we need to addtionally

      update the add method in os\_vif/internal/command/ip/\_\_init\_\_.py

      which was not required in the train patch.

Change-Id: I95612352de6cdb47de98eb80c208dd1a74499d41

    Closes-bug: #1837252

    (cherry picked from commit 655c83d706f5de8a8cf23430782e065219297aef)

Reviewed: https://review.opendev.org/678098
Committed: https://git.openstack.org/cgit/openstack/os-vif/commit/?id=ec9d5430300c908ea9a1c64151eee7af522a44e7
Submitter: Zuul
Branch: stable/stein
commit ec9d5430300c908ea9a1c64151eee7af522a44e7
Author: Sean Mooney <work@seanmooney.info>
Date: Thu Jul 25 22:16:42 2019 +0000
only disable mac ageing for ovs hybrid plug
The mac ageing configuration on linux bridges is now
conditional and caller controlled. By default mac ageing
is unspecified and will use the kernel's default of 300
seconds. For ovs with hybrid plug we override this to
0 to prevent packet loss issue during some migration
edgecases. This change reverts disabling mac ageing
for the linux bridge plugin which was accidentally
introduced during the brctl removal via inheriting the
ovs plugin's default behavior when the bridge create
code became shared.
Backport Changes:
In the train cycle we removed the os\_vif.internal.command
module in Id8b71172fb06b435cf169a7e55c11233f22fa65b to eliminate
one layer of indirection. As a result we need to addtionally
update the add method in os\_vif/internal/command/ip/\_\_init\_\_.py
which was not required in the train patch.
Change-Id: I95612352de6cdb47de98eb80c208dd1a74499d41
Closes-bug: #1837252
(cherry picked from commit 655c83d706f5de8a8cf23430782e065219297aef)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-08-29:  [**Related fix merged to ossa (master)**](/os-vif/%2Bbug/1837252/comments/27) |  |  | [#27](/os-vif/%2Bbug/1837252/comments/27) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/679112>

Committed: <https://git.openstack.org/cgit/openstack/ossa/commit/?id=59342fd8cfd161d9ca80a3ff06fe472da5eb95ef>

Submitter: Zuul

Branch: master

commit 59342fd8cfd161d9ca80a3ff06fe472da5eb95ef

Author: Jeremy Stanley <email address hidden>

Date: Wed Aug 28 18:38:29 2019 +0000

Add OSSA-2019-004 ($CVE)

Change-Id: I915b0d74577dd9badee6f60300a67b88dc539e03

    Related-Bug: #1837252

Reviewed: https://review.opendev.org/679112
Committed: https://git.openstack.org/cgit/openstack/ossa/commit/?id=59342fd8cfd161d9ca80a3ff06fe472da5eb95ef
Submitter: Zuul
Branch: master
commit 59342fd8cfd161d9ca80a3ff06fe472da5eb95ef
Author: Jeremy Stanley <fungi@yuggoth.org>
Date: Wed Aug 28 18:38:29 2019 +0000
Add OSSA-2019-004 ($CVE)
Change-Id: I915b0d74577dd9badee6f60300a67b88dc539e03
Related-Bug: #1837252

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2019-08-29

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Released |
| **importance**: | Undecided → High |
| **assignee**: | nobody → Jeremy Stanley (fungi) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-09-06:  [**Fix included in openstack/os-vif 1.17.0**](/os-vif/%2Bbug/1837252/comments/28) |  |  | [#28](/os-vif/%2Bbug/1837252/comments/28) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/os-vif 1.17.0 release.

This issue was fixed in the openstack/os-vif 1.17.0 release.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-09-12:  [**Fix included in openstack/os-vif 1.15.2**](/os-vif/%2Bbug/1837252/comments/29) |  |  | [#29](/os-vif/%2Bbug/1837252/comments/29) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/os-vif 1.15.2 release.

This issue was fixed in the openstack/os-vif 1.15.2 release.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel 'f0o' Preussker (dpreussker)](https://launchpad.net/~dpreussker) wrote on 2019-10-22: |  |  | [#30](/os-vif/%2Bbug/1837252/comments/30) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/os-vif/%2Bbug/1837252/comments/30/%2Bdownload) (3.1 KiB)

I think this introduced an issue in Train (At least Train packages for Ubuntu) when using linuxbridge.

The bridges are set to the default ageing of 300 which makes instances on vlan-based networks unable to acquire network connectivity.

brctl showmacs brq.. shows that the local VM's MAC is learned from remote and thus no packets are being forwarded to it.

```

brctl showmacs brq33054c52-b8 | grep 3c:1c

  2 fa:16:3e:23:3c:1c no 24.80

  1 fe:16:3e:23:3c:1c yes 0.00

  1 fe:16:3e:23:3c:1c yes 0.00

```

Flipping ageing to 0 for that bridge solves the issue and the VM acquires DHCP from neutron and responds to network traffic.

```

brctl showmacs brq33054c52-b8 | grep 3c:1c

  1 fe:16:3e:23:3c:1c yes 0.00

  1 fe:16:3e:23:3c:1c yes 0.00

```

However as a side-effect it seems that packets are being duplicated for some reason..

```

64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.809 ms

64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.833 ms (DUP!)

64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.837 ms (DUP!)

64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.955 ms (DUP!)

64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.965 ms (DUP!)

64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.968 ms (DUP!)

```

Packages:

ii python3-os-vif 1.17.0-0ubuntu1~cloud0 all Integration library between network and compute - Python 3.x

ii nova-common 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute - common files

ii nova-compute 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute - compute node base

ii nova-compute-kvm 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute - compute node (KVM)

ii nova-compute-libvirt 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute - compute node libvirt support

ii python3-nova 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute Python 3 libraries

ii python3-novaclient 2:15.1.0-0ubuntu2~cloud0 all client library for OpenStack Compute API - 3.x

ii neutron-common 2:15.0.0~rc1-0ubuntu1~cloud0 all Neutron is a virtual network service for Openstack - common

ii neutron-linuxbridge-agent 2:15.0.0~rc1-0ubuntu1~cloud0 all Neutron is a virtual network service for Openstack - linuxbridge agent

ii python3-neutron 2:15.0.0~rc1-0ubuntu1~cloud0 all Neutron is a virtual network service for Openstack - Python library

ii python3-neutron-lib 1.29.1-0ubuntu1~cloud0 all Neutron shared routines and utilities - Python 3.x

ii python3-neutronclient 1:6.7.0-0ubuntu1 all client API library for Neutron - Python 3.x

Any pointers on de...

[Read more...](/os-vif/%2Bbug/1837252/comments/30)

I think this introduced an issue in Train (At least Train packages for Ubuntu) when using linuxbridge.
The bridges are set to the default ageing of 300 which makes instances on vlan-based networks unable to acquire network connectivity.
brctl showmacs brq.. shows that the local VM's MAC is learned from remote and thus no packets are being forwarded to it.
```
brctl showmacs brq33054c52-b8 | grep 3c:1c
2 fa:16:3e:23:3c:1c no 24.80
1 fe:16:3e:23:3c:1c yes 0.00
1 fe:16:3e:23:3c:1c yes 0.00
```
Flipping ageing to 0 for that bridge solves the issue and the VM acquires DHCP from neutron and responds to network traffic.
```
brctl showmacs brq33054c52-b8 | grep 3c:1c
1 fe:16:3e:23:3c:1c yes 0.00
1 fe:16:3e:23:3c:1c yes 0.00
```
However as a side-effect it seems that packets are being duplicated for some reason..
```
64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.809 ms
64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.833 ms (DUP!)
64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.837 ms (DUP!)
64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.955 ms (DUP!)
64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.965 ms (DUP!)
64 bytes from 10.13.37.87: icmp\_seq=1 ttl=64 time=0.968 ms (DUP!)
```
Packages:
ii python3-os-vif 1.17.0-0ubuntu1~cloud0 all Integration library between network and compute - Python 3.x
ii nova-common 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute - common files
ii nova-compute 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute - compute node base
ii nova-compute-kvm 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute - compute node (KVM)
ii nova-compute-libvirt 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute - compute node libvirt support
ii python3-nova 2:20.0.0~rc1-0ubuntu3~cloud0 all OpenStack Compute Python 3 libraries
ii python3-novaclient 2:15.1.0-0ubuntu2~cloud0 all client library for OpenStack Compute API - 3.x
ii neutron-common 2:15.0.0~rc1-0ubuntu1~cloud0 all Neutron is a virtual network service for Openstack - common
ii neutron-linuxbridge-agent 2:15.0.0~rc1-0ubuntu1~cloud0 all Neutron is a virtual network service for Openstack - linuxbridge agent
ii python3-neutron 2:15.0.0~rc1-0ubuntu1~cloud0 all Neutron is a virtual network service for Openstack - Python library
ii python3-neutron-lib 1.29.1-0ubuntu1~cloud0 all Neutron shared routines and utilities - Python 3.x
ii python3-neutronclient 1:6.7.0-0ubuntu1 all client API library for Neutron - Python 3.x
Any pointers on debugging this?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel 'f0o' Preussker (dpreussker)](https://launchpad.net/~dpreussker) wrote on 2019-10-22: |  |  | [#31](/os-vif/%2Bbug/1837252/comments/31) |
| --- | --- | --- | --- |

Additional info:

After downgrading to 1.15.1 from UCA/Stein I can see that ageing is back to 0 and packets are being received by the VMs again. But I wouldn't want to stay vulnerable..

I'm at bit lost to why ageing prevents the VM from receiving traffic. I have two pcaps capturing DHCP traffic, one from the bridge and one from the tap device.

It shows that the bridge sends and receives DHCP traffic but the tap device only sends DHCP traffic and never receives the answers.

I went further and completely override the iptables with a -J ACCEPT statement at the top of the bridge iptable chain (neutron-linuxbri-i3cf5ab97-1 in this case) to ensure that it's not iptables that filters out the packets. No Luck. Still not receiving any DHCP traffic on the tap device.

Ideas?

Additional info:
After downgrading to 1.15.1 from UCA/Stein I can see that ageing is back to 0 and packets are being received by the VMs again. But I wouldn't want to stay vulnerable..
I'm at bit lost to why ageing prevents the VM from receiving traffic. I have two pcaps capturing DHCP traffic, one from the bridge and one from the tap device.
It shows that the bridge sends and receives DHCP traffic but the tap device only sends DHCP traffic and never receives the answers.
I went further and completely override the iptables with a -J ACCEPT statement at the top of the bridge iptable chain (neutron-linuxbri-i3cf5ab97-1 in this case) to ensure that it's not iptables that filters out the packets. No Luck. Still not receiving any DHCP traffic on the tap device.
Ideas?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [sean mooney (sean-k-mooney)](https://launchpad.net/~sean-k-mooney) wrote on 2019-10-22: |  |  | [#32](/os-vif/%2Bbug/1837252/comments/32) |
| --- | --- | --- | --- |

its not that ageing prevents the vm receiving the packet.

it worked without ageing because the unicast packets were bing flooded

so that is why it "works" with ageing disabled. based on our irc conversation i think

the flooding was masking a different proablem in the linux bridge agent where it was/is

incorrectly setting entries in the bridge fdb against the vlan interface instead of the tap

its not that ageing prevents the vm receiving the packet.
it worked without ageing because the unicast packets were bing flooded
so that is why it "works" with ageing disabled. based on our irc conversation i think
the flooding was masking a different proablem in the linux bridge agent where it was/is
incorrectly setting entries in the bridge fdb against the vlan interface instead of the tap

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Satish Patel (satish-txt)](https://launchpad.net/~satish-txt) wrote on 2020-04-03: |  |  | [#33](/os-vif/%2Bbug/1837252/comments/33) |
| --- | --- | --- | --- |

I have same issue. my instance can see all other instance traffic in tcpdump running on same compute machine (This is very big security issue)

This is what i have queens deployment on CentOS 7.5 has ageing time: 300

[root@ostack-compute-100 ~]# brctl showstp brq01c26fd6-d8

brq01c26fd6-d8

 bridge id 8000.6c3be5a5ab2c

 designated root 8000.6c3be5a5ab2c

 root port 0 path cost 0

 max age 20.00 bridge max age 20.00

 hello time 2.00 bridge hello time 2.00

 forward delay 0.00 bridge forward delay 0.00

 ageing time 300.00

 hello timer 0.00 tcn timer 0.00

 topology change timer 0.00 gc timer 85.81

 flags

On stein i have ageing time: 0 (On this host all vm can see each other traffic in tcpdump)

[root@ostack-compute-bld-gen-2-33 ~]# brctl showstp brq74f3e57c-69

brq74f3e57c-69

 bridge id 8000.8cdcd4aec090

 designated root 8000.8cdcd4aec090

 root port 0 path cost 0

 max age 20.00 bridge max age 20.00

 hello time 2.00 bridge hello time 2.00

 forward delay 0.00 bridge forward delay 0.00

 ageing time 0.00

 hello timer 0.00 tcn timer 0.00

 topology change timer 0.00 gc timer 0.01

 flags

I have same issue. my instance can see all other instance traffic in tcpdump running on same compute machine (This is very big security issue)
This is what i have queens deployment on CentOS 7.5 has ageing time: 300
[root@ostack-compute-100 ~]# brctl showstp brq01c26fd6-d8
brq01c26fd6-d8
bridge id 8000.6c3be5a5ab2c
designated root 8000.6c3be5a5ab2c
root port 0 path cost 0
max age 20.00 bridge max age 20.00
hello time 2.00 bridge hello time 2.00
forward delay 0.00 bridge forward delay 0.00
ageing time 300.00
hello timer 0.00 tcn timer 0.00
topology change timer 0.00 gc timer 85.81
flags
On stein i have ageing time: 0 (On this host all vm can see each other traffic in tcpdump)
[root@ostack-compute-bld-gen-2-33 ~]# brctl showstp brq74f3e57c-69
brq74f3e57c-69
bridge id 8000.8cdcd4aec090
designated root 8000.8cdcd4aec090
root port 0 path cost 0
max age 20.00 bridge max age 20.00
hello time 2.00 bridge hello time 2.00
forward delay 0.00 bridge forward delay 0.00
ageing time 0.00
hello timer 0.00 tcn timer 0.00
topology change timer 0.00 gc timer 0.01
flags

[Corey Bryant (corey.bryant)](https://launchpad.net/~corey.bryant)
on 2021-01-04

| **no longer affects**: | python-os-vif (Ubuntu) |
| --- | --- |
| Changed in cloud-archive: | |
| **status**: | New → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Chris MacNaughton (chris.macnaughton)](https://launchpad.net/~chris.macnaughton) wrote on 2021-01-06:  [**Please test proposed package**](/os-vif/%2Bbug/1837252/comments/34) |  |  | [#34](/os-vif/%2Bbug/1837252/comments/34) |
| --- | --- | --- | --- |

Hello James, or anyone else affected,

Accepted python-os-vif into stein-proposed. The package will build now and be available in the Ubuntu Cloud Archive in a few hours, and then in the -proposed repository.

Please help us by testing this new package. To enable the -proposed repository:

sudo add-apt-repository cloud-archive:stein-proposed

  sudo apt-get update

Your feedback will aid us getting this update out to other Ubuntu users.

If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, and change the tag from verification-stein-needed to verification-stein-done. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-stein-failed. In either case, details of your testing will help us make a better decision.

Further information regarding the verification process can be found at <https://wiki.ubuntu.com/QATeam/PerformingSRUVerification> . Thank you in advance!

Hello James, or anyone else affected,
Accepted python-os-vif into stein-proposed. The package will build now and be available in the Ubuntu Cloud Archive in a few hours, and then in the -proposed repository.
Please help us by testing this new package. To enable the -proposed repository:
sudo add-apt-repository cloud-archive:stein-proposed
sudo apt-get update
Your feedback will aid us getting this update out to other Ubuntu users.
If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, and change the tag from verification-stein-needed to verification-stein-done. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-stein-failed. In either case, details of your testing will help us make a better decision.
Further information regarding the verification process can be found at https://wiki.ubuntu.com/QATeam/PerformingSRUVerification . Thank you in advance!

| **tags**: | added: verification-stein-needed |
| --- | --- |

[See full activity log](https://bugs.launchpad.net/os-vif/%2Bbug/1837252/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/os-vif/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/os-vif/%2Bbug/1837252/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/os-vif/%2Bbug/1837252/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/os-vif/%2Bbug/1837252/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))


