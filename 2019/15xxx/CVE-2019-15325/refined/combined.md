=== Content from www.kernel.org_7faf4bff_20250120_233012.html ===
Yama is a Linux Security Module that collects system-wide DAC security
protections that are not handled by the core kernel itself. This is
selectable at build-time with CONFIG\_SECURITY\_YAMA, and can be controlled
at run-time through sysctls in /proc/sys/kernel/yama:
- ptrace\_scope
==============================================================
ptrace\_scope:
As Linux grows in popularity, it will become a larger target for
malware. One particularly troubling weakness of the Linux process
interfaces is that a single user is able to examine the memory and
running state of any of their processes. For example, if one application
(e.g. Pidgin) was compromised, it would be possible for an attacker to
attach to other running processes (e.g. Firefox, SSH sessions, GPG agent,
etc) to extract additional credentials and continue to expand the scope
of their attack without resorting to user-assisted phishing.
This is not a theoretical problem. SSH session hijacking
(http://www.storm.net.nz/projects/7) and arbitrary code injection
(http://c-skills.blogspot.com/2007/05/injectso.html) attacks already
exist and remain possible if ptrace is allowed to operate as before.
Since ptrace is not commonly used by non-developers and non-admins, system
builders should be allowed the option to disable this debugging system.
For a solution, some applications use prctl(PR\_SET\_DUMPABLE, ...) to
specifically disallow such ptrace attachment (e.g. ssh-agent), but many
do not. A more general solution is to only allow ptrace directly from a
parent to a child process (i.e. direct "gdb EXE" and "strace EXE" still
work), or with CAP\_SYS\_PTRACE (i.e. "gdb --pid=PID", and "strace -p PID"
still work as root).
In mode 1, software that has defined application-specific relationships
between a debugging process and its inferior (crash handlers, etc),
prctl(PR\_SET\_PTRACER, pid, ...) can be used. An inferior can declare which
other process (and its descendants) are allowed to call PTRACE\_ATTACH
against it. Only one such declared debugging process can exists for
each inferior at a time. For example, this is used by KDE, Chromium, and
Firefox's crash handlers, and by Wine for allowing only Wine processes
to ptrace each other. If a process wishes to entirely disable these ptrace
restrictions, it can call prctl(PR\_SET\_PTRACER, PR\_SET\_PTRACER\_ANY, ...)
so that any otherwise allowed process (even those in external pid namespaces)
may attach.
The sysctl settings (writable only with CAP\_SYS\_PTRACE) are:
0 - classic ptrace permissions: a process can PTRACE\_ATTACH to any other
process running under the same uid, as long as it is dumpable (i.e.
did not transition uids, start privileged, or have called
prctl(PR\_SET\_DUMPABLE...) already). Similarly, PTRACE\_TRACEME is
unchanged.
1 - restricted ptrace: a process must have a predefined relationship
with the inferior it wants to call PTRACE\_ATTACH on. By default,
this relationship is that of only its descendants when the above
classic criteria is also met. To change the relationship, an
inferior can call prctl(PR\_SET\_PTRACER, debugger, ...) to declare
an allowed debugger PID to call PTRACE\_ATTACH on the inferior.
Using PTRACE\_TRACEME is unchanged.
2 - admin-only attach: only processes with CAP\_SYS\_PTRACE may use ptrace
with PTRACE\_ATTACH, or through children calling PTRACE\_TRACEME.
3 - no attach: no processes may use ptrace with PTRACE\_ATTACH nor via
PTRACE\_TRACEME. Once set, this sysctl value cannot be changed.
The original children-only logic was based on the restrictions in grsecurity.
==============================================================


=== Content from github.com_2e0b3c39_20250120_233012.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FGalliumOS%2Fgalliumos-distro%2Fissues%2F514)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FGalliumOS%2Fgalliumos-distro%2Fissues%2F514)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=GalliumOS%2Fgalliumos-distro)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[GalliumOS](/GalliumOS)
/
**[galliumos-distro](/GalliumOS/galliumos-distro)**
Public

* [Notifications](/login?return_to=%2FGalliumOS%2Fgalliumos-distro) You must be signed in to change notification settings
* [Fork
  11](/login?return_to=%2FGalliumOS%2Fgalliumos-distro)
* [Star
   349](/login?return_to=%2FGalliumOS%2Fgalliumos-distro)

* [Code](/GalliumOS/galliumos-distro)
* [Issues
  163](/GalliumOS/galliumos-distro/issues)
* [Pull requests
  0](/GalliumOS/galliumos-distro/pulls)
* [Discussions](/GalliumOS/galliumos-distro/discussions)
* [Actions](/GalliumOS/galliumos-distro/actions)
* [Projects
  0](/GalliumOS/galliumos-distro/projects)
* [Wiki](/GalliumOS/galliumos-distro/wiki)
* [Security](/GalliumOS/galliumos-distro/security)
* [Insights](/GalliumOS/galliumos-distro/pulse)

Additional navigation options

* [Code](/GalliumOS/galliumos-distro)
* [Issues](/GalliumOS/galliumos-distro/issues)
* [Pull requests](/GalliumOS/galliumos-distro/pulls)
* [Discussions](/GalliumOS/galliumos-distro/discussions)
* [Actions](/GalliumOS/galliumos-distro/actions)
* [Projects](/GalliumOS/galliumos-distro/projects)
* [Wiki](/GalliumOS/galliumos-distro/wiki)
* [Security](/GalliumOS/galliumos-distro/security)
* [Insights](/GalliumOS/galliumos-distro/pulse)

# Yama security module not enabled in kernel #514

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkOpenOpen[Yama security module not enabled in kernel](#top)#514Copy link![@chrisjohgorman](https://avatars.githubusercontent.com/u/29354995?u=d6fc3caa7a8479b07a9fde6801dd9f64e62e38c3&v=4&size=80)
## Description

![@chrisjohgorman](https://avatars.githubusercontent.com/u/29354995?u=d6fc3caa7a8479b07a9fde6801dd9f64e62e38c3&v=4&size=48)[chrisjohgorman](https://github.com/chrisjohgorman)opened [on Jul 12, 2019](https://github.com/GalliumOS/galliumos-distro/issues/514#issue-467172656)

Hello All,

In experimenting with some of the newer kernels I have found that `CONFIG_SECURITY_YAMA` is disabled in GalliumOS. This leads to the failure of `/etc/sysctl.d/10-ptrace.conf` which tries to set `/proc/sys/kernel/yama/ptrace_scope` to 1.

We should either enable CONFIG\_SECURITY\_YAMA or disable 10-ptrace.conf. Yama is enabled in the default Ubuntu 18.04 with the intent of preventing a malicious attacker from attaching to running processes to examine them with tools like `gdb` and `strace`.

For more information on this and a better description of the security reasons for enabling this, please see your kernel `Documentation/admin-guide/LSM/Yama.rst`.

My machine specs are ...

`dmidecode -s system-product-name` `Banon`

My firmware is essentially `MattDevo`. (He helped me build my own firmware from his git tree.')

My installation method was ISO.

And to reproduce the problem build kernel 5.2 and look at the dmesg output. The kernel can't set /proc/sys/kernel/yama/ptrace\_scope.

Chris

## Metadata

### Assignees

No one assigned

### Labels

No labelsNo labels
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


