=== Content from help.serena.com_b48d4e63_20250120_234915.html ===

Turn Off Tabs

Turn On Tabs

SBM 11.4.2 Release Notes
This file contains known issues and other important information for Solutions BusinessÂ Manager (SBM). This file also contains information that might not be available in other SBM documentation. Last updated on
2019-02-25.

# Contents

* [About this Release](#a20)
* [Upgrades from 11.X](#a21)
* [Upgrades from 10.1.X](#a22)
* [Fixed Issues](#a23)
* [Known Issues](#a24)
  + [Installation and Configuration Issues](#a25)
  + [Administrator Issues](#a26)
* [Legal Notice](#a27)

## About this Release

SBM
11.4.2 is the version that immediately follows
SBM
11.4.1. All of the features, changes, and fixes that were made in
SBM
11.4.1 can be found in
SBM
11.4.2.

Note: SBM
11.4.2 contains defect fixes, but does not contain any new features. The
product documentation is identical to 11.4.1 and uses that version number.

SBM
11.4.2 supports new installationsâyou do not need to install a previous version
of
SBM
before installing this version. If this is a new installation, download
SBM
from the
[Support and Services page](https://www.microfocus.com/support-and-services/#SBM),
and then follow the instructions in the
SBM Installation and Configuration
Guide, which
is available on the
[Documentation Center](http://help.serena.com/doc_center/doc_center.html#sbm).

### Important Notes

Note the following important information
about this release:

* SBM
  has been rebrandedâSerena Business Manager (SBM) is now
  **Solutions Business Manager (SBM)**. Serena Work Center is now
  **SBM Work Center**. A new logo appears in both SBM Work Center
  and
  SBM User Workspace.
* **SBM
  11.4.2 requires
  License Manager
  2.2 or higher. You must upgrade to version 2.2 or higher before you upgrade
  SBM.**
* **Solution releases prior to and including Service Manager /
  Request Center 5.2 and Release Control 6.0 will not run properly on
  SBM
  11.4.2 and these versions are not supported.**

  You will need to upgrade the solution framework for each solution
  to newer, compatible versions before you can use them.
* SBM is now
  certified against Internet Protocol version 4 (IPv4) and Internet Protocol
  version 6 (IPv6). Note that
  SBM requires
  that both IPv4 and IPv6 stacks are present on each server, though IPv4 can be
  disabled.
* This release also addresses the following potential security
  vulnerabilities: CVE-2018-19641 (Unauthenticated remote code execution),
  CVE-2018-19642 (Denial of service attack), CVE-2018-19643 (Unauthenticated web
  services), CVE-2018-19644 (Reflected cross-site scripting), CVE-2018-19645
  (Authentication bypass), and CVE-2019-3477 (Open redirect). For more
  information, please refer to the MITE website (<http://cve.mitre.org/cve/search_cve_list.html>) or the
  **SBM
  11.4.2 Security Bulletin** (available
  [here](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142001)).
  Special thanks goes to Alessio Sergi of Verizon Enterprise Solutions and Miguel
  Mendez for responsibly disclosing these CVEs.
* SBM
  11.4.2 is available in U.S. English only.

### Supported Upgrade Paths

Upgrades to
SBM
11.4.2 are only supported from
SBM
10.1.5.X or higher. Refer to the following list for guidance on upgrading from
your current version.

* **Upgrading from 11.X or later**

  If you are upgrading from 11.X or later, refer to
  [Upgrades from 11.X](#NewUpgradeNotes).
* **Upgrading from 10.1.5.X**

  If you are upgrading from any version in the 10.1.5.X line, refer
  to
  [Upgrades from 10.1.X](#OldUpgradeNotes).
* **Upgrading from versions of
  SBM
  prior to 10.1.5.X**

  If you are upgrading from 10.1.X, upgrade to 10.1.5.X first, and
  then upgrade to 11.4.2.

  If you are upgrading from 2009 R4, you can upgrade to any version
  between 10.1.5.X and 11.0.1.1 before you upgrade to 11.4.2. Use the upgrade
  instructions in the corresponding readme for the first upgrade, and then
  upgrade to 11.4.2 using the instructions in either
  [Upgrades from 10.1.X](#OldUpgradeNotes) or
  [Upgrades from 11.X](#NewUpgradeNotes),
  depending on the version you have after the last upgrade.

  If you are upgrading from a version prior to 2009 R4, contact
  Support to obtain the
  SBM
  10.1.5.4 installer, and then follow the upgrade instructions in solution
  [S138037](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S138037) to upgrade to 10.1.5.4. After you
  successfully upgrade to 10.1.5.4, you can upgrade to
  SBM
  11.4.2 using the instructions in
  [Upgrades from 10.1.X](#OldUpgradeNotes).
* **Upgrading from TeamTrack 6.6.1.X**

  If you are upgrading from TeamTrack 6.6.1.X, follow the
  instructions in the
  Moving to SBM
  guide (available in the
  **SBM
  Documentation Set**.zip on the
  [Documentation Center](http://help.serena.com/doc_center/doc_center.html#sbm)) to upgrade to
  SBM
  10.1.5.4 first (which you can obtain from Support). In addition refer to
  solution
  [S137372](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S137372) to learn about the upgrade
  preparation utility. After you have upgraded TeamTrack to
  SBM
  10.1.5.4, follow the instructions in
  [Upgrades from 10.1.X](#OldUpgradeNotes) to
  upgrade to
  SBM
  11.4.2.
* **Upgrading from Tracker**

  For information on migrating your Tracker data to
  SBM,
  refer to the "Migrating Tracker Data to SBM" solution ([S138468](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S138468)).

### Build Numbers

The following component build numbers apply to this version:

* **SBM User Workspace**
  and
  **SBM Work Center**:
  11.04.02.00.85 (Build 0017)
* **SBM Composer**:
  11.4.2 (Build 8)
* **SBM System Administrator
  and
  SBM Application Administrator**:
  11.04.02.00.85 (Build 0017)
* **SBM Application
  Repository**:
  11.04.02.00.85 (Build 29)
* **SBM Configurator**:
  11.04.02.00.85
* **Database version**: 1140200003
* **Documentation**: English â 11.4.1 |
  Japanese â 2009 R4.01 (translated content applies to SBM 2009 R4.01)

### Helpful Links

[Documentation Center](http://help.serena.com/doc_center/doc_center.html#sbm)

[SBM 11.4.1 Release Notes](http://help.serena.com/doc_center/sbm/ver11_4_1/sbm_release_notes.htm)

[Supported Platforms](https://www.microfocus.com/support-and-services/#SBM)

[Third-Party Tools](https://supportline.microfocus.com/licensing/attributionreport.aspx)

[Statement of Direction for SBM User
Workspace](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142193)

[Statement of Direction for 32-bit SBM
Clients](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142192)

### Contact Us

For specific product issues, contact Support at
<https://www.microfocus.com/support-and-services/#SBM>.

Additional technical information or advice is available from several
sources:

* Product documentation, Knowledge Base articles, and videos:
  <https://www.microfocus.com/support-and-services/#SBM>
* The Community pages:
  <https://www.microfocus.com/communities/>

## Upgrades from 11.X

Review this section for upgrades to
SBM
11.4.2 from earlier versions in the 11.x line. If you are upgrading from
10.1.X, refer to
[Upgrades from 10.1.X](#OldUpgradeNotes).

To test the upgrade, mimic your current installation on a separate set
of servers. This test installation should include all of the environments used
by your system. Upgrade and test this installation before upgrading your
production installation. To upgrade successfully, you must upgrade each server
and client machine to
SBM
11.4.2.

* [Requirements and Changes](#a6)
* [Planning for the Upgrade](#a7)
* [Pre-Upgrade Steps](#a8)
* [Upgrading the Installation and Databases](#a9)
* [Post-Upgrade Tasks](#a10)
* [Upgrading Customizations and Integrations](#a11)

### Requirements and Changes

Before you upgrade to
SBM
11.4.2, read the following important information:

* The
  HTML5 Support option in Application
  Administrator is now automatically selected on upgrade. This means if you were
  not using HTML5 features in SBM prior to the upgrade, they will be available to
  your users by default after the upgrade is finished. For details on HTML5
  features in SBM, see the
  SBM Application Administrator
  Guide.

  If you need to disable HTML5 support, edit the
  **Base Project** in Application Administrator and clear the
  Enable HTML5 Features check box. However, note that disabling HTML5 is not
  recommended, as future enhancements and non-critical fixes will be focused on
  SBM with HTML5 enabled.
* If you have defined custom authenticators and identity transformers
  for
  SBM in the
  configuration.xml file, each entry is preserved
  after upgrade and should appear in
  SBM Configurator
  as long as they are defined in the correct section of the
  configuration.xml file. If you have mistakenly
  placed authenticators outside of the correct sections in this file, your custom
  authentication settings will not be preserved. Therefore as a precaution, if
  you have defined custom authenticators, back up your current
  configuration.xml file before you perform the
  upgrade. You can refer to this file to rebuild your custom authenticators in
  SBM Configurator
  after the upgrade is finished if necessary.
* If you used
  **HTTP Basic Authentication** to manage user sessions prior to the
  upgrade,
  SBM Configurator
  automatically converts this to
  SSO
  once the upgrade is finished. The
  **HTTP Basic Authentication** option has been deprecated and is no
  longer available in
  SBM Configurator
  because there are more secure options for managing user sessions.

  Electronic signatures are now authenticated according to what is
  selected for
  Web services authentication in
  SBM Configurator
  if you are using
  **Windows Authentication** or
  **Third-Party Authentication System** for
  **Browser authentication**. Prior to 11.1, electronic signatures
  were always authenticated against the internal SBM database.

  If you need assistance with re-enabling legacy behavior for
  either setting, please contact Support.
* In order to prevent notifications from being sent for changes that
  have not happened recently,
  SBM
  now deletes notification events that are older than 90 days that contain a
  THREADID during the database upgrade. To check if you have events that will be
  deleted, refer to the SQL queries in solution
  [S140945](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S140945).
* Work Center
  search operates on pre-built indices that may change for each
  SBM
  release. The
  Work Center
  search index is rebuilt when Tomcat is started for the first time after the
  upgrade. The complete indexing operation can take ample time to finish for very
  large databases; however, some search results in
  Work Center
  begin to appear immediately and the number of results continues to grow while
  the initial indexing operation works toward completion.

  You can view the overall progress of the indexing operation in
  the
  ssf.log file located on the server that hosts
  SBM Common Services.
  The log file is located here:

  ```
  installDir\Serena\SBM\Common\tomcat\server\default\logs
  ```
* For SQL Server systems, ensure that SQL Server Replication is not
  enabled. If replication is enabled, the upgrade process fails with an error:
  Cannot drop the table 'TS\_XXXX' because it is being used
  for replication.
* For Oracle systems, note the following:
  + You must ensure that the required roles and privileges for the
    SBM
    schema user are up-to-date. Refer to solution
    [S133641](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S133641) for details.
  + You must perform the database upgrade using either the
    **SBM** DSN or a system DSN that uses the "Oracle for SBM" driver. If your system used the Mashup2009
    DSN prior to the upgrade, that DSN is automatically converted to use the new
    "Oracle for SBM" driver.

### Planning for the Upgrade

The upgrade process you will follow depends on the type of
installation you currently have:

* **Single Server Installation** â All of the SBM components are
  installed on a single server.

  For single server installations, you will run the suite installer
  on your server and then upgrade the databases using
  SBM Configurator.
* **Distributed Installation** â The SBM components are installed
  on multiple servers that comprise a single production environment.

  For distributed installations, you will run the suite installer on
  each server, and then use
  SBM Configurator
  to upgrade the databases.
* **Multi-environment installation** â The SBM components are
  installed on single or multiple servers that are separated into multiple SBM
  environments (such as development, test, and production).

  The process for upgrading multiple environments (used in a path
  to production model) depends on which environment hosts
  SBM Application
  Repository
  and which environment you plan to upgrade first (Test/Staging first or
  Production first).

  + **If
    SBM Application
    Repository
    is part of the Test environment and you plan to upgrade Test first**

    In this setup, each environment uses a single instance of
    Application
    Repository
    that is installed in the Test environment. You will upgrade the Application
    Engine and
    Orchestration Engine
    databases in the Test environment first. After the upgrade in Test is finished,
    you will not be able to deploy to Production from
    Application
    Repository
    until you upgrade the Production servers and databases.
  + **If
    SBM Application
    Repository
    is part of the Production environment and you plan to upgrade Test first**

    In this setup, each environment uses a single instance of
    Application
    Repository
    that is installed in the Production environment. You will upgrade the
    Application Engine and
    Orchestration Engine
    databases in the Test environment first. After the upgrade in Test is finished,
    you will not be able to deploy to Test from
    Application
    Repository
    until you upgrade the Production servers and databases.
  + **If
    SBM Application
    Repository
    is part of either Production OR Test and you plan to upgrade all environments
    at the same time**

    If you plan to upgrade all environments at the same time (one
    immediately after the other), upgrade the instance that hosts
    Application
    Repository
    first (likely Production). This will allow you to upgrade the other
    environments that do not have
    SBM Application
    Repository
    without installing a temporary instance.

### Pre-Upgrade Steps

Follow these steps before you perform the upgrade.

1. Verify that
   SBM
   11.X or later is installed on the
   System Information tab in
   SBM Configurator.
2. Back up your existing databases.
3. Back up the
   SBM
   installation directory structure on the
   Application Engine
   server.
4. Back up the Smart Search index directory on the
   SBM Common Services
   server. If you need to revert the upgrade for any reason, you will restore the
   index from this backup (because the index is rebuilt as part of the upgrade).
5. Consider consulting with your DBA to assess the current table
   indexes in the
   SBM
   databases. Because significant database schema changes do not necessarily
   coincide with each database upgrade, table indexes are not automatically
   rebuilt as part of the upgrade process. Over time, indexes can report excessive
   fragmentation, which could negatively impact performance if they are not
   rebuilt periodically.
6. Create a new database space in your DBMS to host the
   **Configuration Settings** database if you did not create it in a
   prior release. As of
   SBM
   10.1.5, you can use this database to store configuration settings across your
   entire
   SBM
   installation in one centralized location.
7. Stop the IIS and
   SBM Tomcat
   services on each
   SBM
   server.
8. Download the new suite and client installers from the
   [Support and Services page](https://www.microfocus.com/support-and-services/#SBM).

### Upgrading the Installation and Databases

Follow these steps to upgrade an
SBM
server.

1. Extract the server installation files, and then launch the suite
   installer. An installer message prompts you to confirm that you are upgrading
   your system. Click
   Next to continue.
2. The
   Ready to Upgrade dialog box appears. Click
   **Upgrade Now** to begin upgrading the server installation. At the
   end of the installation upgrade, click
   Configure to launch
   SBM Configurator.
   Note: If you are prompted to restart your server,
   SBM Configurator
   launches automatically once the server has restarted. If you decline, you will
   not be able to run
   SBM Configurator
   until the server has been restarted.
3. Decide if you will use the
   **Configuration Settings** database if you have not done so
   already. If you have a distributed installation, it is highly recommended that
   you use the
   **Configuration Settings** database, because it enables you to
   easily synchronize configuration settings between each
   SBM
   server without requiring you to export and import configuration snapshot files.

   On the
   Database Servers tab, enter database
   connection information for the
   **Configuration Settings** database that you created as part of
   the pre-upgrade process.
4. Verify your configuration settings, and then click
   Apply.
   SBM Configurator
   detects the current upgrade process and upgrades the file system by merging
   existing configurations from your previous installation into the new
   installation files.
   Important: You must click
   Apply to save these changes before you
   upgrade the database. Once the file system is upgraded, you can run
   SBM Configurator
   again anytime thereafter to verify or modify your configuration settings as
   needed.
5. Open the
   Database Servers tab in
   SBM Configurator,
   and then click
   Upgrade Database.
   Tip: If any errors occur during the
   Application Engine
   database upgrade, review the upgrade log here:
   ```
   installDirectory\Serena\SBM\Application Engine\log
   ```

   If an
   `ORA-00904` message appears in the
   Application Engine
   upgrade log after you finish upgrading the
   Application Engine
   database, refer to solution
   [S141358](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141358) for a description of the problem
   and a resolution.

   After the database is upgraded successfully, verify that the
   services are started in the
   Manage Services tab. Instruct
   Application
   Repository
   users to clear the cache in their Web browsers before they attempt to access
   SBM Application
   Repository.
6. On each client machine, run the client installer. The client
   executable contains
   SBM Composer
   and is intended to be run only on client machines. Previous versions of
   SBM Composer
   are upgraded automatically and do not need to be uninstalled prior to
   upgrading. The new version is installed in the same location.

### Post-Upgrade Tasks

Review the following information and make any necessary changes after
you have upgraded your servers and databases:

* SBM Configurator
  warns you if your installation currently uses default certificates (which
  should be replaced) or if your current certificates will expire soon.
  Important: To properly secure your installation, you must
  generate new key pairs even if you do not plan to use
  SSO.
  If you do not generate new key pairs, the default certificates that the STS
  inherently trusts are used. To increase security, launch
  SBM Configurator
  and generate new unique certificate for all components. For details, see
  "Securing
  SBM"
  in the
  SBM Installation and Configuration
  Guide.
* For systems that are configured to use client
  certificate authentication, you must perform additional configuration steps
  after the upgrade or disable the feature entirely. For details, refer to the
  entry about client certificate authentication in
  [Installation and Configuration Issues](#InstallationIssues).
* HTML rendering and Rich Text editing is enabled by default for all
  notes in your system after the upgrade.
  To disable these features for notes, clear the
  **Render HTML in Notes** check box located on the HTML tab of
  the Settings dialog box in
  SBM System Administrator.
* User credentials in
  SBM Application Engine
  Web service calls that use Basic authentication are now handled exclusively by
  SBM Application Engine
  itself, instead of IIS. This configuration is common if your
  SBM
  system is set up with
  **NT Challenge Response** for end-user authentication. After
  upgrade, this means that you must now specify the Windows domain for Web
  service calls in
  SBM Configurator,
  otherwise the domain that the IIS server machine is installed on is used for
  user validation.
* The **Require appended text** option, available for
  *Journal* fields on the Attributes tab (field Property Editor)
  and the Field Overrides tab (workflow Property Editor) now works as intended.
  When the **Required** and **Require appended text** options are selected,
  users must append text to the field during a transition. When only**Required** is selected, users do not need to append text if there is an
  existing entry.

  In past releases, selecting only the **Required** option would
  require users to append text to an existing entry. Now, the **Require appended
  text** option must also be selected to require users to append text.

### Upgrading Customizations and Integrations

Review the following information for help with upgrading custom
changes and integrations.

* If you made custom modifications to any HTML templates, e-mail
  templates, or online help files, you must merge your changes into the
  newly-upgraded files, and then use
  SBM System Administrator
  to
  **Put Files in Database**. All templates and images in the
  database are replaced by files on your local machine as part of this operation.
  Backup templates are stored on the
  installDir\SBM\Application
  Engine
  server here:

  ```
  installDir\Serena\SBM\Application Engine\Backup<version>-<date>-<time>
  ```
* If you configured your system to use anonymous events prior to the
  upgrade, you must either add credentials to your events (preferred) or you must
  select the
  Allow Anonymous Events check box in
  SBM Configurator
  and enter an
  SBM
  user name and password to use anonymous events after the upgrade.

## Upgrades from 10.1.X

Review this section for upgrades to
SBM
11.4.2 from versions in the 10.1.X line. If you are upgrading from 11.0 or
higher, refer to
[Upgrades from 11.X](#NewUpgradeNotes).

To test the upgrade, mimic your current installation on a separate set
of servers. This test installation should include all of the environments used
by your system. Upgrade and test this installation before upgrading your
production installation. To upgrade successfully, you must upgrade each server
and client machine to
SBM
11.4.2.

* [Requirements and Changes](#a12)
* [Planning for the Upgrade](#a13)
* [Pre-Upgrade Steps](#a14)
* [Upgrading the Installation](#a15)
* [Upgrading the Databases](#a16)
* [Post-Upgrade Tasks](#a17)
* [Upgrading Customizations and Integrations](#a18)

### Requirements and Changes

Before you upgrade to
SBM
11.4.2, read the following important information:

* **SBM
  11.4.2 requires
  License Manager
  2.2. You must upgrade to version 2.2 before you can upgrade to
  SBM
  11.4.2.**
* SBM
  11.4.2 requires 64-bit Windows servers. If you are using 32-bit servers prior
  to the upgrade, you must install
  SBM
  11.4.2 on one or more 64-bit machines, and then upgrade the databases using the
  64-bit installation. As part of the upgrade, review and upgrade any scripts and
  APIs that were originally created on a 32-bit operating system to ensure that
  they also run on a 64-bit system. For example, if you have any scripts that
  load
  .dll files, those
  .dll files must be upgraded to run on a 64-bit
  machine.
* The
  HTML5 Support option in Application
  Administrator is now automatically selected on upgrade. This means if you were
  not using HTML5 features in SBM prior to the upgrade, they will be available to
  your users by default after the upgrade is finished. For details on HTML5
  features in SBM, see the
  SBM Application Administrator
  Guide.

  If you need to disable HTML5 support, edit the
  **Base Project** in Application Administrator and clear the
  Enable HTML5 Features check box. However, note that disabling HTML5 is not
  recommended, as future enhancements and non-critical fixes will be focused on
  SBM with HTML5 enabled.
* If you have defined custom authenticators and identity transformers
  for
  SBM in the
  configuration.xml file, each entry is preserved
  after upgrade and should appear in
  SBM Configurator
  as long as they are defined in the correct section of the
  configuration.xml file. If you have mistakenly
  placed authenticators outside of the correct sections in this file, your custom
  authentication settings will not be preserved. Therefore as a precaution, if
  you have defined custom authenticators, back up your current
  configuration.xml file before you perform the
  upgrade. You can refer to this file to rebuild your custom authenticators in
  SBM Configurator
  after the upgrade is finished if necessary.
* If you used
  **HTTP Basic Authentication** to manage user sessions prior to the
  upgrade,
  SBM Configurator
  automatically converts this to
  SSO
  once the upgrade is finished. The
  **HTTP Basic Authentication** option has been deprecated and is no
  longer available in
  SBM Configurator
  because there are more secure options for managing user sessions.

  Electronic signatures are now authenticated according to what is
  selected for
  Web services authentication in
  SBM Configurator
  if you are using
  **Windows Authentication** or
  **Third-Party Authentication System** for
  **Browser authentication**. Prior to 11.1, electronic signatures
  were always authenticated against the internal SBM database.

  If you need assistance with re-enabling legacy behavior for
  either setting, please contact Support.
* In order to prevent notifications from being sent for changes that
  have not happened recently,
  SBM
  now deletes notification events that are older than 90 days that contain a
  THREADID during the database upgrade. To check if you have events that will be
  deleted, refer to the SQL queries in solution
  [S140945](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S140945).
* Work Center
  search operates on pre-built indices that may change for each
  SBM
  release. The
  Work Center
  search index is rebuilt when Tomcat is started for the first time after the
  upgrade. The complete indexing operation can take ample time to finish for very
  large databases; however, some search results in
  Work Center
  begin to appear immediately and the number of results continues to grow while
  the initial indexing operation works toward completion.

  You can view the overall progress of the indexing operation in
  the
  ssf.log file located on the server that hosts
  SBM Common Services.
  The log file is located here:

  ```
  installDir\Serena\SBM\Common\tomcat\server\default\logs
  ```
* For upgrades from 10.1.X, as part of the database
  upgrade and migration to the new ODE BPEL engine, data in the CL\_CONTEXT\_VALUE
  and CL\_LOG tables is deleted. New indexes are added to the CL\_CONTEXT\_VALUE and
  CL\_LOG tables on upgrade to prevent time outs from occurring when you try to
  view Common Log data in
  SBM Composer
  or
  SBM Application
  Repository.
  In order to add the new indexes, these tables will be emptied during the
  upgrade process.
  Important: If you need to view Common Log data that was
  present prior to the upgrade, ensure that you have backed up these tables.
* For SQL Server systems, ensure that SQL Server Replication is not
  enabled. If replication is enabled, the upgrade process fails with an error:
  Cannot drop the table 'TS\_XXXX' because it is being used
  for replication.
* For Oracle systems, note the following:
  + You must ensure that the required roles and privileges for the
    SBM
    schema user are up-to-date. Refer to solution
    [S133641](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S133641) for details.
  + You must perform the database upgrade using either the
    **SBM** DSN or a system DSN that uses the "Oracle for SBM" driver. If your system used the Mashup2009
    DSN prior to the upgrade, that DSN is automatically converted to use the new
    "Oracle for SBM" driver.
    Important: The underlying driver in the DSN that
    ships with
    SBM
    was changed in
    SBM
    in 10.1. If you currently use the Mashup2009 DSN with
    SBM,
    you do not need to do anythingâthe DSN will be updated automatically. If you
    created your own custom DSN with the "Oracle for SBM"
    driver prior to upgrading to
    SBM
    10.1 or later, then you must recreate the DSN and use the new "Oracle for SBM" driver that ships with
    SBM
    after the upgrade is finished.

### Planning for the Upgrade

The upgrade process you will follow depends on the type of
installation you currently have:

* **Single Server Installation** â All of the SBM components are
  installed on a single server.

  For single server installations, you will run the suite installer
  on your server and then upgrade the databases using
  SBM Configurator.
  The databases are upgraded in two phasesâin phase one, the
  Application Engine
  database is upgraded; once it completes successfully, phase two begins. In
  phase two, you are prompted to enter the
  SBM
  user name and password of your primary system administrator or an
  SBM
  user that has the Remote Administration privilege to upgrade the Orchestration
  Engine database.
* **Distributed Installation** â The SBM components are installed
  on multiple servers that comprise a single production environment.

  For distributed installations, you will run the suite installer on
  each server, and then use
  SBM Configurator
  to upgrade the databases. When you begin the Orchestration Engine database
  upgrade on the server that hosts
  SBM Orchestration Engine,
  you are prompted to enter the
  SBM
  user name and password of your primary system administrator or an
  SBM
  user that has the Remote Administration privilege. This scenario requires that
  you start the SBM services and that you perform the database upgrades in a
  certain order. This is explained in more detail below in
  [Upgrading the Databases](#a16).
* **Multi-environment installation** â The SBM components are
  installed on single or multiple servers that are separated into multiple SBM
  environments (such as development, test, and production).

  The process for upgrading multiple environments (used in a path
  to production model) depends on which environment hosts
  SBM Application
  Repository
  and which environment you plan to upgrade first (Test/Staging first or
  Production first).

  + **If
    SBM Application
    Repository
    is part of the Test environment and you plan to upgrade Test first**

    In this setup, each environment uses a single instance of
    Application
    Repository
    that is installed in the Test environment. You will upgrade the Application
    Engine and
    Orchestration Engine
    databases in the Test environment first. After the upgrade in Test is finished,
    you will not be able to deploy to Production from
    Application
    Repository
    until you upgrade the Production servers and databases.
  + **If
    SBM Application
    Repository
    is part of the Production environment and you plan to upgrade Test first**

    In this setup, each environment uses a single instance of
    Application
    Repository
    that is installed in the Production environment. You will upgrade the
    Application Engine and
    Orchestration Engine
    databases in the Test environment first. After the upgrade in Test is finished,
    you will not be able to deploy to Test from
    Application
    Repository
    until you upgrade the Production servers and databases.
  + **If
    SBM Application
    Repository
    is part of either Production OR Test and you plan to upgrade all environments
    at the same time**

    If you plan to upgrade all environments at the same time (one
    immediately after the other), upgrade the instance that hosts
    Application
    Repository
    first (likely Production). This will allow you to upgrade the other
    environments that do not have
    SBM Application
    Repository
    without installing a temporary instance.

  For information about warnings that may appear during a
  multi-environment upgrade, see "Handling Warnings with Multiple Environments"
  in
  [S141802](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141802 ).

Tip: In any of these scenarios, if you plan to test the
upgrade first by making a copy of the production database and installing
SBM
11.4.2 on a test machine, the upgrade process will report failures related to
your environment definition in
Application
Repository.
You can either update the endpoint and target server information in
SBM Application
Repository
and click
Retry Upgrade in
SBM Configurator
or click
Clear Warnings to proceed without making the
changes to finish the upgrade.

If you are upgrading from a release prior to 10.1.2, use
SBM Configurator
to designate which server will host the
SBM Logging Services
component. By default,
SBM Logging Services
appears on an undefined server until you drag and drop it to the desired
server. If you are upgrading from a release after 10.1.2,
SBM Logging Services
is enabled on the same machine as
SBM Common Services
by default. You can use
SBM Configurator
to move it to a dedicated server, if necessary (for example, if you set the
logging level to TRACE for debugging purposes).

### Pre-Upgrade Steps

Follow these steps before you perform the upgrade.

1. Verify that
   SBM
   10.1.X or later is installed on the
   System Information tab in
   SBM Configurator.
2. Back up your existing databases.
3. Back up the
   SBM
   installation directory structure on the
   Application Engine
   server.
4. Back up the Smart Search index directory on the
   SBM Common Services
   server. If you need to revert the upgrade for any reason, you will restore the
   index from this backup (because the index is rebuilt as part of the upgrade).
5. Consider consulting with your DBA to assess the current table
   indexes in the
   SBM
   databases. Because significant database schema changes do not necessarily
   coincide with each database upgrade, table indexes are not automatically
   rebuilt as part of the upgrade process. Over time, indexes can report excessive
   fragmentation, which could negatively impact performance if they are not
   rebuilt periodically.
6. If you store
   SBM
   item attachments on the file system, open
   SBM System Administrator
   and note the location of the attachments directory. You will enter the location
   in
   SBM Configurator
   later as part of the upgrade.
7. Create a new database space in your DBMS to host the
   **Configuration Settings** database if you did not create it in a
   prior release. As of
   SBM
   10.1.5, you can use this database to store configuration settings across your
   entire
   SBM
   installation in one centralized location.
8. Stop the IIS and
   SBM Tomcat
   services on each
   SBM
   server.
9. Download the new suite and client installers from
   <https://www.microfocus.com/support-and-services/#SBM>.

### Upgrading the Installation

Follow these steps to upgrade an
SBM
server.

1. Extract the server installation files, and then launch the suite
   installer. An installer message prompts you to confirm that you are upgrading
   your system. Click
   Next to continue.
2. The
   Ready to Upgrade dialog box appears. Click
   **Upgrade Now** to begin upgrading the server installation. At the
   end of the installation upgrade, click
   Configure to launch
   SBM Configurator.
   Note: If you are prompted to restart your server,
   SBM Configurator
   launches automatically once the server has restarted. If you decline, you will
   not be able to run
   SBM Configurator
   until the server has been restarted.
3. Decide if you will use the
   **Configuration Settings** database if you have not done so
   already. If you have a distributed installation, it is highly recommended that
   you use the
   **Configuration Settings** database, because it enables you to
   easily synchronize configuration settings between each
   SBM
   server without requiring you to export and import configuration snapshot files.

   On the
   Database Servers tab, enter database
   connection information for the
   **Configuration Settings** database that you created as part of
   the pre-upgrade process.
4. Verify your configuration settings, and then click
   Apply.
   SBM Configurator
   detects the current upgrade process and upgrades the file system by merging
   existing configurations from your previous installation into the new
   installation files.
   Important: You must click
   Apply to save these changes before you
   upgrade the
   Application Engine
   and
   Orchestration Engine
   databases. Once the file system is upgraded, you can run
   SBM Configurator
   again anytime thereafter to verify or modify your configuration settings as
   needed.
5. On each client machine, run the client installer. The client
   executable contains
   SBM Composer
   and is intended to be run only on client machines. Previous versions of
   SBM Composer
   are upgraded automatically and do not need to be uninstalled prior to
   upgrading. The new version is installed in the same location.

### Upgrading the Databases

The database upgrade process occurs in two phases when upgrading from
10.1.X to any version in the 11.X line. Review the following important
information before you begin.

* The
  Orchestration Engine
  database upgrade is no longer automatically performed after you start the
  SBM
  services; instead, you must manually invoke the upgrade process by clicking the
  Upgrade Database link in
  SBM Configurator.
  This ensures that the Orchestration Engine database is not upgraded
  prematurely.
* If
  SBM Application Engine
  and
  SBM Orchestration Engine
  are installed on the same server, the
  Orchestration Engine
  database upgrade is performed immediately after the
  Application Engine
  database upgrade.
* If
  SBM Application Engine
  and
  SBM Orchestration Engine
  are installed on separate servers:
  + You must ensure that IIS is started on the
    SBM Application Engine
    server and
    SBM Tomcat
    is started on each of the other
    SBM
    servers. Both IIS and
    SBM Tomcat
    must be running and all components must be accessible from the
    SBM Orchestration Engine
    server before the
    Orchestration Engine
    database upgrade begins.
  + You must upgrade the
    Application Engine
    database on the
    SBM Application Engine
    server first, and then upgrade the
    Orchestration Engine
    database on the
    SBM Orchestration Engine
    server.
* The Orchestration Engine database upgrade is performed by the renew
  utility using the user account that you specify when prompted. For details on
  this process and more information related to the Orchestration Engine database
  upgrade, refer to
  [S141802](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141802).

When you are ready, open the
Database Servers tab in
SBM Configurator,
and then click
Upgrade Database.

Tip: If any errors occur during the
Application Engine
database upgrade, review the upgrade log here:
```
installDirectory\Serena\SBM\Application Engine\log
```

If an
`ORA-00904` message appears in the
Application Engine
upgrade log after you finish upgrading the
Application Engine
database, refer to solution
[S141358](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141358) for a description of the problem
and a resolution.

After the databases are upgraded successfully, verify that the
services are started in the
Manage Services tab. Instruct
Application
Repository
users to clear the cache in their Web browsers before they attempt to access
SBM Application
Repository.

### Post-Upgrade Tasks

Review the following information and make any necessary changes after
you have upgraded your servers and databases:

* SBM Configurator
  warns you if your installation currently uses default certificates (which
  should be replaced) or if your current certificates will expire soon.
  Important: To properly secure your installation, you must
  generate new key pairs even if you do not plan to use
  SSO.
  If you do not generate new key pairs, then the default certificates that the
  STS inherently trusts are used. To increase security, launch
  SBM Configurator
  and generate new unique certificate for all components. For details, see
  "Securing
  SBM"
  in the
  SBM Installation and Configuration
  Guide.
* If you store
  SBM
  item attachments on the file system, enter the location of the attachments
  directory on the
  Common Services tab. This enables
  SBM Common Services
  to return attachments in
  Work Center
  search results. If you store attachments in the database, skip this step.
* For systems that are configured to use client
  certificate authentication, you must perform additional configuration steps
  after the upgrade or disable the feature entirely. For details, refer to the
  entry about client certificate authentication in
  [Installation and Configuration Issues](#InstallationIssues).
* HTML rendering and Rich Text editing is enabled by default for all
  notes in your system after the upgrade.
  To disable these features for notes, clear the
  **Render HTML in Notes** check box located on the HTML tab of
  the Settings dialog box in
  SBM System Administrator.
* As part of the upgrade,
  SBM
  reviews the existing JBoss configuration and allocates the same amount of
  memory to Tomcat that was previously allocated to JBoss. After the upgrade, if
  you need to adjust the amount of memory that is allocated to Tomcat, perform
  the following steps:
  1. Stop the
     SBM
     Tomcat service.
  2. Navigate to
     installDirectory\Serena\SBM\Common\tomcat\bin,
     and edit the
     common\_config.bat file.
  3. Change the
     `JVM_X_MAXMEMSIZE` value as necessary.
  4. In the same
     \bin directory, execute the
     update\_tomcat\_config.bat file.
  5. Start the
     SBM
     Tomcat service.
* After the database upgrades are finished, use the
  **Reset Administrative User Access** wizard in
  SBM System Administrator
  if your database does not contain at least one Regular User or Managed
  Administrator account with Remote Administration privilege. This wizard enables
  you to define at least one user as your primary system administrator (an
  account that has Regular User or Managed Administrator product access with
  Remote Administration privilege) who can log in to
  SBM Application Administrator.
  For details, see the
  SBM System Administrator
  Guide.
* User credentials in
  SBM Application Engine
  Web service calls that use Basic authentication are now handled exclusively by
  SBM Application Engine
  itself, instead of IIS. This configuration is common if your
  SBM
  system is set up with
  **NT Challenge Response** for end-user authentication. After
  upgrade, this means that you must now specify the Windows domain for Web
  service calls in
  SBM Configurator,
  otherwise the domain that the IIS server machine is installed on is used for
  user validation.
* The **Require appended text** option, available for
  *Journal* fields on the Attributes tab (field Property Editor)
  and the Field Overrides tab (workflow Property Editor) now works as intended.
  When the **Required** and **Require appended text** options are selected,
  users must append text to the field during a transition. When only**Required** is selected, users do not need to append text if there is an
  existing entry.

  In past releases, selecting only the **Required** option would
  require users to append text to an existing entry. Now, the **Require appended
  text** option must also be selected to require users to append text.

### Upgrading Customizations and Integrations

Review the following information for help with upgrading custom
changes and integrations.

* If you made custom modifications to any HTML templates, e-mail
  templates, or online help files, you must merge your changes into the
  newly-upgraded files, and then use
  SBM System Administrator
  to
  **Put Files in Database**. All templates and images in the
  database are replaced by files on your local machine as part of this operation.
  Backup templates are stored on the
  installDir\SBM\Application
  Engine
  server here:

  ```
  installDir\Serena\SBM\Application Engine\Backup<version>-<date>-<time>
  ```

  If you used custom HTML templates in your reports, the reports
  might not display properly after upgrade. Consider using the default template
  or modifying it as needed instead. For example, as of
  SBM
  10.1.2, several changes were made to Summary Reports that might not display
  properly using a custom template from a prior release. Instead, either use the
  new default template or merge your chanes into the default template to create a
  new custom template.
* In
  SBM
  10.1.2, the
  SSO
  Login Application (Federation Server) was merged with the
  SSO
  Security Token Service (STS) into a single
  SSO
  Security Server (also known as the Identity Provider (IDP)). This means that
  the
  ALFSSOLogin.war and
  TokenService.war directories were merged and
  replaced with a new
  idp directory on the
  SSO
  server.

  If you are upgrading from a release prior to 10.1.2 and you have
  created custom
  SSO
  integrations, you must review all URLs and calls to ensure that they use the
  latest directory names. For example, if your existing integrations call the
  Security Token Service (STS), you must ensure that the new
  idp directory is used.

  The endpoints of the
  SSO
  services must be changed accordingly. The relative URIs will stay the same, but
  since the application is new, the login application entry point will be
  http(s)://host[:port]/idp/login. For the STS,
  it will be:
  http(s)://host[:port]/idp/services/Trust.
* If you configured your system to use anonymous events prior to the
  upgrade, you must either add credentials to your events (preferred) or you must
  select the
  Allow Anonymous Events check box in
  SBM Configurator
  and enter an
  SBM
  user name and password to use anonymous events after the upgrade.

## Fixed Issues

A list of defects fixed in this version can be found in the
[Knowledge Base](http://knowledgebase.serena.com/InfoCenter/index?page=content&cat=MASHUPS_11.4.2_RESOLVED&channel=DEFECTS). You must have a user account to view
items in the Knowledge Base. Register for a free account if you do not have
already have one.

* **Configuring SSO Protected Hosts**

  You can now use
  SBM Configurator
  to define hosts that have SSO protected applications. When enabled, SSO will
  refuse to accept requests or redirect to hosts that are not on the list. This
  enables you to control which servers users can log in from. For details, see
  solution
  [S142803](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142803).

  The
  SSO Protected Hosts sub-tab appears under the
  Authentication tab in
  SBM Configurator
  when you select SSO to manage user sessions.

## Known Issues

This section
describes known issues and contains the following categories:

* [Installation and Configuration Issues](#InstallationIssues)
* [Administrator Issues](#MashupAdministratorIssues)

For a complete list of known issues and potential workarounds, refer to
the
[Knowledge Base](http://knowledgebase.serena.com/InfoCenter/index?page=content&cat=MASHUPS_11.4.2_REPORTED&channel=DEFECTS). You must have a user
account to view items in the Knowledge Base. Register for a free account if you
do not have already have one.

### Installation and Configuration Issues

* The
  SBM
  Tomcat components in 11.X run on Java 8. Due to known issues in this version of
  Java, if client certificate authentication is enabled between components in
  SBM,
  all communication from Tomcat to IIS fails. Also, if SSO is used, users cannot
  log in to
  SBM
  when client certificate authentication is enabled. This means that you if have
  client certificate authentication enabled prior to the upgrade, you must
  disable it after the upgrade is finished. Alternatively, you can leave client
  certificate authentication enabled, and perform the steps described in
  [D22099](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=D22099) to work around this problem.

  Once these defects (described
  [here](https://bugs.openjdk.java.net/browse/JDK-8054316) and
  [here](https://bugs.openjdk.java.net/browse/JDK-8068812)) are addressed, the JRE that is included with
  SBM
  will be updated.
* The ODBC connection to Oracle fails and the
  following error appears when you attempt to connect to an Oracle 12c Release 2
  database:
  ```
  [SBM][ODBC Oracle Wire Protocol driver][Oracle]ORA-28040: No matching authentication protocol
  ```

  When you attempt a test connection on the
  Database Servers tab in
  SBM Configurator,
  it fails as well.

  This error appears as a result of an Oracle defect (refer to Bug
  14575666 described
  [here](https://docs.oracle.com/database/121/READM/chapter12102.htm#READM266)). To work around this problem, on
  the Oracle server, edit the
  sqlnet.ora file and set the
  `SQLNET.ALLOWED_LOGON_VERSION` value to 8.

### Administrator Issues

#### SBM Application Repository Issues

* The
  following issue is only applicable if you had previously upgraded to 10.1 or
  10.1.1.1. If you did not use either version prior to upgrading, then you can
  ignore this information.

  Values in promotion profiles that were created in 10.1 or 10.1.1.1
  were set to
  **All** by default. Starting with 10.1.1.2, entities for new
  items (items added to a process app since the profile was created) will be set
  to
  **None** by default.

  In addition:
  + Profiles created prior to 10.1 that had entities set to
    **None** may have been incorrectly using
    **All**. These entities will be set back to
    **None**.
  + Profiles created in 10.1 or 10.1.1.1 that had entities set to
    the default
    **All** may also be set to
    **None**. These entities must be manually corrected.In general, it is recommended that you review your promotion
  profiles and adjust the settings accordingly.

## Legal Notice

Â© Copyright 2007â2019 Micro Focus or one of its affiliates.

The only warranties for products and services of Micro Focus and its
affiliates and licensors ("Micro Focus") are set forth in the express warranty
statements accompanying such products and services. Nothing herein should be
construed as constituting an additional warranty. Micro Focus shall not be
liable for technical or editorial errors or omissions contained herein. The
information contained herein is subject to change without notice.

Copyright © 2018 Micro Focus or one of its affiliates. All rights reserved.


