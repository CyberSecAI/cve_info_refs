=== Content from github.com_d24a4a9e_20250121_000609.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flinuxdeepin%2Fdeepin-clone%2Fcommit%2Fe079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flinuxdeepin%2Fdeepin-clone%2Fcommit%2Fe079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=linuxdeepin%2Fdeepin-clone)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[linuxdeepin](/linuxdeepin)
/
**[deepin-clone](/linuxdeepin/deepin-clone)**
Public

* [Notifications](/login?return_to=%2Flinuxdeepin%2Fdeepin-clone) You must be signed in to change notification settings
* [Fork
  32](/login?return_to=%2Flinuxdeepin%2Fdeepin-clone)
* [Star
   70](/login?return_to=%2Flinuxdeepin%2Fdeepin-clone)

* [Code](/linuxdeepin/deepin-clone)
* [Issues
  0](/linuxdeepin/deepin-clone/issues)
* [Pull requests
  3](/linuxdeepin/deepin-clone/pulls)
* [Actions](/linuxdeepin/deepin-clone/actions)
* [Projects
  0](/linuxdeepin/deepin-clone/projects)
* [Security](/linuxdeepin/deepin-clone/security)
* [Insights](/linuxdeepin/deepin-clone/pulse)

Additional navigation options

* [Code](/linuxdeepin/deepin-clone)
* [Issues](/linuxdeepin/deepin-clone/issues)
* [Pull requests](/linuxdeepin/deepin-clone/pulls)
* [Actions](/linuxdeepin/deepin-clone/actions)
* [Projects](/linuxdeepin/deepin-clone/projects)
* [Security](/linuxdeepin/deepin-clone/security)
* [Insights](/linuxdeepin/deepin-clone/pulse)

## Commit

[Permalink](/linuxdeepin/deepin-clone/commit/e079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix: Do not use the "/tmp" directory

[Browse files](/linuxdeepin/deepin-clone/tree/e079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab)
Browse the repository at this point in the history

```
[#16](https://github.com/linuxdeepin/deepin-clone/issues/16)
<https://bugzilla.opensuse.org/show_bug.cgi?id=1130388>
```

* Loading branch information

[![@zccrs](https://avatars.githubusercontent.com/u/13449038?s=40&v=4)](/zccrs)

[zccrs](/linuxdeepin/deepin-clone/commits?author=zccrs "View all commits by zccrs")
committed
Jun 1, 2019

1 parent
[1268024](/linuxdeepin/deepin-clone/commit/1268024023d8c65490ad12e60270af9335fc9989)

commit e079f3e

 Show file tree

 Hide file tree

Showing
**5 changed files**
with
**15 additions**
and
**28 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* app/src

  + corelib

    - app/src/corelib/ddevicediskinfo.cpp
      [ddevicediskinfo.cpp](#diff-4f0d6ade7ebf589dfdb399af19f1de78fff53739125c4d2278ae6067ee469bab)
    - app/src/corelib/helper.cpp
      [helper.cpp](#diff-575032e080b4f3bce42c8d45976afb9afba364e1e0d9829f8c0a904dd297673f)
    - app/src/corelib/helper.h
      [helper.h](#diff-bd706724be65e914b9fc0d42839984808c072c1f3a87a3197ed044325a0657cc)
  + fixboot

    - app/src/fixboot/bootdoctor.cpp
      [bootdoctor.cpp](#diff-8cf3238275e68042c53037334f58eede90c9427baca60ec7ef60c486119732d7)
  + app/src/main.cpp
    [main.cpp](#diff-a68bbd02ff27204e90b2bcf21c852b2a42bd7921db32fb0169dca0661e388820)

## There are no files selected for viewing

4 changes: 2 additions & 2 deletions

4
[app/src/corelib/ddevicediskinfo.cpp](#diff-4f0d6ade7ebf589dfdb399af19f1de78fff53739125c4d2278ae6067ee469bab "app/src/corelib/ddevicediskinfo.cpp")

Show comments

[View file](/linuxdeepin/deepin-clone/blob/e079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab/app/src/corelib/ddevicediskinfo.cpp)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -303,9 +303,9 @@ bool DDeviceDiskInfoPrivate::openDataStream(int index) |
|  |  |  |
|  |  | if (currentMode == DDiskInfo::Read) { |
|  |  | const QString &executer = Helper::getPartcloneExecuter(part); |
|  |  | process->start(QStringLiteral("%1 -s %2 -o - -c -z %3 -L /tmp/partclone.log").arg(executer).arg(part.filePath()).arg(Global::bufferSize), QIODevice::ReadOnly); |
|  |  | process->start(QStringLiteral("%1 -s %2 -o - -c -z %3 -L /var/log/partclone.log").arg(executer).arg(part.filePath()).arg(Global::bufferSize), QIODevice::ReadOnly); |
|  |  | } else { |
|  |  | process->start(QStringLiteral("partclone.restore -s - -o %2 -z %3 -L /tmp/partclone.log").arg(part.filePath()).arg(Global::bufferSize)); |
|  |  | process->start(QStringLiteral("partclone.restore -s - -o %2 -z %3 -L /var/log/partclone.log").arg(part.filePath()).arg(Global::bufferSize)); |
|  |  | } |
|  |  |  |
|  |  | break; |
| Expand Down | |  |

8 changes: 5 additions & 3 deletions

8
[app/src/corelib/helper.cpp](#diff-575032e080b4f3bce42c8d45976afb9afba364e1e0d9829f8c0a904dd297673f "app/src/corelib/helper.cpp")

Show comments

[View file](/linuxdeepin/deepin-clone/blob/e079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab/app/src/corelib/helper.cpp)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -100,6 +100,8 @@ int Helper::processExec(QProcess \*process, const QString &command, int timeout, |
|  |  | if (process->state() != QProcess::NotRunning) { |
|  |  | dCDebug("The \"%s\" timeout, timeout: %d", qPrintable(command), timeout); |
|  |  |  |
|  |  | // QT Bug，某种情况下(未知) QProcess::state 返回的状态有误，导致进程已退出却未能正确获取到其当前状态 |
|  |  | // 因此,额外通过系统文件判断进程是否还存在 |
|  |  | if (QFile::exists(QString("/proc/%1").arg(process->pid()))) { |
|  |  | process->terminate(); |
|  |  | process->waitForFinished(); |
| Expand Down  Expand Up | | @@ -331,7 +333,7 @@ bool Helper::getPartitionSizeInfo(const QString &partDevice, qint64 \*used, qint6 |
|  |  |  |
|  |  | return true; |
|  |  | } else { |
|  |  | process.start(QString("%1 -s %2 -c -q -C -L /tmp/partclone.log").arg(getPartcloneExecuter(DDevicePartInfo(partDevice))).arg(partDevice)); |
|  |  | process.start(QString("%1 -s %2 -c -q -C -L /var/log/partclone.log").arg(getPartcloneExecuter(DDevicePartInfo(partDevice))).arg(partDevice)); |
|  |  | process.setStandardOutputFile("/dev/null"); |
|  |  | process.setReadChannel(QProcess::StandardError); |
|  |  | process.waitForStarted(); |
| Expand Down  Expand Up | | @@ -501,9 +503,9 @@ QString Helper::temporaryMountDevice(const QString &device, const QString &name, |
|  |  | return mount\_point; |
|  |  |  |
|  |  | mount\_point = "%1/.%2/mount/%3"; |
|  |  | const QStringList &tmp\_paths = QStandardPaths::standardLocations(QStandardPaths::TempLocation); |
|  |  | const QStringList &tmp\_paths = QStandardPaths::standardLocations(QStandardPaths::RuntimeLocation); |
|  |  |  |
|  |  | mount\_point = mount\_point.arg(tmp\_paths.isEmpty() ? "/tmp" : tmp\_paths.first()).arg(qApp->applicationName()).arg(name); |
|  |  | mount\_point = mount\_point.arg(tmp\_paths.isEmpty() ? "/run/user/0" : tmp\_paths.first()).arg(qApp->applicationName()).arg(name); |
|  |  |  |
|  |  | if (!QDir::current().mkpath(mount\_point)) { |
|  |  | dCError("mkpath \"%s\" failed", qPrintable(mount\_point)); |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[app/src/corelib/helper.h](#diff-bd706724be65e914b9fc0d42839984808c072c1f3a87a3197ed044325a0657cc "app/src/corelib/helper.h")

Show comments

[View file](/linuxdeepin/deepin-clone/blob/e079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab/app/src/corelib/helper.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -99,6 +99,8 @@ class Helper : public QObject |
|  |  | static QString parseSerialUrl(const QString &urlString, QString \*errorString = 0); |
|  |  | static QString toSerialUrl(const QString &file); |
|  |  |  |
|  |  | static bool clearSymlink(const QString &path); |
|  |  |  |
|  |  | signals: |
|  |  | void newWarning(const QString &message); |
|  |  | void newError(const QString &message); |
| Expand Down | |  |

3 changes: 1 addition & 2 deletions

3
[app/src/fixboot/bootdoctor.cpp](#diff-8cf3238275e68042c53037334f58eede90c9427baca60ec7ef60c486119732d7 "app/src/fixboot/bootdoctor.cpp")

Show comments

[View file](/linuxdeepin/deepin-clone/blob/e079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab/app/src/fixboot/bootdoctor.cpp)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -55,8 +55,7 @@ bool BootDoctor::fix(const QString &partDevice) |
|  |  | } |
|  |  |  |
|  |  | { |
|  |  | const QStringList &tmp\_paths = QStandardPaths::standardLocations(QStandardPaths::TempLocation); |
|  |  | const QString tmp\_dir = (tmp\_paths.isEmpty() ? "/tmp" : tmp\_paths.first()) + "/.deepin-clone"; |
|  |  | const QString tmp\_dir = "/var/cache/deepin-clone"; |
|  |  |  |
|  |  | if (!QDir::current().mkpath(tmp\_dir)) { |
|  |  | dCError("mkpath \"%s\" failed", qPrintable(tmp\_dir)); |
| Expand Down | |  |

26 changes: 5 additions & 21 deletions

26
[app/src/main.cpp](#diff-a68bbd02ff27204e90b2bcf21c852b2a42bd7921db32fb0169dca0661e388820 "app/src/main.cpp")

Show comments

[View file](/linuxdeepin/deepin-clone/blob/e079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab/app/src/main.cpp)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -102,36 +102,20 @@ int main(int argc, char \*argv[]) |
|  |  | ConsoleAppender \*consoleAppender = new ConsoleAppender; |
|  |  | consoleAppender->setFormat(logFormat); |
|  |  |  |
|  |  | RollingFileAppender \*rollingFileAppender = new RollingFileAppender("/tmp/.deepin-clone.log"); |
|  |  | const QString log\_file("/var/log/deepin-clone.log"); |
|  |  |  |
|  |  | RollingFileAppender \*rollingFileAppender = new RollingFileAppender(log\_file); |
|  |  | rollingFileAppender->setFormat(logFormat); |
|  |  | rollingFileAppender->setLogFilesLimit(5); |
|  |  | rollingFileAppender->setDatePattern(RollingFileAppender::DailyRollover); |
|  |  |  |
|  |  | logger->registerAppender(consoleAppender); |
|  |  | logger->registerAppender(rollingFileAppender); |
|  |  | logger->registerAppender(consoleAppender); |
|  |  |  |
|  |  | if (qEnvironmentVariableIsSet("PKEXEC\_UID")) { |
|  |  | const quint32 pkexec\_uid = qgetenv("PKEXEC\_UID").toUInt(); |
|  |  | const QDir user\_home(getpwuid(pkexec\_uid)->pw\_dir); |
|  |  |  |
|  |  | QFile pam\_file(user\_home.absoluteFilePath(".pam\_environment")); |
|  |  |  |
|  |  | if (pam\_file.open(QIODevice::ReadOnly)) { |
|  |  | while (!pam\_file.atEnd()) { |
|  |  | const QByteArray &line = pam\_file.readLine().simplified(); |
|  |  |  |
|  |  | if (line.startsWith("QT\_SCALE\_FACTOR")) { |
|  |  | const QByteArrayList &list = line.split('='); |
|  |  |  |
|  |  | if (list.count() == 2) { |
|  |  | qputenv("QT\_SCALE\_FACTOR", list.last()); |
|  |  | break; |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | pam\_file.close(); |
|  |  | } |
|  |  | DApplication::customQtThemeConfigPathByUserHome(getpwuid(pkexec\_uid)->pw\_dir); |
|  |  | } |
|  |  |  |
|  |  | DApplication::loadDXcbPlugin(); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `e079f3e`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flinuxdeepin%2Fdeepin-clone%2Fcommit%2Fe079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from lists.fedoraproject.org_86c6797a_20250121_000610.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H.mbox.gz?message=TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H/#TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H)

# [SECURITY] Fedora 30 Update: dtkcore-2.0.16.1-1.fc30

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

27 Jul
2019

27 Jul
'19

6:23 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2019-3d418f349c
2019-07-28 01:23:13.298454
--------------------------------------------------------------------------------

Name : dtkcore
Product : Fedora 30
Version : 2.0.16.1
Release : 1.fc30
URL : <https://github.com/linuxdeepin/dtkcore>
Summary : Deepin tool kit core modules
Description :
Deepin tool kit core modules.

--------------------------------------------------------------------------------
Update Information:

Security fix for CVE-2019-13228, CVE-2019-13229, CVE-2019-13227, CVE-2019-13226.
--------------------------------------------------------------------------------
ChangeLog:

\* Wed Jul 17 2019 Robin Lee cheeselee@fedoraproject.org - 2.0.16.1-1
- Update to 2.0.16.1
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #1730300 - CVE-2019-13226 deepin-clone: predictable path in the Helper::temporaryMountDevice() function enabling a symlink exploit
<https://bugzilla.redhat.com/show_bug.cgi?id=1730300>
[ 2 ] Bug #1730306 - CVE-2019-13227 deepin-clone: log file at the fixed path created as root leads to a symlink attack
<https://bugzilla.redhat.com/show_bug.cgi?id=1730306>
[ 3 ] Bug #1730308 - CVE-2019-13229 deepin-clone: fixed path in the Helper::getPartitionSizeInfo() function allows symlink attack
<https://bugzilla.redhat.com/show_bug.cgi?id=1730308>
[ 4 ] Bug #1730312 - CVE-2019-13228 deepin-clone: fixed path in the BootDoctor::fix() function allows symlink attack
<https://bugzilla.redhat.com/show_bug.cgi?id=1730312>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2019-3d418f349c' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H/#TCHGRJV5CWTMYEE5B5C2FNMCFVP45S7H)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from bugzilla.redhat.com_b8cbdef7_20250121_021431.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1730306)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1730306)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1730306)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1730306

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1730306**](show_bug.cgi?id=1730306)
(CVE-2019-13227)
- [CVE-2019-13227](https://access.redhat.com/security/cve/CVE-2019-13227) deepin-clone: log file at the fixed path created as root leads to a symlink attack

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2019-13227 deepin-clone: log file at the fixed path created as root leads...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED UPSTREAM | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2019-13227 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1730307](show_bug.cgi?id=1730307 "CLOSED ERRATA - CVE-2019-13227 deepin-clone: log file at the fixed path created as root leads to a symlink attack [fedora-30]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1730306&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1730306&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2019-07-16 12:22 UTC by Marian Rehak | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-16 21:43 UTC ([History](show_activity.cgi?id=1730306)) | | [CC List:](page.cgi?id=fields.html#cclist) | 3 users (show)  robinlee.sysu sensor.wen sztsian | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-07-16 14:40:48 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1730306#c0)  Marian Rehak    2019-07-16 12:22:59 UTC  ``` In GUI mode, deepin-clone before 1.1.3 creates a log file at the fixed path /tmp/.deepin-clone.log as root, and follows symlinks there. An unprivileged user can prepare a symlink attack there to create or overwrite files in arbitrary file system locations. The content is not attacker controlled.  External Reference:  <https://bugzilla.suse.com/show_bug.cgi?id=1130388>   ```  [Comment 1](show_bug.cgi?id=1730306#c1)  Marian Rehak    2019-07-16 12:23:13 UTC  ``` Created deepin-clone tracking bugs for this issue:  Affects: fedora-30 [[bug 1730307](show_bug.cgi?id=1730307 "CLOSED ERRATA - CVE-2019-13227 deepin-clone: log file at the fixed path created as root leads to a symlink attack [fedora-30]")]   ```  [Comment 2](show_bug.cgi?id=1730306#c2)  Product Security DevOps Team    2019-07-16 14:40:48 UTC  ``` This CVE Bugzilla entry is for community support informational purposes only as it does not affect a package in a commercially supported Red Hat product. Refer to the dependent bugs for status of those individual community products.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1730306&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.suse.com_3e8b0d45_20250121_000608.html ===


| Bugzilla – Bug 1130388 | AUDIT-STALE: deepin-clone: new polkit action com.deepin.pkexec.deepin-clone | Last modified: 2021-05-03 09:47:29 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1130388)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1130388**](show_bug.cgi?id=1130388)
- AUDIT-STALE: deepin-clone: new polkit action com.deepin.pkexec.deepin-clone

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
AUDIT-STALE: deepin-clone: new polkit action com.deepin.pkexec.deepin-clone

| | [Status](page.cgi?id=status_resolution_matrix.html): | REOPENED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | openSUSE Tumbleweed | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | openSUSE | | [Component:](describecomponents.cgi?product=openSUSE Tumbleweed "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Security ([show other bugs](buglist.cgi?component=Security&product=openSUSE%20Tumbleweed&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | Current | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All All | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P5 - None **Severity**: Normal ([vote](page.cgi?id=voting/user.html&bug_id=1130388#vote_1130388)) | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | zhang dingyuan | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | E-mail List | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2019-03-25 13:02 UTC by Hillwood Yang | | --- | --- | | Modified: | 2021-05-03 09:47 UTC ([History](show_activity.cgi?id=1130388)) | | CC List: | 3 users (show)  felixonmars justforlxz matthias.gerstner | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1130388) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**com.deepin.pkexec.deepin-clone.policy**](attachment.cgi?id=801090 "View the content of the attachment") (9.84 KB, application/xml)  [2019-03-25 13:04 UTC](#attach_801090 "Go to the comment associated with the attachment"), Hillwood Yang | [Details](attachment.cgi?id=801090&action=edit) | | [View All](attachment.cgi?bugid=1130388&action=viewall)  [Add an attachment](attachment.cgi?bugid=1130388&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1130388&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1130388#c0)  Hillwood Yang   2019-03-25 13:02:31 UTC  ``` [  129s] deepin-clone.x86_64: E: polkit-untracked-privilege (Badness: 10000) com.deepin.pkexec.deepin-clone (auth_admin:auth_admin:auth_admin) [  129s] The privilege is not listed in /etc/polkit-default-privs.* which makes it [  129s] harder for admins to find. Furthermore polkit authorization checks can easily [  129s] introduce security issues. If the package is intended for inclusion in any [  129s] SUSE product please open a bug report to request review of the package by the [  129s] security team. Please refer to [  129s] [https://en.opensuse.org/openSUSE:Package_security_guidelines#audit_bugs](https://en.opensuse.org/openSUSE%3APackage_security_guidelines#audit_bugs) for [  129s] more information. [  129s]  [  129s] (none): E: badness 10000 exceeds threshold 1000, aborting. [  129s] 3 packages and 0 specfiles checked; 1 errors, 2 warnings. ``` [Comment 1](show_bug.cgi?id=1130388#c1)  Hillwood Yang   2019-03-25 13:04:34 UTC  ``` Created [attachment 801090](attachment.cgi?id=801090 "com.deepin.pkexec.deepin-clone.policy") [[details]](attachment.cgi?id=801090&action=edit "com.deepin.pkexec.deepin-clone.policy") com.deepin.pkexec.deepin-clone.policy  Please reveiwe this file. ``` [Comment 2](show_bug.cgi?id=1130388#c2)  Hillwood Yang   2019-03-25 13:05:46 UTC  ``` This package is at [https://build.opensuse.org/package/show/X11:Deepin:Factory/deepin-clone](https://build.opensuse.org/package/show/X11%3ADeepin%3AFactory/deepin-clone) ``` [Comment 3](show_bug.cgi?id=1130388#c3)  Matthias Gerstner   2019-03-25 14:04:43 UTC  ``` Thank you for opening the review bug. The program is of moderate size (about 8.500 lines of C++ code). Most of the code is probably concerned with GUI management.  The other deepin code reviews from a while ago showed a couple of security problems so we should be careful with this addition.  The security team is currently under a high load of reviews so it may take a while until we can take care of this one. ``` [Comment 4](show_bug.cgi?id=1130388#c4)  Matthias Gerstner   2019-04-25 12:52:52 UTC  ``` I will start working on this review. ``` [Comment 5](show_bug.cgi?id=1130388#c5)  Matthias Gerstner   2019-04-26 12:11:39 UTC  ``` I just realize that there is still [bug 1070943](show_bug.cgi?id=1070943 "RESOLVED FIXED - AUDIT-1: deepin-api: review of D-Bus service and polkit actions") pending for deepin-api. Do you have a new version there with the patches included? ``` [Comment 6](show_bug.cgi?id=1130388#c6)  Hillwood Yang   2019-04-29 08:47:39 UTC  ``` (In reply to Matthias Gerstner from [comment #5](show_bug.cgi?id=1130388#c5)) > I just realize that there is still [bug 1070943](show_bug.cgi?id=1070943 "RESOLVED FIXED - AUDIT-1: deepin-api: review of D-Bus service and polkit actions") pending for deepin-api. Do you > have a new version there with the patches included?  Yes, I have updated [bug 1070943](show_bug.cgi?id=1070943 "RESOLVED FIXED - AUDIT-1: deepin-api: review of D-Bus service and polkit actions"). Thanks! ``` [Comment 7](show_bug.cgi?id=1130388#c7)  Matthias Gerstner   2019-04-29 12:57:56 UTC  ``` So I reviewed deepin-clone and there are a couple of issues regarding security. They need to be fixed before we can accept the package:  1) in GUI mode deepin-clone creates "/tmp/.deepin-clone.log" and follows   symlinks there. This file needs to be open()ed with   O_NOFOLLOW|O_CREAT|O_EXCL.  Or even better using a non predictable temporary   file in /tmp using QTemporaryFile.  2) temporaryMountDevice() uses a fixed path   /tmp/.deepin-clone/mount/<block-dev-basename> to temporarily mount a file   system there. These paths can be prepared by an attacker and symlinks will   be followed during mounting. If the attacker quickly enters the mount then   it probably can also prevent the following unmount. This logic can e.g. be   triggered by running `deepin-clone -i /dev/sdX`.    An attacker can thus cause the file system to be permanently mounted at an   arbitrary location in the file system.  3) `Helper::getPartitionSizeInfo()` uses /tmp/partclone.log as a fixed path   during execution of partclone. The same issues about symlink attacks etc.   like in 1) apply here. This needs to be a non-predictable path, or a path in   a directory not accessible to regular users.  4) similarly in `BootDoctor::fix()` the fixed path /tmp/repo.iso is created and   the fixed directory /tmp/.deepin-clone is used. The same concerns as in 1)   and 3) apply.  5) /tmp/.deepin-clone.log and /var/log/deepin-clone.log are both world   readable. Log files whould not be world readable when they come from a   program running as root as it may leak information valuable to an attacker.  6) in helper.cpp:986:    ```   if (QFile::exists(QString("/proc/%1").arg(process->pid()))) {       process->terminate();       process->waitForFinished();   } else {   ```    I don't know if this check is really necessary but if it is then it is a   race condition and could be used to kill an unrelated process in case the   child PID is replaced by some other process unrelated to deepin-clone.  7) in GUI and pkexec mode deepin-clone opens the `PKEXEC_UID`s   `~/.pam_environment` while following symlinks and not checking file types.   While it can be argued that the executor that successfully was granted   access by pkexec shouldn't be an attacker it would still be a better style   not to open this file as root. It should be opened only with   setfsuid(PKEXEC_UID).  Non security issues but style/robustness issues:  8) isBlockSpecialFile() returns true if the path starts with /dev? That sounds   like a hack and could lead to surprises! 9) DDiskInfo::getInfo() under some circumstances also creates the file? Sounds   like an unexpected side effect!  The issue 1) and 2) and probably also 3) and 4) could require CVE assignments since these are realistic security issues that can be exploited by local regular users in the system. ``` [Comment 8](show_bug.cgi?id=1130388#c8)  Hillwood Yang   2019-04-29 13:12:39 UTC  ``` (In reply to Matthias Gerstner from [comment #7](show_bug.cgi?id=1130388#c7)) > So I reviewed deepin-clone and there are a couple of issues regarding > security. They need to be fixed before we can accept the package: >  > 1) in GUI mode deepin-clone creates "/tmp/.deepin-clone.log" and follows >   symlinks there. This file needs to be open()ed with >   O_NOFOLLOW|O_CREAT|O_EXCL.  Or even better using a non predictable > temporary >   file in /tmp using QTemporaryFile. >  > 2) temporaryMountDevice() uses a fixed path >   /tmp/.deepin-clone/mount/<block-dev-basename> to temporarily mount a file >   system there. These paths can be prepared by an attacker and symlinks will >   be followed during mounting. If the attacker quickly enters the mount then >   it probably can also prevent the following unmount. This logic can e.g. be >   triggered by running `deepin-clone -i /dev/sdX`. >  >   An attacker can thus cause the file system to be permanently mounted at an >   arbitrary location in the file system. >  > 3) `Helper::getPartitionSizeInfo()` uses /tmp/partclone.log as a fixed path >   during execution of partclone. The same issues about symlink attacks etc. >   like in 1) apply here. This needs to be a non-predictable path, or a path > in >   a directory not accessible to regular users. >  > 4) similarly in `BootDoctor::fix()` the fixed path /tmp/repo.iso is created > and >   the fixed directory /tmp/.deepin-clone is used. The same concerns as in 1) >   and 3) apply. >  > 5) /tmp/.deepin-clone.log and /var/log/deepin-clone.log are both world >   readable. Log files whould not be world readable when they come from a >   program running as root as it may leak information valuable to an attacker. >  > 6) in helper.cpp:986: >  >   ``` >   if (QFile::exists(QString("/proc/%1").arg(process->pid()))) { >       process->terminate(); >       process->waitForFinished(); >   } else { >   ``` >  >   I don't know if this check is really necessary but if it is then it is a >   race condition and could be used to kill an unrelated process in case the >   child PID is replaced by some other process unrelated to deepin-clone. >  > 7) in GUI and pkexec mode deepin-clone opens the `PKEXEC_UID`s >   `~/.pam_environment` while following symlinks and not checking file types. >   While it can be argued that the executor that successfully was granted >   access by pkexec shouldn't be an attacker it would still be a better style >   not to open this file as root. It should be opened only with >   setfsuid(PKEXEC_UID). >  > Non security issues but style/robustness issues: >  > 8) isBlockSpecialFile() returns true if the path starts with /dev? That > sounds >   like a hack and could lead to surprises! > 9) DDiskInfo::getInfo() under some circumstances also creates the file? > Sounds >   like an unexpected side effect! >  > The issue 1) and 2) and probably also 3) and 4) could require CVE assignments > since these are realistic security issues that can be exploited by local > regular users in the system.  Thanks! I will report to upstream. ``` [Comment 9](show_bug.cgi?id=1130388#c9)  Hillwood Yang   2019-06-08 13:21:30 UTC  ``` Upstream have fixed this security issue in new version 1.1.3, could you check this fix? ``` [Comment 10](show_bug.cgi?id=1130388#c10)  Hillwood Yang   2019-06-08 13:24:57 UTC  ``` The Fix: <https://github.com/linuxdeepin/deepin-clone/pull/18> The new version building: [https://build.opensuse.org/package/show/X11:Deepin:Factory/deepin-clone](https://build.opensuse.org/package/show/X11%3ADeepin%3AFactory/deepin-clone) ``` [Comment 11](show_bug.cgi?id=1130388#c11)  Matthias Gerstner   2019-07-03 10:26:54 UTC  ``` So lets see what has been improved:  (In reply to matthias.gerstner@suse.com from [comment #7](show_bug.cgi?id=1130388#c7)) > 1) in GUI mode deepin-clone creates "/tmp/.deepin-clone.log" and follows >   symlinks there. This file needs to be open()ed with >   O_NOFOLLOW|O_CREAT|O_EXCL.  Or even better using a non predictable temporary >   file in /tmp using QTemporaryFile.  This file has been moved to /var/log/deepin-clone.log. At least the symlink attack should be avoided this way.  > 2) temporaryMountDevice() uses a fixed path >   /tmp/.deepin-clone/mount/<block-dev-basename> to temporarily mount a file >   system there. These paths can be prepared by an attacker and symlinks will >   be followed during mounting. If the attacker quickly enters the mount then >   it probably can also prevent the following unmount. This logic can e.g. be >   triggered by running `deepin-clone -i /dev/sdX`.  The mount is now performed in QStandardPaths::RuntimeLocation which is /run/user/$UID on Linux. It's a bit unusual to use that for this purpose but it should address the symlink attack.  > 3) `Helper::getPartitionSizeInfo()` uses /tmp/partclone.log as a fixed path >   during execution of partclone. The same issues about symlink attacks etc. >   like in 1) apply here. This needs to be a non-predictable path, or a path in >   a directory not accessible to regular users.  The file has been moved to /var/log/partclone.log. The symlink attack should be addressed this way.  > 4) similarly in `BootDoctor::fix()` the fixed path /tmp/repo.iso is created and >   the fixed directory /tmp/.deepin-clone is used. The same concerns as in 1) >   and 3) apply.  This has been moved to /var/cache/deepin-clone. /var/cache is usually only writable by root. Should handle this attack vector.  > 5) /tmp/.deepin-clone.log and /var/log/deepin-clone.log are both world >   readable. Log files whould not be world readable when they come from a >   program running as root as it may leak information valuable to an attacker.  As far as I can see this item has not been addressed.  > 6) in helper.cpp:986: >  >   ``` >   if (QFile::exists(QString("/proc/%1").arg(process->pid()))) { >       process->terminate(); >       process->waitForFinished(); >   } else { > >   ``` >   I don't know if this check is really necessary but if it is then it is a >   race condition and could be used to kill an unrelated process in case the >   child PID is replaced by some other process unrelated to deepin-clone.  This item has also not been adressed, only a Chinese comment was added that I can't fully understand. It seems to be a kind of workaround for something but this approach is not good security wise.  > 7) in GUI and pkexec mode deepin-clone opens the `PKEXEC_UID`s >   `~/.pam_environment` while following symlinks and not checking file types. >   While it can be argued that the executor that successfully was granted >   access by pkexec shouldn't be an attacker it would still be a better style >   not to open this file as root. It should be opened only with >   setfsuid(PKEXEC_UID).  The parsing of this file has been removed, instead an environment variable D_QT_THEME_CONFIG_PATH pointing to the users ~/.config directory is setup. I'm not quite sure where this environment variable is used at all at the moment. So the status is unclear to me.  > Non security issues but style/robustness issues: >  > 8) isBlockSpecialFile() returns true if the path starts with /dev? That sounds >   like a hack and could lead to surprises!  This is still the same.  > 9) DDiskInfo::getInfo() under some circumstances also creates the file? Sounds >   like an unexpected side effect!  So the issues 5), 6), 8) and 9) have not been addressed yet. For 7) I'm not sure.  The more severe issues have been fixed at least. 5) and 6) should still be addressed before we accept it, the others ... well they look very hacky and I think something should be done as well. ``` [Comment 12](show_bug.cgi?id=1130388#c12)  Matthias Gerstner   2019-12-16 12:44:03 UTC  ``` There has been no response from the packager or from upstream for a long time. Closing this and related deepin bugs. ``` [Comment 13](show_bug.cgi?id=1130388#c13)  Hillwood Yang   2021-04-26 01:43:12 UTC  ``` Assign to justforlxz@gmail.com ``` [Comment 14](show_bug.cgi?id=1130388#c14)  Matthias Gerstner   2021-04-29 12:06:18 UTC  ``` (In reply to hillwoodroc@gmail.com from [comment #13](show_bug.cgi?id=1130388#c13)) > Assign to justforlxz@gmail.com  this time actually assign :) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1130388)
* - [XML](show_bug.cgi?ctype=xml&id=1130388)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1130388)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1130388)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from bugzilla.redhat.com_8d8bcda4_20250121_021433.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1730308)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1730308)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1730308)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1730308

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1730308**](show_bug.cgi?id=1730308)
(CVE-2019-13229)
- [CVE-2019-13229](https://access.redhat.com/security/cve/CVE-2019-13229) deepin-clone: fixed path in the Helper::getPartitionSizeInfo() function allows symlink attack

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2019-13229 deepin-clone: fixed path in the Helper::getPartitionSizeInfo()...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED UPSTREAM | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2019-13229 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1730309](show_bug.cgi?id=1730309 "CLOSED ERRATA - CVE-2019-13229 deepin-clone: fixed path in the Helper::getPartitionSizeInfo() function allows symlink attack [fedora-30]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1730308&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1730308&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2019-07-16 12:27 UTC by Marian Rehak | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-16 21:43 UTC ([History](show_activity.cgi?id=1730308)) | | [CC List:](page.cgi?id=fields.html#cclist) | 3 users (show)  robinlee.sysu sensor.wen sztsian | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-07-16 14:40:50 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1730308#c0)  Marian Rehak    2019-07-16 12:27:14 UTC  ``` deepin-clone before 1.1.3 uses a fixed path /tmp/partclone.log in the Helper::getPartitionSizeInfo() function to write a log file as root, and follows symlinks there. An unprivileged user can prepare a symlink attack there to create or overwrite files in arbitrary file system locations. The content is not attacker controlled.  External References:  <https://bugzilla.suse.com/show_bug.cgi?id=1130388>   ```  [Comment 1](show_bug.cgi?id=1730308#c1)  Marian Rehak    2019-07-16 12:27:32 UTC  ``` Created deepin-clone tracking bugs for this issue:  Affects: fedora-30 [[bug 1730309](show_bug.cgi?id=1730309 "CLOSED ERRATA - CVE-2019-13229 deepin-clone: fixed path in the Helper::getPartitionSizeInfo() function allows symlink attack [fedora-30]")]   ```  [Comment 2](show_bug.cgi?id=1730308#c2)  Product Security DevOps Team    2019-07-16 14:40:50 UTC  ``` This CVE Bugzilla entry is for community support informational purposes only as it does not affect a package in a commercially supported Red Hat product. Refer to the dependent bugs for status of those individual community products.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1730308&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.openwall.com_6bb15de9_20250121_000607.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2019/07/03/1) [[next>]](../../../2019/07/05/1) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20190704125914.GD9530@f195.suse.de>
Date: Thu, 4 Jul 2019 14:59:14 +0200
From: Matthias Gerstner <mgerstner@...e.de>
To: oss-security@...ts.openwall.com
Subject: deepin-clone: various symlink attacks

Hello,

deepin-clone [1] is a command line and graphical disk backup utility
that is part of the deepin desktop environment (a desktop environment
focused on Chinese users).

In the course of a review [2] of polkit privileges used by the
application the following major security issues have been found:

CVE-2019-13227) in GUI mode deepin-clone creates
  `/tmp/.deepin-clone.log` as root and follows symlinks there.

CVE-2019-13226) `Helper::temporaryMountDevice()` uses a predictable path
  `/tmp/.deepin-clone/mount/<block-dev-basename>` to temporarily mount a
  file system there. These paths can be prepared by an attacker and
  symlinks will be followed during mounting. If the attacker wins a race
  condition by quickly entering the mount point then it can also prevent
  the following unmount. This logic can e.g. be triggered by running
  `deepin-clone -i /dev/sdX`.

  An attacker can thus cause the file system to be permanently mounted
  at an arbitrary location in the file system.

CVE-2019-13229) `Helper::getPartitionSizeInfo()` uses /tmp/partclone.log
  as a fixed path during execution of partclone. The same issues about
  symlink attacks etc.  like in 1) apply here.

CVE-2019-13228) similarly in `BootDoctor::fix()` the fixed path
  `/tmp/repo.iso` is created and the fixed directory /tmp/.deepin-clone
  is used. The same concerns as in 1) and 3) apply. By winning a race
  condition to replace the `/tmp/repo.iso` symlink by an attacker
  controlled iso file further privilege escalation may be possible.

The issues have been fixed via the upstream commit [3].

Best Regards

Matthias

[1]: <https://github.com/linuxdeepin/deepin-clone>
[2]: <https://bugzilla.suse.com/show_bug.cgi?id=1130388>
[3]: <https://github.com/linuxdeepin/deepin-clone/commit/e079f3e2712b4f8c28e3e63e71ba1a1f90fce1ab>

--
Matthias Gerstner <matthias.gerstner@...e.de>
Dipl.-Wirtsch.-Inf. (FH), Security Engineer
<https://www.suse.com/security>
Phone: +49 911 740 53 290
GPG Key ID: 0x14C405C971923553

SUSE Linux GmbH
GF: Felix Imendörffer, Mary Higgins, Sri Rasiah
HRB 21284 (AG Nuernberg)

Download attachment "[signature.asc](1/1)" of type "application/pgp-signature" (834 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


