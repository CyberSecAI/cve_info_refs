=== Content from discuss.flarum.org_ac34e99d_20250121_003855.html ===


[![Flarum Community](https://discuss.flarum.org/assets/logo-2q2rcevl.png)](https://discuss.flarum.org)

Loading...

This site is best viewed in a modern browser with JavaScript enabled.

Something went wrong while trying to load the full version of this site. Try hard-refreshing this page to fix the error.

# Flarum 0.1.0-beta.8 Released

### Toby

Today we're proud to announce the release of **Flarum 0.1.0-beta.8**.

This is a huge release. It contains some massive behind-the-scenes changes which will make Flarum more reliable and streamline extension development going forward. There are also a few nifty new features, and plenty of bug fixes.

### üîç Improved Search

Search has received a makeover. Discussion titles are now searched and results are ranked much more reliably. Search performance issues on large forums have been fixed. Search results have been redesigned making it easier to find what you're looking for.

![](https://i.imgur.com/o5yvPqI.png)

### ‚úèÔ∏è Formatting Buttons

Markdown fans rejoice! You can now format your posts with the click of a button (or the press of a keyboard shortcut). The text editor has been beefed up with automatic insertion of list items and indentation. There are also buttons to insert emoji and mentions to make these features more discoverable.

![](https://i.imgur.com/5638hva.png)

### üìà Admin Dashboard

Work has begun on a proper admin dashboard, featuring some basic status information and a framework for customizable widgets. Although you can't yet customize the widget layout, extensions may add them. A Statistics widget is currently under development.

![](https://i.imgur.com/CIl4mvE.png)

### üåà And More!

* **Infinite scrolling of the notifications list** lets you view more than just the ten most recent notifications.
* **Drag and drop avatar upload** thanks to [@josephnle](https://discuss.flarum.org/u/josephnle).
* **Better emoji support** with Twemoji instead of Emoji One.
* **Redesigned error and Reset Password pages** to keep your Flarum forum looking snazzy.
* **A new layout for the Extensions page** thanks to [@DogSports](https://discuss.flarum.org/u/DogSports), [@ardacebi](https://discuss.flarum.org/u/ardacebi), and [@datitisev](https://discuss.flarum.org/u/datitisev).
* **Custom footer HTML** can be set just like custom header HTML.
* **Font Awesome 5** provides some beautiful new icons for Flarum's interface.
* **Open Sans has been removed** as Flarum's default font ‚Äì we now use the default system font.
* **A minor security fix** thanks to responsible disclosure from B. Dhiyaneshwaran of Geek Freak.

These are just some of the highlights of beta 8. There are tons of other minor features, polish, bug fixes, and performance improvements ‚Äì see the [full changelog](https://github.com/flarum/core/releases/tag/v0.1.0-beta.8) for all the nitty-gritty!

## For Developers

All these features and improvements are great. But perhaps the most impressive part of beta 8 is what's gone on behind the scenes. The development team has worked tirelessly to completely overhaul Flarum's codebase, making it more reliable, secure, maintainable, and extensible. In overview:

* **PHP namespaces** have been restructured in a more logical manner.
* **Database columns and JSON-API attributes** have been renamed to conform to a convention.
* **An all-new PHP Extension API** makes writing extensions faster and easier.
* **Webpack for JavaScript compilation** is faster, more powerful, and generates sourcemaps.
* **Various major refactorings and new APIs**, including the application bootstrapping process, frontend/asset compilation pipeline, model visibility scoping, user display names, and third-party login providers.

### üî® New Extension API

The new PHP Extension API is really nifty. We won't go into full detail here, but¬†here's a taste of how easy it is to do some basic tasks like adding assets and routes, all from the bootstrap file:

```
// your-extension/extend.php
use Flarum\Extend;

return [
    (new Extend\Frontend('forum'))
        ->js(__DIR__.'/js/dist/forum.js')
        ->css(__DIR__.'/less/forum.less')
        ->route('/tags', 'tags'),

    (new Extend\Frontend('admin'))
        ->js(__DIR__.'/js/dist/admin.js')
        ->css(__DIR__.'/less/admin.less'),

    (new Extend\Routes('api'))
        ->get('/tags', 'tags.index', Controller\ListTagsController::class)
];
```

The API is incomplete and still a work-in-progress ‚Äì¬†there's a lot you can't yet achieve with it. But most of your beta 7 extension code will remain compatible, so you can transition your extensions over to the new API progressively as it's released in beta 9 and beyond.

We're also planning a similar overhaul on the JavaScript side of the Extension API ‚Äì¬†stay tuned for more in beta 9.

For step-by-step instructions on how to update your extensions for beta 8, see [this doc](https://flarum.org/docs/extend/update-b8.html). Or, to get familiar with the new API, check out the [updated extension docs](https://flarum.org/docs/extend/).

### üë®‚Äçüî¨ Site `extend.php`

Want to have a play with the new extenders, or just make some quick customizations to your forum without having to scaffold a whole new extension? The new `extend.php` included in the Flarum skeleton is the perfect way to do this. Just open it up, put your extenders in, and fire 'em up.

## Upgrading

Alright, time to upgrade! But before you do, a few warnings:

üõë **Flarum is beta software. You shouldn't be using it in production unless you know what you're doing.** This upgrade involves getting your hands dirty. üë®‚Äçüîß Things might go wrong. üí• While we'll try our best to support you, remember the warning you read before you installed Flarum, and be prepared to take responsibility if you chose to ignore it. There are a few things you can do to ensure the upgrade goes as smoothly as possible:

* **Back up your data** ‚Äì both your files and your database. If something goes wrong and you have a backup to restore from, you'll be glad you did.
* **Do not upgrade a production forum.** If you *are* running Flarum in production, perform the upgrade in a local development environment first so you can make sure you know what you're doing, before you think about touching your live one.
* **Be patient with those who are trying to help you.** We know that it can be frustrating, but you're going to have much more success in getting help if you're pleasant and patient with your support.

‚ö†Ô∏è **Beta 8 requires PHP 7.1 and MySQL 5.6.** Make sure your server is running modern versions before you upgrade.

‚ö†Ô∏è **Beta 8 breaks compatibility with third-party extensions.** You must disable all third-party extensions before upgrading. For a list of extensions that have been updated for beta 8, see [here](https://flagrow.io/extensions?flarum-version=0.1.0-beta.8).

‚ö†Ô∏è **Beta 8 removes the user bio feature.** While there is currently no drop-in replacement for this, bio data will remain in the database so it can still be accessed when there is a replacement.

Happy? Let's get started.

### 1Ô∏è‚É£ Disable Third-Party Extensions

As the warning states above, beta 8 breaks compatibility with third-party extensions. **You'll need to disable third-party extensions before you proceed**, otherwise things could go awry during the upgrade process.

### 2Ô∏è‚É£ Update Your Skeleton

The "skeleton" refers to all of the directories and files other than the `vendor` directory (which is where Flarum's source code lives). There have been a few changes in beta 8:

* The biggest change is that all public files (`assets`, `.htaccess`, `index.php`) have been moved into a new `public` directory. This drastically increases security by moving sensitive source code files outside of the web root.
* `admin.php` and `api.php` have been removed.
* The contents of `flarum` and `index.php` have been updated.
* There is a new `extend.php` file.
* There are new `storage/locale` and `storage/sessions` directories.
* The `flarum-ext-` prefix has been removed from all extension Composer package names. `flarum/flarum-ext-english` is now `flarum/lang-english`.
* A `.nginx.conf` file has been added. For convenience, this can be included into your server's configuration block.

**The recommended way to update your skeleton is to start from scratch:**

1. Make a backup or move your existing Flarum installation into a different directory.
2. Follow the steps in the [installation guide](https://flarum.org/docs/install.html) to set up a fresh Flarum skeleton.
3. Copy over the following files from your old Flarum installation:
   * `config.php`
   * `assets` (copy into your `public` directory)
4. Keep the new `composer.json` file provided with the fresh skeleton for now. You can selectively re-install your third-party extensions after the next step is complete.

### 3Ô∏è‚É£ Update Flarum

This is where the magic happens ‚ú®. These commands may take a few minutes to run ‚Äì especially if you're running a big forum. Sit tight!

```
composer update
php flarum migrate
php flarum cache:clear
```

Now close your eyes üòå, cross your fingers ü§û, and reload your sparkly new Beta 8 forum.

### 4Ô∏è‚É£ Tie Up Loose Ends

* **If icons aren't displaying correctly**, you'll need to copy all files in `vendor/components/font-awesome/webfonts/` to `public/assets/fonts/`.
* Since the **flarum-english** extension has been renamed to **flarum-lang-english**, you'll need to **re-enable** it from the admin panel.
* You'll need to selectively **re-install any third-party extensions** you were using, but make sure they [have been updated for beta 8](https://flagrow.io/extensions?flarum-version=0.1.0-beta.8) before you do.
* There is a new **delete posts** permission. By default it is granted to Moderators, but if you have any custom groups set up, you may need to adjust this.
* There are some **CSS changes**, so if you're using any custom CSS or LESS it may need some tweaking.
* With Font Awesome 5, **icon class names** have changed ‚Äì you may need to update your groups.

Start a new discussion in the [Support tag](https://discuss.flarum.org/t/support) if you're having trouble at any point ‚Äì¬†we're here to help!

## What's Next?

We're all gonna kick back with a cold beverage or two and have a bit of a rest, that's what's next. üèùüçª

Just kidding. We're jumping right into beta 9 development! Following along the [roadmap](https://discuss.flarum.org/d/6755-the-new-improved-flarum-roadmap) towards a stable version of 0.1, beta 9 will bring:

* Continued expansion of the new Extension API with¬†more Extenders and a similar overhaul on the JS side
* More refactoring and code cleanup
* Some design and UX tweaks

I know what you're thinking... *Beta 8 took over a year to release. When can I expect Beta 9?* The good news is that with all of the major, large-scale, break-everything changes out of the way, smaller incremental releases will now be possible. We're aiming to have Beta 9 out in *months* (that's as precise as we can get üòâ).

## Thank You

Wow, what a release announcement. I'd like to wrap up by thanking everyone who has made this release possible. Thank you...

To [@Franz](https://discuss.flarum.org/u/Franz) and [@luceos](https://discuss.flarum.org/u/luceos) for their incredible work pushing these massive changes forward.

To all of the others who have contributed code to this release: [@sijad](https://discuss.flarum.org/u/sijad), [@datitisev](https://discuss.flarum.org/u/datitisev), [@clarkwinkelmann](https://discuss.flarum.org/u/clarkwinkelmann), [@Davis](https://discuss.flarum.org/u/Davis), [@Kyrne](https://discuss.flarum.org/u/Kyrne), @michaeldalyuk, [@ar7n](https://discuss.flarum.org/u/ar7n), [@DogSports](https://discuss.flarum.org/u/DogSports), [@gwillem](https://discuss.flarum.org/u/gwillem), @markv, [@ardacebi](https://discuss.flarum.org/u/ardacebi), [@afrastgeek](https://discuss.flarum.org/u/afrastgeek), @johannsa, [@cljk](https://discuss.flarum.org/u/cljk), [@josephnle](https://discuss.flarum.org/u/josephnle), @zinsserzh, and anyone else who I've missed.

To our moderators [@jordanjay29](https://discuss.flarum.org/u/jordanjay29), [@Prosperous](https://discuss.flarum.org/u/Prosperous), [@Digital](https://discuss.flarum.org/u/Digital), and [@Pollux](https://discuss.flarum.org/u/Pollux) who keep the community thriving, and [@Arkinn](https://discuss.flarum.org/u/Arkinn), [@datitisev](https://discuss.flarum.org/u/datitisev), [@OrdinaryJellyfish](https://discuss.flarum.org/u/OrdinaryJellyfish), and [@Kyrne](https://discuss.flarum.org/u/Kyrne) for their work on the docs.

To all of our [Patrons](https://www.patreon.com/flarum) and [Open Collective](https://opencollective.com/flarum) supporters. A special mention to **bokt.nl**, **osTicket**, **Jordan Heinz**, **Sebastian**, and **Glowing Blue AG** who have all pledged to give over $20 per month.

And finally, to *you* for your ongoing support and enthusiasm that keeps us all going.

---

### [deleted]

[Toby](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/1) YESSSSSS!!!!! FINALLY!!!!!!! CONGRATS EVERYONE!!!!

---

### sizonov\_stas

> [Toby](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/1) MySQL 5.6.

have a

```
mysql  Ver 15.1 Distrib 10.2.7-MariaDB, for Linux (x86_64) using readline 5.1
```

will it work with **beta8**?

---

### TOWUK\_ru

eee boy

[Toby](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/1) its update have support php7.2.\* ?

---

### yjg840125

> [Toby](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/1) Search has received a makeover. Discussion titles are now searched and results are ranked much more reliably. Search performance issues on large forums have been fixed. Search results have been redesigned making it easier to find what you're looking for.

cool

---

### arajdon

Finally... üòõ Congratulations on the release. ü•≥

Thanks for the hard work guys! üí™

---

### ivanminutillo

[arajdon](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/3) yeah congrats!

---

### gurjyot

Finally, the new version is out. Congratulations everyone...üéâüéäüéàüçæüçªüç∑

---

### Qiaeru

Yay! Congrats! üòÅ

---

### Hiob

Great Job ! üòÅ

---

### Staszek

Thanks a million guys! It's earlier than I expected üòâ

---

### addtocartips

Great Job

---

### MichaelBelgium

Wooo, well done to everyone who contributed! Our patience has been rewarded (not like it would never happen üòâ ).

Great job. üéâ üéâ

*Gonna update my extensions this weekend*

---

### collins

Kudos! Great Job everyone. We are approaching Canaan land üòÅ

---

### Shahiem

Thank you guys for your hard work! üôè

---

### Zeokat

The new beta is here, but i go to wait a few weeks before update because maybe some critical errors appear.

---

### Victor12

[Zeokat](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/12) Just updated mine. No critical errors at all. We're up and running again.

---

### SilverPoplar

Big News. You guys are great! üòÑ

---

### Zeokat

[Victor12](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/14) Here you have two <https://github.com/flarum/core/issues/1661> and <https://github.com/flarum/core/issues/1659>

I prefer to keep calm and update when everything seems a little bit safer.

---

### damse

Awesome news! Will update and report later! Thanks üòÄ

---

### Pirat

Everything is sad, there are no important changes for me, everything that was added in the beta 8 version is not necessary.

There will be support for beta 7 for old school users who do not need these functions in the admin panel,

Why do I need to clean the cache in the admin panel, I can clean it in the console, why do I need all these functions that are of no use? üôÅ

I also wonder how these added changes affect download speed.

For example, I am very angry with this gif loading animation when navigating through pages.

---

### luceos

> [Pirat](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/16) For example, I am very angry with this hyphal loading animation when navigating through pages.

Our hopes for this software was never to make anyone angry. You can suggest improvements under the [feedback tag](/t/feedback). Alternatively you can build an extensions that does what you need. If all that fails, maybe another forum solution matches your hopes and dreams better than Flarum does.

---

### Victor12

> [Pirat](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/16) Everything is sad, there are no important changes for me, everything that was added in the beta 8 version is not necessary.

That is your opinion, but I don't think these changes and functions were not needed. Not to mention some of the updates have been suggested by fellow Flarum users. I am very happy with the update and don't see a reason to be so negative about it.

---

### Pirat

[luceos](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/17) I offered to remove the download gif animation

But now I‚Äôm worried about version 8, what‚Äôs behind it besides features for convenience?

---

### jordanjay29

Flarum needs these functions to complete the vision that the core devs have for it. Beta 8 was never going to be a flashy version with spectacular features, it's mostly a rework of the internals, and is going to be a solid platform for core and extension developers going forward.

Beta 7.x was never meant to be the final version, nor will Beta 8. There are great things in Flarum's future, and Beta 8 sets the foundation for them.

---

### Pirat

[jordanjay29](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/18) I want to know how in the future these changes affect the speed of loading pages, if I'm not mistaken, each such change increases the kernel by a split second.

---

### Toby

[Pirat](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released/19) Loading speeds are [important to us too](https://github.com/flarum/core/issues/1643) üòâ

Keep [the roadmap](https://discuss.flarum.org/d/6755-the-new-improved-flarum-roadmap) in mind. As outlined in the announcement, beta 8 marks the completion of a huge amount of behind-the-scenes work that needed to be done in order to keep moving forward.

---

[Next Page ¬ª](https://discuss.flarum.org/d/17745-flarum-0-1-0-beta-8-released?page=2)



=== Content from github.com_3a56a07e_20250121_003855.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fcommit%2F66607a56749339d50620b049701ad4d6a4dafbd7)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fcommit%2F66607a56749339d50620b049701ad4d6a4dafbd7)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=flarum%2Fframework)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[flarum](/flarum)
/
**[framework](/flarum/framework)**
Public

* [Notifications](/login?return_to=%2Fflarum%2Fframework) You must be signed in to change notification settings
* [Fork
  841](/login?return_to=%2Fflarum%2Fframework)
* [Star
   6.5k](/login?return_to=%2Fflarum%2Fframework)

* [Code](/flarum/framework)
* [Issues
  43](/flarum/framework/issues)
* [Pull requests
  10](/flarum/framework/pulls)
* [Actions](/flarum/framework/actions)
* [Security](/flarum/framework/security)
* [Insights](/flarum/framework/pulse)

Additional navigation options

* [Code](/flarum/framework)
* [Issues](/flarum/framework/issues)
* [Pull requests](/flarum/framework/pulls)
* [Actions](/flarum/framework/actions)
* [Security](/flarum/framework/security)
* [Insights](/flarum/framework/pulse)

## Commit

[Permalink](/flarum/framework/commit/66607a56749339d50620b049701ad4d6a4dafbd7)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Always invalidate all user email tokens

[Browse files](/flarum/framework/tree/66607a56749339d50620b049701ad4d6a4dafbd7)
Browse the repository at this point in the history

```
Reported by B. Dhiyaneshwaran of Geek Freak.
```

* Loading branch information

[![@franzliedke](https://avatars.githubusercontent.com/u/249125?s=40&v=4)](/franzliedke)

[franzliedke](/flarum/framework/commits?author=franzliedke "View all commits by franzliedke")
committed
Nov 28, 2018

1 parent
[546b4f0](/flarum/framework/commit/546b4f01ac9c82852672dc8333e8e8d54cb43c47)

commit 66607a5

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**12 additions**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* src/User

  + Command

    - src/User/Command/ConfirmEmailHandler.php
      [ConfirmEmailHandler.php](#diff-49d05bac25116af50f4b4c2a5a11f53e1863d220ff50be6904b65b29a4523364)
  + src/User/User.php
    [User.php](#diff-15ebbb14043084d6f3a2959252263575409cd942266b8b9735a8123b6fa7e0b6)

## There are no files selected for viewing

3 changes: 2 additions & 1 deletion

3
[src/User/Command/ConfirmEmailHandler.php](#diff-49d05bac25116af50f4b4c2a5a11f53e1863d220ff50be6904b65b29a4523364 "src/User/Command/ConfirmEmailHandler.php")

Show comments

[View file](/flarum/framework/blob/66607a56749339d50620b049701ad4d6a4dafbd7/src/User/Command/ConfirmEmailHandler.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -53,7 +53,8 @@ public function handle(ConfirmEmail $command) |
|  |  | $user->save(); |
|  |  | $this->dispatchEventsFor($user); |
|  |  |  |
|  |  | $token->delete(); |
|  |  | // Delete \*all\* tokens for the user, in case other ones were sent first |
|  |  | $user->emailTokens()->delete(); |
|  |  |  |
|  |  | return $user; |
|  |  | } |
| Expand Down | |  |

10 changes: 10 additions & 0 deletions

10
[src/User/User.php](#diff-15ebbb14043084d6f3a2959252263575409cd942266b8b9735a8123b6fa7e0b6 "src/User/User.php")

Show comments

[View file](/flarum/framework/blob/66607a56749339d50620b049701ad4d6a4dafbd7/src/User/User.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -614,6 +614,16 @@ public function notifications() |
|  |  | return $this->hasMany('Flarum\Notification\Notification'); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Define the relationship with the user's email tokens. |
|  |  | \* |
|  |  | \* @return \Illuminate\Database\Eloquent\Relations\HasMany |
|  |  | \*/ |
|  |  | public function emailTokens() |
|  |  | { |
|  |  | return $this->hasMany(EmailToken::class); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Define the relationship with the permissions of all of the groups that |
|  |  | \* the user is in. |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `66607a5`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fcommit%2F66607a56749339d50620b049701ad4d6a4dafbd7) to comment.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


