=== Content from bugs.ruby-lang.org_c3c8cdad_20250121_005237.html ===


Search

### Project

### General

### Profile

* [Sign in](/login)
* [Register](/account/register)

* [Home](/)
* [Projects](/projects)
* [Help](https://www.redmine.org/guide)

[Search](/projects/ruby-master/search):

 Ruby master[All Projects](/projects?jump=issues)
# [Ruby](/projects/ruby?jump=issues) » Ruby master

* [Overview](/projects/ruby-master)
* [Activity](/projects/ruby-master/activity)
* [Roadmap](/projects/ruby-master/roadmap)
* [Issues](/projects/ruby-master/issues)
* [Repository](/projects/ruby-master/repository)
* [Like](/projects/ruby-master/hearts)

### Custom queries

* [Backport 3.1](/projects/ruby-master/issues?query_id=287)
* [Backport 3.2](/projects/ruby-master/issues?query_id=293)
* [Backport 3.3](/projects/ruby-master/issues?query_id=300)
* [bugs: unassigned](/projects/ruby-master/issues?query_id=75)
* [DevMeeting](/projects/ruby-master/issues?query_id=156)
* [matz](/projects/ruby-master/issues?query_id=72)
* [Open issues with attachment](/projects/ruby-master/issues?query_id=160)
* [Windows](/projects/ruby-master/issues?query_id=335)

Actions
Copy link
## Bug #15835

closed
![](https://www.gravatar.com/avatar/54cdeacf2d29020ff58c5a1b009507c12da0fcf4bb321c9b1ec81c1ea89343f7?rating=PG&size=50&default=mm "Author: Dhiraj (Dhiraj Mishra)")

### Path traversal symlink - WEBrick

Added by [Dhiraj (Dhiraj Mishra)](/users/24444) [over 5 years](/projects/ruby-master/activity?from=2019-05-07 "05/07/2019 09:33 AM") ago.
Updated [over 5 years](/projects/ruby-master/activity?from=2019-08-14 "08/14/2019 03:06 AM") ago.

Status:ClosedAssignee:-Target version:-
ruby -v:2.6.3Backport:[2.4: UNKNOWN, 2.5: UNKNOWN, 2.6: UNKNOWN](https://github.com/ruby/ruby/wiki/How-To-Request-Backport)
[[ruby-core:92580]](https://blade.ruby-lang.org/ruby-core/92580)

---

**Description**

**Summary:**

A path traversal issue was observed in WEBrick ( WEBrick/1.4.2 (Ruby/2.6.3/2019-04-16)) via symlink. WEBrick serves static page for the current directory once enabled, however using symlink attacker could view data outside the hosted/running directory.

**Steps to reproduce:**

> mkdir nothing
>
> cd nothing
>
> ln -s ../../ symlnk
>
> ruby -run -ehttpd . -p8080

**Impact:**

This would allow the attacker to view sensitive data outside the root/running directory.

**Recommendation:**

We can probably educate users about this behavior in the WebBrick documentation and providing a flag/parameter to disable/enable following symlinks.

* [History](/issues/15835?tab=history)
* [Notes](/issues/15835?tab=notes)
* [Property changes](/issues/15835?tab=properties)

ActionsCopy link
[#1](#note-1)
[[ruby-core:92583]](https://blade.ruby-lang.org/ruby-core/92583)
#### Updated by [naruse (Yui NARUSE)](/users/5) [over 5 years](/projects/ruby-master/activity?from=2019-05-07 "05/07/2019 12:30 PM") ago

* **Status** changed from *Open* to *Feedback*

On Apache with `FollowSymLinks` enabled, it can traverse out of DocumentRoot.

hxxps://httpd.apache.org/docs/2.4/en/urlmapping.html

Therefore it's not a problem.

ActionsCopy link
[#2](#note-2)
[[ruby-core:92599]](https://blade.ruby-lang.org/ruby-core/92599)
#### Updated by [shevegen (Robert A. Heiler)](/users/3414) [over 5 years](/projects/ruby-master/activity?from=2019-05-08 "05/08/2019 03:04 PM") ago

While I agree with naruse, it may be worthwhile to mention this briefly at e. g.

<https://ruby-doc.org/stdlib/libdoc/webrick/rdoc/WEBrick.html> - it could still surprise

users so it could be useful to mention it; perhaps at the section "WEBrick can be run

as a production server for small loads.".

As writing documentation is always a bit tedious, I will try my luck with a slight

modification to it here, from:

"WEBrick can be run as a production server for small loads. Be aware that symlinks

might allow users to view data outside of the designated root directory, such as

for the Apache webserver with the FollowSymlinks option enabled".

Not sure if this is great but I just wanted to provide a bit of text - perhaps it

can help others adapt it and write an improved documentation; it's just a suggestion.

ActionsCopy link
[#3](#note-3)
#### Updated by [jeremyevans0 (Jeremy Evans)](/users/1604) [over 5 years](/projects/ruby-master/activity?from=2019-08-14 "08/14/2019 03:06 AM") ago

* **Status** changed from *Feedback* to *Closed*

Actions
Copy link

Also available in: [Atom](/issues/15835.atom)
[PDF](/issues/15835.pdf)

Like0
Like0Like0Like0

Powered by [Redmine](https://www.redmine.org/) © 2006-2024 Jean-Philippe Lang

Loading...


