=== Content from github.com_963843d4_20250121_020902.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsaplingwoodchipper%2Fsaplingwoodchipper.github.io)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsaplingwoodchipper%2Fsaplingwoodchipper.github.io)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=saplingwoodchipper%2Fsaplingwoodchipper.github.io)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[saplingwoodchipper](/saplingwoodchipper)
/
**[saplingwoodchipper.github.io](/saplingwoodchipper/saplingwoodchipper.github.io)**
Public

* [Notifications](/login?return_to=%2Fsaplingwoodchipper%2Fsaplingwoodchipper.github.io) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fsaplingwoodchipper%2Fsaplingwoodchipper.github.io)
* [Star
   3](/login?return_to=%2Fsaplingwoodchipper%2Fsaplingwoodchipper.github.io)

Sapling Woodchipper Website

### License

[GPL-3.0 license](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/LICENSE)

[3
stars](/saplingwoodchipper/saplingwoodchipper.github.io/stargazers) [0
forks](/saplingwoodchipper/saplingwoodchipper.github.io/forks) [Branches](/saplingwoodchipper/saplingwoodchipper.github.io/branches) [Tags](/saplingwoodchipper/saplingwoodchipper.github.io/tags) [Activity](/saplingwoodchipper/saplingwoodchipper.github.io/activity)
 [Star](/login?return_to=%2Fsaplingwoodchipper%2Fsaplingwoodchipper.github.io)

 [Notifications](/login?return_to=%2Fsaplingwoodchipper%2Fsaplingwoodchipper.github.io) You must be signed in to change notification settings

* [Code](/saplingwoodchipper/saplingwoodchipper.github.io)
* [Issues
  0](/saplingwoodchipper/saplingwoodchipper.github.io/issues)
* [Pull requests
  0](/saplingwoodchipper/saplingwoodchipper.github.io/pulls)
* [Actions](/saplingwoodchipper/saplingwoodchipper.github.io/actions)
* [Projects
  0](/saplingwoodchipper/saplingwoodchipper.github.io/projects)
* [Security](/saplingwoodchipper/saplingwoodchipper.github.io/security)
* [Insights](/saplingwoodchipper/saplingwoodchipper.github.io/pulse)

Additional navigation options

* [Code](/saplingwoodchipper/saplingwoodchipper.github.io)
* [Issues](/saplingwoodchipper/saplingwoodchipper.github.io/issues)
* [Pull requests](/saplingwoodchipper/saplingwoodchipper.github.io/pulls)
* [Actions](/saplingwoodchipper/saplingwoodchipper.github.io/actions)
* [Projects](/saplingwoodchipper/saplingwoodchipper.github.io/projects)
* [Security](/saplingwoodchipper/saplingwoodchipper.github.io/security)
* [Insights](/saplingwoodchipper/saplingwoodchipper.github.io/pulse)

# saplingwoodchipper/saplingwoodchipper.github.io

    master[Branches](/saplingwoodchipper/saplingwoodchipper.github.io/branches)[Tags](/saplingwoodchipper/saplingwoodchipper.github.io/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[38 Commits](/saplingwoodchipper/saplingwoodchipper.github.io/commits/master/) | | |
| [LICENSE](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/LICENSE "LICENSE") | | [LICENSE](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/LICENSE "LICENSE") |  |  |
| [README.md](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/README.md "README.md") | | [README.md](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/README.md "README.md") |  |  |
| [\_config.yml](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/_config.yml "_config.yml") | | [\_config.yml](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/_config.yml "_config.yml") |  |  |
| [android-chrome-192x192.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/android-chrome-192x192.png "android-chrome-192x192.png") | | [android-chrome-192x192.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/android-chrome-192x192.png "android-chrome-192x192.png") |  |  |
| [android-chrome-512x512.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/android-chrome-512x512.png "android-chrome-512x512.png") | | [android-chrome-512x512.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/android-chrome-512x512.png "android-chrome-512x512.png") |  |  |
| [apple-touch-icon.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/apple-touch-icon.png "apple-touch-icon.png") | | [apple-touch-icon.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/apple-touch-icon.png "apple-touch-icon.png") |  |  |
| [coingecko.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/coingecko.png "coingecko.png") | | [coingecko.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/coingecko.png "coingecko.png") |  |  |
| [favicon-16x16.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/favicon-16x16.png "favicon-16x16.png") | | [favicon-16x16.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/favicon-16x16.png "favicon-16x16.png") |  |  |
| [favicon-32x32.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/favicon-32x32.png "favicon-32x32.png") | | [favicon-32x32.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/favicon-32x32.png "favicon-32x32.png") |  |  |
| [favicon.ico](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/favicon.ico "favicon.ico") | | [favicon.ico](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/favicon.ico "favicon.ico") |  |  |
| [index.html](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/index.html "index.html") | | [index.html](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/index.html "index.html") |  |  |
| [sapling-woodchipper.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/sapling-woodchipper.png "sapling-woodchipper.png") | | [sapling-woodchipper.png](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/sapling-woodchipper.png "sapling-woodchipper.png") |  |  |
| [site.webmanifest](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/site.webmanifest "site.webmanifest") | | [site.webmanifest](/saplingwoodchipper/saplingwoodchipper.github.io/blob/master/site.webmanifest "site.webmanifest") |  |  |
| View all files | | |

## Repository files navigation

* README
* GPL-3.0 license
# Sapling Woodchipper

## Zcash Protocol-Level Denial-of-Service (CVE-2019-11636)

[![Sapling Woodchipper](https://camo.githubusercontent.com/65db8ce37f694b87b88c4833266b8c53da035868105ad10e50315bf316913cc2/68747470733a2f2f7361706c696e67776f6f64636869707065722e6769746875622e696f2f7361706c696e672d776f6f64636869707065722e706e67)](https://camo.githubusercontent.com/65db8ce37f694b87b88c4833266b8c53da035868105ad10e50315bf316913cc2/68747470733a2f2f7361706c696e67776f6f64636869707065722e6769746875622e696f2f7361706c696e672d776f6f64636869707065722e706e67)

The Sapling Woodchipper is a protocol-level Denial-of-Service against any
cryptocoin which implements the Zcash 2.x Sapling protocol, most notably Zcash
(ZEC) itself.

The exact severity of the DoS depends on the exact chain parameters of each
coin.

It's currently estimated that there are many dozens of blockchains which have
Sapling transactions enabled and various older Zcash forks with Sprout
technology planning to upgrade.

The Sapling Woodchipper is spiritually similar to the
[Slowloris attack](https://en.wikipedia.org/wiki/Slowloris_%28computer_security%29),
in that one or a few machines can completely disable much more powerful entity
in a vastly asymmetric attack. In this analogy, long-lived HTTP connections
become extremely large transactions, and instead of taking down a webserver,
making it unable to process requests, a blockchain is completely filled to the
point that no normal users can make transactions. This is a very focused
attack, like the Slowloris. Unlike the Slowloris attack, the Sapling
Woodchipper is very CPU intensive, and as such, the attack benefits greatly
from more powerful CPUs. In this sense, the Sapling Woodchipper takes a lot
more work than Slowloris, which merely waits the maximum time before
successfully ending a request.

Sapling Woodchipper has been assigned [CVE-2019-11636](https://nvd.nist.gov/vuln/detail/CVE-2019-11636).

## Details

More Details Coming Real Soon

## References

...

## Updating this website

This website is very easy to update. You can use the [editor on GitHub](https://github.com/saplingwoodchipper/saplingwoodchipper.github.io/edit/master/README.md) to maintain and preview the content of this website. Patches welcome!

For more details see [GitHub Flavored Markdown](https://guides.github.com/features/mastering-markdown/).

## LICENSE

GPLv3

## Official Site

<https://saplingwoodchipper.github.io>

## Author

Duke Leto [Keybase](https://keybase.io/dukeleto)

## About

Sapling Woodchipper Website

### Resources

[Readme](#readme-ov-file)
### License

[GPL-3.0 license](#GPL-3.0-1-ov-file)

[Activity](/saplingwoodchipper/saplingwoodchipper.github.io/activity)
[Custom properties](/saplingwoodchipper/saplingwoodchipper.github.io/custom-properties)
### Stars

[**3**
stars](/saplingwoodchipper/saplingwoodchipper.github.io/stargazers)
### Watchers

[**1**
watching](/saplingwoodchipper/saplingwoodchipper.github.io/watchers)
### Forks

[**0**
forks](/saplingwoodchipper/saplingwoodchipper.github.io/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fsaplingwoodchipper%2Fsaplingwoodchipper.github.io&report=saplingwoodchipper+%28user%29)

## [Releases](/saplingwoodchipper/saplingwoodchipper.github.io/releases)

No releases published

## [Packages 0](/orgs/saplingwoodchipper/packages?repo_name=saplingwoodchipper.github.io)

No packages published

## Languages

* [HTML
  100.0%](/saplingwoodchipper/saplingwoodchipper.github.io/search?l=html)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from saplingwoodchipper.github.io_667962d5_20250121_000030.html ===

# Sapling Woodchipper CVE-2019-11636

[View on GitHub](https://github.com/saplingwoodchipper/saplingwoodchipper.github.io)

| Name | Symbol | Price (USD) | Price (EUR) | Price (BTC) | Market Cap | Daily Attack Cost (USD) | Daily Attack Cost (EUR) | Daily Attack Cost (BTC) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [Zcash](https://z.cash) | ZEC |  |  |  |  |  |  |  |

Powered by Coingecko API
## Zcash Protocol-Level Denial-of-Service (CVE-2019-11636)

![Sapling Woodchipper](https://saplingwoodchipper.github.io/sapling-woodchipper.png)

Sapling Woodchipper Loves Supple Saplings

The Sapling Woodchipper is a protocol-level Denial-of-Service against any
cryptocoin which implements the Zcash 2.x Sapling protocol, most notably Zcash
(ZEC) itself.

The exact severity of the DoS depends on the exact chain parameters of each
coin, specifically maximum transaction size and maximum block size.

The Sapling Woodchipper is spiritually similar to the
[Slowloris attack](https://en.wikipedia.org/wiki/Slowloris_%28computer_security%29),
in that one or a few machines can completely disable much more powerful entity
in a vastly asymmetric attack. In this analogy, long-lived HTTP connections
become extremely large transactions, and instead of taking down a webserver,
making it unable to process requests, a blockchain is completely filled to the
point that no normal users can make transactions. This is a very focused
attack, like the Slowloris. Unlike the Slowloris attack, the Sapling
Woodchipper is very CPU intensive, and as such, the attack benefits greatly
from more powerful CPUs. In this sense, the Sapling Woodchipper takes a lot
more work than Slowloris, which merely waits the maximum time before
successfully ending a request.

Sapling Woodchipper has been assigned [CVE-2019-11636](https://nvd.nist.gov/vuln/detail/CVE-2019-11636).

## Details

The code change which enables the Sapling Woodchipper was merged via [Zcash Pull Request 3212](https://github.com/zcash/zcash/pull/3212) and requested
as a feature in [Zcash Issue 2864](https://github.com/zcash/zcash/issues/2864). It relates to the consensus rule about maximum allowed transaction size:
```

-static const unsigned int MAX_TX_SIZE = 100000;
+static const unsigned int MAX_TX_SIZE_BEFORE_SAPLING = 100000;
+static const unsigned int MAX_TX_SIZE_AFTER_SAPLING = MAX_BLOCK_SIZE;

```
From [src/consensus/consensus.h](https://github.com/zcash/zcash/blob/master/src/consensus/consensus.h#L27):
Previously transactions could be at most 100KB in size but after Sapling
activation, transactions can fill an entire block! This means that to fill all
576 daily Zcash blocks, one must only pay a single transaction fee per block,
or a fixed cost of 0.0576 ZEC/day to fill all blocks.
The following one line patch is the simplest mitigation to the Sapling Woodchipper,
which goes back to the previous 100KB limit. It increases attack cost by roughly
10X-40X depending on blocksize.
```

// in src/consensus/consensus.h
-static const unsigned int MAX_TX_SIZE_AFTER_SAPLING = MAX_BLOCK_SIZE;
+static const unsigned int MAX_TX_SIZE_AFTER_SAPLING = 100000;

```
Here is an example transaction which is 996827 bytes (0.95MB) and includes over 1000 JoinSplits:
[ZEC transaction 9409c0f6](http://zcashnetwork.info/tx/9409c0f60064c6e7dab54beb566ace5bdc9e32e2ca153883d9363bb8e290c56a).
If an attacker has a CPU with a single core that can do ~1000 JoinSplits in
less time than the block time of the coin, i.e. 150 seconds for ZEC, then a
single core of a single computer can flood the network with transactions and
pay the absolute minimum attack cost of 0.0576 ZEC/day. For attackers with
slower CPUs, they must use more machines in the attack, and pay more
transaction fees.
According to [Github Issue 3983](https://github.com/zcash/zcash/issues/3983):
"Note that Sapling Output proofs can be reused for multiple output notes, allowing transactions to be inflated to any desired size at low computational cost."
which means that the Sapling Woodchipper could be made drastically more efficient, by re-using the same data across all ~1000 JoinSplits instead of recomputing it.
## Zcash Fee Market

The actions of Zcash mining pools make it very clear that a "shadow" Zcash fee market exists. This makes perfect
sense for miners and mining pools, but it seems that various Zcash people, up to and including the CEO, would
prefer to tell people that no fee market exists on the Zcash network.
According to the [Zcash Wallet Developer UX Checklist](https://zcash.readthedocs.io/en/latest/rtd_pages/ux_wallet_checklist.html):
```

Disable users from setting their own transaction fees

Do not allow users to customize fees.
Our network is fast enough that mining incentivization is not an issue.
Unique transaction fees can cause linkability within transactions, especially for zaddrs.

```
This is mis-guided and wrong. The author discovered some interesting information about Zcash mining pools
during the research of this CVE:

* All/most pools will not mine a transaction larger than 1MB, though according to the Zcash protocol and codebase, they are allowed. This may have the unintended effect of taking less CPU-time to fill a block.
* All/most pools will de-prioritize large transactions with the default transaction fee
* Paying a double (or more) transaction fee will make large transaction get mined in the next block, i.e. a fee market exists

The author recommends Zcash and all source code forks of Zcash migrate to
variable fees based on transaction size, to fully mitigate transaction-based
Denial-of-Service attacks. Additionally, GUI wallets should be smart enough to
know what current network fee conditions are, and give users a reasonable
choice of paying different fees for confirmations in different timeframes,
just like modern Bitcoin wallets.
## Official Site

<https://saplingwoodchipper.github.io>

## Proof-of-Concept

The PoC will not be shared at this time due to the likelihood it would be used for evil instead of good.
## Motivation

The motivation for this CVE is to make the Zcash protocol, source code and network more secure. It was
discovered in October 2018 while studying how the [HushList protocol](https://github.com/leto/hushlist/blob/master/whitepaper/protocol.pdf)
could be updated to use Sapling transactions.
## Author

Duke Leto [Keybase](https://keybase.io/dukeleto) [@dukeleto](https://twitter.com/dukeleto)
## Donations

This work was funded purely by the author, no grants or funding were received to fund this research.
If you would like to support future cryptocoin security research, these addresses are available:

* BTC 1Doe7xSpGTv2mWqZHCgdwAGJNkRd58FpMw
* XMR 43SXJRKUSmQN4rShR4RFf7VNtz4YDxfY2gPrgtizqEUj5JgfWQzp6SdMcGyCUrswqKiQ5B32vbS3cC2b9Er5bUMMCg67qMg
* ZEC zs103kdaehwd6rr65fqyk9vvchjd3j0d8a344fscnsyusg2a3nwhucadw9ejj6ufmyh5k96v8qgpgd
* ZEC t1a58BR8K216G2oUNSwm4PCGxp7Q9mFKMSx



=== Content from github.com_996c53e0_20250121_000030.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fzcash%2Fzcash%2Fissues%2F3955)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fzcash%2Fzcash%2Fissues%2F3955)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=zcash%2Fzcash)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[zcash](/zcash)
/
**[zcash](/zcash/zcash)**
Public

* [Notifications](/login?return_to=%2Fzcash%2Fzcash) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Fzcash%2Fzcash)
* [Star
   5k](/login?return_to=%2Fzcash%2Fzcash)

* [Code](/zcash/zcash)
* [Issues
  995](/zcash/zcash/issues)
* [Pull requests
  100](/zcash/zcash/pulls)
* [Actions](/zcash/zcash/actions)
* [Projects
  0](/zcash/zcash/projects)
* [Wiki](/zcash/zcash/wiki)
* [Security](/zcash/zcash/security)
* [Insights](/zcash/zcash/pulse)

Additional navigation options

* [Code](/zcash/zcash)
* [Issues](/zcash/zcash/issues)
* [Pull requests](/zcash/zcash/pulls)
* [Actions](/zcash/zcash/actions)
* [Projects](/zcash/zcash/projects)
* [Wiki](/zcash/zcash/wiki)
* [Security](/zcash/zcash/security)
* [Insights](/zcash/zcash/pulse)

# Denial of Service #3955

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Denial of Service](#top)#3955Copy linkLabels[I-dosProblems and improvements with respect to Denial-of-Service.](https://github.com/zcash/zcash/issues?q=state%3Aopen%20label%3A%22I-dos%22)Problems and improvements with respect to Denial-of-Service.[epicRepresents a multi-sprint effort (auto-generated label)](https://github.com/zcash/zcash/issues?q=state%3Aopen%20label%3A%22epic%22)Represents a multi-sprint effort (auto-generated label)![@zebambam](https://avatars.githubusercontent.com/u/41303049?v=4&size=80)
## Description

![@zebambam](https://avatars.githubusercontent.com/u/41303049?v=4&size=48)[zebambam](https://github.com/zebambam)opened [on Apr 16, 2019](https://github.com/zcash/zcash/issues/3955#issue-434015438)

Scaling discussions don’t make sense unless the ultimate goal is to reduce the likelihood that users will not be able to use Zcash because of a lack of service.

There are lots of ways to fill up our service currently.

When we spot them, we should link them to this epic.

* A small number of shielded transaction of massive size.
* A small number of or many transactions with many empty outputs.
* Many small transactions filling the mempool currently crash the nodes that receive them. It’s possible to knock nodes offline. Transaction expiry helps reduce the cost for an attacker.

Additionally, the failure mode is currently catastrophic.

* Filling the mempool currently results in a node crash.

With such an attack, someone might be able to knock over mining pool operators, and thus significantly drop the hashpower of the network, facilitating a 51% attack.

Suggested course of action:

Set limits on the mempool size, and reject further transactions.

Other steps that result in the reduction of the likelihood of a successful DoS attack.

👍5👀1
## Metadata

### Assignees

No one assigned

### Labels

[I-dosProblems and improvements with respect to Denial-of-Service.](https://github.com/zcash/zcash/issues?q=state%3Aopen%20label%3A%22I-dos%22)Problems and improvements with respect to Denial-of-Service.[epicRepresents a multi-sprint effort (auto-generated label)](https://github.com/zcash/zcash/issues?q=state%3Aopen%20label%3A%22epic%22)Represents a multi-sprint effort (auto-generated label)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from twitter.com_46e07f4a_20250121_000031.html ===



=== Content from github.com_71472088_20250121_020900.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fzcash%2Fzcash%2Fpull%2F3212)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fzcash%2Fzcash%2Fpull%2F3212)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=zcash%2Fzcash)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[zcash](/zcash)
/
**[zcash](/zcash/zcash)**
Public

* [Notifications](/login?return_to=%2Fzcash%2Fzcash) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Fzcash%2Fzcash)
* [Star
   5k](/login?return_to=%2Fzcash%2Fzcash)

* [Code](/zcash/zcash)
* [Issues
  995](/zcash/zcash/issues)
* [Pull requests
  100](/zcash/zcash/pulls)
* [Actions](/zcash/zcash/actions)
* [Projects
  0](/zcash/zcash/projects)
* [Wiki](/zcash/zcash/wiki)
* [Security](/zcash/zcash/security)
* [Insights](/zcash/zcash/pulse)

Additional navigation options

* [Code](/zcash/zcash)
* [Issues](/zcash/zcash/issues)
* [Pull requests](/zcash/zcash/pulls)
* [Actions](/zcash/zcash/actions)
* [Projects](/zcash/zcash/projects)
* [Wiki](/zcash/zcash/wiki)
* [Security](/zcash/zcash/security)
* [Insights](/zcash/zcash/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fzcash%2Fzcash%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fzcash%2Fzcash%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Raise 100kB transaction size limit from Sapling activation #3212

 Merged

[zkbot](/zkbot)
merged 5 commits into
[zcash:master](/zcash/zcash/tree/master "zcash/zcash:master")
from
[str4d:2864-sapling-tx-size-limit](/str4d/zcash/tree/2864-sapling-tx-size-limit "str4d/zcash:2864-sapling-tx-size-limit")

May 7, 2018

 Merged

# [Raise 100kB transaction size limit from Sapling activation](#top) #3212

[zkbot](/zkbot)
merged 5 commits into
[zcash:master](/zcash/zcash/tree/master "zcash/zcash:master")
from
[str4d:2864-sapling-tx-size-limit](/str4d/zcash/tree/2864-sapling-tx-size-limit "str4d/zcash:2864-sapling-tx-size-limit")

May 7, 2018

[Conversation
26](/zcash/zcash/pull/3212)
[Commits
5](/zcash/zcash/pull/3212/commits)
[Checks
0](/zcash/zcash/pull/3212/checks)
[Files changed](/zcash/zcash/pull/3212/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![str4d](https://avatars.githubusercontent.com/u/4993799?s=60&v=4)](/str4d)

Copy link

Contributor

### @str4d **[str4d](/str4d)** commented [Apr 26, 2018](#issue-318026748)

Closes [#2864](https://github.com/zcash/zcash/issues/2864).

Sorry, something went wrong.

All reactions

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
added
[I-performance](/zcash/zcash/labels/I-performance)
Problems and improvements with respect to performance
[A-consensus](/zcash/zcash/labels/A-consensus)
Area: Consensus rules
[I-dos](/zcash/zcash/labels/I-dos)
Problems and improvements with respect to Denial-of-Service.
labels
[Apr 26, 2018](#event-1596485470)

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
added this to the [v1.1.1](/zcash/zcash/milestone/71) milestone
[Apr 26, 2018](#event-1596485477)

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=80&v=4)](/str4d)

Copy link

Contributor

Author

### **[str4d](/str4d)** commented [Apr 26, 2018](#issuecomment-384658166)

| [@zkbot](https://github.com/zkbot) try |
| --- |

All reactions

Sorry, something went wrong.

[![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=80&u=e34751e428466a3fe3135a485a59df3fe9323bf7&v=4)](/zkbot)

Copy link

Contributor

### **[zkbot](/zkbot)** commented [Apr 26, 2018](#issuecomment-384658201)

| ⌛ Trying commit 170183abc2d1ebb84197e91c9943cd2f376109b1 with merge 6f7e01c13b1a7afd0b7db003df9473f0feb49e75... |
| --- |

All reactions

Sorry, something went wrong.

[![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=80&u=e34751e428466a3fe3135a485a59df3fe9323bf7&v=4)](/zkbot)

Copy link

Contributor

### **[zkbot](/zkbot)** commented [Apr 26, 2018](#issuecomment-384701701)

| ☀️ Test successful - [pr-try](https://ci.z.cash/#builders/6/builds/149) State: approved= try=True |
| --- |

All reactions

Sorry, something went wrong.

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
mentioned this pull request
[Apr 26, 2018](#ref-issue-302779289)

[Implement Sapling consensus rules
#3065](/zcash/zcash/issues/3065)

Closed

25 tasks

 [![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
requested review from
[gtank](/gtank),
[ebfull](/ebfull) and
[Eirik0](/Eirik0)
[April 26, 2018 18:41](#event-1597246348)

[![ebfull](https://avatars.githubusercontent.com/u/3794471?s=60&v=4)](/ebfull)

**[ebfull](/ebfull)**
previously requested changes
[Apr 28, 2018](#pullrequestreview-116119095)

 [View reviewed changes](/zcash/zcash/pull/3212/files)

[src/consensus/consensus.h](/zcash/zcash/pull/3212/files#diff-74d3d558e2ae1b1c967ea13d01ce15875cc7de50c93c26db73ccb3e4db5cfdac)
Outdated

|  |  | @@ -23,7 +23,8 @@ static const unsigned int MAX\_BLOCK\_SIZE = 2000000; | |
| --- | --- | --- | --- |
|  |  | /\*\* The maximum allowed number of signature check operations in a block (network rule) \*/ |
|  |  | static const unsigned int MAX\_BLOCK\_SIGOPS = 20000; |
|  |  | /\*\* The maximum size of a transaction (network rule) \*/ |
|  |  | static const unsigned int MAX\_TX\_SIZE = 100000; |
|  |  | static const unsigned int MAX\_TX\_SIZE\_BEFORE\_SAPLING = 100000; |
|  |  | static const unsigned int MAX\_TX\_SIZE = MAX\_BLOCK\_SIZE; |

Copy link

Contributor

### @ebfull **[ebfull](/ebfull)** [Apr 28, 2018](#discussion_r184837622)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

`MAX_TX_SIZE` should be `MAX_TX_SIZE_AFTER_SAPLING` for explicitness and so that we have to touch every bit of code using the constant.

Sorry, something went wrong.

 👍
2
 str4d and zookozcash reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

[![arielgabizon](https://avatars.githubusercontent.com/u/5689834?s=60&v=4)](/arielgabizon)

**[arielgabizon](/arielgabizon)**
reviewed
[Apr 30, 2018](#pullrequestreview-116301774)

 [View reviewed changes](/zcash/zcash/pull/3212/files)

[src/wallet/rpcwallet.cpp](/zcash/zcash/pull/3212/files#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02d)
Outdated

|  |  | @@ -3482,6 +3482,7 @@ UniValue z\_getoperationstatus\_IMPL(const UniValue& params, bool fRemoveFinishedO | |
| --- | --- | --- | --- |
|  |  | // If input notes are small, we might actually require more than one joinsplit per zaddr output. |
|  |  | // For now though, we assume we use one joinsplit per zaddr output (and the second output note is change). |
|  |  | // We reduce the result by 1 to ensure there is room for non-joinsplit CTransaction data. |
|  |  | #define Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS\_BEFORE\_SAPLING ((MAX\_TX\_SIZE\_BEFORE\_SAPLING / GetSerializeSize(JSDescription(), SER\_NETWORK, PROTOCOL\_VERSION)) - 1) |
|  |  | #define Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS ((MAX\_TX\_SIZE / GetSerializeSize(JSDescription(), SER\_NETWORK, PROTOCOL\_VERSION)) - 1) |

Copy link

Contributor

### @arielgabizon **[arielgabizon](/arielgabizon)** [Apr 30, 2018](#discussion_r184998620)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

so if we agree with [@ebfull](https://github.com/ebfull) 's comment above this should also have `AFTER_SAPLING` added?

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @str4d **[str4d](/str4d)** [Apr 30, 2018](#discussion_r184999855)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Eh, I'm not too worried about this - it's only there to give meaningful errors, and we'll be removing the `_BEFORE_SAPLING` case once Sapling has activated (so we no longer need to care about being able to create pre-Sapling-sized transactions). `MAX_TX_SIZE` on the other hand is consensus-critical.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @arielgabizon **[arielgabizon](/arielgabizon)** [Apr 30, 2018](#discussion_r185020017) • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Still, it seems [@ebfull](https://github.com/ebfull) 's argument that adding `AFTER_SAPLING` forces you to check that no bugs were introduced in all places is valid. And it's a small change. I wouldn't insist if it didn't relate to my second worry - the duplicate code between the three rpc methods which is increased here. And I wonder if we can refactor some of it in this PR.

Sorry, something went wrong.

All reactions

[![arielgabizon](https://avatars.githubusercontent.com/u/5689834?s=60&v=4)](/arielgabizon)

**[arielgabizon](/arielgabizon)**
reviewed
[Apr 30, 2018](#pullrequestreview-116321441)

 [View reviewed changes](/zcash/zcash/pull/3212/files)

[src/wallet/rpcwallet.cpp](/zcash/zcash/pull/3212/files#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02d)
Outdated

|  |  | @@ -3482,7 +3482,8 @@ UniValue z\_getoperationstatus\_IMPL(const UniValue& params, bool fRemoveFinishedO | |
| --- | --- | --- | --- |
|  |  | // If input notes are small, we might actually require more than one joinsplit per zaddr output. |
|  |  | // For now though, we assume we use one joinsplit per zaddr output (and the second output note is change). |
|  |  | // We reduce the result by 1 to ensure there is room for non-joinsplit CTransaction data. |
|  |  | #define Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS ((MAX\_TX\_SIZE / GetSerializeSize(JSDescription(), SER\_NETWORK, PROTOCOL\_VERSION)) - 1) |
|  |  | #define Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS\_BEFORE\_SAPLING ((MAX\_TX\_SIZE\_BEFORE\_SAPLING / GetSerializeSize(JSDescription(), SER\_NETWORK, PROTOCOL\_VERSION)) - 1) |
|  |  | #define Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS ((MAX\_TX\_SIZE\_AFTER\_SAPLING / GetSerializeSize(JSDescription(), SER\_NETWORK, PROTOCOL\_VERSION)) - 1) |

Copy link

Contributor

### @arielgabizon **[arielgabizon](/arielgabizon)** [Apr 30, 2018](#discussion_r185015125) • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Should this also have an `AFTER_SAPLING` added for clarity, consistency, and to make sure we're changing the code correctly in all places?

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @arielgabizon **[arielgabizon](/arielgabizon)** [Apr 30, 2018](#discussion_r185018653) • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Ohh saw your answer in the outdated comments

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @Eirik0 **[Eirik0](/Eirik0)** [Apr 30, 2018](#discussion_r185040666)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Looked at the outdated comments. We do refer to this constant in an error message just below where it is defined. This will be incorrect until the upgrade, but perhaps this is not a big concern. Also, it is mentioned in the comment above that this may not be completely accurate in the case where there are multiple small notes.

On a side note, should Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS depend on the size of SpendDescritption and/or OutputDescription rather than JSDescription?

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @str4d **[str4d](/str4d)** [May 1, 2018](#discussion_r185194444)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Hmm, good point about SpendDescription and OutputDescription; they will need to be included in the sum (not replacing JSDescription), since we want z-addr outputs to be either. I'll go make adjustments (though most of them won't be relevant until we do [#3215](https://github.com/zcash/zcash/issues/3215)).

Sorry, something went wrong.

All reactions

[![arielgabizon](https://avatars.githubusercontent.com/u/5689834?s=60&v=4)](/arielgabizon)

**[arielgabizon](/arielgabizon)**
previously requested changes
[Apr 30, 2018](#pullrequestreview-116328370)

 [View reviewed changes](/zcash/zcash/pull/3212/files)

Copy link

Contributor

### @arielgabizon **[arielgabizon](/arielgabizon)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

cf my comment about refactoring and change constant name

Sorry, something went wrong.

All reactions

[![Eirik0](https://avatars.githubusercontent.com/u/6133620?s=60&v=4)](/Eirik0)

**[Eirik0](/Eirik0)**
previously requested changes
[Apr 30, 2018](#pullrequestreview-116353012)

 [View reviewed changes](/zcash/zcash/pull/3212/files)

[src/wallet/rpcwallet.cpp](/zcash/zcash/pull/3212/files#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02d)
Outdated

|  |  | @@ -3482,7 +3482,8 @@ UniValue z\_getoperationstatus\_IMPL(const UniValue& params, bool fRemoveFinishedO | |
| --- | --- | --- | --- |
|  |  | // If input notes are small, we might actually require more than one joinsplit per zaddr output. |
|  |  | // For now though, we assume we use one joinsplit per zaddr output (and the second output note is change). |
|  |  | // We reduce the result by 1 to ensure there is room for non-joinsplit CTransaction data. |
|  |  | #define Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS ((MAX\_TX\_SIZE / GetSerializeSize(JSDescription(), SER\_NETWORK, PROTOCOL\_VERSION)) - 1) |
|  |  | #define Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS\_BEFORE\_SAPLING ((MAX\_TX\_SIZE\_BEFORE\_SAPLING / GetSerializeSize(JSDescription(), SER\_NETWORK, PROTOCOL\_VERSION)) - 1) |
|  |  | #define Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS ((MAX\_TX\_SIZE\_AFTER\_SAPLING / GetSerializeSize(JSDescription(), SER\_NETWORK, PROTOCOL\_VERSION)) - 1) |

Copy link

Contributor

### @Eirik0 **[Eirik0](/Eirik0)** [Apr 30, 2018](#discussion_r185040666)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Looked at the outdated comments. We do refer to this constant in an error message just below where it is defined. This will be incorrect until the upgrade, but perhaps this is not a big concern. Also, it is mentioned in the comment above that this may not be completely accurate in the case where there are multiple small notes.

On a side note, should Z\_SENDMANY\_MAX\_ZADDR\_OUTPUTS depend on the size of SpendDescritption and/or OutputDescription rather than JSDescription?

Sorry, something went wrong.

All reactions

 [![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
dismissed stale reviews from [ebfull](/ebfull), [arielgabizon](/arielgabizon), and [Eirik0](/Eirik0)
[May 1, 2018 10:32](#event-1603172210)

Addressed comments.

 [![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
requested review from
[ebfull](/ebfull),
[arielgabizon](/arielgabizon) and
[Eirik0](/Eirik0)
[May 1, 2018 10:33](#event-1603173259)

 [![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
[force-pushed](/zcash/zcash/compare/2e867bfb43c917e50e16f23ea84159ae8da62a5e..9d1fc94b2600d89efcf13167c9425147034a6899)
the
2864-sapling-tx-size-limit

branch
from
[`2e867bf`](/zcash/zcash/commit/2e867bfb43c917e50e16f23ea84159ae8da62a5e) to
[`9d1fc94`](/zcash/zcash/commit/9d1fc94b2600d89efcf13167c9425147034a6899)  [Compare](/zcash/zcash/compare/2e867bfb43c917e50e16f23ea84159ae8da62a5e..9d1fc94b2600d89efcf13167c9425147034a6899)
[May 1, 2018 16:28](#event-1603670116)

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=80&v=4)](/str4d)

Copy link

Contributor

Author

### **[str4d](/str4d)** commented [May 1, 2018](#issuecomment-385762395)

| Added a test of the Sapling transaction size boundary. |
| --- |

All reactions

Sorry, something went wrong.

[![arielgabizon](https://avatars.githubusercontent.com/u/5689834?s=60&v=4)](/arielgabizon)

**[arielgabizon](/arielgabizon)**
reviewed
[May 2, 2018](#pullrequestreview-116899948)

 [View reviewed changes](/zcash/zcash/pull/3212/files)

[src/wallet/rpcwallet.cpp](/zcash/zcash/pull/3212/files#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02d)

|  |  | int nextBlockHeight = chainActive.Height() + 1; |
| --- | --- | --- |
|  |  | CMutableTransaction mtx; |
|  |  | mtx.fOverwintered = true; |
|  |  | mtx.nVersionGroupId = SAPLING\_VERSION\_GROUP\_ID; |

Copy link

Contributor

### @arielgabizon **[arielgabizon](/arielgabizon)** [May 2, 2018](#discussion_r185499571)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

This determining of the version does not seem related to the transaction size limit.

Also wondering if it can be refactored to a generic method that does it according to the active upgrades

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @Eirik0 **[Eirik0](/Eirik0)** [May 4, 2018](#discussion_r186168585)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Is setting the nVersion and fOverwintered something that could happen in the constructor for CMutableTransaction?

There is also the function CreateNewContextualCMutableTransaction(...) in main.cpp

Looking a bit deeper ... This may have already been done in [#3239](https://github.com/zcash/zcash/pull/3239). I think it would make more sense to address this there.

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @str4d **[str4d](/str4d)** [May 7, 2018](#discussion_r186370721)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Yeah, `CreateNewContextualCMutableTransaction()` would likely end up being what we want to use. There are more places than this PR though, so we should do so in a separate PR to ensure that it makes sense everywhere.

Sorry, something went wrong.

All reactions

[![arielgabizon](https://avatars.githubusercontent.com/u/5689834?s=60&v=4)](/arielgabizon)

**[arielgabizon](/arielgabizon)**
reviewed
[May 2, 2018](#pullrequestreview-116902606)

 [View reviewed changes](/zcash/zcash/pull/3212/files)

[src/wallet/rpcwallet.cpp](/zcash/zcash/pull/3212/files#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02d)

|  |  | @@ -3633,8 +3652,8 @@ UniValue z\_sendmany(const UniValue& params, bool fHelp) | |
| --- | --- | --- | --- |
|  |  | txsize += CTXOUT\_REGULAR\_SIZE; // There will probably be taddr change |
|  |  | } |
|  |  | txsize += CTXOUT\_REGULAR\_SIZE \* taddrRecipients.size(); |
|  |  | if (txsize > MAX\_TX\_SIZE) { |
|  |  | throw JSONRPCError(RPC\_INVALID\_PARAMETER, strprintf("Too many outputs, size of raw transaction would be larger than limit of %d bytes", MAX\_TX\_SIZE )); |
|  |  | if (txsize > max\_tx\_size) { |

Copy link

Contributor

### @arielgabizon **[arielgabizon](/arielgabizon)** [May 2, 2018](#discussion_r185501669) • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Seems the computation of `max_tx_size` in all three methods should be refactored somewhere, especially since it gets a little messy with looking at what are the active upgrades, which also distracts from what else is going on in the method.

Btw, I'm wondering why the transparent sending methods like `sendrawtransaction` do not require similar changes.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @arielgabizon **[arielgabizon](/arielgabizon)** [May 2, 2018](#discussion_r185502080) • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

(I'm aware one argument for not refactoring is that some of this is temporary till upgrade after Sapling activation; still, I'm worried about the code getting entangled with these if's relating to what are the active upgrades)

Also, such refactoring might put us on the path of removing the other code duplication amongst the three shielded send methods.

Sorry, something went wrong.

All reactions

[![ebfull](https://avatars.githubusercontent.com/u/3794471?s=60&v=4)](/ebfull)

**[ebfull](/ebfull)**
approved these changes
[May 4, 2018](#pullrequestreview-117477605)

 [View reviewed changes](/zcash/zcash/pull/3212/files)

[![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=80&u=e34751e428466a3fe3135a485a59df3fe9323bf7&v=4)](/zkbot)

Copy link

Contributor

### **[zkbot](/zkbot)** commented [May 4, 2018](#issuecomment-386493559)

| ☔ The latest upstream changes (presumably [#3228](https://github.com/zcash/zcash/pull/3228)) made this pull request unmergeable. Please resolve the merge conflicts. |
| --- |

All reactions

Sorry, something went wrong.

 [str4d](/str4d)
added 5 commits
[May 4, 2018 11:17](#commits-pushed-15ec552)

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)

`[Raise 100kB transaction size limit from Sapling activation](/zcash/zcash/pull/3212/commits/15ec5525e316d41dfe110263062a97b7530c6be0 "Raise 100kB transaction size limit from Sapling activation

Closes #2864.")`
 …

`[15ec552](/zcash/zcash/pull/3212/commits/15ec5525e316d41dfe110263062a97b7530c6be0)`

```
Closes [zcash#2864](https://github.com/zcash/zcash/issues/2864).
```

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)

`[Benchmark the largest valid Sapling transaction in validatelargetx](/zcash/zcash/pull/3212/commits/ddcee7e13ad169ddea3f83e1412ed3d314744143 "Benchmark the largest valid Sapling transaction in validatelargetx

11130 inputs results in a transaction between 1992301 and 2003431 bytes.")`
 …

`[ddcee7e](/zcash/zcash/pull/3212/commits/ddcee7e13ad169ddea3f83e1412ed3d314744143)`

```
11130 inputs results in a transaction between 1992301 and 2003431 bytes.
```

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)

`[Rename MAX_TX_SIZE to MAX_TX_SIZE_AFTER_SAPLING](/zcash/zcash/pull/3212/commits/25fee3509a67a894f9a01908cc09d3df0cce7856 "Rename MAX_TX_SIZE to MAX_TX_SIZE_AFTER_SAPLING")`

`[25fee35](/zcash/zcash/pull/3212/commits/25fee3509a67a894f9a01908cc09d3df0cce7856)`

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)

`[Rework z_sendmany z-address recipient limit](/zcash/zcash/pull/3212/commits/892ae945f71b4887e758c6bd6c397606261583cd "Rework z_sendmany z-address recipient limit

From Sapling, the z-address recipients could require either JSDescriptions or
OutputDescriptions. Instead of trying to give an exact number in the help text,
rely on transaction size estimation to guide user behaviour.")`
 …

`[892ae94](/zcash/zcash/pull/3212/commits/892ae945f71b4887e758c6bd6c397606261583cd)`

```
From Sapling, the z-address recipients could require either JSDescriptions or
OutputDescriptions. Instead of trying to give an exact number in the help text,
rely on transaction size estimation to guide user behaviour.
```

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)

`[Add test of Sapling transaction size boundary](/zcash/zcash/pull/3212/commits/e1dbec49b7a7f03da00f263492153fd092ab2ad1 "Add test of Sapling transaction size boundary")`

`[e1dbec4](/zcash/zcash/pull/3212/commits/e1dbec49b7a7f03da00f263492153fd092ab2ad1)`

 [![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
[force-pushed](/zcash/zcash/compare/f535d6ab63347707cb45dcc179c0503098ae7c08..e1dbec49b7a7f03da00f263492153fd092ab2ad1)
the
2864-sapling-tx-size-limit

branch
from
[`f535d6a`](/zcash/zcash/commit/f535d6ab63347707cb45dcc179c0503098ae7c08) to
[`e1dbec4`](/zcash/zcash/commit/e1dbec49b7a7f03da00f263492153fd092ab2ad1)  [Compare](/zcash/zcash/compare/f535d6ab63347707cb45dcc179c0503098ae7c08..e1dbec49b7a7f03da00f263492153fd092ab2ad1)
[May 4, 2018 10:17](#event-1609514497)

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=80&v=4)](/str4d)

Copy link

Contributor

Author

### **[str4d](/str4d)** commented [May 4, 2018](#issuecomment-386559900)

| Rebased on master to fix merge conflicts. |
| --- |

All reactions

Sorry, something went wrong.

[![Eirik0](https://avatars.githubusercontent.com/u/6133620?s=60&v=4)](/Eirik0)

**[Eirik0](/Eirik0)**
approved these changes
[May 4, 2018](#pullrequestreview-117704082)

 [View reviewed changes](/zcash/zcash/pull/3212/files/e1dbec49b7a7f03da00f263492153fd092ab2ad1)

Copy link

Contributor

### @Eirik0 **[Eirik0](/Eirik0)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

ACK

Sorry, something went wrong.

All reactions

[src/wallet/rpcwallet.cpp](/zcash/zcash/pull/3212/files#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02d)

|  |  | int nextBlockHeight = chainActive.Height() + 1; |
| --- | --- | --- |
|  |  | CMutableTransaction mtx; |
|  |  | mtx.fOverwintered = true; |
|  |  | mtx.nVersionGroupId = SAPLING\_VERSION\_GROUP\_ID; |

Copy link

Contributor

### @Eirik0 **[Eirik0](/Eirik0)** [May 4, 2018](#discussion_r186168585)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Is setting the nVersion and fOverwintered something that could happen in the constructor for CMutableTransaction?

There is also the function CreateNewContextualCMutableTransaction(...) in main.cpp

Looking a bit deeper ... This may have already been done in [#3239](https://github.com/zcash/zcash/pull/3239). I think it would make more sense to address this there.

Sorry, something went wrong.

All reactions

[src/wallet/rpcwallet.cpp](/zcash/zcash/pull/3212/files/e1dbec49b7a7f03da00f263492153fd092ab2ad1#diff-63c7710d72381cffe692175dd70e47f1891bf75c3e09249ed826f9df3917d02d)

|  |  | @@ -4081,6 +4103,10 @@ UniValue z\_mergetoaddress(const UniValue& params, bool fHelp) | |
| --- | --- | --- | --- |
|  |  |  |
|  |  | int nextBlockHeight = chainActive.Height() + 1; |
|  |  | bool overwinterActive = NetworkUpgradeActive(nextBlockHeight, Params().GetConsensus(), Consensus::UPGRADE\_OVERWINTER); |
|  |  | unsigned int max\_tx\_size = MAX\_TX\_SIZE\_AFTER\_SAPLING; |

Copy link

Contributor

### @Eirik0 **[Eirik0](/Eirik0)** [May 4, 2018](#discussion_r186169176)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

It would be nice if we had a function somewhere to prevent this repetition as it might make future upgrades easier. That being said, it is a small block of code and I am not too concerned.

Sorry, something went wrong.

All reactions

 [![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
removed the request for review
from [gtank](/gtank)
[May 7, 2018 09:16](#event-1612500696)

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=80&v=4)](/str4d)

Copy link

Contributor

Author

### **[str4d](/str4d)** commented [May 7, 2018](#issuecomment-387008805)

| [@zkbot](https://github.com/zkbot) r+ |
| --- |

All reactions

Sorry, something went wrong.

[![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=80&u=e34751e428466a3fe3135a485a59df3fe9323bf7&v=4)](/zkbot)

Copy link

Contributor

### **[zkbot](/zkbot)** commented [May 7, 2018](#issuecomment-387008810)

| 📌 Commit [e1dbec4](https://github.com/zcash/zcash/commit/e1dbec49b7a7f03da00f263492153fd092ab2ad1) has been approved by `str4d` |
| --- |

All reactions

Sorry, something went wrong.

[![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=80&u=e34751e428466a3fe3135a485a59df3fe9323bf7&v=4)](/zkbot)

Copy link

Contributor

### **[zkbot](/zkbot)** commented [May 7, 2018](#issuecomment-387008831)

| ⌛ Testing commit [e1dbec4](https://github.com/zcash/zcash/commit/e1dbec49b7a7f03da00f263492153fd092ab2ad1) with merge [265eca3](https://github.com/zcash/zcash/commit/265eca3f4794486012cba6dd24770dfa27e83fd5)... |
| --- |

All reactions

Sorry, something went wrong.

[zkbot](/zkbot)
added a commit
that referenced
this pull request
[May 7, 2018](#ref-commit-265eca3)
[![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=40&u=e34751e428466a3fe3135a485a59df3fe9323bf7&v=4)](/zkbot)

`[Auto merge of](/zcash/zcash/commit/265eca3f4794486012cba6dd24770dfa27e83fd5 "Auto merge of #3212 - str4d:2864-sapling-tx-size-limit, r=str4d

Raise 100kB transaction size limit from Sapling activation

Closes #2864.") [#3212](https://github.com/zcash/zcash/pull/3212) [- str4d:2864-sapling-tx-size-limit, r=str4d](/zcash/zcash/commit/265eca3f4794486012cba6dd24770dfa27e83fd5 "Auto merge of #3212 - str4d:2864-sapling-tx-size-limit, r=str4d

Raise 100kB transaction size limit from Sapling activation

Closes #2864.")`
…

`[265eca3](/zcash/zcash/commit/265eca3f4794486012cba6dd24770dfa27e83fd5)`

```
Raise 100kB transaction size limit from Sapling activation

Closes [#2864](https://github.com/zcash/zcash/issues/2864).
```

[![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=80&u=e34751e428466a3fe3135a485a59df3fe9323bf7&v=4)](/zkbot)

Copy link

Contributor

### **[zkbot](/zkbot)** commented [May 7, 2018](#issuecomment-387029565)

| ☀️ Test successful - [pr-merge](https://ci.z.cash/#builders/3/builds/290) Approved by: str4d Pushing [265eca3](https://github.com/zcash/zcash/commit/265eca3f4794486012cba6dd24770dfa27e83fd5) to master... |
| --- |

All reactions

Sorry, something went wrong.

[![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=40&u=e34751e428466a3fe3135a485a59df3fe9323bf7&v=4)](/zkbot)
[zkbot](/zkbot)
merged commit [`e1dbec4`](/zcash/zcash/commit/e1dbec49b7a7f03da00f263492153fd092ab2ad1)
into
zcash:master

[May 7, 2018](https://github.com/zcash/zcash/pull/3212#event-1612659935)

 [![@str4d](https://avatars.githubusercontent.com/u/4993799?s=40&v=4)](/str4d)
[str4d](/str4d)
deleted the
2864-sapling-tx-size-limit

branch
[May 7, 2018 17:26](#event-1613451517)

[![@tearodactyl](https://avatars.githubusercontent.com/u/24784953?s=40&v=4)](/tearodactyl)
[tearodactyl](/tearodactyl)
mentioned this pull request
[May 4, 2019](#ref-issue-440332739)

[DoS transactions params
zerocurrencycoin/Zero#48](/zerocurrencycoin/Zero/issues/48)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fzcash%2Fzcash%2Fpull%2F3212)

Reviewers

[![@arielgabizon](https://avatars.githubusercontent.com/u/5689834?s=40&v=4)](/arielgabizon) [arielgabizon](/arielgabizon)

arielgabizon left review comments

[![@Eirik0](https://avatars.githubusercontent.com/u/6133620?s=40&v=4)](/Eirik0) [Eirik0](/Eirik0)

Eirik0 approved these changes

[![@ebfull](https://avatars.githubusercontent.com/u/3794471?s=40&v=4)](/ebfull) [ebfull](/ebfull)

ebfull approved these changes

Assignees

No one assigned

Labels

[A-consensus](/zcash/zcash/labels/A-consensus)
Area: Consensus rules
[I-dos](/zcash/zcash/labels/I-dos)
Problems and improvements with respect to Denial-of-Service.
[I-performance](/zcash/zcash/labels/I-performance)
Problems and improvements with respect to performance

Projects

None yet

Milestone

 [**v1.1.1**](/zcash/zcash/milestone/71 "v1.1.1")

Development

Successfully merging this pull request may close these issues.

5 participants

[![@str4d](https://avatars.githubusercontent.com/u/4993799?s=52&v=4)](/str4d) [![@zkbot](https://avatars.githubusercontent.com/u/17032253?s=52&v=4)](/zkbot) [![@ebfull](https://avatars.githubusercontent.com/u/3794471?s=52&v=4)](/ebfull) [![@arielgabizon](https://avatars.githubusercontent.com/u/5689834?s=52&v=4)](/arielgabizon) [![@Eirik0](https://avatars.githubusercontent.com/u/6133620?s=52&v=4)](/Eirik0)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from z.cash_73aa2dd7_20250121_020853.html ===

[Skip to content](#content)
[![](https://z.cash/wp-content/uploads/2023/03/zcash-logo.svg)](https://z.cash)

Search

* [Learn](https://z.cash/learn/)
  + [Zcash 101](/learn/?zcash=#tag-zcash-101)
    - [What is Zcash?](https://z.cash/learn/what-is-zcash/)
    - [How is Zcash different than Bitcoin?](https://z.cash/learn/how-is-zcash-different-than-bitcoin/)
    - [What are the economics of Zcash?](https://z.cash/learn/what-are-the-economics-of-zcash/)
    - [See all](/learn/?zcash=#tag-zcash-101)
  + [Privacy](/learn/?privacy=#tag-privacy)
    - [Why is privacy so important?](https://z.cash/learn/why-is-privacy-so-important/)
    - [What are zero-knowledge proofs?](https://z.cash/learn/what-are-zero-knowledge-proofs/)
    - [What is the difference between shielded and transparent Zcash?](https://z.cash/learn/what-is-the-difference-between-shielded-and-transparent-zcash/)
    - [See all](/learn/?privacy=#tag-privacy)
  + [Using Zcash](/learn/?using=#tag-using-zcash)
    - [Where can I use or spend Zcash?](https://z.cash/learn/where-can-i-use-or-spend-zcash/)
    - [What’s the best Zcash wallet?](https://z.cash/learn/whats-the-best-zcash-wallet/)
    - [What are Zcash unified addresses?](https://z.cash/learn/what-are-zcash-unified-addresses/)
    - [See all](/learn/?using=#tag-using-zcash)
* [Ecosystem](https://z.cash/ecosystem/)
  + [Wallets](/ecosystem/?wallets=#tag-wallets)
    - [Ywallet](https://z.cash/ecosystem/ywallet/)
    - [Edge Wallet](https://z.cash/ecosystem/edge-wallet/)
    - [Nighthawk](https://z.cash/ecosystem/nighthawk/)
    - [See all](/ecosystem/?wallets=#tag-wallets)
  + [Exchanges](/ecosystem/?exchanges=#tag-exchanges)
    - [Gemini](https://z.cash/ecosystem/gemini/)
    - [Kraken](https://z.cash/ecosystem/kraken/)
    - [Coinbase](https://z.cash/ecosystem/coinbase/)
    - [See all](/ecosystem/?exchanges=#tag-exchanges)
  + [Build](/ecosystem/?build=#tag-build-with-zcash)
    - [Zcashd – Official Client](https://z.cash/ecosystem/zcashd/)
    - [Zebrad](https://z.cash/ecosystem/zebrad/)
    - [Github](https://z.cash/ecosystem/github/)
    - [See all](/ecosystem/?build=#tag-build-with-zcash)
* [Network Information](https://z.cash/network/)
  + [Network Statistics](https://z.cash/network/)
  + [Funding & Governance](/network/?funding=#funding)
  + [ZIPs](/network/?zips=#zips)
* [Community](https://z.cash/community-hub/)
  + [Community Hub](https://z.cash/community-hub/)
    - [Build](/community-hub/?build=#tab-5661)
    - [Learn](/community-hub/?learn=#tab-5662)
    - [Discuss](/community-hub/?discuss=#tab-5663)
    - [News & Events](/community-hub/?news=#news)
  + Important links
    - [Electric Coin Co.](https://electriccoin.co/)
    - [Zcash Foundation](https://www.zfnd.org/)
    - [Zcash Community Grants](https://zcashcommunitygrants.org/)
  + Social
    - [Zcash Twitter](https://twitter.com/zcash)
    - [Community Forum](https://forum.zcashcommunity.com/)
    - [Community Telegram](https://t.me/zcash_community)

* [Learn](https://z.cash/learn/)
  + [Zcash 101](/learn/?zcash=#tag-zcash-101)
    - [What is Zcash?](https://z.cash/learn/what-is-zcash/)
    - [How is Zcash different than Bitcoin?](https://z.cash/learn/how-is-zcash-different-than-bitcoin/)
    - [What are the economics of Zcash?](https://z.cash/learn/what-are-the-economics-of-zcash/)
    - [See all](/learn/?zcash=#tag-zcash-101)
  + [Privacy](/learn/?privacy=#tag-privacy)
    - [Why is privacy so important?](https://z.cash/learn/why-is-privacy-so-important/)
    - [What are zero-knowledge proofs?](https://z.cash/learn/what-are-zero-knowledge-proofs/)
    - [What is the difference between shielded and transparent Zcash?](https://z.cash/learn/what-is-the-difference-between-shielded-and-transparent-zcash/)
    - [See all](/learn/?privacy=#tag-privacy)
  + [Using Zcash](/learn/?using=#tag-using-zcash)
    - [Where can I use or spend Zcash?](https://z.cash/learn/where-can-i-use-or-spend-zcash/)
    - [What’s the best Zcash wallet?](https://z.cash/learn/whats-the-best-zcash-wallet/)
    - [What are Zcash unified addresses?](https://z.cash/learn/what-are-zcash-unified-addresses/)
    - [See all](/learn/?using=#tag-using-zcash)
* [Ecosystem](https://z.cash/ecosystem/)
  + [Wallets](/ecosystem/?wallets=#tag-wallets)
    - [Ywallet](https://z.cash/ecosystem/ywallet/)
    - [Edge Wallet](https://z.cash/ecosystem/edge-wallet/)
    - [Nighthawk](https://z.cash/ecosystem/nighthawk/)
    - [See all](/ecosystem/?wallets=#tag-wallets)
  + [Exchanges](/ecosystem/?exchanges=#tag-exchanges)
    - [Gemini](https://z.cash/ecosystem/gemini/)
    - [Kraken](https://z.cash/ecosystem/kraken/)
    - [Coinbase](https://z.cash/ecosystem/coinbase/)
    - [See all](/ecosystem/?exchanges=#tag-exchanges)
  + [Build](/ecosystem/?build=#tag-build-with-zcash)
    - [Zcashd – Official Client](https://z.cash/ecosystem/zcashd/)
    - [Zebrad](https://z.cash/ecosystem/zebrad/)
    - [Github](https://z.cash/ecosystem/github/)
    - [See all](/ecosystem/?build=#tag-build-with-zcash)
* [Network Information](https://z.cash/network/)
  + [Network Statistics](https://z.cash/network/)
  + [Funding & Governance](/network/?funding=#funding)
  + [ZIPs](/network/?zips=#zips)
* [Community](https://z.cash/community-hub/)
  + [Community Hub](https://z.cash/community-hub/)
    - [Build](/community-hub/?build=#tab-5661)
    - [Learn](/community-hub/?learn=#tab-5662)
    - [Discuss](/community-hub/?discuss=#tab-5663)
    - [News & Events](/community-hub/?news=#news)
  + Important links
    - [Electric Coin Co.](https://electriccoin.co/)
    - [Zcash Foundation](https://www.zfnd.org/)
    - [Zcash Community Grants](https://zcashcommunitygrants.org/)
  + Social
    - [Zcash Twitter](https://twitter.com/zcash)
    - [Community Forum](https://forum.zcashcommunity.com/)
    - [Community Telegram](https://t.me/zcash_community)

[![](https://z.cash/wp-content/uploads/2023/03/zcash-logo.svg)](https://z.cash)

[Learn](/learn/)

## [Learn](/learn/)

Learn the basics of the Zcash protocol, privacy, blockchain and so much more.

### [Zcash 101](/learn/?zcash=#tag-zcash-101)

* [What is Zcash?](https://z.cash/learn/what-is-zcash/)
* [How is Zcash different than Bitcoin?](https://z.cash/learn/how-is-zcash-different-than-bitcoin/)
* [What are the economics of Zcash?](https://z.cash/learn/what-are-the-economics-of-zcash/)

[See all](/learn/?zcash=#tag-zcash-101)

### [Privacy](/learn/?privacy=#tag-privacy)

* [Why is privacy so important?](https://z.cash/learn/why-is-privacy-so-important/)
* [What are zero-knowledge proofs?](https://z.cash/learn/what-are-zero-knowledge-proofs/)
* [What is the difference between shielded and transparent Zcash?](https://z.cash/learn/what-is-the-difference-between-shielded-and-transparent-zcash/)

[See all](/learn/?privacy=#tag-privacy)

### [Using Zcash](/learn/?using=#tag-using-zcash)

* [Where can I use or spend Zcash?](https://z.cash/learn/where-can-i-use-or-spend-zcash/)
* [What’s the best Zcash wallet?](https://z.cash/learn/whats-the-best-zcash-wallet/)
* [What are Zcash unified addresses?](https://z.cash/learn/what-are-zcash-unified-addresses/)

[See all](/learn/?using=#tag-using-zcash)

[Ecosystem](/ecosystem/)

## [Ecosystem](/ecosystem/)

Browse wallets, exchanges, developer tools and everything you need to become a participant in the ecosystem.

### [Wallets](/ecosystem/?wallets=#tag-wallets)

* [Zashi mobile wallet](https://z.cash/ecosystem/zashi-wallet/)
* [Edge Wallet](https://z.cash/ecosystem/edge-wallet/)
* [Nighthawk](https://z.cash/ecosystem/nighthawk/)

[See all](/ecosystem/?wallets=#tag-wallets)

### [Exchanges](/ecosystem/?exchanges=#tag-exchanges)

* [Gemini](https://z.cash/ecosystem/gemini/)
* [Kraken](https://z.cash/ecosystem/kraken/)
* [Coinbase](https://z.cash/ecosystem/coinbase/)

[See all](/ecosystem/?exchanges=#tag-exchanges)

### [Build](/ecosystem/?build=#tag-build-with-zcash)

* [Zcashd](https://z.cash/ecosystem/zcashd/)
* [Zebrad](https://z.cash/ecosystem/zebrad/)
* [Github](https://z.cash/ecosystem/github/)

[See all](/ecosystem/?build=#tag-build-with-zcash)

[Network](/network/)

## [Network](/network/)

Zcash protocol network information, development schedule, funding and governance.

### [Network info](/network/)

[Network Statistics](/network/)

[Funding & Governance](/network/?funding=#funding)

[ZIPs](/network/?zips=#zips)

[Community](/community-hub/)

## [Community](/community-hub/)

Build, learn, discuss and follow the latest Zcash news and events.

### [Community hub](/community-hub/)

[Build](/community-hub/?build=#tab-5661)

[Learn](/community-hub/?learn=#tab-5662)

[Discuss](/community-hub/?discuss=#tab-5663)

[News & Events](/community-hub/?news=#news)

### Important links

[Electric Coin Co.](https://electriccoin.co/)

[Zcash Foundation](https://www.zfnd.org/)

[Zcash Community Grants](https://zcashcommunitygrants.org/)

### Social

[Zcash Twitter](https://twitter.com/zcash)

[Community Forum](https://forum.zcashcommunity.com/)

[Community Telegram](https://t.me/zcash_community)

Search

Search
 Search

# Zcash is encrypted electronic cash.

The first cryptocurrency to develop zero-knowledge encryption for private peer-to-peer payments.

[Use Zcash](/learn/how-to-use-zcash/#start)

[Learn Zcash](/learn/)

Current price (USD)
$
0

Outstanding supply

0
M

Shielded ZEC

0
M

Payments

0

46.50
Current Price (USD)

15.84M
Outstanding Supply

1.87M
Shielded ZEC

2970
Payments

![Transparent pixel](https://z.cash/wp-content/uploads/2023/04/transparent-pixel.png)

### Zcash is supported by industry leaders

Zcash is available in trusted digital wallets and listed on high-quality exchanges around the world, making it the best option for private everyday payments and long-term savings.

[![Coinbase](https://z.cash/wp-content/uploads/2023/04/coinbase-logo.png)](https://z.cash/ecosystem/coinbase/)

[![Zcash Foundation](https://z.cash/wp-content/uploads/2023/04/zcash-foundation-logo.svg)](https://z.cash/ecosystem/zcash-foundation/)

[![Messari](https://z.cash/wp-content/uploads/2023/04/messari.png)](https://z.cash/ecosystem/messari/)

[![Gemini](https://z.cash/wp-content/uploads/2023/03/gemini-support.png)](https://z.cash/ecosystem/gemini/)

[![Zcash Community Grants](https://z.cash/wp-content/uploads/2023/04/zcash-grants-committee.png)](https://z.cash/ecosystem/zcash-community-grants/)

[![Electric Coin Company](https://z.cash/wp-content/uploads/2023/04/ecc-logo-alt.png)](https://z.cash/ecosystem/electric-coin-company/)

[![Bitfinex](https://z.cash/wp-content/uploads/2023/04/bitfinex-logo.png)](https://z.cash/ecosystem/bitfinex/)

[![Flexa](https://z.cash/wp-content/uploads/2023/04/flexa-logo.png)](https://z.cash/ecosystem/flexa/)

[![Poloniex](https://z.cash/wp-content/uploads/2023/04/poloniex-logo.png)](https://z.cash/ecosystem/poloniex/)

[![Airtm](https://z.cash/wp-content/uploads/2023/04/airtm-logo.png)](https://z.cash/ecosystem/airtm/)

[![Flyp.me](https://z.cash/wp-content/uploads/2023/04/flypme.png)](https://z.cash/ecosystem/flyp-me/)

[![Electric Coin Company](https://z.cash/wp-content/uploads/2023/04/ecc-logo-alt.png)](https://z.cash/ecosystem/electric-coin-company/)

[![Bitfinex](https://z.cash/wp-content/uploads/2023/04/bitfinex-logo.png)](https://z.cash/ecosystem/bitfinex/)

[![Flexa](https://z.cash/wp-content/uploads/2023/04/flexa-logo.png)](https://z.cash/ecosystem/flexa/)

[![Gemini](https://z.cash/wp-content/uploads/2023/03/gemini-support.png)](https://z.cash/ecosystem/gemini/)

[![Poloniex](https://z.cash/wp-content/uploads/2023/04/poloniex-logo.png)](https://z.cash/ecosystem/poloniex/)

[![Airtm](https://z.cash/wp-content/uploads/2023/04/airtm-logo.png)](https://z.cash/ecosystem/airtm/)

[![Zcash Community Grants](https://z.cash/wp-content/uploads/2023/04/zcash-grants-committee.png)](https://z.cash/ecosystem/zcash-community-grants/)

[![Coinbase](https://z.cash/wp-content/uploads/2023/04/coinbase-logo.png)](https://z.cash/ecosystem/coinbase/)

[![Messari](https://z.cash/wp-content/uploads/2023/04/messari.png)](https://z.cash/ecosystem/messari/)

[![Flyp.me](https://z.cash/wp-content/uploads/2023/04/flypme.png)](https://z.cash/ecosystem/flyp-me/)

[![Zcash Foundation](https://z.cash/wp-content/uploads/2023/04/zcash-foundation-logo.svg)](https://z.cash/ecosystem/zcash-foundation/)

[Explore](/ecosystem/)

### Features

![Fair and open](https://z.cash/wp-content/uploads/2023/04/fair-open.gif)
#### Fair & open

Zcash is accessible and available to anyone with an internet connection.

![Private](https://z.cash/wp-content/uploads/2023/04/privacy.gif)
#### Private

Zcash employs end-to-end encryption to protect your right to privacy.

![You’re in control](https://z.cash/wp-content/uploads/2023/04/you-re-in-control.gif)
#### You're in control

Zcash is a decentralized protocol, which means your money is yours — not the bank’s.

![Secret messages](https://z.cash/wp-content/uploads/2023/04/secret.gif)
#### Secret messages

Send private messages along with your transactions. [Write a love note](https://youtu.be/Qs4ZqVYY-DA?t=310), if you like.

![Fast, low fees](https://z.cash/wp-content/uploads/2023/04/fast-and-low-fees.gif)
#### Fast, low fees

Zcash is faster than Bitcoin, and transaction fees are usually only a fraction of a cent.

![Self-funded development](https://z.cash/wp-content/uploads/2023/04/self-funded-develop.gif)
#### Self-funded development

A decentralized ecosystem of developers are paid to add Zcash features and UX improvements.

### Ready to use ZEC?

#### [Learn](/learn/)

[Learn the basics of Zcash and browse resources.](/learn/)

#### [Use Zcash](/ecosystem/)

[Find ecosystem resources, like exchanges and wallets.](/ecosystem/)

#### [Connect](/community-hub/?discuss=#tab-5663)

[Visit the Zcash Community Hub and join the conversation.](/community-hub/?discuss=#tab-5663)

#### [Build](/ecosystem/#tag-build-with-zcash)

[Find tools and contribute to the Zcash Ecosystem.](/ecosystem/#tag-build-with-zcash)

![](https://z.cash/wp-content/uploads/2023/03/zcash-white-logo.svg)

Zcash is cash

for a new era.

[Learn](/learn/)

[Ecosystem & Resources](/ecosystem/)

[Network Info](/network/)

[Community](/community-hub/)

[Trademark Policy](https://zfnd.org/trademark-policy/)

[Privacy Policy](/privacy-policy/)

Manage Cookies

[Sitemap](/sitemap/)

[Media Kit](/press/)

[Twitter](https://twitter.com/zcash)

[Telegram](https://t.me/zcash_community)

[Community](https://forum.zcashcommunity.com/)

[Zcash and ZEC:](/learn/what-is-the-difference-between-zcash-and-zec/)

What's the difference?

##### Can we store cookies?

We sometimes use cookies to improve the performance of our website. Choose what you allow.

CustomizeNoYesManage Cookies

Close

#### Our Features

We sometimes use cookies to improve the performance of our website. Choose what you allow.

Essential
 Essential

Always Enabled

This includes key features like page navigation and logging you in. The website cannot function without this.
**Who do we share data with?**

| Description |
| --- |
| [Google Analytics](https://www.google.com/intl/en/policies/privacy/) |
| [Google Optimize](https://policies.google.com/privacy?hl=en) |
| [Google Tag Manager](https://www.google.com/intl/en/policies/privacy/) |
| [Sendgrid](https://www.twilio.com/legal/privacy) |

**Does this policy need cookies to work?**
Yes.

Marketing
marketing

This tells us it's okay for us to use your information for marketing specifically.
**Who do we share data with?**

| Description |
| --- |
| [Hotjar](https://www.hotjar.com/legal/policies/privacy/) |

**Does this policy need cookies to work?**
Yes.

No Save My Preferences Yes


