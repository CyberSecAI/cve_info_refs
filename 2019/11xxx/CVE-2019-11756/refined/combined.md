=== Content from wiki.mozilla.org_3659d679_20250121_031829.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")â€Ž | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from www.mozilla.org_cc6d1f25_20250121_011047.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, weâ€™d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured â€” we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2019-36

## Security Vulnerabilities fixed in - Firefox 71

Announced
December 3, 2019
Impact
high
Products
Firefox
Fixed in

* Firefox 71

#### [#CVE-2019-11756: Use-after-free of SFTKSession object](#CVE-2019-11756)

Reporter
J.C. Jones
Impact
high
##### Description

Improper refcounting of soft token session objects could cause a use-after-free and crash (likely limited to a denial of service).

##### References

* [Bug 1508776](https://bugzilla.mozilla.org/show_bug.cgi?id=1508776)

#### [#CVE-2019-17008: Use-after-free in worker destruction](#CVE-2019-17008)

Reporter
Looben Yang
Impact
high
##### Description

When using nested workers, a use-after-free could occur during worker destruction. This resulted in a potentially exploitable crash.

##### References

* [Bug 1546331](https://bugzilla.mozilla.org/show_bug.cgi?id=1546331)

#### [#CVE-2019-13722: Stack corruption due to incorrect number of arguments in WebRTC code](#CVE-2019-13722)

Reporter
Alexandru Michis
Impact
high
##### Description

When setting a thread name on Windows in WebRTC, an incorrect number of arguments could have been supplied, leading to stack corruption and a potentially exploitable crash.
*Note: this issue only occurs on Windows. Other operating systems are unaffected.*

##### References

* [Bug 1580156](https://bugzilla.mozilla.org/show_bug.cgi?id=1580156)

#### [#CVE-2019-11745: Out of bounds write in NSS when encrypting with a block cipher](#CVE-2019-11745)

Reporter
Craig Disselkoen
Impact
high
##### Description

When encrypting with a block cipher, if a call to `NSC_EncryptUpdate` was made with data smaller than the block size, a small out of bounds write could occur. This could have caused heap corruption and a potentially exploitable crash.

##### References

* [Bug 1586176](https://bugzilla.mozilla.org/show_bug.cgi?id=1586176)

#### [#CVE-2019-17014: Dragging and dropping a cross-origin resource, incorrectly loaded as an image, could result in information disclosure](#CVE-2019-17014)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

If an image had not loaded correctly (such as when it is not actually an image), it could be dragged and dropped cross-domain, resulting in a cross-origin information leak.

##### References

* [Bug 1322864](https://bugzilla.mozilla.org/show_bug.cgi?id=1322864)

#### [#CVE-2019-17009: Updater temporary files accessible to unprivileged processes](#CVE-2019-17009)

Reporter
Robert Strong
Impact
moderate
##### Description

When running, the updater service wrote status and log files to an unrestricted location; potentially allowing an unprivileged process to locate and exploit a vulnerability in file handling in the updater service.
*Note: This attack requires local system access and only affects Windows. Other operating systems are not affected.*

##### References

* [Bug 1510494](https://bugzilla.mozilla.org/show_bug.cgi?id=1510494)

#### [#CVE-2019-17010: Use-after-free when performing device orientation checks](#CVE-2019-17010)

Reporter
Nils
Impact
moderate
##### Description

Under certain conditions, when checking the Resist Fingerprinting preference during device orientation checks, a race condition could have caused a use-after-free and a potentially exploitable crash.

##### References

* [Bug 1581084](https://bugzilla.mozilla.org/show_bug.cgi?id=1581084)

#### [#CVE-2019-17005: Buffer overflow in plain text serializer](#CVE-2019-17005)

Reporter
Mirko Brodesser
Impact
moderate
##### Description

The plain text serializer used a fixed-size array for the number of

elements it could process; however it was possible to overflow the static-sized array leading to memory corruption and a potentially exploitable crash.

##### References

* [Bug 1584170](https://bugzilla.mozilla.org/show_bug.cgi?id=1584170)

#### [#CVE-2019-17011: Use-after-free when retrieving a document in antitracking](#CVE-2019-17011)

Reporter
Nils
Impact
moderate
##### Description

Under certain conditions, when retrieving a document from a DocShell in the antitracking code, a race condition could cause a use-after-free condition and a potentially exploitable crash.

##### References

* [Bug 1591334](https://bugzilla.mozilla.org/show_bug.cgi?id=1591334)

#### [#CVE-2019-17012: Memory safety bugs fixed in Firefox 71 and Firefox ESR 68.3](#CVE-2019-17012)

Reporter
Mozilla developers and community
Impact
high
##### Description

Mozilla developers Christoph Diehl, Nathan Froyd, Jason Kratzer, Christian Holler, Karl Tomlinson, Tyson Smith reported memory safety bugs present in Firefox 70 and Firefox ESR 68.2. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 71 and Firefox ESR 68.3](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1449736%2C1533957%2C1560667%2C1567209%2C1580288%2C1585760%2C1592502)

#### [#CVE-2019-17013: Memory safety bugs fixed in Firefox 71](#CVE-2019-17013)

Reporter
Mozilla developers and community
Impact
high
##### Description

Mozilla developers and community members Philipp, Diego Calleja, Mikhail Gavrilov, Jason Kratzer, Christian Holler, Markus Stange, Tyson Smith reported memory safety bugs present in Firefox 70. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 71](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1298509%2C1472328%2C1577439%2C1577937%2C1580320%2C1584195%2C1585106%2C1586293%2C1593865%2C1594181)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporationâ€™s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are Â©1998â€“2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_a3141bb1_20250121_011046.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1508776)
* [XML](/show_bug.cgi?ctype=xml&id=1508776)

Closed
[Bug 1508776](/show_bug.cgi?id=1508776)
(CVE-2019-11756)

Opened 6 years ago
Closed 5 years ago

# UAF in sftk\_FreeSession due to improper refcounting

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

UAF in sftk\_FreeSession due to improper refcounting

## Categories

### (NSS :: Libraries, defect, P1)

[Product:](/describecomponents.cgi?product=NSS)

NSS
â–¾

NSS
Network Security Services - a cross-platform
security library ([more info](http://www.mozilla.org/projects/security/pki/nss/))
[See Open Bugs in This Product](/buglist.cgi?product=NSS&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=NSS)
Watch This Product

[Component:](/describecomponents.cgi?product=NSS&component=Libraries#Libraries)

Libraries
â–¾

NSS :: Libraries
Libraries for client support of SSL v2 and v3, TLS, PKCS #5,
PKCS #7, PKCS #11, PKCS #12, S/MIME, X.509 v3 certificates,
and other security standards
[See Open Bugs in This Component](/buglist.cgi?product=NSS&component=Libraries&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=NSS&component=Libraries&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=NSS&component=Libraries)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

other

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Windows

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### (firefox-esr60 wontfix, firefox-esr68 wontfix, firefox64 wontfix, firefox65 wontfix, firefox66 wontfix, firefox67 wontfix, firefox69 wontfix, firefox70+ wontfix, firefox71+ fixed)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

3.47

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr60 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=wontfix) |
| firefox-esr68 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr68&o1=equals&v1=wontfix) |
| firefox64 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox64&o1=equals&v1=wontfix) |
| firefox65 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox65&o1=equals&v1=wontfix) |
| firefox66 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox66&o1=equals&v1=wontfix) |
| firefox67 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=wontfix) |
| firefox69 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox69&o1=equals&v1=wontfix) |
| firefox70 | [+](/buglist.cgi?f1=cf_tracking_firefox70&o1=equals&v1=%2B) | [wontfix](/buglist.cgi?f1=cf_status_firefox70&o1=equals&v1=wontfix) |
| firefox71 | [+](/buglist.cgi?f1=cf_tracking_firefox71&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox71&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| firefox-esr60 |  | wontfix |
| firefox-esr68 |  | wontfix |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox64 |  | wontfix |
| firefox65 |  | wontfix |
| firefox66 |  | wontfix |
| firefox67 |  | wontfix |
| firefox69 |  | wontfix |
| firefox70 | + | wontfix |
| firefox71 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: marcia, Assigned: jcj)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/078db09f952a32d7a60ed0a6d149c40d?d=mm&size=40)  [jcj](/user_profile?user_id=520206)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/078db09f952a32d7a60ed0a6d149c40d?d=mm&size=40)  [jcj](/user_profile?user_id=520206)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/cf7a6485ad75c35d66da0af6c88515d5?d=mm&size=40)  [marcia](/user_profile?user_id=8519)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/38f561698d679a724938d4600c0f8b52?d=mm&size=40)  [beurdouche](/user_profile?user_id=622637)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

23 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1433571](/show_bug.cgi?id=1433571 "RESOLVED WORKSFORME - Crash in memset | sftk_DestroySessionObjectData"), [1572164](/show_bug.cgi?id=1572164 "RESOLVED FIXED - Use-after-Free in NSC_WrapKey")

## Details

### (4 keywords, Whiteboard: [post-critsmash-triage][adv-main71+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2019-11756

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[csectype-wildptr](/buglist.cgi?keywords=csectype-wildptr&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[post-critsmash-triage][adv-main71+]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [btot](/user_profile?user_id=553429) | [qe-verify](#a28058378_553429 "5 years ago") | - |
| --- | --- | --- |
| [btot](/user_profile?user_id=553429) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |

## Crash Data

Signature:

[[@ sftk\_FreeSession ]](https://crash-stats.mozilla.org/signature/?signature=sftk_FreeSession)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 1 obsolete file)

| [Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs](/attachment.cgi?id=9095024)  [5 years ago](#c15)  [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)   47 bytes, text/x-phabricator-request | abillings : [sec-approval+](#c23 "5 years ago") | [Details](/attachment.cgi?id=9095024&action=edit) | [Review](/attachment.cgi?id=9095024) |
| --- | --- | --- |
| [Bug 1577822 - land NSS e022f47937ca UPGRADE\_NSS\_RELEASE](/attachment.cgi?id=9095363)  [5 years ago](#c19)  [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)   47 bytes, text/x-phabricator-request |  | [Details](/attachment.cgi?id=9095363&action=edit) | [Review](/attachment.cgi?id=9095363) |
| [advisory.txt](/attachment.cgi?id=9111774)  [5 years ago](#c30)  [Tom Ritter [:tjr]](/user_profile?user_id=578488)   182 bytes, text/plain |  | [Details](/attachment.cgi?id=9111774&action=edit) |

Show Obsolete

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Marcia Knous [:marcia]](/user_profile?user_id=8519)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1508776#c0)â€¢ 6 years ago |
|  | |

This bug was filed from the Socorro interface and is
report [bp-ec6e8cfb-9c0b-4e68-9917-977e80181120](https://crash-stats.mozilla.org/report/index/ec6e8cfb-9c0b-4e68-9917-977e80181120).
=============================================================
Seen while looking at nightly crash stats. 1 crash so far, but there are several other similar signatures in the same build ID: 20181120100045. Some of the crash reports have safebrowing stuff in the stack.
\*<https://crash-stats.mozilla.com/report/index/5e48d3a0-ac12-4463-84ee-fb62f0181120> -
[@ sftk\_ObjectFromHandle]
\* <https://crash-stats.mozilla.com/report/index/aa4a675d-1dae-4b22-9698-355130181120> - [@ sftk\_SessionFromHandle ]
\* <https://crash-stats.mozilla.com/report/index/18de7f1b-8ec5-4fc1-8784-42ac90181120>
\* <https://crash-stats.mozilla.com/report/index/7b929956-332a-4de6-8f53-6c5100181120>
Possible regression range based on Build ID: <https://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=e44bb5b4bc79be613d29b3f95d7b508e68e3d128&tochange=eeddcefcdad847bf8a5737153079e9619ee5aa66>
Top 10 frames of crashing thread:
0 @0x1cdb1e67a80
1 softokn3.dll sftk\_FreeSession security/nss/lib/softoken/pkcs11u.c:1868
2 softokn3.dll NSC\_DigestUpdate security/nss/lib/softoken/pkcs11c.c:1794
3 nss3.dll PK11\_DigestOp security/nss/lib/pk11wrap/pk11cxt.c:783
4 xul.dll nsCryptoHash::Update security/manager/ssl/nsCryptoHash.cpp:116
5 xul.dll nsresult mozilla::safebrowsing::LookupCacheV4::VerifyChecksum toolkit/components/url-classifier/LookupCacheV4.cpp:416
6 xul.dll mozilla::safebrowsing::LookupCacheV4::LoadFromFile toolkit/components/url-classifier/LookupCacheV4.cpp:205
7 xul.dll nsresult mozilla::safebrowsing::LookupCache::LoadPrefixSet toolkit/components/url-classifier/LookupCache.cpp:478
8 xul.dll mozilla::safebrowsing::LookupCache::Open toolkit/components/url-classifier/LookupCache.cpp:83
9 xul.dll class RefPtr<mozilla::safebrowsing::LookupCache> mozilla::safebrowsing::Classifier::GetLookupCache toolkit/components/url-classifier/Classifier.cpp:1526
=============================================================

|  | [Marcia Knous [:marcia]](/user_profile?user_id=8519)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1508776#c1)â€¢ 6 years ago |
|  | |

No further crashes on 65 nightly since I originally filed this.
sftk\_ObjectFromHandle signature and sftk\_SessionFromHandle also doesn't appear to have any further crashes on nightly.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1508776#c2)â€¢ 6 years ago |
|  | |

2 total crashes in 65; volume is low enough that nightly isn't a great marker. Crashes are a mix of bad pointers and execs of bad pointers -> sec-high. At least one is a clear e5 UAF
Crashes seem to go back to FF 52 or earlierGroup: core-security
[status-firefox64](/buglist.cgi?f1=cf_status_firefox64&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_firefox64&o1=equals&v1=unaffected) â†’ [affected](/buglist.cgi?f1=cf_status_firefox64&o1=equals&v1=affected)
[status-firefox-esr60](/buglist.cgi?f1=cf_status_firefox_esr60&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=affected)Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[csectype-wildptr](/buglist.cgi?keywords=csectype-wildptr&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a2304963_580382)â€¢ 6 years ago |

[status-firefox64](/buglist.cgi?f1=cf_status_firefox64&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox64&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox64&o1=equals&v1=wontfix)
[status-firefox66](/buglist.cgi?f1=cf_status_firefox66&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox66&o1=equals&v1=affected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1508776#c3)â€¢ 6 years ago |
|  | |

I don't know if this is a bug in the NSS implementation or a bug in how Safe Browsing is using it.Group: core-security â†’ core-security-releaseComponent: Security â†’ Safe BrowsingProduct: Core â†’ Toolkit

|  | [Jared Wein [:jaws] (please needinfo? me)](/user_profile?user_id=409754) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1508776#c4)â€¢ 6 years ago |
|  | |

Low crash rate and unclear steps forward. Marking as wontfix for 65.

[status-firefox65](/buglist.cgi?f1=cf_status_firefox65&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox65&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox65&o1=equals&v1=wontfix)

|  | [Justin Dolske [:Dolske]](/user_profile?user_id=27780) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1508776#c5)â€¢ 6 years ago |
|  | |

sec-high, can we get an owner and priority assigned for investigation?

Flags: needinfo?(dlee)

|  | [Dimi Lee [:dimi]](/user_profile?user_id=468232) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a4754403_468232)â€¢ 6 years ago |

Assignee: nobody â†’ dleeStatus: NEW â†’ ASSIGNEDFlags: needinfo?(dlee)Priority: -- â†’ P2

|  | [Justin Dolske [:Dolske]](/user_profile?user_id=27780) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1508776#c6)â€¢ 6 years ago |
|  | |

Can we get an update and ETA here? This is currently a sec-high bug.

Flags: needinfo?(ettseng)Flags: needinfo?(dlee)

|  | [Dimi Lee [:dimi]](/user_profile?user_id=468232) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1508776#c7)â€¢ 6 years ago |
|  | |

I'll update this before the end of this week

Flags: needinfo?(ettseng)Flags: needinfo?(dlee)Priority: P2 â†’ P1

|  | [Dimi Lee [:dimi]](/user_profile?user_id=468232) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1508776#c8)â€¢ 6 years ago |
|  | |

By checking those crashes with SafeBrowsing call stacks, I didn't find any suspicious behavior and pointers passed to NSS are also valid.

The way SafeBrowsing uses NSS is very straightforward:

When there is a SafeBrowsing update, the worker thread Init the lib, update the buffer with SHA256 hash and then call Finish().

Since there are also crashes with a similar signature from different components, I guess this probably is not a SafeBrowsing bug.

I checked minidumps from different components, as mentioned in [Comment 2](/show_bug.cgi?id=1508776#c2 "RESOLVED FIXED - UAF in sftk_FreeSession due to improper refcounting"), it looks like the pointer used in |sftk\_FreeSession| is corrupt.

I am not familiar with NSS stuff, so I'll need some help.

Hi J.C.

Do you know who might be able to help on this bug? Thanks!

Flags: needinfo?(jjones)

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1508776#c9)â€¢ 6 years ago |
|  | |

That's pretty much me. I'll get started on this as soon as I can, no later than Monday the 18th, and update the bug. (Leaving the NI intact)

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1508776#c10)â€¢ 6 years ago |
|  | |

I was a week late here due to coming down very ill. I've begun looking into this today. So far it appears to be a race condition, but I haven't yet nailed it down.

Flags: needinfo?(jjones)

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1508776#c11)â€¢ 6 years ago |
|  | |

So I still don't have a solid lead on this, but it's clearly an NSS race condition, so let's start by moving components.

I'm pretty confident this is not going to be remotely exploitable. We can *probably* lower this to a sec-moderate, as I don't see how to trigger this, nor in a way to prompt useful corruption.

The stacks indicate this is a crash from a double-free on a given `SFTKSession`, which would be a ref-miscount in `sftk_FreeSession`, probably caused by a race on the refCount during destruction itself.

`SFTKSession` intends to be a smart-pointer with a handy thread-safety lock, but since it cannot track its own state, upon deletion,

further uses of itself are bogus and will be uncaught. So it's a smart-pointer that can't be relied upon to fail-safe once it is

deallocated. Hurray.

Because of how this works, methods like sftk\_SessionFromHandle find the session for a given handle, but as far as I can tell right now, the handle can long outlive the session. Destroying the session doesn't remove it from the handle. Perhaps that's the simplest remediation.

[Marking wontfix for 66, affecting 67 (though we haven't seen a crash yet, it's rare), and I don't think this is a regression.]

Assignee: dlee â†’ jjonesGroup: core-security-release â†’ crypto-core-securitySeverity: critical â†’ normal
[status-firefox66](/buglist.cgi?f1=cf_status_firefox66&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox66&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox66&o1=equals&v1=wontfix)
[status-firefox67](/buglist.cgi?f1=cf_status_firefox67&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=affected)Component: Safe Browsing â†’ LibrariesKeywords: [regression](/buglist.cgi?keywords=regression&resolution=---)OS: Windows 10 â†’ WindowsProduct: Toolkit â†’ NSSQA Contact: jjonesSummary: Crash in sftk\_FreeSession â†’ Mutex collision in sftk\_FreeSessionVersion: Trunk â†’ other

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1508776#c12)â€¢ 6 years ago |
|  | |

My summary update was improper; much earlier I thought this was a mutex collision, but it's actually a UAF from improper refcounting. Specifically, that once the refcount indicates we can destroy the object, we destroy the refcount, causing future accesses to be invalid.

The most obvious options here are:

1. as mentioned in [comment 11](/show_bug.cgi?id=1508776#c11 "RESOLVED FIXED - UAF in sftk_FreeSession due to improper refcounting"), to return result from sftk\_FreeSession that obligates callers to zero their session pointers.
2. add sentinel values
3. build an indirection type that can be more like a real smart pointer; this is likely very hard for this type
Summary: Mutex collision in sftk\_FreeSession â†’ UAF in sftk\_FreeSession due to improper refcounting

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a21167301_520206)â€¢ 5 years ago |

See Also: â†’ [1433571](/show_bug.cgi?id=1433571 "RESOLVED WORKSFORME - Crash in memset | sftk_DestroySessionObjectData")

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a22454226_520206)â€¢ 5 years ago |

See Also: â†’ [1572164](/show_bug.cgi?id=1572164 "RESOLVED FIXED - Use-after-Free in NSC_WrapKey")

|  | [Liz Henry (:lizzard) (relman/hg->git project)](/user_profile?user_id=451704) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1508776#c13)â€¢ 5 years ago |
|  | |

Is this still something you may work on? Or, that we might find more help to investigate further?

I'm going through some untouched-for-a-while sec-high issues to make sure we've investigated all we can before marking them stalled.

Flags: needinfo?(jjones)

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1508776#c14)â€¢ 5 years ago |
|  | |

kjacobs and I spent another 8 hours or so (each) on this in August. This bug is a perfect example of why even clever C is dangerous.

Where we left off is that we're going to need to build something to help us find this bug. And this is not the only UAF caused by this improper refcounting in NSS, so it'd be nice to get the whole class of bugs fixed.

I don't know if we should mark this stalled or not. When I have time to work on NSS again, I intend to return to working on this bug.

Flags: needinfo?(jjones)

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1508776#c15)â€¢ 5 years ago |
|  | |

Attached file
[Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs](attachment.cgi?id=9095024)
â€” [Details](attachment.cgi?id=9095024&action=edit)

`sftk_SessionFromHandle` reads SFTKSession objects from the slot, and it's

possible that during slot session closure/shutdown that a given session may have

already had its refcount subtracted. In that case, just don't return the

session.

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1508776#c16)â€¢ 5 years ago |
|  | |

Every instance of `sftk_FreeSession` is correctly guarded to ensure it is never passed a null pointer, which further implicates that the whole structure has been freed or in some other way clobbered before the crash. So the actual crashing code is probably one of these two lines:

```
    PZLock *lock = SFTK_SESSION_LOCK(slot, session->handle);

    PZ_Lock(lock);

```

And it's probably `SFTK_SESSION_LOCK`, since as a macro would put `sfk_FreeSession` be the top of the crashing stack frames, which it is. Which would mean that `(session->)slot` or `slot->sessionLock` are null. Since `session` isn't null, that implies its contents are no longer consistent.

This is all to say, my initial analysis seems accurate - `sftk_FreeSession` is being passed a non-null session that has already been deallocated, but it can't tell because upon deallocation the memory can be overwritten. (There could be wider heap corruption, too, but this seems more likely.)

In practically all cases, `sftk_FreeSession` is being passed a session from `sftk_SessionFromHandle` which is getting it from the slot via `sftk_SlotFromSessionHandle`.

The only way to remove a session from the slot is [NSC\_CloseSession](https://searchfox.org/mozilla-central/source/security/nss/lib/softoken/pkcs11.c#4046), which is called indirectly via `pk11_CloseSession`. If the refcounting works correctly, it's not possible to have a deallocated session until `pk11_CloseSession` is called, as the slot holds a reference effectively itself, complete with an assertion in `NSC_CloseSession`.

There are locks on the refcounts, and PR\_Lock is used to enforce the critical sections. The locks are weird, in that they use a hash function to assign multiple sessions to a single lock, but they are consistent in the practice, so that's probably not the issue.

It is notable however that the lock belongs to the *slot*, not the session, yet we [exit the critical section](https://searchfox.org/nss/source/lib/softoken/pkcs11u.c#1909) before destroying the session, which could be a race condition, but one which is still depending on some kind of refcount error elsewhere.

My only reasonable-level suggestion here is to check the session refcount in [sftk\_SessionFromHandle](https://searchfox.org/mozilla-central/source/security/nss/lib/softoken/pkcs11u.c#1876) and return `NULL` if it's zero, which is patch D47010. This will need some testing.

|  | [Martin Thomson [:mt:]](/user_profile?user_id=438654) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1508776#c17)â€¢ 5 years ago â€¢ [Edited](/page.cgi?id=comment-revisions.html&bug_id=1508776&comment_id=14382184 "1 revision") |
|  | |

Eek. I don't like seeing refcounted objects that are accessible when their refcount is zero. That's a violation of an important invariant.

This is really hard to think through. I'm not sure that my sequence of events here is right either, but I don't think that this change addresses the core problem.

Looking at `NSC_CloseSession`, say that two threads attempt to call that `NSC_CloseSession` at the same time. Both could pull a valid pointer from sftk\_SessionFromHandle if the two calls happen at around same time. The lock is released several times in this process. I think that the lock is consistent in covering both the `refCount` and the reference to the session from the slot, but the interaction of the two could be a problem.

Assuming that refCount == 1 to start, this looks like a problematic sequence of events. The order of the first two steps doesn't matter.

```
A: sftk_SessionFromHandle => refCount++
B: sftk_SessionFromHandle => refCount++
A: sftkqueue_delete and refCount--
B: skip the delete block because the session is no longer attached to the slot
B: sftk_FreeSession => refCount--
B: refCount was reduced to 1, call free()
A: sftk_FreeSession => UAF on sftk_SlotFromSession as it attempts to read session->slot

```

All of those steps, aside from the last two, are independently covered by the lock. The scary part is that covering the free() with the lock wouldn't help. The point is that A is holding a reference to an object that has been freed.

The problem is that there is an interaction between reference counting and the ownership here. Given that this object is pinned to the slot and only freed on shutdown, I have a more dramatic simplification to suggest: remove the reference count entirely. Then use the lock to govern its insertion and removal to and from the slot. Only delete the object if it was removed from the slot.

That doesn't address the problem of sessions that are in active use during shutdown. Notice that `NSC_CloseSession` doesn't assert that the reference count is 1, it asserts that it is greater than zero, which suggests that this code might not be careful enough about tracking outstanding uses before hitting the shutdown code. Changing that assertion to be a ==1 and running tests would be illuminating. Other than that check, I would advocate for dumping the reference count entirely.

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1508776#c18)â€¢ 5 years ago |
|  | |

Thank you for the further analysis, Martin - running a concrete example is, to use your words, illuminating.

Your hypothesis that asserting `refcount==1` after the `sftkqueue_delete` in `NSC_CloseSession` seems to work fine in NSS ASAN builds on MacOS. I'm currently testing webcrypto tests in m-c and working on a patch to try removing the refcount entirely.

That said, these kind of fixes we'd probably want to bury in a big try-push against mozilla-central to fully evaluate on all platforms.

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a26709287_600971)â€¢ 5 years ago |

[Attachment #9095024](/attachment.cgi?id=9095024&action=edit "Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs") -
Attachment description: Bug 1508776 - Catch corner case for sftksession objects r?mt,kjacobs â†’ Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1508776#c19)â€¢ 5 years ago |
|  | |

Attached file
[Bug 1577822 - land NSS e022f47937ca UPGRADE\_NSS\_RELEASE](attachment.cgi?id=9095363) (obsolete)
â€” [Details](attachment.cgi?id=9095363&action=edit)

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a26709490_600971)â€¢ 5 years ago |

[Attachment #9095363](/attachment.cgi?id=9095363&action=edit "Bug 1577822 - land NSS e022f47937ca UPGRADE_NSS_RELEASE") -
Attachment description: Bug 1508776 - land NSS e022f47937ca UPGRADE\_NSS\_RELEASE â†’ Bug 1577822 - land NSS e022f47937ca UPGRADE\_NSS\_RELEASE

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1508776#c20)â€¢ 5 years ago |
|  | |

D47184 is a mozilla-central uplift with a collection of NSS changes *and* the patch from D47010. I do not intend to land D47184, but am planning to run a full all/all try run against mozilla-central using it, once we have some initial thoughts on the refcount removal patch.

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1508776#c21)â€¢ 5 years ago |
|  | |

I have an all-all try push running against mozilla-central ( <https://treeherder.mozilla.org/#/jobs?repo=try&revision=8fc5474b750a6225b5b10b7608d67c1ddbe85ea8&selectedJob=268655312> ) and it has only one semi-suspicious crash, with retriggers in-progress. Overall, this change looks like it works for Firefox.

The nature of the change - particularly to PKCS11\_CloseAllSessions - is that consumers of NSS that do a lot of module unloading are going to be most likely to run into any issues from this change. That would be users unplugging smart cards, most likely.

I'll see if I can dig some up for testing.

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1508776#c22)â€¢ 5 years ago |
|  | |

Comment on [attachment 9095024](/attachment.cgi?id=9095024 "Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs") [[details]](/attachment.cgi?id=9095024&action=edit "Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs")

[Bug 1508776](/show_bug.cgi?id=1508776 "RESOLVED FIXED - UAF in sftk_FreeSession due to improper refcounting") - Remove unneeded refcounting from SFTKSession r?mt,kjacobs

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: Not easily. This might be impossible to trigger.
* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: Unknown
* **Which older supported branches are affected by this flaw?**: All
* **If not all supported branches, which bug introduced the flaw?**: None
* **Do you have backports for the affected branches?**: Yes
* **If not, how different, hard to create, and risky will they be?**: This would be easy to add to the NSS uplifts, but three days of testing in nightly might not be enough. Still, I don't know how this could be triggered (except at shutdown or by removing a smart card repeatedly), so I think maybe it could land in nightly and uplift later...maybe?
* **How likely is this patch to cause regressions; how much testing does it need?**: It's unlikely to cause problems for the majority of Firefox users, but those using smart cards could see random issues. We're going to need some testing to feel confident in it before going to a wide audience.
[Attachment #9095024](/attachment.cgi?id=9095024&action=edit "Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1508776#c23)â€¢ 5 years ago |
|  | |

Comment on [attachment 9095024](/attachment.cgi?id=9095024 "Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs") [[details]](/attachment.cgi?id=9095024&action=edit "Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs")

[Bug 1508776](/show_bug.cgi?id=1508776 "RESOLVED FIXED - UAF in sftk_FreeSession due to improper refcounting") - Remove unneeded refcounting from SFTKSession r?mt,kjacobs

sec-approval+ for mozilla-central.

[Attachment #9095024](/attachment.cgi?id=9095024&action=edit "Bug 1508776 - Remove unneeded refcounting from SFTKSession r?mt,kjacobs") -
Flags: sec-approval? â†’ sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a26875140_280903)â€¢ 5 years ago |

[status-firefox67](/buglist.cgi?f1=cf_status_firefox67&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox67&o1=equals&v1=wontfix)
[status-firefox69](/buglist.cgi?f1=cf_status_firefox69&o1=isnotempty):
--- â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox69&o1=equals&v1=wontfix)
[status-firefox70](/buglist.cgi?f1=cf_status_firefox70&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox70&o1=equals&v1=affected)
[status-firefox71](/buglist.cgi?f1=cf_status_firefox71&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox71&o1=equals&v1=affected)
[status-firefox-esr60](/buglist.cgi?f1=cf_status_firefox_esr60&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox_esr60&o1=equals&v1=wontfix)
[status-firefox-esr68](/buglist.cgi?f1=cf_status_firefox_esr68&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox_esr68&o1=equals&v1=affected)
[tracking-firefox70](/buglist.cgi?f1=cf_tracking_firefox70&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox70&o1=equals&v1=%2B)
[tracking-firefox71](/buglist.cgi?f1=cf_tracking_firefox71&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox71&o1=equals&v1=%2B)
[tracking-firefox-esr68](/buglist.cgi?f1=cf_tracking_firefox_esr68&o1=isnotempty):
--- â†’ [70+](/buglist.cgi?f1=cf_tracking_firefox_esr68&o1=equals&v1=70%2B)

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a26877256_520206)â€¢ 5 years ago |

Blocks: [1566873](/show_bug.cgi?id=1566873 "RESOLVED FIXED - Upgrade Firefox ESR 68 to use NSS 3.44.2")

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a26877324_600971)â€¢ 5 years ago |

[Attachment #9095363](/attachment.cgi?id=9095363&action=edit "Bug 1577822 - land NSS e022f47937ca UPGRADE_NSS_RELEASE") -
Attachment is obsolete: true

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1508776#c24)â€¢ 5 years ago |
|  | |

<https://hg.mozilla.org/projects/nss/rev/5619cbbca3db5f583a888181ec024069a46087aa>

Status: ASSIGNED â†’ RESOLVEDClosed: 5 years agoResolution: --- â†’ FIXEDTarget Milestone: --- â†’ 3.47

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1508776#c25)â€¢ 5 years ago |
|  | |

I feel this bug is too risky to uplift into ESR or even probably Beta, and while it's a wildptr, there's no known exploit path. I'd like to *not* uplift this, and let it instead ride the trains.

Tom, would that be you now to give a blessing thus?

Flags: needinfo?(tom)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1508776#c26)â€¢ 5 years ago |
|  | |

I think so; that plan sounds ok to me.

Flags: needinfo?(tom)

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1508776#c27)â€¢ 5 years ago |
|  | |

Thanks, Tom.

No longer blocks: [1566873](/show_bug.cgi?id=1566873 "RESOLVED FIXED - Upgrade Firefox ESR 68 to use NSS 3.44.2")

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a27214863_520206)â€¢ 5 years ago |

[status-firefox70](/buglist.cgi?f1=cf_status_firefox70&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox70&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox70&o1=equals&v1=wontfix)
[status-firefox-esr68](/buglist.cgi?f1=cf_status_firefox_esr68&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr68&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox_esr68&o1=equals&v1=wontfix)

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1508776#c28)â€¢ 5 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/32eea6049fe700ff689a5bd7d11abe249ec0c610>

[status-firefox71](/buglist.cgi?f1=cf_status_firefox71&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox71&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox71&o1=equals&v1=fixed)
[tracking-firefox-esr68](/buglist.cgi?f1=cf_tracking_firefox_esr68&o1=isnotempty):
[70+](/buglist.cgi?f1=cf_tracking_firefox_esr68&o1=equals&v1=70%2B) â†’ ---

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a27478999_1689)â€¢ 5 years ago |

Group: crypto-core-security â†’ core-security-release

|  | [Brindusa Tot, Desktop QA](/user_profile?user_id=553429) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a28058378_553429)â€¢ 5 years ago |

Flags: qe-verify-Whiteboard: [post-critsmash-triage]

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1508776#c29)â€¢ 5 years ago |
|  | |

Can you assign a CVE to this, Tom? Thanks.

Flags: needinfo?(tom)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a28679490_578488)â€¢ 5 years ago |

Alias: CVE-2019-11756Flags: needinfo?(tom)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a32051091_578488)â€¢ 5 years ago |

Whiteboard: [post-critsmash-triage] â†’ [post-critsmash-triage][adv-main71+]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1508776#c30)â€¢ 5 years ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9111774)
â€” [Details](attachment.cgi?id=9111774&action=edit)

|  | [Huzaifa Sidhpurwala](/user_profile?user_id=331752) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1508776#c31)â€¢ 5 years ago |
|  | |

Since this flaw is already mentioned in the release notes at:

<https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.47_release_notes>

Can we please make this bug public?

Flags: needinfo?(jjones)

|  | [Mark Straver](/user_profile?user_id=364942) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1508776#c32)â€¢ 5 years ago |
|  | |

Please do not rush making these bugs open to the public. We are still in the process of adjusting our code.

|  | [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1508776#c33)â€¢ 5 years ago |
|  | |

Marking security bugs as public is the responsibility of the security management team. Overall we are generally more conservative for NSS, and more conservative still for sec-high bugs, but the marking-public operation is done in bulk periodically based on bugqueries.

It there a specific reason you need this sec-high disclosed early, Huzaifa? The description of removing the locks is much less useful than the descriptions in this bug and within the patch for generating a PoC. The early opening would need to be justified to Tom Ritter, not me.

Flags: needinfo?(jjones) â†’ needinfo?(huzaifas)

|  | [Huzaifa Sidhpurwala](/user_profile?user_id=331752) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1508776#c34)â€¢ 5 years ago |
|  | |

(In reply to J.C. Jones [:jcj] (he/him) from [comment #33](/show_bug.cgi?id=1508776#c33 "RESOLVED FIXED - UAF in sftk_FreeSession due to improper refcounting"))

> Marking security bugs as public is the responsibility of the security management team. Overall we are generally more conservative for NSS, and more conservative still for sec-high bugs, but the marking-public operation is done in bulk periodically based on bugqueries.
>
> It there a specific reason you need this sec-high disclosed early, Huzaifa? The description of removing the locks is much less useful than the descriptions in this bug and within the patch for generating a PoC. The early opening would need to be justified to Tom Ritter, not me.

Making the summary and the patch known while keeping the bug private just seems odd to me and hence the request. fwiw this bug is already disclosed via the patch and the entry in the release notes

Flags: needinfo?(huzaifas)

|  | [Mark Straver](/user_profile?user_id=364942) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1508776#c35)â€¢ 5 years ago |
|  | |

(In reply to Huzaifa Sidhpurwala from [comment #34](/show_bug.cgi?id=1508776#c34 "RESOLVED FIXED - UAF in sftk_FreeSession due to improper refcounting"))

> Making the summary and the patch known while keeping the bug private just seems odd to me and hence the request. fwiw this bug is already disclosed via the patch and the entry in the release notes

Ah, but there is a distinct difference between having a summary (describing the generics of the bug) and code patch (for which efforts are made to not paint a bulls-eye on the vulnerability) public, and disclosing a bug that generally has a ready proof-of-concept and detailed discussion of the vulnerability and an analysis of exactly why it occurs.

From the former, it's extremely difficult to come to a way to exploit a vulnerability. From the latter, it'll be relatively (very) easy. This is also why tests, that expose a way to trigger the problem (similar to a PoC) tend to be landed (much) later than the patches for the problem.

While you are right that having the patch public might make it obvious where the problem lies, it won't hand anything on a silver platter; but it's required for Open Source development -- so this is the best compromise.

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1508776#c36)â€¢ 5 years ago |
|  | |

Removing employee no longer with company from CC list of private bugs.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1508776#a65595343_1689)â€¢ 4 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1508776&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [J.C. Jones [:jcj] (he/they)](/user_profile?user_id=520206)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from wiki.mozilla.org_73f8d6fa_20250121_031828.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")â€Ž | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)


