=== Content from github.com_f6ef20a7_20250121_001448.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcanonical%2Fsnapd%2Fpull%2F6642)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcanonical%2Fsnapd%2Fpull%2F6642)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=canonical%2Fsnapd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[canonical](/canonical)
/
**[snapd](/canonical/snapd)**
Public

* [Notifications](/login?return_to=%2Fcanonical%2Fsnapd) You must be signed in to change notification settings
* [Fork
  594](/login?return_to=%2Fcanonical%2Fsnapd)
* [Star
   1.9k](/login?return_to=%2Fcanonical%2Fsnapd)

* [Code](/canonical/snapd)
* [Pull requests
  147](/canonical/snapd/pulls)
* [Actions](/canonical/snapd/actions)
* [Projects
  0](/canonical/snapd/projects)
* [Wiki](/canonical/snapd/wiki)
* [Security](/canonical/snapd/security)
* [Insights](/canonical/snapd/pulse)

Additional navigation options

* [Code](/canonical/snapd)
* [Pull requests](/canonical/snapd/pulls)
* [Actions](/canonical/snapd/actions)
* [Projects](/canonical/snapd/projects)
* [Wiki](/canonical/snapd/wiki)
* [Security](/canonical/snapd/security)
* [Insights](/canonical/snapd/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fcanonical%2Fsnapd%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fcanonical%2Fsnapd%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# cmd/snap-confine: prevent cwd restore permission bypass #6642

 Merged

[zyga](/zyga)
merged 30 commits into
[canonical:master](/canonical/snapd/tree/master "canonical/snapd:master")
from
[zyga:fix/suse-audit-2](/zyga/snapd/tree/fix/suse-audit-2 "zyga/snapd:fix/suse-audit-2")

Apr 10, 2019

 Merged

# [cmd/snap-confine: prevent cwd restore permission bypass](#top) #6642

[zyga](/zyga)
merged 30 commits into
[canonical:master](/canonical/snapd/tree/master "canonical/snapd:master")
from
[zyga:fix/suse-audit-2](/zyga/snapd/tree/fix/suse-audit-2 "zyga/snapd:fix/suse-audit-2")

Apr 10, 2019

[Conversation
79](/canonical/snapd/pull/6642)
[Commits
30](/canonical/snapd/pull/6642/commits)
[Checks
0](/canonical/snapd/pull/6642/checks)
[Files changed](/canonical/snapd/pull/6642/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![zyga](https://avatars.githubusercontent.com/u/784262?s=60&v=4)](/zyga)

Copy link

Contributor

### @zyga **[zyga](/zyga)** commented [Mar 22, 2019](#issue-424374006) • edited Loading

It was brought to our attention that specially crafted current working

directory can be used to bypass permissions checks on a multi-user

system. The principal reason for that was that snap-confine, during the

course of execution, changes the current working directory, either

explicitly or implicitly (e.g. via setns) and then tries to restore the

original working directory while executing with root privileges.

The recently introduced central handling of umask is now extended to

handle current working directory. The code replaces individual

implementation in several other places in the codebase.

The new implementation is better than the original in two ways. First

of all, it works based on a different principle which is discussed

below. Second of all, it runs late, after the original user and group

IDs have been restored (that is, it no longer runs as privileged user).

The new method has one of three possible outcomes:

1. The original working directory cannot be represented in the execution

   environment. The process is moved to /var/lib/snapd/void
2. The original working directory can be represented in the execution

   environment but it now points to a different inode. The new inode is

   used and a filesystem permission check is performed by the kernel.
3. The original working directory can be represented in the execution

   environment and points to the same inode. The same inode is used.

Two tests were affected by this change as they were running commands

inside a LXD container as the root user, with the initial working

directory set to /root, then using su to switch to the ubuntu user.

Those commands were changed to go to /home/ubuntu instead.

To show this all in operation I've added a new test that verifies each

of the variant cases.

Signed-off-by: Zygmunt Krynicki zygmunt.krynicki@canonical.com

Related-To: <https://bugzilla.suse.com/show_bug.cgi?id=1127368>

Sorry, something went wrong.

All reactions

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: prevent cwd restore permission bypass](/canonical/snapd/pull/6642/commits/2fcfef27095e4d63ccf9692c6a7de96e37a3838c "cmd/snap-confine: prevent cwd restore permission bypass

It was brought to our attention that specially crafted current working
directory can be used to bypass permissions checks on a multi-user
system. The principal reason for that was that snap-confine, during the
course of execution, changes the current working directory, either
explicitly or implicitly (e.g. via setns) and then tries to restore the
original working directory while executing with root privileges.

The recently introduced central handling of umask is now extended to
handle current working directory. The code replaces individual
implementation in several other places in the codebase.

The new implementation is better than the original in two ways.  First
of all, it works based on a different principle which is discussed
below. Second of all, it runs late, after the original user and group
IDs have been restored (that is, it no longer runs as privileged user).

The new method has one of three possible outcomes:

1) The original working directory cannot be represented in the execution
environment. The process is moved to /var/lib/snapd/void

2) The original working directory can be represented in the execution
environment but it now points to a different inode. The new inode is
used and a filesystem permission check is performed by the kernel.

3) The original working directory can be represented in the execution
environment and points to the same inode. The same inode is used.

Two tests were affected by this change as they were running commands
inside a LXD container as the root user, with the initial working
directory set to /root, then using su to switch to the ubuntu user.
Those commands were changed to go to /home/ubuntu instead.

To show this all in operation I've added a new test that verifies each
of the variant cases.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[2fcfef2](/canonical/snapd/pull/6642/commits/2fcfef27095e4d63ccf9692c6a7de96e37a3838c)`

```
It was brought to our attention that specially crafted current working
directory can be used to bypass permissions checks on a multi-user
system. The principal reason for that was that snap-confine, during the
course of execution, changes the current working directory, either
explicitly or implicitly (e.g. via setns) and then tries to restore the
original working directory while executing with root privileges.

The recently introduced central handling of umask is now extended to
handle current working directory. The code replaces individual
implementation in several other places in the codebase.

The new implementation is better than the original in two ways.  First
of all, it works based on a different principle which is discussed
below. Second of all, it runs late, after the original user and group
IDs have been restored (that is, it no longer runs as privileged user).

The new method has one of three possible outcomes:

1) The original working directory cannot be represented in the execution
environment. The process is moved to /var/lib/snapd/void

2) The original working directory can be represented in the execution
environment but it now points to a different inode. The new inode is
used and a filesystem permission check is performed by the kernel.

3) The original working directory can be represented in the execution
environment and points to the same inode. The same inode is used.

Two tests were affected by this change as they were running commands
inside a LXD container as the root user, with the initial working
directory set to /root, then using su to switch to the ubuntu user.
Those commands were changed to go to /home/ubuntu instead.

To show this all in operation I've added a new test that verifies each
of the variant cases.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Mar 22, 2019](#issuecomment-475757591) • edited Loading

| This branch is stacked on top of [#6636](https://github.com/canonical/snapd/pull/6636) The principal new commit is [2fcfef2](https://github.com/canonical/snapd/commit/2fcfef27095e4d63ccf9692c6a7de96e37a3838c) -- please review that |
| --- |

All reactions

Sorry, something went wrong.

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)
[zyga](/zyga)
mentioned this pull request
[Mar 24, 2019](#ref-pullrequest-423837667)

[cmd: prevent umask from breaking snap-run chain
#6636](/canonical/snapd/pull/6636)
 Merged

 [![@pedronis](https://avatars.githubusercontent.com/u/975757?s=40&v=4)](/pedronis)
[pedronis](/pedronis)
self-requested a review
[March 25, 2019 09:01](#event-2225826470)

[![bboozzoo](https://avatars.githubusercontent.com/u/41870?s=60&v=4)](/bboozzoo)

**[bboozzoo](/bboozzoo)**
reviewed
[Mar 25, 2019](#pullrequestreview-218216392)

 [View reviewed changes](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c)

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)

|  |  | if (nread == sizeof orig\_cwd) { |
| --- | --- | --- |
|  |  | die("cannot fit symbolic link target %s", fd\_path); |
|  |  | } |
|  |  |  |

Copy link

Contributor

### @bboozzoo **[bboozzoo](/bboozzoo)** [Mar 25, 2019](#discussion_r268555291)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

For the sake of debugging, I'd add:

```
debug("original cwd in parent namespace: %s", orig_cwd);

```

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @zyga **[zyga](/zyga)** [Mar 25, 2019](#discussion_r268654492)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

We cannot do that, that string is not terminated.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @bboozzoo **[bboozzoo](/bboozzoo)** [Mar 25, 2019](#discussion_r268655105)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I meant adding it below:

```
	if (nread == sizeof orig_cwd) {
		die("cannot fit symbolic link target %s", fd_path);
	}
	debug("original cwd in parent namespace: %s", orig_cwd);

```

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @zyga **[zyga](/zyga)** [Mar 25, 2019](#discussion_r268734144)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Ah, but that is logged in several cases below?

Sorry, something went wrong.

 👍
1
 bboozzoo reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

 [zyga](/zyga)
added 4 commits
[March 25, 2019 17:57](#commits-pushed-4128481)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[Merge branch 'fix/suse-audit-5' into fix/suse-audit-2](/canonical/snapd/pull/6642/commits/4128481f061a247f2645714cea7421c7e114bbfb "Merge branch 'fix/suse-audit-5' into fix/suse-audit-2")`

`[4128481](/canonical/snapd/pull/6642/commits/4128481f061a247f2645714cea7421c7e114bbfb)`

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[Merge branch 'fix/suse-audit-5' into fix/suse-audit-2](/canonical/snapd/pull/6642/commits/29397b72ef48ce373b9e4bf56f441e57a33673a7 "Merge branch 'fix/suse-audit-5' into fix/suse-audit-2")`

`[29397b7](/canonical/snapd/pull/6642/commits/29397b72ef48ce373b9e4bf56f441e57a33673a7)`

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: add missing fd subdirectory](/canonical/snapd/pull/6642/commits/ce983c2162370b42b872e3827adae4a1983b67da "cmd/snap-confine: add missing fd subdirectory

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[ce983c2](/canonical/snapd/pull/6642/commits/ce983c2162370b42b872e3827adae4a1983b67da)`

```
Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: fix typo "than"](/canonical/snapd/pull/6642/commits/d6ec606a14ad910f030390fdc17bbf1890c4d2a7 "cmd/snap-confine: fix typo \"than\"

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[d6ec606](/canonical/snapd/pull/6642/commits/d6ec606a14ad910f030390fdc17bbf1890c4d2a7)`

```
Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

[![jdstrand](https://avatars.githubusercontent.com/u/1663079?s=60&v=4)](/jdstrand)

**[jdstrand](/jdstrand)**
suggested changes
[Mar 25, 2019](#pullrequestreview-218419030)

 [View reviewed changes](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c)

Copy link

### @jdstrand **[jdstrand](/jdstrand)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks for your work on this. Comments inline :)

Sorry, something went wrong.

All reactions

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/2fcfef27095e4d63ccf9692c6a7de96e37a3838c#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/d6ec606a14ad910f030390fdc17bbf1890c4d2a7#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

[tests/main/lxd/task.yaml](/canonical/snapd/pull/6642/files/d6ec606a14ad910f030390fdc17bbf1890c4d2a7#diff-8ff8452bf0fc853442df5260531c89715849053c8aa30f4eb4332304353f5fc9)
Outdated

Show resolved

Hide resolved

[tests/regression/lp-1815869/task.yaml](/canonical/snapd/pull/6642/files/d6ec606a14ad910f030390fdc17bbf1890c4d2a7#diff-aaf3930eeb483edd37a2b2e38430f49d2e83a523802ad83d7bfb741b07b565e8)
Outdated

Show resolved

Hide resolved

 [zyga](/zyga)
added 10 commits
[March 25, 2019 21:15](#commits-pushed-6a35141)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[Merge branch 'master' into fix/suse-audit-2](/canonical/snapd/pull/6642/commits/6a351414625592f7b185bcf5aef260104ce243aa "Merge branch 'master' into fix/suse-audit-2")`

`[6a35141](/canonical/snapd/pull/6642/commits/6a351414625592f7b185bcf5aef260104ce243aa)`

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: use O_DIRECTORY for opening cwd](/canonical/snapd/pull/6642/commits/9f5503159a04df1f9e23a290d58a38e9f6993b2a "cmd/snap-confine: use O_DIRECTORY for opening cwd

We use O_PATH so it doesn't matter much but we can be stricter by
passing O_DIRECTORY when we open with the current working directory.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[9f55031](/canonical/snapd/pull/6642/commits/9f5503159a04df1f9e23a290d58a38e9f6993b2a)`

```
We use O_PATH so it doesn't matter much but we can be stricter by
passing O_DIRECTORY when we open with the current working directory.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: reword paragraph entry](/canonical/snapd/pull/6642/commits/692005279dbd4bb5ac87eaa741442f83cd4576a2 "cmd/snap-confine: reword paragraph entry

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[6920052](/canonical/snapd/pull/6642/commits/692005279dbd4bb5ac87eaa741442f83cd4576a2)`

```
Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: remove redundant paragraph](/canonical/snapd/pull/6642/commits/2336a77d1f920f1b02766ec5cde483dadd43dd77 "cmd/snap-confine: remove redundant paragraph

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[2336a77](/canonical/snapd/pull/6642/commits/2336a77d1f920f1b02766ec5cde483dadd43dd77)`

```
Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: use definite article for the void dir](/canonical/snapd/pull/6642/commits/0fe657153ebfc709985a9cca2d27dc83bcf9c44d "cmd/snap-confine: use definite article for the void dir

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[0fe6571](/canonical/snapd/pull/6642/commits/0fe657153ebfc709985a9cca2d27dc83bcf9c44d)`

```
Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: start cwd in outer namespace](/canonical/snapd/pull/6642/commits/5ce302e36170897ee16fd9898a9d7a7cf020e05c "cmd/snap-confine: start cwd in outer namespace

Inspect the current working directory in the initial mount namespace.
While this doesn't change anything it is more natural and more resilient
to breakage in case kernel changes semantics of fstatfs invoked across
unshare/setns.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[5ce302e](/canonical/snapd/pull/6642/commits/5ce302e36170897ee16fd9898a9d7a7cf020e05c)`

```
Inspect the current working directory in the initial mount namespace.
While this doesn't change anything it is more natural and more resilient
to breakage in case kernel changes semantics of fstatfs invoked across
unshare/setns.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: always use fchdir + inner_cwd_fd](/canonical/snapd/pull/6642/commits/a9da76613c926181b8bd6d5885c147bc8ebb62a7 "cmd/snap-confine: always use fchdir + inner_cwd_fd

When originally implementing the first patch in this series I was
considering using the file descriptor for the current working directory
in the original mount namespace so I wanted to differentiate the cases
where the inode it points to now and before is different from that when
they are the same.

Over time I realised that I cannot use fchdir with the original
descriptor and implemented separate cases for fchdir + chdir but in
doing so I didn't realise that fchdir and chdir are equivalent here
because the path descriptor used is from the per-snap mount namespace
and that it is opened just moments before calling fchdir.

As such the whole fragment can be reduced to unconditional fchdir with
the inode check serving just as UX differentiation.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[a9da766](/canonical/snapd/pull/6642/commits/a9da76613c926181b8bd6d5885c147bc8ebb62a7)`

```
When originally implementing the first patch in this series I was
considering using the file descriptor for the current working directory
in the original mount namespace so I wanted to differentiate the cases
where the inode it points to now and before is different from that when
they are the same.

Over time I realised that I cannot use fchdir with the original
descriptor and implemented separate cases for fchdir + chdir but in
doing so I didn't realise that fchdir and chdir are equivalent here
because the path descriptor used is from the per-snap mount namespace
and that it is opened just moments before calling fchdir.

As such the whole fragment can be reduced to unconditional fchdir with
the inode check serving just as UX differentiation.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: explicit ENOENT handling](/canonical/snapd/pull/6642/commits/7d631054c219b7f5b1a0c5f20be46e7b2f842390 "cmd/snap-confine: explicit ENOENT handling

Nothing is changed but it's clearer what is going on.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[7d63105](/canonical/snapd/pull/6642/commits/7d631054c219b7f5b1a0c5f20be46e7b2f842390)`

```
Nothing is changed but it's clearer what is going on.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: reindent new code](/canonical/snapd/pull/6642/commits/c373fa66f7ece3691f97701299e01519f84e5710 "cmd/snap-confine: reindent new code

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[c373fa6](/canonical/snapd/pull/6642/commits/c373fa66f7ece3691f97701299e01519f84e5710)`

```
Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: comment when changing state](/canonical/snapd/pull/6642/commits/47a5be8af00bc2375d21b48e522a8ba8f5655442 "cmd/snap-confine: comment when changing state

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[47a5be8](/canonical/snapd/pull/6642/commits/47a5be8af00bc2375d21b48e522a8ba8f5655442)`

```
Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Mar 26, 2019](#issuecomment-476490709)

| The new test is failing in the most interesting way:  ``` 2019-03-25 21:54:10 Error executing google:ubuntu-core-18-64:tests/main/pwd :  ----- ++ cd /root ++ test-snapd-sh -c pwd + test /root = /root ++ cd /root ++ test-snapd-sh -c 'stat -c %i .' ++ cd /root ++ stat -c %i . + test 7127 = 7127 ++ cd /tmp ++ test-snapd-sh -c pwd + test /tmp = /tmp ++ cd /tmp ++ test-snapd-sh -c 'stat -c %i .' ++ cd /tmp ++ stat -c %i . + test 22 '!=' 2 ++ mkdir -p /tmp/test ++ cd /tmp/test ++ test-snapd-sh -c pwd cannot move to fallback directory /var/lib/snapd/void: No such file or directory + test '' = /var/lib/snapd/void  ```  There's no void directory on core18! |
| --- |

All reactions

Sorry, something went wrong.

[![@bboozzoo](https://avatars.githubusercontent.com/u/41870?s=80&u=a5a8ff5a5b9e5766cde26fab1fedb5d70b9c29ad&v=4)](/bboozzoo)

Copy link

Contributor

### **[bboozzoo](/bboozzoo)** commented [Mar 26, 2019](#issuecomment-476499131)

| There's quite a difference in the contents of /var/lib/snapd between `core` and `core18`:  ``` $ tree /snap/core/current/var/lib/snapd  /snap/core/current/var/lib/snapd ├── apparmor │   └── snap-confine ├── auto-import ├── desktop ├── environment ├── firstboot ├── hostfs ├── lib │   ├── gl │   ├── gl32 │   ├── glvnd │   └── vulkan ├── snaps │   └── partial └── void  15 directories, 0 files $ tree /snap/core18/current/var/lib/snapd /snap/core18/current/var/lib/snapd ├── apparmor │   └── profiles └── hostfs  3 directories, 0 files  ``` |
| --- |

All reactions

Sorry, something went wrong.

 [zyga](/zyga)
added 2 commits
[March 26, 2019 13:17](#commits-pushed-9ba734a)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: move to void on permission errors](/canonical/snapd/pull/6642/commits/9ba734af6831d86247079df26eb79ff79ddd7450 "cmd/snap-confine: move to void on permission errors

When the invoking user has no permission to stay in a directory (e.g. a
symlink attack in /tmp or a su invocation from /root) then instead of
failing the whole command chain, move the invoked process to the void
directory.

The void directory is empty and has no permissions to do anything
inside. The set of affected tests were changed not to require a
directory change anymore. In addition the pwd test was expanded to cover
this specific situation.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[9ba734a](/canonical/snapd/pull/6642/commits/9ba734af6831d86247079df26eb79ff79ddd7450)`

```
When the invoking user has no permission to stay in a directory (e.g. a
symlink attack in /tmp or a su invocation from /root) then instead of
failing the whole command chain, move the invoked process to the void
directory.

The void directory is empty and has no permissions to do anything
inside. The set of affected tests were changed not to require a
directory change anymore. In addition the pwd test was expanded to cover
this specific situation.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[tests: remove trailing whitespace](/canonical/snapd/pull/6642/commits/70986134ae2d3b3bbbf45876c2c636bc90ab10af "tests: remove trailing whitespace

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[7098613](/canonical/snapd/pull/6642/commits/70986134ae2d3b3bbbf45876c2c636bc90ab10af)`

```
Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Mar 26, 2019](#issuecomment-476600330)

| I will make the required changes to core18 to make this test pass. |
| --- |

All reactions

Sorry, something went wrong.

 [![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)
[zyga](/zyga)
requested a review
from [jdstrand](/jdstrand)
[March 26, 2019 12:28](#event-2229511373)

[![jdstrand](https://avatars.githubusercontent.com/u/1663079?s=60&v=4)](/jdstrand)

**[jdstrand](/jdstrand)**
approved these changes
[Mar 26, 2019](#pullrequestreview-218873527)

 [View reviewed changes](/canonical/snapd/pull/6642/files/70986134ae2d3b3bbbf45876c2c636bc90ab10af)

Copy link

### @jdstrand **[jdstrand](/jdstrand)** left a comment • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks!

Sorry, something went wrong.

All reactions

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/70986134ae2d3b3bbbf45876c2c636bc90ab10af#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

|  |  | } |
| --- | --- | --- |
|  |  | if (inner\_cwd\_fd < 0) { |
|  |  | debug("cannot represent original working directory %s", orig\_cwd); |
|  |  | goto the\_void; |

Copy link

### @jdstrand **[jdstrand](/jdstrand)** [Mar 26, 2019](#discussion_r269088404)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Hehe :)

Sorry, something went wrong.

 ❤️
1
 zyga reacted with heart emoji

All reactions

* ❤️
  1 reaction

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/70986134ae2d3b3bbbf45876c2c636bc90ab10af#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)

Show resolved

Hide resolved

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/70986134ae2d3b3bbbf45876c2c636bc90ab10af#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

|  |  | } |
| --- | --- | --- |
|  |  | return; |
|  |  | the\_void: |
|  |  | if (chdir(sc\_void\_dir) < 0) { |

Copy link

### @jdstrand **[jdstrand](/jdstrand)** [Mar 26, 2019](#discussion_r269090694)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Of course, if you are root and not confined, then this could be raced, but unconfined root can just do that without the race, so not a problem.

Sorry, something went wrong.

 👍
1
 zyga reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[![pedronis](https://avatars.githubusercontent.com/u/975757?s=60&v=4)](/pedronis)

**[pedronis](/pedronis)**
approved these changes
[Mar 26, 2019](#pullrequestreview-219126996)

 [View reviewed changes](/canonical/snapd/pull/6642/files/70986134ae2d3b3bbbf45876c2c636bc90ab10af)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Mar 27, 2019](#issuecomment-477178864)

| I found some more issues here. I'm iterating on this now. |
| --- |

All reactions

Sorry, something went wrong.

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[packaging,tests: ensure that /var/lib/snapd/void is mode 111](/canonical/snapd/pull/6642/commits/758c968ced00023d98da61c457add8c04498781b "packaging,tests: ensure that /var/lib/snapd/void is mode 111

The void directory cannot be 000 anymore. When snap-confine chooses to
restore the orignal working directory inside the mount namespace it must
do so without abusing the root power it wields. As such it drops extra
permissions and moves to the desired directory as the invoking user.

This can fail for lack of permissions to access said directory. When
this happens, instead of aborting execution, snap-confine moves to the
special fallback directory, the void.

This raises the problem that it cannot access the void directory as
originally designed (with mode 000) so something must yield. We chose
to yield the permissions by changing them to 111, that is, anyone can
browse but nothing else.

The change is done across many layers of packaging and test preparation
but even that is insufficient. What we noticed is that the originally
desired permissions were not really applied.

I will separately address this in core and core18 so that the directory
exists and with correct permissions but for now this should unblock the
effort.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[758c968](/canonical/snapd/pull/6642/commits/758c968ced00023d98da61c457add8c04498781b)`

```
The void directory cannot be 000 anymore. When snap-confine chooses to
restore the orignal working directory inside the mount namespace it must
do so without abusing the root power it wields. As such it drops extra
permissions and moves to the desired directory as the invoking user.

This can fail for lack of permissions to access said directory. When
this happens, instead of aborting execution, snap-confine moves to the
special fallback directory, the void.

This raises the problem that it cannot access the void directory as
originally designed (with mode 000) so something must yield. We chose
to yield the permissions by changing them to 111, that is, anyone can
browse but nothing else.

The change is done across many layers of packaging and test preparation
but even that is insufficient. What we noticed is that the originally
desired permissions were not really applied.

I will separately address this in core and core18 so that the directory
exists and with correct permissions but for now this should unblock the
effort.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

5 hidden items

Load more…

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Mar 28, 2019](#issuecomment-477778513)

| This failed in an odd way I didn't see locally. It would imply that the user test has permissions to be in /root, which is unexpected. I will investigate tomorrow.  ``` ++ cd /root ++ su -c 'snap run test-snapd-sh -c pwd' test + test /root = /var/lib/snapd/void  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Apr 2, 2019](#issuecomment-478957693)

| I'm debugging this now. |
| --- |

All reactions

Sorry, something went wrong.

 [zyga](/zyga)
added 5 commits
[April 4, 2019 09:25](#commits-pushed-ddaf146)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[tests: rename pwd to cwd](/canonical/snapd/pull/6642/commits/ddaf14681f65358a303851596af1f91cb4d6db0b "tests: rename pwd to cwd

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[ddaf146](/canonical/snapd/pull/6642/commits/ddaf14681f65358a303851596af1f91cb4d6db0b)`

```
Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[tests: remove core18 workaround](/canonical/snapd/pull/6642/commits/773d1d86e6d07877395d5b4331ea03d0447585fa "tests: remove core18 workaround

The cwd test detected that core18 didn't ship the skeleton directory
structure required by snapd. Since that was fixed the corresponding
workaround can be now removed.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[773d1d8](/canonical/snapd/pull/6642/commits/773d1d86e6d07877395d5b4331ea03d0447585fa)`

```
The cwd test detected that core18 didn't ship the skeleton directory
structure required by snapd. Since that was fixed the corresponding
workaround can be now removed.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[tests: show permissions on failure](/canonical/snapd/pull/6642/commits/e82323d7ecabe60ec38ebc21c94be728edef0779 "tests: show permissions on failure

When the cwd test fails it can do so because of incorrect permissions in
the image. Adding a debug section will allow us to track down the
problem.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[e82323d](/canonical/snapd/pull/6642/commits/e82323d7ecabe60ec38ebc21c94be728edef0779)`

```
When the cwd test fails it can do so because of incorrect permissions in
the image. Adding a debug section will allow us to track down the
problem.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[Merge branch 'master' of github.com:snapcore/snapd into fix/suse-audit-2](/canonical/snapd/pull/6642/commits/803da8132b7b385ab70d5991daebabe6e2c2547b "Merge branch 'master' of github.com:snapcore/snapd into fix/suse-audit-2")`

`[803da81](/canonical/snapd/pull/6642/commits/803da8132b7b385ab70d5991daebabe6e2c2547b)`

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[tests: system-data/root should be 0755](/canonical/snapd/pull/6642/commits/07cd4fa0911006f2bbcc6c6bebf8f1470e093765 "tests: system-data/root should be 0755

The test setup was incorrectly creating an open-access /root directory
that is not representative of a real core or classic system. This patch
fixes that.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[07cd4fa](/canonical/snapd/pull/6642/commits/07cd4fa0911006f2bbcc6c6bebf8f1470e093765)`

```
The test setup was incorrectly creating an open-access /root directory
that is not representative of a real core or classic system. This patch
fixes that.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Apr 4, 2019](#issuecomment-479819754)

| This should be fixed now. |
| --- |

All reactions

Sorry, something went wrong.

[![bboozzoo](https://avatars.githubusercontent.com/u/41870?s=60&v=4)](/bboozzoo)

**[bboozzoo](/bboozzoo)**
reviewed
[Apr 4, 2019](#pullrequestreview-222678887)

 [View reviewed changes](/canonical/snapd/pull/6642/files/07cd4fa0911006f2bbcc6c6bebf8f1470e093765)

[tests/lib/prepare.sh](/canonical/snapd/pull/6642/files/07cd4fa0911006f2bbcc6c6bebf8f1470e093765#diff-294691021a57567bf93aabd96dae3dfdee0188b2fa06bcdeede25a62f754f8a6)
Outdated

Show resolved

Hide resolved

[![bboozzoo](https://avatars.githubusercontent.com/u/41870?s=60&v=4)](/bboozzoo)

**[bboozzoo](/bboozzoo)**
reviewed
[Apr 4, 2019](#pullrequestreview-222689574)

 [View reviewed changes](/canonical/snapd/pull/6642/files/07cd4fa0911006f2bbcc6c6bebf8f1470e093765)

[packaging/fedora/snapd.spec](/canonical/snapd/pull/6642/files/07cd4fa0911006f2bbcc6c6bebf8f1470e093765#diff-c98045007d9c200a66fb86d8bc2c6c7160833efd464666137873bbfac7066cc5)

|  |  | @@ -762,7 +762,7 @@ popd | |
| --- | --- | --- | --- |
|  |  | %{\_mandir}/man8/snap-confine.8\* |
|  |  | %{\_mandir}/man8/snap-discard-ns.8\* |
|  |  | %{\_systemdgeneratordir}/snapd-generator |
|  |  | %attr(0000,root,root) %{\_sharedstatedir}/snapd/void |
|  |  | %attr(0111,root,root) %{\_sharedstatedir}/snapd/void |

Copy link

Contributor

### @bboozzoo **[bboozzoo](/bboozzoo)** [Apr 4, 2019](#discussion_r272124460)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Shall we double check in `test/upgrade/basic` that the permissions are actually updated?

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @zyga **[zyga](/zyga)** [Apr 4, 2019](#discussion_r272132714)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Not in this pull request. This is not attempting to make that work across the distributions, just in our internal test suite. There are distributions that are known to have this broken, most notably ubuntu and ubuntu-core16

Sorry, something went wrong.

All reactions

[packaging/arch/PKGBUILD](/canonical/snapd/pull/6642/files/07cd4fa0911006f2bbcc6c6bebf8f1470e093765#diff-5233883c49d2cef38e6ed7c198714400f1599bfc2d7a155e6d39978c79e0ca99)

|  |  | @@ -166,7 +166,7 @@ package() { | |
| --- | --- | --- | --- |
|  |  | install -dm755 "$pkgdir/var/lib/snapd/lib/vulkan" |
|  |  | install -dm755 "$pkgdir/var/lib/snapd/lib/glvnd" |
|  |  | # these dirs have special permissions |
|  |  | install -dm000 "$pkgdir/var/lib/snapd/void" |
|  |  | install -dm111 "$pkgdir/var/lib/snapd/void" |

Copy link

Contributor

### @bboozzoo **[bboozzoo](/bboozzoo)** [Apr 4, 2019](#discussion_r272125305)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks for updating this. I'll need to check whether pacman does the right thing on upgrade though.

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @zyga **[zyga](/zyga)** [Apr 4, 2019](#discussion_r272132533)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I'm sure we need to update all non-RPM distribution packaging to behave correctly. I doubt this is correct yet.

Sorry, something went wrong.

All reactions

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/07cd4fa0911006f2bbcc6c6bebf8f1470e093765#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)
Outdated

Show resolved

Hide resolved

 [zyga](/zyga)
added 2 commits
[April 4, 2019 15:36](#commits-pushed-04e343b)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: goto void on E{PERM,ACCESS} orig dir](/canonical/snapd/pull/6642/commits/04e343b282ff1d40909ef69bfb114e8ff9ef4a32 "cmd/snap-confine: goto void on E{PERM,ACCESS} orig dir

Maciej Borzęcki rightfully noted that we can fail to open the path
(using O_PATH flag) when we don't have permissions to navigate the
directory chain. Instead of dying like we do on most errors, we will now
go to the void directory. This is more in line with similar case when
fchdir fails to change the directory for permission reasons.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[04e343b](/canonical/snapd/pull/6642/commits/04e343b282ff1d40909ef69bfb114e8ff9ef4a32)`

```
Maciej Borzęcki rightfully noted that we can fail to open the path
(using O_PATH flag) when we don't have permissions to navigate the
directory chain. Instead of dying like we do on most errors, we will now
go to the void directory. This is more in line with similar case when
fchdir fails to change the directory for permission reasons.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[tests: use mkdir -m without -p](/canonical/snapd/pull/6642/commits/b05a2aa45cd070cadc77aab168eb2d2e3cfe76c2 "tests: use mkdir -m without -p

The -m option applies only to the leaf element. The -p option means that
we can create additional components. Shellcheck recommends against that.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>")`
 …

`[b05a2aa](/canonical/snapd/pull/6642/commits/b05a2aa45cd070cadc77aab168eb2d2e3cfe76c2)`

```
The -m option applies only to the leaf element. The -p option means that
we can create additional components. Shellcheck recommends against that.

Signed-off-by: Zygmunt Krynicki <me@zygoon.pl>
```

[![bboozzoo](https://avatars.githubusercontent.com/u/41870?s=60&v=4)](/bboozzoo)

**[bboozzoo](/bboozzoo)**
approved these changes
[Apr 4, 2019](#pullrequestreview-222787917)

 [View reviewed changes](/canonical/snapd/pull/6642/files/b05a2aa45cd070cadc77aab168eb2d2e3cfe76c2)

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/b05a2aa45cd070cadc77aab168eb2d2e3cfe76c2#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)

|  |  | open(orig\_cwd, O\_PATH | O\_DIRECTORY | O\_CLOEXEC | O\_NOFOLLOW); |
| --- | --- | --- |
|  |  | if (inner\_cwd\_fd < 0) { |
|  |  | if (errno == EPERM || errno == EACCES || errno == ENOENT) { |
|  |  | debug |

Copy link

Contributor

### @bboozzoo **[bboozzoo](/bboozzoo)** [Apr 4, 2019](#discussion_r272198872)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Wow, indent really does unspeakable things to the code.

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @zyga **[zyga](/zyga)** [Apr 4, 2019](#discussion_r272200025)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Yes... I'm on the edge of using clang-format for snap-confine.c because this is just silly.

On top of that, it's not stable, run indent a few times and you get different output.

Sorry, something went wrong.

All reactions

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Apr 5, 2019](#issuecomment-480206506)

| This is still failing on core18 because it uncovered a deeper problem about core18 and directory layout of the initial mount namespace. We need to discuss possible solutions with [@mvo5](https://github.com/mvo5) and [@pedronis](https://github.com/pedronis) before this can proceed. |
| --- |

All reactions

Sorry, something went wrong.

 [![@pedronis](https://avatars.githubusercontent.com/u/975757?s=40&v=4)](/pedronis)
[pedronis](/pedronis)
self-requested a review
[April 5, 2019 09:38](#event-2255291567)

[![jdstrand](https://avatars.githubusercontent.com/u/1663079?s=60&v=4)](/jdstrand)

**[jdstrand](/jdstrand)**
approved these changes
[Apr 5, 2019](#pullrequestreview-223472351)

 [View reviewed changes](/canonical/snapd/pull/6642/files/b05a2aa45cd070cadc77aab168eb2d2e3cfe76c2)

Copy link

### @jdstrand **[jdstrand](/jdstrand)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I reviewed all the changes since my last review (thanks [@bboozzoo](https://github.com/bboozzoo) for the O\_PATH find :) and they look fine. Approving so long as the tests pass.

Sorry, something went wrong.

All reactions

[tests/lib/prepare.sh](/canonical/snapd/pull/6642/files/b05a2aa45cd070cadc77aab168eb2d2e3cfe76c2#diff-294691021a57567bf93aabd96dae3dfdee0188b2fa06bcdeede25a62f754f8a6)

|  |  | @@ -471,6 +480,9 @@ EOF | |
| --- | --- | --- | --- |
|  |  | # - make sure the group matches |
|  |  | # - bind mount /root/test-etc/\* to /etc/\* via custom systemd job |
|  |  | # We also create /var/lib/extrausers/\* and append ubuntu,test there |
|  |  | ! test -e /mnt/system-data/root |
|  |  | mkdir -m 700 /mnt/system-data/root |
|  |  | test -d /mnt/system-data/root |

Copy link

### @jdstrand **[jdstrand](/jdstrand)** [Apr 5, 2019](#discussion_r272738665)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

This reminded me that for many years Ubuntu shipped an 0755 /root directory. It's possible that other distros might do this today. That obviously doesn't affect this hunk of the test so just fyi.

Sorry, something went wrong.

 👍
1
 zyga reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/b05a2aa45cd070cadc77aab168eb2d2e3cfe76c2#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)

|  |  | inner\_cwd\_fd = |
| --- | --- | --- |
|  |  | open(orig\_cwd, O\_PATH | O\_DIRECTORY | O\_CLOEXEC | O\_NOFOLLOW); |
|  |  | if (inner\_cwd\_fd < 0) { |
|  |  | if (errno == EPERM || errno == EACCES || errno == ENOENT) { |

Copy link

### @jdstrand **[jdstrand](/jdstrand)** [Apr 5, 2019](#discussion_r272739874) • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

This was a nice find. From 'man open' - *Opening a file or directory with the O\_PATH flag requires no permissions on the object itself (but does require execute permission on the directories in the path prefix)*

Sorry, something went wrong.

 👍
1
 zyga reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: create the void directory on demand](/canonical/snapd/pull/6642/commits/47018f084e66965ef51a67bc80c8820be8b75893 "cmd/snap-confine: create the void directory on demand

On core systems the directory /var/lib/snapd/void may not be present.
When it is absent it must be created by snap-confine on demand.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[47018f0](/canonical/snapd/pull/6642/commits/47018f084e66965ef51a67bc80c8820be8b75893)`

```
On core systems the directory /var/lib/snapd/void may not be present.
When it is absent it must be created by snap-confine on demand.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

 [![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)
[zyga](/zyga)
[force-pushed](/canonical/snapd/compare/53dd43110d944676b003ca6e9fdfd201e44e8c01..47018f084e66965ef51a67bc80c8820be8b75893)
the
fix/suse-audit-2

branch
from
[`53dd431`](/canonical/snapd/commit/53dd43110d944676b003ca6e9fdfd201e44e8c01) to
[`47018f0`](/canonical/snapd/commit/47018f084e66965ef51a67bc80c8820be8b75893)  [Compare](/canonical/snapd/compare/53dd43110d944676b003ca6e9fdfd201e44e8c01..47018f084e66965ef51a67bc80c8820be8b75893)
[April 8, 2019 08:48](#event-2258950281)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Apr 8, 2019](#issuecomment-480743380)

| I force pushed to fix a typo that was upsetting the spell checker. |
| --- |

All reactions

Sorry, something went wrong.

 [zyga](/zyga)
added 2 commits
[April 8, 2019 11:44](#commits-pushed-44a0f52)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[tests: move early check for void dir](/canonical/snapd/pull/6642/commits/44a0f5283bbf753151e45c6d3fdf7482bf6c2430 "tests: move early check for void dir

The void directory is created by the test so we cannot check for it
early. We can and should check for it late though.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[44a0f52](/canonical/snapd/pull/6642/commits/44a0f5283bbf753151e45c6d3fdf7482bf6c2430)`

```
The void directory is created by the test so we cannot check for it
early. We can and should check for it late though.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[cmd/snap-confine: move definition of void_dir_fd](/canonical/snapd/pull/6642/commits/6c81b9bd79b2255d5c02da438bed3b10df37c209 "cmd/snap-confine: move definition of void_dir_fd

I had earlier placed the definition of the variable across a goto jump
that clang, probably rightfully, complains about. The jump supposedly
jumps over the initialization so to stay safe, move the initialization
and indeed the definition, earlier.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>")`
 …

`[6c81b9b](/canonical/snapd/pull/6642/commits/6c81b9bd79b2255d5c02da438bed3b10df37c209)`

```
I had earlier placed the definition of the variable across a goto jump
that clang, probably rightfully, complains about. The jump supposedly
jumps over the initialization so to stay safe, move the initialization
and indeed the definition, earlier.

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@canonical.com>
```

 [![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)
[zyga](/zyga)
[force-pushed](/canonical/snapd/compare/b5e50b08c3396d11d5870efee5558823388f4821..6c81b9bd79b2255d5c02da438bed3b10df37c209)
the
fix/suse-audit-2

branch
from
[`b5e50b0`](/canonical/snapd/commit/b5e50b08c3396d11d5870efee5558823388f4821) to
[`6c81b9b`](/canonical/snapd/commit/6c81b9bd79b2255d5c02da438bed3b10df37c209)  [Compare](/canonical/snapd/compare/b5e50b08c3396d11d5870efee5558823388f4821..6c81b9bd79b2255d5c02da438bed3b10df37c209)
[April 8, 2019 11:39](#event-2259386836)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=80&v=4)](/zyga)

Copy link

Contributor

Author

### **[zyga](/zyga)** commented [Apr 8, 2019](#issuecomment-480796417)

| Force pushed to correct two misspellings in the last commit message. |
| --- |

All reactions

Sorry, something went wrong.

 [![@pedronis](https://avatars.githubusercontent.com/u/975757?s=40&v=4)](/pedronis)
[pedronis](/pedronis)
requested a review
from [jdstrand](/jdstrand)
[April 8, 2019 12:52](#event-2259574594)

[![jdstrand](https://avatars.githubusercontent.com/u/1663079?s=60&v=4)](/jdstrand)

**[jdstrand](/jdstrand)**
approved these changes
[Apr 8, 2019](#pullrequestreview-224007824)

 [View reviewed changes](/canonical/snapd/pull/6642/files/6c81b9bd79b2255d5c02da438bed3b10df37c209)

[cmd/snap-confine/snap-confine.c](/canonical/snapd/pull/6642/files/44a0f5283bbf753151e45c6d3fdf7482bf6c2430..6c81b9bd79b2255d5c02da438bed3b10df37c209#diff-01856638ab88ad8d386853fa8a00e8422d1688ccbb852dcc43973f650352017a)

|  |  | @@ -180,6 +180,7 @@ static void sc\_restore\_process\_state(const sc\_preserved\_process\_state \* | |
| --- | --- | --- | --- |
|  |  | /\* If the original working directory cannot be used for whatever reason then |
|  |  | \* move the process to a special void directory. \*/ |
|  |  | const char \*sc\_void\_dir = "/var/lib/snapd/void"; |
|  |  | int void\_dir\_fd SC\_CLEANUP(sc\_cleanup\_close) = -1; |

Copy link

### @jdstrand **[jdstrand](/jdstrand)** [Apr 8, 2019](#discussion_r273176257)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

This is fine, but perhaps it makes sense to declare this nearer its first use. Eg:

```
  the_void:
	/* The void directory may be absent. On core18 system, and other
	 * systems using bootable base snap coupled with snapd snap, the
	 * /var/lib/snapd directory structure is not provided with packages but
	 * created on demand. */
        int void_dir_fd SC_CLEANUP(sc_cleanup_close) = -1;
	void_dir_fd = open(sc_void_dir, O_DIRECTORY | O_PATH | O_NOFOLLOW | O_CLOEXEC);
...

```

Not a blocker.

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @zyga **[zyga](/zyga)** [Apr 9, 2019](#discussion_r273468802)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

This is invalid C. Labels cannot denote variable declarations. I tried that earlier :)

Sorry, something went wrong.

 👍
1
 jdstrand reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Copy link

### @jdstrand **[jdstrand](/jdstrand)** [Apr 9, 2019](#discussion_r273474100)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Oh, heh

Sorry, something went wrong.

All reactions

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)

`[Merge remote-tracking branch 'origin/master' into fix/suse-audit-2](/canonical/snapd/pull/6642/commits/c9edbe557fbb7901e53044c5a74f0e4a45b65cc0 "Merge remote-tracking branch 'origin/master' into fix/suse-audit-2")`

`[c9edbe5](/canonical/snapd/pull/6642/commits/c9edbe557fbb7901e53044c5a74f0e4a45b65cc0)`

 [![@pedronis](https://avatars.githubusercontent.com/u/975757?s=40&v=4)](/pedronis)
[pedronis](/pedronis)
removed their request for review
[April 10, 2019 17:14](#event-2266799225)

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)
[zyga](/zyga)
merged commit [`187893d`](/canonical/snapd/commit/187893dee84e34ed40680217d2c3ce810985f97e)
into
canonical:master

[Apr 10, 2019](https://github.com/canonical/snapd/pull/6642#event-2267041769)

 [![@zyga](https://avatars.githubusercontent.com/u/784262?s=40&v=4)](/zyga)
[zyga](/zyga)
deleted the
fix/suse-audit-2

branch
[April 10, 2019 18:48](#event-2267042529)

[![@tatianab](https://avatars.githubusercontent.com/u/6238967?s=40&v=4)](/tatianab)
[tatianab](/tatianab)
mentioned this pull request
[Nov 8, 2023](#ref-issue-1984468868)

[x/vulndb: potential Go vuln in github.com/snapcore/snapd: CVE-2019-11503
golang/vulndb#2233](/golang/vulndb/issues/2233)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fcanonical%2Fsnapd%2Fpull%2F6642)

Reviewers

[![@jdstrand](https://avatars.githubusercontent.com/u/1663079?s=40&v=4)](/jdstrand) [jdstrand](/jdstrand)

jdstrand approved these changes

[![@pedronis](https://avatars.githubusercontent.com/u/975757?s=40&v=4)](/pedronis) [pedronis](/pedronis)

pedronis approved these changes

[![@bboozzoo](https://avatars.githubusercontent.com/u/41870?s=40&v=4)](/bboozzoo) [bboozzoo](/bboozzoo)

bboozzoo approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

4 participants

[![@zyga](https://avatars.githubusercontent.com/u/784262?s=52&v=4)](/zyga) [![@bboozzoo](https://avatars.githubusercontent.com/u/41870?s=52&v=4)](/bboozzoo) [![@pedronis](https://avatars.githubusercontent.com/u/975757?s=52&v=4)](/pedronis) [![@jdstrand](https://avatars.githubusercontent.com/u/1663079?s=52&v=4)](/jdstrand)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugzilla.redhat.com_a9e21b36_20250121_022336.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1706019)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1706019)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1706019)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1706019

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1706019**](show_bug.cgi?id=1706019)
- [CVE-2019-11503](https://access.redhat.com/security/cve/CVE-2019-11503) snapd-glib: snapd: remote attacker able to bypass security restriction [fedora-all]

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2019-11503 snapd-glib: snapd: remote attacker able to bypass security res...

| | [Keywords](describekeywords.cgi): | Security  SecurityTracking | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Fedora | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Fedora | | [Component:](describecomponents.cgi?product=Fedora "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | snapd-glib | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 30 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Zygmunt Krynicki | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Fedora Extras Quality Assurance | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [CVE-2019-11503](show_bug.cgi?id=1706013 "CLOSED UPSTREAM - CVE-2019-11503 snapd: remote attacker able to bypass security restriction") | | TreeView+ | [depends on](buglist.cgi?bug_id=1706019&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1706019&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2019-05-03 12:04 UTC by Dhananjay Arunesh | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2019-07-13 01:24 UTC ([History](show_activity.cgi?id=1706019)) | | [CC List:](page.cgi?id=fields.html#cclist) | 2 users (show)  me ngompa13 | | Fixed In Version: | snapd-glib-1.48-1.fc30 snapd-glib-1.48-1.fc29 | | | Doc Type: | No Doc Update | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-07-13 01:06:57 UTC | | | Type: | --- | | | Embargoed: |  | | | [Dependent Products:](page.cgi?id=fields.html#dependent_products "Other Products that are affected by this bug.") | Ember-CSI Red Hat Enterprise Virtualization Manager Red Hat OpenStack Service Telemetry Framework | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1706019#c0)  Dhananjay Arunesh    2019-05-03 12:04:35 UTC  ```  This is an automatically created tracking bug!  It was created to ensure that one or more security vulnerabilities are fixed in affected versions of fedora-all.  For comments that are specific to the vulnerability please use bugs filed against the "Security Response" product referenced in the "Blocks" field.  For more information see: <http://fedoraproject.org/wiki/Security/TrackingBugs>  When submitting as an update, use the fedpkg template provided in the next comment(s).  This will include the bug IDs of this tracking bug as well as the relevant top-level CVE bugs.  Please also mention the CVE IDs being fixed in the RPM changelog and the fedpkg commit message.  NOTE: this issue affects multiple supported versions of Fedora. While only one tracking bug has been filed, please correct all affected versions at the same time.  If you need to fix the versions independent of each other, you may clone this bug as appropriate.   ```  [Comment 1](show_bug.cgi?id=1706019#c1)  Dhananjay Arunesh    2019-05-03 12:04:38 UTC  ``` Use the following template to for the 'fedpkg update' request to submit an update for this issue as it contains the top-level parent bug(s) as well as this tracking bug.  This will ensure that all associated bugs get updated when new packages are pushed to stable.  =====  # bugfix, security, enhancement, newpackage (required) type=security  # low, medium, high, urgent (required) severity=medium  # testing, stable request=testing  # Bug numbers: 1234,9876 bugs=1706013,1706019  # Description of your update notes=Security fix for [PUT CVEs HERE]  # Enable request automation based on the stable/unstable karma thresholds autokarma=True stable_karma=3 unstable_karma=-3  # Automatically close bugs when this marked as stable close_bugs=True  # Suggest that users restart after update suggest_reboot=False  ======  Additionally, you may opt to use the bodhi web interface to submit updates:  <https://bodhi.fedoraproject.org/updates/new>   ```  [Comment 2](show_bug.cgi?id=1706019#c2)  Fedora Update System    2019-07-12 02:29:35 UTC  ``` FEDORA-2019-b6612c5fe5 has been submitted as an update to Fedora 30. <https://bodhi.fedoraproject.org/updates/FEDORA-2019-b6612c5fe5>   ```  [Comment 3](show_bug.cgi?id=1706019#c3)  Fedora Update System    2019-07-12 02:29:57 UTC  ``` FEDORA-2019-bc3dfb389f has been submitted as an update to Fedora 29. <https://bodhi.fedoraproject.org/updates/FEDORA-2019-bc3dfb389f>   ```  [Comment 4](show_bug.cgi?id=1706019#c4)  Fedora Update System    2019-07-13 01:06:57 UTC  ``` snapd-glib-1.48-1.fc30 has been pushed to the Fedora 30 stable repository. If problems still persist, please make note of it in this bug report.   ```  [Comment 5](show_bug.cgi?id=1706019#c5)  Fedora Update System    2019-07-13 01:24:08 UTC  ``` snapd-glib-1.48-1.fc29 has been pushed to the Fedora 29 stable repository. If problems still persist, please make note of it in this bug report.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1706019&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.openwall.com_701a7b48_20250121_001450.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](3) [[next>]](5) [[thread-next>]](../../../2019/04/25/7) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20190418104355.GD9248@f195.suse.de>
Date: Thu, 18 Apr 2019 12:43:55 +0200
From: Matthias Gerstner <mgerstner@...e.de>
To: oss-security@...ts.openwall.com
Subject: Security issues in snapcraft snap-confine set*id binary

Hello,

a couple of security issues have been found in the snapcraft package
manager [1] during the course of a security review for inclusion of
snapcraft in openSUSE [2]. The basis for this review was upstream
version 2.37.4.

snapcraft uses a setuid/setgid root program called `snap-confine` to
setup namespace based containers for snap packages. While the program's
code is generally of good quality the following moderate security issues
have been found:

1) Up and including to version 2.37.4 the /tmp directory within a snap
  container was owned by the first user that entered the container. Since
  snap containers can be used by multiple users at the same time or a
  privileged program or daemon may run in a container, the security of
  files and directories in /tmp is compromised.  An attacker can remove
  or replace files and directories belonging to other users within the
  container's /tmp to achieve an unspecified impact.

  This issue was recently fixed by upstream via commit [3].

2) The `sc_join_preserved_ns()` function along with a number of other
  function remembers the current working directory (CWD) of the calling
  user outside of the container and attempts to restore this CWD again
  within the container. The `chdir()` operation to restore the CWD is
  performed with root privileges within the container and is prone to
  symlink attacks. Therefore an unprivileged user can enter arbitrary
  directories within the container. Example PoC:

  ```
  user1 $ snap run --shell opera
    user1 $ cd /tmp
    user1 $ umask 077
    user1 $ mkdir user1_private
    user1 $ cd user1_private
    user1 $ umask 022
    user1 $ mkdir subdir
    user1 $ cd subdir
    user1 $ echo secret >file

  user2 $ cd /tmp
  user2 $ mkdir -p user1_private/subdir
  user2 $ ln -s /tmp/user1_private/subdir user2_private
  user2 $ cd user2_private
  user2 $ snap run --shell opera
    user2 $ /tmp/user1_private/subdir
    user2 $ cat file
    secret
  ```

  In this example user2 enters the public sub-directories of a private
  tmp directory of user1 within the application container. Basically
  this can also be used to enter /root or /var/lib/snapd/hostfs/root/.config
  and so on.

  The severity of this issue is reduced, because snap-confine employs
  extensive AppArmor profiles that prevent many file system accesses
  beyond classic DAC permission checks.

  This issue is addressed by an upstream PR [4].

3) In function `sc_parse_mountinfo_entry()` the pseudo file
  /proc/self/mountinfo is parsed. In the subsequently called helper
  function `parse_next_string_field()` most of the content of each line
  from that file is parsed. This helper function uses `sscanf()` with a
  "%s%n" format. %s in `sscanf()` extracts a whitespace delimited
  string. While the kernel protects e.g. against newlines found in
  directory names by encoding them specially in the mountinfo file,
  there are whitespace characters that are not protected against.
  Unprivileged users can use mechanisms like FUSE based file systems
  like sshfs to mount file systems onto such strangely named
  directories:

  ```
  user $ cd /tmp
  user $ mkdir `echo -e "strange\rdir"`
  user $ sshfs localhost:/tmp strange?dir
  ```

  The result will be an entry in /proc/self/mountinfo that looks like
  this:

  ```
  111 107 0:49 / /tmp/strange\rdir rw,nosuid,nodev,relatime shared:59 - fuse.sshfs localhost:/tmp/ rw,user_id=1000,group_id=100\n
  ```

  The parsing logic in snap-confine will wrongly treat "/tmp/strange" as
  the `mount_dir` and continue parsing "the next field" after the
  carriage return.  Basically this allows the attacker to provide the
  rest of the fields parsed by snap-confine via the directory name. In
  my tests no failure was detected by `sc_parse_mountinfo()`, since
  parsing "%s" always works as long there is data left to parse.

  I don't see any viable attack vector here at the moment. To actually
  control the behaviour of snap-confine we'd need to control the field
  (4) of the mountinfo file. This field is only available to
  unprivileged users if they can perform a bind mount. Maybe there is a
  setuid tool around that allows such things, then it would be a tool to
  further influence what snap-confine does. In such a case it could e.g.
  be used to force triggering of the discard-ns logic of snap-confine.

  This issue is addressed by an upstream PR [5].

I've asked upstream to assign CVEs for issues 1) and 2) but they're not
available yet.

Best Regards

Matthias

[1]: <https://snapcraft.io/>
[2]: <https://bugzilla.suse.com/show_bug.cgi?id=1127368>
[3]: <https://github.com/snapcore/snapd/commit/bdbfeebef03245176ae0dc323392bb0522a339b1>
[4]: <https://github.com/snapcore/snapd/pull/6642>
[5]: <https://github.com/snapcore/snapd/pull/6605>

--
Matthias Gerstner <matthias.gerstner@...e.de>
Dipl.-Wirtsch.-Inf. (FH), Security Engineer
<https://www.suse.com/security>
Phone: +49 911 740 53 290
GPG Key ID: 0x14C405C971923553

SUSE Linux GmbH
GF: Felix Imendörffer, Mary Higgins, Sri Rasiah
HRB 21284 (AG Nuernberg)

Download attachment "[signature.asc](4/1)" of type "application/pgp-signature" (834 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from lists.fedoraproject.org_93cb2bbd_20250121_001450.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM.mbox.gz?message=VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM/#VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM)

# [SECURITY] Fedora 29 Update: snapd-glib-1.48-1.fc29

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

12 Jul
2019

12 Jul
'19

9:24 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2019-bc3dfb389f
2019-07-13 01:23:59.036557
--------------------------------------------------------------------------------

Name : snapd-glib
Product : Fedora 29
Version : 1.48
Release : 1.fc29
URL : <https://github.com/snapcore/snapd-glib>
Summary : Library providing a GLib interface to snapd
Description :
snapd-glib is a library that provides an interface to communicate
with snapd for GLib based applications.

--------------------------------------------------------------------------------
Update Information:

#### Update to v1.48 \* New API: - `snapd\_client\_get\_connections\_async`
- `snapd\_client\_get\_connections\_finish` -
`snapd\_client\_get\_connections\_sync` - `snapd\_client\_get\_interfaces2\_async`
- `snapd\_client\_get\_interfaces2\_finish` -
`snapd\_client\_get\_interfaces2\_sync` - `snapd\_client\_get\_snap\_conf\_async`
- `snapd\_client\_get\_snap\_conf\_finish` - `snapd\_client\_get\_snap\_conf\_sync`
- `snapd\_client\_set\_snap\_conf\_async` - `snapd\_client\_set\_snap\_conf\_finish`
- `snapd\_client\_set\_snap\_conf\_sync` - `snapd\_connection\_get\_gadget`
- `snapd\_connection\_get\_interface` - `snapd\_connection\_get\_manual` -
`snapd\_connection\_get\_plug` - `snapd\_connection\_get\_plug\_attribute`
- `snapd\_connection\_get\_plug\_attribute\_names` -
`snapd\_connection\_get\_slot` - `snapd\_connection\_get\_slot\_attribute`
- `snapd\_connection\_get\_slot\_attribute\_names` -
`snapd\_connection\_has\_plug\_attribute` -
`snapd\_connection\_has\_slot\_attribute` - `snapd\_interface\_get\_doc\_url`
- `snapd\_interface\_get\_name` - `snapd\_interface\_get\_plugs` -
`snapd\_interface\_get\_slots` - `snapd\_interface\_get\_summary` -
`snapd\_markdown\_node\_get\_children` - `snapd\_markdown\_node\_get\_node\_type`
- `snapd\_markdown\_node\_get\_text` - `snapd\_markdown\_parser\_new` -
`snapd\_markdown\_parser\_get\_combine\_whitespace` -
`snapd\_markdown\_parser\_parse` -
`snapd\_markdown\_parser\_set\_combine\_whitespace` -
`snapd\_plug\_get\_connected\_slots` - `snapd\_plug\_ref\_get\_plug` -
`snapd\_plug\_ref\_get\_snap` - `snapd\_slot\_get\_connected\_plugs` -
`snapd\_slot\_ref\_get\_slot` - `snapd\_slot\_ref\_get\_snap` -
`SNAPD\_ERROR\_OPTION\_NOT\_FOUND` \* Deprecated API: -
`snapd\_client\_get\_interfaces\_async` - `snapd\_client\_get\_interfaces\_finish`
- `snapd\_client\_get\_interfaces\_sync` - `snapd\_connection\_get\_name` -
`snapd\_connection\_get\_snap` - `snapd\_plug\_get\_connections` -
`snapd\_slot\_get\_connections` \* Allow searching via common-id \* Add a description
markdown parser \* Replace `SnapdConnection` with `SnapdPlugRef` and
`SnapdSlotRef` \* Support updated connections API (`/v2/connections`) \* Support
updated `/v2/interfaces&select=` API \* Support snap configuration API \* Add Qt
interface attribute API \* Make `snapd\_client\_set\_socket\_path` revert to the
default when `NULL` passed. \* Fix C99 mode not being enabled on older versions
of GCC
--------------------------------------------------------------------------------
ChangeLog:

\* Thu Jul 11 2019 Neal Gompa ngompa13@gmail.com - 1.48-1
- Update to 1.48
- Many new APIs added
- Allow searching via common-id
- Add a description markdown parser
- Replace SnapdConnection with SnapdPlugRef and SnapdSlotRef
- Support updated connections API (/v2/connections)
- Support updated /v2/interfaces&select= API
- Support snap configuration API
- Add Qt interface attribute API
- Make snapd\_client\_set\_socket\_path revert to the default when NULL passed.
- Fix C99 mode not being enabled on older versions of GCC
\* Sun Mar 24 2019 Neal Gompa ngompa13@gmail.com - 1.47-1
- Update to 1.47
- New API: snapd\_channel\_get\_released\_at
- New API: SNAPD\_ERROR\_DNS\_FAILURE
- Fix tests breaking due to undefined order of results
- Remove generated MOC file from tarball
\* Mon Feb 4 2019 Kalev Lember klember@redhat.com - 1.45-3
- Update BRs for vala packaging changes
\* Sun Feb 3 2019 Fedora Release Engineering releng@fedoraproject.org - 1.45-2
- Rebuilt for <https://fedoraproject.org/wiki/Fedora_30_Mass_Rebuild>
\* Fri Jan 25 2019 Richard Hughes rhughes@redhat.com - 1.45-1
- Update to 1.45
- Support base snap field
- Support filtering apps
- Support maintenance information returned from snapd
\* Sun Nov 4 2018 Neal Gompa ngompa13@gmail.com - 1.44-1
- Update to 1.44
- Reconnect to snapd if disconnected while trying to send the request
- Handle short writes to snapd
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #1718466 - snapd-glib-1.48 is available
<https://bugzilla.redhat.com/show_bug.cgi?id=1718466>
[ 2 ] Bug #1706019 - CVE-2019-11503 snapd-glib: snapd: remote attacker able to bypass security restriction [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1706019>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2019-bc3dfb389f' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM/#VPU6APEZHAA7N2AI57OT4J2P7NKHFOLM)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from bugzilla.redhat.com_d421ce15_20250121_022335.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1718466)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1718466)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1718466)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1718466

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1718466**](show_bug.cgi?id=1718466)
- snapd-glib-1.48 is available

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
snapd-glib-1.48 is available

| | [Keywords](describekeywords.cgi): | FutureFeature  Triaged | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Fedora | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Fedora | | [Component:](describecomponents.cgi?product=Fedora "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | snapd-glib | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | rawhide | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | unspecified | | [Severity:](page.cgi?id=fields.html#bug_severity) | unspecified | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Zygmunt Krynicki | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Fedora Extras Quality Assurance | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1718466&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1718466&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2019-06-07 20:01 UTC by Upstream Release Monitoring | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2019-07-14 00:45 UTC ([History](show_activity.cgi?id=1718466)) | | [CC List:](page.cgi?id=fields.html#cclist) | 2 users (show)  me ngompa13 | | Fixed In Version: | snapd-glib-1.48-1.fc30 snapd-glib-1.48-1.fc29 snapd-glib-1.48-1.el7 | | | Doc Type: | Enhancement | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-07-13 01:06:56 UTC | | | Type: | --- | | | Embargoed: |  | | | [Dependent Products:](page.cgi?id=fields.html#dependent_products "Other Products that are affected by this bug.") | Ember-CSI Red Hat Enterprise Virtualization Manager Red Hat OpenStack Service Telemetry Framework | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**[patch] Update to 1.48 (#1718466)**](attachment.cgi?id=1578427 "View the content of the attachment") (925 bytes, patch)  [2019-06-07 20:01 UTC](#attach_1578427 "Go to the comment associated with the attachment"), Upstream Release Monitoring | *no flags* | [Details](attachment.cgi?id=1578427&action=edit) | [Diff](attachment.cgi?id=1578427&action=diff) | | [View All](attachment.cgi?bugid=1718466&action=viewall) | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1718466#c0)  Upstream Release Monitoring    2019-06-07 20:01:15 UTC  ``` Latest upstream release: 1.48 Current version/release in rawhide: 1.47-1.fc31 URL: <https://github.com/snapcore/snapd-glib>  Please consult the package updates policy before you issue an update to a stable branch: <https://fedoraproject.org/wiki/Updates_Policy>   More information about the service that created this bug can be found at: <https://fedoraproject.org/wiki/Upstream_release_monitoring>   Please keep in mind that with any upstream change, there may also be packaging changes that need to be made. Specifically, please remember that it is your responsibility to review the new version to ensure that the licensing is still correct and that no non-free or legally problematic items have been added upstream.   Based on the information from anitya: <https://release-monitoring.org/project/13996/>   ```  [Comment 1](show_bug.cgi?id=1718466#c1)  Upstream Release Monitoring    2019-06-07 20:01:21 UTC  ``` Created [attachment 1578427](attachment.cgi?id=1578427&action=diff "[patch] Update to 1.48 (#1718466)") [[details]](attachment.cgi?id=1578427&action=edit "[patch] Update to 1.48 (#1718466)") [patch] Update to 1.48 (#1718466)   ```  [Comment 2](show_bug.cgi?id=1718466#c2)  Fedora Update System    2019-07-12 02:24:25 UTC  ``` FEDORA-2019-b6612c5fe5 has been submitted as an update to Fedora 30. <https://bodhi.fedoraproject.org/updates/FEDORA-2019-b6612c5fe5>   ```  [Comment 3](show_bug.cgi?id=1718466#c3)  Fedora Update System    2019-07-12 02:24:29 UTC  ``` FEDORA-EPEL-2019-238f49e9a5 has been submitted as an update to Fedora EPEL 7. <https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2019-238f49e9a5>   ```  [Comment 4](show_bug.cgi?id=1718466#c4)  Fedora Update System    2019-07-13 01:06:56 UTC  ``` snapd-glib-1.48-1.fc30 has been pushed to the Fedora 30 stable repository. If problems still persist, please make note of it in this bug report.   ```  [Comment 5](show_bug.cgi?id=1718466#c5)  Fedora Update System    2019-07-13 01:24:07 UTC  ``` snapd-glib-1.48-1.fc29 has been pushed to the Fedora 29 stable repository. If problems still persist, please make note of it in this bug report.   ```  [Comment 6](show_bug.cgi?id=1718466#c6)  Fedora Update System    2019-07-14 00:45:13 UTC  ``` snapd-glib-1.48-1.el7 has been pushed to the Fedora EPEL 7 stable repository. If problems still persist, please make note of it in this bug report.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1718466&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.openwall.com_6587b13a_20250121_001442.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](6) [[next>]](8) [[<thread-prev]](../../../2019/04/18/4) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20190425133024.GE13360@iolanthe>
Date: Thu, 25 Apr 2019 08:30:24 -0500
From: Jamie Strandboge <jamie@...onical.com>
To: oss-security@...ts.openwall.com
Cc: Matthias Gerstner <matthias.gerstner@...e.de>,
	Zygmunt Krynicki <zygmunt.krynicki@...onical.com>
Subject: Re: Security issues in snapcraft snap-confine set*id
 binary

On Thu, 18 Apr 2019, Matthias Gerstner wrote:

> 1) Up and including to version 2.37.4 the /tmp directory within a snap
>   container was owned by the first user that entered the container. Since
>   snap containers can be used by multiple users at the same time or a
>   privileged program or daemon may run in a container, the security of
>   files and directories in /tmp is compromised.  An attacker can remove
>   or replace files and directories belonging to other users within the
>   container's /tmp to achieve an unspecified impact.
>
>   This issue was recently fixed by upstream via commit [3].

This is CVE-2019-11502

> 2) The `sc_join_preserved_ns()` function along with a number of other
>   function remembers the current working directory (CWD) of the calling
>   user outside of the container and attempts to restore this CWD again
>   within the container. The `chdir()` operation to restore the CWD is
>   performed with root privileges within the container and is prone to
>   symlink attacks. Therefore an unprivileged user can enter arbitrary
>   directories within the container. Example PoC:

This is CVE-2019-11503

> 3) In function `sc_parse_mountinfo_entry()` the pseudo file
...
>   I don't see any viable attack vector here at the moment. To actually
>   control the behaviour of snap-confine we'd need to control the field
>   (4) of the mountinfo file. This field is only available to
>   unprivileged users if they can perform a bind mount.

I agree, this is a legitimate bug that the snapd team will fix but because an
unprivileged user can't gain privileges or other wise cross privilege
boundaries, I did not request a CVE. We can revisit as necessary.

> Best Regards
>
> Matthias

Thank you for the review!

--
Jamie Strandboge             | <http://www.canonical.com>

Download attachment "[signature.asc](7/1)" of type "application/pgp-signature" (834 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from lists.fedoraproject.org_6263adc1_20250121_001449.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L.mbox.gz?message=6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L/#6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L)

# [SECURITY] Fedora 30 Update: snapd-glib-1.48-1.fc30

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

12 Jul
2019

12 Jul
'19

9:07 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2019-b6612c5fe5
2019-07-13 01:06:05.995897
--------------------------------------------------------------------------------

Name : snapd-glib
Product : Fedora 30
Version : 1.48
Release : 1.fc30
URL : <https://github.com/snapcore/snapd-glib>
Summary : Library providing a GLib interface to snapd
Description :
snapd-glib is a library that provides an interface to communicate
with snapd for GLib based applications.

--------------------------------------------------------------------------------
Update Information:

#### Update to v1.48 \* New API: - `snapd\_client\_get\_connections\_async`
- `snapd\_client\_get\_connections\_finish` -
`snapd\_client\_get\_connections\_sync` - `snapd\_client\_get\_interfaces2\_async`
- `snapd\_client\_get\_interfaces2\_finish` -
`snapd\_client\_get\_interfaces2\_sync` - `snapd\_client\_get\_snap\_conf\_async`
- `snapd\_client\_get\_snap\_conf\_finish` - `snapd\_client\_get\_snap\_conf\_sync`
- `snapd\_client\_set\_snap\_conf\_async` - `snapd\_client\_set\_snap\_conf\_finish`
- `snapd\_client\_set\_snap\_conf\_sync` - `snapd\_connection\_get\_gadget`
- `snapd\_connection\_get\_interface` - `snapd\_connection\_get\_manual` -
`snapd\_connection\_get\_plug` - `snapd\_connection\_get\_plug\_attribute`
- `snapd\_connection\_get\_plug\_attribute\_names` -
`snapd\_connection\_get\_slot` - `snapd\_connection\_get\_slot\_attribute`
- `snapd\_connection\_get\_slot\_attribute\_names` -
`snapd\_connection\_has\_plug\_attribute` -
`snapd\_connection\_has\_slot\_attribute` - `snapd\_interface\_get\_doc\_url`
- `snapd\_interface\_get\_name` - `snapd\_interface\_get\_plugs` -
`snapd\_interface\_get\_slots` - `snapd\_interface\_get\_summary` -
`snapd\_markdown\_node\_get\_children` - `snapd\_markdown\_node\_get\_node\_type`
- `snapd\_markdown\_node\_get\_text` - `snapd\_markdown\_parser\_new` -
`snapd\_markdown\_parser\_get\_combine\_whitespace` -
`snapd\_markdown\_parser\_parse` -
`snapd\_markdown\_parser\_set\_combine\_whitespace` -
`snapd\_plug\_get\_connected\_slots` - `snapd\_plug\_ref\_get\_plug` -
`snapd\_plug\_ref\_get\_snap` - `snapd\_slot\_get\_connected\_plugs` -
`snapd\_slot\_ref\_get\_slot` - `snapd\_slot\_ref\_get\_snap` -
`SNAPD\_ERROR\_OPTION\_NOT\_FOUND` \* Deprecated API: -
`snapd\_client\_get\_interfaces\_async` - `snapd\_client\_get\_interfaces\_finish`
- `snapd\_client\_get\_interfaces\_sync` - `snapd\_connection\_get\_name` -
`snapd\_connection\_get\_snap` - `snapd\_plug\_get\_connections` -
`snapd\_slot\_get\_connections` \* Allow searching via common-id \* Add a description
markdown parser \* Replace `SnapdConnection` with `SnapdPlugRef` and
`SnapdSlotRef` \* Support updated connections API (`/v2/connections`) \* Support
updated `/v2/interfaces&select=` API \* Support snap configuration API \* Add Qt
interface attribute API \* Make `snapd\_client\_set\_socket\_path` revert to the
default when `NULL` passed. \* Fix C99 mode not being enabled on older versions
of GCC
--------------------------------------------------------------------------------
ChangeLog:

\* Thu Jul 11 2019 Neal Gompa ngompa13@gmail.com - 1.48-1
- Update to 1.48
- Many new APIs added
- Allow searching via common-id
- Add a description markdown parser
- Replace SnapdConnection with SnapdPlugRef and SnapdSlotRef
- Support updated connections API (/v2/connections)
- Support updated /v2/interfaces&select= API
- Support snap configuration API
- Add Qt interface attribute API
- Make snapd\_client\_set\_socket\_path revert to the default when NULL passed.
- Fix C99 mode not being enabled on older versions of GCC
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #1718466 - snapd-glib-1.48 is available
<https://bugzilla.redhat.com/show_bug.cgi?id=1718466>
[ 2 ] Bug #1706019 - CVE-2019-11503 snapd-glib: snapd: remote attacker able to bypass security restriction [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1706019>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2019-b6612c5fe5' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L/#6VACEKVQ7UAZ32WO4ZKCFW6YOBSYJ76L)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.


