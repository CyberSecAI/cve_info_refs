=== Content from jira.atlassian.com_830faaf0_20250120_231909.html ===


[Log in](/login.jsp?os_destination=%2Fbrowse%2FJRASERVER-70944)[Skip to main content](#main)[Skip to sidebar](#sidebar)Linked ApplicationsLoading…[![Create and track feature requests for Atlassian products.](/s/2u4fri/9120016/1rg1jpn/_/jira-logo-scaled.png)](https://jira.atlassian.com/secure/MyJiraHome.jspa)

* [Dashboards](/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/secure/BrowseProjects.jspa "View recent projects and browse a list of projects")
* [Issues](/issues/ "Search for issues and view recent issues")

* Give feedback to Atlassian
* [Help](https://docs.atlassian.com/jira/jcore-docs-0912/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-0912/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/login.jsp?os_destination=%2Fbrowse%2FJRASERVER-70944)

IMPORTANT: JAC is a Public system and anyone on the internet will be able to view the data in the created JAC tickets. Please don’t include Customer or Sensitive data in the JAC ticket.

![Uploaded image for project: 'Jira Data Center'](https://jira.atlassian.com/secure/projectavatar?pid=10240&avatarId=105190)

1. [Jira Data Center](/browse/JRASERVER)
2. [JRASERVER-70944](/browse/JRASERVER-70944)

## Make use of Secure Introspector in Velocity Templates - CVE-2019-20409

[Log In](/login.jsp?os_destination=%2Fbrowse%2FJRASERVER-70944 "Log In")ClosedExportnullView workflowXMLWordPrintable
### Details

* **Type:**
  ![Icon: Bug](/secure/viewavatar?size=xsmall&avatarId=51493&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.") Bug
* **Resolution:**
  Fixed
* **Priority:**
  ![Icon: Low](/images/icons/priorities/low.svg "Low - Low priority issues") Low
* **Fix Version/s:**
  [8.8.0](/issues/?jql=project+%3D+JRASERVER+AND+fixVersion+%3D+8.8.0 "8.8.0 ")
* **Affects Version/s:**
  8.3.2
* **Component/s:**
  [Environment - Java](/issues/?jql=project+%3D+JRASERVER+AND+component+%3D+%22Environment+-+Java%22 "Environment - Java ")
* **Labels:**
  + [advisory](/issues/?jql=labels+%3D+advisory "advisory")
  + [cve-2019-20409](/issues/?jql=labels+%3D+cve-2019-20409 "cve-2019-20409")
  + [cvss-medium](/issues/?jql=labels+%3D+cvss-medium "cvss-medium")
  + [injection](/issues/?jql=labels+%3D+injection "injection")
  + [rce](/issues/?jql=labels+%3D+rce "rce")
  + [security](/issues/?jql=labels+%3D+security "security")

* **Introduced in Version:**
  8.03
* **Symptom Severity:**
  Severity 2 - Major
* **Bug Fix Policy:**
   [View Atlassian Server bug fix policy](https://confluence.atlassian.com/support/atlassian-bug-fixing-policy-201294573.html)
* **Current Status:**
  Hide
  **Atlassian Update – 05 October 2020**

  Hi everyone,

  thank you for all your comments and questions.

  We would like to inform you that we have been investigating the possibility of backporting the requested functionality to Jira LTS versions 7.13x and 8.5.x. Unfortunately this improvement causes problems with non-Atlassian plugins preventing them from working correctly. Due to its technical complexity we cannot provide any means of disabling it without manipulation with Jira files.

  We treat this issue as a security improvement, not a security vulnerability that can be exploited. We have made it harder for an attacker to exploit potential server-side template injection vulnerabilities in the future Jira releases.

  In the light of the above, we have decided not to backport the requested functionality to both Jira 8.5.x and 7.13.x LTS releases.

  We understand that this decision may be disappointing, however we want to assure you that we will keep treating all server-side template injection vulnerabilities as high or critical severity issues if they affect our LTS releases.

  For those customers who are currently using our LTS versions, we have prepared a workaround (please see the description field of this issue). After applying the workaround all native Jira functionality should work as before, however some 3rd party and your own internal apps may stop working or cause problems with other Jira functionality. You can use this workaround at your own discretion.

  The security improvement will be available in our upcoming 8.13 LTS release. If you have any questions or feedback about the workaround, please leave us a comment.

  Kind regards,

  Paweł Przytarski

  Jira Server Bugfix Team

  Show
  Atlassian Update – 05 October 2020
  Hi everyone,
  thank you for all your comments and questions.
  We would like to inform you that we have been investigating the possibility of backporting the requested functionality to Jira LTS versions 7.13x and 8.5.x. Unfortunately this improvement causes problems with non-Atlassian plugins preventing them from working correctly. Due to its technical complexity we cannot provide any means of disabling it without manipulation with Jira files.
  We treat this issue as a security improvement, not a security vulnerability that can be exploited. We have made it harder for an attacker to exploit potential server-side template injection vulnerabilities in the future Jira releases.
  In the light of the above, we have decided not to backport the requested functionality to both Jira 8.5.x and 7.13.x LTS releases.
  We understand that this decision may be disappointing, however we want to assure you that we will keep treating all server-side template injection vulnerabilities as high or critical severity issues if they affect our LTS releases.
  For those customers who are currently using our LTS versions, we have prepared a workaround (please see the description field of this issue). After applying the workaround all native Jira functionality should work as before, however some 3rd party and your own internal apps may stop working or cause problems with other Jira functionality. You can use this workaround at your own discretion.
  The security improvement will be available in our upcoming 8.13 LTS release. If you have any questions or feedback about the workaround, please leave us a comment.
  Kind regards,
  Paweł Przytarski
  Jira Server Bugfix Team

### Description

This issue exists to document that a security improvement in the way that Jira Server and Data Center use velocity templates has been implemented.

The way in which velocity templates were used in Atlassian Jira Server and Data Center prior to version 8.8.0 allowed remote attackers to gain remote code execution if they were able to exploit a server side template injection vulnerability.

**Affected versions:**

* version < 8.8.0

**Fixed versions:**

* 8.8.0

**Workaround for previous versions:**

You use this workaround at your own discretion.

> 1. Download [Jira 8.12](https://product-downloads.atlassian.com/software/jira/downloads/atlassian-jira-software-8.12.3.zip) as zip and extract it’s content
>
> 2. [Localize your Jira instance installation directory](https://confluence.atlassian.com/adminjiraserver/jira-application-installation-directory-938847745.html)
>
> 3. Shutdown your Jira instance
>
> 4. Go to the *<jira\_installation\_dir>/atlassian-jira/WEB-INF/lib/* directory
>
> 5. Remove files: *velocity-htmlsafe-3.0.0.jar* and *velocity-1.6.4-atlassian-7.jar*
>
> 6. Copy files *velocity-htmlsafe-3.1.1.jar* and *velocity-1.6.4-atlassian-21.jar* from downloaded Jira 8.12 to current directory. They are found in the *<Jira\_8\_12\_dir>/atlassian-jira/WEB-INF/lib/* directory
>
> 7. Go to the *<jira\_installation\_dir>/atlassian-jira/WEB-INF/classes* directory
>
> 8. Replace the velocity.properties and velocity-static.properties files with their counterparts from the downloaded Jira 8.12
>
> 9. Start your Jira instance again

### Attachments

### Issue Links

is related to

![Bug - A problem which impairs or prevents the functions of the product.](/secure/viewavatar?size=xsmall&avatarId=51493&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.")
[JRASERVER-70940](/browse/JRASERVER-70940)
Template injection in Web Resources Manager - CVE-2020-14172

* ![Low - Low priority issues](/images/icons/priorities/low.svg "Low - Low priority issues")
* Closed

relates to

![Suggestion - ](/secure/viewavatar?size=xsmall&avatarId=51505&avatarType=issuetype "Suggestion - ")
[JRASERVER-43726](/browse/JRASERVER-43726)
JIRA provides many information to anonymous users

* Gathering Interest

mentioned in

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://enterprise-tam.atlassian.net/wiki/pages/viewpage.action?pageId=1006993595) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://enterprise-tam.atlassian.net/wiki/pages/viewpage.action?pageId=1844510761) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://enterprise-tam.atlassian.net/wiki/pages/viewpage.action?pageId=2019885060) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://enterprise-tam.atlassian.net/wiki/pages/viewpage.action?pageId=958137808) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://hello.atlassian.net/wiki/pages/viewpage.action?pageId=1561596669) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://hello.atlassian.net/wiki/pages/viewpage.action?pageId=823894540) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://hello.atlassian.net/wiki/pages/viewpage.action?pageId=828622521) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://hello.atlassian.net/wiki/pages/viewpage.action?pageId=878966359) Loading...

Show 5 more links (5 mentioned in)

### Forms

### Activity

### People

Assignee:

![Unassigned](https://jira.atlassian.com/secure/useravatar?size=small&avatarId=10613)
Unassigned

Reporter:

![security-metrics-bot](https://jira.atlassian.com/secure/useravatar?size=small&avatarId=10612)
Security Metrics Bot

Votes:
0
Vote for this issue

Watchers:
42
Start watching this issue

### Dates

Created:

22/Apr/2020 1:53 AM

Updated:

07/Mar/2022 10:16 AM

Resolved:

22/Apr/2020 1:55 AM

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/secure/CreateIssue%21default.jspa)
* [Privacy policy](https://www.atlassian.com/legal/privacy-policy)
* [Notice at Collection](https://www.atlassian.com/legal/privacy-policy#additional-disclosures-for-ca-residents)

[Atlassian](http://www.atlassian.com/)


