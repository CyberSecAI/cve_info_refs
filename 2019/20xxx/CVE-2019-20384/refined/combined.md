=== Content from wiki.gentoo.org_2dc1ed88_20250121_022656.html ===

Jump to: [content](#top)

 [**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites

* [gentoo.org](https://www.gentoo.org/ "Gentoo's main website")
* [Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
* [Bugs](https://bugs.gentoo.org/ "Discover and report issues with Gentoo")
* [Packages](https://packages.gentoo.org/ "Find software to install")
* [Forums](https://forums.gentoo.org/ "Discuss with the community")
* [Planet](https://planet.gentoo.org/ "Find out what's going on in the dev community")
* [Archives](https://archives.gentoo.org/ "Read up on past discussions")
* [Devmanual](https://devmanual.gentoo.org/ "Read the development guide")
* [Gitweb](https://gitweb.gentoo.org/ "Browse our source code in Gitweb")
* [Infra status](https://infra-status.gentoo.org/ "Get updates on the services provided by the Gentoo infra team")

[![Gentoo Linux Logo](https://assets.gentoo.org/tyrian/site-logo.png)](/ "Back to the homepage")
Wiki

Toggle navigation

* [Main page](/wiki/Main_Page "Visit the main page [z]")
* [Recent changes](/wiki/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Help](/wiki/Special%3AMyLanguage/Help%3AContents "The place to find out")
* [Contribute!](/wiki/Gentoo_Wiki%3AContributor%27s_guide)
* [Documentation](/wiki/Gentoo_Wiki%3AMenu-Documentation)
  + [Gentoo Handbook](/wiki/Handbook%3AMain_Page)
  + [Gentoo FAQ](/wiki/FAQ)
  + [Core system](/wiki/Category%3ACore_system)
  + [Hardware](/wiki/Category%3AHardware)
  + [Software](/wiki/Category%3ASoftware)
  + [Desktop](/wiki/Category%3ADesktop)
  + [Server & Security](/wiki/Category%3AServer_and_Security)
  + [Project & Community](/wiki/Category%3AProject_and_Community)
  + [Gentoo Projects](/wiki/Project%3AGentoo)

* Tools
  + [What links here](/wiki/Special%3AWhatLinksHere/Main_Page "A list of all wiki pages that link here [j]")
  + [Related changes](/wiki/Special%3ARecentChangesLinked/Main_Page "Recent changes in pages linked from this page [k]")
  + [Special pages](/wiki/Special%3ASpecialPages "A list of all special pages [q]")
  + Printable version
  + [Permanent link](/index.php?title=Main_Page&oldid=1328572 "Permanent link to this revision of the page")
  + [Page information](/index.php?title=Main_Page&action=info "More information about this page")
  + [Browse properties](/wiki/Special%3ABrowse/%3AMain-5FPage)
* User
  + English
  + [Create account](/index.php?title=Special:CreateAccount&returnto=Main+Page "You are encouraged to create an account and log in; however, it is not mandatory")
  + [Log in](/index.php?title=Special:UserLogin&returnto=Main+Page "You are encouraged to log in; however, it is not mandatory [o]")

Toggle navigation

* [Main page](/wiki/Main_Page "View the content page [c]")
* [Discussion](/wiki/Talk%3AMain_Page "Discussion about the content page [t]")

* [View source](/index.php?title=Main_Page&action=edit "This page is protected.
  You can view its source [e]")
* more
  + [History](/index.php?title=Main_Page&action=history "Past revisions of this page [h]")

# Main Page

From Gentoo Wiki

[Jump to:navigation](#mw-head)
[Jump to:search](#searchInput)

![moo](/images/thumb/8/83/Larry_festive_hat.png/150px-Larry_festive_hat.png "moo")
# Welcome to the Gentoo wiki!

Larry the Cow beckons you to explore the Gentoo wiki!

## Available documentation

To find information use the search box on the top right corner of the screen, or categorically browse the wiki using the [Documentation topic](#Documentation_topics) links provided below.

Both official Gentoo project documentation as well as community-contributed content can be found here. The vast majority of documentation is publicly editable. Official documents have a *Handbook:* or *Project:* prefix (only developers can edit them). Community members can leave comments/feedback for these pages via their respective *Discussion* pages.

Find something to add or edit? The [*Getting started*](#Getting_started) section (below) gives contributors a few pointers on how to start editing articles.

Most importantly, the **Gentoo Handbook** is among the best documents found on the wiki:

 [Gentoo Handbook (Official installation documentation)](/wiki/Handbook%3AMain_Page "Handbook:Main Page")

### Documentation topics

 [Core system](/wiki/Category%3ACore_system "Category:Core system")
 [Software](/wiki/Category%3ASoftware "Category:Software")
 [Hardware](/wiki/Category%3AHardware "Category:Hardware")
 [Desktop](/wiki/Category%3ADesktop "Category:Desktop")
 [Server and security](/wiki/Category%3AServer_and_Security "Category:Server and Security")
 [Project and community](/wiki/Category%3AProject_and_Community "Category:Project and Community")

### Contributing

 [Wiki guidelines](/wiki/Gentoo_Wiki%3AGuidelines "Gentoo Wiki:Guidelines")
 [Article blueprints](/wiki/Gentoo_Wiki%3AArticle_Blueprints "Gentoo Wiki:Article Blueprints")
 [Translator account requests](/wiki/Gentoo_Wiki%3ATranslator_account_requests "Gentoo Wiki:Translator account requests")

## News

 **Important**
Due to usability issues the [visual editor](https://en.wikipedia.org/wiki/Wikipedia%3AVisualEditor "wikipedia:Wikipedia:VisualEditor") has been temporarily disabled. See [bug #910279](https://bugs.gentoo.org/show_bug.cgi?id=910279) for more details.
#### January 1, 2025: Happy New Year!

Thanks for making 2024 great, and here's to an even *greater* New Year! 2025 should be a 'big' year for the wiki!

During Q1 2025, we have plans to update the software stack which supports the wiki. Before and during the update, we'll do our best to provide any additional details if and as they are needed by adding context details to [infra-status.g.o](https://infra-status.gentoo.org/). As with any infrastructure update, expect a lack of availability during the update window and possibly even after if things go awry. We'll at least be locking the wiki into a read-only state; but we plan also for the wiki to be offline for a certain amount of time during the update. Post successful update, we plan to do better at implementing scheduled maintenance routinely within planned windows which will hopefully enable a shorter down time between updates.

 To all in our amazing community, thank YOU for making the Gentoo wiki the best FOSS wiki on the web!

[Wiki news archive...](/wiki/Gentoo_Wiki%3ANews "Gentoo Wiki:News")

### Wiki development details

* **113** active and **147** retired developers
* **170** active official projects
* **98** active users on the wiki

[Wiki development changelog...](/wiki/Handbook%3AMain_Page/Changelog "Handbook:Main Page/Changelog")

## Getting started

Anyone is welcome to edit or create pages on this wiki.

Gentoo wiki contributors encourage beginners to consult the [Help page](/wiki/Help%3AContents "Help:Contents") before making edits. It also links to the [MediaWiki User's Guide](https://meta.wikimedia.org/wiki/Help%3AContents) which contains information on how to use wiki software.

If there is something we can improve please let us know on the [Feedback page](/wiki/Gentoo_Wiki%3AFeedback "Gentoo Wiki:Feedback").

For questions *related to using or editing the documentation on the wiki*, please join us in our #gentoo-wiki ([webchat](https://web.libera.chat/#gentoo-wiki)) IRC channel on Libera.chat or email us at wiki@gentoo.org.

**Please note**: For *general Gentoo support*, such as getting advice on a particular Handbook section or other generic support questions, please get in touch with our [support community](https://www.gentoo.org/support/) instead. General support is *not* provided by the wiki project.

## Recently added pages

* [21:03, 20 January 2025](/index.php?title=Initramfs/Guide/hu&oldid=1333553 "Initramfs/Guide/hu") ‎[Initramfs/Guide/hu](/wiki/Initramfs/Guide/hu "Initramfs/Guide/hu") ([hist](/index.php?title=Initramfs/Guide/hu&action=history "Initramfs/Guide/hu") | [edit](/index.php?title=Initramfs/Guide/hu&action=edit "Initramfs/Guide/hu")) ‎[13,018 bytes] ‎[Torontál-vármegye](/index.php?title=User:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User:Torontál-vármegye (page does not exist)") ([talk](/index.php?title=User_talk:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User talk:Torontál-vármegye (page does not exist)") | [contribs](/wiki/Special%3AContributions/Toront%C3%A1l-v%C3%A1rmegye "Special:Contributions/Torontál-vármegye")) (Created page with "== Az initramfs fogalma ==")
* [20:27, 20 January 2025](/index.php?title=IPv6_router_guide/hu&oldid=1333533 "IPv6 router guide/hu") ‎[IPv6 router guide/hu](/wiki/IPv6_router_guide/hu "IPv6 router guide/hu") ([hist](/index.php?title=IPv6_router_guide/hu&action=history "IPv6 router guide/hu") | [edit](/index.php?title=IPv6_router_guide/hu&action=edit "IPv6 router guide/hu")) ‎[22,701 bytes] ‎[Torontál-vármegye](/index.php?title=User:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User:Torontál-vármegye (page does not exist)") ([talk](/index.php?title=User_talk:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User talk:Torontál-vármegye (page does not exist)") | [contribs](/wiki/Special%3AContributions/Toront%C3%A1l-v%C3%A1rmegye "Special:Contributions/Torontál-vármegye")) (Created page with "IPv6 router útmutató")
* [19:53, 20 January 2025](/index.php?title=How_to_read_and_write_in_Japanese/hu&oldid=1333463 "How to read and write in Japanese/hu") ‎[How to read and write in Japanese/hu](/wiki/How_to_read_and_write_in_Japanese/hu "How to read and write in Japanese/hu") ([hist](/index.php?title=How_to_read_and_write_in_Japanese/hu&action=history "How to read and write in Japanese/hu") | [edit](/index.php?title=How_to_read_and_write_in_Japanese/hu&action=edit "How to read and write in Japanese/hu")) ‎[8,354 bytes] ‎[Torontál-vármegye](/index.php?title=User:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User:Torontál-vármegye (page does not exist)") ([talk](/index.php?title=User_talk:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User talk:Torontál-vármegye (page does not exist)") | [contribs](/wiki/Special%3AContributions/Toront%C3%A1l-v%C3%A1rmegye "Special:Contributions/Torontál-vármegye")) (Created page with "Hogyan kell írni és olvasni japánul?")
* [12:05, 20 January 2025](/index.php?title=GCC_optimization/hu&oldid=1333407 "GCC optimization/hu") ‎[GCC optimization/hu](/wiki/GCC_optimization/hu "GCC optimization/hu") ([hist](/index.php?title=GCC_optimization/hu&action=history "GCC optimization/hu") | [edit](/index.php?title=GCC_optimization/hu&action=edit "GCC optimization/hu")) ‎[46,252 bytes] ‎[Torontál-vármegye](/index.php?title=User:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User:Torontál-vármegye (page does not exist)") ([talk](/index.php?title=User_talk:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User talk:Torontál-vármegye (page does not exist)") | [contribs](/wiki/Special%3AContributions/Toront%C3%A1l-v%C3%A1rmegye "Special:Contributions/Torontál-vármegye")) (Created page with "GCC optimalizálás")
* [23:35, 18 January 2025](/index.php?title=IRC/hu&oldid=1333338 "IRC/hu") ‎[IRC/hu](/wiki/IRC/hu "IRC/hu") ([hist](/index.php?title=IRC/hu&action=history "IRC/hu") | [edit](/index.php?title=IRC/hu&action=edit "IRC/hu")) ‎[7,828 bytes] ‎[Torontál-vármegye](/index.php?title=User:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User:Torontál-vármegye (page does not exist)") ([talk](/index.php?title=User_talk:Toront%C3%A1l-v%C3%A1rmegye&action=edit&redlink=1 "User talk:Torontál-vármegye (page does not exist)") | [contribs](/wiki/Special%3AContributions/Toront%C3%A1l-v%C3%A1rmegye "Special:Contributions/Torontál-vármegye")) (Created page with "IRC")

Retrieved from "<https://wiki.gentoo.org/index.php?title=Main_Page&oldid=1328572>"
[Category](/wiki/Special%3ACategories "Special:Categories"):

* [Gentoo Wiki](/wiki/Category%3AGentoo_Wiki "Category:Gentoo Wiki")

* This page was last edited on 1 January 2025, at 22:01.
* [Privacy policy](/wiki/Gentoo_Wiki%3APrivacy_policy "Gentoo Wiki:Privacy policy")
* [About Gentoo Wiki](/wiki/Gentoo_Wiki%3AAbout "Gentoo Wiki:About")
* [Disclaimers](/wiki/Gentoo_Wiki%3AGeneral_disclaimer "Gentoo Wiki:General disclaimer")

**© 2001–2025 Gentoo Authors**

Gentoo is a trademark of the Gentoo Foundation, Inc. and of Förderverein Gentoo e.V.
The contents of this document, unless otherwise expressly stated, are licensed under the
[CC-BY-SA-4.0](https://creativecommons.org/licenses/by-sa/4.0/) license.
The [Gentoo Name and Logo Usage Guidelines](https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html) apply.



=== Content from www.openwall.com_208d1423_20250121_001906.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2020/01/20/6) [[next>]](2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <478aa5ed-1bec-c12b-e7d5-1bfd3e5d096a@orlitzky.com>
Date: Tue, 21 Jan 2020 13:17:11 -0500
From: Michael Orlitzky <michael@...itzky.com>
To: oss-security@...ts.openwall.com
Subject: CVE-2019-20384: Portage insecure temporary location

Product: Gentoo portage package manager
Versions-affected: 2.3.84 and earlier (all versions)
Author: Michael Orlitzky
Bug-report: <https://bugs.gentoo.org/692492>

== Summary ==

The Gentoo portage package manager builds packages in a temporary
location. By default, that temporary location is accessible to
unprivileged users even though the build essentially takes place as
root. In some common situations (during reinstalls, for example), this
leaves the source tree momentarily writable by an existing system user
who can exploit the situation to gain root.

== Details ==

Portage is the default package manager on Gentoo Linux, a source-based
distribution. To install a package, portage runs through a series of
configuration, compilation, and installation phases consisting of bash
script. These all run with root privileges in a temporary subdirectory
of the location specified by the PORTAGE_TMPDIR variable. The install
phase performs a "mock" installation, in a self-contained directory,
that can be tweaked before proceeding to the next step. When the build
and mock-install are complete, the final result is merged onto the live
filesystem, again using root privileges.

Gentoo developers and portage itself take some care to ensure that
nothing objectionable reaches the live filesystem. Subdirectories of
PORTAGE_TMPDIR, on the other hand, are the wild wild west. Much of
PORTAGE_TMPDIR is world-traversable, and that lack of access control
turns out to be exploitable by users who are granted ephemeral write
access to the source tree of a package being installed. If an
unprivileged user can write to the mock-installation image of a package,
then in essence he can write to the live filesystem as well because
everything in the mock image is merged onto the live filesystem eventually.

It is the nature of package maintenance that illicit things must take
during the build and installation phases. For example, many upstream
build systems set incorrect permissions on the files they produce, and
those permissions must be corrected before the files are merged onto the
system. But before problems are fixed in the mock-install, they exist in
the mock-install. And many of them allow an unprivileged user to modify
the source tree.

== Exploitation ==

The nagioscore package is available in Gentoo as
net-analyzer/nagios-core. By default its build system gives ownership of
/usr/lib64/nagios/plugins to the nagios user, but this gets corrected to
root:root to avoid surprises. The two lines that accomplish that in the
net-analyzer/nagios-core ebuild are,

  emake DESTDIR="${D}" install-basic
  fowners root:root /usr/lib64/nagios/plugins

The $D variable refers to the mock-installation path under
PORTAGE_TMPDIR, and fowners implicitly acts there. But between the call
to emake and the call to fowners, the plugin directory in the mock
installation image is writable by the nagios user. Below we demonstrate
how "nagios" can abuse this to install a malicious plugin.

1. First, add a sleep call to the ebuild to make it easier to exploit
interactively:

     emake DESTDIR="${D}" install-basic
     echo "I'm vulnerable, is it nap time?"
     sleep 15
     fowners root:root /usr/lib64/nagios/plugins

2. Install acct-user/nagios once, so that the unprivileged nagios is
created on the system (in real life, this happens automatically):

    root # emerge -1 acct-user/nagios

3. Initiate an install of net-analyzer/nagios-core:

    root # emerge net-analyzer/nagios-core

4. When the ebuild reaches the sleep call that we added, the plugin
directory in the mock-install image is writable by the nagios user.
Commandeer the nagios user with "su", and place a malicious plugin there:

     root # su -s /bin/sh nagios
     nagios $ touch
/var/tmp/portage/net-analyzer/nagios-core-*/image/usr/lib64/nagios/plugins/exploit.txt

5. Wait for the sleep() to pass, and watch the exploit be installed to
the live system:

     >>> /usr/lib64/nagios/cgi-bin/tac.cgi
     >>> /usr/lib64/nagios/cgi-bin/extinfo.cgi
     >>> /usr/lib64/nagios/cgi-bin/config.cgi
     --- /usr/lib64/nagios/plugins/
     >>> /usr/lib64/nagios/plugins/exploit.txt

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.gentoo.org_fe345afe_20250121_022655.html ===

 [**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites

* [gentoo.org](https://www.gentoo.org/ "Gentoo's main website")
* [Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
* [Bugs](https://bugs.gentoo.org/ "Discover and report issues with Gentoo")
* [Packages](https://packages.gentoo.org/ "Find software to install")
* [Forums](https://forums.gentoo.org/ "Discuss with the community")
* [Planet](https://planet.gentoo.org/ "Find out what's going on in the dev community")
* [Archives](https://archives.gentoo.org/ "Read up on past discussions")
* [Devmanual](https://devmanual.gentoo.org/ "Read the development guide")
* [Gitweb](https://gitweb.gentoo.org/ "Browse our source code in Gitweb")
* [Infra status](https://infra-status.gentoo.org/ "Get updates on the services provided by the Gentoo infra team")

[![Gentoo Linux logo](https://assets.gentoo.org/tyrian/v1/site-logo.png)](/ "Back to the homepage")

Toggle navigation

* [Home](/)
* [Get started](/get-started/)
* [Downloads](/downloads/)
* [Inside Gentoo](/inside-gentoo/)
* [Support](/support/)
* [Get involved](/get-involved/)

* [Donate](/donate/)

Toggle secondary navigation

* [Mirrors](/downloads/mirrors/)
* [Signatures](/downloads/signatures/)

# Downloads

## [amd64 aka x86-64, x64, Intel 64](#amd64)

#### Boot media

[**Minimal Installation CD**
2025-01-19 601 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/install-amd64-minimal-20250119T170328Z.iso)
[**LiveGUI USB Image**
2025-01-19 3 GiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/livegui-amd64-20250119T170328Z.iso)
#### Stage archives

[**Stage 3** openrc
2025-01-19 225 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-openrc-20250119T170328Z.tar.xz)
[**Stage 3** systemd
2025-01-19 231 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-systemd-20250119T170328Z.tar.xz)
[**Stage 3** desktop profile | openrc
2025-01-19 761 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-desktop-openrc-20250119T170328Z.tar.xz)
[**Stage 3** desktop profile | systemd
2025-01-19 763 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-desktop-systemd-20250119T170328Z.tar.xz)
#### Details (contents, hashes, and signatures)

[Minimal Installation CD](https://distfiles.gentoo.org/releases/amd64/autobuilds/current-install-amd64-minimal/),
[Stage 3](https://distfiles.gentoo.org/releases/amd64/autobuilds/current-stage3-amd64-openrc/)

## [arm64 aka AArch64](#arm64)

#### Boot media

[**Minimal Installation CD** EFI
2025-01-19 589 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/install-arm64-minimal-20250119T234827Z.iso)

#### Stage archives

[**Stage 3** openrc
2025-01-19 206 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-openrc-20250119T234827Z.tar.xz)
[**Stage 3** systemd
2025-01-19 210 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-systemd-20250119T234827Z.tar.xz)
[**Stage 3** desktop profile | openrc
2025-01-19 553 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-desktop-openrc-20250119T234827Z.tar.xz)
[**Stage 3** desktop profile | systemd
2025-01-19 554 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-desktop-systemd-20250119T234827Z.tar.xz)
#### Details (contents, hashes, and signatures)

[Minimal Installation CD](https://distfiles.gentoo.org/releases/arm64/autobuilds/current-install-arm64-minimal/),
[Stage 3](https://distfiles.gentoo.org/releases/arm64/autobuilds/current-stage3-arm64-openrc/)

**What should I download? What do I do with these files?**

[Gentoo Handbook](https://wiki.gentoo.org/wiki/Handbook%3AMain_Page)

Please see the [Gentoo Handbook](https://wiki.gentoo.org/wiki/Handbook%3AMain_Page)
for the complete installation documentation.
It explains how you can find the right architecture for your machine and which files you need at what stage of the installation process.

In brief, a **stage 3** is a minimal set of Gentoo binaries that can upgrade and expand itself (but not much more, i.e., no kernel
or boot loader). The desktop version already contains additional programs needed in a typical desktop installation. The installation CD can be
used to boot and, well, install Gentoo.

## Advanced choices and other architectures

* [**amd64**](#amd64-advanced)
* [**alpha**](#alpha)
* [**arm**](#arm)
* [**arm64**](#arm64-advanced)
* [**hppa**](#hppa)
* [**loong**](#loong)
* [**mips**](#mips)
* [**m68k**](#m68k)
* [**ppc**](#ppc)
* [**riscv**](#riscv)
* [**s390**](#s390)
* [**sparc**](#sparc)
* [**x86**](#x86)

### [amd64 – Advanced choices](#amd64-advanced)

#### Processor compatibility

 **Processor compatibility**

The *amd64* architecture is intended for use on AMD 64-bit CPUs as well as 64-bit **Intel Pentium/Core/Xeon** processors.

#### Boot media

[**Minimal Installation CD** openrc
2025-01-19 601 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/install-amd64-minimal-20250119T170328Z.iso)
[**Admin CD** openrc
2025-01-19 787 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/admincd-amd64-20250119T170328Z.iso)
[**LiveGUI USB Image** openrc
2025-01-19 3 GiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/livegui-amd64-20250119T170328Z.iso)
[**QCOW2 disk (no root pw)** no multilib | systemd
2025-01-19 964 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/di-amd64-console-20250119T170328Z.qcow2)
[**QCOW2 disk (cloud-init)** no multilib | systemd
2025-01-19 980 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/di-amd64-cloudinit-20250119T170328Z.qcow2)

 **QCOW2 disk images**

The disk images are full bootable Gentoo installations in qemu's [QCOW2](https://www.qemu.org/docs/master/system/images.html) disk format.
They require UEFI support for booting. One variant comes with no network services and a password-less root account, the other
with access locked by default but [cloud-init](https://cloudinit.readthedocs.io/en/latest/) running on boot.

#### Stage archives

[**Stage 3** openrc
2025-01-19 225 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-openrc-20250119T170328Z.tar.xz)
[**Stage 3** desktop profile | openrc
2025-01-19 761 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-desktop-openrc-20250119T170328Z.tar.xz)
[**Stage 3** systemd
2025-01-19 231 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-systemd-20250119T170328Z.tar.xz)
[**Stage 3** desktop profile | systemd
2025-01-19 763 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-desktop-systemd-20250119T170328Z.tar.xz)
[**Stage 3** no multilib | openrc
2025-01-19 216 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-nomultilib-openrc-20250119T170328Z.tar.xz)
[**Stage 3** no multilib | systemd
2025-01-19 222 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-nomultilib-systemd-20250119T170328Z.tar.xz)
[**Stage 3** x32 | openrc
2025-01-19 243 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-x32-openrc-20250119T170328Z.tar.xz)
[**Stage 3** x32 | systemd
2025-01-19 252 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-x32-systemd-20250119T170328Z.tar.xz)

#### LLVM-based stage archives

[**Stage 3** llvm | openrc
2025-01-19 389 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-llvm-openrc-20250119T170328Z.tar.xz)
[**Stage 3** llvm | systemd
2025-01-19 395 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-llvm-systemd-20250119T170328Z.tar.xz)
#### Hardened stage archives

[**Hardened stage 3** openrc
2025-01-19 226 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-hardened-openrc-20250119T170328Z.tar.xz)
[**H/SELinux stage 3** openrc
2025-01-19 244 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-hardened-selinux-openrc-20250119T170328Z.tar.xz)
#### Musl stage archives

[**Stage 3** musl | openrc
2025-01-19 189 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-musl-20250119T170328Z.tar.xz)
[**Stage 3** musl | llvm | openrc
2025-01-19 218 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-musl-llvm-20250119T170328Z.tar.xz)
[**Hardened stage 3** musl | openrc
2025-01-19 189 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-musl-hardened-20250119T170328Z.tar.xz)

 **Musl stages**

For additional information on using musl based Gentoo systems please see the [Musl usage guide](https://wiki.gentoo.org/wiki/Musl_usage_guide).

#### Split-usr stage archives

[**Stage 3** openrc | split-usr
2025-01-19 225 MiB](https://distfiles.gentoo.org/releases/amd64/autobuilds/20250119T170328Z/stage3-amd64-openrc-splitusr-20250119T170328Z.tar.xz)
#### Details (contents, hashes, and signatures)

* [Minimal Installation CD](https://distfiles.gentoo.org/releases/amd64/autobuilds/current-install-amd64-minimal/)
* [Stage 3](https://distfiles.gentoo.org/releases/amd64/autobuilds/current-stage3-amd64-openrc/)
* [All stages](https://distfiles.gentoo.org/releases/amd64/autobuilds/)

### [alpha](#alpha)

#### Boot media

[**Minimal Installation CD**
2025-01-16 225 MiB](https://distfiles.gentoo.org/releases/alpha/autobuilds/20250116T170329Z/install-alpha-minimal-20250116T170329Z.iso)
#### Stage archives

[**Stage 3** openrc
2025-01-16 223 MiB](https://distfiles.gentoo.org/releases/alpha/autobuilds/20250116T170329Z/stage3-alpha-openrc-20250116T170329Z.tar.xz)
[**Stage 3** systemd
2025-01-16 228 MiB](https://distfiles.gentoo.org/releases/alpha/autobuilds/20250116T170329Z/stage3-alpha-systemd-20250116T170329Z.tar.xz)

#### Details (contents, hashes, and signatures)

* [Minimal Installation CD](https://distfiles.gentoo.org/releases/alpha/autobuilds/current-install-alpha-minimal/)
* [All files](https://distfiles.gentoo.org/releases/alpha/autobuilds/)

### [arm](#arm)

#### Processor compatibility

 **Processor compatibility**

For details of the *arm* architecture, please see [the
corresponding wikipedia page](https://en.wikipedia.org/wiki/ARM_architecture_family). Note that in Gentoo *arm* refers to 32bit variants; the 64bit variants
can be found as *arm64*.

#### ARMv4tl stage archives

[**Stage 3** ARMv4tl | openrc
2025-01-15 191 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv4tl-openrc-20250115T234821Z.tar.xz)
[**Stage 3** ARMv4tl | systemd
2025-01-15 198 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv4tl-systemd-20250115T234821Z.tar.xz)
#### ARMv5tel stage archives

[**Stage 3** ARMv5tel | openrc
2025-01-15 191 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv5tel-openrc-20250115T234821Z.tar.xz)
[**Stage 3** ARMv5tel | systemd
2025-01-15 197 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv5tel-systemd-20250115T234821Z.tar.xz)
#### ARMv6j stage archives

[**Stage 3** ARMv6j | HardFP | openrc
2025-01-15 191 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv6j_hardfp-openrc-20250115T234821Z.tar.xz)
[**Stage 3** ARMv6j | HardFP | systemd
2025-01-15 196 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv6j_hardfp-systemd-20250115T234821Z.tar.xz)
[**Stage 3** ARMv6j | openrc
2025-01-15 191 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv6j-openrc-20250115T234821Z.tar.xz)
[**Stage 3** ARMv6j | systemd
2025-01-15 196 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv6j-systemd-20250115T234821Z.tar.xz)

#### ARMv7a stage archives

[**Stage 3** ARMv7a | HardFP | openrc
2025-01-15 191 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv7a_hardfp-openrc-20250115T234821Z.tar.xz)
[**Stage 3** ARMv7a | HardFP | systemd
2025-01-15 196 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv7a_hardfp-systemd-20250115T234821Z.tar.xz)
[**Stage 3** ARMv7a | openrc
2025-01-15 190 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv7a-openrc-20250115T234821Z.tar.xz)
[**Stage 3** ARMv7a | systemd
2025-01-15 196 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv7a-systemd-20250115T234821Z.tar.xz)
#### Musl stage archives

[**Stage 3** ARMv6j | HardFP | openrc | musl
2025-01-15 166 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv6j_hardfp_musl-openrc-20250115T234821Z.tar.xz)
[**Hardened Stage 3** ARMv6j | HardFP | openrc | musl
2025-01-15 167 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv6j_hardfp_musl-hardened-openrc-20250115T234821Z.tar.xz)
[**Stage 3** ARMv7a | HardFP | openrc | musl
2025-01-15 165 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv7a_hardfp_musl-openrc-20250115T234821Z.tar.xz)
[**Hardened Stage 3** ARMv7a | HardFP | openrc | musl
2025-01-15 166 MiB](https://distfiles.gentoo.org/releases/arm/autobuilds/20250115T234821Z/stage3-armv7a_hardfp_musl-hardened-openrc-20250115T234821Z.tar.xz)

 **Musl stages**

For additional information on using musl based Gentoo systems please see the [Musl usage guide](https://wiki.gentoo.org/wiki/Musl_usage_guide).

#### Details (contents, hashes, and signatures)

* [All files](https://distfiles.gentoo.org/releases/arm/autobuilds/)

### [arm64](#arm64-advanced)

#### Boot media

[**Minimal Installation CD** EFI | openrc
2025-01-19 589 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/install-arm64-minimal-20250119T234827Z.iso)
[**QCOW2 disk (no root pw)** EFI | systemd
2025-01-19 908 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/di-arm64-console-20250119T234827Z.qcow2)
[**QCOW2 disk (cloud-init)** EFI | systemd
2025-01-19 924 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/di-arm64-cloudinit-20250119T234827Z.qcow2)
#### Stage archives

[**Stage 3** openrc
2025-01-19 206 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-openrc-20250119T234827Z.tar.xz)
[**Stage 3** desktop profile | openrc
2025-01-19 553 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-desktop-openrc-20250119T234827Z.tar.xz)
[**Stage 3** systemd
2025-01-19 210 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-systemd-20250119T234827Z.tar.xz)
[**Stage 3** desktop profile | systemd
2025-01-19 554 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-desktop-systemd-20250119T234827Z.tar.xz)
#### LLVM-based stage archives

[**Stage 3** llvm | openrc
2025-01-19 297 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-llvm-openrc-20250119T234827Z.tar.xz)
[**Stage 3** llvm | systemd
2025-01-19 303 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-llvm-systemd-20250119T234827Z.tar.xz)

#### Musl stage archives

[**Stage 3** musl | openrc
2025-01-19 178 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-musl-20250119T234827Z.tar.xz)
[**Stage 3** musl | llvm | openrc
2025-01-19 203 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-musl-llvm-20250119T234827Z.tar.xz)
[**Hardened Stage 3** musl | openrc
2025-01-19 179 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-musl-hardened-20250119T234827Z.tar.xz)
#### Big-Endian Stage archives

[**Stage 3** eb | openrc
2024-10-12 207 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20241012T164823Z/stage3-aarch64_be-openrc-20241012T164823Z.tar.xz)
[**Stage 3** eb | systemd
2024-10-12 213 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20241012T164823Z/stage3-aarch64_be-systemd-20241012T164823Z.tar.xz)
#### Split-usr stage archives

[**Stage 3** openrc | split-usr
2025-01-19 205 MiB](https://distfiles.gentoo.org/releases/arm64/autobuilds/20250119T234827Z/stage3-arm64-openrc-splitusr-20250119T234827Z.tar.xz)

 **Musl stages**

For additional information on using musl based Gentoo systems please see the [Musl usage guide](https://wiki.gentoo.org/wiki/Musl_usage_guide).

#### Details (contents, hashes, and signatures)

* [All files](https://distfiles.gentoo.org/releases/arm64/autobuilds/)

### [hppa](#hppa)

#### Boot media

[**Minimal Installation CD**
2023-04-18 158 MiB](https://distfiles.gentoo.org/releases/hppa/autobuilds/20230418T174657Z/install-hppa-minimal-20230418T174657Z.iso)
[**Netboot** HPPA32
2023-04-18 20 MiB](https://distfiles.gentoo.org/releases/hppa/autobuilds/20230418T174657Z/netboot-hppa32-20230418T174657Z.lif)
[**Netboot** HPPA64
2019-11-01 21 MiB](https://distfiles.gentoo.org/releases/hppa/autobuilds/20191101T093009Z/netboot-hppa64-20191101T093009Z.lif)
#### HPPA 1.1 stage archives

[**Stage 3** HPPA 1.1 | openrc
2024-12-31 204 MiB](https://distfiles.gentoo.org/releases/hppa/autobuilds/20241231T084836Z/stage3-hppa1.1-openrc-20241231T084836Z.tar.xz)
[**Stage 3** HPPA 1.1 | systemd
2024-12-31 226 MiB](https://distfiles.gentoo.org/releases/hppa/autobuilds/20241231T084836Z/stage3-hppa1.1-systemd-20241231T084836Z.tar.xz)

#### HPPA 2.0 stage archives

[**Stage 3** HPPA 2.0 | openrc
2024-12-24 200 MiB](https://distfiles.gentoo.org/releases/hppa/autobuilds/20241224T074835Z/stage3-hppa2.0-openrc-20241224T074835Z.tar.xz)
[**Stage 3** HPPA 2.0 | systemd
2024-12-24 221 MiB](https://distfiles.gentoo.org/releases/hppa/autobuilds/20241224T074835Z/stage3-hppa2.0-systemd-20241224T074835Z.tar.xz)
#### Details (contents, hashes, and signatures)

* [All files](https://distfiles.gentoo.org/releases/hppa/autobuilds/)

### [loong](#loong)

#### Stage archives

[**Stage 3** openrc
2025-01-14 223 MiB](https://distfiles.gentoo.org/releases/loong/autobuilds/20250114T164825Z/stage3-loong-openrc-20250114T164825Z.tar.xz)
[**Stage 3** systemd
2025-01-14 230 MiB](https://distfiles.gentoo.org/releases/loong/autobuilds/20250114T164825Z/stage3-loong-systemd-20250114T164825Z.tar.xz)

#### Details (contents, hashes, and signatures)

* [All files](https://distfiles.gentoo.org/releases/loong/autobuilds/)

### [mips](#mips)

#### Processor compatibility

 **Processor compatibility**

For details of the *mips* architecture, please see [the
corresponding wikipedia page](https://en.wikipedia.org/wiki/MIPS_architecture).

#### Stage archives, little-endian O32

[**Stage 3** mips2 | o32 | sf | el | openrc
2025-01-18 216 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mipsel2_softfloat-openrc-20250118T031820Z.tar.xz)
[**Stage 3** mips2 | o32 | sf | el | systemd
2025-01-18 221 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mipsel2_softfloat-systemd-20250118T031820Z.tar.xz)
[**Stage 3** mips2 | o32 | el | openrc
2025-01-18 216 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mipsel2-openrc-20250118T031820Z.tar.xz)
[**Stage 3** mips2 | o32 | el | systemd
2025-01-18 220 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mipsel2-systemd-20250118T031820Z.tar.xz)
#### Stage archives, big-endian O32

[**Stage 3** mips2 | o32 | sf | eb | openrc
2025-01-18 214 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mips2_softfloat-openrc-20250118T031820Z.tar.xz)
[**Stage 3** mips2 | o32 | sf | eb | systemd
2025-01-18 219 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mips2_softfloat-systemd-20250118T031820Z.tar.xz)
[**Stage 3** mips2 | o32 | eb | openrc
2025-01-18 214 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mips2-openrc-20250118T031820Z.tar.xz)
[**Stage 3** mips2 | o32 | eb | systemd
2025-01-18 219 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mips2-systemd-20250118T031820Z.tar.xz)
#### Stage archives, little-endian N32

[**Stage 3** mips3 | n32 | el | openrc
2025-01-06 194 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250106T043339Z/stage3-mipsel3_n32-openrc-20250106T043339Z.tar.xz)
[**Stage 3** mips3 | n32 | el | systemd
2025-01-06 199 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250106T043339Z/stage3-mipsel3_n32-systemd-20250106T043339Z.tar.xz)
#### Stage archives, big-endian N32

[**Stage 3** mips3 | n32 | eb | openrc
2025-01-06 193 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250106T043339Z/stage3-mips3_n32-openrc-20250106T043339Z.tar.xz)
[**Stage 3** mips3 | n32 | eb | systemd
2025-01-06 197 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250106T043339Z/stage3-mips3_n32-systemd-20250106T043339Z.tar.xz)

#### Stage archives, little-endian N64

[**Stage 3** mips3 | n64 | el | openrc
2025-01-07 197 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250107T044840Z/stage3-mipsel3_n64-openrc-20250107T044840Z.tar.xz)
[**Stage 3** mips3 | n64 | el | systemd
2025-01-07 201 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250107T044840Z/stage3-mipsel3_n64-systemd-20250107T044840Z.tar.xz)
#### Stage archives, big-endian N64

[**Stage 3** mips3 | n64 | eb | openrc
2025-01-07 194 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250107T044840Z/stage3-mips3_n64-openrc-20250107T044840Z.tar.xz)
[**Stage 3** mips3 | n64 | eb | systemd
2025-01-07 199 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250107T044840Z/stage3-mips3_n64-systemd-20250107T044840Z.tar.xz)
#### Stage archives, little-endian multilib

[**Stage 3** mips3 | n32 | multilib | el | openrc
2025-01-16 224 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250116T050347Z/stage3-mipsel3_multilib-openrc-20250116T050347Z.tar.xz)
[**Stage 3** mips3 | n32 | multilib | el | systemd
2025-01-16 228 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250116T050347Z/stage3-mipsel3_multilib-systemd-20250116T050347Z.tar.xz)
#### Stage archives, big-endian multilib

[**Stage 3** mips3 | n32 | multilib | eb | openrc
2025-01-16 222 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250116T050347Z/stage3-mips3_multilib-openrc-20250116T050347Z.tar.xz)
[**Stage 3** mips3 | n32 | multilib | eb | systemd
2025-01-16 227 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250116T050347Z/stage3-mips3_multilib-systemd-20250116T050347Z.tar.xz)
#### Musl stage archives

[**Stage 3** mips2 | o32 | musl | el | openrc
2025-01-18 189 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mipsel2_musl-20250118T031820Z.tar.xz)
[**Stage 3** mips2 | o32 | musl | eb | openrc
2025-01-18 188 MiB](https://distfiles.gentoo.org/releases/mips/autobuilds/20250118T031820Z/stage3-mips2_musl-20250118T031820Z.tar.xz)

 **Musl stages**

For additional information on using musl based Gentoo systems please see the [Musl usage guide](https://wiki.gentoo.org/wiki/Musl_usage_guide).

#### Details (contents, hashes, and signatures)

[All files](https://distfiles.gentoo.org/releases/mips/autobuilds/)

### [m68k](#m68k)

#### Stage archives

[**Stage 3** openrc
2024-12-25 173 MiB](https://distfiles.gentoo.org/releases/m68k/autobuilds/20241225T154852Z/stage3-m68k-openrc-20241225T154852Z.tar.xz)
[**Stage 3** systemd
2024-12-25 179 MiB](https://distfiles.gentoo.org/releases/m68k/autobuilds/20241225T154852Z/stage3-m68k-systemd-20241225T154852Z.tar.xz)
#### Musl stage archives

[**Stage 3** musl | openrc
2024-05-15 199 MiB](https://distfiles.gentoo.org/releases/m68k/autobuilds/20240515T165044Z/stage3-m68k_musl-20240515T165044Z.tar.xz)

 **Musl stages**

For additional information on using musl based Gentoo systems please see the [Musl usage guide](https://wiki.gentoo.org/wiki/Musl_usage_guide).

#### Details (contents, hashes, and signatures)

* [All files](https://distfiles.gentoo.org/releases/m68k/autobuilds/)

### [ppc](#ppc)

#### Processor compatibility

 **Processor compatibility**

PowerPC CPUs can operate in two modes: *big-endian* and *little-endian*.

* The **ppc** and **ppc64** stages are *big-endian* stages and can be used with *any PowerPC* CPU, including some old Apple™ hardware.
* The **ppc64le** stages are *little-endian* stages and are created for running on *POWER8 and newer* CPUs.
* The **power9le** stages are *little-endian* stages optimized exclusively for *POWER9* CPUs.

#### Boot media

[**PPC/PPC64 Minimal Installation CD**
2025-01-16 346 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250116T010339Z/install-powerpc-minimal-20250116T010339Z.iso)
[**PPC64LE Minimal Installation CD**
2025-01-15 760 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250115T014828Z/install-ppc64le-minimal-20250115T014828Z.iso)
#### Stage archives, big-endian ppc and ppc64

[**PPC stage 3** openrc
2025-01-16 204 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250116T010339Z/stage3-ppc-openrc-20250116T010339Z.tar.xz)
[**PPC stage 3** systemd
2025-01-16 210 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250116T010339Z/stage3-ppc-systemd-20250116T010339Z.tar.xz)
[**PPC64 stage 3** openrc
2025-01-16 205 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250116T010339Z/stage3-ppc64-openrc-20250116T010339Z.tar.xz)
[**PPC64 stage 3** systemd
2025-01-16 211 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250116T010339Z/stage3-ppc64-systemd-20250116T010339Z.tar.xz)

#### Stage archives, little-endian ppc64le

[**PPC64LE stage 3** openrc
2025-01-15 212 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250115T014828Z/stage3-ppc64le-openrc-20250115T014828Z.tar.xz)
[**PPC64LE stage 3** systemd
2025-01-15 218 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250115T014828Z/stage3-ppc64le-systemd-20250115T014828Z.tar.xz)
[**PPC64LE stage 3** power9 | openrc
2025-01-15 210 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250115T014828Z/stage3-power9le-openrc-20250115T014828Z.tar.xz)
[**PPC64LE stage 3** power9 | desktop profile | openrc
2025-01-15 644 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250115T014828Z/stage3-power9le-desktop-openrc-20250115T014828Z.tar.xz)
[**PPC64LE stage 3** power9 | systemd
2025-01-15 215 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250115T014828Z/stage3-power9le-systemd-20250115T014828Z.tar.xz)
[**PPC64LE stage 3** power9 | desktop profile | systemd
 0 B](https://distfiles.gentoo.org/releases/ppc/autobuilds/)
#### Hardened / musl stage archives

[**PPC stage 3** musl | openrc
2025-01-16 178 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250116T010339Z/stage3-ppc-musl-hardened-openrc-20250116T010339Z.tar.xz)
[**PPC64 stage 3** musl | openrc
2025-01-16 177 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250116T010339Z/stage3-ppc64-musl-hardened-openrc-20250116T010339Z.tar.xz)
[**PPC64LE stage 3** musl | openrc
2025-01-15 183 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250115T014828Z/stage3-ppc64le-musl-hardened-openrc-20250115T014828Z.tar.xz)
[**PPC64LE stage 3** musl | openrc | power9
2025-01-15 183 MiB](https://distfiles.gentoo.org/releases/ppc/autobuilds/20250115T014828Z/stage3-power9le-musl-hardened-openrc-20250115T014828Z.tar.xz)

 **Musl stages**

For additional information on using musl based Gentoo systems please see the [Musl usage guide](https://wiki.gentoo.org/wiki/Musl_usage_guide).

#### Details (contents, hashes, and signatures)

* [All files](https://distfiles.gentoo.org/releases/ppc/autobuilds/)

### [riscv](#riscv)

#### Processor compatibility

 **Processor compatibility**

The *lp64d* stages can be used on all 64-bit RISC-V processors supporting the **double-precision floating point** instruction set.
The *lp64* stages can be used on all 64-bit RISC-V processors; they require no hardware support for floating point arithmetics.
Multilib stages include toolchain support for all 64-bit and 32-bit ABI and are based on lp64d. They are mostly useful for development and testing purposes.

The *ilp32d* stages can be used on all 32-bit RISC-V processors supporting the **double-precision floating point** instruction set.
The *ilp32* stages can be used on all 32-bit RISC-V processors; they require no hardware support for floating point arithmetics.

#### Stage archives (RV64)

[**Stage 3** rv64gc | lp64d | openrc
2025-01-16 254 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv64_lp64d-openrc-20250116T141832Z.tar.xz)
[**Stage 3** rv64gc | lp64d | systemd
2025-01-16 261 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv64_lp64d-systemd-20250116T141832Z.tar.xz)
[**Stage 3** rv64gc | lp64 | openrc
2025-01-16 254 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv64_lp64-openrc-20250116T141832Z.tar.xz)
[**Stage 3** rv64gc | lp64 | systemd
2025-01-16 260 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv64_lp64-systemd-20250116T141832Z.tar.xz)
[**Stage 3** rv64gc | multilib | openrc
2025-01-16 300 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv64_multilib-openrc-20250116T141832Z.tar.xz)
[**Stage 3** rv64gc | multilib | systemd
2025-01-16 305 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv64_multilib-systemd-20250116T141832Z.tar.xz)

#### Stage archives (RV32)

[**Stage 3** rv32gc | ilp32d | openrc
2025-01-16 250 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv32_ilp32d-openrc-20250116T141832Z.tar.xz)
[**Stage 3** rv32gc | ilp32d | systemd
2025-01-16 256 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv32_ilp32d-systemd-20250116T141832Z.tar.xz)
[**Stage 3** rv32gc | ilp32 | openrc
2025-01-16 251 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv32_ilp32-openrc-20250116T141832Z.tar.xz)
[**Stage 3** rv32gc | ilp32 | systemd
2025-01-16 256 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv32_ilp32-systemd-20250116T141832Z.tar.xz)
#### Musl stage archives

[**Stage 3** rv64gc | lp64d | musl | openrc
2025-01-16 227 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv64_lp64d_musl-20250116T141832Z.tar.xz)
[**Stage 3** rv64gc | lp64 | musl | openrc
2025-01-16 227 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv64_lp64_musl-20250116T141832Z.tar.xz)
[**Stage 3** rv32gc | ilp32d | musl | openrc
2025-01-16 223 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv32_ilp32d_musl-20250116T141832Z.tar.xz)
[**Stage 3** rv32gc | ilp32 | musl | openrc
2025-01-16 223 MiB](https://distfiles.gentoo.org/releases/riscv/autobuilds/20250116T141832Z/stage3-rv32_ilp32_musl-20250116T141832Z.tar.xz)

 **Musl stages**

For additional information on using musl based Gentoo systems please see the [Musl usage guide](https://wiki.gentoo.org/wiki/Musl_usage_guide).

#### Details (contents, hashes, and signatures)

[All files](https://distfiles.gentoo.org/releases/riscv/autobuilds/)

### [s390](#s390)

#### Boot media

[**Netboot initramfs** s390
2025-01-04 9 MiB](https://distfiles.gentoo.org/releases/s390/autobuilds/20250104T073342Z/netboot-s390-initramfs-20250104T073342Z)
[**Netboot kernel** s390
2025-01-04 3 MiB](https://distfiles.gentoo.org/releases/s390/autobuilds/20250104T073342Z/netboot-s390-kernel-20250104T073342Z)
[**Netboot initramfs** s390x
2025-01-04 9 MiB](https://distfiles.gentoo.org/releases/s390/autobuilds/20250104T073342Z/netboot-s390x-initramfs-20250104T073342Z)
[**Netboot kernel** s390x
2025-01-04 3 MiB](https://distfiles.gentoo.org/releases/s390/autobuilds/20250104T073342Z/netboot-s390x-kernel-20250104T073342Z)
#### Stage archives

[**Stage 3** s390 | openrc
2025-01-04 222 MiB](https://distfiles.gentoo.org/releases/s390/autobuilds/20250104T073342Z/stage3-s390-openrc-20250104T073342Z.tar.xz)
[**Stage 3** s390 | systemd
2025-01-04 227 MiB](https://distfiles.gentoo.org/releases/s390/autobuilds/20250104T073342Z/stage3-s390-systemd-20250104T073342Z.tar.xz)
[**Stage 3** s390x | openrc
2025-01-18 244 MiB](https://distfiles.gentoo.org/releases/s390/autobuilds/20250118T090436Z/stage3-s390x-openrc-20250118T090436Z.tar.xz)
[**Stage 3** s390x | systemd
2025-01-04 230 MiB](https://distfiles.gentoo.org/releases/s390/autobuilds/20250104T073342Z/stage3-s390x-systemd-20250104T073342Z.tar.xz)

#### Details (contents, hashes, and signatures)

* [All files](https://distfiles.gentoo.org/releases/s390/autobuilds/)

### [sparc](#sparc)

#### Boot media

[**Minimal Installation CD**
2025-01-06 414 MiB](https://distfiles.gentoo.org/releases/sparc/autobuilds/20250106T113537Z/install-sparc64-minimal-20250106T113537Z.iso)
#### Stage archives

[**Stage 3 (64-bit userland)** openrc
2025-01-06 199 MiB](https://distfiles.gentoo.org/releases/sparc/autobuilds/20250106T113537Z/stage3-sparc64-openrc-20250106T113537Z.tar.xz)
[**Stage 3 (64-bit userland)** systemd
2025-01-06 204 MiB](https://distfiles.gentoo.org/releases/sparc/autobuilds/20250106T113537Z/stage3-sparc64-systemd-20250106T113537Z.tar.xz)
[**Stage 3 (32-bit userland)** openrc
2025-01-06 194 MiB](https://distfiles.gentoo.org/releases/sparc/autobuilds/20250106T113537Z/stage3-sparc-openrc-20250106T113537Z.tar.xz)
[**Stage 3 (32-bit userland)** systemd
2024-12-30 198 MiB](https://distfiles.gentoo.org/releases/sparc/autobuilds/20241230T104842Z/stage3-sparc-systemd-20241230T104842Z.tar.xz)

#### Details (contents, hashes, and signatures)

* [Minimal Installation CD](https://distfiles.gentoo.org/releases/sparc/autobuilds/current-install-sparc64-minimal/)
* [All files](https://distfiles.gentoo.org/releases/sparc/autobuilds/)

### [x86](#x86)

#### Processor compatibility

 **Processor compatibility**

There are two builds of the *x86* architecture: *i486* and *i686*.

#### Boot media

[**Minimal Installation CD**
2025-01-13 536 MiB](https://distfiles.gentoo.org/releases/x86/autobuilds/20250113T163325Z/install-x86-minimal-20250113T163325Z.iso)
[**Admin CD**
2024-12-09 676 MiB](https://distfiles.gentoo.org/releases/x86/autobuilds/20241209T170323Z/admincd-x86-20241209T170323Z.iso)
#### Stage archives

[**Stage 3** i686 | openrc
2025-01-13 218 MiB](https://distfiles.gentoo.org/releases/x86/autobuilds/20250113T163325Z/stage3-i686-openrc-20250113T163325Z.tar.xz)
[**Stage 3** i686 | systemd
2025-01-13 224 MiB](https://distfiles.gentoo.org/releases/x86/autobuilds/20250113T163325Z/stage3-i686-systemd-20250113T163325Z.tar.xz)
[**Stage 3** i486 | openrc
2025-01-13 220 MiB](https://distfiles.gentoo.org/releases/x86/autobuilds/20250113T163325Z/stage3-i486-openrc-20250113T163325Z.tar.xz)
[**Stage 3** i486 | systemd
2025-01-13 226 MiB](https://distfiles.gentoo.org/releases/x86/autobuilds/20250113T163325Z/stage3-i486-systemd-20250113T163325Z.tar.xz)

#### Hardened stage archives

[**Hardened stage 3** i686 | openrc
2025-01-13 219 MiB](https://distfiles.gentoo.org/releases/x86/autobuilds/20250113T163325Z/stage3-i686-hardened-openrc-20250113T163325Z.tar.xz)
#### Musl stage archives

[**Stage 3** i686 | openrc | musl
2025-01-13 191 MiB](https://distfiles.gentoo.org/releases/x86/autobuilds/20250113T163325Z/stage3-i686-musl-20250113T163325Z.tar.xz)

 **Musl stages**

For additional information on using musl based Gentoo systems please see the [Musl usage guide](https://wiki.gentoo.org/wiki/Musl_usage_guide).

#### Details (contents, hashes, and signatures)

* [Minimal Installation CD](https://distfiles.gentoo.org/releases/x86/autobuilds/current-install-x86-minimal/)
* [All files](https://distfiles.gentoo.org/releases/x86/autobuilds/)

## Experimental downloads

For additional highly experimental downloads across all architectures
please refer to the [complete
experimental downloads archive](https://distfiles.gentoo.org/experimental/). Hic sunt dracones.[#](https://en.wikipedia.org/wiki/Here_be_dragons)

### Questions or comments?

Please feel free to [contact us](/inside-gentoo/contact/).

### [Home](/)

* [News](/news/)

### [Get Started](/get-started/)

* [About Gentoo](/get-started/about/)
* [Philosophy](/get-started/philosophy/)
* [Screenshots](/get-started/screenshots/)
* [FAQ](https://wiki.gentoo.org/wiki/FAQ)

### [Downloads](/downloads/)

* [Mirrors](/downloads/mirrors/)
* [Signatures](/downloads/signatures/)

### [Inside Gentoo](/inside-gentoo/)

* [Developers](/inside-gentoo/developers/)
* [Projects](https://wiki.gentoo.org/wiki/Project%3AGentoo)
* [GLEPs](/glep/)
* [Artwork](/inside-gentoo/artwork/)
* [Gentoo Foundation](/inside-gentoo/foundation/)
* [Sponsors](/inside-gentoo/sponsors/)
* [Stores](/inside-gentoo/stores/)
* [Contact](/inside-gentoo/contact/)

### [Support](/support/)

* [Consulting](/support/consulting/)
* [Documentation](/support/documentation/)
* [Package database](https://packages.gentoo.org/)
* [Repository news items](/support/news-items/)
* [Security](/support/security/)
* [USE flags](/support/use-flags/)
* [rsync mirrors](/support/rsync-mirrors/)

### [Get Involved](/get-involved/)

* [IRC channels](/get-involved/irc-channels/)
* [Forums](https://forums.gentoo.org/)
* [Mailing lists](/get-involved/mailing-lists/)
* [Contribute](/get-involved/contribute/)
* [Become a developer](/get-involved/become-developer/)
* [Get the code](/get-involved/get-code/)

[Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)

**© 2001-2025 Gentoo Authors**

Gentoo is a trademark of the Gentoo Foundation, Inc. and of FÃ¶rderverein Gentoo e.V.
The contents of this document, unless otherwise expressly stated, are licensed under the
[CC-BY-SA-4.0](https://creativecommons.org/licenses/by-sa/4.0/) license.
The [Gentoo Name and Logo Usage Guidelines](/inside-gentoo/foundation/name-logo-guidelines.html) apply.

**Version**



=== Content from bugs.gentoo.org_188eea5d_20250121_022658.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 692492
sys-apps/portage: insecure temporary location (CVE-2019-20384)
Last modified: 2022-04-11 20:36:28 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=692492&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=692492&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 692492**](show_bug.cgi?id=692492)
(CVE-2019-20384)
- sys-apps/portage: insecure temporary location (CVE-2019-20384)

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
sys-apps/portage: insecure temporary location (CVE-2019-20384)

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2019-20384 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Portage Development | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Portage Development "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Core ([show other bugs](buglist.cgi?component=Core&product=Portage%20Development&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Portage team | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") | InVCS | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [711148](show_bug.cgi?id=711148 "RESOLVED FIXED - [TRACKER] sys-apps/portage-2.3.99-r2") | |  | Show dependency [tree](showdependencytree.cgi?id=692492&hide_resolved=1) | |  | | Reported: | 2019-08-19 01:54 UTC by Michael Orlitzky | | --- | --- | | Modified: | 2022-04-11 20:36 UTC ([History](show_activity.cgi?id=692492)) | | CC List: | 6 users (show)  flow hanno kfm nobrowser sam security | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=692492&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=692492&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Michael Orlitzky   gentoo-dev  2019-08-19 01:54:03 UTC  ``` Ebuilds do a lot of unsafe things in the src_* phases. In particular, they call chown/chmod via fowners/fperms on paths that may be user-controlled, and they install files (as root) from user-controlled paths. The ebuild author may not even be aware that these paths are user-controlled; many build systems set weird permissions on paths like /usr or /var (in $D) that are then ignored by src_install(), which ultimately has no visible effect on the live filesystem.  For an example of the latter situation, consider the still-unfixed CVE-2017-14312. A natural solution to that problem is to call "fowners" on the executables, to make them root:root again. But doing so leaves a substantial about of time where those executables are writable by the unprivileged user.  Which brings me to the point of this bug report: the temporary location that portage uses for its installation image is predictable, and it's fairly easy for a long-running unprivileged daemon to gain root by messing with /var/tmp/portage/<predictable-path>.  For a proof of concept, I can use my own nagios-core package. First we modify the ebuild to make it easy to exploit interactively,          emake DESTDIR="${D}" install-basic +       echo "${D}/usr/$(get_libdir)/nagios/plugins vulnerable, sleeping..." +       sleep 15 +       echo "Fixing ownership on ${D}/usr/$(get_libdir)/nagios/plugins."         fowners root:root /usr/$(get_libdir)/nagios/plugins  and then during that sleep interval,  $ sudo su -s /bin/sh nagios -c 'touch /var/tmp/portage/net-analyzer/nagios-core-4.4.4/image/usr/lib64/nagios/plugins/exploit.txt'  This leads to the exploit.txt being installed to a root-owned location:    ...   >>> /usr/lib64/nagios/cgi-bin/tac.cgi   >>> /usr/lib64/nagios/cgi-bin/extinfo.cgi   >>> /usr/lib64/nagios/cgi-bin/config.cgi   --- /usr/lib64/nagios/plugins/   >>> /usr/lib64/nagios/plugins/exploit.txt  This is a mild example, but is still pretty bad because that plugin directory is akin to /usr/bin for nagios users. If I made exploit.txt look legitimate and executable, root could conceivably run it. With some imagination, you can trick many ebuilds (especially with fowners) into giving you root directly.  Ultimately this is the fault of the ebuild: developers should know that when they're manipulating the installation image, they're doing it as root, and that all of the usual precautions apply. But, it's naive to rely on hundreds of developers to be so meticulous. It's also impractical: to fix the proof-of-concept above, I have to reimplement the "make install" command that installs the plugins, and I don't want to do that.  Portage is in a position to mitigate this entire class of vulnerabilities by e.g. making the temporary location unpredictable. ```  [Comment 1](#c1)  Zac Medico   gentoo-dev  2019-08-19 02:16:45 UTC  ``` Using an entirely unpredictable location would be problematic for current behavior of the ebuild(1) command since it can be invoked multiple times with the intention of operating on a predictable location.  How about if we set secure permissions on the parent directory? We've already got a secure default PORTAGE_WORKDIR_MODE="0700" setting that applies to ${WORKDIR}, and we could apply it to the parent directory. ```  [Comment 2](#c2)  Michael Orlitzky   gentoo-dev  2019-08-19 02:25:23 UTC  ``` (In reply to Zac Medico from [comment #1](show_bug.cgi?id=692492#c1)) >  > How about if we set secure permissions on the parent directory? We've > already got a secure default PORTAGE_WORKDIR_MODE="0700" setting that > applies to ${WORKDIR}, and we could apply it to the parent directory.  I think that should work too. ```  [Comment 3](#c3)  Daniel Robbins    2020-01-21 05:13:07 UTC  ``` Couldn't the permissions of /var/tmp/portage simply be changed to deny all access to 'other' (chmod o-rwx)? This would deny access of arbitrary accounts to anything inside /var/tmp/portage.  The would limit access to the portage user and the portage group, which is generally much more tightly controlled and 'trusted'. ```  [Comment 4](#c4)  Zac Medico   gentoo-dev  2020-01-21 05:27:09 UTC  ``` (In reply to Daniel Robbins from [comment #3](show_bug.cgi?id=692492#c3)) > Couldn't the permissions of /var/tmp/portage simply be changed to deny all > access to 'other' (chmod o-rwx)? This would deny access of arbitrary > accounts to anything inside /var/tmp/portage. >  > The would limit access to the portage user and the portage group, which is > generally much more tightly controlled and 'trusted'.  Sure, that will give similar protection to the PORTAGE_WORKDIR_MODE approach from [comment #1](show_bug.cgi?id=692492#c1). I can't think of a reason not to apply PORTAGE_WORKDIR_MODE to PORTAGE_TMPDIR. ```  [Comment 5](#c5)  Zac Medico   gentoo-dev  2020-03-15 00:56:40 UTC  ``` (In reply to Zac Medico from [comment #4](show_bug.cgi?id=692492#c4)) > (In reply to Daniel Robbins from [comment #3](show_bug.cgi?id=692492#c3)) > > Couldn't the permissions of /var/tmp/portage simply be changed to deny all > > access to 'other' (chmod o-rwx)? This would deny access of arbitrary > > accounts to anything inside /var/tmp/portage. > >  > > The would limit access to the portage user and the portage group, which is > > generally much more tightly controlled and 'trusted'. >  > Sure, that will give similar protection to the PORTAGE_WORKDIR_MODE approach > from [comment #1](show_bug.cgi?id=692492#c1). I can't think of a reason not to apply PORTAGE_WORKDIR_MODE > to PORTAGE_TMPDIR.  Actually, the default PORTAGE_WORKDIR_MODE="0700" setting is a little too restrictive for PORTAGE_TMPDIR, since normally this directory is writable by trusted users in the portage group.  This patch will apply PORTAGE_WORKDIR_MODE to the PORTAGE_BUILDDIR parent directory, as suggested in [comment #1](show_bug.cgi?id=692492#c1):  <https://archives.gentoo.org/gentoo-portage-dev/message/4aed84c475a00594be4d53ef94643220> <https://github.com/gentoo/portage/pull/533> ```  [Comment 6](#c6)  Larry the Git Cow   gentoo-dev  2020-03-15 01:24:34 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/proj/portage.git/commit/?id=ef8c21e59953aa5fdd153f19b7bf04356e2164fe>  commit ef8c21e59953aa5fdd153f19b7bf04356e2164fe Author:     Zac Medico <zmedico@gentoo.org> AuthorDate: 2020-03-15 00:01:25 +0000 Commit:     Zac Medico <zmedico@gentoo.org> CommitDate: 2020-03-15 00:42:43 +0000      _prepare_workdir: apply PORTAGE_WORKDIR_MODE to PORTAGE_BUILDDIR ([bug 692492](show_bug.cgi?id=692492 "RESOLVED FIXED - sys-apps/portage: insecure temporary location (CVE-2019-20384)"))          Apply secure PORTAGE_WORKDIR_MODE permissions to PORTAGE_BUILDDIR,     since the child directory ${D} and its children may have vulnerable     permissions as reported in [bug 692492](show_bug.cgi?id=692492 "RESOLVED FIXED - sys-apps/portage: insecure temporary location (CVE-2019-20384)").          Bug: <https://bugs.gentoo.org/692492>     Signed-off-by: Zac Medico <zmedico@gentoo.org>   lib/portage/package/ebuild/prepare_build_dirs.py | 21 ++++++++++++++-------  1 file changed, 14 insertions(+), 7 deletions(-) ```  [Comment 7](#c7)  Larry the Git Cow   gentoo-dev  2020-03-15 01:29:35 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=729dc030f6b318f84ca6336c7bd7dddaa7e48040>  commit 729dc030f6b318f84ca6336c7bd7dddaa7e48040 Author:     Zac Medico <zmedico@gentoo.org> AuthorDate: 2020-03-15 01:23:23 +0000 Commit:     Zac Medico <zmedico@gentoo.org> CommitDate: 2020-03-15 01:29:25 +0000      sys-apps/portage: Bump to version 2.3.94           #692492 secure ebuild ${D} permissions      #710444 omit zstd --long=31 for decompress on 32-bit arch      #712298 respect emerge --deep=<depth> with --update          Bug: <https://bugs.gentoo.org/711148>     Bug: <https://bugs.gentoo.org/692492>     Bug: <https://bugs.gentoo.org/710444>     Bug: <https://bugs.gentoo.org/712298>     Package-Manager: Portage-2.3.94, Repoman-2.3.20     Signed-off-by: Zac Medico <zmedico@gentoo.org>   sys-apps/portage/Manifest              |   1 +  sys-apps/portage/portage-2.3.94.ebuild | 271 +++++++++++++++++++++++++++++++++  2 files changed, 272 insertions(+) ```  [Comment 8](#c8)  Larry the Git Cow   gentoo-dev  2020-05-25 00:45:49 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=7f03ec4a46055a75eb13bf5fad85cf451822f589>  commit 7f03ec4a46055a75eb13bf5fad85cf451822f589 Author:     Zac Medico <zmedico@gentoo.org> AuthorDate: 2020-05-25 00:43:07 +0000 Commit:     Zac Medico <zmedico@gentoo.org> CommitDate: 2020-05-25 00:43:23 +0000      sys-apps/portage: Remove vulnerable 2.3.89-r3 for [bug 692492](show_bug.cgi?id=692492 "RESOLVED FIXED - sys-apps/portage: insecure temporary location (CVE-2019-20384)")          Bug: <https://bugs.gentoo.org/692492>     Package-Manager: Portage-2.3.100, Repoman-2.3.22     Signed-off-by: Zac Medico <zmedico@gentoo.org>   sys-apps/portage/Manifest                 |   1 -  sys-apps/portage/portage-2.3.89-r3.ebuild | 271 ------------------------------  2 files changed, 272 deletions(-) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=692492)
* - [XML](show_bug.cgi?ctype=xml&id=692492)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=692492)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=692492&product=Portage%20Development)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=692492&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=692492&GoAheadAndLogIn=1#forgot)
    Login:

    [x]


