=== Content from plugins.jenkins.io_5c221bf0_20250121_015614.html ===

# Cloud Foundry

How to install

* [Documentation](/cloudfoundry/)
* [Releases](/cloudfoundry/releases/)
* [Issues](/cloudfoundry/issues/)
* [Dependencies](/cloudfoundry/dependencies/)
* [Health Score](/cloudfoundry/healthscore/)

Pushes a project to Cloud Foundry or a CF-based platform (e.g. Stackato)
at the end of a build.

## Usage

You will find the plugin in the list of post-build actions in your
build's configuration page.

(Note: as of version 2.1, the plugin is also available as a build step)

![](https://raw.githubusercontent.com/jenkins-infra/plugins-wiki-docs/master/cloudfoundry/docs/images/post_build_action.png)

Enter your target URL and your credentials, then test your connection to
make sure you won't have problems during the build. Check the "Allow
self-signed certificate" if you're using a Stackato micro cloud, or any
other PaaS without signed SSL certificates.

If your application already has a manifest.yml in its root directory,
you can leave the “Read app info from manifest.yml” checked. Unchecking
it will reveal additional settings that you will need to fill out.

![](https://raw.githubusercontent.com/jenkins-infra/plugins-wiki-docs/master/cloudfoundry/docs/images/first_settings_v1.2.png)

That’s it! Start a new build, and your application will be pushed at the
end of it.

### Advanced

#### Services

You can specify services that will be bound to your app, either in the
manifest file or in the Jenkins config. However, this only binds
existing services, it does not create them.

You can either create the services beforehand manually, or use the
"Create services before pushing" option.

#### Proxy

The plugin will push applications through the proxy used by Jenkins. You
can change these settings in Manage Plugins → Advanced → Proxy
configuration.

#### Token Macros

You can use [Token
Macros](https://wiki.jenkins.io/display/JENKINS/Token%2BMacro%2BPlugin) in any
configuration field that accepts a string. This allows you to use
[Jenkins' environment
variables](https://ci.jenkins-ci.org/env-vars.html/) as well as any
token generated by other plugins, such as the [Git
Plugin](https://wiki.jenkins.io/display/JENKINS/Git%2BPlugin).

For example, you can set your application name to:

```
#{JOB_NAME}-#{GIT_REVISION}

```
### Pipeline DSL

**Declarative Pipeline (minimal configuration)**

```
pushToCloudFoundry(
  target: 'api.local.pcfdev.io',
  organization: 'pcfdev-org',
  cloudSpace: 'pcfdev-space',
  credentialsId: 'pcfdev_user'
)

```

**Minimal configuration with explicit manifest file**

```
 pushToCloudFoundry(
  target: 'api.local.pcfdev.io',
  organization: 'pcfdev-org',
  cloudSpace: 'pcfdev-space',
  credentialsId: 'pcfdev_user',
  manifestChoice: [manifestFile: 'path/to/manifest.yml']
 )

```

**Inline manifest with service creation and binding**

```
pushToCloudFoundry(
  target: 'api.local.pcfdev.io',
  organization: 'pcfdev-org',
  cloudSpace: 'pcfdev-space',
  credentialsId: 'pcfdev_user',
  selfSigned: true,
  servicesToCreate: [
    [name: 'mysql-spring', type: 'p-mysql', plan: '512', resetService: true]
  ],
  manifestChoice: [
    value: 'jenkinsConfig',
    appName: 'hello-spring-mysql',
    memory: 512,
    instances: 2,
    services: ['mysql-spring'],
    envVars: [
      [key: 'FOO', value: 'bar']
    ],
    appPath: 'test-apps/hello-spring-mysql/target/hello-spring-mysql.war'
  ]
)

```
### Changelog

#### Version ~~2.3.0~~ 2.3.1 (June 24, 2018)

* Fixes [JENKINS-31208](https://issues.jenkins.io/browse/JENKINS-31208) -
  Getting issue details... STATUS   Support variable expansion in
  token macros.

#### Version 2.2.0 (October 9, 2017)

* CF Java Client dependency upgraded to
  [2.2.0.RELEASE](https://github.com/cloudfoundry/cf-java-client/releases/tag/v2.20.0.RELEASE)
* Fixes  [JENKINS-46049](https://issues.jenkins.io/browse/JENKINS-46049) -
  Getting issue details... STATUS

#### Version 2.1.1 (August 8, 2017)

* Bugfix for communicating to CloudFoundry API endpoints over plain
  http (see 2.1 release notes)
* Can also specify port (use `cloudfoundry.api.target:12345`,
  `http://cloudfoundry.api.target:12345`, or
  `https://cloudfoundry.api.target:12345`)

#### Version 2.1 (August 5, 2017)

* Re-enabled support for Cloudfoundry over unsecure http
  (use `http://cloudfoundry.api.target` instead of
  just `cloudfoundry.api.target`)
* Cloudfoundry push is now available as a build step in addition to
  the post-build action
* The build step is also available as a pipeline step
  (`pushToCloudFoundry`)

#### Version 2.0 (July 29, 2017)

* The plugin is now based on cf-java-client 2.
* Minimum Java version raised to 1.8 (due to lambdas)
* Pushes are implemented by
  calling `org.cloudfoundry.operations.applications.Applications.pushManifest`.
  This should hopefully ensure the behaviour is as close as possible
  to calling `cf push` via the CLI
* As a result of using the cf push approach,
  the `Reset app if already exists` setting is now a no-op.
* Now uses the plugin-first classloader instead of shaded
  cf-java-client jar
* Requires accessing the cloudfoundry api over https. Ignoring ssl
  validation errors is still an option, but plain http is not.

#### Version 1.5 (October 21, 2015)

* Add plugin timeout parameter. This lets you set the timeout before
  the plugin marks the build a failure, independently from the target.
  This is similar to the "client timeout" option of the cf client.
* Updating the environment variables of an existing app will no longer
  overwrite existing variables. This is the behavior of the cf client.

#### Version 1.4.4 (September 30, 2015)

* Fix temporary directory not being deleted.
* Fix exception when using a memory value without a unit.
* Add support for more memory units (All units from [the CF
  documentation](https://docs.cloudfoundry.org/devguide/deploy-apps/manifest.html#memory)).
* Ignore unknown macro token in environment variables, to allow dollar
  signs without escaping.

#### Version 1.4.3 (September 17, 2015)

* Add support for pushing an app with a non-default stack.

#### Version 1.4.2 (August 24, 2015)

* Fix ClassCastException on push in some cases.
* Fix "Could not read JSON" error hiding the true error coming from
  the target.
* Fix backwards compatibility with the saved configuration of older
  versions.

#### Version 1.4.1 (July 21, 2015)

* Fix temporary files not being correctly deleted at the end of a
  push.

#### Version 1.4 (June 11, 2015)

* Add an option to create services before the push of the application.
* The default domain for application URIs is now queried from the
  target, instead of calculated from its URL.

#### Version 1.3.3 (May 28, 2015)

* Fix `WsContainerProvider not a subtype` crash that would happen on
  some Jenkins instances.

#### Version 1.3.1 (Apr 21, 2015)

* Fix the ArrayIndexOutOfBoundsException that happened using older
  versions of Java.
* Add additional stack trace info in case of unknown or CF exception.
* Internal changes.

#### Version 1.3 (Mar 9, 2015)

* Add support for [Token
  Macros](https://wiki.jenkins.io/display/JENKINS/Token%2BMacro%2BPlugin) in
  configuration fields that accept a string.
* The behavior of the `no-route` option has been changed in
  accordance to Cloud Foundry docs. It will now unbind every route
  attached to the app.
* The `path` option of a manifest file will now be relative to the
  location of the manifest file. (This is important when using a
  custom manifest file location)

#### Version 1.2 (Feb 16, 2015)

* Add support for pushing an app through a proxy.
* The plugin now uses credentials from the [Credentials
  Plugin](https://wiki.jenkins.io/display/JENKINS/Credentials%2BPlugin)
  instead of text fields.
* Support for custom manifest file location.

#### Version 1.1 (Jan 23, 2015)

* Add support for distributed jobs.
* Add support for multi-apps manifest.yml files. (They will be pushed
  in order, but the entire build will be marked as failed if one app
  fails)
* Fix UI bug where services configured would not show up on reload.
* Print more useful info in case of unknown CloudFoundryException.

#### Version 1.0.3 (Nov 17, 2014)

* Initial release.
##### Version: 2.3.2

Released: 6 years agoRequires Jenkins 1.625.3ID: cloudfoundry
##### Installed on 0.38% of controllers

[View detailed version information](https://old.stats.jenkins.io/pluginversions/cloudfoundry.html)
##### Links

[GitHub](https://github.com/jenkinsci/cloudfoundry)[Open issues (Jira)](https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D19824)[Report an issue (Jira)](https://www.jenkins.io/participate/report-issue/redirect/#19824/cloudfoundry)[Pipeline Step Reference](https://www.jenkins.io/doc/pipeline/steps/cloudfoundry)[Javadoc](https://javadoc.jenkins.io/plugin/cloudfoundry)
##### Labels

[Artifact Uploaders](/ui/search/?labels=upload)
##### Maintainers

[William Gautier](/ui/search/?query=williamg)[Olivier Lamy](/ui/search/?query=olamy)[Steven Swor](/ui/search/?query=sworisbreathing)
##### Help us improve this page!

This content is served from the [Jenkins Wiki Export](https://raw.githubusercontent.com/jenkins-infra/plugins-wiki-docs/master/cloudfoundry/README.md) which is now [permanently offline](https://www.jenkins.io/blog/2021/09/04/wiki-attacked/) and before that a [read-only state](https://groups.google.com/forum/#!msg/jenkinsci-dev/lNmas8aBRrI/eL3u7A6qBwAJ). We would love your help in moving plugin documentation to GitHub, see [the guidelines](https://jenkins.io/blog/2019/10/21/plugin-docs-on-github/).
##### Previous Security Warnings

* ###### [CSRF vulnerability and missing permission checks allowed capturing credentials](https://jenkins.io/security/advisory/2019-02-19/#SECURITY-876)

  + Affects version 2.3.1 and earlier
![tracker](https://jenkins-matomo.do.g4v.dev/piwik.php?idsite=1&rec=1&url=https://plugins.jenkins.io//cloudfoundry/)



=== Content from jenkins.io_436622bd_20250120_235049.html ===


[Jenkins Security Home](/security/)

**For Administrators**

* [Overview](/security/for-administrators/)
* [Security Advisories](/security/advisories/)
* [Security Issues](/security/issues/)
* [Advisory Schedule](/security/scheduling/)
* [Vulnerabilities in Plugins](/security/plugins/)
* [How We Fix Security Issues](/security/fixing/)

**For Reporters**

* [Reporting Vulnerabilities](/security/reporting/)
* [Jenkins CNA](/security/cna/)

**For Maintainers**

* [Overview](/security/for-maintainers/)
* [Vulnerabilities in Plugins](/security/plugins/)

**Jenkins Security Team**

* [About](/security/team/)
* [Contributions](/security/improvements/)

# Jenkins Security Advisory 2019-02-19

This advisory announces vulnerabilities in the following Jenkins deliverables:

* [Acunetix
  Plugin](https://plugins.jenkins.io/acunetix)
* [Cloud Foundry
  Plugin](https://plugins.jenkins.io/cloudfoundry)
* [CloudBees CD
  Plugin](https://plugins.jenkins.io/electricflow)
* [Digital.ai App Management Publisher
  Plugin](https://plugins.jenkins.io/ease-plugin)
* [JMS Messaging
  Plugin](https://plugins.jenkins.io/jms-messaging)
* [Mattermost Notification
  Plugin](https://plugins.jenkins.io/mattermost)
* [Octopus Deploy
  Plugin](https://plugins.jenkins.io/octopusdeploy)
* [Script Security
  Plugin](https://plugins.jenkins.io/script-security)

## Descriptions

### Sandbox Bypasses in Script Security Plugin

**SECURITY-1320
/
CVE-2019-1003024**

**Severity (CVSS):**
[high](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)

**Affected plugin:
[`script-security`](https://plugins.jenkins.io/script-security)**

**Description:**

The previously implemented script security sandbox protections prohibiting the use of unsafe AST transforming annotations such as `@Grab` ([2019-01-08 fix for SECURITY-1266](../2019-01-08/#SECURITY-1266)) could be circumvented through use of various Groovy language features:

* Use of `AnnotationCollector`
* Import aliasing
* Referencing annotation types using their full class name

This allowed users with Overall/Read permission, or the ability to control Jenkinsfile or sandboxed Pipeline shared library contents in SCM, to bypass the sandbox protection and execute arbitrary code on the Jenkins controller.

Using `AnnotationCollector` is now newly prohibited in sandboxed scripts such as Pipelines.
Importing any of the annotations considered unsafe will now result in an error.
During the compilation phase, both simple and full class names of prohibited annotations are rejected for element annotations.

### CSRF vulnerability and missing permission checks in Cloud Foundry Plugin allowed capturing credentials

**SECURITY-876
/
CVE-2019-1003025**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`cloudfoundry`](https://plugins.jenkins.io/cloudfoundry)**

**Description:**

Cloud Foundry Plugin did not perform permission checks on a method implementing form validation.
This allowed users with Overall/Read access to Jenkins to connect to an attacker-specified URL using attacker-specified credentials IDs obtained through another method, capturing credentials stored in Jenkins.

Additionally, this form validation method did not require POST requests, resulting in a cross-site request forgery vulnerability.

This form validation method now requires POST requests and Overall/Administer (for global configuration) or Item/Configure permissions (for job configuration).

### SSRF vulnerability due to missing permission check in Mattermost Notification Plugin

**SECURITY-985
/
CVE-2019-1003026**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`mattermost`](https://plugins.jenkins.io/mattermost)**

**Description:**

A missing permission check in a form validation method in Mattermost Notification Plugin allowed users with Overall/Read permission to initiate a connection test, connecting to an attacker-specified Mattermost server and room and posting a message.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now requires POST requests and performs a permission check.

### SSRF vulnerability due to missing permission check in OctopusDeploy Plugin

**SECURITY-817
/
CVE-2019-1003027**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`octopusdeploy`](https://plugins.jenkins.io/octopusdeploy)**

**Description:**

A missing permission check in a form validation method in OctopusDeploy Plugin allowed users with Overall/Read permission to initiate a connection test, sending an HTTP HEAD request to an attacker-specified URL, returning HTTP response code if successful, or exception error message otherwise.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now requires POST requests and performs a permission check.

### SSRF vulnerability due to missing permission check in JMS Messaging Plugin

**SECURITY-1033
/
CVE-2019-1003028**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`jms-messaging`](https://plugins.jenkins.io/jms-messaging)**

**Description:**

A missing permission check in a form validation method in JMS Messaging Plugin allowed users with Overall/Read permission to initiate a connection test, sending an HTTP request to an attacker-specified URL.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now requires POST requests and performs a permission check.

### ElectricFlow Plugin globally and unconditionally disabled SSL/TLS certificate validation

**SECURITY-937**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:L/A:N)

**Affected plugin:
[`electricflow`](https://plugins.jenkins.io/electricflow)**

**Description:**

ElectricFlow Plugin unconditionally disabled SSL/TLS certificate validation for the entire Jenkins controller JVM.

ElectricFlow Plugin 1.1.5 and newer no longer do that.

### Acunetix Plugin stored API key in plain text

**SECURITY-951**

**Severity (CVSS):**
[low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`acunetix`](https://plugins.jenkins.io/acunetix)**

**Description:**

Acunetix Plugin stored the API Key in its configuration unencrypted in its global configuration file on the Jenkins controller.
This key could be viewed by users with access to the Jenkins controller file system.

The plugin now integrates with [Credentials Plugin](https://plugins.jenkins.io/credentials).

### SSRF vulnerability due to missing permission check in Acunetix Plugin

**SECURITY-980**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`acunetix`](https://plugins.jenkins.io/acunetix)**

**Description:**

A missing permission check in a form validation method in Acunetix Plugin allowed users with Overall/Read permission to initiate a connection test, sending an HTTP GET request to an attacker-specified URL, adding a `/me` suffix, returning whether the connection could be established and whether the HTTP response code is 200.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now requires POST requests and performs a permission check.

### Arxan MAM Publisher Plugin stored password in plain text

**SECURITY-1070**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`ease-plugin`](https://plugins.jenkins.io/ease-plugin)**

**Description:**

Arxan MAM Publisher Plugin stored the username and password connection credentials in its configuration unencrypted in jobs' `config.xml` files on the Jenkins controller.
This key could be viewed by users with Extended Read permission, or access to the Jenkins controller file system.

While masked from view using a password form field, the password was transferred in plain text to users when accessing the job configuration form.

The plugin now integrates with [Credentials Plugin](https://plugins.jenkins.io/credentials).

## Severity

* SECURITY-817:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-876:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-937:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:L/A:N)
* SECURITY-951:
  [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-980:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-985:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-1033:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-1070:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-1320:
  [high](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)

## Affected Versions

* **Acunetix
  Plugin**
  up to and including
  1.0.0
* **Cloud Foundry
  Plugin**
  up to and including
  2.3.1
* **CloudBees CD
  Plugin**
  up to and including
  1.1.4
* **Digital.ai App Management Publisher
  Plugin**
  up to and including
  1.2.12
* **JMS Messaging
  Plugin**
  up to and including
  1.1.1
* **Mattermost Notification
  Plugin**
  up to and including
  2.6.2
* **Octopus Deploy
  Plugin**
  up to and including
  1.8.1
* **Script Security
  Plugin**
  up to and including
  1.52

## Fix

* **Acunetix
  Plugin**
  should be updated to version
  1.1.0
* **Cloud Foundry
  Plugin**
  should be updated to version
  2.3.2
* **CloudBees CD
  Plugin**
  should be updated to version
  1.1.5
* **Digital.ai App Management Publisher
  Plugin**
  should be updated to version
  2.0
* **JMS Messaging
  Plugin**
  should be updated to version
  1.1.2
* **Mattermost Notification
  Plugin**
  should be updated to version
  2.6.3
* **Octopus Deploy
  Plugin**
  should be updated to version
  1.9.0
* **Script Security
  Plugin**
  should be updated to version
  1.53

These versions include fixes to the vulnerabilities described above. All prior versions are considered to be affected by these vulnerabilities unless otherwise indicated.

## Credit

The Jenkins project would like to thank the reporters for discovering and
[reporting](/security/#reporting-vulnerabilities)
these vulnerabilities:

* **Daniel Beck, CloudBees, Inc.**
  for
  SECURITY-937, SECURITY-1320
* **Thomas de Grenier de Latour**
  for
  SECURITY-817, SECURITY-876
* **Viktor Gazdag**
  for
  SECURITY-951, SECURITY-980, SECURITY-985, SECURITY-1033, SECURITY-1070


