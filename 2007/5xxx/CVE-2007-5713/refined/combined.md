=== Content from wiki.alliedmods.net_e1f4ce4a_20250125_064231.html ===


# AMX Mod X 1.8.0 Changes

From AlliedModders Wiki
Jump to: [navigation](#mw-head), [search](#p-search)

AMX Mod X 1.8 is a large release with many changes, both to the development API and user-mode features.

## Contents

* [1 Per-Map Features](#Per-Map_Features)
* [2 Command Flag Changing](#Command_Flag_Changing)
* [3 Ham Sandwich](#Ham_Sandwich)
* [4 Dynamic Global Arrays](#Dynamic_Global_Arrays)
* [5 Backwards Compatibility Issues](#Backwards_Compatibility_Issues)
* [6 Removed Downloads](#Removed_Downloads)
* [7 Changelog](#Changelog)
  + [7.1 Overall Changes](#Overall_Changes)
  + [7.2 Scripting Changes](#Scripting_Changes)
    - [7.2.1 Natural Selection Additions](#Natural_Selection_Additions)
  + [7.3 Plugin Changes](#Plugin_Changes)
  + [7.4 Module Changes](#Module_Changes)
# Per-Map Features

You can now have per-map prefix-based configuration files for plugins and .cfg scripts.

* configs/maps/prefix\_<prefix>.cfg *(for example)*
  + configs/maps/prefix\_de.cfg will run on any de\_\* map.
* configs/maps/plugins-<prefix>.ini *(for example)*
  + configs/maps/plugins-de.ini will load all contained plugins on any de\_\* map.

# Command Flag Changing

You can now change the access flags required by commands without recompiling or editing scripts. AMX Mod X caches all command flags in configs/cmdaccess.ini, where they can be easily edited.

A few notes:

* To disable this feature for a single command in the ini file, set its access flag in the ini file to "\*"

* To disable this feature entirely, change "disableflagman 0" in core.ini to be "disableflagman 1"

* In the default state, the flag manager will try to guess which commands should be excluded. The rules are as follows:
  + All commands with the default access (-1, **not** ADMIN\_ALL) are not included
  + All commands that begin with "say" are not included
  + To disable flag manager for storing commands from inside of the plugin, set the new 5th parameter of register\_clcmd or register\_concmd to 0.
  + To tell flag manager to always store your command, even if the filter would have ruled it out set the 5th parameter to 1.
  + The default value of this new 5th parameter is -1, this means it will treat it as if the parameter did not exist.
  + **Note:** Even if a plugin exclusively tells flag manager to hide the command, the admin can insert it into cmdaccess.ini and it will be used.

Also, changes to access will not take effect until a map change. Additionally, the automatic writing of newly detected commands does not occur until map change.

# Ham Sandwich

Ham Sandwich is a very powerful module by [sawce](/User%3ASawce "User:Sawce") which can hook and call virtual CBaseEntity functions on a variety of mods. For more information, see the [hamsandwich.inc](http://svn.alliedmods.net/viewvc.cgi/trunk/plugins/include/hamsandwich.inc?root=amxmodx&view=log) file.

# Dynamic Global Arrays

Also by [sawce](/User%3ASawce "User:Sawce"), dynamic global arrays are now available in AMX Mod X. You can read the full specs in [cellarray.inc](http://svn.alliedmods.net/viewvc.cgi/trunk/plugins/include/cellarray.inc?root=amxmodx&view=log).

Additionally, the hardcoded limits of a few plugins have been lifted:

* Admins are now dynamic and not limited to MAX\_ADMINS.
* Mapchooser no longer has a predefined map limit.
* Maps menu no longer has a predefined map limit.
* imessage no longer has a predefined message limit.

# Backwards Compatibility Issues

Before AMX Mod X 1.8.0, menu\_create would automatically call register\_menucmd. This was, in fact, a bug, as the calling conventions between register\_menucmd and new menu callbacks are entirely different. This was a serious error and it was removed in AMX Mod X 1.8.0.

This accidental functionality was not documented API. However, some plugins have been found to mistakenly abuse this property. An example is calling menu\_create and having show\_menu calls run through your menu\_create callback instead of using menu\_display properly.

The old functionality cannot be enabled globally because it is a serious error and causes many problems. The following plugins would otherwise break on AMX Mod X 1.8.0, and we have specifically inserted backwards compatibility shims for them. If your plugin's menus have broken in 1.8.0 and need the shim enabled, please contact the development team via the bug report tool.

* war3ft.amxx, versions 3.0 RC1 through 3.0 RC8. No compatibility is provided for RC9+.

# Removed Downloads

Downloads for AMX Mod X 0.1, 0.15, and 0.16 have been removed from the SourceForge downloads page. These builds are highly legacy and no longer used, and were removed to avoid clutter and confusion. Source code is still available via /svnroot/amxmodx/tags.

Downloads for "Bin Logging" builds have been removed. These builds had terrible performance and were fairly unusable. They also had little use to the development team in fixing actual problems. If your plugin crashes, file a bug report and the development team can work with you in determining the cause.

# Changelog

## Overall Changes

* Added a new module, Ham Sandwich, for hooking and calling virtual CBaseEntity functions in mods.
* Command flags are now initially dumped to disk and can be edited via configs/cmdaccess.ini.
* Added am[48738](http://forums.alliedmods.net/showthread.php?t=48738): Romanian translation from X-5173.
* Added am[50741](http://forums.alliedmods.net/showthread.php?t=50741) and am[43830](http://forums.alliedmods.net/showthread.php?t=43830): per-map plugins files can now be prefixed based.
* Added [amb17](http://fs.alliedmods.net/?do=details&task_id=17): New menu rendering is now more consistent; non-consistent controls are deprecated.
* Added [amb32](http://fs.alliedmods.net/?do=details&task_id=32): The server console commands "amxx cvars" and "amxx cmds" can now filter by plugin.
* Added [amb122](http://fs.alliedmods.net/?do=details&task_id=122): Log file names now include a four-digit year.
* Fixed [amb18](http://fs.alliedmods.net/?do=details&task_id=18): New menus are now properly destroyed if overridden.
* Fixed [amb46](http://fs.alliedmods.net/?do=details&task_id=46): is\_user\_bot had some false positives.
* Fixed [amb69](http://fs.alliedmods.net/?do=details&task_id=69): Fixed Metamod trying to reload AMX Mod X against a poorly configured clock.
* Fixed [amb207](http://fs.alliedmods.net/?do=details&task_id=207): New menus now display "0" instead of "10."
* Fixed [amb208](http://fs.alliedmods.net/?do=details&task_id=208): New menus did not reset callback results after each call.
* Fixed [amb200](http://fs.alliedmods.net/?do=details&task_id=200): Dynamic/fake natives were not re-entrant.
* Fixed [amb244](http://fs.alliedmods.net/?do=details&task_id=244): Run-time errors blocked forwards.
* Fixed [amb305](http://fs.alliedmods.net/?do=details&task_id=305): Core crashed on mods that removed the standard mp\_timelimit cvar.
* Fixed many various internal new menu rendering and item selection bugs. This may have introduced backwards compatibility problems with plugins relying on undocumented bugs. In specific, menu\_create no longer calls register\_menucmd and thus new menu callbacks will now only be invoked strictly from a call to menu\_display.

## Scripting Changes

* All include files are now #pragma semicolon safe.
* New menu functions are now in a separate, newly documented include file (newmenus.inc).
* Added natives for dynamic global arrays.
* Added a new, magic any tag from [SourceMod](/SourceMod "SourceMod").
* Added a charsmax macro for safe sizeof(string)-1 usage.
* Added set\_pcvar\_string().
* Added LookupLangKey().
* Added SQL\_QuoteString().
* Added [g|s]et\_pdata\_cbase[\_safe]() to the Ham Sandwich module.
* Added geoip\_code[2|3]\_ex(), which address a serious issue in the now deprecated geoip\_code[2|3]().
* Added lookup\_sequence(), set\_controller(), set\_pev\_string(), and pev\_serial() to Fakemeta.
* Added a menu property to change the numbering color.
* Added [amb27](http://fs.alliedmods.net/?do=details&task_id=27): SQL\_Rewind().
* Added [amb37](http://fs.alliedmods.net/?do=details&task_id=37): cs\_[g|s]et\_user\_submodel().
* Added [amb38](http://fs.alliedmods.net/?do=details&task_id=38): cs\_[g|s]et\_user\_lastactivity().
* Added [amb39](http://fs.alliedmods.net/?do=details&task_id=39): cs\_[g|s]et\_hostage\_lastuse() and cs\_[g|s]et\_hostage\_nextuse().
* Added [amb63](http://fs.alliedmods.net/?do=details&task_id=63): floatmin(), floatmax(), and floatclamp().
* Added [amb76](http://fs.alliedmods.net/?do=details&task_id=76): Formatting functions can now use %x or %X for hexadecimal numbers.
* Added [amb92](http://fs.alliedmods.net/?do=details&task_id=92): create\_tr2() and free\_tr2().
* Added [amb205](http://fs.alliedmods.net/?do=details&task_id=205): cs\_[g|s]et\_c4\_explode\_time().
* Added [amb216](http://fs.alliedmods.net/?do=details&task_id=216): SQL\_MakeStdTuple() now has a timeout parameter.
* Added [amb237](http://fs.alliedmods.net/?do=details&task_id=237): Fakemeta can now call "ServerPrint."
* Added [amb242](http://fs.alliedmods.net/?do=details&task_id=242): cs\_[g|s]et\_user\_hostagekills().
* Added [amb245](http://fs.alliedmods.net/?do=details&task_id=245): precache\_sound now returns a precache index.
* Added [amb261](http://fs.alliedmods.net/?do=details&task_id=261): has\_flag() and has\_all\_flags().
* Added [amb281](http://fs.alliedmods.net/?do=details&task_id=281): SQL\_NextResultSet() for multiple result sets on MySQL.
* Added [amb291](http://fs.alliedmods.net/?do=details&task_id=291): cs\_[g|s]et\_c4\_defusing().
* Added [amb673](http://fs.alliedmods.net/?do=details&task_id=673): regex\_compile() and regex\_match\_c for pre-compiling expressions.
* Added am[46213](http://forums.alliedmods.net/showthread.php?t=46213): player\_menu\_info() now returns a page number.
* Added am[51064](http://forums.alliedmods.net/showthread.php?t=51064): Some parameters to get\_plugin are now optional.
* Added am[50610](http://forums.alliedmods.net/showthread.php?t=50610): Some parameters to get\_user\_weapon are now optional.
* Added am[48841](http://forums.alliedmods.net/showthread.php?t=48841): tfc\_is\_user\_feigning().
* Added am[45664](http://forums.alliedmods.net/showthread.php?t=45664): tfc\_is\_team\_ally().
* Fixed am[49337](http://forums.alliedmods.net/showthread.php?t=49337): get\_pcvar\_float() malfunctioned on high numbers.
* Fixed [amb78](http://fs.alliedmods.net/?do=details&task_id=78): get\_concmdsnum could return an incorrect result.
* Fixed [amb85](http://fs.alliedmods.net/?do=details&task_id=85): Tag mismatches on ShowSyncHudMsg().
* Fixed [amb90](http://fs.alliedmods.net/?do=details&task_id=90): set\_native\_filter() did not work in rare cases.
* Fixed [amb107](http://fs.alliedmods.net/?do=details&task_id=107): socket\_open() didn't return an error by reference.
* Fixed [amb110](http://fs.alliedmods.net/?do=details&task_id=110): socket\_change() could return 1 on certain failures.
* Fixed [amb116](http://fs.alliedmods.net/?do=details&task_id=116): DispatchKeyValue() did not work on worldspawn (entity 0).
* Fixed [amb230](http://fs.alliedmods.net/?do=details&task_id=230): radius\_damage() didn't kill players on all mods.
* Fixed [amb257](http://fs.alliedmods.net/?do=details&task_id=257): get\_user\_origin() mode 4 had false positives.
* Fixed [amb343](http://fs.alliedmods.net/?do=details&task_id=343): TFC\_ClearModel() did not function as documented.
* Fixed [amb421](http://fs.alliedmods.net/?do=details&task_id=421): get\_user\_weapons() could omit a weapon on Day of Defeat.
* Fixed [amb437](http://fs.alliedmods.net/?do=details&task_id=437): dod\_set\_user\_kills() and dod\_set\_user\_score() could mess up the scoreboard.
* Fixed [amb519](http://fs.alliedmods.net/?do=details&task_id=519): geoip\_code[2|3]() buffer overflowed on error.
* Fixed [amb736](http://fs.alliedmods.net/?do=details&task_id=736): find\_entity() was defined twice.
* Fixed a memory leak in SortCustom1D().
* Fixed a crash bug in fwrite\_blocks().

### Natural Selection Additions

* Added ns\_get\_user\_team.
* Added ns\_round\_in\_progress.
* Added ns\_get\_weapon.
* Added ns\_takedamage.
* Added ns\_get\_locationname.
* Added ns\_lookup\_title.
* Added ns\_create\_ps (particle systems).
* Added ns\_spawn\_ps.
* Added ns\_fire\_ps.
* Added ns\_get\_ps\_id.
* Added round\_start and round\_end forwards.

## Plugin Changes

* There is no longer a hardcoded limit to the number of admins.
* There is no longer a hardcoded limit to the map list.
* There is no longer a hardcoded limit to the number of "imessages."
* Added [amb34](http://fs.alliedmods.net/?do=details&task_id=34): There are now plugin command/cvar menus.
* Added am[45044](http://forums.alliedmods.net/showthread.php?t=45044): amx\_banmenu now prints the ban time length.
* Added am[43757](http://forums.alliedmods.net/showthread.php?t=43757): amx\_addadmin now writes a comment with the player's name.
* Added am[29353](http://forums.alliedmods.net/showthread.php?t=29353): amx\_plugins now prints paginated output.
* Added am[50742](http://forums.alliedmods.net/showthread.php?t=50742): admin.sma now supports prefix based per-map configs.
* Added [amb28](http://fs.alliedmods.net/?do=details&task_id=28): statscfg.sma can now use translations.
* Added [amb30](http://fs.alliedmods.net/?do=details&task_id=30): csstats\_rankbots prevents bots from showing on /top15.
* Added [amb31](http://fs.alliedmods.net/?do=details&task_id=31): plmenu.sma ban and slap options are now configurable.
* Added [amb42](http://fs.alliedmods.net/?do=details&task_id=42): Added new values for amx\_show\_activity.
* Added [amb51](http://fs.alliedmods.net/?do=details&task_id=51): amx\_vote can now take more than two options.
* Added [amb64](http://fs.alliedmods.net/?do=details&task_id=64): amx\_voteban autodetects whether it should IP ban.
* Added [amb307](http://fs.alliedmods.net/?do=details&task_id=307): amx\_addban now caches the last ten connections.
* Added [amb311](http://fs.alliedmods.net/?do=details&task_id=311): mapcycle file now ignores .bsp extensions.
* Added [amb340](http://fs.alliedmods.net/?do=details&task_id=340): amx\_ban/amx\_banip now display a reason in the activity.
* Added [amb427](http://fs.alliedmods.net/?do=details&task_id=427): Additional weapons to dod\_[g|s]et\_user\_ammo().
* Added [amb743](http://fs.alliedmods.net/?do=details&task_id=743): plmenu for cstrike has an option to move to spectator.
* Fixed [amb29](http://fs.alliedmods.net/?do=details&task_id=29): pausecfg.sma did not translate two phrases.
* Fixed [amb91](http://fs.alliedmods.net/?do=details&task_id=91): miscstats.sma truncated some language translations.
* Fixed [amb94](http://fs.alliedmods.net/?do=details&task_id=94): amx\_psay sometimes sent truncated messages.
* Fixed [amb109](http://fs.alliedmods.net/?do=details&task_id=109): mapsmenu.sma now checks mapcyclefile before reverting to mapcycle.txt.
* Fixed [amb118](http://fs.alliedmods.net/?do=details&task_id=118): amx\_help would not list ADMIN\_ADMIN commands.
* Fixed [amb130](http://fs.alliedmods.net/?do=details&task_id=130): Various menus did not take ADMIN\_ALL or ADMIN\_ADMIN into account.
* Fixed [amb183](http://fs.alliedmods.net/?do=details&task_id=183): plmenu.sma did not work on Natural Selection.
* Fixed [amb196](http://fs.alliedmods.net/?do=details&task_id=196): amx\_modules did not handle invalid modules properly.
* Fixed [amb222](http://fs.alliedmods.net/?do=details&task_id=222): cl\_rebuy could exploit CS weapon restrictions. This also makes CZ bots obey restrictions.
* Fixed [amb228](http://fs.alliedmods.net/?do=details&task_id=228): amxmod\_compat could cause set\_user\_hitzones() to break.
* Fixed [amb350](http://fs.alliedmods.net/?do=details&task_id=350): traceline\_set\_float from the AMX Mod Compat layer was broken.
* Fixed [amb467](http://fs.alliedmods.net/?do=details&task_id=467): conmotd.txt is now removed.
* Fixed [amb633](http://fs.alliedmods.net/?do=details&task_id=633): Immune admins can now target themselves.
* Fixed [amb790](http://fs.alliedmods.net/?do=details&task_id=790): admin.sma parsed beginning spaces incorrectly in users.ini.
* Fixed a potential exploit in adminslots.sma.
* SQL cvars are now protected.

## Module Changes

* Fixed [amb108](http://fs.alliedmods.net/?do=details&task_id=108): IP-based stats no longer include a port when saving.
* Fixed [amb503](http://fs.alliedmods.net/?do=details&task_id=503): CSX did not set a META\_RESULT when paused.

Retrieved from "<https://wiki.alliedmods.net/index.php?title=AMX_Mod_X_1.8.0_Changes&oldid=9513>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=AMX+Mod+X+1.8.0+Changes "You are encouraged to log in; however, it is not mandatory [o]")

### Namespaces

* [Page](/AMX_Mod_X_1.8.0_Changes "View the content page [c]")
* [Discussion](/index.php?title=Talk:AMX_Mod_X_1.8.0_Changes&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

### Variants

### Views

* [Read](/AMX_Mod_X_1.8.0_Changes)
* [View source](/index.php?title=AMX_Mod_X_1.8.0_Changes&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=AMX_Mod_X_1.8.0_Changes&action=history "Past revisions of this page [h]")

### More

### Search

### Navigation

* [Main Page](/Main_Page "Visit the main page [z]")
* [Projects](/AlliedModders_Wiki%3ACommunity_portal)
* [Current events](/AlliedModders_Wiki%3ACurrent_events "Find background information on current events")
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Help%3AContents "The place to find out")

### Tools

* [What links here](/Special%3AWhatLinksHere/AMX_Mod_X_1.8.0_Changes "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/AMX_Mod_X_1.8.0_Changes "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* [Printable version](/index.php?title=AMX_Mod_X_1.8.0_Changes&printable=yes "Printable version of this page [p]")
* [Permanent link](/index.php?title=AMX_Mod_X_1.8.0_Changes&oldid=9513 "Permanent link to this revision of the page")
* [Page information](/index.php?title=AMX_Mod_X_1.8.0_Changes&action=info "More information about this page")

* This page was last edited on 19 February 2014, at 07:08.

* [Privacy policy](/AlliedModders_Wiki%3APrivacy_policy "AlliedModders Wiki:Privacy policy")
* [About AlliedModders Wiki](/AlliedModders_Wiki%3AAbout "AlliedModders Wiki:About")
* [Disclaimers](/AlliedModders_Wiki%3AGeneral_disclaimer "AlliedModders Wiki:General disclaimer")

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](//www.mediawiki.org/)



=== Content from bugs.alliedmods.net_ef16642d_20250125_064228.html ===


| Bugzilla – Main Page | version 4.4.13 |
| --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Log In](?do=details&task_id=519%3Fdo%3Ddetails&task_id=519&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](?do=details&task_id=519%3Fdo%3Ddetails&task_id=519&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

| Welcome to Bugzilla  * [File a Bug](enter_bug.cgi) * [Search](query.cgi) * [Log In](?GoAheadAndLogIn=1)  * [Quick Search help](page.cgi?id=quicksearch.html) * |   Install the Quick Search plugin  * [Bugzilla User's Guide](docs/en/html/using.html) * |   [Release Notes](page.cgi?id=release-notes.html) |
| --- |

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Log In](?do=details&task_id=519%3Fdo%3Ddetails&task_id=519&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](?do=details&task_id=519%3Fdo%3Ddetails&task_id=519&GoAheadAndLogIn=1#forgot)
    Login:

    [x]


