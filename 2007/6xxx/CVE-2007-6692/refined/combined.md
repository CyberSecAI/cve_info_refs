=== Content from gallery.menalto.com_5cf053bd_20250125_154509.html ===


[documentation](http://codex.galleryproject.org/)
[downloads](http://galleryproject.org/downloads)

[![Gallery - YOUR PHOTOS ON YOUR WEBSITE](http://galleryproject.org/themes/gmc/logo.png)](index.html)

[forums](forum.html)

[development](http://galleryproject.org/dev)

---

## Gallery

### Random Image

[![Add item with the Publish XP Wizard, login](gallery2/main.php%3Fg2_view=core.DownloadItem&g2_itemId=13397&g2_serialNumber=2)](gallery/screenshots/screenshotsG2/add/add_item_from_winxp_wizard_3.jpg.html)
#### Add item with the Publish XP Wizard, login

## Hosting Partner

InMotion Hosting provides Gallery with financial and development support, as well as an affiliate bonus for each new customer we send their way. Gallery 3 is supported out-of-the-box on their service, and their support team is knowledgable in working with Gallery 3.

## Support Gallery!

**Gallery is freeware!**
We've spent thousands of hours developing and supporting it.
If you enjoy the product, please take a moment and [make a donation](http://gallery.sourceforge.net/donate.php?donate_tag=website_sidebar) to help support further development and webserver costs!

## New forum topics

* [Langues in edit photos and else options only english](node/113280.html)
* [remove photo names under thumbnails (but keep album names) theme edit help needed!](node/113277.html "1 comment")
* [Replacement for Gallery 3 ?](node/113269.html "3 comments")
* [Need Support Help](node/113266.html)
* [Location of Gallery3 tags on the server](node/113265.html "1 comment")
[more](forum.html "Read the latest forum topics.")

## User Testimonial

 "Hi, thanks to you, I put up over 62,000 royalty free photographs on
gallery 2.
Thank you!"  Polly 02/20/2007 [More testimonials](testimonials.html)

[Home](index.html)
# Gallery 2.2.4 Security Fix Release

Submitted by valiant on Mon, 2007-12-24 04:54

Just in time for the holidays, **Gallery 2.2.4** is now available for [download](http://codex.gallery2.org/Gallery2%3ADownload#Packages). This release fixes critical security issues, no new features have been added. Due to the severity of these issues users of all previous Gallery 2 versions are **strongly encouraged** to upgrade to version 2.2.4 as soon as possible! All issues addressed in this release were discovered through an extensive internal security audit.

Since 2.2.4 is a security release, it shares the same installation requirements as 2.2.3. If you haven't upgraded to 2.2.x yet, please review the [Gallery 2.2 release notes](http://gallery.menalto.com/gallery_2.2_released) for highlights of changes and the requirements. Read on for more details and upgrade instructions.

## Upgrading Instructions

Upgrading is quick and easy

* Users of Gallery 2.1 or earlier should review release notes for requirement changes and update all application files.
* Users of Gallery 2.2 or later (2.2.1, 2.2.2 or 2.2.3) can use an update file to upgrade specific core files and then upgrade the affected modules via [Downloadable Plugins](http://codex.gallery2.org/Gallery2%3AGet_More_Plugins).

Regardless of your Gallery's version, review the [upgrading instructions](http://codex.gallery2.org/Gallery2%3AUpgrading) for complete details.

## Security Vulnerabilities

Gallery 2.2.4 addresses the following security vulnerabilities:

* Publish XP module - Fixed unauthorized album creation and file uploads.
* URL rewrite module - Fixed local file inclusion vulnerability in unsecured admin controller and information disclosure in hotlink protection.
* Core / add-item modules - Fixed Cross Site Scripting (XSS) vulnerabilities through malicious file names.
* Installation (Gallery application) - Update web-accessibility protection of the storage folder for Apache 2.2.
* Core (Gallery application) / MIME module - Fixed vulnerability in checks for disallowed file extensions in file uploads.
* Gallery Remote module - Added missing permissions checks for some GR commands.
* WebDAV module - Fixed Cross Site Scripting (XSS) vulnerability through HTTP PROPPATCH.
* WebDAV module - Fixed information (item data) disclosure in a WebDAV view.
* WebDAV module - Bug fix for directory listing issue (not security related).
* Comment module - Fixed information (item data) disclosure in comment views.
* Core module (Gallery application) - Improved resilience against item information disclosure attacks.
* Slideshow module - Fixed information (item data) disclosure in the slideshow.
* Print modules - Fixed information (item data) disclosure in several print modules.
* Core / print modules - Fixed arbitrary URL redirection (phishing attacks) in the core module and several print modules.
* WebCam module - Fixed proxied request weakness.

## Lessons Learned

Gallery 2 has had an excellent security track record and the Gallery team continues to be committed to delivering a secure application. We are taking the following actions to improve our security audit process:

* Allocating a larger budget for future external security audits to ensure that auditors gain a deeper understanding of the application to enable them to better identify issues.
* Improving internal security review guidelines and checklists to ensure high standards in all code reviews, both internal and external.
* Changing the API in the next major release of Gallery 2 to make it easier to write secure code.

![schultmc's picture](http://galleryproject.org/files/pictures/picture-17574.gif "schultmc's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261079)
Submitted by schultmc on Mon, 2007-12-24 06:36.

Version 2.2.4-1 of the Debian gallery2 package was uploaded in the morning (EST) of Monday, December 24, 2007 and should be available in Debian unstable as of the archive push in the afternoon (EST) on Monday, December 24, 2007.

--

Debian gallery package maintainer

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261109)
Submitted by pyxel on Mon, 2007-12-24 19:37.

Releasing critical security update during holidays is not very clever. Thanks to Lubomir Kundrak who made this update to Fedora.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261113)
Submitted by valiant on Mon, 2007-12-24 21:51.
**pyxel wrote:**
> Releasing critical security update during holidays is not very clever. Thanks to Lubomir Kundrak who made this update to Fedora.

Anytime during the holidays would have been a bad time. Although there haven't been any reports and even though we've discovered these issues internally, we have to assume that bad guys know about some of these issues already. The severity of the vulnerabilities didn't leave us much choice but to release the fix as soon as possible.

Sorry for the inconvenience and the timing. Sometimes all alternatives have bad implications. We opted for the solution that would protect our users the best.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261132)
Submitted by pyxel on Tue, 2007-12-25 09:45.
**valiant wrote:**
> Sorry for the inconvenience and the timing. Sometimes all alternatives have bad implications. We opted for the solution that would protect our users the best.

I understand, thank you for the fix and have a nice holidays!

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261164)
Submitted by Zetsu on Tue, 2007-12-25 19:29.

[[img]<http://hospedaje-hosting.es/j0j0.gif>[/img]](http://www.computadoras.elhimu.com) [[img]<http://hospedaje-hosting.es/j0j0.gif>[/img]](http://www.index.html) [[img]<http://hospedaje-hosting.es/j0j0.gif>[/img]](http://www.juegos.elhimu.com) [[img]<http://hospedaje-hosting.es/j0j0.gif>[/img]](http://www.laptops.elhimu.com) [[img]<http://hospedaje-hosting.es/j0j0.gif>[/img]](http://www.telefonia.elhimu.com)

Really Cool, thx

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261290)
Submitted by Brandon Sussman on Thu, 2007-12-27 14:24.
**pyxel wrote:**
> Releasing critical security update during holidays is not very clever.

1. Waiting to release critical security updates is even less clever. In fact it is almost not very responsible. Thanks to the team for caring about my systems and client's systems enough to do this.

2. Figuring out how to politely leave the church or party, during the holidays, to fix a compromised system would be clever.

Of course now I have several clients I gotta go upgrade!

![nicos's picture](http://galleryproject.org/files/pictures/picture-179633.jpg "nicos's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261448)
Submitted by nicos on Sat, 2007-12-29 02:39.

I see some coming changes in the API, how big will these be? Perhaps better to wait before starting using this for my new apps?

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

Just another [Geld Lenen](http://geld-lenen.welij.nl/) story!

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261452)
Submitted by valiant on Sat, 2007-12-29 03:03.
**nicos wrote:**
> I see some coming changes in the API, how big will these be? Perhaps better to wait before starting using this for my new apps?

All API changes for the next major release (G2.3, spring 2008) are backwards compatible.

You can review the API changes at: development -> API -> Changes since last release.

For G2.4 (late 2008?) we'll introduce major non backwards compatible changes. We'll drop PHP 4 compatibility in favor of using more of PHP 5's features, add a type-safe input filtering framework and much more.

![bigu_c's picture](http://galleryproject.org/files/pictures/picture-174507.png "bigu_c's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261725)
Submitted by bigu\_c on Tue, 2008-01-01 23:33.

Thank you very much!

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261877)
Submitted by webmaster33 on Wed, 2008-01-02 22:30.

Is ISO-8859-2 charset coding already supported in this release?

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261880)
Submitted by serbanc on Wed, 2008-01-02 22:59.

what are the planned features/changes for G2.4 ?

serbanc - [www.e-poze.ro](http://www.e-poze.ro)

![bigu_c's picture](http://galleryproject.org/files/pictures/picture-174507.png "bigu_c's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261884)
Submitted by bigu\_c on Wed, 2008-01-02 23:28.
**serbanc wrote:**
> what are the planned features/changes for G2.4 ?
>
> serbanc - [www.e-poze.ro](http://www.e-poze.ro)

Securities fixed only!

Read carefully introduction please!

![floridave's picture](http://galleryproject.org/files/pictures/officeguy5.gif "floridave's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261903)
Submitted by floridave on Thu, 2008-01-03 01:57.

General roadmap:

[http://codex.gallery2.org/Gallery2:Roadmap](http://codex.gallery2.org/Gallery2%3ARoadmap)

No plans for 2.4 yet but here is 2.3 roadmap:

[http://codex.gallery2.org/Gallery2:Roadmap:2.3](http://codex.gallery2.org/Gallery2%3ARoadmap%3A2.3)

Dave

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

[Blog & G2](http://gallery2.ca) || [floridave - Gallery Team](http://codex.gallery2.org/index.php/Gallery%3ATeam#Dave_Moore)

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261954)
Submitted by Brandon Sussman on Thu, 2008-01-03 14:23.
**floridave wrote:**
> here is 2.3 roadmap:
>
> [http://codex.gallery2.org/Gallery2:Roadmap:2.3](http://codex.gallery2.org/Gallery2%3ARoadmap%3A2.3)

The schedule part is missing the steps between polishing and releasing:

Quote:
> \* The feature freeze should be 3 to 6 months from now (rather 3): Features freeze ~July 30th, 2007.
>
> \* 1.5 to 2 months of testing, bugfixing and polishing after the feature freeze

Should this be updated? Removed and a pointer to a master schedule inserted?

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261989)
Submitted by serbanc on Thu, 2008-01-03 20:34.

thx, guys.

I propose two issues for the next releases.

1. system links. posibility to have more than one "system link" - aka menubars. Ex. by default, a module registers in systemlinks (to keep compatibility), but an admin can move it in another system link - read menubar.

2. sidebar - have all the itemlinks available in sidebar and not hardcoded in core module. Integrations with 3'rd party are going to be happy.

serbanc - [www.e-poze.ro](http://www.e-poze.ro)

![floridave's picture](http://galleryproject.org/files/pictures/officeguy5.gif "floridave's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261992)
Submitted by floridave on Thu, 2008-01-03 20:57.

serbanc,

please add feature requests to the proper location, not a news story.

<http://sourceforge.net/tracker/?group_id=7130&atid=357130>

Dave

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

[Blog & G2](http://gallery2.ca) || [floridave - Gallery Team](http://codex.gallery2.org/index.php/Gallery%3ATeam#Dave_Moore)

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-261993)
Submitted by serbanc on Thu, 2008-01-03 21:27.

sorry.

serbanc - [www.e-poze.ro](http://www.e-poze.ro)

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-268722)
Submitted by bmora96 on Sun, 2008-03-02 18:37.

Thanks for the security its really good . I have two questions for the next releases

1)Is ISO-8859-2 charset coding already supported in this release?

2)what are the planned features/changes for G2.4 ?

Regards,

Bmora96

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-268734)
Submitted by valiant on Sun, 2008-03-02 21:58.

> 1)Is ISO-8859-2 charset coding already supported in this release?

no. UTF-8 (unicode) is a superset of ISO-8859-2 and the general direction of web applications is towards unicode.

> 2)what are the planned features/changes for G2.4 ?

see: development -> roadmap (upper right corner).

--------------

Documentation: [Support / Troubleshooting](http://codex.gallery2.org/Category%3AGallery_2%3ATroubleshooting) | [Installation, Upgrade, Configuration and Usage](http://codex.gallery2.org/)

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-269927)
Submitted by waltbru on Sat, 2008-03-15 21:53.

My webserver was successfully hacked, through a hole in Gallery 2.0

--------------------------------------------------------------------

I'd like to document this successful hack of my dedicated server, not to whine but to describe how the hack was carried out and how other webmasters can both detect and correct a hacked system successfully. Three months elapsed between the hack of my system and its mal-use that caused a shutdown. If I had known any of the markers I'm about to describe to you during those three months, I could have fixed my system before 30 domains went down hard.

PROCESS THE HACKERS USED:

--------------------------

1. An over-long URL was sent to the "main.php" module of Gallery 2.0

2. This allowed the hackers to execute code in Front-Page, also on my server

3. The MS-Frontpage code, "fpexe", runs as root and can do anything

4. fpexe was used to create a user account at the Linux level

5. The hacker logged on to port 22 (SSH) using this account

6. The hacker then waited 3 months before "selling" my hacked server to a phishing gang

7. The phishing gang then logged onto port 22, downloaded some bot code written in PHP, and ran it continuously

8. The bot code connected to IRC servers in Romania and Russia, then put up a fake banking website

HOW TO DETECT THEIR TRACKS

--------------------------

1. Scan the "access\_log" file (usually in /var/log/httpd) for overly-long GET requests to "main.php" in the gallery directory. Here is a sample:

Received From: u15291219->/var/log/httpd/access\_log

Rule: 31115 fired (level 13) -> "URL too long. Higher than allowed on most browsers. Possible attack."

Portion of the log(s):

211.223.162.5 - - [15/Mar/2008:13:34:10 -0700] "GET /gallery/main.php?g2\_view=core.UserAdmin&amp;g2\_subView=core.UserLogin&amp;g2\_return=%2Fgallery%2Fmain.php%3Fg2\_view%3Dcore.UserAdmin%26g2\_%253Bg2\_subView%3Dcore.UserRecoverPassword%26g2\_%253Bg2\_return%3D%252Fgallery%252Fmain.php%253Fg2\_view%253Dcore.UserAdmin%2526g2\_%25253Bg2\_subView%253Dcore.UserLogin%2526g2\_%25253Bg2\_return%253D%25252Fgallery%25252Fmain.php%25253Fg2\_view%25253Dcore.UserAdmin%252526g2\_%2525253Bg2\_subView%25253Dcore.UserRecoverPassword%252526g2\_%2525253Bg2\_return%25253D%2525252Fgallery%2525252Fmain.php%2525253Fg2\_view%2525253Dcore.UserAdmin%25252526g2\_%252525253Bg2\_subView%2525253Dcore.UserRecoverPassword%25252526g2\_%252525253Bg2\_return%2525253D%252525252Fgallery%252525252Fmain.php%252525253Fg2\_view%252525253Dcore.UserAdmin%2525252526g2\_%25252525253Bg2\_subView%252525253Dcore.UserLogin%2525252526g2\_%25252525253Bg2\_return%252525253D%25252525252Fgallery%25252525252Fmain.php%25252525253Fg2\_view%25252525253Dcore.UserAdmin%252525252526g2\_%2525252525253Bg2\_subView%25252525253Dcore.UserLogin%252525252526g2\_%2525252525253Bg2\_return%25252525253D%2525252525252Fgallery%2525252525252Fmain.php%2525252525253Fg2\_view%2525252525253Dcore.UserAdmin%25252525252526g2\_%252525252525253Bg2\_s

2. Look for entries in "suexec\_log" in /var/log/httpd indicating that the Apache server executed root commands

3. Look in /etc/passwd for new user accounts

4. Look in /home for new user home directories

WHAT I DID TO BLOCK THEM IN THE FUTURE

--------------------------------------

1. Installed Gallery 2.4

2. Uninstalled Frontpage and deleted "fpexe"

3. Disabled Port 22 logins except from a single account, which I must use

4. Disabled password access on SSH, allowing only pre-shared AES private/public keys

5. Went into php.ini and disabled a bunch of PHP function calls that only hackers would use (like "fsockopen", used to talk on IRC to Russia)

6. Installed Mod\_Security into Apache

7. Upgraded to the latest Linux

8. Upgraded to the latest Apache

9. Upgraded to the latest MySQL

10. Installed mod\_evasive into Apache, to prevent DDOS attacks

11. Got a hardware firewall, separate from the server and tightened the ports both in and out to ones I use

12. Turned off all unnecessary Linux services, such as SMTP, MAIL, and BIND

13. Installed OSSEC, which continually monitors all logs and notifies me when any security breach is attempted

14. Turned on the OSSEC feature which blocks specific IP addresses which try to hack the system (via multiple bad logins, URL exploits, etc.)

15. Considerably tightened MySQL security by partitioning logins to specific databases and tightly limiting rights.

Don't take Menalto's warning to upgrade to version 2.4 lightly. They hackers from around the world know all about this hole. Using my new

monitoring system I've seen three different attempts made to hack my Gallery 2 (from Korea, Russia, and Brazil) this weekend. They are on

this like fleas. If I can encourage or advise anyone, I will do so. Don't let this happen to you.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-269965)
Submitted by valiant on Sun, 2008-03-16 14:03.

@waltbru:

Thanks for sharing this story. I agree that one shouldn't ignore security fix releases of any software. But what makes you think that this had anything to do with Gallery 2? Your description in "HOW TO DETECT THEIR TRACKS" rather looks like a vulnerability in the webserver. The G2 URL itself doesn't do anything special in G2. It's a request for a login page, it's not even a login request. Just for a HTML page. But the length of the URL could cause some buffer-overflow in the webserver if the webserver is vulnerable in that regard. Which is not related to G2.

And by the way: It's Gallery 2.2.4 and not 2.4. ![:)](http://galleryproject.org/files/smiley/smile.gif)

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-269976)
Submitted by waltbru on Sun, 2008-03-16 17:04.

Good questions, let me explain:

\* The recent logging of G2 hack attempts indicates that hackers are attempting it systematically and globally, not the particular request string used to compromise my system four months ago. Since in two days three different hackers (from Russia, Germany, and Korea) used this exact same string overload only on G2 and no other domain of my 30 indicates some specific worldwide attempt against G2. This is not one lone hacker idly trying random possible vulnerabilities but a shared exploit that many are trying.

\* Yes, it's possible that this specific exploit might work against other vulnerabilities but consider this:

1. My security logs don't show any instance of it except in a G2 context, to a G2 subdir

2. The parms in it are G2 parms, not just random text

Ergo, my conclusion that this attack is G2-focused.

\* The specifics of the FrontPage execution log pointed directly to a site of mine, from a G2 directory. Hence my feedback that G2 was used to run "fpexe", which was used to create a user account.

\* The hackers find Gallery2 sites by using Google. They use "Google Dorks" which are Google search strings which return a list of sites using Gallery. Those G2-installed sites are then scanned for attack. Here is an excerpt on a hacker website where these "GD"s are discussed, including one to find sites with Gallery: <http://forums.hackervoice.co.uk/index.php?showtopic=5006>

\* The good news is that zero hack attempts have gotten to first base since I upgraded G2. All my other security measures were icing on the cake since the upgrade locks the front door that they are pounding on. "Wake up webmasters; listen to the G2 sysop. Upgrade your old G2 systems!"

\* Yes, I know the version is 2.2.4, but the comment posting system didn't allow me to change it once submitted. There's another typo too; the substitution of "they" for "the".

\* I have zero complaints. Security is MY responsibility as webmaster. The G2 upgrade notices were clearly posted hence the authors did their duty. My goal is to impart to others the need to listen to G2 upgrade notices and spare others server rebuilding as a consequence of server penetration.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-269981)
Submitted by valiant on Sun, 2008-03-16 18:24.

I still fail to see why G2 is related to the issue. The one URL you posted in your comment is the following:

"/gallery/main.php?g2\_view=core.UserAdmin&amp;g2\_subView=core.UserLogin&amp;g2\_return=%2Fgallery%2"...

G2 really does nothing but show a login page for that request. It doesn't do further processing, it doesn't create files and it doesn't change anything in the database for that request.

The primary question is how the attacker could place some files on your server. And how the uploaded content/file could be executed. And how it could be executed in root context.

For G2, only the first two questions are relevant, if at all. G2 shouldn't allow something like that. And to see if G2 or another application was responsible for allowing the attacker to execute some unauthorized code on your server one needs to analyse the logs.

All I say is that while there may be other log entries that could explain how this was accomplished, the one URL you've shown doesn't explain anything. ![:)](http://galleryproject.org/files/smiley/smile.gif)

So it may well be that applying the (security) updates for your whole system might not have been the icing on the cake but the actual fix. Either way, the Gallery 2.2.4 security patch release was very important and the kind of vulnerabilities in prior G2 versions were pretty bad.

--------------

Documentation: [Support / Troubleshooting](http://codex.gallery2.org/Category%3AGallery_2%3ATroubleshooting) | [Installation, Upgrade, Configuration and Usage](http://codex.gallery2.org/)

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-269983)
Submitted by waltbru on Sun, 2008-03-16 19:03.

I've given you enough material to detect similar attacks on your own system, and to protect it. You'll have to do your own research from here. This is what I know:

\* A hacker exploit against G2 was used to run FrontPage's "fpexe" module

\* fpexe, when installed in Apache, runs as root in Linux. Look up this exploit to understand it better: <http://seclists.org/bugtraq/1997/Oct/0060.html>

\* Hackers are currently running attempts on my G2 system, as I documented.

\* I don't understand exactly how/what their hacks do.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-270190)
Submitted by vcdgeek on Wed, 2008-03-19 03:21.

I also see similar attemps on my g2 server too. my question, is only g2 is aimed at or any other software, too. I only use wordpress & gallery and I see hits similar to above on g2 only.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-270215)
Submitted by valiant on Wed, 2008-03-19 12:30.

Constant attacks on any web application are normal. I'd start getting curious if you see that a specific application is targeted and if the URLs look like they could be doing something. An absurdly high percentage of these automated "attacks" are attempts to post spam or phishing redirects. So they're harmless and Gallery 2.3 is doing a far better job at rejecting spam comments than previous Gallery versions.

It's just important to stay ahead of the game. Our job as developers is to make the application as robust as possible and your responsibility as users is to subscribe to the announcement mailing lists of the applications you use such that you get notified of upgrades as fast as possible.

![bharat's picture](http://galleryproject.org/files/pictures/picture-8.jpg "bharat's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-270330)
Submitted by bharat on Thu, 2008-03-20 18:15.

Thanks for the very detailed information! It's good for us to see the types of attack vectors that black hats are using to try to compromise our systems. I am seeing a constant flood of these types of attacks on [my Gallery](http://menalto.com/gallery) also. If you believe that you've been hacked, please contact us at [url]mailto:security@gallery.menalto.com[/url] ASAP and we'll do forensics on your system with you.

Short of a buffer overflow vulnerability in Apache or PHP, I don't see how the URL you provided triggered the vulnerability. I've been over that part of the code very carefully, just in case. Could you provide us with some more possible attack vectors? I wonder if there's another one in there that we're overlooking. I'd pay special attention to POST requests because the payload of those is not generally saved in your logs. Any further information you can provide on the attack vector would be very useful to us. Even if it's not a G2 related issue, it's good for us to know about other attacks in the stack that Gallery2 uses.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-270347)
Submitted by waltbru on Thu, 2008-03-20 20:24.

Hello Bharat,

Thanks for writing, it's cool to talk to the brilliant author who has given us this terrific photo album. Let me say thank you.

It's very possible that the attacks I've seen lately are completely ineffective, yet I see them only because they trigger OSSEC, my log-scanner software. His rule-set may well ring the alarm when it shouldn't, yet not notify me when it should. As the soldiers say: "It's the bullet you don't hear that gets you".

I'm in a submarine and this is my little periscope yet it's better than going blind like I did before. I'll look at other error logs (I'm running Mod\_Security under Apache) and report in if I can find other G2 attack vectors that don't trigger OSSEC. I have no idea if this method is how they originally penetrated my system, using G2 to execute FrontPage's "fpexe", then creating a Linux user, then logging into SSH.

Ineffective or not, this alert gets emailed to me 2-3 times daily, as hackers from around the world try it. It's probably a standard item in some hacking script. The URL is over 8192 bytes, possibly a buffer-overflow attempt. Here's a recent log alert, this time from an Italian source:

-------------------------------start log-----------------------------

OSSEC HIDS Notification.

2008 Mar 19 19:09:27

Received From: u15214219->/var/log/httpd/access\_log

Rule: 31115 fired (level 13) -> "URL too long. Higher than allowed on most browsers. Possible attack."

Portion of the log(s):

89.149.242.224 - - [19/Mar/2008:19:09:26 -0700] "GET /gallery2/main.php?g2\_view=core.UserAdmin&amp;g2\_subView=core.UserRecoverPassword&amp;g2\_return=%2Fgallery2%2Fmain.php%3Fg2\_view%3Dcore.UserAdmin%26g2\_%253Bg2\_subView%3Dcore.UserRecoverPassword%26g2\_%253Bg2\_return%3D%252Fgallery2%252Fmain.php%253Fg2\_view%253Dcore.UserAdmin%2526g2\_%25253Bg2\_subView%253Dcore.UserLogin%2526g2\_%25253Bg2\_return%253D%25252Fgallery2%25252Fmain.php%25253Fg2\_view%25253Dcore.UserAdmin%252526g2\_%2525253Bg2\_subView%25253Dcore.UserLogin%252526g2\_%2525253Bg2\_return%25253D%2525252Fgallery2%2525252Fmain.php%2525253Fg2\_view%2525253Dcore.UserAdmin%25252526g2\_%252525253Bg2\_subView%2525253Dcore.UserRecoverPassword%25252526g2\_%252525253Bg2\_return%2525253D%252525252Fgallery2%252525252Fmain.php%252525253Fg2\_view%252525253Dcore.UserAdmin%2525252526g2\_%25252525253Bg2\_subView%252525253Dcore.UserLogin%2525252526g2\_%25252525253Bg2\_return%252525253D%25252525252Fgallery2%25252525252Fmain.php%25252525253Fg2\_view%25252525253Dcore.UserAdmin%252525252526g2\_%2525252525253Bg2\_subView%25252525253Dcore.UserRecoverPassword%252525252526g2\_%2525252525253Bg2\_return%25252525253D%2525252525252Fgallery2%2525252525252Fmain.php%2525252525253Fg2\_view%2525252525253Dcore.UserAdmin%25252525252526g2\_%2

---------------------------end log-------------------------------------

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-271770)
Submitted by chris82 on Thu, 2008-04-03 01:28.

Hmm it seems to try exploiting any bug for the admin password recovery. Hope there is no bug and the "hacker" doesn't have any success.. ![:)](http://galleryproject.org/files/smiley/smile.gif)

Greets

Chris

--------------

[My WebSite](http://www.smsgott.de)

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-271951)
Submitted by mokosam on Fri, 2008-04-04 17:24.

Hi,

After much pain I have installed and set up G2 in J!1.5.

I can't get the CB plug in to work but I figured I didn't need is as I am trying to create quite a closed system.

I installed:

g2bridge\_component v2.2

g2bridge\_plugin

com\_joomlalib\_1\_3\_2

mod\_g2bridge\_album\_v2.0

mod\_g2bridge\_image\_v2.7

mod\_g2bridge\_side\_v2.6

I have added a test album and created a menu link to it in Joomla.

I can see the album and thumbs but when I click on the image it jumps to the main page.

see site below and navigate to the test gallery page

this is the G2 installation

[http://zinderud.com/](http://zinderud.com)

and

[bilim](http://bilimselkonular.com)

I LOVE YOU GÃLÃM

![net4earning's picture](http://galleryproject.org/files/pictures/picture-159103.gif "net4earning's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.4_released.html#comment-272174)
Submitted by net4earning on Mon, 2008-04-07 16:24.

the conversation between waltbru and valiant is quite helpful.

---------------------

[Gallery](http://www.gallery.raoraj.com)

---

[![SourceForge Logo](http://gallery.sourceforge.net/sflogo.php)](http://sourceforge.net/projects/gallery)

[![Donate](http://galleryproject.org/themes/gmc/images/gallery_donate.png)](http://gallery.sourceforge.net/donate.php?donate_tag=website_footer)

[![Syndicate content](http://galleryproject.org/misc/feed.png "Syndicate content")](node/feed)
All logos, trademarks and content in this site are property of their respective owners. Posts and comments are the property of their posters. All else is © Copyright 2000-2014 [Bharat Mediratta](http://www.menalto.com/bharat/index.html).

![](http://galleryproject.org/themes/gmc/images/downloads-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/docs-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/search-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/forums-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/support-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/dev-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/myaccount-icon-hover.png)



=== Content from bugs.gentoo.org_1291638d_20250125_154508.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 203217
www-apps/gallery < 2.2.4 Multiple vulnerabilities (CVE-2007-{6685,6686,6687,6688,6689,6690,6691,6692,6693})
Last modified: 2022-06-24 09:06:42 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=203217&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=203217&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 203217**](show_bug.cgi?id=203217)
- www-apps/gallery < 2.2.4 Multiple vulnerabilities (CVE-2007-{6685,6686,6687,6688,6689,6690,6691,6692,6693})

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
www-apps/gallery < 2.2.4 Multiple vulnerabilities (CVE-2007-{6685,6686,6687,6...

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | High critical | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | B1 [glsa] | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | Duplicates (1): | [204244](show_bug.cgi?id=204244 "RESOLVED DUPLICATE - Gallery 2.2.3 has security porblems, version bump requested")  ([view as bug list](buglist.cgi?bug_id=204244)) | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2007-12-24 11:09 UTC by Georg Weiss | | --- | --- | | Modified: | 2022-06-24 09:06 UTC ([History](show_activity.cgi?id=203217)) | | CC List: | 3 users (show)  fryfrog moixa portage | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [**gallery 2.2.4 ebuild**](attachment.cgi?id=140022 "View the content of the attachment") (gallery-2.2.4.ebuild,2.16 KB, text/plain)  [2008-01-04 08:07 UTC](#attach_140022 "Go to the comment associated with the attachment"), Frank Breedijk | *no flags* | [Details](attachment.cgi?id=140022&action=edit) | | [View All](attachment.cgi?bugid=203217&action=viewall)  [Add an attachment](attachment.cgi?bugid=203217&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=203217&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Georg Weiss    2007-12-24 11:09:23 UTC  ``` hi  from <gallery-announce@lists.sourceforge.net> --8<-- Just in time for the holidays, Gallery 2.2.4 is now available for download. This release fixes critical security issues, no new features have been added. Due to the severity of these issues users of all previous Gallery 2 versions are strongly encouraged to upgrade to version 2.2.4 as soon as possible! All issues addressed in this release were discovered through an extensive internal security audit.  Since 2.2.4 is a security release, it shares the same installation requirements as 2.2.3. If you haven't upgraded to 2.2.x yet, please review the Gallery 2.2 release notes for highlights of changes and the requirements. Read on for more details and upgrade instructions.   Details: <http://gallery.menalto.com/gallery_2.2.4_released>  Download: [http://codex.gallery2.org/Gallery2:Download#Packages](http://codex.gallery2.org/Gallery2%3ADownload#Packages) --8<-- ```  [Comment 1](#c1)  Tobias Heinlein (RETIRED)   gentoo-dev  2007-12-24 11:24:05 UTC  ``` Thanks for reporting this to us.  web-apps, please bump. ```  [Comment 2](#c2)  donald webster    2008-01-03 04:32:20 UTC  ``` Hi, I am with the Gallery team and was wondering if there would be a good person to email about the Gallery ebuild.  Perhaps the web-apps@gentoo.org or something? ```  [Comment 3](#c3)  Pierre-Yves Rofes (RETIRED)   gentoo-dev  2008-01-03 08:10:20 UTC  ``` (In reply to [comment #2](show_bug.cgi?id=203217#c2)) > Hi, I am with the Gallery team and was wondering if there would be a good > person to email about the Gallery ebuild.  Perhaps the web-apps@gentoo.org or > something? >   Yes, mailing web-apps is probably the best way to go. But if you already have a working ebuild for 2.2.4, feel free to attach it here. ```  [Comment 4](#c4)  Pierre-Yves Rofes (RETIRED)   gentoo-dev  2008-01-04 06:46:08 UTC  ``` *** [Bug 204244](show_bug.cgi?id=204244 "RESOLVED DUPLICATE - Gallery 2.2.3 has security porblems, version bump requested") has been marked as a duplicate of this bug. *** ```  [Comment 5](#c5)  Frank Breedijk    2008-01-04 08:07:28 UTC  ``` Created [attachment 140022](attachment.cgi?id=140022 "gallery 2.2.4 ebuild") [[details](attachment.cgi?id=140022&action=edit "gallery 2.2.4 ebuild")] gallery 2.2.4 ebuild  Here is my local patched gallery 2.2.4 ebuild. Tested on amd64. ```  [Comment 6](#c6)  Gunnar Wrobel (RETIRED)   gentoo-dev  2008-01-17 08:36:31 UTC  ``` 2.2.4 is in the tree.  Target archs:  alpha amd64 hppa ppc ppc64 sparc x86  @donald webster:  We also offer ebuilds for gallery-1.5.3 (stable) and gallery-1.5.5 (unstable). Are these versions affected and should they be removed? ```  [Comment 7](#c7)  Markus Meier   gentoo-dev  2008-01-17 10:51:16 UTC  ``` x86 stable ```  [Comment 8](#c8)  Raúl Porcel (RETIRED)   gentoo-dev  2008-01-17 13:52:37 UTC  ``` alpha/sparc stable ```  [Comment 9](#c9)  Jeroen Roovers (RETIRED)   gentoo-dev  2008-01-17 15:18:18 UTC  ``` Stable for HPPA. ```  [Comment 10](#c10)  Brent Baude (RETIRED)   gentoo-dev  2008-01-17 17:04:22 UTC  ``` ppc64 done ```  [Comment 11](#c11)  Jonas Pedersen    2008-01-17 17:48:54 UTC  ``` www-apps/gallery-2.2.4  USE="ffmpeg gd -imagemagick -mysql -netpbm -postgres -raw -unzip -vhosts -zip"  1. Emerges on AMD64.  2. No collisions etc.  3. Works. Executed setup from scratch and added album with some pictures. Was able to view album as well.   Portage 2.1.3.19 (default-linux/amd64/2007.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.23-gentoo-r3 x86_64) ================================================================= System uname: 2.6.23-gentoo-r3 x86_64 Intel(R) Core(TM)2 CPU 6600 @ 2.40GHz Timestamp of tree: Fri, 11 Jan 2008 22:46:01 +0000 distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled] ccache version 2.4 [enabled] app-shells/bash:     3.2_p17-r1 dev-java/java-config: 1.3.7, 2.0.33-r1 dev-lang/python:     2.4.4-r6 dev-python/pycrypto: 2.0.1-r6 dev-util/ccache:     2.4-r7 sys-apps/baselayout: 1.12.10-r5 sys-apps/sandbox:    1.2.18.1-r2 sys-devel/autoconf:  2.13, 2.61-r1 sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10 sys-devel/binutils:  2.18-r1 sys-devel/gcc-config: 1.4.0-r4 sys-devel/libtool:   1.5.24 virtual/os-headers:  2.6.23-r2 ACCEPT_KEYWORDS="amd64" CBUILD="x86_64-pc-linux-gnu" CFLAGS="-march=nocona -Os -msse3 -pipe -fomit-frame-pointer" CHOST="x86_64-pc-linux-gnu" CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config" CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/udev/rules.d" CXXFLAGS="-march=nocona -Os -msse3 -pipe -fomit-frame-pointer" DISTDIR="/usr/portage/distfiles" FEATURES="ccache collision-protect distcc distlocks metadata-transfer multilib-strict parallel-fetch sandbox sfperms strict test unmerge-orphans userfetch" GENTOO_MIRRORS="<http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/> <http://trumpetti.atm.tut.fi/gentoo/> <http://ftp.snt.utwente.nl/pub/os/linux/gentoo> <http://ds.thn.htu.se/linux/gentoo>" LC_ALL="en_DK.utf8" MAKEOPTS="-j6" PKGDIR="/usr/portage/packages" PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*" PORTAGE_TMPDIR="/var/tmp" PORTDIR="/usr/portage" PORTDIR_OVERLAY="/usr/portage/local/layman/php-testing /usr/portage/local/layman/mozilla /usr/portage/local/layman/kde /usr/local/portage" SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage" USE="X a52 aac acl acpi aiglx alsa amd64 apache2 arts atk berkdb bitmap-fonts cairo cdr cli cracklib crypt cups dbus dga directfb dri dts dvd dvdr dvdread eds emboss encode evo fam fbcn ffmpeg firefox fortran ftp gd gdbm gif gphoto2 gpm gstreamer gtk hal iconv icq ieee1394 ipv6 isdnlog java jpeg kde kerberos live lm_sensors mad midi mikmod mjpeg mmx mozilla mp2 mp3 mpeg mplayer msn mudflap ncurses nls nptl nptlonly ogg oggvorbis opengl openmp pam pcre pda pdf perl png ppds pppd python qt qt3 qt3support qt4 quicktime readline reflection samba sdl session spell spl sse sse2 sse3 ssl svg tcpd test threads tiff truetype truetype-fonts type1-fonts unicode vorbis x264 xcomposite xml xorg xscreensaver xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="radeon" Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS   ```  [Comment 12](#c12)  Frank Breedijk    2008-01-17 18:08:28 UTC  ``` Just upgraded from the portage tree withou any problems on a running isntallation AMD64. ```  [Comment 13](#c13)  Tobias Scherbaum (RETIRED)   gentoo-dev  2008-01-18 20:24:14 UTC  ``` ppc stable ```  [Comment 14](#c14)  Steve Dibb (RETIRED)   gentoo-dev  2008-01-23 16:02:36 UTC  ``` amd64 stable ```  [Comment 15](#c15)  Gunnar Wrobel (RETIRED)   gentoo-dev  2008-01-23 16:52:01 UTC  ``` gallery-1.5.* is unaffected but I upgraded that branch to 1.5.7.  Removed insecure 2.2.3. webapps done. ```  [Comment 16](#c16)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2008-01-23 19:59:45 UTC  ``` Is it just me or should this be B0? Local file inclusion + unauthorized file upload?  GLSA request filed anyways. ```  [Comment 17](#c17)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2008-01-23 22:03:32 UTC  ``` Ok B1 then? ```  [Comment 18](#c18)  Robert Buchholz (RETIRED)   gentoo-dev  2008-02-11 22:18:49 UTC  ``` CVE-2007-6685 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6685>):   Unspecified vulnerability in the Publish XP module Menalto Gallery before   2.2.4 allows attackers to create albums and upload files via unknown vectors.  CVE-2007-6686 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6686>):   The URL rewrite module in Menalto Gallery before 2.2.4 allows attackers to   include and execute arbitrary local files via unknown vectors related to the   admin controller.  CVE-2007-6687 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6687>):   Multiple cross-site scripting (XSS) vulnerabilities in Menalto Gallery before   2.2.4 allow remote attackers to inject arbitrary web script or HTML via   crafted filenames to the (1) Core or (2) add-item modules; or via (3) HTTP   PROPPATCH in the WebDAV module.  CVE-2007-6688 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6688>):   Unspecified vulnerability in the Installation application in Menalto Gallery   before 2.2.4 has unknown impact and attack vectors related to   "web-accessibility protection of the storage folder."  CVE-2007-6689 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6689>):   Menalto Gallery before 2.2.4 does not properly check for malicious file   extensions during file uploads, which allows attackers to execute arbitrary   code via the (1) Core application or (2) MIME module.  CVE-2007-6690 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6690>):   The Gallery Remote module in Menalto Gallery before 2.2.4 does not check   permissions for unspecified GR commands, which has unknown impact and attack   vectors.  CVE-2007-6691 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6691>):   Multiple unspecified vulnerabilities in Menalto Gallery before 2.2.4 have   unknown impact, related to (1) "hotlink protection" in the URL rewrite   module, (2) a WebDAV view in the WebDAV module, (3) a comment view in the   Comment module, (4) unspecified "item information disclosure attacks" in the   Core module Gallery application, (5) the slideshow in the Slideshow module,   and (6) multiple Print modules.  CVE-2007-6692 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6692>):   Open redirect vulnerability in Menalto Gallery before 2.2.4 allows remote   attackers to redirect users to arbitrary web sites and conduct phishing   attacks via a URL in the (1) Core and (2) print modules.  CVE-2007-6693 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2007-6693>):   Unspecified vulnerability in the WebCam module in Menalto Gallery before   2.2.4 has unknown impact and attack vectors related to a "proxied request."  ```  [Comment 19](#c19)  Robert Buchholz (RETIRED)   gentoo-dev  2008-02-12 00:05:02 UTC  ``` GLSA 200802-04. ```   [Comment 20](#c20)  tiger227    2022-06-24 09:06:42 UTC  Comment hidden (spam)  ``` happy to find this post and make me understand more in using mastercard. Thank you! Check link this : tiger227.com ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=203217)
* - [XML](show_bug.cgi?ctype=xml&id=203217)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=203217)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=203217&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=203217&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=203217&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from security.gentoo.org_6664ee8b_20250125_154511.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Gallery: Multiple vulnerabilities — GLSA **200802-04**

Multiple vulnerabilities were discovered in Gallery.

### Affected packages

| Package | **www-apps/gallery** on all architectures |
| --- | --- |
| Affected versions | < **2.2.4** |
| Unaffected versions | >= **2.2.4**< **2.0** |

### Background

Gallery is a web-based application for creating and viewing photo
albums.

### Description

The Gallery developement team reported and fixed critical
vulnerabilities during an internal audit (CVE-2007-6685, CVE-2007-6686,
CVE-2007-6687, CVE-2007-6688, CVE-2007-6689, CVE-2007-6690,
CVE-2007-6691, CVE-2007-6692, CVE-2007-6693).

### Impact

A remote attacker could exploit these vulnerabilities to execute
arbitrary code, conduct Cross-Site Scripting and Cross-Site Request
Forgery attacks, or disclose sensitive informations.

### Workaround

There is no known workaround at this time.

### Resolution

All Gallery users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-apps/gallery-2.2.4"
```
### References

* [CVE-2007-6685](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6685)
* [CVE-2007-6686](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6686)
* [CVE-2007-6687](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6687)
* [CVE-2007-6688](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6688)
* [CVE-2007-6689](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6689)
* [CVE-2007-6690](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6690)
* [CVE-2007-6691](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6691)
* [CVE-2007-6692](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6692)
* [CVE-2007-6693](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6693)

**Release date**

February 11, 2008

**Latest revision**

February 11, 2008: 01

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [203217](https://bugs.gentoo.org/show_bug.cgi?id=203217)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**


