=== Content from www.redhat.com_7da40e86_20250126_024338.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_c2129633_20250126_024350.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from usn.ubuntu.com_a83f0c1b_20250124_180456.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3849-1: Linux kernel vulnerabilities

20 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

It was discovered that a NULL pointer dereference existed in the keyring

subsystem of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash). ([CVE-2017-2647](/security/CVE-2017-2647))

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that an integer overrun vulnerability existed in the

POSIX timers implementation in the Linux kernel. A local attacker could use

this to cause a denial of service. ([CVE-2018-12896](/security/CVE-2018-12896))

Noam Rathaus discovered that a use-after-free vulnerability existed in the

Infiniband implementation in the Linux kernel. An attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14734](/security/CVE-2018-14734))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

Tetsuo Handa discovered a logic error in the TTY subsystem of the Linux

kernel. A local attacker with access to pseudo terminal devices could use

this to cause a denial of service. ([CVE-2018-18386](/security/CVE-2018-18386))

Kanda Motohiro discovered that writing extended attributes to an XFS file

system in the Linux kernel in certain situations could cause an error

condition to occur. A local attacker could use this to cause a denial of

service. ([CVE-2018-18690](/security/CVE-2018-18690))

It was discovered that an integer overflow vulnerability existed in the

CDROM driver of the Linux kernel. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-18710](/security/CVE-2018-18710))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-3.13.0-164-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc-e500](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-2647](/security/CVE-2017-2647)
* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-12896](/security/CVE-2018-12896)
* [CVE-2018-14734](/security/CVE-2018-14734)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-18386](/security/CVE-2018-18386)
* [CVE-2018-18690](/security/CVE-2018-18690)
* [CVE-2018-18710](/security/CVE-2018-18710)

## Related notices

* [USN-3849-2](/security/notices/USN-3849-2)
* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3776-1](/security/notices/USN-3776-1)
* [USN-3776-2](/security/notices/USN-3776-2)
* [USN-3848-1](/security/notices/USN-3848-1)
* [USN-3848-2](/security/notices/USN-3848-2)
* [USN-3797-2](/security/notices/USN-3797-2)
* [USN-3797-1](/security/notices/USN-3797-1)
* [USN-3846-1](/security/notices/USN-3846-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_cc5001b0_20250124_180457.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3849-2: Linux kernel (Trusty HWE) vulnerabilities

20 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-lts-trusty](/security/cves?package=linux-lts-trusty) - Linux hardware enablement kernel from Trusty for Precise ESM

## Details

USN-3849-1 fixed vulnerabilities in the Linux kernel for Ubuntu 14.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 14.04 LTS for Ubuntu

12.04 ESM.

It was discovered that a NULL pointer dereference existed in the keyring

subsystem of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash). ([CVE-2017-2647](/security/CVE-2017-2647))

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that an integer overrun vulnerability existed in the

POSIX timers implementation in the Linux kernel. A local attacker could use

this to cause a denial of service. ([CVE-2018-12896](/security/CVE-2018-12896))

Noam Rathaus discovered that a use-after-free vulnerability existed in the

Infiniband implementation in the Linux kernel. An attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14734](/security/CVE-2018-14734))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

Tetsuo Handa discovered a logic error in the TTY subsystem of the Linux

kernel. A local attacker with access to pseudo terminal devices could use

this to cause a denial of service. ([CVE-2018-18386](/security/CVE-2018-18386))

Kanda Motohiro discovered that writing extended attributes to an XFS file

system in the Linux kernel in certain situations could cause an error

condition to occur. A local attacker could use this to cause a denial of

service. ([CVE-2018-18690](/security/CVE-2018-18690))

It was discovered that an integer overflow vulnerability existed in the

CDROM driver of the Linux kernel. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-18710](/security/CVE-2018-18710))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.13.0-164-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0-164.214~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-164.214~precise1)
* [linux-image-generic-lpae-lts-trusty](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0.164.154](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-164.214~precise1)
* [linux-image-3.13.0-164-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0-164.214~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-164.214~precise1)
* [linux-image-generic-lts-trusty](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0.164.154](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-164.214~precise1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-2647](/security/CVE-2017-2647)
* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-12896](/security/CVE-2018-12896)
* [CVE-2018-14734](/security/CVE-2018-14734)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-18386](/security/CVE-2018-18386)
* [CVE-2018-18690](/security/CVE-2018-18690)
* [CVE-2018-18710](/security/CVE-2018-18710)

## Related notices

* [USN-3849-1](/security/notices/USN-3849-1)
* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3776-1](/security/notices/USN-3776-1)
* [USN-3776-2](/security/notices/USN-3776-2)
* [USN-3848-1](/security/notices/USN-3848-1)
* [USN-3848-2](/security/notices/USN-3848-2)
* [USN-3797-2](/security/notices/USN-3797-2)
* [USN-3797-1](/security/notices/USN-3797-1)
* [USN-3846-1](/security/notices/USN-3846-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.redhat.com_a68b13d5_20250126_024335.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)

  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Product Documentation](https://access.redhat.com/documentation)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)

  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform)
  [All Product Docs](//docs.redhat.com/en/products/)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)

  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Classifications](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Severety Ratings](https://access.redhat.com/security/security-updates/#/cve)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)

  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

 Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

# Security Data

Red Hat Product Security is committed to providing tools and security data to help security measurement. A part of this commitment is our active participation in various projects such as the CVE Project, the OASIS CSAF technical committee, or SBOM/VEX forums. We provide the raw data below so customers and researchers can produce their own metrics, for their own unique situations, and hold us accountable. To receive notifications when we fix bugs and add new features, please follow the official [Red Hat Security Data Changelog](https://access.redhat.com/articles/5554431).

The data resources linked on this page as well as their alternative representations available through the [Security Data API](https://access.redhat.com/documentation/en-us/red_hat_security_data_api/1.0/html/red_hat_security_data_api/index) are licensed under the [Creative Commons Attribution 4.0 International License](https://creativecommons.org/licenses/by/4.0/). If you distribute this content or a modified version of it, you must provide attribution to Red Hat, Inc. and provide a link to the original.

**Note:** Security data (CSAF, OVAL, SBOM, and other files) published by Red Hat Product Security was previously served from two locations:

* https://access.redhat.com/security/data/\*
* https://www.redhat.com/security/data/\*

A new domain was recently created the scope of which (for the time being) is to serve this same data:

* https://security.access.redhat.com/data/\*

Effective Sep 3, 2024, a redirect was put in place for all traffic from *www.redhat.com/security/data/\** to be redirected to the new *security.access.redhat.com/data/\** domain. On Sep 30, a similar change was made for *access.redhat.com/security/data/\** to redirect to *security.access.redhat.com/data/*. No change to the actual files or directory layout under the *data/\** path was made. You can start consuming from the new domain today. For example: <https://access.redhat.com/security/data/csaf/v2/vex/2024/cve-2024-0151.json> is now available at <https://security.access.redhat.com/data/csaf/v2/vex/2024/cve-2024-0151.json>; on Sep 30, the former began redirecting to the latter.

### CSAF/VEX Documents

The Common Security Advisory Framework (CSAF) standard enables organizations to share information about security issues using a consistent and common format. We provide Red Hat security advisories in CSAF format using the VEX profile as well as per-CVE VEX documents that contains information on both fixed and unfixed products/components.

* [CSAF GA announcement post](https://www.redhat.com/en/blog/csaf-vex-documents-now-generally-available)
  + [Link to CSAF advisories](https://security.access.redhat.com/data/csaf/v2/advisories/)
* [VEX files for CVEs GA announcement post](https://www.redhat.com/en/blog/red-hat-vex-files-cves-are-now-generally-available%20)
  + [Link to CSAF VEX per-CVE files](https://security.access.redhat.com/data/csaf/v2/vex/)

### OSV Records

[Red Hat / OSV.dev announcement on OpenSSF](https://openssf.org/blog/2024/11/01/red-hats-collaboration-with-the-openssf-and-osv-dev-yields-results-red-hat-security-data-now-available-in-the-osv-format/%20). The CSAF advisory data for RPMs is convertered to OSV records and shared with OSV.dev. It is expected that customers will consume this data from OSV.dev not directly from this URL. This is the location OSV.dev consumes the data from.

* [Link to Red Hat OSV data](https://security.access.redhat.com/data/osv/all.json)

### SBOM Documents

Software Bill of Materials (SBOM) is a complete list of components, their versions, licensing information, provenance, and other metadata for a given product. Red Hat publishes SBOM documents for select products at:

* [Link to SBOM documents](https://security.access.redhat.com/data/sbom/beta/spdx/)

### OVAL Definitions

**Note: OVAL/DS v1 files are no longer available and have been archived; see [OVAL v1 deprecation announcement](https://access.redhat.com/OVAL_v1_deprecation_announcement) for more information.**

OVAL definitions are available for vulnerabilities that were addressed in errata for Red Hat Enterprise Linux and select additional products. To completely evaluate your system you will need to evaluate it against the streams for all products installed on that system.

* [OVAL compatibility FAQ](https://access.redhat.com/articles/221883)
* [OVAL Streams directory](https://security.access.redhat.com/data/oval/v2/)
* [SCAP source data stream files](https://security.access.redhat.com/data/metrics/ds/v2/)

### Vulnerability Metadata

#### Repository to CPE Mapping

Used for matching [OVAL security data to installed RPMs](https://www.redhat.com/en/blog/how-accurately-match-oval-security-data-installed-rpms). Each repository also includes a set of relative URLs from where the content of the repository can be downloaded.

* [repository-to-cpe.json](https://security.access.redhat.com/data/meta/v1/repository-to-cpe.json)

#### RHSA RSS feed

An RSS feed that contains a list of Red Hat security advisories released in the last three days.

* [rhsa.rss](https://security.access.redhat.com/data/meta/v1/rhsa.rss)

#### CPE Dictionary

CPE is a structured naming scheme for information technology systems, software, and packages. For reference, we provide a dictionary mapping the CPE names we use, to Red Hat product descriptions. Some of these CPE names will be for new products that are not in the official CPE dictionary, and should therefore be treated as temporary CPE names:

* [cpe-dictionary.xml](https://security.access.redhat.com/data/meta/v1/cpe-dictionary.xml)

### Security Data Archive

Security data files that have been retired are available in an archive. Each file is marked with a date (YYYYMMDD) when it was last updated:

* [Link to Security Data archive](https://security.access.redhat.com/data/archive/)

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com)

### Help

* [Contact Customer Portal](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Systems Status

### About

* [Red Hat Subscription Value](https://access.redhat.com/subscription-value)
* [About Red Hat](https://www.redhat.com/about/)
* [Red Hat Jobs](http://jobs.redhat.com)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

Copyright © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)

×
### Formatting Tips

Here are the common uses of Markdown.

Code blocks
```
~~~
Code surrounded in tildes is easier to read
~~~
```

Links/URLs`[Red Hat Customer Portal](https://access.redhat.com)`

[Learn more](/help/markdown)
Close



=== Content from access.redhat.com_6415924a_20250124_180436.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2019:0831 - Security Advisory

Issued:
2019-04-23
Updated:
2019-04-23
# RHSA-2019:0831 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: kernel-alt security and bug fix update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2019%3A0831)

## Topic

An update for kernel-alt is now available for Red Hat Enterprise Linux 7.

Red Hat Product Security has rated this update as having a security impact of Important. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

The kernel-alt packages provide the Linux kernel version 4.x.

Security Fix(es):

* kernel: lack of check for mmap minimum address in expand\_downwards in mm/mmap.c leads to NULL pointer dereferences exploit on non-SMAP platforms (CVE-2019-9213)
* kernel: use-after-free in ucma\_leave\_multicast in drivers/infiniband/core/ucma.c (CVE-2018-14734)
* kernel: Unprivileged users able to inspect kernel stacks of arbitrary tasks (CVE-2018-17972)
* kernel: TLB flush happens too late on mremap (CVE-2018-18281)
* kernel: Type confusion in drivers/tty/n\_tty.c allows for a denial of service (CVE-2018-18386)
* kernel: userfaultfd bypasses tmpfs file permissions (CVE-2018-18397)
* kernel: Integer overflow in the alarm\_timer\_nsleep function (CVE-2018-13053)
* kernel: NULL pointer dereference in xfs\_da\_shrink\_inode function (CVE-2018-13094)

For more details about the security issue(s), including the impact, a CVSS score, acknowledgments, and other related information, refer to the CVE page(s) listed in the References section.

Bug Fix(es):

* Failed to boot with ftrace=function in kvm with 2vcpu (BZ#1501024)
* [ALT-7.5][x86\_64] perf test 63 - inet\_pton fails on x86\_64 (BZ#1518836)
* BUG: potential out-of-bounds string access when forcing a SELinux label on a file (BZ#1595706)
* stack out-of-bounds in smb{2,3}\_create\_lease\_buf() on SMB2/SMB3 mounts (BZ#1598757)
* [ALT-7.6][KVM][PANIC] ltp/lite proc01 - Unable to handle kernel paging request at virtual address ffff7fe000200018 (BZ#1623193)
* Kernel lock up due to read/write lock (BZ#1636261)
* [RHEL-ALT] Fix potential Spectre v1 in tty code (BZ#1639679)
* [Huawei AArch64 7.6 Bug] HNS3: Vlan on HNS3 NIC cannot communicate (BZ#1639713)
* [RHEL7.6-ALT][AWS] backport "nvme: update timeout module parameter type" (BZ#1654958)
* ignore STABLE\_FLAG of rmap\_item->address in rmap\_walk\_ksm (BZ#1663565)
* RHEL-Alt-7.6 - kernel: zcrypt: fix specification exception on z196 at ap probe (BZ#1670018)
* [Huawei AArch64 7.6 Bug] Flock over NFSv3 failed (BZ#1670650)
* [Huawei AArch64 7.6/7.6-z Bug] HNS3: if a single transmit packet(skb) has more than 8 frags, will cause the NIC to be unavailable (BZ#1677643)
* krb5{,i,p} doesn't work with older enctypes on aarch64 (BZ#1678922)

Users of kernel are advised to upgrade to these updated packages, which fix these bugs.

## Solution

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

The system must be rebooted for this update to take effect.

## Affected Products

* Red Hat Enterprise Linux for ARM 64 7 aarch64
* Red Hat Enterprise Linux for Power 9 7 ppc64le
* Red Hat Enterprise Linux for IBM System z (Structure A) 7 s390x

## Fixes

* [BZ - 1597747](https://bugzilla.redhat.com/show_bug.cgi?id=1597747)
  - CVE-2018-13053 kernel: Integer overflow in the alarm\_timer\_nsleep function
* [BZ - 1597771](https://bugzilla.redhat.com/show_bug.cgi?id=1597771)
  - CVE-2018-13094 kernel: NULL pointer dereference in xfs\_da\_shrink\_inode function
* [BZ - 1611005](https://bugzilla.redhat.com/show_bug.cgi?id=1611005)
  - CVE-2018-14734 kernel: use-after-free in ucma\_leave\_multicast in drivers/infiniband/core/ucma.c
* [BZ - 1636349](https://bugzilla.redhat.com/show_bug.cgi?id=1636349)
  - CVE-2018-17972 kernel: Unprivileged users able to inspect kernel stacks of arbitrary tasks
* [BZ - 1640598](https://bugzilla.redhat.com/show_bug.cgi?id=1640598)
  - CVE-2018-18386 kernel: Type confusion in drivers/tty/n\_tty.c allows for a denial of service
* [BZ - 1641548](https://bugzilla.redhat.com/show_bug.cgi?id=1641548)
  - CVE-2018-18397 kernel: userfaultfd bypasses tmpfs file permissions
* [BZ - 1645121](https://bugzilla.redhat.com/show_bug.cgi?id=1645121)
  - CVE-2018-18281 kernel: TLB flush happens too late on mremap
* [BZ - 1686136](https://bugzilla.redhat.com/show_bug.cgi?id=1686136)
  - CVE-2019-9213 kernel: lack of check for mmap minimum address in expand\_downwards in mm/mmap.c leads to NULL pointer dereferences exploit on non-SMAP platforms

## CVEs

* [CVE-2018-13053](https://www.redhat.com/security/data/cve/CVE-2018-13053.html)
* [CVE-2018-13094](https://www.redhat.com/security/data/cve/CVE-2018-13094.html)
* [CVE-2018-14734](https://www.redhat.com/security/data/cve/CVE-2018-14734.html)
* [CVE-2018-17972](https://www.redhat.com/security/data/cve/CVE-2018-17972.html)
* [CVE-2018-18281](https://www.redhat.com/security/data/cve/CVE-2018-18281.html)
* [CVE-2018-18386](https://www.redhat.com/security/data/cve/CVE-2018-18386.html)
* [CVE-2018-18397](https://www.redhat.com/security/data/cve/CVE-2018-18397.html)
* [CVE-2019-9213](https://www.redhat.com/security/data/cve/CVE-2019-9213.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux for ARM 64 7

| SRPM | |
| --- | --- |
| kernel-alt-4.14.0-115.7.1.el7a.src.rpm | SHA-256: 9ee05707c5c7f3d4b7119e6f62f930e2de88f0f575102a0ba29ce733a894fc17 |
| aarch64 | |
| kernel-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: a8111d98c6d63cf3109b2fdcde1fa99ebd8d7f31618f8789cc42741de07e0adc |
| kernel-abi-whitelists-4.14.0-115.7.1.el7a.noarch.rpm | SHA-256: 9ebecc38ed3f7581de9671eda271bc978f246e82d366f41cdef9fb1aadf1736a |
| kernel-debug-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 0290dab8625f8eb92338c4b6e7ea826635e0efd7f3012d3be240ecf241b7fad9 |
| kernel-debug-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 1eb10f4a633b62e59cd469a11e9a39c7714817ff0c1c5403106dc8db2af77fc1 |
| kernel-debug-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 1eb10f4a633b62e59cd469a11e9a39c7714817ff0c1c5403106dc8db2af77fc1 |
| kernel-debug-devel-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: a84ab2c4c0da16d92dd281706394b57cf652c4d4b1196d229858740de4331a49 |
| kernel-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: e7a10c40144bf1ecf6adebfa5906911a169a630422ec774ae9d722ec6e793abc |
| kernel-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: e7a10c40144bf1ecf6adebfa5906911a169a630422ec774ae9d722ec6e793abc |
| kernel-debuginfo-common-aarch64-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 5090b203415bbb5c63a2177aa769140b70cf0ac67599ad73278ef04caa935879 |
| kernel-debuginfo-common-aarch64-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 5090b203415bbb5c63a2177aa769140b70cf0ac67599ad73278ef04caa935879 |
| kernel-devel-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 5ba6065ba522ac07071d0137b3c99e399f4d5bf29b96590518b76cf7518ccb2c |
| kernel-doc-4.14.0-115.7.1.el7a.noarch.rpm | SHA-256: 79085877f0fae314d7aacf23bc17cb0dc2adf65453eefa9521ae8fc837060362 |
| kernel-doc-4.14.0-115.7.1.el7a.noarch.rpm | SHA-256: 79085877f0fae314d7aacf23bc17cb0dc2adf65453eefa9521ae8fc837060362 |
| kernel-headers-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 05791163a9f84cbd59bd92d37cb580d329675a10a6856bb83392d708171cd916 |
| kernel-tools-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: e3595c8ddfe579c83d5c55e42132b2f2db88bff026c871f2c6297676d89a5f4d |
| kernel-tools-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: ec8ba3681ef01546cdc43e1d347c34c2efb66fc0cc3aa2299b1f5e8eae61c1c6 |
| kernel-tools-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: ec8ba3681ef01546cdc43e1d347c34c2efb66fc0cc3aa2299b1f5e8eae61c1c6 |
| kernel-tools-libs-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 24fccb5538ffb3032747f046c5def7088d6545db50aec3e1d65afcd229f8759a |
| kernel-tools-libs-devel-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: d928829dbeae7e12735c91c96d98107e026d40c81a51c158a9729764e5948d86 |
| perf-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 8b8c3aa1ba0e82c221e428334bbe4fe270c4e8aaa85fb19eda52c8596926b903 |
| perf-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 0a02ef2f422c7345e3a5a01cbe411503bdbf666f14e90607b51ccafc8c10932b |
| perf-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: 0a02ef2f422c7345e3a5a01cbe411503bdbf666f14e90607b51ccafc8c10932b |
| python-perf-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: b37dfa31fc8d9efc9fedecd686038053f4110be3cd17393ace834efae6b582e2 |
| python-perf-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: b8203a947b672b03c274b362f7c8223524a6cea0589c55eecd6f06a04623b3b6 |
| python-perf-debuginfo-4.14.0-115.7.1.el7a.aarch64.rpm | SHA-256: b8203a947b672b03c274b362f7c8223524a6cea0589c55eecd6f06a04623b3b6 |

## Red Hat Enterprise Linux for Power 9 7

| SRPM | |
| --- | --- |
| kernel-alt-4.14.0-115.7.1.el7a.src.rpm | SHA-256: 9ee05707c5c7f3d4b7119e6f62f930e2de88f0f575102a0ba29ce733a894fc17 |
| ppc64le | |
| kernel-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: b06f80c16766a5fa41370880579c24f8b5f5cbb6929df59cef7a9031ee624981 |
| kernel-abi-whitelists-4.14.0-115.7.1.el7a.noarch.rpm | SHA-256: 9ebecc38ed3f7581de9671eda271bc978f246e82d366f41cdef9fb1aadf1736a |
| kernel-bootwrapper-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: ff921f894e0143449ff139aff58c2ed55b70e15eeafa271cf91f8e08610a9236 |
| kernel-debug-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 832acbde7cd37a30f357da23ed5ad8f577c88cfa4b1c4fba33610331f606e270 |
| kernel-debug-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 6425125e48916e763b3b84126a594eafe28a9158770d6acc10dce8510ef095e9 |
| kernel-debug-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 6425125e48916e763b3b84126a594eafe28a9158770d6acc10dce8510ef095e9 |
| kernel-debug-devel-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: ac4c0c11fec473e91ab3e668db811f26a65da482acf4d7d05a279df171b0110e |
| kernel-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 15a6053c42cb39d4f28e63cdeabac43d2896fb3ba9d4bf766804e6a77b99b575 |
| kernel-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 15a6053c42cb39d4f28e63cdeabac43d2896fb3ba9d4bf766804e6a77b99b575 |
| kernel-debuginfo-common-ppc64le-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 7b80356bdb2708590d5bc2f91fc19f6db8a621b638879690bfd3881f5f82bb45 |
| kernel-debuginfo-common-ppc64le-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 7b80356bdb2708590d5bc2f91fc19f6db8a621b638879690bfd3881f5f82bb45 |
| kernel-devel-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: eb52754dcfc024b1fabc408eeaf392ba3b0611848b0661dcf48403f7c07f8645 |
| kernel-doc-4.14.0-115.7.1.el7a.noarch.rpm | SHA-256: 79085877f0fae314d7aacf23bc17cb0dc2adf65453eefa9521ae8fc837060362 |
| kernel-headers-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: dc11d74acd151b3cdb1b88027f09ba6c8c730f446d107202639ae31f2eba7f54 |
| kernel-tools-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 1978cacebcc5fab2c1b27f77966e261521cfd8fbce926b6e00c5b844f461fe7d |
| kernel-tools-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: ce4e8e5deaa8aebee69c068109200f6dbd87ff38c4fa937ac948a5eed48648c9 |
| kernel-tools-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: ce4e8e5deaa8aebee69c068109200f6dbd87ff38c4fa937ac948a5eed48648c9 |
| kernel-tools-libs-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 2e6706f38a0ead5cd35e87e5a229807e7c8c23e957111a6811aec315338c758a |
| kernel-tools-libs-devel-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: ae8f1819bf7d112d300cc52730a94b3b223dba3598dc3a9c965b78ebe2b85276 |
| perf-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 51948c3e33fae5e6e0b0ba4467141c0518932c1572e0f6bc22b06ef33d8d6b4b |
| perf-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: df78990132388eac5d47024c4102737443554a0d51de49a2008d5949dbed55c9 |
| perf-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: df78990132388eac5d47024c4102737443554a0d51de49a2008d5949dbed55c9 |
| python-perf-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 09062115caf3d7e01a7bd0e0be1f8e5273ab5715b81d710d302d75f1ef9e64e1 |
| python-perf-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 48aff0b861bb654620ae6b612a3966cc92d8a2cda9c56c69b1a61768d9ee67dd |
| python-perf-debuginfo-4.14.0-115.7.1.el7a.ppc64le.rpm | SHA-256: 48aff0b861bb654620ae6b612a3966cc92d8a2cda9c56c69b1a61768d9ee67dd |

## Red Hat Enterprise Linux for IBM System z (Structure A) 7

| SRPM | |
| --- | --- |
| kernel-alt-4.14.0-115.7.1.el7a.src.rpm | SHA-256: 9ee05707c5c7f3d4b7119e6f62f930e2de88f0f575102a0ba29ce733a894fc17 |
| s390x | |
| kernel-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 8ab89b8b8abc8d385553d018fdd27bc828209c56b4d607f990c100846b063e33 |
| kernel-abi-whitelists-4.14.0-115.7.1.el7a.noarch.rpm | SHA-256: 9ebecc38ed3f7581de9671eda271bc978f246e82d366f41cdef9fb1aadf1736a |
| kernel-debug-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 22787130d1794400317e43a8def3d6d88653daa69ce60597f22c3427275e7c4e |
| kernel-debug-debuginfo-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 11ab81d95bc1cbcf424324157eba8cc28231114642629bdb9a2e8f8072e1e21a |
| kernel-debug-devel-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 73ce3bdd6d69250839a3dc92f5237aa3e78f732c16e2627b48289c9ed23f6f0c |
| kernel-debuginfo-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 82e0d6e074783b2ec5479199c8e71e72a1a8080ebc68b85b18f2187fcd6324b3 |
| kernel-debuginfo-common-s390x-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 656c4c9404d1b7af1e63befc7736157b7c0656b29e23c0e30dbf873fac5566ce |
| kernel-devel-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: b4a781d3a83d0026d6cdf23db1cf7a57d10374fa30e63a1dca2afd4cd6e55cda |
| kernel-doc-4.14.0-115.7.1.el7a.noarch.rpm | SHA-256: 79085877f0fae314d7aacf23bc17cb0dc2adf65453eefa9521ae8fc837060362 |
| kernel-headers-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 3d5edd7401a31c4da7abfb7f15dcd569f3b588e2e31e366d84f40e643fddc684 |
| kernel-kdump-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: df6b6700f9f0def751e95111fcafaa1d13e1e4a40296f566b07793d9a315deb0 |
| kernel-kdump-debuginfo-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: e937b19c60177b433b5f4a6b74a94fc941baa4b5fec8b12d69d5812a63ff5a76 |
| kernel-kdump-devel-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: b5cd64f9fd4365ce80e221900230c090cb6854f428a308bacb67505b5c29f8b0 |
| perf-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: f2b16bb2898e60f3f14e09dfaac034a98209d4e7853406786fa9ed7dd6b89af8 |
| perf-debuginfo-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: acc899729ce53d0239758578150a9f7308dc62f5a30015f756fa67b9bb8ec68e |
| python-perf-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 6abb0f91edec815377d8137dfcf6a2b89ea17a335991fd324fcb1dff0fd3874e |
| python-perf-debuginfo-4.14.0-115.7.1.el7a.s390x.rpm | SHA-256: 8c780891ca7738754db79df12fdd7c479f824780b8f7655b71e61ac2f066bea6 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_b848375d_20250126_024351.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from idp-portal.suse.com_6b95d262_20250126_024352.html ===

## UCS

# Welcome to Univention Corporate Server

## JavaScript required

A browser with JavaScript enabled is required in order to use this service.

When using Internet Explorer, please check your security settings and add this address to your trusted sites.



=== Content from github.com_1ef31619_20250124_180453.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F966031f340185eddd05affcf72b740549f056348)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F966031f340185eddd05affcf72b740549f056348)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/966031f340185eddd05affcf72b740549f056348)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

n\_tty: fix EXTPROC vs ICANON interaction with TIOCINQ (aka FIONREAD)

[Browse files](/torvalds/linux/tree/966031f340185eddd05affcf72b740549f056348)
Browse the repository at this point in the history

```
We added support for EXTPROC back in 2010 in commit [26df6d1](https://github.com/torvalds/linux/commit/26df6d13406d1a53b0bda08bd712f1924affd7cd) ("tty:
Add EXTPROC support for LINEMODE") and the intent was to allow it to
override some (all?) ICANON behavior.  Quoting from that original commit
message:

         There is a new bit in the termios local flag word, EXTPROC.
         When this bit is set, several aspects of the terminal driver
         are disabled.  Input line editing, character echo, and mapping
         of signals are all disabled.  This allows the telnetd to turn
         off these functions when in linemode, but still keep track of
         what state the user wants the terminal to be in.

but the problem turns out that "several aspects of the terminal driver
are disabled" is a bit ambiguous, and you can really confuse the n_tty
layer by setting EXTPROC and then causing some of the ICANON invariants
to no longer be maintained.

This fixes at least one such case (TIOCINQ) becoming unhappy because of
the confusion over whether ICANON really means ICANON when EXTPROC is set.

This basically makes TIOCINQ match the case of read: if EXTPROC is set,
we ignore ICANON.  Also, make sure to reset the ICANON state ie EXTPROC
changes, not just if ICANON changes.

Fixes: [26df6d1](https://github.com/torvalds/linux/commit/26df6d13406d1a53b0bda08bd712f1924affd7cd) ("tty: Add EXTPROC support for LINEMODE")
Reported-by: Tetsuo Handa <penguin-kernel@i-love.sakura.ne.jp>
Reported-by: syzkaller <syzkaller@googlegroups.com>
Cc: Jiri Slaby <jslaby@suse.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
```

* Loading branch information

[![@torvalds](https://avatars.githubusercontent.com/u/1024025?s=40&v=4)](/torvalds) [![@gregkh](https://avatars.githubusercontent.com/u/14953?s=40&v=4)](/gregkh)

[torvalds](/torvalds/linux/commits?author=torvalds "View all commits by torvalds")
authored and
[gregkh](/torvalds/linux/commits?author=gregkh "View all commits by gregkh")
committed
Dec 21, 2017

1 parent
[50c4c4e](/torvalds/linux/commit/50c4c4e268a2d7a3e58ebb698ac74da0de40ae36)

commit 966031f

Showing
**1 changed file**
with
**2 additions**
and
**2 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

4 changes: 2 additions & 2 deletions

4
[drivers/tty/n\_tty.c](#diff-b8c8d3c5770869f743e155faac7cccc97082918c3e092ffdf592efa796725c79 "drivers/tty/n_tty.c")

Show comments

[View file](/torvalds/linux/blob/966031f340185eddd05affcf72b740549f056348/drivers/tty/n_tty.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1762,7 +1762,7 @@ static void n\_tty\_set\_termios(struct tty\_struct \*tty, struct ktermios \*old) |
|  |  | { |
|  |  | struct n\_tty\_data \*ldata = tty->disc\_data; |
|  |  |  |
|  |  | if (!old || (old->c\_lflag ^ tty->termios.c\_lflag) & ICANON) { |
|  |  | if (!old || (old->c\_lflag ^ tty->termios.c\_lflag) & (ICANON | EXTPROC)) { |
|  |  | bitmap\_zero(ldata->read\_flags, N\_TTY\_BUF\_SIZE); |
|  |  | ldata->line\_start = ldata->read\_tail; |
|  |  | if (!L\_ICANON(tty) || !read\_cnt(ldata)) { |
| Expand Down  Expand Up | | @@ -2425,7 +2425,7 @@ static int n\_tty\_ioctl(struct tty\_struct \*tty, struct file \*file, |
|  |  | return put\_user(tty\_chars\_in\_buffer(tty), (int \_\_user \*) arg); |
|  |  | case TIOCINQ: |
|  |  | down\_write(&tty->termios\_rwsem); |
|  |  | if (L\_ICANON(tty)) |
|  |  | if (L\_ICANON(tty) && !L\_EXTPROC(tty)) |
|  |  | retval = inq\_canon(ldata); |
|  |  | else |
|  |  | retval = read\_cnt(ldata); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `966031f`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F966031f340185eddd05affcf72b740549f056348) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from cdn.kernel.org_9d942fff_20250124_180452.html ===
commit 0d59679df5b53755c00ea0292df696f97bfc950d
Author: Greg Kroah-Hartman
Date: Tue Jan 2 20:31:17 2018 +0100
Linux 4.14.11
commit 3ade66602bb7ea348ed8cbafcdd56eb1826c2177
Author: Johan Hovold
Date: Fri Nov 3 15:18:05 2017 +0100
tty: fix tty\_ldisc\_receive\_buf() documentation
commit e7e51dcf3b8a5f65c5653a054ad57eb2492a90d0 upstream.
The tty\_ldisc\_receive\_buf() helper returns the number of bytes
processed so drop the bogus "not" from the kernel doc comment.
Fixes: 8d082cd300ab ("tty: Unify receive\_buf() code paths")
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit aaa5a91ff744f91fb1d1c91853aa0c8f126be563
Author: Linus Torvalds
Date: Wed Dec 20 17:57:06 2017 -0800
n\_tty: fix EXTPROC vs ICANON interaction with TIOCINQ (aka FIONREAD)
commit 966031f340185eddd05affcf72b740549f056348 upstream.
We added support for EXTPROC back in 2010 in commit 26df6d13406d ("tty:
Add EXTPROC support for LINEMODE") and the intent was to allow it to
override some (all?) ICANON behavior. Quoting from that original commit
message:
There is a new bit in the termios local flag word, EXTPROC.
When this bit is set, several aspects of the terminal driver
are disabled. Input line editing, character echo, and mapping
of signals are all disabled. This allows the telnetd to turn
off these functions when in linemode, but still keep track of
what state the user wants the terminal to be in.
but the problem turns out that "several aspects of the terminal driver
are disabled" is a bit ambiguous, and you can really confuse the n\_tty
layer by setting EXTPROC and then causing some of the ICANON invariants
to no longer be maintained.
This fixes at least one such case (TIOCINQ) becoming unhappy because of
the confusion over whether ICANON really means ICANON when EXTPROC is set.
This basically makes TIOCINQ match the case of read: if EXTPROC is set,
we ignore ICANON. Also, make sure to reset the ICANON state ie EXTPROC
changes, not just if ICANON changes.
Fixes: 26df6d13406d ("tty: Add EXTPROC support for LINEMODE")
Reported-by: Tetsuo Handa
Reported-by: syzkaller
Cc: Jiri Slaby
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 57849de13c7da3385611a1b9aca5c6040ef7dfe2
Author: Thomas Gleixner
Date: Sun Dec 31 16:52:15 2017 +0100
x86/ldt: Make LDT pgtable free conditional
commit 7f414195b0c3612acd12b4611a5fe75995cf10c7 upstream.
Andy prefers to be paranoid about the pagetable free in the error path of
write\_ldt(). Make it conditional and warn whenever the installment of a
secondary LDT fails.
Requested-by: Andy Lutomirski
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 3e133155f22d59b0085ef63cbcbcfbd96c4d0b70
Author: Thomas Gleixner
Date: Sun Dec 31 11:24:34 2017 +0100
x86/ldt: Plug memory leak in error path
commit a62d69857aab4caa43049e72fe0ed5c4a60518dd upstream.
The error path in write\_ldt() tries to free 'old\_ldt' instead of the newly
allocated 'new\_ldt', resulting in a memory leak. It also misses to clean up a
half populated LDT pagetable, which is not a leak as it gets cleaned up
when the process exits.
Free both the potentially half populated LDT pagetable and the newly
allocated LDT struct. This can be done unconditionally because once an LDT
is mapped subsequent maps will succeed, because the PTE page is already
populated and the two LDTs fit into that single page.
Reported-by: Mathieu Desnoyers
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: Dominik Brodowski
Cc: Linus Torvalds
Cc: Linus Torvalds
Cc: Peter Zijlstra
Fixes: f55f0501cbf6 ("x86/pti: Put the LDT in its own PGD if PTI is on")
Link: http://lkml.kernel.org/r/alpine.DEB.2.20.1712311121340.1899@nanos
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit cf6c3f7f4b1305596e261fb90201b737ad79e0d6
Author: Andy Lutomirski
Date: Tue Dec 12 07:56:36 2017 -0800
x86/espfix/64: Fix espfix double-fault handling on 5-level systems
commit c739f930be1dd5fd949030e3475a884fe06dae9b upstream.
Using PGDIR\_SHIFT to identify espfix64 addresses on 5-level systems
was wrong, and it resulted in panics due to unhandled double faults.
Use P4D\_SHIFT instead, which is correct on 4-level and 5-level
machines.
This fixes a panic when running x86 selftests on 5-level machines.
Signed-off-by: Andy Lutomirski
Acked-by: Kirill A. Shutemov
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Kees Cook
Cc: Kirill A. Shutemov
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Fixes: 1d33b219563f ("x86/espfix: Add support for 5-level paging")
Link: http://lkml.kernel.org/r/24c898b4f44fdf8c22d93703850fb384ef87cfdc.1513035461.git.luto@kernel.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 530f5fa1600b6af56b138f9fb87b7f5148c979a0
Author: Linus Torvalds
Date: Wed Dec 27 11:48:50 2017 -0800
x86-32: Fix kexec with stack canary (CONFIG\_CC\_STACKPROTECTOR)
commit ac461122c88a10b7d775de2f56467f097c9e627a upstream.
Commit e802a51ede91 ("x86/idt: Consolidate IDT invalidation") cleaned up
and unified the IDT invalidation that existed in a couple of places. It
changed no actual real code.
Despite not changing any actual real code, it \_did\_ change code generation:
by implementing the common idt\_invalidate() function in
archx86/kernel/idt.c, it made the use of the function in
arch/x86/kernel/machine\_kexec\_32.c be a real function call rather than an
(accidental) inlining of the function.
That, in turn, exposed two issues:
- in load\_segments(), we had incorrectly reset all the segment
registers, which then made the stack canary load (which gcc does
using offset of %gs) cause a trap. Instead of %gs pointing to the
stack canary, it will be the normal zero-based kernel segment, and
the stack canary load will take a page fault at address 0x14.
- to make this even harder to debug, we had invalidated the GDT just
before calling idt\_invalidate(), which meant that the fault happened
with an invalid GDT, which in turn causes a triple fault and
immediate reboot.
Fix this by
(a) not reloading the special segments in load\_segments(). We currently
don't do any percpu accesses (which would require %fs on x86-32) in
this area, but there's no reason to think that we might not want to
do them, and like %gs, it's pointless to break it.
(b) doing idt\_invalidate() before invalidating the GDT, to keep things
at least \_slightly\_ more debuggable for a bit longer. Without a
IDT, traps will not work. Without a GDT, traps also will not work,
but neither will any segment loads etc. So in a very real sense,
the GDT is even more core than the IDT.
Fixes: e802a51ede91 ("x86/idt: Consolidate IDT invalidation")
Reported-and-tested-by: Alexandru Chirvasitu
Signed-off-by: Linus Torvalds
Signed-off-by: Thomas Gleixner
Cc: Denys Vlasenko
Cc: Peter Zijlstra
Cc: Brian Gerst
Cc: Steven Rostedt
Cc: Borislav Petkov
Cc: Andy Lutomirski
Cc: Josh Poimboeuf
Link: https://lkml.kernel.org/r/alpine.LFD.2.21.1712271143180.8572@i7.lan
Signed-off-by: Greg Kroah-Hartman
commit 082b7521a541a66f1fed68b1f76de6a3b910495e
Author: Thomas Gleixner
Date: Sat Dec 30 22:13:54 2017 +0100
x86/mm: Remove preempt\_disable/enable() from \_\_native\_flush\_tlb()
commit decab0888e6e14e11d53cefa85f8b3d3b45ce73c upstream.
The preempt\_disable/enable() pair in \_\_native\_flush\_tlb() was added in
commit:
5cf0791da5c1 ("x86/mm: Disable preemption during CR3 read+write")
... to protect the UP variant of flush\_tlb\_mm\_range().
That preempt\_disable/enable() pair should have been added to the UP variant
of flush\_tlb\_mm\_range() instead.
The UP variant was removed with commit:
ce4a4e565f52 ("x86/mm: Remove the UP asm/tlbflush.h code, always use the (formerly) SMP code")
... but the preempt\_disable/enable() pair stayed around.
The latest change to \_\_native\_flush\_tlb() in commit:
6fd166aae78c ("x86/mm: Use/Fix PCID to optimize user/kernel switches")
... added an access to a per CPU variable outside the preempt disabled
regions, which makes no sense at all. \_\_native\_flush\_tlb() must always
be called with at least preemption disabled.
Remove the preempt\_disable/enable() pair and add a WARN\_ON\_ONCE() to catch
bad callers independent of the smp\_processor\_id() debugging.
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: Dominik Brodowski
Cc: Linus Torvalds
Cc: Linus Torvalds
Cc: Peter Zijlstra
Link: http://lkml.kernel.org/r/20171230211829.679325424@linutronix.de
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit b5bef29785ff990a90238d4f59ccbeb656134eeb
Author: Thomas Gleixner
Date: Sat Dec 30 22:13:53 2017 +0100
x86/smpboot: Remove stale TLB flush invocations
commit 322f8b8b340c824aef891342b0f5795d15e11562 upstream.
smpboot\_setup\_warm\_reset\_vector() and smpboot\_restore\_warm\_reset\_vector()
invoke local\_flush\_tlb() for no obvious reason.
Digging in history revealed that the original code in the 2.1 era added
those because the code manipulated a swapper\_pg\_dir pagetable entry. The
pagetable manipulation was removed long ago in the 2.3 timeframe, but the
TLB flush invocations stayed around forever.
Remove them along with the pointless pr\_debug()s which come from the same 2.1
change.
Reported-by: Dominik Brodowski
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: Linus Torvalds
Cc: Linus Torvalds
Cc: Peter Zijlstra
Link: http://lkml.kernel.org/r/20171230211829.586548655@linutronix.de
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit e798502cfb471b95153de2f75a89501c45ec997a
Author: Thomas Gleixner
Date: Fri Dec 22 15:51:13 2017 +0100
nohz: Prevent a timer interrupt storm in tick\_nohz\_stop\_sched\_tick()
commit 5d62c183f9e9df1deeea0906d099a94e8a43047a upstream.
The conditions in irq\_exit() to invoke tick\_nohz\_irq\_exit() which
subsequently invokes tick\_nohz\_stop\_sched\_tick() are:
if ((idle\_cpu(cpu) && !need\_resched()) || tick\_nohz\_full\_cpu(cpu))
If need\_resched() is not set, but a timer softirq is pending then this is
an indication that the softirq code punted and delegated the execution to
softirqd. need\_resched() is not true because the current interrupted task
takes precedence over softirqd.
Invoking tick\_nohz\_irq\_exit() in this case can cause an endless loop of
timer interrupts because the timer wheel contains an expired timer, but
softirqs are not yet executed. So it returns an immediate expiry request,
which causes the timer to fire immediately again. Lather, rinse and
repeat....
Prevent that by adding a check for a pending timer soft interrupt to the
conditions in tick\_nohz\_stop\_sched\_tick() which avoid calling
get\_next\_timer\_interrupt(). That keeps the tick sched timer on the tick and
prevents a repetitive programming of an already expired timer.
Reported-by: Sebastian Siewior
Signed-off-by: Thomas Gleixner
Acked-by: Frederic Weisbecker
Cc: Peter Zijlstra
Cc: Paul McKenney
Cc: Anna-Maria Gleixner
Cc: Sebastian Siewior
Link: https://lkml.kernel.org/r/alpine.DEB.2.20.1712272156050.2431@nanos
Signed-off-by: Greg Kroah-Hartman
commit 7a3ce39c2bcac61abcb4650b33945335a02ef6cd
Author: Sushmita Susheelendra
Date: Fri Dec 15 13:59:13 2017 -0700
staging: android: ion: Fix dma direction for dma\_sync\_sg\_for\_cpu/device
commit d6b246bb7a29703f53aa4c050b8b3205d749caee upstream.
Use the direction argument passed into begin\_cpu\_access
and end\_cpu\_access when calling the dma\_sync\_sg\_for\_cpu/device.
The actual cache primitive called depends on the direction
passed in.
Signed-off-by: Sushmita Susheelendra
Acked-by: Laura Abbott
Signed-off-by: Greg Kroah-Hartman
commit 2695c0f1f71e6022a6916584a4d19de8968e97c3
Author: Sudeep Holla
Date: Fri Nov 17 11:56:41 2017 +0000
drivers: base: cacheinfo: fix cache type for non-architected system cache
commit f57ab9a01a36ef3454333251cc57e3a9948b17bf upstream.
Commit dfea747d2aba ("drivers: base: cacheinfo: support DT overrides for
cache properties") doesn't initialise the cache type if it's present
only in DT and the architecture is not aware of it. They are unified
system level cache which are generally transparent.
This patch check if the cache type is set to NOCACHE but the DT node
indicates that it's unified cache and sets the cache type accordingly.
Fixes: dfea747d2aba ("drivers: base: cacheinfo: support DT overrides for cache properties")
Reported-and-tested-by: Tan Xiaojun
Cc: Greg Kroah-Hartman
Signed-off-by: Sudeep Holla
Signed-off-by: Greg Kroah-Hartman
commit f3f5fa872d09109edfd7c10c57865301fee396d4
Author: Johan Hovold
Date: Wed Nov 15 10:43:16 2017 +0100
phy: tegra: fix device-tree node lookups
commit 046046737bd35bed047460f080ea47e186be731e upstream.
Fix child-node lookups during probe, which ended up searching the whole
device tree depth-first starting at the parents rather than just
matching on their children.
To make things worse, some parent nodes could end up being being
prematurely freed (by tegra\_xusb\_pad\_register()) as
of\_find\_node\_by\_name() drops a reference to its first argument.
Fixes: 53d2a715c240 ("phy: Add Tegra XUSB pad controller support")
Cc: Thierry Reding
Signed-off-by: Johan Hovold
Signed-off-by: Kishon Vijay Abraham I
Signed-off-by: Greg Kroah-Hartman
commit d87f1bc7d15b89bd3bcf31020eb7f3b3cd6f84b5
Author: Todd Kjos
Date: Mon Nov 27 09:32:33 2017 -0800
binder: fix proc->files use-after-free
commit 7f3dc0088b98533f17128058fac73cd8b2752ef1 upstream.
proc->files cleanup is initiated by binder\_vma\_close. Therefore
a reference on the binder\_proc is not enough to prevent the
files\_struct from being released while the binder\_proc still has
a reference. This can lead to an attempt to dereference the
stale pointer obtained from proc->files prior to proc->files
cleanup. This has been seen once in task\_get\_unused\_fd\_flags()
when \_\_alloc\_fd() is called with a stale "files".
The fix is to protect proc->files with a mutex to prevent cleanup
while in use.
Signed-off-by: Todd Kjos
Signed-off-by: Greg Kroah-Hartman
commit 6fae6de72ad44e98b5ae58a662d110c58594aad9
Author: Thomas Gleixner
Date: Wed Dec 27 21:37:25 2017 +0100
timers: Reinitialize per cpu bases on hotplug
commit 26456f87aca7157c057de65c9414b37f1ab881d1 upstream.
The timer wheel bases are not (re)initialized on CPU hotplug. That leaves
them with a potentially stale clk and next\_expiry valuem, which can cause
trouble then the CPU is plugged.
Add a prepare callback which forwards the clock, sets next\_expiry to far in
the future and reset the control flags to a known state.
Set base->must\_forward\_clk so the first timer which is queued will try to
forward the clock to current jiffies.
Fixes: 500462a9de65 ("timers: Switch to a non-cascading wheel")
Reported-by: Paul E. McKenney
Signed-off-by: Thomas Gleixner
Cc: Peter Zijlstra
Cc: Frederic Weisbecker
Cc: Sebastian Siewior
Cc: Anna-Maria Gleixner
Link: https://lkml.kernel.org/r/alpine.DEB.2.20.1712272152200.2431@nanos
Signed-off-by: Greg Kroah-Hartman
commit 8f1aa64ab08621cc3d2b1600ab80da5d3128abb6
Author: Thomas Gleixner
Date: Fri Dec 22 15:51:14 2017 +0100
timers: Invoke timer\_start\_debug() where it makes sense
commit fd45bb77ad682be728d1002431d77b8c73342836 upstream.
The timer start debug function is called before the proper timer base is
set. As a consequence the trace data contains the stale CPU and flags
values.
Call the debug function after setting the new base and flags.
Fixes: 500462a9de65 ("timers: Switch to a non-cascading wheel")
Signed-off-by: Thomas Gleixner
Cc: Peter Zijlstra
Cc: Frederic Weisbecker
Cc: Sebastian Siewior
Cc: rt@linutronix.de
Cc: Paul McKenney
Cc: Anna-Maria Gleixner
Link: https://lkml.kernel.org/r/20171222145337.792907137@linutronix.de
Signed-off-by: Greg Kroah-Hartman
commit e4fb2e7e92ec638f0bd489c56b4b6d9004fd1f40
Author: Anna-Maria Gleixner
Date: Fri Dec 22 15:51:12 2017 +0100
timers: Use deferrable base independent of base::nohz\_active
commit ced6d5c11d3e7b342f1a80f908e6756ebd4b8ddd upstream.
During boot and before base::nohz\_active is set in the timer bases, deferrable
timers are enqueued into the standard timer base. This works correctly as
long as base::nohz\_active is false.
Once it base::nohz\_active is set and a timer which was enqueued before that
is accessed the lock selector code choses the lock of the deferred
base. This causes unlocked access to the standard base and in case the
timer is removed it does not clear the pending flag in the standard base
bitmap which causes get\_next\_timer\_interrupt() to return bogus values.
To prevent that, the deferrable timers must be enqueued in the deferrable
base, even when base::nohz\_active is not set. Those deferrable timers also
need to be expired unconditional.
Fixes: 500462a9de65 ("timers: Switch to a non-cascading wheel")
Signed-off-by: Anna-Maria Gleixner
Signed-off-by: Thomas Gleixner
Reviewed-by: Frederic Weisbecker
Cc: Peter Zijlstra
Cc: Sebastian Siewior
Cc: rt@linutronix.de
Cc: Paul McKenney
Link: https://lkml.kernel.org/r/20171222145337.633328378@linutronix.de
Signed-off-by: Greg Kroah-Hartman
commit f0f18aa8f70171f3e184b4185e673d7d4694300e
Author: Daniel Thompson
Date: Thu Dec 21 15:06:15 2017 +0200
usb: xhci: Add XHCI\_TRUST\_TX\_LENGTH for Renesas uPD720201
commit da99706689481717998d1d48edd389f339eea979 upstream.
When plugging in a USB webcam I see the following message:
xhci\_hcd 0000:04:00.0: WARN Successful completion on short TX: needs
XHCI\_TRUST\_TX\_LENGTH quirk?
handle\_tx\_event: 913 callbacks suppressed
All is quiet again with this patch (and I've done a fair but of soak
testing with the camera since).
Signed-off-by: Daniel Thompson
Acked-by: Ard Biesheuvel
Signed-off-by: Mathias Nyman
Signed-off-by: Greg Kroah-Hartman
commit c7c4e00a66081ad6161f009a0c329b9a36085766
Author: Mathias Nyman
Date: Tue Dec 19 11:14:42 2017 +0200
USB: Fix off by one in type-specific length check of BOS SSP capability
commit 07b9f12864d16c3a861aef4817eb1efccbc5d0e6 upstream.
USB 3.1 devices are not detected as 3.1 capable since 4.15-rc3 due to a
off by one in commit 81cf4a45360f ("USB: core: Add type-specific length
check of BOS descriptors")
It uses USB\_DT\_USB\_SSP\_CAP\_SIZE() to get SSP capability size which takes
the zero based SSAC as argument, not the actual count of sublink speed
attributes.
USB3 spec 9.6.2.5 says "The number of Sublink Speed Attributes = SSAC + 1."
The type-specific length check patch was added to stable and needs to be
fixed there as well
Fixes: 81cf4a45360f ("USB: core: Add type-specific length check of BOS descriptors")
CC: Masakazu Mokuno
Signed-off-by: Mathias Nyman
Signed-off-by: Greg Kroah-Hartman
commit e2f33e5983cb1609805e267a3d2ef46d78257b2c
Author: Oliver Neukum
Date: Tue Dec 12 16:11:30 2017 +0100
usb: add RESET\_RESUME for ELSA MicroLink 56K
commit b9096d9f15c142574ebebe8fbb137012bb9d99c2 upstream.
This modem needs this quirk to operate. It produces timeouts when
resumed without reset.
Signed-off-by: Oliver Neukum
Signed-off-by: Greg Kroah-Hartman
commit b9d02d3c5899b0abcb2df72252d7fc2f57028bfb
Author: Dmitry Fleytman Dmitry Fleytman
Date: Tue Dec 19 06:02:04 2017 +0200
usb: Add device quirk for Logitech HD Pro Webcam C925e
commit 7f038d256c723dd390d2fca942919573995f4cfd upstream.
Commit e0429362ab15
("usb: Add device quirk for Logitech HD Pro Webcams C920 and C930e")
introduced quirk to workaround an issue with some Logitech webcams.
There is one more model that has the same issue - C925e, so applying
the same quirk as well.
See aforementioned commit message for detailed explanation of the problem.
Signed-off-by: Dmitry Fleytman
Signed-off-by: Greg Kroah-Hartman
commit 57211f0cf174f8fdf3dffcff99fad25f376bb2b5
Author: SZ Lin (林上智)
Date: Tue Dec 19 17:40:32 2017 +0800
USB: serial: option: adding support for YUGA CLM920-NC5
commit 3920bb713038810f25770e7545b79f204685c8f2 upstream.
This patch adds support for YUGA CLM920-NC5 PID 0x9625 USB modem to option
driver.
Interface layout:
0: QCDM/DIAG
1: ADB
2: MODEM
3: AT
4: RMNET
Signed-off-by: Taiyi Wu
Signed-off-by: SZ Lin (林上智)
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 9fa3c3b5598eec2040fa466941a59bfc15f03f17
Author: Daniele Palmas
Date: Thu Dec 14 16:54:45 2017 +0100
USB: serial: option: add support for Telit ME910 PID 0x1101
commit 08933099e6404f588f81c2050bfec7313e06eeaf upstream.
This patch adds support for PID 0x1101 of Telit ME910.
Signed-off-by: Daniele Palmas
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit eb6cc0af22a3b0c982e3a61de63736b2c667a94e
Author: Reinhard Speyerer
Date: Fri Dec 15 00:39:27 2017 +0100
USB: serial: qcserial: add Sierra Wireless EM7565
commit 92a18a657fb2e2ffbfa0659af32cc18fd2346516 upstream.
Sierra Wireless EM7565 devices use the QCSERIAL\_SWI layout for their
serial ports
T: Bus=01 Lev=03 Prnt=29 Port=01 Cnt=02 Dev#= 31 Spd=480 MxCh= 0
D: Ver= 2.00 Cls=00(>ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs= 1
P: Vendor=1199 ProdID=9091 Rev= 0.06
S: Manufacturer=Sierra Wireless, Incorporated
S: Product=Sierra Wireless EM7565 Qualcomm Snapdragon X16 LTE-A
S: SerialNumber=xxxxxxxx
C:\* #Ifs= 4 Cfg#= 1 Atr=a0 MxPwr=500mA
I:\* If#= 0 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=qcserial
E: Ad=81(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E: Ad=01(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:\* If#= 2 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=00 Prot=00 Driver=qcserial
E: Ad=83(I) Atr=03(Int.) MxPS= 10 Ivl=32ms
E: Ad=82(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E: Ad=02(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:\* If#= 3 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=00 Prot=00 Driver=qcserial
E: Ad=85(I) Atr=03(Int.) MxPS= 10 Ivl=32ms
E: Ad=84(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E: Ad=03(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:\* If#= 8 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=ff Prot=ff Driver=qmi\_wwan
E: Ad=86(I) Atr=03(Int.) MxPS= 8 Ivl=32ms
E: Ad=8e(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E: Ad=0f(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
but need sendsetup = true for the NMEA port to make it work properly.
Simplify the patch compared to v1 as suggested by Bjørn Mork by taking
advantage of the fact that existing devices work with sendsetup = true
too.
Use sendsetup = true for the NMEA interface of QCSERIAL\_SWI and add
DEVICE\_SWI entries for the EM7565 PID 0x9091 and the EM7565 QDL PID
0x9090.
Tests with several MC73xx/MC74xx/MC77xx devices have been performed in
order to verify backward compatibility.
Signed-off-by: Reinhard Speyerer
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit ad61ff29f1049448fa389ba9ad464e49bdcdd61c
Author: Max Schulze
Date: Wed Dec 20 20:47:44 2017 +0100
USB: serial: ftdi\_sio: add id for Airbus DS P8GR
commit c6a36ad383559a60a249aa6016cebf3cb8b6c485 upstream.
Add AIRBUS\_DS\_P8GR device IDs to ftdi\_sio driver.
Signed-off-by: Max Schulze
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 1fcd9859a4b3f1df7316ff01a9993695ab929727
Author: Johan Hovold
Date: Mon Nov 13 11:12:58 2017 +0100
USB: chipidea: msm: fix ulpi-node lookup
commit 964728f9f407eca0b417fdf8e784b7a76979490c upstream.
Fix child-node lookup during probe, which ended up searching the whole
device tree depth-first starting at the parent rather than just matching
on its children.
Note that the original premature free of the parent node has already
been fixed separately, but that fix was apparently never backported to
stable.
Fixes: 47654a162081 ("usb: chipidea: msm: Restore wrapper settings after reset")
Fixes: b74c43156c0c ("usb: chipidea: msm: ci\_hdrc\_msm\_probe() missing of\_node\_get()")
Cc: Stephen Boyd
Cc: Frank Rowand
Signed-off-by: Johan Hovold
Signed-off-by: Peter Chen
Signed-off-by: Greg Kroah-Hartman
commit 2d6483bf78f859b827ea97a16b68cf64c3b56e67
Author: Shuah Khan
Date: Mon Dec 18 17:24:22 2017 -0700
usbip: vhci: stop printing kernel pointer addresses in messages
commit 8272d099d05f7ab2776cf56a2ab9f9443be18907 upstream.
Remove and/or change debug, info. and error messages to not print
kernel pointer addresses.
Signed-off-by: Shuah Khan
Signed-off-by: Greg Kroah-Hartman
commit ed4db9a7f8cb9e83605e63e7656a6efb56846ebb
Author: Shuah Khan
Date: Mon Dec 18 17:23:37 2017 -0700
usbip: stub: stop printing kernel pointer addresses in messages
commit 248a22044366f588d46754c54dfe29ffe4f8b4df upstream.
Remove and/or change debug, info. and error messages to not print
kernel pointer addresses.
Signed-off-by: Shuah Khan
Signed-off-by: Greg Kroah-Hartman
commit 6b8335e48ae7171206eda3ae572f0cd0c75ca8a1
Author: Shuah Khan
Date: Fri Dec 15 10:50:09 2017 -0700
usbip: prevent leaking socket pointer address in messages
commit 90120d15f4c397272aaf41077960a157fc4212bf upstream.
usbip driver is leaking socket pointer address in messages. Remove
the messages that aren't useful and print sockfd in the ones that
are useful for debugging.
Signed-off-by: Shuah Khan
Signed-off-by: Greg Kroah-Hartman
commit 2ee11dcfc9e1c894b058de64fb8b693cf697fbbe
Author: Juan Zea
Date: Fri Dec 15 10:21:20 2017 +0100
usbip: fix usbip bind writing random string after command in match\_busid
commit 544c4605acc5ae4afe7dd5914147947db182f2fb upstream.
usbip bind writes commands followed by random string when writing to
match\_busid attribute in sysfs, caused by using full variable size
instead of string length.
Signed-off-by: Juan Zea
Acked-by: Shuah Khan
Signed-off-by: Greg Kroah-Hartman
commit 38e8981d5490b2908136baea1f9e3b84a87aec01
Author: Jan Engelhardt
Date: Mon Dec 25 03:43:53 2017 +0100
sparc64: repair calling incorrect hweight function from stubs
[ Upstream commit 59585b4be9ae4dc6506551709bdcd6f5210b8a01 ]
Commit v4.12-rc4-1-g9289ea7f952b introduced a mistake that made the
64-bit hweight stub call the 16-bit hweight function.
Fixes: 9289ea7f952b ("sparc64: Use indirect calls in hamming weight stubs")
Signed-off-by: Jan Engelhardt
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b9edd6bf0ccb2939a7716b80d3e73a24ead9fe62
Author: Willem de Bruijn
Date: Thu Dec 28 12:38:13 2017 -0500
skbuff: in skb\_copy\_ubufs unclone before releasing zerocopy
skb\_copy\_ubufs must unclone before it is safe to modify its
skb\_shared\_info with skb\_zcopy\_clear.
Commit b90ddd568792 ("skbuff: skb\_copy\_ubufs must release uarg even
without user frags") ensures that all skbs release their zerocopy
state, even those without frags.
But I forgot an edge case where such an skb arrives that is cloned.
The stack does not build such packets. Vhost/tun skbs have their
frags orphaned before cloning. TCP skbs only attach zerocopy state
when a frag is added.
But if TCP packets can be trimmed or linearized, this might occur.
Tracing the code I found no instance so far (e.g., skb\_linearize
ends up calling skb\_zcopy\_clear if !skb->data\_len).
Still, it is non-obvious that no path exists. And it is fragile to
rely on this.
Fixes: b90ddd568792 ("skbuff: skb\_copy\_ubufs must release uarg even without user frags")
Signed-off-by: Willem de Bruijn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 49cd180d4a104159f240a9a896e5f13844227378
Author: Willem de Bruijn
Date: Wed Dec 20 17:37:50 2017 -0500
skbuff: skb\_copy\_ubufs must release uarg even without user frags
[ Upstream commit b90ddd568792bcb0054eaf0f61785c8f80c3bd1c ]
skb\_copy\_ubufs creates a private copy of frags[] to release its hold
on user frags, then calls uarg->callback to notify the owner.
Call uarg->callback even when no frags exist. This edge case can
happen when zerocopy\_sg\_from\_iter finds enough room in skb\_headlen
to copy all the data.
Fixes: 3ece782693c4 ("sock: skb\_copy\_ubufs support for compound pages")
Signed-off-by: Willem de Bruijn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 17155ea827b2fd81330a442ed56d0edafd9969e1
Author: Willem de Bruijn
Date: Wed Dec 20 17:37:49 2017 -0500
skbuff: orphan frags before zerocopy clone
[ Upstream commit 268b790679422a89e9ab0685d9f291edae780c98 ]
Call skb\_zerocopy\_clone after skb\_orphan\_frags, to avoid duplicate
calls to skb\_uarg(skb)->callback for the same data.
skb\_zerocopy\_clone associates skb\_shinfo(skb)->uarg from frag\_skb
with each segment. This is only safe for uargs that do refcounting,
which is those that pass skb\_orphan\_frags without dropping their
shared frags. For others, skb\_orphan\_frags drops the user frags and
sets the uarg to NULL, after which sock\_zerocopy\_clone has no effect.
Qemu hangs were reported due to duplicate vhost\_net\_zerocopy\_callback
calls for the same data causing the vhost\_net\_ubuf\_ref\_>refcount to
drop below zero.
Link: http://lkml.kernel.org/r/
Fixes: 1f8b977ab32d ("sock: enable MSG\_ZEROCOPY")
Reported-by: Andreas Hartmann
Reported-by: David Hill
Signed-off-by: Willem de Bruijn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8f5bbb29b62c818e16de49c0bbc945b501c157cf
Author: Saeed Mahameed
Date: Fri Nov 10 15:59:52 2017 +0900
Revert "mlx5: move affinity hints assignments to generic code"
[ Upstream commit 231243c82793428467524227ae02ca451e6a98e7 ]
Before the offending commit, mlx5 core did the IRQ affinity itself,
and it seems that the new generic code have some drawbacks and one
of them is the lack for user ability to modify irq affinity after
the initial affinity values got assigned.
The issue is still being discussed and a solution in the new generic code
is required, until then we need to revert this patch.
This fixes the following issue:
echo  > /proc/irq//smp\_affinity
fails with -EIO
This reverts commit a435393acafbf0ecff4deb3e3cb554b34f0d0664.
Note: kept mlx5\_get\_vector\_affinity in include/linux/mlx5/driver.h since
it is used in mlx5\_ib driver.
Fixes: a435393acafb ("mlx5: move affinity hints assignments to generic code")
Cc: Sagi Grimberg
Cc: Thomas Gleixner
Cc: Jes Sorensen
Reported-by: Jes Sorensen
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit f2272d5dce7905d605f26ba8a5f9961d05263e74
Author: Nicolas Dichtel
Date: Tue Nov 14 14:21:32 2017 +0100
ipv6: set all.accept\_dad to 0 by default
[ Upstream commit 094009531612246d9e13f9e0c3ae2205d7f63a0a ]
With commits 35e015e1f577 and a2d3f3e33853, the global 'accept\_dad' flag
is also taken into account (default value is 1). If either global or
per-interface flag is non-zero, DAD will be enabled on a given interface.
This is not backward compatible: before those patches, the user could
disable DAD just by setting the per-interface flag to 0. Now, the
user instead needs to set both flags to 0 to actually disable DAD.
Restore the previous behaviour by setting the default for the global
'accept\_dad' flag to 0. This way, DAD is still enabled by default,
as per-interface flags are set to 1 on device creation, but setting
them to 0 is enough to disable DAD on a given interface.
- Before 35e015e1f57a7 and a2d3f3e33853:
global per-interface DAD enabled
[default] 1 1 yes
X 0 no
X 1 yes
- After 35e015e1f577 and a2d3f3e33853:
global per-interface DAD enabled
[default] 1 1 yes
0 0 no
0 1 yes
1 0 yes
- After this fix:
global per-interface DAD enabled
1 1 yes
0 0 no
[default] 0 1 yes
1 0 yes
Fixes: 35e015e1f577 ("ipv6: fix net.ipv6.conf.all interface DAD handlers")
Fixes: a2d3f3e33853 ("ipv6: fix net.ipv6.conf.all.accept\_dad behaviour for real")
CC: Stefano Brivio
CC: Matteo Croce
CC: Erik Kline
Signed-off-by: Nicolas Dichtel
Acked-by: Stefano Brivio
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 86deaaa0ca2b0657e1f72e1087153d4ff22a312b
Author: Phil Sutter
Date: Tue Dec 19 15:17:13 2017 +0100
ipv4: fib: Fix metrics match when deleting a route
[ Upstream commit d03a45572efa068fa64db211d6d45222660e76c5 ]
The recently added fib\_metrics\_match() causes a regression for routes
with both RTAX\_FEATURES and RTAX\_CC\_ALGO if the latter has
TCP\_CONG\_NEEDS\_ECN flag set:
| # ip link add d0 type dummy
| # ip link set d0 up
| # ip route add 172.29.29.0/24 dev d0 features ecn congctl dctcp
| # ip route del 172.29.29.0/24 dev d0 features ecn congctl dctcp
| RTNETLINK answers: No such process
During route insertion, fib\_convert\_metrics() detects that the given CC
algo requires ECN and hence sets DST\_FEATURE\_ECN\_CA bit in
RTAX\_FEATURES.
During route deletion though, fib\_metrics\_match() compares stored
RTAX\_FEATURES value with that from userspace (which obviously has no
knowledge about DST\_FEATURE\_ECN\_CA) and fails.
Fixes: 5f9ae3d9e7e4a ("ipv4: do metrics match when looking up and deleting a route")
Signed-off-by: Phil Sutter
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 185a3475dee6c14dd67d1a94178b6b5615cf167b
Author: Russell King
Date: Wed Dec 20 23:21:34 2017 +0000
phylink: ensure AN is enabled
[ Upstream commit 74ee0e8c1bf9925c59cc8f1c65c29adf6e4cf603 ]
Ensure that we mark AN as enabled at boot time, rather than leaving
it disabled. This is noticable if your SFP module is fiber, and
it supports faster speeds than 1G with 2.5G support in place.
Fixes: 9525ae83959b ("phylink: add phylink infrastructure")
Signed-off-by: Russell King
Reviewed-by: Florian Fainelli
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 39889c293371e826503b61d98050a49742ccaf9c
Author: Russell King
Date: Wed Dec 20 23:21:28 2017 +0000
phylink: ensure the PHY interface mode is appropriately set
[ Upstream commit 182088aa3c6c7f7c20a2c1dcc9ded4a3fc631f38 ]
When setting the ethtool settings, ensure that the validated PHY
interface mode is propagated to the current link settings, so that
2500BaseX can be selected.
Fixes: 9525ae83959b ("phylink: add phylink infrastructure")
Signed-off-by: Russell King
Reviewed-by: Florian Fainelli
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7f6dcb82d04045f143758f56caf031376f9bf16c
Author: Calvin Owens
Date: Fri Dec 8 09:05:26 2017 -0800
bnxt\_en: Fix sources of spurious netpoll warnings
[ Upstream commit 2edbdb3159d6f6bd3a9b6e7f789f2b879699a519 ]
After applying 2270bc5da3497945 ("bnxt\_en: Fix netpoll handling") and
903649e718f80da2 ("bnxt\_en: Improve -ENOMEM logic in NAPI poll loop."),
we still see the following WARN fire:
------------[ cut here ]------------
WARNING: CPU: 0 PID: 1875170 at net/core/netpoll.c:165 netpoll\_poll\_dev+0x15a/0x160
bnxt\_poll+0x0/0xd0 exceeded budget in poll
Call Trace:
[] dump\_stack+0x4d/0x70
[] \_\_warn+0xd3/0xf0
[] warn\_slowpath\_fmt+0x4f/0x60
[] netpoll\_poll\_dev+0x15a/0x160
[] netpoll\_send\_skb\_on\_dev+0x168/0x250
[] netpoll\_send\_udp+0x2dc/0x440
[] write\_ext\_msg+0x20e/0x250
[] call\_console\_drivers.constprop.23+0xa5/0x110
[] console\_unlock+0x339/0x5b0
[] vprintk\_emit+0x2c8/0x450
[] vprintk\_default+0x1f/0x30
[] printk+0x48/0x50
[] edac\_raw\_mc\_handle\_error+0x563/0x5c0 [edac\_core]
[] edac\_mc\_handle\_error+0x42b/0x6e0 [edac\_core]
[] sbridge\_mce\_output\_error+0x410/0x10d0 [sb\_edac]
[] sbridge\_check\_error+0xac/0x130 [sb\_edac]
[] edac\_mc\_workq\_function+0x3c/0x90 [edac\_core]
[] process\_one\_work+0x19b/0x480
[] worker\_thread+0x6a/0x520
[] kthread+0xe4/0x100
[] ret\_from\_fork+0x22/0x40
This happens because we increment rx\_pkts on -ENOMEM and -EIO, resulting
in rx\_pkts > 0. Fix this by only bumping rx\_pkts if we were actually
given a non-zero budget.
Signed-off-by: Calvin Owens
Acked-by: Michael Chan
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 11295730446fd654aeef28a575d801f3679424fa
Author: Jiri Pirko
Date: Fri Dec 15 12:40:13 2017 +0100
net: sched: fix static key imbalance in case of ingress/clsact\_init error
[ Upstream commit b59e6979a86384e68b0ab6ffeab11f0034fba82d ]
Move static key increments to the beginning of the init function
so they pair 1:1 with decrements in ingress/clsact\_destroy,
which is called in case ingress/clsact\_init fails.
Fixes: 6529eaba33f0 ("net: sched: introduce tcf block infractructure")
Signed-off-by: Jiri Pirko
Acked-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 215b69e208089f42c29f9343ef11f4adc6ea6f6b
Author: Alexey Kodanev
Date: Thu Dec 14 20:20:00 2017 +0300
vxlan: restore dev->mtu setting based on lower device
[ Upstream commit f870c1ff65a6d1f3a083f277280802ee09a5b44d ]
Stefano Brivio says:
Commit a985343ba906 ("vxlan: refactor verification and
application of configuration") introduced a change in the
behaviour of initial MTU setting: earlier, the MTU for a link
created on top of a given lower device, without an initial MTU
specification, was set to the MTU of the lower device minus
headroom as a result of this path in vxlan\_dev\_configure():
if (!conf->mtu)
dev->mtu = lowerdev->mtu -
(use\_ipv6 ? VXLAN6\_HEADROOM : VXLAN\_HEADROOM);
which is now gone. Now, the initial MTU, in absence of a
configured value, is simply set by ether\_setup() to ETH\_DATA\_LEN
(1500 bytes).
This breaks userspace expectations in case the MTU of
the lower device is higher than 1500 bytes minus headroom.
This patch restores the previous behaviour on newlink operation. Since
max\_mtu can be negative and we update dev->mtu directly, also check it
for valid minimum.
Reported-by: Junhan Yan
Fixes: a985343ba906 ("vxlan: refactor verification and application of configuration")
Signed-off-by: Alexey Kodanev
Acked-by: Stefano Brivio
Signed-off-by: Stefano Brivio
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit cea58617977baafe4a1be8f55c8e55d21c6cfb20
Author: Kamal Heib
Date: Sun Oct 29 04:03:37 2017 +0200
net/mlx5: FPGA, return -EINVAL if size is zero
[ Upstream commit bae115a2bb479142605726e6aa130f43f50e801a ]
Currently, if a size of zero is passed to
mlx5\_fpga\_mem\_{read|write}\_i2c()
the "err" return value will not be initialized, which triggers gcc
warnings:
[..]/mlx5/core/fpga/sdk.c:87 mlx5\_fpga\_mem\_read\_i2c() error:
uninitialized symbol 'err'.
[..]/mlx5/core/fpga/sdk.c:115 mlx5\_fpga\_mem\_write\_i2c() error:
uninitialized symbol 'err'.
fix that.
Fixes: a9956d35d199 ('net/mlx5: FPGA, Add SBU infrastructure')
Signed-off-by: Kamal Heib
Reviewed-by: Yevgeny Kliteynik
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 5504319c6993d51565b582c685c3e09c0e07fded
Author: Eric Dumazet
Date: Tue Dec 12 18:22:52 2017 -0800
tcp: refresh tcp\_mstamp from timers callbacks
[ Upstream commit 4688eb7cf3ae2c2721d1dacff5c1384cba47d176 ]
Only the retransmit timer currently refreshes tcp\_mstamp
We should do the same for delayed acks and keepalives.
Even if RFC 7323 does not request it, this is consistent to what linux
did in the past, when TS values were based on jiffies.
Fixes: 385e20706fac ("tcp: use tp->tcp\_mstamp in output path")
Signed-off-by: Eric Dumazet
Cc: Soheil Hassas Yeganeh
Cc: Mike Maloney
Cc: Neal Cardwell
Acked-by: Neal Cardwell
Acked-by: Soheil Hassas Yeganeh
Acked-by: Mike Maloney
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 333921964046fe8453a90b60aa55dc4725955073
Author: Ido Schimmel
Date: Wed Dec 20 12:28:25 2017 +0200
ipv6: Honor specified parameters in fibmatch lookup
[ Upstream commit 58acfd714e6b02e8617448b431c2b64a2f1f0792 ]
Currently, parameters such as oif and source address are not taken into
account during fibmatch lookup. Example (IPv4 for reference) before
patch:
$ ip -4 route show
192.0.2.0/24 dev dummy0 proto kernel scope link src 192.0.2.1
198.51.100.0/24 dev dummy1 proto kernel scope link src 198.51.100.1
$ ip -6 route show
2001:db8:1::/64 dev dummy0 proto kernel metric 256 pref medium
2001:db8:2::/64 dev dummy1 proto kernel metric 256 pref medium
fe80::/64 dev dummy0 proto kernel metric 256 pref medium
fe80::/64 dev dummy1 proto kernel metric 256 pref medium
$ ip -4 route get fibmatch 192.0.2.2 oif dummy0
192.0.2.0/24 dev dummy0 proto kernel scope link src 192.0.2.1
$ ip -4 route get fibmatch 192.0.2.2 oif dummy1
RTNETLINK answers: No route to host
$ ip -6 route get fibmatch 2001:db8:1::2 oif dummy0
2001:db8:1::/64 dev dummy0 proto kernel metric 256 pref medium
$ ip -6 route get fibmatch 2001:db8:1::2 oif dummy1
2001:db8:1::/64 dev dummy0 proto kernel metric 256 pref medium
After:
$ ip -6 route get fibmatch 2001:db8:1::2 oif dummy0
2001:db8:1::/64 dev dummy0 proto kernel metric 256 pref medium
$ ip -6 route get fibmatch 2001:db8:1::2 oif dummy1
RTNETLINK answers: Network is unreachable
The problem stems from the fact that the necessary route lookup flags
are not set based on these parameters.
Instead of duplicating the same logic for fibmatch, we can simply
resolve the original route from its copy and dump it instead.
Fixes: 18c3a61c4264 ("net: ipv6: RTM\_GETROUTE: return matched fib result when requested")
Signed-off-by: Ido Schimmel
Acked-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5e255d684d0554893768b4452de404f293c71696
Author: Zhao Qiang
Date: Mon Dec 18 10:26:43 2017 +0800
net: phy: marvell: Limit 88m1101 autoneg errata to 88E1145 as well.
[ Upstream commit c505873eaece2b4aefd07d339dc7e1400e0235ac ]
88E1145 also need this autoneg errata.
Fixes: f2899788353c ("net: phy: marvell: Limit errata to 88m1101")
Signed-off-by: Zhao Qiang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 583395a81f00a42f178c1d8ba3c4858d76c9f5b4
Author: Wei Wang
Date: Tue Dec 12 16:28:58 2017 -0800
tcp: fix potential underestimation on rcv\_rtt
[ Upstream commit 9ee11bd03cb1a5c3ca33c2bb70e7ed325f68890f ]
When ms timestamp is used, current logic uses 1us in
tcp\_rcv\_rtt\_update() when the real rcv\_rtt is within 1 - 999us.
This could cause rcv\_rtt underestimation.
Fix it by always using a min value of 1ms if ms timestamp is used.
Fixes: 645f4c6f2ebd ("tcp: switch rcv\_rtt\_est and rcvq\_space to high resolution timestamps")
Signed-off-by: Wei Wang
Signed-off-by: Eric Dumazet
Acked-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bcc029ff5dafc68d00a5fceadd93763d2b43e0e3
Author: Yuval Mintz
Date: Fri Dec 15 08:44:21 2017 +0100
mlxsw: spectrum: Disable MAC learning for ovs port
[ Upstream commit fccff0862838908d21eaf956d57e09c6c189f7c5 ]
Learning is currently enabled for ports which are OVS slaves -
even though OVS doesn't need this indication.
Since we're not associating a fid with the port, HW would continuously
notify driver of learned [& aged] MACs which would be logged as errors.
Fixes: 2b94e58df58c ("mlxsw: spectrum: Allow ports to work under OVS master")
Signed-off-by: Yuval Mintz
Reviewed-by: Ido Schimmel
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 92ae8233467b3a19a50fb02a7ebe065c6de3df17
Author: Parthasarathy Bhuvaragan
Date: Thu Dec 28 12:03:06 2017 +0100
tipc: fix hanging poll() for stream sockets
[ Upstream commit 517d7c79bdb39864e617960504bdc1aa560c75c6 ]
In commit 42b531de17d2f6 ("tipc: Fix missing connection request
handling"), we replaced unconditional wakeup() with condtional
wakeup for clients with flags POLLIN | POLLRDNORM | POLLRDBAND.
This breaks the applications which do a connect followed by poll
with POLLOUT flag. These applications are not woken when the
connection is ESTABLISHED and hence sleep forever.
In this commit, we fix it by including the POLLOUT event for
sockets in TIPC\_CONNECTING state.
Fixes: 42b531de17d2f6 ("tipc: Fix missing connection request handling")
Acked-by: Jon Maloy
Signed-off-by: Parthasarathy Bhuvaragan
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 201c59bb7ba69fd6a41ac6606d8049b94fb26232
Author: Xin Long
Date: Sun Dec 10 15:40:51 2017 +0800
sctp: make sure stream nums can match optlen in sctp\_setsockopt\_reset\_streams
[ Upstream commit 2342b8d95bcae5946e1b9b8d58645f37500ef2e7 ]
Now in sctp\_setsockopt\_reset\_streams, it only does the check
optlen < sizeof(\*params) for optlen. But it's not enough, as
params->srs\_number\_streams should also match optlen.
If the streams in params->srs\_stream\_list are less than stream
nums in params->srs\_number\_streams, later when dereferencing
the stream list, it could cause a slab-out-of-bounds crash, as
reported by syzbot.
This patch is to fix it by also checking the stream numbers in
sctp\_setsockopt\_reset\_streams to make sure at least it's not
greater than the streams in the list.
Fixes: 7f9d68ac944e ("sctp: implement sender-side procedures for SSN Reset Request Parameter")
Reported-by: Dmitry Vyukov
Signed-off-by: Xin Long
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f38ffe325b209f367c003bab291cf7e96cd1a6d9
Author: Julian Wiedmann
Date: Wed Dec 20 18:07:18 2017 +0100
s390/qeth: fix error handling in checksum cmd callback
[ Upstream commit ad3cbf61332914711e5f506972b1dc9af8d62146 ]
Make sure to check both return code fields before processing the
response. Otherwise we risk operating on invalid data.
Fixes: c9475369bd2b ("s390/qeth: rework RX/TX checksum offload")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ff1ff3815c2483ac19bd6f926a535dd4cea27e2e
Author: Florian Fainelli
Date: Tue Nov 21 17:37:46 2017 -0800
net: dsa: bcm\_sf2: Clear IDDQ\_GLOBAL\_PWR bit for PHY
[ Upstream commit 4b52d010113e11006a389f2a8315167ede9e0b10 ]
The PHY on BCM7278 has an additional bit that needs to be cleared:
IDDQ\_GLOBAL\_PWR, without doing this, the PHY remains stuck in reset out
of suspend/resume cycles.
Fixes: 0fe9933804eb ("net: dsa: bcm\_sf2: Add support for BCM7278 integrated switch")
Signed-off-by: Florian Fainelli
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 701768dc9a1030d3f02b9b3e9b4690d15f637dad
Author: Bert Kenward
Date: Thu Dec 7 17:18:58 2017 +0000
sfc: pass valid pointers from efx\_enqueue\_unwind
[ Upstream commit d4a7a8893d4cdbc89d79ac4aa704bf8d4b67b368 ]
The bytes\_compl and pkts\_compl pointers passed to efx\_dequeue\_buffers
cannot be NULL. Add a paranoid warning to check this condition and fix
the one case where they were NULL.
efx\_enqueue\_unwind() is called very rarely, during error handling.
Without this fix it would fail with a NULL pointer dereference in
efx\_dequeue\_buffer, with efx\_enqueue\_skb in the call stack.
Fixes: e9117e5099ea ("sfc: Firmware-Assisted TSO version 2")
Reported-by: Jarod Wilson
Signed-off-by: Bert Kenward
Tested-by: Jarod Wilson
Acked-by: Jarod Wilson
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a6cc63e125ffb3ae9f6b4e2b4642ddea9a932b46
Author: Eric Garver
Date: Wed Dec 20 15:09:22 2017 -0500
openvswitch: Fix pop\_vlan action for double tagged frames
[ Upstream commit c48e74736fccf25fb32bb015426359e1c2016e3b ]
skb\_vlan\_pop() expects skb->protocol to be a valid TPID for double
tagged frames. So set skb->protocol to the TPID and let skb\_vlan\_pop()
shift the true ethertype into position for us.
Fixes: 5108bbaddc37 ("openvswitch: add processing of L3 packets")
Signed-off-by: Eric Garver
Reviewed-by: Jiri Benc
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bf070305213031e1300070d10334ac012116d470
Author: Moni Shoua
Date: Mon Dec 4 08:59:25 2017 +0200
net/mlx5: Fix error flow in CREATE\_QP command
[ Upstream commit dbff26e44dc3ec4de6578733b054a0114652a764 ]
In error flow, when DESTROY\_QP command should be executed, the wrong
mailbox was set with data, not the one that is written to hardware,
Fix that.
Fixes: 09a7d9eca1a6 '{net,IB}/mlx5: QP/XRCD commands via mlx5 ifc'
Signed-off-by: Moni Shoua
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 999755ec40a6206d0c9f3edfffe2b00a7a66a6e9
Author: Gal Pressman
Date: Mon Dec 4 09:57:43 2017 +0200
net/mlx5e: Prevent possible races in VXLAN control flow
[ Upstream commit 0c1cc8b2215f5122ca614b5adca60346018758c3 ]
When calling add/remove VXLAN port, a lock must be held in order to
prevent race scenarios when more than one add/remove happens at the
same time.
Fix by holding our state\_lock (mutex) as done by all other parts of the
driver.
Note that the spinlock protecting the radix-tree is still needed in
order to synchronize radix-tree access from softirq context.
Fixes: b3f63c3d5e2c ("net/mlx5e: Add netdev support for VXLAN tunneling")
Signed-off-by: Gal Pressman
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit c4d0e614c151f102967ff38bdf7c4372c146a5a6
Author: Gal Pressman
Date: Sun Dec 3 13:58:50 2017 +0200
net/mlx5e: Add refcount to VXLAN structure
[ Upstream commit 23f4cc2cd9ed92570647220aca60d0197d8c1fa9 ]
A refcount mechanism must be implemented in order to prevent unwanted
scenarios such as:
- Open an IPv4 VXLAN interface
- Open an IPv6 VXLAN interface (different socket)
- Remove one of the interfaces
With current implementation, the UDP port will be removed from our VXLAN
database and turn off the offloads for the other interface, which is
still active.
The reference count mechanism will only allow UDP port removals once all
consumers are gone.
Fixes: b3f63c3d5e2c ("net/mlx5e: Add netdev support for VXLAN tunneling")
Signed-off-by: Gal Pressman
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 597181622e649b30a4c4d6bec4816d2f8987d25a
Author: Gal Pressman
Date: Tue Nov 21 17:49:36 2017 +0200
net/mlx5e: Fix features check of IPv6 traffic
[ Upstream commit 2989ad1ec03021ee6d2193c35414f1d970a243de ]
The assumption that the next header field contains the transport
protocol is wrong for IPv6 packets with extension headers.
Instead, we should look the inner-most next header field in the buffer.
This will fix TSO offload for tunnels over IPv6 with extension headers.
Performance testing: 19.25x improvement, cool!
Measuring bandwidth of 16 threads TCP traffic over IPv6 GRE tap.
CPU: Intel(R) Xeon(R) CPU E5-2660 v2 @ 2.20GHz
NIC: Mellanox Technologies MT28800 Family [ConnectX-5 Ex]
TSO: Enabled
Before: 4,926.24 Mbps
Now : 94,827.91 Mbps
Fixes: b3f63c3d5e2c ("net/mlx5e: Add netdev support for VXLAN tunneling")
Signed-off-by: Gal Pressman
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 2dc5654e6fbc46161c56058081258bd3ad8d1ab0
Author: Gal Pressman
Date: Thu Nov 23 13:52:28 2017 +0200
net/mlx5e: Fix possible deadlock of VXLAN lock
[ Upstream commit 6323514116404cc651df1b7fffa1311ddf8ce647 ]
mlx5e\_vxlan\_lookup\_port is called both from mlx5e\_add\_vxlan\_port (user
context) and mlx5e\_features\_check (softirq), but the lock acquired does
not disable bottom half and might result in deadlock. Fix it by simply
replacing spin\_lock() with spin\_lock\_bh().
While at it, replace all unnecessary spin\_lock\_irq() to spin\_lock\_bh().
lockdep's WARNING: inconsistent lock state
[ 654.028136] inconsistent {SOFTIRQ-ON-W} -> {IN-SOFTIRQ-W} usage.
[ 654.028229] swapper/5/0 [HC0[0]:SC1[9]:HE1:SE0] takes:
[ 654.028321] (&(&vxlan\_db->lock)->rlock){+.?.}, at: [] mlx5e\_vxlan\_lookup\_port+0x1e/0x50 [mlx5\_core]
[ 654.028528] {SOFTIRQ-ON-W} state was registered at:
[ 654.028607] \_raw\_spin\_lock+0x3c/0x70
[ 654.028689] mlx5e\_vxlan\_lookup\_port+0x1e/0x50 [mlx5\_core]
[ 654.028794] mlx5e\_vxlan\_add\_port+0x2e/0x120 [mlx5\_core]
[ 654.028878] process\_one\_work+0x1e9/0x640
[ 654.028942] worker\_thread+0x4a/0x3f0
[ 654.029002] kthread+0x141/0x180
[ 654.029056] ret\_from\_fork+0x24/0x30
[ 654.029114] irq event stamp: 579088
[ 654.029174] hardirqs last enabled at (579088): [] ip6\_finish\_output2+0x49a/0x8c0
[ 654.029309] hardirqs last disabled at (579087): [] ip6\_finish\_output2+0x44e/0x8c0
[ 654.029446] softirqs last enabled at (579030): [] irq\_enter+0x6d/0x80
[ 654.029567] softirqs last disabled at (579031): [] irq\_exit+0xb5/0xc0
[ 654.029684] other info that might help us debug this:
[ 654.029781] Possible unsafe locking scenario:
[ 654.029868] CPU0
[ 654.029908] ----
[ 654.029947] lock(&(&vxlan\_db->lock)->rlock);
[ 654.030045]
[ 654.030090] lock(&(&vxlan\_db->lock)->rlock);
[ 654.030162]
\*\*\* DEADLOCK \*\*\*
Fixes: b3f63c3d5e2c ("net/mlx5e: Add netdev support for VXLAN tunneling")
Signed-off-by: Gal Pressman
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 3ddcb727c71779c23097d440355c4abe27379558
Author: Eran Ben Elisha
Date: Mon Nov 13 10:11:27 2017 +0200
net/mlx5: Fix rate limit packet pacing naming and struct
[ Upstream commit 37e92a9d4fe38dc3e7308913575983a6a088c8d4 ]
In mlx5\_ifc, struct size was not complete, and thus driver was sending
garbage after the last defined field. Fixed it by adding reserved field
to complete the struct size.
In addition, rename all set\_rate\_limit to set\_pp\_rate\_limit to be
compliant with the Firmware <-> Driver definition.
Fixes: 7486216b3a0b ("{net,IB}/mlx5: mlx5\_ifc updates")
Fixes: 1466cc5b23d1 ("net/mlx5: Rate limit tables support")
Signed-off-by: Eran Ben Elisha
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit f35318b289446015ce2d2cbfd240ba47bda6f187
Author: Yousuk Seung
Date: Thu Dec 7 13:41:34 2017 -0800
tcp: invalidate rate samples during SACK reneging
[ Upstream commit d4761754b4fb2ef8d9a1e9d121c4bec84e1fe292 ]
Mark tcp\_sock during a SACK reneging event and invalidate rate samples
while marked. Such rate samples may overestimate bw by including packets
that were SACKed before reneging.
< ack 6001 win 10000 sack 7001:38001
< ack 7001 win 0 sack 8001:38001 // Reneg detected
> seq 7001:8001 // RTO, SACK cleared.
< ack 38001 win 10000
In above example the rate sample taken after the last ack will count
7001-38001 as delivered while the actual delivery rate likely could
be much lower i.e. 7001-8001.
This patch adds a new field tcp\_sock.sack\_reneg and marks it when we
declare SACK reneging and entering TCP\_CA\_Loss, and unmarks it after
the last rate sample was taken before moving back to TCP\_CA\_Open. This
patch also invalidates rate samples taken while tcp\_sock.is\_sack\_reneg
is set.
Fixes: b9f64820fb22 ("tcp: track data delivery rate for a TCP connection")
Signed-off-by: Yousuk Seung
Signed-off-by: Neal Cardwell
Signed-off-by: Yuchung Cheng
Acked-by: Soheil Hassas Yeganeh
Acked-by: Eric Dumazet
Acked-by: Priyaranjan Jha
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 265ba7a046c05f67f80c2540ec3212dafe5b3673
Author: Willem de Bruijn
Date: Wed Dec 13 14:41:06 2017 -0500
sock: free skb in skb\_complete\_tx\_timestamp on error
[ Upstream commit 35b99dffc3f710cafceee6c8c6ac6a98eb2cb4bf ]
skb\_complete\_tx\_timestamp must ingest the skb it is passed. Call
kfree\_skb if the skb cannot be enqueued.
Fixes: b245be1f4db1 ("net-timestamp: no-payload only sysctl")
Fixes: 9ac25fc06375 ("net: fix socket refcounting in skb\_complete\_tx\_timestamp()")
Reported-by: Richard Cochran
Signed-off-by: Willem de Bruijn
Reviewed-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 003514ffb447120d1a5997827ad5226d7b5a82e1
Author: Grygorii Strashko
Date: Wed Dec 20 18:45:10 2017 -0600
net: phy: micrel: ksz9031: reconfigure autoneg after phy autoneg workaround
[ Upstream commit c1a8d0a3accf64a014d605e6806ce05d1c17adf1 ]
Under some circumstances driver will perform PHY reset in
ksz9031\_read\_status() to fix autoneg failure case (idle error count =
0xFF). When this happens ksz9031 will not detect link status change any
more when connecting to Netgear 1G switch (link can be recovered sometimes by
restarting netdevice "ifconfig down up"). Reproduced with TI am572x board
equipped with ksz9031 PHY while connecting to Netgear 1G switch.
Fix the issue by reconfiguring autonegotiation after PHY reset in
ksz9031\_read\_status().
Fixes: d2fd719bcb0e ("net/phy: micrel: Add workaround for bad autoneg")
Signed-off-by: Grygorii Strashko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dd9a2648b3e35c2369f580215d916baf7e23253a
Author: Eric W. Biederman
Date: Tue Dec 19 11:27:56 2017 -0600
net: Fix double free and memory corruption in get\_net\_ns\_by\_id()
[ Upstream commit 21b5944350052d2583e82dd59b19a9ba94a007f0 ]
(I can trivially verify that that idr\_remove in cleanup\_net happens
after the network namespace count has dropped to zero --EWB)
Function get\_net\_ns\_by\_id() does not check for net::count
after it has found a peer in netns\_ids idr.
It may dereference a peer, after its count has already been
finaly decremented. This leads to double free and memory
corruption:
put\_net(peer) rtnl\_lock()
atomic\_dec\_and\_test(&peer->count) [count=0] ...
\_\_put\_net(peer) get\_net\_ns\_by\_id(net, id)
spin\_lock(&cleanup\_list\_lock)
list\_add(&net->cleanup\_list, &cleanup\_list)
spin\_unlock(&cleanup\_list\_lock)
queue\_work() peer = idr\_find(&net->netns\_ids, id)
| get\_net(peer) [count=1]
| ...
| (use after final put)
v ...
cleanup\_net() ...
spin\_lock(&cleanup\_list\_lock) ...
list\_replace\_init(&cleanup\_list, ..) ...
spin\_unlock(&cleanup\_list\_lock) ...
... ...
... put\_net(peer)
... atomic\_dec\_and\_test(&peer->count) [count=0]
... spin\_lock(&cleanup\_list\_lock)
... list\_add(&net->cleanup\_list, &cleanup\_list)
... spin\_unlock(&cleanup\_list\_lock)
... queue\_work()
... rtnl\_unlock()
rtnl\_lock() ...
for\_each\_net(tmp) { ...
id = \_\_peernet2id(tmp, peer) ...
spin\_lock\_irq(&tmp->nsid\_lock) ...
idr\_remove(&tmp->netns\_ids, id) ...
... ...
net\_drop\_ns() ...
net\_free(peer) ...
} ...
|
v
cleanup\_net()
...
(Second free of peer)
Also, put\_net() on the right cpu may reorder with left's cpu
list\_replace\_init(&cleanup\_list, ..), and then cleanup\_list
will be corrupted.
Since cleanup\_net() is executed in worker thread, while
put\_net(peer) can happen everywhere, there should be
enough time for concurrent get\_net\_ns\_by\_id() to pick
the peer up, and the race does not seem to be unlikely.
The patch fixes the problem in standard way.
(Also, there is possible problem in peernet2id\_alloc(), which requires
check for net::count under nsid\_lock and maybe\_get\_net(peer), but
in current stable kernel it's used under rtnl\_lock() and it has to be
safe. Openswitch begun to use peernet2id\_alloc(), and possibly it should
be fixed too. While this is not in stable kernel yet, so I'll send
a separate message to netdev@ later).
Cc: Nicolas Dichtel
Signed-off-by: Kirill Tkhai
Fixes: 0c7aecd4bde4 "netns: add rtnl cmd to add and get peer netns ids"
Reviewed-by: Andrey Ryabinin
Reviewed-by: "Eric W. Biederman"
Signed-off-by: Eric W. Biederman
Reviewed-by: Eric Dumazet
Acked-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 126f42ecfcb48ec50b289124f23dafa499012650
Author: Nikolay Aleksandrov
Date: Mon Dec 18 17:35:09 2017 +0200
net: bridge: fix early call to br\_stp\_change\_bridge\_id and plug newlink leaks
[ Upstream commit 84aeb437ab98a2bce3d4b2111c79723aedfceb33 ]
The early call to br\_stp\_change\_bridge\_id in bridge's newlink can cause
a memory leak if an error occurs during the newlink because the fdb
entries are not cleaned up if a different lladdr was specified, also
another minor issue is that it generates fdb notifications with
ifindex = 0. Another unrelated memory leak is the bridge sysfs entries
which get added on NETDEV\_REGISTER event, but are not cleaned up in the
newlink error path. To remove this special case the call to
br\_stp\_change\_bridge\_id is done after netdev register and we cleanup the
bridge on changelink error via br\_dev\_delete to plug all leaks.
This patch makes netlink bridge destruction on newlink error the same as
dellink and ioctl del which is necessary since at that point we have a
fully initialized bridge device.
To reproduce the issue:
$ ip l add br0 address 00:11:22:33:44:55 type bridge group\_fwd\_mask 1
RTNETLINK answers: Invalid argument
$ rmmod bridge
[ 1822.142525] =============================================================================
[ 1822.143640] BUG bridge\_fdb\_cache (Tainted: G O ): Objects remaining in bridge\_fdb\_cache on \_\_kmem\_cache\_shutdown()
[ 1822.144821] -----------------------------------------------------------------------------
[ 1822.145990] Disabling lock debugging due to kernel taint
[ 1822.146732] INFO: Slab 0x0000000092a844b2 objects=32 used=2 fp=0x00000000fef011b0 flags=0x1ffff8000000100
[ 1822.147700] CPU: 2 PID: 13584 Comm: rmmod Tainted: G B O 4.15.0-rc2+ #87
[ 1822.148578] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.7.5-20140531\_083030-gandalf 04/01/2014
[ 1822.150008] Call Trace:
[ 1822.150510] dump\_stack+0x78/0xa9
[ 1822.151156] slab\_err+0xb1/0xd3
[ 1822.151834] ? \_\_kmalloc+0x1bb/0x1ce
[ 1822.152546] \_\_kmem\_cache\_shutdown+0x151/0x28b
[ 1822.153395] shutdown\_cache+0x13/0x144
[ 1822.154126] kmem\_cache\_destroy+0x1c0/0x1fb
[ 1822.154669] SyS\_delete\_module+0x194/0x244
[ 1822.155199] ? trace\_hardirqs\_on\_thunk+0x1a/0x1c
[ 1822.155773] entry\_SYSCALL\_64\_fastpath+0x23/0x9a
[ 1822.156343] RIP: 0033:0x7f929bd38b17
[ 1822.156859] RSP: 002b:00007ffd160e9a98 EFLAGS: 00000202 ORIG\_RAX: 00000000000000b0
[ 1822.157728] RAX: ffffffffffffffda RBX: 00005578316ba090 RCX: 00007f929bd38b17
[ 1822.158422] RDX: 00007f929bd9ec60 RSI: 0000000000000800 RDI: 00005578316ba0f0
[ 1822.159114] RBP: 0000000000000003 R08: 00007f929bff5f20 R09: 00007ffd160e8a11
[ 1822.159808] R10: 00007ffd160e9860 R11: 0000000000000202 R12: 00007ffd160e8a80
[ 1822.160513] R13: 0000000000000000 R14: 0000000000000000 R15: 00005578316ba090
[ 1822.161278] INFO: Object 0x000000007645de29 @offset=0
[ 1822.161666] INFO: Object 0x00000000d5df2ab5 @offset=128
Fixes: 30313a3d5794 ("bridge: Handle IFLA\_ADDRESS correctly when creating bridge device")
Fixes: 5b8d5429daa0 ("bridge: netlink: register netdevice before executing changelink")
Signed-off-by: Nikolay Aleksandrov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 27ccace9b982ea796e15ba9dc6af5941539c6be8
Author: Ido Schimmel
Date: Wed Dec 20 19:34:19 2017 +0200
ipv4: Fix use-after-free when flushing FIB tables
[ Upstream commit b4681c2829e24943aadd1a7bb3a30d41d0a20050 ]
Since commit 0ddcf43d5d4a ("ipv4: FIB Local/MAIN table collapse") the
local table uses the same trie allocated for the main table when custom
rules are not in use.
When a net namespace is dismantled, the main table is flushed and freed
(via an RCU callback) before the local table. In case the callback is
invoked before the local table is iterated, a use-after-free can occur.
Fix this by iterating over the FIB tables in reverse order, so that the
main table is always freed after the local table.
v3: Reworded comment according to Alex's suggestion.
v2: Add a comment to make the fix more explicit per Dave's and Alex's
feedback.
Fixes: 0ddcf43d5d4a ("ipv4: FIB Local/MAIN table collapse")
Signed-off-by: Ido Schimmel
Reported-by: Fengguang Wu
Acked-by: Alexander Duyck
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 44319591ffa28770f12f33b70e4269d8cda8cb5f
Author: Alexey Kodanev
Date: Wed Dec 20 19:36:03 2017 +0300
ip6\_gre: fix device features for ioctl setup
[ Upstream commit e5a9336adb317db55eb3fe8200856096f3c71109 ]
When ip6gre is created using ioctl, its features, such as
scatter-gather, GSO and tx-checksumming will be turned off:
# ip -f inet6 tunnel add gre6 mode ip6gre remote fd00::1
# ethtool -k gre6 (truncated output)
tx-checksumming: off
scatter-gather: off
tcp-segmentation-offload: off
generic-segmentation-offload: off [requested on]
But when netlink is used, they will be enabled:
# ip link add gre6 type ip6gre remote fd00::1
# ethtool -k gre6 (truncated output)
tx-checksumming: on
scatter-gather: on
tcp-segmentation-offload: on
generic-segmentation-offload: on
This results in a loss of performance when gre6 is created via ioctl.
The issue was found with LTP/gre tests.
Fix it by moving the setup of device features to a separate function
and invoke it with ndo\_init callback because both netlink and ioctl
will eventually call it via register\_netdevice():
register\_netdevice()
- ndo\_init() callback -> ip6gre\_tunnel\_init() or ip6gre\_tap\_init()
- ip6gre\_tunnel\_init\_common()
- ip6gre\_tnl\_init\_features()
The moved code also contains two minor style fixes:
\* removed needless tab from GRE6\_FEATURES on NETIF\_F\_HIGHDMA line.
\* fixed the issue reported by checkpatch: "Unnecessary parentheses around
'nt->encap.type == TUNNEL\_ENCAP\_NONE'"
Fixes: ac4eb009e477 ("ip6gre: Add support for basic offloads offloads excluding GSO")
Signed-off-by: Alexey Kodanev
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6d1c489810bcde9266ccdbedc0861a5dc9778f60
Author: Nikita V. Shirokov
Date: Wed Dec 6 17:15:43 2017 -0800
adding missing rcu\_read\_unlock in ipxip6\_rcv
[ Upstream commit 74c4b656c3d92ec4c824ea1a4afd726b7b6568c8 ]
commit 8d79266bc48c ("ip6\_tunnel: add collect\_md mode to IPv6 tunnels")
introduced new exit point in ipxip6\_rcv. however rcu\_read\_unlock is
missing there. this diff is fixing this
v1->v2:
instead of doing rcu\_read\_unlock in place, we are going to "drop"
section (to prevent skb leakage)
Fixes: 8d79266bc48c ("ip6\_tunnel: add collect\_md mode to IPv6 tunnels")
Signed-off-by: Nikita V. Shirokov
Acked-by: Alexei Starovoitov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a3927015a4bbcb73d35cdbed24f81efeba1d7a6a
Author: Tonghao Zhang
Date: Fri Dec 22 10:15:20 2017 -0800
sctp: Replace use of sockets\_allocated with specified macro.
[ Upstream commit 8cb38a602478e9f806571f6920b0a3298aabf042 ]
The patch(180d8cd942ce) replaces all uses of struct sock fields'
memory\_pressure, memory\_allocated, sockets\_allocated, and sysctl\_mem
to accessor macros. But the sockets\_allocated field of sctp sock is
not replaced at all. Then replace it now for unifying the code.
Fixes: 180d8cd942ce ("foundations of per-cgroup memory pressure controlling.")
Cc: Glauber Costa
Signed-off-by: Tonghao Zhang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9f49cbc7cd207f27ead81246d9553515aea68131
Author: Tobias Jordan
Date: Wed Dec 6 15:23:23 2017 +0100
net: mvmdio: disable/unprepare clocks in EPROBE\_DEFER case
[ Upstream commit 589bf32f09852041fbd3b7ce1a9e703f95c230ba ]
add appropriate calls to clk\_disable\_unprepare() by jumping to out\_mdio
in case orion\_mdio\_probe() returns -EPROBE\_DEFER.
Found by Linux Driver Verification project (linuxtesting.org).
Fixes: 3d604da1e954 ("net: mvmdio: get and enable optional clock")
Signed-off-by: Tobias Jordan
Reviewed-by: Andrew Lunn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3bc400bad0e003d40a0a2412411aed7cbae16f96
Author: Mohamed Ghannam
Date: Sun Dec 10 03:50:58 2017 +0000
net: ipv4: fix for a race condition in raw\_sendmsg
[ Upstream commit 8f659a03a0ba9289b9aeb9b4470e6fb263d6f483 ]
inet->hdrincl is racy, and could lead to uninitialized stack pointer
usage, so its value should be read only once.
Fixes: c008ba5bdc9f ("ipv4: Avoid reading user iov twice after raw\_probe\_proto\_opt")
Signed-off-by: Mohamed Ghannam
Reviewed-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 72b44d0434c1a4688b55aaa59150d74344721306
Author: Julian Wiedmann
Date: Wed Dec 13 18:56:32 2017 +0100
s390/qeth: update takeover IPs after configuration change
[ Upstream commit 02f510f326501470348a5df341e8232c3497bbbb ]
Any modification to the takeover IP-ranges requires that we re-evaluate
which IP addresses are takeover-eligible. Otherwise we might do takeover
for some addresses when we no longer should, or vice-versa.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8658408f284efd553a882ee717326845130c51d9
Author: Julian Wiedmann
Date: Wed Dec 13 18:56:31 2017 +0100
s390/qeth: lock IP table while applying takeover changes
[ Upstream commit 8a03a3692b100d84785ee7a834e9215e304c9e00 ]
Modifying the flags of an IP addr object needs to be protected against
eg. concurrent removal of the same object from the IP table.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e34a43e57c218bf28f8ec73a1ce68fec41c4b20c
Author: Julian Wiedmann
Date: Wed Dec 13 18:56:30 2017 +0100
s390/qeth: don't apply takeover changes to RXIP
[ Upstream commit b22d73d6689fd902a66c08ebe71ab2f3b351e22f ]
When takeover is switched off, current code clears the 'TAKEOVER' flag on
all IPs. But the flag is also used for RXIP addresses, and those should
not be affected by the takeover mode.
Fix the behaviour by consistenly applying takover logic to NORMAL
addresses only.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 621b5ae0f9f4f9ef91bf441afc086ecf5e752d51
Author: Julian Wiedmann
Date: Wed Dec 13 18:56:29 2017 +0100
s390/qeth: apply takeover changes when mode is toggled
[ Upstream commit 7fbd9493f0eeae8cef58300505a9ef5c8fce6313 ]
Just as for an explicit enable/disable, toggling the takeover mode also
requires that the IP addresses get updated. Otherwise all IPs that were
added to the table before the mode-toggle, get registered with the old
settings.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c7e9d724785dc9b6a423bddc6b4fa6fb1368692f
Author: Neal Cardwell
Date: Thu Dec 7 12:43:32 2017 -0500
tcp\_bbr: reset long-term bandwidth sampling on loss recovery undo
[ Upstream commit 600647d467c6d04b3954b41a6ee1795b5ae00550 ]
Fix BBR so that upon notification of a loss recovery undo BBR resets
long-term bandwidth sampling.
Under high reordering, reordering events can be interpreted as loss.
If the reordering and spurious loss estimates are high enough, this
can cause BBR to spuriously estimate that we are seeing loss rates
high enough to trigger long-term bandwidth estimation. To avoid that
problem, this commit resets long-term bandwidth sampling on loss
recovery undo events.
Signed-off-by: Neal Cardwell
Reviewed-by: Yuchung Cheng
Acked-by: Soheil Hassas Yeganeh
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit eb710b5f62ad3a18742bae70f91e8664ee23cbe3
Author: Neal Cardwell
Date: Thu Dec 7 12:43:31 2017 -0500
tcp\_bbr: reset full pipe detection on loss recovery undo
[ Upstream commit 2f6c498e4f15d27852c04ed46d804a39137ba364 ]
Fix BBR so that upon notification of a loss recovery undo BBR resets
the full pipe detection (STARTUP exit) state machine.
Under high reordering, reordering events can be interpreted as loss.
If the reordering and spurious loss estimates are high enough, this
could previously cause BBR to spuriously estimate that the pipe is
full.
Since spurious loss recovery means that our overall sending will have
slowed down spuriously, this commit gives a flow more time to probe
robustly for bandwidth and decide the pipe is really full.
Signed-off-by: Neal Cardwell
Reviewed-by: Yuchung Cheng
Acked-by: Soheil Hassas Yeganeh
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit d3f3d4134eb700ad087691effbdf26fe8f3bfd90
Author: Brian King
Date: Fri Dec 15 15:21:50 2017 -0600
tg3: Fix rx hang on MTU change with 5717/5719
[ Upstream commit 748a240c589824e9121befb1cba5341c319885bc ]
This fixes a hang issue seen when changing the MTU size from 1500 MTU
to 9000 MTU on both 5717 and 5719 chips. In discussion with Broadcom,
they've indicated that these chipsets have the same phy as the 57766
chipset, so the same workarounds apply. This has been tested by IBM
on both Power 8 and Power 9 systems as well as by Broadcom on x86
hardware and has been confirmed to resolve the hang issue.
Signed-off-by: Brian King
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4f2963559f29f34a8dbcc35a331f152fa3492224
Author: Christoph Paasch
Date: Mon Dec 11 00:05:46 2017 -0800
tcp md5sig: Use skb's saddr when replying to an incoming segment
[ Upstream commit 30791ac41927ebd3e75486f9504b6d2280463bf0 ]
The MD5-key that belongs to a connection is identified by the peer's
IP-address. When we are in tcp\_v4(6)\_reqsk\_send\_ack(), we are replying
to an incoming segment from tcp\_check\_req() that failed the seq-number
checks.
Thus, to find the correct key, we need to use the skb's saddr and not
the daddr.
This bug seems to have been there since quite a while, but probably got
unnoticed because the consequences are not catastrophic. We will call
tcp\_v4\_reqsk\_send\_ack only to send a challenge-ACK back to the peer,
thus the connection doesn't really fail.
Fixes: 9501f9722922 ("tcp md5sig: Let the caller pass appropriate key for tcp\_v{4,6}\_do\_calc\_md5\_hash().")
Signed-off-by: Christoph Paasch
Reviewed-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e414e7f03c29a4d3f07e042e18bdfe84269897df
Author: Neal Cardwell
Date: Thu Dec 7 12:43:30 2017 -0500
tcp\_bbr: record "full bw reached" decision in new full\_bw\_reached bit
[ Upstream commit c589e69b508d29ed8e644dfecda453f71c02ec27 ]
This commit records the "full bw reached" decision in a new
full\_bw\_reached bit. This is a pure refactor that does not change the
current behavior, but enables subsequent fixes and improvements.
In particular, this enables simple and clean fixes because the full\_bw
and full\_bw\_cnt can be unconditionally zeroed without worrying about
forgetting that we estimated we filled the pipe in Startup. And it
enables future improvements because multiple code paths can be used
for estimating that we filled the pipe in Startup; any new code paths
only need to set this bit when they think the pipe is full.
Note that this fix intentionally reduces the width of the full\_bw\_cnt
counter, since we have never used the most significant bit.
Signed-off-by: Neal Cardwell
Reviewed-by: Yuchung Cheng
Acked-by: Soheil Hassas Yeganeh
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e7728247372ca9f7faccca4a37e96964f796c94b
Author: Avinash Repaka
Date: Thu Dec 21 20:17:04 2017 -0800
RDS: Check cmsg\_len before dereferencing CMSG\_DATA
[ Upstream commit 14e138a86f6347c6199f610576d2e11c03bec5f0 ]
RDS currently doesn't check if the length of the control message is
large enough to hold the required data, before dereferencing the control
message data. This results in following crash:
BUG: KASAN: stack-out-of-bounds in rds\_rdma\_bytes net/rds/send.c:1013
[inline]
BUG: KASAN: stack-out-of-bounds in rds\_sendmsg+0x1f02/0x1f90
net/rds/send.c:1066
Read of size 8 at addr ffff8801c928fb70 by task syzkaller455006/3157
CPU: 0 PID: 3157 Comm: syzkaller455006 Not tainted 4.15.0-rc3+ #161
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS
Google 01/01/2011
Call Trace:
\_\_dump\_stack lib/dump\_stack.c:17 [inline]
dump\_stack+0x194/0x257 lib/dump\_stack.c:53
print\_address\_description+0x73/0x250 mm/kasan/report.c:252
kasan\_report\_error mm/kasan/report.c:351 [inline]
kasan\_report+0x25b/0x340 mm/kasan/report.c:409
\_\_asan\_report\_load8\_noabort+0x14/0x20 mm/kasan/report.c:430
rds\_rdma\_bytes net/rds/send.c:1013 [inline]
rds\_sendmsg+0x1f02/0x1f90 net/rds/send.c:1066
sock\_sendmsg\_nosec net/socket.c:628 [inline]
sock\_sendmsg+0xca/0x110 net/socket.c:638
\_\_\_sys\_sendmsg+0x320/0x8b0 net/socket.c:2018
\_\_sys\_sendmmsg+0x1ee/0x620 net/socket.c:2108
SYSC\_sendmmsg net/socket.c:2139 [inline]
SyS\_sendmmsg+0x35/0x60 net/socket.c:2134
entry\_SYSCALL\_64\_fastpath+0x1f/0x96
RIP: 0033:0x43fe49
RSP: 002b:00007fffbe244ad8 EFLAGS: 00000217 ORIG\_RAX: 0000000000000133
RAX: ffffffffffffffda RBX: 00000000004002c8 RCX: 000000000043fe49
RDX: 0000000000000001 RSI: 000000002020c000 RDI: 0000000000000003
RBP: 00000000006ca018 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000217 R12: 00000000004017b0
R13: 0000000000401840 R14: 0000000000000000 R15: 0000000000000000
To fix this, we verify that the cmsg\_len is large enough to hold the
data to be read, before proceeding further.
Reported-by: syzbot
Signed-off-by: Avinash Repaka
Acked-by: Santosh Shilimkar
Reviewed-by: Yuval Shaia
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 78ce0e9c4183a34b0910ec36c4ad8df1f7bf7874
Author: Michael S. Tsirkin
Date: Tue Dec 5 21:29:37 2017 +0200
ptr\_ring: add barriers
[ Upstream commit a8ceb5dbfde1092b466936bca0ff3be127ecf38e ]
Users of ptr\_ring expect that it's safe to give the
data structure a pointer and have it be available
to consumers, but that actually requires an smb\_wmb
or a stronger barrier.
In absence of such barriers and on architectures that reorder writes,
consumer might read an un=initialized value from an skb pointer stored
in the skb array. This was observed causing crashes.
To fix, add memory barriers. The barrier we use is a wmb, the
assumption being that producers do not need to read the value so we do
not need to order these reads.
Reported-by: George Cherian
Suggested-by: Jason Wang
Signed-off-by: Michael S. Tsirkin
Acked-by: Jason Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6d0317869c9153d7e6efa769a764b54019d4a3d3
Author: Shaohua Li
Date: Wed Dec 20 12:10:21 2017 -0800
net: reevalulate autoflowlabel setting after sysctl setting
[ Upstream commit 513674b5a2c9c7a67501506419da5c3c77ac6f08 ]
sysctl.ip6.auto\_flowlabels is default 1. In our hosts, we set it to 2.
If sockopt doesn't set autoflowlabel, outcome packets from the hosts are
supposed to not include flowlabel. This is true for normal packet, but
not for reset packet.
The reason is ipv6\_pinfo.autoflowlabel is set in sock creation. Later if
we change sysctl.ip6.auto\_flowlabels, the ipv6\_pinfo.autoflowlabel isn't
changed, so the sock will keep the old behavior in terms of auto
flowlabel. Reset packet is suffering from this problem, because reset
packet is sent from a special control socket, which is created at boot
time. Since sysctl.ipv6.auto\_flowlabels is 1 by default, the control
socket will always have its ipv6\_pinfo.autoflowlabel set, even after
user set sysctl.ipv6.auto\_flowlabels to 1, so reset packset will always
have flowlabel. Normal sock created before sysctl setting suffers from
the same issue. We can't even turn off autoflowlabel unless we kill all
socks in the hosts.
To fix this, if IPV6\_AUTOFLOWLABEL sockopt is used, we use the
autoflowlabel setting from user, otherwise we always call
ip6\_default\_np\_autolabel() which has the new settings of sysctl.
Note, this changes behavior a little bit. Before commit 42240901f7c4
(ipv6: Implement different admin modes for automatic flow labels), the
autoflowlabel behavior of a sock isn't sticky, eg, if sysctl changes,
existing connection will change autoflowlabel behavior. After that
commit, autoflowlabel behavior is sticky in the whole life of the sock.
With this patch, the behavior isn't sticky again.
Cc: Martin KaFai Lau
Cc: Eric Dumazet
Cc: Tom Herbert
Signed-off-by: Shaohua Li
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1bad9c5ea85e7522d403559cc249dd7a0ae705b1
Author: Sebastian Sjoholm
Date: Mon Dec 11 21:51:14 2017 +0100
net: qmi\_wwan: add Sierra EM7565 1199:9091
[ Upstream commit aceef61ee56898cfa7b6960fb60b9326c3860441 ]
Sierra Wireless EM7565 is an Qualcomm MDM9x50 based M.2 modem.
The USB id is added to qmi\_wwan.c to allow QMI communication
with the EM7565.
Signed-off-by: Sebastian Sjoholm
Acked-by: Bjørn Mork
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e3fb538e5715250d6a61a26925215229f2e9f52f
Author: Kevin Cernekee
Date: Wed Dec 6 12:12:27 2017 -0800
netlink: Add netns check on taps
[ Upstream commit 93c647643b48f0131f02e45da3bd367d80443291 ]
Currently, a nlmon link inside a child namespace can observe systemwide
netlink activity. Filter the traffic so that nlmon can only sniff
netlink messages from its own netns.
Test case:
vpnns -- bash -c "ip link add nlmon0 type nlmon; \
ip link set nlmon0 up; \
tcpdump -i nlmon0 -q -w /tmp/nlmon.pcap -U" &
sudo ip xfrm state add src 10.1.1.1 dst 10.1.1.2 proto esp \
spi 0x1 mode transport \
auth sha1 0x6162633132330000000000000000000000000000 \
enc aes 0x00000000000000000000000000000000
grep --binary abc123 /tmp/nlmon.pcap
Signed-off-by: Kevin Cernekee
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f9c48469278060450e99c3995c5b0717c48d50b8
Author: Kevin Cernekee
Date: Mon Dec 11 11:13:45 2017 -0800
net: igmp: Use correct source address on IGMPv3 reports
[ Upstream commit a46182b00290839fa3fa159d54fd3237bd8669f0 ]
Closing a multicast socket after the final IPv4 address is deleted
from an interface can generate a membership report that uses the
source IP from a different interface. The following test script, run
from an isolated netns, reproduces the issue:
#!/bin/bash
ip link add dummy0 type dummy
ip link add dummy1 type dummy
ip link set dummy0 up
ip link set dummy1 up
ip addr add 10.1.1.1/24 dev dummy0
ip addr add 192.168.99.99/24 dev dummy1
tcpdump -U -i dummy0 &
socat EXEC:"sleep 2" \
UDP4-DATAGRAM:239.101.1.68:8889,ip-add-membership=239.0.1.68:10.1.1.1 &
sleep 1
ip addr del 10.1.1.1/24 dev dummy0
sleep 5
kill %tcpdump
RFC 3376 specifies that the report must be sent with a valid IP source
address from the destination subnet, or from address 0.0.0.0. Add an
extra check to make sure this is the case.
Signed-off-by: Kevin Cernekee
Reviewed-by: Andrew Lunn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f55ac6684640a285465cf31a8d5e23bcc3da872d
Author: Fugang Duan
Date: Fri Dec 22 17:12:09 2017 +0800
net: fec: unmap the xmit buffer that are not transferred by DMA
[ Upstream commit 178e5f57a8d8f8fc5799a624b96fc31ef9a29ffa ]
The enet IP only support 32 bit, it will use swiotlb buffer to do dma
mapping when xmit buffer DMA memory address is bigger than 4G in i.MX
platform. After stress suspend/resume test, it will print out:
log:
[12826.352864] fec 5b040000.ethernet: swiotlb buffer is full (sz: 191 bytes)
[12826.359676] DMA: Out of SW-IOMMU space for 191 bytes at device 5b040000.ethernet
[12826.367110] fec 5b040000.ethernet eth0: Tx DMA memory map failed
The issue is that the ready xmit buffers that are dma mapped but DMA still
don't copy them into fifo, once MAC restart, these DMA buffers are not unmapped.
So it should check the dma mapping buffer and unmap them.
Signed-off-by: Fugang Duan
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 521f4d9625b7b2359dbec6039724b4feb9e8490d
Author: Eric Dumazet
Date: Mon Dec 11 07:03:38 2017 -0800
ipv6: mcast: better catch silly mtu values
[ Upstream commit b9b312a7a451e9c098921856e7cfbc201120e1a7 ]
syzkaller reported crashes in IPv6 stack [1]
Xin Long found that lo MTU was set to silly values.
IPv6 stack reacts to changes to small MTU, by disabling itself under
RTNL.
But there is a window where threads not using RTNL can see a wrong
device mtu. This can lead to surprises, in mld code where it is assumed
the mtu is suitable.
Fix this by reading device mtu once and checking IPv6 minimal MTU.
[1]
skbuff: skb\_over\_panic: text:0000000010b86b8d len:196 put:20
head:000000003b477e60 data:000000000e85441e tail:0xd4 end:0xc0 dev:lo
------------[ cut here ]------------
kernel BUG at net/core/skbuff.c:104!
invalid opcode: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 1 PID: 0 Comm: swapper/1 Not tainted 4.15.0-rc2-mm1+ #39
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS
Google 01/01/2011
RIP: 0010:skb\_panic+0x15c/0x1f0 net/core/skbuff.c:100
RSP: 0018:ffff8801db307508 EFLAGS: 00010286
RAX: 0000000000000082 RBX: ffff8801c517e840 RCX: 0000000000000000
RDX: 0000000000000082 RSI: 1ffff1003b660e61 RDI: ffffed003b660e95
RBP: ffff8801db307570 R08: 1ffff1003b660e23 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000000 R12: ffffffff85bd4020
R13: ffffffff84754ed2 R14: 0000000000000014 R15: ffff8801c4e26540
FS: 0000000000000000(0000) GS:ffff8801db300000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000000463610 CR3: 00000001c6698000 CR4: 00000000001406e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
skb\_over\_panic net/core/skbuff.c:109 [inline]
skb\_put+0x181/0x1c0 net/core/skbuff.c:1694
add\_grhead.isra.24+0x42/0x3b0 net/ipv6/mcast.c:1695
add\_grec+0xa55/0x1060 net/ipv6/mcast.c:1817
mld\_send\_cr net/ipv6/mcast.c:1903 [inline]
mld\_ifc\_timer\_expire+0x4d2/0x770 net/ipv6/mcast.c:2448
call\_timer\_fn+0x23b/0x840 kernel/time/timer.c:1320
expire\_timers kernel/time/timer.c:1357 [inline]
\_\_run\_timers+0x7e1/0xb60 kernel/time/timer.c:1660
run\_timer\_softirq+0x4c/0xb0 kernel/time/timer.c:1686
\_\_do\_softirq+0x29d/0xbb2 kernel/softirq.c:285
invoke\_softirq kernel/softirq.c:365 [inline]
irq\_exit+0x1d3/0x210 kernel/softirq.c:405
exiting\_irq arch/x86/include/asm/apic.h:540 [inline]
smp\_apic\_timer\_interrupt+0x16b/0x700 arch/x86/kernel/apic/apic.c:1052
apic\_timer\_interrupt+0xa9/0xb0 arch/x86/entry/entry\_64.S:920
Signed-off-by: Eric Dumazet
Reported-by: syzbot
Tested-by: Xin Long
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 57dfc3d10e40053e70691260a791bb453f183cfd
Author: Eric Dumazet
Date: Mon Dec 11 07:17:39 2017 -0800
ipv4: igmp: guard against silly MTU values
[ Upstream commit b5476022bbada3764609368f03329ca287528dc8 ]
IPv4 stack reacts to changes to small MTU, by disabling itself under
RTNL.
But there is a window where threads not using RTNL can see a wrong
device mtu. This can lead to surprises, in igmp code where it is
assumed the mtu is suitable.
Fix this by reading device mtu once and checking IPv4 minimal MTU.
This patch adds missing IPV4\_MIN\_MTU define, to not abuse
ETH\_MIN\_MTU anymore.
Signed-off-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit aa7f9011bc01b22658d4c255e2feecf0193e092d
Author: Linus Torvalds
Date: Fri Dec 29 17:34:43 2017 -0800
kbuild: add '-fno-stack-check' to kernel build options
commit 3ce120b16cc548472f80cf8644f90eda958cf1b6 upstream.
It appears that hardened gentoo enables "-fstack-check" by default for
gcc.
That doesn't work \_at\_all\_ for the kernel, because the kernel stack
doesn't act like a user stack at all: it's much smaller, and it doesn't
auto-expand on use. So the extra "probe one page below the stack" code
generated by -fstack-check just breaks the kernel in horrible ways,
causing infinite double faults etc.
[ I have to say, that the particular code gcc generates looks very
stupid even for user space where it works, but that's a separate
issue. ]
Reported-and-tested-by: Alexander Tsoy
Reported-and-tested-by: Toralf Förster
Cc: Dave Hansen
Cc: Jiri Kosina
Cc: Andy Lutomirski
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit eaedee932c91120868d42df39a1fc17fa6a313ef
Author: Ming Lei
Date: Mon Dec 18 15:40:43 2017 +0800
block: don't let passthrough IO go into .make\_request\_fn()
commit 14cb0dc6479dc5ebc63b3a459a5d89a2f1b39fed upstream.
Commit a8821f3f3("block: Improvements to bounce-buffer handling") tries
to make sure that the bio to .make\_request\_fn won't exceed BIO\_MAX\_PAGES,
but ignores that passthrough I/O can use blk\_queue\_bounce() too.
Especially, passthrough IO may not be sector-aligned, and the check
of 'sectors < bio\_sectors(\*bio\_orig)' inside \_\_blk\_queue\_bounce() may
become true even though the max bvec number doesn't exceed BIO\_MAX\_PAGES,
then cause the bio splitted, and the original passthrough bio is submited
to generic\_make\_request().
This patch fixes this issue by checking if the bio is passthrough IO,
and use bio\_kmalloc() to allocate the cloned passthrough bio.
Cc: NeilBrown
Fixes: a8821f3f3("block: Improvements to bounce-buffer handling")
Tested-by: Michele Ballabio
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 88da02868f7741cc7c1d895840e236e6df5483ef
Author: Jens Axboe
Date: Mon Dec 18 15:40:44 2017 +0800
block: fix blk\_rq\_append\_bio
commit 0abc2a10389f0c9070f76ca906c7382788036b93 upstream.
Commit caa4b02476e3(blk-map: call blk\_queue\_bounce from blk\_rq\_append\_bio)
moves blk\_queue\_bounce() into blk\_rq\_append\_bio(), but don't consider
the fact that the bounced bio becomes invisible to caller since the
parameter type is 'struct bio \*'. Make it a pointer to a pointer to
a bio, so the caller sees the right bio also after a bounce.
Fixes: caa4b02476e3 ("blk-map: call blk\_queue\_bounce from blk\_rq\_append\_bio")
Cc: Christoph Hellwig
Reported-by: Michele Ballabio
(handling failure of blk\_rq\_append\_bio(), only call bio\_get() after
blk\_rq\_append\_bio() returns OK)
Tested-by: Michele Ballabio
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 0c688c288f8e82fdb5f3e0d0f3b2b1f3498ad187
Author: Joel Fernandes
Date: Thu Dec 21 02:22:45 2017 +0100
cpufreq: schedutil: Use idle\_calls counter of the remote CPU
commit 466a2b42d67644447a1765276259a3ea5531ddff upstream.
Since the recent remote cpufreq callback work, its possible that a cpufreq
update is triggered from a remote CPU. For single policies however, the current
code uses the local CPU when trying to determine if the remote sg\_cpu entered
idle or is busy. This is incorrect. To remedy this, compare with the nohz tick
idle\_calls counter of the remote CPU.
Fixes: 674e75411fc2 (sched: cpufreq: Allow remote cpufreq callbacks)
Acked-by: Viresh Kumar
Acked-by: Peter Zijlstra (Intel)
Signed-off-by: Joel Fernandes
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 9c5ee053a67eb374878b20eab7d16feb2a87a851
Author: Takashi Iwai
Date: Wed Dec 27 08:53:59 2017 +0100
ALSA: hda - Fix missing COEF init for ALC225/295/299
commit 44be77c590f381bc629815ac789b8b15ecc4ddcf upstream.
There was a long-standing problem on HP Spectre X360 with Kabylake
where it lacks of the front speaker output in some situations. Also
there are other products showing the similar behavior. The culprit
seems to be the missing COEF setup on ALC codecs, ALC225/295/299,
which are all compatible.
This patch adds the proper COEF setup (to initialize idx 0x67 / bits
0x3000) for addressing the issue.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=195457
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 9fcd2ae2abb5efb67f331f567ed22a7305461a80
Author: Hui Wang
Date: Fri Dec 22 11:17:45 2017 +0800
ALSA: hda - fix headset mic detection issue on a Dell machine
commit 285d5ddcffafa5d5e68c586f4c9eaa8b24a2897d upstream.
It has the codec alc256, and add its pin definition to pin quirk
table to let it apply ALC255\_FIXUP\_DELL1\_MIC\_NO\_PRESENCE.
Signed-off-by: Hui Wang
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 3d858b85e376b08db9c9de42aa4e0b9b47fac466
Author: Hui Wang
Date: Fri Dec 22 11:17:46 2017 +0800
ALSA: hda - change the location for one mic on a Lenovo machine
commit 8da5bbfc7cbba909f4f32d5e1dda3750baa5d853 upstream.
There are two front mics on this machine, and current driver assign
the same name Mic to both of them, but pulseaudio can't handle them.
As a workaround, we change the location for one of them, then the
driver will assign "Front Mic" and "Mic" for them.
Signed-off-by: Hui Wang
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 2845bbd1ef1f574ce2bbd7a7f6feab04ca137cf3
Author: Hui Wang
Date: Fri Dec 22 11:17:44 2017 +0800
ALSA: hda - Add MIC\_NO\_PRESENCE fixup for 2 HP machines
commit 322f74ede933b3e2cb78768b6a6fdbfbf478a0c1 upstream.
There is a headset jack on the front panel, when we plug a headset
into it, the headset mic can't trigger unsol events, and
read\_pin\_sense() can't detect its presence too. So add this fixup
to fix this issue.
Signed-off-by: Hui Wang
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 056305595a9940005ff34d0a67e2a2b231d162b7
Author: Takashi Iwai
Date: Fri Dec 22 10:45:07 2017 +0100
ALSA: hda: Drop useless WARN\_ON()
commit a36c2638380c0a4676647a1f553b70b20d3ebce1 upstream.
Since the commit 97cc2ed27e5a ("ALSA: hda - Fix yet another i915
pointer leftover in error path") cleared hdac\_acomp pointer, the
WARN\_ON() non-NULL check in snd\_hdac\_i915\_register\_notifier() may give
a false-positive warning, as the function gets called no matter
whether the component is registered or not. For fixing it, let's get
rid of the spurious WARN\_ON().
Fixes: 97cc2ed27e5a ("ALSA: hda - Fix yet another i915 pointer leftover in error path")
Reported-by: Kouta Okamoto
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit af0dc162f644335c50e2384ba485e4aa79b25e28
Author: Moni Shoua
Date: Sun Dec 24 13:54:58 2017 +0200
IB/core: Verify that QP is security enabled in create and destroy
commit 4a50881bbac309e6f0684816a180bc3c14e1485d upstream.
The XRC target QP create flow sets up qp\_sec only if there is an IB link with
LSM security enabled. However, several other related uAPI entry points blindly
follow the qp\_sec NULL pointer, resulting in a possible oops.
Check for NULL before using qp\_sec.
Fixes: d291f1a65232 ("IB/core: Enforce PKey security on QPs")
Reviewed-by: Daniel Jurgens
Signed-off-by: Moni Shoua
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 5f3b36984c7b15e9d6ace5fc836b3474a8bb4213
Author: Moni Shoua
Date: Sun Dec 24 13:54:57 2017 +0200
IB/uverbs: Fix command checking as part of ib\_uverbs\_ex\_modify\_qp()
commit 05d14e7b0c138cb07ba30e464f47b39434f3fdef upstream.
If the input command length is larger than the kernel supports an error should
be returned in case the unsupported bytes are not cleared, instead of the
other way aroudn. This matches what all other callers of ib\_is\_udata\_cleared
do and will avoid user ABI problems in the future.
Fixes: 189aba99e700 ("IB/uverbs: Extend modify\_qp and support packet pacing")
Reviewed-by: Yishai Hadas
Signed-off-by: Moni Shoua
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit d471542b9f0706b9d37dba40bc02ef27b05a6bc1
Author: Majd Dibbiny
Date: Sun Dec 24 13:54:56 2017 +0200
IB/mlx5: Serialize access to the VMA list
commit ad9a3668a434faca1339789ed2f043d679199309 upstream.
User-space applications can do mmap and munmap directly at
any time.
Since the VMA list is not protected with a mutex, concurrent
accesses to the VMA list from the mmap and munmap can cause
data corruption. Add a mutex around the list.
Fixes: 7c2344c3bbf9 ("IB/mlx5: Implements disassociate\_ucontext API")
Reviewed-by: Yishai Hadas
Signed-off-by: Majd Dibbiny
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 907145e68e21947ec76d99827ab4eeeecff4a34c
Author: Michael J. Ruhl
Date: Fri Dec 22 08:47:20 2017 -0800
IB/hfi: Only read capability registers if the capability exists
commit 4c009af473b2026caaa26107e34d7cc68dad7756 upstream.
During driver init, various registers are saved to allow restoration
after an FLR or gen3 bump. Some of these registers are not available
in some circumstances (i.e. Virtual machines).
This bug makes the driver unusable when the PCI device is passed into
a VM, it fails during probe.
Delete unnecessary register read/write, and only access register if
the capability exists.
Fixes: a618b7e40af2 ("IB/hfi1: Move saving PCI values to a separate function")
Reviewed-by: Mike Marciniszyn
Signed-off-by: Michael J. Ruhl
Signed-off-by: Dennis Dalessandro
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 074e2892a4205b0c88742d9d000c0c19e0b98244
Author: Christophe Leroy
Date: Fri Dec 15 15:02:33 2017 +0100
gpio: fix "gpio-line-names" property retrieval
commit 822703354774ec935169cbbc8d503236bcb54fda upstream.
Following commit 9427ecbed46cc ("gpio: Rework of\_gpiochip\_set\_names()
to use device property accessors"), "gpio-line-names" DT property is
not retrieved anymore when chip->parent is not set by the driver.
This is due to OF based property reads having been replaced by device
based property reads.
This patch fixes that by making use of
fwnode\_property\_read\_string\_array() instead of
device\_property\_read\_string\_array() and handing over either
of\_fwnode\_handle(chip->of\_node) or dev\_fwnode(chip->parent)
to that function.
Fixes: 9427ecbed46cc ("gpio: Rework of\_gpiochip\_set\_names() to use device property accessors")
Signed-off-by: Christophe Leroy
Acked-by: Mika Westerberg
Signed-off-by: Linus Walleij
Signed-off-by: Greg Kroah-Hartman
commit 077cb91c9fc35d638e014374491ac6a9f41b19ba
Author: Andrew F. Davis
Date: Wed Nov 29 15:32:46 2017 -0600
ASoC: tlv320aic31xx: Fix GPIO1 register definition
commit 737e0b7b67bdfe24090fab2852044bb283282fc5 upstream.
GPIO1 control register is number 51, fix this here.
Fixes: bafcbfe429eb ("ASoC: tlv320aic31xx: Make the register values human readable")
Signed-off-by: Andrew F. Davis
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 314d9cdf7e0fb83781e8fae836044856a449ffe0
Author: Johan Hovold
Date: Mon Nov 13 12:12:56 2017 +0100
ASoC: twl4030: fix child-node lookup
commit 15f8c5f2415bfac73f33a14bcd83422bcbfb5298 upstream.
Fix child-node lookup during probe, which ended up searching the whole
device tree depth-first starting at the parent rather than just matching
on its children.
To make things worse, the parent codec node was also prematurely freed,
while the child node was leaked.
Fixes: 2d6d649a2e0f ("ASoC: twl4030: Support for DT booted kernel")
Signed-off-by: Johan Hovold
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit fe9f7bd45c01b4bc328d2442136c5456608f1637
Author: Maciej S. Szmigiero
Date: Mon Nov 20 23:14:55 2017 +0100
ASoC: fsl\_ssi: AC'97 ops need regmap, clock and cleaning up on failure
commit 695b78b548d8a26288f041e907ff17758df9e1d5 upstream.
AC'97 ops (register read / write) need SSI regmap and clock, so they have
to be set after them.
We also need to set these ops back to NULL if we fail the probe.
Signed-off-by: Maciej S. Szmigiero
Acked-by: Nicolin Chen
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit c7d231ca5e0bf38f6920e92c97feadede0978d1a
Author: Johan Hovold
Date: Mon Nov 13 12:12:55 2017 +0100
ASoC: da7218: fix fix child-node lookup
commit bc6476d6c1edcb9b97621b5131bd169aa81f27db upstream.
Fix child-node lookup during probe, which ended up searching the whole
device tree depth-first starting at the parent rather than just matching
on its children.
To make things worse, the parent codec node was also prematurely freed.
Fixes: 4d50934abd22 ("ASoC: da7218: Add da7218 codec driver")
Signed-off-by: Johan Hovold
Acked-by: Adam Thomson
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 308ddf2afe83994719006200204dc819fcbd9e7a
Author: Ben Hutchings
Date: Fri Dec 8 16:15:20 2017 +0000
ASoC: wm\_adsp: Fix validation of firmware and coeff lengths
commit 50dd2ea8ef67a1617e0c0658bcbec4b9fb03b936 upstream.
The checks for whether another region/block header could be present
are subtracting the size from the current offset. Obviously we should
instead subtract the offset from the size.
The checks for whether the region/block data fit in the file are
adding the data size to the current offset and header size, without
checking for integer overflow. Rearrange these so that overflow is
impossible.
Signed-off-by: Ben Hutchings
Acked-by: Charles Keepax
Tested-by: Charles Keepax
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 23ef17a49f1edfa2c4b437c03b1c0d4da1d116d2
Author: Srinivas Kandagatla
Date: Thu Nov 30 10:15:02 2017 +0000
ASoC: codecs: msm8916-wcd: Fix supported formats
commit 51f493ae71adc2c49a317a13c38e54e1cdf46005 upstream.
This codec is configurable for only 16 bit and 32 bit samples, so reflect
this in the supported formats also remove 24bit sample from supported list.
Signed-off-by: Srinivas Kandagatla
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 2aec84963e5edf3c463c37da0a94fb4c12c2d2c2
Author: Steve Wise
Date: Mon Dec 18 13:10:00 2017 -0800
iw\_cxgb4: Only validate the MSN for successful completions
commit f55688c45442bc863f40ad678c638785b26cdce6 upstream.
If the RECV CQE is in error, ignore the MSN check. This was causing
recvs that were flushed into the sw cq to be completed with the wrong
status (BAD\_MSN instead of FLUSHED).
Signed-off-by: Steve Wise
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 0aea6fb0e777bb89437c8883c289e05e1f153ec8
Author: Steven Rostedt (VMware)
Date: Fri Dec 22 21:19:29 2017 -0500
ring-buffer: Do no reuse reader page if still in use
commit ae415fa4c5248a8cf4faabd5a3c20576cb1ad607 upstream.
To free the reader page that is allocated with ring\_buffer\_alloc\_read\_page(),
ring\_buffer\_free\_read\_page() must be called. For faster performance, this
page can be reused by the ring buffer to avoid having to free and allocate
new pages.
The issue arises when the page is used with a splice pipe into the
networking code. The networking code may up the page counter for the page,
and keep it active while sending it is queued to go to the network. The
incrementing of the page ref does not prevent it from being reused in the
ring buffer, and this can cause the page that is being sent out to the
network to be modified before it is sent by reading new data.
Add a check to the page ref counter, and only reuse the page if it is not
being used anywhere else.
Fixes: 73a757e63114d ("ring-buffer: Return reader page back into existing ring buffer")
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit 66f833dbed02d39c44440b6b35ac088655c32edb
Author: Steven Rostedt (VMware)
Date: Fri Dec 22 20:32:35 2017 -0500
ring-buffer: Mask out the info bits when returning buffer page length
commit 45d8b80c2ac5d21cd1e2954431fb676bc2b1e099 upstream.
Two info bits were added to the "commit" part of the ring buffer data page
when returned to be consumed. This was to inform the user space readers that
events have been missed, and that the count may be stored at the end of the
page.
What wasn't handled, was the splice code that actually called a function to
return the length of the data in order to zero out the rest of the page
before sending it up to user space. These data bits were returned with the
length making the value negative, and that negative value was not checked.
It was compared to PAGE\_SIZE, and only used if the size was less than
PAGE\_SIZE. Luckily PAGE\_SIZE is unsigned long which made the compare an
unsigned compare, meaning the negative size value did not end up causing a
large portion of memory to be randomly zeroed out.
Fixes: 66a8cb95ed040 ("ring-buffer: Add place holder recording of dropped events")
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit e08acdb9620bcd4c55128cad07e625cd1825e533
Author: Thomas Gleixner
Date: Fri Dec 15 20:35:11 2017 +0100
x86/ldt: Make the LDT mapping RO
commit 9f5cb6b32d9e0a3a7453222baaf15664d92adbf2 upstream.
Now that the LDT mapping is in a known area when PAGE\_TABLE\_ISOLATION is
enabled its a primary target for attacks, if a user space interface fails
to validate a write address correctly. That can never happen, right?
The SDM states:
If the segment descriptors in the GDT or an LDT are placed in ROM, the
processor can enter an indefinite loop if software or the processor
attempts to update (write to) the ROM-based segment descriptors. To
prevent this problem, set the accessed bits for all segment descriptors
placed in a ROM. Also, remove operating-system or executive code that
attempts to modify segment descriptors located in ROM.
So its a valid approach to set the ACCESS bit when setting up the LDT entry
and to map the table RO. Fixup the selftest so it can handle that new mode.
Remove the manual ACCESS bit setter in set\_tls\_desc() as this is now
pointless. Folded the patch from Peter Ziljstra.
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 704cfa04dde3a35cde59a67cafbcaeacbb3a76c8
Author: Thomas Gleixner
Date: Mon Dec 4 15:08:06 2017 +0100
x86/mm/dump\_pagetables: Allow dumping current pagetables
commit a4b51ef6552c704764684cef7e753162dc87c5fa upstream.
Add two debugfs files which allow to dump the pagetable of the current
task.
current\_kernel dumps the regular page table. This is the page table which
is normally shared between kernel and user space. If kernel page table
isolation is enabled this is the kernel space mapping.
If kernel page table isolation is enabled the second file, current\_user,
dumps the user space page table.
These files allow to verify the resulting page tables for page table
isolation, but even in the normal case its useful to be able to inspect
user space page tables of current for debugging purposes.
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Cc: linux-mm@kvack.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 27e16c33bb796cceb92e339998d30145076b43cd
Author: Thomas Gleixner
Date: Mon Dec 4 15:08:05 2017 +0100
x86/mm/dump\_pagetables: Check user space page table for WX pages
commit b4bf4f924b1d7bade38fd51b2e401d20d0956e4d upstream.
ptdump\_walk\_pgd\_level\_checkwx() checks the kernel page table for WX pages,
but does not check the PAGE\_TABLE\_ISOLATION user space page table.
Restructure the code so that dmesg output is selected by an explicit
argument and not implicit via checking the pgd argument for !NULL.
Add the check for the user space page table.
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Cc: linux-mm@kvack.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit dfa58126d7630c0db0b64fa7bd15741293b517b5
Author: Borislav Petkov
Date: Mon Dec 4 15:08:04 2017 +0100
x86/mm/dump\_pagetables: Add page table directory to the debugfs VFS hierarchy
commit 75298aa179d56cd64f54e58a19fffc8ab922b4c0 upstream.
The upcoming support for dumping the kernel and the user space page tables
of the current process would create more random files in the top level
debugfs directory.
Add a page table directory and move the existing file to it.
Signed-off-by: Borislav Petkov
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 3dfd9fd8d897214b1a880c7fd8ed36b88faa1c02
Author: Dave Hansen
Date: Mon Dec 4 15:08:03 2017 +0100
x86/mm/pti: Add Kconfig
commit 385ce0ea4c078517fa51c261882c4e72fba53005 upstream.
Finally allow CONFIG\_PAGE\_TABLE\_ISOLATION to be enabled.
PARAVIRT generally requires that the kernel not manage its own page tables.
It also means that the hypervisor and kernel must agree wholeheartedly
about what format the page tables are in and what they contain.
PAGE\_TABLE\_ISOLATION, unfortunately, changes the rules and they
can not be used together.
I've seen conflicting feedback from maintainers lately about whether they
want the Kconfig magic to go first or last in a patch series. It's going
last here because the partially-applied series leads to kernels that can
not boot in a bunch of cases. I did a run through the entire series with
CONFIG\_PAGE\_TABLE\_ISOLATION=y to look for build errors, though.
[ tglx: Removed SMP and !PARAVIRT dependencies as they not longer exist ]
Signed-off-by: Dave Hansen
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Cc: linux-mm@kvack.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 33d9d7836f0fa02777667d72bc815c12fbe61cac
Author: Vlastimil Babka
Date: Tue Dec 19 22:33:46 2017 +0100
x86/dumpstack: Indicate in Oops whether PTI is configured and enabled
commit 5f26d76c3fd67c48806415ef8b1116c97beff8ba upstream.
CONFIG\_PAGE\_TABLE\_ISOLATION is relatively new and intrusive feature that may
still have some corner cases which could take some time to manifest and be
fixed. It would be useful to have Oops messages indicate whether it was
enabled for building the kernel, and whether it was disabled during boot.
Example of fully enabled:
Oops: 0001 [#1] SMP PTI
Example of enabled during build, but disabled during boot:
Oops: 0001 [#1] SMP NOPTI
We can decide to remove this after the feature has been tested in the field
long enough.
[ tglx: Made it use boot\_cpu\_has() as requested by Borislav ]
Signed-off-by: Vlastimil Babka
Signed-off-by: Thomas Gleixner
Reviewed-by: Eduardo Valentin
Acked-by: Dave Hansen
Cc: Andy Lutomirski
Cc: Andy Lutomirsky
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: bpetkov@suse.de
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: jkosina@suse.cz
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit ef4b38472d6b1bf587554dfc7d5ab7abc835c1a5
Author: Peter Zijlstra
Date: Tue Dec 5 13:34:53 2017 +0100
x86/mm: Clarify the whole ASID/kernel PCID/user PCID naming
commit 0a126abd576ebc6403f063dbe20cf7416c9d9393 upstream.
Ideally we'd also use sparse to enforce this separation so it becomes much
more difficult to mess up.
Signed-off-by: Peter Zijlstra (Intel)
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Cc: linux-mm@kvack.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit c5548af97ae98f9d9e6ae5a9a005e605bd3c06b5
Author: Dave Hansen
Date: Mon Dec 4 15:08:01 2017 +0100
x86/mm: Use INVPCID for \_\_native\_flush\_tlb\_single()
commit 6cff64b86aaaa07f89f50498055a20e45754b0c1 upstream.
This uses INVPCID to shoot down individual lines of the user mapping
instead of marking the entire user map as invalid. This
could/might/possibly be faster.
This for sure needs tlb\_single\_page\_flush\_ceiling to be redetermined;
esp. since INVPCID is \_slow\_.
A detailed performance analysis is available here:
https://lkml.kernel.org/r/3062e486-3539-8a1f-5724-16199420be71@intel.com
[ Peterz: Split out from big combo patch ]
Signed-off-by: Dave Hansen
Signed-off-by: Peter Zijlstra (Intel)
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 36a72ab52c8d969a7a302082f52731c1be0e9ada
Author: Peter Zijlstra
Date: Mon Dec 4 15:08:00 2017 +0100
x86/mm: Optimize RESTORE\_CR3
commit 21e94459110252d41b45c0c8ba50fd72a664d50c upstream.
Most NMI/paranoid exceptions will not in fact change pagetables and would
thus not require TLB flushing, however RESTORE\_CR3 uses flushing CR3
writes.
Restores to kernel PCIDs can be NOFLUSH, because we explicitly flush the
kernel mappings and now that we track which user PCIDs need flushing we can
avoid those too when possible.
This does mean RESTORE\_CR3 needs an additional scratch\_reg, luckily both
sites have plenty available.
Signed-off-by: Peter Zijlstra (Intel)
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit b63812b81349e5d1a35107e2464547187bc25a61
Author: Peter Zijlstra
Date: Mon Dec 4 15:07:59 2017 +0100
x86/mm: Use/Fix PCID to optimize user/kernel switches
commit 6fd166aae78c0ab738d49bda653cbd9e3b1491cf upstream.
We can use PCID to retain the TLBs across CR3 switches; including those now
part of the user/kernel switch. This increases performance of kernel
entry/exit at the cost of more expensive/complicated TLB flushing.
Now that we have two address spaces, one for kernel and one for user space,
we need two PCIDs per mm. We use the top PCID bit to indicate a user PCID
(just like we use the PFN LSB for the PGD). Since we do TLB invalidation
from kernel space, the existing code will only invalidate the kernel PCID,
we augment that by marking the corresponding user PCID invalid, and upon
switching back to userspace, use a flushing CR3 write for the switch.
In order to access the user\_pcid\_flush\_mask we use PER\_CPU storage, which
means the previously established SWAPGS vs CR3 ordering is now mandatory
and required.
Having to do this memory access does require additional registers, most
sites have a functioning stack and we can spill one (RAX), sites without
functional stack need to otherwise provide the second scratch register.
Note: PCID is generally available on Intel Sandybridge and later CPUs.
Note: Up until this point TLB flushing was broken in this series.
Based-on-code-from: Dave Hansen
Signed-off-by: Peter Zijlstra (Intel)
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 954339c41cceca991c0aec6dd3b7e164c5b9f48b
Author: Dave Hansen
Date: Mon Dec 4 15:07:58 2017 +0100
x86/mm: Abstract switching CR3
commit 48e111982cda033fec832c6b0592c2acedd85d04 upstream.
In preparation to adding additional PCID flushing, abstract the
loading of a new ASID into CR3.
[ PeterZ: Split out from big combo patch ]
Signed-off-by: Dave Hansen
Signed-off-by: Peter Zijlstra (Intel)
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit c796e2324094f098575e47ec6d19f22cc4a4f9b9
Author: Dave Hansen
Date: Mon Dec 4 15:07:57 2017 +0100
x86/mm: Allow flushing for future ASID switches
commit 2ea907c4fe7b78e5840c1dc07800eae93248cad1 upstream.
If changing the page tables in such a way that an invalidation of all
contexts (aka. PCIDs / ASIDs) is required, they can be actively invalidated
by:
1. INVPCID for each PCID (works for single pages too).
2. Load CR3 with each PCID without the NOFLUSH bit set
3. Load CR3 with the NOFLUSH bit set for each and do INVLPG for each address.
But, none of these are really feasible since there are ~6 ASIDs (12 with
PAGE\_TABLE\_ISOLATION) at the time that invalidation is required.
Instead of actively invalidating them, invalidate the \*current\* context and
also mark the cpu\_tlbstate \_quickly\_ to indicate future invalidation to be
required.
At the next context-switch, look for this indicator
('invalidate\_other' being set) invalidate all of the
cpu\_tlbstate.ctxs[] entries.
This ensures that any future context switches will do a full flush
of the TLB, picking up the previous changes.
[ tglx: Folded more fixups from Peter ]
Signed-off-by: Dave Hansen
Signed-off-by: Peter Zijlstra (Intel)
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 9617ee896217558a2488b6dc71968a4489fb18b6
Author: Andy Lutomirski
Date: Tue Dec 12 07:56:42 2017 -0800
x86/pti: Map the vsyscall page if needed
commit 85900ea51577e31b186e523c8f4e068c79ecc7d3 upstream.
Make VSYSCALLs work fully in PTI mode by mapping them properly to the user
space visible page tables.
[ tglx: Hide unused functions (Patch by Arnd Bergmann) ]
Signed-off-by: Andy Lutomirski
Signed-off-by: Thomas Gleixner
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Kees Cook
Cc: Linus Torvalds
Cc: Peter Zijlstra
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 7aef823ee7e9a74de0d2665d116bde557aa134ca
Author: Andy Lutomirski
Date: Tue Dec 12 07:56:45 2017 -0800
x86/pti: Put the LDT in its own PGD if PTI is on
commit f55f0501cbf65ec41cca5058513031b711730b1d upstream.
With PTI enabled, the LDT must be mapped in the usermode tables somewhere.
The LDT is per process, i.e. per mm.
An earlier approach mapped the LDT on context switch into a fixmap area,
but that's a big overhead and exhausted the fixmap space when NR\_CPUS got
big.
Take advantage of the fact that there is an address space hole which
provides a completely unused pgd. Use this pgd to manage per-mm LDT
mappings.
This has a down side: the LDT isn't (currently) randomized, and an attack
that can write the LDT is instant root due to call gates (thanks, AMD, for
leaving call gates in AMD64 but designing them wrong so they're only useful
for exploits). This can be mitigated by making the LDT read-only or
randomizing the mapping, either of which is strightforward on top of this
patch.
This will significantly slow down LDT users, but that shouldn't matter for
important workloads -- the LDT is only used by DOSEMU(2), Wine, and very
old libc implementations.
[ tglx: Cleaned it up. ]
Signed-off-by: Andy Lutomirski
Signed-off-by: Thomas Gleixner
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: Dave Hansen
Cc: David Laight
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Kees Cook
Cc: Kirill A. Shutemov
Cc: Linus Torvalds
Cc: Peter Zijlstra
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit c125107490107fc4ce6bad0d9b45fd5e33bfa3f3
Author: Andy Lutomirski
Date: Tue Dec 12 07:56:44 2017 -0800
x86/mm/64: Make a full PGD-entry size hole in the memory map
commit 9f449772a3106bcdd4eb8fdeb281147b0e99fb30 upstream.
Shrink vmalloc space from 16384TiB to 12800TiB to enlarge the hole starting
at 0xff90000000000000 to be a full PGD entry.
A subsequent patch will use this hole for the pagetable isolation LDT
alias.
Signed-off-by: Andy Lutomirski
Signed-off-by: Thomas Gleixner
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: Dave Hansen
Cc: David Laight
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Kees Cook
Cc: Kirill A. Shutemov
Cc: Linus Torvalds
Cc: Peter Zijlstra
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 8b82023b7fc2c3734aae23bc03ed5937e67f7388
Author: Hugh Dickins
Date: Mon Dec 4 15:07:50 2017 +0100
x86/events/intel/ds: Map debug buffers in cpu\_entry\_area
commit c1961a4631daef4aeabee8e368b1b13e8f173c91 upstream.
The BTS and PEBS buffers both have their virtual addresses programmed into
the hardware. This means that any access to them is performed via the page
tables. The times that the hardware accesses these are entirely dependent
on how the performance monitoring hardware events are set up. In other
words, there is no way for the kernel to tell when the hardware might
access these buffers.
To avoid perf crashes, place 'debug\_store' allocate pages and map them into
the cpu\_entry\_area.
The PEBS fixup buffer does not need this treatment.
[ tglx: Got rid of the kaiser\_add\_mapping() complication ]
Signed-off-by: Hugh Dickins
Signed-off-by: Dave Hansen
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit e0eb34665d2eecddfa7a1810b76fae52313c1286
Author: Thomas Gleixner
Date: Mon Dec 4 15:07:49 2017 +0100
x86/cpu\_entry\_area: Add debugstore entries to cpu\_entry\_area
commit 10043e02db7f8a4161f76434931051e7d797a5f6 upstream.
The Intel PEBS/BTS debug store is a design trainwreck as it expects virtual
addresses which must be visible in any execution context.
So it is required to make these mappings visible to user space when kernel
page table isolation is active.
Provide enough room for the buffer mappings in the cpu\_entry\_area so the
buffers are available in the user space visible page tables.
At the point where the kernel side entry area is populated there is no
buffer available yet, but the kernel PMD must be populated. To achieve this
set the entries for these buffers to non present.
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit d230c1917f57c3beee2e0204a4c8c58999758b95
Author: Andy Lutomirski
Date: Fri Dec 15 22:08:18 2017 +0100
x86/mm/pti: Map ESPFIX into user space
commit 4b6bbe95b87966ba08999574db65c93c5e925a36 upstream.
Map the ESPFIX pages into user space when PTI is enabled.
Signed-off-by: Andy Lutomirski
Signed-off-by: Thomas Gleixner
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Kees Cook
Cc: Linus Torvalds
Cc: Peter Zijlstra
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit e08aa2f1988a7d4ded9c9674fe18857ee5c6fc53
Author: Thomas Gleixner
Date: Mon Dec 4 15:07:47 2017 +0100
x86/mm/pti: Share entry text PMD
commit 6dc72c3cbca0580642808d677181cad4c6433893 upstream.
Share the entry text PMD of the kernel mapping with the user space
mapping. If large pages are enabled this is a single PMD entry and at the
point where it is copied into the user page table the RW bit has not been
cleared yet. Clear it right away so the user space visible map becomes RX.
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 088baf5de12eb7660e20f3f4efc1cf270acff5f4
Author: Thomas Gleixner
Date: Mon Dec 4 15:07:46 2017 +0100
x86/entry: Align entry text section to PMD boundary
commit 2f7412ba9c6af5ab16bdbb4a3fdb1dcd2b4fd3c2 upstream.
The (irq)entry text must be visible in the user space page tables. To allow
simple PMD based sharing, make the entry text PMD aligned.
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit fb9dfabb6e803801b9e88ee6c0d56d3b54531b95
Author: Andy Lutomirski
Date: Mon Dec 4 15:07:45 2017 +0100
x86/mm/pti: Share cpu\_entry\_area with user space page tables
commit f7cfbee91559ca7e3e961a00ffac921208a115ad upstream.
Share the cpu entry area so the user space and kernel space page tables
have the same P4D page.
Signed-off-by: Andy Lutomirski
Signed-off-by: Thomas Gleixner
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 35531133abf37ea2f00673a0953e397c286f7c7c
Author: Thomas Gleixner
Date: Mon Dec 4 15:07:43 2017 +0100
x86/mm/pti: Force entry through trampoline when PTI active
commit 8d4b067895791ab9fdb1aadfc505f64d71239dd2 upstream.
Force the entry through the trampoline only when PTI is active. Otherwise
go through the normal entry code.
Signed-off-by: Thomas Gleixner
Reviewed-by: Borislav Petkov
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 9f006b0247234e6448e5fd04b5bcb0c56c968698
Author: Andy Lutomirski
Date: Mon Dec 4 15:07:42 2017 +0100
x86/mm/pti: Add functions to clone kernel PMDs
commit 03f4424f348e8be95eb1bbeba09461cd7b867828 upstream.
Provide infrastructure to:
- find a kernel PMD for a mapping which must be visible to user space for
the entry/exit code to work.
- walk an address range and share the kernel PMD with it.
This reuses a small part of the original KAISER patches to populate the
user space page table.
[ tglx: Made it universally usable so it can be used for any kind of shared
mapping. Add a mechanism to clear specific bits in the user space
visible PMD entry. Folded Andys simplifactions ]
Originally-by: Dave Hansen
Signed-off-by: Andy Lutomirski
Signed-off-by: Thomas Gleixner
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 1bcd98df0f50b28a5fb40eeb2cb7a17a02820232
Author: Dave Hansen
Date: Mon Dec 4 15:07:40 2017 +0100
x86/mm/pti: Populate user PGD
commit fc2fbc8512ed08d1de7720936fd7d2e4ce02c3a2 upstream.
In clone\_pgd\_range() copy the init user PGDs which cover the kernel half of
the address space, so a process has all the required kernel mappings
visible.
[ tglx: Split out from the big kaiser dump and folded Andys simplification ]
Signed-off-by: Dave Hansen
Signed-off-by: Thomas Gleixner
Reviewed-by: Borislav Petkov
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 61fd4049e6760eb8832d4e0bec592d8a810b270f
Author: Dave Hansen
Date: Mon Dec 4 15:07:39 2017 +0100
x86/mm/pti: Allocate a separate user PGD
commit d9e9a6418065bb376e5de8d93ce346939b9a37a6 upstream.
Kernel page table isolation requires to have two PGDs. One for the kernel,
which contains the full kernel mapping plus the user space mapping and one
for user space which contains the user space mappings and the minimal set
of kernel mappings which are required by the architecture to be able to
transition from and to user space.
Add the necessary preliminaries.
[ tglx: Split out from the big kaiser dump. EFI fixup from Kirill ]
Signed-off-by: Dave Hansen
Signed-off-by: Thomas Gleixner
Reviewed-by: Borislav Petkov
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit ffcb80ad79e8c3d87b43f2c9ee4b9170c7ec12ea
Author: Dave Hansen
Date: Mon Dec 4 15:07:38 2017 +0100
x86/mm/pti: Allow NX poison to be set in p4d/pgd
commit 1c4de1ff4fe50453b968579ee86fac3da80dd783 upstream.
With PAGE\_TABLE\_ISOLATION the user portion of the kernel page tables is
poisoned with the NX bit so if the entry code exits with the kernel page
tables selected in CR3, userspace crashes.
But doing so trips the p4d/pgd\_bad() checks. Make sure it does not do
that.
Signed-off-by: Dave Hansen
Signed-off-by: Thomas Gleixner
Reviewed-by: Borislav Petkov
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Cc: linux-kernel@vger.kernel.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit b9feab7dcf86df222a405df3e0d95b85741a2d73
Author: Dave Hansen
Date: Mon Dec 4 15:07:37 2017 +0100
x86/mm/pti: Add mapping helper functions
commit 61e9b3671007a5da8127955a1a3bda7e0d5f42e8 upstream.
Add the pagetable helper functions do manage the separate user space page
tables.
[ tglx: Split out from the big combo kaiser patch. Folded Andys
simplification and made it out of line as Boris suggested ]
Signed-off-by: Dave Hansen
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Cc: linux-kernel@vger.kernel.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 8a2533407f4d60a43effadf7b62825d213cd678c
Author: Borislav Petkov
Date: Tue Dec 12 14:39:52 2017 +0100
x86/pti: Add the pti= cmdline option and documentation
commit 41f4c20b57a4890ea7f56ff8717cc83fefb8d537 upstream.
Keep the "nopti" optional for traditional reasons.
[ tglx: Don't allow force on when running on XEN PV and made 'on'
printout conditional ]
Requested-by: Linus Torvalds
Signed-off-by: Borislav Petkov
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Andy Lutomirsky
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Link: https://lkml.kernel.org/r/20171212133952.10177-1-bp@alien8.de
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit a4b07fb4e5a6aef3b87a6540cc04cf972525a723
Author: Thomas Gleixner
Date: Mon Dec 4 15:07:36 2017 +0100
x86/mm/pti: Add infrastructure for page table isolation
commit aa8c6248f8c75acfd610fe15d8cae23cf70d9d09 upstream.
Add the initial files for kernel page table isolation, with a minimal init
function and the boot time detection for this misfeature.
Signed-off-by: Thomas Gleixner
Reviewed-by: Borislav Petkov
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit f3d2b767e912b11d146b9c9922bf28efeda0cdc7
Author: Dave Hansen
Date: Mon Dec 4 15:07:35 2017 +0100
x86/mm/pti: Prepare the x86/entry assembly code for entry/exit CR3 switching
commit 8a09317b895f073977346779df52f67c1056d81d upstream.
PAGE\_TABLE\_ISOLATION needs to switch to a different CR3 value when it
enters the kernel and switch back when it exits. This essentially needs to
be done before leaving assembly code.
This is extra challenging because the switching context is tricky: the
registers that can be clobbered can vary. It is also hard to store things
on the stack because there is an established ABI (ptregs) or the stack is
entirely unsafe to use.
Establish a set of macros that allow changing to the user and kernel CR3
values.
Interactions with SWAPGS:
Previous versions of the PAGE\_TABLE\_ISOLATION code relied on having
per-CPU scratch space to save/restore a register that can be used for the
CR3 MOV. The %GS register is used to index into our per-CPU space, so
SWAPGS \*had\* to be done before the CR3 switch. That scratch space is gone
now, but the semantic that SWAPGS must be done before the CR3 MOV is
retained. This is good to keep because it is not that hard to do and it
allows to do things like add per-CPU debugging information.
What this does in the NMI code is worth pointing out. NMIs can interrupt
\*any\* context and they can also be nested with NMIs interrupting other
NMIs. The comments below ".Lnmi\_from\_kernel" explain the format of the
stack during this situation. Changing the format of this stack is hard.
Instead of storing the old CR3 value on the stack, this depends on the
\*regular\* register save/restore mechanism and then uses %r14 to keep CR3
during the NMI. It is callee-saved and will not be clobbered by the C NMI
handlers that get called.
[ PeterZ: ESPFIX optimization ]
Based-on-code-from: Andy Lutomirski
Signed-off-by: Dave Hansen
Signed-off-by: Thomas Gleixner
Reviewed-by: Borislav Petkov
Reviewed-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Cc: linux-mm@kvack.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit acfee9b8e27e7b5d69276e8b804fed7ff5071c10
Author: Dave Hansen
Date: Mon Dec 4 15:07:34 2017 +0100
x86/mm/pti: Disable global pages if PAGE\_TABLE\_ISOLATION=y
commit c313ec66317d421fb5768d78c56abed2dc862264 upstream.
Global pages stay in the TLB across context switches. Since all contexts
share the same kernel mapping, these mappings are marked as global pages
so kernel entries in the TLB are not flushed out on a context switch.
But, even having these entries in the TLB opens up something that an
attacker can use, such as the double-page-fault attack:
http://www.ieee-security.org/TC/SP2013/papers/4977a191.pdf
That means that even when PAGE\_TABLE\_ISOLATION switches page tables
on return to user space the global pages would stay in the TLB cache.
Disable global pages so that kernel TLB entries can be flushed before
returning to user space. This way, all accesses to kernel addresses from
userspace result in a TLB miss independent of the existence of a kernel
mapping.
Suppress global pages via the \_\_supported\_pte\_mask. The user space
mappings set PAGE\_GLOBAL for the minimal kernel mappings which are
required for entry/exit. These mappings are set up manually so the
filtering does not take place.
[ The \_\_supported\_pte\_mask simplification was written by Thomas Gleixner. ]
Signed-off-by: Dave Hansen
Signed-off-by: Thomas Gleixner
Reviewed-by: Borislav Petkov
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Cc: linux-mm@kvack.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 72a2beddcd3240047552de69ce45a28029c7e56c
Author: Thomas Gleixner
Date: Mon Dec 4 15:07:33 2017 +0100
x86/cpufeatures: Add X86\_BUG\_CPU\_INSECURE
commit a89f040fa34ec9cd682aed98b8f04e3c47d998bd upstream.
Many x86 CPUs leak information to user space due to missing isolation of
user space and kernel space page tables. There are many well documented
ways to exploit that.
The upcoming software migitation of isolating the user and kernel space
page tables needs a misfeature flag so code can be made runtime
conditional.
Add the BUG bits which indicates that the CPU is affected and add a feature
bit which indicates that the software migitation is enabled.
Assume for now that \_ALL\_ x86 CPUs are affected by this. Exceptions can be
made later.
Signed-off-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Dave Hansen
Cc: David Laight
Cc: Denys Vlasenko
Cc: Eduardo Valentin
Cc: Greg KH
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Juergen Gross
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Will Deacon
Cc: aliguori@amazon.com
Cc: daniel.gruss@iaik.tugraz.at
Cc: hughd@google.com
Cc: keescook@google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 98669825616890a96c9fc67c5f983484578e4dd9
Author: Jing Xia
Date: Tue Dec 26 15:12:53 2017 +0800
tracing: Fix crash when it fails to alloc ring buffer
commit 24f2aaf952ee0b59f31c3a18b8b36c9e3d3c2cf5 upstream.
Double free of the ring buffer happens when it fails to alloc new
ring buffer instance for max\_buffer if TRACER\_MAX\_TRACE is configured.
The root cause is that the pointer is not set to NULL after the buffer
is freed in allocate\_trace\_buffers(), and the freeing of the ring
buffer is invoked again later if the pointer is not equal to Null,
as:
instance\_mkdir()
|-allocate\_trace\_buffers()
|-allocate\_trace\_buffer(tr, &tr->trace\_buffer...)
|-allocate\_trace\_buffer(tr, &tr->max\_buffer...)
// allocate fail(-ENOMEM),first free
// and the buffer pointer is not set to null
|-ring\_buffer\_free(tr->trace\_buffer.buffer)
// out\_free\_tr
|-free\_trace\_buffers()
|-free\_trace\_buffer(&tr->trace\_buffer);
//if trace\_buffer is not null, free again
|-ring\_buffer\_free(buf->buffer)
|-rb\_free\_cpu\_buffer(buffer->buffers[cpu])
// ring\_buffer\_per\_cpu is null, and
// crash in ring\_buffer\_per\_cpu->pages
Link: http://lkml.kernel.org/r/20171226071253.8968-1-chunyan.zhang@spreadtrum.com
Fixes: 737223fbca3b1 ("tracing: Consolidate buffer allocation code")
Signed-off-by: Jing Xia
Signed-off-by: Chunyan Zhang
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit 21a9c7346ef696161dacbbd9f47dabb0f062c4c8
Author: Steven Rostedt (VMware)
Date: Tue Dec 26 20:07:34 2017 -0500
tracing: Fix possible double free on failure of allocating trace buffer
commit 4397f04575c44e1440ec2e49b6302785c95fd2f8 upstream.
Jing Xia and Chunyan Zhang reported that on failing to allocate part of the
tracing buffer, memory is freed, but the pointers that point to them are not
initialized back to NULL, and later paths may try to free the freed memory
again. Jing and Chunyan fixed one of the locations that does this, but
missed a spot.
Link: http://lkml.kernel.org/r/20171226071253.8968-1-chunyan.zhang@spreadtrum.com
Fixes: 737223fbca3b1 ("tracing: Consolidate buffer allocation code")
Reported-by: Jing Xia
Reported-by: Chunyan Zhang
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit 234bc12669a362773e84834ace52f1af7510196b
Author: Steven Rostedt (VMware)
Date: Fri Dec 22 20:38:57 2017 -0500
tracing: Remove extra zeroing out of the ring buffer page
commit 6b7e633fe9c24682df550e5311f47fb524701586 upstream.
The ring\_buffer\_read\_page() takes care of zeroing out any extra data in the
page that it returns. There's no need to zero it out again from the
consumer. It was removed from one consumer of this function, but
read\_buffers\_splice\_read() did not remove it, and worse, it contained a
nasty bug because of it.
Fixes: 2711ca237a084 ("ring-buffer: Move zeroing out excess in page to ring buffer code")
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman


=== Content from bugzilla.suse.com_917c8a63_20250124_180437.html ===


| Bugzilla – Bug 1094825 | VUL-0: CVE-2018-18386: kernel-source: hangs after a pseudoterminal is put in both ICANON and EXTPROC mode (LTP pty02) | Last modified: 2019-08-28 09:12:25 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1094825)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1094825**](show_bug.cgi?id=1094825)
(CVE-2018-18386)
- VUL-0: CVE-2018-18386: kernel-source: hangs after a pseudoterminal is put in both ICANON and EXTPROC mode (LTP pty02)

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: CVE-2018-18386: kernel-source: hangs after a pseudoterminal is put in ...

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-18386 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | SUSE Security Incidents | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Novell Products | | [Component:](describecomponents.cgi?product=SUSE Security Incidents "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Incidents ([show other bugs](buglist.cgi?component=Incidents&product=SUSE%20Security%20Incidents&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P2 - High **Severity**: Major | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Security Team bot | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | <https://smash.suse.de/issue/208752/> | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | CVSSv3:SUSE:CVE-2018-18386:6.2:(AV:L/... | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2018-05-28 08:13 UTC by Michael Moese | | --- | --- | | Modified: | 2019-08-28 09:12 UTC ([History](show_activity.cgi?id=1094825)) | | CC List: | 5 users (show)  bpetkov jslaby kgw meissner richard.palethorpe | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1094825) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1094825&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1094825&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1094825#c0)  Michael Moese   2018-05-28 08:13:17 UTC  ``` It looks like we need commit 966031f340185: n_tty: fix EXTPROC vs ICANON interaction with TIOCINQ (aka FIONREAD) in the SLE 15 kernel.  LTP has a regression test (kernel/pty/pty02.c) for this issue, can be seen here: <https://openqa.suse.de/tests/1728714>#  The upstream commit is <https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=966031f340185> ``` [Comment 2](show_bug.cgi?id=1094825#c2)  Jiri Slaby   2018-06-02 13:21:20 UTC  ``` Pushed to SLE15. ``` [Comment 3](show_bug.cgi?id=1094825#c3)  Richard Palethorpe   2018-06-05 14:42:43 UTC  ``` Still present in GMC 662.1 ``` [Comment 8](show_bug.cgi?id=1094825#c8)  Swamp Workflow Management   2018-07-18 06:16:24 UTC  ``` This is an autogenerated message for OBS integration: This bug (1094825) was mentioned in <https://build.opensuse.org/request/show/623532> 15.0 / kernel-source ``` [Comment 9](show_bug.cgi?id=1094825#c9)  Swamp Workflow Management   2018-07-18 06:16:24 UTC  ``` This is an autogenerated message for OBS integration: This bug (1094825) was mentioned in <https://build.opensuse.org/request/show/623532> 15.0 / kernel-source ``` [Comment 10](show_bug.cgi?id=1094825#c10)  Swamp Workflow Management   2018-07-27 19:21:50 UTC  ``` SUSE-SU-2018:2092-1: An update that solves 22 vulnerabilities and has 246 fixes is now available.  Category: security (important) Bug References: 1046303,1046305,1046306,1046307,1046540,1046542,1046543,1048129,1050242,1050252,1050529,1050536,1050538,1050545,1050549,1050662,1051510,1052766,1055968,1056427,1056643,1056651,1056653,1056657,1056658,1056662,1056686,1056787,1058115,1058513,1058659,1058717,1060463,1061024,1061840,1062897,1064802,1065600,1066110,1066129,1068032,1068054,1071218,1071995,1072829,1072856,1073513,1073765,1073960,1074562,1074578,1074701,1074741,1074873,1074919,1075006,1075007,1075262,1075419,1075748,1075876,1076049,1076115,1076372,1076830,1077338,1078248,1078353,1079152,1079747,1080039,1080542,1081599,1082485,1082504,1082869,1082962,1083647,1083900,1084001,1084570,1085308,1085539,1085626,1085933,1085936,1085937,1085938,1085939,1085941,1086282,1086283,1086286,1086288,1086319,1086323,1086400,1086652,1086739,1087078,1087082,1087084,1087092,1087205,1087210,1087213,1087214,1087284,1087405,1087458,1087939,1087978,1088354,1088690,1088704,1088722,1088796,1088804,1088821,1088866,1089115,1089268,1089467,1089608,1089663,1089664,1089667,1089669,1089752,1089753,1089878,1090150,1090457,1090605,1090643,1090646,1090658,1090734,1090888,1090953,1091158,1091171,1091424,1091594,1091666,1091678,1091686,1091781,1091782,1091815,1091860,1091960,1092100,1092472,1092710,1092772,1092888,1092904,1092975,1093023,1093027,1093035,1093118,1093148,1093158,1093184,1093205,1093273,1093290,1093604,1093641,1093649,1093653,1093655,1093657,1093663,1093721,1093728,1093904,1093990,1094244,1094356,1094420,1094541,1094575,1094751,1094825,1094840,1094912,1094978,1095042,1095094,1095115,1095155,1095265,1095321,1095337,1095467,1095573,1095735,1095893,1096065,1096480,1096529,1096696,1096705,1096728,1096753,1096790,1096793,1097034,1097105,1097234,1097356,1097373,1097439,1097465,1097468,1097470,1097471,1097472,1097551,1097780,1097796,1097800,1097941,1097961,1098016,1098043,1098050,1098174,1098176,1098236,1098401,1098425,1098435,1098599,1098626,1098706,1098983,1098995,1099029,1099041,1099109,1099142,1099183,1099715,1099792,1099918,1099924,1099966,1100132,1100209,1100340,1100362,1100382,1100394,1100416,1100418,1100491,1100602,1100633,1100843,1101296,1101315,1101324,971975,975772 CVE References: CVE-2017-5715,CVE-2017-5753,CVE-2018-1000200,CVE-2018-1000204,CVE-2018-10087,CVE-2018-10124,CVE-2018-1092,CVE-2018-1093,CVE-2018-1094,CVE-2018-1118,CVE-2018-1120,CVE-2018-1130,CVE-2018-12233,CVE-2018-13053,CVE-2018-13405,CVE-2018-13406,CVE-2018-3639,CVE-2018-5803,CVE-2018-5848,CVE-2018-7492,CVE-2018-8781,CVE-2018-9385 Sources used: SUSE Linux Enterprise Workstation Extension 15 (src):    kernel-default-4.12.14-25.3.1 SUSE Linux Enterprise Module for Live Patching 15 (src):    kernel-default-4.12.14-25.3.1, kernel-livepatch-SLE15_Update_1-1-1.3.1 SUSE Linux Enterprise Module for Legacy Software 15 (src):    kernel-default-4.12.14-25.3.1 SUSE Linux Enterprise Module for Development Tools 15 (src):    kernel-docs-4.12.14-25.3.1, kernel-obs-build-4.12.14-25.3.1, kernel-source-4.12.14-25.3.1, kernel-syms-4.12.14-25.3.1, kernel-vanilla-4.12.14-25.3.1 SUSE Linux Enterprise Module for Basesystem 15 (src):    kernel-default-4.12.14-25.3.1, kernel-source-4.12.14-25.3.1, kernel-zfcpdump-4.12.14-25.3.1 SUSE Linux Enterprise High Availability 15 (src):    kernel-default-4.12.14-25.3.1 ``` [Comment 11](show_bug.cgi?id=1094825#c11)  Swamp Workflow Management   2018-07-28 13:49:15 UTC  ``` openSUSE-SU-2018:2119-1: An update that solves 23 vulnerabilities and has 283 fixes is now available.  Category: security (important) Bug References: 1022476,1046303,1046305,1046306,1046307,1046540,1046542,1046543,1048129,1050242,1050252,1050529,1050536,1050538,1050545,1050549,1050662,1051510,1052766,1055117,1055186,1055968,1056427,1056643,1056651,1056653,1056657,1056658,1056662,1056686,1056787,1058115,1058513,1058659,1058717,1059336,1060463,1061024,1061840,1062897,1064802,1065600,1065729,1066110,1066129,1068032,1068054,1068546,1071218,1071995,1072829,1072856,1073513,1073765,1073960,1074562,1074578,1074701,1074741,1074873,1074919,1074984,1075006,1075007,1075262,1075419,1075748,1075876,1076049,1076115,1076372,1076830,1077338,1078248,1078353,1079152,1079747,1080039,1080157,1080542,1081599,1082485,1082504,1082869,1082962,1083647,1083684,1083900,1084001,1084570,1084721,1085308,1085341,1085400,1085539,1085626,1085933,1085936,1085937,1085938,1085939,1085941,1086224,1086282,1086283,1086286,1086288,1086319,1086323,1086400,1086467,1086652,1086739,1087084,1087088,1087092,1087205,1087210,1087213,1087214,1087284,1087405,1087458,1087939,1087978,1088273,1088354,1088374,1088690,1088704,1088713,1088722,1088796,1088804,1088821,1088866,1088872,1089074,1089086,1089115,1089141,1089198,1089268,1089271,1089467,1089608,1089644,1089663,1089664,1089667,1089669,1089752,1089753,1089762,1089878,1089889,1089977,1090098,1090150,1090457,1090522,1090534,1090535,1090605,1090643,1090646,1090658,1090717,1090734,1090818,1090888,1090953,1091101,1091158,1091171,1091264,1091424,1091532,1091543,1091594,1091666,1091678,1091686,1091781,1091782,1091815,1091860,1091960,1092100,1092289,1092472,1092566,1092710,1092772,1092888,1092904,1092975,1093023,1093027,1093035,1093118,1093148,1093158,1093184,1093205,1093273,1093290,1093604,1093641,1093649,1093653,1093655,1093657,1093663,1093721,1093728,1093904,1093990,1094244,1094356,1094420,1094541,1094575,1094751,1094825,1094840,1094978,1095042,1095094,1095104,1095115,1095155,1095265,1095321,1095337,1095467,1095573,1095735,1095893,1096065,1096480,1096529,1096696,1096705,1096728,1096753,1096790,1096793,1097034,1097105,1097234,1097356,1097373,1097439,1097465,1097468,1097470,1097471,1097472,1097551,1097780,1097796,1097800,1097941,1097961,1098016,1098043,1098050,1098174,1098176,1098236,1098401,1098425,1098435,1098599,1098626,1098706,1098983,1098995,1099029,1099041,1099109,1099142,1099183,1099715,1099792,1099918,1099924,1099966,1100132,1100209,1100340,1100362,1100382,1100416,1100418,1100491,1100602,1100633,1100734,1100843,1101296,1101315,1101324,971975,975772 CVE References: CVE-2017-5715,CVE-2017-5753,CVE-2018-1000200,CVE-2018-1000204,CVE-2018-10087,CVE-2018-10124,CVE-2018-10323,CVE-2018-1092,CVE-2018-1093,CVE-2018-1094,CVE-2018-1108,CVE-2018-1118,CVE-2018-1120,CVE-2018-1130,CVE-2018-12233,CVE-2018-13053,CVE-2018-13405,CVE-2018-13406,CVE-2018-5803,CVE-2018-5848,CVE-2018-7492,CVE-2018-8781,CVE-2018-9385 Sources used: openSUSE Leap 15.0 (src):    kernel-debug-4.12.14-lp150.12.7.1, kernel-default-4.12.14-lp150.12.7.1, kernel-docs-4.12.14-lp150.12.7.1, kernel-kvmsmall-4.12.14-lp150.12.7.1, kernel-obs-build-4.12.14-lp150.12.7.1, kernel-obs-qa-4.12.14-lp150.12.7.1, kernel-source-4.12.14-lp150.12.7.1, kernel-syms-4.12.14-lp150.12.7.1, kernel-vanilla-4.12.14-lp150.12.7.1 ``` [Comment 12](show_bug.cgi?id=1094825#c12)  Marcus Meissner   2018-10-16 14:59:58 UTC  ``` as users can disable all terminal operations I will consider this a security issue.  CVE requested.  patches.kernel.org/4.4.109-063-n_tty-fix-EXTPROC-vs-ICANON-interaction-with-.patch  sle15 has: patches.suse/n_tty-fix-EXTPROC-vs-ICANON-interaction-with-TIOCINQ.patch ``` [Comment 13](show_bug.cgi?id=1094825#c13)  Jiri Slaby   2018-10-18 08:04:56 UTC  ``` So I updated References in those 2.  Given the bug is introduced by commit 26df6d13406d in 2.6.36-rc1, I pushed the patch to:   cve/linux-3.0   cve/linux-3.12   cve/linux-4.4 ``` [Comment 17](show_bug.cgi?id=1094825#c17)  Swamp Workflow Management   2018-10-31 17:12:39 UTC  ``` SUSE-SU-2018:3589-1: An update that solves four vulnerabilities and has 102 fixes is now available.  Category: security (important) Bug References: 1046540,1050319,1050536,1050540,1051510,1055120,1065600,1066674,1067126,1067906,1076830,1079524,1083647,1084760,1084831,1086283,1086288,1094825,1095805,1099125,1100132,1102881,1103308,1103543,1104731,1105025,1105536,1106105,1106110,1106237,1106240,1106838,1107685,1108241,1108377,1108468,1108828,1108841,1108870,1109151,1109158,1109217,1109330,1109739,1109784,1109806,1109818,1109907,1109911,1109915,1109919,1109951,1110006,1110096,1110538,1110561,1110921,1111028,1111076,1111506,1111806,1111819,1111830,1111834,1111841,1111870,1111901,1111904,1111928,1111983,1112170,1112173,1112208,1112219,1112221,1112246,1112372,1112514,1112554,1112708,1112710,1112711,1112712,1112713,1112731,1112732,1112733,1112734,1112735,1112736,1112738,1112739,1112740,1112741,1112743,1112745,1112746,1112894,1112899,1112902,1112903,1112905,1112906,1112907,1113257,1113284 CVE References: CVE-2017-16533,CVE-2017-18224,CVE-2018-18386,CVE-2018-18445 Sources used: SUSE Linux Enterprise Workstation Extension 15 (src):    kernel-default-4.12.14-25.25.1 SUSE Linux Enterprise Module for Open Buildservice Development Tools 15 (src):    kernel-default-4.12.14-25.25.1, kernel-docs-4.12.14-25.25.1, kernel-obs-qa-4.12.14-25.25.1 SUSE Linux Enterprise Module for Legacy Software 15 (src):    kernel-default-4.12.14-25.25.1 SUSE Linux Enterprise Module for Development Tools 15 (src):    kernel-docs-4.12.14-25.25.1, kernel-obs-build-4.12.14-25.25.1, kernel-source-4.12.14-25.25.1, kernel-syms-4.12.14-25.25.1, kernel-vanilla-4.12.14-25.25.1 SUSE Linux Enterprise Module for Basesystem 15 (src):    kernel-default-4.12.14-25.25.1, kernel-source-4.12.14-25.25.1, kernel-zfcpdump-4.12.14-25.25.1 SUSE Linux Enterprise High Availability 15 (src):    kernel-default-4.12.14-25.25.1 ``` [Comment 18](show_bug.cgi?id=1094825#c18)  Swamp Workflow Management   2018-10-31 17:35:34 UTC  ``` SUSE-SU-2018:3593-1: An update that solves four vulnerabilities and has 102 fixes is now available.  Category: security (important) Bug References: 1046540,1050319,1050536,1050540,1051510,1055120,1065600,1066674,1067126,1067906,1076830,1079524,1083647,1084760,1084831,1086283,1086288,1094825,1095805,1099125,1100132,1102881,1103308,1103543,1104731,1105025,1105536,1106105,1106110,1106237,1106240,1106838,1107685,1108241,1108377,1108468,1108828,1108841,1108870,1109151,1109158,1109217,1109330,1109739,1109784,1109806,1109818,1109907,1109911,1109915,1109919,1109951,1110006,1110096,1110538,1110561,1110921,1111028,1111076,1111506,1111806,1111819,1111830,1111834,1111841,1111870,1111901,1111904,1111928,1111983,1112170,1112173,1112208,1112219,1112221,1112246,1112372,1112514,1112554,1112708,1112710,1112711,1112712,1112713,1112731,1112732,1112733,1112734,1112735,1112736,1112738,1112739,1112740,1112741,1112743,1112745,1112746,1112894,1112899,1112902,1112903,1112905,1112906,1112907,1113257,1113284 CVE References: CVE-2017-16533,CVE-2017-18224,CVE-2018-18386,CVE-2018-18445 Sources used: SUSE Linux Enterprise Module for Live Patching 15 (src):    kernel-default-4.12.14-25.25.1, kernel-livepatch-SLE15_Update_7-1-1.3.1 ``` [Comment 19](show_bug.cgi?id=1094825#c19)  Swamp Workflow Management   2018-11-01 19:41:14 UTC  ``` This is an autogenerated message for OBS integration: This bug (1094825) was mentioned in <https://build.opensuse.org/request/show/645932> 15.0 / kernel-source ``` [Comment 23](show_bug.cgi?id=1094825#c23)  Swamp Workflow Management   2018-11-06 15:42:27 UTC  ``` This is an autogenerated message for OBS integration: This bug (1094825) was mentioned in <https://build.opensuse.org/request/show/646686> 42.3 / kernel-source ``` [Comment 25](show_bug.cgi?id=1094825#c25)  Swamp Workflow Management   2018-11-07 20:14:11 UTC  ``` openSUSE-SU-2018:3658-1: An update that solves 5 vulnerabilities and has 86 fixes is now available.  Category: security (important) Bug References: 1051510,1055120,1065600,1066674,1067906,1076830,1079524,1083647,1084760,1084831,1091800,1094825,1095805,1100132,1103356,1103543,1104124,1104731,1105025,1105428,1105536,1106110,1106237,1106240,1108377,1109330,1109739,1109806,1109818,1109907,1109911,1109915,1109919,1109951,1110006,1111040,1111506,1111806,1111819,1111830,1111834,1111841,1111870,1111901,1111904,1111921,1111928,1111983,1112170,1112173,1112208,1112219,1112221,1112246,1112372,1112514,1112554,1112708,1112710,1112711,1112712,1112713,1112731,1112732,1112733,1112734,1112735,1112736,1112738,1112739,1112740,1112741,1112743,1112745,1112746,1112878,1112894,1112899,1112902,1112903,1112905,1112906,1112907,1113257,1113284,1113295,1113408,1113667,1113722,1113751,1113972 CVE References: CVE-2017-16533,CVE-2017-18224,CVE-2018-18386,CVE-2018-18445,CVE-2018-18710 Sources used: openSUSE Leap 15.0 (src):    kernel-debug-4.12.14-lp150.12.25.1, kernel-default-4.12.14-lp150.12.25.1, kernel-docs-4.12.14-lp150.12.25.1, kernel-kvmsmall-4.12.14-lp150.12.25.1, kernel-obs-build-4.12.14-lp150.12.25.1, kernel-obs-qa-4.12.14-lp150.12.25.1, kernel-source-4.12.14-lp150.12.25.1, kernel-syms-4.12.14-lp150.12.25.1, kernel-vanilla-4.12.14-lp150.12.25.1 ``` [Comment 26](show_bug.cgi?id=1094825#c26)  Swamp Workflow Management   2018-11-07 20:31:35 UTC  ``` SUSE-SU-2018:3659-1: An update that solves 10 vulnerabilities and has 104 fixes is now available.  Category: security (important) Bug References: 1012382,1042422,1044189,1050431,1050549,1053043,1063026,1065600,1065726,1066223,1067906,1079524,1082519,1082863,1082979,1084427,1084536,1084760,1088087,1089343,1090535,1091158,1094244,1094555,1094562,1094825,1095344,1095753,1095805,1096052,1096547,1099597,1099810,1101555,1102495,1102715,1102870,1102875,1102877,1102879,1102882,1102896,1103156,1103269,1103308,1103405,1105428,1105795,1105931,1106095,1106105,1106110,1106240,1106293,1106359,1106434,1106512,1106594,1106913,1106929,1106934,1107060,1107299,1107318,1107535,1107829,1107924,1108096,1108170,1108240,1108315,1108377,1108399,1108498,1108803,1108823,1109158,1109333,1109336,1109337,1109441,1109784,1109806,1109818,1109907,1109919,1109923,1110006,1110297,1110337,1110363,1110468,1110600,1110601,1110602,1110603,1110604,1110605,1110606,1110611,1110612,1110613,1110614,1110615,1110616,1110618,1110619,1110930,1111363,1111516,1111870,1112007,1112262,1112263 CVE References: CVE-2018-14613,CVE-2018-14617,CVE-2018-14633,CVE-2018-16276,CVE-2018-16597,CVE-2018-17182,CVE-2018-18386,CVE-2018-7480,CVE-2018-7757,CVE-2018-9516 Sources used: SUSE Linux Enterprise Real Time Extension 12-SP3 (src):    kernel-rt-4.4.162-3.26.1, kernel-rt_debug-4.4.162-3.26.1, kernel-source-rt-4.4.162-3.26.1, kernel-syms-rt-4.4.162-3.26.1 ``` [Comment 31](show_bug.cgi?id=1094825#c31)  Swamp Workflow Management   2018-11-09 20:30:32 UTC  ``` SUSE-SU-2018:3688-1: An update that solves 6 vulnerabilities and has 100 fixes is now available.  Category: security (important) Bug References: 1011920,1012382,1012422,1020645,1031392,1035053,1042422,1043591,1048129,1050431,1050549,1053043,1054239,1057199,1065600,1065726,1067906,1073579,1076393,1078788,1079524,1082519,1083215,1083527,1084760,1089343,1091158,1093118,1094244,1094825,1095805,1096052,1098050,1098996,1099597,1101555,1103308,1103405,1104124,1105025,1105428,1105795,1105931,1106105,1106110,1106240,1106293,1106359,1106434,1106594,1106913,1106929,1107060,1107299,1107318,1107535,1107829,1107870,1108315,1108377,1108498,1109158,1109333,1109772,1109784,1109806,1109818,1109907,1109919,1109923,1110006,1110363,1110468,1110600,1110601,1110602,1110603,1110604,1110605,1110606,1110611,1110612,1110613,1110614,1110615,1110616,1110618,1110619,1111363,1111516,1111870,1112007,1112262,1112263,1112894,1112902,1112903,1112905,1113667,1113751,1113769,1114178,1114229,1114648,981083,997172 CVE References: CVE-2018-14633,CVE-2018-18281,CVE-2018-18386,CVE-2018-18690,CVE-2018-18710,CVE-2018-9516 Sources used: SUSE Linux Enterprise Live Patching 12-SP3 (src):    kgraft-patch-SLE12-SP3_Update_21-1-4.5.2 ``` [Comment 32](show_bug.cgi?id=1094825#c32)  Swamp Workflow Management   2018-11-09 20:52:32 UTC  ``` SUSE-SU-2018:3689-1: An update that solves 6 vulnerabilities and has 100 fixes is now available.  Category: security (important) Bug References: 1011920,1012382,1012422,1020645,1031392,1035053,1042422,1043591,1048129,1050431,1050549,1053043,1054239,1057199,1065600,1065726,1067906,1073579,1076393,1078788,1079524,1082519,1083215,1083527,1084760,1089343,1091158,1093118,1094244,1094825,1095805,1096052,1098050,1098996,1099597,1101555,1103308,1103405,1104124,1105025,1105428,1105795,1105931,1106105,1106110,1106240,1106293,1106359,1106434,1106594,1106913,1106929,1107060,1107299,1107318,1107535,1107829,1107870,1108315,1108377,1108498,1109158,1109333,1109772,1109784,1109806,1109818,1109907,1109919,1109923,1110006,1110363,1110468,1110600,1110601,1110602,1110603,1110604,1110605,1110606,1110611,1110612,1110613,1110614,1110615,1110616,1110618,1110619,1111363,1111516,1111870,1112007,1112262,1112263,1112894,1112902,1112903,1112905,1113667,1113751,1113769,1114178,1114229,1114648,981083,997172 CVE References: CVE-2018-14633,CVE-2018-18281,CVE-2018-18386,CVE-2018-18690,CVE-2018-18710,CVE-2018-9516 Sources used: SUSE Linux Enterprise Workstation Extension 12-SP3 (src):    kernel-default-4.4.162-94.69.2 SUSE Linux Enterprise Software Development Kit 12-SP3 (src):    kernel-docs-4.4.162-94.69.2, kernel-obs-build-4.4.162-94.69.2 SUSE Linux Enterprise Server 12-SP3 (src):    kernel-default-4.4.162-94.69.2, kernel-source-4.4.162-94.69.2, kernel-syms-4.4.162-94.69.2, lttng-modules-2.7.1-8.6.1 SUSE Linux Enterprise High Availability 12-SP3 (src):    kernel-default-4.4.162-94.69.2 SUSE Linux Enterprise Desktop 12-SP3 (src):    kernel-default-4.4.162-94.69.2, kernel-source-4.4.162-94.69.2, kernel-syms-4.4.162-94.69.2 SUSE CaaS Platform ALL (src):    kernel-default-4.4.162-94.69.2 SUSE CaaS Platform 3.0 (src):    kernel-default-4.4.162-94.69.2 ``` [Comment 33](show_bug.cgi?id=1094825#c33)  Swamp Workflow Management   2018-11-12 22:02:43 UTC  ``` This is an autogenerated message for OBS integration: This bug (1094825) was mentioned in <https://build.opensuse.org/request/show/648620> 42.3 / kernel-source ``` [Comment 35](show_bug.cgi?id=1094825#c35)  Swamp Workflow Management   2018-11-20 20:13:41 UTC  ``` openSUSE-SU-2018:3817-1: An update that solves 5 vulnerabilities and has 66 fixes is now available.  Category: security (important) Bug References: 1011920,1012382,1012422,1020645,1031392,1035053,1042422,1043591,1048129,1050431,1053043,1054239,1057199,1062303,1065600,1065726,1067906,1073579,1076393,1078788,1079524,1083215,1083527,1084760,1091158,1093118,1094825,1095805,1098050,1098996,1101555,1104124,1105025,1105931,1106110,1106359,1106594,1106913,1106929,1107060,1107299,1107535,1107870,1108377,1108498,1109158,1109772,1109784,1109818,1109907,1109919,1109923,1110006,1111516,1111870,1112007,1112262,1112263,1112894,1112902,1112903,1112905,1113667,1113751,1113769,1114178,1114229,1114648,1115587,981083,997172 CVE References: CVE-2018-18281,CVE-2018-18386,CVE-2018-18690,CVE-2018-18710,CVE-2018-9516 Sources used: openSUSE Leap 42.3 (src):    kernel-debug-4.4.162-78.1, kernel-default-4.4.162-78.1, kernel-docs-4.4.162-78.1, kernel-obs-build-4.4.162-78.1, kernel-obs-qa-4.4.162-78.1, kernel-source-4.4.162-78.1, kernel-syms-4.4.162-78.1, kernel-vanilla-4.4.162-78.1 ``` [Comment 38](show_bug.cgi?id=1094825#c38)  Swamp Workflow Management   2018-11-22 20:19:11 UTC  ``` SUSE-SU-2018:3869-1: An update that solves 8 vulnerabilities and has 21 fixes is now available.  Category: security (important) Bug References: 1031240,1047027,1049128,1050431,1064861,1065600,1066674,1071021,1081680,1094244,1094825,1103145,1105799,1106139,1106240,1107371,1107829,1107849,1108314,1108498,1109806,1109818,1110006,1110247,1113337,1113751,1113769,1114460,923775 CVE References: CVE-2017-1000407,CVE-2017-16533,CVE-2017-7273,CVE-2018-14633,CVE-2018-18281,CVE-2018-18386,CVE-2018-18710,CVE-2018-9516 Sources used: SUSE Linux Enterprise Real Time Extension 11-SP4 (src):    kernel-rt-3.0.101.rt130-69.39.1, kernel-rt_trace-3.0.101.rt130-69.39.1, kernel-source-rt-3.0.101.rt130-69.39.1, kernel-syms-rt-3.0.101.rt130-69.39.1 SUSE Linux Enterprise Debuginfo 11-SP4 (src):    kernel-rt-3.0.101.rt130-69.39.1, kernel-rt_debug-3.0.101.rt130-69.39.1, kernel-rt_trace-3.0.101.rt130-69.39.1 ``` [Comment 39](show_bug.cgi?id=1094825#c39)  Swamp Workflow Management   2018-11-28 14:14:44 UTC  ``` SUSE-SU-2018:3934-1: An update that solves 5 vulnerabilities and has 101 fixes is now available.  Category: security (important) Bug References: 1051510,1055120,1061840,1065600,1066674,1067906,1076830,1079524,1083647,1084760,1084831,1086196,1091800,1094825,1095805,1100132,1101138,1103356,1103543,1103925,1104124,1104731,1105025,1105428,1105536,1106110,1106237,1106240,1106287,1106359,1106838,1108377,1108468,1108870,1109330,1109739,1109772,1109784,1109806,1109818,1109907,1109911,1109915,1109919,1109951,1110006,1111040,1111076,1111506,1111806,1111811,1111819,1111830,1111834,1111841,1111870,1111901,1111904,1111921,1111928,1111983,1112170,1112173,1112208,1112219,1112221,1112246,1112372,1112514,1112554,1112708,1112710,1112711,1112712,1112713,1112731,1112732,1112733,1112734,1112735,1112736,1112738,1112739,1112740,1112741,1112743,1112745,1112746,1112878,1112894,1112899,1112902,1112903,1112905,1112906,1112907,1113257,1113284,1113295,1113408,1113667,1113722,1113751,1113780,1113972,1114279 CVE References: CVE-2017-16533,CVE-2017-18224,CVE-2018-18386,CVE-2018-18445,CVE-2018-18710 Sources used: SUSE Linux Enterprise Server 12-SP4 (src):    kernel-azure-4.12.14-6.3.1, kernel-source-azure-4.12.14-6.3.1, kernel-syms-azure-4.12.14-6.3.1 ``` [Comment 40](show_bug.cgi?id=1094825#c40)  Swamp Workflow Management   2018-11-30 20:20:30 UTC  ``` SUSE-SU-2018:3961-1: An update that solves 22 vulnerabilities and has 286 fixes is now available.  Category: security (important) Bug References: 1012382,1031392,1043912,1044189,1046302,1046305,1046306,1046307,1046540,1046543,1050244,1050319,1050536,1050540,1051510,1054914,1055014,1055117,1055120,1058659,1060463,1061840,1065600,1065729,1066674,1067126,1067906,1068032,1069138,1071995,1076830,1077761,1077989,1078720,1079524,1080157,1082519,1082555,1083647,1083663,1084760,1084831,1085030,1085042,1085262,1086282,1086283,1086288,1086327,1089663,1090078,1091800,1092903,1094244,1094825,1095344,1095805,1096748,1097105,1097583,1097584,1097585,1097586,1097587,1097588,1098459,1098782,1098822,1099125,1099922,1099999,1100001,1100132,1101480,1101557,1101669,1102346,1102495,1102517,1102715,1102870,1102875,1102877,1102879,1102881,1102882,1102896,1103269,1103308,1103356,1103363,1103387,1103405,1103421,1103543,1103587,1103636,1103948,1103949,1103961,1104172,1104353,1104482,1104683,1104731,1104824,1104888,1104890,1105025,1105190,1105247,1105292,1105322,1105355,1105378,1105396,1105428,1105467,1105524,1105536,1105597,1105603,1105672,1105731,1105795,1105907,1106007,1106016,1106105,1106110,1106121,1106170,1106178,1106229,1106230,1106231,1106233,1106235,1106236,1106237,1106238,1106240,1106291,1106297,1106333,1106369,1106427,1106464,1106509,1106511,1106594,1106636,1106688,1106697,1106779,1106800,1106838,1106890,1106891,1106892,1106893,1106894,1106896,1106897,1106898,1106899,1106900,1106901,1106902,1106903,1106905,1106906,1106948,1106995,1107008,1107060,1107061,1107065,1107074,1107207,1107319,1107320,1107522,1107535,1107685,1107689,1107735,1107756,1107783,1107829,1107870,1107924,1107928,1107945,1107947,1107966,1108010,1108093,1108096,1108170,1108241,1108243,1108260,1108281,1108323,1108377,1108399,1108468,1108520,1108823,1108841,1108870,1109151,1109158,1109217,1109244,1109269,1109330,1109333,1109336,1109337,1109511,1109603,1109739,1109772,1109784,1109806,1109818,1109907,1109915,1109919,1109951,1109979,1109992,1110006,1110096,1110301,1110363,1110538,1110561,1110639,1110642,1110643,1110644,1110645,1110646,1110647,1110649,1110650,1111028,1111040,1111076,1111506,1111806,1111819,1111830,1111834,1111841,1111870,1111901,1111904,1111921,1111928,1111983,1112170,1112208,1112219,1112246,1112372,1112514,1112554,1112708,1112710,1112711,1112712,1112713,1112731,1112732,1112733,1112734,1112735,1112736,1112738,1112739,1112740,1112741,1112743,1112745,1112746,1112878,1112894,1112899,1112902,1112903,1112905,1112906,1112907,1113257,1113284,1113295,1113408,1113667,1113722,1113751,1113780,1113972,1114279,971975 CVE References: CVE-2017-16533,CVE-2017-18224,CVE-2018-10902,CVE-2018-10938,CVE-2018-10940,CVE-2018-1128,CVE-2018-1129,CVE-2018-12896,CVE-2018-13093,CVE-2018-13095,CVE-2018-14613,CVE-2018-14617,CVE-2018-14633,CVE-2018-15572,CVE-2018-16658,CVE-2018-17182,CVE-2018-18386,CVE-2018-18445,CVE-2018-18710,CVE-2018-6554,CVE-2018-6555,CVE-2018-9363 Sources used: SUSE Linux Enterprise Module for Public Cloud 15 (src):    kernel-azure-4.12.14-5.16.1, kernel-source-azure-4.12.14-5.16.1, kernel-syms-azure-4.12.14-5.16.1 ``` [Comment 42](show_bug.cgi?id=1094825#c42)  Swamp Workflow Management   2018-12-11 14:13:53 UTC  ``` SUSE-SU-2018:4069-1: An update that solves 7 vulnerabilities and has 184 fixes is now available.  Category: security (important) Bug References: 1051510,1055120,1061840,1065600,1065729,1066674,1067906,1068273,1076830,1078248,1079524,1082555,1082653,1083647,1084760,1084831,1085535,1086196,1089350,1091800,1094825,1095805,1097755,1100132,1103356,1103925,1104124,1104731,1104824,1105025,1105428,1106105,1106110,1106237,1106240,1107256,1107385,1107866,1108377,1108468,1109330,1109739,1109772,1109806,1109818,1109907,1109911,1109915,1109919,1109951,1110006,1110998,1111040,1111062,1111174,1111506,1111696,1111809,1111921,1111983,1112128,1112170,1112173,1112208,1112219,1112221,1112246,1112372,1112514,1112554,1112708,1112710,1112711,1112712,1112713,1112731,1112732,1112733,1112734,1112735,1112736,1112738,1112739,1112740,1112741,1112743,1112745,1112746,1112878,1112894,1112899,1112902,1112903,1112905,1112906,1112907,1112963,1113257,1113284,1113295,1113408,1113412,1113501,1113667,1113677,1113722,1113751,1113769,1113780,1113972,1114015,1114178,1114279,1114385,1114576,1114577,1114578,1114579,1114580,1114581,1114582,1114583,1114584,1114585,1114839,1115074,1115269,1115431,1115433,1115440,1115567,1115709,1115976,1116183,1116692,1116693,1116698,1116699,1116700,1116701,1116862,1116863,1116876,1116877,1116878,1116891,1116895,1116899,1116950,1117168,1117172,1117174,1117181,1117184,1117188,1117189,1117349,1117561,1117788,1117789,1117790,1117791,1117792,1117794,1117795,1117796,1117798,1117799,1117801,1117802,1117803,1117804,1117805,1117806,1117807,1117808,1117815,1117816,1117817,1117818,1117819,1117820,1117821,1117822,1118102,1118136,1118137,1118138,1118140,1118152,1118316 CVE References: CVE-2017-16533,CVE-2017-18224,CVE-2018-18281,CVE-2018-18386,CVE-2018-18445,CVE-2018-18710,CVE-2018-19824 Sources used: SUSE Linux Enterprise Workstation Extension 12-SP4 (src):    kernel-default-4.12.14-95.3.1 SUSE Linux Enterprise Software Development Kit 12-SP4 (src):    kernel-docs-4.12.14-95.3.1, kernel-obs-build-4.12.14-95.3.2 SUSE Linux Enterprise Server 12-SP4 (src):    kernel-default-4.12.14-95.3.1, kernel-source-4.12.14-95.3.1, kernel-syms-4.12.14-95.3.1 SUSE Linux Enterprise High Availability 12-SP4 (src):    kernel-default-4.12.14-95.3.1 SUSE Linux Enterprise Desktop 12-SP4 (src):    kernel-default-4.12.14-95.3.1, kernel-source-4.12.14-95.3.1, kernel-syms-4.12.14-95.3.1 ``` [Comment 43](show_bug.cgi?id=1094825#c43)  Swamp Workflow Management   2018-12-12 08:17:19 UTC  ``` SUSE-SU-2018:4072-1: An update that solves 7 vulnerabilities and has 184 fixes is now available.  Category: security (important) Bug References: 1051510,1055120,1061840,1065600,1065729,1066674,1067906,1068273,1076830,1078248,1079524,1082555,1082653,1083647,1084760,1084831,1085535,1086196,1089350,1091800,1094825,1095805,1097755,1100132,1103356,1103925,1104124,1104731,1104824,1105025,1105428,1106105,1106110,1106237,1106240,1107256,1107385,1107866,1108377,1108468,1109330,1109739,1109772,1109806,1109818,1109907,1109911,1109915,1109919,1109951,1110006,1110998,1111040,1111062,1111174,1111506,1111696,1111809,1111921,1111983,1112128,1112170,1112173,1112208,1112219,1112221,1112246,1112372,1112514,1112554,1112708,1112710,1112711,1112712,1112713,1112731,1112732,1112733,1112734,1112735,1112736,1112738,1112739,1112740,1112741,1112743,1112745,1112746,1112878,1112894,1112899,1112902,1112903,1112905,1112906,1112907,1112963,1113257,1113284,1113295,1113408,1113412,1113501,1113667,1113677,1113722,1113751,1113769,1113780,1113972,1114015,1114178,1114279,1114385,1114576,1114577,1114578,1114579,1114580,1114581,1114582,1114583,1114584,1114585,1114839,1115074,1115269,1115431,1115433,1115440,1115567,1115709,1115976,1116183,1116692,1116693,1116698,1116699,1116700,1116701,1116862,1116863,1116876,1116877,1116878,1116891,1116895,1116899,1116950,1117168,1117172,1117174,1117181,1117184,1117188,1117189,1117349,1117561,1117788,1117789,1117790,1117791,1117792,1117794,1117795,1117796,1117798,1117799,1117801,1117802,1117803,1117804,1117805,1117806,1117807,1117808,1117815,1117816,1117817,1117818,1117819,1117820,1117821,1117822,1118102,1118136,1118137,1118138,1118140,1118152,1118316 CVE References: CVE-2017-16533,CVE-2017-18224,CVE-2018-18281,CVE-2018-18386,CVE-2018-18445,CVE-2018-18710,CVE-2018-19824 Sources used: SUSE Linux Enterprise Live Patching 12-SP4 (src):    kgraft-patch-SLE12-SP4_Update_1-1-7.1 ``` [Comment 46](show_bug.cgi?id=1094825#c46)  Swamp Workflow Management   2019-01-16 07:12:14 UTC  ``` SUSE-SU-2019:0095-1: An update that solves 13 vulnerabilities and has 140 fixes is now available.  Category: security (important) Bug References: 1011920,1012382,1012422,1020645,1031392,1035053,1042422,1043591,1044189,1048129,1050431,1050549,1053043,1054239,1057199,1062303,1063026,1065600,1065726,1066223,1067906,1073579,1076393,1078788,1079524,1082519,1082863,1082979,1083215,1083527,1084427,1084536,1084760,1087209,1088087,1089343,1090535,1091158,1093118,1094244,1094555,1094562,1094825,1095344,1095753,1095805,1096052,1096547,1098050,1098996,1099597,1099810,1101555,1102495,1102715,1102870,1102875,1102877,1102879,1102882,1102896,1103156,1103269,1103308,1103405,1104124,1105025,1105428,1105795,1105931,1106095,1106105,1106110,1106240,1106293,1106359,1106434,1106512,1106594,1106913,1106929,1106934,1107060,1107299,1107318,1107535,1107829,1107870,1107924,1108096,1108170,1108240,1108281,1108315,1108377,1108399,1108498,1108803,1108823,1109038,1109158,1109333,1109336,1109337,1109441,1109772,1109784,1109806,1109818,1109907,1109919,1109923,1110006,1110297,1110337,1110363,1110468,1110600,1110601,1110602,1110603,1110604,1110605,1110606,1110611,1110612,1110613,1110614,1110615,1110616,1110618,1110619,1110930,1111363,1111516,1111870,1112007,1112262,1112263,1112894,1112902,1112903,1112905,1113667,1113751,1113766,1113769,1114178,1114229,1114648,1115593,981083,997172 CVE References: CVE-2018-14613,CVE-2018-14617,CVE-2018-14633,CVE-2018-16276,CVE-2018-16597,CVE-2018-17182,CVE-2018-18281,CVE-2018-18386,CVE-2018-18690,CVE-2018-18710,CVE-2018-7480,CVE-2018-7757,CVE-2018-9516 Sources used: SUSE Linux Enterprise Server 12-SP3 (src):    kernel-azure-4.4.162-4.19.2, kernel-source-azure-4.4.162-4.19.1, kernel-syms-azure-4.4.162-4.19.1 ``` [Comment 49](show_bug.cgi?id=1094825#c49)  Swamp Workflow Management   2019-01-29 17:40:35 UTC  ``` SUSE-SU-2019:13937-1: An update that solves 12 vulnerabilities and has 18 fixes is now available.  Category: security (important) Bug References: 1031240,1039803,1066674,1071021,1094186,1094825,1104070,1104366,1104367,1107189,1108498,1109200,1113201,1113751,1113769,1114920,1115007,1115038,1116412,1116841,1117515,1118152,1118319,1119255,1119714,1120743,905299,936875,968018,990682 CVE References: CVE-2017-1000407,CVE-2017-16533,CVE-2017-7273,CVE-2018-18281,CVE-2018-18386,CVE-2018-18710,CVE-2018-19407,CVE-2018-19824,CVE-2018-19985,CVE-2018-20169,CVE-2018-9516,CVE-2018-9568 Sources used: SUSE Linux Enterprise Server 11-SP3-LTSS (src):    kernel-bigsmp-3.0.101-0.47.106.59.1, kernel-default-3.0.101-0.47.106.59.1, kernel-ec2-3.0.101-0.47.106.59.1, kernel-pae-3.0.101-0.47.106.59.1, kernel-source-3.0.101-0.47.106.59.1, kernel-syms-3.0.101-0.47.106.59.1, kernel-trace-3.0.101-0.47.106.59.1, kernel-xen-3.0.101-0.47.106.59.1 SUSE Linux Enterprise Server 11-EXTRA (src):    kernel-bigsmp-3.0.101-0.47.106.59.1, kernel-default-3.0.101-0.47.106.59.1, kernel-pae-3.0.101-0.47.106.59.1, kernel-ppc64-3.0.101-0.47.106.59.1, kernel-trace-3.0.101-0.47.106.59.1, kernel-xen-3.0.101-0.47.106.59.1 SUSE Linux Enterprise Point of Sale 11-SP3 (src):    kernel-default-3.0.101-0.47.106.59.1, kernel-ec2-3.0.101-0.47.106.59.1, kernel-pae-3.0.101-0.47.106.59.1, kernel-source-3.0.101-0.47.106.59.1, kernel-syms-3.0.101-0.47.106.59.1, kernel-trace-3.0.101-0.47.106.59.1, kernel-xen-3.0.101-0.47.106.59.1 SUSE Linux Enterprise Debuginfo 11-SP3 (src):    kernel-bigsmp-3.0.101-0.47.106.59.1, kernel-default-3.0.101-0.47.106.59.1, kernel-ec2-3.0.101-0.47.106.59.1, kernel-pae-3.0.101-0.47.106.59.1, kernel-trace-3.0.101-0.47.106.59.1, kernel-xen-3.0.101-0.47.106.59.1 ``` [Comment 51](show_bug.cgi?id=1094825#c51)  Swamp Workflow Management   2019-02-19 20:13:26 UTC  ``` SUSE-SU-2019:0439-1: An update that solves 13 vulnerabilities and has 43 fixes is now available.  Category: security (important) Bug References: 1012382,1023175,1042286,1065600,1065726,1070805,1084721,1086095,1086535,1091158,1091171,1091197,1094825,1095344,1098996,1099523,1099597,1100105,1101555,1103624,1104731,1105025,1105931,1106293,1107256,1107299,1107385,1107866,1108145,1108498,1109330,1110286,1110837,1111062,1113192,1113751,1113769,1114190,1114648,1114763,1115433,1115440,1116027,1116183,1116345,1117186,1117187,1118152,1118319,1119714,1119946,1119947,1120743,1120758,1121621,1123161 CVE References: CVE-2018-16862,CVE-2018-16884,CVE-2018-18281,CVE-2018-18386,CVE-2018-18690,CVE-2018-18710,CVE-2018-19824,CVE-2018-19985,CVE-2018-20169,CVE-2018-9516,CVE-2018-9568,CVE-2019-3459,CVE-2019-3460 Sources used: SUSE OpenStack Cloud 7 (src):    kernel-default-4.4.121-92.101.1, kernel-source-4.4.121-92.101.1, kernel-syms-4.4.121-92.101.1, kgraft-patch-SLE12-SP2_Update_27-1-3.3.1 SUSE Linux Enterprise Server for SAP 12-SP2 (src):    kernel-default-4.4.121-92.101.1, kernel-source-4.4.121-92.101.1, kernel-syms-4.4.121-92.101.1, kgraft-patch-SLE12-SP2_Update_27-1-3.3.1 SUSE Linux Enterprise Server 12-SP2-LTSS (src):    kernel-default-4.4.121-92.101.1, kernel-source-4.4.121-92.101.1, kernel-syms-4.4.121-92.101.1, kgraft-patch-SLE12-SP2_Update_27-1-3.3.1 SUSE Linux Enterprise Server 12-SP2-BCL (src):    kernel-default-4.4.121-92.101.1, kernel-source-4.4.121-92.101.1, kernel-syms-4.4.121-92.101.1 SUSE Linux Enterprise High Availability 12-SP2 (src):    kernel-default-4.4.121-92.101.1 SUSE Enterprise Storage 4 (src):    kernel-default-4.4.121-92.101.1, kernel-source-4.4.121-92.101.1, kernel-syms-4.4.121-92.101.1, kgraft-patch-SLE12-SP2_Update_27-1-3.3.1 OpenStack Cloud Magnum Orchestration 7 (src):    kernel-default-4.4.121-92.101.1 ``` [Comment 54](show_bug.cgi?id=1094825#c54)  Swamp Workflow Management   2019-05-17 19:18:03 UTC  ``` SUSE-SU-2019:1289-1: An update that solves 33 vulnerabilities and has 13 fixes is now available.  Category: security (important) Bug References: 1031240,1034862,1066674,1071021,1086535,1091171,1094825,1100001,1102517,1103097,1104475,1105025,1105296,1106913,1107829,1108498,1110768,1111331,1111516,1113751,1113769,1114648,1114920,1115007,1115038,1116345,1116841,1118152,1118319,1119714,1119946,1120743,1120758,1121621,1122015,1123161,1124010,1124728,1124732,1124735,1126890,1128166,1131416,1131427,1132828,1133188 CVE References: CVE-2016-10741,CVE-2017-1000407,CVE-2017-16533,CVE-2017-7273,CVE-2017-7472,CVE-2018-12126,CVE-2018-12127,CVE-2018-12130,CVE-2018-14633,CVE-2018-15572,CVE-2018-16884,CVE-2018-18281,CVE-2018-18386,CVE-2018-18690,CVE-2018-18710,CVE-2018-19407,CVE-2018-19824,CVE-2018-19985,CVE-2018-20169,CVE-2018-5391,CVE-2018-9516,CVE-2018-9568,CVE-2019-11091,CVE-2019-11486,CVE-2019-3459,CVE-2019-3460,CVE-2019-3882,CVE-2019-6974,CVE-2019-7221,CVE-2019-7222,CVE-2019-8564,CVE-2019-9213,CVE-2019-9503 Sources used: SUSE Linux Enterprise Server for SAP 12-SP1 (src):    kernel-default-3.12.74-60.64.110.1, kernel-source-3.12.74-60.64.110.1, kernel-syms-3.12.74-60.64.110.1, kernel-xen-3.12.74-60.64.110.1, lttng-modules-2.7.0-4.4.1 SUSE Linux Enterprise Server 12-SP1-LTSS (src):    kernel-default-3.12.74-60.64.110.1, kernel-source-3.12.74-60.64.110.1, kernel-syms-3.12.74-60.64.110.1, kernel-xen-3.12.74-60.64.110.1, lttng-modules-2.7.0-4.4.1 SUSE Linux Enterprise Module for Public Cloud 12 (src):    kernel-ec2-3.12.74-60.64.110.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 55](show_bug.cgi?id=1094825#c55)  Marcus Meissner   2019-07-11 05:50:36 UTC  ``` done ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1094825)
* - [XML](show_bug.cgi?ctype=xml&id=1094825)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1094825)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1094825)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from git.kernel.org_a5274d62_20250124_180435.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=966031f340185eddd05affcf72b740549f056348)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=966031f340185eddd05affcf72b740549f056348)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=966031f340185eddd05affcf72b740549f056348)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=966031f340185eddd05affcf72b740549f056348)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Linus Torvalds <torvalds@linux-foundation.org> | 2017-12-20 17:57:06 -0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2017-12-21 11:19:22 +0100 |
| commit | [966031f340185eddd05affcf72b740549f056348](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=966031f340185eddd05affcf72b740549f056348) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=966031f340185eddd05affcf72b740549f056348)) | |
| tree | [ba17e37be97558cff3068bab9387553480480820](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=966031f340185eddd05affcf72b740549f056348) | |
| parent | [50c4c4e268a2d7a3e58ebb698ac74da0de40ae36](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=50c4c4e268a2d7a3e58ebb698ac74da0de40ae36) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=966031f340185eddd05affcf72b740549f056348&id2=50c4c4e268a2d7a3e58ebb698ac74da0de40ae36)) | |
| download | [linux-966031f340185eddd05affcf72b740549f056348.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-966031f340185eddd05affcf72b740549f056348.tar.gz) | |

n\_tty: fix EXTPROC vs ICANON interaction with TIOCINQ (aka FIONREAD)We added support for EXTPROC back in 2010 in commit 26df6d13406d ("tty:
Add EXTPROC support for LINEMODE") and the intent was to allow it to
override some (all?) ICANON behavior. Quoting from that original commit
message:
There is a new bit in the termios local flag word, EXTPROC.
When this bit is set, several aspects of the terminal driver
are disabled. Input line editing, character echo, and mapping
of signals are all disabled. This allows the telnetd to turn
off these functions when in linemode, but still keep track of
what state the user wants the terminal to be in.
but the problem turns out that "several aspects of the terminal driver
are disabled" is a bit ambiguous, and you can really confuse the n\_tty
layer by setting EXTPROC and then causing some of the ICANON invariants
to no longer be maintained.
This fixes at least one such case (TIOCINQ) becoming unhappy because of
the confusion over whether ICANON really means ICANON when EXTPROC is set.
This basically makes TIOCINQ match the case of read: if EXTPROC is set,
we ignore ICANON. Also, make sure to reset the ICANON state ie EXTPROC
changes, not just if ICANON changes.
Fixes: 26df6d13406d ("tty: Add EXTPROC support for LINEMODE")
Reported-by: Tetsuo Handa <penguin-kernel@i-love.sakura.ne.jp>
Reported-by: syzkaller <syzkaller@googlegroups.com>
Cc: Jiri Slaby <jslaby@suse.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=966031f340185eddd05affcf72b740549f056348)

| -rw-r--r-- | [drivers/tty/n\_tty.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/drivers/tty/n_tty.c?id=966031f340185eddd05affcf72b740549f056348) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/tty/n\_tty.c b/drivers/tty/n\_tty.cindex 427e0d5d8f135e..539b49adb6afd4 100644--- a/[drivers/tty/n\_tty.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/tty/n_tty.c?id=50c4c4e268a2d7a3e58ebb698ac74da0de40ae36)+++ b/[drivers/tty/n\_tty.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/tty/n_tty.c?id=966031f340185eddd05affcf72b740549f056348)@@ -1762,7 +1762,7 @@ static void n\_tty\_set\_termios(struct tty\_struct \*tty, struct ktermios \*old) { struct n\_tty\_data \*ldata = tty->disc\_data; - if (!old || (old->c\_lflag ^ tty->termios.c\_lflag) & ICANON) {+ if (!old || (old->c\_lflag ^ tty->termios.c\_lflag) & (ICANON | EXTPROC)) { bitmap\_zero(ldata->read\_flags, N\_TTY\_BUF\_SIZE); ldata->line\_start = ldata->read\_tail; if (!L\_ICANON(tty) || !read\_cnt(ldata)) {@@ -2425,7 +2425,7 @@ static int n\_tty\_ioctl(struct tty\_struct \*tty, struct file \*file, return put\_user(tty\_chars\_in\_buffer(tty), (int \_\_user \*) arg); case TIOCINQ: down\_write(&tty->termios\_rwsem);- if (L\_ICANON(tty))+ if (L\_ICANON(tty) && !L\_EXTPROC(tty)) retval = inq\_canon(ldata); else retval = read\_cnt(ldata); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-24 18:03:12 +0000



=== Content from www.redhat.com_f9043cd6_20250126_024333.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_3e348684_20250126_024337.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_5336d29b_20250126_024336.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1641548)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1641548)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1641548)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1641548

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1641548**](show_bug.cgi?id=1641548)
(CVE-2018-18397)
- [CVE-2018-18397](https://access.redhat.com/security/cve/CVE-2018-18397) kernel: userfaultfd bypasses tmpfs file permissions

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2018-18397 kernel: userfaultfd bypasses tmpfs file permissions

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-18397 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | Duplicates (1): | [1640515](show_bug.cgi?id=1640515)  ([view as bug list](buglist.cgi?bug_id=1640515)) | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1640516](show_bug.cgi?id=1640516) [1640517](show_bug.cgi?id=1640517) [1640518](show_bug.cgi?id=1640518) [1640519](show_bug.cgi?id=1640519) [1657613](show_bug.cgi?id=1657613) [1657614](show_bug.cgi?id=1657614) [1657615](show_bug.cgi?id=1657615) [1657616](show_bug.cgi?id=1657616) [1658740](show_bug.cgi?id=1658740 "CLOSED CURRENTRELEASE - CVE-2018-18397 kernel: userfaultfd bypasses tmpfs file permissions [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1640512](show_bug.cgi?id=1640512) | | TreeView+ | [depends on](buglist.cgi?bug_id=1641548&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1641548&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2018-10-22 08:12 UTC by Wade Mealing | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-16 22:53 UTC ([History](show_activity.cgi?id=1641548)) | | [CC List:](page.cgi?id=fields.html#cclist) | 46 users (show)  acaringi airlied bhu blc brdeoliv bskeggs dhoward dvlasenk ewk fhrbata hdegoede hkrzesin hwkernel-mgr iboverma ichavero itamar jarodwilson jforbes jglisse jkacur john.j5live jonathan josef jross jstancek jwboyer kernel-maint kernel-mgr labbott lgoncalv linville matt mchehab mcressma mjg59 mlangsdo mvanderw nmurray plougher pmatouse rt-maint rvrbovsk security-response-team steved vdronov williams | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: | A flaw was found in the Linux kernel with files on tmpfs and hugetlbfs. An attacker is able to bypass file permissions on filesystems mounted with tmpfs/hugetlbs to modify a file and possibly disrupt normal system behavior. At this time there is an understanding there is no crash or privilege escalation but the impact of modifications on these filesystems of files in production systems may have adverse affects. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-06-10 10:40:46 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2019:0163](https://access.redhat.com/errata/RHSA-2019%3A0163) | 0 | None | None | None | 2019-01-29 17:23:47 UTC | | Red Hat Product Errata | [RHSA-2019:0202](https://access.redhat.com/errata/RHSA-2019%3A0202) | 0 | None | None | None | 2019-01-29 16:07:02 UTC | | Red Hat Product Errata | [RHSA-2019:0324](https://access.redhat.com/errata/RHSA-2019%3A0324) | 0 | None | None | None | 2019-02-12 15:28:08 UTC | | Red Hat Product Errata | [RHSA-2019:0831](https://access.redhat.com/errata/RHSA-2019%3A0831) | 0 | None | None | None | 2019-04-23 14:30:29 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1641548#c0)  Wade Mealing    2018-10-22 08:12:38 UTC  ``` A flaw was found in the Linux kernel with files on tmpfs and hugetlbfs.  An attacker is able to bypass file permissions on filesystems mounted with tmpfs/hugetlbs to modify a file and possibly disrupt normal system behaviour.  At this time there is an understanding there is no crash or priviledge escalation but the impact of modifications on these filesystems of files in production systems may have adverse affects.  A suggested upstream patch:  [https://lore.kernel.org/lkml/20181126173452.26955-1-aarcange@redhat.com/T/#u](https://lore.kernel.org/lkml/20181126173452.26955-1-aarcange%40redhat.com/T/#u)  An upstream patchset:  9e368259ad988356c4c95150fafd1a06af095d98 userfaultfd: use ENOENT instead of EFAULT if the atomic copy user fails 5b51072e97d587186c2f5390c8c9c1fb7e179505 userfaultfd: shmem: allocate anonymous memory for MAP_PRIVATE shmem 29ec90660d68bbdd69507c1c8b4e33aa299278b1 userfaultfd: shmem/hugetlbfs: only allow to register VM_MAYWRITE vmas e2a50c1f64145a04959df2442305d57307e5395a userfaultfd: shmem: add i_size checks dcf7fe9d89763a28e0f43975b422ff141fe79e43 userfaultfd: shmem: UFFDIO_COPY: set the page dirty if VM_WRITE is not set   ```  [Comment 3](show_bug.cgi?id=1641548#c3)  Petr Matousek    2018-11-27 10:27:56 UTC  ``` *** [Bug 1640515](show_bug.cgi?id=1640515) has been marked as a duplicate of this bug. ***   ```  [Comment 6](show_bug.cgi?id=1641548#c6)  Vladis Dronov    2018-12-12 18:56:13 UTC  ``` Created kernel tracking bugs for this issue:  Affects: fedora-all [[bug 1658740](show_bug.cgi?id=1658740 "CLOSED CURRENTRELEASE - CVE-2018-18397 kernel: userfaultfd bypasses tmpfs file permissions [fedora-all]")]   ```  [Comment 7](show_bug.cgi?id=1641548#c7)  errata-xmlrpc    2019-01-29 16:07:00 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7.5 Extended Update Support  Via RHSA-2019:0202 [https://access.redhat.com/errata/RHSA-2019:0202](https://access.redhat.com/errata/RHSA-2019%3A0202)   ```  [Comment 8](show_bug.cgi?id=1641548#c8)  errata-xmlrpc    2019-01-29 17:23:45 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2019:0163 [https://access.redhat.com/errata/RHSA-2019:0163](https://access.redhat.com/errata/RHSA-2019%3A0163)   ```  [Comment 9](show_bug.cgi?id=1641548#c9)  errata-xmlrpc    2019-02-12 15:28:06 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7.4 Extended Update Support  Via RHSA-2019:0324 [https://access.redhat.com/errata/RHSA-2019:0324](https://access.redhat.com/errata/RHSA-2019%3A0324)   ```  [Comment 10](show_bug.cgi?id=1641548#c10)  errata-xmlrpc    2019-04-23 14:30:25 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2019:0831 [https://access.redhat.com/errata/RHSA-2019:0831](https://access.redhat.com/errata/RHSA-2019%3A0831)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1641548&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_f7650669_20250126_024334.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1640598)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1640598)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1640598)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1640598

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1640598**](show_bug.cgi?id=1640598)
(CVE-2018-18386)
- [CVE-2018-18386](https://access.redhat.com/security/cve/CVE-2018-18386) kernel: Type confusion in drivers/tty/n\_tty.c allows for a denial of service

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2018-18386 kernel: Type confusion in drivers/tty/n\_tty.c allows for a den...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-18386 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1650106](show_bug.cgi?id=1650106) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1640599](show_bug.cgi?id=1640599) | | TreeView+ | [depends on](buglist.cgi?bug_id=1640598&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1640598&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2018-10-18 11:40 UTC by Andrej Nemec | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-16 22:53 UTC ([History](show_activity.cgi?id=1640598)) | | [CC List:](page.cgi?id=fields.html#cclist) | 49 users (show)  abhgupta acaringi airlied bhu blc brdeoliv bskeggs dbaker dhoward dvlasenk ewk fhrbata hdegoede hkrzesin hwkernel-mgr iboverma ichavero itamar jarodwilson jforbes jglisse jkacur john.j5live jokerman jonathan josef jross jstancek jwboyer kernel-maint kernel-mgr labbott lgoncalv linville matt mchehab mcressma mjg59 mlangsdo nmurray plougher rt-maint rvrbovsk slawomir steved sthangav trankin vdronov williams | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: | A security flaw was found in the Linux kernel in drivers/tty/n\_tty.c which allows local attackers (ones who are able to access pseudo terminals) to lock them up and block further usage of any pseudo terminal devices due to an EXTPROC versus ICANON confusion in TIOCINQ handler. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-06-10 10:40:42 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2019:0831](https://access.redhat.com/errata/RHSA-2019%3A0831) | 0 | None | None | None | 2019-04-23 14:30:29 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1640598#c0)  Andrej Nemec    2018-10-18 11:40:55 UTC  ``` drivers/tty/n_tty.c in the Linux kernel before 4.14.11 allows local attackers (who are able to access pseudo terminals) to hang/block further usage of any pseudo terminal devices due to an EXTPROC versus ICANON confusion in TIOCINQ.  References:  <https://syzkaller.appspot.com/bug?id=17a06459ecad660a3d00c3e41a4b1a7be6bca19e>  <https://marc.info/?t=151231153300001&r=1&w=2>  <https://marc.info/?t=151398650400001&r=1&w=2>  <http://lists.linux.it/pipermail/ltp/2018-May/008071.html>  An upstream patch:  <https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=966031f340185eddd05affcf72b740549f056348>   ```  [Comment 5](show_bug.cgi?id=1640598#c5)  errata-xmlrpc    2019-04-23 14:30:25 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2019:0831 [https://access.redhat.com/errata/RHSA-2019:0831](https://access.redhat.com/errata/RHSA-2019%3A0831)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1640598&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)


