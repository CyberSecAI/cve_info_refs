=== Content from github.com_48ee50eb_20250124_183638.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fspray%2Fspray-json%2Fissues%2F277)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fspray%2Fspray-json%2Fissues%2F277)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=spray%2Fspray-json)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[spray](/spray)
/
**[spray-json](/spray/spray-json)**
Public

* [Notifications](/login?return_to=%2Fspray%2Fspray-json) You must be signed in to change notification settings
* [Fork
  190](/login?return_to=%2Fspray%2Fspray-json)
* [Star
   973](/login?return_to=%2Fspray%2Fspray-json)

* [Code](/spray/spray-json)
* [Issues
  82](/spray/spray-json/issues)
* [Pull requests
  20](/spray/spray-json/pulls)
* [Actions](/spray/spray-json/actions)
* [Projects
  0](/spray/spray-json/projects)
* [Security](/spray/spray-json/security)
* [Insights](/spray/spray-json/pulse)

Additional navigation options

* [Code](/spray/spray-json)
* [Issues](/spray/spray-json/issues)
* [Pull requests](/spray/spray-json/pulls)
* [Actions](/spray/spray-json/actions)
* [Projects](/spray/spray-json/projects)
* [Security](/spray/spray-json/security)
* [Insights](/spray/spray-json/pulse)

# Denial of service when parsing JSON object with keys that have the same hash code #277

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Denial of service when parsing JSON object with keys that have the same hash code](#top)#277Copy linkLabels[Bug](https://github.com/spray/spray-json/issues?q=state%3Aopen%20label%3A%22Bug%22)[Security](https://github.com/spray/spray-json/issues?q=state%3Aopen%20label%3A%22Security%22)Milestone[1.3.5](https://github.com/spray/spray-json/milestone/5)[![@plokhotnyuk](https://avatars.githubusercontent.com/u/890289?u=111f284af4796a29da51286ffee017d6c7ef66f4&v=4&size=80)](/plokhotnyuk)
## Description

[![@plokhotnyuk](https://avatars.githubusercontent.com/u/890289?u=111f284af4796a29da51286ffee017d6c7ef66f4&v=4&size=48)](/plokhotnyuk)[plokhotnyuk](https://github.com/plokhotnyuk)opened [on Oct 15, 2018](https://github.com/spray/spray-json/issues/277#issue-370226059)

*Sub-quadratic* decreasing of throughput when number of JSON object fields (with keys that have the same hash code) is increasing

On contemporary CPUs parsing of such JSON object (with a sequence of 100000 fields like below that is ~1.6Mb) can took more than 160 seconds:

```
{
"!!sjyehe":null,
"!!sjyeiF":null,
"!!sjyej'":null,
"!!sjyfIe":null,
"!!sjyfJF":null,
...
}

```

Below are results of the benchmark where `size` is a number of such fields:

```
[info] REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
[info] why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
[info] experiments, perform baseline and negative tests that provide experimental control, make sure
[info] the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
[info] Do not assume the numbers tell you what you want them to tell.
[info] Benchmark                         (size)  (value)   Mode  Cnt        Score       Error  Units
[info] ExtractFieldsBenchmark.readSpray       1     null  thrpt    5  2349094.580 ± 95798.868  ops/s
[info] ExtractFieldsBenchmark.readSpray      10     null  thrpt    5   332512.199 ± 21344.082  ops/s
[info] ExtractFieldsBenchmark.readSpray     100     null  thrpt    5     7714.406 ±   709.439  ops/s
[info] ExtractFieldsBenchmark.readSpray    1000     null  thrpt    5       52.775 ±     3.951  ops/s
[info] ExtractFieldsBenchmark.readSpray   10000     null  thrpt    5        0.369 ±     0.076  ops/s
[info] ExtractFieldsBenchmark.readSpray  100000     null  thrpt    5        0.006 ±     0.002  ops/s

```
### Reproducible Test Case

To run that benchmarks on your JDK:

1. [Install latest version of `sbt`](https://www.scala-sbt.org/1.0/docs/Setup.html) and/or ensure that it already installed properly:

```
sbt about

```

2. Clone `jsoniter-scala` repo:

```
git clone https://github.com/plokhotnyuk/jsoniter-scala.git

```

3. Enter to the cloned directory and checkout for the specific branch:

```
cd jsoniter-scala
git checkout spray-json-DoS-by-hashmap-collisions

```

4. Run benchmarks using a path parameter to your JDK:

```
sbt -no-colors 'jsoniter-scala-benchmark/jmh:run -jvm /usr/lib/jvm/jdk-11/bin/java -wi 2 -i 5 -p value=null .*ExtractFieldsBench.*Spray.*'

```
## Metadata

### Assignees

No one assigned

### Labels

[Bug](https://github.com/spray/spray-json/issues?q=state%3Aopen%20label%3A%22Bug%22)[Security](https://github.com/spray/spray-json/issues?q=state%3Aopen%20label%3A%22Security%22)
### Type

No type
### Projects

No projects
### Milestone

* [1.3.5](https://github.com/spray/spray-json/milestone/5)
### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


