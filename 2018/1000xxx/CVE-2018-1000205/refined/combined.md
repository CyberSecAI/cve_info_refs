=== Content from lists.denx.de_9b853ebd_20250125_063614.html ===

# [U-Boot] Verified boot production uses question

**Teddy Reed**
teddy.reed at gmail.com

*Thu Jun 7 17:27:15 UTC 2018*

* Previous message: [[U-Boot] u-boot: Fix several typos](331622.html)
* Next message: [[U-Boot] Verified boot production uses question](330900.html)
* **Messages sorted by:**
  [[ date ]](date.html#330898)
  [[ thread ]](thread.html#330898)
  [[ subject ]](subject.html#330898)
  [[ author ]](author.html#330898)

---

```
Hi all, question, is anyone using the U-Boot verified-boot in production?

I am using configuration verification for several OpenCompute/OpenBMC
boards. After a deep-dive review I found some edge cases that in rare
circumstances could lead to a signature check bypass. I think this is
low-risk at best since the scenario requires special hardware behavior
to exist. Our board were susceptible in the general sense, but we had
implemented some additional sanity checks on the FIT structures that
prevented this.

There are some proposed changes that attempt to mitigate this [1],
[2], [3]. Any one of these changes mitigates the bypass scenario. If
you don't mind reaching out to me I can share the exact
situation/details.

[1] <https://lists.denx.de/pipermail/u-boot/2018-June/330454.html>
[2] <https://lists.denx.de/pipermail/u-boot/2018-June/330487.html>
[3] <https://lists.denx.de/pipermail/u-boot/2018-June/330599.html>

Thanks,
-Teddy

```

---

* Previous message: [[U-Boot] u-boot: Fix several typos](331622.html)
* Next message: [[U-Boot] Verified boot production uses question](330900.html)
* **Messages sorted by:**
  [[ date ]](date.html#330898)
  [[ thread ]](thread.html#330898)
  [[ subject ]](subject.html#330898)
  [[ author ]](author.html#330898)

---

[More information about the U-Boot
mailing list](https://lists.denx.de/listinfo/u-boot)



=== Content from lists.denx.de_fb0ff906_20250125_063614.html ===

# [U-Boot] [PATCH] vboot: Do not use hashed-strings offset

**Teddy Reed**
teddy.reed at gmail.com

*Sun Jun 3 18:46:50 UTC 2018*

* Previous message: [[U-Boot] [PATCH 1/1] rockchip: doc: clarify usage of CONFIG\_SPL\_ROCKCHIP\_BACK\_TO\_BROM](330906.html)
* Next message: [[U-Boot] [PATCH] vboot: Do not use hashed-strings offset](330910.html)
* **Messages sorted by:**
  [[ date ]](date.html#330454)
  [[ thread ]](thread.html#330454)
  [[ subject ]](subject.html#330454)
  [[ author ]](author.html#330454)

---

```

The hashed-strings signature property includes two uint32_t values.
The first is unneeded as there should never be a start offset into the
strings region. The second, the size, is needed because the added
signature node appends to this region.

See tools/image-host.c, where a static 0 value is used for the offset.

Signed-off-by: Teddy Reed <[teddy.reed at gmail.com](https://lists.denx.de/listinfo/u-boot)>
---
 common/image-sig.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/common/image-sig.c b/common/image-sig.c
index f65d883..9b0a872 100644
--- a/common/image-sig.c
+++ b/common/image-sig.c
@@ -372,8 +372,7 @@ int fit_config_check_sig(const void *fit, int noffset, int required_keynode,
 	/* Add the strings */
 	strings = fdt_getprop(fit, noffset, "hashed-strings", NULL);
 	if (strings) {
-		fdt_regions[count].offset = fdt_off_dt_strings(fit) +
-				fdt32_to_cpu(strings[0]);
+		fdt_regions[count].offset = fdt_off_dt_strings(fit);
 		fdt_regions[count].size = fdt32_to_cpu(strings[1]);
 		count++;
 	}
--
2.7.4

```

---

* Previous message: [[U-Boot] [PATCH 1/1] rockchip: doc: clarify usage of CONFIG\_SPL\_ROCKCHIP\_BACK\_TO\_BROM](330906.html)
* Next message: [[U-Boot] [PATCH] vboot: Do not use hashed-strings offset](330910.html)
* **Messages sorted by:**
  [[ date ]](date.html#330454)
  [[ thread ]](thread.html#330454)
  [[ subject ]](subject.html#330454)
  [[ author ]](author.html#330454)

---

[More information about the U-Boot
mailing list](https://lists.denx.de/listinfo/u-boot)


