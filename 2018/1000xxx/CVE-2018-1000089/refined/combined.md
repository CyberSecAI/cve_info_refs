=== Content from github.com_f145e74d_20250125_221521.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fanymail%2Fdjango-anymail%2Freleases%2Ftag%2Fv1.4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fanymail%2Fdjango-anymail%2Freleases%2Ftag%2Fv1.4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=anymail%2Fdjango-anymail)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[anymail](/anymail)
/
**[django-anymail](/anymail/django-anymail)**
Public

* [Notifications](/login?return_to=%2Fanymail%2Fdjango-anymail) You must be signed in to change notification settings
* [Fork
  133](/login?return_to=%2Fanymail%2Fdjango-anymail)
* [Star
   1.7k](/login?return_to=%2Fanymail%2Fdjango-anymail)

* [Code](/anymail/django-anymail/tree/v1.4)
* [Issues
  5](/anymail/django-anymail/issues)
* [Pull requests
  3](/anymail/django-anymail/pulls)
* [Discussions](/anymail/django-anymail/discussions)
* [Actions](/anymail/django-anymail/actions)
* [Security](/anymail/django-anymail/security)
* [Insights](/anymail/django-anymail/pulse)

Additional navigation options

* [Code](/anymail/django-anymail/tree/v1.4)
* [Issues](/anymail/django-anymail/issues)
* [Pull requests](/anymail/django-anymail/pulls)
* [Discussions](/anymail/django-anymail/discussions)
* [Actions](/anymail/django-anymail/actions)
* [Security](/anymail/django-anymail/security)
* [Insights](/anymail/django-anymail/pulse)

1. [Releases](/anymail/django-anymail/releases)
2. [v1.4](/anymail/django-anymail/releases/tag/v1.4)

# v1.4

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/anymail/django-anymail/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v1.4)

 Loading

[View all tags](/anymail/django-anymail/tags)

![@medmunds](https://avatars.githubusercontent.com/u/639984?s=40&v=4)
[medmunds](/medmunds)
released this
08 Feb 20:10

·
[160 commits](/anymail/django-anymail/compare/v1.4...master)
to master
since this release

[v1.4](/anymail/django-anymail/tree/v1.4)

[`fffd762`](/anymail/django-anymail/commit/fffd762f56c6e6a567950240c59494a614e1ed8f)

**Security fix**

This fixes a low severity security issue affecting Anymail v0.2–v1.3. ([CVE-2018-1000089](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-1000089))

Django error reporting includes the value of your Anymail WEBHOOK\_AUTHORIZATION setting. In a properly-configured deployment, this should not be cause for concern. But if you have somehow exposed your Django error reports (e.g., by mis-deploying with DEBUG=True or by sending error reports through insecure channels), anyone who gains access to those reports could discover your webhook shared secret. An attacker could use this to post fabricated or malicious Anymail tracking/inbound events to your app, if you are using those Anymail features.

The fix renames Anymail's webhook shared secret setting so that Django's error reporting mechanism will [sanitize](https://docs.djangoproject.com/en/stable/ref/settings/#debug) it.

If you are using Anymail's event tracking and/or inbound webhooks, you should upgrade to this release and change "WEBHOOK\_AUTHORIZATION" to "WEBHOOK\_SECRET" in the ANYMAIL section of your settings.py. You may also want to [rotate the shared secret](https://anymail.readthedocs.io/en/stable/tips/securing_webhooks/#use-a-shared-authorization-secret) value, particularly if you have ever exposed your Django error reports to untrusted individuals.

If you are only using Anymail's EmailBackends for sending email and have not set up Anymail's webhooks, this issue does not affect you.

The old WEBHOOK\_AUTHORIZATION setting is still allowed in this release, but will issue a system-check warning when running most Django management commands. It will be removed completely in a near-future release, as a breaking change.

Thanks to Charlie DeTar ([@yourcelf](https://github.com/yourcelf)) for responsibly reporting this security issue through private channels.

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_2c3e13a3_20250125_221520.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fanymail%2Fdjango-anymail%2Fcommit%2F1a6086f2b58478d71f89bf27eb034ed81aefe5ef)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fanymail%2Fdjango-anymail%2Fcommit%2F1a6086f2b58478d71f89bf27eb034ed81aefe5ef)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=anymail%2Fdjango-anymail)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[anymail](/anymail)
/
**[django-anymail](/anymail/django-anymail)**
Public

* [Notifications](/login?return_to=%2Fanymail%2Fdjango-anymail) You must be signed in to change notification settings
* [Fork
  133](/login?return_to=%2Fanymail%2Fdjango-anymail)
* [Star
   1.7k](/login?return_to=%2Fanymail%2Fdjango-anymail)

* [Code](/anymail/django-anymail)
* [Issues
  5](/anymail/django-anymail/issues)
* [Pull requests
  3](/anymail/django-anymail/pulls)
* [Discussions](/anymail/django-anymail/discussions)
* [Actions](/anymail/django-anymail/actions)
* [Security](/anymail/django-anymail/security)
* [Insights](/anymail/django-anymail/pulse)

Additional navigation options

* [Code](/anymail/django-anymail)
* [Issues](/anymail/django-anymail/issues)
* [Pull requests](/anymail/django-anymail/pulls)
* [Discussions](/anymail/django-anymail/discussions)
* [Actions](/anymail/django-anymail/actions)
* [Security](/anymail/django-anymail/security)
* [Insights](/anymail/django-anymail/pulse)

## Commit

[Permalink](/anymail/django-anymail/commit/1a6086f2b58478d71f89bf27eb034ed81aefe5ef)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Security: rename WEBHOOK\_AUTHORIZATION --> WEBHOOK\_SECRET

[Browse files](/anymail/django-anymail/tree/1a6086f2b58478d71f89bf27eb034ed81aefe5ef)
Browse the repository at this point in the history

```
This fixes a low severity security issue affecting Anymail v0.2--v1.3.

Django error reporting includes the value of your Anymail
WEBHOOK_AUTHORIZATION setting. In a properly-configured deployment,
this should not be cause for concern. But if you have somehow exposed
your Django error reports (e.g., by mis-deploying with DEBUG=True or by
sending error reports through insecure channels), anyone who gains
access to those reports could discover your webhook shared secret. An
attacker could use this to post fabricated or malicious Anymail
tracking/inbound events to your app, if you are using those Anymail
features.

The fix renames Anymail's webhook shared secret setting so that
Django's error reporting mechanism will [sanitize][0] it.

If you are using Anymail's event tracking and/or inbound webhooks, you
should upgrade to this release and change "WEBHOOK_AUTHORIZATION" to
"WEBHOOK_SECRET" in the ANYMAIL section of your settings.py. You may
also want to [rotate the shared secret][1] value, particularly if you
have ever exposed your Django error reports to untrusted individuals.

If you are only using Anymail's EmailBackends for sending email and
have not set up Anymail's webhooks, this issue does not affect you.

The old WEBHOOK_AUTHORIZATION setting is still allowed in this release,
but will issue a system-check warning when running most Django
management commands. It will be removed completely in a near-future
release, as a breaking change.

Thanks to Charlie DeTar ([@yourcelf](https://github.com/yourcelf)) for responsibly reporting this
security issue through private channels.

[0]: <https://docs.djangoproject.com/en/stable/ref/settings/#debug>
[1]: <https://anymail.readthedocs.io/en/1.4/tips/securing_webhooks/#use-a-shared-authorization-secret>
```

* Loading branch information

[![@medmunds](https://avatars.githubusercontent.com/u/639984?s=40&v=4)](/medmunds)

[medmunds](/anymail/django-anymail/commits?author=medmunds "View all commits by medmunds")
committed
Feb 8, 2018

1 parent
[4d34a18](/anymail/django-anymail/commit/4d34a181b6daab2a6758ec95c7ad21051d29acad)

commit 1a6086f

 Show file tree

 Hide file tree

Showing
**14 changed files**
with
**99 additions**
and
**29 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* anymail

  + anymail/apps.py
    [apps.py](#diff-2f6111f278278e05ec174e43e677b5506042526ecab301a4fc52bc7080c236f6)
  + anymail/checks.py
    [checks.py](#diff-8eb09d0d6e21384bca9b65eec56e1bec3a7395044e9a669469d2c71d04216ce2)
  + webhooks

    - anymail/webhooks/base.py
      [base.py](#diff-1b12142a0415d2da65c4e9779337da4b1167c4cada29a7da1841f0198142bb69)
* docs

  + esps

    - docs/esps/mailgun.rst
      [mailgun.rst](#diff-82bc9f74bc9e3d4237997fb2602c69ca54a04b17be766c64fbc163387aa01f82)
    - docs/esps/mailjet.rst
      [mailjet.rst](#diff-2e9b8079f7144707c59dbd493caee26ad9fd3657de4b0b688cd7fb40eb00de8a)
    - docs/esps/mandrill.rst
      [mandrill.rst](#diff-63ab65662e4c3947032d50f9e9f7509b84ea91bee67d5cedd52fae34e2aea21a)
    - docs/esps/postmark.rst
      [postmark.rst](#diff-d4eeaa3560998a5ccf5c7d288cdac5adb9bf1a5ac2ec19e5efa22e9a6a37997c)
    - docs/esps/sendgrid.rst
      [sendgrid.rst](#diff-3460fdfcf5f738050c6d1163a9515437923d1a28ad78539f0b3cd9aba24f79a9)
    - docs/esps/sparkpost.rst
      [sparkpost.rst](#diff-c6e2e2ff38bd1abedf444c3c20c2b8199767e48b6a96c4918254efcfb1821381)
  + docs/installation.rst
    [installation.rst](#diff-d9b149498982c0663c3b7170398773361ed5678f1a627e9c2fd8d2c955c563db)
  + tips

    - docs/tips/securing\_webhooks.rst
      [securing\_webhooks.rst](#diff-4926e3667a1aa209fa4532b8c7fb794eb49285bf1ebd3685a40c54c8b88b17f2)
* tests

  + tests/test\_checks.py
    [test\_checks.py](#diff-52bfcb3a0792bda957db5321587e4b300aefaf46f61e549442e519dc0ea81716)
  + tests/test\_mandrill\_webhooks.py
    [test\_mandrill\_webhooks.py](#diff-10b09b7b7875a411f022c8f4cc91bb849d0fd7fd8f41fb3d4a948f4dca991056)
  + tests/webhook\_cases.py
    [webhook\_cases.py](#diff-bdb57ca08755171851376cc950f0bd6d80500dcbbe4ccdd990df0a3cb82f21c9)

## There are no files selected for viewing

5 changes: 4 additions & 1 deletion

5
[anymail/apps.py](#diff-2f6111f278278e05ec174e43e677b5506042526ecab301a4fc52bc7080c236f6 "anymail/apps.py")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/anymail/apps.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,9 +1,12 @@ |
|  |  | from django.apps import AppConfig |
|  |  | from django.core import checks |
|  |  |  |
|  |  | from .checks import check\_deprecated\_settings |
|  |  |  |
|  |  |  |
|  |  | class AnymailBaseConfig(AppConfig): |
|  |  | name = 'anymail' |
|  |  | verbose\_name = "Anymail" |
|  |  |  |
|  |  | def ready(self): |
|  |  | pass |
|  |  | checks.register(check\_deprecated\_settings) |

24 changes: 24 additions & 0 deletions

24
[anymail/checks.py](#diff-8eb09d0d6e21384bca9b65eec56e1bec3a7395044e9a669469d2c71d04216ce2 "anymail/checks.py")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/anymail/checks.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,24 @@ |
|  |  | from django.conf import settings |
|  |  | from django.core import checks |
|  |  |  |
|  |  |  |
|  |  | def check\_deprecated\_settings(app\_configs, \*\*kwargs): |
|  |  | errors = [] |
|  |  |  |
|  |  | anymail\_settings = getattr(settings, "ANYMAIL", {}) |
|  |  |  |
|  |  | # anymail.W001: rename WEBHOOK\_AUTHORIZATION to WEBHOOK\_SECRET |
|  |  | if "WEBHOOK\_AUTHORIZATION" in anymail\_settings: |
|  |  | errors.append(checks.Warning( |
|  |  | "The ANYMAIL setting 'WEBHOOK\_AUTHORIZATION' has been renamed 'WEBHOOK\_SECRET' to improve security.", |
|  |  | hint="You must update your settings.py. The old name will stop working in a near-future release.", |
|  |  | id="anymail.W001", |
|  |  | )) |
|  |  | if hasattr(settings, "ANYMAIL\_WEBHOOK\_AUTHORIZATION"): |
|  |  | errors.append(checks.Warning( |
|  |  | "The ANYMAIL\_WEBHOOK\_AUTHORIZATION setting has been renamed ANYMAIL\_WEBHOOK\_SECRET to improve security.", |
|  |  | hint="You must update your settings.py. The old name will stop working in a near-future release.", |
|  |  | id="anymail.W001", |
|  |  | )) |
|  |  |  |
|  |  | return errors |

8 changes: 6 additions & 2 deletions

8
[anymail/webhooks/base.py](#diff-1b12142a0415d2da65c4e9779337da4b1167c4cada29a7da1841f0198142bb69 "anymail/webhooks/base.py")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/anymail/webhooks/base.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -24,15 +24,19 @@ class AnymailBasicAuthMixin(object): |
|  |  | basic\_auth = None # (Declaring class attr allows override by kwargs in View.as\_view.) |
|  |  |  |
|  |  | def \_\_init\_\_(self, \*\*kwargs): |
|  |  | self.basic\_auth = get\_anymail\_setting('webhook\_authorization', default=[], |
|  |  | self.basic\_auth = get\_anymail\_setting('webhook\_secret', default=[], |
|  |  | kwargs=kwargs) # no esp\_name -- auth is shared between ESPs |
|  |  | if not self.basic\_auth: |
|  |  | # Temporarily allow deprecated WEBHOOK\_AUTHORIZATION setting |
|  |  | self.basic\_auth = get\_anymail\_setting('webhook\_authorization', default=[], kwargs=kwargs) |
|  |  |  |
|  |  | # Allow a single string: |
|  |  | if isinstance(self.basic\_auth, six.string\_types): |
|  |  | self.basic\_auth = [self.basic\_auth] |
|  |  | if self.warn\_if\_no\_basic\_auth and len(self.basic\_auth) < 1: |
|  |  | warnings.warn( |
|  |  | "Your Anymail webhooks are insecure and open to anyone on the web. " |
|  |  | "You should set WEBHOOK\_AUTHORIZATION in your ANYMAIL settings. " |
|  |  | "You should set WEBHOOK\_SECRET in your ANYMAIL settings. " |
|  |  | "See 'Securing webhooks' in the Anymail docs.", |
|  |  | AnymailInsecureWebhookWarning) |
|  |  | # noinspection PyArgumentList |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[docs/esps/mailgun.rst](#diff-82bc9f74bc9e3d4237997fb2602c69ca54a04b17be766c64fbc163387aa01f82 "docs/esps/mailgun.rst")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/docs/esps/mailgun.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -197,7 +197,7 @@ for all events you want to receive: |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/mailgun/tracking/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | If you use multiple Mailgun sending domains, you'll need to enter the webhook |
| Expand Down  Expand Up | | @@ -232,7 +232,7 @@ The \*action\* for your route will be either: |
|  |  | :samp:`forward("https://{random}:{random}@{yoursite.example.com}/anymail/mailgun/inbound/")` |
|  |  | :samp:`forward("https://{random}:{random}@{yoursite.example.com}/anymail/mailgun/inbound\_mime/")` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | Anymail accepts either of Mailgun's "fully-parsed" (.../inbound/) and "raw MIME" (.../inbound\_mime/) |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[docs/esps/mailjet.rst](#diff-2e9b8079f7144707c59dbd493caee26ad9fd3657de4b0b688cd7fb40eb00de8a "docs/esps/mailjet.rst")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/docs/esps/mailjet.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -232,7 +232,7 @@ the url in your Mailjet account REST API settings under `Event tracking (trigger |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/mailjet/tracking/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | Be sure to enter the URL in the Mailjet settings for all the event types you want to receive. |
| Expand Down  Expand Up | | @@ -263,7 +263,7 @@ The parseroute Url parameter will be: |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/mailjet/inbound/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | Once you've done Mailjet's "basic setup" to configure the Parse API webhook, you can skip |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[docs/esps/mandrill.rst](#diff-63ab65662e4c3947032d50f9e9f7509b84ea91bee67d5cedd52fae34e2aea21a "docs/esps/mandrill.rst")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/docs/esps/mandrill.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -206,7 +206,7 @@ requires deploying your Django project twice: |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/mandrill/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  | \* (Note: Unlike Anymail's other supported ESPs, the Mandrill webhook uses this |
|  |  | single url for both tracking and inbound events.) |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[docs/esps/postmark.rst](#diff-d4eeaa3560998a5ccf5c7d288cdac5adb9bf1a5ac2ec19e5efa22e9a6a37997c "docs/esps/postmark.rst")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/docs/esps/postmark.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -181,7 +181,7 @@ want to receive all these types of events): |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/postmark/tracking/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | Anymail doesn't care about the "include bounce content" and "post only on first open" |
| Expand Down  Expand Up | | @@ -216,7 +216,7 @@ The InboundHookUrl setting will be: |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/postmark/inbound/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | Anymail handles the "parse an email" part of Postmark's instructions for you, but you'll |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[docs/esps/sendgrid.rst](#diff-3460fdfcf5f738050c6d1163a9515437923d1a28ad78539f0b3cd9aba24f79a9 "docs/esps/sendgrid.rst")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/docs/esps/sendgrid.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -284,7 +284,7 @@ the url in your `SendGrid mail settings`\_, under "Event Notification": |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/sendgrid/tracking/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | Be sure to check the boxes in the SendGrid settings for the event types you want to receive. |
| Expand Down  Expand Up | | @@ -315,7 +315,7 @@ The Destination URL setting will be: |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/sendgrid/inbound/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | Be sure the URL has a trailing slash. (SendGrid's inbound processing won't follow Django's |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[docs/esps/sparkpost.rst](#diff-c6e2e2ff38bd1abedf444c3c20c2b8199767e48b6a96c4918254efcfb1821381 "docs/esps/sparkpost.rst")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/docs/esps/sparkpost.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -197,7 +197,7 @@ webhook in your `SparkPost account settings under "Webhooks"`\_: |
|  |  |  |
|  |  | \* Target URL: :samp:`https://{yoursite.example.com}/anymail/sparkpost/tracking/` |
|  |  | \* Authentication: choose "Basic Auth." For username and password enter the two halves of the |
|  |  | \*random:random\* shared secret you created for your :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` |
|  |  | \*random:random\* shared secret you created for your :setting:`ANYMAIL\_WEBHOOK\_SECRET` |
|  |  | Django setting. (Anymail doesn't support OAuth webhook auth.) |
|  |  | \* Events: click "Select" and then \*clear\* the checkbox for "Relay Events" category (which is for |
|  |  | inbound email). You can leave all the other categories of events checked, or disable |
| Expand Down  Expand Up | | @@ -235,7 +235,7 @@ The target parameter for the Relay Webhook will be: |
|  |  |  |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/sparkpost/inbound/` |
|  |  |  |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` shared secret |
|  |  | \* \*random:random\* is an :setting:`ANYMAIL\_WEBHOOK\_SECRET` shared secret |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  |  |
|  |  | .. \_Enabling Inbound Email Relaying: |
| Expand Down | |  |

20 changes: 13 additions & 7 deletions

20
[docs/installation.rst](#diff-d9b149498982c0663c3b7170398773361ed5678f1a627e9c2fd8d2c955c563db "docs/installation.rst")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/docs/installation.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -98,22 +98,22 @@ Skip this section if you won't be using Anymail's webhooks. |
|  |  | or subject your app to malicious input data. |
|  |  |  |
|  |  | At a minimum, your site should \*\*use https\*\* and you should |
|  |  | configure \*\*webhook authorization\*\* as described below. |
|  |  | configure a \*\*webhook secret\*\* as described below. |
|  |  |  |
|  |  | See :ref:`securing-webhooks` for additional information. |
|  |  |  |
|  |  |  |
|  |  | If you want to use Anymail's inbound or tracking webhooks: |
|  |  |  |
|  |  | 1. In your :file:`settings.py`, add |
|  |  | :setting:`WEBHOOK\_AUTHORIZATION <ANYMAIL\_WEBHOOK\_AUTHORIZATION>` |
|  |  | :setting:`WEBHOOK\_SECRET <ANYMAIL\_WEBHOOK\_SECRET>` |
|  |  | to the ``ANYMAIL`` block: |
|  |  |  |
|  |  | .. code-block:: python |
|  |  |  |
|  |  | ANYMAIL = { |
|  |  | ... |
|  |  | 'WEBHOOK\_AUTHORIZATION': '<a random string>:<another random string>', |
|  |  | 'WEBHOOK\_SECRET': '<a random string>:<another random string>', |
|  |  | } |
|  |  |  |
|  |  | This setting should be a string with two sequences of random characters, |
| Expand All | | @@ -133,7 +133,7 @@ If you want to use Anymail's inbound or tracking webhooks: |
|  |  |  |
|  |  | (This setting is actually an HTTP basic auth string. You can also set it |
|  |  | to a list of auth strings, to simplify credential rotation or use different auth |
|  |  | with different ESPs. See :setting:`ANYMAIL\_WEBHOOK\_AUTHORIZATION` in the |
|  |  | with different ESPs. See :setting:`ANYMAIL\_WEBHOOK\_SECRET` in the |
|  |  | :ref:`securing-webhooks` docs for more details.) |
|  |  |  |
|  |  |  |
| Expand All | | @@ -160,7 +160,7 @@ If you want to use Anymail's inbound or tracking webhooks: |
|  |  | :samp:`https://{random}:{random}@{yoursite.example.com}/anymail/{esp}/{type}/` |
|  |  |  |
|  |  | \* "https" (rather than http) is \*strongly recommended\* |
|  |  | \* \*random:random\* is the WEBHOOK\_AUTHORIZATION string you created in step 1 |
|  |  | \* \*random:random\* is the WEBHOOK\_SECRET string you created in step 1 |
|  |  | \* \*yoursite.example.com\* is your Django site |
|  |  | \* "anymail" is the url prefix (from step 2) |
|  |  | \* \*esp\* is the lowercase name of your ESP (e.g., "sendgrid" or "mailgun") |
| Expand Down  Expand Up | | @@ -266,20 +266,26 @@ Set to `True` to ignore these problems and send the email anyway. See |
|  |  | :ref:`unsupported-features`. (Default `False`.) |
|  |  |  |
|  |  |  |
|  |  | .. rubric:: WEBHOOK\_AUTHORIZATION |
|  |  | .. rubric:: WEBHOOK\_SECRET |
|  |  |  |
|  |  | A `'random:random'` shared secret string. Anymail will reject incoming webhook calls |
|  |  | from your ESP that don't include this authorization. You can also give a list of |
|  |  | shared secret strings, and Anymail will allow ESP webhook calls that match any of them |
|  |  | (to facilitate credential rotation). See :ref:`securing-webhooks`. |
|  |  |  |
|  |  | Default is unset, which leaves your webhooks insecure. Anymail |
|  |  | will warn if you try to use webhooks with setting up authorization. |
|  |  | will warn if you try to use webhooks without a shared secret. |
|  |  |  |
|  |  | This is actually implemented using HTTP basic authorization, and the string is |
|  |  | technically a "username:password" format. But you should \*not\* use any real |
|  |  | username or password for this shared secret. |
|  |  |  |
|  |  | .. versionchanged:: 1.4 |
|  |  |  |
|  |  | The earlier WEBHOOK\_AUTHORIZATION setting was renamed WEBHOOK\_SECRET, so that |
|  |  | Django error reporting sanitizes it. The old name is still allowed in v1.4, |
|  |  | but will be removed in a near-future release. You should update your settings. |
|  |  |  |
|  |  |  |
|  |  | .. setting:: ANYMAIL\_REQUESTS\_TIMEOUT |
|  |  |  |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[docs/tips/securing\_webhooks.rst](#diff-4926e3667a1aa209fa4532b8c7fb794eb49285bf1ebd3685a40c54c8b88b17f2 "docs/tips/securing_webhooks.rst")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/docs/tips/securing_webhooks.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -29,7 +29,7 @@ If you aren't able to use https on your Django site, then you should |
|  |  | not set up your ESP's webhooks. |
|  |  |  |
|  |  |  |
|  |  | .. setting:: ANYMAIL\_WEBHOOK\_AUTHORIZATION |
|  |  | .. setting:: ANYMAIL\_WEBHOOK\_SECRET |
|  |  |  |
|  |  | Use a shared authorization secret |
|  |  | --------------------------------- |
| Expand All | | @@ -41,7 +41,7 @@ with webhook data, to prove the post is coming from your ESP. |
|  |  |  |
|  |  | Most ESPs recommend using HTTP basic authorization as this shared |
|  |  | secret. Anymail includes support for this, via the |
|  |  | :setting:`!ANYMAIL\_WEBHOOK\_AUTHORIZATION` setting. |
|  |  | :setting:`!ANYMAIL\_WEBHOOK\_SECRET` setting. |
|  |  | Basic usage is covered in the |
|  |  | :ref:`webhooks configuration <webhooks-configuration>` docs. |
|  |  |  |
| Expand All | | @@ -60,7 +60,7 @@ any of the authorization strings: |
|  |  |  |
|  |  | ANYMAIL = { |
|  |  | ... |
|  |  | 'WEBHOOK\_AUTHORIZATION': [ |
|  |  | 'WEBHOOK\_SECRET': [ |
|  |  | 'abcdefghijklmnop:qrstuvwxyz0123456789', |
|  |  | 'ZYXWVUTSRQPONMLK:JIHGFEDCBA9876543210', |
|  |  | ], |
| Expand Down | |  |

27 changes: 27 additions & 0 deletions

27
[tests/test\_checks.py](#diff-52bfcb3a0792bda957db5321587e4b300aefaf46f61e549442e519dc0ea81716 "tests/test_checks.py")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/tests/test_checks.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,27 @@ |
|  |  | from django.core import checks |
|  |  | from django.test import SimpleTestCase |
|  |  | from django.test.utils import override\_settings |
|  |  |  |
|  |  | from anymail.checks import check\_deprecated\_settings |
|  |  |  |
|  |  | from .utils import AnymailTestMixin |
|  |  |  |
|  |  |  |
|  |  | class DeprecatedSettingsTests(SimpleTestCase, AnymailTestMixin): |
|  |  | @override\_settings(ANYMAIL={"WEBHOOK\_AUTHORIZATION": "abcde:12345"}) |
|  |  | def test\_webhook\_authorization(self): |
|  |  | errors = check\_deprecated\_settings(None) |
|  |  | self.assertEqual(errors, [checks.Warning( |
|  |  | "The ANYMAIL setting 'WEBHOOK\_AUTHORIZATION' has been renamed 'WEBHOOK\_SECRET' to improve security.", |
|  |  | hint="You must update your settings.py. The old name will stop working in a near-future release.", |
|  |  | id="anymail.W001", |
|  |  | )]) |
|  |  |  |
|  |  | @override\_settings(ANYMAIL\_WEBHOOK\_AUTHORIZATION="abcde:12345", ANYMAIL={}) |
|  |  | def test\_anymail\_webhook\_authorization(self): |
|  |  | errors = check\_deprecated\_settings(None) |
|  |  | self.assertEqual(errors, [checks.Warning( |
|  |  | "The ANYMAIL\_WEBHOOK\_AUTHORIZATION setting has been renamed ANYMAIL\_WEBHOOK\_SECRET to improve security.", |
|  |  | hint="You must update your settings.py. The old name will stop working in a near-future release.", |
|  |  | id="anymail.W001", |
|  |  | )]) |

6 changes: 3 additions & 3 deletions

6
[tests/test\_mandrill\_webhooks.py](#diff-10b09b7b7875a411f022c8f4cc91bb849d0fd7fd8f41fb3d4a948f4dca991056 "tests/test_mandrill_webhooks.py")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/tests/test_mandrill_webhooks.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -87,7 +87,7 @@ def test\_verifies\_bad\_signature(self): |
|  |  | response = self.client.post(\*\*kwargs) |
|  |  | self.assertEqual(response.status\_code, 400) |
|  |  |  |
|  |  | @override\_settings(ANYMAIL={}) # clear WEBHOOK\_AUTHORIZATION from WebhookTestCase |
|  |  | @override\_settings(ANYMAIL={}) # clear WEBHOOK\_SECRET from WebhookTestCase |
|  |  | def test\_no\_basic\_auth(self): |
|  |  | # Signature validation should work properly if you're not using basic auth |
|  |  | self.clear\_basic\_auth() |
| Expand All | | @@ -99,7 +99,7 @@ def test\_no\_basic\_auth(self): |
|  |  | ALLOWED\_HOSTS=['127.0.0.1', '.example.com'], |
|  |  | ANYMAIL={ |
|  |  | "MANDRILL\_WEBHOOK\_URL": "https://abcde:12345@example.com/anymail/mandrill/", |
|  |  | "WEBHOOK\_AUTHORIZATION": "abcde:12345", |
|  |  | "WEBHOOK\_SECRET": "abcde:12345", |
|  |  | }) |
|  |  | def test\_webhook\_url\_setting(self): |
|  |  | # If Django can't build\_absolute\_uri correctly (e.g., because your proxy |
| Expand All | | @@ -111,7 +111,7 @@ def test\_webhook\_url\_setting(self): |
|  |  | self.assertEqual(response.status\_code, 200) |
|  |  |  |
|  |  | # override WebhookBasicAuthTestsMixin version of this test |
|  |  | @override\_settings(ANYMAIL={'WEBHOOK\_AUTHORIZATION': ['cred1:pass1', 'cred2:pass2']}) |
|  |  | @override\_settings(ANYMAIL={'WEBHOOK\_SECRET': ['cred1:pass1', 'cred2:pass2']}) |
|  |  | def test\_supports\_credential\_rotation(self): |
|  |  | """You can supply a list of basic auth credentials, and any is allowed""" |
|  |  | self.set\_basic\_auth('cred1', 'pass1') |
| Expand Down | |  |

10 changes: 8 additions & 2 deletions

10
[tests/webhook\_cases.py](#diff-bdb57ca08755171851376cc950f0bd6d80500dcbbe4ccdd990df0a3cb82f21c9 "tests/webhook_cases.py")

Show comments

[View file](/anymail/django-anymail/blob/1a6086f2b58478d71f89bf27eb034ed81aefe5ef/tests/webhook_cases.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -14,7 +14,7 @@ def event\_handler(sender, event, esp\_name, \*\*kwargs): |
|  |  | pass |
|  |  |  |
|  |  |  |
|  |  | @override\_settings(ANYMAIL={'WEBHOOK\_AUTHORIZATION': 'username:password'}) |
|  |  | @override\_settings(ANYMAIL={'WEBHOOK\_SECRET': 'username:password'}) |
|  |  | class WebhookTestCase(AnymailTestMixin, SimpleTestCase): |
|  |  | """Base for testing webhooks |
|  |  |  |
| Expand Down  Expand Up | | @@ -111,7 +111,7 @@ def test\_verifies\_missing\_auth(self): |
|  |  | response = self.call\_webhook() |
|  |  | self.assertEqual(response.status\_code, 400) |
|  |  |  |
|  |  | @override\_settings(ANYMAIL={'WEBHOOK\_AUTHORIZATION': ['cred1:pass1', 'cred2:pass2']}) |
|  |  | @override\_settings(ANYMAIL={'WEBHOOK\_SECRET': ['cred1:pass1', 'cred2:pass2']}) |
|  |  | def test\_supports\_credential\_rotation(self): |
|  |  | """You can supply a list of basic auth credentials, and any is allowed""" |
|  |  | self.set\_basic\_auth('cred1', 'pass1') |
| Expand All | | @@ -125,3 +125,9 @@ def test\_supports\_credential\_rotation(self): |
|  |  | self.set\_basic\_auth('baduser', 'wrongpassword') |
|  |  | response = self.call\_webhook() |
|  |  | self.assertEqual(response.status\_code, 400) |
|  |  |  |
|  |  | @override\_settings(ANYMAIL={'WEBHOOK\_AUTHORIZATION': "username:password"}) |
|  |  | def test\_deprecated\_setting(self): |
|  |  | """The older WEBHOOK\_AUTHORIZATION setting is still supported (for now)""" |
|  |  | response = self.call\_webhook() |
|  |  | self.assertEqual(response.status\_code, 200) |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `1a6086f`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fanymail%2Fdjango-anymail%2Fcommit%2F1a6086f2b58478d71f89bf27eb034ed81aefe5ef) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


