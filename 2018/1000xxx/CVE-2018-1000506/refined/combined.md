=== Content from wordpress.org_b6dee21b_20250126_113643.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Metronet Tag Manager

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fmetronet-tag-manager&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fmetronet-tag-manager&locale=en_US)

Search plugins

![](https://ps.w.org/metronet-tag-manager/assets/banner-772x250.jpeg?rev=2788990)

This plugin **hasn’t been tested with the latest 3 major releases of WordPress**. It may no longer be maintained or supported and may have compatibility issues when used with more recent versions of WordPress.

![](https://ps.w.org/metronet-tag-manager/assets/icon-256x256.jpeg?rev=2788992)
# Metronet Tag Manager

By [Metronet Tag Manager](https://wpmetronet.com)

[Download](https://downloads.wordpress.org/plugin/metronet-tag-manager.1.5.5.zip)

* [Details](https://wordpress.org/plugins/metronet-tag-manager/#description)
* [Reviews](https://wordpress.org/plugins/metronet-tag-manager/#reviews)
* [Installation](https://wordpress.org/plugins/metronet-tag-manager/#installation)
* [Development](https://wordpress.org/plugins/metronet-tag-manager/#developers)

[Support](https://wordpress.org/support/plugin/metronet-tag-manager/)

## Description

Integrate Google Tag Manager into your website.

The great thing about Google Tag Manager (GTM) is that you are able to gather most of your tracking scripts in one place. You can then fire these scripts whenever you want, specified by the rules you set up. This sounds great, right? Well, it is. The only problem is that sometimes it takes some time to set these rules up. This implementation can either set a dataLayer variable in the dataLayer before the tag manager script is loaded or push an HTML event handler with the variable “event” to the dataLayer when a button is clicked. The problem is that this isn’t always that easy to do when you don’t have the ability/access to add the code to your site.

This is where the Metronet Tag Manager plugin shines. It unlocks the power of the dataLayer so you can easily set macros and firing rules on almost any element.

This plugin lets you:

* Easily add as many dataLayer variables per-post and per-page basis as needed.
* The plugin already gives you six predefined dataLayer variables you can change/remove or test the system with. These will be loaded on all pages and posts.
* Set up separate dataLayer variables for pages that aren’t posts or pages (like archives, etc).
* Lets you easily add an HTML event handler to any content link with the GTM TinyMCE button in the WYSIWYG.
* Lets you add your unique ID or a class to each content link with the GTM TinyMCE button in the WYSIWYG.

Please note that for this plugin to work, a slight customization is needed. WordPress doesn’t let you load scripts straight after the opening tag, where the GTM script needs to be placed to work correctly. To fix this, you need to add `<?php do_action( 'body_open' ); ?>` just after the `<body>` tag, and that’s it.

> Note, If you are using WordPress 5.2. and up, contact your theme developer and ask them to insert `<?php wp_body_open(); ?>` just after the opening body tag of their theme. Here is some code to [show the theme developer to make it compatible with Metronet Tag Manager](https://gist.github.com/ronalfy/6b7f43e70e644320aba67d1876a0aeff).

Please let us know if you have any feature requests or issues with this plugin.

Below are a couple of resources you might find valuable if you are new to Google Tag Manager

Official Google Tag Manager website

https://developers.google.com/tag-manager/

Tracking Google Analytics Events with Google Tag Manager

http://moz.com/ugc/tracking-google-analytics-events-with-google-tag-manager

Make Analytics Better with Tag Management and a Data Layer

http://cutroni.com/blog/2012/05/14/make-analytics-better-with-tag-management-and-a-data-layer/

### Filtering Variables

If you choose to place variable values inside percentage signs (e.g., %replace\_test%), you can filter these as necessary.

Here’s an example:

```
add_filter( 'gtm_replace_test', 'gtm_replace_test', 10, 3 );
function gtm_replace_test( $total_match, $match, $post_id ) {
    return "replaced with content";
}

```

The filter name is `gtm_` with the suffix of `replace_test`, since that content is inbetween the percentage signs.

## Screenshots

* [![](https://ps.w.org/metronet-tag-manager/assets/screenshot-1.jpg?rev=1530591)](https://ps.w.org/metronet-tag-manager/assets/screenshot-1.jpg?rev=1530591)

  Google Tag Manager account dashboard
* [![](https://ps.w.org/metronet-tag-manager/assets/screenshot-2.jpg?rev=1530591)](https://ps.w.org/metronet-tag-manager/assets/screenshot-2.jpg?rev=1530591)

  Google Tag Manager Workspace
* [![](https://ps.w.org/metronet-tag-manager/assets/screenshot-3.jpg?rev=1530591)](https://ps.w.org/metronet-tag-manager/assets/screenshot-3.jpg?rev=1530591)

  Recommended Google Tag Manager snippet
* [![](https://ps.w.org/metronet-tag-manager/assets/screenshot-4.jpg?rev=1530591)](https://ps.w.org/metronet-tag-manager/assets/screenshot-4.jpg?rev=1530591)

  Google Tag Manager snippet inside the plugin

## Blocks

This plugin provides 1 block.

* Metronet Tag Manager

## Installation

1. Just unzip and upload the “metronet-tag-manager” folder to your ‘/wp-content/plugins/’ directory
2. Activate the plugin through the ‘Plugins’ menu in WordPress
3. Modify your theme’s `header.php` to include `<?php do_action( 'body_open' ); ?>` right after the opening `<body>` tag.
4. Go to the plugin’s settings and input your Google Tag Manager data.

> **Note**: if you are using WordPress 5.2. and up, contact your theme developer and ask them to insert `<?php wp_body_open(); ?>` just after the opening body tag of their theme. Here is some code to [show the theme developer to make it compatible with Metronet Tag Manager](https://gist.github.com/ronalfy/6b7f43e70e644320aba67d1876a0aeff).

For custom values, [please see the filters section on GitHub](https://github.com/ronalfy/metronet-tag-manager#filtering-variables).

## FAQ

### What is Google Tag Manager

Please refer to the [Google Tag Manager FAQ](http://www.google.com/tagmanager/faq.html).

### What are dataLayer variables?

Please refer to the [Google Tag Manager API](https://developers.google.com/tag-manager/reference) reference.

### What are dataLayer variables used for?

The data layer is an object that contains the information that you want to pass to Google Tag Manager. By setting up rules in Google Tag Manager, these variables can then be used to include the correct snippets or scripts – for example, when a certain button is clicked.

### Can I have dynamic values?

Yes. For custom values, [please see the filters section on GitHub](https://github.com/ronalfy/metronet-tag-manager#filtering-variables).

## Reviews

![](https://secure.gravatar.com/avatar/589cad59ec3e6f214af8a9174d81379fac08a5c290ca52b618c1f38d341cb5e5?s=60&d=retro&r=g)
### [Makes Installing Tag Manager Easy](https://wordpress.org/support/topic/makes-installing-tag-manager-easy/)

[kdubbau](https://profiles.wordpress.org/kdubbau/ "Posts by kdubbau")
October 17, 2022

My go to when getting Google Tag Manager set up on a clients site. Very simple and have had no problems setting it up on any of my wordpress sites. I prefer this plugin over similar plugins due to its simplicity and has been more secure than others.
While it is simple, don’t assume it can’t handle the bigger projects. It allows the more robust tracking methods and practices some clients need that other plugins simply don’t offer.
Just be sure to follow the installation instructions and you will be good to go!

![](https://secure.gravatar.com/avatar/0472e48ea06c2961fca434202b4b8b6ae468a31b9b8889d8be1e73833494929c?s=60&d=retro&r=g)
### [Easily Add GTM to any Website](https://wordpress.org/support/topic/easily-add-gtm-to-any-website/)

[leonhitchens](https://profiles.wordpress.org/leonhitchens/ "Posts by leonhitchens")
October 10, 2022

The plugin is helpful with installing Google Tag Manager. Works on WordPress multisite websites. The plugin is simple, straightforward, and more secure than a simple “insert headers or footers” plugin.

![](https://secure.gravatar.com/avatar/b8c8c439356b92f205a7a4e2be8e4819a60758ce031be133927e8848831b9356?s=60&d=retro&r=g)
### [Decent](https://wordpress.org/support/topic/decent-17/)

[paulbuikstra](https://profiles.wordpress.org/paulbuikstra/ "Posts by paulbuikstra")
July 19, 2018
1 reply

I could not verifie the search console via tag manager using this plugin. It places the code in the wrong place. Maybe i did something wrong, but it’s something you should look in to.

![](https://secure.gravatar.com/avatar/410e9151d7756b17c7150b455149f9bc0ad0e7cdc41cc58dd178f8e551ffa0f7?s=60&d=retro&r=g)
### [This plugin is awesome](https://wordpress.org/support/topic/this-plugin-is-awesome-54/)

[gubbigubbi](https://profiles.wordpress.org/gubbigubbi/ "Posts by gubbigubbi")
October 5, 2017
1 reply

Simple, unobtrusive – great plugin.
And whenver i see the name i always think
“If young metro don’t trust you?”

![](https://secure.gravatar.com/avatar/8e6a7b2100a43d23adfde1cba22a0d1da2a60278758d6ece7e55929078cd8344?s=60&d=retro&r=g)
### [GTM Plugin with dataLayer Variables !?!](https://wordpress.org/support/topic/gtm-plugin-with-datalayer-variables/)

[laurieheer](https://profiles.wordpress.org/laurieheer/ "Posts by laurieheer")
September 3, 2016

I offer Google Analytics training and students always struggle with adding dataLayer variables. Your plugin really simplifies the process – Thank You!

![](https://secure.gravatar.com/avatar/462aa2310f3e34f22fc5261d254254c8a13659dceca8c3c49f970479223db9a8?s=60&d=retro&r=g)
### [Great plugin](https://wordpress.org/support/topic/great-plugin-7691/)

[Vladislav Khusainov](https://profiles.wordpress.org/pacifik/ "Posts by Vladislav Khusainov")
September 3, 2016
1 reply

Turn on support for translation into other languages. Did the translation into Russian, could not to apply)

[Read all 8 reviews](https://wordpress.org/support/plugin/metronet-tag-manager/reviews/)
## Contributors & Developers

“Metronet Tag Manager” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/b1f98471cbb84ddeb26979e992e4492775c4cbd8ee643454790c7a8f42c67e38?s=32&d=mm&r=g) [Ronald Huereca](https://profiles.wordpress.org/ronalfy/)
* ![](https://secure.gravatar.com/avatar/e09bf7dbaa86644eadb31aec5101b933ae2b702c2fbe48334f2d1efd0fdfc819?s=32&d=mm&r=g) [ruskinconsulting](https://profiles.wordpress.org/ruskinconsulting/)

“Metronet Tag Manager” has been translated into 1 locale. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/metronet-tag-manager/contributors) for their contributions.

[Translate “Metronet Tag Manager” into your language.](https://translate.wordpress.org/projects/wp-plugins/metronet-tag-manager)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/metronet-tag-manager/), check out the [SVN repository](https://plugins.svn.wordpress.org/metronet-tag-manager/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/metronet-tag-manager/) by [RSS](https://plugins.trac.wordpress.org/log/metronet-tag-manager/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 1.5.5

* Released 2023-06-24
* Adding the ability to update header messages remotely.

#### 1.5.4

* Released 2019-07-16
* Adding GTM dataLayer on search pages.

#### 1.5.3

* Released 2019-07-16
* Added Beaver Builder compatibility.

#### 1.5.2

* Released 2019-05-24
* Updating documentation.
* Adding option to hide GTM data layer settings on posts/pages.

#### 1.5.1

* Released 2019-05-21
* Added support for WordPress 5.2’s wp\_body\_open tag.

#### 1.5.0

* Released 2018-11-24
* Added Gutenberg inline option for setting a dataLayer variable

#### 1.3.0

* Released 2018-07-25
* Fixed a bug when saving and outputting Google Tag Manager snippets where an ampersand HTML entity was added to the output.

#### 1.2.9

* Released 2018-04-24
* Fixed serious security issue. Please Update.

#### 1.2.7

* Released 2017-11-15
* Fixing issues in the admin where HTML elements were escaped accidentally.

#### 1.2.3

* Updated 2017-08-10
* Adding style element support

#### 1.2.1

* Updated 2017-05-02
* Code cleanup and remediation by 10up

#### 1.2.0

* Updated 2016-11-08
* Able to adhere to the new tag recommendations of inserting tag markup in the header and also after the body tag

#### 1.1.0

* Updated 2016-04-08
* Improved sanitization for custom values
* Added support for CloudFlare arguments in GTM code
* Prevent non-filtered custom value from being outputted in the dataLayer

#### 1.0.8

* Updated 2016-03-25
* Allow arrays/objects in dataLayer as JSON arguments

#### 1.0.6

* Updated 2015-08-20 – WordPress 4.3
* Released 2015-04-03
* Bug fix – Allow periods in datavariables to comply with GTM 2.0.

#### 1.0.5

* Updated 2014-12-11 – Ensuring WordPress 4.1 compatibility
* Released 2014-09-11
* Fixed anonymous function crashing PHP < 5.3 users

#### 1.0.4

* Released 2014-08-27
* Fixed meta problem with datavariables showing up in areas where there aren’t posts or pages
* Ensuring WordPress 4.0 compatibility

#### 1.0.3

* Released 2014-07-08
* Migration to TinyMCE 4
* Translations template

#### 1.0.2

* Released 2013-07-30
* Documentation update

#### 1.0.1

* Released 2013-07-24
* Fixing TinyMCE JavaScript issue

#### 1.0

* Initial release.

## Meta

* Version **1.5.5**
* Last updated **1 year ago**
* Active installations **30,000+**
* WordPress version **4.2 or higher**
* Tested up to **6.3.5**
* Languages
  See all 2

  Close

  [English (US)](https://wordpress.org/plugins/metronet-tag-manager/) and [Japanese](https://ja.wordpress.org/plugins/metronet-tag-manager/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/metronet-tag-manager)
* Tags [google](https://wordpress.org/plugins/tags/google/)[google tag manager](https://wordpress.org/plugins/tags/google-tag-manager/)[tag manager](https://wordpress.org/plugins/tags/tag-manager/)
* [Advanced View](https://wordpress.org/plugins/metronet-tag-manager/advanced/)

## Ratings

4.8 out of 5 stars.

* [7 5-star reviews
  5 stars

  7](https://wordpress.org/support/plugin/metronet-tag-manager/reviews/?filter=5)
* [0 4-star reviews
  4 stars

  0](https://wordpress.org/support/plugin/metronet-tag-manager/reviews/?filter=4)
* [1 3-star review
  3 stars

  1](https://wordpress.org/support/plugin/metronet-tag-manager/reviews/?filter=3)
* [0 2-star reviews
  2 stars

  0](https://wordpress.org/support/plugin/metronet-tag-manager/reviews/?filter=2)
* [0 1-star reviews
  1 star

  0](https://wordpress.org/support/plugin/metronet-tag-manager/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/metronet-tag-manager/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/metronet-tag-manager/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/b1f98471cbb84ddeb26979e992e4492775c4cbd8ee643454790c7a8f42c67e38?s=32&d=mm&r=g) [Ronald Huereca](https://profiles.wordpress.org/ronalfy/)
* ![](https://secure.gravatar.com/avatar/e09bf7dbaa86644eadb31aec5101b933ae2b702c2fbe48334f2d1efd0fdfc819?s=32&d=mm&r=g) [ruskinconsulting](https://profiles.wordpress.org/ruskinconsulting/)
## Support

Got something to say? Need help?

[View support forum](https://wordpress.org/support/plugin/metronet-tag-manager/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](https://mediaron.com/contribute/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from advisories.dxw.com_83c9562a_20250125_200735.html ===


[# dxw advisories](https://advisories.dxw.com)

Menu

* [Advisories](/advisories/)
* [Plugins](/plugins/)
* [About](https://advisories.dxw.com/about/)

## Advisory:

# CSRF in Metronet Tag Manager allows anybody to do almost anything an admin can

## Vulnerability

Last revised: May 15, 2018

The plugin’s settings page sends a nonce, and checks it when displaying the success/failure message, but is not checked when setting options.

This option is meant to contain JavaScript for Google Tag Manager, so it’s displayed on every frontend page without escaping.

As this vulnerability allows adding arbitrary JavaScript, the attacker can use it to control an admin user’s browser to do almost anything an admin user can do.

Current state:
 Fixed

## CVSS Summary

CVSS base scores for this vulnerability
| Score 5.8 Medium | |
| --- | --- |
| Vector | Network |
| Complexity | Medium |
| Authentication | None |
| Confidentiality | Partial |
| Integrity | Partial |
| Availability | None |

You can read more about CVSS base scores on [Wikipedia](http://en.wikipedia.org/wiki/CVSS) or in the [CVSS specification](http://www.first.org/cvss/cvss-guide).

## Proof of concept

Press submit on a page containing the following HTML snippet:

```
<form method="POST" action="http://localhost/wp-admin/options-general.php?page=metronet-tag-manager">
 <input type="text" name="submit" value="1">
 <input type="text" name="gtm-code-head" value="&lt;script>alert(1)&lt;/script>">
 <input type="submit">
</form>
```

In a real attack, the form can be made to autosubmit so the victim only has to follow a link.

## Advisory timeline

* 2018-04-13: Discovered
* 2018-04-16: Reported to plugin author via Facebook private message
* 2018-04-17: Plugin author confirmed receipt of message
* 2018-04-24: Plugin changelog indicates bug has been fixed in 1.2.9
* 2018-05-15: Advisory published
* 2018-05-22: CVE requested
* 2018-06-23: CVE assigned

## Mitigation/further actions

Upgrade to version 1.2.9 or later.

Discovered by:
Mallory Adams and dxwsupport
Advisory ID:
dxw-2018-3727
CVE:
CVE-2018-1000506
Component/package:
Metronet Tag Manager
Homepage:
[Metronet Tag Manager](https://wordpress.org/plugins/metronet-tag-manager/)
Version:
1.2.7

##### Contact

dxw advisories
Studio 1.05c
4 The Boulevard
Leeds,
LS10 1PZ

Call us on 0345 257 7520
contact@dxw.com

##### Services

* [Plugin reviews](https://advisories.dxw.com/about/plugin-reviews/)
* [Plugin inspections](https://advisories.dxw.com/about/plugin-inspections/)
* [Responsible disclosure policy](https://advisories.dxw.com/disclosure/)
* [Terms of service](https://advisories.dxw.com/terms/)

##### Github

* [Whippet](https://github.com/dxw/whippet)
* [2FA Plugin](https://github.com/dxw/2fa)
* [Iguana](https://github.com/dxw/iguana)

##### More from dxw

* [dxw](https://www.dxw.com)
* [Tradecraft](https://www.tradecraft.com/)

---

[![UKAS logo](https://advisories.dxw.com/wp-content/themes/dxw-security-2017/static/img/ukas.svg)](https://advisories.dxw.com/wp-content/themes/dxw-security-2017/static/img/ukas.svg)
![Government Procurement Service](https://advisories.dxw.com/wp-content/themes/dxw-security-2017/static/img/ccs-certificate.png)
[![Cyber Essentials logo](https://advisories.dxw.com/wp-content/themes/dxw-security-2017/static/img/ce-mark.png)](https://registry.blockmarktech.com/certificates/fe6a3790-9019-4df0-8d32-f894397b03d2/)
[![Cyber Essentials Plus logo](https://advisories.dxw.com/wp-content/themes/dxw-security-2017/static/img/ce-plus-mark.png)](https://registry.blockmarktech.com/certificates/ced635fc-ba0c-4e59-905c-508dd66dff1b/)

* [Bluesky

  Bluesky](https://bsky.app/profile/dxw.bsky.social)
* [Facebook

  Facebook](https://www.facebook.com/thedxw/)
* [LinkedIn

  LinkedIn](https://www.linkedin.com/company/dxw)
* [GitHub

  GitHub](https://github.com/dxw)

© 2008 – 2025. The Dextrous Web Ltd, trading as dxw. “dxw” is a registered trademark. All rights reserved. The Dextrous Web Ltd is a company registered in England & Wales, No. 6617101. Registered address Studio 1.05c, 4 The Boulevard, Leeds, LS10 1PZ.


