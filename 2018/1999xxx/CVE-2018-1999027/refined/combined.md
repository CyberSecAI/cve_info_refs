=== Content from jenkins.io_96c2abc5_20250124_170837.html ===


[Jenkins Security Home](/security/)

**For Administrators**

* [Overview](/security/for-administrators/)
* [Security Advisories](/security/advisories/)
* [Security Issues](/security/issues/)
* [Advisory Schedule](/security/scheduling/)
* [Vulnerabilities in Plugins](/security/plugins/)
* [How We Fix Security Issues](/security/fixing/)

**For Reporters**

* [Reporting Vulnerabilities](/security/reporting/)
* [Jenkins CNA](/security/cna/)

**For Maintainers**

* [Overview](/security/for-maintainers/)
* [Vulnerabilities in Plugins](/security/plugins/)

**Jenkins Security Team**

* [About](/security/team/)
* [Contributions](/security/improvements/)

# Jenkins Security Advisory 2018-07-30

This advisory announces vulnerabilities in the following Jenkins deliverables:

* [AccuRev
  Plugin](https://plugins.jenkins.io/accurev)
* [Agiletestware Pangolin Connector for TestRail
  Plugin](https://plugins.jenkins.io/pangolin-testrail-connector)
* [Anchore Container Image Scanner
  Plugin](https://plugins.jenkins.io/anchore-container-scanner)
* confluence-publisher
  Plugin
* [Inedo BuildMaster Plugin
  Plugin](https://plugins.jenkins.io/inedo-buildmaster)
* [Inedo ProGet Plugin
  Plugin](https://plugins.jenkins.io/inedo-proget)
* [Kubernetes
  Plugin](https://plugins.jenkins.io/kubernetes)
* [Maven Artifact ChoiceListProvider (Nexus)
  Plugin](https://plugins.jenkins.io/maven-artifact-choicelistprovider)
* [meliora-testlab
  Plugin](https://plugins.jenkins.io/meliora-testlab)
* [Publish Over CIFS
  Plugin](https://plugins.jenkins.io/publish-over-cifs)
* [Resource Disposer
  Plugin](https://plugins.jenkins.io/resource-disposer)
* [SaltStack
  Plugin](https://plugins.jenkins.io/saltstack)
* [Shelve Project
  Plugin](https://plugins.jenkins.io/shelve-project-plugin)
* [SSH Agent
  Plugin](https://plugins.jenkins.io/ssh-agent)
* [Tinfoil Security
  Plugin](https://plugins.jenkins.io/tinfoil-scan)
* [tracetronic ecu.test
  Plugin](https://plugins.jenkins.io/ecutest)

## Descriptions

### SSH Agent Plugin could reveal SSH key passphrase when used inside pipeline

**SECURITY-704
/
CVE-2018-1999036**

**Severity (CVSS):**
[low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`ssh-agent`](https://plugins.jenkins.io/ssh-agent)**

**Description:**

When using the `sshagent` step inside a `withDockerContainer` block in Pipeline, the resulting logging of the `ssh-add` command included the SSH key passphrase in plain text.

The plugin no longer logs the `ssh-add` invocation that would reveal the passphrase.

### CSRF vulnerability and missing permission checks in Resource Disposer Plugin

**SECURITY-997
/
CVE-2018-1999037**

**Severity (CVSS):**
[low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:N/I:N/A:L)

**Affected plugin:
[`resource-disposer`](https://plugins.jenkins.io/resource-disposer)**

**Description:**

Resource Disposer Plugin did not perform permission checks on an API endpoint.
This allowed users with Overall/Read access to Jenkins to stop tracking a specified resource.

Additionally, this API endpoint did not require POST requests, resulting in a CSRF vulnerability.

This API endpoint now requires POST requests and Overall/Administer permissions.

### CSRF vulnerability and missing permission checks in Publish Over CIFS Plugin

**SECURITY-975
/
CVE-2018-1999038**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)

**Affected plugin:
[`publish-over-cifs`](https://plugins.jenkins.io/publish-over-cifs)**

**Description:**

Publish Over CIFS Plugin did not perform permission checks on a method implementing form validation.
This allowed users with Overall/Read access to Jenkins to initiate CIFS connections to an attacker specified host.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now requires POST requests and Overall/Administer permissions.

### CSRF vulnerability and missing permission checks in Confluence Publisher Plugin

**SECURITY-982
/
CVE-2018-1999039**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`confluence-publisher`](https://plugins.jenkins.io/confluence-publisher)**

**Description:**

Confluence Publisher Plugin did not perform permission checks on a method implementing form validation.
This allowed users with Overall/Read access to Jenkins to submit login requests to Confluence using attacker-specified credentials.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now require POST requests and Overall/Administer permissions.

### CSRF vulnerability and missing permission checks in Kubernetes Plugin allowed capturing credentials

**SECURITY-1016
/
CVE-2018-1999040**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)

**Affected plugin:
[`kubernetes`](https://plugins.jenkins.io/kubernetes)**

**Description:**

Kubernetes Plugin did not perform permission checks on a method implementing form validation.
This allowed users with Overall/Read access to Jenkins to connect to an attacker-specified Kubernetes cluster using attacker-specified credentials IDs obtained through another method, capturing credentials stored in Jenkins.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now requires POST requests and Overall/Administer permissions.

### Tinfoil Security Plugin stored API Secret Key in plain text

**SECURITY-840
/
CVE-2018-1999041**

**Severity (CVSS):**
[low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`tinfoil-scan`](https://plugins.jenkins.io/tinfoil-scan)**

**Description:**

Tinfoil Security Plugin stored the API Secret Key in its configuration unencrypted in its global configuration file on the Jenkins controller.
This key could be viewed by users with access to the Jenkins controller file system.

The plugin now integrates with [Credentials Plugin](https://plugins.jenkins.io/credentials).
Existing configurations are not migrated and will need to be reconfigured.

### TraceTronic ECU-TEST Plugin globally and unconditionally disables SSL/TLS certificate validation

**SECURITY-932
/
CVE-2018-1999025**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:L/A:N)

**Affected plugin:
[`ecutest`](https://plugins.jenkins.io/ecutest)**

**Description:**

TraceTronic ECU-TEST Plugin unconditionally disabled SSL/TLS certificate validation for the entire Jenkins controller JVM.

TraceTronic ECU-TEST Plugin 2.4 and newer no longer does that.
It now has an option that allows disabling SSL/TLS certificate validation for specific connections by this plugin.

### CSRF vulnerability and missing permission checks in TraceTronic ECU-TEST Plugin allowed server-side request forgery

**SECURITY-994
/
CVE-2018-1999026**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`ecutest`](https://plugins.jenkins.io/ecutest)**

**Description:**

TraceTronic ECU-TEST Plugin did not perform permission checks on a method implementing form validation.
This allowed users with Overall/Read access to Jenkins to connect to an attacker-specified URL, with the suffix `/app-version-info` appended.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now requires POST requests and Overall/Administer permissions.

### CSRF vulnerability and missing permission checks in SaltStack Plugin allowed capturing credentials

**SECURITY-1009
/
CVE-2018-1999027**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)

**Affected plugin:
[`saltstack`](https://plugins.jenkins.io/saltstack)**

**Description:**

SaltStack Plugin did not perform permission checks on methods implementing form validation.
This allowed users with Overall/Read access to Jenkins to connect to an attacker-specified URL using attacker-specified credentials IDs obtained through another method, capturing credentials stored in Jenkins, and to cause Jenkins to submit HTTP requests to attacker-specified URLs.

Additionally, these form validation methods did not require POST requests, resulting in a CSRF vulnerability.

These form validation methods now require POST requests and Overall/Administer permissions.

### CSRF vulnerability and missing permission checks in Accurev Plugin allowed capturing credentials

**SECURITY-1021
/
CVE-2018-1999028**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)

**Affected plugin:
[`accurev`](https://plugins.jenkins.io/accurev)**

**Description:**

Accurev Plugin did not perform permission checks on a method implementing form validation.
This allowed users with Overall/Read access to Jenkins to connect to an attacker-specified Accurev server using attacker-specified credentials IDs obtained through another method, capturing credentials stored in Jenkins.

Additionally, these form validation methods did not require POST requests, resulting in a CSRF vulnerability.

These form validation methods now require POST requests and Overall/Administer permissions.

### Stored Cross-Site Scripting Vulnerability in Shelve Project Plugin

**SECURITY-1001
/
CVE-2018-1999029**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N)

**Affected plugin:
[`shelve-project-plugin`](https://plugins.jenkins.io/shelve-project-plugin)**

**Description:**

Shelve Project Plugin did not escape the names of shelved projects on the UI, potentially resulting in a stored XSS vulnerability.

Shelve Project Plugin 2.0 and newer now escapes the names of shelved projects shown on the UI.

### CSRF vulnerability and missing permission checks in Maven Artifact ChoiceListProvider (Nexus) Plugin allowed capturing credentials

**SECURITY-1022
/
CVE-2018-1999030**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)

**Affected plugin:
[`maven-artifact-choicelistprovider`](https://plugins.jenkins.io/maven-artifact-choicelistprovider)**

**Description:**

Maven Artifact ChoiceListProvider (Nexus) Plugin did not perform permission checks on a method implementing form validation.
This allowed users with Overall/Read access to Jenkins to connect to an attacker-specified Nexus or Artifactory server using attacker-specified credentials IDs obtained through another method, capturing credentials stored in Jenkins.

Additionally, this form validation method did not require POST requests, resulting in a CSRF vulnerability.

This form validation method now requires POST requests and Overall/Administer permissions.

### meliora-testlab Plugin stored API Key in plain text

**SECURITY-847
/
CVE-2018-1999031**

**Severity (CVSS):**
[low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`meliora-testlab`](https://plugins.jenkins.io/meliora-testlab)**

**Description:**

meliora-testlab Plugin stored the API Key in its configuration unencrypted in its global configuration file on the Jenkins controller.
This key could be viewed by users with access to the Jenkins controller file system.

Additionally, the API key was not masked from view using a password form field.

The plugin now stores the API Key encrypted in the configuration files on disk and no longer transfers it to users viewing the configuration form in plain text.

### CSRF vulnerability and missing permission checks in Agiletestware Pangolin Connector for TestRail Plugin allowed overriding plugin configuration

**SECURITY-995
/
CVE-2018-1999032**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:L)

**Affected plugin:
[`pangolin-testrail-connector`](https://plugins.jenkins.io/pangolin-testrail-connector)**

**Description:**

Agiletestware Pangolin Connector for TestRail Plugin did not perform permission checks on an API endpoint used to validate and save the plugin configuration.
This allowed users with Overall/Read access to Jenkins to override the plugin configuration.

Additionally, the API endpoint did not require POST requests, resulting in a CSRF vulnerability.

This API endpoint now requires POST requests and Overall/Administer permissions.

### Anchore Container Image Scanner Plugin stored password in plain text

**SECURITY-1039
/
CVE-2018-1999033**

**Severity (CVSS):**
[low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`anchore-container-scanner`](https://plugins.jenkins.io/anchore-container-scanner)**

**Description:**

Anchore Container Image Scanner Plugin stored the password in its configuration unencrypted in its global configuration file on the Jenkins controller.
This password could be viewed by users with access to the Jenkins controller file system.

The plugin now stores the password encrypted in the configuration files on disk and no longer transfers it to users viewing the configuration form in plain text.

### Inedo ProGet Plugin globally and unconditionally disabled SSL/TLS certificate validation

**SECURITY-933
/
CVE-2018-1999034**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:L/A:N)

**Affected plugin:
[`inedo-proget`](https://plugins.jenkins.io/inedo-proget)**

**Description:**

Inedo ProGet Plugin unconditionally disabled SSL/TLS certificate validation for the entire Jenkins controller JVM.

The plugin now has an option, disabled by default, to disable SSL/TLS certificate validation that only applies to its own connections.

### Inedo BuildMaster Plugin globally and unconditionally disabled SSL/TLS certificate validation

**SECURITY-935
/
CVE-2018-1999035**

**Severity (CVSS):**
[medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:L/A:N)

**Affected plugin:
[`inedo-buildmaster`](https://plugins.jenkins.io/inedo-buildmaster)**

**Description:**

Inedo ProGet Plugin unconditionally disabled SSL/TLS certificate validation for the entire Jenkins controller JVM.

The plugin now has an option, disabled by default, to disable SSL/TLS certificate validation that only applies to its own connections.

## Severity

* SECURITY-704:
  [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-840:
  [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-847:
  [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-932:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:L/A:N)
* SECURITY-933:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:L/A:N)
* SECURITY-935:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:L/A:N)
* SECURITY-975:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)
* SECURITY-982:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-994:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-995:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:L)
* SECURITY-997:
  [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:N/I:N/A:L)
* SECURITY-1001:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N)
* SECURITY-1009:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)
* SECURITY-1016:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)
* SECURITY-1021:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)
* SECURITY-1022:
  [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:N)
* SECURITY-1039:
  [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

## Affected Versions

* **AccuRev
  Plugin**
  up to and including
  0.7.16
* **Agiletestware Pangolin Connector for TestRail
  Plugin**
  up to and including
  2.1
* **Anchore Container Image Scanner
  Plugin**
  up to and including
  1.0.16
* **confluence-publisher
  Plugin**
  up to and including
  2.0.1
* **Inedo BuildMaster Plugin
  Plugin**
  up to and including
  1.3
* **Inedo ProGet Plugin
  Plugin**
  up to and including
  0.8
* **Kubernetes
  Plugin**
  up to and including
  1.10.1
* **Maven Artifact ChoiceListProvider (Nexus)
  Plugin**
  up to and including
  1.3.1
* **meliora-testlab
  Plugin**
  up to and including
  1.14
* **Publish Over CIFS
  Plugin**
  up to and including
  0.10
* **Resource Disposer
  Plugin**
  up to and including
  0.11
* **SaltStack
  Plugin**
  up to and including
  3.1.6
* **Shelve Project
  Plugin**
  up to and including
  1.5
* **SSH Agent
  Plugin**
  up to and including
  1.15
* **Tinfoil Security
  Plugin**
  up to and including
  1.6.1
* **tracetronic ecu.test
  Plugin**
  up to and including
  2.3

## Fix

* **AccuRev
  Plugin**
  should be updated to version
  0.7.17
* **Agiletestware Pangolin Connector for TestRail
  Plugin**
  should be updated to version
  2.2
* **Anchore Container Image Scanner
  Plugin**
  should be updated to version
  1.0.17
* **confluence-publisher
  Plugin**
  should be updated to version
  2.0.2
* **Inedo BuildMaster Plugin
  Plugin**
  should be updated to version
  2.0
* **Inedo ProGet Plugin
  Plugin**
  should be updated to version
  1.0
* **Kubernetes
  Plugin**
  should be updated to version
  1.10.2
* **Maven Artifact ChoiceListProvider (Nexus)
  Plugin**
  should be updated to version
  1.3.2
* **meliora-testlab
  Plugin**
  should be updated to version
  1.15
* **Publish Over CIFS
  Plugin**
  should be updated to version
  0.11
* **Resource Disposer
  Plugin**
  should be updated to version
  0.12
* **SaltStack
  Plugin**
  should be updated to version
  3.1.7
* **Shelve Project
  Plugin**
  should be updated to version
  2.0
* **SSH Agent
  Plugin**
  should be updated to version
  1.16
* **Tinfoil Security
  Plugin**
  should be updated to version
  2.0
* **tracetronic ecu.test
  Plugin**
  should be updated to version
  2.4

These versions include fixes to the vulnerabilities described above. All prior versions are considered to be affected by these vulnerabilities unless otherwise indicated.

## Credit

The Jenkins project would like to thank the reporters for discovering and
[reporting](/security/#reporting-vulnerabilities)
these vulnerabilities:

* **Daniel Beck, CloudBees, Inc.**
  for
  SECURITY-932, SECURITY-933, SECURITY-935
* **Jan Hollevoet**
  for
  SECURITY-704
* **Oleg Nenashev**
  for
  SECURITY-1001, SECURITY-1009, SECURITY-1016, SECURITY-1021, SECURITY-1022
* **Viktor Gazdag**
  for
  SECURITY-840, SECURITY-847, SECURITY-975, SECURITY-982, SECURITY-994, SECURITY-995, SECURITY-1039



=== Content from plugins.jenkins.io_56c10214_20250126_022910.html ===

# SaltStack

How to install

* [Documentation](/saltstack/)
* [Releases](/saltstack/releases/)
* [Issues](/saltstack/issues/)
* [Dependencies](/saltstack/dependencies/)
* [Health Score](/saltstack/healthscore/)

# Saltapi Plugin

[![Jenkins Plugin](https://camo.githubusercontent.com/09f05a8a328e8757492c0af2ac74494bfdec95fdd8af0da8a8e745e6ff0a52f9/68747470733a2f2f696d672e736869656c64732e696f2f6a656e6b696e732f706c7567696e2f762f73616c74737461636b2e737667)](https://plugins.jenkins.io/saltstack) [![GitHub release](https://camo.githubusercontent.com/d979e35f112c0f2ff8a1ecb6a94e7e687409119e335398073a0721183f8c91b1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6a656e6b696e7363692f73616c74737461636b2d706c7567696e2e7376673f6c6162656c3d6368616e67656c6f67)](https://github.com/jenkinsci/saltstack-plugin/blob/master/CHANGELOG.md) [![Jenkins Plugin Installs](https://camo.githubusercontent.com/05229aa03ba0725366e8aeed33e6ce63956df55e8e16c123e44d8d9755f658e4/68747470733a2f2f696d672e736869656c64732e696f2f6a656e6b696e732f706c7567696e2f692f73616c74737461636b2e7376673f636f6c6f723d626c7565)](https://plugins.jenkins.io/saltstack)

This plugin sends a SaltStack API message as a build step

# Basic usage

## Components

Installing this plugin contributes following:

* **Send a message to Salt API** - Build step

There are a few options for how to run a salt job:

### local

This is the standard way to run a salt command. If command returns quickly, the results will be returned. Otherwise, if the command is long running, jenkins will not wait. If you wish to have jenkins wait for a long running command to finish, check the "Wait for completion" checkbox.

`Salt syntax: "salt -N nodegroup webservers state.sls apache test=True"`

[![](https://cdn.jsdelivr.net/gh/jenkinsci/saltstack-plugin@master/img/local.png)](https://github.com/jenkinsci/saltstack-plugin/blob/master/img/local.png)

### local\_batch

Similar to the local operation, but allows for only running the command on a few minions at a time. Jenkins will always wait for all minions to return before finishing, so long running commands will always block the build until finished.

`Salt syntax: "salt -b '25%' -N nodegroup webservers state.sls deploy.websites test=True"`

[![](https://cdn.jsdelivr.net/gh/jenkinsci/saltstack-plugin@master/img/local_batch.png)](https://github.com/jenkinsci/saltstack-plugin/blob/master/img/local_batch.png)

### subset

Also similar to the local operation, but allows for only running the command on a subset of the target match. Jenkins will always wait for all minions to return before finishing, so long running commands will always block the build until finished.

`Salt syntax: salt --subset=4 '*' service.stop zabbix-agent`

[![](https://cdn.jsdelivr.net/gh/jenkinsci/saltstack-plugin@master/img/subset.png)](https://github.com/jenkinsci/saltstack-plugin/blob/master/img/subset.png)

### runner

This allows you to run salt-run commands. It was intended to be used to kick off salt orchestration jobs

`Salt syntax: salt-run state.orchestrate orchestration.refresh-apache pillar='{"target":testserver1.domain.com}'`

[![](https://cdn.jsdelivr.net/gh/jenkinsci/saltstack-plugin@master/img/runner.png)](https://github.com/jenkinsci/saltstack-plugin/blob/master/img/runner.png)

### hook

This publishes a message to the salt event bus. Useful for integrating with reactors from Jenkins

```
Curl syntax: curl -sS localhost:8000/hook/jenkins/notify/slack \
    -H 'Content-type: application/json' \
    -d '{"message": "Build ran"}'

```

[![](https://cdn.jsdelivr.net/gh/jenkinsci/saltstack-plugin@master/img/hook.png)](https://github.com/jenkinsci/saltstack-plugin/blob/master/img/hook.png)

## Pipeline

As of the 2.0 release, Jenkins pipeline is supported

```
import groovy.json.*

node() {
  saltresult = salt authtype: 'pam', clientInterface: local(arguments: '"ls -la"', blockbuild: true,
    function: 'cmd.run', jobPollTime: 16, target: '*', targettype: 'glob'),
    credentialsId: 'a3d814c2-84ed-4752-94a8-271791bb5375', servername: 'http://localhost:8000'
  def prettyJson = JsonOutput.prettyPrint(saltresult)
  println(prettyJson)
}
```

## Declarative Pipeline

Declarative pipelines are supported and function with the blueocean pipeline editor. As of blueocean 1.3 the pipeline editor does not fully render the input fields and requires some adjustments.

#### Add a step "Send a message to the SaltAPI"

[![](https://cdn.jsdelivr.net/gh/jenkinsci/saltstack-plugin@master/img/blueocean.png)](https://github.com/jenkinsci/saltstack-plugin/blob/master/img/blueocean.png)

|  |  |
| --- | --- |
| Servername | <http://master.local:8000> |
| Authtype | pam |
| ClientInterface | `${local(arguments: '"sleep 3; ls -la"', blockbuild: true, function: 'cmd.run', jobPollTime: 6, target: '\*', targettype: 'glob')}` |
| CredentialsId | b5f40401-01b9-4b27-a4e8-8ae94bc90250 |
| Checkboxes | SaveFile |

#### Add a second step "Run arbitrary Pipeline script" to print results

```
env.WORKSPACE = pwd()
def output = readFile "${env.WORKSPACE}/saltOutput.json"
echo output

```

All together this will create a declarative pipeline Jenkinsfile that looks something like:

**JenkinsFile**

```
pipeline {
  agent {
    node {
      label 'agent1'
    }

  }
  stages {
    stage('saltcommand') {
      steps {
        salt(authtype: 'pam', clientInterface: local(arguments: '"sleep 3; ls -la"', blockbuild: true, function: 'cmd.run', jobPollTime: 6, target: '*', targettype: 'glob'), credentialsId: 'b5f40401-01b9-4b27-a4e8-8ae94bc90250', saveFile: true, servername: 'http://master.local:8000')
        script {
          env.WORKSPACE = pwd()
          def output = readFile "${env.WORKSPACE}/saltOutput.json"
          echo output
        }

      }
    }
  }
}

```

## Configuration

##### Jenkins

Simply fill out the connection details on the build page.

If using the wait for long commands to finish option, then you may want to adjust either the poll interval or the minion timeout. The default for both options are set on in the Jenkins configuration page or the default can be overwritten from on the individual job.

* poll interval - controls how often jenkins will check in with the saltapi during a long running job. This can be set to something short (like 5 seconds) if you have a job that completes somewhat quickly. If you have a job that you know will run for an hour, checking every 5 seconds is a bit too frequent.
* minion timeout - If you have a job that should be run on multiple minions but only some minions return, the minion timeout will set how long to wait for the remaining minions to come back before assuming them offline and marking the build as a failure. This is helpful as without the timeout, the jenkins salt plugin will wait forever for the possibly non-existent minions to return.

Allow the user accessing the salt api to have permission to the necessary salt modules. Also grant access for the @runner returner.

```
external_auth:
  pam:
    jenkins:
      - test.*
      - pkg.*
      - cmd.*
      - state.*
      - '@runner'
```

This jenkins module was written to use SaltStack's [cherrypy api](https://salt-api.readthedocs.org/en/latest/ref/netapis/all/saltapi.netapi.rest_cherrypy.html) and [tornado](https://docs.saltstack.com/en/latest/ref/netapi/all/salt.netapi.rest_tornado.html) (as of 3.0.0). You will need to add something like the following to your salt master's configuration

```
rest_cherrypy:
  port: 8000
  ssl_crt: /etc/pki/tls/certs/localhost.crt
  ssl_key: /etc/pki/tls/certs/localhost.key
  expire_responses: False

rest_timeout: 7200
```

*Note: some long running jobs may require increasing the rest\_timeout or setting the expire\_responses options.*

You can test if you can access the API with the following command (changing the user and password to the right values).

```
$ curl -sSk https://<salt-master>:8000/login \
    -H 'Accept: application/x-yaml' \
    -d username=jenkins \
    -d password=jenkins \
    -d eauth=pam

```

Which would give you something similar to the following output.

```
return:
  - eauth: pam
    expire: 1458563520.558709
    perms:
      - .*
      - test.*
      - pkg.*
      - cmd.*
      - state.*
      - '@runner'
    start: 1458520320.558709
    token: 634c66d581806e5e9dacefbdc721cba45b78f63c
    user: jenkins

```

## Logging Configuration

To see what is sent/received from the salt-api create a jenkins logger:

```
Name: salt logs
Logger: com.waytta.saltstack
Log level: ALL

```

To see what http requests are being sent:

```
Name: http
Logger: sun.net.www.protocol.http.HttpURLConnection
log level: ALL

```

*To get any output from http, you may also need to add a default FINEST Jenkins logger on /jenkins/log/levels*

# Changelog

* For versions 3.2.1 and older, see the [Wiki page](https://wiki.jenkins.io/pages/viewpage.action?pageId=73534062)

##### Version: 3.2.2

Released: 5 years agoRequires Jenkins 2.7ID: saltstack
##### Installed on 0.16% of controllers

[View detailed version information](https://old.stats.jenkins.io/pluginversions/saltstack.html)
##### Links

[GitHub](https://github.com/jenkinsci/saltstack-plugin)[Open issues (Github)](https://github.com/jenkinsci/saltstack-plugin/issues)[Report an issue (Github)](https://github.com/jenkinsci/saltstack-plugin/issues/new/choose)[Open issues (Jira)](https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D20022)[Report an issue (Jira)](https://www.jenkins.io/participate/report-issue/redirect/#20022/saltstack)[Pipeline Step Reference](https://www.jenkins.io/doc/pipeline/steps/saltstack)[Extension Points](https://www.jenkins.io/doc/developer/extensions/saltstack)[Javadoc](https://javadoc.jenkins.io/plugin/saltstack)
##### Labels

[Build Tools](/ui/search/?labels=builder)
##### Maintainers

[Christian McHugh](/ui/search/?query=mchugh19)
##### Help us improve this page!

To propose a change submit a pull request to [the plugin page](https://github.com/jenkinsci/saltstack-plugin) on GitHub.
##### Previous Security Warnings

* ###### [CSRF vulnerability and missing permission checks allowed capturing credentials](https://jenkins.io/security/advisory/2018-07-30/#SECURITY-1009)

  + Affects version 3.1.6 and earlier
![tracker](https://jenkins-matomo.do.g4v.dev/piwik.php?idsite=1&rec=1&url=https://plugins.jenkins.io//saltstack/)


