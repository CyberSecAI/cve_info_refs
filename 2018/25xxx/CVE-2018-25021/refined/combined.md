=== Content from github.com_773336ae_20250124_121740.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTokTok%2Fc-toxcore%2Fissues%2F1214)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTokTok%2Fc-toxcore%2Fissues%2F1214)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=TokTok%2Fc-toxcore)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[TokTok](/TokTok)
/
**[c-toxcore](/TokTok/c-toxcore)**
Public

forked from [irungentoo/toxcore](/irungentoo/toxcore)

* [Notifications](/login?return_to=%2FTokTok%2Fc-toxcore) You must be signed in to change notification settings
* [Fork
  292](/login?return_to=%2FTokTok%2Fc-toxcore)
* [Star
   2.3k](/login?return_to=%2FTokTok%2Fc-toxcore)

* [Code](/TokTok/c-toxcore)
* [Issues
  179](/TokTok/c-toxcore/issues)
* [Pull requests
  29](/TokTok/c-toxcore/pulls)
* [Actions](/TokTok/c-toxcore/actions)
* [Security](/TokTok/c-toxcore/security)
* [Insights](/TokTok/c-toxcore/pulse)

Additional navigation options

* [Code](/TokTok/c-toxcore)
* [Issues](/TokTok/c-toxcore/issues)
* [Pull requests](/TokTok/c-toxcore/pulls)
* [Actions](/TokTok/c-toxcore/actions)
* [Security](/TokTok/c-toxcore/security)
* [Insights](/TokTok/c-toxcore/pulse)

# Massive red shutdown of nodes #1214

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Massive red shutdown of nodes](#top)#1214Copy linkLabels[P0Critical priority](https://github.com/TokTok/c-toxcore/issues?q=state%3Aopen%20label%3A%22P0%22)Critical priorityMilestone[v0.2.8](https://github.com/TokTok/c-toxcore/milestone/36)[![@kpp](https://avatars.githubusercontent.com/u/467709?v=4&size=80)](/kpp)
## Description

[![@kpp](https://avatars.githubusercontent.com/u/467709?v=4&size=48)](/kpp)[kpp](https://github.com/kpp)opened [on Sep 28, 2018](https://github.com/TokTok/c-toxcore/issues/1214#issue-364787548)

Happened on 2018-09-25.

Seems like there is a memleak in the code.

```
<LittleVulpix> nurupo: Oh? Let's see...
 toxme.io is running so
 oh wiw
 wow*
 [2152112.531883] Out of memory: Kill process 3782 (tox-bootstrapd) score 893 or sacrifice child
 [2152112.643896] oom_reaper: reaped process 3782 (tox-bootstrapd), now anon-rss:0kB, file-rss:0kB, shmem-rss:0kB

 If so many went offline at that time I would imagine someone caused a leak to manifest in tox bootstrap daemon took down several nodes with it that way
 nurupo: node started but yeah I'm pretty sure this wouldn't have been random. I doubt we all started our nodes exactly at the same time so it must have been someone doing something with the network that caused bootstrap nodes to die
<nurupo> are you sure it was tox-bootstrapd that filled up your ram and not some other program?
<LittleVulpix> nurupo: not minding the fact the same happened to several completely unrelated machines, yeah I'm pretty sure
 [2152112.531817] [ pid ]   uid  tgid total_vm      rss nr_ptes nr_pmds swapents oom_score_adj name
 [2152112.531846] [ 3782]   999  3782   467797   455738     903       4        0             0 tox-bootstrapd
  467MB ram
  reserved
  455 actually used
  normal resource usage is about 10-15MB RAM from what I remember
  soooo that's like 45x as much
<iphy> LittleVulpix: interesting
<nurupo> if there is a memory leak then it's likely to be in toxcore itself so every tox node (i.e. even a client), i don't think there is anything in tox-bootstrapd that can leak memory, so everything that uses toxcore is likely affected, even clients. also, a lot of nodes were using old toxcore, like irungentoo old, so if there is a memory leak issue - it must be long present
<iphy> yes

```

[![nodes8](https://user-images.githubusercontent.com/467709/46196675-6703de80-c310-11e8-87a9-06c1438d8171.png)](https://user-images.githubusercontent.com/467709/46196675-6703de80-c310-11e8-87a9-06c1438d8171.png)

😄2🎉1❤️1
## Metadata

### Assignees

No one assigned

### Labels

[P0Critical priority](https://github.com/TokTok/c-toxcore/issues?q=state%3Aopen%20label%3A%22P0%22)Critical priority
### Type

No type
### Projects

No projects
### Milestone

* [v0.2.8](https://github.com/TokTok/c-toxcore/milestone/36)
### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from secure.gravatar.com_ed1c9e43_20250126_010454.html ===
�PNG

   
IHDR   Z   Z   ���U    pHYs  �  ��+  IDATx���1
�0�Q+�q��Sz7'�o��Zxo-����I���v�����/r�!G�r�!G��^��Ċ��c����#�9B��#�9b�
lW[�?Yp�t�!G�r�!G��m�rs���t�!G�r�!G�r�!G�r�!G�r��װ���o�
�;�4!G�r�!G�r�6�Sr���a�\_�t�!G�r�!G��9B��#�9B��#��)�k�#�9B��#�9B��#�9B��#�9B��#ޯ�&-�Q�    IEND�B`�

=== Content from blog.tox.chat_c19a299f_20250124_121740.html ===

[Skip to content](#content)
[![Tox Blog](https://blog.tox.chat/wp-content/uploads/2015/08/toxblog1.png)](https://blog.tox.chat/)
News regarding the Tox Project

Menu

* [Home](/)
* [Calendar](/events/)
* [RSS](/feed/)

Search for:

# Memory leak bug and new Toxcore release fixing it

Posted on [October 8, 2018](https://blog.tox.chat/2018/10/memory-leak-bug-and-new-toxcore-release-fixing-it/)
by
[nurupo](https://blog.tox.chat/author/nurupo/ "View all posts by nurupo")

A memory leak bug was discovered in Toxcore that can be triggered remotely to exhaust one’s system memory, resulting in a denial of service attack. The bug is present in the TCP Server module of Toxcore and therefore it affects mostly bootstrap nodes. Regular Tox clients generally have the TCP Server functionality disabled by default, leaving them unaffected.

The bug was introduced on July 15th, 2014 in commit [22d28ddf36563e2d0018fc20cafdfe61278dd67f](https://github.com/TokTok/c-toxcore/commit/22d28ddf36563e2d0018fc20cafdfe61278dd67f), making all previous versions of [TokTok c-toxcore](https://github.com/TokTok/c-toxcore/) and [irungentoo’s toxcore](https://github.com/irungentoo/toxcore) vulnerable.

The bug is fixed in TokTok c-toxcore [v0.2.8](https://github.com/TokTok/c-toxcore/releases/tag/v0.2.8). The bug is also fixed in the master branch of irungentoo’s toxcore, in commit [bf69b54f64003d160d759068f4816b2d9b2e1e21](https://github.com/irungentoo/toxcore/commit/bf69b54f64003d160d759068f4816b2d9b2e1e21). As a general reminder, if you are still using irungentoo’s toxcore, we strongly encourage you to switch to using TokTok c-toxcore instead as it’s a lot more actively developed and maintained. In fact, irungentoo’s toxcore is neither being developed nor maintained for some time now, aside from merging only the most critical fixes from TokTok c-toxcore from time to time, missing all other important fixes.

If you are using TokTok c-toxcore v0.2.8, you should be unaffected by this bug.

If you are using an older Toxcore, for example a client you use didn’t release an update, make sure that you have the TCP Server functionality disabled in the client settings and you should be unaffected. Some clients, like qTox v1.16.3 and uTox v0.16.1, don’t provide the user with an option to enable the TCP Server, having it always disabled, and other clients, like Toxic v0.8.2, do provide the TCP Server option, but it’s disabled by default. Note that it’s possible that some other clients have the TCP Server option enabled by default.

If you are running a bootstrap node, we strongly encourage you to update to TokTok c-toxcore v0.2.8 rather than disable the TCP Server option. In fact, we will be making Toxcore v0.2.8 the minimal required version for all of the nodes on our bootstrap node list. TCP relay functionality is very useful for mobile users and those behind restrictive NATs, and given that it’s mostly bootstrap nodes that act as TCP relay servers, as clients generally have that option disabled, even a few of those nodes disabling TCP Server functionality would reduce the number of TCP relay servers Tox clients can use considerably.

Update (January 2022): This vulnerability has been assigned CVE-2018-25021 identifier.

[Security Announcement](https://blog.tox.chat/category/security-announcement/)
![](https://secure.gravatar.com/avatar/4d704d25a98383212ad85eae4db18365?s=90&d=retro&r=g)
**nurupo**

[View all posts by nurupo →](https://blog.tox.chat/author/nurupo/)

## Post navigation

Older post[ToxCon 2018 Update](https://blog.tox.chat/2018/08/toxcon-2018-update/)Newer post[ToxCon 2018 report](https://blog.tox.chat/2018/11/toxcon-2018-report/)

## 2 Comments

1. ![](https://secure.gravatar.com/avatar/6cb995e42ea56f6ea5e529fc14da2673?s=60&d=retro&r=g) **loskiq** says:
   [October 8, 2018 at 18:15](https://blog.tox.chat/2018/10/memory-leak-bug-and-new-toxcore-release-fixing-it/#comment-509)

   Thanks for telling me about this! I have already updated my Tox node to latest version 0.2.8! ^\_^
3. ![](https://secure.gravatar.com/avatar/26704e013e9fe70f8f24da9ff66e4d90?s=60&d=retro&r=g) **Richard Wicks** says:
   [April 20, 2019 at 06:47](https://blog.tox.chat/2018/10/memory-leak-bug-and-new-toxcore-release-fixing-it/#comment-550)

   First of all, good project!

   This may not be the place for it, but I would like to know how NAT traversal is being done with this system. I’ve been looking for a good NAT traversal library for a long long time. A LOT of people have.

   I also think what the underlying system that is Tox could be widely expanded to do a lot more. Not just messaging but file sharing, web services, lots of neat stuff.

   My Tox ID is:

   2779E73EE1BE4E85A52DDA1E0E0DE8006905250171725CD64BE0ED1C29DACC4C03491A64CDA5

   But don’t expect me to be on, of course.

   I work in software as well too and if I can get the time, I’d be interested in doing development.

   One thing I would suggest is that if I (Alice) on my smart phone write to Bob, and Bob is offline, but I’m logged in to my server sitting at home under the Alice account, that the message I sent gets recorded and displayed at home on my server, and is automatically sent to Bob when Bob logs in, even if my phone is off.

   Skype used to so this, before MS F’ed it all up.

   There’s great potential with the underlying communication system far beyond just IM and voice chat I think. I think this can be a disruptive technology.

Comments are closed.

© 2025 [Tox Blog](https://blog.tox.chat/)

Powered by [WordPress](https://wordpress.org/)  |
Theme: [Graphy](http://themegraphy.com/wordpress-themes/graphy/) by Themegraphy



=== Content from blog.tox.chat_50d7e723_20250126_010455.html ===

[Skip to content](#content)
[![Tox Blog](https://blog.tox.chat/wp-content/uploads/2015/08/toxblog1.png)](https://blog.tox.chat/)
News regarding the Tox Project

Menu

* [Home](/)
* [Calendar](/events/)
* [RSS](/feed/)

Search for:

# Category: Security Announcement

## [Stack-based buffer overflow vulnerability in UDP packet handling in Toxcore (CVE-2021-44847)](https://blog.tox.chat/2021/12/stack-based-buffer-overflow-vulnerability-in-udp-packet-handling-in-toxcore-cve-2021-44847/)

Posted on [December 13, 2021](https://blog.tox.chat/2021/12/stack-based-buffer-overflow-vulnerability-in-udp-packet-handling-in-toxcore-cve-2021-44847/)
by
[nurupo](https://blog.tox.chat/author/nurupo/ "View all posts by nurupo")

A stack-based buffer overflow vulnerability was discovered in Toxcore’s networking code that allows a remote attacker to crash the Toxcore process or pote...

## [Memory leak bug and new Toxcore release fixing it](https://blog.tox.chat/2018/10/memory-leak-bug-and-new-toxcore-release-fixing-it/)

Posted on [October 8, 2018](https://blog.tox.chat/2018/10/memory-leak-bug-and-new-toxcore-release-fixing-it/)
by
[nurupo](https://blog.tox.chat/author/nurupo/ "View all posts by nurupo")

A memory leak bug was discovered in Toxcore that can be triggered remotely to exhaust one’s system memory, resulting in a denial of service attack. The bu...

## [Security vulnerability and new Toxcore release](https://blog.tox.chat/2018/04/security-vulnerability-and-new-toxcore-release/)

Posted on [April 20, 2018](https://blog.tox.chat/2018/04/security-vulnerability-and-new-toxcore-release/)
by
[nurupo](https://blog.tox.chat/author/nurupo/ "View all posts by nurupo")

A vulnerability was discovered in Toxcore that allows one to learn the IP of a target user by only knowing their Tox Id and without being friends with the targe...

## [Bug in musl-libc discovered, affecting the fully static Toxic builds](https://blog.tox.chat/2017/10/bug-in-musl-libc-discovered-affecting-the-fully-static-toxic-builds/)

Posted on [October 20, 2017](https://blog.tox.chat/2017/10/bug-in-musl-libc-discovered-affecting-the-fully-static-toxic-builds/)
by
[nurupo](https://blog.tox.chat/author/nurupo/ "View all posts by nurupo")

We advise everyone using the fully static Toxic builds that are listed on our download page to update them to the newest version by re-downloading them from tha...

© 2025 [Tox Blog](https://blog.tox.chat/)

Powered by [WordPress](https://wordpress.org/)  |
Theme: [Graphy](http://themegraphy.com/wordpress-themes/graphy/) by Themegraphy



=== Content from github.com_e6b4fd71_20250124_121742.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTokTok%2Fc-toxcore%2Fpull%2F1216)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTokTok%2Fc-toxcore%2Fpull%2F1216)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=TokTok%2Fc-toxcore)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[TokTok](/TokTok)
/
**[c-toxcore](/TokTok/c-toxcore)**
Public

forked from [irungentoo/toxcore](/irungentoo/toxcore)

* [Notifications](/login?return_to=%2FTokTok%2Fc-toxcore) You must be signed in to change notification settings
* [Fork
  292](/login?return_to=%2FTokTok%2Fc-toxcore)
* [Star
   2.3k](/login?return_to=%2FTokTok%2Fc-toxcore)

* [Code](/TokTok/c-toxcore)
* [Issues
  179](/TokTok/c-toxcore/issues)
* [Pull requests
  29](/TokTok/c-toxcore/pulls)
* [Actions](/TokTok/c-toxcore/actions)
* [Security](/TokTok/c-toxcore/security)
* [Insights](/TokTok/c-toxcore/pulse)

Additional navigation options

* [Code](/TokTok/c-toxcore)
* [Issues](/TokTok/c-toxcore/issues)
* [Pull requests](/TokTok/c-toxcore/pulls)
* [Actions](/TokTok/c-toxcore/actions)
* [Security](/TokTok/c-toxcore/security)
* [Insights](/TokTok/c-toxcore/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FTokTok%2Fc-toxcore%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FTokTok%2Fc-toxcore%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fix memory leak in tcp server by wiping priority queues on deletion. #1216

 Merged

[iphydf](/iphydf)
merged 1 commit into
[TokTok:master](/TokTok/c-toxcore/tree/master "TokTok/c-toxcore:master")
from
[zugz:fixPQueueMemleak](/zugz/c-toxcore/tree/fixPQueueMemleak "zugz/c-toxcore:fixPQueueMemleak")

Oct 7, 2018

 Merged

# [Fix memory leak in tcp server by wiping priority queues on deletion.](#top) #1216

[iphydf](/iphydf)
merged 1 commit into
[TokTok:master](/TokTok/c-toxcore/tree/master "TokTok/c-toxcore:master")
from
[zugz:fixPQueueMemleak](/zugz/c-toxcore/tree/fixPQueueMemleak "zugz/c-toxcore:fixPQueueMemleak")

Oct 7, 2018

[Conversation
12](/TokTok/c-toxcore/pull/1216)
[Commits
1](/TokTok/c-toxcore/pull/1216/commits)
[Checks
0](/TokTok/c-toxcore/pull/1216/checks)
[Files changed](/TokTok/c-toxcore/pull/1216/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![zugz](https://avatars.githubusercontent.com/u/590069?s=60&v=4)](/zugz)

Copy link

### @zugz **[zugz](/zugz)** commented [Sep 29, 2018](#issue-365115527) • edited by iphydf Loading

This change is [![Reviewable](https://camo.githubusercontent.com/1541c4039185914e83657d3683ec25920c672c6c5c7ab4240ee7bff601adec0b/68747470733a2f2f72657669657761626c652e696f2f7265766965775f627574746f6e2e737667)](https://reviewable.io/reviews/toktok/c-toxcore/1216)

Sorry, something went wrong.

All reactions

[![iphydf](https://avatars.githubusercontent.com/u/10647936?s=60&v=4)](/iphydf)

**[iphydf](/iphydf)**
requested changes
[Sep 29, 2018](#pullrequestreview-160077513)

 [View reviewed changes](/TokTok/c-toxcore/pull/1216/files)

[toxcore/TCP\_server.c](/TokTok/c-toxcore/pull/1216/files#diff-bbd610a2a3d33ae68cf7ad8fcf08225e30a5419621f0754969163607834ecb1c)
Outdated

|  |  | @@ -222,6 +222,23 @@ static int add\_accepted(TCP\_Server \*tcp\_server, const Mono\_Time \*mono\_time, cons | |
| --- | --- | --- | --- |
|  |  | return index; |
|  |  | } |
|  |  |  |
|  |  | static void wipe\_priority\_list(TCP\_Secure\_Connection \*con) |

Copy link

Member

### @iphydf **[iphydf](/iphydf)** [Sep 29, 2018](#discussion_r221425066)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

It'll need to be called something else. <https://travis-ci.org/TokTok/c-toxcore/jobs/434939506#L1504>

Sorry, something went wrong.

All reactions

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=40&v=4)](/zugz)
[zugz](/zugz)
mentioned this pull request
[Sep 29, 2018](#ref-issue-365127589)

[valgrind reports "Conditional jump or move depends on uninitialised value(s)"
#1217](/TokTok/c-toxcore/issues/1217)

Closed

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=40&v=4)](/zugz)
[zugz](/zugz)
added this to the [v0.2.x](/TokTok/c-toxcore/milestone/28) milestone
[Sep 29, 2018](#event-1874939419)

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=80&v=4)](/zugz)

Copy link

Author

### **[zugz](/zugz)** commented [Sep 29, 2018](#issuecomment-425653218)

| It turns out that this closes [#1214](https://github.com/TokTok/c-toxcore/issues/1214), as this was the memleak exploited there. [@kpp](https://github.com/kpp) found the flaw first, and chose to communicate it to us non-verbally in this way. [@kpp](https://github.com/kpp) and I just tested that this patch does nullify that attack. |
| --- |

All reactions

Sorry, something went wrong.

[![robinlinden](https://avatars.githubusercontent.com/u/8304462?s=60&v=4)](/robinlinden)

**[robinlinden](/robinlinden)**
approved these changes
[Sep 29, 2018](#pullrequestreview-160084262)

 [View reviewed changes](/TokTok/c-toxcore/pull/1216/files)

Copy link

Member

### @robinlinden **[robinlinden](/robinlinden)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> Reviewed 3 of 3 files at r2.
>
> *[Reviewable](https://reviewable.io/reviews/toktok/c-toxcore/1216)* status: 1 change requests, 0 of 1 approvals obtained (waiting on [@iphydf](https://github.com/iphydf))

Sorry, something went wrong.

All reactions

[![@kpp](https://avatars.githubusercontent.com/u/467709?s=80&v=4)](/kpp)

Copy link

### **[kpp](/kpp)** commented [Sep 29, 2018](#issuecomment-425653794)

| <https://github.com/tox-rs/tox> is your best friend =) The second 0day this year. |
| --- |

All reactions

Sorry, something went wrong.

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=40&v=4)](/zugz)
[zugz](/zugz)
changed the title
~~Fix memleak in tcp server by wiping priority queues on deletion~~
WIP: Fix memleak in tcp server by wiping priority queues on deletion
[Sep 29, 2018](#event-1875009033)

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=80&v=4)](/zugz)

Copy link

Author

### **[zugz](/zugz)** commented [Sep 29, 2018](#issuecomment-425657950)

| This doesn't actually fix all the potential memleaks yet. e.g. in kill\_TCP\_server the TCP\_Secure\_Connections aren't wiped, so there could be unfreed priority queues. Similarly in realloc\_connection. I'm also worried about the potential for double frees. This is going to take some care... is there anyone who's actually familiar with TCP\_server.c and wouldn't mind helping out? |
| --- |

All reactions

Sorry, something went wrong.

[![@nurupo](https://avatars.githubusercontent.com/u/1855294?s=80&v=4)](/nurupo)

Copy link

Member

### **[nurupo](/nurupo)** commented [Sep 29, 2018](#issuecomment-425670444)

| [@zugz](https://github.com/zugz) what do you mean by "non-verbally"? How exactly did he communicate? Was it by taking down 3/4 of bootstrap nodes? Because if so, then that's a rather malicious way of communicating and tox-rs ain't no friend. |
| --- |

All reactions

Sorry, something went wrong.

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=80&v=4)](/zugz)

Copy link

Author

### **[zugz](/zugz)** commented [Sep 29, 2018](#issuecomment-425671136) via email

| \* Saturday, 2018-09-29 at 12:36 -0700 - nurupo <notifications@github.com>: [@zugz](https://github.com/zugz) what do you mean by "non-verbally"? How exactly did he communicate? Was it by taking down 3/4 of bootstrap nodes? That is what I meant. |
| --- |

All reactions

Sorry, something went wrong.

[![@codecov](https://avatars.githubusercontent.com/in/254?s=80&v=4)](/apps/codecov)

Copy link

### **[codecov](/apps/codecov) bot** commented [Sep 30, 2018](#issuecomment-425699823) • edited Loading

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [Codecov](https://codecov.io/gh/TokTok/c-toxcore/pull/1216?src=pr&el=h1) Report Merging [#1216](https://codecov.io/gh/TokTok/c-toxcore/pull/1216?src=pr&el=desc) into [master](https://codecov.io/gh/TokTok/c-toxcore/commit/b2b96b1aa19ef2eb2816303e606a3f23550538dc?src=pr&el=desc) will **decrease** coverage by `0.1%`. The diff coverage is `85%`.  [Impacted file tree graph](https://codecov.io/gh/TokTok/c-toxcore/pull/1216?src=pr&el=tree)  ``` @@           Coverage Diff            @@ ##           master   #1216     +/-   ## ======================================== - Coverage    82.8%   82.7%   -0.2%      ========================================   Files          82      82                Lines       14634   14647     +13      ======================================== - Hits        12125   12120      -5      - Misses       2509    2527     +18 ```  | [Impacted Files](https://codecov.io/gh/TokTok/c-toxcore/pull/1216?src=pr&el=tree) | Coverage Δ |  | | --- | --- | --- | | [toxcore/TCP\_client.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-dG94Y29yZS9UQ1BfY2xpZW50LmM=) | `64.6% <100%> (+0.3%)` | ⬆️ | | [toxcore/TCP\_server.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-dG94Y29yZS9UQ1Bfc2VydmVyLmM=) | `75.9% <84.6%> (+0.9%)` | ⬆️ | | [auto\_tests/toxav\_many\_test.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-YXV0b190ZXN0cy90b3hhdl9tYW55X3Rlc3QuYw==) | `92.5% <0%> (-4.1%)` | ⬇️ | | [toxcore/net\_crypto.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-dG94Y29yZS9uZXRfY3J5cHRvLmM=) | `93.5% <0%> (-1.4%)` | ⬇️ | | [toxav/msi.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-dG94YXYvbXNpLmM=) | `63.6% <0%> (-1.2%)` | ⬇️ | | [toxav/toxav.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-dG94YXYvdG94YXYuYw==) | `67.1% <0%> (-1%)` | ⬇️ | | [toxcore/Messenger.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-dG94Y29yZS9NZXNzZW5nZXIuYw==) | `86.6% <0%> (+0.1%)` | ⬆️ | | [toxcore/friend\_connection.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-dG94Y29yZS9mcmllbmRfY29ubmVjdGlvbi5j) | `94.5% <0%> (+0.8%)` | ⬆️ | | [auto\_tests/toxav\_basic\_test.c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216/diff?src=pr&el=tree#diff-YXV0b190ZXN0cy90b3hhdl9iYXNpY190ZXN0LmM=) | `83.5% <0%> (+1.9%)` | ⬆️ |   ---   [Continue to review full report at Codecov](https://codecov.io/gh/TokTok/c-toxcore/pull/1216?src=pr&el=continue).  **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta) `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data` Powered by [Codecov](https://codecov.io/gh/TokTok/c-toxcore/pull/1216?src=pr&el=footer). Last update [b2b96b1...5beb00c](https://codecov.io/gh/TokTok/c-toxcore/pull/1216?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments). |

All reactions

Sorry, something went wrong.

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=40&v=4)](/zugz)
[zugz](/zugz)
changed the title
~~WIP: Fix memleak in tcp server by wiping priority queues on deletion~~
Fix memleak in tcp server by wiping priority queues on deletion
[Sep 30, 2018](#event-1875247787)

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=80&v=4)](/zugz)

Copy link

Author

### **[zugz](/zugz)** commented [Sep 30, 2018](#issuecomment-425700676) • edited Loading

| OK, this is ready for (re)review now, and I believe it now fully seals this source of memleaks rather than just dealing with the case exploited in [#1214](https://github.com/TokTok/c-toxcore/issues/1214). There wasn't nearly as much further work as I was fearing in my previous comment.  A word on my methodology here: I haven't actually grokked the entirety of TCP\_server.c; rather, I searched for "TCP\_Secure\_Connection" and followed up on each hit. I don't see that I could be missing anything. Also, with these latest changes asan now passes on [#1215](https://github.com/TokTok/c-toxcore/pull/1215) - and asan's previous failure there was what directly led me to finding the memleak, which incidentally I think we can read as a win for our testing regime!  Anyway, please review carefully. |
| --- |

All reactions

Sorry, something went wrong.

[![robinlinden](https://avatars.githubusercontent.com/u/8304462?s=60&v=4)](/robinlinden)

**[robinlinden](/robinlinden)**
approved these changes
[Oct 1, 2018](#pullrequestreview-160399224)

 [View reviewed changes](/TokTok/c-toxcore/pull/1216/files)

Copy link

Member

### @robinlinden **[robinlinden](/robinlinden)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> Reviewed 1 of 1 files at r4.
>
> *[Reviewable](https://reviewable.io/reviews/toktok/c-toxcore/1216)* status: ![:shipit:](https://github.githubassets.com/images/icons/emoji/shipit.png ":shipit:") complete! 1 change requests, 1 of 1 approvals obtained (waiting on [@iphydf](https://github.com/iphydf))

---

*[toxcore/TCP\_server.c, line 134 at r4](https://reviewable.io/reviews/toktok/c-toxcore/1216#-LNkd9y01ORl5mS0v3xg:-LNe14Rn7bj1_X6YP2cw:b-7s4sqq) ([raw file](https://github.com/toktok/c-toxcore/blob/5bcc798f995f6a4b9a224d37f00d7ef4a3e8b269/toxcore/TCP_server.c#L134)):*

> ```
> static int alloc_new_connections(TCP_Server *tcp_server, uint32_t num)
> {
>     uint32_t new_size = tcp_server->size_accepted_connections + num;
> ```

const

Sorry, something went wrong.

All reactions

[irungentoo](/irungentoo)
added a commit
to irungentoo/toxcore
that referenced
this pull request
[Oct 3, 2018](#ref-commit-bf69b54)
[![@irungentoo](https://avatars.githubusercontent.com/u/2226611?s=40&v=4)](/irungentoo)

`[Fix memory leak when closing TCP connection.](/irungentoo/toxcore/commit/bf69b54f64003d160d759068f4816b2d9b2e1e21 "Fix memory leak when closing TCP connection.

Thanks to: https://github.com/TokTok/c-toxcore/pull/1216")`
…

`[bf69b54](/irungentoo/toxcore/commit/bf69b54f64003d160d759068f4816b2d9b2e1e21)`

```
Thanks to: [TokTok#1216](https://github.com/TokTok/c-toxcore/pull/1216)
```

[![@irungentoo](https://avatars.githubusercontent.com/u/2226611?s=80&v=4)](/irungentoo)

Copy link

### **[irungentoo](/irungentoo)** commented [Oct 3, 2018](#issuecomment-426624842)

| This is how I fixed it: [irungentoo@bf69b54](https://github.com/irungentoo/toxcore/commit/bf69b54f64003d160d759068f4816b2d9b2e1e21) |
| --- |

All reactions

Sorry, something went wrong.

[![sudden6](https://avatars.githubusercontent.com/u/5585762?s=60&v=4)](/sudden6)

**[sudden6](/sudden6)**
approved these changes
[Oct 4, 2018](#pullrequestreview-161602782)

 [View reviewed changes](/TokTok/c-toxcore/pull/1216/files)

Copy link

### @sudden6 **[sudden6](/sudden6)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[![:lgtm_strong:](https://camo.githubusercontent.com/d6a46917134d5bd730f097a11c6d84fb9efc0c89be40f13b7f42d3ce9f79e198/68747470733a2f2f72657669657761626c652e696f2f6c67746d5f7374726f6e672e706e67 ":lgtm_strong:")](https://camo.githubusercontent.com/d6a46917134d5bd730f097a11c6d84fb9efc0c89be40f13b7f42d3ce9f79e198/68747470733a2f2f72657669657761626c652e696f2f6c67746d5f7374726f6e672e706e67) from my side

> Reviewed 2 of 3 files at r2, 1 of 1 files at r5.
>
> *[Reviewable](https://reviewable.io/reviews/toktok/c-toxcore/1216#-:-LNzCaEpCt0LSx_da15L:bybplqg)* status: ![:shipit:](https://github.githubassets.com/images/icons/emoji/shipit.png ":shipit:") complete! 1 change requests, 1 of 1 approvals obtained (waiting on [@iphydf](https://github.com/iphydf))

Sorry, something went wrong.

All reactions

[![iphydf](https://avatars.githubusercontent.com/u/10647936?s=60&v=4)](/iphydf)

**[iphydf](/iphydf)**
approved these changes
[Oct 6, 2018](#pullrequestreview-162270071)

 [View reviewed changes](/TokTok/c-toxcore/pull/1216/files)

 [![@zugz](https://avatars.githubusercontent.com/u/590069?s=40&v=4)](/zugz)
[zugz](/zugz)
[force-pushed](/TokTok/c-toxcore/compare/5ac929f64b5b4b7ff98d2d175c661c80a510c6cb..956eae1b5f03826ad128f05cfe480c3cb07b6a39)
the
fixPQueueMemleak

branch
from
[`5ac929f`](/TokTok/c-toxcore/commit/5ac929f64b5b4b7ff98d2d175c661c80a510c6cb) to
[`956eae1`](/TokTok/c-toxcore/commit/956eae1b5f03826ad128f05cfe480c3cb07b6a39)  [Compare](/TokTok/c-toxcore/compare/5ac929f64b5b4b7ff98d2d175c661c80a510c6cb..956eae1b5f03826ad128f05cfe480c3cb07b6a39)
[October 7, 2018 16:00](#event-1889062864)

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=40&v=4)](/zugz)

`[Fix memleak in tcp server by wiping priority queues on deletion](/TokTok/c-toxcore/pull/1216/commits/5beb00c93d3adb5c23149535624d27c67bc146ea "Fix memleak in tcp server by wiping priority queues on deletion")`

`[5beb00c](/TokTok/c-toxcore/pull/1216/commits/5beb00c93d3adb5c23149535624d27c67bc146ea)`

 [![@zugz](https://avatars.githubusercontent.com/u/590069?s=40&v=4)](/zugz)
[zugz](/zugz)
[force-pushed](/TokTok/c-toxcore/compare/956eae1b5f03826ad128f05cfe480c3cb07b6a39..5beb00c93d3adb5c23149535624d27c67bc146ea)
the
fixPQueueMemleak

branch
from
[`956eae1`](/TokTok/c-toxcore/commit/956eae1b5f03826ad128f05cfe480c3cb07b6a39) to
[`5beb00c`](/TokTok/c-toxcore/commit/5beb00c93d3adb5c23149535624d27c67bc146ea)  [Compare](/TokTok/c-toxcore/compare/956eae1b5f03826ad128f05cfe480c3cb07b6a39..5beb00c93d3adb5c23149535624d27c67bc146ea)
[October 7, 2018 18:14](#event-1889113540)

[![@iphydf](https://avatars.githubusercontent.com/u/10647936?s=40&u=607252cea71e800ff605068d7150ff602cf7db82&v=4)](/iphydf)
[iphydf](/iphydf)
merged commit [`5beb00c`](/TokTok/c-toxcore/commit/5beb00c93d3adb5c23149535624d27c67bc146ea)
into
TokTok:master

[Oct 7, 2018](https://github.com/TokTok/c-toxcore/pull/1216#event-1889135549)

[![@robinlinden](https://avatars.githubusercontent.com/u/8304462?s=40&u=61d7381a8a404d8baf622b43929b965dce10a200&v=4)](/robinlinden)
[robinlinden](/robinlinden)
modified the milestones:
[v0.2.x](/TokTok/c-toxcore/milestone/28),
[v0.2.8](/TokTok/c-toxcore/milestone/36)
[Oct 7, 2018](#event-1889159839)

[![@iphydf](https://avatars.githubusercontent.com/u/10647936?s=40&u=607252cea71e800ff605068d7150ff602cf7db82&v=4)](/iphydf)
[iphydf](/iphydf)
changed the title
~~Fix memleak in tcp server by wiping priority queues on deletion~~
Fix memory leak in tcp server by wiping priority queues on deletion
[Oct 7, 2018](#event-1889208217)

[![@iphydf](https://avatars.githubusercontent.com/u/10647936?s=40&u=607252cea71e800ff605068d7150ff602cf7db82&v=4)](/iphydf)
[iphydf](/iphydf)
changed the title
~~Fix memory leak in tcp server by wiping priority queues on deletion~~
Fix memory leak in tcp server by wiping priority queues on deletion.
[Oct 7, 2018](#event-1889208251)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FTokTok%2Fc-toxcore%2Fpull%2F1216)

Reviewers

[![@iphydf](https://avatars.githubusercontent.com/u/10647936?s=40&v=4)](/iphydf) [iphydf](/iphydf)

iphydf approved these changes

[![@robinlinden](https://avatars.githubusercontent.com/u/8304462?s=40&v=4)](/robinlinden) [robinlinden](/robinlinden)

robinlinden approved these changes

[![@sudden6](https://avatars.githubusercontent.com/u/5585762?s=40&v=4)](/sudden6) [sudden6](/sudden6)

sudden6 approved these changes

Assignees

No one assigned

Labels

None yet

Milestone

 [**v0.2.8**](/TokTok/c-toxcore/milestone/36 "v0.2.8")

Development

Successfully merging this pull request may close these issues.

7 participants

[![@zugz](https://avatars.githubusercontent.com/u/590069?s=52&v=4)](/zugz) [![@kpp](https://avatars.githubusercontent.com/u/467709?s=52&v=4)](/kpp) [![@nurupo](https://avatars.githubusercontent.com/u/1855294?s=52&v=4)](/nurupo) [![@irungentoo](https://avatars.githubusercontent.com/u/2226611?s=52&v=4)](/irungentoo) [![@sudden6](https://avatars.githubusercontent.com/u/5585762?s=52&v=4)](/sudden6) [![@robinlinden](https://avatars.githubusercontent.com/u/8304462?s=52&v=4)](/robinlinden) [![@iphydf](https://avatars.githubusercontent.com/u/10647936?s=52&v=4)](/iphydf)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


