=== Content from www.debian.org_336c76e4_20250125_212345.html ===


---

[[Date Prev](msg00114.html)][[Date Next](msg00116.html)]
[[Thread Prev](msg00114.html)][[Thread Next](msg00116.html)]
[[Date Index](maillist.html#00115)]
[[Thread Index](threads.html#00115)]

# [SECURITY] [DSA 4187-1] linux security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 4187-1] linux security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Tue, 01 May 2018 17:12:02 +0000
* *Message-id*: <[[🔎]](/msgid-search/E1fDYos-0003QT-4F%40seger.debian.org) [E1fDYos-0003QT-4F@seger.debian.org](msg00115.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-4187-1                   security@debian.org
<https://www.debian.org/security/>                            Ben Hutchings
May 01, 2018                          <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : linux
CVE ID         : CVE-2015-9016 CVE-2017-0861 CVE-2017-5715 CVE-2017-5753
                 CVE-2017-13166 CVE-2017-13220 CVE-2017-16526 CVE-2017-16911
                 CVE-2017-16912 CVE-2017-16913 CVE-2017-16914 CVE-2017-18017
                 CVE-2017-18203 CVE-2017-18216 CVE-2017-18232 CVE-2017-18241
                 CVE-2018-1066 CVE-2018-1068 CVE-2018-1092 CVE-2018-5332
                 CVE-2018-5333 CVE-2018-5750 CVE-2018-5803 CVE-2018-6927
                 CVE-2018-7492 CVE-2018-7566 CVE-2018-7740 CVE-2018-7757
                 CVE-2018-7995 CVE-2018-8781 CVE-2018-8822 CVE-2018-1000004
                 CVE-2018-1000199

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2015-9016

    Ming Lei reported a race condition in the multiqueue block layer
    (blk-mq).  On a system with a driver using blk-mq (mtip32xx,
    null_blk, or virtio_blk), a local user might be able to use this
    for denial of service or possibly for privilege escalation.

CVE-2017-0861

    Robb Glasser reported a potential use-after-free in the ALSA (sound)
    PCM core.  We believe this was not possible in practice.

CVE-2017-5715

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 2 (branch
    target injection) and is mitigated for the x86 architecture (amd64
    and i386) by using the "retpoline" compiler feature which allows
    indirect branches to be isolated from speculative execution.

CVE-2017-5753

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 1
    (bounds-check bypass) and is mitigated by identifying vulnerable
    code sections (array bounds checking followed by array access) and
    replacing the array access with the speculation-safe
    array_index_nospec() function.

    More use sites will be added over time.

CVE-2017-13166

    A bug in the 32-bit compatibility layer of the v4l2 ioctl handling
    code has been found. Memory protections ensuring user-provided
    buffers always point to userland memory were disabled, allowing
    destination addresses to be in kernel space. On a 64-bit kernel a
    local user with access to a suitable video device can exploit this
    to overwrite kernel memory, leading to privilege escalation.

CVE-2017-13220

    Al Viro reported that the Bluetooth HIDP implementation could
    dereference a pointer before performing the necessary type check.
    A local user could use this to cause a denial of service.

CVE-2017-16526

    Andrey Konovalov reported that the UWB subsystem may dereference
    an invalid pointer in an error case.  A local user might be able
    to use this for denial of service.

CVE-2017-16911

    Secunia Research reported that the USB/IP vhci_hcd driver exposed
    kernel heap addresses to local users.  This information could aid the
    exploitation of other vulnerabilities.

CVE-2017-16912

    Secunia Research reported that the USB/IP stub driver failed to
    perform a range check on a received packet header field, leading
    to an out-of-bounds read.  A remote user able to connect to the
    USB/IP server could use this for denial of service.

CVE-2017-16913

    Secunia Research reported that the USB/IP stub driver failed to
    perform a range check on a received packet header field, leading
    to excessive memory allocation.  A remote user able to connect to
    the USB/IP server could use this for denial of service.

CVE-2017-16914

    Secunia Research reported that the USB/IP stub driver failed to
    check for an invalid combination of fields in a received packet,
    leading to a null pointer dereference.  A remote user able to
    connect to the USB/IP server could use this for denial of service.

CVE-2017-18017

    Denys Fedoryshchenko reported that the netfilter xt_TCPMSS module
    failed to validate TCP header lengths, potentially leading to a
    use-after-free.  If this module is loaded, it could be used by a
    remote attacker for denial of service or possibly for code
    execution.

CVE-2017-18203

    Hou Tao reported that there was a race condition in creation and
    deletion of device-mapper (DM) devices.  A local user could
    potentially use this for denial of service.

CVE-2017-18216

    Alex Chen reported that the OCFS2 filesystem failed to hold a
    necessary lock during nodemanager sysfs file operations,
    potentially leading to a null pointer dereference.  A local user
    could use this for denial of service.

CVE-2017-18232

    Jason Yan reported a race condition in the SAS (Serial-Attached
    SCSI) subsystem, between probing and destroying a port.  This
    could lead to a deadlock.  A physically present attacker could
    use this to cause a denial of service.

CVE-2017-18241

    Yunlei He reported that the f2fs implementation does not properly
    initialise its state if the "noflush_merge" mount option is used.
    A local user with access to a filesystem mounted with this option
    could use this to cause a denial of service.

CVE-2018-1066

    Dan Aloni reported to Red Hat that the CIFS client implementation
    would dereference a null pointer if the server sent an invalid
    response during NTLMSSP setup negotiation.  This could be used
    by a malicious server for denial of service.

CVE-2018-1068

    The syzkaller tool found that the 32-bit compatibility layer of
    ebtables did not sufficiently validate offset values. On a 64-bit
    kernel, a local user with the CAP_NET_ADMIN capability (in any user
    namespace) could use this to overwrite kernel memory, possibly
    leading to privilege escalation. Debian disables unprivileged user
    namespaces by default.

CVE-2018-1092

    Wen Xu reported that a crafted ext4 filesystem image would
    trigger a null dereference when mounted.  A local user able
    to mount arbitrary filesystems could use this for denial of
    service.

CVE-2018-5332

    Mohamed Ghannam reported that the RDS protocol did not
    sufficiently validate RDMA requests, leading to an out-of-bounds
    write.  A local attacker on a system with the rds module loaded
    could use this for denial of service or possibly for privilege
    escalation.

CVE-2018-5333

    Mohamed Ghannam reported that the RDS protocol did not properly
    handle an error case, leading to a null pointer dereference.  A
    local attacker on a system with the rds module loaded could
    possibly use this for denial of service.

CVE-2018-5750

    Wang Qize reported that the ACPI sbshc driver logged a kernel heap
    address.  This information could aid the exploitation of other
    vulnerabilities.

CVE-2018-5803

    Alexey Kodanev reported that the SCTP protocol did not range-check
    the length of chunks to be created.  A local or remote user could
    use this to cause a denial of service.

CVE-2018-6927

    Li Jinyue reported that the FUTEX_REQUEUE operation on futexes did
    not check for negative parameter values, which might lead to a
    denial of service or other security impact.

CVE-2018-7492

    The syzkaller tool found that the RDS protocol was lacking a null
    pointer check.  A local attacker on a system with the rds module
    loaded could use this for denial of service.

CVE-2018-7566

    Fan LongFei reported a race condition in the ALSA (sound)
    sequencer core, between write and ioctl operations.  This could
    lead to an out-of-bounds access or use-after-free.  A local user
    with access to a sequencer device could use this for denial of
    service or possibly for privilege escalation.

CVE-2018-7740

    Nic Losby reported that the hugetlbfs filesystem's mmap operation
    did not properly range-check the file offset.  A local user with
    access to files on a hugetlbfs filesystem could use this to cause
    a denial of service.

CVE-2018-7757

    Jason Yan reported a memory leak in the SAS (Serial-Attached
    SCSI) subsystem.  A local user on a system with SAS devices
    could use this to cause a denial of service.

CVE-2018-7995

    Seunghun Han reported a race condition in the x86 MCE
    (Machine Check Exception) driver.  This is unlikely to have
    any security impact.

CVE-2018-8781

    Eyal Itkin reported that the udl (DisplayLink) driver's mmap
    operation did not properly range-check the file offset.  A local
    user with access to a udl framebuffer device could exploit this to
    overwrite kernel memory, leading to privilege escalation.

CVE-2018-8822

    Dr Silvio Cesare of InfoSect reported that the ncpfs client
    implementation did not validate reply lengths from the server.  An
    ncpfs server could use this to cause a denial of service or
    remote code execution in the client.

CVE-2018-1000004

    Luo Quan reported a race condition in the ALSA (sound) sequencer
    core, between multiple ioctl operations.  This could lead to a
    deadlock or use-after-free.  A local user with access to a
    sequencer device could use this for denial of service or possibly
    for privilege escalation.

CVE-2018-1000199

    Andy Lutomirski discovered that the ptrace subsystem did not
    sufficiently validate hardware breakpoint settings.  Local users
    can use this to cause a denial of service, or possibly for
    privilege escalation, on x86 (amd64 and i386) and possibly other
    architectures.

For the oldstable distribution (jessie), these problems have been fixed
in version 3.16.56-1.

We recommend that you upgrade your linux packages.

For the detailed security status of linux please refer to its security
tracker page at:
<https://security-tracker.debian.org/tracker/linux>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQKTBAEBCgB9FiEERkRAmAjBceBVMd3uBUy48xNDz0QFAlron61fFIAAAAAALgAo
aXNzdWVyLWZwckBub3RhdGlvbnMub3BlbnBncC5maWZ0aGhvcnNlbWFuLm5ldDQ2
NDQ0MDk4MDhDMTcxRTA1NTMxRERFRTA1NENCOEYzMTM0M0NGNDQACgkQBUy48xND
z0Rtqw//Xf/L4bP65wU9M59Ef6xBt+Eph+yxeMsioGhu80ODdMemlmHzASMtfZjY
AXxyt9l8lbHn8MmwDA4aLhhwHYXwvKATdpHSy1SILrRfb4s9P9uV1vsHaIeZ649E
hDyNon9hP2tPso6BwqiYHZZy9Xxtd+T8vTBeBZwUKOLBkBRvV/gyNSUdJWp6L8WH
aF4D1hHl9ZotDkyIvkubbx77aqbJ88I4R0n69x7L9udFbuXa+U7hV6dJdnpzyl/7
OukJfEtnkaUgWu0MdOfFss6iH5OQISn/y/ricRi29oKQiEp3YwnT5J9pFwSQeJJS
H8ABVt251UoS0J+of3QWw0muOT/6UAF8SNpPKMJXC7Euq8pTmYVPSIeUYf4eqn65
UHZSCKXaszItq+uzVNYdkj504BJ4cG1lFxZtlrFWwKE8p7QOETN0GKvTRdu/SvDd
Hl2nb4HouLpBYS518Th2/MGgzhXXAuO12MH3smenptZbqxKn9Z0XSTJYzFupgJk/
kKF2xkDFBE4toTLVE+6XdUKwYk4vkeDZyOGOwRYThSkKAzrUh5zThgal4HnknD2A
5ye4XLhjgSIT47/nmor6lhxd7WGXGkV33GF0azYlHr/sclfzxcU2Ev3NUBWQ8M3s
CxfIO0FNCzO0WIUf40md7MlIAnDBIRGyYgNIIe7AnSRKKPykEx8=
=wNQS
-----END PGP SIGNATURE-----

```

---



=== Content from git.kernel.org_bf418c5d_20250125_212324.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Håkon Bugge <Haakon.Bugge@oracle.com> | 2017-12-06 17:18:28 +0100 |
| --- | --- | --- |
| committer | David S. Miller <davem@davemloft.net> | 2017-12-06 15:44:27 -0500 |
| commit | [f3069c6d33f6ae63a1668737bc78aaaa51bff7ca](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)) | |
| tree | [0a5504d697abc0ba1e6d6e485340e7bec14524dd](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca) | |
| parent | [32d3e51a82d453762ef148b2c4fbc8a7ec374a88](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=32d3e51a82d453762ef148b2c4fbc8a7ec374a88) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca&id2=32d3e51a82d453762ef148b2c4fbc8a7ec374a88)) | |
| download | [linux-f3069c6d33f6ae63a1668737bc78aaaa51bff7ca.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-f3069c6d33f6ae63a1668737bc78aaaa51bff7ca.tar.gz) | |

rds: Fix NULL pointer dereference in \_\_rds\_rdma\_mapThis is a fix for syzkaller719569, where memory registration was
attempted without any underlying transport being loaded.
Analysis of the case reveals that it is the setsockopt() RDS\_GET\_MR
(2) and RDS\_GET\_MR\_FOR\_DEST (7) that are vulnerable.
Here is an example stack trace when the bug is hit:
BUG: unable to handle kernel NULL pointer dereference at 00000000000000c0
IP: \_\_rds\_rdma\_map+0x36/0x440 [rds]
PGD 2f93d03067 P4D 2f93d03067 PUD 2f93d02067 PMD 0
Oops: 0000 [#1] SMP
Modules linked in: bridge stp llc tun rpcsec\_gss\_krb5 nfsv4
dns\_resolver nfs fscache rds binfmt\_misc sb\_edac intel\_powerclamp
coretemp kvm\_intel kvm irqbypass crct10dif\_pclmul c rc32\_pclmul
ghash\_clmulni\_intel pcbc aesni\_intel crypto\_simd glue\_helper cryptd
iTCO\_wdt mei\_me sg iTCO\_vendor\_support ipmi\_si mei ipmi\_devintf nfsd
shpchp pcspkr i2c\_i801 ioatd ma ipmi\_msghandler wmi lpc\_ich mfd\_core
auth\_rpcgss nfs\_acl lockd grace sunrpc ip\_tables ext4 mbcache jbd2
mgag200 i2c\_algo\_bit drm\_kms\_helper ixgbe syscopyarea ahci sysfillrect
sysimgblt libahci mdio fb\_sys\_fops ttm ptp libata sd\_mod mlx4\_core drm
crc32c\_intel pps\_core megaraid\_sas i2c\_core dca dm\_mirror
dm\_region\_hash dm\_log dm\_mod
CPU: 48 PID: 45787 Comm: repro\_set2 Not tainted 4.14.2-3.el7uek.x86\_64 #2
Hardware name: Oracle Corporation ORACLE SERVER X5-2L/ASM,MOBO TRAY,2U, BIOS 31110000 03/03/2017
task: ffff882f9190db00 task.stack: ffffc9002b994000
RIP: 0010:\_\_rds\_rdma\_map+0x36/0x440 [rds]
RSP: 0018:ffffc9002b997df0 EFLAGS: 00010202
RAX: 0000000000000000 RBX: ffff882fa2182580 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffffc9002b997e40 RDI: ffff882fa2182580
RBP: ffffc9002b997e30 R08: 0000000000000000 R09: 0000000000000002
R10: ffff885fb29e3838 R11: 0000000000000000 R12: ffff882fa2182580
R13: ffff882fa2182580 R14: 0000000000000002 R15: 0000000020000ffc
FS: 00007fbffa20b700(0000) GS:ffff882fbfb80000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000000000c0 CR3: 0000002f98a66006 CR4: 00000000001606e0
Call Trace:
rds\_get\_mr+0x56/0x80 [rds]
rds\_setsockopt+0x172/0x340 [rds]
? \_\_fget\_light+0x25/0x60
? \_\_fdget+0x13/0x20
SyS\_setsockopt+0x80/0xe0
do\_syscall\_64+0x67/0x1b0
entry\_SYSCALL64\_slow\_path+0x25/0x25
RIP: 0033:0x7fbff9b117f9
RSP: 002b:00007fbffa20aed8 EFLAGS: 00000293 ORIG\_RAX: 0000000000000036
RAX: ffffffffffffffda RBX: 00000000000c84a4 RCX: 00007fbff9b117f9
RDX: 0000000000000002 RSI: 0000400000000114 RDI: 000000000000109b
RBP: 00007fbffa20af10 R08: 0000000000000020 R09: 00007fbff9dd7860
R10: 0000000020000ffc R11: 0000000000000293 R12: 0000000000000000
R13: 00007fbffa20b9c0 R14: 00007fbffa20b700 R15: 0000000000000021
Code: 41 56 41 55 49 89 fd 41 54 53 48 83 ec 18 8b 87 f0 02 00 00 48
89 55 d0 48 89 4d c8 85 c0 0f 84 2d 03 00 00 48 8b 87 00 03 00 00 <48>
83 b8 c0 00 00 00 00 0f 84 25 03 00 0 0 48 8b 06 48 8b 56 08
The fix is to check the existence of an underlying transport in
\_\_rds\_rdma\_map().
Signed-off-by: Håkon Bugge <haakon.bugge@oracle.com>
Reported-by: syzbot <syzkaller@googlegroups.com>
Acked-by: Santosh Shilimkar <santosh.shilimkar@oracle.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)

| -rw-r--r-- | [net/rds/rdma.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/net/rds/rdma.c?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/net/rds/rdma.c b/net/rds/rdma.cindex 8886f15abe90e1..bc2f1e0977d657 100644--- a/[net/rds/rdma.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/rds/rdma.c?id=32d3e51a82d453762ef148b2c4fbc8a7ec374a88)+++ b/[net/rds/rdma.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/rds/rdma.c?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)@@ -183,7 +183,7 @@ static int \_\_rds\_rdma\_map(struct rds\_sock \*rs, struct rds\_get\_mr\_args \*args, long i; int ret; - if (rs->rs\_bound\_addr == 0) {+ if (rs->rs\_bound\_addr == 0 || !rs->rs\_transport) { ret = -ENOTCONN; /\* XXX not a great errno \*/ goto out; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-25 21:22:01 +0000



=== Content from usn.ubuntu.com_4947192e_20250125_212340.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3674-2: Linux kernel (Trusty HWE) vulnerabilities

11 June 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-lts-trusty](/security/cves?package=linux-lts-trusty) - Linux hardware enablement kernel from Trusty for Precise ESM

## Details

USN-3674-1 fixed vulnerabilities in the Linux kernel for Ubuntu 14.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 14.04 LTS for Ubuntu

12.04 ESM.

It was discovered that the netfilter subsystem of the Linux kernel did not

properly validate ebtables offsets. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-1068](/security/CVE-2018-1068))

It was discovered that a NULL pointer dereference existed in the RDS

(Reliable Datagram Sockets) protocol implementation in the Linux kernel. A

local attacker could use this to cause a denial of service (system crash).

([CVE-2018-7492](/security/CVE-2018-7492))

Eyal Itkin discovered that the USB displaylink video adapter driver in the

Linux kernel did not properly validate mmap offsets sent from userspace. A

local attacker could use this to expose sensitive information (kernel

memory) or possibly execute arbitrary code. ([CVE-2018-8781](/security/CVE-2018-8781))

Xingyuan Lin discovered that a out-of-bounds read existed in the USB Video

Class (UVC) driver of the Linux kernel. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2017-0627](/security/CVE-2017-0627))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.13.0-151-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0-151.201~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-151.201~precise1)
* [linux-image-generic-lpae-lts-trusty](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0.151.142](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-151.201~precise1)
* [linux-image-3.13.0-151-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0-151.201~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-151.201~precise1)
* [linux-image-generic-lts-trusty](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0.151.142](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-151.201~precise1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-0627](/security/CVE-2017-0627)
* [CVE-2018-1068](/security/CVE-2018-1068)
* [CVE-2018-7492](/security/CVE-2018-7492)
* [CVE-2018-8781](/security/CVE-2018-8781)

## Related notices

* [USN-3674-1](/security/notices/USN-3674-1)
* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from github.com_602031a5_20250125_212328.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff3069c6d33f6ae63a1668737bc78aaaa51bff7ca)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff3069c6d33f6ae63a1668737bc78aaaa51bff7ca)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  438](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

rds: Fix NULL pointer dereference in \_\_rds\_rdma\_map

[Browse files](/torvalds/linux/tree/f3069c6d33f6ae63a1668737bc78aaaa51bff7ca)
Browse the repository at this point in the history

```
This is a fix for syzkaller719569, where memory registration was
attempted without any underlying transport being loaded.

Analysis of the case reveals that it is the setsockopt() RDS_GET_MR
(2) and RDS_GET_MR_FOR_DEST (7) that are vulnerable.

Here is an example stack trace when the bug is hit:

BUG: unable to handle kernel NULL pointer dereference at 00000000000000c0
IP: __rds_rdma_map+0x36/0x440 [rds]
PGD 2f93d03067 P4D 2f93d03067 PUD 2f93d02067 PMD 0
Oops: 0000 [#1] SMP
Modules linked in: bridge stp llc tun rpcsec_gss_krb5 nfsv4
dns_resolver nfs fscache rds binfmt_misc sb_edac intel_powerclamp
coretemp kvm_intel kvm irqbypass crct10dif_pclmul c rc32_pclmul
ghash_clmulni_intel pcbc aesni_intel crypto_simd glue_helper cryptd
iTCO_wdt mei_me sg iTCO_vendor_support ipmi_si mei ipmi_devintf nfsd
shpchp pcspkr i2c_i801 ioatd ma ipmi_msghandler wmi lpc_ich mfd_core
auth_rpcgss nfs_acl lockd grace sunrpc ip_tables ext4 mbcache jbd2
mgag200 i2c_algo_bit drm_kms_helper ixgbe syscopyarea ahci sysfillrect
sysimgblt libahci mdio fb_sys_fops ttm ptp libata sd_mod mlx4_core drm
crc32c_intel pps_core megaraid_sas i2c_core dca dm_mirror
dm_region_hash dm_log dm_mod
CPU: 48 PID: 45787 Comm: repro_set2 Not tainted 4.14.2-3.el7uek.x86_64 #2
Hardware name: Oracle Corporation ORACLE SERVER X5-2L/ASM,MOBO TRAY,2U, BIOS 31110000 03/03/2017
task: ffff882f9190db00 task.stack: ffffc9002b994000
RIP: 0010:__rds_rdma_map+0x36/0x440 [rds]
RSP: 0018:ffffc9002b997df0 EFLAGS: 00010202
RAX: 0000000000000000 RBX: ffff882fa2182580 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffffc9002b997e40 RDI: ffff882fa2182580
RBP: ffffc9002b997e30 R08: 0000000000000000 R09: 0000000000000002
R10: ffff885fb29e3838 R11: 0000000000000000 R12: ffff882fa2182580
R13: ffff882fa2182580 R14: 0000000000000002 R15: 0000000020000ffc
FS:  00007fbffa20b700(0000) GS:ffff882fbfb80000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000000000c0 CR3: 0000002f98a66006 CR4: 00000000001606e0
Call Trace:
 rds_get_mr+0x56/0x80 [rds]
 rds_setsockopt+0x172/0x340 [rds]
 ? __fget_light+0x25/0x60
 ? __fdget+0x13/0x20
 SyS_setsockopt+0x80/0xe0
 do_syscall_64+0x67/0x1b0
 entry_SYSCALL64_slow_path+0x25/0x25
RIP: 0033:0x7fbff9b117f9
RSP: 002b:00007fbffa20aed8 EFLAGS: 00000293 ORIG_RAX: 0000000000000036
RAX: ffffffffffffffda RBX: 00000000000c84a4 RCX: 00007fbff9b117f9
RDX: 0000000000000002 RSI: 0000400000000114 RDI: 000000000000109b
RBP: 00007fbffa20af10 R08: 0000000000000020 R09: 00007fbff9dd7860
R10: 0000000020000ffc R11: 0000000000000293 R12: 0000000000000000
R13: 00007fbffa20b9c0 R14: 00007fbffa20b700 R15: 0000000000000021

Code: 41 56 41 55 49 89 fd 41 54 53 48 83 ec 18 8b 87 f0 02 00 00 48
89 55 d0 48 89 4d c8 85 c0 0f 84 2d 03 00 00 48 8b 87 00 03 00 00 <48>
83 b8 c0 00 00 00 00 0f 84 25 03 00 0 0 48 8b 06 48 8b 56 08

The fix is to check the existence of an underlying transport in
__rds_rdma_map().

Signed-off-by: Håkon Bugge <haakon.bugge@oracle.com>
Reported-by: syzbot <syzkaller@googlegroups.com>
Acked-by: Santosh Shilimkar <santosh.shilimkar@oracle.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
```

* Loading branch information

[![@Hakon-Bugge](https://avatars.githubusercontent.com/u/43997484?s=40&v=4)](/Hakon-Bugge) [![@davem330](https://avatars.githubusercontent.com/u/1053866?s=40&v=4)](/davem330)

[Hakon-Bugge](/torvalds/linux/commits?author=Hakon-Bugge "View all commits by Hakon-Bugge")
authored and
[davem330](/torvalds/linux/commits?author=davem330 "View all commits by davem330")
committed
Dec 6, 2017

1 parent
[32d3e51](/torvalds/linux/commit/32d3e51a82d453762ef148b2c4fbc8a7ec374a88)

commit f3069c6

Showing
**1 changed file**
with
**1 addition**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[net/rds/rdma.c](#diff-3246a0a5e9a0b1489411f6161c2a5fcbcc9c260d847faa141c25bf3f358bd77d "net/rds/rdma.c")

Show comments

[View file](/torvalds/linux/blob/f3069c6d33f6ae63a1668737bc78aaaa51bff7ca/net/rds/rdma.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -183,7 +183,7 @@ static int \_\_rds\_rdma\_map(struct rds\_sock \*rs, struct rds\_get\_mr\_args \*args, |
|  |  | long i; |
|  |  | int ret; |
|  |  |  |
|  |  | if (rs->rs\_bound\_addr == 0) { |
|  |  | if (rs->rs\_bound\_addr == 0 || !rs->rs\_transport) { |
|  |  | ret = -ENOTCONN; /\* XXX not a great errno \*/ |
|  |  | goto out; |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `f3069c6`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff3069c6d33f6ae63a1668737bc78aaaa51bff7ca) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from usn.ubuntu.com_1eabcf2d_20250125_212334.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3619-1: Linux kernel vulnerabilities

4 April 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2
* [linux-snapdragon](/security/cves?package=linux-snapdragon) - Linux kernel for Snapdragon processors

## Details

Jann Horn discovered that the Berkeley Packet Filter (BPF) implementation

in the Linux kernel improperly performed sign extension in some situations.

A local attacker could use this to cause a denial of service (system crash)

or possibly execute arbitrary code. ([CVE-2017-16995](/security/CVE-2017-16995))

It was discovered that a race condition leading to a use-after-free

vulnerability existed in the ALSA PCM subsystem of the Linux kernel. A

local attacker could use this to cause a denial of service (system crash)

or possibly execute arbitrary code. ([CVE-2017-0861](/security/CVE-2017-0861))

It was discovered that the KVM implementation in the Linux kernel allowed

passthrough of the diagnostic I/O port 0x80. An attacker in a guest VM

could use this to cause a denial of service (system crash) in the host OS.

([CVE-2017-1000407](/security/CVE-2017-1000407))

It was discovered that an information disclosure vulnerability existed in

the ACPI implementation of the Linux kernel. A local attacker could use

this to expose sensitive information (kernel memory addresses).

([CVE-2017-11472](/security/CVE-2017-11472))

It was discovered that a use-after-free vulnerability existed in the

network namespaces implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2017-15129](/security/CVE-2017-15129))

It was discovered that the Advanced Linux Sound Architecture (ALSA)

subsystem in the Linux kernel contained a use-after-free when handling

device removal. A physically proximate attacker could use this to cause a

denial of service (system crash) or possibly execute arbitrary code.

([CVE-2017-16528](/security/CVE-2017-16528))

Andrey Konovalov discovered that the usbtest device driver in the Linux

kernel did not properly validate endpoint metadata. A physically proximate

attacker could use this to cause a denial of service (system crash).

([CVE-2017-16532](/security/CVE-2017-16532))

Andrey Konovalov discovered that the Conexant cx231xx USB video capture

driver in the Linux kernel did not properly validate interface descriptors.

A physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-16536](/security/CVE-2017-16536))

Andrey Konovalov discovered that the SoundGraph iMON USB driver in the

Linux kernel did not properly validate device metadata. A physically

proximate attacker could use this to cause a denial of service (system

crash). ([CVE-2017-16537](/security/CVE-2017-16537))

Andrey Konovalov discovered that the IMS Passenger Control Unit USB driver

in the Linux kernel did not properly validate device descriptors. A

physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-16645](/security/CVE-2017-16645))

Andrey Konovalov discovered that the DiBcom DiB0700 USB DVB driver in the

Linux kernel did not properly handle detach events. A physically proximate

attacker could use this to cause a denial of service (system crash).

([CVE-2017-16646](/security/CVE-2017-16646))

Andrey Konovalov discovered that the CDC USB Ethernet driver did not

properly validate device descriptors. A physically proximate attacker could

use this to cause a denial of service (system crash). ([CVE-2017-16649](/security/CVE-2017-16649))

Andrey Konovalov discovered that the QMI WWAN USB driver did not properly

validate device descriptors. A physically proximate attacker could use this

to cause a denial of service (system crash). ([CVE-2017-16650](/security/CVE-2017-16650))

It was discovered that the USB Virtual Host Controller Interface (VHCI)

driver in the Linux kernel contained an information disclosure vulnerability.

A physically proximate attacker could use this to expose sensitive

information (kernel memory). ([CVE-2017-16911](/security/CVE-2017-16911))

It was discovered that the USB over IP implementation in the Linux kernel

did not validate endpoint numbers. A remote attacker could use this to

cause a denial of service (system crash). ([CVE-2017-16912](/security/CVE-2017-16912))

It was discovered that the USB over IP implementation in the Linux kernel

did not properly validate CMD\_SUBMIT packets. A remote attacker could use

this to cause a denial of service (excessive memory consumption).

([CVE-2017-16913](/security/CVE-2017-16913))

It was discovered that the USB over IP implementation in the Linux kernel

contained a NULL pointer dereference error. A remote attacker could use

this to cause a denial of service (system crash). ([CVE-2017-16914](/security/CVE-2017-16914))

It was discovered that the HugeTLB component of the Linux kernel did not

properly handle holes in hugetlb ranges. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2017-16994](/security/CVE-2017-16994))

It was discovered that the netfilter component of the Linux did not

properly restrict access to the connection tracking helpers list. A local

attacker could use this to bypass intended access restrictions.

([CVE-2017-17448](/security/CVE-2017-17448))

It was discovered that the netlink subsystem in the Linux kernel did not

properly restrict observations of netlink messages to the appropriate net

namespace. A local attacker could use this to expose sensitive information

(kernel netlink traffic). ([CVE-2017-17449](/security/CVE-2017-17449))

It was discovered that the netfilter passive OS fingerprinting (xt\_osf)

module did not properly perform access control checks. A local attacker

could improperly modify the system-wide OS fingerprint list.

([CVE-2017-17450](/security/CVE-2017-17450))

It was discovered that the core USB subsystem in the Linux kernel did not

validate the number of configurations and interfaces in a device. A

physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-17558](/security/CVE-2017-17558))

Dmitry Vyukov discovered that the KVM implementation in the Linux kernel

contained an out-of-bounds read when handling memory-mapped I/O. A local

attacker could use this to expose sensitive information. ([CVE-2017-17741](/security/CVE-2017-17741))

It was discovered that the Salsa20 encryption algorithm implementations in

the Linux kernel did not properly handle zero-length inputs. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2017-17805](/security/CVE-2017-17805))

It was discovered that the HMAC implementation did not validate the state

of the underlying cryptographic hash algorithm. A local attacker could use

this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2017-17806](/security/CVE-2017-17806))

It was discovered that the keyring implementation in the Linux kernel did

not properly check permissions when a key request was performed on a

task's default keyring. A local attacker could use this to add keys to

unauthorized keyrings. ([CVE-2017-17807](/security/CVE-2017-17807))

Alexei Starovoitov discovered that the Berkeley Packet Filter (BPF)

implementation in the Linux kernel contained a branch-pruning logic issue

around unreachable code. A local attacker could use this to cause a denial

of service. ([CVE-2017-17862](/security/CVE-2017-17862))

It was discovered that the parallel cryptography component of the Linux

kernel incorrectly freed kernel memory. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-18075](/security/CVE-2017-18075))

It was discovered that a race condition existed in the Device Mapper

component of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash). ([CVE-2017-18203](/security/CVE-2017-18203))

It was discovered that a race condition existed in the OCFS2 file system

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (kernel deadlock). ([CVE-2017-18204](/security/CVE-2017-18204))

It was discovered that an infinite loop could occur in the madvise(2)

implementation in the Linux kernel in certain circumstances. A local

attacker could use this to cause a denial of service (system hang).

([CVE-2017-18208](/security/CVE-2017-18208))

Andy Lutomirski discovered that the KVM implementation in the Linux kernel

was vulnerable to a debug exception error when single-stepping through a

syscall. A local attacker in a non-Linux guest vm could possibly use this

to gain administrative privileges in the guest vm. ([CVE-2017-7518](/security/CVE-2017-7518))

It was discovered that the Broadcom NetXtremeII ethernet driver in the

Linux kernel did not properly validate Generic Segment Offload (GSO) packet

sizes. An attacker could use this to cause a denial of service (interface

unavailability). ([CVE-2018-1000026](/security/CVE-2018-1000026))

It was discovered that the Reliable Datagram Socket (RDS)

implementation in the Linux kernel contained an out-of-bounds write

during RDMA page allocation. An attacker could use this to cause a

denial of service (system crash) or possibly execute arbitrary code.

([CVE-2018-5332](/security/CVE-2018-5332))

Mohamed Ghannam discovered a null pointer dereference in the RDS (Reliable

Datagram Sockets) protocol implementation of the Linux kernel. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2018-5333](/security/CVE-2018-5333))

范龙飞 discovered that a race condition existed in loop block device

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-5344](/security/CVE-2018-5344))

It was discovered that an integer overflow error existed in the futex

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash). ([CVE-2018-6927](/security/CVE-2018-6927))

It was discovered that a NULL pointer dereference existed in the RDS

(Reliable Datagram Sockets) protocol implementation in the Linux kernel. A

local attacker could use this to cause a denial of service (system crash).

([CVE-2018-7492](/security/CVE-2018-7492))

It was discovered that the Broadcom UniMAC MDIO bus controller driver in

the Linux kernel did not properly validate device resources. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2018-8043](/security/CVE-2018-8043))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.4.0-1020-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.4.0-1020.25](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.4.0-1020.25)
* [linux-image-4.4.0-1054-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.4.0-1054.63](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.4.0-1054.63)
* [linux-image-4.4.0-1086-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.4.0-1086.94](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.4.0-1086.94)
* [linux-image-4.4.0-1088-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon)
  -
  [4.4.0-1088.93](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon/4.4.0-1088.93)
* [linux-image-4.4.0-119-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-119.143](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-119.143)
* [linux-image-4.4.0-119-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-119.143](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-119.143)
* [linux-image-4.4.0-119-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-119.143](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-119.143)
* [linux-image-4.4.0-119-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-119.143](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-119.143)
* [linux-image-4.4.0-119-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-119.143](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-119.143)
* [linux-image-4.4.0-119-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-119.143](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-119.143)
* [linux-image-4.4.0-119-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-119.143](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-119.143)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-0861](/security/CVE-2017-0861)
* [CVE-2017-1000407](/security/CVE-2017-1000407)
* [CVE-2017-11472](/security/CVE-2017-11472)
* [CVE-2017-15129](/security/CVE-2017-15129)
* [CVE-2017-16528](/security/CVE-2017-16528)
* [CVE-2017-16532](/security/CVE-2017-16532)
* [CVE-2017-16536](/security/CVE-2017-16536)
* [CVE-2017-16537](/security/CVE-2017-16537)
* [CVE-2017-16645](/security/CVE-2017-16645)
* [CVE-2017-16646](/security/CVE-2017-16646)
* [CVE-2017-16649](/security/CVE-2017-16649)
* [CVE-2017-16650](/security/CVE-2017-16650)
* [CVE-2017-16911](/security/CVE-2017-16911)
* [CVE-2017-16912](/security/CVE-2017-16912)
* [CVE-2017-16913](/security/CVE-2017-16913)
* [CVE-2017-16914](/security/CVE-2017-16914)
* [CVE-2017-16994](/security/CVE-2017-16994)
* [CVE-2017-16995](/security/CVE-2017-16995)
* [CVE-2017-17448](/security/CVE-2017-17448)
* [CVE-2017-17449](/security/CVE-2017-17449)
* [CVE-2017-17450](/security/CVE-2017-17450)
* [CVE-2017-17558](/security/CVE-2017-17558)
* [CVE-2017-17741](/security/CVE-2017-17741)
* [CVE-2017-17805](/security/CVE-2017-17805)
* [CVE-2017-17806](/security/CVE-2017-17806)
* [CVE-2017-17807](/security/CVE-2017-17807)
* [CVE-2017-17862](/security/CVE-2017-17862)
* [CVE-2017-18075](/security/CVE-2017-18075)
* [CVE-2017-18203](/security/CVE-2017-18203)
* [CVE-2017-18204](/security/CVE-2017-18204)
* [CVE-2017-18208](/security/CVE-2017-18208)
* [CVE-2017-7518](/security/CVE-2017-7518)
* [CVE-2018-1000026](/security/CVE-2018-1000026)
* [CVE-2018-5332](/security/CVE-2018-5332)
* [CVE-2018-5333](/security/CVE-2018-5333)
* [CVE-2018-5344](/security/CVE-2018-5344)
* [CVE-2018-6927](/security/CVE-2018-6927)
* [CVE-2018-7492](/security/CVE-2018-7492)
* [CVE-2018-8043](/security/CVE-2018-8043)

## Related notices

* [USN-3583-2](/security/notices/USN-3583-2)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3617-1](/security/notices/USN-3617-1)
* [USN-3617-3](/security/notices/USN-3617-3)
* [USN-3617-2](/security/notices/USN-3617-2)
* [USN-3632-1](/security/notices/USN-3632-1)
* [USN-3583-1](/security/notices/USN-3583-1)
* [USN-3754-1](/security/notices/USN-3754-1)
* [USN-3822-2](/security/notices/USN-3822-2)
* [USN-3822-1](/security/notices/USN-3822-1)
* [USN-3523-2](/security/notices/USN-3523-2)
* [USN-3633-1](/security/notices/USN-3633-1)
* [USN-3523-1](/security/notices/USN-3523-1)
* [USN-3523-3](/security/notices/USN-3523-3)
* [USN-3620-1](/security/notices/USN-3620-1)
* [USN-3620-2](/security/notices/USN-3620-2)
* [USN-3653-1](/security/notices/USN-3653-1)
* [USN-3657-1](/security/notices/USN-3657-1)
* [USN-3655-1](/security/notices/USN-3655-1)
* [USN-3653-2](/security/notices/USN-3653-2)
* [USN-3655-2](/security/notices/USN-3655-2)
* [USN-3698-2](/security/notices/USN-3698-2)
* [USN-3697-1](/security/notices/USN-3697-1)
* [USN-3698-1](/security/notices/USN-3698-1)
* [USN-3697-2](/security/notices/USN-3697-2)
* [USN-3674-2](/security/notices/USN-3674-2)
* [USN-3674-1](/security/notices/USN-3674-1)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3630-2](/security/notices/USN-3630-2)
* [USN-3630-1](/security/notices/USN-3630-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from lists.debian.org_4cb0aa4a_20250125_212329.html ===


---

[Date Prev][[Date Next](msg00001.html)]
[Thread Prev][[Thread Next](msg00001.html)]
[[Date Index](maillist.html#00000)]
[[Thread Index](threads.html#00000)]

# [SECURITY] [DLA 1369-1] linux security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 1369-1] linux security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Wed, 02 May 2018 21:58:29 +0100
* *Message-id*: <[[🔎]](/msgid-search/b7523f224fe2386a0f6ce54b31b558cafa6b3a9a.camel%40debian.org) [b7523f224fe2386a0f6ce54b31b558cafa6b3a9a.camel@debian.org](msg00000.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
Package        : linux
Version        : 3.2.101-1
CVE ID         : CVE-2017-0861 CVE-2017-5715 CVE-2017-13166 CVE-2017-16526
                 CVE-2017-16911 CVE-2017-16912 CVE-2017-16913 CVE-2017-16914
                 CVE-2017-18017 CVE-2017-18203 CVE-2017-18216 CVE-2018-1068
                 CVE-2018-1092 CVE-2018-5332 CVE-2018-5333 CVE-2018-5750
                 CVE-2018-5803 CVE-2018-6927 CVE-2018-7492 CVE-2018-7566
                 CVE-2018-7740 CVE-2018-7757 CVE-2018-7995 CVE-2018-8781
                 CVE-2018-8822 CVE-2018-1000004 CVE-2018-1000199
Debian Bug     : 887106

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2017-0861

    Robb Glasser reported a potential use-after-free in the ALSA (sound)
    PCM core.  We believe this was not possible in practice.

CVE-2017-5715

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 2 (branch
    target injection) and is mitigated for the x86 architecture (amd64
    and i386) by using the "retpoline" compiler feature which allows
    indirect branches to be isolated from speculative execution.

CVE-2017-13166

    A bug in the 32-bit compatibility layer of the v4l2 ioctl handling
    code has been found.  Memory protections ensuring user-provided
    buffers always point to userland memory were disabled, allowing
    destination addresses to be in kernel space.  On a 64-bit kernel
    (amd64 flavour) a local user with access to a suitable video
    device can exploit this to overwrite kernel memory, leading to
    privilege escalation.

CVE-2017-16526

    Andrey Konovalov reported that the UWB subsystem may dereference
    an invalid pointer in an error case.  A local user might be able
    to use this for denial of service.

CVE-2017-16911

    Secunia Research reported that the USB/IP vhci_hcd driver exposed
    kernel heap addresses to local users.  This information could aid the
    exploitation of other vulnerabilities.

CVE-2017-16912

    Secunia Research reported that the USB/IP stub driver failed to
    perform a range check on a received packet header field, leading
    to an out-of-bounds read.  A remote user able to connect to the
    USB/IP server could use this for denial of service.

CVE-2017-16913

    Secunia Research reported that the USB/IP stub driver failed to
    perform a range check on a received packet header field, leading
    to excessive memory allocation.  A remote user able to connect to
    the USB/IP server could use this for denial of service.

CVE-2017-16914

    Secunia Research reported that the USB/IP stub driver failed to
    check for an invalid combination of fields in a recieved packet,
    leading to a null pointer dereference.  A remote user able to
    connect to the USB/IP server could use this for denial of service.

CVE-2017-18017

    Denys Fedoryshchenko reported that the netfilter xt_TCPMSS module
    failed to validate TCP header lengths, potentially leading to a
    use-after-free.  If this module is loaded, it could be used by a
    remote attacker for denial of service or possibly for code
    execution.

CVE-2017-18203

    Hou Tao reported that there was a race condition in creation and
    deletion of device-mapper (DM) devices.  A local user could
    potentially use this for denial of service.

CVE-2017-18216

    Alex Chen reported that the OCFS2 filesystem failed to hold a
    necessary lock during nodemanager sysfs file operations,
    potentially leading to a null pointer dereference.  A local user
    could use this for denial of service.

CVE-2018-1068

    The syzkaller tool found that the 32-bit compatibility layer of
    ebtables did not sufficiently validate offset values.  On a 64-bit
    kernel (amd64 flavour), a local user with the CAP_NET_ADMIN
    capability could use this to overwrite kernel memory, possibly
    leading to privilege escalation.

CVE-2018-1092

    Wen Xu reported that a crafted ext4 filesystem image would
    trigger a null dereference when mounted.  A local user able
    to mount arbitrary filesystems could use this for denial of
    service.

CVE-2018-5332

    Mohamed Ghannam reported that the RDS protocol did not
    sufficiently validate RDMA requests, leading to an out-of-bounds
    write.  A local attacker on a system with the rds module loaded
    could use this for denial of service or possibly for privilege
    escalation.

CVE-2018-5333

    Mohamed Ghannam reported that the RDS protocol did not properly
    handle an error case, leading to a null pointer dereference.  A
    local attacker on a system with the rds module loaded could
    possibly use this for denial of service.

CVE-2018-5750

    Wang Qize reported that the ACPI sbshc driver logged a kernel heap
    address.  This information could aid the exploitation of other
    vulnerabilities.

CVE-2018-5803

    Alexey Kodanev reported that the SCTP protocol did not range-check
    the length of chunks to be created.  A local or remote user could
    use this to cause a denial of service.

CVE-2018-6927

    Li Jinyue reported that the FUTEX_REQUEUE operation on futexes did
    not check for negative parameter values, which might lead to a
    denial of service or other security impact.

CVE-2018-7492

    The syzkaller tool found that the RDS protocol was lacking a null
    pointer check.  A local attacker on a system with the rds module
    loaded could use this for denial of service.

CVE-2018-7566

    范龙飞 (Fan LongFei) reported a race condition in the ALSA (sound)
    sequencer core, between write and ioctl operations.  This could
    lead to an out-of-bounds access or use-after-free.  A local user
    with access to a sequencer device could use this for denial of
    service or possibly for privilege escalation.

CVE-2018-7740

    Nic Losby reported that the hugetlbfs filesystem's mmap operation
    did not properly range-check the file offset.  A local user with
    access to files on a hugetlbfs filesystem could use this to cause
    a denial of service.

CVE-2018-7757

    Jason Yan reported a memory leak in the SAS (Serial-Attached
    SCSI) subsystem.  A local user on a system with SAS devices
    could use this to cause a denial of service.

CVE-2018-7995

    Seunghun Han reported a race condition in the x86 MCE
    (Machine Check Exception) driver.  This is unlikely to have
    any security impact.

CVE-2018-8781

    Eyal Itkin reported that the udl (DisplayLink) driver's mmap
    operation did not properly range-check the file offset.  A local
    user with access to a udl framebuffer device could exploit this to
    overwrite kernel memory, leading to privilege escalation.

CVE-2018-8822

    Dr Silvio Cesare of InfoSect reported that the ncpfs client
    implementation did not validate reply lengths from the server.  An
    ncpfs server could use this to cause a denial of service or
    remote code execution in the client.

CVE-2018-1000004

    Luo Quan reported a race condition in the ALSA (sound) sequencer
    core, between multiple ioctl operations.  This could lead to a
    deadlock or use-after-free.  A local user with access to a
    sequencer device could use this for denial of service or possibly
    for privilege escalation.

CVE-2018-1000199

    Andy Lutomirski discovered that the ptrace subsystem did not
    sufficiently validate hardware breakpoint settings.  Local users
    can use this to cause a denial of service, or possibly for
    privilege escalation, on x86 (amd64 and i386) and possibly other
    architectures.

Additionally, some mitigations for CVE-2017-5753 are included in this
release:

CVE-2017-5753

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 1
    (bounds-check bypass) and is mitigated by identifying vulnerable
    code sections (array bounds checking followed by array access) and
    replacing the array access with the speculation-safe
    array_index_nospec() function.

    More use sites will be added over time.

For Debian 7 "Wheezy", these problems have been fixed in version
3.2.101-1.  This version also includes bug fixes from upstream versions
up to and including 3.2.101.  It also fixes a regression in the
procfs hidepid option in the previous version (Debian bug #887106).

We recommend that you upgrade your linux packages.

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

--
Ben Hutchings - Debian developer, member of kernel, installer and LTS teams
```

**Attachment:
[signature.asc](pgpQ_Lyjwu10v.pgp)**

*Description:* This is a digitally signed message part

---



=== Content from usn.ubuntu.com_1dfeebcd_20250125_212342.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3677-1: Linux kernel vulnerabilities

11 June 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 17.10](/security/notices?release=artful)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2

## Details

It was discovered that the netfilter subsystem of the Linux kernel did not

properly validate ebtables offsets. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-1068](/security/CVE-2018-1068))

Wen Xu discovered that the ext4 filesystem implementation in the Linux

kernel did not properly handle corrupted meta data in some situations. An

attacker could use this to specially craft an ext4 file system that caused

a denial of service (system crash) when mounted. ([CVE-2018-1092](/security/CVE-2018-1092))

It was discovered that a NULL pointer dereference existed in the RDS

(Reliable Datagram Sockets) protocol implementation in the Linux kernel. A

local attacker could use this to cause a denial of service (system crash).

([CVE-2018-7492](/security/CVE-2018-7492))

It was discovered that the 802.11 software simulator implementation in the

Linux kernel contained a memory leak when handling certain error

conditions. A local attacker could possibly use this to cause a denial of

service (memory exhaustion). ([CVE-2018-8087](/security/CVE-2018-8087))

Eyal Itkin discovered that the USB displaylink video adapter driver in the

Linux kernel did not properly validate mmap offsets sent from userspace. A

local attacker could use this to expose sensitive information (kernel

memory) or possibly execute arbitrary code. ([CVE-2018-8781](/security/CVE-2018-8781))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 17.10

* [linux-image-4.13.0-45-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.13.0-45.50](https://launchpad.net/ubuntu/%2Bsource/linux/4.13.0-45.50)
* [linux-image-4.13.0-1022-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.13.0-1022.23](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.13.0-1022.23)
* [linux-image-4.13.0-45-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.13.0-45.50](https://launchpad.net/ubuntu/%2Bsource/linux/4.13.0-45.50)
* linux-image-generic-lpae
  -
  4.13.0.45.48
* linux-image-generic
  -
  4.13.0.45.48
* [linux-image-4.13.0-45-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.13.0-45.50](https://launchpad.net/ubuntu/%2Bsource/linux/4.13.0-45.50)
* linux-image-lowlatency
  -
  4.13.0.45.48
* linux-image-raspi2
  -
  4.13.0.1022.20

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-1068](/security/CVE-2018-1068)
* [CVE-2018-1092](/security/CVE-2018-1092)
* [CVE-2018-7492](/security/CVE-2018-7492)
* [CVE-2018-8087](/security/CVE-2018-8087)
* [CVE-2018-8781](/security/CVE-2018-8781)

## Related notices

* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3674-2](/security/notices/USN-3674-2)
* [USN-3674-1](/security/notices/USN-3674-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3676-1](/security/notices/USN-3676-1)
* [USN-3676-2](/security/notices/USN-3676-2)
* [USN-3678-4](/security/notices/USN-3678-4)
* [USN-3678-3](/security/notices/USN-3678-3)
* [USN-3678-1](/security/notices/USN-3678-1)
* [USN-3678-2](/security/notices/USN-3678-2)
* [USN-3754-1](/security/notices/USN-3754-1)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from access.redhat.com_aa2d038a_20250126_120254.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from usn.ubuntu.com_3bc874e7_20250125_212344.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3677-2: Linux kernel (HWE) vulnerabilities

12 June 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-hwe](/security/cves?package=linux-hwe) - Linux hardware enablement (HWE) kernel
* [linux-oem](/security/cves?package=linux-oem) - Linux kernel for OEM processors

## Details

USN-3677-1 fixed vulnerabilities in the Linux kernel for Ubuntu 17.10.

This update provides the corresponding updates for the Linux Hardware

Enablement (HWE) kernel from Ubuntu 17.10 for Ubuntu 16.04 LTS.

It was discovered that the netfilter subsystem of the Linux kernel did not

properly validate ebtables offsets. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-1068](/security/CVE-2018-1068))

Wen Xu discovered that the ext4 filesystem implementation in the Linux

kernel did not properly handle corrupted meta data in some situations. An

attacker could use this to specially craft an ext4 file system that caused

a denial of service (system crash) when mounted. ([CVE-2018-1092](/security/CVE-2018-1092))

It was discovered that a NULL pointer dereference existed in the RDS

(Reliable Datagram Sockets) protocol implementation in the Linux kernel. A

local attacker could use this to cause a denial of service (system crash).

([CVE-2018-7492](/security/CVE-2018-7492))

It was discovered that the 802.11 software simulator implementation in the

Linux kernel contained a memory leak when handling certain error

conditions. A local attacker could possibly use this to cause a denial of

service (memory exhaustion). ([CVE-2018-8087](/security/CVE-2018-8087))

Eyal Itkin discovered that the USB displaylink video adapter driver in the

Linux kernel did not properly validate mmap offsets sent from userspace. A

local attacker could use this to expose sensitive information (kernel

memory) or possibly execute arbitrary code. ([CVE-2018-8781](/security/CVE-2018-8781))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.13.0-1019-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-gcp)
  -
  [4.13.0-1019.23](https://launchpad.net/ubuntu/%2Bsource/linux-gcp/4.13.0-1019.23)
* [linux-image-4.13.0-1030-oem](https://launchpad.net/ubuntu/%2Bsource/linux-oem)
  -
  [4.13.0-1030.33](https://launchpad.net/ubuntu/%2Bsource/linux-oem/4.13.0-1030.33)
* [linux-image-4.13.0-45-generic](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.13.0-45.50~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.13.0-45.50~16.04.1)
* [linux-image-4.13.0-45-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.13.0-45.50~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.13.0-45.50~16.04.1)
* [linux-image-4.13.0-45-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.13.0-45.50~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.13.0-45.50~16.04.1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-1068](/security/CVE-2018-1068)
* [CVE-2018-1092](/security/CVE-2018-1092)
* [CVE-2018-7492](/security/CVE-2018-7492)
* [CVE-2018-8087](/security/CVE-2018-8087)
* [CVE-2018-8781](/security/CVE-2018-8781)

## Related notices

* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3674-2](/security/notices/USN-3674-2)
* [USN-3674-1](/security/notices/USN-3674-1)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3676-1](/security/notices/USN-3676-1)
* [USN-3676-2](/security/notices/USN-3676-2)
* [USN-3678-4](/security/notices/USN-3678-4)
* [USN-3678-3](/security/notices/USN-3678-3)
* [USN-3678-1](/security/notices/USN-3678-1)
* [USN-3678-2](/security/notices/USN-3678-2)
* [USN-3754-1](/security/notices/USN-3754-1)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from xorl.wordpress.com_82188a5e_20250125_212348.html ===

# [xorl %eax, %eax](https://xorl.wordpress.com/)

## Linux kernel RDMA NULL pointer dereference

[with one comment](https://xorl.wordpress.com/2017/12/18/linux-kernel-rdma-null-pointer-dereference/#comments)

While reading through Linux kernel’s ChangeLog I came across this one. I was unable to find any CVE ID for this vulnerability reported by Håkon Bugge on 6 December 2017. The vulnerability was discovered by [Google’s syzkaller](https://github.com/google/syzkaller) kernel fuzzer and reported in syzkaller719569. The vulnerable code starts in the setsockopt() system call implementation for [RDS](https://en.wikipedia.org/wiki/Reliable_Datagram_Sockets) (Reliable Datagram Sockets). This code is located at net/rds/af\_rds.c and here is the code path we are interested in.

```

static int rds_setsockopt(struct socket *sock, int level, int optname,
			  char __user *optval, unsigned int optlen)
{
	struct rds_sock *rs = rds_sk_to_rs(sock->sk);
	int ret;
   ...
	case RDS_GET_MR:
		ret = rds_get_mr(rs, optval, optlen);
		break;
	case RDS_GET_MR_FOR_DEST:
		ret = rds_get_mr_for_dest(rs, optval, optlen);
		break;
   ...
}

```

Before we check those two options, it is important to see some specific value in “rds\_sock” structure. This structure is defined in net/rds/rds.h header file. The key here is that “rs\_transport” pointer in “rds\_sock” structure can be NULL.

```

/**
 * struct rds_transport -  transport specific behavioural hooks
   ...
 */
   ...
struct rds_transport {
   ...
};

struct rds_sock {
   ...
	/*
	 * bound_addr used for both incoming and outgoing, no INADDR_ANY
	 * support.
	 */
   ...
	struct rds_transport    *rs_transport;
   ...
};

```

Back in rds\_setsockopt(), there are two options with very similar code. The RDS\_GET\_MR and RDS\_GET\_MR\_FOR\_DES which will both result in a code that uses copy\_from\_user() to copy the “rds\_get\_mr\_args” or “rds\_get\_mr\_for\_dest\_args” structure to the kernel space, and then invoke \_\_rds\_rdma\_map() routine to do the mapping.

```

int rds_get_mr(struct rds_sock *rs, char __user *optval, int optlen)
{
	struct rds_get_mr_args args;
   ...
	if (copy_from_user(&args, (struct rds_get_mr_args __user *)optval,
			   sizeof(struct rds_get_mr_args)))
		return -EFAULT;

	return __rds_rdma_map(rs, &args, NULL, NULL);
}

int rds_get_mr_for_dest(struct rds_sock *rs, char __user *optval, int optlen)
{
   ...
	if (copy_from_user(&args, (struct rds_get_mr_for_dest_args __user *)optval,
			   sizeof(struct rds_get_mr_for_dest_args)))
		return -EFAULT;
   ...
	return __rds_rdma_map(rs, &new_args, NULL, NULL);
}

```

If we now move to \_\_rds\_rdma\_map() in net/rds/rdma.c we will quickly notice what’s the issue that triggers the vulnerability. The code will try to access the get\_mr() callback function from the “rs\_transport” pointer which as mentioned earlier can be unset (NULL), resulting in a NULL pointer dereference. This code path can be reached from the previously described setsockopt() system call options.

```

static int __rds_rdma_map(struct rds_sock *rs, struct rds_get_mr_args *args,
				u64 *cookie_ret, struct rds_mr **mr_ret)
{
   ...
	if (!rs->rs_transport->get_mr) {
		ret = -EOPNOTSUPP;
		goto out;
	}
   ...
	return ret;
}

```

The [patch](https://patchwork.kernel.org/patch/10096441/) was to add an additional check that ensures that “rs\_transport” is not NULL. If it’s NULL the \_\_rds\_rdma\_map() will exit with “ENOTCONN” (Transport endpoint is not connected) error code.

```

diff --git a/net/rds/rdma.c b/net/rds/rdma.c
index 8886f15abe90..bc2f1e0977d6 100644
--- a/net/rds/rdma.c
+++ b/net/rds/rdma.c
@@ -183,7 +183,7 @@  static int __rds_rdma_map(struct rds_sock *rs, struct rds_get_mr_args *args,
 	long i;
 	int ret;

-	if (rs->rs_bound_addr == 0) {
+	if (rs->rs_bound_addr == 0 || !rs->rs_transport) {
 		ret = -ENOTCONN; /* XXX not a great errno */
 		goto out;
 	}

```
### Share this:

* [Reddit](https://xorl.wordpress.com/2017/12/18/linux-kernel-rdma-null-pointer-dereference/?share=reddit "Click to share on Reddit")
* [Facebook](https://xorl.wordpress.com/2017/12/18/linux-kernel-rdma-null-pointer-dereference/?share=facebook "Click to share on Facebook")
* [Twitter](https://xorl.wordpress.com/2017/12/18/linux-kernel-rdma-null-pointer-dereference/?share=twitter "Click to share on Twitter")
* Email
Like Loading...
### *Related*

Written by xorl

December 18, 2017 at 23:19

Posted in [vulnerabilities](https://xorl.wordpress.com/category/vulnerabilities/)

« [Trick for quick reverse engineering of JavaScript malware](https://xorl.wordpress.com/2017/12/16/trick-for-quick-reverse-engineering-of-javascript-malware/)
[Threat Analysis: Marketplaces for verified social media accounts](https://xorl.wordpress.com/2017/12/19/marketplaces-for-verified-social-media-accounts/) »

### One Response

Subscribe to comments with [RSS](https://xorl.wordpress.com/2017/12/18/linux-kernel-rdma-null-pointer-dereference/feed/).

1. Greeat post

   **[Faith](https://www.faithpeters.com/)**

   November 23, 2024 at [16:18](#comment-122273)

### Leave a comment

Δ

[![RSS Feed](https://xorl.wordpress.com/i/rss/blue-small.png?m=1391188133i)](https://xorl.wordpress.com/feed/ "Subscribe to Posts")

Search for:

### Categories

Categories
Select Category
administration  (28)
android  (1)
books  (43)
C programming  (16)
conferences/trainings  (27)
dell  (4)
freebsd  (24)
fujitsu-siemens  (1)
fun  (35)
gera’s insecure programming  (5)
grsecurity  (20)
hax  (27)
history  (1)
hp  (1)
ibm  (2)
linux  (238)
malware  (4)
mistakes  (6)
motorcycles & cars  (14)
netbsd  (9)
news  (37)
openbsd  (7)
opsec  (8)
osx  (2)
pfsense  (1)
phrack  (3)
polls  (1)
raptor’s wargames  (2)
reverse engineering  (11)
security  (43)
solaris  (19)
threat intelligence  (36)
tips  (7)
Uncategorized  (24)
vulnerabilities  (446)
Wargames  (9)
Windows  (10)

### Archives

Archives
Select Month
 February 2024  (2)
 January 2023  (1)
 December 2022  (2)
 July 2022  (1)
 June 2022  (1)
 April 2022  (1)
 December 2021  (1)
 October 2021  (3)
 August 2021  (1)
 July 2021  (2)
 May 2021  (3)
 April 2021  (10)
 March 2021  (2)
 February 2021  (1)
 January 2021  (4)
 August 2020  (2)
 June 2020  (1)
 May 2020  (2)
 March 2020  (2)
 January 2020  (2)
 December 2019  (6)
 July 2018  (1)
 March 2018  (5)
 February 2018  (8)
 January 2018  (4)
 December 2017  (18)
 November 2017  (38)
 May 2013  (10)
 September 2012  (4)
 August 2012  (3)
 June 2012  (1)
 May 2012  (5)
 April 2012  (1)
 February 2012  (1)
 January 2012  (5)
 December 2011  (5)
 October 2011  (7)
 September 2011  (1)
 August 2011  (10)
 July 2011  (11)
 June 2011  (10)
 May 2011  (22)
 April 2011  (17)
 March 2011  (16)
 February 2011  (8)
 January 2011  (24)
 December 2010  (27)
 November 2010  (29)
 October 2010  (16)
 September 2010  (14)
 April 2010  (5)
 February 2010  (4)
 January 2010  (27)
 December 2009  (9)
 November 2009  (40)
 October 2009  (26)
 August 2009  (24)
 July 2009  (39)
 June 2009  (24)
 May 2009  (38)
 April 2009  (51)
 March 2009  (28)
 February 2009  (24)
 January 2009  (50)
### Pages

* [About](https://xorl.wordpress.com/about/)
* [Offensive Security Private Companies Inventory](https://xorl.wordpress.com/offensive-security-private-companies-inventory/)

### Follow Blog via Email

Click to follow this blog and receive notifications of new posts by email.

Email Address:

Follow

### APT mappings

* [China](https://xorl.wordpress.com/2021/04/20/chinese-cyber-operations-groups/)
* [DPRK (North Korea)](https://xorl.wordpress.com/2021/04/24/north-korea-dprk-cyber-operations-groups/)
* [EU](https://xorl.wordpress.com/2021/04/28/eu-cyber-operations-groups/)
* [Iran](https://xorl.wordpress.com/2021/05/06/iran-cyber-operations-groups/)
* [Russia](https://xorl.wordpress.com/2021/04/16/russias-cyber-operations-groups/)
* [USA](https://xorl.wordpress.com/2021/04/18/us-cyber-operations-groups/)

### Links

* [.aware](http://www.awarenetwork.org/ "rattle and iqlord (and legion recently) :)")
* [Attacking the Core](http://www.attackingthecore.com/ "Website of the amazing kernel exploitation book :)")
* [dividead’s blog](http://dividead.wordpress.com/ "the amazing dividead.")
* [grsecurity](http://grsecurity.net/ "spender’s awesome patch")
* [ithilgore's site](http://sock-raw.org/ "Low level network programming and more")
* [sin's blog](http://amnezia.2f30.org/ "coding 24/7")
* [stealth's blog](http://c-skills.blogspot.com/ "you should already know him, no need for a description")

[Blog at WordPress.com.](https://wordpress.com/?ref=footer_blog)

* [Comment](https://xorl.wordpress.com/2017/12/18/linux-kernel-rdma-null-pointer-dereference/#comments)
* Reblog
* Subscribe
  Subscribed

  + [![](https://s2.wp.com/i/logo/wpcom-gray-white.png) xorl %eax, %eax](https://xorl.wordpress.com)

  Join 149 other subscribers

  Sign me up

  + Already have a WordPress.com account? [Log in now.](https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fxorl.wordpress.com%2F2017%2F12%2F18%2Flinux-kernel-rdma-null-pointer-dereference%2F&signup_flow=account)
* Privacy
* + [![](https://s2.wp.com/i/logo/wpcom-gray-white.png) xorl %eax, %eax](https://xorl.wordpress.com)
  + Subscribe
    Subscribed
  + [Sign up](https://wordpress.com/start/)
  + [Log in](https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fxorl.wordpress.com%2F2017%2F12%2F18%2Flinux-kernel-rdma-null-pointer-dereference%2F&signup_flow=account)
  + [Copy shortlink](https://wp.me/ppetF-12e)
  + [Report this content](https://wordpress.com/abuse/?report_url=https://xorl.wordpress.com/2017/12/18/linux-kernel-rdma-null-pointer-dereference/)
  + [View post in Reader](https://wordpress.com/read/blogs/6013855/posts/3982)
  + [Manage subscriptions](https://subscribe.wordpress.com/)
  + Collapse this bar

%d

![](https://pixel.wp.com/b.gif?v=noscript)



=== Content from www.kernel.org_6b4ec14d_20250125_212347.html ===
commit 3afae8437c3cbc22966762e80e81818f5a90eb06
Author: Greg Kroah-Hartman
Date: Sun Dec 17 15:08:14 2017 +0100
Linux 4.14.7
commit 7bc8eb30f1e02b4dd6fd2869720c64d9bf39d765
Author: Mauro Carvalho Chehab
Date: Tue Nov 7 08:39:39 2017 -0500
dvb\_frontend: don't use-after-free the frontend struct
commit b1cb7372fa822af6c06c8045963571d13ad6348b upstream.
dvb\_frontend\_invoke\_release() may free the frontend struct.
So, the free logic can't update it anymore after calling it.
That's OK, as \_\_dvb\_frontend\_free() is called only when the
krefs are zeroed, so nobody is using it anymore.
That should fix the following KASAN error:
The KASAN report looks like this (running on kernel 3e0cc09a3a2c40ec1ffb6b4e12da86e98feccb11 (4.14-rc5+)):
==================================================================
BUG: KASAN: use-after-free in \_\_dvb\_frontend\_free+0x113/0x120
Write of size 8 at addr ffff880067d45a00 by task kworker/0:1/24
CPU: 0 PID: 24 Comm: kworker/0:1 Not tainted 4.14.0-rc5-43687-g06ab8a23e0e6 #545
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
Workqueue: usb\_hub\_wq hub\_event
Call Trace:
\_\_dump\_stack lib/dump\_stack.c:16
dump\_stack+0x292/0x395 lib/dump\_stack.c:52
print\_address\_description+0x78/0x280 mm/kasan/report.c:252
kasan\_report\_error mm/kasan/report.c:351
kasan\_report+0x23d/0x350 mm/kasan/report.c:409
\_\_asan\_report\_store8\_noabort+0x1c/0x20 mm/kasan/report.c:435
\_\_dvb\_frontend\_free+0x113/0x120 drivers/media/dvb-core/dvb\_frontend.c:156
dvb\_frontend\_put+0x59/0x70 drivers/media/dvb-core/dvb\_frontend.c:176
dvb\_frontend\_detach+0x120/0x150 drivers/media/dvb-core/dvb\_frontend.c:2803
dvb\_usb\_adapter\_frontend\_exit+0xd6/0x160 drivers/media/usb/dvb-usb/dvb-usb-dvb.c:340
dvb\_usb\_adapter\_exit drivers/media/usb/dvb-usb/dvb-usb-init.c:116
dvb\_usb\_exit+0x9b/0x200 drivers/media/usb/dvb-usb/dvb-usb-init.c:132
dvb\_usb\_device\_exit+0xa5/0xf0 drivers/media/usb/dvb-usb/dvb-usb-init.c:295
usb\_unbind\_interface+0x21c/0xa90 drivers/usb/core/driver.c:423
\_\_device\_release\_driver drivers/base/dd.c:861
device\_release\_driver\_internal+0x4f1/0x5c0 drivers/base/dd.c:893
device\_release\_driver+0x1e/0x30 drivers/base/dd.c:918
bus\_remove\_device+0x2f4/0x4b0 drivers/base/bus.c:565
device\_del+0x5c4/0xab0 drivers/base/core.c:1985
usb\_disable\_device+0x1e9/0x680 drivers/usb/core/message.c:1170
usb\_disconnect+0x260/0x7a0 drivers/usb/core/hub.c:2124
hub\_port\_connect drivers/usb/core/hub.c:4754
hub\_port\_connect\_change drivers/usb/core/hub.c:5009
port\_event drivers/usb/core/hub.c:5115
hub\_event+0x1318/0x3740 drivers/usb/core/hub.c:5195
process\_one\_work+0xc73/0x1d90 kernel/workqueue.c:2119
worker\_thread+0x221/0x1850 kernel/workqueue.c:2253
kthread+0x363/0x440 kernel/kthread.c:231
ret\_from\_fork+0x2a/0x40 arch/x86/entry/entry\_64.S:431
Allocated by task 24:
save\_stack\_trace+0x1b/0x20 arch/x86/kernel/stacktrace.c:59
save\_stack+0x43/0xd0 mm/kasan/kasan.c:447
set\_track mm/kasan/kasan.c:459
kasan\_kmalloc+0xad/0xe0 mm/kasan/kasan.c:551
kmem\_cache\_alloc\_trace+0x11e/0x2d0 mm/slub.c:2772
kmalloc ./include/linux/slab.h:493
kzalloc ./include/linux/slab.h:666
dtt200u\_fe\_attach+0x4c/0x110 drivers/media/usb/dvb-usb/dtt200u-fe.c:212
dtt200u\_frontend\_attach+0x35/0x80 drivers/media/usb/dvb-usb/dtt200u.c:136
dvb\_usb\_adapter\_frontend\_init+0x32b/0x660 drivers/media/usb/dvb-usb/dvb-usb-dvb.c:286
dvb\_usb\_adapter\_init drivers/media/usb/dvb-usb/dvb-usb-init.c:86
dvb\_usb\_init drivers/media/usb/dvb-usb/dvb-usb-init.c:162
dvb\_usb\_device\_init+0xf73/0x17f0 drivers/media/usb/dvb-usb/dvb-usb-init.c:277
dtt200u\_usb\_probe+0xa1/0xe0 drivers/media/usb/dvb-usb/dtt200u.c:155
usb\_probe\_interface+0x35d/0x8e0 drivers/usb/core/driver.c:361
really\_probe drivers/base/dd.c:413
driver\_probe\_device+0x610/0xa00 drivers/base/dd.c:557
\_\_device\_attach\_driver+0x230/0x290 drivers/base/dd.c:653
bus\_for\_each\_drv+0x161/0x210 drivers/base/bus.c:463
\_\_device\_attach+0x26b/0x3c0 drivers/base/dd.c:710
device\_initial\_probe+0x1f/0x30 drivers/base/dd.c:757
bus\_probe\_device+0x1eb/0x290 drivers/base/bus.c:523
device\_add+0xd0b/0x1660 drivers/base/core.c:1835
usb\_set\_configuration+0x104e/0x1870 drivers/usb/core/message.c:1932
generic\_probe+0x73/0xe0 drivers/usb/core/generic.c:174
usb\_probe\_device+0xaf/0xe0 drivers/usb/core/driver.c:266
really\_probe drivers/base/dd.c:413
driver\_probe\_device+0x610/0xa00 drivers/base/dd.c:557
\_\_device\_attach\_driver+0x230/0x290 drivers/base/dd.c:653
bus\_for\_each\_drv+0x161/0x210 drivers/base/bus.c:463
\_\_device\_attach+0x26b/0x3c0 drivers/base/dd.c:710
device\_initial\_probe+0x1f/0x30 drivers/base/dd.c:757
bus\_probe\_device+0x1eb/0x290 drivers/base/bus.c:523
device\_add+0xd0b/0x1660 drivers/base/core.c:1835
usb\_new\_device+0x7b8/0x1020 drivers/usb/core/hub.c:2457
hub\_port\_connect drivers/usb/core/hub.c:4903
hub\_port\_connect\_change drivers/usb/core/hub.c:5009
port\_event drivers/usb/core/hub.c:5115
hub\_event+0x194d/0x3740 drivers/usb/core/hub.c:5195
process\_one\_work+0xc73/0x1d90 kernel/workqueue.c:2119
worker\_thread+0x221/0x1850 kernel/workqueue.c:2253
kthread+0x363/0x440 kernel/kthread.c:231
ret\_from\_fork+0x2a/0x40 arch/x86/entry/entry\_64.S:431
Freed by task 24:
save\_stack\_trace+0x1b/0x20 arch/x86/kernel/stacktrace.c:59
save\_stack+0x43/0xd0 mm/kasan/kasan.c:447
set\_track mm/kasan/kasan.c:459
kasan\_slab\_free+0x72/0xc0 mm/kasan/kasan.c:524
slab\_free\_hook mm/slub.c:1390
slab\_free\_freelist\_hook mm/slub.c:1412
slab\_free mm/slub.c:2988
kfree+0xf6/0x2f0 mm/slub.c:3919
dtt200u\_fe\_release+0x3c/0x50 drivers/media/usb/dvb-usb/dtt200u-fe.c:202
dvb\_frontend\_invoke\_release.part.13+0x1c/0x30 drivers/media/dvb-core/dvb\_frontend.c:2790
dvb\_frontend\_invoke\_release drivers/media/dvb-core/dvb\_frontend.c:2789
\_\_dvb\_frontend\_free+0xad/0x120 drivers/media/dvb-core/dvb\_frontend.c:153
dvb\_frontend\_put+0x59/0x70 drivers/media/dvb-core/dvb\_frontend.c:176
dvb\_frontend\_detach+0x120/0x150 drivers/media/dvb-core/dvb\_frontend.c:2803
dvb\_usb\_adapter\_frontend\_exit+0xd6/0x160 drivers/media/usb/dvb-usb/dvb-usb-dvb.c:340
dvb\_usb\_adapter\_exit drivers/media/usb/dvb-usb/dvb-usb-init.c:116
dvb\_usb\_exit+0x9b/0x200 drivers/media/usb/dvb-usb/dvb-usb-init.c:132
dvb\_usb\_device\_exit+0xa5/0xf0 drivers/media/usb/dvb-usb/dvb-usb-init.c:295
usb\_unbind\_interface+0x21c/0xa90 drivers/usb/core/driver.c:423
\_\_device\_release\_driver drivers/base/dd.c:861
device\_release\_driver\_internal+0x4f1/0x5c0 drivers/base/dd.c:893
device\_release\_driver+0x1e/0x30 drivers/base/dd.c:918
bus\_remove\_device+0x2f4/0x4b0 drivers/base/bus.c:565
device\_del+0x5c4/0xab0 drivers/base/core.c:1985
usb\_disable\_device+0x1e9/0x680 drivers/usb/core/message.c:1170
usb\_disconnect+0x260/0x7a0 drivers/usb/core/hub.c:2124
hub\_port\_connect drivers/usb/core/hub.c:4754
hub\_port\_connect\_change drivers/usb/core/hub.c:5009
port\_event drivers/usb/core/hub.c:5115
hub\_event+0x1318/0x3740 drivers/usb/core/hub.c:5195
process\_one\_work+0xc73/0x1d90 kernel/workqueue.c:2119
worker\_thread+0x221/0x1850 kernel/workqueue.c:2253
kthread+0x363/0x440 kernel/kthread.c:231
ret\_from\_fork+0x2a/0x40 arch/x86/entry/entry\_64.S:431
The buggy address belongs to the object at ffff880067d45500
which belongs to the cache kmalloc-2048 of size 2048
The buggy address is located 1280 bytes inside of
2048-byte region [ffff880067d45500, ffff880067d45d00)
The buggy address belongs to the page:
page:ffffea00019f5000 count:1 mapcount:0 mapping: (null)
index:0x0 compound\_mapcount: 0
flags: 0x100000000008100(slab|head)
raw: 0100000000008100 0000000000000000 0000000000000000 00000001000f000f
raw: dead000000000100 dead000000000200 ffff88006c002d80 0000000000000000
page dumped because: kasan: bad access detected
Memory state around the buggy address:
ffff880067d45900: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
ffff880067d45980: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
ffff880067d45a00: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
^
ffff880067d45a80: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
ffff880067d45b00: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
==================================================================
Fixes: ead666000a5f ("media: dvb\_frontend: only use kref after initialized")
Reported-by: Andrey Konovalov
Suggested-by: Matthias Schwarzott
Tested-by: Andrey Konovalov
Signed-off-by: Mauro Carvalho Chehab
Cc: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit ce344631dc13717314184ebd47f5e8b0ff3cfcab
Author: Daniel Scheller
Date: Sun Oct 29 11:43:22 2017 -0400
media: dvb-core: always call invoke\_release() in fe\_free()
commit 62229de19ff2b7f3e0ebf4d48ad99061127d0281 upstream.
Follow-up to: ead666000a5f ("media: dvb\_frontend: only use kref after initialized")
The aforementioned commit fixed refcount OOPSes when demod driver attaching
succeeded but tuner driver didn't. However, the use count of the attached
demod drivers don't go back to zero and thus couldn't be cleanly unloaded.
Improve on this by calling dvb\_frontend\_invoke\_release() in
\_\_dvb\_frontend\_free() regardless of fepriv being NULL, instead of returning
when fepriv is NULL. This is safe to do since \_invoke\_release() will check
for passed pointers being valid before calling the .release() function.
[mchehab@s-opensource.com: changed the logic a little bit to reduce
conflicts with another bug fix patch under review]
Fixes: ead666000a5f ("media: dvb\_frontend: only use kref after initialized")
Signed-off-by: Daniel Scheller
Signed-off-by: Mauro Carvalho Chehab
Cc: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit 93e2d845f265f8ff006f6ac5134f038ad382614e
Author: Reinette Chatre
Date: Fri Oct 20 02:16:58 2017 -0700
x86/intel\_rdt: Fix potential deadlock during resctrl unmount
[ Upstream commit 36b6f9fcb8928c06b6638a4cf91bc9d69bb49aa2 ]
Lockdep warns about a potential deadlock:
[ 66.782842] ======================================================
[ 66.782888] WARNING: possible circular locking dependency detected
[ 66.782937] 4.14.0-rc2-test-test+ #48 Not tainted
[ 66.782983] ------------------------------------------------------
[ 66.783052] umount/336 is trying to acquire lock:
[ 66.783117] (cpu\_hotplug\_lock.rw\_sem){++++}, at: [] rdt\_kill\_sb+0x215/0x390
[ 66.783193]
but task is already holding lock:
[ 66.783244] (rdtgroup\_mutex){+.+.}, at: [] rdt\_kill\_sb+0x36/0x390
[ 66.783305]
which lock already depends on the new lock.
[ 66.783364]
the existing dependency chain (in reverse order) is:
[ 66.783419]
-> #3 (rdtgroup\_mutex){+.+.}:
[ 66.783467] \_\_lock\_acquire+0x1293/0x13f0
[ 66.783509] lock\_acquire+0xaf/0x220
[ 66.783543] \_\_mutex\_lock+0x71/0x9b0
[ 66.783575] mutex\_lock\_nested+0x1b/0x20
[ 66.783610] intel\_rdt\_online\_cpu+0x3b/0x430
[ 66.783649] cpuhp\_invoke\_callback+0xab/0x8e0
[ 66.783687] cpuhp\_thread\_fun+0x7a/0x150
[ 66.783722] smpboot\_thread\_fn+0x1cc/0x270
[ 66.783764] kthread+0x16e/0x190
[ 66.783794] ret\_from\_fork+0x27/0x40
[ 66.783825]
-> #2 (cpuhp\_state){+.+.}:
[ 66.783870] \_\_lock\_acquire+0x1293/0x13f0
[ 66.783906] lock\_acquire+0xaf/0x220
[ 66.783938] cpuhp\_issue\_call+0x102/0x170
[ 66.783974] \_\_cpuhp\_setup\_state\_cpuslocked+0x154/0x2a0
[ 66.784023] \_\_cpuhp\_setup\_state+0xc7/0x170
[ 66.784061] page\_writeback\_init+0x43/0x67
[ 66.784097] pagecache\_init+0x43/0x4a
[ 66.784131] start\_kernel+0x3ad/0x3f7
[ 66.784165] x86\_64\_start\_reservations+0x2a/0x2c
[ 66.784204] x86\_64\_start\_kernel+0x72/0x75
[ 66.784241] verify\_cpu+0x0/0xfb
[ 66.784270]
-> #1 (cpuhp\_state\_mutex){+.+.}:
[ 66.784319] \_\_lock\_acquire+0x1293/0x13f0
[ 66.784355] lock\_acquire+0xaf/0x220
[ 66.784387] \_\_mutex\_lock+0x71/0x9b0
[ 66.784419] mutex\_lock\_nested+0x1b/0x20
[ 66.784454] \_\_cpuhp\_setup\_state\_cpuslocked+0x52/0x2a0
[ 66.784497] \_\_cpuhp\_setup\_state+0xc7/0x170
[ 66.784535] page\_alloc\_init+0x28/0x30
[ 66.784569] start\_kernel+0x148/0x3f7
[ 66.784602] x86\_64\_start\_reservations+0x2a/0x2c
[ 66.784642] x86\_64\_start\_kernel+0x72/0x75
[ 66.784678] verify\_cpu+0x0/0xfb
[ 66.784707]
-> #0 (cpu\_hotplug\_lock.rw\_sem){++++}:
[ 66.784759] check\_prev\_add+0x32f/0x6e0
[ 66.784794] \_\_lock\_acquire+0x1293/0x13f0
[ 66.784830] lock\_acquire+0xaf/0x220
[ 66.784863] cpus\_read\_lock+0x3d/0xb0
[ 66.784896] rdt\_kill\_sb+0x215/0x390
[ 66.784930] deactivate\_locked\_super+0x3e/0x70
[ 66.784968] deactivate\_super+0x40/0x60
[ 66.785003] cleanup\_mnt+0x3f/0x80
[ 66.785034] \_\_cleanup\_mnt+0x12/0x20
[ 66.785070] task\_work\_run+0x8b/0xc0
[ 66.785103] exit\_to\_usermode\_loop+0x94/0xa0
[ 66.786804] syscall\_return\_slowpath+0xe8/0x150
[ 66.788502] entry\_SYSCALL\_64\_fastpath+0xab/0xad
[ 66.790194]
other info that might help us debug this:
[ 66.795139] Chain exists of:
cpu\_hotplug\_lock.rw\_sem --> cpuhp\_state --> rdtgroup\_mutex
[ 66.800035] Possible unsafe locking scenario:
[ 66.803267] CPU0 CPU1
[ 66.804867] ---- ----
[ 66.806443] lock(rdtgroup\_mutex);
[ 66.808002] lock(cpuhp\_state);
[ 66.809565] lock(rdtgroup\_mutex);
[ 66.811110] lock(cpu\_hotplug\_lock.rw\_sem);
[ 66.812608]
\*\*\* DEADLOCK \*\*\*
[ 66.816983] 2 locks held by umount/336:
[ 66.818418] #0: (&type->s\_umount\_key#35){+.+.}, at: [] deactivate\_super+0x38/0x60
[ 66.819922] #1: (rdtgroup\_mutex){+.+.}, at: [] rdt\_kill\_sb+0x36/0x390
When the resctrl filesystem is unmounted the locks should be obtain in the
locks in the same order as was done when the cpus came online:
cpu\_hotplug\_lock before rdtgroup\_mutex.
This also requires to switch the static\_branch\_disable() calls to the
\_cpulocked variant because now cpu hotplug lock is held already.
[ tglx: Switched to cpus\_read\_[un]lock ]
Signed-off-by: Reinette Chatre
Signed-off-by: Thomas Gleixner
Tested-by: Sai Praneeth Prakhya
Acked-by: Vikas Shivappa
Acked-by: Fenghua Yu
Acked-by: Tony Luck
Link: https://lkml.kernel.org/r/cc292e76be073f7260604651711c47b09fd0dc81.1508490116.git.reinette.chatre@intel.com
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit f0a7d7b4298ce318fe07266af899a9b7c4227ad6
Author: Leon Romanovsky
Date: Wed Oct 25 23:10:19 2017 +0300
RDMA/cxgb4: Annotate r2 and stag as \_\_be32
[ Upstream commit 7d7d065a5eec7e218174d5c64a9f53f99ffdb119 ]
Chelsio cxgb4 HW is big-endian, hence there is need to properly
annotate r2 and stag fields as \_\_be32 and not \_\_u32 to fix the
following sparse warnings.
drivers/infiniband/hw/cxgb4/qp.c:614:16:
warning: incorrect type in assignment (different base types)
expected unsigned int [unsigned] [usertype] r2
got restricted \_\_be32 [usertype]
drivers/infiniband/hw/cxgb4/qp.c:615:18:
warning: incorrect type in assignment (different base types)
expected unsigned int [unsigned] [usertype] stag
got restricted \_\_be32 [usertype]
Cc: Steve Wise
Signed-off-by: Leon Romanovsky
Reviewed-by: Steve Wise
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 89a459e0d519b289c15e4da8f52ff5528c7b8a3c
Author: Zdenek Kabelac
Date: Wed Nov 8 13:44:56 2017 +0100
md: free unused memory after bitmap resize
[ Upstream commit 0868b99c214a3d55486c700de7c3f770b7243e7c ]
When bitmap is resized, the old kalloced chunks just are not released
once the resized bitmap starts to use new space.
This fixes in particular kmemleak reports like this one:
unreferenced object 0xffff8f4311e9c000 (size 4096):
comm "lvm", pid 19333, jiffies 4295263268 (age 528.265s)
hex dump (first 32 bytes):
02 80 02 80 02 80 02 80 02 80 02 80 02 80 02 80 ................
02 80 02 80 02 80 02 80 02 80 02 80 02 80 02 80 ................
backtrace:
[] kmemleak\_alloc+0x4a/0xa0
[] kmem\_cache\_alloc\_trace+0x14e/0x2e0
[] bitmap\_checkpage+0x7c/0x110
[] bitmap\_get\_counter+0x45/0xd0
[] bitmap\_set\_memory\_bits+0x43/0xe0
[] bitmap\_init\_from\_disk+0x23c/0x530
[] bitmap\_load+0xbe/0x160
[] raid\_preresume+0x203/0x2f0 [dm\_raid]
[] dm\_table\_resume\_targets+0x4f/0xe0
[] dm\_resume+0x122/0x140
[] dev\_suspend+0x18f/0x290
[] ctl\_ioctl+0x287/0x560
[] dm\_ctl\_ioctl+0x13/0x20
[] do\_vfs\_ioctl+0xa6/0x750
[] SyS\_ioctl+0x79/0x90
[] entry\_SYSCALL\_64\_fastpath+0x1f/0xc2
Signed-off-by: Zdenek Kabelac
Signed-off-by: Shaohua Li
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 2c727856d07198ca0c0d054480e608f0f759f6c5
Author: Heinz Mauelshagen
Date: Thu Nov 2 19:58:28 2017 +0100
dm raid: fix panic when attempting to force a raid to sync
[ Upstream commit 233978449074ca7e45d9c959f9ec612d1b852893 ]
Requesting a sync on an active raid device via a table reload
(see 'sync' parameter in Documentation/device-mapper/dm-raid.txt)
skips the super\_load() call that defines the superblock size
(rdev->sb\_size) -- resulting in an oops if/when super\_sync()->memset()
is called.
Fix by moving the initialization of the superblock start and size
out of super\_load() to the caller (analyse\_superblocks).
Signed-off-by: Heinz Mauelshagen
Signed-off-by: Mike Snitzer
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 0ad0bb60166d8e4fbacaaaaaeb10a24de5e99aff
Author: Paul Moore
Date: Fri Sep 1 09:44:34 2017 -0400
audit: ensure that 'audit=1' actually enables audit for PID 1
[ Upstream commit 173743dd99a49c956b124a74c8aacb0384739a4c ]
Prior to this patch we enabled audit in audit\_init(), which is too
late for PID 1 as the standard initcalls are run after the PID 1 task
is forked. This means that we never allocate an audit\_context (see
audit\_alloc()) for PID 1 and therefore miss a lot of audit events
generated by PID 1.
This patch enables audit as early as possible to help ensure that when
PID 1 is forked it can allocate an audit\_context if required.
Reviewed-by: Richard Guy Briggs
Signed-off-by: Paul Moore
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 4086f7cf0c3e2fe275a2a18dc25749df348c0cdb
Author: Steve Grubb
Date: Tue Oct 17 18:29:22 2017 -0400
audit: Allow auditd to set pid to 0 to end auditing
[ Upstream commit 33e8a907804428109ce1d12301c3365d619cc4df ]
The API to end auditing has historically been for auditd to set the
pid to 0. This patch restores that functionality.
See: https://github.com/linux-audit/audit-kernel/issues/69
Reviewed-by: Richard Guy Briggs
Signed-off-by: Steve Grubb
Signed-off-by: Paul Moore
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7536280f9c949a97e06381a6137412c06838c3e7
Author: Israel Rukshin
Date: Sun Nov 5 08:43:01 2017 +0000
nvmet-rdma: update queue list during ib\_device removal
[ Upstream commit 43b92fd27aaef0f529c9321cfebbaec1d7b8f503 ]
A NULL deref happens when nvmet\_rdma\_remove\_one() is called more than once
(e.g. while connected via 2 ports).
The first call frees the queues related to the first ib\_device but
doesn't remove them from the queue list.
While calling nvmet\_rdma\_remove\_one() for the second ib\_device it goes over
the full queue list again and we get the NULL deref.
Fixes: f1d4ef7d ("nvmet-rdma: register ib\_client to not deadlock in device removal")
Signed-off-by: Israel Rukshin
Reviewed-by: Max Gurtovoy
Reviewed-by: Sagi Grimberg
Signed-off-by: Christoph Hellwig
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit a4000d951e3723d5aff6dd4ce069c5908365dc24
Author: Bart Van Assche
Date: Wed Nov 8 10:23:45 2017 -0800
blk-mq: Avoid that request queue removal can trigger list corruption
[ Upstream commit aba7afc5671c23beade64d10caf86e24a9105dab ]
Avoid that removal of a request queue sporadically triggers the
following warning:
list\_del corruption. next->prev should be ffff8807d649b970, but was 6b6b6b6b6b6b6b6b
WARNING: CPU: 3 PID: 342 at lib/list\_debug.c:56 \_\_list\_del\_entry\_valid+0x92/0xa0
Call Trace:
process\_one\_work+0x11b/0x660
worker\_thread+0x3d/0x3b0
kthread+0x129/0x140
ret\_from\_fork+0x27/0x40
Signed-off-by: Bart Van Assche
Cc: Christoph Hellwig
Cc: Hannes Reinecke
Cc: Johannes Thumshirn
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit bd099ef951dd15883c010e044b3c9de4276dd5ae
Author: Hongxu Jia
Date: Fri Nov 10 15:59:17 2017 +0800
ide: ide-atapi: fix compile error with defining macro DEBUG
[ Upstream commit 8dc7a31fbce5e2dbbacd83d910da37105181b054 ]
Compile ide-atapi failed with defining macro "DEBUG"
...
|drivers/ide/ide-atapi.c:285:52: error: 'struct request' has
no member named 'cmd'; did you mean 'csd'?
| debug\_log("%s: rq->cmd[0]: 0x%x\n", \_\_func\_\_, rq->cmd[0]);
...
Since we split the scsi\_request out of struct request, it missed
do the same thing on debug\_log
Fixes: 82ed4db499b8 ("block: split scsi\_request out of struct request")
Signed-off-by: Hongxu Jia
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 7015ca81bc8041c17f2d45943703c5b887207d5d
Author: Keefe Liu
Date: Thu Nov 9 20:09:31 2017 +0800
ipvlan: fix ipv6 outbound device
[ Upstream commit ca29fd7cce5a6444d57fb86517589a1a31c759e1 ]
When process the outbound packet of ipv6, we should assign the master
device to output device other than input device.
Signed-off-by: Keefe Liu
Acked-by: Mahesh Bandewar
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit 854b27edf7b0672e5181e75274dc734863c89f2e
Author: Vaidyanathan Srinivasan
Date: Thu Aug 24 00:28:41 2017 +0530
powerpc/powernv/idle: Round up latency and residency values
[ Upstream commit 8d4e10e9ed9450e18fbbf6a8872be0eac9fd4999 ]
On PowerNV platforms, firmware provides exit latency and
target residency for each of the idle states in nano
seconds. Cpuidle framework expects the values in micro
seconds. Round up to nearest micro seconds to avoid errors
in cases where the values are defined as fractional micro
seconds.
Default idle state of 'snooze' has exit latency of zero. If
other states have fractional micro second exit latency, they
would get rounded down to zero micro second and make cpuidle
framework choose deeper idle state when snooze loop is the
right choice.
Reported-by: Anton Blanchard
Signed-off-by: Vaidyanathan Srinivasan
Reviewed-by: Gautham R. Shenoy
Signed-off-by: Michael Ellerman
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit b0c08c89ea1c0f47423d1da0bcdcd182611823c6
Author: Masahiro Yamada
Date: Thu Oct 12 18:22:25 2017 +0900
kbuild: do not call cc-option before KBUILD\_CFLAGS initialization
[ Upstream commit 433dc2ebe7d17dd21cba7ad5c362d37323592236 ]
Some $(call cc-option,...) are invoked very early, even before
KBUILD\_CFLAGS, etc. are initialized.
The returned string from $(call cc-option,...) depends on
KBUILD\_CPPFLAGS, KBUILD\_CFLAGS, and GCC\_PLUGINS\_CFLAGS.
Since they are exported, they are not empty when the top Makefile
is recursively invoked.
The recursion occurs in several places. For example, the top
Makefile invokes itself for silentoldconfig. "make tinyconfig",
"make rpm-pkg" are the cases, too.
In those cases, the second call of cc-option from the same line
runs a different shell command due to non-pristine KBUILD\_CFLAGS.
To get the same result all the time, KBUILD\_\* and GCC\_PLUGINS\_CFLAGS
must be initialized before any call of cc-option. This avoids
garbage data in the .cache.mk file.
Move all calls of cc-option below the config targets because target
compiler flags are unnecessary for Kconfig.
Signed-off-by: Masahiro Yamada
Reviewed-by: Douglas Anderson
Signed-off-by: Sasha Levin
Signed-off-by: Greg Kroah-Hartman
commit d7a71904e6027136bea9a24cb30e75777d8d9256
Author: Marc Zyngier
Date: Thu Nov 16 17:58:17 2017 +0000
KVM: arm/arm64: vgic-its: Preserve the revious read from the pending table
commit 64afe6e9eb4841f35317da4393de21a047a883b3 upstream.
The current pending table parsing code assumes that we keep the
previous read of the pending bits, but keep that variable in
the current block, making sure it is discarded on each loop.
We end-up using whatever is on the stack. Who knows, it might
just be the right thing...
Fixes: 33d3bc9556a7d ("KVM: arm64: vgic-its: Read initial LPI pending table")
Reported-by: AKASHI Takahiro
Reviewed-by: Christoffer Dall
Signed-off-by: Marc Zyngier
Signed-off-by: Christoffer Dall
Signed-off-by: Greg Kroah-Hartman
commit e587b76e655441b7f3239dfb999c444c8573820c
Author: Al Viro
Date: Tue Dec 5 23:27:57 2017 +0000
fix kcm\_clone()
commit a5739435b5a3b8c449f8844ecd71a3b1e89f0a33 upstream.
1) it's fput() or sock\_release(), not both
2) don't do fd\_install() until the last failure exit.
3) not a bug per se, but... don't attach socket to struct file
until it's set up.
Take reserving descriptor into the caller, move fd\_install() to the
caller, sanitize failure exits and calling conventions.
Acked-by: Tom Herbert
Signed-off-by: Al Viro
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fc2f802193ccecf710ab608712b5b102dd9efc75
Author: Jeff Layton
Date: Tue Nov 14 14:42:57 2017 -0500
fcntl: don't cap l\_start and l\_end values for F\_GETLK64 in compat syscall
commit 4d2dc2cc766c3b51929658cacbc6e34fc8e242fb upstream.
Currently, we're capping the values too low in the F\_GETLK64 case. The
fields in that structure are 64-bit values, so we shouldn't need to do
any sort of fixup there.
Make sure we check that assumption at build time in the future however
by ensuring that the sizes we're copying will fit.
With this, we no longer need COMPAT\_LOFF\_T\_MAX either, so remove it.
Fixes: 94073ad77fff2 (fs/locks: don't mess with the address limit in compat\_fcntl64)
Reported-by: Vitaly Lipatov
Signed-off-by: Jeff Layton
Reviewed-by: David Howells
Signed-off-by: Greg Kroah-Hartman
commit 4b57542126669a5ad8bede61c8e9e07a5fc4a39b
Author: Vincent Pelletier
Date: Sun Nov 26 06:52:53 2017 +0000
usb: gadget: ffs: Forbid usb\_ep\_alloc\_request from sleeping
commit 30bf90ccdec1da9c8198b161ecbff39ce4e5a9ba upstream.
Found using DEBUG\_ATOMIC\_SLEEP while submitting an AIO read operation:
[ 100.853642] BUG: sleeping function called from invalid context at mm/slab.h:421
[ 100.861148] in\_atomic(): 1, irqs\_disabled(): 1, pid: 1880, name: python
[ 100.867954] 2 locks held by python/1880:
[ 100.867961] #0: (&epfile->mutex){....}, at: [] ffs\_mutex\_lock+0x27/0x30 [usb\_f\_fs]
[ 100.868020] #1: (&(&ffs->eps\_lock)->rlock){....}, at: [] ffs\_epfile\_io.isra.17+0x24b/0x590 [usb\_f\_fs]
[ 100.868076] CPU: 1 PID: 1880 Comm: python Not tainted 4.14.0-edison+ #118
[ 100.868085] Hardware name: Intel Corporation Merrifield/BODEGA BAY, BIOS 542 2015.01.21:18.19.48
[ 100.868093] Call Trace:
[ 100.868122] dump\_stack+0x47/0x62
[ 100.868156] \_\_\_might\_sleep+0xfd/0x110
[ 100.868182] \_\_might\_sleep+0x68/0x70
[ 100.868217] kmem\_cache\_alloc\_trace+0x4b/0x200
[ 100.868248] ? dwc3\_gadget\_ep\_alloc\_request+0x24/0xe0 [dwc3]
[ 100.868302] dwc3\_gadget\_ep\_alloc\_request+0x24/0xe0 [dwc3]
[ 100.868343] usb\_ep\_alloc\_request+0x16/0xc0 [udc\_core]
[ 100.868386] ffs\_epfile\_io.isra.17+0x444/0x590 [usb\_f\_fs]
[ 100.868424] ? \_raw\_spin\_unlock\_irqrestore+0x27/0x40
[ 100.868457] ? kiocb\_set\_cancel\_fn+0x57/0x60
[ 100.868477] ? ffs\_ep0\_poll+0xc0/0xc0 [usb\_f\_fs]
[ 100.868512] ffs\_epfile\_read\_iter+0xfe/0x157 [usb\_f\_fs]
[ 100.868551] ? security\_file\_permission+0x9c/0xd0
[ 100.868587] ? rw\_verify\_area+0xac/0x120
[ 100.868633] aio\_read+0x9d/0x100
[ 100.868692] ? \_\_fget+0xa2/0xd0
[ 100.868727] ? \_\_might\_sleep+0x68/0x70
[ 100.868763] SyS\_io\_submit+0x471/0x680
[ 100.868878] do\_int80\_syscall\_32+0x4e/0xd0
[ 100.868921] entry\_INT80\_32+0x2a/0x2a
[ 100.868932] EIP: 0xb7fbb676
[ 100.868941] EFLAGS: 00000292 CPU: 1
[ 100.868951] EAX: ffffffda EBX: b7aa2000 ECX: 00000002 EDX: b7af8368
[ 100.868961] ESI: b7fbb660 EDI: b7aab000 EBP: bfb6c658 ESP: bfb6c638
[ 100.868973] DS: 007b ES: 007b FS: 0000 GS: 0033 SS: 007b
Signed-off-by: Vincent Pelletier
Signed-off-by: Felipe Balbi
Signed-off-by: Greg Kroah-Hartman
commit 7a33cd0ef9dda4692cb15fb37eb2e5ab0ef19609
Author: Masamitsu Yamazaki
Date: Wed Nov 15 07:33:14 2017 +0000
ipmi: Stop timers before cleaning up the module
commit 4f7f5551a760eb0124267be65763008169db7087 upstream.
System may crash after unloading ipmi\_si.ko module
because a timer may remain and fire after the module cleaned up resources.
cleanup\_one\_si() contains the following processing.
/\*
\* Make sure that interrupts, the timer and the thread are
\* stopped and will not run again.
\*/
if (to\_clean->irq\_cleanup)
to\_clean->irq\_cleanup(to\_clean);
wait\_for\_timer\_and\_thread(to\_clean);
/\*
\* Timeouts are stopped, now make sure the interrupts are off
\* in the BMC. Note that timers and CPU interrupts are off,
\* so no need for locks.
\*/
while (to\_clean->curr\_msg || (to\_clean->si\_state != SI\_NORMAL)) {
poll(to\_clean);
schedule\_timeout\_uninterruptible(1);
}
si\_state changes as following in the while loop calling poll(to\_clean).
SI\_GETTING\_MESSAGES
=> SI\_CHECKING\_ENABLES
=> SI\_SETTING\_ENABLES
=> SI\_GETTING\_EVENTS
=> SI\_NORMAL
As written in the code comments above,
timers are expected to stop before the polling loop and not to run again.
But the timer is set again in the following process
when si\_state becomes SI\_SETTING\_ENABLES.
=> poll
=> smi\_event\_handler
=> handle\_transaction\_done
// smi\_info->si\_state == SI\_SETTING\_ENABLES
=> start\_getting\_events
=> start\_new\_msg
=> smi\_mod\_timer
=> mod\_timer
As a result, before the timer set in start\_new\_msg() expires,
the polling loop may see si\_state becoming SI\_NORMAL
and the module clean-up finishes.
For example, hard LOCKUP and panic occurred as following.
smi\_timeout was called after smi\_event\_handler,
kcs\_event and hangs at port\_inb()
trying to access I/O port after release.
[exception RIP: port\_inb+19]
RIP: ffffffffc0473053 RSP: ffff88069fdc3d80 RFLAGS: 00000006
RAX: ffff8806800f8e00 RBX: ffff880682bd9400 RCX: 0000000000000000
RDX: 0000000000000ca3 RSI: 0000000000000ca3 RDI: ffff8806800f8e40
RBP: ffff88069fdc3d80 R8: ffffffff81d86dfc R9: ffffffff81e36426
R10: 00000000000509f0 R11: 0000000000100000 R12: 0000000000]:000000
R13: 0000000000000000 R14: 0000000000000246 R15: ffff8806800f8e00
ORIG\_RAX: ffffffffffffffff CS: 0010 SS: 0000
---  ---
To fix the problem I defined a flag, timer\_can\_start,
as member of struct smi\_info.
The flag is enabled immediately after initializing the timer
and disabled immediately before waiting for timer deletion.
Fixes: 0cfec916e86d ("ipmi: Start the timer and thread on internal msgs")
Signed-off-by: Yamazaki Masamitsu
[Some fairly major changes went into the IPMI driver in 4.15, so this
required a backport as the code had changed and moved to a different
file.]
Signed-off-by: Corey Minyard
Signed-off-by: Greg Kroah-Hartman
commit 0c882334e2b778c95858d38f2180819d887fa5c3
Author: Xin Long
Date: Sun Nov 26 20:56:07 2017 +0800
sctp: use right member as the param of list\_for\_each\_entry
[ Upstream commit a8dd397903a6e57157f6265911f7d35681364427 ]
Commit d04adf1b3551 ("sctp: reset owner sk for data chunks on out queues
when migrating a sock") made a mistake that using 'list' as the param of
list\_for\_each\_entry to traverse the retransmit, sacked and abandoned
queues, while chunks are using 'transmitted\_list' to link into these
queues.
It could cause NULL dereference panic if there are chunks in any of these
queues when peeling off one asoc.
So use the chunk member 'transmitted\_list' instead in this patch.
Fixes: d04adf1b3551 ("sctp: reset owner sk for data chunks on out queues when migrating a sock")
Signed-off-by: Xin Long
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 627a5956119fd58bd4b94a26437d449830fc4736
Author: Jakub Kicinski
Date: Mon Nov 27 11:11:41 2017 -0800
cls\_bpf: don't decrement net's refcount when offload fails
[ Upstream commit 25415cec502a1232b19fffc85465882b19a90415 ]
When cls\_bpf offload was added it seemed like a good idea to
call cls\_bpf\_delete\_prog() instead of extending the error
handling path, since the software state is fully initialized
at that point. This handling of errors without jumping to
the end of the function is error prone, as proven by later
commit missing that extra call to \_\_cls\_bpf\_delete\_prog().
\_\_cls\_bpf\_delete\_prog() is now expected to be invoked with
a reference on exts->net or the field zeroed out. The call
on the offload's error patch does not fullfil this requirement,
leading to each error stealing a reference on net namespace.
Create a function undoing what cls\_bpf\_set\_parms() did and
use it from \_\_cls\_bpf\_delete\_prog() and the error path.
Fixes: aae2c35ec892 ("cls\_bpf: use tcf\_exts\_get\_net() before call\_rcu()")
Signed-off-by: Jakub Kicinski
Reviewed-by: Simon Horman
Acked-by: Daniel Borkmann
Acked-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 87ff3fb30de11a64d25a4a22f23def1ce77cf840
Author: Gustavo A. R. Silva
Date: Sat Nov 25 13:14:40 2017 -0600
net: openvswitch: datapath: fix data type in queue\_gso\_packets
[ Upstream commit 2734166e89639c973c6e125ac8bcfc2d9db72b70 ]
gso\_type is being used in binary AND operations together with SKB\_GSO\_UDP.
The issue is that variable gso\_type is of type unsigned short and
SKB\_GSO\_UDP expands to more than 16 bits:
SKB\_GSO\_UDP = 1 << 16
this makes any binary AND operation between gso\_type and SKB\_GSO\_UDP to
be always zero, hence making some code unreachable and likely causing
undesired behavior.
Fix this by changing the data type of variable gso\_type to unsigned int.
Addresses-Coverity-ID: 1462223
Fixes: 0c19f846d582 ("net: accept UFO datagrams from tuntap and packet")
Signed-off-by: Gustavo A. R. Silva
Acked-by: Willem de Bruijn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 60335608e2f1ad6e55acaa4f13bd0f3bcd156dbd
Author: Willem de Bruijn
Date: Tue Nov 21 10:22:25 2017 -0500
net: accept UFO datagrams from tuntap and packet
[ Upstream commit 0c19f846d582af919db66a5914a0189f9f92c936 ]
Tuntap and similar devices can inject GSO packets. Accept type
VIRTIO\_NET\_HDR\_GSO\_UDP, even though not generating UFO natively.
Processes are expected to use feature negotiation such as TUNSETOFFLOAD
to detect supported offload types and refrain from injecting other
packets. This process breaks down with live migration: guest kernels
do not renegotiate flags, so destination hosts need to expose all
features that the source host does.
Partially revert the UFO removal from 182e0b6b5846~1..d9d30adf5677.
This patch introduces nearly(\*) no new code to simplify verification.
It brings back verbatim tuntap UFO negotiation, VIRTIO\_NET\_HDR\_GSO\_UDP
insertion and software UFO segmentation.
It does not reinstate protocol stack support, hardware offload
(NETIF\_F\_UFO), SKB\_GSO\_UDP tunneling in SKB\_GSO\_SOFTWARE or reception
of VIRTIO\_NET\_HDR\_GSO\_UDP packets in tuntap.
To support SKB\_GSO\_UDP reappearing in the stack, also reinstate
logic in act\_csum and openvswitch. Achieve equivalence with v4.13 HEAD
by squashing in commit 939912216fa8 ("net: skb\_needs\_check() removes
CHECKSUM\_UNNECESSARY check for tx.") and reverting commit 8d63bee643f1
("net: avoid skb\_warn\_bad\_offload false positives on UFO").
(\*) To avoid having to bring back skb\_shinfo(skb)->ip6\_frag\_id,
ipv6\_proxy\_select\_ident is changed to return a \_\_be32 and this is
assigned directly to the frag\_hdr. Also, SKB\_GSO\_UDP is inserted
at the end of the enum to minimize code churn.
Tested
Booted a v4.13 guest kernel with QEMU. On a host kernel before this
patch `ethtool -k eth0` shows UFO disabled. After the patch, it is
enabled, same as on a v4.13 host kernel.
A UFO packet sent from the guest appears on the tap device:
host:
nc -l -p -u 8000 &
tcpdump -n -i tap0
guest:
dd if=/dev/zero of=payload.txt bs=1 count=2000
nc -u 192.16.1.1 8000 < payload.txt
Direct tap to tap transmission of VIRTIO\_NET\_HDR\_GSO\_UDP succeeds,
packets arriving fragmented:
./with\_tap\_pair.sh ./tap\_send\_ufo tap0 tap1
(from https://github.com/wdebruij/kerneltools/tree/master/tests)
Changes
v1 -> v2
- simplified set\_offload change (review comment)
- documented test procedure
Link: http://lkml.kernel.org/r/
Fixes: fb652fdfe837 ("macvlan/macvtap: Remove NETIF\_F\_UFO advertisement.")
Reported-by: Michal Kubecek
Signed-off-by: Willem de Bruijn
Acked-by: Jason Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 29d631e5941366ee5eb50b3b592ca99186115a63
Author: Xin Long
Date: Sun Nov 19 19:31:04 2017 +0800
tun: fix rcu\_read\_lock imbalance in tun\_build\_skb
[ Upstream commit 654d573845f35017dc397840fa03610fef3d08b0 ]
rcu\_read\_lock in tun\_build\_skb is used to rcu\_dereference tun->xdp\_prog
safely, rcu\_read\_unlock should be done in every return path.
Now I could see one place missing it, where it returns NULL in switch-case
XDP\_REDIRECT, another palce using rcu\_read\_lock wrongly, where it returns
NULL in if (xdp\_xmit) chunk.
So fix both in this patch.
Fixes: 761876c857cb ("tap: XDP support")
Signed-off-by: Xin Long
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7afe2e668ee2b1f465dcccb942da9d8f8d873f20
Author: David Ahern
Date: Tue Nov 21 07:08:57 2017 -0800
net: ipv6: Fixup device for anycast routes during copy
[ Upstream commit 98d11291d189cb5adf49694d0ad1b971c0212697 ]
Florian reported a breakage with anycast routes due to commit
4832c30d5458 ("net: ipv6: put host and anycast routes on device with
address"). Prior to this commit anycast routes were added against the
loopback device causing repetitive route entries with no insight into
why they existed. e.g.:
$ ip -6 ro ls table local type anycast
anycast 2001:db8:1:: dev lo proto kernel metric 0 pref medium
anycast 2001:db8:2:: dev lo proto kernel metric 0 pref medium
anycast fe80:: dev lo proto kernel metric 0 pref medium
anycast fe80:: dev lo proto kernel metric 0 pref medium
The point of commit 4832c30d5458 is to add the routes using the device
with the address which is causing the route to be added. e.g.,:
$ ip -6 ro ls table local type anycast
anycast 2001:db8:1:: dev eth1 proto kernel metric 0 pref medium
anycast 2001:db8:2:: dev eth2 proto kernel metric 0 pref medium
anycast fe80:: dev eth2 proto kernel metric 0 pref medium
anycast fe80:: dev eth1 proto kernel metric 0 pref medium
For traffic to work as it did before, the dst device needs to be switched
to the loopback when the copy is created similar to local routes.
Fixes: 4832c30d5458 ("net: ipv6: put host and anycast routes on device with address")
Signed-off-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0536add671963d9875dc42f734d1608bef480dc7
Author: Wei Xu
Date: Fri Dec 1 05:10:37 2017 -0500
tun: free skb in early errors
[ Upstream commit c33ee15b3820a03cf8229ba9415084197b827f8c ]
tun\_recvmsg() supports accepting skb by msg\_control after
commit ac77cfd4258f ("tun: support receiving skb through msg\_control"),
the skb if presented should be freed no matter how far it can go
along, otherwise it would be leaked.
This patch fixes several missed cases.
Signed-off-by: Wei Xu
Reported-by: Matthew Rosato
Acked-by: Michael S. Tsirkin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 241eb29c019a0b4e2a3ff5ca4b4449374aeb5f87
Author: Neal Cardwell
Date: Fri Nov 17 21:06:14 2017 -0500
tcp: when scheduling TLP, time of RTO should account for current ACK
[ Upstream commit ed66dfaf236c04d414de1d218441296e57fb2bd2 ]
Fix the TLP scheduling logic so that when scheduling a TLP probe, we
ensure that the estimated time at which an RTO would fire accounts for
the fact that ACKs indicating forward progress should push back RTO
times.
After the following fix:
df92c8394e6e ("tcp: fix xmit timer to only be reset if data ACKed/SACKed")
we had an unintentional behavior change in the following kind of
scenario: suppose the RTT variance has been very low recently. Then
suppose we send out a flight of N packets and our RTT is 100ms:
t=0: send a flight of N packets
t=100ms: receive an ACK for N-1 packets
The response before df92c8394e6e that was:
-> schedule a TLP for now + RTO\_interval
The response after df92c8394e6e is:
-> schedule a TLP for t=0 + RTO\_interval
Since RTO\_interval = srtt + RTT\_variance, this means that we have
scheduled a TLP timer at a point in the future that only accounts for
RTT\_variance. If the RTT\_variance term is small, this means that the
timer fires soon.
Before df92c8394e6e this would not happen, because in that code, when
we receive an ACK for a prefix of flight, we did:
1) Near the top of tcp\_ack(), switch from TLP timer to RTO
at write\_queue\_head->paket\_tx\_time + RTO\_interval:
if (icsk->icsk\_pending == ICSK\_TIME\_LOSS\_PROBE)
tcp\_rearm\_rto(sk);
2) In tcp\_clean\_rtx\_queue(), update the RTO to now + RTO\_interval:
if (flag & FLAG\_ACKED) {
tcp\_rearm\_rto(sk);
3) In tcp\_ack() after tcp\_fastretrans\_alert() switch from RTO
to TLP at now + RTO\_interval:
if (icsk->icsk\_pending == ICSK\_TIME\_RETRANS)
tcp\_schedule\_loss\_probe(sk);
In df92c8394e6e we removed that 3-phase dance, and instead directly
set the TLP timer once: we set the TLP timer in cases like this to
write\_queue\_head->packet\_tx\_time + RTO\_interval. So if the RTT
variance is small, then this means that this is setting the TLP timer
to fire quite soon. This means if the ACK for the tail of the flight
takes longer than an RTT to arrive (often due to delayed ACKs), then
the TLP timer fires too quickly.
Fixes: df92c8394e6e ("tcp: fix xmit timer to only be reset if data ACKed/SACKed")
Signed-off-by: Neal Cardwell
Signed-off-by: Yuchung Cheng
Signed-off-by: Eric Dumazet
Acked-by: Soheil Hassas Yeganeh
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 616bada6fd46b77351a4033392035de7875c48b6
Author: Wei Xu
Date: Fri Dec 1 05:10:38 2017 -0500
tap: free skb if flags error
[ Upstream commit 61d78537843e676e7f56ac6db333db0c0529b892 ]
tap\_recvmsg() supports accepting skb by msg\_control after
commit 3b4ba04acca8 ("tap: support receiving skb from msg\_control"),
the skb if presented should be freed within the function, otherwise
it would be leaked.
Signed-off-by: Wei Xu
Reported-by: Matthew Rosato
Acked-by: Michael S. Tsirkin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8067098c04be5a9058128164e9779e4c2e7c6dc1
Author: Jiri Pirko
Date: Mon Nov 27 18:37:21 2017 +0100
net: sched: cbq: create block for q->link.block
[ Upstream commit d51aae68b142f48232257e96ce317db25445418d ]
q->link.block is not initialized, that leads to EINVAL when one tries to
add filter there. So initialize it properly.
This can be reproduced by:
$ tc qdisc add dev eth0 root handle 1: cbq avpkt 1000 rate 1000Mbit bandwidth 1000Mbit
$ tc filter add dev eth0 parent 1: protocol ip prio 100 u32 match ip protocol 0 0x00 flowid 1:1
Reported-by: Jaroslav Aster
Reported-by: Ivan Vecera
Fixes: 6529eaba33f0 ("net: sched: introduce tcf block infractructure")
Signed-off-by: Jiri Pirko
Acked-by: Eelco Chaudron
Reviewed-by: Ivan Vecera
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 91c5e6553af065f30390a76bf0556672d6cbb6ab
Author: Eric Dumazet
Date: Wed Dec 6 11:08:19 2017 -0800
tcp: use current time in tcp\_rcv\_space\_adjust()
[ Upstream commit 8632385022f2b05a6ca0b9e0f95575865de0e2ce ]
When I switched rcv\_rtt\_est to high resolution timestamps, I forgot
that tp->tcp\_mstamp needed to be refreshed in tcp\_rcv\_space\_adjust()
Using an old timestamp leads to autotuning lags.
Fixes: 645f4c6f2ebd ("tcp: switch rcv\_rtt\_est and rcvq\_space to high resolution timestamps")
Signed-off-by: Eric Dumazet
Cc: Wei Wang
Cc: Neal Cardwell
Cc: Yuchung Cheng
Acked-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit de514e0609ea1fcf1f70faf427ec9b693d007f8b
Author: Tommi Rantala
Date: Wed Nov 29 12:48:42 2017 +0200
tipc: call tipc\_rcv() only if bearer is up in tipc\_udp\_recv()
[ Upstream commit c7799c067c2ae33e348508c8afec354f3257ff25 ]
Remove the second tipc\_rcv() call in tipc\_udp\_recv(). We have just
checked that the bearer is not up, and calling tipc\_rcv() with a bearer
that is not up leads to a TIPC div-by-zero crash in
tipc\_node\_calculate\_timer(). The crash is rare in practice, but can
happen like this:
We're enabling a bearer, but it's not yet up and fully initialized.
At the same time we receive a discovery packet, and in tipc\_udp\_recv()
we end up calling tipc\_rcv() with the not-yet-initialized bearer,
causing later the div-by-zero crash in tipc\_node\_calculate\_timer().
Jon Maloy explains the impact of removing the second tipc\_rcv() call:
"link setup in the worst case will be delayed until the next arriving
discovery messages, 1 sec later, and this is an acceptable delay."
As the tipc\_rcv() call is removed, just leave the function via the
rcu\_out label, so that we will kfree\_skb().
[ 12.590450] Own node address <1.1.1>, network identity 1
[ 12.668088] divide error: 0000 [#1] SMP
[ 12.676952] CPU: 2 PID: 0 Comm: swapper/2 Not tainted 4.14.2-dirty #1
[ 12.679225] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.10.2-2.fc27 04/01/2014
[ 12.682095] task: ffff8c2a761edb80 task.stack: ffffa41cc0cac000
[ 12.684087] RIP: 0010:tipc\_node\_calculate\_timer.isra.12+0x45/0x60 [tipc]
[ 12.686486] RSP: 0018:ffff8c2a7fc838a0 EFLAGS: 00010246
[ 12.688451] RAX: 0000000000000000 RBX: ffff8c2a5b382600 RCX: 0000000000000000
[ 12.691197] RDX: 0000000000000000 RSI: ffff8c2a5b382600 RDI: ffff8c2a5b382600
[ 12.693945] RBP: ffff8c2a7fc838b0 R08: 0000000000000001 R09: 0000000000000001
[ 12.696632] R10: 0000000000000000 R11: 0000000000000000 R12: ffff8c2a5d8949d8
[ 12.699491] R13: ffffffff95ede400 R14: 0000000000000000 R15: ffff8c2a5d894800
[ 12.702338] FS: 0000000000000000(0000) GS:ffff8c2a7fc80000(0000) knlGS:0000000000000000
[ 12.705099] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 12.706776] CR2: 0000000001bb9440 CR3: 00000000bd009001 CR4: 00000000003606e0
[ 12.708847] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 12.711016] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 12.712627] Call Trace:
[ 12.713390]
[ 12.714011] tipc\_node\_check\_dest+0x2e8/0x350 [tipc]
[ 12.715286] tipc\_disc\_rcv+0x14d/0x1d0 [tipc]
[ 12.716370] tipc\_rcv+0x8b0/0xd40 [tipc]
[ 12.717396] ? minmax\_running\_min+0x2f/0x60
[ 12.718248] ? dst\_alloc+0x4c/0xa0
[ 12.718964] ? tcp\_ack+0xaf1/0x10b0
[ 12.719658] ? tipc\_udp\_is\_known\_peer+0xa0/0xa0 [tipc]
[ 12.720634] tipc\_udp\_recv+0x71/0x1d0 [tipc]
[ 12.721459] ? dst\_alloc+0x4c/0xa0
[ 12.722130] udp\_queue\_rcv\_skb+0x264/0x490
[ 12.722924] \_\_udp4\_lib\_rcv+0x21e/0x990
[ 12.723670] ? ip\_route\_input\_rcu+0x2dd/0xbf0
[ 12.724442] ? tcp\_v4\_rcv+0x958/0xa40
[ 12.725039] udp\_rcv+0x1a/0x20
[ 12.725587] ip\_local\_deliver\_finish+0x97/0x1d0
[ 12.726323] ip\_local\_deliver+0xaf/0xc0
[ 12.726959] ? ip\_route\_input\_noref+0x19/0x20
[ 12.727689] ip\_rcv\_finish+0xdd/0x3b0
[ 12.728307] ip\_rcv+0x2ac/0x360
[ 12.728839] \_\_netif\_receive\_skb\_core+0x6fb/0xa90
[ 12.729580] ? udp4\_gro\_receive+0x1a7/0x2c0
[ 12.730274] \_\_netif\_receive\_skb+0x1d/0x60
[ 12.730953] ? \_\_netif\_receive\_skb+0x1d/0x60
[ 12.731637] netif\_receive\_skb\_internal+0x37/0xd0
[ 12.732371] napi\_gro\_receive+0xc7/0xf0
[ 12.732920] receive\_buf+0x3c3/0xd40
[ 12.733441] virtnet\_poll+0xb1/0x250
[ 12.733944] net\_rx\_action+0x23e/0x370
[ 12.734476] \_\_do\_softirq+0xc5/0x2f8
[ 12.734922] irq\_exit+0xfa/0x100
[ 12.735315] do\_IRQ+0x4f/0xd0
[ 12.735680] common\_interrupt+0xa2/0xa2
[ 12.736126]
[ 12.736416] RIP: 0010:native\_safe\_halt+0x6/0x10
[ 12.736925] RSP: 0018:ffffa41cc0cafe90 EFLAGS: 00000246 ORIG\_RAX: ffffffffffffff4d
[ 12.737756] RAX: 0000000000000000 RBX: ffff8c2a761edb80 RCX: 0000000000000000
[ 12.738504] RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000000
[ 12.739258] RBP: ffffa41cc0cafe90 R08: 0000014b5b9795e5 R09: ffffa41cc12c7e88
[ 12.740118] R10: 0000000000000000 R11: 0000000000000000 R12: 0000000000000002
[ 12.740964] R13: ffff8c2a761edb80 R14: 0000000000000000 R15: 0000000000000000
[ 12.741831] default\_idle+0x2a/0x100
[ 12.742323] arch\_cpu\_idle+0xf/0x20
[ 12.742796] default\_idle\_call+0x28/0x40
[ 12.743312] do\_idle+0x179/0x1f0
[ 12.743761] cpu\_startup\_entry+0x1d/0x20
[ 12.744291] start\_secondary+0x112/0x120
[ 12.744816] secondary\_startup\_64+0xa5/0xa5
[ 12.745367] Code: b9 f4 01 00 00 48 89 c2 48 c1 ea 02 48 3d d3 07 00
00 48 0f 47 d1 49 8b 0c 24 48 39 d1 76 07 49 89 14 24 48 89 d1 31 d2 48
89 df <48> f7 f1 89 c6 e8 81 6e ff ff 5b 41 5c 5d c3 66 90 66 2e 0f 1f
[ 12.747527] RIP: tipc\_node\_calculate\_timer.isra.12+0x45/0x60 [tipc] RSP: ffff8c2a7fc838a0
[ 12.748555] ---[ end trace 1399ab83390650fd ]---
[ 12.749296] Kernel panic - not syncing: Fatal exception in interrupt
[ 12.750123] Kernel Offset: 0x13200000 from 0xffffffff82000000
(relocation range: 0xffffffff80000000-0xffffffffbfffffff)
[ 12.751215] Rebooting in 60 seconds..
Fixes: c9b64d492b1f ("tipc: add replicast peer discovery")
Signed-off-by: Tommi Rantala
Cc: Jon Maloy
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit efb7dc5a9658de725de8d0b2016dbe198406d93e
Author: David Ahern
Date: Sun Dec 3 09:33:00 2017 -0800
tcp: use IPCB instead of TCP\_SKB\_CB in inet\_exact\_dif\_match()
[ Usptream commit b4d1605a8ea608fd7dc45b926a05d75d340bde4b ]
After this fix : ("tcp: add tcp\_v4\_fill\_cb()/tcp\_v4\_restore\_cb()"),
socket lookups happen while skb->cb[] has not been mangled yet by TCP.
Fixes: a04a480d4392 ("net: Require exact match for TCP socket lookups if dif is l3mdev")
Signed-off-by: David Ahern
Signed-off-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit effea096caa1732d2eff941c1beabc9c496b087e
Author: Julian Wiedmann
Date: Fri Dec 1 10:14:50 2017 +0100
s390/qeth: fix GSO throughput regression
[ Upstream commit 6d69b1f1eb7a2edf8a3547f361c61f2538e054bb ]
Using GSO with small MTUs currently results in a substantial throughput
regression - which is caused by how qeth needs to map non-linear skbs
into its IO buffer elements:
compared to a linear skb, each GSO-segmented skb effectively consumes
twice as many buffer elements (ie two instead of one) due to the
additional header-only part. This causes the Output Queue to be
congested with low-utilized IO buffers.
Fix this as follows:
If the MSS is low enough so that a non-SG GSO segmentation produces
order-0 skbs (currently ~3500 byte), opt out from NETIF\_F\_SG. This is
where we anticipate the biggest savings, since an SG-enabled
GSO segmentation produces skbs that always consume at least two
buffer elements.
Larger MSS values continue to get a SG-enabled GSO segmentation, since
1) the relative overhead of the additional header-only buffer element
becomes less noticeable, and
2) the linearization overhead increases.
With the throughput regression fixed, re-enable NETIF\_F\_SG by default to
reap the significant CPU savings of GSO.
Fixes: 5722963a8e83 ("qeth: do not turn on SG per default")
Reported-by: Nils Hoppmann
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 79651202a2228b53973e73da1f6b676579df951e
Author: Julian Wiedmann
Date: Fri Dec 1 10:14:49 2017 +0100
s390/qeth: fix thinko in IPv4 multicast address tracking
[ Upsteam commit bc3ab70584696cb798b9e1e0ac8e6ced5fd4c3b8 ]
Commit 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
reworked how secondary addresses are managed for qeth devices.
Instead of dropping & subsequently re-adding all addresses on every
ndo\_set\_rx\_mode() call, qeth now keeps track of the addresses that are
currently registered with the HW.
On a ndo\_set\_rx\_mode(), we thus only need to do (de-)registration
requests for the addresses that have actually changed.
On L3 devices, the lookup for IPv4 Multicast addresses checks the wrong
hashtable - and thus never finds a match. As a result, we first delete
\*all\* such addresses, and then re-add them again. So each set\_rx\_mode()
causes a short period where the IPv4 Multicast addresses are not
registered, and the card stops forwarding inbound traffic for them.
Fix this by setting the ->is\_multicast flag on the lookup object, thus
enabling qeth\_l3\_ip\_from\_hash() to search the correct hashtable and
find a match there.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit cfa19a2edf31f8c4d90d6e936a65ba2072d67bb9
Author: Julian Wiedmann
Date: Fri Dec 1 10:14:51 2017 +0100
s390/qeth: build max size GSO skbs on L2 devices
[ Upstream commit 0cbff6d4546613330a1c5f139f5c368e4ce33ca1 ]
The current GSO skb size limit was copy&pasted over from the L3 path,
where it is needed due to a TSO limitation.
As L2 devices don't offer TSO support (and thus all GSO skbs are
segmented before they reach the driver), there's no reason to restrict
the stack in how large it may build the GSO skbs.
Fixes: d52aec97e5bc ("qeth: enable scatter/gather in layer 2 mode")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5fa411e8555fd3e1f7fc77290b7bd9977203fa52
Author: Eric Dumazet
Date: Fri Dec 1 10:06:56 2017 -0800
tcp/dccp: block bh before arming time\_wait timer
[ Upstream commit cfac7f836a715b91f08c851df915d401a4d52783 ]
Maciej Żenczykowski reported some panics in tcp\_twsk\_destructor()
that might be caused by the following bug.
timewait timer is pinned to the cpu, because we want to transition
timwewait refcount from 0 to 4 in one go, once everything has been
initialized.
At the time commit ed2e92394589 ("tcp/dccp: fix timewait races in timer
handling") was merged, TCP was always running from BH habdler.
After commit 5413d1babe8f ("net: do not block BH while processing
socket backlog") we definitely can run tcp\_time\_wait() from process
context.
We need to block BH in the critical section so that the pinned timer
has still its purpose.
This bug is more likely to happen under stress and when very small RTO
are used in datacenter flows.
Fixes: 5413d1babe8f ("net: do not block BH while processing socket backlog")
Signed-off-by: Eric Dumazet
Reported-by: Maciej Żenczykowski
Acked-by: Maciej Żenczykowski
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8b01623c73946edf7946945400305dbc5f1c85a6
Author: Lars Persson
Date: Fri Dec 1 11:12:44 2017 +0100
stmmac: reset last TSO segment size after device open
[ Upstream commit 45ab4b13e46325d00f4acdb365d406e941a15f81 ]
The mss variable tracks the last max segment size sent to the TSO
engine. We do not update the hardware as long as we receive skb:s with
the same value in gso\_size.
During a network device down/up cycle (mapped to stmmac\_release() and
stmmac\_open() callbacks) we issue a reset to the hardware and it
forgets the setting for mss. However we did not zero out our mss
variable so the next transmission of a gso packet happens with an
undefined hardware setting.
This triggers a hang in the TSO engine and eventuelly the netdev
watchdog will bark.
Fixes: f748be531d70 ("stmmac: support new GMAC4")
Signed-off-by: Lars Persson
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6878a06356a36d69b18916d2f0c483f21e0885d5
Author: Eric Dumazet
Date: Tue Dec 5 12:45:56 2017 -0800
net: remove hlist\_nulls\_add\_tail\_rcu()
[ Upstream commit d7efc6c11b277d9d80b99b1334a78bfe7d7edf10 ]
Alexander Potapenko reported use of uninitialized memory [1]
This happens when inserting a request socket into TCP ehash,
in \_\_sk\_nulls\_add\_node\_rcu(), since sk\_reuseport is not initialized.
Bug was added by commit d894ba18d4e4 ("soreuseport: fix ordering for
mixed v4/v6 sockets")
Note that d296ba60d8e2 ("soreuseport: Resolve merge conflict for v4/v6
ordering fix") missed the opportunity to get rid of
hlist\_nulls\_add\_tail\_rcu() :
Both UDP sockets and TCP/DCCP listeners no longer use
\_\_sk\_nulls\_add\_node\_rcu() for their hash insertion.
Since all other sockets have unique 4-tuple, the reuseport status
has no special meaning, so we can always use hlist\_nulls\_add\_head\_rcu()
for them and save few cycles/instructions.
[1]
==================================================================
BUG: KMSAN: use of uninitialized memory in inet\_ehash\_insert+0xd40/0x1050
CPU: 0 PID: 0 Comm: swapper/0 Not tainted 4.13.0+ #3288
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
Call Trace:

 \_\_dump\_stack lib/dump\_stack.c:16
 dump\_stack+0x185/0x1d0 lib/dump\_stack.c:52
 kmsan\_report+0x13f/0x1c0 mm/kmsan/kmsan.c:1016
 \_\_msan\_warning\_32+0x69/0xb0 mm/kmsan/kmsan\_instr.c:766
 \_\_sk\_nulls\_add\_node\_rcu ./include/net/sock.h:684
 inet\_ehash\_insert+0xd40/0x1050 net/ipv4/inet\_hashtables.c:413
 reqsk\_queue\_hash\_req net/ipv4/inet\_connection\_sock.c:754
 inet\_csk\_reqsk\_queue\_hash\_add+0x1cc/0x300 net/ipv4/inet\_connection\_sock.c:765
 tcp\_conn\_request+0x31e7/0x36f0 net/ipv4/tcp\_input.c:6414
 tcp\_v4\_conn\_request+0x16d/0x220 net/ipv4/tcp\_ipv4.c:1314
 tcp\_rcv\_state\_process+0x42a/0x7210 net/ipv4/tcp\_input.c:5917
 tcp\_v4\_do\_rcv+0xa6a/0xcd0 net/ipv4/tcp\_ipv4.c:1483
 tcp\_v4\_rcv+0x3de0/0x4ab0 net/ipv4/tcp\_ipv4.c:1763
 ip\_local\_deliver\_finish+0x6bb/0xcb0 net/ipv4/ip\_input.c:216
 NF\_HOOK ./include/linux/netfilter.h:248
 ip\_local\_deliver+0x3fa/0x480 net/ipv4/ip\_input.c:257
 dst\_input ./include/net/dst.h:477
 ip\_rcv\_finish+0x6fb/0x1540 net/ipv4/ip\_input.c:397
 NF\_HOOK ./include/linux/netfilter.h:248
 ip\_rcv+0x10f6/0x15c0 net/ipv4/ip\_input.c:488
 \_\_netif\_receive\_skb\_core+0x36f6/0x3f60 net/core/dev.c:4298
 \_\_netif\_receive\_skb net/core/dev.c:4336
 netif\_receive\_skb\_internal+0x63c/0x19c0 net/core/dev.c:4497
 napi\_skb\_finish net/core/dev.c:4858
 napi\_gro\_receive+0x629/0xa50 net/core/dev.c:4889
 e1000\_receive\_skb drivers/net/ethernet/intel/e1000/e1000\_main.c:4018
 e1000\_clean\_rx\_irq+0x1492/0x1d30
drivers/net/ethernet/intel/e1000/e1000\_main.c:4474
 e1000\_clean+0x43aa/0x5970 drivers/net/ethernet/intel/e1000/e1000\_main.c:3819
 napi\_poll net/core/dev.c:5500
 net\_rx\_action+0x73c/0x1820 net/core/dev.c:5566
 \_\_do\_softirq+0x4b4/0x8dd kernel/softirq.c:284
 invoke\_softirq kernel/softirq.c:364
 irq\_exit+0x203/0x240 kernel/softirq.c:405
 exiting\_irq+0xe/0x10 ./arch/x86/include/asm/apic.h:638
 do\_IRQ+0x15e/0x1a0 arch/x86/kernel/irq.c:263
 common\_interrupt+0x86/0x86
Fixes: d894ba18d4e4 ("soreuseport: fix ordering for mixed v4/v6 sockets")
Fixes: d296ba60d8e2 ("soreuseport: Resolve merge conflict for v4/v6 ordering fix")
Signed-off-by: Eric Dumazet
Reported-by: Alexander Potapenko
Acked-by: Craig Gallek
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bea712a8a5aa9c58e06e3bb894dc25633898c450
Author: Bjørn Mork
Date: Wed Dec 6 20:21:24 2017 +0100
usbnet: fix alignment for frames with no ethernet header
[ Upstream commit a4abd7a80addb4a9547f7dfc7812566b60ec505c ]
The qmi\_wwan minidriver support a 'raw-ip' mode where frames are
received without any ethernet header. This causes alignment issues
because the skbs allocated by usbnet are "IP aligned".
Fix by allowing minidrivers to disable the additional alignment
offset. This is implemented using a per-device flag, since the same
minidriver also supports 'ethernet' mode.
Fixes: 32f7adf633b9 ("net: qmi\_wwan: support "raw IP" mode")
Reported-and-tested-by: Jay Foster
Signed-off-by: Bjørn Mork
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f8e5ef4ea8f1037f3f7cfd12291f55baa82e5251
Author: Eric Dumazet
Date: Wed Nov 29 17:43:57 2017 -0800
tcp: remove buggy call to tcp\_v6\_restore\_cb()
[ Upstream commit 3016dad75b48279e579117ee3ed566ba90a3b023 ]
tcp\_v6\_send\_reset() expects to receive an skb with skb->cb[] layout as
used in TCP stack.
MD5 lookup uses tcp\_v6\_iif() and tcp\_v6\_sdif() and thus
TCP\_SKB\_CB(skb)->header.h6
This patch probably fixes RST packets sent on behalf of a timewait md5
ipv6 socket.
Before Florian patch, tcp\_v6\_restore\_cb() was needed before jumping to
no\_tcp\_socket label.
Fixes: 271c3b9b7bda ("tcp: honour SO\_BINDTODEVICE for TW\_RST case too")
Signed-off-by: Eric Dumazet
Cc: Florian Westphal
Acked-by: Florian Westphal
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 589983eb9986ea9c851c8906a81781f317207313
Author: Eric Dumazet
Date: Tue Nov 28 08:03:30 2017 -0800
net/packet: fix a race in packet\_bind() and packet\_notifier()
[ Upstream commit 15fe076edea787807a7cdc168df832544b58eba6 ]
syzbot reported crashes [1] and provided a C repro easing bug hunting.
When/if packet\_do\_bind() calls \_\_unregister\_prot\_hook() and releases
po->bind\_lock, another thread can run packet\_notifier() and process an
NETDEV\_UP event.
This calls register\_prot\_hook() and hooks again the socket right before
first thread is able to grab again po->bind\_lock.
Fixes this issue by temporarily setting po->num to 0, as suggested by
David Miller.
[1]
dev\_remove\_pack: ffff8801bf16fa80 not found
------------[ cut here ]------------
kernel BUG at net/core/dev.c:7945! ( BUG\_ON(!list\_empty(&dev->ptype\_all)); )
invalid opcode: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
device syz0 entered promiscuous mode
CPU: 0 PID: 3161 Comm: syzkaller404108 Not tainted 4.14.0+ #190
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
task: ffff8801cc57a500 task.stack: ffff8801cc588000
RIP: 0010:netdev\_run\_todo+0x772/0xae0 net/core/dev.c:7945
RSP: 0018:ffff8801cc58f598 EFLAGS: 00010293
RAX: ffff8801cc57a500 RBX: dffffc0000000000 RCX: ffffffff841f75b2
RDX: 0000000000000000 RSI: 1ffff100398b1ede RDI: ffff8801bf1f8810
device syz0 entered promiscuous mode
RBP: ffff8801cc58f898 R08: 0000000000000001 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000000 R12: ffff8801bf1f8cd8
R13: ffff8801cc58f870 R14: ffff8801bf1f8780 R15: ffff8801cc58f7f0
FS: 0000000001716880(0000) GS:ffff8801db400000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020b13000 CR3: 0000000005e25000 CR4: 00000000001406f0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
rtnl\_unlock+0xe/0x10 net/core/rtnetlink.c:106
tun\_detach drivers/net/tun.c:670 [inline]
tun\_chr\_close+0x49/0x60 drivers/net/tun.c:2845
\_\_fput+0x333/0x7f0 fs/file\_table.c:210
\_\_\_\_fput+0x15/0x20 fs/file\_table.c:244
task\_work\_run+0x199/0x270 kernel/task\_work.c:113
exit\_task\_work include/linux/task\_work.h:22 [inline]
do\_exit+0x9bb/0x1ae0 kernel/exit.c:865
do\_group\_exit+0x149/0x400 kernel/exit.c:968
SYSC\_exit\_group kernel/exit.c:979 [inline]
SyS\_exit\_group+0x1d/0x20 kernel/exit.c:977
entry\_SYSCALL\_64\_fastpath+0x1f/0x96
RIP: 0033:0x44ad19
Fixes: 30f7ea1c2b5f ("packet: race condition in packet\_bind")
Signed-off-by: Eric Dumazet
Reported-by: syzbot
Cc: Francesco Ruggeri
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7263f11b567193235a676584dfefd0b46c8b08a1
Author: Mike Maloney
Date: Tue Nov 28 10:44:29 2017 -0500
packet: fix crash in fanout\_demux\_rollover()
syzkaller found a race condition fanout\_demux\_rollover() while removing
a packet socket from a fanout group.
po->rollover is read and operated on during packet\_rcv\_fanout(), via
fanout\_demux\_rollover(), but the pointer is currently cleared before the
synchronization in packet\_release(). It is safer to delay the cleanup
until after synchronize\_net() has been called, ensuring all calls to
packet\_rcv\_fanout() for this socket have finished.
To further simplify synchronization around the rollover structure, set
po->rollover in fanout\_add() only if there are no errors. This removes
the need for rcu in the struct and in the call to
packet\_getsockopt(..., PACKET\_ROLLOVER\_STATS, ...).
Crashing stack trace:
fanout\_demux\_rollover+0xb6/0x4d0 net/packet/af\_packet.c:1392
packet\_rcv\_fanout+0x649/0x7c8 net/packet/af\_packet.c:1487
dev\_queue\_xmit\_nit+0x835/0xc10 net/core/dev.c:1953
xmit\_one net/core/dev.c:2975 [inline]
dev\_hard\_start\_xmit+0x16b/0xac0 net/core/dev.c:2995
\_\_dev\_queue\_xmit+0x17a4/0x2050 net/core/dev.c:3476
dev\_queue\_xmit+0x17/0x20 net/core/dev.c:3509
neigh\_connected\_output+0x489/0x720 net/core/neighbour.c:1379
neigh\_output include/net/neighbour.h:482 [inline]
ip6\_finish\_output2+0xad1/0x22a0 net/ipv6/ip6\_output.c:120
ip6\_finish\_output+0x2f9/0x920 net/ipv6/ip6\_output.c:146
NF\_HOOK\_COND include/linux/netfilter.h:239 [inline]
ip6\_output+0x1f4/0x850 net/ipv6/ip6\_output.c:163
dst\_output include/net/dst.h:459 [inline]
NF\_HOOK.constprop.35+0xff/0x630 include/linux/netfilter.h:250
mld\_sendpack+0x6a8/0xcc0 net/ipv6/mcast.c:1660
mld\_send\_initial\_cr.part.24+0x103/0x150 net/ipv6/mcast.c:2072
mld\_send\_initial\_cr net/ipv6/mcast.c:2056 [inline]
ipv6\_mc\_dad\_complete+0x99/0x130 net/ipv6/mcast.c:2079
addrconf\_dad\_completed+0x595/0x970 net/ipv6/addrconf.c:4039
addrconf\_dad\_work+0xac9/0x1160 net/ipv6/addrconf.c:3971
process\_one\_work+0xbf0/0x1bc0 kernel/workqueue.c:2113
worker\_thread+0x223/0x1990 kernel/workqueue.c:2247
kthread+0x35e/0x430 kernel/kthread.c:231
ret\_from\_fork+0x2a/0x40 arch/x86/entry/entry\_64.S:432
Fixes: 0648ab70afe6 ("packet: rollover prepare: per-socket state")
Fixes: 509c7a1ecc860 ("packet: avoid panic in packet\_getsockopt()")
Reported-by: syzbot
Signed-off-by: Mike Maloney
Reviewed-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b604eb8deaed5be43c0402008d0a76cedaacf940
Author: Eric Dumazet
Date: Sun Dec 3 09:32:59 2017 -0800
tcp: add tcp\_v4\_fill\_cb()/tcp\_v4\_restore\_cb()
[ Upstream commit eeea10b83a139451130df1594f26710c8fa390c8 ]
James Morris reported kernel stack corruption bug [1] while
running the SELinux testsuite, and bisected to a recent
commit bffa72cf7f9d ("net: sk\_buff rbnode reorg")
We believe this commit is fine, but exposes an older bug.
SELinux code runs from tcp\_filter() and might send an ICMP,
expecting IP options to be found in skb->cb[] using regular IPCB placement.
We need to defer TCP mangling of skb->cb[] after tcp\_filter() calls.
This patch adds tcp\_v4\_fill\_cb()/tcp\_v4\_restore\_cb() in a very
similar way we added them for IPv6.
[1]
[ 339.806024] SELinux: failure in selinux\_parse\_skb(), unable to parse packet
[ 339.822505] Kernel panic - not syncing: stack-protector: Kernel stack is corrupted in: ffffffff81745af5
[ 339.822505]
[ 339.852250] CPU: 4 PID: 3642 Comm: client Not tainted 4.15.0-rc1-test #15
[ 339.868498] Hardware name: LENOVO 10FGS0VA1L/30BC, BIOS FWKT68A 01/19/2017
[ 339.885060] Call Trace:
[ 339.896875]
[ 339.908103] dump\_stack+0x63/0x87
[ 339.920645] panic+0xe8/0x248
[ 339.932668] ? ip\_push\_pending\_frames+0x33/0x40
[ 339.946328] ? icmp\_send+0x525/0x530
[ 339.958861] ? kfree\_skbmem+0x60/0x70
[ 339.971431] \_\_stack\_chk\_fail+0x1b/0x20
[ 339.984049] icmp\_send+0x525/0x530
[ 339.996205] ? netlbl\_skbuff\_err+0x36/0x40
[ 340.008997] ? selinux\_netlbl\_err+0x11/0x20
[ 340.021816] ? selinux\_socket\_sock\_rcv\_skb+0x211/0x230
[ 340.035529] ? security\_sock\_rcv\_skb+0x3b/0x50
[ 340.048471] ? sk\_filter\_trim\_cap+0x44/0x1c0
[ 340.061246] ? tcp\_v4\_inbound\_md5\_hash+0x69/0x1b0
[ 340.074562] ? tcp\_filter+0x2c/0x40
[ 340.086400] ? tcp\_v4\_rcv+0x820/0xa20
[ 340.098329] ? ip\_local\_deliver\_finish+0x71/0x1a0
[ 340.111279] ? ip\_local\_deliver+0x6f/0xe0
[ 340.123535] ? ip\_rcv\_finish+0x3a0/0x3a0
[ 340.135523] ? ip\_rcv\_finish+0xdb/0x3a0
[ 340.147442] ? ip\_rcv+0x27c/0x3c0
[ 340.158668] ? inet\_del\_offload+0x40/0x40
[ 340.170580] ? \_\_netif\_receive\_skb\_core+0x4ac/0x900
[ 340.183285] ? rcu\_accelerate\_cbs+0x5b/0x80
[ 340.195282] ? \_\_netif\_receive\_skb+0x18/0x60
[ 340.207288] ? process\_backlog+0x95/0x140
[ 340.218948] ? net\_rx\_action+0x26c/0x3b0
[ 340.230416] ? \_\_do\_softirq+0xc9/0x26a
[ 340.241625] ? do\_softirq\_own\_stack+0x2a/0x40
[ 340.253368]
[ 340.262673] ? do\_softirq+0x50/0x60
[ 340.273450] ? \_\_local\_bh\_enable\_ip+0x57/0x60
[ 340.285045] ? ip\_finish\_output2+0x175/0x350
[ 340.296403] ? ip\_finish\_output+0x127/0x1d0
[ 340.307665] ? nf\_hook\_slow+0x3c/0xb0
[ 340.318230] ? ip\_output+0x72/0xe0
[ 340.328524] ? ip\_fragment.constprop.54+0x80/0x80
[ 340.340070] ? ip\_local\_out+0x35/0x40
[ 340.350497] ? ip\_queue\_xmit+0x15c/0x3f0
[ 340.361060] ? \_\_kmalloc\_reserve.isra.40+0x31/0x90
[ 340.372484] ? \_\_skb\_clone+0x2e/0x130
[ 340.382633] ? tcp\_transmit\_skb+0x558/0xa10
[ 340.393262] ? tcp\_connect+0x938/0xad0
[ 340.403370] ? ktime\_get\_with\_offset+0x4c/0xb0
[ 340.414206] ? tcp\_v4\_connect+0x457/0x4e0
[ 340.424471] ? \_\_inet\_stream\_connect+0xb3/0x300
[ 340.435195] ? inet\_stream\_connect+0x3b/0x60
[ 340.445607] ? SYSC\_connect+0xd9/0x110
[ 340.455455] ? \_\_audit\_syscall\_entry+0xaf/0x100
[ 340.466112] ? syscall\_trace\_enter+0x1d0/0x2b0
[ 340.476636] ? \_\_audit\_syscall\_exit+0x209/0x290
[ 340.487151] ? SyS\_connect+0xe/0x10
[ 340.496453] ? do\_syscall\_64+0x67/0x1b0
[ 340.506078] ? entry\_SYSCALL64\_slow\_path+0x25/0x25
Fixes: 971f10eca186 ("tcp: better TCP\_SKB\_CB layout to reduce cache line misses")
Signed-off-by: Eric Dumazet
Reported-by: James Morris
Tested-by: James Morris
Tested-by: Casey Schaufler
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dacf127383fc2dabd2befbead91cbbf22c3dc2ab
Author: Hangbin Liu
Date: Thu Nov 30 10:41:14 2017 +0800
sit: update frag\_off info
[ Upstream commit f859b4af1c52493ec21173ccc73d0b60029b5b88 ]
After parsing the sit netlink change info, we forget to update frag\_off in
ipip6\_tunnel\_update(). Fix it by assigning frag\_off with new value.
Reported-by: Jianlin Shi
Signed-off-by: Hangbin Liu
Acked-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9d9a63d74b2b6ed7c30c7d1584d87c16ae8d5862
Author: Håkon Bugge
Date: Wed Dec 6 17:18:28 2017 +0100
rds: Fix NULL pointer dereference in \_\_rds\_rdma\_map
[ Upstream commit f3069c6d33f6ae63a1668737bc78aaaa51bff7ca ]
This is a fix for syzkaller719569, where memory registration was
attempted without any underlying transport being loaded.
Analysis of the case reveals that it is the setsockopt() RDS\_GET\_MR
(2) and RDS\_GET\_MR\_FOR\_DEST (7) that are vulnerable.
Here is an example stack trace when the bug is hit:
BUG: unable to handle kernel NULL pointer dereference at 00000000000000c0
IP: \_\_rds\_rdma\_map+0x36/0x440 [rds]
PGD 2f93d03067 P4D 2f93d03067 PUD 2f93d02067 PMD 0
Oops: 0000 [#1] SMP
Modules linked in: bridge stp llc tun rpcsec\_gss\_krb5 nfsv4
dns\_resolver nfs fscache rds binfmt\_misc sb\_edac intel\_powerclamp
coretemp kvm\_intel kvm irqbypass crct10dif\_pclmul c rc32\_pclmul
ghash\_clmulni\_intel pcbc aesni\_intel crypto\_simd glue\_helper cryptd
iTCO\_wdt mei\_me sg iTCO\_vendor\_support ipmi\_si mei ipmi\_devintf nfsd
shpchp pcspkr i2c\_i801 ioatd ma ipmi\_msghandler wmi lpc\_ich mfd\_core
auth\_rpcgss nfs\_acl lockd grace sunrpc ip\_tables ext4 mbcache jbd2
mgag200 i2c\_algo\_bit drm\_kms\_helper ixgbe syscopyarea ahci sysfillrect
sysimgblt libahci mdio fb\_sys\_fops ttm ptp libata sd\_mod mlx4\_core drm
crc32c\_intel pps\_core megaraid\_sas i2c\_core dca dm\_mirror
dm\_region\_hash dm\_log dm\_mod
CPU: 48 PID: 45787 Comm: repro\_set2 Not tainted 4.14.2-3.el7uek.x86\_64 #2
Hardware name: Oracle Corporation ORACLE SERVER X5-2L/ASM,MOBO TRAY,2U, BIOS 31110000 03/03/2017
task: ffff882f9190db00 task.stack: ffffc9002b994000
RIP: 0010:\_\_rds\_rdma\_map+0x36/0x440 [rds]
RSP: 0018:ffffc9002b997df0 EFLAGS: 00010202
RAX: 0000000000000000 RBX: ffff882fa2182580 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffffc9002b997e40 RDI: ffff882fa2182580
RBP: ffffc9002b997e30 R08: 0000000000000000 R09: 0000000000000002
R10: ffff885fb29e3838 R11: 0000000000000000 R12: ffff882fa2182580
R13: ffff882fa2182580 R14: 0000000000000002 R15: 0000000020000ffc
FS: 00007fbffa20b700(0000) GS:ffff882fbfb80000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000000000c0 CR3: 0000002f98a66006 CR4: 00000000001606e0
Call Trace:
rds\_get\_mr+0x56/0x80 [rds]
rds\_setsockopt+0x172/0x340 [rds]
? \_\_fget\_light+0x25/0x60
? \_\_fdget+0x13/0x20
SyS\_setsockopt+0x80/0xe0
do\_syscall\_64+0x67/0x1b0
entry\_SYSCALL64\_slow\_path+0x25/0x25
RIP: 0033:0x7fbff9b117f9
RSP: 002b:00007fbffa20aed8 EFLAGS: 00000293 ORIG\_RAX: 0000000000000036
RAX: ffffffffffffffda RBX: 00000000000c84a4 RCX: 00007fbff9b117f9
RDX: 0000000000000002 RSI: 0000400000000114 RDI: 000000000000109b
RBP: 00007fbffa20af10 R08: 0000000000000020 R09: 00007fbff9dd7860
R10: 0000000020000ffc R11: 0000000000000293 R12: 0000000000000000
R13: 00007fbffa20b9c0 R14: 00007fbffa20b700 R15: 0000000000000021
Code: 41 56 41 55 49 89 fd 41 54 53 48 83 ec 18 8b 87 f0 02 00 00 48
89 55 d0 48 89 4d c8 85 c0 0f 84 2d 03 00 00 48 8b 87 00 03 00 00 <48>
83 b8 c0 00 00 00 00 0f 84 25 03 00 0 0 48 8b 06 48 8b 56 08
The fix is to check the existence of an underlying transport in
\_\_rds\_rdma\_map().
Signed-off-by: Håkon Bugge
Reported-by: syzbot
Acked-by: Santosh Shilimkar
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dee5b428c3b71d7201d49afd38a110fccb352922
Author: Wei Xu
Date: Fri Dec 1 05:10:36 2017 -0500
vhost: fix skb leak in handle\_rx()
[ Upstream commit 6e474083f3daf3a3546737f5d7d502ad12eb257c ]
Matthew found a roughly 40% tcp throughput regression with commit
c67df11f(vhost\_net: try batch dequing from skb array) as discussed
in the following thread:
https://www.mail-archive.com/netdev@vger.kernel.org/msg187936.html
Eventually we figured out that it was a skb leak in handle\_rx()
when sending packets to the VM. This usually happens when a guest
can not drain out vq as fast as vhost fills in, afterwards it sets
off the traffic jam and leaks skb(s) which occurs as no headcount
to send on the vq from vhost side.
This can be avoided by making sure we have got enough headcount
before actually consuming a skb from the batched rx array while
transmitting, which is simply done by moving checking the zero
headcount a bit ahead.
Signed-off-by: Wei Xu
Reported-by: Matthew Rosato
Acked-by: Michael S. Tsirkin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1933fa485194e697b4d90853f338029ab19e4a72
Author: Jon Maloy
Date: Mon Dec 4 22:00:20 2017 +0100
tipc: fix memory leak in tipc\_accept\_from\_sock()
[ Upstream commit a7d5f107b4978e08eeab599ee7449af34d034053 ]
When the function tipc\_accept\_from\_sock() fails to create an instance of
struct tipc\_subscriber it omits to free the already created instance of
struct tipc\_conn instance before it returns.
We fix that with this commit.
Reported-by: David S. Miller
Signed-off-by: Jon Maloy
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6efcd7eada3e76096e574e27d4e56051ffd328ab
Author: Julian Wiedmann
Date: Wed Oct 18 17:40:17 2017 +0200
s390/qeth: fix early exit from error path
[ Upstream commit 83cf79a2fec3cf499eb6cb9eb608656fc2a82776 ]
When the allocation of the addr buffer fails, we need to free
our refcount on the inetdevice before returning.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c7203f55d53f9237bda0c0b6cf02f22f18262a5b
Author: Tobias Jakobi
Date: Tue Nov 21 16:15:57 2017 +0100
net: realtek: r8169: implement set\_link\_ksettings()
[ Upstream commit 9e77d7a5549dc4d4999a60676373ab3fd1dae4db ]
Commit 6fa1ba61520576cf1346c4ff09a056f2950cb3bf partially
implemented the new ethtool API, by replacing get\_settings()
with get\_link\_ksettings(). This breaks ethtool, since the
userspace tool (according to the new API specs) never tries
the legacy set() call, when the new get() call succeeds.
All attempts to chance some setting from userspace result in:
> Cannot set new settings: Operation not supported
Implement the missing set() call.
Signed-off-by: Tobias Jakobi
Tested-by: Holger Hoffstätte
Reviewed-by: Andrew Lunn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ec9a6722173d3dbbbbcc5eec2f5b0f2c58057bc9
Author: Florian Westphal
Date: Wed Dec 6 01:04:50 2017 +0100
net: thunderx: Fix TCP/UDP checksum offload for IPv4 pkts
[ Upstream commit 134059fd2775be79e26c2dff87d25cc2f6ea5626 ]
Offload IP header checksum to NIC.
This fixes a previous patch which disabled checksum offloading
for both IPv4 and IPv6 packets. So L3 checksum offload was
getting disabled for IPv4 pkts. And HW is dropping these pkts
for some reason.
Without this patch, IPv4 TSO appears to be broken:
WIthout this patch I get ~16kbyte/s, with patch close to 2mbyte/s
when copying files via scp from test box to my home workstation.
Looking at tcpdump on sender it looks like hardware drops IPv4 TSO skbs.
This patch restores performance for me, ipv6 looks good too.
Fixes: fa6d7cb5d76c ("net: thunderx: Fix TCP/UDP checksum offload for IPv6 pkts")
Cc: Sunil Goutham
Cc: Aleksey Makarov
Cc: Eric Dumazet
Signed-off-by: Florian Westphal
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fb89f5b05ab239ea14f87c02fcac05c957818f90
Author: Sunil Goutham
Date: Thu Nov 23 22:34:31 2017 +0300
net: thunderx: Fix TCP/UDP checksum offload for IPv6 pkts
[ Upstream commit fa6d7cb5d76cf0467c61420fc9238045aedfd379 ]
Don't offload IP header checksum to NIC.
This fixes a previous patch which enabled checksum offloading
for both IPv4 and IPv6 packets. So L3 checksum offload was
getting enabled for IPv6 pkts. And HW is dropping these pkts
as it assumes the pkt is IPv4 when IP csum offload is set
in the SQ descriptor.
Fixes: 3a9024f52c2e ("net: thunderx: Enable TSO and checksum offloads for ipv6")
Signed-off-by: Sunil Goutham
Signed-off-by: Aleksey Makarov
Reviewed-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fc038e59f316d2255f6d3c05d0d6b117d4739574
Author: Sebastian Sjoholm
Date: Mon Nov 20 19:05:17 2017 +0100
net: qmi\_wwan: add Quectel BG96 2c7c:0296
[ Upstream commit f9409e7f086fa6c4623769b4b2f4f17a024d8143 ]
Quectel BG96 is an Qualcomm MDM9206 based IoT modem, supporting both
CAT-M and NB-IoT. Tested hardware is BG96 mounted on Quectel development
board (EVB). The USB id is added to qmi\_wwan.c to allow QMI
communication with the BG96.
Signed-off-by: Sebastian Sjoholm
Acked-by: Bjørn Mork
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman


=== Content from bugzilla.redhat.com_45c03974_20250125_212326.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1527393)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1527393)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1527393)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1527393

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1527393**](show_bug.cgi?id=1527393)
(CVE-2018-7492)
- [CVE-2018-7492](https://access.redhat.com/security/cve/CVE-2018-7492) kernel: Null pointer dereference in net/rds/rdma.c:\_\_rds\_rdma\_map() allowing local attackers to cause denial-of-service

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2018-7492 kernel: Null pointer dereference in net/rds/rdma.c:\_\_rds\_rdma\_m...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-7492 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1527395](show_bug.cgi?id=1527395 "CLOSED ERRATA - CVE-2018-7492 kernel: Null pointer dereference in net/rds/rdma.c:__rds_rdma_map() allowing local attackers to cause denial-of-service [fedora-all]") [1527399](show_bug.cgi?id=1527399) [1549223](show_bug.cgi?id=1549223) [1549224](show_bug.cgi?id=1549224) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1527397](show_bug.cgi?id=1527397) | | TreeView+ | [depends on](buglist.cgi?bug_id=1527393&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1527393&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2017-12-19 11:02 UTC by Adam Mariš | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2024-12-20 18:44 UTC ([History](show_activity.cgi?id=1527393)) | | [CC List:](page.cgi?id=fields.html#cclist) | 43 users (show)  airlied ajax aquini bhu blc bskeggs dhoward ewk fhrbata gscott hdegoede hkrzesin hwkernel-mgr iboverma ichavero itamar jarodwilson jforbes jkacur john.j5live jonathan josef jross jwboyer kernel-maint kernel-mgr lgoncalv linville mchehab mcressma mguzik mjg59 mlangsdo nmurray rt-maint rvrbovsk sbalasub skozina slawomir steved vdronov williams yozone | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: | A NULL pointer dereference was found in net/rds/rdma.c:\_\_rds\_rdma\_map() function in the Linux kernel allowing local attackers to cause a system panic and a denial-of-service. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2021-10-27 10:54:17 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1527393#c0)  Adam Mariš    2017-12-19 11:02:21 UTC  ``` A NULL pointer dereference was found in net/rds/rdma.c:__rds_rdma_map() function in the Linux kernel allowing local attackers to cause a system panic and a denial-of-service.  References:  <https://patchwork.kernel.org/patch/10096441/>  <https://xorl.wordpress.com/2017/12/18/linux-kernel-rdma-null-pointer-dereference/>  <http://seclists.org/oss-sec/2018/q1/191>  An upstream patch:  <https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=f3069c6d33f6ae63a1668737bc78aaaa51bff7ca>   ```  [Comment 1](show_bug.cgi?id=1527393#c1)  Adam Mariš    2017-12-19 11:03:31 UTC  ``` Created kernel tracking bugs for this issue:  Affects: fedora-all [[bug 1527395](show_bug.cgi?id=1527395 "CLOSED ERRATA - CVE-2018-7492 kernel: Null pointer dereference in net/rds/rdma.c:__rds_rdma_map() allowing local attackers to cause denial-of-service [fedora-all]")]   ```  [Comment 3](show_bug.cgi?id=1527393#c3)  Justin M. Forbes    2017-12-19 15:29:08 UTC  ``` This was fixed in the kernel-4.14.7 update for Fedora.   ```  [Comment 7](show_bug.cgi?id=1527393#c7)  Vladis Dronov    2018-02-26 18:24:04 UTC  ``` Statement:  This issue affects the versions of the Linux kernel as shipped with Red Hat Enterprise Linux 6 and Red Hat Enterprise MRG 2. Future Linux kernel updates for the respective releases may address this issue.  This issue does not affect the versions of the Linux kernel as shipped with Red Hat Enterprise Linux 5, 7, its real-time kernel, Red Hat Enterprise Linux 7 for ARM 64 and Red Hat Enterprise Linux 7 for Power 9 LE, as a code with the flaw is not built and shipped with the products listed.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1527393&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from usn.ubuntu.com_57df2232_20250125_212336.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3619-2: Linux kernel (Xenial HWE) vulnerabilities

5 April 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-lts-xenial](/security/cves?package=linux-lts-xenial) - Linux hardware enablement kernel from Xenial for Trusty

## Details

USN-3619-1 fixed vulnerabilities in the Linux kernel for Ubuntu 16.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 16.04 LTS for Ubuntu

14.04 LTS.

Jann Horn discovered that the Berkeley Packet Filter (BPF) implementation

in the Linux kernel improperly performed sign extension in some situations.

A local attacker could use this to cause a denial of service (system crash)

or possibly execute arbitrary code. ([CVE-2017-16995](/security/CVE-2017-16995))

It was discovered that a race condition leading to a use-after-free

vulnerability existed in the ALSA PCM subsystem of the Linux kernel. A

local attacker could use this to cause a denial of service (system crash)

or possibly execute arbitrary code. ([CVE-2017-0861](/security/CVE-2017-0861))

It was discovered that the KVM implementation in the Linux kernel allowed

passthrough of the diagnostic I/O port 0x80. An attacker in a guest VM

could use this to cause a denial of service (system crash) in the host OS.

([CVE-2017-1000407](/security/CVE-2017-1000407))

It was discovered that an information disclosure vulnerability existed in

the ACPI implementation of the Linux kernel. A local attacker could use

this to expose sensitive information (kernel memory addresses).

([CVE-2017-11472](/security/CVE-2017-11472))

It was discovered that a use-after-free vulnerability existed in the

network namespaces implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2017-15129](/security/CVE-2017-15129))

It was discovered that the Advanced Linux Sound Architecture (ALSA)

subsystem in the Linux kernel contained a use-after-free when handling

device removal. A physically proximate attacker could use this to cause a

denial of service (system crash) or possibly execute arbitrary code.

([CVE-2017-16528](/security/CVE-2017-16528))

Andrey Konovalov discovered that the usbtest device driver in the Linux

kernel did not properly validate endpoint metadata. A physically proximate

attacker could use this to cause a denial of service (system crash).

([CVE-2017-16532](/security/CVE-2017-16532))

Andrey Konovalov discovered that the Conexant cx231xx USB video capture

driver in the Linux kernel did not properly validate interface descriptors.

A physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-16536](/security/CVE-2017-16536))

Andrey Konovalov discovered that the SoundGraph iMON USB driver in the

Linux kernel did not properly validate device metadata. A physically

proximate attacker could use this to cause a denial of service (system

crash). ([CVE-2017-16537](/security/CVE-2017-16537))

Andrey Konovalov discovered that the IMS Passenger Control Unit USB driver

in the Linux kernel did not properly validate device descriptors. A

physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-16645](/security/CVE-2017-16645))

Andrey Konovalov discovered that the DiBcom DiB0700 USB DVB driver in the

Linux kernel did not properly handle detach events. A physically proximate

attacker could use this to cause a denial of service (system crash).

([CVE-2017-16646](/security/CVE-2017-16646))

Andrey Konovalov discovered that the CDC USB Ethernet driver did not

properly validate device descriptors. A physically proximate attacker could

use this to cause a denial of service (system crash). ([CVE-2017-16649](/security/CVE-2017-16649))

Andrey Konovalov discovered that the QMI WWAN USB driver did not properly

validate device descriptors. A physically proximate attacker could use this

to cause a denial of service (system crash). ([CVE-2017-16650](/security/CVE-2017-16650))

It was discovered that the USB Virtual Host Controller Interface (VHCI)

driver in the Linux kernel contained an information disclosure

vulnerability. A physically proximate attacker could use this to expose

sensitive information (kernel memory). ([CVE-2017-16911](/security/CVE-2017-16911))

It was discovered that the USB over IP implementation in the Linux kernel

did not validate endpoint numbers. A remote attacker could use this to

cause a denial of service (system crash). ([CVE-2017-16912](/security/CVE-2017-16912))

It was discovered that the USB over IP implementation in the Linux kernel

did not properly validate CMD\_SUBMIT packets. A remote attacker could use

this to cause a denial of service (excessive memory consumption).

([CVE-2017-16913](/security/CVE-2017-16913))

It was discovered that the USB over IP implementation in the Linux kernel

contained a NULL pointer dereference error. A remote attacker could use

this to cause a denial of service (system crash). ([CVE-2017-16914](/security/CVE-2017-16914))

It was discovered that the HugeTLB component of the Linux kernel did not

properly handle holes in hugetlb ranges. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2017-16994](/security/CVE-2017-16994))

It was discovered that the netfilter component of the Linux did not

properly restrict access to the connection tracking helpers list. A local

attacker could use this to bypass intended access restrictions.

([CVE-2017-17448](/security/CVE-2017-17448))

It was discovered that the netlink subsystem in the Linux kernel did not

properly restrict observations of netlink messages to the appropriate net

namespace. A local attacker could use this to expose sensitive information

(kernel netlink traffic). ([CVE-2017-17449](/security/CVE-2017-17449))

It was discovered that the netfilter passive OS fingerprinting (xt\_osf)

module did not properly perform access control checks. A local attacker

could improperly modify the system-wide OS fingerprint list.

([CVE-2017-17450](/security/CVE-2017-17450))

It was discovered that the core USB subsystem in the Linux kernel did not

validate the number of configurations and interfaces in a device. A

physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-17558](/security/CVE-2017-17558))

Dmitry Vyukov discovered that the KVM implementation in the Linux kernel

contained an out-of-bounds read when handling memory-mapped I/O. A local

attacker could use this to expose sensitive information. ([CVE-2017-17741](/security/CVE-2017-17741))

It was discovered that the Salsa20 encryption algorithm implementations in

the Linux kernel did not properly handle zero-length inputs. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2017-17805](/security/CVE-2017-17805))

It was discovered that the HMAC implementation did not validate the state

of the underlying cryptographic hash algorithm. A local attacker could use

this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2017-17806](/security/CVE-2017-17806))

It was discovered that the keyring implementation in the Linux kernel did

not properly check permissions when a key request was performed on a task's

default keyring. A local attacker could use this to add keys to

unauthorized keyrings. ([CVE-2017-17807](/security/CVE-2017-17807))

Alexei Starovoitov discovered that the Berkeley Packet Filter (BPF)

implementation in the Linux kernel contained a branch-pruning logic issue

around unreachable code. A local attacker could use this to cause a denial

of service. ([CVE-2017-17862](/security/CVE-2017-17862))

It was discovered that the parallel cryptography component of the Linux

kernel incorrectly freed kernel memory. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-18075](/security/CVE-2017-18075))

It was discovered that a race condition existed in the Device Mapper

component of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash). ([CVE-2017-18203](/security/CVE-2017-18203))

It was discovered that a race condition existed in the OCFS2 file system

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (kernel deadlock). ([CVE-2017-18204](/security/CVE-2017-18204))

It was discovered that an infinite loop could occur in the madvise(2)

implementation in the Linux kernel in certain circumstances. A local

attacker could use this to cause a denial of service (system hang).

([CVE-2017-18208](/security/CVE-2017-18208))

Andy Lutomirski discovered that the KVM implementation in the Linux kernel

was vulnerable to a debug exception error when single-stepping through a

syscall. A local attacker in a non-Linux guest vm could possibly use this

to gain administrative privileges in the guest vm. ([CVE-2017-7518](/security/CVE-2017-7518))

It was discovered that the Broadcom NetXtremeII ethernet driver in the

Linux kernel did not properly validate Generic Segment Offload (GSO) packet

sizes. An attacker could use this to cause a denial of service (interface

unavailability). ([CVE-2018-1000026](/security/CVE-2018-1000026))

It was discovered that the Reliable Datagram Socket (RDS) implementation in

the Linux kernel contained an out-of-bounds write during RDMA page

allocation. An attacker could use this to cause a denial of service (system

crash) or possibly execute arbitrary code. ([CVE-2018-5332](/security/CVE-2018-5332))

Mohamed Ghannam discovered a null pointer dereference in the RDS (Reliable

Datagram Sockets) protocol implementation of the Linux kernel. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2018-5333](/security/CVE-2018-5333))

范龙飞 discovered that a race condition existed in loop block device

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-5344](/security/CVE-2018-5344))

It was discovered that an integer overflow error existed in the futex

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash). ([CVE-2018-6927](/security/CVE-2018-6927))

It was discovered that a NULL pointer dereference existed in the RDS

(Reliable Datagram Sockets) protocol implementation in the Linux kernel. A

local attacker could use this to cause a denial of service (system crash).

([CVE-2018-7492](/security/CVE-2018-7492))

It was discovered that the Broadcom UniMAC MDIO bus controller driver in

the Linux kernel did not properly validate device resources. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2018-8043](/security/CVE-2018-8043))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-4.4.0-1016-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.4.0-1016.16](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.4.0-1016.16)
* [linux-image-4.4.0-119-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-119.143~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-119.143~14.04.1)
* [linux-image-4.4.0-119-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-119.143~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-119.143~14.04.1)
* [linux-image-4.4.0-119-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-119.143~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-119.143~14.04.1)
* [linux-image-4.4.0-119-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-119.143~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-119.143~14.04.1)
* [linux-image-4.4.0-119-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-119.143~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-119.143~14.04.1)
* [linux-image-4.4.0-119-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-119.143~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-119.143~14.04.1)
* [linux-image-4.4.0-119-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-119.143~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-119.143~14.04.1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-0861](/security/CVE-2017-0861)
* [CVE-2017-1000407](/security/CVE-2017-1000407)
* [CVE-2017-11472](/security/CVE-2017-11472)
* [CVE-2017-15129](/security/CVE-2017-15129)
* [CVE-2017-16528](/security/CVE-2017-16528)
* [CVE-2017-16532](/security/CVE-2017-16532)
* [CVE-2017-16536](/security/CVE-2017-16536)
* [CVE-2017-16537](/security/CVE-2017-16537)
* [CVE-2017-16645](/security/CVE-2017-16645)
* [CVE-2017-16646](/security/CVE-2017-16646)
* [CVE-2017-16649](/security/CVE-2017-16649)
* [CVE-2017-16650](/security/CVE-2017-16650)
* [CVE-2017-16911](/security/CVE-2017-16911)
* [CVE-2017-16912](/security/CVE-2017-16912)
* [CVE-2017-16913](/security/CVE-2017-16913)
* [CVE-2017-16914](/security/CVE-2017-16914)
* [CVE-2017-16994](/security/CVE-2017-16994)
* [CVE-2017-16995](/security/CVE-2017-16995)
* [CVE-2017-17448](/security/CVE-2017-17448)
* [CVE-2017-17449](/security/CVE-2017-17449)
* [CVE-2017-17450](/security/CVE-2017-17450)
* [CVE-2017-17558](/security/CVE-2017-17558)
* [CVE-2017-17741](/security/CVE-2017-17741)
* [CVE-2017-17805](/security/CVE-2017-17805)
* [CVE-2017-17806](/security/CVE-2017-17806)
* [CVE-2017-17807](/security/CVE-2017-17807)
* [CVE-2017-17862](/security/CVE-2017-17862)
* [CVE-2017-18075](/security/CVE-2017-18075)
* [CVE-2017-18203](/security/CVE-2017-18203)
* [CVE-2017-18204](/security/CVE-2017-18204)
* [CVE-2017-18208](/security/CVE-2017-18208)
* [CVE-2017-7518](/security/CVE-2017-7518)
* [CVE-2018-1000026](/security/CVE-2018-1000026)
* [CVE-2018-5332](/security/CVE-2018-5332)
* [CVE-2018-5333](/security/CVE-2018-5333)
* [CVE-2018-5344](/security/CVE-2018-5344)
* [CVE-2018-6927](/security/CVE-2018-6927)
* [CVE-2018-7492](/security/CVE-2018-7492)
* [CVE-2018-8043](/security/CVE-2018-8043)

## Related notices

* [USN-3583-2](/security/notices/USN-3583-2)
* [USN-3617-1](/security/notices/USN-3617-1)
* [USN-3619-1](/security/notices/USN-3619-1)
* [USN-3617-3](/security/notices/USN-3617-3)
* [USN-3617-2](/security/notices/USN-3617-2)
* [USN-3632-1](/security/notices/USN-3632-1)
* [USN-3583-1](/security/notices/USN-3583-1)
* [USN-3754-1](/security/notices/USN-3754-1)
* [USN-3822-2](/security/notices/USN-3822-2)
* [USN-3822-1](/security/notices/USN-3822-1)
* [USN-3523-2](/security/notices/USN-3523-2)
* [USN-3633-1](/security/notices/USN-3633-1)
* [USN-3523-1](/security/notices/USN-3523-1)
* [USN-3523-3](/security/notices/USN-3523-3)
* [USN-3620-1](/security/notices/USN-3620-1)
* [USN-3620-2](/security/notices/USN-3620-2)
* [USN-3653-1](/security/notices/USN-3653-1)
* [USN-3657-1](/security/notices/USN-3657-1)
* [USN-3655-1](/security/notices/USN-3655-1)
* [USN-3653-2](/security/notices/USN-3653-2)
* [USN-3655-2](/security/notices/USN-3655-2)
* [USN-3698-2](/security/notices/USN-3698-2)
* [USN-3697-1](/security/notices/USN-3697-1)
* [USN-3698-1](/security/notices/USN-3698-1)
* [USN-3697-2](/security/notices/USN-3697-2)
* [USN-3674-2](/security/notices/USN-3674-2)
* [USN-3674-1](/security/notices/USN-3674-1)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3630-2](/security/notices/USN-3630-2)
* [USN-3630-1](/security/notices/USN-3630-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_000f26fd_20250125_212338.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3674-1: Linux kernel vulnerabilities

11 June 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

It was discovered that the netfilter subsystem of the Linux kernel did not

properly validate ebtables offsets. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-1068](/security/CVE-2018-1068))

It was discovered that a NULL pointer dereference existed in the RDS

(Reliable Datagram Sockets) protocol implementation in the Linux kernel. A

local attacker could use this to cause a denial of service (system crash).

([CVE-2018-7492](/security/CVE-2018-7492))

Eyal Itkin discovered that the USB displaylink video adapter driver in the

Linux kernel did not properly validate mmap offsets sent from userspace. A

local attacker could use this to expose sensitive information (kernel

memory) or possibly execute arbitrary code. ([CVE-2018-8781](/security/CVE-2018-8781))

Xingyuan Lin discovered that a out-of-bounds read existed in the USB Video

Class (UVC) driver of the Linux kernel. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2017-0627](/security/CVE-2017-0627))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-3.13.0-151-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-151.201](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-151.201)
* [linux-image-3.13.0-151-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-151.201](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-151.201)
* [linux-image-3.13.0-151-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-151.201](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-151.201)
* [linux-image-3.13.0-151-powerpc-e500](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-151.201](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-151.201)
* [linux-image-3.13.0-151-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-151.201](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-151.201)
* [linux-image-3.13.0-151-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-151.201](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-151.201)
* [linux-image-3.13.0-151-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-151.201](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-151.201)
* [linux-image-3.13.0-151-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-151.201](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-151.201)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-0627](/security/CVE-2017-0627)
* [CVE-2018-1068](/security/CVE-2018-1068)
* [CVE-2018-7492](/security/CVE-2018-7492)
* [CVE-2018-8781](/security/CVE-2018-8781)

## Related notices

* [USN-3674-2](/security/notices/USN-3674-2)
* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page


