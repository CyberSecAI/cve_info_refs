=== Content from bugzilla.suse.com_71b56766_20250125_082330.html ===


| Bugzilla – Bug 1081784 | VUL-1: libmad: double free or corruption | Last modified: 2018-02-21 13:50:17 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1081784)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1081784**](show_bug.cgi?id=1081784)
- VUL-1: libmad: double free or corruption

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-1: libmad: double free or corruption

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED DUPLICATE of [bug 1082025](show_bug.cgi?id=1082025 "RESOLVED INVALID - VUL-1: CVE-2018-7263 libmad: Double-free in the mad_decoder_run() function") | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | openSUSE Distribution | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | openSUSE | | [Component:](describecomponents.cgi?product=openSUSE Distribution "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Security ([show other bugs](buglist.cgi?component=Security&product=openSUSE%20Distribution&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | Leap 42.3 | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P4 - Low **Severity**: Normal ([vote](page.cgi?id=voting/user.html&bug_id=1081784#vote_1081784)) | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Security Team bot | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | E-mail List | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2018-02-20 14:43 UTC by Karol Babioch | | --- | --- | | Modified: | 2018-02-21 13:50 UTC ([History](show_activity.cgi?id=1081784)) | | CC List: | 0 users | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1081784) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**Reproducer**](attachment.cgi?id=760820 "View the content of the attachment") (8.60 KB, audio/mpeg)  [2018-02-20 14:43 UTC](#attach_760820 "Go to the comment associated with the attachment"), Karol Babioch | [Details](attachment.cgi?id=760820&action=edit) | | [View All](attachment.cgi?bugid=1081784&action=viewall)  [Add an attachment](attachment.cgi?bugid=1081784&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1081784&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1081784#c0)  Karol Babioch   2018-02-20 14:43:51 UTC  ``` Created [attachment 760820](attachment.cgi?id=760820 "Reproducer") [[details]](attachment.cgi?id=760820&action=edit "Reproducer") Reproducer  While investigating CVE-2017-11548 I found this:  kbabioch@opensuse423:~/Downloads/mpg321-0.3.2-orig> gdb mpg321 GNU gdb (GDB; openSUSE Leap 42.3) 8.0.1 Copyright (C) 2017 Free Software Foundation, Inc. License GPLv3+: GNU GPL version 3 or later <<http://gnu.org/licenses/gpl.html>> This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law.  Type "show copying" and "show warranty" for details. This GDB was configured as "x86_64-suse-linux". Type "show configuration" for configuration details. For bug reporting instructions, please see: <<http://bugs.opensuse.org/>>. Find the GDB manual and other documentation resources online at: <<http://www.gnu.org/software/gdb/documentation/>>. For help, type "help". Type "apropos word" to search for commands related to "word"... Reading symbols from mpg321...done. (gdb) run libao_1.2.0_memory_corruption.mp3  Starting program: /home/kbabioch/Downloads/mpg321-0.3.2-orig/mpg321 libao_1.2.0_memory_corruption.mp3 Missing separate debuginfos, use: zypper install glibc-debuginfo-2.22-8.4.x86_64 [Thread debugging using libthread_db enabled] Using host libthread_db library "/lib64/libthread_db.so.1". High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2, and 3. Version 0.3.2-1 (2012/03/25). Written and copyrights by Joe Drew, now maintained by Nanakos Chrysostomos and others. Uses code from various people. See 'README' for more! THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!  Playing MPEG stream from libao_1.2.0_memory_corruption.mp3 ... MPEG 1.0 layer III, 192 kbit/s, 44100 Hz mono [New Thread 0x7fffeee51700 (LWP 10840)] *** Error in `/home/kbabioch/Downloads/mpg321-0.3.2-orig/mpg321': double free or corruption (out): 0x00000000006222e0 *** ======= Backtrace: ========= /lib64/libc.so.6(+0x721af)[0x7ffff683f1af] /lib64/libc.so.6(+0x77706)[0x7ffff6844706] /lib64/libc.so.6(+0x78453)[0x7ffff6845453] /usr/lib64/libmad.so.0(mad_decoder_run+0x3e)[0x7ffff72806be] /home/kbabioch/Downloads/mpg321-0.3.2-orig/mpg321[0x403fcd] /lib64/libc.so.6(__libc_start_main+0xf5)[0x7ffff67ed6e5] /home/kbabioch/Downloads/mpg321-0.3.2-orig/mpg321[0x404ef9] ======= Memory map: ======== 00400000-00411000 r-xp 00000000 fe:02 282716                             /home/kbabioch/Downloads/mpg321-0.3.2-orig/mpg321 00610000-00611000 r--p 00010000 fe:02 282716                             /home/kbabioch/Downloads/mpg321-0.3.2-orig/mpg321 00611000-00612000 rw-p 00011000 fe:02 282716                             /home/kbabioch/Downloads/mpg321-0.3.2-orig/mpg321 00612000-0063f000 rw-p 00000000 00:00 0                                  [heap] 7fffdc000000-7fffdc021000 rw-p 00000000 00:00 0  7fffdc021000-7fffe0000000 ---p 00000000 00:00 0  7fffe3fff000-7fffe8000000 rw-s 00000000 00:12 51622                      /dev/shm/pulse-shm-2073225839 7fffe8000000-7fffe8021000 rw-p 00000000 00:00 0  7fffe8021000-7fffec000000 ---p 00000000 00:00 0  7fffee43a000-7fffee450000 r-xp 00000000 fe:02 142309                     /lib64/libgcc_s.so.1 7fffee450000-7fffee64f000 ---p 00016000 fe:02 142309                     /lib64/libgcc_s.so.1 7fffee64f000-7fffee650000 r--p 00015000 fe:02 142309                     /lib64/libgcc_s.so.1 7fffee650000-7fffee651000 rw-p 00016000 fe:02 142309                     /lib64/libgcc_s.so.1 7fffee651000-7fffee652000 ---p 00000000 00:00 0  7fffee652000-7fffeee52000 rw-p 00000000 00:00 0  7fffeee52000-7ffff2e52000 rw-s 00000000 00:05 52696                      /memfd:pulseaudio (deleted) 7ffff2e52000-7ffff2e5a000 r-xp 00000000 fe:02 164287                     /usr/lib64/ao/plugins-4/libalsa.so 7ffff2e5a000-7ffff3059000 ---p 00008000 fe:02 164287                     /usr/lib64/ao/plugins-4/libalsa.so 7ffff3059000-7ffff305a000 r--p 00007000 fe:02 164287                     /usr/lib64/ao/plugins-4/libalsa.so 7ffff305a000-7ffff305b000 rw-p 00008000 fe:02 164287                     /usr/lib64/ao/plugins-4/libalsa.so 7ffff305b000-7ffff3087000 r-xp 00000000 fe:02 789884                     /usr/lib64/libvorbis.so.0.4.6 7ffff3087000-7ffff3287000 ---p 0002c000 fe:02 789884                     /usr/lib64/libvorbis.so.0.4.6 7ffff3287000-7ffff3288000 r--p 0002c000 fe:02 789884                     /usr/lib64/libvorbis.so.0.4.6 7ffff3288000-7ffff3289000 rw-p 0002d000 fe:02 789884                     /usr/lib64/libvorbis.so.0.4.6 7ffff3289000-7ffff328f000 r-xp 00000000 fe:02 789414                     /usr/lib64/libogg.so.0.8.0 7ffff328f000-7ffff348e000 ---p 00006000 fe:02 789414                     /usr/lib64/libogg.so.0.8.0 7ffff348e000-7ffff348f000 r--p 00005000 fe:02 789414                     /usr/lib64/libogg.so.0.8.0 7ffff348f000-7ffff3490000 rw-p 00006000 fe:02 789414                     /usr/lib64/libogg.so.0.8.0 7ffff3490000-7ffff34fe000 r-xp 00000000 fe:02 789400                     /usr/lib64/libpcre.so.1.2.7 7ffff34fe000-7ffff36fd000 ---p 0006e000 fe:02 789400                     /usr/lib64/libpcre.so.1.2.7 7ffff36fd000-7ffff36fe000 r--p 0006d000 fe:02 789400                     /usr/lib64/libpcre.so.1.2.7 7ffff36fe000-7ffff36ff000 rw-p 0006e000 fe:02 789400                     /usr/lib64/libpcre.so.1.2.7 7ffff36ff000-7ffff3716000 r-xp 00000000 fe:02 789325                     /usr/lib64/libspeex.so.1.5.1 7ffff3716000-7ffff3916000 ---p 00017000 fe:02 789325                     /usr/lib64/libspeex.so.1.5.1 7ffff3916000-7ffff3917000 r--p 00017000 fe:02 789325                     /usr/lib64/libspeex.so.1.5.1 7ffff3917000-7ffff3918000 rw-p 00018000 fe:02 789325                     /usr/lib64/libspeex.so.1.5.1 7ffff3918000-7ffff3bcb000 r-xp 00000000 fe:02 790204                     /usr/lib64/libvorbisenc.so.2.0.9 7ffff3bcb000-7ffff3dca000 ---p 002b3000 fe:02 790204                     /usr/lib64/libvorbisenc.so.2.0.9 7ffff3dca000-7ffff3de6000 r--p 002b2000 fe:02 790204                     /usr/lib64/libvorbisenc.so.2.0.9 7ffff3de6000-7ffff3de7000 rw-p 002ce000 fe:02 790204                     /usr/lib64/libvorbisenc.so.2.0.9 7ffff3de7000-7ffff3e1c000 r-xp 00000000 fe:02 789888                     /usr/lib64/libFLAC.so.8.3.0 7ffff3e1c000-7ffff401c000 ---p 00035000 fe:02 789888                     /usr/lib64/libFLAC.so.8.3.0 7ffff401c000-7ffff401d000 r--p 00035000 fe:02 789888                     /usr/lib64/libFLAC.so.8.3.0 7ffff401d000-7ffff401e000 rw-p 00036000 fe:02 789888                     /usr/lib64/libFLAC.so.8.3.0 7ffff401e000-7ffff4031000 r-xp 00000000 fe:02 789516                     /usr/lib64/libgpg-error.so.0.22.0 7ffff4031000-7ffff4231000 ---p 00013000 fe:02 789516                     /usr/lib64/libgpg-error.so.0.22.0 7ffff4231000-7ffff4232000 r--p 00013000 fe:02 789516                     /usr/lib64/libgpg-error.so.0.22.0 7ffff4232000-7ffff4233000 rw-p 00014000 fe:02 789516                     /usr/lib64/libgpg-error.so.0.22.0 7ffff4233000-7ffff430f000 r-xp 00000000 fe:02 789912                     /usr/lib64/libgcrypt.so.20.0.1 7ffff430f000-7ffff450f000 ---p 000dc000 fe:02 789912                     /usr/lib64/libgcrypt.so.20.0.1 7ffff450f000-7ffff4510000 r--p 000dc000 fe:02 789912                     /usr/lib64/libgcrypt.so.20.0.1 7ffff4510000-7ffff4519000 rw-p 000dd000 fe:02 789912                     /usr/lib64/libgcrypt.so.20.0.1 7ffff4519000-7ffff4540000 r-xp 00000000 fe:02 789463                     /usr/lib64/liblzma.so.5.2.2 7ffff4540000-7ffff4740000 ---p 00027000 fe:02 789463                     /usr/lib64/liblzma.so.5.2.2 7ffff4740000-7ffff4741000 r--p 00027000 fe:02 789463                     /usr/lib64/liblzma.so.5.2.2 7ffff4741000-7ffff4742000 rw-p 00028000 fe:02 789463                     /usr/lib64/liblzma.so.5.2.2 7ffff4742000-7ffff4756000 r-xp 00000000 fe:02 141840                     /lib64/libresolv-2.22.so 7ffff4756000-7ffff4955000 ---p 00014000 fe:02 141840                     /lib64/libresolv-2.22.so 7ffff4955000-7ffff4956000 r--p 00013000 fe:02 141840                     /lib64/libresolv-2.22.so 7ffff4956000-7ffff4957000 rw-p 00014000 fe:02 141840                     /lib64/libresolv-2.22.so 7ffff4957000-7ffff4959000 rw-p 00000000 00:00 0  7ffff4959000-7ffff495d000 r-xp 00000000 fe:02 142369                     /lib64/libcap.so.2.22 7ffff495d000-7ffff4b5c000 ---p 00004000 fe:02 142369                     /lib64/libcap.so.2.22 7ffff4b5c000-7ffff4b5d000 r--p 00003000 fe:02 142369                     /lib64/libcap.so.2.22 7ffff4b5d000-7ffff4b5e000 rw-p 00004000 fe:02 142369                     /lib64/libcap.so.2.22 7ffff4b5e000-7ffff4b81000 r-xp 00000000 fe:02 143185                     /lib64/libselinux.so.1 7ffff4b81000-7ffff4d80000 ---p 00023000 fe:02 143185                     /lib64/libselinux.so.1 7ffff4d80000-7ffff4d81000 r--p 00022000 fe:02 143185                     /lib64/libselinux.so.1 7ffff4d81000-7ffff4d82000 rw-p 00023000 fe:02 143185                     /lib64/libselinux.so.1 7ffff4d82000-7ffff4d84000 rw-p 00000000 00:00 0  7ffff4d84000-7ffff4d87000 r-xp 00000000 fe:02 789694                     /usr/lib64/libXau.so.6.0.0 7ffff4d87000-7ffff4f86000 ---p 00003000 fe:02 789694                     /usr/lib64/libXau.so.6.0.0 7ffff4f86000-7ffff4f87000 r--p 00002000 fe:02 789694                     /usr/lib64/libXau.so.6.0.0 7ffff4f87000-7ffff4f88000 rw-p 00003000 fe:02 789694                     /usr/lib64/libXau.so.6.0.0 7ffff4f88000-7ffff4fec000 r-xp 00000000 fe:02 790580                     /usr/lib64/libsndfile.so.1.0.25 7ffff4fec000-7ffff51ec000 ---p 00064000 fe:02 790580                     /usr/lib64/libsndfile.so.1.0.25 7ffff51ec000-7ffff51ee000 r--p 00064000 fe:02 790580                     /usr/lib64/libsndfile.so.1.0.25 7ffff51ee000-7ffff51ef000 rw-p 00066000 fe:02 790580                     /usr/lib64/libsndfile.so.1.0.25 7ffff51ef000-7ffff51f3000 rw-p 00000000 00:00 0  7ffff51f3000-7ffff5276000 r-xp 00000000 fe:02 790352                     /usr/lib64/libsystemd.so.0.13.0 7ffff5276000-7ffff5476000 ---p 00083000 fe:02 790352                     /usr/lib64/libsystemd.so.0.13.0 7ffff5476000-7ffff5479000 r--p 00083000 fe:02 790352                     /usr/lib64/libsystemd.so.0.13.0 7ffff5479000-7ffff547a000 rw-p 00086000 fe:02 790352                     /usr/lib64/libsystemd.so.0.13.0 7ffff547a000-7ffff5499000 r-xp 00000000 fe:02 789997                     /usr/lib64/libxcb.so.1.1.0 7ffff5499000-7ffff5698000 ---p 0001f000 fe:02 789997                     /usr/lib64/libxcb.so.1.1.0 7ffff5698000-7ffff5699000 r--p 0001e000 fe:02 789997                     /usr/lib64/libxcb.so.1.1.0 7ffff5699000-7ffff569a000 rw-p 0001f000 fe:02 789997                     /usr/lib64/libxcb.so.1.1.0 7ffff569a000-7ffff56e0000 r-xp 00000000 fe:02 142352                     /lib64/libdbus-1.so.3.8.14 7ffff56e0000-7ffff58df000 ---p 00046000 fe:02 142352                     /lib64/libdbus-1.so.3.8.14 7ffff58df000-7ffff58e0000 r--p 00045000 fe:02 142352                     /lib64/libdbus-1.so.3.8.14 7ffff58e0000-7ffff58e1000 rw-p 00046000 fe:02 142352                     /lib64/libdbus-1.so.3.8.14 7ffff58e1000-7ffff58eb000 r-xp 00000000 fe:02 789483                     /usr/lib64/libjson-c.so.2.0.1 7ffff58eb000-7ffff5aea000 ---p 0000a000 fe:02 789483                     /usr/lib64/libjson-c.so.2.0.1 7ffff5aea000-7ffff5aeb000 r--p 00009000 fe:02 789483                     /usr/lib64/libjson-c.so.2.0.1 7ffff5aeb000-7ffff5aec000 rw-p 0000a000 fe:02 789483                     /usr/lib64/libjson-c.so.2.0.1 7ffff5aec000-7ffff5b68000 r-xp 00000000 fe:02 790869                     /usr/lib64/pulseaudio/libpulsecommon-9.0.so 7ffff5b68000-7ffff5d67000 ---p 0007c000 fe:02 790869                     /usr/lib64/pulseaudio/libpulsecommon-9.0.so 7ffff5d67000-7ffff5d68000 r--p 0007b000 fe:02 790869                     /usr/lib64/pulseaudio/libpulsecommon-9.0.so 7ffff5d68000-7ffff5d6a000 rw-p 0007c000 fe:02 790869                     /usr/lib64/pulseaudio/libpulsecommon-9.0.so 7ffff5d6a000-7ffff5db6000 r-xp 00000000 fe:02 790867                     /usr/lib64/libpulse.so.0.20.0 7ffff5db6000-7ffff5fb6000 ---p 0004c000 fe:02 790867                     /usr/lib64/libpulse.so.0.20.0 7ffff5fb6000-7ffff5fb7000 r--p 0004c000 fe:02 790867                     /usr/lib64/libpulse.so.0.20.0 7ffff5fb7000-7ffff5fb8000 rw-p 0004d000 fe:02 790867                     /usr/lib64/libpulse.so.0.20.0 7ffff5fb8000-7ffff5fbb000 r-xp 00000000 fe:02 790865                     /usr/lib64/libpulse-simple.so.0.1.0 7ffff5fbb000-7ffff61bb000 ---p 00003000 fe:02 790865                     /usr/lib64/libpulse-simple.so.0.1.0 7ffff61bb000-7ffff61bc000 r--p 00003000 fe:02 790865                     /usr/lib64/libpulse-simple.so.0.1.0 7ffff61bc000-7ffff61bd000 rw-p 00004000 fe:02 790865                     /usr/lib64/libpulse-simple.so.0.1.0 7ffff61bd000-7ffff61c0000 r-xp 00000000 fe:02 164289                     /usr/lib64/ao/plugins-4/libpulse.so 7ffff61c0000-7ffff63bf000 ---p 00003000 fe:02 164289                     /usr/lib64/ao/plugins-4/libpulse.so 7ffff63bf000-7ffff63c0000 r--p 00002000 fe:02 164289                     /usr/lib64/ao/plugins-4/libpulse.so 7ffff63c0000-7ffff63c1000 rw-p 00003000 fe:02 164289                     /usr/lib64/ao/plugins-4/libpulse.so 7ffff63c1000-7ffff63c3000 r-xp 00000000 fe:02 164288                     /usr/lib64/ao/plugins-4/liboss.so 7ffff63c3000-7ffff65c3000 ---p 00002000 fe:02 164288                     /usr/lib64/ao/plugins-4/liboss.so 7ffff65c3000-7ffff65c4000 r--p 00002000 fe:02 164288                     /usr/lib64/ao/plugins-4/liboss.so 7ffff65c4000-7ffff65c5000 rw-p 00003000 fe:02 164288                     /usr/lib64/ao/plugins-4/liboss.so 7ffff65c5000-7ffff65cc000 r-xp 00000000 fe:02 141842                     /lib64/librt-2.22.so 7ffff65cc000-7ffff67cb000 ---p 00007000 fe:02 141842                     /lib64/librt-2.22.so 7ffff67cb000-7ffff67cc000 r--p 00006000 fe:02 141842                     /lib64/librt-2.22.so 7ffff67cc000-7ffff67cd000 rw-p 00007000 fe:02 141842                     /lib64/librt-2.22.so 7ffff67cd000-7ffff6966000 r-xp 00000000 fe:02 141808                     /lib64/libc-2.22.so 7ffff6966000-7ffff6b66000 ---p 00199000 fe:02 141808                     /lib64/libc-2.22.so 7ffff6b66000-7ffff6b6a000 r--p 00199000 fe:02 141808                     /lib64/libc-2.22.so 7ffff6b6a000-7ffff6b6c000 rw-p 0019d000 fe:02 141808                     /lib64/libc-2.22.so 7ffff6b6c000-7ffff6b70000 rw-p 00000000 00:00 0  7ffff6b70000-7ffff6c6c000 r-xp 00000000 fe:02 141816                     /lib64/libm-2.22.so 7ffff6c6c000-7ffff6e6b000 ---p 000fc000 fe:02 141816                     /lib64/libm-2.22.so 7ffff6e6b000-7ffff6e6c000 r--p 000fb000 fe:02 141816                     /lib64/libm-2.22.so 7ffff6e6c000-7ffff6e6d000 rw-p 000fc000 fe:02 141816                     /lib64/libm-2.22.so 7ffff6e6d000-7ffff6e6f000 r-xp 00000000 fe:02 141814                     /lib64/libdl-2.22.so 7ffff6e6f000-7ffff706f000 ---p 00002000 fe:02 141814                     /lib64/libdl-2.22.so 7ffff706f000-7ffff7070000 r--p 00002000 fe:02 141814                     /lib64/libdl-2.22.so 7ffff7070000-7ffff7071000 rw-p 00003000 fe:02 141814                     /lib64/libdl-2.22.so 7ffff7071000-7ffff7079000 r-xp 00000000 fe:02 791278                     /usr/lib64/libao.so.4.1.0 7ffff7079000-7ffff7278000 ---p 00008000 fe:02 791278                     /usr/lib64/libao.so.4.1.0 7ffff7278000-7ffff7279000 r--p 00007000 fe:02 791278                     /usr/lib64/libao.so.4.1.0 7ffff7279000-7ffff727a000 rw-p 00008000 fe:02 791278                     /usr/lib64/libao.so.4.1.0 7ffff727a000-7ffff7299000 r-xp 00000000 fe:02 798144                     /usr/lib64/libmad.so.0.2.1 7ffff7299000-7ffff7498000 ---p 0001f000 fe:02 798144                     /usr/lib64/libmad.so.0.2.1 7ffff7498000-7ffff7499000 r--p 0001e000 fe:02 798144                     /usr/lib64/libmad.so.0.2.1 7ffff7499000-7ffff749a000 rw-p 0001f000 fe:02 798144                     /usr/lib64/libmad.so.0.2.1 Thread 1 "mpg321" received signal SIGABRT, Aborted. 0x00007ffff68018d7 in raise () from /lib64/libc.so.6 Missing separate debuginfos, use: zypper install libmad0-debuginfo-0.15.1b-2.1.x86_64 (gdb) bt #0  0x00007ffff68018d7 in raise () from /lib64/libc.so.6 #1  0x00007ffff6802caa in abort () from /lib64/libc.so.6 #2  0x00007ffff683f1b4 in __libc_message () from /lib64/libc.so.6 #3  0x00007ffff6844706 in malloc_printerr () from /lib64/libc.so.6 #4  0x00007ffff6845453 in _int_free () from /lib64/libc.so.6 #5  0x00007ffff72806be in mad_decoder_run () from /usr/lib64/libmad.so.0 #6  0x0000000000403fcd in main (argc=<optimized out>, argv=<optimized out>) at mpg321.c:1092  Someone in the Debian community also hit on this already:  References: <https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=870608> ``` [Comment 1](show_bug.cgi?id=1081784#c1)  Karol Babioch   2018-02-21 13:50:17 UTC  ``` Duplicate  *** This bug has been marked as a duplicate of [bug 1082025](show_bug.cgi?id=1082025 "RESOLVED INVALID - VUL-1: CVE-2018-7263 libmad: Double-free in the mad_decoder_run() function") *** ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1081784)
* - [XML](show_bug.cgi?ctype=xml&id=1081784)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1081784)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1081784)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from bugs.debian.org_551dbeab_20250125_082325.html ===

# Debian Bug report logs - #870608 CVE-2017-11548

[![version graph](version.cgi?collapse=1;width=2;package=src%3Alibao;height=2;found=libao%2F1.2.0-1;absolute=0)](version.cgi?found=libao%2F1.2.0-1;absolute=0;info=1;package=src%3Alibao;collapse=1)

Package:
[src:libao](pkgreport.cgi?src=libao);
Maintainer for [src:libao](pkgreport.cgi?src=libao) is [Ron Lee <ron@debian.org>](pkgreport.cgi?maint=ron%40debian.org);

Reported by: [Moritz Muehlenhoff <jmm@debian.org>](pkgreport.cgi?submitter=jmm%40debian.org)

Date: Thu, 3 Aug 2017 11:15:01 UTC

Severity: important

Tags: security, upstream

Found in version libao/1.2.0-1

Reply or subscribe to this bug.

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=870608;mbox=yes), [status mbox](bugreport.cgi?bug=870608;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=870608;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Ron Lee <ron@debian.org>`:

`Bug#870608`; Package `src:libao`.
(Thu, 03 Aug 2017 11:15:04 GMT) ([full text](bugreport.cgi?bug=870608;msg=2), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Moritz Muehlenhoff <jmm@debian.org>`:

New Bug report received and forwarded. Copy sent to `team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Ron Lee <ron@debian.org>`.
(Thu, 03 Aug 2017 11:15:04 GMT) ([full text](bugreport.cgi?bug=870608;msg=4), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=870608;msg=5), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=jmm%40debian.org)
From: Moritz Muehlenhoff <jmm@debian.org>
To: Debian Bug Tracking System <submit@bugs.debian.org>
Subject: CVE-2017-11548
Date: Thu, 03 Aug 2017 13:11:07 +0200
```
Source: libao
Severity: important
Tags: security

This was assigned [CVE-2017-11548](https://security-tracker.debian.org/tracker/CVE-2017-11548):
<http://seclists.org/fulldisclosure/2017/Jul/84>

Cheers,
        Moritz

```

---

**Added tag(s) upstream.**
Request was from `Salvatore Bonaccorso <carnil@debian.org>`
to `control@bugs.debian.org`.
(Thu, 03 Aug 2017 11:39:06 GMT) ([full text](bugreport.cgi?bug=870608;msg=7), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=7), [link](#6)).

---

**Marked as found in versions libao/1.2.0-1.**
Request was from `Salvatore Bonaccorso <carnil@debian.org>`
to `control@bugs.debian.org`.
(Thu, 03 Aug 2017 11:39:06 GMT) ([full text](bugreport.cgi?bug=870608;msg=9), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=9), [link](#8)).

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Ron Lee <ron@debian.org>`:

`Bug#870608`; Package `src:libao`.
(Sat, 13 Jan 2018 08:00:06 GMT) ([full text](bugreport.cgi?bug=870608;msg=11), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=11), [link](#10)).

---

**Acknowledgement sent**
to `Ron <ron@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Ron Lee <ron@debian.org>`.
(Sat, 13 Jan 2018 08:00:06 GMT) ([full text](bugreport.cgi?bug=870608;msg=13), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=13), [link](#12)).

---

[Message #14](#14) received at 870608@bugs.debian.org ([full text](bugreport.cgi?bug=870608;msg=14), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=14), reply):

![](/cgi-bin/libravatar.cgi?email=ron%40debian.org)
From: Ron <ron@debian.org>
To: Moritz Muehlenhoff <jmm@debian.org>, 870608@bugs.debian.org
Subject: Re: Bug#870608: CVE-2017-11548
Date: Sat, 13 Jan 2018 18:20:39 +1030
```
Control: clone -1 -2
Control: reassign -2 libmad 0.15.1b-8
Control: block -1 by -2

On Thu, Aug 03, 2017 at 01:11:07PM +0200, Moritz Muehlenhoff wrote:
> Source: libao
> Severity: important
> Tags: security
>
> This was assigned [CVE-2017-11548](https://security-tracker.debian.org/tracker/CVE-2017-11548):
> <http://seclists.org/fulldisclosure/2017/Jul/84>

FWIW wrt libao, I can't reproduce what was reported there on Stretch.
The 'crasher' example does still crash, but it blows up in libmad,
not in libao ...

I don't see any commit in the upstream libao repo which would have
addressed this, so I thought I'd take a quick look myself while I'm
prepping a new upload.

If I believe the backtrace from the original report - then at first
blush by eye, the worst I can see this doing in libao is getting it
to pass calloc some crazy large request to allocate - and then calloc
faulting instead of just failing ...  which seems like a rather suspect
outcome to see in its own right.  But there's not enough detail in that
backtrace to see what was really passed where.

In theory libao might be able to do some stronger/safer checking there,
but in that report we still have:

 caller passes it junk -> large calloc -> libc segfaults

And since that code is managing allocations for channel mapping, and
with things like ambisonics there could be an arbitrarily large number
of channels to map ...  putting some arbitrary limit on the size
passed to calloc in libao doesn't quite seem like a "solution" either.

So while libao might be able to do something more to muffle this (and
there is room for improvement in that code - it's not actually checking
to see if calloc failed everywhere that it probably should in a maximum
paranoia world, but that's not the bug which this example file appears
 to have hit), I'm not really seeing a "bug" in libao which this example
 demonstrates, let alone a real security issue resulting from it.

Which means I'm cloning it to libmad, since the next step here seems
to fairly clearly be fixing whatever currently explodes in it with
this example file - and when that is done, we can have another look
in that light as to whether libao ought to be doing something more to
protect its callers from themselves too ...

I won't close this copy for now, since I haven't fully analysed this
all the way down (and libmad doesn't have -dbg{,syms} available, so I
am going to stop here today).  Below is what I'm currently seeing on
Stretch when running the example given.

  Cheers,
  Ron

$ gdb mpg321
(gdb) r libao_1.2.0_memory_corruption.mp3
Starting program: /usr/bin/mpg321 libao_1.2.0_memory_corruption.mp3
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2, and 3.
Version 0.3.2-1 (2012/03/25). Written and copyrights by Joe Drew,
now maintained by Nanakos Chrysostomos and others.
Uses code from various people. See 'README' for more!
THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!

Playing MPEG stream from libao_1.2.0_memory_corruption.mp3 ...
MPEG 1.0 layer III, 192 kbit/s, 44100 Hz mono
*** Error in `/usr/bin/mpg321': double free or corruption (out): 0x0000000000623370 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x70bcb)[0x7ffff681abcb]
/lib/x86_64-linux-gnu/libc.so.6(+0x76f96)[0x7ffff6820f96]
/lib/x86_64-linux-gnu/libc.so.6(+0x777de)[0x7ffff68217de]
/usr/lib/x86_64-linux-gnu/libmad.so.0(mad_decoder_run+0x3b)[0x7ffff725ff2b]
/usr/bin/mpg321[0x403f61]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf1)[0x7ffff67ca2b1]
/usr/bin/mpg321[0x404e21]

Program received signal SIGABRT, Aborted.
__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51
51	../sysdeps/unix/sysv/linux/raise.c: No such file or directory.
(gdb) bt
#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51
#1  0x00007ffff67de3fa in __GI_abort () at abort.c:89
#2  0x00007ffff681abd0 in __libc_message (do_abort=do_abort@entry=2, fmt=fmt@entry=0x7ffff690fdd0 "*** Error in `%s': %s: 0x%s ***\n")
    at ../sysdeps/posix/libc_fatal.c:175
#3  0x00007ffff6820f96 in malloc_printerr (action=3, str=0x7ffff690fe98 "double free or corruption (out)", ptr=<optimized out>, ar_ptr=<optimized out>)
    at malloc.c:5049
#4  0x00007ffff68217de in _int_free (av=0x7ffff6b43b00 <main_arena>, p=0x623360, have_lock=0) at malloc.c:3905
#5  0x00007ffff725ff2b in mad_decoder_run () from /usr/lib/x86_64-linux-gnu/libmad.so.0
#6  0x0000000000403f61 in ?? ()
#7  0x00007ffff67ca2b1 in __libc_start_main (main=0x4037f0, argc=2, argv=0x7fffffffe648, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>,
    stack_end=0x7fffffffe638) at ../csu/libc-start.c:291
#8  0x0000000000404e21 in ?? ()
#9  0x00007fffffffe638 in ?? ()
#10 0x000000000000001c in ?? ()
#11 0x0000000000000002 in ?? ()
#12 0x00007fffffffe863 in ?? ()
#13 0x00007fffffffe873 in ?? ()
#14 0x0000000000000000 in ?? ()

```

---

**Bug [870608](bugreport.cgi?bug=870608) cloned as bug [887057](bugreport.cgi?bug=887057)**
Request was from `Ron <ron@debian.org>`
to `870608-submit@bugs.debian.org`.
(Sat, 13 Jan 2018 08:00:06 GMT) ([full text](bugreport.cgi?bug=870608;msg=16), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=16), [link](#15)).

---

**Added blocking bug(s) of [870608](bugreport.cgi?bug=870608): [887057](bugreport.cgi?bug=887057)**
Request was from `Ron <ron@debian.org>`
to `870608-submit@bugs.debian.org`.
(Sat, 13 Jan 2018 08:00:09 GMT) ([full text](bugreport.cgi?bug=870608;msg=18), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=18), [link](#17)).

---

**Bug reassigned from package '[src:libao](pkgreport.cgi?src=libao)' to '[mpg321](pkgreport.cgi?package=mpg321)'.**
Request was from `Kurt Roeckx <kurt@roeckx.be>`
to `control@bugs.debian.org`.
(Sat, 13 Jan 2018 10:57:03 GMT) ([full text](bugreport.cgi?bug=870608;msg=20), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=20), [link](#19)).

---

**No longer marked as found in versions libao/1.2.0-1.**
Request was from `Kurt Roeckx <kurt@roeckx.be>`
to `control@bugs.debian.org`.
(Sat, 13 Jan 2018 10:57:04 GMT) ([full text](bugreport.cgi?bug=870608;msg=22), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=22), [link](#21)).

---

**Bug reassigned from package '[mpg321](pkgreport.cgi?package=mpg321)' to '[src:libao](pkgreport.cgi?src=libao)'.**
Request was from `kurt@roeckx.be (Kurt Roeckx)`
to `control@bugs.debian.org`.
(Sat, 13 Jan 2018 11:03:05 GMT) ([full text](bugreport.cgi?bug=870608;msg=24), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=24), [link](#23)).

---

**Marked as found in versions libao/1.2.0-1.**
Request was from `kurt@roeckx.be (Kurt Roeckx)`
to `control@bugs.debian.org`.
(Sat, 13 Jan 2018 11:03:06 GMT) ([full text](bugreport.cgi?bug=870608;msg=26), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=26), [link](#25)).

---

**Added blocking bug(s) of [870608](bugreport.cgi?bug=870608): [870406](bugreport.cgi?bug=870406)**
Request was from `kurt@roeckx.be (Kurt Roeckx)`
to `control@bugs.debian.org`.
(Sat, 13 Jan 2018 11:03:08 GMT) ([full text](bugreport.cgi?bug=870608;msg=28), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=28), [link](#27)).

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Ron Lee <ron@debian.org>`:

`Bug#870608`; Package `src:libao`.
(Wed, 06 Mar 2019 02:18:04 GMT) ([full text](bugreport.cgi?bug=870608;msg=30), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=30), [link](#29)).

---

**Acknowledgement sent**
to `Elimar Riesebieter <riesebie@lxtec.de>`:

Extra info received and forwarded to list. Copy sent to `Ron Lee <ron@debian.org>`.
(Wed, 06 Mar 2019 02:18:04 GMT) ([full text](bugreport.cgi?bug=870608;msg=32), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=32), [link](#31)).

---

[Message #33](#33) received at 870608@bugs.debian.org ([full text](bugreport.cgi?bug=870608;msg=33), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=33), reply):

![](/cgi-bin/libravatar.cgi?email=riesebie%40lxtec.de)
From: Elimar Riesebieter <riesebie@lxtec.de>
To: 870608@bugs.debian.org
Cc: 870406@bugs.debian.org
Subject: There is a possible patch available
Date: Wed, 6 Mar 2019 03:15:40 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=870608;msg=33) (text/plain, inline)]
```
```
Hi all,

did someone checked

<https://git.xiph.org/?p=libao.git;a=commit;h=d5221655dfd1a2156aa6be83b5aadea7c1e0f5bd>

?

Elimar
--
  We all know Linux is great... it does infinite loops in 5 seconds.
        -Linus Torvalds

```
```
[[signature.asc](bugreport.cgi?att=1;bug=870608;filename=signature.asc;msg=33) (application/pgp-signature, inline)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Ron Lee <ron@debian.org>`:

`Bug#870608`; Package `src:libao`.
(Thu, 07 Mar 2019 05:27:05 GMT) ([full text](bugreport.cgi?bug=870608;msg=35), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=35), [link](#34)).

---

**Acknowledgement sent**
to `Ron <ron@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Ron Lee <ron@debian.org>`.
(Thu, 07 Mar 2019 05:27:05 GMT) ([full text](bugreport.cgi?bug=870608;msg=37), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=37), [link](#36)).

---

[Message #38](#38) received at 870608@bugs.debian.org ([full text](bugreport.cgi?bug=870608;msg=38), [mbox](bugreport.cgi?bug=870608;mbox=yes;msg=38), reply):

![](/cgi-bin/libravatar.cgi?email=ron%40debian.org)
From: Ron <ron@debian.org>
To: Elimar Riesebieter <riesebie@lxtec.de>, 870608@bugs.debian.org
Cc: 870406@bugs.debian.org
Subject: Re: Bug#870608: There is a possible patch available
Date: Thu, 7 Mar 2019 15:49:40 +1030
```
On Wed, Mar 06, 2019 at 03:15:40AM +0100, Elimar Riesebieter wrote:
> Hi all,
>
> did someone checked
>
> <https://git.xiph.org/?p=libao.git;a=commit;h=d5221655dfd1a2156aa6be83b5aadea7c1e0f5bd>

You mean the commit which has :?

 author    Ron <ron@debian.org>  Sat, 13 Jan 2018 09:49:20 +0000 (20:19 +1030)
 committer Ron <ron@debian.org>  Sat, 13 Jan 2018 15:19:59 +0000 (01:49 +1030)

It was a while ago now, but yeah, I *probably* looked at that one ...

For the people on the other bug(s), the analysis behind that is here:
<https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=870608#14>

And the tldr version is, you can't punt this back to libao, and that
patch doesn't fix your bug.  AFAICS there is no bug in libao detected
by this "CVE", its test case explodes in libmad, not libao - and the
patch above just fixes some other potential issues I saw by eye while
auditing libao enough to give the analysis above.

And since Kurt seems to have done the same for libmad in
<https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=870406#25>

It looks like the ball is squarely in the court of whoever cares about
mpg321 to do some debugging next and find what it's doing wrong.  And
then _possibly_ push back if some flaw in a support library really is
exacerbating the mistake it makes.

  Cheers,
  Ron

```

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=870608).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 08:23:24 2025;
Machine Name:
bembo

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.


