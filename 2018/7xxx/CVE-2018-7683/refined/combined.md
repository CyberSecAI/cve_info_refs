=== Content from help.serena.com_1060ed80_20250124_142115.html ===

Turn Off Tabs

Turn On Tabs

SBM 11.4 Release Notes
This file contains known issues and other important information for Solutions BusinessÂ Manager (SBM). This file also contains information that might not be available in other SBM documentation. Last updated on
2018-06-20.

# Contents

* [About this Release](#a36)
* [What's New](#a37)
* [Additional Changes](#a38)
  + [End-user Changes](#a39)
  + [Reporting Changes](#a40)
  + [Administrator Changes](#a41)
  + [Installation and Configuration Changes](#a42)
  + [SBM Composer
    Changes](#a43)
  + [Orchestration Changes](#a44)
  + [Miscellaneous Changes](#a45)
  + [Web Services Changes](#a46)
  + [Documentation Changes](#a47)
* [Upgrades from 11.X](#a48)
* [Upgrades from 10.1.X](#a49)
* [Fixed Issues](#a50)
* [Known Issues](#a51)
  + [Installation and Configuration Issues](#a52)
  + [Administrator Issues](#a53)
* [Legal Notice](#a54)

## About this Release

SBM
11.4 is the version that immediately follows
SBM
11.3.1. All of the features, changes, and fixes that were made in
SBM
11.3.1 can be found in
SBM
11.4.
SBM
11.4 supports new installationsâyou do not need to install a previous version
of
SBM
before installing this version.

If this is a new installation, download
SBM
from the
[Support and Services page](https://www.microfocus.com/support-and-services/#SBM),
and then follow the instructions in the
SBM Installation and Configuration
Guide, which
is available on the
[Documentation Center](http://help.serena.com/doc_center/doc_center.html#sbm).

### Important Notes

Note the following important information
about this release:

* SBM
  has been rebrandedâSerena Business Manager (SBM) is now
  **Solutions Business Manager (SBM)**. Serena Work Center is now
  **SBM Work Center**. A new logo appears in both SBM Work Center
  and
  SBM User Workspace.
* **SBM
  11.4 requires
  License Manager
  2.2. You must upgrade to version 2.2 before you upgrade
  SBM.**
* **Solution releases prior to and including Service Manager /
  Request Center 5.2 and Release Control 6.0 will not run properly on
  SBM
  11.4 and these versions are not supported.**

  You will need to upgrade each solution to newer, compatible
  versions before you can use them.
* SBM is now
  certified against Internet Protocol version 4 (IPv4) and Internet Protocol
  version 6 (IPv6). Note that
  SBM requires
  that both IPv4 and IPv6 stacks are present on each server, though IPv4 can be
  disabled.
* This release also addresses the following potential security
  vulnerabilities: CVE-2018-7679 (Remote Code Execution), CVE-2018-7680
  (Reflected cross-site scripting), CVE-2018-7681 (Persistent cross site
  scripting), CVE-2018-7682 (Cross-site request forgery), CVE-2018-7683
  (Sensitive information might be leaked in server log files). For more
  information, please refer to the MITE website (<http://cve.mitre.org/cve/search_cve_list.html>) or the
  **SBM
  11.4 Security Bulletin** (available
  [here](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142001)).
  Special thanks goes to Alessio Sergi of Verizon Enterprise Solutions for
  responsibly disclosing these CVEs.
* SBM
  11.4 is available in U.S. English only.

### Supported Upgrade Paths

Upgrades to
SBM
11.4 are only supported from
SBM
10.1.5.X or higher. Refer to the following list for guidance on upgrading from
your current version.

* **Upgrading from 11.X or later**

  If you are upgrading from 11.X or later, refer to
  [Upgrades from 11.X](#NewUpgradeNotes).
* **Upgrading from 10.1.5.X**

  If you are upgrading from any version in the 10.1.5.X line, refer
  to
  [Upgrades from 10.1.X](#OldUpgradeNotes).
* **Upgrading from versions of
  SBM
  prior to 10.1.5.X**

  If you are upgrading from 10.1.X, upgrade to 10.1.5.X first, and
  then upgrade to 11.4.

  If you are upgrading from 2009 R4, you can upgrade to any version
  between 10.1.5.X and 11.0.1.1 before you upgrade to 11.4. Use the upgrade
  instructions in the corresponding readme for the first upgrade, and then
  upgrade to 11.4 using the instructions in either
  [Upgrades from 10.1.X](#OldUpgradeNotes) or
  [Upgrades from 11.X](#NewUpgradeNotes),
  depending on the version you have after the last upgrade.

  If you are upgrading from a version prior to 2009 R4, contact
  Support to obtain the
  SBM
  10.1.5.4 installer, and then follow the upgrade instructions in solution
  [S138037](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S138037) to upgrade to 10.1.5.4. After you
  successfully upgrade to 10.1.5.4, you can upgrade to
  SBM
  11.4 using the instructions in
  [Upgrades from 10.1.X](#OldUpgradeNotes).
* **Upgrading from TeamTrack 6.6.1.X**

  If you are upgrading from TeamTrack 6.6.1.X, follow the
  instructions in the
  Moving to SBM
  guide (available in the
  **SBM
  Documentation Set**.zip on the
  [Documentation Center](http://help.serena.com/doc_center/doc_center.html#sbm)) to upgrade to
  SBM
  10.1.5.4 first (which you can obtain from Support). In addition refer to
  solution
  [S137372](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S137372) to learn about the upgrade
  preparation utility. After you have upgraded TeamTrack to
  SBM
  10.1.5.4, follow the instructions in
  [Upgrades from 10.1.X](#OldUpgradeNotes) to
  upgrade to
  SBM
  11.4.
* **Upgrading from Tracker**

  For information on migrating your Tracker data to
  SBM,
  refer to the "Migrating Tracker Data to SBM" solution ([S138468](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S138468)).

### Build Numbers

The following component build numbers apply to this version:

* **SBM User Workspace**
  and
  **SBM Work Center**:
  11.04.00.00.1285 (Build 728)
* **SBM Composer**:
  11.4 (Build 0352)
* **SBM System Administrator
  and
  SBM Application Administrator**:
  11.04.00.00.1285 (Build 728)
* **SBM Application
  Repository**:
  11.04.00.00.1258 (Build 578)
* **SBM Configurator**:
  11.04.00.00.342
* **Database version**: 1140000059
* **Documentation**: English â 11.4 |
  Japanese â 2009 R4.01 (translated content applies to SBM 2009 R4.01)

### Helpful Links

[Documentation Center](http://help.serena.com/doc_center/doc_center.html#sbm)

[SBM 11.3.1 Release Notes](http://help.serena.com/doc_center/sbm/ver11_3_1/sbm_release_notes.htm)

[Supported Platforms](https://www.microfocus.com/support-and-services/#SBM)

[Third-Party Tools](https://supportline.microfocus.com/licensing/attributionreport.aspx)

[Statement of Direction for SBM User
Workspace](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142193)

[Statement of Direction for 32-bit SBM
Clients](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142192)

### Contact Us

For specific product issues, contact Support at
<https://www.microfocus.com/support-and-services/#SBM>.

Additional technical information or advice is available from several
sources:

* Product documentation, Knowledge Base articles, and videos:
  <https://www.microfocus.com/support-and-services/#SBM>
* The Community pages:
  <https://www.microfocus.com/communities/>

## What's New

The following features have been added in this release.

* [New
  SBM Application Administrator
  User Interface](#a6)
* [New Scheduler Feature in
  Application Administrator](#a7)
* [Show/Hide
  Work Center
  Side Menu Categories](#a8)
* [Improved Runtime Statistics](#a9)
* [Custom Forms for Anonymous Submit](#a10)
* [Work Center
  Search Settings](#a11)
* [Option to Promote
  Work Center
  Shared Views](#a12)
* [Call SBM ModScript from an Orchestration](#a13)

### New SBM Application Administrator User Interface

The
SBM Application Administrator
user interface has been updated and improved. The new interface leverages HTML5
functionality that results in an improved user experience for administrators.

Functionality remains largely the same, with notable changes listed
below:

* Improved navigationâthe categories that appear on the portal page
  are now always accessible throughout
  Application Administrator
  via the top toolbar.
* Direct access to
  **SBM Analytics** and
  **Runtime Statistics** from the portal page (under
  More).
* Projects are displayed in a tree view for easier access.
* Fewer clicksâyou can now click on a project or user name to view
  details instead of selecting an entry and then clicking
  Details.
* Updated color scheme and modern styles.

### New Scheduler Feature in Application Administrator

The new
Scheduler feature enables administrators to
schedule jobs to be performed on a specific date and time; on a daily, weekly,
monthly, or yearly basis; or on an advanced recurring basis via a cron
expression. The available jobs that you can schedule include:

* Run Script â Runs an
  SBM ModScript
  or
  SBM AppScript
* Run Web Service â Runs an
  Application Engine
  Web service
* Send Email â Sends an e-mail that you draft
* Call REST â Executes a REST service call using a data source
  defined in
  SBM Composer
* Raise Event â Executes an orchestration workflow by raising an
  event

### Show/Hide Work Center Side Menu Categories

Administrators can now specify which categories are displayed or
hidden in the
Work Center
side menu for users. Administrators can set this globally via
**Work Center
Settings** in
Application Administrator
and override the global setting for users and groups individually. Users with
the
Modify Side Menu Category Visibility privilege
can manage which categories appear in their side menus via the
Side Menu Categories option under
Settings in
Work Center.

### Improved Runtime Statistics

Several new report types have been added to the
**Runtime Statistics** page in
Application Administrator.
These new reports provide usage statistics for
**Applications**,
**Orchestrations**, and
**Reports** for a given time period including:

* Total application access count, total application usage duration,
  and total application access count by distinct user.
* Which applications have the highest access count or usage duration.
* Which products have the highest orchestration execution count or
  execution duration.
* Which orchestrations have the highest orchestration execution count
  or execution duration.
* Which applications have the highest report run count or report
  duration.
* Which reports have the highest run count or duration.
* Which users have the highest application access count,
  orchestration execution count, or report run count.
* Which users are responsible for the most application usage
  duration, orchestration execution duration, or report duration.

### Custom Forms for Anonymous Submit

You can now specify a custom form for anonymous
submit on the
Forms tab of the workflow Property Editor. This
enables you to use features such as form actions and JavaScript to make your
form more interoperable.

As with quick forms, anonymous users can only view fields in the
Standard Fields section. They can add file and
URL attachments and notes to items while they are submitting them. After they
submit an item, however, they can no longer view it or any other part of
SBM.

### Work Center Search Settings

Users can now select which work item fields are
displayed in
Work Center
search results. Users can select these fields by clicking the new
Settings button on the search page or from the
Search tab in the
User Settings menu.

### Option to Promote Work Center Shared Views

When promoting process apps, you can now choose to
include or exclude
Work Center
shared views (dashboard, activity, calendar, backlog, and Kanban) and their
associated public feeds. In previous releases, these views and feeds were
automatically promoted.

### Call SBM ModScript from an Orchestration

You can use the new RunModScript call (available in
sbmappservices72)
from a
Service step in an orchestration to execute
SBM ModScript.
This enables the
Orchestration Engine
to invoke external commands via the command-line. For example, in SBM Composer
you can add a ModScript that runs a batch file, and then call it from a
Service step in your orchestration.

## Additional Changes

The following sections describe additional
features that have been changed or added to this release.

* [End-user Changes](#ConceptTemplate)
* [Reporting Changes](#ReportingChanges)
* [Administrator Changes](#MashupAdministratorChanges)
* [Installation and Configuration Changes](#InstallationChanges)
* [SBM Composer
  Changes](#MashupComposerChanges)
* [Orchestration Changes](#OrchestrationChanges)
* [Miscellaneous Changes](#MiscellaneousChanges)
* [Web Services Changes](#WebServicesChanges)
* [Documentation Changes](#DocChanges)
### End-user Changes

#### SBM Work Center Changes

* **Archived Items Search**

  Users can now search for archived items by
  changing the
  Work Center
  search context to
  Archive.
* **Search for Accepted Items and Candidates in Backlog Views**

  Users can now search for specific items by ID,
  Title, or Description in the
  Accepted and
  Candidates lists in a Backlog view.
* **Appears on Searches for this Table**

  When **Appears on Searches for this Table** is selected on a field in SBM Composer, the field is added to the Work Center search index, which enables uses to search for work items using values in the field.

#### SBM User Workspace Changes

* **Spell Check Removed**

  The spell check feature that was previously
  available when HTML5 features were disabled in
  SBM
  has been removed. In its place, users can take advantage of the native spell
  check features that are provided by the modern browsers that are supported with
  SBM.

### Reporting Changes

#### Report Improvements

* **Report Names Used for Exported Excel File Names**

  When you export a report to Microsoft Excel, the
  default file name is now the report name, with underscores (`_`)
  replacing any invalid characters (`/ \ ? * " : < > |`). In
  previous releases, the exported file name was always
  *tmtrack.xlsx*.
* **Option to Display Graphical Reports as 3D**

  When you create a Distribution, Duration, or
  Trend report, you can now specify the report to be displayed as 3D. By default,
  the report is displayed as 2D.
* **Support for
  *Multi-* Fields in Advanced Distribution Reports**

  You can now display
  *Multi-Selection*,
  *Multi-Relational*, and
  *Multi-User* fields in Advanced Distribution reports. These
  field types are available in the
  Group Rows by field on the Content tab of
  the report.
* **Improvements in Advanced Reports**
  + The field options described in
    TS\_FIELDS.TS\_OPTIONS are now available for use in the XML
    `<field>` definition in Advanced Reports.
    This includes the ability to render HTML in text memo fields.
  + Support for
    *Multi-User* and
    *Binary/Trinary* field types has been added.

  For details on creating Advanced Reports, see solution
  [S141342](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141342).

### Administrator Changes

#### SBM Application Administrator Changes

* **Global Link Type for Notifications**

  In
  Application Administrator,
  administrators can now globally define the link type that appears in all
  notifications. This makes it easier to update the link type that appears in
  your existing notifications if the majority of your users are switching from
  SBM User Workspace
  to
  SBM Work Center.

  Note: You can override this setting by editing a notification and
  changing the
  Link Type value there. However, if you set
  overrides on specific notifications and you set a value (or confirm a value) in
  the global
  Link Type field, it is applied to all
  notifications, including those that were overridden. Therefore, use caution
  when applying the global link type.
* **Filter Notifications by SLA Only**

  You can now filter the list of notifications by
  those used only in SLAs.
* **Setting for the Default From Address for Scheduled Reports**

  In
  Application Administrator,
  you can now set the default
  **From** address for scheduled report notifications in the
  Default from address field under
  Projects |
  Settings.
  If a value is not set at the project
  level, the
  Default from address value in the
  Notification Server options in
  SBM Configurator
  is used instead.
* **Map Passwords when Importing Users from a File**

  You can now map a column in your spreadsheet to
  the user
  Password field to set passwords for your
  users during an import or update.

  You can also map a separate column in the spreadsheet to
  User: Is password persistent to indicate
  whether the password is temporary or not using one of the following flags:
  `TRUE`/`FALSE`,
  `yes`/`no`,
  `1`/`0`. For example, for
  each row with a
  `TRUE` value, a fixed password is set for each
  user; for each row with a
  `FALSE` value, a temporary password is set for
  each user. If the
  User: Is password persistent attribute is
  blank or absent, the password expires after the user's first login.
* **New External URL Template Tag for Scheduled Reports**

  If an
  Address for external links is specified in
  the
  Notification Server settings in SBM
  Configurator, an external link is now sent with the scheduled report in
  addition to the internal link (just like a regular notification). The external
  link appears as long as the scheduled report e-mail templates
  (sr\_scheduled\_reports.txt and
  sr\_scheduled\_reports.htm) contain the new
  $REPORT\_URL\_EXTERNAL() template tag.

  This tag is automatically inserted into the scheduled report
  e-mail templates for new SBM installations. For upgrading customers, you must
  manually add this tag to your scheduled report e-mail templates to see the
  external link.
* **Runtime Statistics Changes**
  + The
    System Analytics link has been removed
    from
    Work Center.
    Administrators can now access runtime statistics for
    SBM
    via the
    Runtime Statistics link on the
    Application Administrator
    portal page (under
    More).
  + The
    Application Usage report has been
    deprecated. Instead, you can now track application usage via the new report
    types on the
    Applications tab.
    Note: To view the deprecated
    Application Usage report, follow the
    steps in solution
    [S142441](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142441) to enable access via
    SBM Configurator.
* **System Analytics Changes**
  + The
    System Analytics link has been removed
    from
    Work Center.
    Administrators can now access real-time monitoring features via the
    System Analytics link on the
    Application Administrator
    portal page (under
    More).
  + The following monitoring capabilities have been
    added for
    SBM Application Engine
    servers: Default AppPool CPU usage and memory usage; gsoap\_pool CPU usage and
    memory usage; SBM free disk space; Windows CPU usage, Windows free memory, and
    Windows memory usage.
  + In
    System Analytics, you can now monitor the
    record count for both the Common Log (CL\_LOG) and Event Log (EL\_EVENT) tables
    in the database and have the system notify you when the count grows beyond an
    acceptable range. This helps avoid potential issues related to performance and
    disk space.
  + In
    System Analytics, you can now have graphs
    on the
    Run-Time Resources tab use a fixed scale
    for the y-axis. This enables you to easily view and compare graphs
    side-by-side.
  + You can now use the
    Clear History option to remove all failure
    history entries or entries that meet certain criteria.

#### SBM Application Repository Changes

* **Additional Options for Managing the Event Log**

  Options similar to those for managing the Common
  Log have been added for the Event Log. When you click
  Purge History, you can now clear history
  before a certain date, schedule history clearing, or cancel scheduled
  activities for all environments.
* **Delete Prior Versions of a Process App by Date**

  Under
  Process Apps |
  Versions, you can now click
  Remove all eligible versions and select a
  new option that enables you to delete all versions of a process app that were
  created prior to a specified date.

#### SBM System Administrator Changes

* **Auto Folder Items Disabled for New Installations**

  The
  Auto Folder Items option is now disabled by
  default for new installations. For
  SBM
  upgrades, this option is also disabled for new users.

  To enable this option, in
  SBM System Administrator,
  click the
  Settings icon and then select the
  Database tab.
* **Changes to Generic Data Imports When Using Unique Character
  Identifiers**
  + The Additional Data Options dialog box is now available when
    using a unique character identifier for importing data from a generic ODBC
    database.
  + When using a unique character identifier, you can now choose to
    continue the import if duplicate character identifiers are detected.
  + You can now map a text field that is used as the unique
    character identifier to multiple
    SBM
    destination fields.
* **Web Services Invocation Timeout Removed**

  This option was removed from
  SBM System Administrator
  because the same option is available on the
  Performance tab in
  SBM Configurator.
* **Database Lock Option Removed**

  This option was removed from
  SBM System Administrator
  because this feature only applied to TeamTrack databases using the deployment
  feature.

### Installation and Configuration Changes

#### SBM Configurator Changes

* **Settings for Minimum and Maximum Tomcat Memory Size**

  You can now use the
  Minimum and
  Maximum memory size fields on the
  Tomcat Server tab to control Tomcat memory
  utilization on your current server. For example, you might increase the
  Maximum memory size setting for SBM Tomcat
  in the event you are seeing out-of-memory errors in the
  tomcat.log file.
* **Enable/Disable Specific SSL/TLS Protocols**

  On the
  Security |
  Secure SBM tab, you can now select specific
  versions of SSL/TLS protocols to use with SBM. Use caution, however, as older
  versions contain known security vulnerabilities that could expose your system
  to malicious attacks. Do not enable legacy protocols unless absolutely
  necessary.
* **Proxy Server Changes**

  On the
  Proxy Server tab, you now specify a single
  proxy server host and connection information for both HTTP and HTTPS
  connections. In addition, each SBM server that is defined on the
  Component Servers tab is automatically added
  to the list of host names that can skip connection to the proxy server. You can
  now manage the list of SBM hosts and non-SBM hosts that can skip proxy
  connections via separate lists.
* **New Static Diagnostic Test**

  You can now run a static diagnostic test to verify
  that the current Smart Search index files correspond to the Application Engine
  database that is currently in use. A 1:1 relationship must exist between the
  current index and the Application Engine database.
* **Active Diagnostic Logs Option with Collect Log Files**

  You can now choose to include or exclude log files
  for Active Diagnostics when you use the
  Collect Log Files feature in
  SBM Configurator.
* **Send Test E-mail**

  You can now send a test e-mail message to verify
  your mail server connection after you configure
  Notification Server settings.
* **New SAML2 Service Provider Authentication Settings**

  When you configure authentication settings for an external
  identity provider and you select the option to use a SAML2 service provider,
  the following options are now available:

  + **Force authentication**

    This option instructs the identity provider to force
    re-authentication on every call from
    SBM.
    If force authentication is supported by your SAML2 identity provider, you can
    use this option to ensure that sessions are not inadvertently expired.

    Note: If your identity provider is configured to use an
    auto-login mechanism such as NTLM, the session is automatically
    re-authenticated and valid for an additional time period according to the
    identity provider. However, if the identity provider uses a login form to
    gather credentials, this option will force users to reenter their credentials
    as soon as their
    SSO
    token expires.
  + **Maximum authentication age**

    Use this option to set the default tolerance period for the
    SAML2 authentication statement. This helps prevent login issues related to
    stale authentication statements. Enter the maximum number of seconds that the
    identity provider allows for its authentication statements.
  + **Response Skew**

    Use this option to set the maximum tolerance
    for clock differences between the identity provider clock and the service
    provider clock.
  + **Import From URL**

    You can now import the identity provider
    metadata via a URL.
* **Real-Time Monitoring Change**

  The
  Real-Time Monitoring tab name in
  SBM Configurator
  has been changed to
  System Analytics for consistency with
  SBM Application Administrator.
  The
  System Analytics page appears in
  Application Administrator
  when you enable
  System Analytics in
  SBM Configurator
  on the server that hosts
  SBM Common Services.
  You must enable
  System Analytics in
  SBM Configurator
  on a server-by-server basis to monitor additional
  SBM
  servers.
* **Performance Settings Changes**

  You now configure the Application Engine
  **Web services invocation timeout** exclusively on the
  **Performance** tab in SBM Configurator. This
  option is now independent from the throttling settings for Application Engine
  Web services.

  For orchestrations, you can now configure
  orchestration timeouts and throttling settings independently. In
  addition, you can now configure the following Orchestration Engine settings
  directly on the
  **Performance** tab in SBM Configurator:

  + **Web services invocation timeout** â The amount of time SBM
    Orchestration Engine should wait for an external Web service response for a
    call initiated from an orchestration.
  + **Orchestration execution timeout** â The maximum time for
    BPEL process execution (for synchronous and asynchronous orchestrations).

#### Miscellaneous Changes

* **Locale-Specific Start of the Week**

  For new installations, the start of the week that
  is used in calendar reports, date picker popups, and date/time keywords is now
  determined by the user's locale. For upgrades from earlier versions of SBM, the
  day that is used for the start of the week is unchangedâthe default is Sunday.
  After the upgrade, users can change to a locale-specific start of the week by
  editing the
  Locale settings in their user profiles.
* **HTML5 Support Enabled on Upgrade**

  The
  HTML5 Support option in Application
  Administrator is now automatically selected on upgrade. This means if you were
  not using HTML5 features in SBM prior to the upgrade, they will be available to
  your users by default after the upgrade is finished. For details on HTML5
  features in SBM, refer to the
  SBM Application Administrator
  Guide.

  If you need to disable HTML5 support, edit the
  **Base Project** in Application Administrator and clear the
  Enable HTML5 Features check box. However,
  note that disabling HTML5 is not recommended, as future enhancements and
  non-critical fixes will be focused on SBM with HTML5 enabled.

### SBM Composer Changes

* **Where Used Enhancement**

  When you perform a "Where Used" search, you can
  now find where multiple items of the same design element type are used
  throughout an application. The results are provided for each item, along with
  the number of times an item is used. This enables you to easily delete items
  that have zero occurrences.
* **Export and Import Form Actions**

  You can now reuse a form action by exporting it
  to an .xml file and importing it into any other form. This enables you to
  easily reuse a form action across multiple applications and process apps. The
  export and import functionality is available on the
  Actions tab of the form Property Editor.
* **Override Rich Text or Plain Text in Custom Popups**

  By default, text fields referenced by custom
  popups will render as plain text or rich text according to how the
  Enable Rich Text option is set in the field
  Property Editor. You can now override this behavior by specifying the option
  `html=1` (or
  `yes` or
  `true`) to render fields as rich text or
  `html=0` (or
  `no` or
  `false`) to render fields as plain text. For the
  list of options, refer to solution
  [S142150](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142150).
* **Hide Deleted Fields in Table Editor**

  You can now hide deleted fields in the table
  editor. Right-click any field and then deselect the
  Deleted Fields menu option. This setting is
  applied globally.
* **Previous Search Strings Saved for All Find Dialog Boxes**

  All Find dialog boxes in
  SBM Composer
  now save up to 20 previous search strings in a drop-down list. These strings
  are preserved in the registry so they are remembered when
  SBM Composer
  is closed and reopened.
* **Action Summaries on the State and Transition Property Editor**

  The
  Actions tab of the state and transition
  Property Editor can now display textual summaries of the actions. Select the
  Show action summaries check box at the
  bottom of the tab.
* **Copy URL to Clipboard Available on Submit Forms**

  Submit forms now include the
  Copy URL to Clipboard link in the
  Actions drop-down list. This enables users
  to bookmark a submit form in their Web browser. To hide this link, uncheck the
  related option on the
  Tool Bar tab of the form Property Editor.
* **Add to Folder Available on Form Property Editor**

  The
  Add to Folder link, which appears in the
  Actions drop-down list on state forms and
  submit forms, is now a standard option on the
  Tool Bar tab of the form Property Editor.
* **Option to Display Dual Lists Vertically**

  For "*Multi*" field types, you now have
  the option to display dual lists vertically instead of horizontally. This
  option applies only when HTML5 is enabled in
  SBM Application Administrator.
* **Display Internal or Database Names in Property Editor**

  You can now specify how the names in the
  Property Editor design element list are displayed. For tables, you can choose
  between the name and the database name, and for workflows, states, and
  transitions, you can choose between the name and the internal name.
* **Compare and Copy Field Values in Form Actions**

  Form actions now support field-to-field
  comparisons and assignments. Field comparisons enable you to define different
  behaviors if the values of fields match. Field assignments enable users to copy
  the contents of one field to another, saving time and preventing repetition.
* **Validate Script Deprecation in 32-Bit Version of
  SBM Composer**

  The ability to validate scripts in the 32-bit version of
  SBM Composer
  has been deprecated in this release.
* **Include Field in Keyword Searches Option for File Fields**

  The
  Include field in keyword searches option for
  *File* fields has been added back to
  SBM Composer.
  Use this option to control whether a
  *File* field is indexed by the
  Work Center
  search engine. If this option is enabled, the keyword search will search the
  field label, filename, and file content.

  + If you enable this option and deploy a process app, any new
    entries that are added to the
    *File* field are automatically indexed and included in
    Work Center
    search results.
  + For process apps that were deployed prior to the upgrade,
    indexing is not enabled for
    *File* fields unless you select the
    Include field in keyword searches option
    and redeploy your process apps. After all items are re-indexed (which occurs
    during a midnight check), they can be searched by the
    *File*field.Note: In
  Service Request Center
  (version 5.3 and later), the
  *File* field "Public Attachments" was previously indexed by
  default, enabling Knowledgebase articles to be searched by the content of this
  field. In this release, indexing is disabled for
  *File* fields of the already deployed application "SRC -
  Knowledge Management". To be able to search for articles by content in the
  "Public Attachments" field, you must enable
  **Include field in keyword searches** for this field and
  redeploy "SRC - Knowledge Management". After the midnight check and
  re-indexing, articles can once again be searched by this
  field.

### Orchestration Changes

* **New -useEnvEndpoints Option for -redeploy Command**

  You can now use the
  `-useEnvEndpoints` option with the
  `-redeploy` command in the event that endpoints were
  manually changed in
  Application
  Repository
  after the last deploy.

### Miscellaneous Changes

* **SBM ModScript
  Changes**

  The following functions and improvements have been made
  to
  SBM ModScript:

  + **ADLog** â A class for logging to Active
    Diagnostics.
  + **AppDb.ReadDynaSQL()** â Reads multiple rows of a set of
    columns from the database, filling the Vector "out".
  + **Ext.SetContentType()** â Sets the content
    type HTTP header for the output from a URL Direct access.
  + **ExitScript()** â Provides a graceful way
    of exiting the script.
  + **TimePoint** â A class that provides a
    breakdown of a point in time based on a time zone.
  + **TimeT.ToTimePoint()** â Resolves date into
    a TimePoint that represents year/month/day/etc. based on the specified
    TimeZone.
  + **TimeT.FormatDateText()** â Formats a date
    into a human-readable string using custom formats.
  + **TimeT.ParseDateText()** â Parses a
    human-readable date string into a TimeT using custom date formats.
  + **TimeTNow()** â Returns a TimeT set to
    current time.
  + **TimeT.TruncateToDateOnly()** â Rounds date
    down to midnight UTC.
  + **TimeMillis** â New class for interacting
    with time in milliseconds.
  + **Locale.GetDayOfWeekName()** â Returns
    Locale-correct name for a day of the week.
  + **Locale.GetMonthName()** â Returns
    Locale-correct name for a month.
  + **Locale.GetAMPMName()** â Returns
    Locale-correct name for AM or PM.
  + Added math functions including
    **abs()** (absolute value),
    **cos()**,
    **sin()**,
    **tan()**,
    **floor()**, and
    **ceil()**.
  + Added
    **to\_int()**,
    **to\_double()**,
    **to\_int64\_t()**, etc. to Variant.
  + **RESTDataSource.UseSBMProxy()** â By
    default, RESTDataSource calls go through the SBMProxy. This enables features
    such as OAUTH2 authentication. However, if desired, SBMProxy can be bypassed
    via UseSBMProxy( false ).
  + **TempFile** â A class that creates a
    temporary file that exists for the scope of the object.
  + Extended the RESTDataSource flexibility: custom
    headers, URL path parameters, custom REST HTTP verbs.
  + Removed requirement for using Variant from most
    functions. For instance, see AppRecord.GetFieldValue().

  New to
  SBM ModScript?
  Visit
  <https://www.serenacentral.com/blogs/entry/sbm-modscript-part-1>
  to learn more.
* **Delete Orphaned Scheduled Reports Records from the Database**

  You can now use the
  `cleanupScheduledReports` renew utility command to
  delete entries in the TS\_NOTIFICATIONEVENTS table that do not have a related
  entry in the TS\_NOTIFICATIONS table and vice versa.
* **Restart Search Index Update without Restarting Tomcat**

  You can now use the
  `restartSSFIndexUpdate` renew utility command to
  restart the
  Work Center
  search index update process without having to stop and start
  SBM Tomcat.
* **Script Validation Improvements in Composer**

  Functions and variables that have not been
  declared (or are misspelled) are now reported as warnings when you validate a
  ModScript.
* **$NOTES() Notification Template Tag Now Includes Images**

  The $NOTES tag now shows images when it is
  included in notification emails, just like $FIELDVALUE and $FIELDS.
* **New Shell Parameter for $LINK() and $MOBILELINK() Template
  Tags**

  The $LINK and $MOBILELINK tags now provide a shell
  parameter that enables you to specify which interface should be opened when an
  item link is clicked in an e-mail. For example, you can specify
  `$LINK(swc, TRUE, Click here)` to insert a hyperlink
  that will open the item in
  SBM Work Center.

### Web Services Changes

* **New RunModScript Call**

  You can now specify an
  SBM ModScript
  to execute using the RunModScript call in
  sbmappservices72.

### Documentation Changes

* The
  Application Administrator
  help is now hosted on the
  [Documentation Center](http://help.serena.com/doc_center/doc_center.html#sbm)
  and not installed on the
  Application Engine
  server. If your administrators are not able to access the
  [Documentation Center](http://help.serena.com/doc_center/doc_center.html#sbm)
  and you need to install the
  Application Administrator
  help locally, see solution
  [S140937](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S140937).

## Upgrades from 11.X

Review this section for upgrades to
SBM
11.4 from earlier versions in the 11.x line. If you are upgrading from 10.1.X,
refer to
[Upgrades from 10.1.X](#OldUpgradeNotes).

To test the upgrade, mimic your current installation on a separate set
of servers. This test installation should include all of the environments used
by your system. Upgrade and test this installation before upgrading your
production installation. To upgrade successfully, you must upgrade each server
and client machine to
SBM
11.4.

* [Requirements and Changes](#a22)
* [Planning for the Upgrade](#a23)
* [Pre-Upgrade Steps](#a24)
* [Upgrading the Installation and Databases](#a25)
* [Post-Upgrade Tasks](#a26)
* [Upgrading Customizations and Integrations](#a27)

### Requirements and Changes

Before you upgrade to
SBM
11.4, read the following important information:

* The
  HTML5 Support option in Application
  Administrator is now automatically selected on upgrade. This means if you were
  not using HTML5 features in SBM prior to the upgrade, they will be available to
  your users by default after the upgrade is finished. For details on HTML5
  features in SBM, see the
  SBM Application Administrator
  Guide.

  If you need to disable HTML5 support, edit the
  **Base Project** in Application Administrator and clear the
  Enable HTML5 Features check box. However, note that disabling HTML5 is not
  recommended, as future enhancements and non-critical fixes will be focused on
  SBM with HTML5 enabled.
* If you have defined custom authenticators and identity transformers
  for
  SBM in the
  configuration.xml file, each entry is preserved
  after upgrade and should appear in
  SBM Configurator
  as long as they are defined in the correct section of the
  configuration.xml file. If you have mistakenly
  placed authenticators outside of the correct sections in this file, your custom
  authentication settings will not be preserved. Therefore as a precaution, if
  you have defined custom authenticators, back up your current
  configuration.xml file before you perform the
  upgrade. You can refer to this file to rebuild your custom authenticators in
  SBM Configurator
  after the upgrade is finished if necessary.
* If you used
  **HTTP Basic Authentication** to manage user sessions prior to the
  upgrade,
  SBM Configurator
  automatically converts this to
  SSO
  once the upgrade is finished. The
  **HTTP Basic Authentication** option has been deprecated and is no
  longer available in
  SBM Configurator
  because there are more secure options for managing user sessions.

  Electronic signatures are now authenticated according to what is
  selected for
  Web services authentication in
  SBM Configurator
  if you are using
  **Windows Authentication** or
  **Third-Party Authentication System** for
  **Browser authentication**. Prior to 11.1, electronic signatures
  were always authenticated against the internal SBM database.

  If you need assistance with re-enabling legacy behavior for
  either setting, please contact Support.
* In order to prevent notifications from being sent for changes that
  have not happened recently,
  SBM
  now deletes notification events that are older than 90 days that contain a
  THREADID during the database upgrade. To check if you have events that will be
  deleted, refer to the SQL queries in solution
  [S140945](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S140945).
* Work Center
  search operates on pre-built indices that may change for each
  SBM
  release. The
  Work Center
  search index is rebuilt when Tomcat is started for the first time after the
  upgrade. The complete indexing operation can take ample time to finish for very
  large databases; however, some search results in
  Work Center
  begin to appear immediately and the number of results continues to grow while
  the initial indexing operation works toward completion.

  You can view the overall progress of the indexing operation in
  the
  ssf.log file located on the server that hosts
  SBM Common Services.
  The log file is located here:

  ```
  installDir\Serena\SBM\Common\tomcat\server\default\logs
  ```
* For SQL Server systems, ensure that SQL Server Replication is not
  enabled. If replication is enabled, the upgrade process fails with an error:
  Cannot drop the table 'TS\_XXXX' because it is being used
  for replication.
* For Oracle systems, note the following:
  + You must ensure that the required roles and privileges for the
    SBM
    schema user are up-to-date. Refer to solution
    [S133641](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S133641) for details.
  + You must perform the database upgrade using either the
    **SBM** DSN or a system DSN that uses the "Oracle for SBM" driver. If your system used the Mashup2009
    DSN prior to the upgrade, that DSN is automatically converted to use the new
    "Oracle for SBM" driver.

### Planning for the Upgrade

The upgrade process you will follow depends on the type of
installation you currently have:

* **Single Server Installation** â All of the SBM components are
  installed on a single server.

  For single server installations, you will run the suite installer
  on your server and then upgrade the databases using
  SBM Configurator.
* **Distributed Installation** â The SBM components are installed
  on multiple servers that comprise a single production environment.

  For distributed installations, you will run the suite installer on
  each server, and then use
  SBM Configurator
  to upgrade the databases.
* **Multi-environment installation** â The SBM components are
  installed on single or multiple servers that are separated into multiple SBM
  environments (such as development, test, and production).

  The process for upgrading multiple environments (used in a path
  to production model) depends on which environment hosts
  SBM Application
  Repository
  and which environment you plan to upgrade first (Test/Staging first or
  Production first).

  + **If
    SBM Application
    Repository
    is part of the Test environment and you plan to upgrade Test first**

    In this setup, each environment uses a single instance of
    Application
    Repository
    that is installed in the Test environment. You will upgrade the Application
    Engine and
    Orchestration Engine
    databases in the Test environment first. After the upgrade in Test is finished,
    you will not be able to deploy to Production from
    Application
    Repository
    until you upgrade the Production servers and databases.
  + **If
    SBM Application
    Repository
    is part of the Production environment and you plan to upgrade Test first**

    In this setup, each environment uses a single instance of
    Application
    Repository
    that is installed in the Production environment. You will upgrade the
    Application Engine and
    Orchestration Engine
    databases in the Test environment first. After the upgrade in Test is finished,
    you will not be able to deploy to Test from
    Application
    Repository
    until you upgrade the Production servers and databases.
  + **If
    SBM Application
    Repository
    is part of either Production OR Test and you plan to upgrade all environments
    at the same time**

    If you plan to upgrade all environments at the same time (one
    immediately after the other), upgrade the instance that hosts
    Application
    Repository
    first (likely Production). This will allow you to upgrade the other
    environments that do not have
    SBM Application
    Repository
    without installing a temporary instance.

### Pre-Upgrade Steps

Follow these steps before you perform the upgrade.

1. Verify that
   SBM
   11.X or later is installed on the
   System Information tab in
   SBM Configurator.
2. Back up your existing databases.
3. Back up the
   SBM
   installation directory structure on the
   Application Engine
   server.
4. Back up the Smart Search index directory on the
   SBM Common Services
   server. If you need to revert the upgrade for any reason, you will restore the
   index from this backup (because the index is rebuilt as part of the upgrade).
5. Consider consulting with your DBA to assess the current table
   indexes in the
   SBM
   databases. Because significant database schema changes do not necessarily
   coincide with each database upgrade, table indexes are not automatically
   rebuilt as part of the upgrade process. Over time, indexes can report excessive
   fragmentation, which could negatively impact performance if they are not
   rebuilt periodically.
6. Create a new database space in your DBMS to host the
   **Configuration Settings** database if you did not create it in a
   prior release. As of
   SBM
   10.1.5, you can use this database to store configuration settings across your
   entire
   SBM
   installation in one centralized location.
7. Stop the IIS and
   SBM Tomcat
   services on each
   SBM
   server.
8. Download the new suite and client installers from the
   [Support and Services page](https://www.microfocus.com/support-and-services/#SBM).

### Upgrading the Installation and Databases

Follow these steps to upgrade an
SBM
server.

1. Extract the server installation files, and then launch the suite
   installer. An installer message prompts you to confirm that you are upgrading
   your system. Click
   Next to continue.
2. The
   Ready to Upgrade dialog box appears. Click
   **Upgrade Now** to begin upgrading the server installation. At the
   end of the installation upgrade, click
   Configure to launch
   SBM Configurator.
   Note: If you are prompted to restart your server,
   SBM Configurator
   launches automatically once the server has restarted. If you decline, you will
   not be able to run
   SBM Configurator
   until the server has been restarted.
3. Decide if you will use the
   **Configuration Settings** database if you have not done so
   already. If you have a distributed installation, it is highly recommended that
   you use the
   **Configuration Settings** database, because it enables you to
   easily synchronize configuration settings between each
   SBM
   server without requiring you to export and import configuration snapshot files.

   On the
   Database Servers tab, enter database
   connection information for the
   **Configuration Settings** database that you created as part of
   the pre-upgrade process.
4. Verify your configuration settings, and then click
   Apply.
   SBM Configurator
   detects the current upgrade process and upgrades the file system by merging
   existing configurations from your previous installation into the new
   installation files.
   Important: You must click
   Apply to save these changes before you
   upgrade the database. Once the file system is upgraded, you can run
   SBM Configurator
   again anytime thereafter to verify or modify your configuration settings as
   needed.
5. Open the
   Database Servers tab in
   SBM Configurator,
   and then click
   Upgrade Database.
   Tip: If any errors occur during the
   Application Engine
   database upgrade, review the upgrade log here:
   ```
   installDirectory\Serena\SBM\Application Engine\log
   ```

   If an
   `ORA-00904` message appears in the
   Application Engine
   upgrade log after you finish upgrading the
   Application Engine
   database, refer to solution
   [S141358](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141358) for a description of the problem
   and a resolution.

   After the database is upgraded successfully, verify that the
   services are started in the
   Manage Services tab. Instruct
   Application
   Repository
   users to clear the cache in their Web browsers before they attempt to access
   SBM Application
   Repository.
6. On each client machine, run the client installer. The client
   executable contains
   SBM Composer
   and is intended to be run only on client machines. Previous versions of
   SBM Composer
   are upgraded automatically and do not need to be uninstalled prior to
   upgrading. The new version is installed in the same location.

### Post-Upgrade Tasks

Review the following information and make any necessary changes after
you have upgraded your servers and databases:

* SBM Configurator
  warns you if your installation currently uses default certificates (which
  should be replaced) or if your current certificates will expire soon.
  Important: To properly secure your installation, you must
  generate new key pairs even if you do not plan to use
  SSO.
  If you do not generate new key pairs, the default certificates that the STS
  inherently trusts are used. To increase security, launch
  SBM Configurator
  and generate new unique certificate for all components. For details, see
  "Securing
  SBM"
  in the
  SBM Installation and Configuration
  Guide.
* For systems that are configured to use client
  certificate authentication, you must perform additional configuration steps
  after the upgrade or disable the feature entirely. For details, refer to the
  entry about client certificate authentication in
  [Installation and Configuration Issues](#InstallationIssues).
* HTML rendering and Rich Text editing is enabled by default for all
  notes in your system after the upgrade.
  To disable these features for notes, clear the
  **Render HTML in Notes** check box located on the HTML tab of
  the Settings dialog box in
  SBM System Administrator.
* User credentials in
  SBM Application Engine
  Web service calls that use Basic authentication are now handled exclusively by
  SBM Application Engine
  itself, instead of IIS. This configuration is common if your
  SBM
  system is set up with
  **NT Challenge Response** for end-user authentication. After
  upgrade, this means that you must now specify the Windows domain for Web
  service calls in
  SBM Configurator,
  otherwise the domain that the IIS server machine is installed on is used for
  user validation.
* The **Require appended text** option, available for
  *Journal* fields on the Attributes tab (field Property Editor)
  and the Field Overrides tab (workflow Property Editor) now works as intended.
  When the **Required** and **Require appended text** options are selected,
  users must append text to the field during a transition. When only**Required** is selected, users do not need to append text if there is an
  existing entry.

  In past releases, selecting only the **Required** option would
  require users to append text to an existing entry. Now, the **Require appended
  text** option must also be selected to require users to append text.

### Upgrading Customizations and Integrations

Review the following information for help with upgrading custom
changes and integrations.

* If you made custom modifications to any HTML templates, e-mail
  templates, or online help files, you must merge your changes into the
  newly-upgraded files, and then use
  SBM System Administrator
  to
  **Put Files in Database**. All templates and images in the
  database are replaced by files on your local machine as part of this operation.
  Backup templates are stored on the
  installDir\SBM\Application
  Engine
  server here:

  ```
  installDir\Serena\SBM\Application Engine\Backup<version>-<date>-<time>
  ```
  Note: For a list of configuration Files, Web Interface templates,
  JavaScript files, and strings that have changed in this release, refer to
  solution
   [S142555](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142555 ). You must manually merge some of
  your existing SSO customizations into the newly installed files after you
  upgrade your software and database.
* If you installed the TT4ZMF integration prior to upgrading, you
  must follow the instructions in the TT4ZMF readme to reinstall the integration
  after the
  SBM
  upgrade is complete.
* If you configured your system to use anonymous events prior to the
  upgrade, you must either add credentials to your events (preferred) or you must
  select the
  Allow Anonymous Events check box in
  SBM Configurator
  and enter an
  SBM
  user name and password to use anonymous events after the upgrade.

## Upgrades from 10.1.X

Review this section for upgrades to
SBM
11.4 from versions in the 10.1.X line. If you are upgrading from 11.0 or
higher, refer to
[Upgrades from 11.X](#NewUpgradeNotes).

To test the upgrade, mimic your current installation on a separate set
of servers. This test installation should include all of the environments used
by your system. Upgrade and test this installation before upgrading your
production installation. To upgrade successfully, you must upgrade each server
and client machine to
SBM
11.4.

* [Requirements and Changes](#a28)
* [Planning for the Upgrade](#a29)
* [Pre-Upgrade Steps](#a30)
* [Upgrading the Installation](#a31)
* [Upgrading the Databases](#a32)
* [Post-Upgrade Tasks](#a33)
* [Upgrading Customizations and Integrations](#a34)

### Requirements and Changes

Before you upgrade to
SBM
11.4, read the following important information:

* **SBM
  11.4 requires
  License Manager
  2.2. You must upgrade to version 2.2 before you can upgrade to
  SBM
  11.4.**
* SBM
  11.4 requires 64-bit Windows servers. If you are using 32-bit servers prior to
  the upgrade, you must install
  SBM
  11.4 on one or more 64-bit machines, and then upgrade the databases using the
  64-bit installation. As part of the upgrade, review and upgrade any scripts and
  APIs that were originally created on a 32-bit operating system to ensure that
  they also run on a 64-bit system. For example, if you have any scripts that
  load
  .dll files, those
  .dll files must be upgraded to run on a 64-bit
  machine.
* The
  HTML5 Support option in Application
  Administrator is now automatically selected on upgrade. This means if you were
  not using HTML5 features in SBM prior to the upgrade, they will be available to
  your users by default after the upgrade is finished. For details on HTML5
  features in SBM, see the
  SBM Application Administrator
  Guide.

  If you need to disable HTML5 support, edit the
  **Base Project** in Application Administrator and clear the
  Enable HTML5 Features check box. However, note that disabling HTML5 is not
  recommended, as future enhancements and non-critical fixes will be focused on
  SBM with HTML5 enabled.
* If you have defined custom authenticators and identity transformers
  for
  SBM in the
  configuration.xml file, each entry is preserved
  after upgrade and should appear in
  SBM Configurator
  as long as they are defined in the correct section of the
  configuration.xml file. If you have mistakenly
  placed authenticators outside of the correct sections in this file, your custom
  authentication settings will not be preserved. Therefore as a precaution, if
  you have defined custom authenticators, back up your current
  configuration.xml file before you perform the
  upgrade. You can refer to this file to rebuild your custom authenticators in
  SBM Configurator
  after the upgrade is finished if necessary.
* If you used
  **HTTP Basic Authentication** to manage user sessions prior to the
  upgrade,
  SBM Configurator
  automatically converts this to
  SSO
  once the upgrade is finished. The
  **HTTP Basic Authentication** option has been deprecated and is no
  longer available in
  SBM Configurator
  because there are more secure options for managing user sessions.

  Electronic signatures are now authenticated according to what is
  selected for
  Web services authentication in
  SBM Configurator
  if you are using
  **Windows Authentication** or
  **Third-Party Authentication System** for
  **Browser authentication**. Prior to 11.1, electronic signatures
  were always authenticated against the internal SBM database.

  If you need assistance with re-enabling legacy behavior for
  either setting, please contact Support.
* In order to prevent notifications from being sent for changes that
  have not happened recently,
  SBM
  now deletes notification events that are older than 90 days that contain a
  THREADID during the database upgrade. To check if you have events that will be
  deleted, refer to the SQL queries in solution
  [S140945](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S140945).
* Work Center
  search operates on pre-built indices that may change for each
  SBM
  release. The
  Work Center
  search index is rebuilt when Tomcat is started for the first time after the
  upgrade. The complete indexing operation can take ample time to finish for very
  large databases; however, some search results in
  Work Center
  begin to appear immediately and the number of results continues to grow while
  the initial indexing operation works toward completion.

  You can view the overall progress of the indexing operation in
  the
  ssf.log file located on the server that hosts
  SBM Common Services.
  The log file is located here:

  ```
  installDir\Serena\SBM\Common\tomcat\server\default\logs
  ```
* For upgrades from 10.1.X, as part of the database
  upgrade and migration to the new ODE BPEL engine, data in the CL\_CONTEXT\_VALUE
  and CL\_LOG tables is deleted. New indexes are added to the CL\_CONTEXT\_VALUE and
  CL\_LOG tables on upgrade to prevent time outs from occurring when you try to
  view Common Log data in
  SBM Composer
  or
  SBM Application
  Repository.
  In order to add the new indexes, these tables will be emptied during the
  upgrade process.
  Important: If you need to view Common Log data that was
  present prior to the upgrade, ensure that you have backed up these tables.
* For SQL Server systems, ensure that SQL Server Replication is not
  enabled. If replication is enabled, the upgrade process fails with an error:
  Cannot drop the table 'TS\_XXXX' because it is being used
  for replication.
* For Oracle systems, note the following:
  + You must ensure that the required roles and privileges for the
    SBM
    schema user are up-to-date. Refer to solution
    [S133641](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S133641) for details.
  + You must perform the database upgrade using either the
    **SBM** DSN or a system DSN that uses the "Oracle for SBM" driver. If your system used the Mashup2009
    DSN prior to the upgrade, that DSN is automatically converted to use the new
    "Oracle for SBM" driver.
    Important: The underlying driver in the DSN that
    ships with
    SBM
    was changed in
    SBM
    in 10.1. If you currently use the Mashup2009 DSN with
    SBM,
    you do not need to do anythingâthe DSN will be updated automatically. If you
    created your own custom DSN with the "Oracle for SBM"
    driver prior to upgrading to
    SBM
    10.1 or later, then you must recreate the DSN and use the new "Oracle for SBM" driver that ships with
    SBM
    after the upgrade is finished.

### Planning for the Upgrade

The upgrade process you will follow depends on the type of
installation you currently have:

* **Single Server Installation** â All of the SBM components are
  installed on a single server.

  For single server installations, you will run the suite installer
  on your server and then upgrade the databases using
  SBM Configurator.
  The databases are upgraded in two phasesâin phase one, the
  Application Engine
  database is upgraded; once it completes successfully, phase two begins. In
  phase two, you are prompted to enter the
  SBM
  user name and password of your primary system administrator or an
  SBM
  user that has the Remote Administration privilege to upgrade the Orchestration
  Engine database.
* **Distributed Installation** â The SBM components are installed
  on multiple servers that comprise a single production environment.

  For distributed installations, you will run the suite installer on
  each server, and then use
  SBM Configurator
  to upgrade the databases. When you begin the Orchestration Engine database
  upgrade on the server that hosts
  SBM Orchestration Engine,
  you are prompted to enter the
  SBM
  user name and password of your primary system administrator or an
  SBM
  user that has the Remote Administration privilege. This scenario requires that
  you start the SBM services and that you perform the database upgrades in a
  certain order. This is explained in more detail below in
  [Upgrading the Databases](#a32).
* **Multi-environment installation** â The SBM components are
  installed on single or multiple servers that are separated into multiple SBM
  environments (such as development, test, and production).

  The process for upgrading multiple environments (used in a path
  to production model) depends on which environment hosts
  SBM Application
  Repository
  and which environment you plan to upgrade first (Test/Staging first or
  Production first).

  + **If
    SBM Application
    Repository
    is part of the Test environment and you plan to upgrade Test first**

    In this setup, each environment uses a single instance of
    Application
    Repository
    that is installed in the Test environment. You will upgrade the Application
    Engine and
    Orchestration Engine
    databases in the Test environment first. After the upgrade in Test is finished,
    you will not be able to deploy to Production from
    Application
    Repository
    until you upgrade the Production servers and databases.
  + **If
    SBM Application
    Repository
    is part of the Production environment and you plan to upgrade Test first**

    In this setup, each environment uses a single instance of
    Application
    Repository
    that is installed in the Production environment. You will upgrade the
    Application Engine and
    Orchestration Engine
    databases in the Test environment first. After the upgrade in Test is finished,
    you will not be able to deploy to Test from
    Application
    Repository
    until you upgrade the Production servers and databases.
  + **If
    SBM Application
    Repository
    is part of either Production OR Test and you plan to upgrade all environments
    at the same time**

    If you plan to upgrade all environments at the same time (one
    immediately after the other), upgrade the instance that hosts
    Application
    Repository
    first (likely Production). This will allow you to upgrade the other
    environments that do not have
    SBM Application
    Repository
    without installing a temporary instance.

  For information about warnings that may appear during a
  multi-environment upgrade, see "Handling Warnings with Multiple Environments"
  in
  [S141802](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141802 ).

Tip: In any of these scenarios, if you plan to test the
upgrade first by making a copy of the production database and installing
SBM
11.4 on a test machine, the upgrade process will report failures related to
your environment definition in
Application
Repository.
You can either update the endpoint and target server information in
SBM Application
Repository
and click
Retry Upgrade in
SBM Configurator
or click
Clear Warnings to proceed without making the
changes to finish the upgrade.

If you are upgrading from a release prior to 10.1.2, use
SBM Configurator
to designate which server will host the
SBM Logging Services
component. By default,
SBM Logging Services
appears on an undefined server until you drag and drop it to the desired
server. If you are upgrading from a release after 10.1.2,
SBM Logging Services
is enabled on the same machine as
SBM Common Services
by default. You can use
SBM Configurator
to move it to a dedicated server, if necessary (for example, if you set the
logging level to TRACE for debugging purposes).

### Pre-Upgrade Steps

Follow these steps before you perform the upgrade.

1. Verify that
   SBM
   10.1.X or later is installed on the
   System Information tab in
   SBM Configurator.
2. Back up your existing databases.
3. Back up the
   SBM
   installation directory structure on the
   Application Engine
   server.
4. Back up the Smart Search index directory on the
   SBM Common Services
   server. If you need to revert the upgrade for any reason, you will restore the
   index from this backup (because the index is rebuilt as part of the upgrade).
5. Consider consulting with your DBA to assess the current table
   indexes in the
   SBM
   databases. Because significant database schema changes do not necessarily
   coincide with each database upgrade, table indexes are not automatically
   rebuilt as part of the upgrade process. Over time, indexes can report excessive
   fragmentation, which could negatively impact performance if they are not
   rebuilt periodically.
6. If you store
   SBM
   item attachments on the file system, open
   SBM System Administrator
   and note the location of the attachments directory. You will enter the location
   in
   SBM Configurator
   later as part of the upgrade.
7. Create a new database space in your DBMS to host the
   **Configuration Settings** database if you did not create it in a
   prior release. As of
   SBM
   10.1.5, you can use this database to store configuration settings across your
   entire
   SBM
   installation in one centralized location.
8. Stop the IIS and
   SBM Tomcat
   services on each
   SBM
   server.
9. Download the new suite and client installers from
   <https://www.microfocus.com/support-and-services/#SBM>.

### Upgrading the Installation

Follow these steps to upgrade an
SBM
server.

1. Extract the server installation files, and then launch the suite
   installer. An installer message prompts you to confirm that you are upgrading
   your system. Click
   Next to continue.
2. The
   Ready to Upgrade dialog box appears. Click
   **Upgrade Now** to begin upgrading the server installation. At the
   end of the installation upgrade, click
   Configure to launch
   SBM Configurator.
   Note: If you are prompted to restart your server,
   SBM Configurator
   launches automatically once the server has restarted. If you decline, you will
   not be able to run
   SBM Configurator
   until the server has been restarted.
3. Decide if you will use the
   **Configuration Settings** database if you have not done so
   already. If you have a distributed installation, it is highly recommended that
   you use the
   **Configuration Settings** database, because it enables you to
   easily synchronize configuration settings between each
   SBM
   server without requiring you to export and import configuration snapshot files.

   On the
   Database Servers tab, enter database
   connection information for the
   **Configuration Settings** database that you created as part of
   the pre-upgrade process.
4. Verify your configuration settings, and then click
   Apply.
   SBM Configurator
   detects the current upgrade process and upgrades the file system by merging
   existing configurations from your previous installation into the new
   installation files.
   Important: You must click
   Apply to save these changes before you
   upgrade the
   Application Engine
   and
   Orchestration Engine
   databases. Once the file system is upgraded, you can run
   SBM Configurator
   again anytime thereafter to verify or modify your configuration settings as
   needed.
5. On each client machine, run the client installer. The client
   executable contains
   SBM Composer
   and is intended to be run only on client machines. Previous versions of
   SBM Composer
   are upgraded automatically and do not need to be uninstalled prior to
   upgrading. The new version is installed in the same location.

### Upgrading the Databases

The database upgrade process occurs in two phases when upgrading from
10.1.X to any version in the 11.X line. Review the following important
information before you begin.

* The
  Orchestration Engine
  database upgrade is no longer automatically performed after you start the
  SBM
  services; instead, you must manually invoke the upgrade process by clicking the
  Upgrade Database link in
  SBM Configurator.
  This ensures that the Orchestration Engine database is not upgraded
  prematurely.
* If
  SBM Application Engine
  and
  SBM Orchestration Engine
  are installed on the same server, the
  Orchestration Engine
  database upgrade is performed immediately after the
  Application Engine
  database upgrade.
* If
  SBM Application Engine
  and
  SBM Orchestration Engine
  are installed on separate servers:
  + You must ensure that IIS is started on the
    SBM Application Engine
    server and
    SBM Tomcat
    is started on each of the other
    SBM
    servers. Both IIS and
    SBM Tomcat
    must be running and all components must be accessible from the
    SBM Orchestration Engine
    server before the
    Orchestration Engine
    database upgrade begins.
  + You must upgrade the
    Application Engine
    database on the
    SBM Application Engine
    server first, and then upgrade the
    Orchestration Engine
    database on the
    SBM Orchestration Engine
    server.
* The Orchestration Engine database upgrade is performed by the renew
  utility using the user account that you specify when prompted. For details on
  this process and more information related to the Orchestration Engine database
  upgrade, refer to
  [S141802](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141802).

When you are ready, open the
Database Servers tab in
SBM Configurator,
and then click
Upgrade Database.

Tip: If any errors occur during the
Application Engine
database upgrade, review the upgrade log here:
```
installDirectory\Serena\SBM\Application Engine\log
```

If an
`ORA-00904` message appears in the
Application Engine
upgrade log after you finish upgrading the
Application Engine
database, refer to solution
[S141358](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S141358) for a description of the problem
and a resolution.

After the databases are upgraded successfully, verify that the
services are started in the
Manage Services tab. Instruct
Application
Repository
users to clear the cache in their Web browsers before they attempt to access
SBM Application
Repository.

### Post-Upgrade Tasks

Review the following information and make any necessary changes after
you have upgraded your servers and databases:

* SBM Configurator
  warns you if your installation currently uses default certificates (which
  should be replaced) or if your current certificates will expire soon.
  Important: To properly secure your installation, you must
  generate new key pairs even if you do not plan to use
  SSO.
  If you do not generate new key pairs, then the default certificates that the
  STS inherently trusts are used. To increase security, launch
  SBM Configurator
  and generate new unique certificate for all components. For details, see
  "Securing
  SBM"
  in the
  SBM Installation and Configuration
  Guide.
* If you store
  SBM
  item attachments on the file system, enter the location of the attachments
  directory on the
  Common Services tab. This enables
  SBM Common Services
  to return attachments in
  Work Center
  search results. If you store attachments in the database, skip this step.
* For systems that are configured to use client
  certificate authentication, you must perform additional configuration steps
  after the upgrade or disable the feature entirely. For details, refer to the
  entry about client certificate authentication in
  [Installation and Configuration Issues](#InstallationIssues).
* HTML rendering and Rich Text editing is enabled by default for all
  notes in your system after the upgrade.
  To disable these features for notes, clear the
  **Render HTML in Notes** check box located on the HTML tab of
  the Settings dialog box in
  SBM System Administrator.
* As part of the upgrade,
  SBM
  reviews the existing JBoss configuration and allocates the same amount of
  memory to Tomcat that was previously allocated to JBoss. After the upgrade, if
  you need to adjust the amount of memory that is allocated to Tomcat, perform
  the following steps:
  1. Stop the
     SBM
     Tomcat service.
  2. Navigate to
     installDirectory\Serena\SBM\Common\tomcat\bin,
     and edit the
     common\_config.bat file.
  3. Change the
     `JVM_X_MAXMEMSIZE` value as necessary.
  4. In the same
     \bin directory, execute the
     update\_tomcat\_config.bat file.
  5. Start the
     SBM
     Tomcat service.
* After the database upgrades are finished, use the
  **Reset Administrative User Access** wizard in
  SBM System Administrator
  if your database does not contain at least one Regular User or Managed
  Administrator account with Remote Administration privilege. This wizard enables
  you to define at least one user as your primary system administrator (an
  account that has Regular User or Managed Administrator product access with
  Remote Administration privilege) who can log in to
  SBM Application Administrator.
  For details, see the
  SBM System Administrator
  Guide.
* User credentials in
  SBM Application Engine
  Web service calls that use Basic authentication are now handled exclusively by
  SBM Application Engine
  itself, instead of IIS. This configuration is common if your
  SBM
  system is set up with
  **NT Challenge Response** for end-user authentication. After
  upgrade, this means that you must now specify the Windows domain for Web
  service calls in
  SBM Configurator,
  otherwise the domain that the IIS server machine is installed on is used for
  user validation.
* The **Require appended text** option, available for
  *Journal* fields on the Attributes tab (field Property Editor)
  and the Field Overrides tab (workflow Property Editor) now works as intended.
  When the **Required** and **Require appended text** options are selected,
  users must append text to the field during a transition. When only**Required** is selected, users do not need to append text if there is an
  existing entry.

  In past releases, selecting only the **Required** option would
  require users to append text to an existing entry. Now, the **Require appended
  text** option must also be selected to require users to append text.

### Upgrading Customizations and Integrations

Review the following information for help with upgrading custom
changes and integrations.

* If you made custom modifications to any HTML templates, e-mail
  templates, or online help files, you must merge your changes into the
  newly-upgraded files, and then use
  SBM System Administrator
  to
  **Put Files in Database**. All templates and images in the
  database are replaced by files on your local machine as part of this operation.
  Backup templates are stored on the
  installDir\SBM\Application
  Engine
  server here:

  ```
  installDir\Serena\SBM\Application Engine\Backup<version>-<date>-<time>
  ```
  Note: For a list of configuration Files, Web Interface templates,
  JavaScript files, and strings that have changed in this release, refer to
  solution
   [S142555](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=S142555 ). You must manually merge some of
  your existing SSO customizations into the newly installed files after you
  upgrade your software and database.

  If you used custom HTML templates in your reports, the reports
  might not display properly after upgrade. Consider using the default template
  or modifying it as needed instead. For example, as of
  SBM
  10.1.2, several changes were made to Summary Reports that might not display
  properly using a custom template from a prior release. Instead, either use the
  new default template or merge your chanes into the default template to create a
  new custom template.
* If you installed the TT4ZMF integration prior to upgrading, you
  must follow the instructions in the TT4ZMF readme to reinstall the integration
  after the
  SBM
  upgrade is complete.
* In
  SBM
  10.1.2, the
  SSO
  Login Application (Federation Server) was merged with the
  SSO
  Security Token Service (STS) into a single
  SSO
  Security Server (also known as the Identity Provider (IDP)). This means that
  the
  ALFSSOLogin.war and
  TokenService.war directories were merged and
  replaced with a new
  idp directory on the
  SSO
  server.

  If you are upgrading from a release prior to 10.1.2 and you have
  created custom
  SSO
  integrations, you must review all URLs and calls to ensure that they use the
  latest directory names. For example, if your existing integrations call the
  Security Token Service (STS), you must ensure that the new
  idp directory is used.

  The endpoints of the
  SSO
  services must be changed accordingly. The relative URIs will stay the same, but
  since the application is new, the login application entry point will be
  http(s)://host[:port]/idp/login. For the STS,
  it will be:
  http(s)://host[:port]/idp/services/Trust.
* If you configured your system to use anonymous events prior to the
  upgrade, you must either add credentials to your events (preferred) or you must
  select the
  Allow Anonymous Events check box in
  SBM Configurator
  and enter an
  SBM
  user name and password to use anonymous events after the upgrade.

## Fixed Issues

A list of defects fixed in this version can be found in the
[Knowledge Base](http://knowledgebase.serena.com/InfoCenter/index?page=content&cat=MASHUPS_11.4_RESOLVED&channel=DEFECTS). You must have a user account to view
items in the Knowledge Base. Register for a free account if you do not have
already have one.

## Known Issues

This section
describes known issues and contains the following categories:

* [Documentation Issues](#DocumentationIssues)
* [Installation and Configuration Issues](#InstallationIssues)
* [Administrator Issues](#MashupAdministratorIssues)

For a complete list of known issues and potential workarounds, refer to
the
[Knowledge Base](http://knowledgebase.serena.com/InfoCenter/index?page=content&cat=MASHUPS_11.4_REPORTED&channel=DEFECTS). You must have a user
account to view items in the Knowledge Base. Register for a free account if you
do not have already have one.

### Documentation Issues

* The
  SBM Installation and Configuration
  Guide
  pre-installation checklist erroneously states that users who will access
  Application Administrator
  must have Flash installed in order to access the interface.
  Application Administrator
  was updated in 11.4 to use HTML5 instead of Flash, so this note can be ignored.

### Installation and Configuration Issues

* The
  SBM
  Tomcat components in 11.X run on Java 8. Due to known issues in this version of
  Java, if client certificate authentication is enabled between components in
  SBM,
  all communication from Tomcat to IIS fails. Also, if SSO is used, users cannot
  log in to
  SBM
  when client certificate authentication is enabled. This means that you if have
  client certificate authentication enabled prior to the upgrade, you must
  disable it after the upgrade is finished. Alternatively, you can leave client
  certificate authentication enabled, and perform the steps described in
  [D22099](http://knowledgebase.serena.com/InfoCenter/index?page=content&id=D22099) to work around this problem.

  Once these defects (described
  [here](https://bugs.openjdk.java.net/browse/JDK-8054316) and
  [here](https://bugs.openjdk.java.net/browse/JDK-8068812)) are addressed, the JRE that is included with
  SBM
  will be updated.
* The ODBC connection to Oracle fails and the
  following error appears when you attempt to connect to an Oracle 12c Release 2
  database:
  ```
  [SBM][ODBC Oracle Wire Protocol driver][Oracle]ORA-28040: No matching authentication protocol
  ```

  When you attempt a test connection on the
  Database Servers tab in
  SBM Configurator,
  it fails as well.

  This error appears as a result of an Oracle defect (refer to Bug
  14575666 described
  [here](https://docs.oracle.com/database/121/READM/chapter12102.htm#READM266)). To work around this problem, on
  the Oracle server, edit the
  sqlnet.ora file and set the
  `SQLNET.ALLOWED_LOGON_VERSION` value to 8.

### Administrator Issues

#### SBM Application Repository Issues

* The
  following issue is only applicable if you had previously upgraded to 10.1 or
  10.1.1.1. If you did not use either version prior to upgrading, then you can
  ignore this information.

  Values in promotion profiles that were created in 10.1 or 10.1.1.1
  were set to
  **All** by default. Starting with 10.1.1.2, entities for new
  items (items added to a process app since the profile was created) will be set
  to
  **None** by default.

  In addition:
  + Profiles created prior to 10.1 that had entities set to
    **None** may have been incorrectly using
    **All**. These entities will be set back to
    **None**.
  + Profiles created in 10.1 or 10.1.1.1 that had entities set to
    the default
    **All** may also be set to
    **None**. These entities must be manually corrected.In general, it is recommended that you review your promotion
  profiles and adjust the settings accordingly.

## Legal Notice

### Trademarks

Serena, Dimensions, ChangeMan, Comparex, and StarTool are registered
trademarks of Serena Software, Inc. The Serena logo, PVCS, TeamTrack, License
Manager and Composer are trademarks of Serena Software, Inc. All other products
or company names are used for identification purposes only, and may be
trademarks of their respective owners.

Copyright © 2018 Serena Software, Inc., a Micro Focus company. All rights reserved.


