https://github.com/sinatra/sinatra/commit/6ad721abcfe36334108dcdd05d046c361e1b7a9c
https://github.com/sinatra/sinatra/pull/1379
