=== Content from launchpad.net_8de1da38_20250126_015751.html ===

[Log in / Register](https://launchpad.net/~andyngo/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~andyngo)

## [Andy Ngo](https://launchpad.net/~andyngo)

* Overview
* [Code](https://code.launchpad.net/~andyngo)
* [Bugs](https://bugs.launchpad.net/~andyngo)
* [Blueprints](https://blueprints.launchpad.net/~andyngo)
* [Translations](https://translations.launchpad.net/~andyngo)
* [Answers](https://answers.launchpad.net/~andyngo)

* [Related packages](https://launchpad.net/~andyngo/%2Brelated-packages)
* [Related projects](https://launchpad.net/~andyngo/%2Brelated-projects)

## User information

Launchpad Id:
andyngo

Email:
[Log in](%2Blogin) for email information.

Member since:
2018-10-03

Languages:

English

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~andyngo/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## Latest memberships

Andy Ngo is not an
active member of any Launchpad teams.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_67443c71_20250124_152647.html ===

[Log in / Register](https://bugs.launchpad.net/keystone/%2Bbug/1795800/%2Blogin)

[![](https://launchpadlibrarian.net/359059841/OpenStack_Project_Keystone_mascot%20%281%29.png)](https://launchpad.net/keystone)

## [OpenStack Identity (keystone)](https://launchpad.net/keystone)

* [Overview](https://launchpad.net/keystone)
* [Code](https://code.launchpad.net/keystone)
* [Bugs](https://bugs.launchpad.net/keystone)
* [Blueprints](https://blueprints.launchpad.net/keystone)
* [Translations](https://translations.launchpad.net/keystone)
* [Answers](https://answers.launchpad.net/keystone)

# Timing oracle in core auth plugin simplifies brute-forcing usernames

Bug #1795800 reported by
[Andy Ngo](https://launchpad.net/~andyngo)
on 2018-10-03

[8](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Identity (keystone)](https://bugs.launchpad.net/keystone) | Triaged | Wishlist | Unassigned |  |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Won't Fix | Undecided | Unassigned |  |

### Bug Description

The response times for POST /v3/auth/tokens are significantly higher for valid usernames compared to those of invalid ones, making it possible to enumerate users on the system.

Examples:

# For invalid username

+ Request

POST /v3/auth/tokens HTTP/1.1

Host: hostname:5000

Connection: close

Content-Length: 141

Content-Type: application/json

{

   "auth":{

      "identity":{

         "methods":[

            "password"

         ],

         "password":{

            "user":{

               "name":"nonexisting",

               "domain":{

                  "name":"Default"

               },

               "password":"devstacker"

            }

         }

      }

   }

}

+ Response Time: <150ms

# For valid username ('admin' in this case)

+ Request

POST /v3/auth/tokens HTTP/1.1

Host: hostname:5000

Connection: close

Content-Length: 139

Content-Type: application/json

{

   "auth":{

      "identity":{

         "methods":[

            "password"

         ],

         "password":{

            "user":{

               "name":"admin",

               "domain":{

                  "name":"Default"

               },

               "password":"devstacker"

            }

         }

      }

   }

}

+ Response time: >600ms

# Tested version

v3.8

[UPDATE 3 Oct 2018 5:01 AEST]

Looks like it's also possible to enumerate for valid "domain" too. There're 2 ways that I can see:

\* With valid username: use the above user enum bug to guess the valid username, then brute the "domain" parameter. Response times are significantly higher for valid compared to invalid domains.

\* Without valid username: get a baseline response time using invalid username AND invalid domain name. Bruteforce the "domain" param until the response time hits an average high. For me invalid domain falls in the 90-100ms range whereas valid ones show 100+ms. This one looks a bit more obscure i.e. timing difference is not as distinguishable, but should still be recognizable with a good sample size.

See [original description](comments/0)

Tags:

[security](/keystone/%2Bbugs?field.tag=security)

## CVE References

* [2018-20170](/bugs/cve/2018-20170 "** DISPUTED ** OpenStack Keystone thr...")

[Andy Ngo (andyngo)](https://launchpad.net/~andyngo)
on 2018-10-03

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2018-10-03: |  |  | [#1](/keystone/%2Bbug/1795800/comments/1) |
| --- | --- | --- | --- |

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

| **description**: | updated |
| --- | --- |
| Changed in ossa: | |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gage Hugo (gagehugo)](https://launchpad.net/~gagehugo) wrote on 2018-10-03: |  |  | [#2](/keystone/%2Bbug/1795800/comments/2) |
| --- | --- | --- | --- |

I can attempt to recreate this, what environment did you use to test this? Looks like devstack?

I can attempt to recreate this, what environment did you use to test this? Looks like devstack?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Andy Ngo (andyngo)](https://launchpad.net/~andyngo) wrote on 2018-10-03: |  |  | [#3](/keystone/%2Bbug/1795800/comments/3) |
| --- | --- | --- | --- |

I tested this in a test env we have here in our company on Identity 3.8. The POST payload was from the API <https://developer.openstack.org/api-ref/identity/v3/#password-authentication-with-unscoped-authorization>

I tested this in a test env we have here in our company on Identity 3.8. The POST payload was from the API https://developer.openstack.org/api-ref/identity/v3/#password-authentication-with-unscoped-authorization

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Morgan Fainberg (mdrnstm)](https://launchpad.net/~mdrnstm) wrote on 2018-10-03: |  |  | [#4](/keystone/%2Bbug/1795800/comments/4) |
| --- | --- | --- | --- |

There are a number of things here that make it difficult to solve:

1) High level languages are much harder to solve these types of issues in (e.g. Python)

2) There is high variance on response times based upon hardware, caching, etc.

3) We already get massive complaints when auth times go up a minute amount per request (250ms increase generates these)

While I agree that there is some level of "it would be nice to mitigate guessing of usernames". I think this is going to be a Class D[0] bug and we should be able to open this up to the public, and generate discussion on acceptable solutions (fixed minimum auth times, random sleeps with fixed minimums, samples of real auth responses, a tuneable to set a minimum + sleep, etc).

[0] <https://security.openstack.org/vmt-process.html#incident-report-taxonomy>

There are a number of things here that make it difficult to solve:
1) High level languages are much harder to solve these types of issues in (e.g. Python)
2) There is high variance on response times based upon hardware, caching, etc.
3) We already get massive complaints when auth times go up a minute amount per request (250ms increase generates these)
While I agree that there is some level of "it would be nice to mitigate guessing of usernames". I think this is going to be a Class D[0] bug and we should be able to open this up to the public, and generate discussion on acceptable solutions (fixed minimum auth times, random sleeps with fixed minimums, samples of real auth responses, a tuneable to set a minimum + sleep, etc).
[0] https://security.openstack.org/vmt-process.html#incident-report-taxonomy

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2018-10-03: |  |  | [#5](/keystone/%2Bbug/1795800/comments/5) |
| --- | --- | --- | --- |

My opinions mirror those expressed by Damien Miller in his oss-security ML followup[\*] about CVE-2018-15473 for a similar report in OpenSSH. To summarize, it isn't actually a user enumeration bug, it's a timing oracle which can lead to user enumeration via brute-force mechanisms, and there's a wide gulf of criticality between the two. The usual mitigations against brute-force attacks apply here.

As he noted and Morgan also stated above, it's really impractical to eliminate these sorts of oracles and most ways we might attempt to accomplish that are also likely to introduce noticeable performance regressions. I know it's been a modern shift to start considering usernames sensitive data, but strong passwords/keys should be the focus for protecting authentication so any system design which is weakened by username disclosure is already severely flawed.

If there are ways to improve or mitigate this particular situation in software then I'm not against discussing them, but I agree it's not necessary to do so under embargo.

[\*] <https://www.openwall.com/lists/oss-security/2018/08/24/1>

My opinions mirror those expressed by Damien Miller in his oss-security ML followup[\*] about CVE-2018-15473 for a similar report in OpenSSH. To summarize, it isn't actually a user enumeration bug, it's a timing oracle which can lead to user enumeration via brute-force mechanisms, and there's a wide gulf of criticality between the two. The usual mitigations against brute-force attacks apply here.
As he noted and Morgan also stated above, it's really impractical to eliminate these sorts of oracles and most ways we might attempt to accomplish that are also likely to introduce noticeable performance regressions. I know it's been a modern shift to start considering usernames sensitive data, but strong passwords/keys should be the focus for protecting authentication so any system design which is weakened by username disclosure is already severely flawed.
If there are ways to improve or mitigate this particular situation in software then I'm not against discussing them, but I agree it's not necessary to do so under embargo.
[\*] https://www.openwall.com/lists/oss-security/2018/08/24/1

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gage Hugo (gagehugo)](https://launchpad.net/~gagehugo) wrote on 2018-10-03: |  |  | [#6](/keystone/%2Bbug/1795800/comments/6) |
| --- | --- | --- | --- |

Test this with a containerized OpenStack deployment that runs pretty fast, both authenticating successfully and by providing a non-existent username produced a difference of ~0.020 seconds.

I agree with both Morgan and Jeremy, there likely isn't a very straightforward method to fixing this, as it greatly depends on the overall setup: deployment (VM/container), caching mechanisms, and hardware will all factor into this. Making this public and having a discussion on it is likely the preferred method for tackling this issue.

Test this with a containerized OpenStack deployment that runs pretty fast, both authenticating successfully and by providing a non-existent username produced a difference of ~0.020 seconds.
I agree with both Morgan and Jeremy, there likely isn't a very straightforward method to fixing this, as it greatly depends on the overall setup: deployment (VM/container), caching mechanisms, and hardware will all factor into this. Making this public and having a discussion on it is likely the preferred method for tackling this issue.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2018-10-03: |  |  | [#7](/keystone/%2Bbug/1795800/comments/7) |
| --- | --- | --- | --- |

Thanks, I've gone ahead and triaged this as a hardening opportunity for now.

Thanks, I've gone ahead and triaged this as a hardening opportunity for now.

| **information type**: | Private Security → Public |
| --- | --- |
| Changed in ossa: | |
| **status**: | Incomplete → Won't Fix |
| **tags**: | added: security |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Morgan Fainberg (mdrnstm)](https://launchpad.net/~mdrnstm) wrote on 2018-10-24: |  |  | [#8](/keystone/%2Bbug/1795800/comments/8) |
| --- | --- | --- | --- |

I don't know how we'll address this. Realistically, I think this is going to have to be marked as invalid/wont fix/opinion. I'm going to mark it as wont fix, we can circle back on it if there is more discussion to be had.

I don't know how we'll address this. Realistically, I think this is going to have to be marked as invalid/wont fix/opinion. I'm going to mark it as wont fix, we can circle back on it if there is more discussion to be had.

| Changed in keystone: | |
| --- | --- |
| **status**: | New → Won't Fix |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Colleen Murphy (krinkle)](https://launchpad.net/~krinkle) wrote on 2018-10-25: |  |  | [#9](/keystone/%2Bbug/1795800/comments/9) |
| --- | --- | --- | --- |

I disagree that this is too hard to fix. In fact I'm fairly sure I found it already:

<http://git.openstack.org/cgit/openstack/keystone/tree/keystone/auth/plugins/core.py?h=stable/pike#n174>

We do a user lookup long before bothering to try to validate the password. The fix is to continue to go through the motions of trying to validate the password while keeping track of the fact that the user is already unauthorized. This is independent of hardware and caching mechanisms.

The performance slowdown would only occur for invalid authentication, not for valid ones, so I think it's an acceptable hit.

I disagree that this is too hard to fix. In fact I'm fairly sure I found it already:
http://git.openstack.org/cgit/openstack/keystone/tree/keystone/auth/plugins/core.py?h=stable/pike#n174
We do a user lookup long before bothering to try to validate the password. The fix is to continue to go through the motions of trying to validate the password while keeping track of the fact that the user is already unauthorized. This is independent of hardware and caching mechanisms.
The performance slowdown would only occur for invalid authentication, not for valid ones, so I think it's an acceptable hit.

| Changed in keystone: | |
| --- | --- |
| **status**: | Won't Fix → Triaged |
| **importance**: | Undecided → Wishlist |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Andy Ngo (andyngo)](https://launchpad.net/~andyngo) wrote on 2018-12-10: |  |  | [#10](/keystone/%2Bbug/1795800/comments/10) |
| --- | --- | --- | --- |

Regardless of the "to fix or not to fix" question, can we please start the process of filing this bug with MITRE and get a CVE assigned for tracking?

Perhaps we should consider disclosing this issue to the public via an official channel e.g. OpenStack maintainers?

I think we have all agreed that this is indeed an information disclosure issue. The question of how easy it is to fix should not prevent us from carrying out our duty of care i.e. properly disclosing to keystone users.

After all, security issues mean different things to different organisations and, along with that, carry difference severity.

Regardless of the "to fix or not to fix" question, can we please start the process of filing this bug with MITRE and get a CVE assigned for tracking?
Perhaps we should consider disclosing this issue to the public via an official channel e.g. OpenStack maintainers?
I think we have all agreed that this is indeed an information disclosure issue. The question of how easy it is to fix should not prevent us from carrying out our duty of care i.e. properly disclosing to keystone users.
After all, security issues mean different things to different organisations and, along with that, carry difference severity.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2018-12-10: |  |  | [#11](/keystone/%2Bbug/1795800/comments/11) |
| --- | --- | --- | --- |

The OpenStack Vulnerability Management Team only requests CVE assignments to track vulnerabilities corresponding to fixes they're announcing via OpenStack Security Advisory publications, but anyone can request a CVE assignment from MITRE for any issue they'd like to track (or assign one themselves directly if they're a CNA). Please don't let the ongoing conversation stop you from obtaining a CVE for this particular bug if you want one, but please note within the bug report if you do so in order that we might avoid future duplication.

Technically this concern is already disclosed to the public by nature of being a public bug report (I just now noticed I failed to clean up the embargo preamble in the description when making it public in October, but have gone ahead and taken care of it just now). Further, as it's tagged "security" all comments are also being copied to the public openstack-security mailing list (I have no idea what "OpenStack Maintainers" is in your last comment): <http://lists.openstack.org/pipermail/openstack-security/2018-December/>

The OpenStack Vulnerability Management Team only requests CVE assignments to track vulnerabilities corresponding to fixes they're announcing via OpenStack Security Advisory publications, but anyone can request a CVE assignment from MITRE for any issue they'd like to track (or assign one themselves directly if they're a CNA). Please don't let the ongoing conversation stop you from obtaining a CVE for this particular bug if you want one, but please note within the bug report if you do so in order that we might avoid future duplication.
Technically this concern is already disclosed to the public by nature of being a public bug report (I just now noticed I failed to clean up the embargo preamble in the description when making it public in October, but have gone ahead and taken care of it just now). Further, as it's tagged "security" all comments are also being copied to the public openstack-security mailing list (I have no idea what "OpenStack Maintainers" is in your last comment): http://lists.openstack.org/pipermail/openstack-security/2018-December/

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Andy Ngo (andyngo)](https://launchpad.net/~andyngo) wrote on 2018-12-17: |  |  | [#12](/keystone/%2Bbug/1795800/comments/12) |
| --- | --- | --- | --- |

CVE-2018-20170 assigned

CVE-2018-20170 assigned

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2018-12-17

| **summary**: | - Username enumeration via response timing difference+ Timing oracle in core auth plugin simplifies brute-forcing usernames |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2018-12-17: |  |  | [#13](/keystone/%2Bbug/1795800/comments/13) |
| --- | --- | --- | --- |

I've updated the bug title to more accurately indicate this is a timing oracle in Keystone's core auth plugin, and so is still mitigated by the usual account brute-forcing defenses (e.g., enforcing strong authentication secrets, temporarily rejecting failing authentication attempts per source IP address, throttling calls to relevant API methods, et cetera).

I've updated the bug title to more accurately indicate this is a timing oracle in Keystone's core auth plugin, and so is still mitigated by the usual account brute-forcing defenses (e.g., enforcing strong authentication secrets, temporarily rejecting failing authentication attempts per source IP address, throttling calls to relevant API methods, et cetera).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2018-12-17: |  |  | [#14](/keystone/%2Bbug/1795800/comments/14) |
| --- | --- | --- | --- |

Note that, unlike what the CVE dispute info suggests, the Keystone team has not concluded performance degradation would result from possible methods of reducing the efficacy of this particular oracle. They in fact indicated that fixes for this hardening opportunity would be welcome ("wishlist" importance, please see Colleen's comment #9).

Note that, unlike what the CVE dispute info suggests, the Keystone team has not concluded performance degradation would result from possible methods of reducing the efficacy of this particular oracle. They in fact indicated that fixes for this hardening opportunity would be welcome ("wishlist" importance, please see Colleen's comment #9).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2018-12-17:  [**Fix proposed to keystone (master)**](/keystone/%2Bbug/1795800/comments/15) |  |  | [#15](/keystone/%2Bbug/1795800/comments/15) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/625699>

Fix proposed to branch: master
Review: https://review.openstack.org/625699

| Changed in keystone: | |
| --- | --- |
| **assignee**: | nobody → Gage Hugo (gagehugo) |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2018-12-17: |  |  | [#16](/keystone/%2Bbug/1795800/comments/16) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/625700>

Fix proposed to branch: master
Review: https://review.openstack.org/625700

[Lance Bragstad (lbragstad)](https://launchpad.net/~lbragstad)
on 2018-12-17

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2018-12-17:  [**Change abandoned on keystone (master)**](/keystone/%2Bbug/1795800/comments/17) |  |  | [#17](/keystone/%2Bbug/1795800/comments/17) |
| --- | --- | --- | --- |

Change abandoned by Gage Hugo (<email address hidden>) on branch: master

Review: <https://review.openstack.org/625700>

Change abandoned by Gage Hugo (gagehugo@gmail.com) on branch: master
Review: https://review.openstack.org/625700

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Andy Ngo (andyngo)](https://launchpad.net/~andyngo) wrote on 2019-01-03: |  |  | [#18](/keystone/%2Bbug/1795800/comments/18) |
| --- | --- | --- | --- |

Have requested MITRE to review this thread again and updated the CVE dispute info.

New one is:

"\*\* DISPUTED \*\* OpenStack Keystone through 14.0.1 has a user enumeration vulnerability because invalid usernames have much faster responses than valid ones for a POST /v3/auth/tokens request. NOTE: the vendor's position is that this is a hardening opportunity, and not necessarily an issue that should have an OpenStack Security Advisory."

Have requested MITRE to review this thread again and updated the CVE dispute info.
New one is:
"\*\* DISPUTED \*\* OpenStack Keystone through 14.0.1 has a user enumeration vulnerability because invalid usernames have much faster responses than valid ones for a POST /v3/auth/tokens request. NOTE: the vendor's position is that this is a hardening opportunity, and not necessarily an issue that should have an OpenStack Security Advisory."

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-02-04:  [**Fix proposed to keystone (master)**](/keystone/%2Bbug/1795800/comments/19) |  |  | [#19](/keystone/%2Bbug/1795800/comments/19) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/634826>

Fix proposed to branch: master
Review: https://review.openstack.org/634826

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2019-02-14:  [**Change abandoned on keystone (master)**](/keystone/%2Bbug/1795800/comments/20) |  |  | [#20](/keystone/%2Bbug/1795800/comments/20) |
| --- | --- | --- | --- |

Change abandoned by Gage Hugo (<email address hidden>) on branch: master

Review: <https://review.openstack.org/625699>

Reason: Replaced by <https://review.openstack.org/#/c/634826/>

Change abandoned by Gage Hugo (gagehugo@gmail.com) on branch: master
Review: https://review.openstack.org/625699
Reason: Replaced by https://review.openstack.org/#/c/634826/

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gage Hugo (gagehugo)](https://launchpad.net/~gagehugo) wrote on 2019-03-25: |  |  | [#21](/keystone/%2Bbug/1795800/comments/21) |
| --- | --- | --- | --- |

Still working on this, I've gotten a flask hook setup to catch any unauthorized, allowing us to delay the Unauthorized exception until the very end, however I'm still not seeing identical times. Local testing is showing .480 seconds for an existing user while it's gone from ~0.022 to ~0.033 for invalid users with delaying the exception.

I'm wondering if this is due to the delay with generating a token for successful authentication, instead of simply continuing on when failing to authenticate.

Still working on this, I've gotten a flask hook setup to catch any unauthorized, allowing us to delay the Unauthorized exception until the very end, however I'm still not seeing identical times. Local testing is showing .480 seconds for an existing user while it's gone from ~0.022 to ~0.033 for invalid users with delaying the exception.
I'm wondering if this is due to the delay with generating a token for successful authentication, instead of simply continuing on when failing to authenticate.

[Gage Hugo (gagehugo)](https://launchpad.net/~gagehugo)
on 2020-03-18

| Changed in keystone: | |
| --- | --- |
| **assignee**: | Gage Hugo (gagehugo) → nobody |
| **status**: | In Progress → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-03-18: |  |  | [#22](/keystone/%2Bbug/1795800/comments/22) |
| --- | --- | --- | --- |

Change abandoned by Gage Hugo (<email address hidden>) on branch: master

Review: <https://review.opendev.org/634826>

Change abandoned by Gage Hugo (gagehugo@gmail.com) on branch: master
Review: https://review.opendev.org/634826

[See full activity log](https://bugs.launchpad.net/keystone/%2Bbug/1795800/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/keystone/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/keystone/%2Bbug/1795800/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/keystone/%2Bbug/1795800/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/keystone/%2Bbug/1795800/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_22884c23_20250126_015751.html ===

[Log in / Register](https://launchpad.net/~fungi/%2Blogin)

[![](https://launchpadlibrarian.net/112681987/gnome-gmush-64.png)](https://launchpad.net/~fungi)

## [Jeremy Stanley](https://launchpad.net/~fungi)

* Overview
* [Code](https://code.launchpad.net/~fungi)
* [Bugs](https://bugs.launchpad.net/~fungi)
* [Blueprints](https://blueprints.launchpad.net/~fungi)
* [Translations](https://translations.launchpad.net/~fungi)
* [Answers](https://answers.launchpad.net/~fungi)

<http://fungi.yuggoth.org/>

* [Related packages](https://launchpad.net/~fungi/%2Brelated-packages)
* [Related projects](https://launchpad.net/~fungi/%2Brelated-projects)

## User information

Launchpad Id:
fungi

Email:
[Log in](%2Blogin) for email information.

Member since:
2006-06-16

[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of OpenStack Vulnerability Management team](https://launchpadlibrarian.net/83816787/icon.png "Member of OpenStack Vulnerability Management team")](/~openstack-vuln-mgmt)
[![Icon of Python OpenStack Client Bugs](https://launchpadlibrarian.net/697274771/osc-icon.png "Member of Python OpenStack Client Bugs")](/~python-openstackclient-bugs)
[![Icon of Python OpenStack Client](https://launchpadlibrarian.net/697274843/osc-icon.png "Member of Python OpenStack Client")](/~python-openstackclient)
[![Icon of Swift](https://launchpadlibrarian.net/52560230/os14.png "Member of Swift")](/~swift)

Languages:

English

OpenPGP keys:

97AE496FC02DEC9FC353B2E748F9961143495829

SSH keys:

[fungi@yuggoth.org](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[311](https://launchpad.net/~fungi/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**fungi**
 on
**irc.libera.chat**

![IRC](/@@/social-irc "IRC")
**fungi**
 on
**irc.oftc.net**

## [All bugs in progress](https://launchpad.net/~fungi/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1354829 [Booting from stale snapshots in rax-dfw leads to miscellaneous failures](https://bugs.launchpad.net/openstack-ci/%2Bbug/1354829) |  |
| --- | --- | --- |
| in [OpenStack Core Infrastructure](/openstack-ci), [OpenStack Dashboard (Horizon)](/horizon), [neutron](/neutron), [tempest](/tempest) | | |

| --- | --- | --- | --- | --- | --- |

## [All memberships](https://launchpad.net/~fungi/%2Bparticipation) Latest memberships

| [Oslo Core security contacts](/~oslo-coresec)  Joined on 2023-10-02 | |
| --- | --- |
| [Glance Release](/~glance-release)  Joined on 2021-07-27 | |
| [Ubuntu SSO 2-factor testers](/~sso-2f-testers)  Joined on 2020-11-12 | |
| [OpenDev Two-Factor Authentication](/~opendev-2fa)  Joined on 2020-11-05 | |
| [Trove Drivers](/~trove-drivers)  Joined on 2020-06-22 | |

## [Recent activities](https://launchpad.net/~fungi/%2Bkarma) Most active in

| [OpenStack Security Advisory](/ossa) |  |  |
| --- | --- | --- |
| [OpenStack Compute (nova)](/nova) |  |  |
| [Ubuntu](/ubuntu) |  |  |
| [OpenStack Security Notes](/ossn) |  |  |
| [Ubuntu Cloud Archive](/cloud-archive) |  |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


