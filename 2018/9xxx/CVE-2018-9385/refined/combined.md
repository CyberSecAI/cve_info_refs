=== Content from git.kernel.org_182f2c38_20250126_073530.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=c02433dd6de32f042cf3ffe476746b1115b8c096)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=c02433dd6de32f042cf3ffe476746b1115b8c096)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=c02433dd6de32f042cf3ffe476746b1115b8c096)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=c02433dd6de32f042cf3ffe476746b1115b8c096)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mark Rutland <mark.rutland@arm.com> | 2016-11-03 20:23:13 +0000 |
| --- | --- | --- |
| committer | Catalin Marinas <catalin.marinas@arm.com> | 2016-11-11 18:25:46 +0000 |
| commit | [c02433dd6de32f042cf3ffe476746b1115b8c096](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=c02433dd6de32f042cf3ffe476746b1115b8c096) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=c02433dd6de32f042cf3ffe476746b1115b8c096)) | |
| tree | [265e0b7925a4c665a64b5f8d4279d16dcb947ee2](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | |
| parent | [1b7e2296a822dfd2349960addc42a139360ce769](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=1b7e2296a822dfd2349960addc42a139360ce769) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=c02433dd6de32f042cf3ffe476746b1115b8c096&id2=1b7e2296a822dfd2349960addc42a139360ce769)) | |
| download | [linux-c02433dd6de32f042cf3ffe476746b1115b8c096.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-c02433dd6de32f042cf3ffe476746b1115b8c096.tar.gz) | |

arm64: split thread\_info from task stackThis patch moves arm64's struct thread\_info from the task stack into
task\_struct. This protects thread\_info from corruption in the case of
stack overflows, and makes its address harder to determine if stack
addresses are leaked, making a number of attacks more difficult. Precise
detection and handling of overflow is left for subsequent patches.
Largely, this involves changing code to store the task\_struct in sp\_el0,
and acquire the thread\_info from the task struct. Core code now
implements current\_thread\_info(), and as noted in <linux/sched.h> this
relies on offsetof(task\_struct, thread\_info) == 0, enforced by core
code.
This change means that the 'tsk' register used in entry.S now points to
a task\_struct, rather than a thread\_info as it used to. To make this
clear, the TI\_\* field offsets are renamed to TSK\_TI\_\*, with asm-offsets
appropriately updated to account for the structural change.
Userspace clobbers sp\_el0, and we can no longer restore this from the
stack. Instead, the current task is cached in a per-cpu variable that we
can safely access from early assembly as interrupts are disabled (and we
are thus not preemptible).
Both secondary entry and idle are updated to stash the sp and task
pointer separately.
Signed-off-by: Mark Rutland <mark.rutland@arm.com>
Tested-by: Laura Abbott <labbott@redhat.com>
Cc: AKASHI Takahiro <takahiro.akashi@linaro.org>
Cc: Andy Lutomirski <luto@kernel.org>
Cc: Ard Biesheuvel <ard.biesheuvel@linaro.org>
Cc: James Morse <james.morse@arm.com>
Cc: Kees Cook <keescook@chromium.org>
Cc: Suzuki K Poulose <suzuki.poulose@arm.com>
Cc: Will Deacon <will.deacon@arm.com>
Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=c02433dd6de32f042cf3ffe476746b1115b8c096)

| -rw-r--r-- | [arch/arm64/Kconfig](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/Kconfig?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [arch/arm64/include/asm/Kbuild](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/include/asm/Kbuild?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 1 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/arm64/include/asm/current.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/include/asm/current.h?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 22 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/arm64/include/asm/smp.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/include/asm/smp.h?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 1 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/arm64/include/asm/thread\_info.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/include/asm/thread_info.h?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 24 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/arm64/kernel/asm-offsets.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/kernel/asm-offsets.c?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 8 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/arm64/kernel/entry.S](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/kernel/entry.S?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 41 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/arm64/kernel/head.S](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/kernel/head.S?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 11 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/arm64/kernel/process.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/kernel/process.c?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 16 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/arm64/kernel/smp.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/kernel/smp.c?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | 2 | |  |  |  | | --- | --- | --- | |

10 files changed, 73 insertions, 54 deletions

| diff --git a/arch/arm64/Kconfig b/arch/arm64/Kconfigindex 77a807a844aca6..0b8227f23eed61 100644--- a/[arch/arm64/Kconfig](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/Kconfig?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/Kconfig](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/Kconfig?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -109,6 +109,7 @@ config ARM64 select POWER\_SUPPLY select SPARSE\_IRQ select SYSCTL\_EXCEPTION\_TRACE+ select THREAD\_INFO\_IN\_TASK help ARM 64-bit (AArch64) Linux support. diff --git a/arch/arm64/include/asm/Kbuild b/arch/arm64/include/asm/Kbuildindex 44e1d7f10add1f..28196b18e3947c 100644--- a/[arch/arm64/include/asm/Kbuild](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/include/asm/Kbuild?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/include/asm/Kbuild](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/include/asm/Kbuild?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -1,7 +1,6 @@ generic-y += bugs.h generic-y += clkdev.h generic-y += cputime.h-generic-y += current.h generic-y += delay.h generic-y += div64.h generic-y += dma.hdiff --git a/arch/arm64/include/asm/current.h b/arch/arm64/include/asm/current.hnew file mode 100644index 00000000000000..f2bcbe2d98895e--- /dev/null+++ b/[arch/arm64/include/asm/current.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/include/asm/current.h?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -0,0 +1,22 @@+#ifndef \_\_ASM\_CURRENT\_H+#define \_\_ASM\_CURRENT\_H++#include <linux/compiler.h>++#include <asm/sysreg.h>++#ifndef \_\_ASSEMBLY\_\_++struct task\_struct;++static \_\_always\_inline struct task\_struct \*get\_current(void)+{+ return (struct task\_struct \*)read\_sysreg(sp\_el0);+}++#define current get\_current()++#endif /\* \_\_ASSEMBLY\_\_ \*/++#endif /\* \_\_ASM\_CURRENT\_H \*/+diff --git a/arch/arm64/include/asm/smp.h b/arch/arm64/include/asm/smp.hindex 968b08de820d43..a62db952ffcbbd 100644--- a/[arch/arm64/include/asm/smp.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/include/asm/smp.h?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/include/asm/smp.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/include/asm/smp.h?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -82,6 +82,7 @@ asmlinkage void secondary\_start\_kernel(void); \*/ struct secondary\_data { void \*stack;+ struct task\_struct \*task; long status; }; diff --git a/arch/arm64/include/asm/thread\_info.h b/arch/arm64/include/asm/thread\_info.hindex bce0f07483c10c..c17ad4d213d05d 100644--- a/[arch/arm64/include/asm/thread\_info.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/include/asm/thread_info.h?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/include/asm/thread\_info.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/include/asm/thread_info.h?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -47,41 +47,17 @@ typedef unsigned long mm\_segment\_t; struct thread\_info { unsigned long flags; /\* low level flags \*/ mm\_segment\_t addr\_limit; /\* address limit \*/- struct task\_struct \*task; /\* main task structure \*/ int preempt\_count; /\* 0 => preemptable, <0 => bug \*/- int cpu; /\* cpu \*/ };  #define INIT\_THREAD\_INFO(tsk) \ { \- .task = &tsk, \- .flags = 0, \ .preempt\_count = INIT\_PREEMPT\_COUNT, \ .addr\_limit = KERNEL\_DS, \ }  #define init\_stack (init\_thread\_union.stack) -/\*- \* how to get the thread information struct from C- \*/-static inline struct thread\_info \*current\_thread\_info(void) \_\_attribute\_const\_\_;--/\*- \* struct thread\_info can be accessed directly via sp\_el0.- \*- \* We don't use read\_sysreg() as we want the compiler to cache the value where- \* possible.- \*/-static inline struct thread\_info \*current\_thread\_info(void)-{- unsigned long sp\_el0;-- asm ("mrs %0, sp\_el0" : "=r" (sp\_el0));-- return (struct thread\_info \*)sp\_el0;-}- #define thread\_saved\_pc(tsk) \ ((unsigned long)(tsk->thread.cpu\_context.pc)) #define thread\_saved\_sp(tsk) \diff --git a/arch/arm64/kernel/asm-offsets.c b/arch/arm64/kernel/asm-offsets.cindex d30b2321c0ee07..c2dc9fa4f09bef 100644--- a/[arch/arm64/kernel/asm-offsets.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/asm-offsets.c?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/kernel/asm-offsets.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/asm-offsets.c?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -36,9 +36,10 @@ int main(void) { DEFINE(TSK\_ACTIVE\_MM, offsetof(struct task\_struct, active\_mm)); BLANK();- DEFINE(TI\_FLAGS, offsetof(struct thread\_info, flags));- DEFINE(TI\_PREEMPT, offsetof(struct thread\_info, preempt\_count));- DEFINE(TI\_ADDR\_LIMIT, offsetof(struct thread\_info, addr\_limit));+ DEFINE(TSK\_TI\_FLAGS, offsetof(struct task\_struct, thread\_info.flags));+ DEFINE(TSK\_TI\_PREEMPT, offsetof(struct task\_struct, thread\_info.preempt\_count));+ DEFINE(TSK\_TI\_ADDR\_LIMIT, offsetof(struct task\_struct, thread\_info.addr\_limit));+ DEFINE(TSK\_STACK, offsetof(struct task\_struct, stack)); BLANK(); DEFINE(THREAD\_CPU\_CONTEXT, offsetof(struct task\_struct, thread.cpu\_context)); BLANK();@@ -121,6 +122,7 @@ int main(void) DEFINE(TZ\_DSTTIME, offsetof(struct timezone, tz\_dsttime)); BLANK(); DEFINE(CPU\_BOOT\_STACK, offsetof(struct secondary\_data, stack));+ DEFINE(CPU\_BOOT\_TASK, offsetof(struct secondary\_data, task)); BLANK(); #ifdef CONFIG\_KVM\_ARM\_HOST DEFINE(VCPU\_CONTEXT, offsetof(struct kvm\_vcpu, arch.ctxt));diff --git a/arch/arm64/kernel/entry.S b/arch/arm64/kernel/entry.Sindex 2d4c83bc1f811b..6349a8324b4f6b 100644--- a/[arch/arm64/kernel/entry.S](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/entry.S?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/kernel/entry.S](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/entry.S?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -90,9 +90,8 @@  .if \el == 0 mrs x21, sp\_el0- mov tsk, sp- and tsk, tsk, #~(THREAD\_SIZE - 1) // Ensure MDSCR\_EL1.SS is clear,- ldr x19, [tsk, #TI\_FLAGS] // since we can unmask debug+ ldr\_this\_cpu tsk, \_\_entry\_task, x20 // Ensure MDSCR\_EL1.SS is clear,+ ldr x19, [tsk, #TSK\_TI\_FLAGS] // since we can unmask debug disable\_step\_tsk x19, x20 // exceptions when scheduling.  mov x29, xzr // fp pointed to user-space@@ -100,10 +99,10 @@ add x21, sp, #S\_FRAME\_SIZE get\_thread\_info tsk /\* Save the task's original addr\_limit and set USER\_DS (TASK\_SIZE\_64) \*/- ldr x20, [tsk, #TI\_ADDR\_LIMIT]+ ldr x20, [tsk, #TSK\_TI\_ADDR\_LIMIT] str x20, [sp, #S\_ORIG\_ADDR\_LIMIT] mov x20, #TASK\_SIZE\_64- str x20, [tsk, #TI\_ADDR\_LIMIT]+ str x20, [tsk, #TSK\_TI\_ADDR\_LIMIT] /\* No need to reset PSTATE.UAO, hardware's already set it to 0 for us \*/ .endif /\* \el == 0 \*/ mrs x22, elr\_el1@@ -139,7 +138,7 @@ .if \el != 0 /\* Restore the task's original addr\_limit. \*/ ldr x20, [sp, #S\_ORIG\_ADDR\_LIMIT]- str x20, [tsk, #TI\_ADDR\_LIMIT]+ str x20, [tsk, #TSK\_TI\_ADDR\_LIMIT]  /\* No need to restore UAO, it will be restored from SPSR\_EL1 \*/ .endif@@ -192,13 +191,14 @@ alternative\_else\_nop\_endif mov x19, sp // preserve the original sp  /\*- \* Compare sp with the current thread\_info, if the top- \* ~(THREAD\_SIZE - 1) bits match, we are on a task stack, and- \* should switch to the irq stack.+ \* Compare sp with the base of the task stack.+ \* If the top ~(THREAD\_SIZE - 1) bits match, we are on a task stack,+ \* and should switch to the irq stack. \*/- and x25, x19, #~(THREAD\_SIZE - 1)- cmp x25, tsk- b.ne 9998f+ ldr x25, [tsk, TSK\_STACK]+ eor x25, x25, x19+ and x25, x25, #~(THREAD\_SIZE - 1)+ cbnz x25, 9998f  adr\_this\_cpu x25, irq\_stack, x26 mov x26, #IRQ\_STACK\_START\_SP@@ -427,9 +427,9 @@ el1\_irq: irq\_handler  #ifdef CONFIG\_PREEMPT- ldr w24, [tsk, #TI\_PREEMPT] // get preempt count+ ldr w24, [tsk, #TSK\_TI\_PREEMPT] // get preempt count cbnz w24, 1f // preempt count != 0- ldr x0, [tsk, #TI\_FLAGS] // get flags+ ldr x0, [tsk, #TSK\_TI\_FLAGS] // get flags tbz x0, #TIF\_NEED\_RESCHED, 1f // needs rescheduling? bl el1\_preempt 1:@@ -444,7 +444,7 @@ ENDPROC(el1\_irq) el1\_preempt: mov x24, lr 1: bl preempt\_schedule\_irq // irq en/disable is done inside- ldr x0, [tsk, #TI\_FLAGS] // get new tasks TI\_FLAGS+ ldr x0, [tsk, #TSK\_TI\_FLAGS] // get new tasks TI\_FLAGS tbnz x0, #TIF\_NEED\_RESCHED, 1b // needs rescheduling? ret x24 #endif@@ -674,8 +674,7 @@ ENTRY(cpu\_switch\_to) ldp x29, x9, [x8], #16 ldr lr, [x8] mov sp, x9- and x9, x9, #~(THREAD\_SIZE - 1)- msr sp\_el0, x9+ msr sp\_el0, x1 ret ENDPROC(cpu\_switch\_to) @@ -686,7 +685,7 @@ ENDPROC(cpu\_switch\_to) ret\_fast\_syscall: disable\_irq // disable interrupts str x0, [sp, #S\_X0] // returned x0- ldr x1, [tsk, #TI\_FLAGS] // re-check for syscall tracing+ ldr x1, [tsk, #TSK\_TI\_FLAGS] // re-check for syscall tracing and x2, x1, #\_TIF\_SYSCALL\_WORK cbnz x2, ret\_fast\_syscall\_trace and x2, x1, #\_TIF\_WORK\_MASK@@ -706,14 +705,14 @@ work\_pending: #ifdef CONFIG\_TRACE\_IRQFLAGS bl trace\_hardirqs\_on // enabled while in userspace #endif- ldr x1, [tsk, #TI\_FLAGS] // re-check for single-step+ ldr x1, [tsk, #TSK\_TI\_FLAGS] // re-check for single-step b finish\_ret\_to\_user /\* \* "slow" syscall return path. \*/ ret\_to\_user: disable\_irq // disable interrupts- ldr x1, [tsk, #TI\_FLAGS]+ ldr x1, [tsk, #TSK\_TI\_FLAGS] and x2, x1, #\_TIF\_WORK\_MASK cbnz x2, work\_pending finish\_ret\_to\_user:@@ -746,7 +745,7 @@ el0\_svc\_naked: // compat entry point enable\_dbg\_and\_irq ct\_user\_exit 1 - ldr x16, [tsk, #TI\_FLAGS] // check for syscall hooks+ ldr x16, [tsk, #TSK\_TI\_FLAGS] // check for syscall hooks tst x16, #\_TIF\_SYSCALL\_WORK b.ne \_\_sys\_trace cmp scno, sc\_nr // check upper syscall limitdiff --git a/arch/arm64/kernel/head.S b/arch/arm64/kernel/head.Sindex 332e33193ccf15..eaafb253bbfa58 100644--- a/[arch/arm64/kernel/head.S](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/head.S?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/kernel/head.S](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/head.S?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -428,7 +428,8 @@ ENDPROC(\_\_create\_page\_tables) \_\_primary\_switched: adrp x4, init\_thread\_union add sp, x4, #THREAD\_SIZE- msr sp\_el0, x4 // Save thread\_info+ adr\_l x5, init\_task+ msr sp\_el0, x5 // Save thread\_info  adr\_l x8, vectors // load VBAR\_EL1 with virtual msr vbar\_el1, x8 // vector table address@@ -699,10 +700,10 @@ \_\_secondary\_switched: isb  adr\_l x0, secondary\_data- ldr x0, [x0, #CPU\_BOOT\_STACK] // get secondary\_data.stack- mov sp, x0- and x0, x0, #~(THREAD\_SIZE - 1)- msr sp\_el0, x0 // save thread\_info+ ldr x1, [x0, #CPU\_BOOT\_STACK] // get secondary\_data.stack+ mov sp, x1+ ldr x2, [x0, #CPU\_BOOT\_TASK]+ msr sp\_el0, x2 mov x29, #0 b secondary\_start\_kernel ENDPROC(\_\_secondary\_switched)diff --git a/arch/arm64/kernel/process.c b/arch/arm64/kernel/process.cindex ec7b9c00effe1b..a98b743631c5b3 100644--- a/[arch/arm64/kernel/process.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/process.c?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/kernel/process.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/process.c?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -45,6 +45,7 @@ #include <linux/personality.h> #include <linux/notifier.h> #include <trace/events/power.h>+#include <linux/percpu.h>  #include <asm/alternative.h> #include <asm/compat.h>@@ -322,6 +323,20 @@ void uao\_thread\_switch(struct task\_struct \*next) }  /\*+ \* We store our current task in sp\_el0, which is clobbered by userspace. Keep a+ \* shadow copy so that we can restore this upon entry from userspace.+ \*+ \* This is \*only\* for exception entry from EL0, and is not valid until we+ \* \_\_switch\_to() a user task.+ \*/+DEFINE\_PER\_CPU(struct task\_struct \*, \_\_entry\_task);++static void entry\_task\_switch(struct task\_struct \*next)+{+ \_\_this\_cpu\_write(\_\_entry\_task, next);+}++/\* \* Thread switching. \*/ struct task\_struct \*\_\_switch\_to(struct task\_struct \*prev,@@ -333,6 +348,7 @@ struct task\_struct \*\_\_switch\_to(struct task\_struct \*prev, tls\_thread\_switch(next); hw\_breakpoint\_thread\_switch(next); contextidr\_thread\_switch(next);+ entry\_task\_switch(next); uao\_thread\_switch(next);  /\*diff --git a/arch/arm64/kernel/smp.c b/arch/arm64/kernel/smp.cindex 6f42c68e457fcf..cb87234cfcf2d2 100644--- a/[arch/arm64/kernel/smp.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/smp.c?id=1b7e2296a822dfd2349960addc42a139360ce769)+++ b/[arch/arm64/kernel/smp.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/kernel/smp.c?id=c02433dd6de32f042cf3ffe476746b1115b8c096)@@ -149,6 +149,7 @@ int \_\_cpu\_up(unsigned int cpu, struct task\_struct \*idle) \* We need to tell the secondary core where to find its stack and the \* page tables. \*/+ secondary\_data.task = idle; secondary\_data.stack = task\_stack\_page(idle) + THREAD\_START\_SP; update\_cpu\_boot\_status(CPU\_MMU\_OFF); \_\_flush\_dcache\_area(&secondary\_data, sizeof(secondary\_data));@@ -173,6 +174,7 @@ int \_\_cpu\_up(unsigned int cpu, struct task\_struct \*idle) pr\_err("CPU%u: failed to boot: %d\n", cpu, ret); } + secondary\_data.task = NULL; secondary\_data.stack = NULL; status = READ\_ONCE(secondary\_data.status); if (ret && status) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-26 07:34:07 +0000



=== Content from source.android.com_cfa6858e_20250125_084003.html ===


[![Android Open Source Project](https://www.gstatic.com/devrel-devsite/prod/v2c0608cfe9941cacf4435921a2ece588be3719df069d9fba67130a84e4743128/androidsource/images/lockup.svg)](/)

`/`

* English
* Deutsch
* Español
* Español – América Latina
* Français
* Indonesia
* Italiano
* Polski
* Português
* Português – Brasil
* Tiếng Việt
* Türkçe
* Русский
* עברית
* العربيّة
* فارسی
* हिंदी
* বাংলা
* ภาษาไทย
* 中文 – 简体
* 中文 – 繁體
* 日本語
* 한국어

[Android Code Search](https://cs.android.com/android/platform/superproject/main)
Sign in

* [Documentation](https://source.android.com/docs)

[What's New?](https://source.android.com/docs/whatsnew)

[Getting Started](https://source.android.com/docs/setup)

[Security](https://source.android.com/docs/security)

[Core Topics](https://source.android.com/docs/core)

[Compatibility](https://source.android.com/docs/compatibility)

[Android Devices](https://source.android.com/docs/devices)

[Automotive](https://source.android.com/docs/automotive)

[Reference](https://source.android.com/reference)

[![Android Open Source Project](https://www.gstatic.com/devrel-devsite/prod/v2c0608cfe9941cacf4435921a2ece588be3719df069d9fba67130a84e4743128/androidsource/images/lockup.svg)](/)

* [Docs](/docs)
  + More
  + [What's New?](/docs/whatsnew)
  + [Getting Started](/docs/setup)
  + [Security](/docs/security)
  + [Core Topics](/docs/core)
  + [Compatibility](/docs/compatibility)
  + [Android Devices](/docs/devices)
  + [Automotive](/docs/automotive)
  + [Reference](/reference)
* [Android Code Search](https://cs.android.com/android/platform/superproject/main)

* [Overview](/docs/security)
* Security overview
  + [Secure an Android device](/docs/security/overview)
  + [Kernel security](/docs/security/overview/kernel-security)
  + [App security](/docs/security/overview/app-security)
  + [Implement security](/docs/security/overview/implement)
  + [Updates and resources](/docs/security/overview/updates-resources)
  + [ASPIRE](/docs/security/overview/aspire)
  + [Reports](/docs/security/overview/reports)
  + [Enhancements](/docs/security/enhancements)
  + [Acknowledgements](/docs/security/overview/acknowledgements)
* Android Security Bulletins
  + [Bulletins home](/docs/security/bulletin)
  + [Overview](/docs/security/bulletin/asb-overview)
  + 2025 bulletins
    - [January](/docs/security/bulletin/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/2024-12-01)
    - [November](/docs/security/bulletin/2024-11-01)
    - [October](/docs/security/bulletin/2024-10-01)
    - [September](/docs/security/bulletin/2024-09-01)
    - [August](/docs/security/bulletin/2024-08-01)
    - [July](/docs/security/bulletin/2024-07-01)
    - [June](/docs/security/bulletin/2024-06-01)
    - [May](/docs/security/bulletin/2024-05-01)
    - [April](/docs/security/bulletin/2024-04-01)
    - [March](/docs/security/bulletin/2024-03-01)
    - [February](/docs/security/bulletin/2024-02-01)
    - [January](/docs/security/bulletin/2024-01-01)
    - [Android 15](/docs/security/bulletin/android-15)
  + 2023 bulletins
    - [December](/docs/security/bulletin/2023-12-01)
    - [November](/docs/security/bulletin/2023-11-01)
    - [October](/docs/security/bulletin/2023-10-01)
    - [September](/docs/security/bulletin/2023-09-01)
    - [August](/docs/security/bulletin/2023-08-01)
    - [July](/docs/security/bulletin/2023-07-01)
    - [June](/docs/security/bulletin/2023-06-01)
    - [May](/docs/security/bulletin/2023-05-01)
    - [April](/docs/security/bulletin/2023-04-01)
    - [March](/docs/security/bulletin/2023-03-01)
    - [February](/docs/security/bulletin/2023-02-01)
    - [January](/docs/security/bulletin/2023-01-01)
    - [Android 14](/docs/security/bulletin/android-14)
  + 2022 bulletins
    - [December](/docs/security/bulletin/2022-12-01)
    - [November](/docs/security/bulletin/2022-11-01)
    - [October](/docs/security/bulletin/2022-10-01)
    - [September](/docs/security/bulletin/2022-09-01)
    - [August](/docs/security/bulletin/2022-08-01)
    - [July](/docs/security/bulletin/2022-07-01)
    - [June](/docs/security/bulletin/2022-06-01)
    - [May](/docs/security/bulletin/2022-05-01)
    - [April](/docs/security/bulletin/2022-04-01)
    - [March](/docs/security/bulletin/2022-03-01)
    - [Android 12L](/docs/security/bulletin/android-12l)
    - [February](/docs/security/bulletin/2022-02-01)
    - [January](/docs/security/bulletin/2022-01-01)
    - [Android 13](/docs/security/bulletin/android-13)
    - [Index](/docs/security/bulletin/2022)
  + 2021 bulletins
    - [December](/docs/security/bulletin/2021-12-01)
    - [November](/docs/security/bulletin/2021-11-01)
    - [October](/docs/security/bulletin/2021-10-01)
    - [September](/docs/security/bulletin/2021-09-01)
    - [August](/docs/security/bulletin/2021-08-01)
    - [July](/docs/security/bulletin/2021-07-01)
    - [June](/docs/security/bulletin/2021-06-01)
    - [May](/docs/security/bulletin/2021-05-01)
    - [April](/docs/security/bulletin/2021-04-01)
    - [March](/docs/security/bulletin/2021-03-01)
    - [February](/docs/security/bulletin/2021-02-01)
    - [January](/docs/security/bulletin/2021-01-01)
    - [Android 12](/docs/security/bulletin/android-12)
    - [Index](/docs/security/bulletin/2021)
  + 2020 bulletins
    - [December](/docs/security/bulletin/2020-12-01)
    - [November](/docs/security/bulletin/2020-11-01)
    - [October](/docs/security/bulletin/2020-10-01)
    - [September](/docs/security/bulletin/2020-09-01)
    - [August](/docs/security/bulletin/2020-08-01)
    - [July](/docs/security/bulletin/2020-07-01)
    - [June](/docs/security/bulletin/2020-06-01)
    - [May](/docs/security/bulletin/2020-05-01)
    - [April](/docs/security/bulletin/2020-04-01)
    - [March](/docs/security/bulletin/2020-03-01)
    - [February](/docs/security/bulletin/2020-02-01)
    - [January](/docs/security/bulletin/2020-01-01)
    - [Android 11](/docs/security/bulletin/android-11)
    - [Index](/docs/security/bulletin/2020)
  + 2019 bulletins
    - [December](/docs/security/bulletin/2019-12-01)
    - [November](/docs/security/bulletin/2019-11-01)
    - [October](/docs/security/bulletin/2019-10-01)
    - [September](/docs/security/bulletin/2019-09-01)
    - [August](/docs/security/bulletin/2019-08-01)
    - [July](/docs/security/bulletin/2019-07-01)
    - [June](/docs/security/bulletin/2019-06-01)
    - [May](/docs/security/bulletin/2019-05-01)
    - [April](/docs/security/bulletin/2019-04-01)
    - [March](/docs/security/bulletin/2019-03-01)
    - [February](/docs/security/bulletin/2019-02-01)
    - [January](/docs/security/bulletin/2019-01-01)
    - [Android 10](/docs/security/bulletin/android-10)
    - [Index](/docs/security/bulletin/2019)
  + 2018 bulletins
    - [December](/docs/security/bulletin/2018-12-01)
    - [November](/docs/security/bulletin/2018-11-01)
    - [October](/docs/security/bulletin/2018-10-01)
    - [September](/docs/security/bulletin/2018-09-01)
    - [August](/docs/security/bulletin/2018-08-01)
    - [July](/docs/security/bulletin/2018-07-01)
    - [June](/docs/security/bulletin/2018-06-01)
    - [May](/docs/security/bulletin/2018-05-01)
    - [April](/docs/security/bulletin/2018-04-01)
    - [March](/docs/security/bulletin/2018-03-01)
    - [February](/docs/security/bulletin/2018-02-01)
    - [January](/docs/security/bulletin/2018-01-01)
    - [Index](/docs/security/bulletin/2018)
  + 2017 bulletins
    - [December](/docs/security/bulletin/2017-12-01)
    - [November](/docs/security/bulletin/2017-11-01)
    - [October](/docs/security/bulletin/2017-10-01)
    - [September](/docs/security/bulletin/2017-09-01)
    - [August](/docs/security/bulletin/2017-08-01)
    - [July](/docs/security/bulletin/2017-07-01)
    - [June](/docs/security/bulletin/2017-06-01)
    - [May](/docs/security/bulletin/2017-05-01)
    - [April](/docs/security/bulletin/2017-04-01)
    - [March](/docs/security/bulletin/2017-03-01)
    - [February](/docs/security/bulletin/2017-02-01)
    - [January](/docs/security/bulletin/2017-01-01)
    - [Index](/docs/security/bulletin/2017)
  + 2016 bulletins
    - [December](/docs/security/bulletin/2016-12-01)
    - [November](/docs/security/bulletin/2016-11-01)
    - [October](/docs/security/bulletin/2016-10-01)
    - [September](/docs/security/bulletin/2016-09-01)
    - [August](/docs/security/bulletin/2016-08-01)
    - [July](/docs/security/bulletin/2016-07-01)
    - [June](/docs/security/bulletin/2016-06-01)
    - [May](/docs/security/bulletin/2016-05-01)
    - [April](/docs/security/bulletin/2016-04-02)
    - [March](/docs/security/bulletin/2016-03-01)
    - [February](/docs/security/bulletin/2016-02-01)
    - [January](/docs/security/bulletin/2016-01-01)
    - [Index](/docs/security/bulletin/2016)
  + 2015 bulletins
    - [December](/docs/security/bulletin/2015-12-01)
    - [November](/docs/security/bulletin/2015-11-01)
    - [October](/docs/security/bulletin/2015-10-01)
    - [September](/docs/security/bulletin/2015-09-01)
    - [August](/docs/security/bulletin/2015-08-01)
    - [Index](/docs/security/bulletin/2015)
  + Pixel/Nexus bulletins
  + [Overview](/docs/security/bulletin/pixel)
  + 2025 bulletins
    - [January](/docs/security/bulletin/pixel/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/pixel/2024-12-01)
    - [November](/docs/security/bulletin/pixel/2024-11-01)
    - [October](/docs/security/bulletin/pixel/2024-10-01)
    - [September](/docs/security/bulletin/pixel/2024-09-01)
    - [August](/docs/security/bulletin/pixel/2024-08-01)
    - [July](/docs/security/bulletin/pixel/2024-07-01)
    - [June](/docs/security/bulletin/pixel/2024-06-01)
    - [May](/docs/security/bulletin/pixel/2024-05-01)
    - [April](/docs/security/bulletin/pixel/2024-04-01)
    - [March](/docs/security/bulletin/pixel/2024-03-01)
    - [February](/docs/security/bulletin/pixel/2024-02-01)
    - [January](/docs/security/bulletin/pixel/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/pixel/2023-12-01)
    - [November](/docs/security/bulletin/pixel/2023-11-01)
    - [October](/docs/security/bulletin/pixel/2023-10-01)
    - [September](/docs/security/bulletin/pixel/2023-09-01)
    - [August](/docs/security/bulletin/pixel/2023-08-01)
    - [July](/docs/security/bulletin/pixel/2023-07-01)
    - [June](/docs/security/bulletin/pixel/2023-06-01)
    - [May](/docs/security/bulletin/pixel/2023-05-01)
    - [April](/docs/security/bulletin/pixel/2023-04-01)
    - [March](/docs/security/bulletin/pixel/2023-03-01)
    - [February](/docs/security/bulletin/pixel/2023-02-01)
    - [January](/docs/security/bulletin/pixel/2023-01-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/pixel/2022-12-01)
    - [November](/docs/security/bulletin/pixel/2022-11-01)
    - [October](/docs/security/bulletin/pixel/2022-10-01)
    - [September](/docs/security/bulletin/pixel/2022-09-01)
    - [August](/docs/security/bulletin/pixel/2022-08-01)
    - [July](/docs/security/bulletin/pixel/2022-07-01)
    - [June](/docs/security/bulletin/pixel/2022-06-01)
    - [May](/docs/security/bulletin/pixel/2022-05-01)
    - [April](/docs/security/bulletin/pixel/2022-04-01)
    - [March](/docs/security/bulletin/pixel/2022-03-01)
    - [February](/docs/security/bulletin/pixel/2022-02-01)
    - [January](/docs/security/bulletin/pixel/2022-01-01)
  + 2021 bulletins
    - [December](/docs/security/bulletin/pixel/2021-12-01)
    - [November](/docs/security/bulletin/pixel/2021-11-01)
    - [October](/docs/security/bulletin/pixel/2021-10-01)
    - [September](/docs/security/bulletin/pixel/2021-09-01)
    - [August](/docs/security/bulletin/pixel/2021-08-01)
    - [July](/docs/security/bulletin/pixel/2021-07-01)
    - [June](/docs/security/bulletin/pixel/2021-06-01)
    - [May](/docs/security/bulletin/pixel/2021-05-01)
    - [April](/docs/security/bulletin/pixel/2021-04-01)
    - [March](/docs/security/bulletin/pixel/2021-03-01)
    - [February](/docs/security/bulletin/pixel/2021-02-01)
    - [January](/docs/security/bulletin/pixel/2021-01-01)
    - [Index](/docs/security/bulletin/pixel/2021)
  + 2020 bulletins
    - [December](/docs/security/bulletin/pixel/2020-12-01)
    - [November](/docs/security/bulletin/pixel/2020-11-01)
    - [October](/docs/security/bulletin/pixel/2020-10-01)
    - [September](/docs/security/bulletin/pixel/2020-09-01)
    - [August](/docs/security/bulletin/pixel/2020-08-01)
    - [July](/docs/security/bulletin/pixel/2020-07-01)
    - [June](/docs/security/bulletin/pixel/2020-06-01)
    - [May](/docs/security/bulletin/pixel/2020-05-01)
    - [April](/docs/security/bulletin/pixel/2020-04-01)
    - [March](/docs/security/bulletin/pixel/2020-03-01)
    - [February](/docs/security/bulletin/pixel/2020-02-01)
    - [January](/docs/security/bulletin/pixel/2020-01-01)
    - [Index](/docs/security/bulletin/pixel/2020)
  + 2019 bulletins
    - [December](/docs/security/bulletin/pixel/2019-12-01)
    - [November](/docs/security/bulletin/pixel/2019-11-01)
    - [October](/docs/security/bulletin/pixel/2019-10-01)
    - [September](/docs/security/bulletin/pixel/2019-09-01)
    - [August](/docs/security/bulletin/pixel/2019-08-01)
    - [July](/docs/security/bulletin/pixel/2019-07-01)
    - [June](/docs/security/bulletin/pixel/2019-06-01)
    - [May](/docs/security/bulletin/pixel/2019-05-01)
    - [April](/docs/security/bulletin/pixel/2019-04-01)
    - [March](/docs/security/bulletin/pixel/2019-03-01)
    - [February](/docs/security/bulletin/pixel/2019-02-01)
    - [January](/docs/security/bulletin/pixel/2019-01-01)
    - [Index](/docs/security/bulletin/pixel/2019)
  + 2018 bulletins
    - [December](/docs/security/bulletin/pixel/2018-12-01)
    - [November](/docs/security/bulletin/pixel/2018-11-01)
    - [October](/docs/security/bulletin/pixel/2018-10-01)
    - [September](/docs/security/bulletin/pixel/2018-09-01)
    - [August](/docs/security/bulletin/pixel/2018-08-01)
    - [July](/docs/security/bulletin/pixel/2018-07-01)
    - [June](/docs/security/bulletin/pixel/2018-06-01)
    - [May](/docs/security/bulletin/pixel/2018-05-01)
    - [April](/docs/security/bulletin/pixel/2018-04-01)
    - [March](/docs/security/bulletin/pixel/2018-03-01)
    - [February](/docs/security/bulletin/pixel/2018-02-01)
    - [January](/docs/security/bulletin/pixel/2018-01-01)
    - [Index](/docs/security/bulletin/pixel/2018)
  + 2017 bulletins
    - [December](/docs/security/bulletin/pixel/2017-12-01)
    - [November](/docs/security/bulletin/pixel/2017-11-01)
    - [October](/docs/security/bulletin/pixel/2017-10-01)
    - [Index](/docs/security/bulletin/pixel/2017)
  + Android Automotive
  + [Overview](/docs/security/bulletin/aaos)
  + 2025 bulletins
    - [January](/docs/security/bulletin/aaos/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/aaos/2024-12-01)
    - [November](/docs/security/bulletin/aaos/2024-11-01)
    - [October](/docs/security/bulletin/aaos/2024-10-01)
    - [September](/docs/security/bulletin/aaos/2024-09-01)
    - [August](/docs/security/bulletin/aaos/2024-08-01)
    - [July](/docs/security/bulletin/aaos/2024-07-01)
    - [June](/docs/security/bulletin/aaos/2024-06-01)
    - [May](/docs/security/bulletin/aaos/2024-05-01)
    - [April](/docs/security/bulletin/aaos/2024-04-01)
    - [March](/docs/security/bulletin/aaos/2024-03-01)
    - [February](/docs/security/bulletin/aaos/2024-02-01)
    - [January](/docs/security/bulletin/aaos/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/aaos/2023-12-01)
    - [November](/docs/security/bulletin/aaos/2023-11-01)
    - [October](/docs/security/bulletin/aaos/2023-10-01)
    - [September](/docs/security/bulletin/aaos/2023-09-01)
    - [August](/docs/security/bulletin/aaos/2023-08-01)
    - [July](/docs/security/bulletin/aaos/2023-07-01)
    - [June](/docs/security/bulletin/aaos/2023-06-01)
    - [May](/docs/security/bulletin/aaos/2023-05-01)
    - [April](/docs/security/bulletin/aaos/2023-04-01)
    - [March](/docs/security/bulletin/aaos/2023-03-01)
    - [February](/docs/security/bulletin/aaos/2023-02-01)
    - [January](/docs/security/bulletin/aaos/2023-01-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/aaos/2022-12-01)
    - [November](/docs/security/bulletin/aaos/2022-11-01)
    - [October](/docs/security/bulletin/aaos/2022-10-01)
    - [September](/docs/security/bulletin/aaos/2022-09-01)
    - [August](/docs/security/bulletin/aaos/2022-08-01)
    - [July](/docs/security/bulletin/aaos/2022-07-01)
    - [June](/docs/security/bulletin/aaos/2022-06-01)
    - [May](/docs/security/bulletin/aaos/2022-05-01)
    - [April](/docs/security/bulletin/aaos/2022-04-01)
    - [March](/docs/security/bulletin/aaos/2022-03-01)
    - [February](/docs/security/bulletin/aaos/2022-02-01)
    - [January](/docs/security/bulletin/aaos/2022-01-01)
  + 2021 bulletins
    - [December](/docs/security/bulletin/aaos/2021-12-01)
    - [November](/docs/security/bulletin/aaos/2021-11-01)
    - [October](/docs/security/bulletin/aaos/2021-10-01)
    - [September](/docs/security/bulletin/aaos/2021-09-01)
    - [August](/docs/security/bulletin/aaos/2021-08-01)
    - [July](/docs/security/bulletin/aaos/2021-07-01)
    - [June](/docs/security/bulletin/aaos/2021-06-01)
    - [May](/docs/security/bulletin/aaos/2021-05-01)
    - [April](/docs/security/bulletin/aaos/2021-04-01)
    - [March](/docs/security/bulletin/aaos/2021-03-01)
    - [February](/docs/security/bulletin/aaos/2021-02-01)
    - [January](/docs/security/bulletin/aaos/2021-01-01)
  + Chromecast
  + [Overview](/docs/security/bulletin/chromecast)
  + 2024 bulletins
    - [December](/docs/security/bulletin/chromecast/2024-12-01)
    - [September](/docs/security/bulletin/chromecast/2024-09-01)
    - [July](/docs/security/bulletin/chromecast/2024-07-01)
    - [March](/docs/security/bulletin/chromecast/2024-03-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/chromecast/2023-12-01)
    - [September](/docs/security/bulletin/chromecast/2023-07-01)
    - [June](/docs/security/bulletin/chromecast/2023-06-01)
    - [April](/docs/security/bulletin/chromecast/2023-04-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/chromecast/2022-12-01)
    - [October](/docs/security/bulletin/chromecast/2022-10-01)
    - [July](/docs/security/bulletin/chromecast/2022-07-01)
  + Wear
  + [Overview](/docs/security/bulletin/wear)
  + 2025 bulletins
    - [January](/docs/security/bulletin/wear/2025/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/wear/2024/2024-12-01)
    - [November](/docs/security/bulletin/wear/2024/2024-11-01)
    - [October](/docs/security/bulletin/wear/2024/2024-10-01)
    - [September](/docs/security/bulletin/wear/2024/2024-09-01)
    - [August](/docs/security/bulletin/wear/2024/2024-08-01)
    - [July](/docs/security/bulletin/wear/2024/2024-07-01)
    - [June](/docs/security/bulletin/wear/2024/2024-06-01)
    - [May](/docs/security/bulletin/wear/2024/2024-05-01)
    - [April](/docs/security/bulletin/wear/2024/2024-04-01)
    - [March](/docs/security/bulletin/wear/2024/2024-03-01)
    - [February](/docs/security/bulletin/wear/2024/2024-02-01)
    - [January](/docs/security/bulletin/wear/2024/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/wear/2023/2023-12-01)
    - [November](/docs/security/bulletin/wear/2023/2023-11-01)
    - [October](/docs/security/bulletin/wear/2023/2023-10-01)
    - [September](/docs/security/bulletin/wear/2023/2023-09-01)
    - [August](/docs/security/bulletin/wear/2023/2023-08-01)
  + Pixel Watch
  + [Overview](/docs/security/bulletin/pixel-watch)
  + 2024 bulletins
    - [December](/docs/security/bulletin/pixel-watch/2024-12-01)
    - [August](/docs/security/bulletin/pixel-watch/2024-08-01)
    - [July](/docs/security/bulletin/pixel-watch/2024-07-01)
    - [June](/docs/security/bulletin/pixel-watch/2024-06-01)
    - [May](/docs/security/bulletin/pixel-watch/2024-05-01)
    - [April](/docs/security/bulletin/pixel-watch/2024-04-01)
    - [March](/docs/security/bulletin/pixel-watch/2024-03-01)
    - [February](/docs/security/bulletin/pixel-watch/2024-02-01)
    - [January](/docs/security/bulletin/pixel-watch/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/pixel-watch/2023/2023-12-01)
    - [September](/docs/security/bulletin/pixel-watch/2023/2023-09-01)
    - [June](/docs/security/bulletin/pixel-watch/2023/2023-06-01)
  + Advisories
  + [Overview](/docs/security/bulletin/advisory)
  + [March 2016](/docs/security/bulletin/advisory/2016-03-18)
* Features
  + [Overview](/docs/security/features)
  + [Application Sandbox](/docs/security/app-sandbox)
  + [OMAPI vendor stable interface](/docs/security/features/open-mobile-api)
  + App signing
    - [Overview](/docs/security/features/apksigning)
    - [APK signature scheme v2](/docs/security/features/apksigning/v2)
    - [APK signature scheme v3](/docs/security/features/apksigning/v3)
    - [APK signature scheme v3.1](/docs/security/features/apksigning/v3-1)
    - [APK signature scheme v4](/docs/security/features/apksigning/v4)
  + Authentication
    - [Overview](/docs/security/features/authentication)
    - [Gatekeeper](/docs/security/features/authentication/gatekeeper)
    - Biometrics
      * [Overview](/docs/security/features/biometric)
      * [Measure biometric security](/docs/security/features/biometric/measure)
      * [Fingerprint HIDL](/docs/security/features/authentication/fingerprint-hal)
      * [Face authentication HIDL](/docs/security/features/biometric/face-authentication)
    - Protected confirmation
      * [Overview](/docs/security/features/protected-confirmation)
      * [Implementation](/docs/security/features/protected-confirmation/implementation)
      * [Design guidelines](/docs/security/features/protected-confirmation/design)
      * [Accessibility](/docs/security/features/protected-confirmation/accessibility)
  + DICE
    - [Overview](/docs/security/features/dice)
    - [Applications of DICE](/docs/security/features/dice/applications-of-dice)
  + Encryption
    - [Overview](/docs/security/features/encryption)
    - [File-based encryption](/docs/security/features/encryption/file-based)
    - [Full-disk encryption](/docs/security/features/encryption/full-disk)
    - [Metadata encryption](/docs/security/features/encryption/metadata)
    - [Enable Adiantum](/docs/security/features/encryption/adiantum)
    - [Hardware-wrapped keys](/docs/security/features/encryption/hw-wrapped-keys)
  + Keystore
    - [Overview](/docs/security/features/keystore)
    - [Features](/docs/security/features/keystore/features)
    - [Key and ID attestation](/docs/security/features/keystore/attestation)
    - [Version binding](/docs/security/features/keystore/version-binding)
    - [Authorization tags](/docs/security/features/keystore/tags)
    - [Functions](/docs/security/features/keystore/implementer-ref)
  + Identity credential
    - [Overview](/docs/security/features/identity-credentials)
  + SELinux
    - [Overview](/docs/security/features/selinux)
    - [Concepts](/docs/security/features/selinux/concepts)
    - [Implementation](/docs/security/features/selinux/implement)
    - [Customization](/docs/security/features/selinux/customize)
    - [Build sepolicy](/docs/security/features/selinux/build)
    - [Compatibility](/docs/security/features/selinux/compatibility)
    - [Validation](/docs/security/features/selinux/validate)
    - [Write policy](/docs/security/features/selinux/device-policy)
    - [Vendor init](/docs/security/features/selinux/vendor-init)
  + Trusty TEE
    - [Overview](/docs/security/features/trusty)
    - [Download and build](/docs/security/features/trusty/download-and-build)
    - [Trusty API reference](/docs/security/features/trusty/trusty-ref)
  + Verified Boot
    - [Overview](/docs/security/features/verifiedboot)
    - [Device state](/docs/security/features/verifiedboot/device-state)
    - [Verify Boot](/docs/security/features/verifiedboot/verified-boot)
    - [Boot flow](/docs/security/features/verifiedboot/boot-flow)
    - [Implement dm-verity](/docs/security/features/verifiedboot/dm-verity)
    - [Verify system\_other partition](/docs/security/features/verifiedboot/verify-system-other-partition)
    - [Reference implementation](/docs/security/features/verifiedboot/avb)
  + Safety Center
    - [Overview](/docs/security/safety-center/overview)
    - [Customize Safety Center](/docs/security/safety-center/customize)
    - [Customize Safety Center UI](/docs/security/safety-center/customize-ui)
    - [Interact with Safety Center](/docs/security/safety-center/interact)
    - [Testing and validation](/docs/security/safety-center/test-requirements)
  + Cellular security
    - [Overview](/docs/security/features/cellular-security/overview)
    - [Disable 2G](/docs/security/features/cellular-security/disable-2g)
  + [Private space](/docs/security/features/private-space)
* Testing
  + [Overview](/docs/security/test/fuzz-sanitize)
  + [Memory safety](/docs/security/test/memory-safety)
  + Arm Memory Tagging Extension
  + [Overview](/docs/security/test/memory-safety/arm-mte)
  + [Bootloader support](/docs/security/test/memory-safety/bootloader-support)
  + [Understand MTE reports](/docs/security/test/memory-safety/mte-reports)
  + [MTE configuration](/docs/security/test/memory-safety/mte-configuration)
  + Sanitizers
  + [Overview](/docs/security/test/sanitizers)
  + [AddressSanitizer](/docs/security/test/asan)
  + [Kernel AddressSanitizer](/docs/security/test/kasan)
  + [Hardware-assisted AddressSanitizer](/docs/security/test/hwasan)
  + [Understand HWASan reports](/docs/security/test/memory-safety/hwasan-reports)
  + [UndefinedBehaviorSanitizer](/docs/security/test/ubsan)
  + Other topics
  + [Control flow integrity](/docs/security/test/cfi)
  + [Kernel control flow integrity](/docs/security/test/kcfi)
  + [Execute-only memory](/docs/security/test/execute-only-memory)
  + [Fuzz with libFuzzer](/docs/security/test/libfuzzer)
  + [GWP-ASan and KFENCE](/docs/security/test/memory-safety/gwp-asan-kfence)
  + [Security Test Suite development kit](/docs/security/test/sts-sdk)
  + [Scudo](/docs/security/test/scudo)
  + [ShadowCallStack](/docs/security/test/shadow-call-stack)
  + [Tagged pointers](/docs/security/test/tagged-pointers)
  + [Zero initialized memory](/docs/security/test/memory-safety/zero-initialized-memory)
* Best practices
  + [Overview](/docs/security/best-practices)
  + [Operational security](/docs/security/best-practices/ops)
  + [System security](/docs/security/best-practices/system)
  + [App security](/docs/security/best-practices/app)
  + [Network security](/docs/security/best-practices/network)
  + [Hardware security](/docs/security/best-practices/hardware)
  + [Privacy security](/docs/security/best-practices/privacy)

* What's new?
* [Release notes](/docs/whatsnew/release-notes)
* [Latest security bulletins](/docs/whatsnew/latest-security-bulletins)
* [Latest Compatibility Definition Document (CDD)](/docs/whatsnew/latest-cdd)
* [Site updates](/docs/whatsnew/site-updates)
* Getting Started
* [About](/docs/setup/about)
* [Start](/docs/setup/start)
* [Download](/docs/setup/download)
* [Build](/docs/setup/build)
* [Test](/docs/setup/test)
* [Create](/docs/setup/create/coding-tasks)
* [Contribute](/docs/setup/contribute)
* [Community](/docs/setup/community/cofc)
* [Tools, build, and related reference](/docs/setup/reference)
* Security
* [Overview](/docs/security/overview)
* [Bulletins](/docs/security/bulletin)
* [Features](/docs/security/features)
* [Testing](/docs/security/test/fuzz-sanitize)
* [Best Practices](/docs/security/best-practices)
* Core Topics
* [Architecture](/docs/core/architecture)
* [Audio](/docs/core/audio)
* [Camera](/docs/core/camera)
* [Connectivity](/docs/core/connect)
* [Data](/docs/core/data)
* [Display](/docs/core/display)
* [Fonts](/docs/core/fonts/custom-font-fallback)
* [Graphics](/docs/core/graphics)
* [Interaction](/docs/core/interaction)
* [Media](/docs/core/media)
* [Performance](/docs/core/perf)
* [Permissions](/docs/core/permissions)
* [Power](/docs/core/power)
* [Runtime](/docs/core/runtime)
* [Settings](/docs/core/settings)
* [Storage](/docs/core/storage)
* [Tests](/docs/core/tests)
* [Updates](/docs/core/ota)
* [Virtualization](/docs/core/virtualization)
* Compatibility
* [Compatibility Definition Document (CDD)](/docs/compatibility/cdd)
* [Compatibility Test Suite (CTS)](/docs/compatibility/cts)
* Android Devices
* [Cuttlefish](/docs/devices/cuttlefish)
* [Enterprise](/docs/devices/admin)
* [TV](/docs/devices/tv)
* Automotive
* [Get Started](/docs/automotive/start/what_automotive)
* [Guidelines for Development](/docs/automotive/guidelines)
* [Development Tools](/docs/automotive/dev-tools)
* [Testing Tools and Infrastructure](/docs/automotive/tools)
* [Release Details](/docs/automotive/start/releases)
* Reference
* [HIDL](/reference/hidl)
* [HAL](/reference/hal)
* [Trade Federation](/reference/tradefed/classes)
* [Security Test Suite](/reference/sts/classes)

* [AOSP](https://source.android.com/)
* [Security](https://source.android.com/docs/security)

# Pixel / Nexus Security Bulletin—June 2018

Stay organized with collections

Save and categorize content based on your preferences.

*Published June 4, 2018 | Updated June 6, 2018*

The Pixel / Nexus Security Bulletin contains details of security
vulnerabilities and functional improvements affecting
[supported
Google Pixel and Nexus devices](https://support.google.com/pixelphone/answer/4457705#pixel_phones&nexus_devices) (Google devices).
For Google devices, security patch levels of 2018-06-05 or later address all
issues in this bulletin and all issues in the June 2018 Android Security
Bulletin. To learn how to check a device's security patch level, see
[Check & update your
Android version](https://support.google.com/pixelphone/answer/4457705).

All supported Google devices will receive an update to the 2018-06-05 patch
level. We encourage all customers to accept these updates to their devices.

**Note:** The Google device firmware images are available on the
[Google Developer
site](https://developers.google.com/android/images).

## Announcements

In addition to the security vulnerabilities described in the June 2018
Android Security Bulletin, Pixel and Nexus devices also contain patches for the
security vulnerabilities described below. Partners were notified of these issues
at least a month ago and may choose to incorporate them as part of their device
updates.

## Security patches

Vulnerabilities are grouped under the component that they affect. There is a
description of the issue and a table with the CVE, associated references,
[type of vulnerability](#type),
[severity](/security/overview/updates-resources#severity),
and updated Android Open Source Project (AOSP) versions (where applicable). When
available, we link the public change that addressed the issue to the bug ID,
like the AOSP change list. When multiple changes relate to a single bug,
additional references are linked to numbers following the bug ID.

### Framework

| CVE | References | Type | Severity | Updated AOSP versions |
| CVE-2018-9374 | [A-72710897](https://android.googlesource.com/platform/frameworks/base/%2B/62b500f99595e99e1db8f0c068f719e68c73551e) | EoP | Moderate | 6.0, 6.0.1, 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| CVE-2018-9375 | [A-75298708](https://android.googlesource.com/platform/packages/providers/UserDictionaryProvider/%2B/cccf7d5c98fc81ff4483f921fb4ebfa974add9c6) | EoP | Moderate | 6.0, 6.0.1, 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| CVE-2018-9377 | A-64752751[\*](#asterisk) | ID | Moderate | 6.0, 6.0.1 |

### Media framework

| CVE | References | Type | Severity | Updated AOSP versions |
| CVE-2018-9378 | [A-73126106](https://android.googlesource.com/platform/frameworks/av/%2B/e0c09e4dd62e033aa9688634844d19136c0d34bc) | ID | Moderate | 6.0, 6.0.1, 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| CVE-2018-9379 | [A-63766886](https://android.googlesource.com/platform/frameworks/base/%2B/42e5aed1d106bef1f8913ffe87aa1f9df6aae90c) [[2](https://android.googlesource.com/platform/packages/providers/MediaProvider/%2B/76ffd8258c483b7170af49a8a67702426df07f2f)] | ID | Moderate | 6.0, 6.0.1, 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| CVE-2018-9349 | [A-72510002](https://android.googlesource.com/platform/external/libvpx/%2B/69ddad629d1db85d8531af694c910626a1e80a9f) | ID | Moderate | 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| DoS | High | 6.0, 6.0.1 |
| CVE-2018-9350 | [A-73552574](https://android.googlesource.com/platform/external/libavc/%2B/fde8eda71e8f7bc9c973fe6fbdd3846951b340ed) | ID | Moderate | 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| DoS | High | 6.0, 6.0.1 |
| CVE-2018-9351 | [A-73625898](https://android.googlesource.com/platform/external/libavc/%2B/27c639d897fb0f1f0acf6a58b5c013d65c63bd04) | ID | Moderate | 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| DoS | High | 6.0, 6.0.1 |
| CVE-2018-9352 | [A-73965867](https://android.googlesource.com/platform/external/libhevc/%2B/a7303e887a40ab164b19b310068e13ac4f123edc) [[2](https://android.googlesource.com/platform/external/libhevc/%2B/9434d4d8846241f0575aaf48ee7d4342e926ae77)] | ID | Moderate | 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| DoS | High | 6.0, 6.0.1 |
| CVE-2018-9353 | [A-73965890](https://android.googlesource.com/platform/external/libhevc/%2B/7ea8a36d5de35d71ace260a695199093fcc1f08f) | ID | Moderate | 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| DoS | High | 6.0, 6.0.1 |
| CVE-2018-9354 | [A-74067957](https://android.googlesource.com/platform/frameworks/av/%2B/f5d61ac18c72c9abdbbd971bfae7ce8b073eb08a) | NSI | NSI | 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| DoS | High | 6.0, 6.0.1 |

### System

| CVE | References | Type | Severity | Updated AOSP versions |
| CVE-2018-9380 | [A-75298652](https://android.googlesource.com/platform/system/bt/%2B/85677abe2cc90bcd8b9df127088a97657d17c986) | EoP | Moderate | 7.0, 7.1.1, 7.1.2, 8.0, 8.1 |
| CVE-2018-9381 | [A-73125709](https://android.googlesource.com/platform/system/bt/%2B/0519f6aa5345be0917ad52188479230148adf8bd) | ID | Moderate | 8.1 |
| CVE-2018-9382 | A-35765136[\*](#asterisk) | EoP | Moderate | 6.0, 6.0.1, 7.0, 7.1.1, 7.1.2 |

### Kernel components

| CVE | References | Type | Severity | Component |
| CVE-2018-9383 | A-73827422[\*](#asterisk) | ID | Moderate | asn1\_decoder |
| CVE-2018-9384 | A-74356909 [Upstream kernel](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=c02433dd6de32f042cf3ffe476746b1115b8c096) | ID | Moderate | Kernel |
| CVE-2018-9385 | A-74128061 [Upstream kernel](https://patchwork.kernel.org/patch/10175611/) | EoP | Moderate | amba |
| CVE-2018-9386 | A-71363680[\*](#asterisk) | EoP | Moderate | HTC reboot\_block driver |
| CVE-2018-9387 | A-69006385[\*](#asterisk) | EoP | Moderate | mnh\_sm driver |
| CVE-2018-9388 | A-68343441[\*](#asterisk) | EoP | Moderate | ftm4\_touch |
| CVE-2018-9389 | A-65023306[\*](#asterisk) | EoP | Moderate | ipv4/ipv6 |
| CVE-2018-7480 | A-76106168 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=9b54d816e00425c3a517514e0d677bb3cec49258) | EoP | Moderate | Block handler |
| CVE-2017-18075 | A-73237057 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=d76c68109f37cb85b243a1cf0f40313afd2bae68) | EoP | Moderate | pcrypt |

### MediaTek components

| CVE | References | Type | Severity | Component |
| CVE-2018-9390 | A-76100614[\*](#asterisk) M-ALPS03849277 | EoP | Moderate | wlanThermo procfs entry |
| CVE-2018-9391 | A-72313579[\*](#asterisk) M-ALPS03762614 | EoP | Moderate | GPS HAL |
| CVE-2018-9392 | A-72312594[\*](#asterisk) M-ALPS03762614 | EoP | Moderate | GPS HAL |
| CVE-2018-9393 | A-72312577[\*](#asterisk) M-ALPS03753748 | EoP | Moderate | MTK wlan |
| CVE-2018-9394 | A-72312468[\*](#asterisk) M-ALPS03753652 | EoP | Moderate | MTK P2P driver |
| CVE-2018-9395 | A-72312071[\*](#asterisk) M-ALPS03753735 | EoP | Moderate | MTK cfg80211 |
| CVE-2018-9396 | A-71867113[\*](#asterisk) M-ALPS03740353 | EoP | Moderate | Mediatek CCCI |
| CVE-2018-9397 | A-71866634[\*](#asterisk) M-ALPS03532675 M-ALPS03479586 | EoP | Moderate | Mediatek WMT device |
| CVE-2018-9398 | A-71866289[\*](#asterisk) M-ALPS03740468 | EoP | Moderate | FM Radio Driver |
| CVE-2018-9399 | A-71866200[\*](#asterisk) M-ALPS03740489 | EoP | Moderate | /proc/driver/wmt\_dbg driver |
| CVE-2018-9400 | A-71865884[\*](#asterisk) M-ALPS03753678 | EoP | Moderate | Goodix Touchscreen Driver |
| CVE-2017-13308 | A-70728757[\*](#asterisk) M-ALPS03751855 | EoP | Moderate | thermal |
| CVE-2018-9401 | A-70511226[\*](#asterisk) M-ALPS03693409 | EoP | Moderate | cameraisp |
| CVE-2018-9402 | A-70728072[\*](#asterisk) M-ALPS03684171 | EoP | Moderate | WLAN driver |
| CVE-2018-9403 | A-72313700[\*](#asterisk) M-ALPS03762413 | EoP | Moderate | HAL |
| CVE-2018-9404 | A-72314374[\*](#asterisk) M-ALPS03773299 | EoP | Moderate | Radio Interface Layer |
| CVE-2018-9405 | A-72314804[\*](#asterisk) M-ALPS03762818 | EoP | Moderate | DmAgent |
| CVE-2018-9406 | A-70726950[\*](#asterisk) M-ALPS03684231 | ID | Moderate | NlpService |
| CVE-2018-9407 | A-70728406[\*](#asterisk) M-ALPS03902529 | ID | Moderate | emmc |
| CVE-2018-9408 | A-70729980[\*](#asterisk) M-ALPS03693684 | ID | Moderate | GPS |

### Qualcomm components

| CVE | References | Type | Severity | Component |
| CVE-2017-15824 | A-68163089[\*](#asterisk) QC-CR#2107596 | ID | Moderate | EDK2 bootloader |
| CVE-2018-5897 | A-70528036[\*](#asterisk) QC-CR#2172685 | ID | Moderate | diag |
| CVE-2018-5895 | A-70293535[\*](#asterisk) QC-CR#2161027 | ID | Moderate | qcacld |
| CVE-2018-5836 | A-74237168 [QC-CR#2160375](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-3.0/commit/?id=12a789c2e0e9fd2df40ac13ac27fe99487263887) | ID | Moderate | WLAN |
| CVE-2018-3577 | A-72957387 [QC-CR#2129566](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-2.0/commit/?id=cf1c43ce8840021d2907afaa6c514e6971d7ebac) | ID | Moderate | WLAN |
| CVE-2017-15824 | A-68992463 [QC-CR#2107596](https://source.codeaurora.org/quic/la/abl/tianocore/edk2/commit/?id=6ad7ccfee4f78d23b4b8f5ebda0eef54dced32e3) | ID | Moderate | bootloader |
| CVE-2017-14893 | A-68992461 [QC-CR#2104835](https://source.codeaurora.org/quic/la/abl/tianocore/edk2/commit/?id=c8dc3bf07ee909e6e57ad7887f9d3c0ffa5df795) | ID | Moderate | bootloader |
| CVE-2017-14872 | A-68992457 [QC-CR#2073366](https://source.codeaurora.org/quic/la/abl/tianocore/edk2/commit/?id=1daa83baa41d1e6291e89f69e6487695b6890c01) | ID | Moderate | bootloader |
| CVE-2018-5893 | A-74237664 [QC-CR#2146949](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-3.0/commit/?id=4cc54a30958d2a8d989364aa45a27fde3dd17352) | EoP | Moderate | WLAN |
| CVE-2016-5342, CVE-2016-5080 | A-72232294[\*](#asterisk) QC-CR#1032174 | EoP | Moderate | WLAN Driver |
| CVE-2018-5899 | A-71638332[\*](#asterisk) QC-CR#1040612 | EoP | Moderate | WLAN Driver |
| CVE-2018-5890 | A-71501675 [QC-CR#2127348](https://source.codeaurora.org/quic/la/abl/tianocore/edk2/commit/?id=c9c8de8000ff32f8d1e24e697d861d92d8ed0b7a) | EoP | Moderate | Bootloader |
| CVE-2018-5889 | A-71501674 [QC-CR#2127341](https://source.codeaurora.org/quic/la/abl/tianocore/edk2/commit/?id=a95ca8e2eeb8a030e977f033cff122cad408158c) | EoP | Moderate | Bootloader |
| CVE-2018-5888 | A-71501672 [QC-CR#2127312](https://source.codeaurora.org/quic/la/abl/tianocore/edk2/commit/?id=5388803fa6d004382f4a857056ce06d963698d9c) | EoP | Moderate | Bootloader |
| CVE-2018-5887 | A-71501669 [QC-CR#2127305](https://source.codeaurora.org/quic/la/abl/tianocore/edk2/commit/?id=c8415f6f2271008aef5056689950236df627d9b1) | EoP | Moderate | Bootloader |
| CVE-2018-5898 | A-71363804[\*](#asterisk) QC-CR#2173850 | EoP | Moderate | QC Audio Driver |
| CVE-2018-5832 | A-69065862[\*](#asterisk) QC-CR#2149998 | EoP | Moderate | Camerav2 |
| CVE-2018-5857 | A-62536960[\*](#asterisk) QC-CR#2169403 | EoP | Moderate | wcd\_cpe\_core |
| CVE-2018-3597 | A-74237782 [QC-CR#2143070](https://source.codeaurora.org/quic/la/kernel/msm-4.4/commit/?id=e569b915a246627d0449016408a9c0d388ee4ab4) | EoP | Moderate | DSP\_Services |
| CVE-2018-3564 | A-72957546 [QC-CR#2062648](https://source.codeaurora.org/quic/la/kernel/msm-4.4/commit/?id=782cd411398e3cf2aca1615ab2649df0c46920ee) | EoP | Moderate | DSP\_Services |
| CVE-2017-15856 | A-72957506 [QC-CR#2111922](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-2.0/commit/?id=ed02c0ccd6f7461a69d64903738372eaf21babcd) | EoP | Moderate | power\_stats debugfs node |

### Qualcomm closed-source components

These vulnerabilities affect Qualcomm components and are described in further
detail in the appropriate Qualcomm AMSS security bulletin or security alert.
The severity assessment of these issues is provided directly by Qualcomm.

| CVE | References | Type | Severity | Component |
| CVE-2017-11088 | A-72951251[\*](#asterisk) | N/A | Moderate | Closed-source component |
| CVE-2017-11076 | A-65049457[\*](#asterisk) | N/A | Moderate | Closed-source component |

## Functional patches

These updates are included for affected Pixel devices to address functionality
issues not related to the security of Pixel devices. The table includes
associated references; the affected category, such as Bluetooth or mobile data;
improvements; and affected devices.

| References | Category | Improvements | Devices |
| --- | --- | --- | --- |
| A-74413120 | Bluetooth | Improve BLE performance | All |
| A-76022834 | Performance | Improve antenna-switching behavior in areas of weak coverage | Pixel 2, Pixel 2 XL |
| A-77963927 | Wi-Fi | Improve Wi-Fi connectivity with certain Wi-Fi access points | Pixel, Pixel XL, Pixel 2, Pixel 2 XL |
| A-77458860 | UI | IMEI SV format correctly displays as numeric | Pixel, Pixel XL, Pixel 2, Pixel 2 XL |
| A-68114567 A-74058011 | Display | Improve consistency of Always On Display | Pixel 2 XL |
| A-70282393 | Performance | Improve proximity sensor behavior | Pixel 2 XL |

## Common questions and answers

This section answers common questions that may occur after reading this
bulletin.

**1. How do I determine if my device is updated to address these issues?**

Security patch levels of 2018-06-05 or later address all issues associated with
the 2018-06-05 security patch level and all previous patch levels. To learn how
to check a device's security patch level, read the instructions on the [Pixel
and Nexus update schedule](https://support.google.com/pixelphone/answer/4457705#pixel_phones&nexus_devices).

**2. What do the entries in the *Type* column mean?**

Entries in the *Type* column of the vulnerability details table reference
the classification of the security vulnerability.

| Abbreviation | Definition |
| RCE | Remote code execution |
| EoP | Elevation of privilege |
| ID | Information disclosure |
| DoS | Denial of service |
| N/A | Classification not available |

**3. What do the entries in the *References* column mean?**

Entries under the *References* column of the vulnerability details table
may contain a prefix identifying the organization to which the reference value
belongs.

| Prefix | Reference |
| A- | Android bug ID |
| QC- | Qualcomm reference number |
| M- | MediaTek reference number |
| N- | NVIDIA reference number |
| B- | Broadcom reference number |

**4. What does a \* next to the Android bug ID in the *References*
column mean?**

Issues that are not publicly available have a \* next to the Android bug ID in
the *References* column. The update for that issue is generally contained
in the latest binary drivers for Pixel / Nexus devices available
from the [Google
Developer site](https://developers.google.com/android/nexus/drivers).

**5. Why are security vulnerabilities split between this bulletin and the
Android Security Bulletins?**

Security vulnerabilities that are documented in the Android Security Bulletins
are required in order to declare the latest security patch level on Android
devices. Additional security vulnerabilities, such as those documented in this
bulletin are not required for declaring a security patch level.

## Versions

| Version | Date | Notes |
| 1.0 | June 4, 2018 | Bulletin published. |
| 1.1 | June 6, 2018 | Bulletin revised to include AOSP links. |

Content and code samples on this page are subject to the licenses described in the [Content License](/license). Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.

Last updated 2024-08-26 UTC.

[[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2024-08-26 UTC."],[],[]]

* ### Build

  + [Android repository](//android.googlesource.com)
  + [Requirements](/source/requirements)
  + [Downloading](/source/downloading)
  + [Preview binaries](//developers.google.com/android/blobs-preview/)
  + [Factory images](//developers.google.com/android/images/)
  + [Driver binaries](//developers.google.com/android/drivers/)
* ### Connect

  + [@Android on Twitter](//twitter.com/Android/)
  + [@AndroidDev on Twitter](//twitter.com/AndroidDev/)
  + [Android Blog](//blog.google/products/android/)
  + [Google Security Blog](//security.googleblog.com)
  + [Platform on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-platform/)
  + [Building on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-building/)
  + [Porting on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-porting/)
* ### Get help

  + [Android Help Center](//support.google.com/android/)
  + [Pixel Help Center](//support.google.com/pixelphone/)
  + [www.android.com](//www.android.com)
  + [Google Mobile Services](//www.android.com/gms/)
  + [Stack Overflow](//stackoverflow.com/questions/tagged/android-source/)
  + [Issue Tracker](//issuetracker.google.com/issues?q=status:open%20componentid:190923)

* [About Android](/source/)
* [Community](/source/community)
* [Legal](/legal)
* [License](/license)
* [Privacy](//policies.google.com/privacy)
* [Site feedback](//issuetracker.google.com/issues/new?component=191476)
* Manage cookies

* English
* Deutsch
* Español
* Español – América Latina
* Français
* Indonesia
* Italiano
* Polski
* Português
* Português – Brasil
* Tiếng Việt
* Türkçe
* Русский
* עברית
* العربيّة
* فارسی
* हिंदी
* বাংলা
* ภาษาไทย
* 中文 – 简体
* 中文 – 繁體
* 日本語
* 한국어


