=== Content from github.com_7fd4e0e8_20250125_054235.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRocketChat%2FRocket.Chat%2Fpull%2F10793)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRocketChat%2FRocket.Chat%2Fpull%2F10793)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=RocketChat%2FRocket.Chat)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[RocketChat](/RocketChat)
/
**[Rocket.Chat](/RocketChat/Rocket.Chat)**
Public

* [Notifications](/login?return_to=%2FRocketChat%2FRocket.Chat) You must be signed in to change notification settings
* [Fork
  11.1k](/login?return_to=%2FRocketChat%2FRocket.Chat)
* [Star
   41.7k](/login?return_to=%2FRocketChat%2FRocket.Chat)

* [Code](/RocketChat/Rocket.Chat)
* [Issues
  2.5k](/RocketChat/Rocket.Chat/issues)
* [Pull requests
  635](/RocketChat/Rocket.Chat/pulls)
* [Discussions](/RocketChat/Rocket.Chat/discussions)
* [Actions](/RocketChat/Rocket.Chat/actions)
* [Projects
  2](/RocketChat/Rocket.Chat/projects)
* [Wiki](/RocketChat/Rocket.Chat/wiki)
* [Security](/RocketChat/Rocket.Chat/security)
* [Insights](/RocketChat/Rocket.Chat/pulse)

Additional navigation options

* [Code](/RocketChat/Rocket.Chat)
* [Issues](/RocketChat/Rocket.Chat/issues)
* [Pull requests](/RocketChat/Rocket.Chat/pulls)
* [Discussions](/RocketChat/Rocket.Chat/discussions)
* [Actions](/RocketChat/Rocket.Chat/actions)
* [Projects](/RocketChat/Rocket.Chat/projects)
* [Wiki](/RocketChat/Rocket.Chat/wiki)
* [Security](/RocketChat/Rocket.Chat/security)
* [Insights](/RocketChat/Rocket.Chat/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FRocketChat%2FRocket.Chat%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FRocketChat%2FRocket.Chat%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [FIX] Not escaping special chars on mentions #10793

 Merged

[sampaiodiego](/sampaiodiego)
merged 4 commits into
[RocketChat:develop](/RocketChat/Rocket.Chat/tree/develop "RocketChat/Rocket.Chat:develop")
from
[erhan-:develop](/erhan-/Rocket.Chat/tree/develop "erhan-/Rocket.Chat:develop")

May 17, 2018

 Merged

# [[FIX] Not escaping special chars on mentions](#top) #10793

[sampaiodiego](/sampaiodiego)
merged 4 commits into
[RocketChat:develop](/RocketChat/Rocket.Chat/tree/develop "RocketChat/Rocket.Chat:develop")
from
[erhan-:develop](/erhan-/Rocket.Chat/tree/develop "erhan-/Rocket.Chat:develop")

May 17, 2018

[Conversation
7](/RocketChat/Rocket.Chat/pull/10793)
[Commits
4](/RocketChat/Rocket.Chat/pull/10793/commits)
[Checks
0](/RocketChat/Rocket.Chat/pull/10793/checks)
[Files changed](/RocketChat/Rocket.Chat/pull/10793/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![erhan-](https://avatars.githubusercontent.com/u/3534714?s=60&v=4)](/erhan-)

Copy link

Contributor

### @erhan- **[erhan-](/erhan-)** commented [May 17, 2018](#issue-323932013) • edited Loading

One of the XSS is happening when the "Use Real Name" setting is enabled. You can change your display name to this for example:

`<svg onload=alert(69)>`

And then mention yourself with @ in a room. Everybody in the room will execute the code. Exfiltrating the data is left to the reader as an excercise.

I have no instance to test this but I think it should work.

Timeline:

20.04.2018 - Send two XSS two security@rocket.chat, Received link to HackerOne but issues are deactivated

11.05.2018 - asked for update

17.05.2018 - no answer, so created this PR

I found this bug together with [@Faradax](https://github.com/Faradax) during our work at [G Data - Advanced Analytics](https://www.gdata-advancedanalytics.de/)

Sorry, something went wrong.

All reactions

[![@erhan-](https://avatars.githubusercontent.com/u/3534714?s=40&v=4)](/erhan-)

`[Fix XSS vulnerability in username mention if "Use Real Name" config d…](/RocketChat/Rocket.Chat/pull/10793/commits/e04bcefbf2045c9d6123660955248e9fdfe99909 "Fix XSS vulnerability in username mention if \"Use Real Name\" config directive is set.")`
 …

`[e04bcef](/RocketChat/Rocket.Chat/pull/10793/commits/e04bcefbf2045c9d6123660955248e9fdfe99909)`

```
…irective is set.
```

[![@CLAassistant](https://avatars.githubusercontent.com/u/11571300?s=80&u=04709ab66059d1fb5246ce2d47bd3bc44e639ee0&v=4)](/CLAassistant)

Copy link

### **[CLAassistant](/CLAassistant)** commented [May 17, 2018](#issuecomment-389796723) • edited Loading

| [CLA assistant check](https://cla-assistant.io/RocketChat/Rocket.Chat?pullRequest=10793) All committers have signed the CLA. |
| --- |

All reactions

Sorry, something went wrong.

[![@mtimofiiv](https://avatars.githubusercontent.com/u/428948?s=80&u=380701dc4941e9c68e49a775e8c8daf86d4fa4bd&v=4)](/mtimofiiv)

Copy link

### **[mtimofiiv](/mtimofiiv)** commented [May 17, 2018](#issuecomment-389814715)

| Seems like a pretty important issue to look into merging straight away. The fix is simple and uses an existing method. |
| --- |

All reactions

Sorry, something went wrong.

[![@erhan-](https://avatars.githubusercontent.com/u/3534714?s=40&u=12a3e48d0cd3eec1d1d669e0870a0bb85bb9715f&v=4)](/erhan-)
[erhan-](/erhan-)
mentioned this pull request
[May 17, 2018](#ref-issue-323977287)

[One persistent and one reflected XSS
#10795](/RocketChat/Rocket.Chat/issues/10795)

Closed

[![@sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=40&v=4)](/sampaiodiego)

`[Fix using underscore string and add tests](/RocketChat/Rocket.Chat/pull/10793/commits/364d507175ecf5e4eea8a5281b0a91c1e1d95417 "Fix using underscore string and add tests")`

`[364d507](/RocketChat/Rocket.Chat/pull/10793/commits/364d507175ecf5e4eea8a5281b0a91c1e1d95417)`

[![@sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=40&u=e417240e9416c075abc8797ec3cbf24bd52fee5e&v=4)](/sampaiodiego)
[sampaiodiego](/sampaiodiego)
changed the title
~~Fix XSS vulnerability in user mention~~
[FIX] Not escaping special chars on mentions
[May 17, 2018](#event-1631800213)

[![sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=60&v=4)](/sampaiodiego)

**[sampaiodiego](/sampaiodiego)**
requested changes
[May 17, 2018](#pullrequestreview-121012834)

 [View reviewed changes](/RocketChat/Rocket.Chat/pull/10793/files/e04bcefbf2045c9d6123660955248e9fdfe99909)

Copy link

Member

### @sampaiodiego **[sampaiodiego](/sampaiodiego)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[@erhan-](https://github.com/erhan-) much appreciated for your fix.. we're working to fix our harcker one issues.

I have tested this and it's not working since `escapeHTML` is from `underscore.string` and not `underscore`.. do you mind giving me write access to your fork so I can commit the fix and some tests I have written already? thx

Sorry, something went wrong.

All reactions

 [erhan-](/erhan-)
and others
added 2 commits
[May 17, 2018 14:37](#commits-pushed-298f97e)

[![@erhan-](https://avatars.githubusercontent.com/u/3534714?s=40&v=4)](/erhan-)

`[Use escapeHTML from underscore.string](/RocketChat/Rocket.Chat/pull/10793/commits/298f97ecfef0c4395c2e66c22e201e3511b54ae1 "Use escapeHTML from underscore.string")`

`[298f97e](/RocketChat/Rocket.Chat/pull/10793/commits/298f97ecfef0c4395c2e66c22e201e3511b54ae1)`

[![@sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=40&v=4)](/sampaiodiego)

`[Merge branch 'develop' of github.com:erhan-/Rocket.Chat into pr/10793…](/RocketChat/Rocket.Chat/pull/10793/commits/0c979ec80c408cc8ec557954b835f33d9fe76fca "Merge branch 'develop' of github.com:erhan-/Rocket.Chat into pr/10793-erhan--develop")`
 …

`[0c979ec](/RocketChat/Rocket.Chat/pull/10793/commits/0c979ec80c408cc8ec557954b835f33d9fe76fca)`

```
…-erhan--develop
```

[![sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=60&v=4)](/sampaiodiego)

**[sampaiodiego](/sampaiodiego)**
approved these changes
[May 17, 2018](#pullrequestreview-121022030)

 [View reviewed changes](/RocketChat/Rocket.Chat/pull/10793/files/0c979ec80c408cc8ec557954b835f33d9fe76fca)

[![@sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=40&u=e417240e9416c075abc8797ec3cbf24bd52fee5e&v=4)](/sampaiodiego)
[sampaiodiego](/sampaiodiego)
added this to the [0.64.2](/RocketChat/Rocket.Chat/milestone/117) milestone
[May 17, 2018](#event-1631895597)

[![@erhan-](https://avatars.githubusercontent.com/u/3534714?s=80&u=12a3e48d0cd3eec1d1d669e0870a0bb85bb9715f&v=4)](/erhan-)

Copy link

Contributor

Author

### **[erhan-](/erhan-)** commented [May 17, 2018](#issuecomment-389863379)

| Thanks for the quick response. |
| --- |

 👍
1
 Faradax reacted with thumbs up emoji
 ❤️
2
 sampaiodiego and juliagrala reacted with heart emoji

All reactions

* 👍
  1 reaction
* ❤️
  2 reactions

Sorry, something went wrong.

[![@sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=40&u=e417240e9416c075abc8797ec3cbf24bd52fee5e&v=4)](/sampaiodiego)
[sampaiodiego](/sampaiodiego)
merged commit [`5bfbb98`](/RocketChat/Rocket.Chat/commit/5bfbb98d301b0912fcc695d49aff35f2f34fc5c3)
into
RocketChat:develop

[May 17, 2018](https://github.com/RocketChat/Rocket.Chat/pull/10793#event-1632001072)

[![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=40&u=2bd6f2097cc1a347c982098e3619bf82af3e9e4d&v=4)](/rodrigok)
[rodrigok](/rodrigok)
mentioned this pull request
[May 18, 2018](#ref-pullrequest-324520233)

[Release 0.64.2
#10812](/RocketChat/Rocket.Chat/pull/10812)
 Merged

[rodrigok](/rodrigok)
added a commit
that referenced
this pull request
[May 18, 2018](#ref-commit-105715e)
[![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=40&u=2bd6f2097cc1a347c982098e3619bf82af3e9e4d&v=4)](/rodrigok)

`[Release 0.64.2 (](/RocketChat/Rocket.Chat/commit/105715ef270a49f1cdb7c6fbb266e0453c1b294f "Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2")[#10812](https://github.com/RocketChat/Rocket.Chat/pull/10812)[)](/RocketChat/Rocket.Chat/commit/105715ef270a49f1cdb7c6fbb266e0453c1b294f "Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2")`
…

`[105715e](/RocketChat/Rocket.Chat/commit/105715ef270a49f1cdb7c6fbb266e0453c1b294f)`

```
* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages ([#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions ([#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects ([#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2
```

This was referenced May 27, 2018

[Release 0.65.0
#10892](/RocketChat/Rocket.Chat/pull/10892)
 Closed

[Release 0.65.0
#10893](/RocketChat/Rocket.Chat/pull/10893)
 Merged

[rodrigok](/rodrigok)
added a commit
that referenced
this pull request
[May 28, 2018](#ref-commit-6d6d8be)
[![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=40&u=2bd6f2097cc1a347c982098e3619bf82af3e9e4d&v=4)](/rodrigok)

`[Release 0.65.0 (](/RocketChat/Rocket.Chat/commit/6d6d8be98050496bcd0a071dee545cbd49a9ef63 "Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0")[#10893](https://github.com/RocketChat/Rocket.Chat/pull/10893)[)](/RocketChat/Rocket.Chat/commit/6d6d8be98050496bcd0a071dee545cbd49a9ef63 "Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0")`
…

`[6d6d8be](/RocketChat/Rocket.Chat/commit/6d6d8be98050496bcd0a071dee545cbd49a9ef63)`

```
* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages ([#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* [FIX] Not escaping special chars on mentions ([#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Prevent setup wizard redirects ([#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings ([#10625](https://github.com/RocketChat/Rocket.Chat/pull/10625))

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` ([#9733](https://github.com/RocketChat/Rocket.Chat/pull/9733))

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` ([#9679](https://github.com/RocketChat/Rocket.Chat/pull/9679))

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [#2](https://github.com/RocketChat/Rocket.Chat/pull/2)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [#3](https://github.com/RocketChat/Rocket.Chat/issues/3)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms ([#10564](https://github.com/RocketChat/Rocket.Chat/pull/10564))

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token ([#10741](https://github.com/RocketChat/Rocket.Chat/pull/10741))

* [FIX] Fix rest /me endpoint ([#10662](https://github.com/RocketChat/Rocket.Chat/pull/10662))

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread ([#10778](https://github.com/RocketChat/Rocket.Chat/pull/10778))

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions ([#10488](https://github.com/RocketChat/Rocket.Chat/pull/10488))

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion ([#10702](https://github.com/RocketChat/Rocket.Chat/pull/10702))

* major dependencies update ([#10661](https://github.com/RocketChat/Rocket.Chat/pull/10661))

* Remove old translations ([#10448](https://github.com/RocketChat/Rocket.Chat/pull/10448))

* [FIX] disable/enable System Messages ([#10704](https://github.com/RocketChat/Rocket.Chat/pull/10704))

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment ([#10214](https://github.com/RocketChat/Rocket.Chat/pull/10214))

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling "Collapse Embedded Media by Default" hides replies, quotes ([#10427](https://github.com/RocketChat/Rocket.Chat/pull/10427))

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments ([#10608](https://github.com/RocketChat/Rocket.Chat/pull/10608))

[NEW] Lazy load image attachments

* Develop sync ([#10815](https://github.com/RocketChat/Rocket.Chat/pull/10815))

* add redhat dockerfile to master ([#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint ([#10677](https://github.com/RocketChat/Rocket.Chat/pull/10677))

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. ([#10612](https://github.com/RocketChat/Rocket.Chat/pull/10612))

* [NEW] Enable/disable Livechat registration form fields ([#10584](https://github.com/RocketChat/Rocket.Chat/pull/10584))

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. ([#10663](https://github.com/RocketChat/Rocket.Chat/pull/10663))

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy ([#9857](https://github.com/RocketChat/Rocket.Chat/pull/9857))

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events ([#10822](https://github.com/RocketChat/Rocket.Chat/pull/10822))

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html ([#10715](https://github.com/RocketChat/Rocket.Chat/pull/10715))

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission ([#10753](https://github.com/RocketChat/Rocket.Chat/pull/10753))

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using "Unread on Top" user preference ([#10734](https://github.com/RocketChat/Rocket.Chat/pull/10734))

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression ([#10833](https://github.com/RocketChat/Rocket.Chat/pull/10833))

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues ([#10835](https://github.com/RocketChat/Rocket.Chat/pull/10835))

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist ([#10837](https://github.com/RocketChat/Rocket.Chat/pull/10837))

* Fix: Regression on users avatar in admin pages ([#10836](https://github.com/RocketChat/Rocket.Chat/pull/10836))

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template ([#10520](https://github.com/RocketChat/Rocket.Chat/pull/10520))

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again ([#10848](https://github.com/RocketChat/Rocket.Chat/pull/10848))

* Fix layout badge cutting on unread messages for long names ([#10846](https://github.com/RocketChat/Rocket.Chat/pull/10846))

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint ([#10840](https://github.com/RocketChat/Rocket.Chat/pull/10840))

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement ([#10853](https://github.com/RocketChat/Rocket.Chat/pull/10853))

* Regression: Fix email notification preference not showing correct selected value ([#10847](https://github.com/RocketChat/Rocket.Chat/pull/10847))

* Fix email notification preference not showing correct selected value

Closes [#10844](https://github.com/RocketChat/Rocket.Chat/issues/10844)

* Save email notification preferences correctly

Closes [#10787](https://github.com/RocketChat/Rocket.Chat/issues/10787)

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times ([#10878](https://github.com/RocketChat/Rocket.Chat/pull/10878))

* Fixed a typo on error message for push token API ([#10857](https://github.com/RocketChat/Rocket.Chat/pull/10857))

Fix: typo on error message for push token API

* Adds flex-box to preview commands ([#10883](https://github.com/RocketChat/Rocket.Chat/pull/10883))

* Fix: Regression Lazyload fix shuffle avatars ([#10887](https://github.com/RocketChat/Rocket.Chat/pull/10887))

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update 🚀 ([#10886](https://github.com/RocketChat/Rocket.Chat/pull/10886))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [FIX] Manage apps layout ([#10882](https://github.com/RocketChat/Rocket.Chat/pull/10882))

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge ([#10875](https://github.com/RocketChat/Rocket.Chat/pull/10875))

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0
```

[rodrigok](/rodrigok)
added a commit
that referenced
this pull request
[May 28, 2018](#ref-commit-76f27e2)
[![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=40&u=2bd6f2097cc1a347c982098e3619bf82af3e9e4d&v=4)](/rodrigok)

`[Merge master into develop & Set version to 0.66.0-develop (](/RocketChat/Rocket.Chat/commit/76f27e2da3541fc4ff71b3171f11f2db67a4833d "Merge master into develop & Set version to 0.66.0-develop (#10903)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Bump version to 0.66.0-develop

* Update HISTORY.md")[#10903](https://github.com/RocketChat/Rocket.Chat/pull/10903)[)](/RocketChat/Rocket.Chat/commit/76f27e2da3541fc4ff71b3171f11f2db67a4833d "Merge master into develop & Set version to 0.66.0-develop (#10903)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Bump version to 0.66.0-develop

* Update HISTORY.md")`
…

`[76f27e2](/RocketChat/Rocket.Chat/commit/76f27e2da3541fc4ff71b3171f11f2db67a4833d)`

```
* add redhat dockerfile to master ([#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 ([#10812](https://github.com/RocketChat/Rocket.Chat/pull/10812))

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages ([#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions ([#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects ([#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Release 0.65.0 ([#10893](https://github.com/RocketChat/Rocket.Chat/pull/10893))

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages ([#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* [FIX] Not escaping special chars on mentions ([#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Prevent setup wizard redirects ([#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings ([#10625](https://github.com/RocketChat/Rocket.Chat/pull/10625))

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` ([#9733](https://github.com/RocketChat/Rocket.Chat/pull/9733))

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` ([#9679](https://github.com/RocketChat/Rocket.Chat/pull/9679))

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [#2](https://github.com/RocketChat/Rocket.Chat/pull/2)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [#3](https://github.com/RocketChat/Rocket.Chat/issues/3)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms ([#10564](https://github.com/RocketChat/Rocket.Chat/pull/10564))

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token ([#10741](https://github.com/RocketChat/Rocket.Chat/pull/10741))

* [FIX] Fix rest /me endpoint ([#10662](https://github.com/RocketChat/Rocket.Chat/pull/10662))

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread ([#10778](https://github.com/RocketChat/Rocket.Chat/pull/10778))

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions ([#10488](https://github.com/RocketChat/Rocket.Chat/pull/10488))

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion ([#10702](https://github.com/RocketChat/Rocket.Chat/pull/10702))

* major dependencies update ([#10661](https://github.com/RocketChat/Rocket.Chat/pull/10661))

* Remove old translations ([#10448](https://github.com/RocketChat/Rocket.Chat/pull/10448))

* [FIX] disable/enable System Messages ([#10704](https://github.com/RocketChat/Rocket.Chat/pull/10704))

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment ([#10214](https://github.com/RocketChat/Rocket.Chat/pull/10214))

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling "Collapse Embedded Media by Default" hides replies, quotes ([#10427](https://github.com/RocketChat/Rocket.Chat/pull/10427))

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments ([#10608](https://github.com/RocketChat/Rocket.Chat/pull/10608))

[NEW] Lazy load image attachments

* Develop sync ([#10815](https://github.com/RocketChat/Rocket.Chat/pull/10815))

* add redhat dockerfile to master ([#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint ([#10677](https://github.com/RocketChat/Rocket.Chat/pull/10677))

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. ([#10612](https://github.com/RocketChat/Rocket.Chat/pull/10612))

* [NEW] Enable/disable Livechat registration form fields ([#10584](https://github.com/RocketChat/Rocket.Chat/pull/10584))

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. ([#10663](https://github.com/RocketChat/Rocket.Chat/pull/10663))

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy ([#9857](https://github.com/RocketChat/Rocket.Chat/pull/9857))

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events ([#10822](https://github.com/RocketChat/Rocket.Chat/pull/10822))

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html ([#10715](https://github.com/RocketChat/Rocket.Chat/pull/10715))

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission ([#10753](https://github.com/RocketChat/Rocket.Chat/pull/10753))

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using "Unread on Top" user preference ([#10734](https://github.com/RocketChat/Rocket.Chat/pull/10734))

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression ([#10833](https://github.com/RocketChat/Rocket.Chat/pull/10833))

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues ([#10835](https://github.com/RocketChat/Rocket.Chat/pull/10835))

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist ([#10837](https://github.com/RocketChat/Rocket.Chat/pull/10837))

* Fix: Regression on users avatar in admin pages ([#10836](https://github.com/RocketChat/Rocket.Chat/pull/10836))

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template ([#10520](https://github.com/RocketChat/Rocket.Chat/pull/10520))

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again ([#10848](https://github.com/RocketChat/Rocket.Chat/pull/10848))

* Fix layout badge cutting on unread messages for long names ([#10846](https://github.com/RocketChat/Rocket.Chat/pull/10846))

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint ([#10840](https://github.com/RocketChat/Rocket.Chat/pull/10840))

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement ([#10853](https://github.com/RocketChat/Rocket.Chat/pull/10853))

* Regression: Fix email notification preference not showing correct selected value ([#10847](https://github.com/RocketChat/Rocket.Chat/pull/10847))

* Fix email notification preference not showing correct selected value

Closes [#10844](https://github.com/RocketChat/Rocket.Chat/issues/10844)

* Save email notification preferences correctly

Closes [#10787](https://github.com/RocketChat/Rocket.Chat/issues/10787)

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times ([#10878](https://github.com/RocketChat/Rocket.Chat/pull/10878))

* Fixed a typo on error message for push token API ([#10857](https://github.com/RocketChat/Rocket.Chat/pull/10857))

Fix: typo on error message for push token API

* Adds flex-box to preview commands ([#10883](https://github.com/RocketChat/Rocket.Chat/pull/10883))

* Fix: Regression Lazyload fix shuffle avatars ([#10887](https://github.com/RocketChat/Rocket.Chat/pull/10887))

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update 🚀 ([#10886](https://github.com/RocketChat/Rocket.Chat/pull/10886))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [FIX] Manage apps layout ([#10882](https://github.com/RocketChat/Rocket.Chat/pull/10882))

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge ([#10875](https://github.com/RocketChat/Rocket.Chat/pull/10875))

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Bump version to 0.66.0-develop

* Update HISTORY.md
```

[rodrigok](/rodrigok)
added a commit
that referenced
this pull request
[May 28, 2018](#ref-commit-409605e)
[![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=40&u=2bd6f2097cc1a347c982098e3619bf82af3e9e4d&v=4)](/rodrigok)

`[Develop sync2 (](/RocketChat/Rocket.Chat/commit/409605e1a0122632b32b59f1c0d3f429360712d9 "Develop sync2 (#10908)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0")[#10908](https://github.com/RocketChat/Rocket.Chat/pull/10908)[)](/RocketChat/Rocket.Chat/commit/409605e1a0122632b32b59f1c0d3f429360712d9 "Develop sync2 (#10908)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0")`
…

`[409605e](/RocketChat/Rocket.Chat/commit/409605e1a0122632b32b59f1c0d3f429360712d9)`

```
* add redhat dockerfile to master ([#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 ([#10812](https://github.com/RocketChat/Rocket.Chat/pull/10812))

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages ([#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions ([#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects ([#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 ([#10893](https://github.com/RocketChat/Rocket.Chat/pull/10893))

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages ([#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* [FIX] Not escaping special chars on mentions ([#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Prevent setup wizard redirects ([#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings ([#10625](https://github.com/RocketChat/Rocket.Chat/pull/10625))

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` ([#9733](https://github.com/RocketChat/Rocket.Chat/pull/9733))

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` ([#9679](https://github.com/RocketChat/Rocket.Chat/pull/9679))

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [#2](https://github.com/RocketChat/Rocket.Chat/pull/2)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [#3](https://github.com/RocketChat/Rocket.Chat/issues/3)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms ([#10564](https://github.com/RocketChat/Rocket.Chat/pull/10564))

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token ([#10741](https://github.com/RocketChat/Rocket.Chat/pull/10741))

* [FIX] Fix rest /me endpoint ([#10662](https://github.com/RocketChat/Rocket.Chat/pull/10662))

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread ([#10778](https://github.com/RocketChat/Rocket.Chat/pull/10778))

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions ([#10488](https://github.com/RocketChat/Rocket.Chat/pull/10488))

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion ([#10702](https://github.com/RocketChat/Rocket.Chat/pull/10702))

* major dependencies update ([#10661](https://github.com/RocketChat/Rocket.Chat/pull/10661))

* Remove old translations ([#10448](https://github.com/RocketChat/Rocket.Chat/pull/10448))

* [FIX] disable/enable System Messages ([#10704](https://github.com/RocketChat/Rocket.Chat/pull/10704))

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment ([#10214](https://github.com/RocketChat/Rocket.Chat/pull/10214))

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling "Collapse Embedded Media by Default" hides replies, quotes ([#10427](https://github.com/RocketChat/Rocket.Chat/pull/10427))

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments ([#10608](https://github.com/RocketChat/Rocket.Chat/pull/10608))

[NEW] Lazy load image attachments

* Develop sync ([#10815](https://github.com/RocketChat/Rocket.Chat/pull/10815))

* add redhat dockerfile to master ([#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint ([#10677](https://github.com/RocketChat/Rocket.Chat/pull/10677))

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. ([#10612](https://github.com/RocketChat/Rocket.Chat/pull/10612))

* [NEW] Enable/disable Livechat registration form fields ([#10584](https://github.com/RocketChat/Rocket.Chat/pull/10584))

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. ([#10663](https://github.com/RocketChat/Rocket.Chat/pull/10663))

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy ([#9857](https://github.com/RocketChat/Rocket.Chat/pull/9857))

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events ([#10822](https://github.com/RocketChat/Rocket.Chat/pull/10822))

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html ([#10715](https://github.com/RocketChat/Rocket.Chat/pull/10715))

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission ([#10753](https://github.com/RocketChat/Rocket.Chat/pull/10753))

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using "Unread on Top" user preference ([#10734](https://github.com/RocketChat/Rocket.Chat/pull/10734))

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression ([#10833](https://github.com/RocketChat/Rocket.Chat/pull/10833))

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues ([#10835](https://github.com/RocketChat/Rocket.Chat/pull/10835))

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist ([#10837](https://github.com/RocketChat/Rocket.Chat/pull/10837))

* Fix: Regression on users avatar in admin pages ([#10836](https://github.com/RocketChat/Rocket.Chat/pull/10836))

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template ([#10520](https://github.com/RocketChat/Rocket.Chat/pull/10520))

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again ([#10848](https://github.com/RocketChat/Rocket.Chat/pull/10848))

* Fix layout badge cutting on unread messages for long names ([#10846](https://github.com/RocketChat/Rocket.Chat/pull/10846))

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint ([#10840](https://github.com/RocketChat/Rocket.Chat/pull/10840))

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement ([#10853](https://github.com/RocketChat/Rocket.Chat/pull/10853))

* Regression: Fix email notification preference not showing correct selected value ([#10847](https://github.com/RocketChat/Rocket.Chat/pull/10847))

* Fix email notification preference not showing correct selected value

Closes [#10844](https://github.com/RocketChat/Rocket.Chat/issues/10844)

* Save email notification preferences correctly

Closes [#10787](https://github.com/RocketChat/Rocket.Chat/issues/10787)

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times ([#10878](https://github.com/RocketChat/Rocket.Chat/pull/10878))

* Fixed a typo on error message for push token API ([#10857](https://github.com/RocketChat/Rocket.Chat/pull/10857))

Fix: typo on error message for push token API

* Adds flex-box to preview commands ([#10883](https://github.com/RocketChat/Rocket.Chat/pull/10883))

* Fix: Regression Lazyload fix shuffle avatars ([#10887](https://github.com/RocketChat/Rocket.Chat/pull/10887))

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update 🚀 ([#10886](https://github.com/RocketChat/Rocket.Chat/pull/10886))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [FIX] Manage apps layout ([#10882](https://github.com/RocketChat/Rocket.Chat/pull/10882))

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge ([#10875](https://github.com/RocketChat/Rocket.Chat/pull/10875))

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0
```

[![@erhan-](https://avatars.githubusercontent.com/u/3534714?s=80&u=12a3e48d0cd3eec1d1d669e0870a0bb85bb9715f&v=4)](/erhan-)

Copy link

Contributor

Author

### **[erhan-](/erhan-)** commented [Jun 6, 2018](#issuecomment-395018436)

| Why is there no security notice about the vulnerability in the blog post? <https://rocket.chat/2018/05/30/0-65-0-release/>  It looks like the developers are trying to hide the fact that there was a security vulnerability. This is not acceptable and hurts the principle of responsible disclosure. |
| --- |

 👍
3
 laurent22, driverdan, and the-hotmann reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

Sorry, something went wrong.

[![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=80&u=2bd6f2097cc1a347c982098e3619bf82af3e9e4d&v=4)](/rodrigok)

Copy link

Member

### **[rodrigok](/rodrigok)** commented [Jun 6, 2018](#issuecomment-395195356)

| HI [@erhan-](https://github.com/erhan-)  We do not disclose security fixes as soon we have them fixed to prevent bad guys to exploit them.  We are currently working on our discloser polices document for security fixes and we will share it here as soon we have it finished.  Let me know if you want to contribute with ideas to our document, if you do please contact me at <https://open.rocket.chat/direct/rodrigo.nascimento>  Thanks |
| --- |

 👍
1
 ggazzo reacted with thumbs up emoji
 👎
3
 laurent22, driverdan, and b- reacted with thumbs down emoji
 😕
2
 laurent22 and b- reacted with confused emoji

All reactions

* 👍
  1 reaction
* 👎
  3 reactions
* 😕
  2 reactions

Sorry, something went wrong.

[![@erhan-](https://avatars.githubusercontent.com/u/3534714?s=80&u=12a3e48d0cd3eec1d1d669e0870a0bb85bb9715f&v=4)](/erhan-)

Copy link

Contributor

Author

### **[erhan-](/erhan-)** commented [Jul 11, 2018](#issuecomment-404070895) • edited Loading

| That's a good approach. But not disclosing at all is a total no go and the reason why I don't use RC anymore. Anyone who tracks the issues was able to see this vulnerability. The normal enduser not.  Following CVE was assigned: [CVE-2018-13878](https://github.com/advisories/GHSA-8f7m-2hjp-gccx "CVE-2018-13878") <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-13878> |
| --- |

 👍
3
 tholu, laurent22, and the-hotmann reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

Sorry, something went wrong.

[Kishn0109](/Kishn0109)
pushed a commit
to Kishn0109/Rocket.Chat
that referenced
this pull request
[May 26, 2023](#ref-commit-6b05477)
[![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=40&u=2bd6f2097cc1a347c982098e3619bf82af3e9e4d&v=4)](/rodrigok) [![@Kishn0109](https://avatars.githubusercontent.com/u/85572761?s=40&v=4)](/Kishn0109)

`[Develop sync2 (](/Kishn0109/Rocket.Chat/commit/6b054776e4837c4894ff1de38428355708ca14c7 "Develop sync2 (#10908)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0")[RocketChat#10908](https://github.com/RocketChat/Rocket.Chat/pull/10908)[)](/Kishn0109/Rocket.Chat/commit/6b054776e4837c4894ff1de38428355708ca14c7 "Develop sync2 (#10908)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0")`
…

`[6b05477](/Kishn0109/Rocket.Chat/commit/6b054776e4837c4894ff1de38428355708ca14c7)`

```
* add redhat dockerfile to master ([RocketChat#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([RocketChat#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([RocketChat#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([RocketChat#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([RocketChat#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 ([RocketChat#10812](https://github.com/RocketChat/Rocket.Chat/pull/10812))

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([RocketChat#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([RocketChat#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([RocketChat#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([RocketChat#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([RocketChat#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([RocketChat#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([RocketChat#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([RocketChat#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([RocketChat#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([RocketChat#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([RocketChat#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([RocketChat#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([RocketChat#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([RocketChat#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages ([RocketChat#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([RocketChat#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([RocketChat#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([RocketChat#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([RocketChat#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([RocketChat#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([RocketChat#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions ([RocketChat#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([RocketChat#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([RocketChat#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([RocketChat#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([RocketChat#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects ([RocketChat#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 ([RocketChat#10893](https://github.com/RocketChat/Rocket.Chat/pull/10893))

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([RocketChat#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([RocketChat#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([RocketChat#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([RocketChat#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([RocketChat#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([RocketChat#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([RocketChat#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([RocketChat#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([RocketChat#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([RocketChat#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([RocketChat#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([RocketChat#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([RocketChat#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([RocketChat#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages ([RocketChat#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([RocketChat#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([RocketChat#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([RocketChat#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([RocketChat#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([RocketChat#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([RocketChat#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* [FIX] Not escaping special chars on mentions ([RocketChat#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([RocketChat#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([RocketChat#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([RocketChat#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([RocketChat#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Prevent setup wizard redirects ([RocketChat#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings ([RocketChat#10625](https://github.com/RocketChat/Rocket.Chat/pull/10625))

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` ([RocketChat#9733](https://github.com/RocketChat/Rocket.Chat/pull/9733))

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` ([RocketChat#9679](https://github.com/RocketChat/Rocket.Chat/pull/9679))

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [RocketChat#2](https://github.com/RocketChat/Rocket.Chat/pull/2)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [RocketChat#3](https://github.com/RocketChat/Rocket.Chat/issues/3)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms ([RocketChat#10564](https://github.com/RocketChat/Rocket.Chat/pull/10564))

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token ([RocketChat#10741](https://github.com/RocketChat/Rocket.Chat/pull/10741))

* [FIX] Fix rest /me endpoint ([RocketChat#10662](https://github.com/RocketChat/Rocket.Chat/pull/10662))

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread ([RocketChat#10778](https://github.com/RocketChat/Rocket.Chat/pull/10778))

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions ([RocketChat#10488](https://github.com/RocketChat/Rocket.Chat/pull/10488))

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion ([RocketChat#10702](https://github.com/RocketChat/Rocket.Chat/pull/10702))

* major dependencies update ([RocketChat#10661](https://github.com/RocketChat/Rocket.Chat/pull/10661))

* Remove old translations ([RocketChat#10448](https://github.com/RocketChat/Rocket.Chat/pull/10448))

* [FIX] disable/enable System Messages ([RocketChat#10704](https://github.com/RocketChat/Rocket.Chat/pull/10704))

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment ([RocketChat#10214](https://github.com/RocketChat/Rocket.Chat/pull/10214))

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling "Collapse Embedded Media by Default" hides replies, quotes ([RocketChat#10427](https://github.com/RocketChat/Rocket.Chat/pull/10427))

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments ([RocketChat#10608](https://github.com/RocketChat/Rocket.Chat/pull/10608))

[NEW] Lazy load image attachments

* Develop sync ([RocketChat#10815](https://github.com/RocketChat/Rocket.Chat/pull/10815))

* add redhat dockerfile to master ([RocketChat#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([RocketChat#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([RocketChat#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([RocketChat#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([RocketChat#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint ([RocketChat#10677](https://github.com/RocketChat/Rocket.Chat/pull/10677))

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. ([RocketChat#10612](https://github.com/RocketChat/Rocket.Chat/pull/10612))

* [NEW] Enable/disable Livechat registration form fields ([RocketChat#10584](https://github.com/RocketChat/Rocket.Chat/pull/10584))

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. ([RocketChat#10663](https://github.com/RocketChat/Rocket.Chat/pull/10663))

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy ([RocketChat#9857](https://github.com/RocketChat/Rocket.Chat/pull/9857))

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events ([RocketChat#10822](https://github.com/RocketChat/Rocket.Chat/pull/10822))

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html ([RocketChat#10715](https://github.com/RocketChat/Rocket.Chat/pull/10715))

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission ([RocketChat#10753](https://github.com/RocketChat/Rocket.Chat/pull/10753))

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using "Unread on Top" user preference ([RocketChat#10734](https://github.com/RocketChat/Rocket.Chat/pull/10734))

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression ([RocketChat#10833](https://github.com/RocketChat/Rocket.Chat/pull/10833))

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues ([RocketChat#10835](https://github.com/RocketChat/Rocket.Chat/pull/10835))

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist ([RocketChat#10837](https://github.com/RocketChat/Rocket.Chat/pull/10837))

* Fix: Regression on users avatar in admin pages ([RocketChat#10836](https://github.com/RocketChat/Rocket.Chat/pull/10836))

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template ([RocketChat#10520](https://github.com/RocketChat/Rocket.Chat/pull/10520))

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again ([RocketChat#10848](https://github.com/RocketChat/Rocket.Chat/pull/10848))

* Fix layout badge cutting on unread messages for long names ([RocketChat#10846](https://github.com/RocketChat/Rocket.Chat/pull/10846))

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint ([RocketChat#10840](https://github.com/RocketChat/Rocket.Chat/pull/10840))

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement ([RocketChat#10853](https://github.com/RocketChat/Rocket.Chat/pull/10853))

* Regression: Fix email notification preference not showing correct selected value ([RocketChat#10847](https://github.com/RocketChat/Rocket.Chat/pull/10847))

* Fix email notification preference not showing correct selected value

Closes [RocketChat#10844](https://github.com/RocketChat/Rocket.Chat/issues/10844)

* Save email notification preferences correctly

Closes [RocketChat#10787](https://github.com/RocketChat/Rocket.Chat/issues/10787)

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times ([RocketChat#10878](https://github.com/RocketChat/Rocket.Chat/pull/10878))

* Fixed a typo on error message for push token API ([RocketChat#10857](https://github.com/RocketChat/Rocket.Chat/pull/10857))

Fix: typo on error message for push token API

* Adds flex-box to preview commands ([RocketChat#10883](https://github.com/RocketChat/Rocket.Chat/pull/10883))

* Fix: Regression Lazyload fix shuffle avatars ([RocketChat#10887](https://github.com/RocketChat/Rocket.Chat/pull/10887))

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update 🚀 ([RocketChat#10886](https://github.com/RocketChat/Rocket.Chat/pull/10886))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [FIX] Manage apps layout ([RocketChat#10882](https://github.com/RocketChat/Rocket.Chat/pull/10882))

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge ([RocketChat#10875](https://github.com/RocketChat/Rocket.Chat/pull/10875))

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0
```

[janainaCoelhoRocketchat](/janainaCoelhoRocketchat)
pushed a commit
that referenced
this pull request
[Aug 18, 2023](#ref-commit-c23156c)
[![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=40&u=2bd6f2097cc1a347c982098e3619bf82af3e9e4d&v=4)](/rodrigok) [![@janainaCoelhoRocketchat](https://avatars.githubusercontent.com/u/105796517?s=40&v=4)](/janainaCoelhoRocketchat)

`[Develop sync2 (](/RocketChat/Rocket.Chat/commit/c23156c1113193fbdf21d5bc0eba135ad8bc6c6d "Develop sync2 (#10908)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0")[#10908](https://github.com/RocketChat/Rocket.Chat/pull/10908)[)](/RocketChat/Rocket.Chat/commit/c23156c1113193fbdf21d5bc0eba135ad8bc6c6d "Develop sync2 (#10908)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 (#10812)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 (#10893)

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel (#10665)

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation (#10674)

Correct links in README file

* Fix flickering on message-box emoji icon (#10678)

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script (#10524)

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting (#10445)

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments (#10705)

* [BREAK] Improvements to notifications logic (#10686)

[NEW] Improvements to notifications logic

* LingoHub Update :rocket: (#10691)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [NEW] Setup Wizard (#10523)

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings (#10724)

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles (#10607)

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content (#10733)

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage (#10720)

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic (#10736)

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages (#10760)

* Add setting and expose prometheus on port 9100 (#10766)

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements (#10776)

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications (#10779)

* Better metric for notifications (#10786)

* Improvement to push notifications on direct messages (#10788)

* Prometheus: Improve metric names (#10789)

* [FIX] Not escaping special chars on mentions (#10793)

* Regression: Fix wrong wizard field name (#10804)

* Prometheus: Fix notification metric (#10803)

* Regression: Autorun of wizard was not destroyed after completion (#10802)

* Prometheus: Add metric to track hooks time (#10798)

* Prevent setup wizard redirects (#10811)

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings (#10625)

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` (#9733)

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` (#9679)

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #2
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix #3
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms (#10564)

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token (#10741)

* [FIX] Fix rest /me endpoint (#10662)

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread (#10778)

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions (#10488)

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion (#10702)

* major dependencies update (#10661)

* Remove old translations (#10448)

* [FIX] disable/enable System Messages (#10704)

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment (#10214)

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling \"Collapse Embedded Media by Default\" hides replies, quotes (#10427)

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments (#10608)

[NEW] Lazy load image attachments

* Develop sync (#10815)

* add redhat dockerfile to master (#10408)

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 (#10476)

* [FIX] Even TypeErrors with SAML (#10475)

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list (#10218)

* [FIX] The 'channel.messages' REST API Endpoint error (#10485)

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint (#10677)

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. (#10612)

* [NEW] Enable/disable Livechat registration form fields (#10584)

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. (#10663)

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy (#9857)

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events (#10822)

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html (#10715)

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission (#10753)

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using \"Unread on Top\" user preference (#10734)

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression (#10833)

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues (#10835)

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist (#10837)

* Fix: Regression on users avatar in admin pages (#10836)

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template (#10520)

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again (#10848)

* Fix layout badge cutting on unread messages for long names (#10846)

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint (#10840)

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement (#10853)

* Regression: Fix email notification preference not showing correct selected value (#10847)

* Fix email notification preference not showing correct selected value

Closes #10844

* Save email notification preferences correctly

Closes #10787

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times (#10878)

* Fixed a typo on error message for push token API (#10857)

Fix: typo on error message for push token API

* Adds flex-box to preview commands (#10883)

* Fix: Regression Lazyload fix shuffle avatars (#10887)

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update :rocket: (#10886)

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with :heart: by https://lingohub.com

* [FIX] Manage apps layout (#10882)

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge (#10875)

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0")`
…

`[c23156c](/RocketChat/Rocket.Chat/commit/c23156c1113193fbdf21d5bc0eba135ad8bc6c6d)`

```
* add redhat dockerfile to master ([#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Release 0.64.2 ([#10812](https://github.com/RocketChat/Rocket.Chat/pull/10812))

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Bump version to 0.64.2-rc.0

* Fix notifications for direct messages ([#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* Bump version to 0.64.2-rc.1

* [FIX] Not escaping special chars on mentions ([#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Bump version to 0.64.2-rc.2

* Prevent setup wizard redirects ([#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Bump version to 0.64.2

* Bump version to 0.65.0-rc.0

* Bump version to 0.65.0-rc.1

* Bump version to 0.65.0-rc.2

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0

* Release 0.65.0 ([#10893](https://github.com/RocketChat/Rocket.Chat/pull/10893))

* changed saml integration to store data on mongo instead of memory

* Update saml_server.js

*  [FIX] Fix create channel, when created a readonly channel ([#10665](https://github.com/RocketChat/Rocket.Chat/pull/10665))

[FIX] Channel owner was being set as muted when creating a read-only channel

* Correct links to Rocket.Chat documentation ([#10674](https://github.com/RocketChat/Rocket.Chat/pull/10674))

Correct links in README file

* Fix flickering on message-box emoji icon ([#10678](https://github.com/RocketChat/Rocket.Chat/pull/10678))

[FIX] Message box emoji icon was flickering when typing a text

* add `npm run postinstall` into build script ([#10524](https://github.com/RocketChat/Rocket.Chat/pull/10524))

Add `npm run postinstall` into example build script

* [FIX] Improve desktop notification formatting ([#10445](https://github.com/RocketChat/Rocket.Chat/pull/10445))

* Improved notification formatting

* Fixed lint issues

* Changed body format

* Fixed the problem of missing descriptions on message attachments ([#10705](https://github.com/RocketChat/Rocket.Chat/pull/10705))

* [BREAK] Improvements to notifications logic ([#10686](https://github.com/RocketChat/Rocket.Chat/pull/10686))

[NEW] Improvements to notifications logic

* LingoHub Update 🚀 ([#10691](https://github.com/RocketChat/Rocket.Chat/pull/10691))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [NEW] Setup Wizard ([#10523](https://github.com/RocketChat/Rocket.Chat/pull/10523))

* welcome

* .

* stylelint

* new ilustration

* new layout

* .

* implements dicts

* added all setup wizard settings to wizard

* fix some setup wizard css

* fix setup wizard js linter errors

* remove old setup wizard templaates

* setup wizard has just one main tag now

* setup wizard registration fields filter is more readable

* add register server page to setup wizard

* fix setup wizard progress bar on RTL

* setup wizard is registering users

* Add setup wizard tests, routes and fix batch

* fix setup wizard tests

* add api test back

* comment rocketchat:google-natural-language package and remove logs

* add some translation keys for setup wizard

* remove old setup wizard template

* fix sort code on setup wizard

* fix getWizardSetting method

* new migration for setupwizard

* setup wizard setting migration

* fix setupwizard migration

* Update versions

* fix some setup wizard code logic

* fix setup wizard registerServer setting

* rever package-lock.json

* rever google-natural-language .npm folder

* rever meteor packages file and add setup wizard

* remove some default values from setup wizard settings

* add advocacy option on setup wizard industry setting

* change key name to setting to make the filter more readable on setup wizard

* change key name to setting to make the filter more readable on setup wizard

* add findWizardSettings on models Settings and handle errors of getWizardSettings method

* change setting to key to make the filter more readable on setup wizard

* fix setup wizard settings filter map

* remove serverHasAdminUser method on setup wizard

* fix setup wizard tests

* fix setup wizard final step workspace link

* fix setup wizard tests

* [FIX] Improve wordpress OAuth settings ([#10724](https://github.com/RocketChat/Rocket.Chat/pull/10724))

[NEW] Add more options for Wordpress OAuth configuration

* [NEW] Add /api/v1/channels.roles & /api/v1/groups.roles ([#10607](https://github.com/RocketChat/Rocket.Chat/pull/10607))

[NEW] Add REST endpoints `channels.roles` & `groups.roles`

* Changes source of text for announcement modal content ([#10733](https://github.com/RocketChat/Rocket.Chat/pull/10733))

[FIX] Regression: Empty content on announcement modal

* [FIX] Send a message when muted returns inconsistent result in chat.sendMessage ([#10720](https://github.com/RocketChat/Rocket.Chat/pull/10720))

* Change the message that returns, when a muted or blocked user tries to send a message using that endpoint

* Remove origin provide to sendMessage method, simply throwing an error when the user is muted or blocked

* More improvements on send notifications logic ([#10736](https://github.com/RocketChat/Rocket.Chat/pull/10736))

* Denormalize the User’s Highlights

* Find subscriptions for each type of notification

* Change email preference values

* General improvements

* Use just one query to get all subscriptions to notify

* Get hightlights from subscriptions on method notifyUsersOnMessage

* Keep compatibility of emailNotifications preference in subscription save

* Prevent group mentions on large rooms

* Fix notifications for direct messages ([#10760](https://github.com/RocketChat/Rocket.Chat/pull/10760))

* Add setting and expose prometheus on port 9100 ([#10766](https://github.com/RocketChat/Rocket.Chat/pull/10766))

* Add setting and expose prometheus on port 9100

* Prometheus: Add number of connected users

* Send statistics to prometheus

* Prometheus: Add methods, subscriptions and callbacks data

* Prometheus: Add metrics of REST API calls

* Prometheus: Record subscriptions time

* Add metrics to notifications

* Wizard improvements ([#10776](https://github.com/RocketChat/Rocket.Chat/pull/10776))

* Change wizard state from boolean to `pending`, `in_progress` or `completed`
* Add migration to change the wizard setting to new values and fix the old migration
* Make the wizard responsive for small screens
* Do not publish wizard settings to the client
* Do not show wizard for unlogged users after admin was created

* Add badge back to push notifications ([#10779](https://github.com/RocketChat/Rocket.Chat/pull/10779))

* Better metric for notifications ([#10786](https://github.com/RocketChat/Rocket.Chat/pull/10786))

* Improvement to push notifications on direct messages ([#10788](https://github.com/RocketChat/Rocket.Chat/pull/10788))

* Prometheus: Improve metric names ([#10789](https://github.com/RocketChat/Rocket.Chat/pull/10789))

* [FIX] Not escaping special chars on mentions ([#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793))

* Regression: Fix wrong wizard field name ([#10804](https://github.com/RocketChat/Rocket.Chat/pull/10804))

* Prometheus: Fix notification metric ([#10803](https://github.com/RocketChat/Rocket.Chat/pull/10803))

* Regression: Autorun of wizard was not destroyed after completion ([#10802](https://github.com/RocketChat/Rocket.Chat/pull/10802))

* Prometheus: Add metric to track hooks time ([#10798](https://github.com/RocketChat/Rocket.Chat/pull/10798))

* Prevent setup wizard redirects ([#10811](https://github.com/RocketChat/Rocket.Chat/pull/10811))

* Prevent setup wizard redirects

* Fix setup wizard layout

* Prometheus: Track user agent

* Stop caching private settings ([#10625](https://github.com/RocketChat/Rocket.Chat/pull/10625))

* [NEW] Add REST API endpoints `channels.setCustomFields` and `groups.setCustomFields` ([#9733](https://github.com/RocketChat/Rocket.Chat/pull/9733))

* Add channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Delete unused `user` parameter
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add tests for channels.setCustomFields and groups.setCustomFields
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix lint
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Propogate setCustomFields to Subscriptions
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix semicolon
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [NEW] Add REST API endpoints `channels.counters`, `groups.counters and `im.counters` ([#9679](https://github.com/RocketChat/Rocket.Chat/pull/9679))

* Add countVisibleByRoomIdBetweenTimestampsInclusive
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.counters, groups.counters, im.counters
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix spaces
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fixes
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [#2](https://github.com/RocketChat/Rocket.Chat/pull/2)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Small fix [#3](https://github.com/RocketChat/Rocket.Chat/issues/3)
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add channels.couters and groups.couters tests
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix tests, last message and unread message times
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix last message and unread message times for IM
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Add im.counters test
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* Fix for msgs=0
Signed-off-by: Eugene Bolshakov <pub@relvarsoft.com>

* [FIX] UI was not disabling the actions when users has had no permissions to create channels or add users to rooms ([#10564](https://github.com/RocketChat/Rocket.Chat/pull/10564))

* hide plus icon when user doesn't have both permission for create-c and create-p

* add helper to checkout two permissions set initial value for the room type

* hide the plus icon in directory if user doesn't have both create-c and creat-p permissions

* get permissions for create channels and groups

* check if user can add channel hide and groups, hide button based upon correct state

* prevent add user button from being hidden when user has permission add user to joined room

* removed the if statement and use short hand if else syntax

* better code for disabling checkbox in create room feature if user doesn't have permission

* add missing simicolon

* put canShowAddUsersButton into seperate function call function in events and helpers

* move the canShowAddUsersButton function to define before it's called

* fix bug that prevents the viewing of the keyboard shortcuts button in groups and direct messages

* fix permissions

* Add verification to authorize get images with X-user-id and X-auth-token ([#10741](https://github.com/RocketChat/Rocket.Chat/pull/10741))

* [FIX] Fix rest /me endpoint ([#10662](https://github.com/RocketChat/Rocket.Chat/pull/10662))

[NEW] REST API endpoint `/me` now returns all the settings, including the default values

* Add REST endpoint to mark messages as unread ([#10778](https://github.com/RocketChat/Rocket.Chat/pull/10778))

[NEW] Add REST endpoint `subscriptions.unread` to mark messages as unread

* [NEW] REST API endpoint `settings` now allow set colors and trigger actions ([#10488](https://github.com/RocketChat/Rocket.Chat/pull/10488))

* edited settings-api to execute button event

* FIx identation and defer await

* removing the defer and waiting for the method to execute

* Add Rest endpoint to get username suggestion ([#10702](https://github.com/RocketChat/Rocket.Chat/pull/10702))

* major dependencies update ([#10661](https://github.com/RocketChat/Rocket.Chat/pull/10661))

* Remove old translations ([#10448](https://github.com/RocketChat/Rocket.Chat/pull/10448))

* [FIX] disable/enable System Messages ([#10704](https://github.com/RocketChat/Rocket.Chat/pull/10704))

[FIX] Missing option to disable/enable System Messages

* [NEW] View pinned message's attachment ([#10214](https://github.com/RocketChat/Rocket.Chat/pull/10214))

* displays pinned file's attachments

* handles pin for replies and quotes

* fix review

* [FIX] Enabling "Collapse Embedded Media by Default" hides replies, quotes ([#10427](https://github.com/RocketChat/Rocket.Chat/pull/10427))

[FIX] Enabling `Collapse Embedded Media by Default` was hiding replies and quotes

* [NEW] lazy load image attachments ([#10608](https://github.com/RocketChat/Rocket.Chat/pull/10608))

[NEW] Lazy load image attachments

* Develop sync ([#10815](https://github.com/RocketChat/Rocket.Chat/pull/10815))

* add redhat dockerfile to master ([#10408](https://github.com/RocketChat/Rocket.Chat/pull/10408))

* add redhat dockerfile to master

* Add redhat dockerfile to set-version helper script

* Release 0.63.2 ([#10476](https://github.com/RocketChat/Rocket.Chat/pull/10476))

* [FIX] Even TypeErrors with SAML ([#10475](https://github.com/RocketChat/Rocket.Chat/pull/10475))

* Bump version to 0.63.2

* Added one2mail.info to default blocked domain list ([#10218](https://github.com/RocketChat/Rocket.Chat/pull/10218))

* [FIX] The 'channel.messages' REST API Endpoint error ([#10485](https://github.com/RocketChat/Rocket.Chat/pull/10485))

* Bump version to 0.63.3

* Add the history of v0.63.3

* Bump version to 0.64.0-rc.0

* Bump version to 0.64.0-rc.1

* Bump version to 0.64.0-rc.2

* Bump version to 0.64.0-rc.3

* Bump version to 0.64.0-rc.4

* Bump version to 0.64.0

* Bump version to 0.64.1

* Bump version to 0.65.0-develop

* [NEW] Return the result of the `/me` endpoint within the result of the `/login` endpoint ([#10677](https://github.com/RocketChat/Rocket.Chat/pull/10677))

* Add response of the /me endpoint to /login endpoint

* change underscore use to ES6 object destructuring

* The Livechat settings of the 'color' types  were not appearing correctly in the administrative area. ([#10612](https://github.com/RocketChat/Rocket.Chat/pull/10612))

* [NEW] Enable/disable Livechat registration form fields ([#10584](https://github.com/RocketChat/Rocket.Chat/pull/10584))

[NEW] Options to enable/disable each Livechat registration form field

* When a manager tried to send a message in a live room, an error was being displayed because there is no subscription for the manager. ([#10663](https://github.com/RocketChat/Rocket.Chat/pull/10663))

[FIX] Livechat managers were not being able to send messages in some cases

* [NEW] Implement a local password policy ([#9857](https://github.com/RocketChat/Rocket.Chat/pull/9857))

* Implement a local password policy

* Improve ValidatePasswordPolicy and create tests

* Validate user’s password on method saveUserProfile

* Fix typo PasswordPoliceClass

* Apps: Command Previews, Message and Room Removal Events ([#10822](https://github.com/RocketChat/Rocket.Chat/pull/10822))

* Add message and room removal events for Apps, fix a few other issues

* First very rough draft of the slash command preview

* Add the command preview rest api and make the previews selectable via the keyboard

* Add loading i18n

* Remove duplicated toLowerCase()

* Bump version to 0.65.0-rc.0

* Update room.html ([#10715](https://github.com/RocketChat/Rocket.Chat/pull/10715))

Fix working of cancel button in progress bar, while uploading file.

* [NEW] Add view-broadcast-member-list permission ([#10753](https://github.com/RocketChat/Rocket.Chat/pull/10753))

[NEW] Add permission `view-broadcast-member-list`

* [FIX] Livechat sidebar using "Unread on Top" user preference ([#10734](https://github.com/RocketChat/Rocket.Chat/pull/10734))

[FIX] User's preference `Unread on Top` wasn't working for LiveChat rooms

* Fix REST /me regression ([#10833](https://github.com/RocketChat/Rocket.Chat/pull/10833))

Fix: Regression in REST API endpoint `/me`

* [FIX] Broadcast/ Read only issues ([#10835](https://github.com/RocketChat/Rocket.Chat/pull/10835))

[FIX] Broadcast channels were showing reply button for deleted messages and generating wrong reply links some times

* Create temp folder if it doesn't exist ([#10837](https://github.com/RocketChat/Rocket.Chat/pull/10837))

* Fix: Regression on users avatar in admin pages ([#10836](https://github.com/RocketChat/Rocket.Chat/pull/10836))

* fix avatar admin lists

* Update messagePopup.js

* Bump version to 0.65.0-rc.1

* Fix: Clarify the wording of the release issue template ([#10520](https://github.com/RocketChat/Rocket.Chat/pull/10520))

* Clarify the wording of the release issue template

* Update release.md

* Regression: Make settings `Site_Name` and `Language` public again ([#10848](https://github.com/RocketChat/Rocket.Chat/pull/10848))

* Fix layout badge cutting on unread messages for long names ([#10846](https://github.com/RocketChat/Rocket.Chat/pull/10846))

[FIX] Layout badge cutting on unread messages for long names

* [FIX] Missing pagination fields in the response of REST /directory endpoint ([#10840](https://github.com/RocketChat/Rocket.Chat/pull/10840))

* Add missing pagination fields in the response of REST /directory endpoint

* Add support to choose sort field in REST directory

* Allow click on command previews and add setting to control apps enablement ([#10853](https://github.com/RocketChat/Rocket.Chat/pull/10853))

* Regression: Fix email notification preference not showing correct selected value ([#10847](https://github.com/RocketChat/Rocket.Chat/pull/10847))

* Fix email notification preference not showing correct selected value

Closes [#10844](https://github.com/RocketChat/Rocket.Chat/issues/10844)

* Save email notification preferences correctly

Closes [#10787](https://github.com/RocketChat/Rocket.Chat/issues/10787)

* Create room with user notification preferences

* Add back the uploaded file message on push notifications

* Bump version to 0.65.0-rc.2

* [FIX] The first users was not set as admin some times ([#10878](https://github.com/RocketChat/Rocket.Chat/pull/10878))

* Fixed a typo on error message for push token API ([#10857](https://github.com/RocketChat/Rocket.Chat/pull/10857))

Fix: typo on error message for push token API

* Adds flex-box to preview commands ([#10883](https://github.com/RocketChat/Rocket.Chat/pull/10883))

* Fix: Regression Lazyload fix shuffle avatars ([#10887](https://github.com/RocketChat/Rocket.Chat/pull/10887))

* fix avatar admin lists

* test to fix shuffle avatars

* LingoHub Update 🚀 ([#10886](https://github.com/RocketChat/Rocket.Chat/pull/10886))

Manual push by LingoHub User: Rodrigo Nascimento.
Project: Rocket.Chat

Made with ❤️ by <https://lingohub.com>

* [FIX] Manage apps layout ([#10882](https://github.com/RocketChat/Rocket.Chat/pull/10882))

Fix: Manage apps layout was a bit confuse

* Fixed slackbridge ([#10875](https://github.com/RocketChat/Rocket.Chat/pull/10875))

* Bump version to 0.65.0-rc.3

* Bump version to 0.65.0
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FRocketChat%2FRocket.Chat%2Fpull%2F10793)

Reviewers

[![@sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=40&v=4)](/sampaiodiego) [sampaiodiego](/sampaiodiego)

sampaiodiego approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

 [**0.64.2**](/RocketChat/Rocket.Chat/milestone/117 "0.64.2")

Development

Successfully merging this pull request may close these issues.

5 participants

[![@erhan-](https://avatars.githubusercontent.com/u/3534714?s=52&v=4)](/erhan-) [![@CLAassistant](https://avatars.githubusercontent.com/u/11571300?s=52&v=4)](/CLAassistant) [![@mtimofiiv](https://avatars.githubusercontent.com/u/428948?s=52&v=4)](/mtimofiiv) [![@rodrigok](https://avatars.githubusercontent.com/u/234261?s=52&v=4)](/rodrigok) [![@sampaiodiego](https://avatars.githubusercontent.com/u/8591547?s=52&v=4)](/sampaiodiego)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b2ebeeeb_20250126_062435.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-8f7m-2hjp-gccx)

**CVE-2018-13878**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-8f7m-2hjp-gccx)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [Unreviewed](/advisories?query=type%3Aunreviewed)
3. [CVE-2018-13878](/advisories/GHSA-8f7m-2hjp-gccx)

## An XSS issue was discovered in packages/rocketchat...

Moderate severity

Unreviewed

Published
May 14, 2022
to the GitHub Advisory Database
•
Updated Feb 2, 2023

## Package

No package listed—
[Suggest a package](/advisories/GHSA-8f7m-2hjp-gccx/improve)

## Affected versions

Unknown

## Patched versions

Unknown

## Description

An XSS issue was discovered in packages/rocketchat-mentions/Mentions.js in Rocket.Chat before 0.65. The real name of a username is displayed unescaped when the user is mentioned (using the @ symbol) in a channel or private chat. Consequently, it is possible to exfiltrate the secret token of every user and also admins in the channel.

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2018-13878>
* [RocketChat/Rocket.Chat#10793](https://github.com/RocketChat/Rocket.Chat/pull/10793)

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2018-13878)
Jul 11, 2018

Published to the GitHub Advisory Database
May 14, 2022

Last updated
Feb 2, 2023

### Severity

Moderate

6.1

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
Required

Scope
Changed

Confidentiality
Low

Integrity
Low

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N

### EPSS score

0.062%

# Exploit Prediction Scoring System (EPSS)

This score estimates the probability of this vulnerability being exploited within the next 30 days.
Data provided by [FIRST](https://www.first.org/epss/user-guide).

 (29th percentile)

### Weaknesses

[CWE-79](/advisories?query=cwe%3A79)

### CVE ID

CVE-2018-13878

### GHSA ID

GHSA-8f7m-2hjp-gccx

### Source code

No known source code

Dependabot alerts are not supported on this advisory because it does not have a package from a supported ecosystem with an affected and fixed version.

[Learn more about GitHub language support](https://docs.github.com/get-started/learning-about-github/github-language-support#about-supported-languages)

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-8f7m-2hjp-gccx/improve).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


