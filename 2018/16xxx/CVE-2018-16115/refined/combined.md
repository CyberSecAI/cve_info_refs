=== Content from doc.akka.io_952100c9_20250125_010734.html ===

[![](../images/akka-logo-white.svg)](https://akka.io)

Ask AI about Akka Libraries

Developers
### Docs

[SDK](https://doc.akka.io/java/index.html)
[Libraries](https://doc.akka.io/libraries/index.html)

### Resources

Ask AI
[Blog](https://www.akka.io/blog)
[Release Notes](https://doc.akka.io/reference/release-notes.html)
[Support](https://portal.akka.io)

### Architecture

[Principles](https://www.reactiveprinciples.org/)
[Free Training](https://akkademy.akka.io/learn/public/catalog/view/3)
[Certification](https://www.akka.io/certified-reactive-architect)

Libraries
### Libraries

[Actors](https://doc.akka.io/libraries/akka-core/current/typed/)
[HTTP](https://doc.akka.io/libraries/akka-http/current/)
[Streams](https://doc.akka.io/libraries/akka-core/current/stream/)
[Cluster](https://doc.akka.io/libraries/akka-core/current/typed/index-cluster.html)
[Event Sourcing](https://doc.akka.io/libraries/akka-core/current/typed/index-persistence.html)

###

[gRPC](https://doc.akka.io/libraries/akka-grpc/current)
[Projections](https://doc.akka.io/libraries/akka-projection/current/)
[Integrations](https://doc.akka.io/libraries/alpakka/current/)
[Observability](https://doc.akka.io/libraries/akka-insights/current/)

### Guides

[Libraries](https://doc.akka.io/libraries/guide/)
[Akka Edge](https://doc.akka.io/libraries/akka-edge/current/index.html)
### Versions

[Current Versions](https://doc.akka.io/libraries/akka-dependencies/current/)

[Contact Us](https://akka.io/contact-us)
[Sign In](https://console.akka.io/)
[Get Started](https://console.akka.io/register)

# [Akka Documentation](../index.html)

Version 2.10.0

ScalaJava
sbtMavenGradle

* [Security Announcements](../security/index.html)
  + [Receiving Security Advisories](../security/index.html#receiving-security-advisories)
  + [Reporting Vulnerabilities](../security/index.html#reporting-vulnerabilities)
  + [Security Related Documentation](../security/index.html#security-related-documentation)
  + [Fixed Security Vulnerabilities](../security/index.html#fixed-security-vulnerabilities)
  + [Java Serialization, Fixed in Akka 2.4.17](../security/2017-02-10-java-serialization.html)
  + [Camel Dependency, Fixed in Akka 2.5.4](../security/2017-08-09-camel.html)
  + [Broken random number generators AES128CounterSecureRNG / AES256CounterSecureRNG, Fixed in Akka 2.5.16](../security/2018-08-29-aes-rng.html#broken-random-number-generators-aes128countersecurerng-aes256countersecurerng-fixed-in-akka-2-5-16)
    - [CVE ID](../security/2018-08-29-aes-rng.html#cve-id)
    - [Date](../security/2018-08-29-aes-rng.html#date)
    - [Description of Vulnerability](../security/2018-08-29-aes-rng.html#description-of-vulnerability)
    - [Severity](../security/2018-08-29-aes-rng.html#severity)
    - [Affected Versions](../security/2018-08-29-aes-rng.html#affected-versions)
    - [Fixed Versions](../security/2018-08-29-aes-rng.html#fixed-versions)
    - [Acknowledgements](../security/2018-08-29-aes-rng.html#acknowledgements)
* [Getting Started Guide](../typed/guide/index.html)
* [General Concepts](../general/index.html)
* [Actors](../typed/index.html)
* [Cluster](../typed/index-cluster.html)
* [Persistence (Event Sourcing)](../typed/index-persistence.html)
* [Persistence (Durable State)](../typed/index-persistence-durable-state.html)
* [Streams](../stream/index.html)
* [Discovery](../discovery/index.html)
* [Utilities](../index-utilities.html)
* [Other Akka modules](../common/other-modules.html)
* [Package, Deploy and Run](../additional/deploy.html)
* [Project Information](../project/index.html)
* [Akka Classic](../index-classic.html)

[Akka Documentation](../index.html)

Version 2.10.0

ScalaJava
sbtMavenGradle

* [Security Announcements](../security/index.html)
  + [Receiving Security Advisories](../security/index.html#receiving-security-advisories)
  + [Reporting Vulnerabilities](../security/index.html#reporting-vulnerabilities)
  + [Security Related Documentation](../security/index.html#security-related-documentation)
  + [Fixed Security Vulnerabilities](../security/index.html#fixed-security-vulnerabilities)
  + [Java Serialization, Fixed in Akka 2.4.17](../security/2017-02-10-java-serialization.html)
  + [Camel Dependency, Fixed in Akka 2.5.4](../security/2017-08-09-camel.html)
  + [Broken random number generators AES128CounterSecureRNG / AES256CounterSecureRNG, Fixed in Akka 2.5.16](../security/2018-08-29-aes-rng.html#broken-random-number-generators-aes128countersecurerng-aes256countersecurerng-fixed-in-akka-2-5-16)
    - [CVE ID](../security/2018-08-29-aes-rng.html#cve-id)
    - [Date](../security/2018-08-29-aes-rng.html#date)
    - [Description of Vulnerability](../security/2018-08-29-aes-rng.html#description-of-vulnerability)
    - [Severity](../security/2018-08-29-aes-rng.html#severity)
    - [Affected Versions](../security/2018-08-29-aes-rng.html#affected-versions)
    - [Fixed Versions](../security/2018-08-29-aes-rng.html#fixed-versions)
    - [Acknowledgements](../security/2018-08-29-aes-rng.html#acknowledgements)
* [Getting Started Guide](../typed/guide/index.html)
* [General Concepts](../general/index.html)
* [Actors](../typed/index.html)
* [Cluster](../typed/index-cluster.html)
* [Persistence (Event Sourcing)](../typed/index-persistence.html)
* [Persistence (Durable State)](../typed/index-persistence-durable-state.html)
* [Streams](../stream/index.html)
* [Discovery](../discovery/index.html)
* [Utilities](../index-utilities.html)
* [Other Akka modules](../common/other-modules.html)
* [Package, Deploy and Run](../additional/deploy.html)
* [Project Information](../project/index.html)
* [Akka Classic](../index-classic.html)

# Broken random number generators AES128CounterSecureRNG / AES256CounterSecureRNG, Fixed in Akka 2.5.16

### CVE ID

CVE-2018-16115

### Date

29 August 2018

### Description of Vulnerability

A random number generator is used in Akka Remoting for TLS (both classic and Artery Remoting). Akka allows to configure custom random number generators. For historical reasons, Akka included the `AES128CounterSecureRNG` and `AES256CounterSecureRNG` random number generators. The implementations had a bug that caused the generated numbers to be repeated after only a few bytes.

The custom RNG implementations were not configured by default but examples in the documentation showed (and therefore implicitly recommended) using the custom ones.

This can be used by an attacker to compromise the communication if these random number generators are enabled in configuration. It would be possible to eavesdrop, replay or modify the messages sent with Akka Remoting/Cluster.

To protect against such attacks the system should be updated to Akka *2.5.16* or later, or the default configuration of the TLS random number generator should be used:

```
# Set `SecureRandom` RNG explicitly (but it is also the default)
akka.remote.classic.netty.ssl.random-number-generator = "SecureRandom"
akka.remote.artery.ssl.config-ssl-engine.random-number-generator = "SecureRandom"

```

Please subscribe to the [akka-security](https://groups.google.com/forum/#!forum/akka-security) mailing list to be notified promptly about future security issues.

### Severity

The [CVSS](https://en.wikipedia.org/wiki/CVSS) score of this vulnerability is 5.9 (Medium), based on vector [AV:A/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:N/E:U/RL:O/RC:C](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=AV:A/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:N/E:U/RL:O/RC:C).

Rationale for the score:

* AV:A - Best practice is that Akka remoting nodes should only be accessible from the adjacent network, so in good setups, this will be adjacent.
* AC:H - Any one in the adjacent network can launch the attack with non-special access privileges, but man-in-the-middle attacks are not trivial.
* C:H, I:H - Confidentiality and Integrity are only partially affected because only the networking component is affected and not the whole Akka cluster. Assessed to be High anyway because access to actor system data would probably be possible by injecting messages into the remoting communication.

### Affected Versions

* Akka *2.5.0 - 2.5.15* with any of the following configuration properties defined:

```
akka.remote.netty.ssl.random-number-generator = "AES128CounterSecureRNG"
akka.remote.netty.ssl.random-number-generator = "AES256CounterSecureRNG"
akka.remote.artery.ssl.config-ssl-engine.random-number-generator = "AES128CounterSecureRNG"
akka.remote.artery.ssl.config-ssl-engine.random-number-generator = "AES256CounterSecureRNG"

```

Akka *2.4.x* versions are not affected by this particular bug. It has reached end-of-life since start of 2018. If you still run on Akka 2.4, we still recommend to use the default `SecureRandom` implementation for the reasons given below. Please check your configuration files not to configure the custom RNGs.

### Fixed Versions

We have prepared patches for the affected versions, and have released the following version which resolve the issue:

* Akka *2.5.16* (Scala 2.11, 2.12)

Binary and source compatibility has been maintained for the patched releases so the upgrade procedure is as simple as changing the library dependency.

The exact historical reasons to include custom RNG implementations could not be reconstructed but it was likely because RNGs provided by previous versions of the JDK were deemed too slow.

Including custom cryptographic components in your library (or application) should not be done lightly. We acknowledge that we cannot prove that the custom RNGs that Akka provides or has been providing are generally correct or just correct enough for the purposes in Akka.

The reporter of this vulnerability, RafaÅ SumisÅawski, kindly provided us with fixes for the custom RNGs in Akka. However, as we cannot thoroughly verify the correctness of the algorithm we decided to remove custom RNGs from Akka.

If the “AES128CounterSecureRNG” and “AES256CounterSecureRNG” configuration values are still used with Akka 2.5.16 they will be ignored and the default `SecureRandom` is used and a warning is logged. This is to avoid accidental use of these unverified and possibly insecure implementations. The deprecated implementations are not recommended, but they can be enabled by using configuration values “DeprecatedAES128CounterSecureRNG” or “DeprecatedAES256CounterSecureRNG” during the transition period until they have been removed.

*Edit*: `DeprecatedAES128CounterSecureRNG` and `DeprecatedAES256CounterSecureRNG` have been removed since Akka 2.5.19.

### Acknowledgements

We would like to thank RafaÅ SumisÅawski at NetworkedAssets for bringing this issue to our attention and providing a patch.

 [Camel Dependency, Fixed in Akka 2.5.4](../security/2017-08-09-camel.html)

[Getting Started Guide](../typed/guide/index.html)

Found an error in this documentation? The source code for this page can be found [here](https://github.com/akka/akka/tree/v2.10.0/akka-docs/src/main/paradox/security/2018-08-29-aes-rng.md).
Please feel free to edit and contribute a pull request.

[![](../images/akka-logo-black.svg)](https://akka.io)
Akka is available under the [Business Source License 1.1](https://www.lightbend.com/akka/license).

© 2011-2024 [Lightbend, Inc.](https://www.lightbend.com) dba Akka All rights reserved. |
[Terms](https://www.lightbend.com/legal/terms) |
[Privacy Policy](https://www.lightbend.com/legal/privacy) |
[Cookie Listing](https://akka.io/cookie/) |
Cookie Settings


