=== Content from usn.ubuntu.com_dd86c6c4_20250125_191837.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3776-1: Linux kernel vulnerabilities

1 October 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2
* [linux-snapdragon](/security/cves?package=linux-snapdragon) - Linux kernel for Snapdragon processors

## Details

Jann Horn discovered that the vmacache subsystem did not properly handle

sequence number overflows, leading to a use-after-free vulnerability. A

local attacker could use this to cause a denial of service (system crash)

or execute arbitrary code. ([CVE-2018-17182](/security/CVE-2018-17182))

It was discovered that the paravirtualization implementation in the Linux

kernel did not properly handle some indirect calls, reducing the

effectiveness of Spectre v2 mitigations for paravirtual guests. A local

attacker could use this to expose sensitive information. ([CVE-2018-15594](/security/CVE-2018-15594))

It was discovered that microprocessors utilizing speculative execution and

prediction of return addresses via Return Stack Buffer (RSB) may allow

unauthorized memory reads via sidechannel attacks. An attacker could use

this to expose sensitive information. ([CVE-2018-15572](/security/CVE-2018-15572))

It was discovered that a NULL pointer dereference could be triggered in the

OCFS2 file system implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash).

([CVE-2017-18216](/security/CVE-2017-18216))

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that a stack-based buffer overflow existed in the iSCSI

target implementation of the Linux kernel. A remote attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14633](/security/CVE-2018-14633))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

It was discovered that a memory leak existed in the IRDA subsystem of the

Linux kernel. A local attacker could use this to cause a denial of service

(kernel memory exhaustion). ([CVE-2018-6554](/security/CVE-2018-6554))

It was discovered that a use-after-free vulnerability existed in the IRDA

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-6555](/security/CVE-2018-6555))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.4.0-1035-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.4.0-1035.41](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.4.0-1035.41)
* [linux-image-4.4.0-1069-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.4.0-1069.79](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.4.0-1069.79)
* [linux-image-4.4.0-1098-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.4.0-1098.106](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.4.0-1098.106)
* [linux-image-4.4.0-1102-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon)
  -
  [4.4.0-1102.107](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon/4.4.0-1102.107)
* [linux-image-4.4.0-137-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-137.163](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-137.163)
* [linux-image-4.4.0-137-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-137.163](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-137.163)
* [linux-image-4.4.0-137-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-137.163](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-137.163)
* [linux-image-4.4.0-137-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-137.163](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-137.163)
* [linux-image-4.4.0-137-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-137.163](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-137.163)
* [linux-image-4.4.0-137-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-137.163](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-137.163)
* [linux-image-4.4.0-137-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-137.163](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-137.163)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-18216](/security/CVE-2017-18216)
* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-14633](/security/CVE-2018-14633)
* [CVE-2018-15572](/security/CVE-2018-15572)
* [CVE-2018-15594](/security/CVE-2018-15594)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-17182](/security/CVE-2018-17182)
* [CVE-2018-6554](/security/CVE-2018-6554)
* [CVE-2018-6555](/security/CVE-2018-6555)

## Related notices

* [USN-3798-1](/security/notices/USN-3798-1)
* [USN-3798-2](/security/notices/USN-3798-2)
* [USN-3776-2](/security/notices/USN-3776-2)
* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3849-2](/security/notices/USN-3849-2)
* [USN-3849-1](/security/notices/USN-3849-1)
* [USN-3777-2](/security/notices/USN-3777-2)
* [USN-3777-1](/security/notices/USN-3777-1)
* [USN-3777-3](/security/notices/USN-3777-3)
* [USN-3779-1](/security/notices/USN-3779-1)
* [USN-3775-2](/security/notices/USN-3775-2)
* [USN-3775-1](/security/notices/USN-3775-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from github.com_e31c8989_20250125_191830.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff1e255d60ae66a9f672ff9a207ee6cd8e33d2679)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff1e255d60ae66a9f672ff9a207ee6cd8e33d2679)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

USB: yurex: fix out-of-bounds uaccess in read handler

[Browse files](/torvalds/linux/tree/f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)
Browse the repository at this point in the history

```
In general, accessing userspace memory beyond the length of the supplied
buffer in VFS read/write handlers can lead to both kernel memory corruption
(via kernel_read()/kernel_write(), which can e.g. be triggered via
sys_splice()) and privilege escalation inside userspace.

Fix it by using simple_read_from_buffer() instead of custom logic.

Fixes: [6bc235a](https://github.com/torvalds/linux/commit/6bc235a2e24a5ef677daee3fd4f74f6cd643e23c) ("USB: add driver for Meywa-Denki & Kayac YUREX")
Signed-off-by: Jann Horn <jannh@google.com>
Cc: stable <stable@vger.kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
```

* Loading branch information

[![@thejh](https://avatars.githubusercontent.com/u/499370?s=40&v=4)](/thejh) [![@gregkh](https://avatars.githubusercontent.com/u/14953?s=40&v=4)](/gregkh)

[thejh](/torvalds/linux/commits?author=thejh "View all commits by thejh")
authored and
[gregkh](/torvalds/linux/commits?author=gregkh "View all commits by gregkh")
committed
Jul 6, 2018

1 parent
[bba57ed](/torvalds/linux/commit/bba57eddadda936c94b5dccf73787cb9e159d0a5)

commit f1e255d

Showing
**1 changed file**
with
**6 additions**
and
**17 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

23 changes: 6 additions & 17 deletions

23
[drivers/usb/misc/yurex.c](#diff-31880427045af0a6579323e01b519c50b41b03e630a1273528945cde7bf79366 "drivers/usb/misc/yurex.c")

Show comments

[View file](/torvalds/linux/blob/f1e255d60ae66a9f672ff9a207ee6cd8e33d2679/drivers/usb/misc/yurex.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -396,35 +396,24 @@ static ssize\_t yurex\_read(struct file \*file, char \_\_user \*buffer, size\_t count, |
|  |  | loff\_t \*ppos) |
|  |  | { |
|  |  | struct usb\_yurex \*dev; |
|  |  | int retval = 0; |
|  |  | int bytes\_read = 0; |
|  |  | int len = 0; |
|  |  | char in\_buffer[20]; |
|  |  | unsigned long flags; |
|  |  |  |
|  |  | dev = file->private\_data; |
|  |  |  |
|  |  | mutex\_lock(&dev->io\_mutex); |
|  |  | if (!dev->interface) { /\* already disconnected \*/ |
|  |  | retval = -ENODEV; |
|  |  | goto exit; |
|  |  | mutex\_unlock(&dev->io\_mutex); |
|  |  | return -ENODEV; |
|  |  | } |
|  |  |  |
|  |  | spin\_lock\_irqsave(&dev->lock, flags); |
|  |  | bytes\_read = snprintf(in\_buffer, 20, "%lld\n", dev->bbu); |
|  |  | len = snprintf(in\_buffer, 20, "%lld\n", dev->bbu); |
|  |  | spin\_unlock\_irqrestore(&dev->lock, flags); |
|  |  |  |
|  |  | if (\*ppos < bytes\_read) { |
|  |  | if (copy\_to\_user(buffer, in\_buffer + \*ppos, bytes\_read - \*ppos)) |
|  |  | retval = -EFAULT; |
|  |  | else { |
|  |  | retval = bytes\_read - \*ppos; |
|  |  | \*ppos += bytes\_read; |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | exit: |
|  |  | mutex\_unlock(&dev->io\_mutex); |
|  |  | return retval; |
|  |  |  |
|  |  | return simple\_read\_from\_buffer(buffer, count, ppos, in\_buffer, len); |
|  |  | } |
|  |  |  |
|  |  | static ssize\_t yurex\_write(struct file \*file, const char \_\_user \*user\_buffer, |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `f1e255d`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff1e255d60ae66a9f672ff9a207ee6cd8e33d2679) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from usn.ubuntu.com_722823a4_20250125_191841.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3847-3: Linux kernel (Azure) vulnerabilities

20 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux-azure](/security/cves?package=linux-azure) - Linux kernel for Microsoft Azure Cloud systems

## Details

USN-3847-1 fixed vulnerabilities in the Linux kernel for Ubuntu 18.04

LTS. This update provides the corresponding updates for the Linux

kernel for Microsoft Azure Cloud systems for Ubuntu 14.04 LTS.

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that an integer overrun vulnerability existed in the

POSIX timers implementation in the Linux kernel. A local attacker could use

this to cause a denial of service. ([CVE-2018-12896](/security/CVE-2018-12896))

Noam Rathaus discovered that a use-after-free vulnerability existed in the

Infiniband implementation in the Linux kernel. An attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14734](/security/CVE-2018-14734))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

It was discovered that the BPF verifier in the Linux kernel did not

correctly compute numeric bounds in some situations. A local attacker could

use this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2018-18445](/security/CVE-2018-18445))

Kanda Motohiro discovered that writing extended attributes to an XFS file

system in the Linux kernel in certain situations could cause an error

condition to occur. A local attacker could use this to cause a denial of

service. ([CVE-2018-18690](/security/CVE-2018-18690))

It was discovered that an integer overflow vulnerability existed in the

CDROM driver of the Linux kernel. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-18710](/security/CVE-2018-18710))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-12896](/security/CVE-2018-12896)
* [CVE-2018-14734](/security/CVE-2018-14734)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-18445](/security/CVE-2018-18445)
* [CVE-2018-18690](/security/CVE-2018-18690)
* [CVE-2018-18710](/security/CVE-2018-18710)

## Related notices

* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3776-1](/security/notices/USN-3776-1)
* [USN-3776-2](/security/notices/USN-3776-2)
* [USN-3849-2](/security/notices/USN-3849-2)
* [USN-3849-1](/security/notices/USN-3849-1)
* [USN-3848-1](/security/notices/USN-3848-1)
* [USN-3848-2](/security/notices/USN-3848-2)
* [USN-3797-2](/security/notices/USN-3797-2)
* [USN-3797-1](/security/notices/USN-3797-1)
* [USN-3835-1](/security/notices/USN-3835-1)
* [USN-3832-1](/security/notices/USN-3832-1)
* [USN-3846-1](/security/notices/USN-3846-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_9f2b5a27_20250125_191840.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3847-2: Linux kernel (HWE) vulnerabilities

20 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux-aws-hwe](/security/cves?package=linux-aws-hwe) - Linux kernel for Amazon Web Services (AWS-HWE) systems
* [linux-azure](/security/cves?package=linux-azure) - Linux kernel for Microsoft Azure Cloud systems
* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-hwe](/security/cves?package=linux-hwe) - Linux hardware enablement (HWE) kernel

## Details

USN-3847-1 fixed vulnerabilities in the Linux kernel for Ubuntu 18.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 18.04 LTS for Ubuntu

16.04 LTS.

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that an integer overrun vulnerability existed in the

POSIX timers implementation in the Linux kernel. A local attacker could use

this to cause a denial of service. ([CVE-2018-12896](/security/CVE-2018-12896))

Noam Rathaus discovered that a use-after-free vulnerability existed in the

Infiniband implementation in the Linux kernel. An attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14734](/security/CVE-2018-14734))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

It was discovered that the BPF verifier in the Linux kernel did not

correctly compute numeric bounds in some situations. A local attacker could

use this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2018-18445](/security/CVE-2018-18445))

Kanda Motohiro discovered that writing extended attributes to an XFS file

system in the Linux kernel in certain situations could cause an error

condition to occur. A local attacker could use this to cause a denial of

service. ([CVE-2018-18690](/security/CVE-2018-18690))

It was discovered that an integer overflow vulnerability existed in the

CDROM driver of the Linux kernel. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-18710](/security/CVE-2018-18710))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.15.0-1031-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws-hwe)
  -
  [4.15.0-1031.33~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-aws-hwe/4.15.0-1031.33~16.04.1)
* [linux-image-4.15.0-43-generic](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.15.0-43.46~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.15.0-43.46~16.04.1)
* [linux-image-4.15.0-43-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.15.0-43.46~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.15.0-43.46~16.04.1)
* [linux-image-4.15.0-43-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.15.0-43.46~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.15.0-43.46~16.04.1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-12896](/security/CVE-2018-12896)
* [CVE-2018-14734](/security/CVE-2018-14734)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-18445](/security/CVE-2018-18445)
* [CVE-2018-18690](/security/CVE-2018-18690)
* [CVE-2018-18710](/security/CVE-2018-18710)

## Related notices

* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3776-1](/security/notices/USN-3776-1)
* [USN-3776-2](/security/notices/USN-3776-2)
* [USN-3849-2](/security/notices/USN-3849-2)
* [USN-3849-1](/security/notices/USN-3849-1)
* [USN-3848-1](/security/notices/USN-3848-1)
* [USN-3848-2](/security/notices/USN-3848-2)
* [USN-3797-2](/security/notices/USN-3797-2)
* [USN-3797-1](/security/notices/USN-3797-1)
* [USN-3835-1](/security/notices/USN-3835-1)
* [USN-3832-1](/security/notices/USN-3832-1)
* [USN-3846-1](/security/notices/USN-3846-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_c9329360_20250125_191839.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3847-1: Linux kernel vulnerabilities

20 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.04 ESM](/security/notices?release=bionic)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-azure](/security/cves?package=linux-azure) - Linux kernel for Microsoft Azure Cloud systems
* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-oem](/security/cves?package=linux-oem) - Linux kernel for OEM processors
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2

## Details

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that an integer overrun vulnerability existed in the

POSIX timers implementation in the Linux kernel. A local attacker could use

this to cause a denial of service. ([CVE-2018-12896](/security/CVE-2018-12896))

Noam Rathaus discovered that a use-after-free vulnerability existed in the

Infiniband implementation in the Linux kernel. An attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14734](/security/CVE-2018-14734))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

It was discovered that the BPF verifier in the Linux kernel did not

correctly compute numeric bounds in some situations. A local attacker could

use this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2018-18445](/security/CVE-2018-18445))

Kanda Motohiro discovered that writing extended attributes to an XFS file

system in the Linux kernel in certain situations could cause an error

condition to occur. A local attacker could use this to cause a denial of

service. ([CVE-2018-18690](/security/CVE-2018-18690))

It was discovered that an integer overflow vulnerability existed in the

CDROM driver of the Linux kernel. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-18710](/security/CVE-2018-18710))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.04

* [linux-image-4.15.0-1028-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.15.0-1028.28](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.15.0-1028.28)
* [linux-image-4.15.0-1030-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.15.0-1030.32](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.15.0-1030.32)
* [linux-image-4.15.0-1031-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.15.0-1031.33](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.15.0-1031.33)
* [linux-image-4.15.0-43-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-43.46](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-43.46)
* [linux-image-4.15.0-43-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-43.46](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-43.46)
* [linux-image-4.15.0-43-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-43.46](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-43.46)
* [linux-image-4.15.0-43-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-43.46](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-43.46)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-12896](/security/CVE-2018-12896)
* [CVE-2018-14734](/security/CVE-2018-14734)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-18445](/security/CVE-2018-18445)
* [CVE-2018-18690](/security/CVE-2018-18690)
* [CVE-2018-18710](/security/CVE-2018-18710)

## Related notices

* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3776-1](/security/notices/USN-3776-1)
* [USN-3776-2](/security/notices/USN-3776-2)
* [USN-3849-2](/security/notices/USN-3849-2)
* [USN-3849-1](/security/notices/USN-3849-1)
* [USN-3848-1](/security/notices/USN-3848-1)
* [USN-3848-2](/security/notices/USN-3848-2)
* [USN-3797-2](/security/notices/USN-3797-2)
* [USN-3797-1](/security/notices/USN-3797-1)
* [USN-3835-1](/security/notices/USN-3835-1)
* [USN-3832-1](/security/notices/USN-3832-1)
* [USN-3846-1](/security/notices/USN-3846-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.suse.com_40923039_20250125_191828.html ===


| Bugzilla – Bug 1106095 | VUL-1: CVE-2018-16276: kernel-source: Buffer overrun in yurex driver | Last modified: 2020-06-13 00:56:35 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1106095)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1106095**](show_bug.cgi?id=1106095)
(CVE-2018-16276)
- VUL-1: CVE-2018-16276: kernel-source: Buffer overrun in yurex driver

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-1: CVE-2018-16276: kernel-source: Buffer overrun in yurex driver

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | | Duplicates (1): | [CVE-2018-19270](show_bug.cgi?id=1115593 "RESOLVED DUPLICATE - VUL-0: CVE-2018-19270: kernel-source: USB: yurex: fix out-of-bounds uaccess in read handler")  ([view as bug list](buglist.cgi?bug_id=1115593)) | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-16276 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | SUSE Security Incidents | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Novell Products | | [Component:](describecomponents.cgi?product=SUSE Security Incidents "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Incidents ([show other bugs](buglist.cgi?component=Incidents&product=SUSE%20Security%20Incidents&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P4 - Low **Severity**: Normal | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Security Team bot | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | CVSSv3:SUSE:CVE-2018-16276:7.3:(AV:L... | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2018-08-27 12:31 UTC by Oliver Neukum | | --- | --- | | Modified: | 2020-06-13 00:56 UTC ([History](show_activity.cgi?id=1106095)) | | CC List: | 2 users (show)  meissner tiantao6 | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1106095) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1106095&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1106095&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1106095#c0)  Oliver Neukum   2018-08-27 12:31:39 UTC  ``` The stable series has this fix:  commit f1e255d60ae66a9f672ff9a207ee6cd8e33d2679 Author: Jann Horn <jannh@google.com> Date:   Fri Jul 6 17:12:56 2018 +0200      USB: yurex: fix out-of-bounds uaccess in read handler          In general, accessing userspace memory beyond the length of the supplied     buffer in VFS read/write handlers can lead to both kernel memory corruption     (via kernel_read()/kernel_write(), which can e.g. be triggered via     sys_splice()) and privilege escalation inside userspace.          Fix it by using simple_read_from_buffer() instead of custom logic.  It looks like kernel memory is accessible in a minor way. Kernels up to SLE12SP4 compile that driver. ``` [Comment 1](show_bug.cgi?id=1106095#c1)  Marcus Meissner   2018-08-27 14:42:51 UTC  ``` down to 2.6.37 ``` [Comment 2](show_bug.cgi?id=1106095#c2)  Marcus Meissner   2018-08-31 13:47:40 UTC  ``` cve requested ``` [Comment 3](show_bug.cgi?id=1106095#c3)  Marcus Meissner   2018-08-31 14:25:32 UTC  ``` CVE-2018-16276 ``` [Comment 12](show_bug.cgi?id=1106095#c12)  Swamp Workflow Management   2018-09-27 19:21:22 UTC  ``` SUSE-SU-2018:2908-1: An update that solves 19 vulnerabilities and has 19 fixes is now available.  Category: security (important) Bug References: 1012382,1024788,1062604,1064233,1065999,1090534,1090955,1091171,1092903,1096547,1097104,1097108,1099811,1099813,1099844,1099845,1099846,1099849,1099863,1099864,1099922,1100001,1102870,1103445,1104319,1104495,1104818,1104906,1105100,1105322,1105323,1105396,1106095,1106369,1106509,1106511,1107689,1108912 CVE References: CVE-2018-10853,CVE-2018-10876,CVE-2018-10877,CVE-2018-10878,CVE-2018-10879,CVE-2018-10880,CVE-2018-10881,CVE-2018-10882,CVE-2018-10883,CVE-2018-10902,CVE-2018-10940,CVE-2018-12896,CVE-2018-13093,CVE-2018-14617,CVE-2018-14634,CVE-2018-16276,CVE-2018-16658,CVE-2018-6554,CVE-2018-6555 Sources used: SUSE Linux Enterprise Server 12-SP1-LTSS (src):    kernel-default-3.12.74-60.64.104.1, kernel-source-3.12.74-60.64.104.1, kernel-syms-3.12.74-60.64.104.1, kernel-xen-3.12.74-60.64.104.1 SUSE Linux Enterprise Module for Public Cloud 12 (src):    kernel-ec2-3.12.74-60.64.104.1 ``` [Comment 17](show_bug.cgi?id=1106095#c17)  Swamp Workflow Management   2018-10-03 08:34:30 UTC  ``` This is an autogenerated message for OBS integration: This bug (1106095) was mentioned in <https://build.opensuse.org/request/show/639718> 42.3 / kernel-source ``` [Comment 18](show_bug.cgi?id=1106095#c18)  Swamp Workflow Management   2018-10-04 16:14:44 UTC  ``` SUSE-SU-2018:3003-1: An update that solves 7 vulnerabilities and has 40 fixes is now available.  Category: security (important) Bug References: 1012382,1044189,1063026,1066223,1082863,1082979,1084427,1084536,1087209,1088087,1090535,1091815,1094244,1094555,1094562,1095344,1095753,1096547,1099810,1102495,1102715,1102870,1102875,1102877,1102879,1102882,1102896,1103156,1103269,1106095,1106434,1106512,1106594,1106934,1107924,1108096,1108170,1108240,1108399,1108803,1108823,1109333,1109336,1109337,1109441,1110297,1110337 CVE References: CVE-2018-14613,CVE-2018-14617,CVE-2018-16276,CVE-2018-16597,CVE-2018-17182,CVE-2018-7480,CVE-2018-7757 Sources used: SUSE Linux Enterprise Workstation Extension 12-SP3 (src):    kernel-default-4.4.156-94.57.1 SUSE Linux Enterprise Software Development Kit 12-SP3 (src):    kernel-docs-4.4.156-94.57.1, kernel-obs-build-4.4.156-94.57.1 SUSE Linux Enterprise Server 12-SP3 (src):    kernel-default-4.4.156-94.57.1, kernel-source-4.4.156-94.57.1, kernel-syms-4.4.156-94.57.1 SUSE Linux Enterprise High Availability 12-SP3 (src):    kernel-default-4.4.156-94.57.1 SUSE Linux Enterprise Desktop 12-SP3 (src):    kernel-default-4.4.156-94.57.1, kernel-source-4.4.156-94.57.1, kernel-syms-4.4.156-94.57.1 SUSE CaaS Platform ALL (src):    kernel-default-4.4.156-94.57.1 SUSE CaaS Platform 3.0 (src):    kernel-default-4.4.156-94.57.1 ``` [Comment 19](show_bug.cgi?id=1106095#c19)  Swamp Workflow Management   2018-10-04 16:23:05 UTC  ``` SUSE-SU-2018:3004-1: An update that solves 7 vulnerabilities and has 40 fixes is now available.  Category: security (important) Bug References: 1012382,1044189,1063026,1066223,1082863,1082979,1084427,1084536,1087209,1088087,1090535,1091815,1094244,1094555,1094562,1095344,1095753,1096547,1099810,1102495,1102715,1102870,1102875,1102877,1102879,1102882,1102896,1103156,1103269,1106095,1106434,1106512,1106594,1106934,1107924,1108096,1108170,1108240,1108399,1108803,1108823,1109333,1109336,1109337,1109441,1110297,1110337 CVE References: CVE-2018-14613,CVE-2018-14617,CVE-2018-16276,CVE-2018-16597,CVE-2018-17182,CVE-2018-7480,CVE-2018-7757 Sources used: SUSE Linux Enterprise Live Patching 12-SP3 (src):    kgraft-patch-SLE12-SP3_Update_18-1-4.3.5 ``` [Comment 20](show_bug.cgi?id=1106095#c20)  Swamp Workflow Management   2018-10-09 16:13:37 UTC  ``` SUSE-SU-2018:3083-1: An update that solves 20 vulnerabilities and has 13 fixes is now available.  Category: security (important) Bug References: 1012382,1062604,1064232,1065999,1092903,1093215,1096547,1097104,1099811,1099813,1099844,1099845,1099846,1099849,1099863,1099864,1099922,1100001,1100089,1102870,1103445,1104319,1104495,1104906,1105322,1105412,1106095,1106369,1106509,1106511,1107689,1108399,1108912 CVE References: CVE-2018-10853,CVE-2018-10876,CVE-2018-10877,CVE-2018-10878,CVE-2018-10879,CVE-2018-10880,CVE-2018-10881,CVE-2018-10882,CVE-2018-10883,CVE-2018-10902,CVE-2018-10940,CVE-2018-12896,CVE-2018-13093,CVE-2018-14617,CVE-2018-14634,CVE-2018-16276,CVE-2018-16658,CVE-2018-17182,CVE-2018-6554,CVE-2018-6555 Sources used: SUSE Linux Enterprise Server 12-LTSS (src):    kernel-default-3.12.61-52.146.1, kernel-source-3.12.61-52.146.1, kernel-syms-3.12.61-52.146.1, kernel-xen-3.12.61-52.146.1, kgraft-patch-SLE12_Update_38-1-1.5.1 SUSE Linux Enterprise Module for Public Cloud 12 (src):    kernel-ec2-3.12.61-52.146.1 ``` [Comment 21](show_bug.cgi?id=1106095#c21)  Swamp Workflow Management   2018-10-09 16:23:17 UTC  ``` SUSE-SU-2018:3084-1: An update that solves 28 vulnerabilities and has 28 fixes is now available.  Category: security (important) Bug References: 1012382,1042286,1062604,1064232,1065364,1082519,1082863,1084536,1085042,1088810,1089066,1092903,1094466,1095344,1096547,1097104,1099597,1099811,1099813,1099844,1099845,1099846,1099849,1099863,1099864,1099922,1099993,1099999,1100000,1100001,1100152,1102517,1102715,1102870,1103445,1104319,1104495,1105292,1105296,1105322,1105348,1105396,1105536,1106016,1106095,1106369,1106509,1106511,1106512,1106594,1107689,1107735,1107966,1108239,1108399,1109333 CVE References: CVE-2018-10853,CVE-2018-10876,CVE-2018-10877,CVE-2018-10878,CVE-2018-10879,CVE-2018-10880,CVE-2018-10881,CVE-2018-10882,CVE-2018-10883,CVE-2018-10902,CVE-2018-10938,CVE-2018-10940,CVE-2018-12896,CVE-2018-13093,CVE-2018-13094,CVE-2018-13095,CVE-2018-14617,CVE-2018-14678,CVE-2018-15572,CVE-2018-15594,CVE-2018-16276,CVE-2018-16658,CVE-2018-17182,CVE-2018-6554,CVE-2018-6555,CVE-2018-7480,CVE-2018-7757,CVE-2018-9363 Sources used: SUSE OpenStack Cloud 7 (src):    kernel-default-4.4.121-92.95.1, kernel-source-4.4.121-92.95.1, kernel-syms-4.4.121-92.95.1, kgraft-patch-SLE12-SP2_Update_25-1-3.4.1, lttng-modules-2.7.1-9.6.1 SUSE Linux Enterprise Server for SAP 12-SP2 (src):    kernel-default-4.4.121-92.95.1, kernel-source-4.4.121-92.95.1, kernel-syms-4.4.121-92.95.1, kgraft-patch-SLE12-SP2_Update_25-1-3.4.1, lttng-modules-2.7.1-9.6.1 SUSE Linux Enterprise Server 12-SP2-LTSS (src):    kernel-default-4.4.121-92.95.1, kernel-source-4.4.121-92.95.1, kernel-syms-4.4.121-92.95.1, kgraft-patch-SLE12-SP2_Update_25-1-3.4.1, lttng-modules-2.7.1-9.6.1 SUSE Linux Enterprise Server 12-SP2-BCL (src):    kernel-default-4.4.121-92.95.1, kernel-source-4.4.121-92.95.1, kernel-syms-4.4.121-92.95.1, lttng-modules-2.7.1-9.6.1 SUSE Linux Enterprise High Availability 12-SP2 (src):    kernel-default-4.4.121-92.95.1 SUSE Enterprise Storage 4 (src):    kernel-default-4.4.121-92.95.1, kernel-source-4.4.121-92.95.1, kernel-syms-4.4.121-92.95.1, kgraft-patch-SLE12-SP2_Update_25-1-3.4.1, lttng-modules-2.7.1-9.6.1 OpenStack Cloud Magnum Orchestration 7 (src):    kernel-default-4.4.121-92.95.1 ``` [Comment 22](show_bug.cgi?id=1106095#c22)  Swamp Workflow Management   2018-10-09 16:32:35 UTC  ``` SUSE-SU-2018:3088-1: An update that solves 12 vulnerabilities and has 43 fixes is now available.  Category: security (important) Bug References: 1045538,1048185,1050381,1050431,1057199,1060245,1064861,1068032,1080157,1087081,1092772,1092903,1093666,1096547,1098822,1099922,1100132,1100705,1102517,1102870,1103119,1104481,1104684,1104818,1104901,1105100,1105322,1105348,1105536,1105723,1106095,1106105,1106199,1106202,1106206,1106209,1106212,1106369,1106509,1106511,1106609,1106886,1106930,1106995,1107001,1107064,1107071,1107650,1107689,1107735,1107949,1108096,1108170,1108823,1108912 CVE References: CVE-2018-10902,CVE-2018-10940,CVE-2018-12896,CVE-2018-14617,CVE-2018-14634,CVE-2018-14734,CVE-2018-15572,CVE-2018-15594,CVE-2018-16276,CVE-2018-16658,CVE-2018-6554,CVE-2018-6555 Sources used: SUSE Linux Enterprise Real Time Extension 11-SP4 (src):    kernel-rt-3.0.101.rt130-69.36.1, kernel-rt_trace-3.0.101.rt130-69.36.1, kernel-source-rt-3.0.101.rt130-69.36.1, kernel-syms-rt-3.0.101.rt130-69.36.1 SUSE Linux Enterprise Debuginfo 11-SP4 (src):    kernel-rt-3.0.101.rt130-69.36.1, kernel-rt_debug-3.0.101.rt130-69.36.1, kernel-rt_trace-3.0.101.rt130-69.36.1 ``` [Comment 23](show_bug.cgi?id=1106095#c23)  Swamp Workflow Management   2018-10-11 08:45:01 UTC  ``` This is an autogenerated message for OBS integration: This bug (1106095) was mentioned in <https://build.opensuse.org/request/show/641142> 42.3 / kernel-source ``` [Comment 25](show_bug.cgi?id=1106095#c25)  Swamp Workflow Management   2018-10-17 19:16:12 UTC  ``` openSUSE-SU-2018:3202-1: An update that solves 13 vulnerabilities and has 74 fixes is now available.  Category: security (important) Bug References: 1012382,1044189,1050549,1063026,1065600,1066223,1082519,1082863,1082979,1084427,1084536,1088087,1089343,1090535,1094244,1094555,1094562,1095344,1095753,1096052,1096547,1099597,1099810,1100056,1100059,1100060,1100061,1100062,1102495,1102715,1102870,1102875,1102877,1102879,1102882,1102896,1103156,1103269,1103308,1103405,1105428,1105795,1106095,1106105,1106240,1106293,1106434,1106512,1106594,1106934,1107318,1107829,1107924,1108096,1108170,1108240,1108315,1108399,1108803,1108823,1109333,1109336,1109337,1109441,1109806,1110006,1110297,1110337,1110363,1110468,1110600,1110601,1110602,1110603,1110604,1110605,1110606,1110611,1110612,1110613,1110614,1110615,1110616,1110618,1110619,1110930,1111363 CVE References: CVE-2018-13096,CVE-2018-13097,CVE-2018-13098,CVE-2018-13099,CVE-2018-13100,CVE-2018-14613,CVE-2018-14617,CVE-2018-14633,CVE-2018-16276,CVE-2018-16597,CVE-2018-17182,CVE-2018-7480,CVE-2018-7757 Sources used: openSUSE Leap 42.3 (src):    kernel-debug-4.4.159-73.1, kernel-default-4.4.159-73.1, kernel-docs-4.4.159-73.2, kernel-obs-build-4.4.159-73.1, kernel-obs-qa-4.4.159-73.1, kernel-source-4.4.159-73.1, kernel-syms-4.4.159-73.1, kernel-vanilla-4.4.159-73.1 ``` [Comment 29](show_bug.cgi?id=1106095#c29)  Swamp Workflow Management   2018-11-05 17:09:26 UTC  ``` SUSE-SU-2018:3618-1: An update that solves four vulnerabilities and has 5 fixes is now available.  Category: security (important) Bug References: 1099922,1102870,1106095,1107829,1108227,1109967,1110247,1113337,905299 CVE References: CVE-2018-12896,CVE-2018-14617,CVE-2018-14633,CVE-2018-16276 Sources used: SUSE Linux Enterprise Server 11-SP3-LTSS (src):    kernel-bigsmp-3.0.101-0.47.106.56.1, kernel-default-3.0.101-0.47.106.56.1, kernel-ec2-3.0.101-0.47.106.56.1, kernel-pae-3.0.101-0.47.106.56.1, kernel-source-3.0.101-0.47.106.56.1, kernel-syms-3.0.101-0.47.106.56.1, kernel-trace-3.0.101-0.47.106.56.1, kernel-xen-3.0.101-0.47.106.56.1 SUSE Linux Enterprise Server 11-EXTRA (src):    kernel-bigsmp-3.0.101-0.47.106.56.1, kernel-default-3.0.101-0.47.106.56.1, kernel-pae-3.0.101-0.47.106.56.1, kernel-ppc64-3.0.101-0.47.106.56.1, kernel-trace-3.0.101-0.47.106.56.1, kernel-xen-3.0.101-0.47.106.56.1 SUSE Linux Enterprise Point of Sale 11-SP3 (src):    kernel-default-3.0.101-0.47.106.56.1, kernel-ec2-3.0.101-0.47.106.56.1, kernel-pae-3.0.101-0.47.106.56.1, kernel-source-3.0.101-0.47.106.56.1, kernel-syms-3.0.101-0.47.106.56.1, kernel-trace-3.0.101-0.47.106.56.1, kernel-xen-3.0.101-0.47.106.56.1 SUSE Linux Enterprise Debuginfo 11-SP3 (src):    kernel-bigsmp-3.0.101-0.47.106.56.1, kernel-default-3.0.101-0.47.106.56.1, kernel-ec2-3.0.101-0.47.106.56.1, kernel-pae-3.0.101-0.47.106.56.1, kernel-trace-3.0.101-0.47.106.56.1, kernel-xen-3.0.101-0.47.106.56.1 ``` [Comment 31](show_bug.cgi?id=1106095#c31)  Swamp Workflow Management   2018-11-07 20:36:07 UTC  ``` SUSE-SU-2018:3659-1: An update that solves 10 vulnerabilities and has 104 fixes is now available.  Category: security (important) Bug References: 1012382,1042422,1044189,1050431,1050549,1053043,1063026,1065600,1065726,1066223,1067906,1079524,1082519,1082863,1082979,1084427,1084536,1084760,1088087,1089343,1090535,1091158,1094244,1094555,1094562,1094825,1095344,1095753,1095805,1096052,1096547,1099597,1099810,1101555,1102495,1102715,1102870,1102875,1102877,1102879,1102882,1102896,1103156,1103269,1103308,1103405,1105428,1105795,1105931,1106095,1106105,1106110,1106240,1106293,1106359,1106434,1106512,1106594,1106913,1106929,1106934,1107060,1107299,1107318,1107535,1107829,1107924,1108096,1108170,1108240,1108315,1108377,1108399,1108498,1108803,1108823,1109158,1109333,1109336,1109337,1109441,1109784,1109806,1109818,1109907,1109919,1109923,1110006,1110297,1110337,1110363,1110468,1110600,1110601,1110602,1110603,1110604,1110605,1110606,1110611,1110612,1110613,1110614,1110615,1110616,1110618,1110619,1110930,1111363,1111516,1111870,1112007,1112262,1112263 CVE References: CVE-2018-14613,CVE-2018-14617,CVE-2018-14633,CVE-2018-16276,CVE-2018-16597,CVE-2018-17182,CVE-2018-18386,CVE-2018-7480,CVE-2018-7757,CVE-2018-9516 Sources used: SUSE Linux Enterprise Real Time Extension 12-SP3 (src):    kernel-rt-4.4.162-3.26.1, kernel-rt_debug-4.4.162-3.26.1, kernel-source-rt-4.4.162-3.26.1, kernel-syms-rt-4.4.162-3.26.1 ``` [Comment 32](show_bug.cgi?id=1106095#c32)  Marcus Meissner   2018-11-14 14:10:37 UTC  ``` *** [Bug 1115593](show_bug.cgi?id=1115593 "RESOLVED DUPLICATE - VUL-0: CVE-2018-19270: kernel-source: USB: yurex: fix out-of-bounds uaccess in read handler") has been marked as a duplicate of this bug. *** ``` [Comment 35](show_bug.cgi?id=1106095#c35)  Swamp Workflow Management   2019-01-16 07:26:19 UTC  ``` SUSE-SU-2019:0095-1: An update that solves 13 vulnerabilities and has 140 fixes is now available.  Category: security (important) Bug References: 1011920,1012382,1012422,1020645,1031392,1035053,1042422,1043591,1044189,1048129,1050431,1050549,1053043,1054239,1057199,1062303,1063026,1065600,1065726,1066223,1067906,1073579,1076393,1078788,1079524,1082519,1082863,1082979,1083215,1083527,1084427,1084536,1084760,1087209,1088087,1089343,1090535,1091158,1093118,1094244,1094555,1094562,1094825,1095344,1095753,1095805,1096052,1096547,1098050,1098996,1099597,1099810,1101555,1102495,1102715,1102870,1102875,1102877,1102879,1102882,1102896,1103156,1103269,1103308,1103405,1104124,1105025,1105428,1105795,1105931,1106095,1106105,1106110,1106240,1106293,1106359,1106434,1106512,1106594,1106913,1106929,1106934,1107060,1107299,1107318,1107535,1107829,1107870,1107924,1108096,1108170,1108240,1108281,1108315,1108377,1108399,1108498,1108803,1108823,1109038,1109158,1109333,1109336,1109337,1109441,1109772,1109784,1109806,1109818,1109907,1109919,1109923,1110006,1110297,1110337,1110363,1110468,1110600,1110601,1110602,1110603,1110604,1110605,1110606,1110611,1110612,1110613,1110614,1110615,1110616,1110618,1110619,1110930,1111363,1111516,1111870,1112007,1112262,1112263,1112894,1112902,1112903,1112905,1113667,1113751,1113766,1113769,1114178,1114229,1114648,1115593,981083,997172 CVE References: CVE-2018-14613,CVE-2018-14617,CVE-2018-14633,CVE-2018-16276,CVE-2018-16597,CVE-2018-17182,CVE-2018-18281,CVE-2018-18386,CVE-2018-18690,CVE-2018-18710,CVE-2018-7480,CVE-2018-7757,CVE-2018-9516 Sources used: SUSE Linux Enterprise Server 12-SP3 (src):    kernel-azure-4.4.162-4.19.2, kernel-source-azure-4.4.162-4.19.1, kernel-syms-azure-4.4.162-4.19.1 ``` [Comment 36](show_bug.cgi?id=1106095#c36)  Marcus Meissner   2019-03-18 15:39:27 UTC  ``` done ``` [Comment 37](show_bug.cgi?id=1106095#c37)  Swamp Workflow Management   2019-04-27 22:24:04 UTC  ``` SUSE-SU-2018:2908-2: An update that solves 19 vulnerabilities and has 19 fixes is now available.  Category: security (important) Bug References: 1012382,1024788,1062604,1064233,1065999,1090534,1090955,1091171,1092903,1096547,1097104,1097108,1099811,1099813,1099844,1099845,1099846,1099849,1099863,1099864,1099922,1100001,1102870,1103445,1104319,1104495,1104818,1104906,1105100,1105322,1105323,1105396,1106095,1106369,1106509,1106511,1107689,1108912 CVE References: CVE-2018-10853,CVE-2018-10876,CVE-2018-10877,CVE-2018-10878,CVE-2018-10879,CVE-2018-10880,CVE-2018-10881,CVE-2018-10882,CVE-2018-10883,CVE-2018-10902,CVE-2018-10940,CVE-2018-12896,CVE-2018-13093,CVE-2018-14617,CVE-2018-14634,CVE-2018-16276,CVE-2018-16658,CVE-2018-6554,CVE-2018-6555 Sources used: SUSE Linux Enterprise Server for SAP 12-SP1 (src):    kernel-default-3.12.74-60.64.104.1, kernel-source-3.12.74-60.64.104.1, kernel-syms-3.12.74-60.64.104.1, kernel-xen-3.12.74-60.64.104.1, kgraft-patch-SLE12-SP1_Update_31-1-2.5.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1106095)
* - [XML](show_bug.cgi?ctype=xml&id=1106095)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1106095)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1106095)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from usn.ubuntu.com_476cdb1b_20250125_191838.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3776-2: Linux kernel (Xenial HWE) vulnerabilities

1 October 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-lts-xenial](/security/cves?package=linux-lts-xenial) - Linux hardware enablement kernel from Xenial for Trusty

## Details

USN-3776-1 fixed vulnerabilities in the Linux kernel for Ubuntu 16.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 16.04 LTS for Ubuntu

14.04 LTS.

Jann Horn discovered that the vmacache subsystem did not properly handle

sequence number overflows, leading to a use-after-free vulnerability. A

local attacker could use this to cause a denial of service (system crash)

or execute arbitrary code. ([CVE-2018-17182](/security/CVE-2018-17182))

It was discovered that the paravirtualization implementation in the Linux

kernel did not properly handle some indirect calls, reducing the

effectiveness of Spectre v2 mitigations for paravirtual guests. A local

attacker could use this to expose sensitive information. ([CVE-2018-15594](/security/CVE-2018-15594))

It was discovered that microprocessors utilizing speculative execution and

prediction of return addresses via Return Stack Buffer (RSB) may allow

unauthorized memory reads via sidechannel attacks. An attacker could use

this to expose sensitive information. ([CVE-2018-15572](/security/CVE-2018-15572))

It was discovered that a NULL pointer dereference could be triggered in the

OCFS2 file system implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash).

([CVE-2017-18216](/security/CVE-2017-18216))

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that a stack-based buffer overflow existed in the iSCSI

target implementation of the Linux kernel. A remote attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14633](/security/CVE-2018-14633))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

It was discovered that a memory leak existed in the IRDA subsystem of the

Linux kernel. A local attacker could use this to cause a denial of service

(kernel memory exhaustion). ([CVE-2018-6554](/security/CVE-2018-6554))

It was discovered that a use-after-free vulnerability existed in the IRDA

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-6555](/security/CVE-2018-6555))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-4.4.0-1031-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.4.0-1031.34](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.4.0-1031.34)
* [linux-image-4.4.0-137-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-137.163~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-137.163~14.04.1)
* [linux-image-4.4.0-137-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-137.163~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-137.163~14.04.1)
* [linux-image-4.4.0-137-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-137.163~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-137.163~14.04.1)
* [linux-image-4.4.0-137-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-137.163~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-137.163~14.04.1)
* [linux-image-4.4.0-137-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-137.163~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-137.163~14.04.1)
* [linux-image-4.4.0-137-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-137.163~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-137.163~14.04.1)
* [linux-image-4.4.0-137-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-137.163~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-137.163~14.04.1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-18216](/security/CVE-2017-18216)
* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-14633](/security/CVE-2018-14633)
* [CVE-2018-15572](/security/CVE-2018-15572)
* [CVE-2018-15594](/security/CVE-2018-15594)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-17182](/security/CVE-2018-17182)
* [CVE-2018-6554](/security/CVE-2018-6554)
* [CVE-2018-6555](/security/CVE-2018-6555)

## Related notices

* [USN-3798-1](/security/notices/USN-3798-1)
* [USN-3798-2](/security/notices/USN-3798-2)
* [USN-3776-1](/security/notices/USN-3776-1)
* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3849-2](/security/notices/USN-3849-2)
* [USN-3849-1](/security/notices/USN-3849-1)
* [USN-3777-2](/security/notices/USN-3777-2)
* [USN-3777-1](/security/notices/USN-3777-1)
* [USN-3777-3](/security/notices/USN-3777-3)
* [USN-3779-1](/security/notices/USN-3779-1)
* [USN-3775-2](/security/notices/USN-3775-2)
* [USN-3775-1](/security/notices/USN-3775-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from lists.debian.org_7465b10a_20250125_191835.html ===


---

[[Date Prev](msg00002.html)][[Date Next](msg00004.html)]
[[Thread Prev](msg00002.html)][[Thread Next](msg00004.html)]
[[Date Index](maillist.html#00003)]
[[Thread Index](threads.html#00003)]

# [SECURITY] [DLA 1531-1] linux-4.9 security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 1531-1] linux-4.9 security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Thu, 04 Oct 2018 00:59:07 +0100
* *Message-id*: <[[🔎]](/msgid-search/3929c7ecee3539dc25918194262f94025406d324.camel%40debian.org) [3929c7ecee3539dc25918194262f94025406d324.camel@debian.org](msg00003.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
Package        : linux-4.9
Version        : 4.9.110-3+deb9u5~deb8u1
CVE ID         : CVE-2018-6554 CVE-2018-6555 CVE-2018-7755 CVE-2018-9363
                 CVE-2018-9516 CVE-2018-10902 CVE-2018-10938 CVE-2018-13099
                 CVE-2018-14609 CVE-2018-14617 CVE-2018-14633 CVE-2018-14678
                 CVE-2018-14734 CVE-2018-15572 CVE-2018-15594 CVE-2018-16276
                 CVE-2018-16658 CVE-2018-17182

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2018-6554

    A memory leak in the irda_bind function in the irda subsystem was
    discovered. A local user can take advantage of this flaw to cause a
    denial of service (memory consumption).

CVE-2018-6555

    A flaw was discovered in the irda_setsockopt function in the irda
    subsystem, allowing a local user to cause a denial of service
    (use-after-free and system crash).

CVE-2018-7755

    Brian Belleville discovered a flaw in the fd_locked_ioctl function
    in the floppy driver in the Linux kernel. The floppy driver copies a
    kernel pointer to user memory in response to the FDGETPRM ioctl. A
    local user with access to a floppy drive device can take advantage
    of this flaw to discover the location kernel code and data.

CVE-2018-9363

    It was discovered that the Bluetooth HIDP implementation did not
    correctly check the length of received report messages. A paired
    HIDP device could use this to cause a buffer overflow, leading to
    denial of service (memory corruption or crash) or potentially
    remote code execution.

CVE-2018-9516

    It was discovered that the HID events interface in debugfs did not
    correctly limit the length of copies to user buffers.  A local
    user with access to these files could use this to cause a
    denial of service (memory corruption or crash) or possibly for
    privilege escalation.  However, by default debugfs is only
    accessible by the root user.

CVE-2018-10902

    It was discovered that the rawmidi kernel driver does not protect
    against concurrent access which leads to a double-realloc (double
    free) flaw. A local attacker can take advantage of this issue for
    privilege escalation.

CVE-2018-10938

    Yves Younan from Cisco reported that the Cipso IPv4 module did not
    correctly check the length of IPv4 options. On custom kernels with
    CONFIG_NETLABEL enabled, a remote attacker could use this to cause
    a denial of service (hang).

CVE-2018-13099

    Wen Xu from SSLab at Gatech reported a use-after-free bug in the
    F2FS implementation. An attacker able to mount a crafted F2FS
    volume could use this to cause a denial of service (crash or
    memory corruption) or possibly for privilege escalation.

CVE-2018-14609

    Wen Xu from SSLab at Gatech reported a potential null pointer
    dereference in the F2FS implementation. An attacker able to mount
    arbitrary F2FS volumes could use this to cause a denial of service
    (crash).

CVE-2018-14617

    Wen Xu from SSLab at Gatech reported a potential null pointer
    dereference in the HFS+ implementation. An attacker able to mount
    arbitrary HFS+ volumes could use this to cause a denial of service
    (crash).

CVE-2018-14633

    Vincent Pelletier discovered a stack-based buffer overflow flaw in
    the chap_server_compute_md5() function in the iSCSI target code. An
    unauthenticated remote attacker can take advantage of this flaw to
    cause a denial of service or possibly to get a non-authorized access
    to data exported by an iSCSI target.

CVE-2018-14678

    M. Vefa Bicakci and Andy Lutomirski discovered a flaw in the
    kernel exit code used on amd64 systems running as Xen PV guests.
    A local user could use this to cause a denial of service (crash).

CVE-2018-14734

    A use-after-free bug was discovered in the InfiniBand
    communication manager. A local user could use this to cause a
    denial of service (crash or memory corruption) or possible for
    privilege escalation.

CVE-2018-15572

    Esmaiel Mohammadian Koruyeh, Khaled Khasawneh, Chengyu Song, and
    Nael Abu-Ghazaleh, from University of California, Riverside,
    reported a variant of Spectre variant 2, dubbed SpectreRSB. A
    local user may be able to use this to read sensitive information
    from processes owned by other users.

CVE-2018-15594

    Nadav Amit reported that some indirect function calls used in
    paravirtualised guests were vulnerable to Spectre variant 2.  A
    local user may be able to use this to read sensitive information
    from the kernel.

CVE-2018-16276

    Jann Horn discovered that the yurex driver did not correctly limit
    the length of copies to user buffers.  A local user with access to
    a yurex device node could use this to cause a denial of service
    (memory corruption or crash) or possibly for privilege escalation.

CVE-2018-16658

    It was discovered that the cdrom driver does not correctly
    validate the parameter to the CDROM_DRIVE_STATUS ioctl.  A user
    with access to a cdrom device could use this to read sensitive
    information from the kernel or to cause a denial of service
    (crash).

CVE-2018-17182

    Jann Horn discovered that the vmacache_flush_all function mishandles
    sequence number overflows. A local user can take advantage of this
    flaw to trigger a use-after-free, causing a denial of service
    (crash or memory corruption) or privilege escalation.

For Debian 8 "Jessie", these problems have been fixed in version
4.9.110-3+deb9u5~deb8u1.

We recommend that you upgrade your linux-4.9 packages.

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

--
Ben Hutchings - Debian developer, member of kernel, installer and LTS teams

```

**Attachment:
[signature.asc](pgpSeMJI6bslh.pgp)**

*Description:* This is a digitally signed message part

---



=== Content from usn.ubuntu.com_cc5001b0_20250125_191845.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3849-2: Linux kernel (Trusty HWE) vulnerabilities

20 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-lts-trusty](/security/cves?package=linux-lts-trusty) - Linux hardware enablement kernel from Trusty for Precise ESM

## Details

USN-3849-1 fixed vulnerabilities in the Linux kernel for Ubuntu 14.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 14.04 LTS for Ubuntu

12.04 ESM.

It was discovered that a NULL pointer dereference existed in the keyring

subsystem of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash). ([CVE-2017-2647](/security/CVE-2017-2647))

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that an integer overrun vulnerability existed in the

POSIX timers implementation in the Linux kernel. A local attacker could use

this to cause a denial of service. ([CVE-2018-12896](/security/CVE-2018-12896))

Noam Rathaus discovered that a use-after-free vulnerability existed in the

Infiniband implementation in the Linux kernel. An attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14734](/security/CVE-2018-14734))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

Tetsuo Handa discovered a logic error in the TTY subsystem of the Linux

kernel. A local attacker with access to pseudo terminal devices could use

this to cause a denial of service. ([CVE-2018-18386](/security/CVE-2018-18386))

Kanda Motohiro discovered that writing extended attributes to an XFS file

system in the Linux kernel in certain situations could cause an error

condition to occur. A local attacker could use this to cause a denial of

service. ([CVE-2018-18690](/security/CVE-2018-18690))

It was discovered that an integer overflow vulnerability existed in the

CDROM driver of the Linux kernel. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-18710](/security/CVE-2018-18710))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.13.0-164-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0-164.214~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-164.214~precise1)
* [linux-image-generic-lpae-lts-trusty](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0.164.154](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-164.214~precise1)
* [linux-image-3.13.0-164-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0-164.214~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-164.214~precise1)
* [linux-image-generic-lts-trusty](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0.164.154](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-164.214~precise1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-2647](/security/CVE-2017-2647)
* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-12896](/security/CVE-2018-12896)
* [CVE-2018-14734](/security/CVE-2018-14734)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-18386](/security/CVE-2018-18386)
* [CVE-2018-18690](/security/CVE-2018-18690)
* [CVE-2018-18710](/security/CVE-2018-18710)

## Related notices

* [USN-3849-1](/security/notices/USN-3849-1)
* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3776-1](/security/notices/USN-3776-1)
* [USN-3776-2](/security/notices/USN-3776-2)
* [USN-3848-1](/security/notices/USN-3848-1)
* [USN-3848-2](/security/notices/USN-3848-2)
* [USN-3797-2](/security/notices/USN-3797-2)
* [USN-3797-1](/security/notices/USN-3797-1)
* [USN-3846-1](/security/notices/USN-3846-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.suse.com_6fd0dcd3_20250125_191828.html ===


| Bugzilla – Bug 1115593 | VUL-0: CVE-2018-19270: kernel-source: USB: yurex: fix out-of-bounds uaccess in read handler | Last modified: 2020-08-28 08:56:53 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1115593)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1115593**](show_bug.cgi?id=1115593)
(CVE-2018-19270)
- VUL-0: CVE-2018-19270: kernel-source: USB: yurex: fix out-of-bounds uaccess in read handler

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: CVE-2018-19270: kernel-source: USB: yurex: fix out-of-bounds uaccess i...

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED DUPLICATE of [bug 1106095](show_bug.cgi?id=1106095 "RESOLVED FIXED - VUL-1: CVE-2018-16276: kernel-source: Buffer overrun in yurex driver") | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-19270 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | SUSE Security Incidents | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Novell Products | | [Component:](describecomponents.cgi?product=SUSE Security Incidents "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Incidents ([show other bugs](buglist.cgi?component=Incidents&product=SUSE%20Security%20Incidents&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | aarch64 SLES 15 | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P2 - High **Severity**: Normal | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Oliver Neukum | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | CVSSv3:SUSE:CVE-2018-19270:7.0:(AV:L/... | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2018-11-12 09:16 UTC by tian tao | | --- | --- | | Modified: | 2020-08-28 08:56 UTC ([History](show_activity.cgi?id=1115593)) | | CC List: | 6 users (show)  astieger forgotten\_xZTvm0khif hui.zhi.zhao jcheung kai.liu meissner | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1115593) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1115593&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1115593&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1115593#c0)  tian tao   2018-11-12 09:16:41 UTC  ``` The following patch fixed the out-of-bounds problem of the usb driver,which has been received by the main line.  commit f1e255d60ae66a9f672ff9a207ee6cd8e33d2679 Author: Jann Horn <jannh@google.com> Date:   Fri Jul 6 17:12:56 2018 +0200      USB: yurex: fix out-of-bounds uaccess in read handler      In general, accessing userspace memory beyond the length of the supplied     buffer in VFS read/write handlers can lead to both kernel memory corruption     (via kernel_read()/kernel_write(), which can e.g. be triggered via     sys_splice()) and privilege escalation inside userspace.      Fix it by using simple_read_from_buffer() instead of custom logic. ``` [Comment 2](show_bug.cgi?id=1115593#c2)  Marcus Meissner   2018-11-14 08:03:41 UTC  ```     Fixes: 6bc235a2e24a ("USB: add driver for Meywa-Denki & Kayac YUREX") ``` [Comment 3](show_bug.cgi?id=1115593#c3)  Marcus Meissner   2018-11-14 08:04:38 UTC  ``` so 2.6.37 and later is affected, 4.18 and later are fixed. ``` [Comment 4](show_bug.cgi?id=1115593#c4)  Marcus Meissner   2018-11-14 08:12:22 UTC  ``` cve requested from Mitre. ``` [Comment 5](show_bug.cgi?id=1115593#c5)  Marcus Meissner   2018-11-14 08:15:49 UTC  ``` in 4.4.141 stable kernel:  patches.kernel.org/4.4.141-008-USB-yurex-fix-out-of-bounds-uaccess-in-read-h.patch  sle15 branch has: patches.fixes/0001-USB-yurex-fix-out-of-bounds-uaccess-in-read-handler.patch so fixed there already with an earlier update. ``` [Comment 6](show_bug.cgi?id=1115593#c6)  Marcus Meissner   2018-11-14 09:27:19 UTC  ``` patches.fixes/usb-yurex-fix-out-of-bounds-uaccess-in-read-handler.patch  in sles12 sp2 ltss, also already released ``` [Comment 8](show_bug.cgi?id=1115593#c8)  Marcus Meissner   2018-11-14 14:10:36 UTC  ``` sigh ... on review I see that this is a duplicate of [bug 1106095](show_bug.cgi?id=1106095 "RESOLVED FIXED - VUL-1: CVE-2018-16276: kernel-source: Buffer overrun in yurex driver")  *** This bug has been marked as a duplicate of [bug 1106095](show_bug.cgi?id=1106095 "RESOLVED FIXED - VUL-1: CVE-2018-16276: kernel-source: Buffer overrun in yurex driver") *** ``` [Comment 9](show_bug.cgi?id=1115593#c9)  Swamp Workflow Management   2019-01-16 08:06:31 UTC  ``` SUSE-SU-2019:0095-1: An update that solves 13 vulnerabilities and has 140 fixes is now available.  Category: security (important) Bug References: 1011920,1012382,1012422,1020645,1031392,1035053,1042422,1043591,1044189,1048129,1050431,1050549,1053043,1054239,1057199,1062303,1063026,1065600,1065726,1066223,1067906,1073579,1076393,1078788,1079524,1082519,1082863,1082979,1083215,1083527,1084427,1084536,1084760,1087209,1088087,1089343,1090535,1091158,1093118,1094244,1094555,1094562,1094825,1095344,1095753,1095805,1096052,1096547,1098050,1098996,1099597,1099810,1101555,1102495,1102715,1102870,1102875,1102877,1102879,1102882,1102896,1103156,1103269,1103308,1103405,1104124,1105025,1105428,1105795,1105931,1106095,1106105,1106110,1106240,1106293,1106359,1106434,1106512,1106594,1106913,1106929,1106934,1107060,1107299,1107318,1107535,1107829,1107870,1107924,1108096,1108170,1108240,1108281,1108315,1108377,1108399,1108498,1108803,1108823,1109038,1109158,1109333,1109336,1109337,1109441,1109772,1109784,1109806,1109818,1109907,1109919,1109923,1110006,1110297,1110337,1110363,1110468,1110600,1110601,1110602,1110603,1110604,1110605,1110606,1110611,1110612,1110613,1110614,1110615,1110616,1110618,1110619,1110930,1111363,1111516,1111870,1112007,1112262,1112263,1112894,1112902,1112903,1112905,1113667,1113751,1113766,1113769,1114178,1114229,1114648,1115593,981083,997172 CVE References: CVE-2018-14613,CVE-2018-14617,CVE-2018-14633,CVE-2018-16276,CVE-2018-16597,CVE-2018-17182,CVE-2018-18281,CVE-2018-18386,CVE-2018-18690,CVE-2018-18710,CVE-2018-7480,CVE-2018-7757,CVE-2018-9516 Sources used: SUSE Linux Enterprise Server 12-SP3 (src):    kernel-azure-4.4.162-4.19.2, kernel-source-azure-4.4.162-4.19.1, kernel-syms-azure-4.4.162-4.19.1 ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1115593)
* - [XML](show_bug.cgi?ctype=xml&id=1115593)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1115593)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1115593)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from usn.ubuntu.com_a83f0c1b_20250125_191844.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3849-1: Linux kernel vulnerabilities

20 December 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

It was discovered that a NULL pointer dereference existed in the keyring

subsystem of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash). ([CVE-2017-2647](/security/CVE-2017-2647))

It was discovered that a race condition existed in the raw MIDI driver for

the Linux kernel, leading to a double free vulnerability. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10902](/security/CVE-2018-10902))

It was discovered that an integer overrun vulnerability existed in the

POSIX timers implementation in the Linux kernel. A local attacker could use

this to cause a denial of service. ([CVE-2018-12896](/security/CVE-2018-12896))

Noam Rathaus discovered that a use-after-free vulnerability existed in the

Infiniband implementation in the Linux kernel. An attacker could use this

to cause a denial of service (system crash). ([CVE-2018-14734](/security/CVE-2018-14734))

It was discovered that the YUREX USB device driver for the Linux kernel did

not properly restrict user space reads or writes. A physically proximate

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-16276](/security/CVE-2018-16276))

Tetsuo Handa discovered a logic error in the TTY subsystem of the Linux

kernel. A local attacker with access to pseudo terminal devices could use

this to cause a denial of service. ([CVE-2018-18386](/security/CVE-2018-18386))

Kanda Motohiro discovered that writing extended attributes to an XFS file

system in the Linux kernel in certain situations could cause an error

condition to occur. A local attacker could use this to cause a denial of

service. ([CVE-2018-18690](/security/CVE-2018-18690))

It was discovered that an integer overflow vulnerability existed in the

CDROM driver of the Linux kernel. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-18710](/security/CVE-2018-18710))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-3.13.0-164-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc-e500](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)
* [linux-image-3.13.0-164-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-164.214](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-164.214)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-2647](/security/CVE-2017-2647)
* [CVE-2018-10902](/security/CVE-2018-10902)
* [CVE-2018-12896](/security/CVE-2018-12896)
* [CVE-2018-14734](/security/CVE-2018-14734)
* [CVE-2018-16276](/security/CVE-2018-16276)
* [CVE-2018-18386](/security/CVE-2018-18386)
* [CVE-2018-18690](/security/CVE-2018-18690)
* [CVE-2018-18710](/security/CVE-2018-18710)

## Related notices

* [USN-3849-2](/security/notices/USN-3849-2)
* [USN-3847-2](/security/notices/USN-3847-2)
* [USN-3847-3](/security/notices/USN-3847-3)
* [USN-3847-1](/security/notices/USN-3847-1)
* [USN-3776-1](/security/notices/USN-3776-1)
* [USN-3776-2](/security/notices/USN-3776-2)
* [USN-3848-1](/security/notices/USN-3848-1)
* [USN-3848-2](/security/notices/USN-3848-2)
* [USN-3797-2](/security/notices/USN-3797-2)
* [USN-3797-1](/security/notices/USN-3797-1)
* [USN-3846-1](/security/notices/USN-3846-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.debian.org_02181cd7_20250125_191846.html ===


---

[[Date Prev](msg00238.html)][[Date Next](msg00240.html)]
[[Thread Prev](msg00238.html)][[Thread Next](msg00240.html)]
[[Date Index](maillist.html#00239)]
[[Thread Index](threads.html#00239)]

# [SECURITY] [DSA 4308-1] linux security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 4308-1] linux security update
* *From*: Salvatore Bonaccorso <carnil@debian.org>
* *Date*: Mon, 01 Oct 2018 15:21:20 +0000
* *Message-id*: <[[🔎]](/msgid-search/E1g700e-0001qs-4j%40seger.debian.org) [E1g700e-0001qs-4j@seger.debian.org](msg00239.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-4308-1                   security@debian.org
<https://www.debian.org/security/>                     Salvatore Bonaccorso
October 01, 2018                      <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : linux
CVE ID         : CVE-2018-6554 CVE-2018-6555 CVE-2018-7755 CVE-2018-9363
                 CVE-2018-9516 CVE-2018-10902 CVE-2018-10938 CVE-2018-13099
                 CVE-2018-14609 CVE-2018-14617 CVE-2018-14633 CVE-2018-14678
                 CVE-2018-14734 CVE-2018-15572 CVE-2018-15594 CVE-2018-16276
                 CVE-2018-16658 CVE-2018-17182

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2018-6554

    A memory leak in the irda_bind function in the irda subsystem was
    discovered. A local user can take advantage of this flaw to cause a
    denial of service (memory consumption).

CVE-2018-6555

    A flaw was discovered in the irda_setsockopt function in the irda
    subsystem, allowing a local user to cause a denial of service
    (use-after-free and system crash).

CVE-2018-7755

    Brian Belleville discovered a flaw in the fd_locked_ioctl function
    in the floppy driver in the Linux kernel. The floppy driver copies a
    kernel pointer to user memory in response to the FDGETPRM ioctl. A
    local user with access to a floppy drive device can take advantage
    of this flaw to discover the location kernel code and data.

CVE-2018-9363

    It was discovered that the Bluetooth HIDP implementation did not
    correctly check the length of received report messages. A paired
    HIDP device could use this to cause a buffer overflow, leading to
    denial of service (memory corruption or crash) or potentially
    remote code execution.

CVE-2018-9516

    It was discovered that the HID events interface in debugfs did not
    correctly limit the length of copies to user buffers.  A local
    user with access to these files could use this to cause a
    denial of service (memory corruption or crash) or possibly for
    privilege escalation.  However, by default debugfs is only
    accessible by the root user.

CVE-2018-10902

    It was discovered that the rawmidi kernel driver does not protect
    against concurrent access which leads to a double-realloc (double
    free) flaw. A local attacker can take advantage of this issue for
    privilege escalation.

CVE-2018-10938

    Yves Younan from Cisco reported that the Cipso IPv4 module did not
    correctly check the length of IPv4 options. On custom kernels with
    CONFIG_NETLABEL enabled, a remote attacker could use this to cause
    a denial of service (hang).

CVE-2018-13099

    Wen Xu from SSLab at Gatech reported a use-after-free bug in the
    F2FS implementation. An attacker able to mount a crafted F2FS
    volume could use this to cause a denial of service (crash or
    memory corruption) or possibly for privilege escalation.

CVE-2018-14609

    Wen Xu from SSLab at Gatech reported a potential null pointer
    dereference in the F2FS implementation. An attacker able to mount
    a crafted F2FS volume could use this to cause a denial of service
    (crash).

CVE-2018-14617

    Wen Xu from SSLab at Gatech reported a potential null pointer
    dereference in the HFS+ implementation. An attacker able to mount
    a crafted HFS+ volume could use this to cause a denial of service
    (crash).

CVE-2018-14633

    Vincent Pelletier discovered a stack-based buffer overflow flaw in
    the chap_server_compute_md5() function in the iSCSI target code. An
    unauthenticated remote attacker can take advantage of this flaw to
    cause a denial of service or possibly to get a non-authorized access
    to data exported by an iSCSI target.

CVE-2018-14678

    M. Vefa Bicakci and Andy Lutomirski discovered a flaw in the
    kernel exit code used on amd64 systems running as Xen PV guests.
    A local user could use this to cause a denial of service (crash).

CVE-2018-14734

    A use-after-free bug was discovered in the InfiniBand
    communication manager. A local user could use this to cause a
    denial of service (crash or memory corruption) or possible for
    privilege escalation.

CVE-2018-15572

    Esmaiel Mohammadian Koruyeh, Khaled Khasawneh, Chengyu Song, and
    Nael Abu-Ghazaleh, from University of California, Riverside,
    reported a variant of Spectre variant 2, dubbed SpectreRSB. A
    local user may be able to use this to read sensitive information
    from processes owned by other users.

CVE-2018-15594

    Nadav Amit reported that some indirect function calls used in
    paravirtualised guests were vulnerable to Spectre variant 2.  A
    local user may be able to use this to read sensitive information
    from the kernel.

CVE-2018-16276

    Jann Horn discovered that the yurex driver did not correctly limit
    the length of copies to user buffers.  A local user with access to
    a yurex device node could use this to cause a denial of service
    (memory corruption or crash) or possibly for privilege escalation.

CVE-2018-16658

    It was discovered that the cdrom driver does not correctly
    validate the parameter to the CDROM_DRIVE_STATUS ioctl.  A user
    with access to a cdrom device could use this to read sensitive
    information from the kernel or to cause a denial of service
    (crash).

CVE-2018-17182

    Jann Horn discovered that the vmacache_flush_all function mishandles
    sequence number overflows. A local user can take advantage of this
    flaw to trigger a use-after-free, causing a denial of service
    (crash or memory corruption) or privilege escalation.

For the stable distribution (stretch), these problems have been fixed in
version 4.9.110-3+deb9u5.

We recommend that you upgrade your linux packages.

For the detailed security status of linux please refer to its security
tracker page at:
<https://security-tracker.debian.org/tracker/linux>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQKTBAEBCgB9FiEERkRAmAjBceBVMd3uBUy48xNDz0QFAluyM0tfFIAAAAAALgAo
aXNzdWVyLWZwckBub3RhdGlvbnMub3BlbnBncC5maWZ0aGhvcnNlbWFuLm5ldDQ2
NDQ0MDk4MDhDMTcxRTA1NTMxRERFRTA1NENCOEYzMTM0M0NGNDQACgkQBUy48xND
z0Sakg//d4zNTvlxh5pXEVJWbcKBmyHJ1LrMFb04BwhmCwzHO3WNLAswBNUDPDwC
Q1V38ucCIlBsM88SfSgFsQkpSAot98HlKTJKlDnoIX01aRxZuEeiEPDRUcSIkl29
ZB9CBEjEoPyzf/GlUVM3cdaagKTxjUk46mL2ltxEhJkrYfGvoAim2IZuNvplx2vl
ITsiFKtbsDucwx1pO18//6fG5xowNoAcUme8hYzt2TJkMYcnFpU+eSDiEZqfjUhr
xb85RXJbn3zPJ6smC+Vi8ZfYihkTcv1gJgmjyJPYVPGsjCPFDPoa3FQJM0KzJMa7
yQSosJ4d4+2MCIHcPHhMnOD63HBz3Pm8wbd3EJWDlUDM5tWSXZBUyjTwqBkQTKaH
7oO1gpS+U7q18HeCJ27p1YOdfJFvX1PKMfyR2/fuulOUzF8WrkVEF76l5G8WEceC
9rI/83GhaIifXSwIRxeRo2sWYCqYSEQe9RSTRpvKCx4UWhInv9V2Jb5A9Mv20gvL
NwwbgdmZ9z4vRSXeZqQ/NVCTEUh3Et6ppw3xTgyqAhEAzQXnEVEmdXNf5YuCy1Eo
gz+IZJWWuJXzoq1IwO5y/2hdbr/wQWiBN7Yce3YNmJqcujZfvuf9Pfm6C9J4m7wY
ZR/j+lbSbr2tHa1EZRKnmOk9DB3IIgiI3ERFKuYsHaT48YtHGJU=
=O1JQ
-----END PGP SIGNATURE-----

```

---



=== Content from git.kernel.org_b60020d8_20250125_191826.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2018-07-06 17:12:56 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2018-07-06 17:21:34 +0200 |
| commit | [f1e255d60ae66a9f672ff9a207ee6cd8e33d2679](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)) | |
| tree | [94f248f891c1c7876417e836412e7672c4608ab8](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679) | |
| parent | [bba57eddadda936c94b5dccf73787cb9e159d0a5](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=bba57eddadda936c94b5dccf73787cb9e159d0a5) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679&id2=bba57eddadda936c94b5dccf73787cb9e159d0a5)) | |
| download | [linux-f1e255d60ae66a9f672ff9a207ee6cd8e33d2679.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-f1e255d60ae66a9f672ff9a207ee6cd8e33d2679.tar.gz) | |

USB: yurex: fix out-of-bounds uaccess in read handlerIn general, accessing userspace memory beyond the length of the supplied
buffer in VFS read/write handlers can lead to both kernel memory corruption
(via kernel\_read()/kernel\_write(), which can e.g. be triggered via
sys\_splice()) and privilege escalation inside userspace.
Fix it by using simple\_read\_from\_buffer() instead of custom logic.
Fixes: 6bc235a2e24a ("USB: add driver for Meywa-Denki & Kayac YUREX")
Signed-off-by: Jann Horn <jannh@google.com>
Cc: stable <stable@vger.kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)

| -rw-r--r-- | [drivers/usb/misc/yurex.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/drivers/usb/misc/yurex.c?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679) | 23 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 6 insertions, 17 deletions

| diff --git a/drivers/usb/misc/yurex.c b/drivers/usb/misc/yurex.cindex 8abb6cbbd98a17..3be40eaa1ac9b2 100644--- a/[drivers/usb/misc/yurex.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/usb/misc/yurex.c?id=bba57eddadda936c94b5dccf73787cb9e159d0a5)+++ b/[drivers/usb/misc/yurex.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/usb/misc/yurex.c?id=f1e255d60ae66a9f672ff9a207ee6cd8e33d2679)@@ -396,8 +396,7 @@ static ssize\_t yurex\_read(struct file \*file, char \_\_user \*buffer, size\_t count, loff\_t \*ppos) { struct usb\_yurex \*dev;- int retval = 0;- int bytes\_read = 0;+ int len = 0; char in\_buffer[20]; unsigned long flags; @@ -405,26 +404,16 @@ static ssize\_t yurex\_read(struct file \*file, char \_\_user \*buffer, size\_t count,  mutex\_lock(&dev->io\_mutex); if (!dev->interface) { /\* already disconnected \*/- retval = -ENODEV;- goto exit;+ mutex\_unlock(&dev->io\_mutex);+ return -ENODEV; }  spin\_lock\_irqsave(&dev->lock, flags);- bytes\_read = snprintf(in\_buffer, 20, "%lld\n", dev->bbu);+ len = snprintf(in\_buffer, 20, "%lld\n", dev->bbu); spin\_unlock\_irqrestore(&dev->lock, flags);-- if (\*ppos < bytes\_read) {- if (copy\_to\_user(buffer, in\_buffer + \*ppos, bytes\_read - \*ppos))- retval = -EFAULT;- else {- retval = bytes\_read - \*ppos;- \*ppos += bytes\_read;- }- }--exit: mutex\_unlock(&dev->io\_mutex);- return retval;++ return simple\_read\_from\_buffer(buffer, count, ppos, in\_buffer, len); }  static ssize\_t yurex\_write(struct file \*file, const char \_\_user \*user\_buffer, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-25 19:17:04 +0000



=== Content from idp-portal.suse.com_6b95d262_20250126_111743.html ===

## UCS

# Welcome to Univention Corporate Server

## JavaScript required

A browser with JavaScript enabled is required in order to use this service.

When using Internet Explorer, please check your security settings and add this address to your trusted sites.



=== Content from cdn.kernel.org_92f36291_20250125_191829.html ===
commit 73bc05003e9b1aebd1c473c0b42e6e4d08d209d5
Author: Greg Kroah-Hartman
Date: Tue Jul 17 11:48:36 2018 +0200
Linux 4.17.7
commit 8d930a6f0a281a8012f6430aba62f81a0ddaaf56
Author: Baruch Siach
Date: Tue Jul 3 06:24:20 2018 +0300
ARM: dts: armada-38x: use the new thermal binding
commit 568cc2f07c8ea5f71a0486464bd9703e4671045f upstream.
Commit 2f28e4c24b10e (thermal: armada: Clarify control registers
accesses) introduced the new thermal binding. The new binding extends
the second registers field size to 8. Switch to the new binding to fix
thermal reading values. Without this change the fix for errata #132698
introduced in commit 8c0b888f661 (thermal: armada: Change sensors trim
default value) has no effect.
Cc: stable@vger.kernel.org # v4.16+
Reviewed-by: Miquel Raynal
Signed-off-by: Baruch Siach
Signed-off-by: Gregory CLEMENT
Signed-off-by: Greg Kroah-Hartman
commit 220672cd2d5595f8a881eff600daf6fef9418e88
Author: Jaegeuk Kim
Date: Tue Apr 24 21:34:05 2018 -0600
f2fs: sanity check for total valid node blocks
commit 8a29c1260e24e7c9c6ab138aa0017558d8b28208 upstream.
This patch enhances sanity check for SIT entries.
syzbot hit the following crash on upstream commit
83beed7b2b26f232d782127792dd0cd4362fdc41 (Fri Apr 20 17:56:32 2018 +0000)
Merge branch 'fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/evalenti/linux-soc-thermal
syzbot dashboard link: https://syzkaller.appspot.com/bug?extid=bf9253040425feb155ad
syzkaller reproducer: https://syzkaller.appspot.com/x/repro.syz?id=5692130282438656
Raw console output: https://syzkaller.appspot.com/x/log.txt?id=5095924598571008
Kernel config: https://syzkaller.appspot.com/x/.config?id=1808800213120130118
compiler: gcc (GCC) 8.0.1 20180413 (experimental)
IMPORTANT: if you fix the bug, please add the following tag to the commit:
Reported-by: syzbot+bf9253040425feb155ad@syzkaller.appspotmail.com
It will help syzbot understand when the bug is fixed. See footer for details.
If you forward the report, please keep this part and the footer.
F2FS-fs (loop0): invalid crc value
F2FS-fs (loop0): Try to recover 1th superblock, ret: 0
F2FS-fs (loop0): Mounted with checkpoint version = d
F2FS-fs (loop0): Bitmap was wrongly cleared, blk:9740
------------[ cut here ]------------
kernel BUG at fs/f2fs/segment.c:1884!
invalid opcode: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 1 PID: 4508 Comm: syz-executor0 Not tainted 4.17.0-rc1+ #10
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
RIP: 0010:update\_sit\_entry+0x1215/0x1590 fs/f2fs/segment.c:1882
RSP: 0018:ffff8801af526708 EFLAGS: 00010282
RAX: ffffed0035ea4cc0 RBX: ffff8801ad454f90 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffffffff82eeb87e RDI: ffffed0035ea4cb6
RBP: ffff8801af526760 R08: ffff8801ad4a2480 R09: ffffed003b5e4f90
R10: ffffed003b5e4f90 R11: ffff8801daf27c87 R12: ffff8801adb8d380
R13: 0000000000000001 R14: 0000000000000008 R15: 00000000ffffffff
FS: 00000000014af940(0000) GS:ffff8801daf00000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f06bc223000 CR3: 00000001adb02000 CR4: 00000000001406e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
allocate\_data\_block+0x66f/0x2050 fs/f2fs/segment.c:2663
do\_write\_page+0x105/0x1b0 fs/f2fs/segment.c:2727
write\_node\_page+0x129/0x350 fs/f2fs/segment.c:2770
\_\_write\_node\_page+0x7da/0x1370 fs/f2fs/node.c:1398
sync\_node\_pages+0x18cf/0x1eb0 fs/f2fs/node.c:1652
block\_operations+0x429/0xa60 fs/f2fs/checkpoint.c:1088
write\_checkpoint+0x3ba/0x5380 fs/f2fs/checkpoint.c:1405
f2fs\_sync\_fs+0x2fb/0x6a0 fs/f2fs/super.c:1077
\_\_sync\_filesystem fs/sync.c:39 [inline]
sync\_filesystem+0x265/0x310 fs/sync.c:67
generic\_shutdown\_super+0xd7/0x520 fs/super.c:429
kill\_block\_super+0xa4/0x100 fs/super.c:1191
kill\_f2fs\_super+0x9f/0xd0 fs/f2fs/super.c:3030
deactivate\_locked\_super+0x97/0x100 fs/super.c:316
deactivate\_super+0x188/0x1b0 fs/super.c:347
cleanup\_mnt+0xbf/0x160 fs/namespace.c:1174
\_\_cleanup\_mnt+0x16/0x20 fs/namespace.c:1181
task\_work\_run+0x1e4/0x290 kernel/task\_work.c:113
tracehook\_notify\_resume include/linux/tracehook.h:191 [inline]
exit\_to\_usermode\_loop+0x2bd/0x310 arch/x86/entry/common.c:166
prepare\_exit\_to\_usermode arch/x86/entry/common.c:196 [inline]
syscall\_return\_slowpath arch/x86/entry/common.c:265 [inline]
do\_syscall\_64+0x6ac/0x800 arch/x86/entry/common.c:290
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
RIP: 0033:0x457d97
RSP: 002b:00007ffd46f9c8e8 EFLAGS: 00000246 ORIG\_RAX: 00000000000000a6
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 0000000000457d97
RDX: 00000000014b09a3 RSI: 0000000000000002 RDI: 00007ffd46f9da50
RBP: 00007ffd46f9da50 R08: 0000000000000000 R09: 0000000000000009
R10: 0000000000000005 R11: 0000000000000246 R12: 00000000014b0940
R13: 0000000000000000 R14: 0000000000000002 R15: 000000000000658e
RIP: update\_sit\_entry+0x1215/0x1590 fs/f2fs/segment.c:1882 RSP: ffff8801af526708
---[ end trace f498328bb02610a2 ]---
Reported-and-tested-by: syzbot+bf9253040425feb155ad@syzkaller.appspotmail.com
Reported-and-tested-by: syzbot+7d6d31d3bc702f566ce3@syzkaller.appspotmail.com
Reported-and-tested-by: syzbot+0a725420475916460f12@syzkaller.appspotmail.com
Reviewed-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit 3a4c382c0724f82a846214a34b3b51edcb994986
Author: Jaegeuk Kim
Date: Tue Apr 24 15:44:16 2018 -0600
f2fs: sanity check on sit entry
commit b2ca374f33bd33fd822eb871876e4888cf79dc97 upstream.
syzbot hit the following crash on upstream commit
87ef12027b9b1dd0e0b12cf311fbcb19f9d92539 (Wed Apr 18 19:48:17 2018 +0000)
Merge tag 'ceph-for-4.17-rc2' of git://github.com/ceph/ceph-client
syzbot dashboard link: https://syzkaller.appspot.com/bug?extid=83699adeb2d13579c31e
C reproducer: https://syzkaller.appspot.com/x/repro.c?id=5805208181407744
syzkaller reproducer: https://syzkaller.appspot.com/x/repro.syz?id=6005073343676416
Raw console output: https://syzkaller.appspot.com/x/log.txt?id=6555047731134464
Kernel config: https://syzkaller.appspot.com/x/.config?id=1808800213120130118
compiler: gcc (GCC) 8.0.1 20180413 (experimental)
IMPORTANT: if you fix the bug, please add the following tag to the commit:
Reported-by: syzbot+83699adeb2d13579c31e@syzkaller.appspotmail.com
It will help syzbot understand when the bug is fixed. See footer for details.
If you forward the report, please keep this part and the footer.
F2FS-fs (loop0): Magic Mismatch, valid(0xf2f52010) - read(0x0)
F2FS-fs (loop0): Can't find valid F2FS filesystem in 1th superblock
F2FS-fs (loop0): invalid crc value
BUG: unable to handle kernel paging request at ffffed006b2a50c0
PGD 21ffee067 P4D 21ffee067 PUD 21fbeb067 PMD 0
Oops: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 0 PID: 4514 Comm: syzkaller989480 Not tainted 4.17.0-rc1+ #8
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
RIP: 0010:build\_sit\_entries fs/f2fs/segment.c:3653 [inline]
RIP: 0010:build\_segment\_manager+0x7ef7/0xbf70 fs/f2fs/segment.c:3852
RSP: 0018:ffff8801b102e5b0 EFLAGS: 00010a06
RAX: 1ffff1006b2a50c0 RBX: 0000000000000004 RCX: 0000000000000001
RDX: 0000000000000000 RSI: 0000000000000001 RDI: ffff8801ac74243e
RBP: ffff8801b102f410 R08: ffff8801acbd46c0 R09: fffffbfff14d9af8
R10: fffffbfff14d9af8 R11: ffff8801acbd46c0 R12: ffff8801ac742a80
R13: ffff8801d9519100 R14: dffffc0000000000 R15: ffff880359528600
FS: 0000000001e04880(0000) GS:ffff8801dae00000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: ffffed006b2a50c0 CR3: 00000001ac6ac000 CR4: 00000000001406f0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
f2fs\_fill\_super+0x4095/0x7bf0 fs/f2fs/super.c:2803
mount\_bdev+0x30c/0x3e0 fs/super.c:1165
f2fs\_mount+0x34/0x40 fs/f2fs/super.c:3020
mount\_fs+0xae/0x328 fs/super.c:1268
vfs\_kern\_mount.part.34+0xd4/0x4d0 fs/namespace.c:1037
vfs\_kern\_mount fs/namespace.c:1027 [inline]
do\_new\_mount fs/namespace.c:2517 [inline]
do\_mount+0x564/0x3070 fs/namespace.c:2847
ksys\_mount+0x12d/0x140 fs/namespace.c:3063
\_\_do\_sys\_mount fs/namespace.c:3077 [inline]
\_\_se\_sys\_mount fs/namespace.c:3074 [inline]
\_\_x64\_sys\_mount+0xbe/0x150 fs/namespace.c:3074
do\_syscall\_64+0x1b1/0x800 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
RIP: 0033:0x443d6a
RSP: 002b:00007ffd312813c8 EFLAGS: 00000297 ORIG\_RAX: 00000000000000a5
RAX: ffffffffffffffda RBX: 0000000020000c00 RCX: 0000000000443d6a
RDX: 0000000020000000 RSI: 0000000020000100 RDI: 00007ffd312813d0
RBP: 0000000000000003 R08: 0000000020016a00 R09: 000000000000000a
R10: 0000000000000000 R11: 0000000000000297 R12: 0000000000000004
R13: 0000000000402c60 R14: 0000000000000000 R15: 0000000000000000
RIP: build\_sit\_entries fs/f2fs/segment.c:3653 [inline] RSP: ffff8801b102e5b0
RIP: build\_segment\_manager+0x7ef7/0xbf70 fs/f2fs/segment.c:3852 RSP: ffff8801b102e5b0
CR2: ffffed006b2a50c0
---[ end trace a2034989e196ff17 ]---
Reported-and-tested-by: syzbot+83699adeb2d13579c31e@syzkaller.appspotmail.com
Reviewed-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit 4f9d71172a495ea640f02cbedaac8b1d588390fc
Author: Jaegeuk Kim
Date: Tue Apr 24 11:37:18 2018 -0600
f2fs: avoid bug\_on on corrupted inode
commit 5d64600d4f337dc2bb89cd59da99f452f5e4f3c3 upstream.
syzbot has tested the proposed patch but the reproducer still triggered crash:
kernel BUG at fs/f2fs/inode.c:LINE!
F2FS-fs (loop1): invalid crc value
F2FS-fs (loop5): Magic Mismatch, valid(0xf2f52010) - read(0x0)
F2FS-fs (loop5): Can't find valid F2FS filesystem in 1th superblock
F2FS-fs (loop5): invalid crc value
------------[ cut here ]------------
kernel BUG at fs/f2fs/inode.c:238!
invalid opcode: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 1 PID: 4886 Comm: syz-executor1 Not tainted 4.17.0-rc1+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
RIP: 0010:do\_read\_inode fs/f2fs/inode.c:238 [inline]
RIP: 0010:f2fs\_iget+0x3307/0x3ca0 fs/f2fs/inode.c:313
RSP: 0018:ffff8801c44a70e8 EFLAGS: 00010293
RAX: ffff8801ce208040 RBX: ffff8801b3621080 RCX: ffffffff82eace18
F2FS-fs (loop2): Magic Mismatch, valid(0xf2f52010) - read(0x0)
RDX: 0000000000000000 RSI: ffffffff82eaf047 RDI: 0000000000000007
RBP: ffff8801c44a7410 R08: ffff8801ce208040 R09: ffffed0039ee4176
R10: ffffed0039ee4176 R11: ffff8801cf720bb7 R12: ffff8801c0efa000
R13: 0000000000000003 R14: 0000000000000000 R15: 0000000000000000
FS: 00007f753aa9d700(0000) GS:ffff8801daf00000(0000) knlGS:0000000000000000
------------[ cut here ]------------
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
kernel BUG at fs/f2fs/inode.c:238!
CR2: 0000000001b03018 CR3: 00000001c8b74000 CR4: 00000000001406e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
f2fs\_fill\_super+0x4377/0x7bf0 fs/f2fs/super.c:2842
mount\_bdev+0x30c/0x3e0 fs/super.c:1165
f2fs\_mount+0x34/0x40 fs/f2fs/super.c:3020
mount\_fs+0xae/0x328 fs/super.c:1268
vfs\_kern\_mount.part.34+0xd4/0x4d0 fs/namespace.c:1037
vfs\_kern\_mount fs/namespace.c:1027 [inline]
do\_new\_mount fs/namespace.c:2517 [inline]
do\_mount+0x564/0x3070 fs/namespace.c:2847
ksys\_mount+0x12d/0x140 fs/namespace.c:3063
\_\_do\_sys\_mount fs/namespace.c:3077 [inline]
\_\_se\_sys\_mount fs/namespace.c:3074 [inline]
\_\_x64\_sys\_mount+0xbe/0x150 fs/namespace.c:3074
do\_syscall\_64+0x1b1/0x800 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
RIP: 0033:0x457daa
RSP: 002b:00007f753aa9cba8 EFLAGS: 00000246 ORIG\_RAX: 00000000000000a5
RAX: ffffffffffffffda RBX: 0000000020000000 RCX: 0000000000457daa
RDX: 0000000020000000 RSI: 0000000020000100 RDI: 00007f753aa9cbf0
RBP: 0000000000000064 R08: 0000000020016a00 R09: 0000000020000000
R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000000003
R13: 0000000000000064 R14: 00000000006fcb80 R15: 0000000000000000
RIP: do\_read\_inode fs/f2fs/inode.c:238 [inline] RSP: ffff8801c44a70e8
RIP: f2fs\_iget+0x3307/0x3ca0 fs/f2fs/inode.c:313 RSP: ffff8801c44a70e8
invalid opcode: 0000 [#2] SMP KASAN
---[ end trace 1cbcbec2156680bc ]---
Reported-and-tested-by: syzbot+41a1b341571f0952badb@syzkaller.appspotmail.com
Reviewed-by: Chao Yu
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit 65fc06a33eec0415b906ad46b633a73acc3e2822
Author: Jaegeuk Kim
Date: Mon Apr 23 23:02:31 2018 -0600
f2fs: give message and set need\_fsck given broken node id
commit a4f843bd004d775cbb360cd375969b8a479568a9 upstream.
syzbot hit the following crash on upstream commit
83beed7b2b26f232d782127792dd0cd4362fdc41 (Fri Apr 20 17:56:32 2018 +0000)
Merge branch 'fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/evalenti/linux-soc-thermal
syzbot dashboard link: https://syzkaller.appspot.com/bug?extid=d154ec99402c6f628887
C reproducer: https://syzkaller.appspot.com/x/repro.c?id=5414336294027264
syzkaller reproducer: https://syzkaller.appspot.com/x/repro.syz?id=5471683234234368
Raw console output: https://syzkaller.appspot.com/x/log.txt?id=5436660795834368
Kernel config: https://syzkaller.appspot.com/x/.config?id=1808800213120130118
compiler: gcc (GCC) 8.0.1 20180413 (experimental)
IMPORTANT: if you fix the bug, please add the following tag to the commit:
Reported-by: syzbot+d154ec99402c6f628887@syzkaller.appspotmail.com
It will help syzbot understand when the bug is fixed. See footer for details.
If you forward the report, please keep this part and the footer.
F2FS-fs (loop0): Magic Mismatch, valid(0xf2f52010) - read(0x0)
F2FS-fs (loop0): Can't find valid F2FS filesystem in 1th superblock
F2FS-fs (loop0): invalid crc value
------------[ cut here ]------------
kernel BUG at fs/f2fs/node.c:1185!
invalid opcode: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 1 PID: 4549 Comm: syzkaller704305 Not tainted 4.17.0-rc1+ #10
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
RIP: 0010:\_\_get\_node\_page+0xb68/0x16e0 fs/f2fs/node.c:1185
RSP: 0018:ffff8801d960e820 EFLAGS: 00010293
RAX: ffff8801d88205c0 RBX: 0000000000000003 RCX: ffffffff82f6cc06
RDX: 0000000000000000 RSI: ffffffff82f6d5e8 RDI: 0000000000000004
RBP: ffff8801d960ec30 R08: ffff8801d88205c0 R09: ffffed003b5e46c2
R10: 0000000000000003 R11: 0000000000000003 R12: ffff8801a86e00c0
R13: 0000000000000001 R14: ffff8801a86e0530 R15: ffff8801d9745240
FS: 000000000072c880(0000) GS:ffff8801daf00000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f3d403209b8 CR3: 00000001d8f3f000 CR4: 00000000001406e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
get\_node\_page fs/f2fs/node.c:1237 [inline]
truncate\_xattr\_node+0x152/0x2e0 fs/f2fs/node.c:1014
remove\_inode\_page+0x200/0xaf0 fs/f2fs/node.c:1039
f2fs\_evict\_inode+0xe86/0x1710 fs/f2fs/inode.c:547
evict+0x4a6/0x960 fs/inode.c:557
iput\_final fs/inode.c:1519 [inline]
iput+0x62d/0xa80 fs/inode.c:1545
f2fs\_fill\_super+0x5f4e/0x7bf0 fs/f2fs/super.c:2849
mount\_bdev+0x30c/0x3e0 fs/super.c:1164
f2fs\_mount+0x34/0x40 fs/f2fs/super.c:3020
mount\_fs+0xae/0x328 fs/super.c:1267
vfs\_kern\_mount.part.34+0xd4/0x4d0 fs/namespace.c:1037
vfs\_kern\_mount fs/namespace.c:1027 [inline]
do\_new\_mount fs/namespace.c:2518 [inline]
do\_mount+0x564/0x3070 fs/namespace.c:2848
ksys\_mount+0x12d/0x140 fs/namespace.c:3064
\_\_do\_sys\_mount fs/namespace.c:3078 [inline]
\_\_se\_sys\_mount fs/namespace.c:3075 [inline]
\_\_x64\_sys\_mount+0xbe/0x150 fs/namespace.c:3075
do\_syscall\_64+0x1b1/0x800 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x49/0xbe
RIP: 0033:0x443dea
RSP: 002b:00007ffcc7882368 EFLAGS: 00000297 ORIG\_RAX: 00000000000000a5
RAX: ffffffffffffffda RBX: 0000000020000c00 RCX: 0000000000443dea
RDX: 0000000020000000 RSI: 0000000020000100 RDI: 00007ffcc7882370
RBP: 0000000000000003 R08: 0000000020016a00 R09: 000000000000000a
R10: 0000000000000000 R11: 0000000000000297 R12: 0000000000000004
R13: 0000000000402ce0 R14: 0000000000000000 R15: 0000000000000000
RIP: \_\_get\_node\_page+0xb68/0x16e0 fs/f2fs/node.c:1185 RSP: ffff8801d960e820
---[ end trace 4edbeb71f002bb76 ]---
Reported-and-tested-by: syzbot+d154ec99402c6f628887@syzkaller.appspotmail.com
Signed-off-by: Jaegeuk Kim
Signed-off-by: Greg Kroah-Hartman
commit 65e044949dae058da0fe5373d8ff5ed3087e93dc
Author: Marc Orr
Date: Wed Jun 20 17:21:29 2018 -0700
kvm: vmx: Nested VM-entry prereqs for event inj.
commit 0447378a4a793da008451fad50bc0f93e9675ae6 upstream.
This patch extends the checks done prior to a nested VM entry.
Specifically, it extends the check\_vmentry\_prereqs function with checks
for fields relevant to the VM-entry event injection information, as
described in the Intel SDM, volume 3.
This patch is motivated by a syzkaller bug, where a bad VM-entry
interruption information field is generated in the VMCS02, which causes
the nested VM launch to fail. Then, KVM fails to resume L1.
While KVM should be improved to correctly resume L1 execution after a
failed nested launch, this change is justified because the existing code
to resume L1 is flaky/ad-hoc and the test coverage for resuming L1 is
sparse.
Reported-by: syzbot
Signed-off-by: Marc Orr
[Removed comment whose parts were describing previous revisions and the
rest was obvious from function/variable naming. - Radim]
Signed-off-by: Radim Krčmář
Signed-off-by: Greg Kroah-Hartman
commit 9e369cfc3858a08f0a8c9dd9dee7e45b73cfafa6
Author: Tetsuo Handa
Date: Fri May 4 10:58:09 2018 -0600
loop: remember whether sysfs\_create\_group() was done
commit d3349b6b3c373ac1fbfb040b810fcee5e2adc7e0 upstream.
syzbot is hitting WARN() triggered by memory allocation fault
injection [1] because loop module is calling sysfs\_remove\_group()
when sysfs\_create\_group() failed.
Fix this by remembering whether sysfs\_create\_group() succeeded.
[1] https://syzkaller.appspot.com/bug?id=3f86c0edf75c86d2633aeb9dd69eccc70bc7e90b
Signed-off-by: Tetsuo Handa
Reported-by: syzbot
Reviewed-by: Greg Kroah-Hartman
Renamed sysfs\_ready -> sysfs\_inited.
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit a624d1cdb307f95786b228becab1e0633a53bccb
Author: Leon Romanovsky
Date: Wed May 23 08:22:11 2018 +0300
RDMA/ucm: Mark UCM interface as BROKEN
commit 7a8690ed6f5346f6738971892205e91d39b6b901 upstream.
In commit 357d23c811a7 ("Remove the obsolete libibcm library")
in rdma-core [1], we removed obsolete library which used the
/dev/infiniband/ucmX interface.
Following multiple syzkaller reports about non-sanitized
user input in the UCMA module, the short audit reveals the same
issues in UCM module too.
It is better to disable this interface in the kernel,
before syzkaller team invests time and energy to harden
this unused interface.
[1] https://github.com/linux-rdma/rdma-core/pull/279
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 08dee81491edf695db750ff28b8ed705757560e1
Author: Tetsuo Handa
Date: Sat May 26 09:59:36 2018 +0900
PM / hibernate: Fix oops at snapshot\_write()
commit fc14eebfc20854a38fd9f1d93a42b1783dad4d17 upstream.
syzbot is reporting NULL pointer dereference at snapshot\_write() [1].
This is because data->handle is zero-cleared by ioctl(SNAPSHOT\_FREE).
Fix this by checking data\_of(data->handle) != NULL before using it.
[1] https://syzkaller.appspot.com/bug?id=828a3c71bd344a6de8b6a31233d51a72099f27fd
Signed-off-by: Tetsuo Handa
Reported-by: syzbot
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit ce597b5c7e16a10386f6205dcd39641f0e8f5156
Author: Darrick J. Wong
Date: Thu May 24 08:54:59 2018 -0700
xfs: fix inobt magic number check
commit 2e050e648ad6c74a2f0a28f645155128be0626ca upstream.
In commit a6a781a58befcbd467c ("xfs: have buffer verifier functions
report failing address") the bad magic number return was ported
incorrectly.
Fixes: a6a781a58befcbd467ce843af4eaca3906aa1f08
Reported-by: syzbot+08ab33be0178b76851c8@syzkaller.appspotmail.com
Signed-off-by: Darrick J. Wong
Reviewed-by: Eric Sandeen
Signed-off-by: Greg Kroah-Hartman
commit d5f0b908ab50c94864f7ac9be0c6337d098ce600
Author: Theodore Ts'o
Date: Mon May 7 11:37:58 2018 -0400
loop: add recursion validation to LOOP\_CHANGE\_FD
commit d2ac838e4cd7e5e9891ecc094d626734b0245c99 upstream.
Refactor the validation code used in LOOP\_SET\_FD so it is also used in
LOOP\_CHANGE\_FD. Otherwise it is possible to construct a set of loop
devices that all refer to each other. This can lead to a infinite
loop in starting with "while (is\_loop\_device(f)) .." in loop\_set\_fd().
Fix this by refactoring out the validation code and using it for
LOOP\_CHANGE\_FD as well as LOOP\_SET\_FD.
Reported-by: syzbot+4349872271ece473a7c91190b68b4bac7c5dbc87@syzkaller.appspotmail.com
Reported-by: syzbot+40bd32c4d9a3cc12a339@syzkaller.appspotmail.com
Reported-by: syzbot+769c54e66f994b041be7@syzkaller.appspotmail.com
Reported-by: syzbot+0a89a9ce473936c57065@syzkaller.appspotmail.com
Signed-off-by: Theodore Ts'o
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit e1b0fc33589179515e0f46eae938774a83dc21d2
Author: Florian Westphal
Date: Thu Jun 7 21:34:43 2018 +0200
netfilter: x\_tables: initialise match/target check parameter struct
commit c568503ef02030f169c9e19204def610a3510918 upstream.
syzbot reports following splat:
BUG: KMSAN: uninit-value in ebt\_stp\_mt\_check+0x24b/0x450
net/bridge/netfilter/ebt\_stp.c:162
ebt\_stp\_mt\_check+0x24b/0x450 net/bridge/netfilter/ebt\_stp.c:162
xt\_check\_match+0x1438/0x1650 net/netfilter/x\_tables.c:506
ebt\_check\_match net/bridge/netfilter/ebtables.c:372 [inline]
ebt\_check\_entry net/bridge/netfilter/ebtables.c:702 [inline]
The uninitialised access is
xt\_mtchk\_param->nft\_compat
... which should be set to 0.
Fix it by zeroing the struct beforehand, same for tgchk.
ip(6)tables targetinfo uses c99-style initialiser, so no change
needed there.
Reported-by: syzbot+da4494182233c23a5fcf@syzkaller.appspotmail.com
Fixes: 55917a21d0cc0 ("netfilter: x\_tables: add context to know if extension runs from nft\_compat")
Signed-off-by: Florian Westphal
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Greg Kroah-Hartman
commit 2ab61ab0a4b34f9310aef02992bbcd6d46f03a40
Author: Dmitry Vyukov
Date: Fri Jun 8 11:53:41 2018 +0200
crypto: don't optimize keccakf()
commit f044a84e040b85cd609851ac88ae8b54b2cc0b75 upstream.
keccakf() is the only function in kernel that uses \_\_optimize() macro.
\_\_optimize() breaks frame pointer unwinder as optimized code uses RBP,
and amusingly this always lead to degraded performance as gcc does not
inline across different optimizations levels, so keccakf() wasn't inlined
into its callers and keccakf\_round() wasn't inlined into keccakf().
Drop \_\_optimize() to resolve both problems.
Signed-off-by: Dmitry Vyukov
Fixes: 83dee2ce1ae7 ("crypto: sha3-generic - rewrite KECCAK transform to help the compiler optimize")
Reported-by: syzbot+37035ccfa9a0a017ffcf@syzkaller.appspotmail.com
Reported-by: syzbot+e073e4740cfbb3ae200b@syzkaller.appspotmail.com
Cc: linux-crypto@vger.kernel.org
Cc: "David S. Miller"
Cc: Herbert Xu
Cc: Ard Biesheuvel
Acked-by: Ard Biesheuvel
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 43eadcb460455a1567c4a1829f3fc233ddfa9202
Author: Eric Dumazet
Date: Wed Jun 13 09:13:39 2018 -0700
netfilter: nf\_queue: augment nfqa\_cfg\_policy
commit ba062ebb2cd561d404e0fba8ee4b3f5ebce7cbfc upstream.
Three attributes are currently not verified, thus can trigger KMSAN
warnings such as :
BUG: KMSAN: uninit-value in \_\_arch\_swab32 arch/x86/include/uapi/asm/swab.h:10 [inline]
BUG: KMSAN: uninit-value in \_\_fswab32 include/uapi/linux/swab.h:59 [inline]
BUG: KMSAN: uninit-value in nfqnl\_recv\_config+0x939/0x17d0 net/netfilter/nfnetlink\_queue.c:1268
CPU: 1 PID: 4521 Comm: syz-executor120 Not tainted 4.17.0+ #5
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
\_\_dump\_stack lib/dump\_stack.c:77 [inline]
dump\_stack+0x185/0x1d0 lib/dump\_stack.c:113
kmsan\_report+0x188/0x2a0 mm/kmsan/kmsan.c:1117
\_\_msan\_warning\_32+0x70/0xc0 mm/kmsan/kmsan\_instr.c:620
\_\_arch\_swab32 arch/x86/include/uapi/asm/swab.h:10 [inline]
\_\_fswab32 include/uapi/linux/swab.h:59 [inline]
nfqnl\_recv\_config+0x939/0x17d0 net/netfilter/nfnetlink\_queue.c:1268
nfnetlink\_rcv\_msg+0xb2e/0xc80 net/netfilter/nfnetlink.c:212
netlink\_rcv\_skb+0x37e/0x600 net/netlink/af\_netlink.c:2448
nfnetlink\_rcv+0x2fe/0x680 net/netfilter/nfnetlink.c:513
netlink\_unicast\_kernel net/netlink/af\_netlink.c:1310 [inline]
netlink\_unicast+0x1680/0x1750 net/netlink/af\_netlink.c:1336
netlink\_sendmsg+0x104f/0x1350 net/netlink/af\_netlink.c:1901
sock\_sendmsg\_nosec net/socket.c:629 [inline]
sock\_sendmsg net/socket.c:639 [inline]
\_\_\_sys\_sendmsg+0xec8/0x1320 net/socket.c:2117
\_\_sys\_sendmsg net/socket.c:2155 [inline]
\_\_do\_sys\_sendmsg net/socket.c:2164 [inline]
\_\_se\_sys\_sendmsg net/socket.c:2162 [inline]
\_\_x64\_sys\_sendmsg+0x331/0x460 net/socket.c:2162
do\_syscall\_64+0x15b/0x230 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
RIP: 0033:0x43fd59
RSP: 002b:00007ffde0e30d28 EFLAGS: 00000213 ORIG\_RAX: 000000000000002e
RAX: ffffffffffffffda RBX: 00000000004002c8 RCX: 000000000043fd59
RDX: 0000000000000000 RSI: 0000000020000080 RDI: 0000000000000003
RBP: 00000000006ca018 R08: 00000000004002c8 R09: 00000000004002c8
R10: 00000000004002c8 R11: 0000000000000213 R12: 0000000000401680
R13: 0000000000401710 R14: 0000000000000000 R15: 0000000000000000
Uninit was created at:
kmsan\_save\_stack\_with\_flags mm/kmsan/kmsan.c:279 [inline]
kmsan\_internal\_poison\_shadow+0xb8/0x1b0 mm/kmsan/kmsan.c:189
kmsan\_kmalloc+0x94/0x100 mm/kmsan/kmsan.c:315
kmsan\_slab\_alloc+0x10/0x20 mm/kmsan/kmsan.c:322
slab\_post\_alloc\_hook mm/slab.h:446 [inline]
slab\_alloc\_node mm/slub.c:2753 [inline]
\_\_kmalloc\_node\_track\_caller+0xb35/0x11b0 mm/slub.c:4395
\_\_kmalloc\_reserve net/core/skbuff.c:138 [inline]
\_\_alloc\_skb+0x2cb/0x9e0 net/core/skbuff.c:206
alloc\_skb include/linux/skbuff.h:988 [inline]
netlink\_alloc\_large\_skb net/netlink/af\_netlink.c:1182 [inline]
netlink\_sendmsg+0x76e/0x1350 net/netlink/af\_netlink.c:1876
sock\_sendmsg\_nosec net/socket.c:629 [inline]
sock\_sendmsg net/socket.c:639 [inline]
\_\_\_sys\_sendmsg+0xec8/0x1320 net/socket.c:2117
\_\_sys\_sendmsg net/socket.c:2155 [inline]
\_\_do\_sys\_sendmsg net/socket.c:2164 [inline]
\_\_se\_sys\_sendmsg net/socket.c:2162 [inline]
\_\_x64\_sys\_sendmsg+0x331/0x460 net/socket.c:2162
do\_syscall\_64+0x15b/0x230 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
Fixes: fdb694a01f1f ("netfilter: Add fail-open support")
Fixes: 829e17a1a602 ("[NETFILTER]: nfnetlink\_queue: allow changing queue length through netlink")
Signed-off-by: Eric Dumazet
Reported-by: syzbot
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Greg Kroah-Hartman
commit 95262c792d3782659184648794a184d25801a26a
Author: Oleg Nesterov
Date: Fri May 18 18:27:39 2018 +0200
uprobes/x86: Remove incorrect WARN\_ON() in uprobe\_init\_insn()
commit 90718e32e1dcc2479acfa208ccfc6442850b594c upstream.
insn\_get\_length() has the side-effect of processing the entire instruction
but only if it was decoded successfully, otherwise insn\_complete() can fail
and in this case we need to just return an error without warning.
Reported-by: syzbot+30d675e3ca03c1c351e7@syzkaller.appspotmail.com
Signed-off-by: Oleg Nesterov
Reviewed-by: Masami Hiramatsu
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: syzkaller-bugs@googlegroups.com
Link: https://lkml.kernel.org/lkml/20180518162739.GA5559@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 49c8ef6d52ed6dacbca5a731ebe253bfb44e0ea9
Author: Eric Biggers
Date: Sat May 26 00:08:58 2018 -0700
crypto: x86/salsa20 - remove x86 salsa20 implementations
commit b7b73cd5d74694ed59abcdb4974dacb4ff8b2a2a upstream.
The x86 assembly implementations of Salsa20 use the frame base pointer
register (%ebp or %rbp), which breaks frame pointer convention and
breaks stack traces when unwinding from an interrupt in the crypto code.
Recent (v4.10+) kernels will warn about this, e.g.
WARNING: kernel stack regs at 00000000a8291e69 in syzkaller047086:4677 has bad 'bp' value 000000001077994c
[...]
But after looking into it, I believe there's very little reason to still
retain the x86 Salsa20 code. First, these are \*not\* vectorized
(SSE2/SSSE3/AVX2) implementations, which would be needed to get anywhere
close to the best Salsa20 performance on any remotely modern x86
processor; they're just regular x86 assembly. Second, it's still
unclear that anyone is actually using the kernel's Salsa20 at all,
especially given that now ChaCha20 is supported too, and with much more
efficient SSSE3 and AVX2 implementations. Finally, in benchmarks I did
on both Intel and AMD processors with both gcc 8.1.0 and gcc 4.9.4, the
x86\_64 salsa20-asm is actually slightly \*slower\* than salsa20-generic
(~3% slower on Skylake, ~10% slower on Zen), while the i686 salsa20-asm
is only slightly faster than salsa20-generic (~15% faster on Skylake,
~20% faster on Zen). The gcc version made little difference.
So, the x86\_64 salsa20-asm is pretty clearly useless. That leaves just
the i686 salsa20-asm, which based on my tests provides a 15-20% speed
boost. But that's without updating the code to not use %ebp. And given
the maintenance cost, the small speed difference vs. salsa20-generic,
the fact that few people still use i686 kernels, the doubt that anyone
is even using the kernel's Salsa20 at all, and the fact that a SSE2
implementation would almost certainly be much faster on any remotely
modern x86 processor yet no one has cared enough to add one yet, I don't
think it's worthwhile to keep.
Thus, just remove both the x86\_64 and i686 salsa20-asm implementations.
Reported-by: syzbot+ffa3a158337bbc01ff09@syzkaller.appspotmail.com
Signed-off-by: Eric Biggers
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 7632f0f4f4bbed33a0c21fd43a1b0a685c516218
Author: Tony Battersby
Date: Wed Jul 11 10:46:03 2018 -0400
bsg: fix bogus EINVAL on non-data commands
commit 70dbcc2254fa2a9add74a122b9dac954c4736e01 upstream.
Fix a regression introduced in Linux kernel 4.17 where sending a SCSI
command that does not transfer data (such as TEST UNIT READY) via
/dev/bsg/\* results in EINVAL.
Fixes: 17cb960f29c2 ("bsg: split handling of SCSI CDBs vs transport requeues")
Cc:  # 4.17+
Reviewed-by: Christoph Hellwig
Signed-off-by: Tony Battersby
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 8d9399b13642eccaf40575f778ccd2fae59bebbc
Author: Juergen Gross
Date: Thu Jul 12 17:40:34 2018 +0200
xen: setup pv irq ops vector earlier
commit 0ce0bba4e5e0eb9b753bb821785de5d23c494392 upstream.
Setting pv\_irq\_ops for Xen PV domains should be done as early as
possible in order to support e.g. very early printk() usage.
The same applies to xen\_vcpu\_info\_reset(0), as it is needed for the
pv irq ops.
Move the call of xen\_setup\_machphys\_mapping() after initializing the
pv functions as it contains a WARN\_ON(), too.
Remove the no longer necessary conditional in xen\_init\_irq\_ops()
from PVH V1 times to make clear this is a PV only function.
Cc:  # 4.14
Signed-off-by: Juergen Gross
Reviewed-by: Boris Ostrovsky
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 029da06d0ebe7dc2b2c23c8c8fbf830d98b21cb0
Author: Juergen Gross
Date: Mon Jul 2 12:00:18 2018 +0200
xen: remove global bit from \_\_default\_kernel\_pte\_mask for pv guests
commit e69b5d308da72cbf4e7911c3979f9a46d28532af upstream.
When removing the global bit from \_\_supported\_pte\_mask do the same for
\_\_default\_kernel\_pte\_mask in order to avoid the WARN\_ONCE() in
check\_pgprot() when setting a kernel pte before having called
init\_mem\_mapping().
Cc:  # 4.17
Reported-by: Michael Young
Signed-off-by: Juergen Gross
Reviewed-by: Boris Ostrovsky
Signed-off-by: Juergen Gross
Signed-off-by: Greg Kroah-Hartman
commit 08f52afde2830c8deeb7fb6e97f049dd6b6f45f0
Author: Steve Wise
Date: Thu Jun 21 07:43:21 2018 -0700
iw\_cxgb4: correctly enforce the max reg\_mr depth
commit 7b72717a20bba8bdd01b14c0460be7d15061cd6b upstream.
The code was mistakenly using the length of the page array memory instead
of the depth of the page array.
This would cause MR creation to fail in some cases.
Fixes: 8376b86de7d3 ("iw\_cxgb4: Support the new memory registration API")
Cc: stable@vger.kernel.org
Signed-off-by: Steve Wise
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 2b759455da890957416bf7d6e0a7099e589e7254
Author: Wolfram Sang
Date: Tue Jul 10 23:42:15 2018 +0200
i2c: recovery: if possible send STOP with recovery pulses
commit abe41184abac487264a4904bfcff2d5500dccce6 upstream.
I2C clients may misunderstand recovery pulses if they can't read SDA to
bail out early. In the worst case, as a write operation. To avoid that
and if we can write SDA, try to send STOP to avoid the
misinterpretation.
Signed-off-by: Wolfram Sang
Reviewed-by: Peter Rosin
Signed-off-by: Wolfram Sang
Cc: stable@kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 173e89c1adb0ee07912ceb85018b5a78385ad970
Author: Jon Hunter
Date: Tue Jul 3 09:55:43 2018 +0100
i2c: tegra: Fix NACK error handling
commit 54836e2d03e76d80aec3399368ffaf5b7caadd1b upstream.
On Tegra30 Cardhu the PCA9546 I2C mux is not ACK'ing I2C commands on
resume from suspend (which is caused by the reset signal for the I2C
mux not being configured correctl). However, this NACK is causing the
Tegra30 to hang on resuming from suspend which is not expected as we
detect NACKs and handle them. The hang observed appears to occur when
resetting the I2C controller to recover from the NACK.
Commit 77821b4678f9 ("i2c: tegra: proper handling of error cases") added
additional error handling for some error cases including NACK, however,
it appears that this change conflicts with an early fix by commit
f70893d08338 ("i2c: tegra: Add delay before resetting the controller
after NACK"). After commit 77821b4678f9 was made we now disable 'packet
mode' before the delay from commit f70893d08338 happens. Testing shows
that moving the delay to before disabling 'packet mode' fixes the hang
observed on Tegra30. The delay was added to give the I2C controller
chance to send a stop condition and so it makes sense to move this to
before we disable packet mode. Please note that packet mode is always
enabled for Tegra.
Fixes: 77821b4678f9 ("i2c: tegra: proper handling of error cases")
Signed-off-by: Jon Hunter
Acked-by: Thierry Reding
Signed-off-by: Wolfram Sang
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 5eb7b13988f6a381e74b60b2a597f6737693b085
Author: Michael J. Ruhl
Date: Wed Jun 20 09:29:08 2018 -0700
IB/hfi1: Fix incorrect mixing of ERR\_PTR and NULL return values
commit b697d7d8c741f27b728a878fc55852b06d0f6f5e upstream.
The \_\_get\_txreq() function can return a pointer, ERR\_PTR(-EBUSY), or NULL.
All of the relevant call sites look for IS\_ERR, so the NULL return would
lead to a NULL pointer exception.
Do not use the ERR\_PTR mechanism for this function.
Update all call sites to handle the return value correctly.
Clean up error paths to reflect return value.
Fixes: 45842abbb292 ("staging/rdma/hfi1: move txreq header code")
Cc:  # 4.9.x+
Reported-by: Dan Carpenter
Reviewed-by: Mike Marciniszyn
Reviewed-by: Kamenee Arumugam
Signed-off-by: Michael J. Ruhl
Signed-off-by: Dennis Dalessandro
Signed-off-by: Jason Gunthorpe
Signed-off-by: Greg Kroah-Hartman
commit 0df3a8abfe1b35444b3973ec2bed0e4828f68fc2
Author: Paul Menzel
Date: Tue Jun 5 19:00:22 2018 +0200
tools build: fix # escaping in .cmd files for future Make
commit 9feeb638cde083c737e295c0547f1b4f28e99583 upstream.
In 2016 GNU Make made a backwards incompatible change to the way '#'
characters were handled in Makefiles when used inside functions or
macros:
http://git.savannah.gnu.org/cgit/make.git/commit/?id=c6966b323811c37acedff05b57
Due to this change, when attempting to run `make prepare' I get a
spurious make syntax error:
/home/earnest/linux/tools/objtool/.fixdep.o.cmd:1: \*\*\* missing separator. Stop.
When inspecting `.fixdep.o.cmd' it includes two lines which use
unescaped comment characters at the top:
\# cannot find fixdep (/home/earnest/linux/tools/objtool//fixdep)
\# using basic dep data
This is because `tools/build/Build.include' prints these '\#'
characters:
printf '\# cannot find fixdep (%s)\n' $(fixdep) > $(dot-target).cmd; \
printf '\# using basic dep data\n\n' >> $(dot-target).cmd; \
This completes commit 9564a8cf422d ("Kbuild: fix # escaping in .cmd files
for future Make").
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=197847
Cc: Randy Dunlap
Cc: Rasmus Villemoes
Cc: stable@vger.kernel.org
Signed-off-by: Paul Menzel
Signed-off-by: Masahiro Yamada
Signed-off-by: Greg Kroah-Hartman
commit 372c759fdc675be4a3903668e8f6fc476eba3075
Author: Yandong Zhao
Date: Wed Jul 11 19:06:28 2018 +0800
arm64: neon: Fix function may\_use\_simd() return error status
commit 2fd8eb4ad87104c54800ef3cea498c92eb15c78a upstream.
It does not matter if the caller of may\_use\_simd() migrates to
another cpu after the call, but it is still important that the
kernel\_neon\_busy percpu instance that is read matches the cpu the
task is running on at the time of the read.
This means that raw\_cpu\_read() is not sufficient. kernel\_neon\_busy
may appear true if the caller migrates during the execution of
raw\_cpu\_read() and the next task to be scheduled in on the initial
cpu calls kernel\_neon\_begin().
This patch replaces raw\_cpu\_read() with this\_cpu\_read() to protect
against this race.
Cc:
Fixes: cb84d11e1625 ("arm64: neon: Remove support for nested or hardirq kernel-mode NEON")
Acked-by: Ard Biesheuvel
Reviewed-by: Dave Martin
Reviewed-by: Mark Rutland
Signed-off-by: Yandong Zhao
Signed-off-by: Will Deacon
Signed-off-by: Greg Kroah-Hartman
commit 02a5363e98abf9838f74c67d1e867f3fb80c7117
Author: Dan Williams
Date: Thu Jul 5 14:58:49 2018 -0700
acpi, nfit: Fix scrub idle detection
commit 33cc2c9667561b224215e6dfb5bf98e8fa17914e upstream.
The notification of scrub completion happens within the scrub workqueue.
That can clearly race someone running scrub\_show() and work\_busy()
before the workqueue has a chance to flush the recently completed work.
Add a flag to reliably indicate the idle vs busy state. Without this
change applications using poll(2) to wait for scrub-completion may
falsely wakeup and read ARS as being busy even though the thread is
going idle and then hang indefinitely.
Fixes: bc6ba8085842 ("nfit, address-range-scrub: rework and simplify ARS...")
Cc:
Reported-by: Vishal Verma
Tested-by: Vishal Verma
Reported-by: Lukasz Dorau
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 60eacd898c4d4525ec51ca9cc34d866fb5286d33
Author: Randy Dunlap
Date: Wed Jul 4 12:59:16 2018 -0700
kbuild: delete INSTALL\_FW\_PATH from kbuild documentation
commit 3f9cdee5929b7d035e86302dcf08fbf3e80b0739 upstream.
Removed Kbuild documentation for INSTALL\_FW\_PATH.
The kbuild symbol INSTALL\_FW\_PATH was removed from Kbuild tools in
September 2017 (for 4.14) but the symbol was not deleted from
the kbuild documentation, so do that now.
Fixes: 5620a0d1aacd ("firmware: delete in-kernel firmware")
Signed-off-by: Randy Dunlap
Cc: stable@vger.kernel.org # 4.14+
Cc: Greg Kroah-Hartman
Signed-off-by: Masahiro Yamada
Signed-off-by: Greg Kroah-Hartman
commit 259698f202378f31df6e845002377c2fbae827ad
Author: Joel Fernandes (Google)
Date: Mon Jun 25 17:08:22 2018 -0700
tracing: Reorder display of TGID to be after PID
commit f8494fa3dd10b52eab47a9666a8bc34719a129aa upstream.
Currently ftrace displays data in trace output like so:
\_-----=> irqs-off
/ \_----=> need-resched
| / \_---=> hardirq/softirq
|| / \_--=> preempt-depth
||| / delay
TASK-PID CPU TGID |||| TIMESTAMP FUNCTION
| | | | |||| | |
bash-1091 [000] ( 1091) d..2 28.313544: sched\_switch:
However Android's trace visualization tools expect a slightly different
format due to an out-of-tree patch patch that was been carried for a
decade, notice that the TGID and CPU fields are reversed:
\_-----=> irqs-off
/ \_----=> need-resched
| / \_---=> hardirq/softirq
|| / \_--=> preempt-depth
||| / delay
TASK-PID TGID CPU |||| TIMESTAMP FUNCTION
| | | | |||| | |
bash-1091 ( 1091) [002] d..2 64.965177: sched\_switch:
From kernel v4.13 onwards, during which TGID was introduced, tracing
with systrace on all Android kernels will break (most Android kernels
have been on 4.9 with Android patches, so this issues hasn't been seen
yet). From v4.13 onwards things will break.
The chrome browser's tracing tools also embed the systrace viewer which
uses the legacy TGID format and updates to that are known to be
difficult to make.
Considering this, I suggest we make this change to the upstream kernel
and backport it to all Android kernels. I believe this feature is merged
recently enough into the upstream kernel that it shouldn't be a problem.
Also logically, IMO it makes more sense to group the TGID with the
TASK-PID and the CPU after these.
Link: http://lkml.kernel.org/r/20180626000822.113931-1-joel@joelfernandes.org
Cc: jreck@google.com
Cc: tkjos@google.com
Cc: stable@vger.kernel.org
Fixes: 441dae8f2f29 ("tracing: Add support for display of tgid in trace output")
Signed-off-by: Joel Fernandes (Google)
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit 5787d29e6488bad75f7b3874b4068a2620a8b213
Author: Michal Hocko
Date: Fri Jul 13 16:59:20 2018 -0700
mm: do not bug\_on on incorrect length in \_\_mm\_populate()
commit bb177a732c4369bb58a1fe1df8f552b6f0f7db5f upstream.
syzbot has noticed that a specially crafted library can easily hit
VM\_BUG\_ON in \_\_mm\_populate
kernel BUG at mm/gup.c:1242!
invalid opcode: 0000 [#1] SMP
CPU: 2 PID: 9667 Comm: a.out Not tainted 4.18.0-rc3 #644
Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 05/19/2017
RIP: 0010:\_\_mm\_populate+0x1e2/0x1f0
Code: 55 d0 65 48 33 14 25 28 00 00 00 89 d8 75 21 48 83 c4 20 5b 41 5c 41 5d 41 5e 41 5f 5d c3 e8 75 18 f1 ff 0f 0b e8 6e 18 f1 ff <0f> 0b 31 db eb c9 e8 93 06 e0 ff 0f 1f 00 55 48 89 e5 53 48 89 fb
Call Trace:
vm\_brk\_flags+0xc3/0x100
vm\_brk+0x1f/0x30
load\_elf\_library+0x281/0x2e0
\_\_ia32\_sys\_uselib+0x170/0x1e0
do\_fast\_syscall\_32+0xca/0x420
entry\_SYSENTER\_compat+0x70/0x7f
The reason is that the length of the new brk is not page aligned when we
try to populate the it. There is no reason to bug on that though.
do\_brk\_flags already aligns the length properly so the mapping is
expanded as it should. All we need is to tell mm\_populate about it.
Besides that there is absolutely no reason to to bug\_on in the first
place. The worst thing that could happen is that the last page wouldn't
get populated and that is far from putting system into an inconsistent
state.
Fix the issue by moving the length sanitization code from do\_brk\_flags
up to vm\_brk\_flags. The only other caller of do\_brk\_flags is brk
syscall entry and it makes sure to provide the proper length so t here
is no need for sanitation and so we can use do\_brk\_flags without it.
Also remove the bogus BUG\_ONs.
[osalvador@techadventures.net: fix up vm\_brk\_flags s@request@len@]
Link: http://lkml.kernel.org/r/20180706090217.GI32658@dhcp22.suse.cz
Signed-off-by: Michal Hocko
Reported-by: syzbot
Tested-by: Tetsuo Handa
Reviewed-by: Oscar Salvador
Cc: Zi Yan
Cc: "Aneesh Kumar K.V"
Cc: Dan Williams
Cc: "Kirill A. Shutemov"
Cc: Michael S. Tsirkin
Cc: Al Viro
Cc: "Huang, Ying"
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 9ffb09757e4a8ce2304f16c9d77fab5ff7a78e82
Author: Oscar Salvador
Date: Fri Jul 13 16:59:13 2018 -0700
fs, elf: make sure to page align bss in load\_elf\_library
commit 24962af7e1041b7e50c1bc71d8d10dc678c556b5 upstream.
The current code does not make sure to page align bss before calling
vm\_brk(), and this can lead to a VM\_BUG\_ON() in \_\_mm\_populate() due to
the requested lenght not being correctly aligned.
Let us make sure to align it properly.
Kees: only applicable to CONFIG\_USELIB kernels: 32-bit and configured
for libc5.
Link: http://lkml.kernel.org/r/20180705145539.9627-1-osalvador@techadventures.net
Signed-off-by: Oscar Salvador
Reported-by: syzbot+5dcb560fe12aa5091c06@syzkaller.appspotmail.com
Tested-by: Tetsuo Handa
Acked-by: Kees Cook
Cc: Michal Hocko
Cc: Nicolas Pitre
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 3f09dcc110f61e4ca97f5563c9affe96161450e7
Author: Philipp Rudo
Date: Fri Jul 13 16:59:09 2018 -0700
x86/purgatory: add missing FORCE to Makefile target
commit fa8cbda88db12e632a8987c94b66f5caf25bcec4 upstream.
- Build the kernel without the fix
- Add some flag to the purgatories KBUILD\_CFLAGS,I used
-fno-asynchronous-unwind-tables
- Re-build the kernel
When you look at makes output you see that sha256.o is not re-build in the
last step. Also readelf -S still shows the .eh\_frame section for
sha256.o.
With the fix sha256.o is rebuilt in the last step.
Without FORCE make does not detect changes only made to the command line
options. So object files might not be re-built even when they should be.
Fix this by adding FORCE where it is missing.
Link: http://lkml.kernel.org/r/20180704110044.29279-2-prudo@linux.ibm.com
Fixes: df6f2801f511 ("kernel/kexec\_file.c: move purgatories sha256 to common code")
Signed-off-by: Philipp Rudo
Acked-by: Dave Young
Cc: Ingo Molnar
Cc: Thomas Gleixner
Cc:  [4.17+]
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 43c841b3f6eeba8743768ac98d4cb1b03d5cb6ba
Author: Vlastimil Babka
Date: Fri Jul 13 16:58:56 2018 -0700
fs/proc/task\_mmu.c: fix Locked field in /proc/pid/smaps\*
commit e70cc2bd579e8a9d6d153762f0fe294d0e652ff0 upstream.
Thomas reports:
"While looking around in /proc on my v4.14.52 system I noticed that all
processes got a lot of "Locked" memory in /proc/\*/smaps. A lot more
memory than a regular user can usually lock with mlock().
Commit 493b0e9d945f (in v4.14-rc1) seems to have changed the behavior
of "Locked".
Before that commit the code was like this. Notice the VM\_LOCKED check.
(vma->vm\_flags & VM\_LOCKED) ?
(unsigned long)(mss.pss >> (10 + PSS\_SHIFT)) : 0);
After that commit Locked is now the same as Pss:
(unsigned long)(mss->pss >> (10 + PSS\_SHIFT)));
This looks like a mistake."
Indeed, the commit has added mss->pss\_locked with the correct value that
depends on VM\_LOCKED, but forgot to actually use it. Fix it.
Link: http://lkml.kernel.org/r/ebf6c7fb-fec3-6a26-544f-710ed193c154@suse.cz
Fixes: 493b0e9d945f ("mm: add /proc/pid/smaps\_rollup")
Signed-off-by: Vlastimil Babka
Reported-by: Thomas Lindroth
Cc: Alexey Dobriyan
Cc: Daniel Colascione
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 04e51092df55ea5c8f6b6e97cc195b81c1d1f597
Author: Christian Borntraeger
Date: Fri Jul 13 16:58:52 2018 -0700
mm: do not drop unused pages when userfaultd is running
commit bce73e4842390f7b7309c8e253e139db71288ac3 upstream.
KVM guests on s390 can notify the host of unused pages. This can result
in pte\_unused callbacks to be true for KVM guest memory.
If a page is unused (checked with pte\_unused) we might drop this page
instead of paging it. This can have side-effects on userfaultd, when
the page in question was already migrated:
The next access of that page will trigger a fault and a user fault
instead of faulting in a new and empty zero page. As QEMU does not
expect a userfault on an already migrated page this migration will fail.
The most straightforward solution is to ignore the pte\_unused hint if a
userfault context is active for this VMA.
Link: http://lkml.kernel.org/r/20180703171854.63981-1-borntraeger@de.ibm.com
Signed-off-by: Christian Borntraeger
Cc: Martin Schwidefsky
Cc: Andrea Arcangeli
Cc: Mike Rapoport
Cc: Janosch Frank
Cc: David Hildenbrand
Cc: Cornelia Huck
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 54fbeaaa2a51c2a5b76d42535f8eee00ebd81674
Author: Chris Wilson
Date: Wed Jun 27 07:25:32 2018 +0100
ALSA: hda - Handle pm failure during hotplug
commit aaa23f86001bdb82d2f937c5c7bce0a1e11a6c5b upstream.
Obtaining the runtime pm wakeref can fail, especially in a hotplug
scenario where i915.ko has been unloaded. If we do not catch the
failure, we end up with an unbalanced pm.
v2 additions by tiwai:
hdmi\_present\_sense() checks the return value and handle only a
negative error case and bails out only if it's really still suspended.
Also, snd\_hda\_power\_down() is called at the error path so that the
refcount is balanced.
Along with it, the spec->pcm\_lock is taken outside
hdmi\_present\_sense() in the caller side, so that it won't cause
deadlock at reentrace via runtime resume.
v3 fix by tiwai:
Missing linux/pm\_runtime.h is included.
References: 222bde03881c ("ALSA: hda - Fix mutex deadlock at HDMI/DP hotplug")
Signed-off-by: Chris Wilson
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 7523c91e9f8e1d2e61b057f9898006b20b1df0db
Author: Hui Wang
Date: Fri Jul 6 15:14:11 2018 +0800
ALSA: hda/realtek - two more lenovo models need fixup of MIC\_LOCATION
commit c6b17f1020d956f4113d478cae6171b9093817ba upstream.
We have two new lenovo desktop models which need to apply the fixup of
ALC294\_FIXUP\_LENOVO\_MIC\_LOCATION, and they have the same pin cfg as
the machine with subsystem id:0x17aa3136, now use the pincfg table
to apply the fixup for them.
Cc:
Signed-off-by: Hui Wang
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 5ea45736209c8efd04ed793f81084925097f84ed
Author: Pavel Tatashin
Date: Sat Jul 14 09:15:07 2018 -0400
mm: zero unavailable pages before memmap init
commit e181ae0c5db9544de9c53239eb22bc012ce75033 upstream.
We must zero struct pages for memory that is not backed by physical
memory, or kernel does not have access to.
Recently, there was a change which zeroed all memmap for all holes in
e820. Unfortunately, it introduced a bug that is discussed here:
https://www.spinics.net/lists/linux-mm/msg156764.html
Linus, also saw this bug on his machine, and confirmed that reverting
commit 124049decbb1 ("x86/e820: put !E820\_TYPE\_RAM regions into
memblock.reserved") fixes the issue.
The problem is that we incorrectly zero some struct pages after they
were setup.
The fix is to zero unavailable struct pages prior to initializing of
struct pages.
A more detailed fix should come later that would avoid double zeroing
cases: one in \_\_init\_single\_page(), the other one in
zero\_resv\_unavail().
Fixes: 124049decbb1 ("x86/e820: put !E820\_TYPE\_RAM regions into memblock.reserved")
Signed-off-by: Pavel Tatashin
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 3dcb24abc93cad1afb87b3f30fd5bf348b49d5a7
Author: Linus Torvalds
Date: Tue Jul 3 17:10:19 2018 -0700
Fix up non-directory creation in SGID directories
commit 0fa3ecd87848c9c93c2c828ef4c3a8ca36ce46c7 upstream.
sgid directories have special semantics, making newly created files in
the directory belong to the group of the directory, and newly created
subdirectories will also become sgid. This is historically used for
group-shared directories.
But group directories writable by non-group members should not imply
that such non-group members can magically join the group, so make sure
to clear the sgid bit on non-directories for non-members (but remember
that sgid without group execute means "mandatory locking", just to
confuse things even more).
Reported-by: Jann Horn
Cc: Andy Lutomirski
Cc: Al Viro
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 5b5d496c97a348ade1d69ea7117f654d96cd4653
Author: Dan Carpenter
Date: Wed Jul 4 12:48:53 2018 +0300
xhci: xhci-mem: off by one in xhci\_stream\_id\_to\_ring()
commit 313db3d6488bb03b61b99de9dbca061f1fd838e1 upstream.
The > should be >= here so that we don't read one element beyond the end
of the ep->stream\_info->stream\_rings[] array.
Fixes: e9df17eb1408 ("USB: xhci: Correct assumptions about number of rings per endpoint.")
Signed-off-by: Dan Carpenter
Cc: stable
Signed-off-by: Greg Kroah-Hartman
commit 3819252d58bd623168e7fd9dfbacae05450e7ec0
Author: Nico Sneck
Date: Mon Jul 2 19:26:07 2018 +0300
usb: quirks: add delay quirks for Corsair Strafe
commit bba57eddadda936c94b5dccf73787cb9e159d0a5 upstream.
Corsair Strafe appears to suffer from the same issues
as the Corsair Strafe RGB.
Apply the same quirks (control message delay and init delay)
that the RGB version has to 1b1c:1b15.
With these quirks in place the keyboard works correctly upon
booting the system, and no longer requires reattaching the device.
Signed-off-by: Nico Sneck
Cc: stable
Signed-off-by: Greg Kroah-Hartman
commit 13c94467c25abca7f7e879d8edde36da3d494d1a
Author: Johan Hovold
Date: Wed Jul 4 17:02:17 2018 +0200
USB: serial: mos7840: fix status-register error handling
commit 794744abfffef8b1f3c0c8a4896177d6d13d653d upstream.
Add missing transfer-length sanity check to the status-register
completion handler to avoid leaking bits of uninitialised slab data to
user space.
Fixes: 3f5429746d91 ("USB: Moschip 7840 USB-Serial Driver")
Cc: stable  # 2.6.19
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit ce6037ad83d4d1a27f11c352eb8fab10b1a4e97c
Author: Jann Horn
Date: Fri Jul 6 17:12:56 2018 +0200
USB: yurex: fix out-of-bounds uaccess in read handler
commit f1e255d60ae66a9f672ff9a207ee6cd8e33d2679 upstream.
In general, accessing userspace memory beyond the length of the supplied
buffer in VFS read/write handlers can lead to both kernel memory corruption
(via kernel\_read()/kernel\_write(), which can e.g. be triggered via
sys\_splice()) and privilege escalation inside userspace.
Fix it by using simple\_read\_from\_buffer() instead of custom logic.
Fixes: 6bc235a2e24a ("USB: add driver for Meywa-Denki & Kayac YUREX")
Signed-off-by: Jann Horn
Cc: stable
Signed-off-by: Greg Kroah-Hartman
commit 137d487b4660ea49863d81ed8d0ad2730698e72e
Author: Johan Hovold
Date: Wed Jul 4 17:02:16 2018 +0200
USB: serial: keyspan\_pda: fix modem-status error handling
commit 01b3cdfca263a17554f7b249d20a247b2a751521 upstream.
Fix broken modem-status error handling which could lead to bits of slab
data leaking to user space.
Fixes: 3b36a8fd6777 ("usb: fix uninitialized variable warning in keyspan\_pda")
Cc: stable  # 2.6.27
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 2bcb5a0f790f45244cd3f4a574f00ca4381567e1
Author: Olli Salonen
Date: Wed Jul 4 14:07:42 2018 +0300
USB: serial: cp210x: add another USB ID for Qivicon ZigBee stick
commit 367b160fe4717c14a2a978b6f9ffb75a7762d3ed upstream.
There are two versions of the Qivicon Zigbee stick in circulation. This
adds the second USB ID to the cp210x driver.
Signed-off-by: Olli Salonen
Cc: stable
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit d35925d6eb482c2087a2941a515b37e8b6005975
Author: Dan Carpenter
Date: Wed Jul 4 12:29:38 2018 +0300
USB: serial: ch341: fix type promotion bug in ch341\_control\_in()
commit e33eab9ded328ccc14308afa51b5be7cbe78d30b upstream.
The "r" variable is an int and "bufsize" is an unsigned int so the
comparison is type promoted to unsigned. If usb\_control\_msg() returns a
negative that is treated as a high positive value and the error handling
doesn't work.
Fixes: 2d5a9c72d0c4 ("USB: serial: ch341: fix control-message error handling")
Signed-off-by: Dan Carpenter
Cc: stable
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 36567d0bba4f7386b9e204d5099c39b3b641015f
Author: Mika Westerberg
Date: Tue Jun 26 14:46:35 2018 +0300
thunderbolt: Notify userspace when boot\_acl is changed
commit 007a74907deeceefef9dc3ec4679fbd7921eaa51 upstream.
The commit 9aaa3b8b4c56 ("thunderbolt: Add support for preboot ACL")
introduced boot\_acl attribute but missed the fact that now userspace
needs to poll the attribute constantly to find out whether it has
changed or not. Fix this by sending notification to the userspace
whenever the boot\_acl attribute is changed.
Fixes: 9aaa3b8b4c56 ("thunderbolt: Add support for preboot ACL")
Reported-and-tested-by: Christian Kellner
Signed-off-by: Mika Westerberg
Reviewed-by: Christian Kellner
Acked-by: Yehezkel Bernat
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 66a1080d5ce4e851370613f8e556d6a59c92ea8d
Author: Hans de Goede
Date: Sun Jul 1 12:15:46 2018 +0200
ahci: Disable LPM on Lenovo 50 series laptops with a too old BIOS
commit 240630e61870e62e39a97225048f9945848fa5f5 upstream.
There have been several reports of LPM related hard freezes about once
a day on multiple Lenovo 50 series models. Strange enough these reports
where not disk model specific as LPM issues usually are and some users
with the exact same disk + laptop where seeing them while other users
where not seeing these issues.
It turns out that enabling LPM triggers a firmware bug somewhere, which
has been fixed in later BIOS versions.
This commit adds a new ahci\_broken\_lpm() function and a new ATA\_FLAG\_NO\_LPM
for dealing with this.
The ahci\_broken\_lpm() function contains DMI match info for the 4 models
which are known to be affected by this and the DMI BIOS date field for
known good BIOS versions. If the BIOS date is older then the one in the
table LPM will be disabled and a warning will be printed.
Note the BIOS dates are for known good versions, some older versions may
work too, but we don't know for sure, the table is using dates from BIOS
versions for which users have confirmed that upgrading to that version
makes the problem go away.
Unfortunately I've been unable to get hold of the reporter who reported
that BIOS version 2.35 fixed the problems on the W541 for him. I've been
able to verify the DMI\_SYS\_VENDOR and DMI\_PRODUCT\_VERSION from an older
dmidecode, but I don't know the exact BIOS date as reported in the DMI.
Lenovo keeps a changelog with dates in their release notes, but the
dates there are the release dates not the build dates which are in DMI.
So I've chosen to set the date to which we compare to one day past the
release date of the 2.34 BIOS. I plan to fix this with a follow up
commit once I've the necessary info.
Cc: stable@vger.kernel.org
Signed-off-by: Hans de Goede
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit 5ca653aaa0cf3efeff4f1c790e55ced74db1c155
Author: Mika Westerberg
Date: Wed Jun 27 15:15:40 2018 +0300
ahci: Add Intel Ice Lake LP PCI ID
commit ba44579141f9e2c0229e6e7eeb00b5fa68f0f74a upstream.
This should also be using the default LPM policy for mobile chipsets so
add the PCI ID to the driver list of supported devices.
Signed-off-by: Mika Westerberg
Signed-off-by: Tejun Heo
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman
commit 0bac537f685877923604322e538be30a188e5ea6
Author: Nadav Amit
Date: Mon Jul 2 19:27:13 2018 -0700
vmw\_balloon: fix inflation with batching
commit 90d72ce079791399ac255c75728f3c9e747b093d upstream.
Embarrassingly, the recent fix introduced worse problem than it solved,
causing the balloon not to inflate. The VM informed the hypervisor that
the pages for lock/unlock are sitting in the wrong address, as it used
the page that is used the uninitialized page variable.
Fixes: b23220fe054e9 ("vmw\_balloon: fixing double free when batching mode is off")
Cc: stable@vger.kernel.org
Reviewed-by: Xavier Deguillard
Signed-off-by: Nadav Amit
Signed-off-by: Greg Kroah-Hartman
commit 4a82304704f66661aa88c05d335d726a0648bd7e
Author: Jiri Olsa
Date: Mon Jul 9 16:19:06 2018 +0200
tracing/kprobe: Release kprobe print\_fmt properly
commit 0fc8c3581dd42bc8f530314ca86db2d861485731 upstream.
We don't release tk->tp.call.print\_fmt when destroying
local uprobe. Also there's missing print\_fmt kfree in
create\_local\_trace\_kprobe error path.
Link: http://lkml.kernel.org/r/20180709141906.2390-1-jolsa@kernel.org
Cc: stable@vger.kernel.org
Fixes: e12f03d7031a ("perf/core: Implement the 'perf\_kprobe' PMU")
Acked-by: Song Liu
Acked-by: Masami Hiramatsu
Signed-off-by: Jiri Olsa
Signed-off-by: Steven Rostedt (VMware)
Signed-off-by: Greg Kroah-Hartman
commit 0786b525e1a7a2f5ee6541fb7d6615918f8389d6
Author: Vignesh R
Date: Sat Jun 30 16:24:21 2018 +0530
mtd: spi-nor: cadence-quadspi: Fix direct mode write timeouts
commit aa7eee8a143a7e8b530eb1e75fb86cae793d1e21 upstream.
Sometimes when writing large size files to flash in direct/memory mapped
mode, it is seen that flash write enable command times out with error:
[ 503.146293] cadence-qspi 47040000.ospi: Flash command execution timed out.
This is because, we need to make sure previous direct write operation
is complete by polling for IDLE bit in CONFIG\_REG before starting the
next operation.
Fix this by polling for IDLE bit after memory mapped write.
Fixes: a27f2eaf2b27 ("mtd: spi-nor: cadence-quadspi: Add support for direct access mode")
Cc: stable@vger.kernel.org
Signed-off-by: Vignesh R
Reviewed-by: Marek Vasut
Signed-off-by: Boris Brezillon
Signed-off-by: Greg Kroah-Hartman
commit 7ac3afe1341e20359c0d1f9e1f358d175e52bcf4
Author: Alexander Usyskin
Date: Thu Jun 7 00:31:48 2018 +0300
mei: discard messages from not connected client during power down.
commit b7a020bff31318fc8785e6f96b1d38c1625cf1fb upstream.
This fixes regression introduced by
commit 8d52af6795c0 ("mei: speed up the power down flow")
In power down or suspend flow a message can still be received
from the FW because the clients fake disconnection.
In normal case we interpret messages w/o destination as corrupted
and link reset is performed in order to clean the channel,
but during power down link reset is already in progress resulting
in endless loop. To resolve the issue under power down flow we
discard messages silently.
Cc:  4.16+
Fixes: 8d52af6795c0 ("mei: speed up the power down flow")
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=199541
Signed-off-by: Alexander Usyskin
Signed-off-by: Tomas Winkler
Signed-off-by: Greg Kroah-Hartman
commit 28b37a9548267b0f891a497c4d79e18dc13bbdcd
Author: Damien Le Moal
Date: Tue Jun 26 20:56:55 2018 +0900
ata: Fix ZBC\_OUT all bit handling
commit 6edf1d4cb0acde3a0a5dac849f33031bd7abb7b1 upstream.
If the ALL bit is set in the ZBC\_OUT command, the command zone ID field
(block) should be ignored.
Reported-by: David Butterfield
Signed-off-by: Damien Le Moal
Cc: stable@vger.kernel.org
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit d24c77e726da253d1a4fb306ba23d3002c7b07ca
Author: Damien Le Moal
Date: Tue Jun 26 20:56:54 2018 +0900
ata: Fix ZBC\_OUT command block check
commit b320a0a9f23c98f21631eb27bcbbca91c79b1c6e upstream.
The block (LBA) specified must not exceed the last addressable LBA,
which is dev->nr\_sectors - 1. So fix the correct check is
"if (block >= dev->n\_sectors)" and not "if (block > dev->n\_sectords)".
Additionally, the asc/ascq to return for an LBA that is not a zone start
LBA should be ILLEGAL REQUEST, regardless if the bad LBA is out of
range.
Reported-by: David Butterfield
Signed-off-by: Damien Le Moal
Cc: stable@vger.kernel.org
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit 7fefbccbeb5cab7cae02363deede3f152de3c406
Author: Ping-Ke Shih
Date: Fri Jul 6 13:44:35 2018 +0800
staging: r8822be: Fix RTL8822be can't find any wireless AP
commit d59d2f9995d28974877750f429e821324bd603c7 upstream.
RTL8822be can't bring up properly on ASUS X530UN, and dmesg says:
[ 8.591333] r8822be: module is from the staging directory, the quality
is unknown, you have been warned.
[ 8.593122] r8822be 0000:02:00.0: enabling device (0000 -> 0003)
[ 8.669163] r8822be: Using firmware rtlwifi/rtl8822befw.bin
[ 9.289939] r8822be: rtlwifi: wireless switch is on
[ 10.056426] r8822be 0000:02:00.0 wlp2s0: renamed from wlan0
...
[ 11.952534] r8822be: halmac\_init\_hal failed
[ 11.955933] r8822be: halmac\_init\_hal failed
[ 11.956227] r8822be: halmac\_init\_hal failed
[ 22.007942] r8822be: halmac\_init\_hal failed
Jian-Hong reported it works if turn off ASPM with module parameter aspm=0.
In order to fix this problem kindly, this commit don't turn off aspm but
enlarge ASPM L1 latency to 7.
Reported-by: Jian-Hong Pan
Tested-by: Jian-Hong Pan
Signed-off-by: Ping-Ke Shih
Cc: stable
Signed-off-by: Greg Kroah-Hartman
commit ad7af60f0f7a1390446ec3b57249b634503e1cf0
Author: Murray McAllister
Date: Mon Jul 2 13:07:28 2018 +1200
staging: rtl8723bs: Prevent an underflow in rtw\_check\_beacon\_data().
commit 920c92448839bd4f8eb87a92b08cad56d449caff upstream.
Dan Carpenter reported an integer underflow issue in the rtl8188eu driver.
This is also needed for the length (signed integer) in rtl8723bs, as it is
later converted to an unsigned integer and used in a memcpy operation.
Original issue is at https://patchwork.kernel.org/patch/9796371/
Reported-by: Dan Carpenter
Signed-off-by: Murray McAllister
Cc: stable
Signed-off-by: Greg Kroah-Hartman
commit f96dd5fb7bbe57b910be9644276c4dd192605d1a
Author: Jann Horn
Date: Sat Jul 7 04:16:33 2018 +0200
ibmasm: don't write out of bounds in read handler
commit a0341fc1981a950c1e902ab901e98f60e0e243f3 upstream.
This read handler had a lot of custom logic and wrote outside the bounds of
the provided buffer. This could lead to kernel and userspace memory
corruption. Just use simple\_read\_from\_buffer() with a stack buffer.
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Cc: stable@vger.kernel.org
Signed-off-by: Jann Horn
Signed-off-by: Greg Kroah-Hartman
commit 78211c3b2eb0a041a81d9900ea294c2b81379da4
Author: Yoshihiro Shimoda
Date: Fri Jun 29 19:01:45 2018 +0900
mmc: renesas\_sdhi\_internal\_dmac: Cannot clear the RX\_IN\_USE in abort
commit 25a98edd5795719c5187e16ea271e8de86e02809 upstream.
This patch is fixes an issue that the SDHI\_INTERNAL\_DMAC\_RX\_IN\_USE
flag cannot be cleared because tmio\_mmc\_core sets the host->data
to NULL before the tmio\_mmc\_core calls tmio\_mmc\_abort\_dma().
So, this patch clears the SDHI\_INTERNAL\_DMAC\_RX\_IN\_USE in
the renesas\_sdhi\_internal\_dmac\_abort\_dma() anyway. This doesn't
cause any side effects.
Fixes: 0cbc94daa554 ("mmc: renesas\_sdhi\_internal\_dmac: limit DMA RX for old SoCs")
Cc:  # v4.17+
Signed-off-by: Yoshihiro Shimoda
Reviewed-by: Geert Uytterhoeven
Reviewed-by: Simon Horman
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit f74564e33f9373c2ecfc2973dea0260630c5c988
Author: x00270170
Date: Tue Jul 3 15:06:27 2018 +0800
mmc: dw\_mmc: fix card threshold control configuration
commit 7a6b9f4d601dfce8cb68f0dcfd834270280e31e6 upstream.
Card write threshold control is supposed to be set since controller
version 2.80a for data write in HS400 mode and data read in
HS200/HS400/SDR104 mode. However the current code returns without
configuring it in the case of data writing in HS400 mode.
Meanwhile the patch fixes that the current code goes to
'disable' when doing data reading in HS400 mode.
Fixes: 7e4bf1bc9543 ("mmc: dw\_mmc: add the card write threshold for HS400 mode")
Signed-off-by: Qing Xia
Cc: stable@vger.kernel.org # v4.8+
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 527c1ee291a03eadd07fbccb6c2cc5a04dcda39e
Author: Stefan Agner
Date: Wed Jul 4 17:07:45 2018 +0200
mmc: sdhci-esdhc-imx: allow 1.8V modes without 100/200MHz pinctrl states
commit 92748beac07c471d995fbec642b63572dc01b3dc upstream.
If pinctrl nodes for 100/200MHz are missing, the controller should
not select any mode which need signal frequencies 100MHz or higher.
To prevent such speed modes the driver currently uses the quirk flag
SDHCI\_QUIRK2\_NO\_1\_8\_V. This works nicely for SD cards since 1.8V
signaling is required for all faster modes and slower modes use 3.3V
signaling only.
However, there are eMMC modes which use 1.8V signaling and run below
100MHz, e.g. DDR52 at 1.8V. With using SDHCI\_QUIRK2\_NO\_1\_8\_V this
mode is prevented. When using a fixed 1.8V regulator as vqmmc-supply
the stack has no valid mode to use. In this tenuous situation the
kernel continuously prints voltage switching errors:
mmc1: Switching to 3.3V signalling voltage failed
Avoid using SDHCI\_QUIRK2\_NO\_1\_8\_V and prevent faster modes by
altering the SDHCI capability register. With that the stack is able
to select 1.8V modes even if no faster pinctrl states are available:
# cat /sys/kernel/debug/mmc1/ios
...
timing spec: 8 (mmc DDR52)
signal voltage: 1 (1.80 V)
...
Link: http://lkml.kernel.org/r/20180628081331.13051-1-stefan@agner.ch
Signed-off-by: Stefan Agner
Fixes: ad93220de7da ("mmc: sdhci-esdhc-imx: change pinctrl state according
to uhs mode")
Cc:  # v4.13+
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 5abec3a59f007fc1b654a9af5e495f2f50587687
Author: Rafael J. Wysocki
Date: Mon Jul 9 11:01:07 2018 +0200
ACPICA: Clear status of all events when entering S5
commit fa85015c0d95884c8dc42f38e2f2d6137d436b67 upstream.
After commit 18996f2db918 (ACPICA: Events: Stop unconditionally
clearing ACPI IRQs during suspend/resume) the status of ACPI events
is not cleared any more when entering the ACPI S5 system state (power
off) which causes some systems to power up immediately after turing
off power in certain situations.
That is a functional regression, so address it by making the code
clear the status of all ACPI events again when entering S5 (for
system-wide suspend or hibernation the clearing of the status of all
events is not desirable, as it might cause the kernel to miss wakeup
events sometimes).
Fixes: 18996f2db918 (ACPICA: Events: Stop unconditionally clearing ACPI IRQs during suspend/resume)
Reported-by: Takashi Iwai
Tested-by: Thomas Hänig
Cc: 4.17+  # 4.17+
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 7e48285b84017fc1f340e261e49302f2d8c884c9
Author: Lucas Stach
Date: Wed Jun 27 15:58:13 2018 +0200
drm/etnaviv: bring back progress check in job timeout handler
commit 2c83a726d6fbb5d130d8f2edd82a258adb675ac3 upstream.
When the hangcheck handler was replaced by the DRM scheduler timeout
handling we dropped the forward progress check, as this might allow
clients to hog the GPU for a long time with a big job.
It turns out that even reasonably well behaved clients like the
Armada Xorg driver occasionally trip over the 500ms timeout. Bring
back the forward progress check to get rid of the userspace regression.
We would still like to fix userspace to submit smaller batches
if possible, but that is for another day.
Cc:
Fixes: 6d7a20c07760 (drm/etnaviv: replace hangcheck with scheduler timeout)
Reported-by: Russell King
Signed-off-by: Lucas Stach
Reviewed-by: Eric Anholt
Signed-off-by: Greg Kroah-Hartman
commit b163d99f432304de648cd2295cb8df28b2c081f0
Author: Fabio Estevam
Date: Wed Jun 27 10:07:46 2018 -0300
drm/etnaviv: Fix driver unregistering
commit bf6ba3aeb2962e5ee4a78e7535af579ecba630bb upstream.
Russell King reported:
"When removing and reloading the etnaviv module, the following splat
occurs:
sysfs: cannot create duplicate filename '/devices/platform/etnaviv'
CPU: 0 PID: 1471 Comm: modprobe Not tainted 4.17.0+ #1608
Hardware name: Marvell Dove (Cubox)
Backtrace:
[] (dump\_backtrace) from [] (show\_stack+0x18/0x1c)
r6:ef033e38 r5:ee07b340 r4:edb9d000 r3:00000000
[] (show\_stack) from [] (dump\_stack+0x20/0x28)
[] (dump\_stack) from [] (sysfs\_warn\_dup+0x5c/0x70)
[] (sysfs\_warn\_dup) from [] (sysfs\_create\_dir\_ns+0x90/0x98)
..."
Commit 246774d17fc0 ("drm/etnaviv: remove the need for a gpu-subsystem
DT node") introduced DRM registration via
platform\_device\_register\_simple(), but missed to call
platform\_device\_unregister() inside etnaviv\_exit().
Fix the problem by calling platform\_device\_unregister() inside
etnaviv\_exit(). While at it, also rearrange the function calls
in the exit path to make them happen in the opposite order of
registration.
Tested on a imx6-sabresd board.
Cc:
Fixes: 246774d17fc0 ("drm/etnaviv: remove the need for a gpu-subsystem DT node")
Reported-by: Russell King
Signed-off-by: Fabio Estevam
Reviewed-by: Philipp Zabel
Signed-off-by: Lucas Stach
Signed-off-by: Greg Kroah-Hartman
commit 0a69975dad25a735e322d0d20d55f9786d688e83
Author: Fabio Estevam
Date: Wed Jun 27 10:07:45 2018 -0300
drm/etnaviv: Check for platform\_device\_register\_simple() failure
commit 45a0faaba9c8c5ba1e31a08a391aed0bad327167 upstream.
platform\_device\_register\_simple() may fail, so we should better
check its return value and propagate it in the case of error.
Cc:
Fixes: 246774d17fc0 ("drm/etnaviv: remove the need for a gpu-subsystem DT node")
Signed-off-by: Fabio Estevam
Reviewed-by: Philipp Zabel
Signed-off-by: Lucas Stach
Signed-off-by: Greg Kroah-Hartman
commit 0c54c6ddd843d37f80406793b3a53bc7c844d8a1
Author: Paul Burton
Date: Thu Jul 5 14:37:52 2018 -0700
MIPS: Fix ioremap() RAM check
commit 523402fa9101090c91d2033b7ebdfdcf65880488 upstream.
We currently attempt to check whether a physical address range provided
to \_\_ioremap() may be in use by the page allocator by examining the
value of PageReserved for each page in the region - lowmem pages not
marked reserved are presumed to be in use by the page allocator, and
requests to ioremap them fail.
The way we check this has been broken since commit 92923ca3aace ("mm:
meminit: only set page reserved in the memblock region"), because
memblock will typically not have any knowledge of non-RAM pages and
therefore those pages will not have the PageReserved flag set. Thus when
we attempt to ioremap a region outside of RAM we incorrectly fail
believing that the region is RAM that may be in use.
In most cases ioremap() on MIPS will take a fast-path to use the
unmapped kseg1 or xkphys virtual address spaces and never hit this path,
so the only way to hit it is for a MIPS32 system to attempt to ioremap()
an address range in lowmem with flags other than \_CACHE\_UNCACHED.
Perhaps the most straightforward way to do this is using
ioremap\_uncached\_accelerated(), which is how the problem was discovered.
Fix this by making use of walk\_system\_ram\_range() to test the address
range provided to \_\_ioremap() against only RAM pages, rather than all
lowmem pages. This means that if we have a lowmem I/O region, which is
very common for MIPS systems, we're free to ioremap() address ranges
within it. A nice bonus is that the test is no longer limited to lowmem.
The approach here matches the way x86 performed the same test after
commit c81c8a1eeede ("x86, ioremap: Speed up check for RAM pages") until
x86 moved towards a slightly more complicated check using walk\_mem\_res()
for unrelated reasons with commit 0e4c12b45aa8 ("x86/mm, resource: Use
PAGE\_KERNEL protection for ioremap of memory pages").
Signed-off-by: Paul Burton
Reported-by: Serge Semin
Tested-by: Serge Semin
Fixes: 92923ca3aace ("mm: meminit: only set page reserved in the memblock region")
Cc: James Hogan
Cc: Ralf Baechle
Cc: linux-mips@linux-mips.org
Cc: stable@vger.kernel.org # v4.2+
Patchwork: https://patchwork.linux-mips.org/patch/19786/
Signed-off-by: Greg Kroah-Hartman
commit 12cb64bd0eb395dbe13134c3de0c49ae280f5d88
Author: Paul Burton
Date: Fri Jun 22 10:55:46 2018 -0700
MIPS: Use async IPIs for arch\_trigger\_cpumask\_backtrace()
commit b63e132b6433a41cf311e8bc382d33fd2b73b505 upstream.
The current MIPS implementation of arch\_trigger\_cpumask\_backtrace() is
broken because it attempts to use synchronous IPIs despite the fact that
it may be run with interrupts disabled.
This means that when arch\_trigger\_cpumask\_backtrace() is invoked, for
example by the RCU CPU stall watchdog, we may:
- Deadlock due to use of synchronous IPIs with interrupts disabled,
causing the CPU that's attempting to generate the backtrace output
to hang itself.
- Not succeed in generating the desired output from remote CPUs.
- Produce warnings about this from smp\_call\_function\_many(), for
example:
[42760.526910] INFO: rcu\_sched detected stalls on CPUs/tasks:
[42760.535755] 0-...!: (1 GPs behind) idle=ade/140000000000000/0 softirq=526944/526945 fqs=0
[42760.547874] 1-...!: (0 ticks this GP) idle=e4a/140000000000000/0 softirq=547885/547885 fqs=0
[42760.559869] (detected by 2, t=2162 jiffies, g=266689, c=266688, q=33)
[42760.568927] ------------[ cut here ]------------
[42760.576146] WARNING: CPU: 2 PID: 1216 at kernel/smp.c:416 smp\_call\_function\_many+0x88/0x20c
[42760.587839] Modules linked in:
[42760.593152] CPU: 2 PID: 1216 Comm: sh Not tainted 4.15.4-00373-gee058bb4d0c2 #2
[42760.603767] Stack : 8e09bd20 8e09bd20 8e09bd20 fffffff0 00000007 00000006 00000000 8e09bca8
[42760.616937] 95b2b379 95b2b379 807a0080 00000007 81944518 0000018a 00000032 00000000
[42760.630095] 00000000 00000030 80000000 00000000 806eca74 00000009 8017e2b8 000001a0
[42760.643169] 00000000 00000002 00000000 8e09baa4 00000008 808b8008 86d69080 8e09bca0
[42760.656282] 8e09ad50 805e20aa 00000000 00000000 00000000 8017e2b8 00000009 801070ca
[42760.669424] ...
[42760.673919] Call Trace:
[42760.678672] [<27fde568>] show\_stack+0x70/0xf0
[42760.685417] [<84751641>] dump\_stack+0xaa/0xd0
[42760.692188] [<699d671c>] \_\_warn+0x80/0x92
[42760.698549] [<68915d41>] warn\_slowpath\_null+0x28/0x36
[42760.705912] [] smp\_call\_function\_many+0x88/0x20c
[42760.713696] [<6bbdfc2a>] arch\_trigger\_cpumask\_backtrace+0x30/0x4a
[42760.722216] [] rcu\_dump\_cpu\_stacks+0x6a/0x98
[42760.729580] [<796e7629>] rcu\_check\_callbacks+0x672/0x6ac
[42760.737476] [<059b3b43>] update\_process\_times+0x18/0x34
[42760.744981] [<6eb94941>] tick\_sched\_handle.isra.5+0x26/0x38
[42760.752793] [<478d3d70>] tick\_sched\_timer+0x1c/0x50
[42760.759882] [] \_\_hrtimer\_run\_queues+0xc6/0x226
[42760.767418] [] hrtimer\_interrupt+0x88/0x19a
[42760.775031] [<6765a19e>] gic\_compare\_interrupt+0x2e/0x3a
[42760.782761] [<0558bf5f>] handle\_percpu\_devid\_irq+0x78/0x168
[42760.790795] [<90c11ba2>] generic\_handle\_irq+0x1e/0x2c
[42760.798117] [<1b6d462c>] gic\_handle\_local\_int+0x38/0x86
[42760.805545] [] gic\_irq\_dispatch+0xa/0x14
[42760.812534] [<90c11ba2>] generic\_handle\_irq+0x1e/0x2c
[42760.820086] [] do\_IRQ+0x16/0x20
[42760.826274] [<9aef3ce6>] plat\_irq\_dispatch+0x62/0x94
[42760.833458] [<6a94b53c>] except\_vec\_vi\_end+0x70/0x78
[42760.840655] [<22284043>] smp\_call\_function\_many+0x1ba/0x20c
[42760.848501] [<54022b58>] smp\_call\_function+0x1e/0x2c
[42760.855693] [] flush\_tlb\_mm+0x2a/0x98
[42760.862730] [<0844cdd0>] tlb\_flush\_mmu+0x1c/0x44
[42760.869628] [] arch\_tlb\_finish\_mmu+0x26/0x3e
[42760.877021] [<1aeaaf74>] tlb\_finish\_mmu+0x18/0x66
[42760.883907] [] exit\_mmap+0x76/0xea
[42760.890428] [] mmput+0x80/0x11a
[42760.896632] [] do\_exit+0x1f4/0x80c
[42760.903158] [] do\_group\_exit+0x20/0x7e
[42760.909990] [<13fa8d54>] \_\_wake\_up\_parent+0x0/0x1e
[42760.917045] [<46cf89d0>] smp\_call\_function\_many+0x1a2/0x20c
[42760.924893] [<8c21a93b>] syscall\_common+0x14/0x1c
[42760.931765] ---[ end trace 02aa09da9dc52a60 ]---
[42760.938342] ------------[ cut here ]------------
[42760.945311] WARNING: CPU: 2 PID: 1216 at kernel/smp.c:291 smp\_call\_function\_single+0xee/0xf8
...
This patch switches MIPS' arch\_trigger\_cpumask\_backtrace() to use async
IPIs & smp\_call\_function\_single\_async() in order to resolve this
problem. We ensure use of the pre-allocated call\_single\_data\_t
structures is serialized by maintaining a cpumask indicating that
they're busy, and refusing to attempt to send an IPI when a CPU's bit is
set in this mask. This should only happen if a CPU hasn't responded to a
previous backtrace IPI - ie. if it's hung - and we print a warning to
the console in this case.
I've marked this for stable branches as far back as v4.9, to which it
applies cleanly. Strictly speaking the faulty MIPS implementation can be
traced further back to commit 856839b76836 ("MIPS: Add
arch\_trigger\_all\_cpu\_backtrace() function") in v3.19, but kernel
versions v3.19 through v4.8 will require further work to backport due to
the rework performed in commit 9a01c3ed5cdb ("nmi\_backtrace: add more
trigger\_\*\_cpu\_backtrace() methods").
Signed-off-by: Paul Burton
Patchwork: https://patchwork.linux-mips.org/patch/19597/
Cc: James Hogan
Cc: Ralf Baechle
Cc: Huacai Chen
Cc: linux-mips@linux-mips.org
Cc: stable@vger.kernel.org # v4.9+
Fixes: 856839b76836 ("MIPS: Add arch\_trigger\_all\_cpu\_backtrace() function")
Fixes: 9a01c3ed5cdb ("nmi\_backtrace: add more trigger\_\*\_cpu\_backtrace() methods")
Signed-off-by: Greg Kroah-Hartman
commit 60a4a2c37ed7b07cb5ad04ba43e4f313cb85059c
Author: Paul Burton
Date: Fri Jun 22 10:55:45 2018 -0700
MIPS: Call dump\_stack() from show\_regs()
commit 5a267832c2ec47b2dad0fdb291a96bb5b8869315 upstream.
The generic nmi\_cpu\_backtrace() function calls show\_regs() when a struct
pt\_regs is available, and dump\_stack() otherwise. If we were to make use
of the generic nmi\_cpu\_backtrace() with MIPS' current implementation of
show\_regs() this would mean that we see only register data with no
accompanying stack information, in contrast with our current
implementation which calls dump\_stack() regardless of whether register
state is available.
In preparation for making use of the generic nmi\_cpu\_backtrace() to
implement arch\_trigger\_cpumask\_backtrace(), have our implementation of
show\_regs() call dump\_stack() and drop the explicit dump\_stack() call in
arch\_dump\_stack() which is invoked by arch\_trigger\_cpumask\_backtrace().
This will allow the output we produce to remain the same after a later
patch switches to using nmi\_cpu\_backtrace(). It may mean that we produce
extra stack output in other uses of show\_regs(), but this:
1) Seems harmless.
2) Is good for consistency between arch\_trigger\_cpumask\_backtrace()
and other users of show\_regs().
3) Matches the behaviour of the ARM & PowerPC architectures.
Marked for stable back to v4.9 as a prerequisite of the following patch
"MIPS: Call dump\_stack() from show\_regs()".
Signed-off-by: Paul Burton
Patchwork: https://patchwork.linux-mips.org/patch/19596/
Cc: James Hogan
Cc: Ralf Baechle
Cc: Huacai Chen
Cc: linux-mips@linux-mips.org
Cc: stable@vger.kernel.org # v4.9+
Signed-off-by: Greg Kroah-Hartman
commit 49fde2180b48cd15d6b2a51416bbf1c4be5d77a2
Author: Daniel Borkmann
Date: Thu Jun 7 17:40:03 2018 +0200
bpf: reject passing modified ctx to helper functions
commit 58990d1ff3f7896ee341030e9a7c2e4002570683 upstream.
As commit 28e33f9d78ee ("bpf: disallow arithmetic operations on
context pointer") already describes, f1174f77b50c ("bpf/verifier:
rework value tracking") removed the specific white-listed cases
we had previously where we would allow for pointer arithmetic in
order to further generalize it, and allow e.g. context access via
modified registers. While the dereferencing of modified context
pointers had been forbidden through 28e33f9d78ee, syzkaller did
recently manage to trigger several KASAN splats for slab out of
bounds access and use after frees by simply passing a modified
context pointer to a helper function which would then do the bad
access since verifier allowed it in adjust\_ptr\_min\_max\_vals().
Rejecting arithmetic on ctx pointer in adjust\_ptr\_min\_max\_vals()
generally could break existing programs as there's a valid use
case in tracing in combination with passing the ctx to helpers as
bpf\_probe\_read(), where the register then becomes unknown at
verification time due to adding a non-constant offset to it. An
access sequence may look like the following:
offset = args->filename; /\* field \_\_data\_loc filename \*/
bpf\_probe\_read(&dst, len, (char \*)args + offset); // args is ctx
There are two options: i) we could special case the ctx and as
soon as we add a constant or bounded offset to it (hence ctx type
wouldn't change) we could turn the ctx into an unknown scalar, or
ii) we generalize the sanity test for ctx member access into a
small helper and assert it on the ctx register that was passed
as a function argument. Fwiw, latter is more obvious and less
complex at the same time, and one case that may potentially be
legitimate in future for ctx member access at least would be for
ctx to carry a const offset. Therefore, fix follows approach
from ii) and adds test cases to BPF kselftests.
Fixes: f1174f77b50c ("bpf/verifier: rework value tracking")
Reported-by: syzbot+3d0b2441dbb71751615e@syzkaller.appspotmail.com
Reported-by: syzbot+c8504affd4fdd0c1b626@syzkaller.appspotmail.com
Reported-by: syzbot+e5190cb881d8660fb1a3@syzkaller.appspotmail.com
Reported-by: syzbot+efae31b384d5badbd620@syzkaller.appspotmail.com
Signed-off-by: Daniel Borkmann
Acked-by: Alexei Starovoitov
Acked-by: Yonghong Song
Acked-by: Edward Cree
Signed-off-by: Alexei Starovoitov
Signed-off-by: Greg Kroah-Hartman

