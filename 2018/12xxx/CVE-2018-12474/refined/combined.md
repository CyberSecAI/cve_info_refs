=== Content from github.com_b767a4c4_20250125_211307.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FopenSUSE%2Fobs-service-tar_scm%2Fpull%2F254)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FopenSUSE%2Fobs-service-tar_scm%2Fpull%2F254)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=openSUSE%2Fobs-service-tar_scm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[openSUSE](/openSUSE)
/
**[obs-service-tar\_scm](/openSUSE/obs-service-tar_scm)**
Public

* [Notifications](/login?return_to=%2FopenSUSE%2Fobs-service-tar_scm) You must be signed in to change notification settings
* [Fork
  105](/login?return_to=%2FopenSUSE%2Fobs-service-tar_scm)
* [Star
   32](/login?return_to=%2FopenSUSE%2Fobs-service-tar_scm)

* [Code](/openSUSE/obs-service-tar_scm)
* [Issues
  79](/openSUSE/obs-service-tar_scm/issues)
* [Pull requests
  21](/openSUSE/obs-service-tar_scm/pulls)
* [Actions](/openSUSE/obs-service-tar_scm/actions)
* [Projects
  0](/openSUSE/obs-service-tar_scm/projects)
* [Wiki](/openSUSE/obs-service-tar_scm/wiki)
* [Security](/openSUSE/obs-service-tar_scm/security)
* [Insights](/openSUSE/obs-service-tar_scm/pulse)

Additional navigation options

* [Code](/openSUSE/obs-service-tar_scm)
* [Issues](/openSUSE/obs-service-tar_scm/issues)
* [Pull requests](/openSUSE/obs-service-tar_scm/pulls)
* [Actions](/openSUSE/obs-service-tar_scm/actions)
* [Projects](/openSUSE/obs-service-tar_scm/projects)
* [Wiki](/openSUSE/obs-service-tar_scm/wiki)
* [Security](/openSUSE/obs-service-tar_scm/security)
* [Insights](/openSUSE/obs-service-tar_scm/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FopenSUSE%2Fobs-service-tar_scm%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FopenSUSE%2Fobs-service-tar_scm%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix regression from 44b3bee #254

 Merged

[M0ses](/M0ses)
merged 1 commit into
[openSUSE:master](/openSUSE/obs-service-tar_scm/tree/master "openSUSE/obs-service-tar_scm:master")
from
[M0ses:alternative\_ssh\_urls](/M0ses/obs-service-tar_scm/tree/alternative_ssh_urls "M0ses/obs-service-tar_scm:alternative_ssh_urls")

Sep 25, 2018

 Merged

# [fix regression from 44b3bee](#top) #254

[M0ses](/M0ses)
merged 1 commit into
[openSUSE:master](/openSUSE/obs-service-tar_scm/tree/master "openSUSE/obs-service-tar_scm:master")
from
[M0ses:alternative\_ssh\_urls](/M0ses/obs-service-tar_scm/tree/alternative_ssh_urls "M0ses/obs-service-tar_scm:alternative_ssh_urls")

Sep 25, 2018

[Conversation
1](/openSUSE/obs-service-tar_scm/pull/254)
[Commits
1](/openSUSE/obs-service-tar_scm/pull/254/commits)
[Checks
0](/openSUSE/obs-service-tar_scm/pull/254/checks)
[Files changed](/openSUSE/obs-service-tar_scm/pull/254/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![M0ses](https://avatars.githubusercontent.com/u/1991473?s=60&v=4)](/M0ses)

Copy link

Collaborator

### @M0ses **[M0ses](/M0ses)** commented [Sep 24, 2018](#issue-363300606)

with checking for local repos, usage of ssh compliant url's was no longer

possible.

This fix should reenable those type of urls as described in "man git-clone"

[user@]host.xy:path/to/repo

Sorry, something went wrong.

All reactions

[![@M0ses](https://avatars.githubusercontent.com/u/1991473?s=40&v=4)](/M0ses)

`[fix regression from](/openSUSE/obs-service-tar_scm/pull/254/commits/0a1a1de91f64e62411e19648f67123f7dfa56e80 "fix regression from 44b3bee

with checking for local repos, usage of ssh compliant url's was no longer
possible.

This fix should reenable those type of urls as described in \"man git-clone\"

[user@]host.xy:path/to/repo") [44b3bee](https://github.com/M0ses/obs-service-tar_scm/commit/44b3beeaf8663d46467fb3945ddc3d73c65ac452)`
 …

`[0a1a1de](/openSUSE/obs-service-tar_scm/pull/254/commits/0a1a1de91f64e62411e19648f67123f7dfa56e80)`

```
with checking for local repos, usage of ssh compliant url's was no longer
possible.

This fix should reenable those type of urls as described in "man git-clone"

[user@]host.xy:path/to/repo
```

 [![@M0ses](https://avatars.githubusercontent.com/u/1991473?s=40&v=4)](/M0ses)
[M0ses](/M0ses)
requested a review
from [adrianschroeter](/adrianschroeter)
[September 24, 2018 20:09](#event-1864067871)

[![@M0ses](https://avatars.githubusercontent.com/u/1991473?s=40&v=4)](/M0ses)
[M0ses](/M0ses)
mentioned this pull request
[Sep 24, 2018](#ref-pullrequest-361601764)

[Bug 1107507
#251](/openSUSE/obs-service-tar_scm/pull/251)
 Merged

[![gollub](https://avatars.githubusercontent.com/u/1199932?s=60&v=4)](/gollub)

**[gollub](/gollub)**
approved these changes
[Sep 25, 2018](#pullrequestreview-158380809)

 [View reviewed changes](/openSUSE/obs-service-tar_scm/pull/254/files/0a1a1de91f64e62411e19648f67123f7dfa56e80)

[![@gollub](https://avatars.githubusercontent.com/u/1199932?s=80&v=4)](/gollub)

Copy link

Contributor

### **[gollub](/gollub)** commented [Sep 25, 2018](#issuecomment-424213469) • edited Loading

| I can't access bug 1107507, but I guess the context of those changes were to prevent non-authorized users to create tarball from the local filesystems of the machine running the OBS source-service or some sort of hardening. With respect to Git and SSH and maybe some other SCM and transport protocols, there is obviously the risk of people trying "root@localhost:/root/devops.git" or something like that. If those changes were all in context of a security fix, maybe adding a security recommendation section in the README to point out that OBS source-service instances should only get credentials (e.g. SSH keys) with restricted access, to prevent unrestricted access of the central OBS filesystems. Or things like that.  I'm not suggesting to try to filter/exclude URLs like:  ``` git@127.0.0.1:/root/devops.git root@localhost:/root/chef-solo-obs.git  ```  ... or something like that.  In case that was the original motivation. |
| --- |

All reactions

Sorry, something went wrong.

[![mgerstner](https://avatars.githubusercontent.com/u/24227799?s=60&v=4)](/mgerstner)

**[mgerstner](/mgerstner)**
approved these changes
[Sep 25, 2018](#pullrequestreview-158433139)

 [View reviewed changes](/openSUSE/obs-service-tar_scm/pull/254/files/0a1a1de91f64e62411e19648f67123f7dfa56e80)

[![adrianschroeter](https://avatars.githubusercontent.com/u/1067148?s=60&v=4)](/adrianschroeter)

**[adrianschroeter](/adrianschroeter)**
approved these changes
[Sep 25, 2018](#pullrequestreview-158460082)

 [View reviewed changes](/openSUSE/obs-service-tar_scm/pull/254/files/0a1a1de91f64e62411e19648f67123f7dfa56e80)

[![@M0ses](https://avatars.githubusercontent.com/u/1991473?s=40&v=4)](/M0ses)
[M0ses](/M0ses)
merged commit [`51a17c5`](/openSUSE/obs-service-tar_scm/commit/51a17c553b6ae2598820b7a90fd0c11502a49106)
into
openSUSE:master

[Sep 25, 2018](https://github.com/openSUSE/obs-service-tar_scm/pull/254#event-1865273933)

 [![@M0ses](https://avatars.githubusercontent.com/u/1991473?s=40&v=4)](/M0ses)
[M0ses](/M0ses)
deleted the
alternative\_ssh\_urls

branch
[November 29, 2018 10:51](#event-1994880236)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FopenSUSE%2Fobs-service-tar_scm%2Fpull%2F254)

Reviewers

[![@mgerstner](https://avatars.githubusercontent.com/u/24227799?s=40&v=4)](/mgerstner) [mgerstner](/mgerstner)

mgerstner approved these changes

[![@gollub](https://avatars.githubusercontent.com/u/1199932?s=40&v=4)](/gollub) [gollub](/gollub)

gollub approved these changes

[![@adrianschroeter](https://avatars.githubusercontent.com/u/1067148?s=40&v=4)](/adrianschroeter) [adrianschroeter](/adrianschroeter)

adrianschroeter approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

4 participants

[![@M0ses](https://avatars.githubusercontent.com/u/1991473?s=52&v=4)](/M0ses) [![@gollub](https://avatars.githubusercontent.com/u/1199932?s=52&v=4)](/gollub) [![@adrianschroeter](https://avatars.githubusercontent.com/u/1067148?s=52&v=4)](/adrianschroeter) [![@mgerstner](https://avatars.githubusercontent.com/u/24227799?s=52&v=4)](/mgerstner)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from idp-portal.suse.com_6b95d262_20250126_115934.html ===

## UCS

# Welcome to Univention Corporate Server

## JavaScript required

A browser with JavaScript enabled is required in order to use this service.

When using Internet Explorer, please check your security settings and add this address to your trusted sites.



=== Content from bugzilla.suse.com_46dbe01e_20250125_211306.html ===


| Bugzilla – Bug 1107507 | VUL-0: CVE-2018-12474: obs-service-tar\_scm: crafted service parameters allow unexpected behaviour | Last modified: 2024-09-09 10:20:17 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1107507)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1107507**](show_bug.cgi?id=1107507)
(CVE-2018-12474)
- VUL-0: CVE-2018-12474: obs-service-tar\_scm: crafted service parameters allow unexpected behaviour

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: CVE-2018-12474: obs-service-tar\_scm: crafted service parameters allow ...

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-12474 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | SUSE Security Incidents | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Novell Products | | [Component:](describecomponents.cgi?product=SUSE Security Incidents "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Incidents ([show other bugs](buglist.cgi?component=Incidents&product=SUSE%20Security%20Incidents&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P3 - Medium **Severity**: Normal | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Frank Schreiner | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2018-09-06 15:26 UTC by Matthias Gerstner | | --- | --- | | Modified: | 2024-09-09 10:20 UTC ([History](show_activity.cgi?id=1107507)) | | CC List: | 3 users (show)  adrian.schroeter jsegitz security-team | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1107507) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1107507&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1107507&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1107507#c0)  Matthias Gerstner   2018-09-06 15:26:29 UTC  ``` As a follow up a general OBS review and also inspired by [bug 1105361](show_bug.cgi?id=1105361 "RESOLVED FIXED - VUL-0: CVE-2018-12473: obs-service-tar_scm: path traversal") I think I have found some more ways of tricking the tar_scm service.  1) Using local source repositories  By specifying the git repo URL to be a local path like    <param name="url">/home/some/repo</param>  it would be possible to clone a local repository instead of a remote one. This is probably not very severe but I think it should be prevented to be on the safe side.  2) Using relative or absolute paths as output filename allows to escape the package directory like this:    <param name="filename">/tmp/somepkg</param>  This works at least on the client side for me, so the /tmp/somepkg-$version.tar will be created. On the server side I think some additional logic prevents harmful characters in the filename. ``` [Comment 1](show_bug.cgi?id=1107507#c1)  Matthias Gerstner   2018-09-06 15:43:28 UTC  ``` Letting some params play well together we can further control the path in case 2):  ``` <services>   <service name="tar_scm" mode="disabled">   <param name="url">$URL</param>   <param name="scm">git</param>   <param name="filename">/home/$USER/file</param>   <param name="extension">txt</param>   <param name="versionrewrite-pattern">.*</param>   <param name="versionrewrite-replacement"></param> </services> ```  This allows to create an arbitrary path "$filename.$extension". The content is not directly controlled, however, because it is tar'ed. ``` [Comment 2](show_bug.cgi?id=1107507#c2)  Matthias Gerstner   2018-09-06 16:56:57 UTC  ``` And here is another case 3):  The extract parameter allows to follow symlinks. When I put a symlink into a git repository like `somefile -> /etc/passwd` and specify the following in the _service file:      <param name="extract">somefile</param>  Then the service will use shutil.copy() to "extract" the file, leading to the symlink to be followed and the local /etc/passwd being copied into the package top level instead. On the client side this could lead to confusion but I am not sure how this behaves on the server side. It might allow indirect read access in the context of the user running the `bs_service` daemon. ``` [Comment 3](show_bug.cgi?id=1107507#c3)  Matthias Gerstner   2018-09-07 13:20:50 UTC  ``` Another finding in the obs_scm personality (probably also in the tar personality): 4) The subdir parameter also allows to follow symlinks in upstream repositories.  Placing e.g. `etc -> /etc` in a repository allows to package arbitrary system files into the resulting cpio archive. The only limitation is that there must be read access for all files contained in there. This I could reproduce even on the server side using a service file like this:  ``` <services>   <service name="obs_scm">     <param name="url"><https://www.github.com/mgerstner/tpm2-tss></param>     <param name="scm">git</param>     <param name="subdir">etc/zypp</param>     <param name="revision">attack</param>   </service> </services> ```  After triggering the service run on the server side I was able to download the resulting CPIO archive containg files from /etc/zypp:  $ osc cat $PROJECT/tss/_service:obs_scm:tpm2-tss-1536324098.d76bb52.obscpio  Directly specifiying subdir's outside of the package directory is not possible, because it is prevented in the logic in the area of cli.py:128. ``` [Comment 4](show_bug.cgi?id=1107507#c4)  Matthias Gerstner   2018-09-07 15:42:02 UTC  ``` And another finding in the tar personality. The parameters found in the *.obsinfo file are not sanitized. The "name" and "version" entries can contain path components. Example:  ``` name: /etc/fstab version: new mtime: 1536327989 commit: 028c9b3039e616164e70976fa809342546028bf4 ```  This while cause the tar service trying to rename /etc/fstab to /etc/fstab-new, which only fails due to lacking permissions. It could be used to rename files in /tmp, /var/tmp etc.  If you prefer separate bugs for each finding please tell me. If there are more/other people to involve then please adjust. Thank you! ``` [Comment 5](show_bug.cgi?id=1107507#c5)  Frank Schreiner   2018-09-11 09:36:23 UTC  ``` (In reply to Matthias Gerstner from [comment #0](show_bug.cgi?id=1107507#c0)) > As a follow up a general OBS review and also inspired by [bug 1105361](show_bug.cgi?id=1105361 "RESOLVED FIXED - VUL-0: CVE-2018-12473: obs-service-tar_scm: path traversal") I think > I > have found some more ways of tricking the tar_scm service. >  > 1) Using local source repositories >  > By specifying the git repo URL to be a local path like >  >   <param name="url">/home/some/repo</param> >  > it would be possible to clone a local repository instead of a remote one. > This > is probably not very severe but I think it should be prevented to be on the > safe side.  This is a wanted feature, so you can use e.g. your local working copy and build a package with osc completely locally without submitting to your git repo. This is very useful if your spec file is hosted in your git repository. I would not recommend to change this, but I see your concerns, as users could checkout a malicious "_service" file and run it locally an commit the result.  IMHO a warning, if a local repo is used, should be sufficient in this case, correct? ``` [Comment 6](show_bug.cgi?id=1107507#c6)  Matthias Gerstner   2018-09-11 11:49:01 UTC  ``` (In reply to FSchreiner@suse.com from [comment #5](show_bug.cgi?id=1107507#c5))  > This is a wanted feature, so you can use e.g. your local working copy and > build a package with osc completely locally without submitting to your git > repo.  If this is a feature then let's keep it that way.  > IMHO a warning, if a local repo is used, should be sufficient in this case, correct?  That could be an approach. Maybe it can also be prevented on the server side only? There it wouldn't make sense to clone a local repo, right? ``` [Comment 7](show_bug.cgi?id=1107507#c7)  Frank Schreiner   2018-09-19 07:28:28 UTC  ``` (In reply to Matthias Gerstner from [comment #6](show_bug.cgi?id=1107507#c6)) > (In reply to FSchreiner@suse.com from [comment #5](show_bug.cgi?id=1107507#c5)) >  > > This is a wanted feature, so you can use e.g. your local working copy and > > build a package with osc completely locally without submitting to your git > > repo. >  > If this is a feature then let's keep it that way.  I discussed this point with adrian and we aggreed that using the local repo cache for editing/commiting should be sufficient  You can find my fixes in the following PR on github:  <https://github.com/openSUSE/obs-service-tar_scm/pull/251>  Please comment. ``` [Comment 8](show_bug.cgi?id=1107507#c8)  Matthias Gerstner   2018-09-20 15:36:53 UTC  ``` (In reply to FSchreiner@suse.com from [comment #7](show_bug.cgi?id=1107507#c7)) > You can find my fixes in the following PR on github: >  > <https://github.com/openSUSE/obs-service-tar_scm/pull/251> >  > Please comment.  Thank you for working on this! I did a review on github, I think there are some spots left to improve. ``` [Comment 9](show_bug.cgi?id=1107507#c9)  Frank Schreiner   2018-09-21 13:17:03 UTC  ```  > Thank you for working on this! I did a review on github, I think there are > some spots left to improve.  Thanks for your review and feedback. I just pushed another PR and wanted to ask you for a second review.  Please don`t be afraid about the huge amount of changes, I wanted to improve our testsuite to cover each of the fixes.  One thing, I did not understand:  > Can you also check for slashes in the "version"? It could contain ".." and "/".  I do not consider '..' in name/version of obsinfo as harmful as long as no "/" is included.  Did you mean, that I should check for '..' also or shouldn´t it be sufficient to check for '/'?  In version, I now implemented also a check for '..' even I don`t see a reason why this should be harmful if no '/' is in there. ``` [Comment 10](show_bug.cgi?id=1107507#c10)  Matthias Gerstner   2018-09-24 08:39:09 UTC  ``` (In reply to FSchreiner@suse.com from [comment #9](show_bug.cgi?id=1107507#c9)) > I just pushed another PR and wanted to ask you for a second review.  Okay I will look into it.  > One thing, I did not understand: >  > > Can you also check for slashes in the "version"? It could contain ".." and "/". >  > I do not consider '..' in name/version of obsinfo as harmful as long as no "/" is included. >  > Did you mean, that I should check for '..' also or shouldn´t it be sufficient to check for '/'?  Yes, checking for the slash should be sufficient. ``` [Comment 11](show_bug.cgi?id=1107507#c11)  Frank Schreiner   2018-09-24 20:18:21 UTC  ``` Matthias:  We had complaints about regressions with ssh urls, so I added another PR  <https://github.com/openSUSE/obs-service-tar_scm/pull/254>  Could you please review this PR, because the check_url function got much more complex now.  Sorry for the inconvenience. ``` [Comment 12](show_bug.cgi?id=1107507#c12)  Johannes Segitz   2018-09-26 09:01:23 UTC  ``` Please use CVE-2018-12474 for this issue ``` [Comment 13](show_bug.cgi?id=1107507#c13)  Matthias Gerstner   2018-12-14 15:01:40 UTC  ``` We just got a submission on IBS sr#179951 including a newer version of obs-service-tar_scm. This version already includes the fix for this CVE.  Is the SLE-15 or Leap 42.3 codestream also affected by this? If so then please provide maintenance updates. Otherwise this bug can be closed. Thank you. ``` [Comment 16](show_bug.cgi?id=1107507#c16)  Swamp Workflow Management   2019-02-28 01:20:23 UTC  ``` This is an autogenerated message for OBS integration: This bug (1107507) was mentioned in <https://build.opensuse.org/request/show/679987> Factory / obs-service-tar_scm ``` [Comment 17](show_bug.cgi?id=1107507#c17)  Swamp Workflow Management   2019-02-28 11:30:23 UTC  ``` This is an autogenerated message for OBS integration: This bug (1107507) was mentioned in <https://build.opensuse.org/request/show/680081> 15.0+42.3 / obs-service-tar_scm ``` [Comment 19](show_bug.cgi?id=1107507#c19)  Swamp Workflow Management   2019-03-04 20:56:00 UTC  ``` SUSE-SU-2019:0540-1: An update that solves three vulnerabilities and has two fixes is now available.  Category: security (important) Bug References: 1076410,1082696,1105361,1107507,1107944 CVE References: CVE-2018-12473,CVE-2018-12474,CVE-2018-12476 Sources used: SUSE Linux Enterprise Module for Open Buildservice Development Tools 15 (src):    obs-service-tar_scm-0.10.5.1551309990.79898c7-3.3.1 ``` [Comment 22](show_bug.cgi?id=1107507#c22)  Swamp Workflow Management   2019-03-13 23:09:49 UTC  ``` openSUSE-SU-2019:0326-1: An update that solves three vulnerabilities and has two fixes is now available.  Category: security (important) Bug References: 1076410,1082696,1105361,1107507,1107944 CVE References: CVE-2018-12473,CVE-2018-12474,CVE-2018-12476 Sources used: openSUSE Leap 15.0 (src):    obs-service-tar_scm-0.10.5.1551309990.79898c7-lp150.2.3.1 ``` [Comment 23](show_bug.cgi?id=1107507#c23)  Swamp Workflow Management   2019-03-15 11:10:04 UTC  ``` openSUSE-SU-2019:0329-1: An update that solves three vulnerabilities and has two fixes is now available.  Category: security (important) Bug References: 1076410,1082696,1105361,1107507,1107944 CVE References: CVE-2018-12473,CVE-2018-12474,CVE-2018-12476 Sources used: openSUSE Backports SLE-15 (src):    obs-service-tar_scm-0.10.5.1551309990.79898c7-bp150.3.3.1 ``` [Comment 28](show_bug.cgi?id=1107507#c28)  Adrian Schröter   2020-05-15 07:59:30 UTC  ``` done ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1107507)
* - [XML](show_bug.cgi?ctype=xml&id=1107507)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1107507)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1107507)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)


