Based on the provided information, here's an analysis of the vulnerability described:

**CVE ID:** CVE-2018-8728

**Root Cause of Vulnerability:**
- The vulnerability stems from a lack of proper sanitization of user-controlled input in the "kontena master login --remote" code display. Specifically, the code parameter from the URL hash was directly written to the HTML page using `document.write` without encoding or sanitization.

**Weaknesses/Vulnerabilities Present:**
- **Cross-Site Scripting (XSS):**  The primary weakness is a DOM-based XSS vulnerability. By crafting a malicious URL with a `<script>` tag in the `code` parameter, an attacker could execute arbitrary JavaScript code within the user's browser when they visit the page.
- The use of `document.write` directly with unsanitized input is the underlying cause.

**Impact of Exploitation:**
- **Arbitrary JavaScript Execution:** An attacker can inject malicious JavaScript code.
- **Potential for Phishing:** A potential attack could involve displaying a fake login page, attempting to steal user credentials.
- Although the master doesn't have cookie authentication, the attacker may still achieve phishing attacks.

**Attack Vectors:**
- **Malicious URL:** The attacker crafts a URL that contains the malicious JavaScript payload within the `code` parameter of the URL hash (e.g., `master_url/code#code=abcd<script>alert("foo")</script>`).
- **User Interaction:** The attacker must trick the user into visiting the crafted URL.

**Required Attacker Capabilities/Position:**
- The attacker needs to be able to craft a malicious URL and trick a user into visiting it.
- No specific access to the Kontena system is needed; the vulnerability is client-side.

**Additional Information:**

- The vulnerability was fixed by replacing `document.write` with `innerText` to avoid interpreting the injected code as HTML.
- The `innerText` method sets the text content of the element and is intrinsically safe, which mitigates the XSS vulnerability.

In summary, this is a classic case of a DOM-based XSS vulnerability caused by using `document.write` with user-controlled input. The fix replaces it with a method that sanitizes the input.