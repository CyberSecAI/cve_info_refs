=== Content from github.com_beda9e4f_20250125_094204.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsenchalabs%2Fconnect%2Fcommit%2F6d5dd30075d2bc4ee97afdbbe3d9d98d8d52d74b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsenchalabs%2Fconnect%2Fcommit%2F6d5dd30075d2bc4ee97afdbbe3d9d98d8d52d74b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=senchalabs%2Fconnect)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[senchalabs](/senchalabs)
/
**[connect](/senchalabs/connect)**
Public

* [Notifications](/login?return_to=%2Fsenchalabs%2Fconnect) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Fsenchalabs%2Fconnect)
* [Star
   9.8k](/login?return_to=%2Fsenchalabs%2Fconnect)

* [Code](/senchalabs/connect)
* [Issues
  3](/senchalabs/connect/issues)
* [Pull requests
  3](/senchalabs/connect/pulls)
* [Actions](/senchalabs/connect/actions)
* [Wiki](/senchalabs/connect/wiki)
* [Security](/senchalabs/connect/security)
* [Insights](/senchalabs/connect/pulse)

Additional navigation options

* [Code](/senchalabs/connect)
* [Issues](/senchalabs/connect/issues)
* [Pull requests](/senchalabs/connect/pulls)
* [Actions](/senchalabs/connect/actions)
* [Wiki](/senchalabs/connect/wiki)
* [Security](/senchalabs/connect/security)
* [Insights](/senchalabs/connect/pulse)

## Commit

[Permalink](/senchalabs/connect/commit/6d5dd30075d2bc4ee97afdbbe3d9d98d8d52d74b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

directory: use serve-index

[Browse files](/senchalabs/connect/tree/6d5dd30075d2bc4ee97afdbbe3d9d98d8d52d74b)
Browse the repository at this point in the history

* Loading branch information

[![@dougwilson](https://avatars.githubusercontent.com/u/67512?s=40&v=4)](/dougwilson)

[dougwilson](/senchalabs/connect/commits?author=dougwilson "View all commits by dougwilson")
committed
Mar 6, 2014

1 parent
[a1f0b01](/senchalabs/connect/commit/a1f0b01a551d729a4a8acaca6a0c0bfaa7402efe)

commit 6d5dd30

 Show file tree

 Hide file tree

Showing
**87 changed files**
with
**5 additions**
and
**667 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* History.md
  [History.md](#diff-abfa5988643af1b8b2600aac13b273922dbb3372e021bf1d7caadfe7473c9561)
* lib

  + lib/index.js
    [index.js](#diff-92bbac9a308cd5fcf9db165841f2d90ce981baddcb2b1e26cfff170929af3bd1)
  + middleware

    - lib/middleware/directory.js
      [directory.js](#diff-74c652b9c348ba3ba1315dbc92d458d9cf78279c1f7b4e5842062e94a7654673)
  + public

    - lib/public/directory.html
      [directory.html](#diff-091d447269dcb2e60b98f8337d5f2515b0d4cc73adb739693647e4de11e755c2)
    - lib/public/favicon.ico
      [favicon.ico](#diff-b2d800b1dd63b5e1a50307c9f7f49f386316d82c62c114add135863c78d518be)
    - icons

      * lib/public/icons/folder.png
        [folder.png](#diff-e5e64b648a58346a2153ad62e722782f357a33dc31687fb34997d28a41f436d7)
      * lib/public/icons/page.png
        [page.png](#diff-e775c6aa3388ed33ba91f2f3785619a760fd518d6a9c09a008c09dbae65c4dc0)
      * lib/public/icons/page\_add.png
        [page\_add.png](#diff-423f21eef8167f682118145c580f8f113b9a54db4612933830ed3e963a26b124)
      * lib/public/icons/page\_attach.png
        [page\_attach.png](#diff-6afaf61b5d99f13f3d054fdb1fbae7db9f7c6849f2275a35101d57321bdadee9)
      * lib/public/icons/page\_code.png
        [page\_code.png](#diff-001d4a617c3e46025fe94a63804ed6ebcc8bc22d515d026afccb376ed7ccb6f4)
      * lib/public/icons/page\_copy.png
        [page\_copy.png](#diff-8498706847211dae485991d179cc7dec98de33cfd831c482f806d72cad5b3f3a)
      * lib/public/icons/page\_delete.png
        [page\_delete.png](#diff-1f739e3452eb280262543355d869e43b10dd801c750d56d94933166bd427386c)
      * lib/public/icons/page\_edit.png
        [page\_edit.png](#diff-c314c92baef95109dfccb7936ef3621266b6339b3d924d3f9601e855cbc4edb4)
      * lib/public/icons/page\_error.png
        [page\_error.png](#diff-96e944b2a20a3c5c381c0137b9b9e26157c7170ca768920ea5353cc112cbeb29)
      * lib/public/icons/page\_excel.png
        [page\_excel.png](#diff-63c135e409ed2ff395e18264a618ac3d5c841e18c42368b0bdb9abd8837d4657)
      * lib/public/icons/page\_find.png
        [page\_find.png](#diff-d989d1d07f56cd1af3247c51f8dfafc52d2f46214e2b40f86dd1def5015a6ec1)
      * lib/public/icons/page\_gear.png
        [page\_gear.png](#diff-3869f68ba761cf30d16f83131da8cbda44542bde195390a7e80acd43170648c8)
      * lib/public/icons/page\_go.png
        [page\_go.png](#diff-19369b4251369645679cf67fd143392adfda7d7e77712ac8c00050034274ae2c)
      * lib/public/icons/page\_green.png
        [page\_green.png](#diff-fca0131e402066220a88152c130bdfa4260d2b86f934a26388a04694f2ebf0cf)
      * lib/public/icons/page\_key.png
        [page\_key.png](#diff-fe06bd516f98e576db8c28b1ef3a6a26cdf9ff60ef1ea5542f6cdb492128c35b)
      * lib/public/icons/page\_lightning.png
        [page\_lightning.png](#diff-2517eba7b7735da409a5801ac7e108817758e7057c2fab27a5c66344b122a307)
      * lib/public/icons/page\_link.png
        [page\_link.png](#diff-1056eaf03080b710ac46c2e3ec331ea46f681d57e99483e382ce595db879af6b)
      * lib/public/icons/page\_paintbrush.png
        [page\_paintbrush.png](#diff-5cd1ce80884f4b492fdf70a67c315fcbd1d493a38402efcd9c019e65f69e1013)
      * lib/public/icons/page\_paste.png
        [page\_paste.png](#diff-177e1614b2dffc7a22aeebe976083b0eb3cafcca90c8c58645e6892cbe333344)
      * lib/public/icons/page\_red.png
        [page\_red.png](#diff-50e87b6dca5bef13dee333223654dffaf5b3c89358e1a1d29cf7f671d741fdd9)
      * lib/public/icons/page\_refresh.png
        [page\_refresh.png](#diff-f480085893df4de5d354305f3179d722bd3601ef415a3f8b49cd92a2ec4a20d2)
      * lib/public/icons/page\_save.png
        [page\_save.png](#diff-2ecb6a3c5f76c92131aaac39d0ecff29e288ac412c0ff7306d280d1bae725bd2)
      * lib/public/icons/page\_white.png
        [page\_white.png](#diff-f823f3f36c6ce6a3d1f4755a0c1c958959384a3e94c75ec1154fc55a08e40d51)
      * lib/public/icons/page\_white\_acrobat.png
        [page\_white\_acrobat.png](#diff-f7015bd2fbd75820e5ae05da686e342f89f496d94221e35bdcef711ff4192944)
      * lib/public/icons/page\_white\_actionscript.png
        [page\_white\_actionscript.png](#diff-c932faae1e9f308eafb3c11ccdfe9a130645dab7564604f7e3a0ed19c135ffea)
      * lib/public/icons/page\_white\_add.png
        [page\_white\_add.png](#diff-5b82ceefd50eb0f48ed6d979c2994ffb61de3ddb34ceb462f811d6908c0f36f0)
      * lib/public/icons/page\_white\_c.png
        [page\_white\_c.png](#diff-c4ec72afae89b1548bc73331d73f3e42f1264616349798d921886ab5b48ff035)
      * lib/public/icons/page\_white\_camera.png
        [page\_white\_camera.png](#diff-deaee9b6b84e7a47b07bd9057abd5ac1a9abb03efa87ecca010aae915a682c63)
      * lib/public/icons/page\_white\_cd.png
        [page\_white\_cd.png](#diff-280a832e1d210e839fd34e33b6a64cccfa50e8bdf1f3f4caac2930287f4ee0fd)
      * lib/public/icons/page\_white\_code.png
        [page\_white\_code.png](#diff-6d9c21b85553c2aec09aa7ffe94d49a61f4bdb6c8f96ceca69ba11c62356bd40)
      * lib/public/icons/page\_white\_code\_red.png
        [page\_white\_code\_red.png](#diff-88f338ff1571eb00df048ed663a993cc5ef654169b9c8b98f6a99ecd254aaa19)
      * lib/public/icons/page\_white\_coldfusion.png
        [page\_white\_coldfusion.png](#diff-73dc20aeddb1e605ca1af38dcc19eef215cf49d62fa7b632714503e93911c1c8)
      * lib/public/icons/page\_white\_compressed.png
        [page\_white\_compressed.png](#diff-89a931ea3232d5b72e89bc4709595f9fa1071c435fad4e256836e49fc690d399)
      * lib/public/icons/page\_white\_copy.png
        [page\_white\_copy.png](#diff-83beb893f886c7deceff3ad590eef9a8675f5b4ed00610f9b1f8d47a5e0f4be2)
      * lib/public/icons/page\_white\_cplusplus.png
        [page\_white\_cplusplus.png](#diff-e6f5116125e7cc9e1aad069f10d1690ae862d2f61a437da41e62d122f679a874)
      * lib/public/icons/page\_white\_csharp.png
        [page\_white\_csharp.png](#diff-b3be54eacd2e0bd2cafb6d69976e7ed98a80fe68956e73c676b030ea8ad29814)
      * lib/public/icons/page\_white\_cup.png
        [page\_white\_cup.png](#diff-9e221831bdf5f9c0df9d444e36ebda7ff0a15ae1333d6352e95e8043d79f1659)
      * lib/public/icons/page\_white\_database.png
        [page\_white\_database.png](#diff-930f3300b5bd2fa5427f2e4dc09d59b4412114c0d09efb930b198647f9e08d44)
      * lib/public/icons/page\_white\_delete.png
        [page\_white\_delete.png](#diff-ace62273e0d9c96c8628eba5b82689f8cb95c7227cf5ca9acc7aeb8d055dc29d)
      * lib/public/icons/page\_white\_dvd.png
        [page\_white\_dvd.png](#diff-d13ca004c1375d8d0a612af03cd5364b2a9604dc06fa131b25074d92d81f2dca)
      * lib/public/icons/page\_white\_edit.png
        [page\_white\_edit.png](#diff-4c131006f8be4c5c9f7da0a6e8b220769ca917dcbb66cd8eeb52bf04658613b6)
      * lib/public/icons/page\_white\_error.png
        [page\_white\_error.png](#diff-e25d359f588504efbf4bf8ff17d34a3f09d7a7f93616cd1d93d56456998801bc)
      * lib/public/icons/page\_white\_excel.png
        [page\_white\_excel.png](#diff-b273c69e7d82893122b52e7419ec933e76f0a8d02dba32e0f8155ae2a7fc6dda)
      * lib/public/icons/page\_white\_find.png
        [page\_white\_find.png](#diff-4cb4da8f1881833873eea4d4bca082eb2be2b5ea01b58564d9adeb5063f27fb3)
      * lib/public/icons/page\_white\_flash.png
        [page\_white\_flash.png](#diff-93dc1c190049d1651f03525659cd4ef36dc77400411715318188e936f04c2edf)
      * lib/public/icons/page\_white\_freehand.png
        [page\_white\_freehand.png](#diff-47615dcf617fa6519e57eaf3b9c58ddf5859d7ae7ce6cf1a5164a1c6502bf921)
      * lib/public/icons/page\_white\_gear.png
        [page\_white\_gear.png](#diff-aaef569456d03994e68a34475b7d843711e900659813a007eb165e2e439a0a04)
      * lib/public/icons/page\_white\_get.png
        [page\_white\_get.png](#diff-f5bc9a52de84b97f89004662bc0bc468474c33c50be518cee1c0e544ed032565)
      * lib/public/icons/page\_white\_go.png
        [page\_white\_go.png](#diff-df93950d0af79a000a87e96c507b3019edf89da72077f1f5f821c4a9626035b6)
      * lib/public/icons/page\_white\_h.png
        [page\_white\_h.png](#diff-7c502c210dc2ad3869283bb03474d37974c9a886247b57e47394acb2f36422ce)
      * lib/public/icons/page\_white\_horizontal.png
        [page\_white\_horizontal.png](#diff-7707b963a887376d6fa1bd5a006e022c20823361ac8fdf610cac8264db232088)
      * lib/public/icons/page\_white\_key.png
        [page\_white\_key.png](#diff-c8eebaffb24a932ce22a7d9f5a798dc768db32a5a8d00372f832918e9925511c)
      * lib/public/icons/page\_white\_lightning.png
        [page\_white\_lightning.png](#diff-ca379db405f1ae4f9c37cac0e3988960853bd5e3f3474b8b009c6977557b7261)
      * lib/public/icons/page\_white\_link.png
        [page\_white\_link.png](#diff-44193126536e86d8d6984cb7be398d46eb25a25227f2cb8593ca6d4631791c8b)
      * lib/public/icons/page\_white\_magnify.png
        [page\_white\_magnify.png](#diff-c25032048e145e5e882263d8bc94009dda3f099b83802808b4828ccf5085a829)
      * lib/public/icons/page\_white\_medal.png
        [page\_white\_medal.png](#diff-89597c8ebfa33728b756225dff02acd4a553a10e9118ce896aa9cc7c6deec2d8)
      * lib/public/icons/page\_white\_office.png
        [page\_white\_office.png](#diff-8834e143dc6e3317d7c84baf66da25276aee947d5a6ba1fb64cb508fdc5075fe)
      * lib/public/icons/page\_white\_paint.png
        [page\_white\_paint.png](#diff-fe133becc0c8c980f8c6204ed2c89ce887fb6ff6eef8ad068141dae0c4d94ff7)
      * lib/public/icons/page\_white\_paintbrush.png
        [page\_white\_paintbrush.png](#diff-0116b6530251de8382127943fe24194c0691eade94240de4d5bcaccc779db495)
      * lib/public/icons/page\_white\_paste.png
        [page\_white\_paste.png](#diff-e95e2783daf1881cd23494baa595263307a464f141dd225de74012017479a803)
      * lib/public/icons/page\_white\_php.png
        [page\_white\_php.png](#diff-0c3b6d8f951bcfcb9ec7eb32b7a9ba13399a7f0e8de6da436abfc85822f0ea98)
      * lib/public/icons/page\_white\_picture.png
        [page\_white\_picture.png](#diff-1fc070e400891690adff175486ff59bfaced4ca729820e46769b9e4f90343111)
      * lib/public/icons/page\_white\_powerpoint.png
        [page\_white\_powerpoint.png](#diff-a4e2c53ae514fa512377b4ec2e6f112f4376208460645d3f0475bddffb6c2325)
      * lib/public/icons/page\_white\_put.png
        [page\_white\_put.png](#diff-c60cd10544ccc7fb83596f94a5b55b7245f71c88478f3085509819a6aafa6e18)
      * lib/public/icons/page\_white\_ruby.png
        [page\_white\_ruby.png](#diff-5c23826f985c296c088f986849f05e479576e8bd988e8974dd6df39f17cfdbbb)
      * lib/public/icons/page\_white\_stack.png
        [page\_white\_stack.png](#diff-7a556cd4d8a54d3af4d64408ca4380198ab115567b597f76e1bbc8078eb18080)
      * lib/public/icons/page\_white\_star.png
        [page\_white\_star.png](#diff-3e59180363f0118e73c3ae78f320bfc97b7148a6c2b0470f260223aa4efff7c9)
      * lib/public/icons/page\_white\_swoosh.png
        [page\_white\_swoosh.png](#diff-485cc0598681fc4ba0eaaada279ae406779501e0f7b71f1f5af6c9b6f33582d0)
      * lib/public/icons/page\_white\_text.png
        [page\_white\_text.png](#diff-8607ad51708f010affa7261e0a5a4e9ba5df1bf29d93988266a887253c244549)
      * lib/public/icons/page\_white\_text\_width.png
        [page\_white\_text\_width.png](#diff-f10e46648dfd0904930a5959bccba9b68cbe4b4701bf9d8a46f3385b0a84f65d)
      * lib/public/icons/page\_white\_tux.png
        [page\_white\_tux.png](#diff-9390537d9a2c8053640e673504fa7442da5fb597f15e50ede1f676e5dc3587c9)
      * lib/public/icons/page\_white\_vector.png
        [page\_white\_vector.png](#diff-9424fd94784f5056ed090b55ffd2c6be7df1d13f739b1252745b3e39f5b2f75a)
      * lib/public/icons/page\_white\_visualstudio.png
        [page\_white\_visualstudio.png](#diff-1696ad4051555850c6492a5f6de643b182a4d5433901ca2dcc785380072094bd)
      * lib/public/icons/page\_white\_width.png
        [page\_white\_width.png](#diff-3af8c82c5b4ffdfafa65aee78cf883463c23927b5560e0a8d2d08507e803e30c)
      * lib/public/icons/page\_white\_word.png
        [page\_white\_word.png](#diff-a4c891f5b02ee4417e855acecfef7cf9b273daf516dd2e0ba670b5fd280d19e4)
      * lib/public/icons/page\_white\_world.png
        [page\_white\_world.png](#diff-eef65469cdc52852e537a136c91f45596dad6032cb5da5a11e36199a4c12a7de)
      * lib/public/icons/page\_white\_wrench.png
        [page\_white\_wrench.png](#diff-cf870bd7bf340ec0d343efb56810bcea7f982d9ad0fa6e79f8adcf181cdf7be0)
      * lib/public/icons/page\_white\_zip.png
        [page\_white\_zip.png](#diff-2b27508e8336155dc7c2dcf50d0784126b6886130cdd3d573c416c1ea0bb7c39)
      * lib/public/icons/page\_word.png
        [page\_word.png](#diff-3e1b638971ce3e3ffac9b8bbcdd1d3caf236cd7490d546a09cd11f0dc5cd5578)
      * lib/public/icons/page\_world.png
        [page\_world.png](#diff-f8c4aee5d38f6abc988c5cb8f5a89274f36cc45f64f75d8b16f719d2fa019e88)
    - lib/public/style.css
      [style.css](#diff-7c42bf432e618c97e082fd8d7e95779ba3d62094a83bf75bd0f39e93d0ab0e4e)
* package.json
  [package.json](#diff-7ae45ad102eab3b6d7e7896acd08c427a9b25b346470d7bc6507b6481575d519)

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[History.md](#diff-abfa5988643af1b8b2600aac13b273922dbb3372e021bf1d7caadfe7473c9561 "History.md")

Show comments

[View file](/senchalabs/connect/blob/6d5dd30075d2bc4ee97afdbbe3d9d98d8d52d74b/History.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -6,6 +6,7 @@ HEAD |
|  |  | \* compress: use compression |
|  |  | \* csrf: use csurf |
|  |  | \* dep: cookie-signature@1.0.3 |
|  |  | \* directory: use serve-index |
|  |  | \* errorHandler: use errorhandler |
|  |  | \* favicon: use static-favicon |
|  |  | \* logger: use morgan |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[lib/index.js](#diff-92bbac9a308cd5fcf9db165841f2d90ce981baddcb2b1e26cfff170929af3bd1 "lib/index.js")

Show comments

[View file](/senchalabs/connect/blob/6d5dd30075d2bc4ee97afdbbe3d9d98d8d52d74b/lib/index.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -23,6 +23,7 @@ |
|  |  | \* - [cookieParser](https://github.com/expressjs/cookie-parser) cookie parser |
|  |  | \* - [compress](https://github.com/expressjs/compression) Gzip compression middleware |
|  |  | \* - [csrf](https://github.com/expressjs/csurf) Cross-site request forgery protection |
|  |  | \* - [directory](https://github.com/expressjs/serve-index) directory listing middleware |
|  |  | \* - [errorHandler](https://github.com/expressjs/errorhandler) flexible error handler |
|  |  | \* - [favicon](https://github.com/expressjs/favicon) efficient favicon server (with default icon) |
|  |  | \* - [logger](https://github.com/expressjs/morgan) request logger with custom format support |
| Expand All | | @@ -38,7 +39,6 @@ |
|  |  | \* - [cookieSession](cookieSession.html) cookie-based session support |
|  |  | \* - [staticCache](staticCache.html) memory cache layer for the static() middleware |
|  |  | \* - [static](static.html) streaming static file server supporting `Range` and more |
|  |  | \* - [directory](directory.html) directory listing middleware |
|  |  | \* - [limit](limit.html) limit the bytesize of request bodies |
|  |  | \* - [query](query.html) automatic querystring parser, populating `req.query` |
|  |  | \* |
| Expand Down | |  |

327 changes: 2 additions & 325 deletions

327
[lib/middleware/directory.js](#diff-74c652b9c348ba3ba1315dbc92d458d9cf78279c1f7b4e5842062e94a7654673 "lib/middleware/directory.js")

Show comments

[View file](/senchalabs/connect/blob/6d5dd30075d2bc4ee97afdbbe3d9d98d8d52d74b/lib/middleware/directory.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -6,338 +6,15 @@ |
|  |  | \* MIT Licensed |
|  |  | \*/ |
|  |  |  |
|  |  | // TODO: arrow key navigation |
|  |  | // TODO: make icons extensible |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Module dependencies. |
|  |  | \*/ |
|  |  |  |
|  |  | var fs = require('fs') |
|  |  | , parse = require('url').parse |
|  |  | , utils = require('../utils') |
|  |  | , path = require('path') |
|  |  | , normalize = path.normalize |
|  |  | , sep = path.sep |
|  |  | , extname = path.extname |
|  |  | , join = path.join; |
|  |  | var Batch = require('batch'); |
|  |  | var Negotiator = require('negotiator'); |
|  |  |  |
|  |  | /\*! |
|  |  | \* Icon cache. |
|  |  | \*/ |
|  |  |  |
|  |  | var cache = {}; |
|  |  |  |
|  |  | /\*! |
|  |  | \* Default template. |
|  |  | \*/ |
|  |  |  |
|  |  | var defaultTemplate = join(\_\_dirname, '..', 'public', 'directory.html'); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Media types and the map for content negotiation. |
|  |  | \*/ |
|  |  |  |
|  |  | var mediaTypes = [ |
|  |  | 'text/html', |
|  |  | 'text/plain', |
|  |  | 'application/json' |
|  |  | ]; |
|  |  |  |
|  |  | var mediaType = { |
|  |  | 'text/html': 'html', |
|  |  | 'text/plain': 'plain', |
|  |  | 'application/json': 'json' |
|  |  | }; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Directory: |
|  |  | \* |
|  |  | \* Serve directory listings with the given `root` path. |
|  |  | \* |
|  |  | \* Options: |
|  |  | \* |
|  |  | \* - `hidden` display hidden (dot) files. Defaults to false. |
|  |  | \* - `icons` display icons. Defaults to false. |
|  |  | \* - `filter` Apply this filter function to files. Defaults to false. |
|  |  | \* - `template` Optional path to html template. Defaults to a built-in template. |
|  |  | \* The following tokens are replaced: |
|  |  | \* - `{directory}` with the name of the directory. |
|  |  | \* - `{files}` with the HTML of an unordered list of file links. |
|  |  | \* - `{linked-path}` with the HTML of a link to the directory. |
|  |  | \* - `{style}` with the built-in CSS and embedded images. |
|  |  | \* See [serve-index](https://github.com/expressjs/serve-index) |
|  |  | \* |
|  |  | \* @param {String} root |
|  |  | \* @param {Object} options |
|  |  | \* @return {Function} |
|  |  | \* @api public |
|  |  | \*/ |
|  |  |  |
|  |  | exports = module.exports = function directory(root, options){ |
|  |  | options = options || {}; |
|  |  |  |
|  |  | // root required |
|  |  | if (!root) throw new Error('directory() root path required'); |
|  |  | var hidden = options.hidden |
|  |  | , icons = options.icons |
|  |  | , view = options.view || 'tiles' |
|  |  | , filter = options.filter |
|  |  | , root = normalize(root + sep) |
|  |  | , template = options.template || defaultTemplate; |
|  |  |  |
|  |  | return function directory(req, res, next) { |
|  |  | if ('GET' != req.method && 'HEAD' != req.method) return next(); |
|  |  |  |
|  |  | var url = parse(req.url) |
|  |  | , dir = decodeURIComponent(url.pathname) |
|  |  | , path = normalize(join(root, dir)) |
|  |  | , originalUrl = parse(req.originalUrl) |
|  |  | , originalDir = decodeURIComponent(originalUrl.pathname) |
|  |  | , showUp = path != root; |
|  |  |  |
|  |  | // null byte(s), bad request |
|  |  | if (~path.indexOf('\0')) return next(utils.error(400)); |
|  |  |  |
|  |  | // malicious path, forbidden |
|  |  | if (0 != path.indexOf(root)) return next(utils.error(403)); |
|  |  |  |
|  |  | // check if we have a directory |
|  |  | fs.stat(path, function(err, stat){ |
|  |  | if (err) return 'ENOENT' == err.code |
|  |  | ? next() |
|  |  | : next(err); |
|  |  |  |
|  |  | if (!stat.isDirectory()) return next(); |
|  |  |  |
|  |  | // fetch files |
|  |  | fs.readdir(path, function(err, files){ |
|  |  | if (err) return next(err); |
|  |  | if (!hidden) files = removeHidden(files); |
|  |  | if (filter) files = files.filter(filter); |
|  |  | files.sort(); |
|  |  |  |
|  |  | // content-negotiation |
|  |  | var type = new Negotiator(req).preferredMediaType(mediaTypes); |
|  |  |  |
|  |  | // not acceptable |
|  |  | if (!type) return next(utils.error(406)); |
|  |  | exports[mediaType[type]](req, res, files, next, originalDir, showUp, icons, path, view, template); |
|  |  | }); |
|  |  | }); |
|  |  | }; |
|  |  | }; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Respond with text/html. |
|  |  | \*/ |
|  |  |  |
|  |  | exports.html = function(req, res, files, next, dir, showUp, icons, path, view, template){ |
|  |  | fs.readFile(template, 'utf8', function(err, str){ |
|  |  | if (err) return next(err); |
|  |  | fs.readFile(\_\_dirname + '/../public/style.css', 'utf8', function(err, style){ |
|  |  | if (err) return next(err); |
|  |  | stat(path, files, function(err, stats){ |
|  |  | if (err) return next(err); |
|  |  | files = files.map(function(file, i){ return { name: file, stat: stats[i] }; }); |
|  |  | files.sort(fileSort); |
|  |  | if (showUp) files.unshift({ name: '..' }); |
|  |  | str = str |
|  |  | .replace('{style}', style.concat(iconStyle(files, icons))) |
|  |  | .replace('{files}', html(files, dir, icons, view)) |
|  |  | .replace('{directory}', dir) |
|  |  | .replace('{linked-path}', htmlPath(dir)); |
|  |  | res.setHeader('Content-Type', 'text/html'); |
|  |  | res.setHeader('Content-Length', str.length); |
|  |  | res.end(str); |
|  |  | }); |
|  |  | }); |
|  |  | }); |
|  |  | }; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Respond with application/json. |
|  |  | \*/ |
|  |  |  |
|  |  | exports.json = function(req, res, files){ |
|  |  | files = JSON.stringify(files); |
|  |  | res.setHeader('Content-Type', 'application/json'); |
|  |  | res.setHeader('Content-Length', files.length); |
|  |  | res.end(files); |
|  |  | }; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Respond with text/plain. |
|  |  | \*/ |
|  |  |  |
|  |  | exports.plain = function(req, res, files){ |
|  |  | files = files.join('\n') + '\n'; |
|  |  | res.setHeader('Content-Type', 'text/plain'); |
|  |  | res.setHeader('Content-Length', files.length); |
|  |  | res.end(files); |
|  |  | }; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Sort function for with directories first. |
|  |  | \*/ |
|  |  |  |
|  |  | function fileSort(a, b) { |
|  |  | return Number(b.stat && b.stat.isDirectory()) - Number(a.stat && a.stat.isDirectory()) || |
|  |  | String(a.name).toLocaleLowerCase().localeCompare(String(b.name).toLocaleLowerCase()); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Map html `dir`, returning a linked path. |
|  |  | \*/ |
|  |  |  |
|  |  | function htmlPath(dir) { |
|  |  | var curr = []; |
|  |  | return dir.split('/').map(function(part){ |
|  |  | curr.push(encodeURIComponent(part)); |
|  |  | return part ? '<a href="' + curr.join('/') + '">' + part + '</a>' : ''; |
|  |  | }).join(' / '); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Load icon images, return css string. |
|  |  | \*/ |
|  |  |  |
|  |  | function iconStyle (files, useIcons) { |
|  |  | if (!useIcons) return ''; |
|  |  | var data = {}; |
|  |  | var views = { tiles: [], details: [], mobile: [] }; |
|  |  |  |
|  |  | for (var i=0; i < files.length; i++) { |
|  |  | var file = files[i]; |
|  |  | if (file.name == '..') continue; |
|  |  |  |
|  |  | var isDir = '..' == file.name || (file.stat && file.stat.isDirectory()); |
|  |  | var icon = isDir ? icons.folder : icons[extname(file.name)] || icons.default; |
|  |  |  |
|  |  | var ext = extname(file.name); |
|  |  | ext = isDir ? '.directory' : (icons[ext] ? ext : '.default'); |
|  |  |  |
|  |  | if (data[icon]) continue; |
|  |  | data[icon] = ext + ' .name{background-image: url(data:image/png;base64,' + load(icon)+');}'; |
|  |  | views.tiles.push('.view-tiles ' + data[icon]); |
|  |  | views.details.push('.view-details ' + data[icon]); |
|  |  | views.mobile.push('#files ' + data[icon]); |
|  |  | } |
|  |  |  |
|  |  | var style = views.tiles.join('\n') |
|  |  | + '\n'+views.details.join('\n') |
|  |  | + '\n@media (max-width: 768px) {\n\t' |
|  |  | + views.mobile.join('\n\t') |
|  |  | + '\n}'; |
|  |  | return style; |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Map html `files`, returning an html unordered list. |
|  |  | \*/ |
|  |  |  |
|  |  | function html(files, dir, useIcons, view) { |
|  |  | return '<ul id="files" class="view-'+view+'">' |
|  |  | + (view == 'details' ? ( |
|  |  | '<li class="header">' |
|  |  | + '<span class="name">Name</span>' |
|  |  | + '<span class="size">Size</span>' |
|  |  | + '<span class="date">Modified</span>' |
|  |  | + '</li>') : '') |
|  |  | + files.map(function(file){ |
|  |  | var isDir |
|  |  | , classes = [] |
|  |  | , path = dir.split('/').map(function (c) { return encodeURIComponent(c); }); |
|  |  |  |
|  |  | if (useIcons) { |
|  |  | var ext = extname(file.name); |
|  |  | isDir = '..' == file.name || (file.stat && file.stat.isDirectory()); |
|  |  | ext = isDir ? '.directory' : (icons[ext] ? ext : '.default'); |
|  |  | classes.push('icon'); |
|  |  | classes.push(ext.replace('.','')); |
|  |  | } |
|  |  |  |
|  |  | path.push(encodeURIComponent(file.name)); |
|  |  |  |
|  |  | var date = file.name == '..' ? '' |
|  |  | : file.stat.mtime.toDateString()+' '+file.stat.mtime.toLocaleTimeString(); |
|  |  | var size = file.name == '..' ? '' : file.stat.size; |
|  |  |  |
|  |  | return '<li><a href="' |
|  |  | + utils.normalizeSlashes(normalize(path.join('/'))) |
|  |  | + '" class="' |
|  |  | + classes.join(' ') + '"' |
|  |  | + ' title="' + file.name + '">' |
|  |  | + '<span class="name">'+file.name+'</span>' |
|  |  | + '<span class="size">'+size+'</span>' |
|  |  | + '<span class="date">'+date+'</span>' |
|  |  | + '</a></li>'; |
|  |  |  |
|  |  | }).join('\n') + '</ul>'; |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Load and cache the given `icon`. |
|  |  | \* |
|  |  | \* @param {String} icon |
|  |  | \* @return {String} |
|  |  | \* @api private |
|  |  | \*/ |
|  |  |  |
|  |  | function load(icon) { |
|  |  | if (cache[icon]) return cache[icon]; |
|  |  | return cache[icon] = fs.readFileSync(\_\_dirname + '/../public/icons/' + icon, 'base64'); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Filter "hidden" `files`, aka files |
|  |  | \* beginning with a `.`. |
|  |  | \* |
|  |  | \* @param {Array} files |
|  |  | \* @return {Array} |
|  |  | \* @api private |
|  |  | \*/ |
|  |  |  |
|  |  | function removeHidden(files) { |
|  |  | return files.filter(function(file){ |
|  |  | return '.' != file[0]; |
|  |  | }); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Stat all files and return array of stat |
|  |  | \* in same order. |
|  |  | \*/ |
|  |  |  |
|  |  | function stat(dir, files, cb) { |
|  |  | var batch = new Batch(); |
|  |  |  |
|  |  | batch.concurrency(10); |
|  |  |  |
|  |  | files.forEach(function(file, i){ |
|  |  | batch.push(function(done){ |
|  |  | fs.stat(join(dir, file), done); |
|  |  | }); |
|  |  | }); |
|  |  |  |
|  |  | batch.end(cb); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Icon map. |
|  |  | \*/ |
|  |  |  |
|  |  | var icons = { |
|  |  | '.js': 'page\_white\_code\_red.png' |
|  |  | , '.c': 'page\_white\_c.png' |
|  |  | , '.h': 'page\_white\_h.png' |
|  |  | , '.cc': 'page\_white\_cplusplus.png' |
|  |  | , '.php': 'page\_white\_php.png' |
|  |  | , '.rb': 'page\_white\_ruby.png' |
|  |  | , '.cpp': 'page\_white\_cplusplus.png' |
|  |  | , '.swf': 'page\_white\_flash.png' |
|  |  | , '.pdf': 'page\_white\_acrobat.png' |
|  |  | , 'folder': 'folder.png' |
|  |  | , 'default': 'page\_white.png' |
|  |  | }; |
|  |  | module.exports = require('serve-index'); |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `6d5dd30`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsenchalabs%2Fconnect%2Fcommit%2F6d5dd30075d2bc4ee97afdbbe3d9d98d8d52d74b) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


