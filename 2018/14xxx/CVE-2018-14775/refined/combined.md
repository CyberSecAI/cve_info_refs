=== Content from cvsweb.openbsd.org_c5aed192_20250125_063305.html ===


[![OpenBSD CVS](/icons/smalltitle.gif)](http://www.openbsd.org/)

## CVS log for src/sys/arch/i386/i386/gdt.c

---

[![[BACK]](/icons/back.gif)](/cgi-bin/cvsweb/src/sys/arch/i386/i386/#gdt.c) **Up to [[local]](/cgi-bin/cvsweb/#dirlist) / [src](/cgi-bin/cvsweb/src/#dirlist) / [sys](/cgi-bin/cvsweb/src/sys/#dirlist) / [arch](/cgi-bin/cvsweb/src/sys/arch/#dirlist) / [i386](/cgi-bin/cvsweb/src/sys/arch/i386/#dirlist) / [i386](/cgi-bin/cvsweb/src/sys/arch/i386/i386/#dirlist)**

[Request diff between arbitrary revisions](#diff)

---

Default branch: MAIN

---

Revision [**1.44**](gdt.c?rev=1.44&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.44&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.44) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.44), *Mon Jan 30 10:49:05 2023 UTC* (23 months, 3 weeks ago) by *jsg*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_7\_6\_BASE](./gdt.c?only_with_tag=OPENBSD_7_6_BASE),
[OPENBSD\_7\_6](./gdt.c?only_with_tag=OPENBSD_7_6),
[OPENBSD\_7\_5\_BASE](./gdt.c?only_with_tag=OPENBSD_7_5_BASE),
[OPENBSD\_7\_5](./gdt.c?only_with_tag=OPENBSD_7_5),
[OPENBSD\_7\_4\_BASE](./gdt.c?only_with_tag=OPENBSD_7_4_BASE),
[OPENBSD\_7\_4](./gdt.c?only_with_tag=OPENBSD_7_4),
[OPENBSD\_7\_3\_BASE](./gdt.c?only_with_tag=OPENBSD_7_3_BASE),
[OPENBSD\_7\_3](./gdt.c?only_with_tag=OPENBSD_7_3),
[HEAD](./gdt.c?only_with_tag=HEAD)**
Changes since **1.43: +1 -5 lines**
Diff to previous [1.43](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.43&r2=1.44) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.43&r2=1.44&f=h))

```

remove unneeded includes in arch/i386
ok krw@ miod@

```

---

Revision [**1.37.8.1**](gdt.c?rev=1.37.8.1&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.37.8.1&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.37.8.1) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.37.8.1), *Mon Jul 30 04:26:18 2018 UTC* (6 years, 5 months ago) by *guenther*

Branch: **[OPENBSD\_6\_2](./gdt.c?only_with_tag=OPENBSD_6_2)**

Changes since **1.37: +2 -2 lines**
Diff to previous [1.37](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.37&r2=1.37.8.1) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.37&r2=1.37.8.1&f=h)) next main [1.38](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.38&r2=1.37.8.1) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.38&r2=1.37.8.1&f=h))

```

Correct the TSS limit to be just the size of the i386tss struct itself now
that the pcb_iomap array is gone.

crash reported by Thomas Barabosch (thomas.barabosch(at)fkie.fraunhofer.de)
problem with TSS sizing noted by Michal Necasek (mnecasek(at)yahoo.com)

ok deraadt@ mlarkin@

```

---

Revision [**1.39.2.1**](gdt.c?rev=1.39.2.1&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.39.2.1&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.39.2.1) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.39.2.1), *Mon Jul 30 04:25:57 2018 UTC* (6 years, 5 months ago) by *guenther*

Branch: **[OPENBSD\_6\_3](./gdt.c?only_with_tag=OPENBSD_6_3)**

Changes since **1.39: +2 -2 lines**
Diff to previous [1.39](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.39&r2=1.39.2.1) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.39&r2=1.39.2.1&f=h)) next main [1.40](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.40&r2=1.39.2.1) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.40&r2=1.39.2.1&f=h))

```

Correct the TSS limit to be just the size of the i386tss struct itself now
that the pcb_iomap array is gone.

crash reported by Thomas Barabosch (thomas.barabosch(at)fkie.fraunhofer.de)
problem with TSS sizing noted by Michal Necasek (mnecasek(at)yahoo.com)

ok deraadt@ mlarkin@

```

---

Revision [**1.43**](gdt.c?rev=1.43&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.43&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.43) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.43), *Fri Jun 22 13:21:14 2018 UTC* (6 years, 7 months ago) by *bluhm*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_7\_2\_BASE](./gdt.c?only_with_tag=OPENBSD_7_2_BASE),
[OPENBSD\_7\_2](./gdt.c?only_with_tag=OPENBSD_7_2),
[OPENBSD\_7\_1\_BASE](./gdt.c?only_with_tag=OPENBSD_7_1_BASE),
[OPENBSD\_7\_1](./gdt.c?only_with_tag=OPENBSD_7_1),
[OPENBSD\_7\_0\_BASE](./gdt.c?only_with_tag=OPENBSD_7_0_BASE),
[OPENBSD\_7\_0](./gdt.c?only_with_tag=OPENBSD_7_0),
[OPENBSD\_6\_9\_BASE](./gdt.c?only_with_tag=OPENBSD_6_9_BASE),
[OPENBSD\_6\_9](./gdt.c?only_with_tag=OPENBSD_6_9),
[OPENBSD\_6\_8\_BASE](./gdt.c?only_with_tag=OPENBSD_6_8_BASE),
[OPENBSD\_6\_8](./gdt.c?only_with_tag=OPENBSD_6_8),
[OPENBSD\_6\_7\_BASE](./gdt.c?only_with_tag=OPENBSD_6_7_BASE),
[OPENBSD\_6\_7](./gdt.c?only_with_tag=OPENBSD_6_7),
[OPENBSD\_6\_6\_BASE](./gdt.c?only_with_tag=OPENBSD_6_6_BASE),
[OPENBSD\_6\_6](./gdt.c?only_with_tag=OPENBSD_6_6),
[OPENBSD\_6\_5\_BASE](./gdt.c?only_with_tag=OPENBSD_6_5_BASE),
[OPENBSD\_6\_5](./gdt.c?only_with_tag=OPENBSD_6_5),
[OPENBSD\_6\_4\_BASE](./gdt.c?only_with_tag=OPENBSD_6_4_BASE),
[OPENBSD\_6\_4](./gdt.c?only_with_tag=OPENBSD_6_4)**
Changes since **1.42: +3 -1 lines**
Diff to previous [1.42](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.42&r2=1.43) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.42&r2=1.43&f=h))

```

Finish the last missing piece for the i386 meltdown fix:
- handle protection fault on iret properly
- handle NMI
- actually enable U-K in pmap_switch()
from hshoexer@; input guenther@; OK mlarkin@ deraadt@

```

---

Revision [**1.42**](gdt.c?rev=1.42&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.42&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.42) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.42), *Mon May 28 20:52:44 2018 UTC* (6 years, 8 months ago) by *bluhm*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.41: +1 -2 lines**
Diff to previous [1.41](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.41&r2=1.42) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.41&r2=1.42&f=h))

```

More steps for i386 Meltdown fix:
- name gdt explicitly in struct cpu_info_full
- identfiy ARCH_CAPABILITIES_RDCL_NO and print in identifycpu()
- in pmap.c build U-K table, handle PG_G accordingly
- in pmap_switch() do not unmap the kernel, yet; but all pieces
  are in place
- pmapae.c: on boostrap transfer pmap to pmapae tables, build
  U-K table and wire it, handle PG_G
from hshoexer@; OK mlarkin@

```

---

Revision [**1.41**](gdt.c?rev=1.41&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.41&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.41) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.41), *Wed Apr 11 15:44:08 2018 UTC* (6 years, 9 months ago) by *bluhm*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.40: +10 -85 lines**
Diff to previous [1.40](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.40&r2=1.41) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.40&r2=1.41&f=h))

```

More steps for i386 Meltdown fix:

- provide struct cpu_info_full
- prepare K-U sections
- reorganize interrupt, trap, syscall entry to use K-U trampoline
- prepare pmap for entering special mappings, the mappings are not
  setup yet

This code will already trigger performance issues.  We do more tlb
flushes, but we do not unmap the kernel yet.  The latter
will be needed to prevent Meltdown.

from hshoexer@; input guenther@; OK mlarkin@ deraadt@

```

---

Revision [**1.40**](gdt.c?rev=1.40&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.40&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.40) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.40), *Sat Mar 31 13:45:03 2018 UTC* (6 years, 9 months ago) by *bluhm*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.39: +26 -49 lines**
Diff to previous [1.39](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.39&r2=1.40) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.39&r2=1.40&f=h))

```

Recommit preparation for i386 Meltdown fix after OpenBSD 6.3 release.

- provide a cpu_softc for cpu_attach() etc.
- replace per PCB TSS with per CPU TSS

The first change prepares for cpu_info being embedded in a
cpu_full_info.  Therefore during autoconf/cpu_attach we hand down
a softc.

The second change removes the per PCB TSS.  We now have one TSS per
CPU, thus in cpu_switchto() we only have to patch the ring 0 stack
pointer instead of loading a new TSS.  This also allows for cleaning
up the GDT, so we only have a single slot for the TSS.

from hshoexer@; OK deraadt@

```

---

Revision [**1.39**](gdt.c?rev=1.39&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.39&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.39) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.39), *Thu Mar 22 19:30:18 2018 UTC* (6 years, 10 months ago) by *bluhm*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_6\_3\_BASE](./gdt.c?only_with_tag=OPENBSD_6_3_BASE)**
Branch point for: **[OPENBSD\_6\_3](./gdt.c?only_with_tag=OPENBSD_6_3)**

Changes since **1.38: +49 -26 lines**
Diff to previous [1.38](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.38&r2=1.39) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.38&r2=1.39&f=h))

```

iBackout the preparations for fixing Meltdown on i386.  The task was
only halfway done and the current state does not help anybody.  For
OpenBSD 6.3 release go back to the original code before 2018/03/13.
This gives us a stable release and the changes will come back later.
discussed with guenther@ deraadt@ hshoexer@

```

---

Revision [**1.38**](gdt.c?rev=1.38&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.38&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.38) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.38), *Tue Mar 13 13:51:05 2018 UTC* (6 years, 10 months ago) by *bluhm*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.37: +26 -49 lines**
Diff to previous [1.37](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.37&r2=1.38) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.37&r2=1.38&f=h))

```

Preparation for i386 Meltdown fix:

- provide a cpu_softc for cpu_attach() etc.
- replace per PCB TSS with per CPU TSS

The first change prepares for cpu_info being embedded in a
cpu_full_info.  Therefore during autoconf/cpu_attach we hand down
a softc.

The second change removes the per PCB TSS.  We now have one TSS per
CPU, thus in cpu_switchto() we only have to patch the ring 0 stack
pointer instead of loading a new TSS.  This also allows for cleaning
up the GDT, so we only have a single slot for the TSS.

from hshoexer@;  OK deraadt@

```

---

Revision [**1.37**](gdt.c?rev=1.37&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.37&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.37) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.37), *Mon Mar 7 05:32:46 2016 UTC* (8 years, 10 months ago) by *naddy*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_6\_2\_BASE](./gdt.c?only_with_tag=OPENBSD_6_2_BASE),
[OPENBSD\_6\_1\_BASE](./gdt.c?only_with_tag=OPENBSD_6_1_BASE),
[OPENBSD\_6\_1](./gdt.c?only_with_tag=OPENBSD_6_1),
[OPENBSD\_6\_0\_BASE](./gdt.c?only_with_tag=OPENBSD_6_0_BASE),
[OPENBSD\_6\_0](./gdt.c?only_with_tag=OPENBSD_6_0)**
Branch point for: **[OPENBSD\_6\_2](./gdt.c?only_with_tag=OPENBSD_6_2)**

Changes since **1.36: +3 -3 lines**
Diff to previous [1.36](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.36&r2=1.37) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.36&r2=1.37&f=h))

```

Sync no-argument function declaration and definition by adding (void).
ok mlarkin@ deraadt@

```

---

Revision [**1.36**](gdt.c?rev=1.36&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.36&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.36) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.36), *Thu Mar 3 12:41:30 2016 UTC* (8 years, 10 months ago) by *naddy*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.35: +1 -26 lines**
Diff to previous [1.35](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.35&r2=1.36) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.35&r2=1.36&f=h))

```

Remove option USER_LDT and everything depending on it.
Remove machdep.userldt sysctl.
Remove i386_[gs]et_ldt syscall stub from libi386.
Remove i386_[gs]et_ldt regression test.

ok mlarkin@ millert@ guenther@

```

---

Revision [**1.35**](gdt.c?rev=1.35&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.35&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.35) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.35), *Wed Feb 11 05:54:48 2015 UTC* (9 years, 11 months ago) by *dlg*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_5\_9\_BASE](./gdt.c?only_with_tag=OPENBSD_5_9_BASE),
[OPENBSD\_5\_9](./gdt.c?only_with_tag=OPENBSD_5_9),
[OPENBSD\_5\_8\_BASE](./gdt.c?only_with_tag=OPENBSD_5_8_BASE),
[OPENBSD\_5\_8](./gdt.c?only_with_tag=OPENBSD_5_8),
[OPENBSD\_5\_7\_BASE](./gdt.c?only_with_tag=OPENBSD_5_7_BASE),
[OPENBSD\_5\_7](./gdt.c?only_with_tag=OPENBSD_5_7)**
Changes since **1.34: +1 -2 lines**
Diff to previous [1.34](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.34&r2=1.35) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.34&r2=1.35&f=h))

```

deprecate use of sys/lock.h and replace it with sys/atomic.h or
machine/lock.h as appropriate.

```

---

Revision [**1.34**](gdt.c?rev=1.34&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.34&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.34) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.34), *Sun Nov 16 12:30:57 2014 UTC* (10 years, 2 months ago) by *deraadt*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.33: +3 -3 lines**
Diff to previous [1.33](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.33&r2=1.34) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.33&r2=1.34&f=h))

```

Replace a plethora of historical protection options with just
PROT_NONE, PROT_READ, PROT_WRITE, and PROT_EXEC from mman.h.
PROT_MASK is introduced as the one true way of extracting those bits.
Remove UVM_ADV_* wrapper, using the standard names.
ok doug guenther kettenis

```

---

Revision [**1.33**](gdt.c?rev=1.33&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.33&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.33) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.33), *Sun Sep 14 14:17:23 2014 UTC* (10 years, 4 months ago) by *jsg*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.32: +1 -2 lines**
Diff to previous [1.32](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.32&r2=1.33) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.32&r2=1.33&f=h))

```

remove uneeded proc.h includes
ok mpi@ kspillner@

```

---

Revision [**1.32**](gdt.c?rev=1.32&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.32&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.32) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.32), *Tue Apr 1 09:05:03 2014 UTC* (10 years, 9 months ago) by *mpi*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_5\_6\_BASE](./gdt.c?only_with_tag=OPENBSD_5_6_BASE),
[OPENBSD\_5\_6](./gdt.c?only_with_tag=OPENBSD_5_6)**
Changes since **1.31: +2 -2 lines**
Diff to previous [1.31](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.31&r2=1.32) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.31&r2=1.32&f=h))

```

More <uvm/uvm.h> -> <uvm/uvm_extern.h> cleaning.

ok kettenis@, deraadt@

```

---

Revision [**1.31**](gdt.c?rev=1.31&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.31&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.31) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.31), *Wed Dec 5 23:20:12 2012 UTC* (12 years, 1 month ago) by *deraadt*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_5\_5\_BASE](./gdt.c?only_with_tag=OPENBSD_5_5_BASE),
[OPENBSD\_5\_5](./gdt.c?only_with_tag=OPENBSD_5_5),
[OPENBSD\_5\_4\_BASE](./gdt.c?only_with_tag=OPENBSD_5_4_BASE),
[OPENBSD\_5\_4](./gdt.c?only_with_tag=OPENBSD_5_4),
[OPENBSD\_5\_3\_BASE](./gdt.c?only_with_tag=OPENBSD_5_3_BASE),
[OPENBSD\_5\_3](./gdt.c?only_with_tag=OPENBSD_5_3)**
Changes since **1.30: +1 -3 lines**
Diff to previous [1.30](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.30&r2=1.31) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.30&r2=1.31&f=h))

```

Remove excessive sys/cdefs.h inclusion
ok guenther millert kettenis

```

---

Revision [**1.30**](gdt.c?rev=1.30&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.30&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.30) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.30), *Sat Jun 26 23:24:43 2010 UTC* (14 years, 7 months ago) by *guenther*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_5\_2\_BASE](./gdt.c?only_with_tag=OPENBSD_5_2_BASE),
[OPENBSD\_5\_2](./gdt.c?only_with_tag=OPENBSD_5_2),
[OPENBSD\_5\_1\_BASE](./gdt.c?only_with_tag=OPENBSD_5_1_BASE),
[OPENBSD\_5\_1](./gdt.c?only_with_tag=OPENBSD_5_1),
[OPENBSD\_5\_0\_BASE](./gdt.c?only_with_tag=OPENBSD_5_0_BASE),
[OPENBSD\_5\_0](./gdt.c?only_with_tag=OPENBSD_5_0),
[OPENBSD\_4\_9\_BASE](./gdt.c?only_with_tag=OPENBSD_4_9_BASE),
[OPENBSD\_4\_9](./gdt.c?only_with_tag=OPENBSD_4_9),
[OPENBSD\_4\_8\_BASE](./gdt.c?only_with_tag=OPENBSD_4_8_BASE),
[OPENBSD\_4\_8](./gdt.c?only_with_tag=OPENBSD_4_8)**
Changes since **1.29: +2 -2 lines**
Diff to previous [1.29](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.29&r2=1.30) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.29&r2=1.30&f=h))

```

Don't #include <sys/user.h> into files that don't need the stuff
it defines.  In some cases, this means pulling in uvm.h or pcb.h
instead, but most of the inclusions were just noise.  Tested on
alpha, amd64, armish, hppa, i386, macpcc, sgi, sparc64, and vax,
mostly by krw and naddy.
ok krw@

```

---

Revision [**1.29**](gdt.c?rev=1.29&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.29&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.29) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.29), *Tue Feb 3 11:24:19 2009 UTC* (15 years, 11 months ago) by *mikeb*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_4\_7\_BASE](./gdt.c?only_with_tag=OPENBSD_4_7_BASE),
[OPENBSD\_4\_7](./gdt.c?only_with_tag=OPENBSD_4_7),
[OPENBSD\_4\_6\_BASE](./gdt.c?only_with_tag=OPENBSD_4_6_BASE),
[OPENBSD\_4\_6](./gdt.c?only_with_tag=OPENBSD_4_6),
[OPENBSD\_4\_5\_BASE](./gdt.c?only_with_tag=OPENBSD_4_5_BASE),
[OPENBSD\_4\_5](./gdt.c?only_with_tag=OPENBSD_4_5)**
Changes since **1.28: +32 -82 lines**
Diff to previous [1.28](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.28&r2=1.29) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.28&r2=1.29&f=h))

```

Free TSS on the stack of the dead process.

In order to do that we have to remove all sleeping parts: sleeping
memory allocation and a sleeping lock.  Thus we're moving this code
to the spinning lock (mutex) and getting rid of the GDT grow code.
Downside is that now we're pre-allocating 64kb of memory per CPU
from the start, but this might be optimized in future.

This also unifies GDT code and MAXGDTSIZ define across i386 and amd64.

With help from mickey.

ok toby, art

```

---

Revision [**1.28**](gdt.c?rev=1.28&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.28&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.28) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.28), *Thu Jun 26 05:42:10 2008 UTC* (16 years, 7 months ago) by *ray*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_4\_4\_BASE](./gdt.c?only_with_tag=OPENBSD_4_4_BASE),
[OPENBSD\_4\_4](./gdt.c?only_with_tag=OPENBSD_4_4)**
Changes since **1.27: +1 -8 lines**
Diff to previous [1.27](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.27&r2=1.28) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.27&r2=1.28&f=h))

```

First pass at removing clauses 3 and 4 from NetBSD licenses.

Not sure what's more surprising: how long it took for NetBSD to
catch up to the rest of the BSDs (including UCB), or the amount of
code that NetBSD has claimed for itself without attributing to the
actual authors.

OK deraadt@

```

---

Revision [**1.27**](gdt.c?rev=1.27&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.27&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.27) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.27), *Mon Jul 2 17:11:29 2007 UTC* (17 years, 6 months ago) by *thib*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_4\_3\_BASE](./gdt.c?only_with_tag=OPENBSD_4_3_BASE),
[OPENBSD\_4\_3](./gdt.c?only_with_tag=OPENBSD_4_3),
[OPENBSD\_4\_2\_BASE](./gdt.c?only_with_tag=OPENBSD_4_2_BASE),
[OPENBSD\_4\_2](./gdt.c?only_with_tag=OPENBSD_4_2)**
Changes since **1.26: +14 -21 lines**
Diff to previous [1.26](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.26&r2=1.27) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.26&r2=1.27&f=h))

```

replace two lockmgr lock with rwlocks.

been in snaps for a week, no objection
from deraadt@ for putting this in.
ok tom@ (for gdt)

```

---

Revision [**1.26**](gdt.c?rev=1.26&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.26&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.26) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.26), *Thu May 17 15:00:02 2007 UTC* (17 years, 8 months ago) by *art*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.25: +4 -8 lines**
Diff to previous [1.25](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.25&r2=1.26) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.25&r2=1.26&f=h))

```

There's no reason to keep track of gdt_count, we only use it for
copying the intial gdt when spinning up secondary cpus and then
we can simply use gdt_size for that.

From mickey, art@ ok

```

---

Revision [**1.25**](gdt.c?rev=1.25&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.25&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.25) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.25), *Wed May 9 04:59:41 2007 UTC* (17 years, 8 months ago) by *deraadt*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.24: +3 -1 lines**
Diff to previous [1.24](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.24&r2=1.25) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.24&r2=1.25&f=h))

```

only supply ldt_alloc() and ldt_free() if USER_LDT

```

---

Revision [**1.24**](gdt.c?rev=1.24&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.24&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.24) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.24), *Sat Nov 19 02:18:00 2005 UTC* (19 years, 2 months ago) by *pedro*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_4\_1\_BASE](./gdt.c?only_with_tag=OPENBSD_4_1_BASE),
[OPENBSD\_4\_1](./gdt.c?only_with_tag=OPENBSD_4_1),
[OPENBSD\_4\_0\_BASE](./gdt.c?only_with_tag=OPENBSD_4_0_BASE),
[OPENBSD\_4\_0](./gdt.c?only_with_tag=OPENBSD_4_0),
[OPENBSD\_3\_9\_BASE](./gdt.c?only_with_tag=OPENBSD_3_9_BASE),
[OPENBSD\_3\_9](./gdt.c?only_with_tag=OPENBSD_3_9)**
Changes since **1.23: +3 -4 lines**
Diff to previous [1.23](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.23&r2=1.24) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.23&r2=1.24&f=h))

```

Remove unnecessary lockmgr() archaism that was costing too much in terms
of panics and bugfixes. Access curproc directly, do not expect a process
pointer as an argument. Should fix many "process context required" bugs.
Incentive and okay millert@, okay marc@. Various testing, thanks.

```

---

Revision [**1.23**](gdt.c?rev=1.23&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.23&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.23) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.23), *Sun Sep 25 20:48:21 2005 UTC* (19 years, 4 months ago) by *miod*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.22: +3 -3 lines**
Diff to previous [1.22](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.22&r2=1.23) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.22&r2=1.23&f=h))

```

Turn CPU_INFO_FOREACH into a real construct, like all [queue(3)](http://man.OpenBSD.org/queue.3) iterators,
instead of the contents of a for() loop. No functional change.
From the m88k SMP tree; ok art@ deraadt@

[complete diff this time]

```

---

Revision [**1.22**](gdt.c?rev=1.22&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.22&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.22) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.22), *Mon Dec 6 23:40:43 2004 UTC* (20 years, 1 month ago) by *hshoexer*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_3\_8\_BASE](./gdt.c?only_with_tag=OPENBSD_3_8_BASE),
[OPENBSD\_3\_8](./gdt.c?only_with_tag=OPENBSD_3_8),
[OPENBSD\_3\_7\_BASE](./gdt.c?only_with_tag=OPENBSD_3_7_BASE),
[OPENBSD\_3\_7](./gdt.c?only_with_tag=OPENBSD_3_7)**
Changes since **1.21: +3 -3 lines**
Diff to previous [1.21](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.21&r2=1.22) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.21&r2=1.22&f=h))

```

set granularity for data segment used for struct cpu_info to bytes.
ok mickey deraadt tedu niklas

```

---

Revision [**1.21**](gdt.c?rev=1.21&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.21&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.21) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.21), *Sun Jun 13 21:49:15 2004 UTC* (20 years, 7 months ago) by *niklas*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_3\_6\_BASE](./gdt.c?only_with_tag=OPENBSD_3_6_BASE),
[OPENBSD\_3\_6](./gdt.c?only_with_tag=OPENBSD_3_6)**
Changes since **1.20: +149 -63 lines**
Diff to previous [1.20](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.20&r2=1.21) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.20&r2=1.21&f=h))

```

debranch SMP, have fun

```

---

Revision [**1.11.6.11**](gdt.c?rev=1.11.6.11&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.11&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.11) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.11), *Tue Jun 8 21:30:30 2004 UTC* (20 years, 7 months ago) by *grange*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.10: +3 -1 lines**
Diff to previous [1.11.6.10](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.10&r2=1.11.6.11) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.10&r2=1.11.6.11&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.11) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.11&f=h)) next main [1.12](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.12&r2=1.11.6.11) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.12&r2=1.11.6.11&f=h))

```

gdt_alloc_cpu() is SMP-only, save space on install media.

ok niklas@ deraadt@

```

---

Revision [**1.11.6.10**](gdt.c?rev=1.11.6.10&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.10&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.10) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.10), *Sat Jun 5 23:08:59 2004 UTC* (20 years, 7 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.9: +5 -2 lines**
Diff to previous [1.11.6.9](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.9&r2=1.11.6.10) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.9&r2=1.11.6.10&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.10) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.10&f=h))

```

Merge with the trunk

```

---

Revision [**1.11.6.9**](gdt.c?rev=1.11.6.9&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.9&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.9) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.9), *Thu Feb 19 10:48:41 2004 UTC* (20 years, 11 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.8: +1 -2 lines**
Diff to previous [1.11.6.8](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.8&r2=1.11.6.9) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.8&r2=1.11.6.9&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.9) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.9&f=h))

```

Merge of current from two weeks agointo the SMP branch

```

---

Revision [**1.20**](gdt.c?rev=1.20&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.20&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.20) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.20), *Sat Nov 8 05:38:33 2003 UTC* (21 years, 2 months ago) by *nordin*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[SMP\_SYNC\_B](./gdt.c?only_with_tag=SMP_SYNC_B),
[SMP\_SYNC\_A](./gdt.c?only_with_tag=SMP_SYNC_A),
[OPENBSD\_3\_5\_BASE](./gdt.c?only_with_tag=OPENBSD_3_5_BASE),
[OPENBSD\_3\_5](./gdt.c?only_with_tag=OPENBSD_3_5)**
Changes since **1.19: +9 -88 lines**
Diff to previous [1.19](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.19&r2=1.20) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.19&r2=1.20&f=h))

```

Remove compacting garbage collector. Fixes PR #3528.
Tested by henning@ and frisco@blackant.ne.
ok mickey@, niklas@, and weingart@

```

---

Revision [**1.11.6.8**](gdt.c?rev=1.11.6.8&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.8&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.8) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.8), *Thu May 15 04:08:01 2003 UTC* (21 years, 8 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.7: +144 -139 lines**
Diff to previous [1.11.6.7](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.7&r2=1.11.6.8) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.7&r2=1.11.6.8&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.8) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.8&f=h))

```

Biglock!  Most of the logic
comes from NetBSD.
Also a lot of fixes, enough to get a dual cpu machine actually run MP for a
very short while (we are just talking about seconds) before starving out one
of the cpus.  More coming very soon.

```

---

Revision [**1.11.6.7**](gdt.c?rev=1.11.6.7&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.7&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.7) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.7), *Fri Apr 11 16:12:56 2003 UTC* (21 years, 9 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.6: +8 -10 lines**
Diff to previous [1.11.6.6](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.6&r2=1.11.6.7) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.6&r2=1.11.6.7&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.7) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.7&f=h))

```

Move TSS selector from the PCB to MD part of proc and to cpu_info.
Maintain a list of CPUs and provide an iterator for it.
Ifdef out IPI debugging.  Call pmap_{de,}activate as part of context switching.
Mostly from NetBSD.

```

---

Revision [**1.17.2.2**](gdt.c?rev=1.17.2.2&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.17.2.2&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.17.2.2) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.17.2.2), *Tue Jun 11 03:35:53 2002 UTC* (22 years, 7 months ago) by *art*

Branch: **[UBC](./gdt.c?only_with_tag=UBC)**

Changes since **1.17.2.1: +8 -8 lines**
Diff to previous [1.17.2.1](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.17.2.1&r2=1.17.2.2) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.17.2.1&r2=1.17.2.2&f=h)) to branchpoint [1.17](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.17&r2=1.17.2.2) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.17&r2=1.17.2.2&f=h)) next main [1.18](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.18&r2=1.17.2.2) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.18&r2=1.17.2.2&f=h))

```

Sync UBC branch to -current

```

---

Revision [**1.11.6.6**](gdt.c?rev=1.11.6.6&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.6&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.6) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.6), *Thu Mar 28 10:31:04 2002 UTC* (22 years, 10 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.5: +7 -7 lines**
Diff to previous [1.11.6.5](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.5&r2=1.11.6.6) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.5&r2=1.11.6.6&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.6) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.6&f=h))

```

Merge in -current from about a week ago

```

---

Revision [**1.19**](gdt.c?rev=1.19&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.19&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.19) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.19), *Thu Mar 14 01:26:32 2002 UTC* (22 years, 10 months ago) by *millert*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[UBC\_SYNC\_B](./gdt.c?only_with_tag=UBC_SYNC_B),
[UBC\_SYNC\_A](./gdt.c?only_with_tag=UBC_SYNC_A),
[OPENBSD\_3\_4\_BASE](./gdt.c?only_with_tag=OPENBSD_3_4_BASE),
[OPENBSD\_3\_4](./gdt.c?only_with_tag=OPENBSD_3_4),
[OPENBSD\_3\_3\_BASE](./gdt.c?only_with_tag=OPENBSD_3_3_BASE),
[OPENBSD\_3\_3](./gdt.c?only_with_tag=OPENBSD_3_3),
[OPENBSD\_3\_2\_BASE](./gdt.c?only_with_tag=OPENBSD_3_2_BASE),
[OPENBSD\_3\_2](./gdt.c?only_with_tag=OPENBSD_3_2),
[OPENBSD\_3\_1\_BASE](./gdt.c?only_with_tag=OPENBSD_3_1_BASE),
[OPENBSD\_3\_1](./gdt.c?only_with_tag=OPENBSD_3_1)**
Changes since **1.18: +8 -8 lines**
Diff to previous [1.18](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.18&r2=1.19) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.18&r2=1.19&f=h))

```

First round of __P removal in sys

```

---

Revision [**1.11.6.5**](gdt.c?rev=1.11.6.5&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.5&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.5) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.5), *Wed Mar 6 01:01:00 2002 UTC* (22 years, 10 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.4: +2 -3 lines**
Diff to previous [1.11.6.4](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.4&r2=1.11.6.5) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.4&r2=1.11.6.5&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.5) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.5&f=h))

```

Merge in trunk

```

---

Revision [**1.17.2.1**](gdt.c?rev=1.17.2.1&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.17.2.1&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.17.2.1) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.17.2.1), *Thu Jan 31 22:55:11 2002 UTC* (22 years, 11 months ago) by *niklas*

Branch: **[UBC](./gdt.c?only_with_tag=UBC)**

Changes since **1.17: +3 -4 lines**
Diff to previous [1.17](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.17&r2=1.17.2.1) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.17&r2=1.17.2.1&f=h))

```

Merge in -current, builds on i386, otherwise untested

```

---

Revision [**1.18**](gdt.c?rev=1.18&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.18&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.18) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.18), *Wed Jan 9 23:08:34 2002 UTC* (23 years ago) by *nordin*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.17: +3 -4 lines**
Diff to previous [1.17](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.17&r2=1.18) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.17&r2=1.18&f=h))

```

Call gdt_init() earlier and only once. Work done with millert@

```

---

Revision [**1.11.6.4**](gdt.c?rev=1.11.6.4&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.4&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.4) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.4), *Tue Nov 13 21:00:51 2001 UTC* (23 years, 2 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.3: +1 -2 lines**
Diff to previous [1.11.6.3](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.3&r2=1.11.6.4) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.3&r2=1.11.6.4&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.4) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.4&f=h))

```

Merge in -current

```

---

Revision [**1.17**](gdt.c?rev=1.17&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.17&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.17) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.17), *Tue Nov 6 19:53:14 2001 UTC* (23 years, 2 months ago) by *miod*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[UBC\_BASE](./gdt.c?only_with_tag=UBC_BASE)**
Branch point for: **[UBC](./gdt.c?only_with_tag=UBC)**

Changes since **1.16: +1 -2 lines**
Diff to previous [1.16](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.16&r2=1.17) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.16&r2=1.17&f=h))

```

Replace inclusion of <vm/foo.h> with the correct <uvm/bar.h> when necessary.
(Look ma, I might have broken the tree)

```

---

Revision [**1.11.6.3**](gdt.c?rev=1.11.6.3&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.3&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.3) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.3), *Wed Oct 31 03:01:12 2001 UTC* (23 years, 3 months ago) by *nate*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.2: +1 -3 lines**
Diff to previous [1.11.6.2](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.2&r2=1.11.6.3) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.2&r2=1.11.6.3&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.3) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.3&f=h))

```

Sync the SMP branch to something just after 3.0

```

---

Revision [**1.16**](gdt.c?rev=1.16&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.16&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.16) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.16), *Wed Sep 19 20:50:56 2001 UTC* (23 years, 4 months ago) by *mickey*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_3\_0\_BASE](./gdt.c?only_with_tag=OPENBSD_3_0_BASE),
[OPENBSD\_3\_0](./gdt.c?only_with_tag=OPENBSD_3_0)**
Changes since **1.15: +1 -3 lines**
Diff to previous [1.15](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.15&r2=1.16) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.15&r2=1.16&f=h))

```

merge vm/vm_kern.h into uvm/uvm_extern.h; art@ ok

```

---

Revision [**1.11.6.2**](gdt.c?rev=1.11.6.2&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.2&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.2) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.2), *Wed Jul 4 10:16:34 2001 UTC* (23 years, 6 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11.6.1: +4 -42 lines**
Diff to previous [1.11.6.1](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.1&r2=1.11.6.2) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11.6.1&r2=1.11.6.2&f=h)) to branchpoint [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.2) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.2&f=h))

```

Merge in -current from two days ago in the SMP branch.
As usual with merges, they do not indicate progress, so do not hold
your breath for working SMP, and do not mail me and ask about the
state of it.  It has not changed.  There is work ongoing, but very, very
slowly.  The commit is done in parts as to not lock up the tree in too
big chunks at a time.

```

---

Revision [**1.15**](gdt.c?rev=1.15&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.15&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.15) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.15), *Thu May 10 07:59:05 2001 UTC* (23 years, 8 months ago) by *art*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.14: +4 -4 lines**
Diff to previous [1.14](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.14&r2=1.15) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.14&r2=1.15&f=h))

```

Some locking protocol fixes and better enforcement of wiring limits.

From NetBSD.

```

---

Revision [**1.14**](gdt.c?rev=1.14&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.14&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.14) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.14), *Sat May 5 23:25:35 2001 UTC* (23 years, 8 months ago) by *art*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.13: +1 -38 lines**
Diff to previous [1.13](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.13&r2=1.14) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.13&r2=1.14&f=h))

```

PMAP_NEW and UVM are no longer optional on i386.

```

---

Revision [**1.13**](gdt.c?rev=1.13&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.13&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.13) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.13), *Mon Apr 30 13:17:38 2001 UTC* (23 years, 9 months ago) by *art*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.12: +1 -2 lines**
Diff to previous [1.12](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.12&r2=1.13) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.12&r2=1.13&f=h))

```

Move gdt_init prototype to gdt.h

```

---

Revision [**1.11.6.1**](gdt.c?rev=1.11.6.1&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11.6.1&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11.6.1) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11.6.1), *Wed Apr 18 16:07:16 2001 UTC* (23 years, 9 months ago) by *niklas*

Branch: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.11: +27 -2 lines**
Diff to previous [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.1) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.11.6.1&f=h))

```

Update the SMP branch to -current, this breaks the SMP branch though.
But it will be fixed soonish.  Note, nothing new has happened, this is just
a merge of the trunk into this branch.

```

---

Revision [**1.12**](gdt.c?rev=1.12&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.12&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.12) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.12), *Thu Mar 22 23:36:51 2001 UTC* (23 years, 10 months ago) by *niklas*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_2\_9\_BASE](./gdt.c?only_with_tag=OPENBSD_2_9_BASE),
[OPENBSD\_2\_9](./gdt.c?only_with_tag=OPENBSD_2_9)**
Changes since **1.11: +27 -2 lines**
Diff to previous [1.11](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.12) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.11&r2=1.12&f=h))

```

Merge in NetBSD's PMAP_NEW, still disabled

```

---

Revision [**1.11**](gdt.c?rev=1.11&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.11&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.11) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.11), *Fri Feb 26 04:32:36 1999 UTC* (25 years, 11 months ago) by *art*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[kame\_19991208](./gdt.c?only_with_tag=kame_19991208),
[SMP\_BASE](./gdt.c?only_with_tag=SMP_BASE),
[OPENBSD\_2\_8\_BASE](./gdt.c?only_with_tag=OPENBSD_2_8_BASE),
[OPENBSD\_2\_8](./gdt.c?only_with_tag=OPENBSD_2_8),
[OPENBSD\_2\_7\_BASE](./gdt.c?only_with_tag=OPENBSD_2_7_BASE),
[OPENBSD\_2\_7](./gdt.c?only_with_tag=OPENBSD_2_7),
[OPENBSD\_2\_6\_BASE](./gdt.c?only_with_tag=OPENBSD_2_6_BASE),
[OPENBSD\_2\_6](./gdt.c?only_with_tag=OPENBSD_2_6),
[OPENBSD\_2\_5\_BASE](./gdt.c?only_with_tag=OPENBSD_2_5_BASE),
[OPENBSD\_2\_5](./gdt.c?only_with_tag=OPENBSD_2_5)**
Branch point for: **[SMP](./gdt.c?only_with_tag=SMP)**

Changes since **1.10: +21 -2 lines**
Diff to previous [1.10](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.10&r2=1.11) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.10&r2=1.11&f=h))

```

kmem allocation changes for uvm

```

---

Revision [**1.10**](gdt.c?rev=1.10&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.10&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.10) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.10), *Thu May 30 09:30:06 1996 UTC* (28 years, 8 months ago) by *deraadt*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

CVS Tags: **[OPENBSD\_2\_4\_BASE](./gdt.c?only_with_tag=OPENBSD_2_4_BASE),
[OPENBSD\_2\_4](./gdt.c?only_with_tag=OPENBSD_2_4),
[OPENBSD\_2\_3\_BASE](./gdt.c?only_with_tag=OPENBSD_2_3_BASE),
[OPENBSD\_2\_3](./gdt.c?only_with_tag=OPENBSD_2_3),
[OPENBSD\_2\_2\_BASE](./gdt.c?only_with_tag=OPENBSD_2_2_BASE),
[OPENBSD\_2\_2](./gdt.c?only_with_tag=OPENBSD_2_2),
[OPENBSD\_2\_1\_BASE](./gdt.c?only_with_tag=OPENBSD_2_1_BASE),
[OPENBSD\_2\_1](./gdt.c?only_with_tag=OPENBSD_2_1),
[OPENBSD\_2\_0\_BASE](./gdt.c?only_with_tag=OPENBSD_2_0_BASE),
[OPENBSD\_2\_0](./gdt.c?only_with_tag=OPENBSD_2_0)**
Changes since **1.9: +1 -11 lines**
Diff to previous [1.9](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.9&r2=1.10) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.9&r2=1.10&f=h))

```

clean & sync

```

---

Revision [**1.9**](gdt.c?rev=1.9&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.9&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.9) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.9), *Tue May 7 07:21:38 1996 UTC* (28 years, 8 months ago) by *deraadt*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.8: +12 -3 lines**
Diff to previous [1.8](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.8&r2=1.9) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.8&r2=1.9&f=h))

```

sync with 0504; prototype changes

```

---

Revision [**1.8**](gdt.c?rev=1.8&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.8&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.8) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.8), *Mon Apr 29 14:12:48 1996 UTC* (28 years, 9 months ago) by *hvozda*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.7: +11 -1 lines**
Diff to previous [1.7](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.7&r2=1.8) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.7&r2=1.8&f=h))

```

Pull in John Kohl's [jtk@netbsd.org] most recent (15Apr96) APM and PCMCIA work
(original PCMCIA framework  by Stefan Grefen [grefen@convex.com]).

```

---

Revision [**1.7**](gdt.c?rev=1.7&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.7&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.7) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.7), *Thu Apr 18 19:18:08 1996 UTC* (28 years, 9 months ago) by *niklas*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.6: +43 -24 lines**
Diff to previous [1.6](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.6&r2=1.7) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.6&r2=1.7&f=h))

```

Merge of NetBSD 960317

```

---

Revision [**1.6**](gdt.c?rev=1.6&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.6&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.6) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.6), *Wed Apr 17 05:18:52 1996 UTC* (28 years, 9 months ago) by *mickey*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.5: +35 -29 lines**
Diff to previous [1.5](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.5&r2=1.6) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.5&r2=1.6&f=h))

```

Cleanups & fixes from latest NetBSD primarily to run doscmd, etc.
GENERIC added to the compile/.cvsignore (it is used for 'make links'
for example), thus conf/GENERIC should appear magically ...

```

---

Revision [**1.5**](gdt.c?rev=1.5&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.5&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.5) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.5), *Tue Mar 19 21:09:16 1996 UTC* (28 years, 10 months ago) by *mickey*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.4: +3 -2 lines**
Diff to previous [1.4](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.4&r2=1.5) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.4&r2=1.5&f=h))

```

Merging w/ NetBSD 021796.
speaker upgraded to the current.
some changes to the VM stuff (ie kern_thread.c added and so).

```

---

Revision [**1.4**](gdt.c?rev=1.4&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.4&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.4) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.4), *Mon Mar 11 11:16:46 1996 UTC* (28 years, 10 months ago) by *mickey*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.3: +2 -3 lines**
Diff to previous [1.3](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.3&r2=1.4) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.3&r2=1.4&f=h))

```

Debbuger changed towards the latest Mach.
Some minor changes for Linux ;) emulation.
Small bug fixes from NetBSD.

```

---

Revision [**1.3**](gdt.c?rev=1.3&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.3&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.3) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.3), *Wed Feb 28 14:38:41 1996 UTC* (28 years, 11 months ago) by *mickey*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.2: +3 -1 lines**
Diff to previous [1.2](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.2&r2=1.3) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.2&r2=1.3&f=h))

```

Small changes from NetBSD (including /usr/include dependencies, and so).

```

---

Revision [**1.2**](gdt.c?rev=1.2&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.2&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.2) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.2), *Thu Dec 14 06:05:53 1995 UTC* (29 years, 1 month ago) by *deraadt*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

Changes since **1.1: +31 -0 lines**
Diff to previous [1.1](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.1&r2=1.2) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.1&r2=1.2&f=h))

```

from netbsd; add copyright notice

```

---

Revision [**1.1.1.1**](gdt.c?rev=1.1.1.1&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.1.1.1&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.1.1.1) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.1.1.1) *(vendor branch)*, *Wed Oct 18 08:50:32 1995 UTC* (29 years, 3 months ago) by *deraadt*

CVS Tags: **[netbsd\_1\_1](./gdt.c?only_with_tag=netbsd_1_1)**
Changes since **1.1: +0 -0 lines**
Diff to previous [1.1](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.1&r2=1.1.1.1) ([colored](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c.diff?r1=1.1&r2=1.1.1.1&f=h))

```

initial import of NetBSD tree

```

---

Revision [**1.1**](gdt.c?rev=1.1&content-type=text/x-cvsweb-markup) / ([**download**](/cgi-bin/cvsweb/~checkout~/src/sys/arch/i386/i386/gdt.c?rev=1.1&content-type=text/plain)) - [annotate](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?annotate=1.1) - [[select for diffs]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?r1=1.1), *Wed Oct 18 08:50:32 1995 UTC* (29 years, 3 months ago) by *deraadt*

Branch: **[MAIN](./gdt.c?only_with_tag=MAIN)**

```

Initial revision

```

---

This form allows you to request diff's between any two
revisions of a file. You may select a symbolic revision
name using the selection box or you may type in a numeric
name using the type-in text box.

| Diffs between  Use Text Field netbsd\_1\_1 kame\_19991208 UBC\_SYNC\_B UBC\_SYNC\_A UBC\_BASE UBC SMP\_SYNC\_B SMP\_SYNC\_A SMP\_BASE SMP OPENBSD\_7\_6\_BASE OPENBSD\_7\_6 OPENBSD\_7\_5\_BASE OPENBSD\_7\_5 OPENBSD\_7\_4\_BASE OPENBSD\_7\_4 OPENBSD\_7\_3\_BASE OPENBSD\_7\_3 OPENBSD\_7\_2\_BASE OPENBSD\_7\_2 OPENBSD\_7\_1\_BASE OPENBSD\_7\_1 OPENBSD\_7\_0\_BASE OPENBSD\_7\_0 OPENBSD\_6\_9\_BASE OPENBSD\_6\_9 OPENBSD\_6\_8\_BASE OPENBSD\_6\_8 OPENBSD\_6\_7\_BASE OPENBSD\_6\_7 OPENBSD\_6\_6\_BASE OPENBSD\_6\_6 OPENBSD\_6\_5\_BASE OPENBSD\_6\_5 OPENBSD\_6\_4\_BASE OPENBSD\_6\_4 OPENBSD\_6\_3\_BASE OPENBSD\_6\_3 OPENBSD\_6\_2\_BASE OPENBSD\_6\_2 OPENBSD\_6\_1\_BASE OPENBSD\_6\_1 OPENBSD\_6\_0\_BASE OPENBSD\_6\_0 OPENBSD\_5\_9\_BASE OPENBSD\_5\_9 OPENBSD\_5\_8\_BASE OPENBSD\_5\_8 OPENBSD\_5\_7\_BASE OPENBSD\_5\_7 OPENBSD\_5\_6\_BASE OPENBSD\_5\_6 OPENBSD\_5\_5\_BASE OPENBSD\_5\_5 OPENBSD\_5\_4\_BASE OPENBSD\_5\_4 OPENBSD\_5\_3\_BASE OPENBSD\_5\_3 OPENBSD\_5\_2\_BASE OPENBSD\_5\_2 OPENBSD\_5\_1\_BASE OPENBSD\_5\_1 OPENBSD\_5\_0\_BASE OPENBSD\_5\_0 OPENBSD\_4\_9\_BASE OPENBSD\_4\_9 OPENBSD\_4\_8\_BASE OPENBSD\_4\_8 OPENBSD\_4\_7\_BASE OPENBSD\_4\_7 OPENBSD\_4\_6\_BASE OPENBSD\_4\_6 OPENBSD\_4\_5\_BASE OPENBSD\_4\_5 OPENBSD\_4\_4\_BASE OPENBSD\_4\_4 OPENBSD\_4\_3\_BASE OPENBSD\_4\_3 OPENBSD\_4\_2\_BASE OPENBSD\_4\_2 OPENBSD\_4\_1\_BASE OPENBSD\_4\_1 OPENBSD\_4\_0\_BASE OPENBSD\_4\_0 OPENBSD\_3\_9\_BASE OPENBSD\_3\_9 OPENBSD\_3\_8\_BASE OPENBSD\_3\_8 OPENBSD\_3\_7\_BASE OPENBSD\_3\_7 OPENBSD\_3\_6\_BASE OPENBSD\_3\_6 OPENBSD\_3\_5\_BASE OPENBSD\_3\_5 OPENBSD\_3\_4\_BASE OPENBSD\_3\_4 OPENBSD\_3\_3\_BASE OPENBSD\_3\_3 OPENBSD\_3\_2\_BASE OPENBSD\_3\_2 OPENBSD\_3\_1\_BASE OPENBSD\_3\_1 OPENBSD\_3\_0\_BASE OPENBSD\_3\_0 OPENBSD\_2\_9\_BASE OPENBSD\_2\_9 OPENBSD\_2\_8\_BASE OPENBSD\_2\_8 OPENBSD\_2\_7\_BASE OPENBSD\_2\_7 OPENBSD\_2\_6\_BASE OPENBSD\_2\_6 OPENBSD\_2\_5\_BASE OPENBSD\_2\_5 OPENBSD\_2\_4\_BASE OPENBSD\_2\_4 OPENBSD\_2\_3\_BASE OPENBSD\_2\_3 OPENBSD\_2\_2\_BASE OPENBSD\_2\_2 OPENBSD\_2\_1\_BASE OPENBSD\_2\_1 OPENBSD\_2\_0\_BASE OPENBSD\_2\_0 MAIN HEAD |  |
| --- | --- |
| and  Use Text Field netbsd\_1\_1 kame\_19991208 UBC\_SYNC\_B UBC\_SYNC\_A UBC\_BASE UBC SMP\_SYNC\_B SMP\_SYNC\_A SMP\_BASE SMP OPENBSD\_7\_6\_BASE OPENBSD\_7\_6 OPENBSD\_7\_5\_BASE OPENBSD\_7\_5 OPENBSD\_7\_4\_BASE OPENBSD\_7\_4 OPENBSD\_7\_3\_BASE OPENBSD\_7\_3 OPENBSD\_7\_2\_BASE OPENBSD\_7\_2 OPENBSD\_7\_1\_BASE OPENBSD\_7\_1 OPENBSD\_7\_0\_BASE OPENBSD\_7\_0 OPENBSD\_6\_9\_BASE OPENBSD\_6\_9 OPENBSD\_6\_8\_BASE OPENBSD\_6\_8 OPENBSD\_6\_7\_BASE OPENBSD\_6\_7 OPENBSD\_6\_6\_BASE OPENBSD\_6\_6 OPENBSD\_6\_5\_BASE OPENBSD\_6\_5 OPENBSD\_6\_4\_BASE OPENBSD\_6\_4 OPENBSD\_6\_3\_BASE OPENBSD\_6\_3 OPENBSD\_6\_2\_BASE OPENBSD\_6\_2 OPENBSD\_6\_1\_BASE OPENBSD\_6\_1 OPENBSD\_6\_0\_BASE OPENBSD\_6\_0 OPENBSD\_5\_9\_BASE OPENBSD\_5\_9 OPENBSD\_5\_8\_BASE OPENBSD\_5\_8 OPENBSD\_5\_7\_BASE OPENBSD\_5\_7 OPENBSD\_5\_6\_BASE OPENBSD\_5\_6 OPENBSD\_5\_5\_BASE OPENBSD\_5\_5 OPENBSD\_5\_4\_BASE OPENBSD\_5\_4 OPENBSD\_5\_3\_BASE OPENBSD\_5\_3 OPENBSD\_5\_2\_BASE OPENBSD\_5\_2 OPENBSD\_5\_1\_BASE OPENBSD\_5\_1 OPENBSD\_5\_0\_BASE OPENBSD\_5\_0 OPENBSD\_4\_9\_BASE OPENBSD\_4\_9 OPENBSD\_4\_8\_BASE OPENBSD\_4\_8 OPENBSD\_4\_7\_BASE OPENBSD\_4\_7 OPENBSD\_4\_6\_BASE OPENBSD\_4\_6 OPENBSD\_4\_5\_BASE OPENBSD\_4\_5 OPENBSD\_4\_4\_BASE OPENBSD\_4\_4 OPENBSD\_4\_3\_BASE OPENBSD\_4\_3 OPENBSD\_4\_2\_BASE OPENBSD\_4\_2 OPENBSD\_4\_1\_BASE OPENBSD\_4\_1 OPENBSD\_4\_0\_BASE OPENBSD\_4\_0 OPENBSD\_3\_9\_BASE OPENBSD\_3\_9 OPENBSD\_3\_8\_BASE OPENBSD\_3\_8 OPENBSD\_3\_7\_BASE OPENBSD\_3\_7 OPENBSD\_3\_6\_BASE OPENBSD\_3\_6 OPENBSD\_3\_5\_BASE OPENBSD\_3\_5 OPENBSD\_3\_4\_BASE OPENBSD\_3\_4 OPENBSD\_3\_3\_BASE OPENBSD\_3\_3 OPENBSD\_3\_2\_BASE OPENBSD\_3\_2 OPENBSD\_3\_1\_BASE OPENBSD\_3\_1 OPENBSD\_3\_0\_BASE OPENBSD\_3\_0 OPENBSD\_2\_9\_BASE OPENBSD\_2\_9 OPENBSD\_2\_8\_BASE OPENBSD\_2\_8 OPENBSD\_2\_7\_BASE OPENBSD\_2\_7 OPENBSD\_2\_6\_BASE OPENBSD\_2\_6 OPENBSD\_2\_5\_BASE OPENBSD\_2\_5 OPENBSD\_2\_4\_BASE OPENBSD\_2\_4 OPENBSD\_2\_3\_BASE OPENBSD\_2\_3 OPENBSD\_2\_2\_BASE OPENBSD\_2\_2 OPENBSD\_2\_1\_BASE OPENBSD\_2\_1 OPENBSD\_2\_0\_BASE OPENBSD\_2\_0 MAIN HEAD |  |

---

| Preferred Diff type: | Colored Long colored Unified Context |  |
| --- | --- | --- |
| View only Branch: | Show all branches UBC SMP OPENBSD\_7\_6 OPENBSD\_7\_5 OPENBSD\_7\_4 OPENBSD\_7\_3 OPENBSD\_7\_2 OPENBSD\_7\_1 OPENBSD\_7\_0 OPENBSD\_6\_9 OPENBSD\_6\_8 OPENBSD\_6\_7 OPENBSD\_6\_6 OPENBSD\_6\_5 OPENBSD\_6\_4 OPENBSD\_6\_3 OPENBSD\_6\_2 OPENBSD\_6\_1 OPENBSD\_6\_0 OPENBSD\_5\_9 OPENBSD\_5\_8 OPENBSD\_5\_7 OPENBSD\_5\_6 OPENBSD\_5\_5 OPENBSD\_5\_4 OPENBSD\_5\_3 OPENBSD\_5\_2 OPENBSD\_5\_1 OPENBSD\_5\_0 OPENBSD\_4\_9 OPENBSD\_4\_8 OPENBSD\_4\_7 OPENBSD\_4\_6 OPENBSD\_4\_5 OPENBSD\_4\_4 OPENBSD\_4\_3 OPENBSD\_4\_2 OPENBSD\_4\_1 OPENBSD\_4\_0 OPENBSD\_3\_9 OPENBSD\_3\_8 OPENBSD\_3\_7 OPENBSD\_3\_6 OPENBSD\_3\_5 OPENBSD\_3\_4 OPENBSD\_3\_3 OPENBSD\_3\_2 OPENBSD\_3\_1 OPENBSD\_3\_0 OPENBSD\_2\_9 OPENBSD\_2\_8 OPENBSD\_2\_7 OPENBSD\_2\_6 OPENBSD\_2\_5 OPENBSD\_2\_4 OPENBSD\_2\_3 OPENBSD\_2\_2 OPENBSD\_2\_1 OPENBSD\_2\_0 MAIN |  |
| Sort log by: | Not sorted Commit date Revision |  |



=== Content from ftp.openbsd.org_61f74e69_20250125_063308.html ===
untrusted comment: signature from openbsd 6.3 base secret key
RWRxzbLwAd76ZaolZoOaNHiZP5NzyJIlh2fLVfzDpPTCTLcezIZESfEWeD7lZRcsO3ufhx1jGkOZfZX+fCVugSYqASky7+zsfA0=
OpenBSD 6.3 errata 015, July 31, 2018:
On i386, IO port permissions were incorrectly restricted.
Apply by doing:
signify -Vep /etc/signify/openbsd-63-base.pub -x 015\_ioport.patch.sig \
-m - | (cd /usr/src && patch -p0)
And then rebuild and install a new kernel:
KK=`sysctl -n kern.osversion | cut -d# -f1`
cd /usr/src/sys/arch/`machine`/compile/$KK
make obj
make config
make
make install
Index: sys/arch/i386/i386/gdt.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/gdt.c,v
retrieving revision 1.39
diff -u -p -u -r1.39 gdt.c
--- sys/arch/i386/i386/gdt.c 22 Mar 2018 19:30:18 -0000 1.39
+++ sys/arch/i386/i386/gdt.c 25 Jul 2018 12:44:53 -0000
@@ -210,7 +210,7 @@ tss\_alloc(struct pcb \*pcb)
int slot;
slot = gdt\_get\_slot();
- setgdt(slot, &pcb->pcb\_tss, sizeof(struct pcb) - 1,
+ setgdt(slot, &pcb->pcb\_tss, sizeof(struct i386tss) - 1,
SDT\_SYS386TSS, SEL\_KPL, 0, 0);
return GSEL(slot, SEL\_KPL);
}


=== Content from ftp.openbsd.org_a9d2ceb4_20250125_063307.html ===
untrusted comment: signature from openbsd 6.2 base secret key
RWRVWzAMgtyg7rV9KTlfWkfafPmWTOLMKkpjfA8gUrsBGVbPkEXfn1rPcZo6nWYnrShxfGIp/y97bfxKGJ+xjzHtpa7+DNdaHws=
OpenBSD 6.2 errata 020, July 31, 2018:
On i386, IO port permissions were incorrectly restricted.
Apply by doing:
signify -Vep /etc/signify/openbsd-62-base.pub -x 020\_ioport.patch.sig \
-m - | (cd /usr/src && patch -p0)
And then rebuild and install a new kernel:
KK=`sysctl -n kern.osversion | cut -d# -f1`
cd /usr/src/sys/arch/`machine`/compile/$KK
make obj
make config
make
make install
Index: sys/arch/i386/i386/gdt.c
===================================================================
RCS file: /cvs/src/sys/arch/i386/i386/gdt.c,v
diff -u -p -u -r1.37 gdt.c
--- sys/arch/i386/i386/gdt.c 7 Mar 2016 05:32:46 -0000 1.37
+++ sys/arch/i386/i386/gdt.c 23 Jul 2018 23:53:28 -0000
@@ -210,7 +210,7 @@ tss\_alloc(struct pcb \*pcb)
int slot;
slot = gdt\_get\_slot();
- setgdt(slot, &pcb->pcb\_tss, sizeof(struct pcb) - 1,
+ setgdt(slot, &pcb->pcb\_tss, sizeof(struct i386tss) - 1,
SDT\_SYS386TSS, SEL\_KPL, 0, 0);
return GSEL(slot, SEL\_KPL);
}


=== Content from cvsweb.openbsd.org_ee8691cd_20250125_063306.html ===


| [[BACK]](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?f=h#rev1.37.8.1)**Return to [gdt.c](/cgi-bin/cvsweb/src/sys/arch/i386/i386/gdt.c?f=h#rev1.37.8.1) CVS log** [TXT] | [DIR] **Up to [[local]](/cgi-bin/cvsweb/?f=h#dirlist) / [src](/cgi-bin/cvsweb/src/?f=h#dirlist) / [sys](/cgi-bin/cvsweb/src/sys/?f=h#dirlist) / [arch](/cgi-bin/cvsweb/src/sys/arch/?f=h#dirlist) / [i386](/cgi-bin/cvsweb/src/sys/arch/i386/?f=h#dirlist) / [i386](/cgi-bin/cvsweb/src/sys/arch/i386/i386/?f=h#dirlist)** |
| --- | --- |

### Diff for /src/sys/arch/i386/i386/gdt.c between version 1.37 and 1.37.8.1

| version 1.37, 2016/03/07 05:32:46 | version 1.37.8.1, 2018/07/30 04:26:18 || | **Line210** | | --- | | | **Line210** | | --- | || int slot; | int slot; |
|  |  |
| slot = gdt\_get\_slot(); | slot = gdt\_get\_slot(); |
| setgdt(slot, &pcb->pcb\_tss, sizeof(struct pcb) - 1, | setgdt(slot, &pcb->pcb\_tss, sizeof(struct i386tss) - 1, |
| SDT\_SYS386TSS, SEL\_KPL, 0, 0); | SDT\_SYS386TSS, SEL\_KPL, 0, 0); |
| return GSEL(slot, SEL\_KPL); | return GSEL(slot, SEL\_KPL); |
| } | } |

| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

---

| | Legend:  | Removed from v.1.37 |  | | --- | --- | | changed lines | | |  | Added in v.1.37.8.1 | | | --- | --- | --- | --- | --- | --- | --- | | Colored Long colored Unified Context |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |


