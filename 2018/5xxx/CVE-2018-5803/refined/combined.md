=== Content from lists.debian.org_4cb0aa4a_20250125_175551.html ===


---

[Date Prev][[Date Next](msg00001.html)]
[Thread Prev][[Thread Next](msg00001.html)]
[[Date Index](maillist.html#00000)]
[[Thread Index](threads.html#00000)]

# [SECURITY] [DLA 1369-1] linux security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 1369-1] linux security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Wed, 02 May 2018 21:58:29 +0100
* *Message-id*: <[[🔎]](/msgid-search/b7523f224fe2386a0f6ce54b31b558cafa6b3a9a.camel%40debian.org) [b7523f224fe2386a0f6ce54b31b558cafa6b3a9a.camel@debian.org](msg00000.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
Package        : linux
Version        : 3.2.101-1
CVE ID         : CVE-2017-0861 CVE-2017-5715 CVE-2017-13166 CVE-2017-16526
                 CVE-2017-16911 CVE-2017-16912 CVE-2017-16913 CVE-2017-16914
                 CVE-2017-18017 CVE-2017-18203 CVE-2017-18216 CVE-2018-1068
                 CVE-2018-1092 CVE-2018-5332 CVE-2018-5333 CVE-2018-5750
                 CVE-2018-5803 CVE-2018-6927 CVE-2018-7492 CVE-2018-7566
                 CVE-2018-7740 CVE-2018-7757 CVE-2018-7995 CVE-2018-8781
                 CVE-2018-8822 CVE-2018-1000004 CVE-2018-1000199
Debian Bug     : 887106

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2017-0861

    Robb Glasser reported a potential use-after-free in the ALSA (sound)
    PCM core.  We believe this was not possible in practice.

CVE-2017-5715

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 2 (branch
    target injection) and is mitigated for the x86 architecture (amd64
    and i386) by using the "retpoline" compiler feature which allows
    indirect branches to be isolated from speculative execution.

CVE-2017-13166

    A bug in the 32-bit compatibility layer of the v4l2 ioctl handling
    code has been found.  Memory protections ensuring user-provided
    buffers always point to userland memory were disabled, allowing
    destination addresses to be in kernel space.  On a 64-bit kernel
    (amd64 flavour) a local user with access to a suitable video
    device can exploit this to overwrite kernel memory, leading to
    privilege escalation.

CVE-2017-16526

    Andrey Konovalov reported that the UWB subsystem may dereference
    an invalid pointer in an error case.  A local user might be able
    to use this for denial of service.

CVE-2017-16911

    Secunia Research reported that the USB/IP vhci_hcd driver exposed
    kernel heap addresses to local users.  This information could aid the
    exploitation of other vulnerabilities.

CVE-2017-16912

    Secunia Research reported that the USB/IP stub driver failed to
    perform a range check on a received packet header field, leading
    to an out-of-bounds read.  A remote user able to connect to the
    USB/IP server could use this for denial of service.

CVE-2017-16913

    Secunia Research reported that the USB/IP stub driver failed to
    perform a range check on a received packet header field, leading
    to excessive memory allocation.  A remote user able to connect to
    the USB/IP server could use this for denial of service.

CVE-2017-16914

    Secunia Research reported that the USB/IP stub driver failed to
    check for an invalid combination of fields in a recieved packet,
    leading to a null pointer dereference.  A remote user able to
    connect to the USB/IP server could use this for denial of service.

CVE-2017-18017

    Denys Fedoryshchenko reported that the netfilter xt_TCPMSS module
    failed to validate TCP header lengths, potentially leading to a
    use-after-free.  If this module is loaded, it could be used by a
    remote attacker for denial of service or possibly for code
    execution.

CVE-2017-18203

    Hou Tao reported that there was a race condition in creation and
    deletion of device-mapper (DM) devices.  A local user could
    potentially use this for denial of service.

CVE-2017-18216

    Alex Chen reported that the OCFS2 filesystem failed to hold a
    necessary lock during nodemanager sysfs file operations,
    potentially leading to a null pointer dereference.  A local user
    could use this for denial of service.

CVE-2018-1068

    The syzkaller tool found that the 32-bit compatibility layer of
    ebtables did not sufficiently validate offset values.  On a 64-bit
    kernel (amd64 flavour), a local user with the CAP_NET_ADMIN
    capability could use this to overwrite kernel memory, possibly
    leading to privilege escalation.

CVE-2018-1092

    Wen Xu reported that a crafted ext4 filesystem image would
    trigger a null dereference when mounted.  A local user able
    to mount arbitrary filesystems could use this for denial of
    service.

CVE-2018-5332

    Mohamed Ghannam reported that the RDS protocol did not
    sufficiently validate RDMA requests, leading to an out-of-bounds
    write.  A local attacker on a system with the rds module loaded
    could use this for denial of service or possibly for privilege
    escalation.

CVE-2018-5333

    Mohamed Ghannam reported that the RDS protocol did not properly
    handle an error case, leading to a null pointer dereference.  A
    local attacker on a system with the rds module loaded could
    possibly use this for denial of service.

CVE-2018-5750

    Wang Qize reported that the ACPI sbshc driver logged a kernel heap
    address.  This information could aid the exploitation of other
    vulnerabilities.

CVE-2018-5803

    Alexey Kodanev reported that the SCTP protocol did not range-check
    the length of chunks to be created.  A local or remote user could
    use this to cause a denial of service.

CVE-2018-6927

    Li Jinyue reported that the FUTEX_REQUEUE operation on futexes did
    not check for negative parameter values, which might lead to a
    denial of service or other security impact.

CVE-2018-7492

    The syzkaller tool found that the RDS protocol was lacking a null
    pointer check.  A local attacker on a system with the rds module
    loaded could use this for denial of service.

CVE-2018-7566

    范龙飞 (Fan LongFei) reported a race condition in the ALSA (sound)
    sequencer core, between write and ioctl operations.  This could
    lead to an out-of-bounds access or use-after-free.  A local user
    with access to a sequencer device could use this for denial of
    service or possibly for privilege escalation.

CVE-2018-7740

    Nic Losby reported that the hugetlbfs filesystem's mmap operation
    did not properly range-check the file offset.  A local user with
    access to files on a hugetlbfs filesystem could use this to cause
    a denial of service.

CVE-2018-7757

    Jason Yan reported a memory leak in the SAS (Serial-Attached
    SCSI) subsystem.  A local user on a system with SAS devices
    could use this to cause a denial of service.

CVE-2018-7995

    Seunghun Han reported a race condition in the x86 MCE
    (Machine Check Exception) driver.  This is unlikely to have
    any security impact.

CVE-2018-8781

    Eyal Itkin reported that the udl (DisplayLink) driver's mmap
    operation did not properly range-check the file offset.  A local
    user with access to a udl framebuffer device could exploit this to
    overwrite kernel memory, leading to privilege escalation.

CVE-2018-8822

    Dr Silvio Cesare of InfoSect reported that the ncpfs client
    implementation did not validate reply lengths from the server.  An
    ncpfs server could use this to cause a denial of service or
    remote code execution in the client.

CVE-2018-1000004

    Luo Quan reported a race condition in the ALSA (sound) sequencer
    core, between multiple ioctl operations.  This could lead to a
    deadlock or use-after-free.  A local user with access to a
    sequencer device could use this for denial of service or possibly
    for privilege escalation.

CVE-2018-1000199

    Andy Lutomirski discovered that the ptrace subsystem did not
    sufficiently validate hardware breakpoint settings.  Local users
    can use this to cause a denial of service, or possibly for
    privilege escalation, on x86 (amd64 and i386) and possibly other
    architectures.

Additionally, some mitigations for CVE-2017-5753 are included in this
release:

CVE-2017-5753

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 1
    (bounds-check bypass) and is mitigated by identifying vulnerable
    code sections (array bounds checking followed by array access) and
    replacing the array access with the speculation-safe
    array_index_nospec() function.

    More use sites will be added over time.

For Debian 7 "Wheezy", these problems have been fixed in version
3.2.101-1.  This version also includes bug fixes from upstream versions
up to and including 3.2.101.  It also fixes a regression in the
procfs hidepid option in the previous version (Debian bug #887106).

We recommend that you upgrade your linux packages.

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

--
Ben Hutchings - Debian developer, member of kernel, installer and LTS teams
```

**Attachment:
[signature.asc](pgpQ_Lyjwu10v.pgp)**

*Description:* This is a digitally signed message part

---



=== Content from www.spinics.net_9eae0027_20250125_175606.html ===


# [Secunia Research] Linux Kernel Vulnerability - Sending information

[[Date Prev](msg482522.html)][[Date Next](msg482524.html)][[Thread Prev](msg482520.html)][[Thread Next](msg482524.html)][[Date Index](maillist.html#482523)][[Thread Index](index.html#482523)]

---

* *Subject*: [Secunia Research] Linux Kernel Vulnerability - Sending information
* *From*: "Secunia Research" <vuln@xxxxxxxxxxx>
* *Date*: Wed, 7 Feb 2018 19:28:14 +0100
* *Cc*: <vuln@xxxxxxxxxxx>
* *In-reply-to*: <000001d39fef$ffb4b770$ff1e2650$@secunia.com>
* *References*: <000001d39fef$ffb4b770$ff1e2650$@secunia.com>

---

```
Hello,

Secunia Research at Flexera has discovered a vulnerability in Linux Kernel,
which can be exploited by malicious, local users to cause a DoS (Denial of
Service).

Details:
-----------------

After a bit of fuzzing and some debugging, I've prepared a program that
triggers a BUG() failure at net/core/skbuff.c:104.
It happens when an SCTP ABORT message is about to be sent. The main problem
seems to be with the data size/length. This becomes a problem when the flow
reaches the "skb_put()" function (net/core/skbuff.c) and the "unlikenly()"
condition is met.

I have just checked the reproducer against the current David Miller net-tree
and it doesn't seem to be addressed yet.

Proof-of-Concept:
-----------------

I wasn't sure if I should share the reproducer via this email. Please let me
know what's the preferred channel.

Kernel crash message:

[   31.900829] skbuff: skb_over_panic: text:00000000d6dff053 len:68556
put:68544 head:000000001a927f7f data:0000000001696ac8 tail:0x10c84 end:0xec0
dev:<NULL>
[   31.902421] ------------[ cut here ]------------
[   31.902968] kernel BUG at net/core/skbuff.c:104!
[   31.903559] invalid opcode: 0000 [#1] SMP KASAN PTI
[   31.904159] Modules linked in:
[   31.904541] CPU: 1 PID: 3458 Comm: repro Not tainted 4.15.0+ #2
[   31.905416] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS
Ubuntu-1.8.2-1ubuntu1 04/01/2014
[   31.906749] RIP: 0010:skb_panic+0x152/0x1d0
[   31.907211] RSP: 0018:ffff880066f766a0 EFLAGS: 00010282
[   31.907762] RAX: 000000000000008f RBX: ffff8800641ae2c0 RCX:
0000000000000000
[   31.908527] RDX: 000000000000008f RSI: 1ffff1000cdeec99 RDI:
ffffed000cdeecc8
[   31.909287] RBP: ffffffff84a2efc0 R08: 1ffff1000cdeec6d R09:
0000000000000000
[   31.910022] R10: 0000000000000001 R11: 0000000000000000 R12:
ffffffff83c920f0
[   31.910770] R13: 0000000000010bc0 R14: ffffffff84a2e860 R15:
0000000000000ec0
[   31.911514] FS:  00007f4face87700(0000) GS:ffff88006cf00000(0000)
knlGS:0000000000000000
[   31.912367] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   31.912973] CR2: 0000000020020fe5 CR3: 0000000069288000 CR4:
00000000000006e0
[   31.913708] Call Trace:
[   31.914534]  skb_put+0x178/0x1c0
[   31.914890]  sctp_packet_transmit+0x1120/0x3740
[   31.924671]  sctp_outq_flush+0x113a/0x3b90
[   31.963822]  sctp_do_sm+0x4a5c/0x65c0
[   31.973685]  sctp_primitive_ABORT+0x99/0xc0
[   31.974457]  sctp_sendmsg+0x1bb4/0x33a0
[   31.987812]  inet_sendmsg+0x125/0x580
[   31.991609]  sock_sendmsg+0xc0/0x100
[   31.992320]  ___sys_sendmsg+0x714/0x900
[   31.999903]  __sys_sendmsg+0xbd/0x1e0
[   32.002942]  SyS_sendmsg+0x27/0x40
[   32.003585]  entry_SYSCALL_64_fastpath+0x18/0x85
[   32.004461] RIP: 0033:0x7f4fada2472d
[   32.005130] RSP: 002b:00007f4face86ec0 EFLAGS: 00000293
[   32.005138] Code: 03 0f b6 04 01 84 c0 74 04 3c 03 7e 20 8b 4b 78 41 56
45 89 e8 41 57 56 48 c7 c7 a0 e8 a2 84 52 48 89 ee 4c 89 e2 e8 00 bd 2d fe
<0f> 0b 4c 89 4c 24 10 48 89 54 24 08 48 89 34 24 e8 b9 15 72 fe
[   32.009658] RIP: skb_panic+0x152/0x1d0 RSP: ffff880066f766a0
[   32.010756] ---[ end trace 239ba69b984ccf99 ]---

Closing Comments:
-----------------

We have assigned the vulnerability Secunia Advisory SA81331.

A preliminary release date has been set to February 21st, 2018 for the
publication of our advisory. However, we are naturally prepared to push the
disclosure date in accordance with the Secunia Research Disclosure Policy
[1], if you need more time to address the vulnerability as long as you keep
us updated on the status.

Please don't hesitate to contact us for assistance with
confirming/reproducing the reported vulnerability.

Credits should go to:
"Jakub Jirasek, Secunia Research at Flexera"

In the case that a HTTPS URL is allowed within the mentioning of the credits
on e.g. your web site, then please utilize the link [2], which could be made
to trigger by clicking on the "Secunia Research" parts of the credits for
example. We highly appreciate the effort.

Please acknowledge receiving this e-mail and let us know when you expect to
fix the vulnerability.

References:
[1] <https://secuniaresearch.flexerasoftware.com/community/research/policy/>
[2]
<https://www.flexerasoftware.com/enterprise/company/about/secunia-research/>

---

Kind Regards,

Jakub Jirasek
Team Lead Information Security Analyst

Secunia Research at Flexera

Arne Jacobsens Allé 7, 5th floor
2300 Copenhagen S
Denmark

Phone +45 7020 5144

<http://www.flexera.com>

```

---

* Prev by Date:
  **[Re: [PATCH] net: ethernet: ti: cpsw: fix net watchdog timeout](msg482522.html)**
* Next by Date:
  **[[PATCH net] net: phy: fix phy\_start to consider PHY\_IGNORE\_INTERRUPT](msg482524.html)**
* Previous by thread:
  **[[PATCH v2] selftests: bpf: test\_kmod.sh: check the module path before insmod](msg482520.html)**
* Next by thread:
  **[[PATCH net] net: phy: fix phy\_start to consider PHY\_IGNORE\_INTERRUPT](msg482524.html)**
* Index(es):
  + [**Date**](maillist.html#482523)
  + [**Thread**](index.html#482523)

[[Index of Archives]](/lists/)

[[Linux Kernel Discussion]](/lists/kernel/)

[[TCP Instrumentation]](/lists/tcpinst-wg/)

[[Ethernet Bridging]](/lists/linux-ethernet-bridging/)

[[Linux Wireless Networking]](/lists/linux-wireless/)

[[Linux WPAN Networking]](/lists/linux-wpan/)

[[Linux Host AP]](/lists/hostap/)

[[Linux WPAN Networking]](/lists/linux-wpan/)

[[Linux Bluetooth Networking]](/lists/linux-bluetooth/)

[[Linux ATH6KL Networking]](/lists/ath6kl/)

[[Linux Networking Users]](/lists/linux-net/)

[[XDP Newbies]](/lists/xdp-newbies/)

[[Linux Coverity]](/lists/linux-coverity/)

[[VLAN]](/lists/vlan/)

[[Git]](/lists/git/)

[[IETF Annouce]](/lists/ietf-ann/)

[[Linux Assembly]](/lists/linux-assembly/)

[[Security]](/lists/security/)

[[Bugtraq]](/lists/bugtraq/)

[[Yosemite Information]](https://yosemitenews.info/)

[[MIPS Linux]](/lists/mips/)

[[ARM Linux Kernel]](/lists/arm-kernel/)

[[ARM Linux]](/lists/arm/)

[[Linux Virtualization]](/lists/linux-virtualization/)

[[Linux IDE]](/lists/linux-ide/)

[[Linux RAID]](/lists/raid/)

[[Linux SCSI]](/lists/linux-scsi/)

---

|  | [Powered by Linux](/lists/) |
| --- | --- |



=== Content from cdn.kernel.org_68cab69d_20250125_175537.html ===
commit f63b2b3204ea962e9cc34a223771ec973694f8bf
Author: Ben Hutchings
Date: Fri Jun 1 00:30:27 2018 +0100
Linux 3.2.102
commit 0b8479056e90225a9f913d7eee4876295989ca62
Author: Linus Walleij
Date: Sat Mar 3 23:29:03 2018 +0100
mtd: jedec\_probe: Fix crash in jedec\_read\_mfr()
commit 87a73eb5b56fd6e07c8e499fe8608ef2d8912b82 upstream.
It turns out that the loop where we read manufacturer
jedec\_read\_mfd() can under some circumstances get a
CFI\_MFR\_CONTINUATION repeatedly, making the loop go
over all banks and eventually hit the end of the
map and crash because of an access violation:
Unable to handle kernel paging request at virtual address c4980000
pgd = (ptrval)
[c4980000] \*pgd=03808811, \*pte=00000000, \*ppte=00000000
Internal error: Oops: 7 [#1] PREEMPT ARM
CPU: 0 PID: 1 Comm: swapper Not tainted 4.16.0-rc1+ #150
Hardware name: Gemini (Device Tree)
PC is at jedec\_probe\_chip+0x6ec/0xcd0
LR is at 0x4
pc : [] lr : [<00000004>] psr: 60000013
sp : c382dd18 ip : 0000ffff fp : 00000000
r10: c0626388 r9 : 00020000 r8 : c0626340
r7 : 00000000 r6 : 00000001 r5 : c3a71afc r4 : c382dd70
r3 : 00000001 r2 : c4900000 r1 : 00000002 r0 : 00080000
Flags: nZCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
Control: 0000397f Table: 00004000 DAC: 00000053
Process swapper (pid: 1, stack limit = 0x(ptrval))
Fix this by breaking the loop with a return 0 if
the offset exceeds the map size.
Fixes: 5c9c11e1c47c ("[MTD] [NOR] Add support for flash chips with ID in bank other than 0")
Signed-off-by: Linus Walleij
Signed-off-by: Boris Brezillon
Signed-off-by: Ben Hutchings
commit b9bae75805932048d0b5172cd63f83b28668eb02
Author: Leon Romanovsky
Date: Sun Mar 25 11:39:05 2018 +0300
RDMA/ucma: Check that device exists prior to accessing it
commit c8d3bcbfc5eab3f01cf373d039af725f3b488813 upstream.
Ensure that device exists prior to accessing its properties.
Reported-by:
Fixes: 75216638572f ("RDMA/cma: Export rdma cm interface to userspace")
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Ben Hutchings
commit bf66bb07cb394f68e75b547e558a945563a70d63
Author: Leon Romanovsky
Date: Sun Mar 25 11:23:55 2018 +0300
RDMA/ucma: Check that device is connected prior to access it
commit 4b658d1bbc16605330694bb3ef2570c465ef383d upstream.
Add missing check that device is connected prior to access it.
[ 55.358652] BUG: KASAN: null-ptr-deref in rdma\_init\_qp\_attr+0x4a/0x2c0
[ 55.359389] Read of size 8 at addr 00000000000000b0 by task qp/618
[ 55.360255]
[ 55.360432] CPU: 1 PID: 618 Comm: qp Not tainted 4.16.0-rc1-00071-gcaf61b1b8b88 #91
[ 55.361693] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.11.0-0-g63451fca13-prebuilt.qemu-project.org 04/01/2014
[ 55.363264] Call Trace:
[ 55.363833] dump\_stack+0x5c/0x77
[ 55.364215] kasan\_report+0x163/0x380
[ 55.364610] ? rdma\_init\_qp\_attr+0x4a/0x2c0
[ 55.365238] rdma\_init\_qp\_attr+0x4a/0x2c0
[ 55.366410] ucma\_init\_qp\_attr+0x111/0x200
[ 55.366846] ? ucma\_notify+0xf0/0xf0
[ 55.367405] ? \_get\_random\_bytes+0xea/0x1b0
[ 55.367846] ? urandom\_read+0x2f0/0x2f0
[ 55.368436] ? kmem\_cache\_alloc\_trace+0xd2/0x1e0
[ 55.369104] ? refcount\_inc\_not\_zero+0x9/0x60
[ 55.369583] ? refcount\_inc+0x5/0x30
[ 55.370155] ? rdma\_create\_id+0x215/0x240
[ 55.370937] ? \_copy\_to\_user+0x4f/0x60
[ 55.371620] ? mem\_cgroup\_commit\_charge+0x1f5/0x290
[ 55.372127] ? \_copy\_from\_user+0x5e/0x90
[ 55.372720] ucma\_write+0x174/0x1f0
[ 55.373090] ? ucma\_close\_id+0x40/0x40
[ 55.373805] ? \_\_lru\_cache\_add+0xa8/0xd0
[ 55.374403] \_\_vfs\_write+0xc4/0x350
[ 55.374774] ? kernel\_read+0xa0/0xa0
[ 55.375173] ? fsnotify+0x899/0x8f0
[ 55.375544] ? fsnotify\_unmount\_inodes+0x170/0x170
[ 55.376689] ? \_\_fsnotify\_update\_child\_dentry\_flags+0x30/0x30
[ 55.377522] ? handle\_mm\_fault+0x174/0x320
[ 55.378169] vfs\_write+0xf7/0x280
[ 55.378864] SyS\_write+0xa1/0x120
[ 55.379270] ? SyS\_read+0x120/0x120
[ 55.379643] ? mm\_fault\_error+0x180/0x180
[ 55.380071] ? task\_work\_run+0x7d/0xd0
[ 55.380910] ? \_\_task\_pid\_nr\_ns+0x120/0x140
[ 55.381366] ? SyS\_read+0x120/0x120
[ 55.381739] do\_syscall\_64+0xeb/0x250
[ 55.382143] entry\_SYSCALL\_64\_after\_hwframe+0x21/0x86
[ 55.382841] RIP: 0033:0x7fc2ef803e99
[ 55.383227] RSP: 002b:00007fffcc5f3be8 EFLAGS: 00000217 ORIG\_RAX: 0000000000000001
[ 55.384173] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fc2ef803e99
[ 55.386145] RDX: 0000000000000057 RSI: 0000000020000080 RDI: 0000000000000003
[ 55.388418] RBP: 00007fffcc5f3c00 R08: 0000000000000000 R09: 0000000000000000
[ 55.390542] R10: 0000000000000000 R11: 0000000000000217 R12: 0000000000400480
[ 55.392916] R13: 00007fffcc5f3cf0 R14: 0000000000000000 R15: 0000000000000000
[ 55.521088] Code: e5 4d 1e ff 48 89 df 44 0f b6 b3 b8 01 00 00 e8 65 50 1e ff 4c 8b 2b 49
8d bd b0 00 00 00 e8 56 50 1e ff 41 0f b6 c6 48 c1 e0 04 <49> 03 85 b0 00 00 00 48 8d 78 08
48 89 04 24 e8 3a 4f 1e ff 48
[ 55.525980] RIP: rdma\_init\_qp\_attr+0x52/0x2c0 RSP: ffff8801e2c2f9d8
[ 55.532648] CR2: 00000000000000b0
[ 55.534396] ---[ end trace 70cee64090251c0b ]---
Fixes: 75216638572f ("RDMA/cma: Export rdma cm interface to userspace")
Fixes: d541e45500bd ("IB/core: Convert ah\_attr from OPA to IB when copying to user")
Reported-by:
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Ben Hutchings
commit 3cc0730eef779b6d7e27d6dfa5bd81f76a2baa0c
Author: Eran Ben Elisha
Date: Tue Mar 27 14:41:18 2018 +0300
net/mlx4\_en: Fix mixed PFC and Global pause user control requests
commit 6e8814ceb7e8f468659ef9253bd212c07ae19584 upstream.
Global pause and PFC configuration should be mutually exclusive (i.e. only
one of them at most can be set). However, once PFC was turned off,
driver automatically turned Global pause on. This is a bug.
Fix the driver behaviour to turn off PFC/Global once the user turned the
other on.
This also fixed a weird behaviour that at a current time, the profile
had both PFC and global pause configuration turned on, which is
Hardware-wise impossible and caused returning false positive indication
to query tools.
In addition, fix error code when setting global pause or PFC to change
metadata only upon successful change.
Also, removed useless debug print.
Fixes: af7d51852631 ("net/mlx4\_en: Add DCB PFC support through CEE netlink commands")
Fixes: c27a02cd94d6 ("mlx4\_en: Add driver for Mellanox ConnectX 10GbE NIC")
Signed-off-by: Eran Ben Elisha
Signed-off-by: Tariq Toukan
Signed-off-by: David S. Miller
[bwh: Backported to 3.2:
- Drop changes in en\_dcb\_nl.c
- Don't call mlx4\_en\_update\_pfc\_stats\_bitmap()]
Signed-off-by: Ben Hutchings
commit f43a81763f525db5509177e36e04a6927a80c14e
Author: Ivan Vecera
Date: Mon Sep 8 18:46:53 2014 +0200
net/mlx4\_en: do not ignore autoneg in mlx4\_en\_set\_pauseparam()
commit 278d436a476f69fc95d5c82bf61b6c2d02f4d44e upstream.
The driver does not support pause autonegotiation so it should return
-EINVAL when the function is called with non-zero autoneg.
Cc: Amir Vadai
Signed-off-by: Ivan Vecera
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 9f249188a2927b7809ed790e4b568ea82039d919
Author: Dan Carpenter
Date: Tue Mar 27 16:07:52 2018 +0300
ALSA: pcm: potential uninitialized return values
commit 5607dddbfca774fb38bffadcb077fe03aa4ac5c6 upstream.
Smatch complains that "tmp" can be uninitialized if we do a zero size
write.
Fixes: 02a5d6925cd3 ("ALSA: pcm: Avoid potential races between OSS ioctls and read/write")
Signed-off-by: Dan Carpenter
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit 19277917a0db893344f247d2ed4ac920c874f0d6
Author: Xin Long
Date: Mon Mar 26 01:16:47 2018 +0800
bonding: process the err returned by dev\_set\_allmulti properly in bond\_enslave
commit 9f5a90c107741b864398f4ac0014711a8c1d8474 upstream.
When dev\_set\_promiscuity(1) succeeds but dev\_set\_allmulti(1) fails,
dev\_set\_promiscuity(-1) should be done before going to the err path.
Otherwise, dev->promiscuity will leak.
Fixes: 7e1a1ac1fbaa ("bonding: Check return of dev\_set\_promiscuity/allmulti")
Signed-off-by: Xin Long
Acked-by: Andy Gospodarek
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 1731866a8cdbf8b8c49348083c565ba0f2b6abff
Author: Stefan Roese
Date: Mon Mar 26 16:10:21 2018 +0200
ALSA: pcm: Use dma\_bytes as size parameter in dma\_mmap\_coherent()
commit 9066ae7ff5d89c0b5daa271e2d573540097a94fa upstream.
When trying to use the driver (e.g. aplay \*.wav), the 4MiB DMA buffer
will get mmapp'ed in 16KiB chunks. But this fails with the 2nd 16KiB
area, as the page offset is outside of the VMA range (size), which is
currently used as size parameter in snd\_pcm\_lib\_default\_mmap(). By
using the DMA buffer size (dma\_bytes) instead, the complete DMA buffer
can be mmapp'ed and the issue is fixed.
This issue was detected on an ARM platform (TI AM57xx) using the RME
HDSP MADI PCIe soundcard.
Fixes: 657b1989dacf ("ALSA: pcm - Use dma\_mmap\_coherent() if available")
Signed-off-by: Stefan Roese
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit 85612401b97f42ca3addf3d5786cc6de4fcb8fda
Author: Alexander Potapenko
Date: Fri Mar 23 13:49:02 2018 +0100
netlink: make sure nladdr has correct size in netlink\_connect()
commit 7880287981b60a6808f39f297bb66936e8bdf57a upstream.
KMSAN reports use of uninitialized memory in the case when |alen| is
smaller than sizeof(struct sockaddr\_nl), and therefore |nladdr| isn't
fully copied from the userspace.
Signed-off-by: Alexander Potapenko
Fixes: 1da177e4c3f41524 ("Linux-2.6.12-rc2")
Reviewed-by: Eric Dumazet
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 303f7c4c27da1ba0d54c62eb1ae66330bc1c835e
Author: Linus Torvalds
Date: Sat Mar 24 10:43:26 2018 +0100
tty: vt: fix up tabstops properly
commit f1869a890cdedb92a3fab969db5d0fd982850273 upstream.
Tabs on a console with long lines do not wrap properly, so correctly
account for the line length when computing the tab placement location.
Reported-by: James Holderness
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit bd7c606e6724adc01009d8551b7666a8bcb64a5c
Author: Masami Hiramatsu
Date: Sat Mar 17 21:38:10 2018 +0900
tracing: probeevent: Fix to support minus offset from symbol
commit c5d343b6b7badd1f5fe0873eff2e8d63a193e732 upstream.
In Documentation/trace/kprobetrace.txt, it says
@SYM[+|-offs] : Fetch memory at SYM +|- offs (SYM should be a data symbol)
However, the parser doesn't parse minus offset correctly, since
commit 2fba0c8867af ("tracing/kprobes: Fix probe offset to be
unsigned") drops minus ("-") offset support for kprobe probe
address usage.
This fixes the traceprobe\_split\_symbol\_offset() to parse minus
offset again with checking the offset range, and add a minus
offset check in kprobe probe address usage.
Link: http://lkml.kernel.org/r/152129028983.31874.13419301530285775521.stgit@devbox
Cc: Ingo Molnar
Cc: Tom Zanussi
Cc: Arnaldo Carvalho de Melo
Cc: Ravi Bangoria
Fixes: 2fba0c8867af ("tracing/kprobes: Fix probe offset to be unsigned")
Acked-by: Namhyung Kim
Signed-off-by: Masami Hiramatsu
Signed-off-by: Steven Rostedt (VMware)
[bwh: Backported to 3.2: adjust filename, context]
Signed-off-by: Ben Hutchings
commit c218eb3152efa5b424e3c6951d6796a357a45f05
Author: Yisheng Xie
Date: Thu Mar 22 16:17:02 2018 -0700
mm/mempolicy.c: avoid use uninitialized preferred\_node
commit 8970a63e965b43288c4f5f40efbc2bbf80de7f16 upstream.
Alexander reported a use of uninitialized memory in \_\_mpol\_equal(),
which is caused by incorrect use of preferred\_node.
When mempolicy in mode MPOL\_PREFERRED with flags MPOL\_F\_LOCAL, it uses
numa\_node\_id() instead of preferred\_node, however, \_\_mpol\_equal() uses
preferred\_node without checking whether it is MPOL\_F\_LOCAL or not.
[akpm@linux-foundation.org: slight comment tweak]
Link: http://lkml.kernel.org/r/4ebee1c2-57f6-bcb8-0e2d-1833d1ee0bb7@huawei.com
Fixes: fc36b8d3d819 ("mempolicy: use MPOL\_F\_LOCAL to Indicate Preferred Local Policy")
Signed-off-by: Yisheng Xie
Reported-by: Alexander Potapenko
Tested-by: Alexander Potapenko
Reviewed-by: Andrew Morton
Cc: Dmitriy Vyukov
Cc: Vlastimil Babka
Cc: Michal Hocko
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit b4eeaa94d0eb1a4b84361c941056f28c8ca314a6
Author: Julian Wiedmann
Date: Tue Mar 20 07:59:12 2018 +0100
s390/qeth: free netdevice when removing a card
commit 6be687395b3124f002a653c1a50b3260222b3cd7 upstream.
On removal, a qeth card's netdevice is currently not properly freed
because the call chain looks as follows:
qeth\_core\_remove\_device(card)
lx\_remove\_device(card)
unregister\_netdev(card->dev)
card->dev = NULL !!!
qeth\_core\_free\_card(card)
if (card->dev) !!!
free\_netdev(card->dev)
Fix it by free'ing the netdev straight after unregistering. This also
fixes the sysfs-driven layer switch case (qeth\_dev\_layer2\_store()),
where the need to free the current netdevice was not considered at all.
Note that free\_netdev() takes care of the netif\_napi\_del() for us too.
Fixes: 4a71df50047f ("qeth: new qeth device driver")
Signed-off-by: Julian Wiedmann
Reviewed-by: Ursula Braun
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 6812610424262b90d3e5635291b1e4933cf8bd89
Author: Thomas Gleixner
Date: Thu Feb 15 17:21:55 2018 +0100
posix-timers: Protect posix clock array access against speculation
commit 19b558db12f9f4e45a22012bae7b4783e62224da upstream.
The clockid argument of clockid\_to\_kclock() comes straight from user space
via various syscalls and is used as index into the posix\_clocks array.
Protect it against spectre v1 array out of bounds speculation. Remove the
redundant check for !posix\_clock[id] as this is another source for
speculation and does not provide any advantage over the return
posix\_clock[id] path which returns NULL in that case anyway.
Signed-off-by: Thomas Gleixner
Acked-by: Peter Zijlstra (Intel)
Acked-by: Dan Williams
Cc: Rasmus Villemoes
Cc: Greg KH
Cc: Linus Torvalds
Cc: David Woodhouse
Link: https://lkml.kernel.org/r/alpine.DEB.2.21.1802151718320.1296@nanos.tec.linutronix.de
[bwh: Backported to 3.2:
- Move the test of the clock\_getres field below the lookup using
array\_index\_nospec()
- Adjust filename, context]
Signed-off-by: Ben Hutchings
commit 6acf1f11d393616cfd6cd8417e2dfe7da89bf9eb
Author: Takashi Iwai
Date: Thu Mar 22 10:40:27 2018 +0100
ALSA: aloop: Fix access to not-yet-ready substream via cable
commit 8e6b1a72a75bb5067ccb6b56d8ca4aa3a300a64e upstream.
In loopback\_open() and loopback\_close(), we assign and release the
substream object to the corresponding cable in a racy way. It's
neither locked nor done in the right position. The open callback
assigns the substream before its preparation finishes, hence the other
side of the cable may pick it up, which may lead to the invalid memory
access.
This patch addresses these: move the assignment to the end of the open
callback, and wrap with cable->lock for avoiding concurrent accesses.
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit dc602c18947a838a422071849965ce611f9a18e1
Author: Takashi Iwai
Date: Thu Mar 22 08:56:06 2018 +0100
ALSA: aloop: Sync stale timer before release
commit 67a01afaf3d34893cf7d2ea19b34555d6abb7cb0 upstream.
The aloop driver tries to stop the pending timer via timer\_del() in
the trigger callback and in the close callback. The former is
correct, as it's an atomic operation, while the latter expects that
the timer gets really removed and proceeds the resource releases after
that. But timer\_del() doesn't synchronize, hence the running timer
may still access the released resources.
A similar situation can be also seen in the prepare callback after
trigger(STOP) where the prepare tries to re-initialize the things
while a timer is still running.
The problems like the above are seen indirectly in some syzkaller
reports (although it's not 100% clear whether this is the only cause,
as the race condition is quite narrow and not always easy to
trigger).
For addressing these issues, this patch adds the explicit alls of
timer\_del\_sync() in some places, so that the pending timer is properly
killed / synced.
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit b5f21d80f536b5987ff6e209e6d57d4e39c2caab
Author: Chien Tin Tung
Date: Wed Mar 21 13:09:25 2018 -0500
RDMA/ucma: Correct option size check using optlen
commit 5f3e3b85cc0a5eae1c46d72e47d3de7bf208d9e2 upstream.
The option size check is using optval instead of optlen
causing the set option call to fail. Use the correct
field, optlen, for size check.
Fixes: 6a21dfc0d0db ("RDMA/ucma: Limit possible option size")
Signed-off-by: Chien Tin Tung
Signed-off-by: Shiraz Saleem
Reviewed-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
Signed-off-by: Ben Hutchings
commit b37e09dd6279b2d04ab8ca7a0d7058d48e494c18
Author: Leon Romanovsky
Date: Tue Mar 20 17:05:13 2018 +0200
RDMA/ucma: Ensure that CM\_ID exists prior to access it
commit e8980d67d6017c8eee8f9c35f782c4bd68e004c9 upstream.
Prior to access UCMA commands, the context should be initialized
and connected to CM\_ID with ucma\_create\_id(). In case user skips
this step, he can provide non-valid ctx without CM\_ID and cause
to multiple NULL dereferences.
Also there are situations where the create\_id can be raced with
other user access, ensure that the context is only shared to
other threads once it is fully initialized to avoid the races.
[ 109.088108] BUG: unable to handle kernel NULL pointer dereference at 0000000000000020
[ 109.090315] IP: ucma\_connect+0x138/0x1d0
[ 109.092595] PGD 80000001dc02d067 P4D 80000001dc02d067 PUD 1da9ef067 PMD 0
[ 109.095384] Oops: 0000 [#1] SMP KASAN PTI
[ 109.097834] CPU: 0 PID: 663 Comm: uclose Tainted: G B 4.16.0-rc1-00062-g2975d5de6428 #45
[ 109.100816] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.11.0-0-g63451fca13-prebuilt.qemu-project.org 04/01/2014
[ 109.105943] RIP: 0010:ucma\_connect+0x138/0x1d0
[ 109.108850] RSP: 0018:ffff8801c8567a80 EFLAGS: 00010246
[ 109.111484] RAX: 0000000000000000 RBX: 1ffff100390acf50 RCX: ffffffff9d7812e2
[ 109.114496] RDX: 1ffffffff3f507a5 RSI: 0000000000000297 RDI: 0000000000000297
[ 109.117490] RBP: ffff8801daa15600 R08: 0000000000000000 R09: ffffed00390aceeb
[ 109.120429] R10: 0000000000000001 R11: ffffed00390aceea R12: 0000000000000000
[ 109.123318] R13: 0000000000000120 R14: ffff8801de6459c0 R15: 0000000000000118
[ 109.126221] FS: 00007fabb68d6700(0000) GS:ffff8801e5c00000(0000) knlGS:0000000000000000
[ 109.129468] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 109.132523] CR2: 0000000000000020 CR3: 00000001d45d8003 CR4: 00000000003606b0
[ 109.135573] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 109.138716] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 109.142057] Call Trace:
[ 109.144160] ? ucma\_listen+0x110/0x110
[ 109.146386] ? wake\_up\_q+0x59/0x90
[ 109.148853] ? futex\_wake+0x10b/0x2a0
[ 109.151297] ? save\_stack+0x89/0xb0
[ 109.153489] ? \_copy\_from\_user+0x5e/0x90
[ 109.155500] ucma\_write+0x174/0x1f0
[ 109.157933] ? ucma\_resolve\_route+0xf0/0xf0
[ 109.160389] ? \_\_mod\_node\_page\_state+0x1d/0x80
[ 109.162706] \_\_vfs\_write+0xc4/0x350
[ 109.164911] ? kernel\_read+0xa0/0xa0
[ 109.167121] ? path\_openat+0x1b10/0x1b10
[ 109.169355] ? fsnotify+0x899/0x8f0
[ 109.171567] ? fsnotify\_unmount\_inodes+0x170/0x170
[ 109.174145] ? \_\_fget+0xa8/0xf0
[ 109.177110] vfs\_write+0xf7/0x280
[ 109.179532] SyS\_write+0xa1/0x120
[ 109.181885] ? SyS\_read+0x120/0x120
[ 109.184482] ? compat\_start\_thread+0x60/0x60
[ 109.187124] ? SyS\_read+0x120/0x120
[ 109.189548] do\_syscall\_64+0xeb/0x250
[ 109.192178] entry\_SYSCALL\_64\_after\_hwframe+0x21/0x86
[ 109.194725] RIP: 0033:0x7fabb61ebe99
[ 109.197040] RSP: 002b:00007fabb68d5e98 EFLAGS: 00000202 ORIG\_RAX: 0000000000000001
[ 109.200294] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fabb61ebe99
[ 109.203399] RDX: 0000000000000120 RSI: 00000000200001c0 RDI: 0000000000000004
[ 109.206548] RBP: 00007fabb68d5ec0 R08: 0000000000000000 R09: 0000000000000000
[ 109.209902] R10: 0000000000000000 R11: 0000000000000202 R12: 00007fabb68d5fc0
[ 109.213327] R13: 0000000000000000 R14: 00007fff40ab2430 R15: 00007fabb68d69c0
[ 109.216613] Code: 88 44 24 2c 0f b6 84 24 6e 01 00 00 88 44 24 2d 0f
b6 84 24 69 01 00 00 88 44 24 2e 8b 44 24 60 89 44 24 30 e8 da f6 06 ff
31 c0 <66> 41 83 7c 24 20 1b 75 04 8b 44 24 64 48 8d 74 24 20 4c 89 e7
[ 109.223602] RIP: ucma\_connect+0x138/0x1d0 RSP: ffff8801c8567a80
[ 109.226256] CR2: 0000000000000020
Fixes: 75216638572f ("RDMA/cma: Export rdma cm interface to userspace")
Reported-by:
Signed-off-by: Leon Romanovsky
Signed-off-by: Jason Gunthorpe
[bwh: Backported to 3.2: adjust contex]
Signed-off-by: Ben Hutchings
commit e78759ba4d27ab2f19b285f666887bf4d00b7514
Author: Leon Romanovsky
Date: Mon Mar 19 14:20:15 2018 +0200
RDMA/ucma: Fix use-after-free access in ucma\_close
commit ed65a4dc22083e73bac599ded6a262318cad7baf upstream.
The error in ucma\_create\_id() left ctx in the list of contexts belong
to ucma file descriptor. The attempt to close this file descriptor causes
to use-after-free accesses while iterating over such list.
Fixes: 75216638572f ("RDMA/cma: Export rdma cm interface to userspace")
Reported-by:
Signed-off-by: Leon Romanovsky
Reviewed-by: Sean Hefty
Signed-off-by: Jason Gunthorpe
Signed-off-by: Ben Hutchings
commit 25272b0d0d1e37d75b7481951c6a28c8c4d515c7
Author: Kirill Marinushkin
Date: Mon Mar 19 07:11:08 2018 +0100
ALSA: usb-audio: Fix parsing descriptor of UAC2 processing unit
commit a6618f4aedb2b60932d766bd82ae7ce866e842aa upstream.
Currently, the offsets in the UAC2 processing unit descriptor are
calculated incorrectly. It causes an issue when connecting the device which
provides such a feature:
~~~~
[84126.724420] usb 1-1.3.1: invalid Processing Unit descriptor (id 18)
~~~~
After this patch is applied, the UAC2 processing unit inits w/o this error.
Fixes: 23caaf19b11e ("ALSA: usb-mixer: Add support for Audio Class v2.0")
Signed-off-by: Kirill Marinushkin
Signed-off-by: Takashi Iwai
[bwh: Backported to 3.2: adjust filename]
Signed-off-by: Ben Hutchings
commit 2926594b07be714d5b9b1f307f09e7286d1203ff
Author: Hans de Goede
Date: Mon Mar 19 16:33:59 2018 +0100
libata: Make Crucial BX100 500GB LPM quirk apply to all firmware versions
commit 3bf7b5d6d017c27e0d3b160aafb35a8e7cfeda1f upstream.
Commit b17e5729a630 ("libata: disable LPM for Crucial BX100 SSD 500GB
drive"), introduced a ATA\_HORKAGE\_NOLPM quirk for Crucial BX100 500GB SSDs
but limited this to the MU02 firmware version, according to:
http://www.crucial.com/usa/en/support-ssd-firmware
MU02 is the last version, so there are no newer possibly fixed versions
and if the MU02 version has broken LPM then the MU01 almost certainly
also has broken LPM, so this commit changes the quirk to apply to all
firmware versions.
Fixes: b17e5729a630 ("libata: disable LPM for Crucial BX100 SSD 500GB...")
Cc: Kai-Heng Feng
Signed-off-by: Hans de Goede
Signed-off-by: Tejun Heo
Signed-off-by: Ben Hutchings
commit 968482dc6ea96a542661b92dc8b44074914e605e
Author: Hans de Goede
Date: Mon Mar 19 16:33:58 2018 +0100
libata: Apply NOLPM quirk to Crucial M500 480 and 960GB SSDs
commit 62ac3f7305470e3f52f159de448bc1a771717e88 upstream.
There have been reports of the Crucial M500 480GB model not working
with LPM set to min\_power / med\_power\_with\_dipm level.
It has not been tested with medium\_power, but that typically has no
measurable power-savings.
Note the reporters Crucial\_CT480M500SSD3 has a firmware version of MU03
and there is a MU05 update available, but that update does not mention any
LPM fixes in its changelog, so the quirk matches all firmware versions.
In my experience the LPM problems with (older) Crucial SSDs seem to be
limited to higher capacity versions of the SSDs (different firmware?),
so this commit adds a NOLPM quirk for the 480 and 960GB versions of the
M500, to avoid LPM causing issues with these SSDs.
Reported-and-tested-by: Martin Steigerwald
Signed-off-by: Hans de Goede
Signed-off-by: Tejun Heo
[bwh: Backported to 3.2: Drop the TRIM quirk flags, which aren't supported]
Signed-off-by: Ben Hutchings
commit 916446829c46be4a17a578941551428f841d2a05
Author: Vinicius Costa Gomes
Date: Wed Mar 14 13:32:09 2018 -0700
skbuff: Fix not waking applications when errors are enqueued
commit 6e5d58fdc9bedd0255a8781b258f10bbdc63e975 upstream.
When errors are enqueued to the error queue via sock\_queue\_err\_skb()
function, it is possible that the waiting application is not notified.
Calling 'sk->sk\_data\_ready()' would not notify applications that
selected only POLLERR events in poll() (for example).
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Reported-by: Randy E. Witt
Reviewed-by: Eric Dumazet
Signed-off-by: Vinicius Costa Gomes
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: sk\_data\_ready() operation takes a length parameter.
Delete the local variable we used for that.]
Signed-off-by: Ben Hutchings
commit 0b13359cb718925be0e13eb4713d14434a681fbf
Author: Eric W. Biederman
Date: Wed Mar 14 18:20:29 2018 -0500
fs: Teach path\_connected to handle nfs filesystems with multiple roots.
commit 95dd77580ccd66a0da96e6d4696945b8cea39431 upstream.
On nfsv2 and nfsv3 the nfs server can export subsets of the same
filesystem and report the same filesystem identifier, so that the nfs
client can know they are the same filesystem. The subsets can be from
disjoint directory trees. The nfsv2 and nfsv3 filesystems provides no
way to find the common root of all directory trees exported form the
server with the same filesystem identifier.
The practical result is that in struct super s\_root for nfs s\_root is
not necessarily the root of the filesystem. The nfs mount code sets
s\_root to the root of the first subset of the nfs filesystem that the
kernel mounts.
This effects the dcache invalidation code in generic\_shutdown\_super
currently called shrunk\_dcache\_for\_umount and that code for years
has gone through an additional list of dentries that might be dentry
trees that need to be freed to accomodate nfs.
When I wrote path\_connected I did not realize nfs was so special, and
it's hueristic for avoiding calling is\_subdir can fail.
The practical case where this fails is when there is a move of a
directory from the subtree exposed by one nfs mount to the subtree
exposed by another nfs mount. This move can happen either locally or
remotely. With the remote case requiring that the move directory be cached
before the move and that after the move someone walks the path
to where the move directory now exists and in so doing causes the
already cached directory to be moved in the dcache through the magic
of d\_splice\_alias.
If someone whose working directory is in the move directory or a
subdirectory and now starts calling .. from the initial mount of nfs
(where s\_root == mnt\_root), then path\_connected as a heuristic will
not bother with the is\_subdir check. As s\_root really is not the root
of the nfs filesystem this heuristic is wrong, and the path may
actually not be connected and path\_connected can fail.
The is\_subdir function might be cheap enough that we can call it
unconditionally. Verifying that will take some benchmarking and
the result may not be the same on all kernels this fix needs
to be backported to. So I am avoiding that for now.
Filesystems with snapshots such as nilfs and btrfs do something
similar. But as the directory tree of the snapshots are disjoint
from one another and from the main directory tree rename won't move
things between them and this problem will not occur.
Reported-by: Al Viro
Fixes: 397d425dc26d ("vfs: Test for and handle paths that are unreachable from their mnt\_root")
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Al Viro
[bwh: Backported to 3.2:
- Add the super\_block::s\_iflags field
- Adjust context]
Signed-off-by: Ben Hutchings
commit 080c12d8adf93365bd13606074b3394042820c67
Author: Michel Dänzer
Date: Wed Mar 14 18:14:04 2018 +0100
drm/radeon: Don't turn off DP sink when disconnected
commit 2681bc79eeb640562c932007bfebbbdc55bf6a7d upstream.
Turning off the sink in this case causes various issues, because
userspace expects it to stay on until it turns it off explicitly.
Instead, turn the sink off and back on when a display is connected
again. This dance seems necessary for link training to work correctly.
Bugzilla: https://bugs.freedesktop.org/105308
Reviewed-by: Alex Deucher
Signed-off-by: Michel Dänzer
Signed-off-by: Alex Deucher
Signed-off-by: Ben Hutchings
commit 2201f59fee9b0f5bc6cf1dc729ab9900de423ced
Author: Bastian Stender
Date: Thu Mar 8 15:08:11 2018 +0100
mmc: block: fix updating ext\_csd caches on ioctl call
commit e74ef2194b41ba5e511fab29fe5ff00e72d2f42a upstream.
PARTITION\_CONFIG is cached in mmc\_card->ext\_csd.part\_config and the
currently active partition in mmc\_blk\_data->part\_curr. These caches do
not always reflect changes if the ioctl call modifies the
PARTITION\_CONFIG registers, e.g. by changing BOOT\_PARTITION\_ENABLE.
Write the PARTITION\_CONFIG value extracted from the ioctl call to the
cache and update the currently active partition accordingly. This
ensures that the user space cannot change the values behind the
kernel's back. The next call to mmc\_blk\_part\_switch() will operate on
the data set by the ioctl and reflect the changes appropriately.
Signed-off-by: Bastian Stender
Signed-off-by: Jan Luebbe
Signed-off-by: Ulf Hansson
[bwh: Backported to 3.2:
- Also add the definition of MMC\_EXTRACT\_INDEX\_FROM\_ARG()
- Adjust filename, context]
Signed-off-by: Ben Hutchings
commit 05a45868db488c27ff9f81e0302a35303f574032
Author: Leon Romanovsky
Date: Tue Mar 13 11:43:23 2018 +0200
RDMA/ucma: Fix access to non-initialized CM\_ID object
commit 7688f2c3bbf55e52388e37ac5d63ca471a7712e1 upstream.
The attempt to join multicast group without ensuring that CMA device
exists will lead to the following crash reported by syzkaller.
[ 64.076794] BUG: KASAN: null-ptr-deref in rdma\_join\_multicast+0x26e/0x12c0
[ 64.076797] Read of size 8 at addr 00000000000000b0 by task join/691
[ 64.076797]
[ 64.076800] CPU: 1 PID: 691 Comm: join Not tainted 4.16.0-rc1-00219-gb97853b65b93 #23
[ 64.076802] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.11.0-0-g63451fca13-prebuilt.qemu-proj4
[ 64.076803] Call Trace:
[ 64.076809] dump\_stack+0x5c/0x77
[ 64.076817] kasan\_report+0x163/0x380
[ 64.085859] ? rdma\_join\_multicast+0x26e/0x12c0
[ 64.086634] rdma\_join\_multicast+0x26e/0x12c0
[ 64.087370] ? rdma\_disconnect+0xf0/0xf0
[ 64.088579] ? \_\_radix\_tree\_replace+0xc3/0x110
[ 64.089132] ? node\_tag\_clear+0x81/0xb0
[ 64.089606] ? idr\_alloc\_u32+0x12e/0x1a0
[ 64.090517] ? \_\_fprop\_inc\_percpu\_max+0x150/0x150
[ 64.091768] ? tracing\_record\_taskinfo+0x10/0xc0
[ 64.092340] ? idr\_alloc+0x76/0xc0
[ 64.092951] ? idr\_alloc\_u32+0x1a0/0x1a0
[ 64.093632] ? ucma\_process\_join+0x23d/0x460
[ 64.094510] ucma\_process\_join+0x23d/0x460
[ 64.095199] ? ucma\_migrate\_id+0x440/0x440
[ 64.095696] ? futex\_wake+0x10b/0x2a0
[ 64.096159] ucma\_join\_multicast+0x88/0xe0
[ 64.096660] ? ucma\_process\_join+0x460/0x460
[ 64.097540] ? \_copy\_from\_user+0x5e/0x90
[ 64.098017] ucma\_write+0x174/0x1f0
[ 64.098640] ? ucma\_resolve\_route+0xf0/0xf0
[ 64.099343] ? rb\_erase\_cached+0x6c7/0x7f0
[ 64.099839] \_\_vfs\_write+0xc4/0x350
[ 64.100622] ? perf\_syscall\_enter+0xe4/0x5f0
[ 64.101335] ? kernel\_read+0xa0/0xa0
[ 64.103525] ? perf\_sched\_cb\_inc+0xc0/0xc0
[ 64.105510] ? syscall\_exit\_register+0x2a0/0x2a0
[ 64.107359] ? \_\_switch\_to+0x351/0x640
[ 64.109285] ? fsnotify+0x899/0x8f0
[ 64.111610] ? fsnotify\_unmount\_inodes+0x170/0x170
[ 64.113876] ? \_\_fsnotify\_update\_child\_dentry\_flags+0x30/0x30
[ 64.115813] ? ring\_buffer\_record\_is\_on+0xd/0x20
[ 64.117824] ? \_\_fget+0xa8/0xf0
[ 64.119869] vfs\_write+0xf7/0x280
[ 64.122001] SyS\_write+0xa1/0x120
[ 64.124213] ? SyS\_read+0x120/0x120
[ 64.126644] ? SyS\_read+0x120/0x120
[ 64.128563] do\_syscall\_64+0xeb/0x250
[ 64.130732] entry\_SYSCALL\_64\_after\_hwframe+0x21/0x86
[ 64.132984] RIP: 0033:0x7f5c994ade99
[ 64.135699] RSP: 002b:00007f5c99b97d98 EFLAGS: 00000246 ORIG\_RAX: 0000000000000001
[ 64.138740] RAX: ffffffffffffffda RBX: 00000000200001e4 RCX: 00007f5c994ade99
[ 64.141056] RDX: 00000000000000a0 RSI: 00000000200001c0 RDI: 0000000000000015
[ 64.143536] RBP: 00007f5c99b97ec0 R08: 0000000000000000 R09: 0000000000000000
[ 64.146017] R10: 0000000000000000 R11: 0000000000000246 R12: 00007f5c99b97fc0
[ 64.148608] R13: 0000000000000000 R14: 00007fff660e1c40 R15: 00007f5c99b989c0
[ 64.151060]
[ 64.153703] Disabling lock debugging due to kernel taint
[ 64.156032] BUG: unable to handle kernel NULL pointer dereference at 00000000000000b0
[ 64.159066] IP: rdma\_join\_multicast+0x26e/0x12c0
[ 64.161451] PGD 80000001d0298067 P4D 80000001d0298067 PUD 1dea39067 PMD 0
[ 64.164442] Oops: 0000 [#1] SMP KASAN PTI
[ 64.166817] CPU: 1 PID: 691 Comm: join Tainted: G B 4.16.0-rc1-00219-gb97853b65b93 #23
[ 64.170004] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.11.0-0-g63451fca13-prebuilt.qemu-proj4
[ 64.174985] RIP: 0010:rdma\_join\_multicast+0x26e/0x12c0
[ 64.177246] RSP: 0018:ffff8801c8207860 EFLAGS: 00010282
[ 64.179901] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff94789522
[ 64.183344] RDX: 1ffffffff2d50fa5 RSI: 0000000000000297 RDI: 0000000000000297
[ 64.186237] RBP: ffff8801c8207a50 R08: 0000000000000000 R09: ffffed0039040ea7
[ 64.189328] R10: 0000000000000001 R11: ffffed0039040ea6 R12: 0000000000000000
[ 64.192634] R13: 0000000000000000 R14: ffff8801e2022800 R15: ffff8801d4ac2400
[ 64.196105] FS: 00007f5c99b98700(0000) GS:ffff8801e5d00000(0000) knlGS:0000000000000000
[ 64.199211] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 64.202046] CR2: 00000000000000b0 CR3: 00000001d1c48004 CR4: 00000000003606a0
[ 64.205032] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 64.208221] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 64.211554] Call Trace:
[ 64.213464] ? rdma\_disconnect+0xf0/0xf0
[ 64.216124] ? \_\_radix\_tree\_replace+0xc3/0x110
[ 64.219337] ? node\_tag\_clear+0x81/0xb0
[ 64.222140] ? idr\_alloc\_u32+0x12e/0x1a0
[ 64.224422] ? \_\_fprop\_inc\_percpu\_max+0x150/0x150
[ 64.226588] ? tracing\_record\_taskinfo+0x10/0xc0
[ 64.229763] ? idr\_alloc+0x76/0xc0
[ 64.232186] ? idr\_alloc\_u32+0x1a0/0x1a0
[ 64.234505] ? ucma\_process\_join+0x23d/0x460
[ 64.237024] ucma\_process\_join+0x23d/0x460
[ 64.240076] ? ucma\_migrate\_id+0x440/0x440
[ 64.243284] ? futex\_wake+0x10b/0x2a0
[ 64.245302] ucma\_join\_multicast+0x88/0xe0
[ 64.247783] ? ucma\_process\_join+0x460/0x460
[ 64.250841] ? \_copy\_from\_user+0x5e/0x90
[ 64.253878] ucma\_write+0x174/0x1f0
[ 64.257008] ? ucma\_resolve\_route+0xf0/0xf0
[ 64.259877] ? rb\_erase\_cached+0x6c7/0x7f0
[ 64.262746] \_\_vfs\_write+0xc4/0x350
[ 64.265537] ? perf\_syscall\_enter+0xe4/0x5f0
[ 64.267792] ? kernel\_read+0xa0/0xa0
[ 64.270358] ? perf\_sched\_cb\_inc+0xc0/0xc0
[ 64.272575] ? syscall\_exit\_register+0x2a0/0x2a0
[ 64.275367] ? \_\_switch\_to+0x351/0x640
[ 64.277700] ? fsnotify+0x899/0x8f0
[ 64.280530] ? fsnotify\_unmount\_inodes+0x170/0x170
[ 64.283156] ? \_\_fsnotify\_update\_child\_dentry\_flags+0x30/0x30
[ 64.286182] ? ring\_buffer\_record\_is\_on+0xd/0x20
[ 64.288749] ? \_\_fget+0xa8/0xf0
[ 64.291136] vfs\_write+0xf7/0x280
[ 64.292972] SyS\_write+0xa1/0x120
[ 64.294965] ? SyS\_read+0x120/0x120
[ 64.297474] ? SyS\_read+0x120/0x120
[ 64.299751] do\_syscall\_64+0xeb/0x250
[ 64.301826] entry\_SYSCALL\_64\_after\_hwframe+0x21/0x86
[ 64.304352] RIP: 0033:0x7f5c994ade99
[ 64.306711] RSP: 002b:00007f5c99b97d98 EFLAGS: 00000246 ORIG\_RAX: 0000000000000001
[ 64.309577] RAX: ffffffffffffffda RBX: 00000000200001e4 RCX: 00007f5c994ade99
[ 64.312334] RDX: 00000000000000a0 RSI: 00000000200001c0 RDI: 0000000000000015
[ 64.315783] RBP: 00007f5c99b97ec0 R08: 0000000000000000 R09: 0000000000000000
[ 64.318365] R10: 0000000000000000 R11: 0000000000000246 R12: 00007f5c99b97fc0
[ 64.320980] R13: 0000000000000000 R14: 00007fff660e1c40 R15: 00007f5c99b989c0
[ 64.323515] Code: e8 e8 79 08 ff 4c 89 ff 45 0f b6 a7 b8 01 00 00 e8 68 7c 08 ff 49 8b 1f 4d 89 e5 49 c1 e4 04 48 8
[ 64.330753] RIP: rdma\_join\_multicast+0x26e/0x12c0 RSP: ffff8801c8207860
[ 64.332979] CR2: 00000000000000b0
[ 64.335550] ---[ end trace 0c00c17a408849c1 ]---
Reported-by:
Fixes: c8f6a362bf3e ("RDMA/cma: Add multicast communication support")
Signed-off-by: Leon Romanovsky
Reviewed-by: Sean Hefty
Signed-off-by: Doug Ledford
Signed-off-by: Ben Hutchings
commit 3126c14e8138c7dd32a027932af76234a9c4d3c7
Author: Florian Westphal
Date: Fri Mar 9 14:27:31 2018 +0100
netfilter: bridge: ebt\_among: add more missing match size checks
commit c8d70a700a5b486bfa8e5a7d33d805389f6e59f9 upstream.
ebt\_among is special, it has a dynamic match size and is exempt
from the central size checks.
commit c4585a2823edf ("bridge: ebt\_among: add missing match size checks")
added validation for pool size, but missed fact that the macros
ebt\_among\_wh\_src/dst can already return out-of-bound result because
they do not check value of wh\_src/dst\_ofs (an offset) vs. the size
of the match that userspace gave to us.
v2:
check that offset has correct alignment.
Paolo Abeni points out that we should also check that src/dst
wormhash arrays do not overlap, and src + length lines up with
start of dst (or vice versa).
v3: compact wormhash\_sizes\_valid() part
NB: Fixes tag is intentionally wrong, this bug exists from day
one when match was added for 2.6 kernel. Tag is there so stable
maintainers will notice this one too.
Tested with same rules from the earlier patch.
Fixes: c4585a2823edf ("bridge: ebt\_among: add missing match size checks")
Reported-by:
Signed-off-by: Florian Westphal
Reviewed-by: Eric Dumazet
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Ben Hutchings
commit b16f74899b271e7cc7f3897852698e28aa223dda
Author: Florian Westphal
Date: Mon Feb 19 03:01:45 2018 +0100
netfilter: bridge: ebt\_among: add missing match size checks
commit c4585a2823edf4d1326da44d1524ecbfda26bb37 upstream.
ebt\_among is special, it has a dynamic match size and is exempt
from the central size checks.
Therefore it must check that the size of the match structure
provided from userspace is sane by making sure em->match\_size
is at least the minimum size of the expected structure.
The module has such a check, but its only done after accessing
a structure that might be out of bounds.
tested with: ebtables -A INPUT ... \
--among-dst fe:fe:fe:fe:fe:fe
--among-dst fe:fe:fe:fe:fe:fe --among-src fe:fe:fe:fe:ff:f,fe:fe:fe:fe:fe:fb,fe:fe:fe:fe:fc:fd,fe:fe:fe:fe:fe:fd,fe:fe:fe:fe:fe:fe
--among-src fe:fe:fe:fe:ff:f,fe:fe:fe:fe:fe:fa,fe:fe:fe:fe:fe:fd,fe:fe:fe:fe:fe:fe,fe:fe:fe:fe:fe:fe
Reported-by:
Signed-off-by: Florian Westphal
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Ben Hutchings
commit 1282010aae8a0945fcf70b2a3c8ffbd921faed04
Author: Takashi Iwai
Date: Fri Mar 9 22:23:31 2018 +0100
ALSA: seq: Clear client entry before deleting else at closing
commit a2ff19f7b70118ced291a28d5313469914de451b upstream.
When releasing a client, we need to clear the clienttab[] entry at
first, then call snd\_seq\_queue\_client\_leave(). Otherwise, the
in-flight cell in the queue might be picked up by the timer interrupt
via snd\_seq\_check\_queue() before calling snd\_seq\_queue\_client\_leave(),
and it's delivered to another queue while the client is clearing
queues. This may eventually result in an uncleared cell remaining in
a queue, and the later snd\_seq\_pool\_delete() may need to wait for a
long time until the event gets really processed.
By moving the clienttab[] clearance at the beginning of release, any
event delivery of a cell belonging to this client will fail at a later
point, since snd\_seq\_client\_ptr() returns NULL. Thus the cell that
was picked up by the timer interrupt will be returned immediately
without further delivery, and the long stall of snd\_seq\_delete\_pool()
can be avoided, too.
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit deeaca310dc1d79b70384810c47b64b550f6bef7
Author: Takashi Iwai
Date: Fri Mar 9 21:58:28 2018 +0100
ALSA: seq: Fix possible UAF in snd\_seq\_check\_queue()
commit d0f833065221cbfcbadf19fd4102bcfa9330006a upstream.
Although we've covered the races between concurrent write() and
ioctl() in the previous patch series, there is still a possible UAF in
the following scenario:
A: user client closed B: timer irq
-> snd\_seq\_release() -> snd\_seq\_timer\_interrupt()
-> snd\_seq\_free\_client() -> snd\_seq\_check\_queue()
-> cell = snd\_seq\_prioq\_cell\_peek()
-> snd\_seq\_prioq\_leave()
.... removing all cells
-> snd\_seq\_pool\_done()
.... vfree()
-> snd\_seq\_compare\_tick\_time(cell)
... Oops
So the problem is that a cell is peeked and accessed without any
protection until it's retrieved from the queue again via
snd\_seq\_prioq\_cell\_out().
This patch tries to address it, also cleans up the code by a slight
refactoring. snd\_seq\_prioq\_cell\_out() now receives an extra pointer
argument. When it's non-NULL, the function checks the event timestamp
with the given pointer. The caller needs to pass the right reference
either to snd\_seq\_tick or snd\_seq\_realtime depending on the event
timestamp type.
A good news is that the above change allows us to remove the
snd\_seq\_prioq\_cell\_peek(), too, thus the patch actually reduces the
code size.
Reviewed-by: Nicolai Stange
Signed-off-by: Takashi Iwai
[bwh: Backported to 3.2: Deleted function had different log message]
Signed-off-by: Ben Hutchings
commit 47e0a4def4d2e1dfcef1fcf1b78706c24584351b
Author: Kai-Heng Feng
Date: Thu Mar 8 17:17:17 2018 +0200
xhci: Fix front USB ports on ASUS PRIME B350M-A
commit 191edc5e2e515aab1075a3f0ef23599e80be5f59 upstream.
When a USB device gets plugged on ASUS PRIME B350M-A's front ports, the
xHC stops working:
[ 549.114587] xhci\_hcd 0000:02:00.0: WARN: xHC CMD\_RUN timeout
[ 549.114608] suspend\_common(): xhci\_pci\_suspend+0x0/0xc0 returns -110
[ 549.114638] xhci\_hcd 0000:02:00.0: can't suspend (hcd\_pci\_runtime\_suspend returned -110)
Delay before running xHC command CMD\_RUN can workaround the issue.
Use a new quirk to make the delay only targets to the affected xHC.
Signed-off-by: Kai-Heng Feng
Signed-off-by: Mathias Nyman
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit b8021dfb921a69ec50ccb866178367f95c7b7878
Author: Pete Zaitcev
Date: Fri Mar 9 00:21:14 2018 -0600
usb: usbmon: Read text within supplied buffer size
commit a5f596830e27e15f7a0ecd6be55e433d776986d8 upstream.
This change fixes buffer overflows and silent data corruption with the
usbmon device driver text file read operations.
Signed-off-by: Fredrik Noring
Signed-off-by: Pete Zaitcev
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 2326c561a9a9d8a3d50a0bfe26bd54b6c26fbb9a
Author: Julia Lawall
Date: Sat Dec 26 22:57:44 2015 +0100
USB: usbmon: remove assignment from IS\_ERR argument
commit 46c236dc7d1212d7417e6fb0317f91c44c719322 upstream.
The semantic patch that makes this change is as follows:
(http://coccinelle.lip6.fr/)
//
@@
expression e1,e2;
statement S1,S2;
@@
+e1 = e2;
if (IS\_ERR(
e1
- = e2
)) S1 else S2
//
Signed-off-by: Julia Lawall
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit cbad884cdf3c27261eb1eebc9ba4a107dc32a35c
Author: Tony Luck
Date: Tue Mar 6 15:21:41 2018 +0100
x86/MCE: Save microcode revision in machine check records
commit fa94d0c6e0f3431523f5701084d799c77c7d4a4f upstream.
Updating microcode used to be relatively rare. Now that it has become
more common we should save the microcode version in a machine check
record to make sure that those people looking at the error have this
important information bundled with the rest of the logged information.
[ Borislav: Simplify a bit. ]
Signed-off-by: Tony Luck
Signed-off-by: Borislav Petkov
Signed-off-by: Thomas Gleixner
Cc: Yazen Ghannam
Cc: linux-edac
Link: http://lkml.kernel.org/r/20180301233449.24311-1-tony.luck@intel.com
[bwh: Backported to 3.2:
- Add other new fields to struct mce, to match upstream UAPI
- Adjust filename, context]
Signed-off-by: Ben Hutchings
commit 496f3444b4539cb0e4a3fde7d7ab39e2bd03c027
Author: Leon Romanovsky
Date: Wed Mar 7 18:49:16 2018 +0200
RDMA/ucma: Check that user doesn't overflow QP state
commit a5880b84430316e3e1c1f5d23aa32ec6000cc717 upstream.
The QP state is limited and declared in enum ib\_qp\_state,
but ucma user was able to supply any possible (u32) value.
Reported-by: syzbot+0df1ab766f8924b1edba@syzkaller.appspotmail.com
Fixes: 75216638572f ("RDMA/cma: Export rdma cm interface to userspace")
Signed-off-by: Leon Romanovsky
Signed-off-by: Doug Ledford
Signed-off-by: Ben Hutchings
commit 225c79af589fd48a19c42e9f50cfa05a24815bda
Author: Leon Romanovsky
Date: Wed Mar 7 14:49:09 2018 +0200
RDMA/ucma: Limit possible option size
commit 6a21dfc0d0db7b7e0acedce67ca533a6eb19283c upstream.
Users of ucma are supposed to provide size of option level,
in most paths it is supposed to be equal to u8 or u16, but
it is not the case for the IB path record, where it can be
multiple of struct ib\_path\_rec\_data.
This patch takes simplest possible approach and prevents providing
values more than possible to allocate.
Reported-by: syzbot+a38b0e9f694c379ca7ce@syzkaller.appspotmail.com
Fixes: 7ce86409adcd ("RDMA/ucma: Allow user space to set service type")
Signed-off-by: Leon Romanovsky
Signed-off-by: Doug Ledford
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 4d2a62907278533789973df7b28f404c17b3988c
Author: Eric Dumazet
Date: Tue Mar 6 07:54:53 2018 -0800
l2tp: do not accept arbitrary sockets
commit 17cfe79a65f98abe535261856c5aef14f306dff7 upstream.
syzkaller found an issue caused by lack of sufficient checks
in l2tp\_tunnel\_create()
RAW sockets can not be considered as UDP ones for instance.
In another patch, we shall replace all pr\_err() by less intrusive
pr\_debug() so that syzkaller can find other bugs faster.
Acked-by: Guillaume Nault
Acked-by: James Chapman
==================================================================
BUG: KASAN: slab-out-of-bounds in setup\_udp\_tunnel\_sock+0x3ee/0x5f0 net/ipv4/udp\_tunnel.c:69
dst\_release: dst:00000000d53d0d0f refcnt:-1
Write of size 1 at addr ffff8801d013b798 by task syz-executor3/6242
CPU: 1 PID: 6242 Comm: syz-executor3 Not tainted 4.16.0-rc2+ #253
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
\_\_dump\_stack lib/dump\_stack.c:17 [inline]
dump\_stack+0x194/0x24d lib/dump\_stack.c:53
print\_address\_description+0x73/0x250 mm/kasan/report.c:256
kasan\_report\_error mm/kasan/report.c:354 [inline]
kasan\_report+0x23b/0x360 mm/kasan/report.c:412
\_\_asan\_report\_store1\_noabort+0x17/0x20 mm/kasan/report.c:435
setup\_udp\_tunnel\_sock+0x3ee/0x5f0 net/ipv4/udp\_tunnel.c:69
l2tp\_tunnel\_create+0x1354/0x17f0 net/l2tp/l2tp\_core.c:1596
pppol2tp\_connect+0x14b1/0x1dd0 net/l2tp/l2tp\_ppp.c:707
SYSC\_connect+0x213/0x4a0 net/socket.c:1640
SyS\_connect+0x24/0x30 net/socket.c:1621
do\_syscall\_64+0x280/0x940 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x42/0xb7
Fixes: fd558d186df2 ("l2tp: Split pppol2tp patch into separate l2tp and ppp parts")
Signed-off-by: Eric Dumazet
Reported-by: syzbot
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 8dfd783824a7f5b3b23574fecc99a41aa1c1198f
Author: Danilo Krummrich
Date: Tue Mar 6 09:38:49 2018 +0100
usb: quirks: add control message delay for 1b1c:1b20
commit cb88a0588717ba6c756cb5972d75766b273a6817 upstream.
Corsair Strafe RGB keyboard does not respond to usb control messages
sometimes and hence generates timeouts.
Commit de3af5bf259d ("usb: quirks: add delay init quirk for Corsair
Strafe RGB keyboard") tried to fix those timeouts by adding
USB\_QUIRK\_DELAY\_INIT.
Unfortunately, even with this quirk timeouts of usb\_control\_msg()
can still be seen, but with a lower frequency (approx. 1 out of 15):
[ 29.103520] usb 1-8: string descriptor 0 read error: -110
[ 34.363097] usb 1-8: can't set config #1, error -110
Adding further delays to different locations where usb control
messages are issued just moves the timeouts to other locations,
e.g.:
[ 35.400533] usbhid 1-8:1.0: can't add hid device: -110
[ 35.401014] usbhid: probe of 1-8:1.0 failed with error -110
The only way to reliably avoid those issues is having a pause after
each usb control message. In approx. 200 boot cycles no more timeouts
were seen.
Addionaly, keep USB\_QUIRK\_DELAY\_INIT as it turned out to be necessary
to have the delay in hub\_port\_connect() after hub\_port\_init().
The overall boot time seems not to be influenced by these additional
delays, even on fast machines and lightweight distributions.
Fixes: de3af5bf259d ("usb: quirks: add delay init quirk for Corsair Strafe RGB keyboard")
Signed-off-by: Danilo Krummrich
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit aa869750c78648d1ccae1a7e23239e64cc0859c9
Author: Benjamin Poirier
Date: Tue Feb 20 15:12:00 2018 +0900
e1000e: Fix check\_for\_link return value with autoneg off
commit 4e7dc08e57c95673d2edaba8983c3de4dd1f65f5 upstream.
When autoneg is off, the .check\_for\_link callback functions clear the
get\_link\_status flag and systematically return a "pseudo-error". This means
that the link is not detected as up until the next execution of the
e1000\_watchdog\_task() 2 seconds later.
Fixes: 19110cfbb34d ("e1000e: Separate signaling for link check/link up")
Signed-off-by: Benjamin Poirier
Acked-by: Sasha Neftin
Tested-by: Aaron Brown
Signed-off-by: Jeff Kirsher
[bwh: Backported to 3.2: adjust filename, context]
Signed-off-by: Ben Hutchings
commit 950c0f06dd3617fd1da39d2fb28dfc5acdc7f2ce
Author: Hans de Goede
Date: Fri Mar 2 11:36:32 2018 +0100
ahci: Add PCI-id for the Highpoint Rocketraid 644L card
commit 28b2182dad43f6f8fcbd167539a26714fd12bd64 upstream.
Like the Highpoint Rocketraid 642L and cards using a Marvel 88SE9235
controller in general, this RAID card also supports AHCI mode and short
of a custom driver, this is the only way to make it work under Linux.
Note that even though the card is called to 644L, it has a product-id
of 0x0645.
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1534106
Signed-off-by: Hans de Goede
Signed-off-by: Tejun Heo
Acked-by: Bjorn Helgaas
Signed-off-by: Ben Hutchings
commit 1063c9391c430f0059780c55be0874dce91e59d2
Author: Ulrich Hecht
Date: Thu Feb 15 13:02:27 2018 +0100
serial: sh-sci: prevent lockup on full TTY buffers
commit 7842055bfce4bf0170d0f61df8b2add8399697be upstream.
When the TTY buffers fill up to the configured maximum, a system lockup
occurs:
[ 598.820128] INFO: rcu\_preempt detected stalls on CPUs/tasks:
[ 598.825796] 0-...!: (1 GPs behind) idle=5a6/2/0 softirq=1974/1974 fqs=1
[ 598.832577] (detected by 3, t=62517 jiffies, g=296, c=295, q=126)
[ 598.838755] Task dump for CPU 0:
[ 598.841977] swapper/0 R running task 0 0 0 0x00000022
[ 598.849023] Call trace:
[ 598.851476] \_\_switch\_to+0x98/0xb0
[ 598.854870] (null)
This can be prevented by doing a dummy read of the RX data register.
This issue affects both HSCIF and SCIF ports. Reported for R-Car H3 ES2.0;
reproduced and fixed on H3 ES1.1. Probably affects other R-Car platforms
as well.
Reported-by: Yoshihiro Shimoda
Signed-off-by: Ulrich Hecht
Reviewed-by: Geert Uytterhoeven
Tested-by: Nguyen Viet Dung
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2:
- Use sci\_in()
- Adjust context]
Signed-off-by: Ben Hutchings
commit 50bf8fc9a9a95b1c97b79278177a2378f4c7d6ad
Author: Tejun Heo
Date: Tue Feb 13 07:38:08 2018 -0800
tty: make n\_tty\_read() always abort if hangup is in progress
commit 28b0f8a6962a24ed21737578f3b1b07424635c9e upstream.
A tty is hung up by \_\_tty\_hangup() setting file->f\_op to
hung\_up\_tty\_fops, which is skipped on ttys whose write operation isn't
tty\_write(). This means that, for example, /dev/console whose write
op is redirected\_tty\_write() is never actually marked hung up.
Because n\_tty\_read() uses the hung up status to decide whether to
abort the waiting readers, the lack of hung-up marking can lead to the
following scenario.
1. A session contains two processes. The leader and its child. The
child ignores SIGHUP.
2. The leader exits and starts disassociating from the controlling
terminal (/dev/console).
3. \_\_tty\_hangup() skips setting f\_op to hung\_up\_tty\_fops.
4. SIGHUP is delivered and ignored.
5. tty\_ldisc\_hangup() is invoked. It wakes up the waits which should
clear the read lockers of tty->ldisc\_sem.
6. The reader wakes up but because tty\_hung\_up\_p() is false, it
doesn't abort and goes back to sleep while read-holding
tty->ldisc\_sem.
7. The leader progresses to tty\_ldisc\_lock() in tty\_ldisc\_hangup()
and is now stuck in D sleep indefinitely waiting for
tty->ldisc\_sem.
The following is Alan's explanation on why some ttys aren't hung up.
http://lkml.kernel.org/r/20171101170908.6ad08580@alans-desktop
1. It broke the serial consoles because they would hang up and close
down the hardware. With tty\_port that \*should\* be fixable properly
for any cases remaining.
2. The console layer was (and still is) completely broken and doens't
refcount properly. So if you turn on console hangups it breaks (as
indeed does freeing consoles and half a dozen other things).
As neither can be fixed quickly, this patch works around the problem
by introducing a new flag, TTY\_HUPPING, which is used solely to tell
n\_tty\_read() that hang-up is in progress for the console and the
readers should be aborted regardless of the hung-up status of the
device.
The following is a sample hung task warning caused by this issue.
INFO: task agetty:2662 blocked for more than 120 seconds.
Not tainted 4.11.3-dbg-tty-lockup-02478-gfd6c7ee-dirty #28
"echo 0 > /proc/sys/kernel/hung\_task\_timeout\_secs" disables this message.
0 2662 1 0x00000086
Call Trace:
\_\_schedule+0x267/0x890
schedule+0x36/0x80
schedule\_timeout+0x23c/0x2e0
ldsem\_down\_write+0xce/0x1f6
tty\_ldisc\_lock+0x16/0x30
tty\_ldisc\_hangup+0xb3/0x1b0
\_\_tty\_hangup+0x300/0x410
disassociate\_ctty+0x6c/0x290
do\_exit+0x7ef/0xb00
do\_group\_exit+0x3f/0xa0
get\_signal+0x1b3/0x5d0
do\_signal+0x28/0x660
exit\_to\_usermode\_loop+0x46/0x86
do\_syscall\_64+0x9c/0xb0
entry\_SYSCALL64\_slow\_path+0x25/0x25
The following is the repro. Run "$PROG /dev/console". The parent
process hangs in D state.
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
int main(int argc, char \*\*argv)
{
struct sigaction sact = { .sa\_handler = SIG\_IGN };
struct timespec ts1s = { .tv\_sec = 1 };
pid\_t pid;
int fd;
if (argc < 2) {
fprintf(stderr, "test-hung-tty /dev/$TTY\n");
return 1;
}
/\* fork a child to ensure that it isn't already the session leader \*/
pid = fork();
if (pid < 0) {
perror("fork");
return 1;
}
if (pid > 0) {
/\* top parent, wait for everyone \*/
while (waitpid(-1, NULL, 0) >= 0)
;
if (errno != ECHILD)
perror("waitpid");
return 0;
}
/\* new session, start a new session and set the controlling tty \*/
if (setsid() < 0) {
perror("setsid");
return 1;
}
fd = open(argv[1], O\_RDWR);
if (fd < 0) {
perror("open");
return 1;
}
if (ioctl(fd, TIOCSCTTY, 1) < 0) {
perror("ioctl");
return 1;
}
/\* fork a child, sleep a bit and exit \*/
pid = fork();
if (pid < 0) {
perror("fork");
return 1;
}
if (pid > 0) {
nanosleep(&ts1s, NULL);
printf("Session leader exiting\n");
exit(0);
}
/\*
\* The child ignores SIGHUP and keeps reading from the controlling
\* tty. Because SIGHUP is ignored, the child doesn't get killed on
\* parent exit and the bug in n\_tty makes the read(2) block the
\* parent's control terminal hangup attempt. The parent ends up in
\* D sleep until the child is explicitly killed.
\*/
sigaction(SIGHUP, &sact, NULL);
printf("Child reading tty\n");
while (1) {
char buf[1024];
if (read(fd, buf, sizeof(buf)) < 0) {
perror("read");
return 1;
}
}
return 0;
}
Signed-off-by: Tejun Heo
Cc: Alan Cox
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: TTY\_HUPPING is not really a new flag; it's an old flag
that was wrongly removed in 3.19. Just add the test for it in n\_tty\_read().]
Signed-off-by: Ben Hutchings
commit 72686d527c0d3566ec96ec6d834ce08596c10c62
Author: Jeremy Boone
Date: Thu Feb 8 12:32:06 2018 -0800
tpm\_tis: fix potential buffer overruns caused by bit glitches on the bus
commit 6bb320ca4a4a7b5b3db8c8d7250cc40002046878 upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Signed-off-by: James Bottomley
Tested-by: Jarkko Sakkinen
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
[bwh: Backported to 3.2: adjust filename]
Signed-off-by: Ben Hutchings
commit dbbb3062dd53e7950a18bc05cca296fb2803b10b
Author: James Chapman
Date: Fri Feb 23 17:45:46 2018 +0000
l2tp: fix race in pppol2tp\_release with session object destroy
commit d02ba2a6110c530a32926af8ad441111774d2893 upstream.
pppol2tp\_release uses call\_rcu to put the final ref on its socket. But
the session object doesn't hold a ref on the session socket so may be
freed while the pppol2tp\_put\_sk RCU callback is scheduled. Fix this by
having the session hold a ref on its socket until the session is
destroyed. It is this ref that is dropped via call\_rcu.
Sessions are also deleted via l2tp\_tunnel\_closeall. This must now also put
the final ref via call\_rcu. So move the call\_rcu call site into
pppol2tp\_session\_close so that this happens in both destroy paths. A
common destroy path should really be implemented, perhaps with
l2tp\_tunnel\_closeall calling l2tp\_session\_delete like pppol2tp\_release
does, but this will be looked at later.
ODEBUG: activate active (active state 1) object type: rcu\_head hint: (null)
WARNING: CPU: 3 PID: 13407 at lib/debugobjects.c:291 debug\_print\_object+0x166/0x220
Modules linked in:
CPU: 3 PID: 13407 Comm: syzbot\_19c09769 Not tainted 4.16.0-rc2+ #38
Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
RIP: 0010:debug\_print\_object+0x166/0x220
RSP: 0018:ffff880013647a00 EFLAGS: 00010082
RAX: dffffc0000000008 RBX: 0000000000000003 RCX: ffffffff814d3333
RDX: 0000000000000000 RSI: 0000000000000001 RDI: ffff88001a59f6d0
RBP: ffff880013647a40 R08: 0000000000000000 R09: 0000000000000001
R10: ffff8800136479a8 R11: 0000000000000000 R12: 0000000000000001
R13: ffffffff86161420 R14: ffffffff85648b60 R15: 0000000000000000
FS: 0000000000000000(0000) GS:ffff88001a580000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020e77000 CR3: 0000000006022000 CR4: 00000000000006e0
Call Trace:
debug\_object\_activate+0x38b/0x530
? debug\_object\_assert\_init+0x3b0/0x3b0
? \_\_mutex\_unlock\_slowpath+0x85/0x8b0
? pppol2tp\_session\_destruct+0x110/0x110
\_\_call\_rcu.constprop.66+0x39/0x890
? \_\_call\_rcu.constprop.66+0x39/0x890
call\_rcu\_sched+0x17/0x20
pppol2tp\_release+0x2c7/0x440
? fcntl\_setlk+0xca0/0xca0
? sock\_alloc\_file+0x340/0x340
sock\_release+0x92/0x1e0
sock\_close+0x1b/0x20
\_\_fput+0x296/0x6e0
\_\_\_\_fput+0x1a/0x20
task\_work\_run+0x127/0x1a0
do\_exit+0x7f9/0x2ce0
? SYSC\_connect+0x212/0x310
? mm\_update\_next\_owner+0x690/0x690
? up\_read+0x1f/0x40
? \_\_do\_page\_fault+0x3c8/0xca0
do\_group\_exit+0x10d/0x330
? do\_group\_exit+0x330/0x330
SyS\_exit\_group+0x22/0x30
do\_syscall\_64+0x1e0/0x730
? trace\_hardirqs\_off\_thunk+0x1a/0x1c
entry\_SYSCALL\_64\_after\_hwframe+0x42/0xb7
RIP: 0033:0x7f362e471259
RSP: 002b:00007ffe389abe08 EFLAGS: 00000202 ORIG\_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f362e471259
RDX: 00007f362e471259 RSI: 000000000000002e RDI: 0000000000000000
RBP: 00007ffe389abe30 R08: 0000000000000000 R09: 00007f362e944270
R10: 0000000000000000 R11: 0000000000000202 R12: 0000000000400b60
R13: 00007ffe389abf50 R14: 0000000000000000 R15: 0000000000000000
Code: 8d 3c dd a0 8f 64 85 48 89 fa 48 c1 ea 03 80 3c 02 00 75 7b 48 8b 14 dd a0 8f 64 85 4c 89 f6 48 c7 c7 20 85 64 85 e
8 2a 55 14 ff <0f> 0b 83 05 ad 2a 68 04 01 48 83 c4 18 5b 41 5c 41 5d 41 5e 41
Fixes: ee40fb2e1eb5b ("l2tp: protect sock pointer of struct pppol2tp\_session with RCU")
Signed-off-by: James Chapman
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 99f890a5f4de33ca43ea79b7b54241849e4bf904
Author: James Chapman
Date: Fri Feb 23 17:45:44 2018 +0000
l2tp: don't use inet\_shutdown on ppp session destroy
commit 225eb26489d05c679a4c4197ffcb81c81e9dcaf4 upstream.
Previously, if a ppp session was closed, we called inet\_shutdown to mark
the socket as unconnected such that userspace would get errors and
then close the socket. This could race with userspace closing the
socket. Instead, leave userspace to close the socket in its own time
(our session will be detached anyway).
BUG: KASAN: use-after-free in inet\_shutdown+0x5d/0x1c0
Read of size 4 at addr ffff880010ea3ac0 by task syzbot\_347bd5ac/8296
CPU: 3 PID: 8296 Comm: syzbot\_347bd5ac Not tainted 4.16.0-rc1+ #91
Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
Call Trace:
dump\_stack+0x101/0x157
? inet\_shutdown+0x5d/0x1c0
print\_address\_description+0x78/0x260
? inet\_shutdown+0x5d/0x1c0
kasan\_report+0x240/0x360
\_\_asan\_load4+0x78/0x80
inet\_shutdown+0x5d/0x1c0
? pppol2tp\_show+0x80/0x80
pppol2tp\_session\_close+0x68/0xb0
l2tp\_tunnel\_closeall+0x199/0x210
? udp\_v6\_flush\_pending\_frames+0x90/0x90
l2tp\_udp\_encap\_destroy+0x6b/0xc0
? l2tp\_tunnel\_del\_work+0x2e0/0x2e0
udpv6\_destroy\_sock+0x8c/0x90
sk\_common\_release+0x47/0x190
udp\_lib\_close+0x15/0x20
inet\_release+0x85/0xd0
inet6\_release+0x43/0x60
sock\_release+0x53/0x100
? sock\_alloc\_file+0x260/0x260
sock\_close+0x1b/0x20
\_\_fput+0x19f/0x380
\_\_\_\_fput+0x1a/0x20
task\_work\_run+0xd2/0x110
exit\_to\_usermode\_loop+0x18d/0x190
do\_syscall\_64+0x389/0x3b0
entry\_SYSCALL\_64\_after\_hwframe+0x26/0x9b
RIP: 0033:0x7fe240a45259
RSP: 002b:00007fe241132df8 EFLAGS: 00000297 ORIG\_RAX: 0000000000000003
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 00007fe240a45259
RDX: 00007fe240a45259 RSI: 0000000000000000 RDI: 00000000000000a5
RBP: 00007fe241132e20 R08: 00007fe241133700 R09: 0000000000000000
R10: 00007fe241133700 R11: 0000000000000297 R12: 0000000000000000
R13: 00007ffc49aff84f R14: 0000000000000000 R15: 00007fe241141040
Allocated by task 8331:
save\_stack+0x43/0xd0
kasan\_kmalloc+0xad/0xe0
kasan\_slab\_alloc+0x12/0x20
kmem\_cache\_alloc+0x144/0x3e0
sock\_alloc\_inode+0x22/0x130
alloc\_inode+0x3d/0xf0
new\_inode\_pseudo+0x1c/0x90
sock\_alloc+0x30/0x110
\_\_sock\_create+0xaa/0x4c0
SyS\_socket+0xbe/0x130
do\_syscall\_64+0x128/0x3b0
entry\_SYSCALL\_64\_after\_hwframe+0x26/0x9b
Freed by task 8314:
save\_stack+0x43/0xd0
\_\_kasan\_slab\_free+0x11a/0x170
kasan\_slab\_free+0xe/0x10
kmem\_cache\_free+0x88/0x2b0
sock\_destroy\_inode+0x49/0x50
destroy\_inode+0x77/0xb0
evict+0x285/0x340
iput+0x429/0x530
dentry\_unlink\_inode+0x28c/0x2c0
\_\_dentry\_kill+0x1e3/0x2f0
dput.part.21+0x500/0x560
dput+0x24/0x30
\_\_fput+0x2aa/0x380
\_\_\_\_fput+0x1a/0x20
task\_work\_run+0xd2/0x110
exit\_to\_usermode\_loop+0x18d/0x190
do\_syscall\_64+0x389/0x3b0
entry\_SYSCALL\_64\_after\_hwframe+0x26/0x9b
Fixes: fd558d186df2c ("l2tp: Split pppol2tp patch into separate l2tp and ppp parts")
Signed-off-by: James Chapman
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: deleted code is formatted a bit differently]
Signed-off-by: Ben Hutchings
commit 73bcecff7ee24a33241aeb60cd8de94330b45abd
Author: Matthias Schiffer
Date: Tue Jan 23 10:59:49 2018 +0100
batman-adv: fix packet checksum in receive path
commit abd6360591d3f8259f41c34e31ac4826dfe621b8 upstream.
eth\_type\_trans() internally calls skb\_pull(), which does not adjust the
skb checksum; skb\_postpull\_rcsum() is necessary to avoid log spam of the
form "bat0: hw csum failure" when packets with CHECKSUM\_COMPLETE are
received.
Note that in usual setups, packets don't reach batman-adv with
CHECKSUM\_COMPLETE (I assume NICs bail out of checksumming when they see
batadv's ethtype?), which is why the log messages do not occur on every
system using batman-adv. I could reproduce this issue by stacking
batman-adv on top of a VXLAN interface.
Fixes: c6c8fea29769 ("net: Add batman-adv meshing protocol")
Tested-by: Maximilian Wilhelm
Signed-off-by: Matthias Schiffer
Signed-off-by: Sven Eckelmann
Signed-off-by: Simon Wunderlich
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 6acc5b4ab4c8d5a4373d733cc384a1aef17084ff
Author: Erik Veijola
Date: Fri Feb 23 14:06:52 2018 +0200
ALSA: usb-audio: Add a quirck for B&W PX headphones
commit 240a8af929c7c57dcde28682725b29cf8474e8e5 upstream.
The capture interface doesn't work and the playback interface only
supports 48 kHz sampling rate even though it advertises more rates.
Signed-off-by: Erik Veijola
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit 6174a2c5957aac60dcf8f2788df428f198d4dee5
Author: Ben Crocker
Date: Thu Feb 22 17:52:19 2018 -0500
drm/radeon: insist on 32-bit DMA for Cedar on PPC64/PPC64LE
commit 2c83029cda55a5e7665c7c6326909427d6a01350 upstream.
In radeon\_device\_init, set the need\_dma32 flag for Cedar chips
(e.g. FirePro 2270). This fixes, or at least works around, a bug
on PowerPC exposed by last year's commits
8e3f1b1d8255105f31556aacf8aeb6071b00d469 (Russell Currey)
and
253fd51e2f533552ae35a0c661705da6c4842c1b (Alistair Popple)
which enabled the 64-bit DMA iommu bypass.
This caused the device to freeze, in some cases unrecoverably, and is
the subject of several bug reports internal to Red Hat.
Signed-off-by: Ben Crocker
Signed-off-by: Alex Deucher
Signed-off-by: Ben Hutchings
commit b326f1bab0cd46b62d48074b95367698965e4d14
Author: Johannes Berg
Date: Thu Feb 22 20:55:28 2018 +0100
regulatory: add NUL to request alpha2
commit 657308f73e674e86b60509a430a46e569bf02846 upstream.
Similar to the ancient commit a5fe8e7695dc ("regulatory: add NUL
to alpha2"), add another byte to alpha2 in the request struct so
that when we use nla\_put\_string(), we don't overrun anything.
Fixes: 73d54c9e74c4 ("cfg80211: add regulatory netlink multicast group")
Reported-by: Kees Cook
Signed-off-by: Johannes Berg
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 53e4051f34a4fd8b56a8b98cce38610bf2257a0a
Author: David Rientjes
Date: Wed Feb 21 14:45:32 2018 -0800
kernel/relay.c: limit kmalloc size to KMALLOC\_MAX\_SIZE
commit 88913bd8ea2a75d7e460a4bed5f75e1c32660d7e upstream.
chan->n\_subbufs is set by the user and relay\_create\_buf() does a kmalloc()
of chan->n\_subbufs \* sizeof(size\_t \*).
kmalloc\_slab() will generate a warning when this fails if
chan->subbufs \* sizeof(size\_t \*) > KMALLOC\_MAX\_SIZE.
Limit chan->n\_subbufs to the maximum allowed kmalloc() size.
Link: http://lkml.kernel.org/r/alpine.DEB.2.10.1802061216100.122576@chino.kir.corp.google.com
Fixes: f6302f1bcd75 ("relay: prevent integer overflow in relay\_open()")
Signed-off-by: David Rientjes
Reviewed-by: Andrew Morton
Cc: Jens Axboe
Cc: Dave Jiang
Cc: Al Viro
Cc: Dan Carpenter
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit 3df2313052df34114c77900aa7e36ac2a870c968
Author: Kai-Heng Feng
Date: Sun Feb 18 22:17:09 2018 +0800
libata: disable LPM for Crucial BX100 SSD 500GB drive
commit b17e5729a630d8326a48ec34ef02e6b4464a6aef upstream.
After Laptop Mode Tools starts to use min\_power for LPM, a user found
out Crucial BX100 SSD can't get mounted.
Crucial BX100 SSD 500GB drive don't work well with min\_power. This also
happens to med\_power\_with\_dipm.
So let's disable LPM for Crucial BX100 SSD 500GB drive.
BugLink: https://bugs.launchpad.net/bugs/1726930
Signed-off-by: Kai-Heng Feng
Signed-off-by: Tejun Heo
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 67d4abc84c535bd88ace5fbc8b8752736771a33f
Author: Jan Beulich
Date: Mon Feb 19 07:48:11 2018 -0700
x86/mm: Fix {pmd,pud}\_{set,clear}\_flags()
commit 842cef9113c2120f74f645111ded1e020193d84c upstream.
Just like pte\_{set,clear}\_flags() their PMD and PUD counterparts should
not do any address translation. This was outright wrong under Xen
(causing a dead boot with no useful output on "suitable" systems), and
produced needlessly more complicated code (even if just slightly) when
paravirt was enabled.
Signed-off-by: Jan Beulich
Reviewed-by: Juergen Gross
Acked-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Denys Vlasenko
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Linus Torvalds
Cc: Peter Zijlstra
Link: http://lkml.kernel.org/r/5A8AF1BB02000078001A91C3@prv-mh.provo.novell.com
Signed-off-by: Ingo Molnar
[bwh: Backported to 3.2:
- There aren't any pud\_{set,clear}\_flags() functions
- There's no p4d level]
Signed-off-by: Ben Hutchings
commit e7588cfc3445492a2020cb4a205a7258dd1d5d6a
Author: Eric Dumazet
Date: Fri Feb 16 19:36:28 2018 -0800
netfilter: IDLETIMER: be syzkaller friendly
commit cfc2c740533368b96e2be5e0a4e8c3cace7d9814 upstream.
We had one report from syzkaller [1]
First issue is that INIT\_WORK() should be done before mod\_timer()
or we risk timer being fired too soon, even with a 1 second timer.
Second issue is that we need to reject too big info->timeout
to avoid overflows in msecs\_to\_jiffies(info->timeout \* 1000), or
risk looping, if result after overflow is 0.
[1]
WARNING: CPU: 1 PID: 5129 at kernel/workqueue.c:1444 \_\_queue\_work+0xdf4/0x1230 kernel/workqueue.c:1444
Kernel panic - not syncing: panic\_on\_warn set ...
CPU: 1 PID: 5129 Comm: syzkaller159866 Not tainted 4.16.0-rc1+ #230
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
\_\_dump\_stack lib/dump\_stack.c:17 [inline]
dump\_stack+0x194/0x257 lib/dump\_stack.c:53
panic+0x1e4/0x41c kernel/panic.c:183
\_\_warn+0x1dc/0x200 kernel/panic.c:547
report\_bug+0x211/0x2d0 lib/bug.c:184
fixup\_bug.part.11+0x37/0x80 arch/x86/kernel/traps.c:178
fixup\_bug arch/x86/kernel/traps.c:247 [inline]
do\_error\_trap+0x2d7/0x3e0 arch/x86/kernel/traps.c:296
do\_invalid\_op+0x1b/0x20 arch/x86/kernel/traps.c:315
invalid\_op+0x22/0x40 arch/x86/entry/entry\_64.S:988
RIP: 0010:\_\_queue\_work+0xdf4/0x1230 kernel/workqueue.c:1444
RSP: 0018:ffff8801db507538 EFLAGS: 00010006
RAX: ffff8801aeb46080 RBX: ffff8801db530200 RCX: ffffffff81481404
RDX: 0000000000000100 RSI: ffffffff86b42640 RDI: 0000000000000082
RBP: ffff8801db507758 R08: 1ffff1003b6a0de5 R09: 000000000000000c
R10: ffff8801db5073f0 R11: 0000000000000020 R12: 1ffff1003b6a0eb6
R13: ffff8801b1067ae0 R14: 00000000000001f8 R15: dffffc0000000000
queue\_work\_on+0x16a/0x1c0 kernel/workqueue.c:1488
queue\_work include/linux/workqueue.h:488 [inline]
schedule\_work include/linux/workqueue.h:546 [inline]
idletimer\_tg\_expired+0x44/0x60 net/netfilter/xt\_IDLETIMER.c:116
call\_timer\_fn+0x228/0x820 kernel/time/timer.c:1326
expire\_timers kernel/time/timer.c:1363 [inline]
\_\_run\_timers+0x7ee/0xb70 kernel/time/timer.c:1666
run\_timer\_softirq+0x4c/0x70 kernel/time/timer.c:1692
\_\_do\_softirq+0x2d7/0xb85 kernel/softirq.c:285
invoke\_softirq kernel/softirq.c:365 [inline]
irq\_exit+0x1cc/0x200 kernel/softirq.c:405
exiting\_irq arch/x86/include/asm/apic.h:541 [inline]
smp\_apic\_timer\_interrupt+0x16b/0x700 arch/x86/kernel/apic/apic.c:1052
apic\_timer\_interrupt+0xa9/0xb0 arch/x86/entry/entry\_64.S:829

RIP: 0010:arch\_local\_irq\_restore arch/x86/include/asm/paravirt.h:777 [inline]
RIP: 0010:\_\_raw\_spin\_unlock\_irqrestore include/linux/spinlock\_api\_smp.h:160 [inline]
RIP: 0010:\_raw\_spin\_unlock\_irqrestore+0x5e/0xba kernel/locking/spinlock.c:184
RSP: 0018:ffff8801c20173c8 EFLAGS: 00000282 ORIG\_RAX: ffffffffffffff12
RAX: dffffc0000000000 RBX: 0000000000000282 RCX: 0000000000000006
RDX: 1ffffffff0d592cd RSI: 1ffff10035d68d23 RDI: 0000000000000282
RBP: ffff8801c20173d8 R08: 1ffff10038402e47 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000000 R12: ffffffff8820e5c8
R13: ffff8801b1067ad8 R14: ffff8801aea7c268 R15: ffff8801aea7c278
\_\_debug\_object\_init+0x235/0x1040 lib/debugobjects.c:378
debug\_object\_init+0x17/0x20 lib/debugobjects.c:391
\_\_init\_work+0x2b/0x60 kernel/workqueue.c:506
idletimer\_tg\_create net/netfilter/xt\_IDLETIMER.c:152 [inline]
idletimer\_tg\_checkentry+0x691/0xb00 net/netfilter/xt\_IDLETIMER.c:213
xt\_check\_target+0x22c/0x7d0 net/netfilter/x\_tables.c:850
check\_target net/ipv6/netfilter/ip6\_tables.c:533 [inline]
find\_check\_entry.isra.7+0x935/0xcf0 net/ipv6/netfilter/ip6\_tables.c:575
translate\_table+0xf52/0x1690 net/ipv6/netfilter/ip6\_tables.c:744
do\_replace net/ipv6/netfilter/ip6\_tables.c:1160 [inline]
do\_ip6t\_set\_ctl+0x370/0x5f0 net/ipv6/netfilter/ip6\_tables.c:1686
nf\_sockopt net/netfilter/nf\_sockopt.c:106 [inline]
nf\_setsockopt+0x67/0xc0 net/netfilter/nf\_sockopt.c:115
ipv6\_setsockopt+0x10b/0x130 net/ipv6/ipv6\_sockglue.c:927
udpv6\_setsockopt+0x45/0x80 net/ipv6/udp.c:1422
sock\_common\_setsockopt+0x95/0xd0 net/core/sock.c:2976
SYSC\_setsockopt net/socket.c:1850 [inline]
SyS\_setsockopt+0x189/0x360 net/socket.c:1829
do\_syscall\_64+0x282/0x940 arch/x86/entry/common.c:287
Fixes: 0902b469bd25 ("netfilter: xtables: idletimer target implementation")
Signed-off-by: Eric Dumazet
Reported-by: syzkaller
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Ben Hutchings
commit 399ae5ba263e672bf105414f8e71adc9ff223134
Author: Hans de Goede
Date: Fri Feb 16 10:48:20 2018 +0100
libata: Apply NOLPM quirk to Crucial MX100 512GB SSDs
commit 9c7be59fc519af9081c46c48f06f2b8fadf55ad8 upstream.
Various people have reported the Crucial MX100 512GB model not working
with LPM set to min\_power. I've now received a report that it also does
not work with the new med\_power\_with\_dipm level.
It does work with medium\_power, but that has no measurable power-savings
and given the amount of people being bitten by the other levels not
working, this commit just disables LPM altogether.
Note all reporters of this have either the 512GB model (max capacity), or
are not specifying their SSD's size. So for now this quirk assumes this is
a problem with the 512GB model only.
Buglink: https://bugzilla.kernel.org/show\_bug.cgi?id=89261
Buglink: https://github.com/linrunner/TLP/issues/84
Signed-off-by: Hans de Goede
Signed-off-by: Tejun Heo
[bwh: Backported to 3.2: Drop the TRIM quirk flags, which aren't supported]
Signed-off-by: Ben Hutchings
commit 706a681ca0e882764ae549e5df26826d16cf9101
Author: Rasmus Villemoes
Date: Fri Feb 16 13:20:48 2018 -0800
nospec: Allow index argument to have const-qualified type
commit b98c6a160a057d5686a8c54c79cc6c8c94a7d0c8 upstream.
The last expression in a statement expression need not be a bare
variable, quoting gcc docs
The last thing in the compound statement should be an expression
followed by a semicolon; the value of this subexpression serves as the
value of the entire construct.
and we already use that in e.g. the min/max macros which end with a
ternary expression.
This way, we can allow index to have const-qualified type, which will in
some cases avoid the need for introducing a local copy of index of
non-const qualified type. That, in turn, can prevent readers not
familiar with the internals of array\_index\_nospec from wondering about
the seemingly redundant extra variable, and I think that's worthwhile
considering how confusing the whole \_nospec business is.
The expression \_i&\_mask has type unsigned long (since that is the type
of \_mask, and the BUILD\_BUG\_ONs guarantee that \_i will get promoted to
that), so in order not to change the type of the whole expression, add
a cast back to typeof(\_i).
Signed-off-by: Rasmus Villemoes
Signed-off-by: Dan Williams
Acked-by: Linus Torvalds
Cc: Andy Lutomirski
Cc: Arjan van de Ven
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: David Woodhouse
Cc: Greg Kroah-Hartman
Cc: Josh Poimboeuf
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Cc: linux-arch@vger.kernel.org
Link: http://lkml.kernel.org/r/151881604837.17395.10812767547837568328.stgit@dwillia2-desk3.amr.corp.intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Ben Hutchings
commit a5a3182e50b5be88efd01050ba6f35e2d0aaee03
Author: Paolo Abeni
Date: Thu Feb 15 16:59:49 2018 +0100
dn\_getsockoptdecnet: move nf\_{get/set}sockopt outside sock lock
commit dfec091439bb2acf763497cfc58f2bdfc67c56b7 upstream.
After commit 3f34cfae1238 ("netfilter: on sockopt() acquire sock lock
only in the required scope"), the caller of nf\_{get/set}sockopt() must
not hold any lock, but, in such changeset, I forgot to cope with DECnet.
This commit addresses the issue moving the nf call outside the lock,
in the dn\_{get,set}sockopt() with the same schema currently used by
ipv4 and ipv6. Also moves the unhandled sockopts of the end of the main
switch statements, to improve code readability.
Reported-by: Petr Vandrovec
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=198791#c2
Fixes: 3f34cfae1238 ("netfilter: on sockopt() acquire sock lock only in the required scope")
Signed-off-by: Paolo Abeni
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 4a6561b37ea65b4a98bd8fe16c57f231b1502302
Author: Jack Stocker
Date: Thu Feb 15 18:24:10 2018 +0000
Add delay-init quirk for Corsair K70 RGB keyboards
commit 7a1646d922577b5b48c0d222e03831141664bb59 upstream.
Following on from this patch: https://lkml.org/lkml/2017/11/3/516,
Corsair K70 RGB keyboards also require the DELAY\_INIT quirk to
start correctly at boot.
Device ids found here:
usb 3-3: New USB device found, idVendor=1b1c, idProduct=1b13
usb 3-3: New USB device strings: Mfr=1, Product=2, SerialNumber=3
usb 3-3: Product: Corsair K70 RGB Gaming Keyboard
Signed-off-by: Jack Stocker
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 34ee743350e4b69467822c1c58df6d933893d040
Author: AMAN DEEP
Date: Thu Feb 8 11:55:01 2018 +0800
usb: ohci: Proper handling of ed\_rm\_list to handle race condition between usb\_kill\_urb() and finish\_unlinks()
commit 46408ea558df13b110e0866b99624384a33bdeba upstream.
There is a race condition between finish\_unlinks->finish\_urb() function
and usb\_kill\_urb() in ohci controller case. The finish\_urb calls
spin\_unlock(&ohci->lock) before usb\_hcd\_giveback\_urb() function call,
then if during this time, usb\_kill\_urb is called for another endpoint,
then new ed will be added to ed\_rm\_list at beginning for unlink, and
ed\_rm\_list will point to newly added.
When finish\_urb() is completed in finish\_unlinks() and ed->td\_list
becomes empty as in below code (in finish\_unlinks() function):
if (list\_empty(&ed->td\_list)) {
\*last = ed->ed\_next;
ed->ed\_next = NULL;
} else if (ohci->rh\_state == OHCI\_RH\_RUNNING) {
\*last = ed->ed\_next;
ed->ed\_next = NULL;
ed\_schedule(ohci, ed);
}
The \*last = ed->ed\_next will make ed\_rm\_list to point to ed->ed\_next
and previously added ed by usb\_kill\_urb will be left unreferenced by
ed\_rm\_list. This causes usb\_kill\_urb() hang forever waiting for
finish\_unlink to remove added ed from ed\_rm\_list.
The main reason for hang in this race condtion is addition and removal
of ed from ed\_rm\_list in the beginning during usb\_kill\_urb and later
last\* is modified in finish\_unlinks().
As suggested by Alan Stern, the solution for proper handling of
ohci->ed\_rm\_list is to remove ed from the ed\_rm\_list before finishing
any URBs. Then at the end, we can add ed back to the list if necessary.
This properly handle the updated ohci->ed\_rm\_list in usb\_kill\_urb().
Fixes: 977dcfdc6031 ("USB: OHCI: don't lose track of EDs when a controller dies")
Acked-by: Alan Stern
Signed-off-by: Aman Deep
Signed-off-by: Jeffy Chen
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 0ebead18aa59b4095e919af108e40d4375e50c5f
Author: Alan Stern
Date: Tue Jun 30 11:25:54 2015 -0400
USB: OHCI: Fix race between ED unlink and URB submission
commit 7d8021c967648accd1b78e5e1ddaad655cd2c61f upstream.
This patch fixes a bug introduced by commit 977dcfdc6031 ("USB: OHCI:
don't lose track of EDs when a controller dies"). The commit changed
ed\_state from ED\_UNLINK to ED\_IDLE too early, before finish\_urb() had
been called. The user-visible consequence is that the driver
occasionally crashes or locks up when an URB is submitted while
another URB for the same endpoint is being unlinked.
This patch moves the ED state change later, to the right place. The
drawback is that now we may unnecessarily execute some instructions
multiple times when a controller dies. Since controllers dying is an
exceptional occurrence, a little wasted time won't matter.
Signed-off-by: Alan Stern
Reported-by: Heiko Przybyl
Tested-by: Heiko Przybyl
Fixes: 977dcfdc60311e7aa571cabf6f39c36dde13339e
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 3ea5e8ca5c4f15f1e8777dc12d345bab35746841
Author: Corentin Labbe
Date: Wed Feb 14 12:17:47 2018 +0000
powerpc/pseries: Add empty update\_numa\_cpu\_lookup\_table() for NUMA=n
commit c1e150ceb61e4a585bad156da15c33bfe89f5858 upstream.
When CONFIG\_NUMA is not set, the build fails with:
arch/powerpc/platforms/pseries/hotplug-cpu.c:335:4:
error: déclaration implicite de la fonction « update\_numa\_cpu\_lookup\_table »
So we have to add update\_numa\_cpu\_lookup\_table() as an empty function
when CONFIG\_NUMA is not set.
Fixes: 1d9a090783be ("powerpc/numa: Invalidate numa\_cpu\_lookup\_table on cpu remove")
Signed-off-by: Corentin Labbe
Signed-off-by: Michael Ellerman
Signed-off-by: Ben Hutchings
commit 6eab16489865086d2891939ea069d0983b9c44dd
Author: Paolo Abeni
Date: Wed Feb 14 17:21:19 2018 +0100
netfilter: nat: cope with negative port range
commit db57ccf0f2f4624b4c4758379f8165277504fbd7 upstream.
syzbot reported a division by 0 bug in the netfilter nat code:
divide error: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 1 PID: 4168 Comm: syzkaller034710 Not tainted 4.16.0-rc1+ #309
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS
Google 01/01/2011
RIP: 0010:nf\_nat\_l4proto\_unique\_tuple+0x291/0x530
net/netfilter/nf\_nat\_proto\_common.c:88
RSP: 0018:ffff8801b2466778 EFLAGS: 00010246
RAX: 000000000000f153 RBX: ffff8801b2466dd8 RCX: ffff8801b2466c7c
RDX: 0000000000000000 RSI: ffff8801b2466c58 RDI: ffff8801db5293ac
RBP: ffff8801b24667d8 R08: ffff8801b8ba6dc0 R09: ffffffff88af5900
R10: ffff8801b24666f0 R11: 0000000000000000 R12: 000000002990f153
R13: 0000000000000001 R14: 0000000000000000 R15: ffff8801b2466c7c
FS: 00000000017e3880(0000) GS:ffff8801db500000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000208fdfe4 CR3: 00000001b5340002 CR4: 00000000001606e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
dccp\_unique\_tuple+0x40/0x50 net/netfilter/nf\_nat\_proto\_dccp.c:30
get\_unique\_tuple+0xc28/0x1c10 net/netfilter/nf\_nat\_core.c:362
nf\_nat\_setup\_info+0x1c2/0xe00 net/netfilter/nf\_nat\_core.c:406
nf\_nat\_redirect\_ipv6+0x306/0x730 net/netfilter/nf\_nat\_redirect.c:124
redirect\_tg6+0x7f/0xb0 net/netfilter/xt\_REDIRECT.c:34
ip6t\_do\_table+0xc2a/0x1a30 net/ipv6/netfilter/ip6\_tables.c:365
ip6table\_nat\_do\_chain+0x65/0x80 net/ipv6/netfilter/ip6table\_nat.c:41
nf\_nat\_ipv6\_fn+0x594/0xa80 net/ipv6/netfilter/nf\_nat\_l3proto\_ipv6.c:302
nf\_nat\_ipv6\_local\_fn+0x33/0x5d0
net/ipv6/netfilter/nf\_nat\_l3proto\_ipv6.c:407
ip6table\_nat\_local\_fn+0x2c/0x40 net/ipv6/netfilter/ip6table\_nat.c:69
nf\_hook\_entry\_hookfn include/linux/netfilter.h:120 [inline]
nf\_hook\_slow+0xba/0x1a0 net/netfilter/core.c:483
nf\_hook include/linux/netfilter.h:243 [inline]
NF\_HOOK include/linux/netfilter.h:286 [inline]
ip6\_xmit+0x10ec/0x2260 net/ipv6/ip6\_output.c:277
inet6\_csk\_xmit+0x2fc/0x580 net/ipv6/inet6\_connection\_sock.c:139
dccp\_transmit\_skb+0x9ac/0x10f0 net/dccp/output.c:142
dccp\_connect+0x369/0x670 net/dccp/output.c:564
dccp\_v6\_connect+0xe17/0x1bf0 net/dccp/ipv6.c:946
\_\_inet\_stream\_connect+0x2d4/0xf00 net/ipv4/af\_inet.c:620
inet\_stream\_connect+0x58/0xa0 net/ipv4/af\_inet.c:684
SYSC\_connect+0x213/0x4a0 net/socket.c:1639
SyS\_connect+0x24/0x30 net/socket.c:1620
do\_syscall\_64+0x282/0x940 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x26/0x9b
RIP: 0033:0x441c69
RSP: 002b:00007ffe50cc0be8 EFLAGS: 00000217 ORIG\_RAX: 000000000000002a
RAX: ffffffffffffffda RBX: ffffffffffffffff RCX: 0000000000441c69
RDX: 000000000000001c RSI: 00000000208fdfe4 RDI: 0000000000000003
RBP: 00000000006cc018 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000538 R11: 0000000000000217 R12: 0000000000403590
R13: 0000000000403620 R14: 0000000000000000 R15: 0000000000000000
Code: 48 89 f0 83 e0 07 83 c0 01 38 d0 7c 08 84 d2 0f 85 46 02 00 00 48 8b
45 c8 44 0f b7 20 e8 88 97 04 fd 31 d2 41 0f b7 c4 4c 89 f9 <41> f7 f6 48
c1 e9 03 48 b8 00 00 00 00 00 fc ff df 0f b6 0c 01
RIP: nf\_nat\_l4proto\_unique\_tuple+0x291/0x530
net/netfilter/nf\_nat\_proto\_common.c:88 RSP: ffff8801b2466778
The problem is that currently we don't have any check on the
configured port range. A port range == -1 triggers the bug, while
other negative values may require a very long time to complete the
following loop.
This commit addresses the issue swapping the two ends on negative
ranges. The check is performed in nf\_nat\_l4proto\_unique\_tuple() since
the nft nat loads the port values from nft registers at runtime.
v1 -> v2: use the correct 'Fixes' tag
v2 -> v3: update commit message, drop unneeded READ\_ONCE()
Fixes: 5b1158e909ec ("[NETFILTER]: Add NAT support for nf\_conntrack")
Reported-by: syzbot+8012e198bd037f4871e5@syzkaller.appspotmail.com
Signed-off-by: Paolo Abeni
Signed-off-by: Pablo Neira Ayuso
[bwh: Backported to 3.2: adjust filename, context]
Signed-off-by: Ben Hutchings
commit 6fc3144cafdb021a9bd1f23dec7240d857834de4
Author: Paolo Abeni
Date: Mon Feb 12 18:49:39 2018 +0100
netfilter: x\_tables: fix missing timer initialization in xt\_LED
commit 10414014bc085aac9f787a5890b33b5605fbcfc4 upstream.
syzbot reported that xt\_LED may try to use the ledinternal->timer
without previously initializing it:
------------[ cut here ]------------
kernel BUG at kernel/time/timer.c:958!
invalid opcode: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 1 PID: 1826 Comm: kworker/1:2 Not tainted 4.15.0+ #306
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS
Google 01/01/2011
Workqueue: ipv6\_addrconf addrconf\_dad\_work
RIP: 0010:\_\_mod\_timer kernel/time/timer.c:958 [inline]
RIP: 0010:mod\_timer+0x7d6/0x13c0 kernel/time/timer.c:1102
RSP: 0018:ffff8801d24fe9f8 EFLAGS: 00010293
RAX: ffff8801d25246c0 RBX: ffff8801aec6cb50 RCX: ffffffff816052c6
RDX: 0000000000000000 RSI: 00000000fffbd14b RDI: ffff8801aec6cb68
RBP: ffff8801d24fec98 R08: 0000000000000000 R09: 1ffff1003a49fd6c
R10: ffff8801d24feb28 R11: 0000000000000005 R12: dffffc0000000000
R13: ffff8801d24fec70 R14: 00000000fffbd14b R15: ffff8801af608f90
FS: 0000000000000000(0000) GS:ffff8801db500000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000206d6fd0 CR3: 0000000006a22001 CR4: 00000000001606e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
led\_tg+0x1db/0x2e0 net/netfilter/xt\_LED.c:75
ip6t\_do\_table+0xc2a/0x1a30 net/ipv6/netfilter/ip6\_tables.c:365
ip6table\_raw\_hook+0x65/0x80 net/ipv6/netfilter/ip6table\_raw.c:42
nf\_hook\_entry\_hookfn include/linux/netfilter.h:120 [inline]
nf\_hook\_slow+0xba/0x1a0 net/netfilter/core.c:483
nf\_hook.constprop.27+0x3f6/0x830 include/linux/netfilter.h:243
NF\_HOOK include/linux/netfilter.h:286 [inline]
ndisc\_send\_skb+0xa51/0x1370 net/ipv6/ndisc.c:491
ndisc\_send\_ns+0x38a/0x870 net/ipv6/ndisc.c:633
addrconf\_dad\_work+0xb9e/0x1320 net/ipv6/addrconf.c:4008
process\_one\_work+0xbbf/0x1af0 kernel/workqueue.c:2113
worker\_thread+0x223/0x1990 kernel/workqueue.c:2247
kthread+0x33c/0x400 kernel/kthread.c:238
ret\_from\_fork+0x3a/0x50 arch/x86/entry/entry\_64.S:429
Code: 85 2a 0b 00 00 4d 8b 3c 24 4d 85 ff 75 9f 4c 8b bd 60 fd ff ff e8 bb
57 10 00 65 ff 0d 94 9a a1 7e e9 d9 fc ff ff e8 aa 57 10 00 <0f> 0b e8 a3
57 10 00 e9 14 fb ff ff e8 99 57 10 00 4c 89 bd 70
RIP: \_\_mod\_timer kernel/time/timer.c:958 [inline] RSP: ffff8801d24fe9f8
RIP: mod\_timer+0x7d6/0x13c0 kernel/time/timer.c:1102 RSP: ffff8801d24fe9f8
---[ end trace f661ab06f5dd8b3d ]---
The ledinternal struct can be shared between several different
xt\_LED targets, but the related timer is currently initialized only
if the first target requires it. Fix it by unconditionally
initializing the timer struct.
v1 -> v2: call del\_timer\_sync() unconditionally, too.
Fixes: 268cb38e1802 ("netfilter: x\_tables: add LED trigger target")
Reported-by: syzbot+10c98dc5725c6c8fc7fb@syzkaller.appspotmail.com
Signed-off-by: Paolo Abeni
Signed-off-by: Pablo Neira Ayuso
[bwh: Backported to 3.2: Keep using setup\_timer()]
Signed-off-by: Ben Hutchings
commit 65b073589499cd4f2e9e3e94f491b6d7b47a8255
Author: Cong Wang
Date: Thu Feb 8 13:53:52 2018 -0800
netfilter: ipt\_CLUSTERIP: fix a refcount bug in clusterip\_config\_find\_get()
commit db93a3632b0f8773a3899e04a3a3e0aa7a26eb46 upstream.
In clusterip\_config\_find\_get() we hold RCU read lock so it could
run concurrently with clusterip\_config\_entry\_put(), as a result,
the refcnt could go back to 1 from 0, which leads to a double
list\_del()... Just replace refcount\_inc() with
refcount\_inc\_not\_zero(), as for c->refcount.
Fixes: d73f33b16883 ("netfilter: CLUSTERIP: RCU conversion")
Cc: Eric Dumazet
Cc: Pablo Neira Ayuso
Cc: Florian Westphal
Signed-off-by: Cong Wang
Reviewed-by: Florian Westphal
Signed-off-by: Pablo Neira Ayuso
[bwh: Backported to 3.2: s/refcount/atomic/]
Signed-off-by: Ben Hutchings
commit 0abb05a8cfd498a24ff4d290966e22fda3ee08e5
Author: Paolo Abeni
Date: Thu Feb 8 12:19:00 2018 +0100
netfilter: drop outermost socket lock in getsockopt()
commit 01ea306f2ac2baff98d472da719193e738759d93 upstream.
The Syzbot reported a possible deadlock in the netfilter area caused by
rtnl lock, xt lock and socket lock being acquired with a different order
on different code paths, leading to the following backtrace:
Reviewed-by: Xin Long
======================================================
WARNING: possible circular locking dependency detected
4.15.0+ #301 Not tainted
------------------------------------------------------
syzkaller233489/4179 is trying to acquire lock:
(rtnl\_mutex){+.+.}, at: [<0000000048e996fd>] rtnl\_lock+0x17/0x20
net/core/rtnetlink.c:74
but task is already holding lock:
(&xt[i].mutex){+.+.}, at: [<00000000328553a2>]
xt\_find\_table\_lock+0x3e/0x3e0 net/netfilter/x\_tables.c:1041
which lock already depends on the new lock.
===
Since commit 3f34cfae1230 ("netfilter: on sockopt() acquire sock lock
only in the required scope"), we already acquire the socket lock in
the innermost scope, where needed. In such commit I forgot to remove
the outer-most socket lock from the getsockopt() path, this commit
addresses the issues dropping it now.
v1 -> v2: fix bad subj, added relavant 'fixes' tag
Fixes: 22265a5c3c10 ("netfilter: xt\_TEE: resolve oif using netdevice notifiers")
Fixes: 202f59afd441 ("netfilter: ipt\_CLUSTERIP: do not hold dev")
Fixes: 3f34cfae1230 ("netfilter: on sockopt() acquire sock lock only in the required scope")
Reported-by: syzbot+ddde1c7b7ff7442d7f2d@syzkaller.appspotmail.com
Suggested-by: Florian Westphal
Signed-off-by: Paolo Abeni
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Ben Hutchings
commit 3a7b41121346d9d95bee48bf730882c91d1af7bd
Author: Jakub Kicinski
Date: Mon Feb 12 21:35:31 2018 -0800
net: fix race on decreasing number of TX queues
commit ac5b70198adc25c73fba28de4f78adcee8f6be0b upstream.
netif\_set\_real\_num\_tx\_queues() can be called when netdev is up.
That usually happens when user requests change of number of
channels/rings with ethtool -L. The procedure for changing
the number of queues involves resetting the qdiscs and setting
dev->num\_tx\_queues to the new value. When the new value is
lower than the old one, extra care has to be taken to ensure
ordering of accesses to the number of queues vs qdisc reset.
Currently the queues are reset before new dev->num\_tx\_queues
is assigned, leaving a window of time where packets can be
enqueued onto the queues going down, leading to a likely
crash in the drivers, since most drivers don't check if TX
skbs are assigned to an active queue.
Fixes: e6484930d7c7 ("net: allocate tx queues in register\_netdevice")
Signed-off-by: Jakub Kicinski
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 1101a965a700cb8bc180437deb2f078873101930
Author: Florian Westphal
Date: Mon Feb 12 14:42:01 2018 +0100
xfrm\_user: uncoditionally validate esn replay attribute struct
commit d97ca5d714a5334aecadadf696875da40f1fbf3e upstream.
The sanity test added in ecd7918745234 can be bypassed, validation
only occurs if XFRM\_STATE\_ESN flag is set, but rest of code doesn't care
and just checks if the attribute itself is present.
So always validate. Alternative is to reject if we have the attribute
without the flag but that would change abi.
Reported-by: syzbot+0ab777c27d2bb7588f73@syzkaller.appspotmail.com
Cc: Mathias Krause
Fixes: ecd7918745234 ("xfrm\_user: ensure user supplied esn replay window is valid")
Fixes: d8647b79c3b7e ("xfrm: Add user interface for esn and big anti-replay windows")
Signed-off-by: Florian Westphal
Signed-off-by: Steffen Klassert
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 3238114f6cb75bf2a2224a4e0ba3b4dbdedc2f09
Author: Eric Biggers
Date: Sat Feb 3 20:33:27 2018 -0800
libata: remove WARN() for DMA or PIO command without data
commit 9173e5e80729c8434b8d27531527c5245f4a5594 upstream.
syzkaller hit a WARN() in ata\_qc\_issue() when writing to /dev/sg0. This
happened because it issued a READ\_6 command with no data buffer.
Just remove the WARN(), as it doesn't appear indicate a kernel bug. The
expected behavior is to fail the command, which the code does.
Here's a reproducer that works in QEMU when /dev/sg0 refers to a disk of
the default type ("82371SB PIIX3 IDE"):
#include
#include
int main()
{
char buf[42] = { [36] = 0x8 /\* READ\_6 \*/ };
write(open("/dev/sg0", O\_RDWR), buf, sizeof(buf));
}
Fixes: f92a26365a72 ("libata: change ATA\_QCFLAG\_DMAMAP semantics")
Reported-by: syzbot+f7b556d1766502a69d85071d2ff08bd87be53d0f@syzkaller.appspotmail.com
Signed-off-by: Eric Biggers
Signed-off-by: Tejun Heo
Signed-off-by: Ben Hutchings
commit 1d53252419748b4198eaed4d467dcbf60b9a7685
Author: Eric Biggers
Date: Sat Feb 3 20:30:56 2018 -0800
libata: fix length validation of ATAPI-relayed SCSI commands
commit 058f58e235cbe03e923b30ea7c49995a46a8725f upstream.
syzkaller reported a crash in ata\_bmdma\_fill\_sg() when writing to
/dev/sg1. The immediate cause was that the ATA command's scatterlist
was not DMA-mapped, which causes 'pi - 1' to underflow, resulting in a
write to 'qc->ap->bmdma\_prd[0xffffffff]'.
Strangely though, the flag ATA\_QCFLAG\_DMAMAP was set in qc->flags. The
root cause is that when \_\_ata\_scsi\_queuecmd() is preparing to relay a
SCSI command to an ATAPI device, it doesn't correctly validate the CDB
length before copying it into the 16-byte buffer 'cdb' in 'struct
ata\_queued\_cmd'. Namely, it validates the fixed CDB length expected
based on the SCSI opcode but not the actual CDB length, which can be
larger due to the use of the SG\_NEXT\_CMD\_LEN ioctl. Since 'flags' is
the next member in ata\_queued\_cmd, a buffer overflow corrupts it.
Fix it by requiring that the actual CDB length be <= 16 (ATAPI\_CDB\_LEN).
[Really it seems the length should be required to be <= dev->cdb\_len,
but the current behavior seems to have been intentionally introduced by
commit 607126c2a21c ("libata-scsi: be tolerant of 12-byte ATAPI commands
in 16-byte CDBs") to work around a userspace bug in mplayer. Probably
the workaround is no longer needed (mplayer was fixed in 2007), but
continuing to allow lengths to up 16 appears harmless for now.]
Here's a reproducer that works in QEMU when /dev/sg1 refers to the
CD-ROM drive that qemu-system-x86\_64 creates by default:
#include
#include
#include
#define SG\_NEXT\_CMD\_LEN 0x2283
int main()
{
char buf[53] = { [36] = 0x7e, [52] = 0x02 };
int fd = open("/dev/sg1", O\_RDWR);
ioctl(fd, SG\_NEXT\_CMD\_LEN, &(int){ 17 });
write(fd, buf, sizeof(buf));
}
The crash was:
BUG: unable to handle kernel paging request at ffff8cb97db37ffc
IP: ata\_bmdma\_fill\_sg drivers/ata/libata-sff.c:2623 [inline]
IP: ata\_bmdma\_qc\_prep+0xa4/0xc0 drivers/ata/libata-sff.c:2727
PGD fb6c067 P4D fb6c067 PUD 0
Oops: 0002 [#1] SMP
CPU: 1 PID: 150 Comm: syz\_ata\_bmdma\_q Not tainted 4.15.0-next-20180202 #99
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.11.0-20171110\_100015-anatol 04/01/2014
[...]
Call Trace:
ata\_qc\_issue+0x100/0x1d0 drivers/ata/libata-core.c:5421
ata\_scsi\_translate+0xc9/0x1a0 drivers/ata/libata-scsi.c:2024
\_\_ata\_scsi\_queuecmd drivers/ata/libata-scsi.c:4326 [inline]
ata\_scsi\_queuecmd+0x8c/0x210 drivers/ata/libata-scsi.c:4375
scsi\_dispatch\_cmd+0xa2/0xe0 drivers/scsi/scsi\_lib.c:1727
scsi\_request\_fn+0x24c/0x530 drivers/scsi/scsi\_lib.c:1865
\_\_blk\_run\_queue\_uncond block/blk-core.c:412 [inline]
\_\_blk\_run\_queue+0x3a/0x60 block/blk-core.c:432
blk\_execute\_rq\_nowait+0x93/0xc0 block/blk-exec.c:78
sg\_common\_write.isra.7+0x272/0x5a0 drivers/scsi/sg.c:806
sg\_write+0x1ef/0x340 drivers/scsi/sg.c:677
\_\_vfs\_write+0x31/0x160 fs/read\_write.c:480
vfs\_write+0xa7/0x160 fs/read\_write.c:544
SYSC\_write fs/read\_write.c:589 [inline]
SyS\_write+0x4d/0xc0 fs/read\_write.c:581
do\_syscall\_64+0x5e/0x110 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x21/0x86
Fixes: 607126c2a21c ("libata-scsi: be tolerant of 12-byte ATAPI commands in 16-byte CDBs")
Reported-by: syzbot+1ff6f9fcc3c35f1c72a95e26528c8e7e3276e4da@syzkaller.appspotmail.com
Signed-off-by: Eric Biggers
Signed-off-by: Tejun Heo
Signed-off-by: Ben Hutchings
commit 72ad0a39cb3603787cca30e395f8cdb7dd911d2b
Author: Xin Long
Date: Mon Feb 12 17:15:40 2018 +0800
bridge: check brport attr show in brport\_show
commit 1b12580af1d0677c3c3a19e35bfe5d59b03f737f upstream.
Now br\_sysfs\_if file flush doesn't have attr show. To read it will
cause kernel panic after users chmod u+r this file.
Xiong found this issue when running the commands:
ip link add br0 type bridge
ip link add type veth
ip link set veth0 master br0
chmod u+r /sys/devices/virtual/net/veth0/brport/flush
timeout 3 cat /sys/devices/virtual/net/veth0/brport/flush
kernel crashed with NULL a pointer dereference call trace.
This patch is to fix it by return -EINVAL when brport\_attr->show
is null, just the same as the check for brport\_attr->store in
brport\_store().
Fixes: 9cf637473c85 ("bridge: add sysfs hook to flush forwarding table")
Reported-by: Xiong Zhou
Signed-off-by: Xin Long
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit e05562277a05559c66476a1a32b4f43d493544a8
Author: Thinh Nguyen
Date: Fri Jan 12 18:18:05 2018 -0800
usb: dwc3: gadget: Set maxpacket size for ep0 IN
commit 6180026341e852a250e1f97ebdcf71684a3c81b9 upstream.
There are 2 control endpoint structures for DWC3. However, the driver
only updates the OUT direction control endpoint structure during
ConnectDone event. DWC3 driver needs to update the endpoint max packet
size for control IN endpoint as well. If the max packet size is not
properly set, then the driver will incorrectly calculate the data
transfer size and fail to send ZLP for HS/FS 3-stage control read
transfer.
The fix is simply to update the max packet size for the ep0 IN direction
during ConnectDone event.
Fixes: 72246da40f37 ("usb: Introduce DesignWare USB3 DRD Driver")
Signed-off-by: Thinh Nguyen
Signed-off-by: Felipe Balbi
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 37ecb938a4cd48d87492c16ea3e7d843a9513b38
Author: Zhang Bo
Date: Mon Feb 5 14:56:21 2018 -0800
Input: matrix\_keypad - fix race when disabling interrupts
commit ea4f7bd2aca9f68470e9aac0fc9432fd180b1fe7 upstream.
If matrix\_keypad\_stop() is executing and the keypad interrupt is triggered,
disable\_row\_irqs() may be called by both matrix\_keypad\_interrupt() and
matrix\_keypad\_stop() at the same time, causing interrupts to be disabled
twice and the keypad being "stuck" after resuming.
Take lock when setting keypad->stopped to ensure that ISR will not race
with matrix\_keypad\_stop() disabling interrupts.
Signed-off-by: Zhang Bo
Signed-off-by: Dmitry Torokhov
Signed-off-by: Ben Hutchings
commit 7aa2c8a3d19e27d8913b66e4f0e09ee86d56095e
Author: Julian Wiedmann
Date: Fri Feb 9 11:03:50 2018 +0100
s390/qeth: fix SETIP command handling
commit 1c5b2216fbb973a9410e0b06389740b5c1289171 upstream.
send\_control\_data() applies some special handling to SETIP v4 IPA
commands. But current code parses \*all\* command types for the SETIP
command code. Limit the command code check to IPA commands.
Fixes: 5b54e16f1a54 ("qeth: do not spin for SETIP ip assist command")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 498f0cc811a3fb51e374c8a2d1fe18dd352d1495
Author: Greg Kurz
Date: Mon Jan 22 22:02:05 2018 +0100
9p/trans\_virtio: discard zero-length reply
commit 26d99834f89e76514076d9cd06f61e56e6a509b8 upstream.
When a 9p request is successfully flushed, the server is expected to just
mark it as used without sending a 9p reply (ie, without writing data into
the buffer). In this case, virtqueue\_get\_buf() will return len == 0 and
we must not report a REQ\_STATUS\_RCVD status to the client, otherwise the
client will erroneously assume the request has not been flushed.
Signed-off-by: Greg Kurz
Signed-off-by: Michael S. Tsirkin
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 9ecf90b305220eade0a5634e6e604cf0e4fed796
Author: Nicolas Dichtel
Date: Wed Mar 14 21:10:23 2018 +0100
netlink: avoid a double skb free in genlmsg\_mcast()
commit 02a2385f37a7c6594c9d89b64c4a1451276f08eb upstream.
nlmsg\_multicast() consumes always the skb, thus the original skb must be
freed only when this function is called with a clone.
Fixes: cb9f7a9a5c96 ("netlink: ensure to loop over all netns in genlmsg\_multicast\_allns()")
Reported-by: Ben Hutchings
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit ab38ffccdf4e0b86b8e6be1ff8c7ce53df74c4ec
Author: Nicolas Dichtel
Date: Tue Feb 6 14:48:32 2018 +0100
netlink: ensure to loop over all netns in genlmsg\_multicast\_allns()
commit cb9f7a9a5c96a773bbc9c70660dc600cfff82f82 upstream.
Nowadays, nlmsg\_multicast() returns only 0 or -ESRCH but this was not the
case when commit 134e63756d5f was pushed.
However, there was no reason to stop the loop if a netns does not have
listeners.
Returns -ESRCH only if there was no listeners in all netns.
To avoid having the same problem in the future, I didn't take the
assumption that nlmsg\_multicast() returns only 0 or -ESRCH.
Fixes: 134e63756d5f ("genetlink: make netns aware")
CC: Johannes Berg
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: s/portid/pid/]
Signed-off-by: Ben Hutchings
commit bbac54a340725967fc76de730f384503bfcb835e
Author: Nathan Fontenot
Date: Fri Jan 26 13:41:59 2018 -0600
powerpc/numa: Invalidate numa\_cpu\_lookup\_table on cpu remove
commit 1d9a090783bef19fe8cdec878620d22f05191316 upstream.
When DLPAR removing a CPU, the unmapping of the cpu from a node in
unmap\_cpu\_from\_node() should also invalidate the CPUs entry in the
numa\_cpu\_lookup\_table. There is not a guarantee that on a subsequent
DLPAR add of the CPU the associativity will be the same and thus
could be in a different node. Invalidating the entry in the
numa\_cpu\_lookup\_table causes the associativity to be read from the
device tree at the time of the add.
The current behavior of not invalidating the CPUs entry in the
numa\_cpu\_lookup\_table can result in scenarios where the the topology
layout of CPUs in the partition does not match the device tree
or the topology reported by the HMC.
This bug looks like it was introduced in 2004 in the commit titled
"ppc64: cpu hotplug notifier for numa", which is 6b15e4e87e32 in the
linux-fullhist tree. Hence tag it for all stable releases.
Signed-off-by: Nathan Fontenot
Reviewed-by: Tyrel Datwyler
Signed-off-by: Michael Ellerman
[bwh: Backported to 3.2:
- update\_numa\_cpu\_lookup\_table() wasn't defined anywhere before
- Adjust context]
Signed-off-by: Ben Hutchings
commit dc6b17441d28393b827e96b735c40377a68b1111
Author: Cong Wang
Date: Mon Feb 5 14:41:45 2018 -0800
netfilter: xt\_RATEEST: acquire xt\_rateest\_mutex for hash insert
commit 7dc68e98757a8eccf8ca7a53a29b896f1eef1f76 upstream.
rateest\_hash is supposed to be protected by xt\_rateest\_mutex,
and, as suggested by Eric, lookup and insert should be atomic,
so we should acquire the xt\_rateest\_mutex once for both.
So introduce a non-locking helper for internal use and keep the
locking one for external.
Reported-by:
Fixes: 5859034d7eb8 ("[NETFILTER]: x\_tables: add RATEEST target")
Signed-off-by: Cong Wang
Reviewed-by: Florian Westphal
Reviewed-by: Eric Dumazet
Signed-off-by: Pablo Neira Ayuso
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 0846479232c94660b2f62d9390da3e8fbfc6d337
Author: Matt Redfearn
Date: Mon Jan 29 11:26:45 2018 +0000
MIPS: TXx9: use IS\_BUILTIN() for CONFIG\_LEDS\_CLASS
commit 0cde5b44a30f1daaef1c34e08191239dc63271c4 upstream.
When commit b27311e1cace ("MIPS: TXx9: Add RBTX4939 board support")
added board support for the RBTX4939, it added a call to
led\_classdev\_register even if the LED class is built as a module.
Built-in arch code cannot call module code directly like this. Commit
b33b44073734 ("MIPS: TXX9: use IS\_ENABLED() macro") subsequently
changed the inclusion of this code to a single check that
CONFIG\_LEDS\_CLASS is either builtin or a module, but the same issue
remains.
This leads to MIPS allmodconfig builds failing when CONFIG\_MACH\_TX49XX=y
is set:
arch/mips/txx9/rbtx4939/setup.o: In function `rbtx4939\_led\_probe':
setup.c:(.init.text+0xc0): undefined reference to `of\_led\_classdev\_register'
make: \*\*\* [Makefile:999: vmlinux] Error 1
Fix this by using the IS\_BUILTIN() macro instead.
Fixes: b27311e1cace ("MIPS: TXx9: Add RBTX4939 board support")
Signed-off-by: Matt Redfearn
Reviewed-by: James Hogan
Cc: Ralf Baechle
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/18544/
Signed-off-by: James Hogan
Signed-off-by: Ben Hutchings
commit 03840a6ce87cd9a020d37b8d685f3dd89c7fd1ff
Author: Florian Fainelli
Date: Tue Jan 31 18:19:05 2012 +0100
MIPS: TXX9: use IS\_ENABLED() macro
commit b33b44073734842ec0c75d376c40d0471d6113ff upstream.
Signed-off-by: Florian Fainelli
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/3334/
Signed-off-by: Ralf Baechle
Signed-off-by: Ben Hutchings
commit 8d4bc4c9b764f294f639887aca19265133048f1c
Author: Jean Delvare
Date: Sat Feb 3 11:25:20 2018 +0100
firmware: dmi\_scan: Fix handling of empty DMI strings
commit a7770ae194569e96a93c48aceb304edded9cc648 upstream.
The handling of empty DMI strings looks quite broken to me:
\* Strings from 1 to 7 spaces are not considered empty.
\* True empty DMI strings (string index set to 0) are not considered
empty, and result in allocating a 0-char string.
\* Strings with invalid index also result in allocating a 0-char
string.
\* Strings starting with 8 spaces are all considered empty, even if
non-space characters follow (sounds like a weird thing to do, but
I have actually seen occurrences of this in DMI tables before.)
\* Strings which are considered empty are reported as 8 spaces,
instead of being actually empty.
Some of these issues are the result of an off-by-one error in memcmp,
the rest is incorrect by design.
So let's get it square: missing strings and strings made of only
spaces, regardless of their length, should be treated as empty and
no memory should be allocated for them. All other strings are
non-empty and should be allocated.
Signed-off-by: Jean Delvare
Fixes: 79da4721117f ("x86: fix DMI out of memory problems")
Cc: Parag Warudkar
Cc: Ingo Molnar
Cc: Thomas Gleixner
Signed-off-by: Ben Hutchings
commit 6f5913017efcb8f08d80bdc39edb36956c6e4ab2
Author: Jean Delvare
Date: Wed Sep 11 14:24:09 2013 -0700
firmware/dmi\_scan: constify strings
commit ffbbb96dd7570b9aafd426cd77a7ee03d224cabf upstream.
Add const to all DMI string pointers where this is possible. This fixes a
checkpatch warning.
Signed-off-by: Jean Delvare
Cc: Joe Perches
Cc: Ben Hutchings
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 9c6a3641db87910a3e7cc0a63095a2ac1a9df41c
Author: Liu Bo
Date: Thu Jan 25 11:02:52 2018 -0700
Btrfs: fix extent state leak from tree log
commit 55237a5f2431a72435e3ed39e4306e973c0446b7 upstream.
It's possible that btrfs\_sync\_log() bails out after one of the two
btrfs\_write\_marked\_extents() which convert extent state's state bit into
EXTENT\_NEED\_WAIT from EXTENT\_DIRTY/EXTENT\_NEW, however only EXTENT\_DIRTY
and EXTENT\_NEW are searched by free\_log\_tree() so that those extent states
with EXTENT\_NEED\_WAIT lead to memory leak.
Signed-off-by: Liu Bo
Reviewed-by: Josef Bacik
Signed-off-by: David Sterba
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 504bc042094b80a7fcfd8d7efb2f391301f6c611
Author: Eric Dumazet
Date: Thu Feb 1 10:26:57 2018 -0800
net: igmp: add a missing rcu locking section
commit e7aadb27a5415e8125834b84a74477bfbee4eff5 upstream.
Newly added igmpv3\_get\_srcaddr() needs to be called under rcu lock.
Timer callbacks do not ensure this locking.
=============================
WARNING: suspicious RCU usage
4.15.0+ #200 Not tainted
-----------------------------
./include/linux/inetdevice.h:216 suspicious rcu\_dereference\_check() usage!
other info that might help us debug this:
rcu\_scheduler\_active = 2, debug\_locks = 1
3 locks held by syzkaller616973/4074:
#0: (&mm->mmap\_sem){++++}, at: [<00000000bfce669e>] \_\_do\_page\_fault+0x32d/0xc90 arch/x86/mm/fault.c:1355
#1: ((&im->timer)){+.-.}, at: [<00000000619d2f71>] lockdep\_copy\_map include/linux/lockdep.h:178 [inline]
#1: ((&im->timer)){+.-.}, at: [<00000000619d2f71>] call\_timer\_fn+0x1c6/0x820 kernel/time/timer.c:1316
#2: (&(&im->lock)->rlock){+.-.}, at: [<000000005f833c5c>] spin\_lock\_bh include/linux/spinlock.h:315 [inline]
#2: (&(&im->lock)->rlock){+.-.}, at: [<000000005f833c5c>] igmpv3\_send\_report+0x98/0x5b0 net/ipv4/igmp.c:600
stack backtrace:
CPU: 0 PID: 4074 Comm: syzkaller616973 Not tainted 4.15.0+ #200
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
\_\_dump\_stack lib/dump\_stack.c:17 [inline]
dump\_stack+0x194/0x257 lib/dump\_stack.c:53
lockdep\_rcu\_suspicious+0x123/0x170 kernel/locking/lockdep.c:4592
\_\_in\_dev\_get\_rcu include/linux/inetdevice.h:216 [inline]
igmpv3\_get\_srcaddr net/ipv4/igmp.c:329 [inline]
igmpv3\_newpack+0xeef/0x12e0 net/ipv4/igmp.c:389
add\_grhead.isra.27+0x235/0x300 net/ipv4/igmp.c:432
add\_grec+0xbd3/0x1170 net/ipv4/igmp.c:565
igmpv3\_send\_report+0xd5/0x5b0 net/ipv4/igmp.c:605
igmp\_send\_report+0xc43/0x1050 net/ipv4/igmp.c:722
igmp\_timer\_expire+0x322/0x5c0 net/ipv4/igmp.c:831
call\_timer\_fn+0x228/0x820 kernel/time/timer.c:1326
expire\_timers kernel/time/timer.c:1363 [inline]
\_\_run\_timers+0x7ee/0xb70 kernel/time/timer.c:1666
run\_timer\_softirq+0x4c/0x70 kernel/time/timer.c:1692
\_\_do\_softirq+0x2d7/0xb85 kernel/softirq.c:285
invoke\_softirq kernel/softirq.c:365 [inline]
irq\_exit+0x1cc/0x200 kernel/softirq.c:405
exiting\_irq arch/x86/include/asm/apic.h:541 [inline]
smp\_apic\_timer\_interrupt+0x16b/0x700 arch/x86/kernel/apic/apic.c:1052
apic\_timer\_interrupt+0xa9/0xb0 arch/x86/entry/entry\_64.S:938
Fixes: a46182b00290 ("net: igmp: Use correct source address on IGMPv3 reports")
Signed-off-by: Eric Dumazet
Reported-by: syzbot
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 040c686caa16b1b7018c0d132f48d76474b0b930
Author: Mel Gorman
Date: Wed Jan 31 16:19:52 2018 -0800
mm: pin address\_space before dereferencing it while isolating an LRU page
commit 69d763fc6d3aee787a3e8c8c35092b4f4960fa5d upstream.
Minchan Kim asked the following question -- what locks protects
address\_space destroying when race happens between inode trauncation and
\_\_isolate\_lru\_page? Jan Kara clarified by describing the race as follows
CPU1 CPU2
truncate(inode) \_\_isolate\_lru\_page()
...
truncate\_inode\_page(mapping, page);
delete\_from\_page\_cache(page)
spin\_lock\_irqsave(&mapping->tree\_lock, flags);
\_\_delete\_from\_page\_cache(page, NULL)
page\_cache\_tree\_delete(..)
... mapping = page\_mapping(page);
page->mapping = NULL;
...
spin\_unlock\_irqrestore(&mapping->tree\_lock, flags);
page\_cache\_free\_page(mapping, page)
put\_page(page)
if (put\_page\_testzero(page)) -> false
- inode now has no pages and can be freed including embedded address\_space
if (mapping && !mapping->a\_ops->migratepage)
- we've dereferenced mapping which is potentially already free.
The race is theoretically possible but unlikely. Before the
delete\_from\_page\_cache, truncate\_cleanup\_page is called so the page is
likely to be !PageDirty or PageWriteback which gets skipped by the only
caller that checks the mappping in \_\_isolate\_lru\_page. Even if the race
occurs, a substantial amount of work has to happen during a tiny window
with no preemption but it could potentially be done using a virtual
machine to artifically slow one CPU or halt it during the critical
window.
This patch should eliminate the race with truncation by try-locking the
page before derefencing mapping and aborting if the lock was not
acquired. There was a suggestion from Huang Ying to use RCU as a
side-effect to prevent mapping being freed. However, I do not like the
solution as it's an unconventional means of preserving a mapping and
it's not a context where rcu\_read\_lock is obviously protecting rcu data.
Link: http://lkml.kernel.org/r/20180104102512.2qos3h5vqzeisrek@techsingularity.net
Fixes: c82449352854 ("mm: compaction: make isolate\_lru\_page() filter-aware again")
Signed-off-by: Mel Gorman
Acked-by: Minchan Kim
Cc: "Huang, Ying"
Cc: Jan Kara
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 22204d496323e6abd5ed3ab4d251fd473543e7ff
Author: Paolo Abeni
Date: Tue Jan 30 19:01:40 2018 +0100
netfilter: on sockopt() acquire sock lock only in the required scope
commit 3f34cfae1238848fd53f25e5c8fd59da57901f4b upstream.
Syzbot reported several deadlocks in the netfilter area caused by
rtnl lock and socket lock being acquired with a different order on
different code paths, leading to backtraces like the following one:
======================================================
WARNING: possible circular locking dependency detected
4.15.0-rc9+ #212 Not tainted
------------------------------------------------------
syzkaller041579/3682 is trying to acquire lock:
(sk\_lock-AF\_INET6){+.+.}, at: [<000000008775e4dd>] lock\_sock
include/net/sock.h:1463 [inline]
(sk\_lock-AF\_INET6){+.+.}, at: [<000000008775e4dd>]
do\_ipv6\_setsockopt.isra.8+0x3c5/0x39d0 net/ipv6/ipv6\_sockglue.c:167
but task is already holding lock:
(rtnl\_mutex){+.+.}, at: [<000000004342eaa9>] rtnl\_lock+0x17/0x20
net/core/rtnetlink.c:74
which lock already depends on the new lock.
the existing dependency chain (in reverse order) is:
-> #1 (rtnl\_mutex){+.+.}:
\_\_mutex\_lock\_common kernel/locking/mutex.c:756 [inline]
\_\_mutex\_lock+0x16f/0x1a80 kernel/locking/mutex.c:893
mutex\_lock\_nested+0x16/0x20 kernel/locking/mutex.c:908
rtnl\_lock+0x17/0x20 net/core/rtnetlink.c:74
register\_netdevice\_notifier+0xad/0x860 net/core/dev.c:1607
tee\_tg\_check+0x1a0/0x280 net/netfilter/xt\_TEE.c:106
xt\_check\_target+0x22c/0x7d0 net/netfilter/x\_tables.c:845
check\_target net/ipv6/netfilter/ip6\_tables.c:538 [inline]
find\_check\_entry.isra.7+0x935/0xcf0
net/ipv6/netfilter/ip6\_tables.c:580
translate\_table+0xf52/0x1690 net/ipv6/netfilter/ip6\_tables.c:749
do\_replace net/ipv6/netfilter/ip6\_tables.c:1165 [inline]
do\_ip6t\_set\_ctl+0x370/0x5f0 net/ipv6/netfilter/ip6\_tables.c:1691
nf\_sockopt net/netfilter/nf\_sockopt.c:106 [inline]
nf\_setsockopt+0x67/0xc0 net/netfilter/nf\_sockopt.c:115
ipv6\_setsockopt+0x115/0x150 net/ipv6/ipv6\_sockglue.c:928
udpv6\_setsockopt+0x45/0x80 net/ipv6/udp.c:1422
sock\_common\_setsockopt+0x95/0xd0 net/core/sock.c:2978
SYSC\_setsockopt net/socket.c:1849 [inline]
SyS\_setsockopt+0x189/0x360 net/socket.c:1828
entry\_SYSCALL\_64\_fastpath+0x29/0xa0
-> #0 (sk\_lock-AF\_INET6){+.+.}:
lock\_acquire+0x1d5/0x580 kernel/locking/lockdep.c:3914
lock\_sock\_nested+0xc2/0x110 net/core/sock.c:2780
lock\_sock include/net/sock.h:1463 [inline]
do\_ipv6\_setsockopt.isra.8+0x3c5/0x39d0 net/ipv6/ipv6\_sockglue.c:167
ipv6\_setsockopt+0xd7/0x150 net/ipv6/ipv6\_sockglue.c:922
udpv6\_setsockopt+0x45/0x80 net/ipv6/udp.c:1422
sock\_common\_setsockopt+0x95/0xd0 net/core/sock.c:2978
SYSC\_setsockopt net/socket.c:1849 [inline]
SyS\_setsockopt+0x189/0x360 net/socket.c:1828
entry\_SYSCALL\_64\_fastpath+0x29/0xa0
other info that might help us debug this:
Possible unsafe locking scenario:
CPU0 CPU1
---- ----
lock(rtnl\_mutex);
lock(sk\_lock-AF\_INET6);
lock(rtnl\_mutex);
lock(sk\_lock-AF\_INET6);
\*\*\* DEADLOCK \*\*\*
1 lock held by syzkaller041579/3682:
#0: (rtnl\_mutex){+.+.}, at: [<000000004342eaa9>] rtnl\_lock+0x17/0x20
net/core/rtnetlink.c:74
The problem, as Florian noted, is that nf\_setsockopt() is always
called with the socket held, even if the lock itself is required only
for very tight scopes and only for some operation.
This patch addresses the issues moving the lock\_sock() call only
where really needed, namely in ipv\*\_getorigdst(), so that nf\_setsockopt()
does not need anymore to acquire both locks.
Fixes: 22265a5c3c10 ("netfilter: xt\_TEE: resolve oif using netdevice notifiers")
Reported-by: syzbot+a4c2dc980ac1af699b36@syzkaller.appspotmail.com
Suggested-by: Florian Westphal
Signed-off-by: Paolo Abeni
Signed-off-by: Pablo Neira Ayuso
[bwh: Backported to 3.2: Drop changes to ipv6\_getorigdst()]
Signed-off-by: Ben Hutchings
commit 3f58460c0e71b46a812dad1831b92149ee785071
Author: Dmitry Vyukov
Date: Tue Jan 30 15:21:34 2018 +0100
netfilter: ipt\_CLUSTERIP: fix out-of-bounds accesses in clusterip\_tg\_check()
commit 1a38956cce5eabd7b74f94bab70265e4df83165e upstream.
Commit 136e92bbec0a switched local\_nodes from an array to a bitmask
but did not add proper bounds checks. As the result
clusterip\_config\_init\_nodelist() can both over-read
ipt\_clusterip\_tgt\_info.local\_nodes and over-write
clusterip\_config.local\_nodes.
Add bounds checks for both.
Fixes: 136e92bbec0a ("[NETFILTER] CLUSTERIP: use a bitmap to store node responsibility data")
Signed-off-by: Dmitry Vyukov
Reported-by: syzbot
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Ben Hutchings
commit da6941f4cc37699b2ff3894d279ca439548f768a
Author: Tyrel Datwyler
Date: Tue Jan 23 20:11:32 2018 -0600
scsi: ibmvfc: fix misdefined reserved field in ibmvfc\_fcp\_rsp\_info
commit c39813652700f3df552b6557530f1e5f782dbe2f upstream.
The fcp\_rsp\_info structure as defined in the FC spec has an initial 3
bytes reserved field. The ibmvfc driver mistakenly defined this field as
4 bytes resulting in the rsp\_code field being defined in what should be
the start of the second reserved field and thus always being reported as
zero by the driver.
Ideally, we should wire ibmvfc up with libfc for the sake of code
deduplication, and ease of maintaining standardized structures in a
single place. However, for now simply fixup the definition in ibmvfc for
backporting to distros on older kernels. Wiring up with libfc will be
done in a followup patch.
Reported-by: Hannes Reinecke
Signed-off-by: Tyrel Datwyler
Signed-off-by: Martin K. Petersen
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit c86fd4aa55bf7729931aa4aeafb5383e049bedd1
Author: Mauro Carvalho Chehab
Date: Wed Jan 24 06:01:57 2018 -0500
media: cxusb, dib0700: ignore XC2028\_I2C\_FLUSH
commit 9893b905e743ded332575ca04486bd586c0772f7 upstream.
The XC2028\_I2C\_FLUSH only needs to be implemented on a few
devices. Others can safely ignore it.
That prevents filling the dmesg with lots of messages like:
dib0700: stk7700ph\_xc3028\_callback: unknown command 2, arg 0
Fixes: 4d37ece757a8 ("[media] tuner/xc2028: Add I2C flush callback")
Reported-by: Enrico Mioso
Signed-off-by: Mauro Carvalho Chehab
[bwh: Backported to 3.2: adjust filenames]
Signed-off-by: Ben Hutchings
commit 3ab6569af58314342d8630502cd783b2d0135914
Author: Jake Daryll Obina
Date: Fri Sep 22 00:00:14 2017 +0800
jffs2: Fix use-after-free bug in jffs2\_iget()'s error handling path
commit 5bdd0c6f89fba430e18d636493398389dadc3b17 upstream.
If jffs2\_iget() fails for a newly-allocated inode, jffs2\_do\_clear\_inode()
can get called twice in the error handling path, the first call in
jffs2\_iget() itself and the second through iget\_failed(). This can result
to a use-after-free error in the second jffs2\_do\_clear\_inode() call, such
as shown by the oops below wherein the second jffs2\_do\_clear\_inode() call
was trying to free node fragments that were already freed in the first
jffs2\_do\_clear\_inode() call.
[ 78.178860] jffs2: error: (1904) jffs2\_do\_read\_inode\_internal: CRC failed for read\_inode of inode 24 at physical location 0x1fc00c
[ 78.178914] Unable to handle kernel paging request at virtual address 6b6b6b6b6b6b6b7b
[ 78.185871] pgd = ffffffc03a567000
[ 78.188794] [6b6b6b6b6b6b6b7b] \*pgd=0000000000000000, \*pud=0000000000000000
[ 78.194968] Internal error: Oops: 96000004 [#1] PREEMPT SMP
...
[ 78.513147] PC is at rb\_first\_postorder+0xc/0x28
[ 78.516503] LR is at jffs2\_kill\_fragtree+0x28/0x90 [jffs2]
[ 78.520672] pc : [] lr : [] pstate: 60000105
[ 78.526757] sp : ffffff800cea38f0
[ 78.528753] x29: ffffff800cea38f0 x28: ffffffc01f3f8e80
[ 78.532754] x27: 0000000000000000 x26: ffffff800cea3c70
[ 78.536756] x25: 00000000dc67c8ae x24: ffffffc033d6945d
[ 78.540759] x23: ffffffc036811740 x22: ffffff800891a5b8
[ 78.544760] x21: 0000000000000000 x20: 0000000000000000
[ 78.548762] x19: ffffffc037d48910 x18: ffffff800891a588
[ 78.552764] x17: 0000000000000800 x16: 0000000000000c00
[ 78.556766] x15: 0000000000000010 x14: 6f2065646f6e695f
[ 78.560767] x13: 6461657220726f66 x12: 2064656c69616620
[ 78.564769] x11: 435243203a6c616e x10: 7265746e695f6564
[ 78.568771] x9 : 6f6e695f64616572 x8 : ffffffc037974038
[ 78.572774] x7 : bbbbbbbbbbbbbbbb x6 : 0000000000000008
[ 78.576775] x5 : 002f91d85bd44a2f x4 : 0000000000000000
[ 78.580777] x3 : 0000000000000000 x2 : 000000403755e000
[ 78.584779] x1 : 6b6b6b6b6b6b6b6b x0 : 6b6b6b6b6b6b6b6b
...
[ 79.038551] [] rb\_first\_postorder+0xc/0x28
[ 79.042962] [] jffs2\_do\_clear\_inode+0x88/0x100 [jffs2]
[ 79.048395] [] jffs2\_evict\_inode+0x3c/0x48 [jffs2]
[ 79.053443] [] evict+0xb0/0x168
[ 79.056835] [] iput+0x1c0/0x200
[ 79.060228] [] iget\_failed+0x30/0x3c
[ 79.064097] [] jffs2\_iget+0x2d8/0x360 [jffs2]
[ 79.068740] [] jffs2\_lookup+0xe8/0x130 [jffs2]
[ 79.073434] [] lookup\_slow+0x118/0x190
[ 79.077435] [] walk\_component+0xfc/0x28c
[ 79.081610] [] path\_lookupat+0x84/0x108
[ 79.085699] [] filename\_lookup+0x88/0x100
[ 79.089960] [] user\_path\_at\_empty+0x58/0x6c
[ 79.094396] [] vfs\_statx+0xa4/0x114
[ 79.098138] [] SyS\_newfstatat+0x58/0x98
[ 79.102227] [] \_\_sys\_trace\_return+0x0/0x4
[ 79.106489] Code: d65f03c0 f9400001 b40000e1 aa0103e0 (f9400821)
The jffs2\_do\_clear\_inode() call in jffs2\_iget() is unnecessary since
iget\_failed() will eventually call jffs2\_do\_clear\_inode() if needed, so
just remove it.
Fixes: 5451f79f5f81 ("iget: stop JFFS2 from using iget() and read\_inode()")
Reviewed-by: Richard Weinberger
Signed-off-by: Jake Daryll Obina
Signed-off-by: Al Viro
Signed-off-by: Ben Hutchings
commit 9b5cc5e057e2e65c035932ff56fd796a6314307f
Author: Greg Kroah-Hartman
Date: Thu Jan 25 09:48:55 2018 +0100
USB: serial: pl2303: new device id for Chilitag
commit d08dd3f3dd2ae351b793fc5b76abdbf0fd317b12 upstream.
This adds a new device id for Chilitag devices to the pl2303 driver.
Reported-by: "Chu.Mike [朱堅宜]"
Acked-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 369813ffa51bbc02e0932fb2dd1e5f3374789dfa
Author: Matthew Wilcox
Date: Fri Dec 15 12:48:32 2017 -0800
cifs: Fix missing put\_xid in cifs\_file\_strict\_mmap
commit f04a703c3d613845ae3141bfaf223489de8ab3eb upstream.
If cifs\_zap\_mapping() returned an error, we would return without putting
the xid that we got earlier. Restructure cifs\_file\_strict\_mmap() and
cifs\_file\_mmap() to be more similar to each other and have a single
point of return that always puts the xid.
Signed-off-by: Matthew Wilcox
Signed-off-by: Steve French
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 50a44c165a67ff0b7e14d221af6cb6c1035aa90a
Author: Dan Carpenter
Date: Wed Jan 10 12:39:03 2018 +0300
HID: roccat: prevent an out of bounds read in kovaplus\_profile\_activated()
commit 7ad81482cad67cbe1ec808490d1ddfc420c42008 upstream.
We get the "new\_profile\_index" value from the mouse device when we're
handling raw events. Smatch taints it as untrusted data and complains
that we need a bounds check. This seems like a reasonable warning
otherwise there is a small read beyond the end of the array.
Fixes: 0e70f97f257e ("HID: roccat: Add support for Kova[+] mouse")
Signed-off-by: Dan Carpenter
Acked-by: Silvan Jegen
Signed-off-by: Jiri Kosina
Signed-off-by: Ben Hutchings
commit f064e3c7e09390ea48a5fbda0528e145fba432b5
Author: Eugene Syromiatnikov
Date: Mon Jan 15 20:38:17 2018 +0100
s390: fix handling of -1 in set{,fs}[gu]id16 syscalls
commit 6dd0d2d22aa363fec075cb2577ba273ac8462e94 upstream.
For some reason, the implementation of some 16-bit ID system calls
(namely, setuid16/setgid16 and setfsuid16/setfsgid16) used type cast
instead of low2highgid/low2highuid macros for converting [GU]IDs, which
led to incorrect handling of value of -1 (which ought to be considered
invalid).
Discovered by strace test suite.
Signed-off-by: Eugene Syromiatnikov
Signed-off-by: Heiko Carstens
Signed-off-by: Martin Schwidefsky
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 2957236b68e747eff5ab9176448b906042af9ff7
Author: Arnd Bergmann
Date: Thu Jan 18 14:16:38 2018 +0100
scsi: fas216: fix sense buffer initialization
commit 96d5eaa9bb74d299508d811d865c2c41b38b0301 upstream.
While testing with the ARM specific memset() macro removed, I ran into a
compiler warning that shows an old bug:
drivers/scsi/arm/fas216.c: In function 'fas216\_rq\_sns\_done':
drivers/scsi/arm/fas216.c:2014:40: error: argument to 'sizeof' in 'memset' call is the same expression as the destination; did you mean to provide an explicit length? [-Werror=sizeof-pointer-memaccess]
It turns out that the definition of the scsi\_cmd structure changed back
in linux-2.6.25, so now we clear only four bytes (sizeof(pointer))
instead of 96 (SCSI\_SENSE\_BUFFERSIZE). I did not check whether we
actually need to initialize the buffer here, but it's clear that if we
do it, we should use the correct size.
Fixes: de25deb18016 ("[SCSI] use dynamically allocated sense buffer")
Signed-off-by: Arnd Bergmann
Signed-off-by: Martin K. Petersen
Signed-off-by: Ben Hutchings
commit 97aa6ff70517ec6281981ade753e6abca3fa1b7e
Author: Oliver Neukum
Date: Thu Jan 18 12:13:45 2018 +0100
CDC-ACM: apply quirk for card reader
commit df1cc78a52491f71d8170d513d0f6f114faa1bda upstream.
This devices drops random bytes from messages if you talk to it
too fast.
Signed-off-by: Oliver Neukum
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 629bfb9f6b0d47c4ec805ec587acca059b68e924
Author: Mikulas Patocka
Date: Tue Jan 2 14:01:34 2018 -0500
alpha: fix crash if pthread\_create races with signal delivery
commit 21ffceda1c8b3807615c40d440d7815e0c85d366 upstream.
On alpha, a process will crash if it attempts to start a thread and a
signal is delivered at the same time. The crash can be reproduced with
this program: https://cygwin.com/ml/cygwin/2014-11/msg00473.html
The reason for the crash is this:
\* we call the clone syscall
\* we go to the function copy\_process
\* copy process calls copy\_thread\_tls, it is a wrapper around copy\_thread
\* copy\_thread sets the tls pointer: childti->pcb.unique = regs->r20
\* copy\_thread sets regs->r20 to zero
\* we go back to copy\_process
\* copy process checks "if (signal\_pending(current))" and returns
-ERESTARTNOINTR
\* the clone syscall is restarted, but this time, regs->r20 is zero, so
the new thread is created with zero tls pointer
\* the new thread crashes in start\_thread when attempting to access tls
The comment in the code says that setting the register r20 is some
compatibility with OSF/1. But OSF/1 doesn't use the CLONE\_SETTLS flag, so
we don't have to zero r20 if CLONE\_SETTLS is set. This patch fixes the bug
by zeroing regs->r20 only if CLONE\_SETTLS is not set.
Signed-off-by: Mikulas Patocka
Signed-off-by: Matt Turner
[bwh: Backported to 3.2:
- Remove the settls variable, which was done upstream in commit 25906730ec01
"alpha: reorganize copy\_process(), prepare to saner fork\_idle()"]
- Adjust context]
Signed-off-by: Ben Hutchings
commit 33d0141f9db7664a04bfb17a576867c0122f226a
Author: Mikulas Patocka
Date: Tue Jan 2 13:59:54 2018 -0500
alpha: fix reboot on Avanti platform
commit 55fc633c41a08ce9244ff5f528f420b16b1e04d6 upstream.
We need to define NEED\_SRM\_SAVE\_RESTORE on the Avanti, otherwise we get
machine check exception when attempting to reboot the machine.
Signed-off-by: Mikulas Patocka
Signed-off-by: Matt Turner
Signed-off-by: Ben Hutchings
commit b33d9e10f27273765c81fbf0b918703e30ef9537
Author: James Hogan
Date: Tue Jan 16 21:38:24 2018 +0000
MIPS: Fix clean of vmlinuz.{32,ecoff,bin,srec}
commit 5f2483eb2423152445b39f2db59d372f523e664e upstream.
Make doesn't expand shell style "vmlinuz.{32,ecoff,bin,srec}" to the 4
separate files, so none of these files get cleaned up by make clean.
List the files separately instead.
Fixes: ec3352925b74 ("MIPS: Remove all generated vmlinuz\* files on "make clean"")
Signed-off-by: James Hogan
Cc: Ralf Baechle
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/18491/
Signed-off-by: Ben Hutchings
commit 3176b3a9ebc2598e8efb31c3fc89634cc202a862
Author: Felix Kuehling
Date: Wed Jan 17 23:52:03 2018 -0500
drm/ttm: Don't add swapped BOs to swap-LRU list
commit fd5002d6a3c602664b07668a24df4ef7a43bf078 upstream.
A BO that's already swapped would be added back to the swap-LRU list
for example if its validation failed under high memory pressure. This
could later lead to swapping it out again and leaking previous swap
storage.
This commit adds a condition to prevent that from happening.
v2: Check page\_flags instead of swap\_storage
Signed-off-by: Felix Kuehling
Reviewed-by: Christian König
Signed-off-by: Alex Deucher
[bwh: Backported to 3.2: We aren't checking for TTM\_PAGE\_FLAG\_SG here as that's
not defined]
Signed-off-by: Ben Hutchings
commit 7adc87b34aaf5df502f45e41f02089717b6f51c8
Author: Clay McClure
Date: Thu Sep 21 19:01:34 2017 -0700
ubi: Fix race condition between ubi volume creation and udev
commit a51a0c8d213594bc094cb8e54aad0cb6d7f7b9a6 upstream.
Similar to commit 714fb87e8bc0 ("ubi: Fix race condition between ubi
device creation and udev"), we should make the volume active before
registering it.
Signed-off-by: Clay McClure
Signed-off-by: Richard Weinberger
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit bdd119a94b74acb4cc720695eac50f01173b7496
Author: mulhern
Date: Mon Nov 27 10:02:39 2017 -0500
dm thin: fix documentation relative to low water mark threshold
commit 9b28a1102efc75d81298198166ead87d643a29ce upstream.
Fixes:
1. The use of "exceeds" when the opposite of exceeds, falls below,
was meant.
2. Properly speaking, a table can not exceed a threshold.
It emphasizes the important point, which is that it is the userspace
daemon's responsibility to check for low free space when a device
is resumed, since it won't get a special event indicating low free
space in that situation.
Signed-off-by: mulhern
Signed-off-by: Mike Snitzer
Signed-off-by: Ben Hutchings
commit 396293c0274c394da7e9d19260c632c970656b90
Author: Hans de Goede
Date: Sun Jan 14 16:09:00 2018 +0100
USB: cdc-acm: Do not log urb submission errors on disconnect
commit f0386c083c2ce85284dc0b419d7b89c8e567c09f upstream.
When disconnected sometimes the cdc-acm driver logs errors like these:
[20278.039417] cdc\_acm 2-2:2.1: urb 9 failed submission with -19
[20278.042924] cdc\_acm 2-2:2.1: urb 10 failed submission with -19
[20278.046449] cdc\_acm 2-2:2.1: urb 11 failed submission with -19
[20278.049920] cdc\_acm 2-2:2.1: urb 12 failed submission with -19
[20278.053442] cdc\_acm 2-2:2.1: urb 13 failed submission with -19
[20278.056915] cdc\_acm 2-2:2.1: urb 14 failed submission with -19
[20278.060418] cdc\_acm 2-2:2.1: urb 15 failed submission with -19
Silence these by not logging errors when the result is -ENODEV.
Signed-off-by: Hans de Goede
Acked-by: Oliver Neukum
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit dcc9bd87a2825e27df2dde6425b32d9da48421b2
Author: Anna-Maria Gleixner
Date: Thu Dec 21 11:41:35 2017 +0100
hrtimer: Ensure POSIX compliance (relative CLOCK\_REALTIME hrtimers)
commit 48d0c9becc7f3c66874c100c126459a9da0fdced upstream.
The POSIX specification defines that relative CLOCK\_REALTIME timers are not
affected by clock modifications. Those timers have to use CLOCK\_MONOTONIC
to ensure POSIX compliance.
The introduction of the additional HRTIMER\_MODE\_PINNED mode broke this
requirement for pinned timers.
There is no user space visible impact because user space timers are not
using pinned mode, but for consistency reasons this needs to be fixed.
Check whether the mode has the HRTIMER\_MODE\_REL bit set instead of
comparing with HRTIMER\_MODE\_ABS.
Signed-off-by: Anna-Maria Gleixner
Cc: Christoph Hellwig
Cc: John Stultz
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: keescook@chromium.org
Fixes: 597d0275736d ("timers: Framework for identifying pinned timers")
Link: http://lkml.kernel.org/r/20171221104205.7269-7-anna-maria@linutronix.de
Signed-off-by: Ingo Molnar
[bwh: Backported to 3.2: adjust filename]
Signed-off-by: Ben Hutchings
commit 11043ae6a9e56a2c362ae4289f1ca77e3ff4be4f
Author: Dan Carpenter
Date: Mon Jan 15 11:08:38 2018 +0300
ASoC: au1x: Fix timeout tests in au1xac97c\_ac97\_read()
commit 123af9043e93cb6f235207d260d50f832cdb5439 upstream.
The loop timeout doesn't work because it's a post op and ends with "tmo"
set to -1. I changed it from a post-op to a pre-op and I changed the
initial the starting value from 5 to 6 so we still iterate 5 times. I
left the other as it was because it's a large number.
Fixes: b3c70c9ea62a ("ASoC: Alchemy AC97C/I2SC audio support")
Signed-off-by: Dan Carpenter
Signed-off-by: Mark Brown
Signed-off-by: Ben Hutchings
commit c7411569cbc87bad53d9811166a49eaaa3b71cc3
Author: Nicolas Pitre
Date: Mon Jan 15 17:04:22 2018 +0100
console/dummy: leave .con\_font\_get set to NULL
commit 724ba8b30b044aa0d94b1cd374fc15806cdd6f18 upstream.
When this method is set, the caller expects struct console\_font fields
to be properly initialized when it returns. Leave it unset otherwise
nonsensical (leaked kernel stack) values are returned to user space.
Signed-off-by: Nicolas Pitre
Signed-off-by: Bartlomiej Zolnierkiewicz
Signed-off-by: Ben Hutchings
commit 2aa8dcc6c0fed640aac249e2edac2013b797cc1c
Author: Eric W. Biederman
Date: Tue Aug 1 05:02:38 2017 -0500
mn10300/misalignment: Use SIGSEGV SEGV\_MAPERR to report a failed user copy
commit 6ac1dc736b323011a55ecd1fc5897c24c4f77cbd upstream.
Setting si\_code to 0 is the same a setting si\_code to SI\_USER which is definitely
not correct. With si\_code set to SI\_USER si\_pid and si\_uid will be copied to
userspace instead of si\_addr. Which is very wrong.
So fix this by using a sensible si\_code (SEGV\_MAPERR) for this failure.
Fixes: b920de1b77b7 ("mn10300: add the MN10300/AM33 architecture to the kernel")
Cc: David Howells
Cc: Masakazu Urade
Cc: Koichi Yasutake
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Ben Hutchings
commit 883f8db70b4f46532327aa08089f894193d3ed42
Author: Eric W. Biederman
Date: Tue Aug 1 04:16:47 2017 -0500
signal/openrisc: Fix do\_unaligned\_access to send the proper signal
commit 500d58300571b6602341b041f97c082a461ef994 upstream.
While reviewing the signal sending on openrisc the do\_unaligned\_access
function stood out because it is obviously wrong. A comment about an
si\_code set above when actually si\_code is never set. Leading to a
random si\_code being sent to userspace in the event of an unaligned
access.
Looking further SIGBUS BUS\_ADRALN is the proper pair of signal and
si\_code to send for an unaligned access. That is what other
architectures do and what is required by posix.
Given that do\_unaligned\_access is broken in a way that no one can be
relying on it on openrisc fix the code to just do the right thing.
Fixes: 769a8a96229e ("OpenRISC: Traps")
Cc: Jonas Bonn
Cc: Stefan Kristiansson
Cc: Stafford Horne
Cc: Arnd Bergmann
Cc: openrisc@lists.librecores.org
Acked-by: Stafford Horne
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Ben Hutchings
commit ab14cc411c8ce8d07e266b0f2ac626f7e35f7f83
Author: Eric Biggers
Date: Wed Jan 3 11:16:27 2018 -0800
crypto: hash - prevent using keyed hashes without setting key
commit 9fa68f620041be04720d0cbfb1bd3ddfc6310b24 upstream.
Currently, almost none of the keyed hash algorithms check whether a key
has been set before proceeding. Some algorithms are okay with this and
will effectively just use a key of all 0's or some other bogus default.
However, others will severely break, as demonstrated using
"hmac(sha3-512-generic)", the unkeyed use of which causes a kernel crash
via a (potentially exploitable) stack buffer overflow.
A while ago, this problem was solved for AF\_ALG by pairing each hash
transform with a 'has\_key' bool. However, there are still other places
in the kernel where userspace can specify an arbitrary hash algorithm by
name, and the kernel uses it as unkeyed hash without checking whether it
is really unkeyed. Examples of this include:
- KEYCTL\_DH\_COMPUTE, via the KDF extension
- dm-verity
- dm-crypt, via the ESSIV support
- dm-integrity, via the "internal hash" mode with no key given
- drbd (Distributed Replicated Block Device)
This bug is especially bad for KEYCTL\_DH\_COMPUTE as that requires no
privileges to call.
Fix the bug for all users by adding a flag CRYPTO\_TFM\_NEED\_KEY to the
->crt\_flags of each hash transform that indicates whether the transform
still needs to be keyed or not. Then, make the hash init, import, and
digest functions return -ENOKEY if the key is still needed.
The new flag also replaces the 'has\_key' bool which algif\_hash was
previously using, thereby simplifying the algif\_hash implementation.
Reported-by: syzbot
Signed-off-by: Eric Biggers
Signed-off-by: Herbert Xu
[bwh: Backported to 3.2:
- In hash\_accept\_parent\_nokey(), update initialisation of ds to use tfm
- Adjust context]
Signed-off-by: Ben Hutchings
commit 498a9c71955dcbac7636d0c1f33ab56852262c33
Author: Eric Biggers
Date: Wed Jan 3 11:16:26 2018 -0800
crypto: hash - annotate algorithms taking optional key
commit a208fa8f33031b9e0aba44c7d1b7e68eb0cbd29e upstream.
We need to consistently enforce that keyed hashes cannot be used without
setting the key. To do this we need a reliable way to determine whether
a given hash algorithm is keyed or not. AF\_ALG currently does this by
checking for the presence of a ->setkey() method. However, this is
actually slightly broken because the CRC-32 algorithms implement
->setkey() but can also be used without a key. (The CRC-32 "key" is not
actually a cryptographic key but rather represents the initial state.
If not overridden, then a default initial state is used.)
Prepare to fix this by introducing a flag CRYPTO\_ALG\_OPTIONAL\_KEY which
indicates that the algorithm has a ->setkey() method, but it is not
required to be called. Then set it on all the CRC-32 algorithms.
The same also applies to the Adler-32 implementation in Lustre.
Also, the cryptd and mcryptd templates have to pass through the flag
from their underlying algorithm.
Signed-off-by: Eric Biggers
Signed-off-by: Herbert Xu
[bwh: Backported to 3.2:
- Drop changes to nonexistent drivers
- There's no CRYPTO\_ALG\_INTERNAL flag
- Adjust filenames]
Signed-off-by: Ben Hutchings
commit 3df19924e1c70be72da9124995a336ec936cd90d
Author: Eric Biggers
Date: Wed Jan 3 11:16:23 2018 -0800
crypto: cryptd - pass through absence of ->setkey()
commit 841a3ff329713f796a63356fef6e2f72e4a3f6a3 upstream.
When the cryptd template is used to wrap an unkeyed hash algorithm,
don't install a ->setkey() method to the cryptd instance. This change
is necessary for cryptd to keep working with unkeyed hash algorithms
once we start enforcing that ->setkey() is called when present.
Signed-off-by: Eric Biggers
Signed-off-by: Herbert Xu
Signed-off-by: Ben Hutchings
commit 74ea91baca141381b1960721832ff21392f770c4
Author: Eric Biggers
Date: Wed Jan 3 11:16:22 2018 -0800
crypto: hash - introduce crypto\_hash\_alg\_has\_setkey()
commit cd6ed77ad5d223dc6299fb58f62e0f5267f7e2ba upstream.
Templates that use an shash spawn can use crypto\_shash\_alg\_has\_setkey()
to determine whether the underlying algorithm requires a key or not.
But there was no corresponding function for ahash spawns. Add it.
Note that the new function actually has to support both shash and ahash
algorithms, since the ahash API can be used with either.
Signed-off-by: Eric Biggers
Signed-off-by: Herbert Xu
Signed-off-by: Ben Hutchings
commit efe80592cd0d721b786e6b6c2b3de25bdd5f6bdf
Author: Stephan Mueller
Date: Tue Jan 2 08:55:25 2018 +0100
crypto: af\_alg - whitelist mask and type
commit bb30b8848c85e18ca7e371d0a869e94b3e383bdf upstream.
The user space interface allows specifying the type and mask field used
to allocate the cipher. Only a subset of the possible flags are intended
for user space. Therefore, white-list the allowed flags.
In case the user space caller uses at least one non-allowed flag, EINVAL
is returned.
Reported-by: syzbot
Signed-off-by: Stephan Mueller
Signed-off-by: Herbert Xu
[bwh: Backported to 3.2: The CRYPTO\_ALG\_KERN\_DRIVER\_ONLY flag is not supported,
so set allowed to 0]
Signed-off-by: Ben Hutchings
commit 9bbce9986d0e62506891392d6c62171f5515a96d
Author: Ernesto A. Fernández
Date: Thu Jan 11 13:43:33 2018 -0500
ext4: correct documentation for grpid mount option
commit 9f0372488cc9243018a812e8cfbf27de650b187b upstream.
The grpid option is currently described as being the same as nogrpid.
Signed-off-by: Ernesto A. Fernández
Signed-off-by: Theodore Ts'o
Signed-off-by: Ben Hutchings
commit c98b8a3d91dfdefd23e4e804ce96051b1945c7f4
Author: Zhouyi Zhou
Date: Wed Jan 10 00:34:19 2018 -0500
ext4: save error to disk in \_\_ext4\_grp\_locked\_error()
commit 06f29cc81f0350261f59643a505010531130eea0 upstream.
In the function \_\_ext4\_grp\_locked\_error(), \_\_save\_error\_info()
is called to save error info in super block block, but does not sync
that information to disk to info the subsequence fsck after reboot.
This patch writes the error information to disk. After this patch,
I think there is no obvious EXT4 error handle branches which leads to
"Remounting filesystem read-only" will leave the disk partition miss
the subsequence fsck.
Signed-off-by: Zhouyi Zhou
Signed-off-by: Theodore Ts'o
Signed-off-by: Ben Hutchings
commit 1de5a50baa2740e190e650bf6a394af377c4d5da
Author: Colin Ian King
Date: Fri Jan 5 15:31:06 2018 +0000
scsi: aacraid: remove redundant setting of variable c
commit 91814744646351a470f256fbcb853fb5a7229a9f upstream.
A previous commit no longer stores the contents of c, so we now have a
situation where c is being updated but the value is never read. Clean up
the code by removing the now redundant setting of variable c.
Cleans up clang warning:
drivers/scsi/aacraid/aachba.c:943:3: warning: Value stored to 'c' is
never read
Fixes: f4e8708d3104 ("scsi: aacraid: Fix udev inquiry race condition")
Signed-off-by: Colin Ian King
Reviewed-by: Raghava Aditya Renukunta
Signed-off-by: Martin K. Petersen
Signed-off-by: Ben Hutchings
commit fd111d301264cacadc7501455ed86d590a28b9ec
Author: Jason Yan
Date: Thu Jan 4 21:04:32 2018 +0800
scsi: libsas: fix error when getting phy events
commit 2b23d9509fd7174b362482cf5f3b5f9a2265bc33 upstream.
The intend purpose here was to goto out if smp\_execute\_task() returned
error. Obviously something got screwed up. We will never get these link
error statistics below:
~:/sys/class/sas\_phy/phy-1:0:12 # cat invalid\_dword\_count
0
~:/sys/class/sas\_phy/phy-1:0:12 # cat running\_disparity\_error\_count
0
~:/sys/class/sas\_phy/phy-1:0:12 # cat loss\_of\_dword\_sync\_count
0
~:/sys/class/sas\_phy/phy-1:0:12 # cat phy\_reset\_problem\_count
0
Obviously we should goto error handler if smp\_execute\_task() returns
non-zero.
Fixes: 2908d778ab3e ("[SCSI] aic94xx: new driver")
Signed-off-by: Jason Yan
CC: John Garry
CC: chenqilin
CC: chenxiang
Reviewed-by: Hannes Reinecke
Reviewed-by: Christoph Hellwig
Signed-off-by: Martin K. Petersen
Signed-off-by: Ben Hutchings
commit 4006b7ab6791973ec6f0718df1b17caec51dd642
Author: Eric W. Biederman
Date: Mon Jul 24 17:30:30 2017 -0500
signal/sh: Ensure si\_signo is initialized in do\_divide\_error
commit 0e88bb002a9b2ee8cc3cc9478ce2dc126f849696 upstream.
Set si\_signo.
Cc: Yoshinori Sato
Cc: Rich Felker
Cc: Paul Mundt
Cc: linux-sh@vger.kernel.org
Fixes: 0983b31849bb ("sh: Wire up division and address error exceptions on SH-2A.")
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Ben Hutchings
commit 5a11b245f1e663d70a361599c767f1edc4f3e35c
Author: Bart Van Assche
Date: Tue Jan 2 11:39:47 2018 -0800
pktcdvd: Fix pkt\_setup\_dev() error path
commit 5a0ec388ef0f6e33841aeb810d7fa23f049ec4cd upstream.
Commit 523e1d399ce0 ("block: make gendisk hold a reference to its queue")
modified add\_disk() and disk\_release() but did not update any of the
error paths that trigger a put\_disk() call after disk->queue has been
assigned. That introduced the following behavior in the pktcdvd driver
if pkt\_new\_dev() fails:
Kernel BUG at 00000000e98fd882 [verbose debug info unavailable]
Since disk\_release() calls blk\_put\_queue() anyway if disk->queue != NULL,
fix this by removing the blk\_cleanup\_queue() call from the pkt\_setup\_dev()
error path.
Fixes: commit 523e1d399ce0 ("block: make gendisk hold a reference to its queue")
Signed-off-by: Bart Van Assche
Cc: Tejun Heo
Cc: Maciej S. Szmigiero
Signed-off-by: Jens Axboe
Signed-off-by: Ben Hutchings
commit fd8893ddc97b50cf1f067a4b8248a236aae28dc7
Author: Raghava Aditya Renukunta
Date: Tue Dec 26 20:34:22 2017 -0800
scsi: aacraid: Fix udev inquiry race condition
commit f4e8708d3104437fd7716e957f38c265b0c509ef upstream.
When udev requests for a devices inquiry string, it might create multiple
threads causing a race condition on the shared inquiry resource string.
Created a buffer with the string for each thread.
Fixes: 3bc8070fb75b3315 ([SCSI] aacraid: SMC vendor identification)
Signed-off-by: Raghava Aditya Renukunta
Signed-off-by: Martin K. Petersen
[bwh: Backported to 3.2:
- s/sup\_adap\_info->adapter\_type\_text/dev->supplement\_adapter\_info.AdapterTypeText/
- Adjust context]
Signed-off-by: Ben Hutchings
commit 5a6bf28ca66543e1c024382a779fc57f3dc04a88
Author: Hangbin Liu
Date: Fri Dec 22 15:10:17 2017 +0100
l2tp: fix missing print session offset info
commit 820da5357572715c6235ba3b3daa2d5b43a1198f upstream.
Report offset parameter in L2TP\_CMD\_SESSION\_GET command if
it has been configured by userspace
Fixes: 309795f4bec ("l2tp: Add netlink control API for L2TP")
Reported-by: Jianlin Shi
Signed-off-by: Hangbin Liu
Signed-off-by: Lorenzo Bianconi
Signed-off-by: David S. Miller
[bwh: Backported to 3.2:
- Use NLA\_PUT\_U16, consistent with the rest of the function
- Adjust context]
Signed-off-by: Ben Hutchings
commit 5d3ecc8aa8eb3dc677d5214464a0b01e7b5e1d26
Author: Dan Carpenter
Date: Tue Dec 5 17:35:08 2017 +0300
ath9k\_htc: Add a sanity check in ath9k\_htc\_ampdu\_action()
commit 413fd2f5c0233d3cde391679b967c1f14cd2cb27 upstream.
Smatch generates a warning here:
drivers/net/wireless/ath/ath9k/htc\_drv\_main.c:1688 ath9k\_htc\_ampdu\_action()
error: buffer overflow 'ista->tid\_state' 8 <= 15
I don't know if it's a real bug or not but the other paths through this
function all ensure that "tid" is less than ATH9K\_HTC\_MAX\_TID (8) so
checking here makes things more consistent.
Fixes: fb9987d0f748 ("ath9k\_htc: Support for AR9271 chipset.")
Signed-off-by: Dan Carpenter
Signed-off-by: Kalle Valo
Signed-off-by: Ben Hutchings
commit 07599cf068b05c2e9b9a24036b43e19ff8337985
Author: Christophe JAILLET
Date: Thu Sep 21 19:23:56 2017 -0400
media: bt8xx: Fix err 'bt878\_probe()'
commit 45392ff6881dbe56d41ef0b17c2e576065f8ffa1 upstream.
This is odd to call 'pci\_disable\_device()' in an error path before a
coresponding successful 'pci\_enable\_device()'.
Return directly instead.
Fixes: 77e0be12100a ("V4L/DVB (4176): Bug-fix: Fix memory overflow")
Signed-off-by: Christophe JAILLET
Signed-off-by: Mauro Carvalho Chehab
[bwh: Backported to 3.2: adjust filename]
Signed-off-by: Ben Hutchings
commit c2ddb5852a591e11abac56114485c04411e8386b
Author: Jia-Ju Bai
Date: Wed Dec 13 20:34:36 2017 +0800
USB: serial: io\_edgeport: fix possible sleep-in-atomic
commit c7b8f77872c73f69a16528a9eb87afefcccdc18b upstream.
According to drivers/usb/serial/io\_edgeport.c, the driver may sleep
under a spinlock.
The function call path is:
edge\_bulk\_in\_callback (acquire the spinlock)
process\_rcvd\_data
process\_rcvd\_status
change\_port\_settings
send\_iosp\_ext\_cmd
write\_cmd\_usb
usb\_kill\_urb --> may sleep
To fix it, the redundant usb\_kill\_urb() is removed from the error path
after usb\_submit\_urb() fails.
This possible bug is found by my static analysis tool (DSAC) and checked
by my code review.
Signed-off-by: Jia-Ju Bai
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Johan Hovold
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 948e5ebd9b6bcec50930e39589fec706ccf745b3
Author: Dan Carpenter
Date: Sat Dec 9 14:52:28 2017 +0300
ASoC: nuc900: Fix a loop timeout test
commit 65a12b3aafed5fc59f4ce41b22b752b1729e6701 upstream.
We should be finishing the loop with timeout set to zero but because
this is a post-op we finish with timeout == -1.
Fixes: 1082e2703a2d ("ASoC: NUC900/audio: add nuc900 audio driver support")
Signed-off-by: Dan Carpenter
Signed-off-by: Mark Brown
Signed-off-by: Ben Hutchings
commit bb4efe4689dfdf4802bd1fd956123b2d98cc90ee
Author: Marc Kleine-Budde
Date: Fri Dec 8 12:18:59 2017 +0100
slip: sl\_alloc(): remove unused parameter "dev\_t line"
commit 936e5d8bdfa72577e28ea671d9e2ee4fef0d6b3e upstream.
The first and only parameter of sl\_alloc() is unused, so remove it.
Fixes: 5342b77c4123 slip: ("Clean up create and destroy")
Signed-off-by: Marc Kleine-Budde
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 8a95224d7ef3818fb367acc4a6cbdfb30229a8a7
Author: Dan Carpenter
Date: Thu Nov 9 16:28:14 2017 -0500
media: cpia2: Fix a couple off by one bugs
commit d5ac225c7d64c9c3ef821239edc035634e594ec9 upstream.
The cam->buffers[] array has cam->num\_frames elements so the > needs to
be changed to >= to avoid going beyond the end of the array. The
->buffers[] array is allocated in cpia2\_allocate\_buffers() if you want
to confirm.
Fixes: ab33d5071de7 ("V4L/DVB (3376): Add cpia2 camera support")
Signed-off-by: Dan Carpenter
Signed-off-by: Hans Verkuil
Signed-off-by: Mauro Carvalho Chehab
[bwh: Backported to 3.2: adjust filename]
Signed-off-by: Ben Hutchings
commit 03e58a520044e3ea80a3ea43586f956e2e86c74d
Author: Linus Torvalds
Date: Mon Mar 26 15:39:07 2018 -1000
perf/hwbp: Simplify the perf-hwbp code, fix documentation
commit f67b15037a7a50c57f72e69a6d59941ad90a0f0f upstream.
Annoyingly, modify\_user\_hw\_breakpoint() unnecessarily complicates the
modification of a breakpoint - simplify it and remove the pointless
local variables.
Also update the stale Docbook while at it.
Signed-off-by: Linus Torvalds
Acked-by: Thomas Gleixner
Cc: Alexander Shishkin
Cc: Andy Lutomirski
Cc: Arnaldo Carvalho de Melo
Cc: Frederic Weisbecker
Cc: Jiri Olsa
Cc: Peter Zijlstra
Cc: Stephane Eranian
Cc: Vince Weaver
Signed-off-by: Ingo Molnar
Signed-off-by: Ben Hutchings
commit 0a484bd5d67e0fc458945eeece251be35756a815
Author: K.Prasad
Date: Thu Aug 2 13:46:35 2012 +0530
perf/hwpb: Invoke \_\_perf\_event\_disable() if interrupts are already disabled
commit 500ad2d8b01390c98bc6dce068bccfa9534b8212 upstream.
While debugging a warning message on PowerPC while using hardware
breakpoints, it was discovered that when perf\_event\_disable is invoked
through hw\_breakpoint\_handler function with interrupts disabled, a
subsequent IPI in the code path would trigger a WARN\_ON\_ONCE message in
smp\_call\_function\_single function.
This patch calls \_\_perf\_event\_disable() when interrupts are already
disabled, instead of perf\_event\_disable().
Reported-by: Edjunior Barbosa Machado
Signed-off-by: K.Prasad
[naveen.n.rao@linux.vnet.ibm.com: v3: Check to make sure we target current task]
Signed-off-by: Naveen N. Rao
Acked-by: Frederic Weisbecker
Signed-off-by: Peter Zijlstra
Link: http://lkml.kernel.org/r/20120802081635.5811.17737.stgit@localhost.localdomain
[ Fixed build error on MIPS. ]
Signed-off-by: Ingo Molnar
Signed-off-by: Ben Hutchings
commit 15bad6c8291a04692b928e9037844fde6f32a798
Author: Dan Carpenter
Date: Wed Apr 18 12:51:31 2018 +0300
cdrom: information leak in cdrom\_ioctl\_media\_changed()
commit 9de4ee40547fd315d4a0ed1dd15a2fa3559ad707 upstream.
This cast is wrong. "cdi->capacity" is an int and "arg" is an unsigned
long. The way the check is written now, if one of the high 32 bits is
set then we could read outside the info->slots[] array.
This bug is pretty old and it predates git.
Reviewed-by: Christoph Hellwig
Signed-off-by: Dan Carpenter
Signed-off-by: Jens Axboe
Signed-off-by: Ben Hutchings
commit 5a1f747c7f58e9820ebfb6b4811934a1f48bc4fe
Author: Andy Lutomirski
Date: Thu Jul 23 15:37:48 2015 -0700
x86/entry/64: Don't use IST entry for #BP stack
commit d8ba61ba58c88d5207c1ba2f7d9a2280e7d03be9 upstream.
There's nothing IST-worthy about #BP/int3. We don't allow kprobes
in the small handful of places in the kernel that run at CPL0 with
an invalid stack, and 32-bit kernels have used normal interrupt
gates for #BP forever.
Furthermore, we don't allow kprobes in places that have usergs while
in kernel mode, so "paranoid" is also unnecessary.
Signed-off-by: Andy Lutomirski
Signed-off-by: Linus Torvalds
Signed-off-by: Thomas Gleixner
[carnil: Backport to 3.16:
- Adjust finename change: arch/x86/kernel/entry\_64.S
- Context changes
]
[bwh: Rebase on top of "x86/traps: Enable DEBUG\_STACK after cpu\_init() for
TRAP\_DB/BP", and restore change in trap\_init() instead of early\_trap\_init().
Backport to 3.2:
- Use zeroentry macro in entry\_64.S
- Drop changes related to breakpoint-in-NMI support
- Adjust context]
Signed-off-by: Ben Hutchings
commit 1a2ce896855bae80c079ce45d102633546a6a87f
Author: Wang Nan
Date: Thu Feb 26 13:49:39 2015 +0800
x86/traps: Enable DEBUG\_STACK after cpu\_init() for TRAP\_DB/BP
commit b4d8327024637cb2a1f7910dcb5d0ad7a096f473 upstream.
Before this patch early\_trap\_init() installs DEBUG\_STACK for
X86\_TRAP\_BP and X86\_TRAP\_DB. However, DEBUG\_STACK doesn't work
correctly until cpu\_init() <-- trap\_init().
This patch passes 0 to set\_intr\_gate\_ist() and
set\_system\_intr\_gate\_ist() instead of DEBUG\_STACK to let it use
same stack as kernel, and installs DEBUG\_STACK for them in
trap\_init().
As core runs at ring 0 between early\_trap\_init() and
trap\_init(), there is no chance to get a bad stack before
trap\_init().
As NMI is also enabled in trap\_init(), we don't need to care
about is\_debug\_stack() and related things used in
arch/x86/kernel/nmi.c.
Signed-off-by: Wang Nan
Reviewed-by: Masami Hiramatsu
Acked-by: Steven Rostedt
Cc:
Cc:
Cc:
Cc:
Link: http://lkml.kernel.org/r/1424929779-13174-1-git-send-email-wangnan0@huawei.com
Signed-off-by: Ingo Molnar
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 38643d20b4d4ac378046e51b15556f0f7dc489ea
Author: Dan Carpenter
Date: Mon Mar 19 14:07:45 2018 +0300
staging: ncpfs: memory corruption in ncp\_read\_kernel()
commit 4c41aa24baa4ed338241d05494f2c595c885af8f upstream.
If the server is malicious then \*bytes\_read could be larger than the
size of the "target" buffer. It would lead to memory corruption when we
do the memcpy().
Reported-by: Dr Silvio Cesare of InfoSect
Signed-off-by: Dan Carpenter
Signed-off-by: Greg Kroah-Hartman
[carnil: backport to 4.9: Files renamed from drivers/staging/ncpfs/ncplib\_kernel.c
to fs/ncpfs/ncplib\_kernel.c]
Signed-off-by: Ben Hutchings
commit 65e38566ae2600cebb885af0b58dc8732e25ee52
Author: Seunghun Han
Date: Tue Mar 6 15:21:43 2018 +0100
x86/MCE: Serialize sysfs changes
commit b3b7c4795ccab5be71f080774c45bbbcc75c2aaf upstream.
The check\_interval file in
/sys/devices/system/machinecheck/machinecheck
directory is a global timer value for MCE polling. If it is changed by one
CPU, mce\_restart() broadcasts the event to other CPUs to delete and restart
the MCE polling timer and \_\_mcheck\_cpu\_init\_timer() reinitializes the
mce\_timer variable.
If more than one CPU writes a specific value to the check\_interval file
concurrently, mce\_timer is not protected from such concurrent accesses and
all kinds of explosions happen. Since only root can write to those sysfs
variables, the issue is not a big deal security-wise.
However, concurrent writes to these configuration variables is void of
reason so the proper thing to do is to serialize the access with a mutex.
Boris:
- Make store\_int\_with\_restart() use device\_store\_ulong() to filter out
negative intervals
- Limit min interval to 1 second
- Correct locking
- Massage commit message
Signed-off-by: Seunghun Han
Signed-off-by: Borislav Petkov
Signed-off-by: Thomas Gleixner
Cc: Greg Kroah-Hartman
Cc: Tony Luck
Cc: linux-edac
Link: http://lkml.kernel.org/r/20180302202706.9434-1-kkamagui@gmail.com
[bwh: Backported to 3.2:
- MCE device is a sysdev here
- Adjust context]
Signed-off-by: Ben Hutchings
commit 2a690a408dee7a9d51b17dfe93b116bd7ab6177a
Author: Jason Yan
Date: Thu Jan 4 21:04:31 2018 +0800
scsi: libsas: fix memory leak in sas\_smp\_get\_phy\_events()
commit 4a491b1ab11ca0556d2fda1ff1301e862a2d44c4 upstream.
We've got a memory leak with the following producer:
while true;
do cat /sys/class/sas\_phy/phy-1:0:12/invalid\_dword\_count >/dev/null;
done
The buffer req is allocated and not freed after we return. Fix it.
Fixes: 2908d778ab3e ("[SCSI] aic94xx: new driver")
Signed-off-by: Jason Yan
CC: John Garry
CC: chenqilin
CC: chenxiang
Reviewed-by: Christoph Hellwig
Reviewed-by: Hannes Reinecke
Signed-off-by: Martin K. Petersen
Signed-off-by: Ben Hutchings
commit 131802b8292d35e8a407469c485565b199ed79cf
Author: Mike Kravetz
Date: Thu Mar 22 16:17:13 2018 -0700
hugetlbfs: check for pgoff value overflow
commit 63489f8e821144000e0bdca7e65a8d1cc23a7ee7 upstream.
A vma with vm\_pgoff large enough to overflow a loff\_t type when
converted to a byte offset can be passed via the remap\_file\_pages system
call. The hugetlbfs mmap routine uses the byte offset to calculate
reservations and file size.
A sequence such as:
mmap(0x20a00000, 0x600000, 0, 0x66033, -1, 0);
remap\_file\_pages(0x20a00000, 0x600000, 0, 0x20000000000000, 0);
will result in the following when task exits/file closed,
kernel BUG at mm/hugetlb.c:749!
Call Trace:
hugetlbfs\_evict\_inode+0x2f/0x40
evict+0xcb/0x190
\_\_dentry\_kill+0xcb/0x150
\_\_fput+0x164/0x1e0
task\_work\_run+0x84/0xa0
exit\_to\_usermode\_loop+0x7d/0x80
do\_syscall\_64+0x18b/0x190
entry\_SYSCALL\_64\_after\_hwframe+0x3d/0xa2
The overflowed pgoff value causes hugetlbfs to try to set up a mapping
with a negative range (end < start) that leaves invalid state which
causes the BUG.
The previous overflow fix to this code was incomplete and did not take
the remap\_file\_pages system call into account.
[mike.kravetz@oracle.com: v3]
Link: http://lkml.kernel.org/r/20180309002726.7248-1-mike.kravetz@oracle.com
[akpm@linux-foundation.org: include mmdebug.h]
[akpm@linux-foundation.org: fix -ve left shift count on sh]
Link: http://lkml.kernel.org/r/20180308210502.15952-1-mike.kravetz@oracle.com
Fixes: 045c7a3f53d9 ("hugetlbfs: fix offset overflow in hugetlbfs mmap")
Signed-off-by: Mike Kravetz
Reported-by: Nic Losby
Acked-by: Michal Hocko
Cc: "Kirill A . Shutemov"
Cc: Yisheng Xie
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2:
- Use a conditional WARN() instead of VM\_WARN()
- Adjust context]
Signed-off-by: Ben Hutchings
commit 4cba2554682469496ff48536d50c399110d20043
Author: Mike Kravetz
Date: Thu Apr 13 14:56:32 2017 -0700
hugetlbfs: fix offset overflow in hugetlbfs mmap
commit 045c7a3f53d9403b62d396b6d051c4be5044cdb4 upstream.
If mmap() maps a file, it can be passed an offset into the file at which
the mapping is to start. Offset could be a negative value when
represented as a loff\_t. The offset plus length will be used to update
the file size (i\_size) which is also a loff\_t.
Validate the value of offset and offset + length to make sure they do
not overflow and appear as negative.
Found by syzcaller with commit ff8c0c53c475 ("mm/hugetlb.c: don't call
region\_abort if region\_chg fails") applied. Prior to this commit, the
overflow would still occur but we would luckily return ENOMEM.
To reproduce:
mmap(0, 0x2000, 0, 0x40021, 0xffffffffffffffffULL, 0x8000000000000000ULL);
Resulted in,
kernel BUG at mm/hugetlb.c:742!
Call Trace:
hugetlbfs\_evict\_inode+0x80/0xa0
evict+0x24a/0x620
iput+0x48f/0x8c0
dentry\_unlink\_inode+0x31f/0x4d0
\_\_dentry\_kill+0x292/0x5e0
dput+0x730/0x830
\_\_fput+0x438/0x720
\_\_\_\_fput+0x1a/0x20
task\_work\_run+0xfe/0x180
exit\_to\_usermode\_loop+0x133/0x150
syscall\_return\_slowpath+0x184/0x1c0
entry\_SYSCALL\_64\_fastpath+0xab/0xad
Fixes: ff8c0c53c475 ("mm/hugetlb.c: don't call region\_abort if region\_chg fails")
Link: http://lkml.kernel.org/r/1491951118-30678-1-git-send-email-mike.kravetz@oracle.com
Reported-by: Vegard Nossum
Signed-off-by: Mike Kravetz
Acked-by: Hillf Danton
Cc: Dmitry Vyukov
Cc: Michal Hocko
Cc: "Kirill A . Shutemov"
Cc: Andrey Ryabinin
Cc: Naoya Horiguchi
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 1a63d970eecf933973eae20b069f3755a7824b24
Author: Takashi Iwai
Date: Mon Mar 5 22:06:09 2018 +0100
ALSA: seq: More protection for concurrent write and ioctl races
commit 7bd80091567789f1c0cb70eb4737aac8bcd2b6b9 upstream.
This patch is an attempt for further hardening against races between
the concurrent write and ioctls. The previous fix d15d662e89fc
("ALSA: seq: Fix racy pool initializations") covered the race of the
pool initialization at writer and the pool resize ioctl by the
client->ioctl\_mutex (CVE-2018-1000004). However, basically this mutex
should be applied more widely to the whole write operation for
avoiding the unexpected pool operations by another thread.
The only change outside snd\_seq\_write() is the additional mutex
argument to helper functions, so that we can unlock / relock the given
mutex temporarily during schedule() call for blocking write.
Fixes: d15d662e89fc ("ALSA: seq: Fix racy pool initializations")
Reported-by: 范龙飞
Reported-by: Nicolai Stange
Reviewed-and-tested-by: Nicolai Stange
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit d89ffc7140e70fd8429f7147c552bdf22750a717
Author: Adam Goode
Date: Wed Jun 4 01:02:51 2014 -0400
ALSA: seq: correctly detect input buffer overflow
commit 21fd3e956ee8a307a06bc6e095f5767a00eb2a7e upstream.
snd\_seq\_event\_dup returns -ENOMEM in some buffer-full conditions,
but usually returns -EAGAIN. Make -EAGAIN trigger the overflow
condition in snd\_seq\_fifo\_event\_in so that the fifo is cleared
and -ENOSPC is returned to userspace as stated in the alsa-lib docs.
Signed-off-by: Adam Goode
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit c96a7302975ce043f565c9ce2359794e1397488c
Author: Takashi Iwai
Date: Mon Mar 5 22:00:55 2018 +0100
ALSA: seq: Don't allow resizing pool in use
commit d85739367c6d56e475c281945c68fdb05ca74b4c upstream.
This is a fix for a (sort of) fallout in the recent commit
d15d662e89fc ("ALSA: seq: Fix racy pool initializations") for
CVE-2018-1000004.
As the pool resize deletes the existing cells, it may lead to a race
when another thread is writing concurrently, eventually resulting a
UAF.
A simple workaround is not to allow the pool resizing when the pool is
in use. It's an invalid behavior in anyway.
Fixes: d15d662e89fc ("ALSA: seq: Fix racy pool initializations")
Reported-by: 范龙飞
Reported-by: Nicolai Stange
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit b5c3d49b3d5889f334d519d7a4535a3bd8632d47
Author: Takashi Iwai
Date: Mon Feb 12 15:20:51 2018 +0100
ALSA: seq: Fix racy pool initializations
commit d15d662e89fc667b90cd294b0eb45694e33144da upstream.
ALSA sequencer core initializes the event pool on demand by invoking
snd\_seq\_pool\_init() when the first write happens and the pool is
empty. Meanwhile user can reset the pool size manually via ioctl
concurrently, and this may lead to UAF or out-of-bound accesses since
the function tries to vmalloc / vfree the buffer.
A simple fix is to just wrap the snd\_seq\_pool\_init() call with the
recently introduced client->ioctl\_mutex; as the calls for
snd\_seq\_pool\_init() from other side are always protected with this
mutex, we can avoid the race.
Reported-by: 范龙飞
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit e553bcf09a6390e7f52e47132b27b4574d0ad71a
Author: Peter Malone
Date: Wed Mar 7 14:00:34 2018 +0100
fbdev: Fixing arbitrary kernel leak in case FBIOGETCMAP\_SPARC in sbusfb\_ioctl\_helper().
commit 250c6c49e3b68756b14983c076183568636e2bde upstream.
Fixing arbitrary kernel leak in case FBIOGETCMAP\_SPARC in
sbusfb\_ioctl\_helper().
'index' is defined as an int in sbusfb\_ioctl\_helper().
We retrieve this from the user:
if (get\_user(index, &c->index) ||
\_\_get\_user(count, &c->count) ||
\_\_get\_user(ured, &c->red) ||
\_\_get\_user(ugreen, &c->green) ||
\_\_get\_user(ublue, &c->blue))
return -EFAULT;
and then we use 'index' in the following way:
red = cmap->red[index + i] >> 8;
green = cmap->green[index + i] >> 8;
blue = cmap->blue[index + i] >> 8;
This is a classic information leak vulnerability. 'index' should be
an unsigned int, given its usage above.
This patch is straight-forward; it changes 'index' to unsigned int
in two switch-cases: FBIOGETCMAP\_SPARC && FBIOPUTCMAP\_SPARC.
This patch fixes CVE-2018-6412.
Signed-off-by: Peter Malone
Acked-by: Mathieu Malaterre
Signed-off-by: Bartlomiej Zolnierkiewicz
[bwh: Backported to 3.2: adjust filename]
Signed-off-by: Ben Hutchings
commit 61079d7091f4a673a337b5d63e7e7e38ac405d37
Author: Alexey Kodanev
Date: Fri Feb 9 17:35:23 2018 +0300
sctp: verify size of a new chunk in \_sctp\_make\_chunk()
commit 07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c upstream.
When SCTP makes INIT or INIT\_ACK packet the total chunk length
can exceed SCTP\_MAX\_CHUNK\_LEN which leads to kernel panic when
transmitting these packets, e.g. the crash on sending INIT\_ACK:
[ 597.804948] skbuff: skb\_over\_panic: text:00000000ffae06e4 len:120168
put:120156 head:000000007aa47635 data:00000000d991c2de
tail:0x1d640 end:0xfec0 dev:
...
[ 597.976970] ------------[ cut here ]------------
[ 598.033408] kernel BUG at net/core/skbuff.c:104!
[ 600.314841] Call Trace:
[ 600.345829]
[ 600.371639] ? sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.436934] skb\_put+0x16c/0x200
[ 600.477295] sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.540630] ? sctp\_packet\_config+0x890/0x890 [sctp]
[ 600.601781] ? \_\_sctp\_packet\_append\_chunk+0x3b4/0xd00 [sctp]
[ 600.671356] ? sctp\_cmp\_addr\_exact+0x3f/0x90 [sctp]
[ 600.731482] sctp\_outq\_flush+0x663/0x30d0 [sctp]
[ 600.788565] ? sctp\_make\_init+0xbf0/0xbf0 [sctp]
[ 600.845555] ? sctp\_check\_transmitted+0x18f0/0x18f0 [sctp]
[ 600.912945] ? sctp\_outq\_tail+0x631/0x9d0 [sctp]
[ 600.969936] sctp\_cmd\_interpreter.isra.22+0x3be1/0x5cb0 [sctp]
[ 601.041593] ? sctp\_sf\_do\_5\_1B\_init+0x85f/0xc30 [sctp]
[ 601.104837] ? sctp\_generate\_t1\_cookie\_event+0x20/0x20 [sctp]
[ 601.175436] ? sctp\_eat\_data+0x1710/0x1710 [sctp]
[ 601.233575] sctp\_do\_sm+0x182/0x560 [sctp]
[ 601.284328] ? sctp\_has\_association+0x70/0x70 [sctp]
[ 601.345586] ? sctp\_rcv+0xef4/0x32f0 [sctp]
[ 601.397478] ? sctp6\_rcv+0xa/0x20 [sctp]
...
Here the chunk size for INIT\_ACK packet becomes too big, mostly
because of the state cookie (INIT packet has large size with
many address parameters), plus additional server parameters.
Later this chunk causes the panic in skb\_put\_data():
skb\_packet\_transmit()
sctp\_packet\_pack()
skb\_put\_data(nskb, chunk->skb->data, chunk->skb->len);
'nskb' (head skb) was previously allocated with packet->size
from u16 'chunk->chunk\_hdr->length'.
As suggested by Marcelo we should check the chunk's length in
\_sctp\_make\_chunk() before trying to allocate skb for it and
discard a chunk if its size bigger than SCTP\_MAX\_CHUNK\_LEN.
Signed-off-by: Alexey Kodanev
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
[bwh: Backported to 3.2:
- Keep using WORD\_ROUND() instead of SCTP\_PAD4()
- Adjust context]
Signed-off-by: Ben Hutchings
commit 109503b8cccb3b803d875b88d21d49eab921969e
Author: Alexey Kodanev
Date: Tue Mar 6 22:57:01 2018 +0300
dccp: check sk for closed state in dccp\_sendmsg()
commit 67f93df79aeefc3add4e4b31a752600f834236e2 upstream.
dccp\_disconnect() sets 'dp->dccps\_hc\_tx\_ccid' tx handler to NULL,
therefore if DCCP socket is disconnected and dccp\_sendmsg() is
called after it, it will cause a NULL pointer dereference in
dccp\_write\_xmit().
This crash and the reproducer was reported by syzbot. Looks like
it is reproduced if commit 69c64866ce07 ("dccp: CVE-2017-8824:
use-after-free in DCCP code") is applied.
Reported-by: syzbot+f99ab3887ab65d70f816@syzkaller.appspotmail.com
Signed-off-by: Alexey Kodanev
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 02a37ffd681be59775c9f13686e20621f7097f7e
Author: Lukas Czerner
Date: Tue Apr 24 11:31:44 2018 -0400
ext4: fix bitmap position validation
commit 22be37acce25d66ecf6403fc8f44df9c5ded2372 upstream.
Currently in ext4\_valid\_block\_bitmap() we expect the bitmap to be
positioned anywhere between 0 and s\_blocksize clusters, but that's
wrong because the bitmap can be placed anywhere in the block group. This
causes false positives when validating bitmaps on perfectly valid file
system layouts. Fix it by checking whether the bitmap is within the group
boundary.
The problem can be reproduced using the following
mkfs -t ext3 -E stride=256 /dev/vdb1
mount /dev/vdb1 /mnt/test
cd /mnt/test
wget https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-4.16.3.tar.xz
tar xf linux-4.16.3.tar.xz
This will result in the warnings in the logs
EXT4-fs error (device vdb1): ext4\_validate\_block\_bitmap:399: comm tar: bg 84: block 2774529: invalid block bitmap
[ Changed slightly for clarity and to not drop a overflow test -- TYT ]
Signed-off-by: Lukas Czerner
Signed-off-by: Theodore Ts'o
Reported-by: Ilya Dryomov
Fixes: 7dac4a1726a9 ("ext4: add validity checks for bitmap block numbers")
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit f278235ce148485cdb9dc990673943addafbd577
Author: Theodore Ts'o
Date: Mon Mar 26 23:54:10 2018 -0400
ext4: add validity checks for bitmap block numbers
commit 7dac4a1726a9c64a517d595c40e95e2d0d135f6f upstream.
An privileged attacker can cause a crash by mounting a crafted ext4
image which triggers a out-of-bounds read in the function
ext4\_valid\_block\_bitmap() in fs/ext4/balloc.c.
This issue has been assigned CVE-2018-1093.
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=199181
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1560782
Reported-by: Wen Xu
Signed-off-by: Theodore Ts'o
[bwh: Backported to 3.2:
- In ext4\_valid\_block\_bitmap(), goto err\_out on error
- In ext4\_read\_{block,inode}\_bitmap(), return NULL on error
- Adjust context]
Signed-off-by: Ben Hutchings
commit eea55da54d3e425d6a5f3cfeb3f26adbb0330354
Author: Darrick J. Wong
Date: Mon May 12 10:17:55 2014 -0400
ext4: fix block bitmap validation when bigalloc, ^flex\_bg
commit e674e5cbd0942b42a12106ac0be8330f4301bef4 upstream.
On a bigalloc,^flex\_bg filesystem, the ext4\_valid\_block\_bitmap
function fails to convert from blocks to clusters when spot-checking
the validity of the bitmap block that we've just read from disk. This
causes ext4 to think that the bitmap is garbage, which results in the
block group being taken offline when it's not necessary. Add in the
necessary EXT4\_B2C() calls to perform the conversions.
Signed-off-by: Darrick J. Wong
Signed-off-by: "Theodore Ts'o"
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit bf7fc655f12864b4c12d902cf60ae37a708cc344
Author: Theodore Ts'o
Date: Thu Mar 29 21:56:09 2018 -0400
ext4: fail ext4\_iget for root directory if unallocated
commit 8e4b5eae5decd9dfe5a4ee369c22028f90ab4c44 upstream.
If the root directory has an i\_links\_count of zero, then when the file
system is mounted, then when ext4\_fill\_super() notices the problem and
tries to call iput() the root directory in the error return path,
ext4\_evict\_inode() will try to free the inode on disk, before all of
the file system structures are set up, and this will result in an OOPS
caused by a NULL pointer dereference.
This issue has been assigned CVE-2018-1092.
https://bugzilla.kernel.org/show\_bug.cgi?id=199179
https://bugzilla.redhat.com/show\_bug.cgi?id=1560777
Reported-by: Wen Xu
Signed-off-by: Theodore Ts'o
[bwh: Backported to 3.2:
- Use EIO instead of EFSCORRUPTED
- Adjust context]
Signed-off-by: Ben Hutchings
commit 2609aab91aded56745a33c738f63d68ecf1b1092
Author: Florian Westphal
Date: Thu Mar 8 12:54:19 2018 +0100
netfilter: ebtables: fix erroneous reject of last rule
commit 932909d9b28d27e807ff8eecb68c7748f6701628 upstream.
The last rule in the blob has next\_entry offset that is same as total size.
This made "ebtables32 -A OUTPUT -d de:ad:be:ef:01:02" fail on 64 bit kernel.
Fixes: b71812168571fa ("netfilter: ebtables: CONFIG\_COMPAT: don't trust userland offsets")
Signed-off-by: Florian Westphal
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Ben Hutchings
commit dccc6e2c9b486b99b6ec356e14f7de58832b3833
Author: Florian Westphal
Date: Mon Feb 19 01:24:15 2018 +0100
netfilter: ebtables: CONFIG\_COMPAT: don't trust userland offsets
commit b71812168571fa55e44cdd0254471331b9c4c4c6 upstream.
We need to make sure the offsets are not out of range of the
total size.
Also check that they are in ascending order.
The WARN\_ON triggered by syzkaller (it sets panic\_on\_warn) is
changed to also bail out, no point in continuing parsing.
Briefly tested with simple ruleset of
-A INPUT --limit 1/s' --log
plus jump to custom chains using 32bit ebtables binary.
Reported-by:
Signed-off-by: Florian Westphal
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Ben Hutchings
commit dfd9f20a2db71ca01033040ecf69d5c0e67db629
Author: alex chen
Date: Wed Nov 15 17:31:48 2017 -0800
ocfs2: subsystem.su\_mutex is required while accessing the item->ci\_parent
commit 853bc26a7ea39e354b9f8889ae7ad1492ffa28d2 upstream.
The subsystem.su\_mutex is required while accessing the item->ci\_parent,
otherwise, NULL pointer dereference to the item->ci\_parent will be
triggered in the following situation:
add node delete node
sys\_write
vfs\_write
configfs\_write\_file
o2nm\_node\_store
o2nm\_node\_local\_write
do\_rmdir
vfs\_rmdir
configfs\_rmdir
mutex\_lock(&subsys->su\_mutex);
unlink\_obj
item->ci\_group = NULL;
item->ci\_parent = NULL;
to\_o2nm\_cluster\_from\_node
node->nd\_item.ci\_parent->ci\_parent
BUG since of NULL pointer dereference to nd\_item.ci\_parent
Moreover, the o2nm\_cluster also should be protected by the
subsystem.su\_mutex.
[alex.chen@huawei.com: v2]
Link: http://lkml.kernel.org/r/59EEAA69.9080703@huawei.com
Link: http://lkml.kernel.org/r/59E9B36A.10700@huawei.com
Signed-off-by: Alex Chen
Reviewed-by: Jun Piao
Reviewed-by: Joseph Qi
Cc: Mark Fasheh
Cc: Joel Becker
Cc: Junxiao Bi
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 3d886ff142e713000aec6bf6f82944eb03dab28c
Author: chenjie
Date: Wed Nov 29 16:10:54 2017 -0800
mm/madvise.c: fix madvise() infinite loop under special circumstances
commit 6ea8d958a2c95a1d514015d4e29ba21a8c0a1a91 upstream.
MADVISE\_WILLNEED has always been a noop for DAX (formerly XIP) mappings.
Unfortunately madvise\_willneed() doesn't communicate this information
properly to the generic madvise syscall implementation. The calling
convention is quite subtle there. madvise\_vma() is supposed to either
return an error or update &prev otherwise the main loop will never
advance to the next vma and it will keep looping for ever without a way
to get out of the kernel.
It seems this has been broken since introduction. Nobody has noticed
because nobody seems to be using MADVISE\_WILLNEED on these DAX mappings.
[mhocko@suse.com: rewrite changelog]
Link: http://lkml.kernel.org/r/20171127115318.911-1-guoxuenan@huawei.com
Fixes: fe77ba6f4f97 ("[PATCH] xip: madvice/fadvice: execute in place")
Signed-off-by: chenjie
Signed-off-by: guoxuenan
Acked-by: Michal Hocko
Cc: Minchan Kim
Cc: zhangyi (F)
Cc: Miao Xie
Cc: Mike Rapoport
Cc: Shaohua Li
Cc: Andrea Arcangeli
Cc: Mel Gorman
Cc: Kirill A. Shutemov
Cc: David Rientjes
Cc: Anshuman Khandual
Cc: Rik van Riel
Cc: Carsten Otte
Cc: Dan Williams
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 43da4014d8fb05379f19abe26d61af608bd680fd
Author: Jason Gunthorpe
Date: Tue May 26 17:30:17 2015 -0600
sctp: Fix mangled IPv4 addresses on a IPv6 listening socket
commit 9302d7bb0c5cd46be5706859301f18c137b2439f upstream.
sctp\_v4\_map\_v6 was subtly writing and reading from members
of a union in a way the clobbered data it needed to read before
it read it.
Zeroing the v6 flowinfo overwrites the v4 sin\_addr with 0, meaning
that every place that calls sctp\_v4\_map\_v6 gets ::ffff:0.0.0.0 as the
result.
Reorder things to guarantee correct behaviour no matter what the
union layout is.
This impacts user space clients that open an IPv6 SCTP socket and
receive IPv4 connections. Prior to 299ee user space would see a
sockaddr with AF\_INET and a correct address, after 299ee the sockaddr
is AF\_INET6, but the address is wrong.
Fixes: 299ee123e198 (sctp: Fixup v4mapped behaviour to comply with Sock API)
Signed-off-by: Jason Gunthorpe
Acked-by: Daniel Borkmann
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings


=== Content from access.redhat.com_9cd99b77_20250125_175531.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2018:1854 - Security Advisory

Issued:
2018-06-19
Updated:
2018-06-19
# RHSA-2018:1854 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: kernel security and bug fix update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2018%3A1854)

## Topic

An update for kernel is now available for Red Hat Enterprise Linux 6.

Red Hat Product Security has rated this update as having a security impact of Important. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

The kernel packages contain the Linux kernel, the core of any Linux operating system.

Security Fix(es):

* An industry-wide issue was found in the way many modern microprocessor designs have implemented speculative execution of Load & Store instructions (a commonly used performance optimization). It relies on the presence of a precisely-defined instruction sequence in the privileged code as well as the fact that memory read from address to which a recent memory write has occurred may see an older value and subsequently cause an update into the microprocessor's data cache even for speculatively executed instructions that never actually commit (retire). As a result, an unprivileged attacker could use this flaw to read privileged memory by conducting targeted cache side-channel attacks. (CVE-2018-3639, PowerPC)
* kernel: net/packet: overflow in check for priv area size (CVE-2017-7308)
* kernel: AIO interface didn't use rw\_verify\_area() for checking mandatory locking on files and size of access (CVE-2012-6701)
* kernel: AIO write triggers integer overflow in some protocols (CVE-2015-8830)
* kernel: Null pointer dereference via keyctl (CVE-2016-8650)
* kernel: ping socket / AF\_LLC connect() sin\_family race (CVE-2017-2671)
* kernel: Race condition between multiple sys\_perf\_event\_open() calls (CVE-2017-6001)
* kernel: Incorrect error handling in the set\_mempolicy and mbind compat syscalls in mm/mempolicy.c (CVE-2017-7616)
* kernel: mm subsystem does not properly enforce the CONFIG\_STRICT\_DEVMEM protection mechanism (CVE-2017-7889)
* kernel: Double free in the inet\_csk\_clone\_lock function in net/ipv4/inet\_connection\_sock.c (CVE-2017-8890)
* kernel: net: sctp\_v6\_create\_accept\_sk function mishandles inheritance (CVE-2017-9075)
* kernel: net: IPv6 DCCP implementation mishandles inheritance (CVE-2017-9076)
* kernel: net: tcp\_v6\_syn\_recv\_sock function mishandles inheritance (CVE-2017-9077)
* kernel: memory leak when merging buffers in SCSI IO vectors (CVE-2017-12190)
* kernel: vfs: BUG in truncate\_inode\_pages\_range() and fuse client (CVE-2017-15121)
* kernel: Race condition in drivers/md/dm.c:dm\_get\_from\_kobject() allows local users to cause a denial of service (CVE-2017-18203)
* kernel: a null pointer dereference in net/dccp/output.c:dccp\_write\_xmit() leads to a system crash (CVE-2018-1130)
* kernel: Missing length check of payload in net/sctp/sm\_make\_chunk.c:\_sctp\_make\_chunk() function allows denial of service (CVE-2018-5803)

For more details about the security issue(s), including the impact, a CVSS score, and other related information, refer to the CVE page(s) listed in the References section.

Red Hat would like to thank Ken Johnson (Microsoft Security Response Center) and Jann Horn (Google Project Zero) for reporting CVE-2018-3639; Vitaly Mayatskih for reporting CVE-2017-12190; and Evgenii Shatokhin (Virtuozzo Team) for reporting CVE-2018-1130. The CVE-2017-15121 issue was discovered by Miklos Szeredi (Red Hat).

Additional Changes:

For detailed information on changes in this release, see the Red Hat Enterprise Linux 6.10 Release Notes and Red Hat Enterprise Linux 6.10 Technical Notes linked from the References section.

## Solution

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

The system must be rebooted for this update to take effect.

## Affected Products

* Red Hat Enterprise Linux Server 6 x86\_64
* Red Hat Enterprise Linux Server 6 i386
* Red Hat Enterprise Linux Server - Extended Life Cycle Support 6 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support 6 i386
* Red Hat Enterprise Linux Workstation 6 x86\_64
* Red Hat Enterprise Linux Workstation 6 i386
* Red Hat Enterprise Linux Desktop 6 x86\_64
* Red Hat Enterprise Linux Desktop 6 i386
* Red Hat Enterprise Linux for IBM z Systems 6 s390x
* Red Hat Enterprise Linux for Power, big endian 6 ppc64
* Red Hat Enterprise Linux for Scientific Computing 6 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support (for IBM z Systems) 6 s390x
* Red Hat Enterprise Linux Server - Extended Life Cycle Support Extension 6 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support Extension 6 i386
* Red Hat Enterprise Linux Server - Extended Life Cycle Support Extension (for IBM z Systems) 6 s390x

## Fixes

* [BZ - 869942](https://bugzilla.redhat.com/show_bug.cgi?id=869942)
  - Kernel crashes on reading an ACL containing 190 ACEs over NFSv4
* [BZ - 1314275](https://bugzilla.redhat.com/show_bug.cgi?id=1314275)
  - CVE-2015-8830 kernel: AIO write triggers integer overflow in some protocols
* [BZ - 1314288](https://bugzilla.redhat.com/show_bug.cgi?id=1314288)
  - CVE-2012-6701 kernel: AIO interface didn't use rw\_verify\_area() for checking mandatory locking on files and size of access
* [BZ - 1395187](https://bugzilla.redhat.com/show_bug.cgi?id=1395187)
  - CVE-2016-8650 kernel: Null pointer dereference via keyctl
* [BZ - 1422825](https://bugzilla.redhat.com/show_bug.cgi?id=1422825)
  - CVE-2017-6001 kernel: Race condition between multiple sys\_perf\_event\_open() calls
* [BZ - 1436649](https://bugzilla.redhat.com/show_bug.cgi?id=1436649)
  - CVE-2017-2671 kernel: ping socket / AF\_LLC connect() sin\_family race
* [BZ - 1437404](https://bugzilla.redhat.com/show_bug.cgi?id=1437404)
  - CVE-2017-7308 kernel: net/packet: overflow in check for priv area size
* [BZ - 1441088](https://bugzilla.redhat.com/show_bug.cgi?id=1441088)
  - CVE-2017-7616 kernel: Incorrect error handling in the set\_mempolicy and mbind compat syscalls in mm/mempolicy.c
* [BZ - 1444493](https://bugzilla.redhat.com/show_bug.cgi?id=1444493)
  - CVE-2017-7889 kernel: mm subsystem does not properly enforce the CONFIG\_STRICT\_DEVMEM protection mechanism
* [BZ - 1448170](https://bugzilla.redhat.com/show_bug.cgi?id=1448170)
  - RHEL6.9: sunrpc reconnect logic now may trigger a SYN storm when a TCP connection drops and a burst of RPC commands hit the transport
* [BZ - 1450972](https://bugzilla.redhat.com/show_bug.cgi?id=1450972)
  - CVE-2017-8890 kernel: Double free in the inet\_csk\_clone\_lock function in net/ipv4/inet\_connection\_sock.c
* [BZ - 1452688](https://bugzilla.redhat.com/show_bug.cgi?id=1452688)
  - CVE-2017-9076 kernel: net: IPv6 DCCP implementation mishandles inheritance
* [BZ - 1452691](https://bugzilla.redhat.com/show_bug.cgi?id=1452691)
  - CVE-2017-9075 kernel: net: sctp\_v6\_create\_accept\_sk function mishandles inheritance
* [BZ - 1452744](https://bugzilla.redhat.com/show_bug.cgi?id=1452744)
  - CVE-2017-9077 kernel: net: tcp\_v6\_syn\_recv\_sock function mishandles inheritance
* [BZ - 1495089](https://bugzilla.redhat.com/show_bug.cgi?id=1495089)
  - CVE-2017-12190 kernel: memory leak when merging buffers in SCSI IO vectors
* [BZ - 1497152](https://bugzilla.redhat.com/show_bug.cgi?id=1497152)
  - systool causes panic on 2.6.32-696.6.3.el6.x86\_64 using be2iscsi
* [BZ - 1520893](https://bugzilla.redhat.com/show_bug.cgi?id=1520893)
  - CVE-2017-15121 kernel: vfs: BUG in truncate\_inode\_pages\_range() and fuse client
* [BZ - 1550811](https://bugzilla.redhat.com/show_bug.cgi?id=1550811)
  - CVE-2017-18203 kernel: Race condition in drivers/md/dm.c:dm\_get\_from\_kobject() allows local users to cause a denial of service
* [BZ - 1551051](https://bugzilla.redhat.com/show_bug.cgi?id=1551051)
  - CVE-2018-5803 kernel: Missing length check of payload in net/sctp/sm\_make\_chunk.c:\_sctp\_make\_chunk() function allows denial of service
* [BZ - 1560494](https://bugzilla.redhat.com/show_bug.cgi?id=1560494)
  - i686: Using invpcid\_flush\_all\_nonglobals() can cause user-space panic on .i686
* [BZ - 1566890](https://bugzilla.redhat.com/show_bug.cgi?id=1566890)
  - CVE-2018-3639 hw: cpu: speculative store bypass
* [BZ - 1576419](https://bugzilla.redhat.com/show_bug.cgi?id=1576419)
  - CVE-2018-1130 kernel: a null pointer dereference in net/dccp/output.c:dccp\_write\_xmit() leads to a system crash

## CVEs

* [CVE-2012-6701](https://www.redhat.com/security/data/cve/CVE-2012-6701.html)
* [CVE-2015-8830](https://www.redhat.com/security/data/cve/CVE-2015-8830.html)
* [CVE-2016-8650](https://www.redhat.com/security/data/cve/CVE-2016-8650.html)
* [CVE-2017-2671](https://www.redhat.com/security/data/cve/CVE-2017-2671.html)
* [CVE-2017-6001](https://www.redhat.com/security/data/cve/CVE-2017-6001.html)
* [CVE-2017-7308](https://www.redhat.com/security/data/cve/CVE-2017-7308.html)
* [CVE-2017-7616](https://www.redhat.com/security/data/cve/CVE-2017-7616.html)
* [CVE-2017-7889](https://www.redhat.com/security/data/cve/CVE-2017-7889.html)
* [CVE-2017-8890](https://www.redhat.com/security/data/cve/CVE-2017-8890.html)
* [CVE-2017-9075](https://www.redhat.com/security/data/cve/CVE-2017-9075.html)
* [CVE-2017-9076](https://www.redhat.com/security/data/cve/CVE-2017-9076.html)
* [CVE-2017-9077](https://www.redhat.com/security/data/cve/CVE-2017-9077.html)
* [CVE-2017-12190](https://www.redhat.com/security/data/cve/CVE-2017-12190.html)
* [CVE-2017-15121](https://www.redhat.com/security/data/cve/CVE-2017-15121.html)
* [CVE-2017-18203](https://www.redhat.com/security/data/cve/CVE-2017-18203.html)
* [CVE-2018-1130](https://www.redhat.com/security/data/cve/CVE-2018-1130.html)
* [CVE-2018-3639](https://www.redhat.com/security/data/cve/CVE-2018-3639.html)
* [CVE-2018-5803](https://www.redhat.com/security/data/cve/CVE-2018-5803.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>
* <https://access.redhat.com/security/vulnerabilities/ssbd>
* <https://access.redhat.com/documentation/en-US/red_hat_enterprise_linux/6/html/6.10_release_notes/index.html>
* <https://access.redhat.com/documentation/en-US/red_hat_enterprise_linux/6/html/6.10_technical_notes/index.html>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux Server 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| x86\_64 | |
| kernel-2.6.32-754.el6.x86\_64.rpm | SHA-256: efc99f5e1c003a58032441f4a1be32d452c74282693611a8e23a2562c13ef1ad |
| kernel-2.6.32-754.el6.x86\_64.rpm | SHA-256: efc99f5e1c003a58032441f4a1be32d452c74282693611a8e23a2562c13ef1ad |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.x86\_64.rpm | SHA-256: d5d0d3b429ca556c98842b2b27f8b93355406f7f8f483f670c91a9616dc446bd |
| kernel-debug-2.6.32-754.el6.x86\_64.rpm | SHA-256: d5d0d3b429ca556c98842b2b27f8b93355406f7f8f483f670c91a9616dc446bd |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debug-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8ac2be3fe94911d4a140acb26cb7c1d56694d64dcfebcc7d1e827c91d2566815 |
| kernel-debug-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8ac2be3fe94911d4a140acb26cb7c1d56694d64dcfebcc7d1e827c91d2566815 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 75d872d897f7ba22da2668e03448dd85342fb52db9fc15291009b4b38c39b8c3 |
| kernel-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 75d872d897f7ba22da2668e03448dd85342fb52db9fc15291009b4b38c39b8c3 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.x86\_64.rpm | SHA-256: 7a87a29b657bd30d59fd2303f24bf9c688a224cdd25c92f11663b5cc98d066c8 |
| kernel-headers-2.6.32-754.el6.x86\_64.rpm | SHA-256: 7a87a29b657bd30d59fd2303f24bf9c688a224cdd25c92f11663b5cc98d066c8 |
| perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: ca277a63d24104b992e780512d8641e2de3ce6bacf2146398bbabf6bb233af73 |
| perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: ca277a63d24104b992e780512d8641e2de3ce6bacf2146398bbabf6bb233af73 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| python-perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: b593e2b6afce4c731994cb5df8fd9b4d61487c2ec7ded3a84390370ff6f2644e |
| python-perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: b593e2b6afce4c731994cb5df8fd9b4d61487c2ec7ded3a84390370ff6f2644e |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| i386 | |
| kernel-2.6.32-754.el6.i686.rpm | SHA-256: 90679a080d5788d2d58a5f6da7fa5689ba999e1e450ec3e18ad211095ed7641e |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.i686.rpm | SHA-256: 37af17682e794e4a3b75bf3043f84b7cd93e2c44adc78ef7286b636db21b2e0f |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-devel-2.6.32-754.el6.i686.rpm | SHA-256: 330647e5963ccacf1d439b6e94306e72b8d2fff428e6fdc176972317f62f1221 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.i686.rpm | SHA-256: 529c4a01a8c2933dfcd6f1bc4b3f234f6b19d6b81f39dbff0bdb4938bb3b0e48 |
| perf-2.6.32-754.el6.i686.rpm | SHA-256: d4ab02ace2cf86231485ced423d56628dc3244900fcfabaeea5184a842f0da69 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| python-perf-2.6.32-754.el6.i686.rpm | SHA-256: d0eddc59ac6160f5089b2f3eead7f9a7d96fb42b4a030d4a5653ce8ced4b8020 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| x86\_64 | |
| kernel-2.6.32-754.el6.x86\_64.rpm | SHA-256: efc99f5e1c003a58032441f4a1be32d452c74282693611a8e23a2562c13ef1ad |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.x86\_64.rpm | SHA-256: d5d0d3b429ca556c98842b2b27f8b93355406f7f8f483f670c91a9616dc446bd |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debug-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8ac2be3fe94911d4a140acb26cb7c1d56694d64dcfebcc7d1e827c91d2566815 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 75d872d897f7ba22da2668e03448dd85342fb52db9fc15291009b4b38c39b8c3 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.x86\_64.rpm | SHA-256: 7a87a29b657bd30d59fd2303f24bf9c688a224cdd25c92f11663b5cc98d066c8 |
| perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: ca277a63d24104b992e780512d8641e2de3ce6bacf2146398bbabf6bb233af73 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| python-perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: b593e2b6afce4c731994cb5df8fd9b4d61487c2ec7ded3a84390370ff6f2644e |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| i386 | |
| kernel-2.6.32-754.el6.i686.rpm | SHA-256: 90679a080d5788d2d58a5f6da7fa5689ba999e1e450ec3e18ad211095ed7641e |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.i686.rpm | SHA-256: 37af17682e794e4a3b75bf3043f84b7cd93e2c44adc78ef7286b636db21b2e0f |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-devel-2.6.32-754.el6.i686.rpm | SHA-256: 330647e5963ccacf1d439b6e94306e72b8d2fff428e6fdc176972317f62f1221 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.i686.rpm | SHA-256: 529c4a01a8c2933dfcd6f1bc4b3f234f6b19d6b81f39dbff0bdb4938bb3b0e48 |
| perf-2.6.32-754.el6.i686.rpm | SHA-256: d4ab02ace2cf86231485ced423d56628dc3244900fcfabaeea5184a842f0da69 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| python-perf-2.6.32-754.el6.i686.rpm | SHA-256: d0eddc59ac6160f5089b2f3eead7f9a7d96fb42b4a030d4a5653ce8ced4b8020 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |

## Red Hat Enterprise Linux Workstation 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| x86\_64 | |
| kernel-2.6.32-754.el6.x86\_64.rpm | SHA-256: efc99f5e1c003a58032441f4a1be32d452c74282693611a8e23a2562c13ef1ad |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.x86\_64.rpm | SHA-256: d5d0d3b429ca556c98842b2b27f8b93355406f7f8f483f670c91a9616dc446bd |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debug-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8ac2be3fe94911d4a140acb26cb7c1d56694d64dcfebcc7d1e827c91d2566815 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 75d872d897f7ba22da2668e03448dd85342fb52db9fc15291009b4b38c39b8c3 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.x86\_64.rpm | SHA-256: 7a87a29b657bd30d59fd2303f24bf9c688a224cdd25c92f11663b5cc98d066c8 |
| perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: ca277a63d24104b992e780512d8641e2de3ce6bacf2146398bbabf6bb233af73 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| python-perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: b593e2b6afce4c731994cb5df8fd9b4d61487c2ec7ded3a84390370ff6f2644e |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| i386 | |
| kernel-2.6.32-754.el6.i686.rpm | SHA-256: 90679a080d5788d2d58a5f6da7fa5689ba999e1e450ec3e18ad211095ed7641e |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.i686.rpm | SHA-256: 37af17682e794e4a3b75bf3043f84b7cd93e2c44adc78ef7286b636db21b2e0f |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-devel-2.6.32-754.el6.i686.rpm | SHA-256: 330647e5963ccacf1d439b6e94306e72b8d2fff428e6fdc176972317f62f1221 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.i686.rpm | SHA-256: 529c4a01a8c2933dfcd6f1bc4b3f234f6b19d6b81f39dbff0bdb4938bb3b0e48 |
| perf-2.6.32-754.el6.i686.rpm | SHA-256: d4ab02ace2cf86231485ced423d56628dc3244900fcfabaeea5184a842f0da69 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| python-perf-2.6.32-754.el6.i686.rpm | SHA-256: d0eddc59ac6160f5089b2f3eead7f9a7d96fb42b4a030d4a5653ce8ced4b8020 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |

## Red Hat Enterprise Linux Desktop 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| x86\_64 | |
| kernel-2.6.32-754.el6.x86\_64.rpm | SHA-256: efc99f5e1c003a58032441f4a1be32d452c74282693611a8e23a2562c13ef1ad |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.x86\_64.rpm | SHA-256: d5d0d3b429ca556c98842b2b27f8b93355406f7f8f483f670c91a9616dc446bd |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debug-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8ac2be3fe94911d4a140acb26cb7c1d56694d64dcfebcc7d1e827c91d2566815 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 75d872d897f7ba22da2668e03448dd85342fb52db9fc15291009b4b38c39b8c3 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.x86\_64.rpm | SHA-256: 7a87a29b657bd30d59fd2303f24bf9c688a224cdd25c92f11663b5cc98d066c8 |
| perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: ca277a63d24104b992e780512d8641e2de3ce6bacf2146398bbabf6bb233af73 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| python-perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: b593e2b6afce4c731994cb5df8fd9b4d61487c2ec7ded3a84390370ff6f2644e |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| i386 | |
| kernel-2.6.32-754.el6.i686.rpm | SHA-256: 90679a080d5788d2d58a5f6da7fa5689ba999e1e450ec3e18ad211095ed7641e |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.i686.rpm | SHA-256: 37af17682e794e4a3b75bf3043f84b7cd93e2c44adc78ef7286b636db21b2e0f |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-devel-2.6.32-754.el6.i686.rpm | SHA-256: 330647e5963ccacf1d439b6e94306e72b8d2fff428e6fdc176972317f62f1221 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.i686.rpm | SHA-256: 529c4a01a8c2933dfcd6f1bc4b3f234f6b19d6b81f39dbff0bdb4938bb3b0e48 |
| perf-2.6.32-754.el6.i686.rpm | SHA-256: d4ab02ace2cf86231485ced423d56628dc3244900fcfabaeea5184a842f0da69 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| python-perf-2.6.32-754.el6.i686.rpm | SHA-256: d0eddc59ac6160f5089b2f3eead7f9a7d96fb42b4a030d4a5653ce8ced4b8020 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |

## Red Hat Enterprise Linux for IBM z Systems 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| s390x | |
| kernel-2.6.32-754.el6.s390x.rpm | SHA-256: 9273591ba9d5a38d9a54a857b1389f988335e9682f274c458778946201250c3c |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.s390x.rpm | SHA-256: fb8c21fa3b131f90008748a1cb6fe982fc68b15fae70bb652a2505e8e77209f7 |
| kernel-debug-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: d6893d204598ce202583a617480f726252272cbe1839d7111e692a108ea47c48 |
| kernel-debug-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: d6893d204598ce202583a617480f726252272cbe1839d7111e692a108ea47c48 |
| kernel-debug-devel-2.6.32-754.el6.s390x.rpm | SHA-256: 25ff967140c93ecea42ebd17a3b385c76e15743711314f0ebefd1b07ad5efb3b |
| kernel-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 808ac17c984b8d034f57935da832f5c7e0128d3512098e6a5056b2877b9e94c5 |
| kernel-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 808ac17c984b8d034f57935da832f5c7e0128d3512098e6a5056b2877b9e94c5 |
| kernel-debuginfo-common-s390x-2.6.32-754.el6.s390x.rpm | SHA-256: 90288da879e3ce6b6e925f17144815ac4c7fa066f333f395be9d8ae7499999d1 |
| kernel-debuginfo-common-s390x-2.6.32-754.el6.s390x.rpm | SHA-256: 90288da879e3ce6b6e925f17144815ac4c7fa066f333f395be9d8ae7499999d1 |
| kernel-devel-2.6.32-754.el6.s390x.rpm | SHA-256: c948b2bc11678326c40ac5fdfc53935a0a3beec04392770ee15e200e57241d04 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.s390x.rpm | SHA-256: 3d01f439b2d53d7c5239be7a5129893cb7dc1093821c2afdfefb70b4582d07c4 |
| kernel-kdump-2.6.32-754.el6.s390x.rpm | SHA-256: 6a744cf2b053c738747cc9e4e03aedfb275730099b4c83fc5d5fcb5132d418b1 |
| kernel-kdump-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: baa432b4fef6d2839bac65970bc2f5464606ee56375d3ec9eb2814a52b68d307 |
| kernel-kdump-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: baa432b4fef6d2839bac65970bc2f5464606ee56375d3ec9eb2814a52b68d307 |
| kernel-kdump-devel-2.6.32-754.el6.s390x.rpm | SHA-256: edece2547b351a7392bf3defcc5e246a3664623248d155f9a6b4dc95bd6260b4 |
| perf-2.6.32-754.el6.s390x.rpm | SHA-256: db7b5431f3ec36621a252727853c149b6b49fc2a10bf3631aca59dd2909e1676 |
| perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 296343eb10cdfd694da14513fef83b3b5daa0024afbd9ef32a4a7fa3822820dd |
| perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 296343eb10cdfd694da14513fef83b3b5daa0024afbd9ef32a4a7fa3822820dd |
| python-perf-2.6.32-754.el6.s390x.rpm | SHA-256: d381a7a9b8948e4fc08323a52ca913e90a3ea5b51959aefed8d860a96e8b9b82 |
| python-perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 7f9a97c97a36279997777338d8f7ed0476f82b8a254c1892ba9cb732b19665de |
| python-perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 7f9a97c97a36279997777338d8f7ed0476f82b8a254c1892ba9cb732b19665de |

## Red Hat Enterprise Linux for Power, big endian 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| ppc64 | |
| kernel-2.6.32-754.el6.ppc64.rpm | SHA-256: 275d723b8d61e7f03ab75fe8424cc3f6067c01ea1260864d8d738b1efff47f5d |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-bootwrapper-2.6.32-754.el6.ppc64.rpm | SHA-256: 8de9406d7f630869f3f32d10c0ccfbeae76a65da384991cca83edc2dbdca82a0 |
| kernel-debug-2.6.32-754.el6.ppc64.rpm | SHA-256: 8ee41069feabbd12923193aad17494ce49e49fcb89a76e3b074cf32b82cb5040 |
| kernel-debug-debuginfo-2.6.32-754.el6.ppc64.rpm | SHA-256: a732cf0d66317b122e7290471259757aba6c215389b9732f358285cac65bef08 |
| kernel-debug-debuginfo-2.6.32-754.el6.ppc64.rpm | SHA-256: a732cf0d66317b122e7290471259757aba6c215389b9732f358285cac65bef08 |
| kernel-debug-devel-2.6.32-754.el6.ppc64.rpm | SHA-256: 7c6b5ca1dd7fe1ba19b7beacdd0261ebc5c3625417f5d0580d62b8256e488fec |
| kernel-debuginfo-2.6.32-754.el6.ppc64.rpm | SHA-256: df868093b52c5a17cf9bd54891a82bc30d5eda73e5e0985fa612e56ea88f3dcf |
| kernel-debuginfo-2.6.32-754.el6.ppc64.rpm | SHA-256: df868093b52c5a17cf9bd54891a82bc30d5eda73e5e0985fa612e56ea88f3dcf |
| kernel-debuginfo-common-ppc64-2.6.32-754.el6.ppc64.rpm | SHA-256: 4f98898e122d4ca0872b89343740a6a8b8110d2b2bc825fa924fbe1c6d64bd35 |
| kernel-debuginfo-common-ppc64-2.6.32-754.el6.ppc64.rpm | SHA-256: 4f98898e122d4ca0872b89343740a6a8b8110d2b2bc825fa924fbe1c6d64bd35 |
| kernel-devel-2.6.32-754.el6.ppc64.rpm | SHA-256: 2dc653a6ab19e025201d73cf134934c0ad26fe5b692919d1e0790fa753b45805 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.ppc64.rpm | SHA-256: 2f53e991f68b34003b8306e4a6c66a90dffa18aa2d26e8a711080b34df34af2f |
| perf-2.6.32-754.el6.ppc64.rpm | SHA-256: 526ee533f4f6cc8b2096e5091f7608b3331f958c4c0597aceb4fd0a6f5d16969 |
| perf-debuginfo-2.6.32-754.el6.ppc64.rpm | SHA-256: 228f4229619a6035f20e97206831cf8b9c1076628348f94e42cb782c6f58177d |
| perf-debuginfo-2.6.32-754.el6.ppc64.rpm | SHA-256: 228f4229619a6035f20e97206831cf8b9c1076628348f94e42cb782c6f58177d |
| python-perf-2.6.32-754.el6.ppc64.rpm | SHA-256: 88c3676d930923fafd66aaf6ae13afbc9ee6e5309fd83591406d6c55c892ea47 |
| python-perf-debuginfo-2.6.32-754.el6.ppc64.rpm | SHA-256: 151d6747bbd656e4dae4c8d92d37a1610d9844b17a9874c82132d3f12bc8e474 |
| python-perf-debuginfo-2.6.32-754.el6.ppc64.rpm | SHA-256: 151d6747bbd656e4dae4c8d92d37a1610d9844b17a9874c82132d3f12bc8e474 |

## Red Hat Enterprise Linux for Scientific Computing 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| x86\_64 | |
| kernel-2.6.32-754.el6.x86\_64.rpm | SHA-256: efc99f5e1c003a58032441f4a1be32d452c74282693611a8e23a2562c13ef1ad |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.x86\_64.rpm | SHA-256: d5d0d3b429ca556c98842b2b27f8b93355406f7f8f483f670c91a9616dc446bd |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debug-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8ac2be3fe94911d4a140acb26cb7c1d56694d64dcfebcc7d1e827c91d2566815 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 75d872d897f7ba22da2668e03448dd85342fb52db9fc15291009b4b38c39b8c3 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.x86\_64.rpm | SHA-256: 7a87a29b657bd30d59fd2303f24bf9c688a224cdd25c92f11663b5cc98d066c8 |
| perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: ca277a63d24104b992e780512d8641e2de3ce6bacf2146398bbabf6bb233af73 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| python-perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: b593e2b6afce4c731994cb5df8fd9b4d61487c2ec7ded3a84390370ff6f2644e |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support (for IBM z Systems) 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| s390x | |
| kernel-2.6.32-754.el6.s390x.rpm | SHA-256: 9273591ba9d5a38d9a54a857b1389f988335e9682f274c458778946201250c3c |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.s390x.rpm | SHA-256: fb8c21fa3b131f90008748a1cb6fe982fc68b15fae70bb652a2505e8e77209f7 |
| kernel-debug-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: d6893d204598ce202583a617480f726252272cbe1839d7111e692a108ea47c48 |
| kernel-debug-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: d6893d204598ce202583a617480f726252272cbe1839d7111e692a108ea47c48 |
| kernel-debug-devel-2.6.32-754.el6.s390x.rpm | SHA-256: 25ff967140c93ecea42ebd17a3b385c76e15743711314f0ebefd1b07ad5efb3b |
| kernel-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 808ac17c984b8d034f57935da832f5c7e0128d3512098e6a5056b2877b9e94c5 |
| kernel-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 808ac17c984b8d034f57935da832f5c7e0128d3512098e6a5056b2877b9e94c5 |
| kernel-debuginfo-common-s390x-2.6.32-754.el6.s390x.rpm | SHA-256: 90288da879e3ce6b6e925f17144815ac4c7fa066f333f395be9d8ae7499999d1 |
| kernel-debuginfo-common-s390x-2.6.32-754.el6.s390x.rpm | SHA-256: 90288da879e3ce6b6e925f17144815ac4c7fa066f333f395be9d8ae7499999d1 |
| kernel-devel-2.6.32-754.el6.s390x.rpm | SHA-256: c948b2bc11678326c40ac5fdfc53935a0a3beec04392770ee15e200e57241d04 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.s390x.rpm | SHA-256: 3d01f439b2d53d7c5239be7a5129893cb7dc1093821c2afdfefb70b4582d07c4 |
| kernel-kdump-2.6.32-754.el6.s390x.rpm | SHA-256: 6a744cf2b053c738747cc9e4e03aedfb275730099b4c83fc5d5fcb5132d418b1 |
| kernel-kdump-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: baa432b4fef6d2839bac65970bc2f5464606ee56375d3ec9eb2814a52b68d307 |
| kernel-kdump-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: baa432b4fef6d2839bac65970bc2f5464606ee56375d3ec9eb2814a52b68d307 |
| kernel-kdump-devel-2.6.32-754.el6.s390x.rpm | SHA-256: edece2547b351a7392bf3defcc5e246a3664623248d155f9a6b4dc95bd6260b4 |
| perf-2.6.32-754.el6.s390x.rpm | SHA-256: db7b5431f3ec36621a252727853c149b6b49fc2a10bf3631aca59dd2909e1676 |
| perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 296343eb10cdfd694da14513fef83b3b5daa0024afbd9ef32a4a7fa3822820dd |
| perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 296343eb10cdfd694da14513fef83b3b5daa0024afbd9ef32a4a7fa3822820dd |
| python-perf-2.6.32-754.el6.s390x.rpm | SHA-256: d381a7a9b8948e4fc08323a52ca913e90a3ea5b51959aefed8d860a96e8b9b82 |
| python-perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 7f9a97c97a36279997777338d8f7ed0476f82b8a254c1892ba9cb732b19665de |
| python-perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 7f9a97c97a36279997777338d8f7ed0476f82b8a254c1892ba9cb732b19665de |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support Extension 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| x86\_64 | |
| kernel-2.6.32-754.el6.x86\_64.rpm | SHA-256: efc99f5e1c003a58032441f4a1be32d452c74282693611a8e23a2562c13ef1ad |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.x86\_64.rpm | SHA-256: d5d0d3b429ca556c98842b2b27f8b93355406f7f8f483f670c91a9616dc446bd |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 085d1afa13908107df7030a1d877b85bbd92db998f18b868473b7d0ebd152c12 |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debug-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8ac2be3fe94911d4a140acb26cb7c1d56694d64dcfebcc7d1e827c91d2566815 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 45b1a52e6203b534878a98d583dac29c6d144cf2b37dd57fb9e3be13e785f469 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-debuginfo-common-x86\_64-2.6.32-754.el6.x86\_64.rpm | SHA-256: 897d08bbb39c618dd2af469cad65e809b5f56743ee500cf4455aee47e3389da6 |
| kernel-devel-2.6.32-754.el6.x86\_64.rpm | SHA-256: 75d872d897f7ba22da2668e03448dd85342fb52db9fc15291009b4b38c39b8c3 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.x86\_64.rpm | SHA-256: 7a87a29b657bd30d59fd2303f24bf9c688a224cdd25c92f11663b5cc98d066c8 |
| perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: ca277a63d24104b992e780512d8641e2de3ce6bacf2146398bbabf6bb233af73 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 8f933618a8a8833b3eafbedbf47129a07150406965dfdefd89726cda024db4e9 |
| python-perf-2.6.32-754.el6.x86\_64.rpm | SHA-256: b593e2b6afce4c731994cb5df8fd9b4d61487c2ec7ded3a84390370ff6f2644e |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| python-perf-debuginfo-2.6.32-754.el6.x86\_64.rpm | SHA-256: 3a0523025ba3897f90f3b644b7b9f501f7dac2fe68225e8a72e84c24b640aeee |
| i386 | |
| kernel-2.6.32-754.el6.i686.rpm | SHA-256: 90679a080d5788d2d58a5f6da7fa5689ba999e1e450ec3e18ad211095ed7641e |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.i686.rpm | SHA-256: 37af17682e794e4a3b75bf3043f84b7cd93e2c44adc78ef7286b636db21b2e0f |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 07de5189d01ca5f235b487c89480c130d073d257bff246bf9f7a4d0c7c4548ef |
| kernel-debug-devel-2.6.32-754.el6.i686.rpm | SHA-256: c3d9ef1795d78d8df5d79d06c6f9417ec752727b1e2bc4d74fb3f9293da23874 |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: e2629390ed7a585cb8ea34c759463e42197c6a504908d7caf1548c28284db5bd |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-debuginfo-common-i686-2.6.32-754.el6.i686.rpm | SHA-256: 3317927088139aa010258e61156c1a6d67fdbcd7003034526270ab1848bb6b30 |
| kernel-devel-2.6.32-754.el6.i686.rpm | SHA-256: 330647e5963ccacf1d439b6e94306e72b8d2fff428e6fdc176972317f62f1221 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.i686.rpm | SHA-256: 529c4a01a8c2933dfcd6f1bc4b3f234f6b19d6b81f39dbff0bdb4938bb3b0e48 |
| perf-2.6.32-754.el6.i686.rpm | SHA-256: d4ab02ace2cf86231485ced423d56628dc3244900fcfabaeea5184a842f0da69 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: a8d59a4a82afd5e38e66ff70ee85ddfc327b49a500153190a11f57b3eba1bac9 |
| python-perf-2.6.32-754.el6.i686.rpm | SHA-256: d0eddc59ac6160f5089b2f3eead7f9a7d96fb42b4a030d4a5653ce8ced4b8020 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |
| python-perf-debuginfo-2.6.32-754.el6.i686.rpm | SHA-256: 8a5f2c4fb9391136e952b71863666eb1b380751276eeeaaad8d449ca951b3da1 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support Extension (for IBM z Systems) 6

| SRPM | |
| --- | --- |
| kernel-2.6.32-754.el6.src.rpm | SHA-256: b8da2c2ebe9db49595f5691b6736e18ca67e42fb77135de528f95787b60936e1 |
| s390x | |
| kernel-2.6.32-754.el6.s390x.rpm | SHA-256: 9273591ba9d5a38d9a54a857b1389f988335e9682f274c458778946201250c3c |
| kernel-abi-whitelists-2.6.32-754.el6.noarch.rpm | SHA-256: a37b493b2e737a14ea19feefb8553abfa8b492321581a4682a0fe95eded4874d |
| kernel-debug-2.6.32-754.el6.s390x.rpm | SHA-256: fb8c21fa3b131f90008748a1cb6fe982fc68b15fae70bb652a2505e8e77209f7 |
| kernel-debug-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: d6893d204598ce202583a617480f726252272cbe1839d7111e692a108ea47c48 |
| kernel-debug-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: d6893d204598ce202583a617480f726252272cbe1839d7111e692a108ea47c48 |
| kernel-debug-devel-2.6.32-754.el6.s390x.rpm | SHA-256: 25ff967140c93ecea42ebd17a3b385c76e15743711314f0ebefd1b07ad5efb3b |
| kernel-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 808ac17c984b8d034f57935da832f5c7e0128d3512098e6a5056b2877b9e94c5 |
| kernel-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 808ac17c984b8d034f57935da832f5c7e0128d3512098e6a5056b2877b9e94c5 |
| kernel-debuginfo-common-s390x-2.6.32-754.el6.s390x.rpm | SHA-256: 90288da879e3ce6b6e925f17144815ac4c7fa066f333f395be9d8ae7499999d1 |
| kernel-debuginfo-common-s390x-2.6.32-754.el6.s390x.rpm | SHA-256: 90288da879e3ce6b6e925f17144815ac4c7fa066f333f395be9d8ae7499999d1 |
| kernel-devel-2.6.32-754.el6.s390x.rpm | SHA-256: c948b2bc11678326c40ac5fdfc53935a0a3beec04392770ee15e200e57241d04 |
| kernel-doc-2.6.32-754.el6.noarch.rpm | SHA-256: 6916ad9d6ffec5c8e7b73aafe6a0a6fa587aa0c856e52987982ef99c416bf95c |
| kernel-firmware-2.6.32-754.el6.noarch.rpm | SHA-256: bd7742ed09a78d08c1d190d6c6c05a3e8eb034cd23792ad531cd2c8388f0fd06 |
| kernel-headers-2.6.32-754.el6.s390x.rpm | SHA-256: 3d01f439b2d53d7c5239be7a5129893cb7dc1093821c2afdfefb70b4582d07c4 |
| kernel-kdump-2.6.32-754.el6.s390x.rpm | SHA-256: 6a744cf2b053c738747cc9e4e03aedfb275730099b4c83fc5d5fcb5132d418b1 |
| kernel-kdump-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: baa432b4fef6d2839bac65970bc2f5464606ee56375d3ec9eb2814a52b68d307 |
| kernel-kdump-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: baa432b4fef6d2839bac65970bc2f5464606ee56375d3ec9eb2814a52b68d307 |
| kernel-kdump-devel-2.6.32-754.el6.s390x.rpm | SHA-256: edece2547b351a7392bf3defcc5e246a3664623248d155f9a6b4dc95bd6260b4 |
| perf-2.6.32-754.el6.s390x.rpm | SHA-256: db7b5431f3ec36621a252727853c149b6b49fc2a10bf3631aca59dd2909e1676 |
| perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 296343eb10cdfd694da14513fef83b3b5daa0024afbd9ef32a4a7fa3822820dd |
| perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 296343eb10cdfd694da14513fef83b3b5daa0024afbd9ef32a4a7fa3822820dd |
| python-perf-2.6.32-754.el6.s390x.rpm | SHA-256: d381a7a9b8948e4fc08323a52ca913e90a3ea5b51959aefed8d860a96e8b9b82 |
| python-perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 7f9a97c97a36279997777338d8f7ed0476f82b8a254c1892ba9cb732b19665de |
| python-perf-debuginfo-2.6.32-754.el6.s390x.rpm | SHA-256: 7f9a97c97a36279997777338d8f7ed0476f82b8a254c1892ba9cb732b19665de |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.debian.org_36593c1f_20250125_175605.html ===


---

[[Date Prev](msg00113.html)][[Date Next](msg00115.html)]
[[Thread Prev](msg00113.html)][[Thread Next](msg00115.html)]
[[Date Index](maillist.html#00114)]
[[Thread Index](threads.html#00114)]

# [SECURITY] [DSA 4188-1] linux security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 4188-1] linux security update
* *From*: Salvatore Bonaccorso <carnil@debian.org>
* *Date*: Tue, 01 May 2018 17:12:08 +0000
* *Message-id*: <[[🔎]](/msgid-search/E1fDYoy-0003Rh-2i%40seger.debian.org) [E1fDYoy-0003Rh-2i@seger.debian.org](msg00114.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-4188-1                   security@debian.org
<https://www.debian.org/security/>                     Salvatore Bonaccorso
May 01, 2018                          <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : linux
CVE ID         : CVE-2017-5715 CVE-2017-5753 CVE-2017-17975 CVE-2017-18193
                 CVE-2017-18216 CVE-2017-18218 CVE-2017-18222 CVE-2017-18224
                 CVE-2017-18241 CVE-2017-18257 CVE-2018-1065 CVE-2018-1066
                 CVE-2018-1068 CVE-2018-1092 CVE-2018-1093 CVE-2018-1108
                 CVE-2018-5803 CVE-2018-7480 CVE-2018-7566 CVE-2018-7740
                 CVE-2018-7757 CVE-2018-7995 CVE-2018-8087 CVE-2018-8781
                 CVE-2018-8822 CVE-2018-10323 CVE-2018-1000199

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2017-5715

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 2 (branch
    target injection) and is mitigated for the x86 architecture (amd64
    and i386) by using the "retpoline" compiler feature which allows
    indirect branches to be isolated from speculative execution.

CVE-2017-5753

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 1
    (bounds-check bypass) and is mitigated by identifying vulnerable
    code sections (array bounds checking followed by array access) and
    replacing the array access with the speculation-safe
    array_index_nospec() function.

    More use sites will be added over time.

CVE-2017-17975

    Tuba Yavuz reported a use-after-free flaw in the USBTV007
    audio-video grabber driver. A local user could use this for denial
    of service by triggering failure of audio registration.

CVE-2017-18193

    Yunlei He reported that the f2fs implementation does not properly
    handle extent trees, allowing a local user to cause a denial of
    service via an application with multiple threads.

CVE-2017-18216

    Alex Chen reported that the OCFS2 filesystem failed to hold a
    necessary lock during nodemanager sysfs file operations,
    potentially leading to a null pointer dereference.  A local user
    could use this for denial of service.

CVE-2017-18218

    Jun He reported a user-after-free flaw in the Hisilicon HNS ethernet
    driver. A local user could use this for denial of service.

CVE-2017-18222

    It was reported that the Hisilicon Network Subsystem (HNS) driver
    implementation does not properly handle ethtool private flags. A
    local user could use this for denial of service or possibly have
    other impact.

CVE-2017-18224

    Alex Chen reported that the OCFS2 filesystem omits the use of a
    semaphore and consequently has a race condition for access to the
    extent tree during read operations in DIRECT mode. A local user
    could use this for denial of service.

CVE-2017-18241

    Yunlei He reported that the f2fs implementation does not properly
    initialise its state if the "noflush_merge" mount option is used.
    A local user with access to a filesystem mounted with this option
    could use this to cause a denial of service.

CVE-2017-18257

    It was reported that the f2fs implementation is prone to an infinite
    loop caused by an integer overflow in the __get_data_block()
    function. A local user can use this for denial of service via
    crafted use of the open and fallocate system calls with an
    FS_IOC_FIEMAP ioctl.

CVE-2018-1065

    The syzkaller tool found a NULL pointer dereference flaw in the
    netfilter subsystem when handling certain malformed iptables
    rulesets. A local user with the CAP_NET_RAW or CAP_NET_ADMIN
    capability (in any user namespace) could use this to cause a denial
    of service. Debian disables unprivileged user namespaces by default.

CVE-2018-1066

    Dan Aloni reported to Red Hat that the CIFS client implementation
    would dereference a null pointer if the server sent an invalid
    response during NTLMSSP setup negotiation.  This could be used
    by a malicious server for denial of service.

CVE-2018-1068

    The syzkaller tool found that the 32-bit compatibility layer of
    ebtables did not sufficiently validate offset values. On a 64-bit
    kernel, a local user with the CAP_NET_ADMIN capability (in any user
    namespace) could use this to overwrite kernel memory, possibly
    leading to privilege escalation. Debian disables unprivileged user
    namespaces by default.

CVE-2018-1092

    Wen Xu reported that a crafted ext4 filesystem image would
    trigger a null dereference when mounted.  A local user able
    to mount arbitrary filesystems could use this for denial of
    service.

CVE-2018-1093

    Wen Xu reported that a crafted ext4 filesystem image could trigger
    an out-of-bounds read in the ext4_valid_block_bitmap() function. A
    local user able to mount arbitrary filesystems could use this for
    denial of service.

CVE-2018-1108

    Jann Horn reported that crng_ready() does not properly handle the
    crng_init variable states and the RNG could be treated as
    cryptographically safe too early after system boot.

CVE-2018-5803

    Alexey Kodanev reported that the SCTP protocol did not range-check
    the length of chunks to be created.  A local or remote user could
    use this to cause a denial of service.

CVE-2018-7480

    Hou Tao discovered a double-free flaw in the blkcg_init_queue()
    function in block/blk-cgroup.c. A local user could use this to cause
    a denial of service or have other impact.

CVE-2018-7566

    Fan LongFei reported a race condition in the ALSA (sound)
    sequencer core, between write and ioctl operations.  This could
    lead to an out-of-bounds access or use-after-free.  A local user
    with access to a sequencer device could use this for denial of
    service or possibly for privilege escalation.

CVE-2018-7740

    Nic Losby reported that the hugetlbfs filesystem's mmap operation
    did not properly range-check the file offset.  A local user with
    access to files on a hugetlbfs filesystem could use this to cause
    a denial of service.

CVE-2018-7757

    Jason Yan reported a memory leak in the SAS (Serial-Attached
    SCSI) subsystem.  A local user on a system with SAS devices
    could use this to cause a denial of service.

CVE-2018-7995

    Seunghun Han reported a race condition in the x86 MCE
    (Machine Check Exception) driver.  This is unlikely to have
    any security impact.

CVE-2018-8087

    A memory leak flaw was found in the hwsim_new_radio_nl() function in
    the simulated radio testing tool driver for mac80211, allowing a
    local user to cause a denial of service.

CVE-2018-8781

    Eyal Itkin reported that the udl (DisplayLink) driver's mmap
    operation did not properly range-check the file offset.  A local
    user with access to a udl framebuffer device could exploit this to
    overwrite kernel memory, leading to privilege escalation.

CVE-2018-8822

    Dr Silvio Cesare of InfoSect reported that the ncpfs client
    implementation did not validate reply lengths from the server.  An
    ncpfs server could use this to cause a denial of service or
    remote code execution in the client.

CVE-2018-10323

    Wen Xu reported a NULL pointer dereference flaw in the
    xfs_bmapi_write() function triggered when mounting and operating a
    crafted xfs filesystem image. A local user able to mount arbitrary
    filesystems could use this for denial of service.

CVE-2018-1000199

    Andy Lutomirski discovered that the ptrace subsystem did not
    sufficiently validate hardware breakpoint settings.  Local users
    can use this to cause a denial of service, or possibly for
    privilege escalation, on x86 (amd64 and i386) and possibly other
    architectures.

For the stable distribution (stretch), these problems have been fixed in
version 4.9.88-1.

We recommend that you upgrade your linux packages.

For the detailed security status of linux please refer to its security
tracker page at:
<https://security-tracker.debian.org/tracker/linux>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQKTBAEBCgB9FiEERkRAmAjBceBVMd3uBUy48xNDz0QFAlron7dfFIAAAAAALgAo
aXNzdWVyLWZwckBub3RhdGlvbnMub3BlbnBncC5maWZ0aGhvcnNlbWFuLm5ldDQ2
NDQ0MDk4MDhDMTcxRTA1NTMxRERFRTA1NENCOEYzMTM0M0NGNDQACgkQBUy48xND
z0Se0xAAmR31jrqeEkJhgh7qvKplrko9N27l7FCCrrqsR0cBjKtIpwBkIdm6UxP2
8HBxqK5oy3sUP/ViHBtTUqFlRbLq4fC2DsuJGGqtBk46yML4QOEV2CXA1gyhfSzG
ux5Z5nNkLDbzD7jPazbTwMusbQrDItojj6K5aoDVoRjjOpRHRViHv81kRU3KJytX
62f/vnEjxX0xkSOqLKXcUNDczLjcP2VxuKFb3si6w7YyCXq6XYhvoDch92QLJZfD
qtDUCKs1sEgWLzhktcYyhck3NGujSfLZuSLGnZowqGqaAvx/lq0sTOliKuPpnG+I
HztPR0iYQCuzsDgHbLlwGyuUnf446VRG+u/AP69qk0HqyWwCXqsTJ0rwMX04fXtR
7dR8Y1jbbXaH0+ai9V6c3zdz4UKH5rZOkpIIYSjCxVHUpE2cU4lFXYiWL/qJRBGV
150TtSgyAPBBBJa6cWgApXrHgriGEkZNscH2nmJfg2OBnDwnLJ4CvwNfij7daR8n
RlGOlvgKYCI1Ob54kKqvvxQhDrhTiBhti8T64wd2MzsrKLIRdlyTpSrsqK8VIJyg
ux1Y01sgA3JqS2XKL52ZTgCJhGkoX68+/se73P+jeRBP/tbNcXB2t2cE6gxIkiTX
eZEUmnS5IeoEcr7cYKm3M9GZvBBrVeTaFra3vSgeGDUr0XL2Yu4=
=uZGQ
-----END PGP SIGNATURE-----

```

---



=== Content from www.redhat.com_91b629d4_20250126_104710.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_e261c369_20250126_104712.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1551565)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1551565)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1551565)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1551565

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1551565**](show_bug.cgi?id=1551565)
(CVE-2017-18208)
- [CVE-2017-18208](https://access.redhat.com/security/cve/CVE-2017-18208) kernel: Inifinite loop vulnerability in mm/madvise.c:madvise\_willneed() function allows local denial of service

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2017-18208 kernel: Inifinite loop vulnerability in mm/madvise.c:madvise\_w...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2017-18208 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1551566](show_bug.cgi?id=1551566) [1552458](show_bug.cgi?id=1552458) [1552459](show_bug.cgi?id=1552459) [1552460](show_bug.cgi?id=1552460) [1552461](show_bug.cgi?id=1552461) [1552462](show_bug.cgi?id=1552462) [1552463](show_bug.cgi?id=1552463) [1552464](show_bug.cgi?id=1552464) [1552981](show_bug.cgi?id=1552981) [1552982](show_bug.cgi?id=1552982) [1552983](show_bug.cgi?id=1552983) [1552984](show_bug.cgi?id=1552984) [1740225](show_bug.cgi?id=1740225) [1740226](show_bug.cgi?id=1740226) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1551570](show_bug.cgi?id=1551570) | | TreeView+ | [depends on](buglist.cgi?bug_id=1551565&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1551565&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2018-03-05 12:29 UTC by Adam Mariš | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 00:43 UTC ([History](show_activity.cgi?id=1551565)) | | [CC List:](page.cgi?id=fields.html#cclist) | 43 users (show)  airlied ajax aquini bhu blc bskeggs dhoward ewk fhrbata hdegoede hkrzesin hwkernel-mgr iboverma ichavero itamar jarodwilson jforbes jglisse jkacur john.j5live jonathan josef jross jwboyer kernel-maint kernel-mgr labbott lgoncalv linville matt mchehab mcressma mjg59 mlangsdo nmurray plougher rt-maint rvrbovsk skozina slawomir steved williams wmealing | | Fixed In Version: | kernel 4.15 | | | Doc Type: | If docs needed, set a value | | | Doc Text: | The madvise\_willneed function in the Linux kernel allows local users to cause a denial of service (infinite loop) by triggering use of MADVISE\_WILLNEED for a DAX mapping. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-06-08 03:42:19 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2018:2948](https://access.redhat.com/errata/RHSA-2018%3A2948) | 0 | None | None | None | 2018-10-30 08:58:36 UTC | | Red Hat Product Errata | [RHSA-2018:3083](https://access.redhat.com/errata/RHSA-2018%3A3083) | 0 | None | None | None | 2018-10-30 07:31:49 UTC | | Red Hat Product Errata | [RHSA-2018:3096](https://access.redhat.com/errata/RHSA-2018%3A3096) | 0 | None | None | None | 2018-10-30 07:37:56 UTC | | Red Hat Product Errata | [RHSA-2019:3967](https://access.redhat.com/errata/RHSA-2019%3A3967) | 0 | None | None | None | 2019-11-26 11:52:23 UTC | | Red Hat Product Errata | [RHSA-2019:4057](https://access.redhat.com/errata/RHSA-2019%3A4057) | 0 | None | None | None | 2019-12-03 08:07:01 UTC | | Red Hat Product Errata | [RHSA-2019:4058](https://access.redhat.com/errata/RHSA-2019%3A4058) | 0 | None | None | None | 2019-12-03 08:25:51 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1551565#c0)  Adam Mariš    2018-03-05 12:29:32 UTC  ``` The madvise_willneed function in mm/madvise.c in the Linux kernel before 4.14.4 allows local users to cause a denial of service (infinite loop) by triggering use of MADVISE_WILLNEED for a DAX mapping.  Upstream patch:  <https://github.com/torvalds/linux/commit/6ea8d958a2c95a1d514015d4e29ba21a8c0a1a91>   ```  [Comment 3](show_bug.cgi?id=1551565#c3)  Wade Mealing    2018-03-07 07:41:10 UTC  ``` External References:  <https://www.kernel.org/doc/Documentation/filesystems/dax.txt> <https://lwn.net/Articles/618064/>   ```  [Comment 7](show_bug.cgi?id=1551565#c7)  errata-xmlrpc    2018-10-30 07:31:30 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:3083 [https://access.redhat.com/errata/RHSA-2018:3083](https://access.redhat.com/errata/RHSA-2018%3A3083)   ```  [Comment 8](show_bug.cgi?id=1551565#c8)  errata-xmlrpc    2018-10-30 07:37:38 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:3096 [https://access.redhat.com/errata/RHSA-2018:3096](https://access.redhat.com/errata/RHSA-2018%3A3096)   ```  [Comment 9](show_bug.cgi?id=1551565#c9)  errata-xmlrpc    2018-10-30 08:58:18 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:2948 [https://access.redhat.com/errata/RHSA-2018:2948](https://access.redhat.com/errata/RHSA-2018%3A2948)   ```  [Comment 11](show_bug.cgi?id=1551565#c11)  errata-xmlrpc    2019-11-26 11:52:20 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7.5 Extended Update Support  Via RHSA-2019:3967 [https://access.redhat.com/errata/RHSA-2019:3967](https://access.redhat.com/errata/RHSA-2019%3A3967)   ```  [Comment 12](show_bug.cgi?id=1551565#c12)  errata-xmlrpc    2019-12-03 08:06:59 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise MRG 2  Via RHSA-2019:4057 [https://access.redhat.com/errata/RHSA-2019:4057](https://access.redhat.com/errata/RHSA-2019%3A4057)   ```  [Comment 13](show_bug.cgi?id=1551565#c13)  errata-xmlrpc    2019-12-03 08:25:47 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7.4 Advanced Update Support   Red Hat Enterprise Linux 7.4 Update Services for SAP Solutions   Red Hat Enterprise Linux 7.4 Telco Extended Update Support  Via RHSA-2019:4058 [https://access.redhat.com/errata/RHSA-2019:4058](https://access.redhat.com/errata/RHSA-2019%3A4058)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1551565&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from cdn.kernel.org_37957e00_20250125_175540.html ===
commit 2d61e08a1024d0cf15c26889285004e46c9f0b14
Author: Sasha Levin
Date: Tue Mar 27 16:15:21 2018 -0400
Linux 4.1.51
Signed-off-by: Sasha Levin
commit 9f63c2489c715b2e986517cc3c6fb9e5fcd6218e
Author: Sasha Levin
Date: Mon Mar 26 21:34:18 2018 -0400
Revert "x86/retpoline/checksum32: Convert assembler indirect jumps"
This reverts commit 539142804971ee10ff0370d19d6e1ee5bc45babc.
Signed-off-by: Sasha Levin
commit 2ae2efda4b14ad93415c2b9884cbac1ac9d0d794
Author: Sasha Levin
Date: Tue Mar 20 16:44:18 2018 -0400
Revert "x86/retpoline/crypto: Convert crypto assembler indirect jumps"
This reverts commit 0153127f56d685b355e5adb5747f1d4463761756.
Signed-off-by: Sasha Levin
commit 509efc5dfd989cf959858c6199f61c269bc76059
Author: Sasha Levin
Date: Tue Mar 20 16:44:17 2018 -0400
Revert "x86/retpoline/hyperv: Convert assembler indirect jumps"
This reverts commit db8171fb71e4af877f400406d8f114c4021d2ef2.
Signed-off-by: Sasha Levin
commit 996f7651f682994ea21bda0da07bf19590fa789d
Author: Sasha Levin
Date: Tue Mar 20 16:44:15 2018 -0400
Revert "x86/retpoline/xen: Convert Xen hypercall indirect jumps"
This reverts commit 4cc996c64b97219945b28b9faa056c009d09c04d.
Signed-off-by: Sasha Levin
commit e0e719352ac4c9c94c78cad538ad153afc28e5a8
Author: Sasha Levin
Date: Tue Mar 20 16:44:13 2018 -0400
Revert "kprobes/x86: Disable optimizing on the function jumps to indirect thunk"
This reverts commit 3e50641bf84d702a7f82018b07f58cbbdcd3cea5.
Signed-off-by: Sasha Levin
commit 1796c74bb794456f3de92fff8ea0114b87d3a1d6
Author: Pavel Fedin
Date: Fri Dec 4 15:03:11 2015 +0300
arm64: KVM: Correctly handle zero register during MMIO
[ Upstream commit bc45a516fa90b43b1898758d8b53b74c24b954e4 ]
On ARM64 register index of 31 corresponds to both zero register and SP.
However, all memory access instructions, use ZR as transfer register. SP
is used only as a base register in indirect memory addressing, or by
register-register arithmetics, which cannot be trapped here.
Correct emulation is achieved by introducing new register accessor
functions, which can do special handling for reg\_num == 31. These new
accessors intentionally do not rely on old vcpu\_reg() on ARM64, because
it is to be removed. Since the affected code is shared by both ARM
flavours, implementations of these accessors are also added to ARM32 code.
This patch fixes setting MMIO register to a random value (actually SP)
instead of zero by something like:
\*((volatile int \*)reg) = 0;
compilers tend to generate "str wzr, [xx]" here
[Marc: Fixed 32bit splat]
Signed-off-by: Pavel Fedin
Reviewed-by: Marc Zyngier
Signed-off-by: Marc Zyngier
Signed-off-by: Sasha Levin
commit 2191fc0f29b2d4e8e3e4aa5bf75df771aa7b1f88
Author: Hou Tao
Date: Fri Feb 3 17:19:07 2017 +0800
blkcg: fix double free of new\_blkg in blkcg\_init\_queue
[ Upstream commit 9b54d816e00425c3a517514e0d677bb3cec49258 ]
If blkg\_create fails, new\_blkg passed as an argument will
be freed by blkg\_create, so there is no need to free it again.
Signed-off-by: Hou Tao
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
commit dfa3da735104f8e7f2e13c4be1c6650dcf3f1046
Author: Nikola Ciprich
Date: Tue Feb 13 15:04:46 2018 +0100
serial: 8250\_pci: Add Brainboxes UC-260 4 port serial device
[ Upstream commit 9f2068f35729948bde84d87a40d135015911345d ]
Add PCI ids for two variants of Brainboxes UC-260 quad port
PCI serial cards.
Suggested-by: Andy Shevchenko
Signed-off-by: Nikola Ciprich
Cc: stable
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit f642176da2177e68e1cfdb89d5cb62d255eb53b4
Author: Xinyong
Date: Fri Mar 2 19:20:07 2018 +0800
usb: gadget: f\_fs: Fix use-after-free in ffs\_fs\_kill\_sb()
[ Upstream commit 1a087f032111a88e826877449dfb93ceb22b78b9 ]
When I debug a kernel crash issue in funcitonfs, found ffs\_data.ref
overflowed, While functionfs is unmounting, ffs\_data is put twice.
Commit 43938613c6fd ("drivers, usb: convert ffs\_data.ref from atomic\_t to
refcount\_t") can avoid refcount overflow, but that is risk some situations.
So no need put ffs data in ffs\_fs\_kill\_sb, already put in ffs\_data\_closed.
The issue can be reproduced in Mediatek mt6763 SoC, ffs for ADB device.
KASAN enabled configuration reports use-after-free errro.
BUG: KASAN: use-after-free in refcount\_dec\_and\_test+0x14/0xe0 at addr ffffffc0579386a0
Read of size 4 by task umount/4650
====================================================
BUG kmalloc-512 (Tainted: P W O ): kasan: bad access detected
-----------------------------------------------------------------------------
INFO: Allocated in ffs\_fs\_mount+0x194/0x844 age=22856 cpu=2 pid=566
alloc\_debug\_processing+0x1ac/0x1e8
\_\_\_slab\_alloc.constprop.63+0x640/0x648
\_\_slab\_alloc.isra.57.constprop.62+0x24/0x34
kmem\_cache\_alloc\_trace+0x1a8/0x2bc
ffs\_fs\_mount+0x194/0x844
mount\_fs+0x6c/0x1d0
vfs\_kern\_mount+0x50/0x1b4
do\_mount+0x258/0x1034
INFO: Freed in ffs\_data\_put+0x25c/0x320 age=0 cpu=3 pid=4650
free\_debug\_processing+0x22c/0x434
\_\_slab\_free+0x2d8/0x3a0
kfree+0x254/0x264
ffs\_data\_put+0x25c/0x320
ffs\_data\_closed+0x124/0x15c
ffs\_fs\_kill\_sb+0xb8/0x110
deactivate\_locked\_super+0x6c/0x98
deactivate\_super+0xb0/0xbc
INFO: Object 0xffffffc057938600 @offset=1536 fp=0x (null)
......
Call trace:
[] dump\_backtrace+0x0/0x250
[] show\_stack+0x14/0x1c
[] dump\_stack+0xa0/0xc8
[] print\_trailer+0x158/0x260
[] object\_err+0x3c/0x40
[] kasan\_report\_error+0x2a8/0x754
[] kasan\_report+0x5c/0x60
[] \_\_asan\_load4+0x70/0x88
[] refcount\_dec\_and\_test+0x14/0xe0
[] ffs\_data\_put+0x80/0x320
[] ffs\_fs\_kill\_sb+0xc8/0x110
[] deactivate\_locked\_super+0x6c/0x98
[] deactivate\_super+0xb0/0xbc
[] cleanup\_mnt+0x64/0xec
[] \_\_cleanup\_mnt+0x10/0x18
[] task\_work\_run+0xcc/0x124
[] do\_notify\_resume+0x60/0x70
[] work\_pending+0x10/0x14
Cc: stable@vger.kernel.org
Signed-off-by: Xinyong
Signed-off-by: Felipe Balbi
Signed-off-by: Sasha Levin
commit eaca72671725b4bbaadfc3a0b07a3e26f285677c
Author: Pete Zaitcev
Date: Fri Mar 9 00:21:14 2018 -0600
usb: usbmon: Read text within supplied buffer size
[ Upstream commit a5f596830e27e15f7a0ecd6be55e433d776986d8 ]
This change fixes buffer overflows and silent data corruption with the
usbmon device driver text file read operations.
Signed-off-by: Fredrik Noring
Signed-off-by: Pete Zaitcev
Cc: stable
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit d3b9bf542f2883718fdf834cbcfc1e119357e0ba
Author: Julia Lawall
Date: Sat Dec 26 22:57:44 2015 +0100
USB: usbmon: remove assignment from IS\_ERR argument
[ Upstream commit 46c236dc7d1212d7417e6fb0317f91c44c719322 ]
The semantic patch that makes this change is as follows:
(http://coccinelle.lip6.fr/)
//
@@
expression e1,e2;
statement S1,S2;
@@
+e1 = e2;
if (IS\_ERR(
e1
- = e2
)) S1 else S2
//
Signed-off-by: Julia Lawall
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit 9f5f962296f9a21bc57e8dbedcbef1524530ef59
Author: Danilo Krummrich
Date: Tue Mar 6 09:38:49 2018 +0100
usb: quirks: add control message delay for 1b1c:1b20
[ Upstream commit cb88a0588717ba6c756cb5972d75766b273a6817 ]
Corsair Strafe RGB keyboard does not respond to usb control messages
sometimes and hence generates timeouts.
Commit de3af5bf259d ("usb: quirks: add delay init quirk for Corsair
Strafe RGB keyboard") tried to fix those timeouts by adding
USB\_QUIRK\_DELAY\_INIT.
Unfortunately, even with this quirk timeouts of usb\_control\_msg()
can still be seen, but with a lower frequency (approx. 1 out of 15):
[ 29.103520] usb 1-8: string descriptor 0 read error: -110
[ 34.363097] usb 1-8: can't set config #1, error -110
Adding further delays to different locations where usb control
messages are issued just moves the timeouts to other locations,
e.g.:
[ 35.400533] usbhid 1-8:1.0: can't add hid device: -110
[ 35.401014] usbhid: probe of 1-8:1.0 failed with error -110
The only way to reliably avoid those issues is having a pause after
each usb control message. In approx. 200 boot cycles no more timeouts
were seen.
Addionaly, keep USB\_QUIRK\_DELAY\_INIT as it turned out to be necessary
to have the delay in hub\_port\_connect() after hub\_port\_init().
The overall boot time seems not to be influenced by these additional
delays, even on fast machines and lightweight distributions.
Fixes: de3af5bf259d ("usb: quirks: add delay init quirk for Corsair Strafe RGB keyboard")
Cc: stable@vger.kernel.org
Signed-off-by: Danilo Krummrich
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit 393f7ace52afb3f2414607a6283ff80b52a3d7c1
Author: Teijo Kinnunen
Date: Thu Mar 1 19:34:29 2018 +0200
USB: storage: Add JMicron bridge 152d:2567 to unusual\_devs.h
[ Upstream commit 5126a504b63d82785eaece3a9c30c660b313785a ]
This USB-SATA controller seems to be similar with JMicron bridge
152d:2566 already on the list. Adding it here fixes "Invalid
field in cdb" errors.
Signed-off-by: Teijo Kinnunen
Cc: stable@vger.kernel.org
Acked-by: Alan Stern
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit e9d7c769996cb6504d8d8a68a22f793c72b17c2c
Author: Joel Fernandes
Date: Fri Feb 16 11:02:01 2018 -0800
staging: android: ashmem: Fix lockdep issue during llseek
[ Upstream commit cb57469c9573f6018cd1302953dd45d6e05aba7b ]
ashmem\_mutex create a chain of dependencies like so:
(1)
mmap syscall ->
mmap\_sem -> (acquired)
ashmem\_mmap
ashmem\_mutex (try to acquire)
(block)
(2)
llseek syscall ->
ashmem\_llseek ->
ashmem\_mutex -> (acquired)
inode\_lock ->
inode->i\_rwsem (try to acquire)
(block)
(3)
getdents ->
iterate\_dir ->
inode\_lock ->
inode->i\_rwsem (acquired)
copy\_to\_user ->
mmap\_sem (try to acquire)
There is a lock ordering created between mmap\_sem and inode->i\_rwsem
causing a lockdep splat [2] during a syzcaller test, this patch fixes
the issue by unlocking the mutex earlier. Functionally that's Ok since
we don't need to protect vfs\_llseek.
[1] https://patchwork.kernel.org/patch/10185031/
[2] https://lkml.org/lkml/2018/1/10/48
Acked-by: Todd Kjos
Cc: Arve Hjonnevag
Cc: stable@vger.kernel.org
Reported-by: syzbot+8ec30bb7bf1a981a2012@syzkaller.appspotmail.com
Signed-off-by: Joel Fernandes
Acked-by: Greg Hackmann
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit c9e4a51448705db3b5602fc39eec1cdbcfa7d3fe
Author: Oliver Neukum
Date: Tue Mar 6 15:04:24 2018 +0100
uas: fix comparison for error code
[ Upstream commit 9a513c905bb95bef79d96feb08621c1ec8d8c4bb ]
A typo broke the comparison.
Fixes: cbeef22fd611 ("usb: uas: unconditionally bring back host after reset")
Signed-off-by: Oliver Neukum
CC: stable@kernel.org
Acked-by: Hans de Goede
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit c3f500c453cca31080d5f95666b72d0656e58d0b
Author: Jonas Danielsson
Date: Mon Jan 29 12:39:15 2018 +0100
tty/serial: atmel: add new version check for usart
[ Upstream commit fd63a8903a2c40425a9811c3371dd4d0f42c0ad3 ]
On our at91sam9260 based board the usart0 and usart1 ports report
their versions (ATMEL\_US\_VERSION) as 0x10302. This version is not
included in the current checks in the driver.
Signed-off-by: Jonas Danielsson
Acked-by: Richard Genoud
Acked-by: Nicolas Ferre
Cc: stable
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit cbd081ae81bd92e7fe9d0f60c4752e781b43c14a
Author: Ulrich Hecht
Date: Thu Feb 15 13:02:27 2018 +0100
serial: sh-sci: prevent lockup on full TTY buffers
[ Upstream commit 7842055bfce4bf0170d0f61df8b2add8399697be ]
When the TTY buffers fill up to the configured maximum, a system lockup
occurs:
[ 598.820128] INFO: rcu\_preempt detected stalls on CPUs/tasks:
[ 598.825796] 0-...!: (1 GPs behind) idle=5a6/2/0 softirq=1974/1974 fqs=1
[ 598.832577] (detected by 3, t=62517 jiffies, g=296, c=295, q=126)
[ 598.838755] Task dump for CPU 0:
[ 598.841977] swapper/0 R running task 0 0 0 0x00000022
[ 598.849023] Call trace:
[ 598.851476] \_\_switch\_to+0x98/0xb0
[ 598.854870] (null)
This can be prevented by doing a dummy read of the RX data register.
This issue affects both HSCIF and SCIF ports. Reported for R-Car H3 ES2.0;
reproduced and fixed on H3 ES1.1. Probably affects other R-Car platforms
as well.
Reported-by: Yoshihiro Shimoda
Signed-off-by: Ulrich Hecht
Reviewed-by: Geert Uytterhoeven
Cc: stable
Tested-by: Nguyen Viet Dung
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Sasha Levin
commit ad395699fb8079d2ae046852b219f4d625cab4dd
Author: H.J. Lu
Date: Wed Feb 7 14:20:09 2018 -0800
x86: Treat R\_X86\_64\_PLT32 as R\_X86\_64\_PC32
[ Upstream commit b21ebf2fb4cde1618915a97cc773e287ff49173e ]
On i386, there are 2 types of PLTs, PIC and non-PIC. PIE and shared
objects must use PIC PLT. To use PIC PLT, you need to load
\_GLOBAL\_OFFSET\_TABLE\_ into EBX first. There is no need for that on
x86-64 since x86-64 uses PC-relative PLT.
On x86-64, for 32-bit PC-relative branches, we can generate PLT32
relocation, instead of PC32 relocation, which can also be used as
a marker for 32-bit PC-relative branches. Linker can always reduce
PLT32 relocation to PC32 if function is defined locally. Local
functions should use PC32 relocation. As far as Linux kernel is
concerned, R\_X86\_64\_PLT32 can be treated the same as R\_X86\_64\_PC32
since Linux kernel doesn't use PLT.
R\_X86\_64\_PLT32 for 32-bit PC-relative branches has been enabled in
binutils master branch which will become binutils 2.31.
[ hjl is working on having better documentation on this all, but a few
more notes from him:
"PLT32 relocation is used as marker for PC-relative branches. Because
of EBX, it looks odd to generate PLT32 relocation on i386 when EBX
doesn't have GOT.
As for symbol resolution, PLT32 and PC32 relocations are almost
interchangeable. But when linker sees PLT32 relocation against a
protected symbol, it can resolved locally at link-time since it is
used on a branch instruction. Linker can't do that for PC32
relocation"
but for the kernel use, the two are basically the same, and this
commit gets things building and working with the current binutils
master - Linus ]
Signed-off-by: H.J. Lu
Signed-off-by: Linus Torvalds
Signed-off-by: Sasha Levin
commit d94fe45effd5bab920a712f8a51f984591226eb8
Author: Josh Poimboeuf
Date: Fri Nov 3 07:58:54 2017 -0500
x86/module: Detect and skip invalid relocations
[ Upstream commit eda9cec4c9a12208a6f69fbe68f72a6311d50032 ]
There have been some cases where external tooling (e.g., kpatch-build)
creates a corrupt relocation which targets the wrong address. This is a
silent failure which can corrupt memory in unexpected places.
On x86, the bytes of data being overwritten by relocations are always
initialized to zero beforehand. Use that knowledge to add sanity checks
to detect such cases before they corrupt memory.
Signed-off-by: Josh Poimboeuf
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: jeyu@kernel.org
Cc: live-patching@vger.kernel.org
Link: http://lkml.kernel.org/r/37450d6c6225e54db107fba447ce9e56e5f758e9.1509713553.git.jpoimboe@redhat.com
[ Restructured the messages, as it's unclear whether the relocation or the target is corrupted. ]
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
commit e9e966cfa034143a0259cbd7a910ba7a0c016776
Author: Quinn Tran
Date: Mon Dec 4 14:45:10 2017 -0800
scsi: qla2xxx: Replace fcport alloc with qla2x00\_alloc\_fcport
[ Upstream commit 063b36d6b0ad74c748d536f5cb47bac2f850a0fa ]
Current code manually allocate an fcport structure that is not properly
initialize. Replace kzalloc with qla2x00\_alloc\_fcport, so that all
fields are initialized. Also set set scan flag to port found
Cc:
Signed-off-by: Quinn Tran
Signed-off-by: Himanshu Madhani
Reviewed-by: Hannes Reinecke
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 27ec5b63df0f28ad9d5d11d2accbcdbb5b171233
Author: Clay McClure
Date: Thu Sep 21 19:01:34 2017 -0700
ubi: Fix race condition between ubi volume creation and udev
[ Upstream commit a51a0c8d213594bc094cb8e54aad0cb6d7f7b9a6 ]
Similar to commit 714fb87e8bc0 ("ubi: Fix race condition between ubi
device creation and udev"), we should make the volume active before
registering it.
Signed-off-by: Clay McClure
Cc:
Signed-off-by: Richard Weinberger
Signed-off-by: Sasha Levin
commit 214f6efcaa61fc2ec8682aee94aa87938e157fe6
Author: Florian Westphal
Date: Mon Feb 19 08:10:17 2018 +0100
netfilter: ipv6: fix use-after-free Write in nf\_nat\_ipv6\_manip\_pkt
[ Upstream commit b078556aecd791b0e5cb3a59f4c3a14273b52121 ]
l4proto->manip\_pkt() can cause reallocation of skb head so pointer
to the ipv6 header must be reloaded.
Reported-and-tested-by:
Fixes: 58a317f1061c89 ("netfilter: ipv6: add IPv6 NAT support")
Signed-off-by: Florian Westphal
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Sasha Levin
commit b809f906144dc68bcff91ab74da723fddfcd8061
Author: Florian Westphal
Date: Mon Feb 19 03:01:45 2018 +0100
netfilter: bridge: ebt\_among: add missing match size checks
[ Upstream commit c4585a2823edf4d1326da44d1524ecbfda26bb37 ]
ebt\_among is special, it has a dynamic match size and is exempt
from the central size checks.
Therefore it must check that the size of the match structure
provided from userspace is sane by making sure em->match\_size
is at least the minimum size of the expected structure.
The module has such a check, but its only done after accessing
a structure that might be out of bounds.
tested with: ebtables -A INPUT ... \
--among-dst fe:fe:fe:fe:fe:fe
--among-dst fe:fe:fe:fe:fe:fe --among-src fe:fe:fe:fe:ff:f,fe:fe:fe:fe:fe:fb,fe:fe:fe:fe:fc:fd,fe:fe:fe:fe:fe:fd,fe:fe:fe:fe:fe:fe
--among-src fe:fe:fe:fe:ff:f,fe:fe:fe:fe:fe:fa,fe:fe:fe:fe:fe:fd,fe:fe:fe:fe:fe:fe,fe:fe:fe:fe:fe:fe
Reported-by:
Signed-off-by: Florian Westphal
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Sasha Levin
commit 1829a59ba6e8fa6467ea4607cf086b5e2d8d6426
Author: Florian Westphal
Date: Mon Feb 19 01:24:15 2018 +0100
netfilter: ebtables: CONFIG\_COMPAT: don't trust userland offsets
[ Upstream commit b71812168571fa55e44cdd0254471331b9c4c4c6 ]
We need to make sure the offsets are not out of range of the
total size.
Also check that they are in ascending order.
The WARN\_ON triggered by syzkaller (it sets panic\_on\_warn) is
changed to also bail out, no point in continuing parsing.
Briefly tested with simple ruleset of
-A INPUT --limit 1/s' --log
plus jump to custom chains using 32bit ebtables binary.
Reported-by:
Signed-off-by: Florian Westphal
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Sasha Levin
commit b5cafa9c30968456ad45407d92418cd23c5c4e7c
Author: Eric Dumazet
Date: Fri Feb 16 19:36:28 2018 -0800
netfilter: IDLETIMER: be syzkaller friendly
[ Upstream commit cfc2c740533368b96e2be5e0a4e8c3cace7d9814 ]
We had one report from syzkaller [1]
First issue is that INIT\_WORK() should be done before mod\_timer()
or we risk timer being fired too soon, even with a 1 second timer.
Second issue is that we need to reject too big info->timeout
to avoid overflows in msecs\_to\_jiffies(info->timeout \* 1000), or
risk looping, if result after overflow is 0.
[1]
WARNING: CPU: 1 PID: 5129 at kernel/workqueue.c:1444 \_\_queue\_work+0xdf4/0x1230 kernel/workqueue.c:1444
Kernel panic - not syncing: panic\_on\_warn set ...
CPU: 1 PID: 5129 Comm: syzkaller159866 Not tainted 4.16.0-rc1+ #230
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
\_\_dump\_stack lib/dump\_stack.c:17 [inline]
dump\_stack+0x194/0x257 lib/dump\_stack.c:53
panic+0x1e4/0x41c kernel/panic.c:183
\_\_warn+0x1dc/0x200 kernel/panic.c:547
report\_bug+0x211/0x2d0 lib/bug.c:184
fixup\_bug.part.11+0x37/0x80 arch/x86/kernel/traps.c:178
fixup\_bug arch/x86/kernel/traps.c:247 [inline]
do\_error\_trap+0x2d7/0x3e0 arch/x86/kernel/traps.c:296
do\_invalid\_op+0x1b/0x20 arch/x86/kernel/traps.c:315
invalid\_op+0x22/0x40 arch/x86/entry/entry\_64.S:988
RIP: 0010:\_\_queue\_work+0xdf4/0x1230 kernel/workqueue.c:1444
RSP: 0018:ffff8801db507538 EFLAGS: 00010006
RAX: ffff8801aeb46080 RBX: ffff8801db530200 RCX: ffffffff81481404
RDX: 0000000000000100 RSI: ffffffff86b42640 RDI: 0000000000000082
RBP: ffff8801db507758 R08: 1ffff1003b6a0de5 R09: 000000000000000c
R10: ffff8801db5073f0 R11: 0000000000000020 R12: 1ffff1003b6a0eb6
R13: ffff8801b1067ae0 R14: 00000000000001f8 R15: dffffc0000000000
queue\_work\_on+0x16a/0x1c0 kernel/workqueue.c:1488
queue\_work include/linux/workqueue.h:488 [inline]
schedule\_work include/linux/workqueue.h:546 [inline]
idletimer\_tg\_expired+0x44/0x60 net/netfilter/xt\_IDLETIMER.c:116
call\_timer\_fn+0x228/0x820 kernel/time/timer.c:1326
expire\_timers kernel/time/timer.c:1363 [inline]
\_\_run\_timers+0x7ee/0xb70 kernel/time/timer.c:1666
run\_timer\_softirq+0x4c/0x70 kernel/time/timer.c:1692
\_\_do\_softirq+0x2d7/0xb85 kernel/softirq.c:285
invoke\_softirq kernel/softirq.c:365 [inline]
irq\_exit+0x1cc/0x200 kernel/softirq.c:405
exiting\_irq arch/x86/include/asm/apic.h:541 [inline]
smp\_apic\_timer\_interrupt+0x16b/0x700 arch/x86/kernel/apic/apic.c:1052
apic\_timer\_interrupt+0xa9/0xb0 arch/x86/entry/entry\_64.S:829

RIP: 0010:arch\_local\_irq\_restore arch/x86/include/asm/paravirt.h:777 [inline]
RIP: 0010:\_\_raw\_spin\_unlock\_irqrestore include/linux/spinlock\_api\_smp.h:160 [inline]
RIP: 0010:\_raw\_spin\_unlock\_irqrestore+0x5e/0xba kernel/locking/spinlock.c:184
RSP: 0018:ffff8801c20173c8 EFLAGS: 00000282 ORIG\_RAX: ffffffffffffff12
RAX: dffffc0000000000 RBX: 0000000000000282 RCX: 0000000000000006
RDX: 1ffffffff0d592cd RSI: 1ffff10035d68d23 RDI: 0000000000000282
RBP: ffff8801c20173d8 R08: 1ffff10038402e47 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000000 R12: ffffffff8820e5c8
R13: ffff8801b1067ad8 R14: ffff8801aea7c268 R15: ffff8801aea7c278
\_\_debug\_object\_init+0x235/0x1040 lib/debugobjects.c:378
debug\_object\_init+0x17/0x20 lib/debugobjects.c:391
\_\_init\_work+0x2b/0x60 kernel/workqueue.c:506
idletimer\_tg\_create net/netfilter/xt\_IDLETIMER.c:152 [inline]
idletimer\_tg\_checkentry+0x691/0xb00 net/netfilter/xt\_IDLETIMER.c:213
xt\_check\_target+0x22c/0x7d0 net/netfilter/x\_tables.c:850
check\_target net/ipv6/netfilter/ip6\_tables.c:533 [inline]
find\_check\_entry.isra.7+0x935/0xcf0 net/ipv6/netfilter/ip6\_tables.c:575
translate\_table+0xf52/0x1690 net/ipv6/netfilter/ip6\_tables.c:744
do\_replace net/ipv6/netfilter/ip6\_tables.c:1160 [inline]
do\_ip6t\_set\_ctl+0x370/0x5f0 net/ipv6/netfilter/ip6\_tables.c:1686
nf\_sockopt net/netfilter/nf\_sockopt.c:106 [inline]
nf\_setsockopt+0x67/0xc0 net/netfilter/nf\_sockopt.c:115
ipv6\_setsockopt+0x10b/0x130 net/ipv6/ipv6\_sockglue.c:927
udpv6\_setsockopt+0x45/0x80 net/ipv6/udp.c:1422
sock\_common\_setsockopt+0x95/0xd0 net/core/sock.c:2976
SYSC\_setsockopt net/socket.c:1850 [inline]
SyS\_setsockopt+0x189/0x360 net/socket.c:1829
do\_syscall\_64+0x282/0x940 arch/x86/entry/common.c:287
Fixes: 0902b469bd25 ("netfilter: xtables: idletimer target implementation")
Signed-off-by: Eric Dumazet
Reported-by: syzkaller
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Sasha Levin
commit 3b3cd683ed5cc59e64b241fc9623f87f4b5af83c
Author: Paolo Abeni
Date: Wed Feb 14 17:21:19 2018 +0100
netfilter: nat: cope with negative port range
[ Upstream commit db57ccf0f2f4624b4c4758379f8165277504fbd7 ]
syzbot reported a division by 0 bug in the netfilter nat code:
divide error: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 1 PID: 4168 Comm: syzkaller034710 Not tainted 4.16.0-rc1+ #309
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS
Google 01/01/2011
RIP: 0010:nf\_nat\_l4proto\_unique\_tuple+0x291/0x530
net/netfilter/nf\_nat\_proto\_common.c:88
RSP: 0018:ffff8801b2466778 EFLAGS: 00010246
RAX: 000000000000f153 RBX: ffff8801b2466dd8 RCX: ffff8801b2466c7c
RDX: 0000000000000000 RSI: ffff8801b2466c58 RDI: ffff8801db5293ac
RBP: ffff8801b24667d8 R08: ffff8801b8ba6dc0 R09: ffffffff88af5900
R10: ffff8801b24666f0 R11: 0000000000000000 R12: 000000002990f153
R13: 0000000000000001 R14: 0000000000000000 R15: ffff8801b2466c7c
FS: 00000000017e3880(0000) GS:ffff8801db500000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000208fdfe4 CR3: 00000001b5340002 CR4: 00000000001606e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
dccp\_unique\_tuple+0x40/0x50 net/netfilter/nf\_nat\_proto\_dccp.c:30
get\_unique\_tuple+0xc28/0x1c10 net/netfilter/nf\_nat\_core.c:362
nf\_nat\_setup\_info+0x1c2/0xe00 net/netfilter/nf\_nat\_core.c:406
nf\_nat\_redirect\_ipv6+0x306/0x730 net/netfilter/nf\_nat\_redirect.c:124
redirect\_tg6+0x7f/0xb0 net/netfilter/xt\_REDIRECT.c:34
ip6t\_do\_table+0xc2a/0x1a30 net/ipv6/netfilter/ip6\_tables.c:365
ip6table\_nat\_do\_chain+0x65/0x80 net/ipv6/netfilter/ip6table\_nat.c:41
nf\_nat\_ipv6\_fn+0x594/0xa80 net/ipv6/netfilter/nf\_nat\_l3proto\_ipv6.c:302
nf\_nat\_ipv6\_local\_fn+0x33/0x5d0
net/ipv6/netfilter/nf\_nat\_l3proto\_ipv6.c:407
ip6table\_nat\_local\_fn+0x2c/0x40 net/ipv6/netfilter/ip6table\_nat.c:69
nf\_hook\_entry\_hookfn include/linux/netfilter.h:120 [inline]
nf\_hook\_slow+0xba/0x1a0 net/netfilter/core.c:483
nf\_hook include/linux/netfilter.h:243 [inline]
NF\_HOOK include/linux/netfilter.h:286 [inline]
ip6\_xmit+0x10ec/0x2260 net/ipv6/ip6\_output.c:277
inet6\_csk\_xmit+0x2fc/0x580 net/ipv6/inet6\_connection\_sock.c:139
dccp\_transmit\_skb+0x9ac/0x10f0 net/dccp/output.c:142
dccp\_connect+0x369/0x670 net/dccp/output.c:564
dccp\_v6\_connect+0xe17/0x1bf0 net/dccp/ipv6.c:946
\_\_inet\_stream\_connect+0x2d4/0xf00 net/ipv4/af\_inet.c:620
inet\_stream\_connect+0x58/0xa0 net/ipv4/af\_inet.c:684
SYSC\_connect+0x213/0x4a0 net/socket.c:1639
SyS\_connect+0x24/0x30 net/socket.c:1620
do\_syscall\_64+0x282/0x940 arch/x86/entry/common.c:287
entry\_SYSCALL\_64\_after\_hwframe+0x26/0x9b
RIP: 0033:0x441c69
RSP: 002b:00007ffe50cc0be8 EFLAGS: 00000217 ORIG\_RAX: 000000000000002a
RAX: ffffffffffffffda RBX: ffffffffffffffff RCX: 0000000000441c69
RDX: 000000000000001c RSI: 00000000208fdfe4 RDI: 0000000000000003
RBP: 00000000006cc018 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000538 R11: 0000000000000217 R12: 0000000000403590
R13: 0000000000403620 R14: 0000000000000000 R15: 0000000000000000
Code: 48 89 f0 83 e0 07 83 c0 01 38 d0 7c 08 84 d2 0f 85 46 02 00 00 48 8b
45 c8 44 0f b7 20 e8 88 97 04 fd 31 d2 41 0f b7 c4 4c 89 f9 <41> f7 f6 48
c1 e9 03 48 b8 00 00 00 00 00 fc ff df 0f b6 0c 01
RIP: nf\_nat\_l4proto\_unique\_tuple+0x291/0x530
net/netfilter/nf\_nat\_proto\_common.c:88 RSP: ffff8801b2466778
The problem is that currently we don't have any check on the
configured port range. A port range == -1 triggers the bug, while
other negative values may require a very long time to complete the
following loop.
This commit addresses the issue swapping the two ends on negative
ranges. The check is performed in nf\_nat\_l4proto\_unique\_tuple() since
the nft nat loads the port values from nft registers at runtime.
v1 -> v2: use the correct 'Fixes' tag
v2 -> v3: update commit message, drop unneeded READ\_ONCE()
Fixes: 5b1158e909ec ("[NETFILTER]: Add NAT support for nf\_conntrack")
Reported-by: syzbot+8012e198bd037f4871e5@syzkaller.appspotmail.com
Signed-off-by: Paolo Abeni
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Sasha Levin
commit f47abc8f5377ae3abf247f34ff4cf478f60ad2b4
Author: Paolo Abeni
Date: Mon Feb 12 18:49:39 2018 +0100
netfilter: x\_tables: fix missing timer initialization in xt\_LED
[ Upstream commit 10414014bc085aac9f787a5890b33b5605fbcfc4 ]
syzbot reported that xt\_LED may try to use the ledinternal->timer
without previously initializing it:
------------[ cut here ]------------
kernel BUG at kernel/time/timer.c:958!
invalid opcode: 0000 [#1] SMP KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 1 PID: 1826 Comm: kworker/1:2 Not tainted 4.15.0+ #306
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS
Google 01/01/2011
Workqueue: ipv6\_addrconf addrconf\_dad\_work
RIP: 0010:\_\_mod\_timer kernel/time/timer.c:958 [inline]
RIP: 0010:mod\_timer+0x7d6/0x13c0 kernel/time/timer.c:1102
RSP: 0018:ffff8801d24fe9f8 EFLAGS: 00010293
RAX: ffff8801d25246c0 RBX: ffff8801aec6cb50 RCX: ffffffff816052c6
RDX: 0000000000000000 RSI: 00000000fffbd14b RDI: ffff8801aec6cb68
RBP: ffff8801d24fec98 R08: 0000000000000000 R09: 1ffff1003a49fd6c
R10: ffff8801d24feb28 R11: 0000000000000005 R12: dffffc0000000000
R13: ffff8801d24fec70 R14: 00000000fffbd14b R15: ffff8801af608f90
FS: 0000000000000000(0000) GS:ffff8801db500000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000206d6fd0 CR3: 0000000006a22001 CR4: 00000000001606e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
led\_tg+0x1db/0x2e0 net/netfilter/xt\_LED.c:75
ip6t\_do\_table+0xc2a/0x1a30 net/ipv6/netfilter/ip6\_tables.c:365
ip6table\_raw\_hook+0x65/0x80 net/ipv6/netfilter/ip6table\_raw.c:42
nf\_hook\_entry\_hookfn include/linux/netfilter.h:120 [inline]
nf\_hook\_slow+0xba/0x1a0 net/netfilter/core.c:483
nf\_hook.constprop.27+0x3f6/0x830 include/linux/netfilter.h:243
NF\_HOOK include/linux/netfilter.h:286 [inline]
ndisc\_send\_skb+0xa51/0x1370 net/ipv6/ndisc.c:491
ndisc\_send\_ns+0x38a/0x870 net/ipv6/ndisc.c:633
addrconf\_dad\_work+0xb9e/0x1320 net/ipv6/addrconf.c:4008
process\_one\_work+0xbbf/0x1af0 kernel/workqueue.c:2113
worker\_thread+0x223/0x1990 kernel/workqueue.c:2247
kthread+0x33c/0x400 kernel/kthread.c:238
ret\_from\_fork+0x3a/0x50 arch/x86/entry/entry\_64.S:429
Code: 85 2a 0b 00 00 4d 8b 3c 24 4d 85 ff 75 9f 4c 8b bd 60 fd ff ff e8 bb
57 10 00 65 ff 0d 94 9a a1 7e e9 d9 fc ff ff e8 aa 57 10 00 <0f> 0b e8 a3
57 10 00 e9 14 fb ff ff e8 99 57 10 00 4c 89 bd 70
RIP: \_\_mod\_timer kernel/time/timer.c:958 [inline] RSP: ffff8801d24fe9f8
RIP: mod\_timer+0x7d6/0x13c0 kernel/time/timer.c:1102 RSP: ffff8801d24fe9f8
---[ end trace f661ab06f5dd8b3d ]---
The ledinternal struct can be shared between several different
xt\_LED targets, but the related timer is currently initialized only
if the first target requires it. Fix it by unconditionally
initializing the timer struct.
v1 -> v2: call del\_timer\_sync() unconditionally, too.
Fixes: 268cb38e1802 ("netfilter: x\_tables: add LED trigger target")
Reported-by: syzbot+10c98dc5725c6c8fc7fb@syzkaller.appspotmail.com
Signed-off-by: Paolo Abeni
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Sasha Levin
commit d60591c4ecb4881b0ed8207b1c300086e6d070b7
Author: Dmitry Torokhov
Date: Mon Feb 13 15:45:59 2017 -0800
Input: tca8418\_keypad - remove double read of key event register
[ Upstream commit 9dd46c02532a6bed6240101ecf4bbc407f8c6adf ]
There is no need to tread the same register twice in a row.
Fixes: ea4348c8462a ("Input: tca8418\_keypad - hide gcc-4.9 -Wmaybe-un ...")
Signed-off-by: Dmitry Torokhov
Signed-off-by: Sasha Levin
commit 8ccc19c2be1dcbcf049eaf2435213df862a687cf
Author: Arnd Bergmann
Date: Wed Dec 6 14:17:17 2017 +0100
ARM: omap2: hide omap3\_save\_secure\_ram on non-OMAP3 builds
[ Upstream commit 863204cfdae98626a92535ac928ad79f4d6b74ff ]
In configurations without CONFIG\_OMAP3 but with secure RAM support,
we now run into a link failure:
arch/arm/mach-omap2/omap-secure.o: In function `omap3\_save\_secure\_ram':
omap-secure.c:(.text+0x130): undefined reference to `save\_secure\_ram\_context'
The omap3\_save\_secure\_ram() function is only called from the OMAP34xx
power management code, so we can simply hide that function in the
appropriate #ifdef.
Fixes: d09220a887f7 ("ARM: OMAP2+: Fix SRAM virt to phys translation for save\_secure\_ram\_context")
Acked-by: Tony Lindgren
Tested-by: Dan Murphy
Signed-off-by: Arnd Bergmann
Signed-off-by: Sasha Levin
commit 41f9f2536b35b6e70d1f968d83f06b5c2ec87700
Author: Arnd Bergmann
Date: Wed Dec 6 22:02:37 2017 +0100
watchdog: hpwdt: fix unused variable warning
[ Upstream commit aeebc6ba88ba3758ad95467ff6191fabf2074c13 ]
The new hpwdt\_my\_nmi() function is used conditionally, which produces
a harmless warning in some configurations:
drivers/watchdog/hpwdt.c:478:12: error: 'hpwdt\_my\_nmi' defined but not used [-Werror=unused-function]
This moves it inside of the #ifdef that protects its caller, to silence
the warning.
Fixes: 621174a92851 ("watchdog: hpwdt: Check source of NMI")
Signed-off-by: Arnd Bergmann
Reviewed-by: Jerry Hoemann
Reviewed-by: Guenter Roeck
Signed-off-by: Guenter Roeck
Signed-off-by: Wim Van Sebroeck
Signed-off-by: Sasha Levin
commit ad0276f98ccd3021c2031076868d723fa318268c
Author: Jerry Hoemann
Date: Mon Oct 23 16:46:17 2017 -0600
watchdog: hpwdt: Check source of NMI
[ Upstream commit 838534e50e2e5c1e644e30ab6cb28da88eb31368 ]
Do not claim the NMI (i.e. return NMI\_DONE) if the source of
the NMI isn't the iLO watchdog or debug.
Signed-off-by: Jerry Hoemann
Reviewed-by: Guenter Roeck
Signed-off-by: Guenter Roeck
Signed-off-by: Wim Van Sebroeck
Signed-off-by: Sasha Levin
commit 7762606087faf75a578453682be5d18e76e173ca
Author: Jerry Hoemann
Date: Mon Oct 23 16:46:16 2017 -0600
watchdog: hpwdt: SMBIOS check
[ Upstream commit c42cbe41727a138905a28f8e0b00c147be77ee93 ]
This corrects:
commit cce78da76601 ("watchdog: hpwdt: Add check for UEFI bits")
The test on HPE SMBIOS extension type 219 record "Misc Features"
bits for UEFI support is incorrect. The definition of the Misc Features
bits in the HPE SMBIOS OEM Extensions specification (and related
firmware) was changed to use a different pair of bits to
represent UEFI supported. Howerver, a corresponding change
to Linux was missed.
Current code/platform work because the iCRU test is working.
But purpose of cce78da766 is to ensure correct functionality
on future systems where iCRU isn't supported.
Signed-off-by: Jerry Hoemann
Reviewed-by: Guenter Roeck
Signed-off-by: Guenter Roeck
Signed-off-by: Wim Van Sebroeck
Signed-off-by: Sasha Levin
commit 173cadebc5067dc67328505a072feed867cb79e2
Author: Dan Williams
Date: Fri Feb 16 13:20:54 2018 -0800
nospec: Include  dependency
[ Upstream commit eb6174f6d1be16b19cfa43dac296bfed003ce1a6 ]
The nospec.h header expects the per-architecture header file
 to optionally define array\_index\_mask\_nospec(). Include
that dependency to prevent inadvertent fallback to the default
array\_index\_mask\_nospec() implementation.
The default implementation may not provide a full mitigation
on architectures that perform data value speculation.
Reported-by: Christian Borntraeger
Signed-off-by: Dan Williams
Cc: Andy Lutomirski
Cc: Arjan van de Ven
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: David Woodhouse
Cc: Greg Kroah-Hartman
Cc: Josh Poimboeuf
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Cc: linux-arch@vger.kernel.org
Link: http://lkml.kernel.org/r/151881605404.17395.1341935530792574707.stgit@dwillia2-desk3.amr.corp.intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
commit 0bbe623302abae2bf88baac4fd1888d87bbb6ef7
Author: Takashi Iwai
Date: Mon Mar 5 22:06:09 2018 +0100
ALSA: seq: More protection for concurrent write and ioctl races
[ Upstream commit 7bd80091567789f1c0cb70eb4737aac8bcd2b6b9 ]
This patch is an attempt for further hardening against races between
the concurrent write and ioctls. The previous fix d15d662e89fc
("ALSA: seq: Fix racy pool initializations") covered the race of the
pool initialization at writer and the pool resize ioctl by the
client->ioctl\_mutex (CVE-2018-1000004). However, basically this mutex
should be applied more widely to the whole write operation for
avoiding the unexpected pool operations by another thread.
The only change outside snd\_seq\_write() is the additional mutex
argument to helper functions, so that we can unlock / relock the given
mutex temporarily during schedule() call for blocking write.
Fixes: d15d662e89fc ("ALSA: seq: Fix racy pool initializations")
Reported-by: 范龙飞
Reported-by: Nicolai Stange
Reviewed-and-tested-by: Nicolai Stange
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Sasha Levin
commit 282e27a729a6f766354e39a35f4e77f615a8e2ac
Author: Takashi Iwai
Date: Mon Mar 5 22:00:55 2018 +0100
ALSA: seq: Don't allow resizing pool in use
[ Upstream commit d85739367c6d56e475c281945c68fdb05ca74b4c ]
This is a fix for a (sort of) fallout in the recent commit
d15d662e89fc ("ALSA: seq: Fix racy pool initializations") for
CVE-2018-1000004.
As the pool resize deletes the existing cells, it may lead to a race
when another thread is writing concurrently, eventually resulting a
UAF.
A simple workaround is not to allow the pool resizing when the pool is
in use. It's an invalid behavior in anyway.
Fixes: d15d662e89fc ("ALSA: seq: Fix racy pool initializations")
Reported-by: 范龙飞
Reported-by: Nicolai Stange
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Sasha Levin
commit 408a75c61488c890b036edee412665aefad21367
Author: Takashi Iwai
Date: Tue Mar 6 12:14:17 2018 +0100
ALSA: hda/realtek - Fix dock line-out volume on Dell Precision 7520
[ Upstream commit e312a869cd726c698a75caca0d9e5c22fd3f1534 ]
The dock line-out pin (NID 0x17 of ALC3254 codec) on Dell Precision
7520 may route to three different DACs, 0x02, 0x03 and 0x06. The
first two DACS have the volume amp controls while the last one
doesn't. And unfortunately, the auto-parser assigns this pin to DAC3,
resulting in the non-working volume control for the line out.
Fix it by disabling the routing to DAC3 on the corresponding pin.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=199029
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Sasha Levin
commit 39a50471ea262c0a21d22d1c9a8d4c1bcac39865
Author: Seunghun Han
Date: Tue Mar 6 15:21:43 2018 +0100
x86/MCE: Serialize sysfs changes
[ Upstream commit b3b7c4795ccab5be71f080774c45bbbcc75c2aaf ]
The check\_interval file in
/sys/devices/system/machinecheck/machinecheck
directory is a global timer value for MCE polling. If it is changed by one
CPU, mce\_restart() broadcasts the event to other CPUs to delete and restart
the MCE polling timer and \_\_mcheck\_cpu\_init\_timer() reinitializes the
mce\_timer variable.
If more than one CPU writes a specific value to the check\_interval file
concurrently, mce\_timer is not protected from such concurrent accesses and
all kinds of explosions happen. Since only root can write to those sysfs
variables, the issue is not a big deal security-wise.
However, concurrent writes to these configuration variables is void of
reason so the proper thing to do is to serialize the access with a mutex.
Boris:
- Make store\_int\_with\_restart() use device\_store\_ulong() to filter out
negative intervals
- Limit min interval to 1 second
- Correct locking
- Massage commit message
Signed-off-by: Seunghun Han
Signed-off-by: Borislav Petkov
Signed-off-by: Thomas Gleixner
Cc: Greg Kroah-Hartman
Cc: Tony Luck
Cc: linux-edac
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/20180302202706.9434-1-kkamagui@gmail.com
Signed-off-by: Sasha Levin
commit b5369b906e8b3adc308668c9479325bf01f7b113
Author: Michael Lyle
Date: Mon Mar 5 13:41:55 2018 -0800
bcache: don't attach backing with duplicate UUID
[ Upstream commit 86755b7a96faed57f910f9e6b8061e019ac1ec08 ]
This can happen e.g. during disk cloning.
This is an incomplete fix: it does not catch duplicate UUIDs earlier
when things are still unattached. It does not unregister the device.
Further changes to cope better with this are planned but conflict with
Coly's ongoing improvements to handling device errors. In the meantime,
one can manually stop the device after this has happened.
Attempts to attach a duplicate device result in:
[ 136.372404] loop: module loaded
[ 136.424461] bcache: register\_bdev() registered backing device loop0
[ 136.424464] bcache: bch\_cached\_dev\_attach() Tried to attach loop0 but duplicate UUID already attached
My test procedure is:
dd if=/dev/sdb1 of=imgfile bs=1024 count=262144
losetup -f imgfile
Signed-off-by: Michael Lyle
Reviewed-by: Tang Junhui
Cc:
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
commit f8ea20b307284e04ec2bee4ab04d25fb50bc7471
Author: Ross Zwisler
Date: Fri Mar 9 08:36:36 2018 -0700
loop: Fix lost writes caused by missing flag
[ Upstream commit 1d037577c323e5090ce281e96bc313ab2eee5be2 ]
The following commit:
commit aa4d86163e4e ("block: loop: switch to VFS ITER\_BVEC")
replaced \_\_do\_lo\_send\_write(), which used ITER\_KVEC iterators, with
lo\_write\_bvec() which uses ITER\_BVEC iterators. In this change, though,
the WRITE flag was lost:
- iov\_iter\_kvec(&from, ITER\_KVEC | WRITE, &kvec, 1, len);
+ iov\_iter\_bvec(&i, ITER\_BVEC, bvec, 1, bvec->bv\_len);
This flag is necessary for the DAX case because we make decisions based on
whether or not the iterator is a READ or a WRITE in dax\_iomap\_actor() and
in dax\_iomap\_rw().
We end up going through this path in configurations where we combine a PMEM
device with 4k sectors, a loopback device and DAX. The consequence of this
missed flag is that what we intend as a write actually turns into a read in
the DAX code, so no data is ever written.
The very simplest test case is to create a loopback device and try and
write a small string to it, then hexdump a few bytes of the device to see
if the write took. Without this patch you read back all zeros, with this
you read back the string you wrote.
For XFS this causes us to fail or panic during the following xfstests:
xfs/074 xfs/078 xfs/216 xfs/217 xfs/250
For ext4 we have a similar issue where writes never happen, but we don't
currently have any xfstests that use loopback and show this issue.
Fix this by restoring the WRITE flag argument to iov\_iter\_bvec(). This
causes the xfstests to all pass.
Cc: Al Viro
Cc: stable@vger.kernel.org
Fixes: commit aa4d86163e4e ("block: loop: switch to VFS ITER\_BVEC")
Reviewed-by: Christoph Hellwig
Reviewed-by: Ming Lei
Signed-off-by: Ross Zwisler
Signed-off-by: Jens Axboe
Signed-off-by: Sasha Levin
commit 936e8ebcf50def09af88702a3875c3ad0a522cf4
Author: Zhang Bo
Date: Mon Feb 5 14:56:21 2018 -0800
Input: matrix\_keypad - fix race when disabling interrupts
[ Upstream commit ea4f7bd2aca9f68470e9aac0fc9432fd180b1fe7 ]
If matrix\_keypad\_stop() is executing and the keypad interrupt is triggered,
disable\_row\_irqs() may be called by both matrix\_keypad\_interrupt() and
matrix\_keypad\_stop() at the same time, causing interrupts to be disabled
twice and the keypad being "stuck" after resuming.
Take lock when setting keypad->stopped to ensure that ISR will not race
with matrix\_keypad\_stop() disabling interrupts.
Signed-off-by: Zhang Bo
Cc: stable@vger.kernel.org
Signed-off-by: Dmitry Torokhov
Signed-off-by: Sasha Levin
commit 234d93b6412fd5f670ba4a705005a4f2fdac4a2f
Author: Colin Ian King
Date: Thu Feb 22 18:08:53 2018 +0000
MIPS: OCTEON: irq: Check for null return on kzalloc allocation
[ Upstream commit 902f4d067a50ccf645a58dd5fb1d113b6e0f9b5b ]
The allocation of host\_data is not null checked, leading to a null
pointer dereference if the allocation fails. Fix this by adding a null
check and return with -ENOMEM.
Fixes: 64b139f97c01 ("MIPS: OCTEON: irq: add CIB and other fixes")
Signed-off-by: Colin Ian King
Acked-by: David Daney
Cc: Ralf Baechle
Cc: "Steven J. Hill"
Cc: linux-mips@linux-mips.org
Cc:  # 4.0+
Patchwork: https://patchwork.linux-mips.org/patch/18658/
Signed-off-by: James Hogan
Signed-off-by: Sasha Levin
commit 35c2a6d45dde1dc8ec418bf4a467b059500237f1
Author: Colin Ian King
Date: Thu Feb 22 17:50:12 2018 +0000
MIPS: ath25: Check for kzalloc allocation failure
[ Upstream commit 1b22b4b28fd5fbc51855219e3238b3ab81da8466 ]
Currently there is no null check on a failed allocation of board\_data,
and hence a null pointer dereference will occurr. Fix this by checking
for the out of memory null pointer.
Fixes: a7473717483e ("MIPS: ath25: add board configuration detection")
Signed-off-by: Colin Ian King
Cc: Ralf Baechle
Cc: linux-mips@linux-mips.org
Cc:  # 3.19+
Patchwork: https://patchwork.linux-mips.org/patch/18657/
Signed-off-by: James Hogan
Signed-off-by: Sasha Levin
commit d2d87618ef5828045d38cf29970d935f9f4c9230
Author: Justin Chen
Date: Wed Sep 27 17:15:15 2017 -0700
MIPS: BMIPS: Do not mask IPIs during suspend
[ Upstream commit 06a3f0c9f2725f5d7c63c4203839373c9bd00c28 ]
Commit a3e6c1eff548 ("MIPS: IRQ: Fix disable\_irq on CPU IRQs") fixes an
issue where disable\_irq did not actually disable the irq. The bug caused
our IPIs to not be disabled, which actually is the correct behavior.
With the addition of commit a3e6c1eff548 ("MIPS: IRQ: Fix disable\_irq on
CPU IRQs"), the IPIs were getting disabled going into suspend, thus
schedule\_ipi() was not being called. This caused deadlocks where
schedulable task were not being scheduled and other cpus were waiting
for them to do something.
Add the IRQF\_NO\_SUSPEND flag so an irq\_disable will not be called on the
IPIs during suspend.
Signed-off-by: Justin Chen
Fixes: a3e6c1eff548 ("MIPS: IRQ: Fix disabled\_irq on CPU IRQs")
Cc: Florian Fainelli
Cc: linux-mips@linux-mips.org
Cc: stable@vger.kernel.org
Patchwork: https://patchwork.linux-mips.org/patch/17385/
[jhogan@kernel.org: checkpatch: wrap long lines and fix commit refs]
Signed-off-by: James Hogan
Signed-off-by: Sasha Levin
commit 83cc4eea5dfe4d2912dde9436227941b4c34bb39
Author: Alex Deucher
Date: Thu Mar 1 11:03:27 2018 -0500
drm/radeon: fix KV harvesting
[ Upstream commit 0b58d90f89545e021d188c289fa142e5ff9e708b ]
Always set the graphics values to the max for the
asic type. E.g., some 1 RB chips are actually 1 RB chips,
others are actually harvested 2 RB chips.
Fixes: https://bugs.freedesktop.org/show\_bug.cgi?id=99353
Reviewed-by: Christian König
Signed-off-by: Alex Deucher
Cc: stable@vger.kernel.org
Signed-off-by: Sasha Levin
commit 42164a26b1395588966626b83097f9a4483e3bee
Author: Lukas Wunner
Date: Sun Feb 11 10:38:28 2018 +0100
workqueue: Allow retrieval of current task's work struct
[ Upstream commit 27d4ee03078aba88c5e07dcc4917e8d01d046f38 ]
Introduce a helper to retrieve the current task's work struct if it is
a workqueue worker.
This allows us to fix a long-standing deadlock in several DRM drivers
wherein the ->runtime\_suspend callback waits for a specific worker to
finish and that worker in turn calls a function which waits for runtime
suspend to finish. That function is invoked from multiple call sites
and waiting for runtime suspend to finish is the correct thing to do
except if it's executing in the context of the worker.
Cc: Lai Jiangshan
Cc: Dave Airlie
Cc: Ben Skeggs
Cc: Alex Deucher
Acked-by: Tejun Heo
Reviewed-by: Lyude Paul
Signed-off-by: Lukas Wunner
Link: https://patchwork.freedesktop.org/patch/msgid/2d8f603074131eb87e588d2b803a71765bd3a2fd.1518338788.git.lukas@wunner.de
Signed-off-by: Sasha Levin
commit 8760c0ccf0cbc1758578e275708fcc456318f6d7
Author: himanshu.madhani@cavium.com
Date: Mon Feb 12 10:28:14 2018 -0800
scsi: qla2xxx: Fix NULL pointer crash due to active timer for ABTS
[ Upstream commit 1514839b366417934e2f1328edb50ed1e8a719f5 ]
This patch fixes NULL pointer crash due to active timer running for abort
IOCB.
From crash dump analysis it was discoverd that get\_next\_timer\_interrupt()
encountered a corrupted entry on the timer list.
#9 [ffff95e1f6f0fd40] page\_fault at ffffffff914fe8f8
[exception RIP: get\_next\_timer\_interrupt+440]
RIP: ffffffff90ea3088 RSP: ffff95e1f6f0fdf0 RFLAGS: 00010013
RAX: ffff95e1f6451028 RBX: 000218e2389e5f40 RCX: 00000001232ad600
RDX: 0000000000000001 RSI: ffff95e1f6f0fdf0 RDI: 0000000001232ad6
RBP: ffff95e1f6f0fe40 R8: ffff95e1f6451188 R9: 0000000000000001
R10: 0000000000000016 R11: 0000000000000016 R12: 00000001232ad5f6
R13: ffff95e1f6450000 R14: ffff95e1f6f0fdf8 R15: ffff95e1f6f0fe10
ORIG\_RAX: ffffffffffffffff CS: 0010 SS: 0018
Looking at the assembly of get\_next\_timer\_interrupt(), address came
from %r8 (ffff95e1f6451188) which is pointing to list\_head with single
entry at ffff95e5ff621178.
0xffffffff90ea307a : mov (%r8),%rdx
0xffffffff90ea307d : cmp %r8,%rdx
0xffffffff90ea3080 : je 0xffffffff90ea30a7
0xffffffff90ea3082 : nopw 0x0(%rax,%rax,1)
0xffffffff90ea3088 : testb $0x1,0x18(%rdx)
crash> rd ffff95e1f6451188 10
ffff95e1f6451188: ffff95e5ff621178 ffff95e5ff621178 x.b.....x.b.....
ffff95e1f6451198: ffff95e1f6451198 ffff95e1f6451198 ..E.......E.....
ffff95e1f64511a8: ffff95e1f64511a8 ffff95e1f64511a8 ..E.......E.....
ffff95e1f64511b8: ffff95e77cf509a0 ffff95e77cf509a0 ...|.......|....
ffff95e1f64511c8: ffff95e1f64511c8 ffff95e1f64511c8 ..E.......E.....
crash> rd ffff95e5ff621178 10
ffff95e5ff621178: 0000000000000001 ffff95e15936aa00 ..........6Y....
ffff95e5ff621188: 0000000000000000 00000000ffffffff ................
ffff95e5ff621198: 00000000000000a0 0000000000000010 ................
ffff95e5ff6211a8: ffff95e5ff621198 000000000000000c ..b.............
ffff95e5ff6211b8: 00000f5800000000 ffff95e751f8d720 ....X... ..Q....
ffff95e5ff621178 belongs to freed mempool object at ffff95e5ff621080.
CACHE NAME OBJSIZE ALLOCATED TOTAL SLABS SSIZE
ffff95dc7fd74d00 mnt\_cache 384 19785 24948 594 16k
SLAB MEMORY NODE TOTAL ALLOCATED FREE
ffffdc5dabfd8800 ffff95e5ff620000 1 42 29 13
FREE / [ALLOCATED]
ffff95e5ff621080 (cpu 6 cache)
Examining the contents of that memory reveals a pointer to a constant string
in the driver, "abort\0", which is set by qla24xx\_async\_abort\_cmd().
crash> rd ffffffffc059277c 20
ffffffffc059277c: 6e490074726f6261 0074707572726574 abort.Interrupt.
ffffffffc059278c: 00676e696c6c6f50 6920726576697244 Polling.Driver i
ffffffffc059279c: 646f6d207325206e 6974736554000a65 n %s mode..Testi
ffffffffc05927ac: 636976656420676e 786c252074612065 ng device at %lx
ffffffffc05927bc: 6b63656843000a2e 646f727020676e69 ...Checking prod
ffffffffc05927cc: 6f20444920746375 0a2e706968632066 uct ID of chip..
ffffffffc05927dc: 5120646e756f4600 204130303232414c .Found QLA2200A
ffffffffc05927ec: 43000a2e70696843 20676e696b636568 Chip...Checking
ffffffffc05927fc: 65786f626c69616d 6c636e69000a2e73 mailboxes...incl
ffffffffc059280c: 756e696c2f656475 616d2d616d642f78 ude/linux/dma-ma
crash> struct -ox srb\_iocb
struct srb\_iocb {
union {
struct {...} logio;
struct {...} els\_logo;
struct {...} tmf;
struct {...} fxiocb;
struct {...} abt;
struct ct\_arg ctarg;
struct {...} mbx;
struct {...} nack;
[0x0 ] } u;
[0xb8] struct timer\_list timer;
[0x108] void (\*timeout)(void \*);
}
SIZE: 0x110
crash> ! bc
ibase=16
obase=10
B8+40
F8
The object is a srb\_t, and at offset 0xf8 within that structure
(i.e. ffff95e5ff621080 + f8 -> ffff95e5ff621178) is a struct timer\_list.
Cc:  #4.4+
Fixes: 4440e46d5db7 ("[SCSI] qla2xxx: Add IOCB Abort command asynchronous handling.")
Signed-off-by: Himanshu Madhani
Reviewed-by: Johannes Thumshirn
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit fc0be83edd94e31303a8b1b89b4d624a8b99c28f
Author: Leon Romanovsky
Date: Wed Mar 7 15:29:09 2018 +0200
RDMA/mlx5: Fix integer overflow while resizing CQ
[ Upstream commit aa0de36a40f446f5a21a7c1e677b98206e242edb ]
The user can provide very large cqe\_size which will cause to integer
overflow as it can be seen in the following UBSAN warning:
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
commit 7562b58c6ab6e852cae4f4bdf3c90de34d7f672a
Author: Leon Romanovsky
Date: Wed Mar 7 18:49:16 2018 +0200
RDMA/ucma: Check that user doesn't overflow QP state
[ Upstream commit a5880b84430316e3e1c1f5d23aa32ec6000cc717 ]
The QP state is limited and declared in enum ib\_qp\_state,
but ucma user was able to supply any possible (u32) value.
Reported-by: syzbot+0df1ab766f8924b1edba@syzkaller.appspotmail.com
Fixes: 75216638572f ("RDMA/cma: Export rdma cm interface to userspace")
Signed-off-by: Leon Romanovsky
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
commit 2f8923db64bb526bf12c31b33095196f15a47af9
Author: Leon Romanovsky
Date: Wed Mar 7 14:49:09 2018 +0200
RDMA/ucma: Limit possible option size
[ Upstream commit 6a21dfc0d0db7b7e0acedce67ca533a6eb19283c ]
Users of ucma are supposed to provide size of option level,
in most paths it is supposed to be equal to u8 or u16, but
it is not the case for the IB path record, where it can be
multiple of struct ib\_path\_rec\_data.
This patch takes simplest possible approach and prevents providing
values more than possible to allocate.
Reported-by: syzbot+a38b0e9f694c379ca7ce@syzkaller.appspotmail.com
Fixes: 7ce86409adcd ("RDMA/ucma: Allow user space to set service type")
Signed-off-by: Leon Romanovsky
Signed-off-by: Doug Ledford
Signed-off-by: Sasha Levin
commit bb95ae81bf5e09e040f350bd9d312c7cb9dd1c48
Author: Ernesto A. Fernández
Date: Wed Aug 2 03:18:27 2017 -0300
btrfs: preserve i\_mode if \_\_btrfs\_set\_acl() fails
[ Upstream commit d7d824966530acfe32b94d1ed672e6fe1638cd68 ]
When changing a file's acl mask, btrfs\_set\_acl() will first set the
group bits of i\_mode to the value of the mask, and only then set the
actual extended attribute representing the new acl.
If the second part fails (due to lack of space, for example) and the
file had no acl attribute to begin with, the system will from now on
assume that the mask permission bits are actual group permission bits,
potentially granting access to the wrong users.
Prevent this by restoring the original mode bits if \_\_btrfs\_set\_acl
fails.
Signed-off-by: Ernesto A. Fernández
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Sasha Levin
commit f3c22cc3eaf1534d0aa8ec2ed8d3ddde413930ae
Author: Mike Snitzer
Date: Tue Jun 20 19:14:30 2017 -0400
dm io: fix duplicate bio completion due to missing ref count
[ Upstream commit feb7695fe9fb83084aa29de0094774f4c9d4c9fc ]
If only a subset of the devices associated with multiple regions support
a given special operation (eg. DISCARD) then the dec\_count() that is
used to set error for the region must increment the io->count.
Otherwise, when the dec\_count() is called it can cause the dm-io
caller's bio to be completed multiple times. As was reported against
the dm-mirror target that had mirror legs with a mix of discard
capabilities.
Bug: https://bugzilla.kernel.org/show\_bug.cgi?id=196077
Reported-by: Zhang Yi
Signed-off-by: Mike Snitzer
Signed-off-by: Sasha Levin
commit b434e837642049c96cf56c730279f410d520b33b
Author: Alexey Kodanev
Date: Fri Feb 9 17:35:23 2018 +0300
sctp: verify size of a new chunk in \_sctp\_make\_chunk()
[ Upstream commit 07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c ]
When SCTP makes INIT or INIT\_ACK packet the total chunk length
can exceed SCTP\_MAX\_CHUNK\_LEN which leads to kernel panic when
transmitting these packets, e.g. the crash on sending INIT\_ACK:
[ 597.804948] skbuff: skb\_over\_panic: text:00000000ffae06e4 len:120168
put:120156 head:000000007aa47635 data:00000000d991c2de
tail:0x1d640 end:0xfec0 dev:
...
[ 597.976970] ------------[ cut here ]------------
[ 598.033408] kernel BUG at net/core/skbuff.c:104!
[ 600.314841] Call Trace:
[ 600.345829]
[ 600.371639] ? sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.436934] skb\_put+0x16c/0x200
[ 600.477295] sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.540630] ? sctp\_packet\_config+0x890/0x890 [sctp]
[ 600.601781] ? \_\_sctp\_packet\_append\_chunk+0x3b4/0xd00 [sctp]
[ 600.671356] ? sctp\_cmp\_addr\_exact+0x3f/0x90 [sctp]
[ 600.731482] sctp\_outq\_flush+0x663/0x30d0 [sctp]
[ 600.788565] ? sctp\_make\_init+0xbf0/0xbf0 [sctp]
[ 600.845555] ? sctp\_check\_transmitted+0x18f0/0x18f0 [sctp]
[ 600.912945] ? sctp\_outq\_tail+0x631/0x9d0 [sctp]
[ 600.969936] sctp\_cmd\_interpreter.isra.22+0x3be1/0x5cb0 [sctp]
[ 601.041593] ? sctp\_sf\_do\_5\_1B\_init+0x85f/0xc30 [sctp]
[ 601.104837] ? sctp\_generate\_t1\_cookie\_event+0x20/0x20 [sctp]
[ 601.175436] ? sctp\_eat\_data+0x1710/0x1710 [sctp]
[ 601.233575] sctp\_do\_sm+0x182/0x560 [sctp]
[ 601.284328] ? sctp\_has\_association+0x70/0x70 [sctp]
[ 601.345586] ? sctp\_rcv+0xef4/0x32f0 [sctp]
[ 601.397478] ? sctp6\_rcv+0xa/0x20 [sctp]
...
Here the chunk size for INIT\_ACK packet becomes too big, mostly
because of the state cookie (INIT packet has large size with
many address parameters), plus additional server parameters.
Later this chunk causes the panic in skb\_put\_data():
skb\_packet\_transmit()
sctp\_packet\_pack()
skb\_put\_data(nskb, chunk->skb->data, chunk->skb->len);
'nskb' (head skb) was previously allocated with packet->size
from u16 'chunk->chunk\_hdr->length'.
As suggested by Marcelo we should check the chunk's length in
\_sctp\_make\_chunk() before trying to allocate skb for it and
discard a chunk if its size bigger than SCTP\_MAX\_CHUNK\_LEN.
Signed-off-by: Alexey Kodanev
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 04c9bd9964bb8688e5477c55652816098eb86ca3
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:17 2018 +0100
s390/qeth: fix IPA command submission race
[ Upstream commit d22ffb5a712f9211ffd104c38fc17cbfb1b5e2b0 ]
If multiple IPA commands are build & sent out concurrently,
fill\_ipacmd\_header() may assign a seqno value to a command that's
different from what send\_control\_data() later assigns to this command's
reply.
This is due to other commands passing through send\_control\_data(),
and incrementing card->seqno.ipa along the way.
So one IPA command has no reply that's waiting for its seqno, while some
other IPA command has multiple reply objects waiting for it.
Only one of those waiting replies wins, and the other(s) times out and
triggers a recovery via send\_ipa\_cmd().
Fix this by making sure that the same seqno value is assigned to
a command and its reply object.
Do so immediately before submitting the command & while holding the
irq\_pending "lock", to produce nicely ascending seqnos.
As a side effect, \*all\* IPA commands now use a reply object that's
waiting for its actual seqno. Previously, early IPA commands that were
submitted while the card was still DOWN used the "catch-all" IDX seqno.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit e35fd26b108a1f67217f045fb6f9278071911f8b
Author: Julian Wiedmann
Date: Fri Feb 9 11:03:50 2018 +0100
s390/qeth: fix SETIP command handling
[ Upstream commit 1c5b2216fbb973a9410e0b06389740b5c1289171 ]
send\_control\_data() applies some special handling to SETIP v4 IPA
commands. But current code parses \*all\* command types for the SETIP
command code. Limit the command code check to IPA commands.
Fixes: 5b54e16f1a54 ("qeth: do not spin for SETIP ip assist command")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 3311f45c5fe1e87d4a3e5fa47509fb9e042235eb
Author: Alexey Kodanev
Date: Thu Feb 15 20:18:43 2018 +0300
udplite: fix partial checksum initialization
[ Upstream commit 15f35d49c93f4fa9875235e7bf3e3783d2dd7a1b ]
Since UDP-Lite is always using checksum, the following path is
triggered when calculating pseudo header for it:
udp4\_csum\_init() or udp6\_csum\_init()
skb\_checksum\_init\_zero\_check()
\_\_skb\_checksum\_validate\_complete()
The problem can appear if skb->len is less than CHECKSUM\_BREAK. In
this particular case \_\_skb\_checksum\_validate\_complete() also invokes
\_\_skb\_checksum\_complete(skb). If UDP-Lite is using partial checksum
that covers only part of a packet, the function will return bad
checksum and the packet will be dropped.
It can be fixed if we skip skb\_checksum\_init\_zero\_check() and only
set the required pseudo header checksum for UDP-Lite with partial
checksum before udp4\_csum\_init()/udp6\_csum\_init() functions return.
Fixes: ed70fcfcee95 ("net: Call skb\_checksum\_init in IPv4")
Fixes: e4f45b7f40bd ("net: Call skb\_checksum\_init in IPv6")
Signed-off-by: Alexey Kodanev
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 4eda9d68b1a946a1e6ab3e644c1f93a3e6e52e4a
Author: Guillaume Nault
Date: Fri Mar 2 18:41:16 2018 +0100
ppp: prevent unregistered channels from connecting to PPP units
[ Upstream commit 77f840e3e5f09c6d7d727e85e6e08276dd813d11 ]
PPP units don't hold any reference on the channels connected to it.
It is the channel's responsibility to ensure that it disconnects from
its unit before being destroyed.
In practice, this is ensured by ppp\_unregister\_channel() disconnecting
the channel from the unit before dropping a reference on the channel.
However, it is possible for an unregistered channel to connect to a PPP
unit: register a channel with ppp\_register\_net\_channel(), attach a
/dev/ppp file to it with ioctl(PPPIOCATTCHAN), unregister the channel
with ppp\_unregister\_channel() and finally connect the /dev/ppp file to
a PPP unit with ioctl(PPPIOCCONNECT).
Once in this situation, the channel is only held by the /dev/ppp file,
which can be released at anytime and free the channel without letting
the parent PPP unit know. Then the ppp structure ends up with dangling
pointers in its ->channels list.
Prevent this scenario by forbidding unregistered channels from
connecting to PPP units. This maintains the code logic by keeping
ppp\_unregister\_channel() responsible from disconnecting the channel if
necessary and avoids modification on the reference counting mechanism.
This issue seems to predate git history (successfully reproduced on
Linux 2.6.26 and earlier PPP commits are unrelated).
Signed-off-by: Guillaume Nault
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit b8eae66c54ec0bab9c40a081ef53ce8f3236f679
Author: Nicolas Dichtel
Date: Tue Feb 6 14:48:32 2018 +0100
netlink: ensure to loop over all netns in genlmsg\_multicast\_allns()
[ Upstream commit cb9f7a9a5c96a773bbc9c70660dc600cfff82f82 ]
Nowadays, nlmsg\_multicast() returns only 0 or -ESRCH but this was not the
case when commit 134e63756d5f was pushed.
However, there was no reason to stop the loop if a netns does not have
listeners.
Returns -ESRCH only if there was no listeners in all netns.
To avoid having the same problem in the future, I didn't take the
assumption that nlmsg\_multicast() returns only 0 or -ESRCH.
Fixes: 134e63756d5f ("genetlink: make netns aware")
CC: Johannes Berg
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 6f57f18ed1ff91744f14d392d3b810936a8e68fc
Author: Sabrina Dubroca
Date: Mon Feb 26 16:13:43 2018 +0100
net: ipv4: don't allow setting net.ipv4.route.min\_pmtu below 68
[ Upstream commit c7272c2f1229125f74f22dcdd59de9bbd804f1c8 ]
According to RFC 1191 sections 3 and 4, ICMP frag-needed messages
indicating an MTU below 68 should be rejected:
A host MUST never reduce its estimate of the Path MTU below 68
octets.
and (talking about ICMP frag-needed's Next-Hop MTU field):
This field will never contain a value less than 68, since every
router "must be able to forward a datagram of 68 octets without
fragmentation".
Furthermore, by letting net.ipv4.route.min\_pmtu be set to negative
values, we can end up with a very large PMTU when (-1) is cast into u32.
Let's also make ip\_rt\_min\_pmtu a u32, since it's only ever compared to
unsigned ints.
Reported-by: Jianlin Shi
Signed-off-by: Sabrina Dubroca
Reviewed-by: Stefano Brivio
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit d2cd06ce649d483c4ec89ad2c3973204d1c66d5b
Author: Jakub Kicinski
Date: Mon Feb 12 21:35:31 2018 -0800
net: fix race on decreasing number of TX queues
[ Upstream commit ac5b70198adc25c73fba28de4f78adcee8f6be0b ]
netif\_set\_real\_num\_tx\_queues() can be called when netdev is up.
That usually happens when user requests change of number of
channels/rings with ethtool -L. The procedure for changing
the number of queues involves resetting the qdiscs and setting
dev->num\_tx\_queues to the new value. When the new value is
lower than the old one, extra care has to be taken to ensure
ordering of accesses to the number of queues vs qdisc reset.
Currently the queues are reset before new dev->num\_tx\_queues
is assigned, leaving a window of time where packets can be
enqueued onto the queues going down, leading to a likely
crash in the drivers, since most drivers don't check if TX
skbs are assigned to an active queue.
Fixes: e6484930d7c7 ("net: allocate tx queues in register\_netdevice")
Signed-off-by: Jakub Kicinski
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 3fbc29d5be900db349f6f64fbbf46c83dc253abb
Author: Arnd Bergmann
Date: Thu Feb 22 16:55:34 2018 +0100
ipv6 sit: work around bogus gcc-8 -Wrestrict warning
[ Upstream commit ca79bec237f5809a7c3c59bd41cd0880aa889966 ]
gcc-8 has a new warning that detects overlapping input and output arguments
in memcpy(). It triggers for sit\_init\_net() calling ipip6\_tunnel\_clone\_6rd(),
which is actually correct:
net/ipv6/sit.c: In function 'sit\_init\_net':
net/ipv6/sit.c:192:3: error: 'memcpy' source argument is the same as destination [-Werror=restrict]
The problem here is that the logic detecting the memcpy() arguments finds them
to be the same, but the conditional that tests for the input and output of
ipip6\_tunnel\_clone\_6rd() to be identical is not a compile-time constant.
We know that netdev\_priv(t->dev) is the same as t for a tunnel device,
and comparing "dev" directly here lets the compiler figure out as well
that 'dev == sitn->fb\_tunnel\_dev' when called from sit\_init\_net(), so
it no longer warns.
This code is old, so Cc stable to make sure that we don't get the warning
for older kernels built with new gcc.
Cc: Martin Sebor
Link: https://gcc.gnu.org/bugzilla/show\_bug.cgi?id=83456
Signed-off-by: Arnd Bergmann
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit b2e4389b54f87891d992e98a7198576b60a85fe7
Author: Denis Du
Date: Sat Feb 24 16:51:42 2018 -0500
hdlc\_ppp: carrier detect ok, don't turn off negotiation
[ Upstream commit b6c3bad1ba83af1062a7ff6986d9edc4f3d7fc8e ]
Sometimes when physical lines have a just good noise to make the protocol
handshaking fail, but the carrier detect still good. Then after remove of
the noise, nobody will trigger this protocol to be start again to cause
the link to never come back. The fix is when the carrier is still on, not
terminate the protocol handshaking.
Signed-off-by: Denis Du
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 48e0c1663636fb4fcf578805a474c7f79ee2220f
Author: Xin Long
Date: Mon Feb 12 17:15:40 2018 +0800
bridge: check brport attr show in brport\_show
[ Upstream commit 1b12580af1d0677c3c3a19e35bfe5d59b03f737f ]
Now br\_sysfs\_if file flush doesn't have attr show. To read it will
cause kernel panic after users chmod u+r this file.
Xiong found this issue when running the commands:
ip link add br0 type bridge
ip link add type veth
ip link set veth0 master br0
chmod u+r /sys/devices/virtual/net/veth0/brport/flush
timeout 3 cat /sys/devices/virtual/net/veth0/brport/flush
kernel crashed with NULL a pointer dereference call trace.
This patch is to fix it by return -EINVAL when brport\_attr->show
is null, just the same as the check for brport\_attr->store in
brport\_store().
Fixes: 9cf637473c85 ("bridge: add sysfs hook to flush forwarding table")
Reported-by: Xiong Zhou
Signed-off-by: Xin Long
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit e7874854f5d7a5249cd8b2b54e0bb654cd79d33d
Author: Nathan Sullivan
Date: Mon Aug 15 17:20:14 2016 -0500
leds: do not overflow sysfs buffer in led\_trigger\_show
[ Upstream commit 3b9b95363c45365d606ad4bbba16acca75fdf6d3 ]
Per the documentation, use scnprintf instead of sprintf to ensure there
is never more than PAGE\_SIZE bytes of trigger names put into the
buffer.
Signed-off-by: Nathan Sullivan
Signed-off-by: Zach Brown
Signed-off-by: Jacek Anaszewski
Signed-off-by: Sasha Levin
commit d24741b2854ef83e9f4318067548714804ca42a4
Author: Jan Kara
Date: Thu Jun 22 15:31:07 2017 +0200
btrfs: Don't clear SGID when inheriting ACLs
[ Upstream commit b7f8a09f8097db776b8d160862540e4fc1f51296 ]
When new directory 'DIR1' is created in a directory 'DIR0' with SGID bit
set, DIR1 is expected to have SGID bit set (and owning group equal to
the owning group of 'DIR0'). However when 'DIR0' also has some default
ACLs that 'DIR1' inherits, setting these ACLs will result in SGID bit on
'DIR1' to get cleared if user is not member of the owning group.
Fix the problem by moving posix\_acl\_update\_mode() out of
\_\_btrfs\_set\_acl() into btrfs\_set\_acl(). That way the function will not be
called when inheriting ACLs which is what we want as it prevents SGID
bit clearing and the mode has been properly set by posix\_acl\_create()
anyway.
Fixes: 073931017b49d9458aa351605b43a7e34598caef
CC: stable@vger.kernel.org
CC: linux-btrfs@vger.kernel.org
CC: David Sterba
Signed-off-by: Jan Kara
Signed-off-by: David Sterba
Signed-off-by: Sasha Levin
commit 32028f35ed98dc1ede5c60c4e47d007bc5417027
Author: Ulf Magnusson
Date: Mon Feb 5 02:21:13 2018 +0100
ARM: mvebu: Fix broken PL310\_ERRATA\_753970 selects
[ Upstream commit 8aa36a8dcde3183d84db7b0d622ffddcebb61077 ]
The MACH\_ARMADA\_375 and MACH\_ARMADA\_38X boards select ARM\_ERRATA\_753970,
but it was renamed to PL310\_ERRATA\_753970 by commit fa0ce4035d48 ("ARM:
7162/1: errata: tidy up Kconfig options for PL310 errata workarounds").
Fix the selects to use the new name.
Discovered with the
https://github.com/ulfalizer/Kconfiglib/blob/master/examples/list\_undefined.py
script.
Fixes: fa0ce4035d48 ("ARM: 7162/1: errata: tidy up Kconfig options for
PL310 errata workarounds"
cc: stable@vger.kernel.org
Signed-off-by: Ulf Magnusson
Signed-off-by: Gregory CLEMENT
Signed-off-by: Sasha Levin
commit 261eef960b2e37c3b8d23fc48af5edaa526f1610
Author: Rasmus Villemoes
Date: Fri Feb 16 13:20:48 2018 -0800
nospec: Allow index argument to have const-qualified type
[ Upstream commit b98c6a160a057d5686a8c54c79cc6c8c94a7d0c8 ]
The last expression in a statement expression need not be a bare
variable, quoting gcc docs
The last thing in the compound statement should be an expression
followed by a semicolon; the value of this subexpression serves as the
value of the entire construct.
and we already use that in e.g. the min/max macros which end with a
ternary expression.
This way, we can allow index to have const-qualified type, which will in
some cases avoid the need for introducing a local copy of index of
non-const qualified type. That, in turn, can prevent readers not
familiar with the internals of array\_index\_nospec from wondering about
the seemingly redundant extra variable, and I think that's worthwhile
considering how confusing the whole \_nospec business is.
The expression \_i&\_mask has type unsigned long (since that is the type
of \_mask, and the BUILD\_BUG\_ONs guarantee that \_i will get promoted to
that), so in order not to change the type of the whole expression, add
a cast back to typeof(\_i).
Signed-off-by: Rasmus Villemoes
Signed-off-by: Dan Williams
Acked-by: Linus Torvalds
Cc: Andy Lutomirski
Cc: Arjan van de Ven
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: David Woodhouse
Cc: Greg Kroah-Hartman
Cc: Josh Poimboeuf
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Cc: linux-arch@vger.kernel.org
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/151881604837.17395.10812767547837568328.stgit@dwillia2-desk3.amr.corp.intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
commit 29386d63742c356b064af70c4f5995b320338e5c
Author: Viresh Kumar
Date: Fri Feb 23 09:38:28 2018 +0530
cpufreq: s3c24xx: Fix broken s3c\_cpufreq\_init()
[ Upstream commit 0373ca74831b0f93cd4cdbf7ad3aec3c33a479a5 ]
commit a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
accidentally broke cpufreq on s3c2410 and s3c2412.
These two platforms don't have a CPU frequency table and used to skip
calling cpufreq\_table\_validate\_and\_show() for them. But with the
above commit, we started calling it unconditionally and that will
eventually fail as the frequency table pointer is NULL.
Fix this by calling cpufreq\_table\_validate\_and\_show() conditionally
again.
Fixes: a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
Cc: 3.13+  # v3.13+
Signed-off-by: Viresh Kumar
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Sasha Levin
commit ff8c525b2c1c24fe794a2fb399aef5ece9a3b5ce
Author: Erik Veijola
Date: Fri Feb 23 14:06:52 2018 +0200
ALSA: usb-audio: Add a quirck for B&W PX headphones
[ Upstream commit 240a8af929c7c57dcde28682725b29cf8474e8e5 ]
The capture interface doesn't work and the playback interface only
supports 48 kHz sampling rate even though it advertises more rates.
Signed-off-by: Erik Veijola
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Sasha Levin
commit 976c37e8ca82eed17a6bbd788bbc62b9d9772490
Author: Jeremy Boone
Date: Thu Feb 8 12:31:16 2018 -0800
tpm\_i2c\_nuvoton: fix potential buffer overruns caused by bit glitches on the bus
[ Upstream commit f9d4d9b5a5ef2f017bc344fb65a58a902517173b ]
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Sasha Levin
commit f49123e361fd503b6bdfc6c512259a7103d61d1c
Author: Jeremy Boone
Date: Thu Feb 8 12:30:01 2018 -0800
tpm\_i2c\_infineon: fix potential buffer overruns caused by bit glitches on the bus
[ Upstream commit 9b8cb28d7c62568a5916bdd7ea1c9176d7f8f2ed ]
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Sasha Levin
commit 5e0b41c73710f26884619f97843fa395edcdf7a3
Author: Jeremy Boone
Date: Thu Feb 8 12:29:09 2018 -0800
tpm: st33zp24: fix potential buffer overruns caused by bit glitches on the bus
[ Upstream commit 6d24cd186d9fead3722108dec1b1c993354645ff ]
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Sasha Levin
commit 2977bb00bc5c1fb3966ea1529cac712ef4abf137
Author: Yangbo Lu
Date: Tue Jan 9 11:02:33 2018 +0800
net: gianfar\_ptp: move set\_fipers() to spinlock protecting area
[ Upstream commit 11d827a993a969c3c6ec56758ff63a44ba19b466 ]
set\_fipers() calling should be protected by spinlock in
case that any interrupt breaks related registers setting
and the function we expect. This patch is to move set\_fipers()
to spinlock protecting area in ptp\_gianfar\_adjtime().
Signed-off-by: Yangbo Lu
Acked-by: Richard Cochran
Reviewed-by: Fabio Estevam
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 206ef30be422d148d82816970609bd586c255f6b
Author: Marcelo Ricardo Leitner
Date: Mon Jan 8 19:02:29 2018 -0200
sctp: make use of pre-calculated len
[ Upstream commit c76f97c99ae6d26d14c7f0e50e074382bfbc9f98 ]
Some sockopt handling functions were calculating the length of the
buffer to be written to userspace and then calculating it again when
actually writing the buffer, which could lead to some write not using
an up-to-date length.
This patch updates such places to just make use of the len variable.
Also, replace some sizeof(type) to sizeof(var).
Signed-off-by: Marcelo Ricardo Leitner
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit e2395cec8c93f91ac0c3bfe453487059a8a3fff3
Author: Ross Lagerwall
Date: Tue Jan 9 12:10:22 2018 +0000
xen/gntdev: Fix partial gntdev\_mmap() cleanup
[ Upstream commit cf2acf66ad43abb39735568f55e1f85f9844e990 ]
When cleaning up after a partially successful gntdev\_mmap(), unmap the
successfully mapped grant pages otherwise Xen will kill the domain if
in debug mode (Attempt to implicitly unmap a granted PTE) or Linux will
kill the process and emit "BUG: Bad page map in process" if Xen is in
release mode.
This is only needed when use\_ptemod is true because gntdev\_put\_map()
will unmap grant pages itself when use\_ptemod is false.
Signed-off-by: Ross Lagerwall
Reviewed-by: Boris Ostrovsky
Signed-off-by: Boris Ostrovsky
Signed-off-by: Sasha Levin
commit a3adc9d838d65c596b4479af572c8b1619d01d9f
Author: Ross Lagerwall
Date: Tue Jan 9 12:10:21 2018 +0000
xen/gntdev: Fix off-by-one error when unmapping with holes
[ Upstream commit 951a010233625b77cde3430b4b8785a9a22968d1 ]
If the requested range has a hole, the calculation of the number of
pages to unmap is off by one. Fix it.
Signed-off-by: Ross Lagerwall
Reviewed-by: Boris Ostrovsky
Signed-off-by: Boris Ostrovsky
Signed-off-by: Sasha Levin
commit 20d94194c82f726f7054d233d4a166e6bf323823
Author: Sergei Shtylyov
Date: Sat Jan 6 21:53:26 2018 +0300
SolutionEngine771x: fix Ether platform data
[ Upstream commit 195e2addbce09e5afbc766efc1e6567c9ce840d3 ]
The 'sh\_eth' driver's probe() method would fail on the SolutionEngine7710
board and crash on SolutionEngine7712 board as the platform code is
hopelessly behind the driver's platform data -- it passes the PHY address
instead of 'struct sh\_eth\_plat\_data \*'; pass the latter to the driver in
order to fix the bug...
Fixes: 71557a37adb5 ("[netdrvr] sh\_eth: Add SH7619 support")
Signed-off-by: Sergei Shtylyov
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit e8056a8ea9d7b660fe8c4c1b90895ec350c52d70
Author: Christophe JAILLET
Date: Sat Jan 6 09:00:09 2018 +0100
mdio-sun4i: Fix a memory leak
[ Upstream commit 56c0290202ab94a2f2780c449395d4ae8495fab4 ]
If the probing of the regulator is deferred, the memory allocated by
'mdiobus\_alloc\_size()' will be leaking.
It should be freed before the next call to 'sun4i\_mdio\_probe()' which will
reallocate it.
Fixes: 4bdcb1dd9feb ("net: Add MDIO bus driver for the Allwinner EMAC")
Signed-off-by: Christophe JAILLET
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 71af42a5681b918e67bcf52bae1db20b1304985f
Author: Eduardo Otubo
Date: Fri Jan 5 09:42:16 2018 +0100
xen-netfront: enable device after manual module load
[ Upstream commit b707fda2df4070785d0fa8a278aa13944c5f51f8 ]
When loading the module after unloading it, the network interface would
not be enabled and thus wouldn't have a backend counterpart and unable
to be used by the guest.
The guest would face errors like:
[root@guest ~]# ethtool -i eth0
Cannot get driver information: No such device
[root@guest ~]# ifconfig eth0
eth0: error fetching interface information: Device not found
This patch initializes the state of the netfront device whenever it is
loaded manually, this state would communicate the netback to create its
device and establish the connection between them.
Signed-off-by: Eduardo Otubo
Reviewed-by: Boris Ostrovsky
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 3102df24ffc3151330259ce49ae305abb8b7f256
Author: Xiongwei Song
Date: Tue Jan 2 21:24:55 2018 +0800
drm/ttm: check the return value of kzalloc
[ Upstream commit 19d859a7205bc59ffc38303eb25ae394f61d21dc ]
In the function ttm\_page\_alloc\_init, kzalloc call is made for variable
\_manager, we need to check its return value, it may return NULL.
Signed-off-by: Xiongwei Song
Reviewed-by: Christian König
Signed-off-by: Alex Deucher
Signed-off-by: Sasha Levin
commit 7d4c6df325cfec778300d8bc21e538edc52a8e21
Author: Tushar Dave
Date: Wed Dec 6 02:26:29 2017 +0530
e1000: fix disabling already-disabled warning
[ Upstream commit 0b76aae741abb9d16d2c0e67f8b1e766576f897d ]
This patch adds check so that driver does not disable already
disabled device.
[ 44.637743] advantechwdt: Unexpected close, not stopping watchdog!
[ 44.997548] input: ImExPS/2 Generic Explorer Mouse as /devices/platform/i8042/serio1/input/input6
[ 45.013419] e1000 0000:00:03.0: disabling already-disabled device
[ 45.013447] ------------[ cut here ]------------
[ 45.014868] WARNING: CPU: 1 PID: 71 at drivers/pci/pci.c:1641 pci\_disable\_device+0xa1/0x105:
pci\_disable\_device at drivers/pci/pci.c:1640
[ 45.016171] CPU: 1 PID: 71 Comm: rcu\_perf\_shutdo Not tainted 4.14.0-01330-g3c07399 #1
[ 45.017197] task: ffff88011bee9e40 task.stack: ffffc90000860000
[ 45.017987] RIP: 0010:pci\_disable\_device+0xa1/0x105:
pci\_disable\_device at drivers/pci/pci.c:1640
[ 45.018603] RSP: 0000:ffffc90000863e30 EFLAGS: 00010286
[ 45.019282] RAX: 0000000000000035 RBX: ffff88013a230008 RCX: 0000000000000000
[ 45.020182] RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000203
[ 45.021084] RBP: ffff88013a3f31e8 R08: 0000000000000001 R09: 0000000000000000
[ 45.021986] R10: ffffffff827ec29c R11: 0000000000000002 R12: 0000000000000001
[ 45.022946] R13: ffff88013a230008 R14: ffff880117802b20 R15: ffffc90000863e8f
[ 45.023842] FS: 0000000000000000(0000) GS:ffff88013fd00000(0000) knlGS:0000000000000000
[ 45.024863] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 45.025583] CR2: ffffc900006d4000 CR3: 000000000220f000 CR4: 00000000000006a0
[ 45.026478] Call Trace:
[ 45.026811] \_\_e1000\_shutdown+0x1d4/0x1e2:
\_\_e1000\_shutdown at drivers/net/ethernet/intel/e1000/e1000\_main.c:5162
[ 45.027344] ? rcu\_perf\_cleanup+0x2a1/0x2a1:
rcu\_perf\_shutdown at kernel/rcu/rcuperf.c:627
[ 45.027883] e1000\_shutdown+0x14/0x3a:
e1000\_shutdown at drivers/net/ethernet/intel/e1000/e1000\_main.c:5235
[ 45.028351] device\_shutdown+0x110/0x1aa:
device\_shutdown at drivers/base/core.c:2807
[ 45.028858] kernel\_power\_off+0x31/0x64:
kernel\_power\_off at kernel/reboot.c:260
[ 45.029343] rcu\_perf\_shutdown+0x9b/0xa7:
rcu\_perf\_shutdown at kernel/rcu/rcuperf.c:637
[ 45.029852] ? \_\_wake\_up\_common\_lock+0xa2/0xa2:
autoremove\_wake\_function at kernel/sched/wait.c:376
[ 45.030414] kthread+0x126/0x12e:
kthread at kernel/kthread.c:233
[ 45.030834] ? \_\_kthread\_bind\_mask+0x8e/0x8e:
kthread at kernel/kthread.c:190
[ 45.031399] ? ret\_from\_fork+0x1f/0x30:
ret\_from\_fork at arch/x86/entry/entry\_64.S:443
[ 45.031883] ? kernel\_init+0xa/0xf5:
kernel\_init at init/main.c:997
[ 45.032325] ret\_from\_fork+0x1f/0x30:
ret\_from\_fork at arch/x86/entry/entry\_64.S:443
[ 45.032777] Code: 00 48 85 ed 75 07 48 8b ab a8 00 00 00 48 8d bb 98 00 00 00 e8 aa d1 11 00 48 89 ea 48 89 c6 48 c7 c7 d8 e4 0b 82 e8 55 7d da ff <0f> ff b9 01 00 00 00 31 d2 be 01 00 00 00 48 c7 c7 f0 b1 61 82
[ 45.035222] ---[ end trace c257137b1b1976ef ]---
[ 45.037838] ACPI: Preparing to enter system sleep state S5
Signed-off-by: Tushar Dave
Tested-by: Fengguang Wu
Signed-off-by: Jeff Kirsher
Signed-off-by: Sasha Levin
commit a67cf9e1ce36d6dd95689fa89a199c7fcdd289ec
Author: Aliaksei Karaliou
Date: Thu Dec 21 13:18:26 2017 -0800
xfs: quota: check result of register\_shrinker()
[ Upstream commit 3a3882ff26fbdbaf5f7e13f6a0bccfbf7121041d ]
xfs\_qm\_init\_quotainfo() does not check result of register\_shrinker()
which was tagged as \_\_must\_check recently, reported by sparse.
Signed-off-by: Aliaksei Karaliou
[darrick: move xfs\_qm\_destroy\_quotainos nearer xfs\_qm\_init\_quotainos]
Reviewed-by: Darrick J. Wong
Signed-off-by: Darrick J. Wong
Signed-off-by: Sasha Levin
commit 25d7f4bc09fd378bd80170a17cccf41dde89ddaf
Author: Aliaksei Karaliou
Date: Thu Dec 21 13:18:26 2017 -0800
xfs: quota: fix missed destroy of qi\_tree\_lock
[ Upstream commit 2196881566225f3c3428d1a5f847a992944daa5b ]
xfs\_qm\_destroy\_quotainfo() does not destroy quotainfo->qi\_tree\_lock
while destroys quotainfo->qi\_quotaofflock.
Signed-off-by: Aliaksei Karaliou
Reviewed-by: Darrick J. Wong
Signed-off-by: Darrick J. Wong
Signed-off-by: Sasha Levin
commit 7f4dcb76ba3c105411a8a3891dd310769454d1d8
Author: Stefan Haberland
Date: Wed Dec 6 10:30:39 2017 +0100
s390/dasd: fix wrongly assigned configuration data
[ Upstream commit 8a9bd4f8ebc6800bfc0596e28631ff6809a2f615 ]
We store per path and per device configuration data to identify the
path or device correctly. The per path configuration data might get
mixed up if the original request gets into error recovery and is
started with a random path mask.
This would lead to a wrong identification of a path in case of a CUIR
event for example.
Fix by copying the path mask from the original request to the error
recovery request in case it is a path verification request.
Signed-off-by: Stefan Haberland
Reviewed-by: Jan Hoeppner
Signed-off-by: Martin Schwidefsky
Signed-off-by: Sasha Levin
commit aee93488cca6462e65f17aa42a1fa2ab5016372e
Author: Matthieu CASTET
Date: Tue Dec 12 11:10:44 2017 +0100
led: core: Fix brightness setting when setting delay\_off=0
[ Upstream commit 2b83ff96f51d0b039c4561b9f95c824d7bddb85c ]
With the current code, the following sequence won't work :
echo timer > trigger
echo 0 > delay\_off
\* at this point we call
\*\* led\_delay\_off\_store
\*\* led\_blink\_set
\*\*\* stop timer
\*\* led\_blink\_setup
\*\* led\_set\_software\_blink
\*\*\* if !delay\_on, led off
\*\*\* if !delay\_off, set led\_set\_brightness\_nosleep <--- LED\_BLINK\_SW is set but timer is stop
\*\*\* otherwise start timer/set LED\_BLINK\_SW flag
echo xxx > brightness
\* led\_set\_brightness
\*\* if LED\_BLINK\_SW
\*\*\* if brightness=0, led off
\*\*\* else apply brightness if next timer <--- timer is stop, and will never apply new setting
\*\* otherwise set led\_set\_brightness\_nosleep
To fix that, when we delete the timer, we should clear LED\_BLINK\_SW.
Cc: linux-leds@vger.kernel.org
Signed-off-by: Matthieu CASTET
Signed-off-by: Jacek Anaszewski
Signed-off-by: Sasha Levin
commit 884258d16f4909c2e555882a56c9c702a35a3208
Author: Guilherme G. Piccoli
Date: Fri Dec 22 13:01:39 2017 -0200
bnx2x: Improve reliability in case of nested PCI errors
[ Upstream commit f7084059a9cb9e56a186e1677b1dcffd76c2cd24 ]
While in recovery process of PCI error (called EEH on PowerPC arch),
another PCI transaction could be corrupted causing a situation of
nested PCI errors. Also, this scenario could be reproduced with
error injection mechanisms (for debug purposes).
We observe that in case of nested PCI errors, bnx2x might attempt to
initialize its shmem and cause a kernel crash due to bad addresses
read from MCP. Multiple different stack traces were observed depending
on the point the second PCI error happens.
This patch avoids the crashes by:
\* failing PCI recovery in case of nested errors (since multiple
PCI errors in a row are not expected to lead to a functional
adapter anyway), and by,
\* preventing access to adapter FW when MCP is failed (we mark it as
failed when shmem cannot get initialized properly).
Reported-by: Abdul Haleem
Signed-off-by: Guilherme G. Piccoli
Acked-by: Shahed Shaikh
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 11e265a904f7d2cb1aa13a6457ec947dc9275c60
Author: Siva Reddy Kallam
Date: Fri Dec 22 16:05:29 2017 +0530
tg3: Enable PHY reset in MTU change path for 5720
[ Upstream commit e60ee41aaf898584205a6af5c996860d0fe6a836 ]
A customer noticed RX path hang when MTU is changed on the fly while
running heavy traffic with NCSI enabled for 5717 and 5719. Since 5720
belongs to same ASIC family, we observed same issue and same fix
could solve this problem for 5720.
Signed-off-by: Siva Reddy Kallam
Signed-off-by: Michael Chan
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 0919cb24b4db7b1078daa9c072ce81b9098d33f5
Author: Siva Reddy Kallam
Date: Fri Dec 22 16:05:28 2017 +0530
tg3: Add workaround to restrict 5762 MRRS to 2048
[ Upstream commit 4419bb1cedcda0272e1dc410345c5a1d1da0e367 ]
One of AMD based server with 5762 hangs with jumbo frame traffic.
This AMD platform has southbridge limitation which is restricting MRRS
to 4000. As a work around, driver to restricts the MRRS to 2048 for
this particular 5762 NX1 card.
Signed-off-by: Siva Reddy Kallam
Signed-off-by: Michael Chan
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit ad9133a8010fd7bc4f034efb98cee6fd341700a5
Author: James Hogan
Date: Tue Dec 5 23:31:35 2017 +0000
lib/mpi: Fix umul\_ppmm() for MIPS64r6
[ Upstream commit bbc25bee37d2b32cf3a1fab9195b6da3a185614a ]
Current MIPS64r6 toolchains aren't able to generate efficient
DMULU/DMUHU based code for the C implementation of umul\_ppmm(), which
performs an unsigned 64 x 64 bit multiply and returns the upper and
lower 64-bit halves of the 128-bit result. Instead it widens the 64-bit
inputs to 128-bits and emits a \_\_multi3 intrinsic call to perform a 128
x 128 multiply. This is both inefficient, and it results in a link error
since we don't include \_\_multi3 in MIPS linux.
For example commit 90a53e4432b1 ("cfg80211: implement regdb signature
checking") merged in v4.15-rc1 recently broke the 64r6\_defconfig and
64r6el\_defconfig builds by indirectly selecting MPILIB. The same build
errors can be reproduced on older kernels by enabling e.g. CRYPTO\_RSA:
lib/mpi/generic\_mpih-mul1.o: In function `mpihelp\_mul\_1':
lib/mpi/generic\_mpih-mul1.c:50: undefined reference to `\_\_multi3'
lib/mpi/generic\_mpih-mul2.o: In function `mpihelp\_addmul\_1':
lib/mpi/generic\_mpih-mul2.c:49: undefined reference to `\_\_multi3'
lib/mpi/generic\_mpih-mul3.o: In function `mpihelp\_submul\_1':
lib/mpi/generic\_mpih-mul3.c:49: undefined reference to `\_\_multi3'
lib/mpi/mpih-div.o In function `mpihelp\_divrem':
lib/mpi/mpih-div.c:205: undefined reference to `\_\_multi3'
lib/mpi/mpih-div.c:142: undefined reference to `\_\_multi3'
Therefore add an efficient MIPS64r6 implementation of umul\_ppmm() using
inline assembly and the DMULU/DMUHU instructions, to prevent \_\_multi3
calls being emitted.
Fixes: 7fd08ca58ae6 ("MIPS: Add build support for the MIPS R6 ISA")
Signed-off-by: James Hogan
Cc: Ralf Baechle
Cc: Herbert Xu
Cc: "David S. Miller"
Cc: linux-mips@linux-mips.org
Cc: linux-crypto@vger.kernel.org
Signed-off-by: Herbert Xu
Signed-off-by: Sasha Levin
commit 6c6fe7d89a77114147f2a99660491960e788b6ea
Author: Cathy Avery
Date: Tue Dec 19 13:32:48 2017 -0500
scsi: storvsc: Fix scsi\_cmd error assignments in storvsc\_handle\_error
[ Upstream commit d1b8b2391c24751e44f618fcf86fb55d9a9247fd ]
When an I/O is returned with an srb\_status of SRB\_STATUS\_INVALID\_LUN
which has zero good\_bytes it must be assigned an error. Otherwise the
I/O will be continuously requeued and will cause a deadlock in the case
where disks are being hot added and removed. sd\_probe\_async will wait
forever for its I/O to complete while holding scsi\_sd\_probe\_domain.
Also returning the default error of DID\_TARGET\_FAILURE causes multipath
to not retry the I/O resulting in applications receiving I/O errors
before a failover can occur.
Signed-off-by: Cathy Avery
Signed-off-by: Long Li
Reviewed-by: Stephen Hemminger
Signed-off-by: Martin K. Petersen
Signed-off-by: Sasha Levin
commit 7e49d636e61a0b2f450c463147c2b0cb0f1aba8d
Author: Alexander Kochetkov
Date: Fri Dec 15 20:20:06 2017 +0300
net: arc\_emac: fix arc\_emac\_rx() error paths
[ Upstream commit e688822d035b494071ecbadcccbd6f3325fb0f59 ]
arc\_emac\_rx() has some issues found by code review.
In case netdev\_alloc\_skb\_ip\_align() or dma\_map\_single() failure
rx fifo entry will not be returned to EMAC.
In case dma\_map\_single() failure previously allocated skb became
lost to driver. At the same time address of newly allocated skb
will not be provided to EMAC.
Signed-off-by: Alexander Kochetkov
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit 69851339b19154cf49013739a36eece169b1bf1a
Author: Radu Pirea
Date: Fri Dec 15 17:40:17 2017 +0200
spi: atmel: fixed spin\_lock usage inside atmel\_spi\_remove
[ Upstream commit 66e900a3d225575c8b48b59ae1fe74bb6e5a65cc ]
The only part of atmel\_spi\_remove which needs to be atomic is hardware
reset.
atmel\_spi\_stop\_dma calls dma\_terminate\_all and this needs interrupts
enabled.
atmel\_spi\_release\_dma calls dma\_release\_channel and dma\_release\_channel
locks a mutex inside of spin\_lock.
So the call of these functions can't be inside a spin\_lock.
Reported-by: Jia-Ju Bai
Signed-off-by: Radu Pirea
Signed-off-by: Mark Brown
Signed-off-by: Sasha Levin
commit 0ca00a61a3608ca07def8516b74b88ae685856dc
Author: Al Viro
Date: Mon Dec 18 15:05:07 2017 -0500
sget(): handle failures of register\_shrinker()
[ Upstream commit 9ee332d99e4d5a97548943b81c54668450ce641b ]
Signed-off-by: Al Viro
Signed-off-by: Sasha Levin
commit 17710634e40d84baab05c79447686cd6fbdf8c77
Author: Brendan McGrath
Date: Wed Dec 13 22:14:57 2017 +1100
ipv6: icmp6: Allow icmp messages to be looped back
[ Upstream commit 588753f1eb18978512b1c9b85fddb457d46f9033 ]
One example of when an ICMPv6 packet is required to be looped back is
when a host acts as both a Multicast Listener and a Multicast Router.
A Multicast Router will listen on address ff02::16 for MLDv2 messages.
Currently, MLDv2 messages originating from a Multicast Listener running
on the same host as the Multicast Router are not being delivered to the
Multicast Router. This is due to dst.input being assigned the default
value of dst\_discard.
This results in the packet being looped back but discarded before being
delivered to the Multicast Router.
This patch sets dst.input to ip6\_input to ensure a looped back packet
is delivered to the Multicast Router.
Signed-off-by: Brendan McGrath
Signed-off-by: David S. Miller
Signed-off-by: Sasha Levin
commit b8bbe2041321334cd2fab3ab08c891bb7306a415
Author: Sascha Hauer
Date: Tue Dec 5 11:51:40 2017 +0100
mtd: nand: gpmi: Fix failure when a erased page has a bitflip at BBM
[ Upstream commit fdf2e821052958a114618a95ab18a300d0b080cb ]
When erased subpages are read then the BCH decoder returns STATUS\_ERASED
if they are all empty, or STATUS\_UNCORRECTABLE if there are bitflips.
When there are bitflips, we have to set these bits again to show the
upper layers a completely erased page. When a bitflip happens in the
exact byte where the bad block marker is, then this byte is swapped
with another byte in block\_mark\_swapping(). The correction code then
detects a bitflip in another subpage and no longer corrects the bitflip
where it really happens.
Correct this behaviour by calling block\_mark\_swapping() after the
bitflips have been corrected.
In our case UBIFS failed with this bug because it expects erased
pages to be really empty:
UBIFS error (pid 187): ubifs\_scan: corrupt empty space at LEB 36:118735
UBIFS error (pid 187): ubifs\_scanned\_corruption: corruption at LEB 36:118735
UBIFS error (pid 187): ubifs\_scanned\_corruption: first 8192 bytes from LEB 36:118735
UBIFS error (pid 187): ubifs\_scan: LEB 36 scanning failed
UBIFS error (pid 187): do\_commit: commit failed, error -117
Signed-off-by: Sascha Hauer
Reviewed-by: Richard Weinberger
Acked-by: Boris Brezillon
Signed-off-by: Richard Weinberger
Signed-off-by: Sasha Levin
commit 291a16f3a8db60c0ba4a3a04ca193e90389e2396
Author: Anna-Maria Gleixner
Date: Thu Dec 21 11:41:35 2017 +0100
hrtimer: Ensure POSIX compliance (relative CLOCK\_REALTIME hrtimers)
[ Upstream commit 48d0c9becc7f3c66874c100c126459a9da0fdced ]
The POSIX specification defines that relative CLOCK\_REALTIME timers are not
affected by clock modifications. Those timers have to use CLOCK\_MONOTONIC
to ensure POSIX compliance.
The introduction of the additional HRTIMER\_MODE\_PINNED mode broke this
requirement for pinned timers.
There is no user space visible impact because user space timers are not
using pinned mode, but for consistency reasons this needs to be fixed.
Check whether the mode has the HRTIMER\_MODE\_REL bit set instead of
comparing with HRTIMER\_MODE\_ABS.
Signed-off-by: Anna-Maria Gleixner
Cc: Christoph Hellwig
Cc: John Stultz
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: keescook@chromium.org
Fixes: 597d0275736d ("timers: Framework for identifying pinned timers")
Link: http://lkml.kernel.org/r/20171221104205.7269-7-anna-maria@linutronix.de
Signed-off-by: Ingo Molnar
Signed-off-by: Sasha Levin
commit ffbc07d6fae3e57e0fc0d21692c97905c402a0b6
Author: Masami Hiramatsu
Date: Fri Jan 19 01:15:20 2018 +0900
kprobes/x86: Disable optimizing on the function jumps to indirect thunk
[ Upstream commit c86a32c09f8ced67971a2310e3b0dda4d1749007 ]
Since indirect jump instructions will be replaced by jump
to \_\_x86\_indirect\_thunk\_\*, those jmp instruction must be
treated as an indirect jump. Since optprobe prohibits to
optimize probes in the function which uses an indirect jump,
it also needs to find out the function which jump to
\_\_x86\_indirect\_thunk\_\* and disable optimization.
Add a check that the jump target address is between the
\_\_indirect\_thunk\_start/end when optimizing kprobe.
Signed-off-by: Masami Hiramatsu
Signed-off-by: Thomas Gleixner
Acked-by: David Woodhouse
Cc: Andi Kleen
Cc: Peter Zijlstra
Cc: Ananth N Mavinakayanahalli
Cc: Arjan van de Ven
Cc: Greg Kroah-Hartman
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/151629212062.10241.6991266100233002273.stgit@devbox
Signed-off-by: Sasha Levin
commit 02610e1eef1592fbf24272c58c9224498511bc67
Author: David Woodhouse
Date: Thu Jan 11 21:46:31 2018 +0000
x86/retpoline/xen: Convert Xen hypercall indirect jumps
[ Upstream commit ea08816d5b185ab3d09e95e393f265af54560350 ]
Convert indirect call in Xen hypercall to use non-speculative sequence,
when CONFIG\_RETPOLINE is enabled.
Signed-off-by: David Woodhouse
Signed-off-by: Thomas Gleixner
Acked-by: Arjan van de Ven
Acked-by: Ingo Molnar
Reviewed-by: Juergen Gross
Cc: gnomes@lxorguk.ukuu.org.uk
Cc: Rik van Riel
Cc: Andi Kleen
Cc: Josh Poimboeuf
Cc: thomas.lendacky@amd.com
Cc: Peter Zijlstra
Cc: Linus Torvalds
Cc: Jiri Kosina
Cc: Andy Lutomirski
Cc: Dave Hansen
Cc: Kees Cook
Cc: Tim Chen
Cc: Greg Kroah-Hartman
Cc: Paul Turner
Link: https://lkml.kernel.org/r/1515707194-20531-10-git-send-email-dwmw@amazon.co.uk
Signed-off-by: Sasha Levin
commit baf21ffd27c2e57c820e3fcef424fe5558400a8e
Author: David Woodhouse
Date: Thu Jan 11 21:46:30 2018 +0000
x86/retpoline/hyperv: Convert assembler indirect jumps
[ Upstream commit e70e5892b28c18f517f29ab6e83bd57705104b31 ]
Convert all indirect jumps in hyperv inline asm code to use non-speculative
sequences when CONFIG\_RETPOLINE is enabled.
Signed-off-by: David Woodhouse
Signed-off-by: Thomas Gleixner
Acked-by: Arjan van de Ven
Acked-by: Ingo Molnar
Cc: gnomes@lxorguk.ukuu.org.uk
Cc: Rik van Riel
Cc: Andi Kleen
Cc: Josh Poimboeuf
Cc: thomas.lendacky@amd.com
Cc: Peter Zijlstra
Cc: Linus Torvalds
Cc: Jiri Kosina
Cc: Andy Lutomirski
Cc: Dave Hansen
Cc: Kees Cook
Cc: Tim Chen
Cc: Greg Kroah-Hartman
Cc: Paul Turner
Link: https://lkml.kernel.org/r/1515707194-20531-9-git-send-email-dwmw@amazon.co.uk
Signed-off-by: Sasha Levin
commit 7c22550e61597f849b7718ef1c1e0f745ff9f902
Author: David Woodhouse
Date: Thu Jan 11 21:46:27 2018 +0000
x86/retpoline/crypto: Convert crypto assembler indirect jumps
[ Upstream commit 9697fa39efd3fc3692f2949d4045f393ec58450b ]
Convert all indirect jumps in crypto assembler code to use non-speculative
sequences when CONFIG\_RETPOLINE is enabled.
Signed-off-by: David Woodhouse
Signed-off-by: Thomas Gleixner
Acked-by: Arjan van de Ven
Acked-by: Ingo Molnar
Cc: gnomes@lxorguk.ukuu.org.uk
Cc: Rik van Riel
Cc: Andi Kleen
Cc: Josh Poimboeuf
Cc: thomas.lendacky@amd.com
Cc: Peter Zijlstra
Cc: Linus Torvalds
Cc: Jiri Kosina
Cc: Andy Lutomirski
Cc: Dave Hansen
Cc: Kees Cook
Cc: Tim Chen
Cc: Greg Kroah-Hartman
Cc: Paul Turner
Link: https://lkml.kernel.org/r/1515707194-20531-6-git-send-email-dwmw@amazon.co.uk
Signed-off-by: Sasha Levin


=== Content from bugzilla.redhat.com_f77f9aba_20250126_104633.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1560494)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1560494)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1560494)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1560494

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

RHEL Engineering is moving the tracking of its product development work on RHEL 6 through RHEL 9 to Red Hat Jira ([**issues.redhat.com**](https://issues.redhat.com)). If you're a Red Hat customer, please continue to file support cases via the [**Red Hat customer portal**](https://access.redhat.com/support/cases/). If you're not, please head to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira and file new tickets here. Individual Bugzilla bugs in the statuses "**NEW**", "**ASSIGNED**", and "**POST**" are being migrated throughout September 2023. Bugs of Red Hat partners with an assigned Engineering Partner Manager (EPM) are migrated in late September as per pre-agreed dates. Bugs against components "**kernel**", "**kernel-rt**", and "**kpatch**" are only migrated if still in "**NEW**" or "**ASSIGNED**". If you cannot log in to RH Jira, please consult [**article #7032570**](https://access.redhat.com/articles/7032570). That failing, please send an e-mail to the RH Jira admins at **rh-issues@redhat.com** to troubleshoot your issue as a user management inquiry. The email creates a ServiceNow ticket with Red Hat. Individual Bugzilla bugs that are migrated will be moved to status "**CLOSED**", resolution "**MIGRATED**", and set with "**MigratedToJIRA**" in "**Keywords**". The link to the successor Jira issue will be found under "**Links**", have a little "two-footprint" icon next to it, and direct you to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira (issue links are of type "**https://issues.redhat.com/browse/RHEL-XXXX**", where "**X**" is a digit). This same link will be available in a blue banner at the top of the page informing you that that bug has been migrated.

[**Bug 1560494**](show_bug.cgi?id=1560494)
- i686: Using invpcid\_flush\_all\_nonglobals() can cause user-space panic on .i686

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
i686: Using invpcid\_flush\_all\_nonglobals() can cause user-space panic on .i686

| | [Keywords](describekeywords.cgi): | Regression | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat Enterprise Linux 6 | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat Enterprise Linux 6 "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | kernel | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- Storage      Multiple Devices (MD)      Device Mapper          Core          Crypt          Multipath          RAID          Snapshots          Thin Provisioning          Other      Storage Drivers      Block Layer      Other  File Systems      VFS      GFS/GFS2      XFS      ext\*      Btrfs      NFS      CIFS      AutoFS      Other  Networking      NIC Drivers      Bluetooth      Wifi      Protocol          sctp          igmp/mld          tcp          udp          arp/icmp      IPv6      Vlan      Bonding      Team      Bridge      OVS      Tunnel      IPSec/Crypto      Netfilter      PTP      Misc  Power Management  Desktop      Graphics      Audio      V4L      fbdev      USB      Desktop Other  Virtualization      Xen      ESXi      Hyper-V      KVM      aliyun\_instance      Other  Debugging/Tracing      Kexec/kdump      Utrace/Uprobe/Ptrace      Ftrace      Perf      Oprofile      Systemtap  Platform Enablement      Partner Firmware      RFEs  Infiniband  Security      ASLR      IMA      KASLR      SELinux      Audit      TPM      Key Management      Other  Memory Management  Scheduler  Process management  EDAC/HERM  Locking/lockdep  Resource Management      Control Groups      Namespace  Crypto  kabi-whitelists  Other | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 6.9 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | rc | | [Target Release](page.cgi?id=fields.html#target_release): | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Waiman Long | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Li Wang | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1560494&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1560494&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2018-03-26 10:32 UTC by Vratislav Bendel | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-06-10 15:30 UTC ([History](show_activity.cgi?id=1560494)) | | [CC List:](page.cgi?id=fields.html#cclist) | 6 users (show)  lwang mkostyukevic nyelle stalexan vbendel xiawu | | Fixed In Version: | kernel-2.6.32-754.el6 | | | Doc Type: | If docs needed, set a value | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2018-06-19 05:05:17 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2018:1854](https://access.redhat.com/errata/RHSA-2018%3A1854) | 0 | normal | SHIPPED\_LIVE | Important: kernel security and bug fix update | 2018-06-19 08:58:56 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1560494#c0)  Vratislav Bendel    2018-03-26 10:32:26 UTC  ``` Description of problem:  Customer's java application can cause panic, apparently after the CPU performs invpcid flush.   Customer bisected this to the following commit: commit c6f35cdfc82ca083c041a24fdf33e1b84f80912d     [x86] mm/kaiser: use invpcid to flush the two kaiser PCID AISD  From what I understand, then apparently the following might be the problem (however I don't currently understand why):    static inline void __native_flush_tlb(void)  { -       __load_cr3(native_read_cr3()); +       if (!static_cpu_has(X86_FEATURE_INVPCID)) { +               __load_cr3(native_read_cr3()); +               return; +       } +       /* +        * Note, this works with CR4.PCIDE=0 or 1. +        */ +       invpcid_flush_all_nonglobals();  }  Other modifications done by the commit are either under #CONFIG_KAISER or #CONFIG_X86_64, which are not included into .i686 build.   Additionally, disabling invpcid on boot-cmd-line *seems to resolve* the problem. (using 'noinvpcid' boot parameter)   Version-Release number of selected component (if applicable): kernel-2.6.32-696.18.7.el6.i686  How reproducible: Always  Steps to Reproduce: TBA  Actual results: 0xf error_code page_fault panic  Expected results: no panic  Additional info: Usage of 'noinvpcid' boot-param in -696.18.7 version is exclusive to #CONFIG_X86_64, however on upstream it's general.   Customer has tested the workaround ('noinvpcid') on -696.18.7.test kernel, simply modified to enable it on .i686.   ```  [Comment 13](show_bug.cgi?id=1560494#c13)  Phillip Lougher    2018-05-24 23:38:31 UTC  ``` Patch(es) committed on kernel repository and kernel is undergoing testing   ```  [Comment 15](show_bug.cgi?id=1560494#c15)  Phillip Lougher    2018-05-25 02:12:27 UTC  ``` Patch(es) available on kernel-2.6.32-754.el6   ```  [Comment 19](show_bug.cgi?id=1560494#c19)  errata-xmlrpc    2018-06-19 05:05:17 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2018:1854](https://access.redhat.com/errata/RHSA-2018%3A1854)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1560494&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from cdn.kernel.org_1c914057_20250125_175549.html ===
commit b67416226a0cff3f49032de36906ad1ebe5694a0
Author: Greg Kroah-Hartman
Date: Sun Mar 11 16:21:35 2018 +0100
Linux 4.9.87
commit 931dde83a2696d8794042ebbf724f60eda5983c3
Author: Ernesto A. Fernández
Date: Wed Aug 2 03:18:27 2017 -0300
btrfs: preserve i\_mode if \_\_btrfs\_set\_acl() fails
commit d7d824966530acfe32b94d1ed672e6fe1638cd68 upstream.
When changing a file's acl mask, btrfs\_set\_acl() will first set the
group bits of i\_mode to the value of the mask, and only then set the
actual extended attribute representing the new acl.
If the second part fails (due to lack of space, for example) and the
file had no acl attribute to begin with, the system will from now on
assume that the mask permission bits are actual group permission bits,
potentially granting access to the wrong users.
Prevent this by restoring the original mode bits if \_\_btrfs\_set\_acl
fails.
Signed-off-by: Ernesto A. Fernández
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Nikolay Borisov
Signed-off-by: Greg Kroah-Hartman
commit 2b70de4ea91bca18f6080f441fac9c500a7ec7c3
Author: Daniel Borkmann
Date: Thu Mar 8 16:17:37 2018 +0100
bpf, ppc64: fix out of bounds access in tail call
[ upstream commit d269176e766c71c998cb75b4ea8cbc321cc0019d ]
While working on 16338a9b3ac3 ("bpf, arm64: fix out of bounds access in
tail call") I noticed that ppc64 JIT is partially affected as well. While
the bound checking is correctly performed as unsigned comparison, the
register with the index value however, is never truncated into 32 bit
space, so e.g. a index value of 0x100000000ULL with a map of 1 element
would pass with PPC\_CMPLW() whereas we later on continue with the full
64 bit register value. Therefore, as we do in interpreter and other JITs
truncate the value to 32 bit initially in order to fix access.
Fixes: ce0761419fae ("powerpc/bpf: Implement support for tail calls")
Signed-off-by: Daniel Borkmann
Reviewed-by: Naveen N. Rao
Tested-by: Naveen N. Rao
Signed-off-by: Alexei Starovoitov
Signed-off-by: Daniel Borkmann
Signed-off-by: Greg Kroah-Hartman
commit 2a8bc5316adc998951e8f726c31e231a6021eae2
Author: Eric Dumazet
Date: Thu Mar 8 16:17:36 2018 +0100
bpf: add schedule points in percpu arrays management
[ upstream commit 32fff239de37ef226d5b66329dd133f64d63b22d ]
syszbot managed to trigger RCU detected stalls in
bpf\_array\_free\_percpu()
It takes time to allocate a huge percpu map, but even more time to free
it.
Since we run in process context, use cond\_resched() to yield cpu if
needed.
Fixes: a10423b87a7e ("bpf: introduce BPF\_MAP\_TYPE\_PERCPU\_ARRAY map")
Signed-off-by: Eric Dumazet
Reported-by: syzbot
Signed-off-by: Daniel Borkmann
Signed-off-by: Greg Kroah-Hartman
commit 54c6d01b1a4fa674e70da842fef95382044dc1e4
Author: Daniel Borkmann
Date: Thu Mar 8 16:17:35 2018 +0100
bpf, arm64: fix out of bounds access in tail call
[ upstream commit 16338a9b3ac30740d49f5dfed81bac0ffa53b9c7 ]
I recently noticed a crash on arm64 when feeding a bogus index
into BPF tail call helper. The crash would not occur when the
interpreter is used, but only in case of JIT. Output looks as
follows:
[ 347.007486] Unable to handle kernel paging request at virtual address fffb850e96492510
[...]
[ 347.043065] [fffb850e96492510] address between user and kernel address ranges
[ 347.050205] Internal error: Oops: 96000004 [#1] SMP
[...]
[ 347.190829] x13: 0000000000000000 x12: 0000000000000000
[ 347.196128] x11: fffc047ebe782800 x10: ffff808fd7d0fd10
[ 347.201427] x9 : 0000000000000000 x8 : 0000000000000000
[ 347.206726] x7 : 0000000000000000 x6 : 001c991738000000
[ 347.212025] x5 : 0000000000000018 x4 : 000000000000ba5a
[ 347.217325] x3 : 00000000000329c4 x2 : ffff808fd7cf0500
[ 347.222625] x1 : ffff808fd7d0fc00 x0 : ffff808fd7cf0500
[ 347.227926] Process test\_verifier (pid: 4548, stack limit = 0x000000007467fa61)
[ 347.235221] Call trace:
[ 347.237656] 0xffff000002f3a4fc
[ 347.240784] bpf\_test\_run+0x78/0xf8
[ 347.244260] bpf\_prog\_test\_run\_skb+0x148/0x230
[ 347.248694] SyS\_bpf+0x77c/0x1110
[ 347.251999] el0\_svc\_naked+0x30/0x34
[ 347.255564] Code: 9100075a d280220a 8b0a002a d37df04b (f86b694b)
[...]
In this case the index used in BPF r3 is the same as in r1
at the time of the call, meaning we fed a pointer as index;
here, it had the value 0xffff808fd7cf0500 which sits in x2.
While I found tail calls to be working in general (also for
hitting the error cases), I noticed the following in the code
emission:
# bpftool p d j i 988
[...]
38: ldr w10, [x1,x10]
3c: cmp w2, w10
40: b.ge 0x000000000000007c <-- signed cmp
44: mov x10, #0x20 // #32
48: cmp x26, x10
4c: b.gt 0x000000000000007c
50: add x26, x26, #0x1
54: mov x10, #0x110 // #272
58: add x10, x1, x10
5c: lsl x11, x2, #3
60: ldr x11, [x10,x11] <-- faulting insn (f86b694b)
64: cbz x11, 0x000000000000007c
[...]
Meaning, the tests passed because commit ddb55992b04d ("arm64:
bpf: implement bpf\_tail\_call() helper") was using signed compares
instead of unsigned which as a result had the test wrongly passing.
Change this but also the tail call count test both into unsigned
and cap the index as u32. Latter we did as well in 90caccdd8cc0
("bpf: fix bpf\_tail\_call() x64 JIT") and is needed in addition here,
too. Tested on HiSilicon Hi1616.
Result after patch:
# bpftool p d j i 268
[...]
38: ldr w10, [x1,x10]
3c: add w2, w2, #0x0
40: cmp w2, w10
44: b.cs 0x0000000000000080
48: mov x10, #0x20 // #32
4c: cmp x26, x10
50: b.hi 0x0000000000000080
54: add x26, x26, #0x1
58: mov x10, #0x110 // #272
5c: add x10, x1, x10
60: lsl x11, x2, #3
64: ldr x11, [x10,x11]
68: cbz x11, 0x0000000000000080
[...]
Fixes: ddb55992b04d ("arm64: bpf: implement bpf\_tail\_call() helper")
Signed-off-by: Daniel Borkmann
Signed-off-by: Alexei Starovoitov
Signed-off-by: Daniel Borkmann
Signed-off-by: Greg Kroah-Hartman
commit 017219b598b4804ae23eb1447d24da13030c3fb2
Author: Daniel Borkmann
Date: Thu Mar 8 16:17:34 2018 +0100
bpf, x64: implement retpoline for tail call
[ upstream commit a493a87f38cfa48caaa95c9347be2d914c6fdf29 ]
Implement a retpoline [0] for the BPF tail call JIT'ing that converts
the indirect jump via jmp %rax that is used to make the long jump into
another JITed BPF image. Since this is subject to speculative execution,
we need to control the transient instruction sequence here as well
when CONFIG\_RETPOLINE is set, and direct it into a pause + lfence loop.
The latter aligns also with what gcc / clang emits (e.g. [1]).
JIT dump after patch:
# bpftool p d x i 1
0: (18) r2 = map[id:1]
2: (b7) r3 = 0
3: (85) call bpf\_tail\_call#12
4: (b7) r0 = 2
5: (95) exit
With CONFIG\_RETPOLINE:
# bpftool p d j i 1
[...]
33: cmp %edx,0x24(%rsi)
36: jbe 0x0000000000000072 |\*
38: mov 0x24(%rbp),%eax
3e: cmp $0x20,%eax
41: ja 0x0000000000000072 |
43: add $0x1,%eax
46: mov %eax,0x24(%rbp)
4c: mov 0x90(%rsi,%rdx,8),%rax
54: test %rax,%rax
57: je 0x0000000000000072 |
59: mov 0x28(%rax),%rax
5d: add $0x25,%rax
61: callq 0x000000000000006d |+
66: pause |
68: lfence |
6b: jmp 0x0000000000000066 |
6d: mov %rax,(%rsp) |
71: retq |
72: mov $0x2,%eax
[...]
\* relative fall-through jumps in error case
+ retpoline for indirect jump
Without CONFIG\_RETPOLINE:
# bpftool p d j i 1
[...]
33: cmp %edx,0x24(%rsi)
36: jbe 0x0000000000000063 |\*
38: mov 0x24(%rbp),%eax
3e: cmp $0x20,%eax
41: ja 0x0000000000000063 |
43: add $0x1,%eax
46: mov %eax,0x24(%rbp)
4c: mov 0x90(%rsi,%rdx,8),%rax
54: test %rax,%rax
57: je 0x0000000000000063 |
59: mov 0x28(%rax),%rax
5d: add $0x25,%rax
61: jmpq \*%rax |-
63: mov $0x2,%eax
[...]
\* relative fall-through jumps in error case
- plain indirect jump as before
[0] https://support.google.com/faqs/answer/7625886
[1] https://github.com/gcc-mirror/gcc/commit/a31e654fa107be968b802786d747e962c2fcdb2b
Signed-off-by: Daniel Borkmann
Signed-off-by: Alexei Starovoitov
Signed-off-by: Daniel Borkmann
Signed-off-by: Greg Kroah-Hartman
commit 422baf61d4805a47456297a23e71d32f9f794658
Author: Daniel Borkmann
Date: Thu Mar 8 16:17:33 2018 +0100
bpf: fix mlock precharge on arraymaps
[ upstream commit 9c2d63b843a5c8a8d0559cc067b5398aa5ec3ffc ]
syzkaller recently triggered OOM during percpu map allocation;
while there is work in progress by Dennis Zhou to add \_\_GFP\_NORETRY
semantics for percpu allocator under pressure, there seems also a
missing bpf\_map\_precharge\_memlock() check in array map allocation.
Given today the actual bpf\_map\_charge\_memlock() happens after the
find\_and\_alloc\_map() in syscall path, the bpf\_map\_precharge\_memlock()
is there to bail out early before we go and do the map setup work
when we find that we hit the limits anyway. Therefore add this for
array map as well.
Fixes: 6c9059817432 ("bpf: pre-allocate hash map elements")
Fixes: a10423b87a7e ("bpf: introduce BPF\_MAP\_TYPE\_PERCPU\_ARRAY map")
Reported-by: syzbot+adb03f3f0bb57ce3acda@syzkaller.appspotmail.com
Signed-off-by: Daniel Borkmann
Cc: Dennis Zhou
Signed-off-by: Alexei Starovoitov
Signed-off-by: Daniel Borkmann
Signed-off-by: Greg Kroah-Hartman
commit 816cfeb77c0125c4943da725fc7f8b60d91b90a0
Author: Daniel Borkmann
Date: Thu Mar 8 16:17:32 2018 +0100
bpf: fix wrong exposure of map\_flags into fdinfo for lpm
[ upstream commit a316338cb71a3260201490e615f2f6d5c0d8fb2c ]
trie\_alloc() always needs to have BPF\_F\_NO\_PREALLOC passed in via
attr->map\_flags, since it does not support preallocation yet. We
check the flag, but we never copy the flag into trie->map.map\_flags,
which is later on exposed into fdinfo and used by loaders such as
iproute2. Latter uses this in bpf\_map\_selfcheck\_pinned() to test
whether a pinned map has the same spec as the one from the BPF obj
file and if not, bails out, which is currently the case for lpm
since it exposes always 0 as flags.
Also copy over flags in array\_map\_alloc() and stack\_map\_alloc().
They always have to be 0 right now, but we should make sure to not
miss to copy them over at a later point in time when we add actual
flags for them to use.
Fixes: b95a5c4db09b ("bpf: add a longest prefix match trie map implementation")
Reported-by: Jarno Rajahalme
Signed-off-by: Daniel Borkmann
Acked-by: Alexei Starovoitov
Signed-off-by: David S. Miller
Signed-off-by: Daniel Borkmann
Signed-off-by: Greg Kroah-Hartman
commit 93f3aff1d910c5363a42c2c18dec9939cb0d58c2
Author: Dan Williams
Date: Thu Mar 8 18:39:24 2018 +0000
mpls, nospec: Sanitize array index in mpls\_label\_ok()
commit 3968523f855050b8195134da951b87c20bd66130 upstream.
mpls\_label\_ok() validates that the 'platform\_label' array index from a
userspace netlink message payload is valid. Under speculation the
mpls\_label\_ok() result may not resolve in the CPU pipeline until after
the index is used to access an array element. Sanitize the index to zero
to prevent userspace-controlled arbitrary out-of-bounds speculation, a
precursor for a speculative execution side channel vulnerability.
Cc: "David S. Miller"
Cc: Eric W. Biederman
Signed-off-by: Dan Williams
Signed-off-by: David S. Miller
[bwh: Backported to 4.4:
- mpls\_label\_ok() doesn't take an extack parameter
- Drop change in mpls\_getroute()]
Signed-off-by: Ben Hutchings
Signed-off-by: Greg Kroah-Hartman
commit d77763dc70c4afa451b33f80013910d502bf3bb7
Author: David Ahern
Date: Thu Mar 8 18:36:16 2018 +0000
net: mpls: Pull common label check into helper
commit b7b386f42f079b25b942c756820e36c6bd09b2ca upstream.
mpls\_route\_add and mpls\_route\_del have the same checks on the label.
Move to a helper. Avoid duplicate extack messages in the next patch.
Signed-off-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
Signed-off-by: Greg Kroah-Hartman
commit 9b7d723439a444ea578462f50054641a09c45023
Author: Alexey Kodanev
Date: Fri Feb 9 17:35:23 2018 +0300
sctp: verify size of a new chunk in \_sctp\_make\_chunk()
[ Upstream commit 07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c ]
When SCTP makes INIT or INIT\_ACK packet the total chunk length
can exceed SCTP\_MAX\_CHUNK\_LEN which leads to kernel panic when
transmitting these packets, e.g. the crash on sending INIT\_ACK:
[ 597.804948] skbuff: skb\_over\_panic: text:00000000ffae06e4 len:120168
put:120156 head:000000007aa47635 data:00000000d991c2de
tail:0x1d640 end:0xfec0 dev:
...
[ 597.976970] ------------[ cut here ]------------
[ 598.033408] kernel BUG at net/core/skbuff.c:104!
[ 600.314841] Call Trace:
[ 600.345829]
[ 600.371639] ? sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.436934] skb\_put+0x16c/0x200
[ 600.477295] sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.540630] ? sctp\_packet\_config+0x890/0x890 [sctp]
[ 600.601781] ? \_\_sctp\_packet\_append\_chunk+0x3b4/0xd00 [sctp]
[ 600.671356] ? sctp\_cmp\_addr\_exact+0x3f/0x90 [sctp]
[ 600.731482] sctp\_outq\_flush+0x663/0x30d0 [sctp]
[ 600.788565] ? sctp\_make\_init+0xbf0/0xbf0 [sctp]
[ 600.845555] ? sctp\_check\_transmitted+0x18f0/0x18f0 [sctp]
[ 600.912945] ? sctp\_outq\_tail+0x631/0x9d0 [sctp]
[ 600.969936] sctp\_cmd\_interpreter.isra.22+0x3be1/0x5cb0 [sctp]
[ 601.041593] ? sctp\_sf\_do\_5\_1B\_init+0x85f/0xc30 [sctp]
[ 601.104837] ? sctp\_generate\_t1\_cookie\_event+0x20/0x20 [sctp]
[ 601.175436] ? sctp\_eat\_data+0x1710/0x1710 [sctp]
[ 601.233575] sctp\_do\_sm+0x182/0x560 [sctp]
[ 601.284328] ? sctp\_has\_association+0x70/0x70 [sctp]
[ 601.345586] ? sctp\_rcv+0xef4/0x32f0 [sctp]
[ 601.397478] ? sctp6\_rcv+0xa/0x20 [sctp]
...
Here the chunk size for INIT\_ACK packet becomes too big, mostly
because of the state cookie (INIT packet has large size with
many address parameters), plus additional server parameters.
Later this chunk causes the panic in skb\_put\_data():
skb\_packet\_transmit()
sctp\_packet\_pack()
skb\_put\_data(nskb, chunk->skb->data, chunk->skb->len);
'nskb' (head skb) was previously allocated with packet->size
from u16 'chunk->chunk\_hdr->length'.
As suggested by Marcelo we should check the chunk's length in
\_sctp\_make\_chunk() before trying to allocate skb for it and
discard a chunk if its size bigger than SCTP\_MAX\_CHUNK\_LEN.
Signed-off-by: Alexey Kodanev
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f3d26ce9ce34c5d34a23db6ecd00e23dec82febc
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:17 2018 +0100
s390/qeth: fix IPA command submission race
[ Upstream commit d22ffb5a712f9211ffd104c38fc17cbfb1b5e2b0 ]
If multiple IPA commands are build & sent out concurrently,
fill\_ipacmd\_header() may assign a seqno value to a command that's
different from what send\_control\_data() later assigns to this command's
reply.
This is due to other commands passing through send\_control\_data(),
and incrementing card->seqno.ipa along the way.
So one IPA command has no reply that's waiting for its seqno, while some
other IPA command has multiple reply objects waiting for it.
Only one of those waiting replies wins, and the other(s) times out and
triggers a recovery via send\_ipa\_cmd().
Fix this by making sure that the same seqno value is assigned to
a command and its reply object.
Do so immediately before submitting the command & while holding the
irq\_pending "lock", to produce nicely ascending seqnos.
As a side effect, \*all\* IPA commands now use a reply object that's
waiting for its actual seqno. Previously, early IPA commands that were
submitted while the card was still DOWN used the "catch-all" IDX seqno.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 058db71dd8d68973e3add8b5a355036ddc13b460
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:16 2018 +0100
s390/qeth: fix IP address lookup for L3 devices
[ Upstream commit c5c48c58b259bb8f0482398370ee539d7a12df3e ]
Current code ("qeth\_l3\_ip\_from\_hash()") matches a queried address object
against objects in the IP table by IP address, Mask/Prefix Length and
MAC address ("qeth\_l3\_ipaddrs\_is\_equal()"). But what callers actually
require is either
a) "is this IP address registered" (ie. match by IP address only),
before adding a new address.
b) or "is this address object registered" (ie. match all relevant
attributes), before deleting an address.
Right now
1. the ADD path is too strict in its lookup, and eg. doesn't detect
conflicts between an existing NORMAL address and a new VIPA address
(because the NORMAL address will have mask != 0, while VIPA has
a mask == 0),
2. the DELETE path is not strict enough, and eg. allows del\_rxip() to
delete a VIPA address as long as the IP address matches.
Fix all this by adding helpers (\_addr\_match\_ip() and \_addr\_match\_all())
that do the appropriate checking.
Note that the ADD path for NORMAL addresses is special, as qeth keeps
track of how many times such an address is in use (and there is no
immediate way of returning errors to the caller). So when a requested
NORMAL address \_fully\_ matches an existing one, it's not considered a
conflict and we merely increment the refcount.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 2a3db8370ae36bb884512e35bd559e07bf4148df
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:14 2018 +0100
s390/qeth: fix double-free on IP add/remove race
[ Upstream commit 14d066c3531a87f727968cacd85bd95c75f59843 ]
Registering an IPv4 address with the HW takes quite a while, so we
temporarily drop the ip\_htable lock. Any concurrent add/remove of the
same IP adjusts the IP's use count, and (on remove) is then blocked by
addr->in\_progress.
After the register call has completed, we check the use count for
concurrently attempted add/remove calls - and possibly straight-away
deregister the IP again. This happens via l3\_delete\_ip(), which
1) looks up the queried IP in the htable (getting a reference to the
\*same\* queried object),
2) deregisters the IP from the HW, and
3) frees the IP object.
The caller in l3\_add\_ip() then does a second free on the same object.
For this case, skip all the extra checks and lookups in l3\_delete\_ip()
and just deregister & free the IP object ourselves.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1537f144ac065b571c4d2c1969a389e138f06150
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:13 2018 +0100
s390/qeth: fix IP removal on offline cards
[ Upstream commit 98d823ab1fbdcb13abc25b420f9bb71bade42056 ]
If the HW is not reachable, then none of the IPs in qeth's internal
table has been registered with the HW yet. So when deleting such an IP,
there's no need to stage it for deregistration - just drop it from
the table.
This fixes the "add-delete-add" scenario on an offline card, where the
the second "add" merely increments the IP's use count. But as the IP is
still set to DISP\_ADDR\_DELETE from the previous "delete" step,
l3\_recover\_ip() won't register it with the HW when the card goes online.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 797658d05e40486104312a28abf1ac37e6479e14
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:12 2018 +0100
s390/qeth: fix overestimated count of buffer elements
[ Upstream commit 12472af89632beb1ed8dea29d4efe208ca05b06a ]
qeth\_get\_elements\_for\_range() doesn't know how to handle a 0-length
range (ie. start == end), and returns 1 when it should return 0.
Such ranges occur on TSO skbs, where the L2/L3/L4 headers (and thus all
of the skb's linear data) are skipped when mapping the skb into regular
buffer elements.
This overestimation may cause several performance-related issues:
1. sub-optimal IO buffer selection, where the next buffer gets selected
even though the skb would actually still fit into the current buffer.
2. forced linearization, if the element count for a non-linear skb
exceeds QETH\_MAX\_BUFFER\_ELEMENTS.
Rather than modifying qeth\_get\_elements\_for\_range() and adding overhead
to every caller, fix up those callers that are in risk of passing a
0-length range.
Fixes: 2863c61334aa ("qeth: refactor calculation of SBALE count")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3c0718711177865020e89a714f062b6403ff78e5
Author: Julian Wiedmann
Date: Fri Feb 9 11:03:50 2018 +0100
s390/qeth: fix SETIP command handling
[ Upstream commit 1c5b2216fbb973a9410e0b06389740b5c1289171 ]
send\_control\_data() applies some special handling to SETIP v4 IPA
commands. But current code parses \*all\* command types for the SETIP
command code. Limit the command code check to IPA commands.
Fixes: 5b54e16f1a54 ("qeth: do not spin for SETIP ip assist command")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8d072588de679ef1593f67d8d4de7184111efa4f
Author: Ursula Braun
Date: Fri Feb 9 11:03:49 2018 +0100
s390/qeth: fix underestimated count of buffer elements
[ Upstream commit 89271c65edd599207dd982007900506283c90ae3 ]
For a memory range/skb where the last byte falls onto a page boundary
(ie. 'end' is of the form xxx...xxx001), the PFN\_UP() part of the
calculation currently doesn't round up to the next PFN due to an
off-by-one error.
Thus qeth believes that the skb occupies one page less than it
actually does, and may select a IO buffer that doesn't have enough spare
buffer elements to fit all of the skb's data.
HW detects this as a malformed buffer descriptor, and raises an
exception which then triggers device recovery.
Fixes: 2863c61334aa ("qeth: refactor calculation of SBALE count")
Signed-off-by: Ursula Braun
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a818270c30685bc22033b1af2f7d72f72b052602
Author: Alexey Kodanev
Date: Mon Feb 5 15:10:35 2018 +0300
sctp: fix dst refcnt leak in sctp\_v6\_get\_dst()
[ Upstream commit 957d761cf91cdbb175ad7d8f5472336a4d54dbf2 ]
When going through the bind address list in sctp\_v6\_get\_dst() and
the previously found address is better ('matchlen > bmatchlen'),
the code continues to the next iteration without releasing currently
held destination.
Fix it by releasing 'bdst' before continue to the next iteration, and
instead of introducing one more '!IS\_ERR(bdst)' check for dst\_release(),
move the already existed one right after ip6\_dst\_lookup\_flow(), i.e. we
shouldn't proceed further if we get an error for the route lookup.
Fixes: dbc2b5e9a09e ("sctp: fix src address selection if using secondary addresses for ipv6")
Signed-off-by: Alexey Kodanev
Acked-by: Neil Horman
Acked-by: Marcelo Ricardo Leitner
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 45fa6615258e0c01e574333f2b2a94425788f3f2
Author: Eric Dumazet
Date: Wed Feb 21 06:43:03 2018 -0800
tcp\_bbr: better deal with suboptimal GSO
[ Upstream commit 350c9f484bde93ef229682eedd98cd5f74350f7f ]
BBR uses tcp\_tso\_autosize() in an attempt to probe what would be the
burst sizes and to adjust cwnd in bbr\_target\_cwnd() with following
gold formula :
/\* Allow enough full-sized skbs in flight to utilize end systems. \*/
cwnd += 3 \* bbr->tso\_segs\_goal;
But GSO can be lacking or be constrained to very small
units (ip link set dev ... gso\_max\_segs 2)
What we really want is to have enough packets in flight so that both
GSO and GRO are efficient.
So in the case GSO is off or downgraded, we still want to have the same
number of packets in flight as if GSO/TSO was fully operational, so
that GRO can hopefully be working efficiently.
To fix this issue, we make tcp\_tso\_autosize() unaware of
sk->sk\_gso\_max\_segs
Only tcp\_tso\_segs() has to enforce the gso\_max\_segs limit.
Tested:
ethtool -K eth0 tso off gso off
tc qd replace dev eth0 root pfifo\_fast
Before patch:
for f in {1..5}; do ./super\_netperf 1 -H lpaa24 -- -K bbr; done
    691  (ss -temoi shows cwnd is stuck around 6 )
    667
    651
    631
    517
After patch :
# for f in {1..5}; do ./super\_netperf 1 -H lpaa24 -- -K bbr; done
   1733 (ss -temoi shows cwnd is around 386 )
   1778
   1746
   1781
   1718
Fixes: 0f8782ea1497 ("tcp\_bbr: add BBR congestion control")
Signed-off-by: Eric Dumazet
Reported-by: Oleksandr Natalenko
Acked-by: Neal Cardwell
Acked-by: Soheil Hassas Yeganeh
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 85924b81ecb078dfafa109eb9db90eff7d7a81a7
Author: David Howells
Date: Thu Feb 22 14:38:14 2018 +0000
rxrpc: Fix send in rxrpc\_send\_data\_packet()
[ Upstream commit 93c62c45ed5fad1b87e3a45835b251cd68de9c46 ]
All the kernel\_sendmsg() calls in rxrpc\_send\_data\_packet() need to send
both parts of the iov[] buffer, but one of them does not. Fix it so that
it does.
Without this, short IPv6 rxrpc DATA packets may be seen that have the rxrpc
header included, but no payload.
Fixes: 5a924b8951f8 ("rxrpc: Don't store the rxrpc header in the Tx queue sk\_buffs")
Reported-by: Marc Dionne
Signed-off-by: David Howells
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3efb90ae51210e4ba7d39f6cae297676541dc2d0
Author: Ilya Lesokhin
Date: Mon Feb 12 12:57:04 2018 +0200
tcp: Honor the eor bit in tcp\_mtu\_probe
[ Upstream commit 808cf9e38cd7923036a99f459ccc8cf2955e47af ]
Avoid SKB coalescing if eor bit is set in one of the relevant
SKBs.
Fixes: c134ecb87817 ("tcp: Make use of MSG\_EOR in tcp\_sendmsg")
Signed-off-by: Ilya Lesokhin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 19d32133abf960fb49ebb423390f6d8b238423eb
Author: Heiner Kallweit
Date: Thu Feb 8 21:01:48 2018 +0100
net: phy: fix phy\_start to consider PHY\_IGNORE\_INTERRUPT
[ Upstream commit 08f5138512180a479ce6b9d23b825c9f4cd3be77 ]
This condition wasn't adjusted when PHY\_IGNORE\_INTERRUPT (-2) was added
long ago. In case of PHY\_IGNORE\_INTERRUPT the MAC interrupt indicates
also PHY state changes and we should do what the symbol says.
Fixes: 84a527a41f38 ("net: phylib: fix interrupts re-enablement in phy\_start")
Signed-off-by: Heiner Kallweit
Reviewed-by: Florian Fainelli
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 804e337023e644c5d3ac5d23a9a9c2904e1331e3
Author: Shalom Toledo
Date: Thu Mar 1 11:37:05 2018 +0100
mlxsw: spectrum\_switchdev: Check success of FDB add operation
[ Upstream commit 0a8a1bf17e3af34f1f8d2368916a6327f8b3bfd5 ]
Until now, we assumed that in case of error when adding FDB entries, the
write operation will fail, but this is not the case. Instead, we need to
check that the number of entries reported in the response is equal to
the number of entries specified in the request.
Fixes: 56ade8fe3fe1 ("mlxsw: spectrum: Add initial support for Spectrum ASIC")
Reported-by: Ido Schimmel
Signed-off-by: Shalom Toledo
Reviewed-by: Ido Schimmel
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3812dda05c8d5c171970c2bcb7da5081f2392334
Author: Tommi Rantala
Date: Mon Feb 5 21:48:14 2018 +0200
sctp: fix dst refcnt leak in sctp\_v4\_get\_dst
[ Upstream commit 4a31a6b19f9ddf498c81f5c9b089742b7472a6f8 ]
Fix dst reference count leak in sctp\_v4\_get\_dst() introduced in commit
410f03831 ("sctp: add routing output fallback"):
When walking the address\_list, successive ip\_route\_output\_key() calls
may return the same rt->dst with the reference incremented on each call.
The code would not decrement the dst refcount when the dst pointer was
identical from the previous iteration, causing the dst refcnt leak.
Testcase:
ip netns add TEST
ip netns exec TEST ip link set lo up
ip link add dummy0 type dummy
ip link add dummy1 type dummy
ip link add dummy2 type dummy
ip link set dev dummy0 netns TEST
ip link set dev dummy1 netns TEST
ip link set dev dummy2 netns TEST
ip netns exec TEST ip addr add 192.168.1.1/24 dev dummy0
ip netns exec TEST ip link set dummy0 up
ip netns exec TEST ip addr add 192.168.1.2/24 dev dummy1
ip netns exec TEST ip link set dummy1 up
ip netns exec TEST ip addr add 192.168.1.3/24 dev dummy2
ip netns exec TEST ip link set dummy2 up
ip netns exec TEST sctp\_test -H 192.168.1.2 -P 20002 -h 192.168.1.1 -p 20000 -s -B 192.168.1.3
ip netns del TEST
In 4.4 and 4.9 kernels this results to:
[ 354.179591] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 364.419674] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 374.663664] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 384.903717] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 395.143724] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 405.383645] unregister\_netdevice: waiting for lo to become free. Usage count = 1
...
Fixes: 410f03831 ("sctp: add routing output fallback")
Fixes: 0ca50d12f ("sctp: fix src address selection if using secondary addresses")
Signed-off-by: Tommi Rantala
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5984901390079ef0c393cbd4db96392c0af7db9f
Author: Alexey Kodanev
Date: Thu Feb 15 20:18:43 2018 +0300
udplite: fix partial checksum initialization
[ Upstream commit 15f35d49c93f4fa9875235e7bf3e3783d2dd7a1b ]
Since UDP-Lite is always using checksum, the following path is
triggered when calculating pseudo header for it:
udp4\_csum\_init() or udp6\_csum\_init()
skb\_checksum\_init\_zero\_check()
\_\_skb\_checksum\_validate\_complete()
The problem can appear if skb->len is less than CHECKSUM\_BREAK. In
this particular case \_\_skb\_checksum\_validate\_complete() also invokes
\_\_skb\_checksum\_complete(skb). If UDP-Lite is using partial checksum
that covers only part of a packet, the function will return bad
checksum and the packet will be dropped.
It can be fixed if we skip skb\_checksum\_init\_zero\_check() and only
set the required pseudo header checksum for UDP-Lite with partial
checksum before udp4\_csum\_init()/udp6\_csum\_init() functions return.
Fixes: ed70fcfcee95 ("net: Call skb\_checksum\_init in IPv4")
Fixes: e4f45b7f40bd ("net: Call skb\_checksum\_init in IPv6")
Signed-off-by: Alexey Kodanev
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3741c8fad871b77ccc31f2255047ac0e71b8cb15
Author: Guillaume Nault
Date: Fri Mar 2 18:41:16 2018 +0100
ppp: prevent unregistered channels from connecting to PPP units
[ Upstream commit 77f840e3e5f09c6d7d727e85e6e08276dd813d11 ]
PPP units don't hold any reference on the channels connected to it.
It is the channel's responsibility to ensure that it disconnects from
its unit before being destroyed.
In practice, this is ensured by ppp\_unregister\_channel() disconnecting
the channel from the unit before dropping a reference on the channel.
However, it is possible for an unregistered channel to connect to a PPP
unit: register a channel with ppp\_register\_net\_channel(), attach a
/dev/ppp file to it with ioctl(PPPIOCATTCHAN), unregister the channel
with ppp\_unregister\_channel() and finally connect the /dev/ppp file to
a PPP unit with ioctl(PPPIOCCONNECT).
Once in this situation, the channel is only held by the /dev/ppp file,
which can be released at anytime and free the channel without letting
the parent PPP unit know. Then the ppp structure ends up with dangling
pointers in its ->channels list.
Prevent this scenario by forbidding unregistered channels from
connecting to PPP units. This maintains the code logic by keeping
ppp\_unregister\_channel() responsible from disconnecting the channel if
necessary and avoids modification on the reference counting mechanism.
This issue seems to predate git history (successfully reproduced on
Linux 2.6.26 and earlier PPP commits are unrelated).
Signed-off-by: Guillaume Nault
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 59e105c4cf0640971f82077432d6c3269804f3e7
Author: Nicolas Dichtel
Date: Tue Feb 6 14:48:32 2018 +0100
netlink: ensure to loop over all netns in genlmsg\_multicast\_allns()
[ Upstream commit cb9f7a9a5c96a773bbc9c70660dc600cfff82f82 ]
Nowadays, nlmsg\_multicast() returns only 0 or -ESRCH but this was not the
case when commit 134e63756d5f was pushed.
However, there was no reason to stop the loop if a netns does not have
listeners.
Returns -ESRCH only if there was no listeners in all netns.
To avoid having the same problem in the future, I didn't take the
assumption that nlmsg\_multicast() returns only 0 or -ESRCH.
Fixes: 134e63756d5f ("genetlink: make netns aware")
CC: Johannes Berg
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 06f01887683ffe76f295df9c87efdcbdb25df1d0
Author: Sabrina Dubroca
Date: Mon Feb 26 16:13:43 2018 +0100
net: ipv4: don't allow setting net.ipv4.route.min\_pmtu below 68
[ Upstream commit c7272c2f1229125f74f22dcdd59de9bbd804f1c8 ]
According to RFC 1191 sections 3 and 4, ICMP frag-needed messages
indicating an MTU below 68 should be rejected:
A host MUST never reduce its estimate of the Path MTU below 68
octets.
and (talking about ICMP frag-needed's Next-Hop MTU field):
This field will never contain a value less than 68, since every
router "must be able to forward a datagram of 68 octets without
fragmentation".
Furthermore, by letting net.ipv4.route.min\_pmtu be set to negative
values, we can end up with a very large PMTU when (-1) is cast into u32.
Let's also make ip\_rt\_min\_pmtu a u32, since it's only ever compared to
unsigned ints.
Reported-by: Jianlin Shi
Signed-off-by: Sabrina Dubroca
Reviewed-by: Stefano Brivio
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 106dc9648aa0db7b13f0c19f06b0786312a79c63
Author: Jakub Kicinski
Date: Mon Feb 12 21:35:31 2018 -0800
net: fix race on decreasing number of TX queues
[ Upstream commit ac5b70198adc25c73fba28de4f78adcee8f6be0b ]
netif\_set\_real\_num\_tx\_queues() can be called when netdev is up.
That usually happens when user requests change of number of
channels/rings with ethtool -L. The procedure for changing
the number of queues involves resetting the qdiscs and setting
dev->num\_tx\_queues to the new value. When the new value is
lower than the old one, extra care has to be taken to ensure
ordering of accesses to the number of queues vs qdisc reset.
Currently the queues are reset before new dev->num\_tx\_queues
is assigned, leaving a window of time where packets can be
enqueued onto the queues going down, leading to a likely
crash in the drivers, since most drivers don't check if TX
skbs are assigned to an active queue.
Fixes: e6484930d7c7 ("net: allocate tx queues in register\_netdevice")
Signed-off-by: Jakub Kicinski
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c9a3046de72a9eb8fabe70ad3f1f0751152e9be6
Author: Arnd Bergmann
Date: Thu Feb 22 16:55:34 2018 +0100
ipv6 sit: work around bogus gcc-8 -Wrestrict warning
[ Upstream commit ca79bec237f5809a7c3c59bd41cd0880aa889966 ]
gcc-8 has a new warning that detects overlapping input and output arguments
in memcpy(). It triggers for sit\_init\_net() calling ipip6\_tunnel\_clone\_6rd(),
which is actually correct:
net/ipv6/sit.c: In function 'sit\_init\_net':
net/ipv6/sit.c:192:3: error: 'memcpy' source argument is the same as destination [-Werror=restrict]
The problem here is that the logic detecting the memcpy() arguments finds them
to be the same, but the conditional that tests for the input and output of
ipip6\_tunnel\_clone\_6rd() to be identical is not a compile-time constant.
We know that netdev\_priv(t->dev) is the same as t for a tunnel device,
and comparing "dev" directly here lets the compiler figure out as well
that 'dev == sitn->fb\_tunnel\_dev' when called from sit\_init\_net(), so
it no longer warns.
This code is old, so Cc stable to make sure that we don't get the warning
for older kernels built with new gcc.
Cc: Martin Sebor
Link: https://gcc.gnu.org/bugzilla/show\_bug.cgi?id=83456
Signed-off-by: Arnd Bergmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 188633598e26c2ee25d0e2efb0a2f061c5666db5
Author: Denis Du
Date: Sat Feb 24 16:51:42 2018 -0500
hdlc\_ppp: carrier detect ok, don't turn off negotiation
[ Upstream commit b6c3bad1ba83af1062a7ff6986d9edc4f3d7fc8e ]
Sometimes when physical lines have a just good noise to make the protocol
handshaking fail, but the carrier detect still good. Then after remove of
the noise, nobody will trigger this protocol to be start again to cause
the link to never come back. The fix is when the carrier is still on, not
terminate the protocol handshaking.
Signed-off-by: Denis Du
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit def37b7db39147080a58041d97ad9120335c70c2
Author: Stefano Brivio
Date: Thu Feb 15 09:46:03 2018 +0100
fib\_semantics: Don't match route with mismatching tclassid
[ Upstream commit a8c6db1dfd1b1d18359241372bb204054f2c3174 ]
In fib\_nh\_match(), if output interface or gateway are passed in
the FIB configuration, we don't have to check next hops of
multipath routes to conclude whether we have a match or not.
However, we might still have routes with different realms
matching the same output interface and gateway configuration,
and this needs to cause the match to fail. Otherwise the first
route inserted in the FIB will match, regardless of the realms:
# ip route add 1.1.1.1 dev eth0 table 1234 realms 1/2
# ip route append 1.1.1.1 dev eth0 table 1234 realms 3/4
# ip route list table 1234
1.1.1.1 dev eth0 scope link realms 1/2
1.1.1.1 dev eth0 scope link realms 3/4
# ip route del 1.1.1.1 dev ens3 table 1234 realms 3/4
# ip route list table 1234
1.1.1.1 dev ens3 scope link realms 3/4
whereas route with realms 3/4 should have been deleted instead.
Explicitly check for fc\_flow passed in the FIB configuration
(this comes from RTA\_FLOW extracted by rtm\_to\_fib\_config()) and
fail matching if it differs from nh\_tclassid.
The handling of RTA\_FLOW for multipath routes later in
fib\_nh\_match() is still needed, as we can have multiple RTA\_FLOW
attributes that need to be matched against the tclassid of each
next hop.
v2: Check that fc\_flow is set before discarding the match, so
that the user can still select the first matching rule by
not specifying any realm, as suggested by David Ahern.
Reported-by: Jianlin Shi
Signed-off-by: Stefano Brivio
Acked-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9f32011496ba86d2f7992d06e9d40bea28cad66e
Author: Xin Long
Date: Mon Feb 12 17:15:40 2018 +0800
bridge: check brport attr show in brport\_show
[ Upstream commit 1b12580af1d0677c3c3a19e35bfe5d59b03f737f ]
Now br\_sysfs\_if file flush doesn't have attr show. To read it will
cause kernel panic after users chmod u+r this file.
Xiong found this issue when running the commands:
ip link add br0 type bridge
ip link add type veth
ip link set veth0 master br0
chmod u+r /sys/devices/virtual/net/veth0/brport/flush
timeout 3 cat /sys/devices/virtual/net/veth0/brport/flush
kernel crashed with NULL a pointer dereference call trace.
This patch is to fix it by return -EINVAL when brport\_attr->show
is null, just the same as the check for brport\_attr->store in
brport\_store().
Fixes: 9cf637473c85 ("bridge: add sysfs hook to flush forwarding table")
Reported-by: Xiong Zhou
Signed-off-by: Xin Long
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 59e162377323531cde25a9ee5651a993d1774563
Author: Thomas Gleixner
Date: Wed Mar 7 18:36:43 2018 +0000
x86/apic/vector: Handle legacy irq data correctly
The backport of upstream commit 45d55e7bac40 ("x86/apic/vector: Fix off by
one in error path") missed to fixup the legacy interrupt data which is not
longer available upstream.
Handle legacy irq data correctly by clearing the legacy storage to prevent
use after free.
Fixes: 7fd133539289 ("x86/apic/vector: Fix off by one in error path") - 4.4.y
Fixes: c557481a9491 ("x86/apic/vector: Fix off by one in error path") - 4.9.y
Reported-by: Ben Hutchings
Signed-off-by: Thomas Gleixner
Signed-off-by: Ben Hutchings
Signed-off-by: Greg Kroah-Hartman
commit e7b12efd7da92455f59f23dde01e80aaa8cdfcfa
Author: Jason A. Donenfeld
Date: Wed Feb 21 04:41:59 2018 +0100
netlink: put module reference if dump start fails
commit b87b6194be631c94785fe93398651e804ed43e28 upstream.
Before, if cb->start() failed, the module reference would never be put,
because cb->cb\_running is intentionally false at this point. Users are
generally annoyed by this because they can no longer unload modules that
leak references. Also, it may be possible to tediously wrap a reference
counter back to zero, especially since module.c still uses atomic\_inc
instead of refcount\_inc.
This patch expands the error path to simply call module\_put if
cb->start() fails.
Fixes: 41c87425a1ac ("netlink: do not set cb\_running if dump's start() errs")
Signed-off-by: Jason A. Donenfeld
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit eb2593fbd643f68a557b62141106788242183954
Author: NeilBrown
Date: Sat Feb 3 09:19:30 2018 +1100
md: only allow remove\_and\_add\_spares when no sync\_thread running.
commit 39772f0a7be3b3dc26c74ea13fe7847fd1522c8b upstream.
The locking protocols in md assume that a device will
never be removed from an array during resync/recovery/reshape.
When that isn't happening, rcu or reconfig\_mutex is needed
to protect an rdev pointer while taking a refcount. When
it is happening, that protection isn't needed.
Unfortunately there are cases were remove\_and\_add\_spares() is
called when recovery might be happening: is state\_store(),
slot\_store() and hot\_remove\_disk().
In each case, this is just an optimization, to try to expedite
removal from the personality so the device can be removed from
the array. If resync etc is happening, we just have to wait
for md\_check\_recover to find a suitable time to call
remove\_and\_add\_spares().
This optimization and not essential so it doesn't
matter if it fails.
So change remove\_and\_add\_spares() to abort early if
resync/recovery/reshape is happening, unless it is called
from md\_check\_recovery() as part of a newly started recovery.
The parameter "this" is only NULL when called from
md\_check\_recovery() so when it is NULL, there is no need to abort.
As this can result in a NULL dereference, the fix is suitable
for -stable.
cc: yuyufen
Cc: Tomasz Majchrzak
Fixes: 8430e7e0af9a ("md: disconnect device from personality before trying to remove it.")
Cc: stable@ver.kernel.org (v4.8+)
Signed-off-by: NeilBrown
Signed-off-by: Shaohua Li
Signed-off-by: Greg Kroah-Hartman
commit 2585e4b41cd690a3d40163b63fc4f7c68b1d8337
Author: Tim Chen
Date: Mon Jan 29 22:04:47 2018 +0000
x86/speculation: Use Indirect Branch Prediction Barrier in context switch
commit 18bf3c3ea8ece8f03b6fc58508f2dfd23c7711c7 upstream.
Flush indirect branches when switching into a process that marked itself
non dumpable. This protects high value processes like gpg better,
without having too high performance overhead.
If done naïvely, we could switch to a kernel idle thread and then back
to the original process, such as:
process A -> idle -> process A
In such scenario, we do not have to do IBPB here even though the process
is non-dumpable, as we are switching back to the same process after a
hiatus.
To avoid the redundant IBPB, which is expensive, we track the last mm
user context ID. The cost is to have an extra u64 mm context id to track
the last mm we were using before switching to the init\_mm used by idle.
Avoiding the extra IBPB is probably worth the extra memory for this
common scenario.
For those cases where tlb\_defer\_switch\_to\_init\_mm() returns true (non
PCID), lazy tlb will defer switch to init\_mm, so we will not be changing
the mm for the process A -> idle -> process A switch. So IBPB will be
skipped for this case.
Thanks to the reviewers and Andy Lutomirski for the suggestion of
using ctx\_id which got rid of the problem of mm pointer recycling.
Signed-off-by: Tim Chen
Signed-off-by: David Woodhouse
Signed-off-by: Thomas Gleixner
Cc: ak@linux.intel.com
Cc: karahmed@amazon.de
Cc: arjan@linux.intel.com
Cc: torvalds@linux-foundation.org
Cc: linux@dominikbrodowski.net
Cc: peterz@infradead.org
Cc: bp@alien8.de
Cc: luto@kernel.org
Cc: pbonzini@redhat.com
Link: https://lkml.kernel.org/r/1517263487-3708-1-git-send-email-dwmw@amazon.co.uk
Signed-off-by: Greg Kroah-Hartman
commit 027ba1a054f3da470acc45a885b88a04886c1fa9
Author: Andy Lutomirski
Date: Thu Jun 29 08:53:15 2017 -0700
x86/mm: Give each mm TLB flush generation a unique ID
commit f39681ed0f48498b80455095376f11535feea332 upstream.
This adds two new variables to mmu\_context\_t: ctx\_id and tlb\_gen.
ctx\_id uniquely identifies the mm\_struct and will never be reused.
For a given mm\_struct (and hence ctx\_id), tlb\_gen is a monotonic
count of the number of times that a TLB flush has been requested.
The pair (ctx\_id, tlb\_gen) can be used as an identifier for TLB
flush actions and will be used in subsequent patches to reliably
determine whether all needed TLB flushes have occurred on a given
CPU.
This patch is split out for ease of review. By itself, it has no
real effect other than creating and updating the new variables.
Signed-off-by: Andy Lutomirski
Reviewed-by: Nadav Amit
Reviewed-by: Thomas Gleixner
Cc: Andrew Morton
Cc: Arjan van de Ven
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: Linus Torvalds
Cc: Mel Gorman
Cc: Peter Zijlstra
Cc: Rik van Riel
Cc: linux-mm@kvack.org
Link: http://lkml.kernel.org/r/413a91c24dab3ed0caa5f4e4d017d87b0857f920.1498751203.git.luto@kernel.org
Signed-off-by: Ingo Molnar
Signed-off-by: Tim Chen
Signed-off-by: Greg Kroah-Hartman
commit c737c8d04d16c4259ced96fdd69e6664aa64d926
Author: Adam Ford
Date: Thu Jan 25 14:10:37 2018 -0600
ARM: dts: LogicPD Torpedo: Fix I2C1 pinmux
commit 74402055a2d3ec998a1ded599e86185a27d9bbf4 upstream.
The pinmuxing was missing for I2C1 which was causing intermittent issues
with the PMIC which is connected to I2C1. The bootloader did not quite
configure the I2C1 either, so when running at 2.6MHz, it was generating
errors at time.
This correctly sets the I2C1 pinmuxing so it can operate at 2.6MHz
Fixes: 687c27676151 ("ARM: dts: Add minimal support for LogicPD Torpedo
DM3730 devkit")
Signed-off-by: Adam Ford
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit 5f1f00dfa593aa41cf1013e7535667c13d3122fc
Author: Adam Ford
Date: Sat Jan 27 15:27:05 2018 -0600
ARM: dts: LogicPD SOM-LV: Fix I2C1 pinmux
commit 84c7efd607e7fb6933920322086db64654f669b2 upstream.
The pinmuxing was missing for I2C1 which was causing intermittent issues
with the PMIC which is connected to I2C1. The bootloader did not quite
configure the I2C1 either, so when running at 2.6MHz, it was generating
errors at times.
This correctly sets the I2C1 pinmuxing so it can operate at 2.6MHz
Fixes: ab8dd3aed011 ("ARM: DTS: Add minimal Support for Logic PD DM3730
SOM-LV")
Signed-off-by: Adam Ford
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit b6f93a1341fb166ea861aa37eeac492af3de837a
Author: Mike Snitzer
Date: Tue Jun 20 19:14:30 2017 -0400
dm io: fix duplicate bio completion due to missing ref count
commit feb7695fe9fb83084aa29de0094774f4c9d4c9fc upstream.
If only a subset of the devices associated with multiple regions support
a given special operation (eg. DISCARD) then the dec\_count() that is
used to set error for the region must increment the io->count.
Otherwise, when the dec\_count() is called it can cause the dm-io
caller's bio to be completed multiple times. As was reported against
the dm-mirror target that had mirror legs with a mix of discard
capabilities.
Bug: https://bugzilla.kernel.org/show\_bug.cgi?id=196077
Reported-by: Zhang Yi
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 6213c714a580c34751f9501725369fc5e0fe71e5
Author: Ard Biesheuvel
Date: Mon Oct 2 15:08:40 2017 +0100
PCI/ASPM: Deal with missing root ports in link state handling
commit ee8bdfb6568d86bb93f55f8d99c4c643e77304ee upstream.
Even though it is unconventional, some PCIe host implementations omit the
root ports entirely, and simply consist of a host bridge (which is not
modeled as a device in the PCI hierarchy) and a link.
When the downstream device is an endpoint, our current code does not seem
to mind this unusual configuration. However, when PCIe switches are
involved, the ASPM code assumes that any downstream switch port has a
parent, and blindly dereferences the bus->parent->self field of the pci\_dev
struct to chain the downstream link state to the link state of the root
port. Given that the root port is missing, the link is not modeled at all,
and nor is the link state, and attempting to access it results in a NULL
pointer dereference and a crash.
Avoid this by allowing the link state chain to terminate at the downstream
port if no root port exists.
Signed-off-by: Ard Biesheuvel
Signed-off-by: Bjorn Helgaas
Signed-off-by: Greg Kroah-Hartman
commit f750e1518e9bb08626ae31d4ad9c0333878fcaa7
Author: Paolo Bonzini
Date: Thu Feb 22 16:43:18 2018 +0100
KVM/VMX: Optimize vmx\_vcpu\_run() and svm\_vcpu\_run() by marking the RDMSR path as unlikely()
commit 946fbbc13dce68902f64515b610eeb2a6c3d7a64 upstream.
vmx\_vcpu\_run() and svm\_vcpu\_run() are large functions, and giving
branch hints to the compiler can actually make a substantial cycle
difference by keeping the fast path contiguous in memory.
With this optimization, the retpoline-guest/retpoline-host case is
about 50 cycles faster.
Signed-off-by: Paolo Bonzini
Reviewed-by: Jim Mattson
Cc: David Woodhouse
Cc: KarimAllah Ahmed
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Radim Krčmář
Cc: Thomas Gleixner
Cc: kvm@vger.kernel.org
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/20180222154318.20361-3-pbonzini@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit a175d5194a8597ae13c0240d560b4f575e406048
Author: Paolo Bonzini
Date: Thu Feb 22 16:43:17 2018 +0100
KVM/x86: Remove indirect MSR op calls from SPEC\_CTRL
commit ecb586bd29c99fb4de599dec388658e74388daad upstream.
Having a paravirt indirect call in the IBRS restore path is not a
good idea, since we are trying to protect from speculative execution
of bogus indirect branch targets. It is also slower, so use
native\_wrmsrl() on the vmentry path too.
Signed-off-by: Paolo Bonzini
Reviewed-by: Jim Mattson
Cc: David Woodhouse
Cc: KarimAllah Ahmed
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Radim Krčmář
Cc: Thomas Gleixner
Cc: kvm@vger.kernel.org
Cc: stable@vger.kernel.org
Fixes: d28b387fb74da95d69d2615732f50cceb38e9a4d
Link: http://lkml.kernel.org/r/20180222154318.20361-2-pbonzini@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 2e112f3659838abc7113890f6c87914f0603f297
Author: Wanpeng Li
Date: Tue Feb 13 15:36:00 2018 +0100
KVM: mmu: Fix overlap between public and private memslots
commit b28676bb8ae4569cced423dc2a88f7cb319d5379 upstream.
Reported by syzkaller:
pte\_list\_remove: ffff9714eb1f8078 0->BUG
------------[ cut here ]------------
kernel BUG at arch/x86/kvm/mmu.c:1157!
invalid opcode: 0000 [#1] SMP
RIP: 0010:pte\_list\_remove+0x11b/0x120 [kvm]
Call Trace:
drop\_spte+0x83/0xb0 [kvm]
mmu\_page\_zap\_pte+0xcc/0xe0 [kvm]
kvm\_mmu\_prepare\_zap\_page+0x81/0x4a0 [kvm]
kvm\_mmu\_invalidate\_zap\_all\_pages+0x159/0x220 [kvm]
kvm\_arch\_flush\_shadow\_all+0xe/0x10 [kvm]
kvm\_mmu\_notifier\_release+0x6c/0xa0 [kvm]
? kvm\_mmu\_notifier\_release+0x5/0xa0 [kvm]
\_\_mmu\_notifier\_release+0x79/0x110
? \_\_mmu\_notifier\_release+0x5/0x110
exit\_mmap+0x15a/0x170
? do\_exit+0x281/0xcb0
mmput+0x66/0x160
do\_exit+0x2c9/0xcb0
? \_\_context\_tracking\_exit.part.5+0x4a/0x150
do\_group\_exit+0x50/0xd0
SyS\_exit\_group+0x14/0x20
do\_syscall\_64+0x73/0x1f0
entry\_SYSCALL64\_slow\_path+0x25/0x25
The reason is that when creates new memslot, there is no guarantee for new
memslot not overlap with private memslots. This can be triggered by the
following program:
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
long r[16];
int main()
{
void \*p = valloc(0x4000);
r[2] = open("/dev/kvm", 0);
r[3] = ioctl(r[2], KVM\_CREATE\_VM, 0x0ul);
uint64\_t addr = 0xf000;
ioctl(r[3], KVM\_SET\_IDENTITY\_MAP\_ADDR, &addr);
r[6] = ioctl(r[3], KVM\_CREATE\_VCPU, 0x0ul);
ioctl(r[3], KVM\_SET\_TSS\_ADDR, 0x0ul);
ioctl(r[6], KVM\_RUN, 0);
ioctl(r[6], KVM\_RUN, 0);
struct kvm\_userspace\_memory\_region mr = {
.slot = 0,
.flags = KVM\_MEM\_LOG\_DIRTY\_PAGES,
.guest\_phys\_addr = 0xf000,
.memory\_size = 0x4000,
.userspace\_addr = (uintptr\_t) p
};
ioctl(r[3], KVM\_SET\_USER\_MEMORY\_REGION, &mr);
return 0;
}
This patch fixes the bug by not adding a new memslot even if it
overlaps with private memslots.
Reported-by: Dmitry Vyukov
Cc: Paolo Bonzini
Cc: Radim Krčmář
Cc: Dmitry Vyukov
Cc: Eric Biggers
Cc: stable@vger.kernel.org
Signed-off-by: Wanpeng Li
commit aebf1b12fff4863b0e646420c8d752f08eb9f434
Author: Arnd Bergmann
Date: Fri Feb 2 16:07:34 2018 +0100
ARM: kvm: fix building with gcc-8
commit 67870eb1204223598ea6d8a4467b482e9f5875b5 upstream.
In banked-sr.c, we use a top-level '\_\_asm\_\_(".arch\_extension virt")'
statement to allow compilation of a multi-CPU kernel for ARMv6
and older ARMv7-A that don't normally support access to the banked
registers.
This is considered to be a programming error by the gcc developers
and will no longer work in gcc-8, where we now get a build error:
/tmp/cc4Qy7GR.s:34: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_usr'
/tmp/cc4Qy7GR.s:41: Error: Banked registers are not available with this architecture. -- `mrs r3,ELR\_hyp'
/tmp/cc4Qy7GR.s:55: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_svc'
/tmp/cc4Qy7GR.s:62: Error: Banked registers are not available with this architecture. -- `mrs r3,LR\_svc'
/tmp/cc4Qy7GR.s:69: Error: Banked registers are not available with this architecture. -- `mrs r3,SPSR\_svc'
/tmp/cc4Qy7GR.s:76: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_abt'
Passign the '-march-armv7ve' flag to gcc works, and is ok here, because
we know the functions won't ever be called on pre-ARMv7VE machines.
Unfortunately, older compiler versions (4.8 and earlier) do not understand
that flag, so we still need to keep the asm around.
Backporting to stable kernels (4.6+) is needed to allow those to be built
with future compilers as well.
Link: https://gcc.gnu.org/bugzilla/show\_bug.cgi?id=84129
Fixes: 33280b4cd1dc ("ARM: KVM: Add banked registers save/restore")
Cc: stable@vger.kernel.org
Signed-off-by: Arnd Bergmann
Signed-off-by: Christoffer Dall
Signed-off-by: Greg Kroah-Hartman
commit 8e4c257afd19c2395bcca27565a6c5aba3374772
Author: Ulf Magnusson
Date: Mon Feb 5 02:21:13 2018 +0100
ARM: mvebu: Fix broken PL310\_ERRATA\_753970 selects
commit 8aa36a8dcde3183d84db7b0d622ffddcebb61077 upstream.
The MACH\_ARMADA\_375 and MACH\_ARMADA\_38X boards select ARM\_ERRATA\_753970,
but it was renamed to PL310\_ERRATA\_753970 by commit fa0ce4035d48 ("ARM:
7162/1: errata: tidy up Kconfig options for PL310 errata workarounds").
Fix the selects to use the new name.
Discovered with the
https://github.com/ulfalizer/Kconfiglib/blob/master/examples/list\_undefined.py
script.
Fixes: fa0ce4035d48 ("ARM: 7162/1: errata: tidy up Kconfig options for
PL310 errata workarounds"
cc: stable@vger.kernel.org
Signed-off-by: Ulf Magnusson
Signed-off-by: Gregory CLEMENT
Signed-off-by: Greg Kroah-Hartman
commit ec69fa88f393ba1f1d4aca11ce31835a85d6d58d
Author: Rasmus Villemoes
Date: Fri Feb 16 13:20:48 2018 -0800
nospec: Allow index argument to have const-qualified type
commit b98c6a160a057d5686a8c54c79cc6c8c94a7d0c8 upstream.
The last expression in a statement expression need not be a bare
variable, quoting gcc docs
The last thing in the compound statement should be an expression
followed by a semicolon; the value of this subexpression serves as the
value of the entire construct.
and we already use that in e.g. the min/max macros which end with a
ternary expression.
This way, we can allow index to have const-qualified type, which will in
some cases avoid the need for introducing a local copy of index of
non-const qualified type. That, in turn, can prevent readers not
familiar with the internals of array\_index\_nospec from wondering about
the seemingly redundant extra variable, and I think that's worthwhile
considering how confusing the whole \_nospec business is.
The expression \_i&\_mask has type unsigned long (since that is the type
of \_mask, and the BUILD\_BUG\_ONs guarantee that \_i will get promoted to
that), so in order not to change the type of the whole expression, add
a cast back to typeof(\_i).
Signed-off-by: Rasmus Villemoes
Signed-off-by: Dan Williams
Acked-by: Linus Torvalds
Cc: Andy Lutomirski
Cc: Arjan van de Ven
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: David Woodhouse
Cc: Greg Kroah-Hartman
Cc: Josh Poimboeuf
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Cc: linux-arch@vger.kernel.org
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/151881604837.17395.10812767547837568328.stgit@dwillia2-desk3.amr.corp.intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 9bcc9ac1cfd280e8795eb6b9fe3120a5682af939
Author: Mauro Carvalho Chehab
Date: Sat Feb 10 06:14:10 2018 -0500
media: m88ds3103: don't call a non-initalized function
commit b9c97c67fd19262c002d94ced2bfb513083e161e upstream.
If m88d3103 chip ID is not recognized, the device is not initialized.
However, it returns from probe without any error, causing this OOPS:
[ 7.689289] Unable to handle kernel NULL pointer dereference at virtual address 00000000
[ 7.689297] pgd = 7b0bd7a7
[ 7.689302] [00000000] \*pgd=00000000
[ 7.689318] Internal error: Oops: 80000005 [#1] SMP ARM
[ 7.689322] Modules linked in: dvb\_usb\_dvbsky(+) m88ds3103 dvb\_usb\_v2 dvb\_core videobuf2\_vmalloc videobuf2\_memops videobuf2\_core crc32\_arm\_ce videodev media
[ 7.689358] CPU: 3 PID: 197 Comm: systemd-udevd Not tainted 4.15.0-mcc+ #23
[ 7.689361] Hardware name: BCM2835
[ 7.689367] PC is at 0x0
[ 7.689382] LR is at m88ds3103\_attach+0x194/0x1d0 [m88ds3103]
[ 7.689386] pc : [<00000000>] lr : [] psr: 60000013
[ 7.689391] sp : ed8e5c20 ip : ed8c1e00 fp : ed8945c0
[ 7.689395] r10: ed894000 r9 : ed894378 r8 : eda736c0
[ 7.689400] r7 : ed894070 r6 : ed8e5c44 r5 : bf0bb040 r4 : eda77600
[ 7.689405] r3 : 00000000 r2 : 00000000 r1 : 00000000 r0 : eda77600
[ 7.689412] Flags: nZCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
[ 7.689417] Control: 10c5383d Table: 2d8e806a DAC: 00000051
[ 7.689423] Process systemd-udevd (pid: 197, stack limit = 0xe9dbfb63)
[ 7.689428] Stack: (0xed8e5c20 to 0xed8e6000)
[ 7.689439] 5c20: ed853a80 eda73640 ed894000 ed8942c0 ed853a80 bf0b9e98 ed894070 bf0b9f10
[ 7.689449] 5c40: 00000000 00000000 bf08c17c c08dfc50 00000000 00000000 00000000 00000000
[ 7.689459] 5c60: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689468] 5c80: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689479] 5ca0: 00000000 00000000 ed8945c0 ed8942c0 ed894000 ed894830 bf0b9e98 00000000
[ 7.689490] 5cc0: ed894378 bf0a3cb4 bf0bc3b0 0000533b ed920540 00000000 00000034 bf0a6434
[ 7.689500] 5ce0: ee952070 ed826600 bf0a7038 bf0a2dd8 00000001 bf0a6768 bf0a2f90 ed8943c0
[ 7.689511] 5d00: 00000000 c08eca68 ed826620 ed826620 00000000 ee952070 bf0bc034 ee952000
[ 7.689521] 5d20: ed826600 bf0bb080 ffffffed c0aa9e9c c0aa9dac ed826620 c16edf6c c168c2c8
[ 7.689531] 5d40: c16edf70 00000000 bf0bc034 0000000d 00000000 c08e268c bf0bb080 ed826600
[ 7.689541] 5d60: bf0bc034 ed826654 ed826620 bf0bc034 c164c8bc 00000000 00000001 00000000
[ 7.689553] 5d80: 00000028 c08e2948 00000000 bf0bc034 c08e2848 c08e0778 ee9f0a58 ed88bab4
[ 7.689563] 5da0: bf0bc034 ed90ba80 c168c1f0 c08e1934 bf0bb3bc c17045ac bf0bc034 c164c8bc
[ 7.689574] 5dc0: bf0bc034 bf0bb3bc ed91f564 c08e34ec bf0bc000 c164c8bc bf0bc034 c0aa8dc4
[ 7.689584] 5de0: ffffe000 00000000 bf0bf000 ed91f600 ed91f564 c03021e4 00000001 00000000
[ 7.689595] 5e00: c166e040 8040003f ed853a80 bf0bc448 00000000 c1678174 ed853a80 f0f22000
[ 7.689605] 5e20: f0f21fff 8040003f 014000c0 ed91e700 ed91e700 c16d8e68 00000001 ed91e6c0
[ 7.689615] 5e40: bf0bc400 00000001 bf0bc400 ed91f564 00000001 00000000 00000028 c03c9a24
[ 7.689625] 5e60: 00000001 c03c8c94 ed8e5f50 ed8e5f50 00000001 bf0bc400 ed91f540 c03c8cb0
[ 7.689637] 5e80: bf0bc40c 00007fff bf0bc400 c03c60b0 00000000 bf0bc448 00000028 c0e09684
[ 7.689647] 5ea0: 00000002 bf0bc530 c1234bf8 bf0bc5dc bf0bc514 c10ebbe8 ffffe000 bf000000
[ 7.689657] 5ec0: 00011538 00000000 ed8e5f48 00000000 00000000 00000000 00000000 00000000
[ 7.689666] 5ee0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689676] 5f00: 00000000 00000000 7fffffff 00000000 00000013 b6e55a18 0000017b c0309104
[ 7.689686] 5f20: ed8e4000 00000000 00510af0 c03c9430 7fffffff 00000000 00000003 00000000
[ 7.689697] 5f40: 00000000 f0f0f000 00011538 00000000 f0f107b0 f0f0f000 00011538 f0f1fdb8
[ 7.689707] 5f60: f0f1fbe8 f0f1b974 00004000 000041e0 bf0bc3d0 00000001 00000000 000024c4
[ 7.689717] 5f80: 0000002d 0000002e 00000019 00000000 00000010 00000000 16894000 00000000
[ 7.689727] 5fa0: 00000000 c0308f20 16894000 00000000 00000013 b6e55a18 00000000 b6e5652c
[ 7.689737] 5fc0: 16894000 00000000 00000000 0000017b 00020000 00508110 00000000 00510af0
[ 7.689748] 5fe0: bef68948 bef68938 b6e4d3d0 b6d32590 60000010 00000013 00000000 00000000
[ 7.689790] [] (m88ds3103\_attach [m88ds3103]) from [] (dvbsky\_s960c\_attach+0x78/0x280 [dvb\_usb\_dvbsky])
[ 7.689821] [] (dvbsky\_s960c\_attach [dvb\_usb\_dvbsky]) from [] (dvb\_usbv2\_probe+0xa3c/0x1024 [dvb\_usb\_v2])
[ 7.689849] [] (dvb\_usbv2\_probe [dvb\_usb\_v2]) from [] (usb\_probe\_interface+0xf0/0x2a8)
[ 7.689869] [] (usb\_probe\_interface) from [] (driver\_probe\_device+0x2f8/0x4b4)
[ 7.689881] [] (driver\_probe\_device) from [] (\_\_driver\_attach+0x100/0x11c)
[ 7.689895] [] (\_\_driver\_attach) from [] (bus\_for\_each\_dev+0x4c/0x9c)
[ 7.689909] [] (bus\_for\_each\_dev) from [] (bus\_add\_driver+0x1c0/0x264)
[ 7.689919] [] (bus\_add\_driver) from [] (driver\_register+0x78/0xf4)
[ 7.689931] [] (driver\_register) from [] (usb\_register\_driver+0x70/0x134)
[ 7.689946] [] (usb\_register\_driver) from [] (do\_one\_initcall+0x44/0x168)
[ 7.689963] [] (do\_one\_initcall) from [] (do\_init\_module+0x64/0x1f4)
[ 7.689979] [] (do\_init\_module) from [] (load\_module+0x20a0/0x25c8)
[ 7.689993] [] (load\_module) from [] (SyS\_finit\_module+0xb4/0xec)
[ 7.690007] [] (SyS\_finit\_module) from [] (ret\_fast\_syscall+0x0/0x54)
[ 7.690018] Code: bad PC value
This may happen on normal circumstances, if, for some reason, the demod
hangs and start returning an invalid chip ID:
[ 10.394395] m88ds3103 3-0068: Unknown device. Chip\_id=00
So, change the logic to cause probe to fail with -ENODEV, preventing
the OOPS.
Detected while testing DVB MMAP patches on Raspberry Pi 3 with
DVBSky S960CI.
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 0c2b4a3b5c5aaa2c34a40b0b20467af390592337
Author: Sebastian Panceac
Date: Wed Feb 28 11:40:49 2018 +0200
x86/platform/intel-mid: Handle Intel Edison reboot correctly
commit 028091f82eefd5e84f81cef81a7673016ecbe78b upstream.
When the Intel Edison module is powered with 3.3V, the reboot command makes
the module stuck. If the module is powered at a greater voltage, like 4.4V
(as the Edison Mini Breakout board does), reboot works OK.
The official Intel Edison BSP sends the IPCMSG\_COLD\_RESET message to the
SCU by default. The IPCMSG\_COLD\_BOOT which is used by the upstream kernel
is only sent when explicitely selected on the kernel command line.
Use IPCMSG\_COLD\_RESET unconditionally which makes reboot work independent
of the power supply voltage.
[ tglx: Massaged changelog ]
Fixes: bda7b072de99 ("x86/platform/intel-mid: Implement power off sequence")
Signed-off-by: Sebastian Panceac
Signed-off-by: Thomas Gleixner
Acked-by: Andy Shevchenko
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/1519810849-15131-1-git-send-email-sebastian@resin.io
Signed-off-by: Greg Kroah-Hartman
commit 78448491084ec7e5d2b75e3372cf1307c23f9457
Author: Juergen Gross
Date: Mon Feb 26 15:08:18 2018 +0100
x86/xen: Zero MSR\_IA32\_SPEC\_CTRL before suspend
commit 71c208dd54ab971036d83ff6d9837bae4976e623 upstream.
Older Xen versions (4.5 and before) might have problems migrating pv
guests with MSR\_IA32\_SPEC\_CTRL having a non-zero value. So before
suspending zero that MSR and restore it after being resumed.
Signed-off-by: Juergen Gross
Signed-off-by: Thomas Gleixner
Reviewed-by: Jan Beulich
Cc: stable@vger.kernel.org
Cc: xen-devel@lists.xenproject.org
Cc: boris.ostrovsky@oracle.com
Link: https://lkml.kernel.org/r/20180226140818.4849-1-jgross@suse.com
Signed-off-by: Greg Kroah-Hartman
commit 43672fa6428ec186db18fc5fba2df8c642bc1c38
Author: Dan Williams
Date: Wed Feb 21 17:08:01 2018 -0800
dax: fix vma\_is\_fsdax() helper
commit 230f5a8969d8345fc9bbe3683f068246cf1be4b8 upstream.
Gerd reports that ->i\_mode may contain other bits besides S\_IFCHR. Use
S\_ISCHR() instead. Otherwise, get\_user\_pages\_longterm() may fail on
device-dax instances when those are meant to be explicitly allowed.
Fixes: 2bb6d2837083 ("mm: introduce get\_user\_pages\_longterm")
Cc:
Reported-by: Gerd Rausch
Acked-by: Jane Chu
Reported-by: Haozhong Zhang
Reviewed-by: Jan Kara
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 144b6353ae503c055dd8bda0a03f42798d62aaa4
Author: Viresh Kumar
Date: Fri Feb 23 09:38:28 2018 +0530
cpufreq: s3c24xx: Fix broken s3c\_cpufreq\_init()
commit 0373ca74831b0f93cd4cdbf7ad3aec3c33a479a5 upstream.
commit a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
accidentally broke cpufreq on s3c2410 and s3c2412.
These two platforms don't have a CPU frequency table and used to skip
calling cpufreq\_table\_validate\_and\_show() for them. But with the
above commit, we started calling it unconditionally and that will
eventually fail as the frequency table pointer is NULL.
Fix this by calling cpufreq\_table\_validate\_and\_show() conditionally
again.
Fixes: a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
Cc: 3.13+  # v3.13+
Signed-off-by: Viresh Kumar
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 12efc9159129882bb2c24973806f3238fc2af5c9
Author: John David Anglin
Date: Tue Feb 27 08:16:07 2018 -0500
parisc: Fix ordering of cache and TLB flushes
commit 0adb24e03a124b79130c9499731936b11ce2677d upstream.
The change to flush\_kernel\_vmap\_range() wasn't sufficient to avoid the
SMP stalls.  The problem is some drivers call these routines with
interrupts disabled.  Interrupts need to be enabled for flush\_tlb\_all()
and flush\_cache\_all() to work.  This version adds checks to ensure
interrupts are not disabled before calling routines that need IPI
interrupts.  When interrupts are disabled, we now drop into slower code.
The attached change fixes the ordering of cache and TLB flushes in
several cases.  When we flush the cache using the existing PTE/TLB
entries, we need to flush the TLB after doing the cache flush.  We don't
need to do this when we flush the entire instruction and data caches as
these flushes don't use the existing TLB entries.  The same is true for
tmpalias region flushes.
The flush\_kernel\_vmap\_range() and invalidate\_kernel\_vmap\_range()
routines have been updated.
Secondly, we added a new purge\_kernel\_dcache\_range\_asm() routine to
pacache.S and use it in invalidate\_kernel\_vmap\_range().  Nominally,
purges are faster than flushes as the cache lines don't have to be
written back to memory.
Hopefully, this is sufficient to resolve the remaining problems due to
cache speculation.  So far, testing indicates that this is the case.  I
did work up a patch using tmpalias flushes, but there is a performance
hit because we need the physical address for each page, and we also need
to sequence access to the tmpalias flush code.  This increases the
probability of stalls.
Signed-off-by: John David Anglin
Cc: stable@vger.kernel.org # 4.9+
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 13e75c74cd69ca460778fad5ab902f0b20869267
Author: Lingutla Chandrasekhar
Date: Thu Jan 18 17:20:22 2018 +0530
timers: Forward timer base before migrating timers
commit c52232a49e203a65a6e1a670cd5262f59e9364a0 upstream.
On CPU hotunplug the enqueued timers of the unplugged CPU are migrated to a
live CPU. This happens from the control thread which initiated the unplug.
If the CPU on which the control thread runs came out from a longer idle
period then the base clock of that CPU might be stale because the control
thread runs prior to any event which forwards the clock.
In such a case the timers from the unplugged CPU are queued on the live CPU
based on the stale clock which can cause large delays due to increased
granularity of the outer timer wheels which are far away from base:;clock.
But there is a worse problem than that. The following sequence of events
illustrates it:
- CPU0 timer1 is queued expires = 59969 and base->clk = 59131.
The timer is queued at wheel level 2, with resulting expiry time = 60032
(due to level granularity).
- CPU1 enters idle @60007, with next timer expiry @60020.
- CPU0 is hotplugged at @60009
- CPU1 exits idle and runs the control thread which migrates the
timers from CPU0
timer1 is now queued in level 0 for immediate handling in the next
softirq because the requested expiry time 59969 is before CPU1 base->clk
60007
- CPU1 runs code which forwards the base clock which succeeds because the
next expiring timer. which was collected at idle entry time is still set
to 60020.
So it forwards beyond 60007 and therefore misses to expire the migrated
timer1. That timer gets expired when the wheel wraps around again, which
takes between 63 and 630ms depending on the HZ setting.
Address both problems by invoking forward\_timer\_base() for the control CPUs
timer base. All other places, which might run into a similar problem
(mod\_timer()/add\_timer\_on()) already invoke forward\_timer\_base() to avoid
that.
[ tglx: Massaged comment and changelog ]
Fixes: a683f390b93f ("timers: Forward the wheel clock whenever possible")
Co-developed-by: Neeraj Upadhyay
Signed-off-by: Neeraj Upadhyay
Signed-off-by: Lingutla Chandrasekhar
Signed-off-by: Thomas Gleixner
Cc: Anna-Maria Gleixner
Cc: linux-arm-msm@vger.kernel.org
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/20180118115022.6368-1-clingutla@codeaurora.org
Signed-off-by: Greg Kroah-Hartman
commit 61963d34e92b4238d6c80632fc69bcf11b8f191c
Author: Takashi Iwai
Date: Mon Feb 26 15:36:38 2018 +0100
ALSA: hda - Fix pincfg at resume on Lenovo T470 dock
commit 71db96ddfa72671bd43cacdcc99ca178d90ba267 upstream.
We've added a quirk to enable the recent Lenovo dock support, where it
overwrites the pin configs of NID 0x17 and 19, not only updating the
pin config cache. It works right after the boot, but the problem is
that the pin configs are occasionally cleared when the machine goes to
PM. Meanwhile the quirk writes the pin configs only at the pre-probe,
so this won't be applied any longer.
For addressing that issue, this patch moves the code to overwrite the
pin configs into HDA\_FIXUP\_ACT\_INIT section so that it's always
applied at both probe and resume time.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=195161
Fixes: 61fcf8ece9b6 ("ALSA: hda/realtek - Enable Thinkpad Dock device for ALC298 platform")
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 30f323752a59e18c485de7cd3b988764ffab4e4c
Author: Hans de Goede
Date: Thu Feb 22 14:20:35 2018 +0100
ALSA: hda: Add a power\_save blacklist
commit 1ba8f9d308174e647b864c36209b4d7934d99888 upstream.
On some boards setting power\_save to a non 0 value leads to clicking /
popping sounds when ever we enter/leave powersaving mode. Ideally we would
figure out how to avoid these sounds, but that is not always feasible.
This commit adds a blacklist for devices where powersaving is known to
cause problems and disables it on these devices.
Note I tried to put this blacklist in userspace first:
https://github.com/systemd/systemd/pull/8128
But the systemd maintainers rightfully pointed out that it would be
impossible to then later remove entries once we actually find a way to
make power-saving work on listed boards without issues. Having this list
in the kernel will allow removal of the blacklist entry in the same commit
which fixes the clicks / plops.
The blacklist only applies to the default power\_save module-option value,
if a user explicitly sets the module-option then the blacklist is not
used.
[ added an ifdef CONFIG\_PM for the build error -- tiwai]
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1525104
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=198611
Cc: stable@vger.kernel.org
Signed-off-by: Hans de Goede
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 57adeebc8a664a506e44c509aef47cc9ed74eabe
Author: Erik Veijola
Date: Fri Feb 23 14:06:52 2018 +0200
ALSA: usb-audio: Add a quirck for B&W PX headphones
commit 240a8af929c7c57dcde28682725b29cf8474e8e5 upstream.
The capture interface doesn't work and the playback interface only
supports 48 kHz sampling rate even though it advertises more rates.
Signed-off-by: Erik Veijola
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 89f0fb9698810841c1a02fa8d4a80e2eb654daff
Author: Alexander Steffen
Date: Fri Sep 8 17:21:32 2017 +0200
tpm-dev-common: Reject too short writes
commit ee70bc1e7b63ac8023c9ff9475d8741e397316e7 upstream.
tpm\_transmit() does not offer an explicit interface to indicate the number
of valid bytes in the communication buffer. Instead, it relies on the
commandSize field in the TPM header that is encoded within the buffer.
Therefore, ensure that a) enough data has been written to the buffer, so
that the commandSize field is present and b) the commandSize field does not
announce more data than has been written to the buffer.
This should have been fixed with CVE-2011-1161 long ago, but apparently
a correct version of that patch never made it into the kernel.
Cc: stable@vger.kernel.org
Signed-off-by: Alexander Steffen
Reviewed-by: Jarkko Sakkinen
Tested-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: Greg Kroah-Hartman
commit eb75717b1898c0ded2e1eaf0360008e31ad24c97
Author: Alexander Steffen
Date: Mon Sep 11 12:26:52 2017 +0200
tpm\_tis\_spi: Use DMA-safe memory for SPI transfers
commit 6b3a13173f23e798e1ba213dd4a2c065a3b8d751 upstream.
The buffers used as tx\_buf/rx\_buf in a SPI transfer need to be DMA-safe.
This cannot be guaranteed for the buffers passed to tpm\_tis\_spi\_read\_bytes
and tpm\_tis\_spi\_write\_bytes. Therefore, we need to use our own DMA-safe
buffer and copy the data to/from it.
The buffer needs to be allocated separately, to ensure that it is
cacheline-aligned and not shared with other data, so that DMA can work
correctly.
Fixes: 0edbfea537d1 ("tpm/tpm\_tis\_spi: Add support for spi phy")
Cc: stable@vger.kernel.org
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Alexander Steffen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: Greg Kroah-Hartman
commit e6b9e04f575faba84448eb8d67461a9acae45eae
Author: Arnd Bergmann
Date: Thu Sep 7 15:30:45 2017 +0200
tpm: constify transmit data pointers
commit c37fbc09bd4977736f6bc4050c6f099c587052a7 upstream.
Making cmd\_getticks 'const' introduced a couple of harmless warnings:
drivers/char/tpm/tpm\_tis\_core.c: In function 'probe\_itpm':
drivers/char/tpm/tpm\_tis\_core.c:469:31: error: passing argument 2 of 'tpm\_tis\_send\_data' discards 'const' qualifier from pointer target type [-Werror=discarded-qualifiers]
rc = tpm\_tis\_send\_data(chip, cmd\_getticks, len);
drivers/char/tpm/tpm\_tis\_core.c:477:31: error: passing argument 2 of 'tpm\_tis\_send\_data' discards 'const' qualifier from pointer target type [-Werror=discarded-qualifiers]
rc = tpm\_tis\_send\_data(chip, cmd\_getticks, len);
drivers/char/tpm/tpm\_tis\_core.c:255:12: note: expected 'u8 \* {aka unsigned char \*}' but argument is of type 'const u8 \* {aka const unsigned char \*}'
static int tpm\_tis\_send\_data(struct tpm\_chip \*chip, u8 \*buf, size\_t len)
This changes the related functions to all take 'const' pointers
so that gcc can see this as being correct. I had to slightly
modify the logic around tpm\_tis\_spi\_transfer() for this to work
without introducing ugly casts.
Cc: stable@vger.kernel.org
Fixes: 5e35bd8e06b9 ("tpm\_tis: make array cmd\_getticks static const to shink object code size")
Signed-off-by: Arnd Bergmann
Reviewed-by: Jarkko Sakkinen
Tested-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: Greg Kroah-Hartman
commit 922f22e680e2ed1277b53f8e183265b71b5dfcf3
Author: Jeremy Boone
Date: Thu Feb 8 12:32:06 2018 -0800
tpm\_tis: fix potential buffer overruns caused by bit glitches on the bus
commit 6bb320ca4a4a7b5b3db8c8d7250cc40002046878 upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Tested-by: Jarkko Sakkinen
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 15dcd3aa1542a1f00df25dd741200c720b870793
Author: Jeremy Boone
Date: Thu Feb 8 12:31:16 2018 -0800
tpm\_i2c\_nuvoton: fix potential buffer overruns caused by bit glitches on the bus
commit f9d4d9b5a5ef2f017bc344fb65a58a902517173b upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit e785c9e50fd7da8a547a968add753bac49054789
Author: Jeremy Boone
Date: Thu Feb 8 12:30:01 2018 -0800
tpm\_i2c\_infineon: fix potential buffer overruns caused by bit glitches on the bus
commit 9b8cb28d7c62568a5916bdd7ea1c9176d7f8f2ed upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 9be164624e90d1d1b03200c7a749d9c72ad26f23
Author: Jeremy Boone
Date: Thu Feb 8 12:29:09 2018 -0800
tpm: st33zp24: fix potential buffer overruns caused by bit glitches on the bus
commit 6d24cd186d9fead3722108dec1b1c993354645ff upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman


=== Content from bugzilla.redhat.com_ec16dc6b_20250126_104713.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1551051)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1551051)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1551051)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1551051

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1551051**](show_bug.cgi?id=1551051)
(CVE-2018-5803)
- [CVE-2018-5803](https://access.redhat.com/security/cve/CVE-2018-5803) kernel: Missing length check of payload in net/sctp/sm\_make\_chunk.c:\_sctp\_make\_chunk() function allows denial of service

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2018-5803 kernel: Missing length check of payload in net/sctp/sm\_make\_chu...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-5803 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1551052](show_bug.cgi?id=1551052) [1551053](show_bug.cgi?id=1551053 "CLOSED ERRATA - CVE-2018-5803 kernel: Missing length check of payload in net/sctp/sm_make_chunk.c:_sctp_make_chunk() function allows denial of service [fedora-all]") [1551905](show_bug.cgi?id=1551905) [1551906](show_bug.cgi?id=1551906) [1551907](show_bug.cgi?id=1551907) [1551908](show_bug.cgi?id=1551908) [1551909](show_bug.cgi?id=1551909) [1552009](show_bug.cgi?id=1552009) [1740299](show_bug.cgi?id=1740299) [1740300](show_bug.cgi?id=1740300) [1740302](show_bug.cgi?id=1740302) [1740303](show_bug.cgi?id=1740303) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1551057](show_bug.cgi?id=1551057) | | TreeView+ | [depends on](buglist.cgi?bug_id=1551051&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1551051&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2018-03-02 16:17 UTC by Adam Mariš | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-09-09 13:19 UTC ([History](show_activity.cgi?id=1551051)) | | [CC List:](page.cgi?id=fields.html#cclist) | 47 users (show)  airlied ajax aquini bhu blc bskeggs dhoward ewk fhrbata hannsj\_uhl hdegoede hkrzesin hwkernel-mgr iboverma ichavero itamar jarodwilson jforbes jglisse jkacur john.j5live jonathan josef jross jwboyer kernel-maint kernel-mgr labbott lgoncalv linville matt mchehab mcressma mjg59 mlangsdo nmurray plougher pmatouse rt-maint rvrbovsk sbrivio skozina slawomir steved vdronov williams yozone | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: | An error in the "\_sctp\_make\_chunk()" function (net/sctp/sm\_make\_chunk.c) when handling SCTP, packet length can be exploited by a malicious local user to cause a kernel crash and a DoS. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-06-08 03:42:10 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2018:1854](https://access.redhat.com/errata/RHSA-2018%3A1854) | 0 | None | None | None | 2018-06-19 04:48:36 UTC | | Red Hat Product Errata | [RHSA-2018:2948](https://access.redhat.com/errata/RHSA-2018%3A2948) | 0 | None | None | None | 2018-10-30 08:58:34 UTC | | Red Hat Product Errata | [RHSA-2018:3083](https://access.redhat.com/errata/RHSA-2018%3A3083) | 0 | None | None | None | 2018-10-30 07:31:48 UTC | | Red Hat Product Errata | [RHSA-2018:3096](https://access.redhat.com/errata/RHSA-2018%3A3096) | 0 | None | None | None | 2018-10-30 07:37:52 UTC | | Red Hat Product Errata | [RHSA-2019:0641](https://access.redhat.com/errata/RHSA-2019%3A0641) | 0 | None | None | None | 2019-03-26 07:45:15 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1551051#c0)  Adam Mariš    2018-03-02 16:17:10 UTC  ``` An error in the "_sctp_make_chunk()" function (net/sctp/sm_make_chunk.c) when handling SCTP packets length can be exploited by a malicious local user to cause a kernel crash and a DoS.  References:  <https://packetstormsecurity.com/files/146620/secunia-sctpmakechunkdos.txt>  <https://marc.info/?t=151818093200004&r=1&w=2>  <https://marc.info/?t=151818682600001&r=1&w=2>  An upstream patch:  <https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c>   ```  [Comment 1](show_bug.cgi?id=1551051#c1)  Adam Mariš    2018-03-02 16:18:32 UTC  ``` Created kernel tracking bugs for this issue:  Affects: fedora-all [[bug 1551053](show_bug.cgi?id=1551053 "CLOSED ERRATA - CVE-2018-5803 kernel: Missing length check of payload in net/sctp/sm_make_chunk.c:_sctp_make_chunk() function allows denial of service [fedora-all]")]   ```  [Comment 10](show_bug.cgi?id=1551051#c10)  errata-xmlrpc    2018-06-19 04:48:21 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 6  Via RHSA-2018:1854 [https://access.redhat.com/errata/RHSA-2018:1854](https://access.redhat.com/errata/RHSA-2018%3A1854)   ```  [Comment 11](show_bug.cgi?id=1551051#c11)  errata-xmlrpc    2018-10-30 07:31:26 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:3083 [https://access.redhat.com/errata/RHSA-2018:3083](https://access.redhat.com/errata/RHSA-2018%3A3083)   ```  [Comment 12](show_bug.cgi?id=1551051#c12)  errata-xmlrpc    2018-10-30 07:37:35 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:3096 [https://access.redhat.com/errata/RHSA-2018:3096](https://access.redhat.com/errata/RHSA-2018%3A3096)   ```  [Comment 13](show_bug.cgi?id=1551051#c13)  errata-xmlrpc    2018-10-30 08:58:17 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:2948 [https://access.redhat.com/errata/RHSA-2018:2948](https://access.redhat.com/errata/RHSA-2018%3A2948)   ```  [Comment 14](show_bug.cgi?id=1551051#c14)  errata-xmlrpc    2019-03-26 07:45:13 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise MRG 2  Via RHSA-2019:0641 [https://access.redhat.com/errata/RHSA-2019:0641](https://access.redhat.com/errata/RHSA-2019%3A0641)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1551051&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from usn.ubuntu.com_95105d5a_20250125_175557.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3654-2: Linux kernel (Xenial HWE) vulnerabilities

22 May 2018

Several security issues were addressed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-lts-xenial](/security/cves?package=linux-lts-xenial) - Linux hardware enablement kernel from Xenial for Trusty

## Details

USN-3654-1 fixed vulnerabilities and added mitigations in the Linux

kernel for Ubuntu 16.04 LTS. This update provides the corresponding

updates for the Linux Hardware Enablement (HWE) kernel from Ubuntu

16.04 LTS for Ubuntu 14.04 LTS.

Jann Horn and Ken Johnson discovered that microprocessors utilizing

speculative execution of a memory read may allow unauthorized memory

reads via a sidechannel attack. This flaw is known as Spectre

Variant 4. A local attacker could use this to expose sensitive

information, including kernel memory. ([CVE-2018-3639](/security/CVE-2018-3639))

Tuba Yavuz discovered that a double-free error existed in the USBTV007

driver of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash) or possibly execute arbitrary code.

([CVE-2017-17975](/security/CVE-2017-17975))

It was discovered that a race condition existed in the F2FS implementation

in the Linux kernel. A local attacker could use this to cause a denial of

service (system crash). ([CVE-2017-18193](/security/CVE-2017-18193))

It was discovered that a buffer overflow existed in the Hisilicon HNS

Ethernet Device driver in the Linux kernel. A local attacker could use this

to cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-18222](/security/CVE-2017-18222))

It was discovered that the netfilter subsystem in the Linux kernel did not

validate that rules containing jumps contained user-defined chains. A local

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-1065](/security/CVE-2018-1065))

It was discovered that the netfilter subsystem of the Linux kernel did not

properly validate ebtables offsets. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-1068](/security/CVE-2018-1068))

It was discovered that a null pointer dereference vulnerability existed in

the DCCP protocol implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash). ([CVE-2018-1130](/security/CVE-2018-1130))

It was discovered that the SCTP Protocol implementation in the Linux kernel

did not properly validate userspace provided payload lengths in some

situations. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2018-5803](/security/CVE-2018-5803))

It was discovered that a double free error existed in the block layer

subsystem of the Linux kernel when setting up a request queue. A local

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-7480](/security/CVE-2018-7480))

It was discovered that a memory leak existed in the SAS driver subsystem of

the Linux kernel. A local attacker could use this to cause a denial of

service (memory exhaustion). ([CVE-2018-7757](/security/CVE-2018-7757))

It was discovered that a race condition existed in the x86 machine check

handler in the Linux kernel. A local privileged attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-7995](/security/CVE-2018-7995))

Eyal Itkin discovered that the USB displaylink video adapter driver in the

Linux kernel did not properly validate mmap offsets sent from userspace. A

local attacker could use this to expose sensitive information (kernel

memory) or possibly execute arbitrary code. ([CVE-2018-8781](/security/CVE-2018-8781))

Silvio Cesare discovered a buffer overwrite existed in the NCPFS

implementation in the Linux kernel. A remote attacker controlling a

malicious NCPFS server could use this to cause a denial of service (system

crash) or possibly execute arbitrary code. ([CVE-2018-8822](/security/CVE-2018-8822))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-4.4.0-1022-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.4.0-1022.22](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.4.0-1022.22)
* [linux-image-4.4.0-127-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-127.153~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-127.153~14.04.1)
* [linux-image-4.4.0-127-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-127.153~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-127.153~14.04.1)
* [linux-image-4.4.0-127-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-127.153~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-127.153~14.04.1)
* [linux-image-4.4.0-127-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-127.153~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-127.153~14.04.1)
* [linux-image-4.4.0-127-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-127.153~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-127.153~14.04.1)
* [linux-image-4.4.0-127-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-127.153~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-127.153~14.04.1)
* [linux-image-4.4.0-127-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial)
  -
  [4.4.0-127.153~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-xenial/4.4.0-127.153~14.04.1)

Please note that fully mitigating CVE-2018-3639 (Spectre Variant 4)

may require corresponding processor microcode/firmware updates or,

in virtual environments, hypervisor updates. On i386 and amd64

architectures, the SSBD feature is required to enable the kernel

mitigations. BIOS vendors will be making updates available for Intel

processors that implement SSBD and Ubuntu is working with Intel to

provide future microcode updates. Ubuntu users with a processor from

a different vendor should contact the vendor to identify necessary

firmware updates. Ubuntu provided corresponding QEMU updates for users

of self-hosted virtual environments in USN 3651-1. Ubuntu users in

cloud environments should contact the cloud provider to confirm that

the hypervisor has been updated to expose the new CPU features to

virtual machines.

## References

* [CVE-2017-17975](/security/CVE-2017-17975)
* [CVE-2017-18193](/security/CVE-2017-18193)
* [CVE-2017-18222](/security/CVE-2017-18222)
* [CVE-2018-1065](/security/CVE-2018-1065)
* [CVE-2018-1068](/security/CVE-2018-1068)
* [CVE-2018-1130](/security/CVE-2018-1130)
* [CVE-2018-3639](/security/CVE-2018-3639)
* [CVE-2018-5803](/security/CVE-2018-5803)
* [CVE-2018-7480](/security/CVE-2018-7480)
* [CVE-2018-7757](/security/CVE-2018-7757)
* [CVE-2018-7995](/security/CVE-2018-7995)
* [CVE-2018-8781](/security/CVE-2018-8781)
* [CVE-2018-8822](/security/CVE-2018-8822)
* <https://wiki.ubuntu.com/SecurityTeam/KnowledgeBase/Variant4>

## Related notices

* [USN-3653-1](/security/notices/USN-3653-1)
* [USN-3657-1](/security/notices/USN-3657-1)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3653-2](/security/notices/USN-3653-2)
* [USN-3674-2](/security/notices/USN-3674-2)
* [USN-3674-1](/security/notices/USN-3674-1)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3698-2](/security/notices/USN-3698-2)
* [USN-3697-1](/security/notices/USN-3697-1)
* [USN-3698-1](/security/notices/USN-3698-1)
* [USN-3697-2](/security/notices/USN-3697-2)
* [USN-3655-1](/security/notices/USN-3655-1)
* [USN-3651-1](/security/notices/USN-3651-1)
* [USN-3652-1](/security/notices/USN-3652-1)
* [USN-3756-1](/security/notices/USN-3756-1)
* [USN-3680-1](/security/notices/USN-3680-1)
* [USN-3777-3](/security/notices/USN-3777-3)
* [USN-3679-1](/security/notices/USN-3679-1)
* [USN-3655-2](/security/notices/USN-3655-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_248a38b2_20250125_175559.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3656-1: Linux kernel (Raspberry Pi 2, Snapdragon) vulnerabilities

22 May 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2
* [linux-snapdragon](/security/cves?package=linux-snapdragon) - Linux kernel for Snapdragon processors

## Details

Tuba Yavuz discovered that a double-free error existed in the USBTV007

driver of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash) or possibly execute arbitrary code.

([CVE-2017-17975](/security/CVE-2017-17975))

It was discovered that a race condition existed in the F2FS implementation

in the Linux kernel. A local attacker could use this to cause a denial of

service (system crash). ([CVE-2017-18193](/security/CVE-2017-18193))

It was discovered that a buffer overflow existed in the Hisilicon HNS

Ethernet Device driver in the Linux kernel. A local attacker could use this

to cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-18222](/security/CVE-2017-18222))

It was discovered that the netfilter subsystem in the Linux kernel did not

validate that rules containing jumps contained user-defined chains. A local

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-1065](/security/CVE-2018-1065))

It was discovered that the netfilter subsystem of the Linux kernel did not

properly validate ebtables offsets. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-1068](/security/CVE-2018-1068))

It was discovered that a null pointer dereference vulnerability existed in

the DCCP protocol implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash). ([CVE-2018-1130](/security/CVE-2018-1130))

It was discovered that the SCTP Protocol implementation in the Linux kernel

did not properly validate userspace provided payload lengths in some

situations. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2018-5803](/security/CVE-2018-5803))

It was discovered that a double free error existed in the block layer

subsystem of the Linux kernel when setting up a request queue. A local

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-7480](/security/CVE-2018-7480))

It was discovered that a memory leak existed in the SAS driver subsystem of

the Linux kernel. A local attacker could use this to cause a denial of

service (memory exhaustion). ([CVE-2018-7757](/security/CVE-2018-7757))

It was discovered that a race condition existed in the x86 machine check

handler in the Linux kernel. A local privileged attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-7995](/security/CVE-2018-7995))

Eyal Itkin discovered that the USB displaylink video adapter driver in the

Linux kernel did not properly validate mmap offsets sent from userspace. A

local attacker could use this to expose sensitive information (kernel

memory) or possibly execute arbitrary code. ([CVE-2018-8781](/security/CVE-2018-8781))

Silvio Cesare discovered a buffer overwrite existed in the NCPFS

implementation in the Linux kernel. A remote attacker controlling a

malicious NCPFS server could use this to cause a denial of service (system

crash) or possibly execute arbitrary code. ([CVE-2018-8822](/security/CVE-2018-8822))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.4.0-1090-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.4.0-1090.98](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.4.0-1090.98)
* [linux-image-4.4.0-1093-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon)
  -
  [4.4.0-1093.98](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon/4.4.0-1093.98)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-17975](/security/CVE-2017-17975)
* [CVE-2017-18193](/security/CVE-2017-18193)
* [CVE-2017-18222](/security/CVE-2017-18222)
* [CVE-2018-1065](/security/CVE-2018-1065)
* [CVE-2018-1068](/security/CVE-2018-1068)
* [CVE-2018-1130](/security/CVE-2018-1130)
* [CVE-2018-5803](/security/CVE-2018-5803)
* [CVE-2018-7480](/security/CVE-2018-7480)
* [CVE-2018-7757](/security/CVE-2018-7757)
* [CVE-2018-7995](/security/CVE-2018-7995)
* [CVE-2018-8781](/security/CVE-2018-8781)
* [CVE-2018-8822](/security/CVE-2018-8822)

## Related notices

* [USN-3653-1](/security/notices/USN-3653-1)
* [USN-3657-1](/security/notices/USN-3657-1)
* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3653-2](/security/notices/USN-3653-2)
* [USN-3674-2](/security/notices/USN-3674-2)
* [USN-3674-1](/security/notices/USN-3674-1)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3698-2](/security/notices/USN-3698-2)
* [USN-3697-1](/security/notices/USN-3697-1)
* [USN-3698-1](/security/notices/USN-3698-1)
* [USN-3697-2](/security/notices/USN-3697-2)
* [USN-3655-1](/security/notices/USN-3655-1)
* [USN-3655-2](/security/notices/USN-3655-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from access.redhat.com_a5aec701_20250125_175532.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2018:3083 - Security Advisory

Issued:
2018-10-30
Updated:
2018-10-30
# RHSA-2018:3083 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: kernel security, bug fix, and enhancement update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2018%3A3083)

## Topic

An update for kernel is now available for Red Hat Enterprise Linux 7.

Red Hat Product Security has rated this update as having a security impact of Important. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

The kernel packages contain the Linux kernel, the core of any Linux operating system.

Security Fix(es):

* A flaw named FragmentSmack was found in the way the Linux kernel handled reassembly of fragmented IPv4 and IPv6 packets. A remote attacker could use this flaw to trigger time and calculation expensive fragment reassembly algorithm by sending specially crafted packets which could lead to a CPU saturation and hence a denial of service on the system. (CVE-2018-5391)
* kernel: out-of-bounds access in the show\_timer function in kernel/time/posix-timers.c (CVE-2017-18344)
* kernel: Integer overflow in udl\_fb\_mmap() can allow attackers to execute code in kernel space (CVE-2018-8781)
* kernel: MIDI driver race condition leads to a double-free (CVE-2018-10902)
* kernel: Missing check in inode\_init\_owner() does not clear SGID bit on non-directories for non-members (CVE-2018-13405)
* kernel: AIO write triggers integer overflow in some protocols (CVE-2015-8830)
* kernel: Use-after-free in snd\_pcm\_info function in ALSA subsystem potentially leads to privilege escalation (CVE-2017-0861)
* kernel: Handling of might\_cancel queueing is not properly pretected against race (CVE-2017-10661)
* kernel: Salsa20 encryption algorithm does not correctly handle zero-length inputs allowing local attackers to cause denial of service (CVE-2017-17805)
* kernel: Inifinite loop vulnerability in madvise\_willneed() function allows local denial of service (CVE-2017-18208)
* kernel: fuse-backed file mmap-ed onto process cmdline arguments causes denial of service (CVE-2018-1120)
* kernel: a null pointer dereference in dccp\_write\_xmit() leads to a system crash (CVE-2018-1130)
* kernel: drivers/block/loop.c mishandles lo\_release serialization allowing denial of service (CVE-2018-5344)
* kernel: Missing length check of payload in \_sctp\_make\_chunk() function allows denial of service (CVE-2018-5803)
* kernel: buffer overflow in drivers/net/wireless/ath/wil6210/wmi.c:wmi\_set\_ie() may lead to memory corruption (CVE-2018-5848)
* kernel: out-of-bound write in ext4\_init\_block\_bitmap function with a crafted ext4 image (CVE-2018-10878)
* kernel: Improper validation in bnx2x network card driver can allow for denial of service attacks via crafted packet (CVE-2018-1000026)
* kernel: Information leak when handling NM entries containing NUL (CVE-2016-4913)
* kernel: Mishandling mutex within libsas allowing local Denial of Service (CVE-2017-18232)
* kernel: NULL pointer dereference in ext4\_process\_freed\_data() when mounting crafted ext4 image (CVE-2018-1092)
* kernel: NULL pointer dereference in ext4\_xattr\_inode\_hash() causes crash with crafted ext4 image (CVE-2018-1094)
* kernel: vhost: Information disclosure in vhost/vhost.c:vhost\_new\_msg() (CVE-2018-1118)
* kernel: Denial of service in resv\_map\_release function in mm/hugetlb.c (CVE-2018-7740)
* kernel: Memory leak in the sas\_smp\_get\_phy\_events function in drivers/scsi/libsas/sas\_expander.c (CVE-2018-7757)
* kernel: Invalid pointer dereference in xfs\_ilock\_attr\_map\_shared() when mounting crafted xfs image allowing denial of service (CVE-2018-10322)
* kernel: use-after-free detected in ext4\_xattr\_set\_entry with a crafted file (CVE-2018-10879)
* kernel: out-of-bound access in ext4\_get\_group\_info() when mounting and operating a crafted ext4 image (CVE-2018-10881)
* kernel: stack-out-of-bounds write in jbd2\_journal\_dirty\_metadata function (CVE-2018-10883)
* kernel: incorrect memory bounds check in drivers/cdrom/cdrom.c (CVE-2018-10940)

Red Hat would like to thank Juha-Matti Tilli (Aalto University - Department of Communications and Networking and Nokia Bell Labs) for reporting CVE-2018-5391; Trend Micro Zero Day Initiative for reporting CVE-2018-10902; Qualys Research Labs for reporting CVE-2018-1120; Evgenii Shatokhin (Virtuozzo Team) for reporting CVE-2018-1130; and Wen Xu for reporting CVE-2018-1092 and CVE-2018-1094.

## Solution

For more details about the security issue(s), including the impact, a CVSS score, and other related information, refer to the CVE page(s) listed in the References section.

Additional Changes:

For detailed information on changes in this release, see the Red Hat Enterprise Linux 7.6 Release Notes linked from the References section.

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

The system must be rebooted for this update to take effect.

## Affected Products

* Red Hat Enterprise Linux Server 7 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support 7 x86\_64
* Red Hat Enterprise Linux Workstation 7 x86\_64
* Red Hat Enterprise Linux Desktop 7 x86\_64
* Red Hat Enterprise Linux for IBM z Systems 7 s390x
* Red Hat Enterprise Linux for Power, big endian 7 ppc64
* Red Hat Enterprise Linux for Scientific Computing 7 x86\_64
* Red Hat Enterprise Linux for Power, little endian 7 ppc64le
* Red Hat Virtualization Host 4 for RHEL 7 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support (for IBM z Systems) 7 s390x
* Red Hat Enterprise Linux for ARM 64 7 aarch64
* Red Hat Enterprise Linux for Power 9 7 ppc64le
* Red Hat Enterprise Linux for IBM System z (Structure A) 7 s390x
* Red Hat Enterprise Linux Server - Extended Life Cycle Support for IBM Power, big endian 7 ppc64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support for IBM Power, little endian 7 ppc64le

## Fixes

* [BZ - 1314275](https://bugzilla.redhat.com/show_bug.cgi?id=1314275)
  - CVE-2015-8830 kernel: AIO write triggers integer overflow in some protocols
* [BZ - 1322930](https://bugzilla.redhat.com/show_bug.cgi?id=1322930)
  - [RFE] Allow xfs to modify labels on mounted filesystem
* [BZ - 1337528](https://bugzilla.redhat.com/show_bug.cgi?id=1337528)
  - CVE-2016-4913 kernel: Information leak when handling NM entries containing NUL
* [BZ - 1481136](https://bugzilla.redhat.com/show_bug.cgi?id=1481136)
  - CVE-2017-10661 kernel: Handling of might\_cancel queueing is not properly pretected against race
* [BZ - 1488484](https://bugzilla.redhat.com/show_bug.cgi?id=1488484)
  - GRE: IFLA\_MTU ignored on NEWLINK
* [BZ - 1504058](https://bugzilla.redhat.com/show_bug.cgi?id=1504058)
  - kernel panic with nfsd while removing locks on file close
* [BZ - 1507027](https://bugzilla.redhat.com/show_bug.cgi?id=1507027)
  - [ESXi][RHEL7.6]x86/vmware: Add paravirt sched clock
* [BZ - 1528312](https://bugzilla.redhat.com/show_bug.cgi?id=1528312)
  - CVE-2017-17805 kernel: Salsa20 encryption algorithm does not correctly handle zero-length inputs allowing local attackers to cause denial-of-service
* [BZ - 1533909](https://bugzilla.redhat.com/show_bug.cgi?id=1533909)
  - CVE-2018-5344 kernel: drivers/block/loop.c mishandles lo\_release serialization allowing denial-of-service
* [BZ - 1541846](https://bugzilla.redhat.com/show_bug.cgi?id=1541846)
  - CVE-2018-1000026 kernel: Improper validation in bnx2x network card driver can allow for denial of service attacks via crafted packet
* [BZ - 1542494](https://bugzilla.redhat.com/show_bug.cgi?id=1542494)
  - VMs with NVMe devices passed through sometimes fail to be launched
* [BZ - 1551051](https://bugzilla.redhat.com/show_bug.cgi?id=1551051)
  - CVE-2018-5803 kernel: Missing length check of payload in net/sctp/sm\_make\_chunk.c:\_sctp\_make\_chunk() function allows denial of service
* [BZ - 1551565](https://bugzilla.redhat.com/show_bug.cgi?id=1551565)
  - CVE-2017-18208 kernel: Inifinite loop vulnerability in mm/madvise.c:madvise\_willneed() function allows local denial of service
* [BZ - 1552867](https://bugzilla.redhat.com/show_bug.cgi?id=1552867)
  - CVE-2018-7740 kernel: Denial of service in resv\_map\_release function in mm/hugetlb.c
* [BZ - 1553361](https://bugzilla.redhat.com/show_bug.cgi?id=1553361)
  - CVE-2018-7757 kernel: Memory leak in the sas\_smp\_get\_phy\_events function in drivers/scsi/libsas/sas\_expander.c
* [BZ - 1557434](https://bugzilla.redhat.com/show_bug.cgi?id=1557434)
  - bio too big device md0 (1024 > 256)
* [BZ - 1557599](https://bugzilla.redhat.com/show_bug.cgi?id=1557599)
  - [RFE] Rebase ipset (kernel) to latest upstream
* [BZ - 1558066](https://bugzilla.redhat.com/show_bug.cgi?id=1558066)
  - CVE-2017-18232 kernel: Mishandling mutex within libsas allowing local Denial of Service
* [BZ - 1558328](https://bugzilla.redhat.com/show_bug.cgi?id=1558328)
  - Kernel data path test with OVS 2.9 + DPDK 17.11 fails with low throughput
* [BZ - 1560777](https://bugzilla.redhat.com/show_bug.cgi?id=1560777)
  - CVE-2018-1092 kernel: NULL pointer dereference in ext4/mballoc.c:ext4\_process\_freed\_data() when mounting crafted ext4 image
* [BZ - 1560788](https://bugzilla.redhat.com/show_bug.cgi?id=1560788)
  - CVE-2018-1094 kernel: NULL pointer dereference in ext4/xattr.c:ext4\_xattr\_inode\_hash() causes crash with crafted ext4 image
* [BZ - 1561162](https://bugzilla.redhat.com/show_bug.cgi?id=1561162)
  - [RHEL7.5] Extreme performance impact caused by raid resync
* [BZ - 1563697](https://bugzilla.redhat.com/show_bug.cgi?id=1563697)
  - Triming on full pool can trigger 'dm\_pool\_alloc\_data\_block' failed: error = -28
* [BZ - 1563994](https://bugzilla.redhat.com/show_bug.cgi?id=1563994)
  - CVE-2017-0861 kernel: Use-after-free in snd\_pcm\_info function in ALSA subsystem potentially leads to privilege escalation
* [BZ - 1564186](https://bugzilla.redhat.com/show_bug.cgi?id=1564186)
  - XFS may block endlessly in xlog\_wait() on IO error
* [BZ - 1568167](https://bugzilla.redhat.com/show_bug.cgi?id=1568167)
  - crypto aesni-intel aes(gcm) is broken for IPsec
* [BZ - 1571062](https://bugzilla.redhat.com/show_bug.cgi?id=1571062)
  - CVE-2018-8781 kernel: Integer overflow in drivers/gpu/drm/udl/udl\_fb.c:udl\_fb\_mmap() can allow attackers to execute code in kernel space
* [BZ - 1571623](https://bugzilla.redhat.com/show_bug.cgi?id=1571623)
  - CVE-2018-10322 kernel: Invalid pointer dereference in xfs\_ilock\_attr\_map\_shared() when mounting crafted xfs image allowing denial of service
* [BZ - 1572983](https://bugzilla.redhat.com/show_bug.cgi?id=1572983)
  - conntrack doesn't track packets in specific network namespace if those packets were processed by CT --notrack target in other network namespace
* [BZ - 1573699](https://bugzilla.redhat.com/show_bug.cgi?id=1573699)
  - CVE-2018-1118 kernel: vhost: Information disclosure in vhost/vhost.c:vhost\_new\_msg()
* [BZ - 1575472](https://bugzilla.redhat.com/show_bug.cgi?id=1575472)
  - CVE-2018-1120 kernel: fuse-backed file mmap-ed onto process cmdline arguments causes denial of service
* [BZ - 1576419](https://bugzilla.redhat.com/show_bug.cgi?id=1576419)
  - CVE-2018-1130 kernel: a null pointer dereference in net/dccp/output.c:dccp\_write\_xmit() leads to a system crash
* [BZ - 1577408](https://bugzilla.redhat.com/show_bug.cgi?id=1577408)
  - CVE-2018-10940 kernel: incorrect memory bounds check in drivers/cdrom/cdrom.c
* [BZ - 1584775](https://bugzilla.redhat.com/show_bug.cgi?id=1584775)
  - VMs hung after migration
* [BZ - 1590720](https://bugzilla.redhat.com/show_bug.cgi?id=1590720)
  - CVE-2018-10902 kernel: MIDI driver race condition leads to a double-free
* [BZ - 1590799](https://bugzilla.redhat.com/show_bug.cgi?id=1590799)
  - CVE-2018-5848 kernel: buffer overflow in drivers/net/wireless/ath/wil6210/wmi.c:wmi\_set\_ie() may lead to memory corruption
* [BZ - 1592654](https://bugzilla.redhat.com/show_bug.cgi?id=1592654)
  - [NVMe Device Assignment] Guest reboot failed from the NVMe assigned which os installed on
* [BZ - 1596802](https://bugzilla.redhat.com/show_bug.cgi?id=1596802)
  - CVE-2018-10878 kernel: out-of-bound write in ext4\_init\_block\_bitmap function with a crafted ext4 image
* [BZ - 1596806](https://bugzilla.redhat.com/show_bug.cgi?id=1596806)
  - CVE-2018-10879 kernel: use-after-free detected in ext4\_xattr\_set\_entry with a crafted file
* [BZ - 1596828](https://bugzilla.redhat.com/show_bug.cgi?id=1596828)
  - CVE-2018-10881 kernel: out-of-bound access in ext4\_get\_group\_info() when mounting and operating a crafted ext4 image
* [BZ - 1596846](https://bugzilla.redhat.com/show_bug.cgi?id=1596846)
  - CVE-2018-10883 kernel: stack-out-of-bounds write in jbd2\_journal\_dirty\_metadata function
* [BZ - 1599161](https://bugzilla.redhat.com/show_bug.cgi?id=1599161)
  - CVE-2018-13405 kernel: Missing check in fs/inode.c:inode\_init\_owner() does not clear SGID bit on non-directories for non-members
* [BZ - 1609664](https://bugzilla.redhat.com/show_bug.cgi?id=1609664)
  - CVE-2018-5391 kernel: IP fragments with random offsets allow a remote denial of service (FragmentSmack)
* [BZ - 1609717](https://bugzilla.redhat.com/show_bug.cgi?id=1609717)
  - [unwinder] CPU spins indefinitely in \_\_save\_stack\_trace() call chain
* [BZ - 1610958](https://bugzilla.redhat.com/show_bug.cgi?id=1610958)
  - CVE-2017-18344 kernel: out-of-bounds access in the show\_timer function in kernel/time/posix-timers.c

## CVEs

* [CVE-2015-8830](https://www.redhat.com/security/data/cve/CVE-2015-8830.html)
* [CVE-2016-4913](https://www.redhat.com/security/data/cve/CVE-2016-4913.html)
* [CVE-2017-0861](https://www.redhat.com/security/data/cve/CVE-2017-0861.html)
* [CVE-2017-10661](https://www.redhat.com/security/data/cve/CVE-2017-10661.html)
* [CVE-2017-17805](https://www.redhat.com/security/data/cve/CVE-2017-17805.html)
* [CVE-2017-18208](https://www.redhat.com/security/data/cve/CVE-2017-18208.html)
* [CVE-2017-18232](https://www.redhat.com/security/data/cve/CVE-2017-18232.html)
* [CVE-2017-18344](https://www.redhat.com/security/data/cve/CVE-2017-18344.html)
* [CVE-2017-18360](https://www.redhat.com/security/data/cve/CVE-2017-18360.html)
* [CVE-2018-1092](https://www.redhat.com/security/data/cve/CVE-2018-1092.html)
* [CVE-2018-1094](https://www.redhat.com/security/data/cve/CVE-2018-1094.html)
* [CVE-2018-1118](https://www.redhat.com/security/data/cve/CVE-2018-1118.html)
* [CVE-2018-1120](https://www.redhat.com/security/data/cve/CVE-2018-1120.html)
* [CVE-2018-1130](https://www.redhat.com/security/data/cve/CVE-2018-1130.html)
* [CVE-2018-5344](https://www.redhat.com/security/data/cve/CVE-2018-5344.html)
* [CVE-2018-5391](https://www.redhat.com/security/data/cve/CVE-2018-5391.html)
* [CVE-2018-5803](https://www.redhat.com/security/data/cve/CVE-2018-5803.html)
* [CVE-2018-5848](https://www.redhat.com/security/data/cve/CVE-2018-5848.html)
* [CVE-2018-7740](https://www.redhat.com/security/data/cve/CVE-2018-7740.html)
* [CVE-2018-7757](https://www.redhat.com/security/data/cve/CVE-2018-7757.html)
* [CVE-2018-8781](https://www.redhat.com/security/data/cve/CVE-2018-8781.html)
* [CVE-2018-10322](https://www.redhat.com/security/data/cve/CVE-2018-10322.html)
* [CVE-2018-10878](https://www.redhat.com/security/data/cve/CVE-2018-10878.html)
* [CVE-2018-10879](https://www.redhat.com/security/data/cve/CVE-2018-10879.html)
* [CVE-2018-10881](https://www.redhat.com/security/data/cve/CVE-2018-10881.html)
* [CVE-2018-10883](https://www.redhat.com/security/data/cve/CVE-2018-10883.html)
* [CVE-2018-10902](https://www.redhat.com/security/data/cve/CVE-2018-10902.html)
* [CVE-2018-10940](https://www.redhat.com/security/data/cve/CVE-2018-10940.html)
* [CVE-2018-13405](https://www.redhat.com/security/data/cve/CVE-2018-13405.html)
* [CVE-2018-18690](https://www.redhat.com/security/data/cve/CVE-2018-18690.html)
* [CVE-2018-1000026](https://www.redhat.com/security/data/cve/CVE-2018-1000026.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>
* <https://access.redhat.com/articles/3553061>
* <https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/7.6_release_notes/index>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux Server 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| x86\_64 | |
| bpftool-3.10.0-957.el7.x86\_64.rpm | SHA-256: a4e6eb1a18004b4f9f8966972b2111f29c00fdcb05724220ccbbfd0214ae1bfb |
| kernel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 641249229d6ff87fcb8134cd1f2ae5fd7b26d79e95d02d25be67af66c22df135 |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-debug-3.10.0-957.el7.x86\_64.rpm | SHA-256: 72c04dd37c966187d0b2cd2a1029b4b4b184e0af2b5fb915541fea7ebb9d551c |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 8cc4bde8fe0fa5878e6cbf3bceede36c00056135f762a5776da0bc05c845d144 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 61b6f18f5bc5745b01f7d8511ea3316373b637a871b7bed94f10533ccfaebca5 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.x86\_64.rpm | SHA-256: d578d4b05fac9aa1f4c5849494c93e325888d7abd311d6cb26c3635463f27105 |
| kernel-tools-3.10.0-957.el7.x86\_64.rpm | SHA-256: 6c92fbff3f22f4aec32b0902d7dbfaf0928df18be4a431e244bc8f658d6b9514 |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-libs-3.10.0-957.el7.x86\_64.rpm | SHA-256: 2a7485b1c4a40a514969a4dfb1d50163399176843b7f5f7649904bbd813b4b0f |
| kernel-tools-libs-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: f4aa0cf43cfa11ee9b1fb6f39f8fc7baad725a6b0c55e26d3234f60010db66f2 |
| perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 230911c6ff333c1658633075c6d43499e50dd5f16c4bce7e862a720364073f80 |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| python-perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 87947f42bd6783fbb402bff82502182f4cb73a4e8435aca02c69fb10d8b19f61 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| x86\_64 | |
| bpftool-3.10.0-957.el7.x86\_64.rpm | SHA-256: a4e6eb1a18004b4f9f8966972b2111f29c00fdcb05724220ccbbfd0214ae1bfb |
| kernel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 641249229d6ff87fcb8134cd1f2ae5fd7b26d79e95d02d25be67af66c22df135 |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-debug-3.10.0-957.el7.x86\_64.rpm | SHA-256: 72c04dd37c966187d0b2cd2a1029b4b4b184e0af2b5fb915541fea7ebb9d551c |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 8cc4bde8fe0fa5878e6cbf3bceede36c00056135f762a5776da0bc05c845d144 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 61b6f18f5bc5745b01f7d8511ea3316373b637a871b7bed94f10533ccfaebca5 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.x86\_64.rpm | SHA-256: d578d4b05fac9aa1f4c5849494c93e325888d7abd311d6cb26c3635463f27105 |
| kernel-tools-3.10.0-957.el7.x86\_64.rpm | SHA-256: 6c92fbff3f22f4aec32b0902d7dbfaf0928df18be4a431e244bc8f658d6b9514 |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-libs-3.10.0-957.el7.x86\_64.rpm | SHA-256: 2a7485b1c4a40a514969a4dfb1d50163399176843b7f5f7649904bbd813b4b0f |
| kernel-tools-libs-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: f4aa0cf43cfa11ee9b1fb6f39f8fc7baad725a6b0c55e26d3234f60010db66f2 |
| perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 230911c6ff333c1658633075c6d43499e50dd5f16c4bce7e862a720364073f80 |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| python-perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 87947f42bd6783fbb402bff82502182f4cb73a4e8435aca02c69fb10d8b19f61 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |

## Red Hat Enterprise Linux Workstation 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| x86\_64 | |
| bpftool-3.10.0-957.el7.x86\_64.rpm | SHA-256: a4e6eb1a18004b4f9f8966972b2111f29c00fdcb05724220ccbbfd0214ae1bfb |
| kernel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 641249229d6ff87fcb8134cd1f2ae5fd7b26d79e95d02d25be67af66c22df135 |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-debug-3.10.0-957.el7.x86\_64.rpm | SHA-256: 72c04dd37c966187d0b2cd2a1029b4b4b184e0af2b5fb915541fea7ebb9d551c |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 8cc4bde8fe0fa5878e6cbf3bceede36c00056135f762a5776da0bc05c845d144 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 61b6f18f5bc5745b01f7d8511ea3316373b637a871b7bed94f10533ccfaebca5 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.x86\_64.rpm | SHA-256: d578d4b05fac9aa1f4c5849494c93e325888d7abd311d6cb26c3635463f27105 |
| kernel-tools-3.10.0-957.el7.x86\_64.rpm | SHA-256: 6c92fbff3f22f4aec32b0902d7dbfaf0928df18be4a431e244bc8f658d6b9514 |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-libs-3.10.0-957.el7.x86\_64.rpm | SHA-256: 2a7485b1c4a40a514969a4dfb1d50163399176843b7f5f7649904bbd813b4b0f |
| kernel-tools-libs-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: f4aa0cf43cfa11ee9b1fb6f39f8fc7baad725a6b0c55e26d3234f60010db66f2 |
| perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 230911c6ff333c1658633075c6d43499e50dd5f16c4bce7e862a720364073f80 |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| python-perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 87947f42bd6783fbb402bff82502182f4cb73a4e8435aca02c69fb10d8b19f61 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |

## Red Hat Enterprise Linux Desktop 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| x86\_64 | |
| bpftool-3.10.0-957.el7.x86\_64.rpm | SHA-256: a4e6eb1a18004b4f9f8966972b2111f29c00fdcb05724220ccbbfd0214ae1bfb |
| kernel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 641249229d6ff87fcb8134cd1f2ae5fd7b26d79e95d02d25be67af66c22df135 |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-debug-3.10.0-957.el7.x86\_64.rpm | SHA-256: 72c04dd37c966187d0b2cd2a1029b4b4b184e0af2b5fb915541fea7ebb9d551c |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 8cc4bde8fe0fa5878e6cbf3bceede36c00056135f762a5776da0bc05c845d144 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 61b6f18f5bc5745b01f7d8511ea3316373b637a871b7bed94f10533ccfaebca5 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.x86\_64.rpm | SHA-256: d578d4b05fac9aa1f4c5849494c93e325888d7abd311d6cb26c3635463f27105 |
| kernel-tools-3.10.0-957.el7.x86\_64.rpm | SHA-256: 6c92fbff3f22f4aec32b0902d7dbfaf0928df18be4a431e244bc8f658d6b9514 |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-libs-3.10.0-957.el7.x86\_64.rpm | SHA-256: 2a7485b1c4a40a514969a4dfb1d50163399176843b7f5f7649904bbd813b4b0f |
| kernel-tools-libs-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: f4aa0cf43cfa11ee9b1fb6f39f8fc7baad725a6b0c55e26d3234f60010db66f2 |
| perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 230911c6ff333c1658633075c6d43499e50dd5f16c4bce7e862a720364073f80 |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| python-perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 87947f42bd6783fbb402bff82502182f4cb73a4e8435aca02c69fb10d8b19f61 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |

## Red Hat Enterprise Linux for IBM z Systems 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| s390x | |
| kernel-3.10.0-957.el7.s390x.rpm | SHA-256: ace78ddbd320047d4ba5cbfe61d688f1dd47f7cccbca438c805baa5a0e1beaee |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-debug-3.10.0-957.el7.s390x.rpm | SHA-256: 6dfd5dcf67fc9227935d766b9995c439e0716414d1e4ad1340d2175ade6f7f08 |
| kernel-debug-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 8d4ca445efa2707157824dad3db865973711ff7cf824b8b4e89421b6c8a44c6f |
| kernel-debug-devel-3.10.0-957.el7.s390x.rpm | SHA-256: 2987b4f0823426a1d59e17c5522821ffa1e8f49f1aaf443678a3d54a95f935ce |
| kernel-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 72161e9d194629fef5ba33be48ecf9e2be6b6722512b21c20f58a3ba43584e34 |
| kernel-debuginfo-common-s390x-3.10.0-957.el7.s390x.rpm | SHA-256: 1cf1690a0cd85c29cca2f3f59465073f32ae81e0e99f91693c424851a6c53f71 |
| kernel-devel-3.10.0-957.el7.s390x.rpm | SHA-256: a9e7550d82c6e1e6068ee98d89a96019b389640dab9213e955d229e487af8ce9 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.s390x.rpm | SHA-256: ff231b32c2a16445cf4c083416df2f583e1e0bee1c4e01ebd51a3324a2268cfb |
| kernel-kdump-3.10.0-957.el7.s390x.rpm | SHA-256: cfc76f4db7bfb601caea18b33fa1d31580bfafda78b9d669fe95e68580cf3106 |
| kernel-kdump-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 80c0fff8f896f769513aa1f6b92d45dd10636518a77c07bbc6a4694fe11a25f8 |
| kernel-kdump-devel-3.10.0-957.el7.s390x.rpm | SHA-256: fd8abf8344aeec0e050d29a966ae9692b4adeab640a07a66a3ae97e3dc282717 |
| perf-3.10.0-957.el7.s390x.rpm | SHA-256: fc86255d4165440eb4bd51cdcdefc3ef3bdd0f073a7e7121cfc72848a9f0ba8e |
| perf-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: c80f183a84481a5e991ecacf040cd89cac051cffd0fa0c5c11ced3ebd0c92c99 |
| python-perf-3.10.0-957.el7.s390x.rpm | SHA-256: 7b9646b08871bb3682bb624c0a47e0e260be37a454adb3700fee1789a739d991 |
| python-perf-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 6b0380d3d4dfe08ffd8d05fc4501490b61164b63b431ba5ef1445ca24cd4a696 |

## Red Hat Enterprise Linux for Power, big endian 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| ppc64 | |
| kernel-3.10.0-957.el7.ppc64.rpm | SHA-256: 95ccf035b3cfab027f86f8dfe16a7867fef910208cbc3771f5ae757d3b76dbd6 |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-bootwrapper-3.10.0-957.el7.ppc64.rpm | SHA-256: 1b119b013dcfe7e056d963d28bf9f67de4053ebf972c94e95cd78857c981868a |
| kernel-debug-3.10.0-957.el7.ppc64.rpm | SHA-256: 6fc0f4da484ae6d54fe3d0b9fae07d7149a6aab8701a8121c5fe4dcb86b76488 |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: 96d90d2609f31f22a5361d8b51556b5691fbce7af43d5bf30d56b9d9022a169c |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: 96d90d2609f31f22a5361d8b51556b5691fbce7af43d5bf30d56b9d9022a169c |
| kernel-debug-devel-3.10.0-957.el7.ppc64.rpm | SHA-256: d8a93b7fa48d47d5b444daddceea9d9c5cb259e814b9806fa1bee9d12f9ce256 |
| kernel-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: fe98cc210b6b3aa8cddb207325b5c033b3c53eb0a20ea9d7f5936fb02449b9ef |
| kernel-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: fe98cc210b6b3aa8cddb207325b5c033b3c53eb0a20ea9d7f5936fb02449b9ef |
| kernel-debuginfo-common-ppc64-3.10.0-957.el7.ppc64.rpm | SHA-256: d870ba5938a31f999f07241eb186f9ffc5a7a6c0ffd92ebf69e3ed407afcde0e |
| kernel-debuginfo-common-ppc64-3.10.0-957.el7.ppc64.rpm | SHA-256: d870ba5938a31f999f07241eb186f9ffc5a7a6c0ffd92ebf69e3ed407afcde0e |
| kernel-devel-3.10.0-957.el7.ppc64.rpm | SHA-256: 590c8b9fde1b4002d4d0bc63d834e5521983a32d3f6c175f4c13cebb00ac3f75 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.ppc64.rpm | SHA-256: dd4ea0472ebc1a0d9c7432accbc140e36d3b878e18cfb661bdfd92c3069fbfc9 |
| kernel-tools-3.10.0-957.el7.ppc64.rpm | SHA-256: 5a5872744432f8b0c21e569e51e654d4c2f0ea47b093b46dfe70b1c098dc6b19 |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: 6d323e59b8ee8f75583cbe2f6f58a30cefdbefbd4de3d8aff69a34d15f22d04c |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: 6d323e59b8ee8f75583cbe2f6f58a30cefdbefbd4de3d8aff69a34d15f22d04c |
| kernel-tools-libs-3.10.0-957.el7.ppc64.rpm | SHA-256: 826b3fa517a0d9c3411b0151de441019adbd0779f7c19b0fbd61b236eac92411 |
| kernel-tools-libs-devel-3.10.0-957.el7.ppc64.rpm | SHA-256: 7aa3b03aaf2f8471e62c059dccbad1b5d50b703e575e1d8ee4d4958b961f6cb8 |
| perf-3.10.0-957.el7.ppc64.rpm | SHA-256: 55aaf9c869726b760e94cabb028c7c936808284bf2e694c427f5c91f78b62e31 |
| perf-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: cd246c57c7b7da239afd5eda593c8badfc11f66f6d59ec08cba570742d45997d |
| perf-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: cd246c57c7b7da239afd5eda593c8badfc11f66f6d59ec08cba570742d45997d |
| python-perf-3.10.0-957.el7.ppc64.rpm | SHA-256: a12d5efc81907c67f5c74aefb3ae7dba539f4595b71f348390710b24404dd307 |
| python-perf-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: c6e6d8388a1fc52e31a5d85e421cdd1dd7add5498af4b93ded245458e3bfe433 |
| python-perf-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: c6e6d8388a1fc52e31a5d85e421cdd1dd7add5498af4b93ded245458e3bfe433 |

## Red Hat Enterprise Linux for Scientific Computing 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| x86\_64 | |
| bpftool-3.10.0-957.el7.x86\_64.rpm | SHA-256: a4e6eb1a18004b4f9f8966972b2111f29c00fdcb05724220ccbbfd0214ae1bfb |
| kernel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 641249229d6ff87fcb8134cd1f2ae5fd7b26d79e95d02d25be67af66c22df135 |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-debug-3.10.0-957.el7.x86\_64.rpm | SHA-256: 72c04dd37c966187d0b2cd2a1029b4b4b184e0af2b5fb915541fea7ebb9d551c |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 09870a27c81b0f7b37abd69adb7789a2c164aeef2d4c3621f7b03abebe6b5139 |
| kernel-debug-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 8cc4bde8fe0fa5878e6cbf3bceede36c00056135f762a5776da0bc05c845d144 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: c483aa0fed5b4d3eae5ec9a4c455910553e7dc128c88546119b7115345346dc9 |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-debuginfo-common-x86\_64-3.10.0-957.el7.x86\_64.rpm | SHA-256: cb17ceadf5e041664939a39158ee8fb0815a776615ace9c1051529a6a02df34e |
| kernel-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 61b6f18f5bc5745b01f7d8511ea3316373b637a871b7bed94f10533ccfaebca5 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.x86\_64.rpm | SHA-256: d578d4b05fac9aa1f4c5849494c93e325888d7abd311d6cb26c3635463f27105 |
| kernel-tools-3.10.0-957.el7.x86\_64.rpm | SHA-256: 6c92fbff3f22f4aec32b0902d7dbfaf0928df18be4a431e244bc8f658d6b9514 |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 57051e42771bb8dc5e4acf11b84bcf1d45e68ef7cd9ff040cc1e0d66e98be8ea |
| kernel-tools-libs-3.10.0-957.el7.x86\_64.rpm | SHA-256: 2a7485b1c4a40a514969a4dfb1d50163399176843b7f5f7649904bbd813b4b0f |
| kernel-tools-libs-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: f4aa0cf43cfa11ee9b1fb6f39f8fc7baad725a6b0c55e26d3234f60010db66f2 |
| perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 230911c6ff333c1658633075c6d43499e50dd5f16c4bce7e862a720364073f80 |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: 52c254a2e9e0f4473d43654a457ade9e36860af3ac7ef73da93208aed6d4669e |
| python-perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 87947f42bd6783fbb402bff82502182f4cb73a4e8435aca02c69fb10d8b19f61 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |
| python-perf-debuginfo-3.10.0-957.el7.x86\_64.rpm | SHA-256: f903e89f05cf3c9f13755cbbd5d695400c26103ab61cbb49fd679f9b50a716d5 |

## Red Hat Enterprise Linux for Power, little endian 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| ppc64le | |
| kernel-3.10.0-957.el7.ppc64le.rpm | SHA-256: dd8e580832c0193d780d353ab4f9d2ef1fe57d90c0751c9cab87ad6e411ee20b |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-bootwrapper-3.10.0-957.el7.ppc64le.rpm | SHA-256: f303507c47e4388a78de55c1dade2ab7195301f5e9ba5f3ef677042b0531f377 |
| kernel-debug-3.10.0-957.el7.ppc64le.rpm | SHA-256: 1bbab7e99d15ffd3604bd24176d48dab9b1e019db6a5b55466a4a826d96837e3 |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 43a40af968e5d21afeda08386c31cdec079bf0ebf455894e7a8d5cfabadabe04 |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 43a40af968e5d21afeda08386c31cdec079bf0ebf455894e7a8d5cfabadabe04 |
| kernel-debug-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: bae4a2da549465397f5b2f6f31385368bd4140160072fc06082e02449821a5df |
| kernel-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: a8086945db2ac6abdba0bc5cdf4daab360c87ed0c27f5322c6ee8af78b6cc5ba |
| kernel-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: a8086945db2ac6abdba0bc5cdf4daab360c87ed0c27f5322c6ee8af78b6cc5ba |
| kernel-debuginfo-common-ppc64le-3.10.0-957.el7.ppc64le.rpm | SHA-256: 2bf8a31f4ed13de397a786a86e73fd3df7c8404341008485e9c5b3ef4142db2b |
| kernel-debuginfo-common-ppc64le-3.10.0-957.el7.ppc64le.rpm | SHA-256: 2bf8a31f4ed13de397a786a86e73fd3df7c8404341008485e9c5b3ef4142db2b |
| kernel-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: fd6aa9e7169574b3e12401b47021fbfebb91c384ecd3aa5ec9b135c63633bb97 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.ppc64le.rpm | SHA-256: 1503af4d7f207b6ce0e9417798404d4c14963f14916faa700a0041a9eab500c9 |
| kernel-tools-3.10.0-957.el7.ppc64le.rpm | SHA-256: c3cf3c55bff47776d244d40a71050d9a10d7b20fee54c2ff0adff199c5f1b13d |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: e85ae747836dddd8916407ef5c5cfa37fd1a8b19ff7f288b4e7ae4da55c322f8 |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: e85ae747836dddd8916407ef5c5cfa37fd1a8b19ff7f288b4e7ae4da55c322f8 |
| kernel-tools-libs-3.10.0-957.el7.ppc64le.rpm | SHA-256: b6ad1cfc19f34d7b966f72da7ea39250a534d764d47b9eeea58bb1b07fc4c9a2 |
| kernel-tools-libs-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: 86c024dd276b588b97d15545dda86ec0aad0004ac381833341bafcdd45531a8e |
| perf-3.10.0-957.el7.ppc64le.rpm | SHA-256: e9b15f7875da17ccd49faafb2455ac3a574ccfe24c123f4159fb6aff60f86bf0 |
| perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 4bdef2b8e2f23aa5cf1051191b2748d4f4aece8b07e50269fd003933887eddc9 |
| perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 4bdef2b8e2f23aa5cf1051191b2748d4f4aece8b07e50269fd003933887eddc9 |
| python-perf-3.10.0-957.el7.ppc64le.rpm | SHA-256: 85cec84c9f9c1ee73eba605e885ab4c252f17dae715d4b9254dd4fea520a2a13 |
| python-perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: b9c5dc6280ac78d7ecfc8a2de9fd82794d03c33c7a99ec740ac709c7349a846c |
| python-perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: b9c5dc6280ac78d7ecfc8a2de9fd82794d03c33c7a99ec740ac709c7349a846c |

## Red Hat Virtualization Host 4 for RHEL 7

| SRPM | |
| --- | --- |
| x86\_64 | |
| kernel-devel-3.10.0-957.el7.x86\_64.rpm | SHA-256: 61b6f18f5bc5745b01f7d8511ea3316373b637a871b7bed94f10533ccfaebca5 |
| kernel-headers-3.10.0-957.el7.x86\_64.rpm | SHA-256: d578d4b05fac9aa1f4c5849494c93e325888d7abd311d6cb26c3635463f27105 |
| perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 230911c6ff333c1658633075c6d43499e50dd5f16c4bce7e862a720364073f80 |
| python-perf-3.10.0-957.el7.x86\_64.rpm | SHA-256: 87947f42bd6783fbb402bff82502182f4cb73a4e8435aca02c69fb10d8b19f61 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support (for IBM z Systems) 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| s390x | |
| kernel-3.10.0-957.el7.s390x.rpm | SHA-256: ace78ddbd320047d4ba5cbfe61d688f1dd47f7cccbca438c805baa5a0e1beaee |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-debug-3.10.0-957.el7.s390x.rpm | SHA-256: 6dfd5dcf67fc9227935d766b9995c439e0716414d1e4ad1340d2175ade6f7f08 |
| kernel-debug-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 8d4ca445efa2707157824dad3db865973711ff7cf824b8b4e89421b6c8a44c6f |
| kernel-debug-devel-3.10.0-957.el7.s390x.rpm | SHA-256: 2987b4f0823426a1d59e17c5522821ffa1e8f49f1aaf443678a3d54a95f935ce |
| kernel-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 72161e9d194629fef5ba33be48ecf9e2be6b6722512b21c20f58a3ba43584e34 |
| kernel-debuginfo-common-s390x-3.10.0-957.el7.s390x.rpm | SHA-256: 1cf1690a0cd85c29cca2f3f59465073f32ae81e0e99f91693c424851a6c53f71 |
| kernel-devel-3.10.0-957.el7.s390x.rpm | SHA-256: a9e7550d82c6e1e6068ee98d89a96019b389640dab9213e955d229e487af8ce9 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.s390x.rpm | SHA-256: ff231b32c2a16445cf4c083416df2f583e1e0bee1c4e01ebd51a3324a2268cfb |
| kernel-kdump-3.10.0-957.el7.s390x.rpm | SHA-256: cfc76f4db7bfb601caea18b33fa1d31580bfafda78b9d669fe95e68580cf3106 |
| kernel-kdump-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 80c0fff8f896f769513aa1f6b92d45dd10636518a77c07bbc6a4694fe11a25f8 |
| kernel-kdump-devel-3.10.0-957.el7.s390x.rpm | SHA-256: fd8abf8344aeec0e050d29a966ae9692b4adeab640a07a66a3ae97e3dc282717 |
| perf-3.10.0-957.el7.s390x.rpm | SHA-256: fc86255d4165440eb4bd51cdcdefc3ef3bdd0f073a7e7121cfc72848a9f0ba8e |
| perf-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: c80f183a84481a5e991ecacf040cd89cac051cffd0fa0c5c11ced3ebd0c92c99 |
| python-perf-3.10.0-957.el7.s390x.rpm | SHA-256: 7b9646b08871bb3682bb624c0a47e0e260be37a454adb3700fee1789a739d991 |
| python-perf-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 6b0380d3d4dfe08ffd8d05fc4501490b61164b63b431ba5ef1445ca24cd4a696 |

## Red Hat Enterprise Linux for ARM 64 7

| SRPM | |
| --- | --- |
| aarch64 | |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |

## Red Hat Enterprise Linux for Power 9 7

| SRPM | |
| --- | --- |
| ppc64le | |
| kernel-3.10.0-957.el7.ppc64le.rpm | SHA-256: dd8e580832c0193d780d353ab4f9d2ef1fe57d90c0751c9cab87ad6e411ee20b |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-bootwrapper-3.10.0-957.el7.ppc64le.rpm | SHA-256: f303507c47e4388a78de55c1dade2ab7195301f5e9ba5f3ef677042b0531f377 |
| kernel-debug-3.10.0-957.el7.ppc64le.rpm | SHA-256: 1bbab7e99d15ffd3604bd24176d48dab9b1e019db6a5b55466a4a826d96837e3 |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 43a40af968e5d21afeda08386c31cdec079bf0ebf455894e7a8d5cfabadabe04 |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 43a40af968e5d21afeda08386c31cdec079bf0ebf455894e7a8d5cfabadabe04 |
| kernel-debug-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: bae4a2da549465397f5b2f6f31385368bd4140160072fc06082e02449821a5df |
| kernel-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: a8086945db2ac6abdba0bc5cdf4daab360c87ed0c27f5322c6ee8af78b6cc5ba |
| kernel-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: a8086945db2ac6abdba0bc5cdf4daab360c87ed0c27f5322c6ee8af78b6cc5ba |
| kernel-debuginfo-common-ppc64le-3.10.0-957.el7.ppc64le.rpm | SHA-256: 2bf8a31f4ed13de397a786a86e73fd3df7c8404341008485e9c5b3ef4142db2b |
| kernel-debuginfo-common-ppc64le-3.10.0-957.el7.ppc64le.rpm | SHA-256: 2bf8a31f4ed13de397a786a86e73fd3df7c8404341008485e9c5b3ef4142db2b |
| kernel-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: fd6aa9e7169574b3e12401b47021fbfebb91c384ecd3aa5ec9b135c63633bb97 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.ppc64le.rpm | SHA-256: 1503af4d7f207b6ce0e9417798404d4c14963f14916faa700a0041a9eab500c9 |
| kernel-tools-3.10.0-957.el7.ppc64le.rpm | SHA-256: c3cf3c55bff47776d244d40a71050d9a10d7b20fee54c2ff0adff199c5f1b13d |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: e85ae747836dddd8916407ef5c5cfa37fd1a8b19ff7f288b4e7ae4da55c322f8 |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: e85ae747836dddd8916407ef5c5cfa37fd1a8b19ff7f288b4e7ae4da55c322f8 |
| kernel-tools-libs-3.10.0-957.el7.ppc64le.rpm | SHA-256: b6ad1cfc19f34d7b966f72da7ea39250a534d764d47b9eeea58bb1b07fc4c9a2 |
| kernel-tools-libs-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: 86c024dd276b588b97d15545dda86ec0aad0004ac381833341bafcdd45531a8e |
| perf-3.10.0-957.el7.ppc64le.rpm | SHA-256: e9b15f7875da17ccd49faafb2455ac3a574ccfe24c123f4159fb6aff60f86bf0 |
| perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 4bdef2b8e2f23aa5cf1051191b2748d4f4aece8b07e50269fd003933887eddc9 |
| perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 4bdef2b8e2f23aa5cf1051191b2748d4f4aece8b07e50269fd003933887eddc9 |
| python-perf-3.10.0-957.el7.ppc64le.rpm | SHA-256: 85cec84c9f9c1ee73eba605e885ab4c252f17dae715d4b9254dd4fea520a2a13 |
| python-perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: b9c5dc6280ac78d7ecfc8a2de9fd82794d03c33c7a99ec740ac709c7349a846c |
| python-perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: b9c5dc6280ac78d7ecfc8a2de9fd82794d03c33c7a99ec740ac709c7349a846c |

## Red Hat Enterprise Linux for IBM System z (Structure A) 7

| SRPM | |
| --- | --- |
| s390x | |
| kernel-3.10.0-957.el7.s390x.rpm | SHA-256: ace78ddbd320047d4ba5cbfe61d688f1dd47f7cccbca438c805baa5a0e1beaee |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-debug-3.10.0-957.el7.s390x.rpm | SHA-256: 6dfd5dcf67fc9227935d766b9995c439e0716414d1e4ad1340d2175ade6f7f08 |
| kernel-debug-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 8d4ca445efa2707157824dad3db865973711ff7cf824b8b4e89421b6c8a44c6f |
| kernel-debug-devel-3.10.0-957.el7.s390x.rpm | SHA-256: 2987b4f0823426a1d59e17c5522821ffa1e8f49f1aaf443678a3d54a95f935ce |
| kernel-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 72161e9d194629fef5ba33be48ecf9e2be6b6722512b21c20f58a3ba43584e34 |
| kernel-debuginfo-common-s390x-3.10.0-957.el7.s390x.rpm | SHA-256: 1cf1690a0cd85c29cca2f3f59465073f32ae81e0e99f91693c424851a6c53f71 |
| kernel-devel-3.10.0-957.el7.s390x.rpm | SHA-256: a9e7550d82c6e1e6068ee98d89a96019b389640dab9213e955d229e487af8ce9 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.s390x.rpm | SHA-256: ff231b32c2a16445cf4c083416df2f583e1e0bee1c4e01ebd51a3324a2268cfb |
| kernel-kdump-3.10.0-957.el7.s390x.rpm | SHA-256: cfc76f4db7bfb601caea18b33fa1d31580bfafda78b9d669fe95e68580cf3106 |
| kernel-kdump-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 80c0fff8f896f769513aa1f6b92d45dd10636518a77c07bbc6a4694fe11a25f8 |
| kernel-kdump-devel-3.10.0-957.el7.s390x.rpm | SHA-256: fd8abf8344aeec0e050d29a966ae9692b4adeab640a07a66a3ae97e3dc282717 |
| perf-3.10.0-957.el7.s390x.rpm | SHA-256: fc86255d4165440eb4bd51cdcdefc3ef3bdd0f073a7e7121cfc72848a9f0ba8e |
| perf-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: c80f183a84481a5e991ecacf040cd89cac051cffd0fa0c5c11ced3ebd0c92c99 |
| python-perf-3.10.0-957.el7.s390x.rpm | SHA-256: 7b9646b08871bb3682bb624c0a47e0e260be37a454adb3700fee1789a739d991 |
| python-perf-debuginfo-3.10.0-957.el7.s390x.rpm | SHA-256: 6b0380d3d4dfe08ffd8d05fc4501490b61164b63b431ba5ef1445ca24cd4a696 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support for IBM Power, big endian 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| ppc64 | |
| kernel-3.10.0-957.el7.ppc64.rpm | SHA-256: 95ccf035b3cfab027f86f8dfe16a7867fef910208cbc3771f5ae757d3b76dbd6 |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-bootwrapper-3.10.0-957.el7.ppc64.rpm | SHA-256: 1b119b013dcfe7e056d963d28bf9f67de4053ebf972c94e95cd78857c981868a |
| kernel-debug-3.10.0-957.el7.ppc64.rpm | SHA-256: 6fc0f4da484ae6d54fe3d0b9fae07d7149a6aab8701a8121c5fe4dcb86b76488 |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: 96d90d2609f31f22a5361d8b51556b5691fbce7af43d5bf30d56b9d9022a169c |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: 96d90d2609f31f22a5361d8b51556b5691fbce7af43d5bf30d56b9d9022a169c |
| kernel-debug-devel-3.10.0-957.el7.ppc64.rpm | SHA-256: d8a93b7fa48d47d5b444daddceea9d9c5cb259e814b9806fa1bee9d12f9ce256 |
| kernel-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: fe98cc210b6b3aa8cddb207325b5c033b3c53eb0a20ea9d7f5936fb02449b9ef |
| kernel-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: fe98cc210b6b3aa8cddb207325b5c033b3c53eb0a20ea9d7f5936fb02449b9ef |
| kernel-debuginfo-common-ppc64-3.10.0-957.el7.ppc64.rpm | SHA-256: d870ba5938a31f999f07241eb186f9ffc5a7a6c0ffd92ebf69e3ed407afcde0e |
| kernel-debuginfo-common-ppc64-3.10.0-957.el7.ppc64.rpm | SHA-256: d870ba5938a31f999f07241eb186f9ffc5a7a6c0ffd92ebf69e3ed407afcde0e |
| kernel-devel-3.10.0-957.el7.ppc64.rpm | SHA-256: 590c8b9fde1b4002d4d0bc63d834e5521983a32d3f6c175f4c13cebb00ac3f75 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.ppc64.rpm | SHA-256: dd4ea0472ebc1a0d9c7432accbc140e36d3b878e18cfb661bdfd92c3069fbfc9 |
| kernel-tools-3.10.0-957.el7.ppc64.rpm | SHA-256: 5a5872744432f8b0c21e569e51e654d4c2f0ea47b093b46dfe70b1c098dc6b19 |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: 6d323e59b8ee8f75583cbe2f6f58a30cefdbefbd4de3d8aff69a34d15f22d04c |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: 6d323e59b8ee8f75583cbe2f6f58a30cefdbefbd4de3d8aff69a34d15f22d04c |
| kernel-tools-libs-3.10.0-957.el7.ppc64.rpm | SHA-256: 826b3fa517a0d9c3411b0151de441019adbd0779f7c19b0fbd61b236eac92411 |
| kernel-tools-libs-devel-3.10.0-957.el7.ppc64.rpm | SHA-256: 7aa3b03aaf2f8471e62c059dccbad1b5d50b703e575e1d8ee4d4958b961f6cb8 |
| perf-3.10.0-957.el7.ppc64.rpm | SHA-256: 55aaf9c869726b760e94cabb028c7c936808284bf2e694c427f5c91f78b62e31 |
| perf-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: cd246c57c7b7da239afd5eda593c8badfc11f66f6d59ec08cba570742d45997d |
| perf-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: cd246c57c7b7da239afd5eda593c8badfc11f66f6d59ec08cba570742d45997d |
| python-perf-3.10.0-957.el7.ppc64.rpm | SHA-256: a12d5efc81907c67f5c74aefb3ae7dba539f4595b71f348390710b24404dd307 |
| python-perf-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: c6e6d8388a1fc52e31a5d85e421cdd1dd7add5498af4b93ded245458e3bfe433 |
| python-perf-debuginfo-3.10.0-957.el7.ppc64.rpm | SHA-256: c6e6d8388a1fc52e31a5d85e421cdd1dd7add5498af4b93ded245458e3bfe433 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support for IBM Power, little endian 7

| SRPM | |
| --- | --- |
| kernel-3.10.0-957.el7.src.rpm | SHA-256: 4ef5e5be52a948cdf168e78d94494feb632f10ff1834ec7c196d75b6f0ec9506 |
| ppc64le | |
| kernel-3.10.0-957.el7.ppc64le.rpm | SHA-256: dd8e580832c0193d780d353ab4f9d2ef1fe57d90c0751c9cab87ad6e411ee20b |
| kernel-abi-whitelists-3.10.0-957.el7.noarch.rpm | SHA-256: 982463814264e855a65e64fe54ab49183f106fa8c472bf83b10053c5b75e331f |
| kernel-bootwrapper-3.10.0-957.el7.ppc64le.rpm | SHA-256: f303507c47e4388a78de55c1dade2ab7195301f5e9ba5f3ef677042b0531f377 |
| kernel-debug-3.10.0-957.el7.ppc64le.rpm | SHA-256: 1bbab7e99d15ffd3604bd24176d48dab9b1e019db6a5b55466a4a826d96837e3 |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 43a40af968e5d21afeda08386c31cdec079bf0ebf455894e7a8d5cfabadabe04 |
| kernel-debug-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 43a40af968e5d21afeda08386c31cdec079bf0ebf455894e7a8d5cfabadabe04 |
| kernel-debug-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: bae4a2da549465397f5b2f6f31385368bd4140160072fc06082e02449821a5df |
| kernel-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: a8086945db2ac6abdba0bc5cdf4daab360c87ed0c27f5322c6ee8af78b6cc5ba |
| kernel-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: a8086945db2ac6abdba0bc5cdf4daab360c87ed0c27f5322c6ee8af78b6cc5ba |
| kernel-debuginfo-common-ppc64le-3.10.0-957.el7.ppc64le.rpm | SHA-256: 2bf8a31f4ed13de397a786a86e73fd3df7c8404341008485e9c5b3ef4142db2b |
| kernel-debuginfo-common-ppc64le-3.10.0-957.el7.ppc64le.rpm | SHA-256: 2bf8a31f4ed13de397a786a86e73fd3df7c8404341008485e9c5b3ef4142db2b |
| kernel-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: fd6aa9e7169574b3e12401b47021fbfebb91c384ecd3aa5ec9b135c63633bb97 |
| kernel-doc-3.10.0-957.el7.noarch.rpm | SHA-256: fdaa7d1931454876a9846c78d01eaa412171fe433fc9a83718c25f7d93704ed3 |
| kernel-headers-3.10.0-957.el7.ppc64le.rpm | SHA-256: 1503af4d7f207b6ce0e9417798404d4c14963f14916faa700a0041a9eab500c9 |
| kernel-tools-3.10.0-957.el7.ppc64le.rpm | SHA-256: c3cf3c55bff47776d244d40a71050d9a10d7b20fee54c2ff0adff199c5f1b13d |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: e85ae747836dddd8916407ef5c5cfa37fd1a8b19ff7f288b4e7ae4da55c322f8 |
| kernel-tools-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: e85ae747836dddd8916407ef5c5cfa37fd1a8b19ff7f288b4e7ae4da55c322f8 |
| kernel-tools-libs-3.10.0-957.el7.ppc64le.rpm | SHA-256: b6ad1cfc19f34d7b966f72da7ea39250a534d764d47b9eeea58bb1b07fc4c9a2 |
| kernel-tools-libs-devel-3.10.0-957.el7.ppc64le.rpm | SHA-256: 86c024dd276b588b97d15545dda86ec0aad0004ac381833341bafcdd45531a8e |
| perf-3.10.0-957.el7.ppc64le.rpm | SHA-256: e9b15f7875da17ccd49faafb2455ac3a574ccfe24c123f4159fb6aff60f86bf0 |
| perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 4bdef2b8e2f23aa5cf1051191b2748d4f4aece8b07e50269fd003933887eddc9 |
| perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: 4bdef2b8e2f23aa5cf1051191b2748d4f4aece8b07e50269fd003933887eddc9 |
| python-perf-3.10.0-957.el7.ppc64le.rpm | SHA-256: 85cec84c9f9c1ee73eba605e885ab4c252f17dae715d4b9254dd4fea520a2a13 |
| python-perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: b9c5dc6280ac78d7ecfc8a2de9fd82794d03c33c7a99ec740ac709c7349a846c |
| python-perf-debuginfo-3.10.0-957.el7.ppc64le.rpm | SHA-256: b9c5dc6280ac78d7ecfc8a2de9fd82794d03c33c7a99ec740ac709c7349a846c |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_f3632052_20250126_104626.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)

  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Product Documentation](https://access.redhat.com/documentation)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)

  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform)
  [All Product Docs](//docs.redhat.com/en/products/)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)

  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Classifications](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Severety Ratings](https://access.redhat.com/security/security-updates/#/cve)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)

  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

 Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

# Severity ratings

## Understanding Red Hat security ratings

Red Hat Product Security rates the severity of security issues found
in Red Hat products using a four-point scale (Low, Moderate,
Important, and Critical), as well as including a separate Common
Vulnerability Scoring System (CVSS) base score. These scoring systems
provide a prioritized risk assessment to help you understand and
schedule upgrades to your systems, enabling informed decisions on the
risk each issue places on your unique environment.

The four-point scale tells you how serious Red Hat considers an issue
to be, helping you judge the severity and determine the most important
updates. The scale takes into account the potential risk based on a technical analysis of the exact flaw and its type. The risk level of a flaw does not change if an exploit or worm is later released for a flaw, or if one is available before the release of a fix. A flaw will only be re-evaluated if new technical details emerge.

The following table provides severity ratings for Red Hat products and systems. For flaws specific to AI models, see [Red Hat security ratings for AI models](https://access.redhat.com/security/ai).

| **Severity ratings** | **Security flaw description** |
| --- | --- |
| **Critical impact** | This rating is given to flaws that could be easily exploited by a remote unauthenticated attacker and lead to system compromise (arbitrary code execution) without requiring user interaction, or easily cause system compromise via inference end points on AI systems. Flaws that require authentication, local or physical access to a system, or an unlikely configuration are not classified as Critical impact. These are the types of vulnerabilities that can be exploited by worms. |
| **Important impact** | This rating is given to flaws that can easily compromise the confidentiality, integrity or availability of resources. These are the types of vulnerabilities that allow local or authenticated users to gain additional privileges, allow unauthenticated remote users to view resources that should otherwise be protected by authentication or other controls, allow authenticated remote users to execute arbitrary code, allow remote users to cause a denial of service, or can cause system compromise via inference end points on AI systems. |
| **Moderate impact** | This rating is given to flaws that may be more difficult to exploit but could still lead to some compromise of the confidentiality, integrity or availability of resources under certain circumstances. It is also given to flaws that could be exploited to cause denial of service-like conditions on AI systems via an inference end point, or allow attackers to steal other users’ data from the AI system without authorization. These are the types of vulnerabilities that could have had a Critical or Important impact but are less easily exploited based on a technical evaluation of the flaw and/or affect unlikely configurations. || **Low impact** | This rating is given to all other issues that may have a security impact. These are the types of vulnerabilities that are believed to require unlikely circumstances to be able to be exploited, or where a successful exploit would give minimal consequences. This includes flaws that are present in a program’s source code but to which no current or theoretically possible, but unproven, exploitation vectors exist or were found during the technical analysis of the flaw. |

A Red Hat security advisory can contain fixes for more than one
vulnerability and for packages for more than one product (such as both
Red Hat Enterprise Linux 7 and 8). Each issue in an advisory has a
severity rating for each product. The overall severity of an advisory
is the highest severity out of all the individual issues, across all
the products the advisory targets. For simplicity, advisories only
show the overall severity. The advisories contain links to the
relevant entries in Red Hat's bug-tracking system, where you can
examine individual severity ratings and additional commentary, as well
as links to the relevant pages in Red Hat’s CVE database.

When a technology—enabled and most likely used by default—completely
blocks the exploitation of a particular vulnerability across all
architectures, we will adjust the severity level. When a technology
reduces the risk of a vulnerability, we may adjust the severity level
and give an explanation of the decision in the bug-tracking  and CVE
database entries.

## Common Vulnerability Scoring System (CVSS)

Common Vulnerability Scoring System (CVSS) base scores provide
additional guidance about a vulnerability, giving a detailed severity
rating by scoring the constant aspects of a vulnerability: Attack
Vector, Attack Complexity, User Interaction, Privileges Required,
Scope, Confidentiality, Integrity, and Availability.

CVSS version 2 base metrics are available for all vulnerabilities from
2009-2016, as well as selected earlier vulnerabilities. In 2016, Red
Hat adopted the CVSS v3 standard, and all vulnerabilities going
forward will use version 3.1 for scoring. These scores are found on
the
[CVE pages](https://access.redhat.com/security/security-updates/#/cve)
(linked from the References section of each Red Hat Security Advisory).

Red Hat does not solely use the CVSS rating to determine the priority
with which flaws are fixed, or to determine the severity rating of the
vulnerability. It is used as a guideline to identify and describe key
metrics of a flaw, however the priority for which flaws are fixed is
determined by the overall severity of the flaw using the
aforementioned four-point scale.  CVSS is meant to help customers
prioritize the order in which they remediate flaws.

### CVSS v3 Base Metrics

The CVSS v3 base metrics group covers the constant aspects of a
vulnerability:

* Attack Vector (AV) - Expresses the "remoteness" of the attack and
  how the vulnerability is exploited.
* Attack Complexity (AC) - Speaks to the difficulty of executing an
  attack and what factors are needed for it to be successful. (Along
  with User Interaction, Attack Complexity was formerly part of the
  Access Complexity metric.).
* User Interaction (UI) - Determines whether the attack requires an
  active human to participate or if the attack can be automated.
* Privileges Required (PR) - Documents the level of user
  authentication required for the attack to be successful. (This
  replaces the former Authentication metric.).
* Scope (S) - Determines whether an attacker can impact a component
  beyond its security scope/authority.
* Confidentiality (C) - Determines whether unauthorized parties can
  access data and to what extent.
* Integrity (I) - Measures the impact to the trustworthiness and
  veracity of data.
* Availability (A) - Refers to the impact to accessibility of data or
  services for authorized users.

A formula translates these measurements into a single, numerical base
score, ranging from 0.0 (no risk) to 10.0 (highest risk). Refer to
[Common Vulnerability Scoring System v3.1: User Guide](https://www.first.org/cvss/user-guide)
for detailed descriptions of the base metrics. It is important to note
that the CVSS base metrics were designed to be used with the other
CVSS metric groups, notably the Temporal and Environmental metrics, to
provide an accurate representation of risk in customer environments.
Alone, the Base metrics offer a shallow view of the vulnerability
itself without accounting for deployment or the environment.

### How Red Hat Uses CVSS v3 Base Metrics

We aim to comply with the CVSS v3 standard when assigning base scores,
and Red Hat uses base metrics that reflect how a vulnerability affects
our products specifically.  In addition, we do not use the Qualitative
Severity Rating Scale in the CVSS v3.1 User Guide to rate severity,
and our severity ratings are always based on the aforementioned
four-point scale.  In some circumstances, it may not be obvious why a
flaw received a particular score. The following are some common
vulnerability types with our interpretation and typical scoring:

#### Libraries

It is not always possible to know how third-party applications use
libraries, making it difficult to give accurate CVSS v3 base metrics
for flaws in system libraries. When rating these flaws, we take into
account the way the library is used by applications that we ship, and
also look at other popular software that may use the library in a way
that would cause an issue to be of higher severity, and adjust the
score appropriately.

#### Other Common Scores

Flaws where a local, unprivileged user can cause a kernel to crash
(denial of service) typically score 5.5 (for example,
[CVE-2019-9213](https://access.redhat.com/security/cve/CVE-2019-9213)).

Flaws that allow a local, unprivileged user to escalate their
privileges to root typically score 7.8 (for example,
[CVE-2019-18634](https://access.redhat.com/security/cve/CVE-2019-18634)).

Cross-site scripting flaws are generally scored as having Low impact
to Integrity and/or Confidentiality, with no impact to Availability,
in line with scoring from other vendors and NVD. A typical score for
these flaws is 6.1 (for example,
[CVE-2020-11023](https://access.redhat.com/security/cve/CVE-2020-11023)).

### Base Score Variations Across Products

It is common for a given CVE-named vulnerability to have several
different CVSS base metrics, depending on the product, version, and
architecture. Examples of this include:

* A vulnerability that only affected some architectures. For example,
  [CVE-2019-15031](https://access.redhat.com/security/cve/CVE-2019-15031)
  only affected PowerPC.
* A vulnerability that is mitigated by source code protection
  mechanisms on some platforms. For example,
  [CVE-2018-1125](https://access.redhat.com/security/cve/CVE-2018-1125)
  could have led to arbitrary code execution on Red Hat Enterprise
  Linux, but it is only a denial of service because it was compiled
  with FORTIFY protections.
* A vulnerability that affected more than one product.  For example,
  [CVE-2020-14060](https://access.redhat.com/security/cve/CVE-2020-14060)
  affected a component in both OpenShift and OpenStack.  The severity
  to OpenStack was lower (Low) as compared to OpenShift (Moderate)
  based on its usage; the overall vulnerability itself was rated
  Important.

If CVSS v3 base scores are significantly different across products, we
note that separately wherever possible. If we do not split the score,
we report the metric that gives the highest CVSS v3 base score (the
worst-case outcome).

### Differences Between NVD and Red Hat Scores

For open source software shipped by multiple vendors, the CVSS base
scores may vary for each vendor's version, depending on the version
they ship, how they ship it, the platform, and even how the software
is compiled. This makes scoring vulnerabilities difficult for
third-party vulnerability databases, such as NVD, who can give only a
single CVSS base score to each vulnerability, or when comparing to
other vendors who score based on the characteristics of use in their
own products. See the
[National Vulnerability Database](https://nvd.nist.gov/vuln-metrics/cvss)
for more information regarding NVD security ratings.

These differences can cause the scores to vary widely. Other reasons
may include how the source code was compiled with certain compiler
flags or hardening technologies that reduce or eliminate the security
severity of a flaw, or how the software is used within the product.
Software running standalone may suffer from a flaw, but its use within
a product may preclude the vulnerable code from ever being used in a
way that could be exploited.

For example, NVD may rate a flaw in a particular service as having
High Impact on the CVSS CIA Triad (Confidentiality, Integrity,
Availability) where the service in question is typically run as the
root user with full privileges on a system. However, in a Red Hat
product, the service may be specifically configured to run as a
dedicated non-privileged user running entirely in a SELinux sandbox,
greatly reducing the immediate impact from compromise, resulting in
Low impact.

For these reasons, we recommend that, whenever possible, you use a
CVSS base score provided by Red Hat in preference to a score from a
third party. Please
[let us know](https://access.redhat.com/site/security/team/contact/)
if you believe we have given an incorrect CVSS v3 base score for a
particular vulnerability. We are happy to discuss and update if
needed.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com)

### Help

* [Contact Customer Portal](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Systems Status

### About

* [Red Hat Subscription Value](https://access.redhat.com/subscription-value)
* [About Red Hat](https://www.redhat.com/about/)
* [Red Hat Jobs](http://jobs.redhat.com)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

Copyright © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)

×
### Formatting Tips

Here are the common uses of Markdown.

Code blocks
```
~~~
Code surrounded in tildes is easier to read
~~~
```

Links/URLs`[Red Hat Customer Portal](https://access.redhat.com)`

[Learn more](/help/markdown)
Close



=== Content from www.redhat.com_da976db2_20250126_104712.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from usn.ubuntu.com_1a0e5017_20250125_175600.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3697-1: Linux kernel vulnerabilities

2 July 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 17.10](/security/notices?release=artful)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi 2

## Details

It was discovered that a null pointer dereference vulnerability existed in

the DCCP protocol implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash). ([CVE-2018-1130](/security/CVE-2018-1130))

Jann Horn discovered that the 32 bit adjtimex() syscall implementation for

64 bit Linux kernels did not properly initialize memory returned to user

space in some situations. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-11508](/security/CVE-2018-11508))

Wang Qize discovered that an information disclosure vulnerability existed

in the SMBus driver for ACPI Embedded Controllers in the Linux kernel. A

local attacker could use this to expose sensitive information (kernel

pointer addresses). ([CVE-2018-5750](/security/CVE-2018-5750))

It was discovered that the SCTP Protocol implementation in the Linux kernel

did not properly validate userspace provided payload lengths in some

situations. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2018-5803](/security/CVE-2018-5803))

It was discovered that an integer overflow error existed in the futex

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash). ([CVE-2018-6927](/security/CVE-2018-6927))

It was discovered that an information leak vulnerability existed in the

floppy driver in the Linux kernel. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2018-7755](/security/CVE-2018-7755))

It was discovered that a memory leak existed in the SAS driver subsystem of

the Linux kernel. A local attacker could use this to cause a denial of

service (memory exhaustion). ([CVE-2018-7757](/security/CVE-2018-7757))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 17.10

* linux-image-generic
  -
  4.13.0.46.49
* linux-image-generic-lpae
  -
  4.13.0.46.49
* [linux-image-4.13.0-1023-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.13.0-1023.24](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.13.0-1023.24)
* [linux-image-4.13.0-46-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.13.0-46.51](https://launchpad.net/ubuntu/%2Bsource/linux/4.13.0-46.51)
* [linux-image-4.13.0-46-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.13.0-46.51](https://launchpad.net/ubuntu/%2Bsource/linux/4.13.0-46.51)
* linux-image-lowlatency
  -
  4.13.0.46.49
* linux-image-raspi2
  -
  4.13.0.1023.21
* [linux-image-4.13.0-46-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.13.0-46.51](https://launchpad.net/ubuntu/%2Bsource/linux/4.13.0-46.51)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-1130](/security/CVE-2018-1130)
* [CVE-2018-11508](/security/CVE-2018-11508)
* [CVE-2018-5750](/security/CVE-2018-5750)
* [CVE-2018-5803](/security/CVE-2018-5803)
* [CVE-2018-6927](/security/CVE-2018-6927)
* [CVE-2018-7755](/security/CVE-2018-7755)
* [CVE-2018-7757](/security/CVE-2018-7757)

## Related notices

* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3698-2](/security/notices/USN-3698-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3698-1](/security/notices/USN-3698-1)
* [USN-3697-2](/security/notices/USN-3697-2)
* [USN-3695-2](/security/notices/USN-3695-2)
* [USN-3695-1](/security/notices/USN-3695-1)
* [USN-3631-2](/security/notices/USN-3631-2)
* [USN-3631-1](/security/notices/USN-3631-1)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)
* [USN-3696-2](/security/notices/USN-3696-2)
* [USN-3696-1](/security/notices/USN-3696-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.redhat.com_a68b13d5_20250126_104650.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)

  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Product Documentation](https://access.redhat.com/documentation)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)

  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform)
  [All Product Docs](//docs.redhat.com/en/products/)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)

  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Classifications](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Severety Ratings](https://access.redhat.com/security/security-updates/#/cve)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)

  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

 Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

# Security Data

Red Hat Product Security is committed to providing tools and security data to help security measurement. A part of this commitment is our active participation in various projects such as the CVE Project, the OASIS CSAF technical committee, or SBOM/VEX forums. We provide the raw data below so customers and researchers can produce their own metrics, for their own unique situations, and hold us accountable. To receive notifications when we fix bugs and add new features, please follow the official [Red Hat Security Data Changelog](https://access.redhat.com/articles/5554431).

The data resources linked on this page as well as their alternative representations available through the [Security Data API](https://access.redhat.com/documentation/en-us/red_hat_security_data_api/1.0/html/red_hat_security_data_api/index) are licensed under the [Creative Commons Attribution 4.0 International License](https://creativecommons.org/licenses/by/4.0/). If you distribute this content or a modified version of it, you must provide attribution to Red Hat, Inc. and provide a link to the original.

**Note:** Security data (CSAF, OVAL, SBOM, and other files) published by Red Hat Product Security was previously served from two locations:

* https://access.redhat.com/security/data/\*
* https://www.redhat.com/security/data/\*

A new domain was recently created the scope of which (for the time being) is to serve this same data:

* https://security.access.redhat.com/data/\*

Effective Sep 3, 2024, a redirect was put in place for all traffic from *www.redhat.com/security/data/\** to be redirected to the new *security.access.redhat.com/data/\** domain. On Sep 30, a similar change was made for *access.redhat.com/security/data/\** to redirect to *security.access.redhat.com/data/*. No change to the actual files or directory layout under the *data/\** path was made. You can start consuming from the new domain today. For example: <https://access.redhat.com/security/data/csaf/v2/vex/2024/cve-2024-0151.json> is now available at <https://security.access.redhat.com/data/csaf/v2/vex/2024/cve-2024-0151.json>; on Sep 30, the former began redirecting to the latter.

### CSAF/VEX Documents

The Common Security Advisory Framework (CSAF) standard enables organizations to share information about security issues using a consistent and common format. We provide Red Hat security advisories in CSAF format using the VEX profile as well as per-CVE VEX documents that contains information on both fixed and unfixed products/components.

* [CSAF GA announcement post](https://www.redhat.com/en/blog/csaf-vex-documents-now-generally-available)
  + [Link to CSAF advisories](https://security.access.redhat.com/data/csaf/v2/advisories/)
* [VEX files for CVEs GA announcement post](https://www.redhat.com/en/blog/red-hat-vex-files-cves-are-now-generally-available%20)
  + [Link to CSAF VEX per-CVE files](https://security.access.redhat.com/data/csaf/v2/vex/)

### OSV Records

[Red Hat / OSV.dev announcement on OpenSSF](https://openssf.org/blog/2024/11/01/red-hats-collaboration-with-the-openssf-and-osv-dev-yields-results-red-hat-security-data-now-available-in-the-osv-format/%20). The CSAF advisory data for RPMs is convertered to OSV records and shared with OSV.dev. It is expected that customers will consume this data from OSV.dev not directly from this URL. This is the location OSV.dev consumes the data from.

* [Link to Red Hat OSV data](https://security.access.redhat.com/data/osv/all.json)

### SBOM Documents

Software Bill of Materials (SBOM) is a complete list of components, their versions, licensing information, provenance, and other metadata for a given product. Red Hat publishes SBOM documents for select products at:

* [Link to SBOM documents](https://security.access.redhat.com/data/sbom/beta/spdx/)

### OVAL Definitions

**Note: OVAL/DS v1 files are no longer available and have been archived; see [OVAL v1 deprecation announcement](https://access.redhat.com/OVAL_v1_deprecation_announcement) for more information.**

OVAL definitions are available for vulnerabilities that were addressed in errata for Red Hat Enterprise Linux and select additional products. To completely evaluate your system you will need to evaluate it against the streams for all products installed on that system.

* [OVAL compatibility FAQ](https://access.redhat.com/articles/221883)
* [OVAL Streams directory](https://security.access.redhat.com/data/oval/v2/)
* [SCAP source data stream files](https://security.access.redhat.com/data/metrics/ds/v2/)

### Vulnerability Metadata

#### Repository to CPE Mapping

Used for matching [OVAL security data to installed RPMs](https://www.redhat.com/en/blog/how-accurately-match-oval-security-data-installed-rpms). Each repository also includes a set of relative URLs from where the content of the repository can be downloaded.

* [repository-to-cpe.json](https://security.access.redhat.com/data/meta/v1/repository-to-cpe.json)

#### RHSA RSS feed

An RSS feed that contains a list of Red Hat security advisories released in the last three days.

* [rhsa.rss](https://security.access.redhat.com/data/meta/v1/rhsa.rss)

#### CPE Dictionary

CPE is a structured naming scheme for information technology systems, software, and packages. For reference, we provide a dictionary mapping the CPE names we use, to Red Hat product descriptions. Some of these CPE names will be for new products that are not in the official CPE dictionary, and should therefore be treated as temporary CPE names:

* [cpe-dictionary.xml](https://security.access.redhat.com/data/meta/v1/cpe-dictionary.xml)

### Security Data Archive

Security data files that have been retired are available in an archive. Each file is marked with a date (YYYYMMDD) when it was last updated:

* [Link to Security Data archive](https://security.access.redhat.com/data/archive/)

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com)

### Help

* [Contact Customer Portal](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Systems Status

### About

* [Red Hat Subscription Value](https://access.redhat.com/subscription-value)
* [About Red Hat](https://www.redhat.com/about/)
* [Red Hat Jobs](http://jobs.redhat.com)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

Copyright © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)

×
### Formatting Tips

Here are the common uses of Markdown.

Code blocks
```
~~~
Code surrounded in tildes is easier to read
~~~
```

Links/URLs`[Red Hat Customer Portal](https://access.redhat.com)`

[Learn more](/help/markdown)
Close



=== Content from cdn.kernel.org_358a2069_20250125_175542.html ===
commit 8773f9bfa9e82c9311a58e82dcfc4f3470946a12
Author: Greg Kroah-Hartman
Date: Thu Mar 8 22:41:27 2018 -0800
Linux 4.14.25
commit df11c2268c39f6885a9b2caef02a8aac588abb19
Author: Sagi Grimberg
Date: Thu Nov 23 17:35:21 2017 +0200
nvme-rdma: don't suppress send completions
commit b4b591c87f2b0f4ebaf3a68d4f13873b241aa584 upstream.
The entire completions suppress mechanism is currently broken because the
HCA might retry a send operation (due to dropped ack) after the nvme
transaction has completed.
In order to handle this, we signal all send completions and introduce a
separate done handler for async events as they will be handled differently
(as they don't include in-capsule data by definition).
Signed-off-by: Sagi Grimberg
Reviewed-by: Max Gurtovoy
Signed-off-by: Christoph Hellwig
Signed-off-by: Greg Kroah-Hartman
commit 9474d8fa7ac486e54fbba0fd1f04f907c9a4885a
Author: NeilBrown
Date: Sat Feb 3 09:19:30 2018 +1100
md: only allow remove\_and\_add\_spares when no sync\_thread running.
commit 39772f0a7be3b3dc26c74ea13fe7847fd1522c8b upstream.
The locking protocols in md assume that a device will
never be removed from an array during resync/recovery/reshape.
When that isn't happening, rcu or reconfig\_mutex is needed
to protect an rdev pointer while taking a refcount. When
it is happening, that protection isn't needed.
Unfortunately there are cases were remove\_and\_add\_spares() is
called when recovery might be happening: is state\_store(),
slot\_store() and hot\_remove\_disk().
In each case, this is just an optimization, to try to expedite
removal from the personality so the device can be removed from
the array. If resync etc is happening, we just have to wait
for md\_check\_recover to find a suitable time to call
remove\_and\_add\_spares().
This optimization and not essential so it doesn't
matter if it fails.
So change remove\_and\_add\_spares() to abort early if
resync/recovery/reshape is happening, unless it is called
from md\_check\_recovery() as part of a newly started recovery.
The parameter "this" is only NULL when called from
md\_check\_recovery() so when it is NULL, there is no need to abort.
As this can result in a NULL dereference, the fix is suitable
for -stable.
cc: yuyufen
Cc: Tomasz Majchrzak
Fixes: 8430e7e0af9a ("md: disconnect device from personality before trying to remove it.")
Cc: stable@ver.kernel.org (v4.8+)
Signed-off-by: NeilBrown
Signed-off-by: Shaohua Li
Signed-off-by: Greg Kroah-Hartman
commit 4df591f704a2bebb0ebd7b1593208ab7169857f2
Author: Adam Ford
Date: Thu Jan 25 14:10:37 2018 -0600
ARM: dts: LogicPD Torpedo: Fix I2C1 pinmux
commit 74402055a2d3ec998a1ded599e86185a27d9bbf4 upstream.
The pinmuxing was missing for I2C1 which was causing intermittent issues
with the PMIC which is connected to I2C1. The bootloader did not quite
configure the I2C1 either, so when running at 2.6MHz, it was generating
errors at time.
This correctly sets the I2C1 pinmuxing so it can operate at 2.6MHz
Fixes: 687c27676151 ("ARM: dts: Add minimal support for LogicPD Torpedo
DM3730 devkit")
Signed-off-by: Adam Ford
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit 2b8446579c1bbde6310b3a9ed7f5c4b1147466e1
Author: Adam Ford
Date: Sat Jan 27 15:27:05 2018 -0600
ARM: dts: LogicPD SOM-LV: Fix I2C1 pinmux
commit 84c7efd607e7fb6933920322086db64654f669b2 upstream.
The pinmuxing was missing for I2C1 which was causing intermittent issues
with the PMIC which is connected to I2C1. The bootloader did not quite
configure the I2C1 either, so when running at 2.6MHz, it was generating
errors at times.
This correctly sets the I2C1 pinmuxing so it can operate at 2.6MHz
Fixes: ab8dd3aed011 ("ARM: DTS: Add minimal Support for Logic PD DM3730
SOM-LV")
Signed-off-by: Adam Ford
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit b2190cc3918443604730dfe3c7b16f684c3ff72f
Author: Kai Heng Feng
Date: Mon Feb 5 13:19:24 2018 +0800
ACPI / bus: Parse tables as term\_list for Dell XPS 9570 and Precision M5530
commit 36904703aeeeb6cd31993f1353c8325006229f9a upstream.
The i2c touchpad on Dell XPS 9570 and Precision M5530 doesn't work out
of box.
The touchpad relies on its \_INI method to update its \_HID value from
XXXX0000 to SYNA2393.
Also, the \_STA relies on value of I2CN to report correct status.
Set acpi\_gbl\_parse\_table\_as\_term\_list so the value of I2CN can be
correctly set up, and \_INI can get run. The ACPI table in this machine
is designed to get parsed this way.
Also, change the quirk table to a more generic name.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=198515
Signed-off-by: Kai-Heng Feng
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit b95f8ca8d71987199de1f072fd11fa562150489c
Author: Eric Biggers
Date: Wed Jan 31 17:30:21 2018 -0800
KVM/x86: remove WARN\_ON() for when vm\_munmap() fails
commit 103c763c72dd2df3e8c91f2d7ec88f98ed391111 upstream.
On x86, special KVM memslots such as the TSS region have anonymous
memory mappings created on behalf of userspace, and these mappings are
removed when the VM is destroyed.
It is however possible for removing these mappings via vm\_munmap() to
fail. This can most easily happen if the thread receives SIGKILL while
it's waiting to acquire ->mmap\_sem. This triggers the 'WARN\_ON(r < 0)'
in \_\_x86\_set\_memory\_region(). syzkaller was able to hit this, using
'exit()' to send the SIGKILL. Note that while the vm\_munmap() failure
results in the mapping not being removed immediately, it is not leaked
forever but rather will be freed when the process exits.
It's not really possible to handle this failure properly, so almost
every other caller of vm\_munmap() doesn't check the return value. It's
a limitation of having the kernel manage these mappings rather than
userspace.
So just remove the WARN\_ON() so that users can't spam the kernel log
with this warning.
Fixes: f0d648bdf0a5 ("KVM: x86: map/unmap private slots in \_\_x86\_set\_memory\_region")
Reported-by: syzbot
Signed-off-by: Eric Biggers
Signed-off-by: Radim Krčmář
Signed-off-by: Jack Wang
Signed-off-by: Greg Kroah-Hartman
commit 615462370ab6c9a22d033ecf4ac3d005274701a6
Author: Tianyu Lan
Date: Tue Jan 16 17:34:07 2018 +0800
KVM/x86: Fix wrong macro references of X86\_CR0\_PG\_BIT and X86\_CR4\_PAE\_BIT in kvm\_valid\_sregs()
commit 37b95951c58fdf08dc10afa9d02066ed9f176fb5 upstream.
kvm\_valid\_sregs() should use X86\_CR0\_PG and X86\_CR4\_PAE to check bit
status rather than X86\_CR0\_PG\_BIT and X86\_CR4\_PAE\_BIT. This patch is
to fix it.
Fixes: f29810335965a(KVM/x86: Check input paging mode when cs.l is set)
Reported-by: Jeremi Piotrowski
Cc: Paolo Bonzini
Cc: Radim Krčmář
Signed-off-by: Tianyu Lan
Signed-off-by: Radim Krčmář
Signed-off-by: Jack Wang
Signed-off-by: Greg Kroah-Hartman
commit db98acd6f85981850c761865ea3152d74cdb6035
Author: Ard Biesheuvel
Date: Mon Oct 2 15:08:40 2017 +0100
PCI/ASPM: Deal with missing root ports in link state handling
commit ee8bdfb6568d86bb93f55f8d99c4c643e77304ee upstream.
Even though it is unconventional, some PCIe host implementations omit the
root ports entirely, and simply consist of a host bridge (which is not
modeled as a device in the PCI hierarchy) and a link.
When the downstream device is an endpoint, our current code does not seem
to mind this unusual configuration. However, when PCIe switches are
involved, the ASPM code assumes that any downstream switch port has a
parent, and blindly dereferences the bus->parent->self field of the pci\_dev
struct to chain the downstream link state to the link state of the root
port. Given that the root port is missing, the link is not modeled at all,
and nor is the link state, and attempting to access it results in a NULL
pointer dereference and a crash.
Avoid this by allowing the link state chain to terminate at the downstream
port if no root port exists.
Signed-off-by: Ard Biesheuvel
Signed-off-by: Bjorn Helgaas
Signed-off-by: Greg Kroah-Hartman
commit b4830f3ad9c5e2bb9fd9782c88fd7584556ddc8d
Author: Radim Krčmář
Date: Thu Mar 1 15:24:25 2018 +0100
KVM: x86: fix vcpu initialization with userspace lapic
commit b7e31be385584afe7f073130e8e570d53c95f7fe upstream.
Moving the code around broke this rare configuration.
Use this opportunity to finally call lapic reset from vcpu reset.
Reported-by: syzbot+fb7a33a4b6c35007a72b@syzkaller.appspotmail.com
Suggested-by: Paolo Bonzini
Fixes: 0b2e9904c159 ("KVM: x86: move LAPIC initialization after VMCS creation")
Cc: stable@vger.kernel.org
Signed-off-by: Radim Krčmář
Signed-off-by: Greg Kroah-Hartman
commit 1f17daea70264051c084dcca757e67c8e0288fa0
Author: Paolo Bonzini
Date: Thu Feb 22 16:43:18 2018 +0100
KVM/VMX: Optimize vmx\_vcpu\_run() and svm\_vcpu\_run() by marking the RDMSR path as unlikely()
commit 946fbbc13dce68902f64515b610eeb2a6c3d7a64 upstream.
vmx\_vcpu\_run() and svm\_vcpu\_run() are large functions, and giving
branch hints to the compiler can actually make a substantial cycle
difference by keeping the fast path contiguous in memory.
With this optimization, the retpoline-guest/retpoline-host case is
about 50 cycles faster.
Signed-off-by: Paolo Bonzini
Reviewed-by: Jim Mattson
Cc: David Woodhouse
Cc: KarimAllah Ahmed
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Radim Krčmář
Cc: Thomas Gleixner
Cc: kvm@vger.kernel.org
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/20180222154318.20361-3-pbonzini@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 03d62460c7314704b4903aa38f07e05f540c0ec7
Author: Paolo Bonzini
Date: Fri Feb 23 23:29:32 2018 +0100
KVM: x86: move LAPIC initialization after VMCS creation
commit 0b2e9904c15963e715d33e5f3f1387f17d19333a upstream.
The initial reset of the local APIC is performed before the VMCS has been
created, but it tries to do a vmwrite:
vmwrite error: reg 810 value 4a00 (err 18944)
CPU: 54 PID: 38652 Comm: qemu-kvm Tainted: G W I 4.16.0-0.rc2.git0.1.fc28.x86\_64 #1
Hardware name: Intel Corporation S2600CW/S2600CW, BIOS SE5C610.86B.01.01.0003.090520141303 09/05/2014
Call Trace:
vmx\_set\_rvi [kvm\_intel]
vmx\_hwapic\_irr\_update [kvm\_intel]
kvm\_lapic\_reset [kvm]
kvm\_create\_lapic [kvm]
kvm\_arch\_vcpu\_init [kvm]
kvm\_vcpu\_init [kvm]
vmx\_create\_vcpu [kvm\_intel]
kvm\_vm\_ioctl [kvm]
Move it later, after the VMCS has been created.
Fixes: 4191db26b714 ("KVM: x86: Update APICv on APIC reset")
Cc: stable@vger.kernel.org
Cc: Liran Alon
Signed-off-by: Paolo Bonzini
Signed-off-by: Greg Kroah-Hartman
commit 0d62a56dc454699790a43a57ffa4258ff909b3f5
Author: Paolo Bonzini
Date: Thu Feb 22 16:43:17 2018 +0100
KVM/x86: Remove indirect MSR op calls from SPEC\_CTRL
commit ecb586bd29c99fb4de599dec388658e74388daad upstream.
Having a paravirt indirect call in the IBRS restore path is not a
good idea, since we are trying to protect from speculative execution
of bogus indirect branch targets. It is also slower, so use
native\_wrmsrl() on the vmentry path too.
Signed-off-by: Paolo Bonzini
Reviewed-by: Jim Mattson
Cc: David Woodhouse
Cc: KarimAllah Ahmed
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Radim Krčmář
Cc: Thomas Gleixner
Cc: kvm@vger.kernel.org
Cc: stable@vger.kernel.org
Fixes: d28b387fb74da95d69d2615732f50cceb38e9a4d
Link: http://lkml.kernel.org/r/20180222154318.20361-2-pbonzini@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 7135aaf3ed637b298e7df848095ea53f24c1a8f8
Author: Wanpeng Li
Date: Tue Feb 13 15:36:00 2018 +0100
KVM: mmu: Fix overlap between public and private memslots
commit b28676bb8ae4569cced423dc2a88f7cb319d5379 upstream.
Reported by syzkaller:
pte\_list\_remove: ffff9714eb1f8078 0->BUG
------------[ cut here ]------------
kernel BUG at arch/x86/kvm/mmu.c:1157!
invalid opcode: 0000 [#1] SMP
RIP: 0010:pte\_list\_remove+0x11b/0x120 [kvm]
Call Trace:
drop\_spte+0x83/0xb0 [kvm]
mmu\_page\_zap\_pte+0xcc/0xe0 [kvm]
kvm\_mmu\_prepare\_zap\_page+0x81/0x4a0 [kvm]
kvm\_mmu\_invalidate\_zap\_all\_pages+0x159/0x220 [kvm]
kvm\_arch\_flush\_shadow\_all+0xe/0x10 [kvm]
kvm\_mmu\_notifier\_release+0x6c/0xa0 [kvm]
? kvm\_mmu\_notifier\_release+0x5/0xa0 [kvm]
\_\_mmu\_notifier\_release+0x79/0x110
? \_\_mmu\_notifier\_release+0x5/0x110
exit\_mmap+0x15a/0x170
? do\_exit+0x281/0xcb0
mmput+0x66/0x160
do\_exit+0x2c9/0xcb0
? \_\_context\_tracking\_exit.part.5+0x4a/0x150
do\_group\_exit+0x50/0xd0
SyS\_exit\_group+0x14/0x20
do\_syscall\_64+0x73/0x1f0
entry\_SYSCALL64\_slow\_path+0x25/0x25
The reason is that when creates new memslot, there is no guarantee for new
memslot not overlap with private memslots. This can be triggered by the
following program:
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
long r[16];
int main()
{
void \*p = valloc(0x4000);
r[2] = open("/dev/kvm", 0);
r[3] = ioctl(r[2], KVM\_CREATE\_VM, 0x0ul);
uint64\_t addr = 0xf000;
ioctl(r[3], KVM\_SET\_IDENTITY\_MAP\_ADDR, &addr);
r[6] = ioctl(r[3], KVM\_CREATE\_VCPU, 0x0ul);
ioctl(r[3], KVM\_SET\_TSS\_ADDR, 0x0ul);
ioctl(r[6], KVM\_RUN, 0);
ioctl(r[6], KVM\_RUN, 0);
struct kvm\_userspace\_memory\_region mr = {
.slot = 0,
.flags = KVM\_MEM\_LOG\_DIRTY\_PAGES,
.guest\_phys\_addr = 0xf000,
.memory\_size = 0x4000,
.userspace\_addr = (uintptr\_t) p
};
ioctl(r[3], KVM\_SET\_USER\_MEMORY\_REGION, &mr);
return 0;
}
This patch fixes the bug by not adding a new memslot even if it
overlaps with private memslots.
Reported-by: Dmitry Vyukov
Cc: Paolo Bonzini
Cc: Radim Krčmář
Cc: Dmitry Vyukov
Cc: Eric Biggers
Cc: stable@vger.kernel.org
Signed-off-by: Wanpeng Li
commit 1ebf9ab6c4a00317933f527b5765b44c5504b912
Author: Wanpeng Li
Date: Thu Feb 8 15:32:45 2018 +0800
KVM: X86: Fix SMRAM accessing even if VM is shutdown
commit 95e057e25892eaa48cad1e2d637b80d0f1a4fac5 upstream.
Reported by syzkaller:
WARNING: CPU: 6 PID: 2434 at arch/x86/kvm/vmx.c:6660 handle\_ept\_misconfig+0x54/0x1e0 [kvm\_intel]
CPU: 6 PID: 2434 Comm: repro\_test Not tainted 4.15.0+ #4
RIP: 0010:handle\_ept\_misconfig+0x54/0x1e0 [kvm\_intel]
Call Trace:
vmx\_handle\_exit+0xbd/0xe20 [kvm\_intel]
kvm\_arch\_vcpu\_ioctl\_run+0xdaf/0x1d50 [kvm]
kvm\_vcpu\_ioctl+0x3e9/0x720 [kvm]
do\_vfs\_ioctl+0xa4/0x6a0
SyS\_ioctl+0x79/0x90
entry\_SYSCALL\_64\_fastpath+0x25/0x9c
The testcase creates a first thread to issue KVM\_SMI ioctl, and then creates
a second thread to mmap and operate on the same vCPU. This triggers a race
condition when running the testcase with multiple threads. Sometimes one thread
exits with a triple fault while another thread mmaps and operates on the same
vCPU. Because CS=0x3000/IP=0x8000 is not mapped, accessing the SMI handler
results in an EPT misconfig. This patch fixes it by returning RET\_PF\_EMULATE
in kvm\_handle\_bad\_page(), which will go on to cause an emulation failure and an
exit with KVM\_EXIT\_INTERNAL\_ERROR.
Reported-by: syzbot+c1d9517cab094dae65e446c0c5b4de6c40f4dc58@syzkaller.appspotmail.com
Cc: Paolo Bonzini
Cc: Radim Krčmář
Cc: stable@vger.kernel.org
Signed-off-by: Wanpeng Li
Signed-off-by: Paolo Bonzini
Signed-off-by: Greg Kroah-Hartman
commit f925158cb0d28689e2fe75788b08a8a81cd9e3a3
Author: Paolo Bonzini
Date: Thu Aug 17 15:03:32 2017 +0200
KVM: x86: extend usage of RET\_MMIO\_PF\_\* constants
commit 9b8ebbdb74b5ad76b9dfd8b101af17839174b126 upstream.
The x86 MMU if full of code that returns 0 and 1 for retry/emulate. Use
the existing RET\_MMIO\_PF\_RETRY/RET\_MMIO\_PF\_EMULATE enum, renaming it to
drop the MMIO part.
Signed-off-by: Paolo Bonzini
Cc: Thomas Backlund
Signed-off-by: Greg Kroah-Hartman
commit e0c7b2b16666820bbc88623322d52d7cf725ac03
Author: Arnd Bergmann
Date: Fri Feb 2 16:07:34 2018 +0100
ARM: kvm: fix building with gcc-8
commit 67870eb1204223598ea6d8a4467b482e9f5875b5 upstream.
In banked-sr.c, we use a top-level '\_\_asm\_\_(".arch\_extension virt")'
statement to allow compilation of a multi-CPU kernel for ARMv6
and older ARMv7-A that don't normally support access to the banked
registers.
This is considered to be a programming error by the gcc developers
and will no longer work in gcc-8, where we now get a build error:
/tmp/cc4Qy7GR.s:34: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_usr'
/tmp/cc4Qy7GR.s:41: Error: Banked registers are not available with this architecture. -- `mrs r3,ELR\_hyp'
/tmp/cc4Qy7GR.s:55: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_svc'
/tmp/cc4Qy7GR.s:62: Error: Banked registers are not available with this architecture. -- `mrs r3,LR\_svc'
/tmp/cc4Qy7GR.s:69: Error: Banked registers are not available with this architecture. -- `mrs r3,SPSR\_svc'
/tmp/cc4Qy7GR.s:76: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_abt'
Passign the '-march-armv7ve' flag to gcc works, and is ok here, because
we know the functions won't ever be called on pre-ARMv7VE machines.
Unfortunately, older compiler versions (4.8 and earlier) do not understand
that flag, so we still need to keep the asm around.
Backporting to stable kernels (4.6+) is needed to allow those to be built
with future compilers as well.
Link: https://gcc.gnu.org/bugzilla/show\_bug.cgi?id=84129
Fixes: 33280b4cd1dc ("ARM: KVM: Add banked registers save/restore")
Cc: stable@vger.kernel.org
Signed-off-by: Arnd Bergmann
Signed-off-by: Christoffer Dall
Signed-off-by: Greg Kroah-Hartman
commit fc6be8bc1216e111a6003bcbbb6eaff32d2bd34e
Author: Ulf Magnusson
Date: Mon Feb 5 02:21:13 2018 +0100
ARM: mvebu: Fix broken PL310\_ERRATA\_753970 selects
commit 8aa36a8dcde3183d84db7b0d622ffddcebb61077 upstream.
The MACH\_ARMADA\_375 and MACH\_ARMADA\_38X boards select ARM\_ERRATA\_753970,
but it was renamed to PL310\_ERRATA\_753970 by commit fa0ce4035d48 ("ARM:
7162/1: errata: tidy up Kconfig options for PL310 errata workarounds").
Fix the selects to use the new name.
Discovered with the
https://github.com/ulfalizer/Kconfiglib/blob/master/examples/list\_undefined.py
script.
Fixes: fa0ce4035d48 ("ARM: 7162/1: errata: tidy up Kconfig options for
PL310 errata workarounds"
cc: stable@vger.kernel.org
Signed-off-by: Ulf Magnusson
Signed-off-by: Gregory CLEMENT
Signed-off-by: Greg Kroah-Hartman
commit 4c02f0164b0ea69834976cc6578591b99a06dca4
Author: Daniel Schultz
Date: Tue Feb 13 10:44:32 2018 +0100
ARM: dts: rockchip: Remove 1.8 GHz operation point from phycore som
commit 5ce0bad4ccd04c8a989e94d3c89e4e796ac22e48 upstream.
Rockchip recommends to run the CPU cores only with operations points of
1.6 GHz or lower.
Removed the cpu0 node with too high operation points and use the default
values instead.
Fixes: 903d31e34628 ("ARM: dts: rockchip: Add support for phyCORE-RK3288 SoM")
Cc: stable@vger.kernel.org
Signed-off-by: Daniel Schultz
Signed-off-by: Heiko Stuebner
Signed-off-by: Greg Kroah-Hartman
commit 8dc356e5b936b744b9e8e151ec6e46f670f5935e
Author: Arnd Bergmann
Date: Wed Feb 21 13:18:49 2018 +0100
ARM: orion: fix orion\_ge00\_switch\_board\_info initialization
commit 8337d083507b9827dfb36d545538b7789df834fd upstream.
A section type mismatch warning shows up when building with LTO,
since orion\_ge00\_mvmdio\_bus\_name was put in \_\_initconst but not marked
const itself:
include/linux/of.h: In function 'spear\_setup\_of\_timer':
arch/arm/mach-spear/time.c:207:34: error: 'timer\_of\_match' causes a section type conflict with 'orion\_ge00\_mvmdio\_bus\_name'
static const struct of\_device\_id timer\_of\_match[] \_\_initconst = {
^
arch/arm/plat-orion/common.c:475:32: note: 'orion\_ge00\_mvmdio\_bus\_name' was declared here
static \_\_initconst const char \*orion\_ge00\_mvmdio\_bus\_name = "orion-mii";
^
As pointed out by Andrew Lunn, it should in fact be 'const' but not
'\_\_initconst' because the string is never copied but may be accessed
after the init sections are freed. To fix that, I get rid of the
extra symbol and rewrite the initialization in a simpler way that
assigns both the bus\_id and modalias statically.
I spotted another theoretical bug in the same place, where d->netdev[i]
may be an out of bounds access, this can be fixed by moving the device
assignment into the loop.
Cc: stable@vger.kernel.org
Reviewed-by: Andrew Lunn
Signed-off-by: Arnd Bergmann
Signed-off-by: Greg Kroah-Hartman
commit b20d1086410a66b1c23fad7237d52e0ace67fc2b
Author: Jan Beulich
Date: Mon Feb 19 07:48:11 2018 -0700
x86/mm: Fix {pmd,pud}\_{set,clear}\_flags()
commit 842cef9113c2120f74f645111ded1e020193d84c upstream.
Just like pte\_{set,clear}\_flags() their PMD and PUD counterparts should
not do any address translation. This was outright wrong under Xen
(causing a dead boot with no useful output on "suitable" systems), and
produced needlessly more complicated code (even if just slightly) when
paravirt was enabled.
Signed-off-by: Jan Beulich
Reviewed-by: Juergen Gross
Acked-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Denys Vlasenko
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/5A8AF1BB02000078001A91C3@prv-mh.provo.novell.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 656772cb723303933387ad1a1f49db78eb45a460
Author: Rasmus Villemoes
Date: Fri Feb 16 13:20:48 2018 -0800
nospec: Allow index argument to have const-qualified type
commit b98c6a160a057d5686a8c54c79cc6c8c94a7d0c8 upstream.
The last expression in a statement expression need not be a bare
variable, quoting gcc docs
The last thing in the compound statement should be an expression
followed by a semicolon; the value of this subexpression serves as the
value of the entire construct.
and we already use that in e.g. the min/max macros which end with a
ternary expression.
This way, we can allow index to have const-qualified type, which will in
some cases avoid the need for introducing a local copy of index of
non-const qualified type. That, in turn, can prevent readers not
familiar with the internals of array\_index\_nospec from wondering about
the seemingly redundant extra variable, and I think that's worthwhile
considering how confusing the whole \_nospec business is.
The expression \_i&\_mask has type unsigned long (since that is the type
of \_mask, and the BUILD\_BUG\_ONs guarantee that \_i will get promoted to
that), so in order not to change the type of the whole expression, add
a cast back to typeof(\_i).
Signed-off-by: Rasmus Villemoes
Signed-off-by: Dan Williams
Acked-by: Linus Torvalds
Cc: Andy Lutomirski
Cc: Arjan van de Ven
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: David Woodhouse
Cc: Greg Kroah-Hartman
Cc: Josh Poimboeuf
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Cc: linux-arch@vger.kernel.org
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/151881604837.17395.10812767547837568328.stgit@dwillia2-desk3.amr.corp.intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 81a158d21498a6d30175d1d7fc49420a5f6f09f9
Author: David Hildenbrand
Date: Wed Feb 7 12:46:45 2018 +0100
KVM: s390: consider epoch index on TOD clock syncs
commit 1575767ef3cf5326701d2ae3075b7732cbc855e4 upstream.
For now, we don't take care of over/underflows. Especially underflows
are critical:
Assume the epoch is currently 0 and we get a sync request for delta=1,
meaning the TOD is moved forward by 1 and we have to fix it up by
subtracting 1 from the epoch. Right now, this will leave the epoch
index untouched, resulting in epoch=-1, epoch\_idx=0, which is wrong.
We have to take care of over and underflows, also for the VSIE case. So
let's factor out calculation into a separate function.
Signed-off-by: David Hildenbrand
Message-Id: <20180207114647.6220-5-david@redhat.com>
Reviewed-by: Christian Borntraeger
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Cc: stable@vger.kernel.org
Signed-off-by: Christian Borntraeger
[use u8 for idx]
Signed-off-by: Greg Kroah-Hartman
commit dbab3751bcc7f37cff464a4844133221b304d8a8
Author: David Hildenbrand
Date: Wed Feb 7 12:46:44 2018 +0100
KVM: s390: consider epoch index on hotplugged CPUs
commit d16b52cb9cdb6f06dea8ab2f0a428e7d7f0b0a81 upstream.
We must copy both, the epoch and the epoch\_idx.
Signed-off-by: David Hildenbrand
Message-Id: <20180207114647.6220-4-david@redhat.com>
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Reviewed-by: Cornelia Huck
Reviewed-by: Christian Borntraeger
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Cc: stable@vger.kernel.org
Signed-off-by: Christian Borntraeger
Signed-off-by: Greg Kroah-Hartman
commit 58a5d1ac69a72f6452ee16612c897f4f017c9c03
Author: David Hildenbrand
Date: Wed Feb 7 12:46:43 2018 +0100
KVM: s390: provide only a single function for setting the tod (fix SCK)
commit 0e7def5fb0dc53ddbb9f62a497d15f1e11ccdc36 upstream.
Right now, SET CLOCK called in the guest does not properly take care of
the epoch index, as the call goes via the old kvm\_s390\_set\_tod\_clock()
interface. So the epoch index is neither reset to 0, if required, nor
properly set to e.g. 0xff on negative values.
Fix this by providing a single kvm\_s390\_set\_tod\_clock() function. Move
Multiple-epoch facility handling into it.
Signed-off-by: David Hildenbrand
Message-Id: <20180207114647.6220-3-david@redhat.com>
Reviewed-by: Christian Borntraeger
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Cc: stable@vger.kernel.org
Signed-off-by: Christian Borntraeger
Signed-off-by: Greg Kroah-Hartman
commit c09ea9a8da5b91baba50a0e8e4d2ac95e163e585
Author: David Hildenbrand
Date: Wed Feb 7 12:46:42 2018 +0100
KVM: s390: take care of clock-comparator sign control
commit 5fe01793dd953ab947fababe8abaf5ed5258c8df upstream.
Missed when enabling the Multiple-epoch facility. If the facility is
installed and the control is set, a sign based comaprison has to be
performed.
Right now we would inject wrong interrupts and ignore interrupt
conditions. Also the sleep time is calculated in a wrong way.
Signed-off-by: David Hildenbrand
Message-Id: <20180207114647.6220-2-david@redhat.com>
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Cc: stable@vger.kernel.org
Reviewed-by: Christian Borntraeger
Signed-off-by: Christian Borntraeger
Signed-off-by: Greg Kroah-Hartman
commit bd3ead4576387fc1d71952441c218e57c275cac0
Author: Anna Karbownik
Date: Thu Feb 22 16:18:13 2018 +0100
EDAC, sb\_edac: Fix out of bound writes during DIMM configuration on KNL
commit bf8486709ac7fad99e4040dea73fe466c57a4ae1 upstream.
Commit
3286d3eb906c ("EDAC, sb\_edac: Drop NUM\_CHANNELS from 8 back to 4")
decreased NUM\_CHANNELS from 8 to 4, but this is not enough for Knights
Landing which supports up to 6 channels.
This caused out-of-bounds writes to pvt->mirror\_mode and pvt->tolm
variables which don't pay critical role on KNL code path, so the memory
corruption wasn't causing any visible driver failures.
The easiest way of fixing it is to change NUM\_CHANNELS to 6. Do that.
An alternative solution would be to restructure the KNL part of the
driver to 2MC/3channel representation.
Reported-by: Dan Carpenter
Signed-off-by: Anna Karbownik
Cc: Mauro Carvalho Chehab
Cc: Tony Luck
Cc: jim.m.snow@intel.com
Cc: krzysztof.paliswiat@intel.com
Cc: lukasz.odzioba@intel.com
Cc: qiuxu.zhuo@intel.com
Cc: linux-edac
Cc:
Fixes: 3286d3eb906c ("EDAC, sb\_edac: Drop NUM\_CHANNELS from 8 back to 4")
Link: http://lkml.kernel.org/r/1519312693-4789-1-git-send-email-anna.karbownik@intel.com
[ Massage commit message. ]
Signed-off-by: Borislav Petkov
Signed-off-by: Greg Kroah-Hartman
commit 1ba2b9e01dbfb9af1da2880b24fb001ea07bb664
Author: Mauro Carvalho Chehab
Date: Sat Feb 10 06:14:10 2018 -0500
media: m88ds3103: don't call a non-initalized function
commit b9c97c67fd19262c002d94ced2bfb513083e161e upstream.
If m88d3103 chip ID is not recognized, the device is not initialized.
However, it returns from probe without any error, causing this OOPS:
[ 7.689289] Unable to handle kernel NULL pointer dereference at virtual address 00000000
[ 7.689297] pgd = 7b0bd7a7
[ 7.689302] [00000000] \*pgd=00000000
[ 7.689318] Internal error: Oops: 80000005 [#1] SMP ARM
[ 7.689322] Modules linked in: dvb\_usb\_dvbsky(+) m88ds3103 dvb\_usb\_v2 dvb\_core videobuf2\_vmalloc videobuf2\_memops videobuf2\_core crc32\_arm\_ce videodev media
[ 7.689358] CPU: 3 PID: 197 Comm: systemd-udevd Not tainted 4.15.0-mcc+ #23
[ 7.689361] Hardware name: BCM2835
[ 7.689367] PC is at 0x0
[ 7.689382] LR is at m88ds3103\_attach+0x194/0x1d0 [m88ds3103]
[ 7.689386] pc : [<00000000>] lr : [] psr: 60000013
[ 7.689391] sp : ed8e5c20 ip : ed8c1e00 fp : ed8945c0
[ 7.689395] r10: ed894000 r9 : ed894378 r8 : eda736c0
[ 7.689400] r7 : ed894070 r6 : ed8e5c44 r5 : bf0bb040 r4 : eda77600
[ 7.689405] r3 : 00000000 r2 : 00000000 r1 : 00000000 r0 : eda77600
[ 7.689412] Flags: nZCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
[ 7.689417] Control: 10c5383d Table: 2d8e806a DAC: 00000051
[ 7.689423] Process systemd-udevd (pid: 197, stack limit = 0xe9dbfb63)
[ 7.689428] Stack: (0xed8e5c20 to 0xed8e6000)
[ 7.689439] 5c20: ed853a80 eda73640 ed894000 ed8942c0 ed853a80 bf0b9e98 ed894070 bf0b9f10
[ 7.689449] 5c40: 00000000 00000000 bf08c17c c08dfc50 00000000 00000000 00000000 00000000
[ 7.689459] 5c60: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689468] 5c80: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689479] 5ca0: 00000000 00000000 ed8945c0 ed8942c0 ed894000 ed894830 bf0b9e98 00000000
[ 7.689490] 5cc0: ed894378 bf0a3cb4 bf0bc3b0 0000533b ed920540 00000000 00000034 bf0a6434
[ 7.689500] 5ce0: ee952070 ed826600 bf0a7038 bf0a2dd8 00000001 bf0a6768 bf0a2f90 ed8943c0
[ 7.689511] 5d00: 00000000 c08eca68 ed826620 ed826620 00000000 ee952070 bf0bc034 ee952000
[ 7.689521] 5d20: ed826600 bf0bb080 ffffffed c0aa9e9c c0aa9dac ed826620 c16edf6c c168c2c8
[ 7.689531] 5d40: c16edf70 00000000 bf0bc034 0000000d 00000000 c08e268c bf0bb080 ed826600
[ 7.689541] 5d60: bf0bc034 ed826654 ed826620 bf0bc034 c164c8bc 00000000 00000001 00000000
[ 7.689553] 5d80: 00000028 c08e2948 00000000 bf0bc034 c08e2848 c08e0778 ee9f0a58 ed88bab4
[ 7.689563] 5da0: bf0bc034 ed90ba80 c168c1f0 c08e1934 bf0bb3bc c17045ac bf0bc034 c164c8bc
[ 7.689574] 5dc0: bf0bc034 bf0bb3bc ed91f564 c08e34ec bf0bc000 c164c8bc bf0bc034 c0aa8dc4
[ 7.689584] 5de0: ffffe000 00000000 bf0bf000 ed91f600 ed91f564 c03021e4 00000001 00000000
[ 7.689595] 5e00: c166e040 8040003f ed853a80 bf0bc448 00000000 c1678174 ed853a80 f0f22000
[ 7.689605] 5e20: f0f21fff 8040003f 014000c0 ed91e700 ed91e700 c16d8e68 00000001 ed91e6c0
[ 7.689615] 5e40: bf0bc400 00000001 bf0bc400 ed91f564 00000001 00000000 00000028 c03c9a24
[ 7.689625] 5e60: 00000001 c03c8c94 ed8e5f50 ed8e5f50 00000001 bf0bc400 ed91f540 c03c8cb0
[ 7.689637] 5e80: bf0bc40c 00007fff bf0bc400 c03c60b0 00000000 bf0bc448 00000028 c0e09684
[ 7.689647] 5ea0: 00000002 bf0bc530 c1234bf8 bf0bc5dc bf0bc514 c10ebbe8 ffffe000 bf000000
[ 7.689657] 5ec0: 00011538 00000000 ed8e5f48 00000000 00000000 00000000 00000000 00000000
[ 7.689666] 5ee0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689676] 5f00: 00000000 00000000 7fffffff 00000000 00000013 b6e55a18 0000017b c0309104
[ 7.689686] 5f20: ed8e4000 00000000 00510af0 c03c9430 7fffffff 00000000 00000003 00000000
[ 7.689697] 5f40: 00000000 f0f0f000 00011538 00000000 f0f107b0 f0f0f000 00011538 f0f1fdb8
[ 7.689707] 5f60: f0f1fbe8 f0f1b974 00004000 000041e0 bf0bc3d0 00000001 00000000 000024c4
[ 7.689717] 5f80: 0000002d 0000002e 00000019 00000000 00000010 00000000 16894000 00000000
[ 7.689727] 5fa0: 00000000 c0308f20 16894000 00000000 00000013 b6e55a18 00000000 b6e5652c
[ 7.689737] 5fc0: 16894000 00000000 00000000 0000017b 00020000 00508110 00000000 00510af0
[ 7.689748] 5fe0: bef68948 bef68938 b6e4d3d0 b6d32590 60000010 00000013 00000000 00000000
[ 7.689790] [] (m88ds3103\_attach [m88ds3103]) from [] (dvbsky\_s960c\_attach+0x78/0x280 [dvb\_usb\_dvbsky])
[ 7.689821] [] (dvbsky\_s960c\_attach [dvb\_usb\_dvbsky]) from [] (dvb\_usbv2\_probe+0xa3c/0x1024 [dvb\_usb\_v2])
[ 7.689849] [] (dvb\_usbv2\_probe [dvb\_usb\_v2]) from [] (usb\_probe\_interface+0xf0/0x2a8)
[ 7.689869] [] (usb\_probe\_interface) from [] (driver\_probe\_device+0x2f8/0x4b4)
[ 7.689881] [] (driver\_probe\_device) from [] (\_\_driver\_attach+0x100/0x11c)
[ 7.689895] [] (\_\_driver\_attach) from [] (bus\_for\_each\_dev+0x4c/0x9c)
[ 7.689909] [] (bus\_for\_each\_dev) from [] (bus\_add\_driver+0x1c0/0x264)
[ 7.689919] [] (bus\_add\_driver) from [] (driver\_register+0x78/0xf4)
[ 7.689931] [] (driver\_register) from [] (usb\_register\_driver+0x70/0x134)
[ 7.689946] [] (usb\_register\_driver) from [] (do\_one\_initcall+0x44/0x168)
[ 7.689963] [] (do\_one\_initcall) from [] (do\_init\_module+0x64/0x1f4)
[ 7.689979] [] (do\_init\_module) from [] (load\_module+0x20a0/0x25c8)
[ 7.689993] [] (load\_module) from [] (SyS\_finit\_module+0xb4/0xec)
[ 7.690007] [] (SyS\_finit\_module) from [] (ret\_fast\_syscall+0x0/0x54)
[ 7.690018] Code: bad PC value
This may happen on normal circumstances, if, for some reason, the demod
hangs and start returning an invalid chip ID:
[ 10.394395] m88ds3103 3-0068: Unknown device. Chip\_id=00
So, change the logic to cause probe to fail with -ENODEV, preventing
the OOPS.
Detected while testing DVB MMAP patches on Raspberry Pi 3 with
DVBSky S960CI.
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit ccddee811ebad96a4af2c8de6fda104c40ff60f2
Author: Ming Lei
Date: Fri Feb 23 23:36:56 2018 +0800
blk-mq: don't call io sched's .requeue\_request when requeueing rq to ->dispatch
commit 105976f517791aed3b11f8f53b308a2069d42055 upstream.
\_\_blk\_mq\_requeue\_request() covers two cases:
- one is that the requeued request is added to hctx->dispatch, such as
blk\_mq\_dispatch\_rq\_list()
- another case is that the request is requeued to io scheduler, such as
blk\_mq\_requeue\_request().
We should call io sched's .requeue\_request callback only for the 2nd
case.
Cc: Paolo Valente
Cc: Omar Sandoval
Fixes: bd166ef183c2 ("blk-mq-sched: add framework for MQ capable IO schedulers")
Cc: stable@vger.kernel.org
Reviewed-by: Bart Van Assche
Acked-by: Paolo Valente
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit c5f32462f0df00bc32426c558272d33588c46017
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:17 2018 +0100
s390/qeth: fix IPA command submission race
[ Upstream commit d22ffb5a712f9211ffd104c38fc17cbfb1b5e2b0 ]
If multiple IPA commands are build & sent out concurrently,
fill\_ipacmd\_header() may assign a seqno value to a command that's
different from what send\_control\_data() later assigns to this command's
reply.
This is due to other commands passing through send\_control\_data(),
and incrementing card->seqno.ipa along the way.
So one IPA command has no reply that's waiting for its seqno, while some
other IPA command has multiple reply objects waiting for it.
Only one of those waiting replies wins, and the other(s) times out and
triggers a recovery via send\_ipa\_cmd().
Fix this by making sure that the same seqno value is assigned to
a command and its reply object.
Do so immediately before submitting the command & while holding the
irq\_pending "lock", to produce nicely ascending seqnos.
As a side effect, \*all\* IPA commands now use a reply object that's
waiting for its actual seqno. Previously, early IPA commands that were
submitted while the card was still DOWN used the "catch-all" IDX seqno.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit eae17c4063900441277b323775e3f922986a0a8c
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:16 2018 +0100
s390/qeth: fix IP address lookup for L3 devices
[ Upstream commit c5c48c58b259bb8f0482398370ee539d7a12df3e ]
Current code ("qeth\_l3\_ip\_from\_hash()") matches a queried address object
against objects in the IP table by IP address, Mask/Prefix Length and
MAC address ("qeth\_l3\_ipaddrs\_is\_equal()"). But what callers actually
require is either
a) "is this IP address registered" (ie. match by IP address only),
before adding a new address.
b) or "is this address object registered" (ie. match all relevant
attributes), before deleting an address.
Right now
1. the ADD path is too strict in its lookup, and eg. doesn't detect
conflicts between an existing NORMAL address and a new VIPA address
(because the NORMAL address will have mask != 0, while VIPA has
a mask == 0),
2. the DELETE path is not strict enough, and eg. allows del\_rxip() to
delete a VIPA address as long as the IP address matches.
Fix all this by adding helpers (\_addr\_match\_ip() and \_addr\_match\_all())
that do the appropriate checking.
Note that the ADD path for NORMAL addresses is special, as qeth keeps
track of how many times such an address is in use (and there is no
immediate way of returning errors to the caller). So when a requested
NORMAL address \_fully\_ matches an existing one, it's not considered a
conflict and we merely increment the refcount.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 87c4789f452d3030b149df8ae8a0cce1e37a9da4
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:15 2018 +0100
Revert "s390/qeth: fix using of ref counter for rxip addresses"
[ Upstream commit 4964c66fd49b2e2342da35358f2ff74614bcbaee ]
This reverts commit cb816192d986f7596009dedcf2201fe2e5bc2aa7.
The issue this attempted to fix never actually occurs.
l3\_add\_rxip() checks (via l3\_ip\_from\_hash()) if the requested address
was previously added to the card. If so, it returns -EEXIST and doesn't
call l3\_add\_ip().
As a result, the "address exists" path in l3\_add\_ip() is never taken
for rxip addresses, and this patch had no effect.
Fixes: cb816192d986 ("s390/qeth: fix using of ref counter for rxip addresses")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 56f662db7f5629ee0f5566ac229bc8a188339550
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:14 2018 +0100
s390/qeth: fix double-free on IP add/remove race
[ Upstream commit 14d066c3531a87f727968cacd85bd95c75f59843 ]
Registering an IPv4 address with the HW takes quite a while, so we
temporarily drop the ip\_htable lock. Any concurrent add/remove of the
same IP adjusts the IP's use count, and (on remove) is then blocked by
addr->in\_progress.
After the register call has completed, we check the use count for
concurrently attempted add/remove calls - and possibly straight-away
deregister the IP again. This happens via l3\_delete\_ip(), which
1) looks up the queried IP in the htable (getting a reference to the
\*same\* queried object),
2) deregisters the IP from the HW, and
3) frees the IP object.
The caller in l3\_add\_ip() then does a second free on the same object.
For this case, skip all the extra checks and lookups in l3\_delete\_ip()
and just deregister & free the IP object ourselves.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 027637104ddf90f87d463002f369599e0cef6c1d
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:13 2018 +0100
s390/qeth: fix IP removal on offline cards
[ Upstream commit 98d823ab1fbdcb13abc25b420f9bb71bade42056 ]
If the HW is not reachable, then none of the IPs in qeth's internal
table has been registered with the HW yet. So when deleting such an IP,
there's no need to stage it for deregistration - just drop it from
the table.
This fixes the "add-delete-add" scenario on an offline card, where the
the second "add" merely increments the IP's use count. But as the IP is
still set to DISP\_ADDR\_DELETE from the previous "delete" step,
l3\_recover\_ip() won't register it with the HW when the card goes online.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fa4919e37f8e1c37e07ea4a5c590cbe59fe696b9
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:12 2018 +0100
s390/qeth: fix overestimated count of buffer elements
[ Upstream commit 12472af89632beb1ed8dea29d4efe208ca05b06a ]
qeth\_get\_elements\_for\_range() doesn't know how to handle a 0-length
range (ie. start == end), and returns 1 when it should return 0.
Such ranges occur on TSO skbs, where the L2/L3/L4 headers (and thus all
of the skb's linear data) are skipped when mapping the skb into regular
buffer elements.
This overestimation may cause several performance-related issues:
1. sub-optimal IO buffer selection, where the next buffer gets selected
even though the skb would actually still fit into the current buffer.
2. forced linearization, if the element count for a non-linear skb
exceeds QETH\_MAX\_BUFFER\_ELEMENTS.
Rather than modifying qeth\_get\_elements\_for\_range() and adding overhead
to every caller, fix up those callers that are in risk of passing a
0-length range.
Fixes: 2863c61334aa ("qeth: refactor calculation of SBALE count")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 128c7e69233334895e887f942c8f5c72f51821f3
Author: Julian Wiedmann
Date: Fri Feb 9 11:03:50 2018 +0100
s390/qeth: fix SETIP command handling
[ Upstream commit 1c5b2216fbb973a9410e0b06389740b5c1289171 ]
send\_control\_data() applies some special handling to SETIP v4 IPA
commands. But current code parses \*all\* command types for the SETIP
command code. Limit the command code check to IPA commands.
Fixes: 5b54e16f1a54 ("qeth: do not spin for SETIP ip assist command")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fcdfb9d80dc926f07b42129d08b197fd5d2ec65d
Author: Ursula Braun
Date: Fri Feb 9 11:03:49 2018 +0100
s390/qeth: fix underestimated count of buffer elements
[ Upstream commit 89271c65edd599207dd982007900506283c90ae3 ]
For a memory range/skb where the last byte falls onto a page boundary
(ie. 'end' is of the form xxx...xxx001), the PFN\_UP() part of the
calculation currently doesn't round up to the next PFN due to an
off-by-one error.
Thus qeth believes that the skb occupies one page less than it
actually does, and may select a IO buffer that doesn't have enough spare
buffer elements to fit all of the skb's data.
HW detects this as a malformed buffer descriptor, and raises an
exception which then triggers device recovery.
Fixes: 2863c61334aa ("qeth: refactor calculation of SBALE count")
Signed-off-by: Ursula Braun
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 99a781947c2ab1e7b77bc88017fa58e78ff5c3ba
Author: Jason Wang
Date: Wed Feb 28 18:20:04 2018 +0800
virtio-net: disable NAPI only when enabled during XDP set
[ Upstream commit 4e09ff5362843dff3accfa84c805c7f3a99de9cd ]
We try to disable NAPI to prevent a single XDP TX queue being used by
multiple cpus. But we don't check if device is up (NAPI is enabled),
this could result stall because of infinite wait in
napi\_disable(). Fixing this by checking device state through
netif\_running() before.
Fixes: 4941d472bf95b ("virtio-net: do not reset during XDP set")
Signed-off-by: Jason Wang
Acked-by: Michael S. Tsirkin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5134b919cc2c2b225ac8d82b54cac5dcb3c41267
Author: Jason Wang
Date: Sat Feb 24 11:32:25 2018 +0800
tuntap: disable preemption during XDP processing
[ Upstream commit 23e43f07f896f8578318cfcc9466f1e8b8ab21b6 ]
Except for tuntap, all other drivers' XDP was implemented at NAPI
poll() routine in a bh. This guarantees all XDP operation were done at
the same CPU which is required by e.g BFP\_MAP\_TYPE\_PERCPU\_ARRAY. But
for tuntap, we do it in process context and we try to protect XDP
processing by RCU reader lock. This is insufficient since
CONFIG\_PREEMPT\_RCU can preempt the RCU reader critical section which
breaks the assumption that all XDP were processed in the same CPU.
Fixing this by simply disabling preemption during XDP processing.
Fixes: 761876c857cb ("tap: XDP support")
Signed-off-by: Jason Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1903344b6320e18b82cb9f49c0e9b8fd0f80b695
Author: Jason Wang
Date: Sat Feb 24 11:32:26 2018 +0800
tuntap: correctly add the missing XDP flush
[ Upstream commit 1bb4f2e868a2891ab8bc668b8173d6ccb8c4ce6f ]
We don't flush batched XDP packets through xdp\_do\_flush\_map(), this
will cause packets stall at TX queue. Consider we don't do XDP on NAPI
poll(), the only possible fix is to call xdp\_do\_flush\_map()
immediately after xdp\_do\_redirect().
Note, this in fact won't try to batch packets through devmap, we could
address in the future.
Reported-by: Christoffer Dall
Fixes: 761876c857cb ("tap: XDP support")
Signed-off-by: Jason Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit abb4a8b870b5c644c9bb6d9bd372298002f0a65f
Author: Soheil Hassas Yeganeh
Date: Tue Feb 27 18:32:18 2018 -0500
tcp: purge write queue upon RST
[ Upstream commit a27fd7a8ed3856faaf5a2ff1c8c5f00c0667aaa0 ]
When the connection is reset, there is no point in
keeping the packets on the write queue until the connection
is closed.
RFC 793 (page 70) and RFC 793-bis (page 64) both suggest
purging the write queue upon RST:
https://tools.ietf.org/html/draft-ietf-tcpm-rfc793bis-07
Moreover, this is essential for a correct MSG\_ZEROCOPY
implementation, because userspace cannot call close(fd)
before receiving zerocopy signals even when the connection
is reset.
Fixes: f214f915e7db ("tcp: enable MSG\_ZEROCOPY")
Signed-off-by: Soheil Hassas Yeganeh
Reviewed-by: Eric Dumazet
Signed-off-by: Yuchung Cheng
Signed-off-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit eec434c573e78c1190a812cb48a8b16c254541ea
Author: Jason A. Donenfeld
Date: Wed Feb 21 04:41:59 2018 +0100
netlink: put module reference if dump start fails
[ Upstream commit b87b6194be631c94785fe93398651e804ed43e28 ]
Before, if cb->start() failed, the module reference would never be put,
because cb->cb\_running is intentionally false at this point. Users are
generally annoyed by this because they can no longer unload modules that
leak references. Also, it may be possible to tediously wrap a reference
counter back to zero, especially since module.c still uses atomic\_inc
instead of refcount\_inc.
This patch expands the error path to simply call module\_put if
cb->start() fails.
Fixes: 41c87425a1ac ("netlink: do not set cb\_running if dump's start() errs")
Signed-off-by: Jason A. Donenfeld
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit abd7663b5d1c07106b65361e6f2effd1c0313e7e
Author: Ido Schimmel
Date: Sat Feb 17 00:30:44 2018 +0100
mlxsw: spectrum\_router: Do not unconditionally clear route offload indication
[ Upstream commit d1c95af366961101819f07e3c64d44f3be7f0367 ]
When mlxsw replaces (or deletes) a route it removes the offload
indication from the replaced route. This is problematic for IPv4 routes,
as the offload indication is stored in the fib\_info which is usually
shared between multiple routes.
Instead of unconditionally clearing the offload indication, only clear
it if no other route is using the fib\_info.
Fixes: 3984d1a89fe7 ("mlxsw: spectrum\_router: Provide offload indication using nexthop flags")
Signed-off-by: Ido Schimmel
Reported-by: Alexander Petrovskiy
Tested-by: Alexander Petrovskiy
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ebadf888288c9e069b0141a4f00784e7245c5e28
Author: Paolo Abeni
Date: Mon Feb 5 22:23:01 2018 +0100
cls\_u32: fix use after free in u32\_destroy\_key()
[ Upstream commit d7cdee5ea8d28ae1b6922deb0c1badaa3aa0ef8c ]
Li Shuang reported an Oops with cls\_u32 due to an use-after-free
in u32\_destroy\_key(). The use-after-free can be triggered with:
dev=lo
tc qdisc add dev $dev root handle 1: htb default 10
tc filter add dev $dev parent 1: prio 5 handle 1: protocol ip u32 divisor 256
tc filter add dev $dev protocol ip parent 1: prio 5 u32 ht 800:: match ip dst\
10.0.0.0/8 hashkey mask 0x0000ff00 at 16 link 1:
tc qdisc del dev $dev root
Which causes the following kasan splat:
==================================================================
BUG: KASAN: use-after-free in u32\_destroy\_key.constprop.21+0x117/0x140 [cls\_u32]
Read of size 4 at addr ffff881b83dae618 by task kworker/u48:5/571
CPU: 17 PID: 571 Comm: kworker/u48:5 Not tainted 4.15.0+ #87
Hardware name: Dell Inc. PowerEdge R730/072T6D, BIOS 2.1.7 06/16/2016
Workqueue: tc\_filter\_workqueue u32\_delete\_key\_freepf\_work [cls\_u32]
Call Trace:
dump\_stack+0xd6/0x182
? dma\_virt\_map\_sg+0x22e/0x22e
print\_address\_description+0x73/0x290
kasan\_report+0x277/0x360
? u32\_destroy\_key.constprop.21+0x117/0x140 [cls\_u32]
u32\_destroy\_key.constprop.21+0x117/0x140 [cls\_u32]
u32\_delete\_key\_freepf\_work+0x1c/0x30 [cls\_u32]
process\_one\_work+0xae0/0x1c80
? sched\_clock+0x5/0x10
? pwq\_dec\_nr\_in\_flight+0x3c0/0x3c0
? \_raw\_spin\_unlock\_irq+0x29/0x40
? trace\_hardirqs\_on\_caller+0x381/0x570
? \_raw\_spin\_unlock\_irq+0x29/0x40
? finish\_task\_switch+0x1e5/0x760
? finish\_task\_switch+0x208/0x760
? preempt\_notifier\_dec+0x20/0x20
? \_\_schedule+0x839/0x1ee0
? check\_noncircular+0x20/0x20
? firmware\_map\_remove+0x73/0x73
? find\_held\_lock+0x39/0x1c0
? worker\_thread+0x434/0x1820
? lock\_contended+0xee0/0xee0
? lock\_release+0x1100/0x1100
? init\_rescuer.part.16+0x150/0x150
? retint\_kernel+0x10/0x10
worker\_thread+0x216/0x1820
? process\_one\_work+0x1c80/0x1c80
? lock\_acquire+0x1a5/0x540
? lock\_downgrade+0x6b0/0x6b0
? sched\_clock+0x5/0x10
? lock\_release+0x1100/0x1100
? compat\_start\_thread+0x80/0x80
? do\_raw\_spin\_trylock+0x190/0x190
? \_raw\_spin\_unlock\_irq+0x29/0x40
? trace\_hardirqs\_on\_caller+0x381/0x570
? \_raw\_spin\_unlock\_irq+0x29/0x40
? finish\_task\_switch+0x1e5/0x760
? finish\_task\_switch+0x208/0x760
? preempt\_notifier\_dec+0x20/0x20
? \_\_schedule+0x839/0x1ee0
? kmem\_cache\_alloc\_trace+0x143/0x320
? firmware\_map\_remove+0x73/0x73
? sched\_clock+0x5/0x10
? sched\_clock\_cpu+0x18/0x170
? find\_held\_lock+0x39/0x1c0
? schedule+0xf3/0x3b0
? lock\_downgrade+0x6b0/0x6b0
? \_\_schedule+0x1ee0/0x1ee0
? do\_wait\_intr\_irq+0x340/0x340
? do\_raw\_spin\_trylock+0x190/0x190
? \_raw\_spin\_unlock\_irqrestore+0x32/0x60
? process\_one\_work+0x1c80/0x1c80
? process\_one\_work+0x1c80/0x1c80
kthread+0x312/0x3d0
? kthread\_create\_worker\_on\_cpu+0xc0/0xc0
ret\_from\_fork+0x3a/0x50
Allocated by task 1688:
kasan\_kmalloc+0xa0/0xd0
\_\_kmalloc+0x162/0x380
u32\_change+0x1220/0x3c9e [cls\_u32]
tc\_ctl\_tfilter+0x1ba6/0x2f80
rtnetlink\_rcv\_msg+0x4f0/0x9d0
netlink\_rcv\_skb+0x124/0x320
netlink\_unicast+0x430/0x600
netlink\_sendmsg+0x8fa/0xd60
sock\_sendmsg+0xb1/0xe0
\_\_\_sys\_sendmsg+0x678/0x980
\_\_sys\_sendmsg+0xc4/0x210
do\_syscall\_64+0x232/0x7f0
return\_from\_SYSCALL\_64+0x0/0x75
Freed by task 112:
kasan\_slab\_free+0x71/0xc0
kfree+0x114/0x320
rcu\_process\_callbacks+0xc3f/0x1600
\_\_do\_softirq+0x2bf/0xc06
The buggy address belongs to the object at ffff881b83dae600
which belongs to the cache kmalloc-4096 of size 4096
The buggy address is located 24 bytes inside of
4096-byte region [ffff881b83dae600, ffff881b83daf600)
The buggy address belongs to the page:
page:ffffea006e0f6a00 count:1 mapcount:0 mapping: (null) index:0x0 compound\_mapcount: 0
flags: 0x17ffffc0008100(slab|head)
raw: 0017ffffc0008100 0000000000000000 0000000000000000 0000000100070007
raw: dead000000000100 dead000000000200 ffff880187c0e600 0000000000000000
page dumped because: kasan: bad access detected
Memory state around the buggy address:
ffff881b83dae500: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
ffff881b83dae580: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
>ffff881b83dae600: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
^
ffff881b83dae680: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
ffff881b83dae700: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
==================================================================
The problem is that the htnode is freed before the linked knodes and the
latter will try to access the first at u32\_destroy\_key() time.
This change addresses the issue using the htnode refcnt to guarantee
the correct free order. While at it also add a RCU annotation,
to keep sparse happy.
v1 -> v2: use rtnl\_derefence() instead of RCU read locks
v2 -> v3:
- don't check refcnt in u32\_destroy\_hnode()
- cleaned-up u32\_destroy() implementation
- cleaned-up code comment
v3 -> v4:
- dropped unneeded comment
Reported-by: Li Shuang
Fixes: c0d378ef1266 ("net\_sched: use tcf\_queue\_work() in u32 filter")
Signed-off-by: Paolo Abeni
Acked-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fb8a84cb9f6a305e1a887b9ca97515d5688f8bc1
Author: Tom Lendacky
Date: Tue Feb 20 15:22:05 2018 -0600
amd-xgbe: Restore PCI interrupt enablement setting on resume
[ Upstream commit cfd092f2db8b4b6727e1c03ef68a7842e1023573 ]
After resuming from suspend, the PCI device support must re-enable the
interrupt setting so that interrupts are actually delivered.
Signed-off-by: Tom Lendacky
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e7b316ac78e2cb5f7fc75df63cef92f0a1210537
Author: Eran Ben Elisha
Date: Thu Jan 25 11:18:09 2018 +0200
net/mlx5e: Verify inline header size do not exceed SKB linear size
[ Upstream commit f600c6088018d1dbc5777d18daa83660f7ea4a64 ]
Driver tries to copy at least MLX5E\_MIN\_INLINE bytes into the control
segment of the WQE. It assumes that the linear part contains at least
MLX5E\_MIN\_INLINE bytes, which can be wrong.
Cited commit verified that driver will not copy more bytes into the
inline header part that the actual size of the packet. Re-factor this
check to make sure we do not exceed the linear part as well.
This fix is aligned with the current driver's assumption that the entire
L2 will be present in the linear part of the SKB.
Fixes: 6aace17e64f4 ("net/mlx5e: Fix inline header size for small packets")
Signed-off-by: Eran Ben Elisha
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit cbd173b8105c259731c981849549b989c55624cf
Author: Ido Schimmel
Date: Sun Feb 25 21:59:06 2018 +0200
bridge: Fix VLAN reference count problem
[ Upstream commit 0e5a82efda872c2469c210957d7d4161ef8f4391 ]
When a VLAN is added on a port, a reference is taken on the
corresponding master VLAN entry. If it does not already exist, then it
is created and a reference taken.
However, in the second case a reference is not really taken when
CONFIG\_REFCOUNT\_FULL is enabled as refcount\_inc() is replaced by
refcount\_inc\_not\_zero().
Fix this by using refcount\_set() on a newly created master VLAN entry.
Fixes: 251277598596 ("net, bridge: convert net\_bridge\_vlan.refcnt from atomic\_t to refcount\_t")
Signed-off-by: Ido Schimmel
Acked-by: Nikolay Aleksandrov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 00ec3b0ca32f28773c700b841f1802ec3d848051
Author: Alexey Kodanev
Date: Mon Feb 5 15:10:35 2018 +0300
sctp: fix dst refcnt leak in sctp\_v6\_get\_dst()
[ Upstream commit 957d761cf91cdbb175ad7d8f5472336a4d54dbf2 ]
When going through the bind address list in sctp\_v6\_get\_dst() and
the previously found address is better ('matchlen > bmatchlen'),
the code continues to the next iteration without releasing currently
held destination.
Fix it by releasing 'bdst' before continue to the next iteration, and
instead of introducing one more '!IS\_ERR(bdst)' check for dst\_release(),
move the already existed one right after ip6\_dst\_lookup\_flow(), i.e. we
shouldn't proceed further if we get an error for the route lookup.
Fixes: dbc2b5e9a09e ("sctp: fix src address selection if using secondary addresses for ipv6")
Signed-off-by: Alexey Kodanev
Acked-by: Neil Horman
Acked-by: Marcelo Ricardo Leitner
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 97ba6e5ff68454320695d1372d035c624b66c4ba
Author: David Ahern
Date: Wed Feb 21 11:00:54 2018 -0800
net: ipv4: Set addr\_type in hash\_keys for forwarded case
[ Upstream commit 1fe4b1184c2ae2bfbf9e8b14c9c0c1945c98f205 ]
The result of the skb flow dissect is copied from keys to hash\_keys to
ensure only the intended data is hashed. The original L4 hash patch
overlooked setting the addr\_type for this case; add it.
Fixes: bf4e0a3db97eb ("net: ipv4: add support for ECMP hash policy choice")
Reported-by: Ido Schimmel
Signed-off-by: David Ahern
Acked-by: Nikolay Aleksandrov
Reviewed-by: Ido Schimmel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 73cb791fe41cdffda6f26aa0559dc17c11d0ee38
Author: Jiri Pirko
Date: Tue Feb 13 11:22:42 2018 +0100
mlxsw: spectrum\_router: Fix error path in mlxsw\_sp\_vr\_create
[ Upstream commit 0f2d2b2736b08dafa3bde31d048750fbc8df3a31 ]
Since mlxsw\_sp\_fib\_create() and mlxsw\_sp\_mr\_table\_create()
use ERR\_PTR macro to propagate int err through return of a pointer,
the return value is not NULL in case of failure. So if one
of the calls fails, one of vr->fib4, vr->fib6 or vr->mr4\_table
is not NULL and mlxsw\_sp\_vr\_is\_used wrongly assumes
that vr is in use which leads to crash like following one:
[ 1293.949291] BUG: unable to handle kernel NULL pointer dereference at 00000000000006c9
[ 1293.952729] IP: mlxsw\_sp\_mr\_table\_flush+0x15/0x70 [mlxsw\_spectrum]
Fix this by using local variables to hold the pointers and set vr->\*
only in case everything went fine.
Fixes: 76610ebbde18 ("mlxsw: spectrum\_router: Refactor virtual router handling")
Fixes: a3d9bc506d64 ("mlxsw: spectrum\_router: Extend virtual routers with IPv6 support")
Fixes: d42b0965b1d4 ("mlxsw: spectrum\_router: Add multicast routes notification handling functionality")
Signed-off-by: Jiri Pirko
Reviewed-by: Ido Schimmel
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0ab87ec99e9998b908281e92234b87d3d2e27e49
Author: Yuchung Cheng
Date: Tue Feb 27 14:15:02 2018 -0800
tcp: revert F-RTO extension to detect more spurious timeouts
[ Upstream commit fc68e171d376c322e6777a3d7ac2f0278b68b17f ]
This reverts commit 89fe18e44f7ee5ab1c90d0dff5835acee7751427.
While the patch could detect more spurious timeouts, it could cause
poor TCP performance on broken middle-boxes that modifies TCP packets
(e.g. receive window, SACK options). Since the performance gain is
much smaller compared to the potential loss. The best solution is
to fully revert the change.
Fixes: 89fe18e44f7e ("tcp: extend F-RTO to catch more spurious timeouts")
Reported-by: Teodor Milkov
Signed-off-by: Yuchung Cheng
Signed-off-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit cc8dadb8c0f45ab5397d956487a8b0dad6c70a67
Author: Yuchung Cheng
Date: Tue Feb 27 14:15:01 2018 -0800
tcp: revert F-RTO middle-box workaround
[ Upstream commit d4131f09770d9b7471c9da65e6ecd2477746ac5c ]
This reverts commit cc663f4d4c97b7297fb45135ab23cfd508b35a77. While fixing
some broken middle-boxes that modifies receive window fields, it does not
address middle-boxes that strip off SACK options. The best solution is
to fully revert this patch and the root F-RTO enhancement.
Fixes: cc663f4d4c97 ("tcp: restrict F-RTO to work-around broken middle-boxes")
Reported-by: Teodor Milkov
Signed-off-by: Yuchung Cheng
Signed-off-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 36728a6b39c1c61f9f96281b09d3648ac27cce51
Author: Xin Long
Date: Mon Feb 12 18:29:06 2018 +0800
sctp: do not pr\_err for the duplicated node in transport rhlist
[ Upstream commit 27af86bb038d9c8b8066cd17854ddaf2ea92bce1 ]
The pr\_err in sctp\_hash\_transport was supposed to report a sctp bug
for using rhashtable/rhlist.
The err '-EEXIST' introduced in Commit cd2b70875058 ("sctp: check
duplicate node before inserting a new transport") doesn't belong
to that case.
So just return -EEXIST back without pr\_err any kmsg.
Fixes: cd2b70875058 ("sctp: check duplicate node before inserting a new transport")
Reported-by: Wei Chen
Signed-off-by: Xin Long
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 54d6bc97b4c9af3dee9fc594c88d1ea1f9382630
Author: Ivan Vecera
Date: Thu Feb 8 16:10:39 2018 +0100
net/sched: cls\_u32: fix cls\_u32 on filter replace
[ Upstream commit eb53f7af6f15285e2f6ada97285395343ce9f433 ]
The following sequence is currently broken:
# tc qdisc add dev foo ingress
# tc filter replace dev foo protocol all ingress \
u32 match u8 0 0 action mirred egress mirror dev bar1
# tc filter replace dev foo protocol all ingress \
handle 800::800 pref 49152 \
u32 match u8 0 0 action mirred egress mirror dev bar2
Error: cls\_u32: Key node flags do not match passed flags.
We have an error talking to the kernel, -1
The error comes from u32\_change() when comparing new and
existing flags. The existing ones always contains one of
TCA\_CLS\_FLAGS\_{,NOT}\_IN\_HW flag depending on offloading state.
These flags cannot be passed from userspace so the condition
(n->flags != flags) in u32\_change() always fails.
Fix the condition so the flags TCA\_CLS\_FLAGS\_NOT\_IN\_HW and
TCA\_CLS\_FLAGS\_IN\_HW are not taken into account.
Fixes: 24d3dc6d27ea ("net/sched: cls\_u32: Reflect HW offload status")
Signed-off-by: Ivan Vecera
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a01550d778a4dd00bfcc548f2bfd57184192cd32
Author: Eric Dumazet
Date: Thu Feb 22 19:45:27 2018 -0800
net\_sched: gen\_estimator: fix broken estimators based on percpu stats
[ Upstream commit a5f7add332b4ea6d4b9480971b3b0f5e66466ae9 ]
pfifo\_fast got percpu stats lately, uncovering a bug I introduced last
year in linux-4.10.
I missed the fact that we have to clear our temporary storage
before calling \_\_gnet\_stats\_copy\_basic() in the case of percpu stats.
Without this fix, rate estimators (tc qd replace dev xxx root est 1sec
4sec pfifo\_fast) are utterly broken.
Fixes: 1c0d32fde5bd ("net\_sched: gen\_estimator: complete rewrite of rate estimators")
Signed-off-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5b5be45ed1f283bd4d9eeef93ac4491df25d6c92
Author: Inbar Karmy
Date: Thu Dec 7 17:26:33 2017 +0200
net/mlx5e: Fix loopback self test when GRO is off
[ Upstream commit ef7a3518f7dd4f4cf5e5b5358c93d1eb78df28fb ]
When GRO is off, the transport header pointer in sk\_buff is
initialized to network's header.
To find the udp header, instead of using udp\_hdr() which assumes
skb\_network\_header was set, manually calculate the udp header offset.
Fixes: 0952da791c97 ("net/mlx5e: Add support for loopback selftest")
Signed-off-by: Inbar Karmy
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit ff01f118d1682aa3bc2a2e0459cd3ce127ffde22
Author: Tonghao Zhang
Date: Sun Feb 4 18:07:10 2018 -0800
doc: Change the min default value of tcp\_wmem/tcp\_rmem.
[ Upstream commit a61a86f8db92923a2a4c857c49a795bcae754497 ]
The SK\_MEM\_QUANTUM was changed from PAGE\_SIZE to 4096. And the
tcp\_wmem/tcp\_rmem min default values are 4096.
Fixes: bd68a2a854ad ("net: set SK\_MEM\_QUANTUM to 4096")
Cc: Eric Dumazet
Signed-off-by: Tonghao Zhang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit d6a76199e85168160a58c827c30e58dae7570413
Author: Eric Dumazet
Date: Wed Feb 21 06:43:03 2018 -0800
tcp\_bbr: better deal with suboptimal GSO
[ Upstream commit 350c9f484bde93ef229682eedd98cd5f74350f7f ]
BBR uses tcp\_tso\_autosize() in an attempt to probe what would be the
burst sizes and to adjust cwnd in bbr\_target\_cwnd() with following
gold formula :
/\* Allow enough full-sized skbs in flight to utilize end systems. \*/
cwnd += 3 \* bbr->tso\_segs\_goal;
But GSO can be lacking or be constrained to very small
units (ip link set dev ... gso\_max\_segs 2)
What we really want is to have enough packets in flight so that both
GSO and GRO are efficient.
So in the case GSO is off or downgraded, we still want to have the same
number of packets in flight as if GSO/TSO was fully operational, so
that GRO can hopefully be working efficiently.
To fix this issue, we make tcp\_tso\_autosize() unaware of
sk->sk\_gso\_max\_segs
Only tcp\_tso\_segs() has to enforce the gso\_max\_segs limit.
Tested:
ethtool -K eth0 tso off gso off
tc qd replace dev eth0 root pfifo\_fast
Before patch:
for f in {1..5}; do ./super\_netperf 1 -H lpaa24 -- -K bbr; done
    691  (ss -temoi shows cwnd is stuck around 6 )
    667
    651
    631
    517
After patch :
# for f in {1..5}; do ./super\_netperf 1 -H lpaa24 -- -K bbr; done
   1733 (ss -temoi shows cwnd is around 386 )
   1778
   1746
   1781
   1718
Fixes: 0f8782ea1497 ("tcp\_bbr: add BBR congestion control")
Signed-off-by: Eric Dumazet
Reported-by: Oleksandr Natalenko
Acked-by: Neal Cardwell
Acked-by: Soheil Hassas Yeganeh
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f0a04a0e1ab48ba7089f9476dcf22ce00cf7b9e9
Author: David Howells
Date: Thu Feb 22 14:38:14 2018 +0000
rxrpc: Fix send in rxrpc\_send\_data\_packet()
[ Upstream commit 93c62c45ed5fad1b87e3a45835b251cd68de9c46 ]
All the kernel\_sendmsg() calls in rxrpc\_send\_data\_packet() need to send
both parts of the iov[] buffer, but one of them does not. Fix it so that
it does.
Without this, short IPv6 rxrpc DATA packets may be seen that have the rxrpc
header included, but no payload.
Fixes: 5a924b8951f8 ("rxrpc: Don't store the rxrpc header in the Tx queue sk\_buffs")
Reported-by: Marc Dionne
Signed-off-by: David Howells
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 17634603d494978f5bf3ce9f261862c8f119af36
Author: Ilya Lesokhin
Date: Mon Feb 12 12:57:04 2018 +0200
tcp: Honor the eor bit in tcp\_mtu\_probe
[ Upstream commit 808cf9e38cd7923036a99f459ccc8cf2955e47af ]
Avoid SKB coalescing if eor bit is set in one of the relevant
SKBs.
Fixes: c134ecb87817 ("tcp: Make use of MSG\_EOR in tcp\_sendmsg")
Signed-off-by: Ilya Lesokhin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dcb5da20ee3fdeb06dadb53c0102642d0a27ad23
Author: Heiner Kallweit
Date: Thu Feb 8 21:01:48 2018 +0100
net: phy: fix phy\_start to consider PHY\_IGNORE\_INTERRUPT
[ Upstream commit 08f5138512180a479ce6b9d23b825c9f4cd3be77 ]
This condition wasn't adjusted when PHY\_IGNORE\_INTERRUPT (-2) was added
long ago. In case of PHY\_IGNORE\_INTERRUPT the MAC interrupt indicates
also PHY state changes and we should do what the symbol says.
Fixes: 84a527a41f38 ("net: phylib: fix interrupts re-enablement in phy\_start")
Signed-off-by: Heiner Kallweit
Reviewed-by: Florian Fainelli
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f26693d38760e5714cd12c091a21c8e95f224c44
Author: Gal Pressman
Date: Thu Jan 25 18:00:41 2018 +0200
net/mlx5e: Specify numa node when allocating drop rq
[ Upstream commit 2f0db87901698cd73d828cc6fb1957b8916fc911 ]
When allocating a drop rq, no numa node is explicitly set which means
allocations are done on node zero. This is not necessarily the nearest
numa node to the HCA, and even worse, might even be a memoryless numa
node.
Choose the numa\_node given to us by the pci device in order to properly
allocate the coherent dma memory instead of assuming zero is valid.
Fixes: 556dd1b9c313 ("net/mlx5e: Set drop RQ's necessary parameters only")
Signed-off-by: Gal Pressman
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 2229dd5dd6c6d55465e197e77bfcd605d9bea475
Author: Shalom Toledo
Date: Thu Mar 1 11:37:05 2018 +0100
mlxsw: spectrum\_switchdev: Check success of FDB add operation
[ Upstream commit 0a8a1bf17e3af34f1f8d2368916a6327f8b3bfd5 ]
Until now, we assumed that in case of error when adding FDB entries, the
write operation will fail, but this is not the case. Instead, we need to
check that the number of entries reported in the response is equal to
the number of entries specified in the request.
Fixes: 56ade8fe3fe1 ("mlxsw: spectrum: Add initial support for Spectrum ASIC")
Reported-by: Ido Schimmel
Signed-off-by: Shalom Toledo
Reviewed-by: Ido Schimmel
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9f02a069bfdda6dcb5970cfe7ebab50859f58127
Author: Tommi Rantala
Date: Mon Feb 5 21:48:14 2018 +0200
sctp: fix dst refcnt leak in sctp\_v4\_get\_dst
[ Upstream commit 4a31a6b19f9ddf498c81f5c9b089742b7472a6f8 ]
Fix dst reference count leak in sctp\_v4\_get\_dst() introduced in commit
410f03831 ("sctp: add routing output fallback"):
When walking the address\_list, successive ip\_route\_output\_key() calls
may return the same rt->dst with the reference incremented on each call.
The code would not decrement the dst refcount when the dst pointer was
identical from the previous iteration, causing the dst refcnt leak.
Testcase:
ip netns add TEST
ip netns exec TEST ip link set lo up
ip link add dummy0 type dummy
ip link add dummy1 type dummy
ip link add dummy2 type dummy
ip link set dev dummy0 netns TEST
ip link set dev dummy1 netns TEST
ip link set dev dummy2 netns TEST
ip netns exec TEST ip addr add 192.168.1.1/24 dev dummy0
ip netns exec TEST ip link set dummy0 up
ip netns exec TEST ip addr add 192.168.1.2/24 dev dummy1
ip netns exec TEST ip link set dummy1 up
ip netns exec TEST ip addr add 192.168.1.3/24 dev dummy2
ip netns exec TEST ip link set dummy2 up
ip netns exec TEST sctp\_test -H 192.168.1.2 -P 20002 -h 192.168.1.1 -p 20000 -s -B 192.168.1.3
ip netns del TEST
In 4.4 and 4.9 kernels this results to:
[ 354.179591] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 364.419674] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 374.663664] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 384.903717] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 395.143724] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 405.383645] unregister\_netdevice: waiting for lo to become free. Usage count = 1
...
Fixes: 410f03831 ("sctp: add routing output fallback")
Fixes: 0ca50d12f ("sctp: fix src address selection if using secondary addresses")
Signed-off-by: Tommi Rantala
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bf014cc18a3c963f5cc32453b28bf23387c7b975
Author: Gal Pressman
Date: Wed Dec 20 08:48:24 2017 +0200
net/mlx5e: Fix TCP checksum in LRO buffers
[ Upstream commit 8babd44d2079079f9d5a4aca7005aed80236efe0 ]
When receiving an LRO packet, the checksum field is set by the hardware
to the checksum of the first coalesced packet. Obviously, this checksum
is not valid for the merged LRO packet and should be fixed. We can use
the CQE checksum which covers the checksum of the entire merged packet
TCP payload to help us calculate the checksum incrementally.
Tested by sending IPv4/6 traffic with LRO enabled, RX checksum disabled
and watching nstat checksum error counters (in addition to the obvious
bandwidth drop caused by checksum errors).
This bug is usually "hidden" since LRO packets would go through the
CHECKSUM\_UNNECESSARY flow which does not validate the packet checksum.
It's important to note that previous to this patch, LRO packets provided
with CHECKSUM\_UNNECESSARY are indeed packets with a correct validated
checksum (even though the checksum inside the TCP header is incorrect),
since the hardware LRO aggregation is terminated upon receiving a packet
with bad checksum.
Fixes: e586b3b0baee ("net/mlx5: Ethernet Datapath files")
Signed-off-by: Gal Pressman
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit fecb84a83f846900b5d553ddf998e889c47a890b
Author: Alexey Kodanev
Date: Thu Feb 15 20:18:43 2018 +0300
udplite: fix partial checksum initialization
[ Upstream commit 15f35d49c93f4fa9875235e7bf3e3783d2dd7a1b ]
Since UDP-Lite is always using checksum, the following path is
triggered when calculating pseudo header for it:
udp4\_csum\_init() or udp6\_csum\_init()
skb\_checksum\_init\_zero\_check()
\_\_skb\_checksum\_validate\_complete()
The problem can appear if skb->len is less than CHECKSUM\_BREAK. In
this particular case \_\_skb\_checksum\_validate\_complete() also invokes
\_\_skb\_checksum\_complete(skb). If UDP-Lite is using partial checksum
that covers only part of a packet, the function will return bad
checksum and the packet will be dropped.
It can be fixed if we skip skb\_checksum\_init\_zero\_check() and only
set the required pseudo header checksum for UDP-Lite with partial
checksum before udp4\_csum\_init()/udp6\_csum\_init() functions return.
Fixes: ed70fcfcee95 ("net: Call skb\_checksum\_init in IPv4")
Fixes: e4f45b7f40bd ("net: Call skb\_checksum\_init in IPv6")
Signed-off-by: Alexey Kodanev
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1fc74a57a8ae863c95afedef2510e7e42b194e56
Author: Alexey Kodanev
Date: Fri Feb 9 17:35:23 2018 +0300
sctp: verify size of a new chunk in \_sctp\_make\_chunk()
[ Upstream commit 07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c ]
When SCTP makes INIT or INIT\_ACK packet the total chunk length
can exceed SCTP\_MAX\_CHUNK\_LEN which leads to kernel panic when
transmitting these packets, e.g. the crash on sending INIT\_ACK:
[ 597.804948] skbuff: skb\_over\_panic: text:00000000ffae06e4 len:120168
put:120156 head:000000007aa47635 data:00000000d991c2de
tail:0x1d640 end:0xfec0 dev:
...
[ 597.976970] ------------[ cut here ]------------
[ 598.033408] kernel BUG at net/core/skbuff.c:104!
[ 600.314841] Call Trace:
[ 600.345829]
[ 600.371639] ? sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.436934] skb\_put+0x16c/0x200
[ 600.477295] sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.540630] ? sctp\_packet\_config+0x890/0x890 [sctp]
[ 600.601781] ? \_\_sctp\_packet\_append\_chunk+0x3b4/0xd00 [sctp]
[ 600.671356] ? sctp\_cmp\_addr\_exact+0x3f/0x90 [sctp]
[ 600.731482] sctp\_outq\_flush+0x663/0x30d0 [sctp]
[ 600.788565] ? sctp\_make\_init+0xbf0/0xbf0 [sctp]
[ 600.845555] ? sctp\_check\_transmitted+0x18f0/0x18f0 [sctp]
[ 600.912945] ? sctp\_outq\_tail+0x631/0x9d0 [sctp]
[ 600.969936] sctp\_cmd\_interpreter.isra.22+0x3be1/0x5cb0 [sctp]
[ 601.041593] ? sctp\_sf\_do\_5\_1B\_init+0x85f/0xc30 [sctp]
[ 601.104837] ? sctp\_generate\_t1\_cookie\_event+0x20/0x20 [sctp]
[ 601.175436] ? sctp\_eat\_data+0x1710/0x1710 [sctp]
[ 601.233575] sctp\_do\_sm+0x182/0x560 [sctp]
[ 601.284328] ? sctp\_has\_association+0x70/0x70 [sctp]
[ 601.345586] ? sctp\_rcv+0xef4/0x32f0 [sctp]
[ 601.397478] ? sctp6\_rcv+0xa/0x20 [sctp]
...
Here the chunk size for INIT\_ACK packet becomes too big, mostly
because of the state cookie (INIT packet has large size with
many address parameters), plus additional server parameters.
Later this chunk causes the panic in skb\_put\_data():
skb\_packet\_transmit()
sctp\_packet\_pack()
skb\_put\_data(nskb, chunk->skb->data, chunk->skb->len);
'nskb' (head skb) was previously allocated with packet->size
from u16 'chunk->chunk\_hdr->length'.
As suggested by Marcelo we should check the chunk's length in
\_sctp\_make\_chunk() before trying to allocate skb for it and
discard a chunk if its size bigger than SCTP\_MAX\_CHUNK\_LEN.
Signed-off-by: Alexey Kodanev
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5775f78764675d49dc6d8a8ad66ce3843810d4a2
Author: Guillaume Nault
Date: Fri Mar 2 18:41:16 2018 +0100
ppp: prevent unregistered channels from connecting to PPP units
[ Upstream commit 77f840e3e5f09c6d7d727e85e6e08276dd813d11 ]
PPP units don't hold any reference on the channels connected to it.
It is the channel's responsibility to ensure that it disconnects from
its unit before being destroyed.
In practice, this is ensured by ppp\_unregister\_channel() disconnecting
the channel from the unit before dropping a reference on the channel.
However, it is possible for an unregistered channel to connect to a PPP
unit: register a channel with ppp\_register\_net\_channel(), attach a
/dev/ppp file to it with ioctl(PPPIOCATTCHAN), unregister the channel
with ppp\_unregister\_channel() and finally connect the /dev/ppp file to
a PPP unit with ioctl(PPPIOCCONNECT).
Once in this situation, the channel is only held by the /dev/ppp file,
which can be released at anytime and free the channel without letting
the parent PPP unit know. Then the ppp structure ends up with dangling
pointers in its ->channels list.
Prevent this scenario by forbidding unregistered channels from
connecting to PPP units. This maintains the code logic by keeping
ppp\_unregister\_channel() responsible from disconnecting the channel if
necessary and avoids modification on the reference counting mechanism.
This issue seems to predate git history (successfully reproduced on
Linux 2.6.26 and earlier PPP commits are unrelated).
Signed-off-by: Guillaume Nault
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 795f3deff199e944bebbf04d577033363c335c44
Author: Roman Kapl
Date: Mon Feb 19 21:32:51 2018 +0100
net: sched: report if filter is too large to dump
[ Upstream commit 5ae437ad5a2ed573b1ebb04e0afa70b8869f88dd ]
So far, if the filter was too large to fit in the allocated skb, the
kernel did not return any error and stopped dumping. Modify the dumper
so that it returns -EMSGSIZE when a filter fails to dump and it is the
first filter in the skb. If we are not first, we will get a next chance
with more room.
I understand this is pretty near to being an API change, but the
original design (silent truncation) can be considered a bug.
Note: The error case can happen pretty easily if you create a filter
with 32 actions and have 4kb pages. Also recent versions of iproute try
to be clever with their buffer allocation size, which in turn leads to
Signed-off-by: Roman Kapl
Acked-by: Jiri Pirko
Acked-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 60b28d5ef3e3880a180bdbf69a3956fcb33d6e99
Author: Nicolas Dichtel
Date: Tue Feb 6 14:48:32 2018 +0100
netlink: ensure to loop over all netns in genlmsg\_multicast\_allns()
[ Upstream commit cb9f7a9a5c96a773bbc9c70660dc600cfff82f82 ]
Nowadays, nlmsg\_multicast() returns only 0 or -ESRCH but this was not the
case when commit 134e63756d5f was pushed.
However, there was no reason to stop the loop if a netns does not have
listeners.
Returns -ESRCH only if there was no listeners in all netns.
To avoid having the same problem in the future, I didn't take the
assumption that nlmsg\_multicast() returns only 0 or -ESRCH.
Fixes: 134e63756d5f ("genetlink: make netns aware")
CC: Johannes Berg
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3bcf69f8e7869e00babd3cc11f8c3acca9f79cc9
Author: Sabrina Dubroca
Date: Mon Feb 26 16:13:43 2018 +0100
net: ipv4: don't allow setting net.ipv4.route.min\_pmtu below 68
[ Upstream commit c7272c2f1229125f74f22dcdd59de9bbd804f1c8 ]
According to RFC 1191 sections 3 and 4, ICMP frag-needed messages
indicating an MTU below 68 should be rejected:
A host MUST never reduce its estimate of the Path MTU below 68
octets.
and (talking about ICMP frag-needed's Next-Hop MTU field):
This field will never contain a value less than 68, since every
router "must be able to forward a datagram of 68 octets without
fragmentation".
Furthermore, by letting net.ipv4.route.min\_pmtu be set to negative
values, we can end up with a very large PMTU when (-1) is cast into u32.
Let's also make ip\_rt\_min\_pmtu a u32, since it's only ever compared to
unsigned ints.
Reported-by: Jianlin Shi
Signed-off-by: Sabrina Dubroca
Reviewed-by: Stefano Brivio
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f80c28a585b57bfc0c33cfac2a10b0c93eede575
Author: Jakub Kicinski
Date: Mon Feb 12 21:35:31 2018 -0800
net: fix race on decreasing number of TX queues
[ Upstream commit ac5b70198adc25c73fba28de4f78adcee8f6be0b ]
netif\_set\_real\_num\_tx\_queues() can be called when netdev is up.
That usually happens when user requests change of number of
channels/rings with ethtool -L. The procedure for changing
the number of queues involves resetting the qdiscs and setting
dev->num\_tx\_queues to the new value. When the new value is
lower than the old one, extra care has to be taken to ensure
ordering of accesses to the number of queues vs qdisc reset.
Currently the queues are reset before new dev->num\_tx\_queues
is assigned, leaving a window of time where packets can be
enqueued onto the queues going down, leading to a likely
crash in the drivers, since most drivers don't check if TX
skbs are assigned to an active queue.
Fixes: e6484930d7c7 ("net: allocate tx queues in register\_netdevice")
Signed-off-by: Jakub Kicinski
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit da260080c2e3a80c4b3c70ec6846011137373f2d
Author: Grygorii Strashko
Date: Tue Feb 6 19:17:06 2018 -0600
net: ethernet: ti: cpsw: fix net watchdog timeout
[ Upstream commit 62f94c2101f35cd45775df00ba09bde77580e26a ]
It was discovered that simple program which indefinitely sends 200b UDP
packets and runs on TI AM574x SoC (SMP) under RT Kernel triggers network
watchdog timeout in TI CPSW driver (<6 hours run). The network watchdog
timeout is triggered due to race between cpsw\_ndo\_start\_xmit() and
cpsw\_tx\_handler() [NAPI]
cpsw\_ndo\_start\_xmit()
if (unlikely(!cpdma\_check\_free\_tx\_desc(txch))) {
txq = netdev\_get\_tx\_queue(ndev, q\_idx);
netif\_tx\_stop\_queue(txq);
^^ as per [1] barier has to be used after set\_bit() otherwise new value
might not be visible to other cpus
}
cpsw\_tx\_handler()
if (unlikely(netif\_tx\_queue\_stopped(txq)))
netif\_tx\_wake\_queue(txq);
and when it happens ndev TX queue became disabled forever while driver's HW
TX queue is empty.
Fix this, by adding smp\_mb\_\_after\_atomic() after netif\_tx\_stop\_queue()
calls and double check for free TX descriptors after stopping ndev TX queue
- if there are free TX descriptors wake up ndev TX queue.
[1] https://www.kernel.org/doc/html/latest/core-api/atomic\_ops.html
Signed-off-by: Grygorii Strashko
Reviewed-by: Ivan Khoronzhuk
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 94870df33c9bf52a9be3ed750670520aad43a44e
Author: Wolfram Sang
Date: Mon Feb 5 21:10:01 2018 +0100
net: amd-xgbe: fix comparison to bitshift when dealing with a mask
[ Upstream commit a3276892db7a588bedc33168e502572008f714a9 ]
Due to a typo, the mask was destroyed by a comparison instead of a bit
shift.
Signed-off-by: Wolfram Sang
Acked-by: Tom Lendacky
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c3d7d3a099f69277858499adc67cd318a54b030d
Author: Arnd Bergmann
Date: Thu Feb 22 16:55:34 2018 +0100
ipv6 sit: work around bogus gcc-8 -Wrestrict warning
[ Upstream commit ca79bec237f5809a7c3c59bd41cd0880aa889966 ]
gcc-8 has a new warning that detects overlapping input and output arguments
in memcpy(). It triggers for sit\_init\_net() calling ipip6\_tunnel\_clone\_6rd(),
which is actually correct:
net/ipv6/sit.c: In function 'sit\_init\_net':
net/ipv6/sit.c:192:3: error: 'memcpy' source argument is the same as destination [-Werror=restrict]
The problem here is that the logic detecting the memcpy() arguments finds them
to be the same, but the conditional that tests for the input and output of
ipip6\_tunnel\_clone\_6rd() to be identical is not a compile-time constant.
We know that netdev\_priv(t->dev) is the same as t for a tunnel device,
and comparing "dev" directly here lets the compiler figure out as well
that 'dev == sitn->fb\_tunnel\_dev' when called from sit\_init\_net(), so
it no longer warns.
This code is old, so Cc stable to make sure that we don't get the warning
for older kernels built with new gcc.
Cc: Martin Sebor
Link: https://gcc.gnu.org/bugzilla/show\_bug.cgi?id=83456
Signed-off-by: Arnd Bergmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 2cdc12a498fc701ef5468004b7d51dd0d81e81e8
Author: Denis Du
Date: Sat Feb 24 16:51:42 2018 -0500
hdlc\_ppp: carrier detect ok, don't turn off negotiation
[ Upstream commit b6c3bad1ba83af1062a7ff6986d9edc4f3d7fc8e ]
Sometimes when physical lines have a just good noise to make the protocol
handshaking fail, but the carrier detect still good. Then after remove of
the noise, nobody will trigger this protocol to be start again to cause
the link to never come back. The fix is when the carrier is still on, not
terminate the protocol handshaking.
Signed-off-by: Denis Du
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4a5048e7fdebe3dd48283ce0c46175f52961269f
Author: Stefano Brivio
Date: Thu Feb 15 09:46:03 2018 +0100
fib\_semantics: Don't match route with mismatching tclassid
[ Upstream commit a8c6db1dfd1b1d18359241372bb204054f2c3174 ]
In fib\_nh\_match(), if output interface or gateway are passed in
the FIB configuration, we don't have to check next hops of
multipath routes to conclude whether we have a match or not.
However, we might still have routes with different realms
matching the same output interface and gateway configuration,
and this needs to cause the match to fail. Otherwise the first
route inserted in the FIB will match, regardless of the realms:
# ip route add 1.1.1.1 dev eth0 table 1234 realms 1/2
# ip route append 1.1.1.1 dev eth0 table 1234 realms 3/4
# ip route list table 1234
1.1.1.1 dev eth0 scope link realms 1/2
1.1.1.1 dev eth0 scope link realms 3/4
# ip route del 1.1.1.1 dev ens3 table 1234 realms 3/4
# ip route list table 1234
1.1.1.1 dev ens3 scope link realms 3/4
whereas route with realms 3/4 should have been deleted instead.
Explicitly check for fc\_flow passed in the FIB configuration
(this comes from RTA\_FLOW extracted by rtm\_to\_fib\_config()) and
fail matching if it differs from nh\_tclassid.
The handling of RTA\_FLOW for multipath routes later in
fib\_nh\_match() is still needed, as we can have multiple RTA\_FLOW
attributes that need to be matched against the tclassid of each
next hop.
v2: Check that fc\_flow is set before discarding the match, so
that the user can still select the first matching rule by
not specifying any realm, as suggested by David Ahern.
Reported-by: Jianlin Shi
Signed-off-by: Stefano Brivio
Acked-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4c13e689e5f0f997d4cc8ee4646fcae88c16d737
Author: Xin Long
Date: Mon Feb 12 17:15:40 2018 +0800
bridge: check brport attr show in brport\_show
[ Upstream commit 1b12580af1d0677c3c3a19e35bfe5d59b03f737f ]
Now br\_sysfs\_if file flush doesn't have attr show. To read it will
cause kernel panic after users chmod u+r this file.
Xiong found this issue when running the commands:
ip link add br0 type bridge
ip link add type veth
ip link set veth0 master br0
chmod u+r /sys/devices/virtual/net/veth0/brport/flush
timeout 3 cat /sys/devices/virtual/net/veth0/brport/flush
kernel crashed with NULL a pointer dereference call trace.
This patch is to fix it by return -EINVAL when brport\_attr->show
is null, just the same as the check for brport\_attr->store in
brport\_store().
Fixes: 9cf637473c85 ("bridge: add sysfs hook to flush forwarding table")
Reported-by: Xiong Zhou
Signed-off-by: Xin Long
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 71978491bb6600d39ef68f421c23aeb11c10053f
Author: Thomas Gleixner
Date: Wed Feb 28 21:14:26 2018 +0100
x86/cpu\_entry\_area: Sync cpu\_entry\_area to initial\_page\_table
commit 945fd17ab6bab8a4d05da6c3170519fbcfe62ddb upstream.
The separation of the cpu\_entry\_area from the fixmap missed the fact that
on 32bit non-PAE kernels the cpu\_entry\_area mapping might not be covered in
initial\_page\_table by the previous synchronizations.
This results in suspend/resume failures because 32bit utilizes initial page
table for resume. The absence of the cpu\_entry\_area mapping results in a
triple fault, aka. insta reboot.
With PAE enabled this works by chance because the PGD entry which covers
the fixmap and other parts incindentally provides the cpu\_entry\_area
mapping as well.
Synchronize the initial page table after setting up the cpu entry
area. Instead of adding yet another copy of the same code, move it to a
function and invoke it from the various places.
It needs to be investigated if the existing calls in setup\_arch() and
setup\_per\_cpu\_areas() can be replaced by the later invocation from
setup\_cpu\_entry\_areas(), but that's beyond the scope of this fix.
Fixes: 92a0f81d8957 ("x86/cpu\_entry\_area: Move it out of the fixmap")
Reported-by: Woody Suwalski
Signed-off-by: Thomas Gleixner
Tested-by: Woody Suwalski
Cc: William Grant
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/alpine.DEB.2.21.1802282137290.1392@nanos.tec.linutronix.de
Signed-off-by: Greg Kroah-Hartman
commit f70befc397a69504c9219600ae4803007cb276cf
Author: Sebastian Panceac
Date: Wed Feb 28 11:40:49 2018 +0200
x86/platform/intel-mid: Handle Intel Edison reboot correctly
commit 028091f82eefd5e84f81cef81a7673016ecbe78b upstream.
When the Intel Edison module is powered with 3.3V, the reboot command makes
the module stuck. If the module is powered at a greater voltage, like 4.4V
(as the Edison Mini Breakout board does), reboot works OK.
The official Intel Edison BSP sends the IPCMSG\_COLD\_RESET message to the
SCU by default. The IPCMSG\_COLD\_BOOT which is used by the upstream kernel
is only sent when explicitely selected on the kernel command line.
Use IPCMSG\_COLD\_RESET unconditionally which makes reboot work independent
of the power supply voltage.
[ tglx: Massaged changelog ]
Fixes: bda7b072de99 ("x86/platform/intel-mid: Implement power off sequence")
Signed-off-by: Sebastian Panceac
Signed-off-by: Thomas Gleixner
Acked-by: Andy Shevchenko
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/1519810849-15131-1-git-send-email-sebastian@resin.io
Signed-off-by: Greg Kroah-Hartman
commit e521a723fd3fc843c9e886f1768563a043ce3248
Author: Juergen Gross
Date: Mon Feb 26 15:08:18 2018 +0100
x86/xen: Zero MSR\_IA32\_SPEC\_CTRL before suspend
commit 71c208dd54ab971036d83ff6d9837bae4976e623 upstream.
Older Xen versions (4.5 and before) might have problems migrating pv
guests with MSR\_IA32\_SPEC\_CTRL having a non-zero value. So before
suspending zero that MSR and restore it after being resumed.
Signed-off-by: Juergen Gross
Signed-off-by: Thomas Gleixner
Reviewed-by: Jan Beulich
Cc: stable@vger.kernel.org
Cc: xen-devel@lists.xenproject.org
Cc: boris.ostrovsky@oracle.com
Link: https://lkml.kernel.org/r/20180226140818.4849-1-jgross@suse.com
Signed-off-by: Greg Kroah-Hartman
commit 93e1f7fc77e68bf5f1997b08a0f6e54dc71e0da5
Author: Jan Kara
Date: Mon Feb 26 12:51:43 2018 +0100
direct-io: Fix sleep in atomic due to sync AIO
commit d9c10e5b8863cfb6886d1640386455075c6e979d upstream.
Commit e864f39569f4 "fs: add RWF\_DSYNC aand RWF\_SYNC" added additional
way for direct IO to become synchronous and thus trigger fsync from the
IO completion handler. Then commit 9830f4be159b "fs: Use RWF\_\* flags for
AIO operations" allowed these flags to be set for AIO as well. However
that commit forgot to update the condition checking whether the IO
completion handling should be defered to a workqueue and thus AIO DIO
with RWF\_[D]SYNC set will call fsync() from IRQ context resulting in
sleep in atomic.
Fix the problem by checking directly iocb flags (the same way as it is
done in dio\_complete()) instead of checking all conditions that could
lead to IO being synchronous.
CC: Christoph Hellwig
CC: Goldwyn Rodrigues
CC: stable@vger.kernel.org
Reported-by: Mark Rutland
Tested-by: Mark Rutland
Fixes: 9830f4be159b29399d107bffb99e0132bc5aedd4
Signed-off-by: Jan Kara
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 0ba6c33b3287e469622c0ccb2658052661bac579
Author: Dan Williams
Date: Wed Feb 21 17:08:01 2018 -0800
dax: fix vma\_is\_fsdax() helper
commit 230f5a8969d8345fc9bbe3683f068246cf1be4b8 upstream.
Gerd reports that ->i\_mode may contain other bits besides S\_IFCHR. Use
S\_ISCHR() instead. Otherwise, get\_user\_pages\_longterm() may fail on
device-dax instances when those are meant to be explicitly allowed.
Fixes: 2bb6d2837083 ("mm: introduce get\_user\_pages\_longterm")
Cc:
Reported-by: Gerd Rausch
Acked-by: Jane Chu
Reported-by: Haozhong Zhang
Reviewed-by: Jan Kara
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 3379a37a740932ac7661633a5db21c6ccd59f9b4
Author: Viresh Kumar
Date: Fri Feb 23 09:38:28 2018 +0530
cpufreq: s3c24xx: Fix broken s3c\_cpufreq\_init()
commit 0373ca74831b0f93cd4cdbf7ad3aec3c33a479a5 upstream.
commit a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
accidentally broke cpufreq on s3c2410 and s3c2412.
These two platforms don't have a CPU frequency table and used to skip
calling cpufreq\_table\_validate\_and\_show() for them. But with the
above commit, we started calling it unconditionally and that will
eventually fail as the frequency table pointer is NULL.
Fix this by calling cpufreq\_table\_validate\_and\_show() conditionally
again.
Fixes: a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
Cc: 3.13+  # v3.13+
Signed-off-by: Viresh Kumar
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit d5168ce354349fb8e336c75cedc447921b81e6d3
Author: Dan Williams
Date: Sun Feb 4 10:34:02 2018 -0800
vfio: disable filesystem-dax page pinning
commit 94db151dc89262bfa82922c44e8320cea2334667 upstream.
Filesystem-DAX is incompatible with 'longterm' page pinning. Without
page cache indirection a DAX mapping maps filesystem blocks directly.
This means that the filesystem must not modify a file's block map while
any page in a mapping is pinned. In order to prevent the situation of
userspace holding of filesystem operations indefinitely, disallow
'longterm' Filesystem-DAX mappings.
RDMA has the same conflict and the plan there is to add a 'with lease'
mechanism to allow the kernel to notify userspace that the mapping is
being torn down for block-map maintenance. Perhaps something similar can
be put in place for vfio.
Note that xfs and ext4 still report:
"DAX enabled. Warning: EXPERIMENTAL, use at your own risk"
...at mount time, and resolving the dax-dma-vs-truncate problem is one
of the last hurdles to remove that designation.
Acked-by: Alex Williamson
Cc: Michal Hocko
Cc: kvm@vger.kernel.org
Cc:
Reported-by: Haozhong Zhang
Tested-by: Haozhong Zhang
Fixes: d475c6346a38 ("dax,ext2: replace XIP read and write with DAX I/O")
Reviewed-by: Christoph Hellwig
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 7f43f610c4bb8e4da69923d0ce0c60a82073bf2c
Author: Ming Lei
Date: Fri Feb 23 23:36:57 2018 +0800
block: kyber: fix domain token leak during requeue
commit ba989a01469d027861e55c8f1121edadef757797 upstream.
When requeuing request, the domain token should have been freed
before re-inserting the request to io scheduler. Otherwise, the
assigned domain token will be leaked, and IO hang can be caused.
Cc: Paolo Valente
Cc: Omar Sandoval
Cc: stable@vger.kernel.org
Reviewed-by: Bart Van Assche
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 17644a0bbb190b6286106e98392f3d60ee020a23
Author: Jiufei Xue
Date: Tue Feb 27 20:10:03 2018 +0800
block: fix the count of PGPGOUT for WRITE\_SAME
commit 7c5a0dcf557c6511a61e092ba887de28882fe857 upstream.
The vm counters is counted in sectors, so we should do the conversation
in submit\_bio.
Fixes: 74d46992e0d9 ("block: replace bi\_bdev with a gendisk pointer and partitions index")
Cc: stable@vger.kernel.org
Reviewed-by: Omar Sandoval
Reviewed-by: Christoph Hellwig
Signed-off-by: Jiufei Xue
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit eae6179f55396f7ee708c7da1f9d84688412b62e
Author: Anand Jain
Date: Thu Feb 22 21:58:42 2018 +0800
btrfs: use proper endianness accessors for super\_copy
commit 3c181c12c431fe33b669410d663beb9cceefcd1b upstream.
The fs\_info::super\_copy is a byte copy of the on-disk structure and all
members must use the accessor macros/functions to obtain the right
value. This was missing in update\_super\_roots and in sysfs readers.
Moving between opposite endianness hosts will report bogus numbers in
sysfs, and mount may fail as the root will not be restored correctly. If
the filesystem is always used on a same endian host, this will not be a
problem.
Fix this by using the btrfs\_set\_super...() functions to set
fs\_info::super\_copy values, and for the sysfs, use the cached
fs\_info::nodesize/sectorsize values.
CC: stable@vger.kernel.org
Fixes: df93589a17378 ("btrfs: export more from FS\_INFO to sysfs")
Signed-off-by: Anand Jain
Reviewed-by: Liu Bo
Reviewed-by: David Sterba
[ update changelog ]
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit dabf89052e8e1bea5f4cba2f4533e8718acdbdc9
Author: John David Anglin
Date: Tue Feb 27 08:16:07 2018 -0500
parisc: Fix ordering of cache and TLB flushes
commit 0adb24e03a124b79130c9499731936b11ce2677d upstream.
The change to flush\_kernel\_vmap\_range() wasn't sufficient to avoid the
SMP stalls.  The problem is some drivers call these routines with
interrupts disabled.  Interrupts need to be enabled for flush\_tlb\_all()
and flush\_cache\_all() to work.  This version adds checks to ensure
interrupts are not disabled before calling routines that need IPI
interrupts.  When interrupts are disabled, we now drop into slower code.
The attached change fixes the ordering of cache and TLB flushes in
several cases.  When we flush the cache using the existing PTE/TLB
entries, we need to flush the TLB after doing the cache flush.  We don't
need to do this when we flush the entire instruction and data caches as
these flushes don't use the existing TLB entries.  The same is true for
tmpalias region flushes.
The flush\_kernel\_vmap\_range() and invalidate\_kernel\_vmap\_range()
routines have been updated.
Secondly, we added a new purge\_kernel\_dcache\_range\_asm() routine to
pacache.S and use it in invalidate\_kernel\_vmap\_range().  Nominally,
purges are faster than flushes as the cache lines don't have to be
written back to memory.
Hopefully, this is sufficient to resolve the remaining problems due to
cache speculation.  So far, testing indicates that this is the case.  I
did work up a patch using tmpalias flushes, but there is a performance
hit because we need the physical address for each page, and we also need
to sequence access to the tmpalias flush code.  This increases the
probability of stalls.
Signed-off-by: John David Anglin
Cc: stable@vger.kernel.org # 4.9+
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 47e7fc96cddca4d78498dd0e8da98ca018b2633b
Author: Helge Deller
Date: Mon Feb 12 21:43:55 2018 +0100
parisc: Reduce irq overhead when run in qemu
commit 636a415bcc7f4fd020ece8fd5fc648c4cef19c34 upstream.
When run under QEMU, calling mfctl(16) creates some overhead because the
qemu timer has to be scaled and moved into the register. This patch
reduces the number of calls to mfctl(16) by moving the calls out of the
loops.
Additionally, increase the minimal time interval to 8000 cycles instead
of 500 to compensate possible QEMU delays when delivering interrupts.
Signed-off-by: Helge Deller
Cc: stable@vger.kernel.org # 4.14+
Signed-off-by: Greg Kroah-Hartman
commit 90c3f0d36000dcddc0bf2b1b889784a8795cc4d6
Author: Helge Deller
Date: Fri Jan 12 22:44:00 2018 +0100
parisc: Use cr16 interval timers unconditionally on qemu
commit 5ffa8518851f1401817c15d2a7eecc0373c26ff9 upstream.
When running on qemu we know that the (emulated) cr16 cpu-internal
clocks are syncronized. So let's use them unconditionally on qemu.
Signed-off-by: Helge Deller
Cc: stable@vger.kernel.org # 4.14+
Signed-off-by: Greg Kroah-Hartman
commit 6b218ed6bd07857422b13966678af6e6a3509d86
Author: Lingutla Chandrasekhar
Date: Thu Jan 18 17:20:22 2018 +0530
timers: Forward timer base before migrating timers
commit c52232a49e203a65a6e1a670cd5262f59e9364a0 upstream.
On CPU hotunplug the enqueued timers of the unplugged CPU are migrated to a
live CPU. This happens from the control thread which initiated the unplug.
If the CPU on which the control thread runs came out from a longer idle
period then the base clock of that CPU might be stale because the control
thread runs prior to any event which forwards the clock.
In such a case the timers from the unplugged CPU are queued on the live CPU
based on the stale clock which can cause large delays due to increased
granularity of the outer timer wheels which are far away from base:;clock.
But there is a worse problem than that. The following sequence of events
illustrates it:
- CPU0 timer1 is queued expires = 59969 and base->clk = 59131.
The timer is queued at wheel level 2, with resulting expiry time = 60032
(due to level granularity).
- CPU1 enters idle @60007, with next timer expiry @60020.
- CPU0 is hotplugged at @60009
- CPU1 exits idle and runs the control thread which migrates the
timers from CPU0
timer1 is now queued in level 0 for immediate handling in the next
softirq because the requested expiry time 59969 is before CPU1 base->clk
60007
- CPU1 runs code which forwards the base clock which succeeds because the
next expiring timer. which was collected at idle entry time is still set
to 60020.
So it forwards beyond 60007 and therefore misses to expire the migrated
timer1. That timer gets expired when the wheel wraps around again, which
takes between 63 and 630ms depending on the HZ setting.
Address both problems by invoking forward\_timer\_base() for the control CPUs
timer base. All other places, which might run into a similar problem
(mod\_timer()/add\_timer\_on()) already invoke forward\_timer\_base() to avoid
that.
[ tglx: Massaged comment and changelog ]
Fixes: a683f390b93f ("timers: Forward the wheel clock whenever possible")
Co-developed-by: Neeraj Upadhyay
Signed-off-by: Neeraj Upadhyay
Signed-off-by: Lingutla Chandrasekhar
Signed-off-by: Thomas Gleixner
Cc: Anna-Maria Gleixner
Cc: linux-arm-msm@vger.kernel.org
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/20180118115022.6368-1-clingutla@codeaurora.org
Signed-off-by: Greg Kroah-Hartman
commit ec274a65154a6cd86d7e67ecc5f0f34cd446b3ed
Author: Shawn Lin
Date: Sat Feb 24 14:17:23 2018 +0800
mmc: dw\_mmc: Fix out-of-bounds access for slot's caps
commit 0d84b9e5631d923744767dc6608672df906dd092 upstream.
Add num\_caps field for dw\_mci\_drv\_data to validate the controller
id from DT alias and non-DT ways.
Reported-by: Geert Uytterhoeven
Signed-off-by: Shawn Lin
Fixes: 800d78bfccb3 ("mmc: dw\_mmc: add support for implementation specific callbacks")
Cc:
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit e03d46a156d96cc87c57dea3192bbc72b250b4a2
Author: Shawn Lin
Date: Sat Feb 24 14:17:22 2018 +0800
mmc: dw\_mmc: Factor out dw\_mci\_init\_slot\_caps
commit a4faa4929ed3be15e2d500d2405f992f6dedc8eb upstream.
Factor out dw\_mci\_init\_slot\_caps to consolidate parsing
all differents types of capabilities from host contrllers.
No functional change intended.
Signed-off-by: Shawn Lin
Fixes: 800d78bfccb3 ("mmc: dw\_mmc: add support for implementation specific callbacks")
Cc:
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 4d5123a0b37cab76958bdd7d6d2c26a40ca52e7f
Author: Shawn Lin
Date: Fri Feb 23 16:47:25 2018 +0800
mmc: dw\_mmc: Avoid accessing registers in runtime suspended state
commit 5b43df8b4c1a7f0c3fbf793c9566068e6b1e570c upstream.
cat /sys/kernel/debug/mmc0/regs will hang up the system since
it's in runtime suspended state, so the genpd and biu\_clk is
off. This patch fixes this problem by calling pm\_runtime\_get\_sync
to wake it up before reading the registers.
Fixes: e9ed8835e990 ("mmc: dw\_mmc: add runtime PM callback")
Cc:
Signed-off-by: Shawn Lin
Reviewed-by: Jaehoon Chung
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit cb65fc21f3877599e1c22710c5fdbefd0be010d4
Author: Geert Uytterhoeven
Date: Fri Feb 23 13:44:19 2018 +0100
mmc: dw\_mmc-k3: Fix out-of-bounds access through DT alias
commit 325501d9360eb42c7c51e6daa0d733844c1e790b upstream.
The hs\_timing\_cfg[] array is indexed using a value derived from the
"mshcN" alias in DT, which may lead to an out-of-bounds access.
Fix this by adding a range check.
Fixes: 361c7fe9b02eee7e ("mmc: dw\_mmc-k3: add sd support for hi3660")
Signed-off-by: Geert Uytterhoeven
Reviewed-by: Shawn Lin
Cc:
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 33b42aa617d16436ddbde6d192c6a6c2db566648
Author: Adrian Hunter
Date: Wed Feb 14 15:57:43 2018 +0200
mmc: sdhci-pci: Fix S0i3 for Intel BYT-based controllers
commit f8870ae6e2d6be75b1accc2db981169fdfbea7ab upstream.
Tuning can leave the IP in an active state (Buffer Read Enable bit set)
which prevents the entry to low power states (i.e. S0i3). Data reset will
clear it.
Generally tuning is followed by a data transfer which will anyway sort out
the state, so it is rare that S0i3 is actually prevented.
Signed-off-by: Adrian Hunter
Cc: stable@vger.kernel.org
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit e2c3f727021883cf0903196ae2fd55355b98546e
Author: Takashi Iwai
Date: Mon Feb 26 15:36:38 2018 +0100
ALSA: hda - Fix pincfg at resume on Lenovo T470 dock
commit 71db96ddfa72671bd43cacdcc99ca178d90ba267 upstream.
We've added a quirk to enable the recent Lenovo dock support, where it
overwrites the pin configs of NID 0x17 and 19, not only updating the
pin config cache. It works right after the boot, but the problem is
that the pin configs are occasionally cleared when the machine goes to
PM. Meanwhile the quirk writes the pin configs only at the pre-probe,
so this won't be applied any longer.
For addressing that issue, this patch moves the code to overwrite the
pin configs into HDA\_FIXUP\_ACT\_INIT section so that it's always
applied at both probe and resume time.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=195161
Fixes: 61fcf8ece9b6 ("ALSA: hda/realtek - Enable Thinkpad Dock device for ALC298 platform")
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 34516912bfd726c530946f4b3a808caea8befe06
Author: Hans de Goede
Date: Thu Feb 22 14:20:35 2018 +0100
ALSA: hda: Add a power\_save blacklist
commit 1ba8f9d308174e647b864c36209b4d7934d99888 upstream.
On some boards setting power\_save to a non 0 value leads to clicking /
popping sounds when ever we enter/leave powersaving mode. Ideally we would
figure out how to avoid these sounds, but that is not always feasible.
This commit adds a blacklist for devices where powersaving is known to
cause problems and disables it on these devices.
Note I tried to put this blacklist in userspace first:
https://github.com/systemd/systemd/pull/8128
But the systemd maintainers rightfully pointed out that it would be
impossible to then later remove entries once we actually find a way to
make power-saving work on listed boards without issues. Having this list
in the kernel will allow removal of the blacklist entry in the same commit
which fixes the clicks / plops.
The blacklist only applies to the default power\_save module-option value,
if a user explicitly sets the module-option then the blacklist is not
used.
[ added an ifdef CONFIG\_PM for the build error -- tiwai]
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1525104
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=198611
Cc: stable@vger.kernel.org
Signed-off-by: Hans de Goede
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit e5e9a08e151f3e945c243a8e773de2f5059c16fc
Author: Takashi Iwai
Date: Wed Feb 28 08:36:06 2018 +0100
ALSA: x86: Fix missing spinlock and mutex initializations
commit 350144069abf351c743d766b2fba9cb9b7cd32a1 upstream.
The commit change for supporting the multiple ports moved involved
some code shuffling, and there the initializations of spinlock and
mutex in snd\_intelhad object were dropped mistakenly.
This patch adds the missing initializations again for each port.
Fixes: b4eb0d522fcb ("ALSA: x86: Split snd\_intelhad into card and PCM specific structures")
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit a2102a155f3d70bccffef9a658ceb1aea583c2c4
Author: Richard Fitzgerald
Date: Tue Feb 27 17:01:18 2018 +0000
ALSA: control: Fix memory corruption risk in snd\_ctl\_elem\_read
commit 5a23699a39abc5328921a81b89383d088f6ba9cc upstream.
The patch "ALSA: control: code refactoring for ELEM\_READ/ELEM\_WRITE
operations" introduced a potential for kernel memory corruption due
to an incorrect if statement allowing non-readable controls to fall
through and call the get function. For TLV controls a driver can omit
SNDRV\_CTL\_ELEM\_ACCESS\_READ to ensure that only the TLV get function
can be called. Instead the normal get() can be invoked unexpectedly
and as the driver expects that this will only be called for controls
<= 512 bytes, potentially try to copy >512 bytes into the 512 byte
return array, so corrupting kernel memory.
The problem is an attempt to refactor the snd\_ctl\_elem\_read function
to invert the logic so that it conditionally aborted if the control
is unreadable instead of conditionally executing. But the if statement
wasn't inverted correctly.
The correct inversion of
if (a && !b)
is
if (!a || b)
Fixes: becf9e5d553c2 ("ALSA: control: code refactoring for ELEM\_READ/ELEM\_WRITE operations")
Signed-off-by: Richard Fitzgerald
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit ebc24a828a2f94f960be88dbaf4359b5e1a6e4f3
Author: Erik Veijola
Date: Fri Feb 23 14:06:52 2018 +0200
ALSA: usb-audio: Add a quirck for B&W PX headphones
commit 240a8af929c7c57dcde28682725b29cf8474e8e5 upstream.
The capture interface doesn't work and the playback interface only
supports 48 kHz sampling rate even though it advertises more rates.
Signed-off-by: Erik Veijola
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit e5966192439e9fbe241f3765e7aaa4e09765ebb1
Author: Alexander Steffen
Date: Mon Sep 11 12:26:52 2017 +0200
tpm\_tis\_spi: Use DMA-safe memory for SPI transfers
commit 6b3a13173f23e798e1ba213dd4a2c065a3b8d751 upstream.
The buffers used as tx\_buf/rx\_buf in a SPI transfer need to be DMA-safe.
This cannot be guaranteed for the buffers passed to tpm\_tis\_spi\_read\_bytes
and tpm\_tis\_spi\_write\_bytes. Therefore, we need to use our own DMA-safe
buffer and copy the data to/from it.
The buffer needs to be allocated separately, to ensure that it is
cacheline-aligned and not shared with other data, so that DMA can work
correctly.
Fixes: 0edbfea537d1 ("tpm/tpm\_tis\_spi: Add support for spi phy")
Cc: stable@vger.kernel.org
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Alexander Steffen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: Greg Kroah-Hartman
commit fbb6fba47c059ce56b8881e1adf322bced4390c4
Author: Arnd Bergmann
Date: Thu Sep 7 15:30:45 2017 +0200
tpm: constify transmit data pointers
commit c37fbc09bd4977736f6bc4050c6f099c587052a7 upstream.
Making cmd\_getticks 'const' introduced a couple of harmless warnings:
drivers/char/tpm/tpm\_tis\_core.c: In function 'probe\_itpm':
drivers/char/tpm/tpm\_tis\_core.c:469:31: error: passing argument 2 of 'tpm\_tis\_send\_data' discards 'const' qualifier from pointer target type [-Werror=discarded-qualifiers]
rc = tpm\_tis\_send\_data(chip, cmd\_getticks, len);
drivers/char/tpm/tpm\_tis\_core.c:477:31: error: passing argument 2 of 'tpm\_tis\_send\_data' discards 'const' qualifier from pointer target type [-Werror=discarded-qualifiers]
rc = tpm\_tis\_send\_data(chip, cmd\_getticks, len);
drivers/char/tpm/tpm\_tis\_core.c:255:12: note: expected 'u8 \* {aka unsigned char \*}' but argument is of type 'const u8 \* {aka const unsigned char \*}'
static int tpm\_tis\_send\_data(struct tpm\_chip \*chip, u8 \*buf, size\_t len)
This changes the related functions to all take 'const' pointers
so that gcc can see this as being correct. I had to slightly
modify the logic around tpm\_tis\_spi\_transfer() for this to work
without introducing ugly casts.
Cc: stable@vger.kernel.org
Fixes: 5e35bd8e06b9 ("tpm\_tis: make array cmd\_getticks static const to shink object code size")
Signed-off-by: Arnd Bergmann
Reviewed-by: Jarkko Sakkinen
Tested-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: Greg Kroah-Hartman
commit f8e331c508c22cf912e6b14f54ae68cf66f1c638
Author: Jeremy Boone
Date: Thu Feb 8 12:32:06 2018 -0800
tpm\_tis: fix potential buffer overruns caused by bit glitches on the bus
commit 6bb320ca4a4a7b5b3db8c8d7250cc40002046878 upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Tested-by: Jarkko Sakkinen
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 37dfbccd4b2275169d4e1af3c1726256d835675b
Author: Jeremy Boone
Date: Thu Feb 8 12:31:16 2018 -0800
tpm\_i2c\_nuvoton: fix potential buffer overruns caused by bit glitches on the bus
commit f9d4d9b5a5ef2f017bc344fb65a58a902517173b upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit e9951ab03f51a349160167794deb82d1f6e258af
Author: Jeremy Boone
Date: Thu Feb 8 12:30:01 2018 -0800
tpm\_i2c\_infineon: fix potential buffer overruns caused by bit glitches on the bus
commit 9b8cb28d7c62568a5916bdd7ea1c9176d7f8f2ed upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 648b62fda1a35c9198689cca76ace580a67e7872
Author: Jeremy Boone
Date: Thu Feb 8 12:28:08 2018 -0800
tpm: fix potential buffer overruns caused by bit glitches on the bus
commit 3be23274755ee85771270a23af7691dc9b3a95db upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. If a bit does
flip it could cause an overrun if it's in one of the size parameters,
so sanity check that we're not overrunning the provided buffer when
doing a memcpy().
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Tested-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 703fca31ac31ed81455a8642a6988cbca47f0f07
Author: Jeremy Boone
Date: Thu Feb 8 12:29:09 2018 -0800
tpm: st33zp24: fix potential buffer overruns caused by bit glitches on the bus
commit 6d24cd186d9fead3722108dec1b1c993354645ff upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 972b19e615a2a31720a293b3436148294469e88f
Author: Emil Tantilov
Date: Fri Feb 23 12:39:41 2018 -0800
ixgbe: fix crash in build\_skb Rx code path
commit 0c5661ecc5dd7ce296870a3eb7b62b1b280a5e89 upstream.
Add check for build\_skb enabled ring in ixgbe\_dma\_sync\_frag().
In that case &skb\_shinfo(skb)->frags[0] may not always be set which
can lead to a crash. Instead we derive the page offset from skb->data.
Fixes: 42073d91a214 ("ixgbe: Have the CPU take ownership of the buffers sooner")
CC: stable
Reported-by: Ambarish Soman
Suggested-by: Alexander Duyck
Signed-off-by: Emil Tantilov
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 971039cc4da1b1a800ec1f43edaa2c0aecf338a7
Author: Hans de Goede
Date: Tue Feb 20 09:06:18 2018 +0100
Bluetooth: btusb: Use DMI matching for QCA reset\_resume quirking
commit 1fdb926974695d3dbc05a429bafa266fdd16510e upstream.
Commit 61f5acea8737 ("Bluetooth: btusb: Restore QCA Rome suspend/resume fix
with a "rewritten" version") applied the USB\_QUIRK\_RESET\_RESUME to all QCA
USB Bluetooth modules. But it turns out that the resume problems are not
caused by the QCA Rome chipset, on most platforms it resumes fine. The
resume problems are actually a platform problem (likely the platform
cutting all power when suspended).
The USB\_QUIRK\_RESET\_RESUME quirk also disables runtime suspend, so by
matching on usb-ids, we're causing all boards with these chips to use extra
power, to fix resume problems which only happen on some boards.
This commit fixes this by applying the quirk based on DMI matching instead
of on usb-ids, so that we match the platform and not the chipset.
Here is the /sys/kernel/debug/usb/devices for the Bluetooth module:
T: Bus=01 Lev=01 Prnt=01 Port=07 Cnt=04 Dev#= 5 Spd=12 MxCh= 0
D: Ver= 2.01 Cls=e0(wlcon) Sub=01 Prot=01 MxPS=64 #Cfgs= 1
P: Vendor=0cf3 ProdID=e300 Rev= 0.01
C:\* #Ifs= 2 Cfg#= 1 Atr=e0 MxPwr=100mA
I:\* If#= 0 Alt= 0 #EPs= 3 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=81(I) Atr=03(Int.) MxPS= 16 Ivl=1ms
E: Ad=82(I) Atr=02(Bulk) MxPS= 64 Ivl=0ms
E: Ad=02(O) Atr=02(Bulk) MxPS= 64 Ivl=0ms
I:\* If#= 1 Alt= 0 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 0 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 0 Ivl=1ms
I: If#= 1 Alt= 1 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 9 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 9 Ivl=1ms
I: If#= 1 Alt= 2 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 17 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 17 Ivl=1ms
I: If#= 1 Alt= 3 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 25 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 25 Ivl=1ms
I: If#= 1 Alt= 4 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 33 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 33 Ivl=1ms
I: If#= 1 Alt= 5 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 49 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 49 Ivl=1ms
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1514836
Fixes: 61f5acea8737 ("Bluetooth: btusb: Restore QCA Rome suspend/resume..")
Cc: stable@vger.kernel.org
Cc: Brian Norris
Cc: Kai-Heng Feng
Reported-and-tested-by: Kevin Fenzi
Signed-off-by: Hans de Goede
Signed-off-by: Marcel Holtmann
Signed-off-by: Greg Kroah-Hartman


=== Content from www.redhat.com_4d46e1c0_20250126_104625.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_807592ab_20250126_104706.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_f7e8afa2_20250126_104655.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1590720)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1590720)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1590720)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1590720

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1590720**](show_bug.cgi?id=1590720)
(CVE-2018-10902)
- [CVE-2018-10902](https://access.redhat.com/security/cve/CVE-2018-10902) kernel: MIDI driver race condition leads to a double-free

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2018-10902 kernel: MIDI driver race condition leads to a double-free

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2018-10902 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1593082](show_bug.cgi?id=1593082) [1593083](show_bug.cgi?id=1593083) [1593084](show_bug.cgi?id=1593084) [1593085](show_bug.cgi?id=1593085) [1593086](show_bug.cgi?id=1593086) [1593087](show_bug.cgi?id=1593087) [1593088](show_bug.cgi?id=1593088) [1593089](show_bug.cgi?id=1593089) [1593090](show_bug.cgi?id=1593090) [1620291](show_bug.cgi?id=1620291 "CLOSED ERRATA - CVE-2018-10902 kernel: MIDI driver race condition leads to a double-free [fedora-all]") [1620292](show_bug.cgi?id=1620292) [1740219](show_bug.cgi?id=1740219) [1740220](show_bug.cgi?id=1740220) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1590715](show_bug.cgi?id=1590715) | | TreeView+ | [depends on](buglist.cgi?bug_id=1590720&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1590720&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2018-06-13 09:24 UTC by Andrej Nemec | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-12-10 16:21 UTC ([History](show_activity.cgi?id=1590720)) | | [CC List:](page.cgi?id=fields.html#cclist) | 49 users (show)  adakopou airlied aquini bhu blc bskeggs dhoward dvlasenk ewk fhrbata hdegoede hkrzesin hwkernel-mgr iboverma ichavero itamar jarodwilson jforbes jglisse jkacur john.j5live jonathan josef jross jstancek jwboyer kernel-maint kernel-mgr labbott lgoncalv linville matt mchehab mcressma mjg59 mlangsdo mthacker nmurray plougher pmatouse rt-maint rvrbovsk security-response-team skozina slawomir steved williams wmealing yozone | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: | It was found that the raw midi kernel driver does not protect against concurrent access which leads to a double realloc (double free) in snd\_rawmidi\_input\_params() and snd\_rawmidi\_output\_status() which are part of snd\_rawmidi\_ioctl() handler in rawmidi.c file. A malicious local attacker could possibly use this for privilege escalation. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-06-10 10:28:49 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2018:3083](https://access.redhat.com/errata/RHSA-2018%3A3083) | 0 | None | None | None | 2018-10-30 07:34:31 UTC | | Red Hat Product Errata | [RHSA-2018:3096](https://access.redhat.com/errata/RHSA-2018%3A3096) | 0 | None | None | None | 2018-10-30 07:40:34 UTC | | Red Hat Product Errata | [RHSA-2019:0415](https://access.redhat.com/errata/RHSA-2019%3A0415) | 0 | None | None | None | 2019-02-26 12:04:00 UTC | | Red Hat Product Errata | [RHSA-2019:0641](https://access.redhat.com/errata/RHSA-2019%3A0641) | 0 | None | None | None | 2019-03-26 07:45:15 UTC | | Red Hat Product Errata | [RHSA-2019:3217](https://access.redhat.com/errata/RHSA-2019%3A3217) | 0 | None | None | None | 2019-10-29 12:55:40 UTC | | Red Hat Product Errata | [RHSA-2019:3967](https://access.redhat.com/errata/RHSA-2019%3A3967) | 0 | None | None | None | 2019-11-26 11:52:24 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1590720#c0)  Andrej Nemec    2018-06-13 09:24:54 UTC  ``` It was found that the raw midi kernel driver does not protect against concurrent access which leads to a double-realloc (double free) in snd_rawmidi_input_params() and snd_rawmidi_output_status() which are part of snd_rawmidi_ioctl() handler in rawmidi.c file. A malicious local attacker could possibly use this for privilege escalation.  Upstream: <https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=39675f7a7c7e7702f7d5341f1e0d01db746543a0>   ```  [Comment 7](show_bug.cgi?id=1590720#c7)  Vladis Dronov    2018-08-22 21:53:54 UTC  ``` Created kernel tracking bugs for this issue:  Affects: fedora-all [[bug 1620291](show_bug.cgi?id=1620291 "CLOSED ERRATA - CVE-2018-10902 kernel: MIDI driver race condition leads to a double-free [fedora-all]")]   ```  [Comment 9](show_bug.cgi?id=1590720#c9)  Justin M. Forbes    2018-08-23 11:55:57 UTC  ``` This was fixed for Fedora users with the 4.17.10 stable kernel update   ```  [Comment 10](show_bug.cgi?id=1590720#c10)  Wade Mealing    2018-09-11 04:07:52 UTC  ``` Statement:  This flaw affects all current shipping releases of Red Hat Enterprise Linux. This flaw requires real or emulated midi hardware available in the system. Fixes will be delivered when available.   ```  [Comment 11](show_bug.cgi?id=1590720#c11)  Petr Matousek    2018-10-17 12:40:52 UTC  ``` Acknowledgments:  Name: Trend Micro Zero Day Initiative   ```  [Comment 12](show_bug.cgi?id=1590720#c12)  errata-xmlrpc    2018-10-30 07:34:04 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:3083 [https://access.redhat.com/errata/RHSA-2018:3083](https://access.redhat.com/errata/RHSA-2018%3A3083)   ```  [Comment 13](show_bug.cgi?id=1590720#c13)  errata-xmlrpc    2018-10-30 07:40:16 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:3096 [https://access.redhat.com/errata/RHSA-2018:3096](https://access.redhat.com/errata/RHSA-2018%3A3096)   ```  [Comment 17](show_bug.cgi?id=1590720#c17)  errata-xmlrpc    2019-02-26 12:03:59 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 6  Via RHSA-2019:0415 [https://access.redhat.com/errata/RHSA-2019:0415](https://access.redhat.com/errata/RHSA-2019%3A0415)   ```  [Comment 18](show_bug.cgi?id=1590720#c18)  errata-xmlrpc    2019-03-26 07:45:13 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise MRG 2  Via RHSA-2019:0641 [https://access.redhat.com/errata/RHSA-2019:0641](https://access.redhat.com/errata/RHSA-2019%3A0641)   ```  [Comment 20](show_bug.cgi?id=1590720#c20)  errata-xmlrpc    2019-10-29 12:55:38 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2019:3217 [https://access.redhat.com/errata/RHSA-2019:3217](https://access.redhat.com/errata/RHSA-2019%3A3217)   ```  [Comment 21](show_bug.cgi?id=1590720#c21)  errata-xmlrpc    2019-11-26 11:52:20 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7.5 Extended Update Support  Via RHSA-2019:3967 [https://access.redhat.com/errata/RHSA-2019:3967](https://access.redhat.com/errata/RHSA-2019%3A3967)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1590720&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.redhat.com_f0187e49_20250126_104631.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_28ec06d5_20250125_175531.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2018:2948 - Security Advisory

Issued:
2018-10-30
Updated:
2018-10-30
# RHSA-2018:2948 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: kernel-alt security, bug fix, and enhancement update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2018%3A2948)

## Topic

An update for kernel-alt is now available for Red Hat Enterprise Linux 7.

Red Hat Product Security has rated this update as having a security impact of Important. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

The kernel-alt packages provide the Linux kernel version 4.x.

Security Fix(es):

* An industry-wide issue was found in the way many modern microprocessor designs have implemented speculative execution of Load & Store instructions (a commonly used performance optimization). It relies on the presence of a precisely-defined instruction sequence in the privileged code as well as the fact that memory read from address to which a recent memory write has occurred may see an older value and subsequently cause an update into the microprocessor's data cache even for speculatively executed instructions that never actually commit (retire). As a result, an unprivileged attacker could use this flaw to read privileged memory by conducting targeted cache side-channel attacks. (CVE-2018-3639, aarch64)
* A flaw named SegmentSmack was found in the way the Linux kernel handled specially crafted TCP packets. A remote attacker could use this flaw to trigger time and calculation expensive calls to tcp\_collapse\_ofo\_queue() and tcp\_prune\_ofo\_queue() functions by sending specially modified packets within ongoing TCP sessions which could lead to a CPU saturation and hence a denial of service on the system. Maintaining the denial of service condition requires continuous two-way TCP sessions to a reachable open port, thus the attacks cannot be performed using spoofed IP addresses. (CVE-2018-5390)
* A flaw named FragmentSmack was found in the way the Linux kernel handled reassembly of fragmented IPv4 and IPv6 packets. A remote attacker could use this flaw to trigger time and calculation expensive fragment reassembly algorithm by sending specially crafted packets which could lead to a CPU saturation and hence a denial of service on the system. (CVE-2018-5391)

Space precludes documenting all of the security fixes in this advisory. See the descriptions of the remaining security fixes in the related Knowledge Article:

<https://access.redhat.com/articles/3658021>

For more details about the security issue(s), including the impact, a CVSS score, and other related information, refer to the CVE page(s) listed in the References section.

Red Hat would like to thank Ken Johnson (Microsoft Security Response Center) and Jann Horn (Google Project Zero) for reporting CVE-2018-3639; Juha-Matti Tilli (Aalto University - Department of Communications and Networking and Nokia Bell Labs) for reporting CVE-2018-5390 and CVE-2018-5391; Qualys Research Labs for reporting CVE-2018-1120; David Rientjes (Google) for reporting CVE-2018-1000200; and Wen Xu for reporting CVE-2018-1092, CVE-2018-1094, and CVE-2018-1095. The CVE-2018-14619 issue was discovered by Florian Weimer (Red Hat) and Ondrej Mosnacek (Red Hat).

Additional Changes:

For detailed information on changes in this release, see the Red Hat Enterprise Linux 7.6 Release Notes linked from the References section.

## Solution

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

The system must be rebooted for this update to take effect.

## Affected Products

* Red Hat Enterprise Linux for ARM 64 7 aarch64
* Red Hat Enterprise Linux for Power 9 7 ppc64le
* Red Hat Enterprise Linux for IBM System z (Structure A) 7 s390x

## Fixes

* [BZ - 1516257](https://bugzilla.redhat.com/show_bug.cgi?id=1516257)
  - CVE-2017-16648 kernel: Use-after-free in drivers/media/dvb-core/dvb\_frontend.c
* [BZ - 1528312](https://bugzilla.redhat.com/show_bug.cgi?id=1528312)
  - CVE-2017-17805 kernel: Salsa20 encryption algorithm does not correctly handle zero-length inputs allowing local attackers to cause denial-of-service
* [BZ - 1528323](https://bugzilla.redhat.com/show_bug.cgi?id=1528323)
  - CVE-2017-17806 kernel: HMAC implementation does not validate that the underlying cryptographic hash algorithm is unkeyed allowing local attackers to cause denial-of-service
* [BZ - 1533909](https://bugzilla.redhat.com/show_bug.cgi?id=1533909)
  - CVE-2018-5344 kernel: drivers/block/loop.c mishandles lo\_release serialization allowing denial-of-service
* [BZ - 1539508](https://bugzilla.redhat.com/show_bug.cgi?id=1539508)
  - CVE-2017-18075 kernel: Mishandled freeing of instances in pcrypt.c can allow a local user to cause a denial of service
* [BZ - 1539706](https://bugzilla.redhat.com/show_bug.cgi?id=1539706)
  - CVE-2018-5750 kernel: Kernel address information leak in drivers/acpi/sbshc.c:acpi\_smbus\_hc\_add() function potentially allowing KASLR bypass
* [BZ - 1541846](https://bugzilla.redhat.com/show_bug.cgi?id=1541846)
  - CVE-2018-1000026 kernel: Improper validation in bnx2x network card driver can allow for denial of service attacks via crafted packet
* [BZ - 1547824](https://bugzilla.redhat.com/show_bug.cgi?id=1547824)
  - CVE-2018-1065 kernel: netfilter: xtables NULL pointer dereference in ip6\_tables.c:ip6t\_do\_table() leading to a crash
* [BZ - 1548412](https://bugzilla.redhat.com/show_bug.cgi?id=1548412)
  - CVE-2017-13166 kernel: v4l2: disabled memory access protection mechanism allowing privilege escalation
* [BZ - 1550142](https://bugzilla.redhat.com/show_bug.cgi?id=1550142)
  - CVE-2018-7566 kernel: race condition in snd\_seq\_write() may lead to UAF or OOB-access
* [BZ - 1551051](https://bugzilla.redhat.com/show_bug.cgi?id=1551051)
  - CVE-2018-5803 kernel: Missing length check of payload in net/sctp/sm\_make\_chunk.c:\_sctp\_make\_chunk() function allows denial of service
* [BZ - 1551565](https://bugzilla.redhat.com/show_bug.cgi?id=1551565)
  - CVE-2017-18208 kernel: Inifinite loop vulnerability in mm/madvise.c:madvise\_willneed() function allows local denial of service
* [BZ - 1552048](https://bugzilla.redhat.com/show_bug.cgi?id=1552048)
  - CVE-2018-1068 kernel: Out-of-bounds write via userland offsets in ebt\_entry struct in netfilter/ebtables.c
* [BZ - 1553361](https://bugzilla.redhat.com/show_bug.cgi?id=1553361)
  - CVE-2018-7757 kernel: Memory leak in the sas\_smp\_get\_phy\_events function in drivers/scsi/libsas/sas\_expander.c
* [BZ - 1560777](https://bugzilla.redhat.com/show_bug.cgi?id=1560777)
  - CVE-2018-1092 kernel: NULL pointer dereference in ext4/mballoc.c:ext4\_process\_freed\_data() when mounting crafted ext4 image
* [BZ - 1560788](https://bugzilla.redhat.com/show_bug.cgi?id=1560788)
  - CVE-2018-1094 kernel: NULL pointer dereference in ext4/xattr.c:ext4\_xattr\_inode\_hash() causes crash with crafted ext4 image
* [BZ - 1560793](https://bugzilla.redhat.com/show_bug.cgi?id=1560793)
  - CVE-2018-1095 kernel: out-of-bound access in fs/posix\_acl.c:get\_acl() causes crash with crafted ext4 image
* [BZ - 1566890](https://bugzilla.redhat.com/show_bug.cgi?id=1566890)
  - CVE-2018-3639 hw: cpu: speculative store bypass
* [BZ - 1568744](https://bugzilla.redhat.com/show_bug.cgi?id=1568744)
  - CVE-2018-1000200 kernel: NULL pointer dereference on OOM kill of large mlocked process
* [BZ - 1571062](https://bugzilla.redhat.com/show_bug.cgi?id=1571062)
  - CVE-2018-8781 kernel: Integer overflow in drivers/gpu/drm/udl/udl\_fb.c:udl\_fb\_mmap() can allow attackers to execute code in kernel space
* [BZ - 1571623](https://bugzilla.redhat.com/show_bug.cgi?id=1571623)
  - CVE-2018-10322 kernel: Invalid pointer dereference in xfs\_ilock\_attr\_map\_shared() when mounting crafted xfs image allowing denial of service
* [BZ - 1573699](https://bugzilla.redhat.com/show_bug.cgi?id=1573699)
  - CVE-2018-1118 kernel: vhost: Information disclosure in vhost/vhost.c:vhost\_new\_msg()
* [BZ - 1575472](https://bugzilla.redhat.com/show_bug.cgi?id=1575472)
  - CVE-2018-1120 kernel: fuse-backed file mmap-ed onto process cmdline arguments causes denial of service
* [BZ - 1577408](https://bugzilla.redhat.com/show_bug.cgi?id=1577408)
  - CVE-2018-10940 kernel: incorrect memory bounds check in drivers/cdrom/cdrom.c
* [BZ - 1583210](https://bugzilla.redhat.com/show_bug.cgi?id=1583210)
  - CVE-2018-11506 kernel: Stack-based buffer overflow in drivers/scsi/sr\_ioctl.c allows denial of service or other unspecified impact
* [BZ - 1589324](https://bugzilla.redhat.com/show_bug.cgi?id=1589324)
  - CVE-2018-1000204 kernel: Infoleak caused by incorrect handling of the SG\_IO ioctl
* [BZ - 1590215](https://bugzilla.redhat.com/show_bug.cgi?id=1590215)
  - CVE-2018-12232 kernel: NULL pointer dereference if close and fchownat system calls share a socket file descriptor
* [BZ - 1590799](https://bugzilla.redhat.com/show_bug.cgi?id=1590799)
  - CVE-2018-5848 kernel: buffer overflow in drivers/net/wireless/ath/wil6210/wmi.c:wmi\_set\_ie() may lead to memory corruption
* [BZ - 1596795](https://bugzilla.redhat.com/show_bug.cgi?id=1596795)
  - CVE-2018-10877 kernel: out-of-bound access in ext4\_ext\_drop\_refs function with a crafted ext4 image
* [BZ - 1596802](https://bugzilla.redhat.com/show_bug.cgi?id=1596802)
  - CVE-2018-10878 kernel: out-of-bound write in ext4\_init\_block\_bitmap function with a crafted ext4 image
* [BZ - 1596806](https://bugzilla.redhat.com/show_bug.cgi?id=1596806)
  - CVE-2018-10879 kernel: use-after-free detected in ext4\_xattr\_set\_entry with a crafted file
* [BZ - 1596812](https://bugzilla.redhat.com/show_bug.cgi?id=1596812)
  - CVE-2018-10880 kernel: stack-out-of-bounds write in ext4\_update\_inline\_data function
* [BZ - 1596828](https://bugzilla.redhat.com/show_bug.cgi?id=1596828)
  - CVE-2018-10881 kernel: out-of-bound access in ext4\_get\_group\_info() when mounting and operating a crafted ext4 image
* [BZ - 1596842](https://bugzilla.redhat.com/show_bug.cgi?id=1596842)
  - CVE-2018-10882 kernel: stack-out-of-bounds write infs/jbd2/transaction.c
* [BZ - 1596846](https://bugzilla.redhat.com/show_bug.cgi?id=1596846)
  - CVE-2018-10883 kernel: stack-out-of-bounds write in jbd2\_journal\_dirty\_metadata function
* [BZ - 1599161](https://bugzilla.redhat.com/show_bug.cgi?id=1599161)
  - CVE-2018-13405 kernel: Missing check in fs/inode.c:inode\_init\_owner() does not clear SGID bit on non-directories for non-members
* [BZ - 1601704](https://bugzilla.redhat.com/show_bug.cgi?id=1601704)
  - CVE-2018-5390 kernel: TCP segments with random offsets allow a remote denial of service (SegmentSmack)
* [BZ - 1609664](https://bugzilla.redhat.com/show_bug.cgi?id=1609664)
  - CVE-2018-5391 kernel: IP fragments with random offsets allow a remote denial of service (FragmentSmack)
* [BZ - 1610958](https://bugzilla.redhat.com/show_bug.cgi?id=1610958)
  - CVE-2017-18344 kernel: out-of-bounds access in the show\_timer function in kernel/time/posix-timers.c
* [BZ - 1622004](https://bugzilla.redhat.com/show_bug.cgi?id=1622004)
  - CVE-2018-14619 kernel: crash (possible privesc) in kernel crypto api.
* [BZ - 1623067](https://bugzilla.redhat.com/show_bug.cgi?id=1623067)
  - CVE-2018-9363 kernel: Buffer overflow in hidp\_process\_report
* [BZ - 1629636](https://bugzilla.redhat.com/show_bug.cgi?id=1629636)
  - CVE-2018-14641 kernel: a bug in ip\_frag\_reasm() can cause a crash in ip\_do\_fragment()

## CVEs

* [CVE-2017-13166](https://www.redhat.com/security/data/cve/CVE-2017-13166.html)
* [CVE-2017-16648](https://www.redhat.com/security/data/cve/CVE-2017-16648.html)
* [CVE-2017-17805](https://www.redhat.com/security/data/cve/CVE-2017-17805.html)
* [CVE-2017-17806](https://www.redhat.com/security/data/cve/CVE-2017-17806.html)
* [CVE-2017-18075](https://www.redhat.com/security/data/cve/CVE-2017-18075.html)
* [CVE-2017-18208](https://www.redhat.com/security/data/cve/CVE-2017-18208.html)
* [CVE-2017-18344](https://www.redhat.com/security/data/cve/CVE-2017-18344.html)
* [CVE-2018-1065](https://www.redhat.com/security/data/cve/CVE-2018-1065.html)
* [CVE-2018-1068](https://www.redhat.com/security/data/cve/CVE-2018-1068.html)
* [CVE-2018-1092](https://www.redhat.com/security/data/cve/CVE-2018-1092.html)
* [CVE-2018-1094](https://www.redhat.com/security/data/cve/CVE-2018-1094.html)
* [CVE-2018-1095](https://www.redhat.com/security/data/cve/CVE-2018-1095.html)
* [CVE-2018-1118](https://www.redhat.com/security/data/cve/CVE-2018-1118.html)
* [CVE-2018-1120](https://www.redhat.com/security/data/cve/CVE-2018-1120.html)
* [CVE-2018-3639](https://www.redhat.com/security/data/cve/CVE-2018-3639.html)
* [CVE-2018-5344](https://www.redhat.com/security/data/cve/CVE-2018-5344.html)
* [CVE-2018-5390](https://www.redhat.com/security/data/cve/CVE-2018-5390.html)
* [CVE-2018-5391](https://www.redhat.com/security/data/cve/CVE-2018-5391.html)
* [CVE-2018-5750](https://www.redhat.com/security/data/cve/CVE-2018-5750.html)
* [CVE-2018-5803](https://www.redhat.com/security/data/cve/CVE-2018-5803.html)
* [CVE-2018-5848](https://www.redhat.com/security/data/cve/CVE-2018-5848.html)
* [CVE-2018-7566](https://www.redhat.com/security/data/cve/CVE-2018-7566.html)
* [CVE-2018-7757](https://www.redhat.com/security/data/cve/CVE-2018-7757.html)
* [CVE-2018-8781](https://www.redhat.com/security/data/cve/CVE-2018-8781.html)
* [CVE-2018-9363](https://www.redhat.com/security/data/cve/CVE-2018-9363.html)
* [CVE-2018-10322](https://www.redhat.com/security/data/cve/CVE-2018-10322.html)
* [CVE-2018-10877](https://www.redhat.com/security/data/cve/CVE-2018-10877.html)
* [CVE-2018-10878](https://www.redhat.com/security/data/cve/CVE-2018-10878.html)
* [CVE-2018-10879](https://www.redhat.com/security/data/cve/CVE-2018-10879.html)
* [CVE-2018-10880](https://www.redhat.com/security/data/cve/CVE-2018-10880.html)
* [CVE-2018-10881](https://www.redhat.com/security/data/cve/CVE-2018-10881.html)
* [CVE-2018-10882](https://www.redhat.com/security/data/cve/CVE-2018-10882.html)
* [CVE-2018-10883](https://www.redhat.com/security/data/cve/CVE-2018-10883.html)
* [CVE-2018-10940](https://www.redhat.com/security/data/cve/CVE-2018-10940.html)
* [CVE-2018-11506](https://www.redhat.com/security/data/cve/CVE-2018-11506.html)
* [CVE-2018-12232](https://www.redhat.com/security/data/cve/CVE-2018-12232.html)
* [CVE-2018-13405](https://www.redhat.com/security/data/cve/CVE-2018-13405.html)
* [CVE-2018-14619](https://www.redhat.com/security/data/cve/CVE-2018-14619.html)
* [CVE-2018-14641](https://www.redhat.com/security/data/cve/CVE-2018-14641.html)
* [CVE-2018-1000026](https://www.redhat.com/security/data/cve/CVE-2018-1000026.html)
* [CVE-2018-1000200](https://www.redhat.com/security/data/cve/CVE-2018-1000200.html)
* [CVE-2018-1000204](https://www.redhat.com/security/data/cve/CVE-2018-1000204.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>
* <https://access.redhat.com/articles/3553061>
* <https://access.redhat.com/security/vulnerabilities/ssbd>
* <https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/7.6_release_notes/index>
* <https://access.redhat.com/articles/3658021>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux for ARM 64 7

| SRPM | |
| --- | --- |
| kernel-alt-4.14.0-115.el7a.src.rpm | SHA-256: c3f79f9d90afff87036cfc2df62e0b29c53fbcf85618a1923848bd59c90029e9 |
| aarch64 | |
| kernel-4.14.0-115.el7a.aarch64.rpm | SHA-256: 7d61724c5ed7577b7b69c1ac470a9faba031e4c162335a91b67a43d85e106799 |
| kernel-abi-whitelists-4.14.0-115.el7a.noarch.rpm | SHA-256: c0218db091e219163cd292d3e5f0ae0d5016095f206196e374e94cbe0bbd1ee4 |
| kernel-debug-4.14.0-115.el7a.aarch64.rpm | SHA-256: f69faeee9130d568be1262a037339b810ee9827fc49fd8a05280a4862657c9cf |
| kernel-debug-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: 1287ca2ff68980df3b1623e32b3d2d813d2807118e50fa489e59913cf87a4635 |
| kernel-debug-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: 1287ca2ff68980df3b1623e32b3d2d813d2807118e50fa489e59913cf87a4635 |
| kernel-debug-devel-4.14.0-115.el7a.aarch64.rpm | SHA-256: 792039cac77de61b36ffa30cbefbe7a9622fc51fdaa15242c4a6cdd521f58420 |
| kernel-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: 28589cd1622eef8a82d55aefeccb63e8c1bbaab762f328a7d75ca1112bc976b1 |
| kernel-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: 28589cd1622eef8a82d55aefeccb63e8c1bbaab762f328a7d75ca1112bc976b1 |
| kernel-debuginfo-common-aarch64-4.14.0-115.el7a.aarch64.rpm | SHA-256: 69b20e0ade4656c4f5c65d427c8d7c114755dd2ac9471d5877a35527f14e3228 |
| kernel-debuginfo-common-aarch64-4.14.0-115.el7a.aarch64.rpm | SHA-256: 69b20e0ade4656c4f5c65d427c8d7c114755dd2ac9471d5877a35527f14e3228 |
| kernel-devel-4.14.0-115.el7a.aarch64.rpm | SHA-256: 8c33b2d273e5d60da560fd3ecbaee39b17cd791667199909caf9b05b895620cc |
| kernel-doc-4.14.0-115.el7a.noarch.rpm | SHA-256: d4f2237c039aa6266c52e23432781268ff1631bf3ebb9bce034f98a4c78fac11 |
| kernel-doc-4.14.0-115.el7a.noarch.rpm | SHA-256: d4f2237c039aa6266c52e23432781268ff1631bf3ebb9bce034f98a4c78fac11 |
| kernel-headers-4.14.0-115.el7a.aarch64.rpm | SHA-256: e9f1f734b33e76e312e953d7654a15c4a2482e76d187b03f4475bb63a2a1b43b |
| kernel-tools-4.14.0-115.el7a.aarch64.rpm | SHA-256: 53b8058103599be854866efd1cc40b9dccd0d6b22b76ddc311a84a505cb13d91 |
| kernel-tools-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: de6050bf1c9e8c5c69d0c7c2214ffcb262fc1318ad94da53ceca117e5e2a3a9c |
| kernel-tools-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: de6050bf1c9e8c5c69d0c7c2214ffcb262fc1318ad94da53ceca117e5e2a3a9c |
| kernel-tools-libs-4.14.0-115.el7a.aarch64.rpm | SHA-256: 5e843554a594f037fc3629e2a2f67038ea45330e6fd865943b95fb7085860092 |
| kernel-tools-libs-devel-4.14.0-115.el7a.aarch64.rpm | SHA-256: db2cca5f36112d0a0fc636c45340b17ae5b52fbc3b3eed96ec150150bc424cfe |
| perf-4.14.0-115.el7a.aarch64.rpm | SHA-256: 41c23613dad1bd327b68d9b0461f0e07536637085d055368d21283a28c3c7415 |
| perf-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: 1d5b66e00290b43c15e55ee390dc566e73dd85fa01f62f57a1f476c80fecf8c3 |
| perf-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: 1d5b66e00290b43c15e55ee390dc566e73dd85fa01f62f57a1f476c80fecf8c3 |
| python-perf-4.14.0-115.el7a.aarch64.rpm | SHA-256: c3b86f22f1ea39cbb0eed3eaa5041523912f35d9263cb1cbeef99c658271ce1a |
| python-perf-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: 4115b3bd1a9aee5e3d7745f854815e78ee39ef9173f90c80e4d3929ae7f2c1e5 |
| python-perf-debuginfo-4.14.0-115.el7a.aarch64.rpm | SHA-256: 4115b3bd1a9aee5e3d7745f854815e78ee39ef9173f90c80e4d3929ae7f2c1e5 |

## Red Hat Enterprise Linux for Power 9 7

| SRPM | |
| --- | --- |
| kernel-alt-4.14.0-115.el7a.src.rpm | SHA-256: c3f79f9d90afff87036cfc2df62e0b29c53fbcf85618a1923848bd59c90029e9 |
| ppc64le | |
| kernel-4.14.0-115.el7a.ppc64le.rpm | SHA-256: ffc914a516eea04f812c89c7f1c97c28120a14badf7155dcbbfe9426cde3607a |
| kernel-abi-whitelists-4.14.0-115.el7a.noarch.rpm | SHA-256: c0218db091e219163cd292d3e5f0ae0d5016095f206196e374e94cbe0bbd1ee4 |
| kernel-bootwrapper-4.14.0-115.el7a.ppc64le.rpm | SHA-256: ad12f5ad6b24592b052a1df41975c1e5342d82337cc9e90f0f1837f5891fadea |
| kernel-debug-4.14.0-115.el7a.ppc64le.rpm | SHA-256: edbe8b8a20579526024b035aed1efc287833dd855b44943bcd522b2ff8ba63d5 |
| kernel-debug-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 7abf48accd53996bc84b17c34ad3a72806fc75ffeb4bb2fc157f80af2181d3da |
| kernel-debug-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 7abf48accd53996bc84b17c34ad3a72806fc75ffeb4bb2fc157f80af2181d3da |
| kernel-debug-devel-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 32444af4d82505e00da204ddd32c67a61c2b577bd3e09ea181f569b575d42a7e |
| kernel-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 51a511faace78f88b407f15e5e4d600cab7f7202e64c5e02acad931f81029d22 |
| kernel-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 51a511faace78f88b407f15e5e4d600cab7f7202e64c5e02acad931f81029d22 |
| kernel-debuginfo-common-ppc64le-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 2232e0f348b7ecde59c115364b4eeee9170fe58fd5a84ef8b8c7838ea1f6da26 |
| kernel-debuginfo-common-ppc64le-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 2232e0f348b7ecde59c115364b4eeee9170fe58fd5a84ef8b8c7838ea1f6da26 |
| kernel-devel-4.14.0-115.el7a.ppc64le.rpm | SHA-256: aa9dd7b4b4d16e79b49b43210f3cc50936138196ebfaea77e27496197c650407 |
| kernel-doc-4.14.0-115.el7a.noarch.rpm | SHA-256: d4f2237c039aa6266c52e23432781268ff1631bf3ebb9bce034f98a4c78fac11 |
| kernel-headers-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 0127a88ef29a7cf1627df83321e3f5eeef9d43f3573d528e6be5f26882c4fd6d |
| kernel-tools-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 21c822087857c7143da8c823f1fee3a8dd65d53f51c51a51b5e38bacec0892cd |
| kernel-tools-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: be9c443cc299d94802b3c8bbd28ccf0e7b3d19686904e2b070f399f3c07cb8e6 |
| kernel-tools-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: be9c443cc299d94802b3c8bbd28ccf0e7b3d19686904e2b070f399f3c07cb8e6 |
| kernel-tools-libs-4.14.0-115.el7a.ppc64le.rpm | SHA-256: caae1e9b852215e4ceed1bc34f2cee1f4312457c5eafb3649a2fbc769bffbe65 |
| kernel-tools-libs-devel-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 8c786c6965ea2feae490e78118ba4afb1fc6deaaeeb90705a5f2c1a6f8a1ca75 |
| perf-4.14.0-115.el7a.ppc64le.rpm | SHA-256: bd9bb67ae59e3671a2efab4228f19f0017418eeab2671ff184f3ed8872939149 |
| perf-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: c41a7f93e6eef59e3e862671bb2e0e926c0b7fc70db06f3f056cc74bd018ad12 |
| perf-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: c41a7f93e6eef59e3e862671bb2e0e926c0b7fc70db06f3f056cc74bd018ad12 |
| python-perf-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 4e75530e6d4302eab2dcb1ec5de249bff3bee162e7828aac783373913ff380e7 |
| python-perf-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 2120f66a60ceb2e208333f9f712ac743cb45321a4b83e99880650a052cb9798d |
| python-perf-debuginfo-4.14.0-115.el7a.ppc64le.rpm | SHA-256: 2120f66a60ceb2e208333f9f712ac743cb45321a4b83e99880650a052cb9798d |

## Red Hat Enterprise Linux for IBM System z (Structure A) 7

| SRPM | |
| --- | --- |
| kernel-alt-4.14.0-115.el7a.src.rpm | SHA-256: c3f79f9d90afff87036cfc2df62e0b29c53fbcf85618a1923848bd59c90029e9 |
| s390x | |
| kernel-4.14.0-115.el7a.s390x.rpm | SHA-256: 2121aeb49fecd59975c736bbe5aeb173b34dec44148284936cd7657a6f86a30d |
| kernel-abi-whitelists-4.14.0-115.el7a.noarch.rpm | SHA-256: c0218db091e219163cd292d3e5f0ae0d5016095f206196e374e94cbe0bbd1ee4 |
| kernel-debug-4.14.0-115.el7a.s390x.rpm | SHA-256: 42ad59c322eb004316337439d6f89f9a2f5e3a889347de90db5d852ad6498e09 |
| kernel-debug-debuginfo-4.14.0-115.el7a.s390x.rpm | SHA-256: 4ec2deed135023a29b88648fec585c5835e4ac4be7b3dab08da1f8952050b615 |
| kernel-debug-devel-4.14.0-115.el7a.s390x.rpm | SHA-256: 374360ccb68411bbdff295338ef2e0847e4cfeb26360ac8bd4dadf5e30a1f239 |
| kernel-debuginfo-4.14.0-115.el7a.s390x.rpm | SHA-256: 64bcad9420a80c60fc16202cca34a34f79a688cdbbaf81f564fa8da5e24a69ce |
| kernel-debuginfo-common-s390x-4.14.0-115.el7a.s390x.rpm | SHA-256: eb390269408f079a8f7f0c771c25f8796e932ecf3c2cebce9c1c24e467593241 |
| kernel-devel-4.14.0-115.el7a.s390x.rpm | SHA-256: 335addb674e595eee8c533ab316e8899ec3d6d7567a98792effa45e3855f8e23 |
| kernel-doc-4.14.0-115.el7a.noarch.rpm | SHA-256: d4f2237c039aa6266c52e23432781268ff1631bf3ebb9bce034f98a4c78fac11 |
| kernel-headers-4.14.0-115.el7a.s390x.rpm | SHA-256: 47208293787bbdabad495ead6bc7ffb5255596ee1b9fb5f06d811910157d8d0d |
| kernel-kdump-4.14.0-115.el7a.s390x.rpm | SHA-256: 5e32ffbf60811b29a24679469e16eea284199d1c1cf2bb1e22c7e8374627c428 |
| kernel-kdump-debuginfo-4.14.0-115.el7a.s390x.rpm | SHA-256: 5784c667f6696ad1ed75227d85e18f26484efba4be61f12c9d7de501b7e89cce |
| kernel-kdump-devel-4.14.0-115.el7a.s390x.rpm | SHA-256: 66443a53b396f557eee39c55c150d9ba17741c967fc3144515a54c41a38e0915 |
| perf-4.14.0-115.el7a.s390x.rpm | SHA-256: a0dd014c465a0dff9a99c39a3d4510a9a144e8707aba5e3af5069cf472ca348d |
| perf-debuginfo-4.14.0-115.el7a.s390x.rpm | SHA-256: 734519c0773ebffb0b20e6a2ec83dad792435faec092ee9d3139390b91864a43 |
| python-perf-4.14.0-115.el7a.s390x.rpm | SHA-256: f87ee67f83098dc8c7ac506fc459b2a73dfada2b7cf8a72e4de22f054b453c34 |
| python-perf-debuginfo-4.14.0-115.el7a.s390x.rpm | SHA-256: 861db4fa9ea482ce14b209baa743492ee982d816397c7cda39ab6c04e507e799 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_fc12d25e_20250126_104649.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_773cad56_20250126_104648.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_c8a675be_20250126_104712.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from usn.ubuntu.com_09872871_20250125_175600.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3697-2: Linux kernel (OEM) vulnerabilities

2 July 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux-oem](/security/cves?package=linux-oem) - Linux kernel for OEM processors

## Details

It was discovered that a null pointer dereference vulnerability existed in

the DCCP protocol implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash). ([CVE-2018-1130](/security/CVE-2018-1130))

Jann Horn discovered that the 32 bit adjtimex() syscall implementation for

64 bit Linux kernels did not properly initialize memory returned to user

space in some situations. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-11508](/security/CVE-2018-11508))

Wang Qize discovered that an information disclosure vulnerability existed

in the SMBus driver for ACPI Embedded Controllers in the Linux kernel. A

local attacker could use this to expose sensitive information (kernel

pointer addresses). ([CVE-2018-5750](/security/CVE-2018-5750))

It was discovered that the SCTP Protocol implementation in the Linux kernel

did not properly validate userspace provided payload lengths in some

situations. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2018-5803](/security/CVE-2018-5803))

It was discovered that an integer overflow error existed in the futex

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash). ([CVE-2018-6927](/security/CVE-2018-6927))

It was discovered that an information leak vulnerability existed in the

floppy driver in the Linux kernel. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2018-7755](/security/CVE-2018-7755))

It was discovered that a memory leak existed in the SAS driver subsystem of

the Linux kernel. A local attacker could use this to cause a denial of

service (memory exhaustion). ([CVE-2018-7757](/security/CVE-2018-7757))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.13.0-1031-oem](https://launchpad.net/ubuntu/%2Bsource/linux-oem)
  -
  [4.13.0-1031.35](https://launchpad.net/ubuntu/%2Bsource/linux-oem/4.13.0-1031.35)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2018-1130](/security/CVE-2018-1130)
* [CVE-2018-11508](/security/CVE-2018-11508)
* [CVE-2018-5750](/security/CVE-2018-5750)
* [CVE-2018-5803](/security/CVE-2018-5803)
* [CVE-2018-6927](/security/CVE-2018-6927)
* [CVE-2018-7755](/security/CVE-2018-7755)
* [CVE-2018-7757](/security/CVE-2018-7757)

## Related notices

* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3698-2](/security/notices/USN-3698-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3697-1](/security/notices/USN-3697-1)
* [USN-3698-1](/security/notices/USN-3698-1)
* [USN-3695-2](/security/notices/USN-3695-2)
* [USN-3695-1](/security/notices/USN-3695-1)
* [USN-3631-2](/security/notices/USN-3631-2)
* [USN-3631-1](/security/notices/USN-3631-1)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)
* [USN-3696-2](/security/notices/USN-3696-2)
* [USN-3696-1](/security/notices/USN-3696-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from access.redhat.com_e281a427_20250125_175533.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2019:0641 - Security Advisory

Issued:
2019-03-26
Updated:
2019-03-26
# RHSA-2019:0641 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: kernel-rt security and bug fix update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2019%3A0641)

## Topic

An update for kernel-rt is now available for Red Hat Enterprise MRG 2.

Red Hat Product Security has rated this update as having a security impact of Important. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

The kernel-rt packages provide the Real Time Linux Kernel, which enables fine-tuning for systems with extremely high determinism requirements.

Security Fix(es):

* kernel: MIDI driver race condition leads to a double-free (CVE-2018-10902)
* kernel: net/rxrpc: overflow in decoding of krb5 principal (CVE-2017-7482)
* kernel: Missing length check of payload in net/sctp/sm\_make\_chunk.c:\_sctp\_make\_chunk() function allows denial of service (CVE-2018-5803)
* kernel: use-after-free in ntfs\_read\_locked\_inode in the ntfs.ko (CVE-2018-12929)
* kernel: stack-based out-of-bounds write in ntfs\_end\_buffer\_async\_read in the ntfs.ko (CVE-2018-12930)
* kernel: stack-based out-of-bounds write in ntfs\_attr\_find in the ntfs.ko (CVE-2018-12931)

For more details about the security issue(s), including the impact, a CVSS score, acknowledgments, and other related information, refer to the CVE page(s) listed in the References section.

Bug Fix(es):

* Remove the NTFS module from the MRG 2.5.x realtime kernel (BZ#1674523)
* update the MRG 2.5.z 3.10 kernel-rt sources (BZ#1674935)

Users of kernel-rt are advised to upgrade to these updated packages, which fix these bugs.

## Solution

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

The system must be rebooted for this update to take effect.

## Affected Products

* MRG Realtime 2 x86\_64

## Fixes

* [BZ - 1446288](https://bugzilla.redhat.com/show_bug.cgi?id=1446288)
  - CVE-2017-7482 kernel: net/rxrpc: overflow in decoding of krb5 principal
* [BZ - 1551051](https://bugzilla.redhat.com/show_bug.cgi?id=1551051)
  - CVE-2018-5803 kernel: Missing length check of payload in net/sctp/sm\_make\_chunk.c:\_sctp\_make\_chunk() function allows denial of service
* [BZ - 1590720](https://bugzilla.redhat.com/show_bug.cgi?id=1590720)
  - CVE-2018-10902 kernel: MIDI driver race condition leads to a double-free
* [BZ - 1597831](https://bugzilla.redhat.com/show_bug.cgi?id=1597831)
  - CVE-2018-12929 kernel: use-after-free in ntfs\_read\_locked\_inode in the ntfs.ko
* [BZ - 1597837](https://bugzilla.redhat.com/show_bug.cgi?id=1597837)
  - CVE-2018-12930 kernel: stack-based out-of-bounds write in ntfs\_end\_buffer\_async\_read in the ntfs.ko
* [BZ - 1597843](https://bugzilla.redhat.com/show_bug.cgi?id=1597843)
  - CVE-2018-12931 kernel: stack-based out-of-bounds write in ntfs\_attr\_find in the ntfs.ko
* [BZ - 1674935](https://bugzilla.redhat.com/show_bug.cgi?id=1674935)
  - update the MRG 2.5.z 3.10 kernel-rt sources

## CVEs

* [CVE-2017-7482](https://www.redhat.com/security/data/cve/CVE-2017-7482.html)
* [CVE-2018-5803](https://www.redhat.com/security/data/cve/CVE-2018-5803.html)
* [CVE-2018-10902](https://www.redhat.com/security/data/cve/CVE-2018-10902.html)
* [CVE-2018-12929](https://www.redhat.com/security/data/cve/CVE-2018-12929.html)
* [CVE-2018-12930](https://www.redhat.com/security/data/cve/CVE-2018-12930.html)
* [CVE-2018-12931](https://www.redhat.com/security/data/cve/CVE-2018-12931.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## MRG Realtime 2

| SRPM | |
| --- | --- |
| kernel-rt-3.10.0-693.46.1.rt56.639.el6rt.src.rpm | SHA-256: 7559179c88acebda54a11cc5abc0c52605e2625e33b97f32c0f6b0376e5bc880 |
| x86\_64 | |
| kernel-rt-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 98a5b44f20d0c87f45798e7446a2fe7a15a80b36fddc50440056a8388fad1fc6 |
| kernel-rt-debug-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 8be5edb4028fa68f257e696f9bdfd2db2a804457704073cf5bda762c2fb383cd |
| kernel-rt-debug-debuginfo-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 27740f84db775fbfb401624ea3c092357340569248d94a4abe7fe5c20d55cbdf |
| kernel-rt-debug-devel-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: c742e3bcfb3d7fe5f5a0d05de11c6a33ebc4c0f39bb29b69b6ab1e197c484838 |
| kernel-rt-debuginfo-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 1852fa8655b0b46c3f8b9ab7427c4b59977ef285e3b724bf2deeb84cb523916b |
| kernel-rt-debuginfo-common-x86\_64-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: b4c1c9369085b1ec7e8b6db18576fcdec50f46ee263039be5cce17a8c57d21fd |
| kernel-rt-devel-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 295f9d25747d93a3b57043d86a6c09a8f072e1bdf3a318fd28b502c9a9b99d02 |
| kernel-rt-doc-3.10.0-693.46.1.rt56.639.el6rt.noarch.rpm | SHA-256: 4a2521ccb856c63a79f467c8beb0f70b7beebb526018cdff56fe978908908a36 |
| kernel-rt-firmware-3.10.0-693.46.1.rt56.639.el6rt.noarch.rpm | SHA-256: b567c33f2623f9208c6fa1645579261bb09bc9d26557991347168c04ead45821 |
| kernel-rt-trace-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 9424a0b53e924fe3a10c1f2099ca15d1f1823b5928a45219016920e36328466c |
| kernel-rt-trace-debuginfo-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 0abd800257a28e9db1fa45f06e4af08f4eabb0e5aa644832bfb8c7ea55491aa3 |
| kernel-rt-trace-devel-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 8a6a3016f432c4a11695fab6daa0c684b287d5739b78a9c0823397bf52ba4e49 |
| kernel-rt-vanilla-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: ccdc876af7fe9412c931db13a3f3ea80796eac9d1e4be916e1ffa65db80f3266 |
| kernel-rt-vanilla-debuginfo-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 41b024842ba18d0a5323766911b406ee901ecf192c79385bc677f60b4c79853c |
| kernel-rt-vanilla-devel-3.10.0-693.46.1.rt56.639.el6rt.x86\_64.rpm | SHA-256: 88705ee67b7580eb644f6b9c6139d16fb2f51e847cf3ab09c4e84cfdbc0d474a |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from secuniaresearch.flexerasoftware.com_9569a7bf_20250125_175553.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from cdn.kernel.org_31e147dd_20250125_175547.html ===
commit 8b5ab55d254f36e89b1b53aeac7223d2d102483e
Author: Greg Kroah-Hartman
Date: Sun Mar 11 16:19:47 2018 +0100
Linux 4.4.121
commit 0fc85640c6a8d84bdab008f285346061a8fc393d
Author: Ernesto A. Fernández
Date: Wed Aug 2 03:18:27 2017 -0300
btrfs: preserve i\_mode if \_\_btrfs\_set\_acl() fails
commit d7d824966530acfe32b94d1ed672e6fe1638cd68 upstream.
When changing a file's acl mask, btrfs\_set\_acl() will first set the
group bits of i\_mode to the value of the mask, and only then set the
actual extended attribute representing the new acl.
If the second part fails (due to lack of space, for example) and the
file had no acl attribute to begin with, the system will from now on
assume that the mask permission bits are actual group permission bits,
potentially granting access to the wrong users.
Prevent this by restoring the original mode bits if \_\_btrfs\_set\_acl
fails.
Signed-off-by: Ernesto A. Fernández
Reviewed-by: David Sterba
Signed-off-by: David Sterba
Signed-off-by: Nikolay Borisov
Signed-off-by: Greg Kroah-Hartman
commit ea1c4ebe282d6bb6afca4a42bfbfb933c86b264c
Author: Daniel Borkmann
Date: Thu Mar 8 16:17:34 2018 +0100
bpf, x64: implement retpoline for tail call
[ upstream commit a493a87f38cfa48caaa95c9347be2d914c6fdf29 ]
Implement a retpoline [0] for the BPF tail call JIT'ing that converts
the indirect jump via jmp %rax that is used to make the long jump into
another JITed BPF image. Since this is subject to speculative execution,
we need to control the transient instruction sequence here as well
when CONFIG\_RETPOLINE is set, and direct it into a pause + lfence loop.
The latter aligns also with what gcc / clang emits (e.g. [1]).
JIT dump after patch:
# bpftool p d x i 1
0: (18) r2 = map[id:1]
2: (b7) r3 = 0
3: (85) call bpf\_tail\_call#12
4: (b7) r0 = 2
5: (95) exit
With CONFIG\_RETPOLINE:
# bpftool p d j i 1
[...]
33: cmp %edx,0x24(%rsi)
36: jbe 0x0000000000000072 |\*
38: mov 0x24(%rbp),%eax
3e: cmp $0x20,%eax
41: ja 0x0000000000000072 |
43: add $0x1,%eax
46: mov %eax,0x24(%rbp)
4c: mov 0x90(%rsi,%rdx,8),%rax
54: test %rax,%rax
57: je 0x0000000000000072 |
59: mov 0x28(%rax),%rax
5d: add $0x25,%rax
61: callq 0x000000000000006d |+
66: pause |
68: lfence |
6b: jmp 0x0000000000000066 |
6d: mov %rax,(%rsp) |
71: retq |
72: mov $0x2,%eax
[...]
\* relative fall-through jumps in error case
+ retpoline for indirect jump
Without CONFIG\_RETPOLINE:
# bpftool p d j i 1
[...]
33: cmp %edx,0x24(%rsi)
36: jbe 0x0000000000000063 |\*
38: mov 0x24(%rbp),%eax
3e: cmp $0x20,%eax
41: ja 0x0000000000000063 |
43: add $0x1,%eax
46: mov %eax,0x24(%rbp)
4c: mov 0x90(%rsi,%rdx,8),%rax
54: test %rax,%rax
57: je 0x0000000000000063 |
59: mov 0x28(%rax),%rax
5d: add $0x25,%rax
61: jmpq \*%rax |-
63: mov $0x2,%eax
[...]
\* relative fall-through jumps in error case
- plain indirect jump as before
[0] https://support.google.com/faqs/answer/7625886
[1] https://github.com/gcc-mirror/gcc/commit/a31e654fa107be968b802786d747e962c2fcdb2b
Signed-off-by: Daniel Borkmann
Signed-off-by: Alexei Starovoitov
Signed-off-by: Daniel Borkmann
Signed-off-by: Greg Kroah-Hartman
commit bb97a65730f975743b2d95b5cecadc5a254c0159
Author: Mike Snitzer
Date: Tue Jun 20 19:14:30 2017 -0400
dm io: fix duplicate bio completion due to missing ref count
commit feb7695fe9fb83084aa29de0094774f4c9d4c9fc upstream.
If only a subset of the devices associated with multiple regions support
a given special operation (eg. DISCARD) then the dec\_count() that is
used to set error for the region must increment the io->count.
Otherwise, when the dec\_count() is called it can cause the dm-io
caller's bio to be completed multiple times. As was reported against
the dm-mirror target that had mirror legs with a mix of discard
capabilities.
Bug: https://bugzilla.kernel.org/show\_bug.cgi?id=196077
Reported-by: Zhang Yi
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit e7f17d033e58acce9df40bc44ed804720417ca2e
Author: Dan Williams
Date: Thu Mar 8 18:39:24 2018 +0000
mpls, nospec: Sanitize array index in mpls\_label\_ok()
commit 3968523f855050b8195134da951b87c20bd66130 upstream.
mpls\_label\_ok() validates that the 'platform\_label' array index from a
userspace netlink message payload is valid. Under speculation the
mpls\_label\_ok() result may not resolve in the CPU pipeline until after
the index is used to access an array element. Sanitize the index to zero
to prevent userspace-controlled arbitrary out-of-bounds speculation, a
precursor for a speculative execution side channel vulnerability.
Cc: "David S. Miller"
Cc: Eric W. Biederman
Signed-off-by: Dan Williams
Signed-off-by: David S. Miller
[bwh: Backported to 4.4:
- mpls\_label\_ok() doesn't take an extack parameter
- Drop change in mpls\_getroute()]
Signed-off-by: Ben Hutchings
Signed-off-by: Greg Kroah-Hartman
commit 4bd01ca7633432694cab0a098dfb9cee7b157512
Author: David Ahern
Date: Thu Mar 8 18:36:16 2018 +0000
net: mpls: Pull common label check into helper
commit b7b386f42f079b25b942c756820e36c6bd09b2ca upstream.
mpls\_route\_add and mpls\_route\_del have the same checks on the label.
Move to a helper. Avoid duplicate extack messages in the next patch.
Signed-off-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
Signed-off-by: Greg Kroah-Hartman
commit 54b183ea4fe96c7b80439971ee04cf634a6e0459
Author: Alexey Kodanev
Date: Fri Feb 9 17:35:23 2018 +0300
sctp: verify size of a new chunk in \_sctp\_make\_chunk()
[ Upstream commit 07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c ]
When SCTP makes INIT or INIT\_ACK packet the total chunk length
can exceed SCTP\_MAX\_CHUNK\_LEN which leads to kernel panic when
transmitting these packets, e.g. the crash on sending INIT\_ACK:
[ 597.804948] skbuff: skb\_over\_panic: text:00000000ffae06e4 len:120168
put:120156 head:000000007aa47635 data:00000000d991c2de
tail:0x1d640 end:0xfec0 dev:
...
[ 597.976970] ------------[ cut here ]------------
[ 598.033408] kernel BUG at net/core/skbuff.c:104!
[ 600.314841] Call Trace:
[ 600.345829]
[ 600.371639] ? sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.436934] skb\_put+0x16c/0x200
[ 600.477295] sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.540630] ? sctp\_packet\_config+0x890/0x890 [sctp]
[ 600.601781] ? \_\_sctp\_packet\_append\_chunk+0x3b4/0xd00 [sctp]
[ 600.671356] ? sctp\_cmp\_addr\_exact+0x3f/0x90 [sctp]
[ 600.731482] sctp\_outq\_flush+0x663/0x30d0 [sctp]
[ 600.788565] ? sctp\_make\_init+0xbf0/0xbf0 [sctp]
[ 600.845555] ? sctp\_check\_transmitted+0x18f0/0x18f0 [sctp]
[ 600.912945] ? sctp\_outq\_tail+0x631/0x9d0 [sctp]
[ 600.969936] sctp\_cmd\_interpreter.isra.22+0x3be1/0x5cb0 [sctp]
[ 601.041593] ? sctp\_sf\_do\_5\_1B\_init+0x85f/0xc30 [sctp]
[ 601.104837] ? sctp\_generate\_t1\_cookie\_event+0x20/0x20 [sctp]
[ 601.175436] ? sctp\_eat\_data+0x1710/0x1710 [sctp]
[ 601.233575] sctp\_do\_sm+0x182/0x560 [sctp]
[ 601.284328] ? sctp\_has\_association+0x70/0x70 [sctp]
[ 601.345586] ? sctp\_rcv+0xef4/0x32f0 [sctp]
[ 601.397478] ? sctp6\_rcv+0xa/0x20 [sctp]
...
Here the chunk size for INIT\_ACK packet becomes too big, mostly
because of the state cookie (INIT packet has large size with
many address parameters), plus additional server parameters.
Later this chunk causes the panic in skb\_put\_data():
skb\_packet\_transmit()
sctp\_packet\_pack()
skb\_put\_data(nskb, chunk->skb->data, chunk->skb->len);
'nskb' (head skb) was previously allocated with packet->size
from u16 'chunk->chunk\_hdr->length'.
As suggested by Marcelo we should check the chunk's length in
\_sctp\_make\_chunk() before trying to allocate skb for it and
discard a chunk if its size bigger than SCTP\_MAX\_CHUNK\_LEN.
Signed-off-by: Alexey Kodanev
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f3b580d3223463be83fa6dd1ef5585ebb99a7fec
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:17 2018 +0100
s390/qeth: fix IPA command submission race
[ Upstream commit d22ffb5a712f9211ffd104c38fc17cbfb1b5e2b0 ]
If multiple IPA commands are build & sent out concurrently,
fill\_ipacmd\_header() may assign a seqno value to a command that's
different from what send\_control\_data() later assigns to this command's
reply.
This is due to other commands passing through send\_control\_data(),
and incrementing card->seqno.ipa along the way.
So one IPA command has no reply that's waiting for its seqno, while some
other IPA command has multiple reply objects waiting for it.
Only one of those waiting replies wins, and the other(s) times out and
triggers a recovery via send\_ipa\_cmd().
Fix this by making sure that the same seqno value is assigned to
a command and its reply object.
Do so immediately before submitting the command & while holding the
irq\_pending "lock", to produce nicely ascending seqnos.
As a side effect, \*all\* IPA commands now use a reply object that's
waiting for its actual seqno. Previously, early IPA commands that were
submitted while the card was still DOWN used the "catch-all" IDX seqno.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 290db9ba25917e20cc95484a52388ed0b3abbfe1
Author: Julian Wiedmann
Date: Fri Feb 9 11:03:50 2018 +0100
s390/qeth: fix SETIP command handling
[ Upstream commit 1c5b2216fbb973a9410e0b06389740b5c1289171 ]
send\_control\_data() applies some special handling to SETIP v4 IPA
commands. But current code parses \*all\* command types for the SETIP
command code. Limit the command code check to IPA commands.
Fixes: 5b54e16f1a54 ("qeth: do not spin for SETIP ip assist command")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f99fb569235fbfbec9ae8f1cc78d73d2aed4c5a3
Author: Alexey Kodanev
Date: Mon Feb 5 15:10:35 2018 +0300
sctp: fix dst refcnt leak in sctp\_v6\_get\_dst()
[ Upstream commit 957d761cf91cdbb175ad7d8f5472336a4d54dbf2 ]
When going through the bind address list in sctp\_v6\_get\_dst() and
the previously found address is better ('matchlen > bmatchlen'),
the code continues to the next iteration without releasing currently
held destination.
Fix it by releasing 'bdst' before continue to the next iteration, and
instead of introducing one more '!IS\_ERR(bdst)' check for dst\_release(),
move the already existed one right after ip6\_dst\_lookup\_flow(), i.e. we
shouldn't proceed further if we get an error for the route lookup.
Fixes: dbc2b5e9a09e ("sctp: fix src address selection if using secondary addresses for ipv6")
Signed-off-by: Alexey Kodanev
Acked-by: Neil Horman
Acked-by: Marcelo Ricardo Leitner
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c4faf87c2beaaed9ec7f2b6e4e53560dd38b1acc
Author: Tommi Rantala
Date: Mon Feb 5 21:48:14 2018 +0200
sctp: fix dst refcnt leak in sctp\_v4\_get\_dst
[ Upstream commit 4a31a6b19f9ddf498c81f5c9b089742b7472a6f8 ]
Fix dst reference count leak in sctp\_v4\_get\_dst() introduced in commit
410f03831 ("sctp: add routing output fallback"):
When walking the address\_list, successive ip\_route\_output\_key() calls
may return the same rt->dst with the reference incremented on each call.
The code would not decrement the dst refcount when the dst pointer was
identical from the previous iteration, causing the dst refcnt leak.
Testcase:
ip netns add TEST
ip netns exec TEST ip link set lo up
ip link add dummy0 type dummy
ip link add dummy1 type dummy
ip link add dummy2 type dummy
ip link set dev dummy0 netns TEST
ip link set dev dummy1 netns TEST
ip link set dev dummy2 netns TEST
ip netns exec TEST ip addr add 192.168.1.1/24 dev dummy0
ip netns exec TEST ip link set dummy0 up
ip netns exec TEST ip addr add 192.168.1.2/24 dev dummy1
ip netns exec TEST ip link set dummy1 up
ip netns exec TEST ip addr add 192.168.1.3/24 dev dummy2
ip netns exec TEST ip link set dummy2 up
ip netns exec TEST sctp\_test -H 192.168.1.2 -P 20002 -h 192.168.1.1 -p 20000 -s -B 192.168.1.3
ip netns del TEST
In 4.4 and 4.9 kernels this results to:
[ 354.179591] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 364.419674] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 374.663664] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 384.903717] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 395.143724] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 405.383645] unregister\_netdevice: waiting for lo to become free. Usage count = 1
...
Fixes: 410f03831 ("sctp: add routing output fallback")
Fixes: 0ca50d12f ("sctp: fix src address selection if using secondary addresses")
Signed-off-by: Tommi Rantala
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e44cd77ca94298412591b7050d990cb63f4831a4
Author: Alexey Kodanev
Date: Thu Feb 15 20:18:43 2018 +0300
udplite: fix partial checksum initialization
[ Upstream commit 15f35d49c93f4fa9875235e7bf3e3783d2dd7a1b ]
Since UDP-Lite is always using checksum, the following path is
triggered when calculating pseudo header for it:
udp4\_csum\_init() or udp6\_csum\_init()
skb\_checksum\_init\_zero\_check()
\_\_skb\_checksum\_validate\_complete()
The problem can appear if skb->len is less than CHECKSUM\_BREAK. In
this particular case \_\_skb\_checksum\_validate\_complete() also invokes
\_\_skb\_checksum\_complete(skb). If UDP-Lite is using partial checksum
that covers only part of a packet, the function will return bad
checksum and the packet will be dropped.
It can be fixed if we skip skb\_checksum\_init\_zero\_check() and only
set the required pseudo header checksum for UDP-Lite with partial
checksum before udp4\_csum\_init()/udp6\_csum\_init() functions return.
Fixes: ed70fcfcee95 ("net: Call skb\_checksum\_init in IPv4")
Fixes: e4f45b7f40bd ("net: Call skb\_checksum\_init in IPv6")
Signed-off-by: Alexey Kodanev
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit eae0a9ae192ae829c951109ed08eb2e698167e24
Author: Guillaume Nault
Date: Fri Mar 2 18:41:16 2018 +0100
ppp: prevent unregistered channels from connecting to PPP units
[ Upstream commit 77f840e3e5f09c6d7d727e85e6e08276dd813d11 ]
PPP units don't hold any reference on the channels connected to it.
It is the channel's responsibility to ensure that it disconnects from
its unit before being destroyed.
In practice, this is ensured by ppp\_unregister\_channel() disconnecting
the channel from the unit before dropping a reference on the channel.
However, it is possible for an unregistered channel to connect to a PPP
unit: register a channel with ppp\_register\_net\_channel(), attach a
/dev/ppp file to it with ioctl(PPPIOCATTCHAN), unregister the channel
with ppp\_unregister\_channel() and finally connect the /dev/ppp file to
a PPP unit with ioctl(PPPIOCCONNECT).
Once in this situation, the channel is only held by the /dev/ppp file,
which can be released at anytime and free the channel without letting
the parent PPP unit know. Then the ppp structure ends up with dangling
pointers in its ->channels list.
Prevent this scenario by forbidding unregistered channels from
connecting to PPP units. This maintains the code logic by keeping
ppp\_unregister\_channel() responsible from disconnecting the channel if
necessary and avoids modification on the reference counting mechanism.
This issue seems to predate git history (successfully reproduced on
Linux 2.6.26 and earlier PPP commits are unrelated).
Signed-off-by: Guillaume Nault
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1b919f5ac999e67fb3c6eb2130e5f9f8207e07f2
Author: Nicolas Dichtel
Date: Tue Feb 6 14:48:32 2018 +0100
netlink: ensure to loop over all netns in genlmsg\_multicast\_allns()
[ Upstream commit cb9f7a9a5c96a773bbc9c70660dc600cfff82f82 ]
Nowadays, nlmsg\_multicast() returns only 0 or -ESRCH but this was not the
case when commit 134e63756d5f was pushed.
However, there was no reason to stop the loop if a netns does not have
listeners.
Returns -ESRCH only if there was no listeners in all netns.
To avoid having the same problem in the future, I didn't take the
assumption that nlmsg\_multicast() returns only 0 or -ESRCH.
Fixes: 134e63756d5f ("genetlink: make netns aware")
CC: Johannes Berg
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 94522bee72fd4ba2a4f1b6dc3e7439dc8f4ce501
Author: Sabrina Dubroca
Date: Mon Feb 26 16:13:43 2018 +0100
net: ipv4: don't allow setting net.ipv4.route.min\_pmtu below 68
[ Upstream commit c7272c2f1229125f74f22dcdd59de9bbd804f1c8 ]
According to RFC 1191 sections 3 and 4, ICMP frag-needed messages
indicating an MTU below 68 should be rejected:
A host MUST never reduce its estimate of the Path MTU below 68
octets.
and (talking about ICMP frag-needed's Next-Hop MTU field):
This field will never contain a value less than 68, since every
router "must be able to forward a datagram of 68 octets without
fragmentation".
Furthermore, by letting net.ipv4.route.min\_pmtu be set to negative
values, we can end up with a very large PMTU when (-1) is cast into u32.
Let's also make ip\_rt\_min\_pmtu a u32, since it's only ever compared to
unsigned ints.
Reported-by: Jianlin Shi
Signed-off-by: Sabrina Dubroca
Reviewed-by: Stefano Brivio
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 65fe24fdbbe0f5292d3dd5201a49725d7be21d85
Author: Jakub Kicinski
Date: Mon Feb 12 21:35:31 2018 -0800
net: fix race on decreasing number of TX queues
[ Upstream commit ac5b70198adc25c73fba28de4f78adcee8f6be0b ]
netif\_set\_real\_num\_tx\_queues() can be called when netdev is up.
That usually happens when user requests change of number of
channels/rings with ethtool -L. The procedure for changing
the number of queues involves resetting the qdiscs and setting
dev->num\_tx\_queues to the new value. When the new value is
lower than the old one, extra care has to be taken to ensure
ordering of accesses to the number of queues vs qdisc reset.
Currently the queues are reset before new dev->num\_tx\_queues
is assigned, leaving a window of time where packets can be
enqueued onto the queues going down, leading to a likely
crash in the drivers, since most drivers don't check if TX
skbs are assigned to an active queue.
Fixes: e6484930d7c7 ("net: allocate tx queues in register\_netdevice")
Signed-off-by: Jakub Kicinski
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 2f9e04cad288e61d88cae6e4db441492ee685f33
Author: Arnd Bergmann
Date: Thu Feb 22 16:55:34 2018 +0100
ipv6 sit: work around bogus gcc-8 -Wrestrict warning
[ Upstream commit ca79bec237f5809a7c3c59bd41cd0880aa889966 ]
gcc-8 has a new warning that detects overlapping input and output arguments
in memcpy(). It triggers for sit\_init\_net() calling ipip6\_tunnel\_clone\_6rd(),
which is actually correct:
net/ipv6/sit.c: In function 'sit\_init\_net':
net/ipv6/sit.c:192:3: error: 'memcpy' source argument is the same as destination [-Werror=restrict]
The problem here is that the logic detecting the memcpy() arguments finds them
to be the same, but the conditional that tests for the input and output of
ipip6\_tunnel\_clone\_6rd() to be identical is not a compile-time constant.
We know that netdev\_priv(t->dev) is the same as t for a tunnel device,
and comparing "dev" directly here lets the compiler figure out as well
that 'dev == sitn->fb\_tunnel\_dev' when called from sit\_init\_net(), so
it no longer warns.
This code is old, so Cc stable to make sure that we don't get the warning
for older kernels built with new gcc.
Cc: Martin Sebor
Link: https://gcc.gnu.org/bugzilla/show\_bug.cgi?id=83456
Signed-off-by: Arnd Bergmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 830dd26a5397cee47ca4d622966cfb6d4ee69def
Author: Denis Du
Date: Sat Feb 24 16:51:42 2018 -0500
hdlc\_ppp: carrier detect ok, don't turn off negotiation
[ Upstream commit b6c3bad1ba83af1062a7ff6986d9edc4f3d7fc8e ]
Sometimes when physical lines have a just good noise to make the protocol
handshaking fail, but the carrier detect still good. Then after remove of
the noise, nobody will trigger this protocol to be start again to cause
the link to never come back. The fix is when the carrier is still on, not
terminate the protocol handshaking.
Signed-off-by: Denis Du
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7e70022d4b0b7738eeffa6873df6193ea2dd2d15
Author: Stefano Brivio
Date: Thu Feb 15 09:46:03 2018 +0100
fib\_semantics: Don't match route with mismatching tclassid
[ Upstream commit a8c6db1dfd1b1d18359241372bb204054f2c3174 ]
In fib\_nh\_match(), if output interface or gateway are passed in
the FIB configuration, we don't have to check next hops of
multipath routes to conclude whether we have a match or not.
However, we might still have routes with different realms
matching the same output interface and gateway configuration,
and this needs to cause the match to fail. Otherwise the first
route inserted in the FIB will match, regardless of the realms:
# ip route add 1.1.1.1 dev eth0 table 1234 realms 1/2
# ip route append 1.1.1.1 dev eth0 table 1234 realms 3/4
# ip route list table 1234
1.1.1.1 dev eth0 scope link realms 1/2
1.1.1.1 dev eth0 scope link realms 3/4
# ip route del 1.1.1.1 dev ens3 table 1234 realms 3/4
# ip route list table 1234
1.1.1.1 dev ens3 scope link realms 3/4
whereas route with realms 3/4 should have been deleted instead.
Explicitly check for fc\_flow passed in the FIB configuration
(this comes from RTA\_FLOW extracted by rtm\_to\_fib\_config()) and
fail matching if it differs from nh\_tclassid.
The handling of RTA\_FLOW for multipath routes later in
fib\_nh\_match() is still needed, as we can have multiple RTA\_FLOW
attributes that need to be matched against the tclassid of each
next hop.
v2: Check that fc\_flow is set before discarding the match, so
that the user can still select the first matching rule by
not specifying any realm, as suggested by David Ahern.
Reported-by: Jianlin Shi
Signed-off-by: Stefano Brivio
Acked-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5a12bc77d4fbbc045d7f4bf5f413cae67942d305
Author: Xin Long
Date: Mon Feb 12 17:15:40 2018 +0800
bridge: check brport attr show in brport\_show
[ Upstream commit 1b12580af1d0677c3c3a19e35bfe5d59b03f737f ]
Now br\_sysfs\_if file flush doesn't have attr show. To read it will
cause kernel panic after users chmod u+r this file.
Xiong found this issue when running the commands:
ip link add br0 type bridge
ip link add type veth
ip link set veth0 master br0
chmod u+r /sys/devices/virtual/net/veth0/brport/flush
timeout 3 cat /sys/devices/virtual/net/veth0/brport/flush
kernel crashed with NULL a pointer dereference call trace.
This patch is to fix it by return -EINVAL when brport\_attr->show
is null, just the same as the check for brport\_attr->store in
brport\_store().
Fixes: 9cf637473c85 ("bridge: add sysfs hook to flush forwarding table")
Reported-by: Xiong Zhou
Signed-off-by: Xin Long
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3f3437fbb2d8f780e84f507282d03facb4ccf248
Author: Ben Hutchings
Date: Thu Mar 8 15:59:07 2018 +0000
Revert "led: core: Fix brightness setting when setting delay\_off=0"
This reverts commit 20ac8f72514b3af8b62c520d55656ded865eff00, which
was commit 2b83ff96f51d0b039c4561b9f95c824d7bddb85c upstream.
The bug that it should fix was only introduced in Linux 4.7, and
in 4.4 it causes a regression.
Reported-by: Jacek Anaszewski
Cc: Matthieu CASTET
Signed-off-by: Ben Hutchings
Signed-off-by: Greg Kroah-Hartman
commit c2da3bb9cfab37eae4ad92d53f8e7a86d5747dd5
Author: Dan Carpenter
Date: Wed Feb 14 10:14:17 2018 +0300
x86/spectre: Fix an error message
commit 9de29eac8d2189424d81c0d840cd0469aa3d41c8 upstream.
If i == ARRAY\_SIZE(mitigation\_options) then we accidentally print
garbage from one space beyond the end of the mitigation\_options[] array.
Signed-off-by: Dan Carpenter
Cc: Andy Lutomirski
Cc: Borislav Petkov
Cc: David Woodhouse
Cc: Greg Kroah-Hartman
Cc: KarimAllah Ahmed
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: kernel-janitors@vger.kernel.org
Fixes: 9005c6834c0f ("x86/spectre: Simplify spectre\_v2 command line parsing")
Link: http://lkml.kernel.org/r/20180214071416.GA26677@mwanda
Signed-off-by: Ingo Molnar
Cc: Ben Hutchings
Signed-off-by: Greg Kroah-Hartman
commit dff485e36287be123a844dc9164ba0417cd34552
Author: Nathan Sullivan
Date: Mon Aug 15 17:20:14 2016 -0500
leds: do not overflow sysfs buffer in led\_trigger\_show
commit 3b9b95363c45365d606ad4bbba16acca75fdf6d3 upstream.
Per the documentation, use scnprintf instead of sprintf to ensure there
is never more than PAGE\_SIZE bytes of trigger names put into the
buffer.
Signed-off-by: Nathan Sullivan
Signed-off-by: Zach Brown
Signed-off-by: Jacek Anaszewski
Cc: Willy Tarreau
Cc: Vlastimil Babka
Signed-off-by: Greg Kroah-Hartman
commit 6bde094049bf3648882ff8fdfabd7871f40d3935
Author: Thomas Gleixner
Date: Wed Mar 7 18:36:43 2018 +0000
x86/apic/vector: Handle legacy irq data correctly
The backport of upstream commit 45d55e7bac40 ("x86/apic/vector: Fix off by
one in error path") missed to fixup the legacy interrupt data which is not
longer available upstream.
Handle legacy irq data correctly by clearing the legacy storage to prevent
use after free.
Fixes: 7fd133539289 ("x86/apic/vector: Fix off by one in error path") - 4.4.y
Fixes: c557481a9491 ("x86/apic/vector: Fix off by one in error path") - 4.9.y
Reported-by: Ben Hutchings
Signed-off-by: Thomas Gleixner
Signed-off-by: Ben Hutchings
Signed-off-by: Greg Kroah-Hartman
commit c86bfc7b7b01c4b98c29a39bd60e61fa8e337ebf
Author: Adam Ford
Date: Thu Jan 25 14:10:37 2018 -0600
ARM: dts: LogicPD Torpedo: Fix I2C1 pinmux
commit 74402055a2d3ec998a1ded599e86185a27d9bbf4 upstream.
The pinmuxing was missing for I2C1 which was causing intermittent issues
with the PMIC which is connected to I2C1. The bootloader did not quite
configure the I2C1 either, so when running at 2.6MHz, it was generating
errors at time.
This correctly sets the I2C1 pinmuxing so it can operate at 2.6MHz
Fixes: 687c27676151 ("ARM: dts: Add minimal support for LogicPD Torpedo
DM3730 devkit")
Signed-off-by: Adam Ford
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit aa75b56eb5406294a7eb6f0d57059d1cff5fd846
Author: Jan Kara
Date: Thu Jun 22 15:31:07 2017 +0200
btrfs: Don't clear SGID when inheriting ACLs
commit b7f8a09f8097db776b8d160862540e4fc1f51296 upstream.
When new directory 'DIR1' is created in a directory 'DIR0' with SGID bit
set, DIR1 is expected to have SGID bit set (and owning group equal to
the owning group of 'DIR0'). However when 'DIR0' also has some default
ACLs that 'DIR1' inherits, setting these ACLs will result in SGID bit on
'DIR1' to get cleared if user is not member of the owning group.
Fix the problem by moving posix\_acl\_update\_mode() out of
\_\_btrfs\_set\_acl() into btrfs\_set\_acl(). That way the function will not be
called when inheriting ACLs which is what we want as it prevents SGID
bit clearing and the mode has been properly set by posix\_acl\_create()
anyway.
Fixes: 073931017b49d9458aa351605b43a7e34598caef
CC: stable@vger.kernel.org
CC: linux-btrfs@vger.kernel.org
CC: David Sterba
Signed-off-by: Jan Kara
Signed-off-by: David Sterba
Signed-off-by: Nikolay Borisov
Signed-off-by: Greg Kroah-Hartman
commit 5fed0b3532cb69b27d286b27ea4377ea44e686e5
Author: Jiri Slaby
Date: Wed Mar 7 08:56:23 2018 +0100
x86/syscall: Sanitize syscall table de-references under speculation fix
In 4.4.118, we have commit c8961332d6da (x86/syscall: Sanitize syscall
table de-references under speculation), which is a backport of upstream
commit 2fbd7af5af86. But it fixed only the C part of the upstream patch
-- the IA32 sysentry. So it ommitted completely the assembly part -- the
64bit sysentry.
Fix that in this patch by explicit array\_index\_mask\_nospec written in
assembly. The same was used in lib/getuser.S.
However, to have "sbb" working properly, we have to switch from "cmp"
against (NR\_syscalls-1) to (NR\_syscalls), otherwise the last syscall
number would be "and"ed by 0. It is because the original "ja" relies on
"CF" or "ZF", but we rely only on "CF" in "sbb". That means: switch to
"jae" conditional jump too.
Final note: use rcx for mask as this is exactly what is overwritten by
the 4th syscall argument (r10) right after.
Reported-by: Jan Beulich
Cc: Linus Torvalds
Cc: Dan Williams
Cc: Thomas Gleixner
Cc: linux-arch@vger.kernel.org
Cc: kernel-hardening@lists.openwall.com
Cc: gregkh@linuxfoundation.org
Cc: Andy Lutomirski
Cc: alan@linux.intel.com
Cc: Jinpu Wang
Signed-off-by: Jiri Slaby
Signed-off-by: Greg Kroah-Hartman
commit 42f587fa77924878173843e83470ab7d3b807012
Author: Wanpeng Li
Date: Tue Feb 13 15:36:00 2018 +0100
KVM: mmu: Fix overlap between public and private memslots
commit b28676bb8ae4569cced423dc2a88f7cb319d5379 upstream.
Reported by syzkaller:
pte\_list\_remove: ffff9714eb1f8078 0->BUG
------------[ cut here ]------------
kernel BUG at arch/x86/kvm/mmu.c:1157!
invalid opcode: 0000 [#1] SMP
RIP: 0010:pte\_list\_remove+0x11b/0x120 [kvm]
Call Trace:
drop\_spte+0x83/0xb0 [kvm]
mmu\_page\_zap\_pte+0xcc/0xe0 [kvm]
kvm\_mmu\_prepare\_zap\_page+0x81/0x4a0 [kvm]
kvm\_mmu\_invalidate\_zap\_all\_pages+0x159/0x220 [kvm]
kvm\_arch\_flush\_shadow\_all+0xe/0x10 [kvm]
kvm\_mmu\_notifier\_release+0x6c/0xa0 [kvm]
? kvm\_mmu\_notifier\_release+0x5/0xa0 [kvm]
\_\_mmu\_notifier\_release+0x79/0x110
? \_\_mmu\_notifier\_release+0x5/0x110
exit\_mmap+0x15a/0x170
? do\_exit+0x281/0xcb0
mmput+0x66/0x160
do\_exit+0x2c9/0xcb0
? \_\_context\_tracking\_exit.part.5+0x4a/0x150
do\_group\_exit+0x50/0xd0
SyS\_exit\_group+0x14/0x20
do\_syscall\_64+0x73/0x1f0
entry\_SYSCALL64\_slow\_path+0x25/0x25
The reason is that when creates new memslot, there is no guarantee for new
memslot not overlap with private memslots. This can be triggered by the
following program:
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
long r[16];
int main()
{
void \*p = valloc(0x4000);
r[2] = open("/dev/kvm", 0);
r[3] = ioctl(r[2], KVM\_CREATE\_VM, 0x0ul);
uint64\_t addr = 0xf000;
ioctl(r[3], KVM\_SET\_IDENTITY\_MAP\_ADDR, &addr);
r[6] = ioctl(r[3], KVM\_CREATE\_VCPU, 0x0ul);
ioctl(r[3], KVM\_SET\_TSS\_ADDR, 0x0ul);
ioctl(r[6], KVM\_RUN, 0);
ioctl(r[6], KVM\_RUN, 0);
struct kvm\_userspace\_memory\_region mr = {
.slot = 0,
.flags = KVM\_MEM\_LOG\_DIRTY\_PAGES,
.guest\_phys\_addr = 0xf000,
.memory\_size = 0x4000,
.userspace\_addr = (uintptr\_t) p
};
ioctl(r[3], KVM\_SET\_USER\_MEMORY\_REGION, &mr);
return 0;
}
This patch fixes the bug by not adding a new memslot even if it
overlaps with private memslots.
Reported-by: Dmitry Vyukov
Cc: Paolo Bonzini
Cc: Radim Krčmář
Cc: Dmitry Vyukov
Cc: Eric Biggers
Cc: stable@vger.kernel.org
Signed-off-by: Wanpeng Li
commit d95280bd8c786ac5d2f379d451bcbdbdf2211e44
Author: Ulf Magnusson
Date: Mon Feb 5 02:21:13 2018 +0100
ARM: mvebu: Fix broken PL310\_ERRATA\_753970 selects
commit 8aa36a8dcde3183d84db7b0d622ffddcebb61077 upstream.
The MACH\_ARMADA\_375 and MACH\_ARMADA\_38X boards select ARM\_ERRATA\_753970,
but it was renamed to PL310\_ERRATA\_753970 by commit fa0ce4035d48 ("ARM:
7162/1: errata: tidy up Kconfig options for PL310 errata workarounds").
Fix the selects to use the new name.
Discovered with the
https://github.com/ulfalizer/Kconfiglib/blob/master/examples/list\_undefined.py
script.
Fixes: fa0ce4035d48 ("ARM: 7162/1: errata: tidy up Kconfig options for
PL310 errata workarounds"
cc: stable@vger.kernel.org
Signed-off-by: Ulf Magnusson
Signed-off-by: Gregory CLEMENT
Signed-off-by: Greg Kroah-Hartman
commit f78124cca73456381d92282d9c9f3234a4474a7c
Author: Rasmus Villemoes
Date: Fri Feb 16 13:20:48 2018 -0800
nospec: Allow index argument to have const-qualified type
commit b98c6a160a057d5686a8c54c79cc6c8c94a7d0c8 upstream.
The last expression in a statement expression need not be a bare
variable, quoting gcc docs
The last thing in the compound statement should be an expression
followed by a semicolon; the value of this subexpression serves as the
value of the entire construct.
and we already use that in e.g. the min/max macros which end with a
ternary expression.
This way, we can allow index to have const-qualified type, which will in
some cases avoid the need for introducing a local copy of index of
non-const qualified type. That, in turn, can prevent readers not
familiar with the internals of array\_index\_nospec from wondering about
the seemingly redundant extra variable, and I think that's worthwhile
considering how confusing the whole \_nospec business is.
The expression \_i&\_mask has type unsigned long (since that is the type
of \_mask, and the BUILD\_BUG\_ONs guarantee that \_i will get promoted to
that), so in order not to change the type of the whole expression, add
a cast back to typeof(\_i).
Signed-off-by: Rasmus Villemoes
Signed-off-by: Dan Williams
Acked-by: Linus Torvalds
Cc: Andy Lutomirski
Cc: Arjan van de Ven
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: David Woodhouse
Cc: Greg Kroah-Hartman
Cc: Josh Poimboeuf
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Cc: linux-arch@vger.kernel.org
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/151881604837.17395.10812767547837568328.stgit@dwillia2-desk3.amr.corp.intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 0dfc2fb61c79dbd4e99152525e193ae054dc86d3
Author: Mauro Carvalho Chehab
Date: Sat Feb 10 06:14:10 2018 -0500
media: m88ds3103: don't call a non-initalized function
commit b9c97c67fd19262c002d94ced2bfb513083e161e upstream.
If m88d3103 chip ID is not recognized, the device is not initialized.
However, it returns from probe without any error, causing this OOPS:
[ 7.689289] Unable to handle kernel NULL pointer dereference at virtual address 00000000
[ 7.689297] pgd = 7b0bd7a7
[ 7.689302] [00000000] \*pgd=00000000
[ 7.689318] Internal error: Oops: 80000005 [#1] SMP ARM
[ 7.689322] Modules linked in: dvb\_usb\_dvbsky(+) m88ds3103 dvb\_usb\_v2 dvb\_core videobuf2\_vmalloc videobuf2\_memops videobuf2\_core crc32\_arm\_ce videodev media
[ 7.689358] CPU: 3 PID: 197 Comm: systemd-udevd Not tainted 4.15.0-mcc+ #23
[ 7.689361] Hardware name: BCM2835
[ 7.689367] PC is at 0x0
[ 7.689382] LR is at m88ds3103\_attach+0x194/0x1d0 [m88ds3103]
[ 7.689386] pc : [<00000000>] lr : [] psr: 60000013
[ 7.689391] sp : ed8e5c20 ip : ed8c1e00 fp : ed8945c0
[ 7.689395] r10: ed894000 r9 : ed894378 r8 : eda736c0
[ 7.689400] r7 : ed894070 r6 : ed8e5c44 r5 : bf0bb040 r4 : eda77600
[ 7.689405] r3 : 00000000 r2 : 00000000 r1 : 00000000 r0 : eda77600
[ 7.689412] Flags: nZCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
[ 7.689417] Control: 10c5383d Table: 2d8e806a DAC: 00000051
[ 7.689423] Process systemd-udevd (pid: 197, stack limit = 0xe9dbfb63)
[ 7.689428] Stack: (0xed8e5c20 to 0xed8e6000)
[ 7.689439] 5c20: ed853a80 eda73640 ed894000 ed8942c0 ed853a80 bf0b9e98 ed894070 bf0b9f10
[ 7.689449] 5c40: 00000000 00000000 bf08c17c c08dfc50 00000000 00000000 00000000 00000000
[ 7.689459] 5c60: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689468] 5c80: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689479] 5ca0: 00000000 00000000 ed8945c0 ed8942c0 ed894000 ed894830 bf0b9e98 00000000
[ 7.689490] 5cc0: ed894378 bf0a3cb4 bf0bc3b0 0000533b ed920540 00000000 00000034 bf0a6434
[ 7.689500] 5ce0: ee952070 ed826600 bf0a7038 bf0a2dd8 00000001 bf0a6768 bf0a2f90 ed8943c0
[ 7.689511] 5d00: 00000000 c08eca68 ed826620 ed826620 00000000 ee952070 bf0bc034 ee952000
[ 7.689521] 5d20: ed826600 bf0bb080 ffffffed c0aa9e9c c0aa9dac ed826620 c16edf6c c168c2c8
[ 7.689531] 5d40: c16edf70 00000000 bf0bc034 0000000d 00000000 c08e268c bf0bb080 ed826600
[ 7.689541] 5d60: bf0bc034 ed826654 ed826620 bf0bc034 c164c8bc 00000000 00000001 00000000
[ 7.689553] 5d80: 00000028 c08e2948 00000000 bf0bc034 c08e2848 c08e0778 ee9f0a58 ed88bab4
[ 7.689563] 5da0: bf0bc034 ed90ba80 c168c1f0 c08e1934 bf0bb3bc c17045ac bf0bc034 c164c8bc
[ 7.689574] 5dc0: bf0bc034 bf0bb3bc ed91f564 c08e34ec bf0bc000 c164c8bc bf0bc034 c0aa8dc4
[ 7.689584] 5de0: ffffe000 00000000 bf0bf000 ed91f600 ed91f564 c03021e4 00000001 00000000
[ 7.689595] 5e00: c166e040 8040003f ed853a80 bf0bc448 00000000 c1678174 ed853a80 f0f22000
[ 7.689605] 5e20: f0f21fff 8040003f 014000c0 ed91e700 ed91e700 c16d8e68 00000001 ed91e6c0
[ 7.689615] 5e40: bf0bc400 00000001 bf0bc400 ed91f564 00000001 00000000 00000028 c03c9a24
[ 7.689625] 5e60: 00000001 c03c8c94 ed8e5f50 ed8e5f50 00000001 bf0bc400 ed91f540 c03c8cb0
[ 7.689637] 5e80: bf0bc40c 00007fff bf0bc400 c03c60b0 00000000 bf0bc448 00000028 c0e09684
[ 7.689647] 5ea0: 00000002 bf0bc530 c1234bf8 bf0bc5dc bf0bc514 c10ebbe8 ffffe000 bf000000
[ 7.689657] 5ec0: 00011538 00000000 ed8e5f48 00000000 00000000 00000000 00000000 00000000
[ 7.689666] 5ee0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689676] 5f00: 00000000 00000000 7fffffff 00000000 00000013 b6e55a18 0000017b c0309104
[ 7.689686] 5f20: ed8e4000 00000000 00510af0 c03c9430 7fffffff 00000000 00000003 00000000
[ 7.689697] 5f40: 00000000 f0f0f000 00011538 00000000 f0f107b0 f0f0f000 00011538 f0f1fdb8
[ 7.689707] 5f60: f0f1fbe8 f0f1b974 00004000 000041e0 bf0bc3d0 00000001 00000000 000024c4
[ 7.689717] 5f80: 0000002d 0000002e 00000019 00000000 00000010 00000000 16894000 00000000
[ 7.689727] 5fa0: 00000000 c0308f20 16894000 00000000 00000013 b6e55a18 00000000 b6e5652c
[ 7.689737] 5fc0: 16894000 00000000 00000000 0000017b 00020000 00508110 00000000 00510af0
[ 7.689748] 5fe0: bef68948 bef68938 b6e4d3d0 b6d32590 60000010 00000013 00000000 00000000
[ 7.689790] [] (m88ds3103\_attach [m88ds3103]) from [] (dvbsky\_s960c\_attach+0x78/0x280 [dvb\_usb\_dvbsky])
[ 7.689821] [] (dvbsky\_s960c\_attach [dvb\_usb\_dvbsky]) from [] (dvb\_usbv2\_probe+0xa3c/0x1024 [dvb\_usb\_v2])
[ 7.689849] [] (dvb\_usbv2\_probe [dvb\_usb\_v2]) from [] (usb\_probe\_interface+0xf0/0x2a8)
[ 7.689869] [] (usb\_probe\_interface) from [] (driver\_probe\_device+0x2f8/0x4b4)
[ 7.689881] [] (driver\_probe\_device) from [] (\_\_driver\_attach+0x100/0x11c)
[ 7.689895] [] (\_\_driver\_attach) from [] (bus\_for\_each\_dev+0x4c/0x9c)
[ 7.689909] [] (bus\_for\_each\_dev) from [] (bus\_add\_driver+0x1c0/0x264)
[ 7.689919] [] (bus\_add\_driver) from [] (driver\_register+0x78/0xf4)
[ 7.689931] [] (driver\_register) from [] (usb\_register\_driver+0x70/0x134)
[ 7.689946] [] (usb\_register\_driver) from [] (do\_one\_initcall+0x44/0x168)
[ 7.689963] [] (do\_one\_initcall) from [] (do\_init\_module+0x64/0x1f4)
[ 7.689979] [] (do\_init\_module) from [] (load\_module+0x20a0/0x25c8)
[ 7.689993] [] (load\_module) from [] (SyS\_finit\_module+0xb4/0xec)
[ 7.690007] [] (SyS\_finit\_module) from [] (ret\_fast\_syscall+0x0/0x54)
[ 7.690018] Code: bad PC value
This may happen on normal circumstances, if, for some reason, the demod
hangs and start returning an invalid chip ID:
[ 10.394395] m88ds3103 3-0068: Unknown device. Chip\_id=00
So, change the logic to cause probe to fail with -ENODEV, preventing
the OOPS.
Detected while testing DVB MMAP patches on Raspberry Pi 3 with
DVBSky S960CI.
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit baf311edeed221183eb5ed51ebf8d7e849f35b0c
Author: Viresh Kumar
Date: Fri Feb 23 09:38:28 2018 +0530
cpufreq: s3c24xx: Fix broken s3c\_cpufreq\_init()
commit 0373ca74831b0f93cd4cdbf7ad3aec3c33a479a5 upstream.
commit a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
accidentally broke cpufreq on s3c2410 and s3c2412.
These two platforms don't have a CPU frequency table and used to skip
calling cpufreq\_table\_validate\_and\_show() for them. But with the
above commit, we started calling it unconditionally and that will
eventually fail as the frequency table pointer is NULL.
Fix this by calling cpufreq\_table\_validate\_and\_show() conditionally
again.
Fixes: a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
Cc: 3.13+  # v3.13+
Signed-off-by: Viresh Kumar
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 4fdc12f6d818b50b459be27692072e5d6447404c
Author: Hans de Goede
Date: Thu Feb 22 14:20:35 2018 +0100
ALSA: hda: Add a power\_save blacklist
commit 1ba8f9d308174e647b864c36209b4d7934d99888 upstream.
On some boards setting power\_save to a non 0 value leads to clicking /
popping sounds when ever we enter/leave powersaving mode. Ideally we would
figure out how to avoid these sounds, but that is not always feasible.
This commit adds a blacklist for devices where powersaving is known to
cause problems and disables it on these devices.
Note I tried to put this blacklist in userspace first:
https://github.com/systemd/systemd/pull/8128
But the systemd maintainers rightfully pointed out that it would be
impossible to then later remove entries once we actually find a way to
make power-saving work on listed boards without issues. Having this list
in the kernel will allow removal of the blacklist entry in the same commit
which fixes the clicks / plops.
The blacklist only applies to the default power\_save module-option value,
if a user explicitly sets the module-option then the blacklist is not
used.
[ added an ifdef CONFIG\_PM for the build error -- tiwai]
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1525104
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=198611
Cc: stable@vger.kernel.org
Signed-off-by: Hans de Goede
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit b43e8110ca018ecb92e95ff9048df7ab71327558
Author: Erik Veijola
Date: Fri Feb 23 14:06:52 2018 +0200
ALSA: usb-audio: Add a quirck for B&W PX headphones
commit 240a8af929c7c57dcde28682725b29cf8474e8e5 upstream.
The capture interface doesn't work and the playback interface only
supports 48 kHz sampling rate even though it advertises more rates.
Signed-off-by: Erik Veijola
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 9cc4d1f51dd14ad6a997237995347f269eb5551a
Author: Jeremy Boone
Date: Thu Feb 8 12:31:16 2018 -0800
tpm\_i2c\_nuvoton: fix potential buffer overruns caused by bit glitches on the bus
commit f9d4d9b5a5ef2f017bc344fb65a58a902517173b upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 309de32e548ded6c4366b8f4bd83dfb150c3a357
Author: Jeremy Boone
Date: Thu Feb 8 12:30:01 2018 -0800
tpm\_i2c\_infineon: fix potential buffer overruns caused by bit glitches on the bus
commit 9b8cb28d7c62568a5916bdd7ea1c9176d7f8f2ed upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit f9accc380bd69b180a5ef558f9b1a6b61edeba09
Author: Jeremy Boone
Date: Thu Feb 8 12:29:09 2018 -0800
tpm: st33zp24: fix potential buffer overruns caused by bit glitches on the bus
commit 6d24cd186d9fead3722108dec1b1c993354645ff upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman


=== Content from bugzilla.redhat.com_7fc3d6a7_20250126_104640.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1542494)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1542494)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1542494)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1542494

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

RHEL Engineering is moving the tracking of its product development work on RHEL 6 through RHEL 9 to Red Hat Jira ([**issues.redhat.com**](https://issues.redhat.com)). If you're a Red Hat customer, please continue to file support cases via the [**Red Hat customer portal**](https://access.redhat.com/support/cases/). If you're not, please head to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira and file new tickets here. Individual Bugzilla bugs in the statuses "**NEW**", "**ASSIGNED**", and "**POST**" are being migrated throughout September 2023. Bugs of Red Hat partners with an assigned Engineering Partner Manager (EPM) are migrated in late September as per pre-agreed dates. Bugs against components "**kernel**", "**kernel-rt**", and "**kpatch**" are only migrated if still in "**NEW**" or "**ASSIGNED**". If you cannot log in to RH Jira, please consult [**article #7032570**](https://access.redhat.com/articles/7032570). That failing, please send an e-mail to the RH Jira admins at **rh-issues@redhat.com** to troubleshoot your issue as a user management inquiry. The email creates a ServiceNow ticket with Red Hat. Individual Bugzilla bugs that are migrated will be moved to status "**CLOSED**", resolution "**MIGRATED**", and set with "**MigratedToJIRA**" in "**Keywords**". The link to the successor Jira issue will be found under "**Links**", have a little "two-footprint" icon next to it, and direct you to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira (issue links are of type "**https://issues.redhat.com/browse/RHEL-XXXX**", where "**X**" is a digit). This same link will be available in a blue banner at the top of the page informing you that that bug has been migrated.

[**Bug 1542494**](show_bug.cgi?id=1542494)
- VMs with NVMe devices passed through sometimes fail to be launched

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VMs with NVMe devices passed through sometimes fail to be launched

| | [Keywords](describekeywords.cgi): | Reopened | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat Enterprise Linux 7 | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat Enterprise Linux 7 "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | kernel | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- Storage      Multiple Devices (MD)      Device Mapper          Cache          Core          Crypt          Era (Technology Preview)          Multipath          RAID          Snapshots          Thin Provisioning          Other device-mapper      Persistent Memory (NVDIMM)      Storage Drivers      Kernel Target (LIO)      Block Layer      Storage - Other  File Systems      VFS      GFS/GFS2      XFS      overlayfs      ext\*      Btrfs      NFS      CIFS      AutoFS      File Systems - Other  Networking      NIC Drivers      Bluetooth      Wifi      Protocol          sctp          igmp/mld          tcp          udp          arp/icmp      IPv6      Vlan      Bonding      Team      Bridge      OVS      Tunnel      IPSec      Netfilter      PTP      Misc  Power Management      ACPI      UEFI      Suspend-Resume-Hibernate  Desktop      Graphics      Audio      V4L      fbdev      USB      Desktop Other  Virtualization      Xen      ESXi      Hyper-V      KVM      aliyun\_instance      Public Cloud Enablement      Other  Debugging/Tracing      kexec - kdump      Utrace/Uprobe/Ptrace      Ftrace      Perf      EDAC/HERM      Oprofile      Systemtap  Platform Enablement      s390x      PCI subsystem      Partner Firmware      x86\_64      ppc64      aarch64      Bluetooth      Thunderbolt      NVMe  RDMA      Infiniband      RoCE      iWarp      Omni-Path  Security      ASLR      IMA      KASLR      SELinux      Audit      TPM      Key Management      Other  CephFS  BPF  Control Groups  Crypto  Livepatch  Locking/lockdep  Memory Management  Namespace  Process management  Scheduler  IOMMU  kabi-whitelists  Packaging  Other | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.4 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | unspecified | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | pre-dev-freeze | | [Target Release](page.cgi?id=fields.html#target_release): | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Alex Williamson | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | CongLi | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | aos-scalability-39 | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1542494&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1542494&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2018-02-06 13:03 UTC by Jiří Mencák | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2018-10-30 08:38 UTC ([History](show_activity.cgi?id=1542494)) | | [CC List:](page.cgi?id=fields.html#cclist) | 31 users (show)  akrzos alex.williamson berrange brdeoliv chayang chhu coli dasmith dyuan eglynn jdenemar jeder jmencak jsuchane juzhang kchamart knoel laine lmiksik michen qzhang rbalakri rbryant sbauza sferdjao sgordon srevivo virt-maint vromanso xuzhang yfu | | Fixed In Version: | kernel-3.10.0-942.el7 | | | Doc Type: | If docs needed, set a value | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2018-10-30 08:37:27 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**Nova compute log file from the physical host, where the instance failed to launch.**](attachment.cgi?id=1392047 "View the content of the attachment") (294.37 KB, text/plain)  [2018-02-06 13:03 UTC](#attach_1392047 "Go to the comment associated with the attachment"), Jiří Mencák | *no flags* | [Details](attachment.cgi?id=1392047&action=edit) | | [**lspci -vvv of "Samsung Electronics Co Ltd NVMe SSD Controller"**](attachment.cgi?id=1394172 "View the content of the attachment") (3.84 KB, text/plain)  [2018-02-10 10:22 UTC](#attach_1394172 "Go to the comment associated with the attachment"), Jiří Mencák | *no flags* | [Details](attachment.cgi?id=1394172&action=edit) | | [View All](attachment.cgi?bugid=1542494&action=viewall) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2018:3083](https://access.redhat.com/errata/RHSA-2018%3A3083) | 0 | None | None | None | 2018-10-30 08:38:39 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1542494#c0)  Jiří Mencák    2018-02-06 13:03:01 UTC  ``` Created [attachment 1392047](attachment.cgi?id=1392047 "Nova compute log file from the physical host, where the instance failed to launch.") [[details]](attachment.cgi?id=1392047&action=edit "Nova compute log file from the physical host, where the instance failed to launch.") Nova compute log file from the physical host, where the instance failed to launch.  Description of problem: On OSP11, VMs with NVMe devices passed through, VMs sometimes fail to be launched:  Version-Release number of selected component (if applicable): OSP11  How reproducible: Always   Steps to Reproduce: 1. Create a small OCP11 environment with at least 1 baremetal host allowing NVMe disk passthrough. 2. Create an openstack server/VM with the NVMe device, this should work and the VM land on the baremetal host containing the passed-through NVMe device. 3. "openstack server delete" the newly created VM. 4. Try to 2. again.  This will likely fail.  Nova log attached (56700a77-c88e-40ce-9748-ab8373a06bf1).  Actual results: The VM fails to be created.  A work-around seems to be reboot of the physical host and 5-10 minut wait before retrying.  Expected results: The VM is created successfully with no workarounds.  Additional info: [stack@b08-h02-r620 jm]$ openstack server show 56700a77-c88e-40ce-9748-ab8373a06bf1 +-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+ | Field                               | Value                                                                                                                                                 | +-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+ | OS-DCF:diskConfig                   | MANUAL                                                                                                                                                | | OS-EXT-AZ:availability_zone         |                                                                                                                                                       | | OS-EXT-SRV-ATTR:host                | None                                                                                                                                                  | | OS-EXT-SRV-ATTR:hypervisor_hostname | None                                                                                                                                                  | | OS-EXT-SRV-ATTR:instance_name       | instance-0000130b                                                                                                                                     | | OS-EXT-STS:power_state              | NOSTATE                                                                                                                                               | | OS-EXT-STS:task_state               | None                                                                                                                                                  | | OS-EXT-STS:vm_state                 | error                                                                                                                                                 | | OS-SRV-USG:launched_at              | None                                                                                                                                                  | | OS-SRV-USG:terminated_at            | None                                                                                                                                                  | | accessIPv4                          |                                                                                                                                                       | | accessIPv6                          |                                                                                                                                                       | | addresses                           |                                                                                                                                                       | | config_drive                        |                                                                                                                                                       | | created                             | 2018-02-06T12:08:17Z                                                                                                                                  | | fault                               | {u'message': u'No valid host was found. There are not enough hosts available.', u'code': 500, u'details': u'  File "/usr/lib/python2.7/site-          | |                                     | packages/nova/conductor/manager.py", line 528, in build_instances\n    context, request_spec, filter_properties)\n  File "/usr/lib/python2.7/site-    | |                                     | packages/nova/conductor/manager.py", line 599, in _schedule_instances\n    hosts = self.scheduler_client.select_destinations(context, spec_obj)\n     | |                                     | File "/usr/lib/python2.7/site-packages/nova/scheduler/utils.py", line 371, in wrapped\n    return func(*args, **kwargs)\n  File "/usr/lib/python2.7   | |                                     | /site-packages/nova/scheduler/client/__init__.py", line 51, in select_destinations\n    return self.queryclient.select_destinations(context,          | |                                     | spec_obj)\n  File "/usr/lib/python2.7/site-packages/nova/scheduler/client/__init__.py", line 37, in __run_method\n    return getattr(self.instance,   | |                                     | __name)(*args, **kwargs)\n  File "/usr/lib/python2.7/site-packages/nova/scheduler/client/query.py", line 32, in select_destinations\n    return       | |                                     | self.scheduler_rpcapi.select_destinations(context, spec_obj)\n  File "/usr/lib/python2.7/site-packages/nova/scheduler/rpcapi.py", line 129, in        | |                                     | select_destinations\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\n  File "/usr/lib/python2.7/site-                               | |                                     | packages/oslo_messaging/rpc/client.py", line 169, in call\n    retry=self.retry)\n  File "/usr/lib/python2.7/site-                                    | |                                     | packages/oslo_messaging/transport.py", line 97, in _send\n    timeout=timeout, retry=retry)\n  File "/usr/lib/python2.7/site-                         | |                                     | packages/oslo_messaging/_drivers/amqpdriver.py", line 578, in send\n    retry=retry)\n  File "/usr/lib/python2.7/site-                                | |                                     | packages/oslo_messaging/_drivers/amqpdriver.py", line 569, in _send\n    raise result\n', u'created': u'2018-02-06T12:08:45Z'}                        | | flavor                              | large-pci (a27f603b-ef23-4d17-8302-7c324b660711)                                                                                                      | | hostId                              |                                                                                                                                                       | | id                                  | 56700a77-c88e-40ce-9748-ab8373a06bf1                                                                                                                  | | image                               | ocp-3.9-rhel (8a9cccd9-71b4-49e7-b500-b2ab4e1d92ff)                                                                                                   | | key_name                            | id_rsa_perf                                                                                                                                           | | name                                | jm-pci-pass-01                                                                                                                                        | | project_id                          | 508d3035cc2b4c9f9d154302afd03ff2                                                                                                                      | | properties                          |                                                                                                                                                       | | status                              | ERROR                                                                                                                                                 | | updated                             | 2018-02-06T12:08:50Z                                                                                                                                  | | user_id                             | a042dcdcf9e84e78a9e96620814b1a4c                                                                                                                      | | volumes_attached                    |                                                                                                                                                       | +-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+   ```  [Comment 1](show_bug.cgi?id=1542494#c1)  Jiří Mencák    2018-02-08 14:51:37 UTC  ``` Some additional logs from libvirtd:  ./messages:Feb  6 12:05:42 overcloud-1029pcompute-1 libvirtd: 2018-02-06 12:05:42.743+0000: 3387: error : virPCIGetHeaderType:3115 : internal error: Unknown PCI header type '127' ./messages:Feb  6 12:05:42 overcloud-1029pcompute-1 libvirtd: 2018-02-06 12:05:42.744+0000: 3387: error : virHostdevReAttachPCIDevices:1054 : Failed to reset PCI device: internal error: Unknown PCI header type '127' ./messages:Feb  6 12:07:28 overcloud-1029pcompute-1 libvirtd: 2018-02-06 12:07:28.398+0000: 3386: error : virPCIGetHeaderType:3115 : internal error: Unknown PCI header type '127'   ```  [Comment 2](show_bug.cgi?id=1542494#c2)  Daniel Berrangé    2018-02-08 14:55:38 UTC  ``` Based on that error message, it could well be a libvirt bug. At least probably need someone who understands PCI to investigate it.   ```  [Comment 3](show_bug.cgi?id=1542494#c3)  Jiří Mencák    2018-02-08 20:26:16 UTC  ``` Trying to narrow this down a bit.  When "lspci -vn" for the NVMe device on the hypervisor shows:  01:00.0 0108: 144d:a804 (prog-if 02 [NVM Express])         Subsystem: 144d:a801         Flags: bus master, fast devsel, latency 0, IRQ 16, NUMA node 0         Memory at 9d100000 (64-bit, non-prefetchable) [size=16K]         Capabilities: [40] Power Management version 3         Capabilities: [50] MSI: Enable- Count=1/32 Maskable- 64bit+         Capabilities: [70] Express Endpoint, MSI 00         Capabilities: [b0] MSI-X: Enable+ Count=8 Masked-         Capabilities: [100] Advanced Error Reporting         Capabilities: [148] Device Serial Number 00-00-00-00-00-00-00-00         Capabilities: [158] Power Budgeting <?>         Capabilities: [168] #19         Capabilities: [188] Latency Tolerance Reporting         Capabilities: [190] L1 PM Substates         Kernel driver in use: vfio-pci         Kernel modules: nvme  OpenStack doesn't have a problem launching a VM with the NVMe device passed through.  This is the case after a fresh reboot.  When the VM is deleted (openstack server delete), this is what I see on the hypervisor "lspci -vn" for the NVMe device:  01:00.0 0108: 144d:a804 (rev ff) (prog-if ff)         !!! Unknown header type 7f         Kernel driver in use: vfio-pci         Kernel modules: nvme  Any subsequent attempts to create a VM with the device in this state will fail.   ```  [Comment 5](show_bug.cgi?id=1542494#c5)  Alex Williamson    2018-02-09 21:36:42 UTC  ``` (In reply to jmencak from [comment #1](show_bug.cgi?id=1542494#c1)) > Some additional logs from libvirtd: >  > ./messages:Feb  6 12:05:42 overcloud-1029pcompute-1 libvirtd: 2018-02-06 > 12:05:42.743+0000: 3387: error : virPCIGetHeaderType:3115 : internal error: > Unknown PCI header type '127' > ./messages:Feb  6 12:05:42 overcloud-1029pcompute-1 libvirtd: 2018-02-06 > 12:05:42.744+0000: 3387: error : virHostdevReAttachPCIDevices:1054 : Failed > to reset PCI device: internal error: Unknown PCI header type '127' > ./messages:Feb  6 12:07:28 overcloud-1029pcompute-1 libvirtd: 2018-02-06 > 12:07:28.398+0000: 3386: error : virPCIGetHeaderType:3115 : internal error: > Unknown PCI header type '127'  Header type is an 8-bit field with bit 7 reserved for identifying multi-function devices and the remaining bits used for defining the header layout of the remainder of config space.  Anything above a value of 2 here is undefined.  A value of 127 indicates that -1 is read from PCI config space and as with private [comment 3](show_bug.cgi?id=1542494#c3), we can see that the device no longer responds to config accesses.  Often when this occurs it means that the device failed to return after reset.  There's not enough information provided to determine what sort of reset vfio might be attempting on the device.  Please provide lspci -vvv for the device.  144d:a804 is a Samsung "NVMe SSD Controller SM961/PM961".  We have other reports of Samsung NVMe controllers also failing with assignment, see [bug 1500825](show_bug.cgi?id=1500825).  I have a Samsung EVO 960 NVMe enroute for testing, I wish I'd seen this bug previously to opt specifically for an SM961/PM961 device.   ```  [Comment 6](show_bug.cgi?id=1542494#c6)  Jiří Mencák    2018-02-10 10:22:18 UTC  ``` Created [attachment 1394172](attachment.cgi?id=1394172 "lspci -vvv of \"Samsung Electronics Co Ltd NVMe SSD Controller\"") [[details]](attachment.cgi?id=1394172&action=edit "lspci -vvv of \"Samsung Electronics Co Ltd NVMe SSD Controller\"") lspci -vvv of "Samsung Electronics Co Ltd NVMe SSD Controller"   ```  [Comment 7](show_bug.cgi?id=1542494#c7)  Jiří Mencák    2018-02-10 11:10:35 UTC  ``` Unchecking the private [comment #3](show_bug.cgi?id=1542494#c3).  I've managed to work-around the problem with PCI device by first stopping the VMs by "openstack server stop <server_id>" and then "openstack server delete <server_id>".  That way the PCI device never enters "!!! Unknown header type 7f" state.  Similarly, with "virsh shutdown <server_id>" I've never seen the PCI device enter the "failed" state, however I did see it enter the state every time I simply "virsh destroy <server_id> --graceful".  However, this bug is likely to be more than just the issues with the PCI device.  "openstack server delete <server_id>" can leave virsh instances on the computes both either "shut off" or "running" depending whether they were first stopped by "openstack server stop <server_id>" or not respectively, while the nova database is already updated with the "vm_state" == "deleted" (which is clearly not the case).   ```  [Comment 8](show_bug.cgi?id=1542494#c8)  Jiří Mencák    2018-02-10 20:12:47 UTC  ``` Even though there are available hosts with valid/available PCI devices to be passed through (and also nova DB confirms that):  MariaDB [nova]> select compute_node_id, address, product_id, vendor_id, status from pci_devices; +-----------------+--------------+------------+-----------+-----------+ | compute_node_id | address      | product_id | vendor_id | status    | +-----------------+--------------+------------+-----------+-----------+ |              14 | 0000:01:00.0 | a804       | 144d      | allocated | |              17 | 0000:01:00.0 | a804       | 144d      | available | |              20 | 0000:01:00.0 | a804       | 144d      | allocated | +-----------------+--------------+------------+-----------+-----------+ 3 rows in set (0.00 sec)  pci_passthrough_filter.py can fail with  2018-02-10 20:00:21.122 235395 INFO nova.filters [req-ccb2389d-9e1c-4db7-8caa-0a3a9ec00812 a042dcdcf9e84e78a9e96620814b1a4c 508d3035cc2b4c9f9d154302afd03ff2 - - -] Filter PciPassthroughFilter  returned 0 hosts 2018-02-10 20:00:21.124 235395 INFO nova.filters [req-ccb2389d-9e1c-4db7-8caa-0a3a9ec00812 a042dcdcf9e84e78a9e96620814b1a4c 508d3035cc2b4c9f9d154302afd03ff2 - - -] Filtering removed all hosts for the request with instance ID '83fd30cd-99ab-44d6-ba0c-760145bd43a8'. Filter results: ['RetryFilter: (start: 35, end: 35)', 'AvailabilityZoneFilter: (start: 35, end: 35)', 'RamFilter: (start: 35, end: 35)', 'DiskFilter: (start: 35, end: 35)', 'ComputeFilter: (start: 35, end: 17)', 'ComputeCapabilitiesFilter: (start: 17, end: 17)', 'ImagePropertiesFilter: (start: 17, end: 17)', 'ServerGroupAntiAffinityFilter: (start: 17, end: 17)', 'ServerGroupAffinityFilter: (start: 17, end: 17)', 'PciPassthroughFilter: (start: 17, end: 0)']  This is why I say there is likely to be more problems than just the issues with the PCI device itself.   ```  [Comment 9](show_bug.cgi?id=1542494#c9)  Jiri Denemark    2018-02-12 17:04:42 UTC  ``` This doesn't seem to be a libvirt bug given that lspci shows the same result. However, it's possible that libvirt does something it shouldn't do or doen't do something it should do which could cause this.  From [comment 7](show_bug.cgi?id=1542494#c7) it looks like the way a domain is killed matters: virsh shutdown vs. virsh destroy.  What is "openstack server delete" doing? Is it just deleting the domain from openstack's database or is it actually killing it in some way. [Comment 7](show_bug.cgi?id=1542494#c7) suggests it doesn't actually kill the domain, but shouldn't the domain remain running in this case?   ```  [Comment 10](show_bug.cgi?id=1542494#c10)  Jiří Mencák    2018-02-12 18:34:13 UTC  ``` (In reply to Jiri Denemark from [comment #9](show_bug.cgi?id=1542494#c9)) > This doesn't seem to be a libvirt bug given that lspci shows the same > result. Same result?  I submitted the "lspci -vvv" result of a functional/healthy PCI device.  Here is "lspci -vvv" of the "failed" PCI device, after "virsh destroy <server_id>": [root@overcloud-1029pcompute-2 heat-admin]# lspci -vvv -s 0000:01: 01:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961 (rev ff) (prog-if ff)         !!! Unknown header type 7f         Kernel driver in use: vfio-pci         Kernel modules: nvme  > However, it's possible that libvirt does something it shouldn't do > or doen't do something it should do which could cause this. >  > From [comment 7](show_bug.cgi?id=1542494#c7) it looks like the way a domain is killed matters: virsh > shutdown vs. virsh destroy. Seems that way, that's why I wrote that.  > What is "openstack server delete" doing? Is it just deleting the domain from > openstack's database or is it actually killing it in some way. [Comment 7](show_bug.cgi?id=1542494#c7) > suggests it doesn't actually kill the domain, but shouldn't the domain > remain running in this case? Both of these questions need to be answered by an OpenStack developer.   ```  [Comment 11](show_bug.cgi?id=1542494#c11)  Jiri Denemark    2018-02-13 09:17:19 UTC  ``` (In reply to jmencak from [comment #10](show_bug.cgi?id=1542494#c10)) > > This doesn't seem to be a libvirt bug given that lspci shows the same > > result. > Same result?  I submitted the "lspci -vvv" result of a functional/healthy > PCI device.  Here is "lspci -vvv" of the "failed" PCI device, after "virsh > destroy <server_id>": > [root@overcloud-1029pcompute-2 heat-admin]# lspci -vvv -s 0000:01: > 01:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD > Controller SM961/PM961 (rev ff) (prog-if ff) >         !!! Unknown header type 7f >         Kernel driver in use: vfio-pci >         Kernel modules: nvme  Exactly. Libvirt complains "Failed to reset PCI device: internal error: Unknown PCI header type '127'", which is consistent to what lspci reports. That is both libvirt and lspci report the same result.   ```  [Comment 13](show_bug.cgi?id=1542494#c13)  Laine Stump    2018-02-19 17:35:35 UTC  ``` Note that even though libvirt is reporting "Failed to reset PCI device", it actually never would have tried to reset the device even if it saw a correct device type in the PCI config - it's just that libvirt's virPCIDeviceReset() function is called unconditionally for every assigned PCI devices, then does several preliminary checks before deciding whether or not to reset the PCI device itself; it happens that the very first check is to examine the device type (in the device's PCI config in sysfs) to see if it's an endpoint device (if it's not an endpoint device, that's considered an error, since libvirt only assigns endpoint devices), and the *last* check is to see if the device is bound to vfio-pci and, if so, skip reset and return success (since vfio handles any necessary device resets as appropriate). So libvirt just doesn't get a chance to *skip* device reset.  libvirt could re-order these checks, looking for use of vfio-pci *first*, and avoid this on particular error, but that would just be delaying the failure report, not actually preventing it.  Also, in terms of interaction with vfio and the device, this happens after the qemu process has been terminated, and before any other device-related action by libvirt. If lspci doesn't show the invalid device type while the guest is running, then my suspicion is that the failure is caused by whatever action is taken (by qemu->vfio->kernel) as the qemu process is terminating. I would wager that the problem (invalid device type in PCI config after terminating the guest) can be reproduced with a straight qemu command, with no libvirt involved.   ```  [Comment 14](show_bug.cgi?id=1542494#c14)  Jiří Mencák    2018-02-19 19:04:11 UTC  ``` I can confirm that lspci doesn't show the invalid device type while the guest is running.   ```  [Comment 15](show_bug.cgi?id=1542494#c15)  Laine Stump    2018-02-19 22:49:31 UTC  ``` [Comment 7](show_bug.cgi?id=1542494#c7) leads me to believe that the NVMe device may be somehow dependent on the guest OS properly shutting down / releasing the device (which of course should never be the case).  I think the best course of action is to send this BZ to the kernel, but before that I can think of one experiment that could conclusively rule out libvirt as the source/trigger of any misbehavior, and also possibly help to narrow down the scope of investigation for the kernel person who looks at it:  Once a guest is running 1) stop libvirtd.service, then 2) manually kill the qemu process, then 3) look at lspci for the device. (since libvirtd isn't running, any change will be due to qemu/vfio/kernel releasing the device from the guest).   ```  [Comment 20](show_bug.cgi?id=1542494#c20)  Alex Williamson    2018-06-01 16:18:35 UTC  ``` There's no obvious way to make progress on this without a reproducer, the NVMe endpoint appears to be failing to return from reset.  This might be a hardware problem with the original device or related to the topology of the original system.  Re-open if a new reproducer is found.   ```  [Comment 21](show_bug.cgi?id=1542494#c21)  Alex Krzos    2018-07-27 14:38:02 UTC  ``` (In reply to Alex Williamson from [comment #20](show_bug.cgi?id=1542494#c20)) > There's no obvious way to make progress on this without a reproducer, the > NVMe endpoint appears to be failing to return from reset.  This might be a > hardware problem with the original device or related to the topology of the > original system.  Re-open if a new reproducer is found.  Hey Alex,  I can reproduce the issue in our staging environment.  Most recently we deployed OSP13 with RHEL 7.5 and kernel 3.10.0-862.3.3.el7.x86_64 and still witnessed the issue.  libvirt/nova versions: libvirt-3.9.0-14.el7_5.5.x86_64 libvirt-client-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-config-network-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-config-nwfilter-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-interface-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-lxc-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-network-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-nodedev-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-nwfilter-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-qemu-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-secret-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-core-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-disk-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-gluster-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-iscsi-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-logical-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-mpath-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-rbd-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-driver-storage-scsi-3.9.0-14.el7_5.5.x86_64 libvirt-daemon-kvm-3.9.0-14.el7_5.5.x86_64 libvirt-libs-3.9.0-14.el7_5.5.x86_64 libvirt-python-3.9.0-1.el7.x86_64 openstack-nova-api-17.0.3-0.20180420001141.el7ost.noarch openstack-nova-common-17.0.3-0.20180420001141.el7ost.noarch openstack-nova-compute-17.0.3-0.20180420001141.el7ost.noarch openstack-nova-conductor-17.0.3-0.20180420001141.el7ost.noarch openstack-nova-console-17.0.3-0.20180420001141.el7ost.noarch openstack-nova-migration-17.0.3-0.20180420001141.el7ost.noarch openstack-nova-novncproxy-17.0.3-0.20180420001141.el7ost.noarch openstack-nova-placement-api-17.0.3-0.20180420001141.el7ost.noarch openstack-nova-scheduler-17.0.3-0.20180420001141.el7ost.noarch puppet-nova-12.4.0-3.el7ost.noarch python-nova-17.0.3-0.20180420001141.el7ost.noarch python-novaclient-9.1.1-1.el7ost.noarch   In order to reproduce on our small staging cluster I did the following:  Disabled all but one compute via nova service-disable (overcloud-compute-0 was left enabled)  Created a pci passthrough flavor (openstack flavor create --ram 16128 --disk 96 --vcpus 4 --property "pci_passthrough:alias"="nvme:1" m4.xlarge-pci)  Created an instance using the pci passthrough flavor (openstack server create --image centos7 --flavor m4.xlarge-pci --key-name akrzos --security-group ci_security_group --nic net-id=ci_network akrzos )  Verified said instance had passed through nvme device:  (overcloud) [stack@b04-h02-1029p ~]$ ssh -i akrzos.pem centos.80.16 [centos@akrzos ~]$ lsblk NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT vda     253:0    0   96G  0 disk  └─vda1  253:1    0   96G  0 part / nvme0n1 259:0    0  477G  0 disk    Then deleted the instance with (openstack server delete akrzos)  Attempted to boot a new pci passthrough instance fails:  (overcloud) [stack@b04-h02-1029p ~]$ openstack server create --image centos7 --flavor m4.xlarge-pci --key-name akrzos --security-group ci_security_group --nic net-id=ci_network akrzos  ... (overcloud) [stack@b04-h02-1029p ~]$ openstack server list +--------------------------------------+--------+--------+----------+---------+---------------+ | ID                                   | Name   | Status | Networks | Image   | Flavor        | +--------------------------------------+--------+--------+----------+---------+---------------+ | 6c4c8227-082d-4417-ab69-d41dd8dd1350 | akrzos | ERROR  |          | centos7 | m4.xlarge-pci | +--------------------------------------+--------+--------+----------+---------+---------------+    While doing this I checked in on the compute node's lspci output regarding the nvme device:  Before booting the first instance: [stack@b04-h02-1029p ansible]$ ansible -i hosts.com compute -u heat-admin -b  -m'shell' -a'lspci -vvv -s 0000:01:'                                                                                                                            [117/1926]  overcloud-compute-0 | SUCCESS | rc=0 >> 01:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961 (prog-if 02 [NVM Express])         Subsystem: Samsung Electronics Co Ltd Device a801         Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+         Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-         Latency: 0, Cache Line Size: 64 bytes         Interrupt: pin A routed to IRQ 16         NUMA node: 0         Region 0: Memory at 9d100000 (64-bit, non-prefetchable) [size=16K]         Capabilities: [40] Power Management version 3                 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0-,D1-,D2-,D3hot-,D3cold-)                 Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME-         Capabilities: [50] MSI: Enable- Count=1/32 Maskable- 64bit+                 Address: 0000000000000000  Data: 0000         Capabilities: [70] Express (v2) Endpoint, MSI 00                 DevCap: MaxPayload 256 bytes, PhantFunc 0, Latency L0s unlimited, L1 unlimited                         ExtTag- AttnBtn- AttnInd- PwrInd- RBE+ FLReset+ SlotPowerLimit 25.000W                 DevCtl: Report errors: Correctable+ Non-Fatal+ Fatal+ Unsupported+                         RlxdOrd+ ExtTag- PhantFunc- AuxPwr- NoSnoop+ FLReset-                         MaxPayload 128 bytes, MaxReadReq 512 bytes                 DevSta: CorrErr+ UncorrErr- FatalErr- UnsuppReq+ AuxPwr+ TransPend-                 LnkCap: Port #0, Speed 8GT/s, Width x4, ASPM L1, Exit Latency L0s unlimited, L1 <64us                         ClockPM+ Surprise- LLActRep- BwNot- ASPMOptComp+                 LnkCtl: ASPM L1 Enabled; RCB 64 bytes Disabled- CommClk+                         ExtSynch- ClockPM+ AutWidDis- BWInt- AutBWInt-                 LnkSta: Speed 8GT/s, Width x4, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt-                 DevCap2: Completion Timeout: Range ABCD, TimeoutDis+, LTR+, OBFF Not Supported                 DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled                 LnkCtl2: Target Link Speed: 8GT/s, EnterCompliance- SpeedDis-                          Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS-                          Compliance De-emphasis: -6dB                 LnkSta2: Current De-emphasis Level: -6dB, EqualizationComplete+, EqualizationPhase1+                          EqualizationPhase2+, EqualizationPhase3+, LinkEqualizationRequest-         Capabilities: [b0] MSI-X: Enable+ Count=8 Masked-                 Vector table: BAR=0 offset=00003000                 PBA: BAR=0 offset=00002000         Capabilities: [100 v2] Advanced Error Reporting                 UESta:  DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-                 UEMsk:  DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-                 UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol-                 CESta:  RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr-                 CEMsk:  RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+                 AERCap: First Error Pointer: 00, GenCap+ CGenEn- ChkCap+ ChkEn-         Capabilities: [148 v1] Device Serial Number 00-00-00-00-00-00-00-00         Capabilities: [158 v1] Power Budgeting <?>         Capabilities: [168 v1] #19         Capabilities: [188 v1] Latency Tolerance Reporting                 Max snoop latency: 71680ns                 Max no snoop latency: 71680ns         Capabilities: [190 v1] L1 PM Substates                 L1SubCap: PCI-PM_L1.2+ PCI-PM_L1.1+ ASPM_L1.2+ ASPM_L1.1+ L1_PM_Substates+                           PortCommonModeRestoreTime=10us PortTPowerOnTime=10us         Kernel driver in use: nvme         Kernel modules: nvme  While the first instance was booted and running:  [stack@b04-h02-1029p ansible]$ ansible -i hosts.com compute -u heat-admin -b  -m'shell' -a'lspci -vvv -s 0000:01:'                                                                                                                             [40/1926]  overcloud-compute-0 | SUCCESS | rc=0 >> 01:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961 (prog-if 02 [NVM Express])         Subsystem: Samsung Electronics Co Ltd Device a801         Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+         Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-         Latency: 0, Cache Line Size: 64 bytes         Interrupt: pin A routed to IRQ 16         NUMA node: 0         Region 0: Memory at 9d100000 (64-bit, non-prefetchable) [size=16K]         Capabilities: [40] Power Management version 3                 Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0-,D1-,D2-,D3hot-,D3cold-)                 Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME-         Capabilities: [50] MSI: Enable- Count=1/32 Maskable- 64bit+                 Address: 0000000000000000  Data: 0000         Capabilities: [70] Express (v2) Endpoint, MSI 00                 DevCap: MaxPayload 256 bytes, PhantFunc 0, Latency L0s unlimited, L1 unlimited                         ExtTag- AttnBtn- AttnInd- PwrInd- RBE+ FLReset+ SlotPowerLimit 25.000W                 DevCtl: Report errors: Correctable- Non-Fatal- Fatal- Unsupported-                         RlxdOrd+ ExtTag- PhantFunc- AuxPwr- NoSnoop+ FLReset-                         MaxPayload 128 bytes, MaxReadReq 512 bytes                 DevSta: CorrErr- UncorrErr- FatalErr- UnsuppReq- AuxPwr+ TransPend-                 LnkCap: Port #0, Speed 8GT/s, Width x4, ASPM L1, Exit Latency L0s unlimited, L1 <64us                         ClockPM+ Surprise- LLActRep- BwNot- ASPMOptComp+                 LnkCtl: ASPM L1 Enabled; RCB 64 bytes Disabled- CommClk+                         ExtSynch- ClockPM+ AutWidDis- BWInt- AutBWInt-                 LnkSta: Speed 8GT/s, Width x4, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt-                 DevCap2: Completion Timeout: Range ABCD, TimeoutDis+, LTR+, OBFF Not Supported                 DevCtl2: Completion Timeout: 50us to 50ms, TimeoutDis-, LTR+, OBFF Disabled                 LnkCtl2: Target Link Speed: 8GT/s, EnterCompliance- SpeedDis-                          Transmit Margin: Normal Operating Range, EnterModifiedCompliance- ComplianceSOS-                          Compliance De-emphasis: -6dB                 LnkSta2: Current De-emphasis Level: -6dB, EqualizationComplete+, EqualizationPhase1+                          EqualizationPhase2+, EqualizationPhase3+, LinkEqualizationRequest-         Capabilities: [b0] MSI-X: Enable+ Count=8 Masked-                 Vector table: BAR=0 offset=00003000                 PBA: BAR=0 offset=00002000         Capabilities: [100 v2] Advanced Error Reporting                 UESta:  DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-                 UEMsk:  DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-                 UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol-                 CESta:  RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr-                 CEMsk:  RxErr- BadTLP- BadDLLP- Rollover- Timeout- NonFatalErr+                 AERCap: First Error Pointer: 00, GenCap+ CGenEn- ChkCap+ ChkEn-         Capabilities: [148 v1] Device Serial Number 00-00-00-00-00-00-00-00         Capabilities: [158 v1] Power Budgeting <?>         Capabilities: [168 v1] #19         Capabilities: [188 v1] Latency Tolerance Reporting                 Max snoop latency: 0ns                 Max no snoop latency: 0ns         Capabilities: [190 v1] L1 PM Substates                 L1SubCap: PCI-PM_L1.2+ PCI-PM_L1.1+ ASPM_L1.2+ ASPM_L1.1+ L1_PM_Substates+                           PortCommonModeRestoreTime=10us PortTPowerOnTime=10us         Kernel driver in use: vfio-pci         Kernel modules: nvme  After deleting the first instance:  [stack@b04-h02-1029p ansible]$ ansible -i hosts.com compute -u heat-admin -b  -m'shell' -a'lspci -vvv -s 0000:01:'   overcloud-compute-0 | SUCCESS | rc=0 >> 01:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961 (rev ff) (prog-if ff)         !!! Unknown header type 7f         Kernel modules: nvme   If I stop the instance first with openstack server stop akrzos I can then I can create a new instance that uses the passthrough nvme  I can provide you access to this testbed to verify however it will take us some time to make sure it is setup to reproduce cleanly for you.   ```  [Comment 22](show_bug.cgi?id=1542494#c22)  Alex Williamson    2018-07-27 15:21:00 UTC  ``` (In reply to Alex Krzos from [comment #21](show_bug.cgi?id=1542494#c21)) > (In reply to Alex Williamson from [comment #20](show_bug.cgi?id=1542494#c20)) > > I can reproduce the issue in our staging environment.  Most recently we > deployed OSP13 with RHEL 7.5 and kernel 3.10.0-862.3.3.el7.x86_64 and still > witnessed the issue.  Hi Alex,  Can you verify the vendor:device ID of your NVMe drive is 144d:a804, this should be found in 'lspci -nnks 1:00.0'.  I found a reproducible case of this myself recently and have a patch pending upstream that disables the nvme controller before reset on this device.  If it matches, I'll provide a backport to 7.5 host kernel that I'd appreciate testing.  Thanks   ```  [Comment 23](show_bug.cgi?id=1542494#c23)  Alex Krzos    2018-07-27 15:31:24 UTC  ``` (In reply to Alex Williamson from [comment #22](show_bug.cgi?id=1542494#c22)) > (In reply to Alex Krzos from [comment #21](show_bug.cgi?id=1542494#c21)) > > (In reply to Alex Williamson from [comment #20](show_bug.cgi?id=1542494#c20)) > > > > I can reproduce the issue in our staging environment.  Most recently we > > deployed OSP13 with RHEL 7.5 and kernel 3.10.0-862.3.3.el7.x86_64 and still > > witnessed the issue. >  > Hi Alex, >  > Can you verify the vendor:device ID of your NVMe drive is 144d:a804, this > should be found in 'lspci -nnks 1:00.0'.  I found a reproducible case of > this myself recently and have a patch pending upstream that disables the > nvme controller before reset on this device.  If it matches, I'll provide a > backport to 7.5 host kernel that I'd appreciate testing.  Thanks  vendor:device ID is 144d:a804 according to the first line of output however the second line shows [144d:a801] so I am unsure of which is the correct vendor:Device ID   [root@overcloud-compute-0 ~]# lspci -nnks 1:00.0 01:00.0 Non-Volatile memory controller [0108]: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961 [144d:a804]         Subsystem: Samsung Electronics Co Ltd Device [144d:a801]         Kernel driver in use: nvme         Kernel modules: nvme   ```  [Comment 24](show_bug.cgi?id=1542494#c24)  Alex Williamson    2018-07-27 16:20:00 UTC  ``` (In reply to Alex Krzos from [comment #23](show_bug.cgi?id=1542494#c23)) > > vendor:device ID is 144d:a804 according to the first line of output however > the second line shows [144d:a801] so I am unsure of which is the correct > vendor:Device ID  Just the first line is all we need, that's a match.  Please try this kernel on the VM host and let me know if it resolves the issue:  <https://brewweb.engineering.redhat.com/brew/taskinfo?taskID=17387051>   ```  [Comment 25](show_bug.cgi?id=1542494#c25)  Alex Williamson    2018-07-31 18:12:39 UTC  ``` (In reply to Alex Williamson from [comment #24](show_bug.cgi?id=1542494#c24)) > (In reply to Alex Krzos from [comment #23](show_bug.cgi?id=1542494#c23)) > > > > vendor:device ID is 144d:a804 according to the first line of output however > > the second line shows [144d:a801] so I am unsure of which is the correct > > vendor:Device ID >  > Just the first line is all we need, that's a match.  Please try this kernel > on the VM host and let me know if it resolves the issue: >  > <https://brewweb.engineering.redhat.com/brew/taskinfo?taskID=17387051>  The previous scratch build has already expired, were you able to test or do I need to resubmit the build?   ```  [Comment 26](show_bug.cgi?id=1542494#c26)  CongLi    2018-08-01 06:59:15 UTC  ``` (In reply to Alex Williamson from [comment #22](show_bug.cgi?id=1542494#c22)) > (In reply to Alex Krzos from [comment #21](show_bug.cgi?id=1542494#c21)) > > (In reply to Alex Williamson from [comment #20](show_bug.cgi?id=1542494#c20)) > > > > I can reproduce the issue in our staging environment.  Most recently we > > deployed OSP13 with RHEL 7.5 and kernel 3.10.0-862.3.3.el7.x86_64 and still > > witnessed the issue. >  > Hi Alex, >  > Can you verify the vendor:device ID of your NVMe drive is 144d:a804, this > should be found in 'lspci -nnks 1:00.0'.  I found a reproducible case of > this myself recently and have a patch pending upstream that disables the > nvme controller before reset on this device.  If it matches, I'll provide a > backport to 7.5 host kernel that I'd appreciate testing.  Thanks  Hi Alex,  Does it mean this issue only triggered with '1:00.0' ?  Thanks.   ```  [Comment 27](show_bug.cgi?id=1542494#c27)  Alex Krzos    2018-08-01 11:19:03 UTC  ``` (In reply to Alex Williamson from [comment #25](show_bug.cgi?id=1542494#c25)) > (In reply to Alex Williamson from [comment #24](show_bug.cgi?id=1542494#c24)) > > (In reply to Alex Krzos from [comment #23](show_bug.cgi?id=1542494#c23)) > > > > > > vendor:device ID is 144d:a804 according to the first line of output however > > > the second line shows [144d:a801] so I am unsure of which is the correct > > > vendor:Device ID > >  > > Just the first line is all we need, that's a match.  Please try this kernel > > on the VM host and let me know if it resolves the issue: > >  > > <https://brewweb.engineering.redhat.com/brew/taskinfo?taskID=17387051> >  > The previous scratch build has already expired, were you able to test or do > I need to resubmit the build?  We have not had the time to work testing this in.  We do have a small staging environment which I can provide for you this week to test that kernel on.  Send me a direct message and I can get you access today.   ```  [Comment 28](show_bug.cgi?id=1542494#c28)  Alex Williamson    2018-08-01 14:07:48 UTC  ``` (In reply to CongLi from [comment #26](show_bug.cgi?id=1542494#c26)) > Hi Alex, >  > Does it mean this issue only triggered with '1:00.0' ?  Hi CongLi,  The issue is only triggered with Samsung NVMe controllers, this one happens to be installed at address 1:00.0, but the address is not a fundamental component of the issue, afaik.  Thanks   ```  [Comment 29](show_bug.cgi?id=1542494#c29)  Alex Williamson    2018-08-01 14:11:15 UTC  ``` (In reply to Alex Krzos from [comment #27](show_bug.cgi?id=1542494#c27)) >  > We have not had the time to work testing this in.  We do have a small > staging environment which I can provide for you this week to test that > kernel on.  Send me a direct message and I can get you access today.  If you can distill the test case to a QEMU commandline or libvirt XML, I would offer to verify the kernel, otherwise I would kindly request that you are more familiar with the test environment and a better candidate to verify.  I'll build a new kernel and put it in a more stable location for testing at your leisure.   ```  [Comment 30](show_bug.cgi?id=1542494#c30)  Alex Williamson    2018-08-01 19:13:02 UTC  ``` (In reply to Alex Williamson from [comment #29](show_bug.cgi?id=1542494#c29)) > (In reply to Alex Krzos from [comment #27](show_bug.cgi?id=1542494#c27)) > >  > > We have not had the time to work testing this in.  We do have a small > > staging environment which I can provide for you this week to test that > > kernel on.  Send me a direct message and I can get you access today. >  > If you can distill the test case to a QEMU commandline or libvirt XML, I > would offer to verify the kernel, otherwise I would kindly request that you > are more familiar with the test environment and a better candidate to > verify.  I'll build a new kernel and put it in a more stable location for > testing at your leisure.  Here's a new build of the kernel for testing:  <http://people.redhat.com/~alwillia/bz1542494/>   ```  [Comment 31](show_bug.cgi?id=1542494#c31)  Alex Krzos    2018-08-03 13:43:40 UTC  ``` (In reply to Alex Williamson from [comment #30](show_bug.cgi?id=1542494#c30)) > (In reply to Alex Williamson from [comment #29](show_bug.cgi?id=1542494#c29)) > > (In reply to Alex Krzos from [comment #27](show_bug.cgi?id=1542494#c27)) > > >  > > > We have not had the time to work testing this in.  We do have a small > > > staging environment which I can provide for you this week to test that > > > kernel on.  Send me a direct message and I can get you access today. > >  > > If you can distill the test case to a QEMU commandline or libvirt XML, I > > would offer to verify the kernel, otherwise I would kindly request that you > > are more familiar with the test environment and a better candidate to > > verify.  I'll build a new kernel and put it in a more stable location for > > testing at your leisure. >  > Here's a new build of the kernel for testing: >  > <http://people.redhat.com/~alwillia/bz1542494/>  Thanks,  I installed the kernel on a single hypervisor in the OpenStack cloud and then disabled all of the other hypervisors.  I then ran through a serial set of commands to boot an instance with pci passthrough and then deleted 5 times.  This was run serially since there is only a single nvme on the compute thus the sequence resembled - boot instance w/ nvme, delete instance, boot instance w/nvme, delete instance  At the conclusion the nvme on the compute node never showed the error condition on the hypervisor and the instances never showed up as error state either.  Output and commands here: <https://gist.github.com/akrzos/b5cf6bf5b8492868180fabf791b2ad88>  I believe this concludes that the patched kernel is not affected.  I am installing the kernel on the rest of the compute nodes to have more exhaustive testing and to avoid the error condition in this testbed.  I also wanted to point, running the same sequence on un-patched hypervisors results in the second instance unable to boot and the following output on the un-patched compute nodes as previous discussed in this bz: [root@overcloud-compute-1 ~]# lspci -vvv -s 0000:01: 01:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961 (rev ff) (prog-if ff)         !!! Unknown header type 7f         Kernel driver in use: vfio-pci         Kernel modules: nvme   Thanks AlexW for the patch, this fixes our issue as it seems.   ```  [Comment 33](show_bug.cgi?id=1542494#c33)  Bruno Meneguele    2018-08-30 16:18:35 UTC  ``` Considering the patchset that was posted on rhkernel-list also solves another BZ ([BZ 1592654](show_bug.cgi?id=1592654 "CLOSED ERRATA - [NVMe Device Assignment] Guest reboot failed from the NVMe assigned which os installed on")) that has exception flag requested, shouldn't this BZ also request the flag thus the entire patchset has the chance to get integrated?   ```  [Comment 34](show_bug.cgi?id=1542494#c34)  Bruno Meneguele    2018-09-01 02:12:31 UTC  ``` Patch(es) committed on kernel repository and an interim kernel build is undergoing testing   ```  [Comment 36](show_bug.cgi?id=1542494#c36)  Bruno Meneguele    2018-09-03 19:47:47 UTC  ``` Patch(es) available on kernel-3.10.0-942.el7   ```  [Comment 38](show_bug.cgi?id=1542494#c38)  CongLi    2018-09-10 05:53:25 UTC  ``` 1. Reproduced this issue on: kernel-3.10.0-940.el7.x86_64  Steps: 1) install a guest on nvme 2) reboot guest  qemu: (qemu) qemu-kvm: vfio_err_notifier_handler(0000:02:00.0) Unrecoverable error detected. Please collect any data possible and then kill the guest  host dmesg: [61345.741741] pcieport 0000:00:1b.0: AER: Corrected error received: id=00d8 [61345.748574] pcieport 0000:00:1b.0: PCIe Bus Error: severity=Corrected, type=Physical Layer, id=00d8(Receiver ID) [61345.758777] pcieport 0000:00:1b.0:   device [8086:a340] error status/mask=00000001/00002000 [61345.767151] pcieport 0000:00:1b.0:    [ 0] Receiver Error         [61347.641675] pcieport 0000:00:1b.0: AER: Corrected error received: id=00d8 [61347.648520] pcieport 0000:00:1b.0: PCIe Bus Error: severity=Corrected, type=Physical Layer, id=00d8(Receiver ID) [61347.658729] pcieport 0000:00:1b.0:   device [8086:a340] error status/mask=00000001/00002000 [61347.667108] pcieport 0000:00:1b.0:    [ 0] Receiver Error         [61348.042293] vfio_ecap_init: 0000:02:00.0 hiding ecap 0x19@0x168 [61348.048240] vfio_ecap_init: 0000:02:00.0 hiding ecap 0x1e@0x190 [61348.203471] pcieport 0000:00:1b.0: AER: Corrected error received: id=00d8 [61348.210291] pcieport 0000:00:1b.0: PCIe Bus Error: severity=Corrected, type=Physical Layer, id=00d8(Receiver ID) [61348.220494] pcieport 0000:00:1b.0:   device [8086:a340] error status/mask=00000001/00002000 [61348.228880] pcieport 0000:00:1b.0:    [ 0] Receiver Error            2. Verified this bug on: kernel-3.10.0-944.el7.x86_64 guest could boot up and reboot successfully. host dmesg: [257072.707914] vfio-pci 0000:02:00.0: enabling device (0400 -> 0402) [257072.814894] vfio_ecap_init: 0000:02:00.0 hiding ecap 0x19@0x168 [257072.820944] vfio_ecap_init: 0000:02:00.0 hiding ecap 0x1e@0x190 [257085.907046] vfio-pci 0000:02:00.0: irq 126 for MSI/MSI-X [257086.114261] vfio-pci 0000:02:00.0: irq 126 for MSI/MSI-X  nvme info: 02:00.0 0108: 144d:a804 (prog-if 02 [NVM Express]) 	Subsystem: 144d:a801 	Flags: bus master, fast devsel, latency 0, IRQ 16, NUMA node 0 	Memory at a4100000 (64-bit, non-prefetchable) [size=16K] 	Capabilities: [40] Power Management version 3 	Capabilities: [50] MSI: Enable- Count=1/32 Maskable- 64bit+ 	Capabilities: [70] Express Endpoint, MSI 00 	Capabilities: [b0] MSI-X: Enable+ Count=8 Masked- 	Capabilities: [100] Advanced Error Reporting 	Capabilities: [148] Device Serial Number 00-00-00-00-00-00-00-00 	Capabilities: [158] Power Budgeting <?> 	Capabilities: [168] #19 	Capabilities: [188] Latency Tolerance Reporting 	Capabilities: [190] L1 PM Substates 	Kernel driver in use: vfio-pci 	Kernel modules: nvme 02:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961   ```  [Comment 41](show_bug.cgi?id=1542494#c41)  errata-xmlrpc    2018-10-30 08:37:27 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2018:3083](https://access.redhat.com/errata/RHSA-2018%3A3083)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1542494&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from access.redhat.com_3d859c47_20250126_104631.html ===

[Skip to main content](#main-content)

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

* [0](#comments)

* ## Get notified when this content is updated.

  Follow

  Please wait...

# Kernel Side-Channel Attack using Speculative Store Bypass - CVE-2018-3639

Public Date:  May 17, 2018, 04:42

Updated  September 3, 2021, 12:01 -
[Chinese, Simplified](/zh_CN/security/vulnerabilities/ssbd)

[French](/fr/security/vulnerabilities/992c5550-5342-4ce7-9e9c-e6cf79a3c321)

[Japanese](/ja/security/vulnerabilities/ssbd)

[Korean](/ko/security/vulnerabilities/ssbd)

Was this information helpful?

Resolved
Status

Important
Impact

### Insights vulnerability analysis

[View exposed systems](https://console.redhat.com/insights/vulnerability/cves/CVE-2018-3639)

* Overview
* Impact
* Diagnose
* Resolve

Red Hat has been made aware of a vulnerability that exists in modern microprocessors, requiring updates to the Linux kernel, virtualization-related components, and a microcode update. An unprivileged attacker can use this flaw to bypass restrictions in order to gain read access to privileged memory that would otherwise be inaccessible.  This issue has been assigned [CVE-2018-3639](https://access.redhat.com/security/cve/cve-2018-3639) and is also referred to as “Variant 4” or “Speculative Store Bypass”.  This issue is known to affect CPUs of various microarchitectures from: [AMD](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fwww.amd.com%2Fen%2Fcorporate%2Fsecurity-updates), [ARM](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fdeveloper.arm.com%2Fsupport%2Farm-security-updates), [IBM](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fwww.ibm.com%2Fblogs%2Fpsirt%2F) POWER8, and POWER9, and [Intel](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fwww.intel.com%2Fcontent%2Fwww%2Fus%2Fen%2Farchitecture-and-technology%2Ffacts-about-side-channel-analysis-and-intel-products.html) processors.  All currently supported versions of Red Hat Enterprise Linux, Red Hat OpenShift, Red Hat Virtualization, and Red Hat OpenStack Platform are affected.

A malicious, unprivileged user could use this flaw to read privileged system memory and/or memory outside of a sandboxed environment like a web-browser or JIT execution run times.

To fully mitigate this vulnerability, system administrators must apply both hardware “microcode” updates and software patches that enable new functionality.  At this time, microprocessor microcode will be delivered by the individual manufacturers, but at a future time Red Hat will release the tested and signed updates as we receive them.

This issue was disclosed to the public May 21, 2018.

## Background Information

[CVE-2018-3639](https://access.redhat.com/security/cve/cve-2018-3639) (aka “Speculative Store Bypass”) opens a new avenue (like Branch Misprediction) which can be exploited via speculative execution and cache based side channel methods to bypass security measures and access privileged memory.  This issue is similar to [CVE-2017-5753](https://access.redhat.com/security/cve/cve-2017-5753) (aka “Spectre v1”), except it leverages Speculative Store Bypass memory optimization in place of Branch Misprediction used by Spectre v1.

Modern computer processors are highly complex systems. At the core they execute a sequence of instructions (aka a program) and store results into memory.
[![](https://access.redhat.com/sites/default/files/diagram-1_0.png)](https://access.redhat.com/sites/default/files/diagram-1_0.png)

To maximize the number of instructions executed or to improve performance, processors add multiple execution cores, faster cache memory, and employs various techniques such as Out-of-Order Execution, Branch Prediction, Speculative Execution, Data Prefetching, Memory Access Reordering, Memory Disambiguation et. al.

[![](https://access.redhat.com/sites/default/files/diagram-2.png)](https://access.redhat.com/sites/default/files/diagram-2.png)

As instructions are executed, the processor loads(read) and stores(write) data from/to the main memory. Before Load and Store instructions can access data, they need to resolve the address given by their operand, ex.

mov    [rbx + rcx], 0x0  :  Store zero(0) into memory location [rbx + rcx]
mov    rax, [rdx + rsi]   :  Load data from memory location [rdx + rsi] into RAX register

In both cases, addresses [rbx + rcx] and [rdx + rsi] is resolved to a memory location before data can be accessed.

A typical program has many load(read) and store(write) instructions; at times both operating on the same memory address. To maintain the consistent memory state, processors use load-store-queue buffer to process load(read) and store(write) instructions. When both load and store instructions are queued, load instruction would not execute before addresses of all the store instructions in the queue are known.

#### Enter Speculative Store Bypass:

Modern processors can execute load/store instructions out-of-order and speculatively (when both load(read) and store(write) instructions are present in the load-store-queue).

[![](https://access.redhat.com/sites/default/files/diagram-3.png)](https://access.redhat.com/sites/default/files/diagram-3.png)

The Memory Disambiguator(MD) predicts which of the loads do not depend on an earlier store instruction. Such load(read) instructions are then speculatively executed to load data from L1 data cache, even when the address of the earlier store is not known, thus bypassing the Store instruction. This adds to the overall performance by avoiding load latency. At the end, if the prediction was wrong and conflict between load(read) and store(write) instructions is detected, all instructions since (and including) the speculative load are re-executed.

## Acknowledgements

Red Hat would like to thank Ken Johnson of the Microsoft Security Response Center (MSRC) and Jann Horn of Google Project Zero (GPZ).

## Additional References

Have questions? Watch this [Red Hat video about SSBD](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fyoutu.be%2FUv6lDgcUAC0)

Red Hat Blog: [Speculative Store Bypass explained​](https://www.redhat.com/en/blog/speculative-store-bypass-explained-what-it-how-it-works)

[How to patch my RHV environment for Kernel Side-Channel Attack using Speculative Store Bypass CVE-2018-3639?](https://access.redhat.com/solutions/3452581)

[Is CPU microcode available via the microcode\_ctl package?](https://access.redhat.com/articles/3540901)

[Google Project Zero Variant 4 website](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fbugs.chromium.org%2Fp%2Fproject-zero%2Fissues%2Fdetail%3Fid%3D1528)

[Intel Advisory](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fwww.intel.com%2Fcontent%2Fwww%2Fus%2Fen%2Fsecurity-center%2Fadvisory%2Fintel-sa-00115.html)

[Intel Analysis of Speculative Execution Side Channels](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fsoftware.intel.com%2Fsites%2Fdefault%2Ffiles%2Fmanaged%2Fb9%2Ff9%2F336983-Intel-Analysis-of-Speculative-Execution-Side-Channels-White-Paper.pdf)

[Speculative Execution Side Channel Mitigation](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fsoftware.intel.com%2Fsites%2Fdefault%2Ffiles%2Fmanaged%2Fc5%2F63%2F336996-Speculative-Execution-Side-Channel-Mitigations.pdf)

[Guidance for mitigating speculative execution side-channel vulnerabilities in Azure](https://access.redhat.com/bounce/?externalURL=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fazure%2Fvirtual-machines%2Flinux%2Fmitigate-se)

## Impacted Products

Red Hat Product Security has rated [CVE-2018-3639](https://access.redhat.com/security/cve/CVE-2018-3639) as having a security impact of [Important](http://access.redhat.com/security/updates/classification/).

The following Red Hat product versions are impacted:

* Red Hat Enterprise Linux 5
* Red Hat Enterprise Linux 6
* Red Hat Enterprise Linux 7
* Red Hat Atomic Host
* Red Hat Enterprise MRG 2
* Red Hat Virtualization (RHEV-H/RHV-H)
* Red Hat Enterprise Linux OpenStack Platform 6.0 (Juno)
* Red Hat Enterprise Linux OpenStack Platform 7.0 (Kilo) for RHEL7
* Red Hat Enterprise Linux OpenStack Platform 7.0 (Kilo) director for RHEL7
* Red Hat OpenStack Platform 8.0 (Liberty)
* Red Hat OpenStack Platform 8.0 (Liberty) director
* Red Hat OpenStack Platform 9.0 (Mitaka)
* Red Hat OpenStack Platform 9.0 (Mitaka) director
* Red Hat OpenStack Platform 10.0 (Newton)
* Red Hat OpenStack Platform 11.0 (Ocata)
* Red Hat OpenStack Platform 12.0 (Pike)

While Red Hat's Linux Containers are not directly impacted by kernel issues, their security relies upon the integrity of the host kernel environment. Red Hat recommends that you use the most recent versions of your container images. The Container Health Index, part of the [Red Hat Container Catalog](https://access.redhat.com/containers/), can always be used to verify the security status of Red Hat containers. To protect the privacy of the containers in use, you will need to ensure that the Container host (such as Red Hat Enterprise Linux or [Atomic Host](https://www.redhat.com/en/resources/enterprise-linux-atomic-host-datasheet)) has been updated against these attacks. Red Hat has released an updated Atomic Host for this use case.

## Attack Description and Impact

This Speculative Store Bypass scenario opens a side channel like Spectre variant-1. It allows load(read) instruction to access an old value from a memory location, wherein a store operation is not yet committed. It can be leveraged to read privileged system memory, if an attacker is able to control the old value at the memory location. It can also be used by processes running inside sandboxed execution environments, like a web browser, JVM or execution engines which analyse and compile source code just in time(JIT) before its execution.

### Performance impact

Speculative Store Bypass or Memory Disambiguation(MD) is an optimization employed to improve efficiency of the speculative execution engine. As it allows to execute load(read) instructions without waiting on earlier store(write) instructions, it reduces the load latency and improves performance.

Enabling the Speculative Store Bypass mitigation essentially disables the Memory Disambiguation optimization. It may impact the system performance. The net performance impact will vary according to the system workload.

Regarding default configurations, Red Hat’s position favors security over performance, while allowing users the flexibility to assess their own environment and make appropriate tradeoffs through selectively enabling and disabling the various mitigations.  Red Hat is working on  additional changes  to reduce the performance impact of the initial remediation.

Additional performance data will be published as as it becomes available.

## Diagnose your vulnerability

### Determine if your system is vulnerable

Use the detection script to determine if your system is currently vulnerable to this flaw. To verify the legitimacy of the script, you can download the [detached GPG signature](https://access.redhat.com/sites/default/files/cve-2018-3639--2019-06-10-1156.sh.asc) as well. The current version of the script is 1.4.

###

[Download Detection Script](https://access.redhat.com/sites/default/files/cve-2018-3639--2019-06-10-1156.sh)

## Take Action

Red Hat customers running affected versions of Red Hat products are strongly recommended to update them as soon as errata are available. Customers are urged to apply the appropriate updates immediately. These fixes also require CPU microcode/firmware updates and subscribers are advised to contact their hardware OEM vendors to receive the appropriate microcode/firmware for their processor. A kernel update, without the appropriate firmware/microcode updated for the processor, is insufficient to remediate this vulnerability.

The order the patches are applied is not important, but after updating firmware and hypervisors, every system/virtual machine will need to power off and restart to recognize a new hardware type.

## Updates for Affected Products

| **Product** | **Package** | **Advisory/Update** |
| --- | --- | --- |
| Red Hat Enterprise Linux 7 (z-stream) | kernel | [RHSA-2018:1965](https://access.redhat.com/errata/RHSA-2018%3A1965) (x86-64 Intel, PowerPC, x86 AMD) |
| Red Hat Enterprise Linux 7 | kernel-rt | [RHSA-2018:2003](https://access.redhat.com/errata/RHSA-2018%3A2003) |
| Red Hat Enterprise Linux 7 | kernel-alt | [RHSA-2018:1967](https://access.redhat.com/errata/RHSA-2018%3A1967) |
| Red Hat Enterprise Linux 7 [5] | microcode\_ctl | [RHEA-2018:2299](https://access.redhat.com/errata/RHEA-2018%3A2299) |
| Red Hat Enterprise Linux 7 | libvirt | [RHSA-2018:2006](https://access.redhat.com/errata/RHSA-2018%3A2006) |
| Red Hat Enterprise Linux 7 | qemu-kvm | [RHSA-2018:2001](https://access.redhat.com/errata/RHSA-2018%3A2001) |
| Red Hat Enterprise Linux 7 | qemu-kvm | [RHSA-2018:1633](https://access.redhat.com/errata/RHSA-2018%3A1633) |
| Red Hat Enterprise Linux 7 | openjdk 1.8.0 | [RHSA-2018:1649](https://access.redhat.com/errata/RHSA-2018%3A1649) |
| Red Hat Enterprise Linux 7 | openjdk 1.7.0 | [RHSA-2018:1648](https://access.redhat.com/errata/RHSA-2018%3A1648) |
| Red Hat Enterprise Linux 7.4 Extended Update Support [2] | kernel | [RHSA-2018:1635](https://access.redhat.com/errata/RHSA-2018%3A1635) |
| Red Hat Enterprise Linux 7.4 Extended Update Support [2], [5] | microcode\_ctl | [RHEA-2018:2298](https://access.redhat.com/errata/RHEA-2018%3A2298) |
| Red Hat Enterprise Linux 7.4 Extended Update Support [2] | libvirt | [RHSA-2018:1652](https://access.redhat.com/errata/RHSA-2018%3A1652) |
| Red Hat Enterprise Linux 7.4 Extended Update Support [2] | qemu-kvm | [RHSA-2018:1663](https://access.redhat.com/errata/RHSA-2018%3A1663) |
| Red Hat Enterprise Linux 7.3 Extended Update Support [2] | kernel | [RHSA-2018:1737](https://access.redhat.com/errata/RHSA-2018%3A1737) |
| Red Hat Enterprise Linux 7.3 Extended Update Support [2], [5] | microcode\_ctl | [RHEA-2018:2296](https://access.redhat.com/errata/RHEA-2018%3A2296) |
| Red Hat Enterprise Linux 7.3 Extended Update Support [2] | libvirt | [RHSA-2018:1653](https://access.redhat.com/errata/RHSA-2018%3A1653) |
| Red Hat Enterprise Linux 7.3 Extended Update Support [2] | qemu-kvm | [RHSA-2018:1662](https://access.redhat.com/errata/RHSA-2018%3A1662) |
| Red Hat Enterprise Linux 7.2 Update Services for SAP Solutions, & Advanced Update Support [3],[4] | kernel | [RHSA-2018:1637](https://access.redhat.com/errata/RHSA-2018%3A1637) |
| Red Hat Enterprise Linux 7.2 Update Services for SAP Solutions, & Advanced Update Support [3],[4], [5] | microcode\_ctl | [RHEA-2018:2301](https://access.redhat.com/errata/RHEA-2018%3A2301) |
| Red Hat Enterprise Linux 7.2 Update Services for SAP Solutions, & Advanced Update Support [3],[4] | libvirt | [RHSA-2018:1668](https://access.redhat.com/errata/RHSA-2018%3A1668) |
| Red Hat Enterprise Linux 7.2 Update Services for SAP Solutions, & Advanced Update Support [3],[4] | qemu-kvm | [RHSA-2018:1661](https://access.redhat.com/errata/RHSA-2018%3A1661) |
| Red Hat Enterprise Linux 6 (z-stream) | kernel | [RHSA-2018:1854](https://access.redhat.com/errata/RHSA-2018%3A1854) |
| Red Hat Enterprise Linux 6 [5] | microcode\_ctl | [RHEA-2018:2300](https://access.redhat.com/errata/RHEA-2018%3A2300) |
| Red Hat Enterprise Linux 6 | libvirt | [RHSA-2018:1669](https://access.redhat.com/errata/RHSA-2018%3A1669) |
| Red Hat Enterprise Linux 6 | qemu-kvm | [RHSA-2018:1660](https://access.redhat.com/errata/RHSA-2018%3A1660) |
| Red Hat Enterprise Linux 6 | openjdk 1.8.0 | [RHSA-2018:1650](https://access.redhat.com/errata/RHSA-2018%3A1650) |
| Red Hat Enterprise Linux 6 | openjdk 1.7.0 | [RHSA-2018:1647](https://access.redhat.com/errata/RHSA-2018%3A1647) |
| Red Hat Enterprise Linux 6.7 Extended Update Support [2] | kernel | [RHSA-2018:1826](https://access.redhat.com/errata/RHSA-2018%3A1826) |
| Red Hat Enterprise Linux 6.7 Extended Update Support [2], [5] | microcode\_ctl | [RHEA-2018:2304](https://access.redhat.com/errata/RHEA-2018%3A2304) |
| Red Hat Enterprise Linux 6.7 Extended Update Support [2] | libvirt | [RHSA-2018:1667](https://access.redhat.com/errata/RHSA-2018%3A1667) |
| Red Hat Enterprise Linux 6.7 Extended Update Support [2] | qemu-kvm | [RHSA-2018:1659](https://access.redhat.com/errata/RHSA-2018%3A1659) |
| Red Hat Enterprise Linux 6.6 Advanced Update Support [3],[4] | kernel | [RHSA-2018:1639](https://access.redhat.com/errata/RHSA-2018%3A1639) |
| Red Hat Enterprise Linux 6.6 Advanced Update Support [3],[4], [5] | microcode\_ctl | [RHEA-2018:2302](https://access.redhat.com/errata/RHEA-2018%3A2302) |
| Red Hat Enterprise Linux 6.6 Advanced Update Support [3],[4] | libvirt | [RHSA-2018:1666](https://access.redhat.com/errata/RHSA-2018%3A1666) |
| Red Hat Enterprise Linux 6.6 Advanced Update Support [3],[4] | qemu-kvm | [RHSA-2018:1658](https://access.redhat.com/errata/RHSA-2018%3A1658) |
| Red Hat Enterprise Linux 6.5 Advanced Update Support [3] | kernel | [RHSA-2018:1640](https://access.redhat.com/errata/RHSA-2018%3A1640) |
| Red Hat Enterprise Linux 6.5 Advanced Update Support [3], [5] | microcode\_ctl | [RHEA-2018:2303](https://access.redhat.com/errata/RHEA-2018%3A2303) |
| Red Hat Enterprise Linux 6.5 Advanced Update Support [3] | libvirt | [RHSA-2018:1665](https://access.redhat.com/errata/RHSA-2018%3A1665) |
| Red Hat Enterprise Linux 6.5 Advanced Update Support [3] | qemu-kvm | [RHSA-2018:1657](https://access.redhat.com/errata/RHSA-2018%3A1657) |
| Red Hat Enterprise Linux 6.4 Advanced Update Support [3] | kernel | [RHSA-2018:1641](https://access.redhat.com/errata/RHSA-2018%3A1641) |
| Red Hat Enterprise Linux 6.4 Advanced Update Support [3], [5] | microcode\_ctl | [RHEA-2018:2297](https://access.redhat.com/errata/RHEA-2018%3A2297) |
| Red Hat Enterprise Linux 6.4 Advanced Update Support [3] | libvirt | [RHSA-2018:1664](https://access.redhat.com/errata/RHSA-2018%3A1664) |
| Red Hat Enterprise Linux 6.4 Advanced Update Support [3] | qemu-kvm | [RHSA-2018:1656](https://access.redhat.com/errata/RHSA-2018%3A1656) |
| Red Hat Enterprise Linux 5 Extended Lifecycle Support [1] | kernel | [RHSA-2018-2172](https://access.redhat.com/errata/RHSA-2018%3A2172) (x86 64-bit) |
| Red Hat Enterprise Linux 5 Extended Lifecycle Support [1], [5] | microcode\_ctl | [RHEA-2018:2305](https://access.redhat.com/errata/RHEA-2018%3A2305) |
| Red Hat Enterprise Linux 5.9 Advanced Update Support [3] | kernel | [RHSA-2018:2171](https://access.redhat.com/errata/RHSA-2018%3A2171) (x86 64-bit) |
| Red Hat Enterprise Linux 5.9 Advanced Update Support [3], [5] | microcode\_ctl | [RHEA-2018:2295](https://access.redhat.com/errata/RHEA-2018%3A2295) |
| RHEL Atomic Host | kernel | Respun 22May2018 |
| Red Hat Enterprise MRG 2 | kernel-rt | [RHSA-2018:1642](https://access.redhat.com/errata/RHSA-2018%3A1642) |
| Red Hat Virtualization 4 [6] | redhat-virtualization-host | [RHSA-2018:1696](https://access.redhat.com/errata/RHSA-2018%3A1696) |
| Red Hat Virtualization 4 [6] | rhvm-setup-plugins | [RHSA-2018:1674](https://access.redhat.com/errata/RHSA-2018%3A1674) |
| Red Hat Virtualization 4 [6] | qemu-kvm-rhev | [RHSA-2018:2060](https://access.redhat.com/errata/RHSA-2018%3A2060) |
| Red Hat Virtualization 4 [6] | vdsm | [RHSA-2018:1675](https://access.redhat.com/errata/RHSA-2018%3A1675) |
| Red Hat Virtualization 4 [6] | ovirt-engine | [RHSA-2018:1676](https://access.redhat.com/errata/RHSA-2018%3A1676) |
| Red Hat Virtualization 3 Extended Lifecycle Support [1], [6] | redhat-virtualization-host | [RHSA-2018:1710](https://access.redhat.com/errata/RHSA-2018%3A1710) |
| Red Hat Virtualization 3 Extended Lifecycle Support [1], [6] | rhev-hypervisor7 | [RHSA-2018:1711](https://access.redhat.com/errata/RHSA-2018%3A1711) |
| Red Hat Virtualization 3 Extended Lifecycle Support [1], [6] | qemu-kvm-rhev | [RHSA-2018:1654](https://access.redhat.com/errata/RHSA-2018%3A1654) |
| Red Hat Virtualization 3 Extended Lifecycle Support [1], [6] | vdsm | [RHSA-2018:1690](https://access.redhat.com/errata/RHSA-2018%3A1690) |
| Red Hat Virtualization 3 Extended Lifecycle Support [1], [6] | ovirt-engine | [RHSA-2018:1688](https://access.redhat.com/errata/RHSA-2018%3A1688) |
| Red Hat Virtualization 3 Extended Lifecycle Support [1], [6] | rhevm-setup-plugins | [RHSA-2018:1689](https://access.redhat.com/errata/RHSA-2018%3A1689) |
| Red Hat Enterprise Linux OpenStack Platform 7.0 (Kilo) for RHEL7 | qemu-kvm-rhev | [RHSA-2018:1686](https://access.redhat.com/errata/RHSA-2018%3A1686) |
| Red Hat Enterprise Linux OpenStack Platform 7.0 (Kilo) director for RHEL7 | director images | Images have been respun |
| Red Hat OpenStack Platform 8.0 (Liberty) | qemu-kvm-rhev | [RHSA-2018:1646](https://access.redhat.com/errata/RHSA-2018%3A1646) |
| Red Hat OpenStack Platform 8.0 (Liberty) | director images | Images have been respun |
| Red Hat OpenStack Platform 9.0 (Mitaka) | qemu-kvm-rhev | [RHSA-2018:1645](https://access.redhat.com/errata/RHSA-2018%3A1645) |
| Red Hat OpenStack Platform 9.0 (Mitaka) | director images | Images have been respun |
| Red Hat OpenStack Platform 10.0 (Newton) | qemu-kvm-rhev | [RHSA-2018:1644](https://access.redhat.com/errata/RHSA-2018%3A1644) |
| Red Hat OpenStack Platform 10.0 (Newton) | director images | Images have been respun |
| Red Hat OpenStack Platform 11.0 (Ocata) | qemu-kvm-rhev | Pending |
| Red Hat OpenStack Platform 11.0 (Ocata) | director images | Images have been respun |
| Red Hat OpenStack Platform 12.0 (Pike) | qemu-kvm-rhev | [RHSA-2018:1643](https://access.redhat.com/errata/RHSA-2018%3A1643) |
| Red Hat OpenStack Platform 12.0 (Pike) | director images | Images have been respun |
| Red Hat OpenStack Platform 12.0 (Pike) | containers | Containers have been respun |

[1] **An active ELS subscription is required** for access to this patch.  Please [contact](https://www.redhat.com/en/contact-sales)Red Hat sales or your specific sales representative for more information if your account does not have an active ELS subscription.

[2] **An active EUS subscription is required** for access to this patch.  Please [contact](https://www.redhat.com/en/contact-sales) Red Hat sales or your specific sales representative for more information if your account does not have an active EUS subscription.

[What is the Red Hat Enterprise Linux Extended Update Support Subscription?](https://access.redhat.com/solutions/22763)

[3] **An active AUS subscription is required** for access to this patch in RHEL AUS.

[What is Advanced mission critical Update Support (AUS)?](https://access.redhat.com/solutions/2975771)

[4] **An active TUS subscription is required** for access to this patch in RHEL TUS.

[5] [Is CPU microcode available via the microcode\_ctl package?](https://access.redhat.com/articles/3540901)

[6] [How to patch my RHV environment for Kernel Side-Channel Attack using Speculative Store Bypass CVE-2018-3639?](https://access.redhat.com/solutions/3452581)

## Mitigation

**Red Hat recommends  customers apply the microcode/firmware update provided by your hardware or CPU vendor and also install these updated kernels as soon as possible.  Software updates can be applied independently from the hardware microcode, but will not take effect until the CPU firmware has been updated.**​

Customers are advised to take a risk-based approach in mitigating this issue. Systems that require high degrees of security and trust should be addressed first, and should be isolated from untrusted systems until such time as treatments can be applied to those systems to reduce the risk of exploitation.

x86 processors from Intel and AMD offer Model Specific Registers(MSRs) which can be used to enable/disable the Speculative Store Bypass function. Using these MSRs, the new kernel updates offer the following kernel command line parameters:

* spec\_store\_bypass\_disable=[auto/on/off/prctl]
  default: **auto**
  + **auto**: when booting with this option, the kernel detects if the processor supports the Speculative Store Bypass(SSB) function, and selects appropriate mitigation.
  + **on**: It turns the Speculative Store Bypass mitigation ON. The processor will not speculatively execute load(read) instructions, before all store(write) addresses are resolved.
  + **off**: It turns the Speculative Store Bypass mitigation OFF. The processor will use the memory disambiguator function to speculatively execute load(read) instructions before earlier store(write) instructions.
  + **prctl**: It enables the Speculative Store Bypass mitigation on a per-thread basis using the prctl(2) interface.
* nospec\_store\_bypass\_disable:
  Disable all mitigations for the Speculative Store Bypass vulnerability.

The kernel update also adds support for the sysfs interface to report if the system processor is vulnerable to the Speculative Store Bypass issue and if corresponding mitigations are in place.

* # cat /sys/devices/system/cpu/vulnerabilities/spec\_store\_bypass

For JVM and/or JIT sandboxed environments, the kernel update introduces a per process control option via prctl(2) interface. It can be used by these applications to enable or disable Speculative Store Bypass on per process basis. An application can invoke prctl(2) as:

* prctl(PR\_SET\_SPECULATION\_CTRL, PR\_SPEC\_STORE\_BYPASS, PR\_SPEC\_ENABLE, 0, 0);
  To enable the Speculative Store Bypass feature. Ie. disable the mitigation.
* prctl(PR\_SET\_SPECULATION\_CTRL, PR\_SPEC\_STORE\_BYPASS, PR\_SPEC\_DISABLE, 0, 0);
  To disable the Speculative Store Bypass feature. Ie. enable the mitigation.

**Note : On RHEL-5 the mitigations are available only for 64-bit systems.**

## Get notified when this content is updated

Follow

Please wait...

## Comments

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from usn.ubuntu.com_fb643f00_20250125_175603.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3698-2: Linux kernel (Trusty HWE) vulnerabilities

2 July 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-lts-trusty](/security/cves?package=linux-lts-trusty) - Linux hardware enablement kernel from Trusty for Precise ESM

## Details

USN-3698-1 fixed vulnerabilities in the Linux kernel for Ubuntu 14.04

LTS. This update provides the corresponding updates for the Linux

Hardware Enablement (HWE) kernel from Ubuntu 14.04 LTS for Ubuntu

12.04 ESM.

It was discovered that the nested KVM implementation in the Linux kernel in

some situations did not properly prevent second level guests from reading

and writing the hardware CR8 register. A local attacker in a guest could

use this to cause a denial of service (system crash). ([CVE-2017-12154](/security/CVE-2017-12154))

Fan Wu, Haoran Qiu, and Shixiong Zhao discovered that the associative array

implementation in the Linux kernel sometimes did not properly handle adding

a new entry. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2017-12193](/security/CVE-2017-12193))

It was discovered that a race condition existed in the ALSA subsystem of

the Linux kernel when creating and deleting a port via ioctl(). A local

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2017-15265](/security/CVE-2017-15265))

It was discovered that a null pointer dereference vulnerability existed in

the DCCP protocol implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash). ([CVE-2018-1130](/security/CVE-2018-1130))

Julian Stecklina and Thomas Prescher discovered that FPU register states

(such as MMX, SSE, and AVX registers) which are lazily restored are

potentially vulnerable to a side channel attack. A local attacker could use

this to expose sensitive information. ([CVE-2018-3665](/security/CVE-2018-3665))

Wang Qize discovered that an information disclosure vulnerability existed

in the SMBus driver for ACPI Embedded Controllers in the Linux kernel. A

local attacker could use this to expose sensitive information (kernel

pointer addresses). ([CVE-2018-5750](/security/CVE-2018-5750))

It was discovered that the SCTP Protocol implementation in the Linux kernel

did not properly validate userspace provided payload lengths in some

situations. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2018-5803](/security/CVE-2018-5803))

It was discovered that an integer overflow error existed in the futex

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash). ([CVE-2018-6927](/security/CVE-2018-6927))

It was discovered that an information leak vulnerability existed in the

floppy driver in the Linux kernel. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2018-7755](/security/CVE-2018-7755))

It was discovered that a memory leak existed in the SAS driver subsystem of

the Linux kernel. A local attacker could use this to cause a denial of

service (memory exhaustion). ([CVE-2018-7757](/security/CVE-2018-7757))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.13.0-153-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0-153.203~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-153.203~precise1)
* [linux-image-3.13.0-153-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0-153.203~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-153.203~precise1)
* [linux-image-generic-lpae-lts-trusty](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0.153.143](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-153.203~precise1)
* [linux-image-generic-lts-trusty](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty)
  -
  [3.13.0.153.143](https://launchpad.net/ubuntu/%2Bsource/linux-lts-trusty/3.13.0-153.203~precise1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-12154](/security/CVE-2017-12154)
* [CVE-2017-12193](/security/CVE-2017-12193)
* [CVE-2017-15265](/security/CVE-2017-15265)
* [CVE-2018-1130](/security/CVE-2018-1130)
* [CVE-2018-3665](/security/CVE-2018-3665)
* [CVE-2018-5750](/security/CVE-2018-5750)
* [CVE-2018-5803](/security/CVE-2018-5803)
* [CVE-2018-6927](/security/CVE-2018-6927)
* [CVE-2018-7755](/security/CVE-2018-7755)
* [CVE-2018-7757](/security/CVE-2018-7757)

## Related notices

* [USN-3487-1](/security/notices/USN-3487-1)
* [USN-3469-1](/security/notices/USN-3469-1)
* [USN-3469-2](/security/notices/USN-3469-2)
* [USN-3698-1](/security/notices/USN-3698-1)
* [USN-3507-1](/security/notices/USN-3507-1)
* [USN-3507-2](/security/notices/USN-3507-2)
* [USN-3509-1](/security/notices/USN-3509-1)
* [USN-3509-2](/security/notices/USN-3509-2)
* [USN-3485-1](/security/notices/USN-3485-1)
* [USN-3485-3](/security/notices/USN-3485-3)
* [USN-3485-2](/security/notices/USN-3485-2)
* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3697-1](/security/notices/USN-3697-1)
* [USN-3697-2](/security/notices/USN-3697-2)
* [USN-3696-2](/security/notices/USN-3696-2)
* [USN-3696-1](/security/notices/USN-3696-1)
* [USN-3631-2](/security/notices/USN-3631-2)
* [USN-3631-1](/security/notices/USN-3631-1)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)
* [USN-3695-2](/security/notices/USN-3695-2)
* [USN-3695-1](/security/notices/USN-3695-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from git.kernel.org_345910a5_20250125_175551.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.13.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alexey Kodanev <alexey.kodanev@oracle.com> | 2018-02-09 17:35:23 +0300 |
| --- | --- | --- |
| committer | David S. Miller <davem@davemloft.net> | 2018-02-09 14:31:38 -0500 |
| commit | [07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c)) | |
| tree | [fa4ac76cfca94b8848007559e04ab1d837ffb055](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c) | |
| parent | [7b30d51a8f830bd1c1103d31d0314ea6f1106707](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7b30d51a8f830bd1c1103d31d0314ea6f1106707) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c&id2=7b30d51a8f830bd1c1103d31d0314ea6f1106707)) | |
| download | [linux-07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c.tar.gz) | |

sctp: verify size of a new chunk in \_sctp\_make\_chunk()When SCTP makes INIT or INIT\_ACK packet the total chunk length
can exceed SCTP\_MAX\_CHUNK\_LEN which leads to kernel panic when
transmitting these packets, e.g. the crash on sending INIT\_ACK:
[ 597.804948] skbuff: skb\_over\_panic: text:00000000ffae06e4 len:120168
put:120156 head:000000007aa47635 data:00000000d991c2de
tail:0x1d640 end:0xfec0 dev:<NULL>
...
[ 597.976970] ------------[ cut here ]------------
[ 598.033408] kernel BUG at net/core/skbuff.c:104!
[ 600.314841] Call Trace:
[ 600.345829] <IRQ>
[ 600.371639] ? sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.436934] skb\_put+0x16c/0x200
[ 600.477295] sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.540630] ? sctp\_packet\_config+0x890/0x890 [sctp]
[ 600.601781] ? \_\_sctp\_packet\_append\_chunk+0x3b4/0xd00 [sctp]
[ 600.671356] ? sctp\_cmp\_addr\_exact+0x3f/0x90 [sctp]
[ 600.731482] sctp\_outq\_flush+0x663/0x30d0 [sctp]
[ 600.788565] ? sctp\_make\_init+0xbf0/0xbf0 [sctp]
[ 600.845555] ? sctp\_check\_transmitted+0x18f0/0x18f0 [sctp]
[ 600.912945] ? sctp\_outq\_tail+0x631/0x9d0 [sctp]
[ 600.969936] sctp\_cmd\_interpreter.isra.22+0x3be1/0x5cb0 [sctp]
[ 601.041593] ? sctp\_sf\_do\_5\_1B\_init+0x85f/0xc30 [sctp]
[ 601.104837] ? sctp\_generate\_t1\_cookie\_event+0x20/0x20 [sctp]
[ 601.175436] ? sctp\_eat\_data+0x1710/0x1710 [sctp]
[ 601.233575] sctp\_do\_sm+0x182/0x560 [sctp]
[ 601.284328] ? sctp\_has\_association+0x70/0x70 [sctp]
[ 601.345586] ? sctp\_rcv+0xef4/0x32f0 [sctp]
[ 601.397478] ? sctp6\_rcv+0xa/0x20 [sctp]
...
Here the chunk size for INIT\_ACK packet becomes too big, mostly
because of the state cookie (INIT packet has large size with
many address parameters), plus additional server parameters.
Later this chunk causes the panic in skb\_put\_data():
skb\_packet\_transmit()
sctp\_packet\_pack()
skb\_put\_data(nskb, chunk->skb->data, chunk->skb->len);
'nskb' (head skb) was previously allocated with packet->size
from u16 'chunk->chunk\_hdr->length'.
As suggested by Marcelo we should check the chunk's length in
\_sctp\_make\_chunk() before trying to allocate skb for it and
discard a chunk if its size bigger than SCTP\_MAX\_CHUNK\_LEN.
Signed-off-by: Alexey Kodanev <alexey.kodanev@oracle.com>
Acked-by: Marcelo Ricardo Leitner <marcelo.leinter@gmail.com>
Acked-by: Neil Horman <nhorman@tuxdriver.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c)

| -rw-r--r-- | [net/sctp/sm\_make\_chunk.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/sctp/sm_make_chunk.c?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c) | 7 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 6 insertions, 1 deletions

| diff --git a/net/sctp/sm\_make\_chunk.c b/net/sctp/sm\_make\_chunk.cindex 793b05ec692be6..d01475f5f71066 100644--- a/[net/sctp/sm\_make\_chunk.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/sctp/sm_make_chunk.c?id=7b30d51a8f830bd1c1103d31d0314ea6f1106707)+++ b/[net/sctp/sm\_make\_chunk.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/sctp/sm_make_chunk.c?id=07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c)@@ -1380,9 +1380,14 @@ static struct sctp\_chunk \*\_sctp\_make\_chunk(const struct sctp\_association \*asoc, struct sctp\_chunk \*retval; struct sk\_buff \*skb; struct sock \*sk;+ int chunklen;++ chunklen = SCTP\_PAD4(sizeof(\*chunk\_hdr) + paylen);+ if (chunklen > SCTP\_MAX\_CHUNK\_LEN)+ goto nodata;  /\* No need to allocate LL here, as this is only a chunk. \*/- skb = alloc\_skb(SCTP\_PAD4(sizeof(\*chunk\_hdr) + paylen), gfp);+ skb = alloc\_skb(chunklen, gfp); if (!skb) goto nodata; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-25 17:54:27 +0000



=== Content from usn.ubuntu.com_7d57a08c_20250125_175602.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3698-1: Linux kernel vulnerabilities

2 July 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

It was discovered that the nested KVM implementation in the Linux kernel in

some situations did not properly prevent second level guests from reading

and writing the hardware CR8 register. A local attacker in a guest could

use this to cause a denial of service (system crash). ([CVE-2017-12154](/security/CVE-2017-12154))

Fan Wu, Haoran Qiu, and Shixiong Zhao discovered that the associative array

implementation in the Linux kernel sometimes did not properly handle adding

a new entry. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2017-12193](/security/CVE-2017-12193))

It was discovered that a race condition existed in the ALSA subsystem of

the Linux kernel when creating and deleting a port via ioctl(). A local

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2017-15265](/security/CVE-2017-15265))

It was discovered that a null pointer dereference vulnerability existed in

the DCCP protocol implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash). ([CVE-2018-1130](/security/CVE-2018-1130))

Julian Stecklina and Thomas Prescher discovered that FPU register states

(such as MMX, SSE, and AVX registers) which are lazily restored are

potentially vulnerable to a side channel attack. A local attacker could use

this to expose sensitive information. ([CVE-2018-3665](/security/CVE-2018-3665))

Wang Qize discovered that an information disclosure vulnerability existed

in the SMBus driver for ACPI Embedded Controllers in the Linux kernel. A

local attacker could use this to expose sensitive information (kernel

pointer addresses). ([CVE-2018-5750](/security/CVE-2018-5750))

It was discovered that the SCTP Protocol implementation in the Linux kernel

did not properly validate userspace provided payload lengths in some

situations. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2018-5803](/security/CVE-2018-5803))

It was discovered that an integer overflow error existed in the futex

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash). ([CVE-2018-6927](/security/CVE-2018-6927))

It was discovered that an information leak vulnerability existed in the

floppy driver in the Linux kernel. A local attacker could use this to

expose sensitive information (kernel memory). ([CVE-2018-7755](/security/CVE-2018-7755))

It was discovered that a memory leak existed in the SAS driver subsystem of

the Linux kernel. A local attacker could use this to cause a denial of

service (memory exhaustion). ([CVE-2018-7757](/security/CVE-2018-7757))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-3.13.0-153-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-153.203](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-153.203)
* [linux-image-3.13.0-153-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-153.203](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-153.203)
* [linux-image-3.13.0-153-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-153.203](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-153.203)
* [linux-image-3.13.0-153-powerpc-e500](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-153.203](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-153.203)
* [linux-image-3.13.0-153-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-153.203](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-153.203)
* [linux-image-3.13.0-153-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-153.203](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-153.203)
* [linux-image-3.13.0-153-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-153.203](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-153.203)
* [linux-image-3.13.0-153-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-153.203](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-153.203)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-12154](/security/CVE-2017-12154)
* [CVE-2017-12193](/security/CVE-2017-12193)
* [CVE-2017-15265](/security/CVE-2017-15265)
* [CVE-2018-1130](/security/CVE-2018-1130)
* [CVE-2018-3665](/security/CVE-2018-3665)
* [CVE-2018-5750](/security/CVE-2018-5750)
* [CVE-2018-5803](/security/CVE-2018-5803)
* [CVE-2018-6927](/security/CVE-2018-6927)
* [CVE-2018-7755](/security/CVE-2018-7755)
* [CVE-2018-7757](/security/CVE-2018-7757)

## Related notices

* [USN-3487-1](/security/notices/USN-3487-1)
* [USN-3698-2](/security/notices/USN-3698-2)
* [USN-3469-1](/security/notices/USN-3469-1)
* [USN-3469-2](/security/notices/USN-3469-2)
* [USN-3507-1](/security/notices/USN-3507-1)
* [USN-3507-2](/security/notices/USN-3507-2)
* [USN-3509-1](/security/notices/USN-3509-1)
* [USN-3509-2](/security/notices/USN-3509-2)
* [USN-3485-1](/security/notices/USN-3485-1)
* [USN-3485-3](/security/notices/USN-3485-3)
* [USN-3485-2](/security/notices/USN-3485-2)
* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3654-1](/security/notices/USN-3654-1)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3697-1](/security/notices/USN-3697-1)
* [USN-3697-2](/security/notices/USN-3697-2)
* [USN-3696-2](/security/notices/USN-3696-2)
* [USN-3696-1](/security/notices/USN-3696-1)
* [USN-3631-2](/security/notices/USN-3631-2)
* [USN-3631-1](/security/notices/USN-3631-1)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)
* [USN-3695-2](/security/notices/USN-3695-2)
* [USN-3695-1](/security/notices/USN-3695-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.redhat.com_60f5034b_20250126_104653.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1674935)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1674935)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1674935)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1674935

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1674935**](show_bug.cgi?id=1674935)
- update the MRG 2.5.z 3.10 kernel-rt sources

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
update the MRG 2.5.z 3.10 kernel-rt sources

| | [Keywords](describekeywords.cgi): |  | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat Enterprise MRG | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat Enterprise MRG "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | realtime-kernel | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 2.5 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86\_64 | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Target Release](page.cgi?id=fields.html#target_release): | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Luis Claudio R. Goncalves | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Qiao Zhao | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1674935&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1674935&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2019-02-11 17:33 UTC by Beth Uptagrafft | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2019-03-26 07:45 UTC ([History](show_activity.cgi?id=1674935)) | | [CC List:](page.cgi?id=fields.html#cclist) | 3 users (show)  bhu lgoncalv qzhao | | Fixed In Version: | kernel-rt-3.10.0-693.45.1.rt56.637.el6rt | | | Doc Type: | If docs needed, set a value | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-03-26 07:45:23 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2019:0641](https://access.redhat.com/errata/RHSA-2019%3A0641) | 0 | None | None | None | 2019-03-26 07:45:48 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1674935#c0)  Beth Uptagrafft    2019-02-11 17:33:06 UTC  ``` The MRG kernel-rt sources needs updating with the latest 3.10 sources.   ```  [Comment 6](show_bug.cgi?id=1674935#c6)  errata-xmlrpc    2019-03-26 07:45:23 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2019:0641](https://access.redhat.com/errata/RHSA-2019%3A0641)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1674935&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from secuniaresearch.flexerasoftware.com_a9c0a5f4_20250125_175553.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from www.redhat.com_eb298ee5_20250126_104652.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_0a442cdd_20250126_104709.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_b0d893cb_20250126_104710.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.spinics.net_b37bf9a1_20250125_175606.html ===


# sctp: skb\_over\_panic on INIT/INIT\_ACK packet sending

[[Date Prev](msg07035.html)][[Date Next](msg07037.html)][[Thread Prev](msg07028.html)][[Thread Next](msg07037.html)][[Date Index](mail5.html#07036)][[Thread Index](thrd5.html#07036)]

---

* *To*: Neil Horman <nhorman@xxxxxxxxxxxxx>, Marcelo Ricardo Leitner <marcelo.leitner@xxxxxxxxx>, Vlad Yasevich <vyasevich@xxxxxxxxx>
* *Subject*: sctp: skb\_over\_panic on INIT/INIT\_ACK packet sending
* *From*: Alexey Kodanev <alexey.kodanev@xxxxxxxxxx>
* *Date*: Fri, 9 Feb 2018 02:38:59 +0300
* *Cc*: netdev <netdev@xxxxxxxxxxxxxxx>, linux-sctp@xxxxxxxxxxxxxxx
* *User-agent*: Mozilla/5.0 (X11; Linux x86\_64; rv:52.0) Gecko/20100101 Thunderbird/52.6.0

---

```
Hi,

Got the following panic when the received INIT packet has a lot of
address parameters, so that the INIT_ACK chunksize exceeds
SCTP_MAX_CHUNK_LEN:

[  597.804948] skbuff: skb_over_panic: text:00000000ffae06e4 len:120168 put:120156
               head:000000007aa47635 data:00000000d991c2de tail:0x1d640 end:0xfec0 dev:<NULL>
...
[  597.976970] ------------[ cut here ]------------
[  598.033408] kernel BUG at net/core/skbuff.c:104!
[  600.314841] Call Trace:
[  600.345829]  <IRQ>
[  600.371639]  ? sctp_packet_transmit+0x2095/0x26d0 [sctp]
[  600.436934]  skb_put+0x16c/0x200
[  600.477295]  sctp_packet_transmit+0x2095/0x26d0 [sctp]
[  600.540630]  ? sctp_packet_config+0x890/0x890 [sctp]
[  600.601781]  ? __sctp_packet_append_chunk+0x3b4/0xd00 [sctp]
[  600.671356]  ? sctp_cmp_addr_exact+0x3f/0x90 [sctp]
[  600.731482]  sctp_outq_flush+0x663/0x30d0 [sctp]
[  600.788565]  ? sctp_make_init+0xbf0/0xbf0 [sctp]
[  600.845555]  ? sctp_check_transmitted+0x18f0/0x18f0 [sctp]
[  600.912945]  ? sctp_outq_tail+0x631/0x9d0 [sctp]
[  600.969936]  sctp_cmd_interpreter.isra.22+0x3be1/0x5cb0 [sctp]
[  601.041593]  ? sctp_sf_do_5_1B_init+0x85f/0xc30 [sctp]
[  601.104837]  ? sctp_generate_t1_cookie_event+0x20/0x20 [sctp]
[  601.175436]  ? sctp_eat_data+0x1710/0x1710 [sctp]
[  601.233575]  sctp_do_sm+0x182/0x560 [sctp]
[  601.284328]  ? sctp_has_association+0x70/0x70 [sctp]
[  601.345586]  ? sctp_rcv+0xef4/0x32f0 [sctp]
[  601.397478]  ? sctp6_rcv+0xa/0x20 [sctp]
...

Here the chunk size for INIT_ACK packet may become too big, mostly
because of the cookielen. Tried on local machine so both addrlen
and cookielen was big: addrlen 39960 cookielen 80168.

Not sure how to fix it correctly, may be we need a check here
or add it to sctp_make_control()?

diff --git a/net/sctp/sm_make_chunk.c b/net/sctp/sm_make_chunk.c
index 793b05e..c27564c 100644
--- a/net/sctp/sm_make_chunk.c
+++ b/net/sctp/sm_make_chunk.c
@@ -475,6 +475,9 @@ struct sctp_chunk *sctp_make_init_ack(const struct sctp_association *asoc,
        if (num_ext)
                chunksize += SCTP_PAD4(sizeof(ext_param) + num_ext);

+       if (chunksize > SCTP_MAX_CHUNK_LEN)
+               goto nomem_chunk;
+
        /* Now allocate and fill out the chunk.  */
        retval = sctp_make_control(asoc, SCTP_CID_INIT_ACK, 0, chunksize, gfp);
        if (!retval)

And for INIT as well...

Otherwise this chunk goes to skb_packet_transmit() -> sctp_packet_pack()
where panic on

  skb_put_data(nskb, chunk->skb->data, chunk->skb->len);

nskb (head skb) was previously allocated with packet->size that looks
like getting the chunk size from u16 chunk_hdr->length.

Thanks,
Alexey
--
To unsubscribe from this list: send the line "unsubscribe linux-sctp" in
the body of a message to majordomo@xxxxxxxxxxxxxxx
More majordomo info at  <http://vger.kernel.org/majordomo-info.html>

```

---

* **Follow-Ups**:
  + **[Re: sctp: skb\_over\_panic on INIT/INIT\_ACK packet sending](msg07037.html)**
    - *From:* Marcelo Ricardo Leitner

* Prev by Date:
  **[Re: [PATCH net v3] sctp: fix dst refcnt leak in sctp\_v4\_get\_dst](msg07035.html)**
* Next by Date:
  **[Re: sctp: skb\_over\_panic on INIT/INIT\_ACK packet sending](msg07037.html)**
* Previous by thread:
  **[[PATCH net v3] sctp: fix dst refcnt leak in sctp\_v4\_get\_dst](msg07028.html)**
* Next by thread:
  **[Re: sctp: skb\_over\_panic on INIT/INIT\_ACK packet sending](msg07037.html)**
* Index(es):
  + [**Date**](mail5.html#07036)
  + [**Thread**](thrd5.html#07036)

[[Index of Archives]](/lists/)

[[Linux Networking Development]](/lists/netdev/)

[[Linux OMAP]](/lists/linux-omap/)

[[Linux USB Devel]](/lists/linux-usb/)

[[Linux Audio Users]](/lists/linux-audio-users/)

[[Yosemite News]](https://yosemitenews.info/)

[[Linux Kernel]](/lists/kernel/)

[[Linux SCSI]](/lists/linux-scsi/)

---

|  | [Powered by Linux](/lists/) |
| --- | --- |



=== Content from cdn.kernel.org_b97a9c50_20250125_175546.html ===
commit 968369e0e44dbd9a362541038049ddc0b13175ea
Author: Greg Kroah-Hartman
Date: Thu Mar 8 22:47:50 2018 -0800
Linux 4.15.8
commit ddf33af2f81560ebbff114f0ef47345beb5fbe23
Author: Laszlo Toth
Date: Tue Feb 13 21:43:43 2018 +0100
platform/x86: dell-laptop: fix kbd\_get\_state's request value
commit eca39e7f0cdb9bde4003a29149fa695e876c6f73 upstream.
Commit 9862b43624a5 ("platform/x86: dell-laptop: Allocate buffer on heap
rather than globally")
broke one request, changed it back to the original value.
Tested on a Dell E6540, backlight came back.
Fixes: 9862b43624a5 ("platform/x86: dell-laptop: Allocate buffer on heap rather than globally")
Signed-off-by: Laszlo Toth
Reviewed-by: Pali Rohár
Reviewed-by: Mario Limonciello
Signed-off-by: Andy Shevchenko
Signed-off-by: Greg Kroah-Hartman
commit 344fb43606381e08d45ea6ec1e08cf0afa59fe70
Author: NeilBrown
Date: Sat Feb 3 09:19:30 2018 +1100
md: only allow remove\_and\_add\_spares when no sync\_thread running.
commit 39772f0a7be3b3dc26c74ea13fe7847fd1522c8b upstream.
The locking protocols in md assume that a device will
never be removed from an array during resync/recovery/reshape.
When that isn't happening, rcu or reconfig\_mutex is needed
to protect an rdev pointer while taking a refcount. When
it is happening, that protection isn't needed.
Unfortunately there are cases were remove\_and\_add\_spares() is
called when recovery might be happening: is state\_store(),
slot\_store() and hot\_remove\_disk().
In each case, this is just an optimization, to try to expedite
removal from the personality so the device can be removed from
the array. If resync etc is happening, we just have to wait
for md\_check\_recover to find a suitable time to call
remove\_and\_add\_spares().
This optimization and not essential so it doesn't
matter if it fails.
So change remove\_and\_add\_spares() to abort early if
resync/recovery/reshape is happening, unless it is called
from md\_check\_recovery() as part of a newly started recovery.
The parameter "this" is only NULL when called from
md\_check\_recovery() so when it is NULL, there is no need to abort.
As this can result in a NULL dereference, the fix is suitable
for -stable.
cc: yuyufen
Cc: Tomasz Majchrzak
Fixes: 8430e7e0af9a ("md: disconnect device from personality before trying to remove it.")
Cc: stable@ver.kernel.org (v4.8+)
Signed-off-by: NeilBrown
Signed-off-by: Shaohua Li
Signed-off-by: Greg Kroah-Hartman
commit f946a7289f2cdd07c7ccec4695ce19cd5523e735
Author: Nicholas Piggin
Date: Wed Feb 7 11:20:02 2018 +1000
powerpc/64s/radix: Boot-time NULL pointer protection using a guard-PID
commit eeb715c3e995fbdda0cc05e61216c6c5609bce66 upstream.
This change restores and formalises the behaviour that access to NULL
or other user addresses by the kernel during boot should fault rather
than succeed and modify memory. This was inadvertently broken when
fixing another bug, because it was previously not well defined and
only worked by chance.
powerpc/64s/radix uses high address bits to select an address space
"quadrant", which determines which PID and LPID are used to translate
the rest of the address (effective PID, effective LPID). The kernel
mapping at 0xC... selects quadrant 3, which uses PID=0 and LPID=0. So
the kernel page tables are installed in the PID 0 process table entry.
An address at 0x0... selects quadrant 0, which uses PID=PIDR for
translating the rest of the address (that is, it uses the value of the
PIDR register as the effective PID). If PIDR=0, then the translation
is performed with the PID 0 process table entry page tables. This is
the kernel mapping, so we effectively get another copy of the kernel
address space at 0. A NULL pointer access will access physical memory
address 0.
To prevent duplicating the kernel address space in quadrant 0, this
patch allocates a guard PID containing no translations, and
initializes PIDR with this during boot, before the MMU is switched on.
Any kernel access to quadrant 0 will use this guard PID for
translation and find no valid mappings, and therefore fault.
After boot, this PID will be switchd away to user context PIDs, but
those contain user mappings (and usually NULL pointer protection)
rather than kernel mapping, which is much safer (and by design). It
may be in future this is tightened further, which the guard PID could
be used for.
Commit 371b8044 ("powerpc/64s: Initialize ISAv3 MMU registers before
setting partition table"), introduced this problem because it zeroes
PIDR at boot. However previously the value was inherited from firmware
or kexec, which is not robust and can be zero (e.g., mambo).
Fixes: 371b80447ff3 ("powerpc/64s: Initialize ISAv3 MMU registers before setting partition table")
Cc: stable@vger.kernel.org # v4.15+
Reported-by: Florian Weimer
Tested-by: Mauricio Faria de Oliveira
Signed-off-by: Nicholas Piggin
Signed-off-by: Michael Ellerman
[mauricfo: backport to v4.15.7 (context line updates only) and re-test]
Signed-off-by: Mauricio Faria de Oliveira
Acked-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit 39f428ebf4f1546792171d45890be5ae26307df5
Author: Adam Ford
Date: Thu Jan 25 14:10:37 2018 -0600
ARM: dts: LogicPD Torpedo: Fix I2C1 pinmux
commit 74402055a2d3ec998a1ded599e86185a27d9bbf4 upstream.
The pinmuxing was missing for I2C1 which was causing intermittent issues
with the PMIC which is connected to I2C1. The bootloader did not quite
configure the I2C1 either, so when running at 2.6MHz, it was generating
errors at time.
This correctly sets the I2C1 pinmuxing so it can operate at 2.6MHz
Fixes: 687c27676151 ("ARM: dts: Add minimal support for LogicPD Torpedo
DM3730 devkit")
Signed-off-by: Adam Ford
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit 6dcd8259f418013e06474e700fc0938da6e1f19e
Author: Adam Ford
Date: Sat Jan 27 15:27:05 2018 -0600
ARM: dts: LogicPD SOM-LV: Fix I2C1 pinmux
commit 84c7efd607e7fb6933920322086db64654f669b2 upstream.
The pinmuxing was missing for I2C1 which was causing intermittent issues
with the PMIC which is connected to I2C1. The bootloader did not quite
configure the I2C1 either, so when running at 2.6MHz, it was generating
errors at times.
This correctly sets the I2C1 pinmuxing so it can operate at 2.6MHz
Fixes: ab8dd3aed011 ("ARM: DTS: Add minimal Support for Logic PD DM3730
SOM-LV")
Signed-off-by: Adam Ford
Signed-off-by: Tony Lindgren
Signed-off-by: Greg Kroah-Hartman
commit 97086e143e20d7e172b652e7b7e02da64b6412ce
Author: Kai Heng Feng
Date: Mon Feb 5 13:19:24 2018 +0800
ACPI / bus: Parse tables as term\_list for Dell XPS 9570 and Precision M5530
commit 36904703aeeeb6cd31993f1353c8325006229f9a upstream.
The i2c touchpad on Dell XPS 9570 and Precision M5530 doesn't work out
of box.
The touchpad relies on its \_INI method to update its \_HID value from
XXXX0000 to SYNA2393.
Also, the \_STA relies on value of I2CN to report correct status.
Set acpi\_gbl\_parse\_table\_as\_term\_list so the value of I2CN can be
correctly set up, and \_INI can get run. The ACPI table in this machine
is designed to get parsed this way.
Also, change the quirk table to a more generic name.
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=198515
Signed-off-by: Kai-Heng Feng
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit f1bf982a4fea28cbdcf0b37bad9fe97a5aa67e18
Author: Eric Biggers
Date: Wed Jan 31 17:30:21 2018 -0800
KVM/x86: remove WARN\_ON() for when vm\_munmap() fails
commit 103c763c72dd2df3e8c91f2d7ec88f98ed391111 upstream.
On x86, special KVM memslots such as the TSS region have anonymous
memory mappings created on behalf of userspace, and these mappings are
removed when the VM is destroyed.
It is however possible for removing these mappings via vm\_munmap() to
fail. This can most easily happen if the thread receives SIGKILL while
it's waiting to acquire ->mmap\_sem. This triggers the 'WARN\_ON(r < 0)'
in \_\_x86\_set\_memory\_region(). syzkaller was able to hit this, using
'exit()' to send the SIGKILL. Note that while the vm\_munmap() failure
results in the mapping not being removed immediately, it is not leaked
forever but rather will be freed when the process exits.
It's not really possible to handle this failure properly, so almost
every other caller of vm\_munmap() doesn't check the return value. It's
a limitation of having the kernel manage these mappings rather than
userspace.
So just remove the WARN\_ON() so that users can't spam the kernel log
with this warning.
Fixes: f0d648bdf0a5 ("KVM: x86: map/unmap private slots in \_\_x86\_set\_memory\_region")
Reported-by: syzbot
Signed-off-by: Eric Biggers
Signed-off-by: Radim Krčmář
Signed-off-by: Jack Wang
Signed-off-by: Greg Kroah-Hartman
commit 21043b0e128e3fbcb38d26eb3a6f2d8f01c8b8a4
Author: Radim Krčmář
Date: Thu Mar 1 15:24:25 2018 +0100
KVM: x86: fix vcpu initialization with userspace lapic
commit b7e31be385584afe7f073130e8e570d53c95f7fe upstream.
Moving the code around broke this rare configuration.
Use this opportunity to finally call lapic reset from vcpu reset.
Reported-by: syzbot+fb7a33a4b6c35007a72b@syzkaller.appspotmail.com
Suggested-by: Paolo Bonzini
Fixes: 0b2e9904c159 ("KVM: x86: move LAPIC initialization after VMCS creation")
Cc: stable@vger.kernel.org
Signed-off-by: Radim Krčmář
Signed-off-by: Greg Kroah-Hartman
commit 100b8cbd68b1239656d83d27c2d49195e1a15795
Author: Paolo Bonzini
Date: Thu Feb 22 16:43:18 2018 +0100
KVM/VMX: Optimize vmx\_vcpu\_run() and svm\_vcpu\_run() by marking the RDMSR path as unlikely()
commit 946fbbc13dce68902f64515b610eeb2a6c3d7a64 upstream.
vmx\_vcpu\_run() and svm\_vcpu\_run() are large functions, and giving
branch hints to the compiler can actually make a substantial cycle
difference by keeping the fast path contiguous in memory.
With this optimization, the retpoline-guest/retpoline-host case is
about 50 cycles faster.
Signed-off-by: Paolo Bonzini
Reviewed-by: Jim Mattson
Cc: David Woodhouse
Cc: KarimAllah Ahmed
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Radim Krčmář
Cc: Thomas Gleixner
Cc: kvm@vger.kernel.org
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/20180222154318.20361-3-pbonzini@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 16f7730b611a675a23eb0b0f3690f3f60c386989
Author: Paolo Bonzini
Date: Fri Feb 23 23:29:32 2018 +0100
KVM: x86: move LAPIC initialization after VMCS creation
commit 0b2e9904c15963e715d33e5f3f1387f17d19333a upstream.
The initial reset of the local APIC is performed before the VMCS has been
created, but it tries to do a vmwrite:
vmwrite error: reg 810 value 4a00 (err 18944)
CPU: 54 PID: 38652 Comm: qemu-kvm Tainted: G W I 4.16.0-0.rc2.git0.1.fc28.x86\_64 #1
Hardware name: Intel Corporation S2600CW/S2600CW, BIOS SE5C610.86B.01.01.0003.090520141303 09/05/2014
Call Trace:
vmx\_set\_rvi [kvm\_intel]
vmx\_hwapic\_irr\_update [kvm\_intel]
kvm\_lapic\_reset [kvm]
kvm\_create\_lapic [kvm]
kvm\_arch\_vcpu\_init [kvm]
kvm\_vcpu\_init [kvm]
vmx\_create\_vcpu [kvm\_intel]
kvm\_vm\_ioctl [kvm]
Move it later, after the VMCS has been created.
Fixes: 4191db26b714 ("KVM: x86: Update APICv on APIC reset")
Cc: stable@vger.kernel.org
Cc: Liran Alon
Signed-off-by: Paolo Bonzini
Signed-off-by: Greg Kroah-Hartman
commit 2ccf7f43562b5f1c358ff5780a8fcc1c5460a1f8
Author: Paolo Bonzini
Date: Thu Feb 22 16:43:17 2018 +0100
KVM/x86: Remove indirect MSR op calls from SPEC\_CTRL
commit ecb586bd29c99fb4de599dec388658e74388daad upstream.
Having a paravirt indirect call in the IBRS restore path is not a
good idea, since we are trying to protect from speculative execution
of bogus indirect branch targets. It is also slower, so use
native\_wrmsrl() on the vmentry path too.
Signed-off-by: Paolo Bonzini
Reviewed-by: Jim Mattson
Cc: David Woodhouse
Cc: KarimAllah Ahmed
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Radim Krčmář
Cc: Thomas Gleixner
Cc: kvm@vger.kernel.org
Cc: stable@vger.kernel.org
Fixes: d28b387fb74da95d69d2615732f50cceb38e9a4d
Link: http://lkml.kernel.org/r/20180222154318.20361-2-pbonzini@redhat.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 1b7168079777fd87976bf92c588516e6212a9c69
Author: Wanpeng Li
Date: Tue Feb 13 15:36:00 2018 +0100
KVM: mmu: Fix overlap between public and private memslots
commit b28676bb8ae4569cced423dc2a88f7cb319d5379 upstream.
Reported by syzkaller:
pte\_list\_remove: ffff9714eb1f8078 0->BUG
------------[ cut here ]------------
kernel BUG at arch/x86/kvm/mmu.c:1157!
invalid opcode: 0000 [#1] SMP
RIP: 0010:pte\_list\_remove+0x11b/0x120 [kvm]
Call Trace:
drop\_spte+0x83/0xb0 [kvm]
mmu\_page\_zap\_pte+0xcc/0xe0 [kvm]
kvm\_mmu\_prepare\_zap\_page+0x81/0x4a0 [kvm]
kvm\_mmu\_invalidate\_zap\_all\_pages+0x159/0x220 [kvm]
kvm\_arch\_flush\_shadow\_all+0xe/0x10 [kvm]
kvm\_mmu\_notifier\_release+0x6c/0xa0 [kvm]
? kvm\_mmu\_notifier\_release+0x5/0xa0 [kvm]
\_\_mmu\_notifier\_release+0x79/0x110
? \_\_mmu\_notifier\_release+0x5/0x110
exit\_mmap+0x15a/0x170
? do\_exit+0x281/0xcb0
mmput+0x66/0x160
do\_exit+0x2c9/0xcb0
? \_\_context\_tracking\_exit.part.5+0x4a/0x150
do\_group\_exit+0x50/0xd0
SyS\_exit\_group+0x14/0x20
do\_syscall\_64+0x73/0x1f0
entry\_SYSCALL64\_slow\_path+0x25/0x25
The reason is that when creates new memslot, there is no guarantee for new
memslot not overlap with private memslots. This can be triggered by the
following program:
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
#include
long r[16];
int main()
{
void \*p = valloc(0x4000);
r[2] = open("/dev/kvm", 0);
r[3] = ioctl(r[2], KVM\_CREATE\_VM, 0x0ul);
uint64\_t addr = 0xf000;
ioctl(r[3], KVM\_SET\_IDENTITY\_MAP\_ADDR, &addr);
r[6] = ioctl(r[3], KVM\_CREATE\_VCPU, 0x0ul);
ioctl(r[3], KVM\_SET\_TSS\_ADDR, 0x0ul);
ioctl(r[6], KVM\_RUN, 0);
ioctl(r[6], KVM\_RUN, 0);
struct kvm\_userspace\_memory\_region mr = {
.slot = 0,
.flags = KVM\_MEM\_LOG\_DIRTY\_PAGES,
.guest\_phys\_addr = 0xf000,
.memory\_size = 0x4000,
.userspace\_addr = (uintptr\_t) p
};
ioctl(r[3], KVM\_SET\_USER\_MEMORY\_REGION, &mr);
return 0;
}
This patch fixes the bug by not adding a new memslot even if it
overlaps with private memslots.
Reported-by: Dmitry Vyukov
Cc: Paolo Bonzini
Cc: Radim Krčmář
Cc: Dmitry Vyukov
Cc: Eric Biggers
Cc: stable@vger.kernel.org
Signed-off-by: Wanpeng Li
commit 0a5e830dc9336af3cd515913244164dedcd1c4e4
Author: Wanpeng Li
Date: Thu Feb 8 15:32:45 2018 +0800
KVM: X86: Fix SMRAM accessing even if VM is shutdown
commit 95e057e25892eaa48cad1e2d637b80d0f1a4fac5 upstream.
Reported by syzkaller:
WARNING: CPU: 6 PID: 2434 at arch/x86/kvm/vmx.c:6660 handle\_ept\_misconfig+0x54/0x1e0 [kvm\_intel]
CPU: 6 PID: 2434 Comm: repro\_test Not tainted 4.15.0+ #4
RIP: 0010:handle\_ept\_misconfig+0x54/0x1e0 [kvm\_intel]
Call Trace:
vmx\_handle\_exit+0xbd/0xe20 [kvm\_intel]
kvm\_arch\_vcpu\_ioctl\_run+0xdaf/0x1d50 [kvm]
kvm\_vcpu\_ioctl+0x3e9/0x720 [kvm]
do\_vfs\_ioctl+0xa4/0x6a0
SyS\_ioctl+0x79/0x90
entry\_SYSCALL\_64\_fastpath+0x25/0x9c
The testcase creates a first thread to issue KVM\_SMI ioctl, and then creates
a second thread to mmap and operate on the same vCPU. This triggers a race
condition when running the testcase with multiple threads. Sometimes one thread
exits with a triple fault while another thread mmaps and operates on the same
vCPU. Because CS=0x3000/IP=0x8000 is not mapped, accessing the SMI handler
results in an EPT misconfig. This patch fixes it by returning RET\_PF\_EMULATE
in kvm\_handle\_bad\_page(), which will go on to cause an emulation failure and an
exit with KVM\_EXIT\_INTERNAL\_ERROR.
Reported-by: syzbot+c1d9517cab094dae65e446c0c5b4de6c40f4dc58@syzkaller.appspotmail.com
Cc: Paolo Bonzini
Cc: Radim Krčmář
Cc: stable@vger.kernel.org
Signed-off-by: Wanpeng Li
Signed-off-by: Paolo Bonzini
Signed-off-by: Greg Kroah-Hartman
commit 4c1a4f2e0f9f905ab37e08cf3b48dd95b7df00b7
Author: Arnd Bergmann
Date: Fri Feb 2 16:07:34 2018 +0100
ARM: kvm: fix building with gcc-8
commit 67870eb1204223598ea6d8a4467b482e9f5875b5 upstream.
In banked-sr.c, we use a top-level '\_\_asm\_\_(".arch\_extension virt")'
statement to allow compilation of a multi-CPU kernel for ARMv6
and older ARMv7-A that don't normally support access to the banked
registers.
This is considered to be a programming error by the gcc developers
and will no longer work in gcc-8, where we now get a build error:
/tmp/cc4Qy7GR.s:34: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_usr'
/tmp/cc4Qy7GR.s:41: Error: Banked registers are not available with this architecture. -- `mrs r3,ELR\_hyp'
/tmp/cc4Qy7GR.s:55: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_svc'
/tmp/cc4Qy7GR.s:62: Error: Banked registers are not available with this architecture. -- `mrs r3,LR\_svc'
/tmp/cc4Qy7GR.s:69: Error: Banked registers are not available with this architecture. -- `mrs r3,SPSR\_svc'
/tmp/cc4Qy7GR.s:76: Error: Banked registers are not available with this architecture. -- `mrs r3,SP\_abt'
Passign the '-march-armv7ve' flag to gcc works, and is ok here, because
we know the functions won't ever be called on pre-ARMv7VE machines.
Unfortunately, older compiler versions (4.8 and earlier) do not understand
that flag, so we still need to keep the asm around.
Backporting to stable kernels (4.6+) is needed to allow those to be built
with future compilers as well.
Link: https://gcc.gnu.org/bugzilla/show\_bug.cgi?id=84129
Fixes: 33280b4cd1dc ("ARM: KVM: Add banked registers save/restore")
Cc: stable@vger.kernel.org
Signed-off-by: Arnd Bergmann
Signed-off-by: Christoffer Dall
Signed-off-by: Greg Kroah-Hartman
commit f83ed2a349e63a7365a7f9ba1b66cc374e061dea
Author: Ulf Magnusson
Date: Mon Feb 5 02:21:13 2018 +0100
ARM: mvebu: Fix broken PL310\_ERRATA\_753970 selects
commit 8aa36a8dcde3183d84db7b0d622ffddcebb61077 upstream.
The MACH\_ARMADA\_375 and MACH\_ARMADA\_38X boards select ARM\_ERRATA\_753970,
but it was renamed to PL310\_ERRATA\_753970 by commit fa0ce4035d48 ("ARM:
7162/1: errata: tidy up Kconfig options for PL310 errata workarounds").
Fix the selects to use the new name.
Discovered with the
https://github.com/ulfalizer/Kconfiglib/blob/master/examples/list\_undefined.py
script.
Fixes: fa0ce4035d48 ("ARM: 7162/1: errata: tidy up Kconfig options for
PL310 errata workarounds"
cc: stable@vger.kernel.org
Signed-off-by: Ulf Magnusson
Signed-off-by: Gregory CLEMENT
Signed-off-by: Greg Kroah-Hartman
commit 2dc5b6bbd897ec996adc27c2f98b8f70e83b83e9
Author: Daniel Schultz
Date: Tue Feb 13 10:44:32 2018 +0100
ARM: dts: rockchip: Remove 1.8 GHz operation point from phycore som
commit 5ce0bad4ccd04c8a989e94d3c89e4e796ac22e48 upstream.
Rockchip recommends to run the CPU cores only with operations points of
1.6 GHz or lower.
Removed the cpu0 node with too high operation points and use the default
values instead.
Fixes: 903d31e34628 ("ARM: dts: rockchip: Add support for phyCORE-RK3288 SoM")
Cc: stable@vger.kernel.org
Signed-off-by: Daniel Schultz
Signed-off-by: Heiko Stuebner
Signed-off-by: Greg Kroah-Hartman
commit 6e5bcbc089fcd79a8afd20cd1095d5b2cf23103d
Author: Arnd Bergmann
Date: Wed Feb 21 13:18:49 2018 +0100
ARM: orion: fix orion\_ge00\_switch\_board\_info initialization
commit 8337d083507b9827dfb36d545538b7789df834fd upstream.
A section type mismatch warning shows up when building with LTO,
since orion\_ge00\_mvmdio\_bus\_name was put in \_\_initconst but not marked
const itself:
include/linux/of.h: In function 'spear\_setup\_of\_timer':
arch/arm/mach-spear/time.c:207:34: error: 'timer\_of\_match' causes a section type conflict with 'orion\_ge00\_mvmdio\_bus\_name'
static const struct of\_device\_id timer\_of\_match[] \_\_initconst = {
^
arch/arm/plat-orion/common.c:475:32: note: 'orion\_ge00\_mvmdio\_bus\_name' was declared here
static \_\_initconst const char \*orion\_ge00\_mvmdio\_bus\_name = "orion-mii";
^
As pointed out by Andrew Lunn, it should in fact be 'const' but not
'\_\_initconst' because the string is never copied but may be accessed
after the init sections are freed. To fix that, I get rid of the
extra symbol and rewrite the initialization in a simpler way that
assigns both the bus\_id and modalias statically.
I spotted another theoretical bug in the same place, where d->netdev[i]
may be an out of bounds access, this can be fixed by moving the device
assignment into the loop.
Cc: stable@vger.kernel.org
Reviewed-by: Andrew Lunn
Signed-off-by: Arnd Bergmann
Signed-off-by: Greg Kroah-Hartman
commit d95636d1812036b1f9a53d58a18f595239459e8e
Author: Jan Beulich
Date: Mon Feb 19 07:48:11 2018 -0700
x86/mm: Fix {pmd,pud}\_{set,clear}\_flags()
commit 842cef9113c2120f74f645111ded1e020193d84c upstream.
Just like pte\_{set,clear}\_flags() their PMD and PUD counterparts should
not do any address translation. This was outright wrong under Xen
(causing a dead boot with no useful output on "suitable" systems), and
produced needlessly more complicated code (even if just slightly) when
paravirt was enabled.
Signed-off-by: Jan Beulich
Reviewed-by: Juergen Gross
Acked-by: Thomas Gleixner
Cc: Andy Lutomirski
Cc: Boris Ostrovsky
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Denys Vlasenko
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/5A8AF1BB02000078001A91C3@prv-mh.provo.novell.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit f48c77b42e129a71965c56a2e1f835a983eccc83
Author: Rasmus Villemoes
Date: Fri Feb 16 13:20:48 2018 -0800
nospec: Allow index argument to have const-qualified type
commit b98c6a160a057d5686a8c54c79cc6c8c94a7d0c8 upstream.
The last expression in a statement expression need not be a bare
variable, quoting gcc docs
The last thing in the compound statement should be an expression
followed by a semicolon; the value of this subexpression serves as the
value of the entire construct.
and we already use that in e.g. the min/max macros which end with a
ternary expression.
This way, we can allow index to have const-qualified type, which will in
some cases avoid the need for introducing a local copy of index of
non-const qualified type. That, in turn, can prevent readers not
familiar with the internals of array\_index\_nospec from wondering about
the seemingly redundant extra variable, and I think that's worthwhile
considering how confusing the whole \_nospec business is.
The expression \_i&\_mask has type unsigned long (since that is the type
of \_mask, and the BUILD\_BUG\_ONs guarantee that \_i will get promoted to
that), so in order not to change the type of the whole expression, add
a cast back to typeof(\_i).
Signed-off-by: Rasmus Villemoes
Signed-off-by: Dan Williams
Acked-by: Linus Torvalds
Cc: Andy Lutomirski
Cc: Arjan van de Ven
Cc: Borislav Petkov
Cc: Dave Hansen
Cc: David Woodhouse
Cc: Greg Kroah-Hartman
Cc: Josh Poimboeuf
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: Will Deacon
Cc: linux-arch@vger.kernel.org
Cc: stable@vger.kernel.org
Link: http://lkml.kernel.org/r/151881604837.17395.10812767547837568328.stgit@dwillia2-desk3.amr.corp.intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit adfc51106c08a1da196adfa07940e71e19fe2fef
Author: David Hildenbrand
Date: Wed Feb 7 12:46:45 2018 +0100
KVM: s390: consider epoch index on TOD clock syncs
commit 1575767ef3cf5326701d2ae3075b7732cbc855e4 upstream.
For now, we don't take care of over/underflows. Especially underflows
are critical:
Assume the epoch is currently 0 and we get a sync request for delta=1,
meaning the TOD is moved forward by 1 and we have to fix it up by
subtracting 1 from the epoch. Right now, this will leave the epoch
index untouched, resulting in epoch=-1, epoch\_idx=0, which is wrong.
We have to take care of over and underflows, also for the VSIE case. So
let's factor out calculation into a separate function.
Signed-off-by: David Hildenbrand
Message-Id: <20180207114647.6220-5-david@redhat.com>
Reviewed-by: Christian Borntraeger
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Cc: stable@vger.kernel.org
Signed-off-by: Christian Borntraeger
[use u8 for idx]
Signed-off-by: Greg Kroah-Hartman
commit b06b16f7ca6bcfb2ac845f493acf136932135ffa
Author: David Hildenbrand
Date: Wed Feb 7 12:46:44 2018 +0100
KVM: s390: consider epoch index on hotplugged CPUs
commit d16b52cb9cdb6f06dea8ab2f0a428e7d7f0b0a81 upstream.
We must copy both, the epoch and the epoch\_idx.
Signed-off-by: David Hildenbrand
Message-Id: <20180207114647.6220-4-david@redhat.com>
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Reviewed-by: Cornelia Huck
Reviewed-by: Christian Borntraeger
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Cc: stable@vger.kernel.org
Signed-off-by: Christian Borntraeger
Signed-off-by: Greg Kroah-Hartman
commit 35b8a4dfde70bfc1def20bf922cbc4efdd46e773
Author: David Hildenbrand
Date: Wed Feb 7 12:46:43 2018 +0100
KVM: s390: provide only a single function for setting the tod (fix SCK)
commit 0e7def5fb0dc53ddbb9f62a497d15f1e11ccdc36 upstream.
Right now, SET CLOCK called in the guest does not properly take care of
the epoch index, as the call goes via the old kvm\_s390\_set\_tod\_clock()
interface. So the epoch index is neither reset to 0, if required, nor
properly set to e.g. 0xff on negative values.
Fix this by providing a single kvm\_s390\_set\_tod\_clock() function. Move
Multiple-epoch facility handling into it.
Signed-off-by: David Hildenbrand
Message-Id: <20180207114647.6220-3-david@redhat.com>
Reviewed-by: Christian Borntraeger
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Cc: stable@vger.kernel.org
Signed-off-by: Christian Borntraeger
Signed-off-by: Greg Kroah-Hartman
commit 96819fb1cfee04d86a71d55af9531bf701e8fdc1
Author: David Hildenbrand
Date: Wed Feb 7 12:46:42 2018 +0100
KVM: s390: take care of clock-comparator sign control
commit 5fe01793dd953ab947fababe8abaf5ed5258c8df upstream.
Missed when enabling the Multiple-epoch facility. If the facility is
installed and the control is set, a sign based comaprison has to be
performed.
Right now we would inject wrong interrupts and ignore interrupt
conditions. Also the sleep time is calculated in a wrong way.
Signed-off-by: David Hildenbrand
Message-Id: <20180207114647.6220-2-david@redhat.com>
Fixes: 8fa1696ea781 ("KVM: s390: Multiple Epoch Facility support")
Cc: stable@vger.kernel.org
Reviewed-by: Christian Borntraeger
Signed-off-by: Christian Borntraeger
Signed-off-by: Greg Kroah-Hartman
commit 1c7cfc790da13628c10c6cc02cfaae2ccb82aa18
Author: Anna Karbownik
Date: Thu Feb 22 16:18:13 2018 +0100
EDAC, sb\_edac: Fix out of bound writes during DIMM configuration on KNL
commit bf8486709ac7fad99e4040dea73fe466c57a4ae1 upstream.
Commit
3286d3eb906c ("EDAC, sb\_edac: Drop NUM\_CHANNELS from 8 back to 4")
decreased NUM\_CHANNELS from 8 to 4, but this is not enough for Knights
Landing which supports up to 6 channels.
This caused out-of-bounds writes to pvt->mirror\_mode and pvt->tolm
variables which don't pay critical role on KNL code path, so the memory
corruption wasn't causing any visible driver failures.
The easiest way of fixing it is to change NUM\_CHANNELS to 6. Do that.
An alternative solution would be to restructure the KNL part of the
driver to 2MC/3channel representation.
Reported-by: Dan Carpenter
Signed-off-by: Anna Karbownik
Cc: Mauro Carvalho Chehab
Cc: Tony Luck
Cc: jim.m.snow@intel.com
Cc: krzysztof.paliswiat@intel.com
Cc: lukasz.odzioba@intel.com
Cc: qiuxu.zhuo@intel.com
Cc: linux-edac
Cc:
Fixes: 3286d3eb906c ("EDAC, sb\_edac: Drop NUM\_CHANNELS from 8 back to 4")
Link: http://lkml.kernel.org/r/1519312693-4789-1-git-send-email-anna.karbownik@intel.com
[ Massage commit message. ]
Signed-off-by: Borislav Petkov
Signed-off-by: Greg Kroah-Hartman
commit 9b144500e91cee5a5c3602d4e38c81d8e3097c9e
Author: Mauro Carvalho Chehab
Date: Sat Feb 10 06:14:10 2018 -0500
media: m88ds3103: don't call a non-initalized function
commit b9c97c67fd19262c002d94ced2bfb513083e161e upstream.
If m88d3103 chip ID is not recognized, the device is not initialized.
However, it returns from probe without any error, causing this OOPS:
[ 7.689289] Unable to handle kernel NULL pointer dereference at virtual address 00000000
[ 7.689297] pgd = 7b0bd7a7
[ 7.689302] [00000000] \*pgd=00000000
[ 7.689318] Internal error: Oops: 80000005 [#1] SMP ARM
[ 7.689322] Modules linked in: dvb\_usb\_dvbsky(+) m88ds3103 dvb\_usb\_v2 dvb\_core videobuf2\_vmalloc videobuf2\_memops videobuf2\_core crc32\_arm\_ce videodev media
[ 7.689358] CPU: 3 PID: 197 Comm: systemd-udevd Not tainted 4.15.0-mcc+ #23
[ 7.689361] Hardware name: BCM2835
[ 7.689367] PC is at 0x0
[ 7.689382] LR is at m88ds3103\_attach+0x194/0x1d0 [m88ds3103]
[ 7.689386] pc : [<00000000>] lr : [] psr: 60000013
[ 7.689391] sp : ed8e5c20 ip : ed8c1e00 fp : ed8945c0
[ 7.689395] r10: ed894000 r9 : ed894378 r8 : eda736c0
[ 7.689400] r7 : ed894070 r6 : ed8e5c44 r5 : bf0bb040 r4 : eda77600
[ 7.689405] r3 : 00000000 r2 : 00000000 r1 : 00000000 r0 : eda77600
[ 7.689412] Flags: nZCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment none
[ 7.689417] Control: 10c5383d Table: 2d8e806a DAC: 00000051
[ 7.689423] Process systemd-udevd (pid: 197, stack limit = 0xe9dbfb63)
[ 7.689428] Stack: (0xed8e5c20 to 0xed8e6000)
[ 7.689439] 5c20: ed853a80 eda73640 ed894000 ed8942c0 ed853a80 bf0b9e98 ed894070 bf0b9f10
[ 7.689449] 5c40: 00000000 00000000 bf08c17c c08dfc50 00000000 00000000 00000000 00000000
[ 7.689459] 5c60: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689468] 5c80: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689479] 5ca0: 00000000 00000000 ed8945c0 ed8942c0 ed894000 ed894830 bf0b9e98 00000000
[ 7.689490] 5cc0: ed894378 bf0a3cb4 bf0bc3b0 0000533b ed920540 00000000 00000034 bf0a6434
[ 7.689500] 5ce0: ee952070 ed826600 bf0a7038 bf0a2dd8 00000001 bf0a6768 bf0a2f90 ed8943c0
[ 7.689511] 5d00: 00000000 c08eca68 ed826620 ed826620 00000000 ee952070 bf0bc034 ee952000
[ 7.689521] 5d20: ed826600 bf0bb080 ffffffed c0aa9e9c c0aa9dac ed826620 c16edf6c c168c2c8
[ 7.689531] 5d40: c16edf70 00000000 bf0bc034 0000000d 00000000 c08e268c bf0bb080 ed826600
[ 7.689541] 5d60: bf0bc034 ed826654 ed826620 bf0bc034 c164c8bc 00000000 00000001 00000000
[ 7.689553] 5d80: 00000028 c08e2948 00000000 bf0bc034 c08e2848 c08e0778 ee9f0a58 ed88bab4
[ 7.689563] 5da0: bf0bc034 ed90ba80 c168c1f0 c08e1934 bf0bb3bc c17045ac bf0bc034 c164c8bc
[ 7.689574] 5dc0: bf0bc034 bf0bb3bc ed91f564 c08e34ec bf0bc000 c164c8bc bf0bc034 c0aa8dc4
[ 7.689584] 5de0: ffffe000 00000000 bf0bf000 ed91f600 ed91f564 c03021e4 00000001 00000000
[ 7.689595] 5e00: c166e040 8040003f ed853a80 bf0bc448 00000000 c1678174 ed853a80 f0f22000
[ 7.689605] 5e20: f0f21fff 8040003f 014000c0 ed91e700 ed91e700 c16d8e68 00000001 ed91e6c0
[ 7.689615] 5e40: bf0bc400 00000001 bf0bc400 ed91f564 00000001 00000000 00000028 c03c9a24
[ 7.689625] 5e60: 00000001 c03c8c94 ed8e5f50 ed8e5f50 00000001 bf0bc400 ed91f540 c03c8cb0
[ 7.689637] 5e80: bf0bc40c 00007fff bf0bc400 c03c60b0 00000000 bf0bc448 00000028 c0e09684
[ 7.689647] 5ea0: 00000002 bf0bc530 c1234bf8 bf0bc5dc bf0bc514 c10ebbe8 ffffe000 bf000000
[ 7.689657] 5ec0: 00011538 00000000 ed8e5f48 00000000 00000000 00000000 00000000 00000000
[ 7.689666] 5ee0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[ 7.689676] 5f00: 00000000 00000000 7fffffff 00000000 00000013 b6e55a18 0000017b c0309104
[ 7.689686] 5f20: ed8e4000 00000000 00510af0 c03c9430 7fffffff 00000000 00000003 00000000
[ 7.689697] 5f40: 00000000 f0f0f000 00011538 00000000 f0f107b0 f0f0f000 00011538 f0f1fdb8
[ 7.689707] 5f60: f0f1fbe8 f0f1b974 00004000 000041e0 bf0bc3d0 00000001 00000000 000024c4
[ 7.689717] 5f80: 0000002d 0000002e 00000019 00000000 00000010 00000000 16894000 00000000
[ 7.689727] 5fa0: 00000000 c0308f20 16894000 00000000 00000013 b6e55a18 00000000 b6e5652c
[ 7.689737] 5fc0: 16894000 00000000 00000000 0000017b 00020000 00508110 00000000 00510af0
[ 7.689748] 5fe0: bef68948 bef68938 b6e4d3d0 b6d32590 60000010 00000013 00000000 00000000
[ 7.689790] [] (m88ds3103\_attach [m88ds3103]) from [] (dvbsky\_s960c\_attach+0x78/0x280 [dvb\_usb\_dvbsky])
[ 7.689821] [] (dvbsky\_s960c\_attach [dvb\_usb\_dvbsky]) from [] (dvb\_usbv2\_probe+0xa3c/0x1024 [dvb\_usb\_v2])
[ 7.689849] [] (dvb\_usbv2\_probe [dvb\_usb\_v2]) from [] (usb\_probe\_interface+0xf0/0x2a8)
[ 7.689869] [] (usb\_probe\_interface) from [] (driver\_probe\_device+0x2f8/0x4b4)
[ 7.689881] [] (driver\_probe\_device) from [] (\_\_driver\_attach+0x100/0x11c)
[ 7.689895] [] (\_\_driver\_attach) from [] (bus\_for\_each\_dev+0x4c/0x9c)
[ 7.689909] [] (bus\_for\_each\_dev) from [] (bus\_add\_driver+0x1c0/0x264)
[ 7.689919] [] (bus\_add\_driver) from [] (driver\_register+0x78/0xf4)
[ 7.689931] [] (driver\_register) from [] (usb\_register\_driver+0x70/0x134)
[ 7.689946] [] (usb\_register\_driver) from [] (do\_one\_initcall+0x44/0x168)
[ 7.689963] [] (do\_one\_initcall) from [] (do\_init\_module+0x64/0x1f4)
[ 7.689979] [] (do\_init\_module) from [] (load\_module+0x20a0/0x25c8)
[ 7.689993] [] (load\_module) from [] (SyS\_finit\_module+0xb4/0xec)
[ 7.690007] [] (SyS\_finit\_module) from [] (ret\_fast\_syscall+0x0/0x54)
[ 7.690018] Code: bad PC value
This may happen on normal circumstances, if, for some reason, the demod
hangs and start returning an invalid chip ID:
[ 10.394395] m88ds3103 3-0068: Unknown device. Chip\_id=00
So, change the logic to cause probe to fail with -ENODEV, preventing
the OOPS.
Detected while testing DVB MMAP patches on Raspberry Pi 3 with
DVBSky S960CI.
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit ced72e7e3fdc9ca6af98944a69881455b2ebb3a8
Author: Ming Lei
Date: Fri Feb 23 23:36:56 2018 +0800
blk-mq: don't call io sched's .requeue\_request when requeueing rq to ->dispatch
commit 105976f517791aed3b11f8f53b308a2069d42055 upstream.
\_\_blk\_mq\_requeue\_request() covers two cases:
- one is that the requeued request is added to hctx->dispatch, such as
blk\_mq\_dispatch\_rq\_list()
- another case is that the request is requeued to io scheduler, such as
blk\_mq\_requeue\_request().
We should call io sched's .requeue\_request callback only for the 2nd
case.
Cc: Paolo Valente
Cc: Omar Sandoval
Fixes: bd166ef183c2 ("blk-mq-sched: add framework for MQ capable IO schedulers")
Cc: stable@vger.kernel.org
Reviewed-by: Bart Van Assche
Acked-by: Paolo Valente
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit edd27ed8978bc1f309f0930f2639042d4c4dabf4
Author: Yuchung Cheng
Date: Tue Feb 27 14:15:02 2018 -0800
tcp: revert F-RTO extension to detect more spurious timeouts
[ Upstream commit fc68e171d376c322e6777a3d7ac2f0278b68b17f ]
This reverts commit 89fe18e44f7ee5ab1c90d0dff5835acee7751427.
While the patch could detect more spurious timeouts, it could cause
poor TCP performance on broken middle-boxes that modifies TCP packets
(e.g. receive window, SACK options). Since the performance gain is
much smaller compared to the potential loss. The best solution is
to fully revert the change.
Fixes: 89fe18e44f7e ("tcp: extend F-RTO to catch more spurious timeouts")
Reported-by: Teodor Milkov
Signed-off-by: Yuchung Cheng
Signed-off-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 34ffbd0f604c784b895249dfe5a08d2e1d2071f3
Author: Yuchung Cheng
Date: Tue Feb 27 14:15:01 2018 -0800
tcp: revert F-RTO middle-box workaround
[ Upstream commit d4131f09770d9b7471c9da65e6ecd2477746ac5c ]
This reverts commit cc663f4d4c97b7297fb45135ab23cfd508b35a77. While fixing
some broken middle-boxes that modifies receive window fields, it does not
address middle-boxes that strip off SACK options. The best solution is
to fully revert this patch and the root F-RTO enhancement.
Fixes: cc663f4d4c97 ("tcp: restrict F-RTO to work-around broken middle-boxes")
Reported-by: Teodor Milkov
Signed-off-by: Yuchung Cheng
Signed-off-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 46884f60c4ec8630eb7c4bb9b26422b85025b727
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:17 2018 +0100
s390/qeth: fix IPA command submission race
[ Upstream commit d22ffb5a712f9211ffd104c38fc17cbfb1b5e2b0 ]
If multiple IPA commands are build & sent out concurrently,
fill\_ipacmd\_header() may assign a seqno value to a command that's
different from what send\_control\_data() later assigns to this command's
reply.
This is due to other commands passing through send\_control\_data(),
and incrementing card->seqno.ipa along the way.
So one IPA command has no reply that's waiting for its seqno, while some
other IPA command has multiple reply objects waiting for it.
Only one of those waiting replies wins, and the other(s) times out and
triggers a recovery via send\_ipa\_cmd().
Fix this by making sure that the same seqno value is assigned to
a command and its reply object.
Do so immediately before submitting the command & while holding the
irq\_pending "lock", to produce nicely ascending seqnos.
As a side effect, \*all\* IPA commands now use a reply object that's
waiting for its actual seqno. Previously, early IPA commands that were
submitted while the card was still DOWN used the "catch-all" IDX seqno.
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5df9e78c3dff145c7a28a0f327a0065f1007bac2
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:16 2018 +0100
s390/qeth: fix IP address lookup for L3 devices
[ Upstream commit c5c48c58b259bb8f0482398370ee539d7a12df3e ]
Current code ("qeth\_l3\_ip\_from\_hash()") matches a queried address object
against objects in the IP table by IP address, Mask/Prefix Length and
MAC address ("qeth\_l3\_ipaddrs\_is\_equal()"). But what callers actually
require is either
a) "is this IP address registered" (ie. match by IP address only),
before adding a new address.
b) or "is this address object registered" (ie. match all relevant
attributes), before deleting an address.
Right now
1. the ADD path is too strict in its lookup, and eg. doesn't detect
conflicts between an existing NORMAL address and a new VIPA address
(because the NORMAL address will have mask != 0, while VIPA has
a mask == 0),
2. the DELETE path is not strict enough, and eg. allows del\_rxip() to
delete a VIPA address as long as the IP address matches.
Fix all this by adding helpers (\_addr\_match\_ip() and \_addr\_match\_all())
that do the appropriate checking.
Note that the ADD path for NORMAL addresses is special, as qeth keeps
track of how many times such an address is in use (and there is no
immediate way of returning errors to the caller). So when a requested
NORMAL address \_fully\_ matches an existing one, it's not considered a
conflict and we merely increment the refcount.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f99053f7b1224a8ffd3cfd08a89406822d15c9db
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:15 2018 +0100
Revert "s390/qeth: fix using of ref counter for rxip addresses"
[ Upstream commit 4964c66fd49b2e2342da35358f2ff74614bcbaee ]
This reverts commit cb816192d986f7596009dedcf2201fe2e5bc2aa7.
The issue this attempted to fix never actually occurs.
l3\_add\_rxip() checks (via l3\_ip\_from\_hash()) if the requested address
was previously added to the card. If so, it returns -EEXIST and doesn't
call l3\_add\_ip().
As a result, the "address exists" path in l3\_add\_ip() is never taken
for rxip addresses, and this patch had no effect.
Fixes: cb816192d986 ("s390/qeth: fix using of ref counter for rxip addresses")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6e757a122107f002d334ad4afa0fef87ec49b867
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:14 2018 +0100
s390/qeth: fix double-free on IP add/remove race
[ Upstream commit 14d066c3531a87f727968cacd85bd95c75f59843 ]
Registering an IPv4 address with the HW takes quite a while, so we
temporarily drop the ip\_htable lock. Any concurrent add/remove of the
same IP adjusts the IP's use count, and (on remove) is then blocked by
addr->in\_progress.
After the register call has completed, we check the use count for
concurrently attempted add/remove calls - and possibly straight-away
deregister the IP again. This happens via l3\_delete\_ip(), which
1) looks up the queried IP in the htable (getting a reference to the
\*same\* queried object),
2) deregisters the IP from the HW, and
3) frees the IP object.
The caller in l3\_add\_ip() then does a second free on the same object.
For this case, skip all the extra checks and lookups in l3\_delete\_ip()
and just deregister & free the IP object ourselves.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 50f613e9257219daa98dc3233fab4366d9b407df
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:13 2018 +0100
s390/qeth: fix IP removal on offline cards
[ Upstream commit 98d823ab1fbdcb13abc25b420f9bb71bade42056 ]
If the HW is not reachable, then none of the IPs in qeth's internal
table has been registered with the HW yet. So when deleting such an IP,
there's no need to stage it for deregistration - just drop it from
the table.
This fixes the "add-delete-add" scenario on an offline card, where the
the second "add" merely increments the IP's use count. But as the IP is
still set to DISP\_ADDR\_DELETE from the previous "delete" step,
l3\_recover\_ip() won't register it with the HW when the card goes online.
Fixes: 5f78e29ceebf ("qeth: optimize IP handling in rx\_mode callback")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c3238669b34fac493207abf243c829812a77f16b
Author: Julian Wiedmann
Date: Tue Feb 27 18:58:12 2018 +0100
s390/qeth: fix overestimated count of buffer elements
[ Upstream commit 12472af89632beb1ed8dea29d4efe208ca05b06a ]
qeth\_get\_elements\_for\_range() doesn't know how to handle a 0-length
range (ie. start == end), and returns 1 when it should return 0.
Such ranges occur on TSO skbs, where the L2/L3/L4 headers (and thus all
of the skb's linear data) are skipped when mapping the skb into regular
buffer elements.
This overestimation may cause several performance-related issues:
1. sub-optimal IO buffer selection, where the next buffer gets selected
even though the skb would actually still fit into the current buffer.
2. forced linearization, if the element count for a non-linear skb
exceeds QETH\_MAX\_BUFFER\_ELEMENTS.
Rather than modifying qeth\_get\_elements\_for\_range() and adding overhead
to every caller, fix up those callers that are in risk of passing a
0-length range.
Fixes: 2863c61334aa ("qeth: refactor calculation of SBALE count")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1818aac9f31b9d2c6947ead04144aa05595cebec
Author: Julian Wiedmann
Date: Fri Feb 9 11:03:50 2018 +0100
s390/qeth: fix SETIP command handling
[ Upstream commit 1c5b2216fbb973a9410e0b06389740b5c1289171 ]
send\_control\_data() applies some special handling to SETIP v4 IPA
commands. But current code parses \*all\* command types for the SETIP
command code. Limit the command code check to IPA commands.
Fixes: 5b54e16f1a54 ("qeth: do not spin for SETIP ip assist command")
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 841c19a5cc54cf7b0e7ad4fbf6b6937fb819e3bb
Author: Ursula Braun
Date: Fri Feb 9 11:03:49 2018 +0100
s390/qeth: fix underestimated count of buffer elements
[ Upstream commit 89271c65edd599207dd982007900506283c90ae3 ]
For a memory range/skb where the last byte falls onto a page boundary
(ie. 'end' is of the form xxx...xxx001), the PFN\_UP() part of the
calculation currently doesn't round up to the next PFN due to an
off-by-one error.
Thus qeth believes that the skb occupies one page less than it
actually does, and may select a IO buffer that doesn't have enough spare
buffer elements to fit all of the skb's data.
HW detects this as a malformed buffer descriptor, and raises an
exception which then triggers device recovery.
Fixes: 2863c61334aa ("qeth: refactor calculation of SBALE count")
Signed-off-by: Ursula Braun
Signed-off-by: Julian Wiedmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 549ddc83ad5e42123bdbc4baf5b3651739e35136
Author: James Chapman
Date: Fri Feb 23 17:45:47 2018 +0000
l2tp: fix tunnel lookup use-after-free race
[ Upstream commit 28f5bfb819195ad9c2eb9486babe7b0e4efe925f ]
l2tp\_tunnel\_get walks the tunnel list to find a matching tunnel
instance and if a match is found, its refcount is increased before
returning the tunnel pointer. But when tunnel objects are destroyed,
they are on the tunnel list after their refcount hits zero. Fix this
by moving the code that removes the tunnel from the tunnel list from
the tunnel socket destructor into in the l2tp\_tunnel\_delete path,
before the tunnel refcount is decremented.
refcount\_t: increment on 0; use-after-free.
WARNING: CPU: 3 PID: 13507 at lib/refcount.c:153 refcount\_inc+0x47/0x50
Modules linked in:
CPU: 3 PID: 13507 Comm: syzbot\_6e6a5ec8 Not tainted 4.16.0-rc2+ #36
Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
RIP: 0010:refcount\_inc+0x47/0x50
RSP: 0018:ffff8800136ffb20 EFLAGS: 00010286
RAX: dffffc0000000008 RBX: ffff880017068e68 RCX: ffffffff814d3333
RDX: 0000000000000000 RSI: ffff88001a59f6d8 RDI: ffff88001a59f6d8
RBP: ffff8800136ffb28 R08: 0000000000000000 R09: 0000000000000000
R10: ffff8800136ffab0 R11: 0000000000000000 R12: ffff880017068e50
R13: 0000000000000000 R14: ffff8800174da800 R15: 0000000000000004
FS: 00007f403ab1e700(0000) GS:ffff88001a580000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000205fafd2 CR3: 0000000016770000 CR4: 00000000000006e0
Call Trace:
l2tp\_tunnel\_get+0x2dd/0x4e0
pppol2tp\_connect+0x428/0x13c0
? pppol2tp\_session\_create+0x170/0x170
? \_\_might\_fault+0x115/0x1d0
? lock\_downgrade+0x860/0x860
? \_\_might\_fault+0xe5/0x1d0
? security\_socket\_connect+0x8e/0xc0
SYSC\_connect+0x1b6/0x310
? SYSC\_bind+0x280/0x280
? \_\_do\_page\_fault+0x5d1/0xca0
? up\_read+0x1f/0x40
? \_\_do\_page\_fault+0x3c8/0xca0
SyS\_connect+0x29/0x30
? SyS\_accept+0x40/0x40
do\_syscall\_64+0x1e0/0x730
? trace\_hardirqs\_off\_thunk+0x1a/0x1c
entry\_SYSCALL\_64\_after\_hwframe+0x42/0xb7
RIP: 0033:0x7f403a42f259
RSP: 002b:00007f403ab1dee8 EFLAGS: 00000296 ORIG\_RAX: 000000000000002a
RAX: ffffffffffffffda RBX: 00000000205fafe4 RCX: 00007f403a42f259
RDX: 000000000000002e RSI: 00000000205fafd2 RDI: 0000000000000004
RBP: 00007f403ab1df20 R08: 00007f403ab1e700 R09: 0000000000000000
R10: 00007f403ab1e700 R11: 0000000000000296 R12: 0000000000000000
R13: 00007ffc81906cbf R14: 0000000000000000 R15: 00007f403ab2b040
Code: 3b ff 5b 5d c3 e8 ca 5f 3b ff 80 3d 49 8e 66 04 00 75 ea e8 bc 5f 3b ff 48 c7 c7 60 69 64 85 c6 05 34 8e 66 04 01 e8 59 49 15 ff <0f> 0b eb ce 0f 1f 44 00 00 55 48 89 e5 41 56 41 55 41 54 53 49
Fixes: f8ccac0e44934 ("l2tp: put tunnel socket release on a workqueue")
Reported-and-tested-by: syzbot+19c09769f14b48810113@syzkaller.appspotmail.com
Reported-and-tested-by: syzbot+347bd5acde002e353a36@syzkaller.appspotmail.com
Reported-and-tested-by: syzbot+6e6a5ec8de31a94cd015@syzkaller.appspotmail.com
Reported-and-tested-by: syzbot+9df43faf09bd400f2993@syzkaller.appspotmail.com
Signed-off-by: James Chapman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 08ffa7bbb46e2a298287c66343ba44039a931ba4
Author: James Chapman
Date: Fri Feb 23 17:45:46 2018 +0000
l2tp: fix race in pppol2tp\_release with session object destroy
[ Upstream commit d02ba2a6110c530a32926af8ad441111774d2893 ]
pppol2tp\_release uses call\_rcu to put the final ref on its socket. But
the session object doesn't hold a ref on the session socket so may be
freed while the pppol2tp\_put\_sk RCU callback is scheduled. Fix this by
having the session hold a ref on its socket until the session is
destroyed. It is this ref that is dropped via call\_rcu.
Sessions are also deleted via l2tp\_tunnel\_closeall. This must now also put
the final ref via call\_rcu. So move the call\_rcu call site into
pppol2tp\_session\_close so that this happens in both destroy paths. A
common destroy path should really be implemented, perhaps with
l2tp\_tunnel\_closeall calling l2tp\_session\_delete like pppol2tp\_release
does, but this will be looked at later.
ODEBUG: activate active (active state 1) object type: rcu\_head hint: (null)
WARNING: CPU: 3 PID: 13407 at lib/debugobjects.c:291 debug\_print\_object+0x166/0x220
Modules linked in:
CPU: 3 PID: 13407 Comm: syzbot\_19c09769 Not tainted 4.16.0-rc2+ #38
Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
RIP: 0010:debug\_print\_object+0x166/0x220
RSP: 0018:ffff880013647a00 EFLAGS: 00010082
RAX: dffffc0000000008 RBX: 0000000000000003 RCX: ffffffff814d3333
RDX: 0000000000000000 RSI: 0000000000000001 RDI: ffff88001a59f6d0
RBP: ffff880013647a40 R08: 0000000000000000 R09: 0000000000000001
R10: ffff8800136479a8 R11: 0000000000000000 R12: 0000000000000001
R13: ffffffff86161420 R14: ffffffff85648b60 R15: 0000000000000000
FS: 0000000000000000(0000) GS:ffff88001a580000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020e77000 CR3: 0000000006022000 CR4: 00000000000006e0
Call Trace:
debug\_object\_activate+0x38b/0x530
? debug\_object\_assert\_init+0x3b0/0x3b0
? \_\_mutex\_unlock\_slowpath+0x85/0x8b0
? pppol2tp\_session\_destruct+0x110/0x110
\_\_call\_rcu.constprop.66+0x39/0x890
? \_\_call\_rcu.constprop.66+0x39/0x890
call\_rcu\_sched+0x17/0x20
pppol2tp\_release+0x2c7/0x440
? fcntl\_setlk+0xca0/0xca0
? sock\_alloc\_file+0x340/0x340
sock\_release+0x92/0x1e0
sock\_close+0x1b/0x20
\_\_fput+0x296/0x6e0
\_\_\_\_fput+0x1a/0x20
task\_work\_run+0x127/0x1a0
do\_exit+0x7f9/0x2ce0
? SYSC\_connect+0x212/0x310
? mm\_update\_next\_owner+0x690/0x690
? up\_read+0x1f/0x40
? \_\_do\_page\_fault+0x3c8/0xca0
do\_group\_exit+0x10d/0x330
? do\_group\_exit+0x330/0x330
SyS\_exit\_group+0x22/0x30
do\_syscall\_64+0x1e0/0x730
? trace\_hardirqs\_off\_thunk+0x1a/0x1c
entry\_SYSCALL\_64\_after\_hwframe+0x42/0xb7
RIP: 0033:0x7f362e471259
RSP: 002b:00007ffe389abe08 EFLAGS: 00000202 ORIG\_RAX: 00000000000000e7
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f362e471259
RDX: 00007f362e471259 RSI: 000000000000002e RDI: 0000000000000000
RBP: 00007ffe389abe30 R08: 0000000000000000 R09: 00007f362e944270
R10: 0000000000000000 R11: 0000000000000202 R12: 0000000000400b60
R13: 00007ffe389abf50 R14: 0000000000000000 R15: 0000000000000000
Code: 8d 3c dd a0 8f 64 85 48 89 fa 48 c1 ea 03 80 3c 02 00 75 7b 48 8b 14 dd a0 8f 64 85 4c 89 f6 48 c7 c7 20 85 64 85 e
8 2a 55 14 ff <0f> 0b 83 05 ad 2a 68 04 01 48 83 c4 18 5b 41 5c 41 5d 41 5e 41
Fixes: ee40fb2e1eb5b ("l2tp: protect sock pointer of struct pppol2tp\_session with RCU")
Signed-off-by: James Chapman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 18bdaefc715b4530b4b2fe670506bb47713664cc
Author: James Chapman
Date: Fri Feb 23 17:45:45 2018 +0000
l2tp: fix races with tunnel socket close
[ Upstream commit d00fa9adc528c1b0e64d532556764852df8bd7b9 ]
The tunnel socket tunnel->sock (struct sock) is accessed when
preparing a new ppp session on a tunnel at pppol2tp\_session\_init. If
the socket is closed by a thread while another is creating a new
session, the threads race. In pppol2tp\_connect, the tunnel object may
be created if the pppol2tp socket is associated with the special
session\_id 0 and the tunnel socket is looked up using the provided
fd. When handling this, pppol2tp\_connect cannot sock\_hold the tunnel
socket to prevent it being destroyed during pppol2tp\_connect since
this may itself may race with the socket being destroyed. Doing
sockfd\_lookup in pppol2tp\_connect isn't sufficient to prevent
tunnel->sock going away either because a given tunnel socket fd may be
reused between calls to pppol2tp\_connect. Instead, have
l2tp\_tunnel\_create sock\_hold the tunnel socket before it does
sockfd\_put. This ensures that the tunnel's socket is always extant
while the tunnel object exists. Hold a ref on the socket until the
tunnel is destroyed and ensure that all tunnel destroy paths go
through a common function (l2tp\_tunnel\_delete) since this will do the
final sock\_put to release the tunnel socket.
Since the tunnel's socket is now guaranteed to exist if the tunnel
exists, we no longer need to use sockfd\_lookup via l2tp\_sock\_to\_tunnel
to derive the tunnel from the socket since this is always
sk\_user\_data.
Also, sessions no longer sock\_hold the tunnel socket since sessions
already hold a tunnel ref and the tunnel sock will not be freed until
the tunnel is freed. Removing these sock\_holds in
l2tp\_session\_register avoids a possible sock leak in the
pppol2tp\_connect error path if l2tp\_session\_register succeeds but
attaching a ppp channel fails. The pppol2tp\_connect error path could
have been fixed instead and have the sock ref dropped when the session
is freed, but doing a sock\_put of the tunnel socket when the session
is freed would require a new session\_free callback. It is simpler to
just remove the sock\_hold of the tunnel socket in
l2tp\_session\_register, now that the tunnel socket lifetime is
guaranteed.
Finally, some init code in l2tp\_tunnel\_create is reordered to ensure
that the new tunnel object's refcount is set and the tunnel socket ref
is taken before the tunnel socket destructor callbacks are set.
kasan: CONFIG\_KASAN\_INLINE enabled
kasan: GPF could be caused by NULL-ptr deref or user memory access
general protection fault: 0000 [#1] SMP KASAN
Modules linked in:
CPU: 0 PID: 4360 Comm: syzbot\_19c09769 Not tainted 4.16.0-rc2+ #34
Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
RIP: 0010:pppol2tp\_session\_init+0x1d6/0x500
RSP: 0018:ffff88001377fb40 EFLAGS: 00010212
RAX: dffffc0000000000 RBX: ffff88001636a940 RCX: ffffffff84836c1d
RDX: 0000000000000045 RSI: 0000000055976744 RDI: 0000000000000228
RBP: ffff88001377fb60 R08: ffffffff84836bc8 R09: 0000000000000002
R10: ffff88001377fab8 R11: 0000000000000001 R12: 0000000000000000
R13: ffff88001636aac8 R14: ffff8800160f81c0 R15: 1ffff100026eff76
FS: 00007ffb3ea66700(0000) GS:ffff88001a400000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000020e77000 CR3: 0000000016261000 CR4: 00000000000006f0
Call Trace:
pppol2tp\_connect+0xd18/0x13c0
? pppol2tp\_session\_create+0x170/0x170
? \_\_might\_fault+0x115/0x1d0
? lock\_downgrade+0x860/0x860
? \_\_might\_fault+0xe5/0x1d0
? security\_socket\_connect+0x8e/0xc0
SYSC\_connect+0x1b6/0x310
? SYSC\_bind+0x280/0x280
? \_\_do\_page\_fault+0x5d1/0xca0
? up\_read+0x1f/0x40
? \_\_do\_page\_fault+0x3c8/0xca0
SyS\_connect+0x29/0x30
? SyS\_accept+0x40/0x40
do\_syscall\_64+0x1e0/0x730
? trace\_hardirqs\_off\_thunk+0x1a/0x1c
entry\_SYSCALL\_64\_after\_hwframe+0x42/0xb7
RIP: 0033:0x7ffb3e376259
RSP: 002b:00007ffeda4f6508 EFLAGS: 00000202 ORIG\_RAX: 000000000000002a
RAX: ffffffffffffffda RBX: 0000000020e77012 RCX: 00007ffb3e376259
RDX: 000000000000002e RSI: 0000000020e77000 RDI: 0000000000000004
RBP: 00007ffeda4f6540 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000202 R12: 0000000000400b60
R13: 00007ffeda4f6660 R14: 0000000000000000 R15: 0000000000000000
Code: 80 3d b0 ff 06 02 00 0f 84 07 02 00 00 e8 13 d6 db fc 49 8d bc 24 28 02 00 00 48 b8 00 00 00 00 00 fc ff df 48 89 f
a 48 c1 ea 03 <80> 3c 02 00 0f 85 ed 02 00 00 4d 8b a4 24 28 02 00 00 e8 13 16
Fixes: 80d84ef3ff1dd ("l2tp: prevent l2tp\_tunnel\_delete racing with userspace close")
Signed-off-by: James Chapman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8a319b57cc5c850d34e98d913346d762c1c8d246
Author: James Chapman
Date: Fri Feb 23 17:45:44 2018 +0000
l2tp: don't use inet\_shutdown on ppp session destroy
[ Upstream commit 225eb26489d05c679a4c4197ffcb81c81e9dcaf4 ]
Previously, if a ppp session was closed, we called inet\_shutdown to mark
the socket as unconnected such that userspace would get errors and
then close the socket. This could race with userspace closing the
socket. Instead, leave userspace to close the socket in its own time
(our session will be detached anyway).
BUG: KASAN: use-after-free in inet\_shutdown+0x5d/0x1c0
Read of size 4 at addr ffff880010ea3ac0 by task syzbot\_347bd5ac/8296
CPU: 3 PID: 8296 Comm: syzbot\_347bd5ac Not tainted 4.16.0-rc1+ #91
Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
Call Trace:
dump\_stack+0x101/0x157
? inet\_shutdown+0x5d/0x1c0
print\_address\_description+0x78/0x260
? inet\_shutdown+0x5d/0x1c0
kasan\_report+0x240/0x360
\_\_asan\_load4+0x78/0x80
inet\_shutdown+0x5d/0x1c0
? pppol2tp\_show+0x80/0x80
pppol2tp\_session\_close+0x68/0xb0
l2tp\_tunnel\_closeall+0x199/0x210
? udp\_v6\_flush\_pending\_frames+0x90/0x90
l2tp\_udp\_encap\_destroy+0x6b/0xc0
? l2tp\_tunnel\_del\_work+0x2e0/0x2e0
udpv6\_destroy\_sock+0x8c/0x90
sk\_common\_release+0x47/0x190
udp\_lib\_close+0x15/0x20
inet\_release+0x85/0xd0
inet6\_release+0x43/0x60
sock\_release+0x53/0x100
? sock\_alloc\_file+0x260/0x260
sock\_close+0x1b/0x20
\_\_fput+0x19f/0x380
\_\_\_\_fput+0x1a/0x20
task\_work\_run+0xd2/0x110
exit\_to\_usermode\_loop+0x18d/0x190
do\_syscall\_64+0x389/0x3b0
entry\_SYSCALL\_64\_after\_hwframe+0x26/0x9b
RIP: 0033:0x7fe240a45259
RSP: 002b:00007fe241132df8 EFLAGS: 00000297 ORIG\_RAX: 0000000000000003
RAX: 0000000000000000 RBX: 0000000000000000 RCX: 00007fe240a45259
RDX: 00007fe240a45259 RSI: 0000000000000000 RDI: 00000000000000a5
RBP: 00007fe241132e20 R08: 00007fe241133700 R09: 0000000000000000
R10: 00007fe241133700 R11: 0000000000000297 R12: 0000000000000000
R13: 00007ffc49aff84f R14: 0000000000000000 R15: 00007fe241141040
Allocated by task 8331:
save\_stack+0x43/0xd0
kasan\_kmalloc+0xad/0xe0
kasan\_slab\_alloc+0x12/0x20
kmem\_cache\_alloc+0x144/0x3e0
sock\_alloc\_inode+0x22/0x130
alloc\_inode+0x3d/0xf0
new\_inode\_pseudo+0x1c/0x90
sock\_alloc+0x30/0x110
\_\_sock\_create+0xaa/0x4c0
SyS\_socket+0xbe/0x130
do\_syscall\_64+0x128/0x3b0
entry\_SYSCALL\_64\_after\_hwframe+0x26/0x9b
Freed by task 8314:
save\_stack+0x43/0xd0
\_\_kasan\_slab\_free+0x11a/0x170
kasan\_slab\_free+0xe/0x10
kmem\_cache\_free+0x88/0x2b0
sock\_destroy\_inode+0x49/0x50
destroy\_inode+0x77/0xb0
evict+0x285/0x340
iput+0x429/0x530
dentry\_unlink\_inode+0x28c/0x2c0
\_\_dentry\_kill+0x1e3/0x2f0
dput.part.21+0x500/0x560
dput+0x24/0x30
\_\_fput+0x2aa/0x380
\_\_\_\_fput+0x1a/0x20
task\_work\_run+0xd2/0x110
exit\_to\_usermode\_loop+0x18d/0x190
do\_syscall\_64+0x389/0x3b0
entry\_SYSCALL\_64\_after\_hwframe+0x26/0x9b
Fixes: fd558d186df2c ("l2tp: Split pppol2tp patch into separate l2tp and ppp parts")
Signed-off-by: James Chapman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bb364485dfa28666db3e7ecd6c6c801e9d8735f1
Author: James Chapman
Date: Fri Feb 23 17:45:43 2018 +0000
l2tp: don't use inet\_shutdown on tunnel destroy
[ Upstream commit 76a6abdb2513ad4ea0ded55d2c66160491f2e848 ]
Previously, if a tunnel was closed, we called inet\_shutdown to mark
the socket as unconnected such that userspace would get errors and
then close the socket. This could race with userspace closing the
socket. Instead, leave userspace to close the socket in its own time
(our tunnel will be detached anyway).
BUG: unable to handle kernel NULL pointer dereference at 00000000000000a0
IP: \_\_lock\_acquire+0x263/0x1630
PGD 0 P4D 0
Oops: 0000 [#1] SMP KASAN
Modules linked in:
CPU: 2 PID: 42 Comm: kworker/u8:2 Not tainted 4.15.0-rc7+ #129
Workqueue: l2tp l2tp\_tunnel\_del\_work
RIP: 0010:\_\_lock\_acquire+0x263/0x1630
RSP: 0018:ffff88001a37fc70 EFLAGS: 00010002
RAX: 0000000000000001 RBX: 0000000000000088 RCX: 0000000000000000
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000000
RBP: ffff88001a37fd18 R08: 0000000000000001 R09: 0000000000000000
R10: 0000000000000000 R11: 00000000000076fd R12: 00000000000000a0
R13: ffff88001a3722c0 R14: 0000000000000001 R15: 0000000000000000
FS: 0000000000000000(0000) GS:ffff88001ad00000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000000000a0 CR3: 000000001730b000 CR4: 00000000000006e0
Call Trace:
? \_\_lock\_acquire+0xc77/0x1630
? console\_trylock+0x11/0xa0
lock\_acquire+0x117/0x230
? lock\_sock\_nested+0x3a/0xa0
\_raw\_spin\_lock\_bh+0x3a/0x50
? lock\_sock\_nested+0x3a/0xa0
lock\_sock\_nested+0x3a/0xa0
inet\_shutdown+0x33/0xf0
l2tp\_tunnel\_del\_work+0x60/0xef
process\_one\_work+0x1ea/0x5f0
? process\_one\_work+0x162/0x5f0
worker\_thread+0x48/0x3e0
? trace\_hardirqs\_on+0xd/0x10
kthread+0x108/0x140
? process\_one\_work+0x5f0/0x5f0
? kthread\_stop+0x2a0/0x2a0
ret\_from\_fork+0x24/0x30
Code: 00 41 81 ff ff 1f 00 00 0f 87 7a 13 00 00 45 85 f6 49 8b 85
68 08 00 00 0f 84 ae 03 00 00 c7 44 24 18 00 00 00 00 e9 f0 00 00 00 <49> 81 3c
24 80 93 3f 83 b8 00 00 00 00 44 0f 44 c0 83 fe 01 0f
RIP: \_\_lock\_acquire+0x263/0x1630 RSP: ffff88001a37fc70
CR2: 00000000000000a0
Fixes: 309795f4bec2d ("l2tp: Add netlink control API for L2TP")
Signed-off-by: James Chapman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 333502ffcfee5df2c6effdf7c35ca7c4c06b6c99
Author: Song Liu
Date: Tue Feb 6 20:50:23 2018 -0800
tcp: tracepoint: only call trace\_tcp\_send\_reset with full socket
[ Upstream commit 5c487bb9adddbc1d23433e09d2548759375c2b52 ]
tracepoint tcp\_send\_reset requires a full socket to work. However, it
may be called when in TCP\_TIME\_WAIT:
case TCP\_TW\_RST:
tcp\_v6\_send\_reset(sk, skb);
inet\_twsk\_deschedule\_put(inet\_twsk(sk));
goto discard\_it;
To avoid this problem, this patch checks the socket with sk\_fullsock()
before calling trace\_tcp\_send\_reset().
Fixes: c24b14c46bb8 ("tcp: add tracepoint trace\_tcp\_send\_reset")
Signed-off-by: Song Liu
Reviewed-by: Lawrence Brakmo
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8421bd1de6af5a95cedbab53e9cf26bd0e999842
Author: Andrew Lunn
Date: Tue Feb 27 01:56:06 2018 +0100
net: phy: Restore phy\_resume() locking assumption
[ Upstream commit 9c2c2e62df3fa30fb13fbeb7512a4eede729383b ]
commit f5e64032a799 ("net: phy: fix resume handling") changes the
locking semantics for phy\_resume() such that the caller now needs to
hold the phy mutex. Not all call sites were adopted to this new
semantic, resulting in warnings from the added
WARN\_ON(!mutex\_is\_locked(&phydev->lock)). Rather than change the
semantics, add a \_\_phy\_resume() and restore the old behavior of
phy\_resume().
Reported-by: Heiner Kallweit
Fixes: f5e64032a799 ("net: phy: fix resume handling")
Signed-off-by: Andrew Lunn
Reviewed-by: Florian Fainelli
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4f217494ee7a9442463fe971745c2839d9fd19f5
Author: Vlad Buslov
Date: Tue Feb 6 10:52:19 2018 +0200
net/mlx5: Fix error handling when adding flow rules
[ Upstream commit 9238e380e823a39983ee8d6b6ee8d1a9c4ba8a65 ]
If building match list or adding existing fg fails when
node is locked, function returned without unlocking it.
This happened if node version changed or adding existing fg
returned with EAGAIN after jumping to search\_again\_locked label.
Fixes: bd71b08ec2ee ("net/mlx5: Support multiple updates of steering rules in parallel")
Signed-off-by: Vlad Buslov
Reviewed-by: Maor Gottlieb
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit bbc06dee4ac698c7ca3576f47045732473edc1eb
Author: Rahul Lakkireddy
Date: Thu Feb 15 18:20:01 2018 +0530
cxgb4: fix trailing zero in CIM LA dump
[ Upstream commit e6f02a4d57cc438099bc8abfba43ba1400d77b38 ]
Set correct size of the CIM LA dump for T6.
Fixes: 27887bc7cb7f ("cxgb4: collect hardware LA dumps")
Signed-off-by: Rahul Lakkireddy
Signed-off-by: Ganesh Goudar
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dec498f1c88ece89611bffa3fac90eeb17b668e9
Author: Jason Wang
Date: Wed Feb 28 18:20:04 2018 +0800
virtio-net: disable NAPI only when enabled during XDP set
[ Upstream commit 4e09ff5362843dff3accfa84c805c7f3a99de9cd ]
We try to disable NAPI to prevent a single XDP TX queue being used by
multiple cpus. But we don't check if device is up (NAPI is enabled),
this could result stall because of infinite wait in
napi\_disable(). Fixing this by checking device state through
netif\_running() before.
Fixes: 4941d472bf95b ("virtio-net: do not reset during XDP set")
Signed-off-by: Jason Wang
Acked-by: Michael S. Tsirkin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fad7f95c5a306eee68faffcee4025adf3882a117
Author: Jason Wang
Date: Sat Feb 24 11:32:25 2018 +0800
tuntap: disable preemption during XDP processing
[ Upstream commit 23e43f07f896f8578318cfcc9466f1e8b8ab21b6 ]
Except for tuntap, all other drivers' XDP was implemented at NAPI
poll() routine in a bh. This guarantees all XDP operation were done at
the same CPU which is required by e.g BFP\_MAP\_TYPE\_PERCPU\_ARRAY. But
for tuntap, we do it in process context and we try to protect XDP
processing by RCU reader lock. This is insufficient since
CONFIG\_PREEMPT\_RCU can preempt the RCU reader critical section which
breaks the assumption that all XDP were processed in the same CPU.
Fixing this by simply disabling preemption during XDP processing.
Fixes: 761876c857cb ("tap: XDP support")
Signed-off-by: Jason Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 85e1944293c709955e6316d3267fdafd5cb39c52
Author: Jason Wang
Date: Sat Feb 24 11:32:26 2018 +0800
tuntap: correctly add the missing XDP flush
[ Upstream commit 1bb4f2e868a2891ab8bc668b8173d6ccb8c4ce6f ]
We don't flush batched XDP packets through xdp\_do\_flush\_map(), this
will cause packets stall at TX queue. Consider we don't do XDP on NAPI
poll(), the only possible fix is to call xdp\_do\_flush\_map()
immediately after xdp\_do\_redirect().
Note, this in fact won't try to batch packets through devmap, we could
address in the future.
Reported-by: Christoffer Dall
Fixes: 761876c857cb ("tap: XDP support")
Signed-off-by: Jason Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 12b552b1f7b73333cfc7ea2d328b2dbb3e9d3222
Author: Soheil Hassas Yeganeh
Date: Tue Feb 27 18:32:18 2018 -0500
tcp: purge write queue upon RST
[ Upstream commit a27fd7a8ed3856faaf5a2ff1c8c5f00c0667aaa0 ]
When the connection is reset, there is no point in
keeping the packets on the write queue until the connection
is closed.
RFC 793 (page 70) and RFC 793-bis (page 64) both suggest
purging the write queue upon RST:
https://tools.ietf.org/html/draft-ietf-tcpm-rfc793bis-07
Moreover, this is essential for a correct MSG\_ZEROCOPY
implementation, because userspace cannot call close(fd)
before receiving zerocopy signals even when the connection
is reset.
Fixes: f214f915e7db ("tcp: enable MSG\_ZEROCOPY")
Signed-off-by: Soheil Hassas Yeganeh
Reviewed-by: Eric Dumazet
Signed-off-by: Yuchung Cheng
Signed-off-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 069018b93412c2b191340bf95fbabc99ad47d683
Author: Jason A. Donenfeld
Date: Wed Feb 21 04:41:59 2018 +0100
netlink: put module reference if dump start fails
[ Upstream commit b87b6194be631c94785fe93398651e804ed43e28 ]
Before, if cb->start() failed, the module reference would never be put,
because cb->cb\_running is intentionally false at this point. Users are
generally annoyed by this because they can no longer unload modules that
leak references. Also, it may be possible to tediously wrap a reference
counter back to zero, especially since module.c still uses atomic\_inc
instead of refcount\_inc.
This patch expands the error path to simply call module\_put if
cb->start() fails.
Fixes: 41c87425a1ac ("netlink: do not set cb\_running if dump's start() errs")
Signed-off-by: Jason A. Donenfeld
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit acc97d6c2bb5a4361f7a7f8681dee14c1c23663b
Author: Ido Schimmel
Date: Sat Feb 17 00:30:44 2018 +0100
mlxsw: spectrum\_router: Do not unconditionally clear route offload indication
[ Upstream commit d1c95af366961101819f07e3c64d44f3be7f0367 ]
When mlxsw replaces (or deletes) a route it removes the offload
indication from the replaced route. This is problematic for IPv4 routes,
as the offload indication is stored in the fib\_info which is usually
shared between multiple routes.
Instead of unconditionally clearing the offload indication, only clear
it if no other route is using the fib\_info.
Fixes: 3984d1a89fe7 ("mlxsw: spectrum\_router: Provide offload indication using nexthop flags")
Signed-off-by: Ido Schimmel
Reported-by: Alexander Petrovskiy
Tested-by: Alexander Petrovskiy
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 58cea8e8f1c09cb52fdbe3915f7bf2014dd2ecb0
Author: Paolo Abeni
Date: Mon Feb 5 22:23:01 2018 +0100
cls\_u32: fix use after free in u32\_destroy\_key()
[ Upstream commit d7cdee5ea8d28ae1b6922deb0c1badaa3aa0ef8c ]
Li Shuang reported an Oops with cls\_u32 due to an use-after-free
in u32\_destroy\_key(). The use-after-free can be triggered with:
dev=lo
tc qdisc add dev $dev root handle 1: htb default 10
tc filter add dev $dev parent 1: prio 5 handle 1: protocol ip u32 divisor 256
tc filter add dev $dev protocol ip parent 1: prio 5 u32 ht 800:: match ip dst\
10.0.0.0/8 hashkey mask 0x0000ff00 at 16 link 1:
tc qdisc del dev $dev root
Which causes the following kasan splat:
==================================================================
BUG: KASAN: use-after-free in u32\_destroy\_key.constprop.21+0x117/0x140 [cls\_u32]
Read of size 4 at addr ffff881b83dae618 by task kworker/u48:5/571
CPU: 17 PID: 571 Comm: kworker/u48:5 Not tainted 4.15.0+ #87
Hardware name: Dell Inc. PowerEdge R730/072T6D, BIOS 2.1.7 06/16/2016
Workqueue: tc\_filter\_workqueue u32\_delete\_key\_freepf\_work [cls\_u32]
Call Trace:
dump\_stack+0xd6/0x182
? dma\_virt\_map\_sg+0x22e/0x22e
print\_address\_description+0x73/0x290
kasan\_report+0x277/0x360
? u32\_destroy\_key.constprop.21+0x117/0x140 [cls\_u32]
u32\_destroy\_key.constprop.21+0x117/0x140 [cls\_u32]
u32\_delete\_key\_freepf\_work+0x1c/0x30 [cls\_u32]
process\_one\_work+0xae0/0x1c80
? sched\_clock+0x5/0x10
? pwq\_dec\_nr\_in\_flight+0x3c0/0x3c0
? \_raw\_spin\_unlock\_irq+0x29/0x40
? trace\_hardirqs\_on\_caller+0x381/0x570
? \_raw\_spin\_unlock\_irq+0x29/0x40
? finish\_task\_switch+0x1e5/0x760
? finish\_task\_switch+0x208/0x760
? preempt\_notifier\_dec+0x20/0x20
? \_\_schedule+0x839/0x1ee0
? check\_noncircular+0x20/0x20
? firmware\_map\_remove+0x73/0x73
? find\_held\_lock+0x39/0x1c0
? worker\_thread+0x434/0x1820
? lock\_contended+0xee0/0xee0
? lock\_release+0x1100/0x1100
? init\_rescuer.part.16+0x150/0x150
? retint\_kernel+0x10/0x10
worker\_thread+0x216/0x1820
? process\_one\_work+0x1c80/0x1c80
? lock\_acquire+0x1a5/0x540
? lock\_downgrade+0x6b0/0x6b0
? sched\_clock+0x5/0x10
? lock\_release+0x1100/0x1100
? compat\_start\_thread+0x80/0x80
? do\_raw\_spin\_trylock+0x190/0x190
? \_raw\_spin\_unlock\_irq+0x29/0x40
? trace\_hardirqs\_on\_caller+0x381/0x570
? \_raw\_spin\_unlock\_irq+0x29/0x40
? finish\_task\_switch+0x1e5/0x760
? finish\_task\_switch+0x208/0x760
? preempt\_notifier\_dec+0x20/0x20
? \_\_schedule+0x839/0x1ee0
? kmem\_cache\_alloc\_trace+0x143/0x320
? firmware\_map\_remove+0x73/0x73
? sched\_clock+0x5/0x10
? sched\_clock\_cpu+0x18/0x170
? find\_held\_lock+0x39/0x1c0
? schedule+0xf3/0x3b0
? lock\_downgrade+0x6b0/0x6b0
? \_\_schedule+0x1ee0/0x1ee0
? do\_wait\_intr\_irq+0x340/0x340
? do\_raw\_spin\_trylock+0x190/0x190
? \_raw\_spin\_unlock\_irqrestore+0x32/0x60
? process\_one\_work+0x1c80/0x1c80
? process\_one\_work+0x1c80/0x1c80
kthread+0x312/0x3d0
? kthread\_create\_worker\_on\_cpu+0xc0/0xc0
ret\_from\_fork+0x3a/0x50
Allocated by task 1688:
kasan\_kmalloc+0xa0/0xd0
\_\_kmalloc+0x162/0x380
u32\_change+0x1220/0x3c9e [cls\_u32]
tc\_ctl\_tfilter+0x1ba6/0x2f80
rtnetlink\_rcv\_msg+0x4f0/0x9d0
netlink\_rcv\_skb+0x124/0x320
netlink\_unicast+0x430/0x600
netlink\_sendmsg+0x8fa/0xd60
sock\_sendmsg+0xb1/0xe0
\_\_\_sys\_sendmsg+0x678/0x980
\_\_sys\_sendmsg+0xc4/0x210
do\_syscall\_64+0x232/0x7f0
return\_from\_SYSCALL\_64+0x0/0x75
Freed by task 112:
kasan\_slab\_free+0x71/0xc0
kfree+0x114/0x320
rcu\_process\_callbacks+0xc3f/0x1600
\_\_do\_softirq+0x2bf/0xc06
The buggy address belongs to the object at ffff881b83dae600
which belongs to the cache kmalloc-4096 of size 4096
The buggy address is located 24 bytes inside of
4096-byte region [ffff881b83dae600, ffff881b83daf600)
The buggy address belongs to the page:
page:ffffea006e0f6a00 count:1 mapcount:0 mapping: (null) index:0x0 compound\_mapcount: 0
flags: 0x17ffffc0008100(slab|head)
raw: 0017ffffc0008100 0000000000000000 0000000000000000 0000000100070007
raw: dead000000000100 dead000000000200 ffff880187c0e600 0000000000000000
page dumped because: kasan: bad access detected
Memory state around the buggy address:
ffff881b83dae500: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
ffff881b83dae580: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
>ffff881b83dae600: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
^
ffff881b83dae680: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
ffff881b83dae700: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
==================================================================
The problem is that the htnode is freed before the linked knodes and the
latter will try to access the first at u32\_destroy\_key() time.
This change addresses the issue using the htnode refcnt to guarantee
the correct free order. While at it also add a RCU annotation,
to keep sparse happy.
v1 -> v2: use rtnl\_derefence() instead of RCU read locks
v2 -> v3:
- don't check refcnt in u32\_destroy\_hnode()
- cleaned-up u32\_destroy() implementation
- cleaned-up code comment
v3 -> v4:
- dropped unneeded comment
Reported-by: Li Shuang
Fixes: c0d378ef1266 ("net\_sched: use tcf\_queue\_work() in u32 filter")
Signed-off-by: Paolo Abeni
Acked-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ba34386c3a5f696c14b24da06da28479c1b7728f
Author: Tom Lendacky
Date: Tue Feb 20 15:22:05 2018 -0600
amd-xgbe: Restore PCI interrupt enablement setting on resume
[ Upstream commit cfd092f2db8b4b6727e1c03ef68a7842e1023573 ]
After resuming from suspend, the PCI device support must re-enable the
interrupt setting so that interrupts are actually delivered.
Signed-off-by: Tom Lendacky
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c5f3a16c047dfa7f309a2e1ca7d43e7db92ec35b
Author: Boris Pismenny
Date: Tue Feb 27 14:18:39 2018 +0200
tls: Use correct sk->sk\_prot for IPV6
[ Upstream commit c113187d38ff85dc302a1bb55864b203ebb2ba10 ]
The tls ulp overrides sk->prot with a new tls specific proto structs.
The tls specific structs were previously based on the ipv4 specific
tcp\_prot sturct.
As a result, attaching the tls ulp to an ipv6 tcp socket replaced
some ipv6 callback with the ipv4 equivalents.
This patch adds ipv6 tls proto structs and uses them when
attached to ipv6 sockets.
Fixes: 3c4d7559159b ('tls: kernel TLS support')
Signed-off-by: Boris Pismenny
Signed-off-by: Ilya Lesokhin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7e7a3ddb1a477d82e538c00ae1758d1448566e85
Author: Eran Ben Elisha
Date: Thu Jan 25 11:18:09 2018 +0200
net/mlx5e: Verify inline header size do not exceed SKB linear size
[ Upstream commit f600c6088018d1dbc5777d18daa83660f7ea4a64 ]
Driver tries to copy at least MLX5E\_MIN\_INLINE bytes into the control
segment of the WQE. It assumes that the linear part contains at least
MLX5E\_MIN\_INLINE bytes, which can be wrong.
Cited commit verified that driver will not copy more bytes into the
inline header part that the actual size of the packet. Re-factor this
check to make sure we do not exceed the linear part as well.
This fix is aligned with the current driver's assumption that the entire
L2 will be present in the linear part of the SKB.
Fixes: 6aace17e64f4 ("net/mlx5e: Fix inline header size for small packets")
Signed-off-by: Eran Ben Elisha
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 738d0533e3167481fb3b6a7e556f7bbb4599b322
Author: Ido Schimmel
Date: Sun Feb 25 21:59:06 2018 +0200
bridge: Fix VLAN reference count problem
[ Upstream commit 0e5a82efda872c2469c210957d7d4161ef8f4391 ]
When a VLAN is added on a port, a reference is taken on the
corresponding master VLAN entry. If it does not already exist, then it
is created and a reference taken.
However, in the second case a reference is not really taken when
CONFIG\_REFCOUNT\_FULL is enabled as refcount\_inc() is replaced by
refcount\_inc\_not\_zero().
Fix this by using refcount\_set() on a newly created master VLAN entry.
Fixes: 251277598596 ("net, bridge: convert net\_bridge\_vlan.refcnt from atomic\_t to refcount\_t")
Signed-off-by: Ido Schimmel
Acked-by: Nikolay Aleksandrov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e7b63f0b998175bc599e8a8e17db3a06445772ca
Author: Alexey Kodanev
Date: Mon Feb 5 15:10:35 2018 +0300
sctp: fix dst refcnt leak in sctp\_v6\_get\_dst()
[ Upstream commit 957d761cf91cdbb175ad7d8f5472336a4d54dbf2 ]
When going through the bind address list in sctp\_v6\_get\_dst() and
the previously found address is better ('matchlen > bmatchlen'),
the code continues to the next iteration without releasing currently
held destination.
Fix it by releasing 'bdst' before continue to the next iteration, and
instead of introducing one more '!IS\_ERR(bdst)' check for dst\_release(),
move the already existed one right after ip6\_dst\_lookup\_flow(), i.e. we
shouldn't proceed further if we get an error for the route lookup.
Fixes: dbc2b5e9a09e ("sctp: fix src address selection if using secondary addresses for ipv6")
Signed-off-by: Alexey Kodanev
Acked-by: Neil Horman
Acked-by: Marcelo Ricardo Leitner
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fcff1213761aa8ece7b1734fc496d99df49bf5bf
Author: David Ahern
Date: Wed Feb 21 11:00:54 2018 -0800
net: ipv4: Set addr\_type in hash\_keys for forwarded case
[ Upstream commit 1fe4b1184c2ae2bfbf9e8b14c9c0c1945c98f205 ]
The result of the skb flow dissect is copied from keys to hash\_keys to
ensure only the intended data is hashed. The original L4 hash patch
overlooked setting the addr\_type for this case; add it.
Fixes: bf4e0a3db97eb ("net: ipv4: add support for ECMP hash policy choice")
Reported-by: Ido Schimmel
Signed-off-by: David Ahern
Acked-by: Nikolay Aleksandrov
Reviewed-by: Ido Schimmel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 11cc4753e279d0829f46ef6155e451f1cd92f9aa
Author: Jiri Pirko
Date: Tue Feb 13 11:22:42 2018 +0100
mlxsw: spectrum\_router: Fix error path in mlxsw\_sp\_vr\_create
[ Upstream commit 0f2d2b2736b08dafa3bde31d048750fbc8df3a31 ]
Since mlxsw\_sp\_fib\_create() and mlxsw\_sp\_mr\_table\_create()
use ERR\_PTR macro to propagate int err through return of a pointer,
the return value is not NULL in case of failure. So if one
of the calls fails, one of vr->fib4, vr->fib6 or vr->mr4\_table
is not NULL and mlxsw\_sp\_vr\_is\_used wrongly assumes
that vr is in use which leads to crash like following one:
[ 1293.949291] BUG: unable to handle kernel NULL pointer dereference at 00000000000006c9
[ 1293.952729] IP: mlxsw\_sp\_mr\_table\_flush+0x15/0x70 [mlxsw\_spectrum]
Fix this by using local variables to hold the pointers and set vr->\*
only in case everything went fine.
Fixes: 76610ebbde18 ("mlxsw: spectrum\_router: Refactor virtual router handling")
Fixes: a3d9bc506d64 ("mlxsw: spectrum\_router: Extend virtual routers with IPv6 support")
Fixes: d42b0965b1d4 ("mlxsw: spectrum\_router: Add multicast routes notification handling functionality")
Signed-off-by: Jiri Pirko
Reviewed-by: Ido Schimmel
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6fe1cee8331d6bcb540f6e645e399e93ab3bb447
Author: Xin Long
Date: Mon Feb 12 18:29:06 2018 +0800
sctp: do not pr\_err for the duplicated node in transport rhlist
[ Upstream commit 27af86bb038d9c8b8066cd17854ddaf2ea92bce1 ]
The pr\_err in sctp\_hash\_transport was supposed to report a sctp bug
for using rhashtable/rhlist.
The err '-EEXIST' introduced in Commit cd2b70875058 ("sctp: check
duplicate node before inserting a new transport") doesn't belong
to that case.
So just return -EEXIST back without pr\_err any kmsg.
Fixes: cd2b70875058 ("sctp: check duplicate node before inserting a new transport")
Reported-by: Wei Chen
Signed-off-by: Xin Long
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 76d0b20282976f5bd306d04a493eb73303470e2d
Author: Ivan Vecera
Date: Thu Feb 8 16:10:39 2018 +0100
net/sched: cls\_u32: fix cls\_u32 on filter replace
[ Upstream commit eb53f7af6f15285e2f6ada97285395343ce9f433 ]
The following sequence is currently broken:
# tc qdisc add dev foo ingress
# tc filter replace dev foo protocol all ingress \
u32 match u8 0 0 action mirred egress mirror dev bar1
# tc filter replace dev foo protocol all ingress \
handle 800::800 pref 49152 \
u32 match u8 0 0 action mirred egress mirror dev bar2
Error: cls\_u32: Key node flags do not match passed flags.
We have an error talking to the kernel, -1
The error comes from u32\_change() when comparing new and
existing flags. The existing ones always contains one of
TCA\_CLS\_FLAGS\_{,NOT}\_IN\_HW flag depending on offloading state.
These flags cannot be passed from userspace so the condition
(n->flags != flags) in u32\_change() always fails.
Fix the condition so the flags TCA\_CLS\_FLAGS\_NOT\_IN\_HW and
TCA\_CLS\_FLAGS\_IN\_HW are not taken into account.
Fixes: 24d3dc6d27ea ("net/sched: cls\_u32: Reflect HW offload status")
Signed-off-by: Ivan Vecera
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b933df76437b93b579e32b3a41f011da99497446
Author: Eric Dumazet
Date: Thu Feb 22 19:45:27 2018 -0800
net\_sched: gen\_estimator: fix broken estimators based on percpu stats
[ Upstream commit a5f7add332b4ea6d4b9480971b3b0f5e66466ae9 ]
pfifo\_fast got percpu stats lately, uncovering a bug I introduced last
year in linux-4.10.
I missed the fact that we have to clear our temporary storage
before calling \_\_gnet\_stats\_copy\_basic() in the case of percpu stats.
Without this fix, rate estimators (tc qd replace dev xxx root est 1sec
4sec pfifo\_fast) are utterly broken.
Fixes: 1c0d32fde5bd ("net\_sched: gen\_estimator: complete rewrite of rate estimators")
Signed-off-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 03bbd6797f0b4eadaa3a38621e35351af000c5bb
Author: Inbar Karmy
Date: Thu Dec 7 17:26:33 2017 +0200
net/mlx5e: Fix loopback self test when GRO is off
[ Upstream commit ef7a3518f7dd4f4cf5e5b5358c93d1eb78df28fb ]
When GRO is off, the transport header pointer in sk\_buff is
initialized to network's header.
To find the udp header, instead of using udp\_hdr() which assumes
skb\_network\_header was set, manually calculate the udp header offset.
Fixes: 0952da791c97 ("net/mlx5e: Add support for loopback selftest")
Signed-off-by: Inbar Karmy
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit edb7471e93d2c9d90b8f7d823b000a8a8eabf77d
Author: Tonghao Zhang
Date: Sun Feb 4 18:07:10 2018 -0800
doc: Change the min default value of tcp\_wmem/tcp\_rmem.
[ Upstream commit a61a86f8db92923a2a4c857c49a795bcae754497 ]
The SK\_MEM\_QUANTUM was changed from PAGE\_SIZE to 4096. And the
tcp\_wmem/tcp\_rmem min default values are 4096.
Fixes: bd68a2a854ad ("net: set SK\_MEM\_QUANTUM to 4096")
Cc: Eric Dumazet
Signed-off-by: Tonghao Zhang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3f62339aa796506a98d6456e706ba934fbd4f848
Author: Eric Dumazet
Date: Wed Feb 21 06:43:03 2018 -0800
tcp\_bbr: better deal with suboptimal GSO
[ Upstream commit 350c9f484bde93ef229682eedd98cd5f74350f7f ]
BBR uses tcp\_tso\_autosize() in an attempt to probe what would be the
burst sizes and to adjust cwnd in bbr\_target\_cwnd() with following
gold formula :
/\* Allow enough full-sized skbs in flight to utilize end systems. \*/
cwnd += 3 \* bbr->tso\_segs\_goal;
But GSO can be lacking or be constrained to very small
units (ip link set dev ... gso\_max\_segs 2)
What we really want is to have enough packets in flight so that both
GSO and GRO are efficient.
So in the case GSO is off or downgraded, we still want to have the same
number of packets in flight as if GSO/TSO was fully operational, so
that GRO can hopefully be working efficiently.
To fix this issue, we make tcp\_tso\_autosize() unaware of
sk->sk\_gso\_max\_segs
Only tcp\_tso\_segs() has to enforce the gso\_max\_segs limit.
Tested:
ethtool -K eth0 tso off gso off
tc qd replace dev eth0 root pfifo\_fast
Before patch:
for f in {1..5}; do ./super\_netperf 1 -H lpaa24 -- -K bbr; done
    691  (ss -temoi shows cwnd is stuck around 6 )
    667
    651
    631
    517
After patch :
# for f in {1..5}; do ./super\_netperf 1 -H lpaa24 -- -K bbr; done
   1733 (ss -temoi shows cwnd is around 386 )
   1778
   1746
   1781
   1718
Fixes: 0f8782ea1497 ("tcp\_bbr: add BBR congestion control")
Signed-off-by: Eric Dumazet
Reported-by: Oleksandr Natalenko
Acked-by: Neal Cardwell
Acked-by: Soheil Hassas Yeganeh
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5c783a7f0203ea5794474d3077bc9be5b644ebab
Author: David Howells
Date: Thu Feb 22 14:38:14 2018 +0000
rxrpc: Fix send in rxrpc\_send\_data\_packet()
[ Upstream commit 93c62c45ed5fad1b87e3a45835b251cd68de9c46 ]
All the kernel\_sendmsg() calls in rxrpc\_send\_data\_packet() need to send
both parts of the iov[] buffer, but one of them does not. Fix it so that
it does.
Without this, short IPv6 rxrpc DATA packets may be seen that have the rxrpc
header included, but no payload.
Fixes: 5a924b8951f8 ("rxrpc: Don't store the rxrpc header in the Tx queue sk\_buffs")
Reported-by: Marc Dionne
Signed-off-by: David Howells
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f3d48615d32282c47dfca711810918d0850ff5da
Author: Ilya Lesokhin
Date: Mon Feb 12 12:57:04 2018 +0200
tcp: Honor the eor bit in tcp\_mtu\_probe
[ Upstream commit 808cf9e38cd7923036a99f459ccc8cf2955e47af ]
Avoid SKB coalescing if eor bit is set in one of the relevant
SKBs.
Fixes: c134ecb87817 ("tcp: Make use of MSG\_EOR in tcp\_sendmsg")
Signed-off-by: Ilya Lesokhin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 88ff57617d0ddabaca1aecbe17ad72e2478bc660
Author: Heiner Kallweit
Date: Thu Feb 8 21:01:48 2018 +0100
net: phy: fix phy\_start to consider PHY\_IGNORE\_INTERRUPT
[ Upstream commit 08f5138512180a479ce6b9d23b825c9f4cd3be77 ]
This condition wasn't adjusted when PHY\_IGNORE\_INTERRUPT (-2) was added
long ago. In case of PHY\_IGNORE\_INTERRUPT the MAC interrupt indicates
also PHY state changes and we should do what the symbol says.
Fixes: 84a527a41f38 ("net: phylib: fix interrupts re-enablement in phy\_start")
Signed-off-by: Heiner Kallweit
Reviewed-by: Florian Fainelli
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0ef5cb5705f2bd2957b72b38b6a5e681df765f3d
Author: Gal Pressman
Date: Thu Jan 25 18:00:41 2018 +0200
net/mlx5e: Specify numa node when allocating drop rq
[ Upstream commit 2f0db87901698cd73d828cc6fb1957b8916fc911 ]
When allocating a drop rq, no numa node is explicitly set which means
allocations are done on node zero. This is not necessarily the nearest
numa node to the HCA, and even worse, might even be a memoryless numa
node.
Choose the numa\_node given to us by the pci device in order to properly
allocate the coherent dma memory instead of assuming zero is valid.
Fixes: 556dd1b9c313 ("net/mlx5e: Set drop RQ's necessary parameters only")
Signed-off-by: Gal Pressman
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 1b1a55b29fe2876b54f92d69db606fb695bd5bc2
Author: Shalom Toledo
Date: Thu Mar 1 11:37:05 2018 +0100
mlxsw: spectrum\_switchdev: Check success of FDB add operation
[ Upstream commit 0a8a1bf17e3af34f1f8d2368916a6327f8b3bfd5 ]
Until now, we assumed that in case of error when adding FDB entries, the
write operation will fail, but this is not the case. Instead, we need to
check that the number of entries reported in the response is equal to
the number of entries specified in the request.
Fixes: 56ade8fe3fe1 ("mlxsw: spectrum: Add initial support for Spectrum ASIC")
Reported-by: Ido Schimmel
Signed-off-by: Shalom Toledo
Reviewed-by: Ido Schimmel
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c7cf3921eb5fbd82a537be579628dca95949e2e0
Author: Tommi Rantala
Date: Mon Feb 5 21:48:14 2018 +0200
sctp: fix dst refcnt leak in sctp\_v4\_get\_dst
[ Upstream commit 4a31a6b19f9ddf498c81f5c9b089742b7472a6f8 ]
Fix dst reference count leak in sctp\_v4\_get\_dst() introduced in commit
410f03831 ("sctp: add routing output fallback"):
When walking the address\_list, successive ip\_route\_output\_key() calls
may return the same rt->dst with the reference incremented on each call.
The code would not decrement the dst refcount when the dst pointer was
identical from the previous iteration, causing the dst refcnt leak.
Testcase:
ip netns add TEST
ip netns exec TEST ip link set lo up
ip link add dummy0 type dummy
ip link add dummy1 type dummy
ip link add dummy2 type dummy
ip link set dev dummy0 netns TEST
ip link set dev dummy1 netns TEST
ip link set dev dummy2 netns TEST
ip netns exec TEST ip addr add 192.168.1.1/24 dev dummy0
ip netns exec TEST ip link set dummy0 up
ip netns exec TEST ip addr add 192.168.1.2/24 dev dummy1
ip netns exec TEST ip link set dummy1 up
ip netns exec TEST ip addr add 192.168.1.3/24 dev dummy2
ip netns exec TEST ip link set dummy2 up
ip netns exec TEST sctp\_test -H 192.168.1.2 -P 20002 -h 192.168.1.1 -p 20000 -s -B 192.168.1.3
ip netns del TEST
In 4.4 and 4.9 kernels this results to:
[ 354.179591] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 364.419674] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 374.663664] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 384.903717] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 395.143724] unregister\_netdevice: waiting for lo to become free. Usage count = 1
[ 405.383645] unregister\_netdevice: waiting for lo to become free. Usage count = 1
...
Fixes: 410f03831 ("sctp: add routing output fallback")
Fixes: 0ca50d12f ("sctp: fix src address selection if using secondary addresses")
Signed-off-by: Tommi Rantala
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9b8444159a4c8c4e2aa6a1c9171de250676b09b2
Author: Gal Pressman
Date: Wed Dec 20 08:48:24 2017 +0200
net/mlx5e: Fix TCP checksum in LRO buffers
[ Upstream commit 8babd44d2079079f9d5a4aca7005aed80236efe0 ]
When receiving an LRO packet, the checksum field is set by the hardware
to the checksum of the first coalesced packet. Obviously, this checksum
is not valid for the merged LRO packet and should be fixed. We can use
the CQE checksum which covers the checksum of the entire merged packet
TCP payload to help us calculate the checksum incrementally.
Tested by sending IPv4/6 traffic with LRO enabled, RX checksum disabled
and watching nstat checksum error counters (in addition to the obvious
bandwidth drop caused by checksum errors).
This bug is usually "hidden" since LRO packets would go through the
CHECKSUM\_UNNECESSARY flow which does not validate the packet checksum.
It's important to note that previous to this patch, LRO packets provided
with CHECKSUM\_UNNECESSARY are indeed packets with a correct validated
checksum (even though the checksum inside the TCP header is incorrect),
since the hardware LRO aggregation is terminated upon receiving a packet
with bad checksum.
Fixes: e586b3b0baee ("net/mlx5: Ethernet Datapath files")
Signed-off-by: Gal Pressman
Signed-off-by: Saeed Mahameed
Signed-off-by: Greg Kroah-Hartman
commit 1e4661b4d10739bbe3fb3efc4c46e03334149601
Author: Alexey Kodanev
Date: Thu Feb 15 20:18:43 2018 +0300
udplite: fix partial checksum initialization
[ Upstream commit 15f35d49c93f4fa9875235e7bf3e3783d2dd7a1b ]
Since UDP-Lite is always using checksum, the following path is
triggered when calculating pseudo header for it:
udp4\_csum\_init() or udp6\_csum\_init()
skb\_checksum\_init\_zero\_check()
\_\_skb\_checksum\_validate\_complete()
The problem can appear if skb->len is less than CHECKSUM\_BREAK. In
this particular case \_\_skb\_checksum\_validate\_complete() also invokes
\_\_skb\_checksum\_complete(skb). If UDP-Lite is using partial checksum
that covers only part of a packet, the function will return bad
checksum and the packet will be dropped.
It can be fixed if we skip skb\_checksum\_init\_zero\_check() and only
set the required pseudo header checksum for UDP-Lite with partial
checksum before udp4\_csum\_init()/udp6\_csum\_init() functions return.
Fixes: ed70fcfcee95 ("net: Call skb\_checksum\_init in IPv4")
Fixes: e4f45b7f40bd ("net: Call skb\_checksum\_init in IPv6")
Signed-off-by: Alexey Kodanev
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4fadd1aa760e40ee98507326cb714036b92d1fc1
Author: Alexey Kodanev
Date: Fri Feb 9 17:35:23 2018 +0300
sctp: verify size of a new chunk in \_sctp\_make\_chunk()
[ Upstream commit 07f2c7ab6f8d0a7e7c5764c4e6cc9c52951b9d9c ]
When SCTP makes INIT or INIT\_ACK packet the total chunk length
can exceed SCTP\_MAX\_CHUNK\_LEN which leads to kernel panic when
transmitting these packets, e.g. the crash on sending INIT\_ACK:
[ 597.804948] skbuff: skb\_over\_panic: text:00000000ffae06e4 len:120168
put:120156 head:000000007aa47635 data:00000000d991c2de
tail:0x1d640 end:0xfec0 dev:
...
[ 597.976970] ------------[ cut here ]------------
[ 598.033408] kernel BUG at net/core/skbuff.c:104!
[ 600.314841] Call Trace:
[ 600.345829]
[ 600.371639] ? sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.436934] skb\_put+0x16c/0x200
[ 600.477295] sctp\_packet\_transmit+0x2095/0x26d0 [sctp]
[ 600.540630] ? sctp\_packet\_config+0x890/0x890 [sctp]
[ 600.601781] ? \_\_sctp\_packet\_append\_chunk+0x3b4/0xd00 [sctp]
[ 600.671356] ? sctp\_cmp\_addr\_exact+0x3f/0x90 [sctp]
[ 600.731482] sctp\_outq\_flush+0x663/0x30d0 [sctp]
[ 600.788565] ? sctp\_make\_init+0xbf0/0xbf0 [sctp]
[ 600.845555] ? sctp\_check\_transmitted+0x18f0/0x18f0 [sctp]
[ 600.912945] ? sctp\_outq\_tail+0x631/0x9d0 [sctp]
[ 600.969936] sctp\_cmd\_interpreter.isra.22+0x3be1/0x5cb0 [sctp]
[ 601.041593] ? sctp\_sf\_do\_5\_1B\_init+0x85f/0xc30 [sctp]
[ 601.104837] ? sctp\_generate\_t1\_cookie\_event+0x20/0x20 [sctp]
[ 601.175436] ? sctp\_eat\_data+0x1710/0x1710 [sctp]
[ 601.233575] sctp\_do\_sm+0x182/0x560 [sctp]
[ 601.284328] ? sctp\_has\_association+0x70/0x70 [sctp]
[ 601.345586] ? sctp\_rcv+0xef4/0x32f0 [sctp]
[ 601.397478] ? sctp6\_rcv+0xa/0x20 [sctp]
...
Here the chunk size for INIT\_ACK packet becomes too big, mostly
because of the state cookie (INIT packet has large size with
many address parameters), plus additional server parameters.
Later this chunk causes the panic in skb\_put\_data():
skb\_packet\_transmit()
sctp\_packet\_pack()
skb\_put\_data(nskb, chunk->skb->data, chunk->skb->len);
'nskb' (head skb) was previously allocated with packet->size
from u16 'chunk->chunk\_hdr->length'.
As suggested by Marcelo we should check the chunk's length in
\_sctp\_make\_chunk() before trying to allocate skb for it and
discard a chunk if its size bigger than SCTP\_MAX\_CHUNK\_LEN.
Signed-off-by: Alexey Kodanev
Acked-by: Marcelo Ricardo Leitner
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9b7006aabf2bb303f14af2d036124fe576e53a61
Author: Guillaume Nault
Date: Fri Mar 2 18:41:16 2018 +0100
ppp: prevent unregistered channels from connecting to PPP units
[ Upstream commit 77f840e3e5f09c6d7d727e85e6e08276dd813d11 ]
PPP units don't hold any reference on the channels connected to it.
It is the channel's responsibility to ensure that it disconnects from
its unit before being destroyed.
In practice, this is ensured by ppp\_unregister\_channel() disconnecting
the channel from the unit before dropping a reference on the channel.
However, it is possible for an unregistered channel to connect to a PPP
unit: register a channel with ppp\_register\_net\_channel(), attach a
/dev/ppp file to it with ioctl(PPPIOCATTCHAN), unregister the channel
with ppp\_unregister\_channel() and finally connect the /dev/ppp file to
a PPP unit with ioctl(PPPIOCCONNECT).
Once in this situation, the channel is only held by the /dev/ppp file,
which can be released at anytime and free the channel without letting
the parent PPP unit know. Then the ppp structure ends up with dangling
pointers in its ->channels list.
Prevent this scenario by forbidding unregistered channels from
connecting to PPP units. This maintains the code logic by keeping
ppp\_unregister\_channel() responsible from disconnecting the channel if
necessary and avoids modification on the reference counting mechanism.
This issue seems to predate git history (successfully reproduced on
Linux 2.6.26 and earlier PPP commits are unrelated).
Signed-off-by: Guillaume Nault
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f156028765387fbdb0bb2360fabb89aed27e9201
Author: Roman Kapl
Date: Mon Feb 19 21:32:51 2018 +0100
net: sched: report if filter is too large to dump
[ Upstream commit 5ae437ad5a2ed573b1ebb04e0afa70b8869f88dd ]
So far, if the filter was too large to fit in the allocated skb, the
kernel did not return any error and stopped dumping. Modify the dumper
so that it returns -EMSGSIZE when a filter fails to dump and it is the
first filter in the skb. If we are not first, we will get a next chance
with more room.
I understand this is pretty near to being an API change, but the
original design (silent truncation) can be considered a bug.
Note: The error case can happen pretty easily if you create a filter
with 32 actions and have 4kb pages. Also recent versions of iproute try
to be clever with their buffer allocation size, which in turn leads to
Signed-off-by: Roman Kapl
Acked-by: Jiri Pirko
Acked-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 70ecf3334923d2bf26fecdd9ef90202fb64cb660
Author: Nicolas Dichtel
Date: Tue Feb 6 14:48:32 2018 +0100
netlink: ensure to loop over all netns in genlmsg\_multicast\_allns()
[ Upstream commit cb9f7a9a5c96a773bbc9c70660dc600cfff82f82 ]
Nowadays, nlmsg\_multicast() returns only 0 or -ESRCH but this was not the
case when commit 134e63756d5f was pushed.
However, there was no reason to stop the loop if a netns does not have
listeners.
Returns -ESRCH only if there was no listeners in all netns.
To avoid having the same problem in the future, I didn't take the
assumption that nlmsg\_multicast() returns only 0 or -ESRCH.
Fixes: 134e63756d5f ("genetlink: make netns aware")
CC: Johannes Berg
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9784795d3f0385ddecad4c754b8a34b785546cf2
Author: Sabrina Dubroca
Date: Mon Feb 26 16:13:43 2018 +0100
net: ipv4: don't allow setting net.ipv4.route.min\_pmtu below 68
[ Upstream commit c7272c2f1229125f74f22dcdd59de9bbd804f1c8 ]
According to RFC 1191 sections 3 and 4, ICMP frag-needed messages
indicating an MTU below 68 should be rejected:
A host MUST never reduce its estimate of the Path MTU below 68
octets.
and (talking about ICMP frag-needed's Next-Hop MTU field):
This field will never contain a value less than 68, since every
router "must be able to forward a datagram of 68 octets without
fragmentation".
Furthermore, by letting net.ipv4.route.min\_pmtu be set to negative
values, we can end up with a very large PMTU when (-1) is cast into u32.
Let's also make ip\_rt\_min\_pmtu a u32, since it's only ever compared to
unsigned ints.
Reported-by: Jianlin Shi
Signed-off-by: Sabrina Dubroca
Reviewed-by: Stefano Brivio
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 30535af95cf23a87738d4a1daa181a7d2c0f2281
Author: Jakub Kicinski
Date: Mon Feb 12 21:35:31 2018 -0800
net: fix race on decreasing number of TX queues
[ Upstream commit ac5b70198adc25c73fba28de4f78adcee8f6be0b ]
netif\_set\_real\_num\_tx\_queues() can be called when netdev is up.
That usually happens when user requests change of number of
channels/rings with ethtool -L. The procedure for changing
the number of queues involves resetting the qdiscs and setting
dev->num\_tx\_queues to the new value. When the new value is
lower than the old one, extra care has to be taken to ensure
ordering of accesses to the number of queues vs qdisc reset.
Currently the queues are reset before new dev->num\_tx\_queues
is assigned, leaving a window of time where packets can be
enqueued onto the queues going down, leading to a likely
crash in the drivers, since most drivers don't check if TX
skbs are assigned to an active queue.
Fixes: e6484930d7c7 ("net: allocate tx queues in register\_netdevice")
Signed-off-by: Jakub Kicinski
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 214284730b090b17ed5d6d0d230feaf395d0a448
Author: Grygorii Strashko
Date: Tue Feb 6 19:17:06 2018 -0600
net: ethernet: ti: cpsw: fix net watchdog timeout
[ Upstream commit 62f94c2101f35cd45775df00ba09bde77580e26a ]
It was discovered that simple program which indefinitely sends 200b UDP
packets and runs on TI AM574x SoC (SMP) under RT Kernel triggers network
watchdog timeout in TI CPSW driver (<6 hours run). The network watchdog
timeout is triggered due to race between cpsw\_ndo\_start\_xmit() and
cpsw\_tx\_handler() [NAPI]
cpsw\_ndo\_start\_xmit()
if (unlikely(!cpdma\_check\_free\_tx\_desc(txch))) {
txq = netdev\_get\_tx\_queue(ndev, q\_idx);
netif\_tx\_stop\_queue(txq);
^^ as per [1] barier has to be used after set\_bit() otherwise new value
might not be visible to other cpus
}
cpsw\_tx\_handler()
if (unlikely(netif\_tx\_queue\_stopped(txq)))
netif\_tx\_wake\_queue(txq);
and when it happens ndev TX queue became disabled forever while driver's HW
TX queue is empty.
Fix this, by adding smp\_mb\_\_after\_atomic() after netif\_tx\_stop\_queue()
calls and double check for free TX descriptors after stopping ndev TX queue
- if there are free TX descriptors wake up ndev TX queue.
[1] https://www.kernel.org/doc/html/latest/core-api/atomic\_ops.html
Signed-off-by: Grygorii Strashko
Reviewed-by: Ivan Khoronzhuk
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 21e6097dd04ad9833e0c5033050ef2fff5dd62dc
Author: Wolfram Sang
Date: Mon Feb 5 21:10:01 2018 +0100
net: amd-xgbe: fix comparison to bitshift when dealing with a mask
[ Upstream commit a3276892db7a588bedc33168e502572008f714a9 ]
Due to a typo, the mask was destroyed by a comparison instead of a bit
shift.
Signed-off-by: Wolfram Sang
Acked-by: Tom Lendacky
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit adf7429c226797f019e3fdcf684341658a9b1ffc
Author: Arnd Bergmann
Date: Thu Feb 22 16:55:34 2018 +0100
ipv6 sit: work around bogus gcc-8 -Wrestrict warning
[ Upstream commit ca79bec237f5809a7c3c59bd41cd0880aa889966 ]
gcc-8 has a new warning that detects overlapping input and output arguments
in memcpy(). It triggers for sit\_init\_net() calling ipip6\_tunnel\_clone\_6rd(),
which is actually correct:
net/ipv6/sit.c: In function 'sit\_init\_net':
net/ipv6/sit.c:192:3: error: 'memcpy' source argument is the same as destination [-Werror=restrict]
The problem here is that the logic detecting the memcpy() arguments finds them
to be the same, but the conditional that tests for the input and output of
ipip6\_tunnel\_clone\_6rd() to be identical is not a compile-time constant.
We know that netdev\_priv(t->dev) is the same as t for a tunnel device,
and comparing "dev" directly here lets the compiler figure out as well
that 'dev == sitn->fb\_tunnel\_dev' when called from sit\_init\_net(), so
it no longer warns.
This code is old, so Cc stable to make sure that we don't get the warning
for older kernels built with new gcc.
Cc: Martin Sebor
Link: https://gcc.gnu.org/bugzilla/show\_bug.cgi?id=83456
Signed-off-by: Arnd Bergmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6811b97ecd357a548d34ac34a9429454e7beefb3
Author: Denis Du
Date: Sat Feb 24 16:51:42 2018 -0500
hdlc\_ppp: carrier detect ok, don't turn off negotiation
[ Upstream commit b6c3bad1ba83af1062a7ff6986d9edc4f3d7fc8e ]
Sometimes when physical lines have a just good noise to make the protocol
handshaking fail, but the carrier detect still good. Then after remove of
the noise, nobody will trigger this protocol to be start again to cause
the link to never come back. The fix is when the carrier is still on, not
terminate the protocol handshaking.
Signed-off-by: Denis Du
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 16883c9d55c1a78ce376dd422fa4d778635c9864
Author: Stefano Brivio
Date: Thu Feb 15 09:46:03 2018 +0100
fib\_semantics: Don't match route with mismatching tclassid
[ Upstream commit a8c6db1dfd1b1d18359241372bb204054f2c3174 ]
In fib\_nh\_match(), if output interface or gateway are passed in
the FIB configuration, we don't have to check next hops of
multipath routes to conclude whether we have a match or not.
However, we might still have routes with different realms
matching the same output interface and gateway configuration,
and this needs to cause the match to fail. Otherwise the first
route inserted in the FIB will match, regardless of the realms:
# ip route add 1.1.1.1 dev eth0 table 1234 realms 1/2
# ip route append 1.1.1.1 dev eth0 table 1234 realms 3/4
# ip route list table 1234
1.1.1.1 dev eth0 scope link realms 1/2
1.1.1.1 dev eth0 scope link realms 3/4
# ip route del 1.1.1.1 dev ens3 table 1234 realms 3/4
# ip route list table 1234
1.1.1.1 dev ens3 scope link realms 3/4
whereas route with realms 3/4 should have been deleted instead.
Explicitly check for fc\_flow passed in the FIB configuration
(this comes from RTA\_FLOW extracted by rtm\_to\_fib\_config()) and
fail matching if it differs from nh\_tclassid.
The handling of RTA\_FLOW for multipath routes later in
fib\_nh\_match() is still needed, as we can have multiple RTA\_FLOW
attributes that need to be matched against the tclassid of each
next hop.
v2: Check that fc\_flow is set before discarding the match, so
that the user can still select the first matching rule by
not specifying any realm, as suggested by David Ahern.
Reported-by: Jianlin Shi
Signed-off-by: Stefano Brivio
Acked-by: David Ahern
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 842874ee8ec1d285e132406358a988f80c087cb5
Author: Xin Long
Date: Mon Feb 12 17:15:40 2018 +0800
bridge: check brport attr show in brport\_show
[ Upstream commit 1b12580af1d0677c3c3a19e35bfe5d59b03f737f ]
Now br\_sysfs\_if file flush doesn't have attr show. To read it will
cause kernel panic after users chmod u+r this file.
Xiong found this issue when running the commands:
ip link add br0 type bridge
ip link add type veth
ip link set veth0 master br0
chmod u+r /sys/devices/virtual/net/veth0/brport/flush
timeout 3 cat /sys/devices/virtual/net/veth0/brport/flush
kernel crashed with NULL a pointer dereference call trace.
This patch is to fix it by return -EINVAL when brport\_attr->show
is null, just the same as the check for brport\_attr->store in
brport\_store().
Fixes: 9cf637473c85 ("bridge: add sysfs hook to flush forwarding table")
Reported-by: Xiong Zhou
Signed-off-by: Xin Long
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1b89874c3856fdea8e0cca6af3a05e561bede586
Author: Thomas Gleixner
Date: Wed Feb 28 21:14:26 2018 +0100
x86/cpu\_entry\_area: Sync cpu\_entry\_area to initial\_page\_table
commit 945fd17ab6bab8a4d05da6c3170519fbcfe62ddb upstream.
The separation of the cpu\_entry\_area from the fixmap missed the fact that
on 32bit non-PAE kernels the cpu\_entry\_area mapping might not be covered in
initial\_page\_table by the previous synchronizations.
This results in suspend/resume failures because 32bit utilizes initial page
table for resume. The absence of the cpu\_entry\_area mapping results in a
triple fault, aka. insta reboot.
With PAE enabled this works by chance because the PGD entry which covers
the fixmap and other parts incindentally provides the cpu\_entry\_area
mapping as well.
Synchronize the initial page table after setting up the cpu entry
area. Instead of adding yet another copy of the same code, move it to a
function and invoke it from the various places.
It needs to be investigated if the existing calls in setup\_arch() and
setup\_per\_cpu\_areas() can be replaced by the later invocation from
setup\_cpu\_entry\_areas(), but that's beyond the scope of this fix.
Fixes: 92a0f81d8957 ("x86/cpu\_entry\_area: Move it out of the fixmap")
Reported-by: Woody Suwalski
Signed-off-by: Thomas Gleixner
Tested-by: Woody Suwalski
Cc: William Grant
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/alpine.DEB.2.21.1802282137290.1392@nanos.tec.linutronix.de
Signed-off-by: Greg Kroah-Hartman
commit 64982714bc3fd0cd7d5a797f6b4e77a4af3326b5
Author: Sebastian Panceac
Date: Wed Feb 28 11:40:49 2018 +0200
x86/platform/intel-mid: Handle Intel Edison reboot correctly
commit 028091f82eefd5e84f81cef81a7673016ecbe78b upstream.
When the Intel Edison module is powered with 3.3V, the reboot command makes
the module stuck. If the module is powered at a greater voltage, like 4.4V
(as the Edison Mini Breakout board does), reboot works OK.
The official Intel Edison BSP sends the IPCMSG\_COLD\_RESET message to the
SCU by default. The IPCMSG\_COLD\_BOOT which is used by the upstream kernel
is only sent when explicitely selected on the kernel command line.
Use IPCMSG\_COLD\_RESET unconditionally which makes reboot work independent
of the power supply voltage.
[ tglx: Massaged changelog ]
Fixes: bda7b072de99 ("x86/platform/intel-mid: Implement power off sequence")
Signed-off-by: Sebastian Panceac
Signed-off-by: Thomas Gleixner
Acked-by: Andy Shevchenko
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/1519810849-15131-1-git-send-email-sebastian@resin.io
Signed-off-by: Greg Kroah-Hartman
commit d7445fa22a11218f3bb8e4907d817707697cc826
Author: Juergen Gross
Date: Mon Feb 26 15:08:18 2018 +0100
x86/xen: Zero MSR\_IA32\_SPEC\_CTRL before suspend
commit 71c208dd54ab971036d83ff6d9837bae4976e623 upstream.
Older Xen versions (4.5 and before) might have problems migrating pv
guests with MSR\_IA32\_SPEC\_CTRL having a non-zero value. So before
suspending zero that MSR and restore it after being resumed.
Signed-off-by: Juergen Gross
Signed-off-by: Thomas Gleixner
Reviewed-by: Jan Beulich
Cc: stable@vger.kernel.org
Cc: xen-devel@lists.xenproject.org
Cc: boris.ostrovsky@oracle.com
Link: https://lkml.kernel.org/r/20180226140818.4849-1-jgross@suse.com
Signed-off-by: Greg Kroah-Hartman
commit 6450d9cd79e94d79be9d363f4f502b5c9d98f08f
Author: Jan Kara
Date: Mon Feb 26 12:51:43 2018 +0100
direct-io: Fix sleep in atomic due to sync AIO
commit d9c10e5b8863cfb6886d1640386455075c6e979d upstream.
Commit e864f39569f4 "fs: add RWF\_DSYNC aand RWF\_SYNC" added additional
way for direct IO to become synchronous and thus trigger fsync from the
IO completion handler. Then commit 9830f4be159b "fs: Use RWF\_\* flags for
AIO operations" allowed these flags to be set for AIO as well. However
that commit forgot to update the condition checking whether the IO
completion handling should be defered to a workqueue and thus AIO DIO
with RWF\_[D]SYNC set will call fsync() from IRQ context resulting in
sleep in atomic.
Fix the problem by checking directly iocb flags (the same way as it is
done in dio\_complete()) instead of checking all conditions that could
lead to IO being synchronous.
CC: Christoph Hellwig
CC: Goldwyn Rodrigues
CC: stable@vger.kernel.org
Reported-by: Mark Rutland
Tested-by: Mark Rutland
Fixes: 9830f4be159b29399d107bffb99e0132bc5aedd4
Signed-off-by: Jan Kara
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 1fa58410574bbb69d74509255dfbc5c8d844b2e6
Author: Dan Williams
Date: Wed Feb 21 17:08:01 2018 -0800
dax: fix vma\_is\_fsdax() helper
commit 230f5a8969d8345fc9bbe3683f068246cf1be4b8 upstream.
Gerd reports that ->i\_mode may contain other bits besides S\_IFCHR. Use
S\_ISCHR() instead. Otherwise, get\_user\_pages\_longterm() may fail on
device-dax instances when those are meant to be explicitly allowed.
Fixes: 2bb6d2837083 ("mm: introduce get\_user\_pages\_longterm")
Cc:
Reported-by: Gerd Rausch
Acked-by: Jane Chu
Reported-by: Haozhong Zhang
Reviewed-by: Jan Kara
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 1666ac0ce06fd1fae3c7e4056cc7e54fa0aaac60
Author: Viresh Kumar
Date: Fri Feb 23 09:38:28 2018 +0530
cpufreq: s3c24xx: Fix broken s3c\_cpufreq\_init()
commit 0373ca74831b0f93cd4cdbf7ad3aec3c33a479a5 upstream.
commit a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
accidentally broke cpufreq on s3c2410 and s3c2412.
These two platforms don't have a CPU frequency table and used to skip
calling cpufreq\_table\_validate\_and\_show() for them. But with the
above commit, we started calling it unconditionally and that will
eventually fail as the frequency table pointer is NULL.
Fix this by calling cpufreq\_table\_validate\_and\_show() conditionally
again.
Fixes: a307a1e6bc0d "cpufreq: s3c: use cpufreq\_generic\_init()"
Cc: 3.13+  # v3.13+
Signed-off-by: Viresh Kumar
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 483c2bdccca7ac2162ca08b23b1b6960489cdd79
Author: Dan Williams
Date: Sun Feb 4 10:34:02 2018 -0800
vfio: disable filesystem-dax page pinning
commit 94db151dc89262bfa82922c44e8320cea2334667 upstream.
Filesystem-DAX is incompatible with 'longterm' page pinning. Without
page cache indirection a DAX mapping maps filesystem blocks directly.
This means that the filesystem must not modify a file's block map while
any page in a mapping is pinned. In order to prevent the situation of
userspace holding of filesystem operations indefinitely, disallow
'longterm' Filesystem-DAX mappings.
RDMA has the same conflict and the plan there is to add a 'with lease'
mechanism to allow the kernel to notify userspace that the mapping is
being torn down for block-map maintenance. Perhaps something similar can
be put in place for vfio.
Note that xfs and ext4 still report:
"DAX enabled. Warning: EXPERIMENTAL, use at your own risk"
...at mount time, and resolving the dax-dma-vs-truncate problem is one
of the last hurdles to remove that designation.
Acked-by: Alex Williamson
Cc: Michal Hocko
Cc: kvm@vger.kernel.org
Cc:
Reported-by: Haozhong Zhang
Tested-by: Haozhong Zhang
Fixes: d475c6346a38 ("dax,ext2: replace XIP read and write with DAX I/O")
Reviewed-by: Christoph Hellwig
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit eef09bb03fcb66557515a172b8c21d12d8751423
Author: Ming Lei
Date: Sat Feb 10 08:46:17 2018 +0800
block: pass inclusive 'lend' parameter to truncate\_inode\_pages\_range
commit 0bd1ed4860d0f5f836aa8371797689a3779d1bf5 upstream.
The 'lend' parameter of truncate\_inode\_pages\_range is required to be
inclusive, so follow the rule.
This patch fixes one memory corruption triggered by discard.
Cc:
Cc: Dmitry Monakhov
Fixes: 351499a172c0 ("block: Invalidate cache on discard v2")
Reviewed-by: Bart Van Assche
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit ea402611ed0308a02674c1367b97e730134e6fa2
Author: Ming Lei
Date: Fri Feb 23 23:36:57 2018 +0800
block: kyber: fix domain token leak during requeue
commit ba989a01469d027861e55c8f1121edadef757797 upstream.
When requeuing request, the domain token should have been freed
before re-inserting the request to io scheduler. Otherwise, the
assigned domain token will be leaked, and IO hang can be caused.
Cc: Paolo Valente
Cc: Omar Sandoval
Cc: stable@vger.kernel.org
Reviewed-by: Bart Van Assche
Signed-off-by: Ming Lei
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 8882f981b717b2e02e8424b1c8de19819d8eb42b
Author: Jiufei Xue
Date: Tue Feb 27 20:10:03 2018 +0800
block: fix the count of PGPGOUT for WRITE\_SAME
commit 7c5a0dcf557c6511a61e092ba887de28882fe857 upstream.
The vm counters is counted in sectors, so we should do the conversation
in submit\_bio.
Fixes: 74d46992e0d9 ("block: replace bi\_bdev with a gendisk pointer and partitions index")
Cc: stable@vger.kernel.org
Reviewed-by: Omar Sandoval
Reviewed-by: Christoph Hellwig
Signed-off-by: Jiufei Xue
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit e4c2c02c50b34b3984d13c7c868bc3d647af3dbf
Author: Anand Jain
Date: Thu Feb 22 21:58:42 2018 +0800
btrfs: use proper endianness accessors for super\_copy
commit 3c181c12c431fe33b669410d663beb9cceefcd1b upstream.
The fs\_info::super\_copy is a byte copy of the on-disk structure and all
members must use the accessor macros/functions to obtain the right
value. This was missing in update\_super\_roots and in sysfs readers.
Moving between opposite endianness hosts will report bogus numbers in
sysfs, and mount may fail as the root will not be restored correctly. If
the filesystem is always used on a same endian host, this will not be a
problem.
Fix this by using the btrfs\_set\_super...() functions to set
fs\_info::super\_copy values, and for the sysfs, use the cached
fs\_info::nodesize/sectorsize values.
CC: stable@vger.kernel.org
Fixes: df93589a17378 ("btrfs: export more from FS\_INFO to sysfs")
Signed-off-by: Anand Jain
Reviewed-by: Liu Bo
Reviewed-by: David Sterba
[ update changelog ]
Signed-off-by: David Sterba
Signed-off-by: Greg Kroah-Hartman
commit 9a13579b303445ceacf587118deb61a35f269ab3
Author: Helge Deller
Date: Fri Jan 12 22:57:15 2018 +0100
parisc: Hide virtual kernel memory layout
commit fd8d0ca2563151204f3fe555dc8ca4bcfe8677a3 upstream.
For security reasons do not expose the virtual kernel memory layout to
userspace.
Signed-off-by: Helge Deller
Suggested-by: Kees Cook
Cc: stable@vger.kernel.org # 4.15
Reviewed-by: Kees Cook
Signed-off-by: Greg Kroah-Hartman
commit 4aa930d5820ae6e36c35b27985fd307611f69aae
Author: John David Anglin
Date: Tue Feb 27 08:16:07 2018 -0500
parisc: Fix ordering of cache and TLB flushes
commit 0adb24e03a124b79130c9499731936b11ce2677d upstream.
The change to flush\_kernel\_vmap\_range() wasn't sufficient to avoid the
SMP stalls.  The problem is some drivers call these routines with
interrupts disabled.  Interrupts need to be enabled for flush\_tlb\_all()
and flush\_cache\_all() to work.  This version adds checks to ensure
interrupts are not disabled before calling routines that need IPI
interrupts.  When interrupts are disabled, we now drop into slower code.
The attached change fixes the ordering of cache and TLB flushes in
several cases.  When we flush the cache using the existing PTE/TLB
entries, we need to flush the TLB after doing the cache flush.  We don't
need to do this when we flush the entire instruction and data caches as
these flushes don't use the existing TLB entries.  The same is true for
tmpalias region flushes.
The flush\_kernel\_vmap\_range() and invalidate\_kernel\_vmap\_range()
routines have been updated.
Secondly, we added a new purge\_kernel\_dcache\_range\_asm() routine to
pacache.S and use it in invalidate\_kernel\_vmap\_range().  Nominally,
purges are faster than flushes as the cache lines don't have to be
written back to memory.
Hopefully, this is sufficient to resolve the remaining problems due to
cache speculation.  So far, testing indicates that this is the case.  I
did work up a patch using tmpalias flushes, but there is a performance
hit because we need the physical address for each page, and we also need
to sequence access to the tmpalias flush code.  This increases the
probability of stalls.
Signed-off-by: John David Anglin
Cc: stable@vger.kernel.org # 4.9+
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 24316676e3c7da23ce3362b392e929166a7961dc
Author: Helge Deller
Date: Mon Feb 12 21:43:55 2018 +0100
parisc: Reduce irq overhead when run in qemu
commit 636a415bcc7f4fd020ece8fd5fc648c4cef19c34 upstream.
When run under QEMU, calling mfctl(16) creates some overhead because the
qemu timer has to be scaled and moved into the register. This patch
reduces the number of calls to mfctl(16) by moving the calls out of the
loops.
Additionally, increase the minimal time interval to 8000 cycles instead
of 500 to compensate possible QEMU delays when delivering interrupts.
Signed-off-by: Helge Deller
Cc: stable@vger.kernel.org # 4.14+
Signed-off-by: Greg Kroah-Hartman
commit 60e756984554322e5093090d03365321a55fa135
Author: Helge Deller
Date: Fri Jan 12 22:44:00 2018 +0100
parisc: Use cr16 interval timers unconditionally on qemu
commit 5ffa8518851f1401817c15d2a7eecc0373c26ff9 upstream.
When running on qemu we know that the (emulated) cr16 cpu-internal
clocks are syncronized. So let's use them unconditionally on qemu.
Signed-off-by: Helge Deller
Cc: stable@vger.kernel.org # 4.14+
Signed-off-by: Greg Kroah-Hartman
commit ee5e1ffab408ddbcf1a17b8c9860b1fda1a8af86
Author: Lingutla Chandrasekhar
Date: Thu Jan 18 17:20:22 2018 +0530
timers: Forward timer base before migrating timers
commit c52232a49e203a65a6e1a670cd5262f59e9364a0 upstream.
On CPU hotunplug the enqueued timers of the unplugged CPU are migrated to a
live CPU. This happens from the control thread which initiated the unplug.
If the CPU on which the control thread runs came out from a longer idle
period then the base clock of that CPU might be stale because the control
thread runs prior to any event which forwards the clock.
In such a case the timers from the unplugged CPU are queued on the live CPU
based on the stale clock which can cause large delays due to increased
granularity of the outer timer wheels which are far away from base:;clock.
But there is a worse problem than that. The following sequence of events
illustrates it:
- CPU0 timer1 is queued expires = 59969 and base->clk = 59131.
The timer is queued at wheel level 2, with resulting expiry time = 60032
(due to level granularity).
- CPU1 enters idle @60007, with next timer expiry @60020.
- CPU0 is hotplugged at @60009
- CPU1 exits idle and runs the control thread which migrates the
timers from CPU0
timer1 is now queued in level 0 for immediate handling in the next
softirq because the requested expiry time 59969 is before CPU1 base->clk
60007
- CPU1 runs code which forwards the base clock which succeeds because the
next expiring timer. which was collected at idle entry time is still set
to 60020.
So it forwards beyond 60007 and therefore misses to expire the migrated
timer1. That timer gets expired when the wheel wraps around again, which
takes between 63 and 630ms depending on the HZ setting.
Address both problems by invoking forward\_timer\_base() for the control CPUs
timer base. All other places, which might run into a similar problem
(mod\_timer()/add\_timer\_on()) already invoke forward\_timer\_base() to avoid
that.
[ tglx: Massaged comment and changelog ]
Fixes: a683f390b93f ("timers: Forward the wheel clock whenever possible")
Co-developed-by: Neeraj Upadhyay
Signed-off-by: Neeraj Upadhyay
Signed-off-by: Lingutla Chandrasekhar
Signed-off-by: Thomas Gleixner
Cc: Anna-Maria Gleixner
Cc: linux-arm-msm@vger.kernel.org
Cc: stable@vger.kernel.org
Link: https://lkml.kernel.org/r/20180118115022.6368-1-clingutla@codeaurora.org
Signed-off-by: Greg Kroah-Hartman
commit 4ee6ac4141dd4a1ca9a43bd87a35ec189cf2b817
Author: Shawn Lin
Date: Sat Feb 24 14:17:23 2018 +0800
mmc: dw\_mmc: Fix out-of-bounds access for slot's caps
commit 0d84b9e5631d923744767dc6608672df906dd092 upstream.
Add num\_caps field for dw\_mci\_drv\_data to validate the controller
id from DT alias and non-DT ways.
Reported-by: Geert Uytterhoeven
Signed-off-by: Shawn Lin
Fixes: 800d78bfccb3 ("mmc: dw\_mmc: add support for implementation specific callbacks")
Cc:
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 500fb6fc6f76ca0fd69a1fbd30369266342340c0
Author: Shawn Lin
Date: Sat Feb 24 14:17:22 2018 +0800
mmc: dw\_mmc: Factor out dw\_mci\_init\_slot\_caps
commit a4faa4929ed3be15e2d500d2405f992f6dedc8eb upstream.
Factor out dw\_mci\_init\_slot\_caps to consolidate parsing
all differents types of capabilities from host contrllers.
No functional change intended.
Signed-off-by: Shawn Lin
Fixes: 800d78bfccb3 ("mmc: dw\_mmc: add support for implementation specific callbacks")
Cc:
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit d9aedd0eeff705c1fb5f8912d199d0c40821f5e7
Author: Shawn Lin
Date: Fri Feb 23 16:47:25 2018 +0800
mmc: dw\_mmc: Avoid accessing registers in runtime suspended state
commit 5b43df8b4c1a7f0c3fbf793c9566068e6b1e570c upstream.
cat /sys/kernel/debug/mmc0/regs will hang up the system since
it's in runtime suspended state, so the genpd and biu\_clk is
off. This patch fixes this problem by calling pm\_runtime\_get\_sync
to wake it up before reading the registers.
Fixes: e9ed8835e990 ("mmc: dw\_mmc: add runtime PM callback")
Cc:
Signed-off-by: Shawn Lin
Reviewed-by: Jaehoon Chung
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 89c12efb97e70a26f5cfa31f43d92c7e611ccee3
Author: Geert Uytterhoeven
Date: Fri Feb 23 13:44:19 2018 +0100
mmc: dw\_mmc-k3: Fix out-of-bounds access through DT alias
commit 325501d9360eb42c7c51e6daa0d733844c1e790b upstream.
The hs\_timing\_cfg[] array is indexed using a value derived from the
"mshcN" alias in DT, which may lead to an out-of-bounds access.
Fix this by adding a range check.
Fixes: 361c7fe9b02eee7e ("mmc: dw\_mmc-k3: add sd support for hi3660")
Signed-off-by: Geert Uytterhoeven
Reviewed-by: Shawn Lin
Cc:
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 77a4aeb4ce78c5f18b12d3829dbcfe730503621b
Author: Adrian Hunter
Date: Wed Feb 14 15:57:43 2018 +0200
mmc: sdhci-pci: Fix S0i3 for Intel BYT-based controllers
commit f8870ae6e2d6be75b1accc2db981169fdfbea7ab upstream.
Tuning can leave the IP in an active state (Buffer Read Enable bit set)
which prevents the entry to low power states (i.e. S0i3). Data reset will
clear it.
Generally tuning is followed by a data transfer which will anyway sort out
the state, so it is rare that S0i3 is actually prevented.
Signed-off-by: Adrian Hunter
Cc: stable@vger.kernel.org
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 05d161055a54e7029579d8d929ab4c029dbe90bc
Author: Takashi Iwai
Date: Mon Feb 26 15:36:38 2018 +0100
ALSA: hda - Fix pincfg at resume on Lenovo T470 dock
commit 71db96ddfa72671bd43cacdcc99ca178d90ba267 upstream.
We've added a quirk to enable the recent Lenovo dock support, where it
overwrites the pin configs of NID 0x17 and 19, not only updating the
pin config cache. It works right after the boot, but the problem is
that the pin configs are occasionally cleared when the machine goes to
PM. Meanwhile the quirk writes the pin configs only at the pre-probe,
so this won't be applied any longer.
For addressing that issue, this patch moves the code to overwrite the
pin configs into HDA\_FIXUP\_ACT\_INIT section so that it's always
applied at both probe and resume time.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=195161
Fixes: 61fcf8ece9b6 ("ALSA: hda/realtek - Enable Thinkpad Dock device for ALC298 platform")
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 953cadb747c1d0f04c6eea9d7555927e02256002
Author: Hans de Goede
Date: Thu Feb 22 14:20:35 2018 +0100
ALSA: hda: Add a power\_save blacklist
commit 1ba8f9d308174e647b864c36209b4d7934d99888 upstream.
On some boards setting power\_save to a non 0 value leads to clicking /
popping sounds when ever we enter/leave powersaving mode. Ideally we would
figure out how to avoid these sounds, but that is not always feasible.
This commit adds a blacklist for devices where powersaving is known to
cause problems and disables it on these devices.
Note I tried to put this blacklist in userspace first:
https://github.com/systemd/systemd/pull/8128
But the systemd maintainers rightfully pointed out that it would be
impossible to then later remove entries once we actually find a way to
make power-saving work on listed boards without issues. Having this list
in the kernel will allow removal of the blacklist entry in the same commit
which fixes the clicks / plops.
The blacklist only applies to the default power\_save module-option value,
if a user explicitly sets the module-option then the blacklist is not
used.
[ added an ifdef CONFIG\_PM for the build error -- tiwai]
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1525104
BugLink: https://bugzilla.kernel.org/show\_bug.cgi?id=198611
Cc: stable@vger.kernel.org
Signed-off-by: Hans de Goede
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit b7b0967e09f8b86eec490cd625b1f4722ea119a7
Author: Takashi Iwai
Date: Wed Feb 28 08:36:06 2018 +0100
ALSA: x86: Fix missing spinlock and mutex initializations
commit 350144069abf351c743d766b2fba9cb9b7cd32a1 upstream.
The commit change for supporting the multiple ports moved involved
some code shuffling, and there the initializations of spinlock and
mutex in snd\_intelhad object were dropped mistakenly.
This patch adds the missing initializations again for each port.
Fixes: b4eb0d522fcb ("ALSA: x86: Split snd\_intelhad into card and PCM specific structures")
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit a2eeb5a466e4f8881331dd28e0fbd86c9072a679
Author: Richard Fitzgerald
Date: Tue Feb 27 17:01:18 2018 +0000
ALSA: control: Fix memory corruption risk in snd\_ctl\_elem\_read
commit 5a23699a39abc5328921a81b89383d088f6ba9cc upstream.
The patch "ALSA: control: code refactoring for ELEM\_READ/ELEM\_WRITE
operations" introduced a potential for kernel memory corruption due
to an incorrect if statement allowing non-readable controls to fall
through and call the get function. For TLV controls a driver can omit
SNDRV\_CTL\_ELEM\_ACCESS\_READ to ensure that only the TLV get function
can be called. Instead the normal get() can be invoked unexpectedly
and as the driver expects that this will only be called for controls
<= 512 bytes, potentially try to copy >512 bytes into the 512 byte
return array, so corrupting kernel memory.
The problem is an attempt to refactor the snd\_ctl\_elem\_read function
to invert the logic so that it conditionally aborted if the control
is unreadable instead of conditionally executing. But the if statement
wasn't inverted correctly.
The correct inversion of
if (a && !b)
is
if (!a || b)
Fixes: becf9e5d553c2 ("ALSA: control: code refactoring for ELEM\_READ/ELEM\_WRITE operations")
Signed-off-by: Richard Fitzgerald
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 9d1e69dd320d585e87da186f8868da07dac98cbf
Author: Erik Veijola
Date: Fri Feb 23 14:06:52 2018 +0200
ALSA: usb-audio: Add a quirck for B&W PX headphones
commit 240a8af929c7c57dcde28682725b29cf8474e8e5 upstream.
The capture interface doesn't work and the playback interface only
supports 48 kHz sampling rate even though it advertises more rates.
Signed-off-by: Erik Veijola
Cc:
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 45bc38a351065936a3493fc147c78a70cf756103
Author: Jeremy Boone
Date: Thu Feb 8 12:32:06 2018 -0800
tpm\_tis: fix potential buffer overruns caused by bit glitches on the bus
commit 6bb320ca4a4a7b5b3db8c8d7250cc40002046878 upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Tested-by: Jarkko Sakkinen
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 97277fda41a57e4d96b9d1c6bce6f9f9d70e4d99
Author: Jeremy Boone
Date: Thu Feb 8 12:31:16 2018 -0800
tpm\_i2c\_nuvoton: fix potential buffer overruns caused by bit glitches on the bus
commit f9d4d9b5a5ef2f017bc344fb65a58a902517173b upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit a46deb414510e83f9da720c3601f331b91d0ff99
Author: Jeremy Boone
Date: Thu Feb 8 12:30:01 2018 -0800
tpm\_i2c\_infineon: fix potential buffer overruns caused by bit glitches on the bus
commit 9b8cb28d7c62568a5916bdd7ea1c9176d7f8f2ed upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit e47b9cb5a31b234dd48a11359c28ed1033c8901b
Author: Jeremy Boone
Date: Thu Feb 8 12:28:08 2018 -0800
tpm: fix potential buffer overruns caused by bit glitches on the bus
commit 3be23274755ee85771270a23af7691dc9b3a95db upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. If a bit does
flip it could cause an overrun if it's in one of the size parameters,
so sanity check that we're not overrunning the provided buffer when
doing a memcpy().
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Tested-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 3f0ef47f20be0f70b3e87b675b269b659bec5469
Author: Jeremy Boone
Date: Thu Feb 8 12:29:09 2018 -0800
tpm: st33zp24: fix potential buffer overruns caused by bit glitches on the bus
commit 6d24cd186d9fead3722108dec1b1c993354645ff upstream.
Discrete TPMs are often connected over slow serial buses which, on
some platforms, can have glitches causing bit flips. In all the
driver \_recv() functions, we need to use a u32 to unmarshal the
response size, otherwise a bit flip of the 31st bit would cause the
expected variable to go negative, which would then try to read a huge
amount of data. Also sanity check that the expected amount of data is
large enough for the TPM header.
Signed-off-by: Jeremy Boone
Cc: stable@vger.kernel.org
Signed-off-by: James Bottomley
Reviewed-by: Jarkko Sakkinen
Signed-off-by: Jarkko Sakkinen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit fdfcd0ace1518d08d5b506d5f43177cd69d18deb
Author: Emil Tantilov
Date: Fri Feb 23 12:39:41 2018 -0800
ixgbe: fix crash in build\_skb Rx code path
commit 0c5661ecc5dd7ce296870a3eb7b62b1b280a5e89 upstream.
Add check for build\_skb enabled ring in ixgbe\_dma\_sync\_frag().
In that case &skb\_shinfo(skb)->frags[0] may not always be set which
can lead to a crash. Instead we derive the page offset from skb->data.
Fixes: 42073d91a214 ("ixgbe: Have the CPU take ownership of the buffers sooner")
CC: stable
Reported-by: Ambarish Soman
Suggested-by: Alexander Duyck
Signed-off-by: Emil Tantilov
Tested-by: Andrew Bowers
Signed-off-by: Jeff Kirsher
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit eeef553eef5e974d5f805fe7ef7d96e4478273b5
Author: Hans de Goede
Date: Tue Feb 20 09:06:18 2018 +0100
Bluetooth: btusb: Use DMI matching for QCA reset\_resume quirking
commit 1fdb926974695d3dbc05a429bafa266fdd16510e upstream.
Commit 61f5acea8737 ("Bluetooth: btusb: Restore QCA Rome suspend/resume fix
with a "rewritten" version") applied the USB\_QUIRK\_RESET\_RESUME to all QCA
USB Bluetooth modules. But it turns out that the resume problems are not
caused by the QCA Rome chipset, on most platforms it resumes fine. The
resume problems are actually a platform problem (likely the platform
cutting all power when suspended).
The USB\_QUIRK\_RESET\_RESUME quirk also disables runtime suspend, so by
matching on usb-ids, we're causing all boards with these chips to use extra
power, to fix resume problems which only happen on some boards.
This commit fixes this by applying the quirk based on DMI matching instead
of on usb-ids, so that we match the platform and not the chipset.
Here is the /sys/kernel/debug/usb/devices for the Bluetooth module:
T: Bus=01 Lev=01 Prnt=01 Port=07 Cnt=04 Dev#= 5 Spd=12 MxCh= 0
D: Ver= 2.01 Cls=e0(wlcon) Sub=01 Prot=01 MxPS=64 #Cfgs= 1
P: Vendor=0cf3 ProdID=e300 Rev= 0.01
C:\* #Ifs= 2 Cfg#= 1 Atr=e0 MxPwr=100mA
I:\* If#= 0 Alt= 0 #EPs= 3 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=81(I) Atr=03(Int.) MxPS= 16 Ivl=1ms
E: Ad=82(I) Atr=02(Bulk) MxPS= 64 Ivl=0ms
E: Ad=02(O) Atr=02(Bulk) MxPS= 64 Ivl=0ms
I:\* If#= 1 Alt= 0 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 0 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 0 Ivl=1ms
I: If#= 1 Alt= 1 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 9 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 9 Ivl=1ms
I: If#= 1 Alt= 2 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 17 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 17 Ivl=1ms
I: If#= 1 Alt= 3 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 25 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 25 Ivl=1ms
I: If#= 1 Alt= 4 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 33 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 33 Ivl=1ms
I: If#= 1 Alt= 5 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 49 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 49 Ivl=1ms
BugLink: https://bugzilla.redhat.com/show\_bug.cgi?id=1514836
Fixes: 61f5acea8737 ("Bluetooth: btusb: Restore QCA Rome suspend/resume..")
Cc: stable@vger.kernel.org
Cc: Brian Norris
Cc: Kai-Heng Feng
Reported-and-tested-by: Kevin Fenzi
Signed-off-by: Hans de Goede
Signed-off-by: Marcel Holtmann
Signed-off-by: Greg Kroah-Hartman
commit 7ef82fc6dd01cb0195bf75fb5e7114f8c57a4e1f
Author: Sam Bobroff
Date: Mon Feb 12 11:19:29 2018 +1100
powerpc/pseries: Enable RAS hotplug events later
commit c9dccf1d074a67d36c510845f663980d69e3409b upstream.
Currently if the kernel receives a memory hot-unplug event early
enough, it may get stuck in an infinite loop in
dissolve\_free\_huge\_pages(). This appears as a stall just after:
pseries-hotplug-mem: Attempting to hot-remove XX LMB(s) at YYYYYYYY
It appears to be caused by "minimum\_order" being uninitialized, due to
init\_ras\_IRQ() executing before hugetlb\_init().
To correct this, extract the part of init\_ras\_IRQ() that enables
hotplug event processing and place it in the machine\_late\_initcall
phase, which is guaranteed to be after hugetlb\_init() is called.
Signed-off-by: Sam Bobroff
Acked-by: Balbir Singh
[mpe: Reorder the functions to make the diff readable]
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit c58c4d2d192ddaf0f8d8b0331377fd519318c3b2
Author: Mario Limonciello
Date: Wed Jan 31 11:47:35 2018 -0600
platform/x86: dell-laptop: Allocate buffer on heap rather than globally
commit 9862b43624a5450a097cc4122732857b869dbbca upstream.
There is no longer a need for the buffer to be defined in
first 4GB physical address space.
Furthermore there may be race conditions with multiple different functions
working on a module wide buffer causing incorrect results.
Fixes: 549b4930f057658dc50d8010e66219233119a4d8
Suggested-by: Pali Rohar
Signed-off-by: Mario Limonciello
Signed-off-by: Andy Shevchenko
Signed-off-by: Greg Kroah-Hartman
commit 5263849bc9e7090162037fb2ad693cad4979e2a5
Author: Corey Minyard
Date: Mon Nov 27 08:18:33 2017 -0600
ipmi\_si: Fix error handling of platform device
commit 174134ac760275457bb0d1560a0dbe6cf8a12ad6 upstream.
Cleanup of platform devices created by the IPMI driver was not
being done correctly and could result in a memory leak. So
create a local boolean to know how to clean up those platform
devices.
Reported-by: David Binderman
Signed-off-by: Corey Minyard
Signed-off-by: Greg Kroah-Hartman
commit d3b7976e60c600843e78cdb87abced3aa71cf495
Author: Anna-Maria Gleixner
Date: Thu Dec 21 11:41:35 2017 +0100
hrtimer: Ensure POSIX compliance (relative CLOCK\_REALTIME hrtimers)
commit 48d0c9becc7f3c66874c100c126459a9da0fdced upstream.
The POSIX specification defines that relative CLOCK\_REALTIME timers are not
affected by clock modifications. Those timers have to use CLOCK\_MONOTONIC
to ensure POSIX compliance.
The introduction of the additional HRTIMER\_MODE\_PINNED mode broke this
requirement for pinned timers.
There is no user space visible impact because user space timers are not
using pinned mode, but for consistency reasons this needs to be fixed.
Check whether the mode has the HRTIMER\_MODE\_REL bit set instead of
comparing with HRTIMER\_MODE\_ABS.
Signed-off-by: Anna-Maria Gleixner
Cc: Christoph Hellwig
Cc: John Stultz
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Cc: keescook@chromium.org
Fixes: 597d0275736d ("timers: Framework for identifying pinned timers")
Link: http://lkml.kernel.org/r/20171221104205.7269-7-anna-maria@linutronix.de
Signed-off-by: Ingo Molnar
Cc: Mike Galbraith
Signed-off-by: Greg Kroah-Hartman
commit 816433b1879a2c8b2d82837014e06870562bd9a1
Author: Adam Borowski
Date: Sun Feb 4 18:45:21 2018 +0100
vsprintf: avoid misleading "(null)" for %px
commit 3a129cc2151425e5aeb69aeb25fbc994ec738137 upstream.
Like %pK already does, print "00000000" instead.
This confused people -- the convention is that "(null)" means you tried to
dereference a null pointer as opposed to printing the address.
Link: http://lkml.kernel.org/r/20180204174521.21383-1-kilobyte@angband.pl
To: Sergey Senozhatsky
To: Steven Rostedt
To: linux-kernel@vger.kernel.org
Cc: Andrew Morton
Cc: Joe Perches
Cc: Kees Cook
Cc: "Roberts, William C"
Cc: Linus Torvalds
Cc: David Laight
Cc: Randy Dunlap
Cc: Geert Uytterhoeven
Signed-off-by: Adam Borowski
Signed-off-by: Petr Mladek
Signed-off-by: Greg Kroah-Hartman


=== Content from access.redhat.com_1956a27f_20250125_175532.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2018:3096 - Security Advisory

Issued:
2018-10-30
Updated:
2018-10-30
# RHSA-2018:3096 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: kernel-rt security, bug fix, and enhancement update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2018%3A3096)

## Topic

An update for kernel-rt is now available for Red Hat Enterprise Linux 7.

Red Hat Product Security has rated this update as having a security impact of Important. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

The kernel-rt packages provide the Real Time Linux Kernel, which enables fine-tuning for systems with extremely high determinism requirements.

Security Fix(es):

* A flaw named FragmentSmack was found in the way the Linux kernel handled reassembly of fragmented IPv4 and IPv6 packets. A remote attacker could use this flaw to trigger time and calculation expensive fragment reassembly algorithm by sending specially crafted packets which could lead to a CPU saturation and hence a denial of service on the system. (CVE-2018-5391)
* kernel: out-of-bounds access in the show\_timer function in kernel/time/posix-timers.c (CVE-2017-18344)
* kernel: Integer overflow in udl\_fb\_mmap() can allow attackers to execute code in kernel space (CVE-2018-8781)
* kernel: MIDI driver race condition leads to a double-free (CVE-2018-10902)
* kernel: Missing check in inode\_init\_owner() does not clear SGID bit on non-directories for non-members (CVE-2018-13405)
* kernel: AIO write triggers integer overflow in some protocols (CVE-2015-8830)
* kernel: Use-after-free in snd\_pcm\_info function in ALSA subsystem potentially leads to privilege escalation (CVE-2017-0861)
* kernel: Handling of might\_cancel queueing is not properly pretected against race (CVE-2017-10661)
* kernel: Salsa20 encryption algorithm does not correctly handle zero-length inputs allowing local attackers to cause denial of service (CVE-2017-17805)
* kernel: Inifinite loop vulnerability in madvise\_willneed() function allows local denial of service (CVE-2017-18208)
* kernel: fuse-backed file mmap-ed onto process cmdline arguments causes denial of service (CVE-2018-1120)
* kernel: a null pointer dereference in dccp\_write\_xmit() leads to a system crash (CVE-2018-1130)
* kernel: drivers/block/loop.c mishandles lo\_release serialization allowing denial of service (CVE-2018-5344)
* kernel: Missing length check of payload in \_sctp\_make\_chunk() function allows denial of service (CVE-2018-5803)
* kernel: buffer overflow in drivers/net/wireless/ath/wil6210/wmi.c:wmi\_set\_ie() may lead to memory corruption (CVE-2018-5848)
* kernel: out-of-bound write in ext4\_init\_block\_bitmap function with a crafted ext4 image (CVE-2018-10878)
* kernel: Improper validation in bnx2x network card driver can allow for denial of service attacks via crafted packet (CVE-2018-1000026)
* kernel: Information leak when handling NM entries containing NUL (CVE-2016-4913)
* kernel: Mishandling mutex within libsas allowing local Denial of Service (CVE-2017-18232)
* kernel: NULL pointer dereference in ext4\_process\_freed\_data() when mounting crafted ext4 image (CVE-2018-1092)
* kernel: NULL pointer dereference in ext4\_xattr\_inode\_hash() causes crash with crafted ext4 image (CVE-2018-1094)
* kernel: vhost: Information disclosure in vhost.c:vhost\_new\_msg() (CVE-2018-1118)
* kernel: Denial of service in resv\_map\_release function in mm/hugetlb.c (CVE-2018-7740)
* kernel: Memory leak in the sas\_smp\_get\_phy\_events function in drivers/scsi/libsas/sas\_expander.c (CVE-2018-7757)
* kernel: Invalid pointer dereference in xfs\_ilock\_attr\_map\_shared() when mounting crafted xfs image allowing denial of service (CVE-2018-10322)
* kernel: use-after-free detected in ext4\_xattr\_set\_entry with a crafted file (CVE-2018-10879)
* kernel: out-of-bound access in ext4\_get\_group\_info() when mounting and operating a crafted ext4 image (CVE-2018-10881)
* kernel: stack-out-of-bounds write in jbd2\_journal\_dirty\_metadata function (CVE-2018-10883)
* kernel: incorrect memory bounds check in drivers/cdrom/cdrom.c (CVE-2018-10940)

Red Hat would like to thank Juha-Matti Tilli (Aalto University - Department of Communications and Networking and Nokia Bell Labs) for reporting CVE-2018-5391; Trend Micro Zero Day Initiative for reporting CVE-2018-10902; Qualys Research Labs for reporting CVE-2018-1120; Evgenii Shatokhin (Virtuozzo Team) for reporting CVE-2018-1130; and Wen Xu for reporting CVE-2018-1092 and CVE-2018-1094.

## Solution

For more details about the security issue(s), including the impact, a CVSS score, and other related information, refer to the CVE page(s) listed in the References section.

Additional Changes:

For detailed information on changes in this release, see the Red Hat Enterprise Linux 7.6 Release Notes linked from the References section.

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

The system must be rebooted for this update to take effect.

## Affected Products

* Red Hat Enterprise Linux for Real Time 7 x86\_64
* Red Hat Enterprise Linux for Real Time for NFV 7 x86\_64
* Red Hat Enterprise Linux for Real Time for x86\_64 - Extended Life Cycle Support 7 x86\_64

## Fixes

* [BZ - 1314275](https://bugzilla.redhat.com/show_bug.cgi?id=1314275)
  - CVE-2015-8830 kernel: AIO write triggers integer overflow in some protocols
* [BZ - 1337528](https://bugzilla.redhat.com/show_bug.cgi?id=1337528)
  - CVE-2016-4913 kernel: Information leak when handling NM entries containing NUL
* [BZ - 1481136](https://bugzilla.redhat.com/show_bug.cgi?id=1481136)
  - CVE-2017-10661 kernel: Handling of might\_cancel queueing is not properly pretected against race
* [BZ - 1510602](https://bugzilla.redhat.com/show_bug.cgi?id=1510602)
  - locking: bring in upstream PREEMPT\_RT rtlock patches to fix single-reader limitation
* [BZ - 1512875](https://bugzilla.redhat.com/show_bug.cgi?id=1512875)
  - WARNING: CPU: 7 PID: 1090 at drivers/target/target\_core\_transport.c:3009 \_\_transport\_check\_aborted\_status+0x153/0x190 [target\_core\_mod]
* [BZ - 1528312](https://bugzilla.redhat.com/show_bug.cgi?id=1528312)
  - CVE-2017-17805 kernel: Salsa20 encryption algorithm does not correctly handle zero-length inputs allowing local attackers to cause denial-of-service
* [BZ - 1533909](https://bugzilla.redhat.com/show_bug.cgi?id=1533909)
  - CVE-2018-5344 kernel: drivers/block/loop.c mishandles lo\_release serialization allowing denial-of-service
* [BZ - 1541846](https://bugzilla.redhat.com/show_bug.cgi?id=1541846)
  - CVE-2018-1000026 kernel: Improper validation in bnx2x network card driver can allow for denial of service attacks via crafted packet
* [BZ - 1551051](https://bugzilla.redhat.com/show_bug.cgi?id=1551051)
  - CVE-2018-5803 kernel: Missing length check of payload in net/sctp/sm\_make\_chunk.c:\_sctp\_make\_chunk() function allows denial of service
* [BZ - 1551565](https://bugzilla.redhat.com/show_bug.cgi?id=1551565)
  - CVE-2017-18208 kernel: Inifinite loop vulnerability in mm/madvise.c:madvise\_willneed() function allows local denial of service
* [BZ - 1552867](https://bugzilla.redhat.com/show_bug.cgi?id=1552867)
  - CVE-2018-7740 kernel: Denial of service in resv\_map\_release function in mm/hugetlb.c
* [BZ - 1553351](https://bugzilla.redhat.com/show_bug.cgi?id=1553351)
  - RT: update kernel-rt source tree to match RHEL 7.6 tree
* [BZ - 1553361](https://bugzilla.redhat.com/show_bug.cgi?id=1553361)
  - CVE-2018-7757 kernel: Memory leak in the sas\_smp\_get\_phy\_events function in drivers/scsi/libsas/sas\_expander.c
* [BZ - 1558066](https://bugzilla.redhat.com/show_bug.cgi?id=1558066)
  - CVE-2017-18232 kernel: Mishandling mutex within libsas allowing local Denial of Service
* [BZ - 1560777](https://bugzilla.redhat.com/show_bug.cgi?id=1560777)
  - CVE-2018-1092 kernel: NULL pointer dereference in ext4/mballoc.c:ext4\_process\_freed\_data() when mounting crafted ext4 image
* [BZ - 1560788](https://bugzilla.redhat.com/show_bug.cgi?id=1560788)
  - CVE-2018-1094 kernel: NULL pointer dereference in ext4/xattr.c:ext4\_xattr\_inode\_hash() causes crash with crafted ext4 image
* [BZ - 1563994](https://bugzilla.redhat.com/show_bug.cgi?id=1563994)
  - CVE-2017-0861 kernel: Use-after-free in snd\_pcm\_info function in ALSA subsystem potentially leads to privilege escalation
* [BZ - 1569910](https://bugzilla.redhat.com/show_bug.cgi?id=1569910)
  - Call Trace shows in guest when running determine\_maximum\_mpps.sh
* [BZ - 1571062](https://bugzilla.redhat.com/show_bug.cgi?id=1571062)
  - CVE-2018-8781 kernel: Integer overflow in drivers/gpu/drm/udl/udl\_fb.c:udl\_fb\_mmap() can allow attackers to execute code in kernel space
* [BZ - 1571623](https://bugzilla.redhat.com/show_bug.cgi?id=1571623)
  - CVE-2018-10322 kernel: Invalid pointer dereference in xfs\_ilock\_attr\_map\_shared() when mounting crafted xfs image allowing denial of service
* [BZ - 1573699](https://bugzilla.redhat.com/show_bug.cgi?id=1573699)
  - CVE-2018-1118 kernel: vhost: Information disclosure in vhost/vhost.c:vhost\_new\_msg()
* [BZ - 1575472](https://bugzilla.redhat.com/show_bug.cgi?id=1575472)
  - CVE-2018-1120 kernel: fuse-backed file mmap-ed onto process cmdline arguments causes denial of service
* [BZ - 1576419](https://bugzilla.redhat.com/show_bug.cgi?id=1576419)
  - CVE-2018-1130 kernel: a null pointer dereference in net/dccp/output.c:dccp\_write\_xmit() leads to a system crash
* [BZ - 1577408](https://bugzilla.redhat.com/show_bug.cgi?id=1577408)
  - CVE-2018-10940 kernel: incorrect memory bounds check in drivers/cdrom/cdrom.c
* [BZ - 1590720](https://bugzilla.redhat.com/show_bug.cgi?id=1590720)
  - CVE-2018-10902 kernel: MIDI driver race condition leads to a double-free
* [BZ - 1590799](https://bugzilla.redhat.com/show_bug.cgi?id=1590799)
  - CVE-2018-5848 kernel: buffer overflow in drivers/net/wireless/ath/wil6210/wmi.c:wmi\_set\_ie() may lead to memory corruption
* [BZ - 1596802](https://bugzilla.redhat.com/show_bug.cgi?id=1596802)
  - CVE-2018-10878 kernel: out-of-bound write in ext4\_init\_block\_bitmap function with a crafted ext4 image
* [BZ - 1596806](https://bugzilla.redhat.com/show_bug.cgi?id=1596806)
  - CVE-2018-10879 kernel: use-after-free detected in ext4\_xattr\_set\_entry with a crafted file
* [BZ - 1596828](https://bugzilla.redhat.com/show_bug.cgi?id=1596828)
  - CVE-2018-10881 kernel: out-of-bound access in ext4\_get\_group\_info() when mounting and operating a crafted ext4 image
* [BZ - 1596846](https://bugzilla.redhat.com/show_bug.cgi?id=1596846)
  - CVE-2018-10883 kernel: stack-out-of-bounds write in jbd2\_journal\_dirty\_metadata function
* [BZ - 1599161](https://bugzilla.redhat.com/show_bug.cgi?id=1599161)
  - CVE-2018-13405 kernel: Missing check in fs/inode.c:inode\_init\_owner() does not clear SGID bit on non-directories for non-members
* [BZ - 1608672](https://bugzilla.redhat.com/show_bug.cgi?id=1608672)
  - RT system hang due to wrong of rq's nr\_running
* [BZ - 1609664](https://bugzilla.redhat.com/show_bug.cgi?id=1609664)
  - CVE-2018-5391 kernel: IP fragments with random offsets allow a remote denial of service (FragmentSmack)
* [BZ - 1610958](https://bugzilla.redhat.com/show_bug.cgi?id=1610958)
  - CVE-2017-18344 kernel: out-of-bounds access in the show\_timer function in kernel/time/posix-timers.c

## CVEs

* [CVE-2015-8830](https://www.redhat.com/security/data/cve/CVE-2015-8830.html)
* [CVE-2016-4913](https://www.redhat.com/security/data/cve/CVE-2016-4913.html)
* [CVE-2017-0861](https://www.redhat.com/security/data/cve/CVE-2017-0861.html)
* [CVE-2017-10661](https://www.redhat.com/security/data/cve/CVE-2017-10661.html)
* [CVE-2017-17805](https://www.redhat.com/security/data/cve/CVE-2017-17805.html)
* [CVE-2017-18208](https://www.redhat.com/security/data/cve/CVE-2017-18208.html)
* [CVE-2017-18232](https://www.redhat.com/security/data/cve/CVE-2017-18232.html)
* [CVE-2017-18344](https://www.redhat.com/security/data/cve/CVE-2017-18344.html)
* [CVE-2017-18360](https://www.redhat.com/security/data/cve/CVE-2017-18360.html)
* [CVE-2018-1092](https://www.redhat.com/security/data/cve/CVE-2018-1092.html)
* [CVE-2018-1094](https://www.redhat.com/security/data/cve/CVE-2018-1094.html)
* [CVE-2018-1118](https://www.redhat.com/security/data/cve/CVE-2018-1118.html)
* [CVE-2018-1120](https://www.redhat.com/security/data/cve/CVE-2018-1120.html)
* [CVE-2018-1130](https://www.redhat.com/security/data/cve/CVE-2018-1130.html)
* [CVE-2018-5344](https://www.redhat.com/security/data/cve/CVE-2018-5344.html)
* [CVE-2018-5391](https://www.redhat.com/security/data/cve/CVE-2018-5391.html)
* [CVE-2018-5803](https://www.redhat.com/security/data/cve/CVE-2018-5803.html)
* [CVE-2018-5848](https://www.redhat.com/security/data/cve/CVE-2018-5848.html)
* [CVE-2018-7740](https://www.redhat.com/security/data/cve/CVE-2018-7740.html)
* [CVE-2018-7757](https://www.redhat.com/security/data/cve/CVE-2018-7757.html)
* [CVE-2018-8781](https://www.redhat.com/security/data/cve/CVE-2018-8781.html)
* [CVE-2018-10322](https://www.redhat.com/security/data/cve/CVE-2018-10322.html)
* [CVE-2018-10878](https://www.redhat.com/security/data/cve/CVE-2018-10878.html)
* [CVE-2018-10879](https://www.redhat.com/security/data/cve/CVE-2018-10879.html)
* [CVE-2018-10881](https://www.redhat.com/security/data/cve/CVE-2018-10881.html)
* [CVE-2018-10883](https://www.redhat.com/security/data/cve/CVE-2018-10883.html)
* [CVE-2018-10902](https://www.redhat.com/security/data/cve/CVE-2018-10902.html)
* [CVE-2018-10940](https://www.redhat.com/security/data/cve/CVE-2018-10940.html)
* [CVE-2018-13405](https://www.redhat.com/security/data/cve/CVE-2018-13405.html)
* [CVE-2018-18690](https://www.redhat.com/security/data/cve/CVE-2018-18690.html)
* [CVE-2018-1000026](https://www.redhat.com/security/data/cve/CVE-2018-1000026.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>
* <https://access.redhat.com/articles/3553061>
* <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/7.6_Release_Notes/index.html>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux for Real Time 7

| SRPM | |
| --- | --- |
| kernel-rt-3.10.0-957.rt56.910.el7.src.rpm | SHA-256: 2b9e428c43753e7a69b5cd233531ecf0e595ecb7bf4fb32fb85bef9fb3503dd8 |
| x86\_64 | |
| kernel-rt-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 1baf9b6169e1d114afb340832f3b6e80f908b7ebaa2d9b6224a2a7f93aa2855f |
| kernel-rt-debug-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 32160156cba503c4b9a65dd0a9c800c98cba87c8cbe08baf280990ea4171ddfb |
| kernel-rt-debug-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: b8a23d8189cdcd699492c91ba6825c0477b66522972c7cbafc5df1601e15aabf |
| kernel-rt-debug-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: c1a625f6934ece419f1d2a8d0ba6ed559e9090f372eb9f6bfcbfc648ea8f2a99 |
| kernel-rt-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 8830663d4fa4f6cf4e831070a4f0947587a9ae2797c22502692804052cbb790d |
| kernel-rt-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 1962a13654c324fb3c1d30eb381094e10c268caeecd387727f7d66dbf145389b |
| kernel-rt-doc-3.10.0-957.rt56.910.el7.noarch.rpm | SHA-256: ce30426ba1972344df03564a7166625f5a5e2c620ce5a7392439f9499eb94ad4 |
| kernel-rt-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: f788db6f8f62db2127d8d2dc719ac75f70b90cc26663829df21e29f5f11585d5 |
| kernel-rt-trace-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 59c3389b3849658143afa2d5abc6e1457ce9ee86e7273860fd1002ea41cd09e2 |
| kernel-rt-trace-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: cafe30cc7c38984ce55441c4cc8b5f88abe224a247006d55fc4c4a086ea807e5 |
| kernel-rt-trace-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: abad328220f2917b1fd5e966771e91c44c16e1beb134d39e8b91254702d40042 |
| kernel-rt-trace-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 60fb49a798f8efd5e6568af0f271b6f20059c704d541563b220ad7a362583638 |

## Red Hat Enterprise Linux for Real Time for NFV 7

| SRPM | |
| --- | --- |
| kernel-rt-3.10.0-957.rt56.910.el7.src.rpm | SHA-256: 2b9e428c43753e7a69b5cd233531ecf0e595ecb7bf4fb32fb85bef9fb3503dd8 |
| x86\_64 | |
| kernel-rt-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 1baf9b6169e1d114afb340832f3b6e80f908b7ebaa2d9b6224a2a7f93aa2855f |
| kernel-rt-debug-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 32160156cba503c4b9a65dd0a9c800c98cba87c8cbe08baf280990ea4171ddfb |
| kernel-rt-debug-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: dd7d862228c8d434cfcbabb73a51a61f962baa07e4a335365d829827a57be0eb |
| kernel-rt-debug-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: b8a23d8189cdcd699492c91ba6825c0477b66522972c7cbafc5df1601e15aabf |
| kernel-rt-debug-kvm-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 1e23d5f85236baf3b23694261df81f137e79b578ba00ef9c952becba6eb2db69 |
| kernel-rt-debug-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: c1a625f6934ece419f1d2a8d0ba6ed559e9090f372eb9f6bfcbfc648ea8f2a99 |
| kernel-rt-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 8830663d4fa4f6cf4e831070a4f0947587a9ae2797c22502692804052cbb790d |
| kernel-rt-debuginfo-common-x86\_64-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 14676ffd7854b972f1ab79a7b7bec266def598044117109e2f51474be04b2bcc |
| kernel-rt-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 1962a13654c324fb3c1d30eb381094e10c268caeecd387727f7d66dbf145389b |
| kernel-rt-doc-3.10.0-957.rt56.910.el7.noarch.rpm | SHA-256: ce30426ba1972344df03564a7166625f5a5e2c620ce5a7392439f9499eb94ad4 |
| kernel-rt-kvm-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 581c410cd12ba431a86c81c38a70fc32e8d9561e35fe47222b912511e6b05de4 |
| kernel-rt-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: f788db6f8f62db2127d8d2dc719ac75f70b90cc26663829df21e29f5f11585d5 |
| kernel-rt-trace-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 59c3389b3849658143afa2d5abc6e1457ce9ee86e7273860fd1002ea41cd09e2 |
| kernel-rt-trace-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: cafe30cc7c38984ce55441c4cc8b5f88abe224a247006d55fc4c4a086ea807e5 |
| kernel-rt-trace-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: abad328220f2917b1fd5e966771e91c44c16e1beb134d39e8b91254702d40042 |
| kernel-rt-trace-kvm-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 8f57e65d4f6623c5f7fdade938773ea42b6670ddd519a2bce4f64ca6ee7c3781 |
| kernel-rt-trace-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 60fb49a798f8efd5e6568af0f271b6f20059c704d541563b220ad7a362583638 |

## Red Hat Enterprise Linux for Real Time for x86\_64 - Extended Life Cycle Support 7

| SRPM | |
| --- | --- |
| kernel-rt-3.10.0-957.rt56.910.el7.src.rpm | SHA-256: 2b9e428c43753e7a69b5cd233531ecf0e595ecb7bf4fb32fb85bef9fb3503dd8 |
| x86\_64 | |
| kernel-rt-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 1baf9b6169e1d114afb340832f3b6e80f908b7ebaa2d9b6224a2a7f93aa2855f |
| kernel-rt-debug-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 32160156cba503c4b9a65dd0a9c800c98cba87c8cbe08baf280990ea4171ddfb |
| kernel-rt-debug-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: b8a23d8189cdcd699492c91ba6825c0477b66522972c7cbafc5df1601e15aabf |
| kernel-rt-debug-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: c1a625f6934ece419f1d2a8d0ba6ed559e9090f372eb9f6bfcbfc648ea8f2a99 |
| kernel-rt-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 8830663d4fa4f6cf4e831070a4f0947587a9ae2797c22502692804052cbb790d |
| kernel-rt-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 1962a13654c324fb3c1d30eb381094e10c268caeecd387727f7d66dbf145389b |
| kernel-rt-doc-3.10.0-957.rt56.910.el7.noarch.rpm | SHA-256: ce30426ba1972344df03564a7166625f5a5e2c620ce5a7392439f9499eb94ad4 |
| kernel-rt-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: f788db6f8f62db2127d8d2dc719ac75f70b90cc26663829df21e29f5f11585d5 |
| kernel-rt-trace-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 59c3389b3849658143afa2d5abc6e1457ce9ee86e7273860fd1002ea41cd09e2 |
| kernel-rt-trace-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: cafe30cc7c38984ce55441c4cc8b5f88abe224a247006d55fc4c4a086ea807e5 |
| kernel-rt-trace-devel-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: abad328220f2917b1fd5e966771e91c44c16e1beb134d39e8b91254702d40042 |
| kernel-rt-trace-kvm-debuginfo-3.10.0-957.rt56.910.el7.x86\_64.rpm | SHA-256: 60fb49a798f8efd5e6568af0f271b6f20059c704d541563b220ad7a362583638 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.debian.org_336c76e4_20250125_175605.html ===


---

[[Date Prev](msg00114.html)][[Date Next](msg00116.html)]
[[Thread Prev](msg00114.html)][[Thread Next](msg00116.html)]
[[Date Index](maillist.html#00115)]
[[Thread Index](threads.html#00115)]

# [SECURITY] [DSA 4187-1] linux security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 4187-1] linux security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Tue, 01 May 2018 17:12:02 +0000
* *Message-id*: <[[🔎]](/msgid-search/E1fDYos-0003QT-4F%40seger.debian.org) [E1fDYos-0003QT-4F@seger.debian.org](msg00115.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-4187-1                   security@debian.org
<https://www.debian.org/security/>                            Ben Hutchings
May 01, 2018                          <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : linux
CVE ID         : CVE-2015-9016 CVE-2017-0861 CVE-2017-5715 CVE-2017-5753
                 CVE-2017-13166 CVE-2017-13220 CVE-2017-16526 CVE-2017-16911
                 CVE-2017-16912 CVE-2017-16913 CVE-2017-16914 CVE-2017-18017
                 CVE-2017-18203 CVE-2017-18216 CVE-2017-18232 CVE-2017-18241
                 CVE-2018-1066 CVE-2018-1068 CVE-2018-1092 CVE-2018-5332
                 CVE-2018-5333 CVE-2018-5750 CVE-2018-5803 CVE-2018-6927
                 CVE-2018-7492 CVE-2018-7566 CVE-2018-7740 CVE-2018-7757
                 CVE-2018-7995 CVE-2018-8781 CVE-2018-8822 CVE-2018-1000004
                 CVE-2018-1000199

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2015-9016

    Ming Lei reported a race condition in the multiqueue block layer
    (blk-mq).  On a system with a driver using blk-mq (mtip32xx,
    null_blk, or virtio_blk), a local user might be able to use this
    for denial of service or possibly for privilege escalation.

CVE-2017-0861

    Robb Glasser reported a potential use-after-free in the ALSA (sound)
    PCM core.  We believe this was not possible in practice.

CVE-2017-5715

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 2 (branch
    target injection) and is mitigated for the x86 architecture (amd64
    and i386) by using the "retpoline" compiler feature which allows
    indirect branches to be isolated from speculative execution.

CVE-2017-5753

    Multiple researchers have discovered a vulnerability in various
    processors supporting speculative execution, enabling an attacker
    controlling an unprivileged process to read memory from arbitrary
    addresses, including from the kernel and all other processes
    running on the system.

    This specific attack has been named Spectre variant 1
    (bounds-check bypass) and is mitigated by identifying vulnerable
    code sections (array bounds checking followed by array access) and
    replacing the array access with the speculation-safe
    array_index_nospec() function.

    More use sites will be added over time.

CVE-2017-13166

    A bug in the 32-bit compatibility layer of the v4l2 ioctl handling
    code has been found. Memory protections ensuring user-provided
    buffers always point to userland memory were disabled, allowing
    destination addresses to be in kernel space. On a 64-bit kernel a
    local user with access to a suitable video device can exploit this
    to overwrite kernel memory, leading to privilege escalation.

CVE-2017-13220

    Al Viro reported that the Bluetooth HIDP implementation could
    dereference a pointer before performing the necessary type check.
    A local user could use this to cause a denial of service.

CVE-2017-16526

    Andrey Konovalov reported that the UWB subsystem may dereference
    an invalid pointer in an error case.  A local user might be able
    to use this for denial of service.

CVE-2017-16911

    Secunia Research reported that the USB/IP vhci_hcd driver exposed
    kernel heap addresses to local users.  This information could aid the
    exploitation of other vulnerabilities.

CVE-2017-16912

    Secunia Research reported that the USB/IP stub driver failed to
    perform a range check on a received packet header field, leading
    to an out-of-bounds read.  A remote user able to connect to the
    USB/IP server could use this for denial of service.

CVE-2017-16913

    Secunia Research reported that the USB/IP stub driver failed to
    perform a range check on a received packet header field, leading
    to excessive memory allocation.  A remote user able to connect to
    the USB/IP server could use this for denial of service.

CVE-2017-16914

    Secunia Research reported that the USB/IP stub driver failed to
    check for an invalid combination of fields in a received packet,
    leading to a null pointer dereference.  A remote user able to
    connect to the USB/IP server could use this for denial of service.

CVE-2017-18017

    Denys Fedoryshchenko reported that the netfilter xt_TCPMSS module
    failed to validate TCP header lengths, potentially leading to a
    use-after-free.  If this module is loaded, it could be used by a
    remote attacker for denial of service or possibly for code
    execution.

CVE-2017-18203

    Hou Tao reported that there was a race condition in creation and
    deletion of device-mapper (DM) devices.  A local user could
    potentially use this for denial of service.

CVE-2017-18216

    Alex Chen reported that the OCFS2 filesystem failed to hold a
    necessary lock during nodemanager sysfs file operations,
    potentially leading to a null pointer dereference.  A local user
    could use this for denial of service.

CVE-2017-18232

    Jason Yan reported a race condition in the SAS (Serial-Attached
    SCSI) subsystem, between probing and destroying a port.  This
    could lead to a deadlock.  A physically present attacker could
    use this to cause a denial of service.

CVE-2017-18241

    Yunlei He reported that the f2fs implementation does not properly
    initialise its state if the "noflush_merge" mount option is used.
    A local user with access to a filesystem mounted with this option
    could use this to cause a denial of service.

CVE-2018-1066

    Dan Aloni reported to Red Hat that the CIFS client implementation
    would dereference a null pointer if the server sent an invalid
    response during NTLMSSP setup negotiation.  This could be used
    by a malicious server for denial of service.

CVE-2018-1068

    The syzkaller tool found that the 32-bit compatibility layer of
    ebtables did not sufficiently validate offset values. On a 64-bit
    kernel, a local user with the CAP_NET_ADMIN capability (in any user
    namespace) could use this to overwrite kernel memory, possibly
    leading to privilege escalation. Debian disables unprivileged user
    namespaces by default.

CVE-2018-1092

    Wen Xu reported that a crafted ext4 filesystem image would
    trigger a null dereference when mounted.  A local user able
    to mount arbitrary filesystems could use this for denial of
    service.

CVE-2018-5332

    Mohamed Ghannam reported that the RDS protocol did not
    sufficiently validate RDMA requests, leading to an out-of-bounds
    write.  A local attacker on a system with the rds module loaded
    could use this for denial of service or possibly for privilege
    escalation.

CVE-2018-5333

    Mohamed Ghannam reported that the RDS protocol did not properly
    handle an error case, leading to a null pointer dereference.  A
    local attacker on a system with the rds module loaded could
    possibly use this for denial of service.

CVE-2018-5750

    Wang Qize reported that the ACPI sbshc driver logged a kernel heap
    address.  This information could aid the exploitation of other
    vulnerabilities.

CVE-2018-5803

    Alexey Kodanev reported that the SCTP protocol did not range-check
    the length of chunks to be created.  A local or remote user could
    use this to cause a denial of service.

CVE-2018-6927

    Li Jinyue reported that the FUTEX_REQUEUE operation on futexes did
    not check for negative parameter values, which might lead to a
    denial of service or other security impact.

CVE-2018-7492

    The syzkaller tool found that the RDS protocol was lacking a null
    pointer check.  A local attacker on a system with the rds module
    loaded could use this for denial of service.

CVE-2018-7566

    Fan LongFei reported a race condition in the ALSA (sound)
    sequencer core, between write and ioctl operations.  This could
    lead to an out-of-bounds access or use-after-free.  A local user
    with access to a sequencer device could use this for denial of
    service or possibly for privilege escalation.

CVE-2018-7740

    Nic Losby reported that the hugetlbfs filesystem's mmap operation
    did not properly range-check the file offset.  A local user with
    access to files on a hugetlbfs filesystem could use this to cause
    a denial of service.

CVE-2018-7757

    Jason Yan reported a memory leak in the SAS (Serial-Attached
    SCSI) subsystem.  A local user on a system with SAS devices
    could use this to cause a denial of service.

CVE-2018-7995

    Seunghun Han reported a race condition in the x86 MCE
    (Machine Check Exception) driver.  This is unlikely to have
    any security impact.

CVE-2018-8781

    Eyal Itkin reported that the udl (DisplayLink) driver's mmap
    operation did not properly range-check the file offset.  A local
    user with access to a udl framebuffer device could exploit this to
    overwrite kernel memory, leading to privilege escalation.

CVE-2018-8822

    Dr Silvio Cesare of InfoSect reported that the ncpfs client
    implementation did not validate reply lengths from the server.  An
    ncpfs server could use this to cause a denial of service or
    remote code execution in the client.

CVE-2018-1000004

    Luo Quan reported a race condition in the ALSA (sound) sequencer
    core, between multiple ioctl operations.  This could lead to a
    deadlock or use-after-free.  A local user with access to a
    sequencer device could use this for denial of service or possibly
    for privilege escalation.

CVE-2018-1000199

    Andy Lutomirski discovered that the ptrace subsystem did not
    sufficiently validate hardware breakpoint settings.  Local users
    can use this to cause a denial of service, or possibly for
    privilege escalation, on x86 (amd64 and i386) and possibly other
    architectures.

For the oldstable distribution (jessie), these problems have been fixed
in version 3.16.56-1.

We recommend that you upgrade your linux packages.

For the detailed security status of linux please refer to its security
tracker page at:
<https://security-tracker.debian.org/tracker/linux>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQKTBAEBCgB9FiEERkRAmAjBceBVMd3uBUy48xNDz0QFAlron61fFIAAAAAALgAo
aXNzdWVyLWZwckBub3RhdGlvbnMub3BlbnBncC5maWZ0aGhvcnNlbWFuLm5ldDQ2
NDQ0MDk4MDhDMTcxRTA1NTMxRERFRTA1NENCOEYzMTM0M0NGNDQACgkQBUy48xND
z0Rtqw//Xf/L4bP65wU9M59Ef6xBt+Eph+yxeMsioGhu80ODdMemlmHzASMtfZjY
AXxyt9l8lbHn8MmwDA4aLhhwHYXwvKATdpHSy1SILrRfb4s9P9uV1vsHaIeZ649E
hDyNon9hP2tPso6BwqiYHZZy9Xxtd+T8vTBeBZwUKOLBkBRvV/gyNSUdJWp6L8WH
aF4D1hHl9ZotDkyIvkubbx77aqbJ88I4R0n69x7L9udFbuXa+U7hV6dJdnpzyl/7
OukJfEtnkaUgWu0MdOfFss6iH5OQISn/y/ricRi29oKQiEp3YwnT5J9pFwSQeJJS
H8ABVt251UoS0J+of3QWw0muOT/6UAF8SNpPKMJXC7Euq8pTmYVPSIeUYf4eqn65
UHZSCKXaszItq+uzVNYdkj504BJ4cG1lFxZtlrFWwKE8p7QOETN0GKvTRdu/SvDd
Hl2nb4HouLpBYS518Th2/MGgzhXXAuO12MH3smenptZbqxKn9Z0XSTJYzFupgJk/
kKF2xkDFBE4toTLVE+6XdUKwYk4vkeDZyOGOwRYThSkKAzrUh5zThgal4HnknD2A
5ye4XLhjgSIT47/nmor6lhxd7WGXGkV33GF0azYlHr/sclfzxcU2Ev3NUBWQ8M3s
CxfIO0FNCzO0WIUf40md7MlIAnDBIRGyYgNIIe7AnSRKKPykEx8=
=wNQS
-----END PGP SIGNATURE-----

```

---



=== Content from usn.ubuntu.com_b76b6523_20250125_175556.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3654-1: Linux kernel vulnerabilities

22 May 2018

Several security issues were addressed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments

## Details

Jann Horn and Ken Johnson discovered that microprocessors utilizing

speculative execution of a memory read may allow unauthorized memory

reads via a sidechannel attack. This flaw is known as Spectre

Variant 4. A local attacker could use this to expose sensitive

information, including kernel memory. ([CVE-2018-3639](/security/CVE-2018-3639))

Tuba Yavuz discovered that a double-free error existed in the USBTV007

driver of the Linux kernel. A local attacker could use this to cause a

denial of service (system crash) or possibly execute arbitrary code.

([CVE-2017-17975](/security/CVE-2017-17975))

It was discovered that a race condition existed in the F2FS implementation

in the Linux kernel. A local attacker could use this to cause a denial of

service (system crash). ([CVE-2017-18193](/security/CVE-2017-18193))

It was discovered that a buffer overflow existed in the Hisilicon HNS

Ethernet Device driver in the Linux kernel. A local attacker could use this

to cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-18222](/security/CVE-2017-18222))

It was discovered that the netfilter subsystem in the Linux kernel did not

validate that rules containing jumps contained user-defined chains. A local

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-1065](/security/CVE-2018-1065))

It was discovered that the netfilter subsystem of the Linux kernel did not

properly validate ebtables offsets. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-1068](/security/CVE-2018-1068))

It was discovered that a null pointer dereference vulnerability existed in

the DCCP protocol implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash). ([CVE-2018-1130](/security/CVE-2018-1130))

It was discovered that the SCTP Protocol implementation in the Linux kernel

did not properly validate userspace provided payload lengths in some

situations. A local attacker could use this to cause a denial of service

(system crash). ([CVE-2018-5803](/security/CVE-2018-5803))

It was discovered that a double free error existed in the block layer

subsystem of the Linux kernel when setting up a request queue. A local

attacker could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2018-7480](/security/CVE-2018-7480))

It was discovered that a memory leak existed in the SAS driver subsystem of

the Linux kernel. A local attacker could use this to cause a denial of

service (memory exhaustion). ([CVE-2018-7757](/security/CVE-2018-7757))

It was discovered that a race condition existed in the x86 machine check

handler in the Linux kernel. A local privileged attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-7995](/security/CVE-2018-7995))

Eyal Itkin discovered that the USB displaylink video adapter driver in the

Linux kernel did not properly validate mmap offsets sent from userspace. A

local attacker could use this to expose sensitive information (kernel

memory) or possibly execute arbitrary code. ([CVE-2018-8781](/security/CVE-2018-8781))

Silvio Cesare discovered a buffer overwrite existed in the NCPFS

implementation in the Linux kernel. A remote attacker controlling a

malicious NCPFS server could use this to cause a denial of service (system

crash) or possibly execute arbitrary code. ([CVE-2018-8822](/security/CVE-2018-8822))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [linux-image-4.4.0-1026-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.4.0-1026.31](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.4.0-1026.31)
* [linux-image-4.4.0-1060-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.4.0-1060.69](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.4.0-1060.69)
* [linux-image-4.4.0-127-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-127.153](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-127.153)
* [linux-image-4.4.0-127-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-127.153](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-127.153)
* [linux-image-4.4.0-127-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-127.153](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-127.153)
* [linux-image-4.4.0-127-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-127.153](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-127.153)
* [linux-image-4.4.0-127-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-127.153](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-127.153)
* [linux-image-4.4.0-127-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-127.153](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-127.153)
* [linux-image-4.4.0-127-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.4.0-127.153](https://launchpad.net/ubuntu/%2Bsource/linux/4.4.0-127.153)

Please note that fully mitigating CVE-2018-3639 (Spectre Variant 4)

may require corresponding processor microcode/firmware updates or,

in virtual environments, hypervisor updates. On i386 and amd64

architectures, the SSBD feature is required to enable the kernel

mitigations. BIOS vendors will be making updates available for Intel

processors that implement SSBD and Ubuntu is working with Intel to

provide future microcode updates. Ubuntu users with a processor from

a different vendor should contact the vendor to identify necessary

firmware updates. Ubuntu provided corresponding QEMU updates for users

of self-hosted virtual environments in USN 3651-1. Ubuntu users in

cloud environments should contact the cloud provider to confirm that

the hypervisor has been updated to expose the new CPU features to

virtual machines.

## References

* [CVE-2017-17975](/security/CVE-2017-17975)
* [CVE-2017-18193](/security/CVE-2017-18193)
* [CVE-2017-18222](/security/CVE-2017-18222)
* [CVE-2018-1065](/security/CVE-2018-1065)
* [CVE-2018-1068](/security/CVE-2018-1068)
* [CVE-2018-1130](/security/CVE-2018-1130)
* [CVE-2018-3639](/security/CVE-2018-3639)
* [CVE-2018-5803](/security/CVE-2018-5803)
* [CVE-2018-7480](/security/CVE-2018-7480)
* [CVE-2018-7757](/security/CVE-2018-7757)
* [CVE-2018-7995](/security/CVE-2018-7995)
* [CVE-2018-8781](/security/CVE-2018-8781)
* [CVE-2018-8822](/security/CVE-2018-8822)
* <https://wiki.ubuntu.com/SecurityTeam/KnowledgeBase/Variant4>

## Related notices

* [USN-3653-1](/security/notices/USN-3653-1)
* [USN-3657-1](/security/notices/USN-3657-1)
* [USN-3654-2](/security/notices/USN-3654-2)
* [USN-3656-1](/security/notices/USN-3656-1)
* [USN-3653-2](/security/notices/USN-3653-2)
* [USN-3674-2](/security/notices/USN-3674-2)
* [USN-3674-1](/security/notices/USN-3674-1)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3698-2](/security/notices/USN-3698-2)
* [USN-3697-1](/security/notices/USN-3697-1)
* [USN-3698-1](/security/notices/USN-3698-1)
* [USN-3697-2](/security/notices/USN-3697-2)
* [USN-3655-1](/security/notices/USN-3655-1)
* [USN-3651-1](/security/notices/USN-3651-1)
* [USN-3652-1](/security/notices/USN-3652-1)
* [USN-3756-1](/security/notices/USN-3756-1)
* [USN-3680-1](/security/notices/USN-3680-1)
* [USN-3777-3](/security/notices/USN-3777-3)
* [USN-3679-1](/security/notices/USN-3679-1)
* [USN-3655-2](/security/notices/USN-3655-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.redhat.com_10e6b539_20250126_104647.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)


