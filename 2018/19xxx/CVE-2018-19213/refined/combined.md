=== Content from bugzilla.nasm.us_371c5034_20250125_065744.html ===


Bugzilla – Bug 3392524
There are seious memory leaks in nasm2.14rc16.
Last modified: 2023-04-24 00:10:36 PDT

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Help](docs/en/html/using/understanding.html)
* |
  [Log In](show_bug.cgi?id=3392524&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=3392524&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

Self-registration is disabled due to spam issue (mail gorcunov@gmail.com or hpa@zytor.com to create an account)

[**Bug 3392524**](show_bug.cgi?id=3392524)
- There are seious memory leaks in nasm2.14rc16.

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
There are seious memory leaks in nasm2.14rc16.

| | [Status](page.cgi?id=fields.html#bug_status): | OPEN | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | NASM | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=NASM "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Assembler ([show other bugs](buglist.cgi?component=Assembler&product=NASM&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 2.14.xx | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All All | |  | | | [Importance](page.cgi?id=fields.html#importance): | Medium normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | nobody | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2018-10-29 04:15 PDT by ganshuitao | | --- | --- | | Modified: | 2023-04-24 00:10 PDT ([History](show_activity.cgi?id=3392524)) | | CC List: | 5 users (show)  Archana.Polampalli ganshuitao gorcunov hpa nasm-bugs | |  | | | [Obtained from:](page.cgi?id=fields.html#cf_build "Please indicate where you obtained and/or built your version of NASM.") | Build from source archive using configure | | [Generated by:](page.cgi?id=fields.html#cf_robot "Was this bug report generated by an automatic tool, such as a memory leak detector or fuzzer, *without* including a human validation description or analysis of the problem?") | --- | | [Bug category:](page.cgi?id=fields.html#cf_category "The general category of this bug oor request.") |  | | [Breaks existing code:](page.cgi?id=fields.html#cf_breaks "This bug report breaks existing code in production or under development.") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**Trigger by"./nasm\_asan -f bin POC3 -o xxx"**](attachment.cgi?id=411686 "View the content of the attachment") (593 bytes, application/vnd.rar)  [2018-10-29 04:18 PDT](#attach_411686 "Go to the comment associated with the attachment"), ganshuitao | [Details](attachment.cgi?id=411686&action=edit) | | [Add an attachment](attachment.cgi?bugid=3392524&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=3392524&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=3392524#c0)  ganshuitao    2018-10-29 04:15:06 PDT  ``` version:nasm2.14rc16 Summary:   There are seious memory leaks in nasm2.14rc16.   Description:  The asan debug is as follows:  $./nasm -f bin POC3 -o xxx ... poc3:51: error: parser: instruction expected poc3:40: ... from macro `proc' defined here poc3:52: error: (arg:2) expression syntax error poc3:45: ... from macro `arg' defined here poc3:70: error: `%%to1': not in a macro call  ================================================================= ==65340==ERROR: LeakSanitizer: detected memory leaks  Direct leak of 512 byte(s) in 7 object(s) allocated from:     #0 0x7ff7b336c9aa in malloc (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x989aa)     #1 0x40e478 in nasm_malloc nasmlib/malloc.c:59     #2 0x4bd707  (/home/company/real_sanitize/poc_check/nasm/nasm_new_addr+0x4bd707)  Direct leak of 182 byte(s) in 30 object(s) allocated from:     #0 0x7ff7b336c9aa in malloc (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x989aa)     #1 0x40e478 in nasm_malloc nasmlib/malloc.c:59  Indirect leak of 144 byte(s) in 6 object(s) allocated from:     #0 0x7ff7b336c9aa in malloc (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x989aa)     #1 0x40e478 in nasm_malloc nasmlib/malloc.c:59  Indirect leak of 128 byte(s) in 4 object(s) allocated from:     #0 0x7ff7b336c9aa in malloc (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x989aa)     #1 0x40e478 in nasm_malloc nasmlib/malloc.c:59     #2 0x4bd707  (/home/company/real_sanitize/poc_check/nasm/nasm_new_addr+0x4bd707)  SUMMARY: AddressSanitizer: 966 byte(s) leaked in 47 allocation(s). ```  [Comment 1](show_bug.cgi?id=3392524#c1)  ganshuitao    2018-10-29 04:18:05 PDT  ``` Created [attachment 411686](attachment.cgi?id=411686 "Trigger by\"./nasm_asan -f bin POC3 -o xxx\"") [[details]](attachment.cgi?id=411686&action=edit "Trigger by\"./nasm_asan -f bin POC3 -o xxx\"") Trigger by"./nasm_asan -f bin POC3 -o xxx" ```  [Comment 2](show_bug.cgi?id=3392524#c2)  Cyrill Gorcunov    2018-10-29 12:29:16 PDT  ``` Thanks for report. Indeed there are a number of places where we have memory leaks. They should be fixed of course but same time not a blocker. Thus will be addressed once time permit. ```  [Comment 3](show_bug.cgi?id=3392524#c3)  Polampalli, Archana    2023-04-24 00:10:36 PDT  ``` Hi,  Could you please confirm is this fixed in nasm-v2.16.01  Thanks in advance. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=3392524)
* - [XML](show_bug.cgi?ctype=xml&id=3392524)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=3392524)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Help](docs/en/html/using/understanding.html)
  + |
    [Log In](show_bug.cgi?id=3392524&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=3392524&GoAheadAndLogIn=1#forgot)
    Login:

    [x]


