=== Content from aws-amplify.github.io_45f72041_20250126_002728.html ===


JavaScript is disabled on your browser.

[Skip navigation links](#skip.navbar.top "Skip navigation links")

* [Overview](../../../overview-summary.html)
* [Package](package-summary.html)
* Class
* [Index](../../../index-all.html)
* [Help](../../../help-doc.html)

* [Prev Class](../../../com/amazonaws/auth/ClasspathPropertiesFileCredentialsProvider.html "class in com.amazonaws.auth")
* [Next Class](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")

* [Frames](../../../index.html?com/amazonaws/auth/CognitoCachingCredentialsProvider.html)
* [No Frames](CognitoCachingCredentialsProvider.html)

* [All Classes](../../../allclasses-noframe.html)

* Summary:
* Nested |
* [Field](#fields.inherited.from.class.com.amazonaws.auth.CognitoCredentialsProvider) |
* [Constr](#constructor.summary) |
* [Method](#method.summary)

* Detail:
* Field |
* [Constr](#constructor.detail) |
* [Method](#method.detail)

com.amazonaws.auth
## Class CognitoCachingCredentialsProvider

* java.lang.Object
* + [com.amazonaws.auth.CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")
  + - com.amazonaws.auth.CognitoCachingCredentialsProvider

* All Implemented Interfaces:
  [AWSCredentialsProvider](../../../com/amazonaws/auth/AWSCredentialsProvider.html "interface in com.amazonaws.auth")

  ---

  ```
  public class CognitoCachingCredentialsProvider
  extends [CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")
  ```
  This credentials provider is intended for Android applications. It offers the
  ability to persist the Cognito identity id in `SharedPreferences`.
  Furthermore, it caches session credentials so as to reduce the number of
  network requests. This is the provider to use with a custom identity
  provider, which should be an extension of AWSAbstractCognitoIdentityProvider.
  This will consume an identity provider, as well. If one is passed in to a
  constructor, then that one is the one that is consumed, but if not/a
  constructor that doesn't take an identity provider is used, then the Cognito
  identity provider is used by default.

  Note: if you haven't yet associated your IAM roles with your identity pool,
  please do so via the Cognito console before using this constructor. You will
  get an InvalidIdentityPoolConfigurationException if you use it and have not.

  ```

   // initiate a credentials provider
   CognitoCachingCredentialsProvider provider = new CognitoCachingCredentialsProvider(
           context,
           "identityPoolId",
           Regions.US_EAST_1);

   // use the provider to instantiate an AWS client
   AmazonSNS snsClient = new AmazonSNSClient(provider);

   // If the user is authenticated through login with Amazon, you can set the map
   // of token to the provider
   Map<String, String> logins = new HashMap<String, String>();
   logins.put(""www.amazon.com", "login with Amazon token");
   provider.setLogins(logins);

   // Note: Please reuse the provider when possible.

   //The existing constructor will work without doing so, but will not use the enhanced flow:
   CognitoCachingCredentialsProvider provider = new CognitoCachingCredentialsProvider(
           context,
           "awsAccountId",
           "identityPoolId",
           "unauthRoleArn",
           "authRoleArn",
           Regions.US_EAST_1);

  ```

* + ### Field Summary

    - ### Fields inherited from class com.amazonaws.auth.[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")

      `[DEFAULT_DURATION_SECONDS](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#DEFAULT_DURATION_SECONDS), [DEFAULT_THRESHOLD_SECONDS](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#DEFAULT_THRESHOLD_SECONDS)`
  + ### Constructor Summary

    Constructors
    | Constructor and Description |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-com.amazonaws.auth.AWSCognitoIdentityProvider-com.amazonaws.regions.Regions-)(android.content.Context context, [AWSCognitoIdentityProvider](../../../com/amazonaws/auth/AWSCognitoIdentityProvider.html "interface in com.amazonaws.auth") provider, [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will set up a link to the provider passed in using the enhanced authentication flow to get short-lived credentials from Amazon Cognito, which can be retrieved from [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-com.amazonaws.auth.AWSCognitoIdentityProvider-com.amazonaws.regions.Regions-com.amazonaws.ClientConfiguration-)(android.content.Context context, [AWSCognitoIdentityProvider](../../../com/amazonaws/auth/AWSCognitoIdentityProvider.html "interface in com.amazonaws.auth") provider, [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region, [ClientConfiguration](../../../com/amazonaws/ClientConfiguration.html "class in com.amazonaws") clientConfiguration)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will set up a link to the provider passed in using the enhanced authentication flow to get short-lived credentials from Amazon Cognito, which can be retrieved from [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-com.amazonaws.auth.AWSCognitoIdentityProvider-java.lang.String-java.lang.String-)(android.content.Context context, [AWSCognitoIdentityProvider](../../../com/amazonaws/auth/AWSCognitoIdentityProvider.html "interface in com.amazonaws.auth") provider, java.lang.String unauthArn, java.lang.String authArn)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will set up a link to the provider passed in using the basic authentication flow to get get short-lived credentials from STS, which can be retrieved from [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-com.amazonaws.auth.AWSCognitoIdentityProvider-java.lang.String-java.lang.String-com.amazonaws.services.securitytoken.AWSSecurityTokenService-)(android.content.Context context, [AWSCognitoIdentityProvider](../../../com/amazonaws/auth/AWSCognitoIdentityProvider.html "interface in com.amazonaws.auth") provider, java.lang.String unauthArn, java.lang.String authArn, com.amazonaws.services.securitytoken.AWSSecurityTokenService stsClient)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will set up a link to the provider passed in to use the basic authentication flow to get short-lived credentials from STS, which can be retrieved from [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-com.amazonaws.mobile.config.AWSConfiguration-)(android.content.Context context, [AWSConfiguration](../../../com/amazonaws/mobile/config/AWSConfiguration.html "class in com.amazonaws.mobile.config") awsConfiguration)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will use the specified Amazon Cognito identity pool to make a request to Cognito, using the enhanced flow, to get short lived session credentials, which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) method. |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-java.lang.String-com.amazonaws.regions.Regions-)(android.content.Context context, java.lang.String identityPoolId, [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will use the specified Amazon Cognito identity pool to make a request to Cognito, using the enhanced flow, to get short lived session credentials, which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) method. |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-java.lang.String-com.amazonaws.regions.Regions-com.amazonaws.ClientConfiguration-)(android.content.Context context, java.lang.String identityPoolId, [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region, [ClientConfiguration](../../../com/amazonaws/ClientConfiguration.html "class in com.amazonaws") clientConfiguration)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will use the specified Amazon Cognito identity pool to make a request to Cognito, using the enhanced flow, to get short lived session credentials, which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) method. |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-java.lang.String-java.lang.String-java.lang.String-java.lang.String-com.amazonaws.services.cognitoidentity.AmazonCognitoIdentityClient-com.amazonaws.services.securitytoken.AWSSecurityTokenService-)(android.content.Context context, java.lang.String accountId, java.lang.String identityPoolId, java.lang.String unauthArn, java.lang.String authArn, com.amazonaws.services.cognitoidentity.AmazonCognitoIdentityClient cibClient, com.amazonaws.services.securitytoken.AWSSecurityTokenService stsClient)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will use the specified Amazon Cognito identity pool to make a request to the AWS Security Token Service (STS) to get short-lived session credentials, which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) method. |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-java.lang.String-java.lang.String-java.lang.String-java.lang.String-com.amazonaws.regions.Regions-)(android.content.Context context, java.lang.String accountId, java.lang.String identityPoolId, java.lang.String unauthRoleArn, java.lang.String authRoleArn, [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will use the specified Amazon Cognito identity pool to make a request, using the basic authentication flow, to the AWS Security Token Service (STS) to request short-lived session credentials, which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) method. |
    | `[CognitoCachingCredentialsProvider](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#CognitoCachingCredentialsProvider-android.content.Context-java.lang.String-java.lang.String-java.lang.String-java.lang.String-com.amazonaws.regions.Regions-com.amazonaws.ClientConfiguration-)(android.content.Context context, java.lang.String accountId, java.lang.String identityPoolId, java.lang.String unauthRoleArn, java.lang.String authRoleArn, [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region, [ClientConfiguration](../../../com/amazonaws/ClientConfiguration.html "class in com.amazonaws") clientConfiguration)` Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will use the specified Amazon Cognito identity pool to make a request, using the basic authentication flow, to the AWS Security Token Service (STS) to request short-lived session credentials, which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) method. |
  + ### Method Summary

    All Methods Instance Methods Concrete Methods
    | Modifier and Type | Method and Description |
    | `void` | `[clear](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#clear--)()` Clear all in-memory and saved state for the credentials provider. |
    | `void` | `[clearCredentials](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#clearCredentials--)()` Clear credentials. |
    | `java.lang.String` | `[getCachedIdentityId](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCachedIdentityId--)()` Gets the cached identity id without making a network request. |
    | `[AWSSessionCredentials](../../../com/amazonaws/auth/AWSSessionCredentials.html "interface in com.amazonaws.auth")` | `[getCredentials](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)()` If the current session has expired/credentials are invalid, a new session is started, establishing the credentials. |
    | `java.lang.String` | `[getIdentityId](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getIdentityId--)()` Gets the Cognito identity id of the user. |
    | `void` | `[refresh](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#refresh--)()` Forces this credentials provider to refresh its credentials. |
    | `void` | `[setLogins](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#setLogins-java.util.Map-)(java.util.Map<java.lang.String,java.lang.String> logins)` Set the logins map used to authenticated with Amazon Cognito. |
    | `void` | `[setPersistenceEnabled](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#setPersistenceEnabled-boolean-)(boolean isPersistenceEnabled)` Set the flag that determines if the credentials and identityId will be stored in memory or SharedPreferences. |
    | `void` | `[setUserAgentOverride](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#setUserAgentOverride-java.lang.String-)(java.lang.String userAgentOverride)` The user agent string is sometimes combined with other strings. |

    - ### Methods inherited from class com.amazonaws.auth.[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")

      `[getCustomRoleArn](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getCustomRoleArn--), [getIdentityPoolId](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getIdentityPoolId--), [getIdentityProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getIdentityProvider--), [getLogins](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getLogins--), [getRefreshThreshold](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getRefreshThreshold--), [getSessionCredentialsExpiration](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getSessionCredentialsExpiration--), [getSessionCredentitalsExpiration](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getSessionCredentitalsExpiration--), [getSessionDuration](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getSessionDuration--), [getToken](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getToken--), [registerIdentityChangedListener](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#registerIdentityChangedListener-com.amazonaws.auth.IdentityChangedListener-), [setCustomRoleArn](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#setCustomRoleArn-java.lang.String-), [setRefreshThreshold](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#setRefreshThreshold-int-), [setSessionCredentialsExpiration](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#setSessionCredentialsExpiration-java.util.Date-), [setSessionDuration](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#setSessionDuration-int-), [unregisterIdentityChangedListener](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#unregisterIdentityChangedListener-com.amazonaws.auth.IdentityChangedListener-), [withLogins](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#withLogins-java.util.Map-), [withRefreshThreshold](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#withRefreshThreshold-int-), [withSessionDuration](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#withSessionDuration-int-)`
    - ### Methods inherited from class java.lang.Object

      `equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait`

* + ### Constructor Detail

    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               java.lang.String accountId,
                                               java.lang.String identityPoolId,
                                               java.lang.String unauthRoleArn,
                                               java.lang.String authRoleArn,
                                               [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      use the specified Amazon Cognito identity pool to make a request, using
      the basic authentication flow, to the AWS Security Token Service (STS) to
      request short-lived session credentials, which will then be returned by
      this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) method.
      Parameters:
      `context` - The Android context to be used for the caching
      `accountId` - The AWS accountId for the account with Amazon Cognito
      `identityPoolId` - The Amazon Cogntio identity pool to use
      `unauthRoleArn` - The ARN of the IAM Role that will be assumed when
      unauthenticated
      `authRoleArn` - The ARN of the IAM Role that will be assumed when
      authenticated
      `region` - The region to use when contacting Cognito Identity
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               java.lang.String accountId,
                                               java.lang.String identityPoolId,
                                               java.lang.String unauthRoleArn,
                                               java.lang.String authRoleArn,
                                               [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region,
                                               [ClientConfiguration](../../../com/amazonaws/ClientConfiguration.html "class in com.amazonaws") clientConfiguration)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      use the specified Amazon Cognito identity pool to make a request, using
      the basic authentication flow, to the AWS Security Token Service (STS) to
      request short-lived session credentials, which will then be returned by
      this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--) method.

      This version of the constructor allows you to specify a client
      configuration for the Amazon Cognito and STS clients.

      Parameters:
      `context` - The Android context to be used for the caching
      `accountId` - The AWS accountId for the account with Amazon Cognito
      `identityPoolId` - The Amazon Cognito identity pool to use
      `unauthRoleArn` - The ARN of the IAM Role that will be assumed when
      unauthenticated
      `authRoleArn` - The ARN of the IAM Role that will be assumed when
      authenticated
      `region` - The region to use when contacting Cognito Identity
      `clientConfiguration` - Configuration to apply to service clients
      created
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               java.lang.String identityPoolId,
                                               [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      use the specified Amazon Cognito identity pool to make a request to
      Cognito, using the enhanced flow, to get short lived session credentials,
      which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)
      method.

      Note: if you haven't yet associated your IAM roles with your identity
      pool, please do so via the Cognito console before using this constructor.
      You will get an InvalidIdentityPoolConfigurationException if you use it
      and have not. The existing constructor (mirroring this one but with roles
      and an account id) will work without doing so, but will not use the
      enhanced flow.

      Parameters:
      `context` - The Android context to be used for the caching
      `identityPoolId` - The Amazon Cognito identity pool to use
      `region` - The region to use when contacting Cognito Identity
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               [AWSConfiguration](../../../com/amazonaws/mobile/config/AWSConfiguration.html "class in com.amazonaws.mobile.config") awsConfiguration)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      use the specified Amazon Cognito identity pool to make a request to
      Cognito, using the enhanced flow, to get short lived session credentials,
      which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)
      method.

      Note: if you haven't yet associated your IAM roles with your identity
      pool, please do so via the Cognito console before using this constructor.
      You will get an InvalidIdentityPoolConfigurationException if you use it
      and have not. The existing constructor (mirroring this one but with roles
      and an account id) will work without doing so, but will not use the
      enhanced flow.

      Example json file:
      {
      "CredentialsProvider": {
      "CognitoIdentity": {
      "Default": {
      "PoolId": "us-east-1:example-pool-id1234",
      "Region": "us-east-1"
      }
      }
      }
      }
      Parameters:
      `context` - The Android context to be used for the caching
      `awsConfiguration` - The configuration holding you identity pool id
      and the region to use when contacting
      Cognito Identity
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               java.lang.String identityPoolId,
                                               [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region,
                                               [ClientConfiguration](../../../com/amazonaws/ClientConfiguration.html "class in com.amazonaws") clientConfiguration)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      use the specified Amazon Cognito identity pool to make a request to
      Cognito, using the enhanced flow, to get short lived session credentials,
      which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)
      method.

      This version of the constructor allows you to specify a client
      configuration for the Amazon Cognito client.

      Note: if you haven't yet associated your IAM roles with your identity
      pool, please do so via the Cognito console before using this constructor.
      You will get an InvalidIdentityPoolConfigurationException if you use it
      and have not. The existing constructor (mirroring this one but with roles
      and an account id) will work without doing so, but will not use the
      enhanced flow.

      Parameters:
      `context` - The Android context to be used for the caching
      `identityPoolId` - The Amazon Cognito identity pool to use
      `region` - The region to use when contacting Cognito Identity
      `clientConfiguration` - Configuration to apply to service clients
      created
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               java.lang.String accountId,
                                               java.lang.String identityPoolId,
                                               java.lang.String unauthArn,
                                               java.lang.String authArn,
                                               com.amazonaws.services.cognitoidentity.AmazonCognitoIdentityClient cibClient,
                                               com.amazonaws.services.securitytoken.AWSSecurityTokenService stsClient)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      use the specified Amazon Cognito identity pool to make a request to the
      AWS Security Token Service (STS) to get short-lived session credentials,
      which will then be returned by this class's [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)
      method.

      This version of the constructor allows you to specify the Amazon Cognito
      and STS client to use.

      Set the roles and stsClient to null to use the enhanced authentication
      flow, not contacting STS. Otherwise the basic flow will be used.

      Parameters:
      `context` - The Android context to be used for the caching
      `accountId` - The AWS accountId for the account with Amazon Cognito
      `identityPoolId` - The Amazon Cogntio identity pool to use
      `unauthArn` - The ARN of the IAM Role that will be assumed when
      unauthenticated
      `authArn` - The ARN of the IAM Role that will be assumed when
      authenticated
      `cibClient` - Preconfigured CognitoIdentity client to make requests
      with
      `stsClient` - Preconfigured STS client to make requests with
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               [AWSCognitoIdentityProvider](../../../com/amazonaws/auth/AWSCognitoIdentityProvider.html "interface in com.amazonaws.auth") provider,
                                               java.lang.String unauthArn,
                                               java.lang.String authArn)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      set up a link to the provider passed in using the basic authentication
      flow to get get short-lived credentials from STS, which can be retrieved
      from [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)

      This version of the constructor allows you to specify your own Identity
      Provider class.

      Parameters:
      `context` - The Android context to be used for the caching
      `provider` - a reference to the provider in question, including what's
      needed to interact with it to later connect with STS
      `unauthArn` - the unauthArn, for use with the STS call
      `authArn` - the authArn, for use with the STS call
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               [AWSCognitoIdentityProvider](../../../com/amazonaws/auth/AWSCognitoIdentityProvider.html "interface in com.amazonaws.auth") provider,
                                               java.lang.String unauthArn,
                                               java.lang.String authArn,
                                               com.amazonaws.services.securitytoken.AWSSecurityTokenService stsClient)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      set up a link to the provider passed in to use the basic authentication
      flow to get short-lived credentials from STS, which can be retrieved from
      [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)

      This version of the constructor allows you to specify your own Identity
      Provider class, and the STS client to use.

      Parameters:
      `context` - The Android context to be used for the caching
      `provider` - a reference to the provider in question, including what's
      needed to interact with it to later connect with STS
      `unauthArn` - the unauthArn, for use with the STS call
      `authArn` - the authArn, for use with the STS call
      `stsClient` - the sts endpoint to get session credentials from
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               [AWSCognitoIdentityProvider](../../../com/amazonaws/auth/AWSCognitoIdentityProvider.html "interface in com.amazonaws.auth") provider,
                                               [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      set up a link to the provider passed in using the enhanced authentication
      flow to get short-lived credentials from Amazon Cognito, which can be
      retrieved from [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)

      This version of the constructor allows you to specify your own Identity
      Provider class.

      Note: if you haven't yet associated your IAM roles with your identity
      pool, please do so via the Cognito console before using this constructor.
      You will get an InvalidIdentityPoolConfigurationException if you use it
      and have not. The existing constructor (mirroring this one but with
      roles) will work without doing so, but will not use the enhanced flow.

      Parameters:
      `context` - The Android context to be used for the caching
      `provider` - a reference to the provider in question, including what's
      needed to interact with it to later connect with Amazon
      Cognito
      `region` - The region to use when contacting Cognito
    - #### CognitoCachingCredentialsProvider

      ```
      public CognitoCachingCredentialsProvider(android.content.Context context,
                                               [AWSCognitoIdentityProvider](../../../com/amazonaws/auth/AWSCognitoIdentityProvider.html "interface in com.amazonaws.auth") provider,
                                               [Regions](../../../com/amazonaws/regions/Regions.html "enum in com.amazonaws.regions") region,
                                               [ClientConfiguration](../../../com/amazonaws/ClientConfiguration.html "class in com.amazonaws") clientConfiguration)
      ```
      Constructs a new [`CognitoCachingCredentialsProvider`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html "class in com.amazonaws.auth"), which will
      set up a link to the provider passed in using the enhanced authentication
      flow to get short-lived credentials from Amazon Cognito, which can be
      retrieved from [`getCredentials()`](../../../com/amazonaws/auth/CognitoCachingCredentialsProvider.html#getCredentials--)

      This version of the constructor allows you to specify your own Identity
      Provider class and the configuration for the Amazon Cognito client.

      Note: if you haven't yet associated your IAM roles with your identity
      pool, please do so via the Cognito console before using this constructor.
      You will get an InvalidIdentityPoolConfigurationException if you use it
      and have not. The existing constructor (mirroring this one but with
      roles) will work without doing so, but will not use the enhanced flow.

      Parameters:
      `context` - The Android context to be used for the caching
      `provider` - a reference to the provider in question, including what's
      needed to interact with it to later connect with Amazon
      Cognito
      `clientConfiguration` - Configuration to apply to service clients
      created
      `region` - The region to use when contacting Cognito Identity
  + ### Method Detail

    - #### getIdentityId

      ```
      public java.lang.String getIdentityId()
      ```
      Gets the Cognito identity id of the user. The first time when this method
      is called, a network request will be made to retrieve a new identity id.
      After that it's saved in `SharedPreferences`. Please don't call it
      in the main thread.
      Overrides:
      `[getIdentityId](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getIdentityId--)` in class `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")`
      Returns:
      identity id of the user
    - #### getCredentials

      ```
      public [AWSSessionCredentials](../../../com/amazonaws/auth/AWSSessionCredentials.html "interface in com.amazonaws.auth") getCredentials()
      ```
      Description copied from class: `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getCredentials--)`
      If the current session has expired/credentials are invalid, a new session
      is started, establishing the credentials. In either case, those
      credentials are returned
      Specified by:
      `[getCredentials](../../../com/amazonaws/auth/AWSCredentialsProvider.html#getCredentials--)` in interface `[AWSCredentialsProvider](../../../com/amazonaws/auth/AWSCredentialsProvider.html "interface in com.amazonaws.auth")`
      Overrides:
      `[getCredentials](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#getCredentials--)` in class `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")`
      Returns:
      AWSCredentials which the caller can use to authorize an AWS
      request.
    - #### refresh

      ```
      public void refresh()
      ```
      Description copied from interface: `[AWSCredentialsProvider](../../../com/amazonaws/auth/AWSCredentialsProvider.html#refresh--)`
      Forces this credentials provider to refresh its credentials. For many
      implementations of credentials provider, this method may simply be a
      no-op, such as any credentials provider implementation that vends
      static/non-changing credentials. For other implementations that vend
      different credentials through out their lifetime, this method should
      force the credentials provider to refresh its credentials.
      Specified by:
      `[refresh](../../../com/amazonaws/auth/AWSCredentialsProvider.html#refresh--)` in interface `[AWSCredentialsProvider](../../../com/amazonaws/auth/AWSCredentialsProvider.html "interface in com.amazonaws.auth")`
      Overrides:
      `[refresh](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#refresh--)` in class `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")`
    - #### setLogins

      ```
      public void setLogins(java.util.Map<java.lang.String,java.lang.String> logins)
      ```
      Description copied from class: `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#setLogins-java.util.Map-)`
      Set the logins map used to authenticated with Amazon Cognito. Note: You
      should manually call refresh on on the credentials provider after adding
      logins to the provider as your Identity Id may have changed.
      Overrides:
      `[setLogins](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#setLogins-java.util.Map-)` in class `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")`
      Parameters:
      `logins` - The new logins map (providerName, providerToken) to use to
      communicate with Amazon Cognito
    - #### clear

      ```
      public void clear()
      ```
      Description copied from class: `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#clear--)`
      Clear all in-memory and saved state for the credentials provider. Will
      destroy any saved Amazon Cognito Identity Id and associated AWS
      credentials.
      Overrides:
      `[clear](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#clear--)` in class `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")`
    - #### clearCredentials

      ```
      public void clearCredentials()
      ```
      Description copied from class: `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#clearCredentials--)`
      Clear credentials. This will destroy all the saved AWS credentials but
      not the identity Id.
      Overrides:
      `[clearCredentials](../../../com/amazonaws/auth/CognitoCredentialsProvider.html#clearCredentials--)` in class `[CognitoCredentialsProvider](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")`
    - #### getCachedIdentityId

      ```
      public java.lang.String getCachedIdentityId()
      ```
      Gets the cached identity id without making a network request.
      Returns:
      cached identity id, null if it doesn't exist
    - #### setPersistenceEnabled

      ```
      public void setPersistenceEnabled(boolean isPersistenceEnabled)
      ```
      Set the flag that determines if the credentials and identityId
      will be stored in memory or SharedPreferences.
      Parameters:
      `isPersistenceEnabled` - flag that indicates if the
      credentials need to be persisted or not
    - #### setUserAgentOverride

      ```
      public void setUserAgentOverride(java.lang.String userAgentOverride)
      ```
      The user agent string is sometimes combined with other strings. If this property is set, it instructs the
      client to only use this as the full user agent string.
      Parameters:
      `userAgentOverride` - The string to use as the full user agent when sending requests.

[Skip navigation links](#skip.navbar.bottom "Skip navigation links")

* [Overview](../../../overview-summary.html)
* [Package](package-summary.html)
* Class
* [Index](../../../index-all.html)
* [Help](../../../help-doc.html)

* [Prev Class](../../../com/amazonaws/auth/ClasspathPropertiesFileCredentialsProvider.html "class in com.amazonaws.auth")
* [Next Class](../../../com/amazonaws/auth/CognitoCredentialsProvider.html "class in com.amazonaws.auth")

* [Frames](../../../index.html?com/amazonaws/auth/CognitoCachingCredentialsProvider.html)
* [No Frames](CognitoCachingCredentialsProvider.html)

* [All Classes](../../../allclasses-noframe.html)

* Summary:
* Nested |
* [Field](#fields.inherited.from.class.com.amazonaws.auth.CognitoCredentialsProvider) |
* [Constr](#constructor.summary) |
* [Method](#method.summary)

* Detail:
* Field |
* [Constr](#constructor.detail) |
* [Method](#method.detail)

Copyright © 2018 Amazon Web Services, Inc. All Rights Reserved.


