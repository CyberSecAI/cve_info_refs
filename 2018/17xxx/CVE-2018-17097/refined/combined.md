=== Content from gitlab.com_f01603d9_20250125_041404.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# multiple asserstion failed and some other problems

I found several assersition problem in the source code, just similar to the [issue 7](https://gitlab.com/soundtouch/soundtouch/issues/7 "Multiple reachable assertions"), and more details can be found at <https://github.com/TeamSeri0us/pocs/tree/master/soundtouch/2018_09_03>.

To upload designs, you'll need to enable LFS and have an admin enable hashed storage. [More information](/help/user/project/issues/design_management.md#prerequisites)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from github.com_dfedb235_20250125_041404.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTeamSeri0us%2Fpocs%2Ftree%2Fmaster%2Fsoundtouch%2F2018_09_03)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTeamSeri0us%2Fpocs%2Ftree%2Fmaster%2Fsoundtouch%2F2018_09_03)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Ffiles%2Fdisambiguate&source=header-repo&source_repo=TeamSeri0us%2Fpocs)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[TeamSeri0us](/TeamSeri0us)
/
**[pocs](/TeamSeri0us/pocs)**
Public

* [Notifications](/login?return_to=%2FTeamSeri0us%2Fpocs) You must be signed in to change notification settings
* [Fork
  18](/login?return_to=%2FTeamSeri0us%2Fpocs)
* [Star
   42](/login?return_to=%2FTeamSeri0us%2Fpocs)

* [Code](/TeamSeri0us/pocs)
* [Issues
  2](/TeamSeri0us/pocs/issues)
* [Pull requests
  0](/TeamSeri0us/pocs/pulls)
* [Actions](/TeamSeri0us/pocs/actions)
* [Projects
  0](/TeamSeri0us/pocs/projects)
* [Security](/TeamSeri0us/pocs/security)
* [Insights](/TeamSeri0us/pocs/pulse)

Additional navigation options

* [Code](/TeamSeri0us/pocs)
* [Issues](/TeamSeri0us/pocs/issues)
* [Pull requests](/TeamSeri0us/pocs/pulls)
* [Actions](/TeamSeri0us/pocs/actions)
* [Projects](/TeamSeri0us/pocs/projects)
* [Security](/TeamSeri0us/pocs/security)
* [Insights](/TeamSeri0us/pocs/pulse)

## Files

 master
## Breadcrumbs

1. [pocs](/TeamSeri0us/pocs/tree/master)
2. /[soundtouch](/TeamSeri0us/pocs/tree/master/soundtouch)
/
# 2018\_09\_03

/Copy path
## Directory actions

## More options

## Directory actions

## More options

## Latest commit

## History

[History](/TeamSeri0us/pocs/commits/master/soundtouch/2018_09_03) master
## Breadcrumbs

1. [pocs](/TeamSeri0us/pocs/tree/master)
2. /[soundtouch](/TeamSeri0us/pocs/tree/master/soundtouch)
/
# 2018\_09\_03

/Top
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| parent directory[..](/TeamSeri0us/pocs/tree/master/soundtouch) | | |
| [POC-3](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/POC-3 "POC-3") | | [POC-3](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/POC-3 "POC-3") |  |  |
| [POC-4](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/POC-4 "POC-4") | | [POC-4](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/POC-4 "POC-4") |  |  |
| [assertion-failed-1-POC](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/assertion-failed-1-POC "assertion-failed-1-POC") | | [assertion-failed-1-POC](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/assertion-failed-1-POC "assertion-failed-1-POC") |  |  |
| [assertion-failed-2-POC](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/assertion-failed-2-POC "assertion-failed-2-POC") | | [assertion-failed-2-POC](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/assertion-failed-2-POC "assertion-failed-2-POC") |  |  |
| [readme.md](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/readme.md "readme.md") | | [readme.md](/TeamSeri0us/pocs/blob/master/soundtouch/2018_09_03/readme.md "readme.md") |  |  |
| View all files | | |

## [readme.md](#readme)

## Description

SoundTouch is an open-source audio processing library for changing the Tempo, Pitch and Playback Rates of audio streams or audio files. The library additionally supports estimating stable beats-per-minute rates for audio tracks.

## Version

[soundtouch](https://gitlab.com/soundtouch/soundtouch), 2.0.

## Others

this bug is reported by fish@360TeamSeri0us,
please send email to teamSeri0us360@gmail.com if you have some quetion.

## Details

Assertion failed in function main.cpp:232: void detectBPM(WavInFile\*, RunParameters\*): Assertion `BUFF\_SIZE % nChannels == 0'.

```
root@50a1db6f0145:/work# ./soundstretch assertion-failed-1 /dev/null  -tempo=-50 -bpm=60 -pitch=-3 -rate=+35

   SoundStretch v2.1pre -  Copyright (c) Olli Parviainen
=========================================================
author e-mail: <oparviai@iki.fi> - WWW: http://www.surina.net/soundtouch

This program is subject to (L)GPL license. Run "soundstretch -license" for
more information.

Detecting BPM rate...soundstretch: main.cpp:232: void detectBPM(WavInFile*, RunParameters*): Assertion `BUFF_SIZE % nChannels == 0' failed.
Aborted (core dumped)

--------------------------------------------------------------------------------

root@50a1db6f0145:/work# gdb -q --args ./soundstretch assertion-failed-1-POC /dev/null  -tempo=-50 -bpm=60 -pitch=-3 -rate=+35
context = 'none'
clearscr = 'off'
Reading symbols from ./soundstretch...done.

Starting program: ./soundstretch assertion-failed-1-POC /dev/null -tempo=-50 -bpm=60 -pitch=-3 -rate=+35

   SoundStretch v2.1pre -  Copyright (c) Olli Parviainen
=========================================================
author e-mail: <oparviai@iki.fi> - WWW: http://www.surina.net/soundtouch

This program is subject to (L)GPL license. Run "soundstretch -license" for
more information.

Detecting BPM rate...soundstretch: main.cpp:232: void detectBPM(WavInFile*, RunParameters*): Assertion `BUFF_SIZE % nChannels == 0' failed.

Program received signal SIGABRT, Aborted.
[------------------------------------------------------------------------------]
Legend: code, data, rodata, value
Stopped reason: SIGABRT
0x00007ffff7274428 in __GI_raise (sig=sig@entry=0x6) at ../sysdeps/unix/sysv/linux/raise.c:54
54	../sysdeps/unix/sysv/linux/raise.c: No such file or directory.
gdb-peda$ bt
#0  0x00007ffff7274428 in __GI_raise (sig=sig@entry=0x6) at ../sysdeps/unix/sysv/linux/raise.c:54
#1  0x00007ffff727602a in __GI_abort () at abort.c:89
#2  0x00007ffff726cbd7 in __assert_fail_base (fmt=<optimized out>, assertion=assertion@entry=0x419143 "BUFF_SIZE % nChannels == 0", file=file@entry=0x41913a "main.cpp", line=line@entry=0xe8, function=function@entry=0x419380 <detectBPM(WavInFile*, RunParameters*)::__PRETTY_FUNCTION__> "void detectBPM(WavInFile*, RunParameters*)") at assert.c:92
#3  0x00007ffff726cc82 in __GI___assert_fail (assertion=assertion@entry=0x419143 "BUFF_SIZE % nChannels == 0", file=file@entry=0x41913a "main.cpp", line=line@entry=0xe8, function=function@entry=0x419380 <detectBPM(WavInFile*, RunParameters*)::__PRETTY_FUNCTION__> "void detectBPM(WavInFile*, RunParameters*)") at assert.c:101
#4  0x0000000000403a81 in detectBPM (inFile=inFile@entry=0x631ee0, params=0x631ea0, params=0x631ea0) at main.cpp:232
#5  0x0000000000402c24 in main (nParams=nParams@entry=0x7, paramStr=paramStr@entry=0x7fffffffe648) at main.cpp:295
#6  0x00007ffff725f830 in __libc_start_main (main=0x402970 <main(int, char const* const*)>, argc=0x7, argv=0x7fffffffe648, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffe638) at ../csu/libc-start.c:291
#7  0x0000000000403589 in _start ()

```

2. Assertion failed in BPMDetect.cpp:190: soundtouch::BPMDetect::BPMDetect(int, int): Assertion `INPUT\_BLOCK\_SIZE < decimateBy \* DECIMATED\_BLOCK\_SIZE' failed.

```

root@50a1db6f0145:/work# gdb -q --args ./soundstretch assertion-failed-2-POC /dev/null  -tempo=-50 -bpm=60 -pitch=-3 -rate=+35
context = 'none'
clearscr = 'off'
Reading symbols from ./soundstretch...done.
gdb-peda$ r
Starting program: ./soundstretch assertion-failed-2-POC /dev/null -tempo=-50 -bpm=60 -pitch=-3 -rate=+35

   SoundStretch v2.1pre -  Copyright (c) Olli Parviainen
=========================================================
author e-mail: <oparviai@iki.fi> - WWW: http://www.surina.net/soundtouch

This program is subject to (L)GPL license. Run "soundstretch -license" for
more information.

soundstretch: BPMDetect.cpp:190: soundtouch::BPMDetect::BPMDetect(int, int): Assertion `INPUT_BLOCK_SIZE < decimateBy * DECIMATED_BLOCK_SIZE' failed.

Program received signal SIGABRT, Aborted.
[------------------------------------------------------------------------------]
Legend: code, data, rodata, value
Stopped reason: SIGABRT
0x00007ffff7274428 in __GI_raise (sig=sig@entry=0x6) at ../sysdeps/unix/sysv/linux/raise.c:54
54	../sysdeps/unix/sysv/linux/raise.c: No such file or directory.
gdb-peda$ bt
#0  0x00007ffff7274428 in __GI_raise (sig=sig@entry=0x6) at ../sysdeps/unix/sysv/linux/raise.c:54
#1  0x00007ffff727602a in __GI_abort () at abort.c:89
#2  0x00007ffff726cbd7 in __assert_fail_base (fmt=<optimized out>, assertion=assertion@entry=0x7ffff7bd15e8 "INPUT_BLOCK_SIZE < decimateBy * DECIMATED_BLOCK_SIZE", file=file@entry=0x7ffff7bd15a0 "BPMDetect.cpp", line=line@entry=0xbe, function=function@entry=0x7ffff7bd17e0 <soundtouch::BPMDetect::BPMDetect(int, int)::__PRETTY_FUNCTION__> "soundtouch::BPMDetect::BPMDetect(int, int)") at assert.c:92
#3  0x00007ffff726cc82 in __GI___assert_fail (assertion=assertion@entry=0x7ffff7bd15e8 "INPUT_BLOCK_SIZE < decimateBy * DECIMATED_BLOCK_SIZE", file=file@entry=0x7ffff7bd15a0 "BPMDetect.cpp", line=line@entry=0xbe, function=function@entry=0x7ffff7bd17e0 <soundtouch::BPMDetect::BPMDetect(int, int)::__PRETTY_FUNCTION__> "soundtouch::BPMDetect::BPMDetect(int, int)") at assert.c:101
#4  0x00007ffff7bc038b in soundtouch::BPMDetect::BPMDetect (this=0x7fffffff7aa0, numChannels=0x1, aSampleRate=0x1e80) at BPMDetect.cpp:190
#5  0x00000000004036de in detectBPM (inFile=inFile@entry=0x631ee0, params=0x631ea0, params=0x631ea0) at main.cpp:224
#6  0x0000000000402c24 in main (nParams=nParams@entry=0x7, paramStr=paramStr@entry=0x7fffffffe648) at main.cpp:295
#7  0x00007ffff725f830 in __libc_start_main (main=0x402970 <main(int, char const* const*)>, argc=0x7, argv=0x7fffffffe648, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffe638) at ../csu/libc-start.c:291
#8  0x0000000000403589 in _start ()

```

```

root@50a1db6f0145:/work# gdb -q --args ./soundstretch POC-3 /dev/null -bpm=60
context = 'none'
clearscr = 'off'
Reading symbols from soundstretch...done.
gdb-peda$ r
Starting program: soundstretch crashes-2018-08-28-22-39/soundstretch001:id:000004,sig:06,src:001039,op:havoc,rep:8 /dev/null -bpm=60

   SoundStretch v2.1pre -  Copyright (c) Olli Parviainen
=========================================================
author e-mail: <oparviai@iki.fi> - WWW: http://www.surina.net/soundtouch

This program is subject to (L)GPL license. Run "soundstretch -license" for
more information.

Detecting BPM rate...Done!
Couldn't detect BPM rate.

Uses 32bit floating point sample type in processing.

Processing the file with the following changes:
  tempo change = +0 %
  pitch change = +0 semitones
  rate change  = +0 %

Working...*** Error in `soundstretch': corrupted size vs. prev_size: 0x000000000063ba70 ***

Program received signal SIGABRT, Aborted.
[------------------------------------------------------------------------------]
Legend: code, data, rodata, value
Stopped reason: SIGABRT
0x00007ffff7274428 in __GI_raise (sig=sig@entry=0x6) at ../sysdeps/unix/sysv/linux/raise.c:54
54	../sysdeps/unix/sysv/linux/raise.c: No such file or directory.
gdb-peda$ bt
#0  0x00007ffff7274428 in __GI_raise (sig=sig@entry=0x6) at ../sysdeps/unix/sysv/linux/raise.c:54
#1  0x00007ffff727602a in __GI_abort () at abort.c:89
#2  0x00007ffff72b67ea in __libc_message (do_abort=0x2, fmt=fmt@entry=0x7ffff73cfed8 "*** Error in `%s': %s: 0x%s ***\n") at ../sysdeps/posix/libc_fatal.c:175
#3  0x00007ffff72bfd36 in malloc_printerr (ar_ptr=0x7ffff7603b20 <main_arena>, ptr=<optimized out>, str=0x7ffff73ccc75 "corrupted size vs. prev_size", action=0x3) at malloc.c:5006
#4  _int_free (av=0x7ffff7603b20 <main_arena>, p=<optimized out>, have_lock=0x0) at malloc.c:4005
#5  0x00007ffff72c353c in __GI___libc_free (mem=<optimized out>) at malloc.c:2968
#6  0x0000000000407421 in WavFileBase::~WavFileBase (this=0x631ee0, __in_chrg=<optimized out>) at WavFile.cpp:148
#7  WavInFile::~WavInFile (this=0x631ee0, __in_chrg=<optimized out>) at WavFile.cpp:234
#8  WavInFile::~WavInFile (this=0x631ee0, __in_chrg=<optimized out>) at WavFile.cpp:238
#9  0x0000000000402ebd in main (nParams=nParams@entry=0x4, paramStr=paramStr@entry=0x7fffffffe678) at main.cpp:308
#10 0x00007ffff725f830 in __libc_start_main (main=0x402970 <main(int, char const* const*)>, argc=0x4, argv=0x7fffffffe678, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffe668) at ../csu/libc-start.c:291
#11 0x0000000000403589 in _start ()

```

```
root@50a1db6f0145:/work# gdb -q --args ./soundstretch POC-4 /dev/null -tempo=-50
context = 'none'
clearscr = 'off'
Reading symbols from soundstretch...done.
gdb-peda$ r
Starting program: soundstretch POC-4 /dev/null -tempo=-50

   SoundStretch v2.1pre -  Copyright (c) Olli Parviainen
=========================================================
author e-mail: <oparviai@iki.fi> - WWW: http://www.surina.net/soundtouch

This program is subject to (L)GPL license. Run "soundstretch -license" for
more information.

Uses 32bit floating point sample type in processing.

Processing the file with the following changes:
  tempo change = -50 %
  pitch change = +0 semitones
  rate change  = +0 %

Working...*** Error in `soundstretch': double free or corruption (!prev): 0x00000000006323e0 ***

Program received signal SIGABRT, Aborted.
[------------------------------------------------------------------------------]
Legend: code, data, rodata, value
Stopped reason: SIGABRT
0x00007ffff7274428 in __GI_raise (sig=sig@entry=0x6) at ../sysdeps/unix/sysv/linux/raise.c:54
54	../sysdeps/unix/sysv/linux/raise.c: No such file or directory.
gdb-peda$ bt
#0  0x00007ffff7274428 in __GI_raise (sig=sig@entry=0x6) at ../sysdeps/unix/sysv/linux/raise.c:54
#1  0x00007ffff727602a in __GI_abort () at abort.c:89
#2  0x00007ffff72b67ea in __libc_message (do_abort=do_abort@entry=0x2, fmt=fmt@entry=0x7ffff73cfed8 "*** Error in `%s': %s: 0x%s ***\n") at ../sysdeps/posix/libc_fatal.c:175
#3  0x00007ffff72bf37a in malloc_printerr (ar_ptr=<optimized out>, ptr=<optimized out>, str=0x7ffff73d0008 "double free or corruption (!prev)", action=0x3) at malloc.c:5006
#4  _int_free (av=<optimized out>, p=<optimized out>, have_lock=0x0) at malloc.c:3867
#5  0x00007ffff72c353c in __GI___libc_free (mem=<optimized out>) at malloc.c:2968
#6  0x0000000000407741 in WavFileBase::~WavFileBase (this=0x631f50, __in_chrg=<optimized out>) at WavFile.cpp:148
#7  WavOutFile::~WavOutFile (this=0x631f50, __in_chrg=<optimized out>) at WavFile.cpp:739
#8  WavOutFile::~WavOutFile (this=0x631f50, __in_chrg=<optimized out>) at WavFile.cpp:744
#9  0x0000000000402f06 in main (nParams=nParams@entry=0x4, paramStr=paramStr@entry=0x7fffffffe6b8) at main.cpp:309
#10 0x00007ffff725f830 in __libc_start_main (main=0x402970 <main(int, char const* const*)>, argc=0x4, argv=0x7fffffffe6b8, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffe6a8) at ../csu/libc-start.c:291
#11 0x0000000000403589 in _start ()

```

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


