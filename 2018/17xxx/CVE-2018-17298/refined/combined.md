=== Content from tuleap.net_b6de3d1d_20250125_045000.html ===

[Skip to main content](#main-content-start)

[Get help](/help/)
[Documentation](/doc/en/)

[Release Note](https://www.tuleap.org/resources/release-notes/tuleap-16-3/?utm_source=tuleap&utm_medium=forge&utm_campaign=tuleap-forge-icon-help-RN-link)

[API](/api/explorer/)
[Terms](/tos/tos.php)
[Contact](/contact.php)
Shortcuts

# Keyboard shortcuts

| Description | Shortcut |
| --- | --- |

Close

[Login](/account/login.php?return_to=%2Fplugins%2Fgit%2Ftuleap%2Ftuleap%2Fstable%3Fa%3Dcommit%26h%3D4050b0aafd18346d9a6a06967bfb1170824dab17 "Login")
[New User](/account/register.php "New User")

# Public

Project privacy set to public. By default, its content is available to everyone (authenticated or not). Please note that more restrictive permissions might exist on some items.

[ðŸŒ· Tuleap](/projects/tuleap "Tuleap")

[Git repositories](/plugins/git/tuleap/ "Git repositories")

[Fork repositories](/plugins/git/?group_id=101&action=fork_repositories "Fork repositories")

[tuleap/stable](/plugins/git/tuleap/tuleap/stable "tuleap/stable")

# stable

Clone

# Clone or download

HTTPS (Default)
Read-only

SSH

[Files](/plugins/git/tuleap/tuleap/stable?a=tree&hb=4050b0aafd18346d9a6a06967bfb1170824dab17)
[Commits](/plugins/git/tuleap/tuleap/stable?a=commit&h=4050b0aafd18346d9a6a06967bfb1170824dab17)
[Pull requests
0](/plugins/git/?action=pull-requests&repo_id=58&group_id=101&tab=homepage)

## [request #12219](https://tuleap.net/goto?key=request&val=12219&group_id=101 "Artefact - Bugs"): Reset passord links are not invalidated on password change

[Download](?a=commitdiff_plain&h=4050b0aafd18346d9a6a06967bfb1170824dab17&noheader=1 "Download commit as plain text file")
[Browse](?a=tree&hb=4050b0aafd18346d9a6a06967bfb1170824dab17 "Browse repository at this commit")

Reset tokens and sessions are now invalidated when the password of an account
is changed. This limit persistence of accesses in case of a compromission.
Change-Id: Ibf94d4b1e269f2775524975de63417f34e2db2d6

+226
âˆ’17

Author
[![](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)
Thomas Gerbet (tgerbet)](/users/tgerbet)
 2018-09-03 11:24

Committer
[![](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)
Thomas Gerbet (tgerbet)](/users/tgerbet)
 2018-09-03 14:37

Hash
4050b0aafd18346d9a6a06967bfb1170824dab17

Parent
[dbf45d0266ccafec2e88815f3fc72090bba59bf3](?a=commit&h=dbf45d0266ccafec2e88815f3fc72090bba59bf3)

Reference
git #tuleap/stable/4050b0aafd18346d9a6a06967bfb1170824dab17

## Modified Files

 List

[Side by side diff](?a=commitdiff&h=4050b0aafd18346d9a6a06967bfb1170824dab17&o=side-by-side)

[Inline diff](?a=commitdiff&h=4050b0aafd18346d9a6a06967bfb1170824dab17)

|  | Name |  |  |  |
| --- | --- | --- | --- | --- |
| M | src/common/autoload.php | +4 | âˆ’2 | [Go to diff](?a=blobdiff&h=d4ca1a9ae9caef03886cdb388a31b43e667d7085&hp=f5735a64d3f3df230c16210ae9fc199f505b873b&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src%2Fcommon%2Fautoload.php)  [View file](?a=blob&h=d4ca1a9ae9caef03886cdb388a31b43e667d7085&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src/common/autoload.php) |
| M | src/common/dao/SessionDao.class.php | +10 | âˆ’1 | [Go to diff](?a=blobdiff&h=7c7e002e42901896080119d4fc94ec5553ca82c0&hp=344cf2b7178cb47cfe87d27294ee04de8132bf3b&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src%2Fcommon%2Fdao%2FSessionDao.class.php)  [View file](?a=blob&h=7c7e002e42901896080119d4fc94ec5553ca82c0&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src/common/dao/SessionDao.class.php) |
| A | src/common/user/Password/Change/PasswordChangeException.php | +25 | âˆ’0 | [Go to diff](?a=blobdiff&h=ae718cba8f1e15f17b6f961597bd3c7fbac8ac06&hp=0000000000000000000000000000000000000000&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src%2Fcommon%2Fuser%2FPassword%2FChange%2FPasswordChangeException.php)  [View file](?a=blob&h=ae718cba8f1e15f17b6f961597bd3c7fbac8ac06&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src/common/user/Password/Change/PasswordChangeException.php) |
| A | src/common/user/Password/Change/PasswordChanger.php | +65 | âˆ’0 | [Go to diff](?a=blobdiff&h=953e8c0172e6d055ac173e2c84011cc38fba022c&hp=0000000000000000000000000000000000000000&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src%2Fcommon%2Fuser%2FPassword%2FChange%2FPasswordChanger.php)  [View file](?a=blob&h=953e8c0172e6d055ac173e2c84011cc38fba022c&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src/common/user/Password/Change/PasswordChanger.php) |
| M | src/common/user/SessionManager.php | +12 | âˆ’1 | [Go to diff](?a=blobdiff&h=043b1bd4aa3456829be9410f7b4b200f3c3db2ed&hp=0be91fa0e6bc7433e8696866b2bfa5ae11bfa95a&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src%2Fcommon%2Fuser%2FSessionManager.php)  [View file](?a=blob&h=043b1bd4aa3456829be9410f7b4b200f3c3db2ed&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src/common/user/SessionManager.php) |
| M | src/www/account/change\_pw.php | +15 | âˆ’7 | [Go to diff](?a=blobdiff&h=12b9a725dcd2e15d6ae43e8e56ac7262c513bda4&hp=104d50e4b20cada43b0515be0ffaed0d66c8edd9&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src%2Fwww%2Faccount%2Fchange_pw.php)  [View file](?a=blob&h=12b9a725dcd2e15d6ae43e8e56ac7262c513bda4&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src/www/account/change_pw.php) |
| M | src/www/admin/usergroup.php | +12 | âˆ’6 | [Go to diff](?a=blobdiff&h=1f1bfb422c1cb67714df8f430193b760ad275cab&hp=e63a5fed33dfedcd6ffcd4d28fc38436f82667ce&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src%2Fwww%2Fadmin%2Fusergroup.php)  [View file](?a=blob&h=1f1bfb422c1cb67714df8f430193b760ad275cab&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=src/www/admin/usergroup.php) |
| A | tests/phpunit/common/User/Change/PasswordChangerTest.php | +83 | âˆ’0 | [Go to diff](?a=blobdiff&h=a0d94590e80eb78791ad49ae82628550a0908a1d&hp=0000000000000000000000000000000000000000&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=tests%2Fphpunit%2Fcommon%2FUser%2FChange%2FPasswordChangerTest.php)  [View file](?a=blob&h=a0d94590e80eb78791ad49ae82628550a0908a1d&hb=4050b0aafd18346d9a6a06967bfb1170824dab17&f=tests/phpunit/common/User/Change/PasswordChangerTest.php) |



=== Content from tuleap.net_d8be2712_20250125_045001.html ===

[Skip to main content](#main-content-start)

[Get help](/help/)
[Documentation](/doc/en/)

[Release Note](https://www.tuleap.org/resources/release-notes/tuleap-16-3/?utm_source=tuleap&utm_medium=forge&utm_campaign=tuleap-forge-icon-help-RN-link)

[API](/api/explorer/)
[Terms](/tos/tos.php)
[Contact](/contact.php)
Shortcuts

# Keyboard shortcuts

| Description | Shortcut |
| --- | --- |

Close

[Login](/account/login.php?return_to=%2Fplugins%2Fgit%2Ftuleap%2Ftuleap%2Fstable%3Fa%3Dcommit%26h%3Db87d3b807f39c00371ebaa50f938cb0110113538 "Login")
[New User](/account/register.php "New User")

# Public

Project privacy set to public. By default, its content is available to everyone (authenticated or not). Please note that more restrictive permissions might exist on some items.

[ðŸŒ· Tuleap](/projects/tuleap "Tuleap")

[Git repositories](/plugins/git/tuleap/ "Git repositories")

[Fork repositories](/plugins/git/?group_id=101&action=fork_repositories "Fork repositories")

[tuleap/stable](/plugins/git/tuleap/tuleap/stable "tuleap/stable")

# stable

Clone

# Clone or download

HTTPS (Default)
Read-only

SSH

[Files](/plugins/git/tuleap/tuleap/stable?a=tree&hb=b87d3b807f39c00371ebaa50f938cb0110113538)
[Commits](/plugins/git/tuleap/tuleap/stable?a=commit&h=b87d3b807f39c00371ebaa50f938cb0110113538)
[Pull requests
0](/plugins/git/?action=pull-requests&repo_id=58&group_id=101&tab=homepage)

## Merge commit 'refs/changes/37/12537/2' of ssh://gerrit.tuleap.net:29418/tuleap into HEAD

[Download](?a=commitdiff_plain&h=b87d3b807f39c00371ebaa50f938cb0110113538&noheader=1 "Download commit as plain text file")
[Browse](?a=tree&hb=b87d3b807f39c00371ebaa50f938cb0110113538 "Browse repository at this commit")

\* ssh://gerrit.tuleap.net:29418/tuleap:
[request #12219](https://tuleap.net/goto?key=request&val=12219&group_id=101 "Artefact - Bugs"): Reset passord links are not invalidated on password change

+226
âˆ’17

Author
[![](https://tuleap.net/users/nterray/avatar-75462ed34b9b909ea470b935acdae12db88b0205396013c8d30a8f96908654c1.png)
Nicolas Terray (nterray)](/users/nterray)
 2018-09-04 11:58

Committer
[![](https://tuleap.net/users/nterray/avatar-75462ed34b9b909ea470b935acdae12db88b0205396013c8d30a8f96908654c1.png)
Nicolas Terray (nterray)](/users/nterray)
 2018-09-04 11:58

Hash
b87d3b807f39c00371ebaa50f938cb0110113538

Parents

* [f1eb60b1ad12004ae32244cfbc2502a8c2276946](?a=commit&h=f1eb60b1ad12004ae32244cfbc2502a8c2276946)
* [4050b0aafd18346d9a6a06967bfb1170824dab17](?a=commit&h=4050b0aafd18346d9a6a06967bfb1170824dab17)

Reference
git #tuleap/stable/b87d3b807f39c00371ebaa50f938cb0110113538

## Modified Files

 List

[Side by side diff](?a=commitdiff&h=b87d3b807f39c00371ebaa50f938cb0110113538&o=side-by-side)

[Inline diff](?a=commitdiff&h=b87d3b807f39c00371ebaa50f938cb0110113538)

|  | Name |  |  |  |
| --- | --- | --- | --- | --- |
| M | src/common/autoload.php | +4 | âˆ’2 | [Go to diff](?a=blobdiff&h=d4ca1a9ae9caef03886cdb388a31b43e667d7085&hp=f5735a64d3f3df230c16210ae9fc199f505b873b&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src%2Fcommon%2Fautoload.php)  [View file](?a=blob&h=d4ca1a9ae9caef03886cdb388a31b43e667d7085&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src/common/autoload.php) |
| M | src/common/dao/SessionDao.class.php | +10 | âˆ’1 | [Go to diff](?a=blobdiff&h=7c7e002e42901896080119d4fc94ec5553ca82c0&hp=344cf2b7178cb47cfe87d27294ee04de8132bf3b&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src%2Fcommon%2Fdao%2FSessionDao.class.php)  [View file](?a=blob&h=7c7e002e42901896080119d4fc94ec5553ca82c0&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src/common/dao/SessionDao.class.php) |
| A | src/common/user/Password/Change/PasswordChangeException.php | +25 | âˆ’0 | [Go to diff](?a=blobdiff&h=ae718cba8f1e15f17b6f961597bd3c7fbac8ac06&hp=0000000000000000000000000000000000000000&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src%2Fcommon%2Fuser%2FPassword%2FChange%2FPasswordChangeException.php)  [View file](?a=blob&h=ae718cba8f1e15f17b6f961597bd3c7fbac8ac06&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src/common/user/Password/Change/PasswordChangeException.php) |
| A | src/common/user/Password/Change/PasswordChanger.php | +65 | âˆ’0 | [Go to diff](?a=blobdiff&h=953e8c0172e6d055ac173e2c84011cc38fba022c&hp=0000000000000000000000000000000000000000&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src%2Fcommon%2Fuser%2FPassword%2FChange%2FPasswordChanger.php)  [View file](?a=blob&h=953e8c0172e6d055ac173e2c84011cc38fba022c&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src/common/user/Password/Change/PasswordChanger.php) |
| M | src/common/user/SessionManager.php | +12 | âˆ’1 | [Go to diff](?a=blobdiff&h=043b1bd4aa3456829be9410f7b4b200f3c3db2ed&hp=0be91fa0e6bc7433e8696866b2bfa5ae11bfa95a&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src%2Fcommon%2Fuser%2FSessionManager.php)  [View file](?a=blob&h=043b1bd4aa3456829be9410f7b4b200f3c3db2ed&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src/common/user/SessionManager.php) |
| M | src/www/account/change\_pw.php | +15 | âˆ’7 | [Go to diff](?a=blobdiff&h=12b9a725dcd2e15d6ae43e8e56ac7262c513bda4&hp=104d50e4b20cada43b0515be0ffaed0d66c8edd9&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src%2Fwww%2Faccount%2Fchange_pw.php)  [View file](?a=blob&h=12b9a725dcd2e15d6ae43e8e56ac7262c513bda4&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src/www/account/change_pw.php) |
| M | src/www/admin/usergroup.php | +12 | âˆ’6 | [Go to diff](?a=blobdiff&h=1f1bfb422c1cb67714df8f430193b760ad275cab&hp=e63a5fed33dfedcd6ffcd4d28fc38436f82667ce&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src%2Fwww%2Fadmin%2Fusergroup.php)  [View file](?a=blob&h=1f1bfb422c1cb67714df8f430193b760ad275cab&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=src/www/admin/usergroup.php) |
| A | tests/phpunit/common/User/Change/PasswordChangerTest.php | +83 | âˆ’0 | [Go to diff](?a=blobdiff&h=a0d94590e80eb78791ad49ae82628550a0908a1d&hp=0000000000000000000000000000000000000000&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=tests%2Fphpunit%2Fcommon%2FUser%2FChange%2FPasswordChangerTest.php)  [View file](?a=blob&h=a0d94590e80eb78791ad49ae82628550a0908a1d&hb=b87d3b807f39c00371ebaa50f938cb0110113538&f=tests/phpunit/common/User/Change/PasswordChangerTest.php) |



=== Content from tuleap.net_0f869793_20250125_045001.html ===

[Skip to main content](#main-content)

[Get help](/help/)
[Documentation](/doc/en/)

[Release Note](https://www.tuleap.org/resources/release-notes/tuleap-16-3/?utm_source=tuleap&utm_medium=forge&utm_campaign=tuleap-forge-icon-help-RN-link)

[API](/api/explorer/)
[Terms](/tos/tos.php)
[Contact](/contact.php)
[Shortcuts](#help-modal-shortcuts)

### Keyboard shortcuts

| Description | Shortcut |
| --- | --- |

Close

[Login](/account/login.php?return_to=%2Fplugins%2Ftracker%2F%3Faid%3D12219)
[New User](/account/register.php)

# Public

Project privacy set to public. By default, its content is available to everyone (authenticated or not). Please note that more restrictive permissions might exist on some items.

[ðŸŒ· Tuleap](/projects/tuleap "Tuleap")

[Trackers](/plugins/tracker/?group_id=101 "Trackers")

[Requests](/plugins/tracker/?tracker=140 "Requests")
Shortcuts
[Requests Kanban](/kanban/70 "Requests Kanban")

[request #12219](/plugins/tracker/?aid=12219 "request #12219")

* request #12219
  Reset passord links are not invalidated on password change

Actions

* Create Git branch and pull request

* [Artifact](/plugins/tracker/?aid=12219)
* [Links](/plugins/tracker/?aid=12219&view=artifact-links)

| Infos |  |
| --- | --- |

| Artifact ID[#12219](/plugins/tracker/?aid=12219)Submitted byThomas Gerbet (tgerbet) | Last Modified On2018-09-21 21:07Submitted on2018-09-03 09:47Rank12890 |
| --- | --- |

| Details |  |
| --- | --- |

| Summary \*Reset passord links are not invalidated on password change |
| --- |

Original Submission

Reset password links are not invalidated after a user changes its password.

### Impact

This issue could allow an attacker to persist access to a compromised user account.

CVSSv3 score: 3.8 (CVSS:3.0/AV:N/AC:L/PR:H/UI:N/S:U/C:L/I:L/A:N)

### Exploitation

1. A user got its account compromised, the attacker change the mail address and ask for a reset link
2. The user recovers the account and changes the password. The user now thinks its account is safe.
3. The attacker can use the reset link previously generated to change the password again and compromise the account again.

### Credits

Thank you to Swapnil Jain for finding and reporting this issue.

### References

CVE-2018-17298

[CWE 640](https://cwe.mitre.org/data/definitions/640.html)

| CategoryAuthentication & LDAP | Reported in versionAllPlatformEmpty |
| --- | --- |

Is an Enhancement or an internal improvement?

* [ ] enhancement
* [ ] internal improvement
CC listEmpty

| Stage |  |
| --- | --- |

| Assigned toEmpty | StatusClosedClose date2018-09-04 |
| --- | --- |

| Attachments |  |
| --- | --- |

Connected artifacts
##### Artifact links

## Releases

## Fixed in

  | Artifact ID | Project | Tracker | Summary | Status | Last Update Date | Submitted By | Assigned to ||  | [rel #11901](/plugins/tracker/?aid=11901) | Tuleap | Releases | 10.5 | Delivered | 2018-09-14 15:21 | [Manuel Vacelet (vaceletm)](/users/vaceletm) |  |

##### Reverse artifact links

EmptyAttachmentsEmpty

| References |  |
| --- | --- |

Cross references
##### Referencing request #12219

# Git commit

## tuleap/tuleap/stable

[Merge commit 'refs/changes/37/12537/2' of ssh://gerrit.tuleap.net:29418/tuleap into HEAD

b87d3b807f

![User avatar](https://tuleap.net/users/nterray/avatar-75462ed34b9b909ea470b935acdae12db88b0205396013c8d30a8f96908654c1.png)

Nicolas Terray (nterray)

,
2018-09-04 11:58](https://tuleap.net/goto?key=git&val=tuleap%2Fstable%2Fb87d3b807f39c00371ebaa50f938cb0110113538&group_id=101)
[request #12219: Reset passord links are not invalidated on password change

4050b0aafd

![User avatar](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)

Thomas Gerbet (tgerbet)

,
2018-09-03 14:37](https://tuleap.net/goto?key=git&val=tuleap%2Fstable%2F4050b0aafd18346d9a6a06967bfb1170824dab17&group_id=101)

Show items referenced by request #12219

##### Referenced by request #12219

# Artifact Tracker v5

[rel #11901

10.5](https://tuleap.net/goto?key=rel&val=11901&group_id=101)

# Other

[gerrit #12537](https://tuleap.net/goto?key=gerrit&val=12537&group_id=101)

Display settings

* [Comments are in reversed order](#invert-order)
* Changes are displayed
# Follow-ups

![User avatar](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)[Thomas Gerbet (tgerbet)](/users/tgerbet)2018-09-21 21:07

Adding CVE ID.

---

* **Original Submission**
   Show diff

   Switch to markup diff

  Something went wrong, the follow up content couldn't be loaded

  Only formatting have been changed, you should switch to markup to see the changes
![User avatar](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)[Thomas Gerbet (tgerbet)](/users/tgerbet)2018-09-17 08:45

Public disclosure.

![User avatar](https://tuleap.net/users/nterray/avatar-75462ed34b9b909ea470b935acdae12db88b0205396013c8d30a8f96908654c1.png)[Nicolas Terray (nterray)](/users/nterray)2018-09-04 11:58

[gerrit #12537](https://tuleap.net/goto?key=gerrit&val=12537&group_id=101 "gerrit") integrated into Tuleap 10.4.99.161

---

* **Status**  changed from Under review to Closed
* **Connected artifacts**
  + Added Fixed in: [rel #11901](https://tuleap.net/goto?key=rel&val=11901&group_id=101)
* **Close date** set to 2018-09-04
![User avatar](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)[Thomas Gerbet (tgerbet)](/users/tgerbet)2018-09-03 11:38

A patch is under review: [gerrit #12537](https://tuleap.net/goto?key=gerrit&val=12537&group_id=101 "gerrit").

---

* **Original Submission**
   Show diff

   Switch to markup diff

  Something went wrong, the follow up content couldn't be loaded

  Only formatting have been changed, you should switch to markup to see the changes
* **Status**  changed from Under implementation to Under review


