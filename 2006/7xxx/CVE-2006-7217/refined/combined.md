=== Content from db.apache.org_2446102c_20250125_140704.html ===


[apache](http://www.apache.org/) > [db](http://db.apache.org/)

[![Apache Derby](../images/derby-logo-web.png "Derby is a zero-admin Java RDBMS")](http://db.apache.org/derby)

[![Apache DB Project](../images/db-logo-white.png "Apache DB creates and maintains database solutions.")](http://db.apache.org)

* [Home](../index.html)
* [Quick Start](../quick_start.html)
* [Download](../derby_downloads.html)
* [Community](../derby_comm.html)
* [Documentation](../manuals/index.html)
* [Resources](../blogs/index.html)

Home
[Apache Derby](../index.html)

[Charter](../derby_charter.html)

[Derby License Info](../license.html)

[FAQs](../faq.html)

[Derby Wiki](https://cwiki.apache.org/confluence/display/DERBY/FrontPage)

[Apache DB Home](http://db.apache.org/)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Quick Start
[Quick Start](../quick_start.html)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Download
[Overview](../derby_downloads.html)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Community
[Get Involved!](../derby_comm.html)

[Mailing Lists](../derby_mail.html)

[Source Code](../dev/derby_source.html)

[Bugs](../DerbyBugGuidelines.html)

[Tests](../derby_tests.html)

[Logo](../logo.html)

[Updating the web site](../papers/derby_web.html)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Documentation
[Overview](../manuals/index.html)

[DITA Source](../manuals/dita.html)

[Writing Guidelines](../manuals/guidelines.html)

[Documenting Messages](../manuals/messages.html)

[Writing FAQs](../manuals/docsfaq.html)

[Release Checklist](../manuals/docscheck.html)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Blogs and Articles About Derby
[Overview](../blogs/index.html)

[Blogs](../blogs/index.html#blogs)

Articles
Tutorials, Tips and Tuning
[Getting Started](../blogs/index.html#getstarted)

[Features, Hints and Tips](../blogs/index.html#features)

[Security](../blogs/index.html#security)

[Performance and Tuning](../blogs/index.html#performance)

Tools and Migration
[Tools](../blogs/index.html#tools)

[Migration](../blogs/index.html#migration)

Applications
[Client](../blogs/index.html#client)

[Middle Tier](../blogs/index.html#middletier)

[Persistence](../blogs/index.html#persistence)

[Scalability and Failover](../blogs/index.html#scalability)

Integration With Other Products
[Overview](../integrate/index.html)

[What works with Derby?](../integrate/index.html#uses)

[Product Writeups](../integrate/index.html#products)

Eclipse Plug-ins
[Info](../integrate/derby_plugin_info.html)

Papers and Presentations
[Overview](../papers/index.html)

Derby Engine
Javadoc
[Engine](http://db.apache.org/derby/javadoc/engine)

[Language](http://db.apache.org/derby/javadoc/language)

[Tools](http://db.apache.org/derby/javadoc/tools)

[API](http://db.apache.org/derby/javadoc/publishedapi)

[Architecture](../papers/derby_arch.html)

[BTree](../papers/btree_package.html)

[Disk Page Format](../papers/pageformats.html)

[How Things Work](../papers/derby_htw.html)

[Intersect & Except](../papers/Intersect-design.html)

[JDBC](../papers/JDBCImplementation.html)

[Log Format](../papers/logformats.html)

[Logging & Recovery](../papers/recovery.html)

[Optimizer](../papers/optimizer.html)

[Type System](http://db.apache.org/derby/javadoc/engine/org/apache/derby/iapi/types/package-summary.html#package_description)

[Versioning](../papers/versionupgrade.html)

Derby Network Client
[Functional Spec](../papers/DerbyClientSpec.html)

Derby Tutorial
[Overview](../papers/DerbyTut/index.html)

[Step 1: Install Software](../papers/DerbyTut/install_software.html)

[Step 2: ij Basics](../papers/DerbyTut/ij_intro.html)

[Step 3: Embedded Derby](../papers/DerbyTut/embedded_intro.html)

[Step 4: Derby Network Server](../papers/DerbyTut/ns_intro.html)

Presentations
[ApacheCon](../papers/ApacheCon.html)

[Victorian JUG 2008](../papers/MiscPresentations.html#Victorian+Java+User+Group)

[OSCON 2005](../papers/MiscPresentations.html#OSCON+2005)

[Colorado 2004](../papers/MiscPresentations.html#Colorado+Software+Summit+2004)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

---

![](../skin/images/rc-b-l-15-1body-2menu-3menu.png)

Font size:

# Apache Derby 10.2.1.6 Release

* [Distributions](#Distributions)
* [Release Overview](#Release Overview)
* [JDBC 4.0 Support](#JDBC 4.0 Support)
* [XML Support](#XML Support)
* [New Features](#New Features)
* [Bug Fixes](#Bug Fixes)
* [Issues](#Issues)
  + DERBY-253
  + [DERBY-668](#-N1073B)
  + [DERBY-721](#-N1075B)
  + [DERBY-781](#-N1077B)
  + [DERBY-822](#-N107A5)
  + [DERBY-1130](#-N107C5)
  + [DERBY-1295](#-N107EA)
  + [DERBY-1314](#-N1080A)
  + [DERBY-1323](#-N1082F)
  + [DERBY-1357](#-N1084F)
  + [DERBY-1384](#-N10877)
  + [DERBY-1621](#-N10897)
  + [DERBY-1652](#-N108C7)
  + [DERBY-1867](#-N108F5)
* [Build Environment](#Build Environment)
* [Testing](#Testing)
* [Verifying releases](#Verifying+releases)

## Distributions

Use the links below to download a distribution of Apache Derby from the archives. You should **always** [verify the integrity](#Verifying+releases) of distribution files downloaded from a mirror.

There are four different distributions:

* bin distribution - contains the documentation, javadoc, and jar files for Derby.
* lib distribution - contains only the jar files for Derby.
* lib-debug distribution - contains jar files for Derby with source line numbers.
* src distribution - contains the Derby source tree at the point which the binaries were built.

[db-derby-10.2.1.6-bin.zip](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-bin.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-bin.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-bin.zip.md5)]

[db-derby-10.2.1.6-bin.tar.gz](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-bin.tar.gz) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-bin.tar.gz.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-bin.tar.gz.md5)]

[db-derby-10.2.1.6-lib.zip](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib.zip.md5)]

[db-derby-10.2.1.6-lib.tar.gz](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib.tar.gz) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib.tar.gz.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib.tar.gz.md5)]

[db-derby-10.2.1.6-lib-debug.zip](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib-debug.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib-debug.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib-debug.zip.md5)]

[db-derby-10.2.1.6-lib-debug.tar.gz](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib-debug.tar.gz) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib-debug.tar.gz.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-lib-debug.tar.gz.md5)]

[db-derby-10.2.1.6-src.zip](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-src.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-src.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-src.zip.md5)]

[db-derby-10.2.1.6-src.tar.gz](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-src.tar.gz) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-src.tar.gz.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/db-derby-10.2.1.6-src.tar.gz.md5)]

There are two separate Eclipse plugins for Derby:

* derby\_core\_plugin - provides the Derby jar files to other plugins in Eclipse.
* derby\_ui\_plugin - provides an Apache Derby Nature in Eclipse for easy database application development.

[derby\_core\_plugin\_10.2.1.452058.zip](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/derby_core_plugin_10.2.1.452058.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/derby_core_plugin_10.2.1.452058.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/derby_core_plugin_10.2.1.452058.zip.md5)]

[derby\_ui\_plugin\_1.1.0.zip](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/derby_ui_plugin_1.1.0.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/derby_ui_plugin_1.1.0.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.2.1.6/derby_ui_plugin_1.1.0.zip.md5)]

Please note: both plugins must be installed for full functionality. For information on installing and using the Derby plugins for Eclipse, please see the [Using the 10.2 Core and 1.1 UI Derby plug-ins](http://db.apache.org/derby/integrate/plugin_howto.html) page.

## Release Overview

These notes describe the difference between Derby release 10.2.1.6 and the preceding release 10.1.3.1.

Derby is a pure Java relational database engine using standard SQL and JDBC as its APIs. 10.2.1.6 is a feature release.

The following improvements distinguish 10.2.1.6 from 10.1.3.1:

* **Tools**
  + The ij sql interpreter now has command-line help and two new commands: *show tables* and *describe*.
  + The ij connect statement now works in the J2ME/CDC environment.
  + Tools can now be invoked without specifying a classpath just by typing *java -jar derbyrun.jar toolName*.
* **Security**
  + Databases can now be re-encrypted. See [DERBY-1156](http://issues.apache.org/jira/browse/DERBY-1156).
  + Secure connections can now be required. See [DERBY-928](http://issues.apache.org/jira/browse/DERBY-928).
  + Support has been added for DRDA userid/password substitution. See [DERBY-528](http://issues.apache.org/jira/browse/DERBY-528).
  + SQL Standard GRANT/REVOKE support has been added for authenticated users. See the "User authorizations" section of the Developer's Guide.
* **Administration**
  + New scripts have been added in the bin directory which follow Apache conventions. The scripts in the frameworks directory are deprecated and may be removed in future releases.
  + System tables have been added for access to diagnostic information previously available only through non-standard VTIs.
  + Online backup is now available through new system procedures.
  + Various Net Servlet improvements. See [DERBY-117](http://issues.apache.org/jira/browse/DERBY-117).
  + The network server now logs startup/shutdown messages to derby.log.
* **JDBC**
  + The network driver now supports statement timeouts.
  + Large object streaming has been improved in the network driver.
  + The FOR UPDATE clause is no longer required when declaring an updatable ResultSet.
  + Scrollable, updatable, insensitive ResultSets are now supported.
  + Network client messages have been internationalized. See [DERBY-400](http://issues.apache.org/jira/browse/DERBY-400).
* **SQL**
  + Expressions are now allowed in the GROUP BY clause.
  + Identity columns can be reset to start at a new value. Please consult documentation on the RESTART WITH clause of ALTER TABLE (found in the Reference Guide).
  + XPath/XQuery support has been improved.
  + New builtin math functions have been added and wired-in as JDBC escape functions. See the "Built-in functions" section of the Reference Guide.
  + Unary *+/-* are now allowed for *?* parameters.
  + Optimizer overrides have been added.
  + Triggers can now call Java procedures.
  + The nullability of a column can be changed now.

For a comprehensive list of changes, consult the lists of [new features](#New Features) and [bug fixes](#Bug Fixes) below.

10.2.1.6 functionality includes:

* Embedded engine with JDBC driver
* Network Server
* Network client JDBC driver
* Command line tools: ij (SQL scripting), dblook (schema dump) and sysinfo (system info)

SQL support:

* Schemas, tables, temporary tables, views, triggers, indexes, savepoints
* Java procedures and functions
* Standard datatypes including XML, BLOB, and CLOB
* Sub-queries and joins
* Primary key, foreign key, unique and check constraints
* Referential actions
* GRANT/REVOKE support for databases with SQL authorization.

Other features:

* Full ACID transaction support with all four isolation levels
* Row and table level locking
* Configurable authentication including LDAP support
* Import/Export
* On-line backup and recovery support
* Optional on-disk encryption including re-encryption of existing encrypted databases
* Platform independent database format
* Full support for Java 2 Security Manager

JDK/JDBC support:

* JDK 1.3, 1.4, 1.5, and J2ME J2ME/CDC/Foundation Profile
* JSR-169, JDBC 2.1, and JDBC 3.0 support

## JDBC 4.0 Support

Derby 10.2.1.6 comes with source code for drivers which conform to a beta version of the JDBC standard, JDBC 4.0. This source code conforms to the following state of the JDBC 4.0 specification:

* The proposed final draft of the [JSR 221 spec](http://jcp.org/en/jsr/detail?id=221), dated July 19, 2006.
* [Beta build 99 of JDK 6](http://download.java.net/jdk6/binaries/).

Due to license restrictions on the beta builds of JDK 6, Derby 10.2.1.6 does not contain compiled versions of JDBC 4.0 drivers. When run on Java SE 6, Derby 10.2.1.6 exposes the same JDBC 3.0 implementation seen when run on JDK 1.4 and 1.5. You may, however, compile Derby's JDBC 4.0 support yourself. This will let you use JDBC 4.0 features when you run Derby 10.2.1.6 on Java SE 6.

To build this optional JDBC 4.0 support yourself, please download the source distribution and consult BUILDING.txt. You may also follow a simplified set of instructions for building JDBC 4.0 support, which you may find in the "Building the Optional JDBC4 Support" section of the [Derby 10.2 wiki page](http://wiki.apache.org/db-derby/TenTwoRelease).

## XML Support

If you intend to use any of the Derby XML operators, you must ensure that you have:

* A JAXP parser in your classpath
* Apache Xalan in your classpath

Apache Derby 10.2.1.6 has been tested with Xalan-Java Version 2.7.0. If you have a version of Xalan that is earlier than 2.7, the Derby XML operators may still work. However, it is possible that you will experience unexpected errors when using the Derby XML operators.

## New Features

These features appear in Derby 10.2.1.6 but not in the preceding release 10.1.3.1.

| **Master JIRA** | **New Feature** |
| --- | --- |
| [DERBY-31](http://issues.apache.org/jira/browse/DERBY-31) | Statement.setQueryTimeout() support |
| [DERBY-117](http://issues.apache.org/jira/browse/DERBY-117) | Improvements on the NetServlet |
| [DERBY-119](http://issues.apache.org/jira/browse/DERBY-119) | ALTER TABLE change nullability |
| [DERBY-239](http://issues.apache.org/jira/browse/DERBY-239) | Online backup |
| [DERBY-231](http://issues.apache.org/jira/browse/DERBY-231) | FOR UPDATE clause |
| [DERBY-326](http://issues.apache.org/jira/browse/DERBY-326) | Improve Network Server large object streaming |
| [DERBY-400](http://issues.apache.org/jira/browse/DERBY-400) | Network client message strings not internationalized |
| [DERBY-464](http://issues.apache.org/jira/browse/DERBY-464) | Grant Revoke |
| [DERBY-475](http://issues.apache.org/jira/browse/DERBY-475) | New functions: ACOS, ASIN, ATAN, COS, SIN, TAN, PI, DEGREES, RADIANS, EXP, LN, LOG, LOG10, CEIL, CEILING, FLOOR |
| [DERBY-506](http://issues.apache.org/jira/browse/DERBY-506) | Client timeout mechanism |
| [DERBY-515](http://issues.apache.org/jira/browse/DERBY-515) | Network Server should log server start and shutdown time to derby.log |
| [DERBY-551](http://issues.apache.org/jira/browse/DERBY-551) | Invoke Java procedures from triggers |
| [DERBY-528](http://issues.apache.org/jira/browse/DERBY-528) | DRDA USRSSBPWD Security Mechanism |
| [DERBY-571](http://issues.apache.org/jira/browse/DERBY-571) | New syntax for invoking diagnostic VTIs |
| [DERBY-573](http://issues.apache.org/jira/browse/DERBY-573) | Optimizer directives |
| [DERBY-582](http://issues.apache.org/jira/browse/DERBY-582) | Unary plus/minus for parameters |
| [DERBY-592](http://issues.apache.org/jira/browse/DERBY-592) | New JDBC escape functions: ACOS, ASIN, ATAN, COS, SIN, TAN, PI, DEGREES, RADIANS, EXP, LOG, LOG10, CEILING, FLOOR |
| [DERBY-597](http://issues.apache.org/jira/browse/DERBY-597) | Enhance ij connect statement to work in J2ME/CDC/FP |
| [DERBY-688](http://issues.apache.org/jira/browse/DERBY-688) | Xml support for XPath |
| [DERBY-690](http://issues.apache.org/jira/browse/DERBY-690) | Scrollable Updatable ResultSet |
| [DERBY-783](http://issues.apache.org/jira/browse/DERBY-783) | Identity value restart |
| [DERBY-883](http://issues.apache.org/jira/browse/DERBY-883) | Enhance GROUP BY clause to support expressions |
| [DERBY-928](http://issues.apache.org/jira/browse/DERBY-928) | Restrict client connections,derby.drda.securityMechanism |
| [DERBY-1019](http://issues.apache.org/jira/browse/DERBY-1019) | Simplify tool invocation |
| [DERBY-1032](http://issues.apache.org/jira/browse/DERBY-1032) | Scripts adhering to Apache's conventions |
| [DERBY-1156](http://issues.apache.org/jira/browse/DERBY-1156) | Database re-encryption |
| [DERBY-1164](http://issues.apache.org/jira/browse/DERBY-1164) | 'show tables' and 'describe' commands in ij |
| [DERBY-1216](http://issues.apache.org/jira/browse/DERBY-1216) | Command line help for ij |

## Bug Fixes

List the bugs fixed by this release. These are bug fixes which turn up in Derby 10.2.1.6 but not in the preceding 10.1.3.1 release.

| **Issue Id** | **Description** |
| --- | --- |
| [DERBY-23](http://issues.apache.org/jira/browse/DERBY-23) | just booting jdbc driver and shutting down seem to leak memory |
| [DERBY-137](http://issues.apache.org/jira/browse/DERBY-137) | Derby metadata always returns JDBC 2 result sets, even when JDBC 3 result sets are required. |
| [DERBY-147](http://issues.apache.org/jira/browse/DERBY-147) | ERROR 42X79 not consistant ? - same column name specified twice |
| [DERBY-156](http://issues.apache.org/jira/browse/DERBY-156) | Delete with alias on column fails |
| [DERBY-171](http://issues.apache.org/jira/browse/DERBY-171) | Need Correlation ID in UPDATE/DELETE statements |
| [DERBY-176](http://issues.apache.org/jira/browse/DERBY-176) | Derby throws ERROR XBCM1: Java linkage error thrown during load of generated class org.apache.derby.exe.aced07c066x0102xca87x3319x00004aa5686e1 during execution of large query |
| [DERBY-213](http://issues.apache.org/jira/browse/DERBY-213) | ResultSet.next() after last row of FORWARD\_ONLY cursor throws an SQL Exception with Network Server |
| [DERBY-231](http://issues.apache.org/jira/browse/DERBY-231) | "FOR UPDATE" required for updatable result set to work |
| [DERBY-253](http://issues.apache.org/jira/browse/DERBY-253) | Client should throw not implemented exception for depricated setUnicodeStream/getUnicodeStream |
| [DERBY-254](http://issues.apache.org/jira/browse/DERBY-254) | SQLStates for SQLExceptions thrown from the client should not be null and should match embedded where possible |
| [DERBY-304](http://issues.apache.org/jira/browse/DERBY-304) | If by mistake you give he location for the db backup as the db itself , then windows created directories recursively until windows crashes! |
| [DERBY-333](http://issues.apache.org/jira/browse/DERBY-333) | Malformed if statement in org.apache.derby.impl.drda.Database.getDRDAStatement() |
| [DERBY-336](http://issues.apache.org/jira/browse/DERBY-336) | The wrong overload of StandardException::newException() is used in some cases |
| [DERBY-349](http://issues.apache.org/jira/browse/DERBY-349) | setByte() with executeBatch causes hang with client if mapping is invalid, e.g. setByte to DATE |
| [DERBY-352](http://issues.apache.org/jira/browse/DERBY-352) | Clobs on insert using streams should not instantiate into memory |
| [DERBY-353](http://issues.apache.org/jira/browse/DERBY-353) | It is desirable to have IDENTITY\_VAL\_LOCAL() function return last recent user specified value or system generated value for BY DEFAULT identity columns. |
| [DERBY-404](http://issues.apache.org/jira/browse/DERBY-404) | org.apache.derby.iapi.store.access.RowUtil.isRowEmpty has (never exercised) bug |
| [DERBY-412](http://issues.apache.org/jira/browse/DERBY-412) | Connection toString should show type information and the meaning of the identifier that it prints |
| [DERBY-418](http://issues.apache.org/jira/browse/DERBY-418) | outofmemory error when running large query in autocommit=false mode |
| [DERBY-427](http://issues.apache.org/jira/browse/DERBY-427) | An error message when running in XA environment says cloudscape.LOG rather than derby.log |
| [DERBY-428](http://issues.apache.org/jira/browse/DERBY-428) | NetworkClient PreparedStatement.executeBatch() hangs if batch is too large (ArrayIndexOutOfBoundsException in Network Server) |
| [DERBY-438](http://issues.apache.org/jira/browse/DERBY-438) | Update triggers on tables with BLOB and CLOB columns fail at execution time if the triggered-SQL-statement references the LOB column(s). |
| [DERBY-445](http://issues.apache.org/jira/browse/DERBY-445) | Client data sources lose the value of the connectionAttributes property when they are stored using the Reference interface |
| [DERBY-446](http://issues.apache.org/jira/browse/DERBY-446) | Client data source implementations cause security exception on storage to/from a Reference object |
| [DERBY-471](http://issues.apache.org/jira/browse/DERBY-471) | DatabaseMetaData.getXXXFunctions() methods return incorrect values. |
| [DERBY-479](http://issues.apache.org/jira/browse/DERBY-479) | Passing the return of a RETURN NULL ON NULL INPUT function to another function call throws linkage error. |
| [DERBY-483](http://issues.apache.org/jira/browse/DERBY-483) | Error message X0X07 has incorrect property name, db2j.database.classpath instead of derby.database.classpath |
| [DERBY-501](http://issues.apache.org/jira/browse/DERBY-501) | Client and embedded drivers differ on invoking a procedure that returns a single Dynamic resultSet using CallableStatement.executeQuery() |
| [DERBY-517](http://issues.apache.org/jira/browse/DERBY-517) | ResultSet - relative(int rows) behaves different in embedded and client/server mode when the positioning before the first row or after the last row. |
| [DERBY-523](http://issues.apache.org/jira/browse/DERBY-523) | Non logged operation that starts before the log archive mode is enabled can not be recovered during rollforward recovery. |
| [DERBY-525](http://issues.apache.org/jira/browse/DERBY-525) | getAsciiStreamshould replace non-ASCII characters with 0x3f, '?' to match embedded |
| [DERBY-536](http://issues.apache.org/jira/browse/DERBY-536) | The current build.properties for the Derby Help Plug-in for Eclipse does not work for creating a deployable plug-in |
| [DERBY-541](http://issues.apache.org/jira/browse/DERBY-541) | Read-only databases fail to boot after soft upgrade. Raises error message: 40XD1: Container was opened in read-only mode. |
| [DERBY-555](http://issues.apache.org/jira/browse/DERBY-555) | Unable to restart after disk is full |
| [DERBY-567](http://issues.apache.org/jira/browse/DERBY-567) | Improve Derby XML support to use XML parser found in JVM instead of using a hard-coded parser name (Xerces). |
| [DERBY-569](http://issues.apache.org/jira/browse/DERBY-569) | Derby network server is printing connection activity on System.out instead of logging it to derby.log |
| [DERBY-578](http://issues.apache.org/jira/browse/DERBY-578) | Grouped select from temporary table raises null pointer exception in byte code generator |
| [DERBY-579](http://issues.apache.org/jira/browse/DERBY-579) | Query timeout set for one statement may affect other statements with the same SQL string |
| [DERBY-582](http://issues.apache.org/jira/browse/DERBY-582) | Dynamic parameter should be allowed to be the operand of unary operator "-". Derby throws exception 42X36: The '-' operator is not allowed to take a ? parameter as an operand." |
| [DERBY-592](http://issues.apache.org/jira/browse/DERBY-592) | Expand table driven system function defintion added in DERBY-475 to allow definition of JDBC escaped functions. |
| [DERBY-596](http://issues.apache.org/jira/browse/DERBY-596) | jdbcapi/resultsetStream.java fails in DerbyNetClient Framework |
| [DERBY-599](http://issues.apache.org/jira/browse/DERBY-599) | Using setBlob interface, should not materialize the entire blob value into memory. |
| [DERBY-609](http://issues.apache.org/jira/browse/DERBY-609) | Returning ByteArrayInputStream from ResultSet is not appropriate |
| [DERBY-611](http://issues.apache.org/jira/browse/DERBY-611) | Network client: updateRow() causes a commit when autoCommit = true |
| [DERBY-622](http://issues.apache.org/jira/browse/DERBY-622) | sysinfo incorrectly requires permission on Derby jar files |
| [DERBY-634](http://issues.apache.org/jira/browse/DERBY-634) | Subquery materialization can cause stack overflow |
| [DERBY-635](http://issues.apache.org/jira/browse/DERBY-635) | Client socket connection doesn't report real socket exception |
| [DERBY-648](http://issues.apache.org/jira/browse/DERBY-648) | ij 'show connections' statement does not work in JSR169 |
| [DERBY-655](http://issues.apache.org/jira/browse/DERBY-655) | getImportedKeys returns duplicate rows in some cases |
| [DERBY-660](http://issues.apache.org/jira/browse/DERBY-660) | CREATE PROCEDURE incorrectly allows the RETURNS NULL ON NULL INPUT clause |
| [DERBY-694](http://issues.apache.org/jira/browse/DERBY-694) | Statement exceptions cause all the connection's result sets to be closed with the client driver |
| [DERBY-707](http://issues.apache.org/jira/browse/DERBY-707) | providing RowLocation for deleted+purged row to GenericConglomerateController causes nullpointerexception |
| [DERBY-709](http://issues.apache.org/jira/browse/DERBY-709) | SecurityException thrown when passing a relative path name when backing up database |
| [DERBY-714](http://issues.apache.org/jira/browse/DERBY-714) | NullPointerException or ClassCastException if UPDATE or DELETE is performed on a diagnostic VTI |
| [DERBY-718](http://issues.apache.org/jira/browse/DERBY-718) | Network client: deleteRow() makes getter methods return nulls for the following rows. |
| [DERBY-721](http://issues.apache.org/jira/browse/DERBY-721) | State of InputStream retrieved from resultset is not clean , if there exists previous InputStream . |
| [DERBY-730](http://issues.apache.org/jira/browse/DERBY-730) | SQL statements that fail to parse remain in the statement cache. |
| [DERBY-732](http://issues.apache.org/jira/browse/DERBY-732) | ERROR XBCM1: Java linkage error thrown during load of generated class for query with large number of logical operators and substitution parameters. |
| [DERBY-733](http://issues.apache.org/jira/browse/DERBY-733) | Starvation in RAFContainer.readPage() |
| [DERBY-756](http://issues.apache.org/jira/browse/DERBY-756) | OutOfMemory Error on continous execution of select statement using COUNT() and DISTINCT on same connection |
| [DERBY-781](http://issues.apache.org/jira/browse/DERBY-781) | Materialize subqueries in select list where possible to avoid creating invariant resultsets many times. |
| [DERBY-782](http://issues.apache.org/jira/browse/DERBY-782) | Improvement on org.apache.derby.impl.jdbc.EmbedBlob#length() |
| [DERBY-786](http://issues.apache.org/jira/browse/DERBY-786) | Casting to a CLOB value does not truncate. |
| [DERBY-787](http://issues.apache.org/jira/browse/DERBY-787) | cursor closed as a sideeffect of closing another cursor with the same name on another connection |
| [DERBY-802](http://issues.apache.org/jira/browse/DERBY-802) | OutofMemory Error when reading large blob when statement type is ResultSet.TYPE\_SCROLL\_INSENSITIVE |
| [DERBY-818](http://issues.apache.org/jira/browse/DERBY-818) | Read-only embedded ResultSets incur performance penalty due to updateable ResultSet code. |
| [DERBY-821](http://issues.apache.org/jira/browse/DERBY-821) | Client driver: Implicitly close exhausted result sets on the server |
| [DERBY-826](http://issues.apache.org/jira/browse/DERBY-826) | sysinfo does not report the version of derby.jar if the class does not explictly contain it. |
| [DERBY-836](http://issues.apache.org/jira/browse/DERBY-836) | ResultSetMetaData.getColumnDisplaySize sometimes returns wrong values for DECIMAL columns |
| [DERBY-876](http://issues.apache.org/jira/browse/DERBY-876) | DatabaseMetaData.getSchemas() is not JDBC 3.0 compliant |
| [DERBY-915](http://issues.apache.org/jira/browse/DERBY-915) | EmbedDatabaseMetadata, EmbedDatabaseMetadata40, and client.net.NetDatabaseMetadata40 should not throw a "not implemented" exception |
| [DERBY-922](http://issues.apache.org/jira/browse/DERBY-922) | getSQLException() method in client.am.SqlException does not correctly chain exceptions |
| [DERBY-939](http://issues.apache.org/jira/browse/DERBY-939) | NullPointerException at ResultSet.close() time for simple query using UNION and INTERSECT |
| [DERBY-959](http://issues.apache.org/jira/browse/DERBY-959) | Allow use of DRDA QRYDTA block sizes greater than 32K |
| [DERBY-965](http://issues.apache.org/jira/browse/DERBY-965) | DatabaseMetadata method supportsResultSetConcurrency returns wrong result on network client |
| [DERBY-982](http://issues.apache.org/jira/browse/DERBY-982) | sysinfo api does not provide genus name for client |
| [DERBY-992](http://issues.apache.org/jira/browse/DERBY-992) | A corner case bug and missing optimization in ScrollInsensitiveResultSet |
| [DERBY-1000](http://issues.apache.org/jira/browse/DERBY-1000) | For LDAP authentication: derby.authentication.server should support ldaps:// as part of the server url. |
| [DERBY-1043](http://issues.apache.org/jira/browse/DERBY-1043) | Invalid column references are not caught in a trigger action statement when the referencing table of the column is the triggered table |
| [DERBY-1060](http://issues.apache.org/jira/browse/DERBY-1060) | ResultSet methods should throw exception when the ResultSet is closed |
| [DERBY-1064](http://issues.apache.org/jira/browse/DERBY-1064) | Delete cascade causes NULL values inserted into table when after delete Trigger fires |
| [DERBY-1080](http://issues.apache.org/jira/browse/DERBY-1080) | Connection reset when using security mechanism=EUSRIDPWD results in protocol error. |
| [DERBY-1087](http://issues.apache.org/jira/browse/DERBY-1087) | Updatable result sets behave different depending on the type of query used to generate the result set |
| [DERBY-1095](http://issues.apache.org/jira/browse/DERBY-1095) | Closing an embedded connection does not seem to close associated EmbedStatements |
| [DERBY-1113](http://issues.apache.org/jira/browse/DERBY-1113) | transaction logs files requried for recovery are getting deleted when backup and checkpointas are running in parallel. |
| [DERBY-1117](http://issues.apache.org/jira/browse/DERBY-1117) | SQLException can lose stacktrace in some cases. |
| [DERBY-1119](http://issues.apache.org/jira/browse/DERBY-1119) | Creating a schema with DumpParseTree, DumpBindTree properties set causes NullPointException. |
| [DERBY-1142](http://issues.apache.org/jira/browse/DERBY-1142) | Metadata calls leak memory |
| [DERBY-1172](http://issues.apache.org/jira/browse/DERBY-1172) | incorrect error message in updateRow() after a commit on a held scroll insensitive resultset |
| [DERBY-1177](http://issues.apache.org/jira/browse/DERBY-1177) | updateObject with null as argument causes network driver to fail with NullPointerException |
| [DERBY-1183](http://issues.apache.org/jira/browse/DERBY-1183) | Client java.sql.ResultSet.getCursorName() does not return the correct cursor name for Statements after the first execution |
| [DERBY-1184](http://issues.apache.org/jira/browse/DERBY-1184) | 'CallableStatement.registerOutParameter(int,int,String)' does nothing in client driver |
| [DERBY-1190](http://issues.apache.org/jira/browse/DERBY-1190) | Network Server reports wrong product name when logging connections to derby.log |
| [DERBY-1196](http://issues.apache.org/jira/browse/DERBY-1196) | Network server closes prepared statements prematurely if exception occurs during OPNQRY and can cause "'Statement' already closed" exception on reexecution |
| [DERBY-1202](http://issues.apache.org/jira/browse/DERBY-1202) | SQLState DATA\_SQLDATA\_READ\_INSTANTIATION\_EXCEPTION has no message associated with it |
| [DERBY-1234](http://issues.apache.org/jira/browse/DERBY-1234) | Verify that we raise SQLException when calling methods on closed java.sql objects |
| [DERBY-1236](http://issues.apache.org/jira/browse/DERBY-1236) | Verify that applications can't manipulate the transaction state while inside a distributed transaction. |
| [DERBY-1241](http://issues.apache.org/jira/browse/DERBY-1241) | When booting a database under security manager, boot may fail with message java.sql.SQLException: Java exception: 'access denied (java.io.FilePermission for logmirror.ctrl if database was not shutdown cleanly after previous access |
| [DERBY-1249](http://issues.apache.org/jira/browse/DERBY-1249) | cursor operation conflict incorrectly handled in scrollable updatable resultsets |
| [DERBY-1251](http://issues.apache.org/jira/browse/DERBY-1251) | cancelRowUpdates() affects rows updated with updateRow() in scrollable updatable resultsets |
| [DERBY-1258](http://issues.apache.org/jira/browse/DERBY-1258) | Wrong value returned in a row trigger action statement if the table has column names that are identical when upper-cased. |
| [DERBY-1266](http://issues.apache.org/jira/browse/DERBY-1266) | Client: Attempted deleteRow or updateRow while on insert row gives wrong error message |
| [DERBY-1274](http://issues.apache.org/jira/browse/DERBY-1274) | Network Server does not shutdown the databases it has booted when started and shutdown from the command line |
| [DERBY-1276](http://issues.apache.org/jira/browse/DERBY-1276) | Calling ResultSet.isLast() on a scrollable insensitive resultset, causes the entire ResultSet to be populated |
| [DERBY-1277](http://issues.apache.org/jira/browse/DERBY-1277) | Call to rs.isLast() may cause rs.getXXX() return values from the last row instead of the current row in scrollable resultsets |
| [DERBY-1279](http://issues.apache.org/jira/browse/DERBY-1279) | Bad column name in DatabaseMetaData.getColumns() |
| [DERBY-1292](http://issues.apache.org/jira/browse/DERBY-1292) | ClassCastException in ClientDriver when using CLOB columns and batch updates |
| [DERBY-1295](http://issues.apache.org/jira/browse/DERBY-1295) | Result sets of type TYPE\_SCROLL\_INSENSITIVE should not implicitly close due to positioning in autocommit mode |
| [DERBY-1296](http://issues.apache.org/jira/browse/DERBY-1296) | Setting property derby.system.bootAll causes an Exception |
| [DERBY-1304](http://issues.apache.org/jira/browse/DERBY-1304) | DROP view does not always completely remove view |
| [DERBY-1313](http://issues.apache.org/jira/browse/DERBY-1313) | SUR: Use DRDA's extended diagnostic to send ROW\_UPDATED and ROW\_DELETED warnings. |
| [DERBY-1314](http://issues.apache.org/jira/browse/DERBY-1314) | Differences between client and embedded when invoking stored procedures using Statement.executeUpdate() |
| [DERBY-1322](http://issues.apache.org/jira/browse/DERBY-1322) | Missing resets of isOnInsertRow state in net client when navigating away via other than ResultSet#next |
| [DERBY-1323](http://issues.apache.org/jira/browse/DERBY-1323) | Detectability methods rowUpdated, rowInserted, rowDeleted can be called from illegal states in both clients |
| [DERBY-1326](http://issues.apache.org/jira/browse/DERBY-1326) | Network server may abandon sessions when Derby system is shutdown and this causes intermittent hangs in the client |
| [DERBY-1356](http://issues.apache.org/jira/browse/DERBY-1356) | Positioned update/delete when positioned after last or before first causes NullPointerException |
| [DERBY-1357](http://issues.apache.org/jira/browse/DERBY-1357) | Short-circuit logic in optimizer appears to be incorrect... |
| [DERBY-1361](http://issues.apache.org/jira/browse/DERBY-1361) | positioned updates and deletes allowed after a commit without repositioning the cursor - if the table is indexed on the columns selected |
| [DERBY-1364](http://issues.apache.org/jira/browse/DERBY-1364) | Client driver does not roll back the effects of a stored procedure when incorrectly invoked by executeQuery()/executeUpdate() |
| [DERBY-1373](http://issues.apache.org/jira/browse/DERBY-1373) | Encrypted databases cannot be booted using the jar subprotocol (and possibly also using http/https/classpath) |
| [DERBY-1382](http://issues.apache.org/jira/browse/DERBY-1382) | client: lobs fails silently with result sets of type TYPE\_SCROLL\_INSENSITIVE |
| [DERBY-1384](http://issues.apache.org/jira/browse/DERBY-1384) | Increase default BLOB/CLOB length to maximum supported (2G?) |
| [DERBY-1393](http://issues.apache.org/jira/browse/DERBY-1393) | PreparedStatement.setObject(int,Object,int) should throw SQLFeatureNotSupportedException for unsupported types |
| [DERBY-1395](http://issues.apache.org/jira/browse/DERBY-1395) | Change the client SQLState to match that of embedded for the exception thrown on a closed statement whose connection is also closed |
| [DERBY-1396](http://issues.apache.org/jira/browse/DERBY-1396) | ReEncodedInputStream may fail to read all of source Reader. |
| [DERBY-1421](http://issues.apache.org/jira/browse/DERBY-1421) | ResultSet.updateBinaryStream fails when the result type is TYPE\_SCROLL\_INSENSITIVE |
| [DERBY-1464](http://issues.apache.org/jira/browse/DERBY-1464) | runtimestatistics can show that an index is being used even when it isn't |
| [DERBY-1473](http://issues.apache.org/jira/browse/DERBY-1473) | Add cut-off and truncation logic to streaming classes in the embedded driver |
| [DERBY-1476](http://issues.apache.org/jira/browse/DERBY-1476) | PreparedStatement.setNull(int,int) should throw SQLFeatureNotSupportedException for unsupported types |
| [DERBY-1481](http://issues.apache.org/jira/browse/DERBY-1481) | Client driver: ResultSet.beforeFirst() gives protocol error on scrollable, updatable result sets that are downgraded to read-only |
| [DERBY-1493](http://issues.apache.org/jira/browse/DERBY-1493) | EmbeddedDriver does not implement PreparedStatement.setNull(int, int, String) |
| [DERBY-1500](http://issues.apache.org/jira/browse/DERBY-1500) | PreparedStatement#setObject(int parameterIndex, Object x) throws SQL Exception when binding Short value in embedded mode |
| [DERBY-1510](http://issues.apache.org/jira/browse/DERBY-1510) | 'SQLBinary.readFromStream' can enter endless loop |
| [DERBY-1533](http://issues.apache.org/jira/browse/DERBY-1533) | ArrayIndexOutOfBoundsException in DDMReader, on a specific data size |
| [DERBY-1547](http://issues.apache.org/jira/browse/DERBY-1547) | Add svn version number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion() to improve supportability |
| [DERBY-1554](http://issues.apache.org/jira/browse/DERBY-1554) | IDENTITY\_VAL\_LOCAL() returned value is modified incorrectly by a multi-row INSERT statement. |
| [DERBY-1571](http://issues.apache.org/jira/browse/DERBY-1571) | NetworkServerControlImpl.consoleExceptionPrintTrace() prints stack trace even when logWriter is null |
| [DERBY-1574](http://issues.apache.org/jira/browse/DERBY-1574) | NullPointerException in UPDATE with COALESCE and subquery |
| [DERBY-1586](http://issues.apache.org/jira/browse/DERBY-1586) | The attributesAsPassword property doesn't work correctly with EmbeddedConnectionPoolDataSource |
| [DERBY-1587](http://issues.apache.org/jira/browse/DERBY-1587) | INTEGER function cannot be abbreviated |
| [DERBY-1589](http://issues.apache.org/jira/browse/DERBY-1589) | CREATE TABLE throws NullPointerException in Derby SQL Standard Authorization after DROPs and REVOKES |
| [DERBY-1619](http://issues.apache.org/jira/browse/DERBY-1619) | Sysinfo in 10.2 shows multiple entries if the derby jars reside in a directory with spaces in its name |
| [DERBY-1621](http://issues.apache.org/jira/browse/DERBY-1621) | Trigger action statement is not recompile when there is a change that would affect it. |
| [DERBY-1633](http://issues.apache.org/jira/browse/DERBY-1633) | Regression: The fields of views are not being calculated properly since 10.1.2.4 |
| [DERBY-1652](http://issues.apache.org/jira/browse/DERBY-1652) | Update trigger updating the same rows as the original update does not throw an exception ERROR 54038: "Maximum depth of nested triggers was exceeded" as it should |
| [DERBY-1660](http://issues.apache.org/jira/browse/DERBY-1660) | SYSCS\_BULK\_INSERT fails with syntax error at PROPERTIES clause. |
| [DERBY-1661](http://issues.apache.org/jira/browse/DERBY-1661) | Create index on large tables fails with too many open files , FileNotFoundException. |
| [DERBY-1675](http://issues.apache.org/jira/browse/DERBY-1675) | Network Server should not send to client that it supports EUSRIDPWD when running against Sun JVM |
| [DERBY-1681](http://issues.apache.org/jira/browse/DERBY-1681) | Regression (wrong results): Join predicate can be ignored for left-most child in a chain of nested unions. |
| [DERBY-1692](http://issues.apache.org/jira/browse/DERBY-1692) | Client driver does not use the query timeout value set using Statement.setQueryTimeout() for subsequent executions using the same statement object |
| [DERBY-1706](http://issues.apache.org/jira/browse/DERBY-1706) | NullPointerException occurs when trying to create a table in schema SESSION |
| [DERBY-1707](http://issues.apache.org/jira/browse/DERBY-1707) | Specifying an incorrect optimizer property (constraint=null) gives NullPointerException |
| [DERBY-1708](http://issues.apache.org/jira/browse/DERBY-1708) | Unprivileged user can perform lock table statement on a table which he/she does not have any access rights |
| [DERBY-1714](http://issues.apache.org/jira/browse/DERBY-1714) | huge single insert statements fail with JVM error due to size of generated method |
| [DERBY-1756](http://issues.apache.org/jira/browse/DERBY-1756) | Revert change in client that defaults the secmec to eusridpwd. |
| [DERBY-1767](http://issues.apache.org/jira/browse/DERBY-1767) | insertRow(), updateRow() and deleteRow() cannot handle table names and column names containing double quotes |
| [DERBY-1777](http://issues.apache.org/jira/browse/DERBY-1777) | Regression: query works in 10.1.2.1 but fails with NullPointerException in 10.2.1.1 |
| [DERBY-1784](http://issues.apache.org/jira/browse/DERBY-1784) | When qualifying a column name with its synonym name in the select list, Derby throws SQLSTATE 42X04. |
| [DERBY-1786](http://issues.apache.org/jira/browse/DERBY-1786) | a crash during re-encryption of an existing database with lot of tables can make database unrecoverable on a next boot. |
| [DERBY-1809](http://issues.apache.org/jira/browse/DERBY-1809) | Built-in functions not working in views. |
| [DERBY-1811](http://issues.apache.org/jira/browse/DERBY-1811) | Embedded ResultSet.getTimestamp on a TIME column returns a java.sql.Timestamp with a date portion that can be incorrect. |
| [DERBY-1817](http://issues.apache.org/jira/browse/DERBY-1817) | Race condition in network server's thread pool |
| [DERBY-1854](http://issues.apache.org/jira/browse/DERBY-1854) | SYSCS\_COMPRESS\_TABLE corrupts table with a single column which is both a primary key and a foreign key |
| [DERBY-1858](http://issues.apache.org/jira/browse/DERBY-1858) | A schema can be dropped by a non-schema owner in SQL authorization mode |
| [DERBY-1866](http://issues.apache.org/jira/browse/DERBY-1866) | Assert failure in sane mode for queries that used to work in 10.1.2.1 |
| [DERBY-1891](http://issues.apache.org/jira/browse/DERBY-1891) | error 58009.C.19 refers to non-existent codepoint secktn - needs correcting |
| [DERBY-1900](http://issues.apache.org/jira/browse/DERBY-1900) | The scripts under the /bin of the distribution does not have the executable permission |

## Issues

Please be aware of the following issues:

---

### DERBY-253

**Problem**

PreparedStatement.setUnicodeStream() and ResultSet.getUnicodeStream() throw SQLException when invoked after upgrading to Apache Derby 10.2.

**Symptoms**

Calling either of these methods will result in an exception with SQLSTATE 0A000 and message: "Feature not implemented: ..."

**Cause**

PreparedStatement.setUnicodeStream() and ResultSet.getUnicodeStream() have been deprecated since JDBC 2.0. Derby's implemetation of these methods was broken, and it was decided that the methods should throw a not-implemented exception instead of being fixed.

**Solution**

This was an intentional change. No Derby product solution is offered.

**Workaround**

Use setCharacterStream() and getCharacterStream() instead of setUnicodeStream() and getUnicodeStream().

---

### DERBY-668

**Problem**

Sysinfo classpath information was insufficiently detailed.

**Symptoms**

Sometimes it was hard to tell where the Derby classes were actually being loaded from in the JVM.

**Cause**

The algorithm that sysinfo used for analyzing and reporting on the application classpath was not robust.

**Solution**

The sysinfo tool now prints additional information about the origin of the classes and jars that it examines. The origin of a class might be: an entry in the application classpath, an entry in a class loader location list, a jar fetched due to being listed in the manifest entry of another jar, a standard extension in the JRE's extensions directory, a jar installed into the application server, or any of various other possibilities.

**Workaround**

No workaround. The behavior is now correct.

---

### DERBY-721

**Problem**

Undefined results were returned to an application which opend an InputStream twice on the same column of a ResultSet.

**Symptoms**

The value siphoned out of the column was erratic.

**Cause**

Streams were being shared between the two readers.

**Solution**

Now we throw an exception if the application tries to open two streams on the same column in a ResultSet.

**Workaround**

Users must recode Applications which open multiple streams on the same column.

---

### DERBY-781

**Problem**

When optimizing a query that has one or more non-flattenable subqueries in the FROM clause, Derby will now check to see if it is possible to perform a hash join with that subquery as the inner table. Prior to Derby 10.2, the optimizer would never consider a hash join with a subquery; it only did nested loop joins.

**Symptoms**

Execution performance of queries containing non-flattenable subqueries may change. The expectation is that the new (10.2) query plans will show improved performance over the old ones.

Another potential symptom is that the compilation time for such queries may increase. If this happens, the increase should only occur at compilation time; execution time should either improve or, at the very least, remain the same as in earlier versions of Derby.

**Cause**

If the optimizer chooses to do a hash join with a subquery, Derby only has to execute the subquery a single time per statement, after which Derby can just perform the desired join against the materialized result set. Depending on how many rows are in the outer table of the join, this once-per-statement execution of the subquery can lead to major performance improvements over the once-per-outer-row execution employed by earlier versions of Derby.

As for the extra compilation time, this is due to the simple fact that the optimizer is now doing more work--i.e. in addition to considering nested loop joins with subqueries, it is now \_also\_ considering hash joins with those subqueries, and that means that it could potentially take longer for the optimizer to finish its work. Note again that, if it occurs, the increased time should only occur at compilation time; execution time should either improve or, at the very least, remain the same as in earlier versions of Derby.

**Solution**

This was an intentional change to improve the execution plans chosen by the optimizer for queries having large and/or complex subqueries. The expectation is that the new behavior--and the subsequent query plans--will lead to improved performance over the old ones, so no further solution is required.

**Workaround**

There is no way to disable/workaround this new behavior since the symptom as described above is a good one for Derby.

That said, any user who notices a negative performance change after moving to Derby 10.2, and who believes that the difference in performance is related to this optimizer enhancement, is encouraged to visit the [performance diagnosis page](http://wiki.apache.org/db-derby/PerformanceDiagnosisTips) and to follow up with his/her findings on the Derby mailing lists.

---

### DERBY-822

**Problem**

Queries may fail earlier and locks may be acquired earlier when executing queries. Location where errors occur in an embedded environment is different from the location where errors occur in a network environment.

**Symptoms**

Errors that happen as part of the normal execution path are moved earlier. For example, code to execute a query, with executeQuery() retrieve the result set metadata and then perform a next() might fail with a lock timeout on executeQuery() instead of next(). Locking changes are observed.

**Cause**

Pre-fetching moves execution of retrieval of data earlier for network client/server configurations.

**Solution**

This was an intentional behavior change to improve performance. No Derby product solution is offered.

**Workaround**

Application code needs to be changed to adjust error handling if needed.

---

### DERBY-1130

**Problem**

Derby's client DataSources were using a wrong database name when getting a connection in the following case:

* databaseName is not set as a Derby DataSource property
* databaseName is set as a connection attribute using setConnectionAttributes method

**Symptoms**

Instead of throwing an exception saying databaseName is a required Derby DataSource property and must be set, client driver was using "null" as database name and returning a connection to database named "null".

**Cause**

The database name was constructed wrongly in the client driver.

**Solution**

This was solved by setting the internal database name property in the client driver correctly. Also ensured that databaseName set as a connection attribute will not be used by Derby's client DataSources.. This fix will be available in Derby versions 10.2 and above.

**Workaround**

If using release prior to version 10.2, make sure database name is set only as a DataSource property when using Derby's client DataSources.

---

### DERBY-1295

**Problem**

Result sets of type TYPE\_SCROLL\_INSENSITIVE used to implicitly close when positioned at the end in autocommit mode.

**Symptoms**

Calling the ResultSet.next() method when positioned on the last row of a result set of type SCROLL\_INSENSITIVE in auto commit mode used to cause the result set to be closed.

**Cause**

The JDBC specification allows a JDBC driver to implicitly close a ResultSet when the ResultSet type is TYPE\_FORWARD\_ONLY and the next method of ResultSet returns false. Derby also used to implicitly close result sets of type SCROLL\_INSENSITIVE when the ResultSet.next() method returns false in auto commit mode.

**Solution**

The behavior of SCROLL\_INSENSITIVE result sets in auto commit mode has been changed to comply with the JDBC4 specification. SCROLL\_INSENSITIVE result sets are not implicitly closed when calling the ResultSet.next() method in auto commit mode while positioned on the last row.

**Workaround**

Fix applications which rely on the previous, non-standard behavior.

---

### DERBY-1314

**Problem**

The behaviour of executeQuery() and executeUpdate() did not match the JDBC specification when invoking stored procedures.

**Symptoms**

* When invoking a stored procedure with executeQuery() or executeUpdate(), an exception was thrown indicating that the procedure did not return the correct number of ResultSet objects, although the correct number of ResultSet objects was in fact returned.
* When invoking a stored procedure with executeQuery() or executeUpdate(), and the procedure did not return the correct number of ResultSet objects, the query executed successfully.
* With the network client driver, when invoking a stored procedure with executeUpdate(), the return value was -1, whereas the JDBC specification says it should be 0.

**Cause**

The methods executeQuery() and executeUpdate() were not implemented in compliance with the JDBC specification.

**Solution**

In Derby 10.2, the behaviour of the methods executeQuery() and executeUpdate() has been changed to match the JDBC specification.

**Workaround**

Use execute() instead of executeUpdate()/executeQuery() to invoke a stored procedure which does not return exactly 0 or 1 ResultSet objects.

---

### DERBY-1323

**Problem**

For a JDBC ResultSet with type TYPE\_FORWARD\_ONLY, the methods rowUpdated, rowDeleted and rowInserted could previously be called while not on a row, i.e. before positioning in the result set, while on insertRow, after updateRow before new positioning, after deleteRow before new positioning and when after last row. This is now disallowed.

**Symptoms**

Calls to any of these methods while not on a row will now throw SQLException with SQLState 24000.

**Cause**

Derby now disallows these calls when not on a row.

**Solution**

Change the application to not call these methods unless on a row. Note that using them at all is rather meaningless for a ResultSet of type TYPE\_FORWARD\_ONLY since the returned result will always be 'false'. This is because once you modify a row, it can no longer be accessed, you need to move to the next row, if there is one, to get a new current row. Presently in Derby, these methods are only really meaningfully used for result sets of type TYPE\_SCROLL\_INSENSITIVE and of concurrency CONCUR\_UPDATABLE in which case updated and deleted rows can be detected.

**Workaround**

Fix applications which rely on this non-standard behavior.

---

### DERBY-1357

**Problem**

The optimizer will now abandon sub-optimal join orders as soon as it realizes that they cost more than the best join order so far.

This fix also ensures that, in the case of short-circuited join orders, Derby will still generate (and execute) an overall plan that matches the "best path" decisions made by the optimizer--which was not always the case prior to these changes.

**Symptoms**

Execution performance of large queries (esp. those with nested subqueries and/or with large FROM clauses) may change. The expectation is that the new (10.2) query plans will show improved performance over the old ones.

**Cause**

Since the optimizer is now spending less time evaluating sub-optimal join orders, it is possible that it will be able to try out more join orders before optimizer "timeout" occurs. As a result the optimizer can sometimes find better plans than it did in earlier versions of Derby.

**Solution**

This was an intentional change to fix behavior that was not working correctly in earlier versions of Derby. The expectation is that the new behavior--and the subsequent query plans--will lead to improved performance over the old ones, so no further solution is required.

**Workaround**

There is no way to disable/workaround this new behavior since the symptom as described above is a good one for Derby.

That said, any user who notices a negative performance change after moving to Derby 10.2, and who believes that the difference in performance is related to this optimizer change, is encouraged to visit the [performance diagnosis page](http://wiki.apache.org/db-derby/PerformanceDiagnosisTips) and to follow up with his/her findings on the Derby mailing lists.

---

### DERBY-1384

**Problem**

Default BLOB/CLOB length should be the maximum length supported by Derby (2G-1)

**Symptoms**

An application that used BLOB will current reject values greater than 1M, changing the default means the application will now silently accept those values.

**Cause**

The allowable size of Derby LOBs has been increased.

**Solution**

This was an intentional change to make Derby conform to its own documentation.

**Workaround**

Fix applications which rely on Derby rejecting LOBs that are bigger than 1M.

---

### DERBY-1621

**Problem**

Trigger action statement is not recompile when there is a change that would affect it.

**Symptoms**

(1) Trigger action such as an INSERT statement does not get recompiled when the underlying table is affected by a CREATE or DROP INDEX statement. e.g.:

```
         create table t (i int);
         create table t2 (i int);
         create trigger tt after insert on t for each statement mode db2sql insert into t2 values 1;
         insert into t values 1;
         select * from t2;
         create unique index tu on t2(i);
         insert into t values 1;
         select * from t2;
         insert into t values 1;
         1 row inserted/updated/deleted

```

The above example creates an unique index on table t2. when the trigger is fired, it did not raise an unique constraint error.

(2) When the trigger action statement underlying view gets dropped, the trigger statement did not get recompiled. e.g.:

```
         create table t11 (c111 int not null primary key, c112 int);
         insert into t11 values(1,1);
         insert into t11 values(2,2);
         create view v21 as select * from user1.t11;
         create table t31 (c311 int);
         create table t32 (c321 int);
         create trigger tr31t31 after insert on t31 for each statement mode db2sql insert into t32 values (select c111 from user1.v21 where c112=1);
         insert into t31 values(1);
         select * from t31;
         select * from t32;
         drop view v21;
         insert into t31 values(1);

```

In the above example, a view which the trigger action references is dropped; however, the last SQL INSERT statement did not throw an error.

(3) Conglomerate does not exist occurs in a specific case after dropping a table referenced by a trigger. The trigger action is not being recompiled and raises SQLSTATE XSAI2 even though the table being dropped was recreated again. e.g.:

```
         create table t1 (id int, name varchar(20));
         create table t2 (id int);
         create trigger test_trigger after insert on t2 for each row mode db2sql insert into t1 values(100, 'hundred');
         insert into t2 values(1);
         insert into t2 values(1);
         select * from t1;
         drop table t1;
         insert into t2 values(1);
         create table t1 (id int, name varchar(20));
         insert into t2 values(1);

```

In the above example, a table which the trigger action references is dropped. The last INSERT statement should execute successfully but it raises SQLSTATE XSAI2: The conglomerate (896) requested does not exist.

**Cause**

Derby did not perform invalidation of the trigger action when object(s) that the trigger references are modified or dropped; hence, resulting in the stated problem above. The affected versions are Derby 10.0 and 10.1.

**Solution**

A fix to resolve the above Derby symptoms is available in 10.2.

**Workaround**

None.

---

### DERBY-1652

**Problem**

In some cases, an after update trigger does not get fired upon itself when its trigger action contains an update statement on the trigger's subject table.

**Symptoms**

(1) When defining a trigger for the first time for a table, e.g.:

```

        CREATE TABLE "TEST" ("TESTID" INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
                             "INFO" INTEGER NOT NULL,
                             "TIMESTAMP" TIMESTAMP NOT NULL DEFAULT '1980-01-01-00.00.00.000000');

        CREATE TRIGGER UPDATE_TEST
        AFTER UPDATE ON TEST
        REFERENCING OLD AS OLD
        FOR EACH ROW MODE DB2SQL
            UPDATE TEST SET TIMESTAMP = CURRENT_TIMESTAMP WHERE TESTID = OLD.TESTID;

        INSERT INTO TEST (INFO) VALUES (1), (2), (3);

        UPDATE TEST SET INFO = 1 WHERE TESTID = 2;

```

The above update statement executes successfully which it is incorrect. The system should have issued SQLSTATE 54038 since it self-triggers to its maximum depth of 16.

(2) With the above example, when an user upgrades to a higher version and issues the same update statement:

```
        UPDATE TEST SET INFO = 1 WHERE TESTID = 2;
        ERROR 54038: Maximum depth of nested triggers was exceeded.

```

The SQLSTATE 54038 is issued in this case because after database upgrade, the trigger action will be invalidated by the system and will force a recompilation of the trigger when it is fired. The system generates the correct execution plan this time and since the trigger behavior have changed, this might cause applications to break unexpectedly.

**Cause**

Derby's did not generate the correct execution plan for self-trigger invocation when such a trigger is declared for the first time on the subject table; hence, resulting in the stated problem above. The affected version is Derby 10.0 and 10.1.

**Solution**

A fix to resolve the above Derby symptom is available in 10.1 and 10.2. thrown now.

**Workaround**

If self-trigger invocation was not intended by the application, the application can select which column(s) on the update statement can cause the trigger to fire in the CREATE TRIGGER statement. i.e.:

```
   CREATE TRIGGER update_test
   AFTER UPDATE OF INFO ON test
   REFERENCING OLD AS old
   FOR EACH ROW MODE DB2SQL
       UPDATE test SET timestamp=current_timestamp WHERE testid=old.testid;

```

In the above statement, the trigger will only fire when an update is made to the "info" column instead of any column(s).

---

### DERBY-1867

**Problem**

With IBM 1.4.1 JVM, trying to connect to the server using the derby client with security mechanism 8 (USRSSSBPWD) will result in error.

**Symptoms**

Connecting using the client driver with security mechanism 8 will throw the following error ERROR XJ112: Security exception encountered, see next exception for details. The stack trace will show that the problem is caused by java.security.NoSuchAlgorithmException: SHA1PRNG SecureRandom not available

**Cause**

Current USRSSBPWD implementation uses SHA1PRNG algorithm to generate random number(seed) that gets exchanged between client and the server. The SHA1PRNG algorithm is not available with the JCE provider that comes with IBM JVM version 1.4.1.

**Solution**

You must use another JCE provider.

**Workaround**

If you need to use the security mechanism 8, then make sure that support for SHA1PRNG is available in the JCE provider that is available with a particular JVM. For e.g. Use IBM 1.4.2 JVM that has support for SHA1PRNG or the Sun JVMs.

## Build Environment

Derby release 10.2.1.6 was built using the following environment:

* **Branch** - Source code came from the 10.2 branch.
* **Machine** - Cygwin on Microsoft Windows XP Professional Version 2002 Service Pack 2.
* **Ant** - Apache Ant version 1.6.5 compiled on June 2 2005.
* **JDK 1.4** - Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2\_08-b03).
* **JDK 1.3** - Java(TM) 2 Runtime Environment, Standard Edition (build 1.3.1\_16-b06).
* **JDK 1.6** - The optional JDBC4 drivers were not compiled.
* **OSGi** - The osgi.jar was used to build org.apache.derby.osgi.EmbeddedActivator.
* **Compiler** - The 1.4.2\_08-b03 javac was used to compile all classes.
* **JSR 169** - J2ME support was built using java.sun.com/j2me (j2me\_cdc\_fp-1\_0\_2).

## Testing

Tests were run on the following platforms. Results are listed separately for each platform.

| Type test | platform, jvm version | by: |
| --- | --- | --- |
| derbyall suite | Solaris 10 x86 using JDK 6 (rc build 100) | John Embretsen |
| derbyall suite | Solaris | Knut Anders Hatlen |
| derbyall suite | BSD | Knut Anders Hatlen |
| derbyall suite | BSD | Knut Anders Hatlen |
| derbyall suite | RHEL4.0 (Linux 2.6.9-34.ELsmp, Sun JDK 1.4.2\_08-b03) | Rick Hillegas |
| derbyall suite | SLES 10.0 Kernel 2.6.16.21-0.15-bigsmp #1 SMP - ibm142 and ibm15 | Rajesh Kartha |
| derbyall suite | RHEL 4.0 ES Kernel 2.6.9-42.0.2.ELsmp on an i686 - ibm15 (-Xjit:count-0) | Rajesh Kartha |
| derbyall suite | AIX with ibm15 (Xjit:count=0) | Manjula G. Kuty |
| derbyall suite with the 10.2.1.5 RC | ibm142 and ibm15 | Manjula G. Kuty |
| derbyall suite | - | Mike Matrigalli |
| derbyall suite | Windows XP | Yip Ng |
| derbyall suite | HP-UX 11.11 | Vemund Ostgaard |
| derbyall suite | HP-UX v1.11 i, HP 1.5.0.03 | Vermund van de Scheur |
| derbyall suite | RHAS 4 64-bits (lin), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | RHAS 3 64-bits (linN-1), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | RHAS 4 32-bits (lin32), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Solaris 10 X86 64-bits (sol), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Solaris Nevada X86 64-bits (solN+1), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Solaris 9 X86 32-bits (solN-1), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Solaris 10 X86 32-bits (sol32), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Solaris 10 SPARC 64 bits (sparc), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Solaris Nevada SPARC 64 bits (sparcN+1), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Solaris 9 SPARC 64 bits (sparcN-1), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Solaris 8 SPARC 64 bits (sparcN-2), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Windows 2003 EE (win), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Windows 2000 as (winN-1), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | Windows XP Prof (winxp), Sun 1.4.2, 1.5.0\_04, 1.6.0-rc | Henri van de Scheur |
| derbyall suite | RHEL 4.0 64-bits, IBM 1.5 (jit 0) | Myrna van Lunteren |
| Torque tutorial: http://db.apache.org/derby/integrate/db\_torque.html | - | Jean Andersen |
| lightly tested the eclipse plugins on eclipse 3.2 on fedora (added a derby nature, used ij to create and populate a database, and ran sysinfo) | - | Jean Andersen |
| DdlUtils example: http://db.apache.org/derby/integrate/db\_ddlutils.html | - | Jean Andersen |
| ODBC tests | DB2 Runtime Client (v8) | Army Brown |
| long running test | Solaris 10 x86 using JDK 6 (rc build 100) | John Embretsen |
| performance tests with the 10.2.1.5 RC for both embedded and network server mode, tests included single user, multi user | linux (Suse version 9) and windows (win2k) for the IBM JVM ( 1.4.2) | Sunitha Kambhampati |
| long running tests | Linux and Windows with IBM 15 and 142 | Manjula G. Kuty |
| Signatures verified | - | Andrew McIntyre |
| large data volume tests | Solaris 10 1/06 s10x\_u1wos\_19a X86 64bits, Sun 1.5.0 ( 1.5.0\_07-b03) | Ole Solberg |
| crashed derby engine few times when DML's are in progress, database recovered fine | - | Suresh Thalamati |
| tested scripts | - | Myrna van Lunteren |

Several test issues were reported, such as DERBY-937(1.5), DERBY-1221(1.5), DERBY-734(1.6), DERBY-1585(1.6), DERBY-1629(1.6), DERBY-1883(1.4), but no specific code issues were noted.

Tests for a specific platform can be run using the derbyTesting.jar file that can be found in the lib directory of the -lib or -bin distributions.

Instructions on how to run the tests can be found in the [testing README](http://svn.apache.org/repos/asf/db/derby/code/branches/10.2/java/testing/README.htm).

## Verifying releases

It is essential that you verify the integrity of the downloaded files using the PGP and MD5 signatures. MD5 verification ensures the file was not corrupted during the download process. PGP verification ensures that the file came from a certain person.

The PGP signatures can be verified using [PGP](http://www.pgpi.org/) or [GPG](http://www.gnupg.org/). First download the Apache Derby [KEYS](http://archive.apache.org/dist/db/derby/KEYS) as well as the asc signature file for the particular distribution. It is important that you get these files from the ultimate trusted source - the main ASF distribution site, rather than from a mirror. Then verify the signatures using ...

```
% pgpk -a KEYS
% pgpv db-derby-X.Y.tar.gz.asc

or

% pgp -ka KEYS
% pgp db-derby-X.Y.tar.gz.asc

or

% gpg --import KEYS
% gpg --verify db-derby-X.Y.tar.gz.asc

```

To verify the MD5 signature on the files, you need to use a program called md5 or md5sum, which is included in many unix distributions. It is also available as part of [GNU Textutils](http://www.gnu.org/software/textutils/textutils.html). Windows users can get binary md5 programs from [here](http://www.fourmilab.ch/md5/), [here](http://www.pc-tools.net/win32/freeware/console/), or [here](http://www.slavasoft.com/fsum/).

We strongly recommend you verify your downloads with both PGP and MD5.

Copyright ©
2004-2023 Apache, Apache DB, Apache Derby, Apache Torque, Apache JDO, Apache DDLUtils, the Derby hat logo, the Apache JDO logo, and the Apache feather logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
Send feedback about the website to:
derby-user@db.apache.org



=== Content from issues.apache.org_f9ad3132_20250125_140705.html ===


[Log in](/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1858)[Skip to main content](#main)[Skip to sidebar](#sidebar)Linked ApplicationsLoading…[![ASF JIRA](/jira/s/xd97tr/820010/13pdxe5/_/jira-logo-scaled.png)](https://issues.apache.org/jira/secure/MyJiraHome.jspa)

* [Dashboards](/jira/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/jira/browse/DERBY "View recent projects and browse a list of projects")
* [Issues](/jira/issues/ "Search for issues and view recent issues")

* [Help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/jira/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/jira/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/jira/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1858)

Public signup for this instance is **disabled**. Go to our [Self serve sign up page](https://selfserve.apache.org/jira-account.html) to request an account. Report potential security issues [privately](https://apache.org/security/#reporting-a-vulnerability)

![Uploaded image for project: 'Derby'](https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122)

1. [Derby](/jira/browse/DERBY)
2. [DERBY-1858](/jira/browse/DERBY-1858)

# A schema can be dropped by a non-schema owner in SQL authorization mode

[Log In](/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1858 "Log In")Export

XMLWordPrintableJSON
#### Details

* **Type:**
  ![](/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.") Bug
* **Status:**
  Closed
* **Priority:**
  ![](/jira/images/icons/priorities/major.svg "Major - Major loss of function.") Major
* **Resolution:**
  Fixed
* **Affects Version/s:**
  10.2.1.6, 10.2.2.0, 10.3.1.4
* **Fix Version/s:**
  [10.2.1.6](/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.2.1.6 "10.2.1.6 "), [10.3.1.4](/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.1.4 "10.3.1.4 ")
* **Component/s:**
  [SQL](/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL "SQL ")
* **Labels:**
  None
* **Environment:**
  Any
#### Description

drop schema user2 restrict should fail since user3 does not own the schema user2.

ij version 10.3

ij> connect 'wombat;create=true' user 'user1' as user1;

WARNING 01J14: SQL authorization is being used without first enabling authentication.

ij> connect 'wombat;create=true' user 'user2' as user2;

WARNING 01J01: Database 'wombat' not created, connection made to existing database instead.

WARNING 01J14: SQL authorization is being used without first enabling authentication.

ij(USER2)> create schema user2;

0 rows inserted/updated/deleted

ij(USER2)> connect 'wombat;create=true' user 'user3' as user3;

WARNING 01J01: Database 'wombat' not created, connection made to existing database instead.

WARNING 01J14: SQL authorization is being used without first enabling authentication.

ij(USER3)> drop schema user2 restrict;

0 rows inserted/updated/deleted

sysinfo:

------------------ Java Information ------------------

Java Version: 1.4.2\_12

Java Vendor: Sun Microsystems Inc.

Java home: c:\jdk142\jre

Java classpath: classes;.

OS name: Windows XP

OS architecture: x86

OS version: 5.1

Java user name: Yip

Java user home: C:\Documents and Settings\Yip

Java user dir: C:\work3\derby\trunk

java.specification.name: Java Platform API Specification

java.specification.version: 1.4

--------- Derby Information --------

JRE - JDBC: J2SE 1.4.2 - JDBC 3.0

[C:\work3\derby\trunk\classes] 10.3.0.0 alpha - (446666)

------------------------------------------------------

----------------- Locale Information -----------------

Current Locale : [English/United States [en\_US]]

Found support for locale: [de\_DE]

version: 10.3.0.0 alpha - (446666)

Found support for locale: [es]

version: 10.3.0.0 alpha - (446666)

Found support for locale: [fr]

version: 10.3.0.0 alpha - (446666)

Found support for locale: [it]

version: 10.3.0.0 alpha - (446666)

Found support for locale: [ja\_JP]

version: 10.3.0.0 alpha - (446666)

Found support for locale: [ko\_KR]

version: 10.3.0.0 alpha - (446666)

Found support for locale: [pt\_BR]

version: 10.3.0.0 alpha - (446666)

Found support for locale: [zh\_CN]

version: 10.3.0.0 alpha - (446666)

Found support for locale: [zh\_TW]

version: 10.3.0.0 alpha - (446666)

------------------------------------------------------

#### Attachments

#### Attachments

* Options
  + [Sort By Name](/jira/browse/DERBY-1858?attachmentSortBy=fileName#attachmentmodule "viewissue.subtasks.tab.show.all.name")
  + [Sort By Date](/jira/browse/DERBY-1858?attachmentSortBy=dateTime#attachmentmodule "Sort By Date")
  + [Ascending](/jira/browse/DERBY-1858?attachmentOrder=asc#attachmentmodule "Ascending")
  + [Descending](/jira/browse/DERBY-1858?attachmentOrder=desc#attachmentmodule "Descending")

1. [derby1858-trunk-diff01.txt](/jira/secure/attachment/12340995/derby1858-trunk-diff01.txt "Latest  16/Sep/06 23:39 - Yip Ng")16/Sep/06 23:3910 kBYip Ng
2. [derby1858-trunk-diff02.txt](/jira/secure/attachment/12341595/derby1858-trunk-diff02.txt "Latest  25/Sep/06 06:22 - Yip Ng")25/Sep/06 06:2210 kBYip Ng
3. [derby1858-trunk-stat01.txt](/jira/secure/attachment/12340994/derby1858-trunk-stat01.txt "Latest  16/Sep/06 23:39 - Yip Ng")16/Sep/06 23:390.7 kBYip Ng
4. [derby1858-trunk-stat02.txt](/jira/secure/attachment/12341594/derby1858-trunk-stat02.txt "Latest  25/Sep/06 06:22 - Yip Ng")25/Sep/06 06:220.7 kBYip Ng
#### Activity

#### People

Assignee:

![yipng](https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452)
Yip Ng

Reporter:

![yipng](https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452)
Yip Ng

Votes:
0
Vote for this issue

Watchers:
0
Start watching this issue

#### Dates

Created:

15/Sep/06 21:10

Updated:

13/Dec/07 09:05

Resolved:

01/Oct/06 17:00

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/jira/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/jira/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for Apache Software Foundation. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)



=== Content from secunia.com_15419716_20250125_140707.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...


