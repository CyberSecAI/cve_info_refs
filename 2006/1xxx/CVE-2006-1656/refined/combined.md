=== Content from bugs.debian.org_2b548a50_20250125_071502.html ===

# Debian Bug report logs - #360438 suexec: suexec from root with an invalid ID runs as root

[![version graph](version.cgi?found=util-vserver%2F0.30.209-2;width=2;height=2;fixed=util-vserver%2F0.30.210-1;absolute=0;collapse=1;package=util-vserver)](version.cgi?info=1;package=util-vserver;found=util-vserver%2F0.30.209-2;fixed=util-vserver%2F0.30.210-1;collapse=1;absolute=0)

Package:
[util-vserver](pkgreport.cgi?package=util-vserver);
Maintainer for [util-vserver](pkgreport.cgi?package=util-vserver) is [Carlos Alberto Lopez Perez <clopez@igalia.com>](pkgreport.cgi?maint=clopez%40igalia.com); Source for [util-vserver](pkgreport.cgi?package=util-vserver) is [src:util-vserver](pkgreport.cgi?src=util-vserver) ([PTS](https://tracker.debian.org/pkg/util-vserver), [buildd](https://buildd.debian.org/util-vserver), [popcon](https://qa.debian.org/popcon.php?package=util-vserver)).

Reported by: [David Schmitt <david@schmitt.edv-bus.at>](pkgreport.cgi?submitter=david%40schmitt.edv-bus.at)

Date: Sun, 2 Apr 2006 11:03:08 UTC

Severity: important

Tags: patch, security, upstream

Found in version util-vserver/0.30.209-2

Fixed in version util-vserver/0.30.210-1

**Done:** Micah Anderson <micah@debian.org>

Bug is archived. No further changes may be made.

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=360438;mbox=yes), [status mbox](bugreport.cgi?bug=360438;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=360438;mbox=yes;mboxmaint=yes)

---

**Report forwarded** to `debian-bugs-dist@lists.debian.org, enrico.scholz@informatik.tu-chemnitz.de, Debian Security Team <team@security.debian.org>, Ola Lundqvist <opal@debian.org>`:

`Bug#360438`; Package `util-vserver`.
([full text](bugreport.cgi?bug=360438;msg=2), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent** to `David Schmitt <david@schmitt.edv-bus.at>`:

New Bug report received and forwarded. Copy sent to `enrico.scholz@informatik.tu-chemnitz.de, Debian Security Team <team@security.debian.org>, Ola Lundqvist <opal@debian.org>`.
([full text](bugreport.cgi?bug=360438;msg=4), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=360438;msg=5), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=david%40schmitt.edv-bus.at)
From: David Schmitt <david@schmitt.edv-bus.at>
To: Debian Bug Tracking System <submit@bugs.debian.org>
Subject: suexec: suexec from root with an invalid ID runs as root
Date: Sun, 02 Apr 2006 12:40:25 +0200
```
Package: util-vserver
Version: 0.30.209-2
Severity: important
Tags: security patch upstream

This is upstream bug #15996: suexec from root with an invalid
ID runs as root.

<https://savannah.nongnu.org/bugs/?func=detailitem&item_id=15996>

david@zion:~$ sudo vserver buildd suexec david id
uid=0(root) gid=0(root) groups=0(root)
david@zion:~$ sudo vserver buildd suexec 1000 id
uid=1000(david) gid=0(root) groups=0(root)
david@zion:~$

There is also a patch already available at
<https://savannah.nongnu.org/patch/?func=detailitem&item_id=4966>

Regards, David

-- System Information:
Debian Release: testing/unstable
  APT prefers unstable
  APT policy: (500, 'unstable')
Architecture: i386 (i686)
Shell:  /bin/sh linked to /bin/bash
Kernel: Linux 2.6.16-1-vserver-686
Locale: LANG=C, LC_CTYPE=de_AT.UTF-8 (charmap=UTF-8)

Versions of packages util-vserver depends on:
ii  iproute                       20051007-4 Professional tools to control the
ii  libbeecrypt6                  4.1.2-4    open source C library of cryptogra
ii  libc6                         2.3.6-4    GNU C Library: Shared libraries an
ii  net-tools                     1.60-17    The NET-3 networking toolkit

Versions of packages util-vserver recommends:
ii  binutils          2.16.1cvs20060117-1uc1 The GNU assembler, linker and bina
ii  make              3.80+3.81.rc2-1        The GNU version of the "make" util

-- no debconf information

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Ola Lundqvist <opal@debian.org>`:

`Bug#360438`; Package `util-vserver`.
([full text](bugreport.cgi?bug=360438;msg=7), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=7), [link](#6)).

---

**Acknowledgement sent** to `David Schmitt <david@schmitt.edv-bus.at>`:

Extra info received and forwarded to list. Copy sent to `Ola Lundqvist <opal@debian.org>`.
([full text](bugreport.cgi?bug=360438;msg=9), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=9), [link](#8)).

---

[Message #10](#10) received at 360438@bugs.debian.org ([full text](bugreport.cgi?bug=360438;msg=10), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=10), reply):

![](/cgi-bin/libravatar.cgi?email=david%40schmitt.edv-bus.at)
From: David Schmitt <david@schmitt.edv-bus.at>
To: 360438@bugs.debian.org
Subject: Re: suexec: suexec from root with an invalid ID runs as root
Date: Sun, 2 Apr 2006 14:40:28 +0200
```
There was a short discussion on irc later:

(12:49:06) doener: daniel_hozac: hm, doesn't make that patch the assumption
that you have already chroot'ed?
(12:50:50) daniel_hozac: doener: the chroot happens before the uid is used.
(12:51:21) daniel_hozac: but yeah, for when you use --uid and not --chroot, it
won't do the right thing.
(12:54:03) doener: ah, right the chroot stuff is in there... but maybe the
name to uid resolution could be done by some other tool in the chain and have
only "vserver" accept names, while vcontext just gets some checks to ensure
that the uid is a valid number
(12:55:09) doener: the other tool could receive the path to the vserver (or
look it up) and use fgetpwent
(12:55:20) daniel_hozac: the resolution would have to happen after vcontext.
(12:57:14) doener: why?
(12:59:44) doener:
<http://www.13thfloor.at/~doener/vserver/tools/vexec-0.03.c> -- resolution
happens first
(13:05:19) daniel_hozac: i guess the optimal solution would be one that
executes id inside the vserver.
(13:07:54) daniel_hozac: as that would work even for nss_ldap and such.
(13:16:26) DavidS: daniel_hozac: while i agree, that the resolution should
happen within the context, I can't image how that should work in a generic
fashin (does id/getent exist everywhere?)
(13:17:34) daniel_hozac: right, which is why my patch does it sort-of-inside.
(13:22:04) DavidS: i would have expected suexec to use "su" from the
vserver ...
(13:25:21) daniel_hozac: well, if you can't expect id to be present, you can't
expect su to be present either :)
(13:31:58) DavidS: daniel_hozac: touche :)
(13:32:44) DavidS: then it should probably be something in the apps/ config?
how-to-{change,map}-uid ?
(13:32:56) DavidS: with id/su as good defaults
(13:35:40) daniel_hozac: well, you can already use vserver ... exec su ...
(13:36:10) daniel_hozac: vserver ... suexec implies it's something that the
utils themselves do.
(13:36:50) DavidS: then you can't ever resolve a _name_
(13:37:06) daniel_hozac: hmm?
(13:37:06) shedi left the room (quit: Quit: Leaving).
(13:38:24) DavidS: where is the difference between using lib_nss,
reading /etc/passwd or using id/su/getent?
(13:38:38) DavidS: (everything from the vserver of course)
(13:39:18) DavidS: resolving a name within the vserver without using
information (executable or otherwise) from the vserver is impossible ...
(13:39:33) daniel_hozac: we can't do the first, parsing /etc/passwd
and /etc/group manually when there are already functions to do so invokes the
lazyness in me, and the third, well, you can already do that.
(13:40:04) daniel_hozac: my patch will use getpwent and initgroups for
usernames.
(13:42:29) DavidS: i've seen it .. ah, that was the dietlibc ifdef ...
preventing to use glibc/nss
--
- hallo... wie gehts heute?
- *hust* gut *rotz* *keuch*
- gott sei dank kommunizieren wir über ein septisches medium ;)
 -- Matthias Leeb, Uni f. angewandte Kunst, 2005-02-15

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Ola Lundqvist <opal@debian.org>`:

`Bug#360438`; Package `util-vserver`.
([full text](bugreport.cgi?bug=360438;msg=12), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=12), [link](#11)).

---

**Acknowledgement sent** to `opal@debian.org`:

Extra info received and forwarded to list. Copy sent to `Ola Lundqvist <opal@debian.org>`.
([full text](bugreport.cgi?bug=360438;msg=14), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=14), [link](#13)).

---

[Message #15](#15) received at 360438@bugs.debian.org ([full text](bugreport.cgi?bug=360438;msg=15), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=15), reply):

![](/cgi-bin/libravatar.cgi?email=opal%40debian.org)
From: Ola Lundqvist <opal@debian.org>
To: David Schmitt <david@schmitt.edv-bus.at>, 360438@bugs.debian.org
Subject: Re: Bug#360438: suexec: suexec from root with an invalid ID runs as root
Date: Sun, 2 Apr 2006 20:30:12 +0200
```
Hi

I have read through the patch and what I can determine is that
you make sure to print an error if the user id is not a number
and change root to 0.

Thanks for pointing me at this. I assume that this will be
applied by upstream soon enough so that we can incorporate it
when they release next version. Or do you think it is important
enough to patch to the current version?

Regards,

// Ola

On Sun, Apr 02, 2006 at 12:40:25PM +0200, David Schmitt wrote:
> Package: util-vserver
> Version: 0.30.209-2
> Severity: important
> Tags: security patch upstream
>
> This is upstream bug #15996: suexec from root with an invalid
> ID runs as root.
>
> <https://savannah.nongnu.org/bugs/?func=detailitem&item_id=15996>
>
> david@zion:~$ sudo vserver buildd suexec david id
> uid=0(root) gid=0(root) groups=0(root)
> david@zion:~$ sudo vserver buildd suexec 1000 id
> uid=1000(david) gid=0(root) groups=0(root)
> david@zion:~$
>
> There is also a patch already available at
> <https://savannah.nongnu.org/patch/?func=detailitem&item_id=4966>
>
> Regards, David
>
> -- System Information:
> Debian Release: testing/unstable
>   APT prefers unstable
>   APT policy: (500, 'unstable')
> Architecture: i386 (i686)
> Shell:  /bin/sh linked to /bin/bash
> Kernel: Linux 2.6.16-1-vserver-686
> Locale: LANG=C, LC_CTYPE=de_AT.UTF-8 (charmap=UTF-8)
>
> Versions of packages util-vserver depends on:
> ii  iproute                       20051007-4 Professional tools to control the
> ii  libbeecrypt6                  4.1.2-4    open source C library of cryptogra
> ii  libc6                         2.3.6-4    GNU C Library: Shared libraries an
> ii  net-tools                     1.60-17    The NET-3 networking toolkit
>
> Versions of packages util-vserver recommends:
> ii  binutils          2.16.1cvs20060117-1uc1 The GNU assembler, linker and bina
> ii  make              3.80+3.81.rc2-1        The GNU version of the "make" util
>
> -- no debconf information
>
>

--
 --------------------- Ola Lundqvist ---------------------------
/  opal@debian.org                     Annebergsslingan 37      \
|  opal@lysator.liu.se                 654 65 KARLSTAD          |
|  +46 (0)54-10 14 30                  +46 (0)70-332 1551       |
|  <http://www.opal.dhs.org>             UIN/icq: 4912500         |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36  4FE4 18A1 B1CF 0FE5 3DD9 /
 ---------------------------------------------------------------

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Ola Lundqvist <opal@debian.org>`:

`Bug#360438`; Package `util-vserver`.
([full text](bugreport.cgi?bug=360438;msg=17), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=17), [link](#16)).

---

**Acknowledgement sent** to `Micah Anderson <micah@riseup.net>`:

Extra info received and forwarded to list. Copy sent to `Ola Lundqvist <opal@debian.org>`.
([full text](bugreport.cgi?bug=360438;msg=19), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=19), [link](#18)).

---

[Message #20](#20) received at 360438@bugs.debian.org ([full text](bugreport.cgi?bug=360438;msg=20), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=20), reply):

![](/cgi-bin/libravatar.cgi?email=micah%40riseup.net)
From: Micah Anderson <micah@riseup.net>
To: opal@debian.org, 360438@bugs.debian.org
Cc: David Schmitt <david@schmitt.edv-bus.at>
Subject: Re: Bug#360438: suexec: suexec from root with an invalid ID runs
as root
Date: Sun, 02 Apr 2006 15:30:29 -0400
```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

I've applied this patch to the upcoming release subversion repository
already.

Micah

Ola Lundqvist wrote:
> Hi
>
> I have read through the patch and what I can determine is that
> you make sure to print an error if the user id is not a number
> and change root to 0.
>
> Thanks for pointing me at this. I assume that this will be
> applied by upstream soon enough so that we can incorporate it
> when they release next version. Or do you think it is important
> enough to patch to the current version?
>
> Regards,
>
> // Ola
>
>
> On Sun, Apr 02, 2006 at 12:40:25PM +0200, David Schmitt wrote:
>> Package: util-vserver
>> Version: 0.30.209-2
>> Severity: important
>> Tags: security patch upstream
>>
>> This is upstream bug #15996: suexec from root with an invalid
>> ID runs as root.
>>
>> <https://savannah.nongnu.org/bugs/?func=detailitem&item_id=15996>
>>
>> david@zion:~$ sudo vserver buildd suexec david id
>> uid=0(root) gid=0(root) groups=0(root)
>> david@zion:~$ sudo vserver buildd suexec 1000 id
>> uid=1000(david) gid=0(root) groups=0(root)
>> david@zion:~$
>>
>> There is also a patch already available at
>> <https://savannah.nongnu.org/patch/?func=detailitem&item_id=4966>
>>
>> Regards, David
>>
>> -- System Information:
>> Debian Release: testing/unstable
>>   APT prefers unstable
>>   APT policy: (500, 'unstable')
>> Architecture: i386 (i686)
>> Shell:  /bin/sh linked to /bin/bash
>> Kernel: Linux 2.6.16-1-vserver-686
>> Locale: LANG=C, LC_CTYPE=de_AT.UTF-8 (charmap=UTF-8)
>>
>> Versions of packages util-vserver depends on:
>> ii  iproute                       20051007-4 Professional tools to control the
>> ii  libbeecrypt6                  4.1.2-4    open source C library of cryptogra
>> ii  libc6                         2.3.6-4    GNU C Library: Shared libraries an
>> ii  net-tools                     1.60-17    The NET-3 networking toolkit
>>
>> Versions of packages util-vserver recommends:
>> ii  binutils          2.16.1cvs20060117-1uc1 The GNU assembler, linker and bina
>> ii  make              3.80+3.81.rc2-1        The GNU version of the "make" util
>>
>> -- no debconf information
>>
>>
>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.2 (GNU/Linux)

iD8DBQFEMCZV9n4qXRzy1ioRAgBhAJ46ET5wQI6ZX5s0YMxNrCTgV0p7rwCfU3Mf
HSM8/HQCblw8PhH4dDSjpXY=
=UHDI
-----END PGP SIGNATURE-----

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Ola Lundqvist <opal@debian.org>`:

`Bug#360438`; Package `util-vserver`.
([full text](bugreport.cgi?bug=360438;msg=22), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=22), [link](#21)).

---

**Acknowledgement sent** to `ola@opalsys.net`:

Extra info received and forwarded to list. Copy sent to `Ola Lundqvist <opal@debian.org>`.
([full text](bugreport.cgi?bug=360438;msg=24), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=24), [link](#23)).

---

[Message #25](#25) received at 360438@bugs.debian.org ([full text](bugreport.cgi?bug=360438;msg=25), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=25), reply):

![](/cgi-bin/libravatar.cgi?email=ola%40opalsys.net)
From: Ola Lundqvist <ola@opalsys.net>
To: Micah Anderson <micah@riseup.net>,
David Schmitt <david@schmitt.edv-bus.at>
Cc: 360438@bugs.debian.org
Subject: Re: Bug#360438: suexec: suexec from root with an invalid ID runs as root
Date: Sun, 2 Apr 2006 21:40:30 +0200
```
Hi

On Sun, Apr 02, 2006 at 03:30:29PM -0400, Micah Anderson wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
>
> Hi,
>
> I've applied this patch to the upcoming release subversion repository
> already.

Good to know, thanks.

Regards,

// Ola

> Micah
>
> Ola Lundqvist wrote:
> > Hi
> >
> > I have read through the patch and what I can determine is that
> > you make sure to print an error if the user id is not a number
> > and change root to 0.
> >
> > Thanks for pointing me at this. I assume that this will be
> > applied by upstream soon enough so that we can incorporate it
> > when they release next version. Or do you think it is important
> > enough to patch to the current version?
> >
> > Regards,
> >
> > // Ola
> >
> >
> > On Sun, Apr 02, 2006 at 12:40:25PM +0200, David Schmitt wrote:
> >> Package: util-vserver
> >> Version: 0.30.209-2
> >> Severity: important
> >> Tags: security patch upstream
> >>
> >> This is upstream bug #15996: suexec from root with an invalid
> >> ID runs as root.
> >>
> >> <https://savannah.nongnu.org/bugs/?func=detailitem&item_id=15996>
> >>
> >> david@zion:~$ sudo vserver buildd suexec david id
> >> uid=0(root) gid=0(root) groups=0(root)
> >> david@zion:~$ sudo vserver buildd suexec 1000 id
> >> uid=1000(david) gid=0(root) groups=0(root)
> >> david@zion:~$
> >>
> >> There is also a patch already available at
> >> <https://savannah.nongnu.org/patch/?func=detailitem&item_id=4966>
> >>
> >> Regards, David
> >>
> >> -- System Information:
> >> Debian Release: testing/unstable
> >>   APT prefers unstable
> >>   APT policy: (500, 'unstable')
> >> Architecture: i386 (i686)
> >> Shell:  /bin/sh linked to /bin/bash
> >> Kernel: Linux 2.6.16-1-vserver-686
> >> Locale: LANG=C, LC_CTYPE=de_AT.UTF-8 (charmap=UTF-8)
> >>
> >> Versions of packages util-vserver depends on:
> >> ii  iproute                       20051007-4 Professional tools to control the
> >> ii  libbeecrypt6                  4.1.2-4    open source C library of cryptogra
> >> ii  libc6                         2.3.6-4    GNU C Library: Shared libraries an
> >> ii  net-tools                     1.60-17    The NET-3 networking toolkit
> >>
> >> Versions of packages util-vserver recommends:
> >> ii  binutils          2.16.1cvs20060117-1uc1 The GNU assembler, linker and bina
> >> ii  make              3.80+3.81.rc2-1        The GNU version of the "make" util
> >>
> >> -- no debconf information
> >>
> >>
> >
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2.2 (GNU/Linux)
>
> iD8DBQFEMCZV9n4qXRzy1ioRAgBhAJ46ET5wQI6ZX5s0YMxNrCTgV0p7rwCfU3Mf
> HSM8/HQCblw8PhH4dDSjpXY=
> =UHDI
> -----END PGP SIGNATURE-----
>

--
 --- Ola Lundqvist systemkonsult --- M Sc in IT Engineering ----
/  ola@opalsys.net                   Annebergsslingan 37        \
|  opal@debian.org                   654 65 KARLSTAD            |
|  <http://www.opal.dhs.org>           Mobile: +46 (0)70-332 1551 |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
 ---------------------------------------------------------------

```

---

**Reply sent** to `Micah Anderson <micah@debian.org>`:

You have taken responsibility.
([full text](bugreport.cgi?bug=360438;msg=27), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=27), [link](#26)).

---

**Notification sent** to `David Schmitt <david@schmitt.edv-bus.at>`:

Bug acknowledged by developer.
([full text](bugreport.cgi?bug=360438;msg=29), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=29), [link](#28)).

---

[Message #30](#30) received at 360438-close@bugs.debian.org ([full text](bugreport.cgi?bug=360438;msg=30), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=30), reply):

![](/cgi-bin/libravatar.cgi?email=micah%40debian.org)
From: Micah Anderson <micah@debian.org>
To: 360438-close@bugs.debian.org
Subject: Bug#360438: fixed in util-vserver 0.30.210-1
Date: Sun, 02 Apr 2006 19:17:06 -0700
```
Source: util-vserver
Source-Version: 0.30.210-1

We believe that the bug you reported is fixed in the latest version of
util-vserver, which is due to be installed in the Debian FTP archive:

util-vserver_0.30.210-1.diff.gz
  to pool/main/u/util-vserver/util-vserver_0.30.210-1.diff.gz
util-vserver_0.30.210-1.dsc
  to pool/main/u/util-vserver/util-vserver_0.30.210-1.dsc
util-vserver_0.30.210-1_i386.deb
  to pool/main/u/util-vserver/util-vserver_0.30.210-1_i386.deb
util-vserver_0.30.210.orig.tar.gz
  to pool/main/u/util-vserver/util-vserver_0.30.210.orig.tar.gz

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 360438@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Micah Anderson <micah@debian.org> (supplier of updated util-vserver package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.7
Date: Thu,  2 Feb 2006 09:45:30 -0500
Source: util-vserver
Binary: util-vserver
Architecture: source i386
Version: 0.30.210-1
Distribution: unstable
Urgency: low
Maintainer: Ola Lundqvist <opal@debian.org>
Changed-By: Micah Anderson <micah@debian.org>
Description:
 util-vserver - tools for Virtual private servers and context switching
Closes: [307980](bugreport.cgi?bug=307980) [327577](bugreport.cgi?bug=327577) [343277](bugreport.cgi?bug=343277) [348234](bugreport.cgi?bug=348234) [351556](bugreport.cgi?bug=351556) [356417](bugreport.cgi?bug=356417) [360438](bugreport.cgi?bug=360438)
Changes:
 util-vserver (0.30.210-1) unstable; urgency=low
 .
   * New upstream release (Closes: #[343277](bugreport.cgi?bug=343277), #[307980](bugreport.cgi?bug=307980))
   * Replaced upstream init scripts with a single init script that
     uses /etc/defaults and attempts to set the chroot barrier on start
   * Added debconf templates to ask if vservers should be controlled by boot
   * Added debconf templates on purge to ask about removing the entire
     /etc/vservers directory
   * Fixed things so we clean up after ourselves on uninstall (Closes: #[348234](bugreport.cgi?bug=348234))
   * Fixed start-vservers improper temp file cleanup (Closes: #[351556](bugreport.cgi?bug=351556))
   * Added patch to fix s390 clone syscall reversal (Closes: #[356417](bugreport.cgi?bug=356417))
   * Change name of testme scripts to be consistant with upstream
   * Add vschedcalc example script for calculating token buckets
   * Add patch to fix suexec from host with an invalid ID running as root
     (Closes: #[360438](bugreport.cgi?bug=360438))
   * Add patch to fix vattribute bcaps not being reset
   * Add patch to make chcontext behave as expected with --secure
   * Add patch to add vserver delete option
   * Moved make from a Recommends to a Depends (Closes: #[327577](bugreport.cgi?bug=327577))
   * Updated syscall-alternatives.h to -shiny10 patch
Files:
 9996624a0c286740fc04df7d20659e99 833 net optional util-vserver_0.30.210-1.dsc
 b1e902a2d592b2b7d8d1b2a5b3106f5d 780113 net optional util-vserver_0.30.210.orig.tar.gz
 c870f50ec6ba3ed3bd00171b7a643f49 31562 net optional util-vserver_0.30.210-1.diff.gz
 8211365a437856a3bf3ffaa54f5fd410 388562 net optional util-vserver_0.30.210-1_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.2 (GNU/Linux)

iD8DBQFEMISR9n4qXRzy1ioRAsXwAJ48z/GZEpEiEk1ImE3lVDSIsIHY0ACfXPbz
BjoQUHnGfn/weEYo2UjhycI=
=teut
-----END PGP SIGNATURE-----

```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Mon, 25 Jun 2007 06:52:50 GMT) ([full text](bugreport.cgi?bug=360438;msg=32), [mbox](bugreport.cgi?bug=360438;mbox=yes;msg=32), [link](#31)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=360438).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 07:15:02 2025;
Machine Name:
bembo

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from savannah.nongnu.org_3d8a1d75_20250125_071504.html ===


* [![Back to Savannah Homepage](/images/Savannah.theme/floating.png)](/)
* Not Logged in
* [Login](/account/login.php?uri=%2Fpatch%2F%3Ffunc%3Ddetailitem%26item_id%3D4966 "Login page - you must have registered an account first")
* [New User](/account/register.php "Account registration form")
* This Page
* [Language](/i18n.php?lang_uri=%2Fpatch%2F%3Ffunc%3Ddetailitem%26item_id%3D4966 "Choose website language")
* [Clean Reload](/patch/index.php?reload=1&func%3Ddetailitem%26item_id%3D4966 "Reload the page without risk of reposting data")
* Search
* Area to search in
  Groups
  People
  Support
  Bugs
  Tasks
  Patches
* Hosted Projects
* [Hosting requirements](/register/requirements.php)
* [Register New Project](/register/ "Register your project at Savannah")
* [Full List](/search/index.php?type_of_search=soft&words=%%% "Browse the full list of hosted projects")
* [Contributors Wanted](/people/ "Browse the list of request for contributions")
* [Statistics](/stats/ "Browse statistics about Savannah")
* Site Help
* [User Docs: FAQ](/maintenance/FrontPage/)
* [User Docs: In Depth Guide](/maintenance/back-page/ "In-depth Documentation dedicated to any users, including group admins")
* [Get Support](/support/?group=administration "Get help from the Admins of Savannah, when documentation is not enough")
* [Contact Savannah](/contact.php "Contact address of Savannah Admins")
* GNU Project
* [Help GNU](//www.gnu.org/help/help.html)
* [All GNU Packages](//www.gnu.org/software/software.html)
* [Dev Resources](//www.gnu.org/software/devel.html)
* [License List](//www.gnu.org/licenses/license-list.html)
* [GNU Mirrors](//www.gnu.org/prep/ftp.html)
* [![Support freedom](/images/Savannah.theme/thin-image.png)

  Help us protect your freedom and the rights of computer
  users everywhere by becoming a member of the FSF.

  **Join Now!**](//www.fsf.org/associate/support_freedom/join_fsf?referrer=2442)
* Free Software Foundation
* [Coming Events](//www.fsf.org/events/)
* [Free Software Directory](//www.fsf.org/directory/)
* [Cryptographic software legal notice](//savannah.gnu.org/maintenance/SavannahCryptographicRestrictions)
* [Copyright infringement notification](//www.fsf.org/about/dmca-notice)
* Related Forges
* [GNU Savannah](//savannah.gnu.org/)
* [Puszcza](//puszcza.gnu.org.ua/)

# patchutil-vserver - Patches: patch #4966, Better handling of vcontext's...

 Group

* [Main](/projects/util-vserver/ "Group main page at Savannah")
  + [Main](/projects/util-vserver/)
  + [View members](/project/memberlist.php?group=util-vserver)
  + [Search](/project/search.php?group=util-vserver)
* [Homepage](http://www.nongnu.org/util-vserver "Browse group home page (outside of Savane)")
* [Download](/files/?group=util-vserver "Visit download area: files released")
* [Source code](http://svn.linux-vserver.org/svn/util-vserver/ "Source code management")
  + [Use CVS](http://svn.linux-vserver.org/svn/util-vserver/ "CVS Repository")
  + [Browse CVS repository](http://svn.linux-vserver.org/projects/util-vserver/browser)
  + [Browse Web Pages Repository](http://web.cvs.savannah.nongnu.org/viewcvs/?root=util-vserver)
* [Bugs](/bugs/?group=util-vserver "Bug Tracker: report, search and track bugs")
  + ~~Submit new~~
  + [Browse](/bugs/?group=util-vserver)
  + [Reset to open](/bugs/?group=util-vserver&func=browse&set=open)
  + [Digest](/bugs/?group=util-vserver&func=digest)
  + [Dependencies](/bugs/dependencies.php?group=util-vserver)
  + ~~Export~~
  + [Get statistics](/bugs/reporting.php?group=util-vserver)
  + [Search](/bugs/?group=util-vserver&func=search)
* [Tasks](/task/?group=util-vserver "Task Manager: post, search and manage tasks")
  + ~~Submit new~~
  + [Browse](/task/?group=util-vserver)
  + [Reset to open](/task/?group=util-vserver&func=browse&set=open)
  + [Digest](/task/?group=util-vserver&func=digest)
  + [Dependencies](/task/dependencies.php?group=util-vserver)
  + ~~Export~~
  + [Get statistics](/task/reporting.php?group=util-vserver)
  + [Search](/task/?group=util-vserver&func=search)
* [Patches](/patch/?group=util-vserver "Patch Manager: post, search and manage patches")
  + ~~Submit new~~
  + [Browse](/patch/?group=util-vserver)
  + [Reset to open](/patch/?group=util-vserver&func=browse&set=open)
  + [Digest](/patch/?group=util-vserver&func=digest)
  + [Dependencies](/patch/dependencies.php?group=util-vserver)
  + ~~Export~~
  + [Get statistics](/patch/reporting.php?group=util-vserver)
  + [Search](/patch/?group=util-vserver&func=search)
* [News](/news/?group=util-vserver "Read latest News, post News")
  + [Browse](/news/?group=util-vserver)
  + [Atom feed](/news/atom.php?group=util-vserver)
  + ~~Submit~~
  + ~~Manage~~

You are not allowed to post comments on this tracker with your current
authentication level.

# *[patch #4966](?4966)*: Better handling of vcontext's --uid option

| Submitter: | [Daniel Hokka Zakrisson <daniel\_hozac>](/users/daniel_hozac) |  | |
| --- | --- | --- | --- |
| Submitted: | Sat 11 Mar 2006 01:43:15 PM UTC |  | |
|  |  |  | |
|  | | | |
| Category: | Core-Utilities | Priority: | 3 - Low |
| Status: | Done | Privacy: | Public |
| Assigned to: | daniel\_hozac | Open/Closed: | Closed |
| Release: | alpha |

## [Discussion](#discussion)

|
|  |
| [Tue 11 Apr 2006 05:22:08 PM UTC, comment #1:](#comment1)   The previous patch was missing returns in the failure branches, causing segfaults when called with incorrect usernames. It was also missing a hunk for the chkconfig command in scripts/vserver.  Thanks to dearaujo on IRC for finding the problems. | [Daniel Hokka Zakrisson <daniel\_hozac>](/users/daniel_hozac) Group Member |
| [Sat 11 Mar 2006 01:43:15 PM UTC, **original submission:**](#comment0)   This patch makes vcontext accept usernames in addition to user ids, and it sets the groups accordingly for usernames. It also fixes *[bug #15996](/bugs/?15996)* by erroring if it's not a number nor a valid username. | [Daniel Hokka Zakrisson <daniel\_hozac>](/users/daniel_hozac) Group Member |

## [Attached Files](#attached)

(Note: upload size limit is set to 16384 kB, after insertion of
the required escape characters.)

Attached Files
[file #9765:  util-vserver-0.30.210-vcontext-uid.patch](https://file.savannah.nongnu.org/file/util-vserver-0.30.210-vcontext-uid.patch?file_id=9765) added by [daniel\_hozac](/users/daniel_hozac) (5KiB - text/x-patch - Revision 2)
[file #9626:  util-vserver-0.30.210-vcontext-uid.patch](https://file.savannah.nongnu.org/file/util-vserver-0.30.210-vcontext-uid.patch?file_id=9626) added by [daniel\_hozac](/users/daniel_hozac) (4KiB - application/octet-stream - The patch)

## [Dependencies](#dependencies)

Depends on the following items: None found

Items that depend on this one: None found

## [Mail Notification Carbon-Copy List](#cc)

CC list is empty
## [Votes](#votes)

There are 0 votes so far. Votes easily highlight which items people would like to see resolved
in priority, independently of the priority of the item set by tracker
managers.

## [History](#history)

Follow 6 latest changes.

| Date | Changed by | Updated Field | Previous Value | => | Replaced by |
| --- | --- | --- | --- | --- | --- |
| 2006-09-17 | [daniel\_hozac](/users/daniel_hozac) | Status | None |  | Done |
|  |  | Assigned to | None |  | daniel\_hozac |
|  |  | Open/Closed | Open |  | Closed |
| 2006-04-12 | [hacim](/users/hacim) | Carbon-Copy | - |  | Added -email is unavailable- |
| 2006-04-11 | [daniel\_hozac](/users/daniel_hozac) | Attached File | - |  | Added util-vserver-0.30.210-vcontext-uid.patch, #9765 |
| 2006-03-11 | [daniel\_hozac](/users/daniel_hozac) | Attached File | - |  | Added util-vserver-0.30.210-vcontext-uid.patch, #6035 |

[![Back to the top](/images/Savannah.theme/arrows/top.orig.png)](#top)

Copyright © 2025 Free Software Foundation, Inc.

Verbatim copying and distribution of this entire article
is permitted in any medium, provided this notice is preserved.

The [Levitating,
Meditating, Flute-playing Gnu](//www.gnu.org/graphics/meditate.html) logo is a GNU GPL'ed image provided
by the Nevrax Design Team.

[Page source code](//git.savannah.nongnu.org/cgit/administration/savane.git/plain//frontend/php/bugs/index.php?id=8e7775633ba4c5f6363553bac86768aec1549efa)

Powered by Savane 3.14-8e77.
[Corresponding source code](https://savannah.nongnu.org/source/savane-8e7775633ba4c5f6363553bac86768aec1549efa.tar.gz)



=== Content from savannah.nongnu.org_7ffa6ee7_20250125_071503.html ===


* [![Back to Savannah Homepage](/images/Savannah.theme/floating.png)](/)
* Not Logged in
* [Login](/account/login.php?uri=%2Fbugs%2F%3Ffunc%3Ddetailitem%26item_id%3D15996 "Login page - you must have registered an account first")
* [New User](/account/register.php "Account registration form")
* This Page
* [Language](/i18n.php?lang_uri=%2Fbugs%2F%3Ffunc%3Ddetailitem%26item_id%3D15996 "Choose website language")
* [Clean Reload](/bugs/index.php?reload=1&func%3Ddetailitem%26item_id%3D15996 "Reload the page without risk of reposting data")
* Search
* Area to search in
  Groups
  People
  Support
  Bugs
  Tasks
  Patches
* Hosted Projects
* [Hosting requirements](/register/requirements.php)
* [Register New Project](/register/ "Register your project at Savannah")
* [Full List](/search/index.php?type_of_search=soft&words=%%% "Browse the full list of hosted projects")
* [Contributors Wanted](/people/ "Browse the list of request for contributions")
* [Statistics](/stats/ "Browse statistics about Savannah")
* Site Help
* [User Docs: FAQ](/maintenance/FrontPage/)
* [User Docs: In Depth Guide](/maintenance/back-page/ "In-depth Documentation dedicated to any users, including group admins")
* [Get Support](/support/?group=administration "Get help from the Admins of Savannah, when documentation is not enough")
* [Contact Savannah](/contact.php "Contact address of Savannah Admins")
* GNU Project
* [Help GNU](//www.gnu.org/help/help.html)
* [All GNU Packages](//www.gnu.org/software/software.html)
* [Dev Resources](//www.gnu.org/software/devel.html)
* [License List](//www.gnu.org/licenses/license-list.html)
* [GNU Mirrors](//www.gnu.org/prep/ftp.html)
* [![Support freedom](/images/Savannah.theme/thin-image.png)

  Help us protect your freedom and the rights of computer
  users everywhere by becoming a member of the FSF.

  **Join Now!**](//www.fsf.org/associate/support_freedom/join_fsf?referrer=2442)
* Free Software Foundation
* [Coming Events](//www.fsf.org/events/)
* [Free Software Directory](//www.fsf.org/directory/)
* [Cryptographic software legal notice](//savannah.gnu.org/maintenance/SavannahCryptographicRestrictions)
* [Copyright infringement notification](//www.fsf.org/about/dmca-notice)
* Related Forges
* [GNU Savannah](//savannah.gnu.org/)
* [Puszcza](//puszcza.gnu.org.ua/)

# bugutil-vserver - Bugs: bug #15996, suexec from root with an invalid...

 Group

* [Main](/projects/util-vserver/ "Group main page at Savannah")
  + [Main](/projects/util-vserver/)
  + [View members](/project/memberlist.php?group=util-vserver)
  + [Search](/project/search.php?group=util-vserver)
* [Homepage](http://www.nongnu.org/util-vserver "Browse group home page (outside of Savane)")
* [Download](/files/?group=util-vserver "Visit download area: files released")
* [Source code](http://svn.linux-vserver.org/svn/util-vserver/ "Source code management")
  + [Use CVS](http://svn.linux-vserver.org/svn/util-vserver/ "CVS Repository")
  + [Browse CVS repository](http://svn.linux-vserver.org/projects/util-vserver/browser)
  + [Browse Web Pages Repository](http://web.cvs.savannah.nongnu.org/viewcvs/?root=util-vserver)
* [Bugs](/bugs/?group=util-vserver "Bug Tracker: report, search and track bugs")
  + ~~Submit new~~
  + [Browse](/bugs/?group=util-vserver)
  + [Reset to open](/bugs/?group=util-vserver&func=browse&set=open)
  + [Digest](/bugs/?group=util-vserver&func=digest)
  + [Dependencies](/bugs/dependencies.php?group=util-vserver)
  + ~~Export~~
  + [Get statistics](/bugs/reporting.php?group=util-vserver)
  + [Search](/bugs/?group=util-vserver&func=search)
* [Tasks](/task/?group=util-vserver "Task Manager: post, search and manage tasks")
  + ~~Submit new~~
  + [Browse](/task/?group=util-vserver)
  + [Reset to open](/task/?group=util-vserver&func=browse&set=open)
  + [Digest](/task/?group=util-vserver&func=digest)
  + [Dependencies](/task/dependencies.php?group=util-vserver)
  + ~~Export~~
  + [Get statistics](/task/reporting.php?group=util-vserver)
  + [Search](/task/?group=util-vserver&func=search)
* [Patches](/patch/?group=util-vserver "Patch Manager: post, search and manage patches")
  + ~~Submit new~~
  + [Browse](/patch/?group=util-vserver)
  + [Reset to open](/patch/?group=util-vserver&func=browse&set=open)
  + [Digest](/patch/?group=util-vserver&func=digest)
  + [Dependencies](/patch/dependencies.php?group=util-vserver)
  + ~~Export~~
  + [Get statistics](/patch/reporting.php?group=util-vserver)
  + [Search](/patch/?group=util-vserver&func=search)
* [News](/news/?group=util-vserver "Read latest News, post News")
  + [Browse](/news/?group=util-vserver)
  + [Atom feed](/news/atom.php?group=util-vserver)
  + ~~Submit~~
  + ~~Manage~~

You are not allowed to post comments on this tracker with your current
authentication level.

# *[bug #15996](?15996)*: suexec from root with an invalid ID runs as root

| Submitter: | [John Muller <bgodot>](/users/bgodot) |  | |
| --- | --- | --- | --- |
| Submitted: | Sun 05 Mar 2006 02:42:28 AM UTC |  | |
|  |  |  | |
|  | | | |
| Category: | None | Severity: | 3 - Normal |
| Item Group: | None | Status: | Fixed |
| Privacy: | Public | Assigned to: | daniel\_hozac |
| Open/Closed: | Closed | Component Version: | stable |
| Release: | 0.30.209 |

## [Discussion](#discussion)

|
|  |
| [Sun 17 Sep 2006 10:42:20 PM UTC, comment #1:](#comment1)   Thanks, this should be fixed in SVN. | [Daniel Hokka Zakrisson <daniel\_hozac>](/users/daniel_hozac) Group Member |
| [Sun 05 Mar 2006 02:42:28 AM UTC, **original submission:**](#comment0)   I tried to use "vserver [servername] suexec [username] [command]" in my startup scripts, but instead of running as the user I expected, the process ran as root within the vserver.   I learned that suexec takes a userid Number, instead of a username String. Since the usual result of pushing alphabetical characters through a convert-to-number function is 0, which is the userid of root...   Invalid parameters should al least return an error, not run with extra priviledges. =) | [John Muller <bgodot>](/users/bgodot) |

## [Attached Files](#attached)

(Note: upload size limit is set to 16384 kB, after insertion of
the required escape characters.)

No files currently attached

## [Dependencies](#dependencies)

Depends on the following items: None found

Items that depend on this one: None found

## [Mail Notification Carbon-Copy List](#cc)

CC list is empty
## [Votes](#votes)

There are 0 votes so far. Votes easily highlight which items people would like to see resolved
in priority, independently of the priority of the item set by tracker
managers.

## [History](#history)

Follow 3 latest changes.

| Date | Changed by | Updated Field | Previous Value | => | Replaced by |
| --- | --- | --- | --- | --- | --- |
| 2006-09-17 | [daniel\_hozac](/users/daniel_hozac) | Status | None |  | Fixed |
|  |  | Assigned to | None |  | daniel\_hozac |
|  |  | Open/Closed | Open |  | Closed |

[![Back to the top](/images/Savannah.theme/arrows/top.orig.png)](#top)

Copyright © 2025 Free Software Foundation, Inc.

Verbatim copying and distribution of this entire article
is permitted in any medium, provided this notice is preserved.

The [Levitating,
Meditating, Flute-playing Gnu](//www.gnu.org/graphics/meditate.html) logo is a GNU GPL'ed image provided
by the Nevrax Design Team.

[Page source code](//git.savannah.nongnu.org/cgit/administration/savane.git/plain//frontend/php/bugs/index.php?id=8e7775633ba4c5f6363553bac86768aec1549efa)

Powered by Savane 3.14-8e77.
[Corresponding source code](https://savannah.nongnu.org/source/savane-8e7775633ba4c5f6363553bac86768aec1549efa.tar.gz)


