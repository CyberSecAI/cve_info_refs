=== Content from www.ibm.com_12245030_20250119_120614.html ===


[IBM Support](https://www.ibm.com/mysupport/)

##

No results were found for your search query.

---

##### **Tips**

To return expected results, you can:

* **Reduce the number of search terms.** Each term you use focuses the search further.
* **Check your spelling.** A single misspelled or incorrectly typed term can change your result.
* **Try substituting synonyms for your original terms.** For example, instead of searching for "java classes", try "java training"
* **Did you search for an IBM acquired or sold product ?** If so, follow the appropriate link below to find the content you need.

Our apologies

Search results are not available at this time. Please try again later or use one of the other support options on this page.

# Security Bulletin: Passwords stored in reversible manner in Security Key Lifecycle Manager (SKLM) (CVE-2020-4568)

### Security Bulletin

## Summary

The ssl.client.props in WebSphere Application Server uses the weak WAS XOR protection mechanism for keystore and truststore passwords. Security Key Lifecycle Manager v4.0 adds code to encrypt these instead. There are some manual steps required to make use of the new capability in v4.0.

## Vulnerability Details

**CVEID:** [CVE-2020-4568](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-4568)

## Affected Products and Versions

| Affected Product(s) | Version(s) |
| --- | --- |
| IBM Security Key Lifecycle Manager | 3.0.1 |
| IBM Security Key Lifecycle Manager | 3.0 |
| IBM Security Key Lifecycle Manager | 4.0 |

## Remediation/Fixes

| *Product* | *Remediation/First Fix* |
| --- | --- |
| IBM Security Key Lifecycle Manager | SKLM v4.0 |

Install Security Key Lifecycle Manager v4.0 and perform the following steps:

1. Stop WebSphere Application Server.

2. Take a backup of the following files:

Windows:

1. <WAS\_HOME>\bin\stopServer.bat
2. <WAS\_HOME>\bin\serverStatus.bat
3. <WAS\_HOME>\bin\wsadmin.bat

Linux:

1. <WAS\_HOME>/bin/stopServer\_org.sh
2. <WAS\_HOME>/bin/serverStatus.sh
3. <WAS\_HOME>/bin/wsadmin\_org.sh

3. Complete these steps for each backed-up file mentioned in above step based on the operating system:

Windows:

a. Open the following file **stopServer.bat** and **serverStatus.bat** in edit mode and locate the following text:
```

>> %TMPJAVAPROPFILE% echo com.ibm.ffdc.log=%FFDCLOG%
```

b. On a new line after the located text, add the following lines:

```

>> %TMPJAVAPROPFILE% echo com.ibm.wsspi.security.crypto.customPasswordEncryptionEnabled=true
>> %TMPJAVAPROPFILE% echo com.ibm.wsspi.security.crypto.customPasswordEncryptionClass=com.ibm.tklm.obfuscation.handlers.SKLMWASPasswordEncryptionHandler
```

c. Save the file and close it.

d. Open the **wsadmin.bat** in edit mode and locate the following text:

>> %TMPJAVAPROPFILE% echo com.ibm.ws.ffdc.log=%USER\_INSTALL\_ROOT%/logs/ffdc/

e. On a new line after the located text, add the following lines:

>> %TMPJAVAPROPFILE% echo com.ibm.wsspi.security.crypto.customPasswordEncryptionEnabled=true

>> %TMPJAVAPROPFILE% echo com.ibm.wsspi.security.crypto.customPasswordEncryptionClass=com.ibm.tklm.obfuscation.handlers.SKLMWASPasswordEncryptionHandler

f. Save the file and close it.

Linux:

a. Open the following file **stopServer\_org.sh** and **serverStatus.sh** in edit mode and locate the following text:

D\_ARGS="-Dws.ext.dirs

b. At the end of above line after the located text, add the following text:

-Dcom.ibm.wsspi.security.crypto.customPasswordEncryptionClass=com.ibm.tklm.obfuscation.handlers.SKLMWASPasswordEncryptionHandler"

Make sure you remove the double quotes in the located text above and add the new text after space.

c. Save the file and close it.

d. Open the following file **wsadmin\_org.sh** in edit mode and locate the following text:

-Dcom.ibm.ffdc.log="${USER\_INSTALL\_ROOT}/logs/ffdc/" \

e. On a new line after the located text, add the following lines:

-Dcom.ibm.wsspi.security.crypto.customPasswordEncryptionEnabled=true \

-Dcom.ibm.wsspi.security.crypto.customPasswordEncryptionClass=com.ibm.tklm.obfuscation.handlers.SKLMWASPasswordEncryptionHandler \

f. Save the file and close it.

4. Navigate to the bin directory under <WAS\_HOME>.

Windows: Open the command prompt and change directory to `<WAS_HOME>\bin` directory.

  Linux: Open the terminal and change directory to `<WAS_HOME>/bin` directory.

5. Run the following command:

Windows:

*PropFilePasswordEncoder\_ce.bat "<WAS\_HOME>\profiles\KLMProfile\properties\ssl.client.props" "com.ibm.ssl.keyStorePassword,com.ibm.ssl.trustStorePassword"*

Example:

```

PropFilePasswordEncoder_ce.bat "c:\Program Files\IBM\WebSphere\AppServer\profiles\KLMProfile\properties\ssl.client.props"  "com.ibm.ssl.keyStorePassword,com.ibm.ssl.trustStorePassword"
```

where, WAS\_HOME = C:\Program Files\IBM\WebSphere\AppServer

Linux:

*PropFilePasswordEncoder\_ce.sh "<WAS\_HOME>/profiles/KLMProfile/properties/ssl.client.props" "com.ibm.ssl.keyStorePassword,com.ibm.ssl.trustStorePassword"*

Example:

```

PropFilePasswordEncoder_ce.sh "/opt/IBM/WebSphere/AppServer/profiles/KLMProfile/properties/ssl.client.props"   "com.ibm.ssl.keyStorePassword,com.ibm.ssl.trustStorePassword"
```

where, WAS\_HOME = /opt/IBM/WebSphere/AppServer

6. Start WebSphere AppServer Server.

**Note - A future release of the product will automatically handle these steps during installation.**

## Workarounds and Mitigations

None

## Get Notified about Future Security Bulletins

Subscribe to [My Notifications](https://www.ibm.com/support/pages/node/718119) to be notified of important product support alerts like this.

### References

[Complete CVSS v3 Guide](http://www.first.org/cvss/user-guide "Link resides outside of ibm.com")

[On-line Calculator v3](http://www.first.org/cvss/calculator/3.0 "Link resides outside of ibm.com")

Off

## Related Information

[IBM Secure Engineering Web Portal](http://www.ibm.com/security/secure-engineering/bulletins.html)

[IBM Product Security Incident Response Blog](http://www.ibm.com/blogs/psirt)

## Acknowledgement

Jonathan Fitz-Gerald, John Zuccato, Rodney Ryan, Chris Shepherd, Nathan Roane, Kamil Sarbinowski, Vince Dragnea, Troy Fisher and Elaheh Samani from IBM X-Force Ethical Hacking Team.

## Change History

06 Nov 2020: Initial Publication

\*The CVSS Environment Score is customer environment specific and will ultimately impact the Overall CVSS Score. Customers can evaluate the impact of this vulnerability in their environments by accessing the links in the Reference section of this Security Bulletin.

## Disclaimer

Review the [IBM security bulletin disclaimer and definitions](https://www.ibm.com/support/pages/node/6610583#disclaimer) regarding your responsibilities for assessing potential impact of security vulnerabilities to your environment.

## Document Location

Worldwide

[{"Business Unit":{"code":"BU059","label":"IBM Software w\/o TPS"},"Product":{"code":"SSWPVP","label":"IBM Security Key Lifecycle Manager"},"Component":"","Platform":[{"code":"PF016","label":"Linux"},{"code":"PF002","label":"AIX"},{"code":"PF033","label":"Windows"}],"Version":"3.0, 3.0.1, 4.0","Edition":"","Line of Business":{"code":"LOB24","label":"Security Software"}}]

## Was this topic helpful?

Not usefulUseful

### Document Information

**Modified date:**

25 November 2020

## UID

ibm16365305

Page Feedback

## Share your feedback

### Need support?

* Submit feedback to IBM Support
* 1-800-IBM-7378 (**USA**)
* [Directory of worldwide contacts](//www.ibm.com/planetwide/index.html#region)


