=== Content from github.com_4d3cd42c_20250119_130007.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FNLnetLabs%2Froutinator%2Freleases%2Ftag%2Fv0.8.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FNLnetLabs%2Froutinator%2Freleases%2Ftag%2Fv0.8.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=NLnetLabs%2Froutinator)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[NLnetLabs](/NLnetLabs)
/
**[routinator](/NLnetLabs/routinator)**
Public

* [Notifications](/login?return_to=%2FNLnetLabs%2Froutinator) You must be signed in to change notification settings
* [Fork
  72](/login?return_to=%2FNLnetLabs%2Froutinator)
* [Star
   480](/login?return_to=%2FNLnetLabs%2Froutinator)

* [Code](/NLnetLabs/routinator/tree/v0.8.0)
* [Issues
  23](/NLnetLabs/routinator/issues)
* [Pull requests
  4](/NLnetLabs/routinator/pulls)
* [Actions](/NLnetLabs/routinator/actions)
* [Security](/NLnetLabs/routinator/security)
* [Insights](/NLnetLabs/routinator/pulse)

Additional navigation options

* [Code](/NLnetLabs/routinator/tree/v0.8.0)
* [Issues](/NLnetLabs/routinator/issues)
* [Pull requests](/NLnetLabs/routinator/pulls)
* [Actions](/NLnetLabs/routinator/actions)
* [Security](/NLnetLabs/routinator/security)
* [Insights](/NLnetLabs/routinator/pulse)

1. [Releases](/NLnetLabs/routinator/releases)
2. [v0.8.0](/NLnetLabs/routinator/releases/tag/v0.8.0)

# 0.8.0 ‘Strikes and Gutters, Ups and Downs’

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/NLnetLabs/routinator/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v0.8.0)

 Loading

[View all tags](/NLnetLabs/routinator/tags)

![@partim](https://avatars.githubusercontent.com/u/1318494?s=40&v=4)
[partim](/partim)
released this
19 Oct 11:24

[v0.8.0](/NLnetLabs/routinator/tree/v0.8.0)

[`f566242`](/NLnetLabs/routinator/commit/f566242734574a2392a7a151bdea9ba033a6698f)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

Breaking Changes

* Validation now follows the rules suggested by [draft-ietf-sidrops-6486bis](https://datatracker.ietf.org/doc/draft-ietf-sidrops-6486bis/): Any invalid object mentioned on the manifest will lead to the issuing CA and all its objects being rejected. However, unlike suggested by the draft, Routinator currently will not fall back to cached older versions of the CA’s objects that may still be valid. In addition, unknown RPKI object types are currently accepted with a warning logged. This behaviour can be changed via the `unknown-types` policy option. ([#371](https://github.com/NLnetLabs/routinator/pull/371), [#401](https://github.com/NLnetLabs/routinator/pull/401))
* Similarly, CRL handling has been tightened significantly. Each CA must now have exactly one CRL which must be the one stated in the manifest’s EE certificate. Any violation will lead to the whole CA being rejected with the same consequences as above. ([#397](https://github.com/NLnetLabs/routinator/pull/397))
* The default for dealing with stale objects has been changed to `reject` in accordance with the same draft. ([#387](https://github.com/NLnetLabs/routinator/pull/387))
* Parsing of local exception files is now more strict in accordance with [RFC 8416](https://tools.ietf.org/html/rfc8416). Any additional member in the JSON objects will lead to an error. However, error reporting has been greatly improved and now the line and column of an error will be indicated. ([#372](https://github.com/NLnetLabs/routinator/pull/372))
* The alias `--allow-dubios-hosts` for the correctly spelled option has been removed. ([#384](https://github.com/NLnetLabs/routinator/pull/384))
* The minimal supported Rust version is now 1.42.0.

New

* All VRPs overlapping with resources from rejected CAs – dubbed ‘unsafe VRPs’ can filtered via the new `unsafe-vrps` option. Doing so will avoid situations were routes become RPKI invalid if their VRPs are split over multiple CAs or there are less specific ROAs. By default, unsafe VRPs are only warned about. ([#377](https://github.com/NLnetLabs/routinator/pull/377), [#400](https://github.com/NLnetLabs/routinator/pull/400))
* New metrics for the VRPs produced and filtered on the various TALs. ([#377](https://github.com/NLnetLabs/routinator/pull/377))
* The logging output of the latest validation run is now available via the HTTP service’s `/log` endpoint. ([#396](https://github.com/NLnetLabs/routinator/pull/396))
* TCP keep-alive is now supported and enabled by default on RTR connections as suggested by [RFC 8210](https://tools.ietf.org/html/rfc8210). It can be disabled and its idle time changed from the default 60 seconds via the new `rtr-tcp-keepalive` command line and config file option. ([#390](https://github.com/NLnetLabs/routinator/pull/390))
* The `pid-file`, `working-dir`, `chroot`, `user`, and `group` config file and server command options now also work without the `--detach` command line option. ([#392](https://github.com/NLnetLabs/routinator/pull/392))
* The `init` command will now change ownership of the cache directory if the `user` and `group` options are set via config file or command line options. ([#392](https://github.com/NLnetLabs/routinator/pull/392))
* Irrelevant log messages from libraries are now also filtered when using syslog logging. ([#385](https://github.com/NLnetLabs/routinator/pull/385))
* Release builds will now abort on panic, i.e., when an unexpected internal condition is detected. This ensures that there won’t be a

  Routinator in a coma. ([#394](https://github.com/NLnetLabs/routinator/pull/394))
* The feature `rta` enables the new command `rta` for validating Resource Tagged Assertions as described in [draft-michaelson-rpki-rta](https://datatracker.ietf.org/doc/html/draft-michaelson-rpki-rta). This feature is not enabled by default and needs to be activated by adding the option `--features rta` to the Cargo build command.

Bug Fixes

* Update start and end times will not change between consecutive metrics reports any more. ([#389](https://github.com/NLnetLabs/routinator/pull/389))
* Local exceptions will now be loaded before starting a validation run both in vrps and server mode instead of discarding the run after it finished when loading fails. In server mode, we now wait 10 seconds after loading local exceptions fails and try again instead of repeatedly starting validation runs and discarding them. ([594186c](https://github.com/NLnetLabs/routinator/commit/594186cc2e1521a258f960c4196131e29f6cb1f9))
* EE certificates encountered in the repository are now validated as router certificates rather than regular RPKI EE certificates. ([#398](https://github.com/NLnetLabs/routinator/pull/398))

Other Changes

* Logging has been cleaned up. The meaning of the four log levels is now better defined – see the man page – and all log output has been reassigned accordingly. ([#396](https://github.com/NLnetLabs/routinator/pull/396))

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_261bf177_20250119_130003.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FNLnetLabs%2Froutinator%2Fissues%2F319)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FNLnetLabs%2Froutinator%2Fissues%2F319)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=NLnetLabs%2Froutinator)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[NLnetLabs](/NLnetLabs)
/
**[routinator](/NLnetLabs/routinator)**
Public

* [Notifications](/login?return_to=%2FNLnetLabs%2Froutinator) You must be signed in to change notification settings
* [Fork
  72](/login?return_to=%2FNLnetLabs%2Froutinator)
* [Star
   480](/login?return_to=%2FNLnetLabs%2Froutinator)

* [Code](/NLnetLabs/routinator)
* [Issues
  23](/NLnetLabs/routinator/issues)
* [Pull requests
  4](/NLnetLabs/routinator/pulls)
* [Actions](/NLnetLabs/routinator/actions)
* [Security](/NLnetLabs/routinator/security)
* [Insights](/NLnetLabs/routinator/pulse)

Additional navigation options

* [Code](/NLnetLabs/routinator)
* [Issues](/NLnetLabs/routinator/issues)
* [Pull requests](/NLnetLabs/routinator/pulls)
* [Actions](/NLnetLabs/routinator/actions)
* [Security](/NLnetLabs/routinator/security)
* [Insights](/NLnetLabs/routinator/pulse)

# Missing files don't result in a Manifest/PP being considered invalid #319

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Missing files don't result in a Manifest/PP being considered invalid](#top)#319Copy link![@job](https://avatars.githubusercontent.com/u/153816?u=94daa90cdfb442be3ed7a7b37752a58d58d0efd9&v=4&size=80)
## Description

![@job](https://avatars.githubusercontent.com/u/153816?u=94daa90cdfb442be3ed7a7b37752a58d58d0efd9&v=4&size=48)[job](https://github.com/job)opened [on Apr 28, 2020](https://github.com/NLnetLabs/routinator/issues/319#issue-608383235)

In a MITM scenario where an attacker intercepts and manipulates the rsync channel (for example strategically withholding certain `.roa` files from the view of the validator being attacked), the resulting set of VRPs will be incomplete and can cause severe operational issues.

When a manifest is valid (manifest is parsable, CRL exists is valid (also not expired), and manifest is signed with keys not revoked by the CRL), and references files which do not exist in the repository at hand, the publication point should be considered compromised.

So in the case of APNIC where an End User (self-hosted) RPKI publication point misses a few .roa files, the validator can proceed to consider all data from all RPs it could reach eligible for further validation, except any data from the publication point where files were missing.

In other words: if one or a few files are missing from the repository, the repository should be considered 'down', and no attempt should be made to start guessing what can be salvaged and what not.

To offer an example:

In manifest `1-tcQDnftkRnWbiMhu2cR1-dgmCs.mft`, a number of ROAs and a CRL are referenced:

```
1-tcQDnftkRnWbiMhu2cR1-dgmCs.crl
IM3xMiMU1QChuWMOGgnbDwYolrU.roa
LkKeUPYrfgzjsOIejLjsHGk44cU.roa
LkKeUPYrfgzjsOIejLjsHGk44cU.roa
fIeCcC8KpdJQd-olU2APdxNZkyA.roa
r5vtD4isKhTzGXNGulSnZ7XCS04.roa
r7TSyWn_GbYPjNWvt4r5ewSNAsk.roa

```

If an attacker withholds all but `LkKeUPYrfgzjsOIejLjsHGk44cU.roa`, so the MITM does the equivalent of:

```
cd repository/DEFAULT/3e/01d411-d915-4277-8fe2-76b0dda2bf3e/1/
rm LkKeUPYrfgzjsOIejLjsHGk44cU.roa \
    fIeCcC8KpdJQd-olU2APdxNZkyA.roa \
    IM3xMiMU1QChuWMOGgnbDwYolrU.roa \
    NpI_Uj3OZb6jvwfUTX0-eOk9QV4.roa

```

and the validator does *not* consider `1-tcQDnftkRnWbiMhu2cR1-dgmCs.mft` in its entirety invalid due to one or more missing `.roa` or `.crl` files, in this specific example the remaining ROA will render all BGP announcements equal to or covered under `80.128.0.0/11` `invalid`. This results in actual downtime in real networks.

If the manifest (which references a missing `.roa` file in its entirety is ignored or considered invalid), the remaining `r7TSyWn_GbYPjNWvt4r5ewSNAsk.roa` ROA which would've been transformed into VRP `80.128.0.0/11 AS 0` is also ignored. This renders all BGP announcements under that /11 `not-found` rather than `invalid`, which is a preferable situation.

`rpki-client` now has a patch where if a file is referenced the manifest, but is missing (either due to CA operational error, or because of a MITM attack - we can't differentiate the two), that specific manifest is considered invalid. It will depend on the structure of how CA Certificate trees whether this measure is sufficient or whether a single missing file has to result in the entire publication point being considered invalid.

But until we have more information about other attack vectors, I recommend that a manifest as a whole is considered invalid, when it references a non-existing or wrongly checksummed file. The onus is on the CA publication points to publish correct valid RPKI data, the validator's can't be expected to compensate for CA operator errors (or MITM attacks)

An additional check is needed: if one of the .roa files a manifest references is corrupt (the MITM didn't *delete* strategically file, but filled some .roa files with garbage):

```
echo helewioefwefoibnwef > rpki.ripe.net/repository/DEFAULT/3e/01d411-d915-4277-8fe2-76b0dda2bf3e/1/fIeCcC8KpdJQd-olU2APdxNZkyA.roa

...

rpki-client:  ...trace: error:0DFFF08E:asn1 encoding routines:CRYPTO_internal:not enough data
rpki-client: rpki.ripe.net/repository/DEFAULT/3e/01d411-d915-4277-8fe2-76b0dda2bf3e/1/fIeCcC8KpdJQd-olU2APdxNZkyA.roa: RFC 6488: failed CMS parse

```

corrupting that one .roa file results in an incomplete (operationally problematic) set of VRPs:

```
job@anton ~$ grepcidr 80.128.0.0/11 /var/db/rpki-client/openbgpd
	80.128.0.0/12 source-as 3320
	80.128.0.0/11 source-as 0
	80.128.0.0/11 source-as 3320
	80.144.0.0/13 source-as 3320
	80.152.0.0/14 source-as 3320
	80.156.0.0/16 source-as 3320
	80.157.0.0/16 source-as 3320
	80.157.8.0/21 source-as 3320
	80.157.16.0/20 source-as 3320
	80.158.0.0/17 maxlen 24 source-as 34086
	80.159.224.0/19 maxlen 24 source-as 2792

```

In the above eaxmple there should be ~ 19 VRPs in total, `fIeCcC8KpdJQd-olU2APdxNZkyA.roa` contained 8 VRPs.

In summary:

If a manifests references a non-existing file, or if there is a checksum mismatch between the hash described in the manifest and the hash as derived from the .roa file, the RP MUST consider the whole manifest invalid and not produce VRPs with the remaining .roa files.

## Metadata

### Assignees

No one assigned

### Labels

No labelsNo labels
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


