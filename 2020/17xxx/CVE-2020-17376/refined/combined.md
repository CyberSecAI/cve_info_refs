=== Content from www.openwall.com_c11c7f5a_20250119_113935.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](3) [[next>]](5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20200825162407.2az2vg5jyfbvy7ky@yuggoth.org>
Date: Tue, 25 Aug 2020 16:24:07 +0000
From: Jeremy Stanley <fungi@...goth.org>
To: oss-security@...ts.openwall.com
Subject: [OSSA-2020-006] Nova: Live migration fails to update persistent
 domain XML (CVE-2020-17376)

===================================================================
OSSA-2020-006: Live migration fails to update persistent domain XML
===================================================================

:Date: August 25, 2020
:CVE: CVE-2020-17376

Affects
~~~~~~~
- Nova: <19.3.1, >=20.0.0 <20.3.1, ==21.0.0

Description
~~~~~~~~~~~
Tadayoshi Hosoya (NEC) and Lee Yarwood (Red Hat) reported a
vulnerability in Nova live migration. By performing a soft reboot of
an instance which has previously undergone live migration, a user may
gain access to destination host devices that share the same paths as
host devices previously referenced by the virtual machine on the
source. This can include block devices that map to different Cinder
volumes on the destination than the source. The risk is increased
significantly in non-default configurations allowing untrusted users
to initiate live migrations, so administrators may consider
temporarily disabling this in policy if they cannot upgrade
immediately. This only impacts deployments where users are allowed to
perform soft reboots of server instances; it is recommended to disable
soft reboots in policy (only allowing hard reboots) until the fix can
be applied.

Patches
~~~~~~~
- <https://review.opendev.org/747978> (Pike)
- <https://review.opendev.org/747976> (Queens)
- <https://review.opendev.org/747975> (Rocky)
- <https://review.opendev.org/747974> (Stein)
- <https://review.opendev.org/747973> (Train)
- <https://review.opendev.org/747972> (Ussuri)
- <https://review.opendev.org/747969> (Victoria)

Credits
~~~~~~~
- Tadayoshi Hosoya from NEC (CVE-2020-17376)
- Lee Yarwood from Red Hat (CVE-2020-17376)

References
~~~~~~~~~~
- <https://launchpad.net/bugs/1890501>
- <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-17376>

Notes
~~~~~
- The stable/rocky, stable/queens, and stable/pike branches are under extended
  maintenance and will receive no new point releases, but patches for them are
  provided as a courtesy.

--
Jeremy Stanley
OpenStack Vulnerability Management Team

Download attachment "[signature.asc](4/1)" of type "application/pgp-signature" (964 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from launchpad.net_0907fee8_20250119_132758.html ===

[Log in / Register](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Blogin)

[![](https://launchpadlibrarian.net/324577028/nova64.png)](https://launchpad.net/nova)

## [OpenStack Compute (nova)](https://launchpad.net/nova)

* [Overview](https://launchpad.net/nova)
* [Code](https://code.launchpad.net/nova)
* [Bugs](https://bugs.launchpad.net/nova)
* [Blueprints](https://blueprints.launchpad.net/nova)
* [Translations](https://translations.launchpad.net/nova)
* [Answers](https://answers.launchpad.net/nova)

# [OSSA-2020-006] Soft reboot after live-migration reverts instance to original source domain XML (CVE-2020-17376)

Bug #1890501 reported by
[Lee Yarwood](https://launchpad.net/~lyarwood)
on 2020-08-05

[268](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Compute (nova)](https://bugs.launchpad.net/nova) | Fix Released | Critical | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [Pike](https://bugs.launchpad.net/nova/pike) | Fix Released | Critical | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [Queens](https://bugs.launchpad.net/nova/queens) | Fix Released | Critical | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [Rocky](https://bugs.launchpad.net/nova/rocky) | Fix Released | Critical | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [Stein](https://bugs.launchpad.net/nova/stein) | Fix Released | Critical | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [Train](https://bugs.launchpad.net/nova/train) | Fix Released | Critical | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [Ussuri](https://bugs.launchpad.net/nova/ussuri) | Fix Released | Critical | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [Victoria](https://bugs.launchpad.net/nova/victoria) | Fix Released | Critical | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | High | [Jeremy Stanley](https://launchpad.net/~fungi) |  |

### Bug Description

Description

===========

When live migrating instances with attached volumes Nova will first ensure that the volumes are connected on the destination before updating the underlying domain XML to be used on the destination to correctly map to these volumes.

At present in the case of volumes connected over iSCSI or FC this ensures that the instance points to the correct host block devices as these may differ from the source.

However if a user requests a soft reboot of an instance after a successful live migration the underlying libvirt domain will rollback to the XML definition used on the source. In the case of volumes provided over iSCSI or FC etc this can potentially lead to the wrong

 volume being attached to the instance on the destination leading to possible data exfiltration or corruption.

It appears that this is due to Nova not providing VIR\_MIGRATE\_PARAM\_PERSIST\_XML during the migration resulting in the original source domains persistent configuration being used instead:

/\*\*

      \* VIR\_MIGRATE\_PARAM\_DEST\_XML:

      \*

      \* virDomainMigrate\* params field: the new configuration to be used for the

      \* domain on the destination host as VIR\_TYPED\_PARAM\_STRING. The configuration

      \* must include an identical set of virtual devices, to ensure a stable guest

      \* ABI across migration. Only parameters related to host side configuration

      \* can be changed in the XML. Hypervisors which support this field will forbid

      \* migration if the provided XML would cause a change in the guest ABI. This

      \* field cannot be used to rename the domain during migration (use

      \* VIR\_MIGRATE\_PARAM\_DEST\_NAME field for that purpose). Domain name in the

      \* destination XML must match the original domain name.

      \*

      \* Omitting this parameter keeps the original domain configuration. Using this

      \* field with hypervisors that do not support changing domain configuration

      \* during migration will result in a failure.

      \*/

     # define VIR\_MIGRATE\_PARAM\_DEST\_XML "destination\_xml"

/\*\*

      \* VIR\_MIGRATE\_PARAM\_PERSIST\_XML:

      \*

      \* virDomainMigrate\* params field: the new persistent configuration to be used

      \* for the domain on the destination host as VIR\_TYPED\_PARAM\_STRING.

      \* This field cannot be used to rename the domain during migration (use

      \* VIR\_MIGRATE\_PARAM\_DEST\_NAME field for that purpose). Domain name in the

      \* destination XML must match the original domain name.

      \*

      \* Omitting this parameter keeps the original domain persistent configuration.

      \* Using this field with hypervisors that do not support changing domain

      \* configuration during migration will result in a failure.

      \*/

     # define VIR\_MIGRATE\_PARAM\_PERSIST\_XML "persistent\_xml"

Steps to reproduce

==================

0) Deploy overcloud with multipath and iscsi/LVM cinder backend.

   1) Delete all instances and check no device path remained on both host1 and host2.

   2) Boot instances, VM1 on host1 and VM2 on host2.

      $ cinder create --name cirros1 --volume-type lvm --image cirros 1

      $ cinder create --name cirros2 --volume-type lvm --image cirros 1

      $ nova boot --block-device-mapping vda=$cirrosvol1 ... --host host1.localdomain testvm1

      $ nova boot --block-device-mapping vda=$cirrosvol2 ... --host host2.localdomain testvm2

      $ openstack server add floating ip testvm1 xx.xx.xx.xx

      $ openstack server add floating ip testvm2 yy.yy.yy.yy

   3) Soft reboot each instances and check no problem has occured.

      $ nova reboot testvm1

      $ nova reboot testvm2

   4) Execute live-migration VM1 to host2, check VMs for the device path setting in

      each XML.

      $ nova live-migration testvm1 host2.localdomain

   5) Execute soft reboot VM1, check VMs for the device path setting in each XML.

      $ nova reboot testvm1

   6) Login to each VMs and check syslogs.

Expected result

===============

After live-migration and soft reboot instance, device paths indicated by virsh dumpxml --inactive and qemu XML file are changed to new value fit to destination host.

Actual result

=============

After live-migration and soft reboot instance, device paths indicated by virsh dumpxml --inactive and qemu XML file are the value of source host before migration.

Environment

===========

1. Exact version of OpenStack you are running. See the following

  list for all releases: <http://docs.openstack.org/releases/>

Reported downstream against stable/train and libvirt 5.6.0-10.

2. Which hypervisor did you use?

   (For example: Libvirt + KVM, Libvirt + XEN, Hyper-V, PowerKVM, ...)

   What's the version of that?

libvirt + KVM

2. Which storage type did you use?

   (For example: Ceph, LVM, GPFS, ...)

   What's the version of that?

LVM/iSCSI with multipath enabled but any host block based storage backend will do.

3. Which networking type did you use?

   (For example: nova-network, Neutron with OpenVSwitch, ...)

N/A

Logs & Configs

==============

The following test env logs are copied verbatim from a private downstream security bug:

<https://bugzilla.redhat.com/show_bug.cgi?id=1862353>

\* Device paths initial state

                                     host1 host2

     ===================================================================================================

     VM1 multipath -ll 360014053825c172898b4ba4a5353515c dm-0 ---

         virsh dumpxml <source dev='/dev/dm-0' index='1'/> ---

         virsh dumpxml --inactive <source dev='/dev/dm-0'/> ---

         qemu xml file <source dev='/dev/dm-0'/> ---

     ---------------------------------------------------------------------------------------------------

     VM2 multipath -ll --- 36001405fc681536d0124af2a9fd99c10 dm-0

         virsh dumpxml --- <source dev='/dev/dm-0' index='1'/>

         virsh dumpxml --inactive --- <source dev='/dev/dm-0'/>

         qemu xml file --- <source dev='/dev/dm-0'/>

\* Device paths after VM1 live-migration to host2

                                     host1 host2

     ===================================================================================================

     VM1 multipath -ll --- 360014053825c172898b4ba4a5353515c dm-2

         virsh dumpxml --- <source dev='/dev/dm-2' index='1'/>

         virsh dumpxml --inactive --- <source dev='/dev/dm-0'/> <== not dm-2

         qemu xml file --- <source dev='/dev/dm-0'/> <== not dm-2

     ---------------------------------------------------------------------------------------------------

     VM2 multipath -ll --- 36001405fc681536d0124af2a9fd99c10 dm-0

         virsh dumpxml --- <source dev='/dev/dm-0' index='1'/>

         virsh dumpxml --inactive --- <source dev='/dev/dm-0'/>

         qemu xml file --- <source dev='/dev/dm-0'/>

\* Device paths after soft reboot VM1 on host2

                                     host1 host2

     ===================================================================================================

     VM1 multipath -ll --- 360014053825c172898b4ba4a5353515c dm-2

         virsh dumpxml --- <source dev='/dev/dm-0' index='1'/> <== changed to dm-0

         virsh dumpxml --inactive --- <source dev='/dev/dm-0'/>

         qemu xml file --- <source dev='/dev/dm-0'/>

     ---------------------------------------------------------------------------------------------------

     VM2 multipath -ll --- 36001405fc681536d0124af2a9fd99c10 dm-0

         virsh dumpxml --- <source dev='/dev/dm-0' index='1'/>

         virsh dumpxml --inactive --- <source dev='/dev/dm-0'/>

         qemu xml file --- <source dev='/dev/dm-0'/>

\* VM1 syslog file before live-migration

         $ cat /var/log/messages

         ...

         Jul 28 05:28:38 cirrostestvm1 kern.info kernel: [ 0.780031] usb 1-1: new full-speed USB device number 2 using uhci\_hcd

         Jul 28 05:28:39 cirrostestvm1 kern.info kernel: [ 1.272305] Refined TSC clocksource calibration: 2099.976 MHz.

         Jul 28 05:28:40 cirrostestvm1 authpriv.info dropbear[260]: Running in background

         Jul 28 05:28:40 cirrostestvm1 daemon.info init: reloading /etc/inittab

         Jul 28 05:28:40 cirrostestvm1 daemon.info init: starting pid 1, tty '/dev/ttyS0': '/sbin/getty -L 115200 ttyS0 vt100 '

         Jul 28 05:28:40 cirrostestvm1 daemon.info init: starting pid 1, tty '/dev/tty1': '/sbin/getty 115200 tty1'

         Jul 28 05:28:48 cirrostestvm1 kern.debug kernel: [ 10.992106] eth0: no IPv6 routers present

         Jul 28 05:29:45 cirrostestvm1 authpriv.info dropbear[301]: Child connection from \*\*.\*\*.\*\*.\*\*:33648

         Jul 28 05:29:48 cirrostestvm1 authpriv.notice dropbear[301]: Password auth succeeded for 'cirros' from \*\*.\*\*.\*\*.\*\*:33648

         $

\* VM1 syslog file after soft reboot on host2

       hostname command return correct value, but VM1 syslog is recorded by VM2.

       (in some cases, VM1 and VM2 syslog files are destroyed and cannot be read as text file)

         $ hostname

         cirrostestvm1

         $ cat /var/log/messages | tail

         Jul 28 06:03:01 cirrostestvm2 authpriv.info dropbear[325]: Child connection from 172.31.151.1:35894

         Jul 28 06:03:05 cirrostestvm2 authpriv.notice dropbear[325]: Password auth succeeded for 'cirros' from \*\*.\*\*.\*\*.\*\*:35894

         Jul 28 06:03:05 cirrostestvm2 authpriv.info dropbear[325]: Exit (cirros): Disconnect received

         Jul 28 06:03:30 cirrostestvm2 authpriv.info dropbear[328]: Child connection from \*\*.\*\*.\*\*.\*\*:36352

         Jul 28 06:03:34 cirrostestvm2 authpriv.notice dropbear[328]: Password auth succeeded for 'cirros' from \*\*.\*\*.\*\*.\*\*:36352

         Jul 28 06:03:34 cirrostestvm2 authpriv.info dropbear[328]: Exit (cirros): Disconnect received

         Jul 28 06:03:39 cirrostestvm2 authpriv.info dropbear[331]: Child connection from \*\*.\*\*.\*\*.\*\*:36484

         Jul 28 06:03:41 cirrostestvm2 authpriv.info dropbear[331]: Exit before auth (user 'cirros', 0 fails): Exited normally

         Jul 28 06:03:45 cirrostestvm2 authpriv.info dropbear[332]: Child connection from \*\*.\*\*.\*\*.\*\*:36588

         Jul 28 06:03:49 cirrostestvm2 authpriv.notice dropbear[332]: Password auth succeeded for 'cirros' from \*\*.\*\*.\*\*.\*\*:36588

See [original description](comments/0)

Tags:

[libvirt](/nova/%2Bbugs?field.tag=libvirt)
[live-migration](/nova/%2Bbugs?field.tag=live-migration)
[security](/nova/%2Bbugs?field.tag=security)
[in-stable-ussuri](/nova/%2Bbugs?field.tag=in-stable-ussuri)

## CVE References

* [2020-17376](/bugs/cve/2020-17376 "An issue was discovered in Guest.migr...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-05: |  |  | [#1](/nova/%2Bbug/1890501/comments/1) |
| --- | --- | --- | --- |

Since this report concerns a possible security risk, an incomplete

security advisory task has been added while the core security

reviewers for the affected project or projects confirm the bug and

discuss the scope of any vulnerability along with potential

solutions.

Since this report concerns a possible security risk, an incomplete
security advisory task has been added while the core security
reviewers for the affected project or projects confirm the bug and
discuss the scope of any vulnerability along with potential
solutions.

| **description**: | updated |
| --- | --- |
| **description**: | updated |
| Changed in ossa: | |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-05: |  |  | [#2](/nova/%2Bbug/1890501/comments/2) |
| --- | --- | --- | --- |

It's not immediately clear to me from the bug description what security risk this poses. I would appreciate it if someone could clarify that, ideally with an example exploit scenario for how an attacker might leverage the defect to gain unintended access/control.

It's not immediately clear to me from the bug description what security risk this poses. I would appreciate it if someone could clarify that, ideally with an example exploit scenario for how an attacker might leverage the defect to gain unintended access/control.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-05: |  |  | [#3](/nova/%2Bbug/1890501/comments/3) |
| --- | --- | --- | --- |

Apologies, I've added the following to the initial description, let me know if you would like any more details.

"""

When live migrating instances with attached volumes Nova will first ensure that the volumes are connected on the destination before updating the underlying domain XML to be used on the destination to correctly map to these volumes.

At present in the case of volumes connected over iSCSI or FC this ensures that the instance points to the correct host block devices as these may differ from the source.

However if a user requests a soft reboot of an instance after a successful live migration the underlying libvirt domain will rollback to the XML definition used on the source. In the case of volumes provided over iSCSI or FC etc this can potentially lead to the wrong

 volume being attached to the instance on the destination leading to possible data exfiltration or corruption.

"""

Apologies, I've added the following to the initial description, let me know if you would like any more details.
"""
When live migrating instances with attached volumes Nova will first ensure that the volumes are connected on the destination before updating the underlying domain XML to be used on the destination to correctly map to these volumes.
At present in the case of volumes connected over iSCSI or FC this ensures that the instance points to the correct host block devices as these may differ from the source.
However if a user requests a soft reboot of an instance after a successful live migration the underlying libvirt domain will rollback to the XML definition used on the source. In the case of volumes provided over iSCSI or FC etc this can potentially lead to the wrong
volume being attached to the instance on the destination leading to possible data exfiltration or corruption.
"""

| **description**: | updated |
| --- | --- |
| **description**: | updated |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-05: |  |  | [#4](/nova/%2Bbug/1890501/comments/4) |
| --- | --- | --- | --- |

Okay, so \*if\* someone has access to an instance which happens to have been live-migrated within a vulnerable deployment then they can gain read+write access to some random allocation on the array which might contain another tenant's data?

I'm open to input, but the risk here doesn't seem severe enough to warrant keeping this report secret until a fix is developed and reviewed. We'll still likely want to publish an advisory for this once a fix is available, however.

Okay, so \*if\* someone has access to an instance which happens to have been live-migrated within a vulnerable deployment then they can gain read+write access to some random allocation on the array which might contain another tenant's data?
I'm open to input, but the risk here doesn't seem severe enough to warrant keeping this report secret until a fix is developed and reviewed. We'll still likely want to publish an advisory for this once a fix is available, however.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-05: |  |  | [#5](/nova/%2Bbug/1890501/comments/5) |
| --- | --- | --- | --- |

Correct, any user with access to an instance that has been live migrated (an admin only op) can soft reboot the instance and may end up with RW access to a volume owned by another user.

I'm not entirely convinced that we want to open this up so quickly as this could easily provide a bad actor with access to the root disk of another instance, access to keys and other sensitive data etc. Making such a trivial exploit public before the fix is in the gate doesn't seem right.

Correct, any user with access to an instance that has been live migrated (an admin only op) can soft reboot the instance and may end up with RW access to a volume owned by another user.
I'm not entirely convinced that we want to open this up so quickly as this could easily provide a bad actor with access to the root disk of another instance, access to keys and other sensitive data etc. Making such a trivial exploit public before the fix is in the gate doesn't seem right.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-06: |  |  | [#6](/nova/%2Bbug/1890501/comments/6) |
| --- | --- | --- | --- |

I'm probably missing some nuance, but this doesn't sound like it would be especially hard for a user to stumble across accidentally anyway (and then get very confused). It also doesn't seem like even a determined attacker could take advantage of this for a particularly focused attack due to the need for an admin to live migrate the instance first, the random nature of the resources they might get access to, and the fact that it can only be exploited once per instance (so somewhat expensive exercise to repeat at a massive enough scale for effective dragnetting).

What versions of Nova does this affect, does anyone know off hand?

I'm probably missing some nuance, but this doesn't sound like it would be especially hard for a user to stumble across accidentally anyway (and then get very confused). It also doesn't seem like even a determined attacker could take advantage of this for a particularly focused attack due to the need for an admin to live migrate the instance first, the random nature of the resources they might get access to, and the fact that it can only be exploited once per instance (so somewhat expensive exercise to repeat at a massive enough scale for effective dragnetting).
What versions of Nova does this affect, does anyone know off hand?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-06: |  |  | [#7](/nova/%2Bbug/1890501/comments/7) |
| --- | --- | --- | --- |

VIR\_MIGRATE\_PARAM\_PERSIST\_XML was introduced into libvirt by b028e9d7c2f0f7713ba102d01aece13ee72136a1 and first included in the v1.3.4 release that came out in May of 2016.

In terms of which versions of Nova are impacted we've never provided VIR\_MIGRATE\_PARAM\_PERSIST\_XML so \*any\* version running alongside libvirt >= v1.3.4 would be as we don't cap the max supported version of libvirt for each release.

VIR\_MIGRATE\_PARAM\_PERSIST\_XML was introduced into libvirt by b028e9d7c2f0f7713ba102d01aece13ee72136a1 and first included in the v1.3.4 release that came out in May of 2016.
In terms of which versions of Nova are impacted we've never provided VIR\_MIGRATE\_PARAM\_PERSIST\_XML so \*any\* version running alongside libvirt >= v1.3.4 would be as we don't cap the max supported version of libvirt for each release.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dan Smith (danms)](https://launchpad.net/~danms) wrote on 2020-08-06: |  |  | [#8](/nova/%2Bbug/1890501/comments/8) |
| --- | --- | --- | --- |

If this is really is happening, then I agree, it seems like this would have been noticed and reported a LOT since 2016. That makes it hard for me to believe it's really happening. In a lot of cases we'll use something like /dev/disk/by-id/$id in the XML which makes it hard for a collision to expose another user's data, but would rather just break the reboot or something. However, in discussing privately with Lee it sounds like os-brick will tell us to use generic devices like /dev/dm-X for cases like multipath, which would definitely make it a lot easier to get access to a device we shouldn't have.

I think Jeremy's point is that this isn't exploitable directly by a user because live-migration is admin-only, and thus the attack route would be to spin up an instance with a volume, wait a year until a maintenance window has passed, and then try soft-reboot to see if you got anything. Not knowing the backend (i.e. if they're using multipath or ceph or whatever) makes the intermediate expense pretty high for a very rare payoff.

Jeremy, are you prescribing some other handling for this because of the difficulty of exploitation? If so, what is that? I'd also point out that live-migration is admin only by default, but could be exposed to users (although you'd be pretty crazy to do so in a public cloud, it's not uncommon in private clouds). Further, if we did hit this, exposing someone else's data volume to the wrong use is pretty much the worst sin we can commit.

Lee, normally we attach a patch here for review first. I'm guessing this is as simple to fix as just setting that flag on the migrate call, right? Do we need to care about local/remote libvirt version mismatches? If not and the patch is a one-liner, I say we just handle this with care out of caution.

If this is really is happening, then I agree, it seems like this would have been noticed and reported a LOT since 2016. That makes it hard for me to believe it's really happening. In a lot of cases we'll use something like /dev/disk/by-id/$id in the XML which makes it hard for a collision to expose another user's data, but would rather just break the reboot or something. However, in discussing privately with Lee it sounds like os-brick will tell us to use generic devices like /dev/dm-X for cases like multipath, which would definitely make it a lot easier to get access to a device we shouldn't have.
I think Jeremy's point is that this isn't exploitable directly by a user because live-migration is admin-only, and thus the attack route would be to spin up an instance with a volume, wait a year until a maintenance window has passed, and then try soft-reboot to see if you got anything. Not knowing the backend (i.e. if they're using multipath or ceph or whatever) makes the intermediate expense pretty high for a very rare payoff.
Jeremy, are you prescribing some other handling for this because of the difficulty of exploitation? If so, what is that? I'd also point out that live-migration is admin only by default, but could be exposed to users (although you'd be pretty crazy to do so in a public cloud, it's not uncommon in private clouds). Further, if we did hit this, exposing someone else's data volume to the wrong use is pretty much the worst sin we can commit.
Lee, normally we attach a patch here for review first. I'm guessing this is as simple to fix as just setting that flag on the migrate call, right? Do we need to care about local/remote libvirt version mismatches? If not and the patch is a one-liner, I say we just handle this with care out of caution.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Garbutt (johngarbutt)](https://launchpad.net/~johngarbutt) wrote on 2020-08-06: |  |  | [#9](/nova/%2Bbug/1890501/comments/9) |
| --- | --- | --- | --- |

We only recently have the min version of libvirt high enough for us to use > v1.3.4. So I guess its pluasable.

+1 Dan's comment on live-migration permissions, many users have access to it, although that is not the default.

+1 on Dan's comment around the data leak being one of the worst possible failure modes here.

I guess the patch is tricker for when min\_libvirt is < v1.3.4.

Does this not also affect pinned CPU cores as well? Because we might pick a different set of CPUs on the desitnation hypervisor (train onwards)? With all the speclative execution stuff, that is also a possible data leak. Certainly leads to performance oddness.

Do we have an understanding of what backends use this operation mode? I remember discussing this with Cinder around multi-attach time frame, and it sounded like very few backends (if any upstream?) actually use these host based connections.

We only recently have the min version of libvirt high enough for us to use > v1.3.4. So I guess its pluasable.
+1 Dan's comment on live-migration permissions, many users have access to it, although that is not the default.
+1 on Dan's comment around the data leak being one of the worst possible failure modes here.
I guess the patch is tricker for when min\_libvirt is < v1.3.4.
Does this not also affect pinned CPU cores as well? Because we might pick a different set of CPUs on the desitnation hypervisor (train onwards)? With all the speclative execution stuff, that is also a possible data leak. Certainly leads to performance oddness.
Do we have an understanding of what backends use this operation mode? I remember discussing this with Cinder around multi-attach time frame, and it sounded like very few backends (if any upstream?) actually use these host based connections.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-06: |  |  | [#10](/nova/%2Bbug/1890501/comments/10) |
| --- | --- | --- | --- |

Dan: my main point on difficulty to exploit was that it supports handling this report in public, since discussing and reviewing fixes in the open is much easier and less error-prone for everyone. Designing fixes in secret under embargo should be reserved for only the most risky of defects. I just want to be sure that when we choose to handle fixes in private we're conscious of the cost compared to following our normal community development processes.

Dan: my main point on difficulty to exploit was that it supports handling this report in public, since discussing and reviewing fixes in the open is much easier and less error-prone for everyone. Designing fixes in secret under embargo should be reserved for only the most risky of defects. I just want to be sure that when we choose to handle fixes in private we're conscious of the cost compared to following our normal community development processes.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-06: |  |  | [#11](/nova/%2Bbug/1890501/comments/11) |
| --- | --- | --- | --- |

Yeah MIN\_LIBVIRT\_VERSION only went above v1.3.4 in Stein but we've definitely been using it downstream for much much longer than that as again there's no max version constraint in the code. It should be trivial to workaround however with a simple available version check.

Yes AFAICT this will also impact pinned CPUs, NUMA etc basically anything that we update below that differs between the source and destination hosts:

<https://github.com/openstack/nova/blob/9ecefeb836964c52a5a2969b15c82b11c51d32ab/nova/virt/libvirt/migration.py#L56-L70>

Yeah MIN\_LIBVIRT\_VERSION only went above v1.3.4 in Stein but we've definitely been using it downstream for much much longer than that as again there's no max version constraint in the code. It should be trivial to workaround however with a simple available version check.
Yes AFAICT this will also impact pinned CPUs, NUMA etc basically anything that we update below that differs between the source and destination hosts:
https://github.com/openstack/nova/blob/9ecefeb836964c52a5a2969b15c82b11c51d32ab/nova/virt/libvirt/migration.py#L56-L70

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-06: |  |  | [#12](/nova/%2Bbug/1890501/comments/12) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/nova/%2Bbug/1890501/comments/12/%2Bdownload) (7.4 KiB)

Anyway I've reproduced against devstack now and verified that the attached patch works for me:

I've created two bfv instances using the LVM/iSCSI c-vol backend that os-brick is presenting as raw /dev/sd\* devices to Nova. b8acff7f-7430-40f8-b67f-5f51dcf07299 running on controller and 45302dcc-906f-4d47-b774-45165a867fca running on subnode.

stack@controller $ sudo virsh domblklist b8acff7f-7430-40f8-b67f-5f51dcf07299

 Target Source

--------------------

 vda /dev/sdb

stack@subnode $ sudo virsh domblklist 45302dcc-906f-4d47-b774-45165a867fca

 Target Source

--------------------

 vda /dev/sdb

stack@controller $ openstack server migrate --os-compute-api-version 2.30 --live-migration \

--host controller.example.com 45302dcc-906f-4d47-b774-45165a867fca

stack@controller $ sudo virsh domblklist 45302dcc-906f-4d47-b774-45165a867fca

 Target Source

--------------------

 vda /dev/sdc

stack@controller $ sudo virsh dumpxml 45302dcc-906f-4d47-b774-45165a867fca > original.xml

stack@controller $ openstack server reboot --soft 45302dcc-906f-4d47-b774-45165a867fca

stack@controller $ sudo virsh dumpxml 45302dcc-906f-4d47-b774-45165a867fca > soft.xml

stack@controller $ sudo virsh domblklist 45302dcc-906f-4d47-b774-45165a867fca

 Target Source

--------------------

 vda /dev/sdb

stack@controller $ diff -u original.xml soft.xml

$ diff -u original.xml soft.xml

--- original.xml 2020-08-06 11:30:36.611368640 -0400

+++ soft.xml 2020-08-06 11:30:57.531787186 -0400

@@ -1,23 +1,23 @@

-<domain type='kvm' id='6'>

+<domain type='kvm' id='7'>

   <name>instance-00000004</name>

   <uuid>45302dcc-906f-4d47-b774-45165a867fca</uuid>

   <metadata>

     <nova:instance xmlns:nova="<http://openstack.org/xmlns/libvirt/nova/1.0>">

- <nova:package version="21.1.0"/>

- <nova:name>test</nova:name>

- <nova:creationTime>2020-08-06 15:29:32</nova:creationTime>

- <nova:flavor name="m1.tiny">

- <nova:memory>512</nova:memory>

- <nova:disk>1</nova:disk>

- <nova:swap>0</nova:swap>

- <nova:ephemeral>0</nova:ephemeral>

- <nova:vcpus>1</nova:vcpus>

- </nova:flavor>

- <nova:owner>

- <nova:user uuid="c7bfad6fb6cc45778d2eb63642eb10d5">admin</nova:user>

- <nova:project uuid="6b4564ddd49242ecad343e41e6bf134f">admin</nova:project>

- </nova:owner>

- </nova:instance>

+ <nova:package version="21.1.0"/>

+ <nova:name>test</nova:name>

+ <nova:creationTime>2020-08-06 15:29:32</nova:creationTime>

+ <nova:flavor name="m1.tiny">

+ <nova:memory>512</nova:memory>

+ <nova:disk>1</nova:disk>

+ <nova:swap>0</nova:swap>

+ <nova:ephemeral>0</nova:ephemeral>

+ <nova:vcpus>1</nova:vcpus>

+ </nova:flavor>

+ <nova:owner>

+ <nova:user uuid="c7bfad6fb6cc45778d2eb63642eb10d5">admin</nova:user>

+ <nova:project uuid="6b4564ddd49242ecad343e41e6bf134f">admin</nova:project>

+ </nova:owner>

+ </nova:instance>

   </metadata>

   <memory unit='KiB'>524288</memory>

   <currentMemory unit='KiB'>524288</currentMemory>

@@ -59,7 +59,7 @@

     <emulator>/usr/bin/qemu-system-x86\_64</emulator>

     <disk type='bloc...

[Read more...](/nova/%2Bbug/1890501/comments/12)

Anyway I've reproduced against devstack now and verified that the attached patch works for me:
I've created two bfv instances using the LVM/iSCSI c-vol backend that os-brick is presenting as raw /dev/sd\* devices to Nova. b8acff7f-7430-40f8-b67f-5f51dcf07299 running on controller and 45302dcc-906f-4d47-b774-45165a867fca running on subnode.
stack@controller $ sudo virsh domblklist b8acff7f-7430-40f8-b67f-5f51dcf07299
Target Source
--------------------
vda /dev/sdb
stack@subnode $ sudo virsh domblklist 45302dcc-906f-4d47-b774-45165a867fca
Target Source
--------------------
vda /dev/sdb
stack@controller $ openstack server migrate --os-compute-api-version 2.30 --live-migration \
--host controller.example.com 45302dcc-906f-4d47-b774-45165a867fca
stack@controller $ sudo virsh domblklist 45302dcc-906f-4d47-b774-45165a867fca
Target Source
--------------------
vda /dev/sdc
stack@controller $ sudo virsh dumpxml 45302dcc-906f-4d47-b774-45165a867fca > original.xml
stack@controller $ openstack server reboot --soft 45302dcc-906f-4d47-b774-45165a867fca
stack@controller $ sudo virsh dumpxml 45302dcc-906f-4d47-b774-45165a867fca > soft.xml
stack@controller $ sudo virsh domblklist 45302dcc-906f-4d47-b774-45165a867fca
Target Source
--------------------
vda /dev/sdb
stack@controller $ diff -u original.xml soft.xml
$ diff -u original.xml soft.xml
--- original.xml 2020-08-06 11:30:36.611368640 -0400
+++ soft.xml 2020-08-06 11:30:57.531787186 -0400
@@ -1,23 +1,23 @@
-<domain type='kvm' id='6'>
+<domain type='kvm' id='7'>
<name>instance-00000004</name>
<uuid>45302dcc-906f-4d47-b774-45165a867fca</uuid>
<metadata>
<nova:instance xmlns:nova="http://openstack.org/xmlns/libvirt/nova/1.0">
- <nova:package version="21.1.0"/>
- <nova:name>test</nova:name>
- <nova:creationTime>2020-08-06 15:29:32</nova:creationTime>
- <nova:flavor name="m1.tiny">
- <nova:memory>512</nova:memory>
- <nova:disk>1</nova:disk>
- <nova:swap>0</nova:swap>
- <nova:ephemeral>0</nova:ephemeral>
- <nova:vcpus>1</nova:vcpus>
- </nova:flavor>
- <nova:owner>
- <nova:user uuid="c7bfad6fb6cc45778d2eb63642eb10d5">admin</nova:user>
- <nova:project uuid="6b4564ddd49242ecad343e41e6bf134f">admin</nova:project>
- </nova:owner>
- </nova:instance>
+ <nova:package version="21.1.0"/>
+ <nova:name>test</nova:name>
+ <nova:creationTime>2020-08-06 15:29:32</nova:creationTime>
+ <nova:flavor name="m1.tiny">
+ <nova:memory>512</nova:memory>
+ <nova:disk>1</nova:disk>
+ <nova:swap>0</nova:swap>
+ <nova:ephemeral>0</nova:ephemeral>
+ <nova:vcpus>1</nova:vcpus>
+ </nova:flavor>
+ <nova:owner>
+ <nova:user uuid="c7bfad6fb6cc45778d2eb63642eb10d5">admin</nova:user>
+ <nova:project uuid="6b4564ddd49242ecad343e41e6bf134f">admin</nova:project>
+ </nova:owner>
+ </nova:instance>
</metadata>
<memory unit='KiB'>524288</memory>
<currentMemory unit='KiB'>524288</currentMemory>
@@ -59,7 +59,7 @@
<emulator>/usr/bin/qemu-system-x86\_64</emulator>
<disk type='block' device='disk'>t
<driver name='qemu' type='raw' cache='none' io='native'/>
- <source dev='/dev/sdc'/>
+ <source dev='/dev/sdb'/>
<backingStore/>
<target dev='vda' bus='virtio'/>
<serial>878ba969-13dc-4fc1-b6c3-48e2b05db256</serial>
@@ -117,8 +117,8 @@
</rng>
</devices>
<seclabel type='dynamic' model='selinux' relabel='yes'>
- <label>system\_u:system\_r:svirt\_t:s0:c459,c924</label>
- <imagelabel>system\_u:object\_r:svirt\_image\_t:s0:c459,c924</imagelabel>
+ <label>system\_u:system\_r:svirt\_t:s0:c487,c991</label>
+ <imagelabel>system\_u:object\_r:svirt\_image\_t:s0:c487,c991</imagelabel>
</seclabel>
<seclabel type='dynamic' model='dac' relabel='yes'>
<label>+107:+107</label>
stack@controller $ openstack server reboot --hard 45302dcc-906f-4d47-b774-45165a867fca
stack@controller $ sudo virsh domblklist 45302dcc-906f-4d47-b774-45165a867fca
Target Source
--------------------
vda /dev/sdc
I ran through this again after patching n-cpu on both hosts using a new instance 46668d49-d9e7-4953-b88d-8e642ac4360e and the XML persists correctly:
stack@controller $ git am ~/0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-during.patch
stack@controller $ sudo systemctl restart devstack@n-\*
stack@subnode $ git am ~/0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-during.patch
stack@subnode $ sudo systemctl restart devstack@n-\*
stack@controller $ openstack server migrate --os-compute-api-version 2.30 --live-migration --host controller.example.com 46668d49-d9e7-4953-b88d-8e642ac4360e
stack@controller $ sudo virsh dumpxml 46668d49-d9e7-4953-b88d-8e642ac4360e > original.xml
stack@controller $ sudo virsh domblklist 46668d49-d9e7-4953-b88d-8e642ac4360e
Target Source
--------------------
vda /dev/sdc
stack@controller $ openstack server reboot --soft 46668d49-d9e7-4953-b88d-8e642ac4360e
stack@controller $ sudo virsh dumpxml 46668d49-d9e7-4953-b88d-8e642ac4360e > soft.xml
stack@controller $ sudo virsh domblklist 46668d49-d9e7-4953-b88d-8e642ac4360e
Target Source
--------------------
vda /dev/sdc
$ diff -u original.xml soft.xml
--- original.xml 2020-08-06 12:22:45.076125282 -0400
+++ soft.xml 2020-08-06 12:22:55.031329078 -0400
@@ -1,23 +1,23 @@
-<domain type='kvm' id='13'>
+<domain type='kvm' id='14'>
<name>instance-00000005</name>
<uuid>46668d49-d9e7-4953-b88d-8e642ac4360e</uuid>
<metadata>
<nova:instance xmlns:nova="http://openstack.org/xmlns/libvirt/nova/1.0">
- <nova:package version="21.1.0"/>
- <nova:name>test</nova:name>
- <nova:creationTime>2020-08-06 16:13:26</nova:creationTime>
- <nova:flavor name="m1.tiny">
- <nova:memory>512</nova:memory>
- <nova:disk>1</nova:disk>
- <nova:swap>0</nova:swap>
- <nova:ephemeral>0</nova:ephemeral>
- <nova:vcpus>1</nova:vcpus>
- </nova:flavor>
- <nova:owner>
- <nova:user uuid="c7bfad6fb6cc45778d2eb63642eb10d5">admin</nova:user>
- <nova:project uuid="6b4564ddd49242ecad343e41e6bf134f">admin</nova:project>
- </nova:owner>
- </nova:instance>
+ <nova:package version="21.1.0"/>
+ <nova:name>test</nova:name>
+ <nova:creationTime>2020-08-06 16:13:26</nova:creationTime>
+ <nova:flavor name="m1.tiny">
+ <nova:memory>512</nova:memory>
+ <nova:disk>1</nova:disk>
+ <nova:swap>0</nova:swap>
+ <nova:ephemeral>0</nova:ephemeral>
+ <nova:vcpus>1</nova:vcpus>
+ </nova:flavor>
+ <nova:owner>
+ <nova:user uuid="c7bfad6fb6cc45778d2eb63642eb10d5">admin</nova:user>
+ <nova:project uuid="6b4564ddd49242ecad343e41e6bf134f">admin</nova:project>
+ </nova:owner>
+ </nova:instance>
</metadata>
<memory unit='KiB'>524288</memory>
<currentMemory unit='KiB'>524288</currentMemory>
@@ -117,8 +117,8 @@
</rng>
</devices>
<seclabel type='dynamic' model='selinux' relabel='yes'>
- <label>system\_u:system\_r:svirt\_t:s0:c543,c672</label>
- <imagelabel>system\_u:object\_r:svirt\_image\_t:s0:c543,c672</imagelabel>
+ <label>system\_u:system\_r:svirt\_t:s0:c40,c378</label>
+ <imagelabel>system\_u:object\_r:svirt\_image\_t:s0:c40,c378</imagelabel>
</seclabel>
<seclabel type='dynamic' model='dac' relabel='yes'>
<label>+107:+107</label>

| 1 comments hidden Loading more comments | [view all 101 comments](?comments=all) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-06: |  |  | [#14](/nova/%2Bbug/1890501/comments/14) |
| --- | --- | --- | --- |

FWIW I've asked the current Nova PTL gibi to review this in the morning and confirm if he thinks it's okay for us to open this up.

FWIW I've asked the current Nova PTL gibi to review this in the morning and confirm if he thinks it's okay for us to open this up.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dan Smith (danms)](https://launchpad.net/~danms) wrote on 2020-08-06: |  |  | [#15](/nova/%2Bbug/1890501/comments/15) |
| --- | --- | --- | --- |

Lee, apologies if I missed it, but is this something we can just do on one side of an upgrade where the libvirt version is different? Meaning, we're just making a call to \*our\* libvirt, does it handle the case where the old libvirt doesn't need/handle the new param?

If there's no upgrade concern here, reviewing that patch seems pretty trivial, especially if Lee has tested it.

Lee, apologies if I missed it, but is this something we can just do on one side of an upgrade where the libvirt version is different? Meaning, we're just making a call to \*our\* libvirt, does it handle the case where the old libvirt doesn't need/handle the new param?
If there's no upgrade concern here, reviewing that patch seems pretty trivial, especially if Lee has tested it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Balazs Gibizer (balazs-gibizer)](https://launchpad.net/~balazs-gibizer) wrote on 2020-08-06: |  |  | [#16](/nova/%2Bbug/1890501/comments/16) |
| --- | --- | --- | --- |

After chatting it through with Lee I'm OK with the attached patch. Regarding the publicity of the issue, I'm on Dan side that it is better to keep this private just to be on the safe side due to the size of the impact.

I' will be on PTO in the next two weeks but I have full trust in the already involved nova folks to handle this properly.

After chatting it through with Lee I'm OK with the attached patch. Regarding the publicity of the issue, I'm on Dan side that it is better to keep this private just to be on the safe side due to the size of the impact.
I' will be on PTO in the next two weeks but I have full trust in the already involved nova folks to handle this properly.

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2020-08-06

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-06: |  |  | [#17](/nova/%2Bbug/1890501/comments/17) |
| --- | --- | --- | --- |

I'm still a little fuzzy on the details so please suggest corrections/improvements, but this is an initial draft of the impact description we'd use to request a CVE assignment, and which will eventually form the basis for any public advisory...

Title: Live migration fails to update source domain XML

Reporter: Lee Yarwood (Red Hat)

Products: Nova

Affects: <19.3.1, >=20.0.0 <20.3.1, ==21.0.0

Description:

Lee Yarwood (Red Hat) reported a vulnerability in Nova live migration. By performing a soft reboot of an instance which has previously undergone live migration, a user may gain access to the virtual machine's original block devices resulting in possible access to data for another tenant to whom those devices have since been reallocated. Only deployments allowing host-based connections for instance root and ephemeral devices are affected.

I'm still a little fuzzy on the details so please suggest corrections/improvements, but this is an initial draft of the impact description we'd use to request a CVE assignment, and which will eventually form the basis for any public advisory...
Title: Live migration fails to update source domain XML
Reporter: Lee Yarwood (Red Hat)
Products: Nova
Affects: <19.3.1, >=20.0.0 <20.3.1, ==21.0.0
Description:
Lee Yarwood (Red Hat) reported a vulnerability in Nova live migration. By performing a soft reboot of an instance which has previously undergone live migration, a user may gain access to the virtual machine's original block devices resulting in possible access to data for another tenant to whom those devices have since been reallocated. Only deployments allowing host-based connections for instance root and ephemeral devices are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-06: |  |  | [#18](/nova/%2Bbug/1890501/comments/18) |
| --- | --- | --- | --- |

Dan, yeah that's a good point.

The attached patch only works when MIN\_LIBVIRT\_VERSION is >= v1.3.4. So that's for master, stable/ussuri, stable/train and stable/stein. I can post these backport patches tomorrow in the bug.

Prior to that on stable/rocky and stable/queens we will need to ensure the local libvirt version is >= v1.3.4 before adding the VIR\_MIGRATE\_PARAM\_PERSIST\_XML param.

If it isn't then the < v1.3.4 version of libvirt should retain its original behaviour of persisting VIR\_MIGRATE\_PARAM\_DEST\_XML when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided. Even when talking to an upgraded >= v1.3.4 libvirt on the dest host.

Dan, yeah that's a good point.
The attached patch only works when MIN\_LIBVIRT\_VERSION is >= v1.3.4. So that's for master, stable/ussuri, stable/train and stable/stein. I can post these backport patches tomorrow in the bug.
Prior to that on stable/rocky and stable/queens we will need to ensure the local libvirt version is >= v1.3.4 before adding the VIR\_MIGRATE\_PARAM\_PERSIST\_XML param.
If it isn't then the < v1.3.4 version of libvirt should retain its original behaviour of persisting VIR\_MIGRATE\_PARAM\_DEST\_XML when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided. Even when talking to an upgraded >= v1.3.4 libvirt on the dest host.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-06: |  |  | [#19](/nova/%2Bbug/1890501/comments/19) |
| --- | --- | --- | --- |

> Title: Live migration fails to update source domain XML

Live migration fails to update the persistent domain XML on the destination host

> Reporter: Lee Yarwood (Red Hat)

This was initially reported downstream by Tadayoshi Hosoya <email address hidden>, I'm not sure if we can credit him somehow here?

> Affects: <19.3.1, >=20.0.0 <20.3.1, ==21.0.0

I assume this just means all supported releases?

> a user may gain access to the virtual machine's original

> block devices resulting in possible access to data for

> another tenant to whom those devices have since been

> reallocated. Only deployments allowing host-based

> connections for instance root and ephemeral devices are

> affected.

a user may gain access to destination host devices that share the same paths as host devices previously referenced by the virtual machine on the source. This can include block devices that map to different Cinder volumes on the destination to the source.

> Title: Live migration fails to update source domain XML
Live migration fails to update the persistent domain XML on the destination host
> Reporter: Lee Yarwood (Red Hat)
This was initially reported downstream by Tadayoshi Hosoya <tad-hosoya@wr.jp.nec.com>, I'm not sure if we can credit him somehow here?
> Affects: <19.3.1, >=20.0.0 <20.3.1, ==21.0.0
I assume this just means all supported releases?
> a user may gain access to the virtual machine's original
> block devices resulting in possible access to data for
> another tenant to whom those devices have since been
> reallocated. Only deployments allowing host-based
> connections for instance root and ephemeral devices are
> affected.
a user may gain access to destination host devices that share the same paths as host devices previously referenced by the virtual machine on the source. This can include block devices that map to different Cinder volumes on the destination to the source.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-06: |  |  | [#20](/nova/%2Bbug/1890501/comments/20) |
| --- | --- | --- | --- |

Since stable/rocky is already under extended maintenance there won't be any new point releases and any security fixes we do feel like backporting are provided on a best-effort basis as a convenience anyway, so I'd mostly worry about stable/stein and later as those are our officially supported stable branches right now. We can always add backports for extended maintenance branches after a public advisory.

Lee: Thanks for the impact description edits. I'd like to have a shorter title if possible, since this makes it into E-mail subject lines and the like. Would just "Live migration fails to update persistent domain XML" work? The idea is mainly to be able to distinguish it from any other similar (past or future) Nova vulnerabilities. As for the original reporter would "Tadayoshi Hosoya (NEC)" be accurate? I can credit you both, no problem. And yes, the affects line is all currently supported releases, excluding the next possible releases (consider this from the point of view of someone looking at the advisory or CVE a year from now and trying to work out whether they're patched sufficiently to solve the problem). As for the prose, I'll update it with your text. Here's my next take...

Title: Live migration fails to update persistent domain XML

Reporter: Tadayoshi Hosoya (NEC) and Lee Yarwood (Red Hat)

Products: Nova

Affects: <19.3.1, >=20.0.0 <20.3.1, ==21.0.0

Description:

Tadayoshi Hosoya (NEC) and Lee Yarwood (Red Hat) reported a vulnerability in Nova live migration. By performing a soft reboot of an instance which has previously undergone live migration, a user may gain access to destination host devices that share the same paths as host devices previously referenced by the virtual machine on the source. This can include block devices that map to different Cinder volumes on the destination to the source. Only deployments allowing host-based connections for instance root and ephemeral devices are affected.

Since stable/rocky is already under extended maintenance there won't be any new point releases and any security fixes we do feel like backporting are provided on a best-effort basis as a convenience anyway, so I'd mostly worry about stable/stein and later as those are our officially supported stable branches right now. We can always add backports for extended maintenance branches after a public advisory.
Lee: Thanks for the impact description edits. I'd like to have a shorter title if possible, since this makes it into E-mail subject lines and the like. Would just "Live migration fails to update persistent domain XML" work? The idea is mainly to be able to distinguish it from any other similar (past or future) Nova vulnerabilities. As for the original reporter would "Tadayoshi Hosoya (NEC)" be accurate? I can credit you both, no problem. And yes, the affects line is all currently supported releases, excluding the next possible releases (consider this from the point of view of someone looking at the advisory or CVE a year from now and trying to work out whether they're patched sufficiently to solve the problem). As for the prose, I'll update it with your text. Here's my next take...
Title: Live migration fails to update persistent domain XML
Reporter: Tadayoshi Hosoya (NEC) and Lee Yarwood (Red Hat)
Products: Nova
Affects: <19.3.1, >=20.0.0 <20.3.1, ==21.0.0
Description:
Tadayoshi Hosoya (NEC) and Lee Yarwood (Red Hat) reported a vulnerability in Nova live migration. By performing a soft reboot of an instance which has previously undergone live migration, a user may gain access to destination host devices that share the same paths as host devices previously referenced by the virtual machine on the source. This can include block devices that map to different Cinder volumes on the destination to the source. Only deployments allowing host-based connections for instance root and ephemeral devices are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-06: |  |  | [#21](/nova/%2Bbug/1890501/comments/21) |
| --- | --- | --- | --- |

ACK thanks Jeremy the text LGTM now.

FWIW with my downstream hat on I will be fixing this back to stable/queens anyway so I'll do my best to have things posted at the time of disclosure upstream as well.

ACK thanks Jeremy the text LGTM now.
FWIW with my downstream hat on I will be fixing this back to stable/queens anyway so I'll do my best to have things posted at the time of disclosure upstream as well.

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2020-08-06

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-06: |  |  | [#22](/nova/%2Bbug/1890501/comments/22) |
| --- | --- | --- | --- |

A request for CVE assignment has been submitted to MITRE based on the proposed impact description from comment #20, but please feel free to continue suggesting edits if needed.

A request for CVE assignment has been submitted to MITRE based on the proposed impact description from comment #20, but please feel free to continue suggesting edits if needed.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-07: |  |  | [#23](/nova/%2Bbug/1890501/comments/23) |
| --- | --- | --- | --- |

Dumping some additional context in here after talking to danpb (libvirt/QEMU) about the underlying libvirt migrateToURI3 behaviour. It looks like v1.2.20 initial introduced the libvirt behaviour of copying the source persistent domain definition across to the destination in order to ensure something is persisted when VIR\_MIGRATE\_PARAM\_DEST\_XML wasn't provided but the VIR\_MIGRATE\_PERSIST\_DEST flag was. Later v1.3.4 then introduced VIR\_MIGRATE\_PARAM\_PERSIST\_XML to overwrite the persistent domain on the destionation.

We also found that the reason Nova is rolling back to the persistent domain during a soft reboot is due to our use of virDomainShutdown [1] and virDomainCreate [2] within \_soft\_reboot [3]. virDomainReboot [4] wouldn't actually cause this as libvirt doesn't allow QEMU to exit. It would also drop our requirement for transient domains entirely from Nova so is definitely something we should look into as a follow up to this.

[1] <https://libvirt.org/html/libvirt-libvirt-domain.html#virDomainShutdown>

[2] <https://libvirt.org/html/libvirt-libvirt-domain.html#virDomainLaunch>

[3] <https://github.com/openstack/nova/blob/9ecefeb836964c52a5a2969b15c82b11c51d32ab/nova/virt/libvirt/driver.py#L3157-L3203>

[4] <https://libvirt.org/html/libvirt-libvirt-domain.html#virDomainReboot>

Dumping some additional context in here after talking to danpb (libvirt/QEMU) about the underlying libvirt migrateToURI3 behaviour. It looks like v1.2.20 initial introduced the libvirt behaviour of copying the source persistent domain definition across to the destination in order to ensure something is persisted when VIR\_MIGRATE\_PARAM\_DEST\_XML wasn't provided but the VIR\_MIGRATE\_PERSIST\_DEST flag was. Later v1.3.4 then introduced VIR\_MIGRATE\_PARAM\_PERSIST\_XML to overwrite the persistent domain on the destionation.
We also found that the reason Nova is rolling back to the persistent domain during a soft reboot is due to our use of virDomainShutdown [1] and virDomainCreate [2] within \_soft\_reboot [3]. virDomainReboot [4] wouldn't actually cause this as libvirt doesn't allow QEMU to exit. It would also drop our requirement for transient domains entirely from Nova so is definitely something we should look into as a follow up to this.
[1] https://libvirt.org/html/libvirt-libvirt-domain.html#virDomainShutdown
[2] https://libvirt.org/html/libvirt-libvirt-domain.html#virDomainLaunch
[3] https://github.com/openstack/nova/blob/9ecefeb836964c52a5a2969b15c82b11c51d32ab/nova/virt/libvirt/driver.py#L3157-L3203
[4] https://libvirt.org/html/libvirt-libvirt-domain.html#virDomainReboot

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-07: |  |  | [#24](/nova/%2Bbug/1890501/comments/24) |
| --- | --- | --- | --- |

MITRE has assigned CVE-2020-17376 for tracking this.

MITRE has assigned CVE-2020-17376 for tracking this.

| **summary**: | Soft reboot after live-migration reverts instance to original source- domain XML+ domain XML (CVE-2020-17376) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-07:  [**Re: Soft reboot after live-migration reverts instance to original source domain XML (CVE-2020-17376)**](/nova/%2Bbug/1890501/comments/25) |  |  | [#25](/nova/%2Bbug/1890501/comments/25) |
| --- | --- | --- | --- |

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-master.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5399636/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-master.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5399636)
  (5.8 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-07: |  |  | [#26](/nova/%2Bbug/1890501/comments/26) |
| --- | --- | --- | --- |

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-ussuri.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5399637/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-ussuri.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5399637)
  (5.9 KiB,
  text/plain)

| 1 comments hidden Loading more comments | [view all 101 comments](?comments=all) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-07: |  |  | [#28](/nova/%2Bbug/1890501/comments/28) |
| --- | --- | --- | --- |

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-train.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5399639/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-train.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5399639)
  (6.0 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-07: |  |  | [#29](/nova/%2Bbug/1890501/comments/29) |
| --- | --- | --- | --- |

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-stein.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5399640/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-stein.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5399640)
  (6.0 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-07: |  |  | [#30](/nova/%2Bbug/1890501/comments/30) |
| --- | --- | --- | --- |

I've attached the revised patches for master, ussuri, train and stein. I've successfully ran unit, functional and pep8 against each locally, happy to attach the results if it would help.

The rocky and queens patches are slightly more involved due to MIN\_LIBVIRT\_VERSION lower than v1.3.4 but I should post them shortly for review as well.

I've attached the revised patches for master, ussuri, train and stein. I've successfully ran unit, functional and pep8 against each locally, happy to attach the results if it would help.
The rocky and queens patches are slightly more involved due to MIN\_LIBVIRT\_VERSION lower than v1.3.4 but I should post them shortly for review as well.

| 2 comments hidden Loading more comments | [view all 101 comments](?comments=all) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Garbutt (johngarbutt)](https://launchpad.net/~johngarbutt) wrote on 2020-08-10: |  |  | [#33](/nova/%2Bbug/1890501/comments/33) |
| --- | --- | --- | --- |

For those last two, did you really want: "if persistent\_xml\_param and destination\_xml:" to match the conditional we have on master?

I haven't heavily reviewed the test patches, but that looks good to me.

For those last two, did you really want: "if persistent\_xml\_param and destination\_xml:" to match the conditional we have on master?
I haven't heavily reviewed the test patches, but that looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-10: |  |  | [#34](/nova/%2Bbug/1890501/comments/34) |
| --- | --- | --- | --- |

John, yeah great point, I'll respin and attach later today. Would it help if we added a few additional Nova cores to this bug to help with these reviews?

Jeremy, what is the timeline for public disclosure or is it too early to say?

John, yeah great point, I'll respin and attach later today. Would it help if we added a few additional Nova cores to this bug to help with these reviews?
Jeremy, what is the timeline for public disclosure or is it too early to say?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-10: |  |  | [#35](/nova/%2Bbug/1890501/comments/35) |
| --- | --- | --- | --- |

If we can get tentative pre-approval for your patches I'd like to supply them to our downstream stakeholders and the private linux-distros ML as early as tomorrow, with advisory publication to follow a week later (so Tuesday, August 18th ideally). Our policy is to have at least three but no more than five "business" days between advance notification to downstream consumers under embargo and final publication: <https://security.openstack.org/vmt-process.html#embargoed-disclosure>

If we can get tentative pre-approval for your patches I'd like to supply them to our downstream stakeholders and the private linux-distros ML as early as tomorrow, with advisory publication to follow a week later (so Tuesday, August 18th ideally). Our policy is to have at least three but no more than five "business" days between advance notification to downstream consumers under embargo and final publication: https://security.openstack.org/vmt-process.html#embargoed-disclosure

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-10: |  |  | [#36](/nova/%2Bbug/1890501/comments/36) |
| --- | --- | --- | --- |

Also, yes as far as I'm concerned please directly subscribe any other reviewers who can help to confirm these patches expediently. I would prefer they be as finalized as possible (in the absence of public review and CI) before providing copies to anyone, lest we end up needing to send revised copies later in the embargo period and risk causing unwarranted confusion.

Also, yes as far as I'm concerned please directly subscribe any other reviewers who can help to confirm these patches expediently. I would prefer they be as finalized as possible (in the absence of public review and CI) before providing copies to anyone, lest we end up needing to send revised copies later in the embargo period and risk causing unwarranted confusion.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dan Smith (danms)](https://launchpad.net/~danms) wrote on 2020-08-10: |  |  | [#37](/nova/%2Bbug/1890501/comments/37) |
| --- | --- | --- | --- |

In the past, we needed to make sure the patches solved the problem, even if they weren't cosmetically perfect before allowing them to go public, after which the regular review process could proceed. I think we've also said in the past we only \*need\* patches for master in order to do that.

Regardless, I'm fine with the master and recent patches, and I trust that Lee's revision for the farther-back ones will get resolved. Especially given what we \*do\* care about in terms of supported versions, I'm fine moving forward once Lee posts his revisions. I'd much rather get this disclosed and the patches into gerrit sooner than later, as reviewing them here (especially for test and cosmetic reasons) is harder for everyone.

In the past, we needed to make sure the patches solved the problem, even if they weren't cosmetically perfect before allowing them to go public, after which the regular review process could proceed. I think we've also said in the past we only \*need\* patches for master in order to do that.
Regardless, I'm fine with the master and recent patches, and I trust that Lee's revision for the farther-back ones will get resolved. Especially given what we \*do\* care about in terms of supported versions, I'm fine moving forward once Lee posts his revisions. I'd much rather get this disclosed and the patches into gerrit sooner than later, as reviewing them here (especially for test and cosmetic reasons) is harder for everyone.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-10: |  |  | [#38](/nova/%2Bbug/1890501/comments/38) |
| --- | --- | --- | --- |

If we're doing coordinated disclosure under embargo, we're basically telling Linux distros and public cloud providers to prepare production packages/container images/whatever with these patches applied, with the expectation that these are at least very close to being what will merge to stable branches, so we want them to be as correct as we can reasonably make them while reviewing in private.

If we're doing coordinated disclosure under embargo, we're basically telling Linux distros and public cloud providers to prepare production packages/container images/whatever with these patches applied, with the expectation that these are at least very close to being what will merge to stable branches, so we want them to be as correct as we can reasonably make them while reviewing in private.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-10: |  |  | [#39](/nova/%2Bbug/1890501/comments/39) |
| --- | --- | --- | --- |

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-rocky.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5400503/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-rocky.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5400503)
  (14.5 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-10: |  |  | [#40](/nova/%2Bbug/1890501/comments/40) |
| --- | --- | --- | --- |

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-queens.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5400504/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-queens.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5400504)
  (10.1 KiB,
  text/plain)

| 21 comments hidden Loading more comments | [view all 101 comments](?comments=all) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-17: |  |  | [#62](/nova/%2Bbug/1890501/comments/62) |
| --- | --- | --- | --- |

It's also the case that we've relied (by extension of MITRE's expectations) on the title/subject of vulnerabilities as a means of quickly differentiating multiple defects which can have the same symptoms and expose similar risks. The title line is generally a very brief description of the problem to be fixed (often the same as the corresponding bug report's title), not a risk assessment or exploit scenario, nor a news headline.

It's also the case that we've relied (by extension of MITRE's expectations) on the title/subject of vulnerabilities as a means of quickly differentiating multiple defects which can have the same symptoms and expose similar risks. The title line is generally a very brief description of the problem to be fixed (often the same as the corresponding bug report's title), not a risk assessment or exploit scenario, nor a news headline.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-17: |  |  | [#63](/nova/%2Bbug/1890501/comments/63) |
| --- | --- | --- | --- |

Discussions of the advisory title aside, is there consensus on Lee's patches attached to comments #25-29 and #39-40? If so, I'll send the downstream notification tomorrow and propose a disclosure date of Tuesday, August 25 (one week from tomorrow). Are there any objections to this plan?

Discussions of the advisory title aside, is there consensus on Lee's patches attached to comments #25-29 and #39-40? If so, I'll send the downstream notification tomorrow and propose a disclosure date of Tuesday, August 25 (one week from tomorrow). Are there any objections to this plan?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Nick Tait (nickthetait)](https://launchpad.net/~nickthetait) wrote on 2020-08-17: |  |  | [#64](/nova/%2Bbug/1890501/comments/64) |
| --- | --- | --- | --- |

That date seems fine to me.

That date seems fine to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Garbutt (johngarbutt)](https://launchpad.net/~johngarbutt) wrote on 2020-08-18: |  |  | [#65](/nova/%2Bbug/1890501/comments/65) |
| --- | --- | --- | --- |

Those patches look good to my eyes. Thank you Lee.

The date sounds sensible, I am unsure on the usual timeframe, but that sounds like some warning combined with getting this information to our users as soon as we can.

I think that description looks OK. I do wonder if we want to say the VM reverts to using the libvirt XML it used on the source host after a soft reboot. I guess the patches make that very clear.

In terms of mitigations, could you ask users to hard reboot instances that have been live-migrated via the API/horizon. I think that would also reset the persistent libvirt XML? Is that correct, or is it worse than that? I think operators could look at the actions list for each instance to determine if it has been affected by a live-migration followed by a soft reboot, and target those instances for a hard reboot?

Maybe that is too much detail, especially for something we would need to test to be sure it helps?

Those patches look good to my eyes. Thank you Lee.
The date sounds sensible, I am unsure on the usual timeframe, but that sounds like some warning combined with getting this information to our users as soon as we can.
I think that description looks OK. I do wonder if we want to say the VM reverts to using the libvirt XML it used on the source host after a soft reboot. I guess the patches make that very clear.
In terms of mitigations, could you ask users to hard reboot instances that have been live-migrated via the API/horizon. I think that would also reset the persistent libvirt XML? Is that correct, or is it worse than that? I think operators could look at the actions list for each instance to determine if it has been affected by a live-migration followed by a soft reboot, and target those instances for a hard reboot?
Maybe that is too much detail, especially for something we would need to test to be sure it helps?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-18: |  |  | [#66](/nova/%2Bbug/1890501/comments/66) |
| --- | --- | --- | --- |

> In terms of mitigations, could you ask users to hard reboot

> instances that have been live-migrated via the API/horizon.

> I think that would also reset the persistent libvirt XML?

> Is that correct, or is it worse than that? I think operators

> could look at the actions list for each instance to

> determine if it has been affected by a live-migration

> followed by a soft reboot, and target those instances for

> a hard reboot?

Yes hard reboots will correct any instances that have already live migrated but I don't think we can ask users to do this as they can't know by default if their instances have been migrated.

Having operators review the event list for each instance and hard reboot any that have recently live migrated however seems like something we should document.

I'd also like to document a mitigation where admins disable soft reboots through policy until their env is patched. Forcing users to hard reboot and thus correct the persistent configuration.

> In terms of mitigations, could you ask users to hard reboot
> instances that have been live-migrated via the API/horizon.
> I think that would also reset the persistent libvirt XML?
> Is that correct, or is it worse than that? I think operators
> could look at the actions list for each instance to
> determine if it has been affected by a live-migration
> followed by a soft reboot, and target those instances for
> a hard reboot?
Yes hard reboots will correct any instances that have already live migrated but I don't think we can ask users to do this as they can't know by default if their instances have been migrated.
Having operators review the event list for each instance and hard reboot any that have recently live migrated however seems like something we should document.
I'd also like to document a mitigation where admins disable soft reboots through policy until their env is patched. Forcing users to hard reboot and thus correct the persistent configuration.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-18: |  |  | [#67](/nova/%2Bbug/1890501/comments/67) |
| --- | --- | --- | --- |

I'd like to get the pre-OSSA sent to downstream stakeholders (including the private linux-distros ML) today if possible. I could however add a sentence to the end of the impact description like this, if folks think it will help:

This only impacts deployments where users are allowed to perform soft reboots of server instances; it is recommended to disable soft reboots in policy (only allowing hard reboots) until the fix can be applied.

I'd like to get the pre-OSSA sent to downstream stakeholders (including the private linux-distros ML) today if possible. I could however add a sentence to the end of the impact description like this, if folks think it will help:
This only impacts deployments where users are allowed to perform soft reboots of server instances; it is recommended to disable soft reboots in policy (only allowing hard reboots) until the fix can be applied.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-18: |  |  | [#68](/nova/%2Bbug/1890501/comments/68) |
| --- | --- | --- | --- |

ACK sounds good to me Jeremy.

ACK sounds good to me Jeremy.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Garbutt (johngarbutt)](https://launchpad.net/~johngarbutt) wrote on 2020-08-18: |  |  | [#69](/nova/%2Bbug/1890501/comments/69) |
| --- | --- | --- | --- |

+1 that sounds good.

+1 that sounds good.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [melanie witt (melwitt)](https://launchpad.net/~melwitt) wrote on 2020-08-18: |  |  | [#70](/nova/%2Bbug/1890501/comments/70) |
| --- | --- | --- | --- |

The patches also LGTM.

The patches also LGTM.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-19: |  |  | [#71](/nova/%2Bbug/1890501/comments/71) |
| --- | --- | --- | --- |

Pre-OSSA downstream stakeholder notification with patches for all 6 branches has been sent, with a preliminary disclosure date and time of Tuesday, August 25 at 15:00 UTC.

Pre-OSSA downstream stakeholder notification with patches for all 6 branches has been sent, with a preliminary disclosure date and time of Tuesday, August 25 at 15:00 UTC.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-19: |  |  | [#72](/nova/%2Bbug/1890501/comments/72) |
| --- | --- | --- | --- |

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-pike.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5402795/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-pike.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5402795)
  (9.4 KiB,
  text/plain)

I was asked privately if I could provide a stable/pike version of this patch, I've posted a simple cherry-pick of the stable/queens change without testing it as I did with stable/{queens,rocky}.

I was asked privately if I could provide a stable/pike version of this patch, I've posted a simple cherry-pick of the stable/queens change without testing it as I did with stable/{queens,rocky}.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Nick Tait (nickthetait)](https://launchpad.net/~nickthetait) wrote on 2020-08-20: |  |  | [#73](/nova/%2Bbug/1890501/comments/73) |
| --- | --- | --- | --- |

If an attacker (Alice) used this flaw to gain access to a user's (Bob) drive. However, Bob uses full disk encryption and Alice doesn't know the decryption key, then the problem is largely averted right?

If an attacker (Alice) used this flaw to gain access to a user's (Bob) drive. However, Bob uses full disk encryption and Alice doesn't know the decryption key, then the problem is largely averted right?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-20: |  |  | [#74](/nova/%2Bbug/1890501/comments/74) |
| --- | --- | --- | --- |

It was suggested that Alice may also be able to write to the device, at a minimum wiping or corrupting the same copy of the volume Bob's system relies on and causing data loss or a denial of service.

It was suggested that Alice may also be able to write to the device, at a minimum wiping or corrupting the same copy of the volume Bob's system relies on and causing data loss or a denial of service.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-21: |  |  | [#75](/nova/%2Bbug/1890501/comments/75) |
| --- | --- | --- | --- |

Yes correct Jeremy, additionally Alice may end up with access to other underlying host resources that Bob is using such as pass-through PCI devices (nics, GPUs etc).

Yes correct Jeremy, additionally Alice may end up with access to other underlying host resources that Bob is using such as pass-through PCI devices (nics, GPUs etc).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mohammed Naser (mnaser)](https://launchpad.net/~mnaser) wrote on 2020-08-21: |  |  | [#76](/nova/%2Bbug/1890501/comments/76) |
| --- | --- | --- | --- |

I feel like this might come up pretty often but I think we can mention that deployment with RBD is not affected unless it's deployed with rbd\_volume\_local\_attach=True ?

I feel like this might come up pretty often but I think we can mention that deployment with RBD is not affected unless it's deployed with rbd\_volume\_local\_attach=True ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-25: |  |  | [#77](/nova/%2Bbug/1890501/comments/77) |
| --- | --- | --- | --- |

Mohammed, we could call out RBD but we might end up down a rabbit hole if we start talking about specific storage backends.

Jeremy, what is the schedule for the public disclosure today? When can I post patches to gerrit?

Mohammed, we could call out RBD but we might end up down a rabbit hole if we start talking about specific storage backends.
Jeremy, what is the schedule for the public disclosure today? When can I post patches to gerrit?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-25: |  |  | [#78](/nova/%2Bbug/1890501/comments/78) |
| --- | --- | --- | --- |

Apologies I missed that you had highlighted 15:00 UTC today in c#71.

Apologies I missed that you had highlighted 15:00 UTC today in c#71.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Balazs Gibizer (balazs-gibizer)](https://launchpad.net/~balazs-gibizer) wrote on 2020-08-25: |  |  | [#79](/nova/%2Bbug/1890501/comments/79) |
| --- | --- | --- | --- |

The attached patches looks good to me.

The attached patches looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-25: |  |  | [#80](/nova/%2Bbug/1890501/comments/80) |
| --- | --- | --- | --- |

Lee, yep thanks, a few minutes prior to 15:00 UTC I'll switch this bug to Public Security state and then you can start pushing changes to Gerrit which mention it (that way they hopefully get recorded in here automatically). Once they've all been pushed I'll finalize the advisory, since we include the change URLs in it.

Lee, yep thanks, a few minutes prior to 15:00 UTC I'll switch this bug to Public Security state and then you can start pushing changes to Gerrit which mention it (that way they hopefully get recorded in here automatically). Once they've all been pushed I'll finalize the advisory, since we include the change URLs in it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2020-08-25: |  |  | [#81](/nova/%2Bbug/1890501/comments/81) |
| --- | --- | --- | --- |

Lee: Please go ahead and push the changes to review for master, stable/ussuri, stable/train, stable/stein, stable/rocky, stable/queens, and stable/pike at your earliest convenience. Thanks!

Lee: Please go ahead and push the changes to review for master, stable/ussuri, stable/train, stable/stein, stable/rocky, stable/queens, and stable/pike at your earliest convenience. Thanks!

| **description**: | updated |
| --- | --- |
| **information type**: | Private Security → Public Security |
| Changed in ossa: | |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Fix proposed to nova (master)**](/nova/%2Bbug/1890501/comments/82) |  |  | [#82](/nova/%2Bbug/1890501/comments/82) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.opendev.org/747969>

Fix proposed to branch: master
Review: https://review.opendev.org/747969

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Lee Yarwood (lyarwood) |
| **status**: | New → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Fix proposed to nova (stable/ussuri)**](/nova/%2Bbug/1890501/comments/83) |  |  | [#83](/nova/%2Bbug/1890501/comments/83) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/ussuri

Review: <https://review.opendev.org/747972>

Fix proposed to branch: stable/ussuri
Review: https://review.opendev.org/747972

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Fix proposed to nova (stable/train)**](/nova/%2Bbug/1890501/comments/84) |  |  | [#84](/nova/%2Bbug/1890501/comments/84) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/train

Review: <https://review.opendev.org/747973>

Fix proposed to branch: stable/train
Review: https://review.opendev.org/747973

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Fix proposed to nova (stable/stein)**](/nova/%2Bbug/1890501/comments/85) |  |  | [#85](/nova/%2Bbug/1890501/comments/85) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/stein

Review: <https://review.opendev.org/747974>

Fix proposed to branch: stable/stein
Review: https://review.opendev.org/747974

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Fix proposed to nova (stable/rocky)**](/nova/%2Bbug/1890501/comments/86) |  |  | [#86](/nova/%2Bbug/1890501/comments/86) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/rocky

Review: <https://review.opendev.org/747975>

Fix proposed to branch: stable/rocky
Review: https://review.opendev.org/747975

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Fix proposed to nova (stable/queens)**](/nova/%2Bbug/1890501/comments/87) |  |  | [#87](/nova/%2Bbug/1890501/comments/87) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/queens

Review: <https://review.opendev.org/747976>

Fix proposed to branch: stable/queens
Review: https://review.opendev.org/747976

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Fix proposed to nova (stable/pike)**](/nova/%2Bbug/1890501/comments/88) |  |  | [#88](/nova/%2Bbug/1890501/comments/88) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/pike

Review: <https://review.opendev.org/747978>

Fix proposed to branch: stable/pike
Review: https://review.opendev.org/747978

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Related fix proposed to ossa (master)**](/nova/%2Bbug/1890501/comments/89) |  |  | [#89](/nova/%2Bbug/1890501/comments/89) |
| --- | --- | --- | --- |

Related fix proposed to branch: master

Review: <https://review.opendev.org/747980>

Related fix proposed to branch: master
Review: https://review.opendev.org/747980

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Related fix merged to ossa (master)**](/nova/%2Bbug/1890501/comments/90) |  |  | [#90](/nova/%2Bbug/1890501/comments/90) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/747980>

Committed: <https://git.openstack.org/cgit/openstack/ossa/commit/?id=2cdc6ae08730ba6693700664dd1a233bcffc1e96>

Submitter: Zuul

Branch: master

commit 2cdc6ae08730ba6693700664dd1a233bcffc1e96

Author: Jeremy Stanley <email address hidden>

Date: Tue Aug 25 14:45:19 2020 +0000

Add OSSA-2020-006 (CVE-2020-17376)

Change-Id: I4bb95e74551dc02664074a006f462683967f50f3

    Related-Bug: #1890501

Reviewed: https://review.opendev.org/747980
Committed: https://git.openstack.org/cgit/openstack/ossa/commit/?id=2cdc6ae08730ba6693700664dd1a233bcffc1e96
Submitter: Zuul
Branch: master
commit 2cdc6ae08730ba6693700664dd1a233bcffc1e96
Author: Jeremy Stanley <fungi@yuggoth.org>
Date: Tue Aug 25 14:45:19 2020 +0000
Add OSSA-2020-006 (CVE-2020-17376)
Change-Id: I4bb95e74551dc02664074a006f462683967f50f3
Related-Bug: #1890501

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-25:  [**Fix merged to nova (master)**](/nova/%2Bbug/1890501/comments/91) |  |  | [#91](/nova/%2Bbug/1890501/comments/91) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/747969>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff>

Submitter: Zuul

Branch: master

commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff

Author: Lee Yarwood <email address hidden>

Date: Wed Aug 5 23:00:06 2020 +0100

libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration

The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt

    v1.3.4 and is used to provide the new persistent configuration for the

    destination during a live migration:

<https://libvirt.org/html/libvirt-libvirt-domain.html#VIR_MIGRATE_PARAM_PERSIST_XML>

Without this parameter the persistent configuration on the destination

    will be the same as the original persistent configuration on the source

    when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.

As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML

    param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that

    a soft reboot by Nova of the instance after a live migration can revert

    the domain back to the original persistent configuration from the

    source.

Note that this is only possible in Nova as a soft reboot actually

    results in the virDomainShutdown and virDomainLaunch libvirt APIs being

    called that recreate the domain using the persistent configuration.

    virDomainReboot does not result in this but is not called at this time.

The impact of this on the instance after the soft reboot is pretty

    severe, host devices referenced in the original persistent configuration

    on the source may not exist or could even be used by other users on the

    destination. CPU and NUMA affinity could also differ drastically between

    the two hosts resulting in the instance being unable to start etc.

As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the

    VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the

    destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.

Co-authored-by: Tadayoshi Hosoya <email address hidden>

    Closes-Bug: #1890501

    Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98

Reviewed: https://review.opendev.org/747969
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff
Submitter: Zuul
Branch: master
commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Wed Aug 5 23:00:06 2020 +0100
libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration
The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt
v1.3.4 and is used to provide the new persistent configuration for the
destination during a live migration:
https://libvirt.org/html/libvirt-libvirt-domain.html#VIR\_MIGRATE\_PARAM\_PERSIST\_XML
Without this parameter the persistent configuration on the destination
will be the same as the original persistent configuration on the source
when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.
As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML
param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that
a soft reboot by Nova of the instance after a live migration can revert
the domain back to the original persistent configuration from the
source.
Note that this is only possible in Nova as a soft reboot actually
results in the virDomainShutdown and virDomainLaunch libvirt APIs being
called that recreate the domain using the persistent configuration.
virDomainReboot does not result in this but is not called at this time.
The impact of this on the instance after the soft reboot is pretty
severe, host devices referenced in the original persistent configuration
on the source may not exist or could even be used by other users on the
destination. CPU and NUMA affinity could also differ drastically between
the two hosts resulting in the instance being unable to start etc.
As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the
VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the
destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.
Co-authored-by: Tadayoshi Hosoya <tad-hosoya@wr.jp.nec.com>
Closes-Bug: #1890501
Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-26:  [**Fix merged to nova (stable/ussuri)**](/nova/%2Bbug/1890501/comments/92) |  |  | [#92](/nova/%2Bbug/1890501/comments/92) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/747972>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=bbf9d1de06e9991acd968fceee899a8df3776d60>

Submitter: Zuul

Branch: stable/ussuri

commit bbf9d1de06e9991acd968fceee899a8df3776d60

Author: Lee Yarwood <email address hidden>

Date: Wed Aug 5 23:00:06 2020 +0100

libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration

The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt

    v1.3.4 and is used to provide the new persistent configuration for the

    destination during a live migration:

<https://libvirt.org/html/libvirt-libvirt-domain.html#VIR_MIGRATE_PARAM_PERSIST_XML>

Without this parameter the persistent configuration on the destination

    will be the same as the original persistent configuration on the source

    when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.

As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML

    param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that

    a soft reboot by Nova of the instance after a live migration can revert

    the domain back to the original persistent configuration from the

    source.

Note that this is only possible in Nova as a soft reboot actually

    results in the virDomainShutdown and virDomainLaunch libvirt APIs being

    called that recreate the domain using the persistent configuration.

    virDomainReboot does not result in this but is not called at this time.

The impact of this on the instance after the soft reboot is pretty

    severe, host devices referenced in the original persistent configuration

    on the source may not exist or could even be used by other users on the

    destination. CPU and NUMA affinity could also differ drastically between

    the two hosts resulting in the instance being unable to start etc.

As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the

    VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the

    destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.

NOTE(lyarwood): A simple change to test\_migrate\_v3\_unicode is included

    as Iccce0ab50eee515e533ab36c8e7adc10cb3f7019 had removed this from

    master.

Co-authored-by: Tadayoshi Hosoya <email address hidden>

    Closes-Bug: #1890501

    Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98

    (cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)

Reviewed: https://review.opendev.org/747972
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=bbf9d1de06e9991acd968fceee899a8df3776d60
Submitter: Zuul
Branch: stable/ussuri
commit bbf9d1de06e9991acd968fceee899a8df3776d60
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Wed Aug 5 23:00:06 2020 +0100
libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration
The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt
v1.3.4 and is used to provide the new persistent configuration for the
destination during a live migration:
https://libvirt.org/html/libvirt-libvirt-domain.html#VIR\_MIGRATE\_PARAM\_PERSIST\_XML
Without this parameter the persistent configuration on the destination
will be the same as the original persistent configuration on the source
when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.
As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML
param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that
a soft reboot by Nova of the instance after a live migration can revert
the domain back to the original persistent configuration from the
source.
Note that this is only possible in Nova as a soft reboot actually
results in the virDomainShutdown and virDomainLaunch libvirt APIs being
called that recreate the domain using the persistent configuration.
virDomainReboot does not result in this but is not called at this time.
The impact of this on the instance after the soft reboot is pretty
severe, host devices referenced in the original persistent configuration
on the source may not exist or could even be used by other users on the
destination. CPU and NUMA affinity could also differ drastically between
the two hosts resulting in the instance being unable to start etc.
As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the
VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the
destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.
NOTE(lyarwood): A simple change to test\_migrate\_v3\_unicode is included
as Iccce0ab50eee515e533ab36c8e7adc10cb3f7019 had removed this from
master.
Co-authored-by: Tadayoshi Hosoya <tad-hosoya@wr.jp.nec.com>
Closes-Bug: #1890501
Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98
(cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)

| **tags**: | added: in-stable-ussuri |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2020-08-26:  [**Re: Soft reboot after live-migration reverts instance to original source domain XML (CVE-2020-17376)**](/nova/%2Bbug/1890501/comments/93) |  |  | [#93](/nova/%2Bbug/1890501/comments/93) |
| --- | --- | --- | --- |

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-newton.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5404693/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-newton.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5404693)
  (9.5 KiB,
  text/plain)

I've been asked to provide a version of the patch against the newton-eol tag.

Please find this attached, however I've not executed tox -e {pep8,unit,functional} tests against it and it is just provided as a guide for how this can be resolved for Newton.

I've been asked to provide a version of the patch against the newton-eol tag.
Please find this attached, however I've not executed tox -e {pep8,unit,functional} tests against it and it is just provided as a guide for how this can be resolved for Newton.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-26:  [**Fix merged to nova (stable/train)**](/nova/%2Bbug/1890501/comments/94) |  |  | [#94](/nova/%2Bbug/1890501/comments/94) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/747973>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=6a07edb4b29d8bfb5c86ed14263f7cd7525958c1>

Submitter: Zuul

Branch: stable/train

commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1

Author: Lee Yarwood <email address hidden>

Date: Wed Aug 5 23:00:06 2020 +0100

libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration

The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt

    v1.3.4 and is used to provide the new persistent configuration for the

    destination during a live migration:

<https://libvirt.org/html/libvirt-libvirt-domain.html#VIR_MIGRATE_PARAM_PERSIST_XML>

Without this parameter the persistent configuration on the destination

    will be the same as the original persistent configuration on the source

    when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.

As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML

    param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that

    a soft reboot by Nova of the instance after a live migration can revert

    the domain back to the original persistent configuration from the

    source.

Note that this is only possible in Nova as a soft reboot actually

    results in the virDomainShutdown and virDomainLaunch libvirt APIs being

    called that recreate the domain using the persistent configuration.

    virDomainReboot does not result in this but is not called at this time.

The impact of this on the instance after the soft reboot is pretty

    severe, host devices referenced in the original persistent configuration

    on the source may not exist or could even be used by other users on the

    destination. CPU and NUMA affinity could also differ drastically between

    the two hosts resulting in the instance being unable to start etc.

As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the

    VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the

    destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.

Co-authored-by: Tadayoshi Hosoya <email address hidden>

    Closes-Bug: #1890501

    Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98

    (cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)

    (cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)

Reviewed: https://review.opendev.org/747973
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=6a07edb4b29d8bfb5c86ed14263f7cd7525958c1
Submitter: Zuul
Branch: stable/train
commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Wed Aug 5 23:00:06 2020 +0100
libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration
The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt
v1.3.4 and is used to provide the new persistent configuration for the
destination during a live migration:
https://libvirt.org/html/libvirt-libvirt-domain.html#VIR\_MIGRATE\_PARAM\_PERSIST\_XML
Without this parameter the persistent configuration on the destination
will be the same as the original persistent configuration on the source
when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.
As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML
param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that
a soft reboot by Nova of the instance after a live migration can revert
the domain back to the original persistent configuration from the
source.
Note that this is only possible in Nova as a soft reboot actually
results in the virDomainShutdown and virDomainLaunch libvirt APIs being
called that recreate the domain using the persistent configuration.
virDomainReboot does not result in this but is not called at this time.
The impact of this on the instance after the soft reboot is pretty
severe, host devices referenced in the original persistent configuration
on the source may not exist or could even be used by other users on the
destination. CPU and NUMA affinity could also differ drastically between
the two hosts resulting in the instance being unable to start etc.
As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the
VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the
destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.
Co-authored-by: Tadayoshi Hosoya <tad-hosoya@wr.jp.nec.com>
Closes-Bug: #1890501
Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98
(cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)
(cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-08-28:  [**Fix merged to nova (stable/stein)**](/nova/%2Bbug/1890501/comments/95) |  |  | [#95](/nova/%2Bbug/1890501/comments/95) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/747974>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=b9ea91d17703f5b324a50727b6503ace0f4e95eb>

Submitter: Zuul

Branch: stable/stein

commit b9ea91d17703f5b324a50727b6503ace0f4e95eb

Author: Lee Yarwood <email address hidden>

Date: Wed Aug 5 23:00:06 2020 +0100

libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration

The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt

    v1.3.4 and is used to provide the new persistent configuration for the

    destination during a live migration:

<https://libvirt.org/html/libvirt-libvirt-domain.html#VIR_MIGRATE_PARAM_PERSIST_XML>

Without this parameter the persistent configuration on the destination

    will be the same as the original persistent configuration on the source

    when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.

As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML

    param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that

    a soft reboot by Nova of the instance after a live migration can revert

    the domain back to the original persistent configuration from the

    source.

Note that this is only possible in Nova as a soft reboot actually

    results in the virDomainShutdown and virDomainLaunch libvirt APIs being

    called that recreate the domain using the persistent configuration.

    virDomainReboot does not result in this but is not called at this time.

The impact of this on the instance after the soft reboot is pretty

    severe, host devices referenced in the original persistent configuration

    on the source may not exist or could even be used by other users on the

    destination. CPU and NUMA affinity could also differ drastically between

    the two hosts resulting in the instance being unable to start etc.

As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the

    VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the

    destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.

Co-authored-by: Tadayoshi Hosoya <email address hidden>

    Closes-Bug: #1890501

    Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98

    (cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)

    (cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)

    (cherry picked from commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1)

Reviewed: https://review.opendev.org/747974
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=b9ea91d17703f5b324a50727b6503ace0f4e95eb
Submitter: Zuul
Branch: stable/stein
commit b9ea91d17703f5b324a50727b6503ace0f4e95eb
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Wed Aug 5 23:00:06 2020 +0100
libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration
The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt
v1.3.4 and is used to provide the new persistent configuration for the
destination during a live migration:
https://libvirt.org/html/libvirt-libvirt-domain.html#VIR\_MIGRATE\_PARAM\_PERSIST\_XML
Without this parameter the persistent configuration on the destination
will be the same as the original persistent configuration on the source
when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.
As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML
param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that
a soft reboot by Nova of the instance after a live migration can revert
the domain back to the original persistent configuration from the
source.
Note that this is only possible in Nova as a soft reboot actually
results in the virDomainShutdown and virDomainLaunch libvirt APIs being
called that recreate the domain using the persistent configuration.
virDomainReboot does not result in this but is not called at this time.
The impact of this on the instance after the soft reboot is pretty
severe, host devices referenced in the original persistent configuration
on the source may not exist or could even be used by other users on the
destination. CPU and NUMA affinity could also differ drastically between
the two hosts resulting in the instance being unable to start etc.
As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the
VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the
destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.
Co-authored-by: Tadayoshi Hosoya <tad-hosoya@wr.jp.nec.com>
Closes-Bug: #1890501
Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98
(cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)
(cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)
(cherry picked from commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1)

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2020-08-30

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Jeremy Stanley (fungi) |
| **importance**: | Undecided → High |
| **status**: | In Progress → Fix Released |
| **summary**: | - Soft reboot after live-migration reverts instance to original source- domain XML (CVE-2020-17376)+ [OSSA-2020-006] Soft reboot after live-migration reverts instance to+ original source domain XML (CVE-2020-17376) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-09-03:  [**Fix merged to nova (stable/rocky)**](/nova/%2Bbug/1890501/comments/96) |  |  | [#96](/nova/%2Bbug/1890501/comments/96) |
| --- | --- | --- | --- |

Reviewed: <https://review.opendev.org/747975>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=c438fd9a0eb1903306a53ab44e3ae80660d8a429>

Submitter: Zuul

Branch: stable/rocky

commit c438fd9a0eb1903306a53ab44e3ae80660d8a429

Author: Lee Yarwood <email address hidden>

Date: Wed Aug 5 23:00:06 2020 +0100

libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration

The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt

    v1.3.4 and is used to provide the new persistent configuration for the

    destination during a live migration:

<https://libvirt.org/html/libvirt-libvirt-domain.html#VIR_MIGRATE_PARAM_PERSIST_XML>

Without this parameter the persistent configuration on the destination

    will be the same as the original persistent configuration on the source

    when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.

As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML

    param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that

    a soft reboot by Nova of the instance after a live migration can revert

    the domain back to the original persistent configuration from the

    source.

Note that this is only possible in Nova as a soft reboot actually

    results in the virDomainShutdown and virDomainLaunch libvirt APIs being

    called that recreate the domain using the persistent configuration.

    virDomainReboot does not result in this but is not called at this time.

The impact of this on the instance after the soft reboot is pretty

    severe, host devices referenced in the original persistent configuration

    on the source may not exist or could even be used by other users on the

    destination. CPU and NUMA affinity could also differ drastically between

    the two hosts resulting in the instance being unable to start etc.

As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the

    VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the

    destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.

NOTE(lyarwood): As this is no longer the case from stable/rocky the

    change is slightly more involved introducing a persistent\_xml\_param

    kwarg that is used from \_live\_migration\_operation within the driver

    based on the availability of libvirt v1.3.4 on the source host.

Co-authored-by: Tadayoshi Hosoya <email address hidden>

    Closes-Bug: #1890501

    Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98

    (cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)

    (cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)

    (cherry picked from commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1)

    (cherry picked from commit b9ea91d17703f5b324a50727b6503ace0f4e95eb)

Reviewed: https://review.opendev.org/747975
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=c438fd9a0eb1903306a53ab44e3ae80660d8a429
Submitter: Zuul
Branch: stable/rocky
commit c438fd9a0eb1903306a53ab44e3ae80660d8a429
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Wed Aug 5 23:00:06 2020 +0100
libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration
The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt
v1.3.4 and is used to provide the new persistent configuration for the
destination during a live migration:
https://libvirt.org/html/libvirt-libvirt-domain.html#VIR\_MIGRATE\_PARAM\_PERSIST\_XML
Without this parameter the persistent configuration on the destination
will be the same as the original persistent configuration on the source
when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.
As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML
param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that
a soft reboot by Nova of the instance after a live migration can revert
the domain back to the original persistent configuration from the
source.
Note that this is only possible in Nova as a soft reboot actually
results in the virDomainShutdown and virDomainLaunch libvirt APIs being
called that recreate the domain using the persistent configuration.
virDomainReboot does not result in this but is not called at this time.
The impact of this on the instance after the soft reboot is pretty
severe, host devices referenced in the original persistent configuration
on the source may not exist or could even be used by other users on the
destination. CPU and NUMA affinity could also differ drastically between
the two hosts resulting in the instance being unable to start etc.
As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the
VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the
destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.
NOTE(lyarwood): As this is no longer the case from stable/rocky the
change is slightly more involved introducing a persistent\_xml\_param
kwarg that is used from \_live\_migration\_operation within the driver
based on the availability of libvirt v1.3.4 on the source host.
Co-authored-by: Tadayoshi Hosoya <tad-hosoya@wr.jp.nec.com>
Closes-Bug: #1890501
Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98
(cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)
(cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)
(cherry picked from commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1)
(cherry picked from commit b9ea91d17703f5b324a50727b6503ace0f4e95eb)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-09-19:  [**Fix merged to nova (stable/queens)**](/nova/%2Bbug/1890501/comments/97) |  |  | [#97](/nova/%2Bbug/1890501/comments/97) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/nova/%2Bbug/1890501/comments/97/%2Bdownload) (3.2 KiB)

Reviewed: <https://review.opendev.org/747976>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=a721ca5f510ce3c8ef24f22dac9e475b3d7651db>

Submitter: Zuul

Branch: stable/queens

commit a721ca5f510ce3c8ef24f22dac9e475b3d7651db

Author: Lee Yarwood <email address hidden>

Date: Wed Aug 5 23:00:06 2020 +0100

libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration

The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt

    v1.3.4 and is used to provide the new persistent configuration for the

    destination during a live migration:

<https://libvirt.org/html/libvirt-libvirt-domain.html#VIR_MIGRATE_PARAM_PERSIST_XML>

Without this parameter the persistent configuration on the destination

    will be the same as the original persistent configuration on the source

    when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.

As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML

    param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that

    a soft reboot by Nova of the instance after a live migration can revert

    the domain back to the original persistent configuration from the

    source.

Note that this is only possible in Nova as a soft reboot actually

    results in the virDomainShutdown and virDomainLaunch libvirt APIs being

    called that recreate the domain using the persistent configuration.

    virDomainReboot does not result in this but is not called at this time.

The impact of this on the instance after the soft reboot is pretty

    severe, host devices referenced in the original persistent configuration

    on the source may not exist or could even be used by other users on the

    destination. CPU and NUMA affinity could also differ drastically between

    the two hosts resulting in the instance being unable to start etc.

As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the

    VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the

    destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.

Conflicts:

        nova/tests/unit/virt/libvirt/test\_driver.py

        nova/tests/unit/virt/test\_virt\_drivers.py

        nova/virt/libvirt/driver.py

        nova/virt/libvirt/guest.py

NOTE(lyarwood): Conflicts as If0a091a7441f2c3269148e40ececc3696d69684c

    (libvirt: Bump MIN\_{LIBVIRT,QEMU}\_VERSION for "Rocky"),

    Id9ee1feeadf612fa79c3d280cee3a614a74a00a7 (libvirt: Remove usage of

    migrateToURI{2} APIs) and I3af68f745ffb23ef2b5407ccec0bebf4b2645734

    (Remove mox in test\_virt\_drivers.py) are not present on stable/queens.

    As a result we can now add the parameter directly in

    \_live\_migration\_operation before calling down into guest.migrate.

Co-authored-by: Tadayoshi Hosoya <email address hidden>

    Closes-Bug: #1890501

    Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98

    (cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)

    (cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)

    (cherry picked from commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1)

    (cherry picked from commit b9ea91d17...

[Read more...](/nova/%2Bbug/1890501/comments/97)

Reviewed: https://review.opendev.org/747976
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=a721ca5f510ce3c8ef24f22dac9e475b3d7651db
Submitter: Zuul
Branch: stable/queens
commit a721ca5f510ce3c8ef24f22dac9e475b3d7651db
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Wed Aug 5 23:00:06 2020 +0100
libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration
The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt
v1.3.4 and is used to provide the new persistent configuration for the
destination during a live migration:
https://libvirt.org/html/libvirt-libvirt-domain.html#VIR\_MIGRATE\_PARAM\_PERSIST\_XML
Without this parameter the persistent configuration on the destination
will be the same as the original persistent configuration on the source
when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.
As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML
param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that
a soft reboot by Nova of the instance after a live migration can revert
the domain back to the original persistent configuration from the
source.
Note that this is only possible in Nova as a soft reboot actually
results in the virDomainShutdown and virDomainLaunch libvirt APIs being
called that recreate the domain using the persistent configuration.
virDomainReboot does not result in this but is not called at this time.
The impact of this on the instance after the soft reboot is pretty
severe, host devices referenced in the original persistent configuration
on the source may not exist or could even be used by other users on the
destination. CPU and NUMA affinity could also differ drastically between
the two hosts resulting in the instance being unable to start etc.
As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the
VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the
destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.
Conflicts:
nova/tests/unit/virt/libvirt/test\_driver.py
nova/tests/unit/virt/test\_virt\_drivers.py
nova/virt/libvirt/driver.py
nova/virt/libvirt/guest.py
NOTE(lyarwood): Conflicts as If0a091a7441f2c3269148e40ececc3696d69684c
(libvirt: Bump MIN\_{LIBVIRT,QEMU}\_VERSION for "Rocky"),
Id9ee1feeadf612fa79c3d280cee3a614a74a00a7 (libvirt: Remove usage of
migrateToURI{2} APIs) and I3af68f745ffb23ef2b5407ccec0bebf4b2645734
(Remove mox in test\_virt\_drivers.py) are not present on stable/queens.
As a result we can now add the parameter directly in
\_live\_migration\_operation before calling down into guest.migrate.
Co-authored-by: Tadayoshi Hosoya <tad-hosoya@wr.jp.nec.com>
Closes-Bug: #1890501
Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98
(cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)
(cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)
(cherry picked from commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1)
(cherry picked from commit b9ea91d17703f5b324a50727b6503ace0f4e95eb)
(cherry picked from commit c438fd9a0eb1903306a53ab44e3ae80660d8a429)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2020-09-25:  [**Fix merged to nova (stable/pike)**](/nova/%2Bbug/1890501/comments/98) |  |  | [#98](/nova/%2Bbug/1890501/comments/98) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/nova/%2Bbug/1890501/comments/98/%2Bdownload) (3.6 KiB)

Reviewed: <https://review.opendev.org/747978>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=2faf17995dd9daa6f0b91e44be43264e447c678d>

Submitter: Zuul

Branch: stable/pike

commit 2faf17995dd9daa6f0b91e44be43264e447c678d

Author: Lee Yarwood <email address hidden>

Date: Wed Aug 5 23:00:06 2020 +0100

libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration

The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt

    v1.3.4 and is used to provide the new persistent configuration for the

    destination during a live migration:

<https://libvirt.org/html/libvirt-libvirt-domain.html#VIR_MIGRATE_PARAM_PERSIST_XML>

Without this parameter the persistent configuration on the destination

    will be the same as the original persistent configuration on the source

    when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.

As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML

    param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that

    a soft reboot by Nova of the instance after a live migration can revert

    the domain back to the original persistent configuration from the

    source.

Note that this is only possible in Nova as a soft reboot actually

    results in the virDomainShutdown and virDomainLaunch libvirt APIs being

    called that recreate the domain using the persistent configuration.

    virDomainReboot does not result in this but is not called at this time.

The impact of this on the instance after the soft reboot is pretty

    severe, host devices referenced in the original persistent configuration

    on the source may not exist or could even be used by other users on the

    destination. CPU and NUMA affinity could also differ drastically between

    the two hosts resulting in the instance being unable to start etc.

As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the

    VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the

    destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.

Conflicts:

        nova/tests/unit/virt/libvirt/test\_driver.py

        nova/virt/libvirt/driver.py

NOTE(melwitt): Conflicts in driver.py are because changes:

I6ac601e633ab2b0a67b4802ff880865255188a93

        (libvirt: Provide VGPU inventory for a single GPU type)

      I947bf0ad34a48e9182a3dc016f47f0c9f71c9d7b

        ([libvirt] Allow multiple volume attachments)

      Ibfa64f18bbd2fb70db7791330ed1a64fe61c1355

        (libvirt: QEMU native LUKS decryption for encrypted volumes)

      If2035cac931c42c440d61ba97ebc7e9e92141a28

        (libvirt: Rework 'EBUSY' (SIGKILL) error handling code path)

      Ibf210dd27972fed2651d6c9bd73a0bcf352c8bab

        (libvirt: create vGPU for instance)

are not in Pike. Conflict in test\_driver.py is because the Pike

    backport of change I9b545ca8aa6dd7b41ddea2d333190c9fbed19bc1 explicitly

    asserts byte string destination\_xml in

    \_test\_live\_migration\_block\_migration\_flags and the change is not in

    Queens where this is being backported from.

Co-authored-by: Tadayoshi Hosoya <<email address hidden>...

[Read more...](/nova/%2Bbug/1890501/comments/98)

Reviewed: https://review.opendev.org/747978
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=2faf17995dd9daa6f0b91e44be43264e447c678d
Submitter: Zuul
Branch: stable/pike
commit 2faf17995dd9daa6f0b91e44be43264e447c678d
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Wed Aug 5 23:00:06 2020 +0100
libvirt: Provide VIR\_MIGRATE\_PARAM\_PERSIST\_XML during live migration
The VIR\_MIGRATE\_PARAM\_PERSIST\_XML parameter was introduced in libvirt
v1.3.4 and is used to provide the new persistent configuration for the
destination during a live migration:
https://libvirt.org/html/libvirt-libvirt-domain.html#VIR\_MIGRATE\_PARAM\_PERSIST\_XML
Without this parameter the persistent configuration on the destination
will be the same as the original persistent configuration on the source
when the VIR\_MIGRATE\_PERSIST\_DEST flag is provided.
As Nova does not currently provide the VIR\_MIGRATE\_PARAM\_PERSIST\_XML
param but does provide the VIR\_MIGRATE\_PERSIST\_DEST flag this means that
a soft reboot by Nova of the instance after a live migration can revert
the domain back to the original persistent configuration from the
source.
Note that this is only possible in Nova as a soft reboot actually
results in the virDomainShutdown and virDomainLaunch libvirt APIs being
called that recreate the domain using the persistent configuration.
virDomainReboot does not result in this but is not called at this time.
The impact of this on the instance after the soft reboot is pretty
severe, host devices referenced in the original persistent configuration
on the source may not exist or could even be used by other users on the
destination. CPU and NUMA affinity could also differ drastically between
the two hosts resulting in the instance being unable to start etc.
As MIN\_LIBVIRT\_VERSION is now > v1.3.4 this change simply includes the
VIR\_MIGRATE\_PARAM\_PERSIST\_XML param using the same updated XML for the
destination as is already provided to VIR\_MIGRATE\_PARAM\_DEST\_XML.
Conflicts:
nova/tests/unit/virt/libvirt/test\_driver.py
nova/virt/libvirt/driver.py
NOTE(melwitt): Conflicts in driver.py are because changes:
I6ac601e633ab2b0a67b4802ff880865255188a93
(libvirt: Provide VGPU inventory for a single GPU type)
I947bf0ad34a48e9182a3dc016f47f0c9f71c9d7b
([libvirt] Allow multiple volume attachments)
Ibfa64f18bbd2fb70db7791330ed1a64fe61c1355
(libvirt: QEMU native LUKS decryption for encrypted volumes)
If2035cac931c42c440d61ba97ebc7e9e92141a28
(libvirt: Rework 'EBUSY' (SIGKILL) error handling code path)
Ibf210dd27972fed2651d6c9bd73a0bcf352c8bab
(libvirt: create vGPU for instance)
are not in Pike. Conflict in test\_driver.py is because the Pike
backport of change I9b545ca8aa6dd7b41ddea2d333190c9fbed19bc1 explicitly
asserts byte string destination\_xml in
\_test\_live\_migration\_block\_migration\_flags and the change is not in
Queens where this is being backported from.
Co-authored-by: Tadayoshi Hosoya <tad-hosoya@wr.jp.nec.com>
Closes-Bug: #1890501
Change-Id: Ia3f1d8e83cbc574ce5cb440032e12bbcb1e10e98
(cherry picked from commit 1bb8ee95d4c3ddc3f607ac57526b75af1b7fbcff)
(cherry picked from commit bbf9d1de06e9991acd968fceee899a8df3776d60)
(cherry picked from commit 6a07edb4b29d8bfb5c86ed14263f7cd7525958c1)
(cherry picked from commit b9ea91d17703f5b324a50727b6503ace0f4e95eb)
(cherry picked from commit c438fd9a0eb1903306a53ab44e3ae80660d8a429)
(cherry picked from commit a721ca5f510ce3c8ef24f22dac9e475b3d7651db)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2022-08-01:  [**Fix included in openstack/nova pike-eol**](/nova/%2Bbug/1890501/comments/99) |  |  | [#99](/nova/%2Bbug/1890501/comments/99) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/nova pike-eol release.

This issue was fixed in the openstack/nova pike-eol release.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2022-11-11:  [**Fix included in openstack/nova queens-eol**](/nova/%2Bbug/1890501/comments/100) |  |  | [#100](/nova/%2Bbug/1890501/comments/100) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/nova queens-eol release.

This issue was fixed in the openstack/nova queens-eol release.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2022-11-11:  [**Fix included in openstack/nova rocky-eol**](/nova/%2Bbug/1890501/comments/101) |  |  | [#101](/nova/%2Bbug/1890501/comments/101) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/nova rocky-eol release.

This issue was fixed in the openstack/nova rocky-eol release.

[See full activity log](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Bactivity)

Displaying first 40
and last 40
comments.
[View all 101
comments](/nova/%2Bbug/1890501?comments=all) or [add a comment](/nova/%2Bbug/1890501?comments=all).

* [Report a bug](/nova/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/nova/%2Bbug/1890501/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-master.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5399636/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-master.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5399636 "Change patch details")
* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-ussuri.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5399637/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-ussuri.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5399637 "Change patch details")
* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-train.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5399639/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-train.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5399639 "Change patch details")
* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-stein.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5399640/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-stein.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5399640 "Change patch details")
* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-rocky.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5400503/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-rocky.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5400503 "Change patch details")
* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-queens.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5400504/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-queens.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5400504 "Change patch details")
* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-pike.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5402795/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-pike.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5402795 "Change patch details")
* [0001-libvirt-Provide-VIR\_MIGRATE\_PARAM\_PERSIST\_XML-newton.patch](https://bugs.launchpad.net/nova/%2Bbug/1890501/%2Battachment/5404693/%2Bfiles/0001-libvirt-Provide-VIR_MIGRATE_PARAM_PERSIST_XML-newton.patch)
  [Edit](/nova/%2Bbug/1890501/%2Battachment/5404693 "Change patch details")

* [Add patch](/nova/%2Bbug/1890501/%2Baddcomment?field.patch=on)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_623a58af_20250119_132809.html ===

[Log in / Register](https://launchpad.net/~lyarwood/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~lyarwood)

## [Lee Yarwood](https://launchpad.net/~lyarwood)

* Overview
* [Code](https://code.launchpad.net/~lyarwood)
* [Bugs](https://bugs.launchpad.net/~lyarwood)
* [Blueprints](https://blueprints.launchpad.net/~lyarwood)
* [Translations](https://translations.launchpad.net/~lyarwood)
* [Answers](https://answers.launchpad.net/~lyarwood)

* [Related packages](https://launchpad.net/~lyarwood/%2Brelated-packages)
* [Related projects](https://launchpad.net/~lyarwood/%2Brelated-projects)

## User information

Launchpad Id:
lyarwood

Email:
[Log in](%2Blogin) for email information.

Member since:
2012-07-31

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

A5D1938588CB7E5FBE646618BCA66E33F6722D76

SSH keys:

[lyarwood@redhat.com](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~lyarwood/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**lyarwood**
 on
**irc.freenode.net**

## [All bugs in progress](https://launchpad.net/~lyarwood/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1917750 [Running parallel iSCSI/LVM c-vol backends is causing random failures in CI](https://bugs.launchpad.net/cinder/%2Bbug/1917750) |  |
| --- | --- | --- |
| in [Cinder](/cinder) | | |

| --- | --- | --- | --- | --- | --- |
||  | #1905701 [Do not recreate libvirt secret when one already exists on the host during a host reboot](https://bugs.launchpad.net/nova/stein/%2Bbug/1905701) |  |
| --- | --- | --- |
| in [OpenStack Compute (nova)](/nova) | | |

||  | #1905701 [Do not recreate libvirt secret when one already exists on the host during a host reboot](https://bugs.launchpad.net/nova/train/%2Bbug/1905701) |  |
| --- | --- | --- |
| in [OpenStack Compute (nova)](/nova) | | |

||  | #1905701 [Do not recreate libvirt secret when one already exists on the host during a host reboot](https://bugs.launchpad.net/nova/ussuri/%2Bbug/1905701) |  |
| --- | --- | --- |
| in [OpenStack Compute (nova)](/nova) | | |

||  | #1905701 [Do not recreate libvirt secret when one already exists on the host during a host reboot](https://bugs.launchpad.net/nova/rocky/%2Bbug/1905701) |  |
| --- | --- | --- |
| in [OpenStack Compute (nova)](/nova) | | |

## Latest memberships

Lee Yarwood is not an
active member of any Launchpad teams.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from translations.launchpad.net_13b83fdf_20250119_132808.html ===

[Log in / Register](https://translations.launchpad.net/nova/%2Blogin)

[![](https://launchpadlibrarian.net/324577028/nova64.png)](https://launchpad.net/nova)

## [OpenStack Compute (nova)](https://launchpad.net/nova)

* [Overview](https://launchpad.net/nova)
* [Code](https://code.launchpad.net/nova)
* [Bugs](https://bugs.launchpad.net/nova)
* [Blueprints](https://blueprints.launchpad.net/nova)
* Translations
* [Answers](https://answers.launchpad.net/nova)

# Translation overview

[Help for translations](https://help.launchpad.net/Translations)

### Translation details

Launchpad currently recommends translating
[OpenStack Compute (nova) trunk series](/nova/trunk).

To see all the translation files that are waiting to be
imported, please look at
[OpenStack Compute (nova) import queue](/nova/%2Bimports).

### Permissions

[OpenStack Compute (nova)](https://launchpad.net/nova) is translated
with [Open](/%2Bhelp-translations/permissions-policies.html)
permissions.

### All translatable series

* [OpenStack Compute (nova) trunk series](/nova/trunk/%2Btranslations)
* [OpenStack Compute (nova) bexar series](/nova/bexar/%2Btranslations)
* [OpenStack Compute (nova) cactus series](/nova/cactus/%2Btranslations)

### All translatable distribution packages

* [nova source package in Plucky](/ubuntu/plucky/%2Bsources/nova/%2Btranslations)
* [nova source package in Oracular](/ubuntu/oracular/%2Bsources/nova/%2Btranslations)
* [nova source package in Noble](/ubuntu/noble/%2Bsources/nova/%2Btranslations)
* [nova source package in Mantic](/ubuntu/mantic/%2Bsources/nova/%2Btranslations)
* [nova source package in Lunar](/ubuntu/lunar/%2Bsources/nova/%2Btranslations)
* [nova source package in Kinetic](/ubuntu/kinetic/%2Bsources/nova/%2Btranslations)
* [nova source package in Jammy](/ubuntu/jammy/%2Bsources/nova/%2Btranslations)
* [nova source package in Impish](/ubuntu/impish/%2Bsources/nova/%2Btranslations)
* [nova source package in Hirsute](/ubuntu/hirsute/%2Bsources/nova/%2Btranslations)
* [nova source package in Groovy](/ubuntu/groovy/%2Bsources/nova/%2Btranslations)
* [nova source package in Focal](/ubuntu/focal/%2Bsources/nova/%2Btranslations)
* [nova source package in Eoan](/ubuntu/eoan/%2Bsources/nova/%2Btranslations)
* [nova source package in Disco](/ubuntu/disco/%2Bsources/nova/%2Btranslations)
* [nova source package in Cosmic](/ubuntu/cosmic/%2Bsources/nova/%2Btranslations)
* [nova source package in Bionic](/ubuntu/bionic/%2Bsources/nova/%2Btranslations)
* [nova source package in Artful](/ubuntu/artful/%2Bsources/nova/%2Btranslations)
* [nova source package in Zesty](/ubuntu/zesty/%2Bsources/nova/%2Btranslations)
* [nova source package in Yakkety](/ubuntu/yakkety/%2Bsources/nova/%2Btranslations)
* [nova source package in Xenial](/ubuntu/xenial/%2Bsources/nova/%2Btranslations)
* [nova source package in Wily](/ubuntu/wily/%2Bsources/nova/%2Btranslations)
* [nova source package in Vivid](/ubuntu/vivid/%2Bsources/nova/%2Btranslations)
* [nova source package in Utopic](/ubuntu/utopic/%2Bsources/nova/%2Btranslations)
* [nova source package in Trusty](/ubuntu/trusty/%2Bsources/nova/%2Btranslations)
* [nova source package in Saucy](/ubuntu/saucy/%2Bsources/nova/%2Btranslations)
* [nova source package in Raring](/ubuntu/raring/%2Bsources/nova/%2Btranslations)
* [nova source package in Quantal](/ubuntu/quantal/%2Bsources/nova/%2Btranslations)
* [nova source package in Precise](/ubuntu/precise/%2Bsources/nova/%2Btranslations)

## Translation for trunk

| Language | Status | Untranslated | Needs review | Last Changed |
| --- | --- | --- | --- | --- |
| [Afrikaans](/nova/trunk/%2Bpots/nova/af/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/af/%2Btranslate?show=untranslated) | 254 [254](/nova/trunk/%2Bpots/nova/af/%2Btranslate?show=new_suggestions) | 2022-09-12 03:14:23 UTC 2022-09-12 |
| [Albanian](/nova/trunk/%2Bpots/nova/sq/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/sq/%2Btranslate?show=untranslated) | 0 0 | 2014-04-02 15:56:19 UTC 2014-04-02 |
| [Arabic](/nova/trunk/%2Bpots/nova/ar/%2Btranslate) | 13 099.14  0.8563899868247694% translated  99.14361001317523% untranslated | 1505 [1505](/nova/trunk/%2Bpots/nova/ar/%2Btranslate?show=untranslated) | 0 0 | 2013-02-16 21:33:39 UTC 2013-02-16 |
| [Asturian](/nova/trunk/%2Bpots/nova/ast/%2Btranslate) | 2 099.87  0.13175230566534915% translated  99.86824769433466% untranslated | 1516 [1516](/nova/trunk/%2Bpots/nova/ast/%2Btranslate?show=untranslated) | 0 0 | 2011-01-12 19:50:20 UTC 2011-01-12 |
| [Azerbaijani](/nova/trunk/%2Bpots/nova/az/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/az/%2Btranslate?show=untranslated) | 5 [5](/nova/trunk/%2Bpots/nova/az/%2Btranslate?show=new_suggestions) | 2013-04-03 14:46:02 UTC 2013-04-03 |
| [Basque](/nova/trunk/%2Bpots/nova/eu/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/eu/%2Btranslate?show=untranslated) | 0 0 | 2013-12-05 23:09:27 UTC 2013-12-05 |
| [Belarusian](/nova/trunk/%2Bpots/nova/be/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/be/%2Btranslate?show=untranslated) | 1 [1](/nova/trunk/%2Bpots/nova/be/%2Btranslate?show=new_suggestions) | 2020-05-03 16:45:18 UTC 2020-05-03 |
| [Bosnian](/nova/trunk/%2Bpots/nova/bs/%2Btranslate) | 2 099.87  0.13175230566534915% translated  99.86824769433466% untranslated | 1516 [1516](/nova/trunk/%2Bpots/nova/bs/%2Btranslate?show=untranslated) | 914 [914](/nova/trunk/%2Bpots/nova/bs/%2Btranslate?show=new_suggestions) | 2012-01-19 20:22:10 UTC 2012-01-19 |
| [Brazilian Portuguese](/nova/trunk/%2Bpots/nova/pt_BR/%2Btranslate) | 815 046.31  53.689064558629774% translated  46.31093544137022% untranslated | 703 [703](/nova/trunk/%2Bpots/nova/pt_BR/%2Btranslate?show=untranslated) | 84 [84](/nova/trunk/%2Bpots/nova/pt_BR/%2Btranslate?show=new_suggestions) | 2013-02-06 03:43:42 UTC 2013-02-06 |
| [Catalan](/nova/trunk/%2Bpots/nova/ca/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/ca/%2Btranslate?show=untranslated) | 0 0 | 2013-06-07 09:16:32 UTC 2013-06-07 |
| [Chechen](/nova/trunk/%2Bpots/nova/ce/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/ce/%2Btranslate?show=untranslated) | 0 0 | 2014-08-13 08:13:14 UTC 2014-08-13 |
| [Chinese (Hong Kong)](/nova/trunk/%2Bpots/nova/zh_HK/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/zh_HK/%2Btranslate?show=untranslated) | 0 0 | 2013-06-07 09:16:31 UTC 2013-06-07 |
| [Chinese (Simplified)](/nova/trunk/%2Bpots/nova/zh_CN/%2Btranslate) | 1518 000.00  100.0% translated | 0 0 | 106 [106](/nova/trunk/%2Bpots/nova/zh_CN/%2Btranslate?show=new_suggestions) | 2013-06-05 09:20:38 UTC 2013-06-05 |
| [Chinese (Traditional)](/nova/trunk/%2Bpots/nova/zh_TW/%2Btranslate) | 294 080.63  19.367588932806324% translated  80.63241106719367% untranslated | 1224 [1224](/nova/trunk/%2Bpots/nova/zh_TW/%2Btranslate?show=untranslated) | 30 [30](/nova/trunk/%2Bpots/nova/zh_TW/%2Btranslate?show=new_suggestions) | 2012-08-15 07:46:05 UTC 2012-08-15 |
| [Croatian](/nova/trunk/%2Bpots/nova/hr/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/hr/%2Btranslate?show=untranslated) | 0 0 | 2013-06-07 09:16:33 UTC 2013-06-07 |
| [Czech](/nova/trunk/%2Bpots/nova/cs/%2Btranslate) | 1518 000.00  100.0% translated | 0 0 | 4 [4](/nova/trunk/%2Bpots/nova/cs/%2Btranslate?show=new_suggestions) | 2013-05-12 21:44:53 UTC 2013-05-12 |
| [Danish](/nova/trunk/%2Bpots/nova/da/%2Btranslate) | 2 099.87  0.13175230566534915% translated  99.86824769433466% untranslated | 1516 [1516](/nova/trunk/%2Bpots/nova/da/%2Btranslate?show=untranslated) | 2 [2](/nova/trunk/%2Bpots/nova/da/%2Btranslate?show=new_suggestions) | 2011-01-15 21:46:58 UTC 2011-01-15 |
| [English (Australia)](/nova/trunk/%2Bpots/nova/en_AU/%2Btranslate) | 350 076.94  23.056653491436098% translated  76.9433465085639% untranslated | 1168 [1168](/nova/trunk/%2Bpots/nova/en_AU/%2Btranslate?show=untranslated) | 1166 [1166](/nova/trunk/%2Bpots/nova/en_AU/%2Btranslate?show=new_suggestions) | 2012-06-17 06:35:56 UTC 2012-06-17 |
| [English (Canada)](/nova/trunk/%2Bpots/nova/en_CA/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/en_CA/%2Btranslate?show=untranslated) | 0 0 | 2013-09-10 14:44:32 UTC 2013-09-10 |
| [English (United Kingdom)](/nova/trunk/%2Bpots/nova/en_GB/%2Btranslate) | 1518 000.00  100.0% translated | 0 0 | 10 [10](/nova/trunk/%2Bpots/nova/en_GB/%2Btranslate?show=new_suggestions) | 2013-06-04 15:36:12 UTC 2013-06-04 |
| [Filipino](/nova/trunk/%2Bpots/nova/fil/%2Btranslate) | 30 098.02  1.9762845849802373% translated  98.02371541501977% untranslated | 1488 [1488](/nova/trunk/%2Bpots/nova/fil/%2Btranslate?show=untranslated) | 0 0 | 2012-07-20 05:07:53 UTC 2012-07-20 |
| [French](/nova/trunk/%2Bpots/nova/fr/%2Btranslate) | 641 057.77  42.226613965744406% translated  57.7733860342556% untranslated | 877 [877](/nova/trunk/%2Bpots/nova/fr/%2Btranslate?show=untranslated) | 139 [139](/nova/trunk/%2Bpots/nova/fr/%2Btranslate?show=new_suggestions) | 2013-03-04 16:32:33 UTC 2013-03-04 |
| [Galician](/nova/trunk/%2Bpots/nova/gl/%2Btranslate) | 97 093.61  6.389986824769434% translated  93.61001317523056% untranslated | 1421 [1421](/nova/trunk/%2Bpots/nova/gl/%2Btranslate?show=untranslated) | 5 [5](/nova/trunk/%2Bpots/nova/gl/%2Btranslate?show=new_suggestions) | 2013-07-10 23:58:13 UTC 2013-07-10 |
| [German](/nova/trunk/%2Bpots/nova/de/%2Btranslate) | 1094 027.93  72.06851119894598% translated  27.931488801054016% untranslated | 424 [424](/nova/trunk/%2Bpots/nova/de/%2Btranslate?show=untranslated) | 31 [31](/nova/trunk/%2Bpots/nova/de/%2Btranslate?show=new_suggestions) | 2013-07-10 09:57:58 UTC 2013-07-10 |
| [Greek](/nova/trunk/%2Bpots/nova/el/%2Btranslate) | 2 099.87  0.13175230566534915% translated  99.86824769433466% untranslated | 1516 [1516](/nova/trunk/%2Bpots/nova/el/%2Btranslate?show=untranslated) | 0 0 | 2014-04-02 15:56:24 UTC 2014-04-02 |
| [Hebrew](/nova/trunk/%2Bpots/nova/he/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/he/%2Btranslate?show=untranslated) | 0 0 | 2014-03-07 06:39:29 UTC 2014-03-07 |
| [Hindi](/nova/trunk/%2Bpots/nova/hi/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/hi/%2Btranslate?show=untranslated) | 0 0 | 2013-09-09 20:15:29 UTC 2013-09-09 |
| [Hungarian](/nova/trunk/%2Bpots/nova/hu/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/hu/%2Btranslate?show=untranslated) | 0 0 | 2013-06-07 09:16:34 UTC 2013-06-07 |
| [Indonesian](/nova/trunk/%2Bpots/nova/id/%2Btranslate) | 1166 023.19  76.81159420289855% translated  23.18840579710145% untranslated | 352 [352](/nova/trunk/%2Bpots/nova/id/%2Btranslate?show=untranslated) | 4 [4](/nova/trunk/%2Bpots/nova/id/%2Btranslate?show=new_suggestions) | 2013-06-12 06:23:30 UTC 2013-06-12 |
| [Italian](/nova/trunk/%2Bpots/nova/it/%2Btranslate) | 399 073.72  26.284584980237153% translated  73.71541501976284% untranslated | 1119 [1119](/nova/trunk/%2Bpots/nova/it/%2Btranslate?show=untranslated) | 3 [3](/nova/trunk/%2Bpots/nova/it/%2Btranslate?show=new_suggestions) | 2013-04-12 14:24:26 UTC 2013-04-12 |
| [Japanese](/nova/trunk/%2Bpots/nova/ja/%2Btranslate) | 526 065.35  34.65085638998682% translated  65.34914361001317% untranslated | 992 [992](/nova/trunk/%2Bpots/nova/ja/%2Btranslate?show=untranslated) | 4 [4](/nova/trunk/%2Bpots/nova/ja/%2Btranslate?show=new_suggestions) | 2012-06-17 06:26:26 UTC 2012-06-17 |
| [Kabyle](/nova/trunk/%2Bpots/nova/kab/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/kab/%2Btranslate?show=untranslated) | 0 0 | 2020-09-26 09:29:19 UTC 2020-09-26 |
| [Kannada](/nova/trunk/%2Bpots/nova/kn/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/kn/%2Btranslate?show=untranslated) | 0 0 | 2013-10-03 20:33:34 UTC 2013-10-03 |
| [Khmer](/nova/trunk/%2Bpots/nova/km/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/km/%2Btranslate?show=untranslated) | 12 [12](/nova/trunk/%2Bpots/nova/km/%2Btranslate?show=new_suggestions) | 2013-12-05 23:09:30 UTC 2013-12-05 |
| [Korean](/nova/trunk/%2Bpots/nova/ko/%2Btranslate) | 133 091.24  8.761528326745719% translated  91.23847167325428% untranslated | 1385 [1385](/nova/trunk/%2Bpots/nova/ko/%2Btranslate?show=untranslated) | 0 0 | 2012-08-18 04:14:44 UTC 2012-08-18 |
| [Latgalian](/nova/trunk/%2Bpots/nova/ltg/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/ltg/%2Btranslate?show=untranslated) | 1 [1](/nova/trunk/%2Bpots/nova/ltg/%2Btranslate?show=new_suggestions) | 2013-12-03 08:45:58 UTC 2013-12-03 |
| [Latvian](/nova/trunk/%2Bpots/nova/lv/%2Btranslate) | 5 099.67  0.32938076416337286% translated  99.67061923583663% untranslated | 1513 [1513](/nova/trunk/%2Bpots/nova/lv/%2Btranslate?show=untranslated) | 0 0 | 2013-03-07 16:14:28 UTC 2013-03-07 |
| [Malay](/nova/trunk/%2Bpots/nova/ms/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/ms/%2Btranslate?show=untranslated) | 406 [406](/nova/trunk/%2Bpots/nova/ms/%2Btranslate?show=new_suggestions) | 2012-06-13 09:15:03 UTC 2012-06-13 |
| [Mari (Meadow)](/nova/trunk/%2Bpots/nova/mhr/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/mhr/%2Btranslate?show=untranslated) | 3 [3](/nova/trunk/%2Bpots/nova/mhr/%2Btranslate?show=new_suggestions) | 2013-11-05 08:44:17 UTC 2013-11-05 |
| [Nepali](/nova/trunk/%2Bpots/nova/ne/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/ne/%2Btranslate?show=untranslated) | 0 0 | 2013-10-03 20:33:29 UTC 2013-10-03 |
| [Norwegian Bokmal](/nova/trunk/%2Bpots/nova/nb/%2Btranslate) | 74 095.13  4.874835309617918% translated  95.12516469038208% untranslated | 1444 [1444](/nova/trunk/%2Bpots/nova/nb/%2Btranslate?show=untranslated) | 0 0 | 2012-03-13 11:36:56 UTC 2012-03-13 |
| [Occitan (post 1500)](/nova/trunk/%2Bpots/nova/oc/%2Btranslate) | 16 098.95  1.0540184453227932% translated  98.9459815546772% untranslated | 1502 [1502](/nova/trunk/%2Bpots/nova/oc/%2Btranslate?show=untranslated) | 394 [394](/nova/trunk/%2Bpots/nova/oc/%2Btranslate?show=new_suggestions) | 2011-11-17 07:23:06 UTC 2011-11-17 |
| [Persian](/nova/trunk/%2Bpots/nova/fa/%2Btranslate) | 14 099.08  0.922266139657444% translated  99.07773386034255% untranslated | 1504 [1504](/nova/trunk/%2Bpots/nova/fa/%2Btranslate?show=untranslated) | 0 0 | 2012-09-18 11:44:07 UTC 2012-09-18 |
| [Polish](/nova/trunk/%2Bpots/nova/pl/%2Btranslate) | 2 099.87  0.13175230566534915% translated  99.86824769433466% untranslated | 1516 [1516](/nova/trunk/%2Bpots/nova/pl/%2Btranslate?show=untranslated) | 0 0 | 2012-09-04 20:24:42 UTC 2012-09-04 |
| [Portuguese](/nova/trunk/%2Bpots/nova/pt/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/pt/%2Btranslate?show=untranslated) | 8 [8](/nova/trunk/%2Bpots/nova/pt/%2Btranslate?show=new_suggestions) | 2013-06-07 09:16:30 UTC 2013-06-07 |
| [Romanian](/nova/trunk/%2Bpots/nova/ro/%2Btranslate) | 2 099.87  0.13175230566534915% translated  99.86824769433466% untranslated | 1516 [1516](/nova/trunk/%2Bpots/nova/ro/%2Btranslate?show=untranslated) | 4 [4](/nova/trunk/%2Bpots/nova/ro/%2Btranslate?show=new_suggestions) | 2013-03-03 09:38:48 UTC 2013-03-03 |
| [Russian](/nova/trunk/%2Bpots/nova/ru/%2Btranslate) | 1307 013.90  86.10013175230566% translated  13.899868247694336% untranslated | 211 [211](/nova/trunk/%2Bpots/nova/ru/%2Btranslate?show=untranslated) | 15 [15](/nova/trunk/%2Bpots/nova/ru/%2Btranslate?show=new_suggestions) | 2013-05-21 06:50:11 UTC 2013-05-21 |
| [Serbian](/nova/trunk/%2Bpots/nova/sr/%2Btranslate) | 1 099.93  0.06587615283267458% translated  99.93412384716733% untranslated | 1517 [1517](/nova/trunk/%2Bpots/nova/sr/%2Btranslate?show=untranslated) | 0 0 | 2014-04-02 15:56:24 UTC 2014-04-02 |
| [Slovak](/nova/trunk/%2Bpots/nova/sk/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/sk/%2Btranslate?show=untranslated) | 6 [6](/nova/trunk/%2Bpots/nova/sk/%2Btranslate?show=new_suggestions) | 2013-09-09 20:15:25 UTC 2013-09-09 |
| [Spanish](/nova/trunk/%2Bpots/nova/es/%2Btranslate) | 1517 000.07  99.93412384716733% translated  0.06587615283267458% untranslated | 1 [1](/nova/trunk/%2Bpots/nova/es/%2Btranslate?show=untranslated) | 80 [80](/nova/trunk/%2Bpots/nova/es/%2Btranslate?show=new_suggestions) | 2013-07-09 23:15:49 UTC 2013-07-09 |
| [Swedish](/nova/trunk/%2Bpots/nova/sv/%2Btranslate) | 20 098.68  1.3175230566534915% translated  98.68247694334651% untranslated | 1498 [1498](/nova/trunk/%2Bpots/nova/sv/%2Btranslate?show=untranslated) | 1 [1](/nova/trunk/%2Bpots/nova/sv/%2Btranslate?show=new_suggestions) | 2013-01-15 20:08:01 UTC 2013-01-15 |
| [Tagalog](/nova/trunk/%2Bpots/nova/tl/%2Btranslate) | 6 099.60  0.3952569169960474% translated  99.60474308300395% untranslated | 1512 [1512](/nova/trunk/%2Bpots/nova/tl/%2Btranslate?show=untranslated) | 0 0 | 2011-08-23 11:21:43 UTC 2011-08-23 |
| [Tajik](/nova/trunk/%2Bpots/nova/tg/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/tg/%2Btranslate?show=untranslated) | 0 0 | 2020-07-23 06:12:18 UTC 2020-07-23 |
| [Tamil](/nova/trunk/%2Bpots/nova/ta/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/ta/%2Btranslate?show=untranslated) | 0 0 | 2014-04-02 15:56:25 UTC 2014-04-02 |
| [Thai](/nova/trunk/%2Bpots/nova/th/%2Btranslate) | 5 099.67  0.32938076416337286% translated  99.67061923583663% untranslated | 1513 [1513](/nova/trunk/%2Bpots/nova/th/%2Btranslate?show=untranslated) | 0 0 | 2012-05-27 00:06:52 UTC 2012-05-27 |
| [Tibetan](/nova/trunk/%2Bpots/nova/bo/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/bo/%2Btranslate?show=untranslated) | 0 0 | 2019-12-12 01:59:05 UTC 2019-12-12 |
| [Turkish](/nova/trunk/%2Bpots/nova/tr/%2Btranslate) | 28 098.16  1.844532279314888% translated  98.15546772068511% untranslated | 1490 [1490](/nova/trunk/%2Bpots/nova/tr/%2Btranslate?show=untranslated) | 43 [43](/nova/trunk/%2Bpots/nova/tr/%2Btranslate?show=new_suggestions) | 2013-03-14 06:55:20 UTC 2013-03-14 |
| [Ukrainian](/nova/trunk/%2Bpots/nova/uk/%2Btranslate) | 19 098.75  1.251646903820817% translated  98.74835309617919% untranslated | 1499 [1499](/nova/trunk/%2Bpots/nova/uk/%2Btranslate?show=untranslated) | 391 [391](/nova/trunk/%2Bpots/nova/uk/%2Btranslate?show=new_suggestions) | 2011-08-23 11:21:35 UTC 2011-08-23 |
| [Urdu](/nova/trunk/%2Bpots/nova/ur/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/ur/%2Btranslate?show=untranslated) | 0 0 | 2013-12-05 23:09:34 UTC 2013-12-05 |
| [Uyghur](/nova/trunk/%2Bpots/nova/ug/%2Btranslate) | 0 100.00  100.0% untranslated | 1518 [1518](/nova/trunk/%2Bpots/nova/ug/%2Btranslate?show=untranslated) | 1 [1](/nova/trunk/%2Bpots/nova/ug/%2Btranslate?show=new_suggestions) | 2012-03-18 09:35:05 UTC 2012-03-18 |

[ [Change your preferred languages...](/%2Beditmylanguages)
—
View all languages
]

![Key to this table: “Unchanged” means](/@@/green-bar)
Translated

![and “untranslated” means just that,](/@@/red-bar)
Untranslated

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from security.openstack.org_94f59eba_20250119_113938.html ===


Toggle navigation

 Search

* [Software](https://www.openstack.org/software/)
  + [Overview](https://www.openstack.org/software/)
  + [OpenStack Components](https://www.openstack.org/software/project-navigator/openstack-components)
  + [SDKs](https://www.openstack.org/software/project-navigator/sdks)
  + [Deployment Tools](https://www.openstack.org/software/project-navigator/deployment-tools)
  + [OpenStack Map](https://www.openstack.org/assets/software/projectmap/openstack-map.pdf)
  + [Sample Configs](https://www.openstack.org/software/sample-configs/)
* [Use Cases](https://www.openstack.org/use-cases/)
  + [Users in Production](https://www.openstack.org/use-cases/)
  + [Ironic Bare Metal](https://www.openstack.org/use-cases/bare-metal/)
  + [Edge Computing](https://www.openstack.org/use-cases/edge-computing/)
  + [Telecom & NFV](https://www.openstack.org/use-cases/telecoms-and-nfv/)
  + [Science and HPC](https://www.openstack.org/use-cases/science/)
  + [Containers](https://www.openstack.org/use-cases/containers/)
  + [Enterprise](https://www.openstack.org/use-cases/enterprise/)
  + [User Survey](https://www.openstack.org/surveys/landing)
* [Events](https://openinfra.dev/summit)
  + [OpenInfra Summit](https://openinfra.dev/summit)
  + [Project Teams Gathering](https://www.openstack.org/ptg/)
  + [OpenDev](https://www.openstack.org/events/opendev-2020/)
  + [Community Events](https://www.openstack.org/events/community-events/)
  + [OpenStack & OpenInfra Days](https://www.openstack.org/events/openstackdays)
  + [Summit Videos](https://www.openstack.org/videos/)
* [Community](https://www.openstack.org/community/)
  + [Welcome! Start Here](https://www.openstack.org/community/)
  + [OpenStack Technical Committee](https://www.openstack.org/community/tech-committee)
  + [Speakers Bureau](https://www.openstack.org/community/speakers/)
  + [OpenStack Wiki](http://wiki.openstack.org)
  + [Get Certified (COA)](https://www.openstack.org/coa/)
  + [Jobs](https://www.openstack.org/community/jobs/)
  + [Marketing Resources](https://www.openstack.org/marketing/)
  + [Community News](https://www.openstack.org/news/)
  + [Superuser Magazine](http://superuser.openstack.org)
  + [OpenInfra Foundation Supporting Organizations](https://www.openstack.org/community/supporting-organizations/)
  + [OpenInfra Foundation](https://openinfra.dev)
* [Marketplace](https://www.openstack.org/marketplace/)
  + [Training](https://www.openstack.org/marketplace/training/)
  + [Distros & Appliances](https://www.openstack.org/marketplace/distros/)
  + [Public Clouds](https://www.openstack.org/marketplace/public-clouds/)
  + [Hosted Private Clouds](https://www.openstack.org/marketplace/hosted-private-clouds/)
  + [Remotely Managed Private Clouds](https://www.openstack.org/marketplace/remotely-managed-private-clouds/)
  + [Consulting & Integrators](https://www.openstack.org/marketplace/consulting/)
  + [Drivers](https://www.openstack.org/marketplace/drivers/)
* [Blog](https://www.openstack.org/blog/)
* [Docs](http://docs.openstack.org/)
* [Join](https://openinfra.dev/join/)
  + [Sign up for Foundation Membership](https://openinfra.dev/join/)
  + [Sponsor the Foundation](https://openinfra.dev/join/)
  + [More about the Foundation](https://openinfra.dev)
* [Log In](https://www.openstack.org/Security/login/?BackURL=/home/)

# OSSA-2020-006: Live migration fails to update persistent domain XML

# OSSA-2020-006: Live migration fails to update persistent domain XML[Â¶](#ossa-2020-006-live-migration-fails-to-update-persistent-domain-xml "Link to this heading")

Date:

August 25, 2020

CVE:

CVE-2020-17376

## Affects[Â¶](#affects "Link to this heading")

* Nova: <19.3.1, >=20.0.0 <20.3.1, ==21.0.0

## Description[Â¶](#description "Link to this heading")

Tadayoshi Hosoya (NEC) and Lee Yarwood (Red Hat) reported a vulnerability in Nova live migration. By performing a soft reboot of an instance which has previously undergone live migration, a user may gain access to destination host devices that share the same paths as host devices previously referenced by the virtual machine on the source. This can include block devices that map to different Cinder volumes on the destination than the source. The risk is increased significantly in non-default configurations allowing untrusted users to initiate live migrations, so administrators may consider temporarily disabling this in policy if they cannot upgrade immediately. This only impacts deployments where users are allowed to perform soft reboots of server instances; it is recommended to disable soft reboots in policy (only allowing hard reboots) until the fix can be applied.

## Patches[Â¶](#patches "Link to this heading")

* <https://review.opendev.org/747978> (Pike)
* <https://review.opendev.org/747976> (Queens)
* <https://review.opendev.org/747975> (Rocky)
* <https://review.opendev.org/747974> (Stein)
* <https://review.opendev.org/747973> (Train)
* <https://review.opendev.org/747972> (Ussuri)
* <https://review.opendev.org/747969> (Victoria)

## Credits[Â¶](#credits "Link to this heading")

* Tadayoshi Hosoya from NEC (CVE-2020-17376)
* Lee Yarwood from Red Hat (CVE-2020-17376)

## References[Â¶](#references "Link to this heading")

* <https://launchpad.net/bugs/1890501>
* <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-17376>

## Notes[Â¶](#notes "Link to this heading")

* The stable/rocky, stable/queens, and stable/pike branches are under
  extended maintenance and will receive no new point releases, but
  patches for them are provided as a courtesy.

this page last updated: 2025-01-07 18:17:35

[![Creative Commons Attribution 3.0 License](../_static/images/docs/license.png)](https://creativecommons.org/licenses/by/3.0/)

Except where otherwise noted, this document is licensed under
[Creative Commons
Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/). See all [OpenStack Legal Documents](https://www.openstack.org/legal).

found an error? report a bug

OpenStack Documentation

* Guides
* [Install Guides](https://docs.openstack.org/index.html#install-guides)
* [User Guides](https://docs.openstack.org/index.html#user-guides)
* [Configuration Guides](https://docs.openstack.org/index.html#configuration-guides)
* [Operations and Administration Guides](https://docs.openstack.org/index.html#ops-and-admin-guides)
* [API Guides](https://docs.openstack.org/index.html#api-guides)
* [Contributor Guides](https://docs.openstack.org/index.html#contributor-guides)
* Languages
* [Deutsch (German)](https://docs.openstack.org/de/)
* [FranÃ§ais (French)](https://docs.openstack.org/fr/)
* [Bahasa Indonesia (Indonesian)](https://docs.openstack.org/id/)
* [Italiano (Italian)](https://docs.openstack.org/it/)
* [æ¥æ¬èª (Japanese)](https://docs.openstack.org/ja/)
* [íêµ­ì´ (Korean)](https://docs.openstack.org/ko_KR/)
* [PortuguÃªs (Portuguese)](https://docs.openstack.org/pt_BR/)
* [TÃ¼rkÃ§e (TÃ¼rkiye)](https://docs.openstack.org/tr_TR/)
* [ç®ä½ä¸­æ (Simplified Chinese)](https://docs.openstack.org/zh_CN/)

#### Contents

* OSSA-2020-006: Live migration fails to update persistent domain XML
  + [Affects](#affects)
  + [Description](#description)
  + [Patches](#patches)
  + [Credits](#credits)
  + [References](#references)
  + [Notes](#notes)

### OpenStack

* [Projects](https://www.openstack.org/software/project-navigator/)
* [OpenStack Security](https://security.openstack.org/)
* [Blog](https://openstack.org/blog/)
* [News](https://openstack.org/news/)

### Community

* [User Groups](https://www.meetup.com/pro/openinfradev/)
* [Events](https://openstack.org/community/events/)
* [Jobs](https://openstack.org/community/jobs/)
* [Companies](https://openinfra.dev/members/)
* [Contribute](https://docs.openstack.org/contributors)

### Documentation

* [OpenStack Manuals](https://docs.openstack.org)
* [Getting Started](https://openstack.org/software/start/)
* [API Documentation](https://developer.openstack.org)
* [Wiki](https://wiki.openstack.org)

### Branding & Legal

* [Legal Docs](https://openinfra.dev/legal)
* [Logos & Guidelines](https://openstack.org/brand/)
* [Trademark Policy](https://openinfra.dev/legal/trademark-policy)
* [Privacy Policy](https://openinfra.dev/privacy-policy)
* [OpenInfra CLA](https://docs.openstack.org/contributors/common/setup-gerrit.html#individual-contributor-license-agreement)

### Stay In Touch

The OpenStack project is provided under the
[Apache 2.0 license](https://www.apache.org/licenses/LICENSE-2.0). Docs.openstack.org is powered by
[Rackspace Cloud Computing](https://rackspace.com).



=== Content from review.opendev.org_cfa6dcce_20250119_132809.html ===




=== Content from review.opendev.org_843ac754_20250119_132757.html ===




=== Content from launchpad.net_358978c3_20250119_132809.html ===

[Log in / Register](https://launchpad.net/~hudson-openstack/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~hudson-openstack)

## [OpenStack Infra](https://launchpad.net/~hudson-openstack)

* Overview
* [Code](https://code.launchpad.net/~hudson-openstack)
* [Bugs](https://bugs.launchpad.net/~hudson-openstack)
* [Blueprints](https://blueprints.launchpad.net/~hudson-openstack)
* [Translations](https://translations.launchpad.net/~hudson-openstack)
* [Answers](https://answers.launchpad.net/~hudson-openstack)

* [Related packages](https://launchpad.net/~hudson-openstack/%2Brelated-packages)
* [Related projects](https://launchpad.net/~hudson-openstack/%2Brelated-projects)

## User information

Launchpad Id:
hudson-openstack

Email:
[Log in](%2Blogin) for email information.

Member since:
2010-07-14

[![Icon of Burrow](https://launchpadlibrarian.net/67728214/os14.png "Member of Burrow")](/~burrow)
[![Icon of Citrix OpenStack development team](https://launchpadlibrarian.net/64472709/Citrix%2014.png "Member of Citrix OpenStack development team")](/~citrix-openstack)
[![Icon of (deprecated) OpenStack PPA maintainers](https://launchpadlibrarian.net/87891894/ppa.gif "Member of (deprecated) OpenStack PPA maintainers")](/~openstack-ppa)
[![Icon of Designate Core](https://launchpadlibrarian.net/360468328/designate_14.jpg "Member of Designate Core")](/~designate-core)
[![Icon of Designate Drivers](https://launchpadlibrarian.net/360468067/designate_14.jpg "Member of Designate Drivers")](/~designate-drivers)
[![Icon of MidoNet Bugs](https://launchpadlibrarian.net/228074955/midonet_14x14.png "Member of MidoNet Bugs")](/~midonet-bugs)
[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Languages:

English

OpenPGP keys:

72571ACC301E6FE900837F5CDF85501232EE128C

SSH keys:

[hudson@hudson](%2Bsshkeys)

[jenkins@vpcslave](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[6656](https://launchpad.net/~hudson-openstack/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~hudson-openstack/%2Bparticipation) Latest memberships

| [Compute Hyper-V Bugs](/~compute-hyperv-bugs)  Joined on 2019-08-28 | |
| --- | --- |
| [OS-Win Bugs](/~os-win-bugs)  Joined on 2019-08-28 | |
| [Networking Hyper-V Bugs](/~networking-hyperv-bugs)  Joined on 2019-08-28 | |
| [kolla-drivers](/~kolla-drivers)  Joined on 2019-05-20 | |
| [fixtures-git-bugs](/~fixtures-git-bugs)  Joined on 2018-03-25 | |

## [Recent activities](https://launchpad.net/~hudson-openstack/%2Bkarma) Most active in

| [StarlingX](/starlingx) |  |
| --- | --- |
| [kolla-ansible](/kolla-ansible) |  |
| [kolla](/kolla) |  |
| [kayobe](/kayobe) |  |
| [OpenStack Compute (nova)](/nova) |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from review.opendev.org_694081ae_20250119_132756.html ===




=== Content from launchpad.net_22884c23_20250119_132809.html ===

[Log in / Register](https://launchpad.net/~fungi/%2Blogin)

[![](https://launchpadlibrarian.net/112681987/gnome-gmush-64.png)](https://launchpad.net/~fungi)

## [Jeremy Stanley](https://launchpad.net/~fungi)

* Overview
* [Code](https://code.launchpad.net/~fungi)
* [Bugs](https://bugs.launchpad.net/~fungi)
* [Blueprints](https://blueprints.launchpad.net/~fungi)
* [Translations](https://translations.launchpad.net/~fungi)
* [Answers](https://answers.launchpad.net/~fungi)

<http://fungi.yuggoth.org/>

* [Related packages](https://launchpad.net/~fungi/%2Brelated-packages)
* [Related projects](https://launchpad.net/~fungi/%2Brelated-projects)

## User information

Launchpad Id:
fungi

Email:
[Log in](%2Blogin) for email information.

Member since:
2006-06-16

[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of OpenStack Vulnerability Management team](https://launchpadlibrarian.net/83816787/icon.png "Member of OpenStack Vulnerability Management team")](/~openstack-vuln-mgmt)
[![Icon of Python OpenStack Client Bugs](https://launchpadlibrarian.net/697274771/osc-icon.png "Member of Python OpenStack Client Bugs")](/~python-openstackclient-bugs)
[![Icon of Python OpenStack Client](https://launchpadlibrarian.net/697274843/osc-icon.png "Member of Python OpenStack Client")](/~python-openstackclient)
[![Icon of Swift](https://launchpadlibrarian.net/52560230/os14.png "Member of Swift")](/~swift)

Languages:

English

OpenPGP keys:

97AE496FC02DEC9FC353B2E748F9961143495829

SSH keys:

[fungi@yuggoth.org](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[323](https://launchpad.net/~fungi/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**fungi**
 on
**irc.libera.chat**

![IRC](/@@/social-irc "IRC")
**fungi**
 on
**irc.oftc.net**

## [All bugs in progress](https://launchpad.net/~fungi/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1354829 [Booting from stale snapshots in rax-dfw leads to miscellaneous failures](https://bugs.launchpad.net/openstack-ci/%2Bbug/1354829) |  |
| --- | --- | --- |
| in [OpenStack Core Infrastructure](/openstack-ci), [OpenStack Dashboard (Horizon)](/horizon), [neutron](/neutron), [tempest](/tempest) | | |

| --- | --- | --- | --- | --- | --- |

## [All memberships](https://launchpad.net/~fungi/%2Bparticipation) Latest memberships

| [Oslo Core security contacts](/~oslo-coresec)  Joined on 2023-10-02 | |
| --- | --- |
| [Glance Release](/~glance-release)  Joined on 2021-07-27 | |
| [Ubuntu SSO 2-factor testers](/~sso-2f-testers)  Joined on 2020-11-12 | |
| [OpenDev Two-Factor Authentication](/~opendev-2fa)  Joined on 2020-11-05 | |
| [Trove Drivers](/~trove-drivers)  Joined on 2020-06-22 | |

## [Recent activities](https://launchpad.net/~fungi/%2Bkarma) Most active in

| [OpenStack Security Advisory](/ossa) |  |  |
| --- | --- | --- |
| [OpenStack Compute (nova)](/nova) |  |  |
| [Ubuntu](/ubuntu) |  |  |
| [OpenStack Security Notes](/ossn) |  |  |
| [Ubuntu Cloud Archive](/cloud-archive) |  |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from review.opendev.org_dd92b52e_20250119_132757.html ===




=== Content from answers.launchpad.net_c6f997e5_20250119_132810.html ===

[Log in / Register](https://answers.launchpad.net/nova/%2Blogin)

[![](https://launchpadlibrarian.net/324577028/nova64.png)](https://launchpad.net/nova)

## [OpenStack Compute (nova)](https://launchpad.net/nova)

* [Overview](https://launchpad.net/nova)
* [Code](https://code.launchpad.net/nova)
* [Bugs](https://bugs.launchpad.net/nova)
* [Blueprints](https://blueprints.launchpad.net/nova)
* [Translations](https://translations.launchpad.net/nova)
* Answers

# Questions for OpenStack Compute (nova)

**Launchpad does not know where
OpenStack Compute (nova)
tracks support requests.**

OpenStack Compute (nova) questions are
tracked in:
[nova in Ubuntu](/ubuntu/%2Bsource/nova),
[python-openstack-compute in Ubuntu](/ubuntu/%2Bsource/python-openstack-compute).

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))


