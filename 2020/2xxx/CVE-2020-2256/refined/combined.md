=== Content from www.openwall.com_e0f66839_20250119_114431.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](4) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <FD6A661E-E3CE-43BD-BA96-27B337545A10@beckweb.net>
Date: Wed, 16 Sep 2020 15:13:22 +0200
From: Daniel Beck <ml@...kweb.net>
To: oss-security@...ts.openwall.com
Subject: Multiple vulnerabilities in Jenkins plugins

Jenkins is an open source automation server which enables developers around
the world to reliably build, test, and deploy their software.

The following releases contain fixes for security vulnerabilities:

* Blue Ocean Plugin 1.23.3
* computer-queue-plugin Plugin 1.6
* Email Extension Plugin 2.76
* Health Advisor by CloudBees Plugin 3.2.1
* Mailer Plugin 1.32.1
* Perfecto Plugin 1.18
* Pipeline Maven Integration Plugin 3.9.3
* Validating String Parameter Plugin 2.5

Additionally, we announce unresolved security issues in the following
plugins:

* Android Lint Plugin
* chosen-views-tabbar Plugin
* ClearCase Release Plugin
* Copy data to workspace Plugin
* Coverage/Complexity Scatter Plot Plugin
* Custom Job Icon Plugin
* Description Column Plugin
* ElasTest Plugin
* Locked Files Report Plugin
* MongoDB Plugin
* Radiator View Plugin
* Selection tasks Plugin
* Storable Configs Plugin

Summaries of the vulnerabilities are below. More details, severity, and
attribution can be found here:
<https://www.jenkins.io/security/advisory/2020-09-16/>

We provide advance notification for security updates on this mailing list:
<https://groups.google.com/d/forum/jenkinsci-advisories>

If you discover security vulnerabilities in Jenkins, please report them as
described here:
<https://www.jenkins.io/security/#reporting-vulnerabilities>

---

SECURITY-1813 / CVE-2020-2252
Mailer Plugin 1.32 and earlier does not perform hostname validation when
connecting to the configured SMTP server. This lack of validation could be
abused using a man-in-the-middle attack to intercept these connections.

SECURITY-1851 / CVE-2020-2253
Email Extension Plugin 2.75 and earlier does not perform hostname
validation when connecting to the configured SMTP server. This lack of
validation could be abused using a man-in-the-middle attack to intercept
these connections.

SECURITY-1956 / CVE-2020-2254
Blue Ocean Plugin 1.23.2 and earlier provides an undocumented feature flag,
`blueocean.features.GIT_READ_SAVE_TYPE`, that when set to the value `clone`
allows an attacker with Item/Configure or Item/Create permission to read
arbitrary files on the Jenkins controller file system.

SECURITY-1961 / CVE-2020-2255
A missing permission check in a REST API in Blue Ocean Plugin 1.23.2 and
earlier allows attackers with Overall/Read permission to initiate a
connection test to an attacker-specified URL.

SECURITY-1976 / CVE-2020-2256
Pipeline Maven Integration Plugin 3.9.2 and earlier does not escape the
upstream job's display name shown as part of a build cause.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with Job/Configure permission.

SECURITY-1935 / CVE-2020-2257
Validating String Parameter Plugin 2.4 and earlier does not escape regular
expressions in tooltips. Additionally, Validating String Parameter Plugin
2.4 does not escape parameter names and parameter descriptions.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with Job/Configure permission.

SECURITY-1998 / CVE-2020-2258
Health Advisor by CloudBees Plugin 3.2.0 and earlier does not correctly
perform a permission check in an HTTP endpoint.

This allows attackers with Overall/Read permission to view an
administrative configuration page.

SECURITY-1912 / CVE-2020-2259
computer-queue-plugin Plugin 1.5 and earlier does not escape the agent name
in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with Agent/Configure permission.

SECURITY-1979 / CVE-2020-2260
Perfecto Plugin 1.17 and earlier does not perform a permission check in a
method implementing a connection test.

This allows attackers with Overall/Read permission to connect to an
attacker-specified HTTP URL using attacker-specified username and password.

SECURITY-1980 / CVE-2020-2261
Perfecto Plugin allows specifying Perfecto Connect Path and Perfecto
Connect File Name in job configurations.

This command is executed on the Jenkins controller in Perfecto Plugin 1.17
and earlier, allowing attackers with Job/Configure permission to run
arbitrary commands on the Jenkins controller.

SECURITY-1908 / CVE-2020-2262
Android Lint Plugin 2.6 and earlier does not escape the annotation message
in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers able to provide report files to the 'Publish
Android Lint results' post-build step.

As of publication of this advisory, there is no fix.

SECURITY-1927 / CVE-2020-2263
Radiator View Plugin 1.29 and earlier does not escape the full name of the
jobs in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

SECURITY-1914 / CVE-2020-2264
Custom Job Icon Plugin 0.2 and earlier does not escape the job descriptions
in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

SECURITY-1913 / CVE-2020-2265
Coverage/Complexity Scatter Plot Plugin 1.1.1 and earlier does not escape
the method information in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers able to provide report files to the 'Publish
Coverage / Complexity Scatter Plot' post-build step.

As of publication of this advisory, there is no fix.

SECURITY-1916 / CVE-2020-2266
Description Column Plugin 1.3 and earlier does not escape the job
description in the column tooltips.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

SECURITY-1904 / CVE-2020-2267 (missing permission check) & CVE-2020-2268 (CSRF)
MongoDB Plugin 1.3 and earlier does not perform permission checks in
methods implementing form validation.

This allows attackers with Overall/Read permission to gain access to some
metadata of any arbitrary files on the Jenkins controller.

Additionally, these form validation methods do not require POST requests,
resulting in a cross-site request forgery (CSRF) vulnerability.

As of publication of this advisory, there is no fix.

SECURITY-1869 / CVE-2020-2269
chosen-views-tabbar Plugin 1.2 and earlier does not escape view names in
the dropdown to select views.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with the ability to configure views.

As of publication of this advisory, there is no fix.

SECURITY-1911 / CVE-2020-2270
ClearCase Release Plugin 0.3 and earlier does not escape the composite
baseline in badge tooltip.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

SECURITY-1921 / CVE-2020-2271
Locked Files Report Plugin 1.6 and earlier does not escape locked files'
names in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability
exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

SECURITY-1903 / CVE-2020-2272 (missing permission check) & CVE-2020-2273 (CSRF)
ElasTest Plugin 1.2.1 and earlier does not perform a permission check in a
method implementing form validation.

This allows attackers with Overall/Read permission to connect to an
attacker-specified URL using attacker-specified credentials.

Additionally, this form validation method does not require POST requests,
resulting in a cross-site request forgery (CSRF) vulnerability.

As of publication of this advisory, there is no fix.

SECURITY-2014 / CVE-2020-2274
ElasTest Plugin 1.2.1 and earlier stores its server password in plain text
in the global configuration file
`jenkins.plugins.elastest.ElasTestInstallation.xml`. This password can be
viewed by users with access to the Jenkins controller file system.

As of publication of this advisory, there is no fix.

SECURITY-1966 / CVE-2020-2275
Copy data to workspace Plugin allows users to copy files from the Jenkins
controller to job workspaces.

Copy data to workspace Plugin 1.0 and earlier does not limit which
directories can be copied. This allows attackers with Job/Configure
permission to read arbitrary files on the Jenkins controller.

As of publication of this advisory, there is no fix.

SECURITY-1967 / CVE-2020-2276
Selection tasks Plugin implements a job parameter that dynamically
generates possible values from the output of a program. The path to that
program is specified as part of the parameter configuration.

Selection tasks Plugin 1.0 and earlier executes this user-specified program
on the Jenkins controller. This allows attackers with Job/Configure
permission to execute an arbitrary system command on the Jenkins controller
as the OS user that the Jenkins process is running as.

As of publication of this advisory, there is no fix.

SECURITY-1968 (1) / CVE-2020-2277
Storable Configs Plugin 1.0 and earlier allows users with Job/Read
permission to read arbitrary files on the Jenkins controller.

As of publication of this advisory, there is no fix.

SECURITY-1968 (2) / CVE-2020-2278
Storable Configs Plugin allows storing copies of a job's `config.xml` file
on the Jenkins controller with a user-specified file name.

Storable Configs Plugin 1.0 and earlier does not restrict the
user-specified file name, except that a `.xml` suffix is added if it's not
already present. This allows attackers with Job/Configure permission to
replace any other `.xml` file on the Jenkins controller with the job's
`config.xml` file's content.

As of publication of this advisory, there is no fix.
```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.jenkins.io_dac8fc60_20250119_114431.html ===


[Jenkins Security Home](/security/)

**For Administrators**

* [Overview](/security/for-administrators/)
* [Security Advisories](/security/advisories/)
* [Security Issues](/security/issues/)
* [Advisory Schedule](/security/scheduling/)
* [Vulnerabilities in Plugins](/security/plugins/)
* [How We Fix Security Issues](/security/fixing/)

**For Reporters**

* [Reporting Vulnerabilities](/security/reporting/)
* [Jenkins CNA](/security/cna/)

**For Maintainers**

* [Overview](/security/for-maintainers/)
* [Vulnerabilities in Plugins](/security/plugins/)

**Jenkins Security Team**

* [About](/security/team/)
* [Contributions](/security/improvements/)

# Jenkins Security Advisory 2020-09-16

This advisory announces vulnerabilities in the following Jenkins deliverables:

* android-lint
  Plugin
* [Blue Ocean
  Plugin](https://plugins.jenkins.io/blueocean)
* [chosen-views-tabbar
  Plugin](https://plugins.jenkins.io/chosen-views-tabbar)
* [ClearCase Release
  Plugin](https://plugins.jenkins.io/clearcase-release)
* [computer-queue-plugin
  Plugin](https://plugins.jenkins.io/computer-queue-plugin)
* [Copy data to workspace
  Plugin](https://plugins.jenkins.io/copy-data-to-workspace-plugin)
* [Coverage/Complexity Scatter Plot
  Plugin](https://plugins.jenkins.io/covcomplplot)
* [Custom Job Icon
  Plugin](https://plugins.jenkins.io/custom-job-icon)
* [Description Column
  Plugin](https://plugins.jenkins.io/description-column-plugin)
* [ElasTest
  Plugin](https://plugins.jenkins.io/elastest)
* [Email Extension
  Plugin](https://plugins.jenkins.io/email-ext)
* [Health Advisor by CloudBees
  Plugin](https://plugins.jenkins.io/cloudbees-jenkins-advisor)
* [Locked Files Report
  Plugin](https://plugins.jenkins.io/locked-files-report)
* [Mailer
  Plugin](https://plugins.jenkins.io/mailer)
* [MongoDB
  Plugin](https://plugins.jenkins.io/mongodb)
* perfecto
  Plugin
* [Pipeline Maven Integration
  Plugin](https://plugins.jenkins.io/pipeline-maven)
* [Radiator View
  Plugin](https://plugins.jenkins.io/radiatorviewplugin)
* [Selection tasks
  Plugin](https://plugins.jenkins.io/selection-tasks-plugin)
* Storable Configs
  Plugin
* [Validating String Parameter
  Plugin](https://plugins.jenkins.io/validating-string-parameter)

## Descriptions

### Missing hostname validation in Mailer Plugin

**SECURITY-1813
/
CVE-2020-2252**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:L/A:N)

**Affected plugin:
[`mailer`](https://plugins.jenkins.io/mailer)**

**Description:**

Mailer Plugin 1.32 and earlier does not perform hostname validation when connecting to the configured SMTP server.
This lack of validation could be abused using a man-in-the-middle attack to intercept these connections.

Mailer Plugin 1.32.1 validates the SMTP hostname when connecting via TLS by default.
In Mailer Plugin 1.32 and earlier, administrators can set the Java system property `mail.smtp.ssl.checkserveridentity` to `true` on startup to enable this protection.

In case of problems, this protection can be disabled again by setting the Java system property `mail.smtp.ssl.checkserveridentity` to `false` on startup.

### Missing hostname validation in Email Extension Plugin

**SECURITY-1851
/
CVE-2020-2253**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:L/A:N)

**Affected plugin:
[`email-ext`](https://plugins.jenkins.io/email-ext)**

**Description:**

Email Extension Plugin 2.75 and earlier does not perform hostname validation when connecting to the configured SMTP server.
This lack of validation could be abused using a man-in-the-middle attack to intercept these connections.

Email Extension Plugin 2.76 validates the SMTP hostname when connecting via TLS by default.
In Email Extension Plugin 2.75 and earlier, administrators can set the Java system property `mail.smtp.ssl.checkserveridentity` to `true` on startup to enable this protection.
Alternatively, this protection can be enabled (or disabled in the new version) via the 'Advanced Email Properties' field in the plugin’s configuration in Configure System.

In case of problems, this protection can be disabled again by setting `mail.smtp.ssl.checkserveridentity` to `false` using either method.

### Path traversal vulnerability in Blue Ocean Plugin

**SECURITY-1956
/
CVE-2020-2254**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:H/I:N/A:N)

**Affected plugin:
[`blueocean`](https://plugins.jenkins.io/blueocean)**

**Description:**

Blue Ocean Plugin 1.23.2 and earlier provides an undocumented feature flag, `blueocean.features.GIT_READ_SAVE_TYPE`, that when set to the value `clone` allows an attacker with Item/Configure or Item/Create permission to read arbitrary files on the Jenkins controller file system.

Blue Ocean Plugin 1.23.3 no longer includes this feature and redirects existing usage to a safer alternative.

### Missing permission check in Blue Ocean Plugin

**SECURITY-1961
/
CVE-2020-2255**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`blueocean`](https://plugins.jenkins.io/blueocean)**

**Description:**

**Updated 2020-09-16:** *This entry previously misidentified the problematic behavior. The HTTP request itself is legitimate, but only authorized users should be able to perform it.*

Blue Ocean Plugin 1.23.2 and earlier does not perform permission checks in several HTTP endpoints implementing connection tests.

This allows attackers with Overall/Read permission to connect to an attacker-specified URL.

Blue Ocean Plugin 1.23.3 requires Item/Create permission to perform these connection tests.

### Stored XSS vulnerability in upstream cause in Pipeline Maven Integration Plugin

**SECURITY-1976
/
CVE-2020-2256**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`pipeline-maven`](https://plugins.jenkins.io/pipeline-maven)**

**Description:**

Pipeline Maven Integration Plugin 3.9.2 and earlier does not escape the upstream job’s display name shown as part of a build cause.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with Job/Configure permission.

Pipeline Maven Integration Plugin 3.9.3 escapes upstream job names in build causes.

### Stored XSS vulnerability in Validating String Parameter Plugin

**SECURITY-1935
/
CVE-2020-2257**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`validating-string-parameter`](https://plugins.jenkins.io/validating-string-parameter)**

**Description:**

Validating String Parameter Plugin 2.4 and earlier does not escape regular expressions in tooltips.
Additionally, Validating String Parameter Plugin 2.4 does not escape parameter names and parameter descriptions.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with Job/Configure permission.

Validating String Parameter Plugin 2.5 escapes regular expressions in tooltips and parameter names.
Parameter descriptions are rendered using the configured markup formatter.

### Incorrect permission check in Health Advisor by CloudBees Plugin

**SECURITY-1998
/
CVE-2020-2258**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`cloudbees-jenkins-advisor`](https://plugins.jenkins.io/cloudbees-jenkins-advisor)**

**Description:**

Health Advisor by CloudBees Plugin 3.2.0 and earlier does not correctly perform a permission check in an HTTP endpoint.

This allows attackers with Overall/Read permission to view an administrative configuration page.

Health Advisor by CloudBees Plugin 3.2.1 requires Overall/Administer to view its administrative configuration page.

### Stored XSS vulnerability in computer-queue-plugin Plugin

**SECURITY-1912
/
CVE-2020-2259**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`computer-queue-plugin`](https://plugins.jenkins.io/computer-queue-plugin)**

**Description:**

computer-queue-plugin Plugin 1.5 and earlier does not escape the agent name in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with Agent/Configure permission.

computer-queue-plugin Plugin 1.6 escapes the agent name in tooltips.

### Missing permission check in perfecto Plugin

**SECURITY-1979
/
CVE-2020-2260**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`perfecto`](https://plugins.jenkins.io/perfecto)**

**Description:**

perfecto Plugin 1.17 and earlier does not perform a permission check in a method implementing a connection test.

This allows attackers with Overall/Read permission to connect to an attacker-specified HTTP URL using attacker-specified username and password.

perfecto Plugin 1.18 requires Overall/Administer permission to perform a connection test.

### OS command execution vulnerability in perfecto Plugin

**SECURITY-1980
/
CVE-2020-2261**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)

**Affected plugin:
[`perfecto`](https://plugins.jenkins.io/perfecto)**

**Description:**

perfecto Plugin allows specifying Perfecto Connect Path and Perfecto Connect File Name in job configurations.

This command is executed on the Jenkins controller in perfecto Plugin 1.17 and earlier, allowing attackers with Job/Configure permission to run arbitrary commands on the Jenkins controller.

perfecto Plugin 1.18 executes the specified commands on the agent the build is running on.

### Stored XSS vulnerability in android-lint Plugin

**SECURITY-1908
/
CVE-2020-2262**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`android-lint`](https://plugins.jenkins.io/android-lint)**

**Description:**

android-lint Plugin 2.6 and earlier does not escape the annotation message in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers able to provide report files to the 'Publish Android Lint results' post-build step.

As of publication of this advisory, there is no fix.

### Stored XSS vulnerability in Radiator View Plugin

**SECURITY-1927
/
CVE-2020-2263**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`radiatorviewplugin`](https://plugins.jenkins.io/radiatorviewplugin)**

**Description:**

Radiator View Plugin 1.29 and earlier does not escape the full name of the jobs in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

### Stored XSS vulnerability in Custom Job Icon Plugin

**SECURITY-1914
/
CVE-2020-2264**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`custom-job-icon`](https://plugins.jenkins.io/custom-job-icon)**

**Description:**

Custom Job Icon Plugin 0.2 and earlier does not escape the job descriptions in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

### Stored XSS vulnerability in Coverage/Complexity Scatter Plot Plugin

**SECURITY-1913
/
CVE-2020-2265**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`covcomplplot`](https://plugins.jenkins.io/covcomplplot)**

**Description:**

Coverage/Complexity Scatter Plot Plugin 1.1.1 and earlier does not escape the method information in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers able to provide report files to the 'Publish Coverage / Complexity Scatter Plot' post-build step.

As of publication of this advisory, there is no fix.

### Stored XSS vulnerability in Description Column Plugin

**SECURITY-1916
/
CVE-2020-2266**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`description-column-plugin`](https://plugins.jenkins.io/description-column-plugin)**

**Description:**

Description Column Plugin 1.3 and earlier does not escape the job description in the column tooltips.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

### CSRF vulnerability and missing permission checks in MongoDB Plugin

**SECURITY-1904
/
CVE-2020-2267 (missing permission check), CVE-2020-2268 (CSRF)**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`mongodb`](https://plugins.jenkins.io/mongodb)**

**Description:**

MongoDB Plugin 1.3 and earlier does not perform permission checks in methods implementing form validation.

This allows attackers with Overall/Read permission to gain access to some metadata of any arbitrary files on the Jenkins controller.

Additionally, these form validation methods do not require POST requests, resulting in a cross-site request forgery (CSRF) vulnerability.

As of publication of this advisory, there is no fix.

### Stored XSS vulnerability in chosen-views-tabbar Plugin

**SECURITY-1869
/
CVE-2020-2269**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`chosen-views-tabbar`](https://plugins.jenkins.io/chosen-views-tabbar)**

**Description:**

chosen-views-tabbar Plugin 1.2 and earlier does not escape view names in the dropdown to select views.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with the ability to configure views.

As of publication of this advisory, there is no fix.

### Stored XSS vulnerability in ClearCase Release Plugin

**SECURITY-1911
/
CVE-2020-2270**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`clearcase-release`](https://plugins.jenkins.io/clearcase-release)**

**Description:**

ClearCase Release Plugin 0.3 and earlier does not escape the composite baseline in badge tooltip.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

### Stored XSS vulnerability in Locked Files Report Plugin

**SECURITY-1921
/
CVE-2020-2271**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)

**Affected plugin:
[`locked-files-report`](https://plugins.jenkins.io/locked-files-report)**

**Description:**

Locked Files Report Plugin 1.6 and earlier does not escape locked files' names in tooltips.

This results in a stored cross-site scripting (XSS) vulnerability exploitable by attackers with Job/Configure permission.

As of publication of this advisory, there is no fix.

### CSRF vulnerability and missing permission checks in ElasTest Plugin

**SECURITY-1903
/
CVE-2020-2272 (missing permission check), CVE-2020-2273 (CSRF)**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

**Affected plugin:
[`elastest`](https://plugins.jenkins.io/elastest)**

**Description:**

ElasTest Plugin 1.2.1 and earlier does not perform a permission check in a method implementing form validation.

This allows attackers with Overall/Read permission to connect to an attacker-specified URL using attacker-specified credentials.

Additionally, this form validation method does not require POST requests, resulting in a cross-site request forgery (CSRF) vulnerability.

As of publication of this advisory, there is no fix.

### Passwords stored in plain text by ElasTest Plugin

**SECURITY-2014
/
CVE-2020-2274**

**Severity (CVSS):**
[Low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

**Affected plugin:
[`elastest`](https://plugins.jenkins.io/elastest)**

**Description:**

ElasTest Plugin 1.2.1 and earlier stores its server password in plain text in the global configuration file `jenkins.plugins.elastest.ElasTestInstallation.xml`.
This password can be viewed by users with access to the Jenkins controller file system.

As of publication of this advisory, there is no fix.

### Arbitrary file read vulnerability in Copy data to workspace Plugin

**SECURITY-1966
/
CVE-2020-2275**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N)

**Affected plugin:
[`copy-data-to-workspace-plugin`](https://plugins.jenkins.io/copy-data-to-workspace-plugin)**

**Description:**

Copy data to workspace Plugin allows users to copy files from the Jenkins controller to job workspaces.

Copy data to workspace Plugin 1.0 and earlier does not limit which directories can be copied.
This allows attackers with Job/Configure permission to read arbitrary files on the Jenkins controller.

As of publication of this advisory, there is no fix.

### System command execution vulnerability in Selection tasks Plugin

**SECURITY-1967
/
CVE-2020-2276**

**Severity (CVSS):**
[High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)

**Affected plugin:
[`selection-tasks-plugin`](https://plugins.jenkins.io/selection-tasks-plugin)**

**Description:**

Selection tasks Plugin implements a job parameter that dynamically generates possible values from the output of a program.
The path to that program is specified as part of the parameter configuration.

Selection tasks Plugin 1.0 and earlier executes this user-specified program on the Jenkins controller.
This allows attackers with Job/Configure permission to execute an arbitrary system command on the Jenkins controller as the OS user that the Jenkins process is running as.

As of publication of this advisory, there is no fix.

### Arbitrary file read vulnerability in Storable Configs Plugin

**SECURITY-1968 (1)
/
CVE-2020-2277**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N)

**Affected plugin:
[`storable-configs-plugin`](https://plugins.jenkins.io/storable-configs-plugin)**

**Description:**

Storable Configs Plugin 1.0 and earlier allows users with Job/Read permission to read arbitrary files on the Jenkins controller.

As of publication of this advisory, there is no fix.

### Arbitrary file write vulnerability in Storable Configs Plugin

**SECURITY-1968 (2)
/
CVE-2020-2278**

**Severity (CVSS):**
[Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:H/A:N)

**Affected plugin:
[`storable-configs-plugin`](https://plugins.jenkins.io/storable-configs-plugin)**

**Description:**

Storable Configs Plugin allows storing copies of a job’s `config.xml` file on the Jenkins controller with a user-specified file name.

Storable Configs Plugin 1.0 and earlier does not restrict the user-specified file name, except that a `.xml` suffix is added if it’s not already present.
This allows attackers with Job/Configure permission to replace any other `.xml` file on the Jenkins controller with the job’s `config.xml` file’s content.

As of publication of this advisory, there is no fix.

## Severity

* SECURITY-1813:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:L/A:N)
* SECURITY-1851:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:L/A:N)
* SECURITY-1869:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1903:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-1904:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-1908:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1911:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1912:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1913:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1914:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1916:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1921:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1927:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1935:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1956:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:H/I:N/A:N)
* SECURITY-1961:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-1966:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N)
* SECURITY-1967:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)
* SECURITY-1968 (1):
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N)
* SECURITY-1968 (2):
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:H/A:N)
* SECURITY-1976:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:H/I:H/A:H)
* SECURITY-1979:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-1980:
  [High](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)
* SECURITY-1998:
  [Medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-2014:
  [Low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

## Affected Versions

* **android-lint
  Plugin**
  up to and including
  2.6
* **Blue Ocean
  Plugin**
  up to and including
  1.23.2
* **chosen-views-tabbar
  Plugin**
  up to and including
  1.2
* **ClearCase Release
  Plugin**
  up to and including
  0.3
* **computer-queue-plugin
  Plugin**
  up to and including
  1.5
* **Copy data to workspace
  Plugin**
  up to and including
  1.0
* **Coverage/Complexity Scatter Plot
  Plugin**
  up to and including
  1.1.1
* **Custom Job Icon
  Plugin**
  up to and including
  0.2
* **Description Column
  Plugin**
  up to and including
  1.3
* **ElasTest
  Plugin**
  up to and including
  1.2.1
* **Email Extension
  Plugin**
  up to and including
  2.75
* **Health Advisor by CloudBees
  Plugin**
  up to and including
  3.2.0
* **Locked Files Report
  Plugin**
  up to and including
  1.6
* **Mailer
  Plugin**
  up to and including
  1.32
* **MongoDB
  Plugin**
  up to and including
  1.3
* **perfecto
  Plugin**
  up to and including
  1.17
* **Pipeline Maven Integration
  Plugin**
  up to and including
  3.9.2
* **Radiator View
  Plugin**
  up to and including
  1.29
* **Selection tasks
  Plugin**
  up to and including
  1.0
* **Storable Configs
  Plugin**
  up to and including
  1.0
* **Validating String Parameter
  Plugin**
  up to and including
  2.4

## Fix

* **Blue Ocean
  Plugin**
  should be updated to version
  1.23.3
* **computer-queue-plugin
  Plugin**
  should be updated to version
  1.6
* **Email Extension
  Plugin**
  should be updated to version
  2.76
* **Health Advisor by CloudBees
  Plugin**
  should be updated to version
  3.2.1
* **Mailer
  Plugin**
  should be updated to version
  1.32.1
* **perfecto
  Plugin**
  should be updated to version
  1.18
* **Pipeline Maven Integration
  Plugin**
  should be updated to version
  3.9.3
* **Validating String Parameter
  Plugin**
  should be updated to version
  2.5

These versions include fixes to the vulnerabilities described above. All prior versions are considered to be affected by these vulnerabilities unless otherwise indicated.

As of publication of this advisory, no fixes are available for the following plugins:

* android-lint
  Plugin
* chosen-views-tabbar
  Plugin
* ClearCase Release
  Plugin
* Copy data to workspace
  Plugin
* Coverage/Complexity Scatter Plot
  Plugin
* Custom Job Icon
  Plugin
* Description Column
  Plugin
* ElasTest
  Plugin
* Locked Files Report
  Plugin
* MongoDB
  Plugin
* Radiator View
  Plugin
* Selection tasks
  Plugin
* Storable Configs
  Plugin

[Learn why we announce these issues.](/security/plugins/#unresolved)

## Credit

The Jenkins project would like to thank the reporters for discovering and
[reporting](/security/#reporting-vulnerabilities)
these vulnerabilities:

* **Daniel Beck, CloudBees, Inc.**
  for
  SECURITY-1966, SECURITY-1967, SECURITY-1968 (1), SECURITY-1968 (2), SECURITY-1976
* **Jinchen Sheng, Ant Security FG Lab.**
  for
  SECURITY-1956, SECURITY-1961
* **Matt Sicker, CloudBees, Inc.**
  for
  SECURITY-1998
* **Peter StÃ¶ckli (via Github Security Lab)**
  for
  SECURITY-1813
* **Wadeck Follonier, CloudBees, Inc.**
  for
  SECURITY-1869, SECURITY-1903, SECURITY-1904, SECURITY-1908, SECURITY-1911, SECURITY-1912, SECURITY-1913, SECURITY-1914, SECURITY-1916, SECURITY-1921, SECURITY-1927, SECURITY-2014
* **Wadeck Follonier, CloudBees, Inc. and Daniel Beck, CloudBees, Inc.**
  for
  SECURITY-1935



=== Content from plugins.jenkins.io_9784f6ae_20250119_133126.html ===

# Pipeline Maven Integration

How to install

* [Documentation](/pipeline-maven/)
* [Releases](/pipeline-maven/releases/)
* [Issues](/pipeline-maven/issues/)
* [Dependencies](/pipeline-maven/dependencies/)
* [Health Score](/pipeline-maven/healthscore/)

[![Build](https://camo.githubusercontent.com/59d1f80140ad963d6e2c2ab2d68ac1cafe2ec9164c607c6000a2b9316173ce29/68747470733a2f2f63692e6a656e6b696e732e696f2f6a6f622f506c7567696e732f6a6f622f706970656c696e652d6d6176656e2d706c7567696e2f6a6f622f6d61737465722f62616467652f69636f6e)](https://ci.jenkins.io/job/Plugins/job/pipeline-maven-plugin/job/master/) [![Contributors](https://camo.githubusercontent.com/e039b6f06b118f4ea1fba39634663eaa459eb097f3ab4dc4f96d5d382d15e6ab/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636f6e7472696275746f72732f6a656e6b696e7363692f706970656c696e652d6d6176656e2d706c7567696e2e7376673f636f6c6f723d626c7565)](https://github.com/jenkinsci/pipeline-maven-plugin/graphs/contributors) [![Jenkins Plugin Installs](https://camo.githubusercontent.com/f9702dfab8ceda110e47a6a9c70ab5590b4a92b21e2ef21e7ca0b9c6924435c7/68747470733a2f2f696d672e736869656c64732e696f2f6a656e6b696e732f706c7567696e2f692f706970656c696e652d6d6176656e2e7376673f636f6c6f723d626c7565266c6162656c3d696e7374616c6c6174696f6e73)](https://plugins.jenkins.io/pipeline-maven/) [![Plugin](https://camo.githubusercontent.com/345ebbfc71f64e5ebc7bec1f5ea5d755ef83a7575874600e75152702913a518a/68747470733a2f2f696d672e736869656c64732e696f2f6a656e6b696e732f706c7567696e2f762f706970656c696e652d6d6176656e2e737667)](https://plugins.jenkins.io/pipeline-maven/) [![GitHub release](https://camo.githubusercontent.com/c2facd53b91d06f6239e85bc0ea43a38c187ceae5bfc292d1677fdd3188d0da7/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6a656e6b696e7363692f706970656c696e652d6d6176656e2d706c7567696e2e7376673f6c6162656c3d6368616e67656c6f67)](https://github.com/jenkinsci/pipeline-maven-plugin/releases/latest)

[![Jenkins logo](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/jenkins.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/jenkins.png) [![plus](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/plus.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/plus.png) [![Maven Owl logo](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/maven-owl.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/maven-owl.png)

The Pipeline Maven Plugin provides an **advanced set of features** for using [Apache Maven](https://maven.apache.org) in [Jenkins Pipelines](https://www.jenkins.io/doc/book/pipeline/).

The `withMaven` step configures a maven environment to use within a pipeline job by calling `sh "mvn …​` or `bat "mvn …​`. The selected maven installation is configured and prepended to the path.

It provides **several [Features](#plugin-content-features) to simplify** the creation of your Pipeline scripts and ensure the **[Traceability of Maven builds](#plugin-content-feature-traceability)**.

It uses some **[Sensible default Maven parameters](#plugin-content-feature-sensible-default-maven-settings)** for a CI usage (batch-mode, …​) and **automatically configures the Jenkins [Report Publishers](#plugin-content-feature-publishers)** (Artifacts, JUnit, …​).

The **[Default Configuration](#plugin-content-feature-default-configuration) can be defined globally or at the folder level** to keep your pipeline code as short as possible while using the expected configuration (Maven settings.xml file…​) globally or locally.

This plugin allows transitioning smoothly from the legacy [Maven Integration](https://plugins.jenkins.io/maven-plugin/) job type by allowing to reuse **[Maven Settings Support](#plugin-content-feature-maven-integration-global-settings)** and by proposing the **[Trigger downstream pipeline when a snapshot is built](#plugin-content-feature-trigger-downstream)**.

Please note **per default some features will not be available** and you will have to change/configure a database storage which suits your environment.

* [Installation](#plugin-content-installation)
* [Changelog](#plugin-content-changelog)
* [Usage](#plugin-content-usage)
* [Features](#plugin-content-features)
  + [Configurable as code](#plugin-content-configurable-as-code)
  + [Sensible default Maven parameters](#plugin-content-feature-sensible-default-maven-settings)
  + [Maven Settings Support](#plugin-content-feature-maven-integration-global-settings)
  + [Traceability of Maven builds](#plugin-content-feature-traceability)
  + [Report Publishers](#plugin-content-feature-publishers)
  + [Default Configuration](#plugin-content-feature-default-configuration)
  + [Trigger downstream pipeline when a snapshot is built](#plugin-content-feature-trigger-downstream)
  + [Support of Maven Wrapper 'mvnw'](#plugin-content-feature-mvnw)
* [Adding more Maven Reporters](#plugin-content-adding-more-maven-reporters)
* [Database Setup](#plugin-content-db-setup)
  + [Using a MySQL Database](#plugin-content-db-setup-mysql)
  + [Using a PostgreSQL Database](#plugin-content-db-setup-postgresql)
* [Known Limitations](#plugin-content-known-limitation)
  + [Maven and JDK installation not supported in `docker.image('xxx').inside{…​}`](#plugin-content-maven-and-jdk-installation-not-supported-in-docker-imagexxx-inside)
  + [`withMaven()` not supported in `docker.image('xxx').inside{…​}` with old versions of the Docker engine](#plugin-content-withmaven-not-supported-in-docker-imagexxx-inside-with-old-versions-of-the-docker-engine)
* [Frequently Asked Questions](#plugin-content-faq)

## Installation

The plugin can be found under the name `Pipeline Maven Integration Plugin` in the [Default Update Site](https://updates.jenkins.io/#default-update-site).

**For tests purposes only**, pre-releases (beta) versions are available in the [Experimental Plugin Site](https://updates.jenkins.io/#experimental-plugin-site) and development versions (incremental releases) are archived on every successful build on [our CI environment](https://ci.jenkins.io/job/Plugins/job/pipeline-maven-plugin/).

| 🔥 | **If you want to use the feature [Trigger downstream pipeline when a snapshot is built](#plugin-content-feature-trigger-downstream) it is critical to [setup a database](#plugin-content-db-setup)** as H2 is not preconfigured by default any more. **Using H2 might degrade your environment stability** (The H2 database is running in your instance JVM and could request too many resources). |
| --- | --- |

## Changelog

Release notes are recorded in [GitHub Releases](https://github.com/jenkinsci/pipeline-maven-plugin/releases).

## Usage

The Pipeline Maven Plugin works with Linux, Windows and MacOSX build agents.

Simple Maven build on a Linux agent.

```
pipeline {
  agent any
  stages {
    stage("Build") {
      steps {
        git url: 'https://github.com/cyrille-leclerc/multi-module-maven-project'
        withMaven {
          sh "mvn clean verify"
        } // withMaven will discover the generated Maven artifacts, JUnit Surefire & FailSafe reports and FindBugs reports
      }
    }
  }
}
```

It can supports various parameters to fine-tune its behavior.

Within a node or a docker.image block, create a withMaven block to set up a `with maven` environment.

The configured environment will be used when calling maven inside the block by using `sh mvn` or `bat mvn`.

The following parameters can be used to configure Maven:

* **Maven** (`maven`): Allow the selection of a Maven installation configured on the Global Jenkins configuration or on the Global Tool Configuration page if using Jenkins > 2.0. When auto-install is enabled, maven will be downloaded and made available for the pipeline job.
* **JDK** (`jdk`): Allows the selection of a JDK installation. If auto-install is enabled, the JDK will be downloaded and made available for the pipeline job.
* **Maven Settings**

  + **Maven Settings Config** (`mavenSettingsConfig`): Select a Maven settings file **ID** from [Config File Provider Plugin](https://plugins.jenkins.io/config-file-provider/) allowing the replacement of server credentials and variable substitutions as configured in [Config File Provider Plugin](https://github.com/jenkinsci/config-file-provider-plugin). The settings' element in the `settings.xml` file contains elements used to define values which configure Maven execution in various ways, like the `pom.xml`, but should not be bundled to any specific project, or distributed to an audience. See also [settings.xml](http://maven.apache.org/settings.html) reference
  + **Maven Settings File Path** (`mavenSettingsFilePath`): Specify the path to a Maven `settings.xml` file on the build agent. The specified path can be absolute or relative to the workspace.
  + If none of `mavenSettingsConfig` and `mavenSettingsFilePath` are defined, `withMaven(){}` will use the Maven settings defined in the Jenkins Global Tool Configuration if declared
* **Maven Global Settings**

  + **Maven Global Settings Config** (`globalMavenSettingsConfig`): Select a Maven global settings file **ID** from [Config File Provider Plugin](https://plugins.jenkins.io/config-file-provider/).
  + **Maven Global Settings File Path** (`globalMavenSettingsFilePath`): Specify the path to a Maven global `settings.xml` file on the build agent. The specified path can be absolute or relative to the workspace.
  + If none of `globalMavenSettingsConfig` and`globalMavenSettingsFilePath` are defined, `withMaven(){}` will use the Maven global settings defined in the Jenkins Global Tool Configuration if declared
* **Maven JVM Opts** (`mavenOpts`): Specify JVM specific options needed when launching Maven as an external process, these are not maven specific options. See: [Java Options](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#CBBIJCHG)
   Shell-like environment variable expansions work in this field, by using the `${VARIABLE`} syntax.
* **Maven Local Repository** (`mavenLocalRepo`): Specify a custom local repository path. Shell-like environment variable expansions work with this field, by using the `${VARIABLE`} syntax. Normally, Jenkins uses the local Maven repository as determined by Maven, by default `~/.m2/repository` and can be overridden by `<localRepository>` in `~/.m2/settings.xml` (see Configuring your Local Repository))
   This normally means that all the jobs that are executed on the same node shares a single Maven repository. The upside of this is that you can save the disk space, the downside is that the repository is not multi process safe and having multiple builds run concurrently can corrupt it. Additionally, builds could interfere with each other by sharing incorrect or partially built artifacts. For example, you might end up having builds incorrectly succeed, just because your have all the dependencies in your local repository, despite that fact that none of the repositories in POM might have them.
   By using this option, Jenkins will tell Maven to use a custom path for the build as the local Maven repository by using `-Dmaven.repo.local`
   If specified as a relative path then this value will be resolved against the workspace root and not the current working directory.
   ie. `$WORKSPACE/.repository` if `.repository` value is specified.
* **Maven Traceability** (`traceability`): adds additional output to the maven wrapper script. Maven is executed with parameter `--show-version` and the start of the wrapper script is indicated by `----- withMaven Wrapper script -----`. Defaults to `false`.

| ❗ | `mavenSettingsConfig` and `globalMavenSettingsConfig` use the **ID**, not the **name**, of the Maven settings file (resp Maven Global Settings file). |
| --- | --- |

| 💡 | The Pipeline Syntax snippet code generator can be used to assist on generating the withMaven step parameters! |
| --- | --- |

More complex Maven build on a Windows agent.

```
pipeline {
  agent any
  stages {
    stage("Build") {
      steps {
        git url: 'https://github.com/cyrille-leclerc/multi-module-maven-project'
        withMaven(
            // Maven installation declared in the Jenkins "Global Tool Configuration"
            maven: 'maven-3', // (1)
            // Use `$WORKSPACE/.repository` for local repository folder to avoid shared repositories
            mavenLocalRepo: '.repository', // (2)
            // Maven settings.xml file defined with the Jenkins Config File Provider Plugin
            // We recommend to define Maven settings.xml globally at the folder level using
            // navigating to the folder configuration in the section "Pipeline Maven Configuration / Override global Maven configuration"
            // or globally to the entire master navigating to  "Manage Jenkins / Global Tools Configuration"
            mavenSettingsConfig: 'my-maven-settings' // (3)
        ) {
          // Run the maven build
          sh "mvn clean verify"
        } // withMaven will discover the generated Maven artifacts, JUnit Surefire & FailSafe & FindBugs & SpotBugs reports...
      }
    }
  }
}
```

In the above example the following parameters are used to configure Maven:

1. **maven:** 'maven-3' Maven Installation will be used, this installation has to be declared in the Global Jenkins configuration or Tool installations page.
2. **mavenLocalRepo:** a local repository folder is specified to avoid shared repositories
3. **mavenSettingsConfig:** specifies a specific settings.xml configuration from [Config File Provider Plugin](https://plugins.jenkins.io/config-file-provider/), allowing the replacement of variables and credentials.

## Features

### Configurable as code

See demos on the [Configuration as Code](https://plugins.jenkins.io/configuration-as-code/):

<https://github.com/jenkinsci/configuration-as-code-plugin/tree/master/demos/pipeline-maven>

### Sensible default Maven parameters

The Maven parameters that are useful on a build server, `--batch-mode` (`-B`) and `--no-transfer-progress` (`-ntp`) are enable by default, no need to add them in your mvn invocations.

if **[Traceability of Maven builds](#plugin-content-feature-traceability)** is enabled, `--no-transfer-progress` (`-ntp`) option is removed, and `--show-version` (`-V`) is added.

### Maven Settings Support

Please note this is NOT part of this plugin, this is the [Maven](https://plugins.jenkins.io/maven-plugin/) plugin configuration, but we depend on it.

The `withMaven()` pipeline step will setup the Maven settings file and global settings file either explicitly using the attributes of the `withMaven(){}` step declaration or implicitly using the Maven Global Settings and Settings files defined at the folder level or in the Jenkins Global Tools Configuration.

Using implicit declaration, Jenkins administrators can simplify the work of pipeline authors hiding the "boilerplate" to declare the credentials of the Git, Nexus, Artifactory…​ servers and all the needed proxies, mirrors…​

[![global tools configuration maven settings](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/global-tools-configuration-maven-settings.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/global-tools-configuration-maven-settings.png) [![default maven settings defined at the folder level](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/default-maven-settings-defined-at-the-folder-level.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/default-maven-settings-defined-at-the-folder-level.png)

### Traceability of Maven builds

By setting the parameter `traceability` to `true` (either globally on the tools configuration page, or for one step in particular), the `withMaven()` pipeline step will capture in the logs of the build all the details of the execution:

[![global tools configuration traceability](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/global-tools-configuration-traceability.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/global-tools-configuration-traceability.png)

* Version of the JVM

  + `withMaven(){}` step initialization:

```
[withMaven] use JDK installation JDK8
```

* `mvn` executable invocation:

```
Java version: 1.8.0_102, vendor: Oracle Corporation
```

* Version of Maven

  + `withMaven(){}` step initialization:

```
[withMaven] use Maven installation 'M3'
```

* `mvn` executable invocation:

```
Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00)
```

* Name or path of the Maven settings.xml and Maven global settings.xml file.

  + `withMaven(){}` step initialization:

```
[withMaven] use Maven settings provided by the Jenkins Managed Configuration File 'maven-settings-for-supply-chain-build-job'
```

* When using the Maven settings.xml and global settings.xml files provided by the [Jenkins Config File Provider Plugin](https://plugins.jenkins.io/config-file-provider/), details of the Jenkins credentials injected in the Maven build.

  + `withMaven(){}` step initialization:

```
[withMaven] use Maven settings.xml 'maven-settings-for-supply-chain-build-job' with Maven servers credentials provided by Jenkins (replaceAll: true): [mavenServerId: 'nexus.beescloud.com', jenkinsCredentials: 'beescloud-nexus-deployment-credentials', username: 'deployment', ...]
```

Declarative pipeline snippet

```
pipeline {
  agent any
  stages {
    stage("Build") {
      steps {
        withMaven(traceability: true){
            .....
        }
      }
    }
  }
}
```

Scripted pipeline snippet

```
node {
  stage ('Build') {
    withMaven(traceability: true) {
      ...
    }
  }
}
```

Logs sample

```
 [withMaven] use JDK installation JDK8
 [withMaven] use Maven installation 'M3'
 [withMaven] use Maven settings provided by the Jenkins Managed Configuration File 'maven-settings-for-supply-chain-build-job'
 [withMaven] use Maven settings.xml 'maven-settings-for-supply-chain-build-job' with Maven servers credentials provided by Jenkins (replaceAll: true):
      [mavenServerId: 'nexus.beescloud.com', jenkinsCredentials: 'beescloud-nexus-deployment-credentials', username: 'deployment', type: 'UsernamePasswordCredentialsImpl'],
      [mavenServerId: 'github.beescloud.com', jenkinsCredentials: 'github-enterprise-api-token', username: 'dev1', type: 'UsernamePasswordCredentialsImpl']
 ...
 Running shell script
 + mvn clean deploy
 ----- withMaven Wrapper script -----
 Picked up JAVA_TOOL_OPTIONS: -Dmaven.ext.class.path=".../pipeline-maven-spy.jar" -Dorg.jenkinsci.plugins.pipeline.maven.reportsFolder="..."
 Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00)
 Maven home: /home/ubuntu/jenkins-home/tools/hudson.tasks.Maven_MavenInstallation/M3
 Java version: 1.8.0_102, vendor: Oracle Corporation
 Java home: /home/ubuntu/jenkins-home/tools/hudson.model.JDK/JDK8/jre
 Default locale: en_US, platform encoding: UTF-8
 OS name: "linux", version: "3.13.0-109-generic", arch: "amd64", family: "unix"
```

### Report Publishers

Maven build executions inside the `withMaven(){}` will be detected and Jenkins will transparently

* Archive and fingerprint generated Maven artifacts and Maven attached artifacts
* Publish JUnit / Surefire reports (if the [Jenkins JUnit Plugin](https://plugins.jenkins.io/junit/) is installed)
* Concordion test reports (since 3.0.0)
* And more (see below) …​

| ⚠️ | Deprecated publishers  * Publish Findbugs reports (if the [Jenkins FindBugs Plugin](https://plugins.jenkins.io/findbugs/) is installed) * Publish a report of the tasks (`FIXME` and `TODO`) found in the java source code (if the [Jenkins Tasks Scanner Plugin](https://plugins.jenkins.io/tasks/) is installed). |
| --- | --- |

| 💡 | In the future, deprecated publishers should be replaced by [Warnings Next Generation](https://plugins.jenkins.io/warnings-ng/) implementations (See: [JENKINS-57427](https://issues.jenkins-ci.org/browse/JENKINS-57427)) |
| --- | --- |

| ℹ️ | The detection of Maven builds requires using Maven 3.2+. |
| --- | --- |

Generated Artifact

Archiving and the fingerprinting of the artifacts and attached artifacts generated by the Maven build (jar, sources jar, javadocs jar…​)

Generated JUnit reports

Requires [Jenkins JUnit Plugin](https://plugins.jenkins.io/junit/). If the plugin is not installed, then the Maven report is ignored.

Publishing of the JUnit reports generated from the [Surefire](http://maven.apache.org/surefire/maven-surefire-plugin/), [FailSafe](https://maven.apache.org/surefire/maven-failsafe-plugin/), [Tycho](https://www.eclipse.org/tycho/), [Karma](https://github.com/karma-runner/maven-karma-plugin) or [Frontend](https://github.com/eirslett/frontend-maven-plugin) plugins during the Maven build. Additionally, if [JUnit Attachments](https://plugins.jenkins.io/junit-attachments/) or [Flaky Test Handler](https://plugins.jenkins.io/flaky-test-handler/) are installed, JUnits reports will be processed by these plugins. Except the Frontend one, all these plugins publish a `reportsDirectory` property which can be used to find and import JUnit compatible reports. The Frontend plugin has another behaviour, so for detection to work, you have to set a `REPORTS_DIRECTORY` environment variable to the plugin (and reuse it in your Karma configuration, to be consistent) :

```
   <plugin>
        <groupId>com.github.eirslett</groupId>
        <artifactId>frontend-maven-plugin</artifactId>
        <executions>
            <execution>
                ...
                <configuration>
                    ...
                    <environmentVariables>
                        <REPORTS_DIRECTORY>${project.build.directory}/karma-reports</REPORTS_DIRECTORY>
                    </environmentVariables>
                </configuration>
            </execution>
        </executions>
    </plugin>
```

Generated Findbugs reports

Requires the deprecated [Jenkins FindBugs Plugin](https://plugins.jenkins.io/findbugs/).

Publishing of the Findbugs reports generated by the Maven build

Tasks scanner report

Requires the deprecated [Jenkins Tasks Scanner Plugin](https://plugins.jenkins.io/tasks/)

Publishing of a report of the “FIXME” and “TODO” tasks found in the java source code. The keywords can be configured.

Dependencies Fingerprinting (since 2.5.0)

Fingerprint the Maven dependencies. By default, only the snapshot dependencies of scope compile, runtime and provided are fingerprinted.

[Concordion](http://concordion.org/) test report (since 3.0.0)

Requires the [Jenkins HTML Publisher Plugin](https://plugins.jenkins.io/htmlpublisher/)

Publishing of the [Concordion](http://concordion.org/) test reports. Publish the Concordion reports generated by the `maven-surefire-plugin:test` and the `maven-failsafe-plugin:integration-test goals and located in the folder described by the system property `concordion.output.dir as documented in [Concordion > Integration > Java > Maven](http://concordion.org/integrations/java/html/#maven)

[Maven Invoker Plugin](https://maven.apache.org/plugins/maven-invoker-plugin/) test reports

Publish test reports generated by the [maven-invoker-plugin:run](https://maven.apache.org/plugins/maven-invoker-plugin/) goal

JGiven reports

Requires the [Jenkins JGiven Plugin](https://plugins.jenkins.io/jgiven/)

Publish [JGiven](http://jgiven.org/) test reports

JaCoCo Code Coverage

Requires the [Jenkins JaCoCo Plugin](https://plugins.jenkins.io/jacoco/)

Publish JaCoCo Code Coverage

Maven Linker Publisher

Publish the Maven report on the pipeline build GUI (list of dependencies, produced artifacts, downstream & upstream pipelines).
 This publisher should be renamed "Maven Build Report Publisher".
 A reason to disable this publisher is typically to not "pollute" the build screen with Maven invocations when Maven is used as a utility (e.g. invocations of "maven-help-plugin:3.2.0:evaluate"…​)

Pipeline Graph Publisher

Build the graph of dependencies between Jenkins pipelines and Maven artifacts in order to trigger downstream pipelines (when using the `snapshotDependencies` on downstream pipelines)

#### Implicit or Explicit activation of Publishers

By default, all the publishers are enabled by default.

It is possible to change the default activation of a publisher navigating to the `Global Tool Configuration` screen.

It is possible to disable the default activation of publishers on a specific `withMaven(){…​}` step using the `publisherStrategy='EXPLICIT'` attribute in the step `withMaven(publisherStrategy='EXPLICIT'){…​}`. The publishers can then be enabled explicitly in the `withMaven(){…​}` step using the "publishers" attribute.

It is possible to use a marker file to temporarily disable the feature for a specific Maven build. Typically, used to disable a reporter for a specific build that would generate too much data for the default configuration of the reporter (e.g. too many generated artifacts…​) or to workaround a bug in the “withMaven” waiting for a fix. These markers file must be located in the home directory of the build.

| Reporter | Configuration to disable the feature Since v2.3.0 | Marker file to disable the feature |
| --- | --- | --- |
| Generated Artifact | `withMaven(options: [artifactsPublisher(disabled: true)],…​)`   Since 3.11.0 more fine granular options: `withMaven(options: [artifactsPublisher(fingerprintFilesDisabled: true, archiveFilesDisabled: true)],…​)` | `.skip-archive-generated-artifacts` |
| Generated JUnit reports | `withMaven(options: [junitPublisher(disabled: true)],…​)` | `.skip-publish-junit-results` |
| Generated Findbugs reports | `withMaven(options: [findbugsPublisher(disabled: true)],…​)` | `.skip-publish-findbugs-results` |
| Tasks scanner report | `withMaven(options: [openTasksPublisher(disabled: true)],…​)` | `.skip-task-scanner` |
| Dependencies Fingerprinting | `withMaven(options: [dependenciesFingerprintPublisher(disabled: true)],…​)` | `.skip-fingerprint-maven-dependencies` |
| Concordion test report | `withMaven(options: [concordionPublisher(disabled: true)],…​)`` | `.skip-publish-concordion-results` |
| Maven Invoker Plugin test reports | `withMaven(options: [invokerPublisher(disabled: true)],…​)` | `.skip-publish-invoker-run` |
| JGiven reports | `withMaven(options: [jgivenPublisher(disabled: true)],…​)` | `.skip-publish-jgiven-results` |
| JaCoCo Code Coverage | `withMaven(options: [jacocoPublisher(disabled: true)],…​)` |  |
| Maven Linker Publisher | `withMaven(options: [mavenLinkerPublisher(disabled: true)],…​)` | `skip-maven-linker-publisher` |
| Pipeline Graph Publisher | `withMaven(options: [pipelineGraphPublisher(disabled: true)],…​)` | `.skip-pipeline-graph` |

### Default Configuration

Default Maven settings can be defined globally and at the folder level.

#### Global Default Configuration

In the `Global Tool Configuration` screen

* Maven settings and Maven global settings
* Publishers settings: enable/disable publishers…​

[![pipeline maven plugin global tools configuration](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/pipeline-maven-plugin-global-tools-configuration.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/pipeline-maven-plugin-global-tools-configuration.png)

#### Folder Level Configuration

In the Folder `configuration` screen

* Maven settings and Maven global settings

[![pipeline maven folder level configuration](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/pipeline-maven-folder-level-configuration.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/pipeline-maven-folder-level-configuration.png)

### Trigger downstream pipeline when a snapshot is built

| ℹ️ | Available since version 3.0.0 |
| --- | --- |

Trigger downstream pipeline that depend on Maven artifact generated by upstream pipelines.

| ℹ️ | * The upstream artifact must be generated in a `withMaven(){}` wrapping step to be detected by the triggering system * The downstream pipeline must have selected the build trigger `Build whenever a SNAPSHOT dependency is built`    + The build trigger can be defined at the pipeline level (`Build Triggers`), at the multibranch pipeline level (`Scan Repository Triggers`) or at the GitHub Organization / Bitbucket Project level (`Scan Organizations Triggers`) * You have to manually trigger once the upstream pipeline, and the downstream pipeline so that the link between the pipelines based on the SNAPSHOT dependency is established * The dependency graph is, for the moment, optionally stored in an H2 embedded database (`$JENKINS_HOME/jenkins-jobs/jenkins-jobs.mv.db`). And there is support for PostgreSQL and MySql as well (see details below) |
| --- | --- |

[![trigger downstream 1](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/trigger-downstream-1.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/trigger-downstream-1.png) [![trigger downstream 2](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/trigger-downstream-2.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/trigger-downstream-2.png)

[![Downstream Pipeline Trigger - Org Level Configuration](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/trigger-downstream-3.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/trigger-downstream-3.png)

* Thresholds are applied to define on which type of maven build the downstream pipelines are triggered

  + Threshold based on the status of the upstream pipeline (`success`, `unstable`, `failure`, `no build`, `aborted`). By default, only builds with a `success` result will trigger downstream builds. [![downstream pipeline trigger threshold build result](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/downstream-pipeline-trigger-threshold-build-result.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/downstream-pipeline-trigger-threshold-build-result.png)
  + Threshold based on the [Maven lifecycle phase](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html) reached in the Maven build of the upstream job (`package`, `install`, `deploy`). By default, only the maven builds who reach the `deploy` phase will trigger downstream builds. [![downstream pipeline trigger threshold lifecycle](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/downstream-pipeline-trigger-threshold-lifecycle.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/downstream-pipeline-trigger-threshold-lifecycle.png)

### Support of Maven Wrapper 'mvnw'

| ℹ️ | Available since version 3.0.3 |
| --- | --- |

The Pipeline Maven Plugin works with [Maven Wrapper](https://maven.apache.org/wrapper/) 'mvnw'.

```
withMaven() {
   sh "./mvnw clean deploy"
}
```

## Adding more Maven Reporters

The API for Maven reporters is still experimental. Please open a Request for Enhancement Jira issue to discuss how to add Maven reporters.

We want to quickly add reporters for CheckStyle, Jacoco…​

## Database Setup

| ℹ️ | Available since version 1333.v333b\_b\_f053972 |
| --- | --- |

To use a database you must first install the `Pipeline Maven Plugin Database`

[![pipeline maven plugin database](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/pipeline-maven-plugin-database.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/pipeline-maven-plugin-database.png)

Have a look at the Tools configuration:

[![dao choice](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/dao-choice.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/dao-choice.png)

The make a choice in available DAOs options:

[![dao list database](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/dao-list-database.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/dao-list-database.png)

For Configuration as Code users, these are the field to add into their yaml file `daoClass` and `jdbcUrl`

### Using a MySQL Database

| ℹ️ | Available since version 3.6.0 |
| --- | --- |

The Jenkins Pipeline Maven Plugin relies on a database to store its data (list of dependencies and of generated artifacts of each build…​).

By default, the Jenkins Pipeline Maven Plugin uses an H2 embedded database, but it is recommend to use an external MySQL database.

Configuration steps to use a MySQL:

* Create an empty MySQL database with a dedicated MySQL user with permissions for Data Manipulation Language actions (DML) and Data Definition Language (DDL) actions

  + Tested with MySQL up to 8.1, with MariaDB up to 11.1 and with Amazon Aurora MySQL 5.6
* Install the Jenkins `MySQL Database` plugin

  + Navigate to `Manage Jenkins / Manage Plugins / Available`, select the `MySQL Database` plugin and click on `Download now and install after restart`
* Configure the Pipeline Maven Plugin to use the created MySQL database

  + Create Jenkins credentials for the MySQL connection navigating to `Credentials` on the left menu
  + Navigate to `Manage Jenkins / Global Tools Configuration` and go to the `Pipeline Maven Configuration` [![pipeline maven plugin configuration 1](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/pipeline-maven-plugin-configuration-1.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/pipeline-maven-plugin-configuration-1.png)
  + In the Database configuration section, define the following.

    - JDBC URL: url of the database, e.g. `jdbc:mysql://mysql.example.com/jenkins`
    - JDBC Credentials: select the credentials of the MySQL database.
    - The [parameters recommended by the Hikari Connection Pool team](https://github.com/brettwooldridge/HikariCP/wiki/MySQL-Configuration) are used by default for the MySQL connections and for the datasource (max pool size:10, server side prepared statements cache with 250 entries…​). To overwrite these defaults, click on the `Advanced Database Configuration` button.
  + Click on `Validate Database Configuration` button to verify that the connection is successful.
  + Click on `Save`. [![pipeline maven plugin configuration 2](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/pipeline-maven-plugin-configuration-2.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/pipeline-maven-plugin-configuration-2.png)

### Using a PostgreSQL Database

| ℹ️ | Available since version 3.7.0 |
| --- | --- |

The Jenkins Pipeline Maven Plugin relies on a database to store its data (list of dependencies and of generated artifacts of each build…​).

By default, the Jenkins Pipeline Maven Plugin uses an H2 embedded database, but it is recommended to use an external PostgreSQL or MySQL / MariaDB database.

Configuration steps to use a PostgreSQL:

* Create an empty PostgreSQL database with a dedicated PostgreSQL user with permissions for Data Manipulation Language actions (DML) and Data Definition Language (DDL) actions

  + Tested with PostgreSQL up to 16
* Install the Jenkins the [PostgreSQL API](https://plugins.jenkins.io/postgresql-api/) plugin

  + Navigate to `Manage Jenkins / Manage Plugins / Available`, select the `PostgreSQL API` plugin and click on `Download now and install after restart`.
* Configure the Pipeline Maven Plugin to use the created PostgreSQL database

  + Create Jenkins credentials for the PostgreSQL connection navigating to `Credentials` on the left menu
  + Navigate to `Manage Jenkins / Global Tools Configuration` and go to the `Pipeline Maven Configuration` [![pipeline maven plugin configuration postgresql](https://cdn.jsdelivr.net/gh/jenkinsci/pipeline-maven-plugin@master/docs/images/pipeline-maven-plugin-configuration-postgresql.png)](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/docs/images/pipeline-maven-plugin-configuration-postgresql.png)
  + In the Database configuration section, define the following

    - JDBC URL: url of the database, e.g. `jdbc:postgresql://postgresql.example.com:5432/jenkins
    - JDBC Credentials: select the credentials of the PostgreSQL database
    - The underlying datasource, [HikariCP](https://github.com/brettwooldridge/HikariCP), comes with sensible default configuration values (see [here](https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby)). To overwrite these defaults, click on the `Advanced Database Configuration` button.
  + Click on `Validate Database Configuration` button to verify that the connection is successful.
  + Click on `Save`.
  + Navigate to `Manage Jenkins / Global Tools Configuration` and go to the `Pipeline Maven Configuration` to verify that the database connection is successful, and the database tables have been created (see screenshot above).

## Known Limitations

### Maven and JDK installation not supported in `docker.image('xxx').inside{…​}`

Maven and JDK installers do not work with `docker.image('xxx').inside{…​}` as the docker step does not allow the use of Tool Installer, the preinstalled Maven and JDK on the docker image will be auto-discovered and used.

### `withMaven()` not supported in `docker.image('xxx').inside{…​}` with old versions of the Docker engine

`withMaven()` not supported in `docker.image('xxx').inside{…​}` with old versions of the Docker engine such as Docker 1.13.1 on CentOS7.

Any help to fix this bug is more than welcome.

[JENKINS-40484](https://issues.jenkins-ci.org/browse/JENKINS-40484) - Getting issue details…​ STATUS

## Frequently Asked Questions

See [FAQ](https://github.com/jenkinsci/pipeline-maven-plugin/blob/master/FAQ.adoc)

##### Version: 1469.ve15ca\_a\_b\_90b\_44

Released: 2 months agoRequires Jenkins 2.426.3ID: pipeline-maven
##### Installed on 9.84% of controllers

[View detailed version information](https://old.stats.jenkins.io/pluginversions/pipeline-maven.html)
##### Links

[GitHub](https://github.com/jenkinsci/pipeline-maven-plugin)[Open issues (Jira)](https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D21669)[Report an issue (Jira)](https://www.jenkins.io/participate/report-issue/redirect/#21669/pipeline-maven)[Pipeline Step Reference](https://www.jenkins.io/doc/pipeline/steps/pipeline-maven)[Extension Points](https://www.jenkins.io/doc/developer/extensions/pipeline-maven)[Javadoc](https://javadoc.jenkins.io/plugin/pipeline-maven)
##### Labels

[Maven](/ui/search/?labels=maven)[pipeline](/ui/search/?labels=pipeline)
##### Maintainers

[Alvaro Lobato](/ui/search/?query=alobato)[Cyrille Le Clerc](/ui/search/?query=cleclerc)[Arnaud Héritier](/ui/search/?query=aheritier)[Benoit](/ui/search/?query=bguerin)[Olivier Lamy](/ui/search/?query=olamy)
##### Help us improve this page!

To propose a change submit a pull request to [the plugin page](https://github.com/jenkinsci/pipeline-maven-plugin/) on GitHub.
##### Previous Security Warnings

* ###### [Arbitrary files from Jenkins controller available in Pipeline by using the withMaven step](https://jenkins.io/security/advisory/2017-03-09/)

  + Affects version 0.6 and earlier
  + Affects version 2.0-beta-5 and earlier
* ###### [XML External Entity processing vulnerability](https://jenkins.io/security/advisory/2019-05-31/#SECURITY-1409)

  + Affects version 3.7.0 and earlier
* ###### [Missing permission check allows enumerating credentials IDs](https://jenkins.io/security/advisory/2020-08-12/#SECURITY-1794%20(1))

  + Affects version 3.8.2 and earlier
* ###### [CSRF vulnerability and missing permission check allow capturing credentials](https://jenkins.io/security/advisory/2020-08-12/#SECURITY-1794%20(2))

  + Affects version 3.8.2 and earlier
* ###### [Stored XSS vulnerability in upstream cause](https://www.jenkins.io/security/advisory/2020-09-16/#SECURITY-1976)

  + Affects version 3.9.2 and earlier
* ###### [Improper masking of credentials](https://www.jenkins.io/security/advisory/2023-09-06/#SECURITY-3257)

  + Affects version 1330.v18e473854496 and earlier
![tracker](https://jenkins-matomo.do.g4v.dev/piwik.php?idsite=1&rec=1&url=https://plugins.jenkins.io//pipeline-maven/)


