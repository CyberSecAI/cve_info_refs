=== Content from pypi.org_b6ca2624_20250119_112529.html ===

![Error Icon](/_fs-ch-1T1wmsGaOgGaSxcX/assets/errorIcon.svg)
JavaScript is disabled in your browser.
Please enable JavaScript to proceed.

A required part of this site couldnâ€™t load. This may be due to a browser
extension, network issues, or browser settings. Please check your
connection, disable any ad blockers, or try using a different browser.



=== Content from github.com_651f2d9e_20250119_112529.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjupyterhub%2Fsystemdspawner%2Fsecurity%2Fadvisories%2FGHSA-cg54-gpgr-4rm6)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjupyterhub%2Fsystemdspawner%2Fsecurity%2Fadvisories%2FGHSA-cg54-gpgr-4rm6)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=jupyterhub%2Fsystemdspawner)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jupyterhub](/jupyterhub)
/
**[systemdspawner](/jupyterhub/systemdspawner)**
Public

* [Notifications](/login?return_to=%2Fjupyterhub%2Fsystemdspawner) You must be signed in to change notification settings
* [Fork
  45](/login?return_to=%2Fjupyterhub%2Fsystemdspawner)
* [Star
   92](/login?return_to=%2Fjupyterhub%2Fsystemdspawner)

* [Code](/jupyterhub/systemdspawner)
* [Issues
  23](/jupyterhub/systemdspawner/issues)
* [Pull requests
  3](/jupyterhub/systemdspawner/pulls)
* [Actions](/jupyterhub/systemdspawner/actions)
* [Projects
  0](/jupyterhub/systemdspawner/projects)
* [Security](/jupyterhub/systemdspawner/security)
* [Insights](/jupyterhub/systemdspawner/pulse)

Additional navigation options

* [Code](/jupyterhub/systemdspawner)
* [Issues](/jupyterhub/systemdspawner/issues)
* [Pull requests](/jupyterhub/systemdspawner/pulls)
* [Actions](/jupyterhub/systemdspawner/actions)
* [Projects](/jupyterhub/systemdspawner/projects)
* [Security](/jupyterhub/systemdspawner/security)
* [Insights](/jupyterhub/systemdspawner/pulse)

# user-readable api tokens in systemd units

High

[minrk](/minrk)
published
GHSA-cg54-gpgr-4rm6
Dec 7, 2020

## Package

pip

jupyterhub-systemdspawner
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

<0.15

## Patched versions

0.15

## Description

### Impact

*What kind of vulnerability is it? Who is impacted?*

user API tokens issued to single-user servers are specified in the environment of systemd units, which are accessible to all users.

In particular, the-littlest-jupyterhub is affected, which uses systemdspawner by default.

### Patches

*Has the problem been patched? What versions should users upgrade to?*

Patched in jupyterhub-systemdspawner v0.15

### Workarounds

*Is there a way for users to fix or remediate the vulnerability without upgrading?*

No workaround other than upgrading systemdspawner to 0.15

### References

*Are there any links users can visit to find out more?*

### For more information

If you have any questions or comments about this advisory:

* Open a thread in [the Jupyter forum](https://discourse.jupyter.org)
* Email us at security@ipython.org

### Severity

High

### CVE ID

CVE-2020-26261

### Weaknesses

No CWEs

### Credits

* [![@quentinmit](https://avatars.githubusercontent.com/u/115761?s=40&v=4)](/quentinmit)
  [quentinmit](/quentinmit)
  Analyst

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from discourse.jupyter.org_9bcf864e_20250119_131754.html ===


[Jupyter Community Forum](/)

| Category | Topics |
| --- | --- |
| [JupyterHub](/c/jupyterhub/10)JupyterHub lets you share interactive computing sessions with others on shared infrastructure. | 1886 |
| [JupyterLab](/c/jupyterlab/17)JupyterLab is a next-generation, web-based, extensible user interface for Project Jupyter. | 1726 |
| [Notebook](/c/notebook/31)Discuss the Jupyter Notebook document format for storing narrative text, code, and the outputs of that code, as well as the ecosystem of tools around it. | 946 |
| [Widgets](/c/widgets/46)Discuss widgets and interactive outputs in the Jupyter ecosystem. | 158 |
| [Binder](/c/binder/12)The Binder Project helps you create one-click, sharable, live code environments from public code repositories that runs entirely in the cloud. | 402 |
| [Kernels](/c/kernels/42)Discuss implementing, using, and managing kernels in the Jupyter ecosystem. | 104 |
| [General](/c/general/18)Discussion about Jupyter that donâ€™t fit elsewhere in the forum. | 819 |
| [Special Topics](/c/special-topics/28)A parent category for topics that focus around specific use-cases, ideas, or communities. | 33 |
| [Meta](/c/meta/8)This is place for topics that are about the Jupyter community itself, or that are about peopleâ€™s interaction with the community without necessarily falling under a specific technical topic. | 196 |
| [Site Feedback](/c/site-feedback/3)Discussion about this site, its organization, how it works, and how we can improve it. | 26 |
| [Events](/c/events/34)Information about events, or communication during events in the Jupyter community. | 29 |

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled



=== Content from github.com_32a0b890_20250119_112527.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjupyterhub%2Fsystemdspawner%2Fcommit%2Fa4d08fd2ade1cfd0ef2c29dc221e649345f23580)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjupyterhub%2Fsystemdspawner%2Fcommit%2Fa4d08fd2ade1cfd0ef2c29dc221e649345f23580)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=jupyterhub%2Fsystemdspawner)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jupyterhub](/jupyterhub)
/
**[systemdspawner](/jupyterhub/systemdspawner)**
Public

* [Notifications](/login?return_to=%2Fjupyterhub%2Fsystemdspawner) You must be signed in to change notification settings
* [Fork
  45](/login?return_to=%2Fjupyterhub%2Fsystemdspawner)
* [Star
   92](/login?return_to=%2Fjupyterhub%2Fsystemdspawner)

* [Code](/jupyterhub/systemdspawner)
* [Issues
  23](/jupyterhub/systemdspawner/issues)
* [Pull requests
  3](/jupyterhub/systemdspawner/pulls)
* [Actions](/jupyterhub/systemdspawner/actions)
* [Projects
  0](/jupyterhub/systemdspawner/projects)
* [Security](/jupyterhub/systemdspawner/security)
* [Insights](/jupyterhub/systemdspawner/pulse)

Additional navigation options

* [Code](/jupyterhub/systemdspawner)
* [Issues](/jupyterhub/systemdspawner/issues)
* [Pull requests](/jupyterhub/systemdspawner/pulls)
* [Actions](/jupyterhub/systemdspawner/actions)
* [Projects](/jupyterhub/systemdspawner/projects)
* [Security](/jupyterhub/systemdspawner/security)
* [Insights](/jupyterhub/systemdspawner/pulse)

## Commit

[Permalink](/jupyterhub/systemdspawner/commit/a4d08fd2ade1cfd0ef2c29dc221e649345f23580)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-cg54-gpgr-4rm6](https://github.com/advisories/GHSA-cg54-gpgr-4rm6 "GHSA-cg54-gpgr-4rm6")

[Browse files](/jupyterhub/systemdspawner/tree/a4d08fd2ade1cfd0ef2c29dc221e649345f23580)
Browse the repository at this point in the history

```
use EnvironmentFile to pass environment variables to systemd units
```

* Loading branch information

[![@minrk](https://avatars.githubusercontent.com/u/151929?s=40&v=4)](/minrk)

[minrk](/jupyterhub/systemdspawner/commits?author=minrk "View all commits by minrk")
authored
Dec 7, 2020

2 parents
[6dc1165](/jupyterhub/systemdspawner/commit/6dc116502bf18182fe548c40269b339e2ae26e81)
+
[7d7cf42](/jupyterhub/systemdspawner/commit/7d7cf42db76d9cfa5a4bc42fff14943877ac570b)

commit a4d08fd

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**117 additions**
and
**15 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* setup.py
  [setup.py](#diff-60f61ab7a8d1910d86d9fda2261620314edcae5894d5aaa236b821c7256badd7)
* systemdspawner

  + systemdspawner/systemd.py
    [systemd.py](#diff-bd23127b48ede7fc341829a7fbcf5687517ceb2ad7e595308a013813bfc28c64)
* tests

  + tests/test\_systemd.py
    [test\_systemd.py](#diff-ebddb031c68da311f7e5e2366365cf06a60f9c43138cf7d228c286feaf8600b5)

## There are no files selected for viewing

11 changes: 11 additions & 0 deletions

11
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/jupyterhub/systemdspawner/blob/a4d08fd2ade1cfd0ef2c29dc221e649345f23580/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -1,5 +1,16 @@ |
|  |  | # Changelog |
|  |  |  |
|  |  | ## v0.15 |
|  |  |  |
|  |  | Fixes vulnerability [GHSA-cg54-gpgr-4rm6](https://github.com/jupyterhub/systemdspawner/security/advisories/GHSA-cg54-gpgr-4rm6) affecting all previous releases. |
|  |  |  |
|  |  | - Use EnvironmentFile to pass environment variables to units. |
|  |  |  |
|  |  | ## v0.14 |
|  |  |  |
|  |  | - define entrypoints for JupyterHub spawner configuration |
|  |  | - Fixes for CentOS 7 |
|  |  |  |
|  |  | ## v0.13 |
|  |  |  |
|  |  | ### Bug Fixes |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[setup.py](#diff-60f61ab7a8d1910d86d9fda2261620314edcae5894d5aaa236b821c7256badd7 "setup.py")

Show comments

[View file](/jupyterhub/systemdspawner/blob/a4d08fd2ade1cfd0ef2c29dc221e649345f23580/setup.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2,7 +2,7 @@ |
|  |  |  |
|  |  | setup( |
|  |  | name='jupyterhub-systemdspawner', |
|  |  | version='0.14', |
|  |  | version='0.15.0', |
|  |  | description='JupyterHub Spawner using systemd for resource isolation', |
|  |  | long\_description='See https://github.com/jupyterhub/systemdspawner for more info', |
|  |  | url='https://github.com/jupyterhub/systemdspawner', |
| Expand Down | |  |

84 changes: 78 additions & 6 deletions

84
[systemdspawner/systemd.py](#diff-bd23127b48ede7fc341829a7fbcf5687517ceb2ad7e595308a013813bfc28c64 "systemdspawner/systemd.py")

Show comments

[View file](/jupyterhub/systemdspawner/blob/a4d08fd2ade1cfd0ef2c29dc221e649345f23580/systemdspawner/systemd.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,8 +4,62 @@ |
|  |  | Contains functions to start, stop & poll systemd services. |
|  |  | Probably not very useful outside this spawner. |
|  |  | """ |
|  |  |  |
|  |  | import asyncio |
|  |  | import os |
|  |  | import re |
|  |  | import shlex |
|  |  | import warnings |
|  |  |  |
|  |  | # light validation of environment variable keys |
|  |  | env\_pat = re.compile("[A-Za-z\_]+") |
|  |  |  |
|  |  | RUN\_ROOT = "/run" |
|  |  |  |
|  |  | def ensure\_environment\_directory(environment\_file\_directory): |
|  |  | """Ensure directory for environment files exists and is private""" |
|  |  | # ensure directory exists |
|  |  | os.makedirs(environment\_file\_directory, mode=0o700, exist\_ok=True) |
|  |  | # validate permissions |
|  |  | mode = os.stat(environment\_file\_directory).st\_mode |
|  |  | if mode & 0o077: |
|  |  | warnings.warn( |
|  |  | f"Fixing permissions on environment directory {environment\_file\_directory}: {oct(mode)}", |
|  |  | RuntimeWarning, |
|  |  | ) |
|  |  | os.chmod(environment\_file\_directory, 0o700) |
|  |  | else: |
|  |  | return |
|  |  | # Check again after supposedly fixing. |
|  |  | # Some filesystems can have weird issues, preventing this from having desired effect |
|  |  | mode = os.stat(environment\_file\_directory).st\_mode |
|  |  | if mode & 0o077: |
|  |  | warnings.warn( |
|  |  | f"Bad permissions on environment directory {environment\_file\_directory}: {oct(mode)}", |
|  |  | RuntimeWarning, |
|  |  | ) |
|  |  |  |
|  |  |  |
|  |  | def make\_environment\_file(environment\_file\_directory, unit\_name, environment\_variables): |
|  |  | """Make a systemd environment file |
|  |  |  |
|  |  | - ensures environment directory exists and is private |
|  |  | - writes private environment file |
|  |  | - returns path to created environment file |
|  |  | """ |
|  |  | ensure\_environment\_directory(environment\_file\_directory) |
|  |  | env\_file = os.path.join(environment\_file\_directory, f"{unit\_name}.env") |
|  |  | env\_lines = [] |
|  |  | for key, value in sorted(environment\_variables.items()): |
|  |  | assert env\_pat.match(key), f"{key} not a valid environment variable" |
|  |  | env\_lines.append(f"{key}={shlex.quote(value)}") |
|  |  | env\_lines.append("") # trailing newline |
|  |  | with open(env\_file, mode="w") as f: |
|  |  | # make the file itself private as well |
|  |  | os.fchmod(f.fileno(), 0o400) |
|  |  | f.write("\n".join(env\_lines)) |
|  |  |  |
|  |  | return env\_file |
|  |  |  |
|  |  |  |
|  |  | async def start\_transient\_service( |
| Expand All | | @@ -20,14 +74,32 @@ async def start\_transient\_service( |
|  |  | slice=None, |
|  |  | ): |
|  |  | """ |
|  |  | Start a systemd transient service with given paramters |
|  |  | Start a systemd transient service with given parameters |
|  |  | """ |
|  |  |  |
|  |  | run\_cmd = [ |
|  |  | 'systemd-run', |
|  |  | '--unit', unit\_name, |
|  |  | ] |
|  |  |  |
|  |  | if properties is None: |
|  |  | properties = {} |
|  |  | else: |
|  |  | properties = properties.copy() |
|  |  |  |
|  |  | # ensure there is a runtime directory where we can put our env file |
|  |  | # If already set, can be space-separated list of paths |
|  |  | runtime\_directories = properties.setdefault("RuntimeDirectory", unit\_name).split() |
|  |  |  |
|  |  | # runtime directories are always resolved relative to `/run` |
|  |  | # grab the first item, if more than one |
|  |  | runtime\_dir = os.path.join(RUN\_ROOT, runtime\_directories[0]) |
|  |  | # make runtime directories private by default |
|  |  | properties.setdefault("RuntimeDirectoryMode", "700") |
|  |  | # preserve runtime directories across restarts |
|  |  | # allows `systemctl restart` to load the env |
|  |  | properties.setdefault("RuntimeDirectoryPreserve", "restart") |
|  |  |  |
|  |  | if properties: |
|  |  | for key, value in properties.items(): |
|  |  | if isinstance(value, list): |
| Expand All | | @@ -37,10 +109,10 @@ async def start\_transient\_service( |
|  |  | run\_cmd.append('--property={}={}'.format(key, value)) |
|  |  |  |
|  |  | if environment\_variables: |
|  |  | run\_cmd += [ |
|  |  | '--setenv={}={}'.format(key, value) |
|  |  | for key, value in environment\_variables.items() |
|  |  | ] |
|  |  | environment\_file = make\_environment\_file( |
|  |  | runtime\_dir, unit\_name, environment\_variables |
|  |  | ) |
|  |  | run\_cmd.append(f"--property=EnvironmentFile={environment\_file}") |
|  |  |  |
|  |  | # Explicitly check if uid / gid are not None, since 0 is valid value for both |
|  |  | if uid is not None: |
| Expand All | | @@ -51,7 +123,7 @@ async def start\_transient\_service( |
|  |  |  |
|  |  | if slice is not None: |
|  |  | run\_cmd += ['--slice={}'.format(slice)] |
|  |  |  |
|  |  |  |
|  |  | # We unfortunately have to resort to doing cd with bash, since WorkingDirectory property |
|  |  | # of systemd units can't be set for transient units via systemd-run until systemd v227. |
|  |  | # Centos 7 has systemd 219, and will probably never upgrade - so we need to support them. |
| Expand Down | |  |

35 changes: 27 additions & 8 deletions

35
[tests/test\_systemd.py](#diff-ebddb031c68da311f7e5e2366365cf06a60f9c43138cf7d228c286feaf8600b5 "tests/test_systemd.py")

Show comments

[View file](/jupyterhub/systemdspawner/blob/a4d08fd2ade1cfd0ef2c29dc221e649345f23580/tests/test_systemd.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -65,23 +65,42 @@ async def test\_service\_running\_fail(): |
|  |  | async def test\_env\_setting(): |
|  |  | unit\_name = 'systemdspawner-unittest-' + str(time.time()) |
|  |  | with tempfile.TemporaryDirectory() as d: |
|  |  | os.chmod(d, 0o777) |
|  |  | await systemd.start\_transient\_service( |
|  |  | unit\_name, |
|  |  | ['/bin/bash'], |
|  |  | ['-c', 'env > {}/env'.format(d)], |
|  |  | working\_dir='/', |
|  |  | ["/bin/bash"], |
|  |  | ["-c", "pwd; ls -la {0}; env > ./env; sleep 3".format(d)], |
|  |  | working\_dir=d, |
|  |  | environment\_variables={ |
|  |  | 'TESTING\_SYSTEMD\_ENV\_1': 'TEST\_1', |
|  |  | 'TESTING\_SYSTEMD\_ENV\_2': 'TEST\_2' |
|  |  | } |
|  |  | "TESTING\_SYSTEMD\_ENV\_1": "TEST 1", |
|  |  | "TESTING\_SYSTEMD\_ENV\_2": "TEST 2", |
|  |  | }, |
|  |  | # set user to ensure we are testing permission issues |
|  |  | properties={ |
|  |  | "User": "65534", |
|  |  | }, |
|  |  | ) |
|  |  | env\_dir = os.path.join(systemd.RUN\_ROOT, unit\_name) |
|  |  | assert os.path.isdir(env\_dir) |
|  |  | assert (os.stat(env\_dir).st\_mode & 0o777) == 0o700 |
|  |  |  |
|  |  | # Wait a tiny bit for the systemd unit to complete running |
|  |  | await asyncio.sleep(0.1) |
|  |  | assert await systemd.service\_running(unit\_name) |
|  |  |  |
|  |  | env\_file = os.path.join(env\_dir, f"{unit\_name}.env") |
|  |  | assert os.path.exists(env\_file) |
|  |  | assert (os.stat(env\_file).st\_mode & 0o777) == 0o400 |
|  |  | # verify that the env had the desired effect |
|  |  | with open(os.path.join(d, 'env')) as f: |
|  |  | text = f.read() |
|  |  | assert 'TESTING\_SYSTEMD\_ENV\_1=TEST\_1' in text |
|  |  | assert 'TESTING\_SYSTEMD\_ENV\_2=TEST\_2' in text |
|  |  | assert "TESTING\_SYSTEMD\_ENV\_1=TEST 1" in text |
|  |  | assert "TESTING\_SYSTEMD\_ENV\_2=TEST 2" in text |
|  |  |  |
|  |  | await systemd.stop\_service(unit\_name) |
|  |  | assert not await systemd.service\_running(unit\_name) |
|  |  | # systemd cleans up env file |
|  |  | assert not os.path.exists(env\_file) |
|  |  |  |
|  |  |  |
|  |  | @pytest.mark.asyncio |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `a4d08fd`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjupyterhub%2Fsystemdspawner%2Fcommit%2Fa4d08fd2ade1cfd0ef2c29dc221e649345f23580) to comment.

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from avatars.githubusercontent.com_7262088c_20250119_131755.html ===
ï¿½ï¿½ï¿½ï¿½ JFIF  ` `  ï¿½ï¿½ ;CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), quality = 90
ï¿½ï¿½ C 



ï¿½ï¿½ C  

ï¿½ï¿½  ( (" ï¿½ï¿½           
ï¿½ï¿½ ï¿½   } !1AQa"q2ï¿½ï¿½ï¿½#Bï¿½ï¿½Rï¿½ï¿½$3brï¿½
%&'()\*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyzï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½        
ï¿½ï¿½ ï¿½  w !1AQaq"2ï¿½Bï¿½ï¿½ï¿½ï¿½ #3Rï¿½brï¿½
$4ï¿½%ï¿½&'()\*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyzï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½   ? ï¿½ï¿½[ï¿½Ôµï¿½Ê»PHï¿½:ï¿½ÂŸ4ï¿½Aï¿½ï¿½ï¿½ ï¿½ gï¿½@ï¿½\_'Mï¿½ï¿½Sï¿½ï¿½Nb6ï¿½ï¿½ï¿½6ï¿½\ï¿½ï¿½p3ï¿½ï¿½[{ï¿½m3oï¿½{3ï¿½ ï¿½;voï¿½Ò¿Qï¿½~i>2ï¿½wï¿½\_jï¿½oï¿½BFï¿½]ï¿½ï¿½ï¿½Aï¿½ï¿½eï¿½'~0{ï¿½ï¿½Nï¿½ï¿½ï¿½uï¿½ï¿½M{i(ï¿½|q/ï¿½|ï¿½m5ï¿½ï¿½<ï¿½muï¿½ï¿½/'iï¿½}Ò£ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½ï¿½Ð¤ï¿½"ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½(ï¿½tï¿½ï¿½hï¿½pXï¿½ ï¿½lï¿½~sï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Eï¿½ï¿½ï¿½@5ï¿½ï¿½m/ï¿½ï¿½vï¿½hï¿½Cpï¿½ï¿½ï¿½È©ï¿½+Ë—[ï¿½uï¿½ï¿½ï¿½<ÍŸs[~Üž;ï¿½gï¿½ï¿½uX|Sï¿½].ï¿½{ï¿½bGIï¿½8?8ï¿½ï¿½ï¿½ ï¿½ï¿½E|mï¿½ï¿½VQï¿½9ï¿½+iï¿½pO&Y`ï¿½Eï¿½ï¿½ï¿½ï¿½Hï¿½ï¿½ï¿½ï¿½ï¿½!Rï¿½g{ï¿½cï¿½ï¿½ï¿½ï¿½ï¿½Oï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ e\Û‚<Æ‚ï¿½ï¿½VQï¿½ï¿½ï¿½ï¿½ï¿½Uï¿½ï¿½ï¿½Zï¿½ï¿½ï¿½\_xï¿½ï¿½ï¿½ï¿½ï¿½mï¿½[ï¿½oï¿½ï¿½,ï¿½cs
ï¿½!Tï¿½ï¿½1ï¿½ï¿½gï¿½
~hï¿½ï¿½68Oï¿½tNï¿½oï¿½Ñ¿ ï¿½ï¿½ï¿½ÆŸï¿½oï¿½à¸¶Ô¯nltï¿½ï¿½iï¿½fï¿½ï¿½ï¿½(9aï¿½\*ï¿½ï¿½'ï¿½yï¿½O'\*gv
.ulyu×†&ï¿½ï¿½ï¿½2YM,ï¿½ï¿½wï¿½ï¿½ï¿½&ï¿½ï¿½ï¿½ï¿½ï¿½qï¿½sï¿½|mï¿½Î¥ï¿½m1dï¿½ï¿½ï¿½\ï¿½N@ï¿½`z×²ï¿½Eï¿½ï¿½ï¿½ï¿½7ï¿½Hï¿½Mï¿½ï¿½yï¿½ï¿½ï¿½ï¿½ï¿½ï¿½tï¿½ï¿½~ï¿½Sï¿½ï¿½#ï¿½ï¿½2ï¿½ï¿½ï¿½Û€ï¿½ï¿½ï¿½+ÏŒï¿½kï¿½t{)ï¿½1jLï¿½ï¿½ï¿½ï¿½~\*ï¿½ï¿½ï¿½ï¿½nm[ï¿½!%ï¿½ï¿½Nï¿½ï¿½{ï¿½\Gï¿½ï¿½Yï¿½>-ï¿½ï¿½ï¿½"ï¿½ï¿½ Uï¿½ï¿½QF|ï¿½ï¿½
 ï¿½Û¾hï¿½ï¿½M9sï¿½ï¿½<%(6ï¿½vï¿½ï¿½Zï¿½ï¿½~\ï¿½Zï¿½rxï¿½ï¿½ï¿½ï¿½ï¿½.ï¿½ï¿½ï¿½ï¿½'ï¿½ï¿½ï¿½ï¿½kï¿½+Rï¿½Mï¿½ï¿½ï¿½>ï¿½ï¿½/Ð¯ï¿½WmJqï¿½Yï¿½G
ï¿½ï¿½MJ;ï¿½Kï¿½ï¿½Ë½+ï¿½ï¿½xï¿½ï¿½ï¿½ï¿½hï¿½ï¿½I&Lï¿½ï¿½\*ï¿½ï¿½ï¿½Glï¿½ï¿½ï¿½|[ï¿½kï¿½ï¿½ï¿½iï¿½ï¤¹ï¿½ï¿½Eï¿½Gï¿½ï¿½ï¿½QE<(ï¿½9%ï¿½ï¿½:ï¿½Ug6ï¿½zY3?Gï¿½+ï¿½Ä†O7tï¿½<ï¿½ï¿½ï¿½>ï¿½ï¿½ï¿½ÎŠ(ï¿½Lï¿½[ï¿½ï¿½ï¿½

=== Content from github.com_5ce761b0_20250119_112525.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjupyterhub%2Fsystemdspawner%2Fblob%2Fmain%2FCHANGELOG.md)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjupyterhub%2Fsystemdspawner%2Fblob%2Fmain%2FCHANGELOG.md)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=jupyterhub%2Fsystemdspawner)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jupyterhub](/jupyterhub)
/
**[systemdspawner](/jupyterhub/systemdspawner)**
Public

* [Notifications](/login?return_to=%2Fjupyterhub%2Fsystemdspawner) You must be signed in to change notification settings
* [Fork
  45](/login?return_to=%2Fjupyterhub%2Fsystemdspawner)
* [Star
   92](/login?return_to=%2Fjupyterhub%2Fsystemdspawner)

* [Code](/jupyterhub/systemdspawner)
* [Issues
  23](/jupyterhub/systemdspawner/issues)
* [Pull requests
  3](/jupyterhub/systemdspawner/pulls)
* [Actions](/jupyterhub/systemdspawner/actions)
* [Projects
  0](/jupyterhub/systemdspawner/projects)
* [Security](/jupyterhub/systemdspawner/security)
* [Insights](/jupyterhub/systemdspawner/pulse)

Additional navigation options

* [Code](/jupyterhub/systemdspawner)
* [Issues](/jupyterhub/systemdspawner/issues)
* [Pull requests](/jupyterhub/systemdspawner/pulls)
* [Actions](/jupyterhub/systemdspawner/actions)
* [Projects](/jupyterhub/systemdspawner/projects)
* [Security](/jupyterhub/systemdspawner/security)
* [Insights](/jupyterhub/systemdspawner/pulse)

## Files

Â main
## Breadcrumbs

1. [systemdspawner](/jupyterhub/systemdspawner/tree/main)
/
# CHANGELOG.md

Copy path Blame  Blame
## Latest commit

## History

[History](/jupyterhub/systemdspawner/commits/main/CHANGELOG.md)170 lines (108 loc) Â· 12 KBÂ main
## Breadcrumbs

1. [systemdspawner](/jupyterhub/systemdspawner/tree/main)
/
# CHANGELOG.md

Top
## File metadata and controls

* Preview
* Code
* Blame

170 lines (108 loc) Â· 12 KB[Raw](https://github.com/jupyterhub/systemdspawner/raw/refs/heads/main/CHANGELOG.md)
# Changelog

## v1.0

### v1.0.2 - 2024-10-20

#### Bugs fixed

* Stop assuming PATH env is defined when extra\_paths is set, and then initialize to os.defpath [#144](https://github.com/jupyterhub/systemdspawner/pull/144) ([@consideRatio](https://github.com/consideRatio), [@minrk](https://github.com/minrk))

#### Continuous integration improvements

* ci: test jupyterhub 5, python 3.12, ubuntu 24.04 [#143](https://github.com/jupyterhub/systemdspawner/pull/143) ([@consideRatio](https://github.com/consideRatio))
* Bump codecov/codecov-action from 3 to 4 [#140](https://github.com/jupyterhub/systemdspawner/pull/140) ([@consideRatio](https://github.com/consideRatio))
* Bump actions/setup-python from 4 to 5 [#139](https://github.com/jupyterhub/systemdspawner/pull/139) ([@consideRatio](https://github.com/consideRatio))
* Bump actions/setup-node from 3 to 4 [#137](https://github.com/jupyterhub/systemdspawner/pull/137) ([@consideRatio](https://github.com/consideRatio))
* Bump actions/checkout from 3 to 4 [#136](https://github.com/jupyterhub/systemdspawner/pull/136) ([@consideRatio](https://github.com/consideRatio))

#### Contributors to this release

The following people contributed discussions, new ideas, code and documentation contributions, and review.
See [our definition of contributors](https://github-activity.readthedocs.io/en/latest/#how-does-this-tool-define-contributions-in-the-reports).

([GitHub contributors page for this release](https://github.com/jupyterhub/systemdspawner/graphs/contributors?from=2023-06-08&to=2024-10-20&type=c))

@consideRatio ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3AconsideRatio+updated%3A2023-06-08..2024-10-20&type=Issues)) | @Frank-Steiner ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3AFrank-Steiner+updated%3A2023-06-08..2024-10-20&type=Issues)) | @manics ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Amanics+updated%3A2023-06-08..2024-10-20&type=Issues)) | @minrk ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Aminrk+updated%3A2023-06-08..2024-10-20&type=Issues)) | @yuvipanda ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Ayuvipanda+updated%3A2023-06-08..2024-10-20&type=Issues))

### v1.0.1 - 2023-06-08

#### Bugs fixed

* ensure executable paths are absolute [#129](https://github.com/jupyterhub/systemdspawner/pull/129) ([@minrk](https://github.com/minrk), [@consideRatio](https://github.com/consideRatio), [@behrmann](https://github.com/behrmann), [@manics](https://github.com/manics))

#### Maintenance and upkeep improvements

* Use warnings.warn instead of self.log.warning to help avoid duplications [#133](https://github.com/jupyterhub/systemdspawner/pull/133) ([@consideRatio](https://github.com/consideRatio), [@minrk](https://github.com/minrk))
* Cache check of systemd version [#132](https://github.com/jupyterhub/systemdspawner/pull/132) ([@consideRatio](https://github.com/consideRatio), [@minrk](https://github.com/minrk))

#### Contributors to this release

The following people contributed discussions, new ideas, code and documentation contributions, and review.
See [our definition of contributors](https://github-activity.readthedocs.io/en/latest/#how-does-this-tool-define-contributions-in-the-reports).

@behrmann ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Abehrmann+updated%3A2023-06-01..2023-06-08&type=Issues)) | @consideRatio ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3AconsideRatio+updated%3A2023-06-01..2023-06-08&type=Issues)) | @manics ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Amanics+updated%3A2023-06-01..2023-06-08&type=Issues)) | @minrk ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Aminrk+updated%3A2023-06-01..2023-06-08&type=Issues))

### v1.0.0 - 2023-06-01

#### Breaking changes

* Systemd v243+ is now required, and v245+ is recommended. Systemd v245 is
  available in for example Ubuntu 20.04+, Debian 11+, and Rocky/CentOS 9+.
* Python 3.8+, JupyterHub 2.3.0+, and Tornado 5.1+ is now required.
* `SystemdSpawner.disable_user_sudo` (influences systemd's `NoNewPrivileges`)
  now defaults to `True`, making the installation more secure by default.

#### Maintenance and upkeep improvements

* Replace deprecated MemoryLimit with MemoryMax, remove fixme notes [#127](https://github.com/jupyterhub/systemdspawner/pull/127) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda), [@behrmann](https://github.com/behrmann))
* Rely on systemd-run's --working-directory, and refactor for readability [#124](https://github.com/jupyterhub/systemdspawner/pull/124) ([@consideRatio](https://github.com/consideRatio), [@behrmann](https://github.com/behrmann), [@minrk](https://github.com/minrk))
* Add MANIFEST.in to bundle LICENSE in source distribution [#122](https://github.com/jupyterhub/systemdspawner/pull/122) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))
* Add basic start/stop test against a jupyterhub [#120](https://github.com/jupyterhub/systemdspawner/pull/120) ([@consideRatio](https://github.com/consideRatio), [@minrk](https://github.com/minrk), [@yuvipanda](https://github.com/yuvipanda))
* refactor: remove no longer needed pytest.mark.asyncio [#119](https://github.com/jupyterhub/systemdspawner/pull/119) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))
* Require systemd v243+, recommend systemd v245+, test against systemd v245 [#117](https://github.com/jupyterhub/systemdspawner/pull/117) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda), [@minrk](https://github.com/minrk))
* Add test and release automation [#115](https://github.com/jupyterhub/systemdspawner/pull/115) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))
* maint, breaking: require python 3.8+, jupyterhub 2.3.0+, tornado 5.1+ [#114](https://github.com/jupyterhub/systemdspawner/pull/114) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))
* Add pre-commit for automated formatting [#108](https://github.com/jupyterhub/systemdspawner/pull/108) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))
* Disable user sudo by default [#91](https://github.com/jupyterhub/systemdspawner/pull/91) ([@yuvipanda](https://github.com/yuvipanda), [@consideRatio](https://github.com/consideRatio))

#### Documentation improvements

* docs: add some explanatory notes in files, and small details [#118](https://github.com/jupyterhub/systemdspawner/pull/118) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))
* readme: add badges for releases/tests/coverage/issues/discourse [#112](https://github.com/jupyterhub/systemdspawner/pull/112) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))
* readme: remove resources section and link to discourse forum instead of mailing list [#111](https://github.com/jupyterhub/systemdspawner/pull/111) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))

#### Continuous integration improvements

* ci: add dependabot to bump future github actions [#113](https://github.com/jupyterhub/systemdspawner/pull/113) ([@consideRatio](https://github.com/consideRatio), [@yuvipanda](https://github.com/yuvipanda))

#### Contributors to this release

The following people contributed discussions, new ideas, code and documentation contributions, and review.
See [our definition of contributors](https://github-activity.readthedocs.io/en/latest/#how-does-this-tool-define-contributions-in-the-reports).

([GitHub contributors page for this release](https://github.com/jupyterhub/systemdspawner/graphs/contributors?from=2023-01-11&to=2023-06-01&type=c))

@astro-arphid ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Aastro-arphid+updated%3A2023-01-11..2023-06-01&type=Issues)) | @behrmann ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Abehrmann+updated%3A2023-01-11..2023-06-01&type=Issues)) | @clhedrick ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Aclhedrick+updated%3A2023-01-11..2023-06-01&type=Issues)) | @consideRatio ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3AconsideRatio+updated%3A2023-01-11..2023-06-01&type=Issues)) | @manics ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Amanics+updated%3A2023-01-11..2023-06-01&type=Issues)) | @minrk ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Aminrk+updated%3A2023-01-11..2023-06-01&type=Issues)) | @yuvipanda ([activity](https://github.com/search?q=repo%3Ajupyterhub%2Fsystemdspawner+involves%3Ayuvipanda+updated%3A2023-01-11..2023-06-01&type=Issues))

## v0.17 - 2023-01-10

* Don't kill whole server when a single process OOMs,
  thanks to [@dragz](https://github.com/dragz) - [PR #101](https://github.com/jupyterhub/systemdspawner/pull/101)

## v0.16 - 2022-04-22

* User variables (like `{USERNAME}`) are expanded in `unit_extra_parameters`,
  thanks to [@tullis](https://github.com/tullis) - [PR #83](https://github.com/jupyterhub/systemdspawner/pull/83)
* Some cleanup of packaging metadata, thanks to [@minrk](https://github.com/minrk) -
  [PR #75](https://github.com/jupyterhub/systemdspawner/pull/75)

## v0.15 - 2020-12-07

Fixes vulnerability [GHSA-cg54-gpgr-4rm6](https://github.com/jupyterhub/systemdspawner/security/advisories/GHSA-cg54-gpgr-4rm6) affecting all previous releases.

* Use EnvironmentFile to pass environment variables to units.

## v0.14 - 2020-07-20

* define entrypoints for JupyterHub spawner configuration
* Fixes for CentOS 7

## v0.13 - 2019-04-28

### Bug Fixes

* Fix `slice` support by making it a configurable option

## v0.12 - 2019-04-17

### New Features

* Allow setting which **Systemd Slice** users' services should belong to.
  This lets admins set policy for all JupyterHub users in one go.
  [Thanks to [@mariusvniekerk](https://github.com/mariusvniekerk)]

### Bug Fixes

* Handle failed units that need reset.
  [thanks to [@RohitK89](https://github.com/RohitK89)]
* Fix bug in cleaning up services from a previously running
  JupyterHub. [thanks to [@minrk](https://github.com/minrk)]

## v0.11 - 2018-07-12

### New Features

* **Username templates** let you map jupyterhub usernames to different system usernames. Extremely
  useful for prefixing usernames to prevent collisions.

### Bug fixes

* Users' home directories now properly read from pwd database, rather than assumed to be under `/home`.
  Thanks to [@cpainterwakefield](https://github.com/cpainterwakefield) for reporting & suggested PR!

## v0.10 - 2018-07-11

### Breaking changes

* `use_sudo` option is no longer supported. It offered questionable security,
  and complicated the code unnecessarily. If 'securely run as normal user with
  sudo' is a required feature, we can re-implement it securely later.
* If a path in `readonly_paths` does not exist, spawning user will now fail.

### New features

* **Dynamic users** support, creating users as required with their own
  persistent homes with systemd's [dynamic users](http://0pointer.net/blog/dynamic-users-with-systemd.html)
  feature. Useful for using with tmpnb.
* **Add additional properties** to the user's systemd unit with `unit_extra_properties`.
  Thanks to [@kfix](https://github.com/kfix) for most of the work!

### Bug fixes

* If a user's notebook server service is already running, kill it before
  attempting to start a new one. [GitHub Issue](https://github.com/jupyterhub/systemdspawner/issues/7)

### Dependency changes

* Python 3.5 is the minimum supported Python version.
* JupyterHub 0.9 is the minimum supported JupyterHub version.
* Tornado 5.0 is the minimum supported Tornado version.

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.


