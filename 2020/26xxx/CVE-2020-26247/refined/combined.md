=== Content from lists.debian.org_c40097e9_20250119_112025.html ===


---

[[Date Prev](msg00006.html)][[Date Next](msg00008.html)]
[[Thread Prev](msg00006.html)][[Thread Next](msg00008.html)]
[[Date Index](maillist.html#00007)]
[[Thread Index](threads.html#00007)]

# [SECURITY] [DLA 2678-1] ruby-nokogiri security update

---

* *To*: debian-lts-announce <debian-lts-announce@lists.debian.org>
* *Subject*: [SECURITY] [DLA 2678-1] ruby-nokogiri security update
* *From*: Markus Koschany <apo@debian.org>
* *Date*: Sun, 06 Jun 2021 21:00:59 +0200
* *Message-id*: <[[üîé]](/msgid-search/18ed1459da8ff11f05ec30af59c05ae8f88ebcb6.camel%40debian.org)¬†[18ed1459da8ff11f05ec30af59c05ae8f88ebcb6.camel@debian.org](msg00007.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-2678-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                      Markus Koschany
June 06, 2021                                 <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : ruby-nokogiri
Version        : 1.6.8.1-1+deb9u1
CVE ID         : CVE-2020-26247
Debian Bug     : 978967

An XXE vulnerability was found in Nokogiri, a Rubygem providing HTML, XML, SAX,
and Reader parsers with XPath and CSS selector support.

XML Schemas parsed by Nokogiri::XML::Schema were trusted by default, allowing
external resources to be accessed over the network, potentially enabling XXE or
SSRF attacks. The new default behavior is to treat all input as untrusted.
The upstream advisory provides further information how to mitigate the problem
or restore the old behavior again.

<https://github.com/sparklemotion/nokogiri/security/advisories/GHSA-vr8q-g5c7-m54m>

For Debian 9 stretch, this problem has been fixed in version
1.6.8.1-1+deb9u1.

We recommend that you upgrade your ruby-nokogiri packages.

For the detailed security status of ruby-nokogiri please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/ruby-nokogiri>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpkNjsXkD5nV.pgp)**

*Description:* This is a digitally signed message part

---



=== Content from github.com_7305ab18_20250119_112023.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Freleases%2Ftag%2Fv1.11.0.rc4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Freleases%2Ftag%2Fv1.11.0.rc4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=sparklemotion%2Fnokogiri)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[sparklemotion](/sparklemotion)
/
**[nokogiri](/sparklemotion/nokogiri)**
Public

* [Notifications](/login?return_to=%2Fsparklemotion%2Fnokogiri) You must be signed in to change notification settings
* [Fork
  905](/login?return_to=%2Fsparklemotion%2Fnokogiri)
* [Star
   6.2k](/login?return_to=%2Fsparklemotion%2Fnokogiri)

* [Code](/sparklemotion/nokogiri/tree/v1.11.0.rc4)
* [Issues
  65](/sparklemotion/nokogiri/issues)
* [Pull requests
  24](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects
  0](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

Additional navigation options

* [Code](/sparklemotion/nokogiri/tree/v1.11.0.rc4)
* [Issues](/sparklemotion/nokogiri/issues)
* [Pull requests](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

1. [Releases](/sparklemotion/nokogiri/releases)
2. [v1.11.0.rc4](/sparklemotion/nokogiri/releases/tag/v1.11.0.rc4)

# v1.11.0.rc4 / 2020-12-29

Pre-release

Pre-release

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/sparklemotion/nokogiri/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v1.11.0.rc4)

 Loading

[View all tags](/sparklemotion/nokogiri/tags)

![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)
[flavorjones](/flavorjones)
released this
29 Dec 16:47

[v1.11.0.rc4](/sparklemotion/nokogiri/tree/v1.11.0.rc4)

[`f7bc31f`](/sparklemotion/nokogiri/commit/f7bc31f8c246c3d6db1cd2b7feee2041630b0778)

This commit was signed with the committer‚Äôs **verified signature**.

[![](https://avatars.githubusercontent.com/u/8207?s=64&v=4)](/flavorjones)
[flavorjones](/flavorjones)
Mike Dalessio

GPG key ID: 59D3039C71577DD7

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

## v1.11.0.rc4 / 2020-12-29

Latest is `v1.11.0.rc4` (2020-12-29). To try out release candidates, use `gem install --prerelease` or `gem install nokogiri -v1.11.0.rc4`

If you're using bundler, try updating your Gemfile with:

```
gem "nokogiri", "~> 1.11.0.rc4"`
```

---

Delta since [v1.11.0.rc3](https://github.com/sparklemotion/nokogiri/releases/tag/v1.11.0.rc3):

### Notes

* Added precompiled native gem support for Darwin (OSX) platform `arm64-darwin`

### Dependencies

#### Ruby

* End of support for Ruby 2.4, for which [official support ended on 2020-04-05](https://www.ruby-lang.org/en/news/2020/04/05/support-of-ruby-2-4-has-ended/)

#### Gems

* Explicitly add racc as a runtime dependency. [[#1988](https://github.com/sparklemotion/nokogiri/issues/1988)] (Thanks, [@voxik](https://github.com/voxik)!)

### Security

See note below about [CVE-2020-26247](https://github.com/advisories/GHSA-vr8q-g5c7-m54m "CVE-2020-26247") in the "Changed" subsection entitled "XML::Schema parsing treats input as untrusted by default".

### Performance

* [CRuby] The CSS `~=` operator and class selector `.` are about 2x faster. [[#2137](https://github.com/sparklemotion/nokogiri/issues/2137), [#2135](https://github.com/sparklemotion/nokogiri/issues/2135)]
* [CRuby] Patch libxml2 to call `strlen` from `xmlStrlen` rather than the naive implementation, because `strlen` is generally optimized for the architecture. [[#2144](https://github.com/sparklemotion/nokogiri/issues/2144)] (Thanks, [@ilyazub](https://github.com/ilyazub)!)
* Always compile libxml2 and libxslt with '-O2' [[#2022](https://github.com/sparklemotion/nokogiri/issues/2022), [#2100](https://github.com/sparklemotion/nokogiri/issues/2100)] (Thanks, [@ilyazub](https://github.com/ilyazub)!)
* [CRuby] `RelaxNG.from_document` no longer leaks memory. [[#2114](https://github.com/sparklemotion/nokogiri/issues/2114)]

### Improved

* [CRuby] Handle incorrectly-closed HTML comments as WHATWG recommends for browsers. [[#2058](https://github.com/sparklemotion/nokogiri/issues/2058)] (Thanks to HackerOne user [mayflower](https://hackerone.com/mayflower?type=user) for reporting this!)
* {HTML,XML}::Document#parse now accept `Pathname` objects. Previously this worked only if the referenced file was less than 4096 bytes long; longer files resulted in undefined behavior because the `read` method would be repeatedly invoked. [[#1821](https://github.com/sparklemotion/nokogiri/issues/1821), [#2110](https://github.com/sparklemotion/nokogiri/issues/2110)] (Thanks, [@doriantaylor](https://github.com/doriantaylor) and [@phokz](https://github.com/phokz)!)
* [CRuby] Nokogumbo builds faster because it can now use header files provided by Nokogiri. [[#1788](https://github.com/sparklemotion/nokogiri/issues/1788)] (Thanks, [@stevecheckoway](https://github.com/stevecheckoway)!)
* [JRuby] Clean up deprecated calls into JRuby. [[#2027](https://github.com/sparklemotion/nokogiri/issues/2027)] (Thanks, [@headius](https://github.com/headius)!)

### Fixed

* HTML Parsing in "strict" mode (i.e., the `RECOVER` parse option not set) now correctly raises a `XML::SyntaxError` exception. Previously the value of the `RECOVER` bit was being ignored by CRuby and was misinterpreted by JRuby. [[#2130](https://github.com/sparklemotion/nokogiri/issues/2130)]
* The CSS `~=` operator now correctly handles non-space whitespace in the `class` attribute. commit [e45dedd](https://github.com/sparklemotion/nokogiri/commit/e45dedd7384708b3d801e4eb224932a7c62aae80)
* The Node methods `add_previous_sibling`, `previous=`, `before`, `add_next_sibling`, `next=`, `after`, `replace`, and `swap` now correctly use their parent as the context node for parsing markup. These methods now also raise a `RuntimeError` if they are called on a node with no parent. [[nokogumbo#160](https://github.com/rubys/nokogumbo/issues/160)]
* [JRuby] XML::Schema XSD validation errors are captured in `XML::Schema#errors`. These errors were previously ignored.
* [JRuby] Fix how custom XPath function namespaces are inferred to be less naive. [[#1890](https://github.com/sparklemotion/nokogiri/issues/1890), [#2148](https://github.com/sparklemotion/nokogiri/issues/2148)]
* [JRuby] Clarify exception message when custom XPath functions can't be resolved.
* [JRuby] Comparison of Node to Document with `Node#<=>` now matches CRuby/libxml2 behavior.
* [CRuby] Syntax errors are now correctly captured in `Document#errors` for short HTML documents. Previously the SAX parser used for encoding detection was clobbering libxml2's global error handler.
* [CRuby] On some platforms, avoid symbol name collision with glibc's `canonicalize`. [[#2105](https://github.com/sparklemotion/nokogiri/issues/2105)]
* [CRuby] Fixed Nokogumbo integration which broke in the v1.11.0 release candidates. [[#1788](https://github.com/sparklemotion/nokogiri/issues/1788)] (Thanks, [@stevecheckoway](https://github.com/stevecheckoway)!)
* [JRuby] Fixed document encoding regression in v1.11.0 release candidates. [[#2080](https://github.com/sparklemotion/nokogiri/issues/2080), [#2083](https://github.com/sparklemotion/nokogiri/issues/2083)] (Thanks, [@thbar](https://github.com/thbar)!)

### Changed

#### `XML::Schema` input is now "untrusted" by default

Address [CVE-2020-26247](https://github.com/sparklemotion/nokogiri/security/advisories/GHSA-vr8q-g5c7-m54m).

In Nokogiri versions <= 1.11.0.rc3, XML Schemas parsed by `Nokogiri::XML::Schema` were **trusted** by default, allowing external resources to be accessed over the network, potentially enabling XXE or SSRF attacks.

This behavior is counter to the security policy intended by Nokogiri maintainers, which is to treat all input as **untrusted** by default whenever possible.

Please note that this security fix was pushed into a new minor version, 1.11.x, rather than a patch release to the 1.10.x branch, because it is a breaking change for some schemas and the risk was assessed to be "Low Severity".

More information and instructions for enabling "trusted input" behavior in v1.11.0.rc4 and later is available at the [public advisory](https://github.com/sparklemotion/nokogiri/security/advisories/GHSA-vr8q-g5c7-m54m).

#### HTML parser now obeys the `strict` or `norecover` parsing option

(Also noted above in the "Fixed" section) HTML Parsing in "strict" mode (i.e., the `RECOVER` parse option not set) now correctly raises a `XML::SyntaxError` exception. Previously the value of the `RECOVER` bit was being ignored by CRuby and was misinterpreted by JRuby.

If you're using the default parser options, you will be unaffected by this fix. If you're passing `strict` or `norecover` to your HTML parser call, you may be surprised to see that the parser now fails to recover and raises a `XML::SyntaxError` exception. Given the number of HTML documents on the internet that libxml2 would consider to be ill-formed, this is probably not what you want, and you can omit setting that parse option to restore the behavior that you have been relying upon.

Apologies to anyone inconvenienced by this breaking bugfix being present in a minor release, but I felt it was appropriate to introduce this fix because it's straightforward to fix any code that has been relying on this buggy behavior.

#### `VersionInfo`, the output of `nokogiri -v`, and related constants

This release changes the metadata provided in `Nokogiri::VersionInfo` which also affects the output of `nokogiri -v`. Some related constants have also been changed. If you're using `VersionInfo` programmatically, or relying on constants related to underlying library versions, please read the detailed changes for `Nokogiri::VersionInfo` at [#2139](https://github.com/sparklemotion/nokogiri/issues/2139) and accept our apologies for the inconvenience.

 Assets
2

 Loading

All reactions

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from security.gentoo.org_58f14e3e_20250119_112027.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Nokogiri: Multiple Vulnerabilities ‚Äî GLSA **202208-29**

Multiple vulnerabilities have been discovered in Nokogiri, the worst of which could result in denial of service.

### Affected packages

| Package | **dev-ruby/nokogiri** on all architectures |
| --- | --- |
| Affected versions | < **1.13.6** |
| Unaffected versions | >= **1.13.6** |

### Background

Nokogiri is an HTML, XML, SAX, and Reader parser.

### Description

Multiple vulnerabilities have been discovered in Nokogiri. Please review the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All Nokogiri users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-ruby/nokogiri-1.13.6"

```
### References

* [CVE-2020-26247](https://nvd.nist.gov/vuln/detail/CVE-2020-26247)
* [CVE-2022-24836](https://nvd.nist.gov/vuln/detail/CVE-2022-24836)
* [CVE-2022-29181](https://nvd.nist.gov/vuln/detail/CVE-2022-29181)

**Release date**

August 14, 2022

**Latest revision**

August 14, 2022: 1

**Severity**

low

**Exploitable**

remote

**Bugzilla entries**

* [846623](https://bugs.gentoo.org/show_bug.cgi?id=846623)
* [837902](https://bugs.gentoo.org/show_bug.cgi?id=837902)
* [762685](https://bugs.gentoo.org/show_bug.cgi?id=762685)

### Questions or comments?

Please feel free to contact us.

**¬© 2001‚Äì2020 Gentoo Foundation, Inc.**



=== Content from github.com_3200c602_20250119_131410.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fpull%2F2083)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fpull%2F2083)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=sparklemotion%2Fnokogiri)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[sparklemotion](/sparklemotion)
/
**[nokogiri](/sparklemotion/nokogiri)**
Public

* [Notifications](/login?return_to=%2Fsparklemotion%2Fnokogiri) You must be signed in to change notification settings
* [Fork
  905](/login?return_to=%2Fsparklemotion%2Fnokogiri)
* [Star
   6.2k](/login?return_to=%2Fsparklemotion%2Fnokogiri)

* [Code](/sparklemotion/nokogiri)
* [Issues
  65](/sparklemotion/nokogiri/issues)
* [Pull requests
  24](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects
  0](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

Additional navigation options

* [Code](/sparklemotion/nokogiri)
* [Issues](/sparklemotion/nokogiri/issues)
* [Pull requests](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fsparklemotion%2Fnokogiri%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fsparklemotion%2Fnokogiri%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fix the tests in #2080 #2083

 Merged

[flavorjones](/flavorjones)
merged 6 commits into
[master](/sparklemotion/nokogiri/tree/master "sparklemotion/nokogiri:master")
from
[repro-iso-jruby](/sparklemotion/nokogiri/tree/repro-iso-jruby "sparklemotion/nokogiri:repro-iso-jruby")

Oct 13, 2020

 Merged

# [Fix the tests in #2080](#top) #2083

[flavorjones](/flavorjones)
merged 6 commits into
[master](/sparklemotion/nokogiri/tree/master "sparklemotion/nokogiri:master")
from
[repro-iso-jruby](/sparklemotion/nokogiri/tree/repro-iso-jruby "sparklemotion/nokogiri:repro-iso-jruby")

Oct 13, 2020

[Conversation
12](/sparklemotion/nokogiri/pull/2083)
[Commits
6](/sparklemotion/nokogiri/pull/2083/commits)
[Checks
0](/sparklemotion/nokogiri/pull/2083/checks)
[Files changed](/sparklemotion/nokogiri/pull/2083/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![jvshahid](https://avatars.githubusercontent.com/u/297621?s=60&v=4)](/jvshahid)

Copy link

Member

### @jvshahid **[jvshahid](/jvshahid)** commented [Sep 15, 2020](#issue-701927953)

This PR introduces three new commits on top of [#2080](https://github.com/sparklemotion/nokogiri/pull/2080)/386ebcb5 in which [@thbar](https://github.com/thbar) adds tests showing a JRuby regression when parsing ISO-8859-1 content.

Sorry, something went wrong.

All reactions

[![@jvshahid](https://avatars.githubusercontent.com/u/297621?s=40&v=4)](/jvshahid)
[jvshahid](/jvshahid)
mentioned this pull request
[Sep 15, 2020](#ref-pullrequest-696083103)

[Issue reproduction for ISO-8859-1 parsing on JRuby
#2080](/sparklemotion/nokogiri/pull/2080)
 Closed

[![@codeclimate](https://avatars.githubusercontent.com/in/9403?s=80&v=4)](/apps/codeclimate)

Copy link

### **[codeclimate](/apps/codeclimate) bot** commented [Sep 15, 2020](#issuecomment-692715095) ‚Ä¢ edited Loading

| Code Climate has analyzed commit [9cf1b35](https://github.com/sparklemotion/nokogiri/commit/9cf1b353f5ed5f5072f7d54117515f566155b6e9) and detected **0 issues** on this pull request.  The test coverage on the diff in this pull request is **100.0%** (**80%** is the threshold).  This pull request will bring the total coverage in the repository to **94.3%**.  View more on [Code Climate](https://codeclimate.com/github/sparklemotion/nokogiri/pull/2083). |
| --- |

All reactions

Sorry, something went wrong.

[![@thbar](https://avatars.githubusercontent.com/u/10141?s=80&u=41c21f0cc2eb57c17dd9533bebad9c4d34bae89d&v=4)](/thbar)

Copy link

Contributor

### **[thbar](/thbar)** commented [Sep 15, 2020](#issuecomment-692735520)

| The fix looks correct based on my client test suite. Nice work!  Linking to [#2080 (comment)](https://github.com/sparklemotion/nokogiri/pull/2080#issuecomment-692734783) for the record. |
| --- |

 üëç
1
 jvshahid reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@AppVeyorBot](https://avatars.githubusercontent.com/u/17834419?s=80&u=b89ed77bc75ed5b8464e6820556fb697572ecbea&v=4)](/AppVeyorBot)

Copy link

### **[AppVeyorBot](/AppVeyorBot)** commented [Sep 15, 2020](#issuecomment-692743762)

| ‚ùå [Build nokogiri 1.0.676 failed](https://ci.appveyor.com/project/flavorjones/nokogiri/builds/35215582) (commit [20d1781d58](https://github.com/sparklemotion/nokogiri/commit/20d1781d58) by [@jvshahid](https://github.com/jvshahid)) |
| --- |

All reactions

Sorry, something went wrong.

[![@jvshahid](https://avatars.githubusercontent.com/u/297621?s=80&v=4)](/jvshahid)

Copy link

Member

Author

### **[jvshahid](/jvshahid)** commented [Sep 16, 2020](#issuecomment-693383890)

| [@flavorjones](https://github.com/flavorjones) Do the above appveyor failures have anything to do with my changes? I don't think they are, but I'm not 100% sure. |
| --- |

All reactions

Sorry, something went wrong.

[![@thbar](https://avatars.githubusercontent.com/u/10141?s=80&u=41c21f0cc2eb57c17dd9533bebad9c4d34bae89d&v=4)](/thbar)

Copy link

Contributor

### **[thbar](/thbar)** commented [Oct 6, 2020](#issuecomment-704350080)

| [@flavorjones](https://github.com/flavorjones) is there any chance we could re-trigger the appveyor build once, to see if this is a transient error? I've looked at the build log, these looks like actual errors, but I'm not 100% sure either. |
| --- |

All reactions

Sorry, something went wrong.

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=80&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)

Copy link

Member

### **[flavorjones](/flavorjones)** commented [Oct 6, 2020](#issuecomment-704403977)

| Just kicked it: <https://ci.appveyor.com/project/flavorjones/nokogiri/builds/35600293> |
| --- |

All reactions

Sorry, something went wrong.

[![@AppVeyorBot](https://avatars.githubusercontent.com/u/17834419?s=80&u=b89ed77bc75ed5b8464e6820556fb697572ecbea&v=4)](/AppVeyorBot)

Copy link

### **[AppVeyorBot](/AppVeyorBot)** commented [Oct 6, 2020](#issuecomment-704407558)

| ‚úÖ [Build nokogiri 1.0.676 completed](https://ci.appveyor.com/project/flavorjones/nokogiri/builds/35600293) (commit [2f71d87920](https://github.com/sparklemotion/nokogiri/commit/2f71d87920) by [@jvshahid](https://github.com/jvshahid)) |
| --- |

All reactions

Sorry, something went wrong.

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)
[flavorjones](/flavorjones)
added
the
[state/pr-will-merge](/sparklemotion/nokogiri/labels/state/pr-will-merge)
label
[Oct 6, 2020](#event-3846897418)

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)
[flavorjones](/flavorjones)
added this to the [v1.11.0](/sparklemotion/nokogiri/milestone/18) milestone
[Oct 6, 2020](#event-3846897832)

[![@thbar](https://avatars.githubusercontent.com/u/10141?s=80&u=41c21f0cc2eb57c17dd9533bebad9c4d34bae89d&v=4)](/thbar)

Copy link

Contributor

### **[thbar](/thbar)** commented [Oct 8, 2020](#issuecomment-705572103)

| Looks good now! |
| --- |

All reactions

Sorry, something went wrong.

[![@ghost](https://avatars.githubusercontent.com/u/10137?s=80&v=4)](/ghost)

### This comment was marked as spam.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fpull%2F2083)

[![@ghost](https://avatars.githubusercontent.com/u/10137?s=80&v=4)](/ghost)

### This comment was marked as spam.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fpull%2F2083)

[![@sparklemotion](https://avatars.githubusercontent.com/u/1851072?s=40&u=eb4f879d8d47b7c9805f5b3f03990f94673d9dd6&v=4)](/sparklemotion)
[sparklemotion](/sparklemotion)
temporarily blocked ghost
[Oct 12, 2020](#event-3867368930)

[flavorjones](/flavorjones)
added a commit
that referenced
this pull request
[Oct 12, 2020](#ref-commit-08a9941)
[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)

`[update CHANGELOG for document encoding fix](/sparklemotion/nokogiri/commit/08a9941e9485aad279026779346ac234e857ff82 "update CHANGELOG for document encoding fix

Related to #2080, #2083")`
‚Ä¶

`[08a9941](/sparklemotion/nokogiri/commit/08a9941e9485aad279026779346ac234e857ff82)`

```
Related to [#2080](https://github.com/sparklemotion/nokogiri/pull/2080), [#2083](https://github.com/sparklemotion/nokogiri/pull/2083)
```

 [thbar](/thbar)
and others
added 5 commits
[October 12, 2020 12:24](#commits-pushed-2f1513b)

[![@thbar](https://avatars.githubusercontent.com/u/10141?s=40&v=4)](/thbar) [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)](/flavorjones)

`[Add fixture for ISO-8859-1 issue reproduction](/sparklemotion/nokogiri/pull/2083/commits/2f1513b197a4d8db88d4aeb8fe96ce95e9c5c7be "Add fixture for ISO-8859-1 issue reproduction")`

`[2f1513b](/sparklemotion/nokogiri/pull/2083/commits/2f1513b197a4d8db88d4aeb8fe96ce95e9c5c7be)`

[![@thbar](https://avatars.githubusercontent.com/u/10141?s=40&v=4)](/thbar) [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)](/flavorjones)

`[Add reproduction for JRuby regression on ISO-8859-1 content](/sparklemotion/nokogiri/pull/2083/commits/1926bf60ed4a785eb890ef594b364e9a5eebe737 "Add reproduction for JRuby regression on ISO-8859-1 content")`

`[1926bf6](/sparklemotion/nokogiri/pull/2083/commits/1926bf60ed4a785eb890ef594b364e9a5eebe737)`

[![@jvshahid](https://avatars.githubusercontent.com/u/297621?s=40&v=4)](/jvshahid) [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)](/flavorjones)

`[Do not use a default encoding when parsing XML documents.](/sparklemotion/nokogiri/pull/2083/commits/d306fc43179d6c1276cfa1bfad1a615c1cb62eda "Do not use a default encoding when parsing XML documents.

This change fixes the tests in #2080, but introduces more errors.  The errors
are mostly unexpected null encoding when parsing an HTML document.")`
 ‚Ä¶

`[d306fc4](/sparklemotion/nokogiri/pull/2083/commits/d306fc43179d6c1276cfa1bfad1a615c1cb62eda)`

```
This change fixes the tests in [#2080](https://github.com/sparklemotion/nokogiri/pull/2080), but introduces more errors.  The errors
are mostly unexpected null encoding when parsing an HTML document.
```

[![@jvshahid](https://avatars.githubusercontent.com/u/297621?s=40&v=4)](/jvshahid) [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)](/flavorjones)

`[Use default encoding, instead of null, when parsing HTML docs.](/sparklemotion/nokogiri/pull/2083/commits/8a602ec81282b2966dcf3c693ee79211b7aa0658 "Use default encoding, instead of null, when parsing HTML docs.

This change reduces the number of errors from 23 to 4.")`
 ‚Ä¶

`[8a602ec](/sparklemotion/nokogiri/pull/2083/commits/8a602ec81282b2966dcf3c693ee79211b7aa0658)`

```
This change reduces the number of errors from 23 to 4.
```

[![@jvshahid](https://avatars.githubusercontent.com/u/297621?s=40&v=4)](/jvshahid) [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)](/flavorjones)

`[Use setStringInputStream instead of setInputStream.](/sparklemotion/nokogiri/pull/2083/commits/763b07125d643059a5477a34af6af5871b3e13c7 "Use setStringInputStream instead of setInputStream.

This is another place where we pass less information to the Java layer that was
missed in ba16682aae2cbd42c196bd8afdfcfe8a5d82fbdb.")`
 ‚Ä¶

`[763b071](/sparklemotion/nokogiri/pull/2083/commits/763b07125d643059a5477a34af6af5871b3e13c7)`

```
This is another place where we pass less information to the Java layer that was
missed in [ba16682](https://github.com/sparklemotion/nokogiri/commit/ba16682aae2cbd42c196bd8afdfcfe8a5d82fbdb).
```

[flavorjones](/flavorjones)
added a commit
that referenced
this pull request
[Oct 12, 2020](#ref-commit-97689e9)
[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)

`[update CHANGELOG for document encoding fix](/sparklemotion/nokogiri/commit/97689e9ddb8d91606d879bd48de3ab9f330839f2 "update CHANGELOG for document encoding fix

Related to #2080, #2083")`
‚Ä¶

`[97689e9](/sparklemotion/nokogiri/commit/97689e9ddb8d91606d879bd48de3ab9f330839f2)`

```
Related to [#2080](https://github.com/sparklemotion/nokogiri/pull/2080), [#2083](https://github.com/sparklemotion/nokogiri/pull/2083)
```

 [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)
[flavorjones](/flavorjones)
[force-pushed](/sparklemotion/nokogiri/compare/08a9941e9485aad279026779346ac234e857ff82..97689e9ddb8d91606d879bd48de3ab9f330839f2)
the
repro-iso-jruby

branch
from
[`08a9941`](/sparklemotion/nokogiri/commit/08a9941e9485aad279026779346ac234e857ff82) to
[`97689e9`](/sparklemotion/nokogiri/commit/97689e9ddb8d91606d879bd48de3ab9f330839f2)  [Compare](/sparklemotion/nokogiri/compare/08a9941e9485aad279026779346ac234e857ff82..97689e9ddb8d91606d879bd48de3ab9f330839f2)
[October 12, 2020 16:26](#event-3867414087)

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=80&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)

Copy link

Member

### **[flavorjones](/flavorjones)** commented [Oct 12, 2020](#issuecomment-707220709)

| Rebased and added CHANGELOG entry |
| --- |

All reactions

Sorry, something went wrong.

[flavorjones](/flavorjones)
added a commit
that referenced
this pull request
[Oct 12, 2020](#ref-commit-8af3640)
[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)

`[update CHANGELOG for document encoding fix](/sparklemotion/nokogiri/commit/8af36402fae442f7927ace448ba87ad630e2ccbf "update CHANGELOG for document encoding fix

Related to #2080, #2083")`
‚Ä¶

`[8af3640](/sparklemotion/nokogiri/commit/8af36402fae442f7927ace448ba87ad630e2ccbf)`

```
Related to [#2080](https://github.com/sparklemotion/nokogiri/pull/2080), [#2083](https://github.com/sparklemotion/nokogiri/pull/2083)
```

 [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)
[flavorjones](/flavorjones)
[force-pushed](/sparklemotion/nokogiri/compare/97689e9ddb8d91606d879bd48de3ab9f330839f2..8af36402fae442f7927ace448ba87ad630e2ccbf)
the
repro-iso-jruby

branch
from
[`97689e9`](/sparklemotion/nokogiri/commit/97689e9ddb8d91606d879bd48de3ab9f330839f2) to
[`8af3640`](/sparklemotion/nokogiri/commit/8af36402fae442f7927ace448ba87ad630e2ccbf)  [Compare](/sparklemotion/nokogiri/compare/97689e9ddb8d91606d879bd48de3ab9f330839f2..8af36402fae442f7927ace448ba87ad630e2ccbf)
[October 12, 2020 16:31](#event-3867433336)

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)](/flavorjones)

`[update CHANGELOG for document encoding fix](/sparklemotion/nokogiri/pull/2083/commits/9cf1b353f5ed5f5072f7d54117515f566155b6e9 "update CHANGELOG for document encoding fix

Related to #2080, #2083")`
 ‚Ä¶

`[9cf1b35](/sparklemotion/nokogiri/pull/2083/commits/9cf1b353f5ed5f5072f7d54117515f566155b6e9)`

```
Related to [#2080](https://github.com/sparklemotion/nokogiri/pull/2080), [#2083](https://github.com/sparklemotion/nokogiri/pull/2083)
```

 [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)
[flavorjones](/flavorjones)
[force-pushed](/sparklemotion/nokogiri/compare/8af36402fae442f7927ace448ba87ad630e2ccbf..9cf1b353f5ed5f5072f7d54117515f566155b6e9)
the
repro-iso-jruby

branch
from
[`8af3640`](/sparklemotion/nokogiri/commit/8af36402fae442f7927ace448ba87ad630e2ccbf) to
[`9cf1b35`](/sparklemotion/nokogiri/commit/9cf1b353f5ed5f5072f7d54117515f566155b6e9)  [Compare](/sparklemotion/nokogiri/compare/8af36402fae442f7927ace448ba87ad630e2ccbf..9cf1b353f5ed5f5072f7d54117515f566155b6e9)
[October 12, 2020 16:31](#event-3867434584)

[![@AppVeyorBot](https://avatars.githubusercontent.com/u/17834419?s=80&u=b89ed77bc75ed5b8464e6820556fb697572ecbea&v=4)](/AppVeyorBot)

Copy link

### **[AppVeyorBot](/AppVeyorBot)** commented [Oct 12, 2020](#issuecomment-707248820)

| ‚úÖ [Build nokogiri 1.0.700 completed](https://ci.appveyor.com/project/flavorjones/nokogiri/builds/35706237) (commit [abc79770ba](https://github.com/sparklemotion/nokogiri/commit/abc79770ba) by [@flavorjones](https://github.com/flavorjones)) |
| --- |

All reactions

Sorry, something went wrong.

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)
[flavorjones](/flavorjones)
merged commit [`d27cb96`](/sparklemotion/nokogiri/commit/d27cb965d40b20c987d84a7db4c1f9fb508acdc3)
into
master

[Oct 13, 2020](https://github.com/sparklemotion/nokogiri/pull/2083#event-3870953928)

 [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)
[flavorjones](/flavorjones)
deleted the
repro-iso-jruby

branch
[October 13, 2020 12:14](#event-3870954619)

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&u=b696c885624fac0e15405b8713a770e888f26a96&v=4)](/flavorjones)
[flavorjones](/flavorjones)
removed
the
[state/pr-will-merge](/sparklemotion/nokogiri/labels/state/pr-will-merge)
label
[Oct 13, 2020](#event-3870955609)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fpull%2F2083)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

 [**v1.11.0**](/sparklemotion/nokogiri/milestone/18 "v1.11.0")

Development

Successfully merging this pull request may close these issues.

4 participants

[![@jvshahid](https://avatars.githubusercontent.com/u/297621?s=52&v=4)](/jvshahid) [![@thbar](https://avatars.githubusercontent.com/u/10141?s=52&v=4)](/thbar) [![@AppVeyorBot](https://avatars.githubusercontent.com/u/17834419?s=52&v=4)](/AppVeyorBot) [![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=52&v=4)](/flavorjones)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_d704cf19_20250119_131405.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvoxik)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvoxik)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

![@voxik](https://avatars.githubusercontent.com/u/14406?s=64&v=4)

**voxik**
[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fvoxik)

[Overview](/voxik)
[Repositories
238](/voxik?tab=repositories)
[Projects
0](/voxik?tab=projects)
[Packages
0](/voxik?tab=packages)
[Stars
37](/voxik?tab=stars)

More

* [Overview](/voxik)
* [Repositories](/voxik?tab=repositories)
* [Projects](/voxik?tab=projects)
* [Packages](/voxik?tab=packages)
* [Stars](/voxik?tab=stars)

![@voxik](https://avatars.githubusercontent.com/u/14406?s=64&v=4)

**voxik**

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fvoxik)

[![View voxik's full-sized avatar](https://avatars.githubusercontent.com/u/14406?v=4)](https://avatars.githubusercontent.com/u/14406?v=4)

# V√≠t Ondruch voxik

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fvoxik)

[30
followers](https://github.com/voxik?tab=followers) ¬∑ [2
following](https://github.com/voxik?tab=following)

* Czech Republic

## [Achievements](/voxik?tab=achievements)

[![Achievement: Pair Extraordinaire](https://github.githubassets.com/assets/pair-extraordinaire-default-579438a20e01.png)x2](/voxik?achievement=pair-extraordinaire&tab=achievements)[![Achievement: Quickdraw](https://github.githubassets.com/assets/quickdraw-default-39c6aec8ff89.png)](/voxik?achievement=quickdraw&tab=achievements)[![Achievement: Arctic Code Vault Contributor](https://github.githubassets.com/assets/arctic-code-vault-contributor-default-df8d74122a06.png)](/voxik?achievement=arctic-code-vault-contributor&tab=achievements)[![Achievement: Pull Shark](https://github.githubassets.com/assets/pull-shark-default-498c279a747d.png)x3](/voxik?achievement=pull-shark&tab=achievements)
## [Achievements](/voxik?tab=achievements)

[![Achievement: Pair Extraordinaire](https://github.githubassets.com/assets/pair-extraordinaire-default-579438a20e01.png)x2](/voxik?achievement=pair-extraordinaire&tab=achievements)[![Achievement: Quickdraw](https://github.githubassets.com/assets/quickdraw-default-39c6aec8ff89.png)](/voxik?achievement=quickdraw&tab=achievements)[![Achievement: Arctic Code Vault Contributor](https://github.githubassets.com/assets/arctic-code-vault-contributor-default-df8d74122a06.png)](/voxik?achievement=arctic-code-vault-contributor&tab=achievements)[![Achievement: Pull Shark](https://github.githubassets.com/assets/pull-shark-default-498c279a747d.png)x3](/voxik?achievement=pull-shark&tab=achievements)
## Organizations

[![@fedora-ruby](https://avatars.githubusercontent.com/u/7008810?s=64&v=4)](/fedora-ruby)

Block or Report

# Block or report voxik

**Block user**

Prevent this user from interacting with your repositories and sending you notifications.
Learn more about [blocking users](https://docs.github.com/articles/blocking-a-user-from-your-personal-account).

You must be logged in to block users.

Add an optional note:

Please don't include any personal information such as legal names or email addresses. Maximum 100 characters, markdown supported. This note will be visible to only you.

Block user

**Report abuse**

Contact GitHub support about this user‚Äôs behavior.
Learn more about [reporting abuse](https://docs.github.com/articles/reporting-abuse-or-spam).

[Report abuse](/contact/report-abuse?report=voxik+%28user%29)

[Overview](/voxik)
[Repositories
238](/voxik?tab=repositories)
[Projects
0](/voxik?tab=projects)
[Packages
0](/voxik?tab=packages)
[Stars
37](/voxik?tab=stars)

More

* [Overview](/voxik)
* [Repositories](/voxik?tab=repositories)
* [Projects](/voxik?tab=projects)
* [Packages](/voxik?tab=packages)
* [Stars](/voxik?tab=stars)

## Popular repositories Loading

1. [gem-nice-install](/voxik/gem-nice-install) gem-nice-install
   Public

   A RubyGems plugin that improves gem installation user experience.

   Ruby

   [10](/voxik/gem-nice-install/stargazers)
   [5](/voxik/gem-nice-install/forks)
2. [ruby.spec](/voxik/ruby.spec) ruby.spec
   Public

   ruby.spes file for Fedora 17

   Ruby

   [5](/voxik/ruby.spec/stargazers)
3. [abrt-ruby](/voxik/abrt-ruby) abrt-ruby
   Public

   Provides ABRT reporting support for applications written using Ruby.

   Ruby

   [4](/voxik/abrt-ruby/stargazers)
   [6](/voxik/abrt-ruby/forks)
4. [webrobots](/voxik/webrobots) webrobots
   Public

   Forked from [knu/webrobots](/knu/webrobots)

   A Ruby library to help write robots.txt compliant web robots

   Ruby

   [2](/voxik/webrobots/stargazers)
5. [rubyspec](/voxik/rubyspec) rubyspec
   Public

   Forked from [ruby/spec](/ruby/spec)

   Executable specification for the Ruby programming language using RSpec syntax.

   Ruby

   [1](/voxik/rubyspec/stargazers)
   [1](/voxik/rubyspec/forks)
6. [sunspot](/voxik/sunspot) sunspot
   Public

   Forked from [sunspot/sunspot](/sunspot/sunspot)

   Solr-powered search for Ruby objects

   Ruby

   [1](/voxik/sunspot/stargazers)
   [1](/voxik/sunspot/forks)

Something went wrong, please refresh the page to try again.

If the problem persists, check the [GitHub status page](https://www.githubstatus.com/)
or [contact support](/contact).

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from rubygems.org_b7d3efee_20250119_112026.html ===


[‚¨¢
RubyGems](/ "RubyGems") Navigation menu

Search Gems‚Ä¶

[Releases](https://rubygems.org/releases)
[Blog](https://blog.rubygems.org)
[Gems](/gems)
[Guides](https://guides.rubygems.org)
[Sign in](/sign_in)
[Sign up](/sign_up)

# [nokogiri](/gems/nokogiri) *1.18.1*

Nokogiri (Èã∏) makes it easy and painless to work with XML and HTML from Ruby. It provides a
sensible, easy-to-understand API for reading, writing, modifying, and querying documents. It is
fast and standards-compliant by relying on native parsers like libxml2, libgumbo, or xerces.

## Gemfile: =

## install: =

### Versions:

1. [1.18.1](/gems/nokogiri/versions/1.18.1-x86_64-linux-musl)
   December 29, 2024
   x86\_64-linux-musl
   (3.87 MB)
2. [1.18.1](/gems/nokogiri/versions/1.18.1-x86_64-linux-gnu)
   December 29, 2024
   x86\_64-linux-gnu
   (3.89 MB)
3. [1.18.1](/gems/nokogiri/versions/1.18.1-x86_64-darwin)
   December 29, 2024
   x86\_64-darwin
   (6.4 MB)
4. [1.18.1](/gems/nokogiri/versions/1.18.1-x64-mingw-ucrt)
   December 29, 2024
   x64-mingw-ucrt
   (6.03 MB)
5. [1.18.1](/gems/nokogiri/versions/1.18.1-java)
   December 29, 2024
   java
   (9.88 MB)

[Show all versions (1034 total)](https://rubygems.org/gems/nokogiri/versions)

### Runtime Dependencies (2):

[**mini\_portile2**](/gems/mini_portile2)
~> 2.8.2

[**racc**](/gems/racc)
~> 1.4

[Show all transitive dependencies](/gems/nokogiri/versions/1.18.1/dependencies)

### Owners:

[![](/users/207/avatar.jpeg?size=48&theme=light)](/profiles/tenderlove "tenderlove")[![](/users/1888/avatar.jpeg?size=48&theme=light)](/profiles/knu "knu")[![](/users/2583/avatar.jpeg?size=48&theme=light)](/profiles/flavorjones "flavorjones")
### Pushed by:

[![](/users/2583/avatar.jpeg?size=48&theme=light)](/profiles/flavorjones "flavorjones")
### Authors:

* Mike Dalessio, Aaron Patterson, Yoko Harada, Akinori MUSHA, John Shahid, Karol Bucek, Sam Ruby, Craig Barnes, Stephen Checkoway, Lars Kanis, Sergio Arbeo, Timothy Elliott, Nobuyoshi Nakada

### SHA 256 checksum:

=

[‚Üê Previous version](/gems/nokogiri/versions/1.18.0)

## Total downloads 899,867,991

## For this version 206,611

## Version Released: December 29, 2024 10:30pm

## License: MIT

## Required Ruby Version: *>= 3.1.0*

## New versions require MFA: true

## Version published with MFA: true

### Links:

[Homepage](https://nokogiri.org)
[Changelog](https://nokogiri.org/CHANGELOG.html)
[Source Code](https://github.com/sparklemotion/nokogiri)
[Documentation](https://nokogiri.org/rdoc/index.html)
[Bug Tracker](https://github.com/sparklemotion/nokogiri/issues)
[Download](/downloads/nokogiri-1.18.1.gem)
[Review changes](https://my.diffend.io/gems/nokogiri/prev/1.18.1)
[Badge](https://badge.fury.io/rb/nokogiri/install)
[Subscribe](/sign_in)
[RSS](/gems/nokogiri/versions.atom)
Report abuse
[Reverse dependencies](/gems/nokogiri/reverse_dependencies)

[Status](https://status.rubygems.org)
[Uptime](https://uptime.rubygems.org)
[Code](https://github.com/rubygems/rubygems.org)
[Data](/pages/data)
[Discuss](https://groups.google.com/group/rubygems-org)
[Stats](/stats)
[Contribute](https://guides.rubygems.org/contributing/)
[About](/pages/about)
Help
[API](https://guides.rubygems.org/rubygems-org-api)
[Security](/pages/security)

RubyGems.org is the Ruby community‚Äôs gem hosting service. Instantly [publish your gems](https://guides.rubygems.org/publishing/) and then [install them](https://guides.rubygems.org/command-reference/#gem-install). Use [the API](https://guides.rubygems.org/rubygems-org-api/) to find out more about [available gems](/gems). [Become a contributor](https://guides.rubygems.org/contributing/) and improve the site yourself.

RubyGems.org is made possible through a partnership with the greater Ruby community. [Fastly](https://www.fastly.com/) provides bandwidth and CDN support, [Ruby Central](https://www.rubycentral.org/) covers infrastructure costs, and funds ongoing development and ops work. [Learn more about our sponsors and how they work together](/pages/sponsors).

We need your help to fund the developer time that keeps RubyGems.org running smoothly for everyone. [Join Ruby Central today](https://rubycentral.org/#/portal/signup).

[Supported by
Ruby Central](https://rubycentral.org/)
[Designed by
DockYard](https://dockyard.com/ruby-on-rails-consulting)
[Resolved with
DNSimple](https://dnsimple.link/resolving-rubygems)
[Monitored by
Datadog](https://www.datadoghq.com/)
[Gems served by
Fastly](https://www.fastly.com/)
[Monitored by
Honeybadger](https://www.honeybadger.io/)
[Verified by
Domainr](https://domainr.com/)
[Secured by
Whitesource](https://mend.io/)

[English](/gems/nokogiri?locale=en)

[Nederlands](/gems/nokogiri?locale=nl)

[ÁÆÄ‰Ωì‰∏≠Êñá](/gems/nokogiri?locale=zh-CN)

[Ê≠£È´î‰∏≠Êñá](/gems/nokogiri?locale=zh-TW)

[Portugu√™s do Brasil](/gems/nokogiri?locale=pt-BR)

[Fran√ßais](/gems/nokogiri?locale=fr)

[Espa√±ol](/gems/nokogiri?locale=es)

[Deutsch](/gems/nokogiri?locale=de)

[Êó•Êú¨Ë™û](/gems/nokogiri?locale=ja)



=== Content from github.com_42009ff2_20250119_131407.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fthbar)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fthbar)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

![@thbar](https://avatars.githubusercontent.com/u/10141?s=64&v=4)

**thbar**
[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fthbar)

[Overview](/thbar)
[Repositories
385](/thbar?tab=repositories)
[Projects
0](/thbar?tab=projects)
[Packages
0](/thbar?tab=packages)
[Stars
838](/thbar?tab=stars)
[Sponsoring
0](/thbar?tab=sponsoring)

More

* [Overview](/thbar)
* [Repositories](/thbar?tab=repositories)
* [Projects](/thbar?tab=projects)
* [Packages](/thbar?tab=packages)
* [Stars](/thbar?tab=stars)
* [Sponsoring](/thbar?tab=sponsoring)

![@thbar](https://avatars.githubusercontent.com/u/10141?s=64&v=4)

**thbar**

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fthbar)

[![View thbar's full-sized avatar](https://avatars.githubusercontent.com/u/10141?v=4)](https://avatars.githubusercontent.com/u/10141?v=4)

# Thibaut Barr√®re thbar

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fthbar)

 [Sponsor](/sponsors/thbar)

Data engineer, full-stack Ruby/Rails/Elixir/Javascript dev, SaaS product builder. Author of http://kiba-etl.org
[287
followers](https://github.com/thbar?tab=followers) ¬∑ [27
following](https://github.com/thbar?tab=following)

* LoGeek (ETL, data processing, SaaS products, RubyOnRails, Elixir)
* Saintes, France
* <https://www.kiba-etl.org>

## [Achievements](/thbar?tab=achievements)

[![Achievement: Public Sponsor](https://github.githubassets.com/assets/public-sponsor-default-9fa68986b057.png)](/thbar?achievement=public-sponsor&tab=achievements)[![Achievement: Pair Extraordinaire](https://github.githubassets.com/assets/pair-extraordinaire-default-579438a20e01.png)x3](/thbar?achievement=pair-extraordinaire&tab=achievements)[![Achievement: YOLO](https://github.githubassets.com/assets/yolo-default-be0bbff04951.png)](/thbar?achievement=yolo&tab=achievements)[![Achievement: Quickdraw](https://github.githubassets.com/assets/quickdraw-default-39c6aec8ff89.png)](/thbar?achievement=quickdraw&tab=achievements)[![Achievement: Arctic Code Vault Contributor](https://github.githubassets.com/assets/arctic-code-vault-contributor-default-df8d74122a06.png)](/thbar?achievement=arctic-code-vault-contributor&tab=achievements)[![Achievement: Pull Shark](https://github.githubassets.com/assets/pull-shark-default-498c279a747d.png)x4](/thbar?achievement=pull-shark&tab=achievements)[![Achievement: Starstruck](https://github.githubassets.com/assets/starstruck-default-b6610abad518.png)x3](/thbar?achievement=starstruck&tab=achievements)
## [Achievements](/thbar?tab=achievements)

[![Achievement: Public Sponsor](https://github.githubassets.com/assets/public-sponsor-default-9fa68986b057.png)](/thbar?achievement=public-sponsor&tab=achievements)[![Achievement: Pair Extraordinaire](https://github.githubassets.com/assets/pair-extraordinaire-default-579438a20e01.png)x3](/thbar?achievement=pair-extraordinaire&tab=achievements)[![Achievement: YOLO](https://github.githubassets.com/assets/yolo-default-be0bbff04951.png)](/thbar?achievement=yolo&tab=achievements)[![Achievement: Quickdraw](https://github.githubassets.com/assets/quickdraw-default-39c6aec8ff89.png)](/thbar?achievement=quickdraw&tab=achievements)[![Achievement: Arctic Code Vault Contributor](https://github.githubassets.com/assets/arctic-code-vault-contributor-default-df8d74122a06.png)](/thbar?achievement=arctic-code-vault-contributor&tab=achievements)[![Achievement: Pull Shark](https://github.githubassets.com/assets/pull-shark-default-498c279a747d.png)x4](/thbar?achievement=pull-shark&tab=achievements)[![Achievement: Starstruck](https://github.githubassets.com/assets/starstruck-default-b6610abad518.png)x3](/thbar?achievement=starstruck&tab=achievements)
## Organizations

[![@activewarehouse](https://avatars.githubusercontent.com/u/832139?s=64&v=4)](/activewarehouse)

Block or Report

# Block or report thbar

**Block user**

Prevent this user from interacting with your repositories and sending you notifications.
Learn more about [blocking users](https://docs.github.com/articles/blocking-a-user-from-your-personal-account).

You must be logged in to block users.

Add an optional note:

Please don't include any personal information such as legal names or email addresses. Maximum 100 characters, markdown supported. This note will be visible to only you.

Block user

**Report abuse**

Contact GitHub support about this user‚Äôs behavior.
Learn more about [reporting abuse](https://docs.github.com/articles/reporting-abuse-or-spam).

[Report abuse](/contact/report-abuse?report=thbar+%28user%29)

[Overview](/thbar)
[Repositories
385](/thbar?tab=repositories)
[Projects
0](/thbar?tab=projects)
[Packages
0](/thbar?tab=packages)
[Stars
838](/thbar?tab=stars)
[Sponsoring
0](/thbar?tab=sponsoring)

More

* [Overview](/thbar)
* [Repositories](/thbar?tab=repositories)
* [Projects](/thbar?tab=projects)
* [Packages](/thbar?tab=packages)
* [Stars](/thbar?tab=stars)
* [Sponsoring](/thbar?tab=sponsoring)

## Pinned Loading

1. [etalab/transport-site](/etalab/transport-site) etalab/transport-site Public

   Rendre disponible, valoriser et am√©liorer les donn√©es transports

   Elixir

   [205](/etalab/transport-site/stargazers)
   [31](/etalab/transport-site/forks)
2. [kiba](/thbar/kiba) kiba Public

   Data processing & ETL framework for Ruby

   Ruby

   [1.8k](/thbar/kiba/stargazers)
   [87](/thbar/kiba/forks)
3. [kiba-common](/thbar/kiba-common) kiba-common Public

   Commonly used components for Kiba ETL

   Ruby

   [37](/thbar/kiba-common/stargazers)
   [6](/thbar/kiba-common/forks)
4. [elixir-playground](/thbar/elixir-playground) elixir-playground Public

   A little repo to play around with elixir

   Elixir

   [18](/thbar/elixir-playground/stargazers)
5. [demo-elixir-reloading-music](/thbar/demo-elixir-reloading-music) demo-elixir-reloading-music Public

   Demonstrating Elixir code reloading ability (with music events generation)

   Elixir

   [54](/thbar/demo-elixir-reloading-music/stargazers)
   [1](/thbar/demo-elixir-reloading-music/forks)
6. [opaz-plugdk](/thbar/opaz-plugdk) opaz-plugdk Public

   Implement your VST plugins with JRuby, Mirah, Java and JavaFX

   Ruby

   [71](/thbar/opaz-plugdk/stargazers)
   [9](/thbar/opaz-plugdk/forks)

Something went wrong, please refresh the page to try again.

If the problem persists, check the [GitHub status page](https://www.githubstatus.com/)
or [contact support](/contact).

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_3ca8146e_20250119_131407.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fissues%2F1988)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fissues%2F1988)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=sparklemotion%2Fnokogiri)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[sparklemotion](/sparklemotion)
/
**[nokogiri](/sparklemotion/nokogiri)**
Public

* [Notifications](/login?return_to=%2Fsparklemotion%2Fnokogiri) You must be signed in to change notification settings
* [Fork
  905](/login?return_to=%2Fsparklemotion%2Fnokogiri)
* [Star
   6.2k](/login?return_to=%2Fsparklemotion%2Fnokogiri)

* [Code](/sparklemotion/nokogiri)
* [Issues
  65](/sparklemotion/nokogiri/issues)
* [Pull requests
  24](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects
  0](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

Additional navigation options

* [Code](/sparklemotion/nokogiri)
* [Issues](/sparklemotion/nokogiri/issues)
* [Pull requests](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

# Explicit dependency on Racc¬†#1988

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#2104](https://github.com/sparklemotion/nokogiri/pull/2104)Closed[Explicit dependency on Racc](#top)#1988[#2104](https://github.com/sparklemotion/nokogiri/pull/2104)Copy linkMilestone[v1.11.0](https://github.com/sparklemotion/nokogiri/milestone/18)![@voxik](https://avatars.githubusercontent.com/u/14406?v=4&size=80)
## Description

![@voxik](https://avatars.githubusercontent.com/u/14406?v=4&size=48)[voxik](https://github.com/voxik)opened [on Feb 4, 2020](https://github.com/sparklemotion/nokogiri/issues/1988#issue-559638751)

Since Nokogiri depends on Racc in runtime, it would be nice if the dependency was explicitly specified. I know that Racc is part of Ruby StdLib as default gem, OTOH one day Racc will release incompatible version and Nokogiri won't be usable with certain older versions of Ruby without older gemified version of Racc.

## Metadata

### Assignees

No one assigned

### Labels

No labelsNo labels
### Type

No type
### Projects

No projects
### Milestone

* [v1.11.0](https://github.com/sparklemotion/nokogiri/milestone/18)
### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from avatars.githubusercontent.com_554d3bbe_20250119_131410.html ===
ÔøΩPNG

   
IHDR  ÔøΩ  ÔøΩ   ÔøΩ.ÔøΩb  ÔøΩIDATxÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ0 FÔøΩlpÔøΩÔøΩÔøΩBÔøΩ=ÔøΩ]BÔøΩGÔøΩzÔøΩ◊Ä~zÔøΩÔøΩu]ÔøΩ vÔøΩ{ÔøΩ ÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH8ÔøΩÔøΩ4ÔøΩœ¥ÔøΩÔøΩÔøΩÔøΩÔøΩS|ÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩ<ÔøΩxÔøΩWOÔøΩÔøΩ8?ÔøΩ'ÔøΩÔøΩÔøΩÕóÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩ<ÔøΩ8?ÔøΩ'ÔøΩÔøΩo\_ÔøΩuÔøΩÔøΩÔøΩT[ÔøΩÔøΩÔøΩzÔøΩÔøΩp'wÔøΩ\_~cÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; ÔøΩvÔøΩ8?ÔøΩŒÇÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ=ÔøΩyÔøΩÔøΩ“úKÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩJ7ÔøΩÔøΩX AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH8VxÔøΩq~VOÔøΩÔøΩxÔøΩWOÔøΩÔøΩ~ƒèÕãÔøΩfÔøΩÔøΩCbÔøΩÔøΩÔøΩÔøΩ~cÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÔøΩÔøΩÔøΩH; AÏÄÑÔøΩÔøΩVo ÔøΩÔøΩ|ÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ b$ÔøΩÔøΩ v@ÔøΩÔøΩ   ÔøΩÔøΩVÔøΩ0…Ål\ÔøΩ    IENDÔøΩB`ÔøΩ

=== Content from github.com_ba2191a7_20250119_112022.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fcommit%2F9c87439d9afa14a365ff13e73adc809cb2c3d97b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fcommit%2F9c87439d9afa14a365ff13e73adc809cb2c3d97b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=sparklemotion%2Fnokogiri)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[sparklemotion](/sparklemotion)
/
**[nokogiri](/sparklemotion/nokogiri)**
Public

* [Notifications](/login?return_to=%2Fsparklemotion%2Fnokogiri) You must be signed in to change notification settings
* [Fork
  905](/login?return_to=%2Fsparklemotion%2Fnokogiri)
* [Star
   6.2k](/login?return_to=%2Fsparklemotion%2Fnokogiri)

* [Code](/sparklemotion/nokogiri)
* [Issues
  65](/sparklemotion/nokogiri/issues)
* [Pull requests
  24](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects
  0](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

Additional navigation options

* [Code](/sparklemotion/nokogiri)
* [Issues](/sparklemotion/nokogiri/issues)
* [Pull requests](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

## Commit

[Permalink](/sparklemotion/nokogiri/commit/9c87439d9afa14a365ff13e73adc809cb2c3d97b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

feat: XML::Schema and RelaxNG creation accept optional ParseOptions

[Browse files](/sparklemotion/nokogiri/tree/9c87439d9afa14a365ff13e73adc809cb2c3d97b)
Browse the repository at this point in the history

```
I'm trying out a new pattern, which is that the parsed object carries
around the ParseOptions it was created with, which should make some
testing a bit easier.

I'm also not implementing the "config block" pattern in use for
Documents, because I think the UX is weird and I'm hoping to change
everything to use kwargs in a 2.0 release, anyway.
```

* Loading branch information

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)](/flavorjones)

[flavorjones](/sparklemotion/nokogiri/commits?author=flavorjones "View all commits by flavorjones")
committed
Dec 3, 2020

1 parent
[025e891](/sparklemotion/nokogiri/commit/025e8911f7a606bdce396c52ded5ab0dc20271b4)

commit 9c87439

 Show file tree

 Hide file tree

Showing
**9 changed files**
with
**182 additions**
and
**44 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* ext

  + java/nokogiri

    - ext/java/nokogiri/XmlRelaxng.java
      [XmlRelaxng.java](#diff-82362eef6d8d027cb90cf255d02be177d6c3965dc07049dd53f23befa0b6e8d1)
    - ext/java/nokogiri/XmlSchema.java
      [XmlSchema.java](#diff-3c7c7313bbc63c8175748ac98d30613901b6f5be59afbc73945ca8fd279242e6)
  + nokogiri

    - ext/nokogiri/xml\_relax\_ng.c
      [xml\_relax\_ng.c](#diff-ea60812b4c1e566d7b44b6bdfe70a7224ff9c938cf0e50d102ceca7253bab7fc)
    - ext/nokogiri/xml\_schema.c
      [xml\_schema.c](#diff-6552076c700dcdc8081f13e47f6788ef3d72b9decce84c9d0e0f325bff3d8cee)
* lib/nokogiri/xml

  + lib/nokogiri/xml/parse\_options.rb
    [parse\_options.rb](#diff-769609b60d1ecc30bd6c18200da2846120532020ed5f4e6e741a0042c3bcf4f9)
  + lib/nokogiri/xml/relax\_ng.rb
    [relax\_ng.rb](#diff-7ad1f4590bbcdbc76139192190f62824a1f111e6c1c471505a96198200732ed5)
  + lib/nokogiri/xml/schema.rb
    [schema.rb](#diff-0f89c005f8c338bf26cf9dd23f1e6d0cf91e56ed33bda3c8522da0e6209bd74a)
* test/xml

  + test/xml/test\_relax\_ng.rb
    [test\_relax\_ng.rb](#diff-93d2df9b811d51c2ac95abb32f0cc121e105ef34900128ddbc878c67b7f655bb)
  + test/xml/test\_schema.rb
    [test\_schema.rb](#diff-2821f8c537c5e6815621e9a13b1200715c2bdfc243d620c195b3a94aa282cb96)

## There are no files selected for viewing

11 changes: 9 additions & 2 deletions

11
[ext/java/nokogiri/XmlRelaxng.java](#diff-82362eef6d8d027cb90cf255d02be177d6c3965dc07049dd53f23befa0b6e8d1 "ext/java/nokogiri/XmlRelaxng.java")

Show comments

[View file](/sparklemotion/nokogiri/blob/9c87439d9afa14a365ff13e73adc809cb2c3d97b/ext/java/nokogiri/XmlRelaxng.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -56,6 +56,7 @@ |
|  |  | import org.jruby.RubyClass; |
|  |  | import org.jruby.anno.JRubyClass; |
|  |  | import org.jruby.runtime.ThreadContext; |
|  |  | import org.jruby.runtime.builtin.IRubyObject; |
|  |  | import org.w3c.dom.Document; |
|  |  | import org.xml.sax.ErrorHandler; |
|  |  | import org.xml.sax.SAXException; |
| Expand All | | @@ -78,11 +79,17 @@ private void setVerifier(Verifier verifier) { |
|  |  | this.verifier = verifier; |
|  |  | } |
|  |  |  |
|  |  | static XmlSchema createSchemaInstance(ThreadContext context, RubyClass klazz, Source source) { |
|  |  | static XmlSchema createSchemaInstance(ThreadContext context, RubyClass klazz, Source source, IRubyObject parseOptions) { |
|  |  | Ruby runtime = context.getRuntime(); |
|  |  | XmlRelaxng xmlRelaxng = (XmlRelaxng) NokogiriService.XML\_RELAXNG\_ALLOCATOR.allocate(runtime, klazz); |
|  |  |  |
|  |  | if (parseOptions == null) { |
|  |  | parseOptions = defaultParseOptions(context.getRuntime()); |
|  |  | } |
|  |  |  |
|  |  | xmlRelaxng.setInstanceVariable("@errors", runtime.newEmptyArray()); |
|  |  |  |
|  |  | xmlRelaxng.setInstanceVariable("@parse\_options", parseOptions); |
|  |  |  |
|  |  | try { |
|  |  | Schema schema = xmlRelaxng.getSchema(source, context); |
|  |  | xmlRelaxng.setVerifier(schema.newVerifier()); |
| Expand Down | |  |

47 changes: 34 additions & 13 deletions

47
[ext/java/nokogiri/XmlSchema.java](#diff-3c7c7313bbc63c8175748ac98d30613901b6f5be59afbc73945ca8fd279242e6 "ext/java/nokogiri/XmlSchema.java")

Show comments

[View file](/sparklemotion/nokogiri/blob/9c87439d9afa14a365ff13e73adc809cb2c3d97b/ext/java/nokogiri/XmlSchema.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -106,10 +106,16 @@ private void setValidator(Validator validator) { |
|  |  | this.validator = validator; |
|  |  | } |
|  |  |  |
|  |  | static XmlSchema createSchemaInstance(ThreadContext context, RubyClass klazz, Source source) { |
|  |  | static XmlSchema createSchemaInstance(ThreadContext context, RubyClass klazz, Source source, IRubyObject parseOptions) { |
|  |  | Ruby runtime = context.getRuntime(); |
|  |  | XmlSchema xmlSchema = (XmlSchema) NokogiriService.XML\_SCHEMA\_ALLOCATOR.allocate(runtime, klazz); |
|  |  |  |
|  |  | if (parseOptions == null) { |
|  |  | parseOptions = defaultParseOptions(context.getRuntime()); |
|  |  | } |
|  |  |  |
|  |  | xmlSchema.setInstanceVariable("@errors", runtime.newEmptyArray()); |
|  |  | xmlSchema.setInstanceVariable("@parse\_options", parseOptions); |
|  |  |  |
|  |  | try { |
|  |  | SchemaErrorHandler error\_handler = new SchemaErrorHandler(context.getRuntime(), (RubyArray)xmlSchema.getInstanceVariable("@errors")); |
| Expand All | | @@ -121,14 +127,24 @@ static XmlSchema createSchemaInstance(ThreadContext context, RubyClass klazz, So |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | protected static IRubyObject defaultParseOptions(Ruby runtime) { |
|  |  | return ((RubyClass)runtime.getClassFromPath("Nokogiri::XML::ParseOptions")).getConstant("DEFAULT\_SCHEMA"); |
|  |  | } |
|  |  |  |
|  |  | /\* |
|  |  | \* call-seq: |
|  |  | \* from\_document(doc) |
|  |  | \* |
|  |  | \* Create a new Schema from the Nokogiri::XML::Document +doc+ |
|  |  | \*/ |
|  |  | @JRubyMethod(meta=true) |
|  |  | public static IRubyObject from\_document(ThreadContext context, IRubyObject klazz, IRubyObject document) { |
|  |  | @JRubyMethod(meta=true, required=1, optional=1) |
|  |  | public static IRubyObject from\_document(ThreadContext context, IRubyObject klazz, IRubyObject[] args) { |
|  |  | IRubyObject document = args[0]; |
|  |  | IRubyObject parseOptions = null; |
|  |  | if (args.length > 1) { |
|  |  | parseOptions = args[1]; |
|  |  | } |
|  |  |  |
|  |  | XmlDocument doc = ((XmlDocument) ((XmlNode) document).document(context)); |
|  |  |  |
|  |  | RubyArray errors = (RubyArray) doc.getInstanceVariable("@errors"); |
| Expand All | | @@ -144,25 +160,30 @@ public static IRubyObject from\_document(ThreadContext context, IRubyObject klazz |
|  |  | source.setSystemId(uri.convertToString().asJavaString()); |
|  |  | } |
|  |  |  |
|  |  | return getSchema(context, (RubyClass)klazz, source); |
|  |  | return getSchema(context, (RubyClass)klazz, source, parseOptions); |
|  |  | } |
|  |  |  |
|  |  | private static IRubyObject getSchema(ThreadContext context, RubyClass klazz, Source source) { |
|  |  | @JRubyMethod(meta=true, required=1, optional=1) |
|  |  | public static IRubyObject read\_memory(ThreadContext context, IRubyObject klazz, IRubyObject[] args) { |
|  |  | IRubyObject content = args[0]; |
|  |  | IRubyObject parseOptions = null; |
|  |  | if (args.length > 1) { |
|  |  | parseOptions = args[1]; |
|  |  | } |
|  |  | String data = content.convertToString().asJavaString(); |
|  |  | return getSchema(context, (RubyClass) klazz, new StreamSource(new StringReader(data)), parseOptions); |
|  |  | } |
|  |  |  |
|  |  | private static IRubyObject getSchema(ThreadContext context, RubyClass klazz, Source source, IRubyObject parseOptions) { |
|  |  | String moduleName = klazz.getName(); |
|  |  | if ("Nokogiri::XML::Schema".equals(moduleName)) { |
|  |  | return XmlSchema.createSchemaInstance(context, klazz, source); |
|  |  | return XmlSchema.createSchemaInstance(context, klazz, source, parseOptions); |
|  |  | } else if ("Nokogiri::XML::RelaxNG".equals(moduleName)) { |
|  |  | return XmlRelaxng.createSchemaInstance(context, klazz, source); |
|  |  | return XmlRelaxng.createSchemaInstance(context, klazz, source, parseOptions); |
|  |  | } |
|  |  | return context.getRuntime().getNil(); |
|  |  | } |
|  |  |  |
|  |  | @JRubyMethod(meta=true) |
|  |  | public static IRubyObject read\_memory(ThreadContext context, IRubyObject klazz, IRubyObject content) { |
|  |  | String data = content.convertToString().asJavaString(); |
|  |  | return getSchema(context, (RubyClass) klazz, new StreamSource(new StringReader(data))); |
|  |  | } |
|  |  |  |
|  |  | @JRubyMethod(visibility=Visibility.PRIVATE) |
|  |  | public IRubyObject validate\_document(ThreadContext context, IRubyObject document) { |
|  |  | return validate\_document\_or\_file(context, (XmlDocument)document); |
| Expand Down | |  |

39 changes: 28 additions & 11 deletions

39
[ext/nokogiri/xml\_relax\_ng.c](#diff-ea60812b4c1e566d7b44b6bdfe70a7224ff9c938cf0e50d102ceca7253bab7fc "ext/nokogiri/xml_relax_ng.c")

Show comments

[View file](/sparklemotion/nokogiri/blob/9c87439d9afa14a365ff13e73adc809cb2c3d97b/ext/nokogiri/xml_relax_ng.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -53,16 +53,24 @@ static VALUE validate\_document(VALUE self, VALUE document) |
|  |  | \* |
|  |  | \* Create a new RelaxNG from the contents of +string+ |
|  |  | \*/ |
|  |  | static VALUE read\_memory(VALUE klass, VALUE content) |
|  |  | static VALUE read\_memory(int argc, VALUE \*argv, VALUE klass) |
|  |  | { |
|  |  | xmlRelaxNGParserCtxtPtr ctx = xmlRelaxNGNewMemParserCtxt( |
|  |  | (const char \*)StringValuePtr(content), |
|  |  | (int)RSTRING\_LEN(content) |
|  |  | ); |
|  |  | VALUE content; |
|  |  | VALUE parse\_options; |
|  |  | xmlRelaxNGParserCtxtPtr ctx; |
|  |  | xmlRelaxNGPtr schema; |
|  |  | VALUE errors = rb\_ary\_new(); |
|  |  | VALUE errors; |
|  |  | VALUE rb\_schema; |
|  |  | int scanned\_args = 0; |
|  |  |  |
|  |  | scanned\_args = rb\_scan\_args(argc, argv, "11", &content, &parse\_options); |
|  |  | if (scanned\_args == 1) { |
|  |  | parse\_options = rb\_const\_get(rb\_const\_get(mNokogiriXml, rb\_intern("ParseOptions")), rb\_intern("DEFAULT\_SCHEMA")); |
|  |  | } |
|  |  |  |
|  |  | ctx = xmlRelaxNGNewMemParserCtxt((const char \*)StringValuePtr(content), (int)RSTRING\_LEN(content)); |
|  |  |  |
|  |  | errors = rb\_ary\_new(); |
|  |  | xmlSetStructuredErrorFunc((void \*)errors, Nokogiri\_error\_array\_pusher); |
|  |  |  |
|  |  | #ifdef HAVE\_XMLRELAXNGSETPARSERSTRUCTUREDERRORS |
| Expand Down  Expand Up | | @@ -90,6 +98,7 @@ static VALUE read\_memory(VALUE klass, VALUE content) |
|  |  |  |
|  |  | rb\_schema = Data\_Wrap\_Struct(klass, 0, dealloc, schema); |
|  |  | rb\_iv\_set(rb\_schema, "@errors", errors); |
|  |  | rb\_iv\_set(rb\_schema, "@parse\_options", parse\_options); |
|  |  |  |
|  |  | return rb\_schema; |
|  |  | } |
| Expand All | | @@ -100,18 +109,25 @@ static VALUE read\_memory(VALUE klass, VALUE content) |
|  |  | \* |
|  |  | \* Create a new RelaxNG schema from the Nokogiri::XML::Document +doc+ |
|  |  | \*/ |
|  |  | static VALUE from\_document(VALUE klass, VALUE document) |
|  |  | static VALUE from\_document(int argc, VALUE \*argv, VALUE klass) |
|  |  | { |
|  |  | VALUE document; |
|  |  | VALUE parse\_options; |
|  |  | xmlDocPtr doc; |
|  |  | xmlRelaxNGParserCtxtPtr ctx; |
|  |  | xmlRelaxNGPtr schema; |
|  |  | VALUE errors; |
|  |  | VALUE rb\_schema; |
|  |  | int scanned\_args = 0; |
|  |  |  |
|  |  | scanned\_args = rb\_scan\_args(argc, argv, "11", &document, &parse\_options); |
|  |  |  |
|  |  | Data\_Get\_Struct(document, xmlDoc, doc); |
|  |  | doc = doc->doc; /\* In case someone passes us a node. ugh. \*/ |
|  |  |  |
|  |  | /\* In case someone passes us a node. ugh. \*/ |
|  |  | doc = doc->doc; |
|  |  | if (scanned\_args == 1) { |
|  |  | parse\_options = rb\_const\_get(rb\_const\_get(mNokogiriXml, rb\_intern("ParseOptions")), rb\_intern("DEFAULT\_SCHEMA")); |
|  |  | } |
|  |  |  |
|  |  | ctx = xmlRelaxNGNewDocParserCtxt(doc); |
|  |  |  |
| Expand Down  Expand Up | | @@ -143,6 +159,7 @@ static VALUE from\_document(VALUE klass, VALUE document) |
|  |  |  |
|  |  | rb\_schema = Data\_Wrap\_Struct(klass, 0, dealloc, schema); |
|  |  | rb\_iv\_set(rb\_schema, "@errors", errors); |
|  |  | rb\_iv\_set(rb\_schema, "@parse\_options", parse\_options); |
|  |  |  |
|  |  | return rb\_schema; |
|  |  | } |
| Expand All | | @@ -156,7 +173,7 @@ void init\_xml\_relax\_ng() |
|  |  |  |
|  |  | cNokogiriXmlRelaxNG = klass; |
|  |  |  |
|  |  | rb\_define\_singleton\_method(klass, "read\_memory", read\_memory, 1); |
|  |  | rb\_define\_singleton\_method(klass, "from\_document", from\_document, 1); |
|  |  | rb\_define\_singleton\_method(klass, "read\_memory", read\_memory, -1); |
|  |  | rb\_define\_singleton\_method(klass, "from\_document", from\_document, -1); |
|  |  | rb\_define\_private\_method(klass, "validate\_document", validate\_document, 1); |
|  |  | } |

46 changes: 34 additions & 12 deletions

46
[ext/nokogiri/xml\_schema.c](#diff-6552076c700dcdc8081f13e47f6788ef3d72b9decce84c9d0e0f325bff3d8cee "ext/nokogiri/xml_schema.c")

Show comments

[View file](/sparklemotion/nokogiri/blob/9c87439d9afa14a365ff13e73adc809cb2c3d97b/ext/nokogiri/xml_schema.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -93,23 +93,34 @@ static VALUE validate\_file(VALUE self, VALUE rb\_filename) |
|  |  | \* |
|  |  | \* Create a new Schema from the contents of +string+ |
|  |  | \*/ |
|  |  | static VALUE read\_memory(VALUE klass, VALUE content) |
|  |  | static VALUE read\_memory(int argc, VALUE \*argv, VALUE klass) |
|  |  | { |
|  |  | VALUE content; |
|  |  | VALUE parse\_options; |
|  |  | int parse\_options\_int; |
|  |  | xmlSchemaParserCtxtPtr ctx; |
|  |  | xmlSchemaPtr schema; |
|  |  | xmlSchemaParserCtxtPtr ctx = xmlSchemaNewMemParserCtxt( |
|  |  | (const char \*)StringValuePtr(content), |
|  |  | (int)RSTRING\_LEN(content) |
|  |  | ); |
|  |  | VALUE errors; |
|  |  | VALUE rb\_schema; |
|  |  | VALUE errors = rb\_ary\_new(); |
|  |  | int scanned\_args = 0; |
|  |  |  |
|  |  | scanned\_args = rb\_scan\_args(argc, argv, "11", &content, &parse\_options); |
|  |  | if (scanned\_args == 1) { |
|  |  | parse\_options = rb\_const\_get(rb\_const\_get(mNokogiriXml, rb\_intern("ParseOptions")), rb\_intern("DEFAULT\_SCHEMA")); |
|  |  | } |
|  |  | parse\_options\_int = (int)NUM2INT(rb\_funcall(parse\_options, rb\_intern("to\_i"), 0)); |
|  |  |  |
|  |  | ctx = xmlSchemaNewMemParserCtxt((const char \*)StringValuePtr(content), (int)RSTRING\_LEN(content)); |
|  |  |  |
|  |  | errors = rb\_ary\_new(); |
|  |  | xmlSetStructuredErrorFunc((void \*)errors, Nokogiri\_error\_array\_pusher); |
|  |  |  |
|  |  | #ifdef HAVE\_XMLSCHEMASETPARSERSTRUCTUREDERRORS |
|  |  | xmlSchemaSetParserStructuredErrors( |
|  |  | ctx, |
|  |  | Nokogiri\_error\_array\_pusher, |
|  |  | (void \*)errors |
|  |  | ); |
|  |  | ); |
|  |  | #endif |
|  |  |  |
|  |  | schema = xmlSchemaParse(ctx); |
| Expand All | | @@ -129,6 +140,7 @@ static VALUE read\_memory(VALUE klass, VALUE content) |
|  |  |  |
|  |  | rb\_schema = Data\_Wrap\_Struct(klass, 0, dealloc, schema); |
|  |  | rb\_iv\_set(rb\_schema, "@errors", errors); |
|  |  | rb\_iv\_set(rb\_schema, "@parse\_options", parse\_options); |
|  |  |  |
|  |  | return rb\_schema; |
|  |  | } |
| Expand Down  Expand Up | | @@ -164,18 +176,27 @@ static int has\_blank\_nodes\_p(VALUE cache) |
|  |  | \* |
|  |  | \* Create a new Schema from the Nokogiri::XML::Document +doc+ |
|  |  | \*/ |
|  |  | static VALUE from\_document(VALUE klass, VALUE document) |
|  |  | static VALUE from\_document(int argc, VALUE \*argv, VALUE klass) |
|  |  | { |
|  |  | VALUE document; |
|  |  | VALUE parse\_options; |
|  |  | int parse\_options\_int; |
|  |  | xmlDocPtr doc; |
|  |  | xmlSchemaParserCtxtPtr ctx; |
|  |  | xmlSchemaPtr schema; |
|  |  | VALUE errors; |
|  |  | VALUE rb\_schema; |
|  |  | int scanned\_args = 0; |
|  |  |  |
|  |  | scanned\_args = rb\_scan\_args(argc, argv, "11", &document, &parse\_options); |
|  |  |  |
|  |  | Data\_Get\_Struct(document, xmlDoc, doc); |
|  |  | doc = doc->doc; /\* In case someone passes us a node. ugh. \*/ |
|  |  |  |
|  |  | /\* In case someone passes us a node. ugh. \*/ |
|  |  | doc = doc->doc; |
|  |  | if (scanned\_args == 1) { |
|  |  | parse\_options = rb\_const\_get(rb\_const\_get(mNokogiriXml, rb\_intern("ParseOptions")), rb\_intern("DEFAULT\_SCHEMA")); |
|  |  | } |
|  |  | parse\_options\_int = (int)NUM2INT(rb\_funcall(parse\_options, rb\_intern("to\_i"), 0)); |
|  |  |  |
|  |  | if (has\_blank\_nodes\_p(DOC\_NODE\_CACHE(doc))) { |
|  |  | rb\_raise(rb\_eArgError, "Creating a schema from a document that has blank nodes exposed to Ruby is dangerous"); |
| Expand Down  Expand Up | | @@ -211,6 +232,7 @@ static VALUE from\_document(VALUE klass, VALUE document) |
|  |  |  |
|  |  | rb\_schema = Data\_Wrap\_Struct(klass, 0, dealloc, schema); |
|  |  | rb\_iv\_set(rb\_schema, "@errors", errors); |
|  |  | rb\_iv\_set(rb\_schema, "@parse\_options", parse\_options); |
|  |  |  |
|  |  | return rb\_schema; |
|  |  |  |
| Expand All | | @@ -226,8 +248,8 @@ void init\_xml\_schema() |
|  |  |  |
|  |  | cNokogiriXmlSchema = klass; |
|  |  |  |
|  |  | rb\_define\_singleton\_method(klass, "read\_memory", read\_memory, 1); |
|  |  | rb\_define\_singleton\_method(klass, "from\_document", from\_document, 1); |
|  |  | rb\_define\_singleton\_method(klass, "read\_memory", read\_memory, -1); |
|  |  | rb\_define\_singleton\_method(klass, "from\_document", from\_document, -1); |
|  |  |  |
|  |  | rb\_define\_private\_method(klass, "validate\_document", validate\_document, 1); |
|  |  | rb\_define\_private\_method(klass, "validate\_file", validate\_file, 1); |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[lib/nokogiri/xml/parse\_options.rb](#diff-769609b60d1ecc30bd6c18200da2846120532020ed5f4e6e741a0042c3bcf4f9 "lib/nokogiri/xml/parse_options.rb")

Show comments

[View file](/sparklemotion/nokogiri/blob/9c87439d9afa14a365ff13e73adc809cb2c3d97b/lib/nokogiri/xml/parse_options.rb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -73,6 +73,8 @@ class ParseOptions |
|  |  | DEFAULT\_XML = RECOVER | NONET |
|  |  | # the default options used for parsing HTML documents |
|  |  | DEFAULT\_HTML = RECOVER | NOERROR | NOWARNING | NONET |
|  |  | # the default options used for parsing XML schemas |
|  |  | DEFAULT\_SCHEMA = NONET |
|  |  |  |
|  |  | attr\_accessor :options |
|  |  | def initialize options = STRICT |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[lib/nokogiri/xml/relax\_ng.rb](#diff-7ad1f4590bbcdbc76139192190f62824a1f111e6c1c471505a96198200732ed5 "lib/nokogiri/xml/relax_ng.rb")

Show comments

[View file](/sparklemotion/nokogiri/blob/9c87439d9afa14a365ff13e73adc809cb2c3d97b/lib/nokogiri/xml/relax_ng.rb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -5,8 +5,8 @@ class << self |
|  |  | ### |
|  |  | # Create a new Nokogiri::XML::RelaxNG document from +string\_or\_io+. |
|  |  | # See Nokogiri::XML::RelaxNG for an example. |
|  |  | def RelaxNG string\_or\_io |
|  |  | RelaxNG.new(string\_or\_io) |
|  |  | def RelaxNG(string\_or\_io, options = ParseOptions::DEFAULT\_SCHEMA) |
|  |  | RelaxNG.new(string\_or\_io, options) |
|  |  | end |
|  |  | end |
|  |  |  |
| Expand Down | |  |

10 changes: 6 additions & 4 deletions

10
[lib/nokogiri/xml/schema.rb](#diff-0f89c005f8c338bf26cf9dd23f1e6d0cf91e56ed33bda3c8522da0e6209bd74a "lib/nokogiri/xml/schema.rb")

Show comments

[View file](/sparklemotion/nokogiri/blob/9c87439d9afa14a365ff13e73adc809cb2c3d97b/lib/nokogiri/xml/schema.rb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -5,8 +5,8 @@ class << self |
|  |  | ### |
|  |  | # Create a new Nokogiri::XML::Schema object using a +string\_or\_io+ |
|  |  | # object. |
|  |  | def Schema string\_or\_io |
|  |  | Schema.new(string\_or\_io) |
|  |  | def Schema(string\_or\_io, options = ParseOptions::DEFAULT\_SCHEMA) |
|  |  | Schema.new(string\_or\_io, options) |
|  |  | end |
|  |  | end |
|  |  |  |
| Expand All | | @@ -30,12 +30,14 @@ def Schema string\_or\_io |
|  |  | class Schema |
|  |  | # Errors while parsing the schema file |
|  |  | attr\_accessor :errors |
|  |  | # The Nokogiri::XML::ParseOptions used to parse the schema |
|  |  | attr\_accessor :parse\_options |
|  |  |  |
|  |  | ### |
|  |  | # Create a new Nokogiri::XML::Schema object using a +string\_or\_io+ |
|  |  | # object. |
|  |  | def self.new string\_or\_io |
|  |  | from\_document Nokogiri::XML(string\_or\_io) |
|  |  | def self.new string\_or\_io, options = ParseOptions::DEFAULT\_SCHEMA |
|  |  | from\_document(Nokogiri::XML(string\_or\_io), options) |
|  |  | end |
|  |  |  |
|  |  | ### |
| Expand Down | |  |

34 changes: 34 additions & 0 deletions

34
[test/xml/test\_relax\_ng.rb](#diff-93d2df9b811d51c2ac95abb32f0cc121e105ef34900128ddbc878c67b7f655bb "test/xml/test_relax_ng.rb")

Show comments

[View file](/sparklemotion/nokogiri/blob/9c87439d9afa14a365ff13e73adc809cb2c3d97b/test/xml/test_relax_ng.rb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -26,6 +26,40 @@ def test\_parse\_with\_io |
|  |  | assert\_equal 0, xsd.errors.length |
|  |  | end |
|  |  |  |
|  |  | def test\_constructor\_method\_with\_parse\_options |
|  |  | schema = Nokogiri::XML::RelaxNG(File.read(ADDRESS\_SCHEMA\_FILE)) |
|  |  | assert\_equal Nokogiri::XML::ParseOptions::DEFAULT\_SCHEMA, schema.parse\_options |
|  |  |  |
|  |  | schema = Nokogiri::XML::RelaxNG(File.read(ADDRESS\_SCHEMA\_FILE), Nokogiri::XML::ParseOptions.new.recover) |
|  |  | assert\_equal Nokogiri::XML::ParseOptions.new.recover, schema.parse\_options |
|  |  | end |
|  |  |  |
|  |  | def test\_new\_with\_parse\_options |
|  |  | schema = Nokogiri::XML::RelaxNG.new(File.read(ADDRESS\_SCHEMA\_FILE)) |
|  |  | assert\_equal Nokogiri::XML::ParseOptions::DEFAULT\_SCHEMA, schema.parse\_options |
|  |  |  |
|  |  | schema = Nokogiri::XML::RelaxNG.new(File.read(ADDRESS\_SCHEMA\_FILE), Nokogiri::XML::ParseOptions.new.recover) |
|  |  | assert\_equal Nokogiri::XML::ParseOptions.new.recover, schema.parse\_options |
|  |  | end |
|  |  |  |
|  |  | def test\_from\_document\_with\_parse\_options |
|  |  | schema = Nokogiri::XML::RelaxNG.from\_document(Nokogiri::XML::Document.parse(File.read(ADDRESS\_SCHEMA\_FILE))) |
|  |  | assert\_equal Nokogiri::XML::ParseOptions::DEFAULT\_SCHEMA, schema.parse\_options |
|  |  |  |
|  |  | schema = Nokogiri::XML::RelaxNG.from\_document(Nokogiri::XML::Document.parse(File.read(ADDRESS\_SCHEMA\_FILE)), |
|  |  | Nokogiri::XML::ParseOptions.new.recover) |
|  |  | assert\_equal Nokogiri::XML::ParseOptions.new.recover, schema.parse\_options |
|  |  | end |
|  |  |  |
|  |  | def test\_read\_memory\_with\_parse\_options |
|  |  | schema = Nokogiri::XML::RelaxNG.read\_memory(File.read(ADDRESS\_SCHEMA\_FILE)) |
|  |  | assert\_equal Nokogiri::XML::ParseOptions::DEFAULT\_SCHEMA, schema.parse\_options |
|  |  |  |
|  |  | schema = Nokogiri::XML::RelaxNG.read\_memory(File.read(ADDRESS\_SCHEMA\_FILE), |
|  |  | Nokogiri::XML::ParseOptions.new.recover) |
|  |  | assert\_equal Nokogiri::XML::ParseOptions.new.recover, schema.parse\_options |
|  |  | end |
|  |  |  |
|  |  | def test\_parse\_with\_errors |
|  |  | xml = File.read(ADDRESS\_SCHEMA\_FILE).sub(/name="/, 'name=') |
|  |  | assert\_raises(Nokogiri::XML::SyntaxError) { |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `9c87439`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fcommit%2F9c87439d9afa14a365ff13e73adc809cb2c3d97b) to comment.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_d1d9757d_20250119_131408.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-vr8q-g5c7-m54m)

**CVE-2020-26247**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-vr8q-g5c7-m54m)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [GitHub Reviewed](/advisories?query=type%3Areviewed)
3. [CVE-2020-26247](/advisories/GHSA-vr8q-g5c7-m54m)

## Nokogiri::XML::Schema trusts input by default, exposing risk of XXE vulnerability

Moderate severity

GitHub Reviewed

Published
Dec 29, 2020
in
[sparklemotion/nokogiri](/sparklemotion/nokogiri)
‚Ä¢
Updated May 4, 2023

[Vulnerability details](/advisories/GHSA-vr8q-g5c7-m54m)
[Dependabot alerts
0](/advisories/GHSA-vr8q-g5c7-m54m/dependabot)

## Package

bundler

nokogiri
([RubyGems](/advisories?query=ecosystem%3Arubygems))

## Affected versions

<= 1.10.10

## Patched versions

1.11.0

## Description

### Severity

Nokogiri maintainers have evaluated this as [**Low Severity** (CVSS3 2.6)](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:R/S:U/C:L/I:N/A:N).

### Description

In Nokogiri versions <= 1.11.0.rc3, XML Schemas parsed by `Nokogiri::XML::Schema` are **trusted** by default, allowing external resources to be accessed over the network, potentially enabling XXE or SSRF attacks.

This behavior is counter to the security policy followed by Nokogiri maintainers, which is to treat all input as **untrusted** by default whenever possible.

Please note that this security fix was pushed into a new minor version, 1.11.x, rather than a patch release to the 1.10.x branch, because it is a breaking change for some schemas and the risk was assessed to be "Low Severity".

### Affected Versions

Nokogiri `<= 1.10.10` as well as prereleases `1.11.0.rc1`, `1.11.0.rc2`, and `1.11.0.rc3`

### Mitigation

There are no known workarounds for affected versions. Upgrade to Nokogiri `1.11.0.rc4` or later.

If, after upgrading to `1.11.0.rc4` or later, you wish to re-enable network access for resolution of external resources (i.e., return to the previous behavior):

1. Ensure the input is trusted. Do not enable this option for untrusted input.
2. When invoking the `Nokogiri::XML::Schema` constructor, pass as the second parameter an instance of `Nokogiri::XML::ParseOptions` with the `NONET` flag turned off.

So if your previous code was:

```
# in v1.11.0.rc3 and earlier, this call allows resources to be accessed over the network
# but in v1.11.0.rc4 and later, this call will disallow network access for external resources
schema = Nokogiri::XML::Schema.new(schema)

# in v1.11.0.rc4 and later, the following is equivalent to the code above
# (the second parameter is optional, and this demonstrates its default value)
schema = Nokogiri::XML::Schema.new(schema, Nokogiri::XML::ParseOptions::DEFAULT_SCHEMA)
```

Then you can add the second parameter to indicate that the input is trusted by changing it to:

```
# in v1.11.0.rc3 and earlier, this would raise an ArgumentError
# but in v1.11.0.rc4 and later, this allows resources to be accessed over the network
schema = Nokogiri::XML::Schema.new(trusted_schema, Nokogiri::XML::ParseOptions.new.nononet)
```
### References

* [This issue's public advisory](https://github.com/sparklemotion/nokogiri/security/advisories/GHSA-vr8q-g5c7-m54m)
* [Original Hackerone report (private)](https://hackerone.com/reports/747489)
* [OWASP description of XXE attack](https://www.owasp.org/index.php/XML_External_Entity_%28XXE%29_Processing)
* [OWASP description of SSRF attack](https://www.owasp.org/index.php/Server_Side_Request_Forgery)

### Credit

This vulnerability was independently reported by [@eric-therond](https://github.com/eric-therond) and [@gucki](https://github.com/gucki).

The Nokogiri maintainers would like to thank [HackerOne](https://hackerone.com/nokogiri) for providing a secure, responsible mechanism for reporting, and for providing their fantastic service to us.

### References

* [GHSA-vr8q-g5c7-m54m](https://github.com/sparklemotion/nokogiri/security/advisories/GHSA-vr8q-g5c7-m54m "GHSA-vr8q-g5c7-m54m")
* [sparklemotion/nokogiri@9c87439](https://github.com/sparklemotion/nokogiri/commit/9c87439d9afa14a365ff13e73adc809cb2c3d97b)
* <https://hackerone.com/reports/747489>
* <https://github.com/sparklemotion/nokogiri/releases/tag/v1.11.0.rc4>
* <https://rubygems.org/gems/nokogiri>
* <https://nvd.nist.gov/vuln/detail/CVE-2020-26247>
* <https://github.com/sparklemotion/nokogiri/blob/main/CHANGELOG.md#v1110--2021-01-03>
* <https://lists.debian.org/debian-lts-announce/2021/06/msg00007.html>
* <https://security.gentoo.org/glsa/202208-29>
* <https://lists.debian.org/debian-lts-announce/2022/10/msg00018.html>
* <https://github.com/rubysec/ruby-advisory-db/blob/master/gems/nokogiri/CVE-2020-26247.yml>

[![@flavorjones](https://avatars.githubusercontent.com/u/8207?s=40&v=4)](/flavorjones)
[flavorjones](/flavorjones)
published to
[sparklemotion/nokogiri](/sparklemotion/nokogiri/security/advisories/GHSA-vr8q-g5c7-m54m)
Dec 29, 2020

Reviewed
Dec 30, 2020

Published to the GitHub Advisory Database
Dec 30, 2020

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2020-26247)
Dec 30, 2020

Last updated
May 4, 2023

### Severity

Moderate

4.3

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Unchanged

Confidentiality
Low

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N

### [EPSS score](https://www.first.org/epss/user-guide)

0.190%
 (57th percentile)

### Weaknesses

[CWE-611](/advisories?query=cwe%3A611)

### CVE ID

CVE-2020-26247

### GHSA ID

GHSA-vr8q-g5c7-m54m

### Source code

[sparklemotion/nokogiri](https://github.com/sparklemotion/nokogiri)

### Credits

* [![@eric-therond](https://avatars.githubusercontent.com/u/11455652?s=40&v=4)](/eric-therond)
  [eric-therond](/eric-therond)
  Analyst

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-vr8q-g5c7-m54m/improve).

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_276ce5c2_20250119_131407.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fsecurity%2Fadvisories%2FGHSA-vr8q-g5c7-m54m)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsparklemotion%2Fnokogiri%2Fsecurity%2Fadvisories%2FGHSA-vr8q-g5c7-m54m)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=sparklemotion%2Fnokogiri)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[sparklemotion](/sparklemotion)
/
**[nokogiri](/sparklemotion/nokogiri)**
Public

* [Notifications](/login?return_to=%2Fsparklemotion%2Fnokogiri) You must be signed in to change notification settings
* [Fork
  905](/login?return_to=%2Fsparklemotion%2Fnokogiri)
* [Star
   6.2k](/login?return_to=%2Fsparklemotion%2Fnokogiri)

* [Code](/sparklemotion/nokogiri)
* [Issues
  65](/sparklemotion/nokogiri/issues)
* [Pull requests
  24](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects
  0](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

Additional navigation options

* [Code](/sparklemotion/nokogiri)
* [Issues](/sparklemotion/nokogiri/issues)
* [Pull requests](/sparklemotion/nokogiri/pulls)
* [Discussions](/sparklemotion/nokogiri/discussions)
* [Actions](/sparklemotion/nokogiri/actions)
* [Projects](/sparklemotion/nokogiri/projects)
* [Wiki](/sparklemotion/nokogiri/wiki)
* [Security](/sparklemotion/nokogiri/security)
* [Insights](/sparklemotion/nokogiri/pulse)

# Nokogiri::XML::Schema trusts input by default, exposing risk of an XXE vulnerability

Low

[flavorjones](/flavorjones)
published
GHSA-vr8q-g5c7-m54m
Dec 29, 2020

## Package

nokogiri
(rubygem)

## Affected versions

<= 1.11.0.rc3

## Patched versions

1.11.0.rc4

## Description

### Severity

Nokogiri maintainers have evaluated this as [**Low Severity** (CVSS3 2.6)](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:R/S:U/C:L/I:N/A:N).

### Description

In Nokogiri versions <= 1.11.0.rc3, XML Schemas parsed by `Nokogiri::XML::Schema` are **trusted** by default, allowing external resources to be accessed over the network, potentially enabling XXE or SSRF attacks.

This behavior is counter to the security policy followed by Nokogiri maintainers, which is to treat all input as **untrusted** by default whenever possible.

Please note that this security fix was pushed into a new minor version, 1.11.x, rather than a patch release to the 1.10.x branch, because it is a breaking change for some schemas and the risk was assessed to be "Low Severity".

### Affected Versions

Nokogiri `<= 1.10.10` as well as prereleases `1.11.0.rc1`, `1.11.0.rc2`, and `1.11.0.rc3`

### Mitigation

There are no known workarounds for affected versions. Upgrade to Nokogiri `1.11.0.rc4` or later.

If, after upgrading to `1.11.0.rc4` or later, you wish to re-enable network access for resolution of external resources (i.e., return to the previous behavior):

1. Ensure the input is trusted. Do not enable this option for untrusted input.
2. When invoking the `Nokogiri::XML::Schema` constructor, pass as the second parameter an instance of `Nokogiri::XML::ParseOptions` with the `NONET` flag turned off.

So if your previous code was:

```
# in v1.11.0.rc3 and earlier, this call allows resources to be accessed over the network
# but in v1.11.0.rc4 and later, this call will disallow network access for external resources
schema = Nokogiri::XML::Schema.new(schema)

# in v1.11.0.rc4 and later, the following is equivalent to the code above
# (the second parameter is optional, and this demonstrates its default value)
schema = Nokogiri::XML::Schema.new(schema, Nokogiri::XML::ParseOptions::DEFAULT_SCHEMA)
```

Then you can add the second parameter to indicate that the input is trusted by changing it to:

```
# in v1.11.0.rc3 and earlier, this would raise an ArgumentError
# but in v1.11.0.rc4 and later, this allows resources to be accessed over the network
schema = Nokogiri::XML::Schema.new(trusted_schema, Nokogiri::XML::ParseOptions.new.nononet)
```
### References

* [This issue's public advisory](https://github.com/sparklemotion/nokogiri/security/advisories/GHSA-vr8q-g5c7-m54m)
* [Original Hackerone report (private)](https://hackerone.com/reports/747489)
* [OWASP description of XXE attack](https://www.owasp.org/index.php/XML_External_Entity_%28XXE%29_Processing)
* [OWASP description of SSRF attack](https://www.owasp.org/index.php/Server_Side_Request_Forgery)

### Credit

This vulnerability was independently reported by Eric Th√©rond ([@eric-therond](https://github.com/eric-therond)) and Corin Langosch ([@gucki](https://github.com/gucki)).

The Nokogiri maintainers would like to thank [HackerOne](https://hackerone.com/nokogiri) for providing a secure, responsible mechanism for reporting, and for providing their fantastic service to us.

### Severity

Low

### CVE ID

CVE-2020-26247

### Weaknesses

No CWEs

### Credits

* [![@eric-therond](https://avatars.githubusercontent.com/u/11455652?s=40&v=4)](/eric-therond)
  [eric-therond](/eric-therond)
  Analyst

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from lists.debian.org_6e7c33a5_20250119_112025.html ===


---

[[Date Prev](msg00017.html)][[Date Next](msg00019.html)]
[[Thread Prev](msg00017.html)][[Thread Next](msg00019.html)]
[[Date Index](maillist.html#00018)]
[[Thread Index](threads.html#00018)]

# [SECURITY] [DLA 3149-1] ruby-nokogiri security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3149-1] ruby-nokogiri security update
* *From*: Sylvain Beucler <beuc@beuc.net>
* *Date*: Wed, 12 Oct 2022 16:46:03 +0200
* *Message-id*: <[[üîé]](/msgid-search/20221012144603.GA496%40mail.beuc.net)¬†[20221012144603.GA496@mail.beuc.net](msg00018.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian LTS Advisory DLA-3149-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                      Sylvain Beucler
October 12, 2022                              <https://wiki.debian.org/LTS>
- -------------------------------------------------------------------------

Package        : ruby-nokogiri
Version        : 1.10.0+dfsg1-2+deb10u1
CVE ID         : CVE-2019-5477 CVE-2020-26247 CVE-2022-24836
Debian Bug     : 934802 978967 1009787

Multiple vulnerabilities were discovered in Nokogiri, an
HTML/XML/SAX/Reader parser for the Ruby programming language, leading
to command injection, XML external entity injection (XXE), and
denial-of-service (DoS).

CVE-2019-5477

    A command injection vulnerability allows commands to be executed
    in a subprocess via Ruby's `Kernel.open` method. Processes are
    vulnerable only if the undocumented method
    `Nokogiri::CSS::Tokenizer#load_file` is being called with unsafe
    user input as the filename. This vulnerability appears in code
    generated by the Rexical gem versions v1.0.6 and earlier. Rexical
    is used by Nokogiri to generate lexical scanner code for parsing
    CSS queries.

CVE-2020-26247

    XXE vulnerability: XML Schemas parsed by Nokogiri::XML::Schema are
    trusted by default, allowing external resources to be accessed
    over the network, potentially enabling XXE or SSRF attacks. This
    behavior is counter to the security policy followed by Nokogiri
    maintainers, which is to treat all input as untrusted by default
    whenever possible.

CVE-2022-24836

    Nokogiri contains an inefficient regular expression that is
    susceptible to excessive backtracking when attempting to detect
    encoding in HTML documents.

For Debian 10 buster, these problems have been fixed in version
1.10.0+dfsg1-2+deb10u1.

We recommend that you upgrade your ruby-nokogiri packages.

For the detailed security status of ruby-nokogiri please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/ruby-nokogiri>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEE1vEOfV7HXWKqBieIDTl9HeUlXjAFAmNG0qcACgkQDTl9HeUl
XjCOZhAAiFM9mYvi7aUOSdrrxHlwPN+GXrG3emtk4+gUpASQ5DC8PsdYiqDTEDlP
GKVGVjfNaEuHCXCieQIk7198O4gOSrSs2KSLBlIvZnZYIaxmBv39Vhu+AevQh8Gx
ZeXxGe50q+VFHZBoDz0BWTITBndMkR0J8sUbbjUvDbBlrOjyD7iVsT+orSiBtq74
/hkgLsYPF2PuKciTEN7P9XhaYcZ33GK3T9GBG2fxNjD8P+TlsnPy3qMhycWCskdd
WFKa3kUwG+3MMCPe37vZFKlb4nDSPxqDPlRBczOeon0ea0A318dtUIfQx7ddAFYG
lT9pH5Uon0XzX9ZfOGy2wfQsX0+wPoe7fOqszr0xik2Sq48CiSNkiQltqOYCzxdT
cPc2/eRSNOfNfMvrLhsw85zur0h/oGPiE35Gkag+BMSB+Je/n+8NPww2vjQ8Llao
QG02BtMXDLDXmn96tTYOMLa7HnVOucIJEVpFLegBH+ruSd6ITdKvmoRCAKGWd/1T
0R3UbUhVogyDsySEokHOJgqYo74Z0qk1ktKjtZo3NvO4GOOl7K+3J4Hp1wd0PtbG
iT3HPB+VdpuaNjceiy6MVuJY+8oVtotLTCMwPFXWYF8doCczgOZHUrvJUTkl/0sI
xa1ZxGNtsIIvN69LWpNw0LIfXDIlbvd6d0zx/BcQ6nZ4nMEJt24=
=aoDP
-----END PGP SIGNATURE-----

```

---



=== Content from wiki.debian.org_8d48714b_20250119_131405.html ===

[![Debian](https://www.debian.org/Pics/openlogo-50.png)](https://www.debian.org "Debian Homepage")

[Wiki](/FrontPage "Debian Wiki Homepage")

[Login](/LTS?action=login)

* [FrontPage](/FrontPage)
* [RecentChanges](/RecentChanges)
* [FindPage](/FindPage)
* [HelpContents](/HelpContents)
* [LTS](/LTS)

Search:

[![Debian](https://www.debian.org/Pics/openlogo-50.png)](https://www.debian.org "Debian Homepage")
[Wiki](/FrontPage "Debian Wiki Homepage")/

* [Login](/LTS?action=login)
* Comments
* [Info](/LTS?action=info)
* [Attachments](/LTS?action=AttachFile)
* More Actions:
  Raw Text
  Print View
  Render as Docbook
  Delete Cache
  ------------------------
  Check Spelling
  Like Pages
  Local Site Map
  ------------------------
  Rename Page
  Delete Page
  ------------------------
  Subscribe User
  ------------------------
  Remove Spam
  Revert to this revision
  Package Pages
  ------------------------
  Load
  Save
  SlideShow

# * [LTS](/LTS)

[Translation(s)](/DebianWiki/EditorGuide#translation): [English](/LTS) - [Deutsch](/de/LTS) - [Espa√±ol](/es/LTS) - [Fran√ßais](/fr/LTS) - [Italiano](/it/LTS) - [ÌïúÍµ≠Ïñ¥](/ko/LTS) - [Portugu√™s](/pt/LTS) - [Portugu√™s (Brasil)](/pt_BR/LTS) - [–†—É—Å—Å–∫–∏–π](/ru/LTS)

# Debian Long Term Support

Debian Long Term Support (LTS) is a project to extend the lifetime of all Debian stable releases to (at least) 5 years. Debian LTS is not handled by the Debian Security and Release teams, but by a separate group of volunteers and companies interested in making it a success.

Thus the Debian LTS team takes over security maintenance of the various releases once the Debian Security team stops its work.

![/!\](/htdocs/debwiki/img/alert.png "/!\")

LTS ([last modified 2024-08-15 02:46:47](/LTS?action=info))

* Debian [privacy policy](https://www.debian.org/legal/privacy), Wiki [team](/Teams/DebianWiki), [bugs](https://bugs.debian.org/wiki.debian.org) and [config](https://salsa.debian.org/debian/wiki.debian.org).
* Powered by [MoinMoin](https://moinmo.in/ "This site uses the MoinMoin Wiki software.") and [Python](https://moinmo.in/Python "MoinMoin is written in Python."), with hosting provided by [Metropolitan Area Network Darmstadt](https://www.man-da.de/).


