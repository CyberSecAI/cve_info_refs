=== Content from github.com_99fe1b2a_20250119_120105.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fissues%2F6767)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fissues%2F6767)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=envoyproxy%2Fenvoy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[envoyproxy](/envoyproxy)
/
**[envoy](/envoyproxy/envoy)**
Public

* [Notifications](/login?return_to=%2Fenvoyproxy%2Fenvoy) You must be signed in to change notification settings
* [Fork
  4.9k](/login?return_to=%2Fenvoyproxy%2Fenvoy)
* [Star
   25.3k](/login?return_to=%2Fenvoyproxy%2Fenvoy)

* [Code](/envoyproxy/envoy)
* [Issues
  1.5k](/envoyproxy/envoy/issues)
* [Pull requests
  141](/envoyproxy/envoy/pulls)
* [Actions](/envoyproxy/envoy/actions)
* [Projects
  0](/envoyproxy/envoy/projects)
* [Wiki](/envoyproxy/envoy/wiki)
* [Security](/envoyproxy/envoy/security)
* [Insights](/envoyproxy/envoy/pulse)

Additional navigation options

* [Code](/envoyproxy/envoy)
* [Issues](/envoyproxy/envoy/issues)
* [Pull requests](/envoyproxy/envoy/pulls)
* [Actions](/envoyproxy/envoy/actions)
* [Projects](/envoyproxy/envoy/projects)
* [Wiki](/envoyproxy/envoy/wiki)
* [Security](/envoyproxy/envoy/security)
* [Insights](/envoyproxy/envoy/pulse)

# Envoy does not adhere to HTTP/2 RFC 7540¬†#6767

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkOpenOpen[Envoy does not adhere to HTTP/2 RFC 7540](#top)#6767Copy linkAssignees [![lambdai](https://avatars.githubusercontent.com/u/209726?s=64&u=3ab502e5694ab26b44bd17e50e2024d9196e412d&v=4)](/lambdai)Labels[area/http](https://github.com/envoyproxy/envoy/issues?q=state%3Aopen%20label%3A%22area%2Fhttp%22)[area/tls](https://github.com/envoyproxy/envoy/issues?q=state%3Aopen%20label%3A%22area%2Ftls%22)[design proposalNeeds design doc/proposal before implementation](https://github.com/envoyproxy/envoy/issues?q=state%3Aopen%20label%3A%22design%20proposal%22)Needs design doc/proposal before implementation[help wantedNeeds help!](https://github.com/envoyproxy/envoy/issues?q=state%3Aopen%20label%3A%22help%20wanted%22)Needs help!![@trevorlinton](https://avatars.githubusercontent.com/u/3111873?u=affb70a31da34be2526b90b1eda2a55f1cfd5f74&v=4&size=80)
## Description

![@trevorlinton](https://avatars.githubusercontent.com/u/3111873?u=affb70a31da34be2526b90b1eda2a55f1cfd5f74&v=4&size=48)[trevorlinton](https://github.com/trevorlinton)opened [on May 1, 2019](https://github.com/envoyproxy/envoy/issues/6767#issue-439180988)

*Title*: Envoy does not adhere to HTTP/2 RFC 7540

*Description*:

> RFC 7540 Section 9.1.1 and 9.1.2 specifies when a request coming in through a re-used HTTP/2 connection is accidentally sent to a non-origin but authoritative server that a 421 response should be returned. This can happen if two servers one with a wildcard certificate (e.g., a.example.com) and another server (b.example.com) with a non-wildcard on the same IP address using SNI responds to requests those meant for server b.example.com will accidentally be forwarded down the re-used HTTP/2 connection for a.example.com. In this situation a.example.com should send back a 421 to indicate the request was destined for b.example.com. This forces browsers to re-establish a new connection, re-negotiate the SNI, and thus the backing server and subsequently route to the correct origin.

[optional *Relevant Links*:]

* <https://tools.ietf.org/html/rfc7540#section-9.1.1> - section describing connection re-use
* <https://tools.ietf.org/html/rfc7540#section-9.1.2> - section describing misdirected response
* <https://bugs.chromium.org/p/chromium/issues/detail?id=954160#c5> - The bug was originally filed against Chromium however they indicated Istio was the issue.
* [Istio does not adhere to HTTP/2 RFC 7540¬†istio/istio#13589](https://github.com/istio/istio/issues/13589) - The bug was then filed against istio who indicated envoy was the issue.
üëç31üëÄ5
## Metadata

### Assignees

* [![@lambdai](https://avatars.githubusercontent.com/u/209726?s=64&u=3ab502e5694ab26b44bd17e50e2024d9196e412d&v=4)lambdai](/lambdai)
### Labels

[area/http](https://github.com/envoyproxy/envoy/issues?q=state%3Aopen%20label%3A%22area%2Fhttp%22)[area/tls](https://github.com/envoyproxy/envoy/issues?q=state%3Aopen%20label%3A%22area%2Ftls%22)[design proposalNeeds design doc/proposal before implementation](https://github.com/envoyproxy/envoy/issues?q=state%3Aopen%20label%3A%22design%20proposal%22)Needs design doc/proposal before implementation[help wantedNeeds help!](https://github.com/envoyproxy/envoy/issues?q=state%3Aopen%20label%3A%22help%20wanted%22)Needs help!
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from bugs.chromium.org_8dd1eff8_20250119_120103.html ===



=== Content from github.com_e0bd7cd3_20250119_120106.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fistio%2Fistio%2Fissues%2F13589)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fistio%2Fistio%2Fissues%2F13589)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=istio%2Fistio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[istio](/istio)
/
**[istio](/istio/istio)**
Public

* [Notifications](/login?return_to=%2Fistio%2Fistio) You must be signed in to change notification settings
* [Fork
  7.8k](/login?return_to=%2Fistio%2Fistio)
* [Star
   36.4k](/login?return_to=%2Fistio%2Fistio)

* [Code](/istio/istio)
* [Issues
  452](/istio/istio/issues)
* [Pull requests
  46](/istio/istio/pulls)
* [Discussions](/istio/istio/discussions)
* [Actions](/istio/istio/actions)
* [Wiki](/istio/istio/wiki)
* [Security](/istio/istio/security)
* [Insights](/istio/istio/pulse)

Additional navigation options

* [Code](/istio/istio)
* [Issues](/istio/istio/issues)
* [Pull requests](/istio/istio/pulls)
* [Discussions](/istio/istio/discussions)
* [Actions](/istio/istio/actions)
* [Wiki](/istio/istio/wiki)
* [Security](/istio/istio/security)
* [Insights](/istio/istio/pulse)

# Istio does not adhere to HTTP/2 RFC 7540¬†#13589

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkOpenOpen[Istio does not adhere to HTTP/2 RFC 7540](#top)#13589Copy linkAssignees [![lambdai](https://avatars.githubusercontent.com/u/209726?s=64&u=3ab502e5694ab26b44bd17e50e2024d9196e412d&v=4)](/lambdai)Labels[area/networking](https://github.com/istio/istio/issues?q=state%3Aopen%20label%3A%22area%2Fnetworking%22)[lifecycle/staleproofIndicates a PR or issue has been deemed to be immune from becoming stale and/or automatically closed](https://github.com/istio/istio/issues?q=state%3Aopen%20label%3A%22lifecycle%2Fstaleproof%22)Indicates a PR or issue has been deemed to be immune from becoming stale and/or automatically closedMilestone[Nebulous Future](https://github.com/istio/istio/milestone/4)![@trevorlinton](https://avatars.githubusercontent.com/u/3111873?u=affb70a31da34be2526b90b1eda2a55f1cfd5f74&v=4&size=80)
## Description

![@trevorlinton](https://avatars.githubusercontent.com/u/3111873?u=affb70a31da34be2526b90b1eda2a55f1cfd5f74&v=4&size=48)[trevorlinton](https://github.com/trevorlinton)opened [on Apr 24, 2019](https://github.com/istio/istio/issues/13589#issue-436812116)

**Bug description**

Istio does not properly send a 421 response when a connection is reused and accident sent to a server that is not the correct origin. This can occur when there are two gateways, one with a wildcard certificate (\*.example.com) and one with a different non-wildcard certificate (b.example.com) routing to two different apps (a.example.com and b.example.com) where a http/2 connection is first established to the wildcard gateway (on host a.example.com with \*.example.com) then a resource is requested from an application on the non-wildcard gateway (b.example.com with certificate b.example.com).

Because of http/2 connection reuse it's possible for traffic destined for the second app (b.example.com) to end up being routed on the existing connection for (a.example.com) due to the RFC definition of connection re-use in section 9.1.1 (<https://tools.ietf.org/html/rfc7540#section-9.1.1>, e.g., because the certificate can authoritatively handle the request, and the IP address is the same as they are on the same ingressgateway).

When that happens, according to section 9.1.2 istio should respond with a 421 indicating that the wrong connection was used and the origin was not found. This would instruct the browser to retry on a new connection, thus renegotiating TLS and presenting SNI and thus going down the non-wildcard certificate route and to a different gateway/virtual service and the correct service.

**Expected behavior**

Should return a 421 and the browser should re-connect and successfully find the resource. Instead a 404 is returned.

**Steps to reproduce the bug**

1. Create istio 1.1.1+ instance with one ingress gateway.
2. Create a DNS record a.example.com, and b.example.com both point to the ingress gateway.
3. Create a gateway named "a" for a.example.com that uses a.example.com server host, and has a wildcard certificate for \*.example.com.
4. Create a gateway named "b" for b.example.com that uses b.example.com server host and has a specific certificate b.example.com.
5. Create an app that hosts a static website with two files index.html and foobar.png. The index.html file should have an image tag that refers to an image `https://b.example.com/foobar.png` (e.g., `<img src="https://b.example.com/foobar.png">`)
6. Deploy the app twice to Kubernetes and attach virtual services for a.example.com to go to the app and b.example.com to go to the app (effectively a.example.com and b.example.com are both hosting the app with different certificates on the same IP address, where a is on a wildcard cert and b is not).
7. Visit <https://a.example.com/>, notice that you receive a 404 in Chrome and Firefox but not safari or opera.

**Version (include the output of `istioctl version --remote` and `kubectl version`)**

```
kubectl vclient version: version.BuildInfo{Version:"1.1.1", GitRevision:"2b1331886076df103179e3da5dc9077fed59c989", User:"root", Host:"7077232d-4c6c-11e9-813c-0a580a2c0506", GolangVersion:"go1.10.4", DockerHub:"docker.io/istio", BuildStatus:"Clean", GitTag:"1.1.0-17-g2b13318"}
apps-private-ingressgateway version: version.BuildInfo{Version:"", GitRevision:"", User:"", Host:"", GolangVersion:"", DockerHub:"", BuildStatus:"", GitTag:""}
apps-public-ingressgateway version: version.BuildInfo{Version:"", GitRevision:"", User:"", Host:"", GolangVersion:"", DockerHub:"", BuildStatus:"", GitTag:""}
citadel version: version.BuildInfo{Version:"1.1.2", GitRevision:"2b1331886076df103179e3da5dc9077fed59c989-dirty", User:"root", Host:"35adf5bb-5570-11e9-b00d-0a580a2c0205", GolangVersion:"go1.10.4", DockerHub:"docker.io/istio", BuildStatus:"Modified", GitTag:"1.1.1"}
galley version: version.BuildInfo{Version:"1.1.2", GitRevision:"2b1331886076df103179e3da5dc9077fed59c989-dirty", User:"root", Host:"35adf5bb-5570-11e9-b00d-0a580a2c0205", GolangVersion:"go1.10.4", DockerHub:"docker.io/istio", BuildStatus:"Modified", GitTag:"1.1.1"}
pilot version: version.BuildInfo{Version:"1.1.2", GitRevision:"2b1331886076df103179e3da5dc9077fed59c989-dirty", User:"root", Host:"35adf5bb-5570-11e9-b00d-0a580a2c0205", GolangVersion:"go1.10.4", DockerHub:"docker.io/istio", BuildStatus:"Modified", GitTag:"1.1.1"}
policy version: version.BuildInfo{Version:"1.1.2", GitRevision:"2b1331886076df103179e3da5dc9077fed59c989-dirty", User:"root", Host:"35adf5bb-5570-11e9-b00d-0a580a2c0205", GolangVersion:"go1.10.4", DockerHub:"docker.io/istio", BuildStatus:"Modified", GitTag:"1.1.1"}
sidecar-injector version: version.BuildInfo{Version:"1.1.2", GitRevision:"2b1331886076df103179e3da5dc9077fed59c989-dirty", User:"root", Host:"35adf5bb-5570-11e9-b00d-0a580a2c0205", GolangVersion:"go1.10.4", DockerHub:"docker.io/istio", BuildStatus:"Modified", GitTag:"1.1.1"}
telemetry version: version.BuildInfo{Version:"1.1.2", GitRevision:"2b1331886076df103179e3da5dc9077fed59c989-dirty", User:"root", Host:"35adf5bb-5570-11e9-b00d-0a580a2c0205", GolangVersion:"go1.10.4", DockerHub:"docker.io/istio", BuildStatus:"Modified", GitTag:"1.1.1"}
sites-private-ingressgateway version: version.BuildInfo{Version:"", GitRevision:"", User:"", Host:"", GolangVersion:"", DockerHub:"", BuildStatus:"", GitTag:""}
sites-public-ingressgateway version: version.BuildInfo{Version:"", GitRevision:"", User:"", Host:"", GolangVersion:"", DockerHub:"", BuildStatus:"", GitTag:""}

$ kubectl version
Client Version: version.Info{Major:"1", Minor:"10", GitVersion:"v1.10.4", GitCommit:"5ca598b4ba5abb89bb773071ce452e33fb66339d", GitTreeState:"clean", BuildDate:"2018-06-18T14:14:00Z", GoVersion:"go1.9.7", Compiler:"gc", Platform:"darwin/amd64"}
Server Version: version.Info{Major:"1", Minor:"11", GitVersion:"v1.11.5", GitCommit:"753b2dbc622f5cc417845f0ff8a77f539a4213ea", GitTreeState:"clean", BuildDate:"2018-11-26T14:31:35Z", GoVersion:"go1.10.3", Compiler:"gc", Platform:"linux/amd64"}

```

**How was Istio installed?**

Helm

**Environment where bug was observed (cloud vendor, OS, etc)**

AWS, with istio installed and running with an NLB ingress or as a nodeport terminating the TLS.

üëç20
## Metadata

### Assignees

* [![@lambdai](https://avatars.githubusercontent.com/u/209726?s=64&u=3ab502e5694ab26b44bd17e50e2024d9196e412d&v=4)lambdai](/lambdai)
### Labels

[area/networking](https://github.com/istio/istio/issues?q=state%3Aopen%20label%3A%22area%2Fnetworking%22)[lifecycle/staleproofIndicates a PR or issue has been deemed to be immune from becoming stale and/or automatically closed](https://github.com/istio/istio/issues?q=state%3Aopen%20label%3A%22lifecycle%2Fstaleproof%22)Indicates a PR or issue has been deemed to be immune from becoming stale and/or automatically closed
### Type

No type
### Projects

[Prioritization](https://github.com/orgs/istio/projects/14)

* Status

  P1

### Milestone

* [Nebulous FutureNo due date](https://github.com/istio/istio/milestone/4)
### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_6277a9b5_20250119_120107.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fistio%2Fistio%2Fissues%2F9429)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fistio%2Fistio%2Fissues%2F9429)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=istio%2Fistio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[istio](/istio)
/
**[istio](/istio/istio)**
Public

* [Notifications](/login?return_to=%2Fistio%2Fistio) You must be signed in to change notification settings
* [Fork
  7.8k](/login?return_to=%2Fistio%2Fistio)
* [Star
   36.4k](/login?return_to=%2Fistio%2Fistio)

* [Code](/istio/istio)
* [Issues
  452](/istio/istio/issues)
* [Pull requests
  46](/istio/istio/pulls)
* [Discussions](/istio/istio/discussions)
* [Actions](/istio/istio/actions)
* [Wiki](/istio/istio/wiki)
* [Security](/istio/istio/security)
* [Insights](/istio/istio/pulse)

Additional navigation options

* [Code](/istio/istio)
* [Issues](/istio/istio/issues)
* [Pull requests](/istio/istio/pulls)
* [Discussions](/istio/istio/discussions)
* [Actions](/istio/istio/actions)
* [Wiki](/istio/istio/wiki)
* [Security](/istio/istio/security)
* [Insights](/istio/istio/pulse)

# 404 NR when using browser on multiple ingress gateways¬†#9429

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[404 NR when using browser on multiple ingress gateways](#top)#9429Copy linkLabels[area/networking](https://github.com/istio/istio/issues?q=state%3Aopen%20label%3A%22area%2Fnetworking%22)![@yciabaud](https://avatars.githubusercontent.com/u/534649?u=6a20ee3241deb0f573eac59579efcb83e7ac4863&v=4&size=80)
## Description

![@yciabaud](https://avatars.githubusercontent.com/u/534649?u=6a20ee3241deb0f573eac59579efcb83e7ac4863&v=4&size=48)[yciabaud](https://github.com/yciabaud)opened [on Oct 19, 2018](https://github.com/istio/istio/issues/9429#issue-371999409)

**Describe the bug**

When using browsers (tested on multiple browsers, multiple OS, multiple devices and multiple connections), we are having many 404 NR responses when contacting our services on an additional ingress gateway.

The service is loading well every time I'm cleaning the browsers cache and when using command line clients.

Routing is done with hostname in separate gateway and virtual services configurations. All services are exposed on port 443 using different port names but the same TLS certificate per gateway.

Ingress log is printing the good hostname but envoy is not finding any routes.

**Expected behavior**

We expect to have the requests routed to the service or a way to find if there is something missing in the configuration.

**Steps to reproduce the bug**

* Install another ingress gateway using helm
* Deploy 2 services and expose it using a gateway with TLS on port 443
* Use a browser to access the services

**Version**

Kubernetes v1.10.5 on AWS (same issue on v1.9.9)

Calico

Istio: 1.0.2

**Installation**

Istio installed using helm chart with a first ingress gateway.

Second gateway installed using helm in a namespace.

Services installed using helm charts.

**Environment**

Kubernetes deployed on AWS using Kops with coreos images.

**Cluster state**

[istio-dump.tar.gz](https://github.com/istio/istio/files/2496351/istio-dump.tar.gz)

I could not dump pods and deployments due to private information in environment variables

üëç15
## Metadata

### Assignees

No one assigned

### Labels

[area/networking](https://github.com/istio/istio/issues?q=state%3Aopen%20label%3A%22area%2Fnetworking%22)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


