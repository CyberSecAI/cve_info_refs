=== Content from trac.ffmpeg.org_ba4d7902_20250119_122832.html ===


[![FFmpeg](/ffmpeg-logo.png)](https://ffmpeg.org)

Search:

* [Login](/login)
* [Preferences](/prefs)
* [Help/Guide](/wiki/TracGuide)
* [About Trac](/about)
* [Register](/register)
* [Forgot your password?](/reset_password)

* [Wiki](/wiki)
* [Timeline](/timeline)
* [View Tickets](/report)
* [Search](/search)
* [Tags](/tags)

## Context Navigation

* ![Up-vote](/chrome/vote/aupgray.png)+1![Down-vote](/chrome/vote/adowngray.png)
* ← [Previous Ticket](/ticket/8717 "Ticket #8717")
* [Next Ticket](/ticket/8719 "Ticket #8719") →

---

Opened [5 years ago](/timeline?from=2020-06-07T08%3A42%3A17Z&precision=second "See timeline at Jun 7, 2020, 8:42:17 AM")

Closed [5 years ago](/timeline?from=2020-07-10T22%3A43%3A28Z&precision=second "See timeline at Jul 10, 2020, 10:43:28 PM")

Last modified [5 years ago](/timeline?from=2020-07-11T10%3A53%3A13Z&precision=second "See timeline at Jul 11, 2020, 10:53:13 AM")

## [#8718](/ticket/8718) [closed](/query?status=closed) [defect](/query?status=!closed&type=defect) ([fixed](/query?resolution=fixed&status=closed))

# Heap buffer overflow in crash\_dnn\_execute\_layer\_pad due to integer overflow in memcpy

| Reported by: | [Assaf Sion](/query?reporter=assafsion&status=!closed) | Owned by: | [Guo Yejun](/query?owner=guoyejun&status=!closed) |
| --- | --- | --- | --- |
| Priority: | [important](/query?priority=important&status=!closed) | Component: | [avfilter](/query?component=avfilter&status=!closed) |
| Version: | [git-master](/query?status=!closed&version=git-master) | Keywords: | [dnn](/query?keywords=~dnn&status=!closed) [crash](/query?keywords=~crash&status=!closed) [SIGSEGV](/query?keywords=~SIGSEGV&status=!closed) |
| Cc: | [assafsion@gmaiil.com](/query?cc=~assafsion%40gmaiil.com&status=!closed), [yejun.guo@intel.com](/query?cc=~yejun.guo%40intel.com&status=!closed) | Blocked By: |  |
| Blocking: |  | Reproduced by developer: | [yes](/query?reproduced=1&status=!closed) |
| Analyzed by developer: | [no](/query?analyzed=0&status=!closed) |  |  |

## Description

This bug apply to all the 4 \*different\* memcpy calls exist in the function dnn\_execute\_layer\_pad. Calling to calculate\_operand\_data\_length to calculate the destination buffer size an integer overflow occurs. This could allow an attacker to control the address of the source and destination buffer inside the memcpy and to cause a read/write overflow. This is highly critical and could allow an attacker to execute code.

I compiled ffmpeg on Ubuntu 18.04 with the following configuration:

configuration: --cc=clang --extra-cflags='-O0 -g3 -fsanitize=address -Wno-error -fPIC' --extra-ldflags='-O0 -g3 -fsanitize=address -Wno-error -fPIC' --enable-debug --disable-asm --disable-optimizations --disable-shared --enable-libopenjpeg --enable-gpl --enable-libass --enable-libfdk-aac --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree

the bug could be reproduced while running the following command line:

ffmpeg -v debug -i 10.jpg -vf format=rgb24,sr=dnn\_backend=native:model=crash\_dnn\_execute\_layer\_pad\_3 derain.jpg

the output after running the command:

ffmpeg version N-97806-gf603d10b1e Copyright (c) 2000-2020 the FFmpeg developers

> built with clang version 6.0.0-1ubuntu2 (tags/RELEASE\_600/final)
>
> configuration: --cc=clang --extra-cflags='-O0 -g3 -fsanitize=address -Wno-error -fPIC' --extra-ldflags='-O0 -g3 -fsanitize=address -Wno-error -fPIC' --enable-debug --disable-asm --disable-optimizations --disable-shared --enable-libopenjpeg --enable-gpl --enable-libass --enable-libfdk-aac --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree
>
> libavutil 56. 45.100 / 56. 45.100
>
> libavcodec 58. 84.100 / 58. 84.100
>
> libavformat 58. 43.100 / 58. 43.100
>
> libavdevice 58. 9.103 / 58. 9.103
>
> libavfilter 7. 81.100 / 7. 81.100
>
> libswscale 5. 6.101 / 5. 6.101
>
> libswresample 3. 6.100 / 3. 6.100
>
> libpostproc 55. 6.100 / 55. 6.100

Splitting the commandline.

Reading option '-v' ... matched as option 'v' (set logging level) with argument 'debug'.

Reading option '-i' ... matched as input url with argument '10.jpg'.

Reading option '-vf' ... matched as option 'vf' (set video filters) with argument 'format=rgb24,sr=dnn\_backend=native:model=crash\_dnn\_execute\_layer\_pad\_3'.

Reading option 'derain.jpg' ... matched as output url.

Finished splitting the commandline.

Parsing a group of options: global .

Applying option v (set logging level) with argument debug.

Successfully parsed a group of options.

Parsing a group of options: input url 10.jpg.

Successfully parsed a group of options.

Opening an input file: 10.jpg.

[NULL @ 0x61b000000080] Opening '10.jpg' for reading

[file @ 0x60c000000040] Setting default whitelist 'file,crypto,data'

[image2 @ 0x61b000000080] Format image2 probed with size=2048 and score=50

[image2 @ 0x61b000000080] Before avformat\_find\_stream\_info() pos: 0 bytes read:18522 seeks:0 nb\_streams:1

[mjpeg @ 0x619000000580] marker=d8 avail\_size\_in\_buf=18520

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] marker=e0 avail\_size\_in\_buf=18518

[mjpeg @ 0x619000000580] marker parser used 16 bytes (128 bits)

[mjpeg @ 0x619000000580] marker=e1 avail\_size\_in\_buf=18500

[mjpeg @ 0x619000000580] marker parser used 12833 bytes (102664 bits)

[mjpeg @ 0x619000000580] marker=db avail\_size\_in\_buf=5664

[mjpeg @ 0x619000000580] index=0

[mjpeg @ 0x619000000580] qscale[0]: 2

[mjpeg @ 0x619000000580] marker parser used 67 bytes (536 bits)

[mjpeg @ 0x619000000580] marker=db avail\_size\_in\_buf=5595

[mjpeg @ 0x619000000580] index=1

[mjpeg @ 0x619000000580] qscale[1]: 8

[mjpeg @ 0x619000000580] marker parser used 67 bytes (536 bits)

[mjpeg @ 0x619000000580] marker=c0 avail\_size\_in\_buf=5526

[mjpeg @ 0x619000000580] Changing bps from 0 to 8

[mjpeg @ 0x619000000580] sof0: picture: 432x173

[mjpeg @ 0x619000000580] component 0 1:1 id: 0 quant:0

[mjpeg @ 0x619000000580] component 1 1:1 id: 1 quant:1

[mjpeg @ 0x619000000580] component 2 1:1 id: 2 quant:1

[mjpeg @ 0x619000000580] pix fmt id 11111100

[mjpeg @ 0x619000000580] Format yuvj444p chosen by get\_format().

[mjpeg @ 0x619000000580] marker parser used 17 bytes (136 bits)

[mjpeg @ 0x619000000580] marker=c4 avail\_size\_in\_buf=5507

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] marker=c4 avail\_size\_in\_buf=5478

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] marker=c4 avail\_size\_in\_buf=5420

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] marker=c4 avail\_size\_in\_buf=5393

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] escaping removed 16 bytes

[mjpeg @ 0x619000000580] marker=da avail\_size\_in\_buf=5360

[mjpeg @ 0x619000000580] marker parser used 5344 bytes (42752 bits)

[mjpeg @ 0x619000000580] marker=d9 avail\_size\_in\_buf=0

[mjpeg @ 0x619000000580] decode frame unused 0 bytes

[image2 @ 0x61b000000080] After avformat\_find\_stream\_info() pos: 18522 bytes read:18522 seeks:0 frames:1

Input #0, image2, from '10.jpg':

> Duration: 00:00:00.04, start: 0.000000, bitrate: 3704 kb/s
>
>
> > Stream #0:0, 1, 1/25: Video: mjpeg (Baseline), 1 reference frame, yuvj444p(pc, bt470bg/unknown/unknown, center), 432x173 [SAR 96:96 DAR 432:173], 0/1, 25 tbr, 25 tbn, 25 tbc

Successfully opened the file.

Parsing a group of options: output url derain.jpg.

Applying option vf (set video filters) with argument format=rgb24,sr=dnn\_backend=native:model=crash\_dnn\_execute\_layer\_pad\_3.

Successfully parsed a group of options.

Opening an output file: derain.jpg.

Successfully opened the file.

Stream mapping:

> Stream #0:0 -> #0:0 (mjpeg (native) -> mjpeg (native))

Press [q] to stop, [?](/ticket/8718 "#8718: defect: Heap buffer overflow in crash_dnn_execute_layer_pad due to integer ... (closed: fixed)") for help

cur\_dts is invalid st:0 (0) [init:0 i\_done:0 finish:0] (this is harmless if it occurs once at the start per stream)

[mjpeg @ 0x619000000a80] marker=d8 avail\_size\_in\_buf=18520

[mjpeg @ 0x619000000a80] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000a80] marker=e0 avail\_size\_in\_buf=18518

[mjpeg @ 0x619000000a80] marker parser used 16 bytes (128 bits)

[mjpeg @ 0x619000000a80] marker=e1 avail\_size\_in\_buf=18500

[mjpeg @ 0x619000000a80] marker parser used 12833 bytes (102664 bits)

[mjpeg @ 0x619000000a80] marker=db avail\_size\_in\_buf=5664

[mjpeg @ 0x619000000a80] index=0

[mjpeg @ 0x619000000a80] qscale[0]: 2

[mjpeg @ 0x619000000a80] marker parser used 67 bytes (536 bits)

[mjpeg @ 0x619000000a80] marker=db avail\_size\_in\_buf=5595

[mjpeg @ 0x619000000a80] index=1

[mjpeg @ 0x619000000a80] qscale[1]: 8

[mjpeg @ 0x619000000a80] marker parser used 67 bytes (536 bits)

[mjpeg @ 0x619000000a80] marker=c0 avail\_size\_in\_buf=5526

[mjpeg @ 0x619000000a80] sof0: picture: 432x173

[mjpeg @ 0x619000000a80] component 0 1:1 id: 0 quant:0

[mjpeg @ 0x619000000a80] component 1 1:1 id: 1 quant:1

[mjpeg @ 0x619000000a80] component 2 1:1 id: 2 quant:1

[mjpeg @ 0x619000000a80] pix fmt id 11111100

[mjpeg @ 0x619000000a80] Format yuvj444p chosen by get\_format().

[mjpeg @ 0x619000000a80] marker parser used 17 bytes (136 bits)

[mjpeg @ 0x619000000a80] marker=c4 avail\_size\_in\_buf=5507

[mjpeg @ 0x619000000a80] class=0 index=0 nb\_codes=8

[mjpeg @ 0x619000000a80] marker parser used 27 bytes (216 bits)

[mjpeg @ 0x619000000a80] marker=c4 avail\_size\_in\_buf=5478

[mjpeg @ 0x619000000a80] class=1 index=0 nb\_codes=226

[mjpeg @ 0x619000000a80] marker parser used 56 bytes (448 bits)

[mjpeg @ 0x619000000a80] marker=c4 avail\_size\_in\_buf=5420

[mjpeg @ 0x619000000a80] class=0 index=1 nb\_codes=6

[mjpeg @ 0x619000000a80] marker parser used 25 bytes (200 bits)

[mjpeg @ 0x619000000a80] marker=c4 avail\_size\_in\_buf=5393

[mjpeg @ 0x619000000a80] class=1 index=1 nb\_codes=82

[mjpeg @ 0x619000000a80] marker parser used 31 bytes (248 bits)

[mjpeg @ 0x619000000a80] escaping removed 16 bytes

[mjpeg @ 0x619000000a80] marker=da avail\_size\_in\_buf=5360

[mjpeg @ 0x619000000a80] component: 0

[mjpeg @ 0x619000000a80] component: 1

[mjpeg @ 0x619000000a80] component: 2

[mjpeg @ 0x619000000a80] marker parser used 5343 bytes (42742 bits)

[mjpeg @ 0x619000000a80] marker=d9 avail\_size\_in\_buf=0

[mjpeg @ 0x619000000a80] decode frame unused 0 bytes

detected 32 logical cores

[Parsed\_format\_0 @ 0x610000000040] Setting 'pix\_fmts' to value 'rgb24'

[Parsed\_sr\_1 @ 0x610000000140] Setting 'dnn\_backend' to value 'native'

[Parsed\_sr\_1 @ 0x610000000140] Setting 'model' to value 'crash\_dnn\_execute\_layer\_pad\_3'

[file @ 0x60d000000040] Setting default whitelist 'file,crypto,data'

[AVIOContext @ 0x6120000001c0] Statistics: 145 bytes read, 0 seeks

[graph 0 input from stream 0:0 @ 0x610000000240] Setting 'video\_size' to value '432x173'

[graph 0 input from stream 0:0 @ 0x610000000240] Setting 'pix\_fmt' to value '14'

[graph 0 input from stream 0:0 @ 0x610000000240] Setting 'time\_base' to value '1/25'

[graph 0 input from stream 0:0 @ 0x610000000240] Setting 'pixel\_aspect' to value '96/96'

[graph 0 input from stream 0:0 @ 0x610000000240] Setting 'frame\_rate' to value '25/1'

[graph 0 input from stream 0:0 @ 0x610000000240] w:432 h:173 pixfmt:yuvj444p tb:1/25 fr:25/1 sar:96/96

[format @ 0x610000000440] Setting 'pix\_fmts' to value 'yuvj420p|yuvj422p|yuvj444p'

[auto\_scaler\_0 @ 0x610000001d40] Setting 'flags' to value 'bicubic'

[auto\_scaler\_0 @ 0x610000001d40] w:iw h:ih flags:'bicubic' interl:0

[Parsed\_format\_0 @ 0x610000000040] auto-inserting filter 'auto\_scaler\_0' between the filter 'graph 0 input from stream 0:0' and the filter 'Parsed\_format\_0'

[auto\_scaler\_1 @ 0x610000002a40] Setting 'flags' to value 'bicubic'

[auto\_scaler\_1 @ 0x610000002a40] w:iw h:ih flags:'bicubic' interl:0

[Parsed\_sr\_1 @ 0x610000000140] auto-inserting filter 'auto\_scaler\_1' between the filter 'Parsed\_format\_0' and the filter 'Parsed\_sr\_1'

[auto\_scaler\_2 @ 0x610000003740] Setting 'flags' to value 'bicubic'

[auto\_scaler\_2 @ 0x610000003740] w:iw h:ih flags:'bicubic' interl:0

[format @ 0x610000000440] auto-inserting filter 'auto\_scaler\_2' between the filter 'Parsed\_sr\_1' and the filter 'format'

[AVFilterGraph @ 0x6090000006e0] query\_formats: 5 queried, 1 merged, 3 already done, 0 delayed

[auto\_scaler\_1 @ 0x610000002a40] picking yuv444p out of 6 ref:rgb24 alpha:0

[auto\_scaler\_2 @ 0x610000003740] picking yuvj444p out of 3 ref:yuv444p alpha:0

[swscaler @ 0x62f000000400] deprecated pixel format used, make sure you did set range correctly

[swscaler @ 0x62f000000400] Forcing full internal H chroma due to input having non subsampled chroma

[auto\_scaler\_0 @ 0x610000001d40] w:432 h:173 fmt:yuvj444p sar:96/96 -> w:432 h:173 fmt:rgb24 sar:1/1 flags:0x4

[auto\_scaler\_1 @ 0x610000002a40] w:432 h:173 fmt:rgb24 sar:1/1 -> w:432 h:173 fmt:yuv444p sar:1/1 flags:0x4

AddressSanitizer:DEADLYSIGNAL

=================================================================

==95910==ERROR: AddressSanitizer: SEGV on unknown address 0x7fff2cda1a7c (pc 0x7ffff2d53595 bp 0x7fffffff6b00 sp 0x7fffffff6288 T0)

==95910==The signal is caused by a WRITE memory access.

> #0 0x7ffff2d53594 /build/glibc-OTsEL5/glibc-2.27/string/../sysdeps/x86\_64/multiarch/memmove-vec-unaligned-erms.S:307
>
> [#1](/ticket/1 "#1: task: Test (closed: invalid)") 0x4e215d in asan\_memcpy (/home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/ffmpeg\_g+0x4e215d)
>
> [#2](/ticket/2 "#2: defect: Colour artefacts in wmv3 (closed: fixed)") 0x1318940 in dnn\_execute\_layer\_pad /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/dnn/dnn\_backend\_native\_layer\_pad.c:124:17
>
> [#3](/ticket/3 "#3: defect: Auto-detection of Sonic Foundry Soft Encode AC3 files with a 16-byte ... (closed: fixed)") 0x130f6ee in ff\_dnn\_execute\_model\_native /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/dnn/dnn\_backend\_native.c:276:9
>
> [#4](/ticket/4 "#4: defect: MP3 file with unsynchronised id3v2 tag is not read correctly (closed: invalid)") 0xe5a10f in config\_props /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/vf\_sr.c:133:14
>
> [#5](/ticket/5 "#5: defect: jp2k muxed into mov by FFmpeg can't be played by QuickTime (reopened)") 0x6c1d38 in avfilter\_config\_links /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/avfilter.c:369:28
>
> [#6](/ticket/6 "#6: defect: Alsa output channel order is wrong (closed: fixed)") 0x6c08bd in avfilter\_config\_links /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/avfilter.c:307:24
>
> [#7](/ticket/7 "#7: defect: seeking back to beginning of file sometimes fails badly (closed: fixed)") 0x6c08bd in avfilter\_config\_links /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/avfilter.c:307:24
>
> [#8](/ticket/8 "#8: defect: Matroska muxers define unusable codec_tag properties (closed: fixed)") 0x6c08bd in avfilter\_config\_links /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/avfilter.c:307:24
>
> [#9](/ticket/9 "#9: defect: libswscale MMX2 giving videos a pink lined overlay (closed: needs_more_info)") 0x6d1dbc in graph\_config\_links /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/avfiltergraph.c:261:24
>
> [#10](/ticket/10 "#10: defect: rtsp method PLAY fails (status_code = 400) with some locales ... (closed: fixed)") 0x6d0bb6 in avfilter\_graph\_config /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/avfiltergraph.c:1279:16
>
> [#11](/ticket/11 "#11: defect: Some .ape files play only silence in ffplay (closed: fixed)") 0x568e88 in configure\_filtergraph /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg\_filter.c:1106:16
>
> [#12](/ticket/12 "#12: enhancement: expand nut file format to encode 'bits_per_coded_sample' (closed: wontfix)") 0x5d66a3 in ifilter\_send\_frame /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:2166:15
>
> [#13](/ticket/13 "#13: defect: demuxing ogg track produces invalid ogg on 3rd pass (closed: fixed)") 0x5d5669 in send\_frame\_to\_filters /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:2247:15
>
> [#14](/ticket/14 "#14: defect: Crash when reading mkv file (closed: fixed)") 0x5d0f2b in decode\_video /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:2446:11
>
> [#15](/ticket/15 "#15: defect: Initial I-frame in ogg/theora file is not decoded (closed: fixed)") 0x59ba41 in process\_input\_packet /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:2600:19
>
> [#16](/ticket/16 "#16: defect: \"non-monotonically increasing dts\" because of corrupt rtptime (closed: fixed)") 0x5be936 in process\_input /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:4491:5
>
> [#17](/ticket/17 "#17: defect: FFPlay set different pts from ffmpeg for AVFilterBufferRef (closed: invalid)") 0x597af6 in transcode\_step /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:4611:11
>
> [#18](/ticket/18 "#18: enhancement: support lvf h264 file (closed: fixed)") 0x590da5 in transcode /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:4665:15
>
> [#19](/ticket/19 "#19: defect: MVs not available (closed: invalid)") 0x58efda in main /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:4866:9
>
> [#20](/ticket/20 "#20: defect: Crash when encoding to tif with high value for -ss (closed: fixed)") 0x7ffff2cb9b96 in libc\_start\_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
>
> [#21](/ticket/21 "#21: defect: Segfault converting m2t file with ac3 audio track when number of audio ... (closed: fixed)") 0x423839 in \_start (/home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/ffmpeg\_g+0x423839)

AddressSanitizer can not provide additional info.

SUMMARY: AddressSanitizer: SEGV /build/glibc-OTsEL5/glibc-2.27/string/../sysdeps/x86\_64/multiarch/memmove-vec-unaligned-erms.S:307

==95910==ABORTING

[1] + Done "/usr/bin/gdb" --interpreter=mi --tty=${DbgTerm} 0<"/tmp/Microsoft-MIEngine-In-l1la0r3g.zlb" 1>"/tmp/Microsoft-MIEngine-Out-kftego55.fig"

### Attachments (2)

[10.jpg](/attachment/ticket/8718/10.jpg "View attachment")[​](/raw-attachment/ticket/8718/10.jpg "Download")
(18.1 KB
) - added by Assaf Sion [5 years ago](/timeline?from=2020-06-07T08%3A42%3A45Z&precision=second "See timeline at Jun 7, 2020, 8:42:45 AM").
[crash\_dnn\_execute\_layer\_pad\_3](/attachment/ticket/8718/crash_dnn_execute_layer_pad_3 "View attachment")[​](/raw-attachment/ticket/8718/crash_dnn_execute_layer_pad_3 "Download")
(145 bytes
) - added by Assaf Sion [5 years ago](/timeline?from=2020-06-07T09%3A06%3A19Z&precision=second "See timeline at Jun 7, 2020, 9:06:19 AM").

Download all attachments as:
[.zip](/zip-attachment/ticket/8718/)

Oldest first

Newest first

Threaded

Show comments

Show property changes

### Change History (11)

### by Assaf Sion, [5 years ago](/timeline?from=2020-06-07T08%3A42%3A45Z&precision=second "See timeline at Jun 7, 2020, 8:42:45 AM")

| Attachment: | [*10.jpg*](/attachment/ticket/8718/10.jpg)[​](/raw-attachment/ticket/8718/10.jpg "Download") added |
| --- | --- |

### [comment:1](#comment:1) by Assaf Sion, [5 years ago](/timeline?from=2020-06-07T09%3A05%3A41Z&precision=second "See timeline at Jun 7, 2020, 9:05:41 AM")

| Component: | undetermined → avfilter |
| --- | --- |

### by Assaf Sion, [5 years ago](/timeline?from=2020-06-07T09%3A06%3A19Z&precision=second "See timeline at Jun 7, 2020, 9:06:19 AM")

| Attachment: | [*crash\_dnn\_execute\_layer\_pad\_3*](/attachment/ticket/8718/crash_dnn_execute_layer_pad_3)[​](/raw-attachment/ticket/8718/crash_dnn_execute_layer_pad_3 "Download") added |
| --- | --- |

### [comment:2](#comment:2) by Carl Eugen Hoyos, [5 years ago](/timeline?from=2020-06-08T19%3A42%3A57Z&precision=second "See timeline at Jun 8, 2020, 7:42:57 PM")

| Keywords: | dnn crash SIGSEGV added |
| --- | --- |
| Priority: | critical → important |
| Reproduced by developer: | set |
| Status: | new → open |

### [comment:3](#comment:3) by Assaf Sion, [5 years ago](/timeline?from=2020-06-16T09%3A03%3A03Z&precision=second "See timeline at Jun 16, 2020, 9:03:03 AM")

Any updates regarding the bug?

We at CyberArk wait for the patch so we could report this bug and assign a CVE for this.

### follow-ups: [6](#comment:6) [7](#comment:7) [comment:4](#comment:4) by Assaf Sion, [5 years ago](/timeline?from=2020-06-23T12%3A56%3A40Z&precision=second "See timeline at Jun 23, 2020, 12:56:40 PM")

| Owner: | set to Guo Yejun |
| --- | --- |

### follow-up: [9](#comment:9) [comment:5](#comment:5) by Assaf Sion, [5 years ago](/timeline?from=2020-06-23T12%3A57%3A26Z&precision=second "See timeline at Jun 23, 2020, 12:57:26 PM")

This bug could lead to code execution and fixing this bug is highly important.

### in reply to: [4](#comment:4) [comment:6](#comment:6) by Guo Yejun, [5 years ago](/timeline?from=2020-07-06T01%3A43%3A39Z&precision=second "See timeline at Jul 6, 2020, 1:43:39 AM")

| Cc: | yejun.guo@intel.com added |
| --- | --- |

Replying to [assafsion](/ticket/8718#comment:4 "Comment 4"): sorry, i do not receive an email for this, and i missed this issue, will look at it now.

### in reply to: [4](#comment:4) [comment:7](#comment:7) by Guo Yejun, [5 years ago](/timeline?from=2020-07-06T01%3A43%3A39Z&precision=second "See timeline at Jul 6, 2020, 1:43:39 AM")

| Cc: | yejun.guo@intel.com added |
| --- | --- |

Replying to [assafsion](/ticket/8718#comment:4 "Comment 4"): sorry, i do not receive an email for this, and i missed this issue, will look at it now.

### [comment:8](#comment:8) by Carl Eugen Hoyos, [5 years ago](/timeline?from=2020-07-10T22%3A43%3A28Z&precision=second "See timeline at Jul 10, 2020, 10:43:28 PM")

| Resolution: | → fixed |
| --- | --- |
| Status: | open → closed |

Fixed by Reimar in [584f396132aa19d21bb1e38ad9a5d428869290cb](/changeset/584f396132aa19d21bb1e38ad9a5d428869290cb/ffmpeg "dnn_backend_native: Add overflow check for length calculation.

We ...")

### in reply to: [5](#comment:5) [comment:9](#comment:9) by Carl Eugen Hoyos, [5 years ago](/timeline?from=2020-07-11T10%3A52%3A55Z&precision=second "See timeline at Jul 11, 2020, 10:52:55 AM")

Replying to [assafsion](/ticket/8718#comment:5 "Comment 5"):

> This bug could lead to code execution and fixing this bug is highly important.

Since other people may read this:

This bug can lead to code execution if the attacker already has full control over the `ffmpeg` command line. If an attacker has full control over the `ffmpeg` command line, the system is already compromised independently of this bug.

Last edited [5 years ago](/timeline?from=2020-07-11T10%3A53%3A13Z&precision=second "See timeline at Jul 11, 2020, 10:53:13 AM") by Carl Eugen Hoyos ([previous](/ticket/8718?cnum_hist=9&cversion=0#comment:9))
([diff](/ticket/8718?action=comment-diff&cnum=9&version=1))

**Note:**
See [TracTickets](/wiki/TracTickets)
for help on using tickets.

### Download in other formats:

* [RSS Feed](/ticket/8718?format=rss)
* [Comma-delimited Text](/ticket/8718?format=csv)
* [Tab-delimited Text](/ticket/8718?format=tab)

---

[![Trac Powered](/chrome/common/trac_logo_mini.png)](https://trac.edgewall.org/)

Powered by [**Trac 1.6**](/about)

By [Edgewall Software](http://www.edgewall.org/)
.

Visit the Trac open source project at
<http://trac.edgewall.org/>


