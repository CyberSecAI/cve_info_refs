=== Content from github.com_3f32b985_20250119_132404.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fnifi%2Fpull%2F4208)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fnifi%2Fpull%2F4208)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=apache%2Fnifi)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apache](/apache)
/
**[nifi](/apache/nifi)**
Public

* [Notifications](/login?return_to=%2Fapache%2Fnifi) You must be signed in to change notification settings
* [Fork
  2.7k](/login?return_to=%2Fapache%2Fnifi)
* [Star
   5k](/login?return_to=%2Fapache%2Fnifi)

* [Code](/apache/nifi)
* [Pull requests
  23](/apache/nifi/pulls)
* [Actions](/apache/nifi/actions)
* [Security](/apache/nifi/security)
* [Insights](/apache/nifi/pulse)

Additional navigation options

* [Code](/apache/nifi)
* [Pull requests](/apache/nifi/pulls)
* [Actions](/apache/nifi/actions)
* [Security](/apache/nifi/security)
* [Insights](/apache/nifi/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fapache%2Fnifi%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fapache%2Fnifi%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in th… #4208

 Closed

[rfellows](/rfellows)
wants to merge
3
commits into
[apache:master](/apache/nifi/tree/master "apache/nifi:master")
from
[rfellows:NIFI-7358-estimatedTimeToBackPressureSorting](/rfellows/nifi/tree/NIFI-7358-estimatedTimeToBackPressureSorting "rfellows/nifi:NIFI-7358-estimatedTimeToBackPressureSorting")

 Closed

# [[NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in th…](#top) #4208

[rfellows](/rfellows)
wants to merge
3
commits into
[apache:master](/apache/nifi/tree/master "apache/nifi:master")
from
[rfellows:NIFI-7358-estimatedTimeToBackPressureSorting](/rfellows/nifi/tree/NIFI-7358-estimatedTimeToBackPressureSorting "rfellows/nifi:NIFI-7358-estimatedTimeToBackPressureSorting")

[Conversation
1](/apache/nifi/pull/4208)
[Commits
3](/apache/nifi/pull/4208/commits)
[Checks
0](/apache/nifi/pull/4208/checks)
[Files changed](/apache/nifi/pull/4208/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![rfellows](https://avatars.githubusercontent.com/u/713866?s=60&v=4)](/rfellows)

Copy link

Contributor

### @rfellows **[rfellows](/rfellows)** commented [Apr 13, 2020](#issue-599170137)

…e Connection summary table does not work properly

Thank you for submitting a contribution to Apache NiFi.

Please provide a short description of the PR here:

#### Description of PR

fixes bug [NIFI-7358](https://issues.apache.org/jira/browse/NIFI-7358)

In order to streamline the review of the contribution we ask you

to ensure the following steps have been taken:

### For all changes:

* Is there a JIRA ticket associated with this PR? Is it referenced

  in the commit message?
* Does your PR title start with **[NIFI-XXXX](https://issues.apache.org/jira/browse/NIFI-XXXX)** where XXXX is the JIRA number you are trying to resolve? Pay particular attention to the hyphen "-" character.
* Has your PR been rebased against the latest commit within the target branch (typically `master`)?
* Is your initial contribution a single, squashed commit? *Additional commits in response to PR reviewer feedback should be made on this branch and pushed to allow change tracking. Do not `squash` or use `--force` when pushing to allow for clean monitoring of changes.*

### For code changes:

* Have you ensured that the full suite of tests is executed via `mvn -Pcontrib-check clean install` at the root `nifi` folder?
* Have you written or updated unit tests to verify your changes?
* Have you verified that the full build is successful on both JDK 8 and JDK 11?
* If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under [ASF 2.0](http://www.apache.org/legal/resolved.html#category-a)?
* If applicable, have you updated the `LICENSE` file, including the main `LICENSE` file under `nifi-assembly`?
* If applicable, have you updated the `NOTICE` file, including the main `NOTICE` file found under `nifi-assembly`?
* If adding new Properties, have you added `.displayName` in addition to .name (programmatic access) for each of the new properties?

### For documentation related changes:

* Have you ensured that format looks appropriate for the output in which it is rendered?

### Note:

Please ensure that once the PR is submitted, you check travis-ci for build issues and submit an update to your PR as soon as possible.

Sorry, something went wrong.

All reactions

[![@rfellows](https://avatars.githubusercontent.com/u/713866?s=40&v=4)](/rfellows)

`[[NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in th…](/apache/nifi/pull/4208/commits/310ba4566a9d0ae6ebcc49401f6d32a814080db3 "[NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in the Connection summary table does not work properly")`
 …

`[310ba45](/apache/nifi/pull/4208/commits/310ba4566a9d0ae6ebcc49401f6d32a814080db3)`

```
…e Connection summary table does not work properly
```

 [![@rfellows](https://avatars.githubusercontent.com/u/713866?s=40&v=4)](/rfellows)
[rfellows](/rfellows)
requested a review
from [mcgilman](/mcgilman)
[April 13, 2020 22:21](#event-3228771368)

[![@rfellows](https://avatars.githubusercontent.com/u/713866?s=40&v=4)](/rfellows)

`[fix style issues](/apache/nifi/pull/4208/commits/c59c4a5b6c1bfadb5fb2f5ad1bcf8f370b3d25cb "fix style issues")`

`[c59c4a5](/apache/nifi/pull/4208/commits/c59c4a5b6c1bfadb5fb2f5ad1bcf8f370b3d25cb)`

[![@mcgilman](https://avatars.githubusercontent.com/u/123395?s=80&u=111c426314960be512494a2d2e0c4f4a3acf6b19&v=4)](/mcgilman)

Copy link

Contributor

### **[mcgilman](/mcgilman)** commented [Apr 14, 2020](#issuecomment-613419685)

| Will review... |
| --- |

All reactions

Sorry, something went wrong.

[![@rfellows](https://avatars.githubusercontent.com/u/713866?s=40&v=4)](/rfellows)

`[review feedback](/apache/nifi/pull/4208/commits/bda8fb87f848779b2f6edb7945e9ff4245ac133b "review feedback")`

`[bda8fb8](/apache/nifi/pull/4208/commits/bda8fb87f848779b2f6edb7945e9ff4245ac133b)`

[![@asfgit](https://avatars.githubusercontent.com/u/1341245?s=40&u=230749e8b7b73d9ff1377e17be5b3722e139350d&v=4)](/asfgit)
[asfgit](/asfgit)
closed this
in
`[c263daf](/apache/nifi/commit/c263daf20ba534aaca435826b21435c529a05505)`
[Apr 15, 2020](#event-3235659245)

[driesva](/driesva)
pushed a commit
to driesva/nifi
that referenced
this pull request
[Mar 19, 2021](#ref-commit-eb20173)
[![@rfellows](https://avatars.githubusercontent.com/u/713866?s=40&v=4)](/rfellows) [![@driesva](https://avatars.githubusercontent.com/u/29454303?s=40&v=4)](/driesva)

`[[NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in th…](/driesva/nifi/commit/eb20173ee4b2beeee65e416dc336a7c1021d8f4a "[NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in the Connection summary table does not work properly
- fix style issues
- review feedback

This closes #4208")`
…

`[eb20173](/driesva/nifi/commit/eb20173ee4b2beeee65e416dc336a7c1021d8f4a)`

```
…e Connection summary table does not work properly

- fix style issues
- review feedback

This closes [apache#4208](https://github.com/apache/nifi/pull/4208)
```

[hoavho](/hoavho)
added a commit
to hoavho/nifi
that referenced
this pull request
[Jul 19, 2023](#ref-commit-f35a66b)
[![@hoavho](https://avatars.githubusercontent.com/u/4956522?s=40&u=acb00ef5a217afb38f5729dce7c1ec0356efb015&v=4)](/hoavho) [![@pvillard31](https://avatars.githubusercontent.com/u/11541012?s=40&u=4f834754a4931174d3e6881c2a34a0f9a2f31d4a&v=4)](/pvillard31)
[![@alopresto](https://avatars.githubusercontent.com/u/798465?s=40&u=4ea6c3f9f23e27891f467e3b2109275ee81bc655&v=4)](/alopresto) [![@joewitt](https://avatars.githubusercontent.com/u/3057465?s=40&u=76c62064d635c980900509d92184633e71765392&v=4)](/joewitt) [![@bbende](https://avatars.githubusercontent.com/u/605416?s=40&u=e2dbb3997e14da8407f527c0d2163bbf15a38dc8&v=4)](/bbende) [![@mattyb149](https://avatars.githubusercontent.com/u/2124747?s=40&v=4)](/mattyb149) [![@taz1988](https://avatars.githubusercontent.com/u/227213?s=40&v=4)](/taz1988) [![@woutifier-t](https://avatars.githubusercontent.com/u/59732662?s=40&v=4)](/woutifier-t) [![@MatthewKnight-NG](https://avatars.githubusercontent.com/u/4106068?s=40&u=3c6096e6d6368aa26ba25c4a3c79f545ed675c40&v=4)](/MatthewKnight-NG) [![@natural](https://avatars.githubusercontent.com/u/146692?s=40&u=36e3908b251a7b1c9966d75f9a8a27a32b4357e5&v=4)](/natural) [![@YolandaMDavis](https://avatars.githubusercontent.com/u/1371858?s=40&u=416bc67d1551b941b048c62fddf3e3694c620905&v=4)](/YolandaMDavis) [![@przemekd](https://avatars.githubusercontent.com/u/1896041?s=40&v=4)](/przemekd) [![@shawnweeks](https://avatars.githubusercontent.com/u/9768773?s=40&v=4)](/shawnweeks) [![@jfrazee](https://avatars.githubusercontent.com/u/47344?s=40&v=4)](/jfrazee) [![@jtstorck](https://avatars.githubusercontent.com/u/19271493?s=40&u=ecd6515c6f21841621880b15f39b55f916202daf&v=4)](/jtstorck) [![@karthik-kadajji](https://avatars.githubusercontent.com/u/60779081?s=40&v=4)](/karthik-kadajji) [![@mtien-apache](https://avatars.githubusercontent.com/u/56892372?s=40&v=4)](/mtien-apache) [![@eduardofontes](https://avatars.githubusercontent.com/u/3923945?s=40&u=d8f724b522b157ff1768b2987cfe6211e2451728&v=4)](/eduardofontes) [![@ottobackwards](https://avatars.githubusercontent.com/u/1111551?s=40&u=e10e14eca90eb977d01c7e8bb5111070a5b05b7a&v=4)](/ottobackwards) [![@turcsanyip](https://avatars.githubusercontent.com/u/35004384?s=40&v=4)](/turcsanyip) [![@markap14](https://avatars.githubusercontent.com/u/184268?s=40&v=4)](/markap14) [![@kevdoran](https://avatars.githubusercontent.com/u/5102332?s=40&u=d38442530c91e8e4d8a5fbd9d0b3af8d281cc654&v=4)](/kevdoran) [![@markobean](https://avatars.githubusercontent.com/u/16822728?s=40&u=f1e25a094a6e3b665af5062ed7e33f70a94446f3&v=4)](/markobean) [![@MikeThomsen](https://avatars.githubusercontent.com/u/108184?s=40&u=7088541dba934c26122c7986230cb3ce0e698746&v=4)](/MikeThomsen) [![@andrewmlim](https://avatars.githubusercontent.com/u/18287533?s=40&u=57f897e7341e08a1ec8e317bb1d84cea67139a80&v=4)](/andrewmlim) [![@kotarot](https://avatars.githubusercontent.com/u/1787125?s=40&u=191e9cceaef18ad9f0ea52baaba384b01956fe5d&v=4)](/kotarot) [![@thenatog](https://avatars.githubusercontent.com/u/38888042?s=40&v=4)](/thenatog) [![@m-hogue](https://avatars.githubusercontent.com/u/7054178?s=40&u=36fbcd671de60415e266136da83ea62e7f08cf0a&v=4)](/m-hogue) [![@tpalfy](https://avatars.githubusercontent.com/u/53442425?s=40&v=4)](/tpalfy) [![@phrocker](https://avatars.githubusercontent.com/u/1781585?s=40&u=0b3bd4ec67f56a61f369e3831fb02e813f24951d&v=4)](/phrocker) [![@mkazia](https://avatars.githubusercontent.com/u/3633226?s=40&v=4)](/mkazia) [![@IlyaKovalev](https://avatars.githubusercontent.com/u/37645879?s=40&u=2c167115c1371b10b94e07701eb6c29bb4bd6b77&v=4)](/IlyaKovalev) [![@MuazmaZ](https://avatars.githubusercontent.com/u/38145027?s=40&u=9447c6c6e2db35bc7cbd3f7b423f0109679deb55&v=4)](/MuazmaZ) [![@simonbence](https://avatars.githubusercontent.com/u/61191107?s=40&v=4)](/simonbence) [![@dtrodrigues](https://avatars.githubusercontent.com/u/614233?s=40&u=7b09f94485963eda7346c7f7893c88301cf4ecd1&v=4)](/dtrodrigues) [![@spius1](https://avatars.githubusercontent.com/u/61760668?s=40&v=4)](/spius1) [![@sjyang18](https://avatars.githubusercontent.com/u/41694933?s=40&v=4)](/sjyang18) [![@rfellows](https://avatars.githubusercontent.com/u/713866?s=40&v=4)](/rfellows) [![@alexvaut](https://avatars.githubusercontent.com/u/20702322?s=40&u=1aebf05f9f98f9aba4dacfb6137cf0253a0a7953&v=4)](/alexvaut) [![@EndzeitBegins](https://avatars.githubusercontent.com/u/16666115?s=40&v=4)](/EndzeitBegins) [![@jerem991](https://avatars.githubusercontent.com/u/1593379?s=40&u=9b2d58d1b95555d3da7c972ca54cf7afd5368c37&v=4)](/jerem991) [![@ophers](https://avatars.githubusercontent.com/u/11839190?s=40&u=61a51687a6ac972385201de4818ac4d960cfedd8&v=4)](/ophers) [![@sushilkm](https://avatars.githubusercontent.com/u/4608788?s=40&u=4c4fea03d06027a478491277c0299b415249415f&v=4)](/sushilkm) [![@mcgilman](https://avatars.githubusercontent.com/u/123395?s=40&u=111c426314960be512494a2d2e0c4f4a3acf6b19&v=4)](/mcgilman) [![@pgyori](https://avatars.githubusercontent.com/u/63872658?s=40&v=4)](/pgyori) [![@matcauf](https://avatars.githubusercontent.com/u/1708910?s=40&u=7f572d89af54604a4e51ab04615893a238424fe4&v=4)](/matcauf) [![@pcgrenier](https://avatars.githubusercontent.com/u/4166010?s=40&v=4)](/pcgrenier) [![@adarmiento](https://avatars.githubusercontent.com/u/13642937?s=40&u=8cbdf5451958b501522d58ac19e8523eece7b5a1&v=4)](/adarmiento) [![@adyoun2](https://avatars.githubusercontent.com/u/35570378?s=40&v=4)](/adyoun2) [![@r65535](https://avatars.githubusercontent.com/u/56300962?s=40&u=b98bc9ffafb87242872c7e8d8d87118b47639399&v=4)](/r65535) [![@nielsbasjes](https://avatars.githubusercontent.com/u/240096?s=40&u=e72745033072825b244f3eebef9dee5c0df95ce8&v=4)](/nielsbasjes) [![@apuntandoanulo](https://avatars.githubusercontent.com/u/18710030?s=40&u=4c5f147d4a7fd4ea1200b459cc400515967126a4&v=4)](/apuntandoanulo) [![@agentdalecoper](https://avatars.githubusercontent.com/u/23356183?s=40&u=e436e85efd89c99fd16dc5aae2415ee80bdb0415&v=4)](/agentdalecoper) [![@grishick](https://avatars.githubusercontent.com/u/1310940?s=40&u=c6cd46617d18c9e7207cbeb8f3f1433c88e22450&v=4)](/grishick) [![@dennisjaheruddin](https://avatars.githubusercontent.com/u/16139286?s=40&u=d6e42bf4469d6eda0e7cfea2cdc5f89f852454e5&v=4)](/dennisjaheruddin) [![@Wastack](https://avatars.githubusercontent.com/u/17601510?s=40&v=4)](/Wastack) [![@javiroman](https://avatars.githubusercontent.com/u/1099214?s=40&u=87b903c71f8bdb09fd3d4ea4670b8c9e2730f07c&v=4)](/javiroman) [![@VedaKadam](https://avatars.githubusercontent.com/u/56328193?s=40&v=4)](/VedaKadam)

`[Master (](/hoavho/nifi/commit/f35a66bed102f948cafa5f358aec9931fa9bcd36 "Master (#1)

* NIFI-7135 - Fix Java 11 build with com.puppycrawl.tools:checkstyle:jar:8.29 dependency

This closes #4050.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7165 Fixed TLS Toolkit Guide flags with default validity days.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4064.

* NIFI-7175 removed appveyor and travis builds which have become unreliable.  Added Github Actions based CI build for pull requests and pushes. Removed unit tests which make unreadable or unaccesible dirs. Includes windows build as well as ubuntu. we can do localization based builds later as this is all proven stable.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4058.

* NIFI-7175 README.md

* NIFI-7175 Fixed core attributes formatting in Developer Guide. (#4066)

* NIFI-7175 Fixed core attributes formatting in Developer Guide.

* NIFI-7175 Made core attribute names more consistent.

* NIFI-7026 Add kerberos password property to NiFi HortonworksSchemaRegistry

* NIFI-7114: Fix file leaks in StandardCommsSession and S2S Reporting components

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7114: This closes #4069. Update time-sensitive tests in TestLuceneEventIndex

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7181 convert integration test to proper name so it isnt run as unit test

* NIFI-7178 - Handle the case when schema is not available

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4067.

* NIFI-7185 relaxed timing constrained for builds on lower resources environments like our Github CI builds

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4075.

* NIFI-7183 - This closes #4073. Improve ReplaceText when removing FF's content

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7184 - This closes #4074. Added mime type property to GenerateFlowFile

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7133 - This closes #4049.  Clarification of EnforceOrder description

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7007: Add update functionality to the PutCassandraRecord processor.

NIFI-7007: Add additional unit tests that hit non-happy path

NIFI-7007: Use AllowableValue instead of string

NIFI-7007: Add the use of attributes for the update method, statement type and batch statement type

NIFI-7007: Add additional tests, mainly for the use of attributes

NIFI-7007: add some ReadsAttribute properties to the PutCassandraRecord processor

NIFI-7007: additional update keys validation logic

NIFI-7007: fix imports

NIFI-7007: Convert fieldValue to long in separate method

NIFI-7007: Add new style of tests checking actual CQL output

NIFI-7007: add license to new test file

NIFI-7007: add customValidate to check for certain incompatible property combinations

NIFI-7007: remove check on updateMethod and replace Set.of with java 8 compatible replacmenet

NIFI-7007: Add test for failure with empty update method via attributes

NIFI-7007: remove unused variable

NIFI-7007: Fix customValidate that incorrectly invalidated a valid config

Fix Checkstyle

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #3977

* NIFI-5924 Labels should be searchable

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4070

* NIFI-6363 Refactors sensitive properties, adds additional providers.

NIFI-6363 Additional fixes.

NIFI-6363 Fix Hadoop compile problem.  Add GCP IT instructions.

NIFI-6363 - Removed GCP provider due to dependency conflicts with GRPC processors. Fixed unit test to match master branch after rebase.

NIFI-6363 - Added some docs and experimental tag to the relevant classes.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4080.

* Revert \"NIFI-6363 Refactors sensitive properties, adds additional providers.\"

This reverts commit 479fcfdc0bbd97dd0635bbec0273cc25fcf9cc03.

It does not build properly as shown in Github Actions.

* NIFI-7163 - added RulesEngine and RulesEngineProvider interfaces, enhanced easy rules to support provider interface and refactored to extract rules engine implementation

NIFI-7163 - updated documentation and comments

NIFI-7163 - fix checkstyle issues

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4081

* NIFI-7173 - This closes #4084. add nifi-metrics jar to scripting bundle

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7152 Added custom ExceptionMappers to handle invalid Remote Process Group port value - (#4085)

JsonContentConversionExceptionMapper, JsonMappingExceptionMapper, JsonParseExceptionMapper.
Registered the custom ExceptionMappers.
Added unit tests to throw Exception for string port value and sanitize script input. Handled null or empty JsonMappingException reference path.
Added the Apache license to Groovy Test.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7164 Upgrade shyiko/mysql-binlog-connector-java dependency

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4076.

* NIFI-7201 - Update build to latest apache-maven-parent and split Github Actions builds to include OSX and distribute localization

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4091.

* NIFI-7139 Add record.error.message on failure of a record reader or writer

Handle scenario where message might be null.

Update to test case that was failing because adding attributes modified a flow file even if you don't change the contents.

Fixed Style Issues and Updated WritesAttributes.

Added Test Case for Error Message

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4052

* NIFI-7205 NIFI-7206

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4093.

* NIFI-6856 - Make client ID a non-required field for the MQTTConsume and MQTTProduce processors. Generates a
random ID if not set.

Also add group ID field to ConsumeMQTT processor. Allows consumer to join consumer group at $share/<group_id>/<topic_filter>

add expression language support for the MQTT client ID

Setting client id in publish test fails because it is not a flowfile attribute.
Remove client id and autogenerate it when testing.

Since the evaluation is done in onScheduled, there is no flow file available and we're not using the attributes to make the expression language evaluation. You can change the scope to use the Variable Registry.

Co-Authored-By: Pierre Villard <pierre.villard.fr@gmail.com>
Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #3879.

* NIFI-6791 Add UUID3 and UUID5 functions to Expression Language

This closes #4031

* Bump commons-lang3 and commons-codec versions

* NIFI-7018: Initial commit of processors extending AbstractHadoopProcessor supporting kerberos passwords
AbstractHadoopProcessor will always authenticate the principal with a KerberosUser implementation and a UGI will be acquired from the Subject associated with the KerberosUser implementation
AbstractHadoopProcessor's getUserGroupInformation method will now attempt to check the TGT and relogin if a KerberosUser impelmentation is available, otherwise it will return the UGI referenced in the HdfsResource instance
Updated AbstractHadoopProcessor's customValidate method to consider the provided password and updated validation failure explanations when a KerberosCredentialsService is specified together with a principal, password, or keytab
Added toString method override to AbstractKerberosUser
Updated Hive/HBase components to be compatible with the KerberosProperties.validatePrincipalWithKeytabOrPassword method
Fixed null ComponentLog in GetHDFSSequenceFileTest

Added package-protected accessor method (getAllowExplicitKeytabEnvironmentVariable) to AbstractHadoopProcessor for determining if the environment variable \"NIFI_ALLOW_EXPLICIT_KEYTAB\" has been set
AbstractHadoopProcessor will now only fail validation when the NIFI_ALLOW_EXPLICIT_KEYTAB environment variable is set to false if a keytab is provided to allow the user to specify a principal and password
Added AbstractHadoopProcessorSpec to verify validation of principal/keytab/password/kerberos credential service combinations

This closes #4095.

* NIFI-7025: Initial commit adding Kerberos Password feature for Hive components
Kerberos Password property should not support EL, this includes a change to KerberosProperties which is also used by the HDFS processors (AbstractHadoopProcessor)
Added wiring in a KerberosContext to a TestRunner's MockProcessorInitializationContext
Removed synchronization blocks around KerberosUser.checkTGTAndRelogin, since that method is already synchronized
Updated AbstractHadoopProcessor to have a boolean accessor method to determine if explicit keytab configuration is allowed
Removed synchronization block from HiveConnectionPool's getConnection method (in Hive, Hive_1_1, Hive3 modules), since new TGT ticket acquisition is handled by the KerberosUser implementation.  If UGI is used to relogin, synchronization is handled internally by UGI.
Added Kerberos Principal and Kerberos Password properties to Hive, Hive_1_1, and Hive3 components
Hive, Hive_1_1, and Hive3 components now use KerberosUser implementations to authenticate with a KDC

Updated handling of the NIFI_ALLOW_EXPLICIT_KEYTAB environment variable in Hive and Hive3 components.  An accessor method has been added that uses Boolean.parseBoolean, which returns true if the environment variable is set to true, and false otherwise (including when the environment variable is unset).

Addressing PR feedback

Addressing PR feedback

This closes #4102.

* NIFI-7024: Added Kerberos Password support to HBase_1_1_2_ClientService and HBase_2_ClientService

This closes #4103.

* NIFI-7029 Add kerberos password property to NiFi Kudu components

This closes #4097.

* NIFI-7019 Add kerberos principal and password properties to NiFi DBPCConnectionPool

This closes #4087.

* NIFI-7030 Add Kerberos principal and password properties to Solr processors
Updating validation logic to be consistent with other password-based kerberos processors, removing getPassword from KerberosPasswordUser as it was only used from testing

This closes #4062.

* NIFI-5644 Fixed typo in getWrappedQuery method of AbstractDatabaseFetchProcessor class

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4106.

* NIFI-7218 Fixed typo in Overview docs. (#4107)

* NIFI-7121 Updated comment to state a 'static' salt is used in the constructor. (#4098)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-4970 - EOF Exception in InvokeHttp when body's response is empty with gzip

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4109.

* NIFI-7025: Wrap Hive 3 calls with UGI.doAs
Updated PutHive3Streaming to wrap calls to Hive in UGI.doAs methods
Fixed misleading logging message after the principal has been authenticated with the KDC
When connecting to unsecured Hive 3, a UGI with \"simple\" auth will be used

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4108

* NIFI-7208: Fixed PutSQL/JdbcCommon handling of timestamps (nanoseconds, e.g.)

* NIFI-7227 Fixed typo in Global Access Policy table (#4112)

Co-authored-by: spius <57421336+spius@users.noreply.github.com>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7055 handle empty split evaluations, which contain only ,

add explict test for \" , \"

updated with counting validator

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4012

* NIFI-7055: Removed unit test that is now covered by ListValidator

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4114.

* NIFI-7222 Cleaned up API for FTP/SFTP remote file retrieval and ensure we close remote file resources for SFTP pulls in particular

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4115.

* NIFI-7226: Add Connection Factory configuration properties to PublishJMS and ConsumeJMS processors

Some JMS client libraries may not work with the existing controller services due to incompatible
classloader handling between the 3rd party library and NiFi.
Via configuring the Connection Factory on the processor itself, only the processor's and its
children's classloaders will be used which eliminates the mentioned incompatibility.

This closes #4110.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7232 if users do not supply a remote path PutSFTP with conflict resolution will fail with an NPE

* Fixed unit test failed with NIFI-7232

This closes #4117.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7191 Conditionally disable docker integration tests

Honor Maven properties skipTests and maven.test.skip for the
shell script integration tests that verifiy docker images.

* Fiz writeBatch to avoid cycle in provenance graph

* NIFI-7231: move controller service validation out of synchronized block for enabling

This closes #4118.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7197 - In-place replacement in LookupRecord processor

This closes #4088

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7224 Protecting against possible NPE in ImportFlowVersion command in CLI

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4121.

* NIFI-7195 - Catch MongoException to route flow files to failure

This closes #4089

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7210 - added PG path in bulletins for S2S Bulletin RT

Added group path to BULLETIN table for QueryNiFiReportingTask

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4100

* NIFI-7179 Documented Download flow option in Process group context menu (#4124)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7200: Revert \"NIFI-6530 - HTTP SiteToSite server returns 201 in case no data is available\"

This reverts commit f01668e66ad2e45197915769e966a4be27e1592e.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-4970 - Add a property to deal with empty GZIP HTTP response

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4127.

* NIFI-7239: Upgrade the Hive 3 bundle to use Apache Hive 3.1.2

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4129.

* NIFI-7050 ConsumeJMS is not yielded in case of exception

This closes #4004.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7245: JMS processors yield when connection factory initialisation failed

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4133.

* unit test reproducing the issue

* Fixed bug in JsonRowRecordReader when reading a 'raw' record with a schema that indicates that a field should be a Map. Also updated unit test to explicitly define schema, since schema inference will never return a Map but rather a Record

* NIFI-7242: When a Parameter is changed, any property referencing that parameter should have its #onPropertyModified method called. Also renamed Accumulo tests to integration tests because they start embedded servers and connect to them, which caused failures in my environment. Also fixed a bug in TestLengthDelimitedJournal because it was resulting in failures when building locally as well.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4134.

* NIFI-7119 Implement boundary checking for Argon2 cost parameters (#4111)

* NIFI-7119 Implemented parameter boundary enforcement for Argon2SecureHasher constructor.
Added unit tests for validating each parameter check.

* NIFI-7119 Refactored parameter validations. Added more test sizes to boundary checkers. Changed logger severity to error and added bounds to messages.

* NIFI-7119 Refactored Argon2 parameter data types to handle unsigned integer boundary values.
Updated unit tests.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7241: When updating Process Group to match VersionedProcessGroup, remove any connections before recursing into child groups. This ensures that if a Port exists in child group A and is connected to a port in child group B, if the VersionedProcessGroup indicates to remove the port, that connection will be removed before attempting to remove the port. Updating and adding connections must still be done last, after all components have been added. But missing connections can be removed earlier.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4136.

* NIFI-7248: Atlas reporting task handles PutHive3Streaming

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4138.

* NIFI-7244 Updated all tests which dont run well on windows to either work or be ignored on windows
Also dealt with unreliable tests which depend on timing by ignoring them or converting to IT.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4132.

* NIFI-6742 Use JUnit TemporaryFolder when creating test databases

- Add @Rule for TemporaryFolder
- Replace use of previous target/db with TemporaryFolder/db
- Remove use of ~/test db (in home directory)
- Remove System.out lines

Signed-off-by: Marc Parisi <phrocker@apache.org>

This closes #4137.

* NIFI-7251: Upgrade hadoop-client version to 3.2.1 to avoid the regression bug

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4141.

* NIFI-7229 - Upgrade jackson-databind direct dependencies

This closes #4113

* NIFI-7249: Force String keys in maps in DataTypeUtils.inferDataType()

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4139.

* NIFI-7250 activate user.timezone appropriate to each region
NIFI-7250 fix a test which appears brittle at least on windows builds on slow environments
NIFI-7250 activated a timezone run for AU Australia/Melbourne which exposed a poor magic number and needless assertion but interesting results worth keeping

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4140.

* NIFI-7256: This closes #4142. Fixed thresholds in unit test. Instead of assuming that multiple runs of the processor will occur within 100 milliseconds, allowed the multiple runs to occur within 3 mins of one another.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7208: Restore default timezone in JdbcCommon

* NIFI-7223 - Fixed a minor issue where the OkHttpReplicationClient class loaded blank properties as empty string instead of an expected null value. Added a isNotBlank check. Added unit tests for replication client and HTTPNotificationService.
NIFI-7223 - Renamed some variables and methods.
NIFI-7223 - Removed unused dependency. Corrected security properties in administration-guide.

* NIFI-7223 [WIP] Resolved compilation issues in unit test on OpenJDK 11 by removing Sun security class references.
Added OkHttpReplicationClient#isTLSConfigured() method.
Added unit test.
NIFI-7223 Fixed remaining unit tests for TLS regression.
Renamed tests for clarity.

* NIFI-7223 - Added another test for when keyPasswd is not present.

* NIFI-7223 Resolved merge conflicts from additional test case for null key password.

This closes #4145.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7258 - fix overflow in PutAzureEventHub when not configured correctly

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4146.

* NIFI-7267 - Upgrade spring-data-redis in Redis bundle (#4150)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7268 Removed org.mindrot.jBcrypt library and replaced with at.fa… (#4151)

* NIFI-7268 Removed org.mindrot.jBcrypt library and replaced with at.favre.lib.bcrypt library.
Updated LICENSE and NOTICE files to reflect changes.
Updated unit tests.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7268 Fixed typo in Javadoc.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

* NIFI-6293

Add support to Mongo Extended JSON v2
Add org.json lib
Replace evil json
Replace evil json for alternative
Include testExtendedJsonSupport
Style adjustment
Remove unecessary new JSON parser
Fix query in testExtendedJsonSupport
Parse with Jackson and BSON
Back to default MONGO_URI

This closes #4068

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7264 Make jsonPath Expression Logging More Reasonable
add special handling of PathNotFoundExceptions to log to debug
fix spelling error
wrap debug log in guard per review

This closes #4148

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7187 adding missing version strings from accumulo bundle pom
- Removed Cat X JSON.org dep inclusion which seems to not be necessary
- Updated a ton of easier/safer looking deps
- Updated tika due to CVE

This closes #4086

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7221 Initial work

* NIFI-7221 Support v2 and v3 protocol version for Hortonworks Schema Registry
- Update nifi-nar-bundles/nifi-extension-utils/nifi-record-utils/nifi-avro-record-utils/src/main/java/org/apache/nifi/serialization/SchemaRegistryRecordSetWriter.java
- Addressing review feedback

This closes #4120.

* NIFI-7274 add time for test conditions to be met

* NIFI-7271 Make command timeout configurable for ShellUserGroupProvider
- Changing ShellRunner to use a separate thread for reading the output of the process
- Removing unused member variable
- Addressing review feedback

This closes #4154.

* NIFI-7257 Added HadoopDBCPConnectionPool
- Updated InstanceClassLoader to resolve files that are in the instance urls or additional urls
- Updated nifi-mock to support KerberosContext and removeProperty for ControllerServices
- Added unit test for HadoopDBCPConnectionPool
- Addressing review feedback

This closes #4149.

* NIFI-7269 - Upgrade solrj version to 7 in nifi-solr-processors

Remove unused imports

Use the latest solrj version(8.4.1)

Setup default schemaFactory for tests
The default schemaFactory ManagedIndexSchemaFactory creates
additional files in test's resources directory. Change it to
ClassicIndexSchemaFactory for classic behavior.

This closes #4152.

Signed-off-by: Bryan Bende <bbende@apache.org>

* NIFI-7238 Improve Caching for Github CI and relax core usage to not max out cores all moving toward more stable builds.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7278 Adding support for SCRAM-SHA-512 to Kafka 2.0 processors

* NIFI-5925: Added controller services to set of components that are searched

NIFI-5925: cleanup, add negative test

NIFI-5925: fixed checkstyle

This closes #4105

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7238 Continue to improve Github Actions CI stability

* NIFI-7238 remove no longer needed delete command

* NIFI-7238 printing maven version info in same build command

* NIFI-7281 This closes #4159. Use BufferedInputStream in StandardSocketChannelRecordReader in order to support mark/reset

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7279 This closes #4160. Protect against NPE in RedisDistributedMapCacheClientService when value is null

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7153 Adds ContentLengthFilter to enforce configurable maximum length on incoming HTTP requests.
Adds DoSFilter to enforce configurable maximum on incoming HTTP requests per second.
Redirected log messages for ContentLengthFilter to nifi-app.log in logback.xml.

This closes #4125.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7286 ListenTCPRecord cleanup changed from @OnStopped to @OnUnscheduled

* NIFI-7287: Move services-api dependency from Prometheus reporting task to its NAR

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4162

* NIFI-7290: omit transitive that is causing the build to fail and not needed for the test scope

* NIFI-7291 updated enforcement of dependency rules and build command

Reviewed by markap14
This closes #4166.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7294 Address deprecation issues in solrj and httpclient

Some calls to deprecated methods in httpclient were resulting in
UnsupportedOperationException. Use the new API calls in both httpclient
and solrj. Add an integration test to include test coverage for
org.apache.nifi.processors.solr.SolrUtils.createClient

This closes #4171.

* NIFI-7297 add available()

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4172.

* NIFI-7103 Adding PutDataLakeStorage Processor to provide native support for Azure Data Lake Storage Gen 2 Storage.

added data-lake dependency
NIFI-7103 fixed indentation
Update to add IllegalArgumentException
Fixed indentation and logging
nifi-7103 review changes
nifi-7103 root directory and exception change

This closes #4126.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7293 Add in-memory janusgraph implementation of GraphClientService to help with live testing.

Added new in memory janus graph client for testing.
Added integration test to ExecuteGraphQuery.

NIFI-7293 Added missing getter.

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4168

* add validator for lists that ensure the element validator is called for empty entries

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4116

* NIFI-7311 adding additional cleanup and output to github actions yml and not running nifi-system-test module

Self merging wo review as part of github ci actions stability.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7188 Extending UI search with filters and refactoring existing solution

This closes #4123.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7273: Add flow metrics REST endpoint with for Prometheus scraping (#4156)

* NIFI-7273: Add flow metrics REST endpoint with for Prometheus scraping

* NIFI-7273: Changed method name, fix handling when analytics not enabled

* NIFI-7273: Removed attachment header from Prometheus metrics endpoint

* NIFI-7273: Removed unused variable

* NIFI-7317 - make .java files non-executable

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4181.

* NIFI-7126 Increased test iterations to 10,000 in Argon2SecureHasherTe… (#4187)

* NIFI-7126 Increased test iterations to 10,000 in Argon2SecureHasherTest#testDefaultCostParamsShouldBeSufficient to avoid JVM warmup issues.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7326 updated URL to find splunk artifacts (#4188)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7314 HandleHttpRequest stops Jetty in OnUnscheduled instead of OnStopped. Also reject pending request and clean their queue when shutting down.

NIFI-7314 In HandleHttpRequest returning 503 when rejecting pending requests before shutdown.
NIFI-7314 In HandleHttpRequest add logs and better response message during cleanup.

This closes #4191.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7259 Adding DeleteDataLakeStorage Processor to provide native support for Azure Data lake Gen 2 Storage.

Updated to remove unused variables
NIFI-7259 import and property description changes

This closes #4189.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7345: Fixed Hive database and table names case insensitivity in Atlas reporting task

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4198.

* NIFI-6849: Reworked how nodes inherit cluster information when joining a cluster. Now, if there are conflicts, a local copy is made of the flow/authorizations/etc. and the cluster's flow is inherited.
 - Refactored Flow Synchronization to make code cleaner
 - Updated Authorizers to forcibly inherit Users, Groups, and Access Policies if the local flow is empty.
 - Updated FlowFileRepositories to use SerializedRepositoryRecord instead of RepositoryRecord, so that we have the ability to read records without already knowing the Queue objects. Updated StandardFlowSynchronizer so that if the flow is not inheritable but the controller has not yet been initialized, the flow is backed up and replaced instead of NiFi failing to start
- Added system tests. Updated FlowController so that if it fails to inherit flow due to flow uninheritability that it notifies the cluster of this instead of remaining in the 'CONNECTING' state.
- Added additional log statements to aid in debugging

NIFI-6849: Rebased against master. Updated Admin Guide to describe new cluster flow inheritance behavior

NIFI-6849: Addressed review feedback

NIFI-6849: Addressed review feedback: Relocated logic for bundle compatibility into the BundleCompatibilityCheck class. Fixed logic that prevented users/groups/policies from being forcibly inherited during startup

This closes #3891

* NIFI-7087: Use FlowManager.findAllConnections() when available

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4026

* NIFI-7341 Updated certificate commands and source code formatting in Toolkit Guide. (#4196)

* NIFI-7339: Fixed bug that caused Write Ahead Provenance Repository not to rollover event files after specified time. Code cleanup. Updated some default properties.

* NIFI-7346: Ensure that the Provenance Repository doesn't delete the Active Event File

* NIFI-7319 Add walkthrough document (#4193)

* NIFI-7319 Added first draft of walkthroughs doc.

* NIFI-7319 Added instructions and screenshots for securing standalone NiFi instance.

* NIFI-7319 Added instructions and screenshots for instructing OS & browser to trust self-signed certificate.

* NIFI-7319 Added instructions and screenshots for securing NiFi with externally-provided certificates.

* NIFI-7319 Added instructions and screenshots for building NiFi from source.

* NIFI-7319 [WIP] Converting secure cluster instructions to match format.
Fixed instructions regarding embedded ZooKeeper configuration.

* NIFI-7319 Completed secure cluster walkthrough.

* NIFI-7319 Added walkthroughs to documentation navigation list.

* NIFI-7319 Incorporated PR feedback on broken links.

* NIFI-7319 Removed line number helpers from update sections.

* NIFI-7319 Incorporated final PR review items.

Co-authored-by: Sandra Pius <spiusapache@gmail.com>

* NIFI-7354: Allow analytics properties to be set via environment variables in docker scripts

This closes #4203.

Signed-off-by: Aldrin Piri <aldrin@apache.org>

* NIFI-7347: Fixed NullPointerException that can happen if a bin is merged due to timeout and has no records

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4210.

* NIFI-6977 - Change the reporting behavior of Azure Reporting task to report report the time when metrics are generated

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4211.

* [NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in the Connection summary table does not work properly
- fix style issues
- review feedback

This closes #4208

* NIFI-7292 Preventing file listing from fail because of insufficient privileges

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4195.

* Added Jira and security reporting links to README.md

* NIFI-7359 Fix parent id on process metrics for Prometheus

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4209

* NIFI-7348 Wait - Removes WAIT_START_TIMESTAMP after expiration

This closes #4201.

Signed-off-by: Koji Kawamura <ijokarumawak@apache.org>

* NIFI-7334 Adding FetchDataLakeStorage Processor to provide native support for Azure Data lake Gen 2 Storage.

NIFI-7334 Update to FetchDataLakeStorage Processor

This closes #4212.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7366 - ConsumeEWS Processor parse EML

https://issues.apache.org/jira/browse/NIFI-7366

This commit allows to retrieve ItemAttachement (such as EML) file when pulling mail.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4215.

* NIFI-7318 - Allow 'docker stop' to gracefully shutdown

As it is issuing 'docker stop' will immediatly exit the container.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4182.

* NIFI-7300 Allowing narrow numeric types to fit againt schema check with wider type; Allowing doubles with value within float precision to be considered as valid floats (NIFI-7302)

* NIFI-7375: This closes #4218. Fixed a bug that caused Provenance Events not to show up in specific situations when clicking View Provenance for a Processor.
- Added System-level tests for Provenance repository to reproduce behavior.
- Added a Provenance Client to the CLI, which is necessary for System-level tests.
- Added small additional configuration for Provenance repository to simplify development of system tests
- Minor improvements to system tests (such as ability to destroy environment between tests) needed for Provenance repository based system tests

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7280 ReportLineageToAtlas recognizes 'atlas.metadata.namespace' from Atlas config file.

Still recognizes 'atlas.cluster.name' as well, but takes lower precedence than the new property.
Also Atlas URL can be provided via the 'atlas.rest.address' property in the atlas-application.properties.

NIFI-7280 In ReportLineageToAtlas improved documentation and adjusted property ordering for better user experience. Minor refactor.
NIFI-7280 In ReportLineageToAtlas amended documentation. Minor refactor.
NIFI-7280 In ReportLineageToAtlas amended more documentation. More minor refactor.
NIFI-7280 - In Atlas reporting: complete clusterName -> namespace overhaul where appropriate.

This closes #4213.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7378: Ensure label values are not null in Prometheus metrics (#4219)

* Do not update status for stopping a deleted node

* NIFI-7389 Makes Missable heartbeat counts configurable

This closes #4236.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7377 Cleaned up nifi-stateless logs.
Refactored masking logic to CipherUtility and indicated masking with label and Base64 output.
Added JSON masking logic to nifi-stateless module.
Added argument masking functionality to Program.
Moved groovy unit tests to proper Maven directory structure.
Modified plain argument output to use filtering/masking methods in provided utility.
Refactored utility methods.
Updated unit tests.

This closes #4222.

Co-authored-by: Pierre Villard <pierre.villard.fr@gmail.com>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7298: PutAzureDataLakeStorage tests.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4227.

* NIFI-7379: Support multiple instances of Prometheus registries/metrics (#4229)

* NIFI-7379: Support multiple instances of Prometheus registries/metrics

* NIFI-7379: Refactored Prometheus objects to support multiple instances

* NIFI-7394: Add support for sending Multipart/FORM data to InvokeHTTP.
By using dynamic properties with a prefix naming scheme, allow
definition of the parts, including the name to give the Flowfile content
part, and optionally it's file name.
After review:
- change so that we can send just the form content or just form data
  without the flowfile
- change the content name and content file name from dynamic properties
  to properties
- change the dynamic name to be an invalid http header \"post:form:xxxx\"
- add validation and more tests

This closes #4234.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7408 - added percent used metrics for connections

NIFI-7408 - return double value for utilization

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4240

* NIFI-7170:
- Adding a flag to nifi.properties to disable anonymous authentication.

NIFI-7170:
- Fixing checkstyle issues.

NIFI-7170:
- Adding missing license header.

NIFI-7170:
- Initial PR feedback.

NIFI-7170:
- Fixing broken integration tests.
- Creating new integration tests for verifying allowing and preventing anonymous access.

NIFI-7170:
- Ensuring the new anonymous authentication property is considered for proxied requests.

NIFI-7170 - Fixed comment.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4099.

* Added note about unique initial user identity names to walkthrough doc.

* NIFI-6149: Azure EventHub Managed identities support patch

review changes
additional review changes
NIFI-6149: typo fixes

This closes #4226.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7416: Update travis-ci to GitHub Actions in the PR template

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4247.

* NIFI-7415: Add .asf.yaml to configure GitHub integrations

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4246.

* NIFI-7404: Fixed invalid script processors upon thread termination

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4238.

* NIFI-7412: Fixed provenance event types in Azure Fetch/Delete processors

This closes #4245.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7414: Escape user-defined values that contain invalid XML characters before writing flow.xml.gz

NIFI-7414: Updated StandardFlowSerializerTest to include testing for variable names and values being filtered

This closes #4244

* NIFI-7425 Log Message for ReplaceText Over Buffer Size

Adds a log message when ReplaceText sends a flowfile to the failure relationship because
it is larger than the max buffer size.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4255.

* NIFI-7420 remove the http.param attribute. It contained both the query parameters already captured in http.query.param _and_ the multipart form data names and values, which are captured in the part data, and could be very very large

This closes #4251.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7428: Switch hive.version property to set Hive 3 version

This closes #4259

* NIFI-7398 Upgraded jackson-databind dependency version to 2.9.10.4 at root pom.xml.
Upgraded tika-parsers dep in nifi-media-processors.
Upgraded jackson-databind dep in nifi-graph-processors.
Upgraded jackson-databind dep in nifi-elasticsearch-client-service-api.
Upgraded jackson-databind dep in in nifi-easyrules-service.
Upgraded calcite-core dep in nifi-sql-reporting-tasks.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4252.

* NIFI-7390 Covering Avro type conversion in case of map withing Record

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4256

* NIFI-7423 Upgraded jquery dependency version.

NIFI-7423 Upgraded jquery dependency version to latest 3.5.1.

This closes #4258

* NIFI-6913: PutAzureBlobStorage processor will create container if not exists

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4237.

* NIFI-7413: Documented REMOTE_INVOCATION provenance event type in user/dev guides

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4267

* NIFI-7321 - Allow NiFi admins to configure whether Jetty will send the Jetty server version in responses.
Fixed a checkstyle error.
Added property to nifi.properties.
Changed property to a variable that is set with the pom.xml.
Added setting the version variable to another HTTPConfiguration to fix the version being sent in docs context.
Fixed typo error.

This closes #4192.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7367: Add tests for FetchAzureDataLakeStorage

NIFI-7367: Negative test cases for expression language in FetchAzureDataLakeStorage
FetchAzureDataLakeStorage throws exception when filesystem or filename is blank.
Fixed logged error messages in all 3 of the Delete, Fetch and Put ADLS processors.
testFetchDirectory test case marked as ignored.

This closes #4257.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7448: Fix quoting of DDL table name in PutORC

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4269.

* NIFI-7460: Avoid NPE when a VersionedProcessor has a null value for autoTerminatedRelationships. Added additional logging and improved error handling around syncing with invalid flows

* NIFI-7437 - created separate thread for preloading predictions, refactors for performance

NIFI-7437 - reduced scheduler to 15 seconds, change cache to expire after no access vs expire after write

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4274

* NIFI-6497: Allow FreeFormTextRecordSetWriter to access FlowFile Attributes

This closes #4275.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7380 - fix for controller service validation in NiFi Stateless

This closes #4264.

Signed-off-by: Matthieu Cauffiez <matthieu.cauffiez@bell.ca>
Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7446: FetchAzureDataLakeStorage processor now throws exception when the specified path points to a directory

A newer version (12.1.1) of azure-storage-file-datalake is imported.

This closes #4273.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7331 Fixed grammatical errors in log output.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4283.

* NIFI-7409: Azure managed identity support to Azure Datalake processors

NIFI-7409: review changes
NIFI-7409: ordering import statements
NIFI-7409: changed validateCredentialProperties logic

This closes #4249.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7336: Add tests for DeleteAzureDataLakeStorage

DeleteAzureDataLakeStorage now throws exception if fileSystem or fileName is empty string

NIFI-7336: Add tests for DeleteAzureDataLakeStorage - typos fixed
NIFI-7336: Add tests for DeleteAzureDataLakeStorage - fixed a test case

This closes #4272.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-6911 Removed default Blob value for PutAzureBlobStorage

This closes #3906

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7407 Replaced SSLContextFactory references to \"TLS\" with \"TLSv1.2\" (in shared constant).
Changed JettyServer default SSL initialization and updated unit test.
Removed SecurityStoreTypes (unused).
Added StringUtils inverted blank and empty checks.
Added TlsConfiguration container object.
Enhanced KeystoreType enum.
Added clean #createSSLContext() method to serve as base method for special cases/other method signatures.
Added utility methods in KeyStoreUtils.
Added generic TlsException for callers that cannot resolve TLS-specific exceptions.
Added utility methods for component object debugging.
Enforced TLS protocol version on cluster comms socket creation.
Added utility method for SSL server socket creation.
Refactored (Server)SocketConfigurationFactoryBean to store relevant NiFiProperties in TlsConfiguration instead of stateful SSLContextFactory (Cluster comms now enforce modern TLS protocol version).
Removed duplicate SSLContextFactory.
Switched duplicate SslContextFactory to wrap shared SSLContextFactory.
Refactored SslContextFactoryTest for clarity (will move any unique tests to nifi-security-utils class test).
Added further validation & boundary checking in uses of TlsConfiguration.
Provided SSLSocketFactory accessor in SslContextFactory.
Refactored OkHttpReplicationClient tuple method.
Refactored OcspCertificateValidator TLS logic.
Added utility method to apply TLS configs to OkHttpClientBuilder.
Removed references to duplicate SslContextFactory.
Removed unnecessary SslContextFactory.
Moved OkHttpClientUtils to nifi-web-util module.
Updated module dependencies.
Removed now empty nifi-security module.
Enforced TLS protocol selection on LB server socket.
Enforced TLS protocol selection on S2S server socket.
Applied specified TLS protocol versions to S2S socket creation.
Completed removal of legacy SSLContext creation methods from only remaining SslContextFactory.
Replaced references to creation methods throughout codebase.
Replaced references to unnecessary NiFiProperties file reads throughout tests.
Removed duplicate ClientAuth enum from SSLContextService and changed all references to SslContextFactory.ClientAuth.
Suppressed repeated TLS exceptions in cluster, S2S, and load balance socket listeners.
Cleaned up legacy code.
Added external timing check to timing test assertion.
Made RestrictedSSLContextService TLS protocol versions allowable values explicit.
Enabled TLSv1.3 on Java 11.
Added explanations of TLS protocol versions in StandardSSLContextService and StandardRestrictedSSLContextService.
Resolved additional Java 11 test failures for NiFi internal classes that don't support TLSv1.3. Filed NIFI-7468 as follow on task.

This closes #4263.

Signed-off-by: Nathan Gough <thenatog@gmail.com>
Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7471 fix bug with property validation

* NIFI-6571 Check token length on TLS toolkit server startup

This closes #3659.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* Fixed a couple of typos in the RecordPath guide

* NIFI-7463
Create empty relationship for RunMongoAggregation

Fix default autoterminate and condition to redirect to REL_EMPTY

Change from new relationship to write an empty FlowFile to RESULT

Fix MONGO_URI

This closes #4281

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7462: This adds a way to convert or cast a choice object into a valid type for use with calcite query functions

NIFI-7462: Update to allow FlowFile Table's schema to be more intelligent when using CHOICE types

NIFI-7462: Fixed checkstyle violation, removed documentation around the CAST functions that were no longer needed

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4282

* NIFI-7482 Changed InvokeHTTP to be extensible.
Added unit test.

This closes #4291.

Signed-off-by: Arpad Boda <aboda@apache.org>

* Updated pull request template to separate JDK 8 and 11 questions

* NIFI-6255 NIFI-6287: Hash function for expression language and record path.
NIFI-6255 NIFI-6287: Rebased to match the new expression language interface
NIFI-6255 NIFI-6287: Fix wildcard imports and unused imports
NIFI-6255 NIFI-6287: Move to the common codec DigetUtils
Update commons-codec

This closes #3624

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6672 PlusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to POSITIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc
NIFI-6672 Removed test code.

This closes #3738

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6673 MultiplyEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to POSITIVE_INFINITY or NEGATIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc

This closes #3739

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6674 MinusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to NEGATIVE_INFINITY

MinusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to NEGATIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc

fixed mispositioned # in doc

This closes #3740

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7211 Added @Ignore with warning message to a test that randomly fails due to timing issues.

This closes #4296

* NIFI-6785 Support Deflate Compression
NIFI-6785 Remove unused imports

This closes #3822

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7453 In PutKudu creating a new Kudu client when refreshing TGT

NIFI-7453 Creating a new Kudu client when refreshing TGT in KerberosPasswordUser as well. (Applied to KerberosKeytabUser only before.)
NIFI-7453 Safely closing old Kudu client before creating a new one.
NIFI-7453 Visibility adjustment.

This closes #4276.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7485 Updated commons-configuration2.
NIFI-7485 Found more instances that needed updating.

This closes #4295

* NIFI-7445: Add Conflict Resolution property to PutAzureDataLakeStorage processor

NIFI-7445: Add Conflict Resolution property to PutAzureDataLakeStorage processor
Made warning and error messages more informative.
Refactored flowFile assertion in the tests.

This closes #4287.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7487 - Added batch support and displayName to ModifyBytes processor

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4302.

* NIFI-7483 - Remove description about 'Rolling strategy' in TailFile's docs

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4293.

* NIFI-7484:fix ListFTP and FetchFTP docs. Change 'SFTP' to 'FTP' in description

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4294.

* NIFI-7422: Support aws_s3_pseudo_dir in Atlas reporting task

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4292.

* NIFI-6701 - Fix for PublishGCPPubSub

* NIFI-7430 - LookupRecord change coordinate key for in-place replacement

* NIFI-6666 Add Useragent Header to InvokeHTTP requests

This closes #3734

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* Updated KEYS with new key after previous one expired

* NIFI-7403:Add a function that adjust if the result is failed before we call the onFailed or onCompleted function. If the result is failed, return true and do sth

NIFI-7403:Add an extension point to adjust the result, if the result is failed then process onFailed function

NIFI-7403:Implement the AdjustFailed Function, if PutSQL set the SUPPORT_TRANSACTIONS true, then check whether the result contains REL_RETRY or REL_FAILURE.If it contains that, reroute the result and return true.

NIFI-7403: fix reroute logic in AdjustFailed function

NIFI-7403:Add and modify some unit test for PutSQL's SUPPORT_TRANSACTIONS property

NIFI-7403:Update for PR recheck

NIFI-7403:Add documentation on the Support Fragmented Transactions property to indicate the transactions rollback behavior

NIFI-7403: Fix Checkstyle issue

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4266

* NIFI-7477 Optionally adding validation details as a new attribute of the flowfile

NIFI-7477 Improving description and unit test now verifies attribute content

NIFI-7477: Fixed checkstyle errors

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4301

* NIFI-7447: When returning an object from a Controller Service, if that object is defined as an interface, proxy that interface. This way, any method call into the object will also change the classloader to the appropriate classloader.

* NIFI-7312: Enable search in variable registry of root process group

This closes #4303.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7369 Adding decimal support for record handling in order to avoid missing precision when reading in records

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7369: Consider DECIMAL type as a numeric type when using a CHOICE type in QueryRecord

This closes #4223.

* NIFI-7299 Add basic OAuth2 token provider service that can fetch access tokens when supplied with appropriate credentials.

Added skeleton of oauth2 provider.
Added copy of our code.
Refactored a few things.
Updated apis to better match flow descriptions.
Updated poms and other artifacts.
Updated copyright notice.
Updated LICENSE.

This closes #4173

Signed-off-by: Jeremy Dyer <jeremydyer@apache.org>

* NIFI-7476: Implemented FlowFileGating / FlowFileConcurrency at the ProcessGroup level
Added FlowFileOutboundPolicy to ProcessGroups and updated LocalPort to make use of it
Persisted FlowFile Concurrency and FlowFile Output Policy to flow.xml.gz and included in flow fingerprint
Added configuration for FlowFile concurrency and outbound policy to UI for configuration of Process Groups
Added system tests. Fixed a couple of bugs that were found
Fixed a couple of typos in the RecordPath guide

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4306.

* NIFI-7508: Reset classloader after running TestStandardControllerServiceInvocationHandler
and fix checkstyle violation on NiFiSystemIT

* NIFI-7467 Refactored S2S peer selection logic.
Removed list structure for peer selection as it was unnecessary and often wasteful (most clusters are 3 - 7 nodes, the list was always 128 elements).
Changed integer percentages to double to allow for better normalization.
Removed 80% cap on remote peers as it was due to legacy requirements.
Added unit tests for non-deterministic distribution calculations.
Added unit tests for edge cases due to rounding errors, single valid remotes, unbalanced clusters, and peer queue consecutive selection tracking.
Migrated all legacy PeerSelector unit tests to new API.
Removed unused System time manipulation as tests no longer need it.
Added class-level Javadoc to PeerSelector.
Removed S2S details request replication, as the responses were not being merged, which led to incorrect ports being returned and breaking S2S peer retrieval.
Fixed copy/paste error where input ports were being listed as output ports during remote flow refresh.
Fixed comments and added unbalanced cluster test scenarios.
Removed unnecessary marker interface.
Removed commented code.
Changed weighting & penalization behavior.
Changed dependency scope to test.

This closes #4289.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7393: Add max idle time and idle connections to InvokeHTTP

This closes #4233.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7507: Added section to User Guide on configuring a Process Group

NIFI-7507: Fixed Flowfile Expiration header in doc

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4318

* NIFI-7511 In ControllerServiceProxyWrapper extended documentation. Minor refactor in StandardControllerServiceInvocationHandler. Also removed an unused import from NiFiSystemIT.

This closes #4317.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7385 Provided reverse-indexed TokenCache implementation.
Cleaned up code style.
Unit test was failing on Windows 1.8 GitHub Actions build but no other environment. Increased artificial delay to avoid timing issues.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

This closes #4271.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7514:
- Ensuring the group id is always set in the properties table when loading properties.
- Using a common approach to getting parameters in nfControllerService.
- Code clean up.
- Addressing review feedback.
- Ensuring the service dialog is closed when navigating to the parameter context dialog.

This closes #4322

* NIFI-7490 - Add optional raw field to Syslog readers

review

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4299

* NIFI-7313:fix bug on 'Quote Table Identifiers'
NIFI-7313:add test by wanghongqi
NIFI-7313:edit test

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4185

* NIFI-7434: Add endpoint suffix to Azure storage processors

This closes #4265.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7442 Add CLI commands to the registry in order to support automatic registry setup

* NIFI-7442 Added missing use cases (list users and user groups), made update-access-policy use case more in line with the NiFi side. Added some tests. Additional refactor, documentation revision.

This closes #4329.

* NIFI-7527 AbstractKuduProcessorrefresh TGT deadlock fix: Redesigned locking.

NIFI-7527 Fixed StackOverFlowError due to pacing issue (recursive login before loggedIn flag is set).
NIFI-7527 Refactor: removed redundant kudu client creation.

This closes #4330.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7035 The first curator connection issue is logged as ERROR until reconnect

* NIFI-7539: When capturing diagnostics information, capture a thread dump once and then provide this information to ProcessorNode when capturing active threads. Previously, each processor captured a thread dump itself. When this is done thousands of times it can result in a very long delay.

* NIFI-7540: Fix TestListenSMTP and TestListFile on macOS build environment (#4341)

* NIFI-7540: Fix TestListenSMTP and TestListFile on macOS build environment

This also fixes NIFI-4760.

* NIFI-7540: Remove duplicate mail.smtp.starttls.enable from TestListenSMTP

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7537 - Small fix to make the LDAP connection timeout property a String rather than a Long. Fixes cast error in LDAP libs.

* NIFI-6094 - Added the X-Content-Type-Options header to all web responses. (#4307)

NIFI-6094 - Added the mime/content type for ttf files.

* NIFI-7551 Add support for VARCHAR to Kudu NAR bundle
 - update Kudu dependencies to Kudu 1.12.0
 - add VARCHAR to Kudu Lookup Service and Processor
 - add tests for VARCHAR columns

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4347.

* NIFI-7536: Fix to improve performance when determining the run status of processors when needing to wait for all processors to stop for updating parameter context, etc.

* NIFI-7509: Added optional Record Writer property to all List* Processors

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4315.

* NIFI-7566: Avoid using Thread.sleep() to wait for Site-to-Site connection to be handled. Instead, use TimeUnit.timedWait and use Object.notifyAll when setting the beingServiced flag. This significantly reduces latency and improves throughput for small-batch site-to-site communications

This closes #4353.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7529 Removed OS and Java information from InvokeHttp's UserAgent field so that it's removed regardless of whether or not this field is kept.

This closes #4332

* NIFI-7516: Catch and log SingularMatrixExceptions in OrdinaryLeastSquares model (#4323)

* NIFI-7501
Update nf-context-menu.js for an intuitive road to parameters
When rightclicking a process group the variables are shown, but parameters are not. This makes sense as they have a prerequisite, in the form of a parameter context. This change gives a more consistent experience for finding the functionality regarding parameters by ensuring the contextmenu shows the possibility to configure a parameter context. Once the paramater context has been created for a process group, the parameters text shows, so this is no longer visible. People would then need to click configure to change the context, just as they would be required to do now.

Added generateflowfile load tag and description
Added GenerateFlowFile load tag to be consistent with DuplicateFlowFile and updated description to refer to DuplicateFlowFile.

Revert \"Update nf-context-menu.js for an intuitive road to parameters\"

This reverts commit 3c44b1661f09fb6ae11d2f088550f81fb7a4b393.

This closes #4333

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7558 Fixed CatchAllFilter init logic by calling super.init().
Renamed legacy terms.
Updated documentation.

This closes #4351.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7542 Override jackson-databind version.
NIFI-7542 Override additional jackson-databind versions.
NIFI-7542 Upgrade jackson-databind dependency to 2.9.10.5 in the root pom.xml.

This closes #4343

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7523: Use SSL Context Service for Atlas HTTPS connection in Atla… (#4348)

* NIFI-7523: Use SSL Context Service for Atlas HTTPS connection in Atlas reporting task

Also fixing ControllerServiceDisabledException-s when validating the Kerberos config

* NIFI-7523: Fixed test failure on Windows

* NIFI-7523: Added license headers.

* NIFI-7523: Fixed another test failure on Windows

* NIFI-7523: Review changes

* NIFI-7576 ListenHTTP: Honor primary node only
ListenHTTP processor now binds port and creates a HTTP connection only
if one of the following conditions apply:
- Primary node execution is 'false'
- Primary node execution is 'true' and node is elected as primary node.

Changes:
- Connection is established in 'onTrigger' annotated method instead of
  'onSchedule'. (This is similar to how handleHTTPRequest processor
  handles connections.)
- 'onPrimaryNodeStateChange' annotated method is introduced to tear down
  server on reelection of primary node

This closes #4356.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-6163 Reporting task cannot be set to running when in INVALID state

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4334.

* NIFI-7577 Upgrade angular version.

* NIFI-7577 Update jquery usages.

This closes #4357

Signed-off-by: Scott Aslan <scottyaslan@gmail.com>

* NIFI-7586 In CassandraSesionProvider added properties to set socket-level read timeout and connect timeout.

In QueryCassandra when writing flowfile to the sesion it's done on the raw OutputStream.
Wrapped it in a BufferedOutputStream for better performance.

This closes #4368.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7578 nifi-toolkit CLI Process Group Create command
- Remove unused imports
- Fix checkstyle errors

This closes #4358.

* NIFI-7587 This closes #4372. Increased tolerance for non-deterministic unit test.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7590 In 'CassandraSessionProvider.onDisabled' setting Cassandra-related references properly to null after closing them so that they can be renewed in 'onEnabled' (which creates them only if set to 'null', leaving them closed otherwise).

NIFI-7590 Removed 'CassandraSessionProvider.onStopped'.

This closes #4373.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7513 Added custom DNS resolution steps to walkthrough (#4359)

* NIFI-7563: Optimize the usage of JMS sessions and message producers

The introduced changes prevent creating unnecesary sessions and producers
in some scenarios.

This closes #4378.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7594 In HandleHttpRequest deleting multipart file resources after processing.

This closes #4379.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7332 Added method to log available claim names from the ID provider response when the OIDC Identifying User claim is not found. Revised log message to print available claims.
Added new StandardOidcIdentityProviderGroovyTest file.
Updated deprecated methods in StandardOidcIdentityProvider. Changed log output to print all available claim names from JWTClaimsSet. Added unit test.
Added comments in getAvailableClaims() method.
Fixed typos in NiFi Docs Admin Guide.
Added license to Groovy test.
Fixed a checkstyle error.
Refactor exchangeAuthorizationCode method.
Added unit tests.
Verified all unit tests added so far are passing.
Refactored code. Added unit tests.
Refactored OIDC provider to decouple constructor & network-dependent initialization.
Added unit tests.
Added unit tests.
Refactored OIDC provider to separately authorize the client. Added unit tests.
Added unit tests.

NIFI-7332 Refactored exchangeAuthorizationCode method to separately retrieve the NiFi JWT.

Signed-off-by: Natha…")[#1](https://github.com/hoavho/nifi/pull/1)[)](/hoavho/nifi/commit/f35a66bed102f948cafa5f358aec9931fa9bcd36 "Master (#1)

* NIFI-7135 - Fix Java 11 build with com.puppycrawl.tools:checkstyle:jar:8.29 dependency

This closes #4050.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7165 Fixed TLS Toolkit Guide flags with default validity days.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4064.

* NIFI-7175 removed appveyor and travis builds which have become unreliable.  Added Github Actions based CI build for pull requests and pushes. Removed unit tests which make unreadable or unaccesible dirs. Includes windows build as well as ubuntu. we can do localization based builds later as this is all proven stable.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4058.

* NIFI-7175 README.md

* NIFI-7175 Fixed core attributes formatting in Developer Guide. (#4066)

* NIFI-7175 Fixed core attributes formatting in Developer Guide.

* NIFI-7175 Made core attribute names more consistent.

* NIFI-7026 Add kerberos password property to NiFi HortonworksSchemaRegistry

* NIFI-7114: Fix file leaks in StandardCommsSession and S2S Reporting components

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7114: This closes #4069. Update time-sensitive tests in TestLuceneEventIndex

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7181 convert integration test to proper name so it isnt run as unit test

* NIFI-7178 - Handle the case when schema is not available

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4067.

* NIFI-7185 relaxed timing constrained for builds on lower resources environments like our Github CI builds

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4075.

* NIFI-7183 - This closes #4073. Improve ReplaceText when removing FF's content

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7184 - This closes #4074. Added mime type property to GenerateFlowFile

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7133 - This closes #4049.  Clarification of EnforceOrder description

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7007: Add update functionality to the PutCassandraRecord processor.

NIFI-7007: Add additional unit tests that hit non-happy path

NIFI-7007: Use AllowableValue instead of string

NIFI-7007: Add the use of attributes for the update method, statement type and batch statement type

NIFI-7007: Add additional tests, mainly for the use of attributes

NIFI-7007: add some ReadsAttribute properties to the PutCassandraRecord processor

NIFI-7007: additional update keys validation logic

NIFI-7007: fix imports

NIFI-7007: Convert fieldValue to long in separate method

NIFI-7007: Add new style of tests checking actual CQL output

NIFI-7007: add license to new test file

NIFI-7007: add customValidate to check for certain incompatible property combinations

NIFI-7007: remove check on updateMethod and replace Set.of with java 8 compatible replacmenet

NIFI-7007: Add test for failure with empty update method via attributes

NIFI-7007: remove unused variable

NIFI-7007: Fix customValidate that incorrectly invalidated a valid config

Fix Checkstyle

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #3977

* NIFI-5924 Labels should be searchable

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4070

* NIFI-6363 Refactors sensitive properties, adds additional providers.

NIFI-6363 Additional fixes.

NIFI-6363 Fix Hadoop compile problem.  Add GCP IT instructions.

NIFI-6363 - Removed GCP provider due to dependency conflicts with GRPC processors. Fixed unit test to match master branch after rebase.

NIFI-6363 - Added some docs and experimental tag to the relevant classes.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4080.

* Revert \"NIFI-6363 Refactors sensitive properties, adds additional providers.\"

This reverts commit 479fcfdc0bbd97dd0635bbec0273cc25fcf9cc03.

It does not build properly as shown in Github Actions.

* NIFI-7163 - added RulesEngine and RulesEngineProvider interfaces, enhanced easy rules to support provider interface and refactored to extract rules engine implementation

NIFI-7163 - updated documentation and comments

NIFI-7163 - fix checkstyle issues

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4081

* NIFI-7173 - This closes #4084. add nifi-metrics jar to scripting bundle

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7152 Added custom ExceptionMappers to handle invalid Remote Process Group port value - (#4085)

JsonContentConversionExceptionMapper, JsonMappingExceptionMapper, JsonParseExceptionMapper.
Registered the custom ExceptionMappers.
Added unit tests to throw Exception for string port value and sanitize script input. Handled null or empty JsonMappingException reference path.
Added the Apache license to Groovy Test.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7164 Upgrade shyiko/mysql-binlog-connector-java dependency

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4076.

* NIFI-7201 - Update build to latest apache-maven-parent and split Github Actions builds to include OSX and distribute localization

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4091.

* NIFI-7139 Add record.error.message on failure of a record reader or writer

Handle scenario where message might be null.

Update to test case that was failing because adding attributes modified a flow file even if you don't change the contents.

Fixed Style Issues and Updated WritesAttributes.

Added Test Case for Error Message

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4052

* NIFI-7205 NIFI-7206

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4093.

* NIFI-6856 - Make client ID a non-required field for the MQTTConsume and MQTTProduce processors. Generates a
random ID if not set.

Also add group ID field to ConsumeMQTT processor. Allows consumer to join consumer group at $share/<group_id>/<topic_filter>

add expression language support for the MQTT client ID

Setting client id in publish test fails because it is not a flowfile attribute.
Remove client id and autogenerate it when testing.

Since the evaluation is done in onScheduled, there is no flow file available and we're not using the attributes to make the expression language evaluation. You can change the scope to use the Variable Registry.

Co-Authored-By: Pierre Villard <pierre.villard.fr@gmail.com>
Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #3879.

* NIFI-6791 Add UUID3 and UUID5 functions to Expression Language

This closes #4031

* Bump commons-lang3 and commons-codec versions

* NIFI-7018: Initial commit of processors extending AbstractHadoopProcessor supporting kerberos passwords
AbstractHadoopProcessor will always authenticate the principal with a KerberosUser implementation and a UGI will be acquired from the Subject associated with the KerberosUser implementation
AbstractHadoopProcessor's getUserGroupInformation method will now attempt to check the TGT and relogin if a KerberosUser impelmentation is available, otherwise it will return the UGI referenced in the HdfsResource instance
Updated AbstractHadoopProcessor's customValidate method to consider the provided password and updated validation failure explanations when a KerberosCredentialsService is specified together with a principal, password, or keytab
Added toString method override to AbstractKerberosUser
Updated Hive/HBase components to be compatible with the KerberosProperties.validatePrincipalWithKeytabOrPassword method
Fixed null ComponentLog in GetHDFSSequenceFileTest

Added package-protected accessor method (getAllowExplicitKeytabEnvironmentVariable) to AbstractHadoopProcessor for determining if the environment variable \"NIFI_ALLOW_EXPLICIT_KEYTAB\" has been set
AbstractHadoopProcessor will now only fail validation when the NIFI_ALLOW_EXPLICIT_KEYTAB environment variable is set to false if a keytab is provided to allow the user to specify a principal and password
Added AbstractHadoopProcessorSpec to verify validation of principal/keytab/password/kerberos credential service combinations

This closes #4095.

* NIFI-7025: Initial commit adding Kerberos Password feature for Hive components
Kerberos Password property should not support EL, this includes a change to KerberosProperties which is also used by the HDFS processors (AbstractHadoopProcessor)
Added wiring in a KerberosContext to a TestRunner's MockProcessorInitializationContext
Removed synchronization blocks around KerberosUser.checkTGTAndRelogin, since that method is already synchronized
Updated AbstractHadoopProcessor to have a boolean accessor method to determine if explicit keytab configuration is allowed
Removed synchronization block from HiveConnectionPool's getConnection method (in Hive, Hive_1_1, Hive3 modules), since new TGT ticket acquisition is handled by the KerberosUser implementation.  If UGI is used to relogin, synchronization is handled internally by UGI.
Added Kerberos Principal and Kerberos Password properties to Hive, Hive_1_1, and Hive3 components
Hive, Hive_1_1, and Hive3 components now use KerberosUser implementations to authenticate with a KDC

Updated handling of the NIFI_ALLOW_EXPLICIT_KEYTAB environment variable in Hive and Hive3 components.  An accessor method has been added that uses Boolean.parseBoolean, which returns true if the environment variable is set to true, and false otherwise (including when the environment variable is unset).

Addressing PR feedback

Addressing PR feedback

This closes #4102.

* NIFI-7024: Added Kerberos Password support to HBase_1_1_2_ClientService and HBase_2_ClientService

This closes #4103.

* NIFI-7029 Add kerberos password property to NiFi Kudu components

This closes #4097.

* NIFI-7019 Add kerberos principal and password properties to NiFi DBPCConnectionPool

This closes #4087.

* NIFI-7030 Add Kerberos principal and password properties to Solr processors
Updating validation logic to be consistent with other password-based kerberos processors, removing getPassword from KerberosPasswordUser as it was only used from testing

This closes #4062.

* NIFI-5644 Fixed typo in getWrappedQuery method of AbstractDatabaseFetchProcessor class

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4106.

* NIFI-7218 Fixed typo in Overview docs. (#4107)

* NIFI-7121 Updated comment to state a 'static' salt is used in the constructor. (#4098)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-4970 - EOF Exception in InvokeHttp when body's response is empty with gzip

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4109.

* NIFI-7025: Wrap Hive 3 calls with UGI.doAs
Updated PutHive3Streaming to wrap calls to Hive in UGI.doAs methods
Fixed misleading logging message after the principal has been authenticated with the KDC
When connecting to unsecured Hive 3, a UGI with \"simple\" auth will be used

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4108

* NIFI-7208: Fixed PutSQL/JdbcCommon handling of timestamps (nanoseconds, e.g.)

* NIFI-7227 Fixed typo in Global Access Policy table (#4112)

Co-authored-by: spius <57421336+spius@users.noreply.github.com>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7055 handle empty split evaluations, which contain only ,

add explict test for \" , \"

updated with counting validator

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4012

* NIFI-7055: Removed unit test that is now covered by ListValidator

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4114.

* NIFI-7222 Cleaned up API for FTP/SFTP remote file retrieval and ensure we close remote file resources for SFTP pulls in particular

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4115.

* NIFI-7226: Add Connection Factory configuration properties to PublishJMS and ConsumeJMS processors

Some JMS client libraries may not work with the existing controller services due to incompatible
classloader handling between the 3rd party library and NiFi.
Via configuring the Connection Factory on the processor itself, only the processor's and its
children's classloaders will be used which eliminates the mentioned incompatibility.

This closes #4110.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7232 if users do not supply a remote path PutSFTP with conflict resolution will fail with an NPE

* Fixed unit test failed with NIFI-7232

This closes #4117.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7191 Conditionally disable docker integration tests

Honor Maven properties skipTests and maven.test.skip for the
shell script integration tests that verifiy docker images.

* Fiz writeBatch to avoid cycle in provenance graph

* NIFI-7231: move controller service validation out of synchronized block for enabling

This closes #4118.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7197 - In-place replacement in LookupRecord processor

This closes #4088

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7224 Protecting against possible NPE in ImportFlowVersion command in CLI

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4121.

* NIFI-7195 - Catch MongoException to route flow files to failure

This closes #4089

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7210 - added PG path in bulletins for S2S Bulletin RT

Added group path to BULLETIN table for QueryNiFiReportingTask

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4100

* NIFI-7179 Documented Download flow option in Process group context menu (#4124)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7200: Revert \"NIFI-6530 - HTTP SiteToSite server returns 201 in case no data is available\"

This reverts commit f01668e66ad2e45197915769e966a4be27e1592e.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-4970 - Add a property to deal with empty GZIP HTTP response

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4127.

* NIFI-7239: Upgrade the Hive 3 bundle to use Apache Hive 3.1.2

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4129.

* NIFI-7050 ConsumeJMS is not yielded in case of exception

This closes #4004.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7245: JMS processors yield when connection factory initialisation failed

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4133.

* unit test reproducing the issue

* Fixed bug in JsonRowRecordReader when reading a 'raw' record with a schema that indicates that a field should be a Map. Also updated unit test to explicitly define schema, since schema inference will never return a Map but rather a Record

* NIFI-7242: When a Parameter is changed, any property referencing that parameter should have its #onPropertyModified method called. Also renamed Accumulo tests to integration tests because they start embedded servers and connect to them, which caused failures in my environment. Also fixed a bug in TestLengthDelimitedJournal because it was resulting in failures when building locally as well.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4134.

* NIFI-7119 Implement boundary checking for Argon2 cost parameters (#4111)

* NIFI-7119 Implemented parameter boundary enforcement for Argon2SecureHasher constructor.
Added unit tests for validating each parameter check.

* NIFI-7119 Refactored parameter validations. Added more test sizes to boundary checkers. Changed logger severity to error and added bounds to messages.

* NIFI-7119 Refactored Argon2 parameter data types to handle unsigned integer boundary values.
Updated unit tests.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7241: When updating Process Group to match VersionedProcessGroup, remove any connections before recursing into child groups. This ensures that if a Port exists in child group A and is connected to a port in child group B, if the VersionedProcessGroup indicates to remove the port, that connection will be removed before attempting to remove the port. Updating and adding connections must still be done last, after all components have been added. But missing connections can be removed earlier.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4136.

* NIFI-7248: Atlas reporting task handles PutHive3Streaming

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4138.

* NIFI-7244 Updated all tests which dont run well on windows to either work or be ignored on windows
Also dealt with unreliable tests which depend on timing by ignoring them or converting to IT.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4132.

* NIFI-6742 Use JUnit TemporaryFolder when creating test databases

- Add @Rule for TemporaryFolder
- Replace use of previous target/db with TemporaryFolder/db
- Remove use of ~/test db (in home directory)
- Remove System.out lines

Signed-off-by: Marc Parisi <phrocker@apache.org>

This closes #4137.

* NIFI-7251: Upgrade hadoop-client version to 3.2.1 to avoid the regression bug

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4141.

* NIFI-7229 - Upgrade jackson-databind direct dependencies

This closes #4113

* NIFI-7249: Force String keys in maps in DataTypeUtils.inferDataType()

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4139.

* NIFI-7250 activate user.timezone appropriate to each region
NIFI-7250 fix a test which appears brittle at least on windows builds on slow environments
NIFI-7250 activated a timezone run for AU Australia/Melbourne which exposed a poor magic number and needless assertion but interesting results worth keeping

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4140.

* NIFI-7256: This closes #4142. Fixed thresholds in unit test. Instead of assuming that multiple runs of the processor will occur within 100 milliseconds, allowed the multiple runs to occur within 3 mins of one another.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7208: Restore default timezone in JdbcCommon

* NIFI-7223 - Fixed a minor issue where the OkHttpReplicationClient class loaded blank properties as empty string instead of an expected null value. Added a isNotBlank check. Added unit tests for replication client and HTTPNotificationService.
NIFI-7223 - Renamed some variables and methods.
NIFI-7223 - Removed unused dependency. Corrected security properties in administration-guide.

* NIFI-7223 [WIP] Resolved compilation issues in unit test on OpenJDK 11 by removing Sun security class references.
Added OkHttpReplicationClient#isTLSConfigured() method.
Added unit test.
NIFI-7223 Fixed remaining unit tests for TLS regression.
Renamed tests for clarity.

* NIFI-7223 - Added another test for when keyPasswd is not present.

* NIFI-7223 Resolved merge conflicts from additional test case for null key password.

This closes #4145.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7258 - fix overflow in PutAzureEventHub when not configured correctly

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4146.

* NIFI-7267 - Upgrade spring-data-redis in Redis bundle (#4150)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7268 Removed org.mindrot.jBcrypt library and replaced with at.fa… (#4151)

* NIFI-7268 Removed org.mindrot.jBcrypt library and replaced with at.favre.lib.bcrypt library.
Updated LICENSE and NOTICE files to reflect changes.
Updated unit tests.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7268 Fixed typo in Javadoc.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

* NIFI-6293

Add support to Mongo Extended JSON v2
Add org.json lib
Replace evil json
Replace evil json for alternative
Include testExtendedJsonSupport
Style adjustment
Remove unecessary new JSON parser
Fix query in testExtendedJsonSupport
Parse with Jackson and BSON
Back to default MONGO_URI

This closes #4068

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7264 Make jsonPath Expression Logging More Reasonable
add special handling of PathNotFoundExceptions to log to debug
fix spelling error
wrap debug log in guard per review

This closes #4148

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7187 adding missing version strings from accumulo bundle pom
- Removed Cat X JSON.org dep inclusion which seems to not be necessary
- Updated a ton of easier/safer looking deps
- Updated tika due to CVE

This closes #4086

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7221 Initial work

* NIFI-7221 Support v2 and v3 protocol version for Hortonworks Schema Registry
- Update nifi-nar-bundles/nifi-extension-utils/nifi-record-utils/nifi-avro-record-utils/src/main/java/org/apache/nifi/serialization/SchemaRegistryRecordSetWriter.java
- Addressing review feedback

This closes #4120.

* NIFI-7274 add time for test conditions to be met

* NIFI-7271 Make command timeout configurable for ShellUserGroupProvider
- Changing ShellRunner to use a separate thread for reading the output of the process
- Removing unused member variable
- Addressing review feedback

This closes #4154.

* NIFI-7257 Added HadoopDBCPConnectionPool
- Updated InstanceClassLoader to resolve files that are in the instance urls or additional urls
- Updated nifi-mock to support KerberosContext and removeProperty for ControllerServices
- Added unit test for HadoopDBCPConnectionPool
- Addressing review feedback

This closes #4149.

* NIFI-7269 - Upgrade solrj version to 7 in nifi-solr-processors

Remove unused imports

Use the latest solrj version(8.4.1)

Setup default schemaFactory for tests
The default schemaFactory ManagedIndexSchemaFactory creates
additional files in test's resources directory. Change it to
ClassicIndexSchemaFactory for classic behavior.

This closes #4152.

Signed-off-by: Bryan Bende <bbende@apache.org>

* NIFI-7238 Improve Caching for Github CI and relax core usage to not max out cores all moving toward more stable builds.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7278 Adding support for SCRAM-SHA-512 to Kafka 2.0 processors

* NIFI-5925: Added controller services to set of components that are searched

NIFI-5925: cleanup, add negative test

NIFI-5925: fixed checkstyle

This closes #4105

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7238 Continue to improve Github Actions CI stability

* NIFI-7238 remove no longer needed delete command

* NIFI-7238 printing maven version info in same build command

* NIFI-7281 This closes #4159. Use BufferedInputStream in StandardSocketChannelRecordReader in order to support mark/reset

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7279 This closes #4160. Protect against NPE in RedisDistributedMapCacheClientService when value is null

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7153 Adds ContentLengthFilter to enforce configurable maximum length on incoming HTTP requests.
Adds DoSFilter to enforce configurable maximum on incoming HTTP requests per second.
Redirected log messages for ContentLengthFilter to nifi-app.log in logback.xml.

This closes #4125.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7286 ListenTCPRecord cleanup changed from @OnStopped to @OnUnscheduled

* NIFI-7287: Move services-api dependency from Prometheus reporting task to its NAR

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4162

* NIFI-7290: omit transitive that is causing the build to fail and not needed for the test scope

* NIFI-7291 updated enforcement of dependency rules and build command

Reviewed by markap14
This closes #4166.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7294 Address deprecation issues in solrj and httpclient

Some calls to deprecated methods in httpclient were resulting in
UnsupportedOperationException. Use the new API calls in both httpclient
and solrj. Add an integration test to include test coverage for
org.apache.nifi.processors.solr.SolrUtils.createClient

This closes #4171.

* NIFI-7297 add available()

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4172.

* NIFI-7103 Adding PutDataLakeStorage Processor to provide native support for Azure Data Lake Storage Gen 2 Storage.

added data-lake dependency
NIFI-7103 fixed indentation
Update to add IllegalArgumentException
Fixed indentation and logging
nifi-7103 review changes
nifi-7103 root directory and exception change

This closes #4126.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7293 Add in-memory janusgraph implementation of GraphClientService to help with live testing.

Added new in memory janus graph client for testing.
Added integration test to ExecuteGraphQuery.

NIFI-7293 Added missing getter.

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4168

* add validator for lists that ensure the element validator is called for empty entries

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4116

* NIFI-7311 adding additional cleanup and output to github actions yml and not running nifi-system-test module

Self merging wo review as part of github ci actions stability.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7188 Extending UI search with filters and refactoring existing solution

This closes #4123.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7273: Add flow metrics REST endpoint with for Prometheus scraping (#4156)

* NIFI-7273: Add flow metrics REST endpoint with for Prometheus scraping

* NIFI-7273: Changed method name, fix handling when analytics not enabled

* NIFI-7273: Removed attachment header from Prometheus metrics endpoint

* NIFI-7273: Removed unused variable

* NIFI-7317 - make .java files non-executable

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4181.

* NIFI-7126 Increased test iterations to 10,000 in Argon2SecureHasherTe… (#4187)

* NIFI-7126 Increased test iterations to 10,000 in Argon2SecureHasherTest#testDefaultCostParamsShouldBeSufficient to avoid JVM warmup issues.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7326 updated URL to find splunk artifacts (#4188)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7314 HandleHttpRequest stops Jetty in OnUnscheduled instead of OnStopped. Also reject pending request and clean their queue when shutting down.

NIFI-7314 In HandleHttpRequest returning 503 when rejecting pending requests before shutdown.
NIFI-7314 In HandleHttpRequest add logs and better response message during cleanup.

This closes #4191.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7259 Adding DeleteDataLakeStorage Processor to provide native support for Azure Data lake Gen 2 Storage.

Updated to remove unused variables
NIFI-7259 import and property description changes

This closes #4189.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7345: Fixed Hive database and table names case insensitivity in Atlas reporting task

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4198.

* NIFI-6849: Reworked how nodes inherit cluster information when joining a cluster. Now, if there are conflicts, a local copy is made of the flow/authorizations/etc. and the cluster's flow is inherited.
 - Refactored Flow Synchronization to make code cleaner
 - Updated Authorizers to forcibly inherit Users, Groups, and Access Policies if the local flow is empty.
 - Updated FlowFileRepositories to use SerializedRepositoryRecord instead of RepositoryRecord, so that we have the ability to read records without already knowing the Queue objects. Updated StandardFlowSynchronizer so that if the flow is not inheritable but the controller has not yet been initialized, the flow is backed up and replaced instead of NiFi failing to start
- Added system tests. Updated FlowController so that if it fails to inherit flow due to flow uninheritability that it notifies the cluster of this instead of remaining in the 'CONNECTING' state.
- Added additional log statements to aid in debugging

NIFI-6849: Rebased against master. Updated Admin Guide to describe new cluster flow inheritance behavior

NIFI-6849: Addressed review feedback

NIFI-6849: Addressed review feedback: Relocated logic for bundle compatibility into the BundleCompatibilityCheck class. Fixed logic that prevented users/groups/policies from being forcibly inherited during startup

This closes #3891

* NIFI-7087: Use FlowManager.findAllConnections() when available

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4026

* NIFI-7341 Updated certificate commands and source code formatting in Toolkit Guide. (#4196)

* NIFI-7339: Fixed bug that caused Write Ahead Provenance Repository not to rollover event files after specified time. Code cleanup. Updated some default properties.

* NIFI-7346: Ensure that the Provenance Repository doesn't delete the Active Event File

* NIFI-7319 Add walkthrough document (#4193)

* NIFI-7319 Added first draft of walkthroughs doc.

* NIFI-7319 Added instructions and screenshots for securing standalone NiFi instance.

* NIFI-7319 Added instructions and screenshots for instructing OS & browser to trust self-signed certificate.

* NIFI-7319 Added instructions and screenshots for securing NiFi with externally-provided certificates.

* NIFI-7319 Added instructions and screenshots for building NiFi from source.

* NIFI-7319 [WIP] Converting secure cluster instructions to match format.
Fixed instructions regarding embedded ZooKeeper configuration.

* NIFI-7319 Completed secure cluster walkthrough.

* NIFI-7319 Added walkthroughs to documentation navigation list.

* NIFI-7319 Incorporated PR feedback on broken links.

* NIFI-7319 Removed line number helpers from update sections.

* NIFI-7319 Incorporated final PR review items.

Co-authored-by: Sandra Pius <spiusapache@gmail.com>

* NIFI-7354: Allow analytics properties to be set via environment variables in docker scripts

This closes #4203.

Signed-off-by: Aldrin Piri <aldrin@apache.org>

* NIFI-7347: Fixed NullPointerException that can happen if a bin is merged due to timeout and has no records

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4210.

* NIFI-6977 - Change the reporting behavior of Azure Reporting task to report report the time when metrics are generated

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4211.

* [NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in the Connection summary table does not work properly
- fix style issues
- review feedback

This closes #4208

* NIFI-7292 Preventing file listing from fail because of insufficient privileges

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4195.

* Added Jira and security reporting links to README.md

* NIFI-7359 Fix parent id on process metrics for Prometheus

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4209

* NIFI-7348 Wait - Removes WAIT_START_TIMESTAMP after expiration

This closes #4201.

Signed-off-by: Koji Kawamura <ijokarumawak@apache.org>

* NIFI-7334 Adding FetchDataLakeStorage Processor to provide native support for Azure Data lake Gen 2 Storage.

NIFI-7334 Update to FetchDataLakeStorage Processor

This closes #4212.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7366 - ConsumeEWS Processor parse EML

https://issues.apache.org/jira/browse/NIFI-7366

This commit allows to retrieve ItemAttachement (such as EML) file when pulling mail.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4215.

* NIFI-7318 - Allow 'docker stop' to gracefully shutdown

As it is issuing 'docker stop' will immediatly exit the container.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4182.

* NIFI-7300 Allowing narrow numeric types to fit againt schema check with wider type; Allowing doubles with value within float precision to be considered as valid floats (NIFI-7302)

* NIFI-7375: This closes #4218. Fixed a bug that caused Provenance Events not to show up in specific situations when clicking View Provenance for a Processor.
- Added System-level tests for Provenance repository to reproduce behavior.
- Added a Provenance Client to the CLI, which is necessary for System-level tests.
- Added small additional configuration for Provenance repository to simplify development of system tests
- Minor improvements to system tests (such as ability to destroy environment between tests) needed for Provenance repository based system tests

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7280 ReportLineageToAtlas recognizes 'atlas.metadata.namespace' from Atlas config file.

Still recognizes 'atlas.cluster.name' as well, but takes lower precedence than the new property.
Also Atlas URL can be provided via the 'atlas.rest.address' property in the atlas-application.properties.

NIFI-7280 In ReportLineageToAtlas improved documentation and adjusted property ordering for better user experience. Minor refactor.
NIFI-7280 In ReportLineageToAtlas amended documentation. Minor refactor.
NIFI-7280 In ReportLineageToAtlas amended more documentation. More minor refactor.
NIFI-7280 - In Atlas reporting: complete clusterName -> namespace overhaul where appropriate.

This closes #4213.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7378: Ensure label values are not null in Prometheus metrics (#4219)

* Do not update status for stopping a deleted node

* NIFI-7389 Makes Missable heartbeat counts configurable

This closes #4236.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7377 Cleaned up nifi-stateless logs.
Refactored masking logic to CipherUtility and indicated masking with label and Base64 output.
Added JSON masking logic to nifi-stateless module.
Added argument masking functionality to Program.
Moved groovy unit tests to proper Maven directory structure.
Modified plain argument output to use filtering/masking methods in provided utility.
Refactored utility methods.
Updated unit tests.

This closes #4222.

Co-authored-by: Pierre Villard <pierre.villard.fr@gmail.com>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7298: PutAzureDataLakeStorage tests.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4227.

* NIFI-7379: Support multiple instances of Prometheus registries/metrics (#4229)

* NIFI-7379: Support multiple instances of Prometheus registries/metrics

* NIFI-7379: Refactored Prometheus objects to support multiple instances

* NIFI-7394: Add support for sending Multipart/FORM data to InvokeHTTP.
By using dynamic properties with a prefix naming scheme, allow
definition of the parts, including the name to give the Flowfile content
part, and optionally it's file name.
After review:
- change so that we can send just the form content or just form data
  without the flowfile
- change the content name and content file name from dynamic properties
  to properties
- change the dynamic name to be an invalid http header \"post:form:xxxx\"
- add validation and more tests

This closes #4234.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7408 - added percent used metrics for connections

NIFI-7408 - return double value for utilization

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4240

* NIFI-7170:
- Adding a flag to nifi.properties to disable anonymous authentication.

NIFI-7170:
- Fixing checkstyle issues.

NIFI-7170:
- Adding missing license header.

NIFI-7170:
- Initial PR feedback.

NIFI-7170:
- Fixing broken integration tests.
- Creating new integration tests for verifying allowing and preventing anonymous access.

NIFI-7170:
- Ensuring the new anonymous authentication property is considered for proxied requests.

NIFI-7170 - Fixed comment.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4099.

* Added note about unique initial user identity names to walkthrough doc.

* NIFI-6149: Azure EventHub Managed identities support patch

review changes
additional review changes
NIFI-6149: typo fixes

This closes #4226.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7416: Update travis-ci to GitHub Actions in the PR template

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4247.

* NIFI-7415: Add .asf.yaml to configure GitHub integrations

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4246.

* NIFI-7404: Fixed invalid script processors upon thread termination

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4238.

* NIFI-7412: Fixed provenance event types in Azure Fetch/Delete processors

This closes #4245.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7414: Escape user-defined values that contain invalid XML characters before writing flow.xml.gz

NIFI-7414: Updated StandardFlowSerializerTest to include testing for variable names and values being filtered

This closes #4244

* NIFI-7425 Log Message for ReplaceText Over Buffer Size

Adds a log message when ReplaceText sends a flowfile to the failure relationship because
it is larger than the max buffer size.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4255.

* NIFI-7420 remove the http.param attribute. It contained both the query parameters already captured in http.query.param _and_ the multipart form data names and values, which are captured in the part data, and could be very very large

This closes #4251.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7428: Switch hive.version property to set Hive 3 version

This closes #4259

* NIFI-7398 Upgraded jackson-databind dependency version to 2.9.10.4 at root pom.xml.
Upgraded tika-parsers dep in nifi-media-processors.
Upgraded jackson-databind dep in nifi-graph-processors.
Upgraded jackson-databind dep in nifi-elasticsearch-client-service-api.
Upgraded jackson-databind dep in in nifi-easyrules-service.
Upgraded calcite-core dep in nifi-sql-reporting-tasks.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4252.

* NIFI-7390 Covering Avro type conversion in case of map withing Record

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4256

* NIFI-7423 Upgraded jquery dependency version.

NIFI-7423 Upgraded jquery dependency version to latest 3.5.1.

This closes #4258

* NIFI-6913: PutAzureBlobStorage processor will create container if not exists

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4237.

* NIFI-7413: Documented REMOTE_INVOCATION provenance event type in user/dev guides

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4267

* NIFI-7321 - Allow NiFi admins to configure whether Jetty will send the Jetty server version in responses.
Fixed a checkstyle error.
Added property to nifi.properties.
Changed property to a variable that is set with the pom.xml.
Added setting the version variable to another HTTPConfiguration to fix the version being sent in docs context.
Fixed typo error.

This closes #4192.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7367: Add tests for FetchAzureDataLakeStorage

NIFI-7367: Negative test cases for expression language in FetchAzureDataLakeStorage
FetchAzureDataLakeStorage throws exception when filesystem or filename is blank.
Fixed logged error messages in all 3 of the Delete, Fetch and Put ADLS processors.
testFetchDirectory test case marked as ignored.

This closes #4257.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7448: Fix quoting of DDL table name in PutORC

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4269.

* NIFI-7460: Avoid NPE when a VersionedProcessor has a null value for autoTerminatedRelationships. Added additional logging and improved error handling around syncing with invalid flows

* NIFI-7437 - created separate thread for preloading predictions, refactors for performance

NIFI-7437 - reduced scheduler to 15 seconds, change cache to expire after no access vs expire after write

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4274

* NIFI-6497: Allow FreeFormTextRecordSetWriter to access FlowFile Attributes

This closes #4275.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7380 - fix for controller service validation in NiFi Stateless

This closes #4264.

Signed-off-by: Matthieu Cauffiez <matthieu.cauffiez@bell.ca>
Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7446: FetchAzureDataLakeStorage processor now throws exception when the specified path points to a directory

A newer version (12.1.1) of azure-storage-file-datalake is imported.

This closes #4273.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7331 Fixed grammatical errors in log output.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4283.

* NIFI-7409: Azure managed identity support to Azure Datalake processors

NIFI-7409: review changes
NIFI-7409: ordering import statements
NIFI-7409: changed validateCredentialProperties logic

This closes #4249.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7336: Add tests for DeleteAzureDataLakeStorage

DeleteAzureDataLakeStorage now throws exception if fileSystem or fileName is empty string

NIFI-7336: Add tests for DeleteAzureDataLakeStorage - typos fixed
NIFI-7336: Add tests for DeleteAzureDataLakeStorage - fixed a test case

This closes #4272.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-6911 Removed default Blob value for PutAzureBlobStorage

This closes #3906

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7407 Replaced SSLContextFactory references to \"TLS\" with \"TLSv1.2\" (in shared constant).
Changed JettyServer default SSL initialization and updated unit test.
Removed SecurityStoreTypes (unused).
Added StringUtils inverted blank and empty checks.
Added TlsConfiguration container object.
Enhanced KeystoreType enum.
Added clean #createSSLContext() method to serve as base method for special cases/other method signatures.
Added utility methods in KeyStoreUtils.
Added generic TlsException for callers that cannot resolve TLS-specific exceptions.
Added utility methods for component object debugging.
Enforced TLS protocol version on cluster comms socket creation.
Added utility method for SSL server socket creation.
Refactored (Server)SocketConfigurationFactoryBean to store relevant NiFiProperties in TlsConfiguration instead of stateful SSLContextFactory (Cluster comms now enforce modern TLS protocol version).
Removed duplicate SSLContextFactory.
Switched duplicate SslContextFactory to wrap shared SSLContextFactory.
Refactored SslContextFactoryTest for clarity (will move any unique tests to nifi-security-utils class test).
Added further validation & boundary checking in uses of TlsConfiguration.
Provided SSLSocketFactory accessor in SslContextFactory.
Refactored OkHttpReplicationClient tuple method.
Refactored OcspCertificateValidator TLS logic.
Added utility method to apply TLS configs to OkHttpClientBuilder.
Removed references to duplicate SslContextFactory.
Removed unnecessary SslContextFactory.
Moved OkHttpClientUtils to nifi-web-util module.
Updated module dependencies.
Removed now empty nifi-security module.
Enforced TLS protocol selection on LB server socket.
Enforced TLS protocol selection on S2S server socket.
Applied specified TLS protocol versions to S2S socket creation.
Completed removal of legacy SSLContext creation methods from only remaining SslContextFactory.
Replaced references to creation methods throughout codebase.
Replaced references to unnecessary NiFiProperties file reads throughout tests.
Removed duplicate ClientAuth enum from SSLContextService and changed all references to SslContextFactory.ClientAuth.
Suppressed repeated TLS exceptions in cluster, S2S, and load balance socket listeners.
Cleaned up legacy code.
Added external timing check to timing test assertion.
Made RestrictedSSLContextService TLS protocol versions allowable values explicit.
Enabled TLSv1.3 on Java 11.
Added explanations of TLS protocol versions in StandardSSLContextService and StandardRestrictedSSLContextService.
Resolved additional Java 11 test failures for NiFi internal classes that don't support TLSv1.3. Filed NIFI-7468 as follow on task.

This closes #4263.

Signed-off-by: Nathan Gough <thenatog@gmail.com>
Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7471 fix bug with property validation

* NIFI-6571 Check token length on TLS toolkit server startup

This closes #3659.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* Fixed a couple of typos in the RecordPath guide

* NIFI-7463
Create empty relationship for RunMongoAggregation

Fix default autoterminate and condition to redirect to REL_EMPTY

Change from new relationship to write an empty FlowFile to RESULT

Fix MONGO_URI

This closes #4281

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7462: This adds a way to convert or cast a choice object into a valid type for use with calcite query functions

NIFI-7462: Update to allow FlowFile Table's schema to be more intelligent when using CHOICE types

NIFI-7462: Fixed checkstyle violation, removed documentation around the CAST functions that were no longer needed

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4282

* NIFI-7482 Changed InvokeHTTP to be extensible.
Added unit test.

This closes #4291.

Signed-off-by: Arpad Boda <aboda@apache.org>

* Updated pull request template to separate JDK 8 and 11 questions

* NIFI-6255 NIFI-6287: Hash function for expression language and record path.
NIFI-6255 NIFI-6287: Rebased to match the new expression language interface
NIFI-6255 NIFI-6287: Fix wildcard imports and unused imports
NIFI-6255 NIFI-6287: Move to the common codec DigetUtils
Update commons-codec

This closes #3624

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6672 PlusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to POSITIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc
NIFI-6672 Removed test code.

This closes #3738

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6673 MultiplyEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to POSITIVE_INFINITY or NEGATIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc

This closes #3739

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6674 MinusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to NEGATIVE_INFINITY

MinusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to NEGATIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc

fixed mispositioned # in doc

This closes #3740

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7211 Added @Ignore with warning message to a test that randomly fails due to timing issues.

This closes #4296

* NIFI-6785 Support Deflate Compression
NIFI-6785 Remove unused imports

This closes #3822

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7453 In PutKudu creating a new Kudu client when refreshing TGT

NIFI-7453 Creating a new Kudu client when refreshing TGT in KerberosPasswordUser as well. (Applied to KerberosKeytabUser only before.)
NIFI-7453 Safely closing old Kudu client before creating a new one.
NIFI-7453 Visibility adjustment.

This closes #4276.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7485 Updated commons-configuration2.
NIFI-7485 Found more instances that needed updating.

This closes #4295

* NIFI-7445: Add Conflict Resolution property to PutAzureDataLakeStorage processor

NIFI-7445: Add Conflict Resolution property to PutAzureDataLakeStorage processor
Made warning and error messages more informative.
Refactored flowFile assertion in the tests.

This closes #4287.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7487 - Added batch support and displayName to ModifyBytes processor

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4302.

* NIFI-7483 - Remove description about 'Rolling strategy' in TailFile's docs

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4293.

* NIFI-7484:fix ListFTP and FetchFTP docs. Change 'SFTP' to 'FTP' in description

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4294.

* NIFI-7422: Support aws_s3_pseudo_dir in Atlas reporting task

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4292.

* NIFI-6701 - Fix for PublishGCPPubSub

* NIFI-7430 - LookupRecord change coordinate key for in-place replacement

* NIFI-6666 Add Useragent Header to InvokeHTTP requests

This closes #3734

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* Updated KEYS with new key after previous one expired

* NIFI-7403:Add a function that adjust if the result is failed before we call the onFailed or onCompleted function. If the result is failed, return true and do sth

NIFI-7403:Add an extension point to adjust the result, if the result is failed then process onFailed function

NIFI-7403:Implement the AdjustFailed Function, if PutSQL set the SUPPORT_TRANSACTIONS true, then check whether the result contains REL_RETRY or REL_FAILURE.If it contains that, reroute the result and return true.

NIFI-7403: fix reroute logic in AdjustFailed function

NIFI-7403:Add and modify some unit test for PutSQL's SUPPORT_TRANSACTIONS property

NIFI-7403:Update for PR recheck

NIFI-7403:Add documentation on the Support Fragmented Transactions property to indicate the transactions rollback behavior

NIFI-7403: Fix Checkstyle issue

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4266

* NIFI-7477 Optionally adding validation details as a new attribute of the flowfile

NIFI-7477 Improving description and unit test now verifies attribute content

NIFI-7477: Fixed checkstyle errors

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4301

* NIFI-7447: When returning an object from a Controller Service, if that object is defined as an interface, proxy that interface. This way, any method call into the object will also change the classloader to the appropriate classloader.

* NIFI-7312: Enable search in variable registry of root process group

This closes #4303.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7369 Adding decimal support for record handling in order to avoid missing precision when reading in records

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7369: Consider DECIMAL type as a numeric type when using a CHOICE type in QueryRecord

This closes #4223.

* NIFI-7299 Add basic OAuth2 token provider service that can fetch access tokens when supplied with appropriate credentials.

Added skeleton of oauth2 provider.
Added copy of our code.
Refactored a few things.
Updated apis to better match flow descriptions.
Updated poms and other artifacts.
Updated copyright notice.
Updated LICENSE.

This closes #4173

Signed-off-by: Jeremy Dyer <jeremydyer@apache.org>

* NIFI-7476: Implemented FlowFileGating / FlowFileConcurrency at the ProcessGroup level
Added FlowFileOutboundPolicy to ProcessGroups and updated LocalPort to make use of it
Persisted FlowFile Concurrency and FlowFile Output Policy to flow.xml.gz and included in flow fingerprint
Added configuration for FlowFile concurrency and outbound policy to UI for configuration of Process Groups
Added system tests. Fixed a couple of bugs that were found
Fixed a couple of typos in the RecordPath guide

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4306.

* NIFI-7508: Reset classloader after running TestStandardControllerServiceInvocationHandler
and fix checkstyle violation on NiFiSystemIT

* NIFI-7467 Refactored S2S peer selection logic.
Removed list structure for peer selection as it was unnecessary and often wasteful (most clusters are 3 - 7 nodes, the list was always 128 elements).
Changed integer percentages to double to allow for better normalization.
Removed 80% cap on remote peers as it was due to legacy requirements.
Added unit tests for non-deterministic distribution calculations.
Added unit tests for edge cases due to rounding errors, single valid remotes, unbalanced clusters, and peer queue consecutive selection tracking.
Migrated all legacy PeerSelector unit tests to new API.
Removed unused System time manipulation as tests no longer need it.
Added class-level Javadoc to PeerSelector.
Removed S2S details request replication, as the responses were not being merged, which led to incorrect ports being returned and breaking S2S peer retrieval.
Fixed copy/paste error where input ports were being listed as output ports during remote flow refresh.
Fixed comments and added unbalanced cluster test scenarios.
Removed unnecessary marker interface.
Removed commented code.
Changed weighting & penalization behavior.
Changed dependency scope to test.

This closes #4289.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7393: Add max idle time and idle connections to InvokeHTTP

This closes #4233.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7507: Added section to User Guide on configuring a Process Group

NIFI-7507: Fixed Flowfile Expiration header in doc

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4318

* NIFI-7511 In ControllerServiceProxyWrapper extended documentation. Minor refactor in StandardControllerServiceInvocationHandler. Also removed an unused import from NiFiSystemIT.

This closes #4317.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7385 Provided reverse-indexed TokenCache implementation.
Cleaned up code style.
Unit test was failing on Windows 1.8 GitHub Actions build but no other environment. Increased artificial delay to avoid timing issues.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

This closes #4271.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7514:
- Ensuring the group id is always set in the properties table when loading properties.
- Using a common approach to getting parameters in nfControllerService.
- Code clean up.
- Addressing review feedback.
- Ensuring the service dialog is closed when navigating to the parameter context dialog.

This closes #4322

* NIFI-7490 - Add optional raw field to Syslog readers

review

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4299

* NIFI-7313:fix bug on 'Quote Table Identifiers'
NIFI-7313:add test by wanghongqi
NIFI-7313:edit test

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4185

* NIFI-7434: Add endpoint suffix to Azure storage processors

This closes #4265.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7442 Add CLI commands to the registry in order to support automatic registry setup

* NIFI-7442 Added missing use cases (list users and user groups), made update-access-policy use case more in line with the NiFi side. Added some tests. Additional refactor, documentation revision.

This closes #4329.

* NIFI-7527 AbstractKuduProcessorrefresh TGT deadlock fix: Redesigned locking.

NIFI-7527 Fixed StackOverFlowError due to pacing issue (recursive login before loggedIn flag is set).
NIFI-7527 Refactor: removed redundant kudu client creation.

This closes #4330.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7035 The first curator connection issue is logged as ERROR until reconnect

* NIFI-7539: When capturing diagnostics information, capture a thread dump once and then provide this information to ProcessorNode when capturing active threads. Previously, each processor captured a thread dump itself. When this is done thousands of times it can result in a very long delay.

* NIFI-7540: Fix TestListenSMTP and TestListFile on macOS build environment (#4341)

* NIFI-7540: Fix TestListenSMTP and TestListFile on macOS build environment

This also fixes NIFI-4760.

* NIFI-7540: Remove duplicate mail.smtp.starttls.enable from TestListenSMTP

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7537 - Small fix to make the LDAP connection timeout property a String rather than a Long. Fixes cast error in LDAP libs.

* NIFI-6094 - Added the X-Content-Type-Options header to all web responses. (#4307)

NIFI-6094 - Added the mime/content type for ttf files.

* NIFI-7551 Add support for VARCHAR to Kudu NAR bundle
 - update Kudu dependencies to Kudu 1.12.0
 - add VARCHAR to Kudu Lookup Service and Processor
 - add tests for VARCHAR columns

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4347.

* NIFI-7536: Fix to improve performance when determining the run status of processors when needing to wait for all processors to stop for updating parameter context, etc.

* NIFI-7509: Added optional Record Writer property to all List* Processors

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4315.

* NIFI-7566: Avoid using Thread.sleep() to wait for Site-to-Site connection to be handled. Instead, use TimeUnit.timedWait and use Object.notifyAll when setting the beingServiced flag. This significantly reduces latency and improves throughput for small-batch site-to-site communications

This closes #4353.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7529 Removed OS and Java information from InvokeHttp's UserAgent field so that it's removed regardless of whether or not this field is kept.

This closes #4332

* NIFI-7516: Catch and log SingularMatrixExceptions in OrdinaryLeastSquares model (#4323)

* NIFI-7501
Update nf-context-menu.js for an intuitive road to parameters
When rightclicking a process group the variables are shown, but parameters are not. This makes sense as they have a prerequisite, in the form of a parameter context. This change gives a more consistent experience for finding the functionality regarding parameters by ensuring the contextmenu shows the possibility to configure a parameter context. Once the paramater context has been created for a process group, the parameters text shows, so this is no longer visible. People would then need to click configure to change the context, just as they would be required to do now.

Added generateflowfile load tag and description
Added GenerateFlowFile load tag to be consistent with DuplicateFlowFile and updated description to refer to DuplicateFlowFile.

Revert \"Update nf-context-menu.js for an intuitive road to parameters\"

This reverts commit 3c44b1661f09fb6ae11d2f088550f81fb7a4b393.

This closes #4333

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7558 Fixed CatchAllFilter init logic by calling super.init().
Renamed legacy terms.
Updated documentation.

This closes #4351.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7542 Override jackson-databind version.
NIFI-7542 Override additional jackson-databind versions.
NIFI-7542 Upgrade jackson-databind dependency to 2.9.10.5 in the root pom.xml.

This closes #4343

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7523: Use SSL Context Service for Atlas HTTPS connection in Atla… (#4348)

* NIFI-7523: Use SSL Context Service for Atlas HTTPS connection in Atlas reporting task

Also fixing ControllerServiceDisabledException-s when validating the Kerberos config

* NIFI-7523: Fixed test failure on Windows

* NIFI-7523: Added license headers.

* NIFI-7523: Fixed another test failure on Windows

* NIFI-7523: Review changes

* NIFI-7576 ListenHTTP: Honor primary node only
ListenHTTP processor now binds port and creates a HTTP connection only
if one of the following conditions apply:
- Primary node execution is 'false'
- Primary node execution is 'true' and node is elected as primary node.

Changes:
- Connection is established in 'onTrigger' annotated method instead of
  'onSchedule'. (This is similar to how handleHTTPRequest processor
  handles connections.)
- 'onPrimaryNodeStateChange' annotated method is introduced to tear down
  server on reelection of primary node

This closes #4356.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-6163 Reporting task cannot be set to running when in INVALID state

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4334.

* NIFI-7577 Upgrade angular version.

* NIFI-7577 Update jquery usages.

This closes #4357

Signed-off-by: Scott Aslan <scottyaslan@gmail.com>

* NIFI-7586 In CassandraSesionProvider added properties to set socket-level read timeout and connect timeout.

In QueryCassandra when writing flowfile to the sesion it's done on the raw OutputStream.
Wrapped it in a BufferedOutputStream for better performance.

This closes #4368.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7578 nifi-toolkit CLI Process Group Create command
- Remove unused imports
- Fix checkstyle errors

This closes #4358.

* NIFI-7587 This closes #4372. Increased tolerance for non-deterministic unit test.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7590 In 'CassandraSessionProvider.onDisabled' setting Cassandra-related references properly to null after closing them so that they can be renewed in 'onEnabled' (which creates them only if set to 'null', leaving them closed otherwise).

NIFI-7590 Removed 'CassandraSessionProvider.onStopped'.

This closes #4373.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7513 Added custom DNS resolution steps to walkthrough (#4359)

* NIFI-7563: Optimize the usage of JMS sessions and message producers

The introduced changes prevent creating unnecesary sessions and producers
in some scenarios.

This closes #4378.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7594 In HandleHttpRequest deleting multipart file resources after processing.

This closes #4379.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7332 Added method to log available claim names from the ID provider response when the OIDC Identifying User claim is not found. Revised log message to print available claims.
Added new StandardOidcIdentityProviderGroovyTest file.
Updated deprecated methods in StandardOidcIdentityProvider. Changed log output to print all available claim names from JWTClaimsSet. Added unit test.
Added comments in getAvailableClaims() method.
Fixed typos in NiFi Docs Admin Guide.
Added license to Groovy test.
Fixed a checkstyle error.
Refactor exchangeAuthorizationCode method.
Added unit tests.
Verified all unit tests added so far are passing.
Refactored code. Added unit tests.
Refactored OIDC provider to decouple constructor & network-dependent initialization.
Added unit tests.
Added unit tests.
Refactored OIDC provider to separately authorize the client. Added unit tests.
Added unit tests.

NIFI-7332 Refactored exchangeAuthorizationCode method to separately retrieve the NiFi JWT.

Signed-off-by: Natha…")`
…

`[f35a66b](/hoavho/nifi/commit/f35a66bed102f948cafa5f358aec9931fa9bcd36)`

```
* NIFI-7135 - Fix Java 11 build with com.puppycrawl.tools:checkstyle:jar:8.29 dependency

This closes #4050.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7165 Fixed TLS Toolkit Guide flags with default validity days.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4064.

* NIFI-7175 removed appveyor and travis builds which have become unreliable.  Added Github Actions based CI build for pull requests and pushes. Removed unit tests which make unreadable or unaccesible dirs. Includes windows build as well as ubuntu. we can do localization based builds later as this is all proven stable.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4058.

* NIFI-7175 README.md

* NIFI-7175 Fixed core attributes formatting in Developer Guide. (#4066)

* NIFI-7175 Fixed core attributes formatting in Developer Guide.

* NIFI-7175 Made core attribute names more consistent.

* NIFI-7026 Add kerberos password property to NiFi HortonworksSchemaRegistry

* NIFI-7114: Fix file leaks in StandardCommsSession and S2S Reporting components

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7114: This closes #4069. Update time-sensitive tests in TestLuceneEventIndex

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7181 convert integration test to proper name so it isnt run as unit test

* NIFI-7178 - Handle the case when schema is not available

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4067.

* NIFI-7185 relaxed timing constrained for builds on lower resources environments like our Github CI builds

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4075.

* NIFI-7183 - This closes #4073. Improve ReplaceText when removing FF's content

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7184 - This closes #4074. Added mime type property to GenerateFlowFile

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7133 - This closes #4049.  Clarification of EnforceOrder description

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7007: Add update functionality to the PutCassandraRecord processor.

NIFI-7007: Add additional unit tests that hit non-happy path

NIFI-7007: Use AllowableValue instead of string

NIFI-7007: Add the use of attributes for the update method, statement type and batch statement type

NIFI-7007: Add additional tests, mainly for the use of attributes

NIFI-7007: add some ReadsAttribute properties to the PutCassandraRecord processor

NIFI-7007: additional update keys validation logic

NIFI-7007: fix imports

NIFI-7007: Convert fieldValue to long in separate method

NIFI-7007: Add new style of tests checking actual CQL output

NIFI-7007: add license to new test file

NIFI-7007: add customValidate to check for certain incompatible property combinations

NIFI-7007: remove check on updateMethod and replace Set.of with java 8 compatible replacmenet

NIFI-7007: Add test for failure with empty update method via attributes

NIFI-7007: remove unused variable

NIFI-7007: Fix customValidate that incorrectly invalidated a valid config

Fix Checkstyle

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #3977

* NIFI-5924 Labels should be searchable

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4070

* NIFI-6363 Refactors sensitive properties, adds additional providers.

NIFI-6363 Additional fixes.

NIFI-6363 Fix Hadoop compile problem.  Add GCP IT instructions.

NIFI-6363 - Removed GCP provider due to dependency conflicts with GRPC processors. Fixed unit test to match master branch after rebase.

NIFI-6363 - Added some docs and experimental tag to the relevant classes.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4080.

* Revert "NIFI-6363 Refactors sensitive properties, adds additional providers."

This reverts commit 479fcfdc0bbd97dd0635bbec0273cc25fcf9cc03.

It does not build properly as shown in Github Actions.

* NIFI-7163 - added RulesEngine and RulesEngineProvider interfaces, enhanced easy rules to support provider interface and refactored to extract rules engine implementation

NIFI-7163 - updated documentation and comments

NIFI-7163 - fix checkstyle issues

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4081

* NIFI-7173 - This closes #4084. add nifi-metrics jar to scripting bundle

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7152 Added custom ExceptionMappers to handle invalid Remote Process Group port value - (#4085)

JsonContentConversionExceptionMapper, JsonMappingExceptionMapper, JsonParseExceptionMapper.
Registered the custom ExceptionMappers.
Added unit tests to throw Exception for string port value and sanitize script input. Handled null or empty JsonMappingException reference path.
Added the Apache license to Groovy Test.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7164 Upgrade shyiko/mysql-binlog-connector-java dependency

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4076.

* NIFI-7201 - Update build to latest apache-maven-parent and split Github Actions builds to include OSX and distribute localization

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4091.

* NIFI-7139 Add record.error.message on failure of a record reader or writer

Handle scenario where message might be null.

Update to test case that was failing because adding attributes modified a flow file even if you don't change the contents.

Fixed Style Issues and Updated WritesAttributes.

Added Test Case for Error Message

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4052

* NIFI-7205 NIFI-7206

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4093.

* NIFI-6856 - Make client ID a non-required field for the MQTTConsume and MQTTProduce processors. Generates a
random ID if not set.

Also add group ID field to ConsumeMQTT processor. Allows consumer to join consumer group at $share/<group_id>/<topic_filter>

add expression language support for the MQTT client ID

Setting client id in publish test fails because it is not a flowfile attribute.
Remove client id and autogenerate it when testing.

Since the evaluation is done in onScheduled, there is no flow file available and we're not using the attributes to make the expression language evaluation. You can change the scope to use the Variable Registry.

Co-Authored-By: Pierre Villard <pierre.villard.fr@gmail.com>
Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #3879.

* NIFI-6791 Add UUID3 and UUID5 functions to Expression Language

This closes #4031

* Bump commons-lang3 and commons-codec versions

* NIFI-7018: Initial commit of processors extending AbstractHadoopProcessor supporting kerberos passwords
AbstractHadoopProcessor will always authenticate the principal with a KerberosUser implementation and a UGI will be acquired from the Subject associated with the KerberosUser implementation
AbstractHadoopProcessor's getUserGroupInformation method will now attempt to check the TGT and relogin if a KerberosUser impelmentation is available, otherwise it will return the UGI referenced in the HdfsResource instance
Updated AbstractHadoopProcessor's customValidate method to consider the provided password and updated validation failure explanations when a KerberosCredentialsService is specified together with a principal, password, or keytab
Added toString method override to AbstractKerberosUser
Updated Hive/HBase components to be compatible with the KerberosProperties.validatePrincipalWithKeytabOrPassword method
Fixed null ComponentLog in GetHDFSSequenceFileTest

Added package-protected accessor method (getAllowExplicitKeytabEnvironmentVariable) to AbstractHadoopProcessor for determining if the environment variable "NIFI_ALLOW_EXPLICIT_KEYTAB" has been set
AbstractHadoopProcessor will now only fail validation when the NIFI_ALLOW_EXPLICIT_KEYTAB environment variable is set to false if a keytab is provided to allow the user to specify a principal and password
Added AbstractHadoopProcessorSpec to verify validation of principal/keytab/password/kerberos credential service combinations

This closes #4095.

* NIFI-7025: Initial commit adding Kerberos Password feature for Hive components
Kerberos Password property should not support EL, this includes a change to KerberosProperties which is also used by the HDFS processors (AbstractHadoopProcessor)
Added wiring in a KerberosContext to a TestRunner's MockProcessorInitializationContext
Removed synchronization blocks around KerberosUser.checkTGTAndRelogin, since that method is already synchronized
Updated AbstractHadoopProcessor to have a boolean accessor method to determine if explicit keytab configuration is allowed
Removed synchronization block from HiveConnectionPool's getConnection method (in Hive, Hive_1_1, Hive3 modules), since new TGT ticket acquisition is handled by the KerberosUser implementation.  If UGI is used to relogin, synchronization is handled internally by UGI.
Added Kerberos Principal and Kerberos Password properties to Hive, Hive_1_1, and Hive3 components
Hive, Hive_1_1, and Hive3 components now use KerberosUser implementations to authenticate with a KDC

Updated handling of the NIFI_ALLOW_EXPLICIT_KEYTAB environment variable in Hive and Hive3 components.  An accessor method has been added that uses Boolean.parseBoolean, which returns true if the environment variable is set to true, and false otherwise (including when the environment variable is unset).

Addressing PR feedback

Addressing PR feedback

This closes #4102.

* NIFI-7024: Added Kerberos Password support to HBase_1_1_2_ClientService and HBase_2_ClientService

This closes #4103.

* NIFI-7029 Add kerberos password property to NiFi Kudu components

This closes #4097.

* NIFI-7019 Add kerberos principal and password properties to NiFi DBPCConnectionPool

This closes #4087.

* NIFI-7030 Add Kerberos principal and password properties to Solr processors
Updating validation logic to be consistent with other password-based kerberos processors, removing getPassword from KerberosPasswordUser as it was only used from testing

This closes #4062.

* NIFI-5644 Fixed typo in getWrappedQuery method of AbstractDatabaseFetchProcessor class

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4106.

* NIFI-7218 Fixed typo in Overview docs. (#4107)

* NIFI-7121 Updated comment to state a 'static' salt is used in the constructor. (#4098)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-4970 - EOF Exception in InvokeHttp when body's response is empty with gzip

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4109.

* NIFI-7025: Wrap Hive 3 calls with UGI.doAs
Updated PutHive3Streaming to wrap calls to Hive in UGI.doAs methods
Fixed misleading logging message after the principal has been authenticated with the KDC
When connecting to unsecured Hive 3, a UGI with "simple" auth will be used

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4108

* NIFI-7208: Fixed PutSQL/JdbcCommon handling of timestamps (nanoseconds, e.g.)

* NIFI-7227 Fixed typo in Global Access Policy table (#4112)

Co-authored-by: spius <57421336+spius@users.noreply.github.com>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7055 handle empty split evaluations, which contain only ,

add explict test for " , "

updated with counting validator

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4012

* NIFI-7055: Removed unit test that is now covered by ListValidator

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4114.

* NIFI-7222 Cleaned up API for FTP/SFTP remote file retrieval and ensure we close remote file resources for SFTP pulls in particular

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4115.

* NIFI-7226: Add Connection Factory configuration properties to PublishJMS and ConsumeJMS processors

Some JMS client libraries may not work with the existing controller services due to incompatible
classloader handling between the 3rd party library and NiFi.
Via configuring the Connection Factory on the processor itself, only the processor's and its
children's classloaders will be used which eliminates the mentioned incompatibility.

This closes #4110.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7232 if users do not supply a remote path PutSFTP with conflict resolution will fail with an NPE

* Fixed unit test failed with NIFI-7232

This closes #4117.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7191 Conditionally disable docker integration tests

Honor Maven properties skipTests and maven.test.skip for the
shell script integration tests that verifiy docker images.

* Fiz writeBatch to avoid cycle in provenance graph

* NIFI-7231: move controller service validation out of synchronized block for enabling

This closes #4118.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7197 - In-place replacement in LookupRecord processor

This closes #4088

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7224 Protecting against possible NPE in ImportFlowVersion command in CLI

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4121.

* NIFI-7195 - Catch MongoException to route flow files to failure

This closes #4089

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7210 - added PG path in bulletins for S2S Bulletin RT

Added group path to BULLETIN table for QueryNiFiReportingTask

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4100

* NIFI-7179 Documented Download flow option in Process group context menu (#4124)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7200: Revert "NIFI-6530 - HTTP SiteToSite server returns 201 in case no data is available"

This reverts commit f01668e66ad2e45197915769e966a4be27e1592e.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-4970 - Add a property to deal with empty GZIP HTTP response

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4127.

* NIFI-7239: Upgrade the Hive 3 bundle to use Apache Hive 3.1.2

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4129.

* NIFI-7050 ConsumeJMS is not yielded in case of exception

This closes #4004.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7245: JMS processors yield when connection factory initialisation failed

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4133.

* unit test reproducing the issue

* Fixed bug in JsonRowRecordReader when reading a 'raw' record with a schema that indicates that a field should be a Map. Also updated unit test to explicitly define schema, since schema inference will never return a Map but rather a Record

* NIFI-7242: When a Parameter is changed, any property referencing that parameter should have its #onPropertyModified method called. Also renamed Accumulo tests to integration tests because they start embedded servers and connect to them, which caused failures in my environment. Also fixed a bug in TestLengthDelimitedJournal because it was resulting in failures when building locally as well.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4134.

* NIFI-7119 Implement boundary checking for Argon2 cost parameters (#4111)

* NIFI-7119 Implemented parameter boundary enforcement for Argon2SecureHasher constructor.
Added unit tests for validating each parameter check.

* NIFI-7119 Refactored parameter validations. Added more test sizes to boundary checkers. Changed logger severity to error and added bounds to messages.

* NIFI-7119 Refactored Argon2 parameter data types to handle unsigned integer boundary values.
Updated unit tests.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7241: When updating Process Group to match VersionedProcessGroup, remove any connections before recursing into child groups. This ensures that if a Port exists in child group A and is connected to a port in child group B, if the VersionedProcessGroup indicates to remove the port, that connection will be removed before attempting to remove the port. Updating and adding connections must still be done last, after all components have been added. But missing connections can be removed earlier.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4136.

* NIFI-7248: Atlas reporting task handles PutHive3Streaming

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4138.

* NIFI-7244 Updated all tests which dont run well on windows to either work or be ignored on windows
Also dealt with unreliable tests which depend on timing by ignoring them or converting to IT.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4132.

* NIFI-6742 Use JUnit TemporaryFolder when creating test databases

- Add @Rule for TemporaryFolder
- Replace use of previous target/db with TemporaryFolder/db
- Remove use of ~/test db (in home directory)
- Remove System.out lines

Signed-off-by: Marc Parisi <phrocker@apache.org>

This closes #4137.

* NIFI-7251: Upgrade hadoop-client version to 3.2.1 to avoid the regression bug

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4141.

* NIFI-7229 - Upgrade jackson-databind direct dependencies

This closes #4113

* NIFI-7249: Force String keys in maps in DataTypeUtils.inferDataType()

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4139.

* NIFI-7250 activate user.timezone appropriate to each region
NIFI-7250 fix a test which appears brittle at least on windows builds on slow environments
NIFI-7250 activated a timezone run for AU Australia/Melbourne which exposed a poor magic number and needless assertion but interesting results worth keeping

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4140.

* NIFI-7256: This closes #4142. Fixed thresholds in unit test. Instead of assuming that multiple runs of the processor will occur within 100 milliseconds, allowed the multiple runs to occur within 3 mins of one another.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7208: Restore default timezone in JdbcCommon

* NIFI-7223 - Fixed a minor issue where the OkHttpReplicationClient class loaded blank properties as empty string instead of an expected null value. Added a isNotBlank check. Added unit tests for replication client and HTTPNotificationService.
NIFI-7223 - Renamed some variables and methods.
NIFI-7223 - Removed unused dependency. Corrected security properties in administration-guide.

* NIFI-7223 [WIP] Resolved compilation issues in unit test on OpenJDK 11 by removing Sun security class references.
Added OkHttpReplicationClient#isTLSConfigured() method.
Added unit test.
NIFI-7223 Fixed remaining unit tests for TLS regression.
Renamed tests for clarity.

* NIFI-7223 - Added another test for when keyPasswd is not present.

* NIFI-7223 Resolved merge conflicts from additional test case for null key password.

This closes #4145.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7258 - fix overflow in PutAzureEventHub when not configured correctly

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4146.

* NIFI-7267 - Upgrade spring-data-redis in Redis bundle (#4150)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7268 Removed org.mindrot.jBcrypt library and replaced with at.fa… (#4151)

* NIFI-7268 Removed org.mindrot.jBcrypt library and replaced with at.favre.lib.bcrypt library.
Updated LICENSE and NOTICE files to reflect changes.
Updated unit tests.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7268 Fixed typo in Javadoc.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

* NIFI-6293

Add support to Mongo Extended JSON v2
Add org.json lib
Replace evil json
Replace evil json for alternative
Include testExtendedJsonSupport
Style adjustment
Remove unecessary new JSON parser
Fix query in testExtendedJsonSupport
Parse with Jackson and BSON
Back to default MONGO_URI

This closes #4068

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7264 Make jsonPath Expression Logging More Reasonable
add special handling of PathNotFoundExceptions to log to debug
fix spelling error
wrap debug log in guard per review

This closes #4148

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7187 adding missing version strings from accumulo bundle pom
- Removed Cat X JSON.org dep inclusion which seems to not be necessary
- Updated a ton of easier/safer looking deps
- Updated tika due to CVE

This closes #4086

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7221 Initial work

* NIFI-7221 Support v2 and v3 protocol version for Hortonworks Schema Registry
- Update nifi-nar-bundles/nifi-extension-utils/nifi-record-utils/nifi-avro-record-utils/src/main/java/org/apache/nifi/serialization/SchemaRegistryRecordSetWriter.java
- Addressing review feedback

This closes #4120.

* NIFI-7274 add time for test conditions to be met

* NIFI-7271 Make command timeout configurable for ShellUserGroupProvider
- Changing ShellRunner to use a separate thread for reading the output of the process
- Removing unused member variable
- Addressing review feedback

This closes #4154.

* NIFI-7257 Added HadoopDBCPConnectionPool
- Updated InstanceClassLoader to resolve files that are in the instance urls or additional urls
- Updated nifi-mock to support KerberosContext and removeProperty for ControllerServices
- Added unit test for HadoopDBCPConnectionPool
- Addressing review feedback

This closes #4149.

* NIFI-7269 - Upgrade solrj version to 7 in nifi-solr-processors

Remove unused imports

Use the latest solrj version(8.4.1)

Setup default schemaFactory for tests
The default schemaFactory ManagedIndexSchemaFactory creates
additional files in test's resources directory. Change it to
ClassicIndexSchemaFactory for classic behavior.

This closes #4152.

Signed-off-by: Bryan Bende <bbende@apache.org>

* NIFI-7238 Improve Caching for Github CI and relax core usage to not max out cores all moving toward more stable builds.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7278 Adding support for SCRAM-SHA-512 to Kafka 2.0 processors

* NIFI-5925: Added controller services to set of components that are searched

NIFI-5925: cleanup, add negative test

NIFI-5925: fixed checkstyle

This closes #4105

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7238 Continue to improve Github Actions CI stability

* NIFI-7238 remove no longer needed delete command

* NIFI-7238 printing maven version info in same build command

* NIFI-7281 This closes #4159. Use BufferedInputStream in StandardSocketChannelRecordReader in order to support mark/reset

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7279 This closes #4160. Protect against NPE in RedisDistributedMapCacheClientService when value is null

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7153 Adds ContentLengthFilter to enforce configurable maximum length on incoming HTTP requests.
Adds DoSFilter to enforce configurable maximum on incoming HTTP requests per second.
Redirected log messages for ContentLengthFilter to nifi-app.log in logback.xml.

This closes #4125.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7286 ListenTCPRecord cleanup changed from @OnStopped to @OnUnscheduled

* NIFI-7287: Move services-api dependency from Prometheus reporting task to its NAR

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4162

* NIFI-7290: omit transitive that is causing the build to fail and not needed for the test scope

* NIFI-7291 updated enforcement of dependency rules and build command

Reviewed by markap14
This closes #4166.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7294 Address deprecation issues in solrj and httpclient

Some calls to deprecated methods in httpclient were resulting in
UnsupportedOperationException. Use the new API calls in both httpclient
and solrj. Add an integration test to include test coverage for
org.apache.nifi.processors.solr.SolrUtils.createClient

This closes #4171.

* NIFI-7297 add available()

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4172.

* NIFI-7103 Adding PutDataLakeStorage Processor to provide native support for Azure Data Lake Storage Gen 2 Storage.

added data-lake dependency
NIFI-7103 fixed indentation
Update to add IllegalArgumentException
Fixed indentation and logging
nifi-7103 review changes
nifi-7103 root directory and exception change

This closes #4126.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7293 Add in-memory janusgraph implementation of GraphClientService to help with live testing.

Added new in memory janus graph client for testing.
Added integration test to ExecuteGraphQuery.

NIFI-7293 Added missing getter.

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4168

* add validator for lists that ensure the element validator is called for empty entries

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4116

* NIFI-7311 adding additional cleanup and output to github actions yml and not running nifi-system-test module

Self merging wo review as part of github ci actions stability.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7188 Extending UI search with filters and refactoring existing solution

This closes #4123.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7273: Add flow metrics REST endpoint with for Prometheus scraping (#4156)

* NIFI-7273: Add flow metrics REST endpoint with for Prometheus scraping

* NIFI-7273: Changed method name, fix handling when analytics not enabled

* NIFI-7273: Removed attachment header from Prometheus metrics endpoint

* NIFI-7273: Removed unused variable

* NIFI-7317 - make .java files non-executable

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4181.

* NIFI-7126 Increased test iterations to 10,000 in Argon2SecureHasherTe… (#4187)

* NIFI-7126 Increased test iterations to 10,000 in Argon2SecureHasherTest#testDefaultCostParamsShouldBeSufficient to avoid JVM warmup issues.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7326 updated URL to find splunk artifacts (#4188)

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7314 HandleHttpRequest stops Jetty in OnUnscheduled instead of OnStopped. Also reject pending request and clean their queue when shutting down.

NIFI-7314 In HandleHttpRequest returning 503 when rejecting pending requests before shutdown.
NIFI-7314 In HandleHttpRequest add logs and better response message during cleanup.

This closes #4191.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7259 Adding DeleteDataLakeStorage Processor to provide native support for Azure Data lake Gen 2 Storage.

Updated to remove unused variables
NIFI-7259 import and property description changes

This closes #4189.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7345: Fixed Hive database and table names case insensitivity in Atlas reporting task

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4198.

* NIFI-6849: Reworked how nodes inherit cluster information when joining a cluster. Now, if there are conflicts, a local copy is made of the flow/authorizations/etc. and the cluster's flow is inherited.
 - Refactored Flow Synchronization to make code cleaner
 - Updated Authorizers to forcibly inherit Users, Groups, and Access Policies if the local flow is empty.
 - Updated FlowFileRepositories to use SerializedRepositoryRecord instead of RepositoryRecord, so that we have the ability to read records without already knowing the Queue objects. Updated StandardFlowSynchronizer so that if the flow is not inheritable but the controller has not yet been initialized, the flow is backed up and replaced instead of NiFi failing to start
- Added system tests. Updated FlowController so that if it fails to inherit flow due to flow uninheritability that it notifies the cluster of this instead of remaining in the 'CONNECTING' state.
- Added additional log statements to aid in debugging

NIFI-6849: Rebased against master. Updated Admin Guide to describe new cluster flow inheritance behavior

NIFI-6849: Addressed review feedback

NIFI-6849: Addressed review feedback: Relocated logic for bundle compatibility into the BundleCompatibilityCheck class. Fixed logic that prevented users/groups/policies from being forcibly inherited during startup

This closes #3891

* NIFI-7087: Use FlowManager.findAllConnections() when available

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4026

* NIFI-7341 Updated certificate commands and source code formatting in Toolkit Guide. (#4196)

* NIFI-7339: Fixed bug that caused Write Ahead Provenance Repository not to rollover event files after specified time. Code cleanup. Updated some default properties.

* NIFI-7346: Ensure that the Provenance Repository doesn't delete the Active Event File

* NIFI-7319 Add walkthrough document (#4193)

* NIFI-7319 Added first draft of walkthroughs doc.

* NIFI-7319 Added instructions and screenshots for securing standalone NiFi instance.

* NIFI-7319 Added instructions and screenshots for instructing OS & browser to trust self-signed certificate.

* NIFI-7319 Added instructions and screenshots for securing NiFi with externally-provided certificates.

* NIFI-7319 Added instructions and screenshots for building NiFi from source.

* NIFI-7319 [WIP] Converting secure cluster instructions to match format.
Fixed instructions regarding embedded ZooKeeper configuration.

* NIFI-7319 Completed secure cluster walkthrough.

* NIFI-7319 Added walkthroughs to documentation navigation list.

* NIFI-7319 Incorporated PR feedback on broken links.

* NIFI-7319 Removed line number helpers from update sections.

* NIFI-7319 Incorporated final PR review items.

Co-authored-by: Sandra Pius <spiusapache@gmail.com>

* NIFI-7354: Allow analytics properties to be set via environment variables in docker scripts

This closes #4203.

Signed-off-by: Aldrin Piri <aldrin@apache.org>

* NIFI-7347: Fixed NullPointerException that can happen if a bin is merged due to timeout and has no records

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4210.

* NIFI-6977 - Change the reporting behavior of Azure Reporting task to report report the time when metrics are generated

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4211.

* [NIFI-7358] - Fix: Sorting on 'Estimated Time to Back Pressure' in the Connection summary table does not work properly
- fix style issues
- review feedback

This closes #4208

* NIFI-7292 Preventing file listing from fail because of insufficient privileges

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4195.

* Added Jira and security reporting links to README.md

* NIFI-7359 Fix parent id on process metrics for Prometheus

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4209

* NIFI-7348 Wait - Removes WAIT_START_TIMESTAMP after expiration

This closes #4201.

Signed-off-by: Koji Kawamura <ijokarumawak@apache.org>

* NIFI-7334 Adding FetchDataLakeStorage Processor to provide native support for Azure Data lake Gen 2 Storage.

NIFI-7334 Update to FetchDataLakeStorage Processor

This closes #4212.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7366 - ConsumeEWS Processor parse EML

https://issues.apache.org/jira/browse/NIFI-7366

This commit allows to retrieve ItemAttachement (such as EML) file when pulling mail.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4215.

* NIFI-7318 - Allow 'docker stop' to gracefully shutdown

As it is issuing 'docker stop' will immediatly exit the container.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4182.

* NIFI-7300 Allowing narrow numeric types to fit againt schema check with wider type; Allowing doubles with value within float precision to be considered as valid floats (NIFI-7302)

* NIFI-7375: This closes #4218. Fixed a bug that caused Provenance Events not to show up in specific situations when clicking View Provenance for a Processor.
- Added System-level tests for Provenance repository to reproduce behavior.
- Added a Provenance Client to the CLI, which is necessary for System-level tests.
- Added small additional configuration for Provenance repository to simplify development of system tests
- Minor improvements to system tests (such as ability to destroy environment between tests) needed for Provenance repository based system tests

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7280 ReportLineageToAtlas recognizes 'atlas.metadata.namespace' from Atlas config file.

Still recognizes 'atlas.cluster.name' as well, but takes lower precedence than the new property.
Also Atlas URL can be provided via the 'atlas.rest.address' property in the atlas-application.properties.

NIFI-7280 In ReportLineageToAtlas improved documentation and adjusted property ordering for better user experience. Minor refactor.
NIFI-7280 In ReportLineageToAtlas amended documentation. Minor refactor.
NIFI-7280 In ReportLineageToAtlas amended more documentation. More minor refactor.
NIFI-7280 - In Atlas reporting: complete clusterName -> namespace overhaul where appropriate.

This closes #4213.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7378: Ensure label values are not null in Prometheus metrics (#4219)

* Do not update status for stopping a deleted node

* NIFI-7389 Makes Missable heartbeat counts configurable

This closes #4236.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7377 Cleaned up nifi-stateless logs.
Refactored masking logic to CipherUtility and indicated masking with label and Base64 output.
Added JSON masking logic to nifi-stateless module.
Added argument masking functionality to Program.
Moved groovy unit tests to proper Maven directory structure.
Modified plain argument output to use filtering/masking methods in provided utility.
Refactored utility methods.
Updated unit tests.

This closes #4222.

Co-authored-by: Pierre Villard <pierre.villard.fr@gmail.com>

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7298: PutAzureDataLakeStorage tests.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4227.

* NIFI-7379: Support multiple instances of Prometheus registries/metrics (#4229)

* NIFI-7379: Support multiple instances of Prometheus registries/metrics

* NIFI-7379: Refactored Prometheus objects to support multiple instances

* NIFI-7394: Add support for sending Multipart/FORM data to InvokeHTTP.
By using dynamic properties with a prefix naming scheme, allow
definition of the parts, including the name to give the Flowfile content
part, and optionally it's file name.
After review:
- change so that we can send just the form content or just form data
  without the flowfile
- change the content name and content file name from dynamic properties
  to properties
- change the dynamic name to be an invalid http header "post:form:xxxx"
- add validation and more tests

This closes #4234.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7408 - added percent used metrics for connections

NIFI-7408 - return double value for utilization

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4240

* NIFI-7170:
- Adding a flag to nifi.properties to disable anonymous authentication.

NIFI-7170:
- Fixing checkstyle issues.

NIFI-7170:
- Adding missing license header.

NIFI-7170:
- Initial PR feedback.

NIFI-7170:
- Fixing broken integration tests.
- Creating new integration tests for verifying allowing and preventing anonymous access.

NIFI-7170:
- Ensuring the new anonymous authentication property is considered for proxied requests.

NIFI-7170 - Fixed comment.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4099.

* Added note about unique initial user identity names to walkthrough doc.

* NIFI-6149: Azure EventHub Managed identities support patch

review changes
additional review changes
NIFI-6149: typo fixes

This closes #4226.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7416: Update travis-ci to GitHub Actions in the PR template

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4247.

* NIFI-7415: Add .asf.yaml to configure GitHub integrations

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4246.

* NIFI-7404: Fixed invalid script processors upon thread termination

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4238.

* NIFI-7412: Fixed provenance event types in Azure Fetch/Delete processors

This closes #4245.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7414: Escape user-defined values that contain invalid XML characters before writing flow.xml.gz

NIFI-7414: Updated StandardFlowSerializerTest to include testing for variable names and values being filtered

This closes #4244

* NIFI-7425 Log Message for ReplaceText Over Buffer Size

Adds a log message when ReplaceText sends a flowfile to the failure relationship because
it is larger than the max buffer size.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4255.

* NIFI-7420 remove the http.param attribute. It contained both the query parameters already captured in http.query.param _and_ the multipart form data names and values, which are captured in the part data, and could be very very large

This closes #4251.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7428: Switch hive.version property to set Hive 3 version

This closes #4259

* NIFI-7398 Upgraded jackson-databind dependency version to 2.9.10.4 at root pom.xml.
Upgraded tika-parsers dep in nifi-media-processors.
Upgraded jackson-databind dep in nifi-graph-processors.
Upgraded jackson-databind dep in nifi-elasticsearch-client-service-api.
Upgraded jackson-databind dep in in nifi-easyrules-service.
Upgraded calcite-core dep in nifi-sql-reporting-tasks.

Signed-off-by: Nathan Gough <thenatog@gmail.com>

This closes #4252.

* NIFI-7390 Covering Avro type conversion in case of map withing Record

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4256

* NIFI-7423 Upgraded jquery dependency version.

NIFI-7423 Upgraded jquery dependency version to latest 3.5.1.

This closes #4258

* NIFI-6913: PutAzureBlobStorage processor will create container if not exists

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4237.

* NIFI-7413: Documented REMOTE_INVOCATION provenance event type in user/dev guides

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4267

* NIFI-7321 - Allow NiFi admins to configure whether Jetty will send the Jetty server version in responses.
Fixed a checkstyle error.
Added property to nifi.properties.
Changed property to a variable that is set with the pom.xml.
Added setting the version variable to another HTTPConfiguration to fix the version being sent in docs context.
Fixed typo error.

This closes #4192.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7367: Add tests for FetchAzureDataLakeStorage

NIFI-7367: Negative test cases for expression language in FetchAzureDataLakeStorage
FetchAzureDataLakeStorage throws exception when filesystem or filename is blank.
Fixed logged error messages in all 3 of the Delete, Fetch and Put ADLS processors.
testFetchDirectory test case marked as ignored.

This closes #4257.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7448: Fix quoting of DDL table name in PutORC

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4269.

* NIFI-7460: Avoid NPE when a VersionedProcessor has a null value for autoTerminatedRelationships. Added additional logging and improved error handling around syncing with invalid flows

* NIFI-7437 - created separate thread for preloading predictions, refactors for performance

NIFI-7437 - reduced scheduler to 15 seconds, change cache to expire after no access vs expire after write

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4274

* NIFI-6497: Allow FreeFormTextRecordSetWriter to access FlowFile Attributes

This closes #4275.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7380 - fix for controller service validation in NiFi Stateless

This closes #4264.

Signed-off-by: Matthieu Cauffiez <matthieu.cauffiez@bell.ca>
Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7446: FetchAzureDataLakeStorage processor now throws exception when the specified path points to a directory

A newer version (12.1.1) of azure-storage-file-datalake is imported.

This closes #4273.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7331 Fixed grammatical errors in log output.

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4283.

* NIFI-7409: Azure managed identity support to Azure Datalake processors

NIFI-7409: review changes
NIFI-7409: ordering import statements
NIFI-7409: changed validateCredentialProperties logic

This closes #4249.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7336: Add tests for DeleteAzureDataLakeStorage

DeleteAzureDataLakeStorage now throws exception if fileSystem or fileName is empty string

NIFI-7336: Add tests for DeleteAzureDataLakeStorage - typos fixed
NIFI-7336: Add tests for DeleteAzureDataLakeStorage - fixed a test case

This closes #4272.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-6911 Removed default Blob value for PutAzureBlobStorage

This closes #3906

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7407 Replaced SSLContextFactory references to "TLS" with "TLSv1.2" (in shared constant).
Changed JettyServer default SSL initialization and updated unit test.
Removed SecurityStoreTypes (unused).
Added StringUtils inverted blank and empty checks.
Added TlsConfiguration container object.
Enhanced KeystoreType enum.
Added clean #createSSLContext() method to serve as base method for special cases/other method signatures.
Added utility methods in KeyStoreUtils.
Added generic TlsException for callers that cannot resolve TLS-specific exceptions.
Added utility methods for component object debugging.
Enforced TLS protocol version on cluster comms socket creation.
Added utility method for SSL server socket creation.
Refactored (Server)SocketConfigurationFactoryBean to store relevant NiFiProperties in TlsConfiguration instead of stateful SSLContextFactory (Cluster comms now enforce modern TLS protocol version).
Removed duplicate SSLContextFactory.
Switched duplicate SslContextFactory to wrap shared SSLContextFactory.
Refactored SslContextFactoryTest for clarity (will move any unique tests to nifi-security-utils class test).
Added further validation & boundary checking in uses of TlsConfiguration.
Provided SSLSocketFactory accessor in SslContextFactory.
Refactored OkHttpReplicationClient tuple method.
Refactored OcspCertificateValidator TLS logic.
Added utility method to apply TLS configs to OkHttpClientBuilder.
Removed references to duplicate SslContextFactory.
Removed unnecessary SslContextFactory.
Moved OkHttpClientUtils to nifi-web-util module.
Updated module dependencies.
Removed now empty nifi-security module.
Enforced TLS protocol selection on LB server socket.
Enforced TLS protocol selection on S2S server socket.
Applied specified TLS protocol versions to S2S socket creation.
Completed removal of legacy SSLContext creation methods from only remaining SslContextFactory.
Replaced references to creation methods throughout codebase.
Replaced references to unnecessary NiFiProperties file reads throughout tests.
Removed duplicate ClientAuth enum from SSLContextService and changed all references to SslContextFactory.ClientAuth.
Suppressed repeated TLS exceptions in cluster, S2S, and load balance socket listeners.
Cleaned up legacy code.
Added external timing check to timing test assertion.
Made RestrictedSSLContextService TLS protocol versions allowable values explicit.
Enabled TLSv1.3 on Java 11.
Added explanations of TLS protocol versions in StandardSSLContextService and StandardRestrictedSSLContextService.
Resolved additional Java 11 test failures for NiFi internal classes that don't support TLSv1.3. Filed NIFI-7468 as follow on task.

This closes #4263.

Signed-off-by: Nathan Gough <thenatog@gmail.com>
Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7471 fix bug with property validation

* NIFI-6571 Check token length on TLS toolkit server startup

This closes #3659.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* Fixed a couple of typos in the RecordPath guide

* NIFI-7463
Create empty relationship for RunMongoAggregation

Fix default autoterminate and condition to redirect to REL_EMPTY

Change from new relationship to write an empty FlowFile to RESULT

Fix MONGO_URI

This closes #4281

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7462: This adds a way to convert or cast a choice object into a valid type for use with calcite query functions

NIFI-7462: Update to allow FlowFile Table's schema to be more intelligent when using CHOICE types

NIFI-7462: Fixed checkstyle violation, removed documentation around the CAST functions that were no longer needed

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4282

* NIFI-7482 Changed InvokeHTTP to be extensible.
Added unit test.

This closes #4291.

Signed-off-by: Arpad Boda <aboda@apache.org>

* Updated pull request template to separate JDK 8 and 11 questions

* NIFI-6255 NIFI-6287: Hash function for expression language and record path.
NIFI-6255 NIFI-6287: Rebased to match the new expression language interface
NIFI-6255 NIFI-6287: Fix wildcard imports and unused imports
NIFI-6255 NIFI-6287: Move to the common codec DigetUtils
Update commons-codec

This closes #3624

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6672 PlusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to POSITIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc
NIFI-6672 Removed test code.

This closes #3738

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6673 MultiplyEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to POSITIVE_INFINITY or NEGATIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc

This closes #3739

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-6674 MinusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to NEGATIVE_INFINITY

MinusEvaluator throws an Arithmetic Exception in case of Long overflow.
TestQuery checks that Long overflow is detected and Double overflow is correctly promoted to NEGATIVE_INFINITY

The behaviour change is reverted until further investigations.
The overflow behaviour is still enforced by unit tests and documented in the expression language doc

fixed mispositioned # in doc

This closes #3740

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7211 Added @Ignore with warning message to a test that randomly fails due to timing issues.

This closes #4296

* NIFI-6785 Support Deflate Compression
NIFI-6785 Remove unused imports

This closes #3822

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7453 In PutKudu creating a new Kudu client when refreshing TGT

NIFI-7453 Creating a new Kudu client when refreshing TGT in KerberosPasswordUser as well. (Applied to KerberosKeytabUser only before.)
NIFI-7453 Safely closing old Kudu client before creating a new one.
NIFI-7453 Visibility adjustment.

This closes #4276.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7485 Updated commons-configuration2.
NIFI-7485 Found more instances that needed updating.

This closes #4295

* NIFI-7445: Add Conflict Resolution property to PutAzureDataLakeStorage processor

NIFI-7445: Add Conflict Resolution property to PutAzureDataLakeStorage processor
Made warning and error messages more informative.
Refactored flowFile assertion in the tests.

This closes #4287.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7487 - Added batch support and displayName to ModifyBytes processor

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4302.

* NIFI-7483 - Remove description about 'Rolling strategy' in TailFile's docs

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4293.

* NIFI-7484:fix ListFTP and FetchFTP docs. Change 'SFTP' to 'FTP' in description

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4294.

* NIFI-7422: Support aws_s3_pseudo_dir in Atlas reporting task

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4292.

* NIFI-6701 - Fix for PublishGCPPubSub

* NIFI-7430 - LookupRecord change coordinate key for in-place replacement

* NIFI-6666 Add Useragent Header to InvokeHTTP requests

This closes #3734

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* Updated KEYS with new key after previous one expired

* NIFI-7403:Add a function that adjust if the result is failed before we call the onFailed or onCompleted function. If the result is failed, return true and do sth

NIFI-7403:Add an extension point to adjust the result, if the result is failed then process onFailed function

NIFI-7403:Implement the AdjustFailed Function, if PutSQL set the SUPPORT_TRANSACTIONS true, then check whether the result contains REL_RETRY or REL_FAILURE.If it contains that, reroute the result and return true.

NIFI-7403: fix reroute logic in AdjustFailed function

NIFI-7403:Add and modify some unit test for PutSQL's SUPPORT_TRANSACTIONS property

NIFI-7403:Update for PR recheck

NIFI-7403:Add documentation on the Support Fragmented Transactions property to indicate the transactions rollback behavior

NIFI-7403: Fix Checkstyle issue

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4266

* NIFI-7477 Optionally adding validation details as a new attribute of the flowfile

NIFI-7477 Improving description and unit test now verifies attribute content

NIFI-7477: Fixed checkstyle errors

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4301

* NIFI-7447: When returning an object from a Controller Service, if that object is defined as an interface, proxy that interface. This way, any method call into the object will also change the classloader to the appropriate classloader.

* NIFI-7312: Enable search in variable registry of root process group

This closes #4303.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7369 Adding decimal support for record handling in order to avoid missing precision when reading in records

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7369: Consider DECIMAL type as a numeric type when using a CHOICE type in QueryRecord

This closes #4223.

* NIFI-7299 Add basic OAuth2 token provider service that can fetch access tokens when supplied with appropriate credentials.

Added skeleton of oauth2 provider.
Added copy of our code.
Refactored a few things.
Updated apis to better match flow descriptions.
Updated poms and other artifacts.
Updated copyright notice.
Updated LICENSE.

This closes #4173

Signed-off-by: Jeremy Dyer <jeremydyer@apache.org>

* NIFI-7476: Implemented FlowFileGating / FlowFileConcurrency at the ProcessGroup level
Added FlowFileOutboundPolicy to ProcessGroups and updated LocalPort to make use of it
Persisted FlowFile Concurrency and FlowFile Output Policy to flow.xml.gz and included in flow fingerprint
Added configuration for FlowFile concurrency and outbound policy to UI for configuration of Process Groups
Added system tests. Fixed a couple of bugs that were found
Fixed a couple of typos in the RecordPath guide

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4306.

* NIFI-7508: Reset classloader after running TestStandardControllerServiceInvocationHandler
and fix checkstyle violation on NiFiSystemIT

* NIFI-7467 Refactored S2S peer selection logic.
Removed list structure for peer selection as it was unnecessary and often wasteful (most clusters are 3 - 7 nodes, the list was always 128 elements).
Changed integer percentages to double to allow for better normalization.
Removed 80% cap on remote peers as it was due to legacy requirements.
Added unit tests for non-deterministic distribution calculations.
Added unit tests for edge cases due to rounding errors, single valid remotes, unbalanced clusters, and peer queue consecutive selection tracking.
Migrated all legacy PeerSelector unit tests to new API.
Removed unused System time manipulation as tests no longer need it.
Added class-level Javadoc to PeerSelector.
Removed S2S details request replication, as the responses were not being merged, which led to incorrect ports being returned and breaking S2S peer retrieval.
Fixed copy/paste error where input ports were being listed as output ports during remote flow refresh.
Fixed comments and added unbalanced cluster test scenarios.
Removed unnecessary marker interface.
Removed commented code.
Changed weighting & penalization behavior.
Changed dependency scope to test.

This closes #4289.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7393: Add max idle time and idle connections to InvokeHTTP

This closes #4233.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7507: Added section to User Guide on configuring a Process Group

NIFI-7507: Fixed Flowfile Expiration header in doc

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4318

* NIFI-7511 In ControllerServiceProxyWrapper extended documentation. Minor refactor in StandardControllerServiceInvocationHandler. Also removed an unused import from NiFiSystemIT.

This closes #4317.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7385 Provided reverse-indexed TokenCache implementation.
Cleaned up code style.
Unit test was failing on Windows 1.8 GitHub Actions build but no other environment. Increased artificial delay to avoid timing issues.

Co-authored-by: Andy LoPresto <alopresto@apache.org>

This closes #4271.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7514:
- Ensuring the group id is always set in the properties table when loading properties.
- Using a common approach to getting parameters in nfControllerService.
- Code clean up.
- Addressing review feedback.
- Ensuring the service dialog is closed when navigating to the parameter context dialog.

This closes #4322

* NIFI-7490 - Add optional raw field to Syslog readers

review

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4299

* NIFI-7313:fix bug on 'Quote Table Identifiers'
NIFI-7313:add test by wanghongqi
NIFI-7313:edit test

Signed-off-by: Matthew Burgess <mattyb149@apache.org>

This closes #4185

* NIFI-7434: Add endpoint suffix to Azure storage processors

This closes #4265.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7442 Add CLI commands to the registry in order to support automatic registry setup

* NIFI-7442 Added missing use cases (list users and user groups), made update-access-policy use case more in line with the NiFi side. Added some tests. Additional refactor, documentation revision.

This closes #4329.

* NIFI-7527 AbstractKuduProcessorrefresh TGT deadlock fix: Redesigned locking.

NIFI-7527 Fixed StackOverFlowError due to pacing issue (recursive login before loggedIn flag is set).
NIFI-7527 Refactor: removed redundant kudu client creation.

This closes #4330.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7035 The first curator connection issue is logged as ERROR until reconnect

* NIFI-7539: When capturing diagnostics information, capture a thread dump once and then provide this information to ProcessorNode when capturing active threads. Previously, each processor captured a thread dump itself. When this is done thousands of times it can result in a very long delay.

* NIFI-7540: Fix TestListenSMTP and TestListFile on macOS build environment (#4341)

* NIFI-7540: Fix TestListenSMTP and TestListFile on macOS build environment

This also fixes NIFI-4760.

* NIFI-7540: Remove duplicate mail.smtp.starttls.enable from TestListenSMTP

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7537 - Small fix to make the LDAP connection timeout property a String rather than a Long. Fixes cast error in LDAP libs.

* NIFI-6094 - Added the X-Content-Type-Options header to all web responses. (#4307)

NIFI-6094 - Added the mime/content type for ttf files.

* NIFI-7551 Add support for VARCHAR to Kudu NAR bundle
 - update Kudu dependencies to Kudu 1.12.0
 - add VARCHAR to Kudu Lookup Service and Processor
 - add tests for VARCHAR columns

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4347.

* NIFI-7536: Fix to improve performance when determining the run status of processors when needing to wait for all processors to stop for updating parameter context, etc.

* NIFI-7509: Added optional Record Writer property to all List* Processors

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4315.

* NIFI-7566: Avoid using Thread.sleep() to wait for Site-to-Site connection to be handled. Instead, use TimeUnit.timedWait and use Object.notifyAll when setting the beingServiced flag. This significantly reduces latency and improves throughput for small-batch site-to-site communications

This closes #4353.

Signed-off-by: Andy LoPresto <alopresto@apache.org>

* NIFI-7529 Removed OS and Java information from InvokeHttp's UserAgent field so that it's removed regardless of whether or not this field is kept.

This closes #4332

* NIFI-7516: Catch and log SingularMatrixExceptions in OrdinaryLeastSquares model (#4323)

* NIFI-7501
Update nf-context-menu.js for an intuitive road to parameters
When rightclicking a process group the variables are shown, but parameters are not. This makes sense as they have a prerequisite, in the form of a parameter context. This change gives a more consistent experience for finding the functionality regarding parameters by ensuring the contextmenu shows the possibility to configure a parameter context. Once the paramater context has been created for a process group, the parameters text shows, so this is no longer visible. People would then need to click configure to change the context, just as they would be required to do now.

Added generateflowfile load tag and description
Added GenerateFlowFile load tag to be consistent with DuplicateFlowFile and updated description to refer to DuplicateFlowFile.

Revert "Update nf-context-menu.js for an intuitive road to parameters"

This reverts commit 3c44b1661f09fb6ae11d2f088550f81fb7a4b393.

This closes #4333

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7558 Fixed CatchAllFilter init logic by calling super.init().
Renamed legacy terms.
Updated documentation.

This closes #4351.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-7542 Override jackson-databind version.
NIFI-7542 Override additional jackson-databind versions.
NIFI-7542 Upgrade jackson-databind dependency to 2.9.10.5 in the root pom.xml.

This closes #4343

Signed-off-by: Mike Thomsen <mthomsen@apache.org>

* NIFI-7523: Use SSL Context Service for Atlas HTTPS connection in Atla… (#4348)

* NIFI-7523: Use SSL Context Service for Atlas HTTPS connection in Atlas reporting task

Also fixing ControllerServiceDisabledException-s when validating the Kerberos config

* NIFI-7523: Fixed test failure on Windows

* NIFI-7523: Added license headers.

* NIFI-7523: Fixed another test failure on Windows

* NIFI-7523: Review changes

* NIFI-7576 ListenHTTP: Honor primary node only
ListenHTTP processor now binds port and creates a HTTP connection only
if one of the following conditions apply:
- Primary node execution is 'false'
- Primary node execution is 'true' and node is elected as primary node.

Changes:
- Connection is established in 'onTrigger' annotated method instead of
  'onSchedule'. (This is similar to how handleHTTPRequest processor
  handles connections.)
- 'onPrimaryNodeStateChange' annotated method is introduced to tear down
  server on reelection of primary node

This closes #4356.

Signed-off-by: Mark Payne <markap14@hotmail.com>

* NIFI-6163 Reporting task cannot be set to running when in INVALID state

Signed-off-by: Pierre Villard <pierre.villard.fr@gmail.com>

This closes #4334.

* NIFI-7577 Upgrade angular version.

* NIFI-7577 Update jquery usages.

This closes #4357

Signed-off-by: Scott Aslan <scottyaslan@gmail.com>

* NIFI-7586 In CassandraSesionProvider added properties to set socket-level read timeout and connect timeout.

In QueryCassandra when writing flowfile to the sesion it's done on the raw OutputStream.
Wrapped it in a BufferedOutputStream for better performance.

This closes #4368.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7578 nifi-toolkit CLI Process Group Create command
- Remove unused imports
- Fix checkstyle errors

This closes #4358.

* NIFI-7587 This closes #4372. Increased tolerance for non-deterministic unit test.

Signed-off-by: Joe Witt <joewitt@apache.org>

* NIFI-7590 In 'CassandraSessionProvider.onDisabled' setting Cassandra-related references properly to null after closing them so that they can be renewed in 'onEnabled' (which creates them only if set to 'null', leaving them closed otherwise).

NIFI-7590 Removed 'CassandraSessionProvider.onStopped'.

This closes #4373.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7513 Added custom DNS resolution steps to walkthrough (#4359)

* NIFI-7563: Optimize the usage of JMS sessions and message producers

The introduced changes prevent creating unnecesary sessions and producers
in some scenarios.

This closes #4378.

Signed-off-by: Joey Frazee <jfrazee@apache.org>

* NIFI-7594 In HandleHttpRequest deleting multipart file resources after processing.

This closes #4379.

Signed-off-by: Peter Turcsanyi <turcsanyi@apache.org>

* NIFI-7332 Added method to log available claim names from the ID provider response when the OIDC Identifying User claim is not found. Revised log message to print available claims.
Added new StandardOidcIdentityProviderGroovyTest file.
Updated deprecated methods in StandardOidcIdentityProvider. Changed log output to print all available claim names from JWTClaimsSet. Added unit test.
Added comments in getAvailableClaims() method.
Fixed typos in NiFi Docs Admin Guide.
Added license to Groovy test.
Fixed a checkstyle error.
Refactor exchangeAuthorizationCode method.
Added unit tests.
Verified all unit tests added so far are passing.
Refactored code. Added unit tests.
Refactored OIDC provider to decouple constructor & network-dependent initialization.
Added unit tests.
Added unit tests.
Refactored OIDC provider to separately authorize the client. Added unit tests.
Added unit tests.

NIFI-7332 Refactored exchangeAuthorizationCode method to separately retrieve the NiFi JWT.

Signed-off-by: Natha…
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fnifi%2Fpull%2F4208)

Reviewers

[![@mcgilman](https://avatars.githubusercontent.com/u/123395?s=40&v=4)](/mcgilman) [mcgilman](/mcgilman)

 Awaiting requested review from mcgilman

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@rfellows](https://avatars.githubusercontent.com/u/713866?s=52&v=4)](/rfellows) [![@mcgilman](https://avatars.githubusercontent.com/u/123395?s=52&v=4)](/mcgilman)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from nifi.apache.org_44c9fe3e_20250119_113306.html ===


* [![Apache NiFi Logo](/images/apache-nifi-drop-logo.svg)](/)
* [Documentation](/documentation/)
  + [NiFi Version 2 Documentation](/components/)
  + [NiFi Version 1 Documentation](/documentation/v1/)
  + [Guides](/documentation/guides/)
  + [Security Reporting](/documentation/security/)
  + [Wiki](https://cwiki.apache.org/confluence/display/NIFI)
* [Development](/development/)
  + [Contributing](https://cwiki.apache.org/confluence/display/NIFI/Contributor%2BGuide)
  + [Issues](https://issues.apache.org/jira/browse/NIFI)
  + [Source](https://github.com/apache/nifi)
* [Community](/community/)
  + [Contact](/community/contact/)
  + [Powered By](/community/powered-by/)
  + [Team](/community)
* [Projects](/projects/)
  + [MiNiFi](/projects/minifi/)
  + [Registry](/projects/registry/)
  + [Flow Design System](/projects/fds/)
* [Apache](https://www.apache.org)
  + [Events](https://apache.org/events/current-event)
  + [License](https://www.apache.org/licenses)
  + [Privacy](https://privacy.apache.org/policies/privacy-policy-public.html)
  + [Sponsorship](https://www.apache.org/foundation/sponsorship.html)
  + [Thanks](https://www.apache.org/foundation/thanks.html)

* [Download](/download/)

* Documentation
  + [NiFi Version 2 Documentation](/components/)
  + [NiFi Version 1 Documentation](/documentation/v1/)
  + [Guides](/documentation/guides/)
  + [Security Reporting](/documentation/security/)
  + [Wiki](https://cwiki.apache.org/confluence/display/NIFI)
* Development
  + [Contributing](https://cwiki.apache.org/confluence/display/NIFI/Contributor%2BGuide)
  + [Issues](https://issues.apache.org/jira/browse/NIFI)
  + [Source](https://github.com/apache/nifi)
* Community
  + [Contact](/community/contact/)
  + [Powered By](/community/powered-by/)
  + [Team](/community)
* Projects
  + [MiNiFi](/projects/minifi/)
  + [Registry](/projects/registry/)
  + [Flow Design System](/projects/fds/)
* Apache
  + [Events](https://apache.org/events/current-event)
  + [License](https://www.apache.org/licenses)
  + [Privacy](https://privacy.apache.org/policies/privacy-policy-public.html)
  + [Sponsorship](https://www.apache.org/foundation/sponsorship.html)
  + [Thanks](https://www.apache.org/foundation/thanks.html)

# Apache NiFi Security

Apache NiFi welcomes the responsible reporting of security vulnerabilities. Project Management Committee members will
collaborate and respond to potential vulnerabilities, providing an assessment of the concern and a plan of action to
remediate verified issues.

## Reporting Policy

Please read the [Apache Project Security for Committers](https://www.apache.org/security/committers.html)
policy for general guidelines applicable disclosure of security issues for Apache Software Foundation projects.

Do not perform the following actions after discovering a potential security concern:

* Open a Jira disclosing a security vulnerability to the public
* Send a message to the project mailing lists disclosing a security vulnerability to the public
* Send a message to the project Slack instance disclosing a security vulnerability to the public

## Reporting Guidelines

Configuring dangerous operating system commands or custom scripts is not a project security vulnerability.
Authenticated and authorized users are responsible for the security of operating system commands and custom
code.

Apache NiFi provides a framework for developing processing pipelines using standard and custom
components. The framework supports configurable permissions that enable authorized users to execute code
using several standard components. Components such as ExecuteProcess and ExecuteStreamCommand support
running operating system commands, while other scripted components support executing custom code using
different programming languages. Configuring these components with untrusted commands or arguments is
contrary to best practices, but it does not constitute of security issue for remediation.

## Reporting Process

* Notify the project on initial discovery of a potential security vulnerability
* Provide a reasonable amount of time for an initial assessment and remediation plan
* Limit interaction to accounts under direct control or accounts with explicit permission of the owner
* Avoid privacy violations, destruction of data, and interruption or degradation of services
* Avoid spamming, social engineering, and methods to manipulate project members

## Reporting Methods

* Security Mailing List: security@nifi.apache.org
  + Members of the Project Management Committee monitor this private mailing list and respond to disclosures

## Severity Ratings

Severity ratings represent the determination of project members based on an evaluation of
[Common Vulnerability Scoring System](https://www.first.org/cvss/) calculations.

* Critical: Arbitrary code execution from a remote attacker
* High: Compromise of integrity or availability through resource exhaustion
* Medium: Requires special configuration settings and significant mitigations are available
* Low: Minimal impact and significant difficulty of exploitation

# Published Vulnerabilities

The following announcements include published vulnerabilities that apply directly to Apache NiFi components.

### CVE-2024-56512

* Title: Missing Complete Authorization for Parameter and Service References
* Published: 2024-12-27
* Severity: Low
* Products: Apache NiFi
* Affected Versions: 1.10.0 to 2.0.0
* Fixed Versions: 2.1.0
* Reporter: Matt Gilman
* References
  + CVE Record: [CVE-2024-56512](https://www.cve.org/CVERecord?id=CVE-2024-56512)
  + NVD Record: [CVE-2024-56512](https://nvd.nist.gov/vuln/detail/CVE-2024-56512)
  + Apache Jira Issue: [NIFI-13976](https://issues.apache.org/jira/browse/NIFI-13976)
  + GitHub Pull Request: [9535](https://github.com/apache/nifi/pull/9535)

Apache NiFi 1.10.0 through 2.0.0 are missing fine-grained authorization checking for Parameter Contexts, referenced
Controller Services, and referenced Parameter Providers, when creating new Process Groups. Creating a new Process Group
can include binding to a Parameter Context, but in cases where the Process Group did not reference any Parameter values,
the framework did not check user authorization for the bound Parameter Context. Missing authorization for a bound
Parameter Context enabled clients to download non-sensitive Parameter values after creating the Process Group. Creating
a new Process Group can also include referencing existing Controller Services or Parameter Providers. The framework did
not check user authorization for referenced Controller Services or Parameter Providers, enabling clients to create
Process Groups and use these components that were otherwise unauthorized. This vulnerability is limited in scope to
authenticated users authorized to create Process Groups. The scope is further limited to deployments with
component-based authorization policies. Upgrading to Apache NiFi 2.1.0 is the recommended mitigation, which includes
authorization checking for Parameter and Controller Service references on Process Group creation.

### CVE-2024-52067

* Title: Potential Insertion of Sensitive Parameter Values in Debug Log
* Published: 2024-11-20
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.16.0 to 1.28.0 and 2.0.0-M1 to 2.0.0-M4
* Fixed Versions: 1.28.1 and 2.0.0
* Reporter: David Handermann
* References
  + CVE Record: [CVE-2024-52067](https://www.cve.org/CVERecord?id=CVE-2024-52067)
  + NVD Record: [CVE-2024-52067](https://nvd.nist.gov/vuln/detail/CVE-2024-52067)
  + Apache Jira Issue: [NIFI-13971](https://issues.apache.org/jira/browse/NIFI-13971)
  + GitHub Pull Request: [9489](https://github.com/apache/nifi/pull/9489)

Apache NiFi 1.16.0 through 1.28.0 and 2.0.0-M1 through 2.0.0-M4 include optional debug logging of Parameter Context values
during the flow synchronization process. An authorized administrator with access to change logging levels could enable debug logging
for framework flow synchronization, causing the application to write Parameter names and values to the application log.
Parameter Context values may contain sensitive information depending on application flow configuration.
Deployments of Apache NiFi with the default Logback configuration do not log Parameter Context values.
Upgrading to Apache NiFi 2.0.0 or 1.28.1 is the recommendation mitigation, eliminating Parameter value logging from the flow synchronization process regardless of the Logback configuration.

### CVE-2024-45477

* Title: Improper Neutralization of Input in Parameter Description
* Published: 2024-10-28
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.10.0 to 1.27.0 and 2.0.0-M1 to 2.0.0-M3
* Fixed Versions: 1.28.0 and 2.0.0-M4
* Reporter: Muhammad Hazim Bin Nor Aizi
* References
  + CVE Record: [CVE-2024-45477](https://www.cve.org/CVERecord?id=CVE-2024-45477)
  + NVD Record: [CVE-2024-45477](https://nvd.nist.gov/vuln/detail/CVE-2024-45477)
  + Apache Jira Issue: [NIFI-13675](https://issues.apache.org/jira/browse/NIFI-13675)
  + GitHub Pull Request: [9195](https://github.com/apache/nifi/pull/9195)

Apache NiFi 1.10.0 through 1.27.0 and 2.0.0-M1 through 2.0.0-M3 support a description field for Parameters in a Parameter Context
configuration that is vulnerable to cross-site scripting. An authenticated user, authorized to configure a Parameter Context,
can enter arbitrary JavaScript code, which the client browser will execute within the session context of the authenticated user.
Upgrading to Apache NiFi 1.28.0 or 2.0.0-M4 is the recommended mitigation.

### CVE-2024-37389

* Title: Improper Neutralization of Input in Parameter Context Description
* Published: 2024-07-08
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.10.0 to 1.26.0 and 2.0.0-M1 to 2.0.0-M3
* Fixed Versions: 1.27.0 and 2.0.0-M4
* Reporter: Akbar Kustirama at abay.sh, GitHub user abaykan
* References
  + CVE Record: [CVE-2024-37389](https://www.cve.org/CVERecord?id=CVE-2024-37389)
  + NVD Record: [CVE-2024-37389](https://nvd.nist.gov/vuln/detail/CVE-2024-37389)
  + Apache Jira Issue: [NIFI-13374](https://issues.apache.org/jira/browse/NIFI-13374)
  + GitHub Pull Request: [8938](https://github.com/apache/nifi/pull/8938)

Apache NiFi 1.10.0 through 1.26.0 and 2.0.0-M1 through 2.0.0-M3 support a description field in the Parameter Context
configuration that is vulnerable to cross-site scripting. An authenticated user, authorized to configure a Parameter
Context, can enter arbitrary JavaScript code, which the client browser will execute within the session context of the
authenticated user. Upgrading to Apache NiFi 1.27.0 or 2.0.0-M4 is the recommended mitigation.

### CVE-2023-49145

* Title: Improper Neutralization of Input in Advanced User Interface for Jolt
* Published: 2023-11-27
* Severity: High
* Products: Apache NiFi
* Affected Versions: 0.7.0 to 1.23.2
* Fixed Versions: 1.24.0
* Reporter: Dr. Oliver Matula, DB Systel GmbH
* References
  + CVE Record: [CVE-2023-49145](https://www.cve.org/CVERecord?id=CVE-2023-49145)
  + NVD Record: [CVE-2023-49145](https://nvd.nist.gov/vuln/detail/CVE-2023-49145)
  + Apache Jira Issue: [NIFI-12403](https://issues.apache.org/jira/browse/NIFI-12403)
  + GitHub Pull Request: [8060](https://github.com/apache/nifi/pull/8060)

Apache NiFi 0.7.0 through 1.23.2 include the JoltTransformJSON Processor, which provides an advanced configuration user
interface that is vulnerable to DOM-based cross-site scripting. If an authenticated user, who is authorized to configure
a JoltTransformJSON Processor, visits a crafted URL, then arbitrary JavaScript code can be executed within the session
context of the authenticated user. Upgrading to Apache NiFi 1.24.0 or 2.0.0-M1 is the recommended mitigation.

### CVE-2023-40037

* Title: Incomplete Validation of JDBC and JNDI Connection URLs
* Published: 2023-08-18
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.21.0 to 1.23.0
* Fixed Versions: 1.23.1
* Reporter: Matei 'Mal' Badanoiu
* References
  + CVE Record: [CVE-2023-40037](https://www.cve.org/CVERecord?id=CVE-2023-40037)
  + NVD Record: [CVE-2023-40037](https://nvd.nist.gov/vuln/detail/CVE-2023-40037)
  + Apache Jira Issue: [NIFI-11920](https://issues.apache.org/jira/browse/NIFI-11920)
  + GitHub Pull Request: [7586](https://github.com/apache/nifi/pull/7586)

Apache NiFi 1.21.0 through 1.23.0 support JDBC and JNDI JMS access in several Processors and Controller Services with
connection URL validation that does not provide sufficient protection against crafted inputs. An authenticated and
authorized user can bypass connection URL validation using custom input formatting. The resolution enhances connection
URL validation and introduces validation for additional related properties. Upgrading to Apache NiFi 1.23.1 is the
recommended mitigation.

### CVE-2023-36542

* Title: Potential Code Injection with Properties Referencing Remote Resources
* Published: 2023-07-28
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.0.2 to 1.22.0
* Fixed Versions: 1.23.0
* Reporter: nbxiglk
* References
  + CVE Record: [CVE-2023-36542](https://www.cve.org/CVERecord?id=CVE-2023-36542)
  + NVD Record: [CVE-2023-36542](https://nvd.nist.gov/vuln/detail/CVE-2023-36542)
  + Apache Jira Issue: [NIFI-11744](https://issues.apache.org/jira/browse/NIFI-11744)
  + GitHub Pull Request: [7426](https://github.com/apache/nifi/pull/7426)

Apache NiFi 0.0.2 through 1.22.0 include Processors and Controller Services that support HTTP URL references for
retrieving drivers, which allows an authenticated and authorized user to configure a location that enables custom code
execution. The resolution introduces a new Required Permission for referencing remote resources, restricting
configuration of these components to privileged users. The permission prevents unprivileged users from configuring
Processors and Controller Services annotated with the new Reference Remote Resources restriction. Upgrading to Apache
NiFi 1.23.0 is the recommended mitigation.

### CVE-2023-34468

* Title: Potential Code Injection with Database Services using H2
* Published: 2023-06-12
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.0.2 to 1.21.0
* Fixed Versions: 1.22.0
* Reporter: Matei 'Mal' Badanoiu
* References
  + CVE Record: [CVE-2023-34468](https://www.cve.org/CVERecord?id=CVE-2023-34468)
  + NVD Record: [CVE-2023-34468](https://nvd.nist.gov/vuln/detail/CVE-2023-34468)
  + Apache Jira Issue: [NIFI-11653](https://issues.apache.org/jira/browse/NIFI-11653)
  + GitHub Pull Request: [7349](https://github.com/apache/nifi/pull/7349)

The DBCPConnectionPool and HikariCPConnectionPool Controller Services in Apache NiFi 0.0.2 through 1.21.0 allow an
authenticated and authorized user to configure a Database URL with the H2 driver that enables custom code execution.
The resolution validates the Database URL and rejects H2 JDBC locations. Upgrading to NiFi 1.22.0 disables H2 JDBC URLs
in the default configuration.

### CVE-2023-34212

* Title: Potential Deserialization of Untrusted Data with JNDI in JMS Components
* Published: 2023-06-12
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.8.0 to 1.21.0
* Fixed Versions: 1.22.0
* Reporter: Veraxy00 of Qianxin TI Center and Matei 'Mal' Badanoiu
* References
  + CVE Record: [CVE-2023-34212](https://www.cve.org/CVERecord?id=CVE-2023-34212)
  + NVD Record: [CVE-2023-34212](https://nvd.nist.gov/vuln/detail/CVE-2023-34212)
  + Apache Jira Issue: [NIFI-11614](https://issues.apache.org/jira/browse/NIFI-11614)
  + GitHub Pull Request: [7313](https://github.com/apache/nifi/pull/7313)

The JndiJmsConnectionFactoryProvider Controller Service along with the ConsumeJMS and PublishJMS Processors, in Apache
NiFi 1.8.0 through 1.21.0 allow an authenticated and authorized user to configure URL and library properties that enable
deserialization of untrusted data from a remote location. The resolution validates the JNDI URL and restricts locations
to a set of allowed schemes. Upgrading to NiFi 1.22.0 disables LDAP for JNDI URLs in the default configuration.

### CVE-2023-22832

* Title: Improper Restriction of XML External Entity References in ExtractCCDAAttributes
* Published: 2023-02-09
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.2.0 to 1.19.1
* Fixed Versions: 1.20.0
* Reporter: Yi Cai of Chaitin Tech
* References
  + CVE Record: [CVE-2023-22832](https://www.cve.org/CVERecord?id=CVE-2023-22832)
  + NVD Record: [CVE-2023-22832](https://nvd.nist.gov/vuln/detail/CVE-2023-22832)
  + Apache Jira Issue: [NIFI-11029](https://issues.apache.org/jira/browse/NIFI-11029)
  + GitHub Pull Request: [6828](https://github.com/apache/nifi/pull/6828)

The ExtractCCDAAttributes Processor in Apache NiFi 1.2.0 through 1.19.1 does not restrict XML External Entity
references. Flow configurations that include the ExtractCCDAAttributes Processor are vulnerable to malicious XML
documents that contain Document Type Declarations with XML External Entity references. The resolution disables Document
Type Declarations and disallows XML External Entity resolution in the ExtractCCDAAttributes Processor. Upgrading to NiFi
1.20.0 disables Document Type Declarations in the default configuration for ExtractCCDAAttributes.

### CVE-2022-33140

* Title: Improper Neutralization of Command Elements in Shell User Group Provider
* Published: 2022-06-15
* Severity: High
* Products: Apache NiFi and Apache NiFi Registry
* Affected Versions: 1.10.0 to 1.16.2
* Fixed Versions: 1.20.0
* Reporter: Anonymous
* References
  + CVE Record: [CVE-2022-33140](https://www.cve.org/CVERecord?id=CVE-2022-33140)
  + NVD Record: [CVE-2022-33140](https://nvd.nist.gov/vuln/detail/CVE-2022-33140)
  + Apache Jira Issue: [NIFI-10114](https://issues.apache.org/jira/browse/NIFI-10114)
  + GitHub Pull Request: [6122](https://github.com/apache/nifi/pull/6122)

The optional ShellUserGroupProvider in Apache NiFi 1.10.0 to 1.16.2 and Apache NiFi Registry 0.6.0 to 1.16.2 does not
neutralize arguments for group resolution commands, allowing injection of operating system commands on Linux and macOS
platforms. The ShellUserGroupProvider is not included in the default configuration. Command injection requires
ShellUserGroupProvider to be one of the enabled User Group Providers in the Authorizers configuration. Command injection
also requires an authenticated user with elevated privileges. Apache NiFi requires an authenticated user with
authorization to modify access policies to execute the command. Apache NiFi Registry requires an authenticated user with
authorization to read user groups to execute the command. NiFi and NiFi Registry version 1.16.3 has completely removed
the shell commands from the ShellUserGroupProvider that received user arguments.

### CVE-2022-29265

* Title: Improper Restriction of XML External Entity References in Multiple Components
* Published: 2022-04-29
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.0.1 to 1.16.0
* Fixed Versions: 1.16.1
* Reporter: David Handermann at exceptionfactory.com
* References
  + CVE Record: [CVE-2022-29265](https://www.cve.org/CVERecord?id=CVE-2022-29265)
  + NVD Record: [CVE-2022-29265](https://nvd.nist.gov/vuln/detail/CVE-2022-29265)
  + Apache Jira Issue: [NIFI-9901](https://issues.apache.org/jira/browse/NIFI-9901)
  + GitHub Pull Request: [5962](https://github.com/apache/nifi/pull/5962)

Multiple components in Apache NiFi 0.0.1 to 1.16.0 do not restrict XML External Entity references in the default
configuration. The Standard Content Viewer service attempts to resolve XML External Entity references when viewing
formatted XML files. The following Processors attempt to resolve XML External Entity references when configured with
default property values: EvaluateXPath, EvaluateXQuery, and ValidateXml. Apache NiFi flow configurations that include
these Processors are vulnerable to malicious XML documents that contain Document Type Declarations with XML External
Entity references. Upgrading to NiFi 1.16.1 disables Document Type Declarations in the default configuration for these
processors, and disallows XML External Entity resolution in standard services.

### CVE-2022-26850

* Title: Insufficiently Protected Credentials for Single-User Authentication
* Published: 2022-03-27
* Severity: Low
* Products: Apache NiFi
* Affected Versions: 1.14.0 to 1.15.3
* Fixed Versions: 1.16.0
* Reporter: Jonathan Leitschuh at twitter.com/jlleitschuh
* References
  + CVE Record: [CVE-2022-26850](https://www.cve.org/CVERecord?id=CVE-2022-26850)
  + NVD Record: [CVE-2022-26850](https://nvd.nist.gov/vuln/detail/CVE-2022-26850)
  + Apache Jira Issue: [NIFI-9785](https://issues.apache.org/jira/browse/NIFI-9785)
  + GitHub Pull Request: [5856](https://github.com/apache/nifi/pull/5856)

When creating or updating credentials for single-user access, NiFi wrote a copy of the Login Identity Providers
configuration to the operating system temporary directory. The Login Identity Providers configuration file contains the
username and a bcrypt hash of the configured password. On most platforms, the operating system temporary directory has
global read permissions. NiFi immediately moved the temporary file to the final configuration directory, which
significantly limited the window of opportunity for access. Bcrypt is a password-hashing algorithm that incorporates a
random salt and a specified cost factor, designed to maintain resistance to brute-force attacks. Use of the bcrypt
algorithm minimizes the impact of disclosing the single-user credentials stored in Login Identity Providers. NiFi 1.16.0
includes updates to replace the Login Identity Providers configuration without writing a file to the operating system
temporary directory.

### CVE-2021-44145

* Title: Potential Information Disclosure through XML External Entity Resoltion in TransformXML
* Published: 2021-12-15
* Severity: Low
* Products: Apache NiFi
* Affected Versions: 0.1.0 to 1.15.0
* Fixed Versions: 1.15.1
* Reporter: DangKhai at Viettel Cyber Security
* References
  + CVE Record: [CVE-2021-44145](https://www.cve.org/CVERecord?id=CVE-2021-44145)
  + NVD Record: [CVE-2021-44145](https://nvd.nist.gov/vuln/detail/CVE-2021-44145)
  + Apache Jira Issue: [NIFI-9399](https://issues.apache.org/jira/browse/NIFI-9399)
  + GitHub Pull Request: [5542](https://github.com/apache/nifi/pull/5542)

In the TransformXML processor, an authenticated user could configure an XSLT file which, if it included malicious
external entity calls, may reveal sensitive information. The Secure processing property in TransformXML will now apply
to the configured XSLT file as well as flow files being transformed. Users running any previous NiFi release should
upgrade to 1.15.1.

### CVE-2020-9486

* Title: Potential Information Disclosure in Application Logs
* Published: 2020-08-18
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.10.0 to 1.11.4
* Fixed Versions: 1.12.0
* Reporter: Andy LoPresto and Pierre Villard
* References
  + CVE Record: [CVE-2020-9486](https://www.cve.org/CVERecord?id=CVE-2020-9486)
  + NVD Record: [CVE-2020-9486](https://nvd.nist.gov/vuln/detail/CVE-2020-9486)
  + Apache Jira Issue: [NIFI-7377](https://issues.apache.org/jira/browse/NIFI-7377)
  + GitHub Pull Request: [4222](https://github.com/apache/nifi/pull/4222)

The NiFi stateless execution engine produced log output which included sensitive property values. When a flow was
triggered, the flow definition configuration JSON was printed, potentially containing sensitive values in plaintext.
NiFi 1.12.0 implemented Argon2 secure hashing to provide a deterministic loggable value which does not reveal the
sensitive value. Users running any previous NiFi release should upgrade to 1.12.0.

### CVE-2020-9487

* Title: Potential Denial of Service with Token Authentication Requests
* Published: 2020-08-18
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.11.4
* Fixed Versions: 1.12.0
* Reporter: Dennis Detering, IT Security Consultant at Spike Reply
* References
  + CVE Record: [CVE-2020-9487](https://www.cve.org/CVERecord?id=CVE-2020-9487)
  + NVD Record: [CVE-2020-9487](https://nvd.nist.gov/vuln/detail/CVE-2020-9487)
  + Apache Jira Issue: [NIFI-7385](https://issues.apache.org/jira/browse/NIFI-7385)
  + GitHub Pull Request: [4271](https://github.com/apache/nifi/pull/4271)

The NiFi download token (one-time password) mechanism used a fixed cache size and did not authenticate a request to
create a download token, only when attempting to use the token to access the content. An unauthenticated user could
repeatedly request download tokens, preventing legitimate users from requesting download tokens. NiFi 1.12.0 disabled
anonymous authentication, implemented a multi-indexed cache, and limited token creation requests to
one concurrent request per user. Users running any previous NiFi release should upgrade to 1.12.0.

### CVE-2020-9491

* Title: Insecure TLS Protocol Versions for Cluster Communication
* Published: 2020-08-18
* Severity: High
* Products: Apache NiFi
* Affected Versions: 1.2.0 to 1.11.4
* Fixed Versions: 1.12.0
* Reporter: Juan Carlos Sequeiros and Andy LoPresto
* References
  + CVE Record: [CVE-2020-9491](https://www.cve.org/CVERecord?id=CVE-2020-9491)
  + NVD Record: [CVE-2020-9491](https://nvd.nist.gov/vuln/detail/CVE-2020-9491)
  + Apache Jira Issue: [NIFI-7407](https://issues.apache.org/jira/browse/NIFI-7407)
  + GitHub Pull Request: [4263](https://github.com/apache/nifi/pull/4263)

The NiFi UI and API were protected by mandating TLS v1.2, as well as listening connections established by processors
like ListenHTTP and HandleHttpRequest. However intra-cluster communication such as cluster request replication,
Site-to-Site, and load balanced queues continued to support TLS 1.0 or 1.1. NiFI 1.12.0 refactored disparate internal
SSL and TLS code, reducing exposure for extension and framework developers to low-level primitives. NiFi 1.12. also
added support for TLS v1.3 on supporting JVMs. This version restricted all incoming TLS communications to TLS
1.2 or higher. Users running any previous NiFi release should upgrade to 1.12.0.

### CVE-2020-13940

* Title: Potential Information Disclosure through XML External Entity Resolution in Notification Service
* Published: 2020-08-18
* Severity: Low
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.11.4
* Fixed Versions: 1.12.0
* Reporter: Matt Burgess and Andy LoPresto
* References
  + CVE Record: [CVE-2020-13940](https://www.cve.org/CVERecord?id=CVE-2020-13940)
  + NVD Record: [CVE-2020-13940](https://nvd.nist.gov/vuln/detail/CVE-2020-13940)
  + Apache Jira Issue: [NIFI-7680](https://issues.apache.org/jira/browse/NIFI-7680)
  + GitHub Pull Request: [4436](https://github.com/apache/nifi/pull/4436)

The notification service manager and various policy authorizer and user group provider objects allowed trusted
administrators to inadvertently configure a potentially malicious XML file. The XML file has the ability to make
external calls to services through XML External Entity resolution. NiFi 1.12.0 introduced an XML validator to prevent
malicious code from being parsed and executed. Users running any previous NiFi release should upgrade to 1.12.0.

### CVE-2020-9482

* Title: Application Bearer Token Remains Valid After Logout Completion
* Published: 2020-04-07
* Severity: Medium
* Products: Apache NiFi Registry
* Affected Versions: 0.1.0 to 0.5.0
* Fixed Versions: 0.6.0
* Reporter: Andy LoPresto
* References
  + CVE Record: [CVE-2020-9482](https://www.cve.org/CVERecord?id=CVE-2020-9482)
  + NVD Record: [CVE-2020-9482](https://nvd.nist.gov/vuln/detail/CVE-2020-9482)
  + Apache Jira Issue: [NIFIREG-361](https://issues.apache.org/jira/browse/NIFIREG-361)

If NiFi Registry uses an authentication mechanism other than PKI, when the user clicks Log Out, NiFi Registry
invalidates the authentication token on the client side but not on the server side. This permits the user's client-side
token to be used for up to 12 hours after logging out to make API requests to NiFi Registry. NiFi Registry 0.6.0
invalidates the server-side authentication token immediately after the user clicks the Log Out link.

### CVE-2020-1942

* Title: Potential Information Disclosure in Application Logs
* Published: 2020-02-04
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.0.1 to 1.11.0
* Fixed Versions: 1.11.1
* Reporter: Andy LoPresto
* References
  + CVE Record: [CVE-2020-1942](https://www.cve.org/CVERecord?id=CVE-2020-1942)
  + NVD Record: [CVE-2020-1942](https://nvd.nist.gov/vuln/detail/CVE-2020-1942)
  + Apache Jira Issue: [NIFI-7079](https://issues.apache.org/jira/browse/NIFI-7079)
  + GitHub Pull Request: [4208](https://github.com/apache/nifi/pull/4208)

The flow fingerprint factory generated flow fingerprints which included sensitive property descriptor values. In the
event a node attempted to join a cluster and the cluster flow was not inheritable, the flow fingerprint of both the
cluster and local flow was printed, potentially containing sensitive values in plaintext. NiFi 1.11.1i implemented
Argon2 secure hashing to provide a deterministic loggable value which does not reveal the sensitive value. Users running
any previous NiFi release should upgrade to 1.11.1.

### CVE-2020-1928

* Title: Potential Information Disclosure in Application Debug Logs
* Published: 2020-01-22
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.10.0
* Fixed Versions: 1.11.0
* Reporter: Andy LoPresto
* References
  + CVE Record: [CVE-2020-1928](https://www.cve.org/CVERecord?id=CVE-2020-1928)
  + NVD Record: [CVE-2020-1928](https://nvd.nist.gov/vuln/detail/CVE-2020-1928)
  + Apache Jira Issue: [NIFI-6948](https://issues.apache.org/jira/browse/NIFI-6948)
  + GitHub Pull Request: [3935](https://github.com/apache/nifi/pull/3935)

The sensitive parameter parser would log parsed property descriptor values for debugging purposes. This would expose
literal values entered a sensitive property when no parameter was present. NiFi 1.11.0 removed debug logging from the
class. Users running the 1.10.0 release should upgrade to 1.11.0.

### CVE-2020-1933

* Title: Potential Cross-Site Scripting in Uploaded Templates
* Published: 2020-01-22
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.10.0
* Fixed Versions: 1.11.0
* Reporter: Jakub Palaczynski of ING Tech Poland
* References
  + CVE Record: [CVE-2020-1933](https://www.cve.org/CVERecord?id=CVE-2020-1933)
  + NVD Record: [CVE-2020-1933](https://nvd.nist.gov/vuln/detail/CVE-2020-1933)
  + Apache Jira Issue: [NIFI-7023](https://issues.apache.org/jira/browse/NIFI-7023)
  + GitHub Pull Request: [3991](https://github.com/apache/nifi/pull/3991)

Malicious scripts could be injected to the UI through action by an unaware authenticated user in Firefox. Did not appear
to occur in other browsers. NiFi 1.11.0 adds sanitization of the error response ensures the XSS would not be executed.
Users running earlier versions should upgrade to 1.11.0.

### CVE-2019-10080

* Title: Potential Information Disclosure through XML External Entity Resolution in File Lookup Service
* Published: 2019-11-04
* Severity: Low
* Products: Apache NiFi
* Affected Versions: 1.3.0 to 1.9.2
* Fixed Versions: 1.10.0
* Reporter: RunningSnail
* References
  + CVE Record: [CVE-2019-10080](https://www.cve.org/CVERecord?id=CVE-2019-10080)
  + NVD Record: [CVE-2019-10080](https://nvd.nist.gov/vuln/detail/CVE-2019-10080)
  + Apache Jira Issue: [NIFI-6301](https://issues.apache.org/jira/browse/NIFI-6301)
  + GitHub Pull Request: [3507](https://github.com/apache/nifi/pull/3507)

The XMLFileLookupService allowed trusted users to inadvertently configure a potentially malicious XML file. The XML file
has the ability to make external calls to services using XML External Entity resolution and reveal information such as
the versions of Java, Jersey, and Apache that the NiFI instance uses. NiFi 1.10.0 adds a validator to ensure the XML
file is not malicious. Users running a prior release should upgrade to 1.10.0.

### CVE-2019-12421

* Title: Application Bearer Token Remains Valid After Logout Completion
* Published: 2019-11-04
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.9.2
* Fixed Versions: 1.10.0
* Reporter: Abdu Sahin
* References
  + CVE Record: [CVE-2019-12421](https://www.cve.org/CVERecord?id=CVE-2019-12421)
  + NVD Record: [CVE-2019-12421](https://nvd.nist.gov/vuln/detail/CVE-2019-12421)
  + Apache Jira Issue: [NIFI-6085](https://issues.apache.org/jira/browse/NIFI-6085)
  + GitHub Pull Request: [3362](https://github.com/apache/nifi/pull/3362)

If NiFi uses an authentication mechanism other than PKI, when the user clicks Log Out, NiFi invalidates the
authentication token on the client side but not on the server side. This permits the user's client-side token to be used
for up to 12 hours after logging out to make API requests to NiFi. NiFi 1.10.0 invalidates the server-side
authentication token immediately after the user clicks the Log Out link. Users running a prior release should
upgrade to 1.10.0.

### CVE-2019-10083

* Title: Potential Information Disclosure in Process Group Resources
* Published: 2019-11-04
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.9.2
* Fixed Versions: 1.10.0
* Reporter: Mark Payne
* References
  + CVE Record: [CVE-2019-10083](https://www.cve.org/CVERecord?id=CVE-2019-10083)
  + NVD Record: [CVE-2019-10083](https://nvd.nist.gov/vuln/detail/CVE-2019-10083)
  + Apache Jira Issue: [NIFI-6302](https://issues.apache.org/jira/browse/NIFI-6302)
  + GitHub Pull Request: [3477](https://github.com/apache/nifi/pull/3477)

When updating a Process Group via the API, the response to the request includes all of its contents (at the top most
level, not recursively). The response included details about processors and controller services which the user may not
have had read access to. Requests to update or remove the process group will no longer return the contents of the
process group in the response in Apache NiFi 1.10.0. Users running a prior release should upgrade to 1.10.0.

### CVE-2018-17192

* Title: Improper Restriction of Browser Frame Access
* Published: 2018-10-26
* Severity: Low
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.6.0
* Fixed Versions: 1.8.0
* Reporter: Suchithra V N
* References
  + CVE Record: [CVE-2018-17192](https://www.cve.org/CVERecord?id=CVE-2018-17192)
  + NVD Record: [CVE-2018-17192](https://nvd.nist.gov/vuln/detail/CVE-2018-17192)
  + Apache Jira Issue: [NIFI-5258](https://issues.apache.org/jira/browse/NIFI-5258)
  + GitHub Pull Request: [2759](https://github.com/apache/nifi/pull/2759)

The X-Frame-Options headers were applied inconsistently on some HTTP responses, resulting in duplicate or missing
security headers. Some browsers would interpret these results incorrectly, allowing clickjacking attacks. NiFi 1.8.0
consistently applies the security headers including X-Frame-Options. Users running a prior release should upgrade to
1.8.0.

### CVE-2018-17193

* Title: Improper Neutralization of Input in Proxy Request Headers
* Published: 2018-10-26
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.7.1
* Fixed Versions: 1.8.0
* Reporter: Dan Fike with assistance from Patrick White
* References
  + CVE Record: [CVE-2018-17193](https://www.cve.org/CVERecord?id=CVE-2018-17193)
  + NVD Record: [CVE-2018-17193](https://nvd.nist.gov/vuln/detail/CVE-2018-17193)
  + Apache Jira Issue: [NIFI-5442](https://issues.apache.org/jira/browse/NIFI-5442)
  + GitHub Pull Request: [2908](https://github.com/apache/nifi/pull/2908)

The message-page.jsp error page used the value of the HTTP request header X-ProxyContextPath without sanitization,
resulting in a potential reflected cross-site scripting attack. NiFi 1.8.0 correctly parses and sanitizes the request
attribute value. Users running a prior release should upgrade to 1.8.0.

### CVE-2018-17194

* Title: Potential Denial of Service with HTTP DELETE Cluster Replication Requests
* Published: 2018-10-26
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.7.1
* Fixed Versions: 1.8.0
* Reporter: Mike Cole and Andy LoPresto
* References
  + CVE Record: [CVE-2018-17194](https://www.cve.org/CVERecord?id=CVE-2018-17194)
  + NVD Record: [CVE-2018-17194](https://nvd.nist.gov/vuln/detail/CVE-2018-17194)
  + Apache Jira Issue: [NIFI-5628](https://issues.apache.org/jira/browse/NIFI-5628)
  + GitHub Pull Request: [3035](https://github.com/apache/nifi/pull/3035)

When a client request to a cluster node was replicated to other nodes in the cluster for verification, the
Content-Length was forwarded. On a DELETE request, the body was ignored, but if the initial request had a Content-Length
value other than 0, the receiving nodes would wait for the body and eventually timeout. NiFi 1.8.0 checks DELETE
requests and overwrites non-zero Content-Length header. Users running a prior release should upgrade to 1.8.0.

### CVE-2018-17195

* Title: Potential Cross-Site Request Forgery in Template Upload Resources
* Published: 2018-10-26
* Severity: Critical
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.7.1
* Fixed Versions: 1.8.0
* Reporter: Mike Cole
* References
  + CVE Record: [CVE-2018-17195](https://www.cve.org/CVERecord?id=CVE-2018-17195)
  + NVD Record: [CVE-2018-17195](https://nvd.nist.gov/vuln/detail/CVE-2018-17195)
  + Apache Jira Issue: [NIFI-5595](https://issues.apache.org/jira/browse/NIFI-5595)
  + GitHub Pull Request: [3024](https://github.com/apache/nifi/pull/3024)

The template upload API endpoint accepted requests from different domain when sent in conjunction with ARP spoofing and
meddler in the middle (MITM) intervention, resulting in cross-site request forgery. The required attack vector is
complex, requiring a scenario with client certificate authentication, same subnet access, and injecting malicious code
into an unprotected (plaintext HTTP) website which the targeted user later visits, but the possible damage warranted a
Critical severity level. NiFi 1.8.0 applies Cross-Origin Resource Sharing (CORS) policy request filtering. Users running
a prior release should upgrade to 1.8.0.

### CVE-2018-1309

* Title: Improper Restriction of XML External Entity References in SplitXml
* Published: 2018-04-08
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.1.0 to 1.5.0
* Fixed Versions: 1.6.0
* Reporter: åç ç¬
* References
  + CVE Record: [CVE-2018-1309](https://www.cve.org/CVERecord?id=CVE-2018-1309)
  + NVD Record: [CVE-2018-1309](https://nvd.nist.gov/vuln/detail/CVE-2018-1309)
  + Apache Jira Issue: [NIFI-4869](https://issues.apache.org/jira/browse/NIFI-4869)
  + GitHub Pull Request: [2466](https://github.com/apache/nifi/pull/2466)

Malicious XML content could cause information disclosure or remote code execution in the SplitXml Processor. NiFi 1.6.0
disables external general entity parsing and disallows document type declarations in SplitXml. Users running a prior
release should upgrade to 1.6.0.

### CVE-2018-1310

* Title: Potential Denial of Service in JMS Processors
* Published: 2018-04-08
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.1.0 to 1.5.0
* Fixed Versions: 1.6.0
* Reporter: åç ç¬
* References
  + CVE Record: [CVE-2018-1310](https://www.cve.org/CVERecord?id=CVE-2018-1310)
  + NVD Record: [CVE-2018-1310](https://nvd.nist.gov/vuln/detail/CVE-2018-1310)
  + Apache Jira Issue: [NIFI-4870](https://issues.apache.org/jira/browse/NIFI-4870)
  + GitHub Pull Request: [2469](https://github.com/apache/nifi/pull/2469)

Malicious JMS content could cause denial of service in impacted Processors. See ActiveMQ CVE-2015-5254 announcement for
more information. NiFi 1.6.0 upgrades the activemq-client library to 5.15.3. Users running a prior release should
upgrade to 1.6.0.

### CVE-2017-12632

* Title: Improper Input Validation of HTTP Host Request Headers
* Published: 2018-01-12
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.1.0 to 1.4.0
* Fixed Versions: 1.5.0
* Reporter: Mike Cole
* References
  + CVE Record: [CVE-2017-12632](https://www.cve.org/CVERecord?id=CVE-2017-12632)
  + NVD Record: [CVE-2017-12632](https://nvd.nist.gov/vuln/detail/CVE-2017-12632)
  + Apache Jira Issue: [NIFI-4501](https://issues.apache.org/jira/browse/NIFI-4501)
  + GitHub Pull Request: [2279](https://github.com/apache/nifi/pull/2279)

A malicious host header in an incoming HTTP request could cause NiFi to load resources from an external server. NiFi
1.5.0 sanitizes host headers and compares to a controlled whitelist property. Users running a prior release should
upgrade to 1.5.0.

### CVE-2017-15697

* Title: Potential Cross-Site Scripting in Proxy Request Headers
* Published: 2018-01-12
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.4.0
* Fixed Versions: 1.5.0
* Reporter: Andy LoPresto
* References
  + CVE Record: [CVE-2017-15697](https://www.cve.org/CVERecord?id=CVE-2017-15697)
  + NVD Record: [CVE-2017-15697](https://nvd.nist.gov/vuln/detail/CVE-2017-15697)
  + Apache Jira Issue: [NIFI-4501](https://issues.apache.org/jira/browse/NIFI-4501)
  + GitHub Pull Request: [2279](https://github.com/apache/nifi/pull/2279)

A malicious X-ProxyContextPath or X-Forwarded-Context header containing external resources or embedded code could cause
remote code execution. NiFi 1.5.0 includes corrected handling of these headers. Users running a prior release should
upgrade to 1.5.0.

### CVE-2017-12623

* Title: Improper Restriction of XML External Entity References in Template Upload Resources
* Published: 2017-10-02
* Severity: High
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.3.0
* Fixed Versions: 1.4.0
* Reporter: PaweÅ Gocyla with further information from Mike Cole
* References
  + CVE Record: [CVE-2017-12623](https://www.cve.org/CVERecord?id=CVE-2017-12623)
  + NVD Record: [CVE-2017-12623](https://nvd.nist.gov/vuln/detail/CVE-2017-12623)
  + Apache Jira Issue: [NIFI-4353](https://issues.apache.org/jira/browse/NIFI-4353)
  + GitHub Pull Request: [2128](https://github.com/apache/nifi/pull/2128)

Any authenticated user (valid client certificate but without ACL permissions) could upload a template which contained
malicious code and accessed sensitive files via an XML External Entity (XXE) attack. NiFi 1.14.0 properly handles XML
External Entities. Users running a prior release should upgrade to 1.4.0.

### CVE-2017-15703

* Title: Deserialization of Untrusted Data in Template Upload Resources
* Published: 2017-10-02
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 to 1.3.0
* Fixed Versions: 1.4.0
* Reporter: Mike Cole
* References
  + CVE Record: [CVE-2017-15703](https://www.cve.org/CVERecord?id=CVE-2017-15703)
  + NVD Record: [CVE-2017-15703](https://nvd.nist.gov/vuln/detail/CVE-2017-15703)
  + Apache Jira Issue: [NIFI-4357](https://issues.apache.org/jira/browse/NIFI-4357)
  + GitHub Pull Request: [2134](https://github.com/apache/nifi/pull/2134)

Any authenticated user (valid client certificate but without ACL permissions) could upload a template which contained
malicious code and cause a denial of service via Java deserialization. NiFi 1.4.0 properly handles Java deserialization.
Users running a prior release should upgrade to 1.4.0.

### CVE-2017-7665

* Title: Potential Cross-Site Scripting in User Interface Components
* Published: 2017-05-08
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.0.1 to 0.7.3 and 1.0.0 to 1.2.0
* Fixed Versions: 0.7.4 and 1.3.0
* Reporter: Matt Gilman
* References
  + CVE Record: [CVE-2017-7665](https://www.cve.org/CVERecord?id=CVE-2017-7665)
  + NVD Record: [CVE-2017-7665](https://nvd.nist.gov/vuln/detail/CVE-2017-7665)
  + Apache Jira Issue: [NIFI-3906](https://issues.apache.org/jira/browse/NIFI-3906)
  + GitHub Pull Request: [1818](https://github.com/apache/nifi/pull/1818)

There are certain user input components in the Apache NiFi UI which had been guarding for some forms of cross-site
scripting issues but were insufficient. NiFi 0.7.4 and 1.3.0 add more complete user input sanitization. Users running a
prior release should upgrade to 0.7.4 or 1.3.0.

### CVE-2017-7667

* Title: Potential Cross-Frame Scripting from Improper Frame Access Restrictions
* Published: 2017-05-08
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.0.1 to 0.7.3 and 1.0.0 to 1.2.0
* Fixed Versions: 0.7.4 and 1.3.0
* Reporter: Matt Gilman
* References
  + CVE Record: [CVE-2017-7667](https://www.cve.org/CVERecord?id=CVE-2017-7667)
  + NVD Record: [CVE-2017-7667](https://nvd.nist.gov/vuln/detail/CVE-2017-7667)
  + Apache Jira Issue: [NIFI-3907](https://issues.apache.org/jira/browse/NIFI-3907)

Apache NiFi needs to establish the response header telling browsers to only allow framing with the same origin. NiFi
0.7.4 and 1.3.0 set the response header. Users running a prior release should upgrade to 0.7.4 or 1.3.0.

### CVE-2017-5635

* Title: Improper Authentication of Replicated Cluster HTTP Requests
* Published: 2017-02-20
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.7.0 to 0.7.1 and 1.1.0 to 1.1.1
* Fixed Versions: 0.7.2 and 1.1.2
* Reporter: Leonardo Dias and Matt Gilman
* References
  + CVE Record: [CVE-2017-5635](https://www.cve.org/CVERecord?id=CVE-2017-5635)
  + NVD Record: [CVE-2017-5635](https://nvd.nist.gov/vuln/detail/CVE-2017-5635)
  + Apache Jira Issue: [NIFI-3487](https://issues.apache.org/jira/browse/NIFI-3487)

In a cluster environment, if an anonymous user request is replicated to another node, the originating node identity is
used rather than the anonymous user. NiFi 0.7.2 and 1.1.2 remove the negative check for anonymous user before building
the proxy chain and throwing an exception, and evaluating each user in the proxy chain iteration and comparing against a
static constant anonymous user. Users running a prior release should upgrade to 0.7.2 or 1.1.2.

### CVE-2017-5636

* Title: Improper Authentication of Replicated Cluster HTTP Requests
* Published: 2017-02-20
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 0.7.0 to 0.7.1 and 1.1.0 to 1.1.1
* Fixed Versions: 0.7.2 and 1.1.2
* Reporter: Andy LoPresto
* References
  + CVE Record: [CVE-2017-5636](https://www.cve.org/CVERecord?id=CVE-2017-5636)
  + NVD Record: [CVE-2017-5636](https://nvd.nist.gov/vuln/detail/CVE-2017-5636)
  + Apache Jira Issue: [NIFI-3487](https://issues.apache.org/jira/browse/NIFI-3487)

In a cluster environment, the proxy chain serialization and deserialization is vulnerable to an injection attack where a
carefully crafted username could impersonate another user and gain their permissions on a replicated request to another
node. NiFi 0.7.2 and 1.1.2 modify the tokenization code and sanitization of user-provided input. Users running a prior
release should upgrade to 0.7.2 or 1.1.2.

### CVE-2016-8748

* Title: Potential Cross-Site Scripting in Connection Details Dialog
* Published: 2016-12-19
* Severity: Medium
* Products: Apache NiFi
* Affected Versions: 1.0.0 and 1.1.0
* Fixed Versions: 1.0.1 and 1.1.1
* Reporter: Matt Gilman
* References
  + CVE Record: [CVE-2016-8748](https://www.cve.org/CVERecord?id=CVE-2016-8748)
  + NVD Record: [CVE-2016-8748](https://nvd.nist.gov/vuln/detail/CVE-2016-8748)
  + Apache Jira Issue: [NIFI-3154](https://issues.apache.org/jira/browse/NIFI-3154)
  + GitHub Pull Request: [1305](https://github.com/apache/nifi/pull/1305)

There is a cross-site scripting vulnerability in connection details dialog when accessed by an authorized user. The user
supplied text was not being properly handled when added to the DOM. The vulnerability was resolved after reviewing the
pull request when merging changes. Users running a prior release should upgrade to 1.0.1 or 1.1.1.

[![Apache NiFi Logo](/images/apache-nifi-logo.svg)](/)
[![Apache Software Foundation Logo](/images/apache-logo.svg)](https://apache.org)

Copyright © 2025 The Apache Software Foundation under the terms of the
[Apache License, Version 2.0](https://www.apache.org/licenses/LICENSE-2.0.html)

Apache NiFi, NiFi, and the NiFi logo are trademarks of
[The Apache Software Foundation](https://apache.org/)

### [Project](/)

* [Issues](https://issues.apache.org/jira/browse/NIFI)
* [Source](https://github.com/apache/nifi)
* [LinkedIn](https://www.linkedin.com/company/apache-nifi/)
* [Slack](https://join.slack.com/t/apachenifi/shared_invite/zt-2ccusmst2-l2KrTzJLrGcHOO0V7~XD4g)
* [Security](https://nifi.apache.org/documentation/security/)

### [Apache](https://www.apache.org/)

* [License](https://www.apache.org/licenses/)
* [Privacy](https://privacy.apache.org/policies/privacy-policy-public.html)
* [Sponsorship](https://www.apache.org/foundation/sponsorship.html)
* [Thanks](https://www.apache.org/foundation/thanks.html)



=== Content from issues.apache.org_4206514e_20250119_132403.html ===


[Log in](/jira/login.jsp?os_destination=%2Fbrowse%2FNIFI-7079)[Skip to main content](#main)[Skip to sidebar](#sidebar)Linked ApplicationsLoading…[![ASF JIRA](/jira/s/xd97tr/820010/13pdxe5/_/jira-logo-scaled.png)](https://issues.apache.org/jira/secure/MyJiraHome.jspa)

* [Dashboards](/jira/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/jira/browse/NIFI "View recent projects and browse a list of projects")
* [Issues](/jira/issues/ "Search for issues and view recent issues")

* [Help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/jira/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/jira/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/jira/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/jira/login.jsp?os_destination=%2Fbrowse%2FNIFI-7079)

Public signup for this instance is **disabled**. Go to our [Self serve sign up page](https://selfserve.apache.org/jira-account.html) to request an account. Report potential security issues [privately](https://apache.org/security/#reporting-a-vulnerability)

![Uploaded image for project: 'Apache NiFi'](https://issues.apache.org/jira/secure/projectavatar?pid=12316020&avatarId=22284)

1. [Apache NiFi](/jira/browse/NIFI)
2. [NIFI-7079](/jira/browse/NIFI-7079)

# Improve flow fingerprint comparison

[Log In](/jira/login.jsp?os_destination=%2Fbrowse%2FNIFI-7079 "Log In")Export

XMLWordPrintableJSON
#### Details

* **Type:**
  ![](/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype "Improvement - An improvement or enhancement to an existing feature or task.") Improvement
* **Status:**
  Resolved
* **Priority:**
  ![](/jira/images/icons/priorities/major.svg "Major - Major loss of function.") Major
* **Resolution:**
  Fixed
* **Affects Version/s:**
  1.11.0
* **Fix Version/s:**
  [1.12.0](/jira/issues/?jql=project+%3D+NIFI+AND+fixVersion+%3D+1.12.0 "1.12.0 "), [1.11.1](/jira/issues/?jql=project+%3D+NIFI+AND+fixVersion+%3D+1.11.1 "1.11.1 ")
* **Component/s:**
  [Core Framework](/jira/issues/?jql=project+%3D+NIFI+AND+component+%3D+%22Core+Framework%22 "Core Framework Framework, libraries, API")
* **Labels:**
  + [cluster](/jira/issues/?jql=labels+%3D+cluster "cluster")
  + [fingerprint](/jira/issues/?jql=labels+%3D+fingerprint "fingerprint")
  + [flow](/jira/issues/?jql=labels+%3D+flow "flow")
#### Description

The flow fingerprinting and comparison can be improved.

#### Attachments

#### Issue Links

causes

![Epic - Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.](/jira/secure/viewavatar?size=xsmall&avatarId=21137&avatarType=issuetype "Epic - Created by Jira Software - do not edit or delete. Issue type for a big user story that needs to be broken down.")
[NIFI-7120](/jira/browse/NIFI-7120)
Improve secure hasher architecture

* ![Major - Major loss of function.](/jira/images/icons/priorities/major.svg "Major - Major loss of function.")
* Resolved

links to

![Web Link](https://github.com/favicon.ico "Web Link")
[GitHub Pull Request #4028](https://github.com/apache/nifi/pull/4028)

#### Activity

#### People

Assignee:

![alopresto](https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452)
Andy LoPresto

Reporter:

![alopresto](https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452)
Andy LoPresto

Votes:
0
Vote for this issue

Watchers:
3
Start watching this issue

#### Dates

Created:

29/Jan/20 22:05

Updated:

10/Feb/20 23:08

Resolved:

31/Jan/20 13:59

#### Time Tracking

Estimated:

| Original Estimate - Not Specified |
| --- |

Not Specified

Remaining:

| Remaining Estimate - 0h |
| --- |

0h

Logged:

| Time Spent - 0.5h |
| --- |

0.5h

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/jira/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/jira/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for Apache Software Foundation. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)



=== Content from issues.apache.org_d9e21f0b_20250119_132402.html ===


[Log in](/jira/login.jsp?os_destination=https%3A%2F%2Fissues.apache.org%2Fjira%2Fbrow)[Skip to main content](#main)[Skip to sidebar](#sidebar)Linked ApplicationsLoading…[![ASF JIRA](/jira/s/xd97tr/820010/13pdxe5/_/jira-logo-scaled.png)](https://issues.apache.org/jira/secure/MyJiraHome.jspa)

* [Dashboards](/jira/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/jira/secure/BrowseProjects.jspa "View recent projects and browse a list of projects")
* [Issues](/jira/issues/ "Search for issues and view recent issues")

* [Help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/jira/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/jira/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/jira/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/jira/login.jsp?os_destination=https%3A%2F%2Fissues.apache.org%2Fjira%2Fbrow)

Public signup for this instance is **disabled**. Go to our [Self serve sign up page](https://selfserve.apache.org/jira-account.html) to request an account. Report potential security issues [privately](https://apache.org/security/#reporting-a-vulnerability)

# Welcome to ASF JIRA

Username

Password

Remember my login on this computer

Not a member? To request an account, please contact your Jira administrators.

[Can't access your account?](/jira/secure/ForgotLoginDetails.jspa "Press Alt+` to cancel")

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/jira/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/jira/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for Apache Software Foundation. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)


