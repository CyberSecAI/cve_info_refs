=== Content from launchpad.net_31983fd8_20250119_131131.html ===

[Log in / Register](https://launchpad.net/~sforshee/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~sforshee)

## [Seth Forshee](https://launchpad.net/~sforshee)

* Overview
* [Code](https://code.launchpad.net/~sforshee)
* [Bugs](https://bugs.launchpad.net/~sforshee)
* [Blueprints](https://blueprints.launchpad.net/~sforshee)
* [Translations](https://translations.launchpad.net/~sforshee)
* [Answers](https://answers.launchpad.net/~sforshee)

* [Related packages](https://launchpad.net/~sforshee/%2Brelated-packages)
* [Related projects](https://launchpad.net/~sforshee/%2Brelated-projects)

## User information

Launchpad Id:
sforshee

Email:
[Log in](%2Blogin) for email information.

Member since:
2010-07-10

[![Icon of Ubuntu Bug Control](https://launchpadlibrarian.net/4423778/qa-icon.png "Member of Ubuntu Bug Control")](/~ubuntu-bugcontrol)
[![Icon of Ubuntu Development Team](https://launchpadlibrarian.net/1072363/motu.png "Member of Ubuntu Development Team")](/~ubuntu-dev)
[![Icon of Ubuntu Members](https://launchpadlibrarian.net/606495581/CoF%2014px.png "Member of Ubuntu Members")](/~ubuntumembers)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

2ABCA7498D83E1D32D51D3B5AB4800A62DB9F73A

SSH keys:

[sforshee@canonical](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[8](https://launchpad.net/~sforshee/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**sforshee**
 on
**libera.chat**

## [All bugs in progress](https://launchpad.net/~sforshee/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1763040 [Merge the linux-snapdragon kernel into bionic master/snapdragon](https://bugs.launchpad.net/ubuntu/%2Bsource/linux-meta/%2Bbug/1763040) |  |
| --- | --- | --- |
| in [Ubuntu](/ubuntu) | | |

| --- | --- | --- | --- | --- | --- |
||  | #1906404 [New upstream release 2020.11.20](https://bugs.launchpad.net/ubuntu/trusty/%2Bsource/wireless-regdb/%2Bbug/1906404) |  |
| --- | --- | --- |
| in [Ubuntu](/ubuntu) | | |

||  | #1936255 [New upstream release 2021.07.14](https://bugs.launchpad.net/ubuntu/xenial/%2Bsource/wireless-regdb/%2Bbug/1936255) |  |
| --- | --- | --- |
| in [Ubuntu](/ubuntu) | | |

||  | #1936255 [New upstream release 2021.07.14](https://bugs.launchpad.net/ubuntu/trusty/%2Bsource/wireless-regdb/%2Bbug/1936255) |  |
| --- | --- | --- |
| in [Ubuntu](/ubuntu) | | |

||  | #1884568 [Groovy update: v5.7.4 upstream stable release](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1884568) |  |
| --- | --- | --- |
| in [Ubuntu](/ubuntu) | | |

## Personal package archives

| [apple\_bl gmux dkms testing packages](/~sforshee/%2Barchive/ubuntu/apple-bl-gmux) |
| --- |
| [arm64 signed test builds](/~sforshee/%2Barchive/ubuntu/arm64-signed) |
| [Azure test build](/~sforshee/%2Barchive/ubuntu/azure) |
| [linux-firmware test builds](/~sforshee/%2Barchive/ubuntu/linux-firmware) |
| [Linux kernel plus fuse patches for lxc](/~sforshee/%2Barchive/ubuntu/linux-fuse-lxc) |
| [Test PPA for LP: #1866909](/~sforshee/%2Barchive/ubuntu/lp1866909) |
| [Test builds for LP: #1903288](/~sforshee/%2Barchive/ubuntu/lp1903288) |
| [mutt](/~sforshee/%2Barchive/ubuntu/mutt) |
| [Test builds](/~sforshee/%2Barchive/ubuntu/test-builds) |
| [toshiba\_acpi DKMS testing packages](/~sforshee/%2Barchive/ubuntu/toshiba-acpi-dkms) |
| [trace-cmd and kernelshark pakages](/~sforshee/%2Barchive/ubuntu/trace-cmd) |
| [Test PPA for UC20 packages](/~sforshee/%2Barchive/ubuntu/uc20-test) |
| [Packages for testing user namespace mounts](/~sforshee/%2Barchive/ubuntu/userns-mounts) |
| [wireless-regdb test builds](/~sforshee/%2Barchive/ubuntu/wireless-regdb) |
| [ZFS test PPA](/~sforshee/%2Barchive/ubuntu/zfs-test) |

* [View snap packages](https://launchpad.net/~sforshee/%2Bsnaps)

## [All memberships](https://launchpad.net/~sforshee/%2Bparticipation) Latest memberships

| [Ubuntu SSO 2-factor testers](/~sso-2f-testers)  Joined on 2021-07-23 | |
| --- | --- |
| [Ubuntu Development Team](/~ubuntu-dev)  Joined on 2020-11-20 | |

## [Recent activities](https://launchpad.net/~sforshee/%2Bkarma) Most active in

| [Ubuntu](/ubuntu) |  |
| --- | --- |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from answers.launchpad.net_1aa2f370_20250119_131128.html ===

[Log in / Register](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[linux package](https://launchpad.net/ubuntu/%2Bsource/linux)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/linux)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/linux)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/linux)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/linux)
* Answers

# Questions for linux in Ubuntu

by relevancy
by status
newest first
oldest first
recently updated first

Languages filter
([Change your preferred languages](/%2Beditmylanguages))
 English (en)

Status
 Open    Needs information    Answered    Solved    Expired    Invalid

| Summary | | | Created | Submitter | Assignee | Status |
| --- | --- | --- | --- | --- | --- | --- |
| Answered | 819549 | [screen flickering in ubuntu 24.04. (Thinkpad T14 Gen 4 AMD)](/ubuntu/%2Bsource/linux/%2Bquestion/819549) | 2024-12-15 13:42:25 UTC 2024-12-15 | [Tobias Scheckel](https://launchpad.net/~tscheckel) | — | Answered |
| Answered | 819385 | [Bug #2051560 fix for realtime kernel](/ubuntu/%2Bsource/linux/%2Bquestion/819385) | 2024-11-20 15:01:35 UTC 2024-11-20 | [Edward](https://launchpad.net/~mecrosby) | — | Answered |
| Solved | 819372 | [Computer not powering down after successful shutdown](/ubuntu/%2Bsource/linux/%2Bquestion/819372) | 2024-11-19 07:47:38 UTC 2024-11-19 | [Max Clarkson](https://launchpad.net/~mak-c) | — | Solved |
| Answered | 818986 | [ask question about bug1847340](/ubuntu/%2Bsource/linux/%2Bquestion/818986) | 2024-10-11 07:10:58 UTC 2024-10-11 | [xixinliu](https://launchpad.net/~xixinliu) | — | Answered |
| Solved | 818849 | [Ubuntu 24.04 screen flickering when using display with 100 hz](/ubuntu/%2Bsource/linux/%2Bquestion/818849) | 2024-09-28 07:44:06 UTC 2024-09-28 | [Erik Pahlberg](https://launchpad.net/~epahlberg) | — | Solved |
| Answered | 818766 | [touchpad is not working on any of Linux distros](/ubuntu/%2Bsource/linux/%2Bquestion/818766) | 2024-09-18 06:53:20 UTC 2024-09-18 | [williard neo](https://launchpad.net/~funnyt1k) | — | Answered |
| Open | 818839 | [Could not install linux-image-6.8.0-44-generic](/ubuntu/%2Bsource/linux/%2Bquestion/818839) | 2024-09-12 19:08:36 UTC 2024-09-12 | [E Hudson](https://launchpad.net/~ehudson3) | — | Open |
| Solved | 818021 | [Firmware for Intel Corporation Raptor Lake PCH CNVi WiFi seemingly missing from pc-kernel](/ubuntu/%2Bsource/linux/%2Bquestion/818021) | 2024-08-13 12:08:59 UTC 2024-08-13 | [Maciej Lukaszczyk](https://launchpad.net/~mlukaszczyk) | — | Solved |
| Answered | 817990 | [Wireless: unavailable](/ubuntu/%2Bsource/linux/%2Bquestion/817990) | 2024-08-09 10:54:05 UTC 2024-08-09 | [David](https://launchpad.net/~kojobolt) | — | Answered |
| Answered | 817774 | [Deadlock occurs while suspending md raid](/ubuntu/%2Bsource/linux/%2Bquestion/817774) | 2024-07-21 08:42:20 UTC 2024-07-21 | [Meir Elisha](https://launchpad.net/~meireli) | — | Answered |
| Solved | 817745 | [Linux 5.15.0-116 will not run virtualbox, reports vdi files corrupt](/ubuntu/%2Bsource/linux/%2Bquestion/817745) | 2024-07-18 03:00:12 UTC 2024-07-18 | [Alan Knepper](https://launchpad.net/~al-knepper) | — | Solved |
| Answered | 814767 | [who write?](/ubuntu/%2Bsource/linux/%2Bquestion/814767) | 2024-05-15 03:03:19 UTC 2024-05-15 | [miufullzero](https://launchpad.net/~mfz0721) | — | Answered |
| Answered | 812434 | [Issues installing zram in Ubuntu 23.10](/ubuntu/%2Bsource/linux/%2Bquestion/812434) | 2024-05-03 12:57:39 UTC 2024-05-03 | [Daniel Prince](https://launchpad.net/~rainsnomatch) | — | Answered |
| Answered | 809214 | [slow upload speed on KVM VM](/ubuntu/%2Bsource/linux/%2Bquestion/809214) | 2024-04-16 07:19:20 UTC 2024-04-16 | [Dave Lionnel Temga](https://launchpad.net/~daveleo1988) | — | Answered |
| Answered | 809137 | [CIFS stopped working/is unstable with kernel update to 5.15.0-102.112](/ubuntu/%2Bsource/linux/%2Bquestion/809137) | 2024-04-09 14:14:56 UTC 2024-04-09 | [Andreas Besold](https://launchpad.net/~absld) | — | Answered |
| Answered | 709451 | [AMD Ryzen 9 7950X3D iGPU Support](/ubuntu/%2Bsource/linux/%2Bquestion/709451) | 2024-02-29 06:56:59 UTC 2024-02-29 | [Christopher Altmann](https://launchpad.net/~chralt) | — | Answered |
| Answered | 708552 | [backport https://bugs.launchpad.net/ubuntu/+source/linux/+bug/2036184 bugfix into Jammy?](/ubuntu/%2Bsource/linux/%2Bquestion/708552) | 2023-11-27 10:47:32 UTC 2023-11-27 | [Avi Rosenberg](https://launchpad.net/~aviros) | — | Answered |
| Open | 708338 | [Brightness control no longer working after update to Ubuntu 23.10 in computer Dell OptiPlex 7780 AIO](/ubuntu/%2Bsource/linux/%2Bquestion/708338) | 2023-11-01 05:38:50 UTC 2023-11-01 | [Jordi](https://launchpad.net/~txordi00) | — | Open |
| Answered | 707408 | [My ubuntu 20.04 freezes within some time after plugging in with charger](/ubuntu/%2Bsource/linux/%2Bquestion/707408) | 2023-07-27 13:19:15 UTC 2023-07-27 | [Abhas Abhirup](https://launchpad.net/~abhas15) | — | Answered |
| Solved | 707400 | [How to attach journalctl output files](/ubuntu/%2Bsource/linux/%2Bquestion/707400) | 2023-07-26 16:18:51 UTC 2023-07-26 | [John Hayes](https://launchpad.net/~johnh21) | — | Solved |
| Answered | 706720 | [Install zram kernel module without linux-firmware](/ubuntu/%2Bsource/linux/%2Bquestion/706720) | 2023-05-19 10:31:48 UTC 2023-05-19 | [Serg](https://launchpad.net/~g00g1) | — | Answered |
| Answered | 706680 | [RT kernel patching for Ubuntu server releases](/ubuntu/%2Bsource/linux/%2Bquestion/706680) | 2023-05-17 10:45:33 UTC 2023-05-17 | [Madhusoodan](https://launchpad.net/~msoodan) | — | Answered |
| Solved | 706518 | [Smartpqi module build fails after upgrade to Lunar](/ubuntu/%2Bsource/linux/%2Bquestion/706518) | 2023-05-03 07:50:41 UTC 2023-05-03 | [Silke Mueller](https://launchpad.net/~silke99) | — | Solved |
| Answered | 706356 | [No boot after updating or clean installing 23.04.](/ubuntu/%2Bsource/linux/%2Bquestion/706356) | 2023-04-23 15:54:36 UTC 2023-04-23 | [Christian Menguita](https://launchpad.net/~lordmontpelier) | — | Answered |
| Solved | 706045 | [gnome-shell loops, can't use ubuntu-bug](/ubuntu/%2Bsource/linux/%2Bquestion/706045) | 2023-04-02 06:33:26 UTC 2023-04-02 | [corrado venturini](https://launchpad.net/~corradoventu) | — | Solved |
| Solved | 706006 | [Kernel on Jammy is 5.19 not 5.15](/ubuntu/%2Bsource/linux/%2Bquestion/706006) | 2023-03-30 07:03:09 UTC 2023-03-30 | [corrado venturini](https://launchpad.net/~corradoventu) | — | Solved |
| Answered | 705909 | [How to blacklist nouveau for 3070 on livecd?](/ubuntu/%2Bsource/linux/%2Bquestion/705909) | 2023-03-22 08:05:19 UTC 2023-03-22 | [Charles Evans](https://launchpad.net/~crtiger) | — | Answered |
| Answered | 705821 | [Keyboard not working after recent Kinetic kernel update to 5.19.0-35.36](/ubuntu/%2Bsource/linux/%2Bquestion/705821) | 2023-03-13 03:01:08 UTC 2023-03-13 | [Shahid N.](https://launchpad.net/~smnsparty) | — | Answered |
| Answered | 705694 | [What is the upstream kernel version for lunar 6.1.0-16?](/ubuntu/%2Bsource/linux/%2Bquestion/705694) | 2023-03-02 18:26:01 UTC 2023-03-02 | [Charles Evans](https://launchpad.net/~crtiger) | — | Answered |
| Answered | 705102 | [linux-tools-5.15.0-60 failed to update](/ubuntu/%2Bsource/linux/%2Bquestion/705102) | 2023-02-20 06:48:28 UTC 2023-02-20 | [Dj Eber](https://launchpad.net/~dereber) | — | Answered |
| Solved | 704942 | [Ubuntu Lunar kernel 6.1.0-14 allows X11 only](/ubuntu/%2Bsource/linux/%2Bquestion/704942) | 2023-02-01 14:35:06 UTC 2023-02-01 | [corrado venturini](https://launchpad.net/~corradoventu) | — | Solved |
| Solved | 704000 | [Since applying the latest kernel for linux mint 21 I can no longer conduct searches with Publishers Clearing House Search](/ubuntu/%2Bsource/linux/%2Bquestion/704000) | 2022-12-02 02:28:11 UTC 2022-12-02 | [Barry Parker](https://launchpad.net/~user642431) | — | Solved |
| Solved | 703981 | [Ubuntu login issues via Grub](/ubuntu/%2Bsource/linux/%2Bquestion/703981) | 2022-11-30 12:04:22 UTC 2022-11-30 | [Vladimir](https://launchpad.net/~vibeg) | — | Solved |
| Solved | 703966 | [linux-image-5.15.0-46-generic](/ubuntu/%2Bsource/linux/%2Bquestion/703966) | 2022-11-29 12:12:10 UTC 2022-11-29 | [Vladimir](https://launchpad.net/~vibeg) | — | Solved |
| Solved | 703875 | [Boot Issue with Ubuntu 22.10 Kinetic Kudu since Kernel 5.19.0.15.15](/ubuntu/%2Bsource/linux/%2Bquestion/703875) | 2022-11-19 13:09:33 UTC 2022-11-19 | [atactic](https://launchpad.net/~atactic) | — | Solved |
| Answered | 702673 | [Kernel Panic on ESXi 7.03](/ubuntu/%2Bsource/linux/%2Bquestion/702673) | 2022-08-05 20:07:49 UTC 2022-08-05 | [Dario](https://launchpad.net/~dario-meni) | — | Answered |
| Answered | 702629 | [screen much darker since kernel switch from 5.4.0-122 to 5.15.0-41](/ubuntu/%2Bsource/linux/%2Bquestion/702629) | 2022-08-02 07:15:16 UTC 2022-08-02 | [rik](https://launchpad.net/~rddd) | — | Answered |
| Answered | 702237 | [MSI ez CPU debug led is constantly ON when resume from suspend to ram (S3) state](/ubuntu/%2Bsource/linux/%2Bquestion/702237) | 2022-06-20 21:30:18 UTC 2022-06-20 | [Borislav Sapundzhiev](https://launchpad.net/~bsapundzhiev) | — | Answered |
| Solved | 702158 | [Encrypted zfs performance degradation related to kernel version](/ubuntu/%2Bsource/linux/%2Bquestion/702158) | 2022-06-12 17:06:49 UTC 2022-06-12 | [Dan Podeanu](https://launchpad.net/~pdan) | — | Solved |
| Answered | 701506 | [Memory leaks back in 5.4.0-109 kernel](/ubuntu/%2Bsource/linux/%2Bquestion/701506) | 2022-04-25 02:57:24 UTC 2022-04-25 | [dhdurgee@verizon.net](https://launchpad.net/~dhdurgee) | — | Answered |
| Answered | 701199 | [Thank you! 5.4.0-107 fixes memory leaks since 5.4.0-99](/ubuntu/%2Bsource/linux/%2Bquestion/701199) | 2022-04-04 16:44:34 UTC 2022-04-04 | [dhdurgee@verizon.net](https://launchpad.net/~dhdurgee) | — | Answered |
| Solved | 700629 | [Ubuntu 20.04.3 LTS shutdown doesn't work](/ubuntu/%2Bsource/linux/%2Bquestion/700629) | 2022-02-15 15:38:03 UTC 2022-02-15 | [Jiadun Liu](https://launchpad.net/~liujiadun) | — | Solved |
| Answered | 700445 | [how do I revert back to 20 04 from 21 10, big mistake upgrade](/ubuntu/%2Bsource/linux/%2Bquestion/700445) | 2022-01-30 03:44:02 UTC 2022-01-30 | [rpwzxc1](https://launchpad.net/~rpwzxc1) | — | Answered |
| Answered | 699517 | [No longer kernel-package: How to build kernel?](/ubuntu/%2Bsource/linux/%2Bquestion/699517) | 2021-11-16 17:31:07 UTC 2021-11-16 | [John Radley](https://launchpad.net/~jradxl) | — | Answered |
| Answered | 698450 | [No sound Ubuntu 20.04 Lenovo AIO A540](/ubuntu/%2Bsource/linux/%2Bquestion/698450) | 2021-08-21 13:54:18 UTC 2021-08-21 | [Horacio Merovich](https://launchpad.net/~hmerovich56) | — | Answered |
| Answered | 698411 | [5.11.0-27 - No LAN, WiFi works](/ubuntu/%2Bsource/linux/%2Bquestion/698411) | 2021-08-18 08:58:10 UTC 2021-08-18 | [birkopf](https://launchpad.net/~birkopf) | — | Answered |
| Solved | 697748 | [how can I build ubuntu linux kernel package ?](/ubuntu/%2Bsource/linux/%2Bquestion/697748) | 2021-06-28 03:24:02 UTC 2021-06-28 | [miufullzero](https://launchpad.net/~mfz0721) | — | Solved |
| Solved | 696265 | [Crashes in i915 on Intel GM965](/ubuntu/%2Bsource/linux/%2Bquestion/696265) | 2021-03-25 12:48:56 UTC 2021-03-25 | [John Cummo](https://launchpad.net/~jpc0727) | — | Solved |
| Solved | 696124 | [Updated to kernel 5.4.0-67-generic and Xen DomU stoped working](/ubuntu/%2Bsource/linux/%2Bquestion/696124) | 2021-03-18 08:16:02 UTC 2021-03-18 | [Martin Assarsson](https://launchpad.net/~assar63) | — | Solved |
| Answered | 696073 | [Mouse M602 programmed keystrokes stopped being recognized](/ubuntu/%2Bsource/linux/%2Bquestion/696073) | 2021-03-15 20:57:48 UTC 2021-03-15 | [Paul Getson](https://launchpad.net/~paulsub63) | — | Answered |
| Answered | 695657 | [Where are the 5.8.0.43 sources ?](/ubuntu/%2Bsource/linux/%2Bquestion/695657) | 2021-02-20 04:40:33 UTC 2021-02-20 | [symdeb](https://launchpad.net/~symdeb) | — | Answered |
| Solved | 694231 | [how to check bug in linux mint 20 ?](/ubuntu/%2Bsource/linux/%2Bquestion/694231) | 2020-11-28 15:01:56 UTC 2020-11-28 | [alexandru](https://launchpad.net/~onyx82) | — | Solved |
| Answered | 694038 | [No Bluetooth Adapters Found](/ubuntu/%2Bsource/linux/%2Bquestion/694038) | 2020-11-16 10:23:52 UTC 2020-11-16 | [Ria](https://launchpad.net/~errere) | — | Answered |
| Solved | 693780 | [Keyboard doesn't work after upgrade](/ubuntu/%2Bsource/linux/%2Bquestion/693780) | 2020-10-30 04:04:32 UTC 2020-10-30 | [Bernardo Alcaraz](https://launchpad.net/~alcaraz251) | — | Solved |
| Answered | 693725 | [lmod ppa by rjeschmi isn't available on bionic](/ubuntu/%2Bsource/linux/%2Bquestion/693725) | 2020-10-29 22:34:44 UTC 2020-10-29 | [v.miheer](https://launchpad.net/~v-miheer) | — | Answered |
| Solved | 693453 | [Wired connection abruptly slows down and latency up to 100ms](/ubuntu/%2Bsource/linux/%2Bquestion/693453) | 2020-10-13 22:06:11 UTC 2020-10-13 | [Volodymyr Honcharov](https://launchpad.net/~waldi.ua) | — | Solved |
| Answered | 692910 | [I have a display issue with my thinkpad on the newer releases of the linux kernel (BUG # 1888703). How long does it take for someone to be assigned?](/ubuntu/%2Bsource/linux/%2Bquestion/692910) | 2020-09-14 23:57:01 UTC 2020-09-14 | [Mauro Dresti](https://launchpad.net/~mateinla) | — | Answered |
| Answered | 692642 | [btrfs kernel panic prevents boot of Ubuntu 18.04. How to fix?](/ubuntu/%2Bsource/linux/%2Bquestion/692642) | 2020-08-28 19:44:36 UTC 2020-08-28 | [Richard H.](https://launchpad.net/~rhas) | — | Answered |
| Answered | 692468 | [How to do an apport kernel oops investigation?](/ubuntu/%2Bsource/linux/%2Bquestion/692468) | 2020-08-19 22:10:01 UTC 2020-08-19 | [Tim Blokdijk](https://launchpad.net/~tim-blokdijk) | — | Answered |
| Answered | 692400 | [Touchpad not working IdeaPad-3-14IIL05](/ubuntu/%2Bsource/linux/%2Bquestion/692400) | 2020-08-17 06:09:17 UTC 2020-08-17 | [IRFAN](https://launchpad.net/~irfanhrt) | — | Answered |
| Solved | 692356 | [PCIe Error on install of Ubuntu 20.04](/ubuntu/%2Bsource/linux/%2Bquestion/692356) | 2020-08-13 06:25:16 UTC 2020-08-13 | [Dan](https://launchpad.net/~bakerdude) | — | Solved |
| Solved | 691232 | [How to repair Failed to start Load Kernel Modules?](/ubuntu/%2Bsource/linux/%2Bquestion/691232) | 2020-06-09 14:18:23 UTC 2020-06-09 | [michael](https://launchpad.net/~yellupcm-gmail) | — | Solved |
| Solved | 691172 | [recently updated kernal to 5.3.0-53 from 5.3.0-51 but causes failure to shut down, seems to go through process, but Ethernet cable light and fan stay on, switch on next morning doesnt work untill a hard switch off (long press on power button) perfor](/ubuntu/%2Bsource/linux/%2Bquestion/691172) | 2020-06-06 09:53:52 UTC 2020-06-06 | [Peter](https://launchpad.net/~peter-lawrence-jones) | — | Solved |
| Solved | 690900 | [More info for bug #1880012](/ubuntu/%2Bsource/linux/%2Bquestion/690900) | 2020-05-22 22:53:07 UTC 2020-05-22 | [Sylvain Vedrenne](https://launchpad.net/~bludzee) | — | Solved |
| Solved | 689656 | [Kernel confusion](/ubuntu/%2Bsource/linux/%2Bquestion/689656) | 2020-04-02 13:19:40 UTC 2020-04-02 | [Ethan Lin](https://launchpad.net/~mainsystemadmin) | — | Solved |
| Answered | 689615 | [Kernel 5.3.0.42 Kernel panic - not syncing: Attempted to kill init! exitcode=0x00000007](/ubuntu/%2Bsource/linux/%2Bquestion/689615) | 2020-03-31 16:23:35 UTC 2020-03-31 | [Raul Soto Linck](https://launchpad.net/~rsotol028) | — | Answered |
| Solved | 689506 | [Green "boxes" on desktop after upgrading from eoan to focal](/ubuntu/%2Bsource/linux/%2Bquestion/689506) | 2020-03-26 09:45:50 UTC 2020-03-26 | [Michael John Lopez](https://launchpad.net/~mjglopez) | — | Solved |
| Answered | 689467 | [no sound using ubuntu 20.04 on samsung chromebook 3 celes](/ubuntu/%2Bsource/linux/%2Bquestion/689467) | 2020-03-22 19:08:36 UTC 2020-03-22 | [Kevin Adams](https://launchpad.net/~kevin717) | — | Answered |
| Answered | 689378 | [Kernel build - append to version](/ubuntu/%2Bsource/linux/%2Bquestion/689378) | 2020-03-19 06:55:11 UTC 2020-03-19 | [Zoltan](https://launchpad.net/~zoltanbus) | — | Answered |
| Open | 688530 | [Internal mic not working on Asus with kernel 5.3.0-28](/ubuntu/%2Bsource/linux/%2Bquestion/688530) | 2020-02-05 15:35:31 UTC 2020-02-05 | [Kamaldeep Singh Kahlon](https://launchpad.net/~kahlonkamal318) | — | Open |
| Solved | 688332 | [How to request upstream kernel change inclusion in Ubuntu 20.04](/ubuntu/%2Bsource/linux/%2Bquestion/688332) | 2020-01-29 12:26:22 UTC 2020-01-29 | [Mikko Kovanen](https://launchpad.net/~mikkokovanen) | — | Solved |
| Solved | 688242 | [how report bug to ppa:canonical-kernel-team ?](/ubuntu/%2Bsource/linux/%2Bquestion/688242) | 2020-01-25 15:26:14 UTC 2020-01-25 | [slimbook](https://launchpad.net/~slimbook) | — | Solved |
| Answered | 687856 | [Read-only filesystem on 16.04 (linux 4.15)](/ubuntu/%2Bsource/linux/%2Bquestion/687856) | 2020-01-08 11:06:02 UTC 2020-01-08 | [Celso Providelo](https://launchpad.net/~cprov) | — | Answered |
| Solved | 686001 | [19.10 Boots into a black screen](/ubuntu/%2Bsource/linux/%2Bquestion/686001) | 2019-11-19 01:20:56 UTC 2019-11-19 | [Felipe Moreno](https://launchpad.net/~felmoreno1726) | — | Solved |
| Answered | 685955 | [Linux kernel appropriate for specific laptop](/ubuntu/%2Bsource/linux/%2Bquestion/685955) | 2019-11-17 15:06:34 UTC 2019-11-17 | [Marios Nicolaou](https://launchpad.net/~mariosnic23) | — | Answered |

| **1** → **75** of 802 results | First • Previous • [**Next**](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Bquestions?batch=75&memo=75&start=75) • [Last](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Bquestions?batch=75&direction=backwards&start=750) |
| --- | --- |

* [Ask a question](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Baddquestion)

* [All FAQs](https://answers.launchpad.net/ubuntu/%2Bfaqs)
* [Open](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Bquestions?field.status=Open&field.sort=recently+updated+first&field.search_text=&field.actions.search=Search)
* [Answered](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Bquestions?field.status=Answered&field.status=Solved&field.sort=by+relevancy&field.search_text=&field.actions.search=Search)
* [My questions](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Bmyquestions)
* [Need attention](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Bneed-attention)
* [Ask a question](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Baddquestion)
* [Set answer contact](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Banswer-contact)
* [Help and support options](https://answers.launchpad.net/ubuntu/%2Bsource/linux/%2Bgethelp)

## Answer contacts for linux in Ubuntu

## Answer contacts for Ubuntu

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from git.kernel.org_d5f23da8_20250119_111634.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Miklos Szeredi <mszeredi@redhat.com> | 2018-07-18 15:44:41 +0200 |
| --- | --- | --- |
| committer | Miklos Szeredi <mszeredi@redhat.com> | 2018-07-18 15:44:41 +0200 |
| commit | [d1d04ef8572bc8c22265057bd3d5a79f223f8f52](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)) | |
| tree | [1271b2ebd9542e0070b0b3830b0bad17c76ca4ea](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52) | |
| parent | [e8c985bace1351c5f2d7a6f0d8ff3e677b58abb5](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=e8c985bace1351c5f2d7a6f0d8ff3e677b58abb5) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52&id2=e8c985bace1351c5f2d7a6f0d8ff3e677b58abb5)) | |
| download | [linux-d1d04ef8572bc8c22265057bd3d5a79f223f8f52.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-d1d04ef8572bc8c22265057bd3d5a79f223f8f52.tar.gz) | |

ovl: stack file opsImplement file operations on a regular overlay file. The underlying file
is opened separately and cached in ->private\_data.
It might be worth making an exception for such files when accounting in
nr\_file to confirm to userspace expectations. We are only adding a small
overhead (248bytes for the struct file) since the real inode and dentry are
pinned by overlayfs anyway.
This patch doesn't have any effect, since the vfs will use d\_real() to find
the real underlying file to open. The patch at the end of the series will
actually enable this functionality.
AV: make it use open\_with\_fake\_path(), don't mess with override\_creds
SzM: still need to mess with override\_creds() until no fs uses
current\_cred() in their open method.
Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)

| -rw-r--r-- | [fs/overlayfs/Makefile](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/overlayfs/Makefile?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [fs/overlayfs/file.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/overlayfs/file.c?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52) | 76 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [fs/overlayfs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/overlayfs/inode.c?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52) | 1 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [fs/overlayfs/overlayfs.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/overlayfs/overlayfs.h?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52) | 3 | |  |  |  | | --- | --- | --- | |

4 files changed, 82 insertions, 2 deletions

| diff --git a/fs/overlayfs/Makefile b/fs/overlayfs/Makefileindex 30802347a0204b..46e1ff8ac0564c 100644--- a/[fs/overlayfs/Makefile](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/Makefile?id=e8c985bace1351c5f2d7a6f0d8ff3e677b58abb5)+++ b/[fs/overlayfs/Makefile](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/Makefile?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)@@ -4,5 +4,5 @@  obj-$(CONFIG\_OVERLAY\_FS) += overlay.o -overlay-objs := super.o namei.o util.o inode.o dir.o readdir.o copy\_up.o \- export.o+overlay-objs := super.o namei.o util.o inode.o file.o dir.o readdir.o \+ copy\_up.o export.odiff --git a/fs/overlayfs/file.c b/fs/overlayfs/file.cnew file mode 100644index 00000000000000..ce7d002173a629--- /dev/null+++ b/[fs/overlayfs/file.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/file.c?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)@@ -0,0 +1,76 @@+/\*+ \* Copyright (C) 2017 Red Hat, Inc.+ \*+ \* This program is free software; you can redistribute it and/or modify it+ \* under the terms of the GNU General Public License version 2 as published by+ \* the Free Software Foundation.+ \*/++#include <linux/cred.h>+#include <linux/file.h>+#include <linux/xattr.h>+#include "overlayfs.h"++static struct file \*ovl\_open\_realfile(const struct file \*file)+{+ struct inode \*inode = file\_inode(file);+ struct inode \*upperinode = ovl\_inode\_upper(inode);+ struct inode \*realinode = upperinode ?: ovl\_inode\_lower(inode);+ struct file \*realfile;+ const struct cred \*old\_cred;++ old\_cred = ovl\_override\_creds(inode->i\_sb);+ realfile = open\_with\_fake\_path(&file->f\_path, file->f\_flags | O\_NOATIME,+ realinode, current\_cred());+ revert\_creds(old\_cred);++ pr\_debug("open(%p[%pD2/%c], 0%o) -> (%p, 0%o)\n",+ file, file, upperinode ? 'u' : 'l', file->f\_flags,+ realfile, IS\_ERR(realfile) ? 0 : realfile->f\_flags);++ return realfile;+}++static int ovl\_open(struct inode \*inode, struct file \*file)+{+ struct dentry \*dentry = file\_dentry(file);+ struct file \*realfile;+ int err;++ err = ovl\_open\_maybe\_copy\_up(dentry, file->f\_flags);+ if (err)+ return err;++ /\* No longer need these flags, so don't pass them on to underlying fs \*/+ file->f\_flags &= ~(O\_CREAT | O\_EXCL | O\_NOCTTY | O\_TRUNC);++ realfile = ovl\_open\_realfile(file);+ if (IS\_ERR(realfile))+ return PTR\_ERR(realfile);++ file->private\_data = realfile;++ return 0;+}++static int ovl\_release(struct inode \*inode, struct file \*file)+{+ fput(file->private\_data);++ return 0;+}++static loff\_t ovl\_llseek(struct file \*file, loff\_t offset, int whence)+{+ struct inode \*realinode = ovl\_inode\_real(file\_inode(file));++ return generic\_file\_llseek\_size(file, offset, whence,+ realinode->i\_sb->s\_maxbytes,+ i\_size\_read(realinode));+}++const struct file\_operations ovl\_file\_operations = {+ .open = ovl\_open,+ .release = ovl\_release,+ .llseek = ovl\_llseek,+};diff --git a/fs/overlayfs/inode.c b/fs/overlayfs/inode.cindex 5b6c86703d34bf..391e3a3b8ba1a4 100644--- a/[fs/overlayfs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/inode.c?id=e8c985bace1351c5f2d7a6f0d8ff3e677b58abb5)+++ b/[fs/overlayfs/inode.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/inode.c?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)@@ -535,6 +535,7 @@ static void ovl\_fill\_inode(struct inode \*inode, umode\_t mode, dev\_t rdev, switch (mode & S\_IFMT) { case S\_IFREG: inode->i\_op = &ovl\_file\_inode\_operations;+ inode->i\_fop = &ovl\_file\_operations; break;  case S\_IFDIR:diff --git a/fs/overlayfs/overlayfs.h b/fs/overlayfs/overlayfs.hindex f28f1e37d457e7..16d439ebfe0290 100644--- a/[fs/overlayfs/overlayfs.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/overlayfs.h?id=e8c985bace1351c5f2d7a6f0d8ff3e677b58abb5)+++ b/[fs/overlayfs/overlayfs.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/overlayfs.h?id=d1d04ef8572bc8c22265057bd3d5a79f223f8f52)@@ -377,6 +377,9 @@ struct dentry \*ovl\_create\_real(struct inode \*dir, struct dentry \*newdentry, int ovl\_cleanup(struct inode \*dir, struct dentry \*dentry); struct dentry \*ovl\_create\_temp(struct dentry \*workdir, struct ovl\_cattr \*attr); +/\* file.c \*/+extern const struct file\_operations ovl\_file\_operations;+ /\* copy\_up.c \*/ int ovl\_copy\_up(struct dentry \*dentry); int ovl\_copy\_up\_flags(struct dentry \*dentry, int flags); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-19 11:15:12 +0000



=== Content from git.kernel.org_e48bb760_20250119_111634.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=56230d956739b9cb1cbde439d76227d77979a04d)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=56230d956739b9cb1cbde439d76227d77979a04d)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=56230d956739b9cb1cbde439d76227d77979a04d)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=56230d956739b9cb1cbde439d76227d77979a04d)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Miklos Szeredi <mszeredi@redhat.com> | 2020-06-02 22:20:26 +0200 |
| --- | --- | --- |
| committer | Miklos Szeredi <mszeredi@redhat.com> | 2020-06-02 22:20:26 +0200 |
| commit | [56230d956739b9cb1cbde439d76227d77979a04d](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=56230d956739b9cb1cbde439d76227d77979a04d) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=56230d956739b9cb1cbde439d76227d77979a04d)) | |
| tree | [f8697c302a2226793cff22debe17afbcaaec8b98](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=56230d956739b9cb1cbde439d76227d77979a04d) | |
| parent | [48bd024b8a40d73ad6b086de2615738da0c7004f](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=48bd024b8a40d73ad6b086de2615738da0c7004f) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=56230d956739b9cb1cbde439d76227d77979a04d&id2=48bd024b8a40d73ad6b086de2615738da0c7004f)) | |
| download | [linux-56230d956739b9cb1cbde439d76227d77979a04d.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-56230d956739b9cb1cbde439d76227d77979a04d.tar.gz) | |

ovl: verify permissions in ovl\_path\_open()Check permission before opening a real file.
ovl\_path\_open() is used by readdir and copy-up routines.
ovl\_permission() theoretically already checked copy up permissions, but it
doesn't hurt to re-do these checks during the actual copy-up.
For directory reading ovl\_permission() only checks access to topmost
underlying layer. Readdir on a merged directory accesses layers below the
topmost one as well. Permission wasn't checked for these layers.
Note: modifying ovl\_permission() to perform this check would be far more
complex and hence more bug prone. The result is less precise permissions
returned in access(2). If this turns out to be an issue, we can revisit
this bug.
Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=56230d956739b9cb1cbde439d76227d77979a04d)

| -rw-r--r-- | [fs/overlayfs/util.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/overlayfs/util.c?id=56230d956739b9cb1cbde439d76227d77979a04d) | 27 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 26 insertions, 1 deletions

| diff --git a/fs/overlayfs/util.c b/fs/overlayfs/util.cindex 01755bc186c91a..33a7c60be3eda8 100644--- a/[fs/overlayfs/util.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/util.c?id=48bd024b8a40d73ad6b086de2615738da0c7004f)+++ b/[fs/overlayfs/util.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/util.c?id=56230d956739b9cb1cbde439d76227d77979a04d)@@ -459,7 +459,32 @@ bool ovl\_is\_whiteout(struct dentry \*dentry)  struct file \*ovl\_path\_open(struct path \*path, int flags) {- return dentry\_open(path, flags | O\_NOATIME, current\_cred());+ struct inode \*inode = d\_inode(path->dentry);+ int err, acc\_mode;++ if (flags & ~(O\_ACCMODE | O\_LARGEFILE))+ BUG();++ switch (flags & O\_ACCMODE) {+ case O\_RDONLY:+ acc\_mode = MAY\_READ;+ break;+ case O\_WRONLY:+ acc\_mode = MAY\_WRITE;+ break;+ default:+ BUG();+ }++ err = inode\_permission(inode, acc\_mode | MAY\_OPEN);+ if (err)+ return ERR\_PTR(err);++ /\* O\_NOATIME is an optimization, don't fail if not permitted \*/+ if (inode\_owner\_or\_capable(inode))+ flags |= O\_NOATIME;++ return dentry\_open(path, flags, current\_cred()); }  /\* Caller should hold ovl\_inode->lock \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-19 11:00:37 +0000



=== Content from www.openwall.com_21280ff2_20250119_111645.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](../../../2020/10/15/1) [[<thread-prev]](../../../2020/10/13/6) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <oxqCR3d1ydEMwuGW3PBgnpgk9XUJjoqNeS5JCk7dcaEaQGJyq7TxVPJk2fWAgk9Bjd4MfdLDr_CHRPBTeJv9kRZPOV4X2b0HAALr17Vy5Wo=@protonmail.ch>
Date: Wed, 14 Oct 2020 13:14:31 +0000
From: Jordan Glover <Golden_Miller83@...tonmail.ch>
To: "oss-security@...ts.openwall.com" <oss-security@...ts.openwall.com>
Cc: "sbeattie@...ntu.com" <sbeattie@...ntu.com>
Subject: Re: CVE-2020-16120 - incorrect unprivileged overlayfs permission checking

On Tuesday, October 13, 2020 5:10 PM, Steve Beattie <steve.beattie@...onical.com> wrote:

> Hello,
>
> CVE-2020-16120 - incorrect unprivileged overlayfs permission checking
>
> Giuseppe Scrivano discovered that overlayfs did not properly perform
> permission checking when copying up files in an overlayfs, and can be
> exploited from within a user namespace, if, for example, unprivileged
> user namespaces are allowed.
>
> An attacker can abuse this to get read access to files on the system
> that they would not normally be permitted to access.
>
> This likely only has an impact on Ubuntu kernels, where unprivileged
> user namespaces are enabled by default.

AFAIK unpriv user ns are enabled by default on vast majority of distros nowadays with debian (rhel?) being an exception (although this is going to change at some point[1]). I think what makes ubuntu different is unpriv overlayfs which doesn't exist upstream thus in most other distros.

[1] <https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=898446>

>
> The following upstream commits address the issue:
>
> 48bd024b8a40d73ad6b086de2615738da0c7004f ("ovl: switch to mounter creds in readdir")
> 56230d956739b9cb1cbde439d76227d77979a04d ("ovl: verify permissions in ovl_path_open()")
> 05acefb4872dae89e772729efb194af754c877e8 ("ovl: check permission to open real file")
>
> The following commits also may be desired or necessary:
>
> 130fdbc3d1f9966dd4230709c30f3768bccd3065 ("ovl: pass correct flags for opening real directory")
> 292f902a40c11f043a5ca1305a114da0e523eaa3 ("ovl: call secutiry hook in ovl_real_ioctl()")
>
> Mitigation on systems where unprivileged user namespaces are enabled
> but not needed is to set the kernel.unprivileged_userns_clone sysctl
> to 0. e.g.:
>
> $ sudo sysctl kernel.unprivileged_userns_clone=0
>
> and across reboots by adding a file in /etc/sysctl.d/ that contains:
>
> kernel.unprivileged_userns_clone=0

This will only work with out-of-tree patch included in distro kernel.

>
> Thanks.
>
>
>
> Steve Beattie
> sbeattie@...ntu.com

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from ubuntu.com_32f8f21a_20250119_111644.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4578-1: Linux kernel vulnerabilities

14 October 2020

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.04 ESM](/security/notices?release=bionic)
* [Ubuntu 16.04 ESM](/security/notices?release=xenial)
* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-aws-hwe](/security/cves?package=linux-aws-hwe) - Linux kernel for Amazon Web Services (AWS-HWE) systems
* [linux-azure](/security/cves?package=linux-azure) - Linux kernel for Microsoft Azure Cloud systems
* [linux-azure-4.15](/security/cves?package=linux-azure-4.15) - Linux kernel for Microsoft Azure Cloud systems
* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-gcp-4.15](/security/cves?package=linux-gcp-4.15) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-gke-4.15](/security/cves?package=linux-gke-4.15) - Linux kernel for Google Container Engine (GKE) systems
* [linux-hwe](/security/cves?package=linux-hwe) - Linux hardware enablement (HWE) kernel
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-oem](/security/cves?package=linux-oem) - Linux kernel for OEM systems
* [linux-oracle](/security/cves?package=linux-oracle) - Linux kernel for Oracle Cloud systems
* [linux-raspi2](/security/cves?package=linux-raspi2) - Linux kernel for Raspberry Pi (V8) systems
* [linux-snapdragon](/security/cves?package=linux-snapdragon) - Linux kernel for Qualcomm Snapdragon processors

## Details

Hadar Manor discovered that the DCCP protocol implementation in the Linux

kernel improperly handled socket reuse, leading to a use-after-free

vulnerability. A local attacker could use this to cause a denial of service

(system crash) or possibly execute arbitrary code. ([CVE-2020-16119](/security/CVE-2020-16119))

Wen Xu discovered that the XFS file system in the Linux kernel did not

properly validate inode metadata in some situations. An attacker could use

this to construct a malicious XFS image that, when mounted, could cause a

denial of service (system crash). ([CVE-2018-10322](/security/CVE-2018-10322))

It was discovered that the btrfs file system in the Linux kernel contained

a use-after-free vulnerability when merging free space. An attacker could

use this to construct a malicious btrfs image that, when mounted and

operated on, could cause a denial of service (system crash).

([CVE-2019-19448](/security/CVE-2019-19448))

Jay Shin discovered that the ext4 file system implementation in the Linux

kernel did not properly handle directory access with broken indexing,

leading to an out-of-bounds read vulnerability. A local attacker could use

this to cause a denial of service (system crash). ([CVE-2020-14314](/security/CVE-2020-14314))

Giuseppe Scrivano discovered that the overlay file system in the Linux

kernel did not properly perform permission checks in some situations. A

local attacker could possibly use this to bypass intended restrictions and

gain read access to restricted files. ([CVE-2020-16120](/security/CVE-2020-16120))

It was discovered that the NFS client implementation in the Linux kernel

did not properly perform bounds checking before copying security labels in

some situations. A local attacker could use this to cause a denial of

service (system crash) or possibly execute arbitrary code. ([CVE-2020-25212](/security/CVE-2020-25212))

It was discovered that the NFC implementation in the Linux kernel did not

properly perform permissions checks when opening raw sockets. A local

attacker could use this to create or listen to NFC traffic.

([CVE-2020-26088](/security/CVE-2020-26088))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.04

* [linux-image-4.15.0-1057-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle)
  -
  [4.15.0-1057.62](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle/4.15.0-1057.62)
* [linux-image-4.15.0-1072-gke](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gke-4.15)
  -
  [4.15.0-1072.76](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gke-4.15/4.15.0-1072.76)
* [linux-image-4.15.0-1073-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2)
  -
  [4.15.0-1073.78](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2/4.15.0-1073.78)
* [linux-image-4.15.0-1077-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-kvm)
  -
  [4.15.0-1077.79](https://launchpad.net/ubuntu/%2Bsource/linux-kvm/4.15.0-1077.79)
* [linux-image-4.15.0-1086-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [4.15.0-1086.91](https://launchpad.net/ubuntu/%2Bsource/linux-aws/4.15.0-1086.91)
* [linux-image-4.15.0-1086-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp-4.15)
  -
  [4.15.0-1086.98](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp-4.15/4.15.0-1086.98)
* [linux-image-4.15.0-1089-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon)
  -
  [4.15.0-1089.98](https://launchpad.net/ubuntu/%2Bsource/linux-snapdragon/4.15.0-1089.98)
* [linux-image-4.15.0-1099-azure](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure-4.15)
  -
  [4.15.0-1099.110](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure-4.15/4.15.0-1099.110)
* [linux-image-4.15.0-1099-oem](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oem)
  -
  [4.15.0-1099.109](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oem/4.15.0-1099.109)
* [linux-image-4.15.0-121-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [4.15.0-121.123](https://launchpad.net/ubuntu/%2Bsource/linux-signed/4.15.0-121.123)
* [linux-image-4.15.0-121-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [4.15.0-121.123](https://launchpad.net/ubuntu/%2Bsource/linux/4.15.0-121.123)
* [linux-image-4.15.0-121-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [4.15.0-121.123](https://launchpad.net/ubuntu/%2Bsource/linux-signed/4.15.0-121.123)
* [linux-image-aws-lts-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws)
  -
  [4.15.0.1086.88](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws/4.15.0.1086.88)
* [linux-image-azure-lts-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure-4.15)
  -
  [4.15.0.1099.72](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure-4.15/4.15.0.1099.72)
* [linux-image-gcp-lts-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp-4.15)
  -
  [4.15.0.1086.104](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp-4.15/4.15.0.1086.104)
* [linux-image-generic](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.15.0.121.108](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.15.0.121.108)
* [linux-image-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.15.0.121.108](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.15.0.121.108)
* [linux-image-gke](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-4.15)
  -
  [4.15.0.1072.76](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-4.15/4.15.0.1072.76)
* [linux-image-gke-4.15](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-4.15)
  -
  [4.15.0.1072.76](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-4.15/4.15.0.1072.76)
* [linux-image-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm)
  -
  [4.15.0.1077.73](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm/4.15.0.1077.73)
* [linux-image-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.15.0.121.108](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.15.0.121.108)
* [linux-image-oem](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oem)
  -
  [4.15.0.1099.103](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oem/4.15.0.1099.103)
* [linux-image-oracle-lts-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle)
  -
  [4.15.0.1057.67](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle/4.15.0.1057.67)
* [linux-image-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2)
  -
  [4.15.0.1073.70](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2/4.15.0.1073.70)
* [linux-image-snapdragon](https://launchpad.net/ubuntu/%2Bsource/linux-meta-snapdragon)
  -
  [4.15.0.1089.92](https://launchpad.net/ubuntu/%2Bsource/linux-meta-snapdragon/4.15.0.1089.92)
* [linux-image-virtual](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [4.15.0.121.108](https://launchpad.net/ubuntu/%2Bsource/linux-meta/4.15.0.121.108)

##### Ubuntu 16.04

* [linux-image-4.15.0-1056-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle)
  -
  [4.15.0-1056.61~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle/4.15.0-1056.61~16.04.1)
* [linux-image-4.15.0-1085-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws-hwe)
  -
  [4.15.0-1085.90~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-aws-hwe/4.15.0-1085.90~16.04.1)
* [linux-image-4.15.0-1086-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp)
  -
  [4.15.0-1086.98~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp/4.15.0-1086.98~16.04.1)
* [linux-image-4.15.0-1098-azure](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure)
  -
  [4.15.0-1098.109~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure/4.15.0-1098.109~16.04.1)
* [linux-image-4.15.0-120-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe)
  -
  [4.15.0-120.122~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe/4.15.0-120.122~16.04.1)
* [linux-image-4.15.0-120-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-hwe)
  -
  [4.15.0-120.122~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe/4.15.0-120.122~16.04.1)
* [linux-image-4.15.0-120-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe)
  -
  [4.15.0-120.122~16.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe/4.15.0-120.122~16.04.1)
* [linux-image-aws-hwe](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws-hwe)
  -
  [4.15.0.1085.81](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws-hwe/4.15.0.1085.81)
* [linux-image-azure](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure)
  -
  [4.15.0.1098.92](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure/4.15.0.1098.92)
* [linux-image-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [4.15.0.1086.87](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/4.15.0.1086.87)
* [linux-image-generic-hwe-16.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.120.121](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.120.121)
* [linux-image-generic-lpae-hwe-16.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.120.121](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.120.121)
* [linux-image-gke](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [4.15.0.1086.87](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/4.15.0.1086.87)
* [linux-image-lowlatency-hwe-16.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.120.121](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.120.121)
* [linux-image-oem](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.120.121](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.120.121)
* [linux-image-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle)
  -
  [4.15.0.1056.46](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle/4.15.0.1056.46)
* [linux-image-virtual-hwe-16.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [4.15.0.120.121](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/4.15.0.120.121)

##### Ubuntu 14.04

* [linux-image-4.15.0-1098-azure](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure)
  -
  [4.15.0-1098.109~14.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure/4.15.0-1098.109~14.04.1)
* [linux-image-azure](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure)
  -
  [4.15.0.1098.74](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure/4.15.0.1098.74)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2020-26088](/security/CVE-2020-26088)
* [CVE-2018-10322](/security/CVE-2018-10322)
* [CVE-2020-25212](/security/CVE-2020-25212)
* [CVE-2020-14314](/security/CVE-2020-14314)
* [CVE-2020-16119](/security/CVE-2020-16119)
* [CVE-2019-19448](/security/CVE-2019-19448)
* [CVE-2020-16120](/security/CVE-2020-16120)

## Related notices

* [USN-4579-1](/security/notices/USN-4579-1)
* [USN-4525-1](/security/notices/USN-4525-1)
* [USN-4527-1](/security/notices/USN-4527-1)
* [USN-4752-1](/security/notices/USN-4752-1)
* [USN-4576-1](/security/notices/USN-4576-1)
* [USN-4577-1](/security/notices/USN-4577-1)
* [USN-4580-1](/security/notices/USN-4580-1)
* [LSN-0072-1](/security/notices/LSN-0072-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from launchpad.net_78530ca3_20250119_111643.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[linux package](https://launchpad.net/ubuntu/%2Bsource/linux)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/linux)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/linux)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/linux)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/linux)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/linux)

# overlay: permission regression in 5.4.0-51.56 due to patches related to CVE-2020-16120

Bug #1900141 reported by
[Philipp Wendler](https://launchpad.net/~philw85)
on 2020-10-16

[28](/%2Bhelp-bugs/bug-heat.html)

This bug affects 5 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [linux (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/linux "Latest release: 5.15.0-132.143, uploaded to main on 2025-01-15 20:29:39.436053+00:00 by Stefan Bader (smb), maintained by Ubuntu Kernel Team (kernel-team)") | Fix Released | Undecided | [Seth Forshee](https://launchpad.net/~sforshee) |  |
|  | [Focal](https://bugs.launchpad.net/ubuntu/focal/%2Bsource/linux) | Fix Released | High | [Seth Forshee](https://launchpad.net/~sforshee) |  |
|  | [Groovy](https://bugs.launchpad.net/ubuntu/groovy/%2Bsource/linux) | Fix Released | High | [Seth Forshee](https://launchpad.net/~sforshee) |  |

### Bug Description

SRU Justification

[Impact]

The backports to fix CVE-2020-16120 introduced a regression for overlay mounts within user namespaces. Files with ownership outside of the user namespace can no longer be accessed, even if allowed by both DAC and MAC.

This issue is fixed by the following upstream commit:

<https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b6650dab404c701d7fe08a108b746542a934da84>

This commit relaxes the check to remove O\_NOATIME from the open flags for the file in the lower filesystem when the overlay filesystem mounter is not privileged with respect to the underlying inode, rather than failing the open as happens now.

[Test Case]

The attached lp1900141.sh script reproduces the issue.

[Where problems could occur]

For the most part this patch restores previous behavior of allowing access to these files while keeping the enhanced permission checks towards the lower filesystem to help prevent unauthorized access to file data in the lower filesystem. The one difference in behavior is that files in the lower filesystem may no longer be opened with the O\_NOATIME flag, potentially causing atime updates for these files which were not happening before. If any software expects O\_NOATIME behavior in this situation then it could cause problems for that software. However, the correct behavior is that only the inode owner or a process with CAP\_FOWNER towards the inode owner is allowed to open with O\_NOATIME (as documented in open(2)).

---

We use unprivileged user namespaces with overlay mounts for containers. After recently upgrading our Focal kernels to 5.4.0-51.56 this breaks, one cannot access files through the overlay mount in the container anymore. This is very likely caused by some of the patches that were added in relation to CVE-2020-16120.

The following commands allow to reproduce the problem when executed as an arbitrary non-root user:

mkdir /tmp/test /tmp/test/upper /tmp/test/work /tmp/test/usr

unshare -m -U -r /bin/sh -c "mount -t overlay none /tmp/test/usr -o lowerdir=/usr,upperdir=/tmp/test/upper,workdir=/tmp/test/work; ls -l /tmp/test/usr/bin/id; file /tmp/test/usr/bin/id; /tmp/test/usr/bin/id"

The output when broken is this:

-rwxr-xr-x 1 nobody nogroup 47480 Sep 5 2019 /tmp/test/usr/bin/id

/tmp/test/usr/bin/id: executable, regular file, no read permission

/bin/sh: 1: /tmp/test/usr/bin/id: Operation not permitted

The expected output is this:

-rwxr-xr-x 1 nobody nogroup 43224 Jan 18 2018 /tmp/test/usr/bin/id

/tmp/test/usr/bin/id: ELF 64-bit LSB shared object, ...

uid=0(root) gid=0(root) groups=0(root),65534(nogroup)

These commands create a user namespace and within it mount an overlay of /usr to /tmp/test/usr and then try to access something in it.

This works on Ubuntu Bionic with kernel 4.15.0-121.123 (note that this already includes a fix for CVE-2020-16120) and on kernel 5.4.0-48.52 but is broken on kernel 5.4.0-51.56, no matter whether on Bionic or Focal.

So I strongly suspect that not the actual security fixes for CVE-2020-16120 are the cause, but one of the following two patches that according to the changelogs were applied in the same revision but only to 5.4, not to 4.15:

ovl: call secutiry hook in ovl\_real\_ioctl()

ovl: check permission to open real file

The mail with the announcement (<https://www.openwall.com/lists/oss-security/2020/10/13/6>) lists these two commits as separate from the actual security fixes ("may be desired or necessary").

Is it possible to revert these two changes or fix them such that our unprivileged containers work again on Ubuntu kernel 5.4? Or is there a workaround that I can add to my container solution such that this use case works again?

ProblemType: Bug

DistroRelease: Ubuntu 20.04

Package: linux-image-5.4.0-51-generic 5.4.0-51.56

ProcVersionSignature: User Name 5.4.0-51.56-generic 5.4.65

Uname: Linux 5.4.0-51-generic x86\_64

AlsaDevices:

 total 0

 crw-rw---- 1 root audio 116, 1 Oct 14 04:48 seq

 crw-rw---- 1 root audio 116, 33 Oct 14 04:48 timer

AplayDevices: Error: [Errno 2] No such file or directory: 'aplay'

ApportVersion: 2.20.11-0ubuntu27.9

Architecture: amd64

ArecordDevices: Error: [Errno 2] No such file or directory: 'arecord'

AudioDevicesInUse: Error: [Errno 2] No such file or directory: 'fuser'

CasperMD5CheckResult: skip

CurrentDmesg: Error: command ['dmesg'] failed with exit code 1: dmesg: read kernel buffer failed: Operation not permitted

Date: Fri Oct 16 13:02:32 2020

IwConfig: Error: [Errno 2] No such file or directory: 'iwconfig'

Lsusb:

 Bus 001 Device 002: ID 0627:0001 Adomax Technology Co., Ltd QEMU USB Tablet

 Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub

Lsusb-t:

 /: Bus 01.Port 1: Dev 1, Class=root\_hub, Driver=uhci\_hcd/2p, 12M

     |\_\_ Port 1: Dev 2, If 0, Class=Human Interface Device, Driver=usbhid, 12M

MachineType: QEMU Standard PC (i440FX + PIIX, 1996)

PciMultimedia:

ProcEnviron:

 TERM=screen-256color

 PATH=(custom, no user)

 XDG\_RUNTIME\_DIR=<set>

 LANG=C.UTF-8

 SHELL=/bin/bash

ProcFB: 0 bochs-drmdrmfb

ProcKernelCmdLine: BOOT\_IMAGE=/boot/vmlinuz-5.4.0-51-generic root=PARTUUID=59ea2f51-599c-49f2-b9b3-77197e333865 ro console=tty1 console=ttyS0

RelatedPackageVersions:

 linux-restricted-modules-5.4.0-51-generic N/A

 linux-backports-modules-5.4.0-51-generic N/A

 linux-firmware 1.187.3

RfKill: Error: [Errno 2] No such file or directory: 'rfkill'

SourcePackage: linux

UpgradeStatus: No upgrade log present (probably fresh install)

dmi.bios.date: 04/01/2014

dmi.bios.vendor: SeaBIOS

dmi.bios.version: rel-1.13.0-0-gf21b5a4aeb02-prebuilt.qemu.org

dmi.chassis.type: 1

dmi.chassis.vendor: QEMU

dmi.chassis.version: pc-i440fx-5.0

dmi.modalias: dmi:bvnSeaBIOS:bvrrel-1.13.0-0-gf21b5a4aeb02-prebuilt.qemu.org:bd04/01/2014:svnQEMU:pnStandardPC(i440FX+PIIX,1996):pvrpc-i440fx-5.0:cvnQEMU:ct1:cvrpc-i440fx-5.0:

dmi.product.name: Standard PC (i440FX + PIIX, 1996)

dmi.product.version: pc-i440fx-5.0

dmi.sys.vendor: QEMU

See [original description](comments/0)

Tags:

[focal](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=focal)
[verification-done-focal](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=verification-done-focal)
[amd64](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=amd64)
[apport-bug](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=apport-bug)
[verification-done-groovy](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=verification-done-groovy)

## CVE References

* [2020-16120](/bugs/cve/2020-16120 "Overlayfs did not properly perform pe...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Philipp Wendler (philw85)](https://launchpad.net/~philw85) wrote on 2020-10-16: |  |  | [#1](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/1) |
| --- | --- | --- | --- |

* [CRDA.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422992/%2Bfiles/CRDA.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422992)
  (454 bytes,
  text/plain; charset="utf-8")
* [Dependencies.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422993/%2Bfiles/Dependencies.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422993)
  (2.5 KiB,
  text/plain; charset="utf-8")
* [Lspci.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422994/%2Bfiles/Lspci.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422994)
  (8.7 KiB,
  text/plain; charset="utf-8")
* [Lspci-vt.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422995/%2Bfiles/Lspci-vt.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422995)
  (711 bytes,
  text/plain; charset="utf-8")
* [Lsusb-v.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422996/%2Bfiles/Lsusb-v.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422996)
  (3.5 KiB,
  text/plain; charset="utf-8")
* [ProcCpuinfo.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422997/%2Bfiles/ProcCpuinfo.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422997)
  (1.1 KiB,
  text/plain; charset="utf-8")
* [ProcCpuinfoMinimal.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422998/%2Bfiles/ProcCpuinfoMinimal.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422998)
  (1.1 KiB,
  text/plain; charset="utf-8")
* [ProcInterrupts.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422999/%2Bfiles/ProcInterrupts.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422999)
  (1.8 KiB,
  text/plain; charset="utf-8")
* [ProcModules.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423000/%2Bfiles/ProcModules.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423000)
  (2.7 KiB,
  text/plain; charset="utf-8")
* [UdevDb.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423001/%2Bfiles/UdevDb.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423001)
  (96.9 KiB,
  text/plain; charset="utf-8")
* [WifiSyslog.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423002/%2Bfiles/WifiSyslog.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423002)
  (1.7 KiB,
  text/plain; charset="utf-8")
* [acpidump.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423003/%2Bfiles/acpidump.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423003)
  (582 bytes,
  text/plain; charset="utf-8")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2020-10-16: |  |  | [#2](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/2) |
| --- | --- | --- | --- |

Status changed to 'Confirmed' because the bug affects multiple users.

Status changed to 'Confirmed' because the bug affects multiple users.

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Forshee (sforshee)](https://launchpad.net/~sforshee) wrote on 2020-10-20: |  |  | [#3](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/3) |
| --- | --- | --- | --- |

I think I see what the problem is, one of the patches adds a check that is probably unnecessary and too restrictive. This is an upstream issue though, so I'm going to follow up with the upstream developers to ensure there isn't a good reason for the check that isn't apparent to me.

I think I see what the problem is, one of the patches adds a check that is probably unnecessary and too restrictive. This is an upstream issue though, so I'm going to follow up with the upstream developers to ensure there isn't a good reason for the check that isn't apparent to me.

| Changed in linux (Ubuntu): | |
| --- | --- |
| **assignee**: | nobody → Seth Forshee (sforshee) |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Philipp Wendler (philw85)](https://launchpad.net/~philw85) wrote on 2020-11-23: |  |  | [#4](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/4) |
| --- | --- | --- | --- |

I noticed that the changelog of the kernel package 5.4.0-50.55~18.04.1 for Bionic now also includes the two additional patches, and indeed I can confirm that on Bionic with kernel 5.4.0-54-generic the regression was now also introduced.

Is there an update whether it will be possible to solve this regression? It breaks our container runtime unfortunately.

I noticed that the changelog of the kernel package 5.4.0-50.55~18.04.1 for Bionic now also includes the two additional patches, and indeed I can confirm that on Bionic with kernel 5.4.0-54-generic the regression was now also introduced.
Is there an update whether it will be possible to solve this regression? It breaks our container runtime unfortunately.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lane Roberts (lanecroberts)](https://launchpad.net/~lanecroberts) wrote on 2020-12-22: |  |  | [#5](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/5) |
| --- | --- | --- | --- |

This also breaks some of our containers - is there any kind of work-around we can use?

This also breaks some of our containers - is there any kind of work-around we can use?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Forshee (sforshee)](https://launchpad.net/~sforshee) wrote on 2021-01-06: |  |  | [#6](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/6) |
| --- | --- | --- | --- |

* [lp1900141.sh](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5449802/%2Bfiles/lp1900141.sh)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5449802)
  (345 bytes,
  text/x-sh)

Apologies for the delay on this bug. There is a fix upstream in 5.11-rc1, I've backported the fix to the test kernel located here:

[https://people.canonical.com/~sforshee/lp1900141/linux-5.4.0-59.65+lp1900141v202101061102/](https://people.canonical.com/~sforshee/lp1900141/linux-5.4.0-59.65%2Blp1900141v202101061102/)

I'm also attaching a script which reproduces the bug. In my testing the problem looks to be fixed by this patch, but additional testing is appreciated.

Apologies for the delay on this bug. There is a fix upstream in 5.11-rc1, I've backported the fix to the test kernel located here:
https://people.canonical.com/~sforshee/lp1900141/linux-5.4.0-59.65+lp1900141v202101061102/
I'm also attaching a script which reproduces the bug. In my testing the problem looks to be fixed by this patch, but additional testing is appreciated.

[Seth Forshee (sforshee)](https://launchpad.net/~sforshee)
on 2021-01-06

| Changed in linux (Ubuntu Focal): | |
| --- | --- |
| **assignee**: | nobody → Seth Forshee (sforshee) |
| **importance**: | Undecided → High |
| **status**: | New → In Progress |
| Changed in linux (Ubuntu Groovy): | |
| **assignee**: | nobody → Seth Forshee (sforshee) |
| **importance**: | Undecided → High |
| **status**: | New → In Progress |

[Seth Forshee (sforshee)](https://launchpad.net/~sforshee)
on 2021-01-06

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lane Roberts (lanecroberts)](https://launchpad.net/~lanecroberts) wrote on 2021-01-07: |  |  | [#7](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/7) |
| --- | --- | --- | --- |

Thanks Seth - that appears to fix our problem as well!

Thanks Seth - that appears to fix our problem as well!

[Kleber Sacilotto de Souza (kleber-souza)](https://launchpad.net/~kleber-souza)
on 2021-01-07

| Changed in linux (Ubuntu Focal): | |
| --- | --- |
| **status**: | In Progress → Fix Committed |
| Changed in linux (Ubuntu Groovy): | |
| **status**: | In Progress → Fix Committed |

[Seth Forshee (sforshee)](https://launchpad.net/~sforshee)
on 2021-01-07

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ubuntu Kernel Bot (ubuntu-kernel-bot)](https://launchpad.net/~ubuntu-kernel-bot) wrote on 2021-01-08: |  |  | [#8](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/8) |
| --- | --- | --- | --- |

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-groovy' to 'verification-done-groovy'. If the problem still exists, change the tag 'verification-needed-groovy' to 'verification-failed-groovy'.

If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.

See <https://wiki.ubuntu.com/Testing/EnableProposed> for documentation how to enable and use -proposed. Thank you!

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-groovy' to 'verification-done-groovy'. If the problem still exists, change the tag 'verification-needed-groovy' to 'verification-failed-groovy'.
If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.
See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed. Thank you!

| **tags**: | added: verification-needed-groovy |
| --- | --- |
| **tags**: | added: verification-needed-focal |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ubuntu Kernel Bot (ubuntu-kernel-bot)](https://launchpad.net/~ubuntu-kernel-bot) wrote on 2021-01-08: |  |  | [#9](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/9) |
| --- | --- | --- | --- |

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-focal' to 'verification-done-focal'. If the problem still exists, change the tag 'verification-needed-focal' to 'verification-failed-focal'.

If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.

See <https://wiki.ubuntu.com/Testing/EnableProposed> for documentation how to enable and use -proposed. Thank you!

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-focal' to 'verification-done-focal'. If the problem still exists, change the tag 'verification-needed-focal' to 'verification-failed-focal'.
If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.
See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed. Thank you!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Philipp Wendler (philw85)](https://launchpad.net/~philw85) wrote on 2021-01-11: |  |  | [#10](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/10) |
| --- | --- | --- | --- |

Thanks!

I tested it on a Focal machine and the -proposed kernel works. However, I don't have a Groovy machine here, is it necessary for me to test this?

I noticed that in the list of affected packages in the bug metadata Bionic is not mentioned. Will the fix also be backported there?

Thanks!
I tested it on a Focal machine and the -proposed kernel works. However, I don't have a Groovy machine here, is it necessary for me to test this?
I noticed that in the list of affected packages in the bug metadata Bionic is not mentioned. Will the fix also be backported there?

| **tags**: | added: verification-done-focalremoved: verification-needed-focal |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Forshee (sforshee)](https://launchpad.net/~sforshee) wrote on 2021-01-11:  [**Re: [Bug 1900141] Re: overlay: permission regression in 5.4.0-51.56 due to patches related to CVE-2020-16120**](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/11) |  |  | [#11](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/11) |
| --- | --- | --- | --- |

On Mon, Jan 11, 2021 at 11:12:35AM -0000, Philipp Wendler wrote:

> I tested it on a Focal machine and the -proposed kernel works. However,

> I don't have a Groovy machine here, is it necessary for me to test this?

I can verify the fix in groovy.

> I noticed that in the list of affected packages in the bug metadata

> Bionic is not mentioned. Will the fix also be backported there?

It depends on which kernel you are talking about. The bionic GA kernel

(4.15) was not affected based on my testing. If you are seeing problems

with it, please let me know.

The bionic HWE kernel is derived from the kernel source in focal, so

that kernel does not need to be fixed separately from the focal kernel.

On Mon, Jan 11, 2021 at 11:12:35AM -0000, Philipp Wendler wrote:
> I tested it on a Focal machine and the -proposed kernel works. However,
> I don't have a Groovy machine here, is it necessary for me to test this?
I can verify the fix in groovy.
> I noticed that in the list of affected packages in the bug metadata
> Bionic is not mentioned. Will the fix also be backported there?
It depends on which kernel you are talking about. The bionic GA kernel
(4.15) was not affected based on my testing. If you are seeing problems
with it, please let me know.
The bionic HWE kernel is derived from the kernel source in focal, so
that kernel does not need to be fixed separately from the focal kernel.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Forshee (sforshee)](https://launchpad.net/~sforshee) wrote on 2021-01-11: |  |  | [#12](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/12) |
| --- | --- | --- | --- |

Confirmed that the attached test script reproduces the problem with 5.8.0-36-generic from groovy-updates. ith 5.8.0-37-generic from groovy-proposed the problem is fixed.

Confirmed that the attached test script reproduces the problem with 5.8.0-36-generic from groovy-updates. ith 5.8.0-37-generic from groovy-proposed the problem is fixed.

| **tags**: | added: verification-done-groovyremoved: verification-needed-groovy |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Philipp Wendler (philw85)](https://launchpad.net/~philw85) wrote on 2021-01-12: |  |  | [#13](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/13) |
| --- | --- | --- | --- |

Thanks!

>> I noticed that in the list of affected packages in the bug metadata

>> Bionic is not mentioned. Will the fix also be backported there?

>

> It depends on which kernel you are talking about. The bionic GA kernel

> (4.15) was not affected based on my testing. If you are seeing problems

> with it, please let me know.

4.15 was not affected indeed.

> The bionic HWE kernel is derived from the kernel source in focal, so

> that kernel does not need to be fixed separately from the focal kernel.

Ok, just wanted to make sure this is the case.

Everything is fine for me now.

Thanks!
>> I noticed that in the list of affected packages in the bug metadata
>> Bionic is not mentioned. Will the fix also be backported there?
>
> It depends on which kernel you are talking about. The bionic GA kernel
> (4.15) was not affected based on my testing. If you are seeing problems
> with it, please let me know.
4.15 was not affected indeed.
> The bionic HWE kernel is derived from the kernel source in focal, so
> that kernel does not need to be fixed separately from the focal kernel.
Ok, just wanted to make sure this is the case.
Everything is fine for me now.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2021-01-26: |  |  | [#14](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/14) |
| --- | --- | --- | --- |

This bug was fixed in the package linux - 5.4.0-65.73

---------------

linux (5.4.0-65.73) focal; urgency=medium

\* focal/linux: 5.4.0-65.73 -proposed tracker (LP: [#1912220](/bugs/1912220))

\* initramfs unpacking failed (LP: [#1835660](/bugs/1835660))

    - SAUCE: lib/decompress\_unlz4.c: correctly handle zero-padding around initrds.

\* overlay: permission regression in 5.4.0-51.56 due to patches related to

    CVE-2020-16120 (LP: [#1900141](/bugs/1900141))

    - ovl: do not fail because of O\_NOATIME

\* Focal update: v5.4.79 upstream stable release (LP: [#1907151](/bugs/1907151))

    - net/mlx5: Use async EQ setup cleanup helpers for multiple EQs

    - net/mlx5: poll cmd EQ in case of command timeout

    - net/mlx5: Fix a race when moving command interface to events mode

    - net/mlx5: Add retry mechanism to the command entry index allocation

\* Kernel 5.4.0-56 Wi-Fi does not connect (LP: [#1906770](/bugs/1906770))

    - mt76: fix fix ampdu locking

\* [Ubuntu 21.04 FEAT] mpt3sas: Request to include the patch set which supports

    topology where zoning is enabled in expander (LP: [#1899802](/bugs/1899802))

    - scsi: mpt3sas: Define hba\_port structure

    - scsi: mpt3sas: Allocate memory for hba\_port objects

    - scsi: mpt3sas: Rearrange \_scsih\_mark\_responding\_sas\_device()

    - scsi: mpt3sas: Update hba\_port's sas\_address & phy\_mask

    - scsi: mpt3sas: Get device objects using sas\_address & portID

    - scsi: mpt3sas: Rename transport\_del\_phy\_from\_an\_existing\_port()

    - scsi: mpt3sas: Get sas\_device objects using device's rphy

    - scsi: mpt3sas: Update hba\_port objects after host reset

    - scsi: mpt3sas: Set valid PhysicalPort in SMPPassThrough

    - scsi: mpt3sas: Handling HBA vSES device

    - scsi: mpt3sas: Add bypass\_dirty\_port\_flag parameter

    - scsi: mpt3sas: Handle vSES vphy object during HBA reset

    - scsi: mpt3sas: Add module parameter multipath\_on\_hba

    - scsi: mpt3sas: Bump driver version to 35.101.00.00

-- Kleber Sacilotto de Souza <email address hidden> Mon, 18 Jan 2021 17:31:23 +0100

This bug was fixed in the package linux - 5.4.0-65.73
---------------
linux (5.4.0-65.73) focal; urgency=medium
\* focal/linux: 5.4.0-65.73 -proposed tracker (LP: #1912220)
\* initramfs unpacking failed (LP: #1835660)
- SAUCE: lib/decompress\_unlz4.c: correctly handle zero-padding around initrds.
\* overlay: permission regression in 5.4.0-51.56 due to patches related to
CVE-2020-16120 (LP: #1900141)
- ovl: do not fail because of O\_NOATIME
\* Focal update: v5.4.79 upstream stable release (LP: #1907151)
- net/mlx5: Use async EQ setup cleanup helpers for multiple EQs
- net/mlx5: poll cmd EQ in case of command timeout
- net/mlx5: Fix a race when moving command interface to events mode
- net/mlx5: Add retry mechanism to the command entry index allocation
\* Kernel 5.4.0-56 Wi-Fi does not connect (LP: #1906770)
- mt76: fix fix ampdu locking
\* [Ubuntu 21.04 FEAT] mpt3sas: Request to include the patch set which supports
topology where zoning is enabled in expander (LP: #1899802)
- scsi: mpt3sas: Define hba\_port structure
- scsi: mpt3sas: Allocate memory for hba\_port objects
- scsi: mpt3sas: Rearrange \_scsih\_mark\_responding\_sas\_device()
- scsi: mpt3sas: Update hba\_port's sas\_address & phy\_mask
- scsi: mpt3sas: Get device objects using sas\_address & portID
- scsi: mpt3sas: Rename transport\_del\_phy\_from\_an\_existing\_port()
- scsi: mpt3sas: Get sas\_device objects using device's rphy
- scsi: mpt3sas: Update hba\_port objects after host reset
- scsi: mpt3sas: Set valid PhysicalPort in SMPPassThrough
- scsi: mpt3sas: Handling HBA vSES device
- scsi: mpt3sas: Add bypass\_dirty\_port\_flag parameter
- scsi: mpt3sas: Handle vSES vphy object during HBA reset
- scsi: mpt3sas: Add module parameter multipath\_on\_hba
- scsi: mpt3sas: Bump driver version to 35.101.00.00
-- Kleber Sacilotto de Souza <kleber.souza@canonical.com> Mon, 18 Jan 2021 17:31:23 +0100

| Changed in linux (Ubuntu Focal): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2021-01-26: |  |  | [#15](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/15) |
| --- | --- | --- | --- |

This bug was fixed in the package linux - 5.8.0-41.46

---------------

linux (5.8.0-41.46) groovy; urgency=medium

\* groovy/linux: 5.8.0-41.46 -proposed tracker (LP: [#1912219](/bugs/1912219))

\* Groovy update: upstream stable patchset 2020-12-17 (LP: [#1908555](/bugs/1908555)) // nvme

    drive fails after some time (LP: [#1910866](/bugs/1910866))

    - Revert "nvme-pci: remove last\_sq\_tail"

\* initramfs unpacking failed (LP: [#1835660](/bugs/1835660))

    - SAUCE: lib/decompress\_unlz4.c: correctly handle zero-padding around initrds.

\* overlay: permission regression in 5.4.0-51.56 due to patches related to

    CVE-2020-16120 (LP: [#1900141](/bugs/1900141))

    - ovl: do not fail because of O\_NOATIME

-- Kleber Sacilotto de Souza <email address hidden> Mon, 18 Jan 2021 17:01:08 +0100

This bug was fixed in the package linux - 5.8.0-41.46
---------------
linux (5.8.0-41.46) groovy; urgency=medium
\* groovy/linux: 5.8.0-41.46 -proposed tracker (LP: #1912219)
\* Groovy update: upstream stable patchset 2020-12-17 (LP: #1908555) // nvme
drive fails after some time (LP: #1910866)
- Revert "nvme-pci: remove last\_sq\_tail"
\* initramfs unpacking failed (LP: #1835660)
- SAUCE: lib/decompress\_unlz4.c: correctly handle zero-padding around initrds.
\* overlay: permission regression in 5.4.0-51.56 due to patches related to
CVE-2020-16120 (LP: #1900141)
- ovl: do not fail because of O\_NOATIME
-- Kleber Sacilotto de Souza <kleber.souza@canonical.com> Mon, 18 Jan 2021 17:01:08 +0100

| Changed in linux (Ubuntu Groovy): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2021-02-19: |  |  | [#16](/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/16) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/comments/16/%2Bdownload) (20.7 KiB)

This bug was fixed in the package linux - 5.10.0-14.15

---------------

linux (5.10.0-14.15) hirsute; urgency=medium

\* hirsute/linux: 5.10.0-14.15 -proposed tracker (LP: [#1913724](/bugs/1913724))

\* Restore palm ejection on multi-input devices (LP: [#1913520](/bugs/1913520))

    - HID: multitouch: Apply MT\_QUIRK\_CONFIDENCE quirk for multi-input devices

\* intel-hid is not loaded on new Intel platform (LP: [#1907160](/bugs/1907160))

    - platform/x86: intel-hid: add Rocket Lake ACPI device ID

\* Hirsute update: v5.10.11 upstream stable release (LP: [#1913430](/bugs/1913430))

    - scsi: target: tcmu: Fix use-after-free of se\_cmd->priv

    - mtd: rawnand: gpmi: fix dst bit offset when extracting raw payload

    - mtd: rawnand: nandsim: Fix the logic when selecting Hamming soft ECC engine

    - i2c: tegra: Wait for config load atomically while in ISR

    - i2c: bpmp-tegra: Ignore unknown I2C\_M flags

    - platform/x86: ideapad-laptop: Disable touchpad\_switch for ELAN0634

    - ALSA: seq: oss: Fix missing error check in snd\_seq\_oss\_synth\_make\_info()

    - ALSA: hda/realtek - Limit int mic boost on Acer Aspire E5-575T

    - ALSA: hda/via: Add minimum mute flag

    - crypto: xor - Fix divide error in do\_xor\_speed()

    - dm crypt: fix copy and paste bug in crypt\_alloc\_req\_aead

    - ACPI: scan: Make acpi\_bus\_get\_device() clear return pointer on error

    - btrfs: don't get an EINTR during drop\_snapshot for reloc

    - btrfs: do not double free backref nodes on error

    - btrfs: fix lockdep splat in btrfs\_recover\_relocation

    - btrfs: don't clear ret in btrfs\_start\_dirty\_block\_groups

    - btrfs: send: fix invalid clone operations when cloning from the same file

      and root

    - fs: fix lazytime expiration handling in \_\_writeback\_single\_inode()

    - pinctrl: ingenic: Fix JZ4760 support

    - mmc: core: don't initialize block size from ext\_csd if not present

    - mmc: sdhci-of-dwcmshc: fix rpmb access

    - mmc: sdhci-xenon: fix 1.8v regulator stabilization

    - mmc: sdhci-brcmstb: Fix mmc timeout errors on S5 suspend

    - dm: avoid filesystem lookup in dm\_get\_dev\_t()

    - dm integrity: fix a crash if "recalculate" used without "internal\_hash"

    - dm integrity: conditionally disable "recalculate" feature

    - drm/atomic: put state on error path

    - drm/syncobj: Fix use-after-free

    - drm/amdgpu: remove gpu info firmware of green sardine

    - drm/amd/display: DCN2X Find Secondary Pipe properly in MPO + ODM Case

    - drm/i915/gt: Prevent use of engine->wa\_ctx after error

    - drm/i915: Check for rq->hwsp validity after acquiring RCU lock

    - ASoC: Intel: haswell: Add missing pm\_ops

    - ASoC: rt711: mutex between calibration and power state changes

    - SUNRPC: Handle TCP socket sends with kernel\_sendpage() again

    - HID: sony: select CONFIG\_CRC32

    - dm integrity: select CRYPTO\_SKCIPHER

    - x86/hyperv: Fix kexec panic/hang issues

    - scsi: ufs: Relax the condition of UFSHCI\_QUIRK\_SKIP\_MANUAL\_WB\_FLUSH\_CTRL

    - scsi: ufs: Correct the LUN used in eh\_device\_reset\_handler() callback

    - scsi: qedi: Correct max length of CHAP secret

    - scsi: scsi\_debug: Fix memleak in scsi\_debug\_init()

    - scsi: sd: Suppress spurious errors when WRITE SAME is being disabled

    - riscv: ...

This bug was fixed in the package linux - 5.10.0-14.15
---------------
linux (5.10.0-14.15) hirsute; urgency=medium
\* hirsute/linux: 5.10.0-14.15 -proposed tracker (LP: #1913724)
\* Restore palm ejection on multi-input devices (LP: #1913520)
- HID: multitouch: Apply MT\_QUIRK\_CONFIDENCE quirk for multi-input devices
\* intel-hid is not loaded on new Intel platform (LP: #1907160)
- platform/x86: intel-hid: add Rocket Lake ACPI device ID
\* Hirsute update: v5.10.11 upstream stable release (LP: #1913430)
- scsi: target: tcmu: Fix use-after-free of se\_cmd->priv
- mtd: rawnand: gpmi: fix dst bit offset when extracting raw payload
- mtd: rawnand: nandsim: Fix the logic when selecting Hamming soft ECC engine
- i2c: tegra: Wait for config load atomically while in ISR
- i2c: bpmp-tegra: Ignore unknown I2C\_M flags
- platform/x86: ideapad-laptop: Disable touchpad\_switch for ELAN0634
- ALSA: seq: oss: Fix missing error check in snd\_seq\_oss\_synth\_make\_info()
- ALSA: hda/realtek - Limit int mic boost on Acer Aspire E5-575T
- ALSA: hda/via: Add minimum mute flag
- crypto: xor - Fix divide error in do\_xor\_speed()
- dm crypt: fix copy and paste bug in crypt\_alloc\_req\_aead
- ACPI: scan: Make acpi\_bus\_get\_device() clear return pointer on error
- btrfs: don't get an EINTR during drop\_snapshot for reloc
- btrfs: do not double free backref nodes on error
- btrfs: fix lockdep splat in btrfs\_recover\_relocation
- btrfs: don't clear ret in btrfs\_start\_dirty\_block\_groups
- btrfs: send: fix invalid clone operations when cloning from the same file
and root
- fs: fix lazytime expiration handling in \_\_writeback\_single\_inode()
- pinctrl: ingenic: Fix JZ4760 support
- mmc: core: don't initialize block size from ext\_csd if not present
- mmc: sdhci-of-dwcmshc: fix rpmb access
- mmc: sdhci-xenon: fix 1.8v regulator stabilization
- mmc: sdhci-brcmstb: Fix mmc timeout errors on S5 suspend
- dm: avoid filesystem lookup in dm\_get\_dev\_t()
- dm integrity: fix a crash if "recalculate" used without "internal\_hash"
- dm integrity: conditionally disable "recalculate" feature
- drm/atomic: put state on error path
- drm/syncobj: Fix use-after-free
- drm/amdgpu: remove gpu info firmware of green sardine
- drm/amd/display: DCN2X Find Secondary Pipe properly in MPO + ODM Case
- drm/i915/gt: Prevent use of engine->wa\_ctx after error
- drm/i915: Check for rq->hwsp validity after acquiring RCU lock
- ASoC: Intel: haswell: Add missing pm\_ops
- ASoC: rt711: mutex between calibration and power state changes
- SUNRPC: Handle TCP socket sends with kernel\_sendpage() again
- HID: sony: select CONFIG\_CRC32
- dm integrity: select CRYPTO\_SKCIPHER
- x86/hyperv: Fix kexec panic/hang issues
- scsi: ufs: Relax the condition of UFSHCI\_QUIRK\_SKIP\_MANUAL\_WB\_FLUSH\_CTRL
- scsi: ufs: Correct the LUN used in eh\_device\_reset\_handler() callback
- scsi: qedi: Correct max length of CHAP secret
- scsi: scsi\_debug: Fix memleak in scsi\_debug\_init()
- scsi: sd: Suppress spurious errors when WRITE SAME is being disabled
- riscv: Fix kernel time\_init()
- riscv: Fix sifive serial driver
- riscv: Enable interrupts during syscalls with M-Mode
- HID: logitech-dj: add the G602 receiver
- HID: Ignore battery for Elan touchscreen on ASUS UX550
- clk: tegra30: Add hda clock default rates to clock driver
- ALSA: hda/tegra: fix tegra-hda on tegra30 soc
- riscv: cacheinfo: Fix using smp\_processor\_id() in preemptible
- arm64: make atomic helpers \_\_always\_inline
- xen: Fix event channel callback via INTX/GSI
- x86/xen: Add xen\_no\_vector\_callback option to test PCI INTX delivery
- x86/xen: Fix xen\_hvm\_smp\_init() when vector callback not available
- dts: phy: fix missing mdio device and probe failure of vsc8541-01 device
- dts: phy: add GPIO number and active state used for phy reset
- riscv: defconfig: enable gpio support for HiFive Unleashed
- drm/amdgpu/psp: fix psp gfx ctrl cmds
- drm/amd/display: disable dcn10 pipe split by default
- HID: logitech-hidpp: Add product ID for MX Ergo in Bluetooth mode
- drm/amd/display: Fix to be able to stop crc calculation
- drm/nouveau/bios: fix issue shadowing expansion ROMs
- drm/nouveau/privring: ack interrupts the same way as RM
- drm/nouveau/i2c/gm200: increase width of aux semaphore owner fields
- drm/nouveau/mmu: fix vram heap sizing
- drm/nouveau/kms/nv50-: fix case where notifier buffer is at offset 0
- io\_uring: flush timeouts that should already have expired
- libperf tests: If a test fails return non-zero
- libperf tests: Fail when failing to get a tracepoint id
- RISC-V: Set current memblock limit
- RISC-V: Fix maximum allowed phsyical memory for RV32
- x86/xen: fix 'nopvspin' build error
- nfsd: Fixes for nfsd4\_encode\_read\_plus\_data()
- nfsd: Don't set eof on a truncated READ\_PLUS
- gpiolib: cdev: fix frame size warning in gpio\_ioctl()
- pinctrl: aspeed: g6: Fix PWMG0 pinctrl setting
- pinctrl: mediatek: Fix fallback call path
- RDMA/ucma: Do not miss ctx destruction steps in some cases
- btrfs: print the actual offset in btrfs\_root\_name
- scsi: megaraid\_sas: Fix MEGASAS\_IOC\_FIRMWARE regression
- scsi: ufs: ufshcd-pltfrm depends on HAS\_IOMEM
- scsi: ufs: Fix tm request when non-fatal error happens
- crypto: omap-sham - Fix link error without crypto-engine
- bpf: Prevent double bpf\_prog\_put call from bpf\_tracing\_prog\_attach
- powerpc: Use the common INIT\_DATA\_SECTION macro in vmlinux.lds.S
- powerpc: Fix alignment bug within the init sections
- arm64: entry: remove redundant IRQ flag tracing
- bpf: Reject too big ctx\_size\_in for raw\_tp test run
- drm/amdkfd: Fix out-of-bounds read in kdf\_create\_vcrat\_image\_cpu()
- RDMA/umem: Avoid undefined behavior of rounddown\_pow\_of\_two()
- RDMA/cma: Fix error flow in default\_roce\_mode\_store
- printk: ringbuffer: fix line counting
- printk: fix kmsg\_dump\_get\_buffer length calulations
- iov\_iter: fix the uaccess area in copy\_compat\_iovec\_from\_user
- i2c: octeon: check correct size of maximum RECV\_LEN packet
- drm/vc4: Unify PCM card's driver\_name
- platform/x86: intel-vbtn: Drop HP Stream x360 Convertible PC 11 from allow-
list
- platform/x86: hp-wmi: Don't log a warning on HPWMI\_RET\_UNKNOWN\_COMMAND
errors
- gpio: sifive: select IRQ\_DOMAIN\_HIERARCHY rather than depend on it
- xsk: Clear pool even for inactive queues
- selftests: net: fib\_tests: remove duplicate log test
- can: dev: can\_restart: fix use after free bug
- can: vxcan: vxcan\_xmit: fix use after free bug
- can: peak\_usb: fix use after free bugs
- perf evlist: Fix id index for heterogeneous systems
- i2c: sprd: depend on COMMON\_CLK to fix compile tests
- iio: common: st\_sensors: fix possible infinite loop in st\_sensors\_irq\_thread
- iio: ad5504: Fix setting power-down state
- drivers: iio: temperature: Add delay after the addressed reset command in
mlx90632.c
- iio: adc: ti\_am335x\_adc: remove omitted iio\_kfifo\_free()
- counter:ti-eqep: remove floor
- powerpc/64s: fix scv entry fallback flush vs interrupt
- cifs: do not fail \_\_smb\_send\_rqst if non-fatal signals are pending
- irqchip/mips-cpu: Set IPI domain parent chip
- x86/fpu: Add kernel\_fpu\_begin\_mask() to selectively initialize state
- x86/topology: Make \_\_max\_die\_per\_package available unconditionally
- x86/mmx: Use KFPU\_387 for MMX string operations
- x86/setup: don't remove E820\_TYPE\_RAM for pfn 0
- proc\_sysctl: fix oops caused by incorrect command parameters
- mm: memcg/slab: optimize objcg stock draining
- mm: memcg: fix memcg file\_dirty numa stat
- mm: fix numa stats for thp migration
- io\_uring: iopoll requests should also wake task ->in\_idle state
- io\_uring: fix SQPOLL IORING\_OP\_CLOSE cancelation state
- io\_uring: fix short read retries for non-reg files
- intel\_th: pci: Add Alder Lake-P support
- stm class: Fix module init return on allocation failure
- serial: mvebu-uart: fix tx lost characters at power off
- ehci: fix EHCI host controller initialization sequence
- USB: ehci: fix an interrupt calltrace error
- usb: gadget: aspeed: fix stop dma register setting.
- USB: gadget: dummy-hcd: Fix errors in port-reset handling
- usb: udc: core: Use lock when write to soft\_connect
- usb: bdc: Make bdc pci driver depend on BROKEN
- usb: cdns3: imx: fix writing read-only memory issue
- usb: cdns3: imx: fix can't create core device the second time issue
- xhci: make sure TRB is fully written before giving it to the controller
- xhci: tegra: Delay for disabling LFPS detector
- drivers core: Free dma\_range\_map when driver probe failed
- driver core: Fix device link device name collision
- driver core: Extend device\_is\_dependent()
- drm/i915: s/intel\_dp\_sink\_dpms/intel\_dp\_set\_power/
- drm/i915: Only enable DFP 4:4:4->4:2:0 conversion when outputting YCbCr
4:4:4
- x86/entry: Fix noinstr fail
- x86/cpu/amd: Set \_\_max\_die\_per\_package on AMD
- cls\_flower: call nla\_ok() before nla\_next()
- netfilter: rpfilter: mask ecn bits before fib lookup
- tools: gpio: fix %llu warning in gpio-event-mon.c
- tools: gpio: fix %llu warning in gpio-watch.c
- drm/i915/hdcp: Update CP property in update\_pipe
- sh: dma: fix kconfig dependency for G2\_DMA
- sh: Remove unused HAVE\_COPY\_THREAD\_TLS macro
- locking/lockdep: Cure noinstr fail
- ASoC: SOF: Intel: fix page fault at probe if i915 init fails
- octeontx2-af: Fix missing check bugs in rvu\_cgx.c
- net: dsa: mv88e6xxx: also read STU state in mv88e6250\_g1\_vtu\_getnext
- selftests/powerpc: Fix exit status of pkey tests
- sh\_eth: Fix power down vs. is\_opened flag ordering
- nvme-pci: refactor nvme\_unmap\_data
- nvme-pci: fix error unwind in nvme\_map\_data
- cachefiles: Drop superfluous readpages aops NULL check
- lightnvm: fix memory leak when submit fails
- skbuff: back tiny skbs with kmalloc() in \_\_netdev\_alloc\_skb() too
- kasan: fix unaligned address is unhandled in kasan\_remove\_zero\_shadow
- kasan: fix incorrect arguments passing in kasan\_add\_zero\_shadow
- tcp: fix TCP socket rehash stats mis-accounting
- net\_sched: gen\_estimator: support large ewma log
- udp: mask TOS bits in udp\_v4\_early\_demux()
- ipv6: create multicast route with RTPROT\_KERNEL
- net\_sched: avoid shift-out-of-bounds in tcindex\_set\_parms()
- net\_sched: reject silly cell\_log in qdisc\_get\_rtab()
- ipv6: set multicast flag on the multicast route
- net: mscc: ocelot: allow offloading of bridge on top of LAG
- net: Disable NETIF\_F\_HW\_TLS\_RX when RXCSUM is disabled
- net: dsa: b53: fix an off by one in checking "vlan->vid"
- tcp: do not mess with cloned skbs in tcp\_add\_backlog()
- tcp: fix TCP\_USER\_TIMEOUT with zero window
- net: mscc: ocelot: Fix multicast to the CPU port
- net: core: devlink: use right genl user\_ptr when handling port param get/set
- pinctrl: qcom: Allow SoCs to specify a GPIO function that's not 0
- pinctrl: qcom: No need to read-modify-write the interrupt status
- pinctrl: qcom: Properly clear "intr\_ack\_high" interrupts when unmasking
- pinctrl: qcom: Don't clear pending interrupts when enabling
- x86/sev: Fix nonistr violation
- tty: implement write\_iter
- tty: fix up hung\_up\_tty\_write() conversion
- net: systemport: free dev before on error path
- x86/sev-es: Handle string port IO to kernel memory properly
- tcp: Fix potential use-after-free due to double kfree()
- drm/i915/hdcp: Get conn while content\_type changed
- bpf: Local storage helpers should check nullness of owner ptr passed
- kernfs: implement ->read\_iter
- kernfs: implement ->write\_iter
- kernfs: wire up ->splice\_read and ->splice\_write
- interconnect: imx8mq: Use icc\_sync\_state
- fs/pipe: allow sendfile() to pipe again
- Commit 9bb48c82aced ("tty: implement write\_iter") converted the tty layer to
use write\_iter. Fix the redirected\_tty\_write declaration also in n\_tty and
change the comparisons to use write\_iter instead of write. also in n\_tty and
change the comparisons to use write\_iter instead of write.
- mm: fix initialization of struct page for holes in memory layout
- Revert "mm: fix initialization of struct page for holes in memory layout"
- Linux 5.10.11
\* High load from process irq/65-i2c-INT3 - kernel module tps6598x
(LP: #1883511) // Hirsute update: v5.10.11 upstream stable release
(LP: #1913430)
- platform/x86: i2c-multi-instantiate: Don't create platform device for
INT3515 ACPI nodes
\* Hirsute update: v5.10.10 upstream stable release (LP: #1913429)
- Revert "kconfig: remove 'kvmconfig' and 'xenconfig' shorthands"
- x86/hyperv: Initialize clockevents after LAPIC is initialized
- drm/amdgpu/display: drop DCN support for aarch64
- bpf: Fix signed\_{sub,add32}\_overflows type handling
- X.509: Fix crash caused by NULL pointer
- nfsd4: readdirplus shouldn't return parent of export
- bpf: Don't leak memory in bpf getsockopt when optlen == 0
- bpf: Support PTR\_TO\_MEM{,\_OR\_NULL} register spilling
- bpf: Fix helper bpf\_map\_peek\_elem\_proto pointing to wrong callback
- net: ipa: modem: add missing SET\_NETDEV\_DEV() for proper sysfs links
- net: fix use-after-free when UDP GRO with shared fraglist
- udp: Prevent reuseport\_select\_sock from reading uninitialized socks
- netxen\_nic: fix MSI/MSI-x interrupts
- net: ipv6: Validate GSO SKB before finish IPv6 processing
- tipc: fix NULL deref in tipc\_link\_xmit()
- mlxsw: core: Add validation of transceiver temperature thresholds
- mlxsw: core: Increase critical threshold for ASIC thermal zone
- net: mvpp2: Remove Pause and Asym\_Pause support
- rndis\_host: set proper input size for OID\_GEN\_PHYSICAL\_MEDIUM request
- esp: avoid unneeded kmap\_atomic call
- net: dcb: Validate netlink message in DCB handler
- net: dcb: Accept RTM\_GETDCB messages carrying set-like DCB commands
- rxrpc: Call state should be read with READ\_ONCE() under some circumstances
- i40e: fix potential NULL pointer dereferencing
- net: stmmac: Fixed mtu channged by cache aligned
- net: sit: unregister\_netdevice on newlink's error path
- net: stmmac: fix taprio schedule configuration
- net: stmmac: fix taprio configuration when base\_time is in the past
- net: avoid 32 x truesize under-estimation for tiny skbs
- dt-bindings: net: renesas,etheravb: RZ/G2H needs tx-internal-delay-ps
- net: phy: smsc: fix clk error handling
- net: dsa: clear devlink port type before unregistering slave netdevs
- rxrpc: Fix handling of an unsupported token type in rxrpc\_read()
- net: stmmac: use \_\_napi\_schedule() for PREEMPT\_RT
- can: mcp251xfd: mcp251xfd\_handle\_rxif\_one(): fix wrong NULL pointer check
- drm/panel: otm8009a: allow using non-continuous dsi clock
- mac80211: do not drop tx nulldata packets on encrypted links
- mac80211: check if atf has been disabled in \_\_ieee80211\_schedule\_txq
- net: dsa: unbind all switches from tree when DSA master unbinds
- cxgb4/chtls: Fix tid stuck due to wrong update of qid
- spi: fsl: Fix driver breakage when SPI\_CS\_HIGH is not set in spi->mode
- spi: cadence: cache reference clock rate during probe
- Linux 5.10.10
\* Remove scary stack trace from Realtek WiFi driver (LP: #1913263)
- rtw88: reduce the log level for failure of tx report
\* Packaging resync (LP: #1786013)
- update dkms package versions
\* Introduce the new NVIDIA 460-server series and update the 460 series
(LP: #1913200)
- [Config] dkms-versions -- add the 460-server nvidia driver
\* backlight parsing for VBT 234+ (LP: #1912157)
- drm/i915/vbt: Fix backlight parsing for VBT 234+
- drm/i915/vbt: Update the version and expected size of
BDB\_GENERAL\_DEFINITIONS map
- drm/i915/vbt: Add VRR VBT toggle
\* Support CML-S CPU + TGP PCH (LP: #1909457)
- drm/i915/dg1: gmbus pin mapping
- drm/i915/dg1: Don't program PHY\_MISC for PHY-C and PHY-D
- drm/i915/dg1: add hpd interrupt handling
- drm/i915/display/ehl: Limit eDP to HBR2
- drm/i915/jsl: Split EHL/JSL platform info and PCI ids
- drm/i915: Add PORT\_TCn aliases to enum port
- drm/i915: s/PORT\_TC/TC\_PORT\_/
- drm/i915/rkl: new rkl ddc map for different PCH
- SAUCE: drm/i915/gen9\_bc : Add TGP PCH support
\* Fix the video can't output through WD19TB connected with TGL platform during
cold-boot (LP: #1910211)
- SAUCE: drm/i915/dp: Prevent setting LTTPR mode if no LTTPR is detected
\* Stop using get\_scalar\_status command in Dell AIO uart backlight driver
(LP: #1865402)
- SAUCE: platform/x86: dell-uart-backlight: add get\_display\_mode command
\* Killer 500s (QCA6390) WLAN/BT [17cb:1101] unavailable (LP: #1879633)
- SAUCE: ath11k: add 64bit check before reading msi high addr
- SAUCE: ath11k: pci: support platforms with one MSI vector
- SAUCE: ath11k: dp\_rx: fix monitor status dma unmap direction
- SAUCE: ath11k: hook mhi suspend and resume
- SAUCE: ath11k: implement hif suspend and resume functions.
- SAUCE: ath11k: read select\_window register to ensure write is finished
- SAUCE: ath11k: implement htc suspend related callbacks
- SAUCE: ath11k: put target to suspend when system enters suspend state
- SAUCE: ath11k: pci: print a warning if firmware crashed
- SAUCE: ath11k: qmi: print allocated memory segment addresses and sizes
- SAUCE: HACK: ath11k: add delays to suspend and resume handlers
- SAUCE: ath11k: put hw to DBS using WMI\_PDEV\_SET\_HW\_MODE\_CMDID
- SAUCE: ath11k: fix pcie link unstable issue
- SAUCE: ath11k: fix PCI L1ss clock unstable problem
- SAUCE: ath11k: disable OTP write privilege
- SAUCE: ath11k: disable ASPM L0sLs before downloading firmware
- SAUCE: ath11k: purge rx pktlog when entering suspend
- SAUCE: ath11k: set credit\_update flag for flow controlled ep only
- SAUCE: ath11k: implement wow enable and wow wakeup command
- SAUCE: ath11k: add ce irq enable and disable hif layer functions
- SAUCE: ath11k: put target to wow state when suspend happens
- SAUCE: ath11k: vdev delete synchronization with firmware
- SAUCE: ath11k: peer delete synchronization with firmware
\* Add support for Intel Bluetooth Device Typhoon Peak (8087:0032)
(LP: #1890130)
- SAUCE: Bluetooth: btintel: Fix endianness issue for TLV version information
- SAUCE: Bluetooth: btusb: Add \*setup\* function for new generation Intel
controllers
- SAUCE: Bluetooth: btusb: Define a function to construct firmware filename
- SAUCE: Bluetooth: btusb: Helper function to download firmware to Intel
adapters
- SAUCE: Bluetooth: btusb: Map Typhoon peak controller to BTUSB\_INTEL\_NEWGEN
\* failed to boot to GUI: i915 0000:00:02.0: [drm] \*ERROR\* Link Training
Unsuccessful (LP: #1903969)
- SAUCE: drm/i915: s/old\_crtc\_state/crtc\_state/
- SAUCE: drm/i915: Make intel\_dp\_process\_phy\_request() static
- SAUCE: drm/i915: Shove the PHY test into the hotplug work
- SAUCE: drm/i915: Split ICL combo PHY buf trans per output type
- SAUCE: drm/i915: Split ICL MG PHY buf trans per output type
- SAUCE: drm/i915: Split EHL combo PHY buf trans per output type
- SAUCE: drm/i915: Split TGL combo PHY buf trans per output type
- SAUCE: drm/i915: Split TGL DKL PHY buf trans per output type
- SAUCE: drm/i915: Plumb crtc\_state to link training
- SAUCE: drm/i915: Fix DP link training pattern mask
- SAUCE: drm/i915: Simplify the link training functions
- SAUCE: drm/i915: Factor out a helper to disable the DPCD training pattern
- SAUCE: drm/dp: Add LTTPR helpers
- SAUCE: drm/i915: Switch to LTTPR transparent mode link training
- SAUCE: drm/i915: Switch to LTTPR non-transparent mode link training
\* switch to an autogenerated nvidia series based core via dkms-versions
(LP: #1912803)
- [Packaging] nvidia -- use dkms-versions to define versions built
- [Packaging] update-version-dkms -- maintain flags fields
- [Config] dkms-versions -- add transitional/skip information for nvidia
packages
\* Miscellaneous Ubuntu changes
- [Config] Move some CONFIG\_INTERCONNECT\_QCOM\_\* options to different menu
- SAUCE: selftests/seccomp: Accept any valid fd in user\_notification\_addfd
- [Config] updateconfigs following v5.10.11 import
- abi: gc bdc\_pci module
- zfs-modules.ignore: add zzstd
\* Miscellaneous upstream changes
- selftests/powerpc: Only test lwm/stmw on big endian
-- Paolo Pisati <paolo.pisati@canonical.com> Fri, 29 Jan 2021 14:23:04 +0100

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/linux/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Bug attachments

* [CRDA.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422992/%2Bfiles/CRDA.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422992 "Change attachment details")
* [Dependencies.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422993/%2Bfiles/Dependencies.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422993 "Change attachment details")
* [Lspci.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422994/%2Bfiles/Lspci.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422994 "Change attachment details")
* [Lspci-vt.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422995/%2Bfiles/Lspci-vt.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422995 "Change attachment details")
* [Lsusb-v.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422996/%2Bfiles/Lsusb-v.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422996 "Change attachment details")
* [ProcCpuinfo.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422997/%2Bfiles/ProcCpuinfo.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422997 "Change attachment details")
* [ProcCpuinfoMinimal.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422998/%2Bfiles/ProcCpuinfoMinimal.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422998 "Change attachment details")
* [ProcInterrupts.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422999/%2Bfiles/ProcInterrupts.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5422999 "Change attachment details")
* [ProcModules.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423000/%2Bfiles/ProcModules.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423000 "Change attachment details")
* [UdevDb.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423001/%2Bfiles/UdevDb.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423001 "Change attachment details")
* [WifiSyslog.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423002/%2Bfiles/WifiSyslog.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423002 "Change attachment details")
* [acpidump.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423003/%2Bfiles/acpidump.txt)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5423003 "Change attachment details")
* [lp1900141.sh](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5449802/%2Bfiles/lp1900141.sh)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Battachment/5449802 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/linux/%2Bbug/1900141/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from translations.launchpad.net_b36b47df_20250119_131128.html ===

[Log in / Register](https://translations.launchpad.net/ubuntu/%2Bsource/linux/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[linux package](https://launchpad.net/ubuntu/%2Bsource/linux)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/linux)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/linux)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/linux)
* Blueprints
* Translations
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/linux)

[Help for translations](https://help.launchpad.net/Translations)

Launchpad currently recommends translating
[linux in Ubuntu Plucky](/ubuntu/plucky/%2Bsource/linux/%2Btranslations).
## No translatable templates available

Either this project has not been set up to use Launchpad for
translation, or linux in Ubuntu Plucky
does not have any strings to be translated through Launchpad. If
you think this is incorrect, please see if the subject has already
come up under
[Answers](https://answers.launchpad.net/launchpad).
If it hasn't, file a new question there. Thank you.

## Other versions of linux in Ubuntu

* [Oracular (24.10)](/ubuntu/oracular/%2Bsource/linux)
* [Noble (24.04)](/ubuntu/noble/%2Bsource/linux)
* [Jammy (22.04)](/ubuntu/jammy/%2Bsource/linux)
* [Focal (20.04)](/ubuntu/focal/%2Bsource/linux)
* [Bionic (18.04)](/ubuntu/bionic/%2Bsource/linux)
* [Xenial (16.04)](/ubuntu/xenial/%2Bsource/linux)
* [Trusty (14.04)](/ubuntu/trusty/%2Bsource/linux)

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from ubuntu.com_8a222ecb_20250119_111643.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4576-1: Linux kernel vulnerabilities

14 October 2020

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 20.04 LTS](/security/notices?release=focal)
* [Ubuntu 18.04 ESM](/security/notices?release=bionic)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel
* [linux-aws](/security/cves?package=linux-aws) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-aws-5.4](/security/cves?package=linux-aws-5.4) - Linux kernel for Amazon Web Services (AWS) systems
* [linux-azure](/security/cves?package=linux-azure) - Linux kernel for Microsoft Azure Cloud systems
* [linux-azure-5.4](/security/cves?package=linux-azure-5.4) - Linux kernel for Microsoft Azure cloud systems
* [linux-gcp](/security/cves?package=linux-gcp) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-gcp-5.4](/security/cves?package=linux-gcp-5.4) - Linux kernel for Google Cloud Platform (GCP) systems
* [linux-hwe-5.4](/security/cves?package=linux-hwe-5.4) - Linux hardware enablement (HWE) kernel
* [linux-kvm](/security/cves?package=linux-kvm) - Linux kernel for cloud environments
* [linux-oracle](/security/cves?package=linux-oracle) - Linux kernel for Oracle Cloud systems
* [linux-oracle-5.4](/security/cves?package=linux-oracle-5.4) - Linux kernel for Oracle Cloud systems
* [linux-raspi](/security/cves?package=linux-raspi) - Linux kernel for Raspberry Pi (V8) systems
* [linux-raspi-5.4](/security/cves?package=linux-raspi-5.4) - Linux kernel for Raspberry Pi (V8) systems

## Details

Hadar Manor discovered that the DCCP protocol implementation in the Linux

kernel improperly handled socket reuse, leading to a use-after-free

vulnerability. A local attacker could use this to cause a denial of service

(system crash) or possibly execute arbitrary code. ([CVE-2020-16119](/security/CVE-2020-16119))

Jay Shin discovered that the ext4 file system implementation in the Linux

kernel did not properly handle directory access with broken indexing,

leading to an out-of-bounds read vulnerability. A local attacker could use

this to cause a denial of service (system crash). ([CVE-2020-14314](/security/CVE-2020-14314))

David Alan Gilbert discovered that the XFS file system implementation in

the Linux kernel did not properly perform metadata validation in some

circumstances. A local attacker could use this to cause a denial of

service. ([CVE-2020-14385](/security/CVE-2020-14385))

Giuseppe Scrivano discovered that the overlay file system in the Linux

kernel did not properly perform permission checks in some situations. A

local attacker could possibly use this to bypass intended restrictions and

gain read access to restricted files. ([CVE-2020-16120](/security/CVE-2020-16120))

It was discovered that a race condition existed in the hugetlb sysctl

implementation in the Linux kernel. A privileged attacker could use this to

cause a denial of service (system crash). ([CVE-2020-25285](/security/CVE-2020-25285))

It was discovered that the block layer subsystem in the Linux kernel did

not properly handle zero-length requests. A local attacker could use this

to cause a denial of service. ([CVE-2020-25641](/security/CVE-2020-25641))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 20.04

* [linux-image-5.4.0-1021-raspi](https://launchpad.net/ubuntu/%2Bsource/linux-raspi)
  -
  [5.4.0-1021.24](https://launchpad.net/ubuntu/%2Bsource/linux-raspi/5.4.0-1021.24)
* [linux-image-5.4.0-1026-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-signed-kvm)
  -
  [5.4.0-1026.27](https://launchpad.net/ubuntu/%2Bsource/linux-signed-kvm/5.4.0-1026.27)
* [linux-image-5.4.0-1028-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws)
  -
  [5.4.0-1028.29](https://launchpad.net/ubuntu/%2Bsource/linux-aws/5.4.0-1028.29)
* [linux-image-5.4.0-1028-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp)
  -
  [5.4.0-1028.29](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp/5.4.0-1028.29)
* [linux-image-5.4.0-1028-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle)
  -
  [5.4.0-1028.29](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle/5.4.0-1028.29)
* [linux-image-5.4.0-1031-azure](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure)
  -
  [5.4.0-1031.32](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure/5.4.0-1031.32)
* [linux-image-5.4.0-51-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [5.4.0-51.56](https://launchpad.net/ubuntu/%2Bsource/linux-signed/5.4.0-51.56)
* [linux-image-5.4.0-51-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [5.4.0-51.56](https://launchpad.net/ubuntu/%2Bsource/linux/5.4.0-51.56)
* [linux-image-5.4.0-51-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed)
  -
  [5.4.0-51.56](https://launchpad.net/ubuntu/%2Bsource/linux-signed/5.4.0-51.56)
* [linux-image-aws](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws)
  -
  [5.4.0.1028.29](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws/5.4.0.1028.29)
* [linux-image-azure](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure)
  -
  [5.4.0.1031.29](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure/5.4.0.1031.29)
* [linux-image-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [5.4.0.1028.36](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/5.4.0.1028.36)
* [linux-image-generic](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-generic-hwe-20.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-generic-lpae-hwe-20.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-gke](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp)
  -
  [5.4.0.1028.36](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp/5.4.0.1028.36)
* [linux-image-kvm](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm)
  -
  [5.4.0.1026.24](https://launchpad.net/ubuntu/%2Bsource/linux-meta-kvm/5.4.0.1026.24)
* [linux-image-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-lowlatency-hwe-20.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-oem](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-oem-osp1](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle)
  -
  [5.4.0.1028.25](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle/5.4.0.1028.25)
* [linux-image-raspi](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi)
  -
  [5.4.0.1021.56](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi/5.4.0.1021.56)
* [linux-image-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi)
  -
  [5.4.0.1021.56](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi/5.4.0.1021.56)
* [linux-image-virtual](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)
* [linux-image-virtual-hwe-20.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta)
  -
  [5.4.0.51.54](https://launchpad.net/ubuntu/%2Bsource/linux-meta/5.4.0.51.54)

##### Ubuntu 18.04

* [linux-image-5.4.0-1021-raspi](https://launchpad.net/ubuntu/%2Bsource/linux-raspi-5.4)
  -
  [5.4.0-1021.24~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-raspi-5.4/5.4.0-1021.24~18.04.1)
* [linux-image-5.4.0-1028-aws](https://launchpad.net/ubuntu/%2Bsource/linux-aws-5.4)
  -
  [5.4.0-1028.29~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-aws-5.4/5.4.0-1028.29~18.04.1)
* [linux-image-5.4.0-1028-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp-5.4)
  -
  [5.4.0-1028.29~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gcp-5.4/5.4.0-1028.29~18.04.1)
* [linux-image-5.4.0-1028-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle-5.4)
  -
  [5.4.0-1028.29~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oracle-5.4/5.4.0-1028.29~18.04.1)
* [linux-image-5.4.0-1031-azure](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure-5.4)
  -
  [5.4.0-1031.32~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-azure-5.4/5.4.0-1031.32~18.04.1)
* [linux-image-5.4.0-51-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe-5.4)
  -
  [5.4.0-51.56~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe-5.4/5.4.0-51.56~18.04.1)
* [linux-image-5.4.0-51-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-hwe-5.4)
  -
  [5.4.0-51.56~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-hwe-5.4/5.4.0-51.56~18.04.1)
* [linux-image-5.4.0-51-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe-5.4)
  -
  [5.4.0-51.56~18.04.1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe-5.4/5.4.0-51.56~18.04.1)
* [linux-image-aws](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws-5.4)
  -
  [5.4.0.1028.13](https://launchpad.net/ubuntu/%2Bsource/linux-meta-aws-5.4/5.4.0.1028.13)
* [linux-image-azure](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure-5.4)
  -
  [5.4.0.1031.13](https://launchpad.net/ubuntu/%2Bsource/linux-meta-azure-5.4/5.4.0.1031.13)
* [linux-image-gcp](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp-5.4)
  -
  [5.4.0.1028.16](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gcp-5.4/5.4.0.1028.16)
* [linux-image-generic-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4)
  -
  [5.4.0.51.56~18.04.45](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4/5.4.0.51.56~18.04.45)
* [linux-image-generic-lpae-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4)
  -
  [5.4.0.51.56~18.04.45](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4/5.4.0.51.56~18.04.45)
* [linux-image-lowlatency-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4)
  -
  [5.4.0.51.56~18.04.45](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4/5.4.0.51.56~18.04.45)
* [linux-image-oracle](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle-5.4)
  -
  [5.4.0.1028.12](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oracle-5.4/5.4.0.1028.12)
* [linux-image-raspi-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi-5.4)
  -
  [5.4.0.1021.25](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi-5.4/5.4.0.1021.25)
* [linux-image-snapdragon-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4)
  -
  [5.4.0.51.56~18.04.45](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4/5.4.0.51.56~18.04.45)
* [linux-image-virtual-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4)
  -
  [5.4.0.51.56~18.04.45](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe-5.4/5.4.0.51.56~18.04.45)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2020-14314](/security/CVE-2020-14314)
* [CVE-2020-25641](/security/CVE-2020-25641)
* [CVE-2020-16120](/security/CVE-2020-16120)
* [CVE-2020-25285](/security/CVE-2020-25285)
* [CVE-2020-14385](/security/CVE-2020-14385)
* [CVE-2020-16119](/security/CVE-2020-16119)

## Related notices

* [USN-4578-1](/security/notices/USN-4578-1)
* [USN-4579-1](/security/notices/USN-4579-1)
* [USN-4752-1](/security/notices/USN-4752-1)
* [USN-4660-1](/security/notices/USN-4660-1)
* [USN-4577-1](/security/notices/USN-4577-1)
* [LSN-0072-1](/security/notices/LSN-0072-1)
* [USN-4912-1](/security/notices/USN-4912-1)
* [USN-4580-1](/security/notices/USN-4580-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from launchpad.net_d1c278c7_20250119_131123.html ===

[Log in / Register](https://launchpad.net/~philw85/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~philw85)

## [Philipp Wendler](https://launchpad.net/~philw85)

* Overview
* [Code](https://code.launchpad.net/~philw85)
* [Bugs](https://bugs.launchpad.net/~philw85)
* [Blueprints](https://blueprints.launchpad.net/~philw85)
* [Translations](https://translations.launchpad.net/~philw85)
* [Answers](https://answers.launchpad.net/~philw85)

* [Related packages](https://launchpad.net/~philw85/%2Brelated-packages)
* [Related projects](https://launchpad.net/~philw85/%2Brelated-projects)

## User information

Launchpad Id:
philw85

Email:
[Log in](%2Blogin) for email information.

Member since:
2009-04-28

[![Icon of IPv6 Task Force](https://launchpadlibrarian.net/6439562/inkscape.png "Member of IPv6 Task Force")](/~ipv6)
[![Icon of Launchpad Beta Testers](https://launchpadlibrarian.net/600856498/Canonical_Launchpad_icon_14px.png "Member of Launchpad Beta Testers")](/~launchpad-beta-testers)
[![Icon of Launchpad Users](https://launchpadlibrarian.net/600856618/Canonical_Launchpad_icon_14px.png "Member of Launchpad Users")](/~launchpad-users)

Languages:

English, German

OpenPGP keys:

19D5A10B2D9788D87CBEE5ED62C0F78C31A9DE8C

SSH keys:

[wendler@t460p](%2Bsshkeys)

Time zone:

Europe/Berlin
(UTC+0100)

Karma:
[0](https://launchpad.net/~philw85/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![Jabber](/@@/social-jabber "Jabber")
<email address hidden>

## [All memberships](https://launchpad.net/~philw85/%2Bparticipation) Latest memberships

| [SoSy-Lab](/~sosy-lab)  Joined on 2020-10-01 | |
| --- | --- |
| [Focus Follows Mouse](/~focus-follows-mouse)  Joined on 2011-10-26 | |
| [Launchpad Beta Testers](/~launchpad-beta-testers)  Joined on 2010-03-15 | |
| [Launchpad Users](/~launchpad-users)  Joined on 2010-03-15 | |
| [IPv6 Task Force](/~ipv6)  Joined on 2010-03-15 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from ubuntu.com_fd7932ff_20250119_111644.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4577-1: Linux kernel vulnerabilities

14 October 2020

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.04 ESM](/security/notices?release=bionic)

## Packages

* [linux-gke-5.0](/security/cves?package=linux-gke-5.0) - Linux kernel for Google Container Engine (GKE) systems
* [linux-gke-5.3](/security/cves?package=linux-gke-5.3) - Linux kernel for Google Container Engine (GKE) systems
* [linux-hwe](/security/cves?package=linux-hwe) - Linux hardware enablement (HWE) kernel
* [linux-oem-osp1](/security/cves?package=linux-oem-osp1) - Linux kernel for OEM systems
* [linux-raspi2-5.3](/security/cves?package=linux-raspi2-5.3) - Linux kernel for Raspberry Pi (V8) systems

## Details

Hadar Manor discovered that the DCCP protocol implementation in the Linux

kernel improperly handled socket reuse, leading to a use-after-free

vulnerability. A local attacker could use this to cause a denial of service

(system crash) or possibly execute arbitrary code. ([CVE-2020-16119](/security/CVE-2020-16119))

Giuseppe Scrivano discovered that the overlay file system in the Linux

kernel did not properly perform permission checks in some situations. A

local attacker could possibly use this to bypass intended restrictions and

gain read access to restricted files. ([CVE-2020-16120](/security/CVE-2020-16120))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.04

* [linux-image-5.0.0-1049-gke](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gke-5.0)
  -
  [5.0.0-1049.50](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gke-5.0/5.0.0-1049.50)
* [linux-image-5.0.0-1069-oem-osp1](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oem-osp1)
  -
  [5.0.0-1069.75](https://launchpad.net/ubuntu/%2Bsource/linux-signed-oem-osp1/5.0.0-1069.75)
* [linux-image-5.3.0-1035-raspi2](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2-5.3)
  -
  [5.3.0-1035.37](https://launchpad.net/ubuntu/%2Bsource/linux-raspi2-5.3/5.3.0-1035.37)
* [linux-image-5.3.0-1038-gke](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gke-5.3)
  -
  [5.3.0-1038.40](https://launchpad.net/ubuntu/%2Bsource/linux-signed-gke-5.3/5.3.0-1038.40)
* [linux-image-5.3.0-68-generic](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe)
  -
  [5.3.0-68.63](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe/5.3.0-68.63)
* [linux-image-5.3.0-68-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe)
  -
  [5.3.0-68.63](https://launchpad.net/ubuntu/%2Bsource/linux-signed-hwe/5.3.0-68.63)
* [linux-image-gke-5.0](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-5.0)
  -
  [5.0.0.1049.33](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-5.0/5.0.0.1049.33)
* [linux-image-gke-5.3](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-5.3)
  -
  [5.3.0.1038.21](https://launchpad.net/ubuntu/%2Bsource/linux-meta-gke-5.3/5.3.0.1038.21)
* [linux-image-gkeop-5.3](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe)
  -
  [5.3.0.68.125](https://launchpad.net/ubuntu/%2Bsource/linux-meta-hwe/5.3.0.68.125)
* [linux-image-oem-osp1](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oem-osp1)
  -
  [5.0.0.1069.67](https://launchpad.net/ubuntu/%2Bsource/linux-meta-oem-osp1/5.0.0.1069.67)
* [linux-image-raspi2-hwe-18.04](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2-5.3)
  -
  [5.3.0.1035.24](https://launchpad.net/ubuntu/%2Bsource/linux-meta-raspi2-5.3/5.3.0.1035.24)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2020-16119](/security/CVE-2020-16119)
* [CVE-2020-16120](/security/CVE-2020-16120)

## Related notices

* [USN-4576-1](/security/notices/USN-4576-1)
* [USN-4578-1](/security/notices/USN-4578-1)
* [USN-4579-1](/security/notices/USN-4579-1)
* [USN-4580-1](/security/notices/USN-4580-1)
* [LSN-0072-1](/security/notices/LSN-0072-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from launchpad.net_f024560d_20250119_111639.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[linux package](https://launchpad.net/ubuntu/%2Bsource/linux)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/linux)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/linux)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/linux)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/linux)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/linux)

# CVE-2020-16120: unprivileged overlayfs permission checking

Bug #1894980 reported by
[Christian Brauner](https://launchpad.net/~cbrauner)
on 2020-09-09

[266](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [linux (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/linux "Latest release: 5.15.0-132.143, uploaded to main on 2025-01-15 20:29:39.436053+00:00 by Stefan Bader (smb), maintained by Ubuntu Kernel Team (kernel-team)") | Fix Released | Undecided | Unassigned |  |

### Bug Description

Opening this as a tracking bug for CVE-2020-16120

Hi,

while playing with shiftfs I've noticed a strange interaction with

overlay and that seems to allow reading files under an accessible

directory, even if they are not readable to the user who created the

user namespace.

While overlay would not accept a FUSE file system as upper layer, it

seems the check doesn't work when it goes through a shiftfs layer.

For the exploit purpose, I've used fuse-overlayfs only because I am

familiar with it but I'd expect any FUSE file system to behave

in the same way. The additional drop\_unlink.patch patch is used only to

inhibit deleting temporary files in fuse-overlayfs.

The steps required are:

1) create a user namespace with an unprivileged user.

2) mount a FUSE file system where we have full control at M1. In

   the exploit fuse-overlayfs with a custom patch is used.

3) mount shiftfs from the FUSE mount M1 to a mountpoint M2.

4) mount overlay using /etc as lowerdir and M2 for the upperdir (and

   workdir).

5) attempt a "mv M2/shadow M2/something-else".

The shadow file that is coming from the lower layer (/etc/shadow), is

copied to the shiftfs and ultimately to the FUSE file system. The copy

would fail but that happens too late, after the FUSE file system already

received the file content. Since we have full control on the FUSE file

system, we can access the content of /etc/shadow.

For running the exploit, you need to have the fuse-overlayfs

dependencies installed (libc6-dev gcc g++ make automake autoconf pkgconf

libfuse3-dev).

It is enough to run "make" as unprivileged user and if the exploit

succeeds you get the content of the /etc/shadow file under the result/

directory.

Tested on Ubuntu 20.04 with Linux 5.4.0-42-generic.

Thanks,

Giuseppe

## CVE References

* [2018-6559](/bugs/cve/2018-6559 "The Linux kernel, as used in Ubuntu 1...")
* [2020-16120](/bugs/cve/2020-16120 "Overlayfs did not properly perform pe...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Brauner (cbrauner)](https://launchpad.net/~cbrauner) wrote on 2020-09-09: |  |  | [#1](/ubuntu/%2Bsource/linux/%2Bbug/1894980/comments/1) |
| --- | --- | --- | --- |

* [exploit.tar.gz](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409008/%2Bfiles/exploit.tar.gz)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409008)
  (800 bytes,
  application/x-tar)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Brauner (cbrauner)](https://launchpad.net/~cbrauner) wrote on 2020-09-09: |  |  | [#2](/ubuntu/%2Bsource/linux/%2Bbug/1894980/comments/2) |
| --- | --- | --- | --- |

Afaict, the bug is due to permission checking for copying up files in overlayfs that we are susceptible too because we allow unpriv overlayfs mounts.

When overlayfs does not support metacopy only copy up then overlayfs will copy up the whole file, i.e. including its contents, to the upper filesystem.

To this end overlayfs will call dentry\_open() on any file from the lower filesystem in ovl\_copy\_up\_flags(). But dentry\_open() doesn't perform any permission checks and will always succeed.

After that overlayfs will copy the lower file contents into the upper filesystem and finally call ovl\_set\_attr() on it to change the mode and ids of the copied up file. Should ovl\_set\_attr() fail then the created file will have been improperly copied up, i.e. it will not accurately reflect the ownership the lower file had in the lower filesystem. An attacker can abuse this to get read access to a file on the system.

Getting ovl\_set\_attr() to fail can e.g. be triggered by mounting fuse-overlayfs in a new user and mount namespaces, then mounting shiftfs on top of it. Finally an overlayfs mount can be created on top of shiftfs that uses a directory or filesystem with invalid ids in the current user namespace as lower filesystem. Then a copy needs to be triggered in the overlayfs mount by e.g. renaming or moving a file in the merged directory. The initial copy up of the data of the file will succeed while the ovl\_set\_attr() will fail since the ids of the lower filesystem are not valid in the current user namespace. With some trickery, this can be used to leave a copied-up file with the caller's permissions lying in the workdir of the overlayfs mount. This file can now be read by the attacker.

Fixing this involves backporting

commit 56230d956739b9cb1cbde439d76227d77979a04d

Author: Miklos Szeredi <email address hidden>

Date: Tue Jun 2 22:20:26 2020 +0200

ovl: verify permissions in ovl\_path\_open()

Check permission before opening a real file.

ovl\_path\_open() is used by readdir and copy-up routines.

ovl\_permission() theoretically already checked copy up permissions, but it

    doesn't hurt to re-do these checks during the actual copy-up.

For directory reading ovl\_permission() only checks access to topmost

    underlying layer. Readdir on a merged directory accesses layers below the

    topmost one as well. Permission wasn't checked for these layers.

Note: modifying ovl\_permission() to perform this check would be far more

    complex and hence more bug prone. The result is less precise permissions

    returned in access(2). If this turns out to be an issue, we can revisit

    this bug.

Signed-off-by: Miklos Szeredi <email address hidden>

and a small number of preliminary patches since this issue has been fixed upstream.

Afaict, the bug is due to permission checking for copying up files in overlayfs that we are susceptible too because we allow unpriv overlayfs mounts.
When overlayfs does not support metacopy only copy up then overlayfs will copy up the whole file, i.e. including its contents, to the upper filesystem.
To this end overlayfs will call dentry\_open() on any file from the lower filesystem in ovl\_copy\_up\_flags(). But dentry\_open() doesn't perform any permission checks and will always succeed.
After that overlayfs will copy the lower file contents into the upper filesystem and finally call ovl\_set\_attr() on it to change the mode and ids of the copied up file. Should ovl\_set\_attr() fail then the created file will have been improperly copied up, i.e. it will not accurately reflect the ownership the lower file had in the lower filesystem. An attacker can abuse this to get read access to a file on the system.
Getting ovl\_set\_attr() to fail can e.g. be triggered by mounting fuse-overlayfs in a new user and mount namespaces, then mounting shiftfs on top of it. Finally an overlayfs mount can be created on top of shiftfs that uses a directory or filesystem with invalid ids in the current user namespace as lower filesystem. Then a copy needs to be triggered in the overlayfs mount by e.g. renaming or moving a file in the merged directory. The initial copy up of the data of the file will succeed while the ovl\_set\_attr() will fail since the ids of the lower filesystem are not valid in the current user namespace. With some trickery, this can be used to leave a copied-up file with the caller's permissions lying in the workdir of the overlayfs mount. This file can now be read by the attacker.
Fixing this involves backporting
commit 56230d956739b9cb1cbde439d76227d77979a04d
Author: Miklos Szeredi <mszeredi@redhat.com>
Date: Tue Jun 2 22:20:26 2020 +0200
ovl: verify permissions in ovl\_path\_open()
Check permission before opening a real file.
ovl\_path\_open() is used by readdir and copy-up routines.
ovl\_permission() theoretically already checked copy up permissions, but it
doesn't hurt to re-do these checks during the actual copy-up.
For directory reading ovl\_permission() only checks access to topmost
underlying layer. Readdir on a merged directory accesses layers below the
topmost one as well. Permission wasn't checked for these layers.
Note: modifying ovl\_permission() to perform this check would be far more
complex and hence more bug prone. The result is less precise permissions
returned in access(2). If this turns out to be an issue, we can revisit
this bug.
Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
and a small number of preliminary patches since this issue has been fixed upstream.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Forshee (sforshee)](https://launchpad.net/~sforshee) wrote on 2020-09-10:  [**Re: [Bug 1894980] Re: CVE-2020-16120: unprivileged overlayfs permission checking**](/ubuntu/%2Bsource/linux/%2Bbug/1894980/comments/3) |  |  | [#3](/ubuntu/%2Bsource/linux/%2Bbug/1894980/comments/3) |
| --- | --- | --- | --- |

* [0001-Revert-UBUNTU-SAUCE-overlayfs-ensure-mounter-privile.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409385/%2Bfiles/0001-Revert-UBUNTU-SAUCE-overlayfs-ensure-mounter-privile.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409385)
  (3.9 KiB,
  text/x-diff; charset=us-ascii)
* [0002-ovl-pass-correct-flags-for-opening-real-directory.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409386/%2Bfiles/0002-ovl-pass-correct-flags-for-opening-real-directory.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409386)
  (3.3 KiB,
  text/x-diff; charset=us-ascii)
* [0003-ovl-switch-to-mounter-creds-in-readdir.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409387/%2Bfiles/0003-ovl-switch-to-mounter-creds-in-readdir.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409387)
  (2.9 KiB,
  text/x-diff; charset=us-ascii)
* [0004-ovl-verify-permissions-in-ovl\_path\_open.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409388/%2Bfiles/0004-ovl-verify-permissions-in-ovl_path_open.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409388)
  (2.2 KiB,
  text/x-diff; charset=us-ascii)
* [0005-ovl-call-secutiry-hook-in-ovl\_real\_ioctl.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409389/%2Bfiles/0005-ovl-call-secutiry-hook-in-ovl_real_ioctl.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409389)
  (1.8 KiB,
  text/x-diff; charset=us-ascii)
* [0006-ovl-check-permission-to-open-real-file.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409390/%2Bfiles/0006-ovl-check-permission-to-open-real-file.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409390)
  (2.0 KiB,
  text/x-diff; charset=us-ascii)

Attaching backports for focal. Note that I've also reverted the sauce

patch for CVE-2018-6559 as the backports make the permission checks

added in that patch redundant.

Attaching backports for focal. Note that I've also reverted the sauce
patch for CVE-2018-6559 as the backports make the permission checks
added in that patch redundant.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Forshee (sforshee)](https://launchpad.net/~sforshee) wrote on 2020-09-10: |  |  | [#4](/ubuntu/%2Bsource/linux/%2Bbug/1894980/comments/4) |
| --- | --- | --- | --- |

* [cve-2018-6559.sh](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409393/%2Bfiles/cve-2018-6559.sh)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409393)
  (359 bytes,
  text/x-sh)

Also attaching a test for CVE-2018-6559 to be used to check for regressions.

Also attaching a test for CVE-2018-6559 to be used to check for regressions.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Beattie (sbeattie)](https://launchpad.net/~sbeattie) wrote on 2020-10-08: |  |  | [#5](/ubuntu/%2Bsource/linux/%2Bbug/1894980/comments/5) |
| --- | --- | --- | --- |

Hello Giuseppe et al,

Apologies for the delay in updating the status on this vulnerability. We are planning on 17:00 UTC October 13th, 2020 as a disclosure date.

Thanks again for the excellent report and your patience on this issue!

Hello Giuseppe et al,
Apologies for the delay in updating the status on this vulnerability. We are planning on 17:00 UTC October 13th, 2020 as a disclosure date.
Thanks again for the excellent report and your patience on this issue!

[Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur)
on 2020-11-06

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | New → Confirmed |

[Steve Beattie (sbeattie)](https://launchpad.net/~sbeattie)
on 2020-11-18

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | Confirmed → Fix Released |
| **information type**: | Private Security → Public Security |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/linux/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [0001-Revert-UBUNTU-SAUCE-overlayfs-ensure-mounter-privile.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409385/%2Bfiles/0001-Revert-UBUNTU-SAUCE-overlayfs-ensure-mounter-privile.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409385 "Change patch details")
* [0002-ovl-pass-correct-flags-for-opening-real-directory.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409386/%2Bfiles/0002-ovl-pass-correct-flags-for-opening-real-directory.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409386 "Change patch details")
* [0003-ovl-switch-to-mounter-creds-in-readdir.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409387/%2Bfiles/0003-ovl-switch-to-mounter-creds-in-readdir.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409387 "Change patch details")
* [0004-ovl-verify-permissions-in-ovl\_path\_open.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409388/%2Bfiles/0004-ovl-verify-permissions-in-ovl_path_open.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409388 "Change patch details")
* [0005-ovl-call-secutiry-hook-in-ovl\_real\_ioctl.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409389/%2Bfiles/0005-ovl-call-secutiry-hook-in-ovl_real_ioctl.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409389 "Change patch details")
* [0006-ovl-check-permission-to-open-real-file.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409390/%2Bfiles/0006-ovl-check-permission-to-open-real-file.patch)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409390 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Baddcomment?field.patch=on)

## Bug attachments

* [exploit.tar.gz](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409008/%2Bfiles/exploit.tar.gz)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409008 "Change attachment details")
* [cve-2018-6559.sh](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409393/%2Bfiles/cve-2018-6559.sh)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Battachment/5409393 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/linux/%2Bbug/1894980/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from git.kernel.org_2c2008d8_20250119_111634.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=05acefb4872dae89e772729efb194af754c877e8)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=05acefb4872dae89e772729efb194af754c877e8)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=05acefb4872dae89e772729efb194af754c877e8)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=05acefb4872dae89e772729efb194af754c877e8)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Miklos Szeredi <mszeredi@redhat.com> | 2020-06-02 22:20:26 +0200 |
| --- | --- | --- |
| committer | Miklos Szeredi <mszeredi@redhat.com> | 2020-06-03 09:45:22 +0200 |
| commit | [05acefb4872dae89e772729efb194af754c877e8](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=05acefb4872dae89e772729efb194af754c877e8) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=05acefb4872dae89e772729efb194af754c877e8)) | |
| tree | [9a53947fdb6ac28bca724cfb7a05090fea1f3b8d](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=05acefb4872dae89e772729efb194af754c877e8) | |
| parent | [292f902a40c11f043a5ca1305a114da0e523eaa3](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=292f902a40c11f043a5ca1305a114da0e523eaa3) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=05acefb4872dae89e772729efb194af754c877e8&id2=292f902a40c11f043a5ca1305a114da0e523eaa3)) | |
| download | [linux-05acefb4872dae89e772729efb194af754c877e8.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-05acefb4872dae89e772729efb194af754c877e8.tar.gz) | |

ovl: check permission to open real fileCall inode\_permission() on real inode before opening regular file on one of
the underlying layers.
In some cases ovl\_permission() already checks access to an underlying file,
but it misses the metacopy case, and possibly other ones as well.
Removing the redundant permission check from ovl\_permission() should be
considered later.
Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=05acefb4872dae89e772729efb194af754c877e8)

| -rw-r--r-- | [fs/overlayfs/file.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/overlayfs/file.c?id=05acefb4872dae89e772729efb194af754c877e8) | 16 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 14 insertions, 2 deletions

| diff --git a/fs/overlayfs/file.c b/fs/overlayfs/file.cindex 1860e220c82d36..0f83c8dfec461e 100644--- a/[fs/overlayfs/file.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/file.c?id=292f902a40c11f043a5ca1305a114da0e523eaa3)+++ b/[fs/overlayfs/file.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/file.c?id=05acefb4872dae89e772729efb194af754c877e8)@@ -40,10 +40,22 @@ static struct file \*ovl\_open\_realfile(const struct file \*file, struct file \*realfile; const struct cred \*old\_cred; int flags = file->f\_flags | O\_NOATIME | FMODE\_NONOTIFY;+ int acc\_mode = ACC\_MODE(flags);+ int err;++ if (flags & O\_APPEND)+ acc\_mode |= MAY\_APPEND;  old\_cred = ovl\_override\_creds(inode->i\_sb);- realfile = open\_with\_fake\_path(&file->f\_path, flags, realinode,- current\_cred());+ err = inode\_permission(realinode, MAY\_OPEN | acc\_mode);+ if (err) {+ realfile = ERR\_PTR(err);+ } else if (!inode\_owner\_or\_capable(realinode)) {+ realfile = ERR\_PTR(-EPERM);+ } else {+ realfile = open\_with\_fake\_path(&file->f\_path, flags, realinode,+ current\_cred());+ } revert\_creds(old\_cred);  pr\_debug("open(%p[%pD2/%c], 0%o) -> (%p, 0%o)\n", |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-19 11:00:38 +0000



=== Content from git.kernel.org_5214bb12_20250119_111634.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=48bd024b8a40d73ad6b086de2615738da0c7004f)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=48bd024b8a40d73ad6b086de2615738da0c7004f)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=48bd024b8a40d73ad6b086de2615738da0c7004f)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=48bd024b8a40d73ad6b086de2615738da0c7004f)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Miklos Szeredi <mszeredi@redhat.com> | 2020-06-02 22:20:25 +0200 |
| --- | --- | --- |
| committer | Miklos Szeredi <mszeredi@redhat.com> | 2020-06-02 22:20:25 +0200 |
| commit | [48bd024b8a40d73ad6b086de2615738da0c7004f](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=48bd024b8a40d73ad6b086de2615738da0c7004f) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=48bd024b8a40d73ad6b086de2615738da0c7004f)) | |
| tree | [3dd927c460ac4a0a6a494c37b3abb2724ee0f5fb](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=48bd024b8a40d73ad6b086de2615738da0c7004f) | |
| parent | [130fdbc3d1f9966dd4230709c30f3768bccd3065](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=130fdbc3d1f9966dd4230709c30f3768bccd3065) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=48bd024b8a40d73ad6b086de2615738da0c7004f&id2=130fdbc3d1f9966dd4230709c30f3768bccd3065)) | |
| download | [linux-48bd024b8a40d73ad6b086de2615738da0c7004f.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-48bd024b8a40d73ad6b086de2615738da0c7004f.tar.gz) | |

ovl: switch to mounter creds in readdirIn preparation for more permission checking, override credentials for
directory operations on the underlying filesystems.
Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=48bd024b8a40d73ad6b086de2615738da0c7004f)

| -rw-r--r-- | [fs/overlayfs/readdir.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/overlayfs/readdir.c?id=48bd024b8a40d73ad6b086de2615738da0c7004f) | 27 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 21 insertions, 6 deletions

| diff --git a/fs/overlayfs/readdir.c b/fs/overlayfs/readdir.cindex 3bc97065cc7072..1621460417bedf 100644--- a/[fs/overlayfs/readdir.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/readdir.c?id=130fdbc3d1f9966dd4230709c30f3768bccd3065)+++ b/[fs/overlayfs/readdir.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/readdir.c?id=48bd024b8a40d73ad6b086de2615738da0c7004f)@@ -743,8 +743,10 @@ static int ovl\_iterate(struct file \*file, struct dir\_context \*ctx) struct ovl\_dir\_file \*od = file->private\_data; struct dentry \*dentry = file->f\_path.dentry; struct ovl\_cache\_entry \*p;+ const struct cred \*old\_cred; int err; + old\_cred = ovl\_override\_creds(dentry->d\_sb); if (!ctx->pos) ovl\_dir\_reset(file); @@ -758,17 +760,20 @@ static int ovl\_iterate(struct file \*file, struct dir\_context \*ctx) (ovl\_same\_fs(dentry->d\_sb) && (ovl\_is\_impure\_dir(file) || OVL\_TYPE\_MERGE(ovl\_path\_type(dentry->d\_parent))))) {- return ovl\_iterate\_real(file, ctx);+ err = ovl\_iterate\_real(file, ctx);+ } else {+ err = iterate\_dir(od->realfile, ctx); }- return iterate\_dir(od->realfile, ctx);+ goto out; }  if (!od->cache) { struct ovl\_dir\_cache \*cache;  cache = ovl\_cache\_get(dentry);+ err = PTR\_ERR(cache); if (IS\_ERR(cache))- return PTR\_ERR(cache);+ goto out;  od->cache = cache; ovl\_seek\_cursor(od, ctx->pos);@@ -780,7 +785,7 @@ static int ovl\_iterate(struct file \*file, struct dir\_context \*ctx) if (!p->ino) { err = ovl\_cache\_update\_ino(&file->f\_path, p); if (err)- return err;+ goto out; } if (!dir\_emit(ctx, p->name, p->len, p->ino, p->type)) break;@@ -788,7 +793,10 @@ static int ovl\_iterate(struct file \*file, struct dir\_context \*ctx) od->cursor = p->l\_node.next; ctx->pos++; }- return 0;+ err = 0;+out:+ revert\_creds(old\_cred);+ return err; }  static loff\_t ovl\_dir\_llseek(struct file \*file, loff\_t offset, int origin)@@ -834,7 +842,14 @@ out\_unlock: static struct file \*ovl\_dir\_open\_realfile(struct file \*file, struct path \*realpath) {- return ovl\_path\_open(realpath, O\_RDONLY | (file->f\_flags & O\_LARGEFILE));+ struct file \*res;+ const struct cred \*old\_cred;++ old\_cred = ovl\_override\_creds(file\_inode(file)->i\_sb);+ res = ovl\_path\_open(realpath, O\_RDONLY | (file->f\_flags & O\_LARGEFILE));+ revert\_creds(old\_cred);++ return res; }  static int ovl\_dir\_fsync(struct file \*file, loff\_t start, loff\_t end, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-19 11:00:37 +0000



=== Content from git.kernel.org_faadb40f_20250119_111634.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=b6650dab404c701d7fe08a108b746542a934da84)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=b6650dab404c701d7fe08a108b746542a934da84)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b6650dab404c701d7fe08a108b746542a934da84)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=b6650dab404c701d7fe08a108b746542a934da84)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Miklos Szeredi <mszeredi@redhat.com> | 2020-12-14 15:26:14 +0100 |
| --- | --- | --- |
| committer | Miklos Szeredi <mszeredi@redhat.com> | 2020-12-14 15:26:14 +0100 |
| commit | [b6650dab404c701d7fe08a108b746542a934da84](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b6650dab404c701d7fe08a108b746542a934da84) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=b6650dab404c701d7fe08a108b746542a934da84)) | |
| tree | [20627ec9573873eb38e2e45ca49ac25e7787563a](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=b6650dab404c701d7fe08a108b746542a934da84) | |
| parent | [6939f977c54a39207e94e429ee4eb14d4923736f](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=6939f977c54a39207e94e429ee4eb14d4923736f) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=b6650dab404c701d7fe08a108b746542a934da84&id2=6939f977c54a39207e94e429ee4eb14d4923736f)) | |
| download | [linux-b6650dab404c701d7fe08a108b746542a934da84.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-b6650dab404c701d7fe08a108b746542a934da84.tar.gz) | |

ovl: do not fail because of O\_NOATIMEIn case the file cannot be opened with O\_NOATIME because of lack of
capabilities, then clear O\_NOATIME instead of failing.
Remove WARN\_ON(), since it would now trigger if O\_NOATIME was cleared.
Noticed by Amir Goldstein.
Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=b6650dab404c701d7fe08a108b746542a934da84)

| -rw-r--r-- | [fs/overlayfs/file.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/overlayfs/file.c?id=b6650dab404c701d7fe08a108b746542a934da84) | 11 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 8 deletions

| diff --git a/fs/overlayfs/file.c b/fs/overlayfs/file.cindex 50186ea90158a2..bd9dd38347aed8 100644--- a/[fs/overlayfs/file.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/file.c?id=6939f977c54a39207e94e429ee4eb14d4923736f)+++ b/[fs/overlayfs/file.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/overlayfs/file.c?id=b6650dab404c701d7fe08a108b746542a934da84)@@ -53,9 +53,10 @@ static struct file \*ovl\_open\_realfile(const struct file \*file, err = inode\_permission(realinode, MAY\_OPEN | acc\_mode); if (err) { realfile = ERR\_PTR(err);- } else if (!inode\_owner\_or\_capable(realinode)) {- realfile = ERR\_PTR(-EPERM); } else {+ if (!inode\_owner\_or\_capable(realinode))+ flags &= ~O\_NOATIME;+ realfile = open\_with\_fake\_path(&file->f\_path, flags, realinode, current\_cred()); }@@ -75,12 +76,6 @@ static int ovl\_change\_flags(struct file \*file, unsigned int flags) struct inode \*inode = file\_inode(file); int err; - flags |= OVL\_OPEN\_FLAGS;-- /\* If some flag changed that cannot be changed then something's amiss \*/- if (WARN\_ON((file->f\_flags ^ flags) & ~OVL\_SETFL\_MASK))- return -EIO;- flags &= OVL\_SETFL\_MASK;  if (((flags ^ file->f\_flags) & O\_APPEND) && IS\_APPEND(inode)) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-19 11:00:38 +0000



=== Content from launchpad.net_60d2ae19_20250119_131129.html ===

[Log in / Register](https://launchpad.net/~cbrauner/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~cbrauner)

## [Christian Brauner](https://launchpad.net/~cbrauner)

* Overview
* [Code](https://code.launchpad.net/~cbrauner)
* [Bugs](https://bugs.launchpad.net/~cbrauner)
* [Blueprints](https://blueprints.launchpad.net/~cbrauner)
* [Translations](https://translations.launchpad.net/~cbrauner)
* [Answers](https://answers.launchpad.net/~cbrauner)

* [Related packages](https://launchpad.net/~cbrauner/%2Brelated-packages)
* [Related projects](https://launchpad.net/~cbrauner/%2Brelated-projects)

## User information

Launchpad Id:
cbrauner

Email:
[Log in](%2Blogin) for email information.

Member since:
2015-09-25

[![Icon of Ubuntu LXC Security team](https://launchpadlibrarian.net/673452720/14.png "Member of Ubuntu LXC Security team")](/~ubuntu-lxc-security)
[![Icon of Ubuntu LXC team](https://launchpadlibrarian.net/202329400/14.png "Member of Ubuntu LXC team")](/~ubuntu-lxc)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English, German

OpenPGP keys:

4880B8C9BD0E5106FC070F4F7B3C391EFEA93624

SSH keys:

[chb@conventiont](%2Bsshkeys)

Time zone:

Europe/Berlin
(UTC+0100)

Karma:
[0](https://launchpad.net/~cbrauner/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**brauner**
 on
**chat.freenode.net**

![Jabber](/@@/social-jabber "Jabber")
<email address hidden>

## [All bugs in progress](https://launchpad.net/~cbrauner/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1879196 ['shifted' (shiftfs) FS mount became inconsistent with host FS; resolved by dropping caches](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1879196) |  |
| --- | --- | --- |
| in [Ubuntu](/ubuntu) | | |

| --- | --- | --- | --- | --- | --- |

## [All memberships](https://launchpad.net/~cbrauner/%2Bparticipation) Latest memberships

| [Ubuntu SSO 2-factor testers](/~sso-2f-testers)  Joined on 2022-01-31 | |
| --- | --- |
| [Ubuntu LXC Security team](/~ubuntu-lxc-security)  Joined on 2016-11-04 | |
| [Ubuntu LXC team](/~ubuntu-lxc)  Joined on 2016-08-29 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))


