=== Content from launchpad.net_f09f2e04_20250119_133831.html ===

[Log in / Register](https://launchpad.net/~alexmurray/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~alexmurray)

## [Alex Murray](https://launchpad.net/~alexmurray)

* Overview
* [Code](https://code.launchpad.net/~alexmurray)
* [Bugs](https://bugs.launchpad.net/~alexmurray)
* [Blueprints](https://blueprints.launchpad.net/~alexmurray)
* [Translations](https://translations.launchpad.net/~alexmurray)
* [Answers](https://answers.launchpad.net/~alexmurray)

Ubuntu Security Tech Lead for Canonical and in my spare time developer of Hardware Sensors Indicator (indicator-sensors) and a bunch of other software bits (mainly Emacs related)

See <https://github.com/alexmurray>

* [Related packages](https://launchpad.net/~alexmurray/%2Brelated-packages)
* [Related projects](https://launchpad.net/~alexmurray/%2Brelated-projects)

## User information

Launchpad Id:
alexmurray

Email:
[Log in](%2Blogin) for email information.

Member since:
2006-05-24

[![Icon of AppArmor Developers](https://launchpadlibrarian.net/65472736/toxie-14.png "Member of AppArmor Developers")](/~apparmor-dev)
[![Icon of Bluetooth](https://launchpadlibrarian.net/4683649/stock_bluetooth.png "Member of Bluetooth")](/~bluetooth)
[![Icon of Build Daemon Maintainers](https://launchpadlibrarian.net/1558154/buildd-maint.png "Member of Build Daemon Maintainers")](/~launchpad-buildd-admins)
[![Icon of Canonical Partner Developers](https://launchpadlibrarian.net/74993564/14.png "Member of Canonical Partner Developers")](/~canonical-partner-dev)
[![Icon of Docky Users](https://launchpadlibrarian.net/51321694/docky14.png "Member of Docky Users")](/~docky-users)
[![Icon of Edubuntu Developers](https://launchpadlibrarian.net/71879383/edubuntu-logo-only_14.png "Member of Edubuntu Developers")](/~edubuntu-dev)
[![Icon of GNOME3 Team](https://launchpadlibrarian.net/235731434/roundel14.png "Member of GNOME3 Team")](/~gnome3-team)
[![Icon of Indicator Applet Developers](https://launchpadlibrarian.net/22816053/add-notification-applet.14.png "Member of Indicator Applet Developers")](/~indicator-applet-developers)
[![Icon of Kubuntu Ninjas - Yellow belts](https://launchpadlibrarian.net/192173133/belt2-yellow3.png "Member of Kubuntu Ninjas - Yellow belts")](/~kubuntu-ninjas-yellow-belts)
[![Icon of Kubuntu Ninjas](https://launchpadlibrarian.net/31496145/icon.png "Member of Kubuntu Ninjas")](/~kubuntu-ninjas)
[![Icon of Kubuntu Package Archives](https://launchpadlibrarian.net/44411915/deb-small.png "Member of Kubuntu Package Archives")](/~kubuntu-ppa)
[![Icon of Launchpad Beta Testers](https://launchpadlibrarian.net/600856498/Canonical_Launchpad_icon_14px.png "Member of Launchpad Beta Testers")](/~launchpad-beta-testers)
[![Icon of Launchpad Users](https://launchpadlibrarian.net/600856618/Canonical_Launchpad_icon_14px.png "Member of Launchpad Users")](/~launchpad-users)
[![Icon of Lubuntu Code](https://launchpadlibrarian.net/704307155/lennyborg_14.png "Member of Lubuntu Code")](/~lubuntu-code)
[![Icon of Lubuntu Continuous Integration](https://launchpadlibrarian.net/704307325/lennyborg_14.png "Member of Lubuntu Continuous Integration")](/~lubuntu-ci)
[![Icon of Lubuntu Developers](https://launchpadlibrarian.net/704306355/lennyborg_14.png "Member of Lubuntu Developers")](/~lubuntu-dev)
[![Icon of Lubuntu Packages Team](https://launchpadlibrarian.net/704305879/lenny_bug_14.png "Member of Lubuntu Packages Team")](/~lubuntu-packaging)
[![Icon of Lubuntu](https://launchpadlibrarian.net/357050187/14.png "Member of Lubuntu")](/~lubuntu-desktop)
[![Icon of Mactel Support Community](https://launchpadlibrarian.net/12126197/Logo_14.png "Member of Mactel Support Community")](/~mactel-support-community)
[![Icon of Mactel Support](https://launchpadlibrarian.net/12039822/appleubuntu_14.png "Member of Mactel Support")](/~mactel-support)
[![Icon of MOTU SWAT](https://launchpadlibrarian.net/5609742/sword16x16.png "Member of MOTU SWAT")](/~motu-swat)
[![Icon of MOTU](https://launchpadlibrarian.net/1516491/motu-image-2.png "Member of MOTU")](/~motu)
[![Icon of Network-manager](https://launchpadlibrarian.net/11610188/nm-team.png "Member of Network-manager")](/~network-manager)
[![Icon of OEM Archive Admins](https://launchpadlibrarian.net/31251458/oem-admin-logo_14x14.png "Member of OEM Archive Admins")](/~oem-archive)
[![Icon of Super Friends](https://launchpadlibrarian.net/134634591/superman14.png "Member of Super Friends")](/~super-friends)
[![Icon of Ubuntu Bug Control](https://launchpadlibrarian.net/4423778/qa-icon.png "Member of Ubuntu Bug Control")](/~ubuntu-bugcontrol)
[![Icon of Ubuntu BugSquad](https://launchpadlibrarian.net/1812570/bugsquad.png "Member of Ubuntu BugSquad")](/~bugsquad)
[![Icon of Ubuntu Contributing Developers](https://launchpadlibrarian.net/17290192/wrench_emblem-trans.png "Member of Ubuntu Contributing Developers")](/~ubuntu-developer-members)
[![Icon of Ubuntu Core Development Team](https://launchpadlibrarian.net/1072365/main.png "Member of Ubuntu Core Development Team")](/~ubuntu-core-dev)
[![Icon of Ubuntu Development Team](https://launchpadlibrarian.net/1072363/motu.png "Member of Ubuntu Development Team")](/~ubuntu-dev)
[![Icon of Ubuntu Documentation Project Team](https://launchpadlibrarian.net/162165522/ubuntu-doc.png "Member of Ubuntu Documentation Project Team")](/~ubuntu-doc)
[![Icon of Ubuntu Drivers](https://launchpadlibrarian.net/1546355/hobbyhorse.gif "Member of Ubuntu Drivers")](/~ubuntu-drivers)
[![Icon of Ubuntu GNOME Developers](https://launchpadlibrarian.net/254356645/roundel14.png "Member of Ubuntu GNOME Developers")](/~ubuntu-gnome-dev)
[![Icon of Ubuntu GNOME](https://launchpadlibrarian.net/258611022/ubuntu-gnome_14.png "Member of Ubuntu GNOME")](/~ubuntu-gnome)
[![Icon of Ubuntu Kylin Members](https://launchpadlibrarian.net/444398797/623185830.jpg "Member of Ubuntu Kylin Members")](/~ubuntukylin-members)
[![Icon of Ubuntu LXC Security team](https://launchpadlibrarian.net/673452720/14.png "Member of Ubuntu LXC Security team")](/~ubuntu-lxc-security)
[![Icon of Ubuntu MATE Developers](https://launchpadlibrarian.net/212349832/icon.png "Member of Ubuntu MATE Developers")](/~ubuntu-mate-dev)
[![Icon of Ubuntu Members](https://launchpadlibrarian.net/606495581/CoF%2014px.png "Member of Ubuntu Members")](/~ubuntumembers)
[![Icon of Ubuntu Security Team](https://launchpadlibrarian.net/1575441/Lock.png "Member of Ubuntu Security Team")](/~ubuntu-security)
[![Icon of Ubuntu Sponsors](https://launchpadlibrarian.net/40794090/minitools.png "Member of Ubuntu Sponsors")](/~ubuntu-sponsors)
[![Icon of Ubuntu Studio Development](https://launchpadlibrarian.net/479050820/14.png "Member of Ubuntu Studio Development")](/~ubuntustudio-dev)
[![Icon of Xubuntu Artwork](https://launchpadlibrarian.net/341831649/icon_optimized_14.png "Member of Xubuntu Artwork")](/~xubuntu-art)
[![Icon of Xubuntu Developers](https://launchpadlibrarian.net/139019912/x-dev.png "Member of Xubuntu Developers")](/~xubuntu-dev)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

88E9530BCBDDC200517B5EB0F498D2D9DE7DAD9C

SSH keys:

[alex.murray@canonical.com](%2Bsshkeys)

Time zone:

Australia/Adelaide
(UTC+1030)

Karma:
[29606](https://launchpad.net/~alexmurray/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**amurray**
 on
**irc.canonical.com**

![IRC](/@@/social-irc "IRC")
**amurray**
 on
**irc.libera.chat**

![Matrix](/@@/social-matrix "Matrix") [**@alexmurray:ubuntu.com**](https://matrix.to//#/@alexmurray:ubuntu.com)

## Personal package archives

| [adduser updated to enable private homedirs by default](/~alexmurray/%2Barchive/ubuntu/adduser-private-homedirs) |
| --- |
| [apparmor-4.0.0-alpha2-for-mantic](/~alexmurray/%2Barchive/ubuntu/apparmor-4.0.0-alpha2-for-mantic) |
| [apparmor-4.0.0-alpha2-for-mantic-take2](/~alexmurray/%2Barchive/ubuntu/apparmor-4.0.0-alpha2-for-mantic-take2) |
| [AppArmor Prompting Demo](/~alexmurray/%2Barchive/ubuntu/apparmor-prompting) |
| [docker-test](/~alexmurray/%2Barchive/ubuntu/docker-test) |
| [Emacs](/~alexmurray/%2Barchive/ubuntu/emacs) |
| [Test PPA for Emacs backports](/~alexmurray/%2Barchive/ubuntu/emacs-test) |
| [gcc-stack-clash-and-cf-protection](/~alexmurray/%2Barchive/ubuntu/gcc-stack-clash-and-cf-protection) |
| [gcc-stack-clash-protection](/~alexmurray/%2Barchive/ubuntu/gcc-stack-clash-protection) |
| [gcc-stack-clash-protection2](/~alexmurray/%2Barchive/ubuntu/gcc-stack-clash-protection2) |
| [global](/~alexmurray/%2Barchive/ubuntu/global) |
| [PPA for indicator-sensors](/~alexmurray/%2Barchive/ubuntu/indicator-sensors) |
| [Indicator Sensors Daily PPA](/~alexmurray/%2Barchive/ubuntu/indicator-sensors-daily) |
| [iptables-mantic](/~alexmurray/%2Barchive/ubuntu/iptables-mantic) |
| [iptables-mantic-i386](/~alexmurray/%2Barchive/ubuntu/iptables-mantic-i386) |
| [libchamplain](/~alexmurray/%2Barchive/ubuntu/libchamplain) |
| [clamav 1.0 transition test](/~alexmurray/%2Barchive/ubuntu/libclamav11) |
| [LP1765304](/~alexmurray/%2Barchive/ubuntu/lp1765304) |
| [LP1784964](/~alexmurray/%2Barchive/ubuntu/lp1784964) |
| [LP1862158](/~alexmurray/%2Barchive/ubuntu/lp1862158) |
| [lp1876055](/~alexmurray/%2Barchive/ubuntu/lp1876055) |
| [LP1877633](/~alexmurray/%2Barchive/ubuntu/lp1877633) |
| [lp1973322](/~alexmurray/%2Barchive/ubuntu/lp1973322) |
| [lp1989309](/~alexmurray/%2Barchive/ubuntu/lp1989309) |
| [lp2016042](/~alexmurray/%2Barchive/ubuntu/lp2016042) |
| [lp2036128](/~alexmurray/%2Barchive/ubuntu/lp2036128) |
| [PPA for Alex Murray](/~alexmurray/%2Barchive/ubuntu/ppa) |
| [radare2](/~alexmurray/%2Barchive/ubuntu/radare2) |
| [test](/~alexmurray/%2Barchive/ubuntu/test) |

* [View source package recipes](https://code.launchpad.net/~alexmurray/%2Brecipes)
* [View snap packages](https://launchpad.net/~alexmurray/%2Bsnaps)

## [All memberships](https://launchpad.net/~alexmurray/%2Bparticipation) Latest memberships

| [Ubuntu Sponsors](/~ubuntu-sponsors)  Joined on 2023-11-09 | |
| --- | --- |
| [MOTU SWAT](/~motu-swat)  Joined on 2023-05-15 | |
| [Ubuntu Technical Board](/~techboard)  Joined on 2022-12-17 | |
| [Bileto Announcement List](/~bileto-announce)  Joined on 2022-02-22 | |
| [Ubuntu BugSquad](/~bugsquad)  Joined on 2021-11-29 | |

## [Recent activities](https://launchpad.net/~alexmurray/%2Bkarma) Most active in

| [review-tools](/review-tools) |  |  |  |  |
| --- | --- | --- | --- | --- |
| [Ubuntu CVE Tracker](/ubuntu-cve-tracker) |  |  |  |  |
| [ubuntu-security-tools](/ubuntu-security-tools) |  |  |  |  |
| [QA Regression Testing](/qa-regression-testing) |  |  |  |  |
| [Ubuntu](/ubuntu) |  |  |  |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_c56b497c_20250119_133834.html ===

[Log in / Register](https://launchpad.net/~seth-arnold/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~seth-arnold)

## [Seth Arnold](https://launchpad.net/~seth-arnold)

* Overview
* [Code](https://code.launchpad.net/~seth-arnold)
* [Bugs](https://bugs.launchpad.net/~seth-arnold)
* [Blueprints](https://blueprints.launchpad.net/~seth-arnold)
* [Translations](https://translations.launchpad.net/~seth-arnold)
* [Answers](https://answers.launchpad.net/~seth-arnold)

* [Related packages](https://launchpad.net/~seth-arnold/%2Brelated-packages)
* [Related projects](https://launchpad.net/~seth-arnold/%2Brelated-projects)

## User information

Launchpad Id:
seth-arnold

Email:
[Log in](%2Blogin) for email information.

Member since:
2006-05-22

[![Icon of AppArmor Developers](https://launchpadlibrarian.net/65472736/toxie-14.png "Member of AppArmor Developers")](/~apparmor-dev)
[![Icon of Canonical Partner Developers](https://launchpadlibrarian.net/74993564/14.png "Member of Canonical Partner Developers")](/~canonical-partner-dev)
[![Icon of OEM Archive Admins](https://launchpadlibrarian.net/31251458/oem-admin-logo_14x14.png "Member of OEM Archive Admins")](/~oem-archive)
[![Icon of Ubuntu Bug Control](https://launchpadlibrarian.net/4423778/qa-icon.png "Member of Ubuntu Bug Control")](/~ubuntu-bugcontrol)
[![Icon of Ubuntu IRC Team](https://launchpadlibrarian.net/1741440/xchat.png "Member of Ubuntu IRC Team")](/~ubuntu-irc)
[![Icon of Ubuntu LXC Security team](https://launchpadlibrarian.net/673452720/14.png "Member of Ubuntu LXC Security team")](/~ubuntu-lxc-security)
[![Icon of Ubuntu Members](https://launchpadlibrarian.net/606495581/CoF%2014px.png "Member of Ubuntu Members")](/~ubuntumembers)
[![Icon of Ubuntu Security Team](https://launchpadlibrarian.net/1575441/Lock.png "Member of Ubuntu Security Team")](/~ubuntu-security)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English, German

OpenPGP keys:

415010F1BA23C8C720DFB1F5F32172599D8D2E97

SSH keys:

[sarnold@haig](%2Bsshkeys)

Time zone:

America/Los\_Angeles
(UTC-0800)

Karma:
[1792](https://launchpad.net/~seth-arnold/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**sarnold**
 on
**irc.oftc.net**

![IRC](/@@/social-irc "IRC")
**sarnold**
 on
**irc.libera.chat**

![IRC](/@@/social-irc "IRC")
**sarnold**
 on
**chat.canonical.com**

![Matrix](/@@/social-matrix "Matrix") [**@seth-arnold:ubuntu.com**](https://matrix.to//#/@seth-arnold:ubuntu.com)

## Personal package archives

| [doghouse](/~seth-arnold/%2Barchive/ubuntu/doghouse) |
| --- |
| [testing](/~seth-arnold/%2Barchive/ubuntu/testing) |

## [All memberships](https://launchpad.net/~seth-arnold/%2Bparticipation) Latest memberships

| [Ubuntu Matrix Operators](/~matrix-operators)  Joined on 2024-03-31 | |
| --- | --- |
| [#ubuntu-devel IRC Operators](/~irc-ubuntu-devel-ops)  Joined on 2022-11-01 | |
| [Ubuntu IRC Council](/~ubuntu-irc-council)  Joined on 2021-05-25 | |
| [Ubuntu cloaked people on Libera](/~ubuntu-irc-cloaks)  Joined on 2021-05-10 | |

## [Recent activities](https://launchpad.net/~seth-arnold/%2Bkarma) Most active in

| [Ubuntu CVE Tracker](/ubuntu-cve-tracker) |  |  |  |
| --- | --- | --- | --- |
| [ubuntu-security-tools](/ubuntu-security-tools) |  |  |  |
| [QA Regression Testing](/qa-regression-testing) |  |  |  |
| [Ubuntu](/ubuntu) |  |  |  |
| [Launchpad itself](/launchpad) |  |  |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_ae680646_20250119_133833.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[apport package](https://launchpad.net/ubuntu/%2Bsource/apport)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/apport)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/apport)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/apport)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/apport)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/apport)

# Apport crash report & cron script TOCTTOU

Bug #1862933 reported by
[Maximilien Bourgeteau](https://launchpad.net/~mbourget)
on 2020-02-12

[258](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Apport](https://bugs.launchpad.net/apport) | Fix Released | Critical | Unassigned | [Apport 2.21.0](https://launchpad.net/apport/%2Bmilestone/2.21.0) |
|  | [apport (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/apport "Latest release: 2.31.0-0ubuntu3, uploaded to main on 2025-01-17 22:47:11.031736+00:00 by Benjamin Drung (bdrung), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | Undecided | Unassigned |  |

### Bug Description

Vulnerable code (from data/apport):

700 # we prefer having a file mode of 0 while writing; this doesn't work

   701 # for suid binaries as we completely drop privs and thus can't chmod

   702 # them later on

   703 if pidstat.st\_uid != os.getuid():

   704 mode = 0o640

   705 else:

   706 mode = 0

   707 reportfile = os.fdopen(os.open(report, os.O\_RDWR | os.O\_CREAT | os.O\_EXCL, mode), 'w+b')

   708 assert reportfile.fileno() > sys.stderr.fileno()

   709

   710 # Make sure the crash reporting daemon can read this report

   711 try:

   712 gid = pwd.getpwnam('whoopsie').pw\_gid

   713 os.chown(report, pidstat.st\_uid, gid)

   714 except (OSError, KeyError):

   715 os.chown(report, pidstat.st\_uid, pidstat.st\_gid)

   716 except (OSError, IOError) as e:

   717 error\_log('Could not create report file: %s' % str(e))

   718 sys.exit(1)

The TOCTTOU takes place between the os.open and the os.chown call and can be fully achieved thanks to the Apport cron script (etc/cron.daily/apport):

1 #!/bin/sh -e

     2 # clean all crash reports which are older than a week.

     3 [ -d /var/crash ] || exit 0

     4 find /var/crash/. ! -name . -prune -type f \( \( -size 0 -a \! -name '\*.upload\*' -a \! -name '\*.drkonqi\*' \) -o -mtime +7 \) -exec rm -f -- '{}' \;

     5 find /var/crash/. ! -name . -prune -type d -regextype posix-extended -regex '.\*/[0-9]{12}$' \( -mtime +7 \) -exec rm -Rf -- '{}' \;

The interesting part in this daily script is that the crash reports gets removed if their size is 0.

Since Apport drops real uid and gid, the crashed process owner can send signals during the report file creation. At this time, effective uid and gid are still root.

We can also block Apport by replacing user settings file with a FIFO (~/.config/apport/settings). I'm using the FIFO way in my PoC but it can be done without it.

To make Apport read user settings, the crashing program must not be located in one of those directories (taken from apport/fileutils.py):

78 pkg\_whitelist = ['/bin/', '/boot', '/etc/', '/initrd', '/lib', '/sbin/',

    79 '/opt', '/usr/', '/var'] # packages only ship executables in these directories

Once Apport is blocked into FIFO reading, we send the SIGSTOP signal then we write "[main]\nunpackaged=1" into the FIFO so Apport won't exit after resuming (if unpackaged is 0 Apport directly exits because we're not in a "packaged" directory).

After that we "single step" through Apport by sending SIGCONT and SIGSTOP consecutively in a loop until the report file is created with os.open. We must make sure os.chown hasn't been called and then we wait for the cron script to remove the report (it's created as root with mode 0 so only root can remove it).

Once removed, we can replace it with a symbolic link/file of the same name, resume Apport with SIGCONT then the file will now be owned by the crashed process user and group.

I think the impact of this vulnerability alone is low because fs.protected\_symlinks prevents symlink resolution since we're in a sticky world writable directory (/var/crash), but if it's disabled, you can escalate privileges very easily. It still can be used in some kind of exploit chain though.

My PoC does everything for you except symbolic link/file creation once the report gets removed by the cron script, you have to create it manually then press enter to resume Apport and let the chown happen. You could also create a new crontab entry and directory then copy Apport cron script into it so you don't have to wait the entire day.

Fix suggestions:

- Use reportfile.fileno() instead of the report string for the os.chown calls, and also add follow\_symlinks=False argument just in case.

- Remove the size 0 condition in the cron script (not sure about this one, I suppose the condition was there for a reason).

See [original description](comments/0)

## Related branches

[lp:~ubuntu-core-dev/ubuntu/focal/apport/ubuntu](https://code.launchpad.net/~ubuntu-core-dev/ubuntu/focal/apport/ubuntu)

## CVE References

* [2020-8831](/bugs/cve/2020-8831 "Apport creates a world writable lock ...")
* [2020-8833](/bugs/cve/2020-8833 "Time-of-check Time-of-use Race Condit...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-02-12: |  |  | [#1](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/1) |
| --- | --- | --- | --- |

* [poc.c](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5327644/%2Bfiles/poc.c)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5327644)
  (3.7 KiB,
  text/x-csrc)

[Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget)
on 2020-02-12

| **description**: | updated |
| --- | --- |

[Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget)
on 2020-02-12

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2020-02-14: |  |  | [#2](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/2) |
| --- | --- | --- | --- |

Thanks for reporting this issue, we'll investigate promptly.

Thanks for reporting this issue, we'll investigate promptly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2020-02-14: |  |  | [#3](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/3) |
| --- | --- | --- | --- |

Please use CVE-2020-8833 for this issue: chmod(2) instead of fchmod(2) of the report.

Thanks for the report.

Please use CVE-2020-8833 for this issue: chmod(2) instead of fchmod(2) of the report.
Thanks for the report.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2020-02-14: |  |  | [#4](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/4) |
| --- | --- | --- | --- |

Of course that's my mistake, thanks Marc, chown(2) instead of fchown(2).

Of course that's my mistake, thanks Marc, chown(2) instead of fchown(2).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-27: |  |  | [#5](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/5) |
| --- | --- | --- | --- |

* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331454/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331454)
  (2.8 KiB,
  text/plain)

See attached for a proposed patch against apport in focal to fix both this and LP #1862348 in a single update.

See attached for a proposed patch against apport in focal to fix both this and LP #1862348 in a single update.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-28: |  |  | [#6](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/6) |
| --- | --- | --- | --- |

* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331792/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331792)
  (2.8 KiB,
  text/plain)

Updated version of patch based on feedback in #1862348

Updated version of patch based on feedback in #1862348

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2020-04-02: |  |  | [#7](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/7) |
| --- | --- | --- | --- |

This bug was fixed in the package apport - 2.20.11-0ubuntu22

---------------

apport (2.20.11-0ubuntu22) focal; urgency=medium

\* SECURITY UPDATE: World writable root owned lock file created in user

    controllable location (LP: [#1862348](/bugs/1862348))

    - data/apport: Change location of lock file to be directly under

      /var/run so that regular users can not directly access it or perform

      symlink attacks.

    - CVE-2020-8831

  \* SECURITY UPDATE: Race condition between report creation and ownership

    (LP: [#1862933](/bugs/1862933))

    - data/apport: When setting owner of report file use a file-descriptor

      to the report file instead of its path name to ensure that users can

      not cause Apport to change the ownership of other files via a

      symlink attack.

    - CVE-2020-8833

-- Alex Murray <email address hidden> Wed, 25 Mar 2020 11:28:58 +1030

This bug was fixed in the package apport - 2.20.11-0ubuntu22
---------------
apport (2.20.11-0ubuntu22) focal; urgency=medium
\* SECURITY UPDATE: World writable root owned lock file created in user
controllable location (LP: #1862348)
- data/apport: Change location of lock file to be directly under
/var/run so that regular users can not directly access it or perform
symlink attacks.
- CVE-2020-8831
\* SECURITY UPDATE: Race condition between report creation and ownership
(LP: #1862933)
- data/apport: When setting owner of report file use a file-descriptor
to the report file instead of its path name to ensure that users can
not cause Apport to change the ownership of other files via a
symlink attack.
- CVE-2020-8833
-- Alex Murray <alex.murray@canonical.com> Wed, 25 Mar 2020 11:28:58 +1030

| Changed in apport (Ubuntu): | |
| --- | --- |
| **status**: | New → Fix Released |

[Alex Murray (alexmurray)](https://launchpad.net/~alexmurray)
on 2020-04-02

| **information type**: | Private Security → Public Security |
| --- | --- |

[Benjamin Drung (bdrung)](https://launchpad.net/~bdrung)
on 2022-06-27

| Changed in apport: | |
| --- | --- |
| **milestone**: | none → 2.21.0 |
| **status**: | New → Fix Released |
| **importance**: | Undecided → Critical |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/apport/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331454/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331454 "Change patch details")
* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331792/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331792 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Baddcomment?field.patch=on)

## Bug attachments

* [poc.c](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5327644/%2Bfiles/poc.c)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5327644 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from usn.ubuntu.com_0ce36551_20250119_115246.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4315-1: Apport vulnerabilities

2 April 2020

Several security issues were fixed in Apport.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 19.10](/security/notices?release=eoan)
* [Ubuntu 18.04 ESM](/security/notices?release=bionic)
* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [apport](/security/cves?package=apport) - automatically generate crash reports for debugging

## Details

Maximilien Bourgeteau discovered that the Apport lock file was created with

insecure permissions. This could allow a local attacker to escalate their

privileges via a symlink attack. ([CVE-2020-8831](/security/CVE-2020-8831))

Maximilien Bourgeteau discovered a race condition in Apport when setting

crash report permissions. This could allow a local attacker to read

arbitrary files via a symlink attack. ([CVE-2020-8833](/security/CVE-2020-8833))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 19.10

* [apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.11-0ubuntu8.8](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.11-0ubuntu8.8)
* [python-apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.11-0ubuntu8.8](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.11-0ubuntu8.8)
* [python3-apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.11-0ubuntu8.8](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.11-0ubuntu8.8)

##### Ubuntu 18.04

* [apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.9-0ubuntu7.14](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.9-0ubuntu7.14)
* [python-apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.9-0ubuntu7.14](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.9-0ubuntu7.14)
* [python3-apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.9-0ubuntu7.14](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.9-0ubuntu7.14)

##### Ubuntu 16.04

* [apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.1-0ubuntu2.23](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.1-0ubuntu2.23)
* [python-apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.1-0ubuntu2.23](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.1-0ubuntu2.23)
* [python3-apport](https://launchpad.net/ubuntu/%2Bsource/apport)
  -
  [2.20.1-0ubuntu2.23](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.1-0ubuntu2.23)

In general, a standard system update will make all the necessary changes.

## References

* [CVE-2020-8831](/security/CVE-2020-8831)
* [CVE-2020-8833](/security/CVE-2020-8833)

## Related notices

* [USN-4315-2](/security/notices/USN-4315-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from launchpad.net_6a9ff059_20250119_115245.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[apport package](https://launchpad.net/ubuntu/%2Bsource/apport)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/apport)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/apport)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/apport)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/apport)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/apport)

# Apport lock file root privilege escalation

Bug #1862348 reported by
[Maximilien Bourgeteau](https://launchpad.net/~mbourget)
on 2020-02-07

[260](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Apport](https://bugs.launchpad.net/apport) | Fix Released | Critical | Unassigned | [Apport 2.21.0](https://launchpad.net/apport/%2Bmilestone/2.21.0) |
|  | [apport (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/apport "Latest release: 2.31.0-0ubuntu3, uploaded to main on 2025-01-17 22:47:11.031736+00:00 by Benjamin Drung (bdrung), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | Undecided | Unassigned |  |

### Bug Description

Vulnerable source code (from data/apport):

35 # create lock file directory

    36 try:

    37 os.mkdir("/var/lock/apport", mode=0o744)

    38 except FileExistsError as e:

    39 pass

    40

    41 # create a lock file

    42 try:

    43 fd = os.open("/var/lock/apport/lock", os.O\_WRONLY | os.O\_CREAT | os.O\_NOFOLLOW)

    44 except OSError as e:

    45 error\_log('cannot create lock file (uid %i): %s' % (os.getuid(), str(e)))

    46 sys.exit(1)

When invoked, Apport tries to create the directory /var/lock/apport and continues its execution if the directory already exists.

Since /var/lock is a world writable tmpfs, the probability that /var/lock/apport directory doesn't exist is high, which allows a malicious user to create a symbolic link to the directory of its choice to control the lock file location.

In this case, os.O\_NOFOLLOW and fs.protected\_symlinks (sysctl) have no effect during os.open execution because the symbolic link isn't located in the last component of the given path.

In addition, os.open is called without specifying the "mode" optional argument which by default is set to 0o777. Thus the lock file is created as root and is world writable which opens the door to several root privilege escalation scenarios like, for example, creating the lock file in a cron scripts directory.

All releases containing the [bug 1839415](/bugs/1839415) fix ([https://bugs.launchpad.net/apport/+bug/1839415](https://bugs.launchpad.net/apport/%2Bbug/1839415)) are affected.

Fix suggestions:

- If the /var/lock/apport directory already exists and isn't owned by root or owned by root but world writable, remove it and recreate it.

- Specify a mode of 0o600 in the os.open call for the lock file.

See [original description](comments/0)

## Related branches

[lp:~ubuntu-core-dev/ubuntu/focal/apport/ubuntu](https://code.launchpad.net/~ubuntu-core-dev/ubuntu/focal/apport/ubuntu)

## CVE References

* [2020-8831](/bugs/cve/2020-8831 "Apport creates a world writable lock ...")
* [2020-8833](/bugs/cve/2020-8833 "Time-of-check Time-of-use Race Condit...")

[Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget)
on 2020-02-09

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2020-02-09: |  |  | [#1](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/1) |
| --- | --- | --- | --- |

Thanks for reporting this issue, we will investigate it shortly.

Thanks for reporting this issue, we will investigate it shortly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2020-02-11: |  |  | [#2](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/2) |
| --- | --- | --- | --- |

Hello, please use CVE-2020-8831 for this issue.

Thanks

Hello, please use CVE-2020-8831 for this issue.
Thanks

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-11: |  |  | [#3](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/3) |
| --- | --- | --- | --- |

Thanks again for reporting this issue. Do you have a proposed coordinated release date (CRD) for this issue? We would prefer this to be in at least a few weeks time so that patches and updated packages can be prepared in advance so that when this issue is made public the fixed packages can be available immediately. If you have a preferred date or timeline please let us know, otherwise we can propose something.

Thanks again for reporting this issue. Do you have a proposed coordinated release date (CRD) for this issue? We would prefer this to be in at least a few weeks time so that patches and updated packages can be prepared in advance so that when this issue is made public the fixed packages can be available immediately. If you have a preferred date or timeline please let us know, otherwise we can propose something.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-02-11: |  |  | [#4](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/4) |
| --- | --- | --- | --- |

Hello, I don't have a CRD to propose, feel free to propose one.

Hello, I don't have a CRD to propose, feel free to propose one.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-11: |  |  | [#5](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/5) |
| --- | --- | --- | --- |

* [apport\_2.20.11-0ubuntu17.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5327340/%2Bfiles/apport_2.20.11-0ubuntu17.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5327340)
  (2.6 KiB,
  text/plain)

Apport is maintained by the foundations team so I will wait to confer with them before determining a CRD. In the meantime I have come up with a patch which should resolve this - @mbourget as you reported this and also suggested an appropriate fix I would appreciate it if you could please review it. @bdmurray can you or someone appropriate from the foundations team please also review? Finally, @seth-arnold I would appreciate your review too.

Apport is maintained by the foundations team so I will wait to confer with them before determining a CRD. In the meantime I have come up with a patch which should resolve this - @mbourget as you reported this and also suggested an appropriate fix I would appreciate it if you could please review it. @bdmurray can you or someone appropriate from the foundations team please also review? Finally, @seth-arnold I would appreciate your review too.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2020-02-11: |  |  | [#6](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/6) |
| --- | --- | --- | --- |

I think shutil.rmtree can be tricked into deleting arbitrary files via a symlink attack. Perhaps the best approach is to simply set the apport lock file as /run/apport.lock?

I think shutil.rmtree can be tricked into deleting arbitrary files via a symlink attack. Perhaps the best approach is to simply set the apport lock file as /run/apport.lock?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-02-11: |  |  | [#7](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/7) |
| --- | --- | --- | --- |

Yes, shutil.rmtree can be vulnerable to symlink attacks, Python 3 documentation has a special note about it (<https://docs.python.org/3/library/shutil.html#shutil.rmtree>):

"On platforms that support the necessary fd-based functions a symlink attack resistant version of rmtree() is used by default. On other platforms, the rmtree() implementation is susceptible to a symlink attack: given proper timing and circumstances, attackers can manipulate symlinks on the filesystem to delete files they wouldn’t be able to access otherwise. Applications can use the rmtree.avoids\_symlink\_attacks function attribute to determine which case applies."

@alexmurray I think Marc approach is a better choice than my suggestions because only root can write into /run which avoids any symlink trickery (as far as I know).

Yes, shutil.rmtree can be vulnerable to symlink attacks, Python 3 documentation has a special note about it (https://docs.python.org/3/library/shutil.html#shutil.rmtree):
"On platforms that support the necessary fd-based functions a symlink attack resistant version of rmtree() is used by default. On other platforms, the rmtree() implementation is susceptible to a symlink attack: given proper timing and circumstances, attackers can manipulate symlinks on the filesystem to delete files they wouldn’t be able to access otherwise. Applications can use the rmtree.avoids\_symlink\_attacks function attribute to determine which case applies."
@alexmurray I think Marc approach is a better choice than my suggestions because only root can write into /run which avoids any symlink trickery (as far as I know).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2020-02-12: |  |  | [#8](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/8) |
| --- | --- | --- | --- |

I also endorse the /run/apport.lock file approach -- the os.mkdir() calls in the new code can be raced to create exceptions same as the top-level os.mkdir(). Probably the os.unlink() and shutil.rmtree() calls could also be raced to cause arbitrary files to be deleted.

Thanks

I also endorse the /run/apport.lock file approach -- the os.mkdir() calls in the new code can be raced to create exceptions same as the top-level os.mkdir(). Probably the os.unlink() and shutil.rmtree() calls could also be raced to cause arbitrary files to be deleted.
Thanks

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-12: |  |  | [#9](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/9) |
| --- | --- | --- | --- |

Thanks for the excellent reviews - I had already wondered about a symlink attack hence the code first checks if /var/run/apport a dir and if not unlinks it - but yes this could be raced still so that is a good point. It does indeed seem best to then just put it somewhere where only root has write access to start with (although I have a feeling that apport can sometimes run as a user which in this case this is not going to work but perhaps I am mistaken - although my patch still assumes this file must be root owned anyway which is no different) - so then /var/run/apport.lock does seem like a simpler and better solution. I'll cook up a patch based on that instead.

Thanks for the excellent reviews - I had already wondered about a symlink attack hence the code first checks if /var/run/apport a dir and if not unlinks it - but yes this could be raced still so that is a good point. It does indeed seem best to then just put it somewhere where only root has write access to start with (although I have a feeling that apport can sometimes run as a user which in this case this is not going to work but perhaps I am mistaken - although my patch still assumes this file must be root owned anyway which is no different) - so then /var/run/apport.lock does seem like a simpler and better solution. I'll cook up a patch based on that instead.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-12: |  |  | [#10](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/10) |
| --- | --- | --- | --- |

* [Reworked patch to just move the lock file to /var/run directly](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5327641/%2Bfiles/apport_2.20.11-0ubuntu17.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5327641)
  (1.6 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-12: |  |  | [#11](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/11) |
| --- | --- | --- | --- |

Ok please see the reworked patch in comment:10 - I have verified this works as intended and the existing autopkgtest's for focal do not regress (there are still the same failures with this patch as without). If we can agree on this as a solution then we can start to look at backporting it and setting a CRD.

Ok please see the reworked patch in comment:10 - I have verified this works as intended and the existing autopkgtest's for focal do not regress (there are still the same failures with this patch as without). If we can agree on this as a solution then we can start to look at backporting it and setting a CRD.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2020-02-12: |  |  | [#12](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/12) |
| --- | --- | --- | --- |

Patch in comment 10 LGTM, thanks!

Patch in comment 10 LGTM, thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-02-13: |  |  | [#13](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/13) |
| --- | --- | --- | --- |

Looks good to me too, thanks!

Looks good to me too, thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2020-02-14: |  |  | [#14](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/14) |
| --- | --- | --- | --- |

Alex, often O\_EXCL is used alongside O\_CREAT to ensure the file doesn't already exist -- this seems likely to be something we'd want for a lock file.

Was this rejected or overlooked?

Thanks

Alex, often O\_EXCL is used alongside O\_CREAT to ensure the file doesn't already exist -- this seems likely to be something we'd want for a lock file.
Was this rejected or overlooked?
Thanks

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-19: |  |  | [#15](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/15) |
| --- | --- | --- | --- |

This was overlooked - thanks Seth - however I just tried adding this and it breaks a bunch of the autopkgtests so I don't think it is appropriate to add that at this time - so I think we should proceed with the above patch in comment:10

This was overlooked - thanks Seth - however I just tried adding this and it breaks a bunch of the autopkgtests so I don't think it is appropriate to add that at this time - so I think we should proceed with the above patch in comment:10

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-02-21: |  |  | [#16](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/16) |
| --- | --- | --- | --- |

I think O\_EXCL flag breaking tests is a normal behavior since Apport doesn't and shouldn't (AFAIK) remove the lock file once its execution is terminated because there could be another instance waiting for the lock to be released. Using O\_EXCL would allow Apport to only run 1 time per boot.

I think O\_EXCL flag breaking tests is a normal behavior since Apport doesn't and shouldn't (AFAIK) remove the lock file once its execution is terminated because there could be another instance waiting for the lock to be released. Using O\_EXCL would allow Apport to only run 1 time per boot.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-27: |  |  | [#17](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/17) |
| --- | --- | --- | --- |

* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5331455/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5331455)
  (2.8 KiB,
  text/plain)

See attached for a proposed patch against apport in focal to fix both this and LP #1862933 in a single update.

See attached for a proposed patch against apport in focal to fix both this and LP #1862933 in a single update.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-02-27: |  |  | [#18](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/18) |
| --- | --- | --- | --- |

Thanks for the patch Alex, here is my review:

The title ("World writable lock file created in word writable location") for the lock file issue seems a bit inaccurate to me, I would rather use "World writable root owned lock file created in user controllable location", also there is typo in the second issue title, the "n" of between has gone away.

About the lock file fix, shouldn't we use a mode of 0o600 instead of 0o400 since os.open is called with the O\_WRONLY flag? The lock file is not removed until reboot, it's fine for the first call when the file is created but it seems a bit confusing for the future calls don't you think?

Thanks for the patch Alex, here is my review:
The title ("World writable lock file created in word writable location") for the lock file issue seems a bit inaccurate to me, I would rather use "World writable root owned lock file created in user controllable location", also there is typo in the second issue title, the "n" of between has gone away.
About the lock file fix, shouldn't we use a mode of 0o600 instead of 0o400 since os.open is called with the O\_WRONLY flag? The lock file is not removed until reboot, it's fine for the first call when the file is created but it seems a bit confusing for the future calls don't you think?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-28: |  |  | [#19](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/19) |
| --- | --- | --- | --- |

* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5331791/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5331791)
  (2.8 KiB,
  text/plain)

Thanks again for the review Maximilien - I've updated the changelog description and changed the mode to 0o600 as suggested - this does make more sense.

Thanks again for the review Maximilien - I've updated the changelog description and changed the mode to 0o600 as suggested - this does make more sense.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-03-02: |  |  | [#20](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/20) |
| --- | --- | --- | --- |

Thanks for the update Alex, the patch in comment 19 looks good to me, also, are there any news about the CRD?

Thanks for the update Alex, the patch in comment 19 looks good to me, also, are there any news about the CRD?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-03-21: |  |  | [#21](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/21) |
| --- | --- | --- | --- |

Hello, how it's going?

Hello, how it's going?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-03-23: |  |  | [#22](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/22) |
| --- | --- | --- | --- |

@Maximilien - thanks for the reminder re CRD - I want to plan this around some existing updates for apport so will wait until I know when they are likely to be done - then we can look at scheduling this if that's ok?

@Brian - I notice you have apport versions in -proposed for eoan/bionic - do you know when they are likely to migrate?

@Maximilien - thanks for the reminder re CRD - I want to plan this around some existing updates for apport so will wait until I know when they are likely to be done - then we can look at scheduling this if that's ok?
@Brian - I notice you have apport versions in -proposed for eoan/bionic - do you know when they are likely to migrate?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brian Murray (brian-murray)](https://launchpad.net/~brian-murray) wrote on 2020-03-23: |  |  | [#23](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/23) |
| --- | --- | --- | --- |

I'll make sure the versions in -proposed get migrated on Thursday, March 26th.

I'll make sure the versions in -proposed get migrated on Thursday, March 26th.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-03-23: |  |  | [#24](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/24) |
| --- | --- | --- | --- |

Thanks Brian - Maximilien - in that case, I think 1 week after the 26th (2020-04-02 00:00:00 UTC) would be suitable for a CRD since this should provide enough time for me to backport this fix to our other releases and I don't want to drag this out any longer than necessary. Also to clarify, this would be the CRD for both this issue (CVE-2020-8831) and CVE-2020-8833 from [https://bugs.launchpad.net/ubuntu/+source/apport/+bug/1862933](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933) if that works for you?

Thanks Brian - Maximilien - in that case, I think 1 week after the 26th (2020-04-02 00:00:00 UTC) would be suitable for a CRD since this should provide enough time for me to backport this fix to our other releases and I don't want to drag this out any longer than necessary. Also to clarify, this would be the CRD for both this issue (CVE-2020-8831) and CVE-2020-8833 from https://bugs.launchpad.net/ubuntu/+source/apport/+bug/1862933 if that works for you?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-03-27: |  |  | [#25](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/25) |
| --- | --- | --- | --- |

Hi Alex, yes that works for me, thanks.

Hi Alex, yes that works for me, thanks.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2020-04-02: |  |  | [#26](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/26) |
| --- | --- | --- | --- |

This bug was fixed in the package apport - 2.20.11-0ubuntu22

---------------

apport (2.20.11-0ubuntu22) focal; urgency=medium

\* SECURITY UPDATE: World writable root owned lock file created in user

    controllable location (LP: [#1862348](/bugs/1862348))

    - data/apport: Change location of lock file to be directly under

      /var/run so that regular users can not directly access it or perform

      symlink attacks.

    - CVE-2020-8831

  \* SECURITY UPDATE: Race condition between report creation and ownership

    (LP: [#1862933](/bugs/1862933))

    - data/apport: When setting owner of report file use a file-descriptor

      to the report file instead of its path name to ensure that users can

      not cause Apport to change the ownership of other files via a

      symlink attack.

    - CVE-2020-8833

-- Alex Murray <email address hidden> Wed, 25 Mar 2020 11:28:58 +1030

This bug was fixed in the package apport - 2.20.11-0ubuntu22
---------------
apport (2.20.11-0ubuntu22) focal; urgency=medium
\* SECURITY UPDATE: World writable root owned lock file created in user
controllable location (LP: #1862348)
- data/apport: Change location of lock file to be directly under
/var/run so that regular users can not directly access it or perform
symlink attacks.
- CVE-2020-8831
\* SECURITY UPDATE: Race condition between report creation and ownership
(LP: #1862933)
- data/apport: When setting owner of report file use a file-descriptor
to the report file instead of its path name to ensure that users can
not cause Apport to change the ownership of other files via a
symlink attack.
- CVE-2020-8833
-- Alex Murray <alex.murray@canonical.com> Wed, 25 Mar 2020 11:28:58 +1030

| Changed in apport (Ubuntu): | |
| --- | --- |
| **status**: | New → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2020-04-02: |  |  | [#27](/ubuntu/%2Bsource/apport/%2Bbug/1862348/comments/27) |
| --- | --- | --- | --- |

This bug was fixed in the package apport - 2.20.11-0ubuntu8.8

---------------

apport (2.20.11-0ubuntu8.8) eoan-security; urgency=medium

\* SECURITY UPDATE: World writable root owned lock file created in user

    controllable location (LP: [#1862348](/bugs/1862348))

    - data/apport: Change location of lock file to be directly under

      /var/run so that regular users can not directly access it or perform

      symlink attacks.

    - CVE-2020-8831

  \* SECURITY UPDATE: Race condition between report creation and ownership

    (LP: [#1862933](/bugs/1862933))

    - data/apport: When setting owner of report file use a file-descriptor

      to the report file instead of its path name to ensure that users can

      not cause Apport to change the ownership of other files via a

      symlink attack.

    - CVE-2020-8833

-- Alex Murray <email address hidden> Wed, 25 Mar 2020 11:40:00 +1030

This bug was fixed in the package apport - 2.20.11-0ubuntu8.8
---------------
apport (2.20.11-0ubuntu8.8) eoan-security; urgency=medium
\* SECURITY UPDATE: World writable root owned lock file created in user
controllable location (LP: #1862348)
- data/apport: Change location of lock file to be directly under
/var/run so that regular users can not directly access it or perform
symlink attacks.
- CVE-2020-8831
\* SECURITY UPDATE: Race condition between report creation and ownership
(LP: #1862933)
- data/apport: When setting owner of report file use a file-descriptor
to the report file instead of its path name to ensure that users can
not cause Apport to change the ownership of other files via a
symlink attack.
- CVE-2020-8833
-- Alex Murray <alex.murray@canonical.com> Wed, 25 Mar 2020 11:40:00 +1030

| Changed in apport (Ubuntu): | |
| --- | --- |
| **status**: | New → Fix Released |

[Alex Murray (alexmurray)](https://launchpad.net/~alexmurray)
on 2020-04-02

| **information type**: | Private Security → Public Security |
| --- | --- |

[Benjamin Drung (bdrung)](https://launchpad.net/~bdrung)
on 2022-06-27

| Changed in apport: | |
| --- | --- |
| **milestone**: | none → 2.21.0 |
| **importance**: | Undecided → Critical |
| **status**: | New → Fix Released |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/apport/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [apport\_2.20.11-0ubuntu17.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5327340/%2Bfiles/apport_2.20.11-0ubuntu17.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5327340 "Change patch details")
* [Reworked patch to just move the lock file to /var/run directly](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5327641/%2Bfiles/apport_2.20.11-0ubuntu17.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5327641 "Change patch details")
* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5331455/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5331455 "Change patch details")
* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5331791/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Battachment/5331791 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/apport/%2Bbug/1862348/%2Baddcomment?field.patch=on)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_6ee54d97_20250119_133826.html ===

[Log in / Register](https://launchpad.net/ubuntu/%2Bsource/apport/2.20.1-0ubuntu2.23/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[apport package](https://launchpad.net/ubuntu/%2Bsource/apport)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/apport)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/apport)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/apport)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/apport)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/apport)

# apport 2.20.1-0ubuntu2.23 source package in Ubuntu

## Changelog

```
apport (2.20.1-0ubuntu2.23) xenial-security; urgency=medium

  * SECURITY UPDATE: World writable root owned lock file created in user
    controllable location (LP: [#1862348](/bugs/1862348))
    - data/apport: Change location of lock file to be directly under
      /var/run so that regular users can not directly access it or perform
      symlink attacks.
    - CVE-2020-8831
  * SECURITY UPDATE: Race condition between report creation and ownership
    (LP: [#1862933](/bugs/1862933))
    - data/apport: When setting owner of report file use a file-descriptor
      to the report file instead of its path name to ensure that users can
      not cause Apport to change the ownership of other files via a
      symlink attack.
    - CVE-2020-8833

 -- Alex Murray <email address hidden>  Wed, 25 Mar 2020 11:50:41 +1030
```

## Upload details

Uploaded by:
[Alex Murray](/~alexmurray)
on 2020-03-27

Uploaded to:
[Xenial](/ubuntu/xenial)

Original maintainer:
[Martin Pitt](/~pitti)

Architectures:
all

Section:
utils

Urgency:
Medium Urgency

## [See full publishing history](%2Bpublishinghistory) Publishing

| Series | Pocket | Published | Component | Section |
| --- | --- | --- | --- | --- |

## Builds

[Xenial](/ubuntu/xenial):
![[FULLYBUILT]](/@@/build-success "Successfully built")
[amd64](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/18899610)

## Downloads

| File | Size | SHA-256 Checksum |
| --- | --- | --- |
| [apport\_2.20.1.orig.tar.gz](https://launchpad.net/ubuntu/%2Barchive/primary/%2Bsourcefiles/apport/2.20.1-0ubuntu2.23/apport_2.20.1.orig.tar.gz) | 1.3 MiB | 638930a4b5a44fe3b9c56dd94cc72d5ebc225fd3e29f6043c63e47f66d658e06 |
| [apport\_2.20.1-0ubuntu2.23.diff.gz](https://launchpad.net/ubuntu/%2Barchive/primary/%2Bsourcefiles/apport/2.20.1-0ubuntu2.23/apport_2.20.1-0ubuntu2.23.diff.gz) | 170.5 KiB | c7c10eda020c7ec8d867ae74972f403ac7c7ff1ab4e08e4118c9bf45a2b86acc |
| [apport\_2.20.1-0ubuntu2.23.dsc](https://launchpad.net/ubuntu/%2Barchive/primary/%2Bsourcefiles/apport/2.20.1-0ubuntu2.23/apport_2.20.1-0ubuntu2.23.dsc) | 2.5 KiB | 8630227e37d5dccd62f776aa38a7cdd3be67ccacec2a88a54797441d6b508969 |

### Available diffs

* [diff from 2.20.1-0ubuntu2.22 (in ~ubuntu-security-proposed/ubuntu/ppa) to 2.20.1-0ubuntu2.23](http://launchpadlibrarian.net/472277432/apport_2.20.1-0ubuntu2.22_2.20.1-0ubuntu2.23.diff.gz) (1.2 KiB)
* [diff from 2.20.1-0ubuntu2.21 to 2.20.1-0ubuntu2.23](http://launchpadlibrarian.net/470940650/apport_2.20.1-0ubuntu2.21_2.20.1-0ubuntu2.23.diff.gz) (6.9 KiB)

[View changes file](http://launchpadlibrarian.net/470940546/apport_2.20.1-0ubuntu2.23_source.changes)

## Binary packages built by this source

[apport](/ubuntu/xenial/%2Bpackage/apport):
automatically generate crash reports for debugging

apport automatically collects data from crashed processes and

 compiles a problem report in /var/crash/. This utilizes the crashdump

 helper hook provided by the Ubuntu kernel.

 .

 This package also provides a command line frontend for browsing and

 handling the crash reports. For desktops, you should consider

 installing the GTK+ or Qt user interface (apport-gtk or apport-kde).

[apport-gtk](/ubuntu/xenial/%2Bpackage/apport-gtk):
GTK+ frontend for the apport crash report system

apport automatically collects data from crashed processes and

 compiles a problem report in /var/crash/. This utilizes the crashdump

 helper hook provided by the Ubuntu kernel.

 .

 This package provides a GTK+ frontend for browsing and handling the

 crash reports.

[apport-kde](/ubuntu/xenial/%2Bpackage/apport-kde):
KDE frontend for the apport crash report system

apport automatically collects data from crashed processes and

 compiles a problem report in /var/crash/. This utilizes the crashdump

 helper hook provided by the Ubuntu kernel.

 .

 This package provides a KDE frontend for browsing and handling the

 crash reports.

[apport-noui](/ubuntu/xenial/%2Bpackage/apport-noui):
tools for automatically reporting Apport crash reports

apport automatically collects data from crashed processes and

 compiles a problem report in /var/crash/. This utilizes the crashdump

 helper hook provided by the Ubuntu kernel.

 .

 Installing this package will configure your system to automatically submit

 all new Apport crash reports.

[apport-retrace](/ubuntu/xenial/%2Bpackage/apport-retrace):
tools for reprocessing Apport crash reports

apport-retrace recombines an Apport crash report (either a file or a

 Launchpad bug) and debug symbol packages (.ddebs) into fully symbolic

 stack traces. This can optionally use a sandbox for installing debug symbol

 packages and doing the processing, so that entire process of retracing crashes

 can happen with normal user privileges without changing the system.

 .

 You need to install gdb-multiarch if you want to be able to retrace crash

 reports which happened on a different architecture than the one you run

 apport-retrace on.

[apport-valgrind](/ubuntu/xenial/%2Bpackage/apport-valgrind):
valgrind wrapper that first downloads debug symbols

apport-valgrind is a valgrind wrapper that automatically downloads related

 available debug symbols and provides them to valgrind's memcheck tool, which

 is executed. The output is a valgrind log file ("valgrind.log") that contains

 stack traces (with as many symbols resolved as available) and that shows

 memory leaks.

[dh-apport](/ubuntu/xenial/%2Bpackage/dh-apport):
debhelper extension for the apport crash report system

apport automatically collects data from crashed processes and

 compiles a problem report in /var/crash/. This utilizes the crashdump

 helper hook provided by the Ubuntu kernel.

 .

 This package provides a debhelper extension to make it easier for other

 packages to include apport hooks.

[python-apport](/ubuntu/xenial/%2Bpackage/python-apport):
Python library for Apport crash report handling

This Python package provides high-level functions for creating and

 handling apport crash reports:

 .

  \* Query available and new reports.

  \* Add OS, packaging, and process runtime information to a report.

  \* Various frontend utility functions.

  \* Python hook to generate crash reports when Python scripts fail.

[python-problem-report](/ubuntu/xenial/%2Bpackage/python-problem-report):
Python library to handle problem reports

This Python library provides an interface for creating, modifying,

 and accessing standardized problem reports for program and kernel

 crashes and packaging bugs.

 .

 These problem reports use standard Debian control format syntax

 (RFC822).

[python3-apport](/ubuntu/xenial/%2Bpackage/python3-apport):
Python 3 library for Apport crash report handling

This Python package provides high-level functions for creating and

 handling apport crash reports:

 .

  \* Query available and new reports.

  \* Add OS, packaging, and process runtime information to a report.

  \* Various frontend utility functions.

  \* Python hook to generate crash reports when Python scripts fail.

[python3-problem-report](/ubuntu/xenial/%2Bpackage/python3-problem-report):
Python 3 library to handle problem reports

This Python library provides an interface for creating, modifying,

 and accessing standardized problem reports for program and kernel

 crashes and packaging bugs.

 .

 These problem reports use standard Debian control format syntax

 (RFC822).

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_c54b5145_20250119_133833.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[apport package](https://launchpad.net/ubuntu/%2Bsource/apport)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/apport)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/apport)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/apport)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/apport)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/apport)

# Apport crash report & cron script TOCTTOU

Bug #1862933 reported by
[Maximilien Bourgeteau](https://launchpad.net/~mbourget)
on 2020-02-12

[258](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Apport](https://bugs.launchpad.net/apport) | Fix Released | Critical | Unassigned | [Apport 2.21.0](https://launchpad.net/apport/%2Bmilestone/2.21.0) |
|  | [apport (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/apport "Latest release: 2.31.0-0ubuntu3, uploaded to main on 2025-01-17 22:47:11.031736+00:00 by Benjamin Drung (bdrung), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | Undecided | Unassigned |  |

### Bug Description

Vulnerable code (from data/apport):

700 # we prefer having a file mode of 0 while writing; this doesn't work

   701 # for suid binaries as we completely drop privs and thus can't chmod

   702 # them later on

   703 if pidstat.st\_uid != os.getuid():

   704 mode = 0o640

   705 else:

   706 mode = 0

   707 reportfile = os.fdopen(os.open(report, os.O\_RDWR | os.O\_CREAT | os.O\_EXCL, mode), 'w+b')

   708 assert reportfile.fileno() > sys.stderr.fileno()

   709

   710 # Make sure the crash reporting daemon can read this report

   711 try:

   712 gid = pwd.getpwnam('whoopsie').pw\_gid

   713 os.chown(report, pidstat.st\_uid, gid)

   714 except (OSError, KeyError):

   715 os.chown(report, pidstat.st\_uid, pidstat.st\_gid)

   716 except (OSError, IOError) as e:

   717 error\_log('Could not create report file: %s' % str(e))

   718 sys.exit(1)

The TOCTTOU takes place between the os.open and the os.chown call and can be fully achieved thanks to the Apport cron script (etc/cron.daily/apport):

1 #!/bin/sh -e

     2 # clean all crash reports which are older than a week.

     3 [ -d /var/crash ] || exit 0

     4 find /var/crash/. ! -name . -prune -type f \( \( -size 0 -a \! -name '\*.upload\*' -a \! -name '\*.drkonqi\*' \) -o -mtime +7 \) -exec rm -f -- '{}' \;

     5 find /var/crash/. ! -name . -prune -type d -regextype posix-extended -regex '.\*/[0-9]{12}$' \( -mtime +7 \) -exec rm -Rf -- '{}' \;

The interesting part in this daily script is that the crash reports gets removed if their size is 0.

Since Apport drops real uid and gid, the crashed process owner can send signals during the report file creation. At this time, effective uid and gid are still root.

We can also block Apport by replacing user settings file with a FIFO (~/.config/apport/settings). I'm using the FIFO way in my PoC but it can be done without it.

To make Apport read user settings, the crashing program must not be located in one of those directories (taken from apport/fileutils.py):

78 pkg\_whitelist = ['/bin/', '/boot', '/etc/', '/initrd', '/lib', '/sbin/',

    79 '/opt', '/usr/', '/var'] # packages only ship executables in these directories

Once Apport is blocked into FIFO reading, we send the SIGSTOP signal then we write "[main]\nunpackaged=1" into the FIFO so Apport won't exit after resuming (if unpackaged is 0 Apport directly exits because we're not in a "packaged" directory).

After that we "single step" through Apport by sending SIGCONT and SIGSTOP consecutively in a loop until the report file is created with os.open. We must make sure os.chown hasn't been called and then we wait for the cron script to remove the report (it's created as root with mode 0 so only root can remove it).

Once removed, we can replace it with a symbolic link/file of the same name, resume Apport with SIGCONT then the file will now be owned by the crashed process user and group.

I think the impact of this vulnerability alone is low because fs.protected\_symlinks prevents symlink resolution since we're in a sticky world writable directory (/var/crash), but if it's disabled, you can escalate privileges very easily. It still can be used in some kind of exploit chain though.

My PoC does everything for you except symbolic link/file creation once the report gets removed by the cron script, you have to create it manually then press enter to resume Apport and let the chown happen. You could also create a new crontab entry and directory then copy Apport cron script into it so you don't have to wait the entire day.

Fix suggestions:

- Use reportfile.fileno() instead of the report string for the os.chown calls, and also add follow\_symlinks=False argument just in case.

- Remove the size 0 condition in the cron script (not sure about this one, I suppose the condition was there for a reason).

See [original description](comments/0)

## Related branches

[lp:~ubuntu-core-dev/ubuntu/focal/apport/ubuntu](https://code.launchpad.net/~ubuntu-core-dev/ubuntu/focal/apport/ubuntu)

## CVE References

* [2020-8831](/bugs/cve/2020-8831 "Apport creates a world writable lock ...")
* [2020-8833](/bugs/cve/2020-8833 "Time-of-check Time-of-use Race Condit...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget) wrote on 2020-02-12: |  |  | [#1](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/1) |
| --- | --- | --- | --- |

* [poc.c](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5327644/%2Bfiles/poc.c)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5327644)
  (3.7 KiB,
  text/x-csrc)

[Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget)
on 2020-02-12

| **description**: | updated |
| --- | --- |

[Maximilien Bourgeteau (mbourget)](https://launchpad.net/~mbourget)
on 2020-02-12

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2020-02-14: |  |  | [#2](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/2) |
| --- | --- | --- | --- |

Thanks for reporting this issue, we'll investigate promptly.

Thanks for reporting this issue, we'll investigate promptly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2020-02-14: |  |  | [#3](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/3) |
| --- | --- | --- | --- |

Please use CVE-2020-8833 for this issue: chmod(2) instead of fchmod(2) of the report.

Thanks for the report.

Please use CVE-2020-8833 for this issue: chmod(2) instead of fchmod(2) of the report.
Thanks for the report.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2020-02-14: |  |  | [#4](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/4) |
| --- | --- | --- | --- |

Of course that's my mistake, thanks Marc, chown(2) instead of fchown(2).

Of course that's my mistake, thanks Marc, chown(2) instead of fchown(2).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-27: |  |  | [#5](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/5) |
| --- | --- | --- | --- |

* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331454/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331454)
  (2.8 KiB,
  text/plain)

See attached for a proposed patch against apport in focal to fix both this and LP #1862348 in a single update.

See attached for a proposed patch against apport in focal to fix both this and LP #1862348 in a single update.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alex Murray (alexmurray)](https://launchpad.net/~alexmurray) wrote on 2020-02-28: |  |  | [#6](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/6) |
| --- | --- | --- | --- |

* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331792/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331792)
  (2.8 KiB,
  text/plain)

Updated version of patch based on feedback in #1862348

Updated version of patch based on feedback in #1862348

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2020-04-02: |  |  | [#7](/ubuntu/%2Bsource/apport/%2Bbug/1862933/comments/7) |
| --- | --- | --- | --- |

This bug was fixed in the package apport - 2.20.11-0ubuntu22

---------------

apport (2.20.11-0ubuntu22) focal; urgency=medium

\* SECURITY UPDATE: World writable root owned lock file created in user

    controllable location (LP: [#1862348](/bugs/1862348))

    - data/apport: Change location of lock file to be directly under

      /var/run so that regular users can not directly access it or perform

      symlink attacks.

    - CVE-2020-8831

  \* SECURITY UPDATE: Race condition between report creation and ownership

    (LP: [#1862933](/bugs/1862933))

    - data/apport: When setting owner of report file use a file-descriptor

      to the report file instead of its path name to ensure that users can

      not cause Apport to change the ownership of other files via a

      symlink attack.

    - CVE-2020-8833

-- Alex Murray <email address hidden> Wed, 25 Mar 2020 11:28:58 +1030

This bug was fixed in the package apport - 2.20.11-0ubuntu22
---------------
apport (2.20.11-0ubuntu22) focal; urgency=medium
\* SECURITY UPDATE: World writable root owned lock file created in user
controllable location (LP: #1862348)
- data/apport: Change location of lock file to be directly under
/var/run so that regular users can not directly access it or perform
symlink attacks.
- CVE-2020-8831
\* SECURITY UPDATE: Race condition between report creation and ownership
(LP: #1862933)
- data/apport: When setting owner of report file use a file-descriptor
to the report file instead of its path name to ensure that users can
not cause Apport to change the ownership of other files via a
symlink attack.
- CVE-2020-8833
-- Alex Murray <alex.murray@canonical.com> Wed, 25 Mar 2020 11:28:58 +1030

| Changed in apport (Ubuntu): | |
| --- | --- |
| **status**: | New → Fix Released |

[Alex Murray (alexmurray)](https://launchpad.net/~alexmurray)
on 2020-04-02

| **information type**: | Private Security → Public Security |
| --- | --- |

[Benjamin Drung (bdrung)](https://launchpad.net/~bdrung)
on 2022-06-27

| Changed in apport: | |
| --- | --- |
| **milestone**: | none → 2.21.0 |
| **status**: | New → Fix Released |
| **importance**: | Undecided → Critical |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/apport/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331454/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331454 "Change patch details")
* [apport\_2.20.11-0ubuntu19.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331792/%2Bfiles/apport_2.20.11-0ubuntu19.debdiff)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5331792 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Baddcomment?field.patch=on)

## Bug attachments

* [poc.c](https://bugs.launchpad.net/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5327644/%2Bfiles/poc.c)
  [Edit](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Battachment/5327644 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/apport/%2Bbug/1862933/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))


