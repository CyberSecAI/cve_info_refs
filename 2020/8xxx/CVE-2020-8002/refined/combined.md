=== Content from gitlab.freedesktop.org_ba9f735d_20250119_124153.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Register](/users/sign_up)

## Admin message

Due to an influx of spam, we have had to impose restrictions on new accounts. Please see [this wiki page](https://gitlab.freedesktop.org/freedesktop/freedesktop/-/wikis/home) for instructions on how to get full permissions. Sorry for the inconvenience.

# Fix double free when texture allocation fails + fix a null pointer deref

Code

* Review changes
* Check out branch
* ---
* Download
* [Patches](/virgl/virglrenderer/-/merge_requests/340.patch)
* [Plain diff](/virgl/virglrenderer/-/merge_requests/340.diff)

[Gert Wollny](/gerddie) requested to merge  [gerddie/virglrenderer:fix-double-free-154](/gerddie/virglrenderer/-/tree/fix-double-free-154 "gerddie/virglrenderer:fix-double-free-154")
 into [master](/virgl/virglrenderer/-/tree/master "master") Jan 13, 2020

* [Overview
  1](/virgl/virglrenderer/-/merge_requests/340)
* [Commits
  4](/virgl/virglrenderer/-/merge_requests/340/commits)
* [Pipelines
  8](/virgl/virglrenderer/-/merge_requests/340/pipelines)
* [Changes
  2](/virgl/virglrenderer/-/merge_requests/340/diffs)

Expand

(1) The struct holding the resource is allocated outside `vrend_renderer_resource_allocated_texture`, and when the texture allocation itself fails, then this struct is freed after returning from that call (or for the intermediate blit texture it is asserted that texture allocation doesn't fail, because there it should never fail). Therefore, the struct must not be freed inside `vrend_renderer_resource_allocated_texture`

(2) when one tries to launch a grid but no CS was sent before, then a null pointer dereference hit, this MR adds a test and fixes this.

Fixes #154
Fixes #155

Edited Jan 15, 2020 by [Gert Wollny](/gerddie)

## Merge request reports

Assignee
Loading

Reviewers
Loading

Request review fromRequest review fromLoading

Time tracking
Loading

Loading



=== Content from lists.debian.org_189f1893_20250119_124156.html ===


---

[[Date Prev](msg00016.html)][[Date Next](msg00018.html)]
[[Thread Prev](msg00016.html)][[Thread Next](msg00018.html)]
[[Date Index](maillist.html#00017)]
[[Thread Index](threads.html#00017)]

# [SECURITY] [DLA 3232-1] virglrenderer security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3232-1] virglrenderer security update
* *From*: Tobias Frost <tobi@debian.org>
* *Date*: Wed, 7 Dec 2022 18:25:31 +0100
* *Message-id*: <Y5DMi4/5/6WE5XUY@isildor.loewenhoehle.ip>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-3232-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                         Tobias Frost
December 07, 2022                             <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : virglrenderer
Version        : 0.7.0-2+deb10u1
CVE ID         : CVE-2019-18388 CVE-2019-18389 CVE-2019-18390 CVE-2019-18391
                 CVE-2020-8002 CVE-2020-8003 CVE-2022-0135
Debian Bug     : 946942 949954 1009073

Several security vulnerabilities were discovered in virglrenderer, a virtual
GPU for KVM virtualization.

CVE-2019-18388

    A NULL pointer dereference in vrend_renderer.c in virglrenderer through
    0.8.0 allows guest OS users to cause a denial of service via malformed
    commands.

CVE-2019-18389

    A heap-based buffer overflow in the vrend_renderer_transfer_write_iov
    function in vrend_renderer.c in virglrenderer through 0.8.0 allows
    guest OS users to cause a denial of service, or QEMU guest-to-host
    escape and code execution, via VIRGL_CCMD_RESOURCE_INLINE_WRITE
    commands.

CVE-2019-18390

    An out-of-bounds read in the vrend_blit_need_swizzle function in
    vrend_renderer.c in virglrenderer through 0.8.0 allows guest OS
    users to cause a denial of service via VIRGL_CCMD_BLIT commands.

CVE-2019-18391

    A heap-based buffer overflow in the vrend_renderer_transfer_write_iov
    function in vrend_renderer.c in virglrenderer through 0.8.0 allows
    guest OS users to cause a denial of service via
    VIRGL_CCMD_RESOURCE_INLINE_WRITE commands.

CVE-2020-8002

    A NULL pointer dereference in vrend_renderer.c in virglrenderer through
    0.8.1 allows attackers to cause a denial of service via commands that attempt
    to launch a grid without previously providing a Compute Shader (CS).

CVE-2020-8003

    A double-free vulnerability in vrend_renderer.c in virglrenderer through
    0.8.1 allows attackers to cause a denial of service by triggering texture
    allocation failure, because vrend_renderer_resource_allocated_texture is not an
    appropriate place for a free.

CVE-2022-0135

    An out-of-bounds write issue was found in the VirGL virtual OpenGL renderer
    (virglrenderer). This flaw allows a malicious guest to create a specially
    crafted virgil resource and then issue a VIRTGPU_EXECBUFFER ioctl, leading to a
    denial of service or possible code execution.

For Debian 10 buster, these problems have been fixed in version
0.7.0-2+deb10u1.

We recommend that you upgrade your virglrenderer packages.

For the detailed security status of virglrenderer please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/virglrenderer>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpzUwV1dQPY6.pgp)**

*Description:* PGP signature

---



=== Content from gitlab.freedesktop.org_288dc04a_20250119_124155.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Register](/users/sign_up)

## Admin message

Due to an influx of spam, we have had to impose restrictions on new accounts. Please see [this wiki page](https://gitlab.freedesktop.org/freedesktop/freedesktop/-/wikis/home) for instructions on how to get full permissions. Sorry for the inconvenience.

# Fix double free when texture allocation fails + fix a null pointer deref

Code

* Review changes
* Check out branch
* ---
* Download
* [Patches](/virgl/virglrenderer/-/merge_requests/340.patch)
* [Plain diff](/virgl/virglrenderer/-/merge_requests/340.diff)

[Gert Wollny](/gerddie) requested to merge  [gerddie/virglrenderer:fix-double-free-154](/gerddie/virglrenderer/-/tree/fix-double-free-154 "gerddie/virglrenderer:fix-double-free-154")
 into [master](/virgl/virglrenderer/-/tree/master "master") Jan 13, 2020

* [Overview
  1](/virgl/virglrenderer/-/merge_requests/340)
* [Commits
  4](/virgl/virglrenderer/-/merge_requests/340/commits)
* [Pipelines
  8](/virgl/virglrenderer/-/merge_requests/340/pipelines)
* [Changes
  1](/virgl/virglrenderer/-/merge_requests/340/diffs)

Expand

(1) The struct holding the resource is allocated outside `vrend_renderer_resource_allocated_texture`, and when the texture allocation itself fails, then this struct is freed after returning from that call (or for the intermediate blit texture it is asserted that texture allocation doesn't fail, because there it should never fail). Therefore, the struct must not be freed inside `vrend_renderer_resource_allocated_texture`

(2) when one tries to launch a grid but no CS was sent before, then a null pointer dereference hit, this MR adds a test and fixes this.

Fixes #154
Fixes #155

Edited Jan 15, 2020 by [Gert Wollny](/gerddie)

## Merge request reports

Assignee
Loading

Reviewers
Loading

Request review fromRequest review fromLoading

Time tracking
Loading

Loading



=== Content from gitlab.freedesktop.org_be41d1f4_20250119_124156.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Register](/users/sign_up)

## Admin message

Due to an influx of spam, we have had to impose restrictions on new accounts. Please see [this wiki page](https://gitlab.freedesktop.org/freedesktop/freedesktop/-/wikis/home) for instructions on how to get full permissions. Sorry for the inconvenience.

# Fix double free when texture allocation fails + fix a null pointer deref

Code

* Review changes
* Check out branch
* ---
* Download
* [Patches](/virgl/virglrenderer/-/merge_requests/340.patch)
* [Plain diff](/virgl/virglrenderer/-/merge_requests/340.diff)

[Gert Wollny](/gerddie) requested to merge  [gerddie/virglrenderer:fix-double-free-154](/gerddie/virglrenderer/-/tree/fix-double-free-154 "gerddie/virglrenderer:fix-double-free-154")
 into [master](/virgl/virglrenderer/-/tree/master "master") Jan 13, 2020

* [Overview
  1](/virgl/virglrenderer/-/merge_requests/340)
* [Commits
  4](/virgl/virglrenderer/-/merge_requests/340/commits)
* [Pipelines
  8](/virgl/virglrenderer/-/merge_requests/340/pipelines)
* [Changes
  1](/virgl/virglrenderer/-/merge_requests/340/diffs)

Expand

(1) The struct holding the resource is allocated outside `vrend_renderer_resource_allocated_texture`, and when the texture allocation itself fails, then this struct is freed after returning from that call (or for the intermediate blit texture it is asserted that texture allocation doesn't fail, because there it should never fail). Therefore, the struct must not be freed inside `vrend_renderer_resource_allocated_texture`

(2) when one tries to launch a grid but no CS was sent before, then a null pointer dereference hit, this MR adds a test and fixes this.

Fixes #154
Fixes #155

Edited Jan 15, 2020 by [Gert Wollny](/gerddie)

## Merge request reports

Assignee
Loading

Reviewers
Loading

Request review fromRequest review fromLoading

Time tracking
Loading

Loading


